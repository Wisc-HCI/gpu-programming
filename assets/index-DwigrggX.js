function Aq(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var Hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function n_(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var zG={exports:{}},$I={},UG={exports:{}},Ns={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S$=Symbol.for("react.element"),Iq=Symbol.for("react.portal"),Rq=Symbol.for("react.fragment"),kq=Symbol.for("react.strict_mode"),Oq=Symbol.for("react.profiler"),Lq=Symbol.for("react.provider"),Dq=Symbol.for("react.context"),Nq=Symbol.for("react.forward_ref"),Bq=Symbol.for("react.suspense"),Pq=Symbol.for("react.memo"),Fq=Symbol.for("react.lazy"),YF=Symbol.iterator;function zq(n){return n===null||typeof n!="object"?null:(n=YF&&n[YF]||n["@@iterator"],typeof n=="function"?n:null)}var HG={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GG=Object.assign,WG={};function EE(n,e,t){this.props=n,this.context=e,this.refs=WG,this.updater=t||HG}EE.prototype.isReactComponent={};EE.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};EE.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function VG(){}VG.prototype=EE.prototype;function wN(n,e,t){this.props=n,this.context=e,this.refs=WG,this.updater=t||HG}var $N=wN.prototype=new VG;$N.constructor=wN;GG($N,EE.prototype);$N.isPureReactComponent=!0;var KF=Array.isArray,jG=Object.prototype.hasOwnProperty,CN={current:null},XG={key:!0,ref:!0,__self:!0,__source:!0};function YG(n,e,t){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)jG.call(e,i)&&!XG.hasOwnProperty(i)&&(s[i]=e[i]);var u=arguments.length-2;if(u===1)s.children=t;else if(1<u){for(var d=Array(u),p=0;p<u;p++)d[p]=arguments[p+2];s.children=d}if(n&&n.defaultProps)for(i in u=n.defaultProps,u)s[i]===void 0&&(s[i]=u[i]);return{$$typeof:S$,type:n,key:o,ref:l,props:s,_owner:CN.current}}function Uq(n,e){return{$$typeof:S$,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function MN(n){return typeof n=="object"&&n!==null&&n.$$typeof===S$}function Hq(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var JF=/\/+/g;function fk(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Hq(""+n.key):e.toString(36)}function jM(n,e,t,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var l=!1;if(n===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case S$:case Iq:l=!0}}if(l)return l=n,s=s(l),n=i===""?"."+fk(l,0):i,KF(s)?(t="",n!=null&&(t=n.replace(JF,"$&/")+"/"),jM(s,e,t,"",function(p){return p})):s!=null&&(MN(s)&&(s=Uq(s,t+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(JF,"$&/")+"/")+n)),e.push(s)),1;if(l=0,i=i===""?".":i+":",KF(n))for(var u=0;u<n.length;u++){o=n[u];var d=i+fk(o,u);l+=jM(o,e,t,d,s)}else if(d=zq(n),typeof d=="function")for(n=d.call(n),u=0;!(o=n.next()).done;)o=o.value,d=i+fk(o,u++),l+=jM(o,e,t,d,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Y$(n,e,t){if(n==null)return n;var i=[],s=0;return jM(n,i,"","",function(o){return e.call(t,o,s++)}),i}function Gq(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var pf={current:null},XM={transition:null},Wq={ReactCurrentDispatcher:pf,ReactCurrentBatchConfig:XM,ReactCurrentOwner:CN};Ns.Children={map:Y$,forEach:function(n,e,t){Y$(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Y$(n,function(){e++}),e},toArray:function(n){return Y$(n,function(e){return e})||[]},only:function(n){if(!MN(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ns.Component=EE;Ns.Fragment=Rq;Ns.Profiler=Oq;Ns.PureComponent=wN;Ns.StrictMode=kq;Ns.Suspense=Bq;Ns.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wq;Ns.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=GG({},n.props),s=n.key,o=n.ref,l=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=CN.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var u=n.type.defaultProps;for(d in e)jG.call(e,d)&&!XG.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=t;else if(1<d){u=Array(d);for(var p=0;p<d;p++)u[p]=arguments[p+2];i.children=u}return{$$typeof:S$,type:n.type,key:s,ref:o,props:i,_owner:l}};Ns.createContext=function(n){return n={$$typeof:Dq,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Lq,_context:n},n.Consumer=n};Ns.createElement=YG;Ns.createFactory=function(n){var e=YG.bind(null,n);return e.type=n,e};Ns.createRef=function(){return{current:null}};Ns.forwardRef=function(n){return{$$typeof:Nq,render:n}};Ns.isValidElement=MN;Ns.lazy=function(n){return{$$typeof:Fq,_payload:{_status:-1,_result:n},_init:Gq}};Ns.memo=function(n,e){return{$$typeof:Pq,type:n,compare:e===void 0?null:e}};Ns.startTransition=function(n){var e=XM.transition;XM.transition={};try{n()}finally{XM.transition=e}};Ns.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ns.useCallback=function(n,e){return pf.current.useCallback(n,e)};Ns.useContext=function(n){return pf.current.useContext(n)};Ns.useDebugValue=function(){};Ns.useDeferredValue=function(n){return pf.current.useDeferredValue(n)};Ns.useEffect=function(n,e){return pf.current.useEffect(n,e)};Ns.useId=function(){return pf.current.useId()};Ns.useImperativeHandle=function(n,e,t){return pf.current.useImperativeHandle(n,e,t)};Ns.useInsertionEffect=function(n,e){return pf.current.useInsertionEffect(n,e)};Ns.useLayoutEffect=function(n,e){return pf.current.useLayoutEffect(n,e)};Ns.useMemo=function(n,e){return pf.current.useMemo(n,e)};Ns.useReducer=function(n,e,t){return pf.current.useReducer(n,e,t)};Ns.useRef=function(n){return pf.current.useRef(n)};Ns.useState=function(n){return pf.current.useState(n)};Ns.useSyncExternalStore=function(n,e,t){return pf.current.useSyncExternalStore(n,e,t)};Ns.useTransition=function(){return pf.current.useTransition()};Ns.version="18.2.0";UG.exports=Ns;var ge=UG.exports;const Vr=O1(ge),oL=Aq({__proto__:null,default:Vr},[ge]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vq=ge,jq=Symbol.for("react.element"),Xq=Symbol.for("react.fragment"),Yq=Object.prototype.hasOwnProperty,Kq=Vq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jq={key:!0,ref:!0,__self:!0,__source:!0};function KG(n,e,t){var i,s={},o=null,l=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)Yq.call(e,i)&&!Jq.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:jq,type:n,key:o,ref:l,props:s,_owner:Kq.current}}$I.Fragment=Xq;$I.jsx=KG;$I.jsxs=KG;zG.exports=$I;var Pe=zG.exports,aL={},JG={exports:{}},Om={},qG={exports:{}},QG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(q,oe){var se=q.length;q.push(oe);e:for(;0<se;){var pe=se-1>>>1,Se=q[pe];if(0<s(Se,oe))q[pe]=oe,q[se]=Se,se=pe;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var oe=q[0],se=q.pop();if(se!==oe){q[0]=se;e:for(var pe=0,Se=q.length,Fe=Se>>>1;pe<Fe;){var Re=2*(pe+1)-1,qe=q[Re],Ne=Re+1,it=q[Ne];if(0>s(qe,se))Ne<Se&&0>s(it,qe)?(q[pe]=it,q[Ne]=se,pe=Ne):(q[pe]=qe,q[Re]=se,pe=Re);else if(Ne<Se&&0>s(it,se))q[pe]=it,q[Ne]=se,pe=Ne;else break e}}return oe}function s(q,oe){var se=q.sortIndex-oe.sortIndex;return se!==0?se:q.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],_=1,v=null,b=3,E=!1,C=!1,M=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(q){for(var oe=t(p);oe!==null;){if(oe.callback===null)i(p);else if(oe.startTime<=q)i(p),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=t(p)}}function B(q){if(M=!1,P(q),!C)if(t(d)!==null)C=!0,be(z);else{var oe=t(p);oe!==null&&$e(B,oe.startTime-q)}}function z(q,oe){C=!1,M&&(M=!1,L(H),H=-1),E=!0;var se=b;try{for(P(oe),v=t(d);v!==null&&(!(v.expirationTime>oe)||q&&!J());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,b=v.priorityLevel;var Se=pe(v.expirationTime<=oe);oe=n.unstable_now(),typeof Se=="function"?v.callback=Se:v===t(d)&&i(d),P(oe)}else i(d);v=t(d)}if(v!==null)var Fe=!0;else{var Re=t(p);Re!==null&&$e(B,Re.startTime-oe),Fe=!1}return Fe}finally{v=null,b=se,E=!1}}var G=!1,j=null,H=-1,Z=5,ae=-1;function J(){return!(n.unstable_now()-ae<Z)}function te(){if(j!==null){var q=n.unstable_now();ae=q;var oe=!0;try{oe=j(!0,q)}finally{oe?he():(G=!1,j=null)}}else G=!1}var he;if(typeof O=="function")he=function(){O(te)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ce=le.port2;le.port1.onmessage=te,he=function(){ce.postMessage(null)}}else he=function(){I(te,0)};function be(q){j=q,G||(G=!0,he())}function $e(q,oe){H=I(function(){q(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){C||E||(C=!0,be(z))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(q){switch(b){case 1:case 2:case 3:var oe=3;break;default:oe=b}var se=b;b=oe;try{return q()}finally{b=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,oe){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=b;b=q;try{return oe()}finally{b=se}},n.unstable_scheduleCallback=function(q,oe,se){var pe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?pe+se:pe):se=pe,q){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=se+Se,q={id:_++,callback:oe,priorityLevel:q,startTime:se,expirationTime:Se,sortIndex:-1},se>pe?(q.sortIndex=se,e(p,q),t(d)===null&&q===t(p)&&(M?(L(H),H=-1):M=!0,$e(B,se-pe))):(q.sortIndex=Se,e(d,q),C||E||(C=!0,be(z))),q},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(q){var oe=b;return function(){var se=b;b=oe;try{return q.apply(this,arguments)}finally{b=se}}}})(QG);qG.exports=QG;var qq=qG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZG=ge,Im=qq;function xn(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e6=new Set,xw={};function L1(n,e){VS(n,e),VS(n+"Capture",e)}function VS(n,e){for(xw[n]=e,n=0;n<e.length;n++)e6.add(e[n])}var ry=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lL=Object.prototype.hasOwnProperty,Qq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qF={},QF={};function Zq(n){return lL.call(QF,n)?!0:lL.call(qF,n)?!1:Qq.test(n)?QF[n]=!0:(qF[n]=!0,!1)}function eQ(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function tQ(n,e,t,i){if(e===null||typeof e>"u"||eQ(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ff(n,e,t,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var ep={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ep[n]=new ff(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ep[e]=new ff(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ep[n]=new ff(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ep[n]=new ff(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ep[n]=new ff(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ep[n]=new ff(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ep[n]=new ff(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ep[n]=new ff(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ep[n]=new ff(n,5,!1,n.toLowerCase(),null,!1,!1)});var AN=/[\-:]([a-z])/g;function IN(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(AN,IN);ep[e]=new ff(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(AN,IN);ep[e]=new ff(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(AN,IN);ep[e]=new ff(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ep[n]=new ff(n,1,!1,n.toLowerCase(),null,!1,!1)});ep.xlinkHref=new ff("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ep[n]=new ff(n,1,!1,n.toLowerCase(),null,!0,!0)});function RN(n,e,t,i){var s=ep.hasOwnProperty(e)?ep[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tQ(e,t,s,i)&&(t=null),i||s===null?Zq(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var ly=ZG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K$=Symbol.for("react.element"),fS=Symbol.for("react.portal"),mS=Symbol.for("react.fragment"),kN=Symbol.for("react.strict_mode"),uL=Symbol.for("react.profiler"),t6=Symbol.for("react.provider"),n6=Symbol.for("react.context"),ON=Symbol.for("react.forward_ref"),cL=Symbol.for("react.suspense"),hL=Symbol.for("react.suspense_list"),LN=Symbol.for("react.memo"),ev=Symbol.for("react.lazy"),r6=Symbol.for("react.offscreen"),ZF=Symbol.iterator;function ix(n){return n===null||typeof n!="object"?null:(n=ZF&&n[ZF]||n["@@iterator"],typeof n=="function"?n:null)}var oc=Object.assign,mk;function jx(n){if(mk===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);mk=e&&e[1]||""}return`
`+mk+n}var gk=!1;function _k(n,e){if(!n||gk)return"";gk=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(n,[],e)}else{try{e.call()}catch(p){i=p}n.call(e.prototype)}else{try{throw Error()}catch(p){i=p}n()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,u=o.length-1;1<=l&&0<=u&&s[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(s[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||s[l]!==o[u]){var d=`
`+s[l].replace(" at new "," at ");return n.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",n.displayName)),d}while(1<=l&&0<=u);break}}}finally{gk=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?jx(n):""}function nQ(n){switch(n.tag){case 5:return jx(n.type);case 16:return jx("Lazy");case 13:return jx("Suspense");case 19:return jx("SuspenseList");case 0:case 2:case 15:return n=_k(n.type,!1),n;case 11:return n=_k(n.type.render,!1),n;case 1:return n=_k(n.type,!0),n;default:return""}}function dL(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case mS:return"Fragment";case fS:return"Portal";case uL:return"Profiler";case kN:return"StrictMode";case cL:return"Suspense";case hL:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case n6:return(n.displayName||"Context")+".Consumer";case t6:return(n._context.displayName||"Context")+".Provider";case ON:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case LN:return e=n.displayName||null,e!==null?e:dL(n.type)||"Memo";case ev:e=n._payload,n=n._init;try{return dL(n(e))}catch{}}return null}function rQ(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dL(e);case 8:return e===kN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tv(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function i6(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iQ(n){var e=i6(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function J$(n){n._valueTracker||(n._valueTracker=iQ(n))}function s6(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=i6(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function AA(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function pL(n,e){var t=e.checked;return oc({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function e3(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Tv(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function o6(n,e){e=e.checked,e!=null&&RN(n,"checked",e,!1)}function fL(n,e){o6(n,e);var t=Tv(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?mL(n,e.type,t):e.hasOwnProperty("defaultValue")&&mL(n,e.type,Tv(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function t3(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function mL(n,e,t){(e!=="number"||AA(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Xx=Array.isArray;function kS(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Tv(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function gL(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(xn(91));return oc({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function n3(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(xn(92));if(Xx(t)){if(1<t.length)throw Error(xn(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Tv(t)}}function a6(n,e){var t=Tv(e.value),i=Tv(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function r3(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function l6(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _L(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?l6(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var q$,u6=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(q$=q$||document.createElement("div"),q$.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=q$.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function ww(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var iw={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sQ=["Webkit","ms","Moz","O"];Object.keys(iw).forEach(function(n){sQ.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),iw[e]=iw[n]})});function c6(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||iw.hasOwnProperty(n)&&iw[n]?(""+e).trim():e+"px"}function h6(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=c6(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var oQ=oc({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yL(n,e){if(e){if(oQ[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(xn(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(xn(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(xn(61))}if(e.style!=null&&typeof e.style!="object")throw Error(xn(62))}}function vL(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bL=null;function DN(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var TL=null,OS=null,LS=null;function i3(n){if(n=w$(n)){if(typeof TL!="function")throw Error(xn(280));var e=n.stateNode;e&&(e=RI(e),TL(n.stateNode,n.type,e))}}function d6(n){OS?LS?LS.push(n):LS=[n]:OS=n}function p6(){if(OS){var n=OS,e=LS;if(LS=OS=null,i3(n),e)for(n=0;n<e.length;n++)i3(e[n])}}function f6(n,e){return n(e)}function m6(){}var yk=!1;function g6(n,e,t){if(yk)return n(e,t);yk=!0;try{return f6(n,e,t)}finally{yk=!1,(OS!==null||LS!==null)&&(m6(),p6())}}function $w(n,e){var t=n.stateNode;if(t===null)return null;var i=RI(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(xn(231,e,typeof t));return t}var SL=!1;if(ry)try{var sx={};Object.defineProperty(sx,"passive",{get:function(){SL=!0}}),window.addEventListener("test",sx,sx),window.removeEventListener("test",sx,sx)}catch{SL=!1}function aQ(n,e,t,i,s,o,l,u,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(t,p)}catch(_){this.onError(_)}}var sw=!1,IA=null,RA=!1,EL=null,lQ={onError:function(n){sw=!0,IA=n}};function uQ(n,e,t,i,s,o,l,u,d){sw=!1,IA=null,aQ.apply(lQ,arguments)}function cQ(n,e,t,i,s,o,l,u,d){if(uQ.apply(this,arguments),sw){if(sw){var p=IA;sw=!1,IA=null}else throw Error(xn(198));RA||(RA=!0,EL=p)}}function D1(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function _6(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function s3(n){if(D1(n)!==n)throw Error(xn(188))}function hQ(n){var e=n.alternate;if(!e){if(e=D1(n),e===null)throw Error(xn(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===t)return s3(s),n;if(o===i)return s3(s),e;o=o.sibling}throw Error(xn(188))}if(t.return!==i.return)t=s,i=o;else{for(var l=!1,u=s.child;u;){if(u===t){l=!0,t=s,i=o;break}if(u===i){l=!0,i=s,t=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===t){l=!0,t=o,i=s;break}if(u===i){l=!0,i=o,t=s;break}u=u.sibling}if(!l)throw Error(xn(189))}}if(t.alternate!==i)throw Error(xn(190))}if(t.tag!==3)throw Error(xn(188));return t.stateNode.current===t?n:e}function y6(n){return n=hQ(n),n!==null?v6(n):null}function v6(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=v6(n);if(e!==null)return e;n=n.sibling}return null}var b6=Im.unstable_scheduleCallback,o3=Im.unstable_cancelCallback,dQ=Im.unstable_shouldYield,pQ=Im.unstable_requestPaint,sh=Im.unstable_now,fQ=Im.unstable_getCurrentPriorityLevel,NN=Im.unstable_ImmediatePriority,T6=Im.unstable_UserBlockingPriority,kA=Im.unstable_NormalPriority,mQ=Im.unstable_LowPriority,S6=Im.unstable_IdlePriority,CI=null,X0=null;function gQ(n){if(X0&&typeof X0.onCommitFiberRoot=="function")try{X0.onCommitFiberRoot(CI,n,void 0,(n.current.flags&128)===128)}catch{}}var Kg=Math.clz32?Math.clz32:vQ,_Q=Math.log,yQ=Math.LN2;function vQ(n){return n>>>=0,n===0?32:31-(_Q(n)/yQ|0)|0}var Q$=64,Z$=4194304;function Yx(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function OA(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,l=t&268435455;if(l!==0){var u=l&~s;u!==0?i=Yx(u):(o&=l,o!==0&&(i=Yx(o)))}else l=t&~s,l!==0?i=Yx(l):o!==0&&(i=Yx(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Kg(e),s=1<<t,i|=n[t],e&=~s;return i}function bQ(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TQ(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var l=31-Kg(o),u=1<<l,d=s[l];d===-1?(!(u&t)||u&i)&&(s[l]=bQ(u,e)):d<=e&&(n.expiredLanes|=u),o&=~u}}function xL(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function E6(){var n=Q$;return Q$<<=1,!(Q$&4194240)&&(Q$=64),n}function vk(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function E$(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Kg(e),n[e]=t}function SQ(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Kg(t),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~o}}function BN(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Kg(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var Ca=0;function x6(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var w6,PN,$6,C6,M6,wL=!1,eC=[],cv=null,hv=null,dv=null,Cw=new Map,Mw=new Map,rv=[],EQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a3(n,e){switch(n){case"focusin":case"focusout":cv=null;break;case"dragenter":case"dragleave":hv=null;break;case"mouseover":case"mouseout":dv=null;break;case"pointerover":case"pointerout":Cw.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mw.delete(e.pointerId)}}function ox(n,e,t,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=w$(e),e!==null&&PN(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function xQ(n,e,t,i,s){switch(e){case"focusin":return cv=ox(cv,n,e,t,i,s),!0;case"dragenter":return hv=ox(hv,n,e,t,i,s),!0;case"mouseover":return dv=ox(dv,n,e,t,i,s),!0;case"pointerover":var o=s.pointerId;return Cw.set(o,ox(Cw.get(o)||null,n,e,t,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Mw.set(o,ox(Mw.get(o)||null,n,e,t,i,s)),!0}return!1}function A6(n){var e=Yb(n.target);if(e!==null){var t=D1(e);if(t!==null){if(e=t.tag,e===13){if(e=_6(t),e!==null){n.blockedOn=e,M6(n.priority,function(){$6(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function YM(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=$L(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);bL=i,t.target.dispatchEvent(i),bL=null}else return e=w$(t),e!==null&&PN(e),n.blockedOn=t,!1;e.shift()}return!0}function l3(n,e,t){YM(n)&&t.delete(e)}function wQ(){wL=!1,cv!==null&&YM(cv)&&(cv=null),hv!==null&&YM(hv)&&(hv=null),dv!==null&&YM(dv)&&(dv=null),Cw.forEach(l3),Mw.forEach(l3)}function ax(n,e){n.blockedOn===e&&(n.blockedOn=null,wL||(wL=!0,Im.unstable_scheduleCallback(Im.unstable_NormalPriority,wQ)))}function Aw(n){function e(s){return ax(s,n)}if(0<eC.length){ax(eC[0],n);for(var t=1;t<eC.length;t++){var i=eC[t];i.blockedOn===n&&(i.blockedOn=null)}}for(cv!==null&&ax(cv,n),hv!==null&&ax(hv,n),dv!==null&&ax(dv,n),Cw.forEach(e),Mw.forEach(e),t=0;t<rv.length;t++)i=rv[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<rv.length&&(t=rv[0],t.blockedOn===null);)A6(t),t.blockedOn===null&&rv.shift()}var DS=ly.ReactCurrentBatchConfig,LA=!0;function $Q(n,e,t,i){var s=Ca,o=DS.transition;DS.transition=null;try{Ca=1,FN(n,e,t,i)}finally{Ca=s,DS.transition=o}}function CQ(n,e,t,i){var s=Ca,o=DS.transition;DS.transition=null;try{Ca=4,FN(n,e,t,i)}finally{Ca=s,DS.transition=o}}function FN(n,e,t,i){if(LA){var s=$L(n,e,t,i);if(s===null)Ak(n,e,i,DA,t),a3(n,i);else if(xQ(s,n,e,t,i))i.stopPropagation();else if(a3(n,i),e&4&&-1<EQ.indexOf(n)){for(;s!==null;){var o=w$(s);if(o!==null&&w6(o),o=$L(n,e,t,i),o===null&&Ak(n,e,i,DA,t),o===s)break;s=o}s!==null&&i.stopPropagation()}else Ak(n,e,i,null,t)}}var DA=null;function $L(n,e,t,i){if(DA=null,n=DN(i),n=Yb(n),n!==null)if(e=D1(n),e===null)n=null;else if(t=e.tag,t===13){if(n=_6(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return DA=n,null}function I6(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fQ()){case NN:return 1;case T6:return 4;case kA:case mQ:return 16;case S6:return 536870912;default:return 16}default:return 16}}var sv=null,zN=null,KM=null;function R6(){if(KM)return KM;var n,e=zN,t=e.length,i,s="value"in sv?sv.value:sv.textContent,o=s.length;for(n=0;n<t&&e[n]===s[n];n++);var l=t-n;for(i=1;i<=l&&e[t-i]===s[o-i];i++);return KM=s.slice(n,1<i?1-i:void 0)}function JM(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function tC(){return!0}function u3(){return!1}function Lm(n){function e(t,i,s,o,l){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in n)n.hasOwnProperty(u)&&(t=n[u],this[u]=t?t(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?tC:u3,this.isPropagationStopped=u3,this}return oc(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=tC)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=tC)},persist:function(){},isPersistent:tC}),e}var xE={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},UN=Lm(xE),x$=oc({},xE,{view:0,detail:0}),MQ=Lm(x$),bk,Tk,lx,MI=oc({},x$,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:HN,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==lx&&(lx&&n.type==="mousemove"?(bk=n.screenX-lx.screenX,Tk=n.screenY-lx.screenY):Tk=bk=0,lx=n),bk)},movementY:function(n){return"movementY"in n?n.movementY:Tk}}),c3=Lm(MI),AQ=oc({},MI,{dataTransfer:0}),IQ=Lm(AQ),RQ=oc({},x$,{relatedTarget:0}),Sk=Lm(RQ),kQ=oc({},xE,{animationName:0,elapsedTime:0,pseudoElement:0}),OQ=Lm(kQ),LQ=oc({},xE,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),DQ=Lm(LQ),NQ=oc({},xE,{data:0}),h3=Lm(NQ),BQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zQ(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=FQ[n])?!!e[n]:!1}function HN(){return zQ}var UQ=oc({},x$,{key:function(n){if(n.key){var e=BQ[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=JM(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?PQ[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:HN,charCode:function(n){return n.type==="keypress"?JM(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?JM(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),HQ=Lm(UQ),GQ=oc({},MI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d3=Lm(GQ),WQ=oc({},x$,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:HN}),VQ=Lm(WQ),jQ=oc({},xE,{propertyName:0,elapsedTime:0,pseudoElement:0}),XQ=Lm(jQ),YQ=oc({},MI,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),KQ=Lm(YQ),JQ=[9,13,27,32],GN=ry&&"CompositionEvent"in window,ow=null;ry&&"documentMode"in document&&(ow=document.documentMode);var qQ=ry&&"TextEvent"in window&&!ow,k6=ry&&(!GN||ow&&8<ow&&11>=ow),p3=" ",f3=!1;function O6(n,e){switch(n){case"keyup":return JQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L6(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var gS=!1;function QQ(n,e){switch(n){case"compositionend":return L6(e);case"keypress":return e.which!==32?null:(f3=!0,p3);case"textInput":return n=e.data,n===p3&&f3?null:n;default:return null}}function ZQ(n,e){if(gS)return n==="compositionend"||!GN&&O6(n,e)?(n=R6(),KM=zN=sv=null,gS=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return k6&&e.locale!=="ko"?null:e.data;default:return null}}var eZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m3(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!eZ[n.type]:e==="textarea"}function D6(n,e,t,i){d6(i),e=NA(e,"onChange"),0<e.length&&(t=new UN("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var aw=null,Iw=null;function tZ(n){j6(n,0)}function AI(n){var e=vS(n);if(s6(e))return n}function nZ(n,e){if(n==="change")return e}var N6=!1;if(ry){var Ek;if(ry){var xk="oninput"in document;if(!xk){var g3=document.createElement("div");g3.setAttribute("oninput","return;"),xk=typeof g3.oninput=="function"}Ek=xk}else Ek=!1;N6=Ek&&(!document.documentMode||9<document.documentMode)}function _3(){aw&&(aw.detachEvent("onpropertychange",B6),Iw=aw=null)}function B6(n){if(n.propertyName==="value"&&AI(Iw)){var e=[];D6(e,Iw,n,DN(n)),g6(tZ,e)}}function rZ(n,e,t){n==="focusin"?(_3(),aw=e,Iw=t,aw.attachEvent("onpropertychange",B6)):n==="focusout"&&_3()}function iZ(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return AI(Iw)}function sZ(n,e){if(n==="click")return AI(e)}function oZ(n,e){if(n==="input"||n==="change")return AI(e)}function aZ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Zg=typeof Object.is=="function"?Object.is:aZ;function Rw(n,e){if(Zg(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!lL.call(e,s)||!Zg(n[s],e[s]))return!1}return!0}function y3(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function v3(n,e){var t=y3(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=y3(t)}}function P6(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?P6(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function F6(){for(var n=window,e=AA();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=AA(n.document)}return e}function WN(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function lZ(n){var e=F6(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&P6(t.ownerDocument.documentElement,t)){if(i!==null&&WN(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=v3(t,o);var l=v3(t,i);s&&l&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==l.node||n.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var uZ=ry&&"documentMode"in document&&11>=document.documentMode,_S=null,CL=null,lw=null,ML=!1;function b3(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ML||_S==null||_S!==AA(i)||(i=_S,"selectionStart"in i&&WN(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),lw&&Rw(lw,i)||(lw=i,i=NA(CL,"onSelect"),0<i.length&&(e=new UN("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=_S)))}function nC(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var yS={animationend:nC("Animation","AnimationEnd"),animationiteration:nC("Animation","AnimationIteration"),animationstart:nC("Animation","AnimationStart"),transitionend:nC("Transition","TransitionEnd")},wk={},z6={};ry&&(z6=document.createElement("div").style,"AnimationEvent"in window||(delete yS.animationend.animation,delete yS.animationiteration.animation,delete yS.animationstart.animation),"TransitionEvent"in window||delete yS.transitionend.transition);function II(n){if(wk[n])return wk[n];if(!yS[n])return n;var e=yS[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in z6)return wk[n]=e[t];return n}var U6=II("animationend"),H6=II("animationiteration"),G6=II("animationstart"),W6=II("transitionend"),V6=new Map,T3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Av(n,e){V6.set(n,e),L1(e,[n])}for(var $k=0;$k<T3.length;$k++){var Ck=T3[$k],cZ=Ck.toLowerCase(),hZ=Ck[0].toUpperCase()+Ck.slice(1);Av(cZ,"on"+hZ)}Av(U6,"onAnimationEnd");Av(H6,"onAnimationIteration");Av(G6,"onAnimationStart");Av("dblclick","onDoubleClick");Av("focusin","onFocus");Av("focusout","onBlur");Av(W6,"onTransitionEnd");VS("onMouseEnter",["mouseout","mouseover"]);VS("onMouseLeave",["mouseout","mouseover"]);VS("onPointerEnter",["pointerout","pointerover"]);VS("onPointerLeave",["pointerout","pointerover"]);L1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));L1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));L1("onBeforeInput",["compositionend","keypress","textInput","paste"]);L1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));L1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));L1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kx));function S3(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,cQ(i,e,void 0,n),n.currentTarget=null}function j6(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var u=i[l],d=u.instance,p=u.currentTarget;if(u=u.listener,d!==o&&s.isPropagationStopped())break e;S3(s,u,p),o=d}else for(l=0;l<i.length;l++){if(u=i[l],d=u.instance,p=u.currentTarget,u=u.listener,d!==o&&s.isPropagationStopped())break e;S3(s,u,p),o=d}}}if(RA)throw n=EL,RA=!1,EL=null,n}function cu(n,e){var t=e[OL];t===void 0&&(t=e[OL]=new Set);var i=n+"__bubble";t.has(i)||(X6(e,n,2,!1),t.add(i))}function Mk(n,e,t){var i=0;e&&(i|=4),X6(t,n,i,e)}var rC="_reactListening"+Math.random().toString(36).slice(2);function kw(n){if(!n[rC]){n[rC]=!0,e6.forEach(function(t){t!=="selectionchange"&&(dZ.has(t)||Mk(t,!1,n),Mk(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[rC]||(e[rC]=!0,Mk("selectionchange",!1,e))}}function X6(n,e,t,i){switch(I6(e)){case 1:var s=$Q;break;case 4:s=CQ;break;default:s=FN}t=s.bind(null,e,t,n),s=void 0,!SL||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Ak(n,e,t,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var u=i.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;u!==null;){if(l=Yb(u),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}u=u.parentNode}}i=i.return}g6(function(){var p=o,_=DN(t),v=[];e:{var b=V6.get(n);if(b!==void 0){var E=UN,C=n;switch(n){case"keypress":if(JM(t)===0)break e;case"keydown":case"keyup":E=HQ;break;case"focusin":C="focus",E=Sk;break;case"focusout":C="blur",E=Sk;break;case"beforeblur":case"afterblur":E=Sk;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=c3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=IQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=VQ;break;case U6:case H6:case G6:E=OQ;break;case W6:E=XQ;break;case"scroll":E=MQ;break;case"wheel":E=KQ;break;case"copy":case"cut":case"paste":E=DQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=d3}var M=(e&4)!==0,I=!M&&n==="scroll",L=M?b!==null?b+"Capture":null:b;M=[];for(var O=p,P;O!==null;){P=O;var B=P.stateNode;if(P.tag===5&&B!==null&&(P=B,L!==null&&(B=$w(O,L),B!=null&&M.push(Ow(O,B,P)))),I)break;O=O.return}0<M.length&&(b=new E(b,C,null,t,_),v.push({event:b,listeners:M}))}}if(!(e&7)){e:{if(b=n==="mouseover"||n==="pointerover",E=n==="mouseout"||n==="pointerout",b&&t!==bL&&(C=t.relatedTarget||t.fromElement)&&(Yb(C)||C[iy]))break e;if((E||b)&&(b=_.window===_?_:(b=_.ownerDocument)?b.defaultView||b.parentWindow:window,E?(C=t.relatedTarget||t.toElement,E=p,C=C?Yb(C):null,C!==null&&(I=D1(C),C!==I||C.tag!==5&&C.tag!==6)&&(C=null)):(E=null,C=p),E!==C)){if(M=c3,B="onMouseLeave",L="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(M=d3,B="onPointerLeave",L="onPointerEnter",O="pointer"),I=E==null?b:vS(E),P=C==null?b:vS(C),b=new M(B,O+"leave",E,t,_),b.target=I,b.relatedTarget=P,B=null,Yb(_)===p&&(M=new M(L,O+"enter",C,t,_),M.target=P,M.relatedTarget=I,B=M),I=B,E&&C)t:{for(M=E,L=C,O=0,P=M;P;P=bT(P))O++;for(P=0,B=L;B;B=bT(B))P++;for(;0<O-P;)M=bT(M),O--;for(;0<P-O;)L=bT(L),P--;for(;O--;){if(M===L||L!==null&&M===L.alternate)break t;M=bT(M),L=bT(L)}M=null}else M=null;E!==null&&E3(v,b,E,M,!1),C!==null&&I!==null&&E3(v,I,C,M,!0)}}e:{if(b=p?vS(p):window,E=b.nodeName&&b.nodeName.toLowerCase(),E==="select"||E==="input"&&b.type==="file")var z=nZ;else if(m3(b))if(N6)z=oZ;else{z=iZ;var G=rZ}else(E=b.nodeName)&&E.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(z=sZ);if(z&&(z=z(n,p))){D6(v,z,t,_);break e}G&&G(n,b,p),n==="focusout"&&(G=b._wrapperState)&&G.controlled&&b.type==="number"&&mL(b,"number",b.value)}switch(G=p?vS(p):window,n){case"focusin":(m3(G)||G.contentEditable==="true")&&(_S=G,CL=p,lw=null);break;case"focusout":lw=CL=_S=null;break;case"mousedown":ML=!0;break;case"contextmenu":case"mouseup":case"dragend":ML=!1,b3(v,t,_);break;case"selectionchange":if(uZ)break;case"keydown":case"keyup":b3(v,t,_)}var j;if(GN)e:{switch(n){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else gS?O6(n,t)&&(H="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(H="onCompositionStart");H&&(k6&&t.locale!=="ko"&&(gS||H!=="onCompositionStart"?H==="onCompositionEnd"&&gS&&(j=R6()):(sv=_,zN="value"in sv?sv.value:sv.textContent,gS=!0)),G=NA(p,H),0<G.length&&(H=new h3(H,n,null,t,_),v.push({event:H,listeners:G}),j?H.data=j:(j=L6(t),j!==null&&(H.data=j)))),(j=qQ?QQ(n,t):ZQ(n,t))&&(p=NA(p,"onBeforeInput"),0<p.length&&(_=new h3("onBeforeInput","beforeinput",null,t,_),v.push({event:_,listeners:p}),_.data=j))}j6(v,e)})}function Ow(n,e,t){return{instance:n,listener:e,currentTarget:t}}function NA(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=$w(n,t),o!=null&&i.unshift(Ow(n,o,s)),o=$w(n,e),o!=null&&i.push(Ow(n,o,s))),n=n.return}return i}function bT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function E3(n,e,t,i,s){for(var o=e._reactName,l=[];t!==null&&t!==i;){var u=t,d=u.alternate,p=u.stateNode;if(d!==null&&d===i)break;u.tag===5&&p!==null&&(u=p,s?(d=$w(t,o),d!=null&&l.unshift(Ow(t,d,u))):s||(d=$w(t,o),d!=null&&l.push(Ow(t,d,u)))),t=t.return}l.length!==0&&n.push({event:e,listeners:l})}var pZ=/\r\n?/g,fZ=/\u0000|\uFFFD/g;function x3(n){return(typeof n=="string"?n:""+n).replace(pZ,`
`).replace(fZ,"")}function iC(n,e,t){if(e=x3(e),x3(n)!==e&&t)throw Error(xn(425))}function BA(){}var AL=null,IL=null;function RL(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kL=typeof setTimeout=="function"?setTimeout:void 0,mZ=typeof clearTimeout=="function"?clearTimeout:void 0,w3=typeof Promise=="function"?Promise:void 0,gZ=typeof queueMicrotask=="function"?queueMicrotask:typeof w3<"u"?function(n){return w3.resolve(null).then(n).catch(_Z)}:kL;function _Z(n){setTimeout(function(){throw n})}function Ik(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),Aw(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);Aw(e)}function pv(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function $3(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var wE=Math.random().toString(36).slice(2),G0="__reactFiber$"+wE,Lw="__reactProps$"+wE,iy="__reactContainer$"+wE,OL="__reactEvents$"+wE,yZ="__reactListeners$"+wE,vZ="__reactHandles$"+wE;function Yb(n){var e=n[G0];if(e)return e;for(var t=n.parentNode;t;){if(e=t[iy]||t[G0]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=$3(n);n!==null;){if(t=n[G0])return t;n=$3(n)}return e}n=t,t=n.parentNode}return null}function w$(n){return n=n[G0]||n[iy],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function vS(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(xn(33))}function RI(n){return n[Lw]||null}var LL=[],bS=-1;function Iv(n){return{current:n}}function du(n){0>bS||(n.current=LL[bS],LL[bS]=null,bS--)}function Gl(n,e){bS++,LL[bS]=n.current,n.current=e}var Sv={},Ip=Iv(Sv),zf=Iv(!1),b1=Sv;function jS(n,e){var t=n.type.contextTypes;if(!t)return Sv;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in t)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Uf(n){return n=n.childContextTypes,n!=null}function PA(){du(zf),du(Ip)}function C3(n,e,t){if(Ip.current!==Sv)throw Error(xn(168));Gl(Ip,e),Gl(zf,t)}function Y6(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(xn(108,rQ(n)||"Unknown",s));return oc({},t,i)}function FA(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Sv,b1=Ip.current,Gl(Ip,n),Gl(zf,zf.current),!0}function M3(n,e,t){var i=n.stateNode;if(!i)throw Error(xn(169));t?(n=Y6(n,e,b1),i.__reactInternalMemoizedMergedChildContext=n,du(zf),du(Ip),Gl(Ip,n)):du(zf),Gl(zf,t)}var W_=null,kI=!1,Rk=!1;function K6(n){W_===null?W_=[n]:W_.push(n)}function bZ(n){kI=!0,K6(n)}function Rv(){if(!Rk&&W_!==null){Rk=!0;var n=0,e=Ca;try{var t=W_;for(Ca=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}W_=null,kI=!1}catch(s){throw W_!==null&&(W_=W_.slice(n+1)),b6(NN,Rv),s}finally{Ca=e,Rk=!1}}return null}var TS=[],SS=0,zA=null,UA=0,og=[],ag=0,T1=null,J_=1,q_="";function Bb(n,e){TS[SS++]=UA,TS[SS++]=zA,zA=n,UA=e}function J6(n,e,t){og[ag++]=J_,og[ag++]=q_,og[ag++]=T1,T1=n;var i=J_;n=q_;var s=32-Kg(i)-1;i&=~(1<<s),t+=1;var o=32-Kg(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,J_=1<<32-Kg(e)+s|t<<s|i,q_=o+n}else J_=1<<o|t<<s|i,q_=n}function VN(n){n.return!==null&&(Bb(n,1),J6(n,1,0))}function jN(n){for(;n===zA;)zA=TS[--SS],TS[SS]=null,UA=TS[--SS],TS[SS]=null;for(;n===T1;)T1=og[--ag],og[ag]=null,q_=og[--ag],og[ag]=null,J_=og[--ag],og[ag]=null}var wm=null,Em=null,Nu=!1,Hg=null;function q6(n,e){var t=cg(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function A3(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,wm=n,Em=pv(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,wm=n,Em=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=T1!==null?{id:J_,overflow:q_}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=cg(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,wm=n,Em=null,!0):!1;default:return!1}}function DL(n){return(n.mode&1)!==0&&(n.flags&128)===0}function NL(n){if(Nu){var e=Em;if(e){var t=e;if(!A3(n,e)){if(DL(n))throw Error(xn(418));e=pv(t.nextSibling);var i=wm;e&&A3(n,e)?q6(i,t):(n.flags=n.flags&-4097|2,Nu=!1,wm=n)}}else{if(DL(n))throw Error(xn(418));n.flags=n.flags&-4097|2,Nu=!1,wm=n}}}function I3(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;wm=n}function sC(n){if(n!==wm)return!1;if(!Nu)return I3(n),Nu=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!RL(n.type,n.memoizedProps)),e&&(e=Em)){if(DL(n))throw Q6(),Error(xn(418));for(;e;)q6(n,e),e=pv(e.nextSibling)}if(I3(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(xn(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Em=pv(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Em=null}}else Em=wm?pv(n.stateNode.nextSibling):null;return!0}function Q6(){for(var n=Em;n;)n=pv(n.nextSibling)}function XS(){Em=wm=null,Nu=!1}function XN(n){Hg===null?Hg=[n]:Hg.push(n)}var TZ=ly.ReactCurrentBatchConfig;function zg(n,e){if(n&&n.defaultProps){e=oc({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var HA=Iv(null),GA=null,ES=null,YN=null;function KN(){YN=ES=GA=null}function JN(n){var e=HA.current;du(HA),n._currentValue=e}function BL(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function NS(n,e){GA=n,YN=ES=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Pf=!0),n.firstContext=null)}function dg(n){var e=n._currentValue;if(YN!==n)if(n={context:n,memoizedValue:e,next:null},ES===null){if(GA===null)throw Error(xn(308));ES=n,GA.dependencies={lanes:0,firstContext:n}}else ES=ES.next=n;return e}var Kb=null;function qN(n){Kb===null?Kb=[n]:Kb.push(n)}function Z6(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,qN(e)):(t.next=s.next,s.next=t),e.interleaved=t,sy(n,i)}function sy(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var tv=!1;function QN(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eW(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Z_(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function fv(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,To&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,sy(n,t)}return s=i.interleaved,s===null?(e.next=e,qN(i)):(e.next=s.next,s.next=e),i.interleaved=e,sy(n,t)}function qM(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,BN(n,t)}}function R3(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?s=o=l:o=o.next=l,t=t.next}while(t!==null);o===null?s=o=e:o=o.next=e}else s=o=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function WA(n,e,t,i){var s=n.updateQueue;tv=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var d=u,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var _=n.alternate;_!==null&&(_=_.updateQueue,u=_.lastBaseUpdate,u!==l&&(u===null?_.firstBaseUpdate=p:u.next=p,_.lastBaseUpdate=d))}if(o!==null){var v=s.baseState;l=0,_=p=d=null,u=o;do{var b=u.lane,E=u.eventTime;if((i&b)===b){_!==null&&(_=_.next={eventTime:E,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=n,M=u;switch(b=e,E=t,M.tag){case 1:if(C=M.payload,typeof C=="function"){v=C.call(E,v,b);break e}v=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=M.payload,b=typeof C=="function"?C.call(E,v,b):C,b==null)break e;v=oc({},v,b);break e;case 2:tv=!0}}u.callback!==null&&u.lane!==0&&(n.flags|=64,b=s.effects,b===null?s.effects=[u]:b.push(u))}else E={eventTime:E,lane:b,tag:u.tag,payload:u.payload,callback:u.callback,next:null},_===null?(p=_=E,d=v):_=_.next=E,l|=b;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;b=u,u=b.next,b.next=null,s.lastBaseUpdate=b,s.shared.pending=null}}while(!0);if(_===null&&(d=v),s.baseState=d,s.firstBaseUpdate=p,s.lastBaseUpdate=_,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);E1|=l,n.lanes=l,n.memoizedState=v}}function k3(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(xn(191,s));s.call(i)}}}var tW=new ZG.Component().refs;function PL(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:oc({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var OI={isMounted:function(n){return(n=n._reactInternals)?D1(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=of(),s=gv(n),o=Z_(i,s);o.payload=e,t!=null&&(o.callback=t),e=fv(n,o,s),e!==null&&(Jg(e,n,s,i),qM(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=of(),s=gv(n),o=Z_(i,s);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=fv(n,o,s),e!==null&&(Jg(e,n,s,i),qM(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=of(),i=gv(n),s=Z_(t,i);s.tag=2,e!=null&&(s.callback=e),e=fv(n,s,i),e!==null&&(Jg(e,n,i,t),qM(e,n,i))}};function O3(n,e,t,i,s,o,l){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!Rw(t,i)||!Rw(s,o):!0}function nW(n,e,t){var i=!1,s=Sv,o=e.contextType;return typeof o=="object"&&o!==null?o=dg(o):(s=Uf(e)?b1:Ip.current,i=e.contextTypes,o=(i=i!=null)?jS(n,s):Sv),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=OI,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function L3(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&OI.enqueueReplaceState(e,e.state,null)}function FL(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs=tW,QN(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=dg(o):(o=Uf(e)?b1:Ip.current,s.context=jS(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(PL(n,e,o,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&OI.enqueueReplaceState(s,s.state,null),WA(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function ux(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(xn(309));var i=t.stateNode}if(!i)throw Error(xn(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var u=s.refs;u===tW&&(u=s.refs={}),l===null?delete u[o]:u[o]=l},e._stringRef=o,e)}if(typeof n!="string")throw Error(xn(284));if(!t._owner)throw Error(xn(290,n))}return n}function oC(n,e){throw n=Object.prototype.toString.call(e),Error(xn(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function D3(n){var e=n._init;return e(n._payload)}function rW(n){function e(L,O){if(n){var P=L.deletions;P===null?(L.deletions=[O],L.flags|=16):P.push(O)}}function t(L,O){if(!n)return null;for(;O!==null;)e(L,O),O=O.sibling;return null}function i(L,O){for(L=new Map;O!==null;)O.key!==null?L.set(O.key,O):L.set(O.index,O),O=O.sibling;return L}function s(L,O){return L=_v(L,O),L.index=0,L.sibling=null,L}function o(L,O,P){return L.index=P,n?(P=L.alternate,P!==null?(P=P.index,P<O?(L.flags|=2,O):P):(L.flags|=2,O)):(L.flags|=1048576,O)}function l(L){return n&&L.alternate===null&&(L.flags|=2),L}function u(L,O,P,B){return O===null||O.tag!==6?(O=Pk(P,L.mode,B),O.return=L,O):(O=s(O,P),O.return=L,O)}function d(L,O,P,B){var z=P.type;return z===mS?_(L,O,P.props.children,B,P.key):O!==null&&(O.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===ev&&D3(z)===O.type)?(B=s(O,P.props),B.ref=ux(L,O,P),B.return=L,B):(B=rA(P.type,P.key,P.props,null,L.mode,B),B.ref=ux(L,O,P),B.return=L,B)}function p(L,O,P,B){return O===null||O.tag!==4||O.stateNode.containerInfo!==P.containerInfo||O.stateNode.implementation!==P.implementation?(O=Fk(P,L.mode,B),O.return=L,O):(O=s(O,P.children||[]),O.return=L,O)}function _(L,O,P,B,z){return O===null||O.tag!==7?(O=u1(P,L.mode,B,z),O.return=L,O):(O=s(O,P),O.return=L,O)}function v(L,O,P){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Pk(""+O,L.mode,P),O.return=L,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case K$:return P=rA(O.type,O.key,O.props,null,L.mode,P),P.ref=ux(L,null,O),P.return=L,P;case fS:return O=Fk(O,L.mode,P),O.return=L,O;case ev:var B=O._init;return v(L,B(O._payload),P)}if(Xx(O)||ix(O))return O=u1(O,L.mode,P,null),O.return=L,O;oC(L,O)}return null}function b(L,O,P,B){var z=O!==null?O.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return z!==null?null:u(L,O,""+P,B);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case K$:return P.key===z?d(L,O,P,B):null;case fS:return P.key===z?p(L,O,P,B):null;case ev:return z=P._init,b(L,O,z(P._payload),B)}if(Xx(P)||ix(P))return z!==null?null:_(L,O,P,B,null);oC(L,P)}return null}function E(L,O,P,B,z){if(typeof B=="string"&&B!==""||typeof B=="number")return L=L.get(P)||null,u(O,L,""+B,z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case K$:return L=L.get(B.key===null?P:B.key)||null,d(O,L,B,z);case fS:return L=L.get(B.key===null?P:B.key)||null,p(O,L,B,z);case ev:var G=B._init;return E(L,O,P,G(B._payload),z)}if(Xx(B)||ix(B))return L=L.get(P)||null,_(O,L,B,z,null);oC(O,B)}return null}function C(L,O,P,B){for(var z=null,G=null,j=O,H=O=0,Z=null;j!==null&&H<P.length;H++){j.index>H?(Z=j,j=null):Z=j.sibling;var ae=b(L,j,P[H],B);if(ae===null){j===null&&(j=Z);break}n&&j&&ae.alternate===null&&e(L,j),O=o(ae,O,H),G===null?z=ae:G.sibling=ae,G=ae,j=Z}if(H===P.length)return t(L,j),Nu&&Bb(L,H),z;if(j===null){for(;H<P.length;H++)j=v(L,P[H],B),j!==null&&(O=o(j,O,H),G===null?z=j:G.sibling=j,G=j);return Nu&&Bb(L,H),z}for(j=i(L,j);H<P.length;H++)Z=E(j,L,H,P[H],B),Z!==null&&(n&&Z.alternate!==null&&j.delete(Z.key===null?H:Z.key),O=o(Z,O,H),G===null?z=Z:G.sibling=Z,G=Z);return n&&j.forEach(function(J){return e(L,J)}),Nu&&Bb(L,H),z}function M(L,O,P,B){var z=ix(P);if(typeof z!="function")throw Error(xn(150));if(P=z.call(P),P==null)throw Error(xn(151));for(var G=z=null,j=O,H=O=0,Z=null,ae=P.next();j!==null&&!ae.done;H++,ae=P.next()){j.index>H?(Z=j,j=null):Z=j.sibling;var J=b(L,j,ae.value,B);if(J===null){j===null&&(j=Z);break}n&&j&&J.alternate===null&&e(L,j),O=o(J,O,H),G===null?z=J:G.sibling=J,G=J,j=Z}if(ae.done)return t(L,j),Nu&&Bb(L,H),z;if(j===null){for(;!ae.done;H++,ae=P.next())ae=v(L,ae.value,B),ae!==null&&(O=o(ae,O,H),G===null?z=ae:G.sibling=ae,G=ae);return Nu&&Bb(L,H),z}for(j=i(L,j);!ae.done;H++,ae=P.next())ae=E(j,L,H,ae.value,B),ae!==null&&(n&&ae.alternate!==null&&j.delete(ae.key===null?H:ae.key),O=o(ae,O,H),G===null?z=ae:G.sibling=ae,G=ae);return n&&j.forEach(function(te){return e(L,te)}),Nu&&Bb(L,H),z}function I(L,O,P,B){if(typeof P=="object"&&P!==null&&P.type===mS&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case K$:e:{for(var z=P.key,G=O;G!==null;){if(G.key===z){if(z=P.type,z===mS){if(G.tag===7){t(L,G.sibling),O=s(G,P.props.children),O.return=L,L=O;break e}}else if(G.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===ev&&D3(z)===G.type){t(L,G.sibling),O=s(G,P.props),O.ref=ux(L,G,P),O.return=L,L=O;break e}t(L,G);break}else e(L,G);G=G.sibling}P.type===mS?(O=u1(P.props.children,L.mode,B,P.key),O.return=L,L=O):(B=rA(P.type,P.key,P.props,null,L.mode,B),B.ref=ux(L,O,P),B.return=L,L=B)}return l(L);case fS:e:{for(G=P.key;O!==null;){if(O.key===G)if(O.tag===4&&O.stateNode.containerInfo===P.containerInfo&&O.stateNode.implementation===P.implementation){t(L,O.sibling),O=s(O,P.children||[]),O.return=L,L=O;break e}else{t(L,O);break}else e(L,O);O=O.sibling}O=Fk(P,L.mode,B),O.return=L,L=O}return l(L);case ev:return G=P._init,I(L,O,G(P._payload),B)}if(Xx(P))return C(L,O,P,B);if(ix(P))return M(L,O,P,B);oC(L,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,O!==null&&O.tag===6?(t(L,O.sibling),O=s(O,P),O.return=L,L=O):(t(L,O),O=Pk(P,L.mode,B),O.return=L,L=O),l(L)):t(L,O)}return I}var YS=rW(!0),iW=rW(!1),$$={},Y0=Iv($$),Dw=Iv($$),Nw=Iv($$);function Jb(n){if(n===$$)throw Error(xn(174));return n}function ZN(n,e){switch(Gl(Nw,e),Gl(Dw,n),Gl(Y0,$$),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_L(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=_L(e,n)}du(Y0),Gl(Y0,e)}function KS(){du(Y0),du(Dw),du(Nw)}function sW(n){Jb(Nw.current);var e=Jb(Y0.current),t=_L(e,n.type);e!==t&&(Gl(Dw,n),Gl(Y0,t))}function eB(n){Dw.current===n&&(du(Y0),du(Dw))}var tc=Iv(0);function VA(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kk=[];function tB(){for(var n=0;n<kk.length;n++)kk[n]._workInProgressVersionPrimary=null;kk.length=0}var QM=ly.ReactCurrentDispatcher,Ok=ly.ReactCurrentBatchConfig,S1=0,ic=null,rd=null,yd=null,jA=!1,uw=!1,Bw=0,SZ=0;function _p(){throw Error(xn(321))}function nB(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Zg(n[t],e[t]))return!1;return!0}function rB(n,e,t,i,s,o){if(S1=o,ic=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,QM.current=n===null||n.memoizedState===null?$Z:CZ,n=t(i,s),uw){o=0;do{if(uw=!1,Bw=0,25<=o)throw Error(xn(301));o+=1,yd=rd=null,e.updateQueue=null,QM.current=MZ,n=t(i,s)}while(uw)}if(QM.current=XA,e=rd!==null&&rd.next!==null,S1=0,yd=rd=ic=null,jA=!1,e)throw Error(xn(300));return n}function iB(){var n=Bw!==0;return Bw=0,n}function F0(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yd===null?ic.memoizedState=yd=n:yd=yd.next=n,yd}function pg(){if(rd===null){var n=ic.alternate;n=n!==null?n.memoizedState:null}else n=rd.next;var e=yd===null?ic.memoizedState:yd.next;if(e!==null)yd=e,rd=n;else{if(n===null)throw Error(xn(310));rd=n,n={memoizedState:rd.memoizedState,baseState:rd.baseState,baseQueue:rd.baseQueue,queue:rd.queue,next:null},yd===null?ic.memoizedState=yd=n:yd=yd.next=n}return yd}function Pw(n,e){return typeof e=="function"?e(n):e}function Lk(n){var e=pg(),t=e.queue;if(t===null)throw Error(xn(311));t.lastRenderedReducer=n;var i=rd,s=i.baseQueue,o=t.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,t.pending=null}if(s!==null){o=s.next,i=i.baseState;var u=l=null,d=null,p=o;do{var _=p.lane;if((S1&_)===_)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:n(i,p.action);else{var v={lane:_,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(u=d=v,l=i):d=d.next=v,ic.lanes|=_,E1|=_}p=p.next}while(p!==null&&p!==o);d===null?l=i:d.next=u,Zg(i,e.memoizedState)||(Pf=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do o=s.lane,ic.lanes|=o,E1|=o,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Dk(n){var e=pg(),t=e.queue;if(t===null)throw Error(xn(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,o=e.memoizedState;if(s!==null){t.pending=null;var l=s=s.next;do o=n(o,l.action),l=l.next;while(l!==s);Zg(o,e.memoizedState)||(Pf=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,i]}function oW(){}function aW(n,e){var t=ic,i=pg(),s=e(),o=!Zg(i.memoizedState,s);if(o&&(i.memoizedState=s,Pf=!0),i=i.queue,sB(cW.bind(null,t,i,n),[n]),i.getSnapshot!==e||o||yd!==null&&yd.memoizedState.tag&1){if(t.flags|=2048,Fw(9,uW.bind(null,t,i,s,e),void 0,null),vd===null)throw Error(xn(349));S1&30||lW(t,e,s)}return s}function lW(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ic.updateQueue,e===null?(e={lastEffect:null,stores:null},ic.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function uW(n,e,t,i){e.value=t,e.getSnapshot=i,hW(e)&&dW(n)}function cW(n,e,t){return t(function(){hW(e)&&dW(n)})}function hW(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Zg(n,t)}catch{return!0}}function dW(n){var e=sy(n,1);e!==null&&Jg(e,n,1,-1)}function N3(n){var e=F0();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pw,lastRenderedState:n},e.queue=n,n=n.dispatch=wZ.bind(null,ic,n),[e.memoizedState,n]}function Fw(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=ic.updateQueue,e===null?(e={lastEffect:null,stores:null},ic.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function pW(){return pg().memoizedState}function ZM(n,e,t,i){var s=F0();ic.flags|=n,s.memoizedState=Fw(1|e,t,void 0,i===void 0?null:i)}function LI(n,e,t,i){var s=pg();i=i===void 0?null:i;var o=void 0;if(rd!==null){var l=rd.memoizedState;if(o=l.destroy,i!==null&&nB(i,l.deps)){s.memoizedState=Fw(e,t,o,i);return}}ic.flags|=n,s.memoizedState=Fw(1|e,t,o,i)}function B3(n,e){return ZM(8390656,8,n,e)}function sB(n,e){return LI(2048,8,n,e)}function fW(n,e){return LI(4,2,n,e)}function mW(n,e){return LI(4,4,n,e)}function gW(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function _W(n,e,t){return t=t!=null?t.concat([n]):null,LI(4,4,gW.bind(null,e,n),t)}function oB(){}function yW(n,e){var t=pg();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&nB(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function vW(n,e){var t=pg();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&nB(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function bW(n,e,t){return S1&21?(Zg(t,e)||(t=E6(),ic.lanes|=t,E1|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Pf=!0),n.memoizedState=t)}function EZ(n,e){var t=Ca;Ca=t!==0&&4>t?t:4,n(!0);var i=Ok.transition;Ok.transition={};try{n(!1),e()}finally{Ca=t,Ok.transition=i}}function TW(){return pg().memoizedState}function xZ(n,e,t){var i=gv(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},SW(n))EW(e,t);else if(t=Z6(n,e,t,i),t!==null){var s=of();Jg(t,n,i,s),xW(t,e,i)}}function wZ(n,e,t){var i=gv(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(SW(n))EW(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,u=o(l,t);if(s.hasEagerState=!0,s.eagerState=u,Zg(u,l)){var d=e.interleaved;d===null?(s.next=s,qN(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}t=Z6(n,e,s,i),t!==null&&(s=of(),Jg(t,n,i,s),xW(t,e,i))}}function SW(n){var e=n.alternate;return n===ic||e!==null&&e===ic}function EW(n,e){uw=jA=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function xW(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,BN(n,t)}}var XA={readContext:dg,useCallback:_p,useContext:_p,useEffect:_p,useImperativeHandle:_p,useInsertionEffect:_p,useLayoutEffect:_p,useMemo:_p,useReducer:_p,useRef:_p,useState:_p,useDebugValue:_p,useDeferredValue:_p,useTransition:_p,useMutableSource:_p,useSyncExternalStore:_p,useId:_p,unstable_isNewReconciler:!1},$Z={readContext:dg,useCallback:function(n,e){return F0().memoizedState=[n,e===void 0?null:e],n},useContext:dg,useEffect:B3,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ZM(4194308,4,gW.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ZM(4194308,4,n,e)},useInsertionEffect:function(n,e){return ZM(4,2,n,e)},useMemo:function(n,e){var t=F0();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=F0();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=xZ.bind(null,ic,n),[i.memoizedState,n]},useRef:function(n){var e=F0();return n={current:n},e.memoizedState=n},useState:N3,useDebugValue:oB,useDeferredValue:function(n){return F0().memoizedState=n},useTransition:function(){var n=N3(!1),e=n[0];return n=EZ.bind(null,n[1]),F0().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=ic,s=F0();if(Nu){if(t===void 0)throw Error(xn(407));t=t()}else{if(t=e(),vd===null)throw Error(xn(349));S1&30||lW(i,e,t)}s.memoizedState=t;var o={value:t,getSnapshot:e};return s.queue=o,B3(cW.bind(null,i,o,n),[n]),i.flags|=2048,Fw(9,uW.bind(null,i,o,t,e),void 0,null),t},useId:function(){var n=F0(),e=vd.identifierPrefix;if(Nu){var t=q_,i=J_;t=(i&~(1<<32-Kg(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Bw++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=SZ++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},CZ={readContext:dg,useCallback:yW,useContext:dg,useEffect:sB,useImperativeHandle:_W,useInsertionEffect:fW,useLayoutEffect:mW,useMemo:vW,useReducer:Lk,useRef:pW,useState:function(){return Lk(Pw)},useDebugValue:oB,useDeferredValue:function(n){var e=pg();return bW(e,rd.memoizedState,n)},useTransition:function(){var n=Lk(Pw)[0],e=pg().memoizedState;return[n,e]},useMutableSource:oW,useSyncExternalStore:aW,useId:TW,unstable_isNewReconciler:!1},MZ={readContext:dg,useCallback:yW,useContext:dg,useEffect:sB,useImperativeHandle:_W,useInsertionEffect:fW,useLayoutEffect:mW,useMemo:vW,useReducer:Dk,useRef:pW,useState:function(){return Dk(Pw)},useDebugValue:oB,useDeferredValue:function(n){var e=pg();return rd===null?e.memoizedState=n:bW(e,rd.memoizedState,n)},useTransition:function(){var n=Dk(Pw)[0],e=pg().memoizedState;return[n,e]},useMutableSource:oW,useSyncExternalStore:aW,useId:TW,unstable_isNewReconciler:!1};function JS(n,e){try{var t="",i=e;do t+=nQ(i),i=i.return;while(i);var s=t}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function Nk(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function zL(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var AZ=typeof WeakMap=="function"?WeakMap:Map;function wW(n,e,t){t=Z_(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){KA||(KA=!0,JL=i),zL(n,e)},t}function $W(n,e,t){t=Z_(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){zL(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){zL(n,e),typeof i!="function"&&(mv===null?mv=new Set([this]):mv.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),t}function P3(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new AZ;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=GZ.bind(null,n,e,t),e.then(n,n))}function F3(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function z3(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Z_(-1,1),e.tag=2,fv(t,e,1))),t.lanes|=1),n)}var IZ=ly.ReactCurrentOwner,Pf=!1;function Qp(n,e,t,i){e.child=n===null?iW(e,null,t,i):YS(e,n.child,t,i)}function U3(n,e,t,i,s){t=t.render;var o=e.ref;return NS(e,s),i=rB(n,e,t,i,o,s),t=iB(),n!==null&&!Pf?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,oy(n,e,s)):(Nu&&t&&VN(e),e.flags|=1,Qp(n,e,i,s),e.child)}function H3(n,e,t,i,s){if(n===null){var o=t.type;return typeof o=="function"&&!fB(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,CW(n,e,o,i,s)):(n=rA(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var l=o.memoizedProps;if(t=t.compare,t=t!==null?t:Rw,t(l,i)&&n.ref===e.ref)return oy(n,e,s)}return e.flags|=1,n=_v(o,i),n.ref=e.ref,n.return=e,e.child=n}function CW(n,e,t,i,s){if(n!==null){var o=n.memoizedProps;if(Rw(o,i)&&n.ref===e.ref)if(Pf=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(Pf=!0);else return e.lanes=n.lanes,oy(n,e,s)}return UL(n,e,t,i,s)}function MW(n,e,t){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gl(wS,bm),bm|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Gl(wS,bm),bm|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:t,Gl(wS,bm),bm|=i}else o!==null?(i=o.baseLanes|t,e.memoizedState=null):i=t,Gl(wS,bm),bm|=i;return Qp(n,e,s,t),e.child}function AW(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function UL(n,e,t,i,s){var o=Uf(t)?b1:Ip.current;return o=jS(e,o),NS(e,s),t=rB(n,e,t,i,o,s),i=iB(),n!==null&&!Pf?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,oy(n,e,s)):(Nu&&i&&VN(e),e.flags|=1,Qp(n,e,t,s),e.child)}function G3(n,e,t,i,s){if(Uf(t)){var o=!0;FA(e)}else o=!1;if(NS(e,s),e.stateNode===null)eA(n,e),nW(e,t,i),FL(e,t,i,s),i=!0;else if(n===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var d=l.context,p=t.contextType;typeof p=="object"&&p!==null?p=dg(p):(p=Uf(t)?b1:Ip.current,p=jS(e,p));var _=t.getDerivedStateFromProps,v=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==i||d!==p)&&L3(e,l,i,p),tv=!1;var b=e.memoizedState;l.state=b,WA(e,i,l,s),d=e.memoizedState,u!==i||b!==d||zf.current||tv?(typeof _=="function"&&(PL(e,t,_,i),d=e.memoizedState),(u=tv||O3(e,t,u,i,b,d,p))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=p,i=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,eW(n,e),u=e.memoizedProps,p=e.type===e.elementType?u:zg(e.type,u),l.props=p,v=e.pendingProps,b=l.context,d=t.contextType,typeof d=="object"&&d!==null?d=dg(d):(d=Uf(t)?b1:Ip.current,d=jS(e,d));var E=t.getDerivedStateFromProps;(_=typeof E=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==v||b!==d)&&L3(e,l,i,d),tv=!1,b=e.memoizedState,l.state=b,WA(e,i,l,s);var C=e.memoizedState;u!==v||b!==C||zf.current||tv?(typeof E=="function"&&(PL(e,t,E,i),C=e.memoizedState),(p=tv||O3(e,t,p,i,b,C,d)||!1)?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,C,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,C,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=C),l.props=i,l.state=C,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=1024),i=!1)}return HL(n,e,t,i,o,s)}function HL(n,e,t,i,s,o){AW(n,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&M3(e,t,!1),oy(n,e,o);i=e.stateNode,IZ.current=e;var u=l&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&l?(e.child=YS(e,n.child,null,o),e.child=YS(e,null,u,o)):Qp(n,e,u,o),e.memoizedState=i.state,s&&M3(e,t,!0),e.child}function IW(n){var e=n.stateNode;e.pendingContext?C3(n,e.pendingContext,e.pendingContext!==e.context):e.context&&C3(n,e.context,!1),ZN(n,e.containerInfo)}function W3(n,e,t,i,s){return XS(),XN(s),e.flags|=256,Qp(n,e,t,i),e.child}var GL={dehydrated:null,treeContext:null,retryLane:0};function WL(n){return{baseLanes:n,cachePool:null,transitions:null}}function RW(n,e,t){var i=e.pendingProps,s=tc.current,o=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=n!==null&&n.memoizedState===null?!1:(s&2)!==0),u?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Gl(tc,s&1),n===null)return NL(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,n=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=BI(l,i,0,null),n=u1(n,i,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=WL(t),e.memoizedState=GL,n):aB(e,l));if(s=n.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return RZ(n,e,l,i,u,s,t);if(o){o=i.fallback,l=e.mode,s=n.child,u=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=_v(s,d),i.subtreeFlags=s.subtreeFlags&14680064),u!==null?o=_v(u,o):(o=u1(o,l,t,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=n.child.memoizedState,l=l===null?WL(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=n.childLanes&~t,e.memoizedState=GL,i}return o=n.child,n=o.sibling,i=_v(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function aB(n,e){return e=BI({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function aC(n,e,t,i){return i!==null&&XN(i),YS(e,n.child,null,t),n=aB(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function RZ(n,e,t,i,s,o,l){if(t)return e.flags&256?(e.flags&=-257,i=Nk(Error(xn(422))),aC(n,e,l,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=BI({mode:"visible",children:i.children},s,0,null),o=u1(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&YS(e,n.child,null,l),e.child.memoizedState=WL(l),e.memoizedState=GL,o);if(!(e.mode&1))return aC(n,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(xn(419)),i=Nk(o,i,void 0),aC(n,e,l,i)}if(u=(l&n.childLanes)!==0,Pf||u){if(i=vd,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,sy(n,s),Jg(i,n,s,-1))}return pB(),i=Nk(Error(xn(421))),aC(n,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=WZ.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,Em=pv(s.nextSibling),wm=e,Nu=!0,Hg=null,n!==null&&(og[ag++]=J_,og[ag++]=q_,og[ag++]=T1,J_=n.id,q_=n.overflow,T1=e),e=aB(e,i.children),e.flags|=4096,e)}function V3(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),BL(n.return,e,t)}function Bk(n,e,t,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=t,o.tailMode=s)}function kW(n,e,t){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Qp(n,e,i.children,t),i=tc.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&V3(n,t,e);else if(n.tag===19)V3(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Gl(tc,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&VA(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),Bk(e,!1,s,t,o);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&VA(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}Bk(e,!0,t,null,o);break;case"together":Bk(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function eA(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function oy(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),E1|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(xn(153));if(e.child!==null){for(n=e.child,t=_v(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=_v(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function kZ(n,e,t){switch(e.tag){case 3:IW(e),XS();break;case 5:sW(e);break;case 1:Uf(e.type)&&FA(e);break;case 4:ZN(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Gl(HA,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Gl(tc,tc.current&1),e.flags|=128,null):t&e.child.childLanes?RW(n,e,t):(Gl(tc,tc.current&1),n=oy(n,e,t),n!==null?n.sibling:null);Gl(tc,tc.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return kW(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Gl(tc,tc.current),i)break;return null;case 22:case 23:return e.lanes=0,MW(n,e,t)}return oy(n,e,t)}var OW,VL,LW,DW;OW=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};VL=function(){};LW=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Jb(Y0.current);var o=null;switch(t){case"input":s=pL(n,s),i=pL(n,i),o=[];break;case"select":s=oc({},s,{value:void 0}),i=oc({},i,{value:void 0}),o=[];break;case"textarea":s=gL(n,s),i=gL(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=BA)}yL(t,i);var l;t=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var u=s[p];for(l in u)u.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(xw.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var d=i[p];if(u=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&d!==u&&(d!=null||u!=null))if(p==="style")if(u){for(l in u)!u.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in d)d.hasOwnProperty(l)&&u[l]!==d[l]&&(t||(t={}),t[l]=d[l])}else t||(o||(o=[]),o.push(p,t)),t=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(xw.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&cu("scroll",n),o||u===d||(o=[])):(o=o||[]).push(p,d))}t&&(o=o||[]).push("style",t);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};DW=function(n,e,t,i){t!==i&&(e.flags|=4)};function cx(n,e){if(!Nu)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function yp(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function OZ(n,e,t){var i=e.pendingProps;switch(jN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yp(e),null;case 1:return Uf(e.type)&&PA(),yp(e),null;case 3:return i=e.stateNode,KS(),du(zf),du(Ip),tB(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(sC(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hg!==null&&(ZL(Hg),Hg=null))),VL(n,e),yp(e),null;case 5:eB(e);var s=Jb(Nw.current);if(t=e.type,n!==null&&e.stateNode!=null)LW(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(xn(166));return yp(e),null}if(n=Jb(Y0.current),sC(e)){i=e.stateNode,t=e.type;var o=e.memoizedProps;switch(i[G0]=e,i[Lw]=o,n=(e.mode&1)!==0,t){case"dialog":cu("cancel",i),cu("close",i);break;case"iframe":case"object":case"embed":cu("load",i);break;case"video":case"audio":for(s=0;s<Kx.length;s++)cu(Kx[s],i);break;case"source":cu("error",i);break;case"img":case"image":case"link":cu("error",i),cu("load",i);break;case"details":cu("toggle",i);break;case"input":e3(i,o),cu("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},cu("invalid",i);break;case"textarea":n3(i,o),cu("invalid",i)}yL(t,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&iC(i.textContent,u,n),s=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&iC(i.textContent,u,n),s=["children",""+u]):xw.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&cu("scroll",i)}switch(t){case"input":J$(i),t3(i,o,!0);break;case"textarea":J$(i),r3(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=BA)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=l6(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=l.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=l.createElement(t,{is:i.is}):(n=l.createElement(t),t==="select"&&(l=n,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):n=l.createElementNS(n,t),n[G0]=e,n[Lw]=i,OW(n,e,!1,!1),e.stateNode=n;e:{switch(l=vL(t,i),t){case"dialog":cu("cancel",n),cu("close",n),s=i;break;case"iframe":case"object":case"embed":cu("load",n),s=i;break;case"video":case"audio":for(s=0;s<Kx.length;s++)cu(Kx[s],n);s=i;break;case"source":cu("error",n),s=i;break;case"img":case"image":case"link":cu("error",n),cu("load",n),s=i;break;case"details":cu("toggle",n),s=i;break;case"input":e3(n,i),s=pL(n,i),cu("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=oc({},i,{value:void 0}),cu("invalid",n);break;case"textarea":n3(n,i),s=gL(n,i),cu("invalid",n);break;default:s=i}yL(t,s),u=s;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];o==="style"?h6(n,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&u6(n,d)):o==="children"?typeof d=="string"?(t!=="textarea"||d!=="")&&ww(n,d):typeof d=="number"&&ww(n,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(xw.hasOwnProperty(o)?d!=null&&o==="onScroll"&&cu("scroll",n):d!=null&&RN(n,o,d,l))}switch(t){case"input":J$(n),t3(n,i,!1);break;case"textarea":J$(n),r3(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Tv(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?kS(n,!!i.multiple,o,!1):i.defaultValue!=null&&kS(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=BA)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yp(e),null;case 6:if(n&&e.stateNode!=null)DW(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(xn(166));if(t=Jb(Nw.current),Jb(Y0.current),sC(e)){if(i=e.stateNode,t=e.memoizedProps,i[G0]=e,(o=i.nodeValue!==t)&&(n=wm,n!==null))switch(n.tag){case 3:iC(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&iC(i.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[G0]=e,e.stateNode=i}return yp(e),null;case 13:if(du(tc),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Nu&&Em!==null&&e.mode&1&&!(e.flags&128))Q6(),XS(),e.flags|=98560,o=!1;else if(o=sC(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(xn(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(xn(317));o[G0]=e}else XS(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yp(e),o=!1}else Hg!==null&&(ZL(Hg),Hg=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||tc.current&1?id===0&&(id=3):pB())),e.updateQueue!==null&&(e.flags|=4),yp(e),null);case 4:return KS(),VL(n,e),n===null&&kw(e.stateNode.containerInfo),yp(e),null;case 10:return JN(e.type._context),yp(e),null;case 17:return Uf(e.type)&&PA(),yp(e),null;case 19:if(du(tc),o=e.memoizedState,o===null)return yp(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)cx(o,!1);else{if(id!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(l=VA(n),l!==null){for(e.flags|=128,cx(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)o=t,n=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,n=l.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Gl(tc,tc.current&1|2),e.child}n=n.sibling}o.tail!==null&&sh()>qS&&(e.flags|=128,i=!0,cx(o,!1),e.lanes=4194304)}else{if(!i)if(n=VA(l),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),cx(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Nu)return yp(e),null}else 2*sh()-o.renderingStartTime>qS&&t!==1073741824&&(e.flags|=128,i=!0,cx(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(t=o.last,t!==null?t.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=sh(),e.sibling=null,t=tc.current,Gl(tc,i?t&1|2:t&1),e):(yp(e),null);case 22:case 23:return dB(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?bm&1073741824&&(yp(e),e.subtreeFlags&6&&(e.flags|=8192)):yp(e),null;case 24:return null;case 25:return null}throw Error(xn(156,e.tag))}function LZ(n,e){switch(jN(e),e.tag){case 1:return Uf(e.type)&&PA(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return KS(),du(zf),du(Ip),tB(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return eB(e),null;case 13:if(du(tc),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(xn(340));XS()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return du(tc),null;case 4:return KS(),null;case 10:return JN(e.type._context),null;case 22:case 23:return dB(),null;case 24:return null;default:return null}}var lC=!1,Cp=!1,DZ=typeof WeakSet=="function"?WeakSet:Set,ar=null;function xS(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Ac(n,e,i)}else t.current=null}function jL(n,e,t){try{t()}catch(i){Ac(n,e,i)}}var j3=!1;function NZ(n,e){if(AL=LA,n=F6(),WN(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var l=0,u=-1,d=-1,p=0,_=0,v=n,b=null;t:for(;;){for(var E;v!==t||s!==0&&v.nodeType!==3||(u=l+s),v!==o||i!==0&&v.nodeType!==3||(d=l+i),v.nodeType===3&&(l+=v.nodeValue.length),(E=v.firstChild)!==null;)b=v,v=E;for(;;){if(v===n)break t;if(b===t&&++p===s&&(u=l),b===o&&++_===i&&(d=l),(E=v.nextSibling)!==null)break;v=b,b=v.parentNode}v=E}t=u===-1||d===-1?null:{start:u,end:d}}else t=null}t=t||{start:0,end:0}}else t=null;for(IL={focusedElem:n,selectionRange:t},LA=!1,ar=e;ar!==null;)if(e=ar,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ar=n;else for(;ar!==null;){e=ar;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var M=C.memoizedProps,I=C.memoizedState,L=e.stateNode,O=L.getSnapshotBeforeUpdate(e.elementType===e.type?M:zg(e.type,M),I);L.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var P=e.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xn(163))}}catch(B){Ac(e,e.return,B)}if(n=e.sibling,n!==null){n.return=e.return,ar=n;break}ar=e.return}return C=j3,j3=!1,C}function cw(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&jL(e,t,o)}s=s.next}while(s!==i)}}function DI(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function XL(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function NW(n){var e=n.alternate;e!==null&&(n.alternate=null,NW(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[G0],delete e[Lw],delete e[OL],delete e[yZ],delete e[vZ])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function BW(n){return n.tag===5||n.tag===3||n.tag===4}function X3(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||BW(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function YL(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=BA));else if(i!==4&&(n=n.child,n!==null))for(YL(n,e,t),n=n.sibling;n!==null;)YL(n,e,t),n=n.sibling}function KL(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(KL(n,e,t),n=n.sibling;n!==null;)KL(n,e,t),n=n.sibling}var Jd=null,Ug=!1;function Ry(n,e,t){for(t=t.child;t!==null;)PW(n,e,t),t=t.sibling}function PW(n,e,t){if(X0&&typeof X0.onCommitFiberUnmount=="function")try{X0.onCommitFiberUnmount(CI,t)}catch{}switch(t.tag){case 5:Cp||xS(t,e);case 6:var i=Jd,s=Ug;Jd=null,Ry(n,e,t),Jd=i,Ug=s,Jd!==null&&(Ug?(n=Jd,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Jd.removeChild(t.stateNode));break;case 18:Jd!==null&&(Ug?(n=Jd,t=t.stateNode,n.nodeType===8?Ik(n.parentNode,t):n.nodeType===1&&Ik(n,t),Aw(n)):Ik(Jd,t.stateNode));break;case 4:i=Jd,s=Ug,Jd=t.stateNode.containerInfo,Ug=!0,Ry(n,e,t),Jd=i,Ug=s;break;case 0:case 11:case 14:case 15:if(!Cp&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&jL(t,e,l),s=s.next}while(s!==i)}Ry(n,e,t);break;case 1:if(!Cp&&(xS(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(u){Ac(t,e,u)}Ry(n,e,t);break;case 21:Ry(n,e,t);break;case 22:t.mode&1?(Cp=(i=Cp)||t.memoizedState!==null,Ry(n,e,t),Cp=i):Ry(n,e,t);break;default:Ry(n,e,t)}}function Y3(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new DZ),e.forEach(function(i){var s=VZ.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function Rg(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var o=n,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:Jd=u.stateNode,Ug=!1;break e;case 3:Jd=u.stateNode.containerInfo,Ug=!0;break e;case 4:Jd=u.stateNode.containerInfo,Ug=!0;break e}u=u.return}if(Jd===null)throw Error(xn(160));PW(o,l,s),Jd=null,Ug=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(p){Ac(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)FW(e,n),e=e.sibling}function FW(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Rg(e,n),L0(n),i&4){try{cw(3,n,n.return),DI(3,n)}catch(M){Ac(n,n.return,M)}try{cw(5,n,n.return)}catch(M){Ac(n,n.return,M)}}break;case 1:Rg(e,n),L0(n),i&512&&t!==null&&xS(t,t.return);break;case 5:if(Rg(e,n),L0(n),i&512&&t!==null&&xS(t,t.return),n.flags&32){var s=n.stateNode;try{ww(s,"")}catch(M){Ac(n,n.return,M)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,l=t!==null?t.memoizedProps:o,u=n.type,d=n.updateQueue;if(n.updateQueue=null,d!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&o6(s,o),vL(u,l);var p=vL(u,o);for(l=0;l<d.length;l+=2){var _=d[l],v=d[l+1];_==="style"?h6(s,v):_==="dangerouslySetInnerHTML"?u6(s,v):_==="children"?ww(s,v):RN(s,_,v,p)}switch(u){case"input":fL(s,o);break;case"textarea":a6(s,o);break;case"select":var b=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?kS(s,!!o.multiple,E,!1):b!==!!o.multiple&&(o.defaultValue!=null?kS(s,!!o.multiple,o.defaultValue,!0):kS(s,!!o.multiple,o.multiple?[]:"",!1))}s[Lw]=o}catch(M){Ac(n,n.return,M)}}break;case 6:if(Rg(e,n),L0(n),i&4){if(n.stateNode===null)throw Error(xn(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(M){Ac(n,n.return,M)}}break;case 3:if(Rg(e,n),L0(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Aw(e.containerInfo)}catch(M){Ac(n,n.return,M)}break;case 4:Rg(e,n),L0(n);break;case 13:Rg(e,n),L0(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(cB=sh())),i&4&&Y3(n);break;case 22:if(_=t!==null&&t.memoizedState!==null,n.mode&1?(Cp=(p=Cp)||_,Rg(e,n),Cp=p):Rg(e,n),L0(n),i&8192){if(p=n.memoizedState!==null,(n.stateNode.isHidden=p)&&!_&&n.mode&1)for(ar=n,_=n.child;_!==null;){for(v=ar=_;ar!==null;){switch(b=ar,E=b.child,b.tag){case 0:case 11:case 14:case 15:cw(4,b,b.return);break;case 1:xS(b,b.return);var C=b.stateNode;if(typeof C.componentWillUnmount=="function"){i=b,t=b.return;try{e=i,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(M){Ac(i,t,M)}}break;case 5:xS(b,b.return);break;case 22:if(b.memoizedState!==null){J3(v);continue}}E!==null?(E.return=b,ar=E):J3(v)}_=_.sibling}e:for(_=null,v=n;;){if(v.tag===5){if(_===null){_=v;try{s=v.stateNode,p?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=v.stateNode,d=v.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=c6("display",l))}catch(M){Ac(n,n.return,M)}}}else if(v.tag===6){if(_===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(M){Ac(n,n.return,M)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===n)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;_===v&&(_=null),v=v.return}_===v&&(_=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Rg(e,n),L0(n),i&4&&Y3(n);break;case 21:break;default:Rg(e,n),L0(n)}}function L0(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(BW(t)){var i=t;break e}t=t.return}throw Error(xn(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ww(s,""),i.flags&=-33);var o=X3(n);KL(n,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,u=X3(n);YL(n,u,l);break;default:throw Error(xn(161))}}catch(d){Ac(n,n.return,d)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function BZ(n,e,t){ar=n,zW(n)}function zW(n,e,t){for(var i=(n.mode&1)!==0;ar!==null;){var s=ar,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||lC;if(!l){var u=s.alternate,d=u!==null&&u.memoizedState!==null||Cp;u=lC;var p=Cp;if(lC=l,(Cp=d)&&!p)for(ar=s;ar!==null;)l=ar,d=l.child,l.tag===22&&l.memoizedState!==null?q3(s):d!==null?(d.return=l,ar=d):q3(s);for(;o!==null;)ar=o,zW(o),o=o.sibling;ar=s,lC=u,Cp=p}K3(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ar=o):K3(n)}}function K3(n){for(;ar!==null;){var e=ar;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cp||DI(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Cp)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:zg(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&k3(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}k3(e,l,t)}break;case 5:var u=e.stateNode;if(t===null&&e.flags&4){t=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&t.focus();break;case"img":d.src&&(t.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var _=p.memoizedState;if(_!==null){var v=_.dehydrated;v!==null&&Aw(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xn(163))}Cp||e.flags&512&&XL(e)}catch(b){Ac(e,e.return,b)}}if(e===n){ar=null;break}if(t=e.sibling,t!==null){t.return=e.return,ar=t;break}ar=e.return}}function J3(n){for(;ar!==null;){var e=ar;if(e===n){ar=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ar=t;break}ar=e.return}}function q3(n){for(;ar!==null;){var e=ar;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{DI(4,e)}catch(d){Ac(e,t,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){Ac(e,s,d)}}var o=e.return;try{XL(e)}catch(d){Ac(e,o,d)}break;case 5:var l=e.return;try{XL(e)}catch(d){Ac(e,l,d)}}}catch(d){Ac(e,e.return,d)}if(e===n){ar=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ar=u;break}ar=e.return}}var PZ=Math.ceil,YA=ly.ReactCurrentDispatcher,lB=ly.ReactCurrentOwner,hg=ly.ReactCurrentBatchConfig,To=0,vd=null,Rh=null,Zd=0,bm=0,wS=Iv(0),id=0,zw=null,E1=0,NI=0,uB=0,hw=null,Bf=null,cB=0,qS=1/0,G_=null,KA=!1,JL=null,mv=null,uC=!1,ov=null,JA=0,dw=0,qL=null,tA=-1,nA=0;function of(){return To&6?sh():tA!==-1?tA:tA=sh()}function gv(n){return n.mode&1?To&2&&Zd!==0?Zd&-Zd:TZ.transition!==null?(nA===0&&(nA=E6()),nA):(n=Ca,n!==0||(n=window.event,n=n===void 0?16:I6(n.type)),n):1}function Jg(n,e,t,i){if(50<dw)throw dw=0,qL=null,Error(xn(185));E$(n,t,i),(!(To&2)||n!==vd)&&(n===vd&&(!(To&2)&&(NI|=t),id===4&&iv(n,Zd)),Hf(n,i),t===1&&To===0&&!(e.mode&1)&&(qS=sh()+500,kI&&Rv()))}function Hf(n,e){var t=n.callbackNode;TQ(n,e);var i=OA(n,n===vd?Zd:0);if(i===0)t!==null&&o3(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&o3(t),e===1)n.tag===0?bZ(Q3.bind(null,n)):K6(Q3.bind(null,n)),gZ(function(){!(To&6)&&Rv()}),t=null;else{switch(x6(i)){case 1:t=NN;break;case 4:t=T6;break;case 16:t=kA;break;case 536870912:t=S6;break;default:t=kA}t=YW(t,UW.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function UW(n,e){if(tA=-1,nA=0,To&6)throw Error(xn(327));var t=n.callbackNode;if(BS()&&n.callbackNode!==t)return null;var i=OA(n,n===vd?Zd:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=qA(n,i);else{e=i;var s=To;To|=2;var o=GW();(vd!==n||Zd!==e)&&(G_=null,qS=sh()+500,l1(n,e));do try{UZ();break}catch(u){HW(n,u)}while(!0);KN(),YA.current=o,To=s,Rh!==null?e=0:(vd=null,Zd=0,e=id)}if(e!==0){if(e===2&&(s=xL(n),s!==0&&(i=s,e=QL(n,s))),e===1)throw t=zw,l1(n,0),iv(n,i),Hf(n,sh()),t;if(e===6)iv(n,i);else{if(s=n.current.alternate,!(i&30)&&!FZ(s)&&(e=qA(n,i),e===2&&(o=xL(n),o!==0&&(i=o,e=QL(n,o))),e===1))throw t=zw,l1(n,0),iv(n,i),Hf(n,sh()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(xn(345));case 2:Pb(n,Bf,G_);break;case 3:if(iv(n,i),(i&130023424)===i&&(e=cB+500-sh(),10<e)){if(OA(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){of(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=kL(Pb.bind(null,n,Bf,G_),e);break}Pb(n,Bf,G_);break;case 4:if(iv(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var l=31-Kg(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=sh()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*PZ(i/1960))-i,10<i){n.timeoutHandle=kL(Pb.bind(null,n,Bf,G_),i);break}Pb(n,Bf,G_);break;case 5:Pb(n,Bf,G_);break;default:throw Error(xn(329))}}}return Hf(n,sh()),n.callbackNode===t?UW.bind(null,n):null}function QL(n,e){var t=hw;return n.current.memoizedState.isDehydrated&&(l1(n,e).flags|=256),n=qA(n,e),n!==2&&(e=Bf,Bf=t,e!==null&&ZL(e)),n}function ZL(n){Bf===null?Bf=n:Bf.push.apply(Bf,n)}function FZ(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],o=s.getSnapshot;s=s.value;try{if(!Zg(o(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function iv(n,e){for(e&=~uB,e&=~NI,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Kg(e),i=1<<t;n[t]=-1,e&=~i}}function Q3(n){if(To&6)throw Error(xn(327));BS();var e=OA(n,0);if(!(e&1))return Hf(n,sh()),null;var t=qA(n,e);if(n.tag!==0&&t===2){var i=xL(n);i!==0&&(e=i,t=QL(n,i))}if(t===1)throw t=zw,l1(n,0),iv(n,e),Hf(n,sh()),t;if(t===6)throw Error(xn(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Pb(n,Bf,G_),Hf(n,sh()),null}function hB(n,e){var t=To;To|=1;try{return n(e)}finally{To=t,To===0&&(qS=sh()+500,kI&&Rv())}}function x1(n){ov!==null&&ov.tag===0&&!(To&6)&&BS();var e=To;To|=1;var t=hg.transition,i=Ca;try{if(hg.transition=null,Ca=1,n)return n()}finally{Ca=i,hg.transition=t,To=e,!(To&6)&&Rv()}}function dB(){bm=wS.current,du(wS)}function l1(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,mZ(t)),Rh!==null)for(t=Rh.return;t!==null;){var i=t;switch(jN(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&PA();break;case 3:KS(),du(zf),du(Ip),tB();break;case 5:eB(i);break;case 4:KS();break;case 13:du(tc);break;case 19:du(tc);break;case 10:JN(i.type._context);break;case 22:case 23:dB()}t=t.return}if(vd=n,Rh=n=_v(n.current,null),Zd=bm=e,id=0,zw=null,uB=NI=E1=0,Bf=hw=null,Kb!==null){for(e=0;e<Kb.length;e++)if(t=Kb[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,o=t.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}t.pending=i}Kb=null}return n}function HW(n,e){do{var t=Rh;try{if(KN(),QM.current=XA,jA){for(var i=ic.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}jA=!1}if(S1=0,yd=rd=ic=null,uw=!1,Bw=0,lB.current=null,t===null||t.return===null){id=1,zw=e,Rh=null;break}e:{var o=n,l=t.return,u=t,d=e;if(e=Zd,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,_=u,v=_.tag;if(!(_.mode&1)&&(v===0||v===11||v===15)){var b=_.alternate;b?(_.updateQueue=b.updateQueue,_.memoizedState=b.memoizedState,_.lanes=b.lanes):(_.updateQueue=null,_.memoizedState=null)}var E=F3(l);if(E!==null){E.flags&=-257,z3(E,l,u,o,e),E.mode&1&&P3(o,p,e),e=E,d=p;var C=e.updateQueue;if(C===null){var M=new Set;M.add(d),e.updateQueue=M}else C.add(d);break e}else{if(!(e&1)){P3(o,p,e),pB();break e}d=Error(xn(426))}}else if(Nu&&u.mode&1){var I=F3(l);if(I!==null){!(I.flags&65536)&&(I.flags|=256),z3(I,l,u,o,e),XN(JS(d,u));break e}}o=d=JS(d,u),id!==4&&(id=2),hw===null?hw=[o]:hw.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var L=wW(o,d,e);R3(o,L);break e;case 1:u=d;var O=o.type,P=o.stateNode;if(!(o.flags&128)&&(typeof O.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(mv===null||!mv.has(P)))){o.flags|=65536,e&=-e,o.lanes|=e;var B=$W(o,u,e);R3(o,B);break e}}o=o.return}while(o!==null)}VW(t)}catch(z){e=z,Rh===t&&t!==null&&(Rh=t=t.return);continue}break}while(!0)}function GW(){var n=YA.current;return YA.current=XA,n===null?XA:n}function pB(){(id===0||id===3||id===2)&&(id=4),vd===null||!(E1&268435455)&&!(NI&268435455)||iv(vd,Zd)}function qA(n,e){var t=To;To|=2;var i=GW();(vd!==n||Zd!==e)&&(G_=null,l1(n,e));do try{zZ();break}catch(s){HW(n,s)}while(!0);if(KN(),To=t,YA.current=i,Rh!==null)throw Error(xn(261));return vd=null,Zd=0,id}function zZ(){for(;Rh!==null;)WW(Rh)}function UZ(){for(;Rh!==null&&!dQ();)WW(Rh)}function WW(n){var e=XW(n.alternate,n,bm);n.memoizedProps=n.pendingProps,e===null?VW(n):Rh=e,lB.current=null}function VW(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=LZ(t,e),t!==null){t.flags&=32767,Rh=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{id=6,Rh=null;return}}else if(t=OZ(t,e,bm),t!==null){Rh=t;return}if(e=e.sibling,e!==null){Rh=e;return}Rh=e=n}while(e!==null);id===0&&(id=5)}function Pb(n,e,t){var i=Ca,s=hg.transition;try{hg.transition=null,Ca=1,HZ(n,e,t,i)}finally{hg.transition=s,Ca=i}return null}function HZ(n,e,t,i){do BS();while(ov!==null);if(To&6)throw Error(xn(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(xn(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(SQ(n,o),n===vd&&(Rh=vd=null,Zd=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||uC||(uC=!0,YW(kA,function(){return BS(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=hg.transition,hg.transition=null;var l=Ca;Ca=1;var u=To;To|=4,lB.current=null,NZ(n,t),FW(t,n),lZ(IL),LA=!!AL,IL=AL=null,n.current=t,BZ(t),pQ(),To=u,Ca=l,hg.transition=o}else n.current=t;if(uC&&(uC=!1,ov=n,JA=s),o=n.pendingLanes,o===0&&(mv=null),gQ(t.stateNode),Hf(n,sh()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(KA)throw KA=!1,n=JL,JL=null,n;return JA&1&&n.tag!==0&&BS(),o=n.pendingLanes,o&1?n===qL?dw++:(dw=0,qL=n):dw=0,Rv(),null}function BS(){if(ov!==null){var n=x6(JA),e=hg.transition,t=Ca;try{if(hg.transition=null,Ca=16>n?16:n,ov===null)var i=!1;else{if(n=ov,ov=null,JA=0,To&6)throw Error(xn(331));var s=To;for(To|=4,ar=n.current;ar!==null;){var o=ar,l=o.child;if(ar.flags&16){var u=o.deletions;if(u!==null){for(var d=0;d<u.length;d++){var p=u[d];for(ar=p;ar!==null;){var _=ar;switch(_.tag){case 0:case 11:case 15:cw(8,_,o)}var v=_.child;if(v!==null)v.return=_,ar=v;else for(;ar!==null;){_=ar;var b=_.sibling,E=_.return;if(NW(_),_===p){ar=null;break}if(b!==null){b.return=E,ar=b;break}ar=E}}}var C=o.alternate;if(C!==null){var M=C.child;if(M!==null){C.child=null;do{var I=M.sibling;M.sibling=null,M=I}while(M!==null)}}ar=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ar=l;else e:for(;ar!==null;){if(o=ar,o.flags&2048)switch(o.tag){case 0:case 11:case 15:cw(9,o,o.return)}var L=o.sibling;if(L!==null){L.return=o.return,ar=L;break e}ar=o.return}}var O=n.current;for(ar=O;ar!==null;){l=ar;var P=l.child;if(l.subtreeFlags&2064&&P!==null)P.return=l,ar=P;else e:for(l=O;ar!==null;){if(u=ar,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:DI(9,u)}}catch(z){Ac(u,u.return,z)}if(u===l){ar=null;break e}var B=u.sibling;if(B!==null){B.return=u.return,ar=B;break e}ar=u.return}}if(To=s,Rv(),X0&&typeof X0.onPostCommitFiberRoot=="function")try{X0.onPostCommitFiberRoot(CI,n)}catch{}i=!0}return i}finally{Ca=t,hg.transition=e}}return!1}function Z3(n,e,t){e=JS(t,e),e=wW(n,e,1),n=fv(n,e,1),e=of(),n!==null&&(E$(n,1,e),Hf(n,e))}function Ac(n,e,t){if(n.tag===3)Z3(n,n,t);else for(;e!==null;){if(e.tag===3){Z3(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(mv===null||!mv.has(i))){n=JS(t,n),n=$W(e,n,1),e=fv(e,n,1),n=of(),e!==null&&(E$(e,1,n),Hf(e,n));break}}e=e.return}}function GZ(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=of(),n.pingedLanes|=n.suspendedLanes&t,vd===n&&(Zd&t)===t&&(id===4||id===3&&(Zd&130023424)===Zd&&500>sh()-cB?l1(n,0):uB|=t),Hf(n,e)}function jW(n,e){e===0&&(n.mode&1?(e=Z$,Z$<<=1,!(Z$&130023424)&&(Z$=4194304)):e=1);var t=of();n=sy(n,e),n!==null&&(E$(n,e,t),Hf(n,t))}function WZ(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),jW(n,t)}function VZ(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(xn(314))}i!==null&&i.delete(e),jW(n,t)}var XW;XW=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||zf.current)Pf=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Pf=!1,kZ(n,e,t);Pf=!!(n.flags&131072)}else Pf=!1,Nu&&e.flags&1048576&&J6(e,UA,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;eA(n,e),n=e.pendingProps;var s=jS(e,Ip.current);NS(e,t),s=rB(null,e,i,n,s,t);var o=iB();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Uf(i)?(o=!0,FA(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,QN(e),s.updater=OI,e.stateNode=s,s._reactInternals=e,FL(e,i,n,t),e=HL(null,e,i,!0,o,t)):(e.tag=0,Nu&&o&&VN(e),Qp(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(eA(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=XZ(i),n=zg(i,n),s){case 0:e=UL(null,e,i,n,t);break e;case 1:e=G3(null,e,i,n,t);break e;case 11:e=U3(null,e,i,n,t);break e;case 14:e=H3(null,e,i,zg(i.type,n),t);break e}throw Error(xn(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:zg(i,s),UL(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:zg(i,s),G3(n,e,i,s,t);case 3:e:{if(IW(e),n===null)throw Error(xn(387));i=e.pendingProps,o=e.memoizedState,s=o.element,eW(n,e),WA(e,i,null,t);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=JS(Error(xn(423)),e),e=W3(n,e,i,t,s);break e}else if(i!==s){s=JS(Error(xn(424)),e),e=W3(n,e,i,t,s);break e}else for(Em=pv(e.stateNode.containerInfo.firstChild),wm=e,Nu=!0,Hg=null,t=iW(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(XS(),i===s){e=oy(n,e,t);break e}Qp(n,e,i,t)}e=e.child}return e;case 5:return sW(e),n===null&&NL(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,l=s.children,RL(i,s)?l=null:o!==null&&RL(i,o)&&(e.flags|=32),AW(n,e),Qp(n,e,l,t),e.child;case 6:return n===null&&NL(e),null;case 13:return RW(n,e,t);case 4:return ZN(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=YS(e,null,i,t):Qp(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:zg(i,s),U3(n,e,i,s,t);case 7:return Qp(n,e,e.pendingProps,t),e.child;case 8:return Qp(n,e,e.pendingProps.children,t),e.child;case 12:return Qp(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Gl(HA,i._currentValue),i._currentValue=l,o!==null)if(Zg(o.value,l)){if(o.children===s.children&&!zf.current){e=oy(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var d=u.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Z_(-1,t&-t),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var _=p.pending;_===null?d.next=d:(d.next=_.next,_.next=d),p.pending=d}}o.lanes|=t,d=o.alternate,d!==null&&(d.lanes|=t),BL(o.return,t,e),u.lanes|=t;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(xn(341));l.lanes|=t,u=l.alternate,u!==null&&(u.lanes|=t),BL(l,t,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Qp(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,NS(e,t),s=dg(s),i=i(s),e.flags|=1,Qp(n,e,i,t),e.child;case 14:return i=e.type,s=zg(i,e.pendingProps),s=zg(i.type,s),H3(n,e,i,s,t);case 15:return CW(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:zg(i,s),eA(n,e),e.tag=1,Uf(i)?(n=!0,FA(e)):n=!1,NS(e,t),nW(e,i,s),FL(e,i,s,t),HL(null,e,i,!0,n,t);case 19:return kW(n,e,t);case 22:return MW(n,e,t)}throw Error(xn(156,e.tag))};function YW(n,e){return b6(n,e)}function jZ(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cg(n,e,t,i){return new jZ(n,e,t,i)}function fB(n){return n=n.prototype,!(!n||!n.isReactComponent)}function XZ(n){if(typeof n=="function")return fB(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ON)return 11;if(n===LN)return 14}return 2}function _v(n,e){var t=n.alternate;return t===null?(t=cg(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function rA(n,e,t,i,s,o){var l=2;if(i=n,typeof n=="function")fB(n)&&(l=1);else if(typeof n=="string")l=5;else e:switch(n){case mS:return u1(t.children,s,o,e);case kN:l=8,s|=8;break;case uL:return n=cg(12,t,e,s|2),n.elementType=uL,n.lanes=o,n;case cL:return n=cg(13,t,e,s),n.elementType=cL,n.lanes=o,n;case hL:return n=cg(19,t,e,s),n.elementType=hL,n.lanes=o,n;case r6:return BI(t,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case t6:l=10;break e;case n6:l=9;break e;case ON:l=11;break e;case LN:l=14;break e;case ev:l=16,i=null;break e}throw Error(xn(130,n==null?n:typeof n,""))}return e=cg(l,t,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function u1(n,e,t,i){return n=cg(7,n,i,e),n.lanes=t,n}function BI(n,e,t,i){return n=cg(22,n,i,e),n.elementType=r6,n.lanes=t,n.stateNode={isHidden:!1},n}function Pk(n,e,t){return n=cg(6,n,null,e),n.lanes=t,n}function Fk(n,e,t){return e=cg(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function YZ(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vk(0),this.expirationTimes=vk(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vk(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mB(n,e,t,i,s,o,l,u,d){return n=new YZ(n,e,t,u,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=cg(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},QN(o),n}function KZ(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fS,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function KW(n){if(!n)return Sv;n=n._reactInternals;e:{if(D1(n)!==n||n.tag!==1)throw Error(xn(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Uf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(xn(171))}if(n.tag===1){var t=n.type;if(Uf(t))return Y6(n,t,e)}return e}function JW(n,e,t,i,s,o,l,u,d){return n=mB(t,i,!0,n,s,o,l,u,d),n.context=KW(null),t=n.current,i=of(),s=gv(t),o=Z_(i,s),o.callback=e??null,fv(t,o,s),n.current.lanes=s,E$(n,s,i),Hf(n,i),n}function PI(n,e,t,i){var s=e.current,o=of(),l=gv(s);return t=KW(t),e.context===null?e.context=t:e.pendingContext=t,e=Z_(o,l),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=fv(s,e,l),n!==null&&(Jg(n,s,l,o),qM(n,s,l)),l}function QA(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ez(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function gB(n,e){ez(n,e),(n=n.alternate)&&ez(n,e)}function JZ(){return null}var qW=typeof reportError=="function"?reportError:function(n){console.error(n)};function _B(n){this._internalRoot=n}FI.prototype.render=_B.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(xn(409));PI(n,e,null,null)};FI.prototype.unmount=_B.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;x1(function(){PI(null,n,null,null)}),e[iy]=null}};function FI(n){this._internalRoot=n}FI.prototype.unstable_scheduleHydration=function(n){if(n){var e=C6();n={blockedOn:null,target:n,priority:e};for(var t=0;t<rv.length&&e!==0&&e<rv[t].priority;t++);rv.splice(t,0,n),t===0&&A6(n)}};function yB(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function zI(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function tz(){}function qZ(n,e,t,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var p=QA(l);o.call(p)}}var l=JW(e,i,n,0,null,!1,!1,"",tz);return n._reactRootContainer=l,n[iy]=l.current,kw(n.nodeType===8?n.parentNode:n),x1(),l}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var u=i;i=function(){var p=QA(d);u.call(p)}}var d=mB(n,0,!1,null,null,!1,!1,"",tz);return n._reactRootContainer=d,n[iy]=d.current,kw(n.nodeType===8?n.parentNode:n),x1(function(){PI(e,d,t,i)}),d}function UI(n,e,t,i,s){var o=t._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var u=s;s=function(){var d=QA(l);u.call(d)}}PI(e,l,n,s)}else l=qZ(t,e,n,s,i);return QA(l)}w6=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Yx(e.pendingLanes);t!==0&&(BN(e,t|1),Hf(e,sh()),!(To&6)&&(qS=sh()+500,Rv()))}break;case 13:x1(function(){var i=sy(n,1);if(i!==null){var s=of();Jg(i,n,1,s)}}),gB(n,1)}};PN=function(n){if(n.tag===13){var e=sy(n,134217728);if(e!==null){var t=of();Jg(e,n,134217728,t)}gB(n,134217728)}};$6=function(n){if(n.tag===13){var e=gv(n),t=sy(n,e);if(t!==null){var i=of();Jg(t,n,e,i)}gB(n,e)}};C6=function(){return Ca};M6=function(n,e){var t=Ca;try{return Ca=n,e()}finally{Ca=t}};TL=function(n,e,t){switch(e){case"input":if(fL(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=RI(i);if(!s)throw Error(xn(90));s6(i),fL(i,s)}}}break;case"textarea":a6(n,t);break;case"select":e=t.value,e!=null&&kS(n,!!t.multiple,e,!1)}};f6=hB;m6=x1;var QZ={usingClientEntryPoint:!1,Events:[w$,vS,RI,d6,p6,hB]},hx={findFiberByHostInstance:Yb,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ZZ={bundleType:hx.bundleType,version:hx.version,rendererPackageName:hx.rendererPackageName,rendererConfig:hx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ly.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=y6(n),n===null?null:n.stateNode},findFiberByHostInstance:hx.findFiberByHostInstance||JZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cC.isDisabled&&cC.supportsFiber)try{CI=cC.inject(ZZ),X0=cC}catch{}}Om.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QZ;Om.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yB(e))throw Error(xn(200));return KZ(n,e,null,t)};Om.createRoot=function(n,e){if(!yB(n))throw Error(xn(299));var t=!1,i="",s=qW;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=mB(n,1,!1,null,null,t,!1,i,s),n[iy]=e.current,kw(n.nodeType===8?n.parentNode:n),new _B(e)};Om.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(xn(188)):(n=Object.keys(n).join(","),Error(xn(268,n)));return n=y6(e),n=n===null?null:n.stateNode,n};Om.flushSync=function(n){return x1(n)};Om.hydrate=function(n,e,t){if(!zI(e))throw Error(xn(200));return UI(null,n,e,!0,t)};Om.hydrateRoot=function(n,e,t){if(!yB(n))throw Error(xn(405));var i=t!=null&&t.hydratedSources||null,s=!1,o="",l=qW;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),e=JW(e,null,n,1,t??null,s,!1,o,l),n[iy]=e.current,kw(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new FI(e)};Om.render=function(n,e,t){if(!zI(e))throw Error(xn(200));return UI(null,n,e,!1,t)};Om.unmountComponentAtNode=function(n){if(!zI(n))throw Error(xn(40));return n._reactRootContainer?(x1(function(){UI(null,null,n,!1,function(){n._reactRootContainer=null,n[iy]=null})}),!0):!1};Om.unstable_batchedUpdates=hB;Om.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!zI(t))throw Error(xn(200));if(n==null||n._reactInternals===void 0)throw Error(xn(38));return UI(n,e,t,!1,i)};Om.version="18.2.0-next-9e3b772b8-20220608";function QW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QW)}catch(n){console.error(n)}}QW(),JG.exports=Om;var vB=JG.exports;const hC=O1(vB);var nz=vB;aL.createRoot=nz.createRoot,aL.hydrateRoot=nz.hydrateRoot;var ZW={exports:{}},zk={exports:{}},Uk={exports:{}},Hk={exports:{}},Gk={exports:{}},rz;function bB(){return rz||(rz=1,function(n,e){(function(t,i){n.exports=i()})(Hl,function(){var t={},i,s,o,l,u,d,p,_,v,b,E,C,M,I,L,O,P,B,z,G,j,H,Z,ae,J,te,he,le,ce,be,$e,q,oe,se,pe,Se,Fe,Re,qe,Ne,it,st,pt,dt,Ue,Ae,je,nt,tt,Dt,Rt,yt,Ct,Mt,mt,xe,ie,we,ct,Tt,At,ft,Ke,Oe,Q,ne,fe,Ie,Ye,Gt,He,Zt,_t,Kt,Yt,Rn,ii,Dr,Si,xr,fr,re,Te,Ge,ot,Ft,nn,On,De,gt,$t,vt,Wt,Un,tr,mr,wr,si,Nr,jr,bs,Ia,Eo,Wl,en,Ar,qa,Ra,Bs,Ps,Li,Ir,Cn,Mr,Ur,_r,Di,Ts,hi,fs,Qa,ka,lc,uc,js,Yo,Vl,pu,ch,Ko,gr,Ei,Rc,hh,kc,Tl,fu,Sl,El,yr,vr,jl,Za,el,mu,Ki,ms,tl,Sd,no,Bu,aa,gu,ir,zn,Ss,ro,Pu,_u,dh,Oa,la,Fu,Tr,Is,yi,xi,ua,Qr,yu,xo,vu,nl,Ni,wi,Hn,$i,Xr,ad,bu,Gi,La,ph,hr,Jo,ld,np,Oc,rp,kp,mf,Ed,Xl,Rs,zu,fh,Da,li,Sr,io,Na,Po,Yl,Kl,Lh,Hr,Ci,br,Wi,ca,Tu,ip,sp,ud,Uu,rl,Lc,Dh,Hu,Jl,Fs,ql,Nh,Dc,Nc,ns,Br,xl,Ba,Ql,Su,mh,xd,di,ye,Ve,Be,kt,tn,Mn,Xn,gn,Pr,so,vi,oo,il,Bi,gs,Eu,Yn,ha,Xs,zs,Pa,Bh,gh,cc,qo,Bc,Ph,Fa,Fh,hc,Gu,cd,Qo,ao,wl,zh,Pi,hd,Wu,Zl,Pc,wd,$l,$d,Uh,Zr,Mi,gf,Op,Cl,eu,Vu,ju,_h,sl,Zo,Ml,Fc,Al,zc,dc,Cd,za,Gr,ol,Ji,da,Y,Es,pa,$r,pn,Lp,al,Ai,ui,qi,rs,Uc,fa,ma,is,Hc,ea,Md,Ad,Hh,Us,jn,Hs,Ys,Fi,tu,Fo,En,pi,fi,Dp,yh,lo,ga,wn,_n,ll,pc,_f,nu,wo,_s,ul,ss,cl,zo,Gh,Ua,Ii,Id,Gc,Wh,Uo,$o,op,xu,Il,dd,fc,Yr,ru,Xu,os,Ha,xs,ws,Wc,mi,Ga,mc,ap,vh,ta,Vi,Dn,Zn,Or,ei,Jr,Co,as,Qi,iu,Yu,gc,Ku,Ks,uo,pd,_a,wu,$u,co,ho,Rl,Ho,Ju,qu,bh,Th,Rr,ys,ks,Wa,Gs,hn,Vc,Tn;i=function(r,a,f,S){if(!(r instanceof Pt)&&typeof r!="string"||`${r}`.trim()==="")throw Error('Invalid type "'+r+'". The type must be a non-empty string or a Blockly.registry.Type.');if(r=`${r}`.toLowerCase(),typeof a!="string"||a.trim()==="")throw Error('Invalid name "'+a+'". The name must be a non-empty string.');const k=a.toLowerCase();if(!f)throw Error("Can not register a null value");let V=gi[r],_e=su[r];if(V||(V=gi[r]=Object.create(null),_e=su[r]=Object.create(null)),s(r,f),!S&&V[k])throw Error('Name "'+k+'" with type "'+r+'" already registered.');V[k]=f,_e[k]=a},s=function(r,a){switch(r){case String(Pt.FIELD):if(typeof a.fromJson!="function")throw Error('Type "'+r+'" must have a fromJson function')}},o=function(r,a){r=`${r}`.toLowerCase(),a=a.toLowerCase();const f=gi[r];f&&f[a]?(delete gi[r][a],delete su[r][a]):console.warn("Unable to unregister ["+a+"]["+r+"] from the registry.")},l=function(r,a,f){r=`${r}`.toLowerCase(),a=a.toLowerCase();const S=gi[r];if(!S||!S[a]){if(a="Unable to find ["+a+"]["+r+"] in the registry.",f)throw Error(a+" You must require or register a "+r+" plugin.");return console.warn(a),null}return S[a]},u=function(r,a){return r=`${r}`.toLowerCase(),a=a.toLowerCase(),(r=gi[r])?!!r[a]:!1},d=function(r,a,f){return l(r,a,f)},p=function(r,a,f){return l(r,a,f)},_=function(r,a,f){r=`${r}`.toLowerCase();var S=gi[r];if(!S){if(S=`Unable to find [${r}] in the registry.`,f)throw Error(`${S} You must require or register a ${r} plugin.`);return console.warn(S),null}if(!a)return S;r=su[r],f=Object.create(null);for(const k of Object.keys(S))f[r[k]]=S[k];return f},v=function(r,a,f){return a=a.plugins[String(r)]||kl,typeof a=="function"?a:d(r,a,f)},b=function(r){return Qu[r]||null},E=function(){const r=[];for(const a in Qu)r.push(Qu[a]);return r},C=function(r){Qu[r.id]=r},M=function(r){delete Qu[r.id]},I=function(){return Vh},L=function(r){Vh=r},O=function(){return jc},P=function(r){jc=r},B=function(){return oi},z=function(r){oi=r},G=function(r){for(;r.options.parentWorkspace;)r=r.options.parentWorkspace;const a=r.getParentSvg(),f=r.getCachedParentSvgSize();var S=a.parentElement;if(S instanceof HTMLElement){var k=S.offsetWidth;S=S.offsetHeight,f.width!==k&&(a.setAttribute("width",k+"px"),r.setCachedParentSvgSize(k,null)),f.height!==S&&(a.setAttribute("height",S+"px"),r.setCachedParentSvgSize(null,S)),r.resize()}},j=function(r,a){const f=Object.create(null),S=r.getDescendants(!0);a&&(r=r.getNextBlock())&&(r=S.indexOf(r),S.splice(r,S.length-r));for(let k=0,V;V=S[k];k++)f[V.type]?f[V.type]++:f[V.type]=1;return f},H=function(r){return function(){this.jsonInit(r)}},Z=function(r){Xc.defineBlocksWithJsonArrayInternal(r)},ae=function(r){t.defineBlocks$$module$build$src$core$common(t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(r))},t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(r){const a={};for(let f=0;f<r.length;f++){const S=r[f];if(!S){console.warn(`Block definition #${f} in JSON array is ${S}. Skipping`);continue}const k=S.type;k?a[k]={init:H(S)}:console.warn(`Block definition #${f} in JSON array is missing a type attribute. Skipping.`)}return a},t.defineBlocks$$module$build$src$core$common=function(r){for(const a of Object.keys(r)){const f=r[a];a in Wr&&console.warn(`Block definiton "${a}" overwrites previous definition.`),Wr[a]=f}},J=function(){return"blockly-"+(_c++).toString(36)},te=function(){return Yc.genUid()},he=function(r){Js=r},le=function(){return Js},ce=function(r){Np.fireInternal(r)},be=function(r){if(se()){if(!vc.length)try{requestAnimationFrame(()=>{setTimeout($e,0)})}catch{setTimeout($e,0)}vc.push(r)}},$e=function(){var r=q(vc,!0);vc.length=0;for(let f=0,S;S=r[f];f++)if(S.workspaceId){var a=b(S.workspaceId);a&&a.fireChangeListener(S)}r=new Set(r.map(f=>f.workspaceId));for(const f of r){if(!f||(r=b(f),!r))continue;r=r.getUndoStack();let S;for(a=r.length;0<a;a--){const k=r[a-1];if(k.group==="")break;if(S===void 0)S=k.group;else if(k.group!==S)break}S&&a!=r.length-1&&(a=r.splice(a,r.length-a),a=q(a,!0),r.push(...a))}},q=function(r,a){r=r.slice(),a||r.reverse();const f=[],S=Object.create(null);for(let _e=0,ze;ze=r[_e];_e++)if(!ze.isNull()){var k=[ze.isUiEvent?yc:ze.type,ze.blockId,ze.workspaceId].join(" "),V=S[k];const jt=V?V.event:null;V?ze.type===t.MOVE$$module$build$src$core$events$utils&&V.index===_e-1?(k=ze,jt.newParentId=k.newParentId,jt.newInputName=k.newInputName,jt.newCoordinate=k.newCoordinate,k.reason&&(jt.reason?(k=new Set(k.reason.concat(jt.reason)),jt.reason=Array.from(k)):jt.reason=k.reason),V.index=_e):ze.type===t.CHANGE$$module$build$src$core$events$utils&&ze.element===jt.element&&ze.name===jt.name?jt.newValue=ze.newValue:ze.type===ti?(V=ze,jt.viewTop=V.viewTop,jt.viewLeft=V.viewLeft,jt.scale=V.scale,jt.oldScale=V.oldScale):(ze.type!==ec||jt.type!==go)&&(S[k]={event:ze,index:_e},f.push(ze)):(S[k]={event:ze,index:_e},f.push(ze))}r=f.filter(function(_e){return!_e.isNull()}),a||r.reverse();for(let _e=1,ze;ze=r[_e];_e++)ze.type===t.CHANGE$$module$build$src$core$events$utils&&ze.element==="mutation"&&r.unshift(r.splice(_e,1)[0]);return r},oe=function(){for(let r=0,a;a=vc[r];r++)a.recordUndo=!1},t.disable$$module$build$src$core$events$utils=function(){na++},t.enable$$module$build$src$core$events$utils=function(){na--},se=function(){return na===0},t.getGroup$$module$build$src$core$events$utils=function(){return Mo},t.setGroup$$module$build$src$core$events$utils=function(r){Np.setGroupInternal(r)},pe=function(r){Mo=typeof r=="boolean"?r?te():"":r},Se=function(r){const a=[];r=r.getDescendants(!1);for(let f=0,S;S=r[f];f++)a[f]=S.id;return a},Fe=function(r,a){const f=Re(r.type);if(!f)throw Error("Unknown event type.");return f.fromJson(r,a)},Re=function(r){const a=d(Pt.EVENT,r);if(!a)throw Error(`Event type ${r} not found in registry.`);return a},qe=function(r){if((r.type===t.MOVE$$module$build$src$core$events$utils||r.type===t.CREATE$$module$build$src$core$events$utils)&&r.workspaceId){var a=b(r.workspaceId);if(!r.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(r=a.getBlockById(r.blockId)){const f=Js;try{Js=!1;const S=r.getParent();if(S&&S.isEnabled()){const k=r.getDescendants(!1);for(let V=0,_e;_e=k[V];V++)_e.setEnabled(!0)}else if((r.outputConnection||r.previousConnection)&&!a.isDragging())do r.setEnabled(!1),r=r.getNextBlock();while(r)}finally{Js=f}}}},Ne=function(r,a){it(),Qe=setTimeout(function(){a&&a.handleRightClick(r)},N)},it=function(){Qe&&(clearTimeout(Qe),Qe=0)},st=function(){de=null},pt=function(r){return!r.type.startsWith("pointer")||r instanceof PointerEvent&&Ue(r)},dt=function(r){return`${r.pointerId}`},Ue=function(r){const a=dt(r);return de?de===a:r.type==="pointerdown"?(de=a,!0):!1},Ae=function(r,a,f,S,k){function V(ze){(k||pt(ze))&&(f?S.call(f,ze):S(ze))}const _e=[];if(a in ke)for(let ze=0;ze<ke[a].length;ze++){const jt=ke[a][ze];r.addEventListener(jt,V,!1),_e.push([r,jt,V])}else r.addEventListener(a,V,!1),_e.push([r,a,V]);return _e},je=function(r,a,f,S){function k(_e){f?S.call(f,_e):S(_e)}const V=[];if(a in ke)for(let _e=0;_e<ke[a].length;_e++){const ze=ke[a][_e];r.addEventListener(ze,k,!1),V.push([r,ze,k])}else r.addEventListener(a,k,!1),V.push([r,a,k]);return V},nt=function(r){const a=r[r.length-1][2];for(;r.length;){const[f,S,k]=r.pop();f.removeEventListener(S,k,!1)}return a},tt=function(r){if(r.target instanceof HTMLElement){if(r.target.isContentEditable||r.target.getAttribute("data-is-text-input")==="true")return!0;if(r.target instanceof HTMLInputElement)return r=r.target,r.type==="text"||r.type==="number"||r.type==="email"||r.type==="password"||r.type==="search"||r.type==="tel"||r.type==="url";if(r.target instanceof HTMLTextAreaElement)return!0}return!1},Dt=function(r){return r.ctrlKey&&Cr?!0:r.button===2},Rt=function(r,a,f){const S=a.createSVGPoint();return S.x=r.clientX,S.y=r.clientY,f||(f=a.getScreenCTM().inverse()),S.matrixTransform(f)},yt=function(r){switch(r.deltaMode){default:return{x:r.deltaX,y:r.deltaY};case 1:return{x:r.deltaX*Eh,y:r.deltaY*Eh};case 2:return{x:r.deltaX*on,y:r.deltaY*on}}},Ct=function(r,a){return a=r.indexOf(a),a===-1?!1:(r.splice(a,1),!0)},Mt=function(r){if(up)throw Error("CSS already injected");Yh+=`
`+r},mt=function(r,a){up||(up=!0,r&&(r=a.replace(/[\\/]$/,""),a=Yh.replace(/<<<PATH>>>/g,r),Yh="",r=document.createElement("style"),r.id="blockly-common-style",a=document.createTextNode(a),r.appendChild(a),document.head.insertBefore(r,document.head.firstChild)))},xe=function(r,a,f,S){r=r+" was deprecated in "+a+" and will be deleted in "+f+".",S&&(r+=`
Use `+S+" instead."),o0.has(r)||(o0.add(r),console.warn(r))},ie=function(r,a,f){r=document.createElementNS(Um,`${r}`);for(const S in a)r.setAttribute(S,`${a[S]}`);return f&&f.appendChild(r),r},we=function(r,a){return a=a.split(" "),a.every(f=>r.classList.contains(f))?!1:(r.classList.add(...a),!0)},ct=function(r,a){r.classList.remove(...a.split(" "))},Tt=function(r,a){return a=a.split(" "),a.every(f=>!r.classList.contains(f))?!1:(r.classList.remove(...a),!0)},At=function(r,a){return r.classList.contains(a)},ft=function(r){return r&&r.parentNode?r.parentNode.removeChild(r):null},Ke=function(r,a){const f=a.nextSibling;if(a=a.parentNode,!a)throw Error("Reference node has no parent.");f?a.insertBefore(r,f):a.appendChild(r)},Oe=function(r,a){return xe("Blockly.utils.dom.containsNode","version 10","version 11",'Use native "contains" DOM method'),r.contains(a)},Q=function(r,a){r.style.transform=a,r.style["-webkit-transform"]=a},ne=function(){ja++,Rd||(Rd=Object.create(null))},fe=function(){ja--,ja||(Rd=null)},Ie=function(r){const a=r.textContent+`
`+r.className.baseVal;let f;if(Rd&&(f=Rd[a]))return f;try{f=r.getComputedTextLength()}catch{return 8*r.textContent.length}return Rd&&(Rd[a]=f),f},Ye=function(r,a,f,S){return Gt(r,a+"pt",f,S)},Gt=function(r,a,f,S){const k=r.textContent;r=k+`
`+r.className.baseVal;var V;return Rd&&(V=Rd[r])||(Fr||(V=document.createElement("canvas"),V.className="blocklyComputeCanvas",document.body.appendChild(V),Fr=V.getContext("2d")),Fr.font=f+" "+a+" "+S,V=k?Fr.measureText(k).width:0,Rd&&(Rd[r]=V)),V},He=function(r,a,f,S){const k=document.createElement("span");k.style.font=f+" "+a+" "+S,k.textContent=r,r=document.createElement("div"),r.style.width="1px",r.style.height="0",a=document.createElement("div"),a.style.display="flex",a.style.position="fixed",a.style.top="0",a.style.left="0",a.appendChild(k),a.appendChild(r),document.body.appendChild(a),f={height:0,baseline:0};try{a.style.alignItems="baseline",f.baseline=r.offsetTop-k.offsetTop,a.style.alignItems="flex-end",f.height=r.offsetTop-k.offsetTop}finally{document.body.removeChild(a)}return f},Zt=function(r){return a_.getSizeInternal(r)},_t=function(r){if(Yt(r,"display")!=="none")return Kt(r);const a=r.style,f=a.display,S=a.visibility,k=a.position;a.visibility="hidden",a.position="absolute",a.display="inline";const V=r.offsetWidth;return r=r.offsetHeight,a.display=f,a.position=k,a.visibility=S,new Qs(V,r)},Kt=function(r){return new Qs(r.offsetWidth,r.offsetHeight)},Yt=function(r,a){return r=window.getComputedStyle(r),r[a]||r.getPropertyValue(a)},Rn=function(r){const a=new mn(0,0);r=r.getBoundingClientRect();var f=document.documentElement;return f=new mn(window.pageXOffset||f.scrollLeft,window.pageYOffset||f.scrollTop),a.x=r.left+f.x,a.y=r.top+f.y,a},ii=function(){const r=document.body,a=document.documentElement;return new mn(r.scrollLeft||a.scrollLeft,r.scrollTop||a.scrollTop)},Dr=function(r){const a=parseFloat(Yt(r,"borderLeftWidth")),f=parseFloat(Yt(r,"borderRightWidth")),S=parseFloat(Yt(r,"borderTopWidth"));return r=parseFloat(Yt(r,"borderBottomWidth")),new Ri(S,r,a,f)},Si=function(r,a,f){r=xr(r,a,f),a.scrollLeft=r.x,a.scrollTop=r.y},xr=function(r,a,f){var S=Rn(r),k=Rn(a),V=Dr(a);const _e=S.x-k.x-V.left;return S=S.y-k.y-V.top,k=Kt(r),r=a.clientWidth-k.width,k=a.clientHeight-k.height,V=a.scrollLeft,a=a.scrollTop,f?(V+=_e-r/2,a+=S-k/2):(V+=Math.min(_e,Math.max(_e-r,0)),a+=Math.min(S,Math.max(S-k,0))),new mn(V,a)},fr=function(r){const a=new mn(0,0);var f=r.x&&r.getAttribute("x");const S=r.y&&r.getAttribute("y");return f&&(a.x=parseInt(f)),S&&(a.y=parseInt(S)),(f=(f=r.getAttribute("transform"))&&f.match(yf))&&(a.x+=Number(f[1]),f[3]&&(a.y+=Number(f[3]))),(r=r.getAttribute("style"))&&-1<r.indexOf("translate")&&(r=r.match(Xf))&&(a.x+=Number(r[1]),r[3]&&(a.y+=Number(r[3]))),a},re=function(r){let a=0,f=0;for(;r;){const S=fr(r);if(a+=S.x,f+=S.y,(" "+(r.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;r=r.parentNode}return new mn(a,f)},Te=function(){const r=ii();return new Ri(r.y,document.documentElement.clientHeight+r.y,r.x,document.documentElement.clientWidth+r.x)},Ge=function(){const r=document.documentElement,a=window;return new mn(a.pageXOffset||r.scrollLeft,a.pageYOffset||r.scrollTop)},ot=function(r,a){var f=a.x;a=a.y;const S=r.getInjectionDiv().getBoundingClientRect();return f=new mn(f-S.left,a-S.top),a=r.getOriginOffsetInPixels(),mn.difference(f,a).scale(1/r.scale)},Ft=function(r,a){var f=a.scale(r.scale);a=f.x,f=f.y;const S=r.getInjectionDiv().getBoundingClientRect();return r=r.getOriginOffsetInPixels(),new mn(a+S.left+r.x,f+S.top+r.y)},nn=function(r){({document:bf=bf,DOMParser:fl=fl,XMLSerializer:au=au}=r),vg=new fl,Yf=new au},t.createElement$$module$build$src$core$utils$xml=function(r){return bf.createElementNS(kd,r)},t.createTextNode$$module$build$src$core$utils$xml=function(r){return bf.createTextNode(r)},t.textToDom$$module$build$src$core$utils$xml=function(r){let a=vg.parseFromString(r,"text/xml");if(a&&a.documentElement&&!a.getElementsByTagName("parsererror").length)return a.documentElement;if((a=vg.parseFromString(r,"text/html"))&&a.body.firstChild&&a.body.firstChild.nodeName.toLowerCase()==="xml")return a.body.firstChild;throw Error(`DOMParser was unable to parse: ${r}`)},On=function(r){return De(Yf.serializeToString(r))},De=function(r){return r.replace(cp,a=>`&#${a.charCodeAt(0)};`)},gt=function(r){return r?((r instanceof Element||typeof r=="string")&&(r=Nr(r),r=mr(r)),$t(r),r):null},$t=function(r){const a=r.kind;if(r=r.contents,a&&a!==bg&&a!==qc)throw Error("Invalid toolbox kind "+a+". Please supply either "+bg+" or "+qc);if(!r)throw Error("Toolbox must have a contents attribute.")},vt=function(r){return r?r.contents?r.contents:Array.isArray(r)&&0<r.length&&!r[0].nodeType?r:wr(r):[]},Wt=function(r){return a0.hasCategoriesInternal(r)},Un=function(r){if(!r)return!1;const a=r.kind;return a?a===qc:!!r.contents.filter(function(f){return f.kind.toUpperCase()==="CATEGORY"}).length},tr=function(r){return r&&r.contents?!!r.contents.filter(function(a){return a.kind.toUpperCase()==="CATEGORY"}).length:!1},mr=function(r){const a={contents:wr(r)};return r instanceof Node&&si(r,a),a},wr=function(r){const a=[];let f=r.childNodes;f||(f=r);for(let S=0,k;k=f[S];S++){if(!k.tagName)continue;r={};const V=k.tagName.toUpperCase();r.kind=V,V==="BLOCK"?r.blockxml=k:k.childNodes&&0<k.childNodes.length&&(r.contents=wr(k)),si(k,r),a.push(r)}return a},si=function(r,a){for(let f=0;f<r.attributes.length;f++){const S=r.attributes[f];-1<S.nodeName.indexOf("css-")?(a.cssconfig=a.cssconfig||{},a.cssconfig[S.nodeName.replace("css-","")]=S.value):a[S.nodeName]=S.value}},Nr=function(r){let a=null;if(r)if(typeof r=="string"){if(a=t.textToDom$$module$build$src$core$utils$xml(r),a.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else r instanceof Element&&(a=r);return a},jr=function(r,a,f,S,k,V){const _e=V.scrollbar&&V.scrollbar.canScrollVertically();return r.horizontal===Kf.LEFT?(f=k.absoluteMetrics.left+f,_e&&V.RTL&&(f+=Sa.scrollbarThickness)):(f=k.absoluteMetrics.left+k.viewMetrics.width-a.width-f,_e&&!V.RTL&&(f-=Sa.scrollbarThickness)),r.vertical===Xa.TOP?r=k.absoluteMetrics.top+S:(r=k.absoluteMetrics.top+k.viewMetrics.height-a.height-S,V.scrollbar&&V.scrollbar.canScrollHorizontally()&&(r-=Sa.scrollbarThickness)),new Ri(r,r+a.height,f,f+a.width)},bs=function(r,a){return{horizontal:a.toolboxMetrics.position===dr.LEFT||r.horizontalLayout&&!r.RTL?Kf.RIGHT:Kf.LEFT,vertical:a.toolboxMetrics.position===dr.BOTTOM?Xa.TOP:Xa.BOTTOM}},Ia=function(r,a,f,S){const k=r.left,V=r.right-r.left,_e=r.bottom-r.top;for(let ze=0;ze<S.length;ze++){const jt=S[ze];r.intersects(jt)&&(r=f===Ld.UP?jt.top-_e-a:jt.bottom+a,r=new Ri(r,r+_e,k,k+V),ze=-1)}return r},Eo=function(r,a){Zi(r,a)},Wl=function(r){Zi=r},en=function(r,a){Au.confirmInternal(r,a)},Ar=function(r,a){lu(r,a)},qa=function(r){lu=r},Ra=function(r,a,f){ml(r,a,f)},Bs=function(r){ml=r},Ps=function(r){return r.getVariableModel!==void 0},Li=function(r){return r.getProcedureDef!==void 0},Ir=function(r){return r.getProcedureCall!==void 0&&r.renameProcedure!==void 0},t.allUsedVarModels$$module$build$src$core$variables=function(r){r=r.getAllBlocks(!1);const a=new Set;for(let f=0;f<r.length;f++){const S=r[f].getVarModels();if(S)for(let k=0;k<S.length;k++){const V=S[k];V.getId()&&a.add(V)}}return Array.from(a.values())},t.allDeveloperVariables$$module$build$src$core$variables=function(r){r=r.getAllBlocks(!1);const a=new Set;for(let S=0,k;k=r[S];S++){var f=k.getDeveloperVariables;if(f){f=f();for(let V=0;V<f.length;V++)a.add(f[V])}}return Array.from(a.values())},Cn=function(r){let a=[];const f=document.createElement("button");return f.setAttribute("text","%{BKY_NEW_VARIABLE}"),f.setAttribute("callbackKey","CREATE_VARIABLE"),r.registerButtonCallback("CREATE_VARIABLE",function(S){Ts(S.getTargetWorkspace())}),a.push(f),r=Mr(r),a=a.concat(r)},Mr=function(r){r=r.getVariablesOfType("");const a=[];if(0<r.length){var f=r[r.length-1];if(Wr.variables_set){var S=t.createElement$$module$build$src$core$utils$xml("block");S.setAttribute("type","variables_set"),S.setAttribute("gap",Wr.math_change?"8":"24"),S.appendChild(js(f)),a.push(S)}if(Wr.math_change&&(S=t.createElement$$module$build$src$core$utils$xml("block"),S.setAttribute("type","math_change"),S.setAttribute("gap",Wr.variables_get?"20":"8"),S.appendChild(js(f)),f=t.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),S.appendChild(f),a.push(S)),Wr.variables_get){r.sort(hp.compareByName);for(let k=0,V;V=r[k];k++)f=t.createElement$$module$build$src$core$utils$xml("block"),f.setAttribute("type","variables_get"),f.setAttribute("gap","8"),f.appendChild(js(V)),a.push(f)}}return a},Ur=function(r){return Qc.generateUniqueNameInternal(r)},_r=function(r){return Di(qf.charAt(0),r.getAllVariableNames())},Di=function(r,a){if(!a.length)return r;const f=qf;let S="",k=f.indexOf(r);for(;;){let V=!1;for(let _e=0;_e<a.length;_e++)if(a[_e].toLowerCase()===r){V=!0;break}if(!V)break;k++,k===f.length&&(k=0,S=`${Number(S)+1}`),r=f.charAt(k)+S}return r},Ts=function(r,a,f){function S(V){hi(t.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,V,function(_e){if(_e){var ze=Qa(_e,r);if(ze){if(ze.type===k)var jt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",ze.name);else jt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,jt=jt.replace("%1",ze.name).replace("%2",ze.type);Eo(jt,function(){S(_e)})}else r.createVariable(_e,k),a&&a(_e)}else a&&a(null)})}const k=f||"";S("")},t.renameVariable$$module$build$src$core$variables=function(r,a,f){function S(k){const V=t.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",a.name);hi(V,k,function(_e){if(_e){var ze=fs(_e,a.type,r),jt=ka(a.name,_e,r);if(ze||jt){var Gn="";ze?Gn=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",ze.name).replace("%2",ze.type):jt&&(Gn=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",_e).replace("%2",jt)),Eo(Gn,function(){S(_e)})}else r.renameVariableById(a.getId(),_e),f&&f(_e)}else f&&f(null)})}S("")},hi=function(r,a,f){Ra(r,a,function(S){S&&(S=S.replace(/[\s\xa0]+/g," ").trim(),S===t.Msg$$module$build$src$core$msg.RENAME_VARIABLE||S===t.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(S=null),f(S)})},fs=function(r,a,f){f=f.getVariableMap().getAllVariables(),r=r.toLowerCase();for(let S=0,k;k=f[S];S++)if(k.name.toLowerCase()===r&&k.type!==a)return k;return null},Qa=function(r,a){a=a.getVariableMap().getAllVariables(),r=r.toLowerCase();for(let f=0,S;S=a[f];f++)if(S.name.toLowerCase()===r)return S;return null},ka=function(r,a,f){return f.getProcedureMap().getProcedures().length?lc(r,a,f):uc(r,a,f)},lc=function(r,a,f){r=r.toLowerCase(),a=a.toLowerCase(),f=f.getProcedureMap().getProcedures();for(const k of f){var S=k.getParameters().filter(Ps).map(V=>V.getVariableModel().name);if(S&&(f=S.some(V=>V.toLowerCase()===r),S=S.some(V=>V.toLowerCase()===a),f&&S))return k.getName()}return null},uc=function(r,a,f){r=r.toLowerCase(),a=a.toLowerCase(),f=f.getAllBlocks(!1);for(const k of f){if(!Li(k))continue;f=k.getProcedureDef();var S=f[1];const V=S.some(_e=>_e.toLowerCase()===r);if(S=S.some(_e=>_e.toLowerCase()===a),V&&S)return f[0]}return null},js=function(r){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name","VAR"),a.setAttribute("id",r.getId()),a.setAttribute("variabletype",r.type),r=t.createTextNode$$module$build$src$core$utils$xml(r.name),a.appendChild(r),a},t.getOrCreateVariablePackage$$module$build$src$core$variables=function(r,a,f,S){let k=t.getVariable$$module$build$src$core$variables(r,a,f,S);return k||(k=Yo(r,a,f,S)),k},t.getVariable$$module$build$src$core$variables=function(r,a,f,S){const k=r.getPotentialVariableMap();let V=null;if(a&&(V=r.getVariableById(a),!V&&k&&(V=k.getVariableById(a)),V))return V;if(f){if(S===void 0)throw Error("Tried to look up a variable by name without a type");V=r.getVariable(f,S),!V&&k&&(V=k.getVariable(f,S))}return V},Yo=function(r,a,f,S){const k=r.getPotentialVariableMap();return f||(f=Ur(r.isFlyout?r.targetWorkspace:r)),k?k.createVariable(f,S,a):r.createVariable(f,S,a)},Vl=function(r,a){r=r.getAllVariables();const f=[];if(a.length!==r.length)for(let S=0;S<r.length;S++){const k=r[S];a.indexOf(k)===-1&&f.push(k)}return f},pu=function(r,a){i(Pt.PASTER,r,a)},ch=function(r){o(Pt.PASTER,r)},Ko=function(r){return hh(r),Rc()?(kc(),Promise.resolve()):(Pd||(Pd=new Promise(a=>{Wm=a,Sc=window.requestAnimationFrame(()=>{kc(),a()})})),Pd)},gr=function(){return Pd||Promise.resolve()},Ei=function(r){r||window.cancelAnimationFrame(Sc),kc(r),!r&&Wm&&Wm()},Rc=function(){return rn},hh=function(r){Sg.add(r);const a=r.getParent();a?hh(a):Sf.add(r)},kc=function(r){const a=r?new Set([r]):new Set([...Sf].map(k=>k.workspace)),f=[...Sf].filter(fu).filter(k=>a.has(k.workspace));for(var S of f)Sl(S);for(const k of a)k.resizeContents();for(const k of f)S=k.getRelativeToSurfaceXY(),k.updateComponentLocations(S);for(const k of f)Tl(k);r||(Pd=null)},Tl=function(r){Sf.delete(r),Sg.delete(r);for(const a of r.getChildren(!1))Tl(a)},fu=function(r){return!r.isDisposed()&&!r.getParent()},Sl=function(r){if(Sg.has(r)){for(const a of r.getChildren(!1))Sl(a);r.renderEfficiently()}},El=function(r,a){const f=t.createElement$$module$build$src$core$utils$xml("xml");var S=yr(t.allUsedVarModels$$module$build$src$core$variables(r));S.hasChildNodes()&&f.appendChild(S),S=r.getTopComments(!0);for(let k=0;k<S.length;k++)f.appendChild(S[k].toXmlWithXY(a));for(r=r.getTopBlocks(!0),S=0;S<r.length;S++)f.appendChild(vr(r[S],a));return f},yr=function(r){const a=t.createElement$$module$build$src$core$utils$xml("variables");for(let f=0;f<r.length;f++){const S=r[f],k=t.createElement$$module$build$src$core$utils$xml("variable");k.appendChild(t.createTextNode$$module$build$src$core$utils$xml(S.name)),S.type&&k.setAttribute("type",S.type),k.id=S.getId(),a.appendChild(k)}return a},vr=function(r,a){if(r.isInsertionMarker()&&(r=r.getChildren(!1)[0],!r))return new DocumentFragment;let f=0;if(r.workspace.RTL&&(f=r.workspace.getWidth()),a=el(r,a),Fu(a)){const S=r.getRelativeToSurfaceXY();a.setAttribute("x",String(Math.round(r.workspace.RTL?f-S.x:S.x))),a.setAttribute("y",String(Math.round(S.y)))}return a},jl=function(r){if(r.isSerializable()){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name",r.name||""),r.toXml(a)}return null},Za=function(r,a){for(let f=0;f<r.inputList.length;f++){const S=r.inputList[f];for(let k=0;k<S.fieldRow.length;k++){const V=jl(S.fieldRow[k]);V&&a.appendChild(V)}}},el=function(r,a){if(r.isInsertionMarker())return(a=r.getChildren(!1)[0])?el(a):new DocumentFragment;const f=t.createElement$$module$build$src$core$utils$xml(r.isShadow()?"shadow":"block");if(f.setAttribute("type",r.type),a||(f.id=r.id),r.mutationToDom){var S=r.mutationToDom();S&&(S.hasChildNodes()||S.hasAttributes())&&f.appendChild(S)}if(Za(r,f),S=r.getCommentText()){var k=r.getIcon(Wo.COMMENT),V=k.getBubbleSize();k=k.bubbleIsVisible();var _e=t.createElement$$module$build$src$core$utils$xml("comment");_e.appendChild(t.createTextNode$$module$build$src$core$utils$xml(S)),_e.setAttribute("pinned",`${k}`),_e.setAttribute("h",String(V.height)),_e.setAttribute("w",String(V.width)),f.appendChild(_e)}for(r.data&&(S=t.createElement$$module$build$src$core$utils$xml("data"),S.appendChild(t.createTextNode$$module$build$src$core$utils$xml(r.data)),f.appendChild(S)),S=0;S<r.inputList.length;S++){V=r.inputList[S];var ze=void 0;if(k=!0,V.type!==t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&V.type!==t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){_e=V.connection.targetBlock(),V.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?ze=t.createElement$$module$build$src$core$utils$xml("value"):V.type===t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(ze=t.createElement$$module$build$src$core$utils$xml("statement"));const Gn=V.connection.getShadowDom();!Gn||_e&&_e.isShadow()||ze.appendChild(mu(Gn,a)),_e&&(_e=el(_e,a),_e.nodeType===Bp.ELEMENT_NODE&&(ze.appendChild(_e),k=!1)),ze.setAttribute("name",V.name),k||f.appendChild(ze)}}r.inputsInline!==void 0&&r.inputsInline!==r.inputsInlineDefault&&f.setAttribute("inline",String(r.inputsInline)),r.isCollapsed()&&f.setAttribute("collapsed","true"),r.isEnabled()||f.setAttribute("disabled","true"),r.isDeletable()||r.isShadow()||f.setAttribute("deletable","false"),r.isMovable()||r.isShadow()||f.setAttribute("movable","false"),r.isEditable()||f.setAttribute("editable","false"),ze=r.getNextBlock();let jt;return ze&&(S=el(ze,a),S.nodeType===Bp.ELEMENT_NODE&&(jt=t.createElement$$module$build$src$core$utils$xml("next"),jt.appendChild(S),f.appendChild(jt))),r=r.nextConnection&&r.nextConnection.getShadowDom(),!r||ze&&ze.isShadow()||jt.appendChild(mu(r,a)),f},mu=function(r,a){let f=r=r.cloneNode(!0),S;for(;f;)if(a&&f.nodeName==="shadow"&&f.removeAttribute("id"),f.firstChild)f=f.firstChild;else{for(;f&&!f.nextSibling;){S=f,f=f.parentNode;let k;S.nodeType===Bp.TEXT_NODE&&S.data.trim()===""&&((k=f)==null?void 0:k.firstChild)!==S&&ft(S)}f&&(S=f,f=f.nextSibling,S.nodeType===Bp.TEXT_NODE&&S.data.trim()===""&&ft(S))}return r},Ki=function(r){return On(r).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},ms=function(r){r=Ki(r).split("<");let a="";for(let f=1;f<r.length;f++){const S=r[f];S[0]==="/"&&(a=a.substring(2)),r[f]=a+"<"+S,S[0]!=="/"&&S.slice(-2)!=="/>"&&(a+="  ")}return r=r.join(`
`),r=r.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),r.replace(/^\n/,"")},tl=function(r,a){return a.setResizesEnabled(!1),a.clear(),r=t.domToWorkspace$$module$build$src$core$xml(r,a),a.setResizesEnabled(!0),r},t.domToWorkspace$$module$build$src$core$xml=function(r,a){let f=0;a.RTL&&(f=a.getWidth());const S=[];ne();const k=t.getGroup$$module$build$src$core$events$utils();k||t.setGroup$$module$build$src$core$events$utils(!0),a.setResizesEnabled&&a.setResizesEnabled(!1);let V=!0;try{for(let _e=0,ze;ze=r.childNodes[_e];_e++){const jt=ze.nodeName.toLowerCase(),Gn=ze;if(jt==="block"||jt==="shadow"&&!le()){const _l=no(Gn,a);S.push(_l.id);let Ka;const Of=parseInt((Ka=Gn.getAttribute("x"))!=null?Ka:"10",10);let yT;const vT=parseInt((yT=Gn.getAttribute("y"))!=null?yT:"10",10);isNaN(Of)||isNaN(vT)||_l.moveBy(a.RTL?f-Of:Of,vT,["create"]),V=!1}else{if(jt==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(jt==="comment")a.rendered?Bl.fromXmlRendered(Gn,a,f):Zc.fromXml(Gn,a);else if(jt==="variables"){if(V)Bu(Gn,a);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");V=!1}}}}finally{t.setGroup$$module$build$src$core$events$utils(k),a.setResizesEnabled&&a.setResizesEnabled(!0),a.rendered&&Ei(),fe()}return ce(new(Re(va))(a)),S},Sd=function(r,a){if(!a.getBlocksBoundingBox)return t.domToWorkspace$$module$build$src$core$xml(r,a);var f=a.getBlocksBoundingBox();if(r=t.domToWorkspace$$module$build$src$core$xml(r,a),f&&f.top!==f.bottom){var S=f.bottom;f=a.RTL?f.right:f.left;var k=1/0;let V=-1/0,_e=1/0;for(let ze=0;ze<r.length;ze++){const jt=a.getBlockById(r[ze]).getRelativeToSurfaceXY();jt.y<_e&&(_e=jt.y),jt.x<k&&(k=jt.x),jt.x>V&&(V=jt.x)}for(S=S-_e+10,f=a.RTL?f-V:f-k,k=0;k<r.length;k++)a.getBlockById(r[k]).moveBy(f,S,["create"])}return r},t.domToBlock$$module$build$src$core$xml=function(r,a){return r=no(r,a),a.rendered&&Ei(),r},no=function(r,a){t.disable$$module$build$src$core$events$utils();var f=a.getAllVariables();let S;try{if(S=dh(r,a),a.rendered){const k=S,V=S.getDescendants(!1);k.setConnectionTracking(!1);for(let _e=V.length-1;0<=_e;_e--)V[_e].initSvg();for(let _e=V.length-1;0<=_e;_e--)V[_e].queueRender();setTimeout(function(){k.disposed||k.setConnectionTracking(!0)},1),a.resizeContents()}else{const k=S.getDescendants(!1);for(let V=k.length-1;0<=V;V--)k[V].initModel()}}finally{t.enable$$module$build$src$core$events$utils()}if(se()){for(r=Vl(a,f),a=0;a<r.length;a++)f=r[a],ce(new(Re(fo))(f));ce(new(Re(t.CREATE$$module$build$src$core$events$utils))(S))}return S},Bu=function(r,a){for(let S=0;S<r.children.length;S++){var f=r.children[S];const k=f.getAttribute("type"),V=f.getAttribute("id");if(f=f.textContent,!f)break;a.createVariable(f,k,V)}},aa=function(r){const a={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let f=0;f<r.children.length;f++){const S=r.children[f];if(S.nodeType!==Bp.TEXT_NODE)switch(S.nodeName.toLowerCase()){case"mutation":a.mutation.push(S);break;case"comment":a.comment.push(S);break;case"data":a.data.push(S);break;case"title":case"field":a.field.push(S);break;case"value":case"statement":a.input.push(S);break;case"next":a.next.push(S);break;default:console.warn("Ignoring unknown tag: "+S.nodeName)}}return a},gu=function(r,a){let f=!1;for(let S=0;S<r.length;S++){const k=r[S];a.domToMutation&&(a.domToMutation(k),a.initSvg&&(f=!0))}return f},ir=function(r,a){for(let S=0;S<r.length;S++){var f=r[S];const k=f.textContent,V=f.getAttribute("pinned")==="true";let _e;const ze=parseInt((_e=f.getAttribute("w"))!=null?_e:"50",10);let jt;f=parseInt((jt=f.getAttribute("h"))!=null?jt:"50",10),a.setCommentText(k);const Gn=a.getIcon(Wo.COMMENT);isNaN(ze)||isNaN(f)||Gn.setBubbleSize(new Qs(ze,f)),Gn.setBubbleVisible(V),setTimeout(()=>Gn.setBubbleVisible(V),1)}},zn=function(r,a){for(let f=0;f<r.length;f++)a.data=r[f].textContent},Ss=function(r,a){for(let f=0;f<r.length;f++){const S=r[f],k=S.getAttribute("name");k?Oa(a,k,S):console.warn(`Ignoring unnamed field in block ${a.type}`)}},ro=function(r){let a=null,f=null;for(let S=0;S<r.childNodes.length;S++){const k=r.childNodes[S];Fu(k)&&(k.nodeName.toLowerCase()==="block"?a=k:k.nodeName.toLowerCase()==="shadow"&&(f=k))}return{childBlockElement:a,childShadowElement:f}},Pu=function(r,a,f,S){for(let V=0;V<r.length;V++){var k=r[V];const _e=k.getAttribute("name"),ze=_e?f.getInput(_e):null;if(!ze){console.warn("Ignoring non-existent input "+_e+" in block "+S);break}if(k=ro(k),k.childBlockElement){if(!ze.connection)throw TypeError("Input connection does not exist.");dh(k.childBlockElement,a,ze.connection,!1)}if(k.childShadowElement){let jt;(jt=ze.connection)==null||jt.setShadowDom(k.childShadowElement)}}},_u=function(r,a,f){for(let S=0;S<r.length;S++){const k=ro(r[S]);if(k.childBlockElement){if(!f.nextConnection)throw TypeError("Next statement does not exist.");if(f.nextConnection.isConnected())throw TypeError("Next statement is already connected.");dh(k.childBlockElement,a,f.nextConnection,!0)}k.childShadowElement&&f.nextConnection&&f.nextConnection.setShadowDom(k.childShadowElement)}},dh=function(r,a,f,S){var k;const V=r.getAttribute("type");if(!V)throw TypeError("Block type unspecified: "+r.outerHTML);var _e=(k=r.getAttribute("id"))!=null?k:void 0;k=a.newBlock(V,_e),_e=aa(r);const ze=gu(_e.mutation,k);if(ir(_e.comment,k),zn(_e.data,k),f)if(S)if(k.previousConnection)f.connect(k.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(k.outputConnection)f.connect(k.outputConnection);else if(k.previousConnection)f.connect(k.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Ss(_e.field,k),Pu(_e.input,a,k,V),_u(_e.next,a,k),ze&&k.initSvg(),(a=r.getAttribute("inline"))&&k.setInputsInline(a==="true"),(a=r.getAttribute("disabled"))&&k.setEnabled(a!=="true"&&a!=="disabled"),(a=r.getAttribute("deletable"))&&k.setDeletable(a==="true"),(a=r.getAttribute("movable"))&&k.setMovable(a==="true"),(a=r.getAttribute("editable"))&&k.setEditable(a==="true"),(a=r.getAttribute("collapsed"))&&k.setCollapsed(a==="true"),r.nodeName.toLowerCase()==="shadow"){for(r=k.getChildren(!1),a=0;a<r.length;a++)if(!r[a].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");k.setShadow(!0)}return k},Oa=function(r,a,f){const S=r.getField(a);S?S.fromXml(f):console.warn("Ignoring non-existent field "+a+" in block "+r.type)},la=function(r){for(let a=0;a<r.childNodes.length;a++){const f=r.childNodes[a];if(f.nodeName.toLowerCase()==="next"){r.removeChild(f);break}}},Fu=function(r){return r.nodeType===Bp.ELEMENT_NODE},Tr=function(r){return r.saveState!==void 0&&r.loadState!==void 0},Is=function(r,a){i(Pt.SERIALIZER,r,a)},yi=function(r){o(Pt.SERIALIZER,r)},xi=function(r,{addCoordinates:a=!1,addInputBlocks:f=!0,addNextBlocks:S=!0,doFullSerialization:k=!0,saveIds:V=!0}={}){if(r.isInsertionMarker())return null;const _e={type:r.type,id:V?r.id:void 0};return a&&Qr(r,_e),ua(r,_e),yu(r,_e,k),xo(r,_e,k),vu(r,_e,k),f&&nl(r,_e,k,V),S&&Ni(r,_e,k,V),_e},ua=function(r,a){r.isCollapsed()&&(a.collapsed=!0),r.isEnabled()||(a.enabled=!1),r.isOwnDeletable()||(a.deletable=!1),r.isOwnMovable()||(a.movable=!1),r.isOwnEditable()||(a.editable=!1),r.inputsInline!==void 0&&r.inputsInline!==r.inputsInlineDefault&&(a.inline=r.inputsInline),r.data&&(a.data=r.data)},Qr=function(r,a){const f=r.workspace;r=r.getRelativeToSurfaceXY(),a.x=Math.round(f.RTL?f.getWidth()-r.x:r.x),a.y=Math.round(r.y)},yu=function(r,a,f){r.saveExtraState?(r=r.saveExtraState(f),r!==null&&(a.extraState=r)):r.mutationToDom&&(r=r.mutationToDom(),r!==null&&(a.extraState=Ki(r).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},xo=function(r,a,f){const S=Object.create(null);for(const k of r.getIcons())Tr(k)&&(r=k.saveState(f))&&(S[k.getType().toString()]=r);Object.keys(S).length&&(a.icons=S)},vu=function(r,a,f){const S=Object.create(null);for(let k=0;k<r.inputList.length;k++){const V=r.inputList[k];for(let _e=0;_e<V.fieldRow.length;_e++){const ze=V.fieldRow[_e];ze.isSerializable()&&(S[ze.name]=ze.saveState(f))}}Object.keys(S).length&&(a.fields=S)},nl=function(r,a,f,S){const k=Object.create(null);for(let V=0;V<r.inputList.length;V++){const _e=r.inputList[V];if(!_e.connection)continue;const ze=wi(_e.connection,f,S);ze&&(k[_e.name]=ze)}Object.keys(k).length&&(a.inputs=k)},Ni=function(r,a,f,S){r.nextConnection&&(r=wi(r.nextConnection,f,S))&&(a.next=r)},wi=function(r,a,f){const S=r.getShadowState(!0);if(r=r.targetBlock(),!S&&!r)return null;const k=Object.create(null);return S&&(k.shadow=S),r&&!r.isShadow()&&(k.block=xi(r,{doFullSerialization:a,saveIds:f})),k},Hn=function(r,a,{recordUndo:f=!1}={}){return r=$i(r,a,{recordUndo:f}),a.rendered&&Ei(),r},$i=function(r,a,{parentConnection:f,isShadow:S=!1,recordUndo:k=!1}={}){const V=le();he(k),(k=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),t.disable$$module$build$src$core$events$utils();let _e;try{_e=Xr(r,a,{parentConnection:f,isShadow:S})}finally{t.enable$$module$build$src$core$events$utils()}if(se()&&ce(new(Re(t.CREATE$$module$build$src$core$events$utils))(_e)),t.setGroup$$module$build$src$core$events$utils(k),he(V),a.rendered){const ze=_e;setTimeout(()=>{ze.disposed||ze.setConnectionTracking(!0)},1)}return _e},Xr=function(r,a,{parentConnection:f,isShadow:S=!1}={}){if(!r.type)throw new u_(r);const k=a.newBlock(r.type,r.id);return k.setShadow(S),ad(k,r),bu(k,r),Gi(k,r),La(f,k,r),ph(k,r),hr(k,r),Jo(k,r),ld(k,r),Oc(k,a.rendered),k},ad=function(r,a){let f=a.x===void 0?0:a.x;a=a.y===void 0?0:a.y;const S=r.workspace;f=S.RTL?S.getWidth()-f:f,r.moveBy(f,a)},bu=function(r,a){a.collapsed&&r.setCollapsed(!0),a.deletable===!1&&r.setDeletable(!1),a.movable===!1&&r.setMovable(!1),a.editable===!1&&r.setEditable(!1),a.enabled===!1&&r.setEnabled(!1),a.inline!==void 0&&r.setInputsInline(a.inline),a.data!==void 0&&(r.data=a.data)},Gi=function(r,a){a.extraState&&(r.loadExtraState?r.loadExtraState(a.extraState):r.domToMutation&&r.domToMutation(t.textToDom$$module$build$src$core$utils$xml(a.extraState)))},La=function(r,a,f){if(r){if(r.getSourceBlock().isShadow()&&!a.isShadow())throw new py(f);if(r.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var S=a.outputConnection;if(!S)throw new Zf("output",a,f)}else if(S=a.previousConnection,!S)throw new Zf("previous",a,f);if(!r.connect(S)){const k=a.workspace.connectionChecker;throw new u0(k.getErrorMessage(k.canConnectWithReason(S,r,!1),S,r),r.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",a,f)}}},ph=function(r,a){if(a.icons){var f=Object.keys(a.icons);for(const k of f){f=a.icons[k];var S=r.getIcon(k);if(!S){if(S=d(Pt.ICON,k,!1),!S)throw new Pp(k,r,a);S=new S(r),r.addIcon(S)}Tr(S)&&S.loadState(f)}}},hr=function(r,a){if(a.fields){var f=Object.keys(a.fields);for(let S=0;S<f.length;S++){const k=f[S],V=a.fields[k],_e=r.getField(k);_e?_e.loadState(V):console.warn(`Ignoring non-existant field ${k} in block ${r.type}`)}}},Jo=function(r,a){if(a.inputs){var f=Object.keys(a.inputs);for(let S=0;S<f.length;S++){const k=f[S],V=r.getInput(k);if(!V||!V.connection)throw new Zf(k,r,a);np(V.connection,a.inputs[k])}}},ld=function(r,a){if(a.next){if(!r.nextConnection)throw new Zf("next",r,a);np(r.nextConnection,a.next)}},np=function(r,a){a.shadow&&r.setShadowState(a.shadow),a.block&&Xr(a.block,r.getSourceBlock().workspace,{parentConnection:r})},Oc=function(r,a){if(a){r.setConnectionTracking(!1),r.initSvg(),r.queueRender();for(const f of r.getIcons())f.onLocationChange(r.getRelativeToSurfaceXY())}else r.initModel()},rp=function(r){const a=r.workspace,f=t.config$$module$build$src$core$config.snapRadius,S=r.getRelativeToSurfaceXY(),k=new mn(0,0),V=a.getAllBlocks(!1).filter(_e=>_e.id!=r.id).map(_e=>_e.getRelativeToSurfaceXY());for(;kp(mn.sum(S,k),V)||mf(r,k,f);)a.RTL?k.translate(-f,2*f):k.translate(f,2*f);r.moveTo(mn.sum(S,k))},kp=function(r,a){return a.some(f=>1>=Math.abs(f.x-r.x)&&1>=Math.abs(f.y-r.y))},mf=function(r,a,f){return r.getConnections_(!1).some(S=>!!S.closest(f,a).connection)},Ed=function(r){return xe("Blockly.clipboard.copy","v11","v12","myCopyable.toCopyData()"),m0.copyInternal(r)},Xl=function(r){const a=r.toCopyData();ia=a;let f;return d_=(f=r.workspace)!=null?f:null,a},Rs=function(r,a,f){return r&&a?zu(r,a,f):ia&&d_?zu(ia,d_):null},zu=function(r,a,f){let S;a=(S=a.getRootWorkspace())!=null?S:a;let k,V;return(V=(k=p(Pt.PASTER,r.paster,!1))==null?void 0:k.paste(r,a,f))!=null?V:null},fh=function(r){return xe("Blockly.clipboard.duplicate","v11","v12","Blockly.clipboard.paste(myCopyable.toCopyData(), myWorkspace)"),m0.duplicateInternal(r)},Da=function(r){const a=r.toCopyData();return a?Rs(a,r.workspace):null},li=function(r,a){r.setAttribute(fy,a)},Sr=function(r,a,f){Array.isArray(f)&&(f=f.join(" ")),r.setAttribute(Fv+a,`${f}`)},io=function(){return md},Na=function(r){if(md=r,r===null){let a;(a=document.querySelector("."+Up))==null||a.remove()}},Po=function(){document.querySelector("."+Up)||(md=document.createElement("div"),md.className=Up,(B()||document.body).appendChild(md))},Yl=function(r,a,f){Kl(),Kh=r,rm=f,(r=md)&&(r.style.direction=a?"rtl":"ltr",r.style.display="block",a=I(),Hp=a.getRenderer().getClassName(),$f=a.getTheme().getClassName(),Hp&&we(r,Hp),$f&&we(r,$f))},Kl=function(){if(Lh()){Kh=null;var r=md;r&&(r.style.display="none",r.style.left="",r.style.top="",rm&&rm(),rm=null,r.textContent="",Hp&&(Tt(r,Hp),Hp=""),$f&&(Tt(r,$f),$f=""),I().markFocused())}},Lh=function(){return!!Kh},Hr=function(r){Kh===r&&Kl()},Ci=function(r,a,f){md.style.left=r+"px",md.style.top=a+"px",md.style.height=f+"px"},br=function(r,a,f,S){const k=ca(r,a,f);r=Wi(r,a,f,S),0>k?Ci(r,0,f.height+k):Ci(r,k,f.height)},Wi=function(r,a,f,S){return S?Math.min(Math.max(a.right-f.width,r.left),r.right-f.width):Math.max(Math.min(a.left,r.right-f.width),r.left)},ca=function(r,a,f){return a.bottom+f.height>=r.bottom?a.top-f.height:a.bottom},Tu=function(r){return!(r==null||!r.repositionForWindowResize)},ip=function(){Tu(Kh)&&Kh.repositionForWindowResize()||Kl()},sp=function(){return Vm},ud=function(r){Vm=r},Uu=function(r,a,f){if(Yl(my,f,Fs),a.length){var S=rl(a,f);xg=S,Lc(S,r,f),setTimeout(function(){S.focus()},1),Vm=null}else Jl()},rl=function(r,a){const f=new Eg;f.setRole(th.MENU);for(let S=0;S<r.length;S++){const k=r[S],V=new zp(k.text);V.setRightToLeft(a),V.setRole(th.MENUITEM),f.addChild(V),V.setEnabled(k.enabled),k.enabled&&V.onAction(function(){Jl(),requestAnimationFrame(()=>{setTimeout(()=>{k.callback(k.scope)},0)})},{})}return f},Lc=function(r,a,f){const S=Te();a=new Ri(a.clientY+S.top,a.clientY+S.top,a.clientX+S.left,a.clientX+S.left),Dh(r);const k=r.getSize();f&&(a.left+=k.width,a.right+=k.width,S.left+=k.width,S.right+=k.width),br(S,a,k,f),r.focus()},Dh=function(r){var a=io();if(!a)throw Error("Attempting to create a context menu when widget div is null");a=r.render(a),we(a,"blocklyContextMenu"),Ae(a,"contextmenu",null,Hu),r.focus()},Hu=function(r){r.preventDefault(),r.stopPropagation()},Jl=function(){Hr(my),Vm=null},Fs=function(){xg&&(xg.dispose(),xg=null)},t.callbackFactory$$module$build$src$core$contextmenu=function(r,a){return()=>{t.disable$$module$build$src$core$events$utils();let f;try{f=a instanceof Element?no(a,r.workspace):$i(a,r.workspace);const S=r.getRelativeToSurfaceXY();S.x=r.RTL?S.x-t.config$$module$build$src$core$config.snapRadius:S.x+t.config$$module$build$src$core$config.snapRadius,S.y+=2*t.config$$module$build$src$core$config.snapRadius,f.moveBy(S.x,S.y)}finally{t.enable$$module$build$src$core$events$utils()}return se()&&!f.isShadow()&&ce(new(Re(t.CREATE$$module$build$src$core$events$utils))(f)),f.select(),f}},ql=function(r){return{text:t.Msg$$module$build$src$core$msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.setGroup$$module$build$src$core$events$utils(!0),r.dispose(),t.setGroup$$module$build$src$core$events$utils(!1)}}},Nh=function(r){return{text:t.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){const a=r.toCopyData();a&&Rs(a,r.workspace)}}},Dc=function(r,a){const f={enabled:!0};return f.text=t.Msg$$module$build$src$core$msg.ADD_COMMENT,f.callback=function(){const S=new Bl(r,t.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT,Bl.DEFAULT_SIZE,Bl.DEFAULT_SIZE);var k=r.getInjectionDiv().getBoundingClientRect();k=new mn(a.clientX-k.left,a.clientY-k.top);const V=r.getOriginOffsetInPixels();k=mn.difference(k,V),k.scale(1/r.scale),S.moveBy(k.x,k.y),r.rendered&&(S.initSvg(),S.render(),S.select())},f},Nc=function(r){return r*Math.PI/180},ns=function(r){return 180*r/Math.PI},Br=function(r,a,f){if(f<r){const S=f;f=r,r=S}return Math.max(r,Math.min(a,f))},xl=function(){document.querySelector(".blocklyDropDownDiv")||(bi=document.createElement("div"),bi.className="blocklyDropDownDiv",(B()||document.body).appendChild(bi),Vp=document.createElement("div"),Vp.className="blocklyDropDownContent",bi.appendChild(Vp),om=document.createElement("div"),om.className="blocklyDropDownArrow",bi.appendChild(om),bi.style.opacity="0",bi.style.transition="transform "+Cf+"s, opacity "+Cf+"s",bi.addEventListener("focusin",function(){we(bi,"blocklyFocused")}),bi.addEventListener("focusout",function(){Tt(bi,"blocklyFocused")}))},Ba=function(r){am=r},Ql=function(){return Mf},Su=function(){return Vp},mh=function(){Vp.textContent="",Vp.style.width=""},xd=function(r,a){bi.style.backgroundColor=r,bi.style.borderColor=a},di=function(r,a,f,S){return kt(Ve(a),r,f,S)},ye=function(r,a,f){return $g=!0,kt(Be(r),r,a,f)},Ve=function(r){var a=r.getSvgRoot();const f=r.workspace.scale,S=r.height*f;return r=r.width*f,a=Rn(a),new Ri(a.y,a.y+S,a.x,a.x+r)},Be=function(r){return r=r.getScaledBBox(),new Ri(r.top,r.bottom,r.left,r.right)},kt=function(r,a,f,S){const k=r.left+(r.right-r.left)/2,V=r.bottom;r=r.top,S&&(r+=S),S=a.getSourceBlock();let _e=S.workspace;for(;_e.options.parentWorkspace;)_e=_e.options.parentWorkspace;return Ba(_e.getParentSvg().parentNode),tn(a,S.RTL,k,V,k,r,f)},tn=function(r,a,f,S,k,V,_e){return Mf=r,Gp=_e||null,bi.style.direction=a?"rtl":"ltr",r=I(),Wp=r.getRenderer().getClassName(),sm=r.getTheme().getClassName(),Wp&&we(bi,Wp),sm&&we(bi,sm),Bi(f,S,k,V)},Mn=function(r,a,f,S){return r=Pr(r,f.left,f.right,S.width),{initialX:r.divX,initialY:a,finalX:r.divX,finalY:a+Xm,arrowX:r.arrowX,arrowY:-(jm/2+wg),arrowAtTop:!0,arrowVisible:!0}},Xn=function(r,a,f,S){return r=Pr(r,f.left,f.right,S.width),{initialX:r.divX,initialY:a-S.height,finalX:r.divX,finalY:a-S.height-Xm,arrowX:r.arrowX,arrowY:S.height-2*wg-jm/2,arrowAtTop:!1,arrowVisible:!0}},gn=function(r,a,f){return r=Pr(r,a.left,a.right,f.width),{initialX:r.divX,initialY:0,finalX:r.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Pr=function(r,a,f,S){return a=Br(a,r-S/2,f-S),r=r-jm/2-a,f=gy,r=Br(f,r,S-f-jm),{arrowX:r,divX:a}},so=function(){return!!Mf},vi=function(r,a){return Mf===r?(a?il():oo(),!0):!1},oo=function(){bi.style.transform="translate(0, 0)",bi.style.opacity="0",Ym=setTimeout(function(){il()},1e3*Cf),Gp&&(Gp(),Gp=null)},il=function(){so()&&(Ym&&clearTimeout(Ym),bi.style.transform="",bi.style.left="",bi.style.top="",bi.style.opacity="0",bi.style.display="none",bi.style.backgroundColor="",bi.style.borderColor="",Gp&&(Gp(),Gp=null),mh(),Mf=null,Wp&&(Tt(bi,Wp),Wp=""),sm&&(Tt(bi,sm),sm=""),I().markFocused())},Bi=function(r,a,f,S){r=y.getPositionMetrics(r,a,f,S),r.arrowVisible?(om.style.display="",om.style.transform="translate("+r.arrowX+"px,"+r.arrowY+"px) rotate(45deg)",om.setAttribute("class",r.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):om.style.display="none",a=Math.floor(r.initialX),f=Math.floor(r.initialY),S=Math.floor(r.finalX);const k=Math.floor(r.finalY);return bi.style.left=a+"px",bi.style.top=f+"px",bi.style.display="block",bi.style.opacity="1",bi.style.transform="translate("+(S-a)+"px,"+(k-f)+"px)",!!r.arrowAtTop},gs=function(){if(Mf){var r=Mf.getSourceBlock();r=$g?Be(Mf):Ve(r);const a=r.left+(r.right-r.left)/2;Bi(a,r.bottom,a,r.top)}else oo()},Eu=function(r){if(!(100<r.getDescendants(!1).length)){var a=r.workspace,f=r.getSvgRoot();a.getAudioManager().play("delete");var S=a.getSvgXY(f);f=f.cloneNode(!0),f.setAttribute("transform","translate("+S.x+","+S.y+")"),a.getParentSvg().appendChild(f),Yn(f,{x:S.x,y:S.y,width:r.width,height:r.height},a.RTL,new Date,a.scale)}},Yn=function(r,a,f,S,k){const V=(new Date().getTime()-S.getTime())/150;1<V?ft(r):(r.setAttribute("transform","translate("+(a.x+(f?-1:1)*a.width*k/2*V)+","+(a.y+a.height*k*V)+") scale("+(1-V)*k+")"),setTimeout(Yn,10,r,a,f,S,k))},ha=function(r){var a=r.workspace;const f=a.scale;if(a.getAudioManager().play("click"),!(1>f)){var S=a.getSvgXY(r.getSvgRoot());r.outputConnection?(S.x+=(r.RTL?3:-3)*f,S.y+=13*f):r.previousConnection&&(S.x+=(r.RTL?-23:23)*f,S.y+=3*f);var k=ie(We.CIRCLE,{cx:S.x,cy:S.y,r:0,fill:"none",stroke:"#888","stroke-width":10},a.getParentSvg());r=ie(We.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*f},k),a=ie(We.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},k),r.beginElement(),a.beginElement(),setTimeout(()=>void ft(k),150)}},Xs=function(r){if(Pa(),r.workspace.getAudioManager().play("disconnect"),!(1>r.workspace.scale)){var a=r.getHeightWidth().height;a=Math.atan(10/a)/Math.PI*180,r.RTL||(a*=-1),F=r,zs(r,a,new Date)}},zs=function(r,a,f){const S=(new Date().getTime()-f.getTime())/200;let k="";1>=S&&(k=`skewX(${Math.round(Math.sin(S*Math.PI*3)*(1-S)*a)})`,R=setTimeout(zs,10,r,a,f)),r.getSvgRoot().setAttribute("transform",`${r.getTranslation()} ${k}`)},Pa=function(){F&&(R&&(clearTimeout(R),R=null),F.getSvgRoot().setAttribute("transform",F.getTranslation()),F=null)},Bh=function(r,a){return xe("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),r.startsWith(a)},gh=function(r){return r.length?r.reduce(function(a,f){return a.length<f.length?a:f}).length:0},cc=function(r,a){if(!r.length)return 0;if(r.length===1)return r[0].length;let f=0;a=a||gh(r);let S;for(S=0;S<a;S++){for(var k=r[0][S],V=1;V<r.length;V++)if(k!==r[V][S])return f;k===" "&&(f=S+1)}for(k=1;k<r.length;k++)if((V=r[k][S])&&V!==" ")return f;return a},qo=function(r,a){if(!r.length)return 0;if(r.length===1)return r[0].length;let f=0;a=a||gh(r);let S;for(S=0;S<a;S++){for(var k=r[0].substr(-S-1,1),V=1;V<r.length;V++)if(k!==r[V].substr(-S-1,1))return f;k===" "&&(f=S+1)}for(k=1;k<r.length;k++)if((V=r[k].charAt(r[k].length-S-1))&&V!==" ")return f;return a},t.wrap$$module$build$src$core$utils$string=function(r,a){r=r.split(`
`);for(let f=0;f<r.length;f++)r[f]=Bc(r[f],a);return r.join(`
`)},Bc=function(r,a){if(r.length<=a)return r;const f=r.trim().split(/\s+/);for(var S=0;S<f.length;S++)f[S].length>a&&(a=f[S].length);var k=-1/0;let V,_e=1;do{S=k,V=r,r=[],k=f.length/_e;let ze=1;for(let jt=0;jt<f.length-1;jt++)ze<(jt+1.5)/k?(ze++,r[jt]=!0):r[jt]=!1;r=Fa(f,r,a),k=Ph(f,r,a),r=Fh(f,r),_e++}while(k>S);return V},Ph=function(r,a,f){const S=[0],k=[];for(var V=0;V<r.length;V++)S[S.length-1]+=r[V].length,a[V]===!0?(S.push(0),k.push(r[V].charAt(r[V].length-1))):a[V]===!1&&S[S.length-1]++;for(r=Math.max(...S),a=0,V=0;V<S.length;V++)a-=2*Math.pow(Math.abs(f-S[V]),1.5),a-=Math.pow(r-S[V],1.5),".?!".indexOf(k[V])!==-1?a+=f/3:",;)]}".indexOf(k[V])!==-1&&(a+=f/4);return 1<S.length&&S[S.length-1]<=S[S.length-2]&&(a+=.5),a},Fa=function(r,a,f){let S=Ph(r,a,f),k;for(let V=0;V<a.length-1;V++){if(a[V]===a[V+1])continue;const _e=[].concat(a);_e[V]=!_e[V],_e[V+1]=!_e[V+1];const ze=Ph(r,_e,f);ze>S&&(S=ze,k=_e)}return k?Fa(r,k,f):a},Fh=function(r,a){const f=[];for(let S=0;S<r.length;S++)f.push(r[S]),a[S]!==void 0&&f.push(a[S]?`
`:" ");return f.join("")},t.isNumber$$module$build$src$core$utils$string=function(r){return/^\s*-?\d+(\.\d+)?\s*$/.test(r)},hc=function(r){Jn=r},Gu=function(){return Jn},cd=function(){return nr},Qo=function(){return Ru},ao=function(r){if(r=wl(r)){for(r=r.tooltip;typeof r=="function";)r=r();if(typeof r!="string")throw Error("Tooltip function must return a string.");return r}return""},wl=function(r){for(;r&&r.tooltip;){if(typeof r.tooltip=="string"||typeof r.tooltip=="function")return r;r=r.tooltip}return null},zh=function(){document.querySelector(".blocklyTooltipDiv")||(Ru=document.createElement("div"),Ru.className="blocklyTooltipDiv",(B()||document.body).appendChild(Ru))},Pi=function(r){r.mouseOverWrapper_=je(r,"pointerover",null,Wu),r.mouseOutWrapper_=je(r,"pointerout",null,Zl),r.addEventListener("pointermove",Pc,!1)},hd=function(r){r&&(nt(r.mouseOverWrapper_),nt(r.mouseOutWrapper_),r.removeEventListener("pointermove",Pc))},Wu=function(r){Ao||(r=wl(r.currentTarget),er!==r&&($l(),pr=null,er=r),clearTimeout(ht))},Zl=function(r){Ao||(ht=setTimeout(function(){pr=er=null,$l()},1),clearTimeout(Et),Et=0)},Pc=function(r){if(er&&er.tooltip&&!Ao)if(nr){const a=bn-r.pageX;r=or-r.pageY,Math.sqrt(a*a+r*r)>cs&&$l()}else pr!==er&&(clearTimeout(Et),bn=r.pageX,or=r.pageY,Et=setTimeout(Op,jp))},wd=function(){pr=er=null,$l()},$l=function(){nr&&(nr=!1,Ru&&(Ru.style.display="none")),Et&&(clearTimeout(Et),Et=0)},$d=function(){$l(),Ao=!0},Uh=function(){Ao=!1},Zr=function(){Ru&&er&&(typeof Jn=="function"?Jn(Ru,er):Mi())},Mi=function(){var r=ao(er);r=t.wrap$$module$build$src$core$utils$string(r,xt),r=r.split(`
`);for(let a=0;a<r.length;a++){const f=document.createElement("div");f.appendChild(document.createTextNode(r[a])),Ru.appendChild(f)}},gf=function(r){const a=document.documentElement.clientWidth,f=document.documentElement.clientHeight;let S=bn;S=r?S-(kr+Ru.offsetWidth):S+kr;let k=or+Pl;return k+Ru.offsetHeight>f+window.scrollY&&(k-=Ru.offsetHeight+2*Pl),r?S=Math.max(g0-window.scrollX,S):S+Ru.offsetWidth>a+window.scrollX-2*g0&&(S=a-Ru.offsetWidth-2*g0),{x:S,y:k}},Op=function(){if(!Ao&&(pr=er,Ru)){Ru.textContent="",Zr();var r=er.RTL;Ru.style.direction=r?"rtl":"ltr",Ru.style.display="block",nr=!0;var{x:a,y:f}=gf(r);Ru.style.left=a+"px",Ru.style.top=f+"px"}},Cl=function(r,a){for(const f in a)r[f]=a[f]!==null&&typeof a[f]=="object"?Cl(r[f]||Object.create(null),a[f]):a[f];return r},eu=function(r){return r.bubbleIsVisible!==void 0&&r.setBubbleVisible!==void 0},Vu=function(){return Uv},ju=function(r){Uv=r},_h=function(){return nh},sl=function(r){nh=r},Zo=function(r){r=`${r}`.toLowerCase().trim();var a=j1[r];if(a||(a=r.substring(0,2)==="0x"?"#"+r.substring(2):r,a=a[0]==="#"?a:"#"+a,/^#[0-9a-f]{6}$/.test(a)))return a;if(/^#[0-9a-f]{3}$/.test(a))return["#",a[1],a[1],a[2],a[2],a[3],a[3]].join("");var f=r.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return f&&(r=Number(f[1]),a=Number(f[2]),f=Number(f[3]),0<=r&&256>r&&0<=a&&256>a&&0<=f&&256>f)?Ml(r,a,f):null},Ml=function(r,a,f){return a=r<<16|a<<8|f,16>r?"#"+(16777216|a).toString(16).substr(1):"#"+a.toString(16)},Fc=function(r){return r=Zo(r),r?(r=parseInt(r.substr(1),16),[r>>16,r>>8&255,r&255]):[0,0,0]},Al=function(r,a,f){let S=0,k=0,V=0;if(a===0)V=k=S=f;else{const _e=Math.floor(r/60),ze=r/60-_e;r=f*(1-a);const jt=f*(1-a*ze);switch(a=f*(1-a*(1-ze)),_e){case 1:S=jt,k=f,V=r;break;case 2:S=r,k=f,V=a;break;case 3:S=r,k=jt,V=f;break;case 4:S=a,k=r,V=f;break;case 5:S=f,k=r,V=jt;break;case 6:case 0:S=f,k=a,V=r}}return Ml(Math.floor(S),Math.floor(k),Math.floor(V))},zc=function(r,a,f){return r=Zo(r),!r||(a=Zo(a),!a)?null:(r=Fc(r),a=Fc(a),Ml(Math.round(a[0]+f*(r[0]-a[0])),Math.round(a[1]+f*(r[1]-a[1])),Math.round(a[2]+f*(r[2]-a[2]))))},dc=function(r){return Al(r,Uv,255*nh)},Cd=function(r,a,f){const S=[];var k=r.split("");k.push("");var V=0;r=[];let _e=null;for(let Gn=0;Gn<k.length;Gn++){var ze=k[Gn];if(V===0)if(ze==="%")(V=r.join(""))&&S.push(V),r.length=0,V=1;else if(f&&ze===`
`){const _l=r.join("");_l&&S.push(_l),r.length=0,S.push(ze)}else r.push(ze);else if(V===1)ze==="%"?(r.push(ze),V=0):a&&"0"<=ze&&"9">=ze?(V=2,_e=ze,(ze=r.join(""))&&S.push(ze),r.length=0):ze==="{"?V=3:(r.push("%",ze),V=0);else if(V===2)if("0"<=ze&&"9">=ze)_e+=ze;else{var jt=void 0;S.push(parseInt((jt=_e)!=null?jt:"",10)),Gn--,V=0}else V===3&&(ze===""?(r.splice(0,0,"%{"),Gn--,V=0):ze!=="}"?r.push(ze):(V=r.join(""),/[A-Z]\w*/i.test(V)?(ze=V.toUpperCase(),(ze=ze.startsWith("BKY_")?ze.substring(4):null)&&ze in t.Msg$$module$build$src$core$msg?(V=t.Msg$$module$build$src$core$msg[ze],typeof V=="string"?Array.prototype.push.apply(S,Cd(V,a,f)):a?S.push(`${V}`):S.push(V)):S.push("%{"+V+"}")):S.push("%{"+V+"}"),V=r.length=0))}for((a=r.join(""))&&S.push(a),jt=[],r.length=0,k=0;k<S.length;k++)typeof S[k]!="string"||f&&S[k]===`
`?((a=r.join(""))&&jt.push(a),r.length=0,jt.push(S[k])):r.push(S[k]);return(a=r.join(""))&&jt.push(a),r.length=0,jt},za=function(r){return Cd(r,!0,!0)},Gr=function(r){return typeof r!="string"?r:(r=Cd(r,!1,!1),r.length?String(r[0]):"")},ol=function(r){let a=!0;const f=t.Msg$$module$build$src$core$msg,S=r.match(/%{BKY_[A-Z]\w*}/gi);if(S)for(let k=0;k<S.length;k++){const V=S[k].toUpperCase();f[V.slice(6,-1)]===void 0&&(console.warn("No message string for "+S[k]+" in "+r),a=!1)}return a},Ji=function(r){const a=typeof r=="string"?Gr(r):r;var f=Number(a);if(!isNaN(f)&&0<=f&&360>=f)return{hue:f,hex:Al(f,Vu(),255*_h())};if(f=Zo(a))return{hue:null,hex:f};throw f='Invalid colour: "'+a+'"',r!==a&&(f+=' (from "'+r+'")'),Error(f)},da=function(r){return r.getProcedureModel!==void 0&&r.doProcedureUpdate!==void 0&&r.isProcedureDef!==void 0},Y=function(r){return r.startPublishing!==void 0&&r.stopPublishing!==void 0},Es=function(r,a){i(Pt.FIELD,r,a)},pa=function(r){o(Pt.FIELD,r)},t.fromJson$$module$build$src$core$field_registry=function(r){return Ec.fromJsonInternal(r)},$r=function(r){const a=p(Pt.FIELD,r.type);if(a){if(typeof a.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return a.fromJson(r)}return console.warn("Blockly could not create a field of type "+r.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},pn=function(r){let a=!1;const f=r.map(([_e,ze])=>typeof _e=="string"?[Gr(_e),ze]:(a=!0,[_e.alt!==null?Object.assign({},_e,{alt:Gr(_e.alt)}):Object.assign({},_e),ze]));if(a||2>r.length)return{options:f};var S=f.map(([_e])=>_e),k=gh(S);r=cc(S,k);const V=qo(S,k);return!r&&!V||k<=r+V?{options:f}:(k=r?S[0].substring(0,r-1):void 0,S=V?S[0].substr(1-V):void 0,{options:Lp(f,r,V),prefix:k,suffix:S})},Lp=function(r,a,f){return r.map(([S,k])=>[S.substring(a,S.length-f),k])},al=function(r){if(!Array.isArray(r))throw TypeError("FieldDropdown options must be an array.");if(!r.length)throw TypeError("FieldDropdown options must not be an empty array.");let a=!1;for(let f=0;f<r.length;f++){const S=r[f];Array.isArray(S)?typeof S[1]!="string"?(a=!0,console.error("Invalid option["+f+"]: Each FieldDropdown option id must be a string. Found "+S[1]+" in: ",S)):S[0]&&typeof S[0]!="string"&&typeof S[0].src!="string"&&(a=!0,console.error("Invalid option["+f+"]: Each FieldDropdown option must have a string label or image description. Found"+S[0]+" in: ",S)):(a=!0,console.error("Invalid option["+f+"]: Each FieldDropdown option must be an array. Found: ",S))}if(a)throw TypeError("Found invalid FieldDropdown options.")},t.register$$module$build$src$core$extensions=function(r,a){if(typeof r!="string"||r.trim()==="")throw Error('Error: Invalid extension name "'+r+'"');if(v0[r])throw Error('Error: Extension "'+r+'" is already registered.');if(typeof a!="function")throw Error('Error: Extension "'+r+'" must be a function');v0[r]=a},t.registerMixin$$module$build$src$core$extensions=function(r,a){if(!a||typeof a!="object")throw Error('Error: Mixin "'+r+'" must be a object');t.register$$module$build$src$core$extensions(r,function(){this.mixin(a)})},t.registerMutator$$module$build$src$core$extensions=function(r,a,f,S){const k='Error when registering mutator "'+r+'": ';Hc(k,a);const V=ma(a,k);if(f&&typeof f!="function")throw Error(k+'Extension "'+r+'" is not a function');t.register$$module$build$src$core$extensions(r,function(){V&&this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(S||[],this)),this.mixin(a),f&&f.apply(this)})},Ai=function(r){ui(r)?delete v0[r]:console.warn('No extension mapping for name "'+r+'" found to unregister')},ui=function(r){return!!v0[r]},qi=function(r,a,f){const S=v0[r];if(typeof S!="function")throw Error('Error: Extension "'+r+'" not found.');let k;if(f?rs(r,a):k=ea(a),S.apply(a),f)Hc('Error after applying mutator "'+r+'": ',a);else if(!Md(k,a))throw Error('Error when applying extension "'+r+'": mutation properties changed when applying a non-mutator extension.')},rs=function(r,a){if(ea(a).length)throw Error('Error: tried to apply mutation "'+r+'" to a block that already has mutator functions.  Block id: '+a.id)},Uc=function(r,a){return is(r.mutationToDom,r.domToMutation,a+" mutationToDom/domToMutation")},fa=function(r,a){return is(r.saveExtraState,r.loadExtraState,a+" saveExtraState/loadExtraState")},ma=function(r,a){return is(r.compose,r.decompose,a+" compose/decompose")},is=function(r,a,f){if(r&&a){if(typeof r!="function"||typeof a!="function")throw Error(f+" must be a function");return!0}if(!r&&!a)return!1;throw Error(f+"Must have both or neither functions")},Hc=function(r,a){const f=Uc(a,r),S=fa(a,r);if(!f&&!S)throw Error(r+"Mutations must contain either XML hooks, or JSON hooks, or both");ma(a,r)},ea=function(r){const a=[];return r.domToMutation!==void 0&&a.push(r.domToMutation),r.mutationToDom!==void 0&&a.push(r.mutationToDom),r.saveExtraState!==void 0&&a.push(r.saveExtraState),r.loadExtraState!==void 0&&a.push(r.loadExtraState),r.compose!==void 0&&a.push(r.compose),r.decompose!==void 0&&a.push(r.decompose),a},Md=function(r,a){if(a=ea(a),a.length!==r.length)return!1;for(let f=0;f<a.length;f++)if(r[f]!==a[f])return!1;return!0},Ad=function(r){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")r();else{const a=setInterval(function(){document.readyState==="complete"&&(clearInterval(a),r())},10)}},t.buildTooltipForDropdown$$module$build$src$core$extensions=function(r,a){const f=[];return function(){f.indexOf(this.type)===-1&&(Hh(this,r,a),f.push(this.type)),this.setTooltip((function(){const S=String(this.getFieldValue(r));return Gr(a[S])}).bind(this))}},Hh=function(r,a,f){var S=r.getField(a);if(S instanceof xh&&!S.isOptionListDynamic()){S=S.getOptions();for(const[,k]of S)f[k]===void 0&&console.warn(`No tooltip mapping for value ${k} of field ${a} of block type ${r.type}.`)}},t.buildTooltipWithFieldText$$module$build$src$core$extensions=function(r,a){return function(){this.setTooltip((function(){const f=this.getField(a);return Gr(r).replace("%1",f?f.getText():"")}).bind(this))}},Us=function(){const r=this.tooltip;this.setTooltip((function(){const a=this.getParent();return a&&a.getInputsInline()&&a.tooltip||r}).bind(this))},jn=function(r,a){return" "+r+","+a+" "},Hs=function(r,a){return" "+r+a.join("")},Ys=function(r,a){return" M "+r+","+a+" "},Fi=function(r,a){return" m "+r+","+a+" "},tu=function(r,a){return" l "+r+","+a+" "},Fo=function(r){return" l"+r.join("")},En=function(r,a){return" "+r+" "+a+" "},pi=function(r,a,f,S){return r+" "+f+" "+f+" "+a+S},fi=function(r,a){i(Pt.ICON,r.toString(),a)},Dp=function(r){o(Pt.ICON,r)},yh=function(r){const a=r.getProcedureMap().getProcedures().filter(S=>!S.getReturnTypes()).map(S=>[S.getName(),S.getParameters().map(k=>k.getName()),!1]);r.getBlocksByType("procedures_defnoreturn",!1).forEach(S=>{!da(S)&&Li(S)&&a.push(S.getProcedureDef())});const f=r.getProcedureMap().getProcedures().filter(S=>!!S.getReturnTypes()).map(S=>[S.getName(),S.getParameters().map(k=>k.getName()),!0]);return r.getBlocksByType("procedures_defreturn",!1).forEach(S=>{!da(S)&&Li(S)&&f.push(S.getProcedureDef())}),a.sort(lo),f.sort(lo),[a,f]},lo=function(r,a){return r[0].localeCompare(a[0],void 0,{sensitivity:"base"})},t.findLegalName$$module$build$src$core$procedures=function(r,a){if(a.isInFlyout)return r;for(r=r||t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!ga(r,a.workspace,a);){const f=r.match(/^(.*?)(\d+)$/);r=f?f[1]+(parseInt(f[2])+1):r+"2"}return r},ga=function(r,a,f){return!wn(r,a,f)},wn=function(r,a,f){for(const S of a.getAllBlocks(!1))if(S!==f&&Li(S)&&t.Names$$module$build$src$core$names.equals(S.getProcedureDef()[0],r))return!0;f=f&&da(f)?f==null?void 0:f.getProcedureModel():void 0;for(const S of a.getProcedureMap().getProcedures())if(S!==f&&t.Names$$module$build$src$core$names.equals(S.getName(),r))return!0;return!1},t.rename$$module$build$src$core$procedures=function(r){var a=this.getSourceBlock();if(!a)throw new Io;r=r.trim();const f=t.findLegalName$$module$build$src$core$procedures(r,a);da(a)&&!a.isInsertionMarker()&&a.getProcedureModel().setName(f);const S=this.getValue();if(S!==r&&S!==f)for(r=a.workspace.getAllBlocks(!1),a=0;a<r.length;a++){const k=r[a];k.renameProcedure&&k.renameProcedure(S,f)}return f},_n=function(r){function a(V,_e){for(let jt=0;jt<V.length;jt++){var ze=V[jt][0];const Gn=V[jt][1],_l=t.createElement$$module$build$src$core$utils$xml("block");_l.setAttribute("type",_e),_l.setAttribute("gap","16");const Ka=t.createElement$$module$build$src$core$utils$xml("mutation");for(Ka.setAttribute("name",ze),_l.appendChild(Ka),ze=0;ze<Gn.length;ze++){const Of=t.createElement$$module$build$src$core$utils$xml("arg");Of.setAttribute("name",Gn[ze]),Ka.appendChild(Of)}f.push(_l)}}const f=[];if(Wr.procedures_defnoreturn){var S=t.createElement$$module$build$src$core$utils$xml("block");S.setAttribute("type","procedures_defnoreturn"),S.setAttribute("gap","16");var k=t.createElement$$module$build$src$core$utils$xml("field");k.setAttribute("name","NAME"),k.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),S.appendChild(k),f.push(S)}return Wr.procedures_defreturn&&(S=t.createElement$$module$build$src$core$utils$xml("block"),S.setAttribute("type","procedures_defreturn"),S.setAttribute("gap","16"),k=t.createElement$$module$build$src$core$utils$xml("field"),k.setAttribute("name","NAME"),k.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),S.appendChild(k),f.push(S)),Wr.procedures_ifreturn&&(S=t.createElement$$module$build$src$core$utils$xml("block"),S.setAttribute("type","procedures_ifreturn"),S.setAttribute("gap","16"),f.push(S)),f.length&&f[f.length-1].setAttribute("gap","24"),r=yh(r),a(r[0],"procedures_callnoreturn"),a(r[1],"procedures_callreturn"),f},ll=function(r){var a=[],f=r.getBlocksByType("procedures_mutatorarg",!1);for(let V=0,_e;_e=f[V];V++)a.push(_e.getFieldValue("NAME"));f=t.createElement$$module$build$src$core$utils$xml("xml");const S=t.createElement$$module$build$src$core$utils$xml("block");S.setAttribute("type","procedures_mutatorarg");const k=t.createElement$$module$build$src$core$utils$xml("field");k.setAttribute("name","NAME"),a=Di(t.DEFAULT_ARG$$module$build$src$core$procedures,a),a=t.createTextNode$$module$build$src$core$utils$xml(a),k.appendChild(a),S.appendChild(k),f.appendChild(S),r.updateToolbox(f)},pc=function(r){if(r.type===go&&r.bubbleType==="mutator"&&r.isOpen&&r.blockId){r=b(r.workspaceId).getBlockById(r.blockId);var a=r.type;(a==="procedures_defnoreturn"||a==="procedures_defreturn")&&(r=r.getIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),ll(r),r.addChangeListener(_f))}},_f=function(r){(r.type===t.CREATE$$module$build$src$core$events$utils||r.type===t.DELETE$$module$build$src$core$events$utils||r.type===t.CHANGE$$module$build$src$core$events$utils||r.type===Sh)&&(r=b(r.workspaceId),ll(r))},nu=function(r,a){return a.getAllBlocks(!1).filter(f=>wo(f,r)||Ir(f)&&t.Names$$module$build$src$core$names.equals(f.getProcedureCall(),r))},wo=function(r,a){return da(r)&&!r.isProcedureDef()&&r.getProcedureModel()&&t.Names$$module$build$src$core$names.equals(r.getProcedureModel().getName(),a)},t.mutateCallers$$module$build$src$core$procedures=function(r){const a=le();var f=r.getProcedureDef()[0];const S=r.mutationToDom(!0);r=nu(f,r.workspace);for(let V=0,_e;_e=r[V];V++){f=(f=_e.mutationToDom())&&On(f),_e.domToMutation&&_e.domToMutation(S);var k=_e.mutationToDom();k=k&&On(k),f!==k&&(he(!1),ce(new(Re(t.CHANGE$$module$build$src$core$events$utils))(_e,"mutation",null,f,k)),he(a))}},t.getDefinition$$module$build$src$core$procedures=function(r,a){for(const f of a.getAllBlocks(!1))if(da(f)&&f.isProcedureDef()&&t.Names$$module$build$src$core$names.equals(f.getProcedureModel().getName(),r)||Li(f)&&t.Names$$module$build$src$core$names.equals(f.getProcedureDef()[0],r))return f;return null},_s=function(r){return r.isDynamic},ul=function(r){return r.pathDown!==void 0&&r.pathUp!==void 0},ss=function(r){return r.pathLeft!==void 0&&r.pathRight!==void 0},cl=function(r){let a=r.outputConnection;return(!a||r.previousConnection&&r.previousConnection.isConnected())&&(a=r.previousConnection),a},zo=function(r,a){if(!r||!a)throw Error("Cannot connect null connections.");r.targetConnection=a,a.targetConnection=r},Gh=function(r,a){let f=null;a=a.outputConnection;const S=a==null?void 0:a.getConnectionChecker();for(let k=0,V;V=r.inputList[k];k++){const _e=V.connection;let ze;if(_e&&((ze=S)!=null&&ze.canConnect(a,_e,!1))){if(f)return null;f=_e}}return f},Ua=function(r,a){let f;for(;f=Gh(r,a);)if(r=f.targetBlock(),!r||r.isShadow())return f;return null},Ii=function(r,a){i(Pt.RENDERER,r,a)},Id=function(r){o(Pt.RENDERER,r)},Gc=function(r,a,f){return r=new(d(Pt.RENDERER,r))(r),r.init(a,f),r},Wh=function(r){Ts(r.getTargetWorkspace(),void 0,"String")},Uo=function(r){Ts(r.getTargetWorkspace(),void 0,"Number")},$o=function(r){Ts(r.getTargetWorkspace(),void 0,"Colour")},op=function(r){let a=[],f=document.createElement("button");return f.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),f.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),a.push(f),f=document.createElement("button"),f.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),f.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),a.push(f),f=document.createElement("button"),f.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),f.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),a.push(f),r.registerButtonCallback("CREATE_VARIABLE_STRING",Wh),r.registerButtonCallback("CREATE_VARIABLE_NUMBER",Uo),r.registerButtonCallback("CREATE_VARIABLE_COLOUR",$o),r=xu(r),a=a.concat(r)},xu=function(r){r=r.getAllVariables();const a=[];if(0<r.length){if(Wr.variables_set_dynamic){var f=r[r.length-1];const S=t.createElement$$module$build$src$core$utils$xml("block");S.setAttribute("type","variables_set_dynamic"),S.setAttribute("gap","24"),S.appendChild(js(f)),a.push(S)}if(Wr.variables_get_dynamic){r.sort(hp.compareByName);for(let S=0,k;k=r[S];S++)f=t.createElement$$module$build$src$core$utils$xml("block"),f.setAttribute("type","variables_get_dynamic"),f.setAttribute("gap","8"),f.appendChild(js(k)),a.push(f)}}return a},Il=function(r){return r.toCopyData!==void 0},dd=function(){Yi.registry.register({name:Rf.ESCAPE,preconditionFn(r){return!r.options.readOnly},callback(r){return r.hideChaff(),!0},keyCodes:[zr.ESC]})},fc=function(){Yi.registry.register({name:Rf.DELETE,preconditionFn(r){const a=O();return!r.options.readOnly&&a!=null&&a.isDeletable()},callback(r,a){return a.preventDefault(),lm.inProgress()?!1:(O().checkAndDelete(),!0)},keyCodes:[zr.DELETE,zr.BACKSPACE]})},Yr=function(){const r=Yi.registry.createSerializedKey(zr.C,[zr.CTRL]),a=Yi.registry.createSerializedKey(zr.C,[zr.ALT]),f=Yi.registry.createSerializedKey(zr.C,[zr.META]);Yi.registry.register({name:Rf.COPY,preconditionFn(S){const k=O();return!S.options.readOnly&&!lm.inProgress()&&k!=null&&k.isDeletable()&&k.isMovable()&&Il(k)},callback(S,k){return k.preventDefault(),S.hideChaff(),k=O(),!k||!Il(k)?!1:($_=k.toCopyData(),Cy=S,!!$_)},keyCodes:[r,a,f]})},ru=function(){const r=Yi.registry.createSerializedKey(zr.X,[zr.CTRL]),a=Yi.registry.createSerializedKey(zr.X,[zr.ALT]),f=Yi.registry.createSerializedKey(zr.X,[zr.META]);Yi.registry.register({name:Rf.CUT,preconditionFn(S){const k=O();return!S.options.readOnly&&!lm.inProgress()&&k!=null&&k instanceof If&&k.isDeletable()&&k.isMovable()&&!k.workspace.isFlyout},callback(S){const k=O();return!k||!Il(k)?!1:($_=k.toCopyData(),Cy=S,k.checkAndDelete(),!0)},keyCodes:[r,a,f]})},Xu=function(){const r=Yi.registry.createSerializedKey(zr.V,[zr.CTRL]),a=Yi.registry.createSerializedKey(zr.V,[zr.ALT]),f=Yi.registry.createSerializedKey(zr.V,[zr.META]);Yi.registry.register({name:Rf.PASTE,preconditionFn(S){return!S.options.readOnly&&!lm.inProgress()},callback(){return $_&&Cy?!!Rs($_,Cy):!1},keyCodes:[r,a,f]})},os=function(){const r=Yi.registry.createSerializedKey(zr.Z,[zr.CTRL]),a=Yi.registry.createSerializedKey(zr.Z,[zr.ALT]),f=Yi.registry.createSerializedKey(zr.Z,[zr.META]);Yi.registry.register({name:Rf.UNDO,preconditionFn(S){return!S.options.readOnly&&!lm.inProgress()},callback(S){return S.hideChaff(),S.undo(!1),!0},keyCodes:[r,a,f]})},Ha=function(){const r=Yi.registry.createSerializedKey(zr.Z,[zr.SHIFT,zr.CTRL]),a=Yi.registry.createSerializedKey(zr.Z,[zr.SHIFT,zr.ALT]),f=Yi.registry.createSerializedKey(zr.Z,[zr.SHIFT,zr.META]),S=Yi.registry.createSerializedKey(zr.Y,[zr.CTRL]);Yi.registry.register({name:Rf.REDO,preconditionFn(k){return!lm.inProgress()&&!k.options.readOnly},callback(k){return k.hideChaff(),k.undo(!0),!0},keyCodes:[r,a,f,S]})},xs=function(){dd(),fc(),Yr(),ru(),Xu(),os(),Ha()},ws=function(r){const a={id:r.getId(),name:r.getName(),returnTypes:r.getReturnTypes()};return r.getParameters().length&&(a.parameters=r.getParameters().map(f=>Wc(f))),a},Wc=function(r){const a={id:r.getId(),name:r.getName()};return r.getTypes().length&&(a.types=r.getTypes()),a},mi=function(r,a,f,S){if(r=new r(S,f.name,f.id).setReturnTypes(f.returnTypes),!f.parameters)return r;for(const[k,V]of f.parameters.entries())r.insertParameter(Ga(a,V,S),k);return r},Ga=function(r,a,f){return r=new r(f,a.name,a.id),a.types&&r.setTypes(a.types),r},mc=function(r){const a=Object.create(null),f=_(Pt.SERIALIZER,!0);for(const S in f){let k;const V=(k=f[S])==null?void 0:k.save(r);V&&(a[S]=V)}return a},ap=function(r,a,{recordUndo:f=!1}={}){var S=_(Pt.SERIALIZER,!0);if(S){S=Object.entries(S).sort((V,_e)=>_e[1].priority-V[1].priority);var k=le();he(f),(f=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),ne(),a instanceof Yp&&a.setResizesEnabled(!1);for(const[,V]of S.reverse()){let _e;(_e=V)==null||_e.clear(a)}for(let[V,_e]of S.reverse())if(r[V]){let ze;(ze=_e)==null||ze.load(r[V],a)}a instanceof Yp&&a.setResizesEnabled(!0),fe(),ce(new(Re(va))(a)),t.setGroup$$module$build$src$core$events$utils(f),he(k)}},vh=function(r,a,f){const S=f.getBoundingRectangle(),k=S.right-S.left,V=Br(a.top,S.top,a.top+a.height-(S.bottom-S.top))-S.top;let _e=a.left;return a=a.left+a.width-k,r.RTL?_e=Math.min(a,_e):a=Math.max(_e,a),(r=Br(_e,S.left,a)-S.left)||V?(f.moveBy(r,V,["inbounds"]),!0):!1},ta=function(r){return a=>{var f=r.getMetricsManager();if(f.hasFixedEdges()&&!r.isDragging()){var S;if(Xh.indexOf((S=a.type)!=null?S:"")!==-1){S=f.getScrollMetrics(!0);const k=Vi(r,a);k&&(f=t.getGroup$$module$build$src$core$events$utils()||!1,t.setGroup$$module$build$src$core$events$utils(a.group),vh(r,S,k)&&!a.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),t.setGroup$$module$build$src$core$events$utils(f))}else a.type===ti&&a.scale&&a.oldScale&&a.scale>a.oldScale&&Dn(r)}}},Vi=function(r,a){let f=null;switch(a.type){case t.CREATE$$module$build$src$core$events$utils:case t.MOVE$$module$build$src$core$events$utils:(f=r.getBlockById(a.blockId))&&(f=f.getRootBlock());break;case ls:case ya:f=r.getCommentById(a.commentId)}return f},Dn=function(r){var a=r.getMetricsManager();if(a.hasFixedEdges()&&!r.isDragging()){a=a.getScrollMetrics(!0);var f=r.getTopBoundedElements();for(let S=0,k;k=f[S];S++)vh(r,a,k)}},Zn=function(r,a){const f=[];for(const S of r.getIcons())(!eu(S)||S.bubbleIsVisible())&&(f.push({location:a,icon:S}),S.onLocationChange(a));for(const S of r.getChildren(!1))f.push(...Zn(S,mn.sum(a,S.relativeCoords)));return f},Or=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.UNDO},preconditionFn(r){return 0<r.workspace.getUndoStack().length?"enabled":"disabled"},callback(r){r.workspace.undo(!1)},scopeType:ki.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},ei=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.REDO},preconditionFn(r){return 0<r.workspace.getRedoStack().length?"enabled":"disabled"},callback(r){r.workspace.undo(!0)},scopeType:ki.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Jr=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(r){return r.workspace.isMovable()?1<r.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(r){r.workspace.cleanUp()},scopeType:ki.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Co=function(r,a){function f(V){k--,V.setCollapsed(r),k===0&&t.setGroup$$module$build$src$core$events$utils(!1)}let S=0,k=0;t.setGroup$$module$build$src$core$events$utils(!0);for(let V=0;V<a.length;V++){let _e=a[V];for(;_e;)k++,setTimeout(f.bind(null,_e),S),_e=_e.getNextBlock(),S+=10}},as=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(r){if(r.workspace.options.collapse){r=r.workspace.getTopBlocks(!1);for(let a=0;a<r.length;a++){let f=r[a];for(;f;){if(!f.isCollapsed())return"enabled";f=f.getNextBlock()}}return"disabled"}return"hidden"},callback(r){Co(!0,r.workspace.getTopBlocks(!0))},scopeType:ki.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Qi=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(r){if(r.workspace.options.collapse){r=r.workspace.getTopBlocks(!1);for(let a=0;a<r.length;a++){let f=r[a];for(;f;){if(f.isCollapsed())return"enabled";f=f.getNextBlock()}}return"disabled"}return"hidden"},callback(r){Co(!1,r.workspace.getTopBlocks(!0))},scopeType:ki.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},iu=function(r,a){if(r.isDeletable())Array.prototype.push.apply(a,r.getDescendants(!1));else{r=r.getChildren(!1);for(let f=0;f<r.length;f++)iu(r[f],a)}},Yu=function(r){const a=[];r=r.getTopBlocks(!0);for(let f=0;f<r.length;f++)iu(r[f],a);return a},gc=function(r,a){a?t.setGroup$$module$build$src$core$events$utils(a):(t.setGroup$$module$build$src$core$events$utils(!0),a=t.getGroup$$module$build$src$core$events$utils());const f=r.shift();f&&(f.isDeadOrDying()?gc(r,a):(f.dispose(!1,!0),setTimeout(gc,10,r,a))),t.setGroup$$module$build$src$core$events$utils(!1)},Ku=function(){ki.registry.register({displayText(r){return r.workspace?(r=Yu(r.workspace).length,r===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${r}`)):""},preconditionFn(r){return r.workspace&&0<Yu(r.workspace).length?"enabled":"disabled"},callback(r){if(r.workspace){r.workspace.cancelCurrentGesture();var a=Yu(r.workspace);2>a.length?gc(a):en(t.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(a.length)),function(f){f&&gc(a)})}},scopeType:ki.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Ks=function(){Or(),ei(),Jr(),as(),Qi(),Ku()},uo=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.isDeletable()&&r.isMovable()?r.isDuplicatable()?"enabled":"disabled":"hidden"},callback(r){if(r.block){var a=r.block.toCopyData();a&&Rs(a,r.block.workspace)}},scopeType:ki.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},pd=function(){ki.registry.register({displayText(r){return r.block.hasIcon(qh.TYPE)?t.Msg$$module$build$src$core$msg.REMOVE_COMMENT:t.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.workspace.options.comments&&!r.isCollapsed()&&r.isEditable()?"enabled":"hidden"},callback(r){r=r.block,r.hasIcon(qh.TYPE)?r.setCommentText(null):r.setCommentText("")},scopeType:ki.ScopeType.BLOCK,id:"blockComment",weight:2})},_a=function(){ki.registry.register({displayText(r){return r.block.getInputsInline()?t.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:t.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(r){if(r=r.block,!r.isInFlyout&&r.isMovable()&&!r.isCollapsed()){for(let a=1;a<r.inputList.length;a++)if(!(r.inputList[a-1]instanceof Ay||r.inputList[a]instanceof Ay))return"enabled"}return"hidden"},callback(r){r.block.setInputsInline(!r.block.getInputsInline())},scopeType:ki.ScopeType.BLOCK,id:"blockInline",weight:3})},wu=function(){ki.registry.register({displayText(r){return r.block.isCollapsed()?t.Msg$$module$build$src$core$msg.EXPAND_BLOCK:t.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.isMovable()&&r.workspace.options.collapse?"enabled":"hidden"},callback(r){r.block.setCollapsed(!r.block.isCollapsed())},scopeType:ki.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},$u=function(){ki.registry.register({displayText(r){return r.block.isEnabled()?t.Msg$$module$build$src$core$msg.DISABLE_BLOCK:t.Msg$$module$build$src$core$msg.ENABLE_BLOCK},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.workspace.options.disable&&r.isEditable()?r.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(r){r=r.block;const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),r.setEnabled(!r.isEnabled()),t.setGroup$$module$build$src$core$events$utils(a)},scopeType:ki.ScopeType.BLOCK,id:"blockDisable",weight:5})},co=function(){ki.registry.register({displayText(r){var a=r.block;return r=a.getDescendants(!1).length,(a=a.getNextBlock())&&(r-=a.getDescendants(!1).length),r===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${r}`)},preconditionFn(r){return!r.block.isInFlyout&&r.block.isDeletable()?"enabled":"hidden"},callback(r){r.block&&r.block.checkAndDelete()},scopeType:ki.ScopeType.BLOCK,id:"blockDelete",weight:6})},ho=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.HELP},preconditionFn(r){return r=r.block,(typeof r.helpUrl=="function"?r.helpUrl():r.helpUrl)?"enabled":"hidden"},callback(r){r.block.showHelp()},scopeType:ki.ScopeType.BLOCK,id:"blockHelp",weight:7})},Rl=function(){uo(),pd(),_a(),wu(),$u(),co(),ho()},Ho=function(){Ks(),Rl()},Ju=function(r,a){var f=null;f=typeof r=="string"?document.getElementById(r)||document.querySelector(r):r;let S;if(!document.contains(f)&&document!==((S=f)==null?void 0:S.ownerDocument))throw Error("Error: container is not in current document");r=new zi(a||{}),a=document.createElement("div"),a.className="injectionDiv",a.tabIndex=0,Sr(a,vo.LABEL,t.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),f.appendChild(a),f=qu(a,r);const k=bh(a,f,r);return Th(k),L(k),G(k),a.addEventListener("focusin",function(){L(k)}),k},qu=function(r,a){r.setAttribute("dir","LTR"),mt(a.hasCss,a.pathToMedia),r=ie(We.SVG,{xmlns:Um,"xmlns:html":bc,"xmlns:xlink":qs,version:"1.1",class:"blocklySvg",tabindex:"0"},r);const f=ie(We.DEFS,{},r),S=String(Math.random()).substring(2);return a.gridPattern=zv.createDom(S,a.gridOptions,f),r},bh=function(r,a,f){f.parentWorkspace=null,f=new Yp(f);const S=f.options;f.scale=S.zoomOptions.startScale,a.appendChild(f.createDom("blocklyMainBackground",r));var k=f.getRenderer().getClassName();return k&&we(r,k),(k=f.getTheme().getClassName())&&we(r,k),!S.hasCategories&&S.languageTree&&(r=f.addFlyout(We.SVG),Ke(r,a)),S.hasTrashcan&&f.addTrashcan(),S.zoomOptions&&S.zoomOptions.controls&&f.addZoomControls(),f.getThemeManager().subscribe(a,"workspaceBackgroundColour","background-color"),f.translate(0,0),f.addChangeListener(ta(f)),G(f),Po(),xl(),zh(),f},Th=function(r){const a=r.options;var f=r.getParentSvg();if(Ae(f.parentNode,"contextmenu",null,function(S){tt(S)||S.preventDefault()}),f=Ae(window,"resize",null,function(){$l(),r.hideComponents(!0),gs(),ip(),G(r),Dn(r)}),r.setResizeHandlerWrapper(f),ys(),a.languageTree){f=r.getToolbox();const S=r.getFlyout(!0);f?f.init():S&&(S.init(r),S.show(a.languageTree),typeof S.scrollToStart=="function"&&S.scrollToStart())}a.hasTrashcan&&r.trashcan.init(),a.zoomOptions&&a.zoomOptions.controls&&r.zoomControls_.init(),a.moveOptions&&a.moveOptions.scrollbars?(r.scrollbar=new ab(r,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.horizontal,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),r.scrollbar.resize()):r.setMetrics({x:.5,y:.5}),a.hasSounds&&ks(a.pathToMedia,r)},Rr=function(r){const a=I();a&&!(tt(r)||a.rendered&&!a.isVisible())&&Yi.registry.onKeyDown(a,r)},ys=function(){Zs||(Ae(document,"scroll",null,function(){const r=E();for(let a=0,f;f=r[a];a++)f instanceof Yp&&f.updateInverseScreenCTM()}),Ae(document,"keydown",null,Rr),je(document,"touchend",null,it),je(document,"touchcancel",null,it),Bn&&Ae(window,"orientationchange",document,function(){G(I())})),Zs=!0},ks=function(r,a){function f(){for(;k.length;){const V=k.pop();V&&nt(V)}S.preload()}const S=a.getAudioManager();S.load([r+"click.mp3",r+"click.wav",r+"click.ogg"],"click"),S.load([r+"disconnect.wav",r+"disconnect.mp3",r+"disconnect.ogg"],"disconnect"),S.load([r+"delete.mp3",r+"delete.ogg",r+"delete.wav"],"delete");const k=[];k.push(Ae(document,"pointermove",null,f,!0)),k.push(Ae(document,"touchstart",null,f,!0))},Wa=function(r){return r.getType!==void 0&&r.initView!==void 0&&r.dispose!==void 0&&r.getWeight!==void 0&&r.getSize!==void 0&&r.applyColour!==void 0&&r.hideForInsertionMarker!==void 0&&r.updateEditable!==void 0&&r.updateCollapsed!==void 0&&r.isShownWhenCollapsed!==void 0&&r.setOffsetInBlock!==void 0&&r.onLocationChange!==void 0&&r.onClick!==void 0},Gs=function(r){return r.paste!==void 0},hn=function(r){return r.isSelectable()},Vc=function(r){I().hideChaff(r)},Tn=Tn||{},Tn.scope={},Tn.ASSUME_ES5=!1,Tn.ASSUME_NO_NATIVE_MAP=!1,Tn.ASSUME_NO_NATIVE_SET=!1,Tn.SIMPLE_FROUND_POLYFILL=!1,Tn.ISOLATE_POLYFILLS=!1,Tn.FORCE_POLYFILL_PROMISE=!1,Tn.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,Tn.defineProperty=Tn.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(r,a,f){return r==Array.prototype||r==Object.prototype||(r[a]=f.value),r},Tn.getGlobal=function(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hl=="object"&&Hl];for(var a=0;a<r.length;++a){var f=r[a];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")},Tn.global=Tn.getGlobal(this),Tn.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",Tn.TRUST_ES6_POLYFILLS=!Tn.ISOLATE_POLYFILLS||Tn.IS_SYMBOL_NATIVE,Tn.polyfills={},Tn.propertyToPolyfillSymbol={},Tn.POLYFILL_PREFIX="$jscp$",Tn.polyfill=function(r,a,f,S){a&&(Tn.ISOLATE_POLYFILLS?Tn.polyfillIsolated(r,a,f,S):Tn.polyfillUnisolated(r,a,f,S))},Tn.polyfillUnisolated=function(r,a,f,S){for(f=Tn.global,r=r.split("."),S=0;S<r.length-1;S++){var k=r[S];if(!(k in f))return;f=f[k]}r=r[r.length-1],S=f[r],a=a(S),a!=S&&a!=null&&Tn.defineProperty(f,r,{configurable:!0,writable:!0,value:a})},Tn.polyfillIsolated=function(r,a,f,S){var k=r.split(".");r=k.length===1,S=k[0],S=!r&&S in Tn.polyfills?Tn.polyfills:Tn.global;for(var V=0;V<k.length-1;V++){var _e=k[V];if(!(_e in S))return;S=S[_e]}k=k[k.length-1],f=Tn.IS_SYMBOL_NATIVE&&f==="es6"?S[k]:null,a=a(f),a!=null&&(r?Tn.defineProperty(Tn.polyfills,k,{configurable:!0,writable:!0,value:a}):a!==f&&(Tn.propertyToPolyfillSymbol[k]===void 0&&(f=1e9*Math.random()>>>0,Tn.propertyToPolyfillSymbol[k]=Tn.IS_SYMBOL_NATIVE?Tn.global.Symbol(k):Tn.POLYFILL_PREFIX+f+"$"+k),Tn.defineProperty(S,Tn.propertyToPolyfillSymbol[k],{configurable:!0,writable:!0,value:a})))},Tn.polyfill("globalThis",function(r){return r||Tn.global},"es_2020","es3"),Tn.arrayIteratorImpl=function(r){var a=0;return function(){return a<r.length?{done:!1,value:r[a++]}:{done:!0}}},Tn.arrayIterator=function(r){return{next:Tn.arrayIteratorImpl(r)}},Tn.initSymbol=function(){},Tn.iteratorPrototype=function(r){return r={next:r},r[Symbol.iterator]=function(){return this},r},Tn.iteratorFromArray=function(r,a){r instanceof String&&(r+="");var f=0,S=!1,k={next:function(){if(!S&&f<r.length){var V=f++;return{value:a(V,r[V]),done:!1}}return S=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k},Tn.polyfill("Array.prototype.values",function(r){return r||function(){return Tn.iteratorFromArray(this,function(a,f){return f})}},"es8","es3"),Tn.polyfill("Array.prototype.flat",function(r){return r||function(a){a=a===void 0?1:a;var f=[];return Array.prototype.forEach.call(this,function(S){Array.isArray(S)&&0<a?(S=Array.prototype.flat.call(S,a-1),f.push.apply(f,S)):f.push(S)}),f}},"es9","es5"),Tn.owns=function(r,a){return Object.prototype.hasOwnProperty.call(r,a)},Tn.polyfill("Object.entries",function(r){return r||function(a){var f=[],S;for(S in a)Tn.owns(a,S)&&f.push([S,a[S]]);return f}},"es8","es3"),Tn.polyfill("Object.values",function(r){return r||function(a){var f=[],S;for(S in a)Tn.owns(a,S)&&f.push(a[S]);return f}},"es8","es3");var gi=Object.create(null),$s={typeMap:gi},su=Object.create(null),kl="default",Pt=class{constructor(r){this.name=r}toString(){return this.name}};Pt.CONNECTION_CHECKER=new Pt("connectionChecker"),Pt.CONNECTION_PREVIEWER=new Pt("connectionPreviewer"),Pt.CURSOR=new Pt("cursor"),Pt.EVENT=new Pt("event"),Pt.FIELD=new Pt("field"),Pt.INPUT=new Pt("input"),Pt.RENDERER=new Pt("renderer"),Pt.TOOLBOX=new Pt("toolbox"),Pt.THEME=new Pt("theme"),Pt.TOOLBOX_ITEM=new Pt("toolboxItem"),Pt.FLYOUTS_VERTICAL_TOOLBOX=new Pt("flyoutsVerticalToolbox"),Pt.FLYOUTS_HORIZONTAL_TOOLBOX=new Pt("flyoutsHorizontalToolbox"),Pt.METRICS_MANAGER=new Pt("metricsManager"),Pt.BLOCK_DRAGGER=new Pt("blockDragger"),Pt.SERIALIZER=new Pt("serializer"),Pt.ICON=new Pt("icon"),Pt.PASTER=new Pt("paster");var hl={DEFAULT:kl,TEST_ONLY:$s};hl.Type=Pt,hl.getAllItems=_,hl.getClass=d,hl.getClassFromOptions=v,hl.getObject=p,hl.hasItem=u,hl.register=i,hl.unregister=o;var Wr=Object.create(null),Qu=Object.create(null),Vh,jc=null,oi,ji=[],Xc={defineBlocksWithJsonArrayInternal:ae},po={TEST_ONLY:Xc};po.createBlockDefinitionsFromJsonArray=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,po.defineBlocks=t.defineBlocks$$module$build$src$core$common,po.defineBlocksWithJsonArray=Z,po.draggingConnections=ji,po.getAllWorkspaces=E,po.getBlockTypeCounts=j,po.getMainWorkspace=I,po.getParentContainer=B,po.getSelected=O,po.getWorkspaceById=b,po.registerWorkspace=C,po.setMainWorkspace=L,po.setParentContainer=z,po.setSelected=P,po.svgResize=G,po.unregisterWorkpace=M;var dl="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Yc={genUid:()=>{const r=dl.length,a=[];for(let f=0;20>f;f++)a[f]=dl.charAt(Math.random()*r);return a.join("")}},_c=0,Zu={TEST_ONLY:Yc};Zu.genUid=te,Zu.getNextUniqueId=J;var Mo,Js,na,Sh,fo,Cu,Kc,yc,Go,mo,ec,Ol,go,Ll,Va,ou,ti,ls,jh,fd,ya,va,Xh,vc,Np,w;Mo="",Js=!0,na=0,t.CREATE$$module$build$src$core$events$utils="create",t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils="delete",t.DELETE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils="change",t.CHANGE$$module$build$src$core$events$utils,Sh="block_field_intermediate_change",t.MOVE$$module$build$src$core$events$utils="move",t.MOVE$$module$build$src$core$events$utils,fo="var_create",Cu="var_delete",Kc="var_rename",yc="ui",Go="drag",mo="selected",ec="click",Ol="marker_move",go="bubble_open",Ll="trashcan_open",Va="toolbox_item_select",ou="theme_change",ti="viewport_change",ls="comment_create",jh="comment_delete",fd="comment_change",ya="comment_move",va="finished_loading",Xh=[t.CREATE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,ls,ya],vc=[],Np={FIRE_QUEUE:vc,fireNow:$e,fireInternal:be,setGroupInternal:pe},w={BLOCK_CHANGE:t.CHANGE$$module$build$src$core$events$utils,BLOCK_CREATE:t.CREATE$$module$build$src$core$events$utils,BLOCK_DELETE:t.DELETE$$module$build$src$core$events$utils,BLOCK_DRAG:Go,BLOCK_FIELD_INTERMEDIATE_CHANGE:Sh,BLOCK_MOVE:t.MOVE$$module$build$src$core$events$utils,BUBBLE_OPEN:go,BUMP_EVENTS:Xh,CHANGE:t.CHANGE$$module$build$src$core$events$utils,CLICK:ec,COMMENT_CHANGE:fd,COMMENT_CREATE:ls,COMMENT_DELETE:jh,COMMENT_MOVE:ya,CREATE:t.CREATE$$module$build$src$core$events$utils,DELETE:t.DELETE$$module$build$src$core$events$utils,FINISHED_LOADING:va,MARKER_MOVE:Ol,MOVE:t.MOVE$$module$build$src$core$events$utils,SELECTED:mo,TEST_ONLY:Np,THEME_CHANGE:ou,TOOLBOX_ITEM_SELECT:Va,TRASHCAN_OPEN:Ll,UI:yc,VAR_CREATE:fo,VAR_DELETE:Cu,VAR_RENAME:Kc,VIEWPORT_CHANGE:ti},w.clearPendingUndo=oe,w.disable=t.disable$$module$build$src$core$events$utils,w.disableOrphans=qe,w.enable=t.enable$$module$build$src$core$events$utils,w.filter=q,w.fire=ce,w.fromJson=Fe,w.get=Re,w.getDescendantIds=Se,w.getGroup=t.getGroup$$module$build$src$core$events$utils,w.getRecordUndo=le,w.isEnabled=se,w.setGroup=t.setGroup$$module$build$src$core$events$utils,w.setRecordUndo=he;var h=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=le()}toJson(){return{type:this.type,group:this.group}}static fromJson(r,a,f){return f.isBlank=!1,f.group=r.group||"",f.workspaceId=a.id,f}isNull(){return!1}run(r){}getEventWorkspace_(){let r;if(this.workspaceId&&(r=b(this.workspaceId)),!r)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return r}},g=class extends h{constructor(r){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof r>"u",this.workspaceId=r||""}},$=class extends g{constructor(r,a,f){a=r?r.workspace.id:a,a===null&&(a=void 0),super(a),this.type=ec,this.blockId=r?r.id:void 0,this.targetType=f}toJson(){const r=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return r.targetType=this.targetType,r.blockId=this.blockId,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new $),a.targetType=r.targetType,a.blockId=r.blockId,a}},A;(function(r){r.BLOCK="block",r.WORKSPACE="workspace",r.ZOOM_CONTROLS="zoom_controls"})(A||(A={})),i(Pt.EVENT,ec,$);var N=750,W="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),de=null,ke={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Qe=0,St={TOUCH_ENABLED:W,TOUCH_MAP:ke};St.checkTouchIdentifier=Ue,St.clearTouchIdentifier=st,St.getTouchIdentifierFromEvent=dt,St.longStart=Ne,St.longStop=it,St.shouldHandleEvent=pt;var Jt,ln,yn,vn,fn,Lr,bt,Ce,Le,rt;(function(r){function a(S){return f.indexOf(S.toUpperCase())!==-1}Jt=r;const f=Jt.toUpperCase();ln=a("JavaFX"),yn=a("WebKit"),vn=a("Gecko")&&!yn,fn=a("Android"),r=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Lr=a("iPad")||a("Macintosh")&&0<r,bt=a("iPhone")&&!Lr,Ce=a("Macintosh"),Le=Lr||fn&&!a("Mobile")||a("Silk"),rt=!Le&&(bt||fn)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Ut=Jt,rn=ln,Sn=vn,An=fn,Bn=Lr,cr=bt,Cr=Ce,Dl=rt,lp={ANDROID:An,GECKO:Sn,IPAD:Bn,IPHONE:cr,JavaFx:rn,MAC:Cr,MOBILE:Dl,raw:Ut},Eh=40,on=125,Jc={};Jc.bind=je,Jc.conditionalBind=Ae,Jc.getScrollDeltaPixels=yt,Jc.isRightButton=Dt,Jc.isTargetInput=tt,Jc.mouseToSvg=Rt,Jc.unbind=nt;var jf={};jf.removeElem=Ct;var ba=class{constructor(r){this.name_=r}toString(){return this.name_}};ba.POSITIONABLE=new ba("positionable"),ba.DRAG_TARGET=new ba("drag_target"),ba.DELETE_AREA=new ba("delete_area"),ba.AUTOHIDEABLE=new ba("autohideable");var pl=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(r,a){const f=r.component.id;if(!a&&this.componentData.has(f)){var S;throw Error('Plugin "'+f+'" with capabilities "'+((S=this.componentData.get(f))==null?void 0:S.capabilities)+'" already added.')}for(this.componentData.set(f,r),a=[],S=0;S<r.capabilities.length;S++){const k=String(r.capabilities[S]).toLowerCase();if(a.push(k),this.capabilityToComponentIds.has(k)){let V;(V=this.capabilityToComponentIds.get(k))==null||V.push(f)}else this.capabilityToComponentIds.set(k,[f])}this.componentData.get(f).capabilities=a}removeComponent(r){const a=this.componentData.get(r);if(a){for(let f=0;f<a.capabilities.length;f++){const S=String(a.capabilities[f]).toLowerCase();Ct(this.capabilityToComponentIds.get(S),r)}this.componentData.delete(r)}}addCapability(r,a){if(!this.getComponent(r))throw Error('Cannot add capability, "'+a+'". Plugin "'+r+'" has not been added to the ComponentManager');if(this.hasCapability(r,a))console.warn('Plugin "'+r+'already has capability "'+a+'"');else{a=`${a}`.toLowerCase();var f;(f=this.componentData.get(r))==null||f.capabilities.push(a);var S;(S=this.capabilityToComponentIds.get(a))==null||S.push(r)}}removeCapability(r,a){if(!this.getComponent(r))throw Error('Cannot remove capability, "'+a+'". Plugin "'+r+'" has not been added to the ComponentManager');this.hasCapability(r,a)?(a=`${a}`.toLowerCase(),Ct(this.componentData.get(r).capabilities,a),Ct(this.capabilityToComponentIds.get(a),r)):console.warn('Plugin "'+r+`doesn't have capability "`+a+'" to remove')}hasCapability(r,a){return a=`${a}`.toLowerCase(),this.componentData.has(r)&&this.componentData.get(r).capabilities.indexOf(a)!==-1}getComponent(r){let a;return(a=this.componentData.get(r))==null?void 0:a.component}getComponents(r,a){if(r=`${r}`.toLowerCase(),r=this.capabilityToComponentIds.get(r),!r)return[];const f=[];if(a){const S=[];r.forEach(k=>{S.push(this.componentData.get(k))}),S.sort(function(k,V){return k.weight-V.weight}),S.forEach(function(k){f.push(k.component)})}else r.forEach(S=>{f.push(this.componentData.get(S).component)});return f}};pl.Capability=ba;var up=!1,Yh=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,us={};us.inject=mt,us.register=Mt;var mn=class{constructor(r,a){this.x=r,this.y=a}clone(){return new mn(this.x,this.y)}scale(r){return this.x*=r,this.y*=r,this}translate(r,a){return this.x+=r,this.y+=a,this}static equals(r,a){return r===a?!0:r&&a?r.x===a.x&&r.y===a.y:!1}static distance(r,a){const f=r.x-a.x;return r=r.y-a.y,Math.sqrt(f*f+r*r)}static magnitude(r){return Math.sqrt(r.x*r.x+r.y*r.y)}static difference(r,a){return new mn(r.x-a.x,r.y-a.y)}static sum(r,a){return new mn(r.x+a.x,r.y+a.y)}},o0=new Set,yg={};yg.warn=xe;var Um="http://www.w3.org/2000/svg",bc="http://www.w3.org/1999/xhtml",qs="http://www.w3.org/1999/xlink",Bp;(function(r){r[r.ELEMENT_NODE=1]="ELEMENT_NODE",r[r.TEXT_NODE=3]="TEXT_NODE",r[r.COMMENT_NODE=8]="COMMENT_NODE"})(Bp||(Bp={}));var Rd=null,ja=0,Fr=null,Ta={HTML_NS:bc};Ta.NodeType=Bp,Ta.SVG_NS=Um,Ta.XLINK_NS=qs,Ta.addClass=we,Ta.containsNode=Oe,Ta.createSvgElement=ie,Ta.getFastTextWidth=Ye,Ta.getFastTextWidthWithSizeString=Gt,Ta.getTextWidth=Ie,Ta.hasClass=At,Ta.insertAfter=Ke,Ta.measureFontMetrics=He,Ta.removeClass=Tt,Ta.removeClasses=ct,Ta.removeNode=ft,Ta.setCssTransform=Q,Ta.startTextWidthCache=ne,Ta.stopTextWidthCache=fe;var We=class{constructor(r){this.tagName=r}toString(){return this.tagName}};We.ANIMATE=new We("animate"),We.CIRCLE=new We("circle"),We.CLIPPATH=new We("clipPath"),We.DEFS=new We("defs"),We.FECOMPOSITE=new We("feComposite"),We.FECOMPONENTTRANSFER=new We("feComponentTransfer"),We.FEFLOOD=new We("feFlood"),We.FEFUNCA=new We("feFuncA"),We.FEGAUSSIANBLUR=new We("feGaussianBlur"),We.FEPOINTLIGHT=new We("fePointLight"),We.FESPECULARLIGHTING=new We("feSpecularLighting"),We.FILTER=new We("filter"),We.FOREIGNOBJECT=new We("foreignObject"),We.G=new We("g"),We.IMAGE=new We("image"),We.LINE=new We("line"),We.PATH=new We("path"),We.PATTERN=new We("pattern"),We.POLYGON=new We("polygon"),We.RECT=new We("rect"),We.SVG=new We("svg"),We.TEXT=new We("text"),We.TSPAN=new We("tspan");var Ri=class{constructor(r,a,f,S){this.top=r,this.bottom=a,this.left=f,this.right=S}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(r,a){return r>=this.left&&r<=this.right&&a>=this.top&&a<=this.bottom}intersects(r){return!(this.left>r.right||this.right<r.left||this.top>r.bottom||this.bottom<r.top)}},Qs=class{constructor(r,a){this.width=r,this.height=a}static equals(r,a){return r===a?!0:r&&a?r.width===a.width&&r.height===a.height:!1}},a_={getSizeInternal:_t},Tc={TEST_ONLY:a_};Tc.getBorderBox=Dr,Tc.getComputedStyle=Yt,Tc.getContainerOffsetToScrollInto=xr,Tc.getPageOffset=Rn,Tc.getSize=Zt,Tc.getViewportPageOffset=ii,Tc.scrollIntoContainerView=Si;var yf=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Xf=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,l_={XY_REGEX:yf,XY_STYLE_REGEX:Xf},vf={TEST_ONLY:l_};vf.getDocumentScroll=Ge,vf.getInjectionDivXY=re,vf.getRelativeXY=fr,vf.getViewportBBox=Te,vf.screenToWsCoordinates=ot,vf.wsToScreenCoordinates=Ft;var Sa=class{constructor(r,a,f,S,k){this.workspace=r,this.horizontal=a,this.oldHostMetrics=null,this.ratio=1,this.origin=new mn(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new mn(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=f||!1,this.margin=k!==void 0?k:Sa.DEFAULT_SCROLLBAR_MARGIN,r="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),S&&(r+=" "+S),this.outerSvg=ie(We.SVG,{class:r}),S=ie(We.G,{},this.outerSvg),this.svgBackground=ie(We.RECT,{class:"blocklyScrollbarBackground"},S),r=Math.floor((Sa.scrollbarThickness-5)/2),this.svgHandle=ie(We.RECT,{class:"blocklyScrollbarHandle",rx:r,ry:r},S),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),Ke(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),a?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Ae(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Ae(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const r=Sa.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(r)),this.outerSvg.setAttribute("height",String(r)),this.svgHandle.setAttribute("height",String(r-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(r)),this.outerSvg.setAttribute("width",String(r)),this.svgHandle.setAttribute("width",String(r-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),nt(this.onMouseDownBarWrapper_),nt(this.onMouseDownHandleWrapper_),ft(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(r){return r=0>=r||isNaN(r)?0:Math.min(r,this.scrollbarLength)}setHandleLength(r){this.handleLength=r,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(r){return r=0>=r||isNaN(r)?0:Math.min(r,this.scrollbarLength-this.handleLength)}setHandlePosition(r){this.handlePosition=r,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(r){this.scrollbarLength=r,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(r,a){this.position.x=r,this.position.y=a,Q(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(r){!r&&(r=this.workspace.getMetrics(),!r)||this.oldHostMetrics&&Sa.metricsAreEquivalent(r,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(r):this.resizeVertical(r),this.oldHostMetrics=r,this.updateMetrics())}requiresViewResize(r){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==r.viewWidth||this.oldHostMetrics.viewHeight!==r.viewHeight||this.oldHostMetrics.absoluteLeft!==r.absoluteLeft||this.oldHostMetrics.absoluteTop!==r.absoluteTop:!0}resizeHorizontal(r){this.requiresViewResize(r)?this.resizeViewHorizontal(r):this.resizeContentHorizontal(r)}resizeViewHorizontal(r){var a=r.viewWidth-2*this.margin;this.pair&&(a-=Sa.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),a=r.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(a+=Sa.scrollbarThickness),this.setPosition(a,r.absoluteTop+r.viewHeight-Sa.scrollbarThickness-this.margin),this.resizeContentHorizontal(r)}resizeContentHorizontal(r){if(r.viewWidth>=r.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*r.viewWidth/r.scrollWidth;a=this.constrainHandleLength(a),this.setHandleLength(a),a=r.scrollWidth-r.viewWidth;var f=this.scrollbarLength-this.handleLength;r=(r.viewLeft-r.scrollLeft)/a*f,r=this.constrainHandlePosition(r),this.setHandlePosition(r),this.ratio=f/a}}resizeVertical(r){this.requiresViewResize(r)?this.resizeViewVertical(r):this.resizeContentVertical(r)}resizeViewVertical(r){let a=r.viewHeight-2*this.margin;this.pair&&(a-=Sa.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),this.setPosition(this.workspace.RTL?r.absoluteLeft+this.margin:r.absoluteLeft+r.viewWidth-Sa.scrollbarThickness-this.margin,r.absoluteTop+this.margin),this.resizeContentVertical(r)}resizeContentVertical(r){if(r.viewHeight>=r.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*r.viewHeight/r.scrollHeight;a=this.constrainHandleLength(a),this.setHandleLength(a),a=r.scrollHeight-r.viewHeight;var f=this.scrollbarLength-this.handleLength;r=(r.viewTop-r.scrollTop)/a*f,r=this.constrainHandlePosition(r),this.setHandlePosition(r),this.ratio=f/a}}isVisible(){return this.isHandleVisible}setContainerVisible(r){const a=r!==this.containerVisible;this.containerVisible=r,a&&this.updateDisplay_()}setVisible(r){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(r)}setVisibleInternal(r){const a=r!==this.isVisible();this.isHandleVisible=r,a&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(r){if(this.workspace.markFocused(),st(),this.cleanUp(),Dt(r))r.stopPropagation();else{var a=Rt(r,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());a=this.horizontal?a.x:a.y;var f=re(this.svgHandle);f=this.horizontal?f.x:f.y;var S=this.handlePosition,k=.95*this.handleLength;a<=f?S-=k:a>=f+this.handleLength&&(S+=k),this.setHandlePosition(this.constrainHandlePosition(S)),this.updateMetrics(),r.stopPropagation(),r.preventDefault()}}onMouseDownHandle(r){this.workspace.markFocused(),this.cleanUp(),Dt(r)?r.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?r.clientX:r.clientY,this.onMouseUpWrapper_=Ae(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Ae(document,"pointermove",this,this.onMouseMoveHandle),r.stopPropagation(),r.preventDefault())}onMouseMoveHandle(r){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?r.clientX:r.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){st(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(nt(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(nt(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let r=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(r)&&(r=0),r}updateMetrics(){const r=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:r}):this.workspace.setMetrics({y:r})}set(r,a){this.setHandlePosition(this.constrainHandlePosition(r*this.ratio)),(a||a===void 0)&&this.updateMetrics()}setOrigin(r,a){this.origin=new mn(r,a)}static metricsAreEquivalent(r,a){return r.viewWidth===a.viewWidth&&r.viewHeight===a.viewHeight&&r.viewLeft===a.viewLeft&&r.viewTop===a.viewTop&&r.absoluteTop===a.absoluteTop&&r.absoluteLeft===a.absoluteLeft&&r.scrollWidth===a.scrollWidth&&r.scrollHeight===a.scrollHeight&&r.scrollLeft===a.scrollLeft&&r.scrollTop===a.scrollTop}};Sa.scrollbarThickness=W?25:15,Sa.DEFAULT_SCROLLBAR_MARGIN=.5;var vg={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},Yf={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:bf,DOMParser:fl,XMLSerializer:au}=globalThis;fl&&(vg=new fl),au&&(Yf=new au);var kd="https://developers.google.com/blockly/xml",cp=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Od={NAME_SPACE:kd};Od.createElement=t.createElement$$module$build$src$core$utils$xml,Od.createTextNode=t.createTextNode$$module$build$src$core$utils$xml,Od.domToText=On,Od.injectDependencies=nn,Od.textToDom=t.textToDom$$module$build$src$core$utils$xml;var qc="categoryToolbox",bg="flyoutToolbox",dr;(function(r){r[r.TOP=0]="TOP",r[r.BOTTOM=1]="BOTTOM",r[r.LEFT=2]="LEFT",r[r.RIGHT=3]="RIGHT"})(dr||(dr={}));var a0={hasCategoriesInternal:Un},_o={};_o.Position=dr,_o.TEST_ONLY=a0,_o.convertFlyoutDefToJsonArray=vt,_o.convertToolboxDefToJson=gt,_o.hasCategories=Wt,_o.isCategoryCollapsible=tr,_o.parseToolboxTree=Nr;var Xa;(function(r){r[r.TOP=0]="TOP",r[r.BOTTOM=1]="BOTTOM"})(Xa||(Xa={}));var Kf;(function(r){r[r.LEFT=0]="LEFT",r[r.RIGHT=1]="RIGHT"})(Kf||(Kf={}));var Ld;(function(r){r[r.UP=0]="UP",r[r.DOWN=1]="DOWN"})(Ld||(Ld={}));var Jf={};Jf.bumpDirection=Ld,Jf.bumpPositionRect=Ia,Jf.getCornerOppositeToolbox=bs,Jf.getStartPositionRect=jr,Jf.horizontalPosition=Kf,Jf.verticalPosition=Xa;var Mu={width:96,height:124,url:"sprites.png"},l0=class{constructor(r){this.workspace=r,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=ie(We.G,{});const r=String(Math.random()).substring(2);return this.createZoomOutSvg(r),this.createZoomInSvg(r),this.workspace.isMovable()&&this.createZoomResetSvg(r),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[pl.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&ft(this.svgGroup);for(const r of this.boundEvents)nt(r);this.boundEvents.length=0}getBoundingRectangle(){let r=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(r+=this.LARGE_SPACING+this.HEIGHT),new Ri(this.top,this.top+r,this.left,this.left+this.WIDTH)}position(r,a){if(this.initialized){var f=bs(this.workspace,r),S=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(S+=this.LARGE_SPACING+this.HEIGHT),r=jr(f,new Qs(this.WIDTH,S),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,r,this.workspace),f=f.vertical,a=Ia(r,this.MARGIN_VERTICAL,f===Xa.TOP?Ld.DOWN:Ld.UP,a),f===Xa.TOP){var k=this.SMALL_SPACING+this.HEIGHT,V;(V=this.zoomInGroup)==null||V.setAttribute("transform","translate(0, "+k+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(k+this.LARGE_SPACING+this.HEIGHT)+")")}else{V=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let ze;(ze=this.zoomInGroup)==null||ze.setAttribute("transform","translate(0, "+V+")"),V=V+this.SMALL_SPACING+this.HEIGHT,(k=this.zoomOutGroup)==null||k.setAttribute("transform","translate(0, "+V+")")}this.top=a.top,this.left=a.left;var _e;(_e=this.svgGroup)==null||_e.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(r){this.zoomOutGroup=ie(We.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const a=ie(We.CLIPPATH,{id:"blocklyZoomoutClipPath"+r},this.zoomOutGroup);ie(We.RECT,{width:32,height:32},a),ie(We.IMAGE,{width:Mu.width,height:Mu.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+r+")"},this.zoomOutGroup).setAttributeNS(qs,"xlink:href",this.workspace.options.pathToMedia+Mu.url),this.boundEvents.push(Ae(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(r){this.zoomInGroup=ie(We.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const a=ie(We.CLIPPATH,{id:"blocklyZoominClipPath"+r},this.zoomInGroup);ie(We.RECT,{width:32,height:32},a),ie(We.IMAGE,{width:Mu.width,height:Mu.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+r+")"},this.zoomInGroup).setAttributeNS(qs,"xlink:href",this.workspace.options.pathToMedia+Mu.url),this.boundEvents.push(Ae(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(r,a){this.workspace.markFocused(),this.workspace.zoomCenter(r),this.fireZoomEvent(),st(),a.stopPropagation(),a.preventDefault()}createZoomResetSvg(r){this.zoomResetGroup=ie(We.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const a=ie(We.CLIPPATH,{id:"blocklyZoomresetClipPath"+r},this.zoomResetGroup);ie(We.RECT,{width:32,height:32},a),ie(We.IMAGE,{width:Mu.width,height:Mu.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+r+")"},this.zoomResetGroup).setAttributeNS(qs,"xlink:href",this.workspace.options.pathToMedia+Mu.url),this.boundEvents.push(Ae(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(r){this.workspace.markFocused();const a=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(a),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),st(),r.stopPropagation(),r.preventDefault()}fireZoomEvent(){const r=new(Re(ec))(null,this.workspace.id,"zoom_controls");ce(r)}};Mt(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var Wo=class{constructor(r){this.name=r}toString(){return this.name}equals(r){return this.name===r.toString()}};Wo.MUTATOR=new Wo("mutator"),Wo.WARNING=new Wo("warning"),Wo.COMMENT=new Wo("comment"),function(r){r[r.VALUE=1]="VALUE",r[r.STATEMENT=3]="STATEMENT",r[r.DUMMY=5]="DUMMY",r[r.CUSTOM=6]="CUSTOM",r[r.END_ROW=7]="END_ROW"}(t.inputTypes$$module$build$src$core$inputs$input_types||(t.inputTypes$$module$build$src$core$inputs$input_types={})),t.inputTypes$$module$build$src$core$inputs$input_types;var Zi=function(r,a){window.alert(r),a&&a()},lu=function(r,a){a(window.confirm(r))},ml=function(r,a,f){f(window.prompt(r,a))},Au={confirmInternal:Ar},uu={TEST_ONLY:Au};uu.alert=Eo,uu.confirm=en,uu.prompt=Ra,uu.setAlert=Wl,uu.setConfirm=qa,uu.setPrompt=Bs;var Tf,Nl;t.Msg$$module$build$src$core$msg=Object.create(null),Tf=function(r){Object.keys(r).forEach(function(a){t.Msg$$module$build$src$core$msg[a]=r[a]})},Nl={Msg:t.Msg$$module$build$src$core$msg,setLocale:Tf};var Dd=class extends h{constructor(r){super(),this.isBlank=typeof r>"u",r&&(this.varId=r.getId(),this.workspaceId=r.workspace.id)}toJson(){const r=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return r.varId=this.varId,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Dd),a.varId=r.varId,a}},Nd=class extends Dd{constructor(r){super(r),this.type=fo,r&&(this.varType=r.type,this.varName=r.name)}toJson(){const r=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return r.varType=this.varType,r.varName=this.varName,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Nd),a.varType=r.varType,a.varName=r.varName,a}run(r){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");r?a.createVariable(this.varName,this.varType,this.varId):a.deleteVariableById(this.varId)}};i(Pt.EVENT,fo,Nd);var hp=class{constructor(r,a,f,S){this.workspace=r,this.name=a,this.type=f||"",this.id_=S||te()}getId(){return this.id_}static compareByName(r,a){return r.name.localeCompare(a.name,void 0,{sensitivity:"base"})}},Tg="VARIABLE",qf="ijkmnopqrstuvwxyzabcdefgh",Qc={generateUniqueNameInternal:_r},gl={CATEGORY_NAME:Tg,TEST_ONLY:Qc,VAR_LETTER_OPTIONS:qf};gl.allDeveloperVariables=t.allDeveloperVariables$$module$build$src$core$variables,gl.allUsedVarModels=t.allUsedVarModels$$module$build$src$core$variables,gl.createVariableButtonHandler=Ts,gl.flyoutCategory=Cn,gl.flyoutCategoryBlocks=Mr,gl.generateUniqueName=Ur,gl.generateUniqueNameFromOptions=Di,gl.generateVariableFieldDom=js,gl.getAddedVariables=Vl,gl.getOrCreateVariablePackage=t.getOrCreateVariablePackage$$module$build$src$core$variables,gl.getVariable=t.getVariable$$module$build$src$core$variables,gl.nameUsedWithAnyType=Qa,gl.nameUsedWithConflictingParam=ka,gl.promptName=hi,gl.renameVariable=t.renameVariable$$module$build$src$core$variables;var Zc=class{constructor(r,a,f,S,k){this.workspace=r,this.editable=this.movable=this.deletable=!0,this.disposed_=!1,this.isComment=!0,this.id=k&&!r.getCommentById(k)?k:te(),r.addTopComment(this),this.xy_=new mn(0,0),this.height_=f,this.width_=S,this.RTL=r.RTL,this.content_=a,Zc.fireCreateEvent(this)}dispose(){this.disposed_||(se()&&ce(new(Re(jh))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(r){this.height_=r}getWidth(){return this.width_}setWidth(r){this.width_=r}getRelativeToSurfaceXY(){return new mn(this.xy_.x,this.xy_.y)}moveBy(r,a){const f=new(Re(ya))(this);this.xy_.translate(r,a),f.recordNew(),ce(f)}isDeletable(){return this.deletable&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(r){this.deletable=r}isMovable(){return this.movable&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(r){this.movable=r}isEditable(){return this.editable&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(r){this.editable=r}getContent(){return this.content_}setContent(r){this.content_!==r&&(ce(new(Re(fd))(this,this.content_,r)),this.content_=r)}toXmlWithXY(r){return r=this.toXml(r),r.setAttribute("x",String(Math.round(this.xy_.x))),r.setAttribute("y",String(Math.round(this.xy_.y))),r.setAttribute("h",String(this.height_)),r.setAttribute("w",String(this.width_)),r}toXml(r){const a=t.createElement$$module$build$src$core$utils$xml("comment");return r||(a.id=this.id),a.textContent=this.getContent(),a}static fireCreateEvent(r){if(se()){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);try{ce(new(Re(ls))(r))}finally{t.setGroup$$module$build$src$core$events$utils(a)}}}static fromXml(r,a){var f=Zc.parseAttributes(r);return a=new Zc(a,f.content,f.h,f.w,f.id),f=r.getAttribute("x"),r=r.getAttribute("y"),f=f?parseInt(f,10):NaN,r=r?parseInt(r,10):NaN,isNaN(f)||isNaN(r)||a.moveBy(f,r),Zc.fireCreateEvent(a),a}static parseAttributes(r){const a=r.getAttribute("h"),f=r.getAttribute("w"),S=r.getAttribute("x"),k=r.getAttribute("y"),V=r.getAttribute("id");if(!V)throw Error("No ID present in XML comment definition.");let _e;return{id:V,h:a?parseInt(a):100,w:f?parseInt(f):100,x:S?parseInt(S):NaN,y:k?parseInt(k):NaN,content:(_e=r.textContent)!=null?_e:""}}},Bd=class extends g{constructor(r,a,f){super(f),this.type=mo,this.oldElementId=r??void 0,this.newElementId=a??void 0}toJson(){const r=super.toJson();return r.oldElementId=this.oldElementId,r.newElementId=this.newElementId,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Bd),a.oldElementId=r.oldElementId,a.newElementId=r.newElementId,a}};i(Pt.EVENT,mo,Bd);var Hm={};Hm.register=pu,Hm.unregister=ch;var Gm=class{paste(r,a,f){const S=r.commentState;if(f)S.setAttribute("x",`${f.x}`),S.setAttribute("y",`${f.y}`);else{var k;f=parseInt((k=S.getAttribute("x"))!=null?k:"0")+50;let V;k=parseInt((V=S.getAttribute("y"))!=null?V:"0")+50,S.setAttribute("x",`${f}`),S.setAttribute("y",`${k}`)}return Bl.fromXmlRendered(r.commentState,a)}};Gm.TYPE="workspace-comment",pu(Gm.TYPE,new Gm);var yo=8,Qf=3,Os=2,Bl=class extends Zc{constructor(r,a,f,S,k){super(r,a,f,S,k),this.onMouseMoveWrapper=this.onMouseUpWrapper=null,this.eventsInit=!1,this.deleteIconBorder=this.deleteGroup=this.resizeGroup=this.foreignObject=this.svgHandleTarget=this.svgRectTarget=this.textarea=null,this.rendered=this.autoLayout=this.focused=!1,this.svgGroup=ie(We.G,{class:"blocklyComment"}),this.workspace=r,this.svgRect_=ie(We.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:Qf,ry:Qf}),this.svgGroup.appendChild(this.svgRect_),this.render()}dispose(){this.disposed_||(O()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),se()&&ce(new(Re(jh))(this)),ft(this.svgGroup),t.disable$$module$build$src$core$events$utils(),super.dispose(),t.enable$$module$build$src$core$events$utils())}initSvg(r){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit||(Ae(this.svgRectTarget,"pointerdown",this,this.pathMouseDown),Ae(this.svgHandleTarget,"pointerdown",this,this.pathMouseDown)),this.eventsInit=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!r&&this.textarea&&this.textarea.select()}pathMouseDown(r){const a=this.workspace.getGesture(r);a&&a.handleBubbleStart(r,this)}showContextMenu(r){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(O()!==this){var r=null;if(O()){r=O().id,t.disable$$module$build$src$core$events$utils();try{O().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}r=new(Re(mo))(r,this.id,this.workspace.id),ce(r),P(this),this.addSelect()}}unselect(){if(O()===this){var r=new(Re(mo))(this.id,null,this.workspace.id);ce(r),P(null),this.removeSelect(),this.blurFocus()}}addSelect(){we(this.svgGroup,"blocklySelected"),this.setFocus()}removeSelect(){we(this.svgGroup,"blocklySelected"),this.blurFocus()}addFocus(){we(this.svgGroup,"blocklyFocused")}removeFocus(){Tt(this.svgGroup,"blocklyFocused")}getRelativeToSurfaceXY(){const r=this.workspace.getLayerManager();if(!r)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,f=0,S=this.getSvgRoot();if(S)do{const k=fr(S);a+=k.x,f+=k.y,S=S.parentNode}while(S&&!r.hasLayer(S)&&S!==null);return this.xy_=new mn(a,f)}moveBy(r,a){const f=new(Re(ya))(this),S=this.getRelativeToSurfaceXY();this.translate(S.x+r,S.y+a),this.xy_=new mn(S.x+r,S.y+a),f.recordNew(),ce(f),this.workspace.resizeContents()}translate(r,a){this.xy_=new mn(r,a),this.getSvgRoot().setAttribute("transform","translate("+r+","+a+")")}moveDuringDrag(r){r=`translate(${r.x}, ${r.y})`,this.getSvgRoot().setAttribute("transform",r)}moveTo(r,a){this.translate(r,a)}clearTransformAttributes(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var r=this.getRelativeToSurfaceXY();const a=this.getHeightWidth(),f=r.y,S=r.y+a.height;let k;return this.RTL?(k=r.x-a.width,r=r.x):(k=r.x,r=r.x+a.width),new Ri(f,S,k,r)}updateMovable(){this.isMovable()?we(this.svgGroup,"blocklyDraggable"):Tt(this.svgGroup,"blocklyDraggable")}setMovable(r){super.setMovable(r),this.updateMovable()}setEditable(r){super.setEditable(r),this.textarea&&(this.textarea.readOnly=!r)}setDragging(r){r?we(this.getSvgRoot(),"blocklyDragging"):Tt(this.getSvgRoot(),"blocklyDragging")}getSvgRoot(){return this.svgGroup}getContent(){return this.textarea?this.textarea.value:this.content_}setContent(r){super.setContent(r),this.textarea&&(this.textarea.value=r)}setDeleteStyle(r){r?we(this.svgGroup,"blocklyDraggingDelete"):Tt(this.svgGroup,"blocklyDraggingDelete")}setAutoLayout(r){}toXmlWithXY(r){let a=0;this.workspace.RTL&&(a=this.workspace.getWidth()),r=this.toXml(r);const f=this.getRelativeToSurfaceXY();return r.setAttribute("x",String(Math.round(this.workspace.RTL?a-f.x:f.x))),r.setAttribute("y",String(Math.round(f.y))),r.setAttribute("h",String(this.getHeight())),r.setAttribute("w",String(this.getWidth())),r}toCopyData(){return{paster:Gm.TYPE,commentState:this.toXmlWithXY()}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered){var r=this.getHeightWidth(),a=this.createEditor();this.svgGroup.appendChild(a),this.svgHandleTarget=ie(We.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup.appendChild(this.svgHandleTarget),this.svgRectTarget=ie(We.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:Qf,ry:Qf}),this.svgGroup.appendChild(this.svgRectTarget),this.addResizeDom(),this.isDeletable()&&this.addDeleteDom(),this.setSize(r.width,r.height),this.textarea.value=this.content_,this.rendered=!0,this.resizeGroup&&Ae(this.resizeGroup,"pointerdown",this,this.resizeMouseDown),this.isDeletable()&&(Ae(this.deleteGroup,"pointerdown",this,this.deleteMouseDown),Ae(this.deleteGroup,"pointerout",this,this.deleteMouseOut),Ae(this.deleteGroup,"pointerup",this,this.deleteMouseUp))}}createEditor(){this.foreignObject=ie(We.FOREIGNOBJECT,{x:0,y:Bl.TOP_OFFSET,class:"blocklyCommentForeignObject"});const r=document.createElementNS(bc,"body");r.setAttribute("xmlns",bc),r.className="blocklyMinimalBody";const a=document.createElementNS(bc,"textarea");return a.className="blocklyCommentTextarea",a.setAttribute("dir",this.RTL?"RTL":"LTR"),a.readOnly=!this.isEditable(),r.appendChild(a),this.textarea=a,this.foreignObject.appendChild(r),Ae(a,"wheel",this,function(f){f.stopPropagation()}),Ae(a,"change",this,function(f){this.setContent(a.value)}),this.foreignObject}addResizeDom(){this.resizeGroup=ie(We.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup),ie(We.POLYGON,{points:`0,${yo} ${yo},${yo} ${yo},0`},this.resizeGroup),ie(We.LINE,{class:"blocklyResizeLine",x1:yo/3,y1:yo-1,x2:yo-1,y2:yo/3},this.resizeGroup),ie(We.LINE,{class:"blocklyResizeLine",x1:2*yo/3,y1:yo-1,x2:yo-1,y2:2*yo/3},this.resizeGroup)}addDeleteDom(){this.deleteGroup=ie(We.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup),this.deleteIconBorder=ie(We.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup),ie(We.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup),ie(We.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup)}resizeMouseDown(r){this.unbindDragEvents(),Dt(r)||(this.workspace.startDrag(r,new mn(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper=Ae(document,"pointerup",this,this.resizeMouseUp),this.onMouseMoveWrapper=Ae(document,"pointermove",this,this.resizeMouseMove),this.workspace.hideChaff()),r.stopPropagation()}deleteMouseDown(r){this.deleteIconBorder&&we(this.deleteIconBorder,"blocklyDeleteIconHighlighted"),r.stopPropagation()}deleteMouseOut(r){this.deleteIconBorder&&Tt(this.deleteIconBorder,"blocklyDeleteIconHighlighted")}deleteMouseUp(r){this.dispose(),r.stopPropagation()}unbindDragEvents(){this.onMouseUpWrapper&&(nt(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onMouseMoveWrapper&&(nt(this.onMouseMoveWrapper),this.onMouseMoveWrapper=null)}resizeMouseUp(r){st(),this.unbindDragEvents()}resizeMouseMove(r){this.autoLayout=!1,r=this.workspace.moveDrag(r),this.setSize(this.RTL?-r.x:r.x,r.y)}resizeComment(){const r=this.getHeightWidth(),a=Bl.TOP_OFFSET,f=2*Os;let S;(S=this.foreignObject)==null||S.setAttribute("width",String(r.width));let k;if((k=this.foreignObject)==null||k.setAttribute("height",String(r.height-a)),this.RTL){let V;(V=this.foreignObject)==null||V.setAttribute("x",String(-r.width))}this.textarea&&(this.textarea.style.width=r.width-f+"px",this.textarea.style.height=r.height-f-a+"px")}setSize(r,a){r=Math.max(r,45),a=Math.max(a,20+Bl.TOP_OFFSET),this.width_=r,this.height_=a,this.svgRect_.setAttribute("width",`${r}`),this.svgRect_.setAttribute("height",`${a}`);let f;(f=this.svgRectTarget)==null||f.setAttribute("width",`${r}`);let S;(S=this.svgRectTarget)==null||S.setAttribute("height",`${a}`);let k;(k=this.svgHandleTarget)==null||k.setAttribute("width",`${r}`);let V;if((V=this.svgHandleTarget)==null||V.setAttribute("height",String(Bl.TOP_OFFSET)),this.RTL){this.svgRect_.setAttribute("transform","scale(-1 1)");let _e;(_e=this.svgRectTarget)==null||_e.setAttribute("transform","scale(-1 1)")}if(this.resizeGroup)if(this.RTL){this.resizeGroup.setAttribute("transform","translate("+(-r+yo)+","+(a-yo)+") scale(-1 1)");let _e;(_e=this.deleteGroup)==null||_e.setAttribute("transform","translate("+(-r+yo)+","+-yo+") scale(-1 1)")}else{this.resizeGroup.setAttribute("transform","translate("+(r-yo)+","+(a-yo)+")");let _e;(_e=this.deleteGroup)==null||_e.setAttribute("transform","translate("+(r-yo)+","+-yo+")")}this.resizeComment()}setFocus(){this.focused=!0,setTimeout(()=>{this.disposed_||(this.textarea.focus(),this.addFocus(),this.svgRectTarget&&we(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&we(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused=!1,setTimeout(()=>{this.disposed_||(this.textarea.blur(),this.removeFocus(),this.svgRectTarget&&Tt(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&Tt(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(r,a,f){t.disable$$module$build$src$core$events$utils();let S;try{const k=Zc.parseAttributes(r);if(S=new Bl(a,k.content,k.h,k.w,k.id),a.rendered&&(S.initSvg(!0),S.render()),!isNaN(k.x)&&!isNaN(k.y))if(a.RTL){const V=f||a.getWidth();S.moveBy(V-k.x,k.y)}else S.moveBy(k.x,k.y)}finally{t.enable$$module$build$src$core$events$utils()}return Zc.fireCreateEvent(S),S}};Bl.DEFAULT_SIZE=100,Bl.TOP_OFFSET=10,Mt(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`);var Sf=new Set,Sg=new WeakSet,Pd=null,Wm=null,Sc=0,Fd={};Fd.finishQueuedRenders=gr,Fd.queueRender=Ko,Fd.triggerQueuedRenders=Ei;var ra={};ra.appendDomToWorkspace=Sd,ra.blockToDom=el,ra.blockToDomWithXY=vr,ra.clearWorkspaceAndLoadFromXml=tl,ra.deleteNext=la,ra.domToBlock=t.domToBlock$$module$build$src$core$xml,ra.domToBlockInternal=no,ra.domToPrettyText=ms,ra.domToText=Ki,ra.domToVariables=Bu,ra.domToWorkspace=t.domToWorkspace$$module$build$src$core$xml,ra.variablesToDom=yr,ra.workspaceToDom=El;var Ea=class extends Error{},u_=class extends Ea{constructor(r){super("Expected to find a 'type' property, defining the block type"),this.state=r}},Zf=class extends Ea{constructor(r,a,f){super(`The block ${a.toDevString()} is missing a(n) ${r}
connection`),this.block=a,this.state=f}},u0=class extends Ea{constructor(r,a,f,S){super(`The block ${f.toDevString()} could not connect its
${a} to its parent, because: ${r}`),this.childBlock=f,this.childState=S}},py=class extends Ea{constructor(r){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=r}},Pp=class extends Ea{constructor(r,a,f){super(`Cannot add an icon of type '${r}' to the block ${a.toDevString()}, because there is no icon registered with type '${r}'. Make sure that all of your icons have been registered.`),this.block=a,this.state=f}},Ef={};Ef.BadConnectionCheck=u0,Ef.DeserializationError=Ea,Ef.MissingBlockType=u_,Ef.MissingConnection=Zf,Ef.RealChildOfShadow=py,Ef.UnregisteredIcon=Pp;var c0=100,xf=75,h0=50,em={BLOCKS:h0,PROCEDURES:xf,VARIABLES:c0},d0={};d0.register=Is,d0.unregister=yi;var c_=class{constructor(){this.priority=h0}save(r){const a=[];for(const f of r.getTopBlocks(!1))(r=xi(f,{addCoordinates:!0,doFullSerialization:!1}))&&a.push(r);return a.length?{languageVersion:0,blocks:a}:null}load(r,a){r=r.blocks;for(const f of r)Hn(f,a,{recordUndo:le()})}clear(r){for(const a of r.getTopBlocks(!1))a.dispose(!1)}};Is("blocks",new c_);var tm={};tm.BlockSerializer=c_,tm.append=Hn,tm.appendInternal=$i,tm.save=xi;var dp=class extends h{constructor(r){super(),this.isBlank=!r,r&&(this.blockId=r.id,this.workspaceId=r.workspace.id)}toJson(){const r=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return r.blockId=this.blockId,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new dp),a.blockId=r.blockId,a}},h_=class extends dp{constructor(r){super(r),this.type=t.CREATE$$module$build$src$core$events$utils,r&&(r.isShadow()&&(this.recordUndo=!1),this.xml=vr(r),this.ids=Se(r),this.json=xi(r,{addCoordinates:!0}))}toJson(){const r=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return r.xml=Ki(this.xml),r.ids=this.ids,r.json=this.json,this.recordUndo||(r.recordUndo=this.recordUndo),r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new h_),a.xml=t.textToDom$$module$build$src$core$utils$xml(r.xml),a.ids=r.ids,a.json=r.json,r.recordUndo!==void 0&&(a.recordUndo=r.recordUndo),a}run(r){const a=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!Pv(a,this.ids))if(r)Hn(this.json,a);else for(r=0;r<this.ids.length;r++){const f=this.ids[r],S=a.getBlockById(f);S?S.dispose(!1):f===this.blockId&&console.warn("Can't uncreate non-existent block: "+f)}}},Pv=function(r,a){return a.map(f=>r.getBlockById(f)).filter(f=>f&&f.isShadow()).length===a.length};i(Pt.EVENT,t.CREATE$$module$build$src$core$events$utils,h_);var p0=class extends g{constructor(r,a){super(a),this.type=ou,this.themeName=r}toJson(){const r=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return r.themeName=this.themeName,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new p0),a.themeName=r.themeName,a}};i(Pt.EVENT,ou,p0);var f0=class extends g{constructor(r,a,f,S,k){super(S),this.type=ti,this.viewTop=r,this.viewLeft=a,this.scale=f,this.oldScale=k}toJson(){const r=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return r.viewTop=this.viewTop,r.viewLeft=this.viewLeft,r.scale=this.scale,r.oldScale=this.oldScale,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new f0),a.viewTop=r.viewTop,a.viewLeft=r.viewLeft,a.scale=r.scale,a.oldScale=r.oldScale,a}};i(Pt.EVENT,ti,f0);var Fp;Fp=28,t.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Fp,connectingSnapRadius:Fp,currentConnectionPreference:8,bumpDelay:250},t.config$$module$build$src$core$config;var Pn;(function(r){r[r.INPUT_VALUE=1]="INPUT_VALUE",r[r.OUTPUT_VALUE=2]="OUTPUT_VALUE",r[r.NEXT_STATEMENT=3]="NEXT_STATEMENT",r[r.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(Pn||(Pn={}));var eh=class{constructor(r){this.connectionChecker=r,this.connections=[]}addConnection(r,a){a=this.calculateIndexForYPos(a),this.connections.splice(a,0,r)}findIndexOfConnection(r,a){if(!this.connections.length)return-1;const f=this.calculateIndexForYPos(a);if(f>=this.connections.length)return-1;a=r.y;let S=f;for(;0<=S&&this.connections[S].y===a;){if(this.connections[S]===r)return S;S--}for(S=f;S<this.connections.length&&this.connections[S].y===a;){if(this.connections[S]===r)return S;S++}return-1}calculateIndexForYPos(r){if(!this.connections.length)return 0;let a=0,f=this.connections.length;for(;a<f;){const S=Math.floor((a+f)/2);if(this.connections[S].y<r)a=S+1;else if(this.connections[S].y>r)f=S;else{a=S;break}}return a}removeConnection(r,a){if(r=this.findIndexOfConnection(r,a),r===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(r,1)}getNeighbours(r,a){function f(Gn){const _l=k-S[Gn].x,Ka=V-S[Gn].y;return Math.sqrt(_l*_l+Ka*Ka)<=a&&jt.push(S[Gn]),Ka<a}const S=this.connections,k=r.x,V=r.y;r=0;let _e=S.length-2,ze=_e;for(;r<ze;)S[ze].y<V?r=ze:_e=ze,ze=Math.floor((r+_e)/2);const jt=[];if(_e=r=ze,S.length){for(;0<=r&&f(r);)r--;do _e++;while(_e<S.length&&f(_e))}return jt}isInYRange(r,a,f){return Math.abs(this.connections[r].y-a)<=f}searchForClosest(r,a,f){if(!this.connections.length)return{connection:null,radius:a};const S=r.y,k=r.x;r.x=k+f.x,r.y=S+f.y;var V=this.calculateIndexForYPos(r.y);f=null;let _e=a,ze,jt=V-1;for(;0<=jt&&this.isInYRange(jt,r.y,a);)ze=this.connections[jt],this.connectionChecker.canConnect(r,ze,!0,_e)&&(f=ze,_e=ze.distanceFrom(r)),jt--;for(;V<this.connections.length&&this.isInYRange(V,r.y,a);)ze=this.connections[V],this.connectionChecker.canConnect(r,ze,!0,_e)&&(f=ze,_e=ze.distanceFrom(r)),V++;return r.x=k,r.y=S,{connection:f,radius:_e}}static init(r){const a=[];return a[Pn.INPUT_VALUE]=new eh(r),a[Pn.OUTPUT_VALUE]=new eh(r),a[Pn.NEXT_STATEMENT]=new eh(r),a[Pn.PREVIOUS_STATEMENT]=new eh(r),a}},wf=class{paste(r,a,f){if(!a.isCapacityAvailable(r.typeCounts))return null;f&&(r.blockState.x=f.x,r.blockState.y=f.y),t.disable$$module$build$src$core$events$utils();let S;try{S=Hn(r.blockState,a),rp(S)}finally{t.enable$$module$build$src$core$events$utils()}return S&&(se()&&!S.isShadow()&&ce(new(Re(t.CREATE$$module$build$src$core$events$utils))(S)),S.select(),S)}};wf.TYPE="block",pu(wf.TYPE,new wf);var ia=null,d_=null,m0={duplicateInternal:Da,copyInternal:Xl},nm={};nm.BlockPaster=wf,nm.TEST_ONLY=m0,nm.copy=Ed,nm.duplicate=fh,nm.paste=Rs,nm.registry=Hm;var Fv="aria-",fy="role",th;(function(r){r.GRID="grid",r.GRIDCELL="gridcell",r.GROUP="group",r.LISTBOX="listbox",r.MENU="menu",r.MENUITEM="menuitem",r.MENUITEMCHECKBOX="menuitemcheckbox",r.OPTION="option",r.PRESENTATION="presentation",r.ROW="row",r.TREE="tree",r.TREEITEM="treeitem"})(th||(th={}));var vo;(function(r){r.ACTIVEDESCENDANT="activedescendant",r.COLCOUNT="colcount",r.DISABLED="disabled",r.EXPANDED="expanded",r.INVALID="invalid",r.LABEL="label",r.LABELLEDBY="labelledby",r.LEVEL="level",r.ORIENTATION="orientation",r.POSINSET="posinset",r.ROWCOUNT="rowcount",r.SELECTED="selected",r.SETSIZE="setsize",r.VALUEMAX="valuemax",r.VALUEMIN="valuemin"})(vo||(vo={}));var Iu={};Iu.Role=th,Iu.State=vo,Iu.setRole=li,Iu.setState=Sr;var Eg=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(r){this.menuItems.push(r)}render(r){const a=document.createElement("div");a.className="blocklyMenu goog-menu blocklyNonSelectable",a.tabIndex=0,this.roleName&&li(a,this.roleName),this.element=a;for(let f=0,S;S=this.menuItems[f];f++)a.appendChild(S.createDom());return this.mouseOverHandler=Ae(a,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=Ae(a,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=Ae(a,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=Ae(a,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=Ae(a,"keydown",this,this.handleKeyEvent),r.appendChild(a),a}getElement(){return this.element}focus(){const r=this.getElement();r&&(r.focus({preventScroll:!0}),we(r,"blocklyFocused"))}blur(){const r=this.getElement();r&&(r.blur(),Tt(r,"blocklyFocused"))}setRole(r){this.roleName=r}dispose(){this.mouseOverHandler&&(nt(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(nt(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(nt(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(nt(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(nt(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let r=0,a;a=this.menuItems[r];r++)a.dispose();this.element=null}getMenuItem(r){const a=this.getElement();for(;r&&r!==a;){if(r.classList.contains("blocklyMenuItem")){for(let f=0,S;S=this.menuItems[f];f++)if(S.getElement()===r)return S}r=r.parentElement}return null}setHighlighted(r){var a=this.highlightedItem;a&&(a.setHighlighted(!1),this.highlightedItem=null),r&&(r.setHighlighted(!0),this.highlightedItem=r,a=this.getElement(),Si(r.getElement(),a),Sr(a,vo.ACTIVEDESCENDANT,r.getId()))}highlightNext(){const r=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(r,1)}highlightPrevious(){const r=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>r?this.menuItems.length:r,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(r,a){r+=a;let f;for(;f=this.menuItems[r];){if(f.isEnabled()){this.setHighlighted(f);break}r+=a}}handleMouseOver(r){(r=this.getMenuItem(r.target))&&(r.isEnabled()?this.highlightedItem!==r&&this.setHighlighted(r):this.setHighlighted(null))}handleClick(r){const a=this.openingCoords;if(this.openingCoords=null,a&&typeof r.clientX=="number"){const f=new mn(r.clientX,r.clientY);if(1>mn.distance(a,f))return}(r=this.getMenuItem(r.target))&&r.performAction()}handleMouseEnter(r){this.focus()}handleMouseLeave(r){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(r){if(this.menuItems.length&&!(r.shiftKey||r.ctrlKey||r.metaKey||r.altKey)){var a=this.highlightedItem;switch(r.key){case"Enter":case" ":a&&a.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}r.preventDefault(),r.stopPropagation()}}getSize(){const r=this.getElement(),a=Zt(r);return a.height=r.scrollHeight,a}},zp=class{constructor(r,a){this.content=r,this.opt_value=a,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const r=document.createElement("div");r.id=J(),this.element=r,r.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const a=document.createElement("div");if(a.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var f=document.createElement("div");f.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",a.appendChild(f)}return f=this.content,typeof this.content=="string"&&(f=document.createTextNode(this.content)),a.appendChild(f),r.appendChild(a),this.roleName&&li(r,this.roleName),Sr(r,vo.SELECTED,this.checkable&&this.checked||!1),Sr(r,vo.DISABLED,!this.enabled),r}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let r;return(r=this.opt_value)!=null?r:null}setRightToLeft(r){this.rightToLeft=r}setRole(r){this.roleName=r}setCheckable(r){this.checkable=r}setChecked(r){this.checked=r}setHighlighted(r){this.highlight=r;const a=this.getElement();a&&this.isEnabled()&&(r?(we(a,"blocklyMenuItemHighlight"),we(a,"goog-menuitem-highlight")):(Tt(a,"blocklyMenuItemHighlight"),Tt(a,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(r){this.enabled=r}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(r,a){this.actionHandler=r.bind(a)}},Kh=null,rm=null,Up="blocklyWidgetDiv",Hp="",$f="",md,pp={};pp.createDom=Po,pp.getDiv=io,pp.hide=Kl,pp.hideIfOwner=Hr,pp.isVisible=Lh,pp.positionWithAnchor=br,pp.repositionForWindowResize=ip,pp.show=Yl,pp.testOnly_setDiv=Na;var Vm=null,my={},xg=null,zd={};zd.callbackFactory=t.callbackFactory$$module$build$src$core$contextmenu,zd.commentDeleteOption=ql,zd.commentDuplicateOption=Nh,zd.dispose=Fs,zd.getCurrentBlock=sp,zd.hide=Jl,zd.setCurrentBlock=ud,zd.show=Uu,zd.workspaceCommentOption=Dc;var ki=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(r){if(this.registry_.has(r.id))throw Error('Menu item with ID "'+r.id+'" is already registered.');this.registry_.set(r.id,r)}unregister(r){if(!this.registry_.has(r))throw Error('Menu item with ID "'+r+'" not found.');this.registry_.delete(r)}getItem(r){let a;return(a=this.registry_.get(r))!=null?a:null}getContextMenuOptions(r,a){const f=[];for(const k of this.registry_.values())if(r===k.scopeType){var S=k.preconditionFn(a);S!=="hidden"&&(S={text:typeof k.displayText=="function"?k.displayText(a):k.displayText,enabled:S==="enabled",callback:k.callback,scope:a,weight:k.weight},f.push(S))}return f.sort(function(k,V){return k.weight-V.weight}),f}};(function(r){var a=r.ScopeType||(r.ScopeType={});a.BLOCK="block",a.WORKSPACE="workspace",r.registry=new r})(ki||(ki={})),ki.ScopeType;var im={};im.clamp=Br,im.toDegrees=ns,im.toRadians=Nc;var jm=16,wg=1,gy=12,Xm=16,Cf=.25,Ym=null,Gp=null,Wp="",sm="",bi,Vp,om,am=null,Mf=null,$g=null,y={getBoundsInfo:function(){const r=Rn(am),a=Zt(am);return{left:r.x,right:r.x+a.width,top:r.y,bottom:r.y+a.height,width:a.width,height:a.height}},getPositionMetrics:function(r,a,f,S){const k=y.getBoundsInfo(),V=Zt(bi);return a+V.height<k.bottom?Mn(r,a,k,V):S-V.height>k.top?Xn(f,S,k,V):a+V.height<document.documentElement.clientHeight?Mn(r,a,k,V):S-V.height>document.documentElement.clientTop?Xn(f,S,k,V):gn(r,k,V)}},T={ANIMATION_TIME:Cf,ARROW_HORIZONTAL_PADDING:gy,ARROW_SIZE:jm,BORDER_SIZE:wg,PADDING_Y:Xm,TEST_ONLY:y};T.clearContent=mh,T.createDom=xl,T.getContentDiv=Su,T.getOwner=Ql,T.getPositionX=Pr,T.hide=oo,T.hideIfOwner=vi,T.hideWithoutAnimation=il,T.isVisible=so,T.repositionForWindowResize=gs,T.setBoundsElement=Ba,T.setColour=xd,T.show=tn,T.showPositionedByBlock=di,T.showPositionedByField=ye;var R=null,F=null,X={};X.connectionUiEffect=ha,X.disconnectUiEffect=Xs,X.disconnectUiStop=Pa,X.disposeUiEffect=Eu;var ee=50,ve=100,Xe=class{constructor(r,a){this.bubble=r,this.workspace=a,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY()}startBubbleDrag(){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout&&this.bubble.setAutoLayout(!1);let r;(r=this.workspace.getLayerManager())==null||r.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(r,a){a=this.pixelsToWorkspaceUnits_(a),a=mn.sum(this.startXY_,a),this.bubble.moveDuringDrag(a),a=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(r),r=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),r!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==a&&(a&&a.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(r){return r&&this.workspace.getComponentManager().hasCapability(r.id,pl.Capability.DELETE_AREA)?r.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(r,a){if(this.dragBubble(r,a),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?r=this.startXY_:(r=this.pixelsToWorkspaceUnits_(a),r=mn.sum(this.startXY_,r)),this.bubble.moveTo(r.x,r.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_)this.fireMoveEvent_(),this.bubble.dispose();else{if(this.bubble.setDragging){this.bubble.setDragging(!1);let f;(f=this.workspace.getLayerManager())==null||f.moveOffDragLayer(this.bubble,ve)}this.fireMoveEvent_()}this.workspace.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}fireMoveEvent_(){if(this.bubble instanceof Bl){const r=new(Re(ya))(this.bubble);r.setOldCoordinate(this.startXY_),r.recordNew(),ce(r)}}pixelsToWorkspaceUnits_(r){return r=new mn(r.x/this.workspace.scale,r.y/this.workspace.scale),this.workspace.isMutator&&r.scale(1/this.workspace.options.parentWorkspace.scale),r}},at=30,Ot=!0,qt=[];qt[Pn.INPUT_VALUE]=Pn.OUTPUT_VALUE,qt[Pn.OUTPUT_VALUE]=Pn.INPUT_VALUE,qt[Pn.NEXT_STATEMENT]=Pn.PREVIOUS_STATEMENT,qt[Pn.PREVIOUS_STATEMENT]=Pn.NEXT_STATEMENT;var un="RENAME_VARIABLE_ID",sn="DELETE_VARIABLE_ID",Ln={};Ln.commonWordPrefix=cc,Ln.commonWordSuffix=qo,Ln.isNumber=t.isNumber$$module$build$src$core$utils$string,Ln.shortestStringLength=gh,Ln.startsWith=Bh,Ln.wrap=t.wrap$$module$build$src$core$utils$string;var Jn=void 0,nr=!1,Ao=!1,xt=50,ht=0,Et=0,bn=0,or=0,er=null,pr=null,kr=0,Pl=10,cs=10,jp=750,g0=5,Ru=null,Ud={HOVER_MS:jp,LIMIT:xt,MARGINS:g0,OFFSET_X:kr,OFFSET_Y:Pl,RADIUS_OK:cs};Ud.bindMouseEvents=Pi,Ud.block=$d,Ud.createDom=zh,Ud.dispose=wd,Ud.getCustomTooltip=Gu,Ud.getDiv=Qo,Ud.getTooltipOfObject=ao,Ud.hide=$l,Ud.isVisible=cd,Ud.setCustomTooltip=hc,Ud.unbindMouseEvents=hd,Ud.unblock=Uh;var W1=class{constructor(r){this.workspace=r,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new mn(r.scrollX,r.scrollY)}dispose(){this.workspace=null}startDrag(){O()&&O().unselect()}endDrag(r){this.drag(r)}drag(r){if(r=mn.sum(this.startScrollXY_,r),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(r.x,r.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(r.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,r.y);else throw new TypeError("Invalid state.")}},HE=5,GE=6,lm=class{constructor(r,a){this.creatorWorkspace=a,this.mouseDownXY=new mn(0,0),this.startWorkspace_=this.targetBlock=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.flyout=this.workspaceDragger=this.blockDragger=this.bubbleDragger=null,this.isMultiTouch_=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=r,this.currentDragDeltaXY=new mn(0,0),this.healStack=!Ot}dispose(){st(),Uh(),this.creatorWorkspace.clearGesture();for(const r of this.boundEvents)nt(r);this.boundEvents.length=0,this.blockDragger&&this.blockDragger.dispose(),this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(r){const a=new mn(r.clientX,r.clientY);this.updateDragDelta(a)&&(this.updateIsDragging(),it()),this.mostRecentEvent=r}updateDragDelta(r){return this.currentDragDeltaXY=mn.difference(r,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=mn.magnitude(this.currentDragDeltaXY)>(this.flyout?t.config$$module$build$src$core$config.flyoutDragRadius:t.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let r;if(!this.targetBlock||(r=this.flyout)==null||!r.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),this.targetBlock.select(),!0):!1}updateIsDraggingBubble(){return this.startBubble?(this.startDraggingBubble(),!0):!1}updateIsDraggingBlock(){if(!this.targetBlock)return!1;if(this.flyout){if(this.updateIsDraggingFromFlyout())return this.startDraggingBlock(),!0}else if(this.targetBlock.isMovable())return this.startDraggingBlock(),!0;return!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger=new W1(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(){if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.updateIsDraggingBubble()||this.updateIsDraggingBlock()||this.updateIsDraggingWorkspace()}startDraggingBlock(){this.blockDragger=new(v(Pt.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock,this.startWorkspace_),this.blockDragger.startDrag(this.currentDragDeltaXY,this.healStack),this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY)}startDraggingBubble(){if(!this.startBubble)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger=new Xe(this.startBubble,this.startWorkspace_),this.bubbleDragger.startBubbleDrag(),this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY)}doStart(r){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,tt(r)?this.cancel():(this.gestureHasStarted=!0,Pa(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=Ql(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=r,$d(),this.targetBlock&&this.targetBlock.select(),Dt(r)?this.handleRightClick(r):(r.type.toLowerCase()==="pointerdown"&&r.pointerType!=="mouse"&&Ne(r,this),this.mouseDownXY=new mn(r.clientX,r.clientY),this.healStack=r.altKey||r.ctrlKey||r.metaKey,this.bindMouseEvents(r),this.isEnding_||this.handleTouchStart(r)))}bindMouseEvents(r){this.boundEvents.push(Ae(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(Ae(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(Ae(document,"pointerup",null,this.handleUp.bind(this),!0)),r.preventDefault(),r.stopPropagation()}handleStart(r){this.isDragging()||(this.handleTouchStart(r),this.isMultiTouch()&&it())}handleMove(r){this.isDragging()&&pt(r)||!this.isMultiTouch()?(this.updateFromEvent(r),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.blockDragger?this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY):this.bubbleDragger&&this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY),r.preventDefault(),r.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(r),it())}handleUp(r){if(this.isDragging()||this.handleTouchEnd(r),!this.isMultiTouch()||this.isDragging()){if(!pt(r))return;if(this.updateFromEvent(r),it(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.bubbleDragger?this.bubbleDragger.endBubbleDrag(r,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(r,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()?this.doBubbleClick():this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(r)}r.preventDefault(),r.stopPropagation(),this.dispose()}handleTouchStart(r){var a=dt(r);this.cachedPoints.set(a,this.getTouchPoint(r));var f=Array.from(this.cachedPoints.keys());f.length===2&&(a=this.cachedPoints.get(f[0]),f=this.cachedPoints.get(f[1]),this.startDistance=mn.distance(a,f),this.isMultiTouch_=!0,r.preventDefault())}handleTouchMove(r){const a=dt(r);this.cachedPoints.set(a,this.getTouchPoint(r)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(r):this.handleMove(r)}handlePinch(r){var a=Array.from(this.cachedPoints.keys()),f=this.cachedPoints.get(a[0]);if(a=this.cachedPoints.get(a[1]),f=mn.distance(f,a)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(a=f-this.previousScale,a=0<a?a*HE:a*GE,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const S=this.startWorkspace_,k=Rt(r,S.getParentSvg(),S.getInverseScreenCTM());S.zoom(k.x,k.y,a)}this.previousScale=f,r.preventDefault()}handleTouchEnd(r){r=dt(r),this.cachedPoints.has(r)&&this.cachedPoints.delete(r),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(r){return this.startWorkspace_?new mn(r.pageX,r.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(it(),this.bubbleDragger?this.bubbleDragger.endBubbleDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(r){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(r)):this.startBubble?this.startBubble.showContextMenu(r):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(r)),r.preventDefault(),r.stopPropagation(),this.dispose()}handleWsStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(a),this.mostRecentEvent=r,this.doStart(r)}fireWorkspaceClick(r){ce(new(Re(ec))(null,r.id,"workspace"))}handleFlyoutStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(a),this.handleWsStart(r,a.getWorkspace())}handleBlockStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(a),this.mostRecentEvent=r}handleBubbleStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(a),this.mostRecentEvent=r}doBubbleClick(){this.startBubble instanceof Bl&&(this.startBubble.setFocus(),this.startBubble.select())}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock.isEnabled()&&(t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.flyout.createBlock(this.targetBlock).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const r=new(Re(ec))(this.startBlock,this.startWorkspace_.id,"block");ce(r)}this.bringBlockToFront(),t.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(r){r=this.creatorWorkspace,O()&&O().unselect(),this.fireWorkspaceClick(this.startWorkspace_||r)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(r){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=r)}setStartIcon(r){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=r)}setStartBubble(r){this.startBubble||(this.startBubble=r)}setStartBlock(r){this.startBlock||this.startBubble||(this.startBlock=r,r.isInFlyout&&r!==r.getRootBlock()?this.setTargetBlock(r.getRootBlock()):this.setTargetBlock(r))}setTargetBlock(r){r.isShadow()?this.setTargetBlock(r.getParent()):this.targetBlock=r}setStartWorkspace(r){this.startWorkspace_||(this.startWorkspace_=r)}setStartFlyout(r){this.flyout||(this.flyout=r)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const r=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&r}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}isDragging(){return!!this.workspaceDragger||!!this.blockDragger||!!this.bubbleDragger}hasStarted(){return this.gestureHasStarted}getInsertionMarkers(){return this.blockDragger?this.blockDragger.getInsertionMarkers():[]}getCurrentDragger(){let r,a;return(a=(r=this.blockDragger)!=null?r:this.workspaceDragger)!=null?a:this.bubbleDragger}static inProgress(){const r=E();for(let a=0,f;f=r[a];a++)if(f.currentGesture_)return!0;return!1}},zv=class{constructor(r,a){this.pattern=r,this.scale=1;let f;this.spacing=(f=a.spacing)!=null?f:0;let S;this.length=(S=a.length)!=null?S:1,this.line2=(this.line1=r.firstChild)&&this.line1.nextSibling;let k;this.snapToGrid=(k=a.snap)!=null?k:!1}setSpacing(r){this.spacing=r,this.update(this.scale)}setLength(r){this.length=r,this.update(this.scale)}setSnapToGrid(r){this.snapToGrid=r}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(r){this.scale=r;var a=this.spacing*r;this.pattern.setAttribute("width",`${a}`),this.pattern.setAttribute("height",`${a}`),a=Math.floor(this.spacing/2)+.5;let f=a-this.length/2,S=a+this.length/2;a*=r,f*=r,S*=r,this.setLineAttributes(this.line1,r,f,S,a,a),this.setLineAttributes(this.line2,r,a,a,f,S)}setLineAttributes(r,a,f,S,k,V){r&&(r.setAttribute("stroke-width",`${a}`),r.setAttribute("x1",`${f}`),r.setAttribute("y1",`${k}`),r.setAttribute("x2",`${S}`),r.setAttribute("y2",`${V}`))}moveTo(r,a){this.pattern.setAttribute("x",`${r}`),this.pattern.setAttribute("y",`${a}`)}static createDom(r,a,f){r=ie(We.PATTERN,{id:"blocklyGridPattern"+r,patternUnits:"userSpaceOnUse"},f);let S,k;if(0<((S=a.length)!=null?S:1)&&0<((k=a.spacing)!=null?k:0)){ie(We.LINE,{stroke:a.colour},r);let V;(V=a.length)!=null&&V&&ie(We.LINE,{stroke:a.colour},r)}else ie(We.LINE,{},r);return r}},xa=class{constructor(r){this.workspace=r,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(r,a){this.markers.has(r)&&this.unregisterMarker(r),a.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,a)),this.setMarkerSvg(a.getDrawer().createDom()),this.markers.set(r,a)}unregisterMarker(r){const a=this.markers.get(r);if(a)a.dispose(),this.markers.delete(r);else throw Error("Marker with ID "+r+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(r){return this.markers.get(r)||null}setCursor(r){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=r)&&(r=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(r),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(r){r?(this.workspace.getBlockCanvas().appendChild(r),this.cursorSvg_=r):this.cursorSvg_=null}setMarkerSvg(r){r?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(r,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(r)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const r=Object.keys(this.markers);for(let a=0,f;f=r[a];a++)this.unregisterMarker(f);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};xa.LOCAL_MARKER="local_marker_1";var V1={};V1.deepMerge=Cl;var Cg=class{constructor(r,a,f,S){this.name=r,this.startHats=!1,this.blockStyles=a||Object.create(null),this.categoryStyles=f||Object.create(null),this.componentStyles=S||Object.create(null),this.fontStyle=Object.create(null),i(Pt.THEME,r,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(r,a){this.blockStyles[r]=a}setCategoryStyle(r,a){this.categoryStyles[r]=a}getComponentStyle(r){if(r=this.componentStyles[r],!r)return null;if(typeof r=="string"){const a=this.getComponentStyle(r);if(a)return a}return`${r}`}setComponentStyle(r,a){this.componentStyles[r]=a}setFontStyle(r){this.fontStyle=r}setStartHats(r){this.startHats=r}static defineTheme(r,a){r=r.toLowerCase();const f=new Cg(r);let S=a.base;if(S){if(typeof S=="string"){let k;S=(k=p(Pt.THEME,S))!=null?k:void 0}S instanceof Cg&&(Cl(f,S),f.name=r)}return Cl(f.blockStyles,a.blockStyles),Cl(f.categoryStyles,a.categoryStyles),Cl(f.componentStyles,a.componentStyles),Cl(f.fontStyle,a.fontStyle),a.startHats!==null&&(f.startHats=a.startHats),f}},Hd={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},In={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},_y=new Cg("classic",Hd,In),zi=class{constructor(r){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let a=null,f=!1;var S=!1,k=!1,V=!1,_e=!1,ze=!1;const jt=!!r.readOnly;if(!jt){var Gn;a=gt((Gn=r.toolbox)!=null?Gn:null),f=Wt(a),S=r.trashcan,S=S===void 0?f:S,k=r.collapse,k=k===void 0?f:k,V=r.comments,V=V===void 0?f:V,_e=r.disable,_e=_e===void 0?f:_e,ze=r.sounds,ze=ze===void 0?!0:ze}Gn=r.maxTrashcanContents,S?Gn===void 0&&(Gn=32):Gn=0;const _l=!!r.rtl;let Ka=r.horizontalLayout;Ka===void 0&&(Ka=!1);var Of=r.toolboxPosition!=="end";Of=Ka?Of?dr.TOP:dr.BOTTOM:Of===_l?dr.RIGHT:dr.LEFT;let yT=r.css;yT===void 0&&(yT=!0);let vT="https://blockly-demo.appspot.com/static/media/";r.media?vT=r.media.endsWith("/")?r.media:r.media+"/":"path"in r&&(xe("path","Nov 2014","Jul 2023","media"),vT=r.path+"media/");const WF=r.oneBasedIndex,Cq=r.renderer||"geras",Mq=r.plugins||{};let pk=r.modalInputs;pk===void 0&&(pk=!0),this.RTL=_l,this.oneBasedIndex=WF===void 0?!0:WF,this.collapse=k,this.comments=V,this.disable=_e,this.readOnly=jt,this.maxBlocks=r.maxBlocks||1/0;let VF;this.maxInstances=(VF=r.maxInstances)!=null?VF:null,this.modalInputs=pk,this.pathToMedia=vT,this.hasCategories=f,this.moveOptions=zi.parseMoveOptions_(r,f),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=S,this.maxTrashcanContents=Gn,this.hasSounds=ze,this.hasCss=yT,this.horizontalLayout=Ka,this.languageTree=a,this.gridOptions=zi.parseGridOptions_(r),this.zoomOptions=zi.parseZoomOptions_(r),this.toolboxPosition=Of,this.theme=zi.parseThemeOptions_(r),this.renderer=Cq;let jF;this.rendererOverrides=(jF=r.rendererOverrides)!=null?jF:null;let XF;this.parentWorkspace=(XF=r.parentWorkspace)!=null?XF:null,this.plugins=Mq}static parseMoveOptions_(r,a){const f=r.move||{},S={};return f.scrollbars===void 0&&r.scrollbars===void 0?S.scrollbars=a:typeof f.scrollbars=="object"?(S.scrollbars={horizontal:!!f.scrollbars.horizontal,vertical:!!f.scrollbars.vertical},S.scrollbars.horizontal&&S.scrollbars.vertical?S.scrollbars=!0:S.scrollbars.horizontal||S.scrollbars.vertical||(S.scrollbars=!1)):S.scrollbars=!!f.scrollbars||!!r.scrollbars,S.wheel=S.scrollbars&&f.wheel!==void 0?!!f.wheel:typeof S.scrollbars=="object",S.drag=S.scrollbars?f.drag===void 0?!0:!!f.drag:!1,S}static parseZoomOptions_(r){r=r.zoom||{};const a={};return a.controls=r.controls===void 0?!1:!!r.controls,a.wheel=r.wheel===void 0?!1:!!r.wheel,a.startScale=r.startScale===void 0?1:Number(r.startScale),a.maxScale=r.maxScale===void 0?3:Number(r.maxScale),a.minScale=r.minScale===void 0?.3:Number(r.minScale),a.scaleSpeed=r.scaleSpeed===void 0?1.2:Number(r.scaleSpeed),a.pinch=r.pinch===void 0?a.wheel||a.controls:!!r.pinch,a}static parseGridOptions_(r){r=r.grid||{};const a={};return a.spacing=Number(r.spacing)||0,a.colour=r.colour||"#888",a.length=r.length===void 0?1:Number(r.length),a.snap=0<a.spacing&&!!r.snap,a}static parseThemeOptions_(r){return r=r.theme||_y,typeof r=="string"?p(Pt.THEME,r):r instanceof Cg?r:Cg.defineTheme(r.name||"builtin"+J(),r)}},Kr=class extends dp{constructor(r,a,f,S,k){super(r),this.type=t.CHANGE$$module$build$src$core$events$utils,r&&(this.element=a,this.name=f||void 0,this.oldValue=S,this.newValue=k)}toJson(){const r=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return r.element=this.element,r.name=this.name,r.oldValue=this.oldValue,r.newValue=this.newValue,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Kr),a.element=r.element,a.name=r.name,a.oldValue=r.oldValue,a.newValue=r.newValue,a}isNull(){return this.oldValue===this.newValue}run(r){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");var f=a.getIcon(Wo.MUTATOR);switch(f&&eu(f)&&f.bubbleIsVisible()&&f.setBubbleVisible(!1),r=r?this.newValue:this.oldValue,this.element){case"field":(a=a.getField(this.name))?a.setValue(r):console.warn("Can't set non-existent field: "+this.name);break;case"comment":a.setCommentText(r||null);break;case"collapsed":a.setCollapsed(!!r);break;case"disabled":a.setEnabled(!r);break;case"inline":a.setInputsInline(!!r);break;case"mutation":f=Kr.getExtraBlockState_(a),a.loadExtraState?a.loadExtraState(JSON.parse(r||"{}")):a.domToMutation&&a.domToMutation(t.textToDom$$module$build$src$core$utils$xml(r||"<mutation/>")),ce(new Kr(a,"mutation",null,f,r));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(r){return r.saveExtraState?(r=r.saveExtraState(!0))?JSON.stringify(r):"":r.mutationToDom&&(r=r.mutationToDom())?Ki(r):""}};i(Pt.EVENT,t.CHANGE$$module$build$src$core$events$utils,Kr);var Uv=.45,nh=.65,j1={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},fp={};fp.blend=zc,fp.getHsvSaturation=Vu,fp.getHsvValue=_h,fp.hexToRgb=Fc,fp.hsvToHex=Al,fp.hueToHex=dc,fp.names=j1,fp.parse=Zo,fp.rgbToHex=Ml,fp.setHsvSaturation=ju,fp.setHsvValue=sl;var p_={};p_.checkMessageReferences=ol,p_.parseBlockColour=Ji,p_.replaceMessageReferences=Gr,p_.tokenizeInterpolation=za;var Ui=class{constructor(r,a,f){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Qs(0,0),r!==Ui.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(r),a&&this.setValidator(a))}configure_(r){r.tooltip&&this.setTooltip(Gr(r.tooltip))}setSourceBlock(r){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=r}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=ie(We.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=ie(We.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=ie(We.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const r=this.getClickTarget_();if(!r)throw Error("A click target has not been set.");Pi(r),this.mouseDownWrapper_=Ae(r,"pointerdown",this,this.onMouseDown_)}fromXml(r){this.setValue(r.textContent)}toXml(r){return r.textContent=this.getValue(),r}saveState(r){return r=this.saveLegacyState(Ui),r!==null?r:this.getValue()}loadState(r){this.loadLegacyState(Ui,r)||this.setValue(r)}saveLegacyState(r){return r.prototype.saveState===this.saveState&&r.prototype.toXml!==this.toXml?(r=t.createElement$$module$build$src$core$utils$xml("field"),r.setAttribute("name",this.name||""),On(this.toXml(r)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(r,a){return r.prototype.loadState===this.loadState&&r.prototype.fromXml!==this.fromXml?(this.fromXml(t.textToDom$$module$build$src$core$utils$xml(a)),!0):!1}dispose(){vi(this),Hr(this);let r;(r=this.getSourceBlock())!=null&&r.isDeadOrDying()||ft(this.fieldGroup_),this.disposed=!0}updateEditable(){const r=this.fieldGroup_,a=this.getSourceBlock();this.EDITABLE&&r&&a&&(this.enabled_&&a.isEditable()?(we(r,"blocklyEditableText"),Tt(r,"blocklyNonEditableText"),r.style.cursor=this.CURSOR):(we(r,"blocklyNonEditableText"),Tt(r,"blocklyEditableText"),r.style.cursor=""))}setEnabled(r){this.enabled_=r,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Ui.prototype.showEditor_}isClickableInFlyout(r){return!r}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let r=!1;return this.name&&(this.SERIALIZABLE?r=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),r=!0)),r}isVisible(){return this.visible_}setVisible(r){if(this.visible_!==r){this.visible_=r;var a=this.fieldGroup_;a&&(a.style.display=r?"block":"none")}}setValidator(r){this.validator_=r}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(r){this.isClickable()&&this.showEditor_(r)}showEditor_(r){}repositionForWindowResize(){return!1}updateSize_(r){const a=this.getConstants();r=r!==void 0?r:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let f=2*r,S=a.FIELD_TEXT_HEIGHT,k=0;this.textElement_&&(k=Ye(this.textElement_,a.FIELD_TEXT_FONTSIZE,a.FIELD_TEXT_FONTWEIGHT,a.FIELD_TEXT_FONTFAMILY),f+=k),this.isFullBlockField()||(S=Math.max(S,a.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=S,this.size_.width=f,this.positionTextElement_(r,k),this.positionBorderRect_()}positionTextElement_(r,a){if(this.textElement_){var f=this.getConstants(),S=this.size_.height/2,k;this.textElement_.setAttribute("x",String((k=this.getSourceBlock())!=null&&k.RTL?this.size_.width-a-r:r)),this.textElement_.setAttribute("y",String(f.FIELD_TEXT_BASELINE_CENTER?S:S-f.FIELD_TEXT_HEIGHT/2+f.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Qs(0,0)}getScaledBBox(){let r;var a=this.getSourceBlock();if(!a)throw new Io;if(this.isFullBlockField()){var f=this.sourceBlock_.getHeightWidth();const S=a.workspace.scale;r=this.getAbsoluteXY_(),a=(f.width+1)*S,f=(f.height+1)*S,Sn?(r.x+=1.5*S,r.y+=1.5*S):(r.x-=.5*S,r.y-=.5*S)}else f=this.borderRect_.getBoundingClientRect(),r=Rn(this.borderRect_),a=f.width,f=f.height;return new Ri(r.y,r.y+f,r.x,r.x+a)}onLocationChange(r){}getDisplayText_(){let r=this.getText();return r?(r.length>this.maxDisplayLength&&(r=r.substring(0,this.maxDisplayLength-2)+"…"),r=r.replace(/\s/g,Ui.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(r+="‏"),r):Ui.NBSP}getText(){const r=this.getText_();return String(r!==null?r:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.queueRender(),this.sourceBlock_.bumpNeighbours())}setValue(r,a=!0){if(r!==null){var f=this.doClassValidation_(r);if(r=this.processValidation_(r,f),!(r instanceof Error)){var S;f=(S=this.getValidator())==null?void 0:S.call(this,r),S=this.processValidation_(r,f),S instanceof Error||(r=this.sourceBlock_,r&&r.disposed||(f=this.getValue(),f===S?this.doValueUpdate_(S):(this.doValueUpdate_(S),a&&r&&se()&&ce(new(Re(t.CHANGE$$module$build$src$core$events$utils))(r,"field",this.name||null,f,S)),this.isDirty_&&this.forceRerender())))}}}processValidation_(r,a){return a===null?(this.doValueInvalid_(r),this.isDirty_&&this.forceRerender(),Error()):a===void 0?r:a}getValue(){return this.value_}doClassValidation_(r){return r??null}doValueUpdate_(r){this.value_=r,this.isDirty_=!0}doValueInvalid_(r){}onMouseDown_(r){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(r=this.sourceBlock_.workspace.getGesture(r))&&r.setStartField(this)}setTooltip(r){r||r===""||(r=this.sourceBlock_);const a=this.getClickTarget_();a?a.tooltip=r:this.tooltip_=r}getTooltip(){const r=this.getClickTarget_();return ao(r||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Rn(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let r=null;const a=this.getSourceBlock();if(!a)throw new Io;const f=a.inputList;for(let S=0;S<a.inputList.length;S++){const k=f[S],V=k.fieldRow;for(let _e=0;_e<V.length;_e++)if(V[_e]===this){r=k;break}}return r}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(r){return!1}setCursorSvg(r){if(r){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(r),this.cursorSvg_=r}else this.cursorSvg_=null}setMarkerSvg(r){if(r){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(r),this.markerSvg_=r}else this.markerSvg_=null}updateMarkers_(){var r=this.getSourceBlock();if(!r)throw new Io;r=r.workspace,r.keyboardAccessibilityMode&&this.cursorSvg_&&r.getCursor().draw(),r.keyboardAccessibilityMode&&this.markerSvg_&&r.getMarker(xa.LOCAL_MARKER).draw()}};Ui.NBSP=" ",Ui.SKIP_SETUP=Symbol("SKIP_SETUP");var Io=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}};t.Names$$module$build$src$core$names=class{constructor(r,a){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=a||"",this.reservedWords=new Set(r?r.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(r){this.variableMap=r}getNameForUserVariable(r){return this.variableMap?(r=this.variableMap.getVariableById(r))?r.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(r){r=t.allUsedVarModels$$module$build$src$core$variables(r);for(let a=0;a<r.length;a++)this.getName(r[a].getId(),t.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(r){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(r,a){let f=r;a===t.NameType$$module$build$src$core$names.VARIABLE&&(r=this.getNameForUserVariable(r))&&(f=r),r=f.toLowerCase();const S=a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(a)||this.db.set(a,new Map);const k=this.db.get(a);return k.has(r)?S+k.get(r):(a=this.getDistinctName(f,a),k.set(r,a.substr(S.length)),a)}getUserNames(r){let a;return(r=(a=this.db.get(r))==null?void 0:a.keys())?Array.from(r):[]}getDistinctName(r,a){r=this.safeName(r);let f=null,S,k;for(;this.dbReverse.has(r+((S=f)!=null?S:""))||this.reservedWords.has(r+((k=f)!=null?k:""));)f=f?f+1:2;let V;return r+=(V=f)!=null?V:"",this.dbReverse.add(r),(a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+r}safeName(r){return r?(r=encodeURI(r.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(r[0])!==-1&&(r="my_"+r)):r=t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",r}static equals(r,a){return r.toLowerCase()===a.toLowerCase()}},function(r){r=r.NameType||(r.NameType={}),r.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",r.VARIABLE="VARIABLE",r.PROCEDURE="PROCEDURE"}(t.Names$$module$build$src$core$names||(t.Names$$module$build$src$core$names={})),t.NameType$$module$build$src$core$names=t.Names$$module$build$src$core$names.NameType,t.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,t.NameType$$module$build$src$core$names,t.Names$$module$build$src$core$names;var _0=class extends Map{constructor(){super()}set(r,a){return this.get(r)===a?this:(super.set(r,a),Y(a)&&a.startPublishing(),this)}delete(r){const a=this.get(r);return r=super.delete(r),r&&(Y(a)&&a.stopPublishing(),r)}clear(){if(this.size)for(const r of this.keys())this.delete(r)}add(r){return this.set(r.getId(),r)}getProcedures(){return[...this.values()]}},yy=class{constructor(r){this.sourceBlock=r,this.offsetInBlock=new mn(0,0),this.workspaceLocation=new mn(0,0),this.svgRoot=null,this.tooltip=r}getType(){throw Error("Icons must implement getType")}initView(r){if(!this.svgRoot){var a=this.sourceBlock;this.svgRoot=ie(We.G,{class:"blocklyIconGroup"}),a.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),Ae(this.svgRoot,"pointerdown",this,r),this.svgRoot.tooltip=this,Pi(this.svgRoot)}}dispose(){hd(this.svgRoot),ft(this.svgRoot)}getWeight(){return-1}getSize(){return new Qs(0,0)}setTooltip(r){this.tooltip=r??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",eu(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(r){this.offsetInBlock=r,this.updateSvgRootOffset()}updateSvgRootOffset(){let r;(r=this.svgRoot)==null||r.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(r){this.workspaceLocation=mn.sum(r,this.offsetInBlock)}onClick(){}isClickableInFlyout(r){return!0}setVisible(r){xe("setVisible","v10","v11","setBubbleVisible"),eu(this)&&this.setBubbleVisible(r)}},Ec={fromJsonInternal:$r},y0={TEST_ONLY:Ec};y0.fromJson=t.fromJson$$module$build$src$core$field_registry,y0.register=Es,y0.unregister=pa;var xh=class extends Ui{constructor(r,a,f){super(Ui.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,r!==Ui.SKIP_SETUP&&(Array.isArray(r)?(al(r),r=pn(r),this.menuGenerator_=r.options,this.prefixField=r.prefix||null,this.suffixField=r.suffix||null):this.menuGenerator_=r,this.selectedOption=this.getOptions(!1)[0],f&&this.configure_(f),this.setValue(this.selectedOption[1]),a&&this.setValidator(a))}fromXml(r){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(r.textContent)}loadState(r){this.loadLegacyState(xh,r)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(r))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=ie(We.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&we(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let r;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((r=this.getSourceBlock())!=null&&r.isShadow())}createTextArrow_(){this.arrow=ie(We.TSPAN,{},this.textElement_);let r;this.arrow.appendChild(document.createTextNode((r=this.getSourceBlock())!=null&&r.RTL?xh.ARROW_CHAR+" ":" "+xh.ARROW_CHAR));let a;(a=this.getSourceBlock())!=null&&a.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=ie(We.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(qs,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(r){var a=this.getSourceBlock();if(!a)throw new Io;this.dropdownCreate(),this.menu_.openingCoords=r&&typeof r.clientX=="number"?new mn(r.clientX,r.clientY):null,mh(),r=this.menu_.render(Su()),we(r,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(a=a.getColour(),xd(a,this.sourceBlock_.style.colourTertiary)),ye(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),Si(this.selectedMenuItem.getElement(),Su(),!0)),this.applyColour()}dropdownCreate(){const r=this.getSourceBlock();if(!r)throw new Io;const a=new Eg;a.setRole(th.LISTBOX),this.menu_=a;const f=this.getOptions(!1);this.selectedMenuItem=null;for(let k=0;k<f.length;k++){const[V,_e]=f[k];if(typeof V=="object"){var S=new Image(V.width,V.height);S.src=V.src,S.alt=V.alt||""}else S=V;S=new zp(S,_e),S.setRole(th.OPTION),S.setRightToLeft(r.RTL),S.setCheckable(!0),a.addChild(S),S.setChecked(_e===this.value_),_e===this.value_&&(this.selectedMenuItem=S),S.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(r){vi(this,!0),this.onItemSelected_(this.menu_,r)}onItemSelected_(r,a){this.setValue(a.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(r){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:r&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),al(this.generatedOptions),this.generatedOptions)}doClassValidation_(r){return this.getOptions(!0).some(a=>a[1]===r)?r:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+r),null)}doValueUpdate_(r){super.doValueUpdate_(r),r=this.getOptions(!0);for(let a=0,f;f=r[a];a++)f[1]===this.value_&&(this.selectedOption=f)}applyColour(){const r=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",r.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",r.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=r.colourSecondary:this.arrow.style.fill=r.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const r=this.selectedOption&&this.selectedOption[0];r&&typeof r=="object"?this.renderSelectedImage(r):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(r){const a=this.getSourceBlock();if(!a)throw new Io;this.imageElement.style.display="",this.imageElement.setAttributeNS(qs,"xlink:href",r.src),this.imageElement.setAttribute("height",String(r.height)),this.imageElement.setAttribute("width",String(r.width));const f=Number(r.height);r=Number(r.width);var S=!!this.borderRect_;const k=Math.max(S?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,f+ci);S=S?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let V;V=this.svgArrow?this.positionSVGArrow(r+S,k/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Ye(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=r+V+2*S,this.size_.height=k;let _e=0;a.RTL?this.imageElement.setAttribute("x",`${S+V}`):(_e=r+V,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${S}`)),this.imageElement.setAttribute("y",String(k/2-f/2)),this.positionTextElement_(_e+S,r+V)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var r=this.getTextElement();we(r,"blocklyDropdownText"),r.setAttribute("text-anchor","start");var a=!!this.borderRect_;r=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const f=Ye(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let S=0;this.svgArrow&&(S=this.positionSVGArrow(f+a,r/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=f+S+2*a,this.size_.height=r,this.positionTextElement_(a,f)}positionSVGArrow(r,a){if(!this.svgArrow)return 0;const f=this.getSourceBlock();if(!f)throw new Io;const S=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,k=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,V=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(f.RTL?S:r+k)+","+a+")"),V+k}getText_(){if(!this.selectedOption)return null;const r=this.selectedOption[0];return typeof r=="object"?r.alt:r}static fromJson(r){if(!r.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(r.options,void 0,r)}};xh.CHECKMARK_OVERHANG=25,xh.MAX_MENU_HEIGHT_VH=.45,xh.ARROW_CHAR="▾";var ni=5,ci=2*ni;Es("field_dropdown",xh);var Jh,Cs=class{constructor(r,a,f){this.workspace=r,this.anchor=a,this.ownerRect=f,this.size=new Qs(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.svgRoot=ie(We.G,{},r.getBubbleCanvas()),r=ie(We.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=ie(We.PATH,{},r),this.background=ie(We.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Jh.BORDER_WIDTH,ry:Jh.BORDER_WIDTH},r),this.contentContainer=ie(We.G,{},this.svgRoot),Ae(this.background,"pointerdown",this,this.onMouseDown)}dispose(){ft(this.svgRoot),this.disposed=!0}setAnchorLocation(r,a=!1){this.anchor=r,a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(r,a){this.relativeLeft=r,this.relativeTop=a,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(r,a=!1){r.width=Math.max(r.width,Jh.MIN_SIZE),r.height=Math.max(r.height,Jh.MIN_SIZE),this.size=r,this.background.setAttribute("width",`${r.width}`),this.background.setAttribute("height",`${r.height}`),a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(r){this.colour=r,this.tail.setAttribute("fill",r),this.background.setAttribute("fill",r)}onMouseDown(r){let a;(a=this.workspace.getGesture(r))==null||a.handleBubbleStart(r,this)}positionRelativeToAnchor(){let r=this.anchor.x;r=this.workspace.RTL?r-(this.relativeLeft+this.size.width):r+this.relativeLeft,this.moveTo(r,this.relativeTop+this.anchor.y)}moveTo(r,a){this.svgRoot.setAttribute("transform",`translate(${r}, ${a})`)}positionByRect(r=new Ri(0,0,0,0)){var a=this.workspace.getMetricsManager().getViewMetrics(!0),f=this.getOptimalRelativeLeft(a),S=this.getOptimalRelativeTop(a);const k={x:f,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},V={x:-this.size.width-30,y:S};S={x:r.getWidth(),y:S};var _e={x:f,y:r.getHeight()};f=r.getWidth()<r.getHeight()?S:_e,r=r.getWidth()<r.getHeight()?_e:S,S=this.getOverlap(k,a),_e=this.getOverlap(V,a);const ze=this.getOverlap(f,a);a=this.getOverlap(r,a),a=Math.max(S,_e,ze,a),S===a?(this.relativeLeft=k.x,this.relativeTop=k.y):_e===a?(this.relativeLeft=V.x,this.relativeTop=V.y):ze===a?(this.relativeLeft=f.x,this.relativeTop=f.y):(this.relativeLeft=r.x,this.relativeTop=r.y),this.positionRelativeToAnchor()}getOverlap(r,a){var f=this.workspace.RTL?this.anchor.x-r.x-this.size.width:r.x+this.anchor.x;return r=r.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(f+this.size.width,a.left+a.width)-Math.max(f,a.left))*(Math.min(r+this.size.height,a.top+a.height)-Math.max(r,a.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(r){let a=-this.size.width/4;if(this.size.width>r.width)return a;if(r=this.getWorkspaceViewRect(r),this.workspace.RTL){var f=this.anchor.x-a;f-this.size.width<r.left?a=-(r.left-this.anchor.x+this.size.width):f>r.right&&(a=-(r.right-this.anchor.x))}else{f=a+this.anchor.x;const S=f+this.size.width;f<r.left?a=r.left-this.anchor.x:S>r.right&&(a=r.right-this.anchor.x-this.size.width)}return a}getOptimalRelativeTop(r){let a=-this.size.height/4;if(this.size.height>r.height)return a;const f=this.anchor.y+a,S=f+this.size.height;return r=this.getWorkspaceViewRect(r),f<r.top?a=r.top-this.anchor.y:S>r.bottom&&(a=r.bottom-this.anchor.y-this.size.height),a}getWorkspaceViewRect(r){const a=r.top;let f=r.top+r.height,S=r.left;return r=r.left+r.width,f-=this.getScrollbarThickness(),this.workspace.RTL?S-=this.getScrollbarThickness():r-=this.getScrollbarThickness(),new Ri(a,f,S,r)}getScrollbarThickness(){return Sa.scrollbarThickness/this.workspace.scale}renderTail(){const r=[];var a=this.size.width/2,f=this.size.height/2,S=-this.relativeLeft,k=-this.relativeTop;if(a===S&&f===k)r.push("M "+a+","+f);else{k-=f,S-=a,this.workspace.RTL&&(S*=-1);var V=Math.sqrt(k*k+S*S),_e=Math.acos(S/V);0>k&&(_e=2*Math.PI-_e);var ze=_e+Math.PI/2;ze>2*Math.PI&&(ze-=2*Math.PI);var jt=Math.sin(ze);const _l=Math.cos(ze);let Ka=(this.size.width+this.size.height)/Jh.TAIL_THICKNESS;Ka=Math.min(Ka,this.size.width,this.size.height)/4,ze=1-Jh.ANCHOR_RADIUS/V,S=a+ze*S,k=f+ze*k,ze=a+Ka*_l;const Of=f+Ka*jt;a-=Ka*_l,f-=Ka*jt,jt=Nc(this.workspace.RTL?-Jh.TAIL_ANGLE:Jh.TAIL_ANGLE),jt=_e+jt,jt>2*Math.PI&&(jt-=2*Math.PI),_e=Math.sin(jt)*V/Jh.TAIL_BEND,V=Math.cos(jt)*V/Jh.TAIL_BEND,r.push("M"+ze+","+Of),r.push("C"+(ze+V)+","+(Of+_e)+" "+S+","+k+" "+S+","+k),r.push("C"+S+","+k+" "+(a+V)+","+(f+_e)+" "+a+","+f)}r.push("z");let Gn;(Gn=this.tail)==null||Gn.setAttribute("d",r.join(" "))}bringToFront(){let r;const a=(r=this.svgRoot)==null?void 0:r.parentNode;return this.svgRoot&&(a==null?void 0:a.lastChild)!==this.svgRoot?(a==null||a.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new mn(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(r){this.moveTo(r.x,r.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-r.x-this.size.width:r.x-this.anchor.x,this.relativeTop=r.y-this.anchor.y,this.renderTail()}setDragging(r){}setDeleteStyle(r){}isDeletable(){return!1}showContextMenu(r){}};Jh=Cs,Cs.BORDER_WIDTH=6,Cs.DOUBLE_BORDER=2*Jh.BORDER_WIDTH,Cs.MIN_SIZE=Jh.DOUBLE_BORDER,Cs.TAIL_THICKNESS=1,Cs.TAIL_ANGLE=20,Cs.TAIL_BEND=4,Cs.ANCHOR_RADIUS=8;var um=class extends Cs{constructor(r,a,f,S){super(a,f,S),this.workspace=a,this.anchor=f,this.ownerRect=S,this.autoLayout=!0,a=new zi(r),this.validateWorkspaceOptions(a),this.svgDialog=ie(We.SVG,{x:Cs.BORDER_WIDTH,y:Cs.BORDER_WIDTH},this.contentContainer),r.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new zi(r)),this.miniWorkspace.internalIsMutator=!0,r=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(r),a.languageTree&&(r.insertBefore(this.miniWorkspace.addFlyout(We.G),this.miniWorkspace.getCanvas()),r=this.miniWorkspace.getFlyout(),r==null||r.init(this.miniWorkspace),r==null||r.show(a.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let k,V;(k=this.miniWorkspace.getFlyout())==null||(V=k.getWorkspace())==null||V.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(r){this.miniWorkspace.addChangeListener(r)}validateWorkspaceOptions(r){if(r.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(r.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(r.zoomOptions.controls||r.zoomOptions.wheel||r.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(r.moveOptions.scrollbars||r.moveOptions.wheel||r.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(r.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const r of this.miniWorkspace.getTopBlocks(!1)){const a=r.getRelativeToSurfaceXY();if(20>a.y&&r.moveBy(0,20-a.y),r.RTL){let f=-20;const S=this.miniWorkspace.getFlyout();S&&(f-=S.getWidth()),a.x>f&&r.moveBy(f-a.x,0)}else 20>a.x&&r.moveBy(20-a.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var r=this.getSize(),a=this.calculateWorkspaceSize();Math.abs(r.width-a.width)<um.MINIMUM_VIEW_CHANGE&&Math.abs(r.height-a.height)<um.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${a.width}px`),this.svgDialog.setAttribute("height",`${a.height}px`),this.miniWorkspace.setCachedParentSvgSize(a.width,a.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${a.width}, 0)`),this.setSize(new Qs(a.width+Cs.DOUBLE_BORDER,a.height+Cs.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var r=this.miniWorkspace.getCanvas().getBBox();let a=r.width+um.MARGIN;r=r.height+um.MARGIN;const f=this.miniWorkspace.getFlyout();if(f){const S=f.getWorkspace().getMetricsManager().getScrollMetrics();r=Math.max(r,S.height+20),a+=f.getWidth()}return new Qs(a,r)}updateBlockStyles(){for(var r of this.miniWorkspace.getAllBlocks(!1))r.setStyle(r.getStyleName());let a;if(r=(a=this.miniWorkspace.getFlyout())==null?void 0:a.getWorkspace())for(const f of r.getAllBlocks(!1))f.setStyle(f.getStyleName())}moveDuringDrag(r){super.moveDuringDrag(r),this.autoLayout=!1}moveTo(r,a){super.moveTo(r,a),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(r){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};um.MINIMUM_VIEW_CHANGE=10,um.MARGIN=3*Cs.DOUBLE_BORDER;var vy,by;vy=17,by=16,t.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends yy{constructor(r,a){super(a),this.flyoutBlockTypes=r,this.sourceBlock=a,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(r){this.svgRoot||(super.initView(r),ie(We.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),ie(We.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),ie(We.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),we(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let r;(r=this.miniWorkspaceBubble)==null||r.dispose()}getWeight(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new Qs(vy,vy)}applyColour(){super.applyColour();let r;(r=this.miniWorkspaceBubble)==null||r.setColour(this.sourceBlock.style.colourPrimary);let a;(a=this.miniWorkspaceBubble)==null||a.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(r){super.onLocationChange(r);let a;(a=this.miniWorkspaceBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(r){if(this.bubbleIsVisible()!==r){if(r){this.miniWorkspaceBubble=new um(this.getMiniWorkspaceConfig(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour(),this.createRootBlock(),this.addSaveConnectionsListener();let a;(a=this.miniWorkspaceBubble)==null||a.addWorkspaceChangeListener(this.createMiniWorkspaceChangeListener())}else{let a;(a=this.miniWorkspaceBubble)==null||a.dispose(),this.miniWorkspaceBubble=null,this.saveConnectionsListener&&this.sourceBlock.workspace.removeChangeListener(this.saveConnectionsListener),this.saveConnectionsListener=null}ce(new(Re(go))(this.sourceBlock,r,"mutator"))}}getMiniWorkspaceConfig(){let r;const a={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(r=this.sourceBlock.workspace.options.rendererOverrides)!=null?r:void 0};return this.flyoutBlockTypes.length&&(a.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(f=>({kind:"block",type:f}))}),a}getAnchorLocation(){const r=vy/2;return mn.sum(this.workspaceLocation,new mn(r,r))}getBubbleOwnerRect(){const r=this.sourceBlock.getSvgRoot().getBBox();return new Ri(r.y,r.y+r.height,r.x,r.x+r.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var r of this.rootBlock.getDescendants(!1))r.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let a,f,S,k;r=(k=(a=this.miniWorkspaceBubble)==null||(f=a.getWorkspace())==null||(S=f.getFlyout())==null?void 0:S.getWidth())!=null?k:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(r+by):by,by)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return r=>{t.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(r)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(r){return r.isUiEvent||r.type===t.CREATE$$module$build$src$core$events$utils||r.type===t.CHANGE$$module$build$src$core$events$utils&&r.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var r=t.getGroup$$module$build$src$core$events$utils();r||t.setGroup$$module$build$src$core$events$utils(!0);var a=Kr.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var f=Kr.getExtraBlockState_(this.sourceBlock);a!==f&&ce(new(Re(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"mutation",null,a,f)),t.setGroup$$module$build$src$core$events$utils(r)}}getWorkspace(){let r;return(r=this.miniWorkspaceBubble)==null?void 0:r.getWorkspace()}static reconnect(r,a,f){return xe("MutatorIcon.reconnect","v10","v11","connection.reconnect"),r?r.reconnect(a,f):!1}static findParentWs(r){return xe("MutatorIcon.findParentWs","v10","v11","workspace.getRootWorkspace"),r.getRootWorkspace()}},t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=Wo.MUTATOR,t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,t.MutatorIcon$$module$build$src$core$icons$mutator_icon;var v0=Object.create(null),WE={allExtensions:v0};t.register$$module$build$src$core$extensions("parent_tooltip_when_inline",Us);var Gd={TEST_ONLY:WE};Gd.apply=qi,Gd.buildTooltipForDropdown=t.buildTooltipForDropdown$$module$build$src$core$extensions,Gd.buildTooltipWithFieldText=t.buildTooltipWithFieldText$$module$build$src$core$extensions,Gd.isRegistered=ui,Gd.register=t.register$$module$build$src$core$extensions,Gd.registerMixin=t.registerMixin$$module$build$src$core$extensions,Gd.registerMutator=t.registerMutator$$module$build$src$core$extensions,Gd.runAfterPageLoad=Ad,Gd.unregister=Ai;var zr;(function(r){r[r.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",r[r.MAC_ENTER=3]="MAC_ENTER",r[r.BACKSPACE=8]="BACKSPACE",r[r.TAB=9]="TAB",r[r.NUM_CENTER=12]="NUM_CENTER",r[r.ENTER=13]="ENTER",r[r.SHIFT=16]="SHIFT",r[r.CTRL=17]="CTRL",r[r.ALT=18]="ALT",r[r.PAUSE=19]="PAUSE",r[r.CAPS_LOCK=20]="CAPS_LOCK",r[r.ESC=27]="ESC",r[r.SPACE=32]="SPACE",r[r.PAGE_UP=33]="PAGE_UP",r[r.PAGE_DOWN=34]="PAGE_DOWN",r[r.END=35]="END",r[r.HOME=36]="HOME",r[r.LEFT=37]="LEFT",r[r.UP=38]="UP",r[r.RIGHT=39]="RIGHT",r[r.DOWN=40]="DOWN",r[r.PLUS_SIGN=43]="PLUS_SIGN",r[r.PRINT_SCREEN=44]="PRINT_SCREEN",r[r.INSERT=45]="INSERT",r[r.DELETE=46]="DELETE",r[r.ZERO=48]="ZERO",r[r.ONE=49]="ONE",r[r.TWO=50]="TWO",r[r.THREE=51]="THREE",r[r.FOUR=52]="FOUR",r[r.FIVE=53]="FIVE",r[r.SIX=54]="SIX",r[r.SEVEN=55]="SEVEN",r[r.EIGHT=56]="EIGHT",r[r.NINE=57]="NINE",r[r.FF_SEMICOLON=59]="FF_SEMICOLON",r[r.FF_EQUALS=61]="FF_EQUALS",r[r.FF_DASH=173]="FF_DASH",r[r.FF_HASH=163]="FF_HASH",r[r.QUESTION_MARK=63]="QUESTION_MARK",r[r.AT_SIGN=64]="AT_SIGN",r[r.A=65]="A",r[r.B=66]="B",r[r.C=67]="C",r[r.D=68]="D",r[r.E=69]="E",r[r.F=70]="F",r[r.G=71]="G",r[r.H=72]="H",r[r.I=73]="I",r[r.J=74]="J",r[r.K=75]="K",r[r.L=76]="L",r[r.M=77]="M",r[r.N=78]="N",r[r.O=79]="O",r[r.P=80]="P",r[r.Q=81]="Q",r[r.R=82]="R",r[r.S=83]="S",r[r.T=84]="T",r[r.U=85]="U",r[r.V=86]="V",r[r.W=87]="W",r[r.X=88]="X",r[r.Y=89]="Y",r[r.Z=90]="Z",r[r.META=91]="META",r[r.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",r[r.CONTEXT_MENU=93]="CONTEXT_MENU",r[r.NUM_ZERO=96]="NUM_ZERO",r[r.NUM_ONE=97]="NUM_ONE",r[r.NUM_TWO=98]="NUM_TWO",r[r.NUM_THREE=99]="NUM_THREE",r[r.NUM_FOUR=100]="NUM_FOUR",r[r.NUM_FIVE=101]="NUM_FIVE",r[r.NUM_SIX=102]="NUM_SIX",r[r.NUM_SEVEN=103]="NUM_SEVEN",r[r.NUM_EIGHT=104]="NUM_EIGHT",r[r.NUM_NINE=105]="NUM_NINE",r[r.NUM_MULTIPLY=106]="NUM_MULTIPLY",r[r.NUM_PLUS=107]="NUM_PLUS",r[r.NUM_MINUS=109]="NUM_MINUS",r[r.NUM_PERIOD=110]="NUM_PERIOD",r[r.NUM_DIVISION=111]="NUM_DIVISION",r[r.F1=112]="F1",r[r.F2=113]="F2",r[r.F3=114]="F3",r[r.F4=115]="F4",r[r.F5=116]="F5",r[r.F6=117]="F6",r[r.F7=118]="F7",r[r.F8=119]="F8",r[r.F9=120]="F9",r[r.F10=121]="F10",r[r.F11=122]="F11",r[r.F12=123]="F12",r[r.NUMLOCK=144]="NUMLOCK",r[r.SCROLL_LOCK=145]="SCROLL_LOCK",r[r.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",r[r.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",r[r.SEMICOLON=186]="SEMICOLON",r[r.DASH=189]="DASH",r[r.EQUALS=187]="EQUALS",r[r.COMMA=188]="COMMA",r[r.PERIOD=190]="PERIOD",r[r.SLASH=191]="SLASH",r[r.APOSTROPHE=192]="APOSTROPHE",r[r.TILDE=192]="TILDE",r[r.SINGLE_QUOTE=222]="SINGLE_QUOTE",r[r.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",r[r.BACKSLASH=220]="BACKSLASH",r[r.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",r[r.WIN_KEY=224]="WIN_KEY",r[r.MAC_FF_META=224]="MAC_FF_META",r[r.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",r[r.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",r[r.WIN_IME=229]="WIN_IME",r[r.VK_NONAME=252]="VK_NONAME",r[r.PHANTOM=255]="PHANTOM"})(zr||(zr={}));var Wd={};Wd.arc=pi,Wd.curve=Hs,Wd.line=Fo,Wd.lineOnAxis=En,Wd.lineTo=tu,Wd.moveBy=Fi,Wd.moveTo=Ys,Wd.point=jn;var Ya={};Ya.Coordinate=mn,Ya.KeyCodes=zr,Ya.Rect=Ri,Ya.Size=Qs,Ya.Svg=We,Ya.aria=Iu,Ya.array=jf,Ya.browserEvents=Jc,Ya.colour=fp,Ya.deprecation=yg,Ya.dom=Ta,Ya.extensions=Gd,Ya.idGenerator=Zu,Ya.math=im,Ya.object=V1,Ya.parsing=p_,Ya.string=Ln,Ya.style=Tc,Ya.svgMath=vf,Ya.svgPaths=Wd,Ya.toolbox=_o,Ya.userAgent=lp,Ya.xml=Od;var f_={};f_.register=fi,f_.unregister=Dp;var cm=class extends Cs{constructor(r,a,f,S){super(a,f,S),this.text=r,this.workspace=a,this.anchor=f,this.ownerRect=S,this.paragraph=this.stringToSvg(r,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(r){this.text=r,ft(this.paragraph),this.paragraph=this.stringToSvg(r,this.contentContainer),this.updateBubbleSize()}stringToSvg(r,a){return a=this.createParagraph(a),r=this.createSpans(a,r),this.workspace.RTL&&this.rightAlignSpans(a.getBBox().width,r),a}createParagraph(r){return ie(We.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Cs.BORDER_WIDTH},r)}createSpans(r,a){return a.split(`
`).map(f=>{const S=ie(We.TSPAN,{dy:"1em",x:Cs.BORDER_WIDTH},r);return f=document.createTextNode(f),S.appendChild(f),S})}rightAlignSpans(r,a){for(const f of a)f.setAttribute("text-anchor","end"),f.setAttribute("x",`${r+Cs.BORDER_WIDTH}`)}updateBubbleSize(){const r=this.paragraph.getBBox();this.setSize(new Qs(r.width+2*Cs.BORDER_WIDTH,r.height+2*Cs.BORDER_WIDTH),!0)}},sa=class extends Cs{constructor(r,a,f){super(r,a,f),this.workspace=r,this.anchor=a,this.ownerRect=f,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new Qs(160+Cs.DOUBLE_BORDER,80+Cs.DOUBLE_BORDER),this.MIN_SIZE=new Qs(45+Cs.DOUBLE_BORDER,20+Cs.DOUBLE_BORDER),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(r){this.text=r,this.textArea.value=r,this.onTextChange()}addTextChangeListener(r){this.textChangeListeners.push(r)}addSizeChangeListener(r){this.sizeChangeListeners.push(r)}createEditor(r){r=ie(We.FOREIGNOBJECT,{x:Cs.BORDER_WIDTH,y:Cs.BORDER_WIDTH},r);const a=document.createElementNS(bc,"body");a.setAttribute("xmlns",bc),a.className="blocklyMinimalBody";const f=document.createElementNS(bc,"textarea");return f.className="blocklyCommentTextarea",f.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),a.appendChild(f),r.appendChild(a),this.bindTextAreaEvents(f),setTimeout(()=>{f.focus()},0),{inputRoot:r,textArea:f}}bindTextAreaEvents(r){Ae(r,"wheel",this,a=>{a.stopPropagation()}),Ae(r,"focus",this,this.onStartEdit,!0),Ae(r,"change",this,this.onTextChange)}createResizeHandle(r){r=ie(We.G,{class:this.workspace.RTL?"blocklyResizeSW":"blocklyResizeSE"},r);const a=2*Cs.BORDER_WIDTH;return ie(We.POLYGON,{points:`0,${a} ${a},${a} ${a},0`},r),ie(We.LINE,{class:"blocklyResizeLine",x1:a/3,y1:a-1,x2:a-1,y2:a/3},r),ie(We.LINE,{class:"blocklyResizeLine",x1:2*a/3,y1:a-1,x2:a-1,y2:2*a/3},r),Ae(r,"pointerdown",this,this.onResizePointerDown),r}setSize(r,a=!1){r.width=Math.max(r.width,this.MIN_SIZE.width),r.height=Math.max(r.height,this.MIN_SIZE.height);const f=r.width-Cs.DOUBLE_BORDER,S=r.height-Cs.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${f}`),this.inputRoot.setAttribute("height",`${S}`),this.textArea.style.width=`${f-4}px`,this.textArea.style.height=`${S-4}px`,this.workspace.RTL?this.resizeGroup.setAttribute("transform",`translate(${Cs.DOUBLE_BORDER}, ${S}) scale(-1 1)`):this.resizeGroup.setAttribute("transform",`translate(${f}, ${S})`),super.setSize(r,a),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(r){this.bringToFront(),Dt(r)||(this.workspace.startDrag(r,new mn(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Ae(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Ae(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),r.stopPropagation()}onResizePointerUp(r){st(),this.resizePointerUpListener&&(nt(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(nt(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(r){r=this.workspace.moveDrag(r),this.setSize(new Qs(this.workspace.RTL?-r.x:r.x,r.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const r of this.textChangeListeners)r()}onSizeChange(){for(const r of this.sizeChangeListeners)r()}};Mt(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var Vd=17,X1=160,Y1=80,qh=class extends yy{constructor(r){super(r),this.sourceBlock=r,this.textBubble=this.textInputBubble=null,this.text="",this.bubbleSize=new Qs(X1,Y1),this.bubbleVisiblity=!1}getType(){return qh.TYPE}initView(r){this.svgRoot||(super.initView(r),ie(We.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),ie(We.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),ie(We.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),we(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let r;(r=this.textInputBubble)==null||r.dispose();let a;(a=this.textBubble)==null||a.dispose()}getWeight(){return qh.WEIGHT}getSize(){return new Qs(Vd,Vd)}applyColour(){super.applyColour();const r=this.sourceBlock.style.colourPrimary;let a;(a=this.textInputBubble)==null||a.setColour(r);let f;(f=this.textBubble)==null||f.setColour(r)}updateEditable(){super.updateEditable(),this.bubbleIsVisible()&&(this.setBubbleVisible(!1),this.setBubbleVisible(!0))}onLocationChange(r){super.onLocationChange(r),r=this.getAnchorLocation();let a;(a=this.textInputBubble)==null||a.setAnchorLocation(r);let f;(f=this.textBubble)==null||f.setAnchorLocation(r)}setText(r){const a=this.text;ce(new(Re(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,a,r)),this.text=r;let f;(f=this.textInputBubble)==null||f.setText(this.text);let S;(S=this.textBubble)==null||S.setText(this.text)}getText(){return this.text}setBubbleSize(r){this.bubbleSize=r;let a;(a=this.textInputBubble)==null||a.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(r){let a;this.text=(a=r.text)!=null?a:"";let f,S;this.bubbleSize=new Qs((f=r.width)!=null?f:X1,(S=r.height)!=null?S:Y1);let k;this.bubbleVisiblity=(k=r.pinned)!=null?k:!1,setTimeout(()=>this.setBubbleVisible(this.bubbleVisiblity),1)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var r=this.textInputBubble.getText();this.text!==r&&(ce(new(Re(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,this.text,r)),this.text=r)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(r){(!r||!this.textBubble&&!this.textInputBubble)&&(r||this.textBubble||this.textInputBubble)&&(this.bubbleVisiblity=r,this.sourceBlock.rendered&&!this.sourceBlock.isInFlyout&&(r?(this.sourceBlock.isEditable()?this.showEditableBubble():this.showNonEditableBubble(),this.applyColour()):this.hideBubble(),ce(new(Re(go))(this.sourceBlock,r,"comment"))))}showEditableBubble(){this.textInputBubble=new sa(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.textBubble=new cm(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect())}hideBubble(){let r;(r=this.textInputBubble)==null||r.dispose(),this.textInputBubble=null;let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}getAnchorLocation(){const r=Vd/2;return mn.sum(this.workspaceLocation,new mn(r,r))}getBubbleOwnerRect(){const r=this.sourceBlock.getSvgRoot().getBBox();return new Ri(r.y,r.y+r.height,r.x,r.x+r.width)}};qh.TYPE=Wo.COMMENT,qh.WEIGHT=3,fi(qh.TYPE,qh);var Hv=17,Xp=class extends yy{constructor(r){super(r),this.sourceBlock=r,this.textMap=new Map,this.textBubble=null}getType(){return Xp.TYPE}initView(r){this.svgRoot||(super.initView(r),ie(We.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),ie(We.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),ie(We.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),we(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let r;(r=this.textBubble)==null||r.dispose()}getWeight(){return Xp.WEIGHT}getSize(){return new Qs(Hv,Hv)}applyColour(){super.applyColour();let r;(r=this.textBubble)==null||r.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(r){super.onLocationChange(r);let a;(a=this.textBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}addMessage(r,a){if(this.textMap.get(a)===r)return this;r?this.textMap.set(a,r):this.textMap.delete(a);let f;return(f=this.textBubble)==null||f.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(r){if(this.bubbleIsVisible()!==r){if(r)this.textBubble=new cm(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour();else{let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}ce(new(Re(go))(this.sourceBlock,r,"warning"))}}getAnchorLocation(){const r=Hv/2;return mn.sum(this.workspaceLocation,new mn(r,r))}getBubbleOwnerRect(){const r=this.sourceBlock.getSvgRoot().getBBox();return new Ri(r.y,r.y+r.height,r.x,r.x+r.width)}};Xp.TYPE=Wo.WARNING,Xp.WEIGHT=2;var Ty=class extends Error{constructor(r){super(`Tried to append an icon of type ${r.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=r}},xc={};xc.DuplicateIconType=Ty;var $n={};$n.CommentIcon=qh,$n.Icon=yy,$n.IconType=Wo,$n.MutatorIcon=t.MutatorIcon$$module$build$src$core$icons$mutator_icon,$n.WarningIcon=Xp,$n.exceptions=xc,$n.registry=f_;var b0,Xi;b0="PROCEDURE",t.DEFAULT_ARG$$module$build$src$core$procedures="x",Xi={CATEGORY_NAME:b0,DEFAULT_ARG:t.DEFAULT_ARG$$module$build$src$core$procedures},Xi.ObservableProcedureMap=_0,Xi.allProcedures=yh,Xi.findLegalName=t.findLegalName$$module$build$src$core$procedures,Xi.flyoutCategory=_n,Xi.getCallers=nu,Xi.getDefinition=t.getDefinition$$module$build$src$core$procedures,Xi.isNameUsed=wn,Xi.isProcedureBlock=da,Xi.mutateCallers=t.mutateCallers$$module$build$src$core$procedures,Xi.mutatorOpenListener=pc,Xi.rename=t.rename$$module$build$src$core$procedures;var Gv=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(r){return Object.prototype.hasOwnProperty.call(this,r)||(this[r]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[r]}isField(r){return r.type&this.FIELD}isHat(r){return r.type&this.HAT}isIcon(r){return r.type&this.ICON}isSpacer(r){return r.type&this.SPACER}isInRowSpacer(r){return r.type&this.IN_ROW_SPACER}isInput(r){return r.type&this.INPUT}isExternalInput(r){return r.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(r){return r.type&this.INLINE_INPUT}isStatementInput(r){return r.type&this.STATEMENT_INPUT}isPreviousConnection(r){return r.type&this.PREVIOUS_CONNECTION}isNextConnection(r){return r.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(r){return r.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(r){return r.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(r){return r.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(r){return r.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(r){return r.type&this.RIGHT_SQUARE_CORNER}isCorner(r){return r.type&this.CORNER}isJaggedEdge(r){return r.type&this.JAGGED_EDGE}isRow(r){return r.type&this.ROW}isBetweenRowSpacer(r){return r.type&this.BETWEEN_ROW_SPACER}isTopRow(r){return r.type&this.TOP_ROW}isBottomRow(r){return r.type&this.BOTTOM_ROW}isTopOrBottomRow(r){return r.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(r){return r.type&this.INPUT_ROW}},lt=new Gv,rr=class{constructor(r){this.centerline=this.xPos=this.height=this.width=0,this.constants_=r,this.type=lt.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},m_=class{constructor(r){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=r,this.type=lt.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let r=this.elements.length-1;0<=r;r--){const a=this.elements[r];if(lt.isInput(a))return a}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let r=0;r<this.elements.length;r++){const a=this.elements[r];if(lt.isSpacer(a))return a}return null}getLastSpacer(){for(let r=this.elements.length-1;0<=r;r--){const a=this.elements[r];if(lt.isSpacer(a))return a}return null}},g_=class extends m_{constructor(r){super(r),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=lt.BOTTOM_ROW}hasLeftSquareCorner(r){return!!r.outputConnection||!!r.getNextBlock()}hasRightSquareCorner(r){return!0}measure(){let r=0,a=0,f=0;for(let S=0;S<this.elements.length;S++){const k=this.elements[S];a+=k.width,lt.isSpacer(k)||(lt.isNextConnection(k)?f=Math.max(f,k.height):r=Math.max(r,k.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,r)+f,this.descenderHeight=f,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Qh=class extends rr{constructor(r,a){super(r),this.connectionModel=a,this.type|=lt.CONNECTION,this.shape=this.constants_.shapeFor(a),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=a.isHighlighted()}},Km=class extends Qh{constructor(r,a){super(r,a.connection),this.input=a,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=lt.INPUT,this.align=a.align,(this.connectedBlock=a.connection&&a.connection.targetBlock()?a.connection.targetBlock():null)?(r=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=r.width,this.connectedBlockHeight=r.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Sy=class extends Km{constructor(r,a){super(r,a),this.height=0,this.type|=lt.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},T0=class extends rr{constructor(r,a,f){super(r),this.field=a,this.parentInput=f,this.isEditable=a.EDITABLE,this.flipRtl=a.getFlipRtl(),this.type|=lt.FIELD,r=this.field.getSize(),this.height=r.height,this.width=r.width}},Wv=class extends rr{constructor(r){super(r),this.type|=lt.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},K1=class extends rr{constructor(r,a){super(r),this.icon=a,this.flipRtl=!1,this.isVisible=eu(a)&&a.bubbleIsVisible(),this.type|=lt.ICON,r=a.getSize(),this.height=r.height,this.width=r.width}},jd=class extends rr{constructor(r,a){super(r),this.type=this.type|lt.SPACER|lt.IN_ROW_SPACER,this.width=a,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},Vv=class extends Km{constructor(r,a){super(r,a),this.type|=lt.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},__=class extends Km{constructor(r,a){super(r,a),this.type|=lt.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},jv=class extends m_{constructor(r){super(r),this.connectedBlockWidths=0,this.type|=lt.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let r=0;for(let a=0;a<this.elements.length;a++){const f=this.elements[a];this.width+=f.width,lt.isInput(f)&&f instanceof Km&&(lt.isStatementInput(f)&&f instanceof __?r+=f.connectedBlockWidth:lt.isExternalInput(f)&&f instanceof Sy&&f.connectedBlockWidth!==0&&(r+=f.connectedBlockWidth-f.connectionWidth)),lt.isSpacer(f)||(this.height=Math.max(this.height,f.height))}this.connectedBlockWidths=r,this.widthWithConnectedBlocks=this.width+r}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},J1=class extends rr{constructor(r){super(r),this.type|=lt.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},q1=class extends Qh{constructor(r,a){super(r,a),this.type|=lt.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Q1=class extends Qh{constructor(r,a){super(r,a),this.connectionOffsetX=0,this.type|=lt.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Z1=class extends Qh{constructor(r,a){super(r,a),this.type|=lt.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},hm=class extends rr{constructor(r,a){super(r),this.type=(a&&a!=="left"?lt.RIGHT_ROUND_CORNER:lt.LEFT_ROUND_CORNER)|lt.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},Xv=class extends m_{constructor(r,a,f){super(r),this.height=a,this.width=f,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|lt.SPACER|lt.BETWEEN_ROW_SPACER,this.elements=[new jd(this.constants_,f)]}measure(){}},dm=class extends rr{constructor(r,a){super(r),this.type=(a&&a!=="left"?lt.RIGHT_SQUARE_CORNER:lt.LEFT_SQUARE_CORNER)|lt.CORNER,this.width=this.height=this.constants_.NO_PADDING}},Yv=class extends m_{constructor(r){super(r),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=lt.TOP_ROW}hasLeftSquareCorner(r){const a=(r.hat?r.hat==="cap":this.constants_.ADD_START_HATS)&&!r.outputConnection&&!r.previousConnection,f=r.getPreviousBlock();return!!r.outputConnection||a||(f?f.getNextBlock()===r:!1)}hasRightSquareCorner(r){return!0}measure(){let r=0,a=0,f=0;for(let S=0;S<this.elements.length;S++){const k=this.elements[S];a+=k.width,lt.isSpacer(k)||(lt.isHat(k)&&k instanceof Wv?f=Math.max(f,k.ascenderHeight):r=Math.max(r,k.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,r)+f,this.capline=this.ascenderHeight=f,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},y_=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Fi(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(r){this.blockStyles=Object.create(null);const a=r.blockStyles;for(const f in a)this.blockStyles[f]=this.validatedBlockStyle_(a[f]);this.setDynamicProperties_(r)}setDynamicProperties_(r){this.setFontConstants_(r),this.setComponentConstants_(r),this.ADD_START_HATS=r.startHats!==void 0?r.startHats:this.ADD_START_HATS}setFontConstants_(r){r.fontStyle&&r.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=r.fontStyle.family),r.fontStyle&&r.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=r.fontStyle.weight),r.fontStyle&&r.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=r.fontStyle.size),r=He("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=r.height,this.FIELD_TEXT_BASELINE=r.baseline}setComponentConstants_(r){this.CURSOR_COLOUR=r.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=r.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=r.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(r.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(r){const a="auto_"+r;return this.blockStyles[a]||(this.blockStyles[a]=this.createBlockStyle_(r)),{style:this.blockStyles[a],name:a}}getBlockStyle(r){return this.blockStyles[r||""]||(r&&r.indexOf("auto_")===0?this.getBlockStyleForColour(r.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(r){return this.validatedBlockStyle_({colourPrimary:r})}validatedBlockStyle_(r){const a={};return r&&Object.assign(a,r),r=Ji(a.colourPrimary||"#000"),a.colourPrimary=r.hex,a.colourSecondary=a.colourSecondary?Ji(a.colourSecondary).hex:this.generateSecondaryColour_(a.colourPrimary),a.colourTertiary=a.colourTertiary?Ji(a.colourTertiary).hex:this.generateTertiaryColour_(a.colourPrimary),a.hat=a.hat||"",a}generateSecondaryColour_(r){return zc("#fff",r,.6)||r}generateTertiaryColour_(r){return zc("#fff",r,.3)||r}dispose(){this.embossFilter&&ft(this.embossFilter),this.disabledPattern&&ft(this.disabledPattern),this.debugFilter&&ft(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const r=this.JAGGED_TEETH_HEIGHT,a=this.JAGGED_TEETH_WIDTH,f=Fo([jn(a,r/4),jn(2*-a,r/2),jn(a,r/4)]);return{height:r,width:a,path:f}}makeStartHat(){const r=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,f=Hs("c",[jn(30,-r),jn(70,-r),jn(a,0)]);return{height:r,width:a,path:f}}makePuzzleTab(){function r(V){V=V?-1:1;const _e=-V;var ze=f/2;const jt=ze+2.5,Gn=ze+.5,_l=jn(-a,V*ze);return ze=jn(a,V*ze),Hs("c",[jn(0,V*jt),jn(-a,_e*Gn),_l])+Hs("s",[jn(a,2.5*_e),ze])}const a=this.TAB_WIDTH,f=this.TAB_HEIGHT,S=r(!0),k=r(!1);return{type:this.SHAPES.PUZZLE,width:a,height:f,pathDown:k,pathUp:S}}makeNotch(){function r(_e){return Fo([jn(_e*S,f),jn(3*_e,0),jn(_e*S,-f)])}const a=this.NOTCH_WIDTH,f=this.NOTCH_HEIGHT,S=(a-3)/2,k=r(1),V=r(-1);return{type:this.SHAPES.NOTCH,width:a,height:f,pathLeft:k,pathRight:V}}makeInsideCorners(){const r=this.CORNER_RADIUS,a=pi("a","0 0,0",r,jn(-r,r)),f=pi("a","0 0,0",r,jn(r,r));return{width:r,height:r,pathTop:a,pathBottom:f}}makeOutsideCorners(){const r=this.CORNER_RADIUS,a=Fi(0,r)+pi("a","0 0,1",r,jn(r,-r)),f=pi("a","0 0,1",r,jn(r,r)),S=pi("a","0 0,1",r,jn(-r,-r)),k=pi("a","0 0,1",r,jn(-r,r));return{topLeft:a,topRight:f,bottomRight:k,bottomLeft:S,rightHeight:r}}shapeFor(r){switch(r.type){case Pn.INPUT_VALUE:case Pn.OUTPUT_VALUE:return this.PUZZLE_TAB;case Pn.PREVIOUS_STATEMENT:case Pn.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(r,a,f){this.injectCSS_(a,f),this.defs=ie(We.DEFS,{},r),r=ie(We.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),ie(We.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},r),a=ie(We.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},r),ie(We.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},a),ie(We.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},r),ie(We.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},r),this.embossFilterId=r.id,this.embossFilter=r,r=ie(We.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),ie(We.RECT,{width:10,height:10,fill:"#aaa"},r),ie(We.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},r),this.disabledPatternId=r.id,this.disabledPattern=r,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const r=ie(We.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),a=ie(We.FECOMPONENTTRANSFER,{result:"outBlur"},r);ie(We.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),ie(We.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},r),ie(We.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},r),this.debugFilterId=r.id,this.debugFilter=r}}injectCSS_(r,a){a=this.getCSS_(a),r="blockly-renderer-style-"+r,this.cssNode=document.getElementById(r);const f=a.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=f:(a=document.createElement("style"),a.id=r,r=document.createTextNode(f),a.appendChild(r),document.head.insertBefore(a,document.head.firstChild),this.cssNode=a)}getCSS_(r){return[`${r} .blocklyText, `,`${r} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${r} .blocklyText {`,"fill: #fff;","}",`${r} .blocklyNonEditableText>rect,`,`${r} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${r} .blocklyNonEditableText>text,`,`${r} .blocklyEditableText>text {`,"fill: #000;","}",`${r} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${r} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${r} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${r} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${r} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${r} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${r} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${r} .blocklyReplaceable .blocklyPathLight,`,`${r} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${r} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},v_=class{constructor(r,a){this.inlinePath_=this.outlinePath_="",this.block_=r,this.info_=a,this.topLeft_=r.getRelativeToSurfaceXY(),this.constants_=a.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}hideHiddenIcons_(){xe("hideHiddenIcons_","v10","v11")}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}drawOutline_(){this.drawTop_();for(let r=1;r<this.info_.rows.length-1;r++){const a=this.info_.rows[r];a.hasJaggedEdge?this.drawJaggedEdge_(a):a.hasStatement?this.drawStatementInput_(a):a.hasExternalInput?this.drawValueInput_(a):this.drawRightSideRow_(a)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const r=this.info_.topRow,a=r.elements;this.positionPreviousConnection_(),this.outlinePath_+=Fi(r.xPos,this.info_.startY);for(let f=0,S;S=a[f];f++)lt.isLeftRoundedCorner(S)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:lt.isRightRoundedCorner(S)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:lt.isPreviousConnection(S)&&S instanceof Qh?this.outlinePath_+=S.shape.pathLeft:lt.isHat(S)?this.outlinePath_+=this.constants_.START_HAT.path:lt.isSpacer(S)&&(this.outlinePath_+=En("h",S.width));this.outlinePath_+=En("v",r.height)}drawJaggedEdge_(r){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+En("v",r.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(r){const a=r.getLastInput();this.positionExternalValueConnection_(r);const f=_s(a.shape)?a.shape.pathDown(a.height):a.shape.pathDown;this.outlinePath_+=En("H",a.xPos+a.width)+f+En("v",r.height-a.connectionHeight)}drawStatementInput_(r){var a=r.getLastInput();if(a){var f=a.xPos+a.notchOffset+a.shape.width;a=a.shape.pathRight+En("h",-(a.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var S=r.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=En("H",f)+a+En("v",S)+this.constants_.INSIDE_CORNERS.pathBottom+En("H",r.xPos+r.width),this.positionStatementInputConnection_(r)}}drawRightSideRow_(r){this.outlinePath_+=En("V",r.yPos+r.height)}drawBottom_(){const r=this.info_.bottomRow,a=r.elements;this.positionNextConnection_();let f=0,S="";for(let k=a.length-1,V;V=a[k];k--)lt.isNextConnection(V)&&V instanceof Qh?S+=V.shape.pathRight:lt.isLeftSquareCorner(V)?S+=En("H",r.xPos):lt.isLeftRoundedCorner(V)?S+=this.constants_.OUTSIDE_CORNERS.bottomLeft:lt.isRightRoundedCorner(V)?(S+=this.constants_.OUTSIDE_CORNERS.bottomRight,f=this.constants_.OUTSIDE_CORNERS.rightHeight):lt.isSpacer(V)&&(S+=En("h",-1*V.width));this.outlinePath_+=En("V",r.baseline-f),this.outlinePath_+=S}drawLeft_(){var r=this.info_.outputConnection;if(this.positionOutputConnection_(),r){const a=r.connectionOffsetY+r.height;r=_s(r.shape)?r.shape.pathUp(r.height):r.shape.pathUp,this.outlinePath_+=En("V",a)+r}this.outlinePath_+="z"}drawInternals_(){for(let r=0,a;a=this.info_.rows[r];r++)for(let f=0,S;S=a.elements[f];f++)lt.isInlineInput(S)?this.drawInlineInput_(S):(lt.isIcon(S)||lt.isField(S))&&this.layoutField_(S)}layoutField_(r){const a=r.centerline-r.height/2;let f=r.xPos;var S="";this.info_.RTL&&(f=-(f+r.width),r.flipRtl&&(f+=r.width,S="scale(-1 1)")),lt.isIcon(r)?(S=r.icon,S.setOffsetInBlock(new mn(f,a)),this.info_.isInsertionMarker&&S.hideForInsertionMarker()):(r=r.field.getSvgRoot(),r.setAttribute("transform","translate("+f+","+a+")"+S),this.info_.isInsertionMarker&&r.setAttribute("display","none"))}drawInlineInput_(r){const a=r.width,f=r.height,S=r.connectionOffsetY,k=r.connectionHeight+S;this.inlinePath_+=Ys(r.xPos+r.connectionWidth,r.centerline-f/2)+En("v",S)+r.shape.pathDown+En("v",f-k)+En("h",a-r.connectionWidth)+En("v",-f)+"z",this.positionInlineInputConnection_(r)}positionInlineInputConnection_(r){const a=r.centerline-r.height/2;if(r.connectionModel){let f=r.xPos+r.connectionWidth+r.connectionOffsetX;this.info_.RTL&&(f*=-1),r.connectionModel.setOffsetInBlock(f,a+r.connectionOffsetY)}}positionStatementInputConnection_(r){const a=r.getLastInput();if(a!=null&&a.connectionModel){let f=r.xPos+r.statementEdge+a.notchOffset;this.info_.RTL&&(f*=-1),a.connectionModel.setOffsetInBlock(f,r.yPos)}}positionExternalValueConnection_(r){const a=r.getLastInput();if(a&&a.connectionModel){let f=r.xPos+r.width;this.info_.RTL&&(f*=-1),a.connectionModel.setOffsetInBlock(f,r.yPos)}}positionPreviousConnection_(){const r=this.info_.topRow;if(r.connection){const a=r.xPos+r.notchOffset;r.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-a:a,0)}}positionNextConnection_(){const r=this.info_.bottomRow;if(r.connection){const a=r.connection,f=a.xPos;a.connectionModel.setOffsetInBlock(this.info_.RTL?-f:f,r.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const r=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-r:r,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const r of this.info_.rows)for(const a of r.elements)if(a instanceof Qh)if(a.highlighted)this.drawConnectionHighlightPath(a);else{let f,S;(S=(f=this.block_.pathObject).removeConnectionHighlight)==null||S.call(f,a.connectionModel)}}drawConnectionHighlightPath(r){const a=r.connectionModel;r=a.type===Pn.INPUT_VALUE||a.type===Pn.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(r):this.getStatementConnectionHighlightPath(r);const f=a.getSourceBlock();let S,k;(k=(S=f.pathObject).addConnectionHighlight)==null||k.call(S,a,r,a.getOffsetInBlock(),f.RTL)}getExpressionConnectionHighlightPath(r){let a="";return _s(r.shape)?a=r.shape.pathDown(r.height):ul(r.shape)&&(a=r.shape.pathDown),r=this.constants_.TAB_OFFSET_FROM_TOP,Fi(0,-r)+En("v",r)+a+En("v",r)}getStatementConnectionHighlightPath(r){if(!ss(r.shape))throw Error("Statement connections should have notch shapes");const a=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return Fi(-a,0)+En("h",a)+r.shape.pathLeft+En("h",a)}};(function(r){r[r.LEFT=-1]="LEFT",r[r.CENTRE=0]="CENTRE",r[r.RIGHT=1]="RIGHT"})(t.Align$$module$build$src$core$inputs$align||(t.Align$$module$build$src$core$inputs$align={})),t.Align$$module$build$src$core$inputs$align;var Ti=class extends Ui{constructor(r,a,f){super(Ui.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,r!==Ui.SKIP_SETUP&&(f?this.configure_(f):this.class=a||null,this.setValue(r))}configure_(r){super.configure_(r),r.class&&(this.class=r.class)}initView(){this.createTextElement_(),this.class&&we(this.getTextElement(),this.class)}doClassValidation_(r){return r==null?null:`${r}`}setClass(r){this.textElement_&&(this.class&&Tt(this.textElement_,this.class),r&&we(this.textElement_,r)),this.class=r}static fromJson(r){return new this(Gr(r.text),void 0,r)}};Es("field_label",Ti),Ti.prototype.DEFAULT_VALUE="";var es=class{constructor(r,a){this.name=r,this.sourceBlock=a,this.fieldRow=[],this.align=t.Align$$module$build$src$core$inputs$input.LEFT,this.visible=!0,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(r,a){return this.insertFieldAt(this.fieldRow.length,r,a),this}insertFieldAt(r,a,f){if(0>r||r>this.fieldRow.length)throw Error("index "+r+" out of bounds.");return(a||a===""&&f)&&(typeof a=="string"&&(a=t.fromJson$$module$build$src$core$field_registry({type:"field_label",text:a})),a.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(a.init(),a.applyColour()),a.name=f,a.setVisible(this.isVisible()),a.prefixField&&(r=this.insertFieldAt(r,a.prefixField)),this.fieldRow.splice(r,0,a),r++,a.suffixField&&(r=this.insertFieldAt(r,a.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours())),r}removeField(r,a){for(let f=0,S;S=this.fieldRow[f];f++)if(S.name===r)return S.dispose(),this.fieldRow.splice(f,1),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours()),!0;if(a)return!1;throw Error('Field "'+r+'" not found.')}isVisible(){return this.visible}setVisible(r){let a=[];if(this.visible===r)return a;this.visible=r;for(let S=0,k;k=this.fieldRow[S];S++)k.setVisible(r);if(this.connection){var f=this.connection;r?a=f.startTrackingAll():f.stopTrackingAll(),(f=f.targetBlock())&&(f.getSvgRoot().style.display=r?"block":"none")}return a}markDirty(){for(let r=0,a;a=this.fieldRow[r];r++)a.markDirty()}setCheck(r){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(r),this}setAlign(r){return this.align=r,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(r){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(r),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let r=0;r<this.fieldRow.length;r++)this.fieldRow[r].init()}dispose(){for(let r=0,a;a=this.fieldRow[r];r++)a.dispose();this.connection&&this.connection.dispose()}makeConnection(r){return this.sourceBlock.makeConnection_(r)}},eT;(function(r){r=r.Align||(r.Align={}),r[r.LEFT=-1]="LEFT",r[r.CENTRE=0]="CENTRE",r[r.RIGHT=1]="RIGHT"})(es||(es={})),t.Align$$module$build$src$core$inputs$input=es.Align,eT={Align:t.Align$$module$build$src$core$inputs$input},eT.Input=es;var Af=class extends es{constructor(r,a){super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},pm=class extends es{constructor(r,a){super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},Zh=class extends es{constructor(r,a){if(!r)throw Error("Statement inputs must have a non-empty name");super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Pn.NEXT_STATEMENT)}},tT;t.ValueInput$$module$build$src$core$inputs$value_input=class extends es{constructor(r,a){if(!r)throw Error("Value inputs must have a non-empty name");super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Pn.INPUT_VALUE)}},tT={},tT.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input;var S0=class{constructor(r,a){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=r,this.block_=a,this.constants_=this.renderer_.getConstants(),this.outputConnection=a.outputConnection?new Q1(this.constants_,a.outputConnection):null,this.isInline=a.getInputsInline()&&!a.isCollapsed(),this.isCollapsed=a.isCollapsed(),this.isInsertionMarker=a.isInsertionMarker(),this.RTL=a.RTL,this.topRow=new Yv(this.constants_),this.bottomRow=new g_(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let r=new jv(this.constants_);this.inputRows.push(r);var a=this.block_.getIcons();for(let f=0,S;S=a[f];f++){const k=new K1(this.constants_,S);this.isCollapsed&&!S.isShownWhenCollapsed()||r.elements.push(k)}a=void 0;for(let f=0,S;S=this.block_.inputList[f];f++)if(S.isVisible()){this.shouldStartNewRow_(S,a)&&(this.rows.push(r),r=new jv(this.constants_),this.inputRows.push(r));for(let k=0,V;V=S.fieldRow[k];k++)r.elements.push(new T0(this.constants_,V,S));this.addInput_(S,r),a=S}this.isCollapsed&&(r.hasJaggedEdge=!0,r.elements.push(new J1(this.constants_))),(r.elements.length||r.hasDummyInput)&&this.rows.push(r),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var r=!!this.block_.previousConnection;const a=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!r;let f=this.topRow.hasLeftSquareCorner(this.block_)?dm:hm;this.topRow.elements.push(new f(this.constants_)),a?(r=new Wv(this.constants_),this.topRow.elements.push(r),this.topRow.capline=r.ascenderHeight):r&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Z1(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof Zh&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,f=this.topRow.hasRightSquareCorner(this.block_)?dm:hm,this.topRow.elements.push(new f(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Zh?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new dm(this.constants_)):this.bottomRow.elements.push(new hm(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new q1(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new dm(this.constants_,"right")):this.bottomRow.elements.push(new hm(this.constants_,"right"))}addInput_(r,a){this.isInline&&r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new Vv(this.constants_,r)),a.hasInlineInput=!0):r instanceof Zh?(a.elements.push(new __(this.constants_,r)),a.hasStatement=!0):r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new Sy(this.constants_,r)),a.hasExternalInput=!0):(r instanceof Af||r instanceof pm)&&(a.minHeight=Math.max(a.minHeight,r.getSourceBlock()&&r.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),a.align===null&&(a.align=r.align)}shouldStartNewRow_(r,a){return a?a instanceof pm||r instanceof Zh||a instanceof Zh?!0:r instanceof t.ValueInput$$module$build$src$core$inputs$value_input||r instanceof Af||a instanceof t.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let r=0,a;a=this.rows[r];r++){const f=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new jd(this.constants_,this.getInRowSpacing_(null,f[0]))),f.length){for(let S=0;S<f.length-1;S++){a.elements.push(f[S]);const k=this.getInRowSpacing_(f[S],f[S+1]);a.elements.push(new jd(this.constants_,k))}a.elements.push(f[f.length-1]),a.endsWithElemSpacer()&&a.elements.push(new jd(this.constants_,this.getInRowSpacing_(f[f.length-1],null)))}}}getInRowSpacing_(r,a){if(!r&&a&&lt.isStatementInput(a))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(r&&lt.isInput(r)&&!a){if(lt.isExternalInput(r))return this.constants_.NO_PADDING;if(lt.isInlineInput(r))return this.constants_.LARGE_PADDING;if(lt.isStatementInput(r))return this.constants_.NO_PADDING}return r&&lt.isLeftSquareCorner(r)&&a&&(lt.isPreviousConnection(a)||lt.isNextConnection(a))?a.notchOffset:r&&lt.isLeftRoundedCorner(r)&&a&&(lt.isPreviousConnection(a)||lt.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let r=0,a=0,f=0;for(let k=0,V;V=this.rows[k];k++){if(V.measure(),a=Math.max(a,V.width),V.hasStatement){var S=V.getLastInput();let _e,ze;S=V.width-((ze=(_e=S)==null?void 0:_e.width)!=null?ze:0),r=Math.max(r,S)}f=Math.max(f,V.widthWithConnectedBlocks)}this.statementEdge=r,this.width=a;for(let k=0,V;V=this.rows[k];k++)V.hasStatement&&(V.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(a,f),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let a=0,f;f=this.rows[a];a++)if(f.hasStatement)this.alignStatementRow_(f);else{var r=f.width;r=this.getDesiredRowWidth_(f)-r,0<r&&this.addAlignmentPadding_(f,r),lt.isTopOrBottomRow(f)&&(f.widthWithConnectedBlocks=f.width)}}getDesiredRowWidth_(r){return this.width-this.startX}addAlignmentPadding_(r,a){const f=r.getFirstSpacer(),S=r.getLastSpacer();if((r.hasExternalInput||r.hasStatement)&&(r.widthWithConnectedBlocks+=a),r.align===t.Align$$module$build$src$core$inputs$align.LEFT&&S)S.width+=a;else if(r.align===t.Align$$module$build$src$core$inputs$align.CENTRE&&f&&S)f.width+=a/2,S.width+=a/2;else if(r.align===t.Align$$module$build$src$core$inputs$align.RIGHT&&f)f.width+=a;else if(S)S.width+=a;else return;r.width+=a}alignStatementRow_(r){const a=r.getLastInput();if(a){var f=r.width-a.width,S=this.statementEdge;f=S-f,0<f&&this.addAlignmentPadding_(r,f),f=r.width,S=this.getDesiredRowWidth_(r),a.width+=S-f,a.height=Math.max(a.height,r.height),r.width+=S-f,r.widthWithConnectedBlocks=Math.max(r.width,this.statementEdge+r.connectedBlockWidths)}}addRowSpacing_(){const r=this.rows;this.rows=[];for(let a=0;a<r.length;a++)this.rows.push(r[a]),a!==r.length-1&&this.rows.push(this.makeSpacerRow_(r[a],r[a+1]))}makeSpacerRow_(r,a){var f=this.getSpacerRowHeight_(r,a);const S=this.getSpacerRowWidth_(r,a);return f=new Xv(this.constants_,f,S),r.hasStatement&&(f.followsStatement=!0),a.hasStatement&&(f.precedesStatement=!0),f}getSpacerRowWidth_(r,a){return this.width-this.startX}getSpacerRowHeight_(r,a){return this.constants_.MEDIUM_PADDING}getElemCenterline_(r,a){return lt.isSpacer(a)?r.yPos+a.height/2:lt.isBottomRow(r)?(r=r.yPos+r.height-r.descenderHeight,lt.isNextConnection(a)?r+a.height/2:r-a.height/2):lt.isTopRow(r)?lt.isHat(a)?r.capline-a.height/2:r.capline+a.height/2:r.yPos+r.height/2}recordElemPositions_(r){let a=r.xPos;for(let f=0,S;S=r.elements[f];f++)lt.isSpacer(S)&&(S.height=r.height),S.xPos=a,S.centerline=this.getElemCenterline_(r,S),a+=S.width}finalize_(){let r=0,a=0;for(let f=0,S;S=this.rows[f];f++)S.yPos=a,S.xPos=this.startX,a+=S.height,r=Math.max(r,S.widthWithConnectedBlocks),this.recordElemPositions_(S);if(this.outputConnection&&this.block_.nextConnection){const f=this.block_.nextConnection.targetBlock();f&&(r=Math.max(r,f.getHeightWidth().width))}this.widthWithChildren=r+this.startX,this.height=a,this.startY=this.topRow.capline,this.bottomRow.baseline=a-this.bottomRow.descenderHeight}getMeasureableForConnection(r){let a;if(((a=this.outputConnection)==null?void 0:a.connectionModel)===r)return this.outputConnection;for(const f of this.rows)for(const S of f.elements)if(S instanceof Qh&&S.connectionModel===r)return S;return null}},Qt=class{constructor(r,a,f){if(this.wsCoordinate=null,!a)throw Error("Cannot create a node without a location.");this.type=r,this.isConnectionLocation=Qt.isConnectionType(r),this.location=a,this.processParams(f||null)}processParams(r){r&&r.wsCoordinate&&(this.wsCoordinate=r.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var r=this.location.getParentInput();const a=r.getSourceBlock();for(r=a.inputList.indexOf(r),r+=1;r<a.inputList.length;r++){const f=a.inputList[r],S=f.fieldRow;for(let k=0;k<S.length;k++){const V=S[k];if(V.isClickable()||Qt.NAVIGATE_ALL_FIELDS)return Qt.createFieldNode(V)}if(f.connection)return Qt.createInputNode(f)}return null}findNextForField(){var r=this.location,a=r.getParentInput();const f=r.getSourceBlock();if(!f)throw Error("The current AST location is not associated with a block");var S=f.inputList.indexOf(a);for(r=a.fieldRow.indexOf(r)+1;S<f.inputList.length;S++){a=f.inputList[S];const k=a.fieldRow;for(;r<k.length;){if(k[r].isClickable()||Qt.NAVIGATE_ALL_FIELDS)return Qt.createFieldNode(k[r]);r++}if(r=0,a.connection)return Qt.createInputNode(a)}return null}findPrevForInput(){const r=this.location.getParentInput(),a=r.getSourceBlock();for(var f=a.inputList.indexOf(r);0<=f;f--){var S=a.inputList[f];if(S.connection&&S!==r)return Qt.createInputNode(S);S=S.fieldRow;for(let k=S.length-1;0<=k;k--){const V=S[k];if(V.isClickable()||Qt.NAVIGATE_ALL_FIELDS)return Qt.createFieldNode(V)}}return null}findPrevForField(){var r=this.location;const a=r.getParentInput(),f=r.getSourceBlock();if(!f)throw Error("The current AST location is not associated with a block");var S=f.inputList.indexOf(a);for(r=a.fieldRow.indexOf(r)-1;0<=S;S--){var k=f.inputList[S];if(k.connection&&k!==a)return Qt.createInputNode(k);for(k=k.fieldRow;-1<r;){if(k[r].isClickable()||Qt.NAVIGATE_ALL_FIELDS)return Qt.createFieldNode(k[r]);r--}0<=S-1&&(r=f.inputList[S-1].fieldRow.length-1)}return null}navigateBetweenStacks(r){var a=this.getLocation();if(a.getSourceBlock){var f=a.getSourceBlock();f&&(a=f)}if(!a||a.isDeadOrDying())return null;f=a.getRootBlock(),a=f.workspace.getTopBlocks(!0);for(let S=0;S<a.length;S++)if(f.id===a[S].id)return r=S+(r?1:-1),r===-1||r===a.length?null:Qt.createStackNode(a[r]);throw Error("Couldn't find "+(r?"next":"previous")+" stack?!")}findTopASTNodeForBlock(r){const a=cl(r);return a?Qt.createConnectionNode(a):Qt.createBlockNode(r)}getOutAstNodeForBlock(r){if(!r)return null;r=r.getTopStackBlock();const a=cl(r);return a&&a.targetConnection&&a.targetConnection.getParentInput()?Qt.createInputNode(a.targetConnection.getParentInput()):Qt.createStackNode(r)}findFirstFieldOrInput(r){r=r.inputList;for(let a=0;a<r.length;a++){const f=r[a],S=f.fieldRow;for(let k=0;k<S.length;k++){const V=S[k];if(V.isClickable()||Qt.NAVIGATE_ALL_FIELDS)return Qt.createFieldNode(V)}if(f.connection)return Qt.createInputNode(f)}return null}getSourceBlock(){return this.getType()===Qt.types.BLOCK?this.getLocation():this.getType()===Qt.types.STACK?this.getLocation():this.getType()===Qt.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case Qt.types.STACK:return this.navigateBetweenStacks(!0);case Qt.types.OUTPUT:return Qt.createBlockNode(this.location.getSourceBlock());case Qt.types.FIELD:return this.findNextForField();case Qt.types.INPUT:return this.findNextForInput();case Qt.types.BLOCK:const r=this.location.nextConnection;if(!r)break;return Qt.createConnectionNode(r);case Qt.types.PREVIOUS:return Qt.createBlockNode(this.location.getSourceBlock());case Qt.types.NEXT:return Qt.createConnectionNode(this.location.targetConnection)}return null}in(){switch(this.type){case Qt.types.WORKSPACE:const r=this.location.getTopBlocks(!0);if(0<r.length)return Qt.createStackNode(r[0]);break;case Qt.types.STACK:return this.findTopASTNodeForBlock(this.location);case Qt.types.BLOCK:return this.findFirstFieldOrInput(this.location);case Qt.types.INPUT:return Qt.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case Qt.types.STACK:return this.navigateBetweenStacks(!1);case Qt.types.FIELD:return this.findPrevForField();case Qt.types.INPUT:return this.findPrevForInput();case Qt.types.BLOCK:var r=cl(this.location);if(!r)break;return Qt.createConnectionNode(r);case Qt.types.PREVIOUS:if((r=this.location.targetConnection)&&!r.getParentInput())return Qt.createConnectionNode(r);break;case Qt.types.NEXT:return Qt.createBlockNode(this.location.getSourceBlock())}return null}out(){switch(this.type){case Qt.types.STACK:var r=this.location,a=r.getRelativeToSurfaceXY();return a=new mn(a.x,a.y+Qt.DEFAULT_OFFSET_Y),Qt.createWorkspaceNode(r.workspace,a);case Qt.types.OUTPUT:return r=this.location,(a=r.targetConnection)?Qt.createConnectionNode(a):Qt.createStackNode(r.getSourceBlock());case Qt.types.FIELD:if(r=this.location.getSourceBlock(),!r)throw Error("The current AST location is not associated with a block");return Qt.createBlockNode(r);case Qt.types.INPUT:return Qt.createBlockNode(this.location.getSourceBlock());case Qt.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case Qt.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case Qt.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(r){switch(r){case Qt.types.PREVIOUS:case Qt.types.NEXT:case Qt.types.INPUT:case Qt.types.OUTPUT:return!0}return!1}static createFieldNode(r){return r?new Qt(Qt.types.FIELD,r):null}static createConnectionNode(r){if(!r)return null;const a=r.type;return a===Pn.INPUT_VALUE||a===Pn.NEXT_STATEMENT&&r.getParentInput()?Qt.createInputNode(r.getParentInput()):a===Pn.NEXT_STATEMENT?new Qt(Qt.types.NEXT,r):a===Pn.OUTPUT_VALUE?new Qt(Qt.types.OUTPUT,r):a===Pn.PREVIOUS_STATEMENT?new Qt(Qt.types.PREVIOUS,r):null}static createInputNode(r){return r&&r.connection?new Qt(Qt.types.INPUT,r.connection):null}static createBlockNode(r){return r?new Qt(Qt.types.BLOCK,r):null}static createStackNode(r){return r?new Qt(Qt.types.STACK,r):null}static createWorkspaceNode(r,a){return a&&r?new Qt(Qt.types.WORKSPACE,r,{wsCoordinate:a}):null}static createTopNode(r){const a=cl(r);return a?Qt.createConnectionNode(a):Qt.createBlockNode(r)}};Qt.NAVIGATE_ALL_FIELDS=!1,Qt.DEFAULT_OFFSET_Y=-20,function(r){r=r.types||(r.types={}),r.FIELD="field",r.BLOCK="block",r.INPUT="input",r.OUTPUT="output",r.NEXT="next",r.PREVIOUS="previous",r.STACK="stack",r.WORKSPACE="workspace"}(Qt||(Qt={}));var b_=class extends g{constructor(r,a,f,S){let k=r?r.workspace.id:void 0;S&&S.getType()===Qt.types.WORKSPACE&&(k=S.getLocation().id),super(k),this.type=Ol,this.blockId=r==null?void 0:r.id,this.oldNode=f||void 0,this.newNode=S,this.isCursor=a}toJson(){const r=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return r.isCursor=this.isCursor,r.blockId=this.blockId,r.oldNode=this.oldNode,r.newNode=this.newNode,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new b_),a.isCursor=r.isCursor,a.blockId=r.blockId,a.oldNode=r.oldNode,a.newNode=r.newNode,a}};i(Pt.EVENT,Ol,b_);var VE="blocklyCursor",jE="blocklyMarker",XE=.75,T_=class{constructor(r,a,f){this.workspace=r,this.marker=f,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=a,r=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=f.colour||r}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const r=this.isCursor()?VE:jE;return this.svgGroup_=ie(We.G,{class:r}),this.createDomInternal_(),this.svgGroup_}setParent_(r){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),r.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),r.setMarkerSvg(this.getSvgRoot())),this.parent=r}draw(r,a){if(a){this.constants_=this.workspace.getRenderer().getConstants();var f=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||f,this.applyColour_(a),this.showAtLocation_(a),this.fireMarkerEvent(r,a),r=this.currentMarkerSvg.childNodes[0],r!==void 0&&r.beginElement&&r.beginElement()}else this.hide()}showAtLocation_(r){const a=r.getLocation().type;r.getType()===Qt.types.BLOCK?this.showWithBlock_(r):r.getType()===Qt.types.OUTPUT?this.showWithOutput_(r):a===Pn.INPUT_VALUE?this.showWithInput_(r):a===Pn.NEXT_STATEMENT?this.showWithNext_(r):r.getType()===Qt.types.PREVIOUS?this.showWithPrevious_(r):r.getType()===Qt.types.FIELD?this.showWithField_(r):r.getType()===Qt.types.WORKSPACE?this.showWithCoordinates_(r):r.getType()===Qt.types.STACK&&this.showWithStack_(r)}showWithBlockPrevOutput(r){r=r.getSourceBlock();const a=r.width;var f=r.height,S=f*XE;const k=this.constants_.CURSOR_BLOCK_PADDING;r.previousConnection?(f=this.constants_.shapeFor(r.previousConnection),this.positionPrevious_(a,k,S,f)):r.outputConnection?(S=this.constants_.shapeFor(r.outputConnection),this.positionOutput_(a,f,S)):this.positionBlock_(a,k,S),this.setParent_(r),this.showCurrent_()}showWithBlock_(r){this.showWithBlockPrevOutput(r)}showWithPrevious_(r){this.showWithBlockPrevOutput(r)}showWithOutput_(r){this.showWithBlockPrevOutput(r)}showWithCoordinates_(r){var a=r.getWsCoordinate();r=a.x,a=a.y,this.workspace.RTL&&(r-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(r,a,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(r){r=r.getLocation();const a=r.getSize().width,f=r.getSize().height;this.positionRect_(0,0,a,f),this.setParent_(r),this.showCurrent_()}showWithInput_(r){r=r.getLocation();const a=r.getSourceBlock();this.positionInput_(r),this.setParent_(a),this.showCurrent_()}showWithNext_(r){var a=r.getLocation();r=a.getSourceBlock();let f=0;a=a.getOffsetInBlock().y;const S=r.getHeightWidth().width;this.workspace.RTL&&(f=-S),this.positionLine_(f,a,S),this.setParent_(r),this.showCurrent_()}showWithStack_(r){r=r.getLocation();var a=r.getHeightWidth();const f=a.width+this.constants_.CURSOR_STACK_PADDING;a=a.height+this.constants_.CURSOR_STACK_PADDING;const S=-this.constants_.CURSOR_STACK_PADDING/2,k=-this.constants_.CURSOR_STACK_PADDING/2;let V=S;this.workspace.RTL&&(V=-(f+S)),this.positionRect_(V,k,f,a),this.setParent_(r),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(r,a,f){if(r=Fi(-a,f)+En("V",-a)+En("H",r+2*a)+En("V",f),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",r),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(r){const a=r.getOffsetInBlock().x,f=r.getOffsetInBlock().y;r=Ys(0,0)+this.constants_.shapeFor(r).pathDown,this.markerInput_.setAttribute("d",r),this.markerInput_.setAttribute("transform","translate("+a+","+f+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(r,a,f){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${r}`),this.markerSvgLine_.setAttribute("y",`${a}`),this.markerSvgLine_.setAttribute("width",`${f}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(r,a,f){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");r=Fi(r,0)+En("h",-(r-f.width))+En("v",this.constants_.TAB_OFFSET_FROM_TOP)+f.pathDown+En("V",a)+En("H",r),this.markerBlock_.setAttribute("d",r),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(r,a,f,S){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");r=Fi(-a,f)+En("V",-a)+En("H",this.constants_.NOTCH_OFFSET_LEFT)+S.pathLeft+En("H",r+2*a)+En("V",f),this.markerBlock_.setAttribute("d",r),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(r,a,f,S){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${r}`),this.markerSvgRect_.setAttribute("y",`${a}`),this.markerSvgRect_.setAttribute("width",`${f}`),this.markerSvgRect_.setAttribute("height",`${S}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(r){r.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(r,a){const f=a.getSourceBlock();r=new(Re(Ol))(f,this.isCursor(),r,a),ce(r)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=ie(We.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=ie(We.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=ie(We.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=ie(We.PATH,{transform:""},this.markerSvg_),this.markerBlock_=ie(We.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const r=this.getBlinkProperties_();ie(We.ANIMATE,r,this.markerSvgLine_),ie(We.ANIMATE,r,this.markerInput_),ie(We.ANIMATE,Object.assign({},r,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(r){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(r=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",r),this.markerInput_.firstElementChild.setAttribute("values",r),this.markerBlock_.firstElementChild.setAttribute("values",r))}dispose(){this.svgGroup_&&ft(this.svgGroup_)}},E0=class{constructor(r,a,f){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=f,this.style=a,this.svgRoot=r,this.svgPath=ie(We.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(r){this.svgPath.setAttribute("d",r)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(r){r?(this.svgRoot.appendChild(r),this.cursorSvg=r):this.cursorSvg=null}setMarkerSvg(r){r?(this.cursorSvg?this.svgRoot.insertBefore(r,this.cursorSvg):this.svgRoot.appendChild(r),this.markerSvg=r):this.markerSvg=null}applyColour(r){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(r.isShadow()),this.updateDisabled_(!r.isEnabled()||r.getInheritedDisabled())}setStyle(r){this.style=r}setClass_(r,a){r&&(a?we(this.svgRoot,r):Tt(this.svgRoot,r))}updateHighlighted(r){r?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(r){r&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(r){this.setClass_("blocklyDisabled",r),r&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(r){this.setClass_("blocklySelected",r)}updateDraggingDelete(r){this.setClass_("blocklyDraggingDelete",r)}updateInsertionMarker(r){this.setClass_("blocklyInsertionMarker",r)}updateMovable(r){this.setClass_("blocklyDraggable",r)}updateReplacementFade(r){this.setClass_("blocklyReplaceable",r)}updateShapeForInputHighlight(r,a){}addConnectionHighlight(r,a,f,S){if(this.connectionHighlights.has(r)){if(this.currentHighlightMatchesNew(r,a,f))return;this.removeConnectionHighlight(r)}a=ie(We.PATH,{class:"blocklyHighlightedConnectionPath",d:a,transform:`translate(${f.x}, ${f.y})`+(S?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(r,a)}currentHighlightMatchesNew(r,a,f){let S;const k=(S=this.connectionHighlights.get(r))==null?void 0:S.getAttribute("d");return r=this.highlightOffsets.get(r),k===a&&mn.equals(r,f)}removeConnectionHighlight(r){const a=this.connectionHighlights.get(r);a&&(ft(a),this.connectionHighlights.delete(r))}},hs=class{constructor(r,a){this.type=a,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=r}connect_(r){const a=Pn.INPUT_VALUE,f=this.getSourceBlock();var S=r.getSourceBlock();r.isConnected()&&r.disconnectInternal(!1);let k;if(this.isConnected()){const _e=this.stashShadowState(),ze=this.targetBlock();ze.isShadow()?ze.dispose(!1):(this.disconnectInternal(),k=ze),this.applyShadowState(_e)}let V;se()&&(V=new(Re(t.MOVE$$module$build$src$core$events$utils))(S),V.setReason(["connect"])),zo(this,r),S.setParent(f),V&&(V.recordNew(),ce(V)),k&&(r=this.type===a?k.outputConnection:k.previousConnection)&&((S=hs.getConnectionForOrphanedConnection(S,r))?r.connect(S):r.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal();const r=this.targetBlock();r&&!r.isDeadOrDying()&&r.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Pn.INPUT_VALUE||this.type===Pn.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(r){}connect(r){if(this.targetConnection===r)return!0;if(this.getConnectionChecker().canConnect(this,r,!1)){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(r):r.connect_(this),t.setGroup$$module$build$src$core$events$utils(a)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(r=!0){const{parentConnection:a,childConnection:f}=this.getParentAndChildConnections();if(!a||!f)throw Error("Source connection not connected.");const S=t.getGroup$$module$build$src$core$events$utils();S||t.setGroup$$module$build$src$core$events$utils(!0);let k;se()&&(k=new(Re(t.MOVE$$module$build$src$core$events$utils))(f.getSourceBlock()),k.setReason(["disconnect"]));const V=this.targetConnection;V&&(V.targetConnection=null),this.targetConnection=null,r&&f.getSourceBlock().setParent(null),k&&(k.recordNew(),ce(k)),f.getSourceBlock().isShadow()||a.respawnShadow_(),t.setGroup$$module$build$src$core$events$utils(S)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(r,a){if(this.getSourceBlock().isDeadOrDying())return!1;var f;return a=(f=r.getInput(a))==null?void 0:f.connection,f=this.targetBlock(),f&&f!==r||!a||a.targetConnection===this?!1:(a.isConnected()&&a.disconnect(),a.connect(this),!0)}targetBlock(){if(this.isConnected()){let r,a;return(a=(r=this.targetConnection)==null?void 0:r.getSourceBlock())!=null?a:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(r){return r?(Array.isArray(r)||(r=[r]),this.check=r,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(r){this.setShadowStateInternal({shadowDom:r})}getShadowDom(r){return r&&this.targetBlock().isShadow()?el(this.targetBlock()):this.shadowDom}setShadowState(r){this.setShadowStateInternal({shadowState:r})}getShadowState(r){return r&&this.targetBlock()&&this.targetBlock().isShadow()?xi(this.targetBlock()):this.shadowState}neighbours(r){return[]}getParentInput(){let r=null;const a=this.sourceBlock_.inputList;for(let f=0;f<a.length;f++)if(a[f].connection===this){r=a[f];break}return r}toString(){const r=this.sourceBlock_;if(!r)return"Orphan Connection";if(r.outputConnection===this)var a="Output Connection of ";else if(r.previousConnection===this)a="Previous Connection of ";else if(r.nextConnection===this)a="Next Connection of ";else{a=null;for(let f=0,S;S=r.inputList[f];f++)if(S.connection===this){a=S;break}if(a)a='Input "'+a.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return a+r.toDevString()}stashShadowState(){const r=this.getShadowDom(!0),a=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:r,shadowState:a}}applyShadowState({shadowDom:r,shadowState:a}){this.shadowDom=r,this.shadowState=a}setShadowStateInternal({shadowDom:r=null,shadowState:a=null}={}){this.shadowDom=r,this.shadowState=a,(r=this.targetBlock())?r.isShadow()?(r.dispose(!1),this.getSourceBlock().isDeadOrDying()||(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))):(r=this.createShadowBlock(!1),this.serializeShadow(r),r&&r.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))}createShadowBlock(r){var a=this.getSourceBlock();const f=this.getShadowState(),S=this.getShadowDom();if(a.isDeadOrDying()||!f&&!S)return null;if(f)return a=$i(f,a.workspace,{parentConnection:r?this:void 0,isShadow:!0,recordUndo:!1});if(S){if(a=no(S,a.workspace),r)if(this.type===Pn.INPUT_VALUE){if(!a.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(a.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===Pn.NEXT_STATEMENT){if(!a.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(a.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return a}return null}serializeShadow(r){r&&(this.shadowDom=el(r),this.shadowState=xi(r))}static getConnectionForOrphanedConnection(r,a){if(a.type===Pn.OUTPUT_VALUE)return Ua(r,a.getSourceBlock());r=r.lastConnectionInStack(!0);const f=a.getConnectionChecker();return r&&f.canConnect(a,r,!1)?r:null}};hs.CAN_CONNECT=0,hs.REASON_SELF_CONNECTION=1,hs.REASON_WRONG_TYPE=2,hs.REASON_TARGET_NULL=3,hs.REASON_CHECKS_FAILED=4,hs.REASON_DIFFERENT_WORKSPACES=5,hs.REASON_SHADOW_PARENT=6,hs.REASON_DRAG_CHECKS_FAILED=7,hs.REASON_PREVIOUS_AND_OUTPUT=8;var Mg="_TEMP_COLLAPSED_INPUT",Ey="_TEMP_COLLAPSED_FIELD",YE={COLLAPSED_FIELD_NAME:Ey,COLLAPSED_INPUT_NAME:Mg},mp="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",gp=class{constructor(r){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,P(r),this.topBlock=r,this.workspace=r.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){t.disable$$module$build$src$core$events$utils(),this.hidePreview(),t.enable$$module$build$src$core$events$utils();var{local:r,closest:a}=this.activeCandidate;if(r.connect(a),this.topBlock.rendered){const f=r.isSuperior()?a:r,S=this.topBlock.getRootBlock();gr().then(()=>{ha(f.getSourceBlock()),setTimeout(()=>{S.bringToFront()},0)})}}}update(r,a){const f=this.getCandidate(r);((this.wouldDeleteBlock=this.shouldDelete(!!f,a))||this.shouldUpdatePreviews(f,r))&&(t.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(f),this.maybeShowPreview(f),t.enable$$module$build$src$core$events$utils())}createMarkerBlock(r){var a=r.type;t.disable$$module$build$src$core$events$utils();let f;try{if(f=this.workspace.newBlock(a),f.setInsertionMarker(!0),r.saveExtraState){var S=r.saveExtraState(!0);S&&f.loadExtraState&&f.loadExtraState(S)}else if(r.mutationToDom){const k=r.mutationToDom();k&&f.domToMutation&&f.domToMutation(k)}for(a=0;a<r.inputList.length;a++){const k=r.inputList[a];if(k.name===Mg)continue;const V=f.inputList[a];if(!V)throw Error(mp.replace("%1","an input"));for(S=0;S<k.fieldRow.length;S++){const _e=k.fieldRow[S],ze=V.fieldRow[S];if(!ze)throw Error(mp.replace("%1","a field"));ze.setValue(_e.getValue())}}for(const k of f.getDescendants(!1))k.setInsertionMarker(!0);f.setCollapsed(r.isCollapsed()),f.setInputsInline(r.getInputsInline()),f.initSvg(),f.getSvgRoot().setAttribute("visibility","hidden")}finally{t.enable$$module$build$src$core$events$utils()}return f}initAvailableConnections(){const r=this.topBlock.getConnections_(!1),a=this.topBlock.lastConnectionInStack(!0);return a&&a!==this.topBlock.nextConnection&&(r.push(a),this.lastOnStack=a),r}shouldUpdatePreviews(r,a){if(!r)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:f,closest:S}=this.activeCandidate;if(S===r.closest&&f===r.local)return!1;const k=f.x+a.x-S.x;return a=f.y+a.y-S.y,r.radius<Math.sqrt(k*k+a*a)-t.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(r){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let a=this.getStartRadius(),f=null;for(let S=0;S<this.availableConnections.length;S++){const k=this.availableConnections[S],V=k.closest(a,r);V.connection&&(f={closest:V.connection,local:k,radius:V.radius},a=V.radius)}return f}getStartRadius(){return this.activeCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius}shouldDelete(r,a){return a&&this.workspace.getComponentManager().hasCapability(a.id,pl.Capability.DELETE_AREA)?a.wouldDelete(this.topBlock,r):!1}maybeShowPreview(r){if(!this.wouldDeleteBlock&&r){var a=r.closest,f;a===((f=this.activeCandidate)==null?void 0:f.closest)||a.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=r,this.showPreview(this.activeCandidate))}}showPreview(r){const a=this.workspace.getRenderer();switch(a.getConnectionPreviewMethod(r.closest,r.local,this.topBlock)){case gp.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(r);break;case gp.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(r);break;case gp.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(r)}a.shouldHighlightConnection(r.closest)&&r.closest.highlight()}maybeHidePreview(r){if(!r)this.hidePreview();else if(this.activeCandidate){const a=this.activeCandidate.local!==r.local;(this.activeCandidate.closest!==r.closest||a||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let r;const a=(r=this.activeCandidate)==null?void 0:r.closest;a&&a.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(a)&&a.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(r){const{local:a,closest:f}=r;let S=(r=this.lastOnStack&&a===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!S)throw Error("Cannot show the insertion marker because there is no insertion marker block");let k;try{k=S.getMatchingConnection(a.getSourceBlock(),a)}catch{if(r&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),S=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),S=this.firstMarker=this.createMarkerBlock(this.topBlock)),!S)throw Error("Cannot show the insertion marker because there is no insertion marker block");k=S.getMatchingConnection(a.getSourceBlock(),a)}if(!k)throw Error("Cannot show the insertion marker because there is no associated connection");if(k===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");S.queueRender(),Ei(),k.connect(f);const V={x:f.x-k.x,y:f.y-k.y},_e=k.getOffsetInBlock().clone(),ze=k;gr().then(()=>{let jt;(jt=S)==null||jt.positionNearConnection(ze,V,_e);let Gn;(Gn=S)==null||Gn.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=k}hideInsertionMarker(){if(this.markerConnection){var r=this.markerConnection,a=r.getSourceBlock(),f=a.outputConnection,S;if((S=a.previousConnection)!=null&&S.targetConnection||f!=null&&f.targetConnection)a.unplug(!0);else{let k;(k=r.targetBlock())==null||k.unplug(!1)}if(r.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(r=a.getSvgRoot())&&r.setAttribute("visibility","hidden")}}showInsertionInputOutline(r){r=r.closest,this.highlightedBlock=r.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(r,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(r){if(this.fadedBlock=r.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const r=[];return this.firstMarker&&r.push(this.firstMarker),this.lastMarker&&r.push(this.lastMarker),r}disposeInsertionMarker(r){if(r){t.disable$$module$build$src$core$events$utils();try{r.dispose()}finally{t.enable$$module$build$src$core$events$utils()}}}};(function(r){r=r.PREVIEW_TYPE||(r.PREVIEW_TYPE={}),r[r.INSERTION_MARKER=0]="INSERTION_MARKER",r[r.INPUT_OUTLINE=1]="INPUT_OUTLINE",r[r.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(gp||(gp={})),gp.PREVIEW_TYPE;var S_=class{constructor(r){this.overrides=null,this.name=r}getClassName(){return this.name+"-renderer"}init(r,a){this.constants_=this.makeConstants_(),a&&(this.overrides=a,Object.assign(this.constants_,a)),this.constants_.setTheme(r),this.constants_.init()}createDom(r,a){this.constants_.createDom(r,this.name+"-"+a.name,"."+this.getClassName()+"."+a.getClassName())}refreshDom(r,a){const f=this.getConstants();f.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=f.randomIdentifier,this.constants_.setTheme(a),this.constants_.init(),this.createDom(r,a)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new y_}makeRenderInfo_(r){return new S0(this,r)}makeDrawer_(r,a){return new v_(r,a)}makeMarkerDrawer(r,a){return new T_(r,this.getConstants(),a)}makePathObject(r,a){return new E0(r,a,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(r){return!0}orphanCanConnectAtEnd(r,a,f){return!!hs.getConnectionForOrphanedConnection(r,f===Pn.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}getConnectionPreviewMethod(r,a,f){return xe("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===Pn.OUTPUT_VALUE||a.type===Pn.PREVIOUS_STATEMENT?!r.isConnected()||this.orphanCanConnectAtEnd(f,r.targetBlock(),a.type)?gp.PREVIEW_TYPE.INSERTION_MARKER:gp.PREVIEW_TYPE.REPLACEMENT_FADE:gp.PREVIEW_TYPE.INSERTION_MARKER}render(r){const a=this.makeRenderInfo_(r);a.measure(),this.makeDrawer_(r,a).draw()}},Ls={};Ls.BottomRow=g_,Ls.Connection=Qh,Ls.ConstantProvider=y_,Ls.Drawer=v_,Ls.ExternalValueInput=Sy,Ls.Field=T0,Ls.Hat=Wv,Ls.Icon=K1,Ls.InRowSpacer=jd,Ls.InlineInput=Vv,Ls.InputConnection=Km,Ls.InputRow=jv,Ls.JaggedEdge=J1,Ls.MarkerSvg=T_,Ls.Measurable=rr,Ls.NextConnection=q1,Ls.OutputConnection=Q1,Ls.PathObject=E0,Ls.PreviousConnection=Z1,Ls.RenderInfo=S0,Ls.Renderer=S_,Ls.RoundCorner=hm,Ls.Row=m_,Ls.SpacerRow=Xv,Ls.SquareCorner=dm,Ls.StatementInput=__,Ls.TopRow=Yv,Ls.Types=lt,Ls.init=Gc,Ls.register=Ii,Ls.unregister=Id;var nT=class{constructor(r,a){this.workspace=r,this.theme=a,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(r){var a=this.theme;this.theme=r,(r=this.workspace.getInjectionDiv())&&(a&&(a=a.getClassName())&&Tt(r,a),(a=this.theme.getClassName())&&we(r,a));for(let f=0,S;S=this.subscribedWorkspaces_[f];f++)S.refreshTheme();for(const[f,S]of this.componentDB)for(const k of S){r=k.element,a=k.propertyName;const V=this.theme&&this.theme.getComponentStyle(f);r.style.setProperty(a,V||"")}for(const f of this.subscribedWorkspaces_)f.hideChaff()}subscribeWorkspace(r){this.subscribedWorkspaces_.push(r)}unsubscribeWorkspace(r){if(!Ct(this.subscribedWorkspaces_,r))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(r,a,f){this.componentDB.has(a)||this.componentDB.set(a,[]),this.componentDB.get(a).push({element:r,propertyName:f}),a=this.theme&&this.theme.getComponentStyle(a),r.style.setProperty(f,a||"")}unsubscribe(r){if(r)for(const[a,f]of this.componentDB){for(let S=f.length-1;0<=S;S--)f[S].element===r&&f.splice(S,1);f.length||this.componentDB.delete(a)}}dispose(){this.subscribedWorkspaces_.length=0,this.componentDB.clear()}},Kv="VARIABLE_DYNAMIC",fm={CATEGORY_NAME:Kv};fm.flyoutCategory=op,fm.flyoutCategoryBlocks=xu,fm.onCreateVariableButtonClick_Colour=$o,fm.onCreateVariableButtonClick_Number=Uo,fm.onCreateVariableButtonClick_String=Wh;var xy=class{canConnect(r,a,f,S){return this.canConnectWithReason(r,a,f,S)===hs.CAN_CONNECT}canConnectWithReason(r,a,f,S){const k=this.doSafetyChecks(r,a);return k!==hs.CAN_CONNECT?k:this.doTypeChecks(r,a)?f&&!this.doDragChecks(r,a,S||0)?hs.REASON_DRAG_CHECKS_FAILED:hs.CAN_CONNECT:hs.REASON_CHECKS_FAILED}getErrorMessage(r,a,f){switch(r){case hs.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case hs.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case hs.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case hs.REASON_TARGET_NULL:return"Target connection is null.";case hs.REASON_CHECKS_FAILED:return"Connection checks failed. "+(a+" expected "+a.getCheck()+", found "+f.getCheck());case hs.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case hs.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case hs.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(r,a){if(!r||!a)return hs.REASON_TARGET_NULL;let f,S,k;return r.isSuperior()?(f=r.getSourceBlock(),S=a.getSourceBlock(),k=a):(S=r.getSourceBlock(),f=a.getSourceBlock(),k=r,r=a),f===S?hs.REASON_SELF_CONNECTION:k.type!==qt[r.type]?hs.REASON_WRONG_TYPE:f.workspace!==S.workspace?hs.REASON_DIFFERENT_WORKSPACES:f.isShadow()&&!S.isShadow()?hs.REASON_SHADOW_PARENT:k.type===Pn.OUTPUT_VALUE&&S.previousConnection&&S.previousConnection.isConnected()||k.type===Pn.PREVIOUS_STATEMENT&&S.outputConnection&&S.outputConnection.isConnected()?hs.REASON_PREVIOUS_AND_OUTPUT:hs.CAN_CONNECT}doTypeChecks(r,a){if(r=r.getCheck(),a=a.getCheck(),!r||!a)return!0;for(let f=0;f<r.length;f++)if(a.indexOf(r[f])!==-1)return!0;return!1}doDragChecks(r,a,f){if(r.distanceFrom(a)>f||a.getSourceBlock().isInsertionMarker())return!1;switch(a.type){case Pn.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(r,a);case Pn.OUTPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isInsertionMarker()||r.isConnected())return!1;break;case Pn.INPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;case Pn.NEXT_STATEMENT:if(a.isConnected()&&!r.getSourceBlock().nextConnection&&!a.targetBlock().isShadow()&&a.targetBlock().nextConnection||a.targetBlock()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;default:return!1}return ji.indexOf(a)===-1}canConnectToPrevious_(r,a){return r.targetConnection||ji.indexOf(a)!==-1?!1:a.targetConnection?(r=a.targetBlock(),r.isInsertionMarker()?!r.getPreviousBlock():!1):!0}};i(Pt.CONNECTION_CHECKER,kl,xy);var Jv=class extends Dd{constructor(r){super(r),this.type=Cu,r&&(this.varType=r.type,this.varName=r.name)}toJson(){const r=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return r.varType=this.varType,r.varName=this.varName,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Jv),a.varType=r.varType,a.varName=r.varName,a}run(r){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");r?a.deleteVariableById(this.varId):a.createVariable(this.varName,this.varType,this.varId)}};i(Pt.EVENT,Cu,Jv);var qv=class extends Dd{constructor(r,a){super(r),this.type=Kc,r&&(this.oldName=r.name,this.newName=typeof a>"u"?"":a)}toJson(){const r=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return r.oldName=this.oldName,r.newName=this.newName,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new qv),a.oldName=r.oldName,a.newName=r.newName,a}run(r){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");r?a.renameVariableById(this.varId,this.newName):a.renameVariableById(this.varId,this.oldName)}};i(Pt.EVENT,Kc,qv);var Qv=class{constructor(r){this.workspace=r,this.variableMap=new Map}clear(){for(const r of this.variableMap.values())for(;0<r.length;)this.deleteVariable(r[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(r,a){if(r.name!==a){var f=this.getVariable(a,r.type),S=this.workspace.getAllBlocks(!1),k=t.getGroup$$module$build$src$core$events$utils();k||t.setGroup$$module$build$src$core$events$utils(!0);try{f&&f.getId()!==r.getId()?this.renameVariableWithConflict_(r,a,f,S):this.renameVariableAndUses_(r,a,S)}finally{t.setGroup$$module$build$src$core$events$utils(k)}}}renameVariableById(r,a){const f=this.getVariableById(r);if(!f)throw Error("Tried to rename a variable that didn't exist. ID: "+r);this.renameVariable(f,a)}renameVariableAndUses_(r,a,f){for(ce(new(Re(Kc))(r,a)),r.name=a,a=0;a<f.length;a++)f[a].updateVarName(r)}renameVariableWithConflict_(r,a,f,S){const k=r.type;for(a!==f.name&&this.renameVariableAndUses_(f,a,S),a=0;a<S.length;a++)S[a].renameVarById(r.getId(),f.getId());ce(new(Re(Cu))(r)),Ct(this.variableMap.get(k),r)}createVariable(r,a,f){var S=this.getVariable(r,a);if(S){if(f&&S.getId()!==f)throw Error('Variable "'+r+'" is already in use and its id is "'+S.getId()+'" which conflicts with the passed in id, "'+f+'".');return S}if(f&&this.getVariableById(f))throw Error('Variable id, "'+f+'", is already in use.');return S=f||te(),a=a||"",S=new hp(this.workspace,r,a,S),r=this.variableMap.get(a)||[],r.push(S),this.variableMap.delete(a),this.variableMap.set(a,r),ce(new(Re(fo))(S)),S}deleteVariable(r){const a=r.getId(),f=this.variableMap.get(r.type);if(f){for(let S=0;S<f.length;S++)if(f[S].getId()===a){f.splice(S,1),ce(new(Re(Cu))(r)),f.length===0&&this.variableMap.delete(r.type);break}}}deleteVariableById(r){const a=this.getVariableById(r);if(a){var f=a.name;const S=this.getVariableUsesById(r);for(let k=0,V;V=S[k];k++)if(V.type==="procedures_defnoreturn"||V.type==="procedures_defreturn"){r=String(V.getFieldValue("NAME")),f=t.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",f).replace("%2",r),Eo(f);return}1<S.length?(f=t.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(S.length)).replace("%2",f),en(f,k=>{k&&a&&this.deleteVariableInternal(a,S)})):this.deleteVariableInternal(a,S)}else console.warn("Can't delete non-existent variable: "+r)}deleteVariableInternal(r,a){const f=t.getGroup$$module$build$src$core$events$utils();f||t.setGroup$$module$build$src$core$events$utils(!0);try{for(let S=0;S<a.length;S++)a[S].dispose(!0);this.deleteVariable(r)}finally{t.setGroup$$module$build$src$core$events$utils(f)}}getVariable(r,a){if(a=this.variableMap.get(a||"")){for(let f=0,S;S=a[f];f++)if(t.Names$$module$build$src$core$names.equals(S.name,r))return S}return null}getVariableById(r){for(const a of this.variableMap.values())for(const f of a)if(f.getId()===r)return f;return null}getVariablesOfType(r){return(r=this.variableMap.get(r||""))?r.slice():[]}getVariableTypes(r){const a=new Set(this.variableMap.keys());if(r&&r.getPotentialVariableMap())for(const f of r.getPotentialVariableMap().variableMap.keys())a.add(f);return a.has("")||a.add(""),Array.from(a.values())}getAllVariables(){let r=[];for(const a of this.variableMap.values())r=r.concat(a);return r}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(r=>r.name)}getVariableUsesById(r){const a=[],f=this.workspace.getAllBlocks(!1);for(let S=0;S<f.length;S++){const k=f[S].getVarModels();if(k)for(let V=0;V<k.length;V++)k[V].getId()===r&&a.push(f[S])}return a}},E_=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(r){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new _0,this.potentialVariableMap=null,this.id=te(),C(this),this.options=r||new zi({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(v(Pt.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new Qv(this)}dispose(){this.listeners.length=0,this.clear(),M(this)}sortObjects_(r,a){const f=Math.sin(Nc(E_.SCAN_ANGLE))*(this.RTL?-1:1);return r=r.getRelativeToSurfaceXY(),a=a.getRelativeToSurfaceXY(),r.y+f*r.x-(a.y+f*a.x)}addTopBlock(r){this.topBlocks.push(r)}removeTopBlock(r){if(!Ct(this.topBlocks,r))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(r=!1){const a=[].concat(this.topBlocks);return r&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}addTypedBlock(r){this.typedBlocksDB.has(r.type)||this.typedBlocksDB.set(r.type,[]),this.typedBlocksDB.get(r.type).push(r)}removeTypedBlock(r){Ct(this.typedBlocksDB.get(r.type),r),this.typedBlocksDB.get(r.type).length||this.typedBlocksDB.delete(r.type)}getBlocksByType(r,a=!1){return this.typedBlocksDB.has(r)?(r=this.typedBlocksDB.get(r).slice(0),a&&r&&1<r.length&&r.sort(this.sortObjects_.bind(this)),r.filter(function(f){return!f.isInsertionMarker()})):[]}addTopComment(r){this.topComments.push(r),this.commentDB.has(r.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+r.id+'"'),this.commentDB.set(r.id,r)}removeTopComment(r){if(!Ct(this.topComments,r))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(r.id)}getTopComments(r=!1){const a=[].concat(this.topComments);return r&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}getAllBlocks(r=!1){if(r){var a=this.getTopBlocks(!0);r=[];for(let f=0;f<a.length;f++)r.push(...a[f].getDescendants(!0))}else for(r=this.getTopBlocks(!1),a=0;a<r.length;a++)r.push(...r[a].getChildren(!1));return r.filter(function(f){return!f.isInsertionMarker()})}clear(){this.isClearing=!0;try{const r=t.getGroup$$module$build$src$core$events$utils();for(r||t.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();t.setGroup$$module$build$src$core$events$utils(r),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(r,a){this.variableMap.renameVariableById(r,a)}createVariable(r,a,f){return this.variableMap.createVariable(r,a,f)}getVariableUsesById(r){return this.variableMap.getVariableUsesById(r)}deleteVariableById(r){this.variableMap.deleteVariableById(r)}getVariable(r,a){return this.variableMap.getVariable(r,a)}getVariableById(r){return this.variableMap.getVariableById(r)}getVariablesOfType(r){return this.variableMap.getVariablesOfType(r)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(r,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(r){return this.options.maxInstances?(this.options.maxInstances[r]!==void 0?this.options.maxInstances[r]:1/0)-this.getBlocksByType(r,!1).length:1/0}isCapacityAvailable(r){if(!this.hasBlockLimits())return!0;let a=0;for(const f in r){if(r[f]>this.remainingCapacityOfType(f))return!1;a+=r[f]}return!(a>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(r){var a=r?this.redoStack_:this.undoStack_,f=r?this.undoStack_:this.redoStack_;const S=a.pop();if(S){for(var k=[S];a.length&&S.group&&S.group===a[a.length-1].group;){const V=a.pop();V&&k.push(V)}for(a=0;a<k.length;a++)f.push(k[a]);k=q(k,r),he(!1);try{for(f=0;f<k.length;f++)k[f].run(r)}finally{he(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,oe()}addChangeListener(r){return this.listeners.push(r),r}removeChangeListener(r){Ct(this.listeners,r)}fireChangeListener(r){if(r.recordUndo)for(this.undoStack_.push(r),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let a=0;a<this.listeners.length;a++)(0,this.listeners[a])(r)}getBlockById(r){return this.blockDB.get(r)||null}setBlockById(r,a){this.blockDB.set(r,a)}removeBlockById(r){this.blockDB.delete(r)}getCommentById(r){let a;return(a=this.commentDB.get(r))!=null?a:null}allInputsFilled(r){const a=this.getTopBlocks(!1);for(let f=0;f<a.length;f++)if(!a[f].allInputsFilled(r))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new Qv(this)}getVariableMap(){return this.variableMap}setVariableMap(r){this.variableMap=r}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let r=null;const a=this.options.parentWorkspace;return this.isFlyout?a&&a.options&&(r=a.options.parentWorkspace):a&&(r=a),r}static getById(r){return b(r)}static getAll(){return E()}};E_.SCAN_ANGLE=3;var KE=100,rT=class{constructor(r){this.parentWorkspace=r,this.sounds=new Map,this.lastSound_=null,this.muted=!1}dispose(){this.sounds.clear()}load(r,a){if(r.length){try{var f=new globalThis.Audio}catch{return}for(let k=0;k<r.length;k++){const V=r[k],_e=V.match(/\.(\w+)$/);if(_e&&f.canPlayType("audio/"+_e[1])){var S=new globalThis.Audio(V);break}}S&&this.sounds.set(a,S)}}preload(){for(const r of this.sounds.values()){r.volume=.01;const a=r.play();if(a!==void 0?a.then(r.pause).catch(function(){}):r.pause(),Bn||cr)break}}play(r,a){if(!this.muted){var f=this.sounds.get(r);f?(r=new Date,this.lastSound_!==null&&r.getTime()-this.lastSound_.getTime()<KE||(this.lastSound_=r,f=Bn||An?f:f.cloneNode(),f.volume=a===void 0?1:a,f.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(r,a)}}setMuted(r){this.muted=r}getMuted(){return this.muted}},JE=class{constructor(r){this.workspace=r,this.layers=new Map,(r=r.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(r)),r=this.createLayer(ee),we(r,"blocklyBlockCanvas"),r=this.createLayer(ve),we(r,"blocklyBubbleCanvas")}createDragLayer(r){const a=ie(We.SVG,{class:"blocklyBlockDragSurface",xmlns:Um,"xmlns:html":bc,"xmlns:xlink":qs,version:"1.1"});return r.append(a),ie(We.G,{},a)}translateLayers(r,a){r=`translate(${r.x}, ${r.y}) scale(${a})`;let f;(f=this.dragLayer)==null||f.setAttribute("transform",r);for(const[,S]of this.layers)S.setAttribute("transform",r)}moveToDragLayer(r){let a;(a=this.dragLayer)==null||a.appendChild(r.getSvgRoot())}moveOffDragLayer(r,a){this.append(r,a)}append(r,a){this.layers.has(a)||this.createLayer(a);let f;(f=this.layers.get(a))==null||f.appendChild(r.getSvgRoot())}createLayer(r){const a=this.workspace.getSvgGroup(),f=ie(We.G,{});let S=!1;const k=[...this.layers].sort((V,_e)=>V[0]-_e[0]);for(const[V,_e]of k)if(r<V){a.insertBefore(f,_e),S=!0;break}return S||a.appendChild(f),this.layers.set(r,f),f}hasLayer(r){return r===this.dragLayer||new Set(this.layers.values()).has(r)}getBlockLayer(){return this.layers.get(ee)}getBubbleLayer(){return this.layers.get(ve)}},qE=20,Yp=class extends E_{constructor(r){super(r),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(v(Pt.METRICS_MANAGER,r,!0))(this),this.getMetrics=r.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=r.setMetrics||Yp.setTopLevelWorkspaceMetrics_,this.componentManager=new pl,this.connectionDBList=eh.init(this.connectionChecker),this.audioManager=new rT(r.parentWorkspace),this.grid=this.options.gridPattern?new zv(this.options.gridPattern,r.gridOptions):null,this.markerManager=new xa(this),gl&&Cn&&this.registerToolboxCategoryCallback(Tg,Cn),fm&&op&&this.registerToolboxCategoryCallback(Kv,op),Xi&&_n&&(this.registerToolboxCategoryCallback(b0,_n),this.addChangeListener(pc)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new nT(this,this.options.theme||_y),this.themeManager_.subscribeWorkspace(this);let a;this.renderer=Gc(this.options.renderer||"geras",this.getTheme(),(a=this.options.rendererOverrides)!=null?a:void 0),this.cachedParentSvgSize=new Qs(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(r){this.metricsManager=r,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(r){this.markerManager.setCursorSvg(r)}setMarkerSvg(r){this.markerManager.setMarkerSvg(r)}getMarker(r){return this.markerManager?this.markerManager.getMarker(r):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(r){r||(r=_y),this.themeManager_.setTheme(r)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(a){return!!a.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const r=new(Re(ou))(this.getTheme().name,this.id);ce(r)}updateBlockStyles_(r){for(let a=0,f;f=r[a];a++){const S=f.getStyleName();S&&f.setStyle(S)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const r=this.getParentSvg().getScreenCTM();r&&(this.inverseScreenCTM=r.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(r){let a=0,f=0,S=1;(this.getCanvas().contains(r)||this.getBubbleCanvas().contains(r))&&(S=this.scale);do{const k=fr(r);(r===this.getCanvas()||r===this.getBubbleCanvas())&&(S=1),a+=k.x*S,f+=k.y*S,r=r.parentNode}while(r&&r!==this.getParentSvg()&&r!==this.getInjectionDiv());return new mn(a,f)}getCachedParentSvgSize(){const r=this.cachedParentSvgSize;return new Qs(r.width,r.height)}getOriginOffsetInPixels(){return re(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let r=this.svgGroup_;for(;r;){if((" "+(r.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=r;break}r=r.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(r){this.resizeHandlerWrapper=r}createDom(r,a){return this.injectionDiv||(this.injectionDiv=a??null),this.svgGroup_=ie(We.G,{class:"blocklyWorkspace"}),r&&(this.svgBackground_=ie(We.RECT,{height:"100%",width:"100%",class:r},this.svgGroup_),r==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new JE(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(Ae(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),Ae(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(v(Pt.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(r=v(Pt.CURSOR,this.options))&&this.markerManager.setCursor(new r),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&ft(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const r=this.getParentSvg();r&&r.parentNode&&ft(r.parentNode)}this.resizeHandlerWrapper&&(nt(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=Yp.newTrashcan(this);const r=this.trashcan.createDom();this.svgGroup_.insertBefore(r,this.getCanvas())}static newTrashcan(r){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new l0(this);const r=this.zoomControls_.createDom();this.svgGroup_.appendChild(r)}addFlyout(r){const a=new zi({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(v(Pt.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(a):new(v(Pt.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(a),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(r)}getFlyout(r){return this.flyout||r?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const r=this.componentManager.getComponents(pl.Capability.POSITIONABLE,!0),a=this.getMetricsManager().getUiMetrics(),f=[];for(let S=0,k;k=r[S];S++){k.position(a,f);const V=k.getBoundingRectangle();V&&f.push(V)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const r=Ge();mn.equals(this.lastRecordedPageScroll,r)||(this.lastRecordedPageScroll=r,this.updateScreenCalculations_())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(r,a){const f=this.getParentSvg();r!=null&&(this.cachedParentSvgSize.width=r,f.setAttribute("data-cached-width",`${r}`)),a!=null&&(this.cachedParentSvgSize.height=a,f.setAttribute("data-cached-height",`${a}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let r=this.svgGroup_;for(;r;){if(r.tagName==="svg"){this.cachedParentSvg=r;break}r=r.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(se()){var r=this.scale,a=-this.scrollY,f=-this.scrollX;if(!(r===this.oldScale&&1>Math.abs(a-this.oldTop)&&1>Math.abs(f-this.oldLeft))){var S=new(Re(ti))(a,f,r,this.id,this.oldScale);this.oldScale=r,this.oldTop=a,this.oldLeft=f,ce(S)}}}translate(r,a){let f;(f=this.layerManager)==null||f.translateLayers(new mn(r,a),this.scale);let S;(S=this.grid)==null||S.moveTo(r,a),this.maybeFireViewportChangeEvent()}getWidth(){const r=this.getMetrics();return r?r.viewWidth/this.scale:0}setVisible(r){this.isVisible_=r,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(r),this.getFlyout()&&this.getFlyout().setContainerVisible(r),this.getParentSvg().style.display=r?"block":"none",this.toolbox_&&this.toolbox_.setVisible(r),r||this.hideChaff(!0))}render(){for(var r=this.getAllBlocks(!1),a=r.length-1;0<=a;a--)r[a].queueRender();if(this.currentGesture_)for(r=this.currentGesture_.getInsertionMarkers(),a=0;a<r.length;a++)r[a].queueRender();gr().then(()=>void this.markerManager.updateMarkers())}highlightBlock(r,a){if(a===void 0){for(let f=0,S;S=this.highlightedBlocks[f];f++)S.setHighlighted(!1);this.highlightedBlocks.length=0}(r=r?this.getBlockById(r):null)&&((a=a===void 0||a)?this.highlightedBlocks.indexOf(r)===-1&&this.highlightedBlocks.push(r):Ct(this.highlightedBlocks,r),r.setHighlighted(a))}paste(r){if(xe("Blockly.WorkspaceSvg.prototype.paste","v10","v11","Blockly.clipboard.paste"),!this.rendered||!r.type&&!r.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);let f;try{f=r.type?this.pasteBlock_(null,r):r.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(r):this.pasteBlock_(r,null)}finally{t.setGroup$$module$build$src$core$events$utils(a)}return f}pasteBlock_(r,a){t.disable$$module$build$src$core$events$utils();let f;try{let S=0,k=0;if(r){f=no(r,this);let V;S=parseInt((V=r.getAttribute("x"))!=null?V:"0"),this.RTL&&(S=-S);let _e;k=parseInt((_e=r.getAttribute("y"))!=null?_e:"0")}else a&&(f=Hn(a,this),S=a.x||10,this.RTL&&(S=this.getWidth()-S),k=a.y||10);if(!isNaN(S)&&!isNaN(k)){let V;do{V=!1;const _e=this.getAllBlocks(!1);for(let ze=0,jt;jt=_e[ze];ze++){const Gn=jt.getRelativeToSurfaceXY();if(1>=Math.abs(S-Gn.x)&&1>=Math.abs(k-Gn.y)){V=!0;break}}if(!V){const ze=f.getConnections_(!1);for(let jt=0,Gn;Gn=ze[jt];jt++)if(Gn.closest(t.config$$module$build$src$core$config.snapRadius,new mn(S,k)).connection){V=!0;break}}V&&(S=this.RTL?S-t.config$$module$build$src$core$config.snapRadius:S+t.config$$module$build$src$core$config.snapRadius,k+=2*t.config$$module$build$src$core$config.snapRadius)}while(V);f.moveTo(new mn(S,k))}}finally{t.enable$$module$build$src$core$events$utils()}return se()&&!f.isShadow()&&ce(new(Re(t.CREATE$$module$build$src$core$events$utils))(f)),f.select(),f}pasteWorkspaceComment_(r){t.disable$$module$build$src$core$events$utils();let a;try{a=Bl.fromXmlRendered(r,this);let f,S=parseInt((f=r.getAttribute("x"))!=null?f:"0"),k,V=parseInt((k=r.getAttribute("y"))!=null?k:"0");isNaN(S)||isNaN(V)||(this.RTL&&(S=-S),a.moveBy(S+50,V+50))}finally{t.enable$$module$build$src$core$events$utils()}return se()&&Zc.fireCreateEvent(a),a.select(),a}refreshToolboxSelection(){const r=this.isFlyout?this.targetWorkspace:this;r&&!r.currentGesture_&&r.toolbox_&&r.toolbox_.getFlyout()&&r.toolbox_.refreshSelection()}renameVariableById(r,a){super.renameVariableById(r,a),this.refreshToolboxSelection()}deleteVariableById(r){super.deleteVariableById(r),this.refreshToolboxSelection()}createVariable(r,a,f){return r=super.createVariable(r,a,f),this.refreshToolboxSelection(),r}recordDragTargets(){const r=this.componentManager.getComponents(pl.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let a=0,f;f=r[a];a++){const S=f.getClientRect();S&&this.dragTargetAreas.push({component:f,clientRect:S})}}newBlock(r,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(r){for(let a=0,f;f=this.dragTargetAreas[a];a++)if(f.clientRect.contains(r.clientX,r.clientY))return f.component;return null}onMouseDown_(r){const a=this.getGesture(r);a&&a.handleWsStart(r,this)}startDrag(r,a){r=Rt(r,this.getParentSvg(),this.getInverseScreenCTM()),r.x/=this.scale,r.y/=this.scale,this.dragDeltaXY=mn.difference(a,r)}moveDrag(r){return r=Rt(r,this.getParentSvg(),this.getInverseScreenCTM()),r.x/=this.scale,r.y/=this.scale,mn.sum(this.dragDeltaXY,r)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const r=!!this.scrollbar;return this.isMovable()&&(!r||r&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const r=!!this.scrollbar;return this.isMovable()&&(!r||r&&this.scrollbar.canScrollVertically())}onMouseWheel_(r){if(lm.inProgress())r.preventDefault(),r.stopPropagation();else{var a=this.options.zoomOptions&&this.options.zoomOptions.wheel,f=this.options.moveOptions&&this.options.moveOptions.wheel;if(a||f){var S=yt(r);if(Cr)var k=r.metaKey;a&&(r.ctrlKey||k||!f)?(S=-S.y/50,a=Rt(r,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(a.x,a.y,S)):(a=this.scrollX-S.x,f=this.scrollY-S.y,r.shiftKey&&!S.x&&(a=this.scrollX-S.y,f=this.scrollY),this.scroll(a,f)),r.preventDefault()}}}getBlocksBoundingBox(){const r=this.getTopBoundedElements();if(!r.length)return new Ri(0,0,0,0);const a=r[0].getBoundingRectangle();for(let S=1;S<r.length;S++){var f=r[S];f.isInsertionMarker&&f.isInsertionMarker()||(f=f.getBoundingRectangle(),f.top<a.top&&(a.top=f.top),f.bottom>a.bottom&&(a.bottom=f.bottom),f.left<a.left&&(a.left=f.left),f.right>a.right&&(a.right=f.right))}return a}cleanUp(){this.setResizesEnabled(!1),t.setGroup$$module$build$src$core$events$utils(!0);const r=this.getTopBlocks(!0);let a=0;for(let f=0,S;S=r[f];f++){if(!S.isMovable())continue;const k=S.getRelativeToSurfaceXY();S.moveBy(-k.x,a-k.y,["cleanup"]),S.snapToGrid(),a=S.getRelativeToSurfaceXY().y+S.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}t.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(r){if(!this.options.readOnly&&!this.isFlyout){var a=ki.registry.getContextMenuOptions(ki.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(a,r),Uu(r,a,this.RTL)}}updateToolbox(r){if(r=gt(r)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Wt(r)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=r,this.toolbox_.render(r)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=r,this.flyout.show(r)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(L(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(r,a,f){f=Math.pow(this.options.zoomOptions.scaleSpeed,f);const S=this.scale*f;if(this.scale!==S){S>this.options.zoomOptions.maxScale?f=this.options.zoomOptions.maxScale/this.scale:S<this.options.zoomOptions.minScale&&(f=this.options.zoomOptions.minScale/this.scale);var k=this.getCanvas().getCTM(),V=this.getParentSvg().createSVGPoint();V.x=r,V.y=a,V=V.matrixTransform(k.inverse()),r=V.x,a=V.y,k=k.translate(r*(1-f),a*(1-f)).scale(f),this.scrollX=k.e,this.scrollY=k.f,this.setScale(S)}}zoomCenter(r){var a=this.getMetrics();let f;this.flyout?(f=a.svgWidth?a.svgWidth/2:0,a=a.svgHeight?a.svgHeight/2:0):(f=a.viewWidth/2+a.absoluteLeft,a=a.viewHeight/2+a.absoluteTop),this.zoom(f,a,r)}zoomToFit(){if(this.isMovable()){var r=this.getMetrics(),a=r.viewWidth;r=r.viewHeight;var f=this.getBlocksBoundingBox(),S=2*qE,k=f.right-f.left+S;if(f=f.bottom-f.top+S,k){this.flyout&&(this.horizontalLayout?(r+=this.flyout.getHeight(),f+=this.flyout.getHeight()/this.scale):(a+=this.flyout.getWidth(),k+=this.flyout.getWidth()/this.scale)),a/=k,r/=f,t.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(a,r)),this.scrollCenter()}finally{t.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){we(this.getCanvas(),"blocklyCanvasTransitioning"),we(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){Tt(this.getCanvas(),"blocklyCanvasTransitioning"),Tt(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var r=this.getMetrics(),a=(r.scrollWidth-r.viewWidth)/2,f=(r.scrollHeight-r.viewHeight)/2;a=-a-r.scrollLeft,f=-f-r.scrollTop,this.scroll(a,f)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(r,a){if(this.isMovable()){var f=r?this.getBlockById(r):null;if(f){r=f.getRelativeToSurfaceXY(),f=a?{height:f.height,width:f.width}:f.getHeightWidth();var S=this.scale;a=(r.x+(this.RTL?-1:1)*f.width/2)*S,r=(r.y+f.height/2)*S,f=this.getMetrics(),this.scroll(-(a-f.viewWidth/2),-(r-f.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(r){this.options.zoomOptions.maxScale&&r>this.options.zoomOptions.maxScale?r=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&r<this.options.zoomOptions.minScale&&(r=this.options.zoomOptions.minScale),this.scale=r,this.hideChaff(!1),(r=this.getFlyout(!1))&&r.isVisible()&&(r.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),r=this.getMetrics(),this.scrollX-=r.absoluteLeft,this.scrollY-=r.absoluteTop,r.viewLeft+=r.absoluteLeft,r.viewTop+=r.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(r):this.scrollbar.resizeContent(r))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(r,a){this.hideChaff(!0);const f=this.getMetrics();r=Math.min(r,-f.scrollLeft),a=Math.min(a,-f.scrollTop);const S=f.scrollTop+Math.max(0,f.scrollHeight-f.viewHeight);r=Math.max(r,-(f.scrollLeft+Math.max(0,f.scrollWidth-f.viewWidth))),a=Math.max(a,-S),this.scrollX=r,this.scrollY=a,this.scrollbar&&this.scrollbar.set(-(r+f.scrollLeft),-(a+f.scrollTop),!1),r+=f.absoluteLeft,a+=f.absoluteTop,this.translate(r,a)}getBlockById(r){return super.getBlockById(r)}getAllBlocks(r=!1){return super.getAllBlocks(r)}getTopBlocks(r=!1){return super.getTopBlocks(r)}addTopBlock(r){this.addTopBoundedElement(r),super.addTopBlock(r)}removeTopBlock(r){this.removeTopBoundedElement(r),super.removeTopBlock(r)}addTopComment(r){this.addTopBoundedElement(r),super.addTopComment(r)}removeTopComment(r){this.removeTopBoundedElement(r),super.removeTopComment(r)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(r){this.topBoundedElements.push(r)}removeTopBoundedElement(r){Ct(this.topBoundedElements,r)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(r){const a=!this.resizesEnabled&&r;this.resizesEnabled=r,a&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(r,a){if(typeof a!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(r,a)}getButtonCallback(r){let a;return(a=this.flyoutButtonCallbacks.get(r))!=null?a:null}removeButtonCallback(r){this.flyoutButtonCallbacks.delete(r)}registerToolboxCategoryCallback(r,a){if(typeof a!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(r,a)}getToolboxCategoryCallback(r){return this.toolboxCategoryCallbacks.get(r)||null}removeToolboxCategoryCallback(r){this.toolboxCategoryCallbacks.delete(r)}getGesture(r){const a=r.type==="pointerdown",f=this.currentGesture_;return f?a&&f.hasStarted()?(console.warn("Tried to start the same gesture twice."),f.cancel(),null):f:a?this.currentGesture_=new lm(r,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(r=!1){$l(),Kl(),il(),this.hideComponents(r)}hideComponents(r=!1){this.getComponentManager().getComponents(pl.Capability.AUTOHIDEABLE,!0).forEach(a=>a.autoHide(r))}static setTopLevelWorkspaceMetrics_(r){const a=this.getMetrics();typeof r.x=="number"&&(this.scrollX=-(a.scrollLeft+(a.scrollWidth-a.viewWidth)*r.x)),typeof r.y=="number"&&(this.scrollY=-(a.scrollTop+(a.scrollHeight-a.viewHeight)*r.y)),this.translate(this.scrollX+a.absoluteLeft,this.scrollY+a.absoluteTop)}},Zv=class extends g{constructor(r,a){super(a),this.type=Ll,this.isOpen=r}toJson(){const r=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return r.isOpen=this.isOpen,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Zv),a.isOpen=r.isOpen,a}};i(Pt.EVENT,Ll,Zv);var eb=class extends dp{constructor(r){if(super(r),this.type=t.DELETE$$module$build$src$core$events$utils,r){if(r.getParent())throw Error("Connected blocks cannot be deleted.");r.isShadow()&&(this.recordUndo=!1),this.oldXml=vr(r),this.ids=Se(r),this.wasShadow=r.isShadow(),this.oldJson=xi(r,{addCoordinates:!0})}}toJson(){const r=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return r.oldXml=Ki(this.oldXml),r.ids=this.ids,r.wasShadow=this.wasShadow,r.oldJson=this.oldJson,this.recordUndo||(r.recordUndo=this.recordUndo),r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new eb),a.oldXml=t.textToDom$$module$build$src$core$utils$xml(r.oldXml),a.ids=r.ids,a.wasShadow=r.wasShadow||a.oldXml.tagName.toLowerCase()==="shadow",a.oldJson=r.oldJson,r.recordUndo!==void 0&&(a.recordUndo=r.recordUndo),a}run(r){const a=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(r)for(r=0;r<this.ids.length;r++){const f=this.ids[r],S=a.getBlockById(f);S?S.dispose(!1):f===this.blockId&&console.warn("Can't delete non-existent block: "+f)}else Hn(this.oldJson,a)}};i(Pt.EVENT,t.DELETE$$module$build$src$core$events$utils,eb);var x0=class{constructor(r,a,f){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.isInsertionMarker_=this.disposing=!1,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=r,this.id=f&&!r.getBlockById(f)?f:te(),r.setBlockById(this.id,this),this.xy_=new mn(0,0),this.isInFlyout=r.isFlyout,this.isInMutator=r.isMutator,this.RTL=r.RTL,a){if(this.type=a,f=Wr[a],!f||typeof f!="object")throw TypeError("Invalid block definition for type: "+a);Object.assign(this,f)}r.addTopBlock(this),r.addTypedBlock(this),new.target===x0&&this.doInit_()}doInit_(){const r=t.getGroup$$module$build$src$core$events$utils();r||t.setGroup$$module$build$src$core$events$utils(!0);const a=le();try{typeof this.init=="function"&&(he(!1),this.init(),he(a)),se()&&ce(new(Re(t.CREATE$$module$build$src$core$events$utils))(this))}finally{t.setGroup$$module$build$src$core$events$utils(r),he(a)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(r){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(r),se()&&ce(new(Re(t.DELETE$$module$build$src$core$events$utils))(this)),this.workspace.removeTopBlock(this),this.disposeInternal())}disposeInternal(){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0,typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(r=>r.disposeInternal()),this.inputList.forEach(r=>r.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(r=>r.dispose()),this.disposed=!0)}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(const r of this.inputList)for(const a of r.fieldRow)a.initModel&&a.initModel()}unplug(r){this.outputConnection&&this.unplugFromRow_(r),this.previousConnection&&this.unplugFromStack_(r)}unplugFromRow_(r){let a=null,f;(f=this.outputConnection)!=null&&f.isConnected()&&(a=this.outputConnection.targetConnection,this.outputConnection.disconnect()),a&&r&&(r=this.getOnlyValueConnection_())&&r.isConnected()&&!r.targetBlock().isShadow()&&(r=r.targetConnection,r==null||r.disconnect(),this.workspace.connectionChecker.canConnect(r,a,!1)?a.connect(r):r==null||r.onFailedConnect(a))}getOnlyValueConnection_(){let r=null;for(let a=0;a<this.inputList.length;a++){const f=this.inputList[a].connection;if(f&&f.type===Pn.INPUT_VALUE&&f.targetConnection){if(r)return null;r=f}}return r}unplugFromStack_(r){let a=null;var f;if((f=this.previousConnection)!=null&&f.isConnected()&&(a=this.previousConnection.targetConnection,this.previousConnection.disconnect()),f=this.getNextBlock(),r&&f&&!f.isShadow()){let S,k;r=(k=(S=this.nextConnection)==null?void 0:S.targetConnection)!=null?k:null,r==null||r.disconnect(),a&&this.workspace.connectionChecker.canConnect(a,r,!1)&&a.connect(r)}}getConnections_(r){r=[],this.outputConnection&&r.push(this.outputConnection),this.previousConnection&&r.push(this.previousConnection),this.nextConnection&&r.push(this.nextConnection);for(let a=0,f;f=this.inputList[a];a++)f.connection&&r.push(f.connection);return r}lastConnectionInStack(r){let a=this.nextConnection;for(;a;){const f=a.targetBlock();if(!f||r&&f.isShadow())return a;a=f.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(r){for(let a=0,f;f=this.inputList[a];a++)if(f.connection&&f.connection.targetBlock()===r)return f;return null}getSurroundParent(){let r=this,a;do if(a=r,r=r.getParent(),!r)return null;while(r.getNextBlock()===a);return r}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let r,a=this;do r=a,a=r.parentBlock_;while(a);return r}getTopStackBlock(){let r=this,a;do a=r.getPreviousBlock();while(a&&a.getNextBlock()===r&&(r=a));return r}getChildren(r){if(!r)return this.childBlocks_;r=[];for(let f=0,S;S=this.inputList[f];f++)if(S.connection){var a=S.connection.targetBlock();a&&r.push(a)}return(a=this.getNextBlock())&&r.push(a),r}setParent(r){if(r!==this.parentBlock_){var a=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),f=!!a;if(f&&r&&a!==r)throw Error("Block connected to superior one that is not new parent.");if(!f&&r)throw Error("Block not connected to new parent.");if(f&&!r)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Ct(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=r)?r.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(r){const a=[this],f=this.getChildren(r);for(let S,k=0;S=f[k];k++)a.push(...S.getDescendants(r));return a}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable_}setDeletable(r){this.deletable_=r}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable_}setMovable(r){this.movable_=r}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(j(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(r){this.isShadow_=r}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(r){this.isInsertionMarker_=r}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable_}setEditable(r){this.editable_=r;for(let a=0,f;f=this.inputList[a];a++)for(let S=0,k;k=f.fieldRow[S];S++)k.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const r of this.inputList)if(r.connection||1<r.fieldRow.length)return!1;return!0}getMatchingConnection(r,a){const f=this.getConnections_(!0);if(r=r.getConnections_(!0),f.length!==r.length)throw Error("Connection lists did not match in length.");for(let S=0;S<r.length;S++)if(r[S]===a)return f[S];return null}setHelpUrl(r){this.helpUrl=r}setTooltip(r){this.tooltip=r}getTooltip(){return ao(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(r){r=Ji(r),this.hue_=r.hue,this.colour_=r.hex}setStyle(r){this.styleName_=r}setOnChange(r){if(r&&typeof r!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=r,this.onchangeWrapper_=r.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(r){if(typeof r!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(r===void 0?"nothing":r+" of type "+typeof r)+" instead");for(let a=0,f;f=this.inputList[a];a++)for(let S=0,k;k=f.fieldRow[S];S++)if(k.name===r)return k;return null}getVars(){const r=[];for(let a=0,f;f=this.inputList[a];a++)for(let S=0,k;k=f.fieldRow[S];S++)k.referencesVariables()&&r.push(k.getValue());return r}getVarModels(){const r=[];for(let a=0,f;f=this.inputList[a];a++)for(let S=0,k;k=f.fieldRow[S];S++)if(k.referencesVariables()){const V=this.workspace.getVariableById(k.getValue());V&&r.push(V)}return r}updateVarName(r){for(let a=0,f;f=this.inputList[a];a++)for(let S=0,k;k=f.fieldRow[S];S++)k.referencesVariables()&&r.getId()===k.getValue()&&k.refreshVariableName()}renameVarById(r,a){for(let f=0,S;S=this.inputList[f];f++)for(let k=0,V;V=S.fieldRow[k];k++)V.referencesVariables()&&r===V.getValue()&&V.setValue(a)}getFieldValue(r){return(r=this.getField(r))?r.getValue():null}setFieldValue(r,a){const f=this.getField(a);if(!f)throw Error('Field "'+a+'" not found.');f.setValue(r)}setPreviousStatement(r,a){if(r)a===void 0&&(a=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Pn.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(a);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(r,a){if(r)a===void 0&&(a=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Pn.NEXT_STATEMENT)),this.nextConnection.setCheck(a);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(r,a){if(r)a===void 0&&(a=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Pn.OUTPUT_VALUE)),this.outputConnection.setCheck(a);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(r){this.inputsInline!==r&&(ce(new(Re(t.CHANGE$$module$build$src$core$events$utils))(this,"inline",null,this.inputsInline,r)),this.inputsInline=r)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var r=1;r<this.inputList.length;r++)if(this.inputList[r-1]instanceof Af&&this.inputList[r]instanceof Af)return!1;for(r=1;r<this.inputList.length;r++)if(this.inputList[r-1]instanceof t.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[r]instanceof Af)return!0;for(r=0;r<this.inputList.length;r++)if(this.inputList[r]instanceof pm)return!0;return!1}setOutputShape(r){this.outputShape_=r}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(r){if(this.isEnabled()!==r){const a=this.disabled;this.disabled=!r,ce(new(Re(t.CHANGE$$module$build$src$core$events$utils))(this,"disabled",null,a,!r))}}getInheritedDisabled(){let r=this.getSurroundParent();for(;r;){if(r.disabled)return!0;r=r.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(r){this.collapsed_!==r&&(ce(new(Re(t.CHANGE$$module$build$src$core$events$utils))(this,"collapsed",null,this.collapsed_,r)),this.collapsed_=r)}toString(r,a){a=this.toTokens(a);for(let S=2;S<a.length;S++)a[S-2]==="("&&a[S]===")"&&(a[S-2]=a[S-1],a.splice(S-1,2));let f="";return a=a.reduce((S,k)=>(S=S+(f==="("||k===")"?"":" ")+k,f=k[k.length-1],S),""),a=a.trim()||"???",r&&a.length>r&&(a=a.substring(0,r-3)+"..."),a}toTokens(r="?"){const a=[];for(const S of this.inputList)if(S.name!=Mg){for(const k of S.fieldRow)a.push(k.getText());if(S.connection){const k=S.connection.targetBlock();if(k){var f=S.connection;let V=f.getCheck();!V&&f.targetConnection&&(V=f.targetConnection.getCheck()),(f=!!V&&(V.indexOf("Boolean")!==-1||V.indexOf("Number")!==-1))&&a.push("("),a.push(...k.toTokens(r)),f&&a.push(")")}else a.push(r)}}return a}appendValueInput(r){return this.appendInput(new t.ValueInput$$module$build$src$core$inputs$value_input(r,this))}appendStatementInput(r){return this.statementInputCount++,this.appendInput(new Zh(r,this))}appendDummyInput(r=""){return this.appendInput(new Af(r,this))}appendEndRowInput(r=""){return this.appendInput(new pm(r,this))}appendInput(r){return this.inputList.push(r),r}appendInputFromRegistry(r,a){return(r=d(Pt.INPUT,r,!1))?this.appendInput(new r(a,this)):null}jsonInit(r){var a=r.type?'Block "'+r.type+'": ':"";if(r.output&&r.previousStatement)throw Error(a+"Must not have both an output and a previousStatement.");for(var f=0;r["args"+f];){if(r["message"+f]===void 0)throw Error(a+`args${f} must have a corresponding message (message${f}).`);f++}if(r.style&&r.style.hat&&(this.hat=r.style.hat,r.style=null),r.style&&r.colour)throw Error(a+"Must not have both a colour and a style.");for(r.style?this.jsonInitStyle_(r,a):this.jsonInitColour_(r,a),f=0;r["message"+f]!==void 0;)this.interpolate_(r["message"+f],r["args"+f]||[],r["implicitAlign"+f]||r["lastDummyAlign"+f],a),f++;if(r.inputsInline!==void 0&&(t.disable$$module$build$src$core$events$utils(),this.setInputsInline(r.inputsInline),t.enable$$module$build$src$core$events$utils()),r.output!==void 0&&this.setOutput(!0,r.output),r.outputShape!==void 0&&this.setOutputShape(r.outputShape),r.previousStatement!==void 0&&this.setPreviousStatement(!0,r.previousStatement),r.nextStatement!==void 0&&this.setNextStatement(!0,r.nextStatement),r.tooltip!==void 0&&(f=Gr(r.tooltip),this.setTooltip(f)),r.enableContextMenu!==void 0&&(this.contextMenu=!!r.enableContextMenu),r.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!r.suppressPrefixSuffix),r.helpUrl!==void 0&&(f=Gr(r.helpUrl),this.setHelpUrl(f)),typeof r.extensions=="string"&&(console.warn(a+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+r.type+"' block."),r.extensions=[r.extensions]),r.mutator!==void 0&&qi(r.mutator,this,!0),r=r.extensions,Array.isArray(r))for(a=0;a<r.length;a++)qi(r[a],this,!1)}jsonInitColour_(r,a){if("colour"in r)if(r.colour===void 0)console.warn(a+"Undefined colour value.");else{r=r.colour;try{this.setColour(r)}catch{console.warn(a+"Illegal colour value: ",r)}}}jsonInitStyle_(r,a){r=r.style;try{this.setStyle(r)}catch{console.warn(a+"Style does not exist: ",r)}}mixin(r,a){if(a!==void 0&&typeof a!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!a){a=[];for(const f in r)this[f]!==void 0&&a.push(f);if(a.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(a))}Object.assign(this,r)}interpolate_(r,a,f,S){r=za(r),this.validateTokens_(r,a.length),a=this.interpolateArguments_(r,a,f),f=[];for(let k=0,V;V=a[k];k++)if(this.isInputKeyword_(V.type)){if(r=this.inputFromJson_(V,S)){for(let _e=0,ze;ze=f[_e];_e++)r.appendField(ze[0],ze[1]);f.length=0}}else(r=this.fieldFromJson_(V))&&f.push([r,V.name])}validateTokens_(r,a){const f=[];let S=0;for(let k=0;k<r.length;k++){const V=r[k];if(typeof V=="number"){if(1>V||V>a)throw Error('Block "'+this.type+'": Message index %'+V+" out of range.");if(f[V])throw Error('Block "'+this.type+'": Message index %'+V+" duplicated.");f[V]=!0,S++}}if(S!==a)throw Error('Block "'+this.type+'": Message does not reference all '+a+" arg(s).")}interpolateArguments_(r,a,f){const S=[];for(let V=0;V<r.length;V++){var k=r[V];if(typeof k=="number"&&(k=a[k-1]),typeof k=="string"){if(k===`
`)k={type:"input_end_row"},f&&(k.align=f);else if(k=this.stringToFieldJson_(k),!k)continue}S.push(k)}return(r=S.length)&&!this.isInputKeyword_(S[r-1].type)&&(r={type:"input_dummy"},f&&(r.align=f),S.push(r)),S}fieldFromJson_(r){const a=t.fromJson$$module$build$src$core$field_registry(r);return!a&&r.alt?typeof r.alt=="string"?(r=this.stringToFieldJson_(r.alt))?this.fieldFromJson_(r):null:this.fieldFromJson_(r.alt):a}inputFromJson_(r,a){var f={LEFT:t.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:t.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:t.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:t.Align$$module$build$src$core$inputs$align.CENTRE};let S;switch(r.type){case"input_value":S=this.appendValueInput(r.name);break;case"input_statement":S=this.appendStatementInput(r.name);break;case"input_dummy":S=this.appendDummyInput(r.name);break;case"input_end_row":S=this.appendEndRowInput(r.name);break;default:S=this.appendInputFromRegistry(r.type,r.name)}return S?(r.check&&S.setCheck(r.check),r.align&&(f=f[r.align.toUpperCase()],f===void 0?console.warn(a+"Illegal align value: ",r.align):S.setAlign(f)),S):null}isInputKeyword_(r){return r==="input_value"||r==="input_statement"||r==="input_dummy"||r==="input_end_row"||u(Pt.INPUT,r)}stringToFieldJson_(r){return(r=r.trim())?{type:"field_label",text:r}:null}moveInputBefore(r,a){if(r!==a){var f=-1,S=a?-1:this.inputList.length;for(let k=0,V;V=this.inputList[k];k++)if(V.name===r){if(f=k,S!==-1)break}else if(a&&V.name===a&&(S=k,f!==-1))break;if(f===-1)throw Error('Named input "'+r+'" not found.');if(S===-1)throw Error('Reference input "'+a+'" not found.');this.moveNumberedInputBefore(f,S)}}moveNumberedInputBefore(r,a){if(r===a)throw Error("Can't move input to itself.");if(r>=this.inputList.length)throw RangeError("Input index "+r+" out of bounds.");if(a>this.inputList.length)throw RangeError("Reference input "+a+" out of bounds.");const f=this.inputList[r];this.inputList.splice(r,1),r<a&&a--,this.inputList.splice(a,0,f)}removeInput(r,a){for(let f=0,S;S=this.inputList[f];f++)if(S.name===r)return S instanceof Zh&&this.statementInputCount--,S.dispose(),this.inputList.splice(f,1),!0;if(a)return!1;throw Error("Input not found: "+r)}getInput(r){for(let a=0,f;f=this.inputList[a];a++)if(f.name===r)return f;return null}getInputTargetBlock(r){return(r=this.getInput(r))&&r.connection&&r.connection.targetBlock()}getCommentText(){let r,a;return(a=(r=this.getIcon(qh.TYPE))==null?void 0:r.getText())!=null?a:null}setCommentText(r){var a;let f;const S=(f=(a=this.getIcon(qh.TYPE))==null?void 0:a.getText())!=null?f:null;S!==r&&(r!==null?((a=this.getIcon(qh.TYPE))||(a=this.addIcon(new qh(this))),t.disable$$module$build$src$core$events$utils(),a.setText(r),t.enable$$module$build$src$core$events$utils()):this.removeIcon(qh.TYPE),ce(new(Re(t.CHANGE$$module$build$src$core$events$utils))(this,"comment",null,S,r)))}setWarningText(r,a){}setMutator(r){}addIcon(r){if(this.hasIcon(r.getType()))throw new Ty(r);return this.icons.push(r),this.icons.sort((a,f)=>a.getWeight()-f.getWeight()),r}removeIcon(r){if(!this.hasIcon(r))return!1;let a;return(a=this.getIcon(r))==null||a.dispose(),this.icons=this.icons.filter(f=>!f.getType().equals(r)),!0}hasIcon(r){return this.icons.some(a=>a.getType().equals(r))}getIcon(r){return r instanceof Wo?this.icons.find(a=>a.getType().equals(r)):this.icons.find(a=>a.getType().toString()===r)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy_}moveBy(r,a,f){if(this.parentBlock_)throw Error("Block has parent");const S=new(Re(t.MOVE$$module$build$src$core$events$utils))(this);f&&S.setReason(f),this.xy_.translate(r,a),S.recordNew(),ce(S)}makeConnection_(r){return new hs(this,r)}allInputsFilled(r){if(r===void 0&&(r=!0),!r&&this.isShadow())return!1;for(let f=0,S;S=this.inputList[f];f++)if(S.connection){var a=S.connection.targetBlock();if(!a||!a.allInputsFilled(r))return!1}return(a=this.getNextBlock())?a.allInputsFilled(r):!0}toDevString(){let r=this.type?'"'+this.type+'" block':"Block";return this.id&&(r+=' (id="'+this.id+'")'),r}};x0.COLLAPSED_INPUT_NAME=Mg,x0.COLLAPSED_FIELD_NAME=Ey;var iT=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(r){this.drawer=r}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(r){const a=this.curNode;this.curNode=r,this.drawer&&this.drawer.draw(a,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},tb=class extends iT{constructor(){super(),this.type="cursor"}next(){var r=this.getCurNode();if(!r)return null;for(r=r.next();r&&r.next()&&(r.getType()===Qt.types.NEXT||r.getType()===Qt.types.BLOCK);)r=r.next();return r&&this.setCurNode(r),r}in(){var r=this.getCurNode();if(!r)return null;(r.getType()===Qt.types.PREVIOUS||r.getType()===Qt.types.OUTPUT)&&(r=r.next());let a,f;return(r=(f=(a=r)==null?void 0:a.in())!=null?f:null)&&this.setCurNode(r),r}prev(){var r=this.getCurNode();if(!r)return null;for(r=r.prev();r&&r.prev()&&(r.getType()===Qt.types.NEXT||r.getType()===Qt.types.BLOCK);)r=r.prev();return r&&this.setCurNode(r),r}out(){var r=this.getCurNode();return r?((r=r.out())&&r.getType()===Qt.types.BLOCK&&(r=r.prev()||r),r&&this.setCurNode(r),r):null}};i(Pt.CURSOR,kl,tb);var x_=class extends tb{constructor(){super()}next(){var r=this.getCurNode();return r?((r=this.getNextNode_(r,this.validNode_))&&this.setCurNode(r),r):null}in(){return this.next()}prev(){var r=this.getCurNode();return r?((r=this.getPreviousNode_(r,this.validNode_))&&this.setCurNode(r),r):null}out(){return this.prev()}getNextNode_(r,a){if(!r)return null;const f=r.in()||r.next();return a(f)?f:f?this.getNextNode_(f,a):(r=this.findSiblingOrParent(r.out()),a(r)?r:r?this.getNextNode_(r,a):null)}getPreviousNode_(r,a){if(!r)return null;let f=r.prev();return f=f?this.getRightMostChild(f):r.out(),a(f)?f:f?this.getPreviousNode_(f,a):null}validNode_(r){let a=!1;return r=r&&r.getType(),(r===Qt.types.OUTPUT||r===Qt.types.INPUT||r===Qt.types.FIELD||r===Qt.types.NEXT||r===Qt.types.PREVIOUS||r===Qt.types.WORKSPACE)&&(a=!0),a}findSiblingOrParent(r){if(!r)return null;const a=r.next();return a||this.findSiblingOrParent(r.out())}getRightMostChild(r){if(!r.in())return r;for(r=r.in();r&&r.next();)r=r.next();return this.getRightMostChild(r)}};x_.registrationName="basicCursor",i(Pt.CURSOR,x_.registrationName,x_);var sT=class extends x_{validNode_(r){let a=!1;const f=r&&r.getType();return r&&(r=r.getLocation(),f===Qt.types.FIELD&&r&&r.isTabNavigable()&&r.isClickable()&&(a=!0)),a}},nb=10,ed=class extends hs{constructor(r,a){super(r,a),this.highlighted=!1,this.targetConnection=null,this.db=r.workspace.connectionDBList[a],this.dbOpposite=r.workspace.connectionDBList[qt[a]],this.offsetInBlock=new mn(0,0),this.trackedState=ed.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===ed.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let r,a;(a=(r=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||a.call(r,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(r){const a=this.x-r.x;return r=this.y-r.y,Math.sqrt(a*a+r*r)}bumpAwayFrom(r){if(!this.sourceBlock_.workspace.isDragging()){var a=this.sourceBlock_.getRootBlock();if(!a.isInFlyout){var f=!1;if(!a.isMovable()){if(a=r.getSourceBlock().getRootBlock(),!a.isMovable())return;r=this,f=!0}var S=O()==a;S||a.addSelect();var k=r.x+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*nb)-this.x,V=r.y+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*nb)-this.y;f&&(V=-V),a.RTL&&(k=r.x-t.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*nb)-this.x),a.moveBy(k,V,["bump"]),S||a.removeSelect()}}}moveTo(r,a){let f=!1;return this.trackedState===ed.TrackedState.WILL_TRACK?(this.db.addConnection(this,a),this.trackedState=ed.TrackedState.TRACKED,f=!0):this.trackedState===ed.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,a),f=!0),this.x=r,this.y=a,f}moveBy(r,a){return this.moveTo(this.x+r,this.y+a)}moveToOffset(r){return this.moveTo(r.x+this.offsetInBlock.x,r.y+this.offsetInBlock.y)}setOffsetInBlock(r,a){this.offsetInBlock.x=r,this.offsetInBlock.y=a}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var r=this.targetConnection;const a=this.targetBlock();r&&a&&(r=mn.difference(this.offsetInBlock,r.offsetInBlock),a.translate(r.x,r.y))}closest(r,a){return this.dbOpposite.searchForClosest(this,r,a)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(r){r&&this.trackedState===ed.TrackedState.TRACKED||!r&&this.trackedState===ed.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(r?(this.db.addConnection(this,this.y),this.trackedState=ed.TrackedState.TRACKED):(this.trackedState===ed.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=ed.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const r=this.targetBlock().getDescendants(!1);for(let a=0;a<r.length;a++){const f=r[a],S=f.getConnections_(!0);for(let k=0;k<S.length;k++)S[k].setTracking(!1);for(const k of f.getIcons())eu(k)&&k.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let r=[];if(this.type!==Pn.INPUT_VALUE&&this.type!==Pn.NEXT_STATEMENT)return r;const a=this.targetBlock();if(a){let f;a.isCollapsed()?(f=[],a.outputConnection&&f.push(a.outputConnection),a.nextConnection&&f.push(a.nextConnection),a.previousConnection&&f.push(a.previousConnection)):f=a.getConnections_(!0);for(let S=0;S<f.length;S++)r.push(...f[S].startTrackingAll());r.length||(r=[a])}return r}onFailedConnect(r){const a=this.getSourceBlock();if(le()){const f=t.getGroup$$module$build$src$core$events$utils();setTimeout((function(){a.isDisposed()||a.getParent()||(t.setGroup$$module$build$src$core$events$utils(f),this.bumpAwayFrom(r),t.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),t.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(r=!0){const{parentConnection:a,childConnection:f}=this.getParentAndChildConnections();if(a&&f){var S=a.getSourceBlock(),k=f.getSourceBlock();super.disconnectInternal(r),S.rendered&&S.queueRender(),k.rendered&&(k.updateDisabled(),k.queueRender(),k.getSvgRoot().style.display="block")}}respawnShadow_(){super.respawnShadow_();const r=this.targetBlock();r&&(r.initSvg(),r.queueRender())}neighbours(r){return this.dbOpposite.getNeighbours(this,r)}connect_(r){super.connect_(r);var a=this.getSourceBlock();r=r.getSourceBlock();const f=a.rendered,S=r.rendered;f&&a.updateDisabled(),S&&r.updateDisabled(),f&&S&&(this.type===Pn.NEXT_STATEMENT||this.type===Pn.PREVIOUS_STATEMENT?r.queueRender():a.queueRender()),(a=a.getInputWithBlock(r))&&(a=a.isVisible(),r.getSvgRoot().style.display=a?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}setCheck(r){return super.setCheck(r),this.sourceBlock_.rendered&&this.sourceBlock_.queueRender(),this}};(function(r){r=r.TrackedState||(r.TrackedState={}),r[r.WILL_TRACK=-1]="WILL_TRACK",r[r.UNTRACKED=0]="UNTRACKED",r[r.TRACKED=1]="TRACKED"})(ed||(ed={})),ed.TrackedState;var If=class extends x0{constructor(r,a,f){super(r,a,f),this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.visuallyDisabled=this.rendered=!1,this.translation="",this.bumpNeighboursPid=0,this.dragging=!1,this.relativeCoords=new mn(0,0),this.workspace=r,this.svgGroup_=ie(We.G,{}),this.style=r.getRenderer().getConstants().getBlockStyle(null),this.pathObject=r.getRenderer().makePathObject(this.svgGroup_,this.style),r=this.pathObject.svgPath,r.tooltip=this,Pi(r),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let a=0,f;f=this.inputList[a];a++)f.init();for(var r of this.getIcons())r.initView(this.createIconPointerDownListener(r)),r.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),r=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!r||Ae(r,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,r.parentNode||this.workspace.getCanvas().appendChild(r)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(O()!==this){var r=null;if(O()){r=O().id,t.disable$$module$build$src$core$events$utils();try{O().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}r=new(Re(mo))(r,this.id,this.workspace.id),ce(r),P(this),this.addSelect()}}unselect(){if(O()===this){var r=new(Re(mo))(this.id,null,this.workspace.id);r.workspaceId=this.workspace.id,ce(r),P(null),this.removeSelect()}}setParent(r){const a=this.parentBlock_;if(r!==a){ne(),super.setParent(r),fe();var f=this.getSvgRoot();if(!this.workspace.isClearing&&f){var S=this.getRelativeToSurfaceXY();r?r.getSvgRoot().appendChild(f):a&&((r=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(f,r):this.workspace.getCanvas().appendChild(f),this.translate(S.x,S.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const r=this.workspace.getLayerManager();if(!r)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,f=0,S=this.getSvgRoot();if(S)do{const k=fr(S);a+=k.x,f+=k.y,S=S.parentNode}while(S&&!r.hasLayer(S));return new mn(a,f)}moveBy(r,a,f){if(this.parentBlock_)throw Error("Block has parent");const S=se();let k=null;S&&(k=new(Re(t.MOVE$$module$build$src$core$events$utils))(this),f&&k.setReason(f)),r=new mn(r,a),a=this.getRelativeToSurfaceXY(),r=mn.sum(a,r),this.translate(r.x,r.y),this.updateComponentLocations(r),S&&k&&(k.recordNew(),ce(k)),this.workspace.resizeContents()}translate(r,a){this.translation=`translate(${r}, ${a})`,this.relativeCoords=new mn(r,a),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(r,a){const f=this.getRelativeToSurfaceXY();this.moveBy(r.x-f.x,r.y-f.y,a)}moveDuringDrag(r){this.translate(r.x,r.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(r)}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var r=this.workspace.getGrid();if(r&&r.shouldSnap()){var a=r.getSpacing(),f=a/2,S=this.getRelativeToSurfaceXY();r=Math.round(Math.round((S.x-f)/a)*a+f-S.x),a=Math.round(Math.round((S.y-f)/a)*a+f-S.y),(r||a)&&this.moveBy(r,a,["snap"])}}}getBoundingRectangle(){const r=this.getRelativeToSurfaceXY(),a=this.getHeightWidth();let f,S;return this.RTL?(f=r.x-a.width,S=r.x):(f=r.x,S=r.x+a.width),new Ri(r.y,r.y+a.height,f,S)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let r=0,a;a=this.inputList[r];r++)a.markDirty()}setCollapsed(r){this.collapsed_!==r&&(super.setCollapsed(r),this.updateCollapsed_())}updateCollapsed_(){var r=this.isCollapsed();const a=Mg,f=Ey;for(let k=0,V;V=this.inputList[k];k++)V.name!==a&&V.setVisible(!r);for(var S of this.getIcons())S.updateCollapsed();r?(r=this.toString(at),(S=this.getField(f))?S.setValue(r):(this.getInput(a)||this.appendDummyInput(a)).appendField(new Ti(r),f)):(this.updateDisabled(),this.removeInput(a))}tab(r,a){const f=new sT;f.setCurNode(Qt.createFieldNode(r)),r=f.getCurNode(),a?f.next():f.prev(),(a=f.getCurNode())&&a!==r&&(a.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(a))}onMouseDown_(r){const a=this.workspace.getGesture(r);a&&a.handleBlockStart(r,this)}showHelp(){const r=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;r&&window.open(r)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const r=ki.registry.getContextMenuOptions(ki.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(r),r}showContextMenu(r){const a=this.generateContextMenu();a&&a.length&&(Uu(r,a,this.RTL),ud(this))}updateComponentLocations(r){if(this.rendered){this.dragging||this.updateConnectionLocations(r),this.updateIconLocations(r),this.updateFieldLocations(r);for(const a of this.getChildren(!1))a.updateComponentLocations(mn.sum(r,a.relativeCoords))}}updateConnectionLocations(r){for(const a of this.getConnections_(!1))a.moveToOffset(r)}updateIconLocations(r){for(const a of this.getIcons())a.onLocationChange(r)}updateFieldLocations(r){for(const a of this.inputList)for(const f of a.fieldRow)f.onLocationChange(r)}setDragging(r){(this.dragging=r)?(this.translation="",ji.push(...this.getConnections_(!0)),we(this.svgGroup_,"blocklyDragging")):(ji.length=0,Tt(this.svgGroup_,"blocklyDragging"));for(let a=0;a<this.childBlocks_.length;a++)this.childBlocks_[a].setDragging(r)}setMovable(r){super.setMovable(r),this.pathObject.updateMovable(r)}setEditable(r){super.setEditable(r),r=this.getIcons();for(let a=0;a<r.length;a++)r[a].updateEditable()}setShadow(r){super.setShadow(r),this.applyColour()}setInsertionMarker(r){this.isInsertionMarker_!==r&&(this.isInsertionMarker_=r)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(r,a){this.isDeadOrDying()||(wd(),Jl(),a&&this.rendered&&(this.unplug(r),Eu(this)),super.dispose(!!r),ft(this.svgGroup_))}disposeInternal(){this.isDeadOrDying()||(super.disposeInternal(),this.rendered=!1,O()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(r=>clearTimeout(r)),this.warningTextDb.clear(),this.getIcons().forEach(r=>r.dispose()))}checkAndDelete(){this.workspace.isFlyout||(t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),t.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:wf.TYPE,blockState:xi(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:j(this,!0)}}applyColour(){this.pathObject.applyColour(this);const r=this.getIcons();for(let a=0;a<r.length;a++)r[a].applyColour();for(let a=0,f;f=this.inputList[a];a++)for(let S=0,k;k=f.fieldRow[S];S++)k.applyColour()}updateDisabled(){const r=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===r){let a;(a=this.getNextBlock())==null||a.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=r;for(const a of this.getChildren(!1))a.updateDisabled()}}getCommentIcon(){xe("getCommentIcon","v10","v11","getIcon");let r;return(r=this.getIcon(qh.TYPE))!=null?r:null}setWarningText(r,a=""){if(a)this.warningTextDb.has(a)&&(clearTimeout(this.warningTextDb.get(a)),this.warningTextDb.delete(a));else{for(var f of this.warningTextDb.values())clearTimeout(f);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(a,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(a),this.setWarningText(r,a))},100));else if(this.isInFlyout&&(r=null),f=this.getIcon(Xp.TYPE),r){let S=this.getSurroundParent(),k=null;for(;S;)S.isCollapsed()&&(k=S),S=S.getSurroundParent();k&&k.setWarningText(t.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,If.COLLAPSED_WARNING_ID),f?f.addMessage(r,a):this.addIcon(new Xp(this).addMessage(r,a))}else f&&(a?(f.addMessage("",a),f.getText()||this.removeIcon(Xp.TYPE)):this.removeIcon(Xp.TYPE))}setMutator(r){this.removeIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),r&&this.addIcon(r)}addIcon(r){return super.addIcon(r),r instanceof Xp&&(this.warning=r),r instanceof t.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=r),this.rendered&&(r.initView(this.createIconPointerDownListener(r)),r.applyColour(),r.updateEditable(),this.queueRender(),Ei(),this.bumpNeighbours()),r}createIconPointerDownListener(r){return a=>{this.isDeadOrDying()||(a=this.workspace.getGesture(a))&&a.setStartIcon(r)}}removeIcon(r){const a=super.removeIcon(r);return r.equals(Xp.TYPE)&&(this.warning=null),r.equals(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.rendered&&(this.queueRender(),Ei(),this.bumpNeighbours()),a}setEnabled(r){this.isEnabled()!==r&&(super.setEnabled(r),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(r){this.rendered&&this.pathObject.updateHighlighted(r)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(r){this.pathObject.updateDraggingDelete(r)}getColour(){return this.style.colourPrimary}setColour(r){super.setColour(r),r=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(r.style),this.style=r.style,this.styleName_=r.name,this.applyColour()}setStyle(r){const a=this.workspace.getRenderer().getConstants().getBlockStyle(r);if(this.styleName_=r,a)this.hat=a.hat,this.pathObject.setStyle(a),this.colour_=a.colourPrimary,this.style=a,this.applyColour();else throw Error("Invalid style name: "+r)}bringToFront(r=!1){let a=this;if(!a.isDeadOrDying())do{const f=a.getSvgRoot(),S=f.parentNode,k=S.childNodes;if(k[k.length-1]!==f&&S.appendChild(f),r)break;a=a.getParent()}while(a)}setPreviousStatement(r,a){super.setPreviousStatement(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setNextStatement(r,a){super.setNextStatement(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setOutput(r,a){super.setOutput(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setInputsInline(r){super.setInputsInline(r),this.rendered&&(this.queueRender(),this.bumpNeighbours())}removeInput(r,a){return r=super.removeInput(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours()),r}moveNumberedInputBefore(r,a){super.moveNumberedInputBefore(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}appendInput(r){return super.appendInput(r),this.rendered&&(this.queueRender(),this.bumpNeighbours()),r}setConnectionTracking(r){if(this.previousConnection&&this.previousConnection.setTracking(r),this.outputConnection&&this.outputConnection.setTracking(r),this.nextConnection){this.nextConnection.setTracking(r);var a=this.nextConnection.targetBlock();a&&a.setConnectionTracking(r)}if(!this.collapsed_)for(a=0;a<this.inputList.length;a++){var f=this.inputList[a].connection;f&&(f.setTracking(r),(f=f.targetBlock())&&f.setConnectionTracking(r))}}getConnections_(r){const a=[];if((r||this.rendered)&&(this.outputConnection&&a.push(this.outputConnection),this.previousConnection&&a.push(this.previousConnection),this.nextConnection&&a.push(this.nextConnection),r||!this.collapsed_))for(let f=0,S;S=this.inputList[f];f++)S.connection&&a.push(S.connection);return a}lastConnectionInStack(r){return super.lastConnectionInStack(r)}getMatchingConnection(r,a){return super.getMatchingConnection(r,a)}makeConnection_(r){return new ed(this,r)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){if(!this.bumpNeighboursPid){var r=t.getGroup$$module$build$src$core$events$utils();this.bumpNeighboursPid=setTimeout(()=>{const a=t.getGroup$$module$build$src$core$events$utils();t.setGroup$$module$build$src$core$events$utils(r),this.getRootBlock().bumpNeighboursInternal(),t.setGroup$$module$build$src$core$events$utils(a),this.bumpNeighboursPid=0},t.config$$module$build$src$core$config.bumpDelay)}}bumpNeighboursInternal(){const r=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||r.isInFlyout))for(const a of this.getConnections_(!1)){if(a.isSuperior()){let f;(f=a.targetBlock())==null||f.bumpNeighboursInternal()}for(const f of a.neighbours(t.config$$module$build$src$core$config.snapRadius))f.getSourceBlock().getRootBlock()!==r&&(a.isConnected()&&f.isConnected()||(a.isSuperior()?f.bumpAwayFrom(a):a.bumpAwayFrom(f)))}}scheduleSnapAndBump(){const r=t.getGroup$$module$build$src$core$events$utils();setTimeout(()=>{t.setGroup$$module$build$src$core$events$utils(r),this.snapToGrid(),t.setGroup$$module$build$src$core$events$utils(!1)},t.config$$module$build$src$core$config.bumpDelay/2),this.bumpNeighbours()}positionNearConnection(r,a,f){if(r.type===Pn.NEXT_STATEMENT||r.type===Pn.INPUT_VALUE){let S=a.x;a=a.y,S+=f.x-r.getOffsetInBlock().x,a+=f.y-r.getOffsetInBlock().y,this.moveBy(S,a)}}getChildren(r){return super.getChildren(r)}queueRender(){return Ko(this)}render(){this.queueRender(),Ei()}renderEfficiently(){this.rendered=!0,ne(),this.isCollapsed()&&this.updateCollapsed_(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),fe(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const r of this.inputList){const a=r.connection;a&&a.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(xa.LOCAL_MARKER).draw();for(const r of this.inputList)for(const a of r.fieldRow)a.updateMarkers_()}setCursorSvg(r){this.pathObject.setCursorSvg(r)}setMarkerSvg(r){this.pathObject.setMarkerSvg(r)}getHeightWidth(){let r=this.height,a=this.width;var f=this.getNextBlock();if(f){f=f.getHeightWidth();const S=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;r+=f.height-S,a=Math.max(a,f.width)}return{height:r,width:a}}fadeForReplacement(r){this.pathObject.updateReplacementFade(r)}highlightShapeForInput(r,a){this.pathObject.updateShapeForInputHighlight(r,a)}};If.INLINE=-1,If.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var oT=class{constructor(){}onDragEnter(r){}onDragOver(r){}onDragExit(r){}onDrop(r){}getClientRect(){return null}shouldPreventMove(r){return!1}},wy=class extends oT{constructor(){super(),this.wouldDelete_=!1}wouldDelete(r,a){return r instanceof If?(r=!r.getParent()&&r.isDeletable(),this.updateWouldDelete_(r&&!a)):this.updateWouldDelete_(r.isDeletable()),this.wouldDelete_}updateWouldDelete_(r){this.wouldDelete_=r}},aT=class extends wy{constructor(r){super(),this.workspace=r,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(r=new zi({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(r.toolboxPosition=this.workspace.toolboxPosition===dr.TOP?dr.BOTTOM:dr.TOP,this.flyout=new(v(Pt.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(r)):(r.toolboxPosition=this.workspace.toolboxPosition===dr.RIGHT?dr.LEFT:dr.RIGHT,this.flyout=new(v(Pt.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(r)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=ie(We.G,{class:"blocklyTrash"});let r;const a=String(Math.random()).substring(2);r=ie(We.CLIPPATH,{id:"blocklyTrashBodyClipPath"+a},this.svgGroup),ie(We.RECT,{width:w0,height:$y,y:$0},r);const f=ie(We.IMAGE,{width:Mu.width,x:-ib,height:Mu.height,y:-sb,"clip-path":"url(#blocklyTrashBodyClipPath"+a+")"},this.svgGroup);return f.setAttributeNS(qs,"xlink:href",this.workspace.options.pathToMedia+Mu.url),r=ie(We.CLIPPATH,{id:"blocklyTrashLidClipPath"+a},this.svgGroup),ie(We.RECT,{width:w0,height:$0},r),this.svgLid=ie(We.IMAGE,{width:Mu.width,x:-ib,height:Mu.height,y:-sb,"clip-path":"url(#blocklyTrashLidClipPath"+a+")"},this.svgGroup),this.svgLid.setAttributeNS(qs,"xlink:href",this.workspace.options.pathToMedia+Mu.url),je(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),je(this.svgGroup,"pointerup",this,this.click),je(f,"pointerover",this,this.mouseOver),je(f,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(Ke(this.flyout.createDom(We.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[pl.Capability.AUTOHIDEABLE,pl.Capability.DELETE_AREA,pl.Capability.DRAG_TARGET,pl.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&ft(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var r=this.contents.map(function(f){return JSON.parse(f)}),a=this.workspace.getParentSvg().style;a.cursor="wait",setTimeout(()=>{let f;(f=this.flyout)==null||f.show(r),a.cursor="";let S;(S=this.workspace.scrollbar)==null||S.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var r;(r=this.flyout)==null||r.hide();var a;(a=this.workspace.scrollbar)==null||a.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(r){!r&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(r,a){if(this.initialized){var f=bs(this.workspace,r);r=jr(f,new Qs(w0,$y+$0),rb,C0,r,this.workspace),a=Ia(r,C0,f.vertical===Xa.TOP?Ld.DOWN:Ld.UP,a),this.top=a.top,this.left=a.left;var S;(S=this.svgGroup)==null||S.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new Ri(this.top,this.top+$y+$0,this.left,this.left+w0)}getClientRect(){if(!this.svgGroup)return null;var r=this.svgGroup.getBoundingClientRect();const a=r.top+sb-M0;return r=r.left+ib-M0,new Ri(a,a+$0+$y+2*M0,r,r+w0+2*M0)}onDragOver(r){this.setLidOpen(this.wouldDelete_)}onDragExit(r){this.setLidOpen(!1)}onDrop(r){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(r){this.isLidOpen!==r&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=r,this.animateLid())}animateLid(){const r=ZE;var a=1/(r+1);this.lidOpen+=this.isLidOpen?a:-a,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Ro),a=lT+this.lidOpen*(ex-lT),this.svgGroup&&(this.svgGroup.style.opacity=`${a}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),w_/r))}setLidAngle(r){const a=this.workspace.toolboxPosition===dr.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let f;(f=this.svgLid)==null||f.setAttribute("transform","rotate("+(a?-r:r)+","+(a?4:w0-4)+","+($0-2)+")")}setMinOpenness(r){this.minOpenness=r,this.isLidOpen||this.setLidAngle(r*Ro)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(r){r=new(Re(Ll))(r,this.workspace.id),ce(r)}blockMouseDownWhenOpenable(r){!this.contentsIsOpen()&&this.hasContents()&&r.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(r){if(!(0>=this.workspace.options.maxTrashcanContents||r.type!==t.DELETE$$module$build$src$core$events$utils||r.type!==t.DELETE$$module$build$src$core$events$utils||r.wasShadow)){if(!r.oldJson)throw Error("Encountered a delete event without proper oldJson");if(r=JSON.stringify(this.cleanBlockJson(r.oldJson)),this.contents.indexOf(r)===-1){for(this.contents.unshift(r);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(QE)}}}cleanBlockJson(r){function a(f){if(f){if(delete f.id,delete f.x,delete f.y,delete f.enabled,f.icons&&f.icons.comment){var S=f.icons.comment;delete S.height,delete S.width,delete S.pinned}S=f.inputs;for(var k in S){var V=S[k];const _e=V.block;V=V.shadow,_e&&a(_e),V&&a(V)}f.next&&(k=f.next,f=k.block,k=k.shadow,f&&a(f),k&&a(k))}}return r=JSON.parse(JSON.stringify(r)),a(r),Object.assign({},{kind:"BLOCK"},r)}},w0=47,$y=44,$0=16,C0=20,rb=20,M0=10,ib=0,sb=32,QE=.1,w_=80,ZE=4,lT=.4,ex=.8,Ro=45,Yi=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(r,a){if(this.shortcuts.get(r.name)&&!a)throw Error(`Shortcut named "${r.name}" already exists.`);if(this.shortcuts.set(r.name,r),(a=r.keyCodes)&&0<a.length)for(let f=0;f<a.length;f++)this.addKeyMapping(a[f],r.name,!!r.allowCollision)}unregister(r){return this.shortcuts.get(r)?(this.removeAllKeyMappings(r),this.shortcuts.delete(r),!0):(console.warn(`Keyboard shortcut named "${r}" not found.`),!1)}addKeyMapping(r,a,f){r=`${r}`;const S=this.keyMap.get(r);if(S&&!f)throw Error(`Shortcut named "${a}" collides with shortcuts "${S}"`);S&&f?S.unshift(a):this.keyMap.set(r,[a])}removeKeyMapping(r,a,f){const S=this.keyMap.get(r);if(!S)return f||console.warn(`No keyboard shortcut named "${a}" registered with key code "${r}"`),!1;const k=S.indexOf(a);return-1<k?(S.splice(k,1),S.length===0&&this.keyMap.delete(r),!0):(f||console.warn(`No keyboard shortcut named "${a}" registered with key code "${r}"`),!1)}removeAllKeyMappings(r){for(const a of this.keyMap.keys())this.removeKeyMapping(a,r,!0)}setKeyMap(r){this.keyMap.clear();for(const a in r)this.keyMap.set(a,r[a])}getKeyMap(){const r=Object.create(null);for(const[a,f]of this.keyMap)r[a]=f;return r}getRegistry(){const r=Object.create(null);for(const[a,f]of this.shortcuts)r[a]=f;return Cl(Object.create(null),r)}onKeyDown(r,a){var f=this.serializeKeyEvent_(a);if(f=this.getShortcutNamesByKeyCode(f),!f)return!1;for(let S=0,k;k=f[S];S++){const V=this.shortcuts.get(k);let _e,ze;if((_e=V)==null||!_e.preconditionFn||(ze=V)!=null&&ze.preconditionFn(r)){let jt,Gn;if((jt=V)!=null&&jt.callback&&((Gn=V)!=null&&Gn.callback(r,a,V)))return!0}}return!1}getShortcutNamesByKeyCode(r){return this.keyMap.get(r)||[]}getKeyCodesByShortcutName(r){const a=[];for(const[f,S]of this.keyMap)-1<S.indexOf(r)&&a.push(f);return a}serializeKeyEvent_(r){let a="";for(const f in Yi.modifierKeys)r.getModifierState(f)&&(a!==""&&(a+="+"),a+=f);return a!==""&&r.keyCode?a=a+"+"+r.keyCode:r.keyCode&&(a=String(r.keyCode)),a}checkModifiers_(r){for(let a=0,f;f=r[a];a++)if(!(f in Yi.modifierKeys))throw Error(f+" is not a valid modifier key.")}createSerializedKey(r,a){let f="";if(a){this.checkModifiers_(a);for(const S in Yi.modifierKeys)-1<a.indexOf(Yi.modifierKeys[S])&&(f!==""&&(f+="+"),f+=S)}return f!==""&&r?f=f+"+"+r:r&&(f=`${r}`),f}};Yi.registry=new Yi,function(r){r=r.modifierKeys||(r.modifierKeys={}),r[r.Shift=16]="Shift",r[r.Control=17]="Control",r[r.Alt=18]="Alt",r[r.Meta=91]="Meta"}(Yi||(Yi={}));var Rf;(function(r){r.ESCAPE="escape",r.DELETE="delete",r.COPY="copy",r.CUT="cut",r.PASTE="paste",r.UNDO="undo",r.REDO="redo"})(Rf||(Rf={}));var $_=null,Cy=null;xs();var kf={};kf.names=Rf,kf.registerCopy=Yr,kf.registerCut=ru,kf.registerDefaultShortcuts=xs,kf.registerDelete=fc,kf.registerEscape=dd,kf.registerPaste=Xu,kf.registerRedo=Ha,kf.registerUndo=os;var C_=class{constructor(r,a){this.procedureModelClass=r,this.parameterModelClass=a,this.priority=xf}save(r){return r=r.getProcedureMap().getProcedures().map(a=>ws(a)),r.length?r:null}load(r,a){const f=a.getProcedureMap();for(const S of r)f.add(mi(this.procedureModelClass,this.parameterModelClass,S,a))}clear(r){r.getProcedureMap().clear()}},A0={};A0.ProcedureSerializer=C_,A0.loadParameter=Ga,A0.loadProcedure=mi,A0.saveParameter=Wc,A0.saveProcedure=ws;var I0=class{constructor(){this.priority=c0}save(r){const a=[];for(const f of r.getAllVariables())r={name:f.name,id:f.getId()},f.type&&(r.type=f.type),a.push(r);return a.length?a:null}load(r,a){for(const f of r)a.createVariable(f.name,f.type,f.id)}clear(r){r.getVariableMap().clear()}};Is("variables",new I0);var uT={};uT.VariableSerializer=I0;var ob={};ob.load=ap,ob.save=mc;var tx={blocks:tm,exceptions:Ef,priorities:em,procedures:A0,registry:d0,variables:uT,workspaces:ob},ab=class{constructor(r,a,f,S,k){this.workspace=r,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,a=a===void 0?!0:a,f=f===void 0?!0:f;const V=a&&f;a&&(this.hScroll=new Sa(r,!0,V,S,k)),f&&(this.vScroll=new Sa(r,!1,V,S,k)),V&&(this.corner_=ie(We.RECT,{height:Sa.scrollbarThickness,width:Sa.scrollbarThickness,class:"blocklyScrollbarBackground"}),Ke(this.corner_,r.getBubbleCanvas()))}dispose(){ft(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const r=this.workspace.getMetrics();if(r){var a=!1,f=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===r.viewWidth&&this.oldHostMetrics_.viewHeight===r.viewHeight&&this.oldHostMetrics_.absoluteTop===r.absoluteTop&&this.oldHostMetrics_.absoluteLeft===r.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===r.scrollWidth&&this.oldHostMetrics_.viewLeft===r.viewLeft&&this.oldHostMetrics_.scrollLeft===r.scrollLeft||(a=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===r.scrollHeight&&this.oldHostMetrics_.viewTop===r.viewTop&&this.oldHostMetrics_.scrollTop===r.scrollTop||(f=!0)):f=a=!0,a||f){try{t.disable$$module$build$src$core$events$utils(),this.hScroll&&a&&this.hScroll.resize(r),this.vScroll&&f&&this.vScroll.resize(r)}finally{t.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==r.viewWidth||this.oldHostMetrics_.absoluteLeft!==r.absoluteLeft){let S;(S=this.corner_)==null||S.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==r.viewHeight||this.oldHostMetrics_.absoluteTop!==r.absoluteTop){let S;(S=this.corner_)==null||S.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=r}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(r,a){this.hScroll&&this.hScroll.setOrigin(r,a),this.vScroll&&this.vScroll.setOrigin(r,a)}set(r,a,f){this.hScroll&&this.hScroll.set(r,!1),this.vScroll&&this.vScroll.set(a,!1),(f||f===void 0)&&(r={},this.hScroll&&(r.x=this.hScroll.getRatio_()),this.vScroll&&(r.y=this.vScroll.getRatio_()),this.workspace.setMetrics(r))}setX(r){this.hScroll&&this.hScroll.set(r,!0)}setY(r){this.vScroll&&this.vScroll.set(r,!0)}setContainerVisible(r){this.hScroll&&this.hScroll.setContainerVisible(r),this.vScroll&&this.vScroll.setContainerVisible(r)}isVisible(){let r=!1;return this.hScroll&&(r=this.hScroll.isVisible()),this.vScroll&&(r=r||this.vScroll.isVisible()),r}setVisible(r){this.hScroll&&this.hScroll.setVisibleInternal(r),this.vScroll&&this.vScroll.setVisibleInternal(r)}resizeContent(r){this.hScroll&&this.hScroll.resizeContentHorizontal(r),this.vScroll&&this.vScroll.resizeContentVertical(r)}resizeView(r){this.hScroll&&this.hScroll.resizeViewHorizontal(r),this.vScroll&&this.vScroll.resizeViewVertical(r)}},M_=class{constructor(r){this.workspace_=r}getDimensionsPx_(r){let a=0,f=0;return r&&(a=r.getWidth(),f=r.getHeight()),new Qs(a,f)}getFlyoutMetrics(r){return r=this.getDimensionsPx_(this.workspace_.getFlyout(r)),{width:r.width,height:r.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const r=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:r.width,height:r.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let r=0,a=0;const f=this.getToolboxMetrics(),S=this.getFlyoutMetrics(),k=!!this.workspace_.getToolbox();var V;const _e=!((V=this.workspace_.getFlyout())!=null&&V.autoClose);V=k?f.position:S.position;const ze=V===dr.TOP;return V===dr.LEFT&&(k&&(r+=f.width),_e&&(r+=S.width)),ze&&(k&&(a+=f.height),_e&&(a+=S.height)),{top:a,left:r}}getViewMetrics(r){r=r?this.workspace_.scale:1;const a=this.getSvgMetrics(),f=this.getToolboxMetrics(),S=this.getFlyoutMetrics(),k=!!this.workspace_.getToolbox();var V;const _e=!((V=this.workspace_.getFlyout())!=null&&V.autoClose);V=k?f.position:S.position;const ze=V===dr.LEFT||V===dr.RIGHT;return(V===dr.TOP||V===dr.BOTTOM)&&(k&&(a.height-=f.height),_e&&(a.height-=S.height)),ze&&(k&&(a.width-=f.width),_e&&(a.width-=S.width)),{height:a.height/r,width:a.width/r,top:-this.workspace_.scrollY/r,left:-this.workspace_.scrollX/r}}getContentMetrics(r){r=r?1:this.workspace_.scale;const a=this.workspace_.getBlocksBoundingBox();return{height:(a.bottom-a.top)*r,width:(a.right-a.left)*r,top:a.top*r,left:a.left*r}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(r){if(!this.hasFixedEdges())return{};const a=this.workspace_.isMovableHorizontally(),f=this.workspace_.isMovableVertically();r=r||this.getViewMetrics(!1);const S={};return f||(S.top=r.top,S.bottom=r.top+r.height),a||(S.left=r.left,S.right=r.left+r.width),S}getPaddedContent_(r,a){const f=a.top+a.height,S=a.left+a.width,k=r.width;r=r.height;const V=k/2,_e=r/2;return{top:Math.min(a.top-_e,f-r),bottom:Math.max(f+_e,a.top+r),left:Math.min(a.left-V,S-k),right:Math.max(S+V,a.left+k)}}getScrollMetrics(r,a,f){r=r?this.workspace_.scale:1,a=a||this.getViewMetrics(!1);var S=f||this.getContentMetrics();f=this.getComputedFixedEdges_(a),a=this.getPaddedContent_(a,S),S=f.top!==void 0?f.top:a.top;const k=f.left!==void 0?f.left:a.left;return{top:S/r,left:k/r,width:((f.right!==void 0?f.right:a.right)-k)/r,height:((f.bottom!==void 0?f.bottom:a.bottom)-S)/r}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const r=this.getToolboxMetrics(),a=this.getFlyoutMetrics(!0),f=this.getSvgMetrics(),S=this.getAbsoluteMetrics(),k=this.getViewMetrics(),V=this.getContentMetrics(),_e=this.getScrollMetrics(!1,k,V);return{contentHeight:V.height,contentWidth:V.width,contentTop:V.top,contentLeft:V.left,scrollHeight:_e.height,scrollWidth:_e.width,scrollTop:_e.top,scrollLeft:_e.left,viewHeight:k.height,viewWidth:k.width,viewTop:k.top,viewLeft:k.left,absoluteTop:S.top,absoluteLeft:S.left,svgHeight:f.height,svgWidth:f.width,toolboxWidth:r.width,toolboxHeight:r.height,toolboxPosition:r.position,flyoutWidth:a.width,flyoutHeight:a.height}}};i(Pt.METRICS_MANAGER,kl,M_);var cT=class extends h{constructor(r){super(),this.isBlank=!0,this.recordUndo=!1,this.type=va,this.isBlank=!!r,r&&(this.workspaceId=r.id)}};i(Pt.EVENT,va,cT);var lb=class extends g{constructor(r,a,f){super(r?r.workspace.id:void 0),this.type=Go,r&&(this.blockId=r.id,this.isStart=a,this.blocks=f)}toJson(){const r=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return r.isStart=this.isStart,r.blockId=this.blockId,r.blocks=this.blocks,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new lb),a.isStart=r.isStart,a.blockId=r.blockId,a.blocks=r.blocks,a}};i(Pt.EVENT,Go,lb);var My={};My.bumpIntoBounds=vh,My.bumpIntoBoundsHandler=ta,My.bumpTopObjectsIntoBounds=Dn;var R0=class{constructor(r,a){this.connectionCandidate=this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.dragIconData_=[],this.draggingBlock_=r,this.workspace_=a,this.connectionPreviewer=new(v(Pt.CONNECTION_PREVIEWER,this.workspace_.options))(r),this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=Zn(r,this.startXY_)}dispose(){this.dragIconData_.length=0,this.connectionPreviewer.dispose()}startDrag(r,a){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent_(),this.draggingBlock_.bringToFront(!0),ne(),this.workspace_.setResizesEnabled(!1),Pa(),this.shouldDisconnect_(a)&&this.disconnectBlock_(a,r),this.draggingBlock_.setDragging(!0);let f;(f=this.workspace_.getLayerManager())==null||f.moveToDragLayer(this.draggingBlock_)}shouldDisconnect_(r){return!!(this.draggingBlock_.getParent()||r&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(r,a){this.draggingBlock_.unplug(r),r=this.pixelsToWorkspaceUnits_(a),r=mn.sum(this.startXY_,r),this.draggingBlock_.translate(r.x,r.y),Xs(this.draggingBlock_)}fireDragStartEvent_(){const r=new(Re(Go))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));ce(r)}drag(r,a){const f=this.draggingBlock_;this.moveBlock(f,a),this.updateDragTargets(r,f),this.wouldDeleteBlock_=this.wouldDeleteBlock(r,f,a),this.updateCursorDuringBlockDrag_(),this.updateConnectionPreview(f,a)}moveBlock(r,a){a=this.pixelsToWorkspaceUnits_(a),a=mn.sum(this.startXY_,a),r.moveDuringDrag(a)}updateDragTargets(r,a){if(r=this.workspace_.getDragTarget(r),this.dragTarget_!==r){let f;(f=this.dragTarget_)==null||f.onDragExit(a),r==null||r.onDragEnter(a)}r==null||r.onDragOver(a),this.dragTarget_=r}wouldDeleteBlock(r,a,f){return(r=this.workspace_.getDragTarget(r))&&this.workspace_.getComponentManager().hasCapability(r.id,pl.Capability.DELETE_AREA)?r.wouldDelete(a,!!this.getConnectionCandidate(a,f)):!1}updateConnectionPreview(r,a){a=this.pixelsToWorkspaceUnits_(a);const f=this.connectionCandidate,S=this.getConnectionCandidate(r,a);if(S){this.connectionCandidate=a=f&&this.currCandidateIsBetter(f,a,S)?f:S;var{local:k,neighbour:V}=a;k.type!==Pn.OUTPUT_VALUE&&k.type!==Pn.PREVIOUS_STATEMENT||!V.isConnected()||V.targetBlock().isInsertionMarker()||this.orphanCanConnectAtEnd(r,V.targetBlock(),k.type)?this.connectionPreviewer.previewConnection(k,V):this.connectionPreviewer.previewReplacement(k,V,V.targetBlock())}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(r,a,f){return!!hs.getConnectionForOrphanedConnection(r,f===Pn.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}currCandidateIsBetter(r,a,f){const{local:S,neighbour:k}=r;r=new mn(S.x,S.y);const V=new mn(k.x,k.y);return a=mn.distance(mn.sum(r,a),V),f.distance>a-t.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(r,a){r=this.getLocalConnections(r);let f=this.connectionCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius,S=null;for(const k of r){const{connection:V,radius:_e}=k.closest(f,a);V&&(S={local:k,neighbour:V,distance:_e},f=_e)}return S}getLocalConnections(r){const a=r.getConnections_(!1),f=r.lastConnectionInStack(!0);return f&&f!==r.nextConnection&&a.push(f),a}endDrag(r,a){if(this.drag(r,a),this.fireDragEndEvent_(),fe(),Pa(),this.connectionPreviewer.hidePreview(),r=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)||(r=this.getNewLocationAfterDrag_(a).delta),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),!this.maybeDeleteBlock_()){let f;(f=this.workspace_.getLayerManager())==null||f.moveOffDragLayer(this.draggingBlock_,ee),this.draggingBlock_.setDragging(!1),r?this.updateBlockAfterMove_():vh(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)}this.connectionPreviewer.dispose(),this.workspace_.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}getNewLocationAfterDrag_(r){r=this.pixelsToWorkspaceUnits_(r);const a=mn.sum(this.startXY_,r);return{delta:r,newLocation:a}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),ji.length=0,!0):!1}updateBlockAfterMove_(){this.fireMoveEvent_(),this.connectionCandidate?this.applyConnections(this.connectionCandidate):this.draggingBlock_.queueRender(),this.draggingBlock_.scheduleSnapAndBump()}applyConnections(r){const{local:a,neighbour:f}=r;if(a.connect(f),this.draggingBlock_.rendered){const S=a.isSuperior()?f:a,k=this.draggingBlock_.getRootBlock();gr().then(()=>{ha(S.getSourceBlock()),setTimeout(()=>{k.bringToFront()},0)})}}fireDragEndEvent_(){const r=new(Re(Go))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));ce(r)}updateToolboxStyle_(r){const a=this.workspace_.getToolbox();if(a){const f=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";r&&typeof a.removeStyle=="function"?a.removeStyle(f):r||typeof a.addStyle!="function"||a.addStyle(f)}}fireMoveEvent_(){if(!this.draggingBlock_.isDeadOrDying()){var r=new(Re(t.MOVE$$module$build$src$core$events$utils))(this.draggingBlock_);r.setReason(["drag"]),r.oldCoordinate=this.startXY_,r.recordNew(),ce(r)}}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(r){return r=new mn(r.x/this.workspace_.scale,r.y/this.workspace_.scale),this.workspace_.isMutator&&r.scale(1/this.workspace_.options.parentWorkspace.scale),r}dragIcons_(){xe("Blockly.BlockDragger.prototype.dragIcons_","v10","v11")}getInsertionMarkers(){return this.workspace_.getAllBlocks().filter(r=>r.isInsertionMarker())}};i(Pt.BLOCK_DRAGGER,kl,R0);var mm={};mm.Bubble=Cs,mm.MiniWorkspaceBubble=um,mm.TextBubble=cm,mm.TextInputBubble=sa;var ub=class extends dp{constructor(r,a,f,S){super(r),this.type=Sh,this.recordUndo=!1,r&&(this.name=a,this.oldValue=f,this.newValue=S)}toJson(){const r=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return r.name=this.name,r.oldValue=this.oldValue,r.newValue=this.newValue,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new ub),a.name=r.name,a.oldValue=r.oldValue,a.newValue=r.newValue,a}isNull(){return this.oldValue===this.newValue}run(r){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");r=r?this.newValue:this.oldValue,(a=a.getField(this.name))?a.setValue(r):console.warn("Can't set non-existent field: "+this.name)}};i(Pt.EVENT,Sh,ub);var cb=class extends dp{constructor(r){super(r),this.type=t.MOVE$$module$build$src$core$events$utils,r&&(r.isShadow()&&(this.recordUndo=!1),r=this.currentLocation_(),this.oldParentId=r.parentId,this.oldInputName=r.inputName,this.oldCoordinate=r.coordinate)}toJson(){const r=super.toJson();return r.oldParentId=this.oldParentId,r.oldInputName=this.oldInputName,this.oldCoordinate&&(r.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),r.newParentId=this.newParentId,r.newInputName=this.newInputName,this.newCoordinate&&(r.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(r.reason=this.reason),this.recordUndo||(r.recordUndo=this.recordUndo),r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new cb),a.oldParentId=r.oldParentId,a.oldInputName=r.oldInputName,r.oldCoordinate&&(f=r.oldCoordinate.split(","),a.oldCoordinate=new mn(Number(f[0]),Number(f[1]))),a.newParentId=r.newParentId,a.newInputName=r.newInputName,r.newCoordinate&&(f=r.newCoordinate.split(","),a.newCoordinate=new mn(Number(f[0]),Number(f[1]))),r.reason!==void 0&&(a.reason=r.reason),r.recordUndo!==void 0&&(a.recordUndo=r.recordUndo),a}recordNew(){const r=this.currentLocation_();this.newParentId=r.parentId,this.newInputName=r.inputName,this.newCoordinate=r.coordinate}setReason(r){this.reason=r}currentLocation_(){var r=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var a=r.getBlockById(this.blockId);if(!a)throw Error("The block associated with the block move event could not be found");r={};const f=a.getParent();return f?(r.parentId=f.id,(a=f.getInputWithBlock(a))&&(r.inputName=a.name)):r.coordinate=a.getRelativeToSurfaceXY(),r}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&mn.equals(this.oldCoordinate,this.newCoordinate)}run(r){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var f=a.getBlockById(this.blockId);if(f){var S=r?this.newParentId:this.oldParentId,k=r?this.newInputName:this.oldInputName;if(r=r?this.newCoordinate:this.oldCoordinate,S){var V=a.getBlockById(S);if(!V){console.warn("Can't connect to non-existent block: "+S);return}}if(f.getParent()&&f.unplug(),r)k=f.getRelativeToSurfaceXY(),f.moveBy(r.x-k.x,r.y-k.y,this.reason);else{a=f.outputConnection,(!a||f.previousConnection&&f.previousConnection.isConnected())&&(a=f.previousConnection);let _e,ze;f=(ze=a)==null?void 0:ze.type,k?(f=V.getInput(k))&&(_e=f.connection):f===Pn.PREVIOUS_STATEMENT&&(_e=V.nextConnection),_e&&a?a.connect(_e):console.warn("Can't connect to non-existent input: "+k)}}else console.warn("Can't move non-existent block: "+this.blockId)}};i(Pt.EVENT,t.MOVE$$module$build$src$core$events$utils,cb);var hb=class extends g{constructor(r,a,f){super(r?r.workspace.id:void 0),this.type=go,r&&(this.blockId=r.id,this.isOpen=a,this.bubbleType=f)}toJson(){const r=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return r.isOpen=this.isOpen,r.bubbleType=this.bubbleType,r.blockId=this.blockId||"",r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new hb),a.isOpen=r.isOpen,a.bubbleType=r.bubbleType,a.blockId=r.blockId,a}},db;(function(r){r.MUTATOR="mutator",r.COMMENT="comment",r.WARNING="warning"})(db||(db={})),i(Pt.EVENT,go,hb);var Jm=class extends h{constructor(r){super(),this.isBlank=!r,r&&(this.commentId=r.id,this.workspaceId=r.workspace.id,this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=le())}toJson(){const r=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return r.commentId=this.commentId,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Jm),a.commentId=r.commentId,a}static CommentCreateDeleteHelper(r,a){var f=r.getEventWorkspace_();if(a){if(a=t.createElement$$module$build$src$core$utils$xml("xml"),!r.xml)throw Error("Ecountered a comment event without proper xml");a.appendChild(r.xml),t.domToWorkspace$$module$build$src$core$xml(a,f)}else{if(!r.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(f=f.getCommentById(r.commentId))?f.dispose():console.warn("Can't uncreate non-existent comment: "+r.commentId)}}},pb=class extends Jm{constructor(r,a,f){super(r),this.type=fd,r&&(this.oldContents_=typeof a>"u"?"":a,this.newContents_=typeof f>"u"?"":f)}toJson(){const r=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return r.oldContents=this.oldContents_,r.newContents=this.newContents_,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new pb),a.oldContents_=r.oldContents,a.newContents_=r.newContents,a}isNull(){return this.oldContents_===this.newContents_}run(r){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){var f=r?this.newContents_:this.oldContents_;if(!f)throw Error(r?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");a.setContent(f)}else console.warn("Can't change non-existent comment: "+this.commentId)}};i(Pt.EVENT,fd,pb);var fb=class extends Jm{constructor(r){super(r),this.type=ls,r&&(this.xml=r.toXmlWithXY())}toJson(){const r=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return r.xml=Ki(this.xml),r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new fb),a.xml=t.textToDom$$module$build$src$core$utils$xml(r.xml),a}run(r){Jm.CommentCreateDeleteHelper(this,r)}};i(Pt.EVENT,ls,fb);var mb=class extends Jm{constructor(r){super(r),this.type=jh,r&&(this.xml=r.toXmlWithXY())}run(r){Jm.CommentCreateDeleteHelper(this,!r)}toJson(){const r=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return r.xml=Ki(this.xml),r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new mb),a.xml=t.textToDom$$module$build$src$core$utils$xml(r.xml),a}};i(Pt.EVENT,jh,mb);var gb=class extends Jm{constructor(r){super(r),this.type=ya,r&&(this.comment_=r,this.oldCoordinate_=r.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setOldCoordinate(r){this.oldCoordinate_=r}toJson(){const r=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return r.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,r.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new gb),f=r.oldCoordinate.split(","),a.oldCoordinate_=new mn(Number(f[0]),Number(f[1])),f=r.newCoordinate.split(","),a.newCoordinate_=new mn(Number(f[0]),Number(f[1])),a}isNull(){return mn.equals(this.oldCoordinate_,this.newCoordinate_)}run(r){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){if(r=r?this.newCoordinate_:this.oldCoordinate_,!r)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var f=a.getRelativeToSurfaceXY();a.moveBy(r.x-f.x,r.y-f.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};i(Pt.EVENT,ya,gb);var _b=class extends g{constructor(r,a,f){super(f),this.type=Va,this.oldItem=r??void 0,this.newItem=a??void 0}toJson(){const r=super.toJson();return r.oldItem=this.oldItem,r.newItem=this.newItem,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new _b),a.oldItem=r.oldItem,a.newItem=r.newItem,a}};i(Pt.EVENT,Va,_b),t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.disable$$module$build$src$core$events$utils,t.enable$$module$build$src$core$events$utils,t.getGroup$$module$build$src$core$events$utils,t.setGroup$$module$build$src$core$events$utils;var Kn={};Kn.Abstract=h,Kn.BLOCK_CHANGE=t.CHANGE$$module$build$src$core$events$utils,Kn.BLOCK_CREATE=t.CREATE$$module$build$src$core$events$utils,Kn.BLOCK_DELETE=t.DELETE$$module$build$src$core$events$utils,Kn.BLOCK_DRAG=Go,Kn.BLOCK_FIELD_INTERMEDIATE_CHANGE=Sh,Kn.BLOCK_MOVE=t.MOVE$$module$build$src$core$events$utils,Kn.BUBBLE_OPEN=go,Kn.BUMP_EVENTS=Xh,Kn.BlockBase=dp,Kn.BlockChange=Kr,Kn.BlockCreate=h_,Kn.BlockDelete=eb,Kn.BlockDrag=lb,Kn.BlockFieldIntermediateChange=ub,Kn.BlockMove=cb,Kn.BubbleOpen=hb,Kn.BubbleType=db,Kn.CHANGE=t.CHANGE$$module$build$src$core$events$utils,Kn.CLICK=ec,Kn.COMMENT_CHANGE=fd,Kn.COMMENT_CREATE=ls,Kn.COMMENT_DELETE=jh,Kn.COMMENT_MOVE=ya,Kn.CREATE=t.CREATE$$module$build$src$core$events$utils,Kn.Click=$,Kn.ClickTarget=A,Kn.CommentBase=Jm,Kn.CommentChange=pb,Kn.CommentCreate=fb,Kn.CommentDelete=mb,Kn.CommentMove=gb,Kn.DELETE=t.DELETE$$module$build$src$core$events$utils,Kn.FINISHED_LOADING=va,Kn.FinishedLoading=cT,Kn.MARKER_MOVE=Ol,Kn.MOVE=t.MOVE$$module$build$src$core$events$utils,Kn.MarkerMove=b_,Kn.SELECTED=mo,Kn.Selected=Bd,Kn.THEME_CHANGE=ou,Kn.TOOLBOX_ITEM_SELECT=Va,Kn.TRASHCAN_OPEN=Ll,Kn.ThemeChange=p0,Kn.ToolboxItemSelect=_b,Kn.TrashcanOpen=Zv,Kn.UI=yc,Kn.UiBase=g,Kn.VAR_CREATE=fo,Kn.VAR_DELETE=Cu,Kn.VAR_RENAME=Kc,Kn.VIEWPORT_CHANGE=ti,Kn.VarBase=Dd,Kn.VarCreate=Nd,Kn.VarDelete=Jv,Kn.VarRename=qv,Kn.ViewportChange=f0,Kn.clearPendingUndo=oe,Kn.disable=t.disable$$module$build$src$core$events$utils,Kn.disableOrphans=qe,Kn.enable=t.enable$$module$build$src$core$events$utils,Kn.filter=q,Kn.fire=ce,Kn.fromJson=Fe,Kn.get=Re,Kn.getDescendantIds=Se,Kn.getGroup=t.getGroup$$module$build$src$core$events$utils,Kn.getRecordUndo=le,Kn.isEnabled=se,Kn.setGroup=t.setGroup$$module$build$src$core$events$utils,Kn.setRecordUndo=he;var hT=class extends y_{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(r){super.setFontConstants_(r),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(r){super.setDynamicProperties_(r),this.SELECTED_GLOW_COLOUR=r.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const a=Number(r.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=a&&!isNaN(a)?a:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=r.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(r=Number(r.getComponentStyle("replacementGlowSize")))&&!isNaN(r)?r:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&ft(this.selectedGlowFilter),this.replacementGlowFilter&&ft(this.replacementGlowFilter)}makeStartHat(){const r=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,f=Hs("c",[jn(25,-r),jn(71,-r),jn(a,0)]);return{height:r,width:a,path:f}}makeHexagonal(){function r(f,S,k){var V=f/2;return V=V>a?a:V,k=k?-1:1,f=(S?-1:1)*f/2,tu(-k*V,f)+tu(k*V,f)}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(f){return f/=2,f>a?a:f},height(f){return f},connectionOffsetY(f){return f/2},connectionOffsetX(f){return-f},pathDown(f){return r(f,!1,!1)},pathUp(f){return r(f,!0,!1)},pathRightDown(f){return r(f,!1,!0)},pathRightUp(f){return r(f,!1,!0)}}}makeRounded(){function r(S,k,V){const _e=S>f?S-f:0;S=(S>f?f:S)/2;const ze=V===k?"0":"1";return pi("a","0 0,"+ze,S,jn((V?1:-1)*S,(k?-1:1)*S))+En("v",(k?-1:1)*_e)+pi("a","0 0,"+ze,S,jn((V?-1:1)*S,(k?-1:1)*S))}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,f=2*a;return{type:this.SHAPES.ROUND,isDynamic:!0,width(S){return S/=2,S>a?a:S},height(S){return S},connectionOffsetY(S){return S/2},connectionOffsetX(S){return-S},pathDown(S){return r(S,!1,!1)},pathUp(S){return r(S,!0,!1)},pathRightDown(S){return r(S,!1,!0)},pathRightUp(S){return r(S,!1,!0)}}}makeSquared(){function r(f,S,k){f-=2*a;const V=k===S?"0":"1";return pi("a","0 0,"+V,a,jn((k?1:-1)*a,(S?-1:1)*a))+En("v",(S?-1:1)*f)+pi("a","0 0,"+V,a,jn((k?-1:1)*a,(S?-1:1)*a))}const a=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(f){return a},height(f){return f},connectionOffsetY(f){return f/2},connectionOffsetX(f){return-f},pathDown(f){return r(f,!1,!1)},pathUp(f){return r(f,!0,!1)},pathRightDown(f){return r(f,!1,!0)},pathRightUp(f){return r(f,!1,!0)}}}shapeFor(r){let a=r.getCheck();switch(!a&&r.targetConnection&&(a=r.targetConnection.getCheck()),r.type){case Pn.INPUT_VALUE:case Pn.OUTPUT_VALUE:if(r=r.getSourceBlock().getOutputShape(),r!==null)switch(r){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return a&&a.indexOf("Boolean")!==-1?this.HEXAGONAL:a&&a.indexOf("Number")!==-1?this.ROUNDED:(a&&a.indexOf("String"),this.ROUNDED);case Pn.PREVIOUS_STATEMENT:case Pn.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function r(Gn){return Hs("c",[jn(Gn*k/2,0),jn(Gn*k*3/4,_e/2),jn(Gn*k,_e)])+Fo([jn(Gn*k,V)])+Hs("c",[jn(Gn*k/4,_e/2),jn(Gn*k/2,_e),jn(Gn*k,_e)])+En("h",Gn*S)+Hs("c",[jn(Gn*k/2,0),jn(Gn*k*3/4,-(_e/2)),jn(Gn*k,-_e)])+Fo([jn(Gn*k,-V)])+Hs("c",[jn(Gn*k/4,-(_e/2)),jn(Gn*k/2,-_e),jn(Gn*k,-_e)])}const a=this.NOTCH_WIDTH,f=this.NOTCH_HEIGHT,S=a/3,k=S/3,V=f/2,_e=V/2,ze=r(1),jt=r(-1);return{type:this.SHAPES.NOTCH,width:a,height:f,pathLeft:ze,pathRight:jt}}makeInsideCorners(){const r=this.CORNER_RADIUS,a=pi("a","0 0,0",r,jn(-r,r)),f=pi("a","0 0,1",r,jn(-r,r)),S=pi("a","0 0,0",r,jn(r,r)),k=pi("a","0 0,1",r,jn(r,r));return{width:r,height:r,pathTop:a,pathBottom:S,rightWidth:r,rightHeight:r,pathTopRight:f,pathBottomRight:k}}generateSecondaryColour_(r){return zc("#000",r,.15)||r}generateTertiaryColour_(r){return zc("#000",r,.25)||r}createDom(r,a,f){super.createDom(r,a,f),r=ie(We.DEFS,{},r),a=ie(We.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},r),ie(We.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},a),f=ie(We.FECOMPONENTTRANSFER,{result:"outBlur"},a),ie(We.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},f),ie(We.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},a),ie(We.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},a),this.selectedGlowFilterId=a.id,this.selectedGlowFilter=a,r=ie(We.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},r),ie(We.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},r),a=ie(We.FECOMPONENTTRANSFER,{result:"outBlur"},r),ie(We.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),ie(We.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},r),ie(We.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},r),ie(We.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},r),this.replacementGlowFilterId=r.id,this.replacementGlowFilter=r}getCSS_(r){return[`${r} .blocklyText,`,`${r} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${r} .blocklyText {`,"fill: #fff;","}",`${r} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${r} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${r} .blocklyNonEditableText>text,`,`${r} .blocklyEditableText>text,`,`${r} .blocklyNonEditableText>g>text,`,`${r} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${r} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${r} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${r} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${r} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${r} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${r} .blocklyDropdownText {`,"fill: #fff !important;","}",`${r}.blocklyWidgetDiv .goog-menuitem,`,`${r}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${r}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${r} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${r} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${r} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},dT=class extends v_{constructor(r,a){super(r,a)}draw(){const r=this.block_.pathObject;r.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),r.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&r.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(r.outputShapeType=this.info_.outputConnection.shape.type),r.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(r){if(!(0>=r.height)){if(lt.isSpacer(r)){const S=r.precedesStatement;var a=r.followsStatement;if(S||a){const k=this.constants_.INSIDE_CORNERS;var f=k.rightHeight;f=r.height-(S?f:0),a=a?k.pathBottomRight:"",r=0<f?En("V",r.yPos+f):"",this.outlinePath_+=a+r+(S?k.pathTopRight:"");return}}this.outlinePath_+=En("V",r.yPos+r.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const r=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Fi(r.xPos,this.info_.startY),this.outlinePath_+=En("h",r.width)}drawFlatBottom_(){const r=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=En("V",r.baseline),this.outlinePath_+=En("h",-r.width)}drawInlineInput_(r){this.positionInlineInputConnection_(r);const a=r.input.name;r.connectedBlock||this.info_.isInsertionMarker||(r=Ys(r.xPos+r.connectionWidth,r.centerline-r.height/2)+this.getInlineInputPath(r),this.block_.pathObject.setOutlinePath(a,r))}getInlineInputPath(r){const a=r.width-2*r.connectionWidth,f=r.height;return En("h",a)+r.shape.pathRightDown(f)+En("h",-a)+r.shape.pathUp(f)+"z"}drawStatementInput_(r){var a=r.getLastInput();const f=a.xPos+a.notchOffset+a.shape.width,S=this.constants_.INSIDE_CORNERS,k=a.shape.pathRight+En("h",-(a.notchOffset-S.width))+S.pathTop,V=r.height-2*S.height;a=S.pathBottom+En("h",a.notchOffset-S.width)+(a.connectedBottomNextConnection?"":a.shape.pathLeft),this.outlinePath_+=En("H",f)+k+En("v",V)+a+En("H",r.xPos+r.width),this.positionStatementInputConnection_(r)}drawConnectionHighlightPath(r){const a=r.connectionModel;if(a.type===Pn.NEXT_STATEMENT||a.type===Pn.PREVIOUS_STATEMENT||a.type===Pn.OUTPUT_VALUE&&!r.isDynamicShape)super.drawConnectionHighlightPath(r);else{r=a.type===Pn.INPUT_VALUE?Ys(r.connectionWidth,-r.height/2)+this.getInlineInputPath(r):Ys(r.width,-r.height/2)+r.shape.pathDown(r.height);var f=a.getSourceBlock(),S,k;(k=(S=f.pathObject).addConnectionHighlight)==null||k.call(S,a,r,a.getOffsetInBlock(),f.RTL)}}},Ag=class extends Ui{constructor(r,a,f,S,k,V,_e){if(super(Ui.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",f=Number(Gr(f)),a=Number(Gr(a)),isNaN(f)||isNaN(a))throw Error("Height and width values of an image field must cast to numbers.");if(0>=f||0>=a)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Qs(a,f+Ag.Y_PADDING),this.imageHeight=f,typeof k=="function"&&(this.clickHandler=k),r!==Ui.SKIP_SETUP&&(_e?this.configure_(_e):(this.flipRtl=!!V,this.altText=Gr(S)||""),this.setValue(Gr(r)))}configure_(r){super.configure_(r),r.flipRtl&&(this.flipRtl=r.flipRtl),r.alt&&(this.altText=Gr(r.alt))}initView(){this.imageElement=ie(We.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(qs,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(r){return typeof r!="string"?null:r}doValueUpdate_(r){this.value_=r,this.imageElement&&this.imageElement.setAttributeNS(qs,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(r){r!==this.altText&&(this.altText=r||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(r){this.clickHandler=r}getText_(){return this.altText}static fromJson(r){if(!r.src||!r.width||!r.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(r.src,r.width,r.height,void 0,void 0,void 0,r)}};Ag.Y_PADDING=1,Es("field_image",Ag),Ag.prototype.DEFAULT_VALUE="";var A_=class extends Ui{constructor(r,a,f){super(Ui.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",r!==Ui.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.spellcheck!==void 0&&(this.spellcheck_=r.spellcheck)}initView(){if(!this.getSourceBlock())throw new Io;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const r=this.getSourceBlock();if(!r)throw new Io;let a;return this.fullBlockClickTarget_=!((a=this.getConstants())==null||!a.FULL_BLOCK_FIELDS)&&r.isSimpleReporter()}doValueInvalid_(r){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,r=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&se()&&ce(new(Re(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,r,this.value_)))}doValueUpdate_(r){this.isTextValid_=this.isDirty_=!0,this.value_=r}applyColour(){const r=this.getSourceBlock();if(!r)throw new Io;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",r.style.colourTertiary)):(this.borderRect_.style.display="none",r.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let r;return(r=this.getConstants())!=null&&r.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var r=this.htmlInput_;this.isTextValid_?(Tt(r,"blocklyInvalidInput"),Sr(r,vo.INVALID,!1)):(we(r,"blocklyInvalidInput"),Sr(r,vo.INVALID,!0))}if(r=this.getSourceBlock(),!r)throw new Io;this.getConstants().FULL_BLOCK_FIELDS&&r.applyColour()}setSpellcheck(r){r!==this.spellcheck_&&(this.spellcheck_=r,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(r,a=!1){this.workspace_=this.sourceBlock_.workspace,!a&&this.workspace_.options.modalInputs&&(Dl||An||Bn)?this.showPromptEditor_():this.showInlineEditor_(a)}showPromptEditor_(){Ra(t.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),r=>{r!==null&&this.setValue(this.getValueFromEditorText_(r)),this.onFinishEditing_(this.value_)})}showInlineEditor_(r){const a=this.getSourceBlock();if(!a)throw new Io;Yl(this,a.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,r||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var r=this.getSourceBlock();if(!r)throw new Io;t.setGroup$$module$build$src$core$events$utils(!0);const a=io();var f=this.getClickTarget_();if(!f)throw Error("A click target has not been set.");we(f,"editing"),f=document.createElement("input"),f.className="blocklyHtmlInput",f.setAttribute("spellcheck",this.spellcheck_);const S=this.workspace_.getScale();var k=this.getConstants().FIELD_TEXT_FONTSIZE*S+"pt";return a.style.fontSize=k,f.style.fontSize=k,k=A_.BORDERRADIUS*S+"px",this.isFullBlockField()&&(k=this.getScaledBBox(),k=(k.bottom-k.top)/2+"px",r=r.getParent()?r.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,f.style.border=1*S+"px solid "+r,a.style.borderRadius=k,a.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(a.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*S+"px")),f.style.borderRadius=k,a.appendChild(f),f.value=f.defaultValue=this.getEditorText_(this.value_),f.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(f),f}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&se()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(ce(new(Re(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),t.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var r=io().style;if(r.width="auto",r.height="auto",r.fontSize="",r.transition="",r.boxShadow="",this.htmlInput_=null,r=this.getClickTarget_(),!r)throw Error("A click target has not been set.");Tt(r,"editing")}onFinishEditing_(r){}bindInputEvents_(r){this.onKeyDownWrapper_=Ae(r,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=Ae(r,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(nt(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(nt(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(r){r.key==="Enter"?(Kl(),il()):r.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),Kl(),il()):r.key==="Tab"&&(Kl(),il(),this.sourceBlock_.tab(this,!r.shiftKey),r.preventDefault())}onHtmlInputChange_(r){r=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&se()&&this.value_!==r&&ce(new(Re(Sh))(this.sourceBlock_,this.name||null,r,this.value_))}setEditorValue_(r,a=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(r)),this.setValue(r,a)}resizeEditor_(){var r=this.getSourceBlock();if(!r)throw new Io;const a=io(),f=this.getScaledBBox();a.style.width=f.right-f.left+"px",a.style.height=f.bottom-f.top+"px",r=new mn(r.RTL?f.right-a.offsetWidth:f.left,f.top),a.style.left=r.x+"px",a.style.top=r.y+"px"}repositionForWindowResize(){const r=this.getSourceBlock();return r instanceof If?(vh(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),r)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(r){return`${r}`}getValueFromEditorText_(r){return r}};A_.BORDERRADIUS=4;var k0=class extends A_{constructor(r,a,f){super(r,a,f)}doClassValidation_(r){return r===void 0?null:`${r}`}static fromJson(r){return new this(Gr(r.text),void 0,r)}};Es("field_input",k0),k0.prototype.DEFAULT_VALUE="";var pT=class extends g_{constructor(r){super(r)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(r){return!!r.outputConnection}hasRightSquareCorner(r){return!!r.outputConnection&&!r.statementInputCount&&!r.nextConnection}},Ay=class extends __{constructor(r,a){if(super(r,a),this.connectedBottomNextConnection=!1,this.connectedBlock){for(r=this.connectedBlock;a=r.getNextBlock();)r=a;r.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},fT=class extends rr{constructor(r){super(r),this.width=this.height=0,this.type|=lt.getType("RIGHT_CONNECTION")}},mT=class extends Yv{constructor(r){super(r)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(r){const a=(r.hat?r.hat==="cap":this.constants_.ADD_START_HATS)&&!r.outputConnection&&!r.previousConnection;return!!r.outputConnection||a}hasRightSquareCorner(r){return!!r.outputConnection&&!r.statementInputCount&&!r.nextConnection}},gT=class extends S0{constructor(r,a){super(r,a),this.isInline=!0,this.renderer_=r,this.constants_=this.renderer_.getConstants(),this.topRow=new mT(this.constants_),this.bottomRow=new pT(this.constants_),this.isMultiRow=!a.getInputsInline()||a.isCollapsed(),this.hasStatementInput=0<a.statementInputCount,this.rightSide=this.outputConnection?new fT(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(r,a){return a?a instanceof pm||r instanceof Zh||a instanceof Zh?!0:r instanceof t.ValueInput$$module$build$src$core$inputs$value_input||r instanceof Af||r instanceof pm?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(r){return r.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(r)}getInRowSpacing_(r,a){return r&&a||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!r&&a&&lt.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:r&&lt.isLeftRoundedCorner(r)&&a&&(lt.isPreviousConnection(a)||lt.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:r&&lt.isLeftSquareCorner(r)&&a&&lt.isHat(a)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(r,a){if(lt.isTopRow(r)&&lt.isBottomRow(a))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const f=lt.isInputRow(r)&&r.hasStatement,S=lt.isInputRow(a)&&a.hasStatement;return S||f?(r=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),S&&f?Math.max(r,this.constants_.DUMMY_INPUT_MIN_HEIGHT):r):lt.isTopRow(r)?r.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):lt.isBottomRow(a)?this.outputConnection?!a.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(r,a){const f=this.width-this.startX;return lt.isInputRow(r)&&r.hasStatement||lt.isInputRow(a)&&a.hasStatement?Math.max(f,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):f}getElemCenterline_(r,a){if(r.hasStatement&&!lt.isSpacer(a)&&!lt.isStatementInput(a))return r.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(lt.isInlineInput(a)&&a instanceof Km){const f=a.connectedBlock;if(f&&f.outputConnection&&f.nextConnection)return r.yPos+f.height/2}return super.getElemCenterline_(r,a)}addInput_(r,a){if((r instanceof Af||r instanceof pm)&&a.hasDummyInput&&a.align===t.Align$$module$build$src$core$inputs$align.LEFT&&r.align===t.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(a,r);else if(r instanceof Zh){a.elements.push(new Ay(this.constants_,r)),a.hasStatement=!0,a.align===null&&(a.align=r.align);return}super.addInput_(r,a)}addAlignmentPadding_(r,a){if(this.rightAlignedDummyInputs.get(r)){let f;for(let S=0;S<r.elements.length;S++){const k=r.elements[S];if(lt.isSpacer(k)&&(f=k),lt.isField(k)&&k instanceof T0&&k.parentInput===this.rightAlignedDummyInputs.get(r))break}if(f){f.width+=a,r.width+=a;return}}super.addAlignmentPadding_(r,a)}adjustXPosition_(){const r=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let a=r;for(let k=2;k<this.rows.length-1;k+=2){var f=this.rows[k-1];const V=this.rows[k];var S=this.rows[k+1];if(f=k===2?!!this.topRow.hasPreviousConnection:!!f.followsStatement,S=k+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!S.precedesStatement,lt.isInputRow(V)&&V.hasStatement){V.measure();let _e,ze;a=V.width-((ze=(_e=V.getLastInput())==null?void 0:_e.width)!=null?ze:0)+r}else if(f&&(k===2||S)&&lt.isInputRow(V)&&!V.hasStatement){S=V.xPos,f=null;for(let _e=0;_e<V.elements.length;_e++){const ze=V.elements[_e];lt.isSpacer(ze)&&(f=ze),f&&(lt.isField(ze)||lt.isInput(ze))&&S<a&&!(lt.isField(ze)&&ze instanceof T0&&(ze.field instanceof Ti||ze.field instanceof Ag))&&(f.width+=a-S),S+=ze.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var r=this.outputConnection.shape;if("isDynamic"in r&&r.isDynamic){for(var a=0,f=0;f<this.rows.length;f++){const S=this.rows[f];S.yPos=a,a+=S.height}this.height=a,f=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,a=r.height(f),f=r.width(f),this.outputConnection.height=a,this.outputConnection.width=f,this.outputConnection.startX=f,this.outputConnection.connectionOffsetY=r.connectionOffsetY(a),this.outputConnection.connectionOffsetX=r.connectionOffsetX(f),r=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(r=f,this.rightSide.height=a,this.rightSide.width=r,this.rightSide.centerline=a/2,this.rightSide.xPos=this.width+r),this.startX=f,this.width+=f+r,this.widthWithChildren+=f+r}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var r=0,a=0;a<this.rows.length;a++){var f=this.rows[a];if(!lt.isInputRow(f))continue;r=f.elements[f.elements.length-2];let S=this.getNegativeSpacing_(f.elements[1]),k=this.getNegativeSpacing_(r);r=S+k;const V=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-r<V&&(r=this.width-V,S=r/2,k=r/2),f.elements.unshift(new jd(this.constants_,-S)),f.elements.push(new jd(this.constants_,-k))}if(r)for(this.width-=r,this.widthWithChildren-=r,this.rightSide.xPos-=r,a=0;a<this.rows.length;a++)f=this.rows[a],lt.isTopOrBottomRow(f)&&(f.elements[1].width-=r),f.width-=r,f.widthWithConnectedBlocks-=r}}getNegativeSpacing_(r){if(!r||!this.outputConnection)return 0;const a=this.outputConnection.width;var f=this.outputConnection.shape.type;const S=this.constants_;if(1<this.inputRows.length)switch(f){case S.SHAPES.ROUND:return f=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,f=this.height/2>f?f:this.height/2,a-f*(1-Math.sin(Math.acos((f-this.constants_.SMALL_PADDING)/f)));default:return 0}if(lt.isInlineInput(r)&&r instanceof Km){const k=r.connectedBlock;return r=k?k.pathObject.outputShapeType:r.shape.type,r==null||k&&k.outputConnection&&(k.statementInputCount||k.nextConnection)||f===S.SHAPES.HEXAGONAL&&f!==r?0:a-this.constants_.SHAPE_IN_SHAPE_PADDING[f][r]}return lt.isField(r)&&r instanceof T0?f===S.SHAPES.ROUND&&r.field instanceof k0?a-2.75*S.GRID_UNIT:a-this.constants_.SHAPE_IN_SHAPE_PADDING[f][0]:lt.isIcon(r)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let S=2;S<this.rows.length-1;S+=2){const k=this.rows[S-1],V=this.rows[S],_e=this.rows[S+1];var r=S===2,a=S+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!_e.precedesStatement;if(r?this.topRow.hasPreviousConnection:k.followsStatement){var f=V.elements[1];if(f=V.elements.length===3&&f instanceof T0&&(f.field instanceof Ti||f.field instanceof Ag),!r&&f)k.height-=this.constants_.SMALL_PADDING,_e.height-=this.constants_.SMALL_PADDING,V.height-=this.constants_.MEDIUM_PADDING;else if(!r&&!a)k.height+=this.constants_.SMALL_PADDING;else if(a){for(r=!1,a=0;a<V.elements.length;a++)if(f=V.elements[a],f instanceof Km&&lt.isInlineInput(f)&&f.connectedBlock&&!f.connectedBlock.isShadow()&&40<=f.connectedBlock.getHeightWidth().height){r=!0;break}r&&(k.height-=this.constants_.SMALL_PADDING,_e.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},c=class extends T_{constructor(r,a,f){super(r,a,f),this.markerCircle=null}showWithInputOutput(r){const a=r.getSourceBlock();r=r.getLocation().getOffsetInBlock(),this.positionCircle(r.x,r.y),this.setParent_(a),this.showCurrent_()}showWithOutput_(r){this.showWithInputOutput(r)}showWithInput_(r){this.showWithInputOutput(r)}showWithBlock_(r){r=r.getLocation();const a=r.getHeightWidth();this.positionRect_(0,0,a.width,a.height),this.setParent_(r),this.showCurrent_()}positionCircle(r,a){let f;(f=this.markerCircle)==null||f.setAttribute("cx",`${r}`);let S;(S=this.markerCircle)==null||S.setAttribute("cy",`${a}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=ie(We.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const r=this.getBlinkProperties_();ie(We.ANIMATE,r,this.markerCircle)}return this.markerSvg_}applyColour_(r){super.applyColour_(r);let a;(a=this.markerCircle)==null||a.setAttribute("fill",this.colour_);let f;if((f=this.markerCircle)==null||f.setAttribute("stroke",this.colour_),this.isCursor()){r=this.colour_+";transparent;transparent;";let S;(S=this.markerCircle)==null||S.firstElementChild.setAttribute("values",r)}}},m=class extends E0{constructor(r,a,f){super(r,a,f),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=f}setPath(r){super.setPath(r),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",r)}applyColour(r){super.applyColour(r);const a=r.getParent();r.isShadow()&&a&&this.svgPath.setAttribute("stroke",a.style.colourTertiary);for(const f of this.outlines.values())f.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const r of this.outlines.values())r.setAttribute("transform","scale(-1 1)")}updateSelected(r){this.setClass_("blocklySelected",r),r?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(r){this.setClass_("blocklyReplaceable",r),r?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(r,a){r=r.getParentInput().name,(r=this.getOutlinePath(r))&&(a?r.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):r.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const r of this.outlines.keys())this.remainingOutlines.add(r)}endDrawing(){if(this.remainingOutlines.size)for(const r of this.remainingOutlines)this.removeOutlinePath(r);this.remainingOutlines.clear()}setOutlinePath(r,a){r=this.getOutlinePath(r),r.setAttribute("d",a),r.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(r){return this.outlines.has(r)||this.outlines.set(r,ie(We.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(r),this.outlines.get(r)}removeOutlinePath(r){let a,f;(a=this.outlines.get(r))==null||(f=a.parentNode)==null||f.removeChild(this.outlines.get(r)),this.outlines.delete(r)}},x=class extends S_{constructor(r){super(r)}makeConstants_(){return new hT}makeRenderInfo_(r){return new gT(this,r)}makeDrawer_(r,a){return new dT(r,a)}makeMarkerDrawer(r,a){return new c(r,this.getConstants(),a)}makePathObject(r,a){return new m(r,a,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(r,a,f){return xe("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===Pn.OUTPUT_VALUE?r.isConnected()?gp.PREVIEW_TYPE.REPLACEMENT_FADE:gp.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(r,a,f)}};Ii("zelos",x);var D={};D.BottomRow=pT,D.ConstantProvider=hT,D.Drawer=dT,D.MarkerSvg=c,D.PathObject=m,D.RenderInfo=gT,D.Renderer=x,D.RightConnectionShape=fT,D.StatementInput=Ay,D.TopRow=mT,Ho();var U={};U.registerCleanup=Jr,U.registerCollapse=as,U.registerCollapseExpandBlock=wu,U.registerComment=pd,U.registerDefaultOptions=Ho,U.registerDelete=co,U.registerDeleteAll=Ku,U.registerDisable=$u,U.registerDuplicate=uo,U.registerExpand=Qi,U.registerHelp=ho,U.registerInline=_a,U.registerRedo=ei,U.registerUndo=Or;var K=class extends A_{constructor(r,a,f){super(Ui.SKIP_SETUP),this.clockwise=K.CLOCKWISE,this.offset=K.OFFSET,this.wrap=K.WRAP,this.round=K.ROUND,this.boundEvents=[],this.symbol_=this.gauge=this.line=null,r!==Ui.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(r),a&&this.setValidator(a))}configure_(r){switch(super.configure_(r),r.mode){case ue.COMPASS:this.clockwise=!0,this.offset=90;break;case ue.PROTRACTOR:this.clockwise=!1,this.offset=0}r.clockwise&&(this.clockwise=r.clockwise),r.offset&&(this.offset=r.offset),r.wrap&&(this.wrap=r.wrap),r.round&&(this.round=r.round)}initView(){super.initView(),this.symbol_=ie(We.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("°")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph()}showEditor_(r){super.showEditor_(r,Dl||An||Bn),r=this.dropdownCreate(),Su().appendChild(r),this.sourceBlock_ instanceof If&&xd(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),ye(this,this.dropdownDispose.bind(this)),this.updateGraph()}dropdownCreate(){const r=ie(We.SVG,{xmlns:Um,"xmlns:html":bc,"xmlns:xlink":qs,version:"1.1",height:2*K.HALF+"px",width:2*K.HALF+"px"});r.style.touchAction="none";const a=ie(We.CIRCLE,{cx:K.HALF,cy:K.HALF,r:K.RADIUS,class:"blocklyAngleCircle"},r);this.gauge=ie(We.PATH,{class:"blocklyAngleGauge"},r),this.line=ie(We.LINE,{x1:K.HALF,y1:K.HALF,class:"blocklyAngleLine"},r);for(let f=0;360>f;f+=15)ie(We.LINE,{x1:K.HALF+K.RADIUS,y1:K.HALF,x2:K.HALF+K.RADIUS-(f%45===0?10:5),y2:K.HALF,class:"blocklyAngleMarks",transform:"rotate("+f+","+K.HALF+","+K.HALF+")"},r);return this.boundEvents.push(Ae(r,"click",this,this.hide)),this.boundEvents.push(Ae(a,"pointerdown",this,this.onMouseMove_,!0)),this.boundEvents.push(Ae(a,"pointermove",this,this.onMouseMove_,!0)),r}dropdownDispose(){for(const r of this.boundEvents)nt(r);this.boundEvents.length=0,this.line=this.gauge=null}hide(){vi(this),Kl()}onMouseMove_(r){var a=this.gauge.ownerSVGElement.getBoundingClientRect();const f=r.clientX-a.left-K.HALF;r=r.clientY-a.top-K.HALF,a=Math.atan(-r/f),isNaN(a)||(a=ns(a),0>f?a+=180:0<r&&(a+=360),a=this.clockwise?this.offset+360-a:360-(this.offset-a),this.displayMouseOrKeyboardValue(a))}displayMouseOrKeyboardValue(r){if(this.round&&(r=Math.round(r/this.round)*this.round),r=this.wrapValue(r),r!==this.value_){const a=this.value_;this.setEditorValue_(r,!1),this.sourceBlock_&&se()&&this.value_!==a&&ce(new(Re(Sh))(this.sourceBlock_,this.name||null,a,this.value_))}}updateGraph(){if(this.gauge&&this.line){var r=Number(this.getText())+this.offset,a=Nc(r%360);r=["M ",K.HALF,",",K.HALF];var f=K.HALF,S=K.HALF;if(!isNaN(a)){const k=Number(this.clockwise),V=Nc(this.offset),_e=Math.cos(V)*K.RADIUS,ze=Math.sin(V)*-K.RADIUS;k&&(a=2*V-a),f+=Math.cos(a)*K.RADIUS,S-=Math.sin(a)*K.RADIUS,a=Math.abs(Math.floor((a-V)/Math.PI)%2),k&&(a=1-a),r.push(" l ",_e,",",ze," A ",K.RADIUS,",",K.RADIUS," 0 ",a," ",k," ",f,",",S," z")}this.gauge.setAttribute("d",r.join("")),this.line.setAttribute("x2",`${f}`),this.line.setAttribute("y2",`${S}`)}}onHtmlInputKeyDown_(r){super.onHtmlInputKeyDown_(r);var a=this.getSourceBlock();if(!a)throw new Io;let f=0;switch(r.key){case"ArrowLeft":f=a.RTL?1:-1;break;case"ArrowRight":f=a.RTL?-1:1;break;case"ArrowDown":f=-1;break;case"ArrowUp":f=1}f&&(a=this.getValue(),this.displayMouseOrKeyboardValue(a+f*this.round),r.preventDefault(),r.stopPropagation())}doClassValidation_(r){return r=Number(r),isNaN(r)||!isFinite(r)?null:this.wrapValue(r)}wrapValue(r){return r%=360,0>r&&(r+=360),r>this.wrap&&(r-=360),r}static fromJson(r){return new this(r.angle,void 0,r)}};K.HALF=50,K.RADIUS=K.HALF-1,K.CLOCKWISE=!1,K.OFFSET=0,K.WRAP=360,K.ROUND=15,Es("field_angle",K),K.prototype.DEFAULT_VALUE=0,Mt(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: 0.8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: 0.8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`);var ue;(function(r){r.COMPASS="compass",r.PROTRACTOR="protractor"})(ue||(ue={}));var me=class extends Ui{constructor(r,a,f){super(Ui.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=me.CHECK_CHAR,r!==Ui.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.checkCharacter&&(this.checkChar=r.checkCharacter)}saveState(){const r=this.saveLegacyState(me);return r!==null?r:this.getValueBoolean()}initView(){super.initView();const r=this.getTextElement();we(r,"blocklyCheckbox"),r.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(r){this.checkChar=r||me.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(r){return r===!0||r==="TRUE"?"TRUE":r===!1||r==="FALSE"?"FALSE":null}doValueUpdate_(r){this.value_=this.convertValueToBool_(r),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(r){return typeof r=="string"?r==="TRUE":!!r}static fromJson(r){return new this(r.checked,void 0,r)}};me.CHECK_CHAR="✓",Es("field_checkbox",me),me.prototype.DEFAULT_VALUE=!1;var Ee=class extends Ui{constructor(r,a,f){super(Ui.SKIP_SETUP),this.highlightedIndex=this.picker=null,this.boundEvents=[],this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles=this.colours=null,this.columns=0,r!==Ui.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.colourOptions&&(this.colours=r.colourOptions),r.colourTitles&&(this.titles=r.colourTitles),r.columns&&(this.columns=r.columns)}initView(){this.size_=new Qs(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1",this.getBorderRect().setAttribute("stroke","#fff"),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const r=this.getSourceBlock();if(!r)throw new Io;const a=this.getConstants();return r.isSimpleReporter()&&!(a==null||!a.FIELD_COLOUR_FULL_BLOCK)}applyColour(){const r=this.getSourceBlock();if(!r)throw new Io;if(this.fieldGroup_){var a=this.borderRect_;if(!a)throw Error("The border rect has not been initialized");this.isFullBlockField()?(a.style.display="none",r.pathObject.svgPath.setAttribute("fill",this.getValue()),r.pathObject.svgPath.setAttribute("stroke","#fff")):(a.style.display="block",a.style.fill=this.getValue())}}getSize(){let r;return(r=this.getConstants())!=null&&r.FIELD_COLOUR_FULL_BLOCK&&(this.render_(),this.isDirty_=!1),super.getSize()}render_(){super.render_();const r=this.getSourceBlock();if(!r)throw new Io;r.applyColour()}updateSize_(r){var a=this.getConstants();this.isFullBlockField()?(r=2*(r??0),a=a.FIELD_TEXT_HEIGHT):(r=a.FIELD_COLOUR_DEFAULT_WIDTH,a=a.FIELD_COLOUR_DEFAULT_HEIGHT),this.size_.height=a,this.size_.width=r,this.positionBorderRect_()}doClassValidation_(r){return typeof r!="string"?null:Zo(r)}getText(){let r=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(r)&&(r="#"+r[1]+r[3]+r[5]),r}setColours(r,a){return this.colours=r,a&&(this.titles=a),this}setColumns(r){return this.columns=r,this}showEditor_(){this.dropdownCreate(),Su().appendChild(this.picker),ye(this,this.dropdownDispose.bind(this)),this.picker.focus({preventScroll:!0})}onClick(r){r=(r=r.target)&&r.getAttribute("data-colour"),r!==null&&(this.setValue(r),vi(this))}onKeyDown(r){let a=!0;var f;switch(r.key){case"ArrowUp":this.moveHighlightBy(0,-1);break;case"ArrowDown":this.moveHighlightBy(0,1);break;case"ArrowLeft":this.moveHighlightBy(-1,0);break;case"ArrowRight":this.moveHighlightBy(1,0);break;case"Enter":(f=this.getHighlighted())&&(f=f.getAttribute("data-colour"),f!==null&&this.setValue(f)),il();break;default:a=!1}a&&r.stopPropagation()}moveHighlightBy(r,a){if(this.highlightedIndex){var f=this.colours||Ee.COLOURS,S=this.columns||Ee.COLUMNS,k=this.highlightedIndex%S,V=Math.floor(this.highlightedIndex/S);k+=r,V+=a,0>r?0>k&&0<V?(k=S-1,V--):0>k&&(k=0):0<r?k>S-1&&V<Math.floor(f.length/S)-1?(k=0,V++):k>S-1&&k--:0>a?0>V&&(V=0):0<a&&V>Math.floor(f.length/S)-1&&(V=Math.floor(f.length/S)-1),this.setHighlightedCell(this.picker.childNodes[V].childNodes[k],V*S+k)}}onMouseMove(r){const a=(r=r.target)&&Number(r.getAttribute("data-index"));a!==null&&a!==this.highlightedIndex&&this.setHighlightedCell(r,a)}onMouseEnter(){let r;(r=this.picker)==null||r.focus({preventScroll:!0})}onMouseLeave(){var r;(r=this.picker)==null||r.blur(),(r=this.getHighlighted())&&Tt(r,"blocklyColourHighlighted")}getHighlighted(){if(!this.highlightedIndex)return null;const r=this.columns||Ee.COLUMNS,a=this.picker.childNodes[Math.floor(this.highlightedIndex/r)];return a?a.childNodes[this.highlightedIndex%r]:null}setHighlightedCell(r,a){const f=this.getHighlighted();f&&Tt(f,"blocklyColourHighlighted"),we(r,"blocklyColourHighlighted"),this.highlightedIndex=a,(r=r.getAttribute("id"))&&this.picker&&Sr(this.picker,vo.ACTIVEDESCENDANT,r)}dropdownCreate(){const r=this.columns||Ee.COLUMNS,a=this.colours||Ee.COLOURS,f=this.titles||Ee.TITLES,S=this.getValue(),k=document.createElement("table");k.className="blocklyColourTable",k.tabIndex=0,k.dir="ltr",li(k,th.GRID),Sr(k,vo.EXPANDED,!0),Sr(k,vo.ROWCOUNT,Math.floor(a.length/r)),Sr(k,vo.COLCOUNT,r);let V;for(let _e=0;_e<a.length;_e++){_e%r===0&&(V=document.createElement("tr"),li(V,th.ROW),k.appendChild(V));const ze=document.createElement("td");V.appendChild(ze),ze.setAttribute("data-colour",a[_e]),ze.title=f[_e]||a[_e],ze.id=J(),ze.setAttribute("data-index",`${_e}`),li(ze,th.GRIDCELL),Sr(ze,vo.LABEL,a[_e]),Sr(ze,vo.SELECTED,a[_e]===S),ze.style.backgroundColor=a[_e],a[_e]===S&&(ze.className="blocklyColourSelected",this.highlightedIndex=_e)}this.boundEvents.push(Ae(k,"pointerdown",this,this.onClick,!0)),this.boundEvents.push(Ae(k,"pointermove",this,this.onMouseMove,!0)),this.boundEvents.push(Ae(k,"pointerenter",this,this.onMouseEnter,!0)),this.boundEvents.push(Ae(k,"pointerleave",this,this.onMouseLeave,!0)),this.boundEvents.push(Ae(k,"keydown",this,this.onKeyDown,!1)),this.picker=k}dropdownDispose(){for(const r of this.boundEvents)nt(r);this.boundEvents.length=0,this.highlightedIndex=this.picker=null}static fromJson(r){return new this(r.colour,void 0,r)}};Ee.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),Ee.TITLES=[],Ee.COLUMNS=7,Ee.prototype.DEFAULT_VALUE=Ee.COLOURS[0],Es("field_colour",Ee),Mt(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: 0.5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`);var Ze=class extends Ti{constructor(r,a,f){super(String(r??""),a,f),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(r){return new this(Gr(r.text),void 0,r)}};Es("field_label_serializable",Ze);var et=class extends k0{constructor(r,a,f){super(Ui.SKIP_SETUP),this.textGroup=null,this.maxLines_=1/0,this.isOverflowedY_=!1,r!==Ui.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.maxLines&&this.setMaxLines(r.maxLines)}toXml(r){return r.textContent=this.getValue().replace(/\n/g,"&#10;"),r}fromXml(r){this.setValue(r.textContent.replace(/&#10;/g,`
`))}saveState(){const r=this.saveLegacyState(et);return r!==null?r:this.getValue()}loadState(r){this.loadLegacyState(Ui,r)||this.setValue(r)}initView(){this.createBorderRect_(),this.textGroup=ie(We.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const r=this.getSourceBlock();if(!r)throw new Io;let a=this.getText();if(!a)return Ui.NBSP;const f=a.split(`
`);a="";const S=this.isOverflowedY_?this.maxLines_:f.length;for(let k=0;k<S;k++){let V=f[k];V.length>this.maxDisplayLength?V=V.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&k===S-1&&(V=V.substring(0,V.length-3)+"..."),V=V.replace(/\s/g,Ui.NBSP),a+=V,k!==S-1&&(a+=`
`)}return r.RTL&&(a+="‏"),a}doValueUpdate_(r){super.doValueUpdate_(r),this.value_!==null&&(this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_)}render_(){var r=this.getSourceBlock();if(!r)throw new Io;for(var a,f=this.textGroup;a=f.firstChild;)f.removeChild(a);a=this.getDisplayText_().split(`
`);let S=0;for(let k=0;k<a.length;k++){const V=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;ie(We.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:S+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},f).appendChild(document.createTextNode(a[k])),S+=V}this.isBeingEdited_&&(f=this.htmlInput_,this.isOverflowedY_?we(f,"blocklyHtmlTextAreaInputOverflowedY"):Tt(f,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(r.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),r=this.htmlInput_,this.isTextValid_?(Tt(r,"blocklyInvalidInput"),Sr(r,vo.INVALID,!1)):(we(r,"blocklyInvalidInput"),Sr(r,vo.INVALID,!0)))}updateSize_(){var r=this.textGroup.childNodes;const a=this.getConstants().FIELD_TEXT_FONTSIZE,f=this.getConstants().FIELD_TEXT_FONTWEIGHT,S=this.getConstants().FIELD_TEXT_FONTFAMILY;let k=0,V=0;for(var _e=0;_e<r.length;_e++){var ze=Ye(r[_e],a,f,S);ze>k&&(k=ze),V+=this.getConstants().FIELD_TEXT_HEIGHT+(0<_e?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(r=String(this.value_).split(`
`),_e=ie(We.TEXT,{class:"blocklyText blocklyMultilineText"}),ze=0;ze<r.length;ze++){r[ze].length>this.maxDisplayLength&&(r[ze]=r[ze].substring(0,this.maxDisplayLength)),_e.textContent=r[ze];const jt=Ye(_e,a,f,S);jt>k&&(k=jt)}k+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(V+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,k+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",`${k}`),this.borderRect_.setAttribute("height",`${V}`)),this.size_.width=k,this.size_.height=V,this.positionBorderRect_()}showEditor_(r,a){super.showEditor_(r,a),this.forceRerender()}widgetCreate_(){const r=io(),a=this.workspace_.getScale(),f=document.createElement("textarea");f.className="blocklyHtmlInput blocklyHtmlTextAreaInput",f.setAttribute("spellcheck",String(this.spellcheck_));var S=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";r.style.fontSize=S,f.style.fontSize=S,f.style.borderRadius=k0.BORDERRADIUS*a+"px",S=this.getConstants().FIELD_BORDER_RECT_X_PADDING*a;const k=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*a/2;return f.style.padding=k+"px "+S+"px "+k+"px "+S+"px",S=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,f.style.lineHeight=S*a+"px",r.appendChild(f),f.value=f.defaultValue=this.getEditorText_(this.value_),f.setAttribute("data-untyped-default-value",String(this.value_)),f.setAttribute("data-old-value",""),Sn?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(f),f}setMaxLines(r){typeof r=="number"&&0<r&&r!==this.maxLines_&&(this.maxLines_=r,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(r){r.key!=="Enter"&&super.onHtmlInputKeyDown_(r)}static fromJson(r){return new this(Gr(r.text),void 0,r)}};Es("field_multilinetext",et),Mt(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`);var ut=class extends A_{constructor(r,a,f,S,k,V){super(Ui.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,r!==Ui.SKIP_SETUP&&(V?this.configure_(V):this.setConstraints(a,f,S),this.setValue(r),k&&this.setValidator(k))}configure_(r){super.configure_(r),this.setMinInternal(r.min),this.setMaxInternal(r.max),this.setPrecisionInternal(r.precision)}setConstraints(r,a,f){this.setMinInternal(r),this.setMaxInternal(a),this.setPrecisionInternal(f),this.setValue(this.getValue())}setMin(r){this.setMinInternal(r),this.setValue(this.getValue())}setMinInternal(r){r==null?this.min_=-1/0:(r=Number(r),isNaN(r)||(this.min_=r))}getMin(){return this.min_}setMax(r){this.setMaxInternal(r),this.setValue(this.getValue())}setMaxInternal(r){r==null?this.max_=1/0:(r=Number(r),isNaN(r)||(this.max_=r))}getMax(){return this.max_}setPrecision(r){this.setPrecisionInternal(r),this.setValue(this.getValue())}setPrecisionInternal(r){this.precision_=Number(r)||0;let a=String(this.precision_);a.indexOf("e")!==-1&&(a=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const f=a.indexOf(".");this.decimalPlaces=f===-1?r?0:null:a.length-f-1}getPrecision(){return this.precision_}doClassValidation_(r){return r===null||(r=`${r}`.replace(/O/gi,"0"),r=r.replace(/,/g,""),r=r.replace(/infinity/i,"Infinity"),r=Number(r||0),isNaN(r))?null:(r=Math.min(Math.max(r,this.min_),this.max_),this.precision_&&isFinite(r)&&(r=Math.round(r/this.precision_)*this.precision_),this.decimalPlaces!==null&&(r=Number(r.toFixed(this.decimalPlaces))),r)}widgetCreate_(){const r=super.widgetCreate_();return-1/0<this.min_&&(r.min=`${this.min_}`,Sr(r,vo.VALUEMIN,this.min_)),1/0>this.max_&&(r.max=`${this.max_}`,Sr(r,vo.VALUEMAX,this.max_)),r}static fromJson(r){return new this(r.value,void 0,void 0,void 0,void 0,r)}};Es("field_number",ut),ut.prototype.DEFAULT_VALUE=0;var It=class extends xh{constructor(r,a,f,S,k){super(Ui.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=It.dropdownCreate,this.defaultVariableName=typeof r=="string"?r:"",this.size_=new Qs(0,0),r!==Ui.SKIP_SETUP&&(k?this.configure_(k):this.setTypes(f,S),a&&this.setValidator(a))}configure_(r){super.configure_(r),this.setTypes(r.variableTypes,r.defaultType)}initModel(){var r=this.getSourceBlock();if(!r)throw new Io;this.variable||(r=t.getOrCreateVariablePackage$$module$build$src$core$variables(r.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(r.getId()))}shouldAddBorderRect_(){const r=this.getSourceBlock();if(!r)throw new Io;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||r.type!=="variables_get")}fromXml(r){var a=this.getSourceBlock();if(!a)throw new Io;const f=r.getAttribute("id"),S=r.textContent,k=r.getAttribute("variabletype")||r.getAttribute("variableType")||"";if(a=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,f,S,k),k!==null&&k!==a.type)throw Error("Serialized variable type with id '"+a.getId()+"' had type "+a.type+", and does not match variable field that references it: "+Ki(r)+".");this.setValue(a.getId())}toXml(r){return this.initModel(),r.id=this.variable.getId(),r.textContent=this.variable.name,this.variable.type&&r.setAttribute("variabletype",this.variable.type),r}saveState(r){var a=this.saveLegacyState(It);return a!==null||(this.initModel(),a={id:this.variable.getId()},r&&(a.name=this.variable.name,a.type=this.variable.type)),a}loadState(r){const a=this.getSourceBlock();if(!a)throw new Io;this.loadLegacyState(It,r)||(r=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,r.id||null,r.name,r.type||""),this.setValue(r.getId()))}setSourceBlock(r){if(r.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(r)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(r){if(r===null)return null;var a=this.getSourceBlock();if(!a)throw new Io;return a=t.getVariable$$module$build$src$core$variables(a.workspace,r),a?(a=a.type,this.typeIsAllowed(a)?r:(console.warn("Variable type doesn't match this field!  Type was "+a),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+r),null)}doValueUpdate_(r){const a=this.getSourceBlock();if(!a)throw new Io;this.variable=t.getVariable$$module$build$src$core$variables(a.workspace,r),super.doValueUpdate_(r)}typeIsAllowed(r){const a=this.getVariableTypes();if(!a)return!0;for(let f=0;f<a.length;f++)if(r===a[f])return!0;return!1}getVariableTypes(){var r=this.variableTypes;if(r===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(r=r||[""],r.length===0)throw r=this.getText(),Error("'variableTypes' of field variable "+r+" was an empty list");return r}setTypes(r=null,a=""){if(Array.isArray(r)){let f=!1;for(let S=0;S<r.length;S++)r[S]===a&&(f=!0);if(!f)throw Error("Invalid default type '"+a+"' in the definition of a FieldVariable")}else if(r!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=a,this.variableTypes=r}refreshVariableName(){this.forceRerender()}onItemSelected_(r,a){if(r=a.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(r===un){t.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(r===sn){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(r)}referencesVariables(){return!0}static fromJson(r){return new this(Gr(r.variable),void 0,void 0,void 0,r)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const r=this.getText();let a=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var f=this.getVariableTypes(),S=0;S<f.length;S++){const k=this.sourceBlock_.workspace.getVariablesOfType(f[S]);a=a.concat(k)}for(a.sort(hp.compareByName),f=[],S=0;S<a.length;S++)f[S]=[a[S].name,a[S].getId()];return f.push([t.Msg$$module$build$src$core$msg.RENAME_VARIABLE,un]),t.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&f.push([t.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",r),sn]),f}};Es("field_variable",It);var Xt=class{constructor(r,a,f,S){this.workspace=r,this.targetWorkspace=a,this.isLabel_=S,this.onMouseUpWrapper=null,this.height=this.width=0,this.svgText=this.svgGroup=null,this.text=f.text,this.position=new mn(0,0),this.callbackKey=f.callbackKey||f.callbackkey,this.cssClass=f["web-class"]||null,this.info=f}createDom(){var r=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(r+=" "+this.cssClass),this.svgGroup=ie(We.G,{class:r},this.workspace.getCanvas());let a;this.isLabel_||(a=ie(We.RECT,{class:"blocklyFlyoutButtonShadow",rx:Xt.BORDER_RADIUS,ry:Xt.BORDER_RADIUS,x:1,y:1},this.svgGroup)),r=ie(We.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Xt.BORDER_RADIUS,ry:Xt.BORDER_RADIUS},this.svgGroup);const f=ie(We.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var S=Gr(this.text);this.workspace.RTL&&(S+="‏"),f.textContent=S,this.isLabel_&&(this.svgText=f,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const k=Yt(f,"fontSize"),V=Yt(f,"fontWeight"),_e=Yt(f,"fontFamily");if(this.width=Gt(f,k,V,_e),S=He(S,k,V,_e),this.height=S.height,!this.isLabel_){this.width+=2*Xt.TEXT_MARGIN_X,this.height+=2*Xt.TEXT_MARGIN_Y;let ze;(ze=a)==null||ze.setAttribute("width",String(this.width));let jt;(jt=a)==null||jt.setAttribute("height",String(this.height))}return r.setAttribute("width",String(this.width)),r.setAttribute("height",String(this.height)),f.setAttribute("x",String(this.width/2)),f.setAttribute("y",String(this.height/2-S.height/2+S.baseline)),this.updateTransform(),this.onMouseUpWrapper=Ae(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(r,a){this.position.x=r,this.position.y=a,this.updateTransform()}isLabel(){return this.isLabel_}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper&&nt(this.onMouseUpWrapper),this.svgGroup&&ft(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}onMouseUp(r){(r=this.targetWorkspace.getGesture(r))&&r.cancel(),this.isLabel_&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isLabel_||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isLabel_||(r=this.targetWorkspace.getButtonCallback(this.callbackKey))&&r(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};Xt.TEXT_MARGIN_X=5,Xt.TEXT_MARGIN_Y=2,Xt.BORDER_RADIUS=4,Mt(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var dn=class extends M_{constructor(r,a){super(r),this.flyout_=a}getBoundingBox_(){let r;try{r=this.workspace_.getCanvas().getBBox()}catch{r={height:0,y:0,width:0,x:0}}return r}getContentMetrics(r){const a=this.getBoundingBox_();return r=r?1:this.workspace_.scale,{height:a.height*r,width:a.width*r,top:a.y*r,left:a.x*r}}getScrollMetrics(r,a,f){return a=f||this.getContentMetrics(),f=this.flyout_.MARGIN*this.workspace_.scale,r=r?this.workspace_.scale:1,{height:(a.height+2*f)/r,width:(a.width+a.left+f)/r,top:0,left:0}}},kn;(function(r){r.BLOCK="block",r.BUTTON="button"})(kn||(kn={}));var cn=class extends wy{constructor(r){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,r.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Yp(r),this.workspace_.setMetricsManager(new dn(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=te(),this.RTL=!!r.RTL,this.toolboxPosition_=r.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(r){return this.svgGroup_=ie(r,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=ie(We.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(r){this.targetWorkspace=r,this.workspace_.targetWorkspace=r,this.workspace_.scrollbar=new ab(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(Ae(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(Ae(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),r.getComponentManager().addComponent({component:this,weight:1,capabilities:[pl.Capability.AUTOHIDEABLE,pl.Capability.DELETE_AREA,pl.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const r of this.boundEvents)nt(r);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&ft(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(r){this.autoClose=r,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(r){!r&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}isVisible(){return this.isVisible_}setVisible(r){const a=r!==this.isVisible();this.isVisible_=r,a&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(r){const a=r!==this.containerVisible;this.containerVisible=r,a&&this.updateDisplay()}updateDisplay(){let r;r=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=r?"block":"none");let a;(a=this.workspace_.scrollbar)==null||a.setContainerVisible(r)}positionAt_(r,a,f,S){let k;(k=this.svgGroup_)==null||k.setAttribute("width",`${r}`);let V;(V=this.svgGroup_)==null||V.setAttribute("height",`${a}`),this.workspace_.setCachedParentSvgSize(r,a),this.svgGroup_&&Q(this.svgGroup_,"translate("+f+"px,"+S+"px)"),(r=this.workspace_.scrollbar)&&(r.setOrigin(f,S),r.resize(),r.hScroll&&r.hScroll.setPosition(r.hScroll.position.x,r.hScroll.position.y),r.vScroll&&r.vScroll.setPosition(r.vScroll.position.x,r.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const r of this.listeners)nt(r);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(r){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof r=="string"&&(r=this.getDynamicCategoryContents(r)),this.setVisible(!0),r=vt(r),r=this.createFlyoutInfo(r),Ei(this.workspace_),this.layout_(r.contents,r.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(r){const a=[],f=[];this.permanentlyDisabled.length=0;const S=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const k of r){if("custom"in k){r=this.getDynamicCategoryContents(k.custom),r=vt(r);const{contents:V,gaps:_e}=this.createFlyoutInfo(r);a.push(...V),f.push(..._e)}switch(k.kind.toUpperCase()){case"BLOCK":r=k;const V=this.createFlyoutBlock(r);a.push({type:kn.BLOCK,block:V}),this.addBlockGap(r,f,S);break;case"SEP":this.addSeparatorGap(k,f,S);break;case"LABEL":r=this.createButton(k,!0),a.push({type:kn.BUTTON,button:r}),f.push(S);break;case"BUTTON":r=this.createButton(k,!1),a.push({type:kn.BUTTON,button:r}),f.push(S)}}return{contents:a,gaps:f}}getDynamicCategoryContents(r){if(r=this.workspace_.targetWorkspace.getToolboxCategoryCallback(r),typeof r!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return r(this.workspace_.targetWorkspace)}createButton(r,a){return new Xt(this.workspace_,this.targetWorkspace,r,a)}createFlyoutBlock(r){let a;return r.blockxml?(r=typeof r.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(r.blockxml):r.blockxml,(a=this.getRecycledBlock(r.getAttribute("type")))||(a=no(r,this.workspace_))):(a=this.getRecycledBlock(r.type),a||(r.enabled===void 0&&(r.enabled=r.disabled!=="true"&&r.disabled!==!0),a=$i(r,this.workspace_))),a.isEnabled()||this.permanentlyDisabled.push(a),a}getRecycledBlock(r){let a=-1;for(let f=0;f<this.recycledBlocks.length;f++)if(this.recycledBlocks[f].type===r){a=f;break}return a===-1?void 0:this.recycledBlocks.splice(a,1)[0]}addBlockGap(r,a,f){let S;r.gap?S=parseInt(String(r.gap)):r.blockxml&&(r=typeof r.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(r.blockxml):r.blockxml,S=parseInt(r.getAttribute("gap"))),a.push(!S||isNaN(S)?f:S)}addSeparatorGap(r,a,f){r=parseInt(String(r.gap)),!isNaN(r)&&0<a.length?a[a.length-1]=r:a.push(f)}clearOldBlocks(){var r=this.workspace_.getTopBlocks(!1);for(let f=0,S;S=r[f];f++)this.blockIsRecyclable_(S)?this.recycleBlock(S):S.dispose(!1,!1);for(r=0;r<this.mats.length;r++){const f=this.mats[r];f&&(hd(f),ft(f))}this.mats.length=0;for(let f=0,S;S=this.buttons_[f];f++)S.dispose();this.buttons_.length=0;let a;(a=this.workspace_.getPotentialVariableMap())==null||a.clear()}emptyRecycledBlocks(){for(let r=0;r<this.recycledBlocks.length;r++)this.recycledBlocks[r].dispose();this.recycledBlocks=[]}blockIsRecyclable_(r){return!1}recycleBlock(r){const a=r.getRelativeToSurfaceXY();r.moveBy(-a.x,-a.y),this.recycledBlocks.push(r)}addBlockListeners_(r,a,f){this.listeners.push(Ae(r,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(Ae(f,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(je(r,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(je(r,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()})),this.listeners.push(je(f,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(je(f,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()}))}blockMouseDown(r){return a=>{const f=this.targetWorkspace.getGesture(a);f&&(f.setStartBlock(r),f.handleFlyoutStart(a,this))}}onMouseDown(r){const a=this.targetWorkspace.getGesture(r);a&&a.handleFlyoutStart(r,this)}isBlockCreatable(r){return r.isEnabled()}createBlock(r){let a=null;t.disable$$module$build$src$core$events$utils();var f=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{a=this.placeNewBlock(r)}finally{t.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),r=Vl(this.targetWorkspace,f),se()){for(t.setGroup$$module$build$src$core$events$utils(!0),f=0;f<r.length;f++){const S=r[f];ce(new(Re(fo))(S))}ce(new(Re(t.CREATE$$module$build$src$core$events$utils))(a))}return this.autoClose?this.hide():this.filterForCapacity(),a}initFlyoutButton_(r,a,f){const S=r.createDom();r.moveTo(a,f),r.show(),this.listeners.push(Ae(S,"pointerdown",this,this.onMouseDown)),this.buttons_.push(r)}createRect_(r,a,f,S,k){return a=ie(We.RECT,{"fill-opacity":0,x:a,y:f,height:S.height,width:S.width}),a.tooltip=r,Pi(a),this.workspace_.getCanvas().insertBefore(a,r.getSvgRoot()),this.rectMap_.set(r,a),this.mats[k]=a}moveRectToBlock_(r,a){const f=a.getHeightWidth();r.setAttribute("width",String(f.width)),r.setAttribute("height",String(f.height)),a=a.getRelativeToSurfaceXY(),r.setAttribute("y",String(a.y)),r.setAttribute("x",String(this.RTL?a.x-f.width:a.x))}filterForCapacity(){const r=this.workspace_.getTopBlocks(!1);for(let a=0,f;f=r[a];a++)if(this.permanentlyDisabled.indexOf(f)===-1){const S=this.targetWorkspace.isCapacityAvailable(j(f));for(;f;)f.setEnabled(S),f=f.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(r){var a=this.targetWorkspace;if(!r.getSvgRoot())throw Error("oldBlock is not rendered");const f=xi(r);return a.setResizesEnabled(!1),a=Hn(f,a),this.positionNewBlock(r,a),a}positionNewBlock(r,a){const f=this.targetWorkspace;var S=f.getOriginOffsetInPixels(),k=this.workspace_.getOriginOffsetInPixels();r=r.getRelativeToSurfaceXY(),r.scale(this.workspace_.scale),k=mn.sum(k,r),S=mn.difference(k,S),S.scale(1/f.scale),a.moveTo(new mn(S.x,S.y))}};cn.FlyoutItemType=kn;var Wn=class extends cn{constructor(r){super(r),this.horizontalLayout=!0}setMetrics_(r){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),f=a.getScrollMetrics(),S=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof r.x=="number"&&(this.workspace_.scrollX=-(f.left+(f.width-S.width)*r.x)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var r=this.targetWorkspace.getMetricsManager();const a=r.getAbsoluteMetrics(),f=r.getViewMetrics();r=r.getToolboxMetrics();const S=this.toolboxPosition_===dr.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?S?r.height:f.height-this.height_:S?0:f.height:S?0:f.height+a.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var r=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=r.width,this.setBackgroundPath(r.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),r=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,r,a)}}setBackgroundPath(r,a){const f=this.toolboxPosition_===dr.TOP,S=["M 0,"+(f?0:this.CORNER_RADIUS)];f?(S.push("h",r+2*this.CORNER_RADIUS),S.push("v",a),S.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),S.push("h",-r),S.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(S.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),S.push("h",r),S.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),S.push("v",a),S.push("h",-r-2*this.CORNER_RADIUS)),S.push("z"),this.svgBackground_.setAttribute("d",S.join(" "))}scrollToStart(){let r;(r=this.workspace_.scrollbar)==null||r.setX(this.RTL?1/0:0)}wheel_(r){var a=yt(r);if(a=a.x||a.y){const f=this.workspace_.getMetricsManager(),S=f.getScrollMetrics();a=f.getViewMetrics().left-S.left+a;let k;(k=this.workspace_.scrollbar)==null||k.setX(a),Kl(),il()}r.preventDefault(),r.stopPropagation()}layout_(r,a){this.workspace_.scale=this.targetWorkspace.scale;const f=this.MARGIN;let S=f+this.tabWidth_;this.RTL&&(r=r.reverse());for(let ze=0,jt;jt=r[ze];ze++)if(jt.type==="block"){var k=jt.block,V=k.getDescendants(!1);for(let _l=0,Ka;Ka=V[_l];_l++)Ka.isInFlyout=!0;V=k.getSvgRoot();const Gn=k.getHeightWidth();var _e=k.outputConnection?this.tabWidth_:0;_e=this.RTL?S+Gn.width:S-_e,k.moveBy(_e,f),_e=this.createRect_(k,_e,f,Gn,ze),S+=Gn.width+a[ze],this.addBlockListeners_(V,k,_e)}else jt.type==="button"&&(k=jt.button,this.initFlyoutButton_(k,S,f),S+=k.width+a[ze])}isDragTowardWorkspace(r){r=Math.atan2(r.y,r.x)/Math.PI*180;const a=this.dragAngleRange_;return r<90+a&&r>90-a||r>-90-a&&r<-90+a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const r=this.svgGroup_.getBoundingClientRect(),a=r.top;return this.toolboxPosition_===dr.TOP?new Ri(-1e9,a+r.height,-1e9,1e9):new Ri(a,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let r=0;const a=this.workspace_.getTopBlocks(!1);for(let S=0,k;k=a[S];S++)r=Math.max(r,k.getHeightWidth().height);const f=this.buttons_;for(let S=0,k;k=f[S];S++)r=Math.max(r,k.height);if(r+=1.5*this.MARGIN,r*=this.workspace_.scale,r+=Sa.scrollbarThickness,this.height_!==r){for(let S=0,k;k=a[S];S++)this.rectMap_.has(k)&&this.moveRectToBlock_(this.rectMap_.get(k),k);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==dr.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+r),this.height_=r,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};i(Pt.FLYOUTS_HORIZONTAL_TOOLBOX,kl,Wn);var qn=class extends cn{constructor(r){super(r)}setMetrics_(r){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),f=a.getScrollMetrics(),S=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof r.y=="number"&&(this.workspace_.scrollY=-(f.top+(f.height-S.height)*r.y)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){if(!this.isVisible())return 0;var r=this.targetWorkspace.getMetricsManager();const a=r.getAbsoluteMetrics(),f=r.getViewMetrics();return r=r.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===dr.LEFT?r.width:f.width-this.width_:this.toolboxPosition_===dr.LEFT?0:f.width:this.toolboxPosition_===dr.LEFT?0:f.width+a.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var r=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=r.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,r.height-2*this.CORNER_RADIUS),r=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,r,a)}}setBackgroundPath(r,a){const f=this.toolboxPosition_===dr.RIGHT;var S=r+this.CORNER_RADIUS;S=["M "+(f?S:0)+",0"],S.push("h",f?-r:r),S.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,f?0:1,f?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),S.push("v",Math.max(0,a)),S.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,f?0:1,f?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),S.push("h",f?r:-r),S.push("z"),this.svgBackground_.setAttribute("d",S.join(" "))}scrollToStart(){let r;(r=this.workspace_.scrollbar)==null||r.setY(0)}wheel_(r){var a=yt(r);if(a.y){const f=this.workspace_.getMetricsManager(),S=f.getScrollMetrics();a=f.getViewMetrics().top-S.top+a.y;let k;(k=this.workspace_.scrollbar)==null||k.setY(a),Kl(),il()}r.preventDefault(),r.stopPropagation()}layout_(r,a){this.workspace_.scale=this.targetWorkspace.scale;var f=this.MARGIN;const S=this.RTL?f:f+this.tabWidth_;for(let ze=0,jt;jt=r[ze];ze++)if(jt.type==="block"){var k=jt.block,V=k.getDescendants(!1);for(let _l=0,Ka;Ka=V[_l];_l++)Ka.isInFlyout=!0;V=k.getSvgRoot();const Gn=k.getHeightWidth();var _e=k.outputConnection?S-this.tabWidth_:S;k.moveBy(_e,f),_e=this.createRect_(k,this.RTL?_e-Gn.width:_e,f,Gn,ze),this.addBlockListeners_(V,k,_e),f+=Gn.height+a[ze]}else jt.type==="button"&&(k=jt.button,this.initFlyoutButton_(k,S,f),f+=k.height+a[ze])}isDragTowardWorkspace(r){r=Math.atan2(r.y,r.x)/Math.PI*180;const a=this.dragAngleRange_;return r<a&&r>-a||r<-180+a||r>180-a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const r=this.svgGroup_.getBoundingClientRect(),a=r.left;return this.toolboxPosition_===dr.LEFT?new Ri(-1e9,1e9,-1e9,a+r.width):new Ri(-1e9,1e9,a,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let r=0;var a=this.workspace_.getTopBlocks(!1);for(let S=0,k;k=a[S];S++){var f=k.getHeightWidth().width;k.outputConnection&&(f-=this.tabWidth_),r=Math.max(r,f)}for(let S=0,k;k=this.buttons_[S];S++)r=Math.max(r,k.width);if(r+=1.5*this.MARGIN+this.tabWidth_,r*=this.workspace_.scale,r+=Sa.scrollbarThickness,this.width_!==r){for(let S=0,k;k=a[S];S++){if(this.RTL){f=k.getRelativeToSurfaceXY().x;let V=r/this.workspace_.scale-this.MARGIN;k.outputConnection||(V-=this.tabWidth_),k.moveBy(V-f,0)}this.rectMap_.has(k)&&this.moveRectToBlock_(this.rectMap_.get(k),k)}if(this.RTL)for(let S=0,k;k=this.buttons_[S];S++)a=k.getPosition().y,k.moveTo(r/this.workspace_.scale-k.width-this.MARGIN-this.tabWidth_,a);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==dr.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+r,this.targetWorkspace.scrollY),this.width_=r,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};qn.registryName="verticalFlyout",i(Pt.FLYOUTS_VERTICAL_TOOLBOX,kl,qn);var oa;t.CodeGenerator$$module$build$src$core$generator=class{constructor(r){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=r,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(r){r||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),r=I());var a=[];this.init(r),r=r.getTopBlocks(!0);for(let f=0,S;S=r[f];f++){let k=this.blockToCode(S);Array.isArray(k)&&(k=k[0]),k&&(S.outputConnection&&(k=this.scrubNakedValue(k),this.STATEMENT_PREFIX&&!S.suppressPrefixSuffix&&(k=this.injectId(this.STATEMENT_PREFIX,S)+k),this.STATEMENT_SUFFIX&&!S.suppressPrefixSuffix&&(k+=this.injectId(this.STATEMENT_SUFFIX,S))),a.push(k))}return a=a.join(`
`),a=this.finish(a),a=a.replace(/^\s+\n/,""),a=a.replace(/\n\s+$/,`
`),a=a.replace(/[ \t]+\n/g,`
`)}prefixLines(r,a){return a+r.replace(/(?!\n$)\n/g,`
`+a)}allNestedComments(r){const a=[];r=r.getDescendants(!0);for(let f=0;f<r.length;f++){const S=r[f].getCommentText();S&&a.push(S)}return a.length&&a.push(""),a.join(`
`)}blockToCode(r,a){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!r)return"";if(!r.isEnabled())return a?"":this.blockToCode(r.getNextBlock());if(r.isInsertionMarker())return a?"":this.blockToCode(r.getChildren(!1)[0]);var f=this.forBlock[r.type];if(!f&&this[r.type]&&(xe("block generator functions on CodeGenerator objects","10.0","11.0","the .forBlock[blockType] dictionary"),f=this[r.type]),typeof f!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${r.type}".`);if(f=f.call(r,r,this),Array.isArray(f)){if(!r.outputConnection)throw TypeError("Expecting string from statement block: "+r.type);return[this.scrub_(r,f[0],a),f[1]]}if(typeof f=="string")return this.STATEMENT_PREFIX&&!r.suppressPrefixSuffix&&(f=this.injectId(this.STATEMENT_PREFIX,r)+f),this.STATEMENT_SUFFIX&&!r.suppressPrefixSuffix&&(f+=this.injectId(this.STATEMENT_SUFFIX,r)),this.scrub_(r,f,a);if(f===null)return"";throw SyntaxError("Invalid code generated: "+f)}valueToCode(r,a,f){if(isNaN(f))throw TypeError("Expecting valid order from block: "+r.type);var S=r.getInputTargetBlock(a);if(!S||(a=this.blockToCode(S),a===""))return"";if(!Array.isArray(a))throw TypeError(`Expecting tuple from value block: ${S.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(r=a[0],a=a[1],isNaN(a))throw TypeError("Expecting valid order from value block: "+S.type);if(!r)return"";S=!1;var k=Math.floor(f);const V=Math.floor(a);if(k<=V&&(k!==V||k!==0&&k!==99)){for(S=!0,k=0;k<this.ORDER_OVERRIDES.length;k++)if(this.ORDER_OVERRIDES[k][0]===f&&this.ORDER_OVERRIDES[k][1]===a){S=!1;break}}return S&&(r="("+r+")"),r}statementToCode(r,a){if(r=r.getInputTargetBlock(a),a=this.blockToCode(r),typeof a!="string")throw TypeError("Expecting code from statement block: "+(r&&r.type));return a&&(a=this.prefixLines(a,this.INDENT)),a}addLoopTrap(r,a){return this.INFINITE_LOOP_TRAP&&(r=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,a),this.INDENT)+r),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(r=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,a),this.INDENT)+r),this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(r+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,a),this.INDENT)),r}injectId(r,a){return a=a.id.replace(/\$/g,"$$$$"),r.replace(/%1/g,"'"+a+"'")}addReservedWords(r){this.RESERVED_WORDS_+=r+","}provideFunction_(r,a){if(!this.definitions_[r]){const f=this.nameDB_.getDistinctName(r,t.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[r]=f,Array.isArray(a)&&(a=a.join(`
`)),a=a.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,f);let S;for(;S!==a;)S=a,a=a.replace(/^(( {2})*) {2}/gm,"$1\0");a=a.replace(/\0/g,this.INDENT),this.definitions_[r]=a}return this.functionNames_[r]}getVariableName(r){return this.getName(r,t.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(r){return this.getName(r,t.NameType$$module$build$src$core$names.PROCEDURE)}getName(r,a){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(r,a)}init(r){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(r,a,f){return a}finish(r){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),r}scrubNakedValue(r){return r}},oa={},oa.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator;var Zs=!1,Ds={};Ds.Align=t.Align$$module$build$src$core$inputs$align,Ds.DummyInput=Af,Ds.EndRowInput=pm,Ds.Input=es,Ds.StatementInput=Zh,Ds.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input,Ds.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types;var _i="The insertion marker previewer tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Fl=class{constructor(r){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=r.workspace}previewReplacement(r,a,f){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=f,f.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(a)&&(a.highlight(),this.staticConn=a)}finally{t.enable$$module$build$src$core$events$utils()}}previewConnection(r,a){if(r!==this.draggedConn||a!==this.staticConn){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(r,a)&&(this.markerConn=this.previewMarker(r,a)),this.workspace.getRenderer().shouldHighlightConnection(a)&&a.highlight(),this.draggedConn=r,this.staticConn=a}finally{t.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(r,a){return a.type===Pn.PREVIOUS_STATEMENT||a.type===Pn.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof x)}previewMarker(r,a){const f=r.getSourceBlock(),S=this.createInsertionMarker(f),k=this.getMatchingConnection(f,S,r);if(!k)throw Error("Could not create insertion marker to preview connection");S.queueRender(),Ei(),k.connect(a);const V={x:a.x-k.x,y:a.y-k.y},_e=k.getOffsetInBlock().clone();return gr().then(()=>{S==null||S.positionNearConnection(k,V,_e),S==null||S.getSvgRoot().setAttribute("visibility","visible")}),k}createInsertionMarker(r){const a=this.workspace.newBlock(r.type);if(a.setInsertionMarker(!0),r.saveExtraState){var f=r.saveExtraState(!0);f&&a.loadExtraState&&a.loadExtraState(f)}else r.mutationToDom&&(f=r.mutationToDom())&&a.domToMutation&&a.domToMutation(f);for(f=0;f<r.inputList.length;f++){const S=r.inputList[f];if(S.name===Mg)continue;const k=a.inputList[f];if(!k)throw Error(_i.replace("%1","an input"));for(let V=0;V<S.fieldRow.length;V++){const _e=S.fieldRow[V],ze=k.fieldRow[V];if(!ze)throw Error(_i.replace("%1","a field"));ze.setValue(_e.getValue())}}for(const S of a.getDescendants(!1))S.setInsertionMarker(!0);return a.setCollapsed(r.isCollapsed()),a.setInputsInline(r.getInputsInline()),a.initSvg(),a.getSvgRoot().setAttribute("visibility","hidden"),a}getMatchingConnection(r,a,f){if(r=r.getConnections_(!0),a=a.getConnections_(!0),r.length!==a.length)return null;for(let S=0;S<r.length;S++)if(r[S]===f)return a[S];return null}hidePreview(){t.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{t.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(r){const a=r.getSourceBlock(),f=a.outputConnection;let S;if((S=a.previousConnection)!=null&&S.targetConnection||f!=null&&f.targetConnection)a.unplug(!0);else{let k;(k=r.targetBlock())==null||k.unplug(!1)}a.dispose()}dispose(){this.hidePreview()}};i(Pt.CONNECTION_PREVIEWER,kl,Fl);var wc=class extends y_{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(r){return super.getCSS_(r).concat([`${r} .blocklyInsertionMarker>.blocklyPathLight,`,`${r} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},Iy=class{constructor(r){this.inlineSteps_=this.steps_="",this.info_=r,this.RTL_=this.info_.RTL,r=r.getRenderer(),this.constants_=r.getConstants(),this.highlightConstants_=r.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(r){this.steps_+=Fi(r.xPos,this.info_.startY);for(let a=0,f;f=r.elements[a];a++)lt.isLeftSquareCorner(f)?this.steps_+=this.highlightConstants_.START_POINT:lt.isLeftRoundedCorner(f)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):lt.isPreviousConnection(f)?this.steps_+=this.notchPaths_.pathLeft:lt.isHat(f)?this.steps_+=this.startPaths_.path(this.RTL_):lt.isSpacer(f)&&f.width!==0&&(this.steps_+=En("H",f.xPos+f.width-this.highlightOffset));this.steps_+=En("H",r.xPos+r.width-this.highlightOffset)}drawJaggedEdge_(r){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+En("v",r.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(r){const a=r.getLastInput();if(this.RTL_){const f=r.height-a.connectionHeight;this.steps_+=Ys(a.xPos+a.width-this.highlightOffset,r.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+En("v",f)}else this.steps_+=Ys(a.xPos+a.width,r.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(r){const a=r.getLastInput();if(a)if(this.RTL_){const f=r.height-2*this.insideCornerPaths_.height;this.steps_+=Ys(a.xPos,r.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+En("v",f)+this.insideCornerPaths_.pathBottom(this.RTL_)+tu(r.width-a.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Ys(a.xPos,r.yPos+r.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+tu(r.width-a.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(r){const a=r.xPos+r.width-this.highlightOffset;r instanceof Xv&&r.followsStatement&&(this.steps_+=En("H",a)),this.RTL_&&(this.steps_+=En("H",a),r.height>this.highlightOffset&&(this.steps_+=En("V",r.yPos+r.height-this.highlightOffset)))}drawBottomRow(r){if(this.RTL_)this.steps_+=En("V",r.baseline-this.highlightOffset);else{const a=this.info_.bottomRow.elements[0];lt.isLeftSquareCorner(a)?this.steps_+=Ys(r.xPos+this.highlightOffset,r.baseline-this.highlightOffset):lt.isLeftRoundedCorner(a)&&(this.steps_+=Ys(r.xPos,r.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var r=this.info_.outputConnection;r&&(r=r.connectionOffsetY+r.height,this.RTL_?this.steps_+=Ys(this.info_.startX,r):(this.steps_+=Ys(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=En("V",r)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(r=this.info_.topRow,lt.isLeftRoundedCorner(r.elements[0])?this.steps_+=En("V",this.outsideCornerPaths_.height):this.steps_+=En("V",r.capline+this.highlightOffset))}drawInlineInput(r){const a=this.highlightOffset,f=r.xPos+r.connectionWidth;var S=r.centerline-r.height/2;const k=r.width-r.connectionWidth,V=S+a;this.RTL_?(S=r.connectionOffsetY-a,r=r.height-(r.connectionOffsetY+r.connectionHeight)+a,this.inlineSteps_+=Ys(f-a,V)+En("v",S)+this.puzzleTabPaths_.pathDown(this.RTL_)+En("v",r)+En("h",k)):this.inlineSteps_+=Ys(r.xPos+r.width+a,V)+En("v",r.height)+En("h",-k)+Ys(f,S+r.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},IF=class extends v_{constructor(r,a){super(r,a),this.highlighter_=new Iy(a)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const r=this.block_.pathObject;r.setPath(this.outlinePath_+`
`+this.inlinePath_),r.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&r.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(r){this.highlighter_.drawJaggedEdge_(r),super.drawJaggedEdge_(r)}drawValueInput_(r){this.highlighter_.drawValueInput(r),super.drawValueInput_(r)}drawStatementInput_(r){this.highlighter_.drawStatementInput(r),super.drawStatementInput_(r)}drawRightSideRow_(r){this.highlighter_.drawRightSideRow(r),this.outlinePath_+=En("H",r.xPos+r.width)+En("V",r.yPos+r.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(r){this.highlighter_.drawInlineInput(r),super.drawInlineInput_(r)}positionInlineInputConnection_(r){const a=r.centerline-r.height/2;if(r.connectionModel){let f=r.xPos+r.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(f*=-1),r.connectionModel.setOffsetInBlock(f,a+r.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(r){const a=r.getLastInput();if(a!=null&&a.connectionModel){let f=r.xPos+r.statementEdge+a.notchOffset;f=this.info_.RTL?-1*f:f+this.constants_.DARK_PATH_OFFSET,a.connectionModel.setOffsetInBlock(f,r.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(r){const a=r.getLastInput();if(a&&a.connectionModel){let f=r.xPos+r.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(f*=-1),a.connectionModel.setOffsetInBlock(f,r.yPos)}}positionNextConnection_(){const r=this.info_.bottomRow;if(r.connection){const a=r.connection,f=a.xPos;a.connectionModel.setOffsetInBlock((this.info_.RTL?-f:f)+this.constants_.DARK_PATH_OFFSET/2,r.baseline+this.constants_.DARK_PATH_OFFSET)}}},RF=class{constructor(r){this.OFFSET=.5,this.constantProvider=r,this.START_POINT=Fi(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const r=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,f=(1-Math.SQRT1_2)*(r+a)-a,S=Fi(f,f)+pi("a","0 0,0",r,jn(-f-a,r-f)),k=pi("a","0 0,0",r+a,jn(r+a,r+a)),V=Fi(f,-f)+pi("a","0 0,0",r+a,jn(r-f,f+a));return{width:r+a,height:r,pathTop(_e){return _e?S:""},pathBottom(_e){return _e?k:V}}}makeOutsideCorner(){const r=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,f=(1-Math.SQRT1_2)*(r-a)+a,S=Fi(f,f)+pi("a","0 0,1",r-a,jn(r-f,-f+a)),k=Fi(a,r)+pi("a","0 0,1",r-a,jn(r,-r+a)),V=-f,_e=Fi(f,V)+pi("a","0 0,1",r-a,jn(-f+a,-V-r));return{height:r,topLeft(ze){return ze?S:k},bottomLeft(){return _e}}}makePuzzleTab(){const r=this.constantProvider.TAB_WIDTH,a=this.constantProvider.TAB_HEIGHT,f=Fi(-2,-a+3.4)+tu(-.45*r,-2.1),S=En("v",2.5)+Fi(.97*-r,2.5)+Hs("q",[jn(.05*-r,10),jn(.3*r,9.5)])+Fi(.67*r,-1.9)+En("v",2.5),k=En("v",-1.5)+Fi(-.92*r,-.5)+Hs("q",[jn(-.19*r,-5.5),jn(0,-11)])+Fi(.92*r,1),V=Fi(-5,a-.7)+tu(.46*r,-2.1);return{width:r,height:a,pathUp(_e){return _e?f:k},pathDown(_e){return _e?S:V}}}makeNotch(){return{pathLeft:En("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:tu(5.1,2.6)+Fi(-10.2,6.8)+tu(5.1,2.6),height:12,width:10.2}}makeStartHat(){const r=this.constantProvider.START_HAT.height,a=Fi(25,-8.7)+Hs("c",[jn(29.7,-6.2),jn(57.2,-.5),jn(75,8.7)]),f=Hs("c",[jn(17.8,-9.2),jn(45.3,-14.9),jn(75,-8.7)])+Ys(100.5,r+.5);return{path(S){return S?a:f}}}},kF=class extends Vv{constructor(r,a){super(r,a),this.constants_=r,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},OF=class extends __{constructor(r,a){super(r,a),this.constants_=r,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},LF=class extends S0{constructor(r,a){super(r,a),this.renderer_=r}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Zh||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(r,a){this.isInline&&r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new kF(this.constants_,r)),a.hasInlineInput=!0):r instanceof Zh?(a.elements.push(new OF(this.constants_,r)),a.hasStatement=!0):r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new Sy(this.constants_,r)),a.hasExternalInput=!0):(r instanceof Af||r instanceof pm)&&(a.minHeight=Math.max(a.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),this.isInline||a.align!==null||(a.align=r.align)}addElemSpacing_(){let r=!1;for(let f=0,S;S=this.rows[f];f++)S.hasExternalInput&&(r=!0);for(let f=0,S;S=this.rows[f];f++){var a=S.elements;if(S.elements=[],S.startsWithElemSpacer()&&S.elements.push(new jd(this.constants_,this.getInRowSpacing_(null,a[0]))),a.length){for(let k=0;k<a.length-1;k++){S.elements.push(a[k]);const V=this.getInRowSpacing_(a[k],a[k+1]);S.elements.push(new jd(this.constants_,V))}S.elements.push(a[a.length-1]),S.endsWithElemSpacer()&&(a=this.getInRowSpacing_(a[a.length-1],null),r&&S.hasDummyInput&&(a+=this.constants_.TAB_WIDTH),S.elements.push(new jd(this.constants_,a)))}}}getInRowSpacing_(r,a){if(!r)return a&&lt.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&lt.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&lt.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!lt.isInput(r)&&(!a||lt.isStatementInput(a)))return lt.isField(r)&&r.isEditable?this.constants_.MEDIUM_PADDING:lt.isIcon(r)?2*this.constants_.LARGE_PADDING+1:lt.isHat(r)?this.constants_.NO_PADDING:lt.isPreviousOrNextConnection(r)?this.constants_.LARGE_PADDING:lt.isLeftRoundedCorner(r)?this.constants_.MIN_BLOCK_WIDTH:lt.isJaggedEdge(r)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(lt.isInput(r)&&!a){if(lt.isExternalInput(r))return this.constants_.NO_PADDING;if(lt.isInlineInput(r))return this.constants_.LARGE_PADDING;if(lt.isStatementInput(r))return this.constants_.NO_PADDING}if(!lt.isInput(r)&&a&&lt.isInput(a)){if(lt.isField(r)&&r.isEditable){if(lt.isInlineInput(a)||lt.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(lt.isInlineInput(a)||lt.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(lt.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(lt.isIcon(r)&&a&&!lt.isInput(a))return this.constants_.LARGE_PADDING;if(lt.isInlineInput(r)&&a&&lt.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(lt.isLeftSquareCorner(r)&&a){if(lt.isHat(a))return this.constants_.NO_PADDING;if(lt.isPreviousConnection(a))return a.notchOffset;if(lt.isNextConnection(a))return a.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(lt.isLeftRoundedCorner(r)&&a){if(lt.isPreviousConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS;if(lt.isNextConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return lt.isField(r)&&a&&lt.isField(a)&&r.isEditable===a.isEditable||a&&lt.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(r,a){return lt.isTopRow(r)&&lt.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:lt.isTopRow(r)||lt.isBottomRow(a)?this.constants_.NO_PADDING:r.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!r.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:r.hasStatement&&a.hasStatement||!r.hasStatement&&a.hasDummyInput||r.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(r,a){if(lt.isSpacer(a))return r.yPos+a.height/2;if(lt.isBottomRow(r))return r=r.yPos+r.height-r.descenderHeight,lt.isNextConnection(a)?r+a.height/2:r-a.height/2;if(lt.isTopRow(r))return lt.isHat(a)?r.capline-a.height/2:r.capline+a.height/2;let f=r.yPos;return lt.isField(a)||lt.isIcon(a)?(f+=a.height/2,(r.hasInlineInput||r.hasStatement)&&a.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=r.height&&(f+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):f=lt.isInlineInput(a)?f+a.height/2:f+r.height/2,f}alignRowElements_(){if(this.isInline){var r=0,a=new WeakMap,f=null;for(let S=this.rows.length-1,k;k=this.rows[S];S--)a.set(k,r),lt.isInputRow(k)&&(k.hasStatement&&this.alignStatementRow_(k),f&&f.hasStatement&&k.width<f.width?a.set(k,f.width):r=k.hasStatement?k.width:Math.max(r,k.width),f=k);r=0;for(let S=0,k;k=this.rows[S];S++)k.hasStatement?r=this.getDesiredRowWidth_(k):lt.isSpacer(k)?k.width=Math.max(r,a.get(k)):(f=k.width,r=Math.max(r,a.get(k))-f,0<r&&this.addAlignmentPadding_(k,r),r=k.width)}else super.alignRowElements_()}getDesiredRowWidth_(r){return this.isInline&&r.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(r)}finalize_(){let r=0,a=0;for(let S=0,k;k=this.rows[S];S++){k.yPos=a,k.xPos=this.startX,a+=k.height,r=Math.max(r,k.widthWithConnectedBlocks);var f=a-this.topRow.ascenderHeight;k===this.bottomRow&&f<this.constants_.MIN_BLOCK_HEIGHT&&(f=this.constants_.MIN_BLOCK_HEIGHT-f,this.bottomRow.height+=f,a+=f),this.recordElemPositions_(k)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(f=this.block_.nextConnection.targetBlock())&&(r=Math.max(r,f.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=r+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=a+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},DF=class extends E0{constructor(r,a,f){super(r,a,f),this.constants=f,this.colourDark="#000000",this.svgPathDark=ie(We.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=ie(We.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(r){this.svgPath.setAttribute("d",r),this.svgPathDark.setAttribute("d",r)}setHighlightPath(r){this.svgPathLight.setAttribute("d",r)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(r){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(r),this.svgPath.setAttribute("stroke","none")}setStyle(r){this.style=r,this.colourDark=zc("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(r){r?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(r){if(r){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(r){super.updateDisabled_(r),r&&this.svgPath.setAttribute("stroke","none")}},NF=class extends S_{constructor(r){super(r),this.highlightConstants=null}init(r,a){super.init(r,a),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(r,a){super.refreshDom(r,a),this.getHighlightConstants().init()}makeConstants_(){return new wc}makeRenderInfo_(r){return new LF(this,r)}makeDrawer_(r,a){return new IF(r,a)}makePathObject(r,a){return new DF(r,a,this.getConstants())}makeHighlightConstants_(){return new RF(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};Ii("geras",NF);var O0={};O0.ConstantProvider=wc,O0.Drawer=IF,O0.HighlightConstantProvider=RF,O0.Highlighter=Iy,O0.InlineInput=kF,O0.PathObject=DF,O0.RenderInfo=LF,O0.Renderer=NF,O0.StatementInput=OF;var BF=class extends y_{constructor(){super(),xe("Blockly.minimalist.ConstantProvider","v10","v11","Blockly.blockRendering.ConstantProvider")}},PF=class extends v_{constructor(r,a){super(r,a),xe("Blockly.minimalist.Drawer","v10","v11","Blockly.blockRendering.Drawer")}},FF=class extends S0{constructor(r,a){super(r,a),xe("Blockly.minimalist.RenderInfo","v10","v11","Blockly.blockRendering.RenderInfo")}getRenderer(){return this.renderer_}},zF=class extends S_{constructor(r){super(r),xe("Blockly.minimalist.Renderer","v10","v11","Blockly.blockRendering.Renderer")}makeConstants_(){return new BF}makeRenderInfo_(r){return new FF(this,r)}makeDrawer_(r,a){return new PF(r,a)}};Ii("minimalist",zF);var nx={};nx.ConstantProvider=BF,nx.Drawer=PF,nx.RenderInfo=FF,nx.Renderer=zF;var UF=class extends S0{constructor(r,a){super(r,a)}getRenderer(){return this.renderer_}addElemSpacing_(){let r=!1;for(var a=0;a<this.rows.length;a++)if(this.rows[a].hasExternalInput){r=!0;break}for(a=0;a<this.rows.length;a++){const S=this.rows[a];var f=S.elements;if(S.elements=[],S.startsWithElemSpacer()&&S.elements.push(new jd(this.constants_,this.getInRowSpacing_(null,f[0]))),f.length){for(let k=0;k<f.length-1;k++){S.elements.push(f[k]);const V=this.getInRowSpacing_(f[k],f[k+1]);S.elements.push(new jd(this.constants_,V))}S.elements.push(f[f.length-1]),S.endsWithElemSpacer()&&(f=this.getInRowSpacing_(f[f.length-1],null),r&&S.hasDummyInput&&(f+=this.constants_.TAB_WIDTH),S.elements.push(new jd(this.constants_,f)))}}}getInRowSpacing_(r,a){if(!r)return a&&lt.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&lt.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&lt.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!lt.isInput(r)&&!a)return lt.isField(r)&&r.isEditable?this.constants_.MEDIUM_PADDING:lt.isIcon(r)?2*this.constants_.LARGE_PADDING+1:lt.isHat(r)?this.constants_.NO_PADDING:lt.isPreviousOrNextConnection(r)?this.constants_.LARGE_PADDING:lt.isLeftRoundedCorner(r)?this.constants_.MIN_BLOCK_WIDTH:lt.isJaggedEdge(r)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(lt.isInput(r)&&!a){if(lt.isExternalInput(r))return this.constants_.NO_PADDING;if(lt.isInlineInput(r))return this.constants_.LARGE_PADDING;if(lt.isStatementInput(r))return this.constants_.NO_PADDING}if(!lt.isInput(r)&&a&&lt.isInput(a)){if(lt.isField(r)&&r.isEditable){if(lt.isInlineInput(a)||lt.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(lt.isInlineInput(a)||lt.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(lt.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(lt.isIcon(r)&&a&&!lt.isInput(a))return this.constants_.LARGE_PADDING;if(lt.isInlineInput(r)&&a&&lt.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(lt.isLeftSquareCorner(r)&&a){if(lt.isHat(a))return this.constants_.NO_PADDING;if(lt.isPreviousConnection(a)||lt.isNextConnection(a))return a.notchOffset}return lt.isLeftRoundedCorner(r)&&a?a.notchOffset-this.constants_.CORNER_RADIUS:lt.isField(r)&&a&&lt.isField(a)&&r.isEditable===a.isEditable||a&&lt.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(r,a){return lt.isTopRow(r)&&lt.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:lt.isTopRow(r)||lt.isBottomRow(a)?this.constants_.NO_PADDING:r.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!r.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:r.hasStatement&&a.hasStatement||r.hasDummyInput||a.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(r,a){if(lt.isSpacer(a))return r.yPos+a.height/2;if(lt.isBottomRow(r))return r=r.yPos+r.height-r.descenderHeight,lt.isNextConnection(a)?r+a.height/2:r-a.height/2;if(lt.isTopRow(r))return lt.isHat(a)?r.capline-a.height/2:r.capline+a.height/2;let f=r.yPos;return f=lt.isField(a)&&r.hasStatement?f+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+a.height/2):f+r.height/2}finalize_(){let r=0,a=0;for(var f=0;f<this.rows.length;f++){const k=this.rows[f];k.yPos=a,k.xPos=this.startX,a+=k.height,r=Math.max(r,k.widthWithConnectedBlocks);var S=a-this.topRow.ascenderHeight;k===this.bottomRow&&S<this.constants_.MIN_BLOCK_HEIGHT&&(S=this.constants_.MIN_BLOCK_HEIGHT-S,this.bottomRow.height+=S,a+=S),this.recordElemPositions_(k)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(f=this.block_.nextConnection.targetBlock())&&(r=Math.max(r,f.getHeightWidth().width)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=r+this.startX,this.height=a,this.startY=this.topRow.capline}},HF=class extends S_{constructor(r){super(r)}makeRenderInfo_(r){return new UF(this,r)}};Ii("thrasos",HF);var hk={};hk.RenderInfo=UF,hk.Renderer=HF;var uq={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},cq={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},hq=new Cg("zelos",uq,cq),dq={Classic:_y,Zelos:hq},dk=class{constructor(r,a,f){this.id_=r.toolboxitemid||J(),this.level_=(this.parent_=f||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=r,this.parentToolbox_=a,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(r){}},Ig=class extends dk{constructor(r,a,f){super(r,a,f),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(r){if("custom"in r)this.flyoutItems_=r.custom;else if(r=r.contents)for(let a=0;a<r.length;a++){const f=r[a];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(f)}}parseCategoryDef_(r){this.name_="name"in r?Gr(r.name):"",this.colour_=this.getColour_(r),Object.assign(this.cssConfig_,r.cssconfig||r.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),li(this.htmlDiv_,th.TREEITEM),Sr(this.htmlDiv_,vo.SELECTED,!1),Sr(this.htmlDiv_,vo.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),li(this.iconDom_,th.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const r=this.labelDom_.getAttribute("id");return r&&Sr(this.htmlDiv_,vo.LABELLEDBY,r),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const r=document.createElement("div"),a=this.cssConfig_.container;return a&&we(r,a),r}createRowContainer_(){const r=document.createElement("div");var a=this.cssConfig_.row;return a&&we(r,a),a=`${Ig.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?r.style.paddingRight=a:r.style.paddingLeft=a,r}createRowContentsContainer_(){const r=document.createElement("div"),a=this.cssConfig_.rowcontentcontainer;return a&&we(r,a),r}createIconDom_(){const r=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&we(r,a)}return r.style.display="inline-block",r}createLabelDom_(r){const a=document.createElement("span");return a.setAttribute("id",this.getId()+".label"),a.textContent=r,(r=this.cssConfig_.label)&&we(a,r),a}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(r){r&&(r=Ig.borderWidth+"px solid "+(r||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=r:this.rowDiv_.style.borderLeft=r)}getColour_(r){const a=r.categorystyle||r.categoryStyle;if((r=r.colour)&&a)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(a)return this.getColourfromStyle_(a);if(r)return this.parseColour_(r)}return""}getColourfromStyle_(r){var a=this.workspace_.getTheme();if(r&&a){if((a=a.categoryStyles[r])&&a.colour)return this.parseColour_(a.colour);console.warn('Style "'+r+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(r){if(r=Gr(r),r==null||r==="")return"";var a=Number(r);return isNaN(a)?(a=Zo(r))?a:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+r),""):dc(a)}openIcon_(r){if(r){var a=this.cssConfig_.closedicon;a&&ct(r,a),(a=this.cssConfig_.openicon)&&we(r,a)}}closeIcon_(r){if(r){var a=this.cssConfig_.openicon;a&&ct(r,a),(a=this.cssConfig_.closedicon)&&we(r,a)}}setVisible_(r){this.htmlDiv_.style.display=r?"block":"none",this.isHidden_=!r,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let r=this;for(;r.getParent();)if(r=r.getParent(),!r.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(r){}setSelected(r){if(this.rowDiv_){var a=this.cssConfig_.selected;if(r){const f=this.parseColour_(Ig.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||f,a&&we(this.rowDiv_,a)}else this.rowDiv_.style.backgroundColor="",a&&Tt(this.rowDiv_,a);Sr(this.htmlDiv_,vo.SELECTED,r)}}setDisabled(r){this.isDisabled_=r,this.getDiv().setAttribute("disabled",`${r}`),r?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(r){this.flyoutItems_=[],this.toolboxItemDef_=typeof r=="string"?{kind:this.toolboxItemDef_.kind,custom:r,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:vt(r),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){ft(this.htmlDiv_)}};Ig.registrationName="category",Ig.nestedPadding=19,Ig.borderWidth=8,Ig.defaultBackgroundColour="#57e",Mt(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),i(Pt.TOOLBOX_ITEM,Ig.registrationName,Ig);var rx=class extends dk{constructor(r,a){super(r,a),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,r.cssconfig||r.cssConfig)}init(){this.createDom_()}createDom_(){const r=document.createElement("div"),a=this.cssConfig_.container;return a&&we(r,a),this.htmlDiv_=r}getDiv(){return this.htmlDiv_}dispose(){ft(this.htmlDiv_)}};rx.registrationName="sep",Mt(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),i(Pt.TOOLBOX_ITEM,rx.registrationName,rx);var _T=class extends Ig{constructor(r,a,f){super(r,a,f),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const r=super.makeDefaultCssConfig_();return r.contents="blocklyToolboxContents",r}parseContents_(r){if("custom"in r)this.flyoutItems_=r.custom;else{const a=r.contents;if(a){this.flyoutItems_=[],r=!0;for(let f=0;f<a.length;f++){const S=a[f];!u(Pt.TOOLBOX_ITEM,S.kind)||S.kind.toLowerCase()===rx.registrationName&&r?(this.flyoutItems_.push(S),r=!0):(this.createToolboxItem_(S),r=!1)}}}}createToolboxItem_(r){let a=r.kind;a.toUpperCase()==="CATEGORY"&&tr(r)&&(a=_T.registrationName),r=new(d(Pt.TOOLBOX_ITEM,a))(r,this.parentToolbox_,this),this.toolboxItems_.push(r)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const r=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(r),li(this.subcategoriesDiv_,th.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),Sr(this.htmlDiv_,vo.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const r=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&we(r,a),r.style.visibility="visible"}return r.style.display="inline-block",r}createSubCategoriesDom_(r){const a=document.createElement("div");a.style.display="none";var f=this.cssConfig_.contents;for(f&&we(a,f),f=0;f<r.length;f++){const S=r[f];S.init();const k=S.getDiv();if(a.appendChild(k),S.getClickTarget){let V;(V=S.getClickTarget())==null||V.setAttribute("id",S.getId())}}return a}setExpanded(r){if(this.expanded_!==r){if(this.expanded_=r)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let a;(a=this.parentToolbox_.getFlyout())==null||a.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}Sr(this.htmlDiv_,vo.EXPANDED,r),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(r){this.htmlDiv_.style.display=r?"block":"none";const a=this.getChildToolboxItems();for(let f=0;f<a.length;f++)a[f].setVisible_(r);this.isHidden_=!r,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(r){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};_T.registrationName="collapsibleCategory",i(Pt.TOOLBOX_ITEM,_T.registrationName,_T);var GF=class extends wy{constructor(r){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=r,this.toolboxDef_=r.options.languageTree||{contents:[]},this.horizontalLayout_=r.options.horizontalLayout,this.RTL=r.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=r.options.toolboxPosition}onShortcut(r){return!1}init(){var r=this.workspace_;const a=r.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),Ke(this.flyout_.createDom("svg"),a),this.setVisible(!0),this.flyout_.init(r),this.render(this.toolboxDef_),r=r.getThemeManager(),r.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),r.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[pl.Capability.AUTOHIDEABLE,pl.Capability.DELETE_AREA,pl.Capability.DRAG_TARGET]})}createDom_(r){r=r.getParentSvg();const a=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,li(this.contentsDiv_,th.TREE),a.appendChild(this.contentsDiv_),r.parentNode.insertBefore(a,r),this.attachEvents_(a,this.contentsDiv_),a}createContainer_(){const r=document.createElement("div");return r.setAttribute("layout",this.isHorizontal()?"h":"v"),we(r,"blocklyToolboxDiv"),we(r,"blocklyNonSelectable"),r.setAttribute("dir",this.RTL?"RTL":"LTR"),r}createContentsContainer_(){const r=document.createElement("div");return we(r,"blocklyToolboxContents"),this.isHorizontal()&&(r.style.flexDirection="row"),r}attachEvents_(r,a){r=Ae(r,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(r),a=Ae(a,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(a)}onClick_(r){if(Dt(r)||r.target===this.HtmlDiv)I().hideChaff(!1);else{var a=r.target.getAttribute("id");a&&(a=this.getToolboxItemById(a),a.isSelectable()&&(this.setSelectedItem(a),a.onClick(r))),I().hideChaff(!0)}st()}onKeyDown_(r){let a=!1;switch(r.key){case"ArrowDown":a=this.selectNext_();break;case"ArrowUp":a=this.selectPrevious_();break;case"ArrowLeft":a=this.selectParent_();break;case"ArrowRight":a=this.selectChild_();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),a=!0);break;default:a=!1}!a&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(a=this.selectedItem_.onKeyDown(r)),a&&r.preventDefault()}createFlyout_(){const r=this.workspace_,a=new zi({parentWorkspace:r,rtl:r.RTL,oneBasedIndex:r.options.oneBasedIndex,horizontalLayout:r.horizontalLayout,renderer:r.options.renderer,rendererOverrides:r.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=r.options.toolboxPosition,new(r.horizontalLayout?v(Pt.FLYOUTS_HORIZONTAL_TOOLBOX,r.options,!0):v(Pt.FLYOUTS_VERTICAL_TOOLBOX,r.options,!0))(a)}render(r){this.toolboxDef_=r;for(let a=0;a<this.contents_.length;a++){const f=this.contents_[a];f&&f.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(r.contents),this.position(),this.handleToolboxItemResize()}renderContents_(r){const a=document.createDocumentFragment();for(let f=0;f<r.length;f++)this.createToolboxItem_(r[f],a);this.contentsDiv_.appendChild(a)}createToolboxItem_(r,a){var f=r.kind;f.toUpperCase()==="CATEGORY"&&tr(r)&&(f=_T.registrationName),(f=d(Pt.TOOLBOX_ITEM,f.toLowerCase()))&&(r=new f(r,this),r.init(),this.addToolboxItem_(r),(f=r.getDiv())&&a.appendChild(f),r.getClickTarget()&&r.getClickTarget().setAttribute("id",r.getId()))}addToolboxItem_(r){if(this.contents_.push(r),this.contentMap_[r.getId()]=r,r.isCollapsible()){r=r.getChildToolboxItems();for(let a=0;a<r.length;a++)this.addToolboxItem_(r[a])}}getToolboxItems(){return this.contents_}addStyle(r){r&&this.HtmlDiv&&we(this.HtmlDiv,r)}removeStyle(r){r&&this.HtmlDiv&&Tt(this.HtmlDiv,r)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var r=this.HtmlDiv.getBoundingClientRect();const a=r.top,f=a+r.height,S=r.left;return r=S+r.width,this.toolboxPosition===dr.TOP?new Ri(-1e7,f,-1e7,1e7):this.toolboxPosition===dr.BOTTOM?new Ri(a,1e7,-1e7,1e7):this.toolboxPosition===dr.LEFT?new Ri(-1e7,1e7,-1e7,r):new Ri(-1e7,1e7,S,1e7)}wouldDelete(r,a){return r instanceof If?this.updateWouldDelete_(!r.getParent()&&r.isDeletable()):this.updateWouldDelete_(r.isDeletable()),this.wouldDelete_}onDragEnter(r){this.updateCursorDeleteStyle_(!0)}onDragExit(r){this.updateCursorDeleteStyle_(!1)}onDrop(r){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(r){r!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=r,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(r){const a=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";r?this.addStyle(a):this.removeStyle(a)}getToolboxItemById(r){return this.contentMap_[r]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const r=this.workspace_.getMetrics(),a=this.HtmlDiv;a&&(this.horizontalLayout_?(a.style.left="0",a.style.height="auto",a.style.width="100%",this.height_=a.offsetHeight,this.width_=r.viewWidth,this.toolboxPosition===dr.TOP?a.style.top="0":a.style.bottom="0"):(this.toolboxPosition===dr.RIGHT?a.style.right="0":a.style.left="0",a.style.height="100%",this.width_=a.offsetWidth,this.height_=r.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const r=this.workspace_,a=this.HtmlDiv.getBoundingClientRect();r.translate(this.toolboxPosition===dr.LEFT?r.scrollX+a.width:r.scrollX,this.toolboxPosition===dr.TOP?r.scrollY+a.height:r.scrollY),G(r)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let r=0;r<this.contents_.length;r++){const a=this.contents_[r];a.refreshTheme&&a.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(r){this.isVisible_!==r&&(this.HtmlDiv.style.display=r?"block":"none",this.isVisible_=r,this.workspace_.recordDragTargets())}autoHide(r){!r&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(r){const a=this.selectedItem_;!r&&!a||r&&!hn(r)||(this.shouldDeselectItem_(a,r)&&a!==null&&this.deselectItem_(a),this.shouldSelectItem_(a,r)&&r!==null&&this.selectItem_(a,r),this.updateFlyout_(a,r),this.fireSelectEvent_(a,r))}shouldDeselectItem_(r,a){return r!==null&&(!r.isCollapsible()||r!==a)}shouldSelectItem_(r,a){return a!==null&&a!==r}deselectItem_(r){this.selectedItem_=null,this.previouslySelectedItem_=r,r.setSelected(!1),Sr(this.contentsDiv_,vo.ACTIVEDESCENDANT,"")}selectItem_(r,a){this.selectedItem_=a,this.previouslySelectedItem_=r,a.setSelected(!0),Sr(this.contentsDiv_,vo.ACTIVEDESCENDANT,a.getId())}selectItemByPosition(r){-1<r&&r<this.contents_.length&&(r=this.contents_[r],r.isSelectable()&&this.setSelectedItem(r))}updateFlyout_(r,a){a&&(r!==a||a.isCollapsible())&&a.getContents().length?(this.flyout_.show(a.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(r,a){const f=r&&r.getName();let S=a&&a.getName();r===a&&(S=null),r=new(Re(Va))(f,S,this.workspace_.id),ce(r)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const r=this.selectedItem_;return r.isExpanded()?this.selectNext_():r.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let r=this.contents_.indexOf(this.selectedItem_)+1;if(-1<r&&r<this.contents_.length){let a=this.contents_[r];for(;a&&!a.isSelectable();)a=this.contents_[++r];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let r=this.contents_.indexOf(this.selectedItem_)-1;if(-1<r&&r<this.contents_.length){let a=this.contents_[r];for(;a&&!a.isSelectable();)a=this.contents_[--r];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var r=0;r<this.contents_.length;r++)this.contents_[r].dispose();for(r=0;r<this.boundEvents_.length;r++)nt(this.boundEvents_[r]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),ft(this.HtmlDiv))}};Mt(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),i(Pt.TOOLBOX,kl,GF);var pq="10.4.3",fq=t.Align$$module$build$src$core$inputs$align.LEFT,mq=t.Align$$module$build$src$core$inputs$align.CENTRE,gq=t.Align$$module$build$src$core$inputs$align.RIGHT,_q=Pn.INPUT_VALUE,yq=Pn.OUTPUT_VALUE,vq=Pn.NEXT_STATEMENT,bq=Pn.PREVIOUS_STATEMENT,Tq=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY,Sq=dr.TOP,Eq=dr.BOTTOM,xq=dr.LEFT,wq=dr.RIGHT;E_.prototype.newBlock=function(r,a){return new x0(this,r,a)},Yp.prototype.newBlock=function(r,a){return new If(this,r,a)},Yp.newTrashcan=function(r){return new aT(r)},Bl.prototype.showContextMenu=function(r){if(!this.workspace.options.readOnly){var a=[];this.isDeletable()&&this.isMovable()&&(a.push(Nh(this)),a.push(ql(this))),Uu(r,a,this.RTL)}},um.prototype.newWorkspaceSvg=function(r){return new Yp(r)},t.Names$$module$build$src$core$names.prototype.populateProcedures=function(r){r=yh(r),r=r[0].concat(r[1]);for(let a=0;a<r.length;a++)this.getName(r[a][0],t.Names$$module$build$src$core$names.NameType.PROCEDURE)};var $q=Pn,Lt={ALIGN_CENTRE:mq,ALIGN_LEFT:fq,ALIGN_RIGHT:gq};return Lt.ASTNode=Qt,Lt.BasicCursor=x_,Lt.Block=x0,Lt.BlockDragger=R0,Lt.BlockSvg=If,Lt.Blocks=Wr,Lt.Bubble=Cs,Lt.BubbleDragger=Xe,Lt.COLLAPSED_FIELD_NAME=Ey,Lt.COLLAPSED_INPUT_NAME=Mg,Lt.COLLAPSE_CHARS=at,Lt.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator,Lt.CollapsibleToolboxCategory=_T,Lt.ComponentManager=pl,Lt.Connection=hs,Lt.ConnectionChecker=xy,Lt.ConnectionDB=eh,Lt.ConnectionType=Pn,Lt.ContextMenu=zd,Lt.ContextMenuItems=U,Lt.ContextMenuRegistry=ki,Lt.Css=us,Lt.Cursor=tb,Lt.DELETE_VARIABLE_ID=sn,Lt.DRAG_STACK=Ot,Lt.DUMMY_INPUT=Tq,Lt.DeleteArea=wy,Lt.DragTarget=oT,Lt.DropDownDiv=T,Lt.Events=Kn,Lt.Extensions=Gd,Lt.Field=Ui,Lt.FieldAngle=K,Lt.FieldCheckbox=me,Lt.FieldColour=Ee,Lt.FieldDropdown=xh,Lt.FieldImage=Ag,Lt.FieldLabel=Ti,Lt.FieldLabelSerializable=Ze,Lt.FieldMultilineInput=et,Lt.FieldNumber=ut,Lt.FieldTextInput=k0,Lt.FieldVariable=It,Lt.Flyout=cn,Lt.FlyoutButton=Xt,Lt.FlyoutMetricsManager=dn,Lt.Generator=t.CodeGenerator$$module$build$src$core$generator,Lt.Gesture=lm,Lt.Grid=zv,Lt.HorizontalFlyout=Wn,Lt.INPUT_VALUE=_q,Lt.Input=es,Lt.InsertionMarkerManager=gp,Lt.InsertionMarkerPreviewer=Fl,Lt.Marker=iT,Lt.MarkerManager=xa,Lt.Menu=Eg,Lt.MenuItem=zp,Lt.MetricsManager=M_,Lt.Msg=t.Msg$$module$build$src$core$msg,Lt.NEXT_STATEMENT=vq,Lt.Names=t.Names$$module$build$src$core$names,Lt.OPPOSITE_TYPE=qt,Lt.OUTPUT_VALUE=yq,Lt.Options=zi,Lt.PREVIOUS_STATEMENT=bq,Lt.PROCEDURE_CATEGORY_NAME=b0,Lt.Procedures=Xi,Lt.RENAME_VARIABLE_ID=un,Lt.RenderedConnection=ed,Lt.Scrollbar=Sa,Lt.ScrollbarPair=ab,Lt.ShortcutItems=kf,Lt.ShortcutRegistry=Yi,Lt.TOOLBOX_AT_BOTTOM=Eq,Lt.TOOLBOX_AT_LEFT=xq,Lt.TOOLBOX_AT_RIGHT=wq,Lt.TOOLBOX_AT_TOP=Sq,Lt.TabNavigateCursor=sT,Lt.Theme=Cg,Lt.ThemeManager=nT,Lt.Themes=dq,Lt.Toolbox=GF,Lt.ToolboxCategory=Ig,Lt.ToolboxItem=dk,Lt.ToolboxSeparator=rx,Lt.Tooltip=Ud,Lt.Touch=St,Lt.Trashcan=aT,Lt.UnattachedFieldError=Io,Lt.VARIABLE_CATEGORY_NAME=Tg,Lt.VARIABLE_DYNAMIC_CATEGORY_NAME=Kv,Lt.VERSION=pq,Lt.VariableMap=Qv,Lt.VariableModel=hp,Lt.Variables=gl,Lt.VariablesDynamic=fm,Lt.VerticalFlyout=qn,Lt.WidgetDiv=pp,Lt.Workspace=E_,Lt.WorkspaceAudio=rT,Lt.WorkspaceComment=Zc,Lt.WorkspaceCommentSvg=Bl,Lt.WorkspaceDragger=W1,Lt.WorkspaceSvg=Yp,Lt.Xml=ra,Lt.ZoomControls=l0,Lt.blockAnimations=X,Lt.blockRendering=Ls,Lt.browserEvents=Jc,Lt.bubbles=mm,Lt.bumpObjects=My,Lt.clipboard=nm,Lt.common=po,Lt.config=t.config$$module$build$src$core$config,Lt.connectionTypes=$q,Lt.constants=YE,Lt.defineBlocksWithJsonArray=Z,Lt.dialog=uu,Lt.fieldRegistry=y0,Lt.geras=O0,Lt.getMainWorkspace=I,Lt.getSelected=O,Lt.hasBubble=eu,Lt.hideChaff=Vc,Lt.icons=$n,Lt.inject=Ju,Lt.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types,Lt.inputs=Ds,Lt.isCopyable=Il,Lt.isIcon=Wa,Lt.isObservable=Y,Lt.isPaster=Gs,Lt.isSerializable=Tr,Lt.isVariableBackedParameterModel=Ps,Lt.minimalist=nx,Lt.procedures=Xi,Lt.registry=hl,Lt.renderManagement=Fd,Lt.serialization=tx,Lt.setLocale=Tf,Lt.setParentContainer=z,Lt.svgResize=G,Lt.thrasos=hk,Lt.uiPosition=Jf,Lt.utils=Ya,Lt.zelos=D,Object.defineProperties(Lt,{HSV_SATURATION:{get:function(){return xe("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.getHsvSaturation()"),Vu()},set:function(r){xe("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.setHsvSaturation()"),ju(r)}},HSV_VALUE:{get:function(){return xe("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.getHsvValue()"),_h()},set:function(r){xe("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.setHsvValue()"),sl(r)}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:Nl}),Lt.__namespace__=t,Lt})}(Gk)),Gk.exports}var iz;function eee(){return iz||(iz=1,function(n,e){(function(t,i){n.exports=i(bB())})(Hl,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(Hk)),Hk.exports}var sz;function TB(){return sz||(sz=1,function(n,e){(function(t,i){n.exports=i(eee())})(Hl,function(t){return t})}(Uk)),Uk.exports}var Wk={exports:{}},oz;function tee(){return oz||(oz=1,function(n,e){(function(t,i){n.exports=i()})(Hl,function(){var t=t||{Msg:Object.create(null)};return t.Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DIALOG_CANCEL="Cancel",t.Msg.DIALOG_OK="OK",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="÷",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="×",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg})}(Wk)),Wk.exports}var Vk={exports:{}},jk={exports:{}},az;function nee(){return az||(az=1,function(n,e){(function(t,i){n.exports=i(bB())})(Hl,function(t){var i=t.__namespace__,s=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),o={customContextMenu:function(Q){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(fe={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:l(this)},Ie=this.getField("VAR").getText(),Ie={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",Ie),enabled:!0,callback:u(this)},Q.unshift(fe),Q.unshift(Ie));else{if(this.type==="variables_get_dynamic")var ne="variables_set_dynamic",fe=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else ne="variables_get_dynamic",fe=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var Ie=this.getField("VAR");ne={type:ne,fields:{VAR:Ie.saveState(!0)}},Q.push({enabled:0<this.workspace.remainingCapacity(),text:fe.replace("%1",Ie.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,ne)})}},onchange:function(Q){Q=this.getFieldValue("VAR"),Q=i.getVariable$$module$build$src$core$variables(this.workspace,Q),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(Q.type):this.getInput("VALUE").connection.setCheck(Q.type)}},l=function(Q){return function(){const ne=Q.workspace,fe=Q.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(ne,fe)}},u=function(Q){return function(){const ne=Q.workspace,fe=Q.getField("VAR").getVariable();ne.deleteVariableById(fe.getId()),ne.refreshToolboxSelection()}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",o),i.defineBlocks$$module$build$src$core$common(s);var d={blocks:s},p=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),_={customContextMenu:function(Q){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(fe={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:v(this)},Ie=this.getField("VAR").getText(),Ie={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",Ie),enabled:!0,callback:b(this)},Q.unshift(fe),Q.unshift(Ie));else{if(this.type==="variables_get")var ne="variables_set",fe=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else ne="variables_get",fe=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var Ie=this.getField("VAR");ne={type:ne,fields:{VAR:Ie.saveState(!0)}},Q.push({enabled:0<this.workspace.remainingCapacity(),text:fe.replace("%1",Ie.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,ne)})}}},v=function(Q){return function(){const ne=Q.workspace,fe=Q.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(ne,fe)}},b=function(Q){return function(){const ne=Q.workspace,fe=Q.getField("VAR").getVariable();ne.deleteVariableById(fe.getId()),ne.refreshToolboxSelection()}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",_),i.defineBlocks$$module$build$src$core$common(p);var E={blocks:p},C=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"¶"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),M={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const Q=i.createElement$$module$build$src$core$utils$xml("mutation");var ne=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return Q.setAttribute("at1",`${ne}`),ne=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,Q.setAttribute("at2",`${ne}`),Q},domToMutation:function(Q){const ne=Q.getAttribute("at1")==="true";Q=Q.getAttribute("at2")==="true",this.updateAt_(1,ne),this.updateAt_(2,Q)},updateAt_:function(Q,ne){this.removeInput("AT"+Q),this.removeInput("ORDINAL"+Q,!0),ne?(this.appendValueInput("AT"+Q).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+Q).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+Q),Q===2&&i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL));const fe=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+Q]});fe.setValidator(function(Ie){const Ye=Ie==="FROM_START"||Ie==="FROM_END";if(Ye!==ne){const Gt=this.getSourceBlock();return Gt.updateAt_(Q,Ye),Gt.setFieldValue(Ie,"WHERE"+Q),null}}),this.getInput("AT"+Q).appendField(fe,"WHERE"+Q),Q===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}};C.text_getSubstring=M,C.text_changeCase={init:function(){const Q=[[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},C.text_trim={init:function(){const Q=[[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},C.text_print={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var I={updateType_:function(Q){this.outputConnection.setCheck(Q==="NUMBER"?"Number":"String")},mutationToDom:function(){const Q=i.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("type",this.getFieldValue("TYPE")),Q},domToMutation:function(Q){this.updateType_(Q.getAttribute("type"))}};C.text_prompt_ext=Object.assign({},I,{init:function(){var Q=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),Q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),Q.setValidator(ne=>{this.updateType_(ne)}),this.appendValueInput("TEXT").appendField(Q,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});var L=Object.assign({},I,{init:function(){this.mixin(O);var Q=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),Q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),Q.setValidator(ne=>{this.updateType_(ne)}),this.appendDummyInput().appendField(Q,"TYPE").appendField(this.newQuote_(!0)).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});C.text_prompt=L,C.text_count={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},C.text_replace={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},C.text_reverse={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var O={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(Q){for(let ne=0,fe;fe=this.inputList[ne];ne++)for(let Ie=0,Ye;Ye=fe.fieldRow[Ie];Ie++)if(Q===Ye.name){fe.insertFieldAt(Ie,this.newQuote_(!0)),fe.insertFieldAt(Ie+2,this.newQuote_(!1));return}console.warn('field named "'+Q+'" not found in '+this.toDevString())},newQuote_:function(Q){return Q=this.RTL?!Q:Q,i.fromJson$$module$build$src$core$field_registry({type:"field_image",src:Q?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:Q?"“":"”"})}},P=function(){this.mixin(O),this.quoteField_("TEXT")},B={itemCount_:0,mutationToDom:function(){const Q=i.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("items",`${this.itemCount_}`),Q},domToMutation:function(Q){this.itemCount_=parseInt(Q.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(Q){this.itemCount_=Q.itemCount,this.updateShape_()},decompose:function(Q){const ne=Q.newBlock("text_create_join_container");ne.initSvg();let fe=ne.getInput("STACK").connection;for(let Ie=0;Ie<this.itemCount_;Ie++){const Ye=Q.newBlock("text_create_join_item");Ye.initSvg(),fe.connect(Ye.previousConnection),fe=Ye.nextConnection}return ne},compose:function(Q){var ne=Q.getInputTargetBlock("STACK");for(Q=[];ne;)ne.isInsertionMarker()||Q.push(ne.valueConnection_),ne=ne.getNextBlock();for(ne=0;ne<this.itemCount_;ne++){const fe=this.getInput("ADD"+ne).connection.targetConnection;fe&&Q.indexOf(fe)===-1&&fe.disconnect()}for(this.itemCount_=Q.length,this.updateShape_(),ne=0;ne<this.itemCount_;ne++){let fe;(fe=Q[ne])==null||fe.reconnect(this,"ADD"+ne)}},saveConnections:function(Q){Q=Q.getInputTargetBlock("STACK");let ne=0;for(;Q;){if(Q.isInsertionMarker()){Q=Q.getNextBlock();continue}const fe=this.getInput("ADD"+ne);Q.valueConnection_=fe&&fe.connection.targetConnection,Q=Q.getNextBlock(),ne++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var Q=0;Q<this.itemCount_;Q++)if(!this.getInput("ADD"+Q)){const ne=this.appendValueInput("ADD"+Q).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);Q===0&&ne.appendField(i.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(Q=this.itemCount_;this.getInput("ADD"+Q);Q++)this.removeInput("ADD"+Q)}},z=function(){this.mixin(O),this.itemCount_=2,this.updateShape_(),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};i.register$$module$build$src$core$extensions("text_append_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var G=function(){this.setTooltip(()=>i.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},j={isAt_:!1,mutationToDom:function(){const Q=i.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("at",`${this.isAt_}`),Q},domToMutation:function(Q){Q=Q.getAttribute("at")!=="false",this.updateAt_(Q)},updateAt_:function(Q){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),Q&&(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=Q}},H=function(){this.getField("WHERE").setValidator(function(Q){Q=Q==="FROM_START"||Q==="FROM_END";const ne=this.getSourceBlock();Q!==ne.isAt_&&ne.updateAt_(Q)}),this.updateAt_(!0),this.setTooltip(()=>{var Q=this.getFieldValue("WHERE");let ne=i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(Q==="FROM_START"||Q==="FROM_END")&&(Q=Q==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(ne+="  "+Q.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),ne})};i.register$$module$build$src$core$extensions("text_indexOf_tooltip",G),i.register$$module$build$src$core$extensions("text_quotes",P),i.registerMixin$$module$build$src$core$extensions("quote_image_mixin",O),i.registerMutator$$module$build$src$core$extensions("text_join_mutator",B,z),i.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",j,H),i.defineBlocks$$module$build$src$core$common(C);var Z={blocks:C},ae={},J={setStatements_:function(Q){this.hasStatements_!==Q&&(Q?(this.appendStatementInput("STACK").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=Q)},updateParams_:function(){let Q="";this.arguments_.length&&(Q=i.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),i.disable$$module$build$src$core$events$utils();try{this.setFieldValue(Q,"PARAMS")}finally{i.enable$$module$build$src$core$events$utils()}},mutationToDom:function(Q){const ne=i.createElement$$module$build$src$core$utils$xml("mutation");Q&&ne.setAttribute("name",this.getFieldValue("NAME"));for(let fe=0;fe<this.argumentVarModels_.length;fe++){const Ie=i.createElement$$module$build$src$core$utils$xml("arg"),Ye=this.argumentVarModels_[fe];Ie.setAttribute("name",Ye.name),Ie.setAttribute("varid",Ye.getId()),Q&&this.paramIds_&&Ie.setAttribute("paramId",this.paramIds_[fe]),ne.appendChild(Ie)}return this.hasStatements_||ne.setAttribute("statements","false"),ne},domToMutation:function(Q){this.arguments_=[],this.argumentVarModels_=[];for(let fe=0,Ie;Ie=Q.childNodes[fe];fe++)if(Ie.nodeName.toLowerCase()==="arg"){var ne=Ie;const Ye=ne.getAttribute("name");ne=ne.getAttribute("varid")||ne.getAttribute("varId"),this.arguments_.push(Ye),ne=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,ne,Ye,""),ne!==null?this.argumentVarModels_.push(ne):console.log(`Failed to create a variable named "${Ye}", ignoring.`)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(Q.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const Q=Object.create(null);if(this.argumentVarModels_.length){Q.params=[];for(let ne=0;ne<this.argumentVarModels_.length;ne++)Q.params.push({name:this.argumentVarModels_[ne].name,id:this.argumentVarModels_[ne].getId()})}return this.hasStatements_||(Q.hasStatements=!1),Q},loadExtraState:function(Q){if(this.arguments_=[],this.argumentVarModels_=[],Q.params)for(let fe=0;fe<Q.params.length;fe++){var ne=Q.params[fe];ne=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,ne.id,ne.name,""),this.arguments_.push(ne.name),this.argumentVarModels_.push(ne)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(Q.hasStatements!==!1)},decompose:function(Q){const ne=i.createElement$$module$build$src$core$utils$xml("block");ne.setAttribute("type","procedures_mutatorcontainer");var fe=i.createElement$$module$build$src$core$utils$xml("statement");fe.setAttribute("name","STACK"),ne.appendChild(fe);for(let Ye=0;Ye<this.arguments_.length;Ye++){const Gt=i.createElement$$module$build$src$core$utils$xml("block");Gt.setAttribute("type","procedures_mutatorarg");var Ie=i.createElement$$module$build$src$core$utils$xml("field");Ie.setAttribute("name","NAME");const He=i.createTextNode$$module$build$src$core$utils$xml(this.arguments_[Ye]);Ie.appendChild(He),Gt.appendChild(Ie),Ie=i.createElement$$module$build$src$core$utils$xml("next"),Gt.appendChild(Ie),fe.appendChild(Gt),fe=Ie}return Q=i.domToBlock$$module$build$src$core$xml(ne,Q),this.type==="procedures_defreturn"?Q.setFieldValue(this.hasStatements_,"STATEMENTS"):Q.removeInput("STATEMENT_INPUT"),i.mutateCallers$$module$build$src$core$procedures(this),Q},compose:function(Q){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let ne=Q.getInputTargetBlock("STACK");for(;ne&&!ne.isInsertionMarker();){var fe=ne.getFieldValue("NAME");this.arguments_.push(fe),fe=this.workspace.getVariable(fe,""),this.argumentVarModels_.push(fe),this.paramIds_.push(ne.id),ne=ne.nextConnection&&ne.nextConnection.targetBlock()}if(this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),Q=Q.getFieldValue("STATEMENTS"),Q!==null&&(Q=Q==="TRUE",this.hasStatements_!==Q))if(Q){this.setStatements_(!0);var Ie;(Ie=this.statementConnection_)==null||Ie.reconnect(this,"STACK"),this.statementConnection_=null}else Ie=this.getInput("STACK").connection,(this.statementConnection_=Ie.targetConnection)&&(Ie=Ie.targetBlock(),Ie.unplug(),Ie.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(Q,ne){var fe=this.workspace.getVariableById(Q);if(fe.type===""){fe=fe.name,ne=this.workspace.getVariableById(ne);var Ie=!1;for(let Ye=0;Ye<this.argumentVarModels_.length;Ye++)this.argumentVarModels_[Ye].getId()===Q&&(this.arguments_[Ye]=ne.name,this.argumentVarModels_[Ye]=ne,Ie=!0);Ie&&(this.displayRenamedVar_(fe,ne.name),i.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(Q){const ne=Q.name;let fe=!1,Ie;for(let Ye=0;Ye<this.argumentVarModels_.length;Ye++)this.argumentVarModels_[Ye].getId()===Q.getId()&&(Ie=this.arguments_[Ye],this.arguments_[Ye]=ne,fe=!0);fe&&(this.displayRenamedVar_(Ie,ne),i.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(Q,ne){this.updateParams_();var fe=this.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(fe&&fe.bubbleIsVisible()){fe=fe.getWorkspace().getAllBlocks(!1);for(let Ie=0,Ye;Ye=fe[Ie];Ie++)Ye.type==="procedures_mutatorarg"&&i.Names$$module$build$src$core$names.equals(Q,Ye.getFieldValue("NAME"))&&Ye.setFieldValue(ne,"NAME")}},customContextMenu:function(Q){if(!this.isInFlyout){var ne=this.getFieldValue("NAME"),fe={type:this.callType_,extraState:{name:ne,params:this.arguments_}};if(Q.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",ne),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,fe)}),!this.isCollapsed())for(ne=0;ne<this.argumentVarModels_.length;ne++){fe=this.argumentVarModels_[ne];const Ie={type:"variables_get",fields:{VAR:{name:fe.name,id:fe.getId(),type:fe.type}}};Q.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",fe.name),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,Ie)})}}}};ae.procedures_defnoreturn=Object.assign({},J,{init:function(){var Q=i.findLegalName$$module$build$src$core$procedures("",this);Q=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:Q}),Q.setValidator(i.rename$$module$build$src$core$procedures),Q.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(Q,"NAME").appendField("","PARAMS"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),ae.procedures_defreturn=Object.assign({},J,{init:function(){var Q=i.findLegalName$$module$build$src$core$procedures("",this);Q=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:Q}),Q.setValidator(i.rename$$module$build$src$core$procedures),Q.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(Q,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(i.Align$$module$build$src$core$inputs$input.RIGHT).appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var te={init:function(){this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};ae.procedures_mutatorcontainer=te;var he={init:function(){const Q=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:i.DEFAULT_ARG$$module$build$src$core$procedures});Q.setValidator(this.validator_),Q.oldShowEditorFn_=Q.showEditor_,Q.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(Q,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,Q.onFinishEditing_=this.deleteIntermediateVars_,Q.createdVariables_=[],Q.onFinishEditing_("x")},validator_:function(Q){var ne=this.getSourceBlock();const fe=ne.workspace.getRootWorkspace();if(Q=Q.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!Q)return null;const Ie=(ne.workspace.targetWorkspace||ne.workspace).getAllBlocks(!1),Ye=Q.toLowerCase();for(let Gt=0;Gt<Ie.length;Gt++){if(Ie[Gt].id===this.getSourceBlock().id)continue;const He=Ie[Gt].getFieldValue("NAME");if(He&&He.toLowerCase()===Ye)return null}return ne.isInFlyout||((ne=fe.getVariable(Q,""))&&ne.name!==Q&&fe.renameVariableById(ne.getId(),Q),ne||(ne=fe.createVariable(Q,""))&&this.createdVariables_&&this.createdVariables_.push(ne)),Q},deleteIntermediateVars_:function(Q){const ne=this.getSourceBlock().workspace.getRootWorkspace();if(ne)for(let fe=0;fe<this.createdVariables_.length;fe++){const Ie=this.createdVariables_[fe];Ie.name!==Q&&ne.deleteVariableById(Ie.getId())}}};ae.procedures_mutatorarg=he;var le={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(Q,ne){i.Names$$module$build$src$core$names.equals(Q,this.getProcedureCall())&&(this.setFieldValue(ne,"NAME"),this.setTooltip((this.outputConnection?i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",ne)))},setProcedureParameters_:function(Q,ne){var fe=i.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((fe=(fe=fe&&fe.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&fe.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),Q.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=ne;else{if(ne.length!==Q.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let Ye=0;Ye<this.arguments_.length;Ye++){var Ie=this.getInput("ARG"+Ye);Ie&&(Ie=Ie.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Ye]]=Ie,fe&&Ie&&ne.indexOf(this.quarkIds_[Ye])===-1&&(Ie.disconnect(),Ie.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(Q),this.argumentVarModels_=[],Q=0;Q<this.arguments_.length;Q++)fe=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[Q],""),this.argumentVarModels_.push(fe);if(this.updateShape_(),this.quarkIds_=ne){for(ne=0;ne<this.arguments_.length;ne++)if(Q=this.quarkIds_[ne],Q in this.quarkConnections_){let Ye;(Ye=this.quarkConnections_[Q])!=null&&Ye.reconnect(this,"ARG"+ne)||delete this.quarkConnections_[Q]}}}},updateShape_:function(){for(var Q=0;Q<this.arguments_.length;Q++){var ne=this.getField("ARGNAME"+Q);if(ne){i.disable$$module$build$src$core$events$utils();try{ne.setValue(this.arguments_[Q])}finally{i.enable$$module$build$src$core$events$utils()}}else ne=i.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[Q]}),this.appendValueInput("ARG"+Q).setAlign(i.Align$$module$build$src$core$inputs$input.RIGHT).appendField(ne,"ARGNAME"+Q).init()}for(Q=this.arguments_.length;this.getInput("ARG"+Q);Q++)this.removeInput("ARG"+Q);(Q=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(Q.appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),Q.init()):this.getField("WITH")&&Q.removeField("WITH"))},mutationToDom:function(){const Q=i.createElement$$module$build$src$core$utils$xml("mutation");Q.setAttribute("name",this.getProcedureCall());for(let ne=0;ne<this.arguments_.length;ne++){const fe=i.createElement$$module$build$src$core$utils$xml("arg");fe.setAttribute("name",this.arguments_[ne]),Q.appendChild(fe)}return Q},domToMutation:function(Q){var ne=Q.getAttribute("name");this.renameProcedure(this.getProcedureCall(),ne),ne=[];const fe=[];for(let Ie=0,Ye;Ye=Q.childNodes[Ie];Ie++)Ye.nodeName.toLowerCase()==="arg"&&(ne.push(Ye.getAttribute("name")),fe.push(Ye.getAttribute("paramId")));this.setProcedureParameters_(ne,fe)},saveExtraState:function(){const Q=Object.create(null);return Q.name=this.getProcedureCall(),this.arguments_.length&&(Q.params=this.arguments_),Q},loadExtraState:function(Q){if(this.renameProcedure(this.getProcedureCall(),Q.name),Q=Q.params){const ne=[];ne.length=Q.length,ne.fill(null),this.setProcedureParameters_(Q,ne)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(Q){if(this.workspace&&!this.workspace.isFlyout&&Q.recordUndo)if(Q.type===i.CREATE$$module$build$src$core$events$utils&&Q.ids.indexOf(this.id)!==-1){var ne=this.getProcedureCall();if(ne=i.getDefinition$$module$build$src$core$procedures(ne,this.workspace),!ne||ne.type===this.defType_&&JSON.stringify(ne.getVars())===JSON.stringify(this.arguments_)||(ne=null),!ne){i.setGroup$$module$build$src$core$events$utils(Q.group),Q=i.createElement$$module$build$src$core$utils$xml("xml"),ne=i.createElement$$module$build$src$core$utils$xml("block"),ne.setAttribute("type",this.defType_);var fe=this.getRelativeToSurfaceXY(),Ie=fe.y+2*i.config$$module$build$src$core$config.snapRadius;ne.setAttribute("x",`${fe.x+i.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),ne.setAttribute("y",`${Ie}`),fe=this.mutationToDom(),ne.appendChild(fe),fe=i.createElement$$module$build$src$core$utils$xml("field"),fe.setAttribute("name","NAME"),Ie=this.getProcedureCall();const Ye=i.findLegalName$$module$build$src$core$procedures(Ie,this);Ie!==Ye&&this.renameProcedure(Ie,Ye),fe.appendChild(i.createTextNode$$module$build$src$core$utils$xml(Ie)),ne.appendChild(fe),Q.appendChild(ne),i.domToWorkspace$$module$build$src$core$xml(Q,this.workspace),i.setGroup$$module$build$src$core$events$utils(!1)}}else Q.type===i.DELETE$$module$build$src$core$events$utils?(ne=this.getProcedureCall(),i.getDefinition$$module$build$src$core$procedures(ne,this.workspace)||(i.setGroup$$module$build$src$core$events$utils(Q.group),this.dispose(!0),i.setGroup$$module$build$src$core$events$utils(!1))):Q.type===i.CHANGE$$module$build$src$core$events$utils&&Q.element==="disabled"&&(ne=this.getProcedureCall(),(ne=i.getDefinition$$module$build$src$core$procedures(ne,this.workspace))&&ne.id===Q.blockId&&((ne=i.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),i.setGroup$$module$build$src$core$events$utils(Q.group),Q.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),i.setGroup$$module$build$src$core$events$utils(ne)))},customContextMenu:function(Q){if(this.workspace.isMovable()){var ne=this.getProcedureCall(),fe=this.workspace;Q.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const Ie=i.getDefinition$$module$build$src$core$procedures(ne,fe);Ie&&(fe.centerOnBlock(Ie.id),Ie.select())}})}}};ae.procedures_callnoreturn=Object.assign({},le,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),ae.procedures_callreturn=Object.assign({},le,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"});var ce={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const Q=i.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("value",String(Number(this.hasReturnValue_))),Q},domToMutation:function(Q){this.hasReturnValue_=Q.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(Q){if(!(this.workspace.isDragging&&this.workspace.isDragging()||Q.type!==i.MOVE$$module$build$src$core$events$utils)){var ne=!1,fe=this;do{if(this.FUNCTION_TYPES.indexOf(fe.type)!==-1){ne=!0;break}fe=fe.getSurroundParent()}while(fe);ne?(fe.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):fe.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(fe=i.getGroup$$module$build$src$core$events$utils(),i.setGroup$$module$build$src$core$events$utils(Q.group),this.setEnabled(ne),i.setGroup$$module$build$src$core$events$utils(fe))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};ae.procedures_ifreturn=ce,i.defineBlocks$$module$build$src$core$common(ae);var be={blocks:ae},$e=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),q={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};i.register$$module$build$src$core$extensions("math_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",q));var oe={mutationToDom:function(){const Q=i.createElement$$module$build$src$core$utils$xml("mutation"),ne=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return Q.setAttribute("divisor_input",String(ne)),Q},domToMutation:function(Q){Q=Q.getAttribute("divisor_input")==="true",this.updateShape_(Q)},updateShape_:function(Q){const ne=this.getInput("DIVISOR");Q?ne||this.appendValueInput("DIVISOR").setCheck("Number"):ne&&this.removeInput("DIVISOR")}},se=function(){this.getField("PROPERTY").setValidator(function(Q){Q=Q==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(Q)})};i.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",oe,se),i.register$$module$build$src$core$extensions("math_change_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var pe={updateType_:function(Q){Q==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const Q=i.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("op",this.getFieldValue("OP")),Q},domToMutation:function(Q){if(Q=Q.getAttribute("op"),Q===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(Q)}},Se=function(){this.getField("OP").setValidator((function(Q){this.updateType_(Q)}).bind(this))};i.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",pe,Se),i.defineBlocks$$module$build$src$core$common($e);var Fe={blocks:$e},Re=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),qe={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};i.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",qe));var Ne={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};i.register$$module$build$src$core$extensions("controls_flow_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",Ne));var it={customContextMenu:function(Q){if(!this.isInFlyout){var ne=this.getField("VAR"),fe=ne.getVariable().name;this.isCollapsed()||fe===null||(ne={type:"variables_get",fields:{VAR:ne.saveState(!0)}},Q.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",fe),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,ne)}))}}};i.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",it),i.register$$module$build$src$core$extensions("controls_for_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),i.register$$module$build$src$core$extensions("controls_forEach_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var st=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),pt={getSurroundLoop:function(){let Q=this;do{if(st.has(Q.type))return Q;Q=Q.getSurroundParent()}while(Q);return null},onchange:function(Q){var ne=this.workspace;if(ne.isDragging&&!ne.isDragging()&&Q.type===i.MOVE$$module$build$src$core$events$utils&&(ne=!!this.getSurroundLoop(),this.setWarningText(ne?null:i.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout)){const fe=i.getGroup$$module$build$src$core$events$utils();i.setGroup$$module$build$src$core$events$utils(Q.group),this.setEnabled(ne),i.setGroup$$module$build$src$core$events$utils(fe)}}};i.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",pt),i.defineBlocks$$module$build$src$core$common(Re);var dt={blocks:Re,loopTypes:st},Ue=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Ae={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};i.register$$module$build$src$core$extensions("logic_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Ae));var je={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const Q=i.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&Q.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&Q.setAttribute("else","1"),Q},domToMutation:function(Q){this.elseifCount_=parseInt(Q.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(Q.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const Q=Object.create(null);return this.elseifCount_&&(Q.elseIfCount=this.elseifCount_),this.elseCount_&&(Q.hasElse=!0),Q},loadExtraState:function(Q){this.elseifCount_=Q.elseIfCount||0,this.elseCount_=Q.hasElse?1:0,this.updateShape_()},decompose:function(Q){const ne=Q.newBlock("controls_if_if");ne.initSvg();let fe=ne.nextConnection;for(let Ie=1;Ie<=this.elseifCount_;Ie++){const Ye=Q.newBlock("controls_if_elseif");Ye.initSvg(),fe.connect(Ye.previousConnection),fe=Ye.nextConnection}return this.elseCount_&&(Q=Q.newBlock("controls_if_else"),Q.initSvg(),fe.connect(Q.previousConnection)),ne},compose:function(Q){Q=Q.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const ne=[null],fe=[null];let Ie=null;for(;Q;){if(!Q.isInsertionMarker())switch(Q.type){case"controls_if_elseif":this.elseifCount_++,ne.push(Q.valueConnection_),fe.push(Q.statementConnection_);break;case"controls_if_else":this.elseCount_++,Ie=Q.statementConnection_;break;default:throw TypeError("Unknown block type: "+Q.type)}Q=Q.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(ne,fe,Ie)},saveConnections:function(Q){Q=Q.nextConnection.targetBlock();let ne=1;for(;Q;){if(!Q.isInsertionMarker())switch(Q.type){case"controls_if_elseif":var fe=this.getInput("IF"+ne);const Ie=this.getInput("DO"+ne);Q.valueConnection_=fe&&fe.connection.targetConnection,Q.statementConnection_=Ie&&Ie.connection.targetConnection,ne++;break;case"controls_if_else":fe=this.getInput("ELSE"),Q.statementConnection_=fe&&fe.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+Q.type)}Q=Q.getNextBlock()}},rebuildShape_:function(){const Q=[null],ne=[null];let fe=null;this.getInput("ELSE")&&(fe=this.getInput("ELSE").connection.targetConnection);for(let Ie=1;this.getInput("IF"+Ie);Ie++){const Ye=this.getInput("IF"+Ie),Gt=this.getInput("DO"+Ie);Q.push(Ye.connection.targetConnection),ne.push(Gt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(Q,ne,fe)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var Q=1;this.getInput("IF"+Q);Q++)this.removeInput("IF"+Q),this.removeInput("DO"+Q);for(Q=1;Q<=this.elseifCount_;Q++)this.appendValueInput("IF"+Q).setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+Q).appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(Q,ne,fe){for(let Ie=1;Ie<=this.elseifCount_;Ie++){let Ye;(Ye=Q[Ie])==null||Ye.reconnect(this,"IF"+Ie);let Gt;(Gt=ne[Ie])==null||Gt.reconnect(this,"DO"+Ie)}fe==null||fe.reconnect(this,"ELSE")}};i.registerMutator$$module$build$src$core$extensions("controls_if_mutator",je,null,["controls_if_elseif","controls_if_else"]);var nt=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};i.register$$module$build$src$core$extensions("controls_if_tooltip",nt);var tt={onchange:function(Q){this.prevBlocks_||(this.prevBlocks_=[null,null]);var ne=this.getInputTargetBlock("A");const fe=this.getInputTargetBlock("B");ne&&fe&&!this.workspace.connectionChecker.doTypeChecks(ne.outputConnection,fe.outputConnection)&&(i.setGroup$$module$build$src$core$events$utils(Q.group),Q=this.prevBlocks_[0],Q!==ne&&(ne.unplug(),!Q||Q.isDisposed()||Q.isShadow()||this.getInput("A").connection.connect(Q.outputConnection)),ne=this.prevBlocks_[1],ne!==fe&&(fe.unplug(),!ne||ne.isDisposed()||ne.isShadow()||this.getInput("B").connection.connect(ne.outputConnection)),this.bumpNeighbours(),i.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},Dt=function(){this.mixin(tt)};i.register$$module$build$src$core$extensions("logic_compare",Dt);var Rt={prevParentConnection_:null,onchange:function(Q){const ne=this.getInputTargetBlock("THEN"),fe=this.getInputTargetBlock("ELSE"),Ie=this.outputConnection.targetConnection;if((ne||fe)&&Ie)for(let Ye=0;2>Ye;Ye++){const Gt=Ye===1?ne:fe;Gt&&!Gt.workspace.connectionChecker.doTypeChecks(Gt.outputConnection,Ie)&&(i.setGroup$$module$build$src$core$events$utils(Q.group),Ie===this.prevParentConnection_?(this.unplug(),Ie.getSourceBlock().bumpNeighbours()):(Gt.unplug(),Gt.bumpNeighbours()),i.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=Ie}};i.registerMixin$$module$build$src$core$extensions("logic_ternary",Rt),i.defineBlocks$$module$build$src$core$common(Ue);var yt=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Ct={init:function(){this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const Q=i.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("items",String(this.itemCount_)),Q},domToMutation:function(Q){if(Q=Q.getAttribute("items"),!Q)throw new TypeError("element did not have items");this.itemCount_=parseInt(Q,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(Q){this.itemCount_=Q.itemCount,this.updateShape_()},decompose:function(Q){const ne=Q.newBlock("lists_create_with_container");ne.initSvg();let fe=ne.getInput("STACK").connection;for(let Ie=0;Ie<this.itemCount_;Ie++){const Ye=Q.newBlock("lists_create_with_item");if(Ye.initSvg(),!Ye.previousConnection)throw Error("itemBlock has no previousConnection");fe.connect(Ye.previousConnection),fe=Ye.nextConnection}return ne},compose:function(Q){var ne=Q.getInputTargetBlock("STACK");for(Q=[];ne;)ne.isInsertionMarker()||Q.push(ne.valueConnection_),ne=ne.getNextBlock();for(ne=0;ne<this.itemCount_;ne++){const fe=this.getInput("ADD"+ne).connection.targetConnection;fe&&Q.indexOf(fe)===-1&&fe.disconnect()}for(this.itemCount_=Q.length,this.updateShape_(),ne=0;ne<this.itemCount_;ne++){let fe;(fe=Q[ne])==null||fe.reconnect(this,"ADD"+ne)}},saveConnections:function(Q){Q=Q.getInputTargetBlock("STACK");let ne=0;for(;Q;){if(Q.isInsertionMarker()){Q=Q.getNextBlock();continue}const fe=this.getInput("ADD"+ne);let Ie;Q.valueConnection_=(Ie=fe)==null?void 0:Ie.connection.targetConnection,Q=Q.getNextBlock(),ne++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var Q=0;Q<this.itemCount_;Q++)if(!this.getInput("ADD"+Q)){const ne=this.appendValueInput("ADD"+Q).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);Q===0&&ne.appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(Q=this.itemCount_;this.getInput("ADD"+Q);Q++)this.removeInput("ADD"+Q)}};yt.lists_create_with=Ct;var Mt={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};yt.lists_create_with_container=Mt;var mt={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};yt.lists_create_with_item=mt;var xe={init:function(){var Q=[[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),Q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),!Q)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(Q,"END"),this.setInputsInline(!0),this.setTooltip(()=>i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};yt.lists_indexOf=xe;var ie={init:function(){var Q=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),Q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),Q.setValidator(function(ne){ne=ne==="REMOVE",this.getSourceBlock().updateStatement_(ne)}),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(Q,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const ne=this.getFieldValue("MODE"),fe=this.getFieldValue("WHERE");let Ie="";switch(ne+" "+fe){case"GET FROM_START":case"GET FROM_END":Ie=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":Ie=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":Ie=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":Ie=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":Ie=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":Ie=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":Ie=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":Ie=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":Ie=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":Ie=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":Ie=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":Ie=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(fe==="FROM_START"||fe==="FROM_END")&&(Ie+="  "+(fe==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Ie})},mutationToDom:function(){const Q=i.createElement$$module$build$src$core$utils$xml("mutation");Q.setAttribute("statement",String(!this.outputConnection));const ne=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return Q.setAttribute("at",String(ne)),Q},domToMutation:function(Q){const ne=Q.getAttribute("statement")==="true";this.updateStatement_(ne),Q=Q.getAttribute("at")!=="false",this.updateAt_(Q)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(Q){Q.isStatement?this.updateStatement_(!0):typeof Q=="string"&&this.domToMutation(i.textToDom$$module$build$src$core$utils$xml(Q))},updateStatement_:function(Q){Q!==!this.outputConnection&&(this.unplug(!0,!0),Q?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(Q){this.removeInput("AT"),this.removeInput("ORDINAL",!0),Q?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const ne=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});ne.setValidator(function(fe){const Ie=fe==="FROM_START"||fe==="FROM_END";if(Ie!==Q){const Ye=this.getSourceBlock();return Ye.updateAt_(Ie),Ye.setFieldValue(fe,"WHERE"),null}}),this.getInput("AT").appendField(ne,"WHERE"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};yt.lists_getIndex=ie;var we={init:function(){var Q=[[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),Q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),this.appendDummyInput().appendField(Q,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const ne=this.getFieldValue("MODE"),fe=this.getFieldValue("WHERE");let Ie="";switch(ne+" "+fe){case"SET FROM_START":case"SET FROM_END":Ie=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":Ie=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":Ie=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":Ie=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":Ie=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":Ie=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":Ie=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":Ie=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(fe==="FROM_START"||fe==="FROM_END")&&(Ie+="  "+i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Ie})},mutationToDom:function(){const Q=i.createElement$$module$build$src$core$utils$xml("mutation"),ne=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return Q.setAttribute("at",String(ne)),Q},domToMutation:function(Q){Q=Q.getAttribute("at")!=="false",this.updateAt_(Q)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(Q){this.removeInput("AT"),this.removeInput("ORDINAL",!0),Q?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const ne=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});ne.setValidator(function(fe){const Ie=fe==="FROM_START"||fe==="FROM_END";if(Ie!==Q){const Ye=this.getSourceBlock();return Ye.updateAt_(Ie),Ye.setFieldValue(fe,"WHERE"),null}}),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(ne,"WHERE")}};yt.lists_setIndex=we;var ct={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const Q=i.createElement$$module$build$src$core$utils$xml("mutation");var ne=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return Q.setAttribute("at1",String(ne)),ne=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,Q.setAttribute("at2",String(ne)),Q},domToMutation:function(Q){const ne=Q.getAttribute("at1")==="true";Q=Q.getAttribute("at2")==="true",this.updateAt_(1,ne),this.updateAt_(2,Q)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(Q,ne){this.removeInput("AT"+Q),this.removeInput("ORDINAL"+Q,!0),ne?(this.appendValueInput("AT"+Q).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+Q).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+Q);const fe=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+Q]});fe.setValidator(function(Ie){const Ye=Ie==="FROM_START"||Ie==="FROM_END";if(Ye!==ne){const Gt=this.getSourceBlock();return Gt.updateAt_(Q,Ye),Gt.setFieldValue(Ie,"WHERE"+Q),null}}),this.getInput("AT"+Q).appendField(fe,"WHERE"+Q),Q===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};yt.lists_getSublist=ct,yt.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},yt.lists_split={init:function(){const Q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!Q)throw Error("field_dropdown not found");Q.setValidator(ne=>{this.updateType_(ne)}),this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(Q,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const ne=this.getFieldValue("MODE");if(ne==="SPLIT")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(ne==="JOIN")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+ne)})},updateType_:function(Q){if(this.getFieldValue("MODE")!==Q){const ne=this.getInput("INPUT").connection;ne.setShadowDom(null);const fe=ne.targetBlock();fe&&(ne.disconnect(),fe.isShadow()?fe.dispose(!1):this.bumpNeighbours())}Q==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const Q=i.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("mode",this.getFieldValue("MODE")),Q},domToMutation:function(Q){this.updateType_(Q.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},i.defineBlocks$$module$build$src$core$common(yt);var Tt={blocks:yt},At=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]);i.defineBlocks$$module$build$src$core$common(At);var ft={blocks:At},Ke=Object.assign({},At,yt,Ue,Re,$e,ae,p,s),Oe={blocks:Ke,colour:ft,lists:Tt,loops:dt,math:Fe,procedures:be,texts:Z,variables:E,variablesDynamic:d};return Oe.__namespace__=i,Oe})}(jk)),jk.exports}var lz;function ree(){return lz||(lz=1,function(n,e){(function(t,i){n.exports=i(nee())})(Hl,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(Vk)),Vk.exports}var e9={exports:{}},Xk={exports:{}},uz;function iee(){return uz||(uz=1,function(n,e){(function(t,i){n.exports=i(bB())})(Hl,function(t){var i=t.__namespace__,s=function(re,Te){return[Te.quote_(re.getFieldValue("COLOUR")),Oe.ATOMIC]},o=function(re,Te){return[Te.provideFunction_("colourRandom",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",Oe.FUNCTION_CALL]},l=function(re,Te){const Ge=Te.valueToCode(re,"RED",Oe.NONE)||0,ot=Te.valueToCode(re,"GREEN",Oe.NONE)||0;return re=Te.valueToCode(re,"BLUE",Oe.NONE)||0,[Te.provideFunction_("colourRgb",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+Ge+", "+ot+", "+re+")",Oe.FUNCTION_CALL]},u=function(re,Te){const Ge=Te.valueToCode(re,"COLOUR1",Oe.NONE)||"'#000000'",ot=Te.valueToCode(re,"COLOUR2",Oe.NONE)||"'#000000'";return re=Te.valueToCode(re,"RATIO",Oe.NONE)||.5,[Te.provideFunction_("colourBlend",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+Ge+", "+ot+", "+re+")",Oe.FUNCTION_CALL]},d=function(re,Te){return["[]",Oe.ATOMIC]},p=function(re,Te){const Ge=Array(re.itemCount_);for(let ot=0;ot<re.itemCount_;ot++)Ge[ot]=Te.valueToCode(re,"ADD"+ot,Oe.NONE)||"null";return["["+Ge.join(", ")+"]",Oe.ATOMIC]},_=function(re,Te){const Ge=Te.provideFunction_("listsRepeat",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),ot=Te.valueToCode(re,"ITEM",Oe.NONE)||"null";return re=Te.valueToCode(re,"NUM",Oe.NONE)||"0",[Ge+"("+ot+", "+re+")",Oe.FUNCTION_CALL]},v=function(re,Te){return[(Te.valueToCode(re,"VALUE",Oe.MEMBER)||"[]")+".length",Oe.MEMBER]},b=function(re,Te){return["!"+(Te.valueToCode(re,"VALUE",Oe.MEMBER)||"[]")+".length",Oe.LOGICAL_NOT]},E=function(re,Te){const Ge=re.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",ot=Te.valueToCode(re,"FIND",Oe.NONE)||"''";return Te=(Te.valueToCode(re,"VALUE",Oe.MEMBER)||"[]")+"."+Ge+"("+ot+")",re.workspace.options.oneBasedIndex?[Te+" + 1",Oe.ADDITION]:[Te,Oe.FUNCTION_CALL]},C=function(re,Te){const Ge=re.getFieldValue("MODE")||"GET",ot=re.getFieldValue("WHERE")||"FROM_START";var Ft=Te.valueToCode(re,"VALUE",ot==="RANDOM"?Oe.NONE:Oe.MEMBER)||"[]";switch(ot){case"FIRST":if(Ge==="GET")return[Ft+"[0]",Oe.MEMBER];if(Ge==="GET_REMOVE")return[Ft+".shift()",Oe.MEMBER];if(Ge==="REMOVE")return Ft+`.shift();
`;break;case"LAST":if(Ge==="GET")return[Ft+".slice(-1)[0]",Oe.MEMBER];if(Ge==="GET_REMOVE")return[Ft+".pop()",Oe.MEMBER];if(Ge==="REMOVE")return Ft+`.pop();
`;break;case"FROM_START":if(re=Te.getAdjusted(re,"AT"),Ge==="GET")return[Ft+"["+re+"]",Oe.MEMBER];if(Ge==="GET_REMOVE")return[Ft+".splice("+re+", 1)[0]",Oe.FUNCTION_CALL];if(Ge==="REMOVE")return Ft+".splice("+re+`, 1);
`;break;case"FROM_END":if(re=Te.getAdjusted(re,"AT",1,!0),Ge==="GET")return[Ft+".slice("+re+")[0]",Oe.FUNCTION_CALL];if(Ge==="GET_REMOVE")return[Ft+".splice("+re+", 1)[0]",Oe.FUNCTION_CALL];if(Ge==="REMOVE")return Ft+".splice("+re+", 1);";break;case"RANDOM":if(Ft=Te.provideFunction_("listsGetRandomItem",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+Ft+", "+(Ge!=="GET")+")",Ge==="GET"||Ge==="GET_REMOVE")return[Ft,Oe.FUNCTION_CALL];if(Ge==="REMOVE")return Ft+`;
`}throw Error("Unhandled combination (lists_getIndex).")},M=function(re,Te){function Ge(){if(ot.match(/^\w+$/))return"";const De=Te.nameDB_.getDistinctName("tmpList",i.NameType$$module$build$src$core$names.VARIABLE),gt="var "+De+" = "+ot+`;
`;return ot=De,gt}let ot=Te.valueToCode(re,"LIST",Oe.MEMBER)||"[]";const Ft=re.getFieldValue("MODE")||"GET";var nn=re.getFieldValue("WHERE")||"FROM_START";const On=Te.valueToCode(re,"TO",Oe.ASSIGNMENT)||"null";switch(nn){case"FIRST":if(Ft==="SET")return ot+"[0] = "+On+`;
`;if(Ft==="INSERT")return ot+".unshift("+On+`);
`;break;case"LAST":if(Ft==="SET")return Ge()+(ot+"["+ot+".length - 1] = "+On+`;
`);if(Ft==="INSERT")return ot+".push("+On+`);
`;break;case"FROM_START":if(re=Te.getAdjusted(re,"AT"),Ft==="SET")return ot+"["+re+"] = "+On+`;
`;if(Ft==="INSERT")return ot+".splice("+re+", 0, "+On+`);
`;break;case"FROM_END":if(re=Te.getAdjusted(re,"AT",1,!1,Oe.SUBTRACTION),nn=Ge(),Ft==="SET")return nn+(ot+"["+ot+".length - "+re+"] = "+On+`;
`);if(Ft==="INSERT")return nn+(ot+".splice("+ot+".length - "+re+", 0, "+On+`);
`);break;case"RANDOM":if(re=Ge(),nn=Te.nameDB_.getDistinctName("tmpX",i.NameType$$module$build$src$core$names.VARIABLE),re+="var "+nn+" = Math.floor(Math.random() * "+ot+`.length);
`,Ft==="SET")return re+(ot+"["+nn+"] = "+On+`;
`);if(Ft==="INSERT")return re+(ot+".splice("+nn+", 0, "+On+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},I=function(re,Te){var Ge={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},ot=Te.valueToCode(re,"LIST",Oe.MEMBER)||"[]";const Ft=re.getFieldValue("WHERE1"),nn=re.getFieldValue("WHERE2");if(Ft==="FIRST"&&nn==="LAST")ot+=".slice(0)";else if(ot.match(/^\w+$/)||Ft!=="FROM_END"&&nn==="FROM_START"){switch(Ft){case"FROM_START":Ge=Te.getAdjusted(re,"AT1");break;case"FROM_END":Ge=Te.getAdjusted(re,"AT1",1,!1,Oe.SUBTRACTION),Ge=ot+".length - "+Ge;break;case"FIRST":Ge="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(nn){case"FROM_START":Te=Te.getAdjusted(re,"AT2",1);break;case"FROM_END":Te=Te.getAdjusted(re,"AT2",0,!1,Oe.SUBTRACTION),Te=ot+".length - "+Te;break;case"LAST":Te=ot+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}ot=ot+".slice("+Ge+", "+Te+")"}else{const On=Te.getAdjusted(re,"AT1");re=Te.getAdjusted(re,"AT2"),ot=Te.provideFunction_("subsequence"+Ge[Ft]+Ge[nn],`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(sequence${Ft==="FROM_END"||Ft==="FROM_START"?", at1":""}${nn==="FROM_END"||nn==="FROM_START"?", at2":""}) {
  var start = ${fe("sequence",Ft,"at1")};
  var end = ${fe("sequence",nn,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+ot+(Ft==="FROM_END"||Ft==="FROM_START"?", "+On:"")+(nn==="FROM_END"||nn==="FROM_START"?", "+re:"")+")"}return[ot,Oe.FUNCTION_CALL]},L=function(re,Te){const Ge=Te.valueToCode(re,"LIST",Oe.FUNCTION_CALL)||"[]",ot=re.getFieldValue("DIRECTION")==="1"?1:-1;return re=re.getFieldValue("TYPE"),Te=Te.provideFunction_("listsGetSortCompare",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[Ge+".slice().sort("+Te+'("'+re+'", '+ot+"))",Oe.FUNCTION_CALL]},O=function(re,Te){let Ge=Te.valueToCode(re,"INPUT",Oe.MEMBER);if(Te=Te.valueToCode(re,"DELIM",Oe.NONE)||"''",re=re.getFieldValue("MODE"),re==="SPLIT")Ge||(Ge="''"),re="split";else if(re==="JOIN")Ge||(Ge="[]"),re="join";else throw Error("Unknown mode: "+re);return[Ge+"."+re+"("+Te+")",Oe.FUNCTION_CALL]},P=function(re,Te){return[(Te.valueToCode(re,"LIST",Oe.FUNCTION_CALL)||"[]")+".slice().reverse()",Oe.FUNCTION_CALL]},B=function(re,Te){var Ge=0;let ot="";Te.STATEMENT_PREFIX&&(ot+=Te.injectId(Te.STATEMENT_PREFIX,re));do{const Ft=Te.valueToCode(re,"IF"+Ge,Oe.NONE)||"false";let nn=Te.statementToCode(re,"DO"+Ge);Te.STATEMENT_SUFFIX&&(nn=Te.prefixLines(Te.injectId(Te.STATEMENT_SUFFIX,re),Te.INDENT)+nn),ot+=(0<Ge?" else ":"")+"if ("+Ft+`) {
`+nn+"}",Ge++}while(re.getInput("IF"+Ge));return(re.getInput("ELSE")||Te.STATEMENT_SUFFIX)&&(Ge=Te.statementToCode(re,"ELSE"),Te.STATEMENT_SUFFIX&&(Ge=Te.prefixLines(Te.injectId(Te.STATEMENT_SUFFIX,re),Te.INDENT)+Ge),ot+=` else {
`+Ge+"}"),ot+`
`},z=function(re,Te){const Ge={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[re.getFieldValue("OP")],ot=Ge==="=="||Ge==="!="?Oe.EQUALITY:Oe.RELATIONAL,Ft=Te.valueToCode(re,"A",ot)||"0";return re=Te.valueToCode(re,"B",ot)||"0",[Ft+" "+Ge+" "+re,ot]},G=function(re,Te){const Ge=re.getFieldValue("OP")==="AND"?"&&":"||",ot=Ge==="&&"?Oe.LOGICAL_AND:Oe.LOGICAL_OR;let Ft=Te.valueToCode(re,"A",ot);return re=Te.valueToCode(re,"B",ot),Ft||re?(Te=Ge==="&&"?"true":"false",Ft||(Ft=Te),re||(re=Te)):re=Ft="false",[Ft+" "+Ge+" "+re,ot]},j=function(re,Te){const Ge=Oe.LOGICAL_NOT;return["!"+(Te.valueToCode(re,"BOOL",Ge)||"true"),Ge]},H=function(re,Te){return[re.getFieldValue("BOOL")==="TRUE"?"true":"false",Oe.ATOMIC]},Z=function(re,Te){return["null",Oe.ATOMIC]},ae=function(re,Te){const Ge=Te.valueToCode(re,"IF",Oe.CONDITIONAL)||"false",ot=Te.valueToCode(re,"THEN",Oe.CONDITIONAL)||"null";return re=Te.valueToCode(re,"ELSE",Oe.CONDITIONAL)||"null",[Ge+" ? "+ot+" : "+re,Oe.CONDITIONAL]},J=function(re,Te){let Ge;Ge=re.getField("TIMES")?String(Number(re.getFieldValue("TIMES"))):Te.valueToCode(re,"TIMES",Oe.ASSIGNMENT)||"0";let ot=Te.statementToCode(re,"DO");ot=Te.addLoopTrap(ot,re),re="";const Ft=Te.nameDB_.getDistinctName("count",i.NameType$$module$build$src$core$names.VARIABLE);let nn=Ge;return Ge.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(Ge)||(nn=Te.nameDB_.getDistinctName("repeat_end",i.NameType$$module$build$src$core$names.VARIABLE),re+="var "+nn+" = "+Ge+`;
`),re+("for (var "+Ft+" = 0; "+Ft+" < "+nn+"; "+Ft+`++) {
`+ot+`}
`)},te=function(re,Te){const Ge=re.getFieldValue("MODE")==="UNTIL";let ot=Te.valueToCode(re,"BOOL",Ge?Oe.LOGICAL_NOT:Oe.NONE)||"false",Ft=Te.statementToCode(re,"DO");return Ft=Te.addLoopTrap(Ft,re),Ge&&(ot="!"+ot),"while ("+ot+`) {
`+Ft+`}
`},he=function(re,Te){var Ge=Te.getVariableName(re.getFieldValue("VAR")),ot=Te.valueToCode(re,"FROM",Oe.ASSIGNMENT)||"0",Ft=Te.valueToCode(re,"TO",Oe.ASSIGNMENT)||"0";const nn=Te.valueToCode(re,"BY",Oe.ASSIGNMENT)||"1";let On=Te.statementToCode(re,"DO");if(On=Te.addLoopTrap(On,re),i.isNumber$$module$build$src$core$utils$string(ot)&&i.isNumber$$module$build$src$core$utils$string(Ft)&&i.isNumber$$module$build$src$core$utils$string(nn))Te=Number(ot)<=Number(Ft),re="for ("+Ge+" = "+ot+"; "+Ge+(Te?" <= ":" >= ")+Ft+"; "+Ge,Ge=Math.abs(Number(nn)),re=Ge===1?re+(Te?"++":"--"):re+((Te?" += ":" -= ")+Ge),re+=`) {
`+On+`}
`;else{re="";let De=ot;ot.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(ot)||(De=Te.nameDB_.getDistinctName(Ge+"_start",i.NameType$$module$build$src$core$names.VARIABLE),re+="var "+De+" = "+ot+`;
`),ot=Ft,Ft.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(Ft)||(ot=Te.nameDB_.getDistinctName(Ge+"_end",i.NameType$$module$build$src$core$names.VARIABLE),re+="var "+ot+" = "+Ft+`;
`),Ft=Te.nameDB_.getDistinctName(Ge+"_inc",i.NameType$$module$build$src$core$names.VARIABLE),re+="var "+Ft+" = ",re=i.isNumber$$module$build$src$core$utils$string(nn)?re+(Math.abs(Number(nn))+`;
`):re+("Math.abs("+nn+`);
`),re+="if ("+De+" > "+ot+`) {
`,re+=Te.INDENT+Ft+" = -"+Ft+`;
`,re=re+`}
for (`+(Ge+" = "+De+"; "+Ft+" >= 0 ? "+Ge+" <= "+ot+" : "+Ge+" >= "+ot+"; "+Ge+" += "+Ft+`) {
`+On+`}
`)}return re},le=function(re,Te){const Ge=Te.getVariableName(re.getFieldValue("VAR"));var ot=Te.valueToCode(re,"LIST",Oe.ASSIGNMENT)||"[]";let Ft=Te.statementToCode(re,"DO");Ft=Te.addLoopTrap(Ft,re),re="";let nn=ot;return ot.match(/^\w+$/)||(nn=Te.nameDB_.getDistinctName(Ge+"_list",i.NameType$$module$build$src$core$names.VARIABLE),re+="var "+nn+" = "+ot+`;
`),ot=Te.nameDB_.getDistinctName(Ge+"_index",i.NameType$$module$build$src$core$names.VARIABLE),Ft=Te.INDENT+Ge+" = "+nn+"["+ot+`];
`+Ft,re+("for (var "+ot+" in "+nn+`) {
`+Ft+`}
`)},ce=function(re,Te){let Ge="";if(Te.STATEMENT_PREFIX&&(Ge+=Te.injectId(Te.STATEMENT_PREFIX,re)),Te.STATEMENT_SUFFIX&&(Ge+=Te.injectId(Te.STATEMENT_SUFFIX,re)),Te.STATEMENT_PREFIX){const ot=re.getSurroundLoop();ot&&!ot.suppressPrefixSuffix&&(Ge+=Te.injectId(Te.STATEMENT_PREFIX,ot))}switch(re.getFieldValue("FLOW")){case"BREAK":return Ge+`break;
`;case"CONTINUE":return Ge+`continue;
`}throw Error("Unknown flow statement.")},be=function(re,Te){return re=Number(re.getFieldValue("NUM")),[String(re),0<=re?Oe.ATOMIC:Oe.UNARY_NEGATION]},$e=function(re,Te){var Ge={ADD:[" + ",Oe.ADDITION],MINUS:[" - ",Oe.SUBTRACTION],MULTIPLY:[" * ",Oe.MULTIPLICATION],DIVIDE:[" / ",Oe.DIVISION],POWER:[null,Oe.NONE]}[re.getFieldValue("OP")];const ot=Ge[0];Ge=Ge[1];const Ft=Te.valueToCode(re,"A",Ge)||"0";return re=Te.valueToCode(re,"B",Ge)||"0",ot?[Ft+ot+re,Ge]:["Math.pow("+Ft+", "+re+")",Oe.FUNCTION_CALL]},q=function(re,Te){const Ge=re.getFieldValue("OP");let ot;if(Ge==="NEG")return re=Te.valueToCode(re,"NUM",Oe.UNARY_NEGATION)||"0",re[0]==="-"&&(re=" "+re),["-"+re,Oe.UNARY_NEGATION];switch(re=Ge==="SIN"||Ge==="COS"||Ge==="TAN"?Te.valueToCode(re,"NUM",Oe.DIVISION)||"0":Te.valueToCode(re,"NUM",Oe.NONE)||"0",Ge){case"ABS":ot="Math.abs("+re+")";break;case"ROOT":ot="Math.sqrt("+re+")";break;case"LN":ot="Math.log("+re+")";break;case"EXP":ot="Math.exp("+re+")";break;case"POW10":ot="Math.pow(10,"+re+")";break;case"ROUND":ot="Math.round("+re+")";break;case"ROUNDUP":ot="Math.ceil("+re+")";break;case"ROUNDDOWN":ot="Math.floor("+re+")";break;case"SIN":ot="Math.sin("+re+" / 180 * Math.PI)";break;case"COS":ot="Math.cos("+re+" / 180 * Math.PI)";break;case"TAN":ot="Math.tan("+re+" / 180 * Math.PI)"}if(ot)return[ot,Oe.FUNCTION_CALL];switch(Ge){case"LOG10":ot="Math.log("+re+") / Math.log(10)";break;case"ASIN":ot="Math.asin("+re+") / Math.PI * 180";break;case"ACOS":ot="Math.acos("+re+") / Math.PI * 180";break;case"ATAN":ot="Math.atan("+re+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+Ge)}return[ot,Oe.DIVISION]},oe=function(re,Te){return{PI:["Math.PI",Oe.MEMBER],E:["Math.E",Oe.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",Oe.DIVISION],SQRT2:["Math.SQRT2",Oe.MEMBER],SQRT1_2:["Math.SQRT1_2",Oe.MEMBER],INFINITY:["Infinity",Oe.ATOMIC]}[re.getFieldValue("CONSTANT")]},se=function(re,Te){var Ge={EVEN:[" % 2 === 0",Oe.MODULUS,Oe.EQUALITY],ODD:[" % 2 === 1",Oe.MODULUS,Oe.EQUALITY],WHOLE:[" % 1 === 0",Oe.MODULUS,Oe.EQUALITY],POSITIVE:[" > 0",Oe.RELATIONAL,Oe.RELATIONAL],NEGATIVE:[" < 0",Oe.RELATIONAL,Oe.RELATIONAL],DIVISIBLE_BY:[null,Oe.MODULUS,Oe.EQUALITY],PRIME:[null,Oe.NONE,Oe.FUNCTION_CALL]};const ot=re.getFieldValue("PROPERTY"),[Ft,nn,On]=Ge[ot];return Ge=Te.valueToCode(re,"NUMBER_TO_CHECK",nn)||"0",ot==="PRIME"?re=Te.provideFunction_("mathIsPrime",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+Ge+")":ot==="DIVISIBLE_BY"?(re=Te.valueToCode(re,"DIVISOR",Oe.MODULUS)||"0",re=Ge+" % "+re+" === 0"):re=Ge+Ft,[re,On]},pe=function(re,Te){const Ge=Te.valueToCode(re,"DELTA",Oe.ADDITION)||"0";return re=Te.getVariableName(re.getFieldValue("VAR")),re+" = (typeof "+re+" === 'number' ? "+re+" : 0) + "+Ge+`;
`},Se=function(re,Te){var Ge=re.getFieldValue("OP");switch(Ge){case"SUM":re=Te.valueToCode(re,"LIST",Oe.MEMBER)||"[]",re+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":re=Te.valueToCode(re,"LIST",Oe.NONE)||"[]",re="Math.min.apply(null, "+re+")";break;case"MAX":re=Te.valueToCode(re,"LIST",Oe.NONE)||"[]",re="Math.max.apply(null, "+re+")";break;case"AVERAGE":Ge=Te.provideFunction_("mathMean",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),re=Te.valueToCode(re,"LIST",Oe.NONE)||"[]",re=Ge+"("+re+")";break;case"MEDIAN":Ge=Te.provideFunction_("mathMedian",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),re=Te.valueToCode(re,"LIST",Oe.NONE)||"[]",re=Ge+"("+re+")";break;case"MODE":Ge=Te.provideFunction_("mathModes",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),re=Te.valueToCode(re,"LIST",Oe.NONE)||"[]",re=Ge+"("+re+")";break;case"STD_DEV":Ge=Te.provideFunction_("mathStandardDeviation",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),re=Te.valueToCode(re,"LIST",Oe.NONE)||"[]",re=Ge+"("+re+")";break;case"RANDOM":Ge=Te.provideFunction_("mathRandomList",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),re=Te.valueToCode(re,"LIST",Oe.NONE)||"[]",re=Ge+"("+re+")";break;default:throw Error("Unknown operator: "+Ge)}return[re,Oe.FUNCTION_CALL]},Fe=function(re,Te){const Ge=Te.valueToCode(re,"DIVIDEND",Oe.MODULUS)||"0";return re=Te.valueToCode(re,"DIVISOR",Oe.MODULUS)||"0",[Ge+" % "+re,Oe.MODULUS]},Re=function(re,Te){const Ge=Te.valueToCode(re,"VALUE",Oe.NONE)||"0",ot=Te.valueToCode(re,"LOW",Oe.NONE)||"0";return re=Te.valueToCode(re,"HIGH",Oe.NONE)||"Infinity",["Math.min(Math.max("+Ge+", "+ot+"), "+re+")",Oe.FUNCTION_CALL]},qe=function(re,Te){const Ge=Te.valueToCode(re,"FROM",Oe.NONE)||"0";return re=Te.valueToCode(re,"TO",Oe.NONE)||"0",[Te.provideFunction_("mathRandomInt",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+Ge+", "+re+")",Oe.FUNCTION_CALL]},Ne=function(re,Te){return["Math.random()",Oe.FUNCTION_CALL]},it=function(re,Te){const Ge=Te.valueToCode(re,"X",Oe.NONE)||"0";return["Math.atan2("+(Te.valueToCode(re,"Y",Oe.NONE)||"0")+", "+Ge+") / Math.PI * 180",Oe.DIVISION]},st=function(re,Te){const Ge=Te.getProcedureName(re.getFieldValue("NAME"));var ot="";Te.STATEMENT_PREFIX&&(ot+=Te.injectId(Te.STATEMENT_PREFIX,re)),Te.STATEMENT_SUFFIX&&(ot+=Te.injectId(Te.STATEMENT_SUFFIX,re)),ot&&(ot=Te.prefixLines(ot,Te.INDENT));let Ft="";Te.INFINITE_LOOP_TRAP&&(Ft=Te.prefixLines(Te.injectId(Te.INFINITE_LOOP_TRAP,re),Te.INDENT));const nn=Te.statementToCode(re,"STACK");let On=Te.valueToCode(re,"RETURN",Oe.NONE)||"",De="";nn&&On&&(De=ot),On&&(On=Te.INDENT+"return "+On+`;
`);const gt=[],$t=re.getVars();for(let vt=0;vt<$t.length;vt++)gt[vt]=Te.getVariableName($t[vt]);return ot="function "+Ge+"("+gt.join(", ")+`) {
`+ot+Ft+nn+De+On+"}",ot=Te.scrub_(re,ot),Te.definitions_["%"+Ge]=ot,null},pt=function(re,Te){const Ge=Te.getProcedureName(re.getFieldValue("NAME")),ot=[],Ft=re.getVars();for(let nn=0;nn<Ft.length;nn++)ot[nn]=Te.valueToCode(re,"ARG"+nn,Oe.NONE)||"null";return[Ge+"("+ot.join(", ")+")",Oe.FUNCTION_CALL]},dt=function(re,Te){return Te.forBlock.procedures_callreturn(re,Te)[0]+`;
`},Ue=function(re,Te){let Ge="if ("+(Te.valueToCode(re,"CONDITION",Oe.NONE)||"false")+`) {
`;return Te.STATEMENT_SUFFIX&&(Ge+=Te.prefixLines(Te.injectId(Te.STATEMENT_SUFFIX,re),Te.INDENT)),re.hasReturnValue_?(re=Te.valueToCode(re,"VALUE",Oe.NONE)||"null",Ge+=Te.INDENT+"return "+re+`;
`):Ge+=Te.INDENT+`return;
`,Ge+`}
`},Ae=function(re,Te){return[Te.quote_(re.getFieldValue("TEXT")),Oe.ATOMIC]},je=function(re,Te){return re=Te.multiline_quote_(re.getFieldValue("TEXT")),Te=re.indexOf("+")!==-1?Oe.ADDITION:Oe.ATOMIC,[re,Te]},nt=function(re,Te){switch(re.itemCount_){case 0:return["''",Oe.ATOMIC];case 1:return re=Te.valueToCode(re,"ADD0",Oe.NONE)||"''",Kt(re);case 2:var Ge=Te.valueToCode(re,"ADD0",Oe.NONE)||"''";return re=Te.valueToCode(re,"ADD1",Oe.NONE)||"''",[Kt(Ge)[0]+" + "+Kt(re)[0],Oe.ADDITION];default:Ge=Array(re.itemCount_);for(let ot=0;ot<re.itemCount_;ot++)Ge[ot]=Te.valueToCode(re,"ADD"+ot,Oe.NONE)||"''";return["["+Ge.join(",")+"].join('')",Oe.FUNCTION_CALL]}},tt=function(re,Te){const Ge=Te.getVariableName(re.getFieldValue("VAR"));return re=Te.valueToCode(re,"TEXT",Oe.NONE)||"''",Ge+" += "+Kt(re)[0]+`;
`},Dt=function(re,Te){return[(Te.valueToCode(re,"VALUE",Oe.MEMBER)||"''")+".length",Oe.MEMBER]},Rt=function(re,Te){return["!"+(Te.valueToCode(re,"VALUE",Oe.MEMBER)||"''")+".length",Oe.LOGICAL_NOT]},yt=function(re,Te){const Ge=re.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",ot=Te.valueToCode(re,"FIND",Oe.NONE)||"''";return Te=(Te.valueToCode(re,"VALUE",Oe.MEMBER)||"''")+"."+Ge+"("+ot+")",re.workspace.options.oneBasedIndex?[Te+" + 1",Oe.ADDITION]:[Te,Oe.FUNCTION_CALL]},Ct=function(re,Te){const Ge=re.getFieldValue("WHERE")||"FROM_START",ot=Te.valueToCode(re,"VALUE",Ge==="RANDOM"?Oe.NONE:Oe.MEMBER)||"''";switch(Ge){case"FIRST":return[ot+".charAt(0)",Oe.FUNCTION_CALL];case"LAST":return[ot+".slice(-1)",Oe.FUNCTION_CALL];case"FROM_START":return re=Te.getAdjusted(re,"AT"),[ot+".charAt("+re+")",Oe.FUNCTION_CALL];case"FROM_END":return re=Te.getAdjusted(re,"AT",1,!0),[ot+".slice("+re+").charAt(0)",Oe.FUNCTION_CALL];case"RANDOM":return[Te.provideFunction_("textRandomLetter",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+ot+")",Oe.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},Mt=function(re,Te){var Ge={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const ot=re.getFieldValue("WHERE1"),Ft=re.getFieldValue("WHERE2");var nn=ot!=="FROM_END"&&ot!=="LAST"&&Ft!=="FROM_END"&&Ft!=="LAST",On=Te.valueToCode(re,"STRING",nn?Oe.MEMBER:Oe.NONE)||"''";if(ot==="FIRST"&&Ft==="LAST")return[On,Oe.NONE];if(On.match(/^'?\w+'?$/)||nn){switch(ot){case"FROM_START":Ge=Te.getAdjusted(re,"AT1");break;case"FROM_END":Ge=Te.getAdjusted(re,"AT1",1,!1,Oe.SUBTRACTION),Ge=On+".length - "+Ge;break;case"FIRST":Ge="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(Ft){case"FROM_START":Te=Te.getAdjusted(re,"AT2",1);break;case"FROM_END":Te=Te.getAdjusted(re,"AT2",0,!1,Oe.SUBTRACTION),Te=On+".length - "+Te;break;case"LAST":Te=On+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}On=On+".slice("+Ge+", "+Te+")"}else nn=Te.getAdjusted(re,"AT1"),re=Te.getAdjusted(re,"AT2"),On=Te.provideFunction_("subsequence"+Ge[ot]+Ge[Ft],`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(sequence${ot==="FROM_END"||ot==="FROM_START"?", at1":""}${Ft==="FROM_END"||Ft==="FROM_START"?", at2":""}) {
  var start = ${Yt("sequence",ot,"at1")};
  var end = ${Yt("sequence",Ft,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+On+(ot==="FROM_END"||ot==="FROM_START"?", "+nn:"")+(Ft==="FROM_END"||Ft==="FROM_START"?", "+re:"")+")";return[On,Oe.FUNCTION_CALL]},mt=function(re,Te){const Ge={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[re.getFieldValue("CASE")];return re=Te.valueToCode(re,"TEXT",Ge?Oe.MEMBER:Oe.NONE)||"''",[Ge?re+Ge:Te.provideFunction_("textToTitleCase",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+re+")",Oe.FUNCTION_CALL]},xe=function(re,Te){const Ge={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[re.getFieldValue("MODE")];return[(Te.valueToCode(re,"TEXT",Oe.MEMBER)||"''")+Ge,Oe.FUNCTION_CALL]},ie=function(re,Te){return"window.alert("+(Te.valueToCode(re,"TEXT",Oe.NONE)||"''")+`);
`},we=function(re,Te){return Te="window.prompt("+(re.getField("TEXT")?Te.quote_(re.getFieldValue("TEXT")):Te.valueToCode(re,"TEXT",Oe.NONE)||"''")+")",re.getFieldValue("TYPE")==="NUMBER"&&(Te="Number("+Te+")"),[Te,Oe.FUNCTION_CALL]},ct=function(re,Te){const Ge=Te.valueToCode(re,"TEXT",Oe.NONE)||"''";return re=Te.valueToCode(re,"SUB",Oe.NONE)||"''",[Te.provideFunction_("textCount",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+Ge+", "+re+")",Oe.FUNCTION_CALL]},Tt=function(re,Te){const Ge=Te.valueToCode(re,"TEXT",Oe.NONE)||"''",ot=Te.valueToCode(re,"FROM",Oe.NONE)||"''";return re=Te.valueToCode(re,"TO",Oe.NONE)||"''",[Te.provideFunction_("textReplace",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+Ge+", "+ot+", "+re+")",Oe.FUNCTION_CALL]},At=function(re,Te){return[(Te.valueToCode(re,"TEXT",Oe.MEMBER)||"''")+".split('').reverse().join('')",Oe.FUNCTION_CALL]},ft=function(re,Te){return[Te.getVariableName(re.getFieldValue("VAR")),Oe.ATOMIC]},Ke=function(re,Te){const Ge=Te.valueToCode(re,"VALUE",Oe.ASSIGNMENT)||"0";return Te.getVariableName(re.getFieldValue("VAR"))+" = "+Ge+`;
`},Oe;(function(re){re[re.ATOMIC=0]="ATOMIC",re[re.NEW=1.1]="NEW",re[re.MEMBER=1.2]="MEMBER",re[re.FUNCTION_CALL=2]="FUNCTION_CALL",re[re.INCREMENT=3]="INCREMENT",re[re.DECREMENT=3]="DECREMENT",re[re.BITWISE_NOT=4.1]="BITWISE_NOT",re[re.UNARY_PLUS=4.2]="UNARY_PLUS",re[re.UNARY_NEGATION=4.3]="UNARY_NEGATION",re[re.LOGICAL_NOT=4.4]="LOGICAL_NOT",re[re.TYPEOF=4.5]="TYPEOF",re[re.VOID=4.6]="VOID",re[re.DELETE=4.7]="DELETE",re[re.AWAIT=4.8]="AWAIT",re[re.EXPONENTIATION=5]="EXPONENTIATION",re[re.MULTIPLICATION=5.1]="MULTIPLICATION",re[re.DIVISION=5.2]="DIVISION",re[re.MODULUS=5.3]="MODULUS",re[re.SUBTRACTION=6.1]="SUBTRACTION",re[re.ADDITION=6.2]="ADDITION",re[re.BITWISE_SHIFT=7]="BITWISE_SHIFT",re[re.RELATIONAL=8]="RELATIONAL",re[re.IN=8]="IN",re[re.INSTANCEOF=8]="INSTANCEOF",re[re.EQUALITY=9]="EQUALITY",re[re.BITWISE_AND=10]="BITWISE_AND",re[re.BITWISE_XOR=11]="BITWISE_XOR",re[re.BITWISE_OR=12]="BITWISE_OR",re[re.LOGICAL_AND=13]="LOGICAL_AND",re[re.LOGICAL_OR=14]="LOGICAL_OR",re[re.CONDITIONAL=15]="CONDITIONAL",re[re.ASSIGNMENT=16]="ASSIGNMENT",re[re.YIELD=17]="YIELD",re[re.COMMA=18]="COMMA",re[re.NONE=99]="NONE"})(Oe||(Oe={}));var Q=class extends i.CodeGenerator$$module$build$src$core$generator{constructor(re="JavaScript"){super(re),this.ORDER_OVERRIDES=[[Oe.FUNCTION_CALL,Oe.MEMBER],[Oe.FUNCTION_CALL,Oe.FUNCTION_CALL],[Oe.MEMBER,Oe.MEMBER],[Oe.MEMBER,Oe.FUNCTION_CALL],[Oe.LOGICAL_NOT,Oe.LOGICAL_NOT],[Oe.MULTIPLICATION,Oe.MULTIPLICATION],[Oe.ADDITION,Oe.ADDITION],[Oe.LOGICAL_AND,Oe.LOGICAL_AND],[Oe.LOGICAL_OR,Oe.LOGICAL_OR]],this.isInitialized=!1;for(const Te in Oe)re=Oe[Te],typeof re!="string"&&(this["ORDER_"+Te]=re);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(re){super.init(re),this.nameDB_?this.nameDB_.reset():this.nameDB_=new i.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(re.getVariableMap()),this.nameDB_.populateVariables(re),this.nameDB_.populateProcedures(re);const Te=[];var Ge=i.allDeveloperVariables$$module$build$src$core$variables(re);for(let ot=0;ot<Ge.length;ot++)Te.push(this.nameDB_.getName(Ge[ot],i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(re=i.allUsedVarModels$$module$build$src$core$variables(re),Ge=0;Ge<re.length;Ge++)Te.push(this.nameDB_.getName(re[Ge].getId(),i.NameType$$module$build$src$core$names.VARIABLE));Te.length&&(this.definitions_.variables="var "+Te.join(", ")+";"),this.isInitialized=!0}finish(re){const Te=Object.values(this.definitions_);return super.finish(re),this.isInitialized=!1,this.nameDB_.reset(),Te.join(`

`)+`


`+re}scrubNakedValue(re){return re+`;
`}quote_(re){return re=re.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+re+"'"}multiline_quote_(re){return re.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(re,Te,Ge=!1){let ot="";if(!re.outputConnection||!re.outputConnection.targetConnection){var Ft=re.getCommentText();Ft&&(Ft=i.wrap$$module$build$src$core$utils$string(Ft,this.COMMENT_WRAP-3),ot+=this.prefixLines(Ft+`
`,"// "));for(let nn=0;nn<re.inputList.length;nn++)re.inputList[nn].type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(Ft=re.inputList[nn].connection.targetBlock())&&(Ft=this.allNestedComments(Ft))&&(ot+=this.prefixLines(Ft,"// "))}return re=re.nextConnection&&re.nextConnection.targetBlock(),Ge=Ge?"":this.blockToCode(re),ot+Te+Ge}getAdjusted(re,Te,Ge=0,ot=!1,Ft=Oe.NONE){re.workspace.options.oneBasedIndex&&Ge--;const nn=re.workspace.options.oneBasedIndex?"1":"0";let On=Ft;return 0<Ge?On=Oe.ADDITION:0>Ge?On=Oe.SUBTRACTION:ot&&(On=Oe.UNARY_NEGATION),re=this.valueToCode(re,Te,On)||nn,Ge===0&&!ot?re:i.isNumber$$module$build$src$core$utils$string(re)?(re=String(Number(re)+Ge),ot&&(re=String(-Number(re))),re):(0<Ge?re=`${re} + ${Ge}`:0>Ge&&(re=`${re} - ${-Ge}`),ot&&(re=Ge?`-(${re})`:`-${re}`),Math.floor(Ft)>=Math.floor(On)&&(re=`(${re})`),re)}},ne={};ne.colour_blend=u,ne.colour_picker=s,ne.colour_random=o,ne.colour_rgb=l;var fe=function(re,Te,Ge){return Te==="FIRST"?"0":Te==="FROM_END"?re+".length - 1 - "+Ge:Te==="LAST"?re+".length - 1":Ge},Ie={};Ie.lists_create_empty=d,Ie.lists_create_with=p,Ie.lists_getIndex=C,Ie.lists_getSublist=I,Ie.lists_indexOf=E,Ie.lists_isEmpty=b,Ie.lists_length=v,Ie.lists_repeat=_,Ie.lists_reverse=P,Ie.lists_setIndex=M,Ie.lists_sort=L,Ie.lists_split=O;var Ye={};Ye.controls_if=B,Ye.controls_ifelse=B,Ye.logic_boolean=H,Ye.logic_compare=z,Ye.logic_negate=j,Ye.logic_null=Z,Ye.logic_operation=G,Ye.logic_ternary=ae;var Gt={};Gt.controls_flow_statements=ce,Gt.controls_for=he,Gt.controls_forEach=le,Gt.controls_repeat=J,Gt.controls_repeat_ext=J,Gt.controls_whileUntil=te;var He={};He.math_arithmetic=$e,He.math_atan2=it,He.math_change=pe,He.math_constant=oe,He.math_constrain=Re,He.math_modulo=Fe,He.math_number=be,He.math_number_property=se,He.math_on_list=Se,He.math_random_float=Ne,He.math_random_int=qe,He.math_round=q,He.math_single=q,He.math_trig=q;var Zt={};Zt.procedures_callnoreturn=dt,Zt.procedures_callreturn=pt,Zt.procedures_defnoreturn=st,Zt.procedures_defreturn=st,Zt.procedures_ifreturn=Ue;var _t=/^\s*'([^']|\\')*'\s*$/,Kt=function(re){return _t.test(re)?[re,Oe.ATOMIC]:["String("+re+")",Oe.FUNCTION_CALL]},Yt=function(re,Te,Ge){return Te==="FIRST"?"0":Te==="FROM_END"?re+".length - 1 - "+Ge:Te==="LAST"?re+".length - 1":Ge},Rn={};Rn.text=Ae,Rn.text_append=tt,Rn.text_changeCase=mt,Rn.text_charAt=Ct,Rn.text_count=ct,Rn.text_getSubstring=Mt,Rn.text_indexOf=yt,Rn.text_isEmpty=Rt,Rn.text_join=nt,Rn.text_length=Dt,Rn.text_multiline=je,Rn.text_print=ie,Rn.text_prompt=we,Rn.text_prompt_ext=we,Rn.text_replace=Tt,Rn.text_reverse=At,Rn.text_trim=xe;var ii={};ii.variables_get=ft,ii.variables_set=Ke;var Dr={};Dr.variables_get_dynamic=ft,Dr.variables_set_dynamic=Ke;var Si=new Q,xr=Object.assign({},ne,Ie,Ye,Gt,He,Zt,Rn,ii,Dr);for(const re in xr)Si.forBlock[re]=xr[re];var fr={};return fr.JavascriptGenerator=Q,fr.Order=Oe,fr.javascriptGenerator=Si,fr.__namespace__=i,fr})}(Xk)),Xk.exports}(function(n,e){(function(t,i){n.exports=i(TB(),iee())})(Hl,function(t,i){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return i})})(e9);var QS=e9.exports,cz;function see(){return cz||(cz=1,function(n,e){(function(t,i){n.exports=i(TB(),tee(),ree(),QS)})(Hl,function(t,i,s,o){return t.setLocale(i),t})}(zk)),zk.exports}(function(n,e){(function(t,i){n.exports=i(see())})(Hl,function(t){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})})(ZW);var Gg=ZW.exports,wt=TB();const oee={colour:"#5f86b7"},aee={colour:"#5f86b7"},lee={colour:"#0b522e"},uee={colour:"#0b522e"},cee={colour:"#c86949"},hee={colour:"#50b166"},dee={colour:"#802639"},pee={colour:"#2dadb8"},fee={colour:"#d20e4d"},mee={colour:"#96a467"},Nt={trigger_category:oee,procedure_category:aee,logic_category:lee,loop_category:uee,math_category:cee,movement_category:hee,light_category:dee,speech_category:pee,face_category:fee,audio_category:mee};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uf extends wt.FieldNumber{constructor(e,t,i,s,o,l,u,d){super(e,t,i,s,u,d),this.boundEvents=[],this.sliderInput=null,this.leftLabel=o,this.rightLabel=l}setLeftLabel(e){this.leftLabel=e}setRightLabel(e){this.rightLabel=e}setLabels(e,t){this.leftLabel=e,this.rightLabel=t}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,void 0,void 0,e)}showEditor_(e,t){super.showEditor_(e,!0);const i=this.dropdownCreate_();wt.DropDownDiv.getContentDiv().appendChild(i);const s=this.getSourceBlock();if(s instanceof wt.BlockSvg){const o=s.getColour()||"",l=s.getColourTertiary()||"";wt.DropDownDiv.setColour(o,l)}wt.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),t||i.firstChild.focus({preventScroll:!0})}render_(){super.render_(),this.updateSlider_()}static createLabelInContainer(e,t){const i=document.createElement("div"),s=document.createElement("span"),o=document.createElement("span");return i.classList.add("mathNumSliderLabel"),s.textContent=e,i.appendChild(s),i.appendChild(o),t.appendChild(i),o}dropdownCreate_(){const e=document.createElement("div");e.className="mathNumSliderContainer",this.leftLabel&&uf.createLabelInContainer(this.leftLabel,e);const t=document.createElement("input");return t.setAttribute("type","range"),t.setAttribute("min",`${this.min_}`),t.setAttribute("max",`${this.max_}`),t.setAttribute("step",`${this.precision_}`),t.setAttribute("value",`${this.getValue()}`),t.setAttribute("tabindex","0"),t.className="mathNumSlider",e.appendChild(t),this.rightLabel&&uf.createLabelInContainer(this.rightLabel,e),this.sliderInput=t,this.boundEvents.push(wt.browserEvents.conditionalBind(t,"input",this,this.onSliderChange_)),e}dropdownDispose_(){for(const e of this.boundEvents)wt.browserEvents.unbind(e);this.boundEvents.length=0,this.sliderInput=null}onSliderChange_(){var t;const e=this.value_;this.setEditorValue_((t=this.sliderInput)==null?void 0:t.value,!1),this.getSourceBlock()&&wt.Events.fire(new(wt.Events.get(wt.Events.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_)),this.resizeEditor_()}updateSlider_(){this.sliderInput&&this.sliderInput.setAttribute("value",`${this.getValue()}`)}}wt.fieldRegistry.register("math_num_slider",uf);wt.Css.register(`
.mathNumSliderContainer {
  align-items: center;
  display: flex;
  height: 32px;
  justify-content: center;
  width: 150px;
}
.mathNumSliderLabel {
    color: white;
}
.mathNumSlider {
  -webkit-appearance: none;
  background: transparent; /* override white in chrome */
  margin: 4px;
  padding: 0;
  width: 100%;
}
.mathNumSlider:focus {
  outline: none;
}
/* Webkit */
.mathNumSlider::-webkit-slider-runnable-track {
  background: #ddd;
  border-radius: 5px;
  height: 10px;
}
.mathNumSlider::-webkit-slider-thumb {
  -webkit-appearance: none;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  margin-top: -7px;
  width: 24px;
}
/* Firefox */
.mathNumSlider::-moz-range-track {
  background: #ddd;
  border-radius: 5px;
  height: 10px;
}
.mathNumSlider::-moz-range-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  width: 24px;
}
.mathNumSlider::-moz-focus-outer {
  /* override the focus border style */
  border: 0;
}
/* IE */
.mathNumSlider::-ms-track {
  /* IE wont let the thumb overflow the track, so fake it */
  background: transparent;
  border-color: transparent;
  border-width: 15px 0;
  /* remove default tick marks */
  color: transparent;
  height: 10px;
  width: 100%;
  margin: -4px 0;
}
.mathNumSlider::-ms-fill-lower  {
  background: #ddd;
  border-radius: 5px;
}
.mathNumSlider::-ms-fill-upper  {
  background: #ddd;
  border-radius: 5px;
}
.mathNumSlider::-ms-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  width: 24px;
}
`);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let zt=[];const gee={type:"add_text",message0:"Add text %1 with color %2",args0:[{type:"input_value",name:"TEXT",check:"String"},{type:"input_value",name:"COLOR",check:"Colour"}],previousStatement:null,nextStatement:null,colour:160,tooltip:"",helpUrl:""};let t9="ChangeLED";zt.push(t9);wt.Blocks[t9]={init:function(){this.setColour(Nt.light_category.colour),this.appendValueInput("FIELD_ChangeLED").setCheck("Colour").appendField("Change the LED color to"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setOutput(!1),this.setTooltip("Changes Misty's LED to a specified color")}};let n9="TransitionLED";zt.push(n9);wt.Blocks[n9]={init:function(){this.setColour(Nt.light_category.colour),this.appendValueInput("COLOR1").setCheck("Colour").appendField("Transition LED from"),this.appendValueInput("COLOR2").setCheck("Colour").appendField("to"),this.appendDummyInput().appendField("using the").appendField(new wt.FieldDropdown([["Breathe","BREATHE"],["Blink","BLINK"],["Transition Once","TRANSITION_ONCE"]]),"TRANSITION_TYPE").appendField("transition"),this.appendDummyInput().appendField("for a duration of").appendField(new wt.FieldNumber(1,0,60,1),"FIELD_TransitionTime_TimeMs").appendField("secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Transition LED between two colors with the specified transition type and time.")}};let r9="DisplayImage";zt.push(r9);wt.Blocks[r9]={init:function(){this.setColour(Nt.face_category.colour),this.appendValueInput("FIELD_DisplayImage_Filename").setCheck("Face").appendField("Change face expression to: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Displays an image on Misty's screen, Alpha specifies transparency (0 is completely transparent, 1 is completely opaque) ***WARNING: MUST connect with ListFilesAvailable to select the image file to display***")}};let i9="DisplayAnimation";zt.push(i9);wt.Blocks[i9]={init:function(){this.setColour(Nt.misc_category.colour),this.appendValueInput("FIELD_DisplayAnimation_Filename").setCheck("Animation").appendField("Show this animation on Misty: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Runs a specified animation on Misty")}};let s9="MoveHead";zt.push(s9);wt.Blocks[s9]={init:function(){this.setColour(Nt.movement_category.colour),this.appendDummyInput().appendField("Move head").appendField(new wt.FieldDropdown([["Up","U"],["Down","D"]]),"FIELD_MoveHead_Pitch"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head Up or Down")}};let o9="MoveArm";zt.push(o9);wt.Blocks[o9]={init:function(){this.setColour(Nt.movement_category.colour),this.appendDummyInput().appendField("Move ").appendField(new wt.FieldDropdown([["Right","Right"],["Left","Left"]]),"FIELD_MoveArm_Arm").appendField("arm to position").appendField(new uf(45,-29,90,1,"Up","Down"),"FIELD_MoveArm_Position").appendField("at a speed of (0 to 100)").appendField(new uf(50,0,100,1,"Slow","Fast"),"FIELD_MoveArm_Velocity"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves one of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)")}};let a9="MoveArm2";zt.push(a9);wt.Blocks[a9]={init:function(){this.setColour(Nt.movement_category.colour),this.appendDummyInput().appendField("Move both arms to position").appendField(new uf(45,-29,90,1,"Up","Down"),"FIELD_MoveArm2_Position").appendField("at a speed of (0 to 100)").appendField(new uf(50,0,100,1,"Slow","Fast"),"FIELD_MoveArm2_Velocity"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)")}};let l9="BasicSlider";zt.push(l9);wt.Blocks[l9]={init:function(){this.setColour(Nt.math_category.colour),this.appendDummyInput().appendField("Slider Value: ").appendField(new uf(0,0,100,1,"Min","Max"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let u9="ArmPositionSlider";zt.push(u9);wt.Blocks[u9]={init:function(){this.setColour(Nt.math_category.colour),this.appendDummyInput().appendField(new uf(45,-29,90,1,"Up","Down"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let c9="SpeedSlider";zt.push(c9);wt.Blocks[c9]={init:function(){this.setColour(Nt.math_category.colour),this.appendDummyInput().appendField(new uf(1,1,100,1,"Slow","Fast"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let h9="TimeSlider";zt.push(h9);wt.Blocks[h9]={init:function(){this.setColour(Nt.math_category.colour),this.appendDummyInput().appendField(new uf(1,1,60,1,"Short","Long"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let d9="HeadPitchSlider";zt.push(d9);wt.Blocks[d9]={init:function(){this.setColour(Nt.math_category.colour),this.appendDummyInput().appendField(new uf(0,-40,25,1,"Up","Down"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let p9="HeadRollSlider";zt.push(p9);wt.Blocks[p9]={init:function(){this.setColour(Nt.math_category.colour),this.appendDummyInput().appendField(new uf(0,-40,40,1,"Right","Left"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let f9="HeadYawSlider";zt.push(f9);wt.Blocks[f9]={init:function(){this.setColour(Nt.math_category.colour),this.appendDummyInput().appendField(new uf(0,-81,81,1,"Right","Left"),"FIELD_slider_value"),this.setInputsInline(!1),this.setOutput(!0,null)}};let m9="MoveArms2";zt.push(m9);wt.Blocks[m9]={init:function(){var n=this.workspace.newBlock("ArmPositionSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("SpeedSlider");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("ArmPositionSlider");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection,l=this.workspace.newBlock("SpeedSlider");l.setShadow(!0),l.initSvg(),l.render();var u=l.outputConnection;this.setColour(Nt.movement_category.colour),this.appendValueInput("FIELD_MoveArm_LeftPosition").setCheck("Number").appendField("Left Arm Position");var d=this.getInput("FIELD_MoveArm_LeftPosition").connection;d.connect(e),this.appendValueInput("FIELD_MoveArm_LeftVelocity").setCheck("Number").appendField("Left Arm Speed");var _=this.getInput("FIELD_MoveArm_LeftVelocity").connection;_.connect(i),this.appendValueInput("FIELD_MoveArm_RightPosition").setCheck("Number").appendField("Right Arm Position");var p=this.getInput("FIELD_MoveArm_RightPosition").connection;p.connect(o),this.appendValueInput("FIELD_MoveArm_RightVelocity").setCheck("Number").appendField("Right Arm Speed");var _=this.getInput("FIELD_MoveArm_RightVelocity").connection;_.connect(u),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed")}};let g9="MoveArm3";zt.push(g9);wt.Blocks[g9]={init:function(){var n=this.workspace.newBlock("ArmPositionSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("SpeedSlider");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection;this.appendDummyInput().appendField("Move Arm: ").appendField(new wt.FieldDropdown([["Right","Right"],["Left","Left"]]),"FIELD_MoveArm_Arm"),this.setColour(Nt.movement_category.colour),this.appendValueInput("FIELD_MoveArm_Position").setCheck("Number").appendField("Left Arm Position");var s=this.getInput("FIELD_MoveArm_Position").connection;s.connect(e),this.appendValueInput("FIELD_MoveArm_Velocity").setCheck("Number").appendField("Left Arm Speed");var o=this.getInput("FIELD_MoveArm_Velocity").connection;o.connect(i),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed")}};let _9="DriveTime";zt.push(_9);wt.Blocks[_9]={init:function(){this.setColour(Nt.movement_category.colour),this.appendDummyInput().appendField("Move ").appendField(new wt.FieldDropdown([["Forward","F"],["Backward","B"]]),"FIELD_DriveTime_Direction").appendField("at a speed of (0 to 100)").appendField(new wt.FieldNumber(25,0,100,1),"FIELD_DriveTime_Velocity").appendField("for a duration of").appendField(new wt.FieldNumber(1,0,60,1),"FIELD_DriveTime_TimeMs").appendField("secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty straight in a specified direction at a specified speed for a specified amount of time (1000ms = 1 second)")}};let y9="MoveHead3";zt.push(y9);wt.Blocks[y9]={init:function(){var n=this.workspace.newBlock("HeadPitchSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("HeadRollSlider");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("HeadYawSlider");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection,l=this.workspace.newBlock("TimeSlider");l.setShadow(!0),l.initSvg(),l.render();var u=l.outputConnection;this.setColour(Nt.movement_category.colour),this.appendDummyInput("FIELD_TEXT_IGNORE").appendField("Move head"),this.appendValueInput("FIELD_MoveHead_Pitch").setCheck("Number").appendField("Look Up/Down:");var d=this.getInput("FIELD_MoveHead_Pitch").connection;d.connect(e),this.appendValueInput("FIELD_MoveHead_Roll").setCheck("Number").appendField("Tilt Left/Right:");var p=this.getInput("FIELD_MoveHead_Roll").connection;p.connect(i),this.appendValueInput("FIELD_MoveHead_Yaw").setCheck("Number").appendField("Look Right/Left:");var _=this.getInput("FIELD_MoveHead_Yaw").connection;_.connect(o),this.appendValueInput("FIELD_MoveHead_Time").setCheck("Number").appendField("Time (seconds):");var v=this.getInput("FIELD_MoveHead_Time").connection;v.connect(u),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head a specified amount of degrees with roll, pitch, and/or yaw")}};let v9="DriveTime2";zt.push(v9);wt.Blocks[v9]={init:function(){var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("math_number");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("math_number");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection;this.setColour(Nt.movement_category.colour),this.appendValueInput("FIELD_DriveTime_Velocity").setCheck("Number").appendField("Move at a speed of (-100 to 100)");var l=this.getInput("FIELD_DriveTime_Velocity").connection;l.connect(e),this.appendValueInput("FIELD_DriveTime_Angular").setCheck("Number").appendField("with angular velocity of (-100 CW to 100 CCW)");var u=this.getInput("FIELD_DriveTime_Angular").connection;u.connect(i),this.appendValueInput("FIELD_DriveTime_TimeMs").setCheck("Number").appendField("for a duration of secs");var d=this.getInput("FIELD_DriveTime_TimeMs").connection;d.connect(o),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty forward (positive speed) or backward (negative speed) with possible turning using angular velocity (0 for straight) for the specified duration (1000 ms = 1 second)")}};let b9="Turn";zt.push(b9);wt.Blocks[b9]={init:function(){this.setColour(Nt.movement_category.colour),this.appendDummyInput().appendField("Turn").appendField(new wt.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction").appendField("for time of").appendField(new wt.FieldNumber(4500),"FIELD_Turn_Duration").appendField("milliseconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)")}};let T9="Turn2";zt.push(T9);wt.Blocks[T9]={init:function(){var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.setColour(Nt.movement_category.colour),this.appendDummyInput().appendField("Turn").appendField(new wt.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction"),this.appendValueInput("FIELD_Turn_Duration").setCheck("Number").appendField("for time of");var t=this.getInput("FIELD_Turn_Duration").connection;t.connect(e),this.appendDummyInput().appendField("milliseconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)")}};let S9="Speak";zt.push(S9);wt.Blocks[S9]={init:function(){this.setColour(Nt.speech_category.colour),this.appendValueInput("FIELD_Speak_Text").setCheck("String").appendField("Speak: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given input text")}};let E9="SpeakDefault";zt.push(E9);wt.Blocks[E9]={init:function(){this.setColour(Nt.speech_category.colour),this.appendDummyInput().appendField("Speak: ").appendField(new wt.FieldDropdown([["Hi","Hi"],["Hello","Hello"],["How are you today?","How are you today?"],["Goodbye","Goodbye"]]),"FIELD_SpeakDefault_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given selected default text")}};let x9="TurnOnFlashlight";zt.push(x9);wt.Blocks[x9]={init:function(){this.setColour(Nt.light_category.colour),this.appendDummyInput().appendField("Turn on flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn on flashlight")}};let w9="TurnOffFlashlight";zt.push(w9);wt.Blocks[w9]={init:function(){this.setColour(Nt.light_category.colour),this.appendDummyInput().appendField("Turn off flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn off flashlight")}};let $9="WaitForSeconds";zt.push($9);wt.Blocks[$9]={init:function(){this.appendDummyInput().appendField("wait for"),this.appendDummyInput().setAlign(wt.ALIGN_CENTRE).appendField(new wt.FieldNumber(0,-1/0,1/0,.1),"NumSeconds"),this.appendDummyInput().appendField("Seconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(Nt.movement_category.colour),this.setTooltip("Delay the execution of the next block by some number of seconds")}};let C9="PlayAudio";zt.push(C9);wt.Blocks[C9]={init:function(){this.setColour(Nt.audio_category.colour),this.appendValueInput("FIELD_PlayAudio_Filename").setCheck("Audio").appendField("Play audio: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};let M9="SetVolume";zt.push(M9);wt.Blocks[M9]={init:function(){this.setColour(Nt.audio_category.colour);var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.appendValueInput("FIELD_Volume").setCheck("Number").appendField("Set volume to (0-100): ");var t=this.getInput("FIELD_Volume").connection;t.connect(e),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Adjusts Misty's volume level for audio playback")}};let A9="DisplayText";zt.push(A9);wt.Blocks[A9]={init:function(){this.setColour(Nt.face_category.colour),this.appendDummyInput().appendField("Display Text: ").appendField(new wt.FieldTextInput("default"),"FIELD_DisplayText_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};let I9="ClearText";zt.push(I9);wt.Blocks[I9]={init:function(){this.setColour(Nt.face_category.colour),this.appendDummyInput().appendField("Clear Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};let R9="Start";zt.push(R9);wt.Blocks[R9]={init:function(){this.setStyle("hat_blocks"),this.appendDummyInput().appendField("Program starts here"),this.setColour(Nt.trigger_category.colour),this.setTooltip("This is the starting block"),this.setNextStatement(!0,null),this.setHelpUrl(""),this.setDeletable(!1)}};let k9="FrontLeftBumperPress";zt.push(k9);wt.Blocks[k9]={init:function(){this.setStyle("hat_blocks"),this.setColour(Nt.trigger_category.colour),this.appendDummyInput().appendField("Front Left Bumper Pressed"),this.setNextStatement(!0,null),this.setTooltip("")}};let O9="FrontRightBumperPress";zt.push(O9);wt.Blocks[O9]={init:function(){this.setStyle("hat_blocks"),this.setColour(Nt.trigger_category.colour),this.appendDummyInput().appendField("Front Right Bumper Pressed"),this.setNextStatement(!0,null),this.setTooltip("")}};let L9="RearLeftBumperPress";zt.push(L9);wt.Blocks[L9]={init:function(){this.setStyle("hat_blocks"),this.setColour(Nt.trigger_category.colour),this.appendDummyInput().appendField("Rear Left Bumper Pressed"),this.setNextStatement(!0,null),this.setTooltip("")}};let D9="RearRightBumperPress";zt.push(D9);wt.Blocks[D9]={init:function(){this.setStyle("hat_blocks"),this.setColour(Nt.trigger_category.colour),this.appendDummyInput().appendField("Right Rear Bumper Pressed"),this.setNextStatement(!0,null),this.setTooltip("")}};let N9="eyes_acceptance";zt.push(N9);wt.Blocks[N9]={init:function(){this.appendDummyInput().appendField("Expression: acceptance"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'acceptance'")}};let B9="eyes_admiration";zt.push(B9);wt.Blocks[B9]={init:function(){this.appendDummyInput().appendField("Expression: admiration"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'admiration'")}};let P9="eyes_amazement";zt.push(P9);wt.Blocks[P9]={init:function(){this.appendDummyInput().appendField("Expression: amazement"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'amazement'")}};let F9="eyes_anger";zt.push(F9);wt.Blocks[F9]={init:function(){this.appendDummyInput().appendField("Expression: anger"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'anger'")}};let z9="eyes_annoyed";zt.push(z9);wt.Blocks[z9]={init:function(){this.appendDummyInput().appendField("Expression: annoyed"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'annoyed'")}};let U9="eyes_anticipation";zt.push(U9);wt.Blocks[U9]={init:function(){this.appendDummyInput().appendField("Expression: anticipation"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'anticipation'")}};let H9="eyes_apprehension";zt.push(H9);wt.Blocks[H9]={init:function(){this.appendDummyInput().appendField("Expression: apprehension"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'apprehension'")}};let G9="eyes_boredom";zt.push(G9);wt.Blocks[G9]={init:function(){this.appendDummyInput().appendField("Expression: boredom"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'boredom'")}};let W9="eyes_default";zt.push(W9);wt.Blocks[W9]={init:function(){this.appendDummyInput().appendField("Expression: default"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'default'")}};let V9="eyes_disgust";zt.push(V9);wt.Blocks[V9]={init:function(){this.appendDummyInput().appendField("Expression: disgust"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'disgust'")}};let j9="eyes_distraction";zt.push(j9);wt.Blocks[j9]={init:function(){this.appendDummyInput().appendField("Expression: distraction"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'distraction'")}};let X9="eyes_ecstasy_frame_1";zt.push(X9);wt.Blocks[X9]={init:function(){this.appendDummyInput().appendField("Expression: ecstasy 1"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstasy 1'")}};let Y9="eyes_ecstasy_frame_2";zt.push(Y9);wt.Blocks[Y9]={init:function(){this.appendDummyInput().appendField("Expression: ecstasy 2"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstasy 2'")}};let K9="eyes_fear";zt.push(K9);wt.Blocks[K9]={init:function(){this.appendDummyInput().appendField("Expression: fear"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'fear'")}};let J9="eyes_grief";zt.push(J9);wt.Blocks[J9]={init:function(){this.appendDummyInput().appendField("Expression: grief"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'grief'")}};let q9="eyes_interest";zt.push(q9);wt.Blocks[q9]={init:function(){this.appendDummyInput().appendField("Expression: interest"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'interest'")}};let Q9="eyes_joy";zt.push(Q9);wt.Blocks[Q9]={init:function(){this.appendDummyInput().appendField("Expression: joy"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'joy'")}};let Z9="eyes_loathing";zt.push(Z9);wt.Blocks[Z9]={init:function(){this.appendDummyInput().appendField("Expression: loathing"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'loathing'")}};let eV="eyes_pensiveness";zt.push(eV);wt.Blocks[eV]={init:function(){this.appendDummyInput().appendField("Expression: pensiveness"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'pensiveness'")}};let tV="eyes_rage";zt.push(tV);wt.Blocks[tV]={init:function(){this.appendDummyInput().appendField("Expression: rage eyes"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'rage eyes'")}};let nV="eyes_sad";zt.push(nV);wt.Blocks[nV]={init:function(){this.appendDummyInput().appendField("Expression: sad"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'sad'")}};let rV="eyes_serenity";zt.push(rV);wt.Blocks[rV]={init:function(){this.appendDummyInput().appendField("Expression: serenity"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'serenity'")}};let iV="eyes_surprise";zt.push(iV);wt.Blocks[iV]={init:function(){this.appendDummyInput().appendField("Expression: surprise"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'surprise'")}};let sV="eyes_terror";zt.push(sV);wt.Blocks[sV]={init:function(){this.appendDummyInput().appendField("Expression: terror"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'terror'")}};let oV="eyes_trust";zt.push(oV);wt.Blocks[oV]={init:function(){this.appendDummyInput().appendField("Expression: trust"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'trust'")}};let aV="eyes_vigilance";zt.push(aV);wt.Blocks[aV]={init:function(){this.appendDummyInput().appendField("Expression: vigilance"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'vigilance'")}};let lV="e_Sleeping";zt.push(lV);wt.Blocks[lV]={init:function(){this.appendDummyInput().appendField("Expression: sleeping"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'sleeping'")}};let uV="e_SleepingZZZ";zt.push(uV);wt.Blocks[uV]={init:function(){this.appendDummyInput().appendField("Expression: sleeping ZZZ"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'sleeping ZZZ'")}};let cV="e_Contempt";zt.push(cV);wt.Blocks[cV]={init:function(){this.appendDummyInput().appendField("Expression: contempt"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'contempt'")}};let hV="e_ContentLeft";zt.push(hV);wt.Blocks[hV]={init:function(){this.appendDummyInput().appendField("Expression: content (left)"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'content (left)'")}};let dV="e_ContentRight";zt.push(dV);wt.Blocks[dV]={init:function(){this.appendDummyInput().appendField("Expression: content (right)"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'content (right)'")}};let pV="e_Disoriented";zt.push(pV);wt.Blocks[pV]={init:function(){this.appendDummyInput().appendField("Expression: disoriented"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'disoriented'")}};let fV="e_EcstacyHilarious";zt.push(fV);wt.Blocks[fV]={init:function(){this.appendDummyInput().appendField("Expression: ecstacy hilarious"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstacy hilarious'")}};let mV="e_EcstacyStarryEyed";zt.push(mV);wt.Blocks[mV]={init:function(){this.appendDummyInput().appendField("Expression: ecstacy starry eyed"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstacy starry eyed'")}};let gV="e_JoyGoofy";zt.push(gV);wt.Blocks[gV]={init:function(){this.appendDummyInput().appendField("Expression: joy goofy"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy'")}};let _V="e_JoyGoofy2";zt.push(_V);wt.Blocks[_V]={init:function(){this.appendDummyInput().appendField("Expression: joy goofy 2"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy 2'")}};let yV="e_JoyGoofy3";zt.push(yV);wt.Blocks[yV]={init:function(){this.appendDummyInput().appendField("Expression: joy goofy 3"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy 3'")}};let vV="e_Love";zt.push(vV);wt.Blocks[vV]={init:function(){this.appendDummyInput().appendField("Expression: love"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'love'")}};let bV="e_Rage";zt.push(bV);wt.Blocks[bV]={init:function(){this.appendDummyInput().appendField("Expression: rage"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'rage'")}};let TV="e_Rage2";zt.push(TV);wt.Blocks[TV]={init:function(){this.appendDummyInput().appendField("Expression: rage 2"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'rage 2'")}};let SV="e_Rage3";zt.push(SV);wt.Blocks[SV]={init:function(){this.appendDummyInput().appendField("Expression: rage 3"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'rage 3'")}};let EV="e_Rage4";zt.push(EV);wt.Blocks[EV]={init:function(){this.appendDummyInput().appendField("Expression: rage 4"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'rage 4'")}};let xV="e_RemorseShame";zt.push(xV);wt.Blocks[xV]={init:function(){this.appendDummyInput().appendField("Expression: remorse shame"),this.setOutput(!0,"Face"),this.setColour(Nt.face_category.colour),this.setTooltip("Represents the facial expression 'remorse shame'")}};wt.Blocks["animation_sleepy.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Sleeping"),this.setOutput(!0,"Animation"),this.setColour(Nt.face_category.colour),this.setTooltip("Run the animation 'sleepy'")}};wt.Blocks["animation_dancing.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Dancing"),this.setOutput(!0,"Animation"),this.setColour(Nt.face_category.colour),this.setTooltip("Run the animation 'dancing'")}};wt.Blocks["animation_spooked.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Spooked"),this.setOutput(!0,"Animation"),this.setColour(Nt.face_category.colour),this.setTooltip("Run the animation 'spooked'")}};let wV="s_Acceptance";zt.push(wV);wt.Blocks[wV]={init:function(){this.appendDummyInput().appendField("Sound: acceptance"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'acceptance'")}};let $V="s_Amazement";zt.push($V);wt.Blocks[$V]={init:function(){this.appendDummyInput().appendField("Sound: amazement"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'amazement'")}};let CV="s_Amazement2";zt.push(CV);wt.Blocks[CV]={init:function(){this.appendDummyInput().appendField("Sound: amazement 2"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'amazement 2'")}};let MV="s_Anger";zt.push(MV);wt.Blocks[MV]={init:function(){this.appendDummyInput().appendField("Sound: anger"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'anger'")}};let AV="s_Anger2";zt.push(AV);wt.Blocks[AV]={init:function(){this.appendDummyInput().appendField("Sound: anger 2"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'anger 2'")}};let IV="s_Anger3";zt.push(IV);wt.Blocks[IV]={init:function(){this.appendDummyInput().appendField("Sound: anger 3"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'anger 3'")}};let RV="s_Anger4";zt.push(RV);wt.Blocks[RV]={init:function(){this.appendDummyInput().appendField("Sound: anger 4"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'anger 4'")}};let kV="s_Annoyance";zt.push(kV);wt.Blocks[kV]={init:function(){this.appendDummyInput().appendField("Sound: annoyance"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance'")}};let OV="s_Annoyance2";zt.push(OV);wt.Blocks[OV]={init:function(){this.appendDummyInput().appendField("Sound: annoyance 2"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 2'")}};let LV="s_Annoyance3";zt.push(LV);wt.Blocks[LV]={init:function(){this.appendDummyInput().appendField("Sound: annoyance 3"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 3'")}};let DV="s_Annoyance4";zt.push(DV);wt.Blocks[DV]={init:function(){this.appendDummyInput().appendField("Sound: annoyance 4"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 4'")}};let NV="s_Awe";zt.push(NV);wt.Blocks[NV]={init:function(){this.appendDummyInput().appendField("Sound: awe"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'awe'")}};let BV="s_Awe2";zt.push(BV);wt.Blocks[BV]={init:function(){this.appendDummyInput().appendField("Sound: awe 2"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'awe 2'")}};let PV="s_Awe3";zt.push(PV);wt.Blocks[PV]={init:function(){this.appendDummyInput().appendField("Sound: awe 3"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'awe 3'")}};let FV="s_Boredom";zt.push(FV);wt.Blocks[FV]={init:function(){this.appendDummyInput().appendField("Sound: boredom"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'boredom'")}};let zV="s_Disapproval";zt.push(zV);wt.Blocks[zV]={init:function(){this.appendDummyInput().appendField("Sound: disapproval"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'disapproval'")}};let UV="s_Disgust";zt.push(UV);wt.Blocks[UV]={init:function(){this.appendDummyInput().appendField("Sound: disgust"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'disgust'")}};let HV="s_Disgust2";zt.push(HV);wt.Blocks[HV]={init:function(){this.appendDummyInput().appendField("Sound: disgust 2"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'disgust 2'")}};let GV="s_Disgust3";zt.push(GV);wt.Blocks[GV]={init:function(){this.appendDummyInput().appendField("Sound: disgust 3"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'disgust 3'")}};let WV="s_DisorientedConfused";zt.push(WV);wt.Blocks[WV]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused'")}};let VV="s_DisorientedConfused2";zt.push(VV);wt.Blocks[VV]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 2"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 2'")}};let jV="s_DisorientedConfused3";zt.push(jV);wt.Blocks[jV]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 3"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 3'")}};let XV="s_DisorientedConfused4";zt.push(XV);wt.Blocks[XV]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 4"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 4'")}};let YV="s_DisorientedConfused5";zt.push(YV);wt.Blocks[YV]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 5"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 5'")}};let KV="s_DisorientedConfused6";zt.push(KV);wt.Blocks[KV]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 6"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 6'")}};let JV="s_Distraction";zt.push(JV);wt.Blocks[JV]={init:function(){this.appendDummyInput().appendField("Sound: distraction"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'distraction'")}};let qV="s_Ecstacy";zt.push(qV);wt.Blocks[qV]={init:function(){this.appendDummyInput().appendField("Sound: ecstacy"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'ecstacy'")}};let QV="s_Ecstacy2";zt.push(QV);wt.Blocks[QV]={init:function(){this.appendDummyInput().appendField("Sound: ecstacy 2"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'ecstacy 2'")}};let ZV="s_Fear";zt.push(ZV);wt.Blocks[ZV]={init:function(){this.appendDummyInput().appendField("Sound: fear"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'fear'")}};let e8="s_Grief";zt.push(e8);wt.Blocks[e8]={init:function(){this.appendDummyInput().appendField("Sound: grief"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'grief'")}};let t8="s_Grief2";zt.push(t8);wt.Blocks[t8]={init:function(){this.appendDummyInput().appendField("Sound: grief 2"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'grief 2'")}};let n8="s_Grief3";zt.push(n8);wt.Blocks[n8]={init:function(){this.appendDummyInput().appendField("Sound: grief 3"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'grief 3'")}};let r8="s_Grief4";zt.push(r8);wt.Blocks[r8]={init:function(){this.appendDummyInput().appendField("Sound: grief 4"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'grief 4'")}};let i8="s_Joy";zt.push(i8);wt.Blocks[i8]={init:function(){this.appendDummyInput().appendField("Sound: joy"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'joy'")}};let s8="s_Joy2";zt.push(s8);wt.Blocks[s8]={init:function(){this.appendDummyInput().appendField("Sound: joy 2"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'joy 2'")}};let o8="s_Joy3";zt.push(o8);wt.Blocks[o8]={init:function(){this.appendDummyInput().appendField("Sound: joy 3"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'joy 3'")}};let a8="s_Joy4";zt.push(a8);wt.Blocks[a8]={init:function(){this.appendDummyInput().appendField("Sound: joy 4"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'joy 4'")}};let l8="s_Loathing";zt.push(l8);wt.Blocks[l8]={init:function(){this.appendDummyInput().appendField("Sound: loathing"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'loathing'")}};let u8="s_Love";zt.push(u8);wt.Blocks[u8]={init:function(){this.appendDummyInput().appendField("Sound: love"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'love'")}};let c8="s_PhraseByeBye";zt.push(c8);wt.Blocks[c8]={init:function(){this.appendDummyInput().appendField("Sound: Bye Bye"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Bye Bye'")}};let h8="s_PhraseEvilAhHa";zt.push(h8);wt.Blocks[h8]={init:function(){this.appendDummyInput().appendField("Sound: Evil Ah Ha"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Evil Ah Ha'")}};let d8="s_PhraseHello";zt.push(d8);wt.Blocks[d8]={init:function(){this.appendDummyInput().appendField("Sound: Hello"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Hello'")}};let p8="s_PhraseNoNoNo";zt.push(p8);wt.Blocks[p8]={init:function(){this.appendDummyInput().appendField("Sound: No No No"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: No No No'")}};let f8="s_PhraseOopsy";zt.push(f8);wt.Blocks[f8]={init:function(){this.appendDummyInput().appendField("Sound: Oopsy"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Oopsy'")}};let m8="s_PhraseOwOwOw";zt.push(m8);wt.Blocks[m8]={init:function(){this.appendDummyInput().appendField("Sound: Ow Ow Ow"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Ow Ow Ow'")}};let g8="s_PhraseOwwww";zt.push(g8);wt.Blocks[g8]={init:function(){this.appendDummyInput().appendField("Sound: Owwww"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Owwww'")}};let _8="s_PhraseUhOh";zt.push(_8);wt.Blocks[_8]={init:function(){this.appendDummyInput().appendField("Sound: Uh Oh"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Uh Oh'")}};let y8="s_Rage";zt.push(y8);wt.Blocks[y8]={init:function(){this.appendDummyInput().appendField("Sound: rage"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'rage'")}};let v8="s_Sadness";zt.push(v8);wt.Blocks[v8]={init:function(){this.appendDummyInput().appendField("Sound: sadness"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'sadness'")}};let b8="s_Sadness2";zt.push(b8);wt.Blocks[b8]={init:function(){this.appendDummyInput().appendField("Sound: sadness 2"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 2'")}};let T8="s_Sadness3";zt.push(T8);wt.Blocks[T8]={init:function(){this.appendDummyInput().appendField("Sound: sadness 3"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 3'")}};let S8="s_Sadness4";zt.push(S8);wt.Blocks[S8]={init:function(){this.appendDummyInput().appendField("Sound: sadness 4"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 4'")}};let E8="s_Sadness5";zt.push(E8);wt.Blocks[E8]={init:function(){this.appendDummyInput().appendField("Sound: sadness 5"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 5'")}};let x8="s_Sadness6";zt.push(x8);wt.Blocks[x8]={init:function(){this.appendDummyInput().appendField("Sound: sadness 6"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 6'")}};let w8="s_Sadness7";zt.push(w8);wt.Blocks[w8]={init:function(){this.appendDummyInput().appendField("Sound: sadness 7"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 7'")}};let $8="s_Sleepy";zt.push($8);wt.Blocks[$8]={init:function(){this.appendDummyInput().appendField("Sound: sleepy"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy'")}};let C8="s_Sleepy2";zt.push(C8);wt.Blocks[C8]={init:function(){this.appendDummyInput().appendField("Sound: sleepy 2"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 2'")}};let M8="s_Sleepy3";zt.push(M8);wt.Blocks[M8]={init:function(){this.appendDummyInput().appendField("Sound: sleepy 3"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 3'")}};let A8="s_Sleepy4";zt.push(A8);wt.Blocks[A8]={init:function(){this.appendDummyInput().appendField("Sound: sleepy 4"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 4'")}};let I8="s_SleepySnore";zt.push(I8);wt.Blocks[I8]={init:function(){this.appendDummyInput().appendField("Sound: sleepy snore"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy snore'")}};let R8="s_SystemCameraShutter";zt.push(R8);wt.Blocks[R8]={init:function(){this.appendDummyInput().appendField("Sound: system camera shutter"),this.setOutput(!0,"Audio"),this.setColour(Nt.audio_category.colour),this.setTooltip("Represents the audio 'system camera shutter'")}};const _ee=wt.common.createBlockDefinitionsFromJsonArray([gee]),yee=zt;/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HI=Object.create(null);HI.add_text=function(n,e){const t=e.valueToCode(n,"TEXT",QS.Order.NONE)||"''",i=e.valueToCode(n,"COLOR",QS.Order.ATOMIC)||"'#ffffff'";return`${e.provideFunction_("addText",`function ${e.FUNCTION_NAME_PLACEHOLDER_}(text, color) {

  // Add text to the output area.
  const outputDiv = document.getElementById('output');
  const textEl = document.createElement('p');
  textEl.innerText = text;
  textEl.style.color = color;
  outputDiv.appendChild(textEl);
}`)}(${t}, ${i});
`};HI.Start=function(n){return""};var vee={BASE_URL:"/gpu-programming/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const hz=n=>{let e;const t=new Set,i=(_,v)=>{const b=typeof _=="function"?_(e):_;if(!Object.is(b,e)){const E=e;e=v??(typeof b!="object"||b===null)?b:Object.assign({},e,b),t.forEach(C=>C(e,E))}},s=()=>e,d={setState:i,getState:s,getInitialState:()=>p,subscribe:_=>(t.add(_),()=>t.delete(_)),destroy:()=>{(vee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},p=e=n(i,s,d);return d},bee=n=>n?hz(n):hz;var k8={exports:{}},O8={},L8={exports:{}},D8={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS=ge;function Tee(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var See=typeof Object.is=="function"?Object.is:Tee,Eee=ZS.useState,xee=ZS.useEffect,wee=ZS.useLayoutEffect,$ee=ZS.useDebugValue;function Cee(n,e){var t=e(),i=Eee({inst:{value:t,getSnapshot:e}}),s=i[0].inst,o=i[1];return wee(function(){s.value=t,s.getSnapshot=e,Yk(s)&&o({inst:s})},[n,t,e]),xee(function(){return Yk(s)&&o({inst:s}),n(function(){Yk(s)&&o({inst:s})})},[n]),$ee(t),t}function Yk(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!See(n,t)}catch{return!0}}function Mee(n,e){return e()}var Aee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Mee:Cee;D8.useSyncExternalStore=ZS.useSyncExternalStore!==void 0?ZS.useSyncExternalStore:Aee;L8.exports=D8;var Iee=L8.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GI=ge,Ree=Iee;function kee(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Oee=typeof Object.is=="function"?Object.is:kee,Lee=Ree.useSyncExternalStore,Dee=GI.useRef,Nee=GI.useEffect,Bee=GI.useMemo,Pee=GI.useDebugValue;O8.useSyncExternalStoreWithSelector=function(n,e,t,i,s){var o=Dee(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=Bee(function(){function d(E){if(!p){if(p=!0,_=E,E=i(E),s!==void 0&&l.hasValue){var C=l.value;if(s(C,E))return v=C}return v=E}if(C=v,Oee(_,E))return C;var M=i(E);return s!==void 0&&s(C,M)?C:(_=E,v=M)}var p=!1,_,v,b=t===void 0?null:t;return[function(){return d(e())},b===null?void 0:function(){return d(b())}]},[e,t,i,s]);var u=Lee(n,o[0],o[1]);return Nee(function(){l.hasValue=!0,l.value=u},[u]),Pee(u),u};k8.exports=O8;var Fee=k8.exports;const zee=O1(Fee);var N8={BASE_URL:"/gpu-programming/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:Uee}=Vr,{useSyncExternalStoreWithSelector:Hee}=zee;let dz=!1;const Gee=n=>n;function Wee(n,e=Gee,t){(N8?"production":void 0)!=="production"&&t&&!dz&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),dz=!0);const i=Hee(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return Uee(i),i}const pz=n=>{(N8?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?bee(n):n,t=(i,s)=>Wee(e,i,s);return Object.assign(t,e),t},Vee=n=>n?pz(n):pz;var SB={},WI={};(function(n){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",t=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",i="["+e+"]["+t+"]*",s=new RegExp("^"+i+"$"),o=function(u,d){const p=[];let _=d.exec(u);for(;_;){const v=[];v.startIndex=d.lastIndex-_[0].length;const b=_.length;for(let E=0;E<b;E++)v.push(_[E]);p.push(v),_=d.exec(u)}return p},l=function(u){const d=s.exec(u);return!(d===null||typeof d>"u")};n.isExist=function(u){return typeof u<"u"},n.isEmptyObject=function(u){return Object.keys(u).length===0},n.merge=function(u,d,p){if(d){const _=Object.keys(d),v=_.length;for(let b=0;b<v;b++)p==="strict"?u[_[b]]=[d[_[b]]]:u[_[b]]=d[_[b]]}},n.getValue=function(u){return n.isExist(u)?u:""},n.isName=l,n.getAllMatches=o,n.nameRegexp=i})(WI);const EB=WI,jee={allowBooleanAttributes:!1,unpairedTags:[]};SB.validate=function(n,e){e=Object.assign({},jee,e);const t=[];let i=!1,s=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let o=0;o<n.length;o++)if(n[o]==="<"&&n[o+1]==="?"){if(o+=2,o=mz(n,o),o.err)return o}else if(n[o]==="<"){let l=o;if(o++,n[o]==="!"){o=gz(n,o);continue}else{let u=!1;n[o]==="/"&&(u=!0,o++);let d="";for(;o<n.length&&n[o]!==">"&&n[o]!==" "&&n[o]!=="	"&&n[o]!==`
`&&n[o]!=="\r";o++)d+=n[o];if(d=d.trim(),d[d.length-1]==="/"&&(d=d.substring(0,d.length-1),o--),!ete(d)){let v;return d.trim().length===0?v="Invalid space after '<'.":v="Tag '"+d+"' is an invalid name.",Mh("InvalidTag",v,Df(n,o))}const p=Kee(n,o);if(p===!1)return Mh("InvalidAttr","Attributes for '"+d+"' have open quote.",Df(n,o));let _=p.value;if(o=p.index,_[_.length-1]==="/"){const v=o-_.length;_=_.substring(0,_.length-1);const b=_z(_,e);if(b===!0)i=!0;else return Mh(b.err.code,b.err.msg,Df(n,v+b.err.line))}else if(u)if(p.tagClosed){if(_.trim().length>0)return Mh("InvalidTag","Closing tag '"+d+"' can't have attributes or invalid starting.",Df(n,l));{const v=t.pop();if(d!==v.tagName){let b=Df(n,v.tagStartPos);return Mh("InvalidTag","Expected closing tag '"+v.tagName+"' (opened in line "+b.line+", col "+b.col+") instead of closing tag '"+d+"'.",Df(n,l))}t.length==0&&(s=!0)}}else return Mh("InvalidTag","Closing tag '"+d+"' doesn't have proper closing.",Df(n,o));else{const v=_z(_,e);if(v!==!0)return Mh(v.err.code,v.err.msg,Df(n,o-_.length+v.err.line));if(s===!0)return Mh("InvalidXml","Multiple possible root nodes found.",Df(n,o));e.unpairedTags.indexOf(d)!==-1||t.push({tagName:d,tagStartPos:l}),i=!0}for(o++;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="!"){o++,o=gz(n,o);continue}else if(n[o+1]==="?"){if(o=mz(n,++o),o.err)return o}else break;else if(n[o]==="&"){const v=Qee(n,o);if(v==-1)return Mh("InvalidChar","char '&' is not expected.",Df(n,o));o=v}else if(s===!0&&!fz(n[o]))return Mh("InvalidXml","Extra text at the end",Df(n,o));n[o]==="<"&&o--}}else{if(fz(n[o]))continue;return Mh("InvalidChar","char '"+n[o]+"' is not expected.",Df(n,o))}if(i){if(t.length==1)return Mh("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",Df(n,t[0].tagStartPos));if(t.length>0)return Mh("InvalidXml","Invalid '"+JSON.stringify(t.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Mh("InvalidXml","Start tag expected.",1);return!0};function fz(n){return n===" "||n==="	"||n===`
`||n==="\r"}function mz(n,e){const t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){const i=n.substr(t,e-t);if(e>5&&i==="xml")return Mh("InvalidXml","XML declaration allowed only at the start of the document.",Df(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}function gz(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}const Xee='"',Yee="'";function Kee(n,e){let t="",i="",s=!1;for(;e<n.length;e++){if(n[e]===Xee||n[e]===Yee)i===""?i=n[e]:i!==n[e]||(i="");else if(n[e]===">"&&i===""){s=!0;break}t+=n[e]}return i!==""?!1:{value:t,index:e,tagClosed:s}}const Jee=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function _z(n,e){const t=EB.getAllMatches(n,Jee),i={};for(let s=0;s<t.length;s++){if(t[s][1].length===0)return Mh("InvalidAttr","Attribute '"+t[s][2]+"' has no space in starting.",dx(t[s]));if(t[s][3]!==void 0&&t[s][4]===void 0)return Mh("InvalidAttr","Attribute '"+t[s][2]+"' is without value.",dx(t[s]));if(t[s][3]===void 0&&!e.allowBooleanAttributes)return Mh("InvalidAttr","boolean attribute '"+t[s][2]+"' is not allowed.",dx(t[s]));const o=t[s][2];if(!Zee(o))return Mh("InvalidAttr","Attribute '"+o+"' is an invalid name.",dx(t[s]));if(!i.hasOwnProperty(o))i[o]=1;else return Mh("InvalidAttr","Attribute '"+o+"' is repeated.",dx(t[s]))}return!0}function qee(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}function Qee(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,qee(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}function Mh(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}function Zee(n){return EB.isName(n)}function ete(n){return EB.isName(n)}function Df(n,e){const t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function dx(n){return n.startIndex+n[1].length}var xB={};const B8={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,e,t){return n}},tte=function(n){return Object.assign({},B8,n)};xB.buildOptions=tte;xB.defaultOptions=B8;class nte{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}var rte=nte;const ite=WI;function ste(n,e){const t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let i=1,s=!1,o=!1,l="";for(;e<n.length;e++)if(n[e]==="<"&&!o){if(s&&lte(n,e))e+=7,[entityName,val,e]=ote(n,e+1),val.indexOf("&")===-1&&(t[dte(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&ute(n,e))e+=8;else if(s&&cte(n,e))e+=8;else if(s&&hte(n,e))e+=9;else if(ate)o=!0;else throw new Error("Invalid DOCTYPE");i++,l=""}else if(n[e]===">"){if(o?n[e-1]==="-"&&n[e-2]==="-"&&(o=!1,i--):i--,i===0)break}else n[e]==="["?s=!0:l+=n[e];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}function ote(n,e){let t="";for(;e<n.length&&n[e]!=="'"&&n[e]!=='"';e++)t+=n[e];if(t=t.trim(),t.indexOf(" ")!==-1)throw new Error("External entites are not supported");const i=n[e++];let s="";for(;e<n.length&&n[e]!==i;e++)s+=n[e];return[t,s,e]}function ate(n,e){return n[e+1]==="!"&&n[e+2]==="-"&&n[e+3]==="-"}function lte(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="N"&&n[e+4]==="T"&&n[e+5]==="I"&&n[e+6]==="T"&&n[e+7]==="Y"}function ute(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="L"&&n[e+4]==="E"&&n[e+5]==="M"&&n[e+6]==="E"&&n[e+7]==="N"&&n[e+8]==="T"}function cte(n,e){return n[e+1]==="!"&&n[e+2]==="A"&&n[e+3]==="T"&&n[e+4]==="T"&&n[e+5]==="L"&&n[e+6]==="I"&&n[e+7]==="S"&&n[e+8]==="T"}function hte(n,e){return n[e+1]==="!"&&n[e+2]==="N"&&n[e+3]==="O"&&n[e+4]==="T"&&n[e+5]==="A"&&n[e+6]==="T"&&n[e+7]==="I"&&n[e+8]==="O"&&n[e+9]==="N"}function dte(n){if(ite.isName(n))return n;throw new Error(`Invalid entity name ${n}`)}var pte=ste;const fte=/^[-+]?0x[a-fA-F0-9]+$/,mte=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const gte={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function _te(n,e={}){if(e=Object.assign({},gte,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(e.hex&&fte.test(t))return Number.parseInt(t,16);{const i=mte.exec(t);if(i){const s=i[1],o=i[2];let l=yte(i[3]);const u=i[4]||i[6];if(!e.leadingZeros&&o.length>0&&s&&t[2]!==".")return n;if(!e.leadingZeros&&o.length>0&&!s&&t[1]!==".")return n;{const d=Number(t),p=""+d;return p.search(/[eE]/)!==-1||u?e.eNotation?d:n:t.indexOf(".")!==-1?p==="0"&&l===""||p===l||s&&p==="-"+l?d:n:o?l===p||s+l===p?d:n:t===p||t===s+p?d:n}}else return n}}function yte(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substr(0,n.length-1))),n}var vte=_te;const P8=WI,px=rte,bte=pte,Tte=vte;let Ste=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,i)=>String.fromCharCode(Number.parseInt(i,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,i)=>String.fromCharCode(Number.parseInt(i,16))}},this.addExternalEntities=Ete,this.parseXml=Mte,this.parseTextData=xte,this.resolveNameSpace=wte,this.buildAttributesMap=Cte,this.isItStopNode=kte,this.replaceEntitiesValue=Ite,this.readStopNodeData=Lte,this.saveTextToParentTag=Rte,this.addChild=Ate}};function Ete(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:n[i]}}}function xte(n,e,t,i,s,o,l){if(n!==void 0&&(this.options.trimValues&&!i&&(n=n.trim()),n.length>0)){l||(n=this.replaceEntitiesValue(n));const u=this.options.tagValueProcessor(e,n,t,s,o);return u==null?n:typeof u!=typeof n||u!==n?u:this.options.trimValues?tD(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?tD(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function wte(n){if(this.options.removeNSPrefix){const e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}const $te=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Cte(n,e,t){if(!this.options.ignoreAttributes&&typeof n=="string"){const i=P8.getAllMatches(n,$te),s=i.length,o={};for(let l=0;l<s;l++){const u=this.resolveNameSpace(i[l][1]);let d=i[l][4],p=this.options.attributeNamePrefix+u;if(u.length)if(this.options.transformAttributeName&&(p=this.options.transformAttributeName(p)),p==="__proto__"&&(p="#__proto__"),d!==void 0){this.options.trimValues&&(d=d.trim()),d=this.replaceEntitiesValue(d);const _=this.options.attributeValueProcessor(u,d,e);_==null?o[p]=d:typeof _!=typeof d||_!==d?o[p]=_:o[p]=tD(d,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[p]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const l={};return l[this.options.attributesGroupName]=o,l}return o}}const Mte=function(n){n=n.replace(/\r\n?/g,`
`);const e=new px("!xml");let t=e,i="",s="";for(let o=0;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="/"){const u=qb(n,">",o,"Closing Tag is not closed.");let d=n.substring(o+2,u).trim();if(this.options.removeNSPrefix){const v=d.indexOf(":");v!==-1&&(d=d.substr(v+1))}this.options.transformTagName&&(d=this.options.transformTagName(d)),t&&(i=this.saveTextToParentTag(i,t,s));const p=s.substring(s.lastIndexOf(".")+1);if(d&&this.options.unpairedTags.indexOf(d)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${d}>`);let _=0;p&&this.options.unpairedTags.indexOf(p)!==-1?(_=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):_=s.lastIndexOf("."),s=s.substring(0,_),t=this.tagsNodeStack.pop(),i="",o=u}else if(n[o+1]==="?"){let u=eD(n,o,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,t,s),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){const d=new px(u.tagName);d.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(d[":@"]=this.buildAttributesMap(u.tagExp,s,u.tagName)),this.addChild(t,d,s)}o=u.closeIndex+1}else if(n.substr(o+1,3)==="!--"){const u=qb(n,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){const d=n.substring(o+4,u-2);i=this.saveTextToParentTag(i,t,s),t.add(this.options.commentPropName,[{[this.options.textNodeName]:d}])}o=u}else if(n.substr(o+1,2)==="!D"){const u=bte(n,o);this.docTypeEntities=u.entities,o=u.i}else if(n.substr(o+1,2)==="!["){const u=qb(n,"]]>",o,"CDATA is not closed.")-2,d=n.substring(o+9,u);i=this.saveTextToParentTag(i,t,s);let p=this.parseTextData(d,t.tagname,s,!0,!1,!0,!0);p==null&&(p=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:d}]):t.add(this.options.textNodeName,p),o=u+2}else{let u=eD(n,o,this.options.removeNSPrefix),d=u.tagName;const p=u.rawTagName;let _=u.tagExp,v=u.attrExpPresent,b=u.closeIndex;this.options.transformTagName&&(d=this.options.transformTagName(d)),t&&i&&t.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,t,s,!1));const E=t;if(E&&this.options.unpairedTags.indexOf(E.tagname)!==-1&&(t=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),d!==e.tagname&&(s+=s?"."+d:d),this.isItStopNode(this.options.stopNodes,s,d)){let C="";if(_.length>0&&_.lastIndexOf("/")===_.length-1)o=u.closeIndex;else if(this.options.unpairedTags.indexOf(d)!==-1)o=u.closeIndex;else{const I=this.readStopNodeData(n,p,b+1);if(!I)throw new Error(`Unexpected end of ${p}`);o=I.i,C=I.tagContent}const M=new px(d);d!==_&&v&&(M[":@"]=this.buildAttributesMap(_,s,d)),C&&(C=this.parseTextData(C,d,s,!0,v,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),M.add(this.options.textNodeName,C),this.addChild(t,M,s)}else{if(_.length>0&&_.lastIndexOf("/")===_.length-1){d[d.length-1]==="/"?(d=d.substr(0,d.length-1),s=s.substr(0,s.length-1),_=d):_=_.substr(0,_.length-1),this.options.transformTagName&&(d=this.options.transformTagName(d));const C=new px(d);d!==_&&v&&(C[":@"]=this.buildAttributesMap(_,s,d)),this.addChild(t,C,s),s=s.substr(0,s.lastIndexOf("."))}else{const C=new px(d);this.tagsNodeStack.push(t),d!==_&&v&&(C[":@"]=this.buildAttributesMap(_,s,d)),this.addChild(t,C,s),t=C}i="",o=b}}else i+=n[o];return e.child};function Ate(n,e,t){const i=this.options.updateTag(e.tagname,t,e[":@"]);i===!1||(typeof i=="string"&&(e.tagname=i),n.addChild(e))}const Ite=function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function Rte(n,e,t,i){return n&&(i===void 0&&(i=Object.keys(e.child).length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}function kte(n,e,t){const i="*."+t;for(const s in n){const o=n[s];if(i===o||e===o)return!0}return!1}function Ote(n,e,t=">"){let i,s="";for(let o=e;o<n.length;o++){let l=n[o];if(i)l===i&&(i="");else if(l==='"'||l==="'")i=l;else if(l===t[0])if(t[1]){if(n[o+1]===t[1])return{data:s,index:o}}else return{data:s,index:o};else l==="	"&&(l=" ");s+=l}}function qb(n,e,t,i){const s=n.indexOf(e,t);if(s===-1)throw new Error(i);return s+e.length-1}function eD(n,e,t,i=">"){const s=Ote(n,e+1,i);if(!s)return;let o=s.data;const l=s.index,u=o.search(/\s/);let d=o,p=!0;u!==-1&&(d=o.substring(0,u),o=o.substring(u+1).trimStart());const _=d;if(t){const v=d.indexOf(":");v!==-1&&(d=d.substr(v+1),p=d!==s.data.substr(v+1))}return{tagName:d,tagExp:o,closeIndex:l,attrExpPresent:p,rawTagName:_}}function Lte(n,e,t){const i=t;let s=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){const o=qb(n,">",t,`${e} is not closed`);if(n.substring(t+2,o).trim()===e&&(s--,s===0))return{tagContent:n.substring(i,t),i:o};t=o}else if(n[t+1]==="?")t=qb(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=qb(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=qb(n,"]]>",t,"StopNode is not closed.")-2;else{const o=eD(n,t,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,t=o.closeIndex)}}function tD(n,e,t){if(e&&typeof n=="string"){const i=n.trim();return i==="true"?!0:i==="false"?!1:Tte(n,t)}else return P8.isExist(n)?n:""}var Dte=Ste,F8={};function Nte(n,e){return z8(n,e)}function z8(n,e,t){let i;const s={};for(let o=0;o<n.length;o++){const l=n[o],u=Bte(l);let d="";if(t===void 0?d=u:d=t+"."+u,u===e.textNodeName)i===void 0?i=l[u]:i+=""+l[u];else{if(u===void 0)continue;if(l[u]){let p=z8(l[u],e,d);const _=Fte(p,e);l[":@"]?Pte(p,l[":@"],d,e):Object.keys(p).length===1&&p[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?p=p[e.textNodeName]:Object.keys(p).length===0&&(e.alwaysCreateTextNode?p[e.textNodeName]="":p=""),s[u]!==void 0&&s.hasOwnProperty(u)?(Array.isArray(s[u])||(s[u]=[s[u]]),s[u].push(p)):e.isArray(u,d,_)?s[u]=[p]:s[u]=p}}}return typeof i=="string"?i.length>0&&(s[e.textNodeName]=i):i!==void 0&&(s[e.textNodeName]=i),s}function Bte(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];if(i!==":@")return i}}function Pte(n,e,t,i){if(e){const s=Object.keys(e),o=s.length;for(let l=0;l<o;l++){const u=s[l];i.isArray(u,t+"."+u,!0,!0)?n[u]=[e[u]]:n[u]=e[u]}}}function Fte(n,e){const{textNodeName:t}=e,i=Object.keys(n).length;return!!(i===0||i===1&&(n[t]||typeof n[t]=="boolean"||n[t]===0))}F8.prettify=Nte;const{buildOptions:zte}=xB,Ute=Dte,{prettify:Hte}=F8,Gte=SB;let Wte=class{constructor(e){this.externalEntities={},this.options=zte(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const o=Gte.validate(e,t);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}const i=new Ute(this.options);i.addExternalEntities(this.externalEntities);const s=i.parseXml(e);return this.options.preserveOrder||s===void 0?s:Hte(s,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};var Vte=Wte;const jte=`
`;function Xte(n,e){let t="";return e.format&&e.indentBy.length>0&&(t=jte),U8(n,e,"",t)}function U8(n,e,t,i){let s="",o=!1;for(let l=0;l<n.length;l++){const u=n[l],d=Yte(u);if(d===void 0)continue;let p="";if(t.length===0?p=d:p=`${t}.${d}`,d===e.textNodeName){let C=u[d];Kte(p,e)||(C=e.tagValueProcessor(d,C),C=H8(C,e)),o&&(s+=i),s+=C,o=!1;continue}else if(d===e.cdataPropName){o&&(s+=i),s+=`<![CDATA[${u[d][0][e.textNodeName]}]]>`,o=!1;continue}else if(d===e.commentPropName){s+=i+`<!--${u[d][0][e.textNodeName]}-->`,o=!0;continue}else if(d[0]==="?"){const C=yz(u[":@"],e),M=d==="?xml"?"":i;let I=u[d][0][e.textNodeName];I=I.length!==0?" "+I:"",s+=M+`<${d}${I}${C}?>`,o=!0;continue}let _=i;_!==""&&(_+=e.indentBy);const v=yz(u[":@"],e),b=i+`<${d}${v}`,E=U8(u[d],e,p,_);e.unpairedTags.indexOf(d)!==-1?e.suppressUnpairedNode?s+=b+">":s+=b+"/>":(!E||E.length===0)&&e.suppressEmptyNode?s+=b+"/>":E&&E.endsWith(">")?s+=b+`>${E}${i}</${d}>`:(s+=b+">",E&&i!==""&&(E.includes("/>")||E.includes("</"))?s+=i+e.indentBy+E+i:s+=E,s+=`</${d}>`),o=!0}return s}function Yte(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];if(n.hasOwnProperty(i)&&i!==":@")return i}}function yz(n,e){let t="";if(n&&!e.ignoreAttributes)for(let i in n){if(!n.hasOwnProperty(i))continue;let s=e.attributeValueProcessor(i,n[i]);s=H8(s,e),s===!0&&e.suppressBooleanAttributes?t+=` ${i.substr(e.attributeNamePrefix.length)}`:t+=` ${i.substr(e.attributeNamePrefix.length)}="${s}"`}return t}function Kte(n,e){n=n.substr(0,n.length-e.textNodeName.length-1);let t=n.substr(n.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===n||e.stopNodes[i]==="*."+t)return!0;return!1}function H8(n,e){if(n&&n.length>0&&e.processEntities)for(let t=0;t<e.entities.length;t++){const i=e.entities[t];n=n.replace(i.regex,i.val)}return n}var Jte=Xte;const qte=Jte,Qte={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function kv(n){this.options=Object.assign({},Qte,n),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=tne),this.processTextOrObjNode=Zte,this.options.format?(this.indentate=ene,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}kv.prototype.build=function(n){return this.options.preserveOrder?qte(n,this.options):(Array.isArray(n)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(n={[this.options.arrayNodeName]:n}),this.j2x(n,0).val)};kv.prototype.j2x=function(n,e){let t="",i="";for(let s in n)if(Object.prototype.hasOwnProperty.call(n,s))if(typeof n[s]>"u")this.isAttribute(s)&&(i+="");else if(n[s]===null)this.isAttribute(s)?i+="":s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(n[s]instanceof Date)i+=this.buildTextValNode(n[s],s,"",e);else if(typeof n[s]!="object"){const o=this.isAttribute(s);if(o)t+=this.buildAttrPairStr(o,""+n[s]);else if(s===this.options.textNodeName){let l=this.options.tagValueProcessor(s,""+n[s]);i+=this.replaceEntitiesValue(l)}else i+=this.buildTextValNode(n[s],s,"",e)}else if(Array.isArray(n[s])){const o=n[s].length;let l="";for(let u=0;u<o;u++){const d=n[s][u];typeof d>"u"||(d===null?s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof d=="object"?this.options.oneListGroup?l+=this.j2x(d,e+1).val:l+=this.processTextOrObjNode(d,s,e):l+=this.buildTextValNode(d,s,"",e))}this.options.oneListGroup&&(l=this.buildObjectNode(l,s,"",e)),i+=l}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const o=Object.keys(n[s]),l=o.length;for(let u=0;u<l;u++)t+=this.buildAttrPairStr(o[u],""+n[s][o[u]])}else i+=this.processTextOrObjNode(n[s],s,e);return{attrStr:t,val:i}};kv.prototype.buildAttrPairStr=function(n,e){return e=this.options.attributeValueProcessor(n,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+n:" "+n+'="'+e+'"'};function Zte(n,e,t){const i=this.j2x(n,t+1);return n[this.options.textNodeName]!==void 0&&Object.keys(n).length===1?this.buildTextValNode(n[this.options.textNodeName],e,i.attrStr,t):this.buildObjectNode(i.val,e,i.attrStr,t)}kv.prototype.buildObjectNode=function(n,e,t,i){if(n==="")return e[0]==="?"?this.indentate(i)+"<"+e+t+"?"+this.tagEndChar:this.indentate(i)+"<"+e+t+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),(t||t==="")&&n.indexOf("<")===-1?this.indentate(i)+"<"+e+t+o+">"+n+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(i)+`<!--${n}-->`+this.newLine:this.indentate(i)+"<"+e+t+o+this.tagEndChar+n+this.indentate(i)+s}};kv.prototype.closeTag=function(n){let e="";return this.options.unpairedTags.indexOf(n)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${n}`,e};kv.prototype.buildTextValNode=function(n,e,t,i){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${n}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(i)+`<!--${n}-->`+this.newLine;if(e[0]==="?")return this.indentate(i)+"<"+e+t+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,n);return s=this.replaceEntitiesValue(s),s===""?this.indentate(i)+"<"+e+t+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+t+">"+s+"</"+e+this.tagEndChar}};kv.prototype.replaceEntitiesValue=function(n){if(n&&n.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const t=this.options.entities[e];n=n.replace(t.regex,t.val)}return n};function ene(n){return this.options.indentBy.repeat(n)}function tne(n){return n.startsWith(this.options.attributeNamePrefix)&&n!==this.options.textNodeName?n.substr(this.attrPrefixLen):!1}var nne=kv;const rne=SB,ine=Vte,sne=nne;var G8={XMLParser:ine,XMLValidator:rne,XMLBuilder:sne};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const wB="162",ZA=0,one=1,ane=2,vz=1,bz=100,Tz=204,Sz=205,Ez=3,lne=0,xz="attached",une="detached",W8=300,Uw=1e3,Jx=1001,nD=1002,Hw=1003,cne=1004,hne=1005,$B=1006,dne=1007,CB=1008,V8=1009,pne=1014,MB=1015,fne=1020,AB=1023,Kk=1026,wz=1027,mne=1028,Gw=2300,eE=2301,Jk=2302,$z=2400,Cz=2401,Mz=2402,gne=2500,_ne=0,j8=1,rD=2,yne=0,X8="",Zy="srgb",IB="srgb-linear",vne="display-p3",Y8="display-p3-linear",iD="linear",Az="srgb",Iz="rec709",Rz="p3",TT=7680,kz=519,bne=515,sD=35044,Qb=2e3,oD=2001;class VI{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const o=s.indexOf(t);o!==-1&&s.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let o=0,l=s.length;o<l;o++)s[o].call(this,e);e.target=null}}}const vp=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Oz=1234567;const pw=Math.PI/180,Ww=180/Math.PI;function qg(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(vp[n&255]+vp[n>>8&255]+vp[n>>16&255]+vp[n>>24&255]+"-"+vp[e&255]+vp[e>>8&255]+"-"+vp[e>>16&15|64]+vp[e>>24&255]+"-"+vp[t&63|128]+vp[t>>8&255]+"-"+vp[t>>16&255]+vp[t>>24&255]+vp[i&255]+vp[i>>8&255]+vp[i>>16&255]+vp[i>>24&255]).toLowerCase()}function Mp(n,e,t){return Math.max(e,Math.min(t,n))}function RB(n,e){return(n%e+e)%e}function Tne(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function Sne(n,e,t){return n!==e?(t-n)/(e-n):0}function fw(n,e,t){return(1-t)*n+t*e}function Ene(n,e,t,i){return fw(n,e,1-Math.exp(-t*i))}function xne(n,e=1){return e-Math.abs(RB(n,e*2)-e)}function wne(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function $ne(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Cne(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Mne(n,e){return n+Math.random()*(e-n)}function Ane(n){return n*(.5-Math.random())}function Ine(n){n!==void 0&&(Oz=n);let e=Oz+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Rne(n){return n*pw}function kne(n){return n*Ww}function One(n){return(n&n-1)===0&&n!==0}function Lne(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Dne(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Nne(n,e,t,i,s){const o=Math.cos,l=Math.sin,u=o(t/2),d=l(t/2),p=o((e+i)/2),_=l((e+i)/2),v=o((e-i)/2),b=l((e-i)/2),E=o((i-e)/2),C=l((i-e)/2);switch(s){case"XYX":n.set(u*_,d*v,d*b,u*p);break;case"YZY":n.set(d*b,u*_,d*v,u*p);break;case"ZXZ":n.set(d*v,d*b,u*_,u*p);break;case"XZX":n.set(u*_,d*C,d*E,u*p);break;case"YXY":n.set(d*E,u*_,d*C,u*p);break;case"ZYZ":n.set(d*C,d*E,u*_,u*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Wg(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function wa(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Bne={DEG2RAD:pw,RAD2DEG:Ww,generateUUID:qg,clamp:Mp,euclideanModulo:RB,mapLinear:Tne,inverseLerp:Sne,lerp:fw,damp:Ene,pingpong:xne,smoothstep:wne,smootherstep:$ne,randInt:Cne,randFloat:Mne,randFloatSpread:Ane,seededRandom:Ine,degToRad:Rne,radToDeg:kne,isPowerOfTwo:One,ceilPowerOfTwo:Lne,floorPowerOfTwo:Dne,setQuaternionFromProperEuler:Nne,normalize:wa,denormalize:Wg};class sc{constructor(e=0,t=0){sc.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Mp(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*i-l*s+e.x,this.y=o*s+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class uy{constructor(e,t,i,s,o,l,u,d,p){uy.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,o,l,u,d,p)}set(e,t,i,s,o,l,u,d,p){const _=this.elements;return _[0]=e,_[1]=s,_[2]=u,_[3]=t,_[4]=o,_[5]=d,_[6]=i,_[7]=l,_[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[3],d=i[6],p=i[1],_=i[4],v=i[7],b=i[2],E=i[5],C=i[8],M=s[0],I=s[3],L=s[6],O=s[1],P=s[4],B=s[7],z=s[2],G=s[5],j=s[8];return o[0]=l*M+u*O+d*z,o[3]=l*I+u*P+d*G,o[6]=l*L+u*B+d*j,o[1]=p*M+_*O+v*z,o[4]=p*I+_*P+v*G,o[7]=p*L+_*B+v*j,o[2]=b*M+E*O+C*z,o[5]=b*I+E*P+C*G,o[8]=b*L+E*B+C*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],p=e[7],_=e[8];return t*l*_-t*u*p-i*o*_+i*u*d+s*o*p-s*l*d}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],p=e[7],_=e[8],v=_*l-u*p,b=u*d-_*o,E=p*o-l*d,C=t*v+i*b+s*E;if(C===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/C;return e[0]=v*M,e[1]=(s*p-_*i)*M,e[2]=(u*i-s*l)*M,e[3]=b*M,e[4]=(_*t-s*d)*M,e[5]=(s*o-u*t)*M,e[6]=E*M,e[7]=(i*d-p*t)*M,e[8]=(l*t-i*o)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,o,l,u){const d=Math.cos(o),p=Math.sin(o);return this.set(i*d,i*p,-i*(d*l+p*u)+l+e,-s*p,s*d,-s*(-p*l+d*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(qk.makeScale(e,t)),this}rotate(e){return this.premultiply(qk.makeRotation(-e)),this}translate(e,t){return this.premultiply(qk.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const qk=new uy;function Pne(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function aD(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const Lz={};function K8(n){n in Lz||(Lz[n]=!0,console.warn(n))}const Dz=new uy().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Nz=new uy().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),dC={[IB]:{transfer:iD,primaries:Iz,toReference:n=>n,fromReference:n=>n},[Zy]:{transfer:Az,primaries:Iz,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Y8]:{transfer:iD,primaries:Rz,toReference:n=>n.applyMatrix3(Nz),fromReference:n=>n.applyMatrix3(Dz)},[vne]:{transfer:Az,primaries:Rz,toReference:n=>n.convertSRGBToLinear().applyMatrix3(Nz),fromReference:n=>n.applyMatrix3(Dz).convertLinearToSRGB()}},Fne=new Set([IB,Y8]),kg={enabled:!0,_workingColorSpace:IB,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!Fne.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=dC[e].toReference,s=dC[t].fromReference;return s(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return dC[n].primaries},getTransfer:function(n){return n===X8?iD:dC[n].transfer}};function PS(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Qk(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let ST;class zne{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ST===void 0&&(ST=aD("canvas")),ST.width=e.width,ST.height=e.height;const i=ST.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=ST}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=aD("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=PS(o[l]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(PS(t[i]/255)*255):t[i]=PS(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Une=0;class Hne{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Une++}),this.uuid=qg(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(Zk(s[l].image)):o.push(Zk(s[l]))}else o=Zk(s);i.url=o}return t||(e.images[this.uuid]=i),i}}function Zk(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?zne.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Gne=0;class $m extends VI{constructor(e=$m.DEFAULT_IMAGE,t=$m.DEFAULT_MAPPING,i=Jx,s=Jx,o=$B,l=CB,u=AB,d=V8,p=$m.DEFAULT_ANISOTROPY,_=X8){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Gne++}),this.uuid=qg(),this.name="",this.source=new Hne(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=d,this.offset=new sc(0,0),this.repeat=new sc(1,1),this.center=new sc(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new uy,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=_,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==W8)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Uw:e.x=e.x-Math.floor(e.x);break;case Jx:e.x=e.x<0?0:1;break;case nD:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Uw:e.y=e.y-Math.floor(e.y);break;case Jx:e.y=e.y<0?0:1;break;case nD:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}$m.DEFAULT_IMAGE=null;$m.DEFAULT_MAPPING=W8;$m.DEFAULT_ANISOTROPY=1;class lg{constructor(e=0,t=0,i=0,s=1){lg.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*i+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*i+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*i+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,o;const d=e.elements,p=d[0],_=d[4],v=d[8],b=d[1],E=d[5],C=d[9],M=d[2],I=d[6],L=d[10];if(Math.abs(_-b)<.01&&Math.abs(v-M)<.01&&Math.abs(C-I)<.01){if(Math.abs(_+b)<.1&&Math.abs(v+M)<.1&&Math.abs(C+I)<.1&&Math.abs(p+E+L-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const P=(p+1)/2,B=(E+1)/2,z=(L+1)/2,G=(_+b)/4,j=(v+M)/4,H=(C+I)/4;return P>B&&P>z?P<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(P),s=G/i,o=j/i):B>z?B<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(B),i=G/s,o=H/s):z<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(z),i=j/o,s=H/o),this.set(i,s,o,t),this}let O=Math.sqrt((I-C)*(I-C)+(v-M)*(v-M)+(b-_)*(b-_));return Math.abs(O)<.001&&(O=1),this.x=(I-C)/O,this.y=(v-M)/O,this.z=(b-_)/O,this.w=Math.acos((p+E+L-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Lu{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,o,l,u){let d=i[s+0],p=i[s+1],_=i[s+2],v=i[s+3];const b=o[l+0],E=o[l+1],C=o[l+2],M=o[l+3];if(u===0){e[t+0]=d,e[t+1]=p,e[t+2]=_,e[t+3]=v;return}if(u===1){e[t+0]=b,e[t+1]=E,e[t+2]=C,e[t+3]=M;return}if(v!==M||d!==b||p!==E||_!==C){let I=1-u;const L=d*b+p*E+_*C+v*M,O=L>=0?1:-1,P=1-L*L;if(P>Number.EPSILON){const z=Math.sqrt(P),G=Math.atan2(z,L*O);I=Math.sin(I*G)/z,u=Math.sin(u*G)/z}const B=u*O;if(d=d*I+b*B,p=p*I+E*B,_=_*I+C*B,v=v*I+M*B,I===1-u){const z=1/Math.sqrt(d*d+p*p+_*_+v*v);d*=z,p*=z,_*=z,v*=z}}e[t]=d,e[t+1]=p,e[t+2]=_,e[t+3]=v}static multiplyQuaternionsFlat(e,t,i,s,o,l){const u=i[s],d=i[s+1],p=i[s+2],_=i[s+3],v=o[l],b=o[l+1],E=o[l+2],C=o[l+3];return e[t]=u*C+_*v+d*E-p*b,e[t+1]=d*C+_*b+p*v-u*E,e[t+2]=p*C+_*E+u*b-d*v,e[t+3]=_*C-u*v-d*b-p*E,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,d=Math.sin,p=u(i/2),_=u(s/2),v=u(o/2),b=d(i/2),E=d(s/2),C=d(o/2);switch(l){case"XYZ":this._x=b*_*v+p*E*C,this._y=p*E*v-b*_*C,this._z=p*_*C+b*E*v,this._w=p*_*v-b*E*C;break;case"YXZ":this._x=b*_*v+p*E*C,this._y=p*E*v-b*_*C,this._z=p*_*C-b*E*v,this._w=p*_*v+b*E*C;break;case"ZXY":this._x=b*_*v-p*E*C,this._y=p*E*v+b*_*C,this._z=p*_*C+b*E*v,this._w=p*_*v-b*E*C;break;case"ZYX":this._x=b*_*v-p*E*C,this._y=p*E*v+b*_*C,this._z=p*_*C-b*E*v,this._w=p*_*v+b*E*C;break;case"YZX":this._x=b*_*v+p*E*C,this._y=p*E*v+b*_*C,this._z=p*_*C-b*E*v,this._w=p*_*v-b*E*C;break;case"XZY":this._x=b*_*v-p*E*C,this._y=p*E*v-b*_*C,this._z=p*_*C+b*E*v,this._w=p*_*v+b*E*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],o=t[8],l=t[1],u=t[5],d=t[9],p=t[2],_=t[6],v=t[10],b=i+u+v;if(b>0){const E=.5/Math.sqrt(b+1);this._w=.25/E,this._x=(_-d)*E,this._y=(o-p)*E,this._z=(l-s)*E}else if(i>u&&i>v){const E=2*Math.sqrt(1+i-u-v);this._w=(_-d)/E,this._x=.25*E,this._y=(s+l)/E,this._z=(o+p)/E}else if(u>v){const E=2*Math.sqrt(1+u-i-v);this._w=(o-p)/E,this._x=(s+l)/E,this._y=.25*E,this._z=(d+_)/E}else{const E=2*Math.sqrt(1+v-i-u);this._w=(l-s)/E,this._x=(o+p)/E,this._y=(d+_)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Mp(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,o=e._z,l=e._w,u=t._x,d=t._y,p=t._z,_=t._w;return this._x=i*_+l*u+s*p-o*d,this._y=s*_+l*d+o*u-i*p,this._z=o*_+l*p+i*d-s*u,this._w=l*_-i*u-s*d-o*p,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+i*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=i,this._y=s,this._z=o,this;const d=1-u*u;if(d<=Number.EPSILON){const E=1-t;return this._w=E*l+t*this._w,this._x=E*i+t*this._x,this._y=E*s+t*this._y,this._z=E*o+t*this._z,this.normalize(),this}const p=Math.sqrt(d),_=Math.atan2(p,u),v=Math.sin((1-t)*_)/p,b=Math.sin(t*_)/p;return this._w=l*v+this._w*b,this._x=i*v+this._x*b,this._y=s*v+this._y*b,this._z=o*v+this._z*b,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Bt{constructor(e=0,t=0,i=0){Bt.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Bz.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Bz.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*s,this.y=o[1]*t+o[4]*i+o[7]*s,this.z=o[2]*t+o[5]*i+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*i+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*i+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,o=e.x,l=e.y,u=e.z,d=e.w,p=2*(l*s-u*i),_=2*(u*t-o*s),v=2*(o*i-l*t);return this.x=t+d*p+l*v-u*_,this.y=i+d*_+u*p-o*v,this.z=s+d*v+o*_-l*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s,this.y=o[1]*t+o[5]*i+o[9]*s,this.z=o[2]*t+o[6]*i+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,o=e.z,l=t.x,u=t.y,d=t.z;return this.x=s*d-o*u,this.y=o*l-i*d,this.z=i*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return e2.copy(this).projectOnVector(e),this.sub(e2)}reflect(e){return this.sub(e2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Mp(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const e2=new Bt,Bz=new Lu;class cy{constructor(e=new Bt(1/0,1/0,1/0),t=new Bt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Og.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Og.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Og.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let l=0,u=o.count;l<u;l++)e.isMesh===!0?e.getVertexPosition(l,Og):Og.fromBufferAttribute(o,l),Og.applyMatrix4(e.matrixWorld),this.expandByPoint(Og);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),pC.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),pC.copy(i.boundingBox)),pC.applyMatrix4(e.matrixWorld),this.union(pC)}const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Og),Og.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(fx),fC.subVectors(this.max,fx),ET.subVectors(e.a,fx),xT.subVectors(e.b,fx),wT.subVectors(e.c,fx),ky.subVectors(xT,ET),Oy.subVectors(wT,xT),yb.subVectors(ET,wT);let t=[0,-ky.z,ky.y,0,-Oy.z,Oy.y,0,-yb.z,yb.y,ky.z,0,-ky.x,Oy.z,0,-Oy.x,yb.z,0,-yb.x,-ky.y,ky.x,0,-Oy.y,Oy.x,0,-yb.y,yb.x,0];return!t2(t,ET,xT,wT,fC)||(t=[1,0,0,0,1,0,0,0,1],!t2(t,ET,xT,wT,fC))?!1:(mC.crossVectors(ky,Oy),t=[mC.x,mC.y,mC.z],t2(t,ET,xT,wT,fC))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Og).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Og).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(I_[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),I_[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),I_[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),I_[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),I_[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),I_[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),I_[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),I_[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(I_),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const I_=[new Bt,new Bt,new Bt,new Bt,new Bt,new Bt,new Bt,new Bt],Og=new Bt,pC=new cy,ET=new Bt,xT=new Bt,wT=new Bt,ky=new Bt,Oy=new Bt,yb=new Bt,fx=new Bt,fC=new Bt,mC=new Bt,vb=new Bt;function t2(n,e,t,i,s){for(let o=0,l=n.length-3;o<=l;o+=3){vb.fromArray(n,o);const u=s.x*Math.abs(vb.x)+s.y*Math.abs(vb.y)+s.z*Math.abs(vb.z),d=e.dot(vb),p=t.dot(vb),_=i.dot(vb);if(Math.max(-Math.max(d,p,_),Math.min(d,p,_))>u)return!1}return!0}const Wne=new cy,mx=new Bt,n2=new Bt;class r_{constructor(e=new Bt,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Wne.setFromPoints(e).getCenter(i);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;mx.subVectors(e,this.center);const t=mx.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(mx,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(n2.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(mx.copy(e.center).add(n2)),this.expandByPoint(mx.copy(e.center).sub(n2))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const R_=new Bt,r2=new Bt,gC=new Bt,Ly=new Bt,i2=new Bt,_C=new Bt,s2=new Bt;class jI{constructor(e=new Bt,t=new Bt(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,R_)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=R_.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(R_.copy(this.origin).addScaledVector(this.direction,t),R_.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){r2.copy(e).add(t).multiplyScalar(.5),gC.copy(t).sub(e).normalize(),Ly.copy(this.origin).sub(r2);const o=e.distanceTo(t)*.5,l=-this.direction.dot(gC),u=Ly.dot(this.direction),d=-Ly.dot(gC),p=Ly.lengthSq(),_=Math.abs(1-l*l);let v,b,E,C;if(_>0)if(v=l*d-u,b=l*u-d,C=o*_,v>=0)if(b>=-C)if(b<=C){const M=1/_;v*=M,b*=M,E=v*(v+l*b+2*u)+b*(l*v+b+2*d)+p}else b=o,v=Math.max(0,-(l*b+u)),E=-v*v+b*(b+2*d)+p;else b=-o,v=Math.max(0,-(l*b+u)),E=-v*v+b*(b+2*d)+p;else b<=-C?(v=Math.max(0,-(-l*o+u)),b=v>0?-o:Math.min(Math.max(-o,-d),o),E=-v*v+b*(b+2*d)+p):b<=C?(v=0,b=Math.min(Math.max(-o,-d),o),E=b*(b+2*d)+p):(v=Math.max(0,-(l*o+u)),b=v>0?o:Math.min(Math.max(-o,-d),o),E=-v*v+b*(b+2*d)+p);else b=l>0?-o:o,v=Math.max(0,-(l*b+u)),E=-v*v+b*(b+2*d)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,v),s&&s.copy(r2).addScaledVector(gC,b),E}intersectSphere(e,t){R_.subVectors(e.center,this.origin);const i=R_.dot(this.direction),s=R_.dot(R_)-i*i,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=i-l,d=i+l;return d<0?null:u<0?this.at(d,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,o,l,u,d;const p=1/this.direction.x,_=1/this.direction.y,v=1/this.direction.z,b=this.origin;return p>=0?(i=(e.min.x-b.x)*p,s=(e.max.x-b.x)*p):(i=(e.max.x-b.x)*p,s=(e.min.x-b.x)*p),_>=0?(o=(e.min.y-b.y)*_,l=(e.max.y-b.y)*_):(o=(e.max.y-b.y)*_,l=(e.min.y-b.y)*_),i>l||o>s||((o>i||isNaN(i))&&(i=o),(l<s||isNaN(s))&&(s=l),v>=0?(u=(e.min.z-b.z)*v,d=(e.max.z-b.z)*v):(u=(e.max.z-b.z)*v,d=(e.min.z-b.z)*v),i>d||u>s)||((u>i||i!==i)&&(i=u),(d<s||s!==s)&&(s=d),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,R_)!==null}intersectTriangle(e,t,i,s,o){i2.subVectors(t,e),_C.subVectors(i,e),s2.crossVectors(i2,_C);let l=this.direction.dot(s2),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;Ly.subVectors(this.origin,e);const d=u*this.direction.dot(_C.crossVectors(Ly,_C));if(d<0)return null;const p=u*this.direction.dot(i2.cross(Ly));if(p<0||d+p>l)return null;const _=-u*Ly.dot(s2);return _<0?null:this.at(_/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Vs{constructor(e,t,i,s,o,l,u,d,p,_,v,b,E,C,M,I){Vs.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,o,l,u,d,p,_,v,b,E,C,M,I)}set(e,t,i,s,o,l,u,d,p,_,v,b,E,C,M,I){const L=this.elements;return L[0]=e,L[4]=t,L[8]=i,L[12]=s,L[1]=o,L[5]=l,L[9]=u,L[13]=d,L[2]=p,L[6]=_,L[10]=v,L[14]=b,L[3]=E,L[7]=C,L[11]=M,L[15]=I,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Vs().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/$T.setFromMatrixColumn(e,0).length(),o=1/$T.setFromMatrixColumn(e,1).length(),l=1/$T.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,o=e.z,l=Math.cos(i),u=Math.sin(i),d=Math.cos(s),p=Math.sin(s),_=Math.cos(o),v=Math.sin(o);if(e.order==="XYZ"){const b=l*_,E=l*v,C=u*_,M=u*v;t[0]=d*_,t[4]=-d*v,t[8]=p,t[1]=E+C*p,t[5]=b-M*p,t[9]=-u*d,t[2]=M-b*p,t[6]=C+E*p,t[10]=l*d}else if(e.order==="YXZ"){const b=d*_,E=d*v,C=p*_,M=p*v;t[0]=b+M*u,t[4]=C*u-E,t[8]=l*p,t[1]=l*v,t[5]=l*_,t[9]=-u,t[2]=E*u-C,t[6]=M+b*u,t[10]=l*d}else if(e.order==="ZXY"){const b=d*_,E=d*v,C=p*_,M=p*v;t[0]=b-M*u,t[4]=-l*v,t[8]=C+E*u,t[1]=E+C*u,t[5]=l*_,t[9]=M-b*u,t[2]=-l*p,t[6]=u,t[10]=l*d}else if(e.order==="ZYX"){const b=l*_,E=l*v,C=u*_,M=u*v;t[0]=d*_,t[4]=C*p-E,t[8]=b*p+M,t[1]=d*v,t[5]=M*p+b,t[9]=E*p-C,t[2]=-p,t[6]=u*d,t[10]=l*d}else if(e.order==="YZX"){const b=l*d,E=l*p,C=u*d,M=u*p;t[0]=d*_,t[4]=M-b*v,t[8]=C*v+E,t[1]=v,t[5]=l*_,t[9]=-u*_,t[2]=-p*_,t[6]=E*v+C,t[10]=b-M*v}else if(e.order==="XZY"){const b=l*d,E=l*p,C=u*d,M=u*p;t[0]=d*_,t[4]=-v,t[8]=p*_,t[1]=b*v+M,t[5]=l*_,t[9]=E*v-C,t[2]=C*v-E,t[6]=u*_,t[10]=M*v+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Vne,e,jne)}lookAt(e,t,i){const s=this.elements;return gm.subVectors(e,t),gm.lengthSq()===0&&(gm.z=1),gm.normalize(),Dy.crossVectors(i,gm),Dy.lengthSq()===0&&(Math.abs(i.z)===1?gm.x+=1e-4:gm.z+=1e-4,gm.normalize(),Dy.crossVectors(i,gm)),Dy.normalize(),yC.crossVectors(gm,Dy),s[0]=Dy.x,s[4]=yC.x,s[8]=gm.x,s[1]=Dy.y,s[5]=yC.y,s[9]=gm.y,s[2]=Dy.z,s[6]=yC.z,s[10]=gm.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[4],d=i[8],p=i[12],_=i[1],v=i[5],b=i[9],E=i[13],C=i[2],M=i[6],I=i[10],L=i[14],O=i[3],P=i[7],B=i[11],z=i[15],G=s[0],j=s[4],H=s[8],Z=s[12],ae=s[1],J=s[5],te=s[9],he=s[13],le=s[2],ce=s[6],be=s[10],$e=s[14],q=s[3],oe=s[7],se=s[11],pe=s[15];return o[0]=l*G+u*ae+d*le+p*q,o[4]=l*j+u*J+d*ce+p*oe,o[8]=l*H+u*te+d*be+p*se,o[12]=l*Z+u*he+d*$e+p*pe,o[1]=_*G+v*ae+b*le+E*q,o[5]=_*j+v*J+b*ce+E*oe,o[9]=_*H+v*te+b*be+E*se,o[13]=_*Z+v*he+b*$e+E*pe,o[2]=C*G+M*ae+I*le+L*q,o[6]=C*j+M*J+I*ce+L*oe,o[10]=C*H+M*te+I*be+L*se,o[14]=C*Z+M*he+I*$e+L*pe,o[3]=O*G+P*ae+B*le+z*q,o[7]=O*j+P*J+B*ce+z*oe,o[11]=O*H+P*te+B*be+z*se,o[15]=O*Z+P*he+B*$e+z*pe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],o=e[12],l=e[1],u=e[5],d=e[9],p=e[13],_=e[2],v=e[6],b=e[10],E=e[14],C=e[3],M=e[7],I=e[11],L=e[15];return C*(+o*d*v-s*p*v-o*u*b+i*p*b+s*u*E-i*d*E)+M*(+t*d*E-t*p*b+o*l*b-s*l*E+s*p*_-o*d*_)+I*(+t*p*v-t*u*E-o*l*v+i*l*E+o*u*_-i*p*_)+L*(-s*u*_-t*d*v+t*u*b+s*l*v-i*l*b+i*d*_)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],p=e[7],_=e[8],v=e[9],b=e[10],E=e[11],C=e[12],M=e[13],I=e[14],L=e[15],O=v*I*p-M*b*p+M*d*E-u*I*E-v*d*L+u*b*L,P=C*b*p-_*I*p-C*d*E+l*I*E+_*d*L-l*b*L,B=_*M*p-C*v*p+C*u*E-l*M*E-_*u*L+l*v*L,z=C*v*d-_*M*d-C*u*b+l*M*b+_*u*I-l*v*I,G=t*O+i*P+s*B+o*z;if(G===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const j=1/G;return e[0]=O*j,e[1]=(M*b*o-v*I*o-M*s*E+i*I*E+v*s*L-i*b*L)*j,e[2]=(u*I*o-M*d*o+M*s*p-i*I*p-u*s*L+i*d*L)*j,e[3]=(v*d*o-u*b*o-v*s*p+i*b*p+u*s*E-i*d*E)*j,e[4]=P*j,e[5]=(_*I*o-C*b*o+C*s*E-t*I*E-_*s*L+t*b*L)*j,e[6]=(C*d*o-l*I*o-C*s*p+t*I*p+l*s*L-t*d*L)*j,e[7]=(l*b*o-_*d*o+_*s*p-t*b*p-l*s*E+t*d*E)*j,e[8]=B*j,e[9]=(C*v*o-_*M*o-C*i*E+t*M*E+_*i*L-t*v*L)*j,e[10]=(l*M*o-C*u*o+C*i*p-t*M*p-l*i*L+t*u*L)*j,e[11]=(_*u*o-l*v*o-_*i*p+t*v*p+l*i*E-t*u*E)*j,e[12]=z*j,e[13]=(_*M*s-C*v*s+C*i*b-t*M*b-_*i*I+t*v*I)*j,e[14]=(C*u*s-l*M*s-C*i*d+t*M*d+l*i*I-t*u*I)*j,e[15]=(l*v*s-_*u*s+_*i*d-t*v*d-l*i*b+t*u*b)*j,this}scale(e){const t=this.elements,i=e.x,s=e.y,o=e.z;return t[0]*=i,t[4]*=s,t[8]*=o,t[1]*=i,t[5]*=s,t[9]*=o,t[2]*=i,t[6]*=s,t[10]*=o,t[3]*=i,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),o=1-i,l=e.x,u=e.y,d=e.z,p=o*l,_=o*u;return this.set(p*l+i,p*u-s*d,p*d+s*u,0,p*u+s*d,_*u+i,_*d-s*l,0,p*d-s*u,_*d+s*l,o*d*d+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,o,l){return this.set(1,i,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,o=t._x,l=t._y,u=t._z,d=t._w,p=o+o,_=l+l,v=u+u,b=o*p,E=o*_,C=o*v,M=l*_,I=l*v,L=u*v,O=d*p,P=d*_,B=d*v,z=i.x,G=i.y,j=i.z;return s[0]=(1-(M+L))*z,s[1]=(E+B)*z,s[2]=(C-P)*z,s[3]=0,s[4]=(E-B)*G,s[5]=(1-(b+L))*G,s[6]=(I+O)*G,s[7]=0,s[8]=(C+P)*j,s[9]=(I-O)*j,s[10]=(1-(b+M))*j,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let o=$T.set(s[0],s[1],s[2]).length();const l=$T.set(s[4],s[5],s[6]).length(),u=$T.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],Lg.copy(this);const p=1/o,_=1/l,v=1/u;return Lg.elements[0]*=p,Lg.elements[1]*=p,Lg.elements[2]*=p,Lg.elements[4]*=_,Lg.elements[5]*=_,Lg.elements[6]*=_,Lg.elements[8]*=v,Lg.elements[9]*=v,Lg.elements[10]*=v,t.setFromRotationMatrix(Lg),i.x=o,i.y=l,i.z=u,this}makePerspective(e,t,i,s,o,l,u=Qb){const d=this.elements,p=2*o/(t-e),_=2*o/(i-s),v=(t+e)/(t-e),b=(i+s)/(i-s);let E,C;if(u===Qb)E=-(l+o)/(l-o),C=-2*l*o/(l-o);else if(u===oD)E=-l/(l-o),C=-l*o/(l-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return d[0]=p,d[4]=0,d[8]=v,d[12]=0,d[1]=0,d[5]=_,d[9]=b,d[13]=0,d[2]=0,d[6]=0,d[10]=E,d[14]=C,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(e,t,i,s,o,l,u=Qb){const d=this.elements,p=1/(t-e),_=1/(i-s),v=1/(l-o),b=(t+e)*p,E=(i+s)*_;let C,M;if(u===Qb)C=(l+o)*v,M=-2*v;else if(u===oD)C=o*v,M=-1*v;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return d[0]=2*p,d[4]=0,d[8]=0,d[12]=-b,d[1]=0,d[5]=2*_,d[9]=0,d[13]=-E,d[2]=0,d[6]=0,d[10]=M,d[14]=-C,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const $T=new Bt,Lg=new Vs,Vne=new Bt(0,0,0),jne=new Bt(1,1,1),Dy=new Bt,yC=new Bt,gm=new Bt,Pz=new Vs,Fz=new Lu;class N1{constructor(e=0,t=0,i=0,s=N1.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],d=s[1],p=s[5],_=s[9],v=s[2],b=s[6],E=s[10];switch(t){case"XYZ":this._y=Math.asin(Mp(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-_,E),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(b,p),this._z=0);break;case"YXZ":this._x=Math.asin(-Mp(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(u,E),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-v,o),this._z=0);break;case"ZXY":this._x=Math.asin(Mp(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-v,E),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(d,o));break;case"ZYX":this._y=Math.asin(-Mp(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(b,E),this._z=Math.atan2(d,o)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(Mp(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-_,p),this._y=Math.atan2(-v,o)):(this._x=0,this._y=Math.atan2(u,E));break;case"XZY":this._z=Math.asin(-Mp(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(b,p),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-_,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Pz.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Pz,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Fz.setFromEuler(this),this.setFromQuaternion(Fz,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}N1.DEFAULT_ORDER="XYZ";class iA{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Xne=0;const zz=new Bt,CT=new Lu,k_=new Vs,vC=new Bt,gx=new Bt,Yne=new Bt,Kne=new Lu,Uz=new Bt(1,0,0),Hz=new Bt(0,1,0),Gz=new Bt(0,0,1),Jne={type:"added"},qne={type:"removed"},o2={type:"childadded",child:null},a2={type:"childremoved",child:null};class ah extends VI{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Xne++}),this.uuid=qg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ah.DEFAULT_UP.clone();const e=new Bt,t=new N1,i=new Lu,s=new Bt(1,1,1);function o(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(o),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Vs},normalMatrix:{value:new uy}}),this.matrix=new Vs,this.matrixWorld=new Vs,this.matrixAutoUpdate=ah.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ah.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new iA,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return CT.setFromAxisAngle(e,t),this.quaternion.multiply(CT),this}rotateOnWorldAxis(e,t){return CT.setFromAxisAngle(e,t),this.quaternion.premultiply(CT),this}rotateX(e){return this.rotateOnAxis(Uz,e)}rotateY(e){return this.rotateOnAxis(Hz,e)}rotateZ(e){return this.rotateOnAxis(Gz,e)}translateOnAxis(e,t){return zz.copy(e).applyQuaternion(this.quaternion),this.position.add(zz.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Uz,e)}translateY(e){return this.translateOnAxis(Hz,e)}translateZ(e){return this.translateOnAxis(Gz,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(k_.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?vC.copy(e):vC.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),gx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?k_.lookAt(gx,vC,this.up):k_.lookAt(vC,gx,this.up),this.quaternion.setFromRotationMatrix(k_),s&&(k_.extractRotation(s.matrixWorld),CT.setFromRotationMatrix(k_),this.quaternion.premultiply(CT.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Jne),o2.child=e,this.dispatchEvent(o2),o2.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(qne),a2.child=e,this.dispatchEvent(a2),a2.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),k_.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),k_.multiply(e.parent.matrixWorld)),e.applyMatrix4(k_),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const l=this.children[i].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gx,e,Yne),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gx,Kne,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++){const o=t[i];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++){const u=s[o];u.matrixWorldAutoUpdate===!0&&u.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(u,d){return u[d.uuid]===void 0&&(u[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const d=u.shapes;if(Array.isArray(d))for(let p=0,_=d.length;p<_;p++){const v=d[p];o(e.shapes,v)}else o(e.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let d=0,p=this.material.length;d<p;d++)u.push(o(e.materials,this.material[d]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const d=this.animations[u];s.animations.push(o(e.animations,d))}}if(t){const u=l(e.geometries),d=l(e.materials),p=l(e.textures),_=l(e.images),v=l(e.shapes),b=l(e.skeletons),E=l(e.animations),C=l(e.nodes);u.length>0&&(i.geometries=u),d.length>0&&(i.materials=d),p.length>0&&(i.textures=p),_.length>0&&(i.images=_),v.length>0&&(i.shapes=v),b.length>0&&(i.skeletons=b),E.length>0&&(i.animations=E),C.length>0&&(i.nodes=C)}return i.object=s,i;function l(u){const d=[];for(const p in u){const _=u[p];delete _.metadata,d.push(_)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}ah.DEFAULT_UP=new Bt(0,1,0);ah.DEFAULT_MATRIX_AUTO_UPDATE=!0;ah.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Dg=new Bt,O_=new Bt,l2=new Bt,L_=new Bt,MT=new Bt,AT=new Bt,Wz=new Bt,u2=new Bt,c2=new Bt,h2=new Bt;class W0{constructor(e=new Bt,t=new Bt,i=new Bt){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Dg.subVectors(e,t),s.cross(Dg);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,i,s,o){Dg.subVectors(s,t),O_.subVectors(i,t),l2.subVectors(e,t);const l=Dg.dot(Dg),u=Dg.dot(O_),d=Dg.dot(l2),p=O_.dot(O_),_=O_.dot(l2),v=l*p-u*u;if(v===0)return o.set(0,0,0),null;const b=1/v,E=(p*d-u*_)*b,C=(l*_-u*d)*b;return o.set(1-E-C,C,E)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,L_)===null?!1:L_.x>=0&&L_.y>=0&&L_.x+L_.y<=1}static getInterpolation(e,t,i,s,o,l,u,d){return this.getBarycoord(e,t,i,s,L_)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(o,L_.x),d.addScaledVector(l,L_.y),d.addScaledVector(u,L_.z),d)}static isFrontFacing(e,t,i,s){return Dg.subVectors(i,t),O_.subVectors(e,t),Dg.cross(O_).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Dg.subVectors(this.c,this.b),O_.subVectors(this.a,this.b),Dg.cross(O_).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return W0.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return W0.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,o){return W0.getInterpolation(e,this.a,this.b,this.c,t,i,s,o)}containsPoint(e){return W0.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return W0.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,o=this.c;let l,u;MT.subVectors(s,i),AT.subVectors(o,i),u2.subVectors(e,i);const d=MT.dot(u2),p=AT.dot(u2);if(d<=0&&p<=0)return t.copy(i);c2.subVectors(e,s);const _=MT.dot(c2),v=AT.dot(c2);if(_>=0&&v<=_)return t.copy(s);const b=d*v-_*p;if(b<=0&&d>=0&&_<=0)return l=d/(d-_),t.copy(i).addScaledVector(MT,l);h2.subVectors(e,o);const E=MT.dot(h2),C=AT.dot(h2);if(C>=0&&E<=C)return t.copy(o);const M=E*p-d*C;if(M<=0&&p>=0&&C<=0)return u=p/(p-C),t.copy(i).addScaledVector(AT,u);const I=_*C-E*v;if(I<=0&&v-_>=0&&E-C>=0)return Wz.subVectors(o,s),u=(v-_)/(v-_+(E-C)),t.copy(s).addScaledVector(Wz,u);const L=1/(I+M+b);return l=M*L,u=b*L,t.copy(i).addScaledVector(MT,l).addScaledVector(AT,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const J8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ny={h:0,s:0,l:0},bC={h:0,s:0,l:0};function d2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class kh{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Zy){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,kg.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=kg.workingColorSpace){return this.r=e,this.g=t,this.b=i,kg.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=kg.workingColorSpace){if(e=RB(e,1),t=Mp(t,0,1),i=Mp(i,0,1),t===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,l=2*i-o;this.r=d2(l,o,e+1/3),this.g=d2(l,o,e),this.b=d2(l,o,e-1/3)}return kg.toWorkingColorSpace(this,s),this}setStyle(e,t=Zy){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Zy){const i=J8[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=PS(e.r),this.g=PS(e.g),this.b=PS(e.b),this}copyLinearToSRGB(e){return this.r=Qk(e.r),this.g=Qk(e.g),this.b=Qk(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Zy){return kg.fromWorkingColorSpace(bp.copy(this),e),Math.round(Mp(bp.r*255,0,255))*65536+Math.round(Mp(bp.g*255,0,255))*256+Math.round(Mp(bp.b*255,0,255))}getHexString(e=Zy){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=kg.workingColorSpace){kg.fromWorkingColorSpace(bp.copy(this),t);const i=bp.r,s=bp.g,o=bp.b,l=Math.max(i,s,o),u=Math.min(i,s,o);let d,p;const _=(u+l)/2;if(u===l)d=0,p=0;else{const v=l-u;switch(p=_<=.5?v/(l+u):v/(2-l-u),l){case i:d=(s-o)/v+(s<o?6:0);break;case s:d=(o-i)/v+2;break;case o:d=(i-s)/v+4;break}d/=6}return e.h=d,e.s=p,e.l=_,e}getRGB(e,t=kg.workingColorSpace){return kg.fromWorkingColorSpace(bp.copy(this),t),e.r=bp.r,e.g=bp.g,e.b=bp.b,e}getStyle(e=Zy){kg.fromWorkingColorSpace(bp.copy(this),e);const t=bp.r,i=bp.g,s=bp.b;return e!==Zy?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(Ny),this.setHSL(Ny.h+e,Ny.s+t,Ny.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ny),e.getHSL(bC);const i=fw(Ny.h,bC.h,t),s=fw(Ny.s,bC.s,t),o=fw(Ny.l,bC.l,t);return this.setHSL(i,s,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*s,this.g=o[1]*t+o[4]*i+o[7]*s,this.b=o[2]*t+o[5]*i+o[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const bp=new kh;kh.NAMES=J8;let Qne=0;class yv extends VI{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Qne++}),this.uuid=qg(),this.name="",this.type="Material",this.blending=vz,this.side=ZA,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Tz,this.blendDst=Sz,this.blendEquation=bz,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new kh(0,0,0),this.blendAlpha=0,this.depthFunc=Ez,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=kz,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=TT,this.stencilZFail=TT,this.stencilZPass=TT,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==vz&&(i.blending=this.blending),this.side!==ZA&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Tz&&(i.blendSrc=this.blendSrc),this.blendDst!==Sz&&(i.blendDst=this.blendDst),this.blendEquation!==bz&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ez&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==kz&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==TT&&(i.stencilFail=this.stencilFail),this.stencilZFail!==TT&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==TT&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(o){const l=[];for(const u in o){const d=o[u];delete d.metadata,l.push(d)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(i.textures=o),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class $S extends yv{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new kh(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new N1,this.combine=lne,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const wh=new Bt,TC=new sc;class Cm{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=sD,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=MB,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return K8("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)TC.fromBufferAttribute(this,t),TC.applyMatrix3(e),this.setXY(t,TC.x,TC.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)wh.fromBufferAttribute(this,t),wh.applyMatrix3(e),this.setXYZ(t,wh.x,wh.y,wh.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)wh.fromBufferAttribute(this,t),wh.applyMatrix4(e),this.setXYZ(t,wh.x,wh.y,wh.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)wh.fromBufferAttribute(this,t),wh.applyNormalMatrix(e),this.setXYZ(t,wh.x,wh.y,wh.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)wh.fromBufferAttribute(this,t),wh.transformDirection(e),this.setXYZ(t,wh.x,wh.y,wh.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Wg(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=wa(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Wg(t,this.array)),t}setX(e,t){return this.normalized&&(t=wa(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Wg(t,this.array)),t}setY(e,t){return this.normalized&&(t=wa(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Wg(t,this.array)),t}setZ(e,t){return this.normalized&&(t=wa(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Wg(t,this.array)),t}setW(e,t){return this.normalized&&(t=wa(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=wa(t,this.array),i=wa(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=wa(t,this.array),i=wa(i,this.array),s=wa(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e*=this.itemSize,this.normalized&&(t=wa(t,this.array),i=wa(i,this.array),s=wa(s,this.array),o=wa(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==sD&&(e.usage=this.usage),e}}class Zne extends Cm{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class ere extends Cm{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class kB extends Cm{constructor(e,t,i){super(new Float32Array(e),t,i)}}let tre=0;const qm=new Vs,p2=new ah,IT=new Bt,_m=new cy,_x=new cy,gd=new Bt;class Ov extends VI{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:tre++}),this.uuid=qg(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Pne(e)?ere:Zne)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new uy().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return qm.makeRotationFromQuaternion(e),this.applyMatrix4(qm),this}rotateX(e){return qm.makeRotationX(e),this.applyMatrix4(qm),this}rotateY(e){return qm.makeRotationY(e),this.applyMatrix4(qm),this}rotateZ(e){return qm.makeRotationZ(e),this.applyMatrix4(qm),this}translate(e,t,i){return qm.makeTranslation(e,t,i),this.applyMatrix4(qm),this}scale(e,t,i){return qm.makeScale(e,t,i),this.applyMatrix4(qm),this}lookAt(e){return p2.lookAt(e),p2.updateMatrix(),this.applyMatrix4(p2.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(IT).negate(),this.translate(IT.x,IT.y,IT.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new kB(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new cy);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Bt(-1/0,-1/0,-1/0),new Bt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const o=t[i];_m.setFromBufferAttribute(o),this.morphTargetsRelative?(gd.addVectors(this.boundingBox.min,_m.min),this.boundingBox.expandByPoint(gd),gd.addVectors(this.boundingBox.max,_m.max),this.boundingBox.expandByPoint(gd)):(this.boundingBox.expandByPoint(_m.min),this.boundingBox.expandByPoint(_m.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new r_);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Bt,1/0);return}if(e){const i=this.boundingSphere.center;if(_m.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];_x.setFromBufferAttribute(u),this.morphTargetsRelative?(gd.addVectors(_m.min,_x.min),_m.expandByPoint(gd),gd.addVectors(_m.max,_x.max),_m.expandByPoint(gd)):(_m.expandByPoint(_x.min),_m.expandByPoint(_x.max))}_m.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)gd.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(gd));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],d=this.morphTargetsRelative;for(let p=0,_=u.count;p<_;p++)gd.fromBufferAttribute(u,p),d&&(IT.fromBufferAttribute(e,p),gd.add(IT)),s=Math.max(s,i.distanceToSquared(gd))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Cm(new Float32Array(4*i.count),4));const l=this.getAttribute("tangent"),u=[],d=[];for(let H=0;H<i.count;H++)u[H]=new Bt,d[H]=new Bt;const p=new Bt,_=new Bt,v=new Bt,b=new sc,E=new sc,C=new sc,M=new Bt,I=new Bt;function L(H,Z,ae){p.fromBufferAttribute(i,H),_.fromBufferAttribute(i,Z),v.fromBufferAttribute(i,ae),b.fromBufferAttribute(o,H),E.fromBufferAttribute(o,Z),C.fromBufferAttribute(o,ae),_.sub(p),v.sub(p),E.sub(b),C.sub(b);const J=1/(E.x*C.y-C.x*E.y);isFinite(J)&&(M.copy(_).multiplyScalar(C.y).addScaledVector(v,-E.y).multiplyScalar(J),I.copy(v).multiplyScalar(E.x).addScaledVector(_,-C.x).multiplyScalar(J),u[H].add(M),u[Z].add(M),u[ae].add(M),d[H].add(I),d[Z].add(I),d[ae].add(I))}let O=this.groups;O.length===0&&(O=[{start:0,count:e.count}]);for(let H=0,Z=O.length;H<Z;++H){const ae=O[H],J=ae.start,te=ae.count;for(let he=J,le=J+te;he<le;he+=3)L(e.getX(he+0),e.getX(he+1),e.getX(he+2))}const P=new Bt,B=new Bt,z=new Bt,G=new Bt;function j(H){z.fromBufferAttribute(s,H),G.copy(z);const Z=u[H];P.copy(Z),P.sub(z.multiplyScalar(z.dot(Z))).normalize(),B.crossVectors(G,Z);const J=B.dot(d[H])<0?-1:1;l.setXYZW(H,P.x,P.y,P.z,J)}for(let H=0,Z=O.length;H<Z;++H){const ae=O[H],J=ae.start,te=ae.count;for(let he=J,le=J+te;he<le;he+=3)j(e.getX(he+0)),j(e.getX(he+1)),j(e.getX(he+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Cm(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let b=0,E=i.count;b<E;b++)i.setXYZ(b,0,0,0);const s=new Bt,o=new Bt,l=new Bt,u=new Bt,d=new Bt,p=new Bt,_=new Bt,v=new Bt;if(e)for(let b=0,E=e.count;b<E;b+=3){const C=e.getX(b+0),M=e.getX(b+1),I=e.getX(b+2);s.fromBufferAttribute(t,C),o.fromBufferAttribute(t,M),l.fromBufferAttribute(t,I),_.subVectors(l,o),v.subVectors(s,o),_.cross(v),u.fromBufferAttribute(i,C),d.fromBufferAttribute(i,M),p.fromBufferAttribute(i,I),u.add(_),d.add(_),p.add(_),i.setXYZ(C,u.x,u.y,u.z),i.setXYZ(M,d.x,d.y,d.z),i.setXYZ(I,p.x,p.y,p.z)}else for(let b=0,E=t.count;b<E;b+=3)s.fromBufferAttribute(t,b+0),o.fromBufferAttribute(t,b+1),l.fromBufferAttribute(t,b+2),_.subVectors(l,o),v.subVectors(s,o),_.cross(v),i.setXYZ(b+0,_.x,_.y,_.z),i.setXYZ(b+1,_.x,_.y,_.z),i.setXYZ(b+2,_.x,_.y,_.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)gd.fromBufferAttribute(e,t),gd.normalize(),e.setXYZ(t,gd.x,gd.y,gd.z)}toNonIndexed(){function e(u,d){const p=u.array,_=u.itemSize,v=u.normalized,b=new p.constructor(d.length*_);let E=0,C=0;for(let M=0,I=d.length;M<I;M++){u.isInterleavedBufferAttribute?E=d[M]*u.data.stride+u.offset:E=d[M]*_;for(let L=0;L<_;L++)b[C++]=p[E++]}return new Cm(b,_,v)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ov,i=this.index.array,s=this.attributes;for(const u in s){const d=s[u],p=e(d,i);t.setAttribute(u,p)}const o=this.morphAttributes;for(const u in o){const d=[],p=o[u];for(let _=0,v=p.length;_<v;_++){const b=p[_],E=e(b,i);d.push(E)}t.morphAttributes[u]=d}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,d=l.length;u<d;u++){const p=l[u];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(e[p]=d[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const d in i){const p=i[d];e.data.attributes[d]=p.toJSON(e.data)}const s={};let o=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],_=[];for(let v=0,b=p.length;v<b;v++){const E=p[v];_.push(E.toJSON(e.data))}_.length>0&&(s[d]=_,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const p in s){const _=s[p];this.setAttribute(p,_.clone(t))}const o=e.morphAttributes;for(const p in o){const _=[],v=o[p];for(let b=0,E=v.length;b<E;b++)_.push(v[b].clone(t));this.morphAttributes[p]=_}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,_=l.length;p<_;p++){const v=l[p];this.addGroup(v.start,v.count,v.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Vz=new Vs,bb=new jI,SC=new r_,jz=new Bt,RT=new Bt,kT=new Bt,OT=new Bt,f2=new Bt,EC=new Bt,xC=new sc,wC=new sc,$C=new sc,Xz=new Bt,Yz=new Bt,Kz=new Bt,CC=new Bt,MC=new Bt;class XI extends ah{constructor(e=new Ov,t=new $S){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,o=i.morphAttributes.position,l=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const u=this.morphTargetInfluences;if(o&&u){EC.set(0,0,0);for(let d=0,p=o.length;d<p;d++){const _=u[d],v=o[d];_!==0&&(f2.fromBufferAttribute(v,e),l?EC.addScaledVector(f2,_):EC.addScaledVector(f2.sub(t),_))}t.add(EC)}return t}raycast(e,t){const i=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),SC.copy(i.boundingSphere),SC.applyMatrix4(o),bb.copy(e.ray).recast(e.near),!(SC.containsPoint(bb.origin)===!1&&(bb.intersectSphere(SC,jz)===null||bb.origin.distanceToSquared(jz)>(e.far-e.near)**2))&&(Vz.copy(o).invert(),bb.copy(e.ray).applyMatrix4(Vz),!(i.boundingBox!==null&&bb.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,bb)))}_computeIntersections(e,t,i){let s;const o=this.geometry,l=this.material,u=o.index,d=o.attributes.position,p=o.attributes.uv,_=o.attributes.uv1,v=o.attributes.normal,b=o.groups,E=o.drawRange;if(u!==null)if(Array.isArray(l))for(let C=0,M=b.length;C<M;C++){const I=b[C],L=l[I.materialIndex],O=Math.max(I.start,E.start),P=Math.min(u.count,Math.min(I.start+I.count,E.start+E.count));for(let B=O,z=P;B<z;B+=3){const G=u.getX(B),j=u.getX(B+1),H=u.getX(B+2);s=AC(this,L,e,i,p,_,v,G,j,H),s&&(s.faceIndex=Math.floor(B/3),s.face.materialIndex=I.materialIndex,t.push(s))}}else{const C=Math.max(0,E.start),M=Math.min(u.count,E.start+E.count);for(let I=C,L=M;I<L;I+=3){const O=u.getX(I),P=u.getX(I+1),B=u.getX(I+2);s=AC(this,l,e,i,p,_,v,O,P,B),s&&(s.faceIndex=Math.floor(I/3),t.push(s))}}else if(d!==void 0)if(Array.isArray(l))for(let C=0,M=b.length;C<M;C++){const I=b[C],L=l[I.materialIndex],O=Math.max(I.start,E.start),P=Math.min(d.count,Math.min(I.start+I.count,E.start+E.count));for(let B=O,z=P;B<z;B+=3){const G=B,j=B+1,H=B+2;s=AC(this,L,e,i,p,_,v,G,j,H),s&&(s.faceIndex=Math.floor(B/3),s.face.materialIndex=I.materialIndex,t.push(s))}}else{const C=Math.max(0,E.start),M=Math.min(d.count,E.start+E.count);for(let I=C,L=M;I<L;I+=3){const O=I,P=I+1,B=I+2;s=AC(this,l,e,i,p,_,v,O,P,B),s&&(s.faceIndex=Math.floor(I/3),t.push(s))}}}}function nre(n,e,t,i,s,o,l,u){let d;if(e.side===one?d=i.intersectTriangle(l,o,s,!0,u):d=i.intersectTriangle(s,o,l,e.side===ZA,u),d===null)return null;MC.copy(u),MC.applyMatrix4(n.matrixWorld);const p=t.ray.origin.distanceTo(MC);return p<t.near||p>t.far?null:{distance:p,point:MC.clone(),object:n}}function AC(n,e,t,i,s,o,l,u,d,p){n.getVertexPosition(u,RT),n.getVertexPosition(d,kT),n.getVertexPosition(p,OT);const _=nre(n,e,t,i,RT,kT,OT,CC);if(_){s&&(xC.fromBufferAttribute(s,u),wC.fromBufferAttribute(s,d),$C.fromBufferAttribute(s,p),_.uv=W0.getInterpolation(CC,RT,kT,OT,xC,wC,$C,new sc)),o&&(xC.fromBufferAttribute(o,u),wC.fromBufferAttribute(o,d),$C.fromBufferAttribute(o,p),_.uv1=W0.getInterpolation(CC,RT,kT,OT,xC,wC,$C,new sc)),l&&(Xz.fromBufferAttribute(l,u),Yz.fromBufferAttribute(l,d),Kz.fromBufferAttribute(l,p),_.normal=W0.getInterpolation(CC,RT,kT,OT,Xz,Yz,Kz,new Bt),_.normal.dot(i.direction)>0&&_.normal.multiplyScalar(-1));const v={a:u,b:d,c:p,normal:new Bt,materialIndex:0};W0.getNormal(RT,kT,OT,v.normal),_.face=v}return _}class q8 extends ah{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Vs,this.projectionMatrix=new Vs,this.projectionMatrixInverse=new Vs,this.coordinateSystem=Qb}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const By=new Bt,Jz=new sc,qz=new sc;class OB extends q8{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ww*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(pw*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ww*2*Math.atan(Math.tan(pw*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){By.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(By.x,By.y).multiplyScalar(-e/By.z),By.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(By.x,By.y).multiplyScalar(-e/By.z)}getViewSize(e,t){return this.getViewBounds(e,Jz,qz),t.subVectors(qz,Jz)}setViewOffset(e,t,i,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(pw*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const d=l.fullWidth,p=l.fullHeight;o+=l.offsetX*s/d,t-=l.offsetY*i/p,s*=l.width/d,i*=l.height/p}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const m2=new Bt,rre=new Bt,ire=new uy;class LT{constructor(e=new Bt(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=m2.subVectors(i,t).cross(rre.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(m2),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||ire.getNormalMatrix(e),s=this.coplanarPoint(m2).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Tb=new r_,IC=new Bt;class sre{constructor(e=new LT,t=new LT,i=new LT,s=new LT,o=new LT,l=new LT){this.planes=[e,t,i,s,o,l]}set(e,t,i,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Qb){const i=this.planes,s=e.elements,o=s[0],l=s[1],u=s[2],d=s[3],p=s[4],_=s[5],v=s[6],b=s[7],E=s[8],C=s[9],M=s[10],I=s[11],L=s[12],O=s[13],P=s[14],B=s[15];if(i[0].setComponents(d-o,b-p,I-E,B-L).normalize(),i[1].setComponents(d+o,b+p,I+E,B+L).normalize(),i[2].setComponents(d+l,b+_,I+C,B+O).normalize(),i[3].setComponents(d-l,b-_,I-C,B-O).normalize(),i[4].setComponents(d-u,b-v,I-M,B-P).normalize(),t===Qb)i[5].setComponents(d+u,b+v,I+M,B+P).normalize();else if(t===oD)i[5].setComponents(u,v,M,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Tb.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Tb.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Tb)}intersectsSprite(e){return Tb.center.set(0,0,0),Tb.radius=.7071067811865476,Tb.applyMatrix4(e.matrixWorld),this.intersectsSphere(Tb)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(IC.x=s.normal.x>0?e.max.x:e.min.x,IC.y=s.normal.y>0?e.max.y:e.min.y,IC.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(IC)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Q8 extends q8{constructor(e=-1,t=1,i=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-e,l=i+e,u=s+t,d=s-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=p*this.view.offsetX,l=o+p*this.view.width,u-=_*this.view.offsetY,d=u-_*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class ore extends $m{constructor(e,t,i,s,o,l,u,d,p,_){if(_=_!==void 0?_:Kk,_!==Kk&&_!==wz)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&_===Kk&&(i=pne),i===void 0&&_===wz&&(i=fne),super(null,s,o,l,u,d,_,i,p),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:Hw,this.minFilter=d!==void 0?d:Hw,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const are=new ore(1,1);are.compareFunction=bne;class g2 extends ah{constructor(){super(),this.isGroup=!0,this.type="Group"}}class lre{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=sD,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=qg()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return K8("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qg()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qg()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Kp=new Bt;class LB{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Kp.fromBufferAttribute(this,t),Kp.applyMatrix4(e),this.setXYZ(t,Kp.x,Kp.y,Kp.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Kp.fromBufferAttribute(this,t),Kp.applyNormalMatrix(e),this.setXYZ(t,Kp.x,Kp.y,Kp.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Kp.fromBufferAttribute(this,t),Kp.transformDirection(e),this.setXYZ(t,Kp.x,Kp.y,Kp.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Wg(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=wa(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=wa(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=wa(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=wa(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=wa(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Wg(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Wg(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Wg(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Wg(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=wa(t,this.array),i=wa(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=wa(t,this.array),i=wa(i,this.array),s=wa(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=wa(t,this.array),i=wa(i,this.array),s=wa(s,this.array),o=wa(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new Cm(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new LB(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Qz=new Bt,Zz=new lg,eU=new lg,ure=new Bt,tU=new Vs,RC=new Bt,_2=new r_,nU=new Vs,y2=new jI;class cre extends XI{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=xz,this.bindMatrix=new Vs,this.bindMatrixInverse=new Vs,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new cy),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,RC),this.boundingBox.expandByPoint(RC)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new r_),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,RC),this.boundingSphere.expandByPoint(RC)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_2.copy(this.boundingSphere),_2.applyMatrix4(s),e.ray.intersectsSphere(_2)!==!1&&(nU.copy(s).invert(),y2.copy(e.ray).applyMatrix4(nU),!(this.boundingBox!==null&&y2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,y2)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new lg,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===xz?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===une?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;Zz.fromBufferAttribute(s.attributes.skinIndex,e),eU.fromBufferAttribute(s.attributes.skinWeight,e),Qz.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=eU.getComponent(o);if(l!==0){const u=Zz.getComponent(o);tU.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(ure.copy(Qz).applyMatrix4(tU),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Z8 extends ah{constructor(){super(),this.isBone=!0,this.type="Bone"}}class e7 extends $m{constructor(e=null,t=1,i=1,s,o,l,u,d,p=Hw,_=Hw,v,b){super(null,l,u,d,p,_,s,o,v,b),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const rU=new Vs,hre=new Vs;class DB{constructor(e=[],t=[]){this.uuid=qg(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Vs)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Vs;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:hre;rU.multiplyMatrices(u,t[o]),rU.toArray(i,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new DB(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new e7(t,e,e,AB,MB);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const o=e.bones[i];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new Z8),this.bones.push(l),this.boneInverses.push(new Vs().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=i[s];e.boneInverses.push(u.toArray())}return e}}class iU extends Cm{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const DT=new Vs,sU=new Vs,kC=[],oU=new cy,dre=new Vs,yx=new XI,vx=new r_;class pre extends XI{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new iU(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,dre)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new cy),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,DT),oU.copy(e.boundingBox).applyMatrix4(DT),this.boundingBox.union(oU)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new r_),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,DT),vx.copy(e.boundingSphere).applyMatrix4(DT),this.boundingSphere.union(vx)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,o=i.length+1,l=e*o+1;for(let u=0;u<i.length;u++)i[u]=s[l+u]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(yx.geometry=this.geometry,yx.material=this.material,yx.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vx.copy(this.boundingSphere),vx.applyMatrix4(i),e.ray.intersectsSphere(vx)!==!1))for(let o=0;o<s;o++){this.getMatrixAt(o,DT),sU.multiplyMatrices(i,DT),yx.matrixWorld=sU,yx.raycast(e,kC);for(let l=0,u=kC.length;l<u;l++){const d=kC[l];d.instanceId=o,d.object=this,t.push(d)}kC.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new iU(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new e7(new Float32Array(s*this.count),s,this.count,mne,MB));const o=this.morphTexture.source.data.data;let l=0;for(let p=0;p<i.length;p++)l+=i[p];const u=this.geometry.morphTargetsRelative?1:1-l,d=s*e;o[d]=u,o.set(i,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class t7 extends yv{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new kh(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const aU=new Bt,lU=new Bt,uU=new Vs,v2=new jI,OC=new r_;class NB extends ah{constructor(e=new Ov,t=new t7){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,o=t.count;s<o;s++)aU.fromBufferAttribute(t,s-1),lU.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=aU.distanceTo(lU);e.setAttribute("lineDistance",new kB(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),OC.copy(i.boundingSphere),OC.applyMatrix4(s),OC.radius+=o,e.ray.intersectsSphere(OC)===!1)return;uU.copy(s).invert(),v2.copy(e.ray).applyMatrix4(uU);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=new Bt,_=new Bt,v=new Bt,b=new Bt,E=this.isLineSegments?2:1,C=i.index,I=i.attributes.position;if(C!==null){const L=Math.max(0,l.start),O=Math.min(C.count,l.start+l.count);for(let P=L,B=O-1;P<B;P+=E){const z=C.getX(P),G=C.getX(P+1);if(p.fromBufferAttribute(I,z),_.fromBufferAttribute(I,G),v2.distanceSqToSegment(p,_,b,v)>d)continue;b.applyMatrix4(this.matrixWorld);const H=e.ray.origin.distanceTo(b);H<e.near||H>e.far||t.push({distance:H,point:v.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this})}}else{const L=Math.max(0,l.start),O=Math.min(I.count,l.start+l.count);for(let P=L,B=O-1;P<B;P+=E){if(p.fromBufferAttribute(I,P),_.fromBufferAttribute(I,P+1),v2.distanceSqToSegment(p,_,b,v)>d)continue;b.applyMatrix4(this.matrixWorld);const G=e.ray.origin.distanceTo(b);G<e.near||G>e.far||t.push({distance:G,point:v.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}const cU=new Bt,hU=new Bt;class fre extends NB{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,o=t.count;s<o;s+=2)cU.fromBufferAttribute(t,s),hU.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+cU.distanceTo(hU);e.setAttribute("lineDistance",new kB(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class mre extends NB{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class n7 extends yv{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new kh(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const dU=new Vs,lD=new jI,LC=new r_,DC=new Bt;class gre extends ah{constructor(e=new Ov,t=new n7){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),LC.copy(i.boundingSphere),LC.applyMatrix4(s),LC.radius+=o,e.ray.intersectsSphere(LC)===!1)return;dU.copy(s).invert(),lD.copy(e.ray).applyMatrix4(dU);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=i.index,v=i.attributes.position;if(p!==null){const b=Math.max(0,l.start),E=Math.min(p.count,l.start+l.count);for(let C=b,M=E;C<M;C++){const I=p.getX(C);DC.fromBufferAttribute(v,I),pU(DC,I,d,s,e,t,this)}}else{const b=Math.max(0,l.start),E=Math.min(v.count,l.start+l.count);for(let C=b,M=E;C<M;C++)DC.fromBufferAttribute(v,C),pU(DC,C,d,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}function pU(n,e,t,i,s,o,l){const u=lD.distanceSqToPoint(n);if(u<t){const d=new Bt;lD.closestPointToPoint(n,d),d.applyMatrix4(i);const p=s.ray.origin.distanceTo(d);if(p<s.near||p>s.far)return;o.push({distance:p,distanceToRay:Math.sqrt(u),point:d,index:e,face:null,object:l})}}class BB extends yv{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new kh(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yne,this.normalScale=new sc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new N1,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Lv extends BB{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new sc(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Mp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new kh(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new kh(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new kh(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function NC(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function _re(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function yre(n){function e(s,o){return n[s]-n[o]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function fU(n,e,t){const i=n.length,s=new n.constructor(i);for(let o=0,l=0;l!==i;++o){const u=t[o]*e;for(let d=0;d!==e;++d)s[l++]=n[u+d]}return s}function r7(n,e,t,i){let s=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[s++];if(o===void 0)return;let l=o[i];if(l!==void 0)if(Array.isArray(l))do l=o[i],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=n[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[i],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=n[s++];while(o!==void 0);else do l=o[i],l!==void 0&&(e.push(o.time),t.push(l)),o=n[s++];while(o!==void 0)}class C${constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],o=t[i-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=i+2;;){if(s===void 0){if(e<o)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(o=s,s=t[++i],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(i=2,o=u);for(let d=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(s=o,o=t[--i-1],e>=o)break t}l=i,i=0;break n}break e}for(;i<l;){const u=i+l>>>1;e<t[u]?l=u:i=u+1}if(s=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=i[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class vre extends C${constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:$z,endingEnd:$z}}intervalChanged_(e,t,i){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],d=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case Cz:o=e,u=2*t-i;break;case Mz:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=i}if(d===void 0)switch(this.getSettings_().endingEnd){case Cz:l=e,d=2*i-t;break;case Mz:l=1,d=i+s[1]-s[0];break;default:l=e-1,d=t}const p=(i-t)*.5,_=this.valueSize;this._weightPrev=p/(t-u),this._weightNext=p/(d-i),this._offsetPrev=o*_,this._offsetNext=l*_}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,_=this._offsetPrev,v=this._offsetNext,b=this._weightPrev,E=this._weightNext,C=(i-t)/(s-t),M=C*C,I=M*C,L=-b*I+2*b*M-b*C,O=(1+b)*I+(-1.5-2*b)*M+(-.5+b)*C+1,P=(-1-E)*I+(1.5+E)*M+.5*C,B=E*I-E*M;for(let z=0;z!==u;++z)o[z]=L*l[_+z]+O*l[p+z]+P*l[d+z]+B*l[v+z];return o}}class bre extends C${constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,_=(i-t)/(s-t),v=1-_;for(let b=0;b!==u;++b)o[b]=l[p+b]*v+l[d+b]*_;return o}}class Tre extends C${constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class i_{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=NC(t,this.TimeBufferType),this.values=NC(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:NC(e.times,Array),values:NC(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Tre(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new bre(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new vre(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Gw:t=this.InterpolantFactoryMethodDiscrete;break;case eE:t=this.InterpolantFactoryMethodLinear;break;case Jk:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gw;case this.InterpolantFactoryMethodLinear:return eE;case this.InterpolantFactoryMethodSmooth:return Jk}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let o=0,l=s-1;for(;o!==s&&i[o]<e;)++o;for(;l!==-1&&i[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=i.slice(o,l),this.values=this.values.slice(o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const d=i[u];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,d),e=!1;break}if(l!==null&&l>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,d,l),e=!1;break}l=d}if(s!==void 0&&_re(s))for(let u=0,d=s.length;u!==d;++u){const p=s[u];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===Jk,o=e.length-1;let l=1;for(let u=1;u<o;++u){let d=!1;const p=e[u],_=e[u+1];if(p!==_&&(u!==1||p!==e[0]))if(s)d=!0;else{const v=u*i,b=v-i,E=v+i;for(let C=0;C!==i;++C){const M=t[v+C];if(M!==t[b+C]||M!==t[E+C]){d=!0;break}}}if(d){if(u!==l){e[l]=e[u];const v=u*i,b=l*i;for(let E=0;E!==i;++E)t[b+E]=t[v+E]}++l}}if(o>0){e[l]=e[o];for(let u=o*i,d=l*i,p=0;p!==i;++p)t[d+p]=t[u+p];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}i_.prototype.TimeBufferType=Float32Array;i_.prototype.ValueBufferType=Float32Array;i_.prototype.DefaultInterpolation=eE;class $E extends i_{}$E.prototype.ValueTypeName="bool";$E.prototype.ValueBufferType=Array;$E.prototype.DefaultInterpolation=Gw;$E.prototype.InterpolantFactoryMethodLinear=void 0;$E.prototype.InterpolantFactoryMethodSmooth=void 0;class i7 extends i_{}i7.prototype.ValueTypeName="color";class Vw extends i_{}Vw.prototype.ValueTypeName="number";class Sre extends C${constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=(i-t)/(s-t);let p=e*u;for(let _=p+u;p!==_;p+=4)Lu.slerpFlat(o,0,l,p-u,l,p,d);return o}}class w1 extends i_{InterpolantFactoryMethodLinear(e){return new Sre(this.times,this.values,this.getValueSize(),e)}}w1.prototype.ValueTypeName="quaternion";w1.prototype.DefaultInterpolation=eE;w1.prototype.InterpolantFactoryMethodSmooth=void 0;class CE extends i_{}CE.prototype.ValueTypeName="string";CE.prototype.ValueBufferType=Array;CE.prototype.DefaultInterpolation=Gw;CE.prototype.InterpolantFactoryMethodLinear=void 0;CE.prototype.InterpolantFactoryMethodSmooth=void 0;class jw extends i_{}jw.prototype.ValueTypeName="vector";class Ere{constructor(e,t=-1,i,s=gne){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=qg(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let l=0,u=i.length;l!==u;++l)t.push(wre(i[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=i.length;o!==l;++o)t.push(i_.toJSON(i[o]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const o=t.length,l=[];for(let u=0;u<o;u++){let d=[],p=[];d.push((u+o-1)%o,u,(u+1)%o),p.push(0,1,0);const _=yre(d);d=fU(d,1,_),p=fU(p,1,_),!s&&d[0]===0&&(d.push(o),p.push(p[0])),l.push(new Vw(".morphTargetInfluences["+t[u].name+"]",d,p).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,d=e.length;u<d;u++){const p=e[u],_=p.name.match(o);if(_&&_.length>1){const v=_[1];let b=s[v];b||(s[v]=b=[]),b.push(p)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,i));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(v,b,E,C,M){if(E.length!==0){const I=[],L=[];r7(E,I,L,C),I.length!==0&&M.push(new v(b,I,L))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let d=e.length||-1;const p=e.hierarchy||[];for(let v=0;v<p.length;v++){const b=p[v].keys;if(!(!b||b.length===0))if(b[0].morphTargets){const E={};let C;for(C=0;C<b.length;C++)if(b[C].morphTargets)for(let M=0;M<b[C].morphTargets.length;M++)E[b[C].morphTargets[M]]=-1;for(const M in E){const I=[],L=[];for(let O=0;O!==b[C].morphTargets.length;++O){const P=b[C];I.push(P.time),L.push(P.morphTarget===M?1:0)}s.push(new Vw(".morphTargetInfluence["+M+"]",I,L))}d=E.length*l}else{const E=".bones["+t[v].name+"]";i(jw,E+".position",b,"pos",s),i(w1,E+".quaternion",b,"rot",s),i(jw,E+".scale",b,"scl",s)}}return s.length===0?null:new this(o,d,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function xre(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Vw;case"vector":case"vector2":case"vector3":case"vector4":return jw;case"color":return i7;case"quaternion":return w1;case"bool":case"boolean":return $E;case"string":return CE}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function wre(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=xre(n.type);if(n.times===void 0){const t=[],i=[];r7(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const av={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class $re{constructor(e,t,i){const s=this;let o=!1,l=0,u=0,d;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(_){u++,o===!1&&s.onStart!==void 0&&s.onStart(_,l,u),o=!0},this.itemEnd=function(_){l++,s.onProgress!==void 0&&s.onProgress(_,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(_){s.onError!==void 0&&s.onError(_)},this.resolveURL=function(_){return d?d(_):_},this.setURLModifier=function(_){return d=_,this},this.addHandler=function(_,v){return p.push(_,v),this},this.removeHandler=function(_){const v=p.indexOf(_);return v!==-1&&p.splice(v,2),this},this.getHandler=function(_){for(let v=0,b=p.length;v<b;v+=2){const E=p[v],C=p[v+1];if(E.global&&(E.lastIndex=0),E.test(_))return C}return null}}}const Cre=new $re;class B1{constructor(e){this.manager=e!==void 0?e:Cre,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,o){i.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}B1.DEFAULT_MATERIAL_NAME="__DEFAULT";const D_={};class Mre extends Error{constructor(e,t){super(e),this.response=t}}class eI extends B1{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=av.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(D_[e]!==void 0){D_[e].push({onLoad:t,onProgress:i,onError:s});return}D_[e]=[],D_[e].push({onLoad:t,onProgress:i,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,d=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const _=D_[e],v=p.body.getReader(),b=p.headers.get("Content-Length")||p.headers.get("X-File-Size"),E=b?parseInt(b):0,C=E!==0;let M=0;const I=new ReadableStream({start(L){O();function O(){v.read().then(({done:P,value:B})=>{if(P)L.close();else{M+=B.byteLength;const z=new ProgressEvent("progress",{lengthComputable:C,loaded:M,total:E});for(let G=0,j=_.length;G<j;G++){const H=_[G];H.onProgress&&H.onProgress(z)}L.enqueue(B),O()}})}}});return new Response(I)}else throw new Mre(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(_=>new DOMParser().parseFromString(_,u));case"json":return p.json();default:if(u===void 0)return p.text();{const v=/charset="?([^;"\s]*)"?/i.exec(u),b=v&&v[1]?v[1].toLowerCase():void 0,E=new TextDecoder(b);return p.arrayBuffer().then(C=>E.decode(C))}}}).then(p=>{av.add(e,p);const _=D_[e];delete D_[e];for(let v=0,b=_.length;v<b;v++){const E=_[v];E.onLoad&&E.onLoad(p)}}).catch(p=>{const _=D_[e];if(_===void 0)throw this.manager.itemError(e),p;delete D_[e];for(let v=0,b=_.length;v<b;v++){const E=_[v];E.onError&&E.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Are extends B1{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=av.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=aD("img");function d(){_(),av.add(e,this),t&&t(this),o.manager.itemEnd(e)}function p(v){_(),s&&s(v),o.manager.itemError(e),o.manager.itemEnd(e)}function _(){u.removeEventListener("load",d,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",d,!1),u.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class Ire extends B1{constructor(e){super(e)}load(e,t,i,s){const o=new $m,l=new Are(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},i,s),o}}class PB extends ah{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new kh(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const b2=new Vs,mU=new Bt,gU=new Bt;class FB{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new sc(512,512),this.map=null,this.mapPass=null,this.matrix=new Vs,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new sre,this._frameExtents=new sc(1,1),this._viewportCount=1,this._viewports=[new lg(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;mU.setFromMatrixPosition(e.matrixWorld),t.position.copy(mU),gU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(gU),t.updateMatrixWorld(),b2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(b2),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(b2)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Rre extends FB{constructor(){super(new OB(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Ww*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class kre extends PB{constructor(e,t,i=0,s=Math.PI/3,o=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ah.DEFAULT_UP),this.updateMatrix(),this.target=new ah,this.distance=i,this.angle=s,this.penumbra=o,this.decay=l,this.map=null,this.shadow=new Rre}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _U=new Vs,bx=new Bt,T2=new Bt;class Ore extends FB{constructor(){super(new OB(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new sc(4,2),this._viewportCount=6,this._viewports=[new lg(2,1,1,1),new lg(0,1,1,1),new lg(3,1,1,1),new lg(1,1,1,1),new lg(3,0,1,1),new lg(1,0,1,1)],this._cubeDirections=[new Bt(1,0,0),new Bt(-1,0,0),new Bt(0,0,1),new Bt(0,0,-1),new Bt(0,1,0),new Bt(0,-1,0)],this._cubeUps=[new Bt(0,1,0),new Bt(0,1,0),new Bt(0,1,0),new Bt(0,1,0),new Bt(0,0,1),new Bt(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),bx.setFromMatrixPosition(e.matrixWorld),i.position.copy(bx),T2.copy(i.position),T2.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(T2),i.updateMatrixWorld(),s.makeTranslation(-bx.x,-bx.y,-bx.z),_U.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_U)}}class Lre extends PB{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new Ore}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Dre extends FB{constructor(){super(new Q8(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Nre extends PB{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ah.DEFAULT_UP),this.updateMatrix(),this.target=new ah,this.shadow=new Dre}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class c1{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Bre extends B1{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=av.get(e);if(l!==void 0){if(o.manager.itemStart(e),l.then){l.then(p=>{t&&t(p),o.manager.itemEnd(e)}).catch(p=>{s&&s(p)});return}return setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader;const d=fetch(e,u).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(p){return av.add(e,p),t&&t(p),o.manager.itemEnd(e),p}).catch(function(p){s&&s(p),av.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});av.add(e,d),o.manager.itemStart(e)}}const zB="\\[\\]\\.:\\/",Pre=new RegExp("["+zB+"]","g"),UB="[^"+zB+"]",Fre="[^"+zB.replace("\\.","")+"]",zre=/((?:WC+[\/:])*)/.source.replace("WC",UB),Ure=/(WCOD+)?/.source.replace("WCOD",Fre),Hre=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",UB),Gre=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",UB),Wre=new RegExp("^"+zre+Ure+Hre+Gre+"$"),Vre=["material","materials","bones","map"];class jre{constructor(e,t,i){const s=i||$a.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class $a{constructor(e,t,i){this.path=t,this.parsedPath=i||$a.parseTrackName(t),this.node=$a.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new $a.Composite(e,t,i):new $a(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Pre,"")}static parseTrackName(e){const t=Wre.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=i.nodeName.substring(s+1);Vre.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const d=i(u.children);if(d)return d}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=$a.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let p=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let _=0;_<e.length;_++)if(e[_].name===p){p=_;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[s];if(l===void 0){const p=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}d=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(d=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}$a.Composite=jre;$a.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$a.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$a.prototype.GetterByBindingType=[$a.prototype._getValue_direct,$a.prototype._getValue_array,$a.prototype._getValue_arrayElement,$a.prototype._getValue_toArray];$a.prototype.SetterByBindingTypeAndVersioning=[[$a.prototype._setValue_direct,$a.prototype._setValue_direct_setNeedsUpdate,$a.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$a.prototype._setValue_array,$a.prototype._setValue_array_setNeedsUpdate,$a.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$a.prototype._setValue_arrayElement,$a.prototype._setValue_arrayElement_setNeedsUpdate,$a.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$a.prototype._setValue_fromArray,$a.prototype._setValue_fromArray_setNeedsUpdate,$a.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:wB}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=wB);const S2=180/Math.PI,nd=Math.PI,sA=.079,E2=2*Math.PI*sA*180/1.5,x2=45,Xre=.3725,Yre=50*nd/180,NT=1e3,D0=1e3,s7="settings",Kre="prompt",HB=0,GB=1,FS=2,Jre={sxyz:[0,0,0,0],sxyx:[0,0,1,0],sxzy:[0,1,0,0],sxzx:[0,1,1,0],syzx:[1,0,0,0],syzy:[1,0,1,0],syxz:[1,1,0,0],syxy:[1,1,1,0],szxy:[2,0,0,0],szxz:[2,0,1,0],szyx:[2,1,0,0],szyz:[2,1,1,0],rzyx:[0,0,0,1],rxyx:[0,0,1,1],ryzx:[0,1,0,1],rxzx:[0,1,1,1],rxzy:[1,0,0,1],ryzy:[1,0,1,1],rzxy:[1,1,0,1],ryxy:[1,1,1,1],ryxz:[2,0,0,1],rzxz:[2,0,1,1],rxyz:[2,1,0,1],rzyz:[2,1,1,1]},yU=[1,2,0,1];function $h(n,e){return n.length<=0?null:i=>{const s=i>n[n.length-1]?i%n[n.length-1]:i;let o=0;for(let l=0;l<n.length&&n[l]<=s;l++)o=l;return e[o]}}const o7=(n,e="szxy")=>{let[t,i,s]=[...n],[o,l,u,d]=[...Jre[e.toLowerCase()]],p=o+1,_=yU[p+l-1]+1,v=yU[p-l]+1;if(d!==0){let j=[t,s];t=j[1],s=j[0]}l!==0&&(i=-1*i),t=t/2,i=i/2,s=s/2;let b=Math.cos(t),E=Math.sin(t),C=Math.cos(i),M=Math.sin(i),I=Math.cos(s),L=Math.sin(s),O=b*I,P=b*L,B=E*I,z=E*L,G=[null,null,null,null];return u!==0?(G[0]=C*(O-z),G[p]=C*(P+B),G[_]=M*(O+z),G[v]=M*(P-B)):(G[0]=C*O+M*z,G[p]=C*B-M*P,G[_]=C*z+M*O,G[v]=C*P-M*B),l!==0&&(G[_]*=-1),G},qre=n=>({x:n.x*S2,y:n.y*S2,z:n.z*S2}),oA=n=>{let e=qre(new N1().setFromQuaternion(new Lu(n.x,n.y,n.z,n.w)));return{x:e.x,y:e.y,z:e.z}},Py=(n,e,t)=>{let i=Math.cos(n*.5),s=Math.cos(e*.5),o=Math.cos(t*.5),l=Math.sin(n*.5),u=Math.sin(e*.5),d=Math.sin(t*.5),p=new Lu;return p.w=o*i*s+d*l*u,p.x=o*l*s-d*i*u,p.y=o*i*u+d*l*s,p.z=d*i*s-o*l*u,p},Qre=n=>n._w===.707&&n._z===.707?nd/2:n._w===.707&&n._z===-.707?-nd/2:n._w===-.707&&n._z===.707?3*nd/4:n._w===-.707&&n._z===-.707?-3*nd/4:n._z===1?nd:n._z===-1?-nd:oA(n).z;function BT(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(e,function(i,s,o,l){return s+s+o+o+l+l});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return console.log(t),t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function Zre(n,e){const t={ignoreAttributes:!1,attributeNamePrefix:"@_"},o=new G8.XMLParser(t).parse(n).robot.joint,l={};return(Array.isArray(o)?o:[o]).forEach(d=>{d["@_name"];const p=d.origin,_=d.parent["@_link"],v=d.child["@_link"],b=p["@_xyz"].split(" ").map(Number),E=p["@_rpy"].split(" ").map(Number),C=o7(E,"sxyz");l[v]={frame:_,position:{x:b[0],y:b[1],z:b[2]},rotation:{w:C[0],x:C[1],y:C[2],z:C[3]},scale:{x:1,y:1,z:1}}}),l.base_link={frame:"world",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},console.log(l),l}function eie(n){const e={ignoreAttributes:!1,attributeNamePrefix:"@_",parseAttributeValue:!0},i=new G8.XMLParser(e).parse(n),s=i.robot.link,o=i.robot.material,l={},u={};return o&&(Array.isArray(o)?o:[o]).forEach(_=>{const v=_["@_name"],b=_.color["@_rgba"].split(" ").map(Number);u[v]={r:b[0],g:b[1],b:b[2],a:b[3]}}),(Array.isArray(s)?s:[s]).forEach(p=>{var C,M;const _=p["@_name"],v=p.visual;let b=null,E=null;if((C=v==null?void 0:v.geometry)!=null&&C.mesh&&(b=v.geometry.mesh["@_filename"],E=(M=v.geometry.mesh["@_scale"])==null?void 0:M.split(" ").map(Number)),_&&v&&b){if(v.material.color){let P=v.material.color["@_rgba"].split(" ").map(Number);P[0],P[1],P[2],P[3]}else v.material["@_name"]&&u[v.material["@_name"]]&&u[v.material["@_name"]];const I=v.origin["@_xyz"].split(" ").map(Number),L=v.origin["@_rpy"].split(" ").map(Number),O=o7(L,"sxyz");l[_]={shape:b,name:_,frame:_,position:{x:I[0],y:I[1],z:I[2]},rotation:{w:O[0],x:O[1],y:O[2],z:O[3]},color:{r:.7*255,g:.7*255,b:.7*255,a:1},scale:E?{x:E[0],y:E[1],z:E[2]}:{x:1,y:1,z:1},highlight:"false"}}}),l}class tie{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=nie.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}reset_elapsed(){return this._elapsed=0,this}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function nie(){document.hidden===!1&&this.reset()}const w2={camera_link:{frame:"HEAD_1",position:{x:null,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},imu_sensor_link:{frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BODY_BASE_CONNECTOR_1:{frame:"base_link",position:{x:-.263414,y:-.061691,z:.210284},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_RIGHT_COVER_1:{frame:"base_link",position:{x:.062309,y:-.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_LEFT_COVER_1:{frame:"base_link",position:{x:.062309,y:.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_FRONT_GRILL_1:{frame:"base_link",position:{x:.039109,y:.043,z:.078796},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Torso_1:{frame:"BODY_BASE_CONNECTOR_1",position:{x:.214514,y:.061691,z:-.095653},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},NECK_GLOBE_BASE_1:{frame:"Torso_1",position:{x:.014661,y:.0228,z:.084122},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_RIGHT_1:{frame:"HEAD_1",position:{x:.08973-.019009,y:-.057013+.025,z:.04831+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_1:{frame:"NECK_GLOBE_BASE_1",position:{x:.034239,y:-.02,z:.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},EYE_LENS_1:{frame:"HEAD_1",position:{x:.016845-.019009,y:.061941+.025,z:.034753+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FACE_1:{frame:"EYE_LENS_1",position:{x:.076086,y:.007237,z:-.003703},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},VISOR_GLASS_1:{frame:"HEAD_1",position:{x:.111798-.019009,y:-.024175+.025,z:-.124256+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_LEFT_1:{frame:"HEAD_1",position:{x:-.042326-.019009,y:.038377+.025,z:-.162881+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_1:{frame:"LEFT_ARM_CONNECTOR_1",position:{x:-.013297,y:.005336,z:-.001514},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_1:{frame:"RIGHT_ARM_CONNECTOR_1",position:{x:-.014964,y:-.001971,z:-287e-6},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Battery_1:{frame:"base_link",position:{x:-.321414,y:.065009,z:.175134},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:-.066216,z:.057987},rotation:{w:.924,x:0,y:.383,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:.066216,z:.057987},rotation:{w:.924,x:0,y:.383,z:0},scale:{x:1,y:1,z:1}},FRONT_LEFT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FRONT_RIGHT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:-.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BALANCE_WHEEL:{frame:"base_link",position:{x:-.075191,y:0,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},base_link:{frame:"world",position:{x:0,y:0,z:0},rotation:{w:.707,x:0,y:0,z:-.707},scale:{x:1,y:1,z:1}}},$2={base_link:{shape:"package://misty_description/meshes/base_link.stl",name:"base_link",frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl",name:"MIDDLE_LEFT_WHEEL_1",frame:"MIDDLE_LEFT_WHEEL_1",position:{x:.006691,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl",name:"REAR_LEFT_WHEEL_1",frame:"REAR_LEFT_WHEEL_1",position:{x:.075191,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl",name:"REAR_RIGHT_WHEEL_1",frame:"REAR_RIGHT_WHEEL_1",position:{x:.075191,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl",name:"MIDDLE_RIGHT_WHEEL_1",frame:"MIDDLE_RIGHT_WHEEL_1",position:{x:.006691,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BODY_BASE_CONNECTOR_1:{shape:"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl",name:"BODY_BASE_CONNECTOR_1",frame:"BODY_BASE_CONNECTOR_1",position:{x:.263414,y:.061691,z:-.210284},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_RIGHT_COVER_1:{shape:"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl",name:"BASE_RIGHT_COVER_1",frame:"BASE_RIGHT_COVER_1",position:{x:-.062309,y:.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_LEFT_COVER_1:{shape:"package://misty_description/meshes/BASE_LEFT_COVER_1.stl",name:"BASE_LEFT_COVER_1",frame:"BASE_LEFT_COVER_1",position:{x:-.062309,y:-.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_FRONT_GRILL_1:{shape:"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl",name:"BASE_FRONT_GRILL_1",frame:"BASE_FRONT_GRILL_1",position:{x:-.039109,y:-.043,z:-.078796},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Torso_1:{shape:"package://misty_description/meshes/Torso_1.stl",name:"Torso_1",frame:"Torso_1",position:{x:.0489,y:0,z:-.114631},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},NECK_GLOBE_BASE_1:{shape:"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl",name:"NECK_GLOBE_BASE_1",frame:"NECK_GLOBE_BASE_1",position:{x:.034239,y:-.0228,z:-.198753},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_RIGHT_1:{shape:"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl",name:"HEAD_VENT_RIGHT_1",frame:"HEAD_VENT_RIGHT_1",position:{x:-.070814,y:.032838,z:-.485664},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_1:{shape:"package://misty_description/meshes/HEAD_1.stl",name:"HEAD_1",frame:"HEAD_1",position:{x:0,y:0,z:-.25},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},EYE_LENS_1:{shape:"package://misty_description/meshes/EYE_LENS_1.stl",name:"EYE_LENS_1",frame:"EYE_LENS_1",position:{x:.002071,y:-.086116,z:-.472107},rotation:{w:1,x:0,y:0,z:0},color:{r:0,g:0,b:0,a:.5},scale:{x:.001,y:.001,z:.001},highlight:"false"},FACE_1:{shape:"package://misty_description/meshes/FACE_1.stl",name:"FACE_1",frame:"FACE_1",position:{x:-.074015,y:-.093353,z:-.468404-.02},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.00105,y:.00105,z:.00105},highlight:"false"},eyes_acceptance:{shape:"eyes_acceptance",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_admiration:{shape:"eyes_admiration",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_amazement:{shape:"eyes_amazement",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_anger:{shape:"eyes_anger",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_annoyed:{shape:"eyes_annoyed",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_anticipation:{shape:"eyes_anticipation",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_apprehension:{shape:"eyes_apprehension",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_apprehension_1:{shape:"eyes_apprehension_1",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_boredom:{shape:"eyes_boredom",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_default:{shape:"eyes_default",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!1},eyes_disgust:{shape:"eyes_disgust",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_distraction:{shape:"eyes_distraction",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_ecstasy_frame_1:{shape:"eyes_ecstasy_frame_1",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_ecstasy_frame_2:{shape:"eyes_ecstasy_frame_2",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_fear:{shape:"eyes_fear",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_grief:{shape:"eyes_grief",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_interest:{shape:"eyes_interest",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_joy:{shape:"eyes_joy",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_loathing:{shape:"eyes_loathing",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_pensiveness:{shape:"eyes_pensiveness",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_rage:{shape:"eyes_rage",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_sad:{shape:"eyes_sad",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_serenity:{shape:"eyes_serenity",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_surprise:{shape:"eyes_surprise",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_terror:{shape:"eyes_terror",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_trust:{shape:"eyes_trust",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_vigilance:{shape:"eyes_vigilance",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Sleeping:{shape:"e_Sleeping",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_SleepingZZZ:{shape:"e_SleepingZZZ",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Contempt:{shape:"e_Contempt",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_ContentLeft:{shape:"e_ContentLeft",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_ContentRight:{shape:"e_ContentRight",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Disoriented:{shape:"e_Disoriented",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_EcstacyHilarious:{shape:"e_EcstacyHilarious",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_EcstacyStarryEyed:{shape:"e_EcstacyStarryEyed",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_JoyGoofy:{shape:"e_JoyGoofy",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_JoyGoofy2:{shape:"e_JoyGoofy2",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_JoyGoofy3:{shape:"e_JoyGoofy3",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Love:{shape:"e_Love",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Rage:{shape:"e_Rage",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Rage2:{shape:"e_Rage2",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Rage3:{shape:"e_Rage3",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Rage4:{shape:"e_Rage4",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_RemorseShame:{shape:"e_RemorseShame",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},VISOR_GLASS_1:{shape:"package://misty_description/meshes/VISOR_GLASS_1.stl",name:"VISOR_GLASS_1",frame:"VISOR_GLASS_1",position:{x:-.092882,y:0,z:-.313098},rotation:{w:1,x:0,y:0,z:0},color:{r:22,g:22,b:22,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_LEFT_1:{shape:"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl",name:"HEAD_VENT_LEFT_1",frame:"HEAD_VENT_LEFT_1",position:{x:.061242,y:-.062552,z:-.274473},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_1:{shape:"package://misty_description/meshes/LEFT_ARM_1.stl",name:"LEFT_ARM_1",frame:"LEFT_ARM_1",position:{x:.017446,y:-.071552,z:-.171104},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_1:{shape:"package://misty_description/meshes/RIGHT_ARM_1.stl",name:"RIGHT_ARM_1",frame:"RIGHT_ARM_1",position:{x:.019113,y:.068187,z:-.172331},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Battery_1:{shape:"package://misty_description/meshes/Battery_1.stl",name:"Battery_1",frame:"Battery_1",position:{x:.321414,y:-.065009,z:-.175134},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl",name:"RIGHT_ARM_CONNECTOR_1",frame:"RIGHT_ARM_CONNECTOR_1",position:{x:.004149,y:.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl",name:"LEFT_ARM_CONNECTOR_1",frame:"LEFT_ARM_CONNECTOR_1",position:{x:.004149,y:-.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl",name:"FRONT_LEFT_WHEEL_1",frame:"FRONT_LEFT_WHEEL_1",position:{x:-.060309,y:-.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl",name:"FRONT_RIGHT_WHEEL_1",frame:"FRONT_RIGHT_WHEEL_1",position:{x:-.060309,y:.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Reset_Button:{shape:"cube",frame:"gizmo",name:"Reset_Button",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:255,g:0,b:0,a:1},scale:{x:1,y:1,z:1}}},rie=`You are an assistive agent that translates descriptions of robot behavior into JSON that describes goals for programming. These goals are individual steps for a user to achieve in order to program the robot to perform the corresponding behavior. A user will use these goals to help them figure out how to build a robot program using a custom interface for programming robots. 
For example, a user might say: "The robot should say "Watch me", play a sound, and then do a dance." 
One possible result is the following set of JSON goals: 
"{
  "task1": {
    "id": "task1",
    "name": "Robot Dance",
    "order": 1,
    "type": "task",
    "subtasks": ["subtask1a", "subtask1b", "subtask1c", "subtask1d", "subtask1e", "subtask1f"]
  },
  "subtask1a": {
    "id": "subtask1a",
    "type": "subtask",
    "title": "Make the robot speak",
    "subtext": "Have the robot say: 'Watch me!'",
    "hints": ["hint1a", "hint1b", "hint1c"]
  },
  "hint1a": {
    "id": "hint1a",
    "type": "hint",
    "text": "Open the 'Speech' category and add a 'Speak' block to your program. You can add it after the 'Start' block."
  },
  "hint1b": {
    "id": "hint1b",
    "type": "hint",
    "text": "Open the 'Speech' category and add a text block to the "Speak" block you added to the program."
  },
  "hint1c": {
    "id": "hint1c",
    "type": "hint",
    "text": "In the text block you added, type 'Watch me!'"
  },
  "subtask1b": {
    "id": "subtask1b",
    "type": "subtask",
    "title": "Play a sound",
    "subtext": "Have the robot start playing some music.",
    "hints": []
  },
  "subtask1c": {
    "id": "subtask1c",
    "type": "subtask",
    "title": "Make the robot move around",
    "subtext": "Drive the robot left, then right. You can vary the speed to make the dance more performative.",
    "hints": ["hint2a", "hint2b", "hint2c", "hint2d"]
  },
  "hint2a": {
    "id": "hint2a",
    "type": "hint",
    "text": "Open the 'Movement' category and add a 'Drive' block to your program. You can add it after the 'Speak' block."
  },
  "hint2b": {
    "id": "hint2b",
    "type": "hint",
    "text": "Make the robot turn left. Add an angular velocity of -100 for 2 seconds."
  },
  "hint2c": {
    "id": "hint2c",
    "type": "hint",
    "text": "Open the 'Movement' category and add another 'Drive' block to your program. You can add it after the other 'Drive' block."
  },
  "hint2d": {
    "id": "hint2d",
    "type": "hint",
    "text": "Make the robot turn right. Add an angular velocity of 100 for 4 seconds."
  },
  "subtask1d": {
    "id": "subtask1d",
    "type": "subtask",
    "title": "Move the robot's arms",
    "subtext": "Move both of the robot's arms upward quickly to show it's excited to dance!",
    "hints": []
  },
  "subtask1e": {
    "id": "subtask1e",
    "type": "subtask",
    "title": "Move the robot's head",
    "subtext": "Move the robot's head left as the music plays.",
    "hints": []
  },
  "subtask1f": {
    "id": "subtask1f",
    "type": "subtask",
    "title": "Move the robot's head",
    "subtext": "Move the robot's head right to complete the dance.",
    "hints": []
  }
}"
Every returned JSON file has the following properties:
1) Every object in the JSON has the following fields: "id" and "type". "id" is unique for each object, and "type" can only be: "hint", "subtask", or "task".
2) "task" refers to the high level goal and there should only ever be 1 of these in the JSON. "task" objects have the following fields in addition to those in 1). These are: "name", "order", and "subtasks". "name" is a 1-3 word description of the overall task goal. "order" will always be 1. "subtasks" is a list of ids of subtasks relevant to the completion of the task.
3) "subtask" refers to a single step in that task. In addition to the fields specified in 1), "subtask" also has the following fields: "title", "subtext", and "hints". "title" refers to a brief description (1-7 words) of the what needs to be done for the current step. "subtext" refers to a more elaborate description of the goal for the subtask. It should be a description of what the user needs to complete, without giving direct instructions (these direct instructions are reserved for "hint" type objects). Finally, "subtask" objects have a "hints" field that is a list of ids of "hint" objects.
4) In addition to the fields specified in 1), "hint" objects have a "text" field that offers advice for the subtask, such as describing where to find program blocks in the interface, where to connect blocks to, etc.
5) Most "subtasks" should have between 1 and 5 hints. If you can explain a subtask further, create a hint for it!

The user who is building the program has access to a custom block-based programming interface. This interface has the following categories of program blocks: "Logic", "Loops", "Math", "Movement", "Light", "Speech", "Face", "Audio", and "Misc". 
In the "Logic" category, users have access to if statements, boolean values, and negation blocks. 
In the "Loops" category, users have acces to a while loop block that allows them to specify the number of iterations to perform.
In the "Math" category, users have access to a number block that allows them to input any number they want, as well as a random number block that allows them to specify a min and max number for the random generation.
In the "Movement" category, users have access to blocks for moving different parts of the robot. This include blocks to control the movement of the robot's head, arms, as well as allow the robot to drive and turn.
In the "Light" category, users have acces to blocks for controlling the various lights on the robot. This inculdes blocks for turning the flashlight on or off, as well as changing the color of the LED on the robot's chest. This category also has blocks for selecting colors for the LED (random color selection, or RGB color picker).
In the "Speech" category, users have access to blocks for controlling what the robot says. This includes a "Speak" block that accepts a "Text" block. The "Text" block allows users to type anything they want the robot to say. There is also another "Speak" block that has a dropdown list of common things to say. This dropdown list includes: "Hi", "Hello", "How are you today?", and "Goodbye".
In the "Face" category, users have access to blocks for changing the robot's facial expression. This includes a "Change Face" block that accepts a specific face to apply to the robot. The rest of the blocks in the category are specific faces the user can apply. This list is:
  "Sleeping",
  "SleepingZZZ",
  "Contempt",
  "ContentLeft",
  "ContentRight",
  "Disoriented",
  "EcstacyHilarious",
  "EcstacyStarryEyed",
  "JoyGoofy",
  "JoyGoofy2",
  "JoyGoofy3",
  "Love",
  "Rage",
  "Rage2",
  "Rage3",
  "Rage4",
  "RemorseShame",
  "acceptance",
  "admiration",
  "amazement",
  "anger",
  "annoyed",
  "anticipation",
  "apprehension",
  "apprehension_1",
  "boredom",
  "default",
  "disgust",
  "distraction",
  "ecstasy_frame_1",
  "ecstasy_frame_2",
  "fear",
  "grief",
  "interest",
  "joy",
  "loathing",
  "pensiveness",
  "rage",
  "sad",
  "serenity",
  "surprise",
  "terror",
  "trust",
  "vigilance"
In the "Audio" category, users have access to blocks for playing audio files through the robot's speakers. This includes a "Play Audio" block that accepts a specific file to play on the robot. The rest of the blocks in the category are specific audio files the user can play. This list is:
  "Acceptance",
  "Amazement",
  "Amazement2",
  "Anger",
  "Anger2",
  "Anger3",
  "Anger4",
  "Annoyance",
  "Annoyance2",
  "Annoyance3",
  "Annoyance4",
  "Awe",
  "Awe2",
  "Awe3",
  "Boredom",
  "Disapproval",
  "Disgust",
  "Disgust2",
  "Disgust3",
  "DisorientedConfused",
  "DisorientedConfused2",
  "DisorientedConfused3",
  "DisorientedConfused4",
  "DisorientedConfused5",
  "DisorientedConfused6",
  "Distraction",
  "Ecstacy",
  "Ecstacy2",
  "Fear",
  "Grief",
  "Grief2",
  "Grief3",
  "Grief4",
  "Joy",
  "Joy2",
  "Joy3",
  "Joy4",
  "Loathing",
  "Love",
  "PhraseByeBye",
  "PhraseEvilAhHa",
  "PhraseHello",
  "PhraseNoNoNo",
  "PhraseOopsy",
  "PhraseOwOwOw",
  "PhraseOwwww",
  "PhraseUhOh",
  "Rage",
  "Sadness",
  "Sadness2",
  "Sadness3",
  "Sadness4",
  "Sadness5",
  "Sadness6",
  "Sadness7",
  "Sleepy",
  "Sleepy2",
  "Sleepy3" 
  "Sleepy4",
  "SleepySnore",
  "SystemCameraShutter"
Finally, in the "Misc" category, users have a few blocks to select from. The user can use the "Display Text" block to display text on the robot's face. This allows the user to type whatever text they want to appear. There is also a "Clear Text" block to clear all text from the robot's face. And finally there is a "Wait" block that allows the users to specify an amount of time for the robot to do nothing.

Any tasks, subtasks, and hints you create can only use these blocks and categories! ONLY respond with the JSON and be sure that the output JSON is valid according to the rules here as well as the normal JSON formatting rules. Do not explain anything.`,iie={id:"task1",name:"Find and Grab Object",order:1,type:"task",subtasks:["subtask1a","subtask1b","subtask1c","subtask1d","subtask1e","subtask1f","subtask1g","subtask1h"]},sie={id:"subtask1a",type:"subtask",title:"Move the robot",subtext:"Move the robot around, looking confused and searching for the object.",hints:["hint1a","hint1b","hint1c","hint1d"]},oie={id:"hint1a",type:"hint",text:"To make the robot move around, add a 'Drive' block from the 'Movement' category to your program. You can add it after the 'Start' block."},aie={id:"hint1b",type:"hint",text:"Add an angular velocity of -100 for 2 seconds to make the robot turn left."},lie={id:"hint1c",type:"hint",text:"Add an angular velocity of 100 for 2 seconds to make the robot turn right."},uie={id:"hint1d",type:"hint",text:"Add a 'Wait' block from the 'Misc' category to your program to create pauses in the robot's movement."},cie={id:"subtask1b",type:"subtask",title:"Make the robot look confused",subtext:"Change the robot's facial expression to look confused while it searches for the object.",hints:["hint2a","hint2b"]},hie={id:"hint2a",type:"hint",text:"Add a 'Change Face' block from the 'Face' category to your program."},die={id:"hint2b",type:"hint",text:"Select 'Disoriented' from the list of faces to make the robot look confused."},pie={id:"subtask1c",type:"subtask",title:"Find the object",subtext:"Make the robot find the object it is searching for.",hints:[]},fie={id:"subtask1d",type:"subtask",title:"Make the robot look surprised",subtext:"Change the robot's facial expression to look surprised when it finds the object.",hints:["hint3a","hint3b"]},mie={id:"hint3a",type:"hint",text:"Add a 'Change Face' block from the 'Face' category to your program."},gie={id:"hint3b",type:"hint",text:"Select 'Surprise' from the list of faces to make the robot look surprised."},_ie={id:"subtask1e",type:"subtask",title:"Make the robot look happy",subtext:"Change the robot's facial expression to look happy and point to the object it found.",hints:["hint4a","hint4b","hint4c"]},yie={id:"hint4a",type:"hint",text:"Add a 'Change Face' block from the 'Face' category to your program."},vie={id:"hint4b",type:"hint",text:"Select 'Joy4' from the list of faces to make the robot look happy."},bie={id:"hint4c",type:"hint",text:"Add a 'Drive' block from the 'Movement' category to your program and set the angular velocity to 50. Follow it up with a 'Wait' block from the 'Misc' category to create a pause, then add another 'Drive' block with an angular velocity of -50."},Tie={id:"subtask1f",type:"subtask",title:"Make the robot speak",subtext:"Make the robot say 'Aha, there you are!'",hints:["hint5a","hint5b"]},Sie={id:"hint5a",type:"hint",text:"Add a 'Speak' block from the 'Speech' category to your program."},Eie={id:"hint5b",type:"hint",text:"Add a 'Text' block inside the 'Speak' block and type: 'Aha, there you are!'"},xie={id:"subtask1g",type:"subtask",title:"Move the robot to the object",subtext:"Drive the robot to the object it found.",hints:["hint6a","hint6b"]},wie={id:"hint6a",type:"hint",text:"Add a 'Drive' block from the 'Movement' category to your program."},$ie={id:"hint6b",type:"hint",text:"Choose a velocity that will get you to the object quickly but safely. Start with a linear velocity of 50 and adjust as necessary."},Cie={id:"subtask1h",type:"subtask",title:"Grab the object",subtext:"Make the robot grab the object it found.",hints:["hint7a","hint7b"]},Mie={id:"hint7a",type:"hint",text:"Add a 'Grab' block from the 'Misc' category to your program."},Aie={id:"hint7b",type:"hint",text:"The 'Grab' block is a toggle. Clicking the block once will make the robot open its grip. Click it again to make the robot close its grip."},Iie={task1:iie,subtask1a:sie,hint1a:oie,hint1b:aie,hint1c:lie,hint1d:uie,subtask1b:cie,hint2a:hie,hint2b:die,subtask1c:pie,subtask1d:fie,hint3a:mie,hint3b:gie,subtask1e:_ie,hint4a:yie,hint4b:vie,hint4c:bie,subtask1f:Tie,hint5a:Sie,hint5b:Eie,subtask1g:xie,hint6a:wie,hint6b:$ie,subtask1h:Cie,hint7a:Mie,hint7b:Aie},Rie=`You are an assistive agent that translates descriptions of robot behavior into JSON that corresponds to programming blocks that emulate said behavior. For example, a user might say: "The robot should say "Watch me", play a sound, and then do a dance." One possible result is the following,
"{data: [
  {id: "block1", type: "Speak", FIELD_Speak_Text: "block2", nextStatement: "block3"}, 
  {id: "block2", type: "text", value: "Watch me"}, 
  {id: "block3", type: "PlayAudio", FIELD_PlayAudio_Filename: "block4", nextStatement: "block6"}, 
  {id: "block4", type: "audio", value: "s_Joy"},
  {id: "block6", type: "DriveTime2", FIELD_DriveTime_Velocity: "block7", FIELD_DriveTime_Angular: "block8", FIELD_DriveTime_TimeMs: "block9", nextStatement: "block10"},
  {id: "block7", type: "math_number", value: "0"},
  {id: "block8", type: "math_number", value: "-100"},
  {id: "block9", type: "math_number", value: "2"},
  {id: "block10", type: "DriveTime2", FIELD_DriveTime_Velocity: "block11", FIELD_DriveTime_Angular: "block12", FIELD_DriveTime_TimeMs: "block13", nextStatement: "block14"},
  {id: "block11", type: "math_number", value: "0"},
  {id: "block12", type: "math_number", value: "100"},
  {id: "block13", type: "math_number", value: "4"},
  {id: "block14", type: "MoveArms2", FIELD_MoveArm_LeftPosition: "block15", FIELD_MoveArm_LeftVelocity: "block16", FIELD_MoveArm_RightPosition: "block17", FIELD_MoveArm_RightVelocity: "block18", nextStatement: "block19"},
  {id: "block15", type: "math_number", value: "-90"},
  {id: "block16", type: "math_number", value: "100"},
  {id: "block17", type: "math_number", value: "-90"},
  {id: "block18", type: "math_number", value: "100"},
  {id: "block19", type: "MoveHead3", FIELD_MoveHead_Pitch: "block20", FIELD_MoveHead_Roll: "block21", FIELD_MoveHead_Yaw: "block22", FIELD_MoveHead_Time: "block23"},
  {id: "block20", type: "math_number", value: "-10"},
  {id: "block21", type: "math_number", value: "10"},
  {id: "block22", type: "math_number", value: "-30"},
  {id: "block23", type: "math_number", value: "1"}
]}". 

Every json block has the following fields: [id, type]. id is a unique identifier. Each block must have a unique id. type defines what kind of block it is. There are a total of 14 blocks that you can use to create programs. These are: [MoveArms2, MoveHead3, DriveTime2, math_number, Speak, text, ChangeLED, Colour, DisplayImage, face, DisplayText, ClearText, PlayAudio, audio].
In addition to the "id" and "type" fields, math_number blocks have a field called "value" for a numeric value.
In addition to the "id" and "type" fields, text blocks have a field called "value" for a string value representing what is spoken or said by the robot.
In addition to the "id" and "type" fields, face blocks have a field called "value" for which face to use. The list of available faces is [
  "e_Sleeping",
  "e_SleepingZZZ",
  "e_Contempt",
  "e_ContentLeft",
  "e_ContentRight",
  "e_Disoriented",
  "e_EcstacyHilarious",
  "e_EcstacyStarryEyed",
  "e_JoyGoofy",
  "e_JoyGoofy2",
  "e_JoyGoofy3",
  "e_Love",
  "e_Rage",
  "e_Rage2",
  "e_Rage3",
  "e_Rage4",
  "e_RemorseShame",
  "eyes_acceptance",
  "eyes_admiration",
  "eyes_amazement",
  "eyes_anger",
  "eyes_annoyed",
  "eyes_anticipation",
  "eyes_apprehension",
  "eyes_apprehension_1",
  "eyes_boredom",
  "eyes_default",
  "eyes_disgust",
  "eyes_distraction",
  "eyes_ecstasy_frame_1",
  "eyes_ecstasy_frame_2",
  "eyes_fear",
  "eyes_grief",
  "eyes_interest",
  "eyes_joy",
  "eyes_loathing",
  "eyes_pensiveness",
  "eyes_rage",
  "eyes_sad",
  "eyes_serenity",
  "eyes_surprise",
  "eyes_terror",
  "eyes_trust",
  "eyes_vigilance"
]. Do not create your own! You can only use faces from this list!
In addition to the "id" and "type" fields, audio blocks have a field called "value" for which audio to play. The list of available audio is [
  "s_Acceptance",
  "s_Amazement",
  "s_Amazement2",
  "s_Anger",
  "s_Anger2",
  "s_Anger3",
  "s_Anger4",
  "s_Annoyance",
  "s_Annoyance2",
  "s_Annoyance3",
  "s_Annoyance4",
  "s_Awe",
  "s_Awe2",
  "s_Awe3",
  "s_Boredom",
  "s_Disapproval",
  "s_Disgust",
  "s_Disgust2",
  "s_Disgust3",
  "s_DisorientedConfused",
  "s_DisorientedConfused2",
  "s_DisorientedConfused3",
  "s_DisorientedConfused4",
  "s_DisorientedConfused5",
  "s_DisorientedConfused6",
  "s_Distraction",
  "s_Ecstacy",
  "s_Ecstacy2",
  "s_Fear",
  "s_Grief",
  "s_Grief2",
  "s_Grief3",
  "s_Grief4",
  "s_Joy",
  "s_Joy2",
  "s_Joy3",
  "s_Joy4",
  "s_Loathing",
  "s_Love",
  "s_PhraseByeBye",
  "s_PhraseEvilAhHa",
  "s_PhraseHello",
  "s_PhraseNoNoNo",
  "s_PhraseOopsy",
  "s_PhraseOwOwOw",
  "s_PhraseOwwww",
  "s_PhraseUhOh",
  "s_Rage",
  "s_Sadness",
  "s_Sadness2",
  "s_Sadness3",
  "s_Sadness4",
  "s_Sadness5",
  "s_Sadness6",
  "s_Sadness7",
  "s_Sleepy",
  "s_Sleepy2",
  "s_Sleepy3" 
  "s_Sleepy4",
  "s_SleepySnore",
  "s_SystemCameraShutter"
]. Do not create your own! You can only use audio from this list!
In addition to the "id" and "type" fields, Colour blocks have a field named "value" for a hexadecimal color value.
ChangeLED blocks change the color of the LED on the robot's chest. In addition to the "id" and "type" fields, ChangeLED blocks have a field named "FIELD_ChangeLED" that accepts the id of a Colour block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
Speak blocks allow the robot to say something. In addition to the "id" and "type" fields, Speak blocks have a field named "FIELD_Speak_Text" that accepts the id of a text block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
DisplayImage blocks change the face of the robot to a specified face. In addition to the "id" and "type" fields, DisplayImage blocks have a field called "FIELD_DisplayImage_Filename" that accepts the id of an face block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
PlayAudio blocks allow the robot to play predefined audio files. In addition to the "id" and "type" fields, PlayAudio blocks have a field called "FIELD_PlayAudio_Filename" that accepts the id of an audio block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
DisplayText blocks display text on the robot's screen. In addition to the "id" and "type" fields, DisplayText blocks have a field called "FIELD_DisplayText_Text" that accepts the id of an text block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
ClearText blocks clear any text that is displayed on the robot's screen. ClearText blocks only contain the "id" and "type" fields. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
MoveArms2 blocks allow the robot to move either or both its left and right arms. In addition to the "id" and "type" fields, MoveArms2 blocks have 4 other fields. These are: "FIELD_MoveArm_LeftPosition" for the id of the math_number block that determines the left arm's position (measured in degrees between -90 and 90, where -90 is straight up, and 90 is straight down), "FIELD_MoveArm_RightPosition" for the id of the math_number block for the right arm's position (measured in degrees between -90 and 90, where -90 is straight up, and 90 is straight down), "FIELD_MoveArm_LeftVelocity" for the id of the math_number block that determines the left arm's movement speed (measured between 1 and 100 where 1 is the slowest speed and 100 is the fastest), and "FIELD_MoveArm_RightVelocity" for the id of the math_number block that determines the right arm's movement speed (measured between 1 and 100 where 1 is the slowest speed and 100 is the fastest). It also can have an optional "nextStatement" field that points to the next block in the list to evaluate.
MoveHead3 blocks allow the robot to move its head. In addition to the "id" and "type" fields, MoveHead3 blocks have 4 other fields. These are: "FIELD_MoveHead_Pitch" for the id of the math_number block that determines the pitch value of the robot's head (measured in degrees between -40 and 25, where 25 is maximally looking down and -40 is maximally looking up), "FIELD_MoveHead_Roll" for the id of the math_number block that determines the roll value of the robot's head (measured in degrees between -42 and 42, where -42 tilts the robot's head furthest left and 42 tilts the robot's head furthest right), "FIELD_MoveHead_Yaw" for the id of the math_number block that determines the yaw value of the robot's head (measured in degrees between -90 and 90 where -90 is looking all the way to the left and 90 is looking all the way to the right), and "FIELD_MoveHead_Time" for the id of the math_number block that determines the time it takes to execute the motion (measured in seconds between 1 and 60). It also can have an optional "nextStatement" field that points to the next block in the list to evaluate.
DriveTime2 allow the robot to drive/move about its environment. In addition to the "id" and "type" fields, DriveTime2 blocks have 3 other fields. These are: "FIELD_DriveTime_Velocity" for the id of the math_number block that determines the velocity of the robot's linear motion (measured from -100 to 100, where -100 is maximal velocity backwards and 100 is maximal velocity forwards), "FIELD_DriveTime_Angular" for the id of the math_number block that determines the velocity of the robot's angular motion (measured from -100 to 100, where -100 is maximal velocity turning left and 100 is maximal velocity turning right), and "FIELD_DriveTime_TimeMs" for the id of the math_number block that determines the time it takes to execute the driving (measured in seconds between 1 and 60). It also can have an optional "nextStatement" field that points to the next block in the list to evaluate.

For the MoveArms2, MoveHead3, and DriveTime2 blocks, all json fields (except for "id" and "type") should contain ids to other blocks! This is very important. Do not put numeric values in these fields. Instead, create the appropriate block for that field and use its id instead.
Colour blocks can only exist if a ChangeLED block exists and uses it. face blocks can only exist if a DisplayImage block exists and uses it. audio blocks can only exist if a PlayAudio block exists and uses it. text blocks can only exist if a Speak or DisplayText block exists and uses it. math_number blocks can only exist if another block uses it (for example, such as DriveTime2, MoveArms2, or MoveHead3). Only create blocks based on the fields described above. Do not add extra fields to blocks unless its been specified to do so.
ONLY respond with the JSON and be sure that the output JSON is valid according to the rules here as well as the normal JSON formatting rules. Do not explain anything.`;var tI={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */tI.exports;(function(n,e){(function(){var t,i="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",p=500,_="__lodash_placeholder__",v=1,b=2,E=4,C=1,M=2,I=1,L=2,O=4,P=8,B=16,z=32,G=64,j=128,H=256,Z=512,ae=30,J="...",te=800,he=16,le=1,ce=2,be=3,$e=1/0,q=9007199254740991,oe=17976931348623157e292,se=NaN,pe=4294967295,Se=pe-1,Fe=pe>>>1,Re=[["ary",j],["bind",I],["bindKey",L],["curry",P],["curryRight",B],["flip",Z],["partial",z],["partialRight",G],["rearg",H]],qe="[object Arguments]",Ne="[object Array]",it="[object AsyncFunction]",st="[object Boolean]",pt="[object Date]",dt="[object DOMException]",Ue="[object Error]",Ae="[object Function]",je="[object GeneratorFunction]",nt="[object Map]",tt="[object Number]",Dt="[object Null]",Rt="[object Object]",yt="[object Promise]",Ct="[object Proxy]",Mt="[object RegExp]",mt="[object Set]",xe="[object String]",ie="[object Symbol]",we="[object Undefined]",ct="[object WeakMap]",Tt="[object WeakSet]",At="[object ArrayBuffer]",ft="[object DataView]",Ke="[object Float32Array]",Oe="[object Float64Array]",Q="[object Int8Array]",ne="[object Int16Array]",fe="[object Int32Array]",Ie="[object Uint8Array]",Ye="[object Uint8ClampedArray]",Gt="[object Uint16Array]",He="[object Uint32Array]",Zt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,Kt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yt=/&(?:amp|lt|gt|quot|#39);/g,Rn=/[&<>"']/g,ii=RegExp(Yt.source),Dr=RegExp(Rn.source),Si=/<%-([\s\S]+?)%>/g,xr=/<%([\s\S]+?)%>/g,fr=/<%=([\s\S]+?)%>/g,re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/,Ge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ot=/[\\^$.*+?()[\]{}|]/g,Ft=RegExp(ot.source),nn=/^\s+/,On=/\s/,De=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gt=/\{\n\/\* \[wrapped with (.+)\] \*/,$t=/,? & /,vt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wt=/[()=,{}\[\]\/\s]/,Un=/\\(\\)?/g,tr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mr=/\w*$/,wr=/^[-+]0x[0-9a-f]+$/i,si=/^0b[01]+$/i,Nr=/^\[object .+?Constructor\]$/,jr=/^0o[0-7]+$/i,bs=/^(?:0|[1-9]\d*)$/,Ia=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Eo=/($^)/,Wl=/['\n\r\u2028\u2029\\]/g,en="\\ud800-\\udfff",Ar="\\u0300-\\u036f",qa="\\ufe20-\\ufe2f",Ra="\\u20d0-\\u20ff",Bs=Ar+qa+Ra,Ps="\\u2700-\\u27bf",Li="a-z\\xdf-\\xf6\\xf8-\\xff",Ir="\\xac\\xb1\\xd7\\xf7",Cn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Mr="\\u2000-\\u206f",Ur=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_r="A-Z\\xc0-\\xd6\\xd8-\\xde",Di="\\ufe0e\\ufe0f",Ts=Ir+Cn+Mr+Ur,hi="['’]",fs="["+en+"]",Qa="["+Ts+"]",ka="["+Bs+"]",lc="\\d+",uc="["+Ps+"]",js="["+Li+"]",Yo="[^"+en+Ts+lc+Ps+Li+_r+"]",Vl="\\ud83c[\\udffb-\\udfff]",pu="(?:"+ka+"|"+Vl+")",ch="[^"+en+"]",Ko="(?:\\ud83c[\\udde6-\\uddff]){2}",gr="[\\ud800-\\udbff][\\udc00-\\udfff]",Ei="["+_r+"]",Rc="\\u200d",hh="(?:"+js+"|"+Yo+")",kc="(?:"+Ei+"|"+Yo+")",Tl="(?:"+hi+"(?:d|ll|m|re|s|t|ve))?",fu="(?:"+hi+"(?:D|LL|M|RE|S|T|VE))?",Sl=pu+"?",El="["+Di+"]?",yr="(?:"+Rc+"(?:"+[ch,Ko,gr].join("|")+")"+El+Sl+")*",vr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Za=El+Sl+yr,el="(?:"+[uc,Ko,gr].join("|")+")"+Za,mu="(?:"+[ch+ka+"?",ka,Ko,gr,fs].join("|")+")",Ki=RegExp(hi,"g"),ms=RegExp(ka,"g"),tl=RegExp(Vl+"(?="+Vl+")|"+mu+Za,"g"),Sd=RegExp([Ei+"?"+js+"+"+Tl+"(?="+[Qa,Ei,"$"].join("|")+")",kc+"+"+fu+"(?="+[Qa,Ei+hh,"$"].join("|")+")",Ei+"?"+hh+"+"+Tl,Ei+"+"+fu,jl,vr,lc,el].join("|"),"g"),no=RegExp("["+Rc+en+Bs+Di+"]"),Bu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,aa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],gu=-1,ir={};ir[Ke]=ir[Oe]=ir[Q]=ir[ne]=ir[fe]=ir[Ie]=ir[Ye]=ir[Gt]=ir[He]=!0,ir[qe]=ir[Ne]=ir[At]=ir[st]=ir[ft]=ir[pt]=ir[Ue]=ir[Ae]=ir[nt]=ir[tt]=ir[Rt]=ir[Mt]=ir[mt]=ir[xe]=ir[ct]=!1;var zn={};zn[qe]=zn[Ne]=zn[At]=zn[ft]=zn[st]=zn[pt]=zn[Ke]=zn[Oe]=zn[Q]=zn[ne]=zn[fe]=zn[nt]=zn[tt]=zn[Rt]=zn[Mt]=zn[mt]=zn[xe]=zn[ie]=zn[Ie]=zn[Ye]=zn[Gt]=zn[He]=!0,zn[Ue]=zn[Ae]=zn[ct]=!1;var Ss={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ro={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_u={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dh=parseFloat,Oa=parseInt,la=typeof Hl=="object"&&Hl&&Hl.Object===Object&&Hl,Fu=typeof self=="object"&&self&&self.Object===Object&&self,Tr=la||Fu||Function("return this")(),Is=e&&!e.nodeType&&e,yi=Is&&!0&&n&&!n.nodeType&&n,xi=yi&&yi.exports===Is,ua=xi&&la.process,Qr=function(){try{var ye=yi&&yi.require&&yi.require("util").types;return ye||ua&&ua.binding&&ua.binding("util")}catch{}}(),yu=Qr&&Qr.isArrayBuffer,xo=Qr&&Qr.isDate,vu=Qr&&Qr.isMap,nl=Qr&&Qr.isRegExp,Ni=Qr&&Qr.isSet,wi=Qr&&Qr.isTypedArray;function Hn(ye,Ve,Be){switch(Be.length){case 0:return ye.call(Ve);case 1:return ye.call(Ve,Be[0]);case 2:return ye.call(Ve,Be[0],Be[1]);case 3:return ye.call(Ve,Be[0],Be[1],Be[2])}return ye.apply(Ve,Be)}function $i(ye,Ve,Be,kt){for(var tn=-1,Mn=ye==null?0:ye.length;++tn<Mn;){var Xn=ye[tn];Ve(kt,Xn,Be(Xn),ye)}return kt}function Xr(ye,Ve){for(var Be=-1,kt=ye==null?0:ye.length;++Be<kt&&Ve(ye[Be],Be,ye)!==!1;);return ye}function ad(ye,Ve){for(var Be=ye==null?0:ye.length;Be--&&Ve(ye[Be],Be,ye)!==!1;);return ye}function bu(ye,Ve){for(var Be=-1,kt=ye==null?0:ye.length;++Be<kt;)if(!Ve(ye[Be],Be,ye))return!1;return!0}function Gi(ye,Ve){for(var Be=-1,kt=ye==null?0:ye.length,tn=0,Mn=[];++Be<kt;){var Xn=ye[Be];Ve(Xn,Be,ye)&&(Mn[tn++]=Xn)}return Mn}function La(ye,Ve){var Be=ye==null?0:ye.length;return!!Be&&Rs(ye,Ve,0)>-1}function ph(ye,Ve,Be){for(var kt=-1,tn=ye==null?0:ye.length;++kt<tn;)if(Be(Ve,ye[kt]))return!0;return!1}function hr(ye,Ve){for(var Be=-1,kt=ye==null?0:ye.length,tn=Array(kt);++Be<kt;)tn[Be]=Ve(ye[Be],Be,ye);return tn}function Jo(ye,Ve){for(var Be=-1,kt=Ve.length,tn=ye.length;++Be<kt;)ye[tn+Be]=Ve[Be];return ye}function ld(ye,Ve,Be,kt){var tn=-1,Mn=ye==null?0:ye.length;for(kt&&Mn&&(Be=ye[++tn]);++tn<Mn;)Be=Ve(Be,ye[tn],tn,ye);return Be}function np(ye,Ve,Be,kt){var tn=ye==null?0:ye.length;for(kt&&tn&&(Be=ye[--tn]);tn--;)Be=Ve(Be,ye[tn],tn,ye);return Be}function Oc(ye,Ve){for(var Be=-1,kt=ye==null?0:ye.length;++Be<kt;)if(Ve(ye[Be],Be,ye))return!0;return!1}var rp=li("length");function kp(ye){return ye.split("")}function mf(ye){return ye.match(vt)||[]}function Ed(ye,Ve,Be){var kt;return Be(ye,function(tn,Mn,Xn){if(Ve(tn,Mn,Xn))return kt=Mn,!1}),kt}function Xl(ye,Ve,Be,kt){for(var tn=ye.length,Mn=Be+(kt?1:-1);kt?Mn--:++Mn<tn;)if(Ve(ye[Mn],Mn,ye))return Mn;return-1}function Rs(ye,Ve,Be){return Ve===Ve?Dc(ye,Ve,Be):Xl(ye,fh,Be)}function zu(ye,Ve,Be,kt){for(var tn=Be-1,Mn=ye.length;++tn<Mn;)if(kt(ye[tn],Ve))return tn;return-1}function fh(ye){return ye!==ye}function Da(ye,Ve){var Be=ye==null?0:ye.length;return Be?Po(ye,Ve)/Be:se}function li(ye){return function(Ve){return Ve==null?t:Ve[ye]}}function Sr(ye){return function(Ve){return ye==null?t:ye[Ve]}}function io(ye,Ve,Be,kt,tn){return tn(ye,function(Mn,Xn,gn){Be=kt?(kt=!1,Mn):Ve(Be,Mn,Xn,gn)}),Be}function Na(ye,Ve){var Be=ye.length;for(ye.sort(Ve);Be--;)ye[Be]=ye[Be].value;return ye}function Po(ye,Ve){for(var Be,kt=-1,tn=ye.length;++kt<tn;){var Mn=Ve(ye[kt]);Mn!==t&&(Be=Be===t?Mn:Be+Mn)}return Be}function Yl(ye,Ve){for(var Be=-1,kt=Array(ye);++Be<ye;)kt[Be]=Ve(Be);return kt}function Kl(ye,Ve){return hr(Ve,function(Be){return[Be,ye[Be]]})}function Lh(ye){return ye&&ye.slice(0,xl(ye)+1).replace(nn,"")}function Hr(ye){return function(Ve){return ye(Ve)}}function Ci(ye,Ve){return hr(Ve,function(Be){return ye[Be]})}function br(ye,Ve){return ye.has(Ve)}function Wi(ye,Ve){for(var Be=-1,kt=ye.length;++Be<kt&&Rs(Ve,ye[Be],0)>-1;);return Be}function ca(ye,Ve){for(var Be=ye.length;Be--&&Rs(Ve,ye[Be],0)>-1;);return Be}function Tu(ye,Ve){for(var Be=ye.length,kt=0;Be--;)ye[Be]===Ve&&++kt;return kt}var ip=Sr(Ss),sp=Sr(ro);function ud(ye){return"\\"+_u[ye]}function Uu(ye,Ve){return ye==null?t:ye[Ve]}function rl(ye){return no.test(ye)}function Lc(ye){return Bu.test(ye)}function Dh(ye){for(var Ve,Be=[];!(Ve=ye.next()).done;)Be.push(Ve.value);return Be}function Hu(ye){var Ve=-1,Be=Array(ye.size);return ye.forEach(function(kt,tn){Be[++Ve]=[tn,kt]}),Be}function Jl(ye,Ve){return function(Be){return ye(Ve(Be))}}function Fs(ye,Ve){for(var Be=-1,kt=ye.length,tn=0,Mn=[];++Be<kt;){var Xn=ye[Be];(Xn===Ve||Xn===_)&&(ye[Be]=_,Mn[tn++]=Be)}return Mn}function ql(ye){var Ve=-1,Be=Array(ye.size);return ye.forEach(function(kt){Be[++Ve]=kt}),Be}function Nh(ye){var Ve=-1,Be=Array(ye.size);return ye.forEach(function(kt){Be[++Ve]=[kt,kt]}),Be}function Dc(ye,Ve,Be){for(var kt=Be-1,tn=ye.length;++kt<tn;)if(ye[kt]===Ve)return kt;return-1}function Nc(ye,Ve,Be){for(var kt=Be+1;kt--;)if(ye[kt]===Ve)return kt;return kt}function ns(ye){return rl(ye)?Ql(ye):rp(ye)}function Br(ye){return rl(ye)?Su(ye):kp(ye)}function xl(ye){for(var Ve=ye.length;Ve--&&On.test(ye.charAt(Ve)););return Ve}var Ba=Sr(Pu);function Ql(ye){for(var Ve=tl.lastIndex=0;tl.test(ye);)++Ve;return Ve}function Su(ye){return ye.match(tl)||[]}function mh(ye){return ye.match(Sd)||[]}var xd=function ye(Ve){Ve=Ve==null?Tr:di.defaults(Tr.Object(),Ve,di.pick(Tr,aa));var Be=Ve.Array,kt=Ve.Date,tn=Ve.Error,Mn=Ve.Function,Xn=Ve.Math,gn=Ve.Object,Pr=Ve.RegExp,so=Ve.String,vi=Ve.TypeError,oo=Be.prototype,il=Mn.prototype,Bi=gn.prototype,gs=Ve["__core-js_shared__"],Eu=il.toString,Yn=Bi.hasOwnProperty,ha=0,Xs=function(){var c=/[^.]+$/.exec(gs&&gs.keys&&gs.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),zs=Bi.toString,Pa=Eu.call(gn),Bh=Tr._,gh=Pr("^"+Eu.call(Yn).replace(ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cc=xi?Ve.Buffer:t,qo=Ve.Symbol,Bc=Ve.Uint8Array,Ph=cc?cc.allocUnsafe:t,Fa=Jl(gn.getPrototypeOf,gn),Fh=gn.create,hc=Bi.propertyIsEnumerable,Gu=oo.splice,cd=qo?qo.isConcatSpreadable:t,Qo=qo?qo.iterator:t,ao=qo?qo.toStringTag:t,wl=function(){try{var c=ba(gn,"defineProperty");return c({},"",{}),c}catch{}}(),zh=Ve.clearTimeout!==Tr.clearTimeout&&Ve.clearTimeout,Pi=kt&&kt.now!==Tr.Date.now&&kt.now,hd=Ve.setTimeout!==Tr.setTimeout&&Ve.setTimeout,Wu=Xn.ceil,Zl=Xn.floor,Pc=gn.getOwnPropertySymbols,wd=cc?cc.isBuffer:t,$l=Ve.isFinite,$d=oo.join,Uh=Jl(gn.keys,gn),Zr=Xn.max,Mi=Xn.min,gf=kt.now,Op=Ve.parseInt,Cl=Xn.random,eu=oo.reverse,Vu=ba(Ve,"DataView"),ju=ba(Ve,"Map"),_h=ba(Ve,"Promise"),sl=ba(Ve,"Set"),Zo=ba(Ve,"WeakMap"),Ml=ba(gn,"create"),Fc=Zo&&new Zo,Al={},zc=Xa(Vu),dc=Xa(ju),Cd=Xa(_h),za=Xa(sl),Gr=Xa(Zo),ol=qo?qo.prototype:t,Ji=ol?ol.valueOf:t,da=ol?ol.toString:t;function Y(c){if(ci(c)&&!In(c)&&!(c instanceof pn)){if(c instanceof $r)return c;if(Yn.call(c,"__wrapped__"))return Ld(c)}return new $r(c)}var Es=function(){function c(){}return function(m){if(!ni(m))return{};if(Fh)return Fh(m);c.prototype=m;var x=new c;return c.prototype=t,x}}();function pa(){}function $r(c,m){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=t}Y.templateSettings={escape:Si,evaluate:xr,interpolate:fr,variable:"",imports:{_:Y}},Y.prototype=pa.prototype,Y.prototype.constructor=Y,$r.prototype=Es(pa.prototype),$r.prototype.constructor=$r;function pn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=pe,this.__views__=[]}function Lp(){var c=new pn(this.__wrapped__);return c.__actions__=ti(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=ti(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=ti(this.__views__),c}function al(){if(this.__filtered__){var c=new pn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Ai(){var c=this.__wrapped__.value(),m=this.__dir__,x=In(c),D=m<0,U=x?c.length:0,K=mn(0,U,this.__views__),ue=K.start,me=K.end,Ee=me-ue,Ze=D?me:ue-1,et=this.__iteratees__,ut=et.length,It=0,Xt=Mi(Ee,this.__takeCount__);if(!x||!D&&U==Ee&&Xt==Ee)return Yc(c,this.__actions__);var dn=[];e:for(;Ee--&&It<Xt;){Ze+=m;for(var kn=-1,cn=c[Ze];++kn<ut;){var Wn=et[kn],qn=Wn.iteratee,oa=Wn.type,Zs=qn(cn);if(oa==ce)cn=Zs;else if(!Zs){if(oa==le)continue e;break e}}dn[It++]=cn}return dn}pn.prototype=Es(pa.prototype),pn.prototype.constructor=pn;function ui(c){var m=-1,x=c==null?0:c.length;for(this.clear();++m<x;){var D=c[m];this.set(D[0],D[1])}}function qi(){this.__data__=Ml?Ml(null):{},this.size=0}function rs(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m}function Uc(c){var m=this.__data__;if(Ml){var x=m[c];return x===d?t:x}return Yn.call(m,c)?m[c]:t}function fa(c){var m=this.__data__;return Ml?m[c]!==t:Yn.call(m,c)}function ma(c,m){var x=this.__data__;return this.size+=this.has(c)?0:1,x[c]=Ml&&m===t?d:m,this}ui.prototype.clear=qi,ui.prototype.delete=rs,ui.prototype.get=Uc,ui.prototype.has=fa,ui.prototype.set=ma;function is(c){var m=-1,x=c==null?0:c.length;for(this.clear();++m<x;){var D=c[m];this.set(D[0],D[1])}}function Hc(){this.__data__=[],this.size=0}function ea(c){var m=this.__data__,x=_s(m,c);if(x<0)return!1;var D=m.length-1;return x==D?m.pop():Gu.call(m,x,1),--this.size,!0}function Md(c){var m=this.__data__,x=_s(m,c);return x<0?t:m[x][1]}function Ad(c){return _s(this.__data__,c)>-1}function Hh(c,m){var x=this.__data__,D=_s(x,c);return D<0?(++this.size,x.push([c,m])):x[D][1]=m,this}is.prototype.clear=Hc,is.prototype.delete=ea,is.prototype.get=Md,is.prototype.has=Ad,is.prototype.set=Hh;function Us(c){var m=-1,x=c==null?0:c.length;for(this.clear();++m<x;){var D=c[m];this.set(D[0],D[1])}}function jn(){this.size=0,this.__data__={hash:new ui,map:new(ju||is),string:new ui}}function Hs(c){var m=Jc(this,c).delete(c);return this.size-=m?1:0,m}function Ys(c){return Jc(this,c).get(c)}function Fi(c){return Jc(this,c).has(c)}function tu(c,m){var x=Jc(this,c),D=x.size;return x.set(c,m),this.size+=x.size==D?0:1,this}Us.prototype.clear=jn,Us.prototype.delete=Hs,Us.prototype.get=Ys,Us.prototype.has=Fi,Us.prototype.set=tu;function Fo(c){var m=-1,x=c==null?0:c.length;for(this.__data__=new Us;++m<x;)this.add(c[m])}function En(c){return this.__data__.set(c,d),this}function pi(c){return this.__data__.has(c)}Fo.prototype.add=Fo.prototype.push=En,Fo.prototype.has=pi;function fi(c){var m=this.__data__=new is(c);this.size=m.size}function Dp(){this.__data__=new is,this.size=0}function yh(c){var m=this.__data__,x=m.delete(c);return this.size=m.size,x}function lo(c){return this.__data__.get(c)}function ga(c){return this.__data__.has(c)}function wn(c,m){var x=this.__data__;if(x instanceof is){var D=x.__data__;if(!ju||D.length<s-1)return D.push([c,m]),this.size=++x.size,this;x=this.__data__=new Us(D)}return x.set(c,m),this.size=x.size,this}fi.prototype.clear=Dp,fi.prototype.delete=yh,fi.prototype.get=lo,fi.prototype.has=ga,fi.prototype.set=wn;function _n(c,m){var x=In(c),D=!x&&Hd(c),U=!x&&!D&&nh(c),K=!x&&!D&&!U&&Vd(c),ue=x||D||U||K,me=ue?Yl(c.length,so):[],Ee=me.length;for(var Ze in c)(m||Yn.call(c,Ze))&&!(ue&&(Ze=="length"||U&&(Ze=="offset"||Ze=="parent")||K&&(Ze=="buffer"||Ze=="byteLength"||Ze=="byteOffset")||ja(Ze,Ee)))&&me.push(Ze);return me}function ll(c){var m=c.length;return m?c[ks(0,m-1)]:t}function pc(c,m){return dr(ti(c),Ua(m,0,c.length))}function _f(c){return dr(ti(c))}function nu(c,m,x){(x!==t&&!xa(c[m],x)||x===t&&!(m in c))&&zo(c,m,x)}function wo(c,m,x){var D=c[m];(!(Yn.call(c,m)&&xa(D,x))||x===t&&!(m in c))&&zo(c,m,x)}function _s(c,m){for(var x=c.length;x--;)if(xa(c[x][0],m))return x;return-1}function ul(c,m,x,D){return $o(c,function(U,K,ue){m(D,U,x(U),ue)}),D}function ss(c,m){return c&&ls(m,Ti(m),c)}function cl(c,m){return c&&ls(m,es(m),c)}function zo(c,m,x){m=="__proto__"&&wl?wl(c,m,{configurable:!0,enumerable:!0,value:x,writable:!0}):c[m]=x}function Gh(c,m){for(var x=-1,D=m.length,U=Be(D),K=c==null;++x<D;)U[x]=K?t:hm(c,m[x]);return U}function Ua(c,m,x){return c===c&&(x!==t&&(c=c<=x?c:x),m!==t&&(c=c>=m?c:m)),c}function Ii(c,m,x,D,U,K){var ue,me=m&v,Ee=m&b,Ze=m&E;if(x&&(ue=U?x(c,D,U,K):x(c)),ue!==t)return ue;if(!ni(c))return c;var et=In(c);if(et){if(ue=Um(c),!me)return ti(c,ue)}else{var ut=us(c),It=ut==Ae||ut==je;if(nh(c))return Kc(c,me);if(ut==Rt||ut==qe||It&&!U){if(ue=Ee||It?{}:bc(c),!me)return Ee?fd(c,cl(ue,c)):jh(c,ss(ue,c))}else{if(!zn[ut])return U?c:{};ue=qs(c,ut,me)}}K||(K=new fi);var Xt=K.get(c);if(Xt)return Xt;K.set(c,ue),f_(c)?c.forEach(function(cn){ue.add(Ii(cn,m,x,cn,c,K))}):Jh(c)&&c.forEach(function(cn,Wn){ue.set(Wn,Ii(cn,m,x,Wn,c,K))});var dn=Ze?Ee?Cr:cr:Ee?es:Ti,kn=et?t:dn(c);return Xr(kn||c,function(cn,Wn){kn&&(Wn=cn,cn=c[Wn]),wo(ue,Wn,Ii(cn,m,x,Wn,c,K))}),ue}function Id(c){var m=Ti(c);return function(x){return Gc(x,c,m)}}function Gc(c,m,x){var D=x.length;if(c==null)return!D;for(c=gn(c);D--;){var U=x[D],K=m[U],ue=c[U];if(ue===t&&!(U in c)||!K(ue))return!1}return!0}function Wh(c,m,x){if(typeof c!="function")throw new vi(l);return cp(function(){c.apply(t,x)},m)}function Uo(c,m,x,D){var U=-1,K=La,ue=!0,me=c.length,Ee=[],Ze=m.length;if(!me)return Ee;x&&(m=hr(m,Hr(x))),D?(K=ph,ue=!1):m.length>=s&&(K=br,ue=!1,m=new Fo(m));e:for(;++U<me;){var et=c[U],ut=x==null?et:x(et);if(et=D||et!==0?et:0,ue&&ut===ut){for(var It=Ze;It--;)if(m[It]===ut)continue e;Ee.push(et)}else K(m,ut,D)||Ee.push(et)}return Ee}var $o=Xh(os),op=Xh(Ha,!0);function xu(c,m){var x=!0;return $o(c,function(D,U,K){return x=!!m(D,U,K),x}),x}function Il(c,m,x){for(var D=-1,U=c.length;++D<U;){var K=c[D],ue=m(K);if(ue!=null&&(me===t?ue===ue&&!sa(ue):x(ue,me)))var me=ue,Ee=K}return Ee}function dd(c,m,x,D){var U=c.length;for(x=$n(x),x<0&&(x=-x>U?0:U+x),D=D===t||D>U?U:$n(D),D<0&&(D+=U),D=x>D?0:b0(D);x<D;)c[x++]=m;return c}function fc(c,m){var x=[];return $o(c,function(D,U,K){m(D,U,K)&&x.push(D)}),x}function Yr(c,m,x,D,U){var K=-1,ue=c.length;for(x||(x=Rd),U||(U=[]);++K<ue;){var me=c[K];m>0&&x(me)?m>1?Yr(me,m-1,x,D,U):Jo(U,me):D||(U[U.length]=me)}return U}var ru=vc(),Xu=vc(!0);function os(c,m){return c&&ru(c,m,Ti)}function Ha(c,m){return c&&Xu(c,m,Ti)}function xs(c,m){return Gi(m,function(x){return Ec(c[x])})}function ws(c,m){m=na(m,c);for(var x=0,D=m.length;c!=null&&x<D;)c=c[_o(m[x++])];return x&&x==D?c:t}function Wc(c,m,x){var D=m(c);return In(c)?D:Jo(D,x(c))}function mi(c){return c==null?c===t?we:Dt:ao&&ao in gn(c)?pl(c):vg(c)}function Ga(c,m){return c>m}function mc(c,m){return c!=null&&Yn.call(c,m)}function ap(c,m){return c!=null&&m in gn(c)}function vh(c,m,x){return c>=Mi(m,x)&&c<Zr(m,x)}function ta(c,m,x){for(var D=x?ph:La,U=c[0].length,K=c.length,ue=K,me=Be(K),Ee=1/0,Ze=[];ue--;){var et=c[ue];ue&&m&&(et=hr(et,Hr(m))),Ee=Mi(et.length,Ee),me[ue]=!x&&(m||U>=120&&et.length>=120)?new Fo(ue&&et):t}et=c[0];var ut=-1,It=me[0];e:for(;++ut<U&&Ze.length<Ee;){var Xt=et[ut],dn=m?m(Xt):Xt;if(Xt=x||Xt!==0?Xt:0,!(It?br(It,dn):D(Ze,dn,x))){for(ue=K;--ue;){var kn=me[ue];if(!(kn?br(kn,dn):D(c[ue],dn,x)))continue e}It&&It.push(dn),Ze.push(Xt)}}return Ze}function Vi(c,m,x,D){return os(c,function(U,K,ue){m(D,x(U),K,ue)}),D}function Dn(c,m,x){m=na(m,c),c=bf(c,m);var D=c==null?c:c[_o(Os(m))];return D==null?t:Hn(D,c,x)}function Zn(c){return ci(c)&&mi(c)==qe}function Or(c){return ci(c)&&mi(c)==At}function ei(c){return ci(c)&&mi(c)==pt}function Jr(c,m,x,D,U){return c===m?!0:c==null||m==null||!ci(c)&&!ci(m)?c!==c&&m!==m:Co(c,m,x,D,Jr,U)}function Co(c,m,x,D,U,K){var ue=In(c),me=In(m),Ee=ue?Ne:us(c),Ze=me?Ne:us(m);Ee=Ee==qe?Rt:Ee,Ze=Ze==qe?Rt:Ze;var et=Ee==Rt,ut=Ze==Rt,It=Ee==Ze;if(It&&nh(c)){if(!nh(m))return!1;ue=!0,et=!1}if(It&&!et)return K||(K=new fi),ue||Vd(c)?rn(c,m,x,D,U,K):Sn(c,m,Ee,x,D,U,K);if(!(x&C)){var Xt=et&&Yn.call(c,"__wrapped__"),dn=ut&&Yn.call(m,"__wrapped__");if(Xt||dn){var kn=Xt?c.value():c,cn=dn?m.value():m;return K||(K=new fi),U(kn,cn,x,D,K)}}return It?(K||(K=new fi),An(c,m,x,D,U,K)):!1}function as(c){return ci(c)&&us(c)==nt}function Qi(c,m,x,D){var U=x.length,K=U,ue=!D;if(c==null)return!K;for(c=gn(c);U--;){var me=x[U];if(ue&&me[2]?me[1]!==c[me[0]]:!(me[0]in c))return!1}for(;++U<K;){me=x[U];var Ee=me[0],Ze=c[Ee],et=me[1];if(ue&&me[2]){if(Ze===t&&!(Ee in c))return!1}else{var ut=new fi;if(D)var It=D(Ze,et,Ee,c,m,ut);if(!(It===t?Jr(et,Ze,C|M,D,ut):It))return!1}}return!0}function iu(c){if(!ni(c)||Qs(c))return!1;var m=Ec(c)?gh:Nr;return m.test(Xa(c))}function Yu(c){return ci(c)&&mi(c)==Mt}function gc(c){return ci(c)&&us(c)==mt}function Ku(c){return ci(c)&&xh(c.length)&&!!ir[mi(c)]}function Ks(c){return typeof c=="function"?c:c==null?Ro:typeof c=="object"?In(c)?co(c[0],c[1]):$u(c):M_(c)}function uo(c){if(!Tc(c))return Uh(c);var m=[];for(var x in gn(c))Yn.call(c,x)&&x!="constructor"&&m.push(x);return m}function pd(c){if(!ni(c))return Sa(c);var m=Tc(c),x=[];for(var D in c)D=="constructor"&&(m||!Yn.call(c,D))||x.push(D);return x}function _a(c,m){return c<m}function wu(c,m){var x=-1,D=zi(c)?Be(c.length):[];return $o(c,function(U,K,ue){D[++x]=m(U,K,ue)}),D}function $u(c){var m=jf(c);return m.length==1&&m[0][2]?Xf(m[0][0],m[0][1]):function(x){return x===c||Qi(x,c,m)}}function co(c,m){return Ta(c)&&yf(m)?Xf(_o(c),m):function(x){var D=hm(x,c);return D===t&&D===m?dm(x,c):Jr(m,D,C|M)}}function ho(c,m,x,D,U){c!==m&&ru(m,function(K,ue){if(U||(U=new fi),ni(K))Rl(c,m,ue,x,ho,D,U);else{var me=D?D(au(c,ue),K,ue+"",c,m,U):t;me===t&&(me=K),nu(c,ue,me)}},es)}function Rl(c,m,x,D,U,K,ue){var me=au(c,x),Ee=au(m,x),Ze=ue.get(Ee);if(Ze){nu(c,x,Ze);return}var et=K?K(me,Ee,x+"",c,m,ue):t,ut=et===t;if(ut){var It=In(Ee),Xt=!It&&nh(Ee),dn=!It&&!Xt&&Vd(Ee);et=Ee,It||Xt||dn?In(me)?et=me:Kr(me)?et=ti(me):Xt?(ut=!1,et=Kc(Ee,!0)):dn?(ut=!1,et=Ol(Ee,!0)):et=[]:zr(Ee)||Hd(Ee)?(et=me,Hd(me)?et=Gv(me):(!ni(me)||Ec(me))&&(et=bc(Ee))):ut=!1}ut&&(ue.set(Ee,et),U(et,Ee,D,K,ue),ue.delete(Ee)),nu(c,x,et)}function Ho(c,m){var x=c.length;if(x)return m+=m<0?x:0,ja(m,x)?c[m]:t}function Ju(c,m,x){m.length?m=hr(m,function(K){return In(K)?function(ue){return ws(ue,K.length===1?K[0]:K)}:K}):m=[Ro];var D=-1;m=hr(m,Hr(on()));var U=wu(c,function(K,ue,me){var Ee=hr(m,function(Ze){return Ze(K)});return{criteria:Ee,index:++D,value:K}});return Na(U,function(K,ue){return Ll(K,ue,x)})}function qu(c,m){return bh(c,m,function(x,D){return dm(c,D)})}function bh(c,m,x){for(var D=-1,U=m.length,K={};++D<U;){var ue=m[D],me=ws(c,ue);x(me,ue)&&gi(K,na(ue,c),me)}return K}function Th(c){return function(m){return ws(m,c)}}function Rr(c,m,x,D){var U=D?zu:Rs,K=-1,ue=m.length,me=c;for(c===m&&(m=ti(m)),x&&(me=hr(c,Hr(x)));++K<ue;)for(var Ee=0,Ze=m[K],et=x?x(Ze):Ze;(Ee=U(me,et,Ee,D))>-1;)me!==c&&Gu.call(me,Ee,1),Gu.call(c,Ee,1);return c}function ys(c,m){for(var x=c?m.length:0,D=x-1;x--;){var U=m[x];if(x==D||U!==K){var K=U;ja(U)?Gu.call(c,U,1):Xc(c,U)}}return c}function ks(c,m){return c+Zl(Cl()*(m-c+1))}function Wa(c,m,x,D){for(var U=-1,K=Zr(Wu((m-c)/(x||1)),0),ue=Be(K);K--;)ue[D?K:++U]=c,c+=x;return ue}function Gs(c,m){var x="";if(!c||m<1||m>q)return x;do m%2&&(x+=c),m=Zl(m/2),m&&(c+=c);while(m);return x}function hn(c,m){return Od(Yf(c,m,Ro),c+"")}function Vc(c){return ll(mp(c))}function Tn(c,m){var x=mp(c);return dr(x,Ua(m,0,x.length))}function gi(c,m,x,D){if(!ni(c))return c;m=na(m,c);for(var U=-1,K=m.length,ue=K-1,me=c;me!=null&&++U<K;){var Ee=_o(m[U]),Ze=x;if(Ee==="__proto__"||Ee==="constructor"||Ee==="prototype")return c;if(U!=ue){var et=me[Ee];Ze=D?D(et,Ee,me):t,Ze===t&&(Ze=ni(et)?et:ja(m[U+1])?[]:{})}wo(me,Ee,Ze),me=me[Ee]}return c}var $s=Fc?function(c,m){return Fc.set(c,m),c}:Ro,su=wl?function(c,m){return wl(c,"toString",{configurable:!0,enumerable:!1,value:w_(m),writable:!0})}:Ro;function kl(c){return dr(mp(c))}function Pt(c,m,x){var D=-1,U=c.length;m<0&&(m=-m>U?0:U+m),x=x>U?U:x,x<0&&(x+=U),U=m>x?0:x-m>>>0,m>>>=0;for(var K=Be(U);++D<U;)K[D]=c[D+m];return K}function hl(c,m){var x;return $o(c,function(D,U,K){return x=m(D,U,K),!x}),!!x}function Wr(c,m,x){var D=0,U=c==null?D:c.length;if(typeof m=="number"&&m===m&&U<=Fe){for(;D<U;){var K=D+U>>>1,ue=c[K];ue!==null&&!sa(ue)&&(x?ue<=m:ue<m)?D=K+1:U=K}return U}return Qu(c,m,Ro,x)}function Qu(c,m,x,D){var U=0,K=c==null?0:c.length;if(K===0)return 0;m=x(m);for(var ue=m!==m,me=m===null,Ee=sa(m),Ze=m===t;U<K;){var et=Zl((U+K)/2),ut=x(c[et]),It=ut!==t,Xt=ut===null,dn=ut===ut,kn=sa(ut);if(ue)var cn=D||dn;else Ze?cn=dn&&(D||It):me?cn=dn&&It&&(D||!Xt):Ee?cn=dn&&It&&!Xt&&(D||!kn):Xt||kn?cn=!1:cn=D?ut<=m:ut<m;cn?U=et+1:K=et}return Mi(K,Se)}function Vh(c,m){for(var x=-1,D=c.length,U=0,K=[];++x<D;){var ue=c[x],me=m?m(ue):ue;if(!x||!xa(me,Ee)){var Ee=me;K[U++]=ue===0?0:ue}}return K}function jc(c){return typeof c=="number"?c:sa(c)?se:+c}function oi(c){if(typeof c=="string")return c;if(In(c))return hr(c,oi)+"";if(sa(c))return da?da.call(c):"";var m=c+"";return m=="0"&&1/c==-$e?"-0":m}function ji(c,m,x){var D=-1,U=La,K=c.length,ue=!0,me=[],Ee=me;if(x)ue=!1,U=ph;else if(K>=s){var Ze=m?null:Lr(c);if(Ze)return ql(Ze);ue=!1,U=br,Ee=new Fo}else Ee=m?[]:me;e:for(;++D<K;){var et=c[D],ut=m?m(et):et;if(et=x||et!==0?et:0,ue&&ut===ut){for(var It=Ee.length;It--;)if(Ee[It]===ut)continue e;m&&Ee.push(ut),me.push(et)}else U(Ee,ut,x)||(Ee!==me&&Ee.push(ut),me.push(et))}return me}function Xc(c,m){return m=na(m,c),c=bf(c,m),c==null||delete c[_o(Os(m))]}function po(c,m,x,D){return gi(c,m,x(ws(c,m)),D)}function dl(c,m,x,D){for(var U=c.length,K=D?U:-1;(D?K--:++K<U)&&m(c[K],K,c););return x?Pt(c,D?0:K,D?K+1:U):Pt(c,D?K+1:0,D?U:K)}function Yc(c,m){var x=c;return x instanceof pn&&(x=x.value()),ld(m,function(D,U){return U.func.apply(U.thisArg,Jo([D],U.args))},x)}function _c(c,m,x){var D=c.length;if(D<2)return D?ji(c[0]):[];for(var U=-1,K=Be(D);++U<D;)for(var ue=c[U],me=-1;++me<D;)me!=U&&(K[U]=Uo(K[U]||ue,c[me],m,x));return ji(Yr(K,1),m,x)}function Zu(c,m,x){for(var D=-1,U=c.length,K=m.length,ue={};++D<U;){var me=D<K?m[D]:t;x(ue,c[D],me)}return ue}function Mo(c){return Kr(c)?c:[]}function Js(c){return typeof c=="function"?c:Ro}function na(c,m){return In(c)?c:Ta(c,m)?[c]:a0(rr(c))}var Sh=hn;function fo(c,m,x){var D=c.length;return x=x===t?D:x,!m&&x>=D?c:Pt(c,m,x)}var Cu=zh||function(c){return Tr.clearTimeout(c)};function Kc(c,m){if(m)return c.slice();var x=c.length,D=Ph?Ph(x):new c.constructor(x);return c.copy(D),D}function yc(c){var m=new c.constructor(c.byteLength);return new Bc(m).set(new Bc(c)),m}function Go(c,m){var x=m?yc(c.buffer):c.buffer;return new c.constructor(x,c.byteOffset,c.byteLength)}function mo(c){var m=new c.constructor(c.source,mr.exec(c));return m.lastIndex=c.lastIndex,m}function ec(c){return Ji?gn(Ji.call(c)):{}}function Ol(c,m){var x=m?yc(c.buffer):c.buffer;return new c.constructor(x,c.byteOffset,c.length)}function go(c,m){if(c!==m){var x=c!==t,D=c===null,U=c===c,K=sa(c),ue=m!==t,me=m===null,Ee=m===m,Ze=sa(m);if(!me&&!Ze&&!K&&c>m||K&&ue&&Ee&&!me&&!Ze||D&&ue&&Ee||!x&&Ee||!U)return 1;if(!D&&!K&&!Ze&&c<m||Ze&&x&&U&&!D&&!K||me&&x&&U||!ue&&U||!Ee)return-1}return 0}function Ll(c,m,x){for(var D=-1,U=c.criteria,K=m.criteria,ue=U.length,me=x.length;++D<ue;){var Ee=go(U[D],K[D]);if(Ee){if(D>=me)return Ee;var Ze=x[D];return Ee*(Ze=="desc"?-1:1)}}return c.index-m.index}function Va(c,m,x,D){for(var U=-1,K=c.length,ue=x.length,me=-1,Ee=m.length,Ze=Zr(K-ue,0),et=Be(Ee+Ze),ut=!D;++me<Ee;)et[me]=m[me];for(;++U<ue;)(ut||U<K)&&(et[x[U]]=c[U]);for(;Ze--;)et[me++]=c[U++];return et}function ou(c,m,x,D){for(var U=-1,K=c.length,ue=-1,me=x.length,Ee=-1,Ze=m.length,et=Zr(K-me,0),ut=Be(et+Ze),It=!D;++U<et;)ut[U]=c[U];for(var Xt=U;++Ee<Ze;)ut[Xt+Ee]=m[Ee];for(;++ue<me;)(It||U<K)&&(ut[Xt+x[ue]]=c[U++]);return ut}function ti(c,m){var x=-1,D=c.length;for(m||(m=Be(D));++x<D;)m[x]=c[x];return m}function ls(c,m,x,D){var U=!x;x||(x={});for(var K=-1,ue=m.length;++K<ue;){var me=m[K],Ee=D?D(x[me],c[me],me,x,c):t;Ee===t&&(Ee=c[me]),U?zo(x,me,Ee):wo(x,me,Ee)}return x}function jh(c,m){return ls(c,up(c),m)}function fd(c,m){return ls(c,Yh(c),m)}function ya(c,m){return function(x,D){var U=In(x)?$i:ul,K=m?m():{};return U(x,c,on(D,2),K)}}function va(c){return hn(function(m,x){var D=-1,U=x.length,K=U>1?x[U-1]:t,ue=U>2?x[2]:t;for(K=c.length>3&&typeof K=="function"?(U--,K):t,ue&&Fr(x[0],x[1],ue)&&(K=U<3?t:K,U=1),m=gn(m);++D<U;){var me=x[D];me&&c(m,me,D,K)}return m})}function Xh(c,m){return function(x,D){if(x==null)return x;if(!zi(x))return c(x,D);for(var U=x.length,K=m?U:-1,ue=gn(x);(m?K--:++K<U)&&D(ue[K],K,ue)!==!1;);return x}}function vc(c){return function(m,x,D){for(var U=-1,K=gn(m),ue=D(m),me=ue.length;me--;){var Ee=ue[c?me:++U];if(x(K[Ee],Ee,K)===!1)break}return m}}function Np(c,m,x){var D=m&I,U=g(c);function K(){var ue=this&&this!==Tr&&this instanceof K?U:c;return ue.apply(D?x:this,arguments)}return K}function w(c){return function(m){m=rr(m);var x=rl(m)?Br(m):t,D=x?x[0]:m.charAt(0),U=x?fo(x,1).join(""):m.slice(1);return D[c]()+U}}function h(c){return function(m){return ld(rb(xy(m).replace(Ki,"")),c,"")}}function g(c){return function(){var m=arguments;switch(m.length){case 0:return new c;case 1:return new c(m[0]);case 2:return new c(m[0],m[1]);case 3:return new c(m[0],m[1],m[2]);case 4:return new c(m[0],m[1],m[2],m[3]);case 5:return new c(m[0],m[1],m[2],m[3],m[4]);case 6:return new c(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new c(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var x=Es(c.prototype),D=c.apply(x,m);return ni(D)?D:x}}function $(c,m,x){var D=g(c);function U(){for(var K=arguments.length,ue=Be(K),me=K,Ee=Eh(U);me--;)ue[me]=arguments[me];var Ze=K<3&&ue[0]!==Ee&&ue[K-1]!==Ee?[]:Fs(ue,Ee);if(K-=Ze.length,K<x)return vn(c,m,W,U.placeholder,t,ue,Ze,t,t,x-K);var et=this&&this!==Tr&&this instanceof U?D:c;return Hn(et,this,ue)}return U}function A(c){return function(m,x,D){var U=gn(m);if(!zi(m)){var K=on(x,3);m=Ti(m),x=function(me){return K(U[me],me,U)}}var ue=c(m,x,D);return ue>-1?U[K?m[ue]:ue]:t}}function N(c){return Bn(function(m){var x=m.length,D=x,U=$r.prototype.thru;for(c&&m.reverse();D--;){var K=m[D];if(typeof K!="function")throw new vi(l);if(U&&!ue&&lp(K)=="wrapper")var ue=new $r([],!0)}for(D=ue?D:x;++D<x;){K=m[D];var me=lp(K),Ee=me=="wrapper"?Dl(K):t;Ee&&Ri(Ee[0])&&Ee[1]==(j|P|z|H)&&!Ee[4].length&&Ee[9]==1?ue=ue[lp(Ee[0])].apply(ue,Ee[3]):ue=K.length==1&&Ri(K)?ue[me]():ue.thru(K)}return function(){var Ze=arguments,et=Ze[0];if(ue&&Ze.length==1&&In(et))return ue.plant(et).value();for(var ut=0,It=x?m[ut].apply(this,Ze):et;++ut<x;)It=m[ut].call(this,It);return It}})}function W(c,m,x,D,U,K,ue,me,Ee,Ze){var et=m&j,ut=m&I,It=m&L,Xt=m&(P|B),dn=m&Z,kn=It?t:g(c);function cn(){for(var Wn=arguments.length,qn=Be(Wn),oa=Wn;oa--;)qn[oa]=arguments[oa];if(Xt)var Zs=Eh(cn),Ds=Tu(qn,Zs);if(D&&(qn=Va(qn,D,U,Xt)),K&&(qn=ou(qn,K,ue,Xt)),Wn-=Ds,Xt&&Wn<Ze){var _i=Fs(qn,Zs);return vn(c,m,W,cn.placeholder,x,qn,_i,me,Ee,Ze-Wn)}var Fl=ut?x:this,wc=It?Fl[c]:c;return Wn=qn.length,me?qn=fl(qn,me):dn&&Wn>1&&qn.reverse(),et&&Ee<Wn&&(qn.length=Ee),this&&this!==Tr&&this instanceof cn&&(wc=kn||g(wc)),wc.apply(Fl,qn)}return cn}function de(c,m){return function(x,D){return Vi(x,c,m(D),{})}}function ke(c,m){return function(x,D){var U;if(x===t&&D===t)return m;if(x!==t&&(U=x),D!==t){if(U===t)return D;typeof x=="string"||typeof D=="string"?(x=oi(x),D=oi(D)):(x=jc(x),D=jc(D)),U=c(x,D)}return U}}function Qe(c){return Bn(function(m){return m=hr(m,Hr(on())),hn(function(x){var D=this;return c(m,function(U){return Hn(U,D,x)})})})}function St(c,m){m=m===t?" ":oi(m);var x=m.length;if(x<2)return x?Gs(m,c):m;var D=Gs(m,Wu(c/ns(m)));return rl(m)?fo(Br(D),0,c).join(""):D.slice(0,c)}function Jt(c,m,x,D){var U=m&I,K=g(c);function ue(){for(var me=-1,Ee=arguments.length,Ze=-1,et=D.length,ut=Be(et+Ee),It=this&&this!==Tr&&this instanceof ue?K:c;++Ze<et;)ut[Ze]=D[Ze];for(;Ee--;)ut[Ze++]=arguments[++me];return Hn(It,U?x:this,ut)}return ue}function ln(c){return function(m,x,D){return D&&typeof D!="number"&&Fr(m,x,D)&&(x=D=t),m=xc(m),x===t?(x=m,m=0):x=xc(x),D=D===t?m<x?1:-1:xc(D),Wa(m,x,D,c)}}function yn(c){return function(m,x){return typeof m=="string"&&typeof x=="string"||(m=Xi(m),x=Xi(x)),c(m,x)}}function vn(c,m,x,D,U,K,ue,me,Ee,Ze){var et=m&P,ut=et?ue:t,It=et?t:ue,Xt=et?K:t,dn=et?t:K;m|=et?z:G,m&=~(et?G:z),m&O||(m&=~(I|L));var kn=[c,m,U,Xt,ut,dn,It,me,Ee,Ze],cn=x.apply(t,kn);return Ri(c)&&kd(cn,kn),cn.placeholder=D,qc(cn,c,m)}function fn(c){var m=Xn[c];return function(x,D){if(x=Xi(x),D=D==null?0:Mi($n(D),292),D&&$l(x)){var U=(rr(x)+"e").split("e"),K=m(U[0]+"e"+(+U[1]+D));return U=(rr(K)+"e").split("e"),+(U[0]+"e"+(+U[1]-D))}return m(x)}}var Lr=sl&&1/ql(new sl([,-0]))[1]==$e?function(c){return new sl(c)}:I0;function bt(c){return function(m){var x=us(m);return x==nt?Hu(m):x==mt?Nh(m):Kl(m,c(m))}}function Ce(c,m,x,D,U,K,ue,me){var Ee=m&L;if(!Ee&&typeof c!="function")throw new vi(l);var Ze=D?D.length:0;if(Ze||(m&=~(z|G),D=U=t),ue=ue===t?ue:Zr($n(ue),0),me=me===t?me:$n(me),Ze-=U?U.length:0,m&G){var et=D,ut=U;D=U=t}var It=Ee?t:Dl(c),Xt=[c,m,x,D,U,et,ut,K,ue,me];if(It&&vf(Xt,It),c=Xt[0],m=Xt[1],x=Xt[2],D=Xt[3],U=Xt[4],me=Xt[9]=Xt[9]===t?Ee?0:c.length:Zr(Xt[9]-Ze,0),!me&&m&(P|B)&&(m&=~(P|B)),!m||m==I)var dn=Np(c,m,x);else m==P||m==B?dn=$(c,m,me):(m==z||m==(I|z))&&!U.length?dn=Jt(c,m,x,D):dn=W.apply(t,Xt);var kn=It?$s:kd;return qc(kn(dn,Xt),c,m)}function Le(c,m,x,D){return c===t||xa(c,Bi[x])&&!Yn.call(D,x)?m:c}function rt(c,m,x,D,U,K){return ni(c)&&ni(m)&&(K.set(m,c),ho(c,m,t,rt,K),K.delete(m)),c}function Ut(c){return zr(c)?t:c}function rn(c,m,x,D,U,K){var ue=x&C,me=c.length,Ee=m.length;if(me!=Ee&&!(ue&&Ee>me))return!1;var Ze=K.get(c),et=K.get(m);if(Ze&&et)return Ze==m&&et==c;var ut=-1,It=!0,Xt=x&M?new Fo:t;for(K.set(c,m),K.set(m,c);++ut<me;){var dn=c[ut],kn=m[ut];if(D)var cn=ue?D(kn,dn,ut,m,c,K):D(dn,kn,ut,c,m,K);if(cn!==t){if(cn)continue;It=!1;break}if(Xt){if(!Oc(m,function(Wn,qn){if(!br(Xt,qn)&&(dn===Wn||U(dn,Wn,x,D,K)))return Xt.push(qn)})){It=!1;break}}else if(!(dn===kn||U(dn,kn,x,D,K))){It=!1;break}}return K.delete(c),K.delete(m),It}function Sn(c,m,x,D,U,K,ue){switch(x){case ft:if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case At:return!(c.byteLength!=m.byteLength||!K(new Bc(c),new Bc(m)));case st:case pt:case tt:return xa(+c,+m);case Ue:return c.name==m.name&&c.message==m.message;case Mt:case xe:return c==m+"";case nt:var me=Hu;case mt:var Ee=D&C;if(me||(me=ql),c.size!=m.size&&!Ee)return!1;var Ze=ue.get(c);if(Ze)return Ze==m;D|=M,ue.set(c,m);var et=rn(me(c),me(m),D,U,K,ue);return ue.delete(c),et;case ie:if(Ji)return Ji.call(c)==Ji.call(m)}return!1}function An(c,m,x,D,U,K){var ue=x&C,me=cr(c),Ee=me.length,Ze=cr(m),et=Ze.length;if(Ee!=et&&!ue)return!1;for(var ut=Ee;ut--;){var It=me[ut];if(!(ue?It in m:Yn.call(m,It)))return!1}var Xt=K.get(c),dn=K.get(m);if(Xt&&dn)return Xt==m&&dn==c;var kn=!0;K.set(c,m),K.set(m,c);for(var cn=ue;++ut<Ee;){It=me[ut];var Wn=c[It],qn=m[It];if(D)var oa=ue?D(qn,Wn,It,m,c,K):D(Wn,qn,It,c,m,K);if(!(oa===t?Wn===qn||U(Wn,qn,x,D,K):oa)){kn=!1;break}cn||(cn=It=="constructor")}if(kn&&!cn){var Zs=c.constructor,Ds=m.constructor;Zs!=Ds&&"constructor"in c&&"constructor"in m&&!(typeof Zs=="function"&&Zs instanceof Zs&&typeof Ds=="function"&&Ds instanceof Ds)&&(kn=!1)}return K.delete(c),K.delete(m),kn}function Bn(c){return Od(Yf(c,t,hp),c+"")}function cr(c){return Wc(c,Ti,up)}function Cr(c){return Wc(c,es,Yh)}var Dl=Fc?function(c){return Fc.get(c)}:I0;function lp(c){for(var m=c.name+"",x=Al[m],D=Yn.call(Al,m)?x.length:0;D--;){var U=x[D],K=U.func;if(K==null||K==c)return U.name}return m}function Eh(c){var m=Yn.call(Y,"placeholder")?Y:c;return m.placeholder}function on(){var c=Y.iteratee||Yi;return c=c===Yi?Ks:c,arguments.length?c(arguments[0],arguments[1]):c}function Jc(c,m){var x=c.__data__;return We(m)?x[typeof m=="string"?"string":"hash"]:x.map}function jf(c){for(var m=Ti(c),x=m.length;x--;){var D=m[x],U=c[D];m[x]=[D,U,yf(U)]}return m}function ba(c,m){var x=Uu(c,m);return iu(x)?x:t}function pl(c){var m=Yn.call(c,ao),x=c[ao];try{c[ao]=t;var D=!0}catch{}var U=zs.call(c);return D&&(m?c[ao]=x:delete c[ao]),U}var up=Pc?function(c){return c==null?[]:(c=gn(c),Gi(Pc(c),function(m){return hc.call(c,m)}))}:R0,Yh=Pc?function(c){for(var m=[];c;)Jo(m,up(c)),c=Fa(c);return m}:R0,us=mi;(Vu&&us(new Vu(new ArrayBuffer(1)))!=ft||ju&&us(new ju)!=nt||_h&&us(_h.resolve())!=yt||sl&&us(new sl)!=mt||Zo&&us(new Zo)!=ct)&&(us=function(c){var m=mi(c),x=m==Rt?c.constructor:t,D=x?Xa(x):"";if(D)switch(D){case zc:return ft;case dc:return nt;case Cd:return yt;case za:return mt;case Gr:return ct}return m});function mn(c,m,x){for(var D=-1,U=x.length;++D<U;){var K=x[D],ue=K.size;switch(K.type){case"drop":c+=ue;break;case"dropRight":m-=ue;break;case"take":m=Mi(m,c+ue);break;case"takeRight":c=Zr(c,m-ue);break}}return{start:c,end:m}}function o0(c){var m=c.match(gt);return m?m[1].split($t):[]}function yg(c,m,x){m=na(m,c);for(var D=-1,U=m.length,K=!1;++D<U;){var ue=_o(m[D]);if(!(K=c!=null&&x(c,ue)))break;c=c[ue]}return K||++D!=U?K:(U=c==null?0:c.length,!!U&&xh(U)&&ja(ue,U)&&(In(c)||Hd(c)))}function Um(c){var m=c.length,x=new c.constructor(m);return m&&typeof c[0]=="string"&&Yn.call(c,"index")&&(x.index=c.index,x.input=c.input),x}function bc(c){return typeof c.constructor=="function"&&!Tc(c)?Es(Fa(c)):{}}function qs(c,m,x){var D=c.constructor;switch(m){case At:return yc(c);case st:case pt:return new D(+c);case ft:return Go(c,x);case Ke:case Oe:case Q:case ne:case fe:case Ie:case Ye:case Gt:case He:return Ol(c,x);case nt:return new D;case tt:case xe:return new D(c);case Mt:return mo(c);case mt:return new D;case ie:return ec(c)}}function Bp(c,m){var x=m.length;if(!x)return c;var D=x-1;return m[D]=(x>1?"& ":"")+m[D],m=m.join(x>2?", ":" "),c.replace(De,`{
/* [wrapped with `+m+`] */
`)}function Rd(c){return In(c)||Hd(c)||!!(cd&&c&&c[cd])}function ja(c,m){var x=typeof c;return m=m??q,!!m&&(x=="number"||x!="symbol"&&bs.test(c))&&c>-1&&c%1==0&&c<m}function Fr(c,m,x){if(!ni(x))return!1;var D=typeof m;return(D=="number"?zi(x)&&ja(m,x.length):D=="string"&&m in x)?xa(x[m],c):!1}function Ta(c,m){if(In(c))return!1;var x=typeof c;return x=="number"||x=="symbol"||x=="boolean"||c==null||sa(c)?!0:Te.test(c)||!re.test(c)||m!=null&&c in gn(m)}function We(c){var m=typeof c;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null}function Ri(c){var m=lp(c),x=Y[m];if(typeof x!="function"||!(m in pn.prototype))return!1;if(c===x)return!0;var D=Dl(x);return!!D&&c===D[0]}function Qs(c){return!!Xs&&Xs in c}var a_=gs?Ec:mm;function Tc(c){var m=c&&c.constructor,x=typeof m=="function"&&m.prototype||Bi;return c===x}function yf(c){return c===c&&!ni(c)}function Xf(c,m){return function(x){return x==null?!1:x[c]===m&&(m!==t||c in gn(x))}}function l_(c){var m=ht(c,function(D){return x.size===p&&x.clear(),D}),x=m.cache;return m}function vf(c,m){var x=c[1],D=m[1],U=x|D,K=U<(I|L|j),ue=D==j&&x==P||D==j&&x==H&&c[7].length<=m[8]||D==(j|H)&&m[7].length<=m[8]&&x==P;if(!(K||ue))return c;D&I&&(c[2]=m[2],U|=x&I?0:O);var me=m[3];if(me){var Ee=c[3];c[3]=Ee?Va(Ee,me,m[4]):me,c[4]=Ee?Fs(c[3],_):m[4]}return me=m[5],me&&(Ee=c[5],c[5]=Ee?ou(Ee,me,m[6]):me,c[6]=Ee?Fs(c[5],_):m[6]),me=m[7],me&&(c[7]=me),D&j&&(c[8]=c[8]==null?m[8]:Mi(c[8],m[8])),c[9]==null&&(c[9]=m[9]),c[0]=m[0],c[1]=U,c}function Sa(c){var m=[];if(c!=null)for(var x in gn(c))m.push(x);return m}function vg(c){return zs.call(c)}function Yf(c,m,x){return m=Zr(m===t?c.length-1:m,0),function(){for(var D=arguments,U=-1,K=Zr(D.length-m,0),ue=Be(K);++U<K;)ue[U]=D[m+U];U=-1;for(var me=Be(m+1);++U<m;)me[U]=D[U];return me[m]=x(ue),Hn(c,this,me)}}function bf(c,m){return m.length<2?c:ws(c,Pt(m,0,-1))}function fl(c,m){for(var x=c.length,D=Mi(m.length,x),U=ti(c);D--;){var K=m[D];c[D]=ja(K,x)?U[K]:t}return c}function au(c,m){if(!(m==="constructor"&&typeof c[m]=="function")&&m!="__proto__")return c[m]}var kd=bg($s),cp=hd||function(c,m){return Tr.setTimeout(c,m)},Od=bg(su);function qc(c,m,x){var D=m+"";return Od(c,Bp(D,Kf(o0(D),x)))}function bg(c){var m=0,x=0;return function(){var D=gf(),U=he-(D-x);if(x=D,U>0){if(++m>=te)return arguments[0]}else m=0;return c.apply(t,arguments)}}function dr(c,m){var x=-1,D=c.length,U=D-1;for(m=m===t?D:m;++x<m;){var K=ks(x,U),ue=c[K];c[K]=c[x],c[x]=ue}return c.length=m,c}var a0=l_(function(c){var m=[];return c.charCodeAt(0)===46&&m.push(""),c.replace(Ge,function(x,D,U,K){m.push(U?K.replace(Un,"$1"):D||x)}),m});function _o(c){if(typeof c=="string"||sa(c))return c;var m=c+"";return m=="0"&&1/c==-$e?"-0":m}function Xa(c){if(c!=null){try{return Eu.call(c)}catch{}try{return c+""}catch{}}return""}function Kf(c,m){return Xr(Re,function(x){var D="_."+x[0];m&x[1]&&!La(c,D)&&c.push(D)}),c.sort()}function Ld(c){if(c instanceof pn)return c.clone();var m=new $r(c.__wrapped__,c.__chain__);return m.__actions__=ti(c.__actions__),m.__index__=c.__index__,m.__values__=c.__values__,m}function Jf(c,m,x){(x?Fr(c,m,x):m===t)?m=1:m=Zr($n(m),0);var D=c==null?0:c.length;if(!D||m<1)return[];for(var U=0,K=0,ue=Be(Wu(D/m));U<D;)ue[K++]=Pt(c,U,U+=m);return ue}function Mu(c){for(var m=-1,x=c==null?0:c.length,D=0,U=[];++m<x;){var K=c[m];K&&(U[D++]=K)}return U}function l0(){var c=arguments.length;if(!c)return[];for(var m=Be(c-1),x=arguments[0],D=c;D--;)m[D-1]=arguments[D];return Jo(In(x)?ti(x):[x],Yr(m,1))}var Wo=hn(function(c,m){return Kr(c)?Uo(c,Yr(m,1,Kr,!0)):[]}),Zi=hn(function(c,m){var x=Os(m);return Kr(x)&&(x=t),Kr(c)?Uo(c,Yr(m,1,Kr,!0),on(x,2)):[]}),lu=hn(function(c,m){var x=Os(m);return Kr(x)&&(x=t),Kr(c)?Uo(c,Yr(m,1,Kr,!0),t,x):[]});function ml(c,m,x){var D=c==null?0:c.length;return D?(m=x||m===t?1:$n(m),Pt(c,m<0?0:m,D)):[]}function Au(c,m,x){var D=c==null?0:c.length;return D?(m=x||m===t?1:$n(m),m=D-m,Pt(c,0,m<0?0:m)):[]}function uu(c,m){return c&&c.length?dl(c,on(m,3),!0,!0):[]}function Tf(c,m){return c&&c.length?dl(c,on(m,3),!0):[]}function Nl(c,m,x,D){var U=c==null?0:c.length;return U?(x&&typeof x!="number"&&Fr(c,m,x)&&(x=0,D=U),dd(c,m,x,D)):[]}function Dd(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var U=x==null?0:$n(x);return U<0&&(U=Zr(D+U,0)),Xl(c,on(m,3),U)}function Nd(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var U=D-1;return x!==t&&(U=$n(x),U=x<0?Zr(D+U,0):Mi(U,D-1)),Xl(c,on(m,3),U,!0)}function hp(c){var m=c==null?0:c.length;return m?Yr(c,1):[]}function Tg(c){var m=c==null?0:c.length;return m?Yr(c,$e):[]}function qf(c,m){var x=c==null?0:c.length;return x?(m=m===t?1:$n(m),Yr(c,m)):[]}function Qc(c){for(var m=-1,x=c==null?0:c.length,D={};++m<x;){var U=c[m];D[U[0]]=U[1]}return D}function gl(c){return c&&c.length?c[0]:t}function Zc(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var U=x==null?0:$n(x);return U<0&&(U=Zr(D+U,0)),Rs(c,m,U)}function Bd(c){var m=c==null?0:c.length;return m?Pt(c,0,-1):[]}var Hm=hn(function(c){var m=hr(c,Mo);return m.length&&m[0]===c[0]?ta(m):[]}),Gm=hn(function(c){var m=Os(c),x=hr(c,Mo);return m===Os(x)?m=t:x.pop(),x.length&&x[0]===c[0]?ta(x,on(m,2)):[]}),yo=hn(function(c){var m=Os(c),x=hr(c,Mo);return m=typeof m=="function"?m:t,m&&x.pop(),x.length&&x[0]===c[0]?ta(x,t,m):[]});function Qf(c,m){return c==null?"":$d.call(c,m)}function Os(c){var m=c==null?0:c.length;return m?c[m-1]:t}function Bl(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var U=D;return x!==t&&(U=$n(x),U=U<0?Zr(D+U,0):Mi(U,D-1)),m===m?Nc(c,m,U):Xl(c,fh,U,!0)}function Sf(c,m){return c&&c.length?Ho(c,$n(m)):t}var Sg=hn(Pd);function Pd(c,m){return c&&c.length&&m&&m.length?Rr(c,m):c}function Wm(c,m,x){return c&&c.length&&m&&m.length?Rr(c,m,on(x,2)):c}function Sc(c,m,x){return c&&c.length&&m&&m.length?Rr(c,m,t,x):c}var Fd=Bn(function(c,m){var x=c==null?0:c.length,D=Gh(c,m);return ys(c,hr(m,function(U){return ja(U,x)?+U:U}).sort(go)),D});function ra(c,m){var x=[];if(!(c&&c.length))return x;var D=-1,U=[],K=c.length;for(m=on(m,3);++D<K;){var ue=c[D];m(ue,D,c)&&(x.push(ue),U.push(D))}return ys(c,U),x}function Ea(c){return c==null?c:eu.call(c)}function u_(c,m,x){var D=c==null?0:c.length;return D?(x&&typeof x!="number"&&Fr(c,m,x)?(m=0,x=D):(m=m==null?0:$n(m),x=x===t?D:$n(x)),Pt(c,m,x)):[]}function Zf(c,m){return Wr(c,m)}function u0(c,m,x){return Qu(c,m,on(x,2))}function py(c,m){var x=c==null?0:c.length;if(x){var D=Wr(c,m);if(D<x&&xa(c[D],m))return D}return-1}function Pp(c,m){return Wr(c,m,!0)}function Ef(c,m,x){return Qu(c,m,on(x,2),!0)}function c0(c,m){var x=c==null?0:c.length;if(x){var D=Wr(c,m,!0)-1;if(xa(c[D],m))return D}return-1}function xf(c){return c&&c.length?Vh(c):[]}function h0(c,m){return c&&c.length?Vh(c,on(m,2)):[]}function em(c){var m=c==null?0:c.length;return m?Pt(c,1,m):[]}function d0(c,m,x){return c&&c.length?(m=x||m===t?1:$n(m),Pt(c,0,m<0?0:m)):[]}function c_(c,m,x){var D=c==null?0:c.length;return D?(m=x||m===t?1:$n(m),m=D-m,Pt(c,m<0?0:m,D)):[]}function tm(c,m){return c&&c.length?dl(c,on(m,3),!1,!0):[]}function dp(c,m){return c&&c.length?dl(c,on(m,3)):[]}var h_=hn(function(c){return ji(Yr(c,1,Kr,!0))}),Pv=hn(function(c){var m=Os(c);return Kr(m)&&(m=t),ji(Yr(c,1,Kr,!0),on(m,2))}),p0=hn(function(c){var m=Os(c);return m=typeof m=="function"?m:t,ji(Yr(c,1,Kr,!0),t,m)});function f0(c){return c&&c.length?ji(c):[]}function Fp(c,m){return c&&c.length?ji(c,on(m,2)):[]}function Pn(c,m){return m=typeof m=="function"?m:t,c&&c.length?ji(c,t,m):[]}function eh(c){if(!(c&&c.length))return[];var m=0;return c=Gi(c,function(x){if(Kr(x))return m=Zr(x.length,m),!0}),Yl(m,function(x){return hr(c,li(x))})}function wf(c,m){if(!(c&&c.length))return[];var x=eh(c);return m==null?x:hr(x,function(D){return Hn(m,t,D)})}var ia=hn(function(c,m){return Kr(c)?Uo(c,m):[]}),d_=hn(function(c){return _c(Gi(c,Kr))}),m0=hn(function(c){var m=Os(c);return Kr(m)&&(m=t),_c(Gi(c,Kr),on(m,2))}),nm=hn(function(c){var m=Os(c);return m=typeof m=="function"?m:t,_c(Gi(c,Kr),t,m)}),Fv=hn(eh);function fy(c,m){return Zu(c||[],m||[],wo)}function th(c,m){return Zu(c||[],m||[],gi)}var vo=hn(function(c){var m=c.length,x=m>1?c[m-1]:t;return x=typeof x=="function"?(c.pop(),x):t,wf(c,x)});function Iu(c){var m=Y(c);return m.__chain__=!0,m}function Eg(c,m){return m(c),c}function zp(c,m){return m(c)}var Kh=Bn(function(c){var m=c.length,x=m?c[0]:0,D=this.__wrapped__,U=function(K){return Gh(K,c)};return m>1||this.__actions__.length||!(D instanceof pn)||!ja(x)?this.thru(U):(D=D.slice(x,+x+(m?1:0)),D.__actions__.push({func:zp,args:[U],thisArg:t}),new $r(D,this.__chain__).thru(function(K){return m&&!K.length&&K.push(t),K}))});function rm(){return Iu(this)}function Up(){return new $r(this.value(),this.__chain__)}function Hp(){this.__values__===t&&(this.__values__=Ty(this.value()));var c=this.__index__>=this.__values__.length,m=c?t:this.__values__[this.__index__++];return{done:c,value:m}}function $f(){return this}function md(c){for(var m,x=this;x instanceof pa;){var D=Ld(x);D.__index__=0,D.__values__=t,m?U.__wrapped__=D:m=D;var U=D;x=x.__wrapped__}return U.__wrapped__=c,m}function pp(){var c=this.__wrapped__;if(c instanceof pn){var m=c;return this.__actions__.length&&(m=new pn(this)),m=m.reverse(),m.__actions__.push({func:zp,args:[Ea],thisArg:t}),new $r(m,this.__chain__)}return this.thru(Ea)}function Vm(){return Yc(this.__wrapped__,this.__actions__)}var my=ya(function(c,m,x){Yn.call(c,x)?++c[x]:zo(c,x,1)});function xg(c,m,x){var D=In(c)?bu:xu;return x&&Fr(c,m,x)&&(m=t),D(c,on(m,3))}function zd(c,m){var x=In(c)?Gi:fc;return x(c,on(m,3))}var ki=A(Dd),im=A(Nd);function jm(c,m){return Yr(bi(c,m),1)}function wg(c,m){return Yr(bi(c,m),$e)}function gy(c,m,x){return x=x===t?1:$n(x),Yr(bi(c,m),x)}function Xm(c,m){var x=In(c)?Xr:$o;return x(c,on(m,3))}function Cf(c,m){var x=In(c)?ad:op;return x(c,on(m,3))}var Ym=ya(function(c,m,x){Yn.call(c,x)?c[x].push(m):zo(c,x,[m])});function Gp(c,m,x,D){c=zi(c)?c:mp(c),x=x&&!D?$n(x):0;var U=c.length;return x<0&&(x=Zr(U+x,0)),cm(c)?x<=U&&c.indexOf(m,x)>-1:!!U&&Rs(c,m,x)>-1}var Wp=hn(function(c,m,x){var D=-1,U=typeof m=="function",K=zi(c)?Be(c.length):[];return $o(c,function(ue){K[++D]=U?Hn(m,ue,x):Dn(ue,m,x)}),K}),sm=ya(function(c,m,x){zo(c,x,m)});function bi(c,m){var x=In(c)?hr:wu;return x(c,on(m,3))}function Vp(c,m,x,D){return c==null?[]:(In(m)||(m=m==null?[]:[m]),x=D?t:x,In(x)||(x=x==null?[]:[x]),Ju(c,m,x))}var om=ya(function(c,m,x){c[x?0:1].push(m)},function(){return[[],[]]});function am(c,m,x){var D=In(c)?ld:io,U=arguments.length<3;return D(c,on(m,4),x,U,$o)}function Mf(c,m,x){var D=In(c)?np:io,U=arguments.length<3;return D(c,on(m,4),x,U,op)}function $g(c,m){var x=In(c)?Gi:fc;return x(c,Et(on(m,3)))}function y(c){var m=In(c)?ll:Vc;return m(c)}function T(c,m,x){(x?Fr(c,m,x):m===t)?m=1:m=$n(m);var D=In(c)?pc:Tn;return D(c,m)}function R(c){var m=In(c)?_f:kl;return m(c)}function F(c){if(c==null)return 0;if(zi(c))return cm(c)?ns(c):c.length;var m=us(c);return m==nt||m==mt?c.size:uo(c).length}function X(c,m,x){var D=In(c)?Oc:hl;return x&&Fr(c,m,x)&&(m=t),D(c,on(m,3))}var ee=hn(function(c,m){if(c==null)return[];var x=m.length;return x>1&&Fr(c,m[0],m[1])?m=[]:x>2&&Fr(m[0],m[1],m[2])&&(m=[m[0]]),Ju(c,Yr(m,1),[])}),ve=Pi||function(){return Tr.Date.now()};function Xe(c,m){if(typeof m!="function")throw new vi(l);return c=$n(c),function(){if(--c<1)return m.apply(this,arguments)}}function at(c,m,x){return m=x?t:m,m=c&&m==null?c.length:m,Ce(c,j,t,t,t,t,m)}function Ot(c,m){var x;if(typeof m!="function")throw new vi(l);return c=$n(c),function(){return--c>0&&(x=m.apply(this,arguments)),c<=1&&(m=t),x}}var qt=hn(function(c,m,x){var D=I;if(x.length){var U=Fs(x,Eh(qt));D|=z}return Ce(c,D,m,x,U)}),un=hn(function(c,m,x){var D=I|L;if(x.length){var U=Fs(x,Eh(un));D|=z}return Ce(m,D,c,x,U)});function sn(c,m,x){m=x?t:m;var D=Ce(c,P,t,t,t,t,t,m);return D.placeholder=sn.placeholder,D}function Ln(c,m,x){m=x?t:m;var D=Ce(c,B,t,t,t,t,t,m);return D.placeholder=Ln.placeholder,D}function Jn(c,m,x){var D,U,K,ue,me,Ee,Ze=0,et=!1,ut=!1,It=!0;if(typeof c!="function")throw new vi(l);m=Xi(m)||0,ni(x)&&(et=!!x.leading,ut="maxWait"in x,K=ut?Zr(Xi(x.maxWait)||0,m):K,It="trailing"in x?!!x.trailing:It);function Xt(_i){var Fl=D,wc=U;return D=U=t,Ze=_i,ue=c.apply(wc,Fl),ue}function dn(_i){return Ze=_i,me=cp(Wn,m),et?Xt(_i):ue}function kn(_i){var Fl=_i-Ee,wc=_i-Ze,Iy=m-Fl;return ut?Mi(Iy,K-wc):Iy}function cn(_i){var Fl=_i-Ee,wc=_i-Ze;return Ee===t||Fl>=m||Fl<0||ut&&wc>=K}function Wn(){var _i=ve();if(cn(_i))return qn(_i);me=cp(Wn,kn(_i))}function qn(_i){return me=t,It&&D?Xt(_i):(D=U=t,ue)}function oa(){me!==t&&Cu(me),Ze=0,D=Ee=U=me=t}function Zs(){return me===t?ue:qn(ve())}function Ds(){var _i=ve(),Fl=cn(_i);if(D=arguments,U=this,Ee=_i,Fl){if(me===t)return dn(Ee);if(ut)return Cu(me),me=cp(Wn,m),Xt(Ee)}return me===t&&(me=cp(Wn,m)),ue}return Ds.cancel=oa,Ds.flush=Zs,Ds}var nr=hn(function(c,m){return Wh(c,1,m)}),Ao=hn(function(c,m,x){return Wh(c,Xi(m)||0,x)});function xt(c){return Ce(c,Z)}function ht(c,m){if(typeof c!="function"||m!=null&&typeof m!="function")throw new vi(l);var x=function(){var D=arguments,U=m?m.apply(this,D):D[0],K=x.cache;if(K.has(U))return K.get(U);var ue=c.apply(this,D);return x.cache=K.set(U,ue)||K,ue};return x.cache=new(ht.Cache||Us),x}ht.Cache=Us;function Et(c){if(typeof c!="function")throw new vi(l);return function(){var m=arguments;switch(m.length){case 0:return!c.call(this);case 1:return!c.call(this,m[0]);case 2:return!c.call(this,m[0],m[1]);case 3:return!c.call(this,m[0],m[1],m[2])}return!c.apply(this,m)}}function bn(c){return Ot(2,c)}var or=Sh(function(c,m){m=m.length==1&&In(m[0])?hr(m[0],Hr(on())):hr(Yr(m,1),Hr(on()));var x=m.length;return hn(function(D){for(var U=-1,K=Mi(D.length,x);++U<K;)D[U]=m[U].call(this,D[U]);return Hn(c,this,D)})}),er=hn(function(c,m){var x=Fs(m,Eh(er));return Ce(c,z,t,m,x)}),pr=hn(function(c,m){var x=Fs(m,Eh(pr));return Ce(c,G,t,m,x)}),kr=Bn(function(c,m){return Ce(c,H,t,t,t,m)});function Pl(c,m){if(typeof c!="function")throw new vi(l);return m=m===t?m:$n(m),hn(c,m)}function cs(c,m){if(typeof c!="function")throw new vi(l);return m=m==null?0:Zr($n(m),0),hn(function(x){var D=x[m],U=fo(x,0,m);return D&&Jo(U,D),Hn(c,this,U)})}function jp(c,m,x){var D=!0,U=!0;if(typeof c!="function")throw new vi(l);return ni(x)&&(D="leading"in x?!!x.leading:D,U="trailing"in x?!!x.trailing:U),Jn(c,m,{leading:D,maxWait:m,trailing:U})}function g0(c){return at(c,1)}function Ru(c,m){return er(Js(m),c)}function Ud(){if(!arguments.length)return[];var c=arguments[0];return In(c)?c:[c]}function W1(c){return Ii(c,E)}function HE(c,m){return m=typeof m=="function"?m:t,Ii(c,E,m)}function GE(c){return Ii(c,v|E)}function lm(c,m){return m=typeof m=="function"?m:t,Ii(c,v|E,m)}function zv(c,m){return m==null||Gc(c,m,Ti(m))}function xa(c,m){return c===m||c!==c&&m!==m}var V1=yn(Ga),Cg=yn(function(c,m){return c>=m}),Hd=Zn(function(){return arguments}())?Zn:function(c){return ci(c)&&Yn.call(c,"callee")&&!hc.call(c,"callee")},In=Be.isArray,_y=yu?Hr(yu):Or;function zi(c){return c!=null&&xh(c.length)&&!Ec(c)}function Kr(c){return ci(c)&&zi(c)}function Uv(c){return c===!0||c===!1||ci(c)&&mi(c)==st}var nh=wd||mm,j1=xo?Hr(xo):ei;function fp(c){return ci(c)&&c.nodeType===1&&!zr(c)}function p_(c){if(c==null)return!0;if(zi(c)&&(In(c)||typeof c=="string"||typeof c.splice=="function"||nh(c)||Vd(c)||Hd(c)))return!c.length;var m=us(c);if(m==nt||m==mt)return!c.size;if(Tc(c))return!uo(c).length;for(var x in c)if(Yn.call(c,x))return!1;return!0}function Ui(c,m){return Jr(c,m)}function Io(c,m,x){x=typeof x=="function"?x:t;var D=x?x(c,m):t;return D===t?Jr(c,m,t,x):!!D}function _0(c){if(!ci(c))return!1;var m=mi(c);return m==Ue||m==dt||typeof c.message=="string"&&typeof c.name=="string"&&!zr(c)}function yy(c){return typeof c=="number"&&$l(c)}function Ec(c){if(!ni(c))return!1;var m=mi(c);return m==Ae||m==je||m==it||m==Ct}function y0(c){return typeof c=="number"&&c==$n(c)}function xh(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=q}function ni(c){var m=typeof c;return c!=null&&(m=="object"||m=="function")}function ci(c){return c!=null&&typeof c=="object"}var Jh=vu?Hr(vu):as;function Cs(c,m){return c===m||Qi(c,m,jf(m))}function um(c,m,x){return x=typeof x=="function"?x:t,Qi(c,m,jf(m),x)}function vy(c){return Gd(c)&&c!=+c}function by(c){if(a_(c))throw new tn(o);return iu(c)}function v0(c){return c===null}function WE(c){return c==null}function Gd(c){return typeof c=="number"||ci(c)&&mi(c)==tt}function zr(c){if(!ci(c)||mi(c)!=Rt)return!1;var m=Fa(c);if(m===null)return!0;var x=Yn.call(m,"constructor")&&m.constructor;return typeof x=="function"&&x instanceof x&&Eu.call(x)==Pa}var Wd=nl?Hr(nl):Yu;function Ya(c){return y0(c)&&c>=-q&&c<=q}var f_=Ni?Hr(Ni):gc;function cm(c){return typeof c=="string"||!In(c)&&ci(c)&&mi(c)==xe}function sa(c){return typeof c=="symbol"||ci(c)&&mi(c)==ie}var Vd=wi?Hr(wi):Ku;function X1(c){return c===t}function Y1(c){return ci(c)&&us(c)==ct}function qh(c){return ci(c)&&mi(c)==Tt}var Hv=yn(_a),Xp=yn(function(c,m){return c<=m});function Ty(c){if(!c)return[];if(zi(c))return cm(c)?Br(c):ti(c);if(Qo&&c[Qo])return Dh(c[Qo]());var m=us(c),x=m==nt?Hu:m==mt?ql:mp;return x(c)}function xc(c){if(!c)return c===0?c:0;if(c=Xi(c),c===$e||c===-$e){var m=c<0?-1:1;return m*oe}return c===c?c:0}function $n(c){var m=xc(c),x=m%1;return m===m?x?m-x:m:0}function b0(c){return c?Ua($n(c),0,pe):0}function Xi(c){if(typeof c=="number")return c;if(sa(c))return se;if(ni(c)){var m=typeof c.valueOf=="function"?c.valueOf():c;c=ni(m)?m+"":m}if(typeof c!="string")return c===0?c:+c;c=Lh(c);var x=si.test(c);return x||jr.test(c)?Oa(c.slice(2),x?2:8):wr.test(c)?se:+c}function Gv(c){return ls(c,es(c))}function lt(c){return c?Ua($n(c),-q,q):c===0?c:0}function rr(c){return c==null?"":oi(c)}var m_=va(function(c,m){if(Tc(m)||zi(m)){ls(m,Ti(m),c);return}for(var x in m)Yn.call(m,x)&&wo(c,x,m[x])}),g_=va(function(c,m){ls(m,es(m),c)}),Qh=va(function(c,m,x,D){ls(m,es(m),c,D)}),Km=va(function(c,m,x,D){ls(m,Ti(m),c,D)}),Sy=Bn(Gh);function T0(c,m){var x=Es(c);return m==null?x:ss(x,m)}var Wv=hn(function(c,m){c=gn(c);var x=-1,D=m.length,U=D>2?m[2]:t;for(U&&Fr(m[0],m[1],U)&&(D=1);++x<D;)for(var K=m[x],ue=es(K),me=-1,Ee=ue.length;++me<Ee;){var Ze=ue[me],et=c[Ze];(et===t||xa(et,Bi[Ze])&&!Yn.call(c,Ze))&&(c[Ze]=K[Ze])}return c}),K1=hn(function(c){return c.push(t,rt),Hn(Zh,t,c)});function jd(c,m){return Ed(c,on(m,3),os)}function Vv(c,m){return Ed(c,on(m,3),Ha)}function __(c,m){return c==null?c:ru(c,on(m,3),es)}function jv(c,m){return c==null?c:Xu(c,on(m,3),es)}function J1(c,m){return c&&os(c,on(m,3))}function q1(c,m){return c&&Ha(c,on(m,3))}function Q1(c){return c==null?[]:xs(c,Ti(c))}function Z1(c){return c==null?[]:xs(c,es(c))}function hm(c,m,x){var D=c==null?t:ws(c,m);return D===t?x:D}function Xv(c,m){return c!=null&&yg(c,m,mc)}function dm(c,m){return c!=null&&yg(c,m,ap)}var Yv=de(function(c,m,x){m!=null&&typeof m.toString!="function"&&(m=zs.call(m)),c[m]=x},w_(Ro)),y_=de(function(c,m,x){m!=null&&typeof m.toString!="function"&&(m=zs.call(m)),Yn.call(c,m)?c[m].push(x):c[m]=[x]},on),v_=hn(Dn);function Ti(c){return zi(c)?_n(c):uo(c)}function es(c){return zi(c)?_n(c,!0):pd(c)}function eT(c,m){var x={};return m=on(m,3),os(c,function(D,U,K){zo(x,m(D,U,K),D)}),x}function Af(c,m){var x={};return m=on(m,3),os(c,function(D,U,K){zo(x,U,m(D,U,K))}),x}var pm=va(function(c,m,x){ho(c,m,x)}),Zh=va(function(c,m,x,D){ho(c,m,x,D)}),tT=Bn(function(c,m){var x={};if(c==null)return x;var D=!1;m=hr(m,function(K){return K=na(K,c),D||(D=K.length>1),K}),ls(c,Cr(c),x),D&&(x=Ii(x,v|b|E,Ut));for(var U=m.length;U--;)Xc(x,m[U]);return x});function S0(c,m){return b_(c,Et(on(m)))}var Qt=Bn(function(c,m){return c==null?{}:qu(c,m)});function b_(c,m){if(c==null)return{};var x=hr(Cr(c),function(D){return[D]});return m=on(m),bh(c,x,function(D,U){return m(D,U[0])})}function VE(c,m,x){m=na(m,c);var D=-1,U=m.length;for(U||(U=1,c=t);++D<U;){var K=c==null?t:c[_o(m[D])];K===t&&(D=U,K=x),c=Ec(K)?K.call(c):K}return c}function jE(c,m,x){return c==null?c:gi(c,m,x)}function XE(c,m,x,D){return D=typeof D=="function"?D:t,c==null?c:gi(c,m,x,D)}var T_=bt(Ti),E0=bt(es);function hs(c,m,x){var D=In(c),U=D||nh(c)||Vd(c);if(m=on(m,4),x==null){var K=c&&c.constructor;U?x=D?new K:[]:ni(c)?x=Ec(K)?Es(Fa(c)):{}:x={}}return(U?Xr:os)(c,function(ue,me,Ee){return m(x,ue,me,Ee)}),x}function Mg(c,m){return c==null?!0:Xc(c,m)}function Ey(c,m,x){return c==null?c:po(c,m,Js(x))}function YE(c,m,x,D){return D=typeof D=="function"?D:t,c==null?c:po(c,m,Js(x),D)}function mp(c){return c==null?[]:Ci(c,Ti(c))}function gp(c){return c==null?[]:Ci(c,es(c))}function S_(c,m,x){return x===t&&(x=m,m=t),x!==t&&(x=Xi(x),x=x===x?x:0),m!==t&&(m=Xi(m),m=m===m?m:0),Ua(Xi(c),m,x)}function Ls(c,m,x){return m=xc(m),x===t?(x=m,m=0):x=xc(x),c=Xi(c),vh(c,m,x)}function nT(c,m,x){if(x&&typeof x!="boolean"&&Fr(c,m,x)&&(m=x=t),x===t&&(typeof m=="boolean"?(x=m,m=t):typeof c=="boolean"&&(x=c,c=t)),c===t&&m===t?(c=0,m=1):(c=xc(c),m===t?(m=c,c=0):m=xc(m)),c>m){var D=c;c=m,m=D}if(x||c%1||m%1){var U=Cl();return Mi(c+U*(m-c+dh("1e-"+((U+"").length-1))),m)}return ks(c,m)}var Kv=h(function(c,m,x){return m=m.toLowerCase(),c+(x?fm(m):m)});function fm(c){return C0(rr(c).toLowerCase())}function xy(c){return c=rr(c),c&&c.replace(Ia,ip).replace(ms,"")}function Jv(c,m,x){c=rr(c),m=oi(m);var D=c.length;x=x===t?D:Ua($n(x),0,D);var U=x;return x-=m.length,x>=0&&c.slice(x,U)==m}function qv(c){return c=rr(c),c&&Dr.test(c)?c.replace(Rn,sp):c}function Qv(c){return c=rr(c),c&&Ft.test(c)?c.replace(ot,"\\$&"):c}var E_=h(function(c,m,x){return c+(x?"-":"")+m.toLowerCase()}),KE=h(function(c,m,x){return c+(x?" ":"")+m.toLowerCase()}),rT=w("toLowerCase");function JE(c,m,x){c=rr(c),m=$n(m);var D=m?ns(c):0;if(!m||D>=m)return c;var U=(m-D)/2;return St(Zl(U),x)+c+St(Wu(U),x)}function qE(c,m,x){c=rr(c),m=$n(m);var D=m?ns(c):0;return m&&D<m?c+St(m-D,x):c}function Yp(c,m,x){c=rr(c),m=$n(m);var D=m?ns(c):0;return m&&D<m?St(m-D,x)+c:c}function Zv(c,m,x){return x||m==null?m=0:m&&(m=+m),Op(rr(c).replace(nn,""),m||0)}function eb(c,m,x){return(x?Fr(c,m,x):m===t)?m=1:m=$n(m),Gs(rr(c),m)}function x0(){var c=arguments,m=rr(c[0]);return c.length<3?m:m.replace(c[1],c[2])}var iT=h(function(c,m,x){return c+(x?"_":"")+m.toLowerCase()});function tb(c,m,x){return x&&typeof x!="number"&&Fr(c,m,x)&&(m=x=t),x=x===t?pe:x>>>0,x?(c=rr(c),c&&(typeof m=="string"||m!=null&&!Wd(m))&&(m=oi(m),!m&&rl(c))?fo(Br(c),0,x):c.split(m,x)):[]}var x_=h(function(c,m,x){return c+(x?" ":"")+C0(m)});function sT(c,m,x){return c=rr(c),x=x==null?0:Ua($n(x),0,c.length),m=oi(m),c.slice(x,x+m.length)==m}function nb(c,m,x){var D=Y.templateSettings;x&&Fr(c,m,x)&&(m=t),c=rr(c),m=Qh({},m,D,Le);var U=Qh({},m.imports,D.imports,Le),K=Ti(U),ue=Ci(U,K),me,Ee,Ze=0,et=m.interpolate||Eo,ut="__p += '",It=Pr((m.escape||Eo).source+"|"+et.source+"|"+(et===fr?tr:Eo).source+"|"+(m.evaluate||Eo).source+"|$","g"),Xt="//# sourceURL="+(Yn.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++gu+"]")+`
`;c.replace(It,function(cn,Wn,qn,oa,Zs,Ds){return qn||(qn=oa),ut+=c.slice(Ze,Ds).replace(Wl,ud),Wn&&(me=!0,ut+=`' +
__e(`+Wn+`) +
'`),Zs&&(Ee=!0,ut+=`';
`+Zs+`;
__p += '`),qn&&(ut+=`' +
((__t = (`+qn+`)) == null ? '' : __t) +
'`),Ze=Ds+cn.length,cn}),ut+=`';
`;var dn=Yn.call(m,"variable")&&m.variable;if(!dn)ut=`with (obj) {
`+ut+`
}
`;else if(Wt.test(dn))throw new tn(u);ut=(Ee?ut.replace(Zt,""):ut).replace(_t,"$1").replace(Kt,"$1;"),ut="function("+(dn||"obj")+`) {
`+(dn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(me?", __e = _.escape":"")+(Ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ut+`return __p
}`;var kn=M0(function(){return Mn(K,Xt+"return "+ut).apply(t,ue)});if(kn.source=ut,_0(kn))throw kn;return kn}function ed(c){return rr(c).toLowerCase()}function If(c){return rr(c).toUpperCase()}function oT(c,m,x){if(c=rr(c),c&&(x||m===t))return Lh(c);if(!c||!(m=oi(m)))return c;var D=Br(c),U=Br(m),K=Wi(D,U),ue=ca(D,U)+1;return fo(D,K,ue).join("")}function wy(c,m,x){if(c=rr(c),c&&(x||m===t))return c.slice(0,xl(c)+1);if(!c||!(m=oi(m)))return c;var D=Br(c),U=ca(D,Br(m))+1;return fo(D,0,U).join("")}function aT(c,m,x){if(c=rr(c),c&&(x||m===t))return c.replace(nn,"");if(!c||!(m=oi(m)))return c;var D=Br(c),U=Wi(D,Br(m));return fo(D,U).join("")}function w0(c,m){var x=ae,D=J;if(ni(m)){var U="separator"in m?m.separator:U;x="length"in m?$n(m.length):x,D="omission"in m?oi(m.omission):D}c=rr(c);var K=c.length;if(rl(c)){var ue=Br(c);K=ue.length}if(x>=K)return c;var me=x-ns(D);if(me<1)return D;var Ee=ue?fo(ue,0,me).join(""):c.slice(0,me);if(U===t)return Ee+D;if(ue&&(me+=Ee.length-me),Wd(U)){if(c.slice(me).search(U)){var Ze,et=Ee;for(U.global||(U=Pr(U.source,rr(mr.exec(U))+"g")),U.lastIndex=0;Ze=U.exec(et);)var ut=Ze.index;Ee=Ee.slice(0,ut===t?me:ut)}}else if(c.indexOf(oi(U),me)!=me){var It=Ee.lastIndexOf(U);It>-1&&(Ee=Ee.slice(0,It))}return Ee+D}function $y(c){return c=rr(c),c&&ii.test(c)?c.replace(Yt,Ba):c}var $0=h(function(c,m,x){return c+(x?" ":"")+m.toUpperCase()}),C0=w("toUpperCase");function rb(c,m,x){return c=rr(c),m=x?t:m,m===t?Lc(c)?mh(c):mf(c):c.match(m)||[]}var M0=hn(function(c,m){try{return Hn(c,t,m)}catch(x){return _0(x)?x:new tn(x)}}),ib=Bn(function(c,m){return Xr(m,function(x){x=_o(x),zo(c,x,qt(c[x],c))}),c});function sb(c){var m=c==null?0:c.length,x=on();return c=m?hr(c,function(D){if(typeof D[1]!="function")throw new vi(l);return[x(D[0]),D[1]]}):[],hn(function(D){for(var U=-1;++U<m;){var K=c[U];if(Hn(K[0],this,D))return Hn(K[1],this,D)}})}function QE(c){return Id(Ii(c,v))}function w_(c){return function(){return c}}function ZE(c,m){return c==null||c!==c?m:c}var lT=N(),ex=N(!0);function Ro(c){return c}function Yi(c){return Ks(typeof c=="function"?c:Ii(c,v))}function Rf(c){return $u(Ii(c,v))}function $_(c,m){return co(c,Ii(m,v))}var Cy=hn(function(c,m){return function(x){return Dn(x,c,m)}}),kf=hn(function(c,m){return function(x){return Dn(c,x,m)}});function C_(c,m,x){var D=Ti(m),U=xs(m,D);x==null&&!(ni(m)&&(U.length||!D.length))&&(x=m,m=c,c=this,U=xs(m,Ti(m)));var K=!(ni(x)&&"chain"in x)||!!x.chain,ue=Ec(c);return Xr(U,function(me){var Ee=m[me];c[me]=Ee,ue&&(c.prototype[me]=function(){var Ze=this.__chain__;if(K||Ze){var et=c(this.__wrapped__),ut=et.__actions__=ti(this.__actions__);return ut.push({func:Ee,args:arguments,thisArg:c}),et.__chain__=Ze,et}return Ee.apply(c,Jo([this.value()],arguments))})}),c}function A0(){return Tr._===this&&(Tr._=Bh),this}function I0(){}function uT(c){return c=$n(c),hn(function(m){return Ho(m,c)})}var ob=Qe(hr),tx=Qe(bu),ab=Qe(Oc);function M_(c){return Ta(c)?li(_o(c)):Th(c)}function cT(c){return function(m){return c==null?t:ws(c,m)}}var lb=ln(),My=ln(!0);function R0(){return[]}function mm(){return!1}function ub(){return{}}function cb(){return""}function hb(){return!0}function db(c,m){if(c=$n(c),c<1||c>q)return[];var x=pe,D=Mi(c,pe);m=on(m),c-=pe;for(var U=Yl(D,m);++x<c;)m(x);return U}function Jm(c){return In(c)?hr(c,_o):sa(c)?[c]:ti(a0(rr(c)))}function pb(c){var m=++ha;return rr(c)+m}var fb=ke(function(c,m){return c+m},0),mb=fn("ceil"),gb=ke(function(c,m){return c/m},1),_b=fn("floor");function Kn(c){return c&&c.length?Il(c,Ro,Ga):t}function hT(c,m){return c&&c.length?Il(c,on(m,2),Ga):t}function dT(c){return Da(c,Ro)}function Ag(c,m){return Da(c,on(m,2))}function A_(c){return c&&c.length?Il(c,Ro,_a):t}function k0(c,m){return c&&c.length?Il(c,on(m,2),_a):t}var pT=ke(function(c,m){return c*m},1),Ay=fn("round"),fT=ke(function(c,m){return c-m},0);function mT(c){return c&&c.length?Po(c,Ro):0}function gT(c,m){return c&&c.length?Po(c,on(m,2)):0}return Y.after=Xe,Y.ary=at,Y.assign=m_,Y.assignIn=g_,Y.assignInWith=Qh,Y.assignWith=Km,Y.at=Sy,Y.before=Ot,Y.bind=qt,Y.bindAll=ib,Y.bindKey=un,Y.castArray=Ud,Y.chain=Iu,Y.chunk=Jf,Y.compact=Mu,Y.concat=l0,Y.cond=sb,Y.conforms=QE,Y.constant=w_,Y.countBy=my,Y.create=T0,Y.curry=sn,Y.curryRight=Ln,Y.debounce=Jn,Y.defaults=Wv,Y.defaultsDeep=K1,Y.defer=nr,Y.delay=Ao,Y.difference=Wo,Y.differenceBy=Zi,Y.differenceWith=lu,Y.drop=ml,Y.dropRight=Au,Y.dropRightWhile=uu,Y.dropWhile=Tf,Y.fill=Nl,Y.filter=zd,Y.flatMap=jm,Y.flatMapDeep=wg,Y.flatMapDepth=gy,Y.flatten=hp,Y.flattenDeep=Tg,Y.flattenDepth=qf,Y.flip=xt,Y.flow=lT,Y.flowRight=ex,Y.fromPairs=Qc,Y.functions=Q1,Y.functionsIn=Z1,Y.groupBy=Ym,Y.initial=Bd,Y.intersection=Hm,Y.intersectionBy=Gm,Y.intersectionWith=yo,Y.invert=Yv,Y.invertBy=y_,Y.invokeMap=Wp,Y.iteratee=Yi,Y.keyBy=sm,Y.keys=Ti,Y.keysIn=es,Y.map=bi,Y.mapKeys=eT,Y.mapValues=Af,Y.matches=Rf,Y.matchesProperty=$_,Y.memoize=ht,Y.merge=pm,Y.mergeWith=Zh,Y.method=Cy,Y.methodOf=kf,Y.mixin=C_,Y.negate=Et,Y.nthArg=uT,Y.omit=tT,Y.omitBy=S0,Y.once=bn,Y.orderBy=Vp,Y.over=ob,Y.overArgs=or,Y.overEvery=tx,Y.overSome=ab,Y.partial=er,Y.partialRight=pr,Y.partition=om,Y.pick=Qt,Y.pickBy=b_,Y.property=M_,Y.propertyOf=cT,Y.pull=Sg,Y.pullAll=Pd,Y.pullAllBy=Wm,Y.pullAllWith=Sc,Y.pullAt=Fd,Y.range=lb,Y.rangeRight=My,Y.rearg=kr,Y.reject=$g,Y.remove=ra,Y.rest=Pl,Y.reverse=Ea,Y.sampleSize=T,Y.set=jE,Y.setWith=XE,Y.shuffle=R,Y.slice=u_,Y.sortBy=ee,Y.sortedUniq=xf,Y.sortedUniqBy=h0,Y.split=tb,Y.spread=cs,Y.tail=em,Y.take=d0,Y.takeRight=c_,Y.takeRightWhile=tm,Y.takeWhile=dp,Y.tap=Eg,Y.throttle=jp,Y.thru=zp,Y.toArray=Ty,Y.toPairs=T_,Y.toPairsIn=E0,Y.toPath=Jm,Y.toPlainObject=Gv,Y.transform=hs,Y.unary=g0,Y.union=h_,Y.unionBy=Pv,Y.unionWith=p0,Y.uniq=f0,Y.uniqBy=Fp,Y.uniqWith=Pn,Y.unset=Mg,Y.unzip=eh,Y.unzipWith=wf,Y.update=Ey,Y.updateWith=YE,Y.values=mp,Y.valuesIn=gp,Y.without=ia,Y.words=rb,Y.wrap=Ru,Y.xor=d_,Y.xorBy=m0,Y.xorWith=nm,Y.zip=Fv,Y.zipObject=fy,Y.zipObjectDeep=th,Y.zipWith=vo,Y.entries=T_,Y.entriesIn=E0,Y.extend=g_,Y.extendWith=Qh,C_(Y,Y),Y.add=fb,Y.attempt=M0,Y.camelCase=Kv,Y.capitalize=fm,Y.ceil=mb,Y.clamp=S_,Y.clone=W1,Y.cloneDeep=GE,Y.cloneDeepWith=lm,Y.cloneWith=HE,Y.conformsTo=zv,Y.deburr=xy,Y.defaultTo=ZE,Y.divide=gb,Y.endsWith=Jv,Y.eq=xa,Y.escape=qv,Y.escapeRegExp=Qv,Y.every=xg,Y.find=ki,Y.findIndex=Dd,Y.findKey=jd,Y.findLast=im,Y.findLastIndex=Nd,Y.findLastKey=Vv,Y.floor=_b,Y.forEach=Xm,Y.forEachRight=Cf,Y.forIn=__,Y.forInRight=jv,Y.forOwn=J1,Y.forOwnRight=q1,Y.get=hm,Y.gt=V1,Y.gte=Cg,Y.has=Xv,Y.hasIn=dm,Y.head=gl,Y.identity=Ro,Y.includes=Gp,Y.indexOf=Zc,Y.inRange=Ls,Y.invoke=v_,Y.isArguments=Hd,Y.isArray=In,Y.isArrayBuffer=_y,Y.isArrayLike=zi,Y.isArrayLikeObject=Kr,Y.isBoolean=Uv,Y.isBuffer=nh,Y.isDate=j1,Y.isElement=fp,Y.isEmpty=p_,Y.isEqual=Ui,Y.isEqualWith=Io,Y.isError=_0,Y.isFinite=yy,Y.isFunction=Ec,Y.isInteger=y0,Y.isLength=xh,Y.isMap=Jh,Y.isMatch=Cs,Y.isMatchWith=um,Y.isNaN=vy,Y.isNative=by,Y.isNil=WE,Y.isNull=v0,Y.isNumber=Gd,Y.isObject=ni,Y.isObjectLike=ci,Y.isPlainObject=zr,Y.isRegExp=Wd,Y.isSafeInteger=Ya,Y.isSet=f_,Y.isString=cm,Y.isSymbol=sa,Y.isTypedArray=Vd,Y.isUndefined=X1,Y.isWeakMap=Y1,Y.isWeakSet=qh,Y.join=Qf,Y.kebabCase=E_,Y.last=Os,Y.lastIndexOf=Bl,Y.lowerCase=KE,Y.lowerFirst=rT,Y.lt=Hv,Y.lte=Xp,Y.max=Kn,Y.maxBy=hT,Y.mean=dT,Y.meanBy=Ag,Y.min=A_,Y.minBy=k0,Y.stubArray=R0,Y.stubFalse=mm,Y.stubObject=ub,Y.stubString=cb,Y.stubTrue=hb,Y.multiply=pT,Y.nth=Sf,Y.noConflict=A0,Y.noop=I0,Y.now=ve,Y.pad=JE,Y.padEnd=qE,Y.padStart=Yp,Y.parseInt=Zv,Y.random=nT,Y.reduce=am,Y.reduceRight=Mf,Y.repeat=eb,Y.replace=x0,Y.result=VE,Y.round=Ay,Y.runInContext=ye,Y.sample=y,Y.size=F,Y.snakeCase=iT,Y.some=X,Y.sortedIndex=Zf,Y.sortedIndexBy=u0,Y.sortedIndexOf=py,Y.sortedLastIndex=Pp,Y.sortedLastIndexBy=Ef,Y.sortedLastIndexOf=c0,Y.startCase=x_,Y.startsWith=sT,Y.subtract=fT,Y.sum=mT,Y.sumBy=gT,Y.template=nb,Y.times=db,Y.toFinite=xc,Y.toInteger=$n,Y.toLength=b0,Y.toLower=ed,Y.toNumber=Xi,Y.toSafeInteger=lt,Y.toString=rr,Y.toUpper=If,Y.trim=oT,Y.trimEnd=wy,Y.trimStart=aT,Y.truncate=w0,Y.unescape=$y,Y.uniqueId=pb,Y.upperCase=$0,Y.upperFirst=C0,Y.each=Xm,Y.eachRight=Cf,Y.first=gl,C_(Y,function(){var c={};return os(Y,function(m,x){Yn.call(Y.prototype,x)||(c[x]=m)}),c}(),{chain:!1}),Y.VERSION=i,Xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){Y[c].placeholder=Y}),Xr(["drop","take"],function(c,m){pn.prototype[c]=function(x){x=x===t?1:Zr($n(x),0);var D=this.__filtered__&&!m?new pn(this):this.clone();return D.__filtered__?D.__takeCount__=Mi(x,D.__takeCount__):D.__views__.push({size:Mi(x,pe),type:c+(D.__dir__<0?"Right":"")}),D},pn.prototype[c+"Right"]=function(x){return this.reverse()[c](x).reverse()}}),Xr(["filter","map","takeWhile"],function(c,m){var x=m+1,D=x==le||x==be;pn.prototype[c]=function(U){var K=this.clone();return K.__iteratees__.push({iteratee:on(U,3),type:x}),K.__filtered__=K.__filtered__||D,K}}),Xr(["head","last"],function(c,m){var x="take"+(m?"Right":"");pn.prototype[c]=function(){return this[x](1).value()[0]}}),Xr(["initial","tail"],function(c,m){var x="drop"+(m?"":"Right");pn.prototype[c]=function(){return this.__filtered__?new pn(this):this[x](1)}}),pn.prototype.compact=function(){return this.filter(Ro)},pn.prototype.find=function(c){return this.filter(c).head()},pn.prototype.findLast=function(c){return this.reverse().find(c)},pn.prototype.invokeMap=hn(function(c,m){return typeof c=="function"?new pn(this):this.map(function(x){return Dn(x,c,m)})}),pn.prototype.reject=function(c){return this.filter(Et(on(c)))},pn.prototype.slice=function(c,m){c=$n(c);var x=this;return x.__filtered__&&(c>0||m<0)?new pn(x):(c<0?x=x.takeRight(-c):c&&(x=x.drop(c)),m!==t&&(m=$n(m),x=m<0?x.dropRight(-m):x.take(m-c)),x)},pn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},pn.prototype.toArray=function(){return this.take(pe)},os(pn.prototype,function(c,m){var x=/^(?:filter|find|map|reject)|While$/.test(m),D=/^(?:head|last)$/.test(m),U=Y[D?"take"+(m=="last"?"Right":""):m],K=D||/^find/.test(m);U&&(Y.prototype[m]=function(){var ue=this.__wrapped__,me=D?[1]:arguments,Ee=ue instanceof pn,Ze=me[0],et=Ee||In(ue),ut=function(Wn){var qn=U.apply(Y,Jo([Wn],me));return D&&It?qn[0]:qn};et&&x&&typeof Ze=="function"&&Ze.length!=1&&(Ee=et=!1);var It=this.__chain__,Xt=!!this.__actions__.length,dn=K&&!It,kn=Ee&&!Xt;if(!K&&et){ue=kn?ue:new pn(this);var cn=c.apply(ue,me);return cn.__actions__.push({func:zp,args:[ut],thisArg:t}),new $r(cn,It)}return dn&&kn?c.apply(this,me):(cn=this.thru(ut),dn?D?cn.value()[0]:cn.value():cn)})}),Xr(["pop","push","shift","sort","splice","unshift"],function(c){var m=oo[c],x=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",D=/^(?:pop|shift)$/.test(c);Y.prototype[c]=function(){var U=arguments;if(D&&!this.__chain__){var K=this.value();return m.apply(In(K)?K:[],U)}return this[x](function(ue){return m.apply(In(ue)?ue:[],U)})}}),os(pn.prototype,function(c,m){var x=Y[m];if(x){var D=x.name+"";Yn.call(Al,D)||(Al[D]=[]),Al[D].push({name:m,func:x})}}),Al[W(t,L).name]=[{name:"wrapper",func:t}],pn.prototype.clone=Lp,pn.prototype.reverse=al,pn.prototype.value=Ai,Y.prototype.at=Kh,Y.prototype.chain=rm,Y.prototype.commit=Up,Y.prototype.next=Hp,Y.prototype.plant=md,Y.prototype.reverse=pp,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=Vm,Y.prototype.first=Y.prototype.head,Qo&&(Y.prototype[Qo]=$f),Y},di=xd();yi?((yi.exports=di)._=di,Is._=di):Tr._=di}).call(Hl)})(tI,tI.exports);var kie=tI.exports;const Qn=Vee((n,e)=>({ip:"",blocks:{},Start:{},lines:{},hulls:{},texts:{},points:{},widgets:{},counter:0,screenToShow:HB,blocklyWorkspaceXML:{},lightMode:!0,simOnly:!1,isConnected:!1,workerThread:null,blocklyWorkspace:null,llmEndpoint:"",llmAPIKey:"",llmDeployment:"",userPrompt:"",programGoals:{...Iie},llmProcessing:!1,llmMode:!1,showGPTConsole:!1,fullScreenPanel:!0,displayLLMBlockPrompt:!1,mistyAudioList:[],mistyImageList:[],headerHeight:0,headerWidth:0,clock:new tie,tfs:{...w2},startingTfs:JSON.parse(JSON.stringify(w2)),endingTfs:JSON.parse(JSON.stringify(w2)),items:{...$2},startingItems:JSON.parse(JSON.stringify($2)),endingItems:JSON.parse(JSON.stringify($2)),activeModal:null,updateScreen:t=>n(i=>({screenToShow:t})),setActiveModal:t=>n(i=>({activeModal:t})),closeModal:()=>n(t=>({activeModal:null})),toggleLLMMode:t=>n({llmMode:t}),setFullScreenPanel:t=>n({fullScreenPanel:t}),setShowGPTConsole:t=>n({showGPTConsole:t}),toggleLLMBlockPrompt:t=>n({displayLLMBlockPrompt:t}),toggleTheme:t=>n({lightMode:t}),getAllTasks:()=>e().programGoals,getMainTasks:()=>{let t=e().programGoals;return Object.keys(t).filter(i=>t[i].type==="task").sort((i,s)=>t[i].order-t[s].order).reduce((i,s)=>(i[s]=t[s],i),{})},setWorkerThread:t=>n({workerThread:t}),setBlocklyWorkspace:t=>n({blocklyWorkspace:t}),setAPIKey:t=>n({llmAPIKey:t}),setEndpoint:t=>n({llmEndpoint:t}),setDeployment:t=>n({llmDeployment:t}),setImageList:t=>n({mistyImageList:t}),setAudioList:t=>n({mistyAudioList:t}),setUserPrompt:t=>n({userPrompt:t}),setHeaderDimensions:(t,i)=>n({headerHeight:t,headerWidth:i}),generateProgramOutline:()=>{n({llmProcessing:!0});let t=e(),i=t.userPrompt,s=t.llmEndpoint,o=t.llmDeployment,l=t.llmAPIKey;fetch(s+"/openai/deployments/"+o+"/chat/completions?api-version=2024-02-01",{method:"POST",headers:{"Content-Type":"application/json","api-key":l},body:JSON.stringify({messages:[{role:"system",content:rie},{role:"user",content:'Give me the output for the following user prompt: "'+i+'"'}]})}).then(u=>{if(!u.ok)throw new Error(`LLM Request failed with status ${u.status}`);return u.json()}).then(u=>{console.log(u);let d=u.choices[0].message.content;d=d.length>0?d.slice(1,d.length-1):{},n({programGoals:JSON.parse(d),llmProcessing:!1,activeModal:null})}).catch(u=>{n({llmProcessing:!1}),alert(`Failed to connect to ChatGPT: ${u.message}`)})},generateProgram:()=>{n({llmProcessing:!0});let t=e(),i=t.userPrompt,s=t.llmEndpoint,o=t.llmDeployment,l=t.llmAPIKey;fetch(s+"/openai/deployments/"+o+"/chat/completions?api-version=2024-02-01",{method:"POST",headers:{"Content-Type":"application/json","api-key":l},body:JSON.stringify({messages:[{role:"system",content:Rie},{role:"user",content:'Give me the output for the following user prompt: "'+i+'"'}]})}).then(u=>{if(!u.ok)throw new Error(`LLM Request failed with status ${u.status}`);return u.json()}).then(u=>{console.log(u);let d=u.choices[0].message.content;console.log(d),n({llmProcessing:!1,activeModal:null}),e().loadBlocks(JSON.parse(d),e().blocklyWorkspace)}).catch(u=>{n({llmProcessing:!1}),alert(`Failed to connect to ChatGPT: ${u.message}`)})},clearProgram:()=>n({blocks:{}}),clearProgramExceptStart:()=>n({blocks:kie.pickBy(e().blocks,t=>t.type==="Start")}),loadBlocks:(t,i)=>{var v,b;let s=i.getBlocksByType("Start");s.length>0?e().clearProgramExceptStart():e().clearProgram();let o=s.length>0?s[0]:null,l=[],u=[],d=[t.data[0].id],p=[];for(let E=0;E<t.data.length;E++){let C=t.data[E].type;if(["face","audio"].includes(C)&&(C=t.data[E].value),!["math_number","colour_picker","text"].includes(C)&&!yee.includes(C)){p.push(t.data[E].id);continue}let M=Gg.serialization.blocks.append({type:C},i);M.type==="Start"&&(o=M),C==="math_number"&&M.getField("NUM").setValue(t.data[E].value),C==="colour_picker"&&M.getField("COLOUR").setValue(t.data[E].value),C==="text"&&M.getField("TEXT").setValue(t.data[E].value),["BasicSlider","ArmPositionSlider","SpeedSlider","TimeSlider","HeadPitchSlider","HeadRollSlider","HeadYawSlider"].includes(C)&&M.getField("FIELD_slider_value").setValue(t.data[E].value),l.push(t.data[E].id),u.push(M.id),(v=t.data[E])!=null&&v.nextStatement&&d.push((b=t.data[E])==null?void 0:b.nextStatement)}for(let E=0;E<t.data.length;E++){if(p.includes(t.data[E].id))continue;let C=i.getBlockById(u[l.indexOf(t.data[E].id)]);C&&Object.keys(t.data[E]).forEach(M=>{if(!(M=="id"||M=="value"||M=="type"||M=="nextStatement")){const I=i.getBlockById(u[l.indexOf(t.data[E][M])]);I&&C.getInput(M).connection.connect(I.outputConnection)}})}for(let E=1;E<d.length;E++){if(p.includes(d[E]))continue;let C=i.getBlockById(u[l.indexOf(d[E])]),M=i.getBlockById(u[l.indexOf(d[E-1])]);C&&(M==null||M.nextConnection.connect(C.previousConnection))}let _=i.getBlockById(u[l.indexOf(d[0])]);o.nextConnection.connect(_.previousConnection)},setIsConnected:t=>n({isConnected:t}),loadFromURDF:t=>n({tfs:{...Zre(t)},items:{...eie(t)}}),setIp:t=>n({ip:t}),disconnect:()=>n({ip:"",isConnected:!1,mistyAudioList:[],mistyImageList:[]}),addBlock:(t,i)=>n(s=>({blocks:{...s.blocks,[t]:i}})),removeBlock:t=>n(i=>({blocks:Object.keys(i.blocks).reduce((o,l)=>(t.includes(l)||(o[l]=i.blocks[l]),o),{})})),updateBlock:(t,i)=>n(s=>({blocks:{...s.blocks,[t]:i}})),getBlock:t=>e().blocks[t],getBlocks:()=>e().blocks,getItems:()=>e().items,getEndingItems:()=>e().endingItems,addBlocktoStart:(t,i)=>n(s=>({Start:{...s.Start,[t]:i}})),removeBlockfromStart:t=>n(i=>({Start:Object.keys(i.Start).reduce((o,l)=>(l!==t&&(o[l]=i.Start[l]),o),{})})),getBlocksByType:t=>{const i=e().blocks;return Object.values(i).filter(s=>s.type===t)[0]},getBlockType:t=>{var s;return((s=e().blocks[t])==null?void 0:s.type)||"Unknown block type"},setWorkspaceXml:t=>n({blocklyWorkspaceXML:t}),getWorkspaceXml:()=>e().blocklyWorkspaceXML,onPointerMissed:()=>console.log("Missed Click"),onPointerOver:()=>{},onPointerOut:()=>{},resetSim:()=>{const t=JSON.parse(JSON.stringify(e().startingTfs)),i=JSON.parse(JSON.stringify(e().startingItems));n({tfs:{...t},endingTfs:{...t},items:{...i},endingItems:{...i}})},toggleSimOnly:t=>{n({simOnly:t})},setAnimationFrames:(t,i,s,o)=>{n({tfs:{...t},endingTfs:{...i},items:{...s},endingItems:{...o}})}}));let vU="";const ih=n=>{const t=new Date().toLocaleString();vU=vU.concat(`
`,`[${t}] ${n}`)};function Oie(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[i,s]of n)if(!Object.is(s,e.get(i)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const i of t)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(n[i],e[i]))return!1;return!0}const{useRef:Lie}=Vr;function As(n){const e=Lie();return t=>{const i=n(t);return Oie(e.current,i)?e.current:e.current=i}}const Die={black:"#000",white:"#fff"},Xw=Die,Nie={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},PT=Nie,Bie={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},FT=Bie,Pie={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},zT=Pie,Fie={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},UT=Fie,zie={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},HT=zie,Uie={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Tx=Uie,Hie={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Gie=Hie;function $1(n){let e="https://mui.com/production-error/?code="+n;for(let t=1;t<arguments.length;t+=1)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+n+"; visit "+e+" for the full message."}const Wie=Object.freeze(Object.defineProperty({__proto__:null,default:$1},Symbol.toStringTag,{value:"Module"})),M$="$$material";function Je(){return Je=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Je.apply(this,arguments)}const Vie=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"}));function Er(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function a7(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var jie=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Xie=a7(function(n){return jie.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91});function Yie(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function Kie(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Jie=function(){function n(t){var i=this;this._insertTag=function(s){var o;i.tags.length===0?i.insertionPoint?o=i.insertionPoint.nextSibling:i.prepend?o=i.container.firstChild:o=i.before:o=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(s,o),i.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Kie(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Yie(s);try{o.insertRule(i,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},n}(),Sp="-ms-",nI="-moz-",Vo="-webkit-",l7="comm",WB="rule",VB="decl",qie="@import",u7="@keyframes",Qie="@layer",Zie=Math.abs,YI=String.fromCharCode,ese=Object.assign;function tse(n,e){return Qd(n,0)^45?(((e<<2^Qd(n,0))<<2^Qd(n,1))<<2^Qd(n,2))<<2^Qd(n,3):0}function c7(n){return n.trim()}function nse(n,e){return(n=e.exec(n))?n[0]:n}function jo(n,e,t){return n.replace(e,t)}function uD(n,e){return n.indexOf(e)}function Qd(n,e){return n.charCodeAt(e)|0}function Yw(n,e,t){return n.slice(e,t)}function U0(n){return n.length}function jB(n){return n.length}function BC(n,e){return e.push(n),n}function rse(n,e){return n.map(e).join("")}var KI=1,tE=1,h7=0,Wf=0,Ah=0,ME="";function JI(n,e,t,i,s,o,l){return{value:n,root:e,parent:t,type:i,props:s,children:o,line:KI,column:tE,length:l,return:""}}function Sx(n,e){return ese(JI("",null,null,"",null,null,0),n,{length:-n.length},e)}function ise(){return Ah}function sse(){return Ah=Wf>0?Qd(ME,--Wf):0,tE--,Ah===10&&(tE=1,KI--),Ah}function Mm(){return Ah=Wf<h7?Qd(ME,Wf++):0,tE++,Ah===10&&(tE=1,KI++),Ah}function K0(){return Qd(ME,Wf)}function aA(){return Wf}function A$(n,e){return Yw(ME,n,e)}function Kw(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function d7(n){return KI=tE=1,h7=U0(ME=n),Wf=0,[]}function p7(n){return ME="",n}function lA(n){return c7(A$(Wf-1,cD(n===91?n+2:n===40?n+1:n)))}function ose(n){for(;(Ah=K0())&&Ah<33;)Mm();return Kw(n)>2||Kw(Ah)>3?"":" "}function ase(n,e){for(;--e&&Mm()&&!(Ah<48||Ah>102||Ah>57&&Ah<65||Ah>70&&Ah<97););return A$(n,aA()+(e<6&&K0()==32&&Mm()==32))}function cD(n){for(;Mm();)switch(Ah){case n:return Wf;case 34:case 39:n!==34&&n!==39&&cD(Ah);break;case 40:n===41&&cD(n);break;case 92:Mm();break}return Wf}function lse(n,e){for(;Mm()&&n+Ah!==57;)if(n+Ah===84&&K0()===47)break;return"/*"+A$(e,Wf-1)+"*"+YI(n===47?n:Mm())}function use(n){for(;!Kw(K0());)Mm();return A$(n,Wf)}function cse(n){return p7(uA("",null,null,null,[""],n=d7(n),0,[0],n))}function uA(n,e,t,i,s,o,l,u,d){for(var p=0,_=0,v=l,b=0,E=0,C=0,M=1,I=1,L=1,O=0,P="",B=s,z=o,G=i,j=P;I;)switch(C=O,O=Mm()){case 40:if(C!=108&&Qd(j,v-1)==58){uD(j+=jo(lA(O),"&","&\f"),"&\f")!=-1&&(L=-1);break}case 34:case 39:case 91:j+=lA(O);break;case 9:case 10:case 13:case 32:j+=ose(C);break;case 92:j+=ase(aA()-1,7);continue;case 47:switch(K0()){case 42:case 47:BC(hse(lse(Mm(),aA()),e,t),d);break;default:j+="/"}break;case 123*M:u[p++]=U0(j)*L;case 125*M:case 59:case 0:switch(O){case 0:case 125:I=0;case 59+_:L==-1&&(j=jo(j,/\f/g,"")),E>0&&U0(j)-v&&BC(E>32?TU(j+";",i,t,v-1):TU(jo(j," ","")+";",i,t,v-2),d);break;case 59:j+=";";default:if(BC(G=bU(j,e,t,p,_,s,u,P,B=[],z=[],v),o),O===123)if(_===0)uA(j,e,G,G,B,o,v,u,z);else switch(b===99&&Qd(j,3)===110?100:b){case 100:case 108:case 109:case 115:uA(n,G,G,i&&BC(bU(n,G,G,0,0,s,u,P,s,B=[],v),z),s,z,v,u,i?B:z);break;default:uA(j,G,G,G,[""],z,0,u,z)}}p=_=E=0,M=L=1,P=j="",v=l;break;case 58:v=1+U0(j),E=C;default:if(M<1){if(O==123)--M;else if(O==125&&M++==0&&sse()==125)continue}switch(j+=YI(O),O*M){case 38:L=_>0?1:(j+="\f",-1);break;case 44:u[p++]=(U0(j)-1)*L,L=1;break;case 64:K0()===45&&(j+=lA(Mm())),b=K0(),_=v=U0(P=j+=use(aA())),O++;break;case 45:C===45&&U0(j)==2&&(M=0)}}return o}function bU(n,e,t,i,s,o,l,u,d,p,_){for(var v=s-1,b=s===0?o:[""],E=jB(b),C=0,M=0,I=0;C<i;++C)for(var L=0,O=Yw(n,v+1,v=Zie(M=l[C])),P=n;L<E;++L)(P=c7(M>0?b[L]+" "+O:jo(O,/&\f/g,b[L])))&&(d[I++]=P);return JI(n,e,t,s===0?WB:u,d,p,_)}function hse(n,e,t){return JI(n,e,t,l7,YI(ise()),Yw(n,2,-2),0)}function TU(n,e,t,i){return JI(n,e,t,VB,Yw(n,0,i),Yw(n,i+1,-1),i)}function zS(n,e){for(var t="",i=jB(n),s=0;s<i;s++)t+=e(n[s],s,n,e)||"";return t}function dse(n,e,t,i){switch(n.type){case Qie:if(n.children.length)break;case qie:case VB:return n.return=n.return||n.value;case l7:return"";case u7:return n.return=n.value+"{"+zS(n.children,i)+"}";case WB:n.value=n.props.join(",")}return U0(t=zS(n.children,i))?n.return=n.value+"{"+t+"}":""}function pse(n){var e=jB(n);return function(t,i,s,o){for(var l="",u=0;u<e;u++)l+=n[u](t,i,s,o)||"";return l}}function fse(n){return function(e){e.root||(e=e.return)&&n(e)}}var mse=function(e,t,i){for(var s=0,o=0;s=o,o=K0(),s===38&&o===12&&(t[i]=1),!Kw(o);)Mm();return A$(e,Wf)},gse=function(e,t){var i=-1,s=44;do switch(Kw(s)){case 0:s===38&&K0()===12&&(t[i]=1),e[i]+=mse(Wf-1,t,i);break;case 2:e[i]+=lA(s);break;case 4:if(s===44){e[++i]=K0()===58?"&\f":"",t[i]=e[i].length;break}default:e[i]+=YI(s)}while(s=Mm());return e},_se=function(e,t){return p7(gse(d7(e),t))},SU=new WeakMap,yse=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,i=e.parent,s=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!SU.get(i))&&!s){SU.set(e,!0);for(var o=[],l=_se(t,o),u=i.props,d=0,p=0;d<l.length;d++)for(var _=0;_<u.length;_++,p++)e.props[p]=o[d]?l[d].replace(/&\f/g,u[_]):u[_]+" "+l[d]}}},vse=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function f7(n,e){switch(tse(n,e)){case 5103:return Vo+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Vo+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Vo+n+nI+n+Sp+n+n;case 6828:case 4268:return Vo+n+Sp+n+n;case 6165:return Vo+n+Sp+"flex-"+n+n;case 5187:return Vo+n+jo(n,/(\w+).+(:[^]+)/,Vo+"box-$1$2"+Sp+"flex-$1$2")+n;case 5443:return Vo+n+Sp+"flex-item-"+jo(n,/flex-|-self/,"")+n;case 4675:return Vo+n+Sp+"flex-line-pack"+jo(n,/align-content|flex-|-self/,"")+n;case 5548:return Vo+n+Sp+jo(n,"shrink","negative")+n;case 5292:return Vo+n+Sp+jo(n,"basis","preferred-size")+n;case 6060:return Vo+"box-"+jo(n,"-grow","")+Vo+n+Sp+jo(n,"grow","positive")+n;case 4554:return Vo+jo(n,/([^-])(transform)/g,"$1"+Vo+"$2")+n;case 6187:return jo(jo(jo(n,/(zoom-|grab)/,Vo+"$1"),/(image-set)/,Vo+"$1"),n,"")+n;case 5495:case 3959:return jo(n,/(image-set\([^]*)/,Vo+"$1$`$1");case 4968:return jo(jo(n,/(.+:)(flex-)?(.*)/,Vo+"box-pack:$3"+Sp+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Vo+n+n;case 4095:case 3583:case 4068:case 2532:return jo(n,/(.+)-inline(.+)/,Vo+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(U0(n)-1-e>6)switch(Qd(n,e+1)){case 109:if(Qd(n,e+4)!==45)break;case 102:return jo(n,/(.+:)(.+)-([^]+)/,"$1"+Vo+"$2-$3$1"+nI+(Qd(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~uD(n,"stretch")?f7(jo(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Qd(n,e+1)!==115)break;case 6444:switch(Qd(n,U0(n)-3-(~uD(n,"!important")&&10))){case 107:return jo(n,":",":"+Vo)+n;case 101:return jo(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Vo+(Qd(n,14)===45?"inline-":"")+"box$3$1"+Vo+"$2$3$1"+Sp+"$2box$3")+n}break;case 5936:switch(Qd(n,e+11)){case 114:return Vo+n+Sp+jo(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Vo+n+Sp+jo(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Vo+n+Sp+jo(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Vo+n+Sp+n+n}return n}var bse=function(e,t,i,s){if(e.length>-1&&!e.return)switch(e.type){case VB:e.return=f7(e.value,e.length);break;case u7:return zS([Sx(e,{value:jo(e.value,"@","@"+Vo)})],s);case WB:if(e.length)return rse(e.props,function(o){switch(nse(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return zS([Sx(e,{props:[jo(o,/:(read-\w+)/,":"+nI+"$1")]})],s);case"::placeholder":return zS([Sx(e,{props:[jo(o,/:(plac\w+)/,":"+Vo+"input-$1")]}),Sx(e,{props:[jo(o,/:(plac\w+)/,":"+nI+"$1")]}),Sx(e,{props:[jo(o,/:(plac\w+)/,Sp+"input-$1")]})],s)}return""})}},Tse=[bse],m7=function(e){var t=e.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(M){var I=M.getAttribute("data-emotion");I.indexOf(" ")!==-1&&(document.head.appendChild(M),M.setAttribute("data-s",""))})}var s=e.stylisPlugins||Tse,o={},l,u=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(M){for(var I=M.getAttribute("data-emotion").split(" "),L=1;L<I.length;L++)o[I[L]]=!0;u.push(M)});var d,p=[yse,vse];{var _,v=[dse,fse(function(M){_.insert(M)})],b=pse(p.concat(s,v)),E=function(I){return zS(cse(I),b)};d=function(I,L,O,P){_=O,E(I?I+"{"+L.styles+"}":L.styles),P&&(C.inserted[L.name]=!0)}}var C={key:t,sheet:new Jie({key:t,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:d};return C.sheet.hydrate(u),C},g7={exports:{}},Ma={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Td=typeof Symbol=="function"&&Symbol.for,XB=Td?Symbol.for("react.element"):60103,YB=Td?Symbol.for("react.portal"):60106,qI=Td?Symbol.for("react.fragment"):60107,QI=Td?Symbol.for("react.strict_mode"):60108,ZI=Td?Symbol.for("react.profiler"):60114,eR=Td?Symbol.for("react.provider"):60109,tR=Td?Symbol.for("react.context"):60110,KB=Td?Symbol.for("react.async_mode"):60111,nR=Td?Symbol.for("react.concurrent_mode"):60111,rR=Td?Symbol.for("react.forward_ref"):60112,iR=Td?Symbol.for("react.suspense"):60113,Sse=Td?Symbol.for("react.suspense_list"):60120,sR=Td?Symbol.for("react.memo"):60115,oR=Td?Symbol.for("react.lazy"):60116,Ese=Td?Symbol.for("react.block"):60121,xse=Td?Symbol.for("react.fundamental"):60117,wse=Td?Symbol.for("react.responder"):60118,$se=Td?Symbol.for("react.scope"):60119;function Dm(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case XB:switch(n=n.type,n){case KB:case nR:case qI:case ZI:case QI:case iR:return n;default:switch(n=n&&n.$$typeof,n){case tR:case rR:case oR:case sR:case eR:return n;default:return e}}case YB:return e}}}function _7(n){return Dm(n)===nR}Ma.AsyncMode=KB;Ma.ConcurrentMode=nR;Ma.ContextConsumer=tR;Ma.ContextProvider=eR;Ma.Element=XB;Ma.ForwardRef=rR;Ma.Fragment=qI;Ma.Lazy=oR;Ma.Memo=sR;Ma.Portal=YB;Ma.Profiler=ZI;Ma.StrictMode=QI;Ma.Suspense=iR;Ma.isAsyncMode=function(n){return _7(n)||Dm(n)===KB};Ma.isConcurrentMode=_7;Ma.isContextConsumer=function(n){return Dm(n)===tR};Ma.isContextProvider=function(n){return Dm(n)===eR};Ma.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===XB};Ma.isForwardRef=function(n){return Dm(n)===rR};Ma.isFragment=function(n){return Dm(n)===qI};Ma.isLazy=function(n){return Dm(n)===oR};Ma.isMemo=function(n){return Dm(n)===sR};Ma.isPortal=function(n){return Dm(n)===YB};Ma.isProfiler=function(n){return Dm(n)===ZI};Ma.isStrictMode=function(n){return Dm(n)===QI};Ma.isSuspense=function(n){return Dm(n)===iR};Ma.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===qI||n===nR||n===ZI||n===QI||n===iR||n===Sse||typeof n=="object"&&n!==null&&(n.$$typeof===oR||n.$$typeof===sR||n.$$typeof===eR||n.$$typeof===tR||n.$$typeof===rR||n.$$typeof===xse||n.$$typeof===wse||n.$$typeof===$se||n.$$typeof===Ese)};Ma.typeOf=Dm;g7.exports=Ma;var Cse=g7.exports,y7=Cse,Mse={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ase={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},v7={};v7[y7.ForwardRef]=Mse;v7[y7.Memo]=Ase;var Ise=!0;function Rse(n,e,t){var i="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):i+=s+" "}),i}var b7=function(e,t,i){var s=e.key+"-"+t.name;(i===!1||Ise===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},T7=function(e,t,i){b7(e,t,i);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var o=t;do e.insert(t===o?"."+s:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function kse(n){for(var e=0,t,i=0,s=n.length;s>=4;++i,s-=4)t=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Ose={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Lse=/[A-Z]|^ms/g,Dse=/_EMO_([^_]+?)_([^]*?)_EMO_/g,S7=function(e){return e.charCodeAt(1)===45},EU=function(e){return e!=null&&typeof e!="boolean"},C2=a7(function(n){return S7(n)?n:n.replace(Lse,"-$&").toLowerCase()}),xU=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Dse,function(i,s,o){return H0={name:s,styles:o,next:H0},s})}return Ose[e]!==1&&!S7(e)&&typeof t=="number"&&t!==0?t+"px":t};function Jw(n,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return H0={name:t.name,styles:t.styles,next:H0},t.name;if(t.styles!==void 0){var i=t.next;if(i!==void 0)for(;i!==void 0;)H0={name:i.name,styles:i.styles,next:H0},i=i.next;var s=t.styles+";";return s}return Nse(n,e,t)}case"function":{if(n!==void 0){var o=H0,l=t(n);return H0=o,Jw(n,e,l)}break}}if(e==null)return t;var u=e[t];return u!==void 0?u:t}function Nse(n,e,t){var i="";if(Array.isArray(t))for(var s=0;s<t.length;s++)i+=Jw(n,e,t[s])+";";else for(var o in t){var l=t[o];if(typeof l!="object")e!=null&&e[l]!==void 0?i+=o+"{"+e[l]+"}":EU(l)&&(i+=C2(o)+":"+xU(o,l)+";");else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var u=0;u<l.length;u++)EU(l[u])&&(i+=C2(o)+":"+xU(o,l[u])+";");else{var d=Jw(n,e,l);switch(o){case"animation":case"animationName":{i+=C2(o)+":"+d+";";break}default:i+=o+"{"+d+"}"}}}return i}var wU=/label:\s*([^\s;\n{]+)\s*(;|$)/g,H0,JB=function(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,o="";H0=void 0;var l=e[0];l==null||l.raw===void 0?(s=!1,o+=Jw(i,t,l)):o+=l[0];for(var u=1;u<e.length;u++)o+=Jw(i,t,e[u]),s&&(o+=l[u]);wU.lastIndex=0;for(var d="",p;(p=wU.exec(o))!==null;)d+="-"+p[1];var _=kse(o)+d;return{name:_,styles:o,next:H0}},Bse=function(e){return e()},E7=oL.useInsertionEffect?oL.useInsertionEffect:!1,Pse=E7||Bse,$U=E7||ge.useLayoutEffect,x7=ge.createContext(typeof HTMLElement<"u"?m7({key:"css"}):null),Fse=x7.Provider,w7=function(e){return ge.forwardRef(function(t,i){var s=ge.useContext(x7);return e(t,s,i)})},aR=ge.createContext({}),zse=w7(function(n,e){var t=n.styles,i=JB([t],void 0,ge.useContext(aR)),s=ge.useRef();return $U(function(){var o=e.key+"-global",l=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),u=!1,d=document.querySelector('style[data-emotion="'+o+" "+i.name+'"]');return e.sheet.tags.length&&(l.before=e.sheet.tags[0]),d!==null&&(u=!0,d.setAttribute("data-emotion",o),l.hydrate([d])),s.current=[l,u],function(){l.flush()}},[e]),$U(function(){var o=s.current,l=o[0],u=o[1];if(u){o[1]=!1;return}if(i.next!==void 0&&T7(e,i.next,!0),l.tags.length){var d=l.tags[l.tags.length-1].nextElementSibling;l.before=d,l.flush()}e.insert("",i,l,!1)},[e,i.name]),null});function lR(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return JB(e)}var AE=function(){var e=lR.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Use=Xie,Hse=function(e){return e!=="theme"},CU=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Use:Hse},MU=function(e,t,i){var s;if(t){var o=t.shouldForwardProp;s=e.__emotion_forwardProp&&o?function(l){return e.__emotion_forwardProp(l)&&o(l)}:o}return typeof s!="function"&&i&&(s=e.__emotion_forwardProp),s},Gse=function(e){var t=e.cache,i=e.serialized,s=e.isStringTag;return b7(t,i,s),Pse(function(){return T7(t,i,s)}),null},Wse=function n(e,t){var i=e.__emotion_real===e,s=i&&e.__emotion_base||e,o,l;t!==void 0&&(o=t.label,l=t.target);var u=MU(e,t,i),d=u||CU(s),p=!d("as");return function(){var _=arguments,v=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&v.push("label:"+o+";"),_[0]==null||_[0].raw===void 0)v.push.apply(v,_);else{v.push(_[0][0]);for(var b=_.length,E=1;E<b;E++)v.push(_[E],_[0][E])}var C=w7(function(M,I,L){var O=p&&M.as||s,P="",B=[],z=M;if(M.theme==null){z={};for(var G in M)z[G]=M[G];z.theme=ge.useContext(aR)}typeof M.className=="string"?P=Rse(I.registered,B,M.className):M.className!=null&&(P=M.className+" ");var j=JB(v.concat(B),I.registered,z);P+=I.key+"-"+j.name,l!==void 0&&(P+=" "+l);var H=p&&u===void 0?CU(O):d,Z={};for(var ae in M)p&&ae==="as"||H(ae)&&(Z[ae]=M[ae]);return Z.className=P,Z.ref=L,ge.createElement(ge.Fragment,null,ge.createElement(Gse,{cache:I,serialized:j,isStringTag:typeof O=="string"}),ge.createElement(O,Z))});return C.displayName=o!==void 0?o:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",C.defaultProps=e.defaultProps,C.__emotion_real=C,C.__emotion_base=s,C.__emotion_styles=v,C.__emotion_forwardProp=u,Object.defineProperty(C,"toString",{value:function(){return"."+l}}),C.withComponent=function(M,I){return n(M,Je({},t,I,{shouldForwardProp:MU(C,I,!0)})).apply(void 0,v)},C}},Vse=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],hD=Wse.bind();Vse.forEach(function(n){hD[n]=hD(n)});var $7={exports:{}},jse="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Xse=jse,Yse=Xse;function C7(){}function M7(){}M7.resetWarningCache=C7;var Kse=function(){function n(i,s,o,l,u,d){if(d!==Yse){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:M7,resetWarningCache:C7};return t.PropTypes=t,t};$7.exports=Kse();var Jse=$7.exports;const ts=O1(Jse);let dD;typeof document=="object"&&(dD=m7({key:"css",prepend:!0}));function qse(n){const{injectFirst:e,children:t}=n;return e&&dD?Pe.jsx(Fse,{value:dD,children:t}):t}function Qse(n){return n==null||Object.keys(n).length===0}function A7(n){const{styles:e,defaultTheme:t={}}=n,i=typeof e=="function"?s=>e(Qse(s)?t:s):e;return Pe.jsx(zse,{styles:i})}function qB(n,e){return hD(n,e)}const I7=(n,e)=>{Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))},Zse=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:A7,StyledEngineProvider:qse,ThemeContext:aR,css:lR,default:qB,internal_processStyles:I7,keyframes:AE},Symbol.toStringTag,{value:"Module"}));function j_(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function R7(n){if(!j_(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=R7(n[t])}),e}function af(n,e,t={clone:!0}){const i=t.clone?Je({},n):n;return j_(n)&&j_(e)&&Object.keys(e).forEach(s=>{s!=="__proto__"&&(j_(e[s])&&s in n&&j_(n[s])?i[s]=af(n[s],e[s],t):t.clone?i[s]=j_(e[s])?R7(e[s]):e[s]:i[s]=e[s])}),i}const eoe=Object.freeze(Object.defineProperty({__proto__:null,default:af,isPlainObject:j_},Symbol.toStringTag,{value:"Module"})),toe=["values","unit","step"],noe=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,i)=>t.val-i.val),e.reduce((t,i)=>Je({},t,{[i.key]:i.val}),{})};function k7(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:i=5}=n,s=Er(n,toe),o=noe(e),l=Object.keys(o);function u(b){return`@media (min-width:${typeof e[b]=="number"?e[b]:b}${t})`}function d(b){return`@media (max-width:${(typeof e[b]=="number"?e[b]:b)-i/100}${t})`}function p(b,E){const C=l.indexOf(E);return`@media (min-width:${typeof e[b]=="number"?e[b]:b}${t}) and (max-width:${(C!==-1&&typeof e[l[C]]=="number"?e[l[C]]:E)-i/100}${t})`}function _(b){return l.indexOf(b)+1<l.length?p(b,l[l.indexOf(b)+1]):u(b)}function v(b){const E=l.indexOf(b);return E===0?u(l[1]):E===l.length-1?d(l[E]):p(b,l[l.indexOf(b)+1]).replace("@media","@media not all and")}return Je({keys:l,values:o,up:u,down:d,between:p,only:_,not:v,unit:t},s)}const roe={borderRadius:4},ioe=roe;function mw(n,e){return e?af(n,e,{clone:!1}):n}const QB={xs:0,sm:600,md:900,lg:1200,xl:1536},AU={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${QB[n]}px)`};function Vf(n,e,t){const i=n.theme||{};if(Array.isArray(e)){const o=i.breakpoints||AU;return e.reduce((l,u,d)=>(l[o.up(o.keys[d])]=t(e[d]),l),{})}if(typeof e=="object"){const o=i.breakpoints||AU;return Object.keys(e).reduce((l,u)=>{if(Object.keys(o.values||QB).indexOf(u)!==-1){const d=o.up(u);l[d]=t(e[u],u)}else{const d=u;l[d]=e[d]}return l},{})}return t(e)}function O7(n={}){var e;return((e=n.keys)==null?void 0:e.reduce((i,s)=>{const o=n.up(s);return i[o]={},i},{}))||{}}function L7(n,e){return n.reduce((t,i)=>{const s=t[i];return(!s||Object.keys(s).length===0)&&delete t[i],t},e)}function soe(n,...e){const t=O7(n),i=[t,...e].reduce((s,o)=>af(s,o),{});return L7(Object.keys(t),i)}function ooe(n,e){if(typeof n!="object")return{};const t={},i=Object.keys(e);return Array.isArray(n)?i.forEach((s,o)=>{o<n.length&&(t[s]=!0)}):i.forEach(s=>{n[s]!=null&&(t[s]=!0)}),t}function h1({values:n,breakpoints:e,base:t}){const i=t||ooe(n,e),s=Object.keys(i);if(s.length===0)return n;let o;return s.reduce((l,u,d)=>(Array.isArray(n)?(l[u]=n[d]!=null?n[d]:n[o],o=d):typeof n=="object"?(l[u]=n[u]!=null?n[u]:n[o],o=u):l[u]=n,l),{})}function lr(n){if(typeof n!="string")throw new Error($1(7));return n.charAt(0).toUpperCase()+n.slice(1)}const aoe=Object.freeze(Object.defineProperty({__proto__:null,default:lr},Symbol.toStringTag,{value:"Module"}));function uR(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const i=`vars.${e}`.split(".").reduce((s,o)=>s&&s[o]?s[o]:null,n);if(i!=null)return i}return e.split(".").reduce((i,s)=>i&&i[s]!=null?i[s]:null,n)}function rI(n,e,t,i=t){let s;return typeof n=="function"?s=n(t):Array.isArray(n)?s=n[t]||i:s=uR(n,t)||i,e&&(s=e(s,i,n)),s}function lh(n){const{prop:e,cssProperty:t=n.prop,themeKey:i,transform:s}=n,o=l=>{if(l[e]==null)return null;const u=l[e],d=l.theme,p=uR(d,i)||{};return Vf(l,u,v=>{let b=rI(p,s,v);return v===b&&typeof v=="string"&&(b=rI(p,s,`${e}${v==="default"?"":lr(v)}`,v)),t===!1?b:{[t]:b}})};return o.propTypes={},o.filterProps=[e],o}function loe(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const uoe={m:"margin",p:"padding"},coe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},IU={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},hoe=loe(n=>{if(n.length>2)if(IU[n])n=IU[n];else return[n];const[e,t]=n.split(""),i=uoe[e],s=coe[t]||"";return Array.isArray(s)?s.map(o=>i+o):[i+s]}),ZB=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],eP=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...ZB,...eP];function I$(n,e,t,i){var s;const o=(s=uR(n,e,!1))!=null?s:t;return typeof o=="number"?l=>typeof l=="string"?l:o*l:Array.isArray(o)?l=>typeof l=="string"?l:o[l]:typeof o=="function"?o:()=>{}}function tP(n){return I$(n,"spacing",8)}function C1(n,e){if(typeof e=="string"||e==null)return e;const t=Math.abs(e),i=n(t);return e>=0?i:typeof i=="number"?-i:`-${i}`}function doe(n,e){return t=>n.reduce((i,s)=>(i[s]=C1(e,t),i),{})}function poe(n,e,t,i){if(e.indexOf(t)===-1)return null;const s=hoe(t),o=doe(s,i),l=n[t];return Vf(n,l,o)}function D7(n,e){const t=tP(n.theme);return Object.keys(n).map(i=>poe(n,e,i,t)).reduce(mw,{})}function Cc(n){return D7(n,ZB)}Cc.propTypes={};Cc.filterProps=ZB;function Mc(n){return D7(n,eP)}Mc.propTypes={};Mc.filterProps=eP;function foe(n=8){if(n.mui)return n;const e=tP({spacing:n}),t=(...i)=>(i.length===0?[1]:i).map(o=>{const l=e(o);return typeof l=="number"?`${l}px`:l}).join(" ");return t.mui=!0,t}function cR(...n){const e=n.reduce((i,s)=>(s.filterProps.forEach(o=>{i[o]=s}),i),{}),t=i=>Object.keys(i).reduce((s,o)=>e[o]?mw(s,e[o](i)):s,{});return t.propTypes={},t.filterProps=n.reduce((i,s)=>i.concat(s.filterProps),[]),t}function ug(n){return typeof n!="number"?n:`${n}px solid`}function gg(n,e){return lh({prop:n,themeKey:"borders",transform:e})}const moe=gg("border",ug),goe=gg("borderTop",ug),_oe=gg("borderRight",ug),yoe=gg("borderBottom",ug),voe=gg("borderLeft",ug),boe=gg("borderColor"),Toe=gg("borderTopColor"),Soe=gg("borderRightColor"),Eoe=gg("borderBottomColor"),xoe=gg("borderLeftColor"),woe=gg("outline",ug),$oe=gg("outlineColor"),hR=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=I$(n.theme,"shape.borderRadius",4),t=i=>({borderRadius:C1(e,i)});return Vf(n,n.borderRadius,t)}return null};hR.propTypes={};hR.filterProps=["borderRadius"];cR(moe,goe,_oe,yoe,voe,boe,Toe,Soe,Eoe,xoe,hR,woe,$oe);const dR=n=>{if(n.gap!==void 0&&n.gap!==null){const e=I$(n.theme,"spacing",8),t=i=>({gap:C1(e,i)});return Vf(n,n.gap,t)}return null};dR.propTypes={};dR.filterProps=["gap"];const pR=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=I$(n.theme,"spacing",8),t=i=>({columnGap:C1(e,i)});return Vf(n,n.columnGap,t)}return null};pR.propTypes={};pR.filterProps=["columnGap"];const fR=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=I$(n.theme,"spacing",8),t=i=>({rowGap:C1(e,i)});return Vf(n,n.rowGap,t)}return null};fR.propTypes={};fR.filterProps=["rowGap"];const Coe=lh({prop:"gridColumn"}),Moe=lh({prop:"gridRow"}),Aoe=lh({prop:"gridAutoFlow"}),Ioe=lh({prop:"gridAutoColumns"}),Roe=lh({prop:"gridAutoRows"}),koe=lh({prop:"gridTemplateColumns"}),Ooe=lh({prop:"gridTemplateRows"}),Loe=lh({prop:"gridTemplateAreas"}),Doe=lh({prop:"gridArea"});cR(dR,pR,fR,Coe,Moe,Aoe,Ioe,Roe,koe,Ooe,Loe,Doe);function US(n,e){return e==="grey"?e:n}const Noe=lh({prop:"color",themeKey:"palette",transform:US}),Boe=lh({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:US}),Poe=lh({prop:"backgroundColor",themeKey:"palette",transform:US});cR(Noe,Boe,Poe);function Tm(n){return n<=1&&n!==0?`${n*100}%`:n}const Foe=lh({prop:"width",transform:Tm}),nP=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var i,s;const o=((i=n.theme)==null||(i=i.breakpoints)==null||(i=i.values)==null?void 0:i[t])||QB[t];return o?((s=n.theme)==null||(s=s.breakpoints)==null?void 0:s.unit)!=="px"?{maxWidth:`${o}${n.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:Tm(t)}};return Vf(n,n.maxWidth,e)}return null};nP.filterProps=["maxWidth"];const zoe=lh({prop:"minWidth",transform:Tm}),Uoe=lh({prop:"height",transform:Tm}),Hoe=lh({prop:"maxHeight",transform:Tm}),Goe=lh({prop:"minHeight",transform:Tm});lh({prop:"size",cssProperty:"width",transform:Tm});lh({prop:"size",cssProperty:"height",transform:Tm});const Woe=lh({prop:"boxSizing"});cR(Foe,nP,zoe,Uoe,Hoe,Goe,Woe);const Voe={border:{themeKey:"borders",transform:ug},borderTop:{themeKey:"borders",transform:ug},borderRight:{themeKey:"borders",transform:ug},borderBottom:{themeKey:"borders",transform:ug},borderLeft:{themeKey:"borders",transform:ug},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ug},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:hR},color:{themeKey:"palette",transform:US},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:US},backgroundColor:{themeKey:"palette",transform:US},p:{style:Mc},pt:{style:Mc},pr:{style:Mc},pb:{style:Mc},pl:{style:Mc},px:{style:Mc},py:{style:Mc},padding:{style:Mc},paddingTop:{style:Mc},paddingRight:{style:Mc},paddingBottom:{style:Mc},paddingLeft:{style:Mc},paddingX:{style:Mc},paddingY:{style:Mc},paddingInline:{style:Mc},paddingInlineStart:{style:Mc},paddingInlineEnd:{style:Mc},paddingBlock:{style:Mc},paddingBlockStart:{style:Mc},paddingBlockEnd:{style:Mc},m:{style:Cc},mt:{style:Cc},mr:{style:Cc},mb:{style:Cc},ml:{style:Cc},mx:{style:Cc},my:{style:Cc},margin:{style:Cc},marginTop:{style:Cc},marginRight:{style:Cc},marginBottom:{style:Cc},marginLeft:{style:Cc},marginX:{style:Cc},marginY:{style:Cc},marginInline:{style:Cc},marginInlineStart:{style:Cc},marginInlineEnd:{style:Cc},marginBlock:{style:Cc},marginBlockStart:{style:Cc},marginBlockEnd:{style:Cc},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:dR},rowGap:{style:fR},columnGap:{style:pR},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Tm},maxWidth:{style:nP},minWidth:{transform:Tm},height:{transform:Tm},maxHeight:{transform:Tm},minHeight:{transform:Tm},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},R$=Voe;function joe(...n){const e=n.reduce((i,s)=>i.concat(Object.keys(s)),[]),t=new Set(e);return n.every(i=>t.size===Object.keys(i).length)}function Xoe(n,e){return typeof n=="function"?n(e):n}function N7(){function n(t,i,s,o){const l={[t]:i,theme:s},u=o[t];if(!u)return{[t]:i};const{cssProperty:d=t,themeKey:p,transform:_,style:v}=u;if(i==null)return null;if(p==="typography"&&i==="inherit")return{[t]:i};const b=uR(s,p)||{};return v?v(l):Vf(l,i,C=>{let M=rI(b,_,C);return C===M&&typeof C=="string"&&(M=rI(b,_,`${t}${C==="default"?"":lr(C)}`,C)),d===!1?M:{[d]:M}})}function e(t){var i;const{sx:s,theme:o={}}=t||{};if(!s)return null;const l=(i=o.unstable_sxConfig)!=null?i:R$;function u(d){let p=d;if(typeof d=="function")p=d(o);else if(typeof d!="object")return d;if(!p)return null;const _=O7(o.breakpoints),v=Object.keys(_);let b=_;return Object.keys(p).forEach(E=>{const C=Xoe(p[E],o);if(C!=null)if(typeof C=="object")if(l[E])b=mw(b,n(E,C,o,l));else{const M=Vf({theme:o},C,I=>({[E]:I}));joe(M,C)?b[E]=e({sx:C,theme:o}):b=mw(b,M)}else b=mw(b,n(E,C,o,l))}),L7(v,b)}return Array.isArray(s)?s.map(u):u(s)}return e}const B7=N7();B7.filterProps=["sx"];const k$=B7;function P7(n,e){const t=this;return t.vars&&typeof t.getColorSchemeSelector=="function"?{[t.getColorSchemeSelector(n).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:t.palette.mode===n?e:{}}const Yoe=["breakpoints","palette","spacing","shape"];function IE(n={},...e){const{breakpoints:t={},palette:i={},spacing:s,shape:o={}}=n,l=Er(n,Yoe),u=k7(t),d=foe(s);let p=af({breakpoints:u,direction:"ltr",components:{},palette:Je({mode:"light"},i),spacing:d,shape:Je({},ioe,o)},l);return p.applyStyles=P7,p=e.reduce((_,v)=>af(_,v),p),p.unstable_sxConfig=Je({},R$,l==null?void 0:l.unstable_sxConfig),p.unstable_sx=function(v){return k$({sx:v,theme:this})},p}const Koe=Object.freeze(Object.defineProperty({__proto__:null,default:IE,private_createBreakpoints:k7,unstable_applyStyles:P7},Symbol.toStringTag,{value:"Module"}));function Joe(n){return Object.keys(n).length===0}function qoe(n=null){const e=ge.useContext(aR);return!e||Joe(e)?n:e}const Qoe=IE();function mR(n=Qoe){return qoe(n)}function Zoe({styles:n,themeId:e,defaultTheme:t={}}){const i=mR(t),s=typeof n=="function"?n(e&&i[e]||i):n;return Pe.jsx(A7,{styles:s})}const eae=["sx"],tae=n=>{var e,t;const i={systemProps:{},otherProps:{}},s=(e=n==null||(t=n.theme)==null?void 0:t.unstable_sxConfig)!=null?e:R$;return Object.keys(n).forEach(o=>{s[o]?i.systemProps[o]=n[o]:i.otherProps[o]=n[o]}),i};function O$(n){const{sx:e}=n,t=Er(n,eae),{systemProps:i,otherProps:s}=tae(t);let o;return Array.isArray(e)?o=[i,...e]:typeof e=="function"?o=(...l)=>{const u=e(...l);return j_(u)?Je({},i,u):i}:o=Je({},i,e),Je({},s,{sx:o})}const nae=Object.freeze(Object.defineProperty({__proto__:null,default:k$,extendSxProp:O$,unstable_createStyleFunctionSx:N7,unstable_defaultSxConfig:R$},Symbol.toStringTag,{value:"Module"})),RU=n=>n,rae=()=>{let n=RU;return{configure(e){n=e},generate(e){return n(e)},reset(){n=RU}}},iae=rae(),rP=iae;function F7(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=F7(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function ri(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=F7(n))&&(i&&(i+=" "),i+=e);return i}const sae=["className","component"];function oae(n={}){const{themeId:e,defaultTheme:t,defaultClassName:i="MuiBox-root",generateClassName:s}=n,o=qB("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(k$);return ge.forwardRef(function(d,p){const _=mR(t),v=O$(d),{className:b,component:E="div"}=v,C=Er(v,sae);return Pe.jsx(o,Je({as:E,ref:p,className:ri(b,s?s(i):i),theme:e&&_[e]||_},C))})}const aae={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function So(n,e,t="Mui"){const i=aae[e];return i?`${t}-${i}`:`${rP.generate(n)}-${e}`}function No(n,e,t="Mui"){const i={};return e.forEach(s=>{i[s]=So(n,s,t)}),i}var z7={exports:{}},Aa={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iP=Symbol.for("react.element"),sP=Symbol.for("react.portal"),gR=Symbol.for("react.fragment"),_R=Symbol.for("react.strict_mode"),yR=Symbol.for("react.profiler"),vR=Symbol.for("react.provider"),bR=Symbol.for("react.context"),lae=Symbol.for("react.server_context"),TR=Symbol.for("react.forward_ref"),SR=Symbol.for("react.suspense"),ER=Symbol.for("react.suspense_list"),xR=Symbol.for("react.memo"),wR=Symbol.for("react.lazy"),uae=Symbol.for("react.offscreen"),U7;U7=Symbol.for("react.module.reference");function _g(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case iP:switch(n=n.type,n){case gR:case yR:case _R:case SR:case ER:return n;default:switch(n=n&&n.$$typeof,n){case lae:case bR:case TR:case wR:case xR:case vR:return n;default:return e}}case sP:return e}}}Aa.ContextConsumer=bR;Aa.ContextProvider=vR;Aa.Element=iP;Aa.ForwardRef=TR;Aa.Fragment=gR;Aa.Lazy=wR;Aa.Memo=xR;Aa.Portal=sP;Aa.Profiler=yR;Aa.StrictMode=_R;Aa.Suspense=SR;Aa.SuspenseList=ER;Aa.isAsyncMode=function(){return!1};Aa.isConcurrentMode=function(){return!1};Aa.isContextConsumer=function(n){return _g(n)===bR};Aa.isContextProvider=function(n){return _g(n)===vR};Aa.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===iP};Aa.isForwardRef=function(n){return _g(n)===TR};Aa.isFragment=function(n){return _g(n)===gR};Aa.isLazy=function(n){return _g(n)===wR};Aa.isMemo=function(n){return _g(n)===xR};Aa.isPortal=function(n){return _g(n)===sP};Aa.isProfiler=function(n){return _g(n)===yR};Aa.isStrictMode=function(n){return _g(n)===_R};Aa.isSuspense=function(n){return _g(n)===SR};Aa.isSuspenseList=function(n){return _g(n)===ER};Aa.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===gR||n===yR||n===_R||n===SR||n===ER||n===uae||typeof n=="object"&&n!==null&&(n.$$typeof===wR||n.$$typeof===xR||n.$$typeof===vR||n.$$typeof===bR||n.$$typeof===TR||n.$$typeof===U7||n.getModuleId!==void 0)};Aa.typeOf=_g;z7.exports=Aa;var kU=z7.exports;const cae=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function H7(n){const e=`${n}`.match(cae);return e&&e[1]||""}function G7(n,e=""){return n.displayName||n.name||H7(n)||e}function OU(n,e,t){const i=G7(e);return n.displayName||(i!==""?`${t}(${i})`:t)}function hae(n){if(n!=null){if(typeof n=="string")return n;if(typeof n=="function")return G7(n,"Component");if(typeof n=="object")switch(n.$$typeof){case kU.ForwardRef:return OU(n,n.render,"ForwardRef");case kU.Memo:return OU(n,n.type,"memo");default:return}}}const dae=Object.freeze(Object.defineProperty({__proto__:null,default:hae,getFunctionName:H7},Symbol.toStringTag,{value:"Module"})),pae=["ownerState"],fae=["variants"],mae=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function gae(n){return Object.keys(n).length===0}function _ae(n){return typeof n=="string"&&n.charCodeAt(0)>96}function M2(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const yae=IE(),vae=n=>n&&n.charAt(0).toLowerCase()+n.slice(1);function PC({defaultTheme:n,theme:e,themeId:t}){return gae(e)?n:e[t]||e}function bae(n){return n?(e,t)=>t[n]:null}function cA(n,e){let{ownerState:t}=e,i=Er(e,pae);const s=typeof n=="function"?n(Je({ownerState:t},i)):n;if(Array.isArray(s))return s.flatMap(o=>cA(o,Je({ownerState:t},i)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=Er(s,fae);return o.forEach(d=>{let p=!0;typeof d.props=="function"?p=d.props(Je({ownerState:t},i,t)):Object.keys(d.props).forEach(_=>{(t==null?void 0:t[_])!==d.props[_]&&i[_]!==d.props[_]&&(p=!1)}),p&&(Array.isArray(u)||(u=[u]),u.push(typeof d.style=="function"?d.style(Je({ownerState:t},i,t)):d.style))}),u}return s}function Tae(n={}){const{themeId:e,defaultTheme:t=yae,rootShouldForwardProp:i=M2,slotShouldForwardProp:s=M2}=n,o=l=>k$(Je({},l,{theme:PC(Je({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{I7(l,z=>z.filter(G=>!(G!=null&&G.__mui_systemSx)));const{name:d,slot:p,skipVariantsResolver:_,skipSx:v,overridesResolver:b=bae(vae(p))}=u,E=Er(u,mae),C=_!==void 0?_:p&&p!=="Root"&&p!=="root"||!1,M=v||!1;let I,L=M2;p==="Root"||p==="root"?L=i:p?L=s:_ae(l)&&(L=void 0);const O=qB(l,Je({shouldForwardProp:L,label:I},E)),P=z=>typeof z=="function"&&z.__emotion_real!==z||j_(z)?G=>cA(z,Je({},G,{theme:PC({theme:G.theme,defaultTheme:t,themeId:e})})):z,B=(z,...G)=>{let j=P(z);const H=G?G.map(P):[];d&&b&&H.push(J=>{const te=PC(Je({},J,{defaultTheme:t,themeId:e}));if(!te.components||!te.components[d]||!te.components[d].styleOverrides)return null;const he=te.components[d].styleOverrides,le={};return Object.entries(he).forEach(([ce,be])=>{le[ce]=cA(be,Je({},J,{theme:te}))}),b(J,le)}),d&&!C&&H.push(J=>{var te;const he=PC(Je({},J,{defaultTheme:t,themeId:e})),le=he==null||(te=he.components)==null||(te=te[d])==null?void 0:te.variants;return cA({variants:le},Je({},J,{theme:he}))}),M||H.push(o);const Z=H.length-G.length;if(Array.isArray(z)&&Z>0){const J=new Array(Z).fill("");j=[...z,...J],j.raw=[...z.raw,...J]}const ae=O(j,...H);return l.muiName&&(ae.muiName=l.muiName),ae};return O.withConfig&&(B.withConfig=O.withConfig),B}}const W7=Tae();function oP(n,e){const t=Je({},e);return Object.keys(n).forEach(i=>{if(i.toString().match(/^(components|slots)$/))t[i]=Je({},n[i],t[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const s=n[i]||{},o=e[i];t[i]={},!o||!Object.keys(o)?t[i]=s:!s||!Object.keys(s)?t[i]=o:(t[i]=Je({},o),Object.keys(s).forEach(l=>{t[i][l]=oP(s[l],o[l])}))}else t[i]===void 0&&(t[i]=n[i])}),t}function Sae(n){const{theme:e,name:t,props:i}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?i:oP(e.components[t].defaultProps,i)}function aP({props:n,name:e,defaultTheme:t,themeId:i}){let s=mR(t);return i&&(s=s[i]||s),Sae({theme:s,name:e,props:n})}const Eae=typeof window<"u"?ge.useLayoutEffect:ge.useEffect,Ev=Eae;function xae(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}const wae=Object.freeze(Object.defineProperty({__proto__:null,default:xae},Symbol.toStringTag,{value:"Module"}));function pD(...n){return n.reduce((e,t)=>t==null?e:function(...s){e.apply(this,s),t.apply(this,s)},()=>{})}function lP(n,e=166){let t;function i(...s){const o=()=>{n.apply(this,s)};clearTimeout(t),t=setTimeout(o,e)}return i.clear=()=>{clearTimeout(t)},i}function $ae(n,e){return()=>null}function hA(n,e){var t,i;return ge.isValidElement(n)&&e.indexOf((t=n.type.muiName)!=null?t:(i=n.type)==null||(i=i._payload)==null||(i=i.value)==null?void 0:i.muiName)!==-1}function Gf(n){return n&&n.ownerDocument||document}function xv(n){return Gf(n).defaultView||window}function Cae(n,e){return()=>null}function iI(n,e){typeof n=="function"?n(e):n&&(n.current=e)}let LU=0;function Mae(n){const[e,t]=ge.useState(n),i=n||e;return ge.useEffect(()=>{e==null&&(LU+=1,t(`mui-${LU}`))},[e]),i}const DU=oL.useId;function $R(n){if(DU!==void 0){const e=DU();return n??e}return Mae(n)}function Aae(n,e,t,i,s){return null}function sI({controlled:n,default:e,name:t,state:i="value"}){const{current:s}=ge.useRef(n!==void 0),[o,l]=ge.useState(e),u=s?n:o,d=ge.useCallback(p=>{s||l(p)},[]);return[u,d]}function Zb(n){const e=ge.useRef(n);return Ev(()=>{e.current=n}),ge.useRef((...t)=>(0,e.current)(...t)).current}function cf(...n){return ge.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{iI(t,e)})},n)}const NU={};function Iae(n,e){const t=ge.useRef(NU);return t.current===NU&&(t.current=n(e)),t}const Rae=[];function kae(n){ge.useEffect(n,Rae)}class CR{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new CR}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function V7(){const n=Iae(CR.create).current;return kae(n.disposeEffect),n}let MR=!0,fD=!1;const Oae=new CR,Lae={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Dae(n){const{type:e,tagName:t}=n;return!!(t==="INPUT"&&Lae[e]&&!n.readOnly||t==="TEXTAREA"&&!n.readOnly||n.isContentEditable)}function Nae(n){n.metaKey||n.altKey||n.ctrlKey||(MR=!0)}function A2(){MR=!1}function Bae(){this.visibilityState==="hidden"&&fD&&(MR=!0)}function Pae(n){n.addEventListener("keydown",Nae,!0),n.addEventListener("mousedown",A2,!0),n.addEventListener("pointerdown",A2,!0),n.addEventListener("touchstart",A2,!0),n.addEventListener("visibilitychange",Bae,!0)}function Fae(n){const{target:e}=n;try{return e.matches(":focus-visible")}catch{}return MR||Dae(e)}function j7(){const n=ge.useCallback(s=>{s!=null&&Pae(s.ownerDocument)},[]),e=ge.useRef(!1);function t(){return e.current?(fD=!0,Oae.start(100,()=>{fD=!1}),e.current=!1,!0):!1}function i(s){return Fae(s)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:i,onBlur:t,ref:n}}function X7(n){const e=n.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function Bo(n,e,t=void 0){const i={};return Object.keys(n).forEach(s=>{i[s]=n[s].reduce((o,l)=>{if(l){const u=e(l);u!==""&&o.push(u),t&&t[l]&&o.push(t[l])}return o},[]).join(" ")}),i}const zae=ge.createContext(),Uae=()=>{const n=ge.useContext(zae);return n??!1};function qw(n){"@babel/helpers - typeof";return qw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qw(n)}function Hae(n,e){if(qw(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(qw(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Gae(n){var e=Hae(n,"string");return qw(e)=="symbol"?e:e+""}const Wae=["className","component","disableGutters","fixed","maxWidth","classes"],Vae=IE(),jae=W7("div",{name:"MuiContainer",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`maxWidth${lr(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),Xae=n=>aP({props:n,name:"MuiContainer",defaultTheme:Vae}),Yae=(n,e)=>{const t=d=>So(e,d),{classes:i,fixed:s,disableGutters:o,maxWidth:l}=n,u={root:["root",l&&`maxWidth${lr(String(l))}`,s&&"fixed",o&&"disableGutters"]};return Bo(u,t,i)};function Kae(n={}){const{createStyledComponent:e=jae,useThemeProps:t=Xae,componentName:i="MuiContainer"}=n,s=e(({theme:l,ownerState:u})=>Je({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!u.disableGutters&&{paddingLeft:l.spacing(2),paddingRight:l.spacing(2),[l.breakpoints.up("sm")]:{paddingLeft:l.spacing(3),paddingRight:l.spacing(3)}}),({theme:l,ownerState:u})=>u.fixed&&Object.keys(l.breakpoints.values).reduce((d,p)=>{const _=p,v=l.breakpoints.values[_];return v!==0&&(d[l.breakpoints.up(_)]={maxWidth:`${v}${l.breakpoints.unit}`}),d},{}),({theme:l,ownerState:u})=>Je({},u.maxWidth==="xs"&&{[l.breakpoints.up("xs")]:{maxWidth:Math.max(l.breakpoints.values.xs,444)}},u.maxWidth&&u.maxWidth!=="xs"&&{[l.breakpoints.up(u.maxWidth)]:{maxWidth:`${l.breakpoints.values[u.maxWidth]}${l.breakpoints.unit}`}}));return ge.forwardRef(function(u,d){const p=t(u),{className:_,component:v="div",disableGutters:b=!1,fixed:E=!1,maxWidth:C="lg"}=p,M=Er(p,Wae),I=Je({},p,{component:v,disableGutters:b,fixed:E,maxWidth:C}),L=Yae(I,i);return Pe.jsx(s,Je({as:v,ownerState:I,className:ri(L.root,_),ref:d},M))})}const Jae=["component","direction","spacing","divider","children","className","useFlexGap"],qae=IE(),Qae=W7("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root});function Zae(n){return aP({props:n,name:"MuiStack",defaultTheme:qae})}function ele(n,e){const t=ge.Children.toArray(n).filter(Boolean);return t.reduce((i,s,o)=>(i.push(s),o<t.length-1&&i.push(ge.cloneElement(e,{key:`separator-${o}`})),i),[])}const tle=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],nle=({ownerState:n,theme:e})=>{let t=Je({display:"flex",flexDirection:"column"},Vf({theme:e},h1({values:n.direction,breakpoints:e.breakpoints.values}),i=>({flexDirection:i})));if(n.spacing){const i=tP(e),s=Object.keys(e.breakpoints.values).reduce((d,p)=>((typeof n.spacing=="object"&&n.spacing[p]!=null||typeof n.direction=="object"&&n.direction[p]!=null)&&(d[p]=!0),d),{}),o=h1({values:n.direction,base:s}),l=h1({values:n.spacing,base:s});typeof o=="object"&&Object.keys(o).forEach((d,p,_)=>{if(!o[d]){const b=p>0?o[_[p-1]]:"column";o[d]=b}}),t=af(t,Vf({theme:e},l,(d,p)=>n.useFlexGap?{gap:C1(i,d)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${tle(p?o[p]:n.direction)}`]:C1(i,d)}}))}return t=soe(e.breakpoints,t),t};function rle(n={}){const{createStyledComponent:e=Qae,useThemeProps:t=Zae,componentName:i="MuiStack"}=n,s=()=>Bo({root:["root"]},d=>So(i,d),{}),o=e(nle);return ge.forwardRef(function(d,p){const _=t(d),v=O$(_),{component:b="div",direction:E="column",spacing:C=0,divider:M,children:I,className:L,useFlexGap:O=!1}=v,P=Er(v,Jae),B={direction:E,spacing:C,useFlexGap:O},z=s();return Pe.jsx(o,Je({as:b,ownerState:B,ref:p,className:ri(z.root,L)},P,{children:M?ele(I,M):I}))})}function ile(n,e){return Je({toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}}},e)}var uh={},Y7={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Y7);var RE=Y7.exports;const sle=n_(Wie),ole=n_(wae);var K7=RE;Object.defineProperty(uh,"__esModule",{value:!0});var Xg=uh.alpha=tj;uh.blend=_le;uh.colorChannel=void 0;var J7=uh.darken=cP;uh.decomposeColor=fg;uh.emphasize=nj;var ale=uh.getContrastRatio=dle;uh.getLuminance=oI;uh.hexToRgb=Q7;uh.hslToRgb=ej;var q7=uh.lighten=hP;uh.private_safeAlpha=ple;uh.private_safeColorChannel=void 0;uh.private_safeDarken=fle;uh.private_safeEmphasize=gle;uh.private_safeLighten=mle;uh.recomposeColor=kE;uh.rgbToHex=hle;var BU=K7(sle),lle=K7(ole);function uP(n,e=0,t=1){return(0,lle.default)(n,e,t)}function Q7(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(i=>i+i)),t?`rgb${t.length===4?"a":""}(${t.map((i,s)=>s<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function ule(n){const e=n.toString(16);return e.length===1?`0${e}`:e}function fg(n){if(n.type)return n;if(n.charAt(0)==="#")return fg(Q7(n));const e=n.indexOf("("),t=n.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(t)===-1)throw new Error((0,BU.default)(9,n));let i=n.substring(e+1,n.length-1),s;if(t==="color"){if(i=i.split(" "),s=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error((0,BU.default)(10,s))}else i=i.split(",");return i=i.map(o=>parseFloat(o)),{type:t,values:i,colorSpace:s}}const Z7=n=>{const e=fg(n);return e.values.slice(0,3).map((t,i)=>e.type.indexOf("hsl")!==-1&&i!==0?`${t}%`:t).join(" ")};uh.colorChannel=Z7;const cle=(n,e)=>{try{return Z7(n)}catch{return n}};uh.private_safeColorChannel=cle;function kE(n){const{type:e,colorSpace:t}=n;let{values:i}=n;return e.indexOf("rgb")!==-1?i=i.map((s,o)=>o<3?parseInt(s,10):s):e.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.indexOf("color")!==-1?i=`${t} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function hle(n){if(n.indexOf("#")===0)return n;const{values:e}=fg(n);return`#${e.map((t,i)=>ule(i===3?Math.round(255*t):t)).join("")}`}function ej(n){n=fg(n);const{values:e}=n,t=e[0],i=e[1]/100,s=e[2]/100,o=i*Math.min(s,1-s),l=(p,_=(p+t/30)%12)=>s-o*Math.max(Math.min(_-3,9-_,1),-1);let u="rgb";const d=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return n.type==="hsla"&&(u+="a",d.push(e[3])),kE({type:u,values:d})}function oI(n){n=fg(n);let e=n.type==="hsl"||n.type==="hsla"?fg(ej(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function dle(n,e){const t=oI(n),i=oI(e);return(Math.max(t,i)+.05)/(Math.min(t,i)+.05)}function tj(n,e){return n=fg(n),e=uP(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,kE(n)}function ple(n,e,t){try{return tj(n,e)}catch{return n}}function cP(n,e){if(n=fg(n),e=uP(e),n.type.indexOf("hsl")!==-1)n.values[2]*=1-e;else if(n.type.indexOf("rgb")!==-1||n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]*=1-e;return kE(n)}function fle(n,e,t){try{return cP(n,e)}catch{return n}}function hP(n,e){if(n=fg(n),e=uP(e),n.type.indexOf("hsl")!==-1)n.values[2]+=(100-n.values[2])*e;else if(n.type.indexOf("rgb")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return kE(n)}function mle(n,e,t){try{return hP(n,e)}catch{return n}}function nj(n,e=.15){return oI(n)>.5?cP(n,e):hP(n,e)}function gle(n,e,t){try{return nj(n,e)}catch{return n}}function _le(n,e,t,i=1){const s=(d,p)=>Math.round((d**(1/i)*(1-t)+p**(1/i)*t)**i),o=fg(n),l=fg(e),u=[s(o.values[0],l.values[0]),s(o.values[1],l.values[1]),s(o.values[2],l.values[2])];return kE({type:"rgb",values:u})}const yle=["mode","contrastThreshold","tonalOffset"],PU={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Xw.white,default:Xw.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},I2={text:{primary:Xw.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Xw.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function FU(n,e,t,i){const s=i.light||i,o=i.dark||i*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=q7(n.main,s):e==="dark"&&(n.dark=J7(n.main,o)))}function vle(n="light"){return n==="dark"?{main:zT[200],light:zT[50],dark:zT[400]}:{main:zT[700],light:zT[400],dark:zT[800]}}function ble(n="light"){return n==="dark"?{main:FT[200],light:FT[50],dark:FT[400]}:{main:FT[500],light:FT[300],dark:FT[700]}}function Tle(n="light"){return n==="dark"?{main:PT[500],light:PT[300],dark:PT[700]}:{main:PT[700],light:PT[400],dark:PT[800]}}function Sle(n="light"){return n==="dark"?{main:UT[400],light:UT[300],dark:UT[700]}:{main:UT[700],light:UT[500],dark:UT[900]}}function Ele(n="light"){return n==="dark"?{main:HT[400],light:HT[300],dark:HT[700]}:{main:HT[800],light:HT[500],dark:HT[900]}}function xle(n="light"){return n==="dark"?{main:Tx[400],light:Tx[300],dark:Tx[700]}:{main:"#ed6c02",light:Tx[500],dark:Tx[900]}}function wle(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:i=.2}=n,s=Er(n,yle),o=n.primary||vle(e),l=n.secondary||ble(e),u=n.error||Tle(e),d=n.info||Sle(e),p=n.success||Ele(e),_=n.warning||xle(e);function v(M){return ale(M,I2.text.primary)>=t?I2.text.primary:PU.text.primary}const b=({color:M,name:I,mainShade:L=500,lightShade:O=300,darkShade:P=700})=>{if(M=Je({},M),!M.main&&M[L]&&(M.main=M[L]),!M.hasOwnProperty("main"))throw new Error($1(11,I?` (${I})`:"",L));if(typeof M.main!="string")throw new Error($1(12,I?` (${I})`:"",JSON.stringify(M.main)));return FU(M,"light",O,i),FU(M,"dark",P,i),M.contrastText||(M.contrastText=v(M.main)),M},E={dark:I2,light:PU};return af(Je({common:Je({},Xw),mode:e,primary:b({color:o,name:"primary"}),secondary:b({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:u,name:"error"}),warning:b({color:_,name:"warning"}),info:b({color:d,name:"info"}),success:b({color:p,name:"success"}),grey:Gie,contrastThreshold:t,getContrastText:v,augmentColor:b,tonalOffset:i},E[e]),s)}const $le=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Cle(n){return Math.round(n*1e5)/1e5}const zU={textTransform:"uppercase"},UU='"Roboto", "Helvetica", "Arial", sans-serif';function Mle(n,e){const t=typeof e=="function"?e(n):e,{fontFamily:i=UU,fontSize:s=14,fontWeightLight:o=300,fontWeightRegular:l=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:p=16,allVariants:_,pxToRem:v}=t,b=Er(t,$le),E=s/14,C=v||(L=>`${L/p*E}rem`),M=(L,O,P,B,z)=>Je({fontFamily:i,fontWeight:L,fontSize:C(O),lineHeight:P},i===UU?{letterSpacing:`${Cle(B/O)}em`}:{},z,_),I={h1:M(o,96,1.167,-1.5),h2:M(o,60,1.2,-.5),h3:M(l,48,1.167,0),h4:M(l,34,1.235,.25),h5:M(l,24,1.334,0),h6:M(u,20,1.6,.15),subtitle1:M(l,16,1.75,.15),subtitle2:M(u,14,1.57,.1),body1:M(l,16,1.5,.15),body2:M(l,14,1.43,.15),button:M(u,14,1.75,.4,zU),caption:M(l,12,1.66,.4),overline:M(l,12,2.66,1,zU),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return af(Je({htmlFontSize:p,pxToRem:C,fontFamily:i,fontSize:s,fontWeightLight:o,fontWeightRegular:l,fontWeightMedium:u,fontWeightBold:d},I),b,{clone:!1})}const Ale=.2,Ile=.14,Rle=.12;function ku(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${Ale})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${Ile})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${Rle})`].join(",")}const kle=["none",ku(0,2,1,-1,0,1,1,0,0,1,3,0),ku(0,3,1,-2,0,2,2,0,0,1,5,0),ku(0,3,3,-2,0,3,4,0,0,1,8,0),ku(0,2,4,-1,0,4,5,0,0,1,10,0),ku(0,3,5,-1,0,5,8,0,0,1,14,0),ku(0,3,5,-1,0,6,10,0,0,1,18,0),ku(0,4,5,-2,0,7,10,1,0,2,16,1),ku(0,5,5,-3,0,8,10,1,0,3,14,2),ku(0,5,6,-3,0,9,12,1,0,3,16,2),ku(0,6,6,-3,0,10,14,1,0,4,18,3),ku(0,6,7,-4,0,11,15,1,0,4,20,3),ku(0,7,8,-4,0,12,17,2,0,5,22,4),ku(0,7,8,-4,0,13,19,2,0,5,24,4),ku(0,7,9,-4,0,14,21,2,0,5,26,4),ku(0,8,9,-5,0,15,22,2,0,6,28,5),ku(0,8,10,-5,0,16,24,2,0,6,30,5),ku(0,8,11,-5,0,17,26,2,0,6,32,5),ku(0,9,11,-5,0,18,28,2,0,7,34,6),ku(0,9,12,-6,0,19,29,2,0,7,36,6),ku(0,10,13,-6,0,20,31,3,0,8,38,7),ku(0,10,13,-6,0,21,33,3,0,8,40,7),ku(0,10,14,-6,0,22,35,3,0,8,42,7),ku(0,11,14,-7,0,23,36,3,0,9,44,8),ku(0,11,15,-7,0,24,38,3,0,9,46,8)],Ole=["duration","easing","delay"],Lle={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Dle={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function HU(n){return`${Math.round(n)}ms`}function Nle(n){if(!n)return 0;const e=n/36;return Math.round((4+15*e**.25+e/5)*10)}function Ble(n){const e=Je({},Lle,n.easing),t=Je({},Dle,n.duration);return Je({getAutoHeightDuration:Nle,create:(s=["all"],o={})=>{const{duration:l=t.standard,easing:u=e.easeInOut,delay:d=0}=o;return Er(o,Ole),(Array.isArray(s)?s:[s]).map(p=>`${p} ${typeof l=="string"?l:HU(l)} ${u} ${typeof d=="string"?d:HU(d)}`).join(",")}},n,{easing:e,duration:t})}const Ple={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Fle=Ple,zle=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function rj(n={},...e){const{mixins:t={},palette:i={},transitions:s={},typography:o={}}=n,l=Er(n,zle);if(n.vars)throw new Error($1(18));const u=wle(i),d=IE(n);let p=af(d,{mixins:ile(d.breakpoints,t),palette:u,shadows:kle.slice(),typography:Mle(u,o),transitions:Ble(s),zIndex:Je({},Fle)});return p=af(p,l),p=e.reduce((_,v)=>af(_,v),p),p.unstable_sxConfig=Je({},R$,l==null?void 0:l.unstable_sxConfig),p.unstable_sx=function(v){return k$({sx:v,theme:this})},p}const Ule=rj(),AR=Ule;function IR(){const n=mR(AR);return n[M$]||n}function Xo({props:n,name:e}){return aP({props:n,name:e,defaultTheme:AR,themeId:M$})}var L$={};const Hle=n_(Vie);var R2={exports:{}},GU;function Gle(){return GU||(GU=1,function(n){function e(t,i){if(t==null)return{};var s={},o=Object.keys(t),l,u;for(u=0;u<o.length;u++)l=o[u],!(i.indexOf(l)>=0)&&(s[l]=t[l]);return s}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(R2)),R2.exports}const Wle=n_(Zse),Vle=n_(eoe),jle=n_(aoe),Xle=n_(dae),Yle=n_(Koe),Kle=n_(nae);var OE=RE;Object.defineProperty(L$,"__esModule",{value:!0});var Jle=L$.default=uue;L$.shouldForwardProp=dA;L$.systemDefaultTheme=void 0;var ng=OE(Hle),mD=OE(Gle()),WU=rue(Wle),qle=Vle;OE(jle);OE(Xle);var Qle=OE(Yle),Zle=OE(Kle);const eue=["ownerState"],tue=["variants"],nue=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function ij(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(ij=function(i){return i?t:e})(n)}function rue(n,e){if(!e&&n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=ij(e);if(t&&t.has(n))return t.get(n);var i={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var l=s?Object.getOwnPropertyDescriptor(n,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=n[o]}return i.default=n,t&&t.set(n,i),i}function iue(n){return Object.keys(n).length===0}function sue(n){return typeof n=="string"&&n.charCodeAt(0)>96}function dA(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const oue=L$.systemDefaultTheme=(0,Qle.default)(),aue=n=>n&&n.charAt(0).toLowerCase()+n.slice(1);function FC({defaultTheme:n,theme:e,themeId:t}){return iue(e)?n:e[t]||e}function lue(n){return n?(e,t)=>t[n]:null}function pA(n,e){let{ownerState:t}=e,i=(0,mD.default)(e,eue);const s=typeof n=="function"?n((0,ng.default)({ownerState:t},i)):n;if(Array.isArray(s))return s.flatMap(o=>pA(o,(0,ng.default)({ownerState:t},i)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=(0,mD.default)(s,tue);return o.forEach(d=>{let p=!0;typeof d.props=="function"?p=d.props((0,ng.default)({ownerState:t},i,t)):Object.keys(d.props).forEach(_=>{(t==null?void 0:t[_])!==d.props[_]&&i[_]!==d.props[_]&&(p=!1)}),p&&(Array.isArray(u)||(u=[u]),u.push(typeof d.style=="function"?d.style((0,ng.default)({ownerState:t},i,t)):d.style))}),u}return s}function uue(n={}){const{themeId:e,defaultTheme:t=oue,rootShouldForwardProp:i=dA,slotShouldForwardProp:s=dA}=n,o=l=>(0,Zle.default)((0,ng.default)({},l,{theme:FC((0,ng.default)({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{(0,WU.internal_processStyles)(l,z=>z.filter(G=>!(G!=null&&G.__mui_systemSx)));const{name:d,slot:p,skipVariantsResolver:_,skipSx:v,overridesResolver:b=lue(aue(p))}=u,E=(0,mD.default)(u,nue),C=_!==void 0?_:p&&p!=="Root"&&p!=="root"||!1,M=v||!1;let I,L=dA;p==="Root"||p==="root"?L=i:p?L=s:sue(l)&&(L=void 0);const O=(0,WU.default)(l,(0,ng.default)({shouldForwardProp:L,label:I},E)),P=z=>typeof z=="function"&&z.__emotion_real!==z||(0,qle.isPlainObject)(z)?G=>pA(z,(0,ng.default)({},G,{theme:FC({theme:G.theme,defaultTheme:t,themeId:e})})):z,B=(z,...G)=>{let j=P(z);const H=G?G.map(P):[];d&&b&&H.push(J=>{const te=FC((0,ng.default)({},J,{defaultTheme:t,themeId:e}));if(!te.components||!te.components[d]||!te.components[d].styleOverrides)return null;const he=te.components[d].styleOverrides,le={};return Object.entries(he).forEach(([ce,be])=>{le[ce]=pA(be,(0,ng.default)({},J,{theme:te}))}),b(J,le)}),d&&!C&&H.push(J=>{var te;const he=FC((0,ng.default)({},J,{defaultTheme:t,themeId:e})),le=he==null||(te=he.components)==null||(te=te[d])==null?void 0:te.variants;return pA({variants:le},(0,ng.default)({},J,{theme:he}))}),M||H.push(o);const Z=H.length-G.length;if(Array.isArray(z)&&Z>0){const J=new Array(Z).fill("");j=[...z,...J],j.raw=[...z.raw,...J]}const ae=O(j,...H);return l.muiName&&(ae.muiName=l.muiName),ae};return O.withConfig&&(B.withConfig=O.withConfig),B}}function sj(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const cue=n=>sj(n)&&n!=="classes",Nm=cue,ur=Jle({themeId:M$,defaultTheme:AR,rootShouldForwardProp:Nm}),VU=n=>{let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,(e/100).toFixed(2)};function hue(n){return So("MuiSvgIcon",n)}No("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const due=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],pue=n=>{const{color:e,fontSize:t,classes:i}=n,s={root:["root",e!=="inherit"&&`color${lr(e)}`,`fontSize${lr(t)}`]};return Bo(s,hue,i)},fue=ur("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${lr(t.color)}`],e[`fontSize${lr(t.fontSize)}`]]}})(({theme:n,ownerState:e})=>{var t,i,s,o,l,u,d,p,_,v,b,E,C;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(t=n.transitions)==null||(i=t.create)==null?void 0:i.call(t,"fill",{duration:(s=n.transitions)==null||(s=s.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((o=n.typography)==null||(l=o.pxToRem)==null?void 0:l.call(o,20))||"1.25rem",medium:((u=n.typography)==null||(d=u.pxToRem)==null?void 0:d.call(u,24))||"1.5rem",large:((p=n.typography)==null||(_=p.pxToRem)==null?void 0:_.call(p,35))||"2.1875rem"}[e.fontSize],color:(v=(b=(n.vars||n).palette)==null||(b=b[e.color])==null?void 0:b.main)!=null?v:{action:(E=(n.vars||n).palette)==null||(E=E.action)==null?void 0:E.active,disabled:(C=(n.vars||n).palette)==null||(C=C.action)==null?void 0:C.disabled,inherit:void 0}[e.color]}}),gD=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiSvgIcon"}),{children:s,className:o,color:l="inherit",component:u="svg",fontSize:d="medium",htmlColor:p,inheritViewBox:_=!1,titleAccess:v,viewBox:b="0 0 24 24"}=i,E=Er(i,due),C=ge.isValidElement(s)&&s.type==="svg",M=Je({},i,{color:l,component:u,fontSize:d,instanceFontSize:e.fontSize,inheritViewBox:_,viewBox:b,hasSvgAsChild:C}),I={};_||(I.viewBox=b);const L=pue(M);return Pe.jsxs(fue,Je({as:u,className:ri(L.root,o),focusable:"false",color:p,"aria-hidden":v?void 0:!0,role:v?"img":void 0,ref:t},I,E,C&&s.props,{ownerState:M,children:[C?s.props.children:s,v?Pe.jsx("title",{children:v}):null]}))});gD.muiName="SvgIcon";function D$(n,e){function t(i,s){return Pe.jsx(gD,Je({"data-testid":`${e}Icon`,ref:s},i,{children:n}))}return t.muiName=gD.muiName,ge.memo(ge.forwardRef(t))}const mue={configure:n=>{rP.configure(n)}},gue=Object.freeze(Object.defineProperty({__proto__:null,capitalize:lr,createChainedFunction:pD,createSvgIcon:D$,debounce:lP,deprecatedPropType:$ae,isMuiElement:hA,ownerDocument:Gf,ownerWindow:xv,requirePropFactory:Cae,setRef:iI,unstable_ClassNameGenerator:mue,unstable_useEnhancedEffect:Ev,unstable_useId:$R,unsupportedProp:Aae,useControlled:sI,useEventCallback:Zb,useForkRef:cf,useIsFocusVisible:j7},Symbol.toStringTag,{value:"Module"}));function _ue(n){return Xo}function _D(n,e){return _D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},_D(n,e)}function dP(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,_D(n,e)}const jU={disabled:!1},aI=Vr.createContext(null);var yue=function(e){return e.scrollTop},qx="unmounted",Fb="exited",zb="entering",cS="entered",yD="exiting",hy=function(n){dP(e,n);function e(i,s){var o;o=n.call(this,i,s)||this;var l=s,u=l&&!l.isMounting?i.enter:i.appear,d;return o.appearStatus=null,i.in?u?(d=Fb,o.appearStatus=zb):d=cS:i.unmountOnExit||i.mountOnEnter?d=qx:d=Fb,o.state={status:d},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===qx?{status:Fb}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==zb&&l!==cS&&(o=zb):(l===zb||l===cS)&&(o=yD)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,o,l,u;return o=l=u=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:u}},t.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===zb){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:hC.findDOMNode(this);l&&yue(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Fb&&this.setState({status:qx})},t.performEnter=function(s){var o=this,l=this.props.enter,u=this.context?this.context.isMounting:s,d=this.props.nodeRef?[u]:[hC.findDOMNode(this),u],p=d[0],_=d[1],v=this.getTimeouts(),b=u?v.appear:v.enter;if(!s&&!l||jU.disabled){this.safeSetState({status:cS},function(){o.props.onEntered(p)});return}this.props.onEnter(p,_),this.safeSetState({status:zb},function(){o.props.onEntering(p,_),o.onTransitionEnd(b,function(){o.safeSetState({status:cS},function(){o.props.onEntered(p,_)})})})},t.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:hC.findDOMNode(this);if(!o||jU.disabled){this.safeSetState({status:Fb},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:yD},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:Fb},function(){s.props.onExited(u)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},t.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:hC.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],p=d[0],_=d[1];this.props.addEndListener(p,_)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===qx)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=Er(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Vr.createElement(aI.Provider,{value:null},typeof l=="function"?l(s,u):Vr.cloneElement(Vr.Children.only(l),u))},e}(Vr.Component);hy.contextType=aI;hy.propTypes={};function GT(){}hy.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:GT,onEntering:GT,onEntered:GT,onExit:GT,onExiting:GT,onExited:GT};hy.UNMOUNTED=qx;hy.EXITED=Fb;hy.ENTERING=zb;hy.ENTERED=cS;hy.EXITING=yD;const oj=hy;function vue(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pP(n,e){var t=function(o){return e&&ge.isValidElement(o)?e(o):o},i=Object.create(null);return n&&ge.Children.map(n,function(s){return s}).forEach(function(s){i[s.key]=t(s)}),i}function bue(n,e){n=n||{},e=e||{};function t(_){return _ in e?e[_]:n[_]}var i=Object.create(null),s=[];for(var o in n)o in e?s.length&&(i[o]=s,s=[]):s.push(o);var l,u={};for(var d in e){if(i[d])for(l=0;l<i[d].length;l++){var p=i[d][l];u[i[d][l]]=t(p)}u[d]=t(d)}for(l=0;l<s.length;l++)u[s[l]]=t(s[l]);return u}function e1(n,e,t){return t[e]!=null?t[e]:n.props[e]}function Tue(n,e){return pP(n.children,function(t){return ge.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:e1(t,"appear",n),enter:e1(t,"enter",n),exit:e1(t,"exit",n)})})}function Sue(n,e,t){var i=pP(n.children),s=bue(e,i);return Object.keys(s).forEach(function(o){var l=s[o];if(ge.isValidElement(l)){var u=o in e,d=o in i,p=e[o],_=ge.isValidElement(p)&&!p.props.in;d&&(!u||_)?s[o]=ge.cloneElement(l,{onExited:t.bind(null,l),in:!0,exit:e1(l,"exit",n),enter:e1(l,"enter",n)}):!d&&u&&!_?s[o]=ge.cloneElement(l,{in:!1}):d&&u&&ge.isValidElement(p)&&(s[o]=ge.cloneElement(l,{onExited:t.bind(null,l),in:p.props.in,exit:e1(l,"exit",n),enter:e1(l,"enter",n)}))}}),s}var Eue=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},xue={component:"div",childFactory:function(e){return e}},fP=function(n){dP(e,n);function e(i,s){var o;o=n.call(this,i,s)||this;var l=o.handleExited.bind(vue(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,u=o.handleExited,d=o.firstRender;return{children:d?Tue(s,u):Sue(s,l,u),firstRender:!1}},t.handleExited=function(s,o){var l=pP(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(u){var d=Je({},u.children);return delete d[s.key],{children:d}}))},t.render=function(){var s=this.props,o=s.component,l=s.childFactory,u=Er(s,["component","childFactory"]),d=this.state.contextValue,p=Eue(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?Vr.createElement(aI.Provider,{value:d},p):Vr.createElement(aI.Provider,{value:d},Vr.createElement(o,u,p))},e}(Vr.Component);fP.propTypes={};fP.defaultProps=xue;const wue=fP,aj=n=>n.scrollTop;function lI(n,e){var t,i;const{timeout:s,easing:o,style:l={}}=n;return{duration:(t=l.transitionDuration)!=null?t:typeof s=="number"?s:s[e.mode]||0,easing:(i=l.transitionTimingFunction)!=null?i:typeof o=="object"?o[e.mode]:o,delay:l.transitionDelay}}function $ue(n){return So("MuiPaper",n)}No("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Cue=["className","component","elevation","square","variant"],Mue=n=>{const{square:e,elevation:t,variant:i,classes:s}=n,o={root:["root",i,!e&&"rounded",i==="elevation"&&`elevation${t}`]};return Bo(o,$ue,s)},Aue=ur("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(({theme:n,ownerState:e})=>{var t;return Je({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!e.square&&{borderRadius:n.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(n.vars||n).palette.divider}`},e.variant==="elevation"&&Je({boxShadow:(n.vars||n).shadows[e.elevation]},!n.vars&&n.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Xg("#fff",VU(e.elevation))}, ${Xg("#fff",VU(e.elevation))})`},n.vars&&{backgroundImage:(t=n.vars.overlays)==null?void 0:t[e.elevation]}))}),Iue=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiPaper"}),{className:s,component:o="div",elevation:l=1,square:u=!1,variant:d="elevation"}=i,p=Er(i,Cue),_=Je({},i,{component:o,elevation:l,square:u,variant:d}),v=Mue(_);return Pe.jsx(Aue,Je({as:o,ownerState:_,className:ri(v.root,s),ref:t},p))}),mP=Iue;function uI(n){return typeof n=="string"}function Rue(n,e,t){return n===void 0||uI(n)?e:Je({},e,{ownerState:Je({},e.ownerState,t)})}function lj(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(i=>i.match(/^on[A-Z]/)&&typeof n[i]=="function"&&!e.includes(i)).forEach(i=>{t[i]=n[i]}),t}function kue(n,e,t){return typeof n=="function"?n(e,t):n}function XU(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function Oue(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:i,externalForwardedProps:s,className:o}=n;if(!e){const E=ri(t==null?void 0:t.className,o,s==null?void 0:s.className,i==null?void 0:i.className),C=Je({},t==null?void 0:t.style,s==null?void 0:s.style,i==null?void 0:i.style),M=Je({},t,s,i);return E.length>0&&(M.className=E),Object.keys(C).length>0&&(M.style=C),{props:M,internalRef:void 0}}const l=lj(Je({},s,i)),u=XU(i),d=XU(s),p=e(l),_=ri(p==null?void 0:p.className,t==null?void 0:t.className,o,s==null?void 0:s.className,i==null?void 0:i.className),v=Je({},p==null?void 0:p.style,t==null?void 0:t.style,s==null?void 0:s.style,i==null?void 0:i.style),b=Je({},p,t,d,u);return _.length>0&&(b.className=_),Object.keys(v).length>0&&(b.style=v),{props:b,internalRef:p.ref}}const Lue=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function nE(n){var e;const{elementType:t,externalSlotProps:i,ownerState:s,skipResolvingSlotProps:o=!1}=n,l=Er(n,Lue),u=o?{}:kue(i,s),{props:d,internalRef:p}=Oue(Je({},l,{externalSlotProps:u})),_=cf(p,u==null?void 0:u.ref,(e=n.additionalProps)==null?void 0:e.ref);return Rue(t,Je({},d,{ref:_}),s)}function Due(n){const{className:e,classes:t,pulsate:i=!1,rippleX:s,rippleY:o,rippleSize:l,in:u,onExited:d,timeout:p}=n,[_,v]=ge.useState(!1),b=ri(e,t.ripple,t.rippleVisible,i&&t.ripplePulsate),E={width:l,height:l,top:-(l/2)+o,left:-(l/2)+s},C=ri(t.child,_&&t.childLeaving,i&&t.childPulsate);return!u&&!_&&v(!0),ge.useEffect(()=>{if(!u&&d!=null){const M=setTimeout(d,p);return()=>{clearTimeout(M)}}},[d,u,p]),Pe.jsx("span",{className:b,style:E,children:Pe.jsx("span",{className:C})})}const ig=No("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Nue=["center","classes","className"];let RR=n=>n,YU,KU,JU,qU;const vD=550,Bue=80,Pue=AE(YU||(YU=RR`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Fue=AE(KU||(KU=RR`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),zue=AE(JU||(JU=RR`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Uue=ur("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Hue=ur(Due,{name:"MuiTouchRipple",slot:"Ripple"})(qU||(qU=RR`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),ig.rippleVisible,Pue,vD,({theme:n})=>n.transitions.easing.easeInOut,ig.ripplePulsate,({theme:n})=>n.transitions.duration.shorter,ig.child,ig.childLeaving,Fue,vD,({theme:n})=>n.transitions.easing.easeInOut,ig.childPulsate,zue,({theme:n})=>n.transitions.easing.easeInOut),Gue=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:o={},className:l}=i,u=Er(i,Nue),[d,p]=ge.useState([]),_=ge.useRef(0),v=ge.useRef(null);ge.useEffect(()=>{v.current&&(v.current(),v.current=null)},[d]);const b=ge.useRef(!1),E=V7(),C=ge.useRef(null),M=ge.useRef(null),I=ge.useCallback(B=>{const{pulsate:z,rippleX:G,rippleY:j,rippleSize:H,cb:Z}=B;p(ae=>[...ae,Pe.jsx(Hue,{classes:{ripple:ri(o.ripple,ig.ripple),rippleVisible:ri(o.rippleVisible,ig.rippleVisible),ripplePulsate:ri(o.ripplePulsate,ig.ripplePulsate),child:ri(o.child,ig.child),childLeaving:ri(o.childLeaving,ig.childLeaving),childPulsate:ri(o.childPulsate,ig.childPulsate)},timeout:vD,pulsate:z,rippleX:G,rippleY:j,rippleSize:H},_.current)]),_.current+=1,v.current=Z},[o]),L=ge.useCallback((B={},z={},G=()=>{})=>{const{pulsate:j=!1,center:H=s||z.pulsate,fakeElement:Z=!1}=z;if((B==null?void 0:B.type)==="mousedown"&&b.current){b.current=!1;return}(B==null?void 0:B.type)==="touchstart"&&(b.current=!0);const ae=Z?null:M.current,J=ae?ae.getBoundingClientRect():{width:0,height:0,left:0,top:0};let te,he,le;if(H||B===void 0||B.clientX===0&&B.clientY===0||!B.clientX&&!B.touches)te=Math.round(J.width/2),he=Math.round(J.height/2);else{const{clientX:ce,clientY:be}=B.touches&&B.touches.length>0?B.touches[0]:B;te=Math.round(ce-J.left),he=Math.round(be-J.top)}if(H)le=Math.sqrt((2*J.width**2+J.height**2)/3),le%2===0&&(le+=1);else{const ce=Math.max(Math.abs((ae?ae.clientWidth:0)-te),te)*2+2,be=Math.max(Math.abs((ae?ae.clientHeight:0)-he),he)*2+2;le=Math.sqrt(ce**2+be**2)}B!=null&&B.touches?C.current===null&&(C.current=()=>{I({pulsate:j,rippleX:te,rippleY:he,rippleSize:le,cb:G})},E.start(Bue,()=>{C.current&&(C.current(),C.current=null)})):I({pulsate:j,rippleX:te,rippleY:he,rippleSize:le,cb:G})},[s,I,E]),O=ge.useCallback(()=>{L({},{pulsate:!0})},[L]),P=ge.useCallback((B,z)=>{if(E.clear(),(B==null?void 0:B.type)==="touchend"&&C.current){C.current(),C.current=null,E.start(0,()=>{P(B,z)});return}C.current=null,p(G=>G.length>0?G.slice(1):G),v.current=z},[E]);return ge.useImperativeHandle(t,()=>({pulsate:O,start:L,stop:P}),[O,L,P]),Pe.jsx(Uue,Je({className:ri(ig.root,o.root,l),ref:M},u,{children:Pe.jsx(wue,{component:null,exit:!0,children:d})}))}),Wue=Gue;function Vue(n){return So("MuiButtonBase",n)}const jue=No("MuiButtonBase",["root","disabled","focusVisible"]),Xue=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Yue=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:i,classes:s}=n,l=Bo({root:["root",e&&"disabled",t&&"focusVisible"]},Vue,s);return t&&i&&(l.root+=` ${i}`),l},Kue=ur("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${jue.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Jue=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:o=!1,children:l,className:u,component:d="button",disabled:p=!1,disableRipple:_=!1,disableTouchRipple:v=!1,focusRipple:b=!1,LinkComponent:E="a",onBlur:C,onClick:M,onContextMenu:I,onDragLeave:L,onFocus:O,onFocusVisible:P,onKeyDown:B,onKeyUp:z,onMouseDown:G,onMouseLeave:j,onMouseUp:H,onTouchEnd:Z,onTouchMove:ae,onTouchStart:J,tabIndex:te=0,TouchRippleProps:he,touchRippleRef:le,type:ce}=i,be=Er(i,Xue),$e=ge.useRef(null),q=ge.useRef(null),oe=cf(q,le),{isFocusVisibleRef:se,onFocus:pe,onBlur:Se,ref:Fe}=j7(),[Re,qe]=ge.useState(!1);p&&Re&&qe(!1),ge.useImperativeHandle(s,()=>({focusVisible:()=>{qe(!0),$e.current.focus()}}),[]);const[Ne,it]=ge.useState(!1);ge.useEffect(()=>{it(!0)},[]);const st=Ne&&!_&&!p;ge.useEffect(()=>{Re&&b&&!_&&Ne&&q.current.pulsate()},[_,b,Re,Ne]);function pt(Ke,Oe,Q=v){return Zb(ne=>(Oe&&Oe(ne),!Q&&q.current&&q.current[Ke](ne),!0))}const dt=pt("start",G),Ue=pt("stop",I),Ae=pt("stop",L),je=pt("stop",H),nt=pt("stop",Ke=>{Re&&Ke.preventDefault(),j&&j(Ke)}),tt=pt("start",J),Dt=pt("stop",Z),Rt=pt("stop",ae),yt=pt("stop",Ke=>{Se(Ke),se.current===!1&&qe(!1),C&&C(Ke)},!1),Ct=Zb(Ke=>{$e.current||($e.current=Ke.currentTarget),pe(Ke),se.current===!0&&(qe(!0),P&&P(Ke)),O&&O(Ke)}),Mt=()=>{const Ke=$e.current;return d&&d!=="button"&&!(Ke.tagName==="A"&&Ke.href)},mt=ge.useRef(!1),xe=Zb(Ke=>{b&&!mt.current&&Re&&q.current&&Ke.key===" "&&(mt.current=!0,q.current.stop(Ke,()=>{q.current.start(Ke)})),Ke.target===Ke.currentTarget&&Mt()&&Ke.key===" "&&Ke.preventDefault(),B&&B(Ke),Ke.target===Ke.currentTarget&&Mt()&&Ke.key==="Enter"&&!p&&(Ke.preventDefault(),M&&M(Ke))}),ie=Zb(Ke=>{b&&Ke.key===" "&&q.current&&Re&&!Ke.defaultPrevented&&(mt.current=!1,q.current.stop(Ke,()=>{q.current.pulsate(Ke)})),z&&z(Ke),M&&Ke.target===Ke.currentTarget&&Mt()&&Ke.key===" "&&!Ke.defaultPrevented&&M(Ke)});let we=d;we==="button"&&(be.href||be.to)&&(we=E);const ct={};we==="button"?(ct.type=ce===void 0?"button":ce,ct.disabled=p):(!be.href&&!be.to&&(ct.role="button"),p&&(ct["aria-disabled"]=p));const Tt=cf(t,Fe,$e),At=Je({},i,{centerRipple:o,component:d,disabled:p,disableRipple:_,disableTouchRipple:v,focusRipple:b,tabIndex:te,focusVisible:Re}),ft=Yue(At);return Pe.jsxs(Kue,Je({as:we,className:ri(ft.root,u),ownerState:At,onBlur:yt,onClick:M,onContextMenu:Ue,onFocus:Ct,onKeyDown:xe,onKeyUp:ie,onMouseDown:dt,onMouseLeave:nt,onMouseUp:je,onDragLeave:Ae,onTouchEnd:Dt,onTouchMove:Rt,onTouchStart:tt,ref:Tt,tabIndex:p?-1:te,type:ce},ct,be,{children:[l,st?Pe.jsx(Wue,Je({ref:oe,center:o},he)):null]}))}),gP=Jue;function que(n){return So("MuiIconButton",n)}const Que=No("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Zue=["edge","children","className","color","disabled","disableFocusRipple","size"],ece=n=>{const{classes:e,disabled:t,color:i,edge:s,size:o}=n,l={root:["root",t&&"disabled",i!=="default"&&`color${lr(i)}`,s&&`edge${lr(s)}`,`size${lr(o)}`]};return Bo(l,que,e)},tce=ur(gP,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="default"&&e[`color${lr(t.color)}`],t.edge&&e[`edge${lr(t.edge)}`],e[`size${lr(t.size)}`]]}})(({theme:n,ownerState:e})=>Je({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Xg(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:n,ownerState:e})=>{var t;const i=(t=(n.vars||n).palette)==null?void 0:t[e.color];return Je({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&Je({color:i==null?void 0:i.main},!e.disableRipple&&{"&:hover":Je({},i&&{backgroundColor:n.vars?`rgba(${i.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Xg(i.main,n.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:n.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:n.typography.pxToRem(28)},{[`&.${Que.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}})}),nce=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiIconButton"}),{edge:s=!1,children:o,className:l,color:u="default",disabled:d=!1,disableFocusRipple:p=!1,size:_="medium"}=i,v=Er(i,Zue),b=Je({},i,{edge:s,color:u,disabled:d,disableFocusRipple:p,size:_}),E=ece(b);return Pe.jsx(tce,Je({className:ri(E.root,l),centerRipple:!0,focusRipple:!p,disabled:d,ref:t},v,{ownerState:b,children:o}))}),fA=nce;function rce(n){return So("MuiTypography",n)}No("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const ice=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],sce=n=>{const{align:e,gutterBottom:t,noWrap:i,paragraph:s,variant:o,classes:l}=n,u={root:["root",o,n.align!=="inherit"&&`align${lr(e)}`,t&&"gutterBottom",i&&"noWrap",s&&"paragraph"]};return Bo(u,rce,l)},oce=ur("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${lr(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(({theme:n,ownerState:e})=>Je({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&n.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),QU={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ace={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},lce=n=>ace[n]||n,uce=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiTypography"}),s=lce(i.color),o=O$(Je({},i,{color:s})),{align:l="inherit",className:u,component:d,gutterBottom:p=!1,noWrap:_=!1,paragraph:v=!1,variant:b="body1",variantMapping:E=QU}=o,C=Er(o,ice),M=Je({},o,{align:l,color:s,className:u,component:d,gutterBottom:p,noWrap:_,paragraph:v,variant:b,variantMapping:E}),I=d||(v?"p":E[b]||QU[b])||"span",L=sce(M);return Pe.jsx(oce,Je({as:I,ref:t,ownerState:M,className:ri(L.root,u)},C))}),rE=uce,cce=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function hce(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function dce(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=i=>n.ownerDocument.querySelector(`input[type="radio"]${i}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function pce(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||dce(n))}function fce(n){const e=[],t=[];return Array.from(n.querySelectorAll(cce)).forEach((i,s)=>{const o=hce(i);o===-1||!pce(i)||(o===0?e.push(i):t.push({documentOrder:s,tabIndex:o,node:i}))}),t.sort((i,s)=>i.tabIndex===s.tabIndex?i.documentOrder-s.documentOrder:i.tabIndex-s.tabIndex).map(i=>i.node).concat(e)}function mce(){return!0}function gce(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:i=!1,disableRestoreFocus:s=!1,getTabbable:o=fce,isEnabled:l=mce,open:u}=n,d=ge.useRef(!1),p=ge.useRef(null),_=ge.useRef(null),v=ge.useRef(null),b=ge.useRef(null),E=ge.useRef(!1),C=ge.useRef(null),M=cf(e.ref,C),I=ge.useRef(null);ge.useEffect(()=>{!u||!C.current||(E.current=!t)},[t,u]),ge.useEffect(()=>{if(!u||!C.current)return;const P=Gf(C.current);return C.current.contains(P.activeElement)||(C.current.hasAttribute("tabIndex")||C.current.setAttribute("tabIndex","-1"),E.current&&C.current.focus()),()=>{s||(v.current&&v.current.focus&&(d.current=!0,v.current.focus()),v.current=null)}},[u]),ge.useEffect(()=>{if(!u||!C.current)return;const P=Gf(C.current),B=j=>{I.current=j,!(i||!l()||j.key!=="Tab")&&P.activeElement===C.current&&j.shiftKey&&(d.current=!0,_.current&&_.current.focus())},z=()=>{const j=C.current;if(j===null)return;if(!P.hasFocus()||!l()||d.current){d.current=!1;return}if(j.contains(P.activeElement)||i&&P.activeElement!==p.current&&P.activeElement!==_.current)return;if(P.activeElement!==b.current)b.current=null;else if(b.current!==null)return;if(!E.current)return;let H=[];if((P.activeElement===p.current||P.activeElement===_.current)&&(H=o(C.current)),H.length>0){var Z,ae;const J=!!((Z=I.current)!=null&&Z.shiftKey&&((ae=I.current)==null?void 0:ae.key)==="Tab"),te=H[0],he=H[H.length-1];typeof te!="string"&&typeof he!="string"&&(J?he.focus():te.focus())}else j.focus()};P.addEventListener("focusin",z),P.addEventListener("keydown",B,!0);const G=setInterval(()=>{P.activeElement&&P.activeElement.tagName==="BODY"&&z()},50);return()=>{clearInterval(G),P.removeEventListener("focusin",z),P.removeEventListener("keydown",B,!0)}},[t,i,s,l,u,o]);const L=P=>{v.current===null&&(v.current=P.relatedTarget),E.current=!0,b.current=P.target;const B=e.props.onFocus;B&&B(P)},O=P=>{v.current===null&&(v.current=P.relatedTarget),E.current=!0};return Pe.jsxs(ge.Fragment,{children:[Pe.jsx("div",{tabIndex:u?0:-1,onFocus:O,ref:p,"data-testid":"sentinelStart"}),ge.cloneElement(e,{ref:M,onFocus:L}),Pe.jsx("div",{tabIndex:u?0:-1,onFocus:O,ref:_,"data-testid":"sentinelEnd"})]})}function _ce(n){return typeof n=="function"?n():n}const yce=ge.forwardRef(function(e,t){const{children:i,container:s,disablePortal:o=!1}=e,[l,u]=ge.useState(null),d=cf(ge.isValidElement(i)?i.ref:null,t);if(Ev(()=>{o||u(_ce(s)||document.body)},[s,o]),Ev(()=>{if(l&&!o)return iI(t,l),()=>{iI(t,null)}},[t,l,o]),o){if(ge.isValidElement(i)){const p={ref:d};return ge.cloneElement(i,p)}return Pe.jsx(ge.Fragment,{children:i})}return Pe.jsx(ge.Fragment,{children:l&&vB.createPortal(i,l)})});function vce(n){const e=Gf(n);return e.body===n?xv(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function gw(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function ZU(n){return parseInt(xv(n).getComputedStyle(n).paddingRight,10)||0}function bce(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(n.tagName)!==-1,i=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||i}function e4(n,e,t,i,s){const o=[e,t,...i];[].forEach.call(n.children,l=>{const u=o.indexOf(l)===-1,d=!bce(l);u&&d&&gw(l,s)})}function k2(n,e){let t=-1;return n.some((i,s)=>e(i)?(t=s,!0):!1),t}function Tce(n,e){const t=[],i=n.container;if(!e.disableScrollLock){if(vce(i)){const l=X7(Gf(i));t.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${ZU(i)+l}px`;const u=Gf(i).querySelectorAll(".mui-fixed");[].forEach.call(u,d=>{t.push({value:d.style.paddingRight,property:"padding-right",el:d}),d.style.paddingRight=`${ZU(d)+l}px`})}let o;if(i.parentNode instanceof DocumentFragment)o=Gf(i).body;else{const l=i.parentElement,u=xv(i);o=(l==null?void 0:l.nodeName)==="HTML"&&u.getComputedStyle(l).overflowY==="scroll"?l:i}t.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{t.forEach(({value:o,el:l,property:u})=>{o?l.style.setProperty(u,o):l.style.removeProperty(u)})}}function Sce(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class Ece{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let i=this.modals.indexOf(e);if(i!==-1)return i;i=this.modals.length,this.modals.push(e),e.modalRef&&gw(e.modalRef,!1);const s=Sce(t);e4(t,e.mount,e.modalRef,s,!0);const o=k2(this.containers,l=>l.container===t);return o!==-1?(this.containers[o].modals.push(e),i):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:s}),i)}mount(e,t){const i=k2(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];s.restore||(s.restore=Tce(s,t))}remove(e,t=!0){const i=this.modals.indexOf(e);if(i===-1)return i;const s=k2(this.containers,l=>l.modals.indexOf(e)!==-1),o=this.containers[s];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(i,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&gw(e.modalRef,t),e4(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(s,1);else{const l=o.modals[o.modals.length-1];l.modalRef&&gw(l.modalRef,!1)}return i}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function xce(n){return typeof n=="function"?n():n}function wce(n){return n?n.props.hasOwnProperty("in"):!1}const $ce=new Ece;function Cce(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:i=!1,manager:s=$ce,closeAfterTransition:o=!1,onTransitionEnter:l,onTransitionExited:u,children:d,onClose:p,open:_,rootRef:v}=n,b=ge.useRef({}),E=ge.useRef(null),C=ge.useRef(null),M=cf(C,v),[I,L]=ge.useState(!_),O=wce(d);let P=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(P=!1);const B=()=>Gf(E.current),z=()=>(b.current.modalRef=C.current,b.current.mount=E.current,b.current),G=()=>{s.mount(z(),{disableScrollLock:i}),C.current&&(C.current.scrollTop=0)},j=Zb(()=>{const be=xce(e)||B().body;s.add(z(),be),C.current&&G()}),H=ge.useCallback(()=>s.isTopModal(z()),[s]),Z=Zb(be=>{E.current=be,be&&(_&&H()?G():C.current&&gw(C.current,P))}),ae=ge.useCallback(()=>{s.remove(z(),P)},[P,s]);ge.useEffect(()=>()=>{ae()},[ae]),ge.useEffect(()=>{_?j():(!O||!o)&&ae()},[_,ae,O,o,j]);const J=be=>$e=>{var q;(q=be.onKeyDown)==null||q.call(be,$e),!($e.key!=="Escape"||$e.which===229||!H())&&(t||($e.stopPropagation(),p&&p($e,"escapeKeyDown")))},te=be=>$e=>{var q;(q=be.onClick)==null||q.call(be,$e),$e.target===$e.currentTarget&&p&&p($e,"backdropClick")};return{getRootProps:(be={})=>{const $e=lj(n);delete $e.onTransitionEnter,delete $e.onTransitionExited;const q=Je({},$e,be);return Je({role:"presentation"},q,{onKeyDown:J(q),ref:M})},getBackdropProps:(be={})=>{const $e=be;return Je({"aria-hidden":!0},$e,{onClick:te($e),open:_})},getTransitionProps:()=>{const be=()=>{L(!1),l&&l()},$e=()=>{L(!0),u&&u(),o&&ae()};return{onEnter:pD(be,d==null?void 0:d.props.onEnter),onExited:pD($e,d==null?void 0:d.props.onExited)}},rootRef:M,portalRef:Z,isTopModal:H,exited:I,hasTransition:O}}const Mce=["onChange","maxRows","minRows","style","value"];function zC(n){return parseInt(n,10)||0}const Ace={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Ice(n){return n==null||Object.keys(n).length===0||n.outerHeightStyle===0&&!n.overflowing}const Rce=ge.forwardRef(function(e,t){const{onChange:i,maxRows:s,minRows:o=1,style:l,value:u}=e,d=Er(e,Mce),{current:p}=ge.useRef(u!=null),_=ge.useRef(null),v=cf(t,_),b=ge.useRef(null),E=ge.useCallback(()=>{const I=_.current,O=xv(I).getComputedStyle(I);if(O.width==="0px")return{outerHeightStyle:0,overflowing:!1};const P=b.current;P.style.width=O.width,P.value=I.value||e.placeholder||"x",P.value.slice(-1)===`
`&&(P.value+=" ");const B=O.boxSizing,z=zC(O.paddingBottom)+zC(O.paddingTop),G=zC(O.borderBottomWidth)+zC(O.borderTopWidth),j=P.scrollHeight;P.value="x";const H=P.scrollHeight;let Z=j;o&&(Z=Math.max(Number(o)*H,Z)),s&&(Z=Math.min(Number(s)*H,Z)),Z=Math.max(Z,H);const ae=Z+(B==="border-box"?z+G:0),J=Math.abs(Z-j)<=1;return{outerHeightStyle:ae,overflowing:J}},[s,o,e.placeholder]),C=ge.useCallback(()=>{const I=E();if(Ice(I))return;const L=_.current;L.style.height=`${I.outerHeightStyle}px`,L.style.overflow=I.overflowing?"hidden":""},[E]);Ev(()=>{const I=()=>{C()};let L;const O=lP(I),P=_.current,B=xv(P);B.addEventListener("resize",O);let z;return typeof ResizeObserver<"u"&&(z=new ResizeObserver(I),z.observe(P)),()=>{O.clear(),cancelAnimationFrame(L),B.removeEventListener("resize",O),z&&z.disconnect()}},[E,C]),Ev(()=>{C()});const M=I=>{p||C(),i&&i(I)};return Pe.jsxs(ge.Fragment,{children:[Pe.jsx("textarea",Je({value:u,onChange:M,ref:v,rows:o,style:l},d)),Pe.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:b,tabIndex:-1,style:Je({},Ace.shadow,l,{paddingTop:0,paddingBottom:0})})]})});function Dv({props:n,states:e,muiFormControl:t}){return e.reduce((i,s)=>(i[s]=n[s],t&&typeof n[s]>"u"&&(i[s]=t[s]),i),{})}const kce=ge.createContext(void 0),_P=kce;function dy(){return ge.useContext(_P)}function Oce(n){return Pe.jsx(Zoe,Je({},n,{defaultTheme:AR,themeId:M$}))}function t4(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function cI(n,e=!1){return n&&(t4(n.value)&&n.value!==""||e&&t4(n.defaultValue)&&n.defaultValue!=="")}function Lce(n){return n.startAdornment}function Dce(n){return So("MuiInputBase",n)}const Nce=No("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),iE=Nce,Bce=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],kR=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${lr(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},OR=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},Pce=n=>{const{classes:e,color:t,disabled:i,error:s,endAdornment:o,focused:l,formControl:u,fullWidth:d,hiddenLabel:p,multiline:_,readOnly:v,size:b,startAdornment:E,type:C}=n,M={root:["root",`color${lr(t)}`,i&&"disabled",s&&"error",d&&"fullWidth",l&&"focused",u&&"formControl",b&&b!=="medium"&&`size${lr(b)}`,_&&"multiline",E&&"adornedStart",o&&"adornedEnd",p&&"hiddenLabel",v&&"readOnly"],input:["input",i&&"disabled",C==="search"&&"inputTypeSearch",_&&"inputMultiline",b==="small"&&"inputSizeSmall",p&&"inputHiddenLabel",E&&"inputAdornedStart",o&&"inputAdornedEnd",v&&"readOnly"]};return Bo(M,Dce,e)},LR=ur("div",{name:"MuiInputBase",slot:"Root",overridesResolver:kR})(({theme:n,ownerState:e})=>Je({},n.typography.body1,{color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${iE.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"}},e.multiline&&Je({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),DR=ur("input",{name:"MuiInputBase",slot:"Input",overridesResolver:OR})(({theme:n,ownerState:e})=>{const t=n.palette.mode==="light",i=Je({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),s={opacity:"0 !important"},o=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return Je({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${iE.formControl} &`]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${iE.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),Fce=Pe.jsx(Oce,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),zce=ge.forwardRef(function(e,t){var i;const s=Xo({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:l,autoFocus:u,className:d,components:p={},componentsProps:_={},defaultValue:v,disabled:b,disableInjectingGlobalStyles:E,endAdornment:C,fullWidth:M=!1,id:I,inputComponent:L="input",inputProps:O={},inputRef:P,maxRows:B,minRows:z,multiline:G=!1,name:j,onBlur:H,onChange:Z,onClick:ae,onFocus:J,onKeyDown:te,onKeyUp:he,placeholder:le,readOnly:ce,renderSuffix:be,rows:$e,slotProps:q={},slots:oe={},startAdornment:se,type:pe="text",value:Se}=s,Fe=Er(s,Bce),Re=O.value!=null?O.value:Se,{current:qe}=ge.useRef(Re!=null),Ne=ge.useRef(),it=ge.useCallback(ft=>{},[]),st=cf(Ne,P,O.ref,it),[pt,dt]=ge.useState(!1),Ue=dy(),Ae=Dv({props:s,muiFormControl:Ue,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ae.focused=Ue?Ue.focused:pt,ge.useEffect(()=>{!Ue&&b&&pt&&(dt(!1),H&&H())},[Ue,b,pt,H]);const je=Ue&&Ue.onFilled,nt=Ue&&Ue.onEmpty,tt=ge.useCallback(ft=>{cI(ft)?je&&je():nt&&nt()},[je,nt]);Ev(()=>{qe&&tt({value:Re})},[Re,tt,qe]);const Dt=ft=>{if(Ae.disabled){ft.stopPropagation();return}J&&J(ft),O.onFocus&&O.onFocus(ft),Ue&&Ue.onFocus?Ue.onFocus(ft):dt(!0)},Rt=ft=>{H&&H(ft),O.onBlur&&O.onBlur(ft),Ue&&Ue.onBlur?Ue.onBlur(ft):dt(!1)},yt=(ft,...Ke)=>{if(!qe){const Oe=ft.target||Ne.current;if(Oe==null)throw new Error($1(1));tt({value:Oe.value})}O.onChange&&O.onChange(ft,...Ke),Z&&Z(ft,...Ke)};ge.useEffect(()=>{tt(Ne.current)},[]);const Ct=ft=>{Ne.current&&ft.currentTarget===ft.target&&Ne.current.focus(),ae&&ae(ft)};let Mt=L,mt=O;G&&Mt==="input"&&($e?mt=Je({type:void 0,minRows:$e,maxRows:$e},mt):mt=Je({type:void 0,maxRows:B,minRows:z},mt),Mt=Rce);const xe=ft=>{tt(ft.animationName==="mui-auto-fill-cancel"?Ne.current:{value:"x"})};ge.useEffect(()=>{Ue&&Ue.setAdornedStart(!!se)},[Ue,se]);const ie=Je({},s,{color:Ae.color||"primary",disabled:Ae.disabled,endAdornment:C,error:Ae.error,focused:Ae.focused,formControl:Ue,fullWidth:M,hiddenLabel:Ae.hiddenLabel,multiline:G,size:Ae.size,startAdornment:se,type:pe}),we=Pce(ie),ct=oe.root||p.Root||LR,Tt=q.root||_.root||{},At=oe.input||p.Input||DR;return mt=Je({},mt,(i=q.input)!=null?i:_.input),Pe.jsxs(ge.Fragment,{children:[!E&&Fce,Pe.jsxs(ct,Je({},Tt,!uI(ct)&&{ownerState:Je({},ie,Tt.ownerState)},{ref:t,onClick:Ct},Fe,{className:ri(we.root,Tt.className,d,ce&&"MuiInputBase-readOnly"),children:[se,Pe.jsx(_P.Provider,{value:null,children:Pe.jsx(At,Je({ownerState:ie,"aria-invalid":Ae.error,"aria-describedby":o,autoComplete:l,autoFocus:u,defaultValue:v,disabled:Ae.disabled,id:I,onAnimationStart:xe,name:j,placeholder:le,readOnly:ce,required:Ae.required,rows:$e,value:Re,onKeyDown:te,onKeyUp:he,type:pe},mt,!uI(At)&&{as:Mt,ownerState:Je({},ie,mt.ownerState)},{ref:st,className:ri(we.input,mt.className,ce&&"MuiInputBase-readOnly"),onBlur:Rt,onChange:yt,onFocus:Dt}))}),C,be?be(Je({},Ae,{startAdornment:se})):null]}))]})}),yP=zce;function Uce(n){return So("MuiInput",n)}const Hce=Je({},iE,No("MuiInput",["root","underline","input"])),Ex=Hce;function Gce(n){return So("MuiOutlinedInput",n)}const Wce=Je({},iE,No("MuiOutlinedInput",["root","notchedOutline","input"])),Fy=Wce;function Vce(n){return So("MuiFilledInput",n)}const jce=Je({},iE,No("MuiFilledInput",["root","underline","input"])),Sb=jce,Xce=D$(Pe.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Yce=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Kce={entering:{opacity:1},entered:{opacity:1}},Jce=ge.forwardRef(function(e,t){const i=IR(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:u,easing:d,in:p,onEnter:_,onEntered:v,onEntering:b,onExit:E,onExited:C,onExiting:M,style:I,timeout:L=s,TransitionComponent:O=oj}=e,P=Er(e,Yce),B=ge.useRef(null),z=cf(B,u.ref,t),G=le=>ce=>{if(le){const be=B.current;ce===void 0?le(be):le(be,ce)}},j=G(b),H=G((le,ce)=>{aj(le);const be=lI({style:I,timeout:L,easing:d},{mode:"enter"});le.style.webkitTransition=i.transitions.create("opacity",be),le.style.transition=i.transitions.create("opacity",be),_&&_(le,ce)}),Z=G(v),ae=G(M),J=G(le=>{const ce=lI({style:I,timeout:L,easing:d},{mode:"exit"});le.style.webkitTransition=i.transitions.create("opacity",ce),le.style.transition=i.transitions.create("opacity",ce),E&&E(le)}),te=G(C),he=le=>{o&&o(B.current,le)};return Pe.jsx(O,Je({appear:l,in:p,nodeRef:B,onEnter:H,onEntered:Z,onEntering:j,onExit:J,onExited:te,onExiting:ae,addEndListener:he,timeout:L},P,{children:(le,ce)=>ge.cloneElement(u,Je({style:Je({opacity:0,visibility:le==="exited"&&!p?"hidden":void 0},Kce[le],I,u.props.style),ref:z},ce))}))}),uj=Jce;function qce(n){return So("MuiBackdrop",n)}No("MuiBackdrop",["root","invisible"]);const Qce=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Zce=n=>{const{classes:e,invisible:t}=n;return Bo({root:["root",t&&"invisible"]},qce,e)},ehe=ur("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})(({ownerState:n})=>Je({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},n.invisible&&{backgroundColor:"transparent"})),the=ge.forwardRef(function(e,t){var i,s,o;const l=Xo({props:e,name:"MuiBackdrop"}),{children:u,className:d,component:p="div",components:_={},componentsProps:v={},invisible:b=!1,open:E,slotProps:C={},slots:M={},TransitionComponent:I=uj,transitionDuration:L}=l,O=Er(l,Qce),P=Je({},l,{component:p,invisible:b}),B=Zce(P),z=(i=C.root)!=null?i:v.root;return Pe.jsx(I,Je({in:E,timeout:L},O,{children:Pe.jsx(ehe,Je({"aria-hidden":!0},z,{as:(s=(o=M.root)!=null?o:_.Root)!=null?s:p,className:ri(B.root,d,z==null?void 0:z.className),ownerState:Je({},P,z==null?void 0:z.ownerState),classes:B,ref:t,children:u}))}))}),NR=the,nhe=No("MuiBox",["root"]),rhe=nhe,ihe=rj(),she=oae({themeId:M$,defaultTheme:ihe,defaultClassName:rhe.root,generateClassName:rP.generate}),lv=she;function ohe(n){return So("MuiButton",n)}const ahe=No("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),UC=ahe,lhe=ge.createContext({}),uhe=lhe,che=ge.createContext(void 0),hhe=che,dhe=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],phe=n=>{const{color:e,disableElevation:t,fullWidth:i,size:s,variant:o,classes:l}=n,u={root:["root",o,`${o}${lr(e)}`,`size${lr(s)}`,`${o}Size${lr(s)}`,`color${lr(e)}`,t&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${lr(s)}`],endIcon:["icon","endIcon",`iconSize${lr(s)}`]},d=Bo(u,ohe,l);return Je({},l,d)},cj=n=>Je({},n.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},n.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},n.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),fhe=ur(gP,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`${t.variant}${lr(t.color)}`],e[`size${lr(t.size)}`],e[`${t.variant}Size${lr(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth]}})(({theme:n,ownerState:e})=>{var t,i;const s=n.palette.mode==="light"?n.palette.grey[300]:n.palette.grey[800],o=n.palette.mode==="light"?n.palette.grey.A100:n.palette.grey[700];return Je({},n.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":Je({textDecoration:"none",backgroundColor:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.hoverOpacity})`:Xg(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:n.vars?`rgba(${n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Xg(n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(n.vars||n).palette[e.color].main}`,backgroundColor:n.vars?`rgba(${n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Xg(n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:n.vars?n.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(n.vars||n).shadows[4],"@media (hover: none)":{boxShadow:(n.vars||n).shadows[2],backgroundColor:(n.vars||n).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(n.vars||n).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(n.vars||n).palette[e.color].main}}),"&:active":Je({},e.variant==="contained"&&{boxShadow:(n.vars||n).shadows[8]}),[`&.${UC.focusVisible}`]:Je({},e.variant==="contained"&&{boxShadow:(n.vars||n).shadows[6]}),[`&.${UC.disabled}`]:Je({color:(n.vars||n).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(n.vars||n).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(n.vars||n).palette.action.disabled,boxShadow:(n.vars||n).shadows[0],backgroundColor:(n.vars||n).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main,border:n.vars?`1px solid rgba(${n.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${Xg(n.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:n.vars?n.vars.palette.text.primary:(t=(i=n.palette).getContrastText)==null?void 0:t.call(i,n.palette.grey[300]),backgroundColor:n.vars?n.vars.palette.Button.inheritContainedBg:s,boxShadow:(n.vars||n).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].contrastText,backgroundColor:(n.vars||n).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:n.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:n.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:n.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:n})=>n.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${UC.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${UC.disabled}`]:{boxShadow:"none"}}),mhe=ur("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.startIcon,e[`iconSize${lr(t.size)}`]]}})(({ownerState:n})=>Je({display:"inherit",marginRight:8,marginLeft:-4},n.size==="small"&&{marginLeft:-2},cj(n))),ghe=ur("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.endIcon,e[`iconSize${lr(t.size)}`]]}})(({ownerState:n})=>Je({display:"inherit",marginRight:-4,marginLeft:8},n.size==="small"&&{marginRight:-2},cj(n))),_he=ge.forwardRef(function(e,t){const i=ge.useContext(uhe),s=ge.useContext(hhe),o=oP(i,e),l=Xo({props:o,name:"MuiButton"}),{children:u,color:d="primary",component:p="button",className:_,disabled:v=!1,disableElevation:b=!1,disableFocusRipple:E=!1,endIcon:C,focusVisibleClassName:M,fullWidth:I=!1,size:L="medium",startIcon:O,type:P,variant:B="text"}=l,z=Er(l,dhe),G=Je({},l,{color:d,component:p,disabled:v,disableElevation:b,disableFocusRipple:E,fullWidth:I,size:L,type:P,variant:B}),j=phe(G),H=O&&Pe.jsx(mhe,{className:j.startIcon,ownerState:G,children:O}),Z=C&&Pe.jsx(ghe,{className:j.endIcon,ownerState:G,children:C}),ae=s||"";return Pe.jsxs(fhe,Je({ownerState:G,className:ri(i.className,j.root,_,ae),component:p,disabled:v,focusRipple:!E,focusVisibleClassName:ri(j.focusVisible,M),ref:t,type:P},z,{classes:j,children:[H,u,Z]}))}),yhe=_he;function vhe(n){return So("PrivateSwitchBase",n)}No("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const bhe=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],The=n=>{const{classes:e,checked:t,disabled:i,edge:s}=n,o={root:["root",t&&"checked",i&&"disabled",s&&`edge${lr(s)}`],input:["input"]};return Bo(o,vhe,e)},She=ur(gP)(({ownerState:n})=>Je({padding:9,borderRadius:"50%"},n.edge==="start"&&{marginLeft:n.size==="small"?-3:-12},n.edge==="end"&&{marginRight:n.size==="small"?-3:-12})),Ehe=ur("input",{shouldForwardProp:Nm})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),xhe=ge.forwardRef(function(e,t){const{autoFocus:i,checked:s,checkedIcon:o,className:l,defaultChecked:u,disabled:d,disableFocusRipple:p=!1,edge:_=!1,icon:v,id:b,inputProps:E,inputRef:C,name:M,onBlur:I,onChange:L,onFocus:O,readOnly:P,required:B=!1,tabIndex:z,type:G,value:j}=e,H=Er(e,bhe),[Z,ae]=sI({controlled:s,default:!!u,name:"SwitchBase",state:"checked"}),J=dy(),te=oe=>{O&&O(oe),J&&J.onFocus&&J.onFocus(oe)},he=oe=>{I&&I(oe),J&&J.onBlur&&J.onBlur(oe)},le=oe=>{if(oe.nativeEvent.defaultPrevented)return;const se=oe.target.checked;ae(se),L&&L(oe,se)};let ce=d;J&&typeof ce>"u"&&(ce=J.disabled);const be=G==="checkbox"||G==="radio",$e=Je({},e,{checked:Z,disabled:ce,disableFocusRipple:p,edge:_}),q=The($e);return Pe.jsxs(She,Je({component:"span",className:ri(q.root,l),centerRipple:!0,focusRipple:!p,disabled:ce,tabIndex:null,role:void 0,onFocus:te,onBlur:he,ownerState:$e,ref:t},H,{children:[Pe.jsx(Ehe,Je({autoFocus:i,checked:s,defaultChecked:u,className:q.input,disabled:ce,id:be?b:void 0,name:M,onChange:le,readOnly:P,ref:C,required:B,ownerState:$e,tabIndex:z,type:G},G==="checkbox"&&j===void 0?{}:{value:j},E)),Z?o:v]}))}),hj=xhe,whe=D$(Pe.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),$he=D$(Pe.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Che=D$(Pe.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Mhe(n){return So("MuiCheckbox",n)}const Ahe=No("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),O2=Ahe,Ihe=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Rhe=n=>{const{classes:e,indeterminate:t,color:i,size:s}=n,o={root:["root",t&&"indeterminate",`color${lr(i)}`,`size${lr(s)}`]},l=Bo(o,Mhe,e);return Je({},e,l)},khe=ur(hj,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${lr(t.size)}`],t.color!=="default"&&e[`color${lr(t.color)}`]]}})(({theme:n,ownerState:e})=>Je({color:(n.vars||n).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${e.color==="default"?n.vars.palette.action.activeChannel:n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Xg(e.color==="default"?n.palette.action.active:n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${O2.checked}, &.${O2.indeterminate}`]:{color:(n.vars||n).palette[e.color].main},[`&.${O2.disabled}`]:{color:(n.vars||n).palette.action.disabled}})),Ohe=Pe.jsx($he,{}),Lhe=Pe.jsx(whe,{}),Dhe=Pe.jsx(Che,{}),Nhe=ge.forwardRef(function(e,t){var i,s;const o=Xo({props:e,name:"MuiCheckbox"}),{checkedIcon:l=Ohe,color:u="primary",icon:d=Lhe,indeterminate:p=!1,indeterminateIcon:_=Dhe,inputProps:v,size:b="medium",className:E}=o,C=Er(o,Ihe),M=p?_:d,I=p?_:l,L=Je({},o,{color:u,indeterminate:p,size:b}),O=Rhe(L);return Pe.jsx(khe,Je({type:"checkbox",inputProps:Je({"data-indeterminate":p},v),icon:ge.cloneElement(M,{fontSize:(i=M.props.fontSize)!=null?i:b}),checkedIcon:ge.cloneElement(I,{fontSize:(s=I.props.fontSize)!=null?s:b}),ownerState:L,ref:t,className:ri(O.root,E)},C,{classes:O}))}),Bhe=Nhe;function Phe(n){return So("MuiCircularProgress",n)}No("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Fhe=["className","color","disableShrink","size","style","thickness","value","variant"];let BR=n=>n,n4,r4,i4,s4;const zy=44,zhe=AE(n4||(n4=BR`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Uhe=AE(r4||(r4=BR`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Hhe=n=>{const{classes:e,variant:t,color:i,disableShrink:s}=n,o={root:["root",t,`color${lr(i)}`],svg:["svg"],circle:["circle",`circle${lr(t)}`,s&&"circleDisableShrink"]};return Bo(o,Phe,e)},Ghe=ur("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`color${lr(t.color)}`]]}})(({ownerState:n,theme:e})=>Je({display:"inline-block"},n.variant==="determinate"&&{transition:e.transitions.create("transform")},n.color!=="inherit"&&{color:(e.vars||e).palette[n.color].main}),({ownerState:n})=>n.variant==="indeterminate"&&lR(i4||(i4=BR`
      animation: ${0} 1.4s linear infinite;
    `),zhe)),Whe=ur("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(n,e)=>e.svg})({display:"block"}),Vhe=ur("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.circle,e[`circle${lr(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(({ownerState:n,theme:e})=>Je({stroke:"currentColor"},n.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},n.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:n})=>n.variant==="indeterminate"&&!n.disableShrink&&lR(s4||(s4=BR`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Uhe)),jhe=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiCircularProgress"}),{className:s,color:o="primary",disableShrink:l=!1,size:u=40,style:d,thickness:p=3.6,value:_=0,variant:v="indeterminate"}=i,b=Er(i,Fhe),E=Je({},i,{color:o,disableShrink:l,size:u,thickness:p,value:_,variant:v}),C=Hhe(E),M={},I={},L={};if(v==="determinate"){const O=2*Math.PI*((zy-p)/2);M.strokeDasharray=O.toFixed(3),L["aria-valuenow"]=Math.round(_),M.strokeDashoffset=`${((100-_)/100*O).toFixed(3)}px`,I.transform="rotate(-90deg)"}return Pe.jsx(Ghe,Je({className:ri(C.root,s),style:Je({width:u,height:u},I,d),ownerState:E,ref:t,role:"progressbar"},L,b,{children:Pe.jsx(Whe,{className:C.svg,ownerState:E,viewBox:`${zy/2} ${zy/2} ${zy} ${zy}`,children:Pe.jsx(Vhe,{className:C.circle,style:M,ownerState:E,cx:zy,cy:zy,r:(zy-p)/2,fill:"none",strokeWidth:p})})}))}),dj=jhe,Xhe=Kae({createStyledComponent:ur("div",{name:"MuiContainer",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`maxWidth${lr(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),useThemeProps:n=>Xo({props:n,name:"MuiContainer"})}),o4=Xhe;function Yhe(n){return So("MuiModal",n)}No("MuiModal",["root","hidden","backdrop"]);const Khe=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],Jhe=n=>{const{open:e,exited:t,classes:i}=n;return Bo({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},Yhe,i)},qhe=ur("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(({theme:n,ownerState:e})=>Je({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),Qhe=ur(NR,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,e)=>e.backdrop})({zIndex:-1}),Zhe=ge.forwardRef(function(e,t){var i,s,o,l,u,d;const p=Xo({name:"MuiModal",props:e}),{BackdropComponent:_=Qhe,BackdropProps:v,className:b,closeAfterTransition:E=!1,children:C,container:M,component:I,components:L={},componentsProps:O={},disableAutoFocus:P=!1,disableEnforceFocus:B=!1,disableEscapeKeyDown:z=!1,disablePortal:G=!1,disableRestoreFocus:j=!1,disableScrollLock:H=!1,hideBackdrop:Z=!1,keepMounted:ae=!1,onBackdropClick:J,open:te,slotProps:he,slots:le}=p,ce=Er(p,Khe),be=Je({},p,{closeAfterTransition:E,disableAutoFocus:P,disableEnforceFocus:B,disableEscapeKeyDown:z,disablePortal:G,disableRestoreFocus:j,disableScrollLock:H,hideBackdrop:Z,keepMounted:ae}),{getRootProps:$e,getBackdropProps:q,getTransitionProps:oe,portalRef:se,isTopModal:pe,exited:Se,hasTransition:Fe}=Cce(Je({},be,{rootRef:t})),Re=Je({},be,{exited:Se}),qe=Jhe(Re),Ne={};if(C.props.tabIndex===void 0&&(Ne.tabIndex="-1"),Fe){const{onEnter:je,onExited:nt}=oe();Ne.onEnter=je,Ne.onExited=nt}const it=(i=(s=le==null?void 0:le.root)!=null?s:L.Root)!=null?i:qhe,st=(o=(l=le==null?void 0:le.backdrop)!=null?l:L.Backdrop)!=null?o:_,pt=(u=he==null?void 0:he.root)!=null?u:O.root,dt=(d=he==null?void 0:he.backdrop)!=null?d:O.backdrop,Ue=nE({elementType:it,externalSlotProps:pt,externalForwardedProps:ce,getSlotProps:$e,additionalProps:{ref:t,as:I},ownerState:Re,className:ri(b,pt==null?void 0:pt.className,qe==null?void 0:qe.root,!Re.open&&Re.exited&&(qe==null?void 0:qe.hidden))}),Ae=nE({elementType:st,externalSlotProps:dt,additionalProps:v,getSlotProps:je=>q(Je({},je,{onClick:nt=>{J&&J(nt),je!=null&&je.onClick&&je.onClick(nt)}})),className:ri(dt==null?void 0:dt.className,v==null?void 0:v.className,qe==null?void 0:qe.backdrop),ownerState:Re});return!ae&&!te&&(!Fe||Se)?null:Pe.jsx(yce,{ref:se,container:M,disablePortal:G,children:Pe.jsxs(it,Je({},Ue,{children:[!Z&&_?Pe.jsx(st,Je({},Ae)):null,Pe.jsx(gce,{disableEnforceFocus:B,disableAutoFocus:P,disableRestoreFocus:j,isEnabled:pe,open:te,children:ge.cloneElement(C,Ne)})]}))})}),pj=Zhe;function ede(n){return So("MuiDialog",n)}const tde=No("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),L2=tde,nde=ge.createContext({}),rde=nde,ide=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],sde=ur(NR,{name:"MuiDialog",slot:"Backdrop",overrides:(n,e)=>e.backdrop})({zIndex:-1}),ode=n=>{const{classes:e,scroll:t,maxWidth:i,fullWidth:s,fullScreen:o}=n,l={root:["root"],container:["container",`scroll${lr(t)}`],paper:["paper",`paperScroll${lr(t)}`,`paperWidth${lr(String(i))}`,s&&"paperFullWidth",o&&"paperFullScreen"]};return Bo(l,ede,e)},ade=ur(pj,{name:"MuiDialog",slot:"Root",overridesResolver:(n,e)=>e.root})({"@media print":{position:"absolute !important"}}),lde=ur("div",{name:"MuiDialog",slot:"Container",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.container,e[`scroll${lr(t.scroll)}`]]}})(({ownerState:n})=>Je({height:"100%","@media print":{height:"auto"},outline:0},n.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},n.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),ude=ur(mP,{name:"MuiDialog",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`scrollPaper${lr(t.scroll)}`],e[`paperWidth${lr(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(({theme:n,ownerState:e})=>Je({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:n.breakpoints.unit==="px"?Math.max(n.breakpoints.values.xs,444):`max(${n.breakpoints.values.xs}${n.breakpoints.unit}, 444px)`,[`&.${L2.paperScrollBody}`]:{[n.breakpoints.down(Math.max(n.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${n.breakpoints.values[e.maxWidth]}${n.breakpoints.unit}`,[`&.${L2.paperScrollBody}`]:{[n.breakpoints.down(n.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${L2.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),cde=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiDialog"}),s=IR(),o={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":u,BackdropComponent:d,BackdropProps:p,children:_,className:v,disableEscapeKeyDown:b=!1,fullScreen:E=!1,fullWidth:C=!1,maxWidth:M="sm",onBackdropClick:I,onClose:L,open:O,PaperComponent:P=mP,PaperProps:B={},scroll:z="paper",TransitionComponent:G=uj,transitionDuration:j=o,TransitionProps:H}=i,Z=Er(i,ide),ae=Je({},i,{disableEscapeKeyDown:b,fullScreen:E,fullWidth:C,maxWidth:M,scroll:z}),J=ode(ae),te=ge.useRef(),he=$e=>{te.current=$e.target===$e.currentTarget},le=$e=>{te.current&&(te.current=null,I&&I($e),L&&L($e,"backdropClick"))},ce=$R(u),be=ge.useMemo(()=>({titleId:ce}),[ce]);return Pe.jsx(ade,Je({className:ri(J.root,v),closeAfterTransition:!0,components:{Backdrop:sde},componentsProps:{backdrop:Je({transitionDuration:j,as:d},p)},disableEscapeKeyDown:b,onClose:L,open:O,ref:t,onClick:le,ownerState:ae},Z,{children:Pe.jsx(G,Je({appear:!0,in:O,timeout:j,role:"presentation"},H,{children:Pe.jsx(lde,{className:ri(J.container),onMouseDown:he,ownerState:ae,children:Pe.jsx(ude,Je({as:P,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":ce},B,{className:ri(J.paper,B.className),ownerState:ae,children:Pe.jsx(rde.Provider,{value:be,children:_})}))})}))}))}),fj=cde,hde=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],dde=n=>{const{classes:e,disableUnderline:t}=n,s=Bo({root:["root",!t&&"underline"],input:["input"]},Vce,e);return Je({},e,s)},pde=ur(LR,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...kR(n,e),!t.disableUnderline&&e.underline]}})(({theme:n,ownerState:e})=>{var t;const i=n.palette.mode==="light",s=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return Je({position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o}},[`&.${Sb.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o},[`&.${Sb.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:u}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t=(n.vars||n).palette[e.color||"primary"])==null?void 0:t.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Sb.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Sb.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:s}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Sb.disabled}, .${Sb.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${Sb.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&Je({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),fde=ur(DR,{name:"MuiFilledInput",slot:"Input",overridesResolver:OR})(({theme:n,ownerState:e})=>Je({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),mj=ge.forwardRef(function(e,t){var i,s,o,l;const u=Xo({props:e,name:"MuiFilledInput"}),{components:d={},componentsProps:p,fullWidth:_=!1,inputComponent:v="input",multiline:b=!1,slotProps:E,slots:C={},type:M="text"}=u,I=Er(u,hde),L=Je({},u,{fullWidth:_,inputComponent:v,multiline:b,type:M}),O=dde(u),P={root:{ownerState:L},input:{ownerState:L}},B=E??p?af(P,E??p):P,z=(i=(s=C.root)!=null?s:d.Root)!=null?i:pde,G=(o=(l=C.input)!=null?l:d.Input)!=null?o:fde;return Pe.jsx(yP,Je({slots:{root:z,input:G},componentsProps:B,fullWidth:_,inputComponent:v,multiline:b,ref:t,type:M},I,{classes:O}))});mj.muiName="Input";const gj=mj;function mde(n){return So("MuiFormControl",n)}No("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const gde=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],_de=n=>{const{classes:e,margin:t,fullWidth:i}=n,s={root:["root",t!=="none"&&`margin${lr(t)}`,i&&"fullWidth"]};return Bo(s,mde,e)},yde=ur("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:n},e)=>Je({},e.root,e[`margin${lr(n.margin)}`],n.fullWidth&&e.fullWidth)})(({ownerState:n})=>Je({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},n.margin==="normal"&&{marginTop:16,marginBottom:8},n.margin==="dense"&&{marginTop:8,marginBottom:4},n.fullWidth&&{width:"100%"})),vde=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiFormControl"}),{children:s,className:o,color:l="primary",component:u="div",disabled:d=!1,error:p=!1,focused:_,fullWidth:v=!1,hiddenLabel:b=!1,margin:E="none",required:C=!1,size:M="medium",variant:I="outlined"}=i,L=Er(i,gde),O=Je({},i,{color:l,component:u,disabled:d,error:p,fullWidth:v,hiddenLabel:b,margin:E,required:C,size:M,variant:I}),P=_de(O),[B,z]=ge.useState(()=>{let he=!1;return s&&ge.Children.forEach(s,le=>{if(!hA(le,["Input","Select"]))return;const ce=hA(le,["Select"])?le.props.input:le;ce&&Lce(ce.props)&&(he=!0)}),he}),[G,j]=ge.useState(()=>{let he=!1;return s&&ge.Children.forEach(s,le=>{hA(le,["Input","Select"])&&(cI(le.props,!0)||cI(le.props.inputProps,!0))&&(he=!0)}),he}),[H,Z]=ge.useState(!1);d&&H&&Z(!1);const ae=_!==void 0&&!d?_:H;let J;const te=ge.useMemo(()=>({adornedStart:B,setAdornedStart:z,color:l,disabled:d,error:p,filled:G,focused:ae,fullWidth:v,hiddenLabel:b,size:M,onBlur:()=>{Z(!1)},onEmpty:()=>{j(!1)},onFilled:()=>{j(!0)},onFocus:()=>{Z(!0)},registerEffect:J,required:C,variant:I}),[B,l,d,p,G,ae,v,b,J,C,M,I]);return Pe.jsx(_P.Provider,{value:te,children:Pe.jsx(yde,Je({as:u,ownerState:O,className:ri(P.root,o),ref:t},L,{children:s}))})}),bde=vde,Tde=rle({createStyledComponent:ur("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root}),useThemeProps:n=>Xo({props:n,name:"MuiStack"})}),Qw=Tde;function Sde(n){return So("MuiFormControlLabel",n)}const Ede=No("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Qx=Ede,xde=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],wde=n=>{const{classes:e,disabled:t,labelPlacement:i,error:s,required:o}=n,l={root:["root",t&&"disabled",`labelPlacement${lr(i)}`,s&&"error",o&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",s&&"error"]};return Bo(l,Sde,e)},$de=ur("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${Qx.label}`]:e.label},e.root,e[`labelPlacement${lr(t.labelPlacement)}`]]}})(({theme:n,ownerState:e})=>Je({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Qx.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Qx.label}`]:{[`&.${Qx.disabled}`]:{color:(n.vars||n).palette.text.disabled}}})),Cde=ur("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${Qx.error}`]:{color:(n.vars||n).palette.error.main}})),Mde=ge.forwardRef(function(e,t){var i,s;const o=Xo({props:e,name:"MuiFormControlLabel"}),{className:l,componentsProps:u={},control:d,disabled:p,disableTypography:_,label:v,labelPlacement:b="end",required:E,slotProps:C={}}=o,M=Er(o,xde),I=dy(),L=(i=p??d.props.disabled)!=null?i:I==null?void 0:I.disabled,O=E??d.props.required,P={disabled:L,required:O};["checked","name","onChange","value","inputRef"].forEach(Z=>{typeof d.props[Z]>"u"&&typeof o[Z]<"u"&&(P[Z]=o[Z])});const B=Dv({props:o,muiFormControl:I,states:["error"]}),z=Je({},o,{disabled:L,labelPlacement:b,required:O,error:B.error}),G=wde(z),j=(s=C.typography)!=null?s:u.typography;let H=v;return H!=null&&H.type!==rE&&!_&&(H=Pe.jsx(rE,Je({component:"span"},j,{className:ri(G.label,j==null?void 0:j.className),children:H}))),Pe.jsxs($de,Je({className:ri(G.root,l),ownerState:z,ref:t},M,{children:[ge.cloneElement(d,P),O?Pe.jsxs(Qw,{display:"block",children:[H,Pe.jsxs(Cde,{ownerState:z,"aria-hidden":!0,className:G.asterisk,children:[" ","*"]})]}):H]}))}),_j=Mde;function Ade(n){return So("MuiFormGroup",n)}No("MuiFormGroup",["root","row","error"]);const Ide=["className","row"],Rde=n=>{const{classes:e,row:t,error:i}=n;return Bo({root:["root",t&&"row",i&&"error"]},Ade,e)},kde=ur("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.row&&e.row]}})(({ownerState:n})=>Je({display:"flex",flexDirection:"column",flexWrap:"wrap"},n.row&&{flexDirection:"row"})),Ode=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiFormGroup"}),{className:s,row:o=!1}=i,l=Er(i,Ide),u=dy(),d=Dv({props:i,muiFormControl:u,states:["error"]}),p=Je({},i,{row:o,error:d.error}),_=Rde(p);return Pe.jsx(kde,Je({className:ri(_.root,s),ownerState:p,ref:t},l))}),yj=Ode;function Lde(n){return So("MuiFormHelperText",n)}const Dde=No("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),a4=Dde;var l4;const Nde=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Bde=n=>{const{classes:e,contained:t,size:i,disabled:s,error:o,filled:l,focused:u,required:d}=n,p={root:["root",s&&"disabled",o&&"error",i&&`size${lr(i)}`,t&&"contained",u&&"focused",l&&"filled",d&&"required"]};return Bo(p,Lde,e)},Pde=ur("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${lr(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(({theme:n,ownerState:e})=>Je({color:(n.vars||n).palette.text.secondary},n.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${a4.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${a4.error}`]:{color:(n.vars||n).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),Fde=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiFormHelperText"}),{children:s,className:o,component:l="p"}=i,u=Er(i,Nde),d=dy(),p=Dv({props:i,muiFormControl:d,states:["variant","size","disabled","error","filled","focused","required"]}),_=Je({},i,{component:l,contained:p.variant==="filled"||p.variant==="outlined",variant:p.variant,size:p.size,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),v=Bde(_);return Pe.jsx(Pde,Je({as:l,ownerState:_,className:ri(v.root,o),ref:t},u,{children:s===" "?l4||(l4=Pe.jsx("span",{className:"notranslate",children:"​"})):s}))}),zde=Fde;function Ude(n){return So("MuiFormLabel",n)}const Hde=No("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),_w=Hde,Gde=["children","className","color","component","disabled","error","filled","focused","required"],Wde=n=>{const{classes:e,color:t,focused:i,disabled:s,error:o,filled:l,required:u}=n,d={root:["root",`color${lr(t)}`,s&&"disabled",o&&"error",l&&"filled",i&&"focused",u&&"required"],asterisk:["asterisk",o&&"error"]};return Bo(d,Ude,e)},Vde=ur("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:n},e)=>Je({},e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled)})(({theme:n,ownerState:e})=>Je({color:(n.vars||n).palette.text.secondary},n.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${_w.focused}`]:{color:(n.vars||n).palette[e.color].main},[`&.${_w.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${_w.error}`]:{color:(n.vars||n).palette.error.main}})),jde=ur("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${_w.error}`]:{color:(n.vars||n).palette.error.main}})),Xde=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiFormLabel"}),{children:s,className:o,component:l="label"}=i,u=Er(i,Gde),d=dy(),p=Dv({props:i,muiFormControl:d,states:["color","required","focused","disabled","error","filled"]}),_=Je({},i,{color:p.color||"primary",component:l,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),v=Wde(_);return Pe.jsxs(Vde,Je({as:l,ownerState:_,className:ri(v.root,o),ref:t},u,{children:[s,p.required&&Pe.jsxs(jde,{ownerState:_,"aria-hidden":!0,className:v.asterisk,children:[" ","*"]})]}))}),Yde=Xde,Kde=ge.createContext(),u4=Kde;function Jde(n){return So("MuiGrid",n)}const qde=[0,1,2,3,4,5,6,7,8,9,10],Qde=["column-reverse","column","row-reverse","row"],Zde=["nowrap","wrap-reverse","wrap"],xx=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],Zw=No("MuiGrid",["root","container","item","zeroMinWidth",...qde.map(n=>`spacing-xs-${n}`),...Qde.map(n=>`direction-xs-${n}`),...Zde.map(n=>`wrap-xs-${n}`),...xx.map(n=>`grid-xs-${n}`),...xx.map(n=>`grid-sm-${n}`),...xx.map(n=>`grid-md-${n}`),...xx.map(n=>`grid-lg-${n}`),...xx.map(n=>`grid-xl-${n}`)]),epe=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function HS(n){const e=parseFloat(n);return`${e}${String(n).replace(String(e),"")||"px"}`}function tpe({theme:n,ownerState:e}){let t;return n.breakpoints.keys.reduce((i,s)=>{let o={};if(e[s]&&(t=e[s]),!t)return i;if(t===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(t==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const l=h1({values:e.columns,breakpoints:n.breakpoints.values}),u=typeof l=="object"?l[s]:l;if(u==null)return i;const d=`${Math.round(t/u*1e8)/1e6}%`;let p={};if(e.container&&e.item&&e.columnSpacing!==0){const _=n.spacing(e.columnSpacing);if(_!=="0px"){const v=`calc(${d} + ${HS(_)})`;p={flexBasis:v,maxWidth:v}}}o=Je({flexBasis:d,flexGrow:0,maxWidth:d},p)}return n.breakpoints.values[s]===0?Object.assign(i,o):i[n.breakpoints.up(s)]=o,i},{})}function npe({theme:n,ownerState:e}){const t=h1({values:e.direction,breakpoints:n.breakpoints.values});return Vf({theme:n},t,i=>{const s={flexDirection:i};return i.indexOf("column")===0&&(s[`& > .${Zw.item}`]={maxWidth:"none"}),s})}function vj({breakpoints:n,values:e}){let t="";Object.keys(e).forEach(s=>{t===""&&e[s]!==0&&(t=s)});const i=Object.keys(n).sort((s,o)=>n[s]-n[o]);return i.slice(0,i.indexOf(t))}function rpe({theme:n,ownerState:e}){const{container:t,rowSpacing:i}=e;let s={};if(t&&i!==0){const o=h1({values:i,breakpoints:n.breakpoints.values});let l;typeof o=="object"&&(l=vj({breakpoints:n.breakpoints.values,values:o})),s=Vf({theme:n},o,(u,d)=>{var p;const _=n.spacing(u);return _!=="0px"?{marginTop:`-${HS(_)}`,[`& > .${Zw.item}`]:{paddingTop:HS(_)}}:(p=l)!=null&&p.includes(d)?{}:{marginTop:0,[`& > .${Zw.item}`]:{paddingTop:0}}})}return s}function ipe({theme:n,ownerState:e}){const{container:t,columnSpacing:i}=e;let s={};if(t&&i!==0){const o=h1({values:i,breakpoints:n.breakpoints.values});let l;typeof o=="object"&&(l=vj({breakpoints:n.breakpoints.values,values:o})),s=Vf({theme:n},o,(u,d)=>{var p;const _=n.spacing(u);return _!=="0px"?{width:`calc(100% + ${HS(_)})`,marginLeft:`-${HS(_)}`,[`& > .${Zw.item}`]:{paddingLeft:HS(_)}}:(p=l)!=null&&p.includes(d)?{}:{width:"100%",marginLeft:0,[`& > .${Zw.item}`]:{paddingLeft:0}}})}return s}function spe(n,e,t={}){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[t[`spacing-xs-${String(n)}`]];const i=[];return e.forEach(s=>{const o=n[s];Number(o)>0&&i.push(t[`spacing-${s}-${String(o)}`])}),i}const ope=ur("div",{name:"MuiGrid",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n,{container:i,direction:s,item:o,spacing:l,wrap:u,zeroMinWidth:d,breakpoints:p}=t;let _=[];i&&(_=spe(l,p,e));const v=[];return p.forEach(b=>{const E=t[b];E&&v.push(e[`grid-${b}-${String(E)}`])}),[e.root,i&&e.container,o&&e.item,d&&e.zeroMinWidth,..._,s!=="row"&&e[`direction-xs-${String(s)}`],u!=="wrap"&&e[`wrap-xs-${String(u)}`],...v]}})(({ownerState:n})=>Je({boxSizing:"border-box"},n.container&&{display:"flex",flexWrap:"wrap",width:"100%"},n.item&&{margin:0},n.zeroMinWidth&&{minWidth:0},n.wrap!=="wrap"&&{flexWrap:n.wrap}),npe,rpe,ipe,tpe);function ape(n,e){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[`spacing-xs-${String(n)}`];const t=[];return e.forEach(i=>{const s=n[i];if(Number(s)>0){const o=`spacing-${i}-${String(s)}`;t.push(o)}}),t}const lpe=n=>{const{classes:e,container:t,direction:i,item:s,spacing:o,wrap:l,zeroMinWidth:u,breakpoints:d}=n;let p=[];t&&(p=ape(o,d));const _=[];d.forEach(b=>{const E=n[b];E&&_.push(`grid-${b}-${String(E)}`)});const v={root:["root",t&&"container",s&&"item",u&&"zeroMinWidth",...p,i!=="row"&&`direction-xs-${String(i)}`,l!=="wrap"&&`wrap-xs-${String(l)}`,..._]};return Bo(v,Jde,e)},upe=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiGrid"}),{breakpoints:s}=IR(),o=O$(i),{className:l,columns:u,columnSpacing:d,component:p="div",container:_=!1,direction:v="row",item:b=!1,rowSpacing:E,spacing:C=0,wrap:M="wrap",zeroMinWidth:I=!1}=o,L=Er(o,epe),O=E||C,P=d||C,B=ge.useContext(u4),z=_?u||12:B,G={},j=Je({},L);s.keys.forEach(ae=>{L[ae]!=null&&(G[ae]=L[ae],delete j[ae])});const H=Je({},o,{columns:z,container:_,direction:v,item:b,rowSpacing:O,columnSpacing:P,wrap:M,zeroMinWidth:I,spacing:C},G,{breakpoints:s.keys}),Z=lpe(H);return Pe.jsx(u4.Provider,{value:z,children:Pe.jsx(ope,Je({ownerState:H,className:ri(Z.root,l),as:p,ref:t},j))})}),Ih=upe,cpe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function bD(n){return`scale(${n}, ${n**2})`}const hpe={entering:{opacity:1,transform:bD(1)},entered:{opacity:1,transform:"none"}},D2=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),bj=ge.forwardRef(function(e,t){const{addEndListener:i,appear:s=!0,children:o,easing:l,in:u,onEnter:d,onEntered:p,onEntering:_,onExit:v,onExited:b,onExiting:E,style:C,timeout:M="auto",TransitionComponent:I=oj}=e,L=Er(e,cpe),O=V7(),P=ge.useRef(),B=IR(),z=ge.useRef(null),G=cf(z,o.ref,t),j=ce=>be=>{if(ce){const $e=z.current;be===void 0?ce($e):ce($e,be)}},H=j(_),Z=j((ce,be)=>{aj(ce);const{duration:$e,delay:q,easing:oe}=lI({style:C,timeout:M,easing:l},{mode:"enter"});let se;M==="auto"?(se=B.transitions.getAutoHeightDuration(ce.clientHeight),P.current=se):se=$e,ce.style.transition=[B.transitions.create("opacity",{duration:se,delay:q}),B.transitions.create("transform",{duration:D2?se:se*.666,delay:q,easing:oe})].join(","),d&&d(ce,be)}),ae=j(p),J=j(E),te=j(ce=>{const{duration:be,delay:$e,easing:q}=lI({style:C,timeout:M,easing:l},{mode:"exit"});let oe;M==="auto"?(oe=B.transitions.getAutoHeightDuration(ce.clientHeight),P.current=oe):oe=be,ce.style.transition=[B.transitions.create("opacity",{duration:oe,delay:$e}),B.transitions.create("transform",{duration:D2?oe:oe*.666,delay:D2?$e:$e||oe*.333,easing:q})].join(","),ce.style.opacity=0,ce.style.transform=bD(.75),v&&v(ce)}),he=j(b),le=ce=>{M==="auto"&&O.start(P.current||0,ce),i&&i(z.current,ce)};return Pe.jsx(I,Je({appear:s,in:u,nodeRef:z,onEnter:Z,onEntered:ae,onEntering:H,onExit:te,onExited:he,onExiting:J,addEndListener:le,timeout:M==="auto"?null:M},L,{children:(ce,be)=>ge.cloneElement(o,Je({style:Je({opacity:0,transform:bD(.75),visibility:ce==="exited"&&!u?"hidden":void 0},hpe[ce],C,o.props.style),ref:G},be))}))});bj.muiSupportAuto=!0;const dpe=bj,ppe=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],fpe=n=>{const{classes:e,disableUnderline:t}=n,s=Bo({root:["root",!t&&"underline"],input:["input"]},Uce,e);return Je({},e,s)},mpe=ur(LR,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...kR(n,e),!t.disableUnderline&&e.underline]}})(({theme:n,ownerState:e})=>{let i=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(i=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),Je({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Ex.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Ex.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Ex.disabled}, .${Ex.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${i}`}},[`&.${Ex.disabled}:before`]:{borderBottomStyle:"dotted"}})}),gpe=ur(DR,{name:"MuiInput",slot:"Input",overridesResolver:OR})({}),Tj=ge.forwardRef(function(e,t){var i,s,o,l;const u=Xo({props:e,name:"MuiInput"}),{disableUnderline:d,components:p={},componentsProps:_,fullWidth:v=!1,inputComponent:b="input",multiline:E=!1,slotProps:C,slots:M={},type:I="text"}=u,L=Er(u,ppe),O=fpe(u),B={root:{ownerState:{disableUnderline:d}}},z=C??_?af(C??_,B):B,G=(i=(s=M.root)!=null?s:p.Root)!=null?i:mpe,j=(o=(l=M.input)!=null?l:p.Input)!=null?o:gpe;return Pe.jsx(yP,Je({slots:{root:G,input:j},slotProps:z,fullWidth:v,inputComponent:b,multiline:E,ref:t,type:I},L,{classes:O}))});Tj.muiName="Input";const vP=Tj;function _pe(n){return So("MuiInputLabel",n)}No("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const ype=["disableAnimation","margin","shrink","variant","className"],vpe=n=>{const{classes:e,formControl:t,size:i,shrink:s,disableAnimation:o,variant:l,required:u}=n,d={root:["root",t&&"formControl",!o&&"animated",s&&"shrink",i&&i!=="normal"&&`size${lr(i)}`,l],asterisk:[u&&"asterisk"]},p=Bo(d,_pe,e);return Je({},e,p)},bpe=ur(Yde,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${_w.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(({theme:n,ownerState:e})=>Je({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})},e.variant==="filled"&&Je({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&Je({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&Je({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Tpe=ge.forwardRef(function(e,t){const i=Xo({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,shrink:o,className:l}=i,u=Er(i,ype),d=dy();let p=o;typeof p>"u"&&d&&(p=d.filled||d.focused||d.adornedStart);const _=Dv({props:i,muiFormControl:d,states:["size","variant","required","focused"]}),v=Je({},i,{disableAnimation:s,formControl:d,shrink:p,size:_.size,variant:_.variant,required:_.required,focused:_.focused}),b=vpe(v);return Pe.jsx(bpe,Je({"data-shrink":p,ownerState:v,ref:t,className:ri(b.root,l)},u,{classes:b}))}),Spe=Tpe,Epe=ge.createContext({}),xpe=Epe;function wpe(n){return So("MuiList",n)}No("MuiList",["root","padding","dense","subheader"]);const $pe=["children","className","component","dense","disablePadding","subheader"],Cpe=n=>{const{classes:e,disablePadding:t,dense:i,subheader:s}=n;return Bo({root:["root",!t&&"padding",i&&"dense",s&&"subheader"]},wpe,e)},Mpe=ur("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})(({ownerState:n})=>Je({listStyle:"none",margin:0,padding:0,position:"relative"},!n.disablePadding&&{paddingTop:8,paddingBottom:8},n.subheader&&{paddingTop:0})),Ape=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiList"}),{children:s,className:o,component:l="ul",dense:u=!1,disablePadding:d=!1,subheader:p}=i,_=Er(i,$pe),v=ge.useMemo(()=>({dense:u}),[u]),b=Je({},i,{component:l,dense:u,disablePadding:d}),E=Cpe(b);return Pe.jsx(xpe.Provider,{value:v,children:Pe.jsxs(Mpe,Je({as:l,className:ri(E.root,o),ref:t,ownerState:b},_,{children:[p,s]}))})}),Ipe=Ape,Rpe=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function N2(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function c4(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function Sj(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.indexOf(e.keys.join(""))===0}function wx(n,e,t,i,s,o){let l=!1,u=s(n,e,e?t:!1);for(;u;){if(u===n.firstChild){if(l)return!1;l=!0}const d=i?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!Sj(u,o)||d)u=s(n,u,t);else return u.focus(),!0}return!1}const kpe=ge.forwardRef(function(e,t){const{actions:i,autoFocus:s=!1,autoFocusItem:o=!1,children:l,className:u,disabledItemsFocusable:d=!1,disableListWrap:p=!1,onKeyDown:_,variant:v="selectedMenu"}=e,b=Er(e,Rpe),E=ge.useRef(null),C=ge.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Ev(()=>{s&&E.current.focus()},[s]),ge.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(P,{direction:B})=>{const z=!E.current.style.width;if(P.clientHeight<E.current.clientHeight&&z){const G=`${X7(Gf(P))}px`;E.current.style[B==="rtl"?"paddingLeft":"paddingRight"]=G,E.current.style.width=`calc(100% + ${G})`}return E.current}}),[]);const M=P=>{const B=E.current,z=P.key,G=Gf(B).activeElement;if(z==="ArrowDown")P.preventDefault(),wx(B,G,p,d,N2);else if(z==="ArrowUp")P.preventDefault(),wx(B,G,p,d,c4);else if(z==="Home")P.preventDefault(),wx(B,null,p,d,N2);else if(z==="End")P.preventDefault(),wx(B,null,p,d,c4);else if(z.length===1){const j=C.current,H=z.toLowerCase(),Z=performance.now();j.keys.length>0&&(Z-j.lastTime>500?(j.keys=[],j.repeating=!0,j.previousKeyMatched=!0):j.repeating&&H!==j.keys[0]&&(j.repeating=!1)),j.lastTime=Z,j.keys.push(H);const ae=G&&!j.repeating&&Sj(G,j);j.previousKeyMatched&&(ae||wx(B,G,!1,d,N2,j))?P.preventDefault():j.previousKeyMatched=!1}_&&_(P)},I=cf(E,t);let L=-1;ge.Children.forEach(l,(P,B)=>{if(!ge.isValidElement(P)){L===B&&(L+=1,L>=l.length&&(L=-1));return}P.props.disabled||(v==="selectedMenu"&&P.props.selected||L===-1)&&(L=B),L===B&&(P.props.disabled||P.props.muiSkipListHighlight||P.type.muiSkipListHighlight)&&(L+=1,L>=l.length&&(L=-1))});const O=ge.Children.map(l,(P,B)=>{if(B===L){const z={};return o&&(z.autoFocus=!0),P.props.tabIndex===void 0&&v==="selectedMenu"&&(z.tabIndex=0),ge.cloneElement(P,z)}return P});return Pe.jsx(Ipe,Je({role:"menu",ref:I,className:u,onKeyDown:M,tabIndex:s?0:-1},b,{children:O}))}),Ope=kpe;function Lpe(n){return So("MuiPopover",n)}No("MuiPopover",["root","paper"]);const Dpe=["onEntering"],Npe=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Bpe=["slotProps"];function h4(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function d4(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function p4(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function B2(n){return typeof n=="function"?n():n}const Ppe=n=>{const{classes:e}=n;return Bo({root:["root"],paper:["paper"]},Lpe,e)},Fpe=ur(pj,{name:"MuiPopover",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Ej=ur(mP,{name:"MuiPopover",slot:"Paper",overridesResolver:(n,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),zpe=ge.forwardRef(function(e,t){var i,s,o;const l=Xo({props:e,name:"MuiPopover"}),{action:u,anchorEl:d,anchorOrigin:p={vertical:"top",horizontal:"left"},anchorPosition:_,anchorReference:v="anchorEl",children:b,className:E,container:C,elevation:M=8,marginThreshold:I=16,open:L,PaperProps:O={},slots:P,slotProps:B,transformOrigin:z={vertical:"top",horizontal:"left"},TransitionComponent:G=dpe,transitionDuration:j="auto",TransitionProps:{onEntering:H}={},disableScrollLock:Z=!1}=l,ae=Er(l.TransitionProps,Dpe),J=Er(l,Npe),te=(i=B==null?void 0:B.paper)!=null?i:O,he=ge.useRef(),le=cf(he,te.ref),ce=Je({},l,{anchorOrigin:p,anchorReference:v,elevation:M,marginThreshold:I,externalPaperSlotProps:te,transformOrigin:z,TransitionComponent:G,transitionDuration:j,TransitionProps:ae}),be=Ppe(ce),$e=ge.useCallback(()=>{if(v==="anchorPosition")return _;const je=B2(d),tt=(je&&je.nodeType===1?je:Gf(he.current).body).getBoundingClientRect();return{top:tt.top+h4(tt,p.vertical),left:tt.left+d4(tt,p.horizontal)}},[d,p.horizontal,p.vertical,_,v]),q=ge.useCallback(je=>({vertical:h4(je,z.vertical),horizontal:d4(je,z.horizontal)}),[z.horizontal,z.vertical]),oe=ge.useCallback(je=>{const nt={width:je.offsetWidth,height:je.offsetHeight},tt=q(nt);if(v==="none")return{top:null,left:null,transformOrigin:p4(tt)};const Dt=$e();let Rt=Dt.top-tt.vertical,yt=Dt.left-tt.horizontal;const Ct=Rt+nt.height,Mt=yt+nt.width,mt=xv(B2(d)),xe=mt.innerHeight-I,ie=mt.innerWidth-I;if(I!==null&&Rt<I){const we=Rt-I;Rt-=we,tt.vertical+=we}else if(I!==null&&Ct>xe){const we=Ct-xe;Rt-=we,tt.vertical+=we}if(I!==null&&yt<I){const we=yt-I;yt-=we,tt.horizontal+=we}else if(Mt>ie){const we=Mt-ie;yt-=we,tt.horizontal+=we}return{top:`${Math.round(Rt)}px`,left:`${Math.round(yt)}px`,transformOrigin:p4(tt)}},[d,v,$e,q,I]),[se,pe]=ge.useState(L),Se=ge.useCallback(()=>{const je=he.current;if(!je)return;const nt=oe(je);nt.top!==null&&(je.style.top=nt.top),nt.left!==null&&(je.style.left=nt.left),je.style.transformOrigin=nt.transformOrigin,pe(!0)},[oe]);ge.useEffect(()=>(Z&&window.addEventListener("scroll",Se),()=>window.removeEventListener("scroll",Se)),[d,Z,Se]);const Fe=(je,nt)=>{H&&H(je,nt),Se()},Re=()=>{pe(!1)};ge.useEffect(()=>{L&&Se()}),ge.useImperativeHandle(u,()=>L?{updatePosition:()=>{Se()}}:null,[L,Se]),ge.useEffect(()=>{if(!L)return;const je=lP(()=>{Se()}),nt=xv(d);return nt.addEventListener("resize",je),()=>{je.clear(),nt.removeEventListener("resize",je)}},[d,L,Se]);let qe=j;j==="auto"&&!G.muiSupportAuto&&(qe=void 0);const Ne=C||(d?Gf(B2(d)).body:void 0),it=(s=P==null?void 0:P.root)!=null?s:Fpe,st=(o=P==null?void 0:P.paper)!=null?o:Ej,pt=nE({elementType:st,externalSlotProps:Je({},te,{style:se?te.style:Je({},te.style,{opacity:0})}),additionalProps:{elevation:M,ref:le},ownerState:ce,className:ri(be.paper,te==null?void 0:te.className)}),dt=nE({elementType:it,externalSlotProps:(B==null?void 0:B.root)||{},externalForwardedProps:J,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:Ne,open:L},ownerState:ce,className:ri(be.root,E)}),{slotProps:Ue}=dt,Ae=Er(dt,Bpe);return Pe.jsx(it,Je({},Ae,!uI(it)&&{slotProps:Ue,disableScrollLock:Z},{children:Pe.jsx(G,Je({appear:!0,in:L,onEntering:Fe,onExited:Re,timeout:qe},ae,{children:Pe.jsx(st,Je({},pt,{children:b}))}))}))}),Upe=zpe;function Hpe(n){return So("MuiMenu",n)}No("MuiMenu",["root","paper","list"]);const Gpe=["onEntering"],Wpe=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Vpe={vertical:"top",horizontal:"right"},jpe={vertical:"top",horizontal:"left"},Xpe=n=>{const{classes:e}=n;return Bo({root:["root"],paper:["paper"],list:["list"]},Hpe,e)},Ype=ur(Upe,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Kpe=ur(Ej,{name:"MuiMenu",slot:"Paper",overridesResolver:(n,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Jpe=ur(Ope,{name:"MuiMenu",slot:"List",overridesResolver:(n,e)=>e.list})({outline:0}),qpe=ge.forwardRef(function(e,t){var i,s;const o=Xo({props:e,name:"MuiMenu"}),{autoFocus:l=!0,children:u,className:d,disableAutoFocusItem:p=!1,MenuListProps:_={},onClose:v,open:b,PaperProps:E={},PopoverClasses:C,transitionDuration:M="auto",TransitionProps:{onEntering:I}={},variant:L="selectedMenu",slots:O={},slotProps:P={}}=o,B=Er(o.TransitionProps,Gpe),z=Er(o,Wpe),G=Uae(),j=Je({},o,{autoFocus:l,disableAutoFocusItem:p,MenuListProps:_,onEntering:I,PaperProps:E,transitionDuration:M,TransitionProps:B,variant:L}),H=Xpe(j),Z=l&&!p&&b,ae=ge.useRef(null),J=(q,oe)=>{ae.current&&ae.current.adjustStyleForScrollbar(q,{direction:G?"rtl":"ltr"}),I&&I(q,oe)},te=q=>{q.key==="Tab"&&(q.preventDefault(),v&&v(q,"tabKeyDown"))};let he=-1;ge.Children.map(u,(q,oe)=>{ge.isValidElement(q)&&(q.props.disabled||(L==="selectedMenu"&&q.props.selected||he===-1)&&(he=oe))});const le=(i=O.paper)!=null?i:Kpe,ce=(s=P.paper)!=null?s:E,be=nE({elementType:O.root,externalSlotProps:P.root,ownerState:j,className:[H.root,d]}),$e=nE({elementType:le,externalSlotProps:ce,ownerState:j,className:H.paper});return Pe.jsx(Ype,Je({onClose:v,anchorOrigin:{vertical:"bottom",horizontal:G?"right":"left"},transformOrigin:G?Vpe:jpe,slots:{paper:le,root:O.root},slotProps:{root:be,paper:$e},open:b,ref:t,transitionDuration:M,TransitionProps:Je({onEntering:J},B),ownerState:j},z,{classes:C,children:Pe.jsx(Jpe,Je({onKeyDown:te,actions:ae,autoFocus:l&&(he===-1||p),autoFocusItem:Z,variant:L},_,{className:ri(H.list,_.className),children:u}))}))}),Qpe=qpe;function Zpe(n){return So("MuiNativeSelect",n)}const efe=No("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),bP=efe,tfe=["className","disabled","error","IconComponent","inputRef","variant"],nfe=n=>{const{classes:e,variant:t,disabled:i,multiple:s,open:o,error:l}=n,u={select:["select",t,i&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${lr(t)}`,o&&"iconOpen",i&&"disabled"]};return Bo(u,Zpe,e)},xj=({ownerState:n,theme:e})=>Je({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":Je({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${bP.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},n.variant==="filled"&&{"&&&":{paddingRight:32}},n.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),rfe=ur("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Nm,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${bP.multiple}`]:e.multiple}]}})(xj),wj=({ownerState:n,theme:e})=>Je({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${bP.disabled}`]:{color:(e.vars||e).palette.action.disabled}},n.open&&{transform:"rotate(180deg)"},n.variant==="filled"&&{right:7},n.variant==="outlined"&&{right:7}),ife=ur("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${lr(t.variant)}`],t.open&&e.iconOpen]}})(wj),sfe=ge.forwardRef(function(e,t){const{className:i,disabled:s,error:o,IconComponent:l,inputRef:u,variant:d="standard"}=e,p=Er(e,tfe),_=Je({},e,{disabled:s,variant:d,error:o}),v=nfe(_);return Pe.jsxs(ge.Fragment,{children:[Pe.jsx(rfe,Je({ownerState:_,className:ri(v.select,i),disabled:s,ref:u||t},p)),e.multiple?null:Pe.jsx(ife,{as:l,ownerState:_,className:v.icon})]})}),ofe=sfe;var f4;const afe=["children","classes","className","label","notched"],lfe=ur("fieldset",{shouldForwardProp:Nm})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),ufe=ur("legend",{shouldForwardProp:Nm})(({ownerState:n,theme:e})=>Je({float:"unset",width:"auto",overflow:"hidden"},!n.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},n.withLabel&&Je({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},n.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function cfe(n){const{className:e,label:t,notched:i}=n,s=Er(n,afe),o=t!=null&&t!=="",l=Je({},n,{notched:i,withLabel:o});return Pe.jsx(lfe,Je({"aria-hidden":!0,className:e,ownerState:l},s,{children:Pe.jsx(ufe,{ownerState:l,children:o?Pe.jsx("span",{children:t}):f4||(f4=Pe.jsx("span",{className:"notranslate",children:"​"}))})}))}const hfe=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],dfe=n=>{const{classes:e}=n,i=Bo({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Gce,e);return Je({},e,i)},pfe=ur(LR,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:kR})(({theme:n,ownerState:e})=>{const t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return Je({position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Fy.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Fy.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${Fy.focused} .${Fy.notchedOutline}`]:{borderColor:(n.vars||n).palette[e.color].main,borderWidth:2},[`&.${Fy.error} .${Fy.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${Fy.disabled} .${Fy.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&Je({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),ffe=ur(cfe,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,e)=>e.notchedOutline})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),mfe=ur(DR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:OR})(({theme:n,ownerState:e})=>Je({padding:"16.5px 14px"},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),$j=ge.forwardRef(function(e,t){var i,s,o,l,u;const d=Xo({props:e,name:"MuiOutlinedInput"}),{components:p={},fullWidth:_=!1,inputComponent:v="input",label:b,multiline:E=!1,notched:C,slots:M={},type:I="text"}=d,L=Er(d,hfe),O=dfe(d),P=dy(),B=Dv({props:d,muiFormControl:P,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),z=Je({},d,{color:B.color||"primary",disabled:B.disabled,error:B.error,focused:B.focused,formControl:P,fullWidth:_,hiddenLabel:B.hiddenLabel,multiline:E,size:B.size,type:I}),G=(i=(s=M.root)!=null?s:p.Root)!=null?i:pfe,j=(o=(l=M.input)!=null?l:p.Input)!=null?o:mfe;return Pe.jsx(yP,Je({slots:{root:G,input:j},renderSuffix:H=>Pe.jsx(ffe,{ownerState:z,className:O.notchedOutline,label:b!=null&&b!==""&&B.required?u||(u=Pe.jsxs(ge.Fragment,{children:[b," ","*"]})):b,notched:typeof C<"u"?C:!!(H.startAdornment||H.filled||H.focused)}),fullWidth:_,inputComponent:v,multiline:E,ref:t,type:I},L,{classes:Je({},O,{notchedOutline:null})}))});$j.muiName="Input";const Cj=$j;function gfe(n){return So("MuiSelect",n)}const $x=No("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var m4;const _fe=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],yfe=ur("div",{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${$x.select}`]:e.select},{[`&.${$x.select}`]:e[t.variant]},{[`&.${$x.error}`]:e.error},{[`&.${$x.multiple}`]:e.multiple}]}})(xj,{[`&.${$x.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),vfe=ur("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${lr(t.variant)}`],t.open&&e.iconOpen]}})(wj),bfe=ur("input",{shouldForwardProp:n=>sj(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(n,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function g4(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function Tfe(n){return n==null||typeof n=="string"&&!n.trim()}const Sfe=n=>{const{classes:e,variant:t,disabled:i,multiple:s,open:o,error:l}=n,u={select:["select",t,i&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${lr(t)}`,o&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return Bo(u,gfe,e)},Efe=ge.forwardRef(function(e,t){var i;const{"aria-describedby":s,"aria-label":o,autoFocus:l,autoWidth:u,children:d,className:p,defaultOpen:_,defaultValue:v,disabled:b,displayEmpty:E,error:C=!1,IconComponent:M,inputRef:I,labelId:L,MenuProps:O={},multiple:P,name:B,onBlur:z,onChange:G,onClose:j,onFocus:H,onOpen:Z,open:ae,readOnly:J,renderValue:te,SelectDisplayProps:he={},tabIndex:le,value:ce,variant:be="standard"}=e,$e=Er(e,_fe),[q,oe]=sI({controlled:ce,default:v,name:"Select"}),[se,pe]=sI({controlled:ae,default:_,name:"Select"}),Se=ge.useRef(null),Fe=ge.useRef(null),[Re,qe]=ge.useState(null),{current:Ne}=ge.useRef(ae!=null),[it,st]=ge.useState(),pt=cf(t,I),dt=ge.useCallback(fe=>{Fe.current=fe,fe&&qe(fe)},[]),Ue=Re==null?void 0:Re.parentNode;ge.useImperativeHandle(pt,()=>({focus:()=>{Fe.current.focus()},node:Se.current,value:q}),[q]),ge.useEffect(()=>{_&&se&&Re&&!Ne&&(st(u?null:Ue.clientWidth),Fe.current.focus())},[Re,u]),ge.useEffect(()=>{l&&Fe.current.focus()},[l]),ge.useEffect(()=>{if(!L)return;const fe=Gf(Fe.current).getElementById(L);if(fe){const Ie=()=>{getSelection().isCollapsed&&Fe.current.focus()};return fe.addEventListener("click",Ie),()=>{fe.removeEventListener("click",Ie)}}},[L]);const Ae=(fe,Ie)=>{fe?Z&&Z(Ie):j&&j(Ie),Ne||(st(u?null:Ue.clientWidth),pe(fe))},je=fe=>{fe.button===0&&(fe.preventDefault(),Fe.current.focus(),Ae(!0,fe))},nt=fe=>{Ae(!1,fe)},tt=ge.Children.toArray(d),Dt=fe=>{const Ie=tt.find(Ye=>Ye.props.value===fe.target.value);Ie!==void 0&&(oe(Ie.props.value),G&&G(fe,Ie))},Rt=fe=>Ie=>{let Ye;if(Ie.currentTarget.hasAttribute("tabindex")){if(P){Ye=Array.isArray(q)?q.slice():[];const Gt=q.indexOf(fe.props.value);Gt===-1?Ye.push(fe.props.value):Ye.splice(Gt,1)}else Ye=fe.props.value;if(fe.props.onClick&&fe.props.onClick(Ie),q!==Ye&&(oe(Ye),G)){const Gt=Ie.nativeEvent||Ie,He=new Gt.constructor(Gt.type,Gt);Object.defineProperty(He,"target",{writable:!0,value:{value:Ye,name:B}}),G(He,fe)}P||Ae(!1,Ie)}},yt=fe=>{J||[" ","ArrowUp","ArrowDown","Enter"].indexOf(fe.key)!==-1&&(fe.preventDefault(),Ae(!0,fe))},Ct=Re!==null&&se,Mt=fe=>{!Ct&&z&&(Object.defineProperty(fe,"target",{writable:!0,value:{value:q,name:B}}),z(fe))};delete $e["aria-invalid"];let mt,xe;const ie=[];let we=!1;(cI({value:q})||E)&&(te?mt=te(q):we=!0);const ct=tt.map(fe=>{if(!ge.isValidElement(fe))return null;let Ie;if(P){if(!Array.isArray(q))throw new Error($1(2));Ie=q.some(Ye=>g4(Ye,fe.props.value)),Ie&&we&&ie.push(fe.props.children)}else Ie=g4(q,fe.props.value),Ie&&we&&(xe=fe.props.children);return ge.cloneElement(fe,{"aria-selected":Ie?"true":"false",onClick:Rt(fe),onKeyUp:Ye=>{Ye.key===" "&&Ye.preventDefault(),fe.props.onKeyUp&&fe.props.onKeyUp(Ye)},role:"option",selected:Ie,value:void 0,"data-value":fe.props.value})});we&&(P?ie.length===0?mt=null:mt=ie.reduce((fe,Ie,Ye)=>(fe.push(Ie),Ye<ie.length-1&&fe.push(", "),fe),[]):mt=xe);let Tt=it;!u&&Ne&&Re&&(Tt=Ue.clientWidth);let At;typeof le<"u"?At=le:At=b?null:0;const ft=he.id||(B?`mui-component-select-${B}`:void 0),Ke=Je({},e,{variant:be,value:q,open:Ct,error:C}),Oe=Sfe(Ke),Q=Je({},O.PaperProps,(i=O.slotProps)==null?void 0:i.paper),ne=$R();return Pe.jsxs(ge.Fragment,{children:[Pe.jsx(yfe,Je({ref:dt,tabIndex:At,role:"combobox","aria-controls":ne,"aria-disabled":b?"true":void 0,"aria-expanded":Ct?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[L,ft].filter(Boolean).join(" ")||void 0,"aria-describedby":s,onKeyDown:yt,onMouseDown:b||J?null:je,onBlur:Mt,onFocus:H},he,{ownerState:Ke,className:ri(he.className,Oe.select,p),id:ft,children:Tfe(mt)?m4||(m4=Pe.jsx("span",{className:"notranslate",children:"​"})):mt})),Pe.jsx(bfe,Je({"aria-invalid":C,value:Array.isArray(q)?q.join(","):q,name:B,ref:Se,"aria-hidden":!0,onChange:Dt,tabIndex:-1,disabled:b,className:Oe.nativeInput,autoFocus:l,ownerState:Ke},$e)),Pe.jsx(vfe,{as:M,className:Oe.icon,ownerState:Ke}),Pe.jsx(Qpe,Je({id:`menu-${B||""}`,anchorEl:Ue,open:Ct,onClose:nt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},O,{MenuListProps:Je({"aria-labelledby":L,role:"listbox","aria-multiselectable":P?"true":void 0,disableListWrap:!0,id:ne},O.MenuListProps),slotProps:Je({},O.slotProps,{paper:Je({},Q,{style:Je({minWidth:Tt},Q!=null?Q.style:null)})}),children:ct}))]})}),xfe=Efe,wfe=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],$fe=["root"],Cfe=n=>{const{classes:e}=n;return e},TP={name:"MuiSelect",overridesResolver:(n,e)=>e.root,shouldForwardProp:n=>Nm(n)&&n!=="variant",slot:"Root"},Mfe=ur(vP,TP)(""),Afe=ur(Cj,TP)(""),Ife=ur(gj,TP)(""),Mj=ge.forwardRef(function(e,t){const i=Xo({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:o,classes:l={},className:u,defaultOpen:d=!1,displayEmpty:p=!1,IconComponent:_=Xce,id:v,input:b,inputProps:E,label:C,labelId:M,MenuProps:I,multiple:L=!1,native:O=!1,onClose:P,onOpen:B,open:z,renderValue:G,SelectDisplayProps:j,variant:H="outlined"}=i,Z=Er(i,wfe),ae=O?ofe:xfe,J=dy(),te=Dv({props:i,muiFormControl:J,states:["variant","error"]}),he=te.variant||H,le=Je({},i,{variant:he,classes:l}),ce=Cfe(le),be=Er(ce,$fe),$e=b||{standard:Pe.jsx(Mfe,{ownerState:le}),outlined:Pe.jsx(Afe,{label:C,ownerState:le}),filled:Pe.jsx(Ife,{ownerState:le})}[he],q=cf(t,$e.ref);return Pe.jsx(ge.Fragment,{children:ge.cloneElement($e,Je({inputComponent:ae,inputProps:Je({children:o,error:te.error,IconComponent:_,variant:he,type:void 0,multiple:L},O?{id:v}:{autoWidth:s,defaultOpen:d,displayEmpty:p,labelId:M,MenuProps:I,onClose:P,onOpen:B,open:z,renderValue:G,SelectDisplayProps:Je({id:v},j)},E,{classes:E?af(be,E.classes):be},b?b.props.inputProps:{})},(L&&O||p)&&he==="outlined"?{notched:!0}:{},{ref:q,className:ri($e.props.className,u,ce.root)},!b&&{variant:he},Z))})});Mj.muiName="Select";const Rfe=Mj;function kfe(n){return So("MuiSwitch",n)}const qp=No("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Ofe=["className","color","edge","size","sx"],Lfe=_ue(),Dfe=n=>{const{classes:e,edge:t,size:i,color:s,checked:o,disabled:l}=n,u={root:["root",t&&`edge${lr(t)}`,`size${lr(i)}`],switchBase:["switchBase",`color${lr(s)}`,o&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},d=Bo(u,kfe,e);return Je({},e,d)},Nfe=ur("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.edge&&e[`edge${lr(t.edge)}`],e[`size${lr(t.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${qp.thumb}`]:{width:16,height:16},[`& .${qp.switchBase}`]:{padding:4,[`&.${qp.checked}`]:{transform:"translateX(16px)"}}}}]}),Bfe=ur(hj,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.switchBase,{[`& .${qp.input}`]:e.input},t.color!=="default"&&e[`color${lr(t.color)}`]]}})(({theme:n})=>({position:"absolute",top:0,left:0,zIndex:1,color:n.vars?n.vars.palette.Switch.defaultColor:`${n.palette.mode==="light"?n.palette.common.white:n.palette.grey[300]}`,transition:n.transitions.create(["left","transform"],{duration:n.transitions.duration.shortest}),[`&.${qp.checked}`]:{transform:"translateX(20px)"},[`&.${qp.disabled}`]:{color:n.vars?n.vars.palette.Switch.defaultDisabledColor:`${n.palette.mode==="light"?n.palette.grey[100]:n.palette.grey[600]}`},[`&.${qp.checked} + .${qp.track}`]:{opacity:.5},[`&.${qp.disabled} + .${qp.track}`]:{opacity:n.vars?n.vars.opacity.switchTrackDisabled:`${n.palette.mode==="light"?.12:.2}`},[`& .${qp.input}`]:{left:"-100%",width:"300%"}}),({theme:n})=>({"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Xg(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(n.palette).filter(([,e])=>e.main&&e.light).map(([e])=>({props:{color:e},style:{[`&.${qp.checked}`]:{color:(n.vars||n).palette[e].main,"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Xg(n.palette[e].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${qp.disabled}`]:{color:n.vars?n.vars.palette.Switch[`${e}DisabledColor`]:`${n.palette.mode==="light"?q7(n.palette[e].main,.62):J7(n.palette[e].main,.55)}`}},[`&.${qp.checked} + .${qp.track}`]:{backgroundColor:(n.vars||n).palette[e].main}}}))]})),Pfe=ur("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(n,e)=>e.track})(({theme:n})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:n.transitions.create(["opacity","background-color"],{duration:n.transitions.duration.shortest}),backgroundColor:n.vars?n.vars.palette.common.onBackground:`${n.palette.mode==="light"?n.palette.common.black:n.palette.common.white}`,opacity:n.vars?n.vars.opacity.switchTrack:`${n.palette.mode==="light"?.38:.3}`})),Ffe=ur("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(n,e)=>e.thumb})(({theme:n})=>({boxShadow:(n.vars||n).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),zfe=ge.forwardRef(function(e,t){const i=Lfe({props:e,name:"MuiSwitch"}),{className:s,color:o="primary",edge:l=!1,size:u="medium",sx:d}=i,p=Er(i,Ofe),_=Je({},i,{color:o,edge:l,size:u}),v=Dfe(_),b=Pe.jsx(Ffe,{className:v.thumb,ownerState:_});return Pe.jsxs(Nfe,{className:ri(v.root,s),sx:d,ownerState:_,children:[Pe.jsx(Bfe,Je({type:"checkbox",icon:b,checkedIcon:b,ref:t,ownerState:_},p,{classes:Je({},v,{root:v.switchBase})})),Pe.jsx(Pfe,{className:v.track,ownerState:_})]})}),Ufe=zfe;function Hfe(n){return So("MuiTextField",n)}No("MuiTextField",["root"]);const Gfe=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Wfe={standard:vP,filled:gj,outlined:Cj},Vfe=n=>{const{classes:e}=n;return Bo({root:["root"]},Hfe,e)},jfe=ur(bde,{name:"MuiTextField",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Xfe=ge.forwardRef(function(e,t){const i=Xo({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:o=!1,children:l,className:u,color:d="primary",defaultValue:p,disabled:_=!1,error:v=!1,FormHelperTextProps:b,fullWidth:E=!1,helperText:C,id:M,InputLabelProps:I,inputProps:L,InputProps:O,inputRef:P,label:B,maxRows:z,minRows:G,multiline:j=!1,name:H,onBlur:Z,onChange:ae,onFocus:J,placeholder:te,required:he=!1,rows:le,select:ce=!1,SelectProps:be,type:$e,value:q,variant:oe="outlined"}=i,se=Er(i,Gfe),pe=Je({},i,{autoFocus:o,color:d,disabled:_,error:v,fullWidth:E,multiline:j,required:he,select:ce,variant:oe}),Se=Vfe(pe),Fe={};oe==="outlined"&&(I&&typeof I.shrink<"u"&&(Fe.notched=I.shrink),Fe.label=B),ce&&((!be||!be.native)&&(Fe.id=void 0),Fe["aria-describedby"]=void 0);const Re=$R(M),qe=C&&Re?`${Re}-helper-text`:void 0,Ne=B&&Re?`${Re}-label`:void 0,it=Wfe[oe],st=Pe.jsx(it,Je({"aria-describedby":qe,autoComplete:s,autoFocus:o,defaultValue:p,fullWidth:E,multiline:j,name:H,rows:le,maxRows:z,minRows:G,type:$e,value:q,id:Re,inputRef:P,onBlur:Z,onChange:ae,onFocus:J,placeholder:te,inputProps:L},Fe,O));return Pe.jsxs(jfe,Je({className:ri(Se.root,u),disabled:_,error:v,fullWidth:E,ref:t,required:he,color:d,variant:oe,ownerState:pe},se,{children:[B!=null&&B!==""&&Pe.jsx(Spe,Je({htmlFor:Re,id:Ne},I,{children:B})),ce?Pe.jsx(Rfe,Je({"aria-describedby":qe,id:Re,labelId:Ne,value:q,input:st},be,{children:l})):st,C&&Pe.jsx(zde,Je({id:qe},b,{children:C}))]}))}),SP=Xfe,Yfe="/gpu-programming/assets/misty-Q0vWeXcA.svg",Kfe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20400%20400'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-54.8776,-69.2073)'%3e%3cg%20transform='matrix(1.02822,0,0,1.03479,-55.9535,52.2937)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,286.809,459.697)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'/%3e%3c/g%3e%3cg%20transform='matrix(0.440957,0.440957,-0.704461,0.704461,267.224,-50.5009)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.249775,0.249775,-0.614768,-0.614768,655.131,143.162)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20451.634,248.57%20429.001,248.57L121.05,248.57C98.417,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2098.417,215.247%20121.05,215.247L429.001,215.247C451.634,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(1.02822,0,0,1.03479,44.3939,-48.6949)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,171.204,575.302)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,453.376,402.183)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.249775,0.249775,-0.614768,-0.614768,274.402,521.42)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20451.634,248.57%20429.001,248.57L121.05,248.57C98.417,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2098.417,215.247%20121.05,215.247L429.001,215.247C451.634,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.440957,-0.440957,0.704461,-0.704461,241.43,564.525)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,395.716,343.809)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Jfe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20401%20400'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-53.2986,-56.7857)'%3e%3cg%20transform='matrix(0.992184,0,0,0.998302,0.416603,0.0964004)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,286.809,459.697)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'/%3e%3c/g%3e%3cg%20transform='matrix(0.440957,0.440957,-0.704461,0.704461,267.224,-50.5009)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.237219,0.237219,-0.614768,-0.614768,613.767,184.608)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20450.661,248.57%20426.831,248.57L123.22,248.57C99.39,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2099.39,215.247%20123.22,215.247L426.831,215.247C450.661,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(0.992184,0,0,0.998302,0.416603,0.0964004)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,171.204,575.302)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,453.376,402.183)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.237219,0.237219,-0.614768,-0.614768,311.603,484.301)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20450.661,248.57%20426.831,248.57L123.22,248.57C99.39,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2099.39,215.247%20123.22,215.247L426.831,215.247C450.661,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.440957,-0.440957,0.704461,-0.704461,241.43,564.525)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,395.716,343.809)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function ey({icon:n,text:e,clickFunction:t,disabled:i,style:s}){return Pe.jsx(yhe,{onClick:t,startIcon:n,disabled:i,classes:{disabled:"disabledDropShadowButton"},style:{margin:"5px",color:"black",backgroundColor:"#FAFAFA",borderRadius:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",...s},children:e})}var EP={},P2={};const qfe=n_(gue);var _4;function PR(){return _4||(_4=1,function(n){"use client";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=qfe}(P2)),P2}var Qfe=RE;Object.defineProperty(EP,"__esModule",{value:!0});var Aj=EP.default=void 0,Zfe=Qfe(PR()),eme=Pe;Aj=EP.default=(0,Zfe.default)((0,eme.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");function tme(n){const[e,t]=ge.useState(""),i=Qn(As(M=>M.setIp)),s=Qn(As(M=>M.setImageList)),o=Qn(As(M=>M.setAudioList)),l=Qn(As(M=>M.setIsConnected)),u=Qn(As(M=>M.isConnected)),d=Qn(As(M=>M.disconnect)),p=Qn(M=>M.setActiveModal),_=Qn(M=>M.setHeaderDimensions),v=Qn(As(M=>M.screenToShow)),b=Qn(M=>M.updateScreen);ge.useEffect(()=>{const M=document.getElementById("website-header");new ResizeObserver(L=>{for(let O of L)_(M.offsetHeight,M.offsetWidth)}).observe(M)},[]);const E=()=>{i(e),fetch(`http://${e}/api/battery`,{method:"GET"}).then(M=>{if(!M.ok)throw new Error(`Request failed with status ${M.status}`);return M.json()}).then(M=>(console.log(`Successfully sent a GET request, the response is: ${M}`),l(!0),fetch(`http://${e}/api/audio/list`))).then(M=>{if(!M.ok)throw new Error(`Request failed with status ${M.status}`);return M.json()}).then(M=>(o(M.result),fetch(`http://${e}/api/images/list`))).then(M=>{if(!M.ok)throw new Error(`Request failed with status ${M.status}`);return M.json()}).then(M=>{s(M.result)}).catch(M=>{console.error("Error during fetch operation:",M.message),alert(`Error fetching data: ${M.message}`)}),ih("Hit Confirm IP Address Button")},C={backgroundColor:"#585D92",color:"#FFFFFF",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",zIndex:101,position:"relative",paddingLeft:"20px",paddingTop:"5px",paddingBottom:"5px"};return Pe.jsxs(Ih,{id:"website-header",container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",style:C,children:[Pe.jsx(Ih,{item:!0,xs:12,sm:4,md:4,lg:3,xl:3,children:Pe.jsxs(Qw,{direction:"row",alignItems:"center",children:[Pe.jsx("img",{style:{maxHeight:"35px",paddingRight:"5px"},src:Yfe}),Pe.jsx(rE,{display:"inline",variant:"h5",children:"Robo-Blocks"})]})}),Pe.jsx(Ih,{item:!0,xs:12,sm:8,md:8,lg:9,xl:9,children:Pe.jsxs(Ih,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[Pe.jsx(Ih,{item:!0,xs:3,sm:3,md:3,lg:3,xl:3,style:{justifyContent:"right",display:"flex"},children:v!==HB&&Pe.jsx(ey,{text:v===FS?"Create A Story":"Program The Robot",clickFunction:()=>b(v===FS?GB:FS)})}),Pe.jsx(Ih,{item:!0,xs:9,sm:9,md:9,lg:9,xl:9,style:{justifyContent:"right",display:"flex"},children:Pe.jsxs(Qw,{direction:"row",alignItems:"center",children:[!u&&Pe.jsx("div",{style:{backgroundColor:"#FF7E7E",width:"45px",height:"45px",borderRadius:"25px",marginRight:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},children:Pe.jsx("img",{style:{height:"34px",position:"absolute",top:"5px",left:"5px"},src:Jfe})}),u&&Pe.jsx("div",{style:{backgroundColor:"#A0FF7E",width:"45px",height:"45px",borderRadius:"25px",marginRight:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},children:Pe.jsx("img",{style:{height:"34px",position:"absolute",top:"5px",left:"5px"},src:Kfe})}),Pe.jsx(SP,{id:"robotIpAddress",disabled:u,label:"IP",variant:"filled",style:{backgroundColor:"#FFFFFF50",borderRadius:"5px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",marginRight:"5px"},defaultValue:"",onChange:M=>t(M.target.value)}),!u&&Pe.jsx(ey,{text:"Connect",clickFunction:E}),u&&Pe.jsx(ey,{text:"Disconnect",clickFunction:d}),Pe.jsx(fA,{style:{margin:"5px",marginRight:"10px",color:"black",backgroundColor:"#FAFAFA",borderRadius:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},onClick:()=>{p(s7)},children:Pe.jsx(Aj,{})})]})})]})})]})}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nme={kind:"categoryToolbox",contents:[{kind:"category",name:"Functions",categorystyle:"procedure_category",custom:"PROCEDURE"},{kind:"category",name:"Triggers",categorystyle:"trigger_category",contents:[{kind:"block",type:"FrontLeftBumperPress"},{kind:"block",type:"FrontRightBumperPress"},{kind:"block",type:"RearLeftBumperPress"},{kind:"block",type:"RearRightBumperPress"}]},{kind:"category",name:"Control",categorystyle:"logic_category",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{shadow:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_null"},{kind:"block",type:"logic_ternary"}]},{kind:"category",name:"Math",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"BasicSlider"},{kind:"block",type:"math_number_property",inputs:{NUMBER_TO_CHECK:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"math_random_int",inputs:{FROM:{shadow:{type:"math_number",fields:{NUM:1}}},TO:{shadow:{type:"math_number",fields:{NUM:100}}}}}]},{kind:"category",name:"Movement",categorystyle:"movement_category",contents:[{kind:"block",type:"WaitForSeconds"},{kind:"block",type:"DriveTime"},{kind:"block",type:"DriveTime2"},{kind:"block",type:"Turn"},{kind:"block",type:"Turn2"},{kind:"block",type:"MoveHead"},{kind:"block",type:"MoveHead3"},{kind:"block",type:"MoveArm"},{kind:"block",type:"MoveArm2"},{kind:"block",type:"MoveArms2"},{kind:"block",type:"MoveArm3"}]},{kind:"category",name:"Light",categorystyle:"light_category",contents:[{kind:"block",type:"ChangeLED"},{kind:"block",type:"TransitionLED"},{kind:"block",type:"colour_picker"},{kind:"block",type:"colour_random"},{kind:"block",type:"colour_rgb",inputs:{RED:{shadow:{type:"math_number",fields:{NUM:100}}},GREEN:{shadow:{type:"math_number",fields:{NUM:50}}},BLUE:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"colour_blend",inputs:{COLOUR1:{shadow:{type:"colour_picker",fields:{COLOUR:"#ff0000"}}},COLOUR2:{shadow:{type:"colour_picker",fields:{COLOUR:"#3333ff"}}},RATIO:{shadow:{type:"math_number",fields:{NUM:.5}}}}},{kind:"block",type:"TurnOnFlashlight"},{kind:"block",type:"TurnOffFlashlight"}]},{kind:"category",name:"Speech",categorystyle:"speech_category",contents:[{kind:"block",type:"Speak"},{kind:"block",type:"SpeakDefault"},{kind:"block",type:"text"}]},{kind:"category",name:"Face",categorystyle:"face_category",contents:[{kind:"block",type:"DisplayText"},{kind:"block",type:"ClearText"},{kind:"block",type:"DisplayImage"},{kind:"block",type:"eyes_acceptance"},{kind:"block",type:"eyes_admiration"},{kind:"block",type:"eyes_amazement"},{kind:"block",type:"eyes_anger"},{kind:"block",type:"eyes_annoyed"},{kind:"block",type:"eyes_anticipation"},{kind:"block",type:"eyes_apprehension"},{kind:"block",type:"eyes_boredom"},{kind:"block",type:"eyes_default"},{kind:"block",type:"eyes_disgust"},{kind:"block",type:"eyes_distraction"},{kind:"block",type:"eyes_ecstasy_frame_1"},{kind:"block",type:"eyes_ecstasy_frame_2"},{kind:"block",type:"eyes_fear"},{kind:"block",type:"eyes_grief"},{kind:"block",type:"eyes_interest"},{kind:"block",type:"eyes_joy"},{kind:"block",type:"eyes_loathing"},{kind:"block",type:"eyes_pensiveness"},{kind:"block",type:"eyes_rage"},{kind:"block",type:"eyes_sad"},{kind:"block",type:"eyes_serenity"},{kind:"block",type:"eyes_surprise"},{kind:"block",type:"eyes_terror"},{kind:"block",type:"eyes_trust"},{kind:"block",type:"eyes_vigilance"},{kind:"block",type:"e_Sleeping"},{kind:"block",type:"e_SleepingZZZ"},{kind:"block",type:"e_Contempt"},{kind:"block",type:"e_ContentLeft"},{kind:"block",type:"e_ContentRight"},{kind:"block",type:"e_Disoriented"},{kind:"block",type:"e_EcstacyHilarious"},{kind:"block",type:"e_EcstacyStarryEyed"},{kind:"block",type:"e_JoyGoofy"},{kind:"block",type:"e_JoyGoofy2"},{kind:"block",type:"e_JoyGoofy3"},{kind:"block",type:"e_Love"},{kind:"block",type:"e_Rage"},{kind:"block",type:"e_Rage2"},{kind:"block",type:"e_Rage3"},{kind:"block",type:"e_Rage4"},{kind:"block",type:"e_RemorseShame"}]},{kind:"category",name:"Audio",categorystyle:"audio_category",contents:[{kind:"block",type:"SetVolume"},{kind:"block",type:"PlayAudio"},{kind:"block",type:"s_Acceptance"},{kind:"block",type:"s_Amazement"},{kind:"block",type:"s_Amazement2"},{kind:"block",type:"s_Anger"},{kind:"block",type:"s_Anger2"},{kind:"block",type:"s_Anger3"},{kind:"block",type:"s_Anger4"},{kind:"block",type:"s_Annoyance"},{kind:"block",type:"s_Annoyance2"},{kind:"block",type:"s_Annoyance3"},{kind:"block",type:"s_Annoyance4"},{kind:"block",type:"s_Awe"},{kind:"block",type:"s_Awe2"},{kind:"block",type:"s_Awe3"},{kind:"block",type:"s_Boredom"},{kind:"block",type:"s_Disapproval"},{kind:"block",type:"s_Disgust"},{kind:"block",type:"s_Disgust2"},{kind:"block",type:"s_Disgust3"},{kind:"block",type:"s_DisorientedConfused"},{kind:"block",type:"s_DisorientedConfused2"},{kind:"block",type:"s_DisorientedConfused3"},{kind:"block",type:"s_DisorientedConfused4"},{kind:"block",type:"s_DisorientedConfused5"},{kind:"block",type:"s_DisorientedConfused6"},{kind:"block",type:"s_Distraction"},{kind:"block",type:"s_Ecstacy"},{kind:"block",type:"s_Ecstacy2"},{kind:"block",type:"s_Fear"},{kind:"block",type:"s_Grief"},{kind:"block",type:"s_Grief2"},{kind:"block",type:"s_Grief3"},{kind:"block",type:"s_Grief4"},{kind:"block",type:"s_Joy"},{kind:"block",type:"s_Joy2"},{kind:"block",type:"s_Joy3"},{kind:"block",type:"s_Joy4"},{kind:"block",type:"s_Loathing"},{kind:"block",type:"s_Love"},{kind:"block",type:"s_PhraseByeBye"},{kind:"block",type:"s_PhraseEvilAhHa"},{kind:"block",type:"s_PhraseHello"},{kind:"block",type:"s_PhraseNoNoNo"},{kind:"block",type:"s_PhraseOopsy"},{kind:"block",type:"s_PhraseOwOwOw"},{kind:"block",type:"s_PhraseOwwww"},{kind:"block",type:"s_PhraseUhOh"},{kind:"block",type:"s_Rage"},{kind:"block",type:"s_Sadness"},{kind:"block",type:"s_Sadness2"},{kind:"block",type:"s_Sadness3"},{kind:"block",type:"s_Sadness4"},{kind:"block",type:"s_Sadness5"},{kind:"block",type:"s_Sadness6"},{kind:"block",type:"s_Sadness7"},{kind:"block",type:"s_Sleepy"},{kind:"block",type:"s_Sleepy2"},{kind:"block",type:"s_Sleepy3"},{kind:"block",type:"s_Sleepy4"},{kind:"block",type:"s_SleepySnore"},{kind:"block",type:"s_SystemCameraShutter"}]}]},rme="/gpu-programming/assets/uw-crest-color-web-digital-CjofXveo.svg",ime="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20194%20209'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-67.3413,-198.983)'%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,37.529,47.7569)'%3e%3cpath%20d='M-4.263,-4.263C-1.908,-4.263%200.001,-2.353%200.001,0.002C0.001,2.356%20-1.908,4.263%20-4.263,4.263C-6.617,4.263%20-8.527,2.356%20-8.527,0.002C-8.527,-2.353%20-6.617,-4.263%20-4.263,-4.263'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,59.9955,60.1716)'%3e%3cpath%20d='M-2.673,-2.671C-1.196,-2.671%20-0.001,-1.477%20-0.001,0.001C-0.001,1.477%20-1.196,2.673%20-2.673,2.673C-4.148,2.673%20-5.342,1.477%20-5.342,0.001C-5.342,-1.477%20-4.148,-2.671%20-2.673,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,18.8329,65.7474)'%3e%3cpath%20d='M-2.671,-2.671C-1.196,-2.671%200.001,-1.476%200.001,0C0.001,1.475%20-1.196,2.671%20-2.671,2.671C-4.146,2.671%20-5.343,1.475%20-5.343,0C-5.343,-1.476%20-4.146,-2.671%20-2.671,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,34.0834,92.4773)'%3e%3cpath%20d='M-2.672,-2.672C-1.197,-2.672%200,-1.477%200,-0.001C0,1.475%20-1.197,2.672%20-2.672,2.672C-4.149,2.672%20-5.344,1.475%20-5.344,-0.001C-5.344,-1.477%20-4.149,-2.672%20-2.672,-2.672'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,47.2036,90.0173)'%3e%3cpath%20d='M-2.673,-2.671C-1.198,-2.671%20-0.001,-1.477%20-0.001,0C-0.001,1.476%20-1.198,2.673%20-2.673,2.673C-4.148,2.673%20-5.342,1.476%20-5.342,0C-5.342,-1.477%20-4.148,-2.671%20-2.673,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(1,0,0,1,31.4239,88.2618)'%3e%3cpath%20d='M0,-31.486L-7.343,-31.486L-7.343,-24.621L-2.62,-27.134C-2.62,-27.134%20-1.885,-30.033%200,-31.486M-2.667,-21.8L-7.343,-19.427L-7.343,0L0.218,0C0.652,-4.687%201.012,-14.334%200.385,-17.054C-1.978,-18.859%20-2.667,-21.8%20-2.667,-21.8M16.67,-22.279C16.05,-19.824%2014.854,-18.168%2013.521,-16.972C16.087,-15.06%2018.567,-11.369%2018.567,-7.484L18.567,0L23.979,0L23.979,-22.367C22.277,-21.923%2019.538,-21.203%2016.67,-22.279M8.317,-13.886C7.15,-14.439%205.715,-14.459%205.715,-14.459L5.715,0L13.318,0L13.318,-6.519C13.318,-11.601%209.419,-13.365%208.317,-13.886M13.92,-31.486C15.038,-30.308%2015.911,-29.021%2016.417,-27.457C18.939,-25.75%2022.22,-26.601%2023.979,-26.855L23.979,-31.486L13.92,-31.486Z'%20style='fill:rgb(205,20,66);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function sme(n){return Pe.jsxs(Ih,{container:!0,style:{position:"absolute",left:"20px",bottom:"20px",zIndex:"101",width:"70px"},children:[Pe.jsx(Ih,{item:!0,xs:6,sm:6,md:12,lg:12,xl:12,alignContent:"center",children:Pe.jsx("img",{src:ime})}),Pe.jsx(Ih,{item:!0,xs:6,sm:6,md:12,lg:12,xl:12,children:Pe.jsx("img",{src:rme})})]})}function y4(){const{innerWidth:n,innerHeight:e}=window;return{width:n,height:e}}function Ij(){const[n,e]=ge.useState(y4());return ge.useEffect(()=>{function t(){e(y4())}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n}function ome({leftChildren:n,rightChildren:e}){return Pe.jsxs(Ih,{container:!0,direction:"row",justifyContent:"center",spacing:2,style:{padding:"20px 30px 0px 30px",height:"100%",width:"100%"},children:[Pe.jsx(Ih,{item:!0,xs:6,style:{overflowY:"scroll",height:"100%"},children:n}),Pe.jsx(Ih,{item:!0,xs:6,style:{overflowY:"scroll",height:"100%"},children:e})]})}function Rj({style:n,maxVH:e=0}){const t=Qn(As(E=>E.userPrompt)),i=Qn(E=>E.setUserPrompt),s=Qn(E=>E.generateProgramOutline),o=Qn(E=>E.generateProgram),l=Qn(As(E=>E.llmProcessing)),u=Qn(As(E=>E.displayLLMBlockPrompt)),{height:d,_:p}=Ij();function _(E){var C=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return E*C/100}let v=e>0?_(e)/23:(d-190)/23;const b=E=>{i(E.target.value)};return Pe.jsxs("div",{style:{...n},children:[Pe.jsx(SP,{label:"What do you want the robot to do?",multiline:!0,disabled:l,fullWidth:!0,minRows:v,maxRows:v,onChange:b,value:t}),Pe.jsx(ey,{text:"Generate Program Goals",clickFunction:s,disabled:l,style:{float:"right"}}),u&&Pe.jsx(ey,{text:"Generate Block Program",clickFunction:o,disabled:l,style:{float:"right"}})]})}const ame=n=>{const[e,t]=ge.useState(null),[i,s]=ge.useState(!1),o=()=>{t(null)},l=()=>{s(!i)},u=d=>{t(e===d?null:d)};return Pe.jsxs("div",{className:"subtask-card",children:[Pe.jsx("div",{className:"subtask-checkbox-container",children:Pe.jsx("input",{type:"checkbox",className:`subtask-checkbox ${i?"checked":""}`,onChange:l})}),Pe.jsxs("div",{className:"subtask-content",children:[Pe.jsx("h3",{className:"subtask-title",children:n.title}),Pe.jsx("p",{className:"subtask-subtext",children:n.subtext}),Pe.jsx("div",{className:"hints-container",children:n.hints&&n.hints.map((d,p)=>Pe.jsxs("button",{className:`hint-button ${e===d?"selected":""}`,onClick:()=>u(d),children:["Hint ",p+1]},p))}),e&&Pe.jsxs("div",{className:"hint-expansion",children:[Pe.jsx("p",{children:e.text}),Pe.jsx("div",{className:"close-button-container",children:Pe.jsx("button",{className:"close-button",onClick:o,children:"Close"})})]})]})]},n.title)},lme=n=>Pe.jsxs("div",{className:"task-tab-container",children:[(n==null?void 0:n.subtasks)&&(n==null?void 0:n.subtasks.map(e=>Pe.jsx(ame,{title:e.title,subtext:e.subtext,hints:e.hints.map(t=>n.allTasks[t])},e.title))),n.hasNextTask&&Pe.jsxs("div",{className:"completion-card",children:[Pe.jsx("p",{children:"All steps are complete."}),Pe.jsx("button",{className:"next-task-button",onClick:n.onNextTask,children:"Go To Next Task"})]})]}),kj=()=>{var p,_;const[n,e]=ge.useState(0),t=Qn(As(v=>v.getAllTasks)),i=Qn(As(v=>v.getMainTasks)),s=t(),o=i(),l=v=>{e(v)},u=()=>{n<Object.keys(o).length-1&&e(n+1),window.scrollTo({top:0,behavior:"smooth"})};let d=Object.keys(o);return Pe.jsxs("div",{children:[Pe.jsx("div",{className:"tabs-container",children:d.map((v,b)=>Pe.jsx("div",{className:`tab ${b===n?"active":""}`,onClick:()=>l(b),children:o[v].name},v))}),Pe.jsx("div",{className:"task-tab-container",children:Pe.jsx(lme,{subtasks:(_=(p=o[d[n]])==null?void 0:p.subtasks)==null?void 0:_.map(v=>s[v]),allTasks:s,onNextTask:u,hasNextTask:n+1<d.length},d[n])})]})};function v4(n){const e=Qn(As(s=>s.llmProcessing)),t=Qn(s=>s.fullScreenPanel),i=Qn(s=>s.setFullScreenPanel);return Pe.jsxs("div",{style:{zIndex:20,height:"100%"},children:[Pe.jsx(NR,{style:{color:"#fff",zIndex:103},open:e,children:Pe.jsx(dj,{color:"inherit"})}),Pe.jsx(ome,{leftChildren:Pe.jsx(Rj,{}),rightChildren:Pe.jsx("div",{style:{width:"100%"},children:Pe.jsx(kj,{})})}),Pe.jsx("button",{onClick:()=>i(!t),style:{position:"absolute",top:"75px",right:"10px",backgroundColor:"rgba(255, 0, 0, 0.8)",color:"#fff",padding:"5px 10px",borderRadius:"5px",border:"none",cursor:"pointer"},children:"✖"})]})}function ume(n){ge.useState(!1),ge.useState(!1),Qn(As(o=>o.llmProcessing));const e=Qn(As(o=>o.setFullScreenPanel)),t=Qn(o=>o.setShowGPTConsole),i=Qn(o=>o.showGPTConsole),s=Qn(o=>o.userPrompt);return Pe.jsxs("div",{style:{position:"absolute",bottom:"0px",left:"114.7px",width:"93%",zIndex:10,backgroundColor:"#222",color:"#fff",height:"25vh"},children:[Pe.jsx("button",{onClick:()=>{e(!0),t(!i)},style:{position:"relative",left:"5vw"},children:"Expand to Full Screen"}),Pe.jsx("div",{style:{position:"absolute",zIndex:20,top:"40px",left:"50px"},children:Pe.jsxs("p",{children:["User prompt: ",s]})}),Pe.jsx("button",{onClick:()=>t(!i),style:{position:"absolute",top:"5px",left:"5px",backgroundColor:"rgba(255, 0, 0, 0.8)",color:"#fff",padding:"5px 10px",borderRadius:"5px",border:"none",cursor:"pointer"},children:"✖"})]})}function cme(n){const e=Qn(O=>O.addBlock),t=Qn(O=>O.blocks),i=Qn(O=>O.removeBlock),s=Qn(O=>O.getBlock),o=Qn(O=>O.updateBlock),l=Qn(O=>O.getBlockType),u=Qn(O=>O.setBlocklyWorkspace),d=Qn(O=>O.loadBlocks),p=Qn(O=>O.blocklyWorkspace),_=Qn(O=>O.setShowGPTConsole),v=Qn(O=>O.showGPTConsole),b=Qn(O=>O.fullScreenPanel);Qn(O=>O.ip);const{height:E,_:C}=Ij(),M=(O,P)=>{O.push(P);let B=s(P);for(;B.next;)B=B.next,O.push(B)},I=(O,P)=>{ih(P?O?`switch toolbox category from ${P} to ${O}`:`unselect toolbox category: ${P}`:`select toolbox category: ${O}`)},L=()=>{_(!v)};return Gg.common.defineBlocks(t),Object.assign(QS.javascriptGenerator.forBlock,HI),ge.useEffect(()=>{var O,P,B;if(!document.querySelector(".blocklySvg")){const z=document.getElementById("pageContainer"),G=document.getElementById("blocklyDiv");let j=null;if(j=Gg.inject(G,{toolbox:nme,grid:{spacing:20,length:3,colour:"#ccc",snap:!0},theme:Gg.Theme.defineTheme("gpuTheme",{componentStyles:{toolboxBackgroundColour:"#E4E5F1",flyoutBackgroundColour:"#d2d3db"},categoryStyles:{...Nt},blockStyles:{logic_blocks:{colourPrimary:Nt.logic_category.colour},loop_blocks:{colourPrimary:Nt.loop_category.colour},math_blocks:{colourPrimary:Nt.math_category.colour},procedure_blocks:{colourPrimary:Nt.procedure_category.colour},text_blocks:{colourPrimary:Nt.speech_category.colour},colour_blocks:{colourPrimary:Nt.light_category.colour},hat_blocks:{hat:"cap"}}})}),!p&&j.getAllBlocks().filter(ae=>ae.type==="Start").length===0){const ae=j.newBlock("Start");ae.setDeletable(!1),ae.moveBy(50,50),ae.initSvg(),ae.render()}if(p){let Z={data:[]},ae=Object.keys(t),J=ae.length;for(let te=0;te<J;te++){let he={id:t[ae[te]].id,type:t[ae[te]].type};t[ae[te]].next&&t[ae[te]].next!==""&&(he.nextStatement=t[ae[te]].next);let le=(O=t[ae[te]])!=null&&O.inputs?Object.keys((P=t[ae[te]])==null?void 0:P.inputs):[];for(let ce=0;ce<le.length;ce++)he[le[ce]]=(B=t[ae[te]].inputs[le[ce]])!=null&&B.shadow?t[ae[te]].inputs[le[ce]].shadow.id:t[ae[te]].inputs[le[ce]];he.type==="math_number"&&(he.value=t[ae[te]].fields.NUM),he.type==="colour_picker"&&(he.value=t[ae[te]].fields.COLOUR),he.type==="text"&&(he.value=t[ae[te]].fields.TEXT),["BasicSlider","ArmPositionSlider","SpeedSlider","TimeSlider","HeadPitchSlider","HeadRollSlider","HeadYawSlider"].includes(he.type)&&(he.value=t[ae[te]].fields.FIELD_slider_value),Z.data.push({...he})}d(Z,j)}u(j),QS.javascriptGenerator.addReservedWords("code"),new ResizeObserver(Z=>{for(let ae of Z){let J=z,te=0,he=0;do te+=J.offsetLeft,he+=J.offsetTop,J=J.offsetParent;while(J);G.style.left=te+"px",G.style.top=he+"px",G.style.width=z.offsetWidth+"px",G.style.height=z.offsetHeight+"px",Gg.svgResize(j),j.scrollbar.setVisible(!1)}}).observe(z),j.render(),j.addChangeListener(Z=>{if(Z.isUiEvent){if(Z.type==="toolbox_item_select")I(Z.newItem,Z.oldItem);else if(Z.type==="click"){if(Z.targetType==="block"){const ae=l(Z.blockId);ih(`click on ${ae} block`)}Z.targetType==="workspace"&&ih("click on workspace")}else if(Z.type==="selected"){if(Z.oldElementId){const ae=l(Z.oldElementId);ih(`unselect and un-highlight ${ae} `)}if(Z.newElementId){const ae=l(Z.newElementId);ih(`select and highlight ${ae} `)}}else if(Z.type==="drag"){const ae=l(Z.blockId);Z.isStart?ih(`drag block ${ae} start `):ih(`drag block ${ae} end `)}return}if(Z.type===Gg.Events.BLOCK_DELETE){let ae=Z.blockId,J=[ae],te=s(ae).inputs;if(te)for(let[ce,be]of Object.entries(te))typeof be!="string"?J.push(be.id):M(J,be);let he=s(Z.blockId).next;he&&M(J,he);const le=J.map(ce=>l(ce));i(J),ih(`block ${ae} is deleted, total delete blocks: ${le}`)}if(Z.type===Gg.Events.BLOCK_CHANGE){const ae=l(Z.blockId);let J=Z.blockId,te=s(J);te.fields[Z.name]=Z.newValue,o(J,te),ih(`field ${Z.name} of ${ae} change from ${Z.oldValue} to ${Z.newValue} `)}if(Z.type==="create"){let ae={id:Z.json.id,type:Z.json.type,prev:"",next:"",isShadow:!1};if(Z.json.type==="Start"&&(Z.json.id,ae={id:Z.json.id,type:Z.json.type,next:""}),Z.json.fields&&(ae.fields=Z.json.fields),Z.json.inputs){ae.inputs=Z.json.inputs;for(let[J,te]of Object.entries(Z.json.inputs))if(te.shadow){let he={id:te.shadow.id,type:te.shadow.type,fields:te.shadow.fields,isShadow:!0,initialParent:Z.ids[0],initialInput:J};"shadows"in ae||(ae.shadows={}),ae.shadows[J]=te.shadow.id,e(te.shadow.id,he),ih(`create a instance of type ${he.type}`)}}e(Z.json.id,ae),ih(`create a instance of type ${ae.type}`)}if(Z.type==="move"){const ae=l(Z.blockId),J=Z.reason;if(J&&(typeof J!="string"&&J[1]==="drag"||J[0]==="drag")&&Z.newCoordinate&&ih(`drag ${ae} from coordinate: {x: ${Z.oldCoordinate.x}, y: ${Z.oldCoordinate.y}} to {x: ${Z.newCoordinate.x},y: ${Z.newCoordinate.y}}`),Z.reason&&Z.reason.includes("connect")){let te=Z.newParentId,he=s(Z.newParentId);const le=he.type,ce=s(Z.blockId);Z.newInputName?("inputs"in he||(he.inputs={}),he.inputs[Z.newInputName]=Z.blockId,o(te,he),ih(`connect ${ce.type}  as input of ${le}`)):(he.next=Z.blockId,o(te,he),ce.prev=te,o(Z.blockId,ce),ih(`Placed ${ce.type} after ${le}`))}if(Z.reason&&Z.reason.includes("disconnect")){let te=Z.oldParentId,he=s(Z.oldParentId);const le=he.type,ce=s(Z.blockId);if(!Z.oldInputName)he.next="",o(te,he),ce.prev="",o(Z.blockId,ce),ih(`disconnect ${le} from ${he.type}`);else{if(he.inputs[Z.oldInputName]="",he.shadows&&he.shadows[Z.oldInputName]){let be=he.shadows[Z.oldInputName];he.inputs[Z.oldInputName]=be}o(te,he),ih(`remove ${le} from input of ${he.type}`)}}}})}},[]),Pe.jsxs("div",{style:{width:"100%",height:"100%"},children:[E>=460&&!b&&Pe.jsx(sme,{}),Pe.jsxs("div",{id:"pageContainer",style:{width:"100%",height:"100%"},children:[Pe.jsx("div",{id:"blocklyDiv",style:{width:"100%",height:"100%"}}),!b&&Pe.jsx("div",{style:{position:"absolute",bottom:"10px",left:"35%",transform:"translateX(-50%)",zIndex:10,backgroundColor:"rgba(51, 51, 51, 0.8)",color:"#fff",padding:"10px 20px",borderRadius:"10px",border:"none",cursor:"pointer"},onClick:L,children:"Goals"}),v&&Pe.jsx("div",{children:Pe.jsx(ume,{})}),Pe.jsx("xml",{id:"toolbox",style:{display:"none"}})]})]})}function nc(n,e,t){return e=Gae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ty(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&i.push.apply(i,Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.forEach(function(s){nc(n,s,t[s])})}return n}class ko{static isBrowser(){return typeof window<"u"}static isOpera(){return ko.isBrowser()&&(!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0)}static isFirefox(){return ko.isBrowser()&&typeof InstallTrigger<"u"}static isSafari(){return ko.isBrowser()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}static isIE(){return ko.isBrowser()&&!!document.documentMode}static isEdge(){return ko.isBrowser()&&!ko.isIE()&&!!window.StyleMedia}static isChrome(){return ko.isBrowser()&&!!window.chrome&&!!window.chrome.webstore}static isBlink(){return ko.isBrowser()&&(ko.isChrome()||ko.isOpera())&&!!window.CSS}static getUserAgent(){return typeof navigator>"u"?"":navigator.userAgent}static isAndroid(){return ko.isBrowser()&&ko.getUserAgent().match(/Android/i)}static isBlackBerry(){return ko.isBrowser()&&ko.getUserAgent().match(/BlackBerry/i)}static isIOS(){return ko.isBrowser()&&ko.getUserAgent().match(/iPhone|iPad|iPod/i)}static isOpera(){return ko.isBrowser()&&ko.getUserAgent().match(/Opera Mini/i)}static isWindows(){return ko.isBrowser()&&ko.isWindowsDesktop()||ko.isWindowsMobile()}static isWindowsMobile(){return ko.isBrowser()&&ko.getUserAgent().match(/IEMobile/i)}static isWindowsDesktop(){return ko.isBrowser()&&ko.getUserAgent().match(/WPDesktop/i)}static isMobile(){return ko.isBrowser()&&(ko.isWindowsMobile()||ko.isBlackBerry()||ko.isAndroid()||ko.isIOS())}}const FR=n=>Object.keys(n).reduce((e,t)=>t.substr(0,5)==="data-"?ty({},e,{[t]:n[t]}):e,{});class $p extends Vr.Component{static isA(e){return e?e.type===Vr.createElement($p,null).type:!1}constructor(e){super(e),nc(this,"ref",Vr.createRef()),nc(this,"onMouseMove",t=>{if(this.state.active){const i=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:i,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:i}),t.stopPropagation(),t.preventDefault()}}),nc(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),nc(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[ko.isMobile()?"reflex-thin":"",...this.props.className.split(" "),this.state.active?"active":"","reflex-splitter"].join(" ").trim();return Vr.createElement("div",Je({},FR(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}nc($p,"propTypes",{children:ts.oneOfType([ts.arrayOf(ts.node),ts.node]),onStartResize:ts.func,onStopResize:ts.func,className:ts.string,propagate:ts.bool,onResize:ts.func,style:ts.object});nc($p,"defaultProps",{document:typeof document<"u"?document:null,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});class hme{constructor(){this._events={}}on(e,t){return e.split(" ").forEach(i=>{this._events[i]=this._events[i]||[],this._events[i].push(t)}),this}off(e,t){if(e==null){this._events={};return}return e.split(" ").forEach(i=>{i in this._events&&(t?this._events[i].splice(this._events[i].indexOf(t),1):this._events[i]=[])}),this}emit(e){if(this._events[e]!==void 0)for(var t=this._events[e].slice(),i=0;i<t.length;++i){var s=t[i].apply(this,Array.prototype.slice.call(arguments,1));if(s!==void 0)return s}}}Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(n,e){if(this==null)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if(i===0)return!1;var s=e|0,o=Math.max(s>=0?s:i-Math.abs(s),0);function l(u,d){return u===d||typeof u=="number"&&typeof d=="number"&&isNaN(u)&&isNaN(d)}for(;o<i;){if(l(t[o],n))return!0;o++}return!1}});Math.sign||(Math.sign=function(n){return(n>0)-(n<0)||+n});class sE extends Vr.Component{constructor(e){super(e),nc(this,"onWindowResize",()=>{this.setState({flexData:this.computeFlexData()})}),nc(this,"onStartResize",t=>{const i=t.event.changedTouches?t.event.changedTouches[0]:t.event;switch(this.props.orientation){case"horizontal":document.body.classList.add("reflex-row-resize"),this.previousPos=i.clientY;break;case"vertical":default:document.body.classList.add("reflex-col-resize"),this.previousPos=i.clientX;break}this.elements=[this.children[t.index-1],this.children[t.index+1]],this.emitElementsEvent(this.elements,"onStartResize")}),nc(this,"onResize",t=>{const i=t.event.changedTouches?t.event.changedTouches[0]:t.event,s=this.getOffset(i,t.domElement);switch(this.props.orientation){case"horizontal":this.previousPos=i.clientY;break;case"vertical":default:this.previousPos=i.clientX;break}if(s){const o=this.computeAvailableOffset(t.index,s);o&&(this.elements=this.dispatchOffset(t.index,o),this.adjustFlex(this.elements),this.setState({resizing:!0},()=>{this.emitElementsEvent(this.elements,"onResize")}))}}),nc(this,"onStopResize",t=>{document.body.classList.remove("reflex-row-resize"),document.body.classList.remove("reflex-col-resize");const i=this.elements?this.elements.map(o=>o.ref):[],s=this.children.filter(o=>!$p.isA(o)&&i.includes(o.ref));this.emitElementsEvent(s,"onStopResize"),this.setState({resizing:!1})}),nc(this,"onElementSize",t=>new Promise(i=>{try{const s=t.index,o=this.getSize(this.children[s]),l=t.size-o,u=t.direction,d=s+u,p=this.computeAvailableOffset(d,u*l);this.elements=null,p&&(this.elements=this.dispatchOffset(d,p),this.adjustFlex(this.elements)),this.setState(this.state,()=>{this.emitElementsEvent(this.elements,"onResize"),i()})}catch(s){console.log(s)}})),this.events=new hme,this.children=[],this.state={flexData:[]},this.ref=Vr.createRef()}componentDidMount(){const e=this.computeFlexData(),{windowResizeAware:t}=this.props;t&&window.addEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:t,flexData:e}),this.events.on("element.size",this.onElementSize),this.events.on("startResize",this.onStartResize),this.events.on("stopResize",this.onStopResize),this.events.on("resize",this.onResize)}componentWillUnmount(){this.events.off(),window.removeEventListener("resize",this.onWindowResize)}getValidChildren(e=this.props){return this.toArray(e.children).filter(t=>!!t)}componentDidUpdate(e,t){const i=this.getValidChildren(this.props);if(i.length!==this.state.flexData.length||e.orientation!==this.props.orientation||this.flexHasChanged(e)){const s=this.computeFlexData(i,this.props);this.setState({flexData:s})}this.props.windowResizeAware!==this.state.windowResizeAware&&(this.props.windowResizeAware?window.addEventListener("resize",this.onWindowResize):window.removeEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:this.props.windowResizeAware}))}flexHasChanged(e){const t=this.getValidChildren(e).map(s=>s.props.flex||0);return!this.getValidChildren().map(s=>s.props.flex||0).every((s,o)=>s===t[o])}getSize(e){var t,i,s;const o=e==null||(t=e.ref)===null||t===void 0?void 0:t.current;switch(this.props.orientation){case"horizontal":return(i=o==null?void 0:o.offsetHeight)!==null&&i!==void 0?i:0;case"vertical":default:return(s=o==null?void 0:o.offsetWidth)!==null&&s!==void 0?s:0}}getOffset(e,t){const{top:i,bottom:s,left:o,right:l}=t.getBoundingClientRect();switch(this.props.orientation){case"horizontal":{const u=e.clientY-this.previousPos;if(u>0){if(e.clientY>=i)return u}else if(e.clientY<=s)return u;break}case"vertical":default:{const u=e.clientX-this.previousPos;if(u>0){if(e.clientX>o)return u}else if(e.clientX<l)return u}break}return 0}adjustFlex(e){const t=e.reduce((i,s)=>{const o=s.props.index,l=s.props.flex,u=this.state.flexData[o].flex;return i+(l-u)/e.length},0);e.forEach(i=>{this.state.flexData[i.props.index].flex+=t})}computeAvailableOffset(e,t){const i=this.computeAvailableStretch(e,t),s=this.computeAvailableShrink(e,t);return Math.min(i,s)*Math.sign(t)}checkPropagate(e,t){if(t>0){if(e<this.children.length-2){const i=this.children[e+2];return $p.isA(i)&&i.props.propagate}}else if(e>2){const i=this.children[e-2];return $p.isA(i)&&i.props.propagate}return!1}computeAvailableStretch(e,t){var i;const s=t<0?e+1:e-1,o=this.children[s],l=this.getSize(o),d=((i=o==null?void 0:o.props.maxSize)!==null&&i!==void 0?i:0)-l;if(d<Math.abs(t)&&this.checkPropagate(e,-1*t)){const p=Math.sign(t)*(Math.abs(t)-d);return d+this.computeAvailableStretch(t<0?e+2:e-2,p)}return Math.min(d,Math.abs(t))}computeAvailableShrink(e,t){var i;const s=t>0?e+1:e-1,o=this.children[s],l=this.getSize(o),u=Math.max((i=o==null?void 0:o.props.minSize)!==null&&i!==void 0?i:0,0),d=l-u;if(d<Math.abs(t)&&this.checkPropagate(e,t)){const p=Math.sign(t)*(Math.abs(t)-d);return d+this.computeAvailableShrink(t>0?e+2:e-2,p)}return Math.min(d,Math.abs(t))}computePixelFlex(e=this.props.orientation){if(!this.ref.current)return console.warn("Unable to locate ReflexContainer dom node"),0;switch(e){case"horizontal":return this.ref.current.offsetHeight===0?(console.warn("Found ReflexContainer with height=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetHeight;case"vertical":default:return this.ref.current.offsetWidth===0?(console.warn("Found ReflexContainer with width=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetWidth}}addOffset(e,t){const i=this.getSize(e),s=e.props.index,o=Math.max(i+t,0),l=this.state.flexData[s].flex,u=l>0?l*o/i:this.computePixelFlex()*o;this.state.flexData[s].flex=!isFinite(u)||isNaN(u)?0:u}dispatchStretch(e,t){const i=t<0?e+1:e-1;if(i<0||i>this.children.length-1)return[];const s=this.children[i],o=this.getSize(s),u=Math.min(s.props.maxSize,o+Math.abs(t))-o;if(this.addOffset(s,u),u<Math.abs(t)){const d=e-Math.sign(t)*2,p=Math.sign(t)*(Math.abs(t)-u);return[s,...this.dispatchStretch(d,p)]}return[s]}dispatchShrink(e,t){const i=t>0?e+1:e-1;if(i<0||i>this.children.length-1)return[];const s=this.children[i],o=this.getSize(s),u=Math.max(s.props.minSize,o-Math.abs(t))-o;if(this.addOffset(s,u),Math.abs(u)<Math.abs(t)){const d=e+Math.sign(t)*2,p=Math.sign(t)*(Math.abs(t)+u);return[s,...this.dispatchShrink(d,p)]}return[s]}dispatchOffset(e,t){return[...this.dispatchStretch(e,t),...this.dispatchShrink(e,t)]}emitElementsEvent(e,t){this.toArray(e).forEach(i=>{i.props[t]&&i.props[t]({domElement:i.ref.current,component:i})})}computeFlexData(e=this.getValidChildren(),t=this.props){const i=this.computePixelFlex(t.orientation),s=p=>p.reduce((_,v)=>!$p.isA(v)&&v.constrained?_-v.flex:_,1),o=p=>p.reduce((_,v)=>!$p.isA(v)&&!v.constrained?_+1:_,0),l=e.map(p=>{const _=p.props;return{maxFlex:(_.maxSize||Number.MAX_VALUE)*i,sizeFlex:(_.size||Number.MAX_VALUE)*i,minFlex:(_.minSize||1)*i,constrained:_.flex!==void 0,flex:_.flex||0,type:p.type}}),u=(p,_=0)=>{let v=!1;const b=o(p),E=s(p),C=p.map(M=>{if($p.isA(M))return M;const I=M.constrained?M.flex:E/b,L=Math.min(M.sizeFlex,Math.min(M.maxFlex,Math.max(M.minFlex,I))),O=M.constrained||L!==I;return v=v||O,ty({},M,{flex:L,constrained:O})});return v&&_<this.props.maxRecDepth?u(C,_+1):C};return u(l).map(p=>({flex:$p.isA(p)?0:p.flex,ref:Vr.createRef()}))}toArray(e){return e?Array.isArray(e)?e:[e]:[]}render(){const e=[this.state.resizing?"reflex-resizing":"",...this.props.className.split(" "),this.props.orientation,"reflex-container"].join(" ").trim();return this.children=Vr.Children.map(this.getValidChildren(),(t,i)=>{if(i>this.state.flexData.length-1)return Vr.createElement("div",null);const s=this.state.flexData[i],o=ty({},t.props,{maxSize:t.props.maxSize||Number.MAX_VALUE,orientation:this.props.orientation,minSize:t.props.minSize||1,events:this.events,flex:s.flex,ref:s.ref,index:i});return Vr.cloneElement(t,o)}),Vr.createElement("div",Je({},FR(this.props),{style:this.props.style,className:e,ref:this.ref}),this.children)}}nc(sE,"propTypes",{windowResizeAware:ts.bool,orientation:ts.oneOf(["horizontal","vertical"]),maxRecDepth:ts.number,className:ts.string,style:ts.object});nc(sE,"defaultProps",{orientation:"horizontal",windowResizeAware:!1,maxRecDepth:100,className:"",style:{}});class LE extends Vr.Component{static isA(e){return e?e.type===LE:!1}constructor(e){super(e),nc(this,"ref",Vr.createRef()),nc(this,"onMouseMove",t=>{if(this.state.active){const i=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:i,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:i}),t.stopPropagation(),t.preventDefault()}}),nc(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),nc(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[...this.props.className.split(" "),this.state.active?"active":"","reflex-handle"].join(" ").trim();return Vr.createElement("div",Je({},FR(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}nc(LE,"propTypes",{children:ts.oneOfType([ts.arrayOf(ts.node),ts.node]),onStartResize:ts.func,onStopResize:ts.func,className:ts.string,propagate:ts.bool,onResize:ts.func,style:ts.object});nc(LE,"defaultProps",{document:typeof document>"u"?null:document,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});var Oj="Expected a function",b4=NaN,dme="[object Symbol]",pme=/^\s+|\s+$/g,fme=/^[-+]0x[0-9a-f]+$/i,mme=/^0b[01]+$/i,gme=/^0o[0-7]+$/i,_me=parseInt,yme=typeof Hl=="object"&&Hl&&Hl.Object===Object&&Hl,vme=typeof self=="object"&&self&&self.Object===Object&&self,bme=yme||vme||Function("return this")(),Tme=Object.prototype,Sme=Tme.toString,Eme=Math.max,xme=Math.min,F2=function(){return bme.Date.now()};function wme(n,e,t){var i,s,o,l,u,d,p=0,_=!1,v=!1,b=!0;if(typeof n!="function")throw new TypeError(Oj);e=T4(e)||0,hI(t)&&(_=!!t.leading,v="maxWait"in t,o=v?Eme(T4(t.maxWait)||0,e):o,b="trailing"in t?!!t.trailing:b);function E(G){var j=i,H=s;return i=s=void 0,p=G,l=n.apply(H,j),l}function C(G){return p=G,u=setTimeout(L,e),_?E(G):l}function M(G){var j=G-d,H=G-p,Z=e-j;return v?xme(Z,o-H):Z}function I(G){var j=G-d,H=G-p;return d===void 0||j>=e||j<0||v&&H>=o}function L(){var G=F2();if(I(G))return O(G);u=setTimeout(L,M(G))}function O(G){return u=void 0,b&&i?E(G):(i=s=void 0,l)}function P(){u!==void 0&&clearTimeout(u),p=0,i=d=s=u=void 0}function B(){return u===void 0?l:O(F2())}function z(){var G=F2(),j=I(G);if(i=arguments,s=this,d=G,j){if(u===void 0)return C(d);if(v)return u=setTimeout(L,e),E(d)}return u===void 0&&(u=setTimeout(L,e)),l}return z.cancel=P,z.flush=B,z}function $me(n,e,t){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(Oj);return hI(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),wme(n,e,{leading:i,maxWait:e,trailing:s})}function hI(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function Cme(n){return!!n&&typeof n=="object"}function Mme(n){return typeof n=="symbol"||Cme(n)&&Sme.call(n)==dme}function T4(n){if(typeof n=="number")return n;if(Mme(n))return b4;if(hI(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=hI(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(pme,"");var t=mme.test(n);return t||gme.test(n)?_me(n.slice(2),t?2:8):fme.test(n)?b4:+n}var Ame=$me;const Ime=O1(Ame);var Lj=function(){if(typeof Map<"u")return Map;function n(e,t){var i=-1;return e.some(function(s,o){return s[0]===t?(i=o,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var i=n(this.__entries__,t),s=this.__entries__[i];return s&&s[1]},e.prototype.set=function(t,i){var s=n(this.__entries__,t);~s?this.__entries__[s][1]=i:this.__entries__.push([t,i])},e.prototype.delete=function(t){var i=this.__entries__,s=n(i,t);~s&&i.splice(s,1)},e.prototype.has=function(t){return!!~n(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,i){i===void 0&&(i=null);for(var s=0,o=this.__entries__;s<o.length;s++){var l=o[s];t.call(i,l[1],l[0])}},e}()}(),TD=typeof window<"u"&&typeof document<"u"&&window.document===document,dI=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Rme=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(dI):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),kme=2;function Ome(n,e){var t=!1,i=!1,s=0;function o(){t&&(t=!1,n()),i&&u()}function l(){Rme(o)}function u(){var d=Date.now();if(t){if(d-s<kme)return;i=!0}else t=!0,i=!1,setTimeout(l,e);s=d}return u}var Lme=20,Dme=["top","right","bottom","left","width","height","size","weight"],Nme=typeof MutationObserver<"u",Bme=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Ome(this.refresh.bind(this),Lme)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var t=this.observers_,i=t.indexOf(e);~i&&t.splice(i,1),!t.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!TD||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Nme?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!TD||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var t=e.propertyName,i=t===void 0?"":t,s=Dme.some(function(o){return!!~i.indexOf(o)});s&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),Dj=function(n,e){for(var t=0,i=Object.keys(e);t<i.length;t++){var s=i[t];Object.defineProperty(n,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return n},oE=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||dI},Nj=zR(0,0,0,0);function pI(n){return parseFloat(n)||0}function S4(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(i,s){var o=n["border-"+s+"-width"];return i+pI(o)},0)}function Pme(n){for(var e=["top","right","bottom","left"],t={},i=0,s=e;i<s.length;i++){var o=s[i],l=n["padding-"+o];t[o]=pI(l)}return t}function Fme(n){var e=n.getBBox();return zR(0,0,e.width,e.height)}function zme(n){var e=n.clientWidth,t=n.clientHeight;if(!e&&!t)return Nj;var i=oE(n).getComputedStyle(n),s=Pme(i),o=s.left+s.right,l=s.top+s.bottom,u=pI(i.width),d=pI(i.height);if(i.boxSizing==="border-box"&&(Math.round(u+o)!==e&&(u-=S4(i,"left","right")+o),Math.round(d+l)!==t&&(d-=S4(i,"top","bottom")+l)),!Hme(n)){var p=Math.round(u+o)-e,_=Math.round(d+l)-t;Math.abs(p)!==1&&(u-=p),Math.abs(_)!==1&&(d-=_)}return zR(s.left,s.top,u,d)}var Ume=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof oE(n).SVGGraphicsElement}:function(n){return n instanceof oE(n).SVGElement&&typeof n.getBBox=="function"}}();function Hme(n){return n===oE(n).document.documentElement}function Gme(n){return TD?Ume(n)?Fme(n):zme(n):Nj}function Wme(n){var e=n.x,t=n.y,i=n.width,s=n.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return Dj(l,{x:e,y:t,width:i,height:s,top:t,right:e+i,bottom:s+t,left:e}),l}function zR(n,e,t,i){return{x:n,y:e,width:t,height:i}}var Vme=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=zR(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=Gme(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),jme=function(){function n(e,t){var i=Wme(t);Dj(this,{target:e,contentRect:i})}return n}(),Xme=function(){function n(e,t,i){if(this.activeObservations_=[],this.observations_=new Lj,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof oE(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Vme(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof oE(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(i){return new jme(i.target,i.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),Bj=typeof WeakMap<"u"?new WeakMap:new Lj,Pj=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=Bme.getInstance(),i=new Xme(e,t,this);Bj.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){Pj.prototype[n]=function(){var e;return(e=Bj.get(this))[n].apply(e,arguments)}});var Yme=function(){return typeof dI.ResizeObserver<"u"?dI.ResizeObserver:Pj}(),Kme=["client","offset","scroll","bounds","margin"];function E4(n){var e=[];return Kme.forEach(function(t){n[t]&&e.push(t)}),e}function x4(n,e){var t={};if(e.indexOf("client")>-1&&(t.client={top:n.clientTop,left:n.clientLeft,width:n.clientWidth,height:n.clientHeight}),e.indexOf("offset")>-1&&(t.offset={top:n.offsetTop,left:n.offsetLeft,width:n.offsetWidth,height:n.offsetHeight}),e.indexOf("scroll")>-1&&(t.scroll={top:n.scrollTop,left:n.scrollLeft,width:n.scrollWidth,height:n.scrollHeight}),e.indexOf("bounds")>-1){var i=n.getBoundingClientRect();t.bounds={top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height}}if(e.indexOf("margin")>-1){var s=getComputedStyle(n);t.margin={top:s?parseInt(s.marginTop):0,right:s?parseInt(s.marginRight):0,bottom:s?parseInt(s.marginBottom):0,left:s?parseInt(s.marginLeft):0}}return t}function Jme(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||window}function qme(n){return function(e){var t,i;return i=t=function(s){dP(o,s);function o(){for(var u,d=arguments.length,p=new Array(d),_=0;_<d;_++)p[_]=arguments[_];return u=s.call.apply(s,[this].concat(p))||this,u.state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},u._animationFrameID=null,u._resizeObserver=null,u._node=null,u._window=null,u.measure=function(v){var b=x4(u._node,n||E4(u.props));v&&(b.entry=v[0].contentRect),u._animationFrameID=u._window.requestAnimationFrame(function(){u._resizeObserver!==null&&(u.setState({contentRect:b}),typeof u.props.onResize=="function"&&u.props.onResize(b))})},u._handleRef=function(v){u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.unobserve(u._node),u._node=v,u._window=Jme(u._node);var b=u.props.innerRef;b&&(typeof b=="function"?b(u._node):b.current=u._node),u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.observe(u._node)},u}var l=o.prototype;return l.componentDidMount=function(){this._resizeObserver=this._window!==null&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new Yme(this.measure),this._node!==null&&(this._resizeObserver.observe(this._node),typeof this.props.onResize=="function"&&this.props.onResize(x4(this._node,n||E4(this.props))))},l.componentWillUnmount=function(){this._window!==null&&this._window.cancelAnimationFrame(this._animationFrameID),this._resizeObserver!==null&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},l.render=function(){var d=this.props;d.innerRef,d.onResize;var p=Er(d,["innerRef","onResize"]);return ge.createElement(e,Je({},p,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},o}(ge.Component),t.propTypes={client:ts.bool,offset:ts.bool,scroll:ts.bool,bounds:ts.bool,margin:ts.bool,innerRef:ts.oneOfType([ts.object,ts.func]),onResize:ts.func},i}}var xP=qme()(function(n){var e=n.measure,t=n.measureRef,i=n.contentRect,s=n.children;return s({measure:e,measureRef:t,contentRect:i})});xP.displayName="Measure";xP.propTypes.children=ts.func;const SD=n=>n?Array.isArray(n)?n:[n]:[];class Qme extends Vr.Component{constructor(e){super(e),nc(this,"onResize",t=>{const{resizeHeight:i,resizeWidth:s}=this.props,{height:o,width:l}=t.bounds;this.setDimensions(ty({},i&&{height:o},s&&{width:l}))}),this.setDimensions=Ime(t=>{this.setState(t)},this.props.propagateDimensionsRate/1e3),this.state={height:"100%",width:"100%"}}renderChildren(){const{propagateDimensions:e}=this.props,t=SD(this.props.children).filter(i=>!!i);return Vr.Children.map(t,i=>this.props.withHandle||LE.isA(i)?Vr.cloneElement(i,ty({dimensions:e&&this.state},i.props,{index:this.props.index-1,events:this.props.events})):e?Vr.cloneElement(i,ty({},i.props,{dimensions:this.state})):i)}render(){return Vr.createElement(xP,{bounds:!0,onResize:this.onResize},({measureRef:e})=>Vr.createElement("div",{ref:e,className:"reflex-size-aware"},Vr.createElement("div",{style:this.state},this.renderChildren())))}}class wP extends Vr.Component{constructor(e){super(e),this.state={size:e.size}}static getDerivedStateFromProps(e,t){return e.size!==t.size?ty({},t,{size:e.size}):null}async componentDidUpdate(e,t,i){if(t.size!==this.state.size){const s=SD(this.props.direction);for(let o of s)await this.props.events.emit("element.size",{index:this.props.index,size:this.props.size,direction:o})}}renderChildren(){const e=SD(this.props.children).filter(t=>!!t);return Vr.Children.map(e,t=>this.props.withHandle||LE.isA(t)?Vr.cloneElement(t,ty({},t.props,{index:this.props.index-1,events:this.props.events})):t)}render(){const e=[...this.props.className.split(" "),this.props.orientation,"reflex-element"].join(" ").trim(),t=ty({},this.props.style,{flexGrow:this.props.flex,flexShrink:1,flexBasis:"0%"});return Vr.createElement("div",Je({},FR(this.props),{ref:this.props.innerRef,className:e,style:t}),this.props.propagateDimensions?Vr.createElement(Qme,this.props):this.renderChildren())}}nc(wP,"propTypes",{propagateDimensions:ts.bool,resizeHeight:ts.bool,resizeWidth:ts.bool,className:ts.string,size:ts.number});nc(wP,"defaultProps",{propagateDimensionsRate:100,propagateDimensions:!1,resizeHeight:!0,resizeWidth:!0,direction:[1],className:""});const X_=Vr.forwardRef((n,e)=>Vr.createElement(wP,Je({innerRef:e},n))),Fj="/gpu-programming/assets/BASE_FRONT_GRILL_1-b5goAhwv.glb";var zj={exports:{}},P1={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */P1.ConcurrentRoot=1;P1.ContinuousEventPriority=4;P1.DefaultEventPriority=16;P1.DiscreteEventPriority=1;P1.IdleEventPriority=536870912;P1.LegacyRoot=0;zj.exports=P1;var Zx=zj.exports,Uj={exports:{}},z2={exports:{}},U2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w4;function Zme(){return w4||(w4=1,function(n){function e(q,oe){var se=q.length;q.push(oe);e:for(;0<se;){var pe=se-1>>>1,Se=q[pe];if(0<s(Se,oe))q[pe]=oe,q[se]=Se,se=pe;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var oe=q[0],se=q.pop();if(se!==oe){q[0]=se;e:for(var pe=0,Se=q.length,Fe=Se>>>1;pe<Fe;){var Re=2*(pe+1)-1,qe=q[Re],Ne=Re+1,it=q[Ne];if(0>s(qe,se))Ne<Se&&0>s(it,qe)?(q[pe]=it,q[Ne]=se,pe=Ne):(q[pe]=qe,q[Re]=se,pe=Re);else if(Ne<Se&&0>s(it,se))q[pe]=it,q[Ne]=se,pe=Ne;else break e}}return oe}function s(q,oe){var se=q.sortIndex-oe.sortIndex;return se!==0?se:q.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],_=1,v=null,b=3,E=!1,C=!1,M=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(q){for(var oe=t(p);oe!==null;){if(oe.callback===null)i(p);else if(oe.startTime<=q)i(p),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=t(p)}}function B(q){if(M=!1,P(q),!C)if(t(d)!==null)C=!0,be(z);else{var oe=t(p);oe!==null&&$e(B,oe.startTime-q)}}function z(q,oe){C=!1,M&&(M=!1,L(H),H=-1),E=!0;var se=b;try{for(P(oe),v=t(d);v!==null&&(!(v.expirationTime>oe)||q&&!J());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,b=v.priorityLevel;var Se=pe(v.expirationTime<=oe);oe=n.unstable_now(),typeof Se=="function"?v.callback=Se:v===t(d)&&i(d),P(oe)}else i(d);v=t(d)}if(v!==null)var Fe=!0;else{var Re=t(p);Re!==null&&$e(B,Re.startTime-oe),Fe=!1}return Fe}finally{v=null,b=se,E=!1}}var G=!1,j=null,H=-1,Z=5,ae=-1;function J(){return!(n.unstable_now()-ae<Z)}function te(){if(j!==null){var q=n.unstable_now();ae=q;var oe=!0;try{oe=j(!0,q)}finally{oe?he():(G=!1,j=null)}}else G=!1}var he;if(typeof O=="function")he=function(){O(te)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ce=le.port2;le.port1.onmessage=te,he=function(){ce.postMessage(null)}}else he=function(){I(te,0)};function be(q){j=q,G||(G=!0,he())}function $e(q,oe){H=I(function(){q(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){C||E||(C=!0,be(z))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(q){switch(b){case 1:case 2:case 3:var oe=3;break;default:oe=b}var se=b;b=oe;try{return q()}finally{b=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,oe){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=b;b=q;try{return oe()}finally{b=se}},n.unstable_scheduleCallback=function(q,oe,se){var pe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?pe+se:pe):se=pe,q){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=se+Se,q={id:_++,callback:oe,priorityLevel:q,startTime:se,expirationTime:Se,sortIndex:-1},se>pe?(q.sortIndex=se,e(p,q),t(d)===null&&q===t(p)&&(M?(L(H),H=-1):M=!0,$e(B,se-pe))):(q.sortIndex=Se,e(d,q),C||E||(C=!0,be(z))),q},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(q){var oe=b;return function(){var se=b;b=oe;try{return q.apply(this,arguments)}finally{b=se}}}}(U2)),U2}var $4;function ege(){return $4||($4=1,z2.exports=Zme()),z2.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tge=function(e){var t={},i=ge,s=ege(),o=Object.assign;function l(h){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+h,$=1;$<arguments.length;$++)g+="&args[]="+encodeURIComponent(arguments[$]);return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d=Symbol.for("react.element"),p=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),z=Symbol.iterator;function G(h){return h===null||typeof h!="object"?null:(h=z&&h[z]||h["@@iterator"],typeof h=="function"?h:null)}function j(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case _:return"Fragment";case p:return"Portal";case b:return"Profiler";case v:return"StrictMode";case I:return"Suspense";case L:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case C:return(h.displayName||"Context")+".Consumer";case E:return(h._context.displayName||"Context")+".Provider";case M:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case O:return g=h.displayName||null,g!==null?g:j(h.type)||"Memo";case P:g=h._payload,h=h._init;try{return j(h(g))}catch{}}return null}function H(h){var g=h.type;switch(h.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=g.render,h=h.displayName||h.name||"",g.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(g);case 8:return g===v?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function Z(h){var g=h,$=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,g.flags&4098&&($=g.return),h=g.return;while(h)}return g.tag===3?$:null}function ae(h){if(Z(h)!==h)throw Error(l(188))}function J(h){var g=h.alternate;if(!g){if(g=Z(h),g===null)throw Error(l(188));return g!==h?null:h}for(var $=h,A=g;;){var N=$.return;if(N===null)break;var W=N.alternate;if(W===null){if(A=N.return,A!==null){$=A;continue}break}if(N.child===W.child){for(W=N.child;W;){if(W===$)return ae(N),h;if(W===A)return ae(N),g;W=W.sibling}throw Error(l(188))}if($.return!==A.return)$=N,A=W;else{for(var de=!1,ke=N.child;ke;){if(ke===$){de=!0,$=N,A=W;break}if(ke===A){de=!0,A=N,$=W;break}ke=ke.sibling}if(!de){for(ke=W.child;ke;){if(ke===$){de=!0,$=W,A=N;break}if(ke===A){de=!0,A=W,$=N;break}ke=ke.sibling}if(!de)throw Error(l(189))}}if($.alternate!==A)throw Error(l(190))}if($.tag!==3)throw Error(l(188));return $.stateNode.current===$?h:g}function te(h){return h=J(h),h!==null?he(h):null}function he(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var g=he(h);if(g!==null)return g;h=h.sibling}return null}function le(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var g=le(h);if(g!==null)return g}h=h.sibling}return null}var ce=Array.isArray,be=e.getPublicInstance,$e=e.getRootHostContext,q=e.getChildHostContext,oe=e.prepareForCommit,se=e.resetAfterCommit,pe=e.createInstance,Se=e.appendInitialChild,Fe=e.finalizeInitialChildren,Re=e.prepareUpdate,qe=e.shouldSetTextContent,Ne=e.createTextInstance,it=e.scheduleTimeout,st=e.cancelTimeout,pt=e.noTimeout,dt=e.isPrimaryRenderer,Ue=e.supportsMutation,Ae=e.supportsPersistence,je=e.supportsHydration,nt=e.getInstanceFromNode,tt=e.preparePortalMount,Dt=e.getCurrentEventPriority,Rt=e.detachDeletedInstance,yt=e.supportsMicrotasks,Ct=e.scheduleMicrotask,Mt=e.supportsTestSelectors,mt=e.findFiberRoot,xe=e.getBoundingRect,ie=e.getTextContent,we=e.isHiddenSubtree,ct=e.matchAccessibilityRole,Tt=e.setFocusIfFocusable,At=e.setupIntersectionObserver,ft=e.appendChild,Ke=e.appendChildToContainer,Oe=e.commitTextUpdate,Q=e.commitMount,ne=e.commitUpdate,fe=e.insertBefore,Ie=e.insertInContainerBefore,Ye=e.removeChild,Gt=e.removeChildFromContainer,He=e.resetTextContent,Zt=e.hideInstance,_t=e.hideTextInstance,Kt=e.unhideInstance,Yt=e.unhideTextInstance,Rn=e.clearContainer,ii=e.cloneInstance,Dr=e.createContainerChildSet,Si=e.appendChildToContainerChildSet,xr=e.finalizeContainerChildren,fr=e.replaceContainerChildren,re=e.cloneHiddenInstance,Te=e.cloneHiddenTextInstance,Ge=e.canHydrateInstance,ot=e.canHydrateTextInstance,Ft=e.canHydrateSuspenseInstance,nn=e.isSuspenseInstancePending,On=e.isSuspenseInstanceFallback,De=e.registerSuspenseInstanceRetry,gt=e.getNextHydratableSibling,$t=e.getFirstHydratableChild,vt=e.getFirstHydratableChildWithinContainer,Wt=e.getFirstHydratableChildWithinSuspenseInstance,Un=e.hydrateInstance,tr=e.hydrateTextInstance,mr=e.hydrateSuspenseInstance,wr=e.getNextHydratableInstanceAfterSuspenseInstance,si=e.commitHydratedContainer,Nr=e.commitHydratedSuspenseInstance,jr=e.clearSuspenseBoundary,bs=e.clearSuspenseBoundaryFromContainer,Ia=e.shouldDeleteUnhydratedTailInstances,Eo=e.didNotMatchHydratedContainerTextInstance,Wl=e.didNotMatchHydratedTextInstance,en;function Ar(h){if(en===void 0)try{throw Error()}catch($){var g=$.stack.trim().match(/\n( *(at )?)/);en=g&&g[1]||""}return`
`+en+h}var qa=!1;function Ra(h,g){if(!h||qa)return"";qa=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(St){var A=St}Reflect.construct(h,[],g)}else{try{g.call()}catch(St){A=St}h.call(g.prototype)}else{try{throw Error()}catch(St){A=St}h()}}catch(St){if(St&&A&&typeof St.stack=="string"){for(var N=St.stack.split(`
`),W=A.stack.split(`
`),de=N.length-1,ke=W.length-1;1<=de&&0<=ke&&N[de]!==W[ke];)ke--;for(;1<=de&&0<=ke;de--,ke--)if(N[de]!==W[ke]){if(de!==1||ke!==1)do if(de--,ke--,0>ke||N[de]!==W[ke]){var Qe=`
`+N[de].replace(" at new "," at ");return h.displayName&&Qe.includes("<anonymous>")&&(Qe=Qe.replace("<anonymous>",h.displayName)),Qe}while(1<=de&&0<=ke);break}}}finally{qa=!1,Error.prepareStackTrace=$}return(h=h?h.displayName||h.name:"")?Ar(h):""}var Bs=Object.prototype.hasOwnProperty,Ps=[],Li=-1;function Ir(h){return{current:h}}function Cn(h){0>Li||(h.current=Ps[Li],Ps[Li]=null,Li--)}function Mr(h,g){Li++,Ps[Li]=h.current,h.current=g}var Ur={},_r=Ir(Ur),Di=Ir(!1),Ts=Ur;function hi(h,g){var $=h.type.contextTypes;if(!$)return Ur;var A=h.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===g)return A.__reactInternalMemoizedMaskedChildContext;var N={},W;for(W in $)N[W]=g[W];return A&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=g,h.__reactInternalMemoizedMaskedChildContext=N),N}function fs(h){return h=h.childContextTypes,h!=null}function Qa(){Cn(Di),Cn(_r)}function ka(h,g,$){if(_r.current!==Ur)throw Error(l(168));Mr(_r,g),Mr(Di,$)}function lc(h,g,$){var A=h.stateNode;if(g=g.childContextTypes,typeof A.getChildContext!="function")return $;A=A.getChildContext();for(var N in A)if(!(N in g))throw Error(l(108,H(h)||"Unknown",N));return o({},$,A)}function uc(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Ur,Ts=_r.current,Mr(_r,h),Mr(Di,Di.current),!0}function js(h,g,$){var A=h.stateNode;if(!A)throw Error(l(169));$?(h=lc(h,g,Ts),A.__reactInternalMemoizedMergedChildContext=h,Cn(Di),Cn(_r),Mr(_r,h)):Cn(Di),Mr(Di,$)}var Yo=Math.clz32?Math.clz32:ch,Vl=Math.log,pu=Math.LN2;function ch(h){return h>>>=0,h===0?32:31-(Vl(h)/pu|0)|0}var Ko=64,gr=4194304;function Ei(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Rc(h,g){var $=h.pendingLanes;if($===0)return 0;var A=0,N=h.suspendedLanes,W=h.pingedLanes,de=$&268435455;if(de!==0){var ke=de&~N;ke!==0?A=Ei(ke):(W&=de,W!==0&&(A=Ei(W)))}else de=$&~N,de!==0?A=Ei(de):W!==0&&(A=Ei(W));if(A===0)return 0;if(g!==0&&g!==A&&!(g&N)&&(N=A&-A,W=g&-g,N>=W||N===16&&(W&4194240)!==0))return g;if(A&4&&(A|=$&16),g=h.entangledLanes,g!==0)for(h=h.entanglements,g&=A;0<g;)$=31-Yo(g),N=1<<$,A|=h[$],g&=~N;return A}function hh(h,g){switch(h){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kc(h,g){for(var $=h.suspendedLanes,A=h.pingedLanes,N=h.expirationTimes,W=h.pendingLanes;0<W;){var de=31-Yo(W),ke=1<<de,Qe=N[de];Qe===-1?(!(ke&$)||ke&A)&&(N[de]=hh(ke,g)):Qe<=g&&(h.expiredLanes|=ke),W&=~ke}}function Tl(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function fu(h){for(var g=[],$=0;31>$;$++)g.push(h);return g}function Sl(h,g,$){h.pendingLanes|=g,g!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,g=31-Yo(g),h[g]=$}function El(h,g){var $=h.pendingLanes&~g;h.pendingLanes=g,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=g,h.mutableReadLanes&=g,h.entangledLanes&=g,g=h.entanglements;var A=h.eventTimes;for(h=h.expirationTimes;0<$;){var N=31-Yo($),W=1<<N;g[N]=0,A[N]=-1,h[N]=-1,$&=~W}}function yr(h,g){var $=h.entangledLanes|=g;for(h=h.entanglements;$;){var A=31-Yo($),N=1<<A;N&g|h[A]&g&&(h[A]|=g),$&=~N}}var vr=0;function jl(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var Za=s.unstable_scheduleCallback,el=s.unstable_cancelCallback,mu=s.unstable_shouldYield,Ki=s.unstable_requestPaint,ms=s.unstable_now,tl=s.unstable_ImmediatePriority,Sd=s.unstable_UserBlockingPriority,no=s.unstable_NormalPriority,Bu=s.unstable_IdlePriority,aa=null,gu=null;function ir(h){if(gu&&typeof gu.onCommitFiberRoot=="function")try{gu.onCommitFiberRoot(aa,h,void 0,(h.current.flags&128)===128)}catch{}}function zn(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var Ss=typeof Object.is=="function"?Object.is:zn,ro=null,Pu=!1,_u=!1;function dh(h){ro===null?ro=[h]:ro.push(h)}function Oa(h){Pu=!0,dh(h)}function la(){if(!_u&&ro!==null){_u=!0;var h=0,g=vr;try{var $=ro;for(vr=1;h<$.length;h++){var A=$[h];do A=A(!0);while(A!==null)}ro=null,Pu=!1}catch(N){throw ro!==null&&(ro=ro.slice(h+1)),Za(tl,la),N}finally{vr=g,_u=!1}}return null}var Fu=u.ReactCurrentBatchConfig;function Tr(h,g){if(Ss(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var $=Object.keys(h),A=Object.keys(g);if($.length!==A.length)return!1;for(A=0;A<$.length;A++){var N=$[A];if(!Bs.call(g,N)||!Ss(h[N],g[N]))return!1}return!0}function Is(h){switch(h.tag){case 5:return Ar(h.type);case 16:return Ar("Lazy");case 13:return Ar("Suspense");case 19:return Ar("SuspenseList");case 0:case 2:case 15:return h=Ra(h.type,!1),h;case 11:return h=Ra(h.type.render,!1),h;case 1:return h=Ra(h.type,!0),h;default:return""}}function yi(h,g){if(h&&h.defaultProps){g=o({},g),h=h.defaultProps;for(var $ in h)g[$]===void 0&&(g[$]=h[$]);return g}return g}var xi=Ir(null),ua=null,Qr=null,yu=null;function xo(){yu=Qr=ua=null}function vu(h,g,$){dt?(Mr(xi,g._currentValue),g._currentValue=$):(Mr(xi,g._currentValue2),g._currentValue2=$)}function nl(h){var g=xi.current;Cn(xi),dt?h._currentValue=g:h._currentValue2=g}function Ni(h,g,$){for(;h!==null;){var A=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,A!==null&&(A.childLanes|=g)):A!==null&&(A.childLanes&g)!==g&&(A.childLanes|=g),h===$)break;h=h.return}}function wi(h,g){ua=h,yu=Qr=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&g&&(Ai=!0),h.firstContext=null)}function Hn(h){var g=dt?h._currentValue:h._currentValue2;if(yu!==h)if(h={context:h,memoizedValue:g,next:null},Qr===null){if(ua===null)throw Error(l(308));Qr=h,ua.dependencies={lanes:0,firstContext:h}}else Qr=Qr.next=h;return g}var $i=null,Xr=!1;function ad(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bu(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Gi(h,g){return{eventTime:h,lane:g,tag:0,payload:null,callback:null,next:null}}function La(h,g){var $=h.updateQueue;$!==null&&($=$.shared,Or!==null&&h.mode&1&&!(Zn&2)?(h=$.interleaved,h===null?(g.next=g,$i===null?$i=[$]:$i.push($)):(g.next=h.next,h.next=g),$.interleaved=g):(h=$.pending,h===null?g.next=g:(g.next=h.next,h.next=g),$.pending=g))}function ph(h,g,$){if(g=g.updateQueue,g!==null&&(g=g.shared,($&4194240)!==0)){var A=g.lanes;A&=h.pendingLanes,$|=A,g.lanes=$,yr(h,$)}}function hr(h,g){var $=h.updateQueue,A=h.alternate;if(A!==null&&(A=A.updateQueue,$===A)){var N=null,W=null;if($=$.firstBaseUpdate,$!==null){do{var de={eventTime:$.eventTime,lane:$.lane,tag:$.tag,payload:$.payload,callback:$.callback,next:null};W===null?N=W=de:W=W.next=de,$=$.next}while($!==null);W===null?N=W=g:W=W.next=g}else N=W=g;$={baseState:A.baseState,firstBaseUpdate:N,lastBaseUpdate:W,shared:A.shared,effects:A.effects},h.updateQueue=$;return}h=$.lastBaseUpdate,h===null?$.firstBaseUpdate=g:h.next=g,$.lastBaseUpdate=g}function Jo(h,g,$,A){var N=h.updateQueue;Xr=!1;var W=N.firstBaseUpdate,de=N.lastBaseUpdate,ke=N.shared.pending;if(ke!==null){N.shared.pending=null;var Qe=ke,St=Qe.next;Qe.next=null,de===null?W=St:de.next=St,de=Qe;var Jt=h.alternate;Jt!==null&&(Jt=Jt.updateQueue,ke=Jt.lastBaseUpdate,ke!==de&&(ke===null?Jt.firstBaseUpdate=St:ke.next=St,Jt.lastBaseUpdate=Qe))}if(W!==null){var ln=N.baseState;de=0,Jt=St=Qe=null,ke=W;do{var yn=ke.lane,vn=ke.eventTime;if((A&yn)===yn){Jt!==null&&(Jt=Jt.next={eventTime:vn,lane:0,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null});e:{var fn=h,Lr=ke;switch(yn=g,vn=$,Lr.tag){case 1:if(fn=Lr.payload,typeof fn=="function"){ln=fn.call(vn,ln,yn);break e}ln=fn;break e;case 3:fn.flags=fn.flags&-65537|128;case 0:if(fn=Lr.payload,yn=typeof fn=="function"?fn.call(vn,ln,yn):fn,yn==null)break e;ln=o({},ln,yn);break e;case 2:Xr=!0}}ke.callback!==null&&ke.lane!==0&&(h.flags|=64,yn=N.effects,yn===null?N.effects=[ke]:yn.push(ke))}else vn={eventTime:vn,lane:yn,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null},Jt===null?(St=Jt=vn,Qe=ln):Jt=Jt.next=vn,de|=yn;if(ke=ke.next,ke===null){if(ke=N.shared.pending,ke===null)break;yn=ke,ke=yn.next,yn.next=null,N.lastBaseUpdate=yn,N.shared.pending=null}}while(!0);if(Jt===null&&(Qe=ln),N.baseState=Qe,N.firstBaseUpdate=St,N.lastBaseUpdate=Jt,g=N.shared.interleaved,g!==null){N=g;do de|=N.lane,N=N.next;while(N!==g)}else W===null&&(N.shared.lanes=0);Yu|=de,h.lanes=de,h.memoizedState=ln}}function ld(h,g,$){if(h=g.effects,g.effects=null,h!==null)for(g=0;g<h.length;g++){var A=h[g],N=A.callback;if(N!==null){if(A.callback=null,A=$,typeof N!="function")throw Error(l(191,N));N.call(A)}}}var np=new i.Component().refs;function Oc(h,g,$,A){g=h.memoizedState,$=$(A,g),$=$==null?g:o({},g,$),h.memoizedState=$,h.lanes===0&&(h.updateQueue.baseState=$)}var rp={isMounted:function(h){return(h=h._reactInternals)?Z(h)===h:!1},enqueueSetState:function(h,g,$){h=h._reactInternals;var A=ys(),N=ks(h),W=Gi(A,N);W.payload=g,$!=null&&(W.callback=$),La(h,W),g=Wa(h,N,A),g!==null&&ph(g,h,N)},enqueueReplaceState:function(h,g,$){h=h._reactInternals;var A=ys(),N=ks(h),W=Gi(A,N);W.tag=1,W.payload=g,$!=null&&(W.callback=$),La(h,W),g=Wa(h,N,A),g!==null&&ph(g,h,N)},enqueueForceUpdate:function(h,g){h=h._reactInternals;var $=ys(),A=ks(h),N=Gi($,A);N.tag=2,g!=null&&(N.callback=g),La(h,N),g=Wa(h,A,$),g!==null&&ph(g,h,A)}};function kp(h,g,$,A,N,W,de){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(A,W,de):g.prototype&&g.prototype.isPureReactComponent?!Tr($,A)||!Tr(N,W):!0}function mf(h,g,$){var A=!1,N=Ur,W=g.contextType;return typeof W=="object"&&W!==null?W=Hn(W):(N=fs(g)?Ts:_r.current,A=g.contextTypes,W=(A=A!=null)?hi(h,N):Ur),g=new g($,W),h.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=rp,h.stateNode=g,g._reactInternals=h,A&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=N,h.__reactInternalMemoizedMaskedChildContext=W),g}function Ed(h,g,$,A){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps($,A),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps($,A),g.state!==h&&rp.enqueueReplaceState(g,g.state,null)}function Xl(h,g,$,A){var N=h.stateNode;N.props=$,N.state=h.memoizedState,N.refs=np,ad(h);var W=g.contextType;typeof W=="object"&&W!==null?N.context=Hn(W):(W=fs(g)?Ts:_r.current,N.context=hi(h,W)),N.state=h.memoizedState,W=g.getDerivedStateFromProps,typeof W=="function"&&(Oc(h,g,W,$),N.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(g=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),g!==N.state&&rp.enqueueReplaceState(N,N.state,null),Jo(h,$,N,A),N.state=h.memoizedState),typeof N.componentDidMount=="function"&&(h.flags|=4194308)}var Rs=[],zu=0,fh=null,Da=0,li=[],Sr=0,io=null,Na=1,Po="";function Yl(h,g){Rs[zu++]=Da,Rs[zu++]=fh,fh=h,Da=g}function Kl(h,g,$){li[Sr++]=Na,li[Sr++]=Po,li[Sr++]=io,io=h;var A=Na;h=Po;var N=32-Yo(A)-1;A&=~(1<<N),$+=1;var W=32-Yo(g)+N;if(30<W){var de=N-N%5;W=(A&(1<<de)-1).toString(32),A>>=de,N-=de,Na=1<<32-Yo(g)+N|$<<N|A,Po=W+h}else Na=1<<W|$<<N|A,Po=h}function Lh(h){h.return!==null&&(Yl(h,1),Kl(h,1,0))}function Hr(h){for(;h===fh;)fh=Rs[--zu],Rs[zu]=null,Da=Rs[--zu],Rs[zu]=null;for(;h===io;)io=li[--Sr],li[Sr]=null,Po=li[--Sr],li[Sr]=null,Na=li[--Sr],li[Sr]=null}var Ci=null,br=null,Wi=!1,ca=!1,Tu=null;function ip(h,g){var $=mo(5,null,null,0);$.elementType="DELETED",$.stateNode=g,$.return=h,g=h.deletions,g===null?(h.deletions=[$],h.flags|=16):g.push($)}function sp(h,g){switch(h.tag){case 5:return g=Ge(g,h.type,h.pendingProps),g!==null?(h.stateNode=g,Ci=h,br=$t(g),!0):!1;case 6:return g=ot(g,h.pendingProps),g!==null?(h.stateNode=g,Ci=h,br=null,!0):!1;case 13:if(g=Ft(g),g!==null){var $=io!==null?{id:Na,overflow:Po}:null;return h.memoizedState={dehydrated:g,treeContext:$,retryLane:1073741824},$=mo(18,null,null,0),$.stateNode=g,$.return=h,h.child=$,Ci=h,br=null,!0}return!1;default:return!1}}function ud(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Uu(h){if(Wi){var g=br;if(g){var $=g;if(!sp(h,g)){if(ud(h))throw Error(l(418));g=gt($);var A=Ci;g&&sp(h,g)?ip(A,$):(h.flags=h.flags&-4097|2,Wi=!1,Ci=h)}}else{if(ud(h))throw Error(l(418));h.flags=h.flags&-4097|2,Wi=!1,Ci=h}}}function rl(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Ci=h}function Lc(h){if(!je||h!==Ci)return!1;if(!Wi)return rl(h),Wi=!0,!1;if(h.tag!==3&&(h.tag!==5||Ia(h.type)&&!qe(h.type,h.memoizedProps))){var g=br;if(g){if(ud(h)){for(h=br;h;)h=gt(h);throw Error(l(418))}for(;g;)ip(h,g),g=gt(g)}}if(rl(h),h.tag===13){if(!je)throw Error(l(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));br=wr(h)}else br=Ci?gt(h.stateNode):null;return!0}function Dh(){je&&(br=Ci=null,ca=Wi=!1)}function Hu(h){Tu===null?Tu=[h]:Tu.push(h)}function Jl(h,g,$){if(h=$.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if($._owner){if($=$._owner,$){if($.tag!==1)throw Error(l(309));var A=$.stateNode}if(!A)throw Error(l(147,h));var N=A,W=""+h;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===W?g.ref:(g=function(de){var ke=N.refs;ke===np&&(ke=N.refs={}),de===null?delete ke[W]:ke[W]=de},g._stringRef=W,g)}if(typeof h!="string")throw Error(l(284));if(!$._owner)throw Error(l(290,h))}return h}function Fs(h,g){throw h=Object.prototype.toString.call(g),Error(l(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h))}function ql(h){var g=h._init;return g(h._payload)}function Nh(h){function g(Ce,Le){if(h){var rt=Ce.deletions;rt===null?(Ce.deletions=[Le],Ce.flags|=16):rt.push(Le)}}function $(Ce,Le){if(!h)return null;for(;Le!==null;)g(Ce,Le),Le=Le.sibling;return null}function A(Ce,Le){for(Ce=new Map;Le!==null;)Le.key!==null?Ce.set(Le.key,Le):Ce.set(Le.index,Le),Le=Le.sibling;return Ce}function N(Ce,Le){return Ce=go(Ce,Le),Ce.index=0,Ce.sibling=null,Ce}function W(Ce,Le,rt){return Ce.index=rt,h?(rt=Ce.alternate,rt!==null?(rt=rt.index,rt<Le?(Ce.flags|=2,Le):rt):(Ce.flags|=2,Le)):(Ce.flags|=1048576,Le)}function de(Ce){return h&&Ce.alternate===null&&(Ce.flags|=2),Ce}function ke(Ce,Le,rt,Ut){return Le===null||Le.tag!==6?(Le=ti(rt,Ce.mode,Ut),Le.return=Ce,Le):(Le=N(Le,rt),Le.return=Ce,Le)}function Qe(Ce,Le,rt,Ut){var rn=rt.type;return rn===_?Jt(Ce,Le,rt.props.children,Ut,rt.key):Le!==null&&(Le.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===P&&ql(rn)===Le.type)?(Ut=N(Le,rt.props),Ut.ref=Jl(Ce,Le,rt),Ut.return=Ce,Ut):(Ut=Ll(rt.type,rt.key,rt.props,null,Ce.mode,Ut),Ut.ref=Jl(Ce,Le,rt),Ut.return=Ce,Ut)}function St(Ce,Le,rt,Ut){return Le===null||Le.tag!==4||Le.stateNode.containerInfo!==rt.containerInfo||Le.stateNode.implementation!==rt.implementation?(Le=ls(rt,Ce.mode,Ut),Le.return=Ce,Le):(Le=N(Le,rt.children||[]),Le.return=Ce,Le)}function Jt(Ce,Le,rt,Ut,rn){return Le===null||Le.tag!==7?(Le=Va(rt,Ce.mode,Ut,rn),Le.return=Ce,Le):(Le=N(Le,rt),Le.return=Ce,Le)}function ln(Ce,Le,rt){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return Le=ti(""+Le,Ce.mode,rt),Le.return=Ce,Le;if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case d:return rt=Ll(Le.type,Le.key,Le.props,null,Ce.mode,rt),rt.ref=Jl(Ce,null,Le),rt.return=Ce,rt;case p:return Le=ls(Le,Ce.mode,rt),Le.return=Ce,Le;case P:var Ut=Le._init;return ln(Ce,Ut(Le._payload),rt)}if(ce(Le)||G(Le))return Le=Va(Le,Ce.mode,rt,null),Le.return=Ce,Le;Fs(Ce,Le)}return null}function yn(Ce,Le,rt,Ut){var rn=Le!==null?Le.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number")return rn!==null?null:ke(Ce,Le,""+rt,Ut);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case d:return rt.key===rn?Qe(Ce,Le,rt,Ut):null;case p:return rt.key===rn?St(Ce,Le,rt,Ut):null;case P:return rn=rt._init,yn(Ce,Le,rn(rt._payload),Ut)}if(ce(rt)||G(rt))return rn!==null?null:Jt(Ce,Le,rt,Ut,null);Fs(Ce,rt)}return null}function vn(Ce,Le,rt,Ut,rn){if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number")return Ce=Ce.get(rt)||null,ke(Le,Ce,""+Ut,rn);if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case d:return Ce=Ce.get(Ut.key===null?rt:Ut.key)||null,Qe(Le,Ce,Ut,rn);case p:return Ce=Ce.get(Ut.key===null?rt:Ut.key)||null,St(Le,Ce,Ut,rn);case P:var Sn=Ut._init;return vn(Ce,Le,rt,Sn(Ut._payload),rn)}if(ce(Ut)||G(Ut))return Ce=Ce.get(rt)||null,Jt(Le,Ce,Ut,rn,null);Fs(Le,Ut)}return null}function fn(Ce,Le,rt,Ut){for(var rn=null,Sn=null,An=Le,Bn=Le=0,cr=null;An!==null&&Bn<rt.length;Bn++){An.index>Bn?(cr=An,An=null):cr=An.sibling;var Cr=yn(Ce,An,rt[Bn],Ut);if(Cr===null){An===null&&(An=cr);break}h&&An&&Cr.alternate===null&&g(Ce,An),Le=W(Cr,Le,Bn),Sn===null?rn=Cr:Sn.sibling=Cr,Sn=Cr,An=cr}if(Bn===rt.length)return $(Ce,An),Wi&&Yl(Ce,Bn),rn;if(An===null){for(;Bn<rt.length;Bn++)An=ln(Ce,rt[Bn],Ut),An!==null&&(Le=W(An,Le,Bn),Sn===null?rn=An:Sn.sibling=An,Sn=An);return Wi&&Yl(Ce,Bn),rn}for(An=A(Ce,An);Bn<rt.length;Bn++)cr=vn(An,Ce,Bn,rt[Bn],Ut),cr!==null&&(h&&cr.alternate!==null&&An.delete(cr.key===null?Bn:cr.key),Le=W(cr,Le,Bn),Sn===null?rn=cr:Sn.sibling=cr,Sn=cr);return h&&An.forEach(function(Dl){return g(Ce,Dl)}),Wi&&Yl(Ce,Bn),rn}function Lr(Ce,Le,rt,Ut){var rn=G(rt);if(typeof rn!="function")throw Error(l(150));if(rt=rn.call(rt),rt==null)throw Error(l(151));for(var Sn=rn=null,An=Le,Bn=Le=0,cr=null,Cr=rt.next();An!==null&&!Cr.done;Bn++,Cr=rt.next()){An.index>Bn?(cr=An,An=null):cr=An.sibling;var Dl=yn(Ce,An,Cr.value,Ut);if(Dl===null){An===null&&(An=cr);break}h&&An&&Dl.alternate===null&&g(Ce,An),Le=W(Dl,Le,Bn),Sn===null?rn=Dl:Sn.sibling=Dl,Sn=Dl,An=cr}if(Cr.done)return $(Ce,An),Wi&&Yl(Ce,Bn),rn;if(An===null){for(;!Cr.done;Bn++,Cr=rt.next())Cr=ln(Ce,Cr.value,Ut),Cr!==null&&(Le=W(Cr,Le,Bn),Sn===null?rn=Cr:Sn.sibling=Cr,Sn=Cr);return Wi&&Yl(Ce,Bn),rn}for(An=A(Ce,An);!Cr.done;Bn++,Cr=rt.next())Cr=vn(An,Ce,Bn,Cr.value,Ut),Cr!==null&&(h&&Cr.alternate!==null&&An.delete(Cr.key===null?Bn:Cr.key),Le=W(Cr,Le,Bn),Sn===null?rn=Cr:Sn.sibling=Cr,Sn=Cr);return h&&An.forEach(function(lp){return g(Ce,lp)}),Wi&&Yl(Ce,Bn),rn}function bt(Ce,Le,rt,Ut){if(typeof rt=="object"&&rt!==null&&rt.type===_&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case d:e:{for(var rn=rt.key,Sn=Le;Sn!==null;){if(Sn.key===rn){if(rn=rt.type,rn===_){if(Sn.tag===7){$(Ce,Sn.sibling),Le=N(Sn,rt.props.children),Le.return=Ce,Ce=Le;break e}}else if(Sn.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===P&&ql(rn)===Sn.type){$(Ce,Sn.sibling),Le=N(Sn,rt.props),Le.ref=Jl(Ce,Sn,rt),Le.return=Ce,Ce=Le;break e}$(Ce,Sn);break}else g(Ce,Sn);Sn=Sn.sibling}rt.type===_?(Le=Va(rt.props.children,Ce.mode,Ut,rt.key),Le.return=Ce,Ce=Le):(Ut=Ll(rt.type,rt.key,rt.props,null,Ce.mode,Ut),Ut.ref=Jl(Ce,Le,rt),Ut.return=Ce,Ce=Ut)}return de(Ce);case p:e:{for(Sn=rt.key;Le!==null;){if(Le.key===Sn)if(Le.tag===4&&Le.stateNode.containerInfo===rt.containerInfo&&Le.stateNode.implementation===rt.implementation){$(Ce,Le.sibling),Le=N(Le,rt.children||[]),Le.return=Ce,Ce=Le;break e}else{$(Ce,Le);break}else g(Ce,Le);Le=Le.sibling}Le=ls(rt,Ce.mode,Ut),Le.return=Ce,Ce=Le}return de(Ce);case P:return Sn=rt._init,bt(Ce,Le,Sn(rt._payload),Ut)}if(ce(rt))return fn(Ce,Le,rt,Ut);if(G(rt))return Lr(Ce,Le,rt,Ut);Fs(Ce,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"?(rt=""+rt,Le!==null&&Le.tag===6?($(Ce,Le.sibling),Le=N(Le,rt),Le.return=Ce,Ce=Le):($(Ce,Le),Le=ti(rt,Ce.mode,Ut),Le.return=Ce,Ce=Le),de(Ce)):$(Ce,Le)}return bt}var Dc=Nh(!0),Nc=Nh(!1),ns={},Br=Ir(ns),xl=Ir(ns),Ba=Ir(ns);function Ql(h){if(h===ns)throw Error(l(174));return h}function Su(h,g){Mr(Ba,g),Mr(xl,h),Mr(Br,ns),h=$e(g),Cn(Br),Mr(Br,h)}function mh(){Cn(Br),Cn(xl),Cn(Ba)}function xd(h){var g=Ql(Ba.current),$=Ql(Br.current);g=q($,h.type,g),$!==g&&(Mr(xl,h),Mr(Br,g))}function di(h){xl.current===h&&(Cn(Br),Cn(xl))}var ye=Ir(0);function Ve(h){for(var g=h;g!==null;){if(g.tag===13){var $=g.memoizedState;if($!==null&&($=$.dehydrated,$===null||nn($)||On($)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Be=[];function kt(){for(var h=0;h<Be.length;h++){var g=Be[h];dt?g._workInProgressVersionPrimary=null:g._workInProgressVersionSecondary=null}Be.length=0}var tn=u.ReactCurrentDispatcher,Mn=u.ReactCurrentBatchConfig,Xn=0,gn=null,Pr=null,so=null,vi=!1,oo=!1,il=0,Bi=0;function gs(){throw Error(l(321))}function Eu(h,g){if(g===null)return!1;for(var $=0;$<g.length&&$<h.length;$++)if(!Ss(h[$],g[$]))return!1;return!0}function Yn(h,g,$,A,N,W){if(Xn=W,gn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,tn.current=h===null||h.memoizedState===null?ju:_h,h=$(A,N),oo){W=0;do{if(oo=!1,il=0,25<=W)throw Error(l(301));W+=1,so=Pr=null,g.updateQueue=null,tn.current=sl,h=$(A,N)}while(oo)}if(tn.current=Vu,g=Pr!==null&&Pr.next!==null,Xn=0,so=Pr=gn=null,vi=!1,g)throw Error(l(300));return h}function ha(){var h=il!==0;return il=0,h}function Xs(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return so===null?gn.memoizedState=so=h:so=so.next=h,so}function zs(){if(Pr===null){var h=gn.alternate;h=h!==null?h.memoizedState:null}else h=Pr.next;var g=so===null?gn.memoizedState:so.next;if(g!==null)so=g,Pr=h;else{if(h===null)throw Error(l(310));Pr=h,h={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},so===null?gn.memoizedState=so=h:so=so.next=h}return so}function Pa(h,g){return typeof g=="function"?g(h):g}function Bh(h){var g=zs(),$=g.queue;if($===null)throw Error(l(311));$.lastRenderedReducer=h;var A=Pr,N=A.baseQueue,W=$.pending;if(W!==null){if(N!==null){var de=N.next;N.next=W.next,W.next=de}A.baseQueue=N=W,$.pending=null}if(N!==null){W=N.next,A=A.baseState;var ke=de=null,Qe=null,St=W;do{var Jt=St.lane;if((Xn&Jt)===Jt)Qe!==null&&(Qe=Qe.next={lane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),A=St.hasEagerState?St.eagerState:h(A,St.action);else{var ln={lane:Jt,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null};Qe===null?(ke=Qe=ln,de=A):Qe=Qe.next=ln,gn.lanes|=Jt,Yu|=Jt}St=St.next}while(St!==null&&St!==W);Qe===null?de=A:Qe.next=ke,Ss(A,g.memoizedState)||(Ai=!0),g.memoizedState=A,g.baseState=de,g.baseQueue=Qe,$.lastRenderedState=A}if(h=$.interleaved,h!==null){N=h;do W=N.lane,gn.lanes|=W,Yu|=W,N=N.next;while(N!==h)}else N===null&&($.lanes=0);return[g.memoizedState,$.dispatch]}function gh(h){var g=zs(),$=g.queue;if($===null)throw Error(l(311));$.lastRenderedReducer=h;var A=$.dispatch,N=$.pending,W=g.memoizedState;if(N!==null){$.pending=null;var de=N=N.next;do W=h(W,de.action),de=de.next;while(de!==N);Ss(W,g.memoizedState)||(Ai=!0),g.memoizedState=W,g.baseQueue===null&&(g.baseState=W),$.lastRenderedState=W}return[W,A]}function cc(){}function qo(h,g){var $=gn,A=zs(),N=g(),W=!Ss(A.memoizedState,N);if(W&&(A.memoizedState=N,Ai=!0),A=A.queue,zh(Fa.bind(null,$,A,h),[h]),A.getSnapshot!==g||W||so!==null&&so.memoizedState.tag&1){if($.flags|=2048,Gu(9,Ph.bind(null,$,A,N,g),void 0,null),Or===null)throw Error(l(349));Xn&30||Bc($,g,N)}return N}function Bc(h,g,$){h.flags|=16384,h={getSnapshot:g,value:$},g=gn.updateQueue,g===null?(g={lastEffect:null,stores:null},gn.updateQueue=g,g.stores=[h]):($=g.stores,$===null?g.stores=[h]:$.push(h))}function Ph(h,g,$,A){g.value=$,g.getSnapshot=A,Fh(g)&&Wa(h,1,-1)}function Fa(h,g,$){return $(function(){Fh(g)&&Wa(h,1,-1)})}function Fh(h){var g=h.getSnapshot;h=h.value;try{var $=g();return!Ss(h,$)}catch{return!0}}function hc(h){var g=Xs();return typeof h=="function"&&(h=h()),g.memoizedState=g.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:h},g.queue=h,h=h.dispatch=Mi.bind(null,gn,h),[g.memoizedState,h]}function Gu(h,g,$,A){return h={tag:h,create:g,destroy:$,deps:A,next:null},g=gn.updateQueue,g===null?(g={lastEffect:null,stores:null},gn.updateQueue=g,g.lastEffect=h.next=h):($=g.lastEffect,$===null?g.lastEffect=h.next=h:(A=$.next,$.next=h,h.next=A,g.lastEffect=h)),h}function cd(){return zs().memoizedState}function Qo(h,g,$,A){var N=Xs();gn.flags|=h,N.memoizedState=Gu(1|g,$,void 0,A===void 0?null:A)}function ao(h,g,$,A){var N=zs();A=A===void 0?null:A;var W=void 0;if(Pr!==null){var de=Pr.memoizedState;if(W=de.destroy,A!==null&&Eu(A,de.deps)){N.memoizedState=Gu(g,$,W,A);return}}gn.flags|=h,N.memoizedState=Gu(1|g,$,W,A)}function wl(h,g){return Qo(8390656,8,h,g)}function zh(h,g){return ao(2048,8,h,g)}function Pi(h,g){return ao(4,2,h,g)}function hd(h,g){return ao(4,4,h,g)}function Wu(h,g){if(typeof g=="function")return h=h(),g(h),function(){g(null)};if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function Zl(h,g,$){return $=$!=null?$.concat([h]):null,ao(4,4,Wu.bind(null,g,h),$)}function Pc(){}function wd(h,g){var $=zs();g=g===void 0?null:g;var A=$.memoizedState;return A!==null&&g!==null&&Eu(g,A[1])?A[0]:($.memoizedState=[h,g],h)}function $l(h,g){var $=zs();g=g===void 0?null:g;var A=$.memoizedState;return A!==null&&g!==null&&Eu(g,A[1])?A[0]:(h=h(),$.memoizedState=[h,g],h)}function $d(h,g){var $=vr;vr=$!==0&&4>$?$:4,h(!0);var A=Mn.transition;Mn.transition={};try{h(!1),g()}finally{vr=$,Mn.transition=A}}function Uh(){return zs().memoizedState}function Zr(h,g,$){var A=ks(h);$={lane:A,action:$,hasEagerState:!1,eagerState:null,next:null},gf(h)?Op(g,$):(Cl(h,g,$),$=ys(),h=Wa(h,A,$),h!==null&&eu(h,g,A))}function Mi(h,g,$){var A=ks(h),N={lane:A,action:$,hasEagerState:!1,eagerState:null,next:null};if(gf(h))Op(g,N);else{Cl(h,g,N);var W=h.alternate;if(h.lanes===0&&(W===null||W.lanes===0)&&(W=g.lastRenderedReducer,W!==null))try{var de=g.lastRenderedState,ke=W(de,$);if(N.hasEagerState=!0,N.eagerState=ke,Ss(ke,de))return}catch{}finally{}$=ys(),h=Wa(h,A,$),h!==null&&eu(h,g,A)}}function gf(h){var g=h.alternate;return h===gn||g!==null&&g===gn}function Op(h,g){oo=vi=!0;var $=h.pending;$===null?g.next=g:(g.next=$.next,$.next=g),h.pending=g}function Cl(h,g,$){Or!==null&&h.mode&1&&!(Zn&2)?(h=g.interleaved,h===null?($.next=$,$i===null?$i=[g]:$i.push(g)):($.next=h.next,h.next=$),g.interleaved=$):(h=g.pending,h===null?$.next=$:($.next=h.next,h.next=$),g.pending=$)}function eu(h,g,$){if($&4194240){var A=g.lanes;A&=h.pendingLanes,$|=A,g.lanes=$,yr(h,$)}}var Vu={readContext:Hn,useCallback:gs,useContext:gs,useEffect:gs,useImperativeHandle:gs,useInsertionEffect:gs,useLayoutEffect:gs,useMemo:gs,useReducer:gs,useRef:gs,useState:gs,useDebugValue:gs,useDeferredValue:gs,useTransition:gs,useMutableSource:gs,useSyncExternalStore:gs,useId:gs,unstable_isNewReconciler:!1},ju={readContext:Hn,useCallback:function(h,g){return Xs().memoizedState=[h,g===void 0?null:g],h},useContext:Hn,useEffect:wl,useImperativeHandle:function(h,g,$){return $=$!=null?$.concat([h]):null,Qo(4194308,4,Wu.bind(null,g,h),$)},useLayoutEffect:function(h,g){return Qo(4194308,4,h,g)},useInsertionEffect:function(h,g){return Qo(4,2,h,g)},useMemo:function(h,g){var $=Xs();return g=g===void 0?null:g,h=h(),$.memoizedState=[h,g],h},useReducer:function(h,g,$){var A=Xs();return g=$!==void 0?$(g):g,A.memoizedState=A.baseState=g,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:g},A.queue=h,h=h.dispatch=Zr.bind(null,gn,h),[A.memoizedState,h]},useRef:function(h){var g=Xs();return h={current:h},g.memoizedState=h},useState:hc,useDebugValue:Pc,useDeferredValue:function(h){var g=hc(h),$=g[0],A=g[1];return wl(function(){var N=Mn.transition;Mn.transition={};try{A(h)}finally{Mn.transition=N}},[h]),$},useTransition:function(){var h=hc(!1),g=h[0];return h=$d.bind(null,h[1]),Xs().memoizedState=h,[g,h]},useMutableSource:function(){},useSyncExternalStore:function(h,g,$){var A=gn,N=Xs();if(Wi){if($===void 0)throw Error(l(407));$=$()}else{if($=g(),Or===null)throw Error(l(349));Xn&30||Bc(A,g,$)}N.memoizedState=$;var W={value:$,getSnapshot:g};return N.queue=W,wl(Fa.bind(null,A,W,h),[h]),A.flags|=2048,Gu(9,Ph.bind(null,A,W,$,g),void 0,null),$},useId:function(){var h=Xs(),g=Or.identifierPrefix;if(Wi){var $=Po,A=Na;$=(A&~(1<<32-Yo(A)-1)).toString(32)+$,g=":"+g+"R"+$,$=il++,0<$&&(g+="H"+$.toString(32)),g+=":"}else $=Bi++,g=":"+g+"r"+$.toString(32)+":";return h.memoizedState=g},unstable_isNewReconciler:!1},_h={readContext:Hn,useCallback:wd,useContext:Hn,useEffect:zh,useImperativeHandle:Zl,useInsertionEffect:Pi,useLayoutEffect:hd,useMemo:$l,useReducer:Bh,useRef:cd,useState:function(){return Bh(Pa)},useDebugValue:Pc,useDeferredValue:function(h){var g=Bh(Pa),$=g[0],A=g[1];return zh(function(){var N=Mn.transition;Mn.transition={};try{A(h)}finally{Mn.transition=N}},[h]),$},useTransition:function(){var h=Bh(Pa)[0],g=zs().memoizedState;return[h,g]},useMutableSource:cc,useSyncExternalStore:qo,useId:Uh,unstable_isNewReconciler:!1},sl={readContext:Hn,useCallback:wd,useContext:Hn,useEffect:zh,useImperativeHandle:Zl,useInsertionEffect:Pi,useLayoutEffect:hd,useMemo:$l,useReducer:gh,useRef:cd,useState:function(){return gh(Pa)},useDebugValue:Pc,useDeferredValue:function(h){var g=gh(Pa),$=g[0],A=g[1];return zh(function(){var N=Mn.transition;Mn.transition={};try{A(h)}finally{Mn.transition=N}},[h]),$},useTransition:function(){var h=gh(Pa)[0],g=zs().memoizedState;return[h,g]},useMutableSource:cc,useSyncExternalStore:qo,useId:Uh,unstable_isNewReconciler:!1};function Zo(h,g){try{var $="",A=g;do $+=Is(A),A=A.return;while(A);var N=$}catch(W){N=`
Error generating stack: `+W.message+`
`+W.stack}return{value:h,source:g,stack:N}}function Ml(h,g){try{console.error(g.value)}catch($){setTimeout(function(){throw $})}}var Fc=typeof WeakMap=="function"?WeakMap:Map;function Al(h,g,$){$=Gi(-1,$),$.tag=3,$.payload={element:null};var A=g.value;return $.callback=function(){$u||($u=!0,co=A),Ml(h,g)},$}function zc(h,g,$){$=Gi(-1,$),$.tag=3;var A=h.type.getDerivedStateFromError;if(typeof A=="function"){var N=g.value;$.payload=function(){return A(N)},$.callback=function(){Ml(h,g)}}var W=h.stateNode;return W!==null&&typeof W.componentDidCatch=="function"&&($.callback=function(){Ml(h,g),typeof A!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var de=g.stack;this.componentDidCatch(g.value,{componentStack:de!==null?de:""})}),$}function dc(h,g,$){var A=h.pingCache;if(A===null){A=h.pingCache=new Fc;var N=new Set;A.set(g,N)}else N=A.get(g),N===void 0&&(N=new Set,A.set(g,N));N.has($)||(N.add($),h=na.bind(null,h,g,$),g.then(h,h))}function Cd(h){do{var g;if((g=h.tag===13)&&(g=h.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return h;h=h.return}while(h!==null);return null}function za(h,g,$,A,N){return h.mode&1?(h.flags|=65536,h.lanes=N,h):(h===g?h.flags|=65536:(h.flags|=128,$.flags|=131072,$.flags&=-52805,$.tag===1&&($.alternate===null?$.tag=17:(g=Gi(-1,1),g.tag=2,La($,g))),$.lanes|=1),h)}function Gr(h){h.flags|=4}function ol(h,g){if(h!==null&&h.child===g.child)return!0;if(g.flags&16)return!1;for(h=g.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var Ji,da,Y,Es;if(Ue)Ji=function(h,g){for(var $=g.child;$!==null;){if($.tag===5||$.tag===6)Se(h,$.stateNode);else if($.tag!==4&&$.child!==null){$.child.return=$,$=$.child;continue}if($===g)break;for(;$.sibling===null;){if($.return===null||$.return===g)return;$=$.return}$.sibling.return=$.return,$=$.sibling}},da=function(){},Y=function(h,g,$,A,N){if(h=h.memoizedProps,h!==A){var W=g.stateNode,de=Ql(Br.current);$=Re(W,$,h,A,N,de),(g.updateQueue=$)&&Gr(g)}},Es=function(h,g,$,A){$!==A&&Gr(g)};else if(Ae){Ji=function(h,g,$,A){for(var N=g.child;N!==null;){if(N.tag===5){var W=N.stateNode;$&&A&&(W=re(W,N.type,N.memoizedProps,N)),Se(h,W)}else if(N.tag===6)W=N.stateNode,$&&A&&(W=Te(W,N.memoizedProps,N)),Se(h,W);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)W=N.child,W!==null&&(W.return=N),Ji(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===g)break;for(;N.sibling===null;){if(N.return===null||N.return===g)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var pa=function(h,g,$,A){for(var N=g.child;N!==null;){if(N.tag===5){var W=N.stateNode;$&&A&&(W=re(W,N.type,N.memoizedProps,N)),Si(h,W)}else if(N.tag===6)W=N.stateNode,$&&A&&(W=Te(W,N.memoizedProps,N)),Si(h,W);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)W=N.child,W!==null&&(W.return=N),pa(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===g)break;for(;N.sibling===null;){if(N.return===null||N.return===g)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};da=function(h,g){var $=g.stateNode;if(!ol(h,g)){h=$.containerInfo;var A=Dr(h);pa(A,g,!1,!1),$.pendingChildren=A,Gr(g),xr(h,A)}},Y=function(h,g,$,A,N){var W=h.stateNode,de=h.memoizedProps;if((h=ol(h,g))&&de===A)g.stateNode=W;else{var ke=g.stateNode,Qe=Ql(Br.current),St=null;de!==A&&(St=Re(ke,$,de,A,N,Qe)),h&&St===null?g.stateNode=W:(W=ii(W,St,$,de,A,g,h,ke),Fe(W,$,A,N,Qe)&&Gr(g),g.stateNode=W,h?Gr(g):Ji(W,g,!1,!1))}},Es=function(h,g,$,A){$!==A?(h=Ql(Ba.current),$=Ql(Br.current),g.stateNode=Ne(A,h,$,g),Gr(g)):g.stateNode=h.stateNode}}else da=function(){},Y=function(){},Es=function(){};function $r(h,g){if(!Wi)switch(h.tailMode){case"hidden":g=h.tail;for(var $=null;g!==null;)g.alternate!==null&&($=g),g=g.sibling;$===null?h.tail=null:$.sibling=null;break;case"collapsed":$=h.tail;for(var A=null;$!==null;)$.alternate!==null&&(A=$),$=$.sibling;A===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:A.sibling=null}}function pn(h){var g=h.alternate!==null&&h.alternate.child===h.child,$=0,A=0;if(g)for(var N=h.child;N!==null;)$|=N.lanes|N.childLanes,A|=N.subtreeFlags&14680064,A|=N.flags&14680064,N.return=h,N=N.sibling;else for(N=h.child;N!==null;)$|=N.lanes|N.childLanes,A|=N.subtreeFlags,A|=N.flags,N.return=h,N=N.sibling;return h.subtreeFlags|=A,h.childLanes=$,g}function Lp(h,g,$){var A=g.pendingProps;switch(Hr(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(g),null;case 1:return fs(g.type)&&Qa(),pn(g),null;case 3:return A=g.stateNode,mh(),Cn(Di),Cn(_r),kt(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(h===null||h.child===null)&&(Lc(g)?Gr(g):h===null||h.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,Tu!==null&&(gi(Tu),Tu=null))),da(h,g),pn(g),null;case 5:di(g),$=Ql(Ba.current);var N=g.type;if(h!==null&&g.stateNode!=null)Y(h,g,N,A,$),h.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!A){if(g.stateNode===null)throw Error(l(166));return pn(g),null}if(h=Ql(Br.current),Lc(g)){if(!je)throw Error(l(175));h=Un(g.stateNode,g.type,g.memoizedProps,$,h,g,!ca),g.updateQueue=h,h!==null&&Gr(g)}else{var W=pe(N,A,$,h,g);Ji(W,g,!1,!1),g.stateNode=W,Fe(W,N,A,$,h)&&Gr(g)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return pn(g),null;case 6:if(h&&g.stateNode!=null)Es(h,g,h.memoizedProps,A);else{if(typeof A!="string"&&g.stateNode===null)throw Error(l(166));if(h=Ql(Ba.current),$=Ql(Br.current),Lc(g)){if(!je)throw Error(l(176));if(h=g.stateNode,A=g.memoizedProps,($=tr(h,A,g,!ca))&&(N=Ci,N!==null))switch(W=(N.mode&1)!==0,N.tag){case 3:Eo(N.stateNode.containerInfo,h,A,W);break;case 5:Wl(N.type,N.memoizedProps,N.stateNode,h,A,W)}$&&Gr(g)}else g.stateNode=Ne(A,h,$,g)}return pn(g),null;case 13:if(Cn(ye),A=g.memoizedState,Wi&&br!==null&&g.mode&1&&!(g.flags&128)){for(h=br;h;)h=gt(h);return Dh(),g.flags|=98560,g}if(A!==null&&A.dehydrated!==null){if(A=Lc(g),h===null){if(!A)throw Error(l(318));if(!je)throw Error(l(344));if(h=g.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));mr(h,g)}else Dh(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;return pn(g),null}return Tu!==null&&(gi(Tu),Tu=null),g.flags&128?(g.lanes=$,g):(A=A!==null,$=!1,h===null?Lc(g):$=h.memoizedState!==null,A&&!$&&(g.child.flags|=8192,g.mode&1&&(h===null||ye.current&1?Qi===0&&(Qi=3):jc())),g.updateQueue!==null&&(g.flags|=4),pn(g),null);case 4:return mh(),da(h,g),h===null&&tt(g.stateNode.containerInfo),pn(g),null;case 10:return nl(g.type._context),pn(g),null;case 17:return fs(g.type)&&Qa(),pn(g),null;case 19:if(Cn(ye),N=g.memoizedState,N===null)return pn(g),null;if(A=(g.flags&128)!==0,W=N.rendering,W===null)if(A)$r(N,!1);else{if(Qi!==0||h!==null&&h.flags&128)for(h=g.child;h!==null;){if(W=Ve(h),W!==null){for(g.flags|=128,$r(N,!1),h=W.updateQueue,h!==null&&(g.updateQueue=h,g.flags|=4),g.subtreeFlags=0,h=$,A=g.child;A!==null;)$=A,N=h,$.flags&=14680066,W=$.alternate,W===null?($.childLanes=0,$.lanes=N,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=W.childLanes,$.lanes=W.lanes,$.child=W.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=W.memoizedProps,$.memoizedState=W.memoizedState,$.updateQueue=W.updateQueue,$.type=W.type,N=W.dependencies,$.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),A=A.sibling;return Mr(ye,ye.current&1|2),g.child}h=h.sibling}N.tail!==null&&ms()>_a&&(g.flags|=128,A=!0,$r(N,!1),g.lanes=4194304)}else{if(!A)if(h=Ve(W),h!==null){if(g.flags|=128,A=!0,h=h.updateQueue,h!==null&&(g.updateQueue=h,g.flags|=4),$r(N,!0),N.tail===null&&N.tailMode==="hidden"&&!W.alternate&&!Wi)return pn(g),null}else 2*ms()-N.renderingStartTime>_a&&$!==1073741824&&(g.flags|=128,A=!0,$r(N,!1),g.lanes=4194304);N.isBackwards?(W.sibling=g.child,g.child=W):(h=N.last,h!==null?h.sibling=W:g.child=W,N.last=W)}return N.tail!==null?(g=N.tail,N.rendering=g,N.tail=g.sibling,N.renderingStartTime=ms(),g.sibling=null,h=ye.current,Mr(ye,A?h&1|2:h&1),g):(pn(g),null);case 22:case 23:return hl(),A=g.memoizedState!==null,h!==null&&h.memoizedState!==null!==A&&(g.flags|=8192),A&&g.mode&1?Co&1073741824&&(pn(g),Ue&&g.subtreeFlags&6&&(g.flags|=8192)):pn(g),null;case 24:return null;case 25:return null}throw Error(l(156,g.tag))}var al=u.ReactCurrentOwner,Ai=!1;function ui(h,g,$,A){g.child=h===null?Nc(g,null,$,A):Dc(g,h.child,$,A)}function qi(h,g,$,A,N){$=$.render;var W=g.ref;return wi(g,N),A=Yn(h,g,$,A,W,N),$=ha(),h!==null&&!Ai?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~N,fi(h,g,N)):(Wi&&$&&Lh(g),g.flags|=1,ui(h,g,A,N),g.child)}function rs(h,g,$,A,N){if(h===null){var W=$.type;return typeof W=="function"&&!ec(W)&&W.defaultProps===void 0&&$.compare===null&&$.defaultProps===void 0?(g.tag=15,g.type=W,Uc(h,g,W,A,N)):(h=Ll($.type,null,A,g,g.mode,N),h.ref=g.ref,h.return=g,g.child=h)}if(W=h.child,!(h.lanes&N)){var de=W.memoizedProps;if($=$.compare,$=$!==null?$:Tr,$(de,A)&&h.ref===g.ref)return fi(h,g,N)}return g.flags|=1,h=go(W,A),h.ref=g.ref,h.return=g,g.child=h}function Uc(h,g,$,A,N){if(h!==null&&Tr(h.memoizedProps,A)&&h.ref===g.ref)if(Ai=!1,(h.lanes&N)!==0)h.flags&131072&&(Ai=!0);else return g.lanes=h.lanes,fi(h,g,N);return is(h,g,$,A,N)}function fa(h,g,$){var A=g.pendingProps,N=A.children,W=h!==null?h.memoizedState:null;if(A.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null},Mr(as,Co),Co|=$;else if($&1073741824)g.memoizedState={baseLanes:0,cachePool:null},A=W!==null?W.baseLanes:$,Mr(as,Co),Co|=A;else return h=W!==null?W.baseLanes|$:$,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:h,cachePool:null},g.updateQueue=null,Mr(as,Co),Co|=h,null;else W!==null?(A=W.baseLanes|$,g.memoizedState=null):A=$,Mr(as,Co),Co|=A;return ui(h,g,N,$),g.child}function ma(h,g){var $=g.ref;(h===null&&$!==null||h!==null&&h.ref!==$)&&(g.flags|=512,g.flags|=2097152)}function is(h,g,$,A,N){var W=fs($)?Ts:_r.current;return W=hi(g,W),wi(g,N),$=Yn(h,g,$,A,W,N),A=ha(),h!==null&&!Ai?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~N,fi(h,g,N)):(Wi&&A&&Lh(g),g.flags|=1,ui(h,g,$,N),g.child)}function Hc(h,g,$,A,N){if(fs($)){var W=!0;uc(g)}else W=!1;if(wi(g,N),g.stateNode===null)h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2),mf(g,$,A),Xl(g,$,A,N),A=!0;else if(h===null){var de=g.stateNode,ke=g.memoizedProps;de.props=ke;var Qe=de.context,St=$.contextType;typeof St=="object"&&St!==null?St=Hn(St):(St=fs($)?Ts:_r.current,St=hi(g,St));var Jt=$.getDerivedStateFromProps,ln=typeof Jt=="function"||typeof de.getSnapshotBeforeUpdate=="function";ln||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(ke!==A||Qe!==St)&&Ed(g,de,A,St),Xr=!1;var yn=g.memoizedState;de.state=yn,Jo(g,A,de,N),Qe=g.memoizedState,ke!==A||yn!==Qe||Di.current||Xr?(typeof Jt=="function"&&(Oc(g,$,Jt,A),Qe=g.memoizedState),(ke=Xr||kp(g,$,ke,A,yn,Qe,St))?(ln||typeof de.UNSAFE_componentWillMount!="function"&&typeof de.componentWillMount!="function"||(typeof de.componentWillMount=="function"&&de.componentWillMount(),typeof de.UNSAFE_componentWillMount=="function"&&de.UNSAFE_componentWillMount()),typeof de.componentDidMount=="function"&&(g.flags|=4194308)):(typeof de.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=A,g.memoizedState=Qe),de.props=A,de.state=Qe,de.context=St,A=ke):(typeof de.componentDidMount=="function"&&(g.flags|=4194308),A=!1)}else{de=g.stateNode,bu(h,g),ke=g.memoizedProps,St=g.type===g.elementType?ke:yi(g.type,ke),de.props=St,ln=g.pendingProps,yn=de.context,Qe=$.contextType,typeof Qe=="object"&&Qe!==null?Qe=Hn(Qe):(Qe=fs($)?Ts:_r.current,Qe=hi(g,Qe));var vn=$.getDerivedStateFromProps;(Jt=typeof vn=="function"||typeof de.getSnapshotBeforeUpdate=="function")||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(ke!==ln||yn!==Qe)&&Ed(g,de,A,Qe),Xr=!1,yn=g.memoizedState,de.state=yn,Jo(g,A,de,N);var fn=g.memoizedState;ke!==ln||yn!==fn||Di.current||Xr?(typeof vn=="function"&&(Oc(g,$,vn,A),fn=g.memoizedState),(St=Xr||kp(g,$,St,A,yn,fn,Qe)||!1)?(Jt||typeof de.UNSAFE_componentWillUpdate!="function"&&typeof de.componentWillUpdate!="function"||(typeof de.componentWillUpdate=="function"&&de.componentWillUpdate(A,fn,Qe),typeof de.UNSAFE_componentWillUpdate=="function"&&de.UNSAFE_componentWillUpdate(A,fn,Qe)),typeof de.componentDidUpdate=="function"&&(g.flags|=4),typeof de.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof de.componentDidUpdate!="function"||ke===h.memoizedProps&&yn===h.memoizedState||(g.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||ke===h.memoizedProps&&yn===h.memoizedState||(g.flags|=1024),g.memoizedProps=A,g.memoizedState=fn),de.props=A,de.state=fn,de.context=Qe,A=St):(typeof de.componentDidUpdate!="function"||ke===h.memoizedProps&&yn===h.memoizedState||(g.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||ke===h.memoizedProps&&yn===h.memoizedState||(g.flags|=1024),A=!1)}return ea(h,g,$,A,W,N)}function ea(h,g,$,A,N,W){ma(h,g);var de=(g.flags&128)!==0;if(!A&&!de)return N&&js(g,$,!1),fi(h,g,W);A=g.stateNode,al.current=g;var ke=de&&typeof $.getDerivedStateFromError!="function"?null:A.render();return g.flags|=1,h!==null&&de?(g.child=Dc(g,h.child,null,W),g.child=Dc(g,null,ke,W)):ui(h,g,ke,W),g.memoizedState=A.state,N&&js(g,$,!0),g.child}function Md(h){var g=h.stateNode;g.pendingContext?ka(h,g.pendingContext,g.pendingContext!==g.context):g.context&&ka(h,g.context,!1),Su(h,g.containerInfo)}function Ad(h,g,$,A,N){return Dh(),Hu(N),g.flags|=256,ui(h,g,$,A),g.child}var Hh={dehydrated:null,treeContext:null,retryLane:0};function Us(h){return{baseLanes:h,cachePool:null}}function jn(h,g,$){var A=g.pendingProps,N=ye.current,W=!1,de=(g.flags&128)!==0,ke;if((ke=de)||(ke=h!==null&&h.memoizedState===null?!1:(N&2)!==0),ke?(W=!0,g.flags&=-129):(h===null||h.memoizedState!==null)&&(N|=1),Mr(ye,N&1),h===null)return Uu(g),h=g.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(g.mode&1?On(h)?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(N=A.children,h=A.fallback,W?(A=g.mode,W=g.child,N={mode:"hidden",children:N},!(A&1)&&W!==null?(W.childLanes=0,W.pendingProps=N):W=ou(N,A,0,null),h=Va(h,A,$,null),W.return=g,h.return=g,W.sibling=h,g.child=W,g.child.memoizedState=Us($),g.memoizedState=Hh,h):Hs(g,N));if(N=h.memoizedState,N!==null){if(ke=N.dehydrated,ke!==null){if(de)return g.flags&256?(g.flags&=-257,tu(h,g,$,Error(l(422)))):g.memoizedState!==null?(g.child=h.child,g.flags|=128,null):(W=A.fallback,N=g.mode,A=ou({mode:"visible",children:A.children},N,0,null),W=Va(W,N,$,null),W.flags|=2,A.return=g,W.return=g,A.sibling=W,g.child=A,g.mode&1&&Dc(g,h.child,null,$),g.child.memoizedState=Us($),g.memoizedState=Hh,W);if(!(g.mode&1))g=tu(h,g,$,null);else if(On(ke))g=tu(h,g,$,Error(l(419)));else if(A=($&h.childLanes)!==0,Ai||A){if(A=Or,A!==null){switch($&-$){case 4:W=2;break;case 16:W=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:W=32;break;case 536870912:W=268435456;break;default:W=0}A=W&(A.suspendedLanes|$)?0:W,A!==0&&A!==N.retryLane&&(N.retryLane=A,Wa(h,A,-1))}jc(),g=tu(h,g,$,Error(l(421)))}else nn(ke)?(g.flags|=128,g.child=h.child,g=fo.bind(null,h),De(ke,g),g=null):($=N.treeContext,je&&(br=Wt(ke),Ci=g,Wi=!0,Tu=null,ca=!1,$!==null&&(li[Sr++]=Na,li[Sr++]=Po,li[Sr++]=io,Na=$.id,Po=$.overflow,io=g)),g=Hs(g,g.pendingProps.children),g.flags|=4096);return g}return W?(A=Fi(h,g,A.children,A.fallback,$),W=g.child,N=h.child.memoizedState,W.memoizedState=N===null?Us($):{baseLanes:N.baseLanes|$,cachePool:null},W.childLanes=h.childLanes&~$,g.memoizedState=Hh,A):($=Ys(h,g,A.children,$),g.memoizedState=null,$)}return W?(A=Fi(h,g,A.children,A.fallback,$),W=g.child,N=h.child.memoizedState,W.memoizedState=N===null?Us($):{baseLanes:N.baseLanes|$,cachePool:null},W.childLanes=h.childLanes&~$,g.memoizedState=Hh,A):($=Ys(h,g,A.children,$),g.memoizedState=null,$)}function Hs(h,g){return g=ou({mode:"visible",children:g},h.mode,0,null),g.return=h,h.child=g}function Ys(h,g,$,A){var N=h.child;return h=N.sibling,$=go(N,{mode:"visible",children:$}),!(g.mode&1)&&($.lanes=A),$.return=g,$.sibling=null,h!==null&&(A=g.deletions,A===null?(g.deletions=[h],g.flags|=16):A.push(h)),g.child=$}function Fi(h,g,$,A,N){var W=g.mode;h=h.child;var de=h.sibling,ke={mode:"hidden",children:$};return!(W&1)&&g.child!==h?($=g.child,$.childLanes=0,$.pendingProps=ke,g.deletions=null):($=go(h,ke),$.subtreeFlags=h.subtreeFlags&14680064),de!==null?A=go(de,A):(A=Va(A,W,N,null),A.flags|=2),A.return=g,$.return=g,$.sibling=A,g.child=$,A}function tu(h,g,$,A){return A!==null&&Hu(A),Dc(g,h.child,null,$),h=Hs(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function Fo(h,g,$){h.lanes|=g;var A=h.alternate;A!==null&&(A.lanes|=g),Ni(h.return,g,$)}function En(h,g,$,A,N){var W=h.memoizedState;W===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:A,tail:$,tailMode:N}:(W.isBackwards=g,W.rendering=null,W.renderingStartTime=0,W.last=A,W.tail=$,W.tailMode=N)}function pi(h,g,$){var A=g.pendingProps,N=A.revealOrder,W=A.tail;if(ui(h,g,A.children,$),A=ye.current,A&2)A=A&1|2,g.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Fo(h,$,g);else if(h.tag===19)Fo(h,$,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}A&=1}if(Mr(ye,A),!(g.mode&1))g.memoizedState=null;else switch(N){case"forwards":for($=g.child,N=null;$!==null;)h=$.alternate,h!==null&&Ve(h)===null&&(N=$),$=$.sibling;$=N,$===null?(N=g.child,g.child=null):(N=$.sibling,$.sibling=null),En(g,!1,N,$,W);break;case"backwards":for($=null,N=g.child,g.child=null;N!==null;){if(h=N.alternate,h!==null&&Ve(h)===null){g.child=N;break}h=N.sibling,N.sibling=$,$=N,N=h}En(g,!0,$,null,W);break;case"together":En(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function fi(h,g,$){if(h!==null&&(g.dependencies=h.dependencies),Yu|=g.lanes,!($&g.childLanes))return null;if(h!==null&&g.child!==h.child)throw Error(l(153));if(g.child!==null){for(h=g.child,$=go(h,h.pendingProps),g.child=$,$.return=g;h.sibling!==null;)h=h.sibling,$=$.sibling=go(h,h.pendingProps),$.return=g;$.sibling=null}return g.child}function Dp(h,g,$){switch(g.tag){case 3:Md(g),Dh();break;case 5:xd(g);break;case 1:fs(g.type)&&uc(g);break;case 4:Su(g,g.stateNode.containerInfo);break;case 10:vu(g,g.type._context,g.memoizedProps.value);break;case 13:var A=g.memoizedState;if(A!==null)return A.dehydrated!==null?(Mr(ye,ye.current&1),g.flags|=128,null):$&g.child.childLanes?jn(h,g,$):(Mr(ye,ye.current&1),h=fi(h,g,$),h!==null?h.sibling:null);Mr(ye,ye.current&1);break;case 19:if(A=($&g.childLanes)!==0,h.flags&128){if(A)return pi(h,g,$);g.flags|=128}var N=g.memoizedState;if(N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Mr(ye,ye.current),A)break;return null;case 22:case 23:return g.lanes=0,fa(h,g,$)}return fi(h,g,$)}function yh(h,g){switch(Hr(g),g.tag){case 1:return fs(g.type)&&Qa(),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return mh(),Cn(Di),Cn(_r),kt(),h=g.flags,h&65536&&!(h&128)?(g.flags=h&-65537|128,g):null;case 5:return di(g),null;case 13:if(Cn(ye),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(l(340));Dh()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return Cn(ye),null;case 4:return mh(),null;case 10:return nl(g.type._context),null;case 22:case 23:return hl(),null;case 24:return null;default:return null}}var lo=!1,ga=!1,wn=typeof WeakSet=="function"?WeakSet:Set,_n=null;function ll(h,g){var $=h.ref;if($!==null)if(typeof $=="function")try{$(null)}catch(A){Js(h,g,A)}else $.current=null}function pc(h,g,$){try{$()}catch(A){Js(h,g,A)}}var _f=!1;function nu(h,g){for(oe(h.containerInfo),_n=g;_n!==null;)if(h=_n,g=h.child,(h.subtreeFlags&1028)!==0&&g!==null)g.return=h,_n=g;else for(;_n!==null;){h=_n;try{var $=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if($!==null){var A=$.memoizedProps,N=$.memoizedState,W=h.stateNode,de=W.getSnapshotBeforeUpdate(h.elementType===h.type?A:yi(h.type,A),N);W.__reactInternalSnapshotBeforeUpdate=de}break;case 3:Ue&&Rn(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(ke){Js(h,h.return,ke)}if(g=h.sibling,g!==null){g.return=h.return,_n=g;break}_n=h.return}return $=_f,_f=!1,$}function wo(h,g,$){var A=g.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var N=A=A.next;do{if((N.tag&h)===h){var W=N.destroy;N.destroy=void 0,W!==void 0&&pc(g,$,W)}N=N.next}while(N!==A)}}function _s(h,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var $=g=g.next;do{if(($.tag&h)===h){var A=$.create;$.destroy=A()}$=$.next}while($!==g)}}function ul(h){var g=h.ref;if(g!==null){var $=h.stateNode;switch(h.tag){case 5:h=be($);break;default:h=$}typeof g=="function"?g(h):g.current=h}}function ss(h,g,$){if(gu&&typeof gu.onCommitFiberUnmount=="function")try{gu.onCommitFiberUnmount(aa,g)}catch{}switch(g.tag){case 0:case 11:case 14:case 15:if(h=g.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var A=h=h.next;do{var N=A,W=N.destroy;N=N.tag,W!==void 0&&(N&2||N&4)&&pc(g,$,W),A=A.next}while(A!==h)}break;case 1:if(ll(g,$),h=g.stateNode,typeof h.componentWillUnmount=="function")try{h.props=g.memoizedProps,h.state=g.memoizedState,h.componentWillUnmount()}catch(de){Js(g,$,de)}break;case 5:ll(g,$);break;case 4:Ue?Wh(h,g,$):Ae&&Ae&&(g=g.stateNode.containerInfo,$=Dr(g),fr(g,$))}}function cl(h,g,$){for(var A=g;;)if(ss(h,A,$),A.child===null||Ue&&A.tag===4){if(A===g)break;for(;A.sibling===null;){if(A.return===null||A.return===g)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function zo(h){var g=h.alternate;g!==null&&(h.alternate=null,zo(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&Rt(g)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Gh(h){return h.tag===5||h.tag===3||h.tag===4}function Ua(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Gh(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Ii(h){if(Ue){e:{for(var g=h.return;g!==null;){if(Gh(g))break e;g=g.return}throw Error(l(160))}var $=g;switch($.tag){case 5:g=$.stateNode,$.flags&32&&(He(g),$.flags&=-33),$=Ua(h),Gc(h,$,g);break;case 3:case 4:g=$.stateNode.containerInfo,$=Ua(h),Id(h,$,g);break;default:throw Error(l(161))}}}function Id(h,g,$){var A=h.tag;if(A===5||A===6)h=h.stateNode,g?Ie($,h,g):Ke($,h);else if(A!==4&&(h=h.child,h!==null))for(Id(h,g,$),h=h.sibling;h!==null;)Id(h,g,$),h=h.sibling}function Gc(h,g,$){var A=h.tag;if(A===5||A===6)h=h.stateNode,g?fe($,h,g):ft($,h);else if(A!==4&&(h=h.child,h!==null))for(Gc(h,g,$),h=h.sibling;h!==null;)Gc(h,g,$),h=h.sibling}function Wh(h,g,$){for(var A=g,N=!1,W,de;;){if(!N){N=A.return;e:for(;;){if(N===null)throw Error(l(160));switch(W=N.stateNode,N.tag){case 5:de=!1;break e;case 3:W=W.containerInfo,de=!0;break e;case 4:W=W.containerInfo,de=!0;break e}N=N.return}N=!0}if(A.tag===5||A.tag===6)cl(h,A,$),de?Gt(W,A.stateNode):Ye(W,A.stateNode);else if(A.tag===18)de?bs(W,A.stateNode):jr(W,A.stateNode);else if(A.tag===4){if(A.child!==null){W=A.stateNode.containerInfo,de=!0,A.child.return=A,A=A.child;continue}}else if(ss(h,A,$),A.child!==null){A.child.return=A,A=A.child;continue}if(A===g)break;for(;A.sibling===null;){if(A.return===null||A.return===g)return;A=A.return,A.tag===4&&(N=!1)}A.sibling.return=A.return,A=A.sibling}}function Uo(h,g){if(Ue){switch(g.tag){case 0:case 11:case 14:case 15:wo(3,g,g.return),_s(3,g),wo(5,g,g.return);return;case 1:return;case 5:var $=g.stateNode;if($!=null){var A=g.memoizedProps;h=h!==null?h.memoizedProps:A;var N=g.type,W=g.updateQueue;g.updateQueue=null,W!==null&&ne($,W,N,h,A,g)}return;case 6:if(g.stateNode===null)throw Error(l(162));$=g.memoizedProps,Oe(g.stateNode,h!==null?h.memoizedProps:$,$);return;case 3:je&&h!==null&&h.memoizedState.isDehydrated&&si(g.stateNode.containerInfo);return;case 12:return;case 13:$o(g);return;case 19:$o(g);return;case 17:return}throw Error(l(163))}switch(g.tag){case 0:case 11:case 14:case 15:wo(3,g,g.return),_s(3,g),wo(5,g,g.return);return;case 12:return;case 13:$o(g);return;case 19:$o(g);return;case 3:je&&h!==null&&h.memoizedState.isDehydrated&&si(g.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ae){switch(g.tag){case 1:case 5:case 6:break e;case 3:case 4:g=g.stateNode,fr(g.containerInfo,g.pendingChildren);break e}throw Error(l(163))}}function $o(h){var g=h.updateQueue;if(g!==null){h.updateQueue=null;var $=h.stateNode;$===null&&($=h.stateNode=new wn),g.forEach(function(A){var N=Cu.bind(null,h,A);$.has(A)||($.add(A),A.then(N,N))})}}function op(h,g){for(_n=g;_n!==null;){g=_n;var $=g.deletions;if($!==null)for(var A=0;A<$.length;A++){var N=$[A];try{var W=h;Ue?Wh(W,N,g):cl(W,N,g);var de=N.alternate;de!==null&&(de.return=null),N.return=null}catch(rn){Js(N,g,rn)}}if($=g.child,g.subtreeFlags&12854&&$!==null)$.return=g,_n=$;else for(;_n!==null;){g=_n;try{var ke=g.flags;if(ke&32&&Ue&&He(g.stateNode),ke&512){var Qe=g.alternate;if(Qe!==null){var St=Qe.ref;St!==null&&(typeof St=="function"?St(null):St.current=null)}}if(ke&8192)switch(g.tag){case 13:if(g.memoizedState!==null){var Jt=g.alternate;(Jt===null||Jt.memoizedState===null)&&(pd=ms())}break;case 22:var ln=g.memoizedState!==null,yn=g.alternate,vn=yn!==null&&yn.memoizedState!==null;if($=g,Ue){e:if(A=$,N=ln,W=null,Ue)for(var fn=A;;){if(fn.tag===5){if(W===null){W=fn;var Lr=fn.stateNode;N?Zt(Lr):Kt(fn.stateNode,fn.memoizedProps)}}else if(fn.tag===6){if(W===null){var bt=fn.stateNode;N?_t(bt):Yt(bt,fn.memoizedProps)}}else if((fn.tag!==22&&fn.tag!==23||fn.memoizedState===null||fn===A)&&fn.child!==null){fn.child.return=fn,fn=fn.child;continue}if(fn===A)break;for(;fn.sibling===null;){if(fn.return===null||fn.return===A)break e;W===fn&&(W=null),fn=fn.return}W===fn&&(W=null),fn.sibling.return=fn.return,fn=fn.sibling}}if(ln&&!vn&&$.mode&1){_n=$;for(var Ce=$.child;Ce!==null;){for($=_n=Ce;_n!==null;){A=_n;var Le=A.child;switch(A.tag){case 0:case 11:case 14:case 15:wo(4,A,A.return);break;case 1:ll(A,A.return);var rt=A.stateNode;if(typeof rt.componentWillUnmount=="function"){var Ut=A.return;try{rt.props=A.memoizedProps,rt.state=A.memoizedState,rt.componentWillUnmount()}catch(rn){Js(A,Ut,rn)}}break;case 5:ll(A,A.return);break;case 22:if(A.memoizedState!==null){fc($);continue}}Le!==null?(Le.return=A,_n=Le):fc($)}Ce=Ce.sibling}}}switch(ke&4102){case 2:Ii(g),g.flags&=-3;break;case 6:Ii(g),g.flags&=-3,Uo(g.alternate,g);break;case 4096:g.flags&=-4097;break;case 4100:g.flags&=-4097,Uo(g.alternate,g);break;case 4:Uo(g.alternate,g)}}catch(rn){Js(g,g.return,rn)}if($=g.sibling,$!==null){$.return=g.return,_n=$;break}_n=g.return}}}function xu(h,g,$){_n=h,Il(h)}function Il(h,g,$){for(var A=(h.mode&1)!==0;_n!==null;){var N=_n,W=N.child;if(N.tag===22&&A){var de=N.memoizedState!==null||lo;if(!de){var ke=N.alternate,Qe=ke!==null&&ke.memoizedState!==null||ga;ke=lo;var St=ga;if(lo=de,(ga=Qe)&&!St)for(_n=N;_n!==null;)de=_n,Qe=de.child,de.tag===22&&de.memoizedState!==null?Yr(N):Qe!==null?(Qe.return=de,_n=Qe):Yr(N);for(;W!==null;)_n=W,Il(W),W=W.sibling;_n=N,lo=ke,ga=St}dd(h)}else N.subtreeFlags&8772&&W!==null?(W.return=N,_n=W):dd(h)}}function dd(h){for(;_n!==null;){var g=_n;if(g.flags&8772){var $=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:ga||_s(5,g);break;case 1:var A=g.stateNode;if(g.flags&4&&!ga)if($===null)A.componentDidMount();else{var N=g.elementType===g.type?$.memoizedProps:yi(g.type,$.memoizedProps);A.componentDidUpdate(N,$.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var W=g.updateQueue;W!==null&&ld(g,W,A);break;case 3:var de=g.updateQueue;if(de!==null){if($=null,g.child!==null)switch(g.child.tag){case 5:$=be(g.child.stateNode);break;case 1:$=g.child.stateNode}ld(g,de,$)}break;case 5:var ke=g.stateNode;$===null&&g.flags&4&&Q(ke,g.type,g.memoizedProps,g);break;case 6:break;case 4:break;case 12:break;case 13:if(je&&g.memoizedState===null){var Qe=g.alternate;if(Qe!==null){var St=Qe.memoizedState;if(St!==null){var Jt=St.dehydrated;Jt!==null&&Nr(Jt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(l(163))}ga||g.flags&512&&ul(g)}catch(ln){Js(g,g.return,ln)}}if(g===h){_n=null;break}if($=g.sibling,$!==null){$.return=g.return,_n=$;break}_n=g.return}}function fc(h){for(;_n!==null;){var g=_n;if(g===h){_n=null;break}var $=g.sibling;if($!==null){$.return=g.return,_n=$;break}_n=g.return}}function Yr(h){for(;_n!==null;){var g=_n;try{switch(g.tag){case 0:case 11:case 15:var $=g.return;try{_s(4,g)}catch(Qe){Js(g,$,Qe)}break;case 1:var A=g.stateNode;if(typeof A.componentDidMount=="function"){var N=g.return;try{A.componentDidMount()}catch(Qe){Js(g,N,Qe)}}var W=g.return;try{ul(g)}catch(Qe){Js(g,W,Qe)}break;case 5:var de=g.return;try{ul(g)}catch(Qe){Js(g,de,Qe)}}}catch(Qe){Js(g,g.return,Qe)}if(g===h){_n=null;break}var ke=g.sibling;if(ke!==null){ke.return=g.return,_n=ke;break}_n=g.return}}var ru=0,Xu=1,os=2,Ha=3,xs=4;if(typeof Symbol=="function"&&Symbol.for){var ws=Symbol.for;ru=ws("selector.component"),Xu=ws("selector.has_pseudo_class"),os=ws("selector.role"),Ha=ws("selector.test_id"),xs=ws("selector.text")}function Wc(h){var g=nt(h);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(l(364));return g}if(h=mt(h),h===null)throw Error(l(362));return h.stateNode.current}function mi(h,g){switch(g.$$typeof){case ru:if(h.type===g.value)return!0;break;case Xu:e:{g=g.value,h=[h,0];for(var $=0;$<h.length;){var A=h[$++],N=h[$++],W=g[N];if(A.tag!==5||!we(A)){for(;W!=null&&mi(A,W);)N++,W=g[N];if(N===g.length){g=!0;break e}else for(A=A.child;A!==null;)h.push(A,N),A=A.sibling}}g=!1}return g;case os:if(h.tag===5&&ct(h.stateNode,g.value))return!0;break;case xs:if((h.tag===5||h.tag===6)&&(h=ie(h),h!==null&&0<=h.indexOf(g.value)))return!0;break;case Ha:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function Ga(h){switch(h.$$typeof){case ru:return"<"+(j(h.value)||"Unknown")+">";case Xu:return":has("+(Ga(h)||"")+")";case os:return'[role="'+h.value+'"]';case xs:return'"'+h.value+'"';case Ha:return'[data-testname="'+h.value+'"]';default:throw Error(l(365))}}function mc(h,g){var $=[];h=[h,0];for(var A=0;A<h.length;){var N=h[A++],W=h[A++],de=g[W];if(N.tag!==5||!we(N)){for(;de!=null&&mi(N,de);)W++,de=g[W];if(W===g.length)$.push(N);else for(N=N.child;N!==null;)h.push(N,W),N=N.sibling}}return $}function ap(h,g){if(!Mt)throw Error(l(363));h=Wc(h),h=mc(h,g),g=[],h=Array.from(h);for(var $=0;$<h.length;){var A=h[$++];if(A.tag===5)we(A)||g.push(A.stateNode);else for(A=A.child;A!==null;)h.push(A),A=A.sibling}return g}var vh=Math.ceil,ta=u.ReactCurrentDispatcher,Vi=u.ReactCurrentOwner,Dn=u.ReactCurrentBatchConfig,Zn=0,Or=null,ei=null,Jr=0,Co=0,as=Ir(0),Qi=0,iu=null,Yu=0,gc=0,Ku=0,Ks=null,uo=null,pd=0,_a=1/0;function wu(){_a=ms()+500}var $u=!1,co=null,ho=null,Rl=!1,Ho=null,Ju=0,qu=0,bh=null,Th=-1,Rr=0;function ys(){return Zn&6?ms():Th!==-1?Th:Th=ms()}function ks(h){return h.mode&1?Zn&2&&Jr!==0?Jr&-Jr:Fu.transition!==null?(Rr===0&&(h=Ko,Ko<<=1,!(Ko&4194240)&&(Ko=64),Rr=h),Rr):(h=vr,h!==0?h:Dt()):1}function Wa(h,g,$){if(50<qu)throw qu=0,bh=null,Error(l(185));var A=Gs(h,g);return A===null?null:(Sl(A,g,$),(!(Zn&2)||A!==Or)&&(A===Or&&(!(Zn&2)&&(gc|=g),Qi===4&&su(A,Jr)),hn(A,$),g===1&&Zn===0&&!(h.mode&1)&&(wu(),Pu&&la())),A)}function Gs(h,g){h.lanes|=g;var $=h.alternate;for($!==null&&($.lanes|=g),$=h,h=h.return;h!==null;)h.childLanes|=g,$=h.alternate,$!==null&&($.childLanes|=g),$=h,h=h.return;return $.tag===3?$.stateNode:null}function hn(h,g){var $=h.callbackNode;kc(h,g);var A=Rc(h,h===Or?Jr:0);if(A===0)$!==null&&el($),h.callbackNode=null,h.callbackPriority=0;else if(g=A&-A,h.callbackPriority!==g){if($!=null&&el($),g===1)h.tag===0?Oa(kl.bind(null,h)):dh(kl.bind(null,h)),yt?Ct(function(){Zn===0&&la()}):Za(tl,la),$=null;else{switch(jl(A)){case 1:$=tl;break;case 4:$=Sd;break;case 16:$=no;break;case 536870912:$=Bu;break;default:$=no}$=yc($,Vc.bind(null,h))}h.callbackPriority=g,h.callbackNode=$}}function Vc(h,g){if(Th=-1,Rr=0,Zn&6)throw Error(l(327));var $=h.callbackNode;if(Zu()&&h.callbackNode!==$)return null;var A=Rc(h,h===Or?Jr:0);if(A===0)return null;if(A&30||A&h.expiredLanes||g)g=oi(h,A);else{g=A;var N=Zn;Zn|=2;var W=Vh();(Or!==h||Jr!==g)&&(wu(),Wr(h,g));do try{Xc();break}catch(ke){Qu(h,ke)}while(!0);xo(),ta.current=W,Zn=N,ei!==null?g=0:(Or=null,Jr=0,g=Qi)}if(g!==0){if(g===2&&(N=Tl(h),N!==0&&(A=N,g=Tn(h,N))),g===1)throw $=iu,Wr(h,0),su(h,A),hn(h,ms()),$;if(g===6)su(h,A);else{if(N=h.current.alternate,!(A&30)&&!$s(N)&&(g=oi(h,A),g===2&&(W=Tl(h),W!==0&&(A=W,g=Tn(h,W))),g===1))throw $=iu,Wr(h,0),su(h,A),hn(h,ms()),$;switch(h.finishedWork=N,h.finishedLanes=A,g){case 0:case 1:throw Error(l(345));case 2:Yc(h,uo);break;case 3:if(su(h,A),(A&130023424)===A&&(g=pd+500-ms(),10<g)){if(Rc(h,0)!==0)break;if(N=h.suspendedLanes,(N&A)!==A){ys(),h.pingedLanes|=h.suspendedLanes&N;break}h.timeoutHandle=it(Yc.bind(null,h,uo),g);break}Yc(h,uo);break;case 4:if(su(h,A),(A&4194240)===A)break;for(g=h.eventTimes,N=-1;0<A;){var de=31-Yo(A);W=1<<de,de=g[de],de>N&&(N=de),A&=~W}if(A=N,A=ms()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*vh(A/1960))-A,10<A){h.timeoutHandle=it(Yc.bind(null,h,uo),A);break}Yc(h,uo);break;case 5:Yc(h,uo);break;default:throw Error(l(329))}}}return hn(h,ms()),h.callbackNode===$?Vc.bind(null,h):null}function Tn(h,g){var $=Ks;return h.current.memoizedState.isDehydrated&&(Wr(h,g).flags|=256),h=oi(h,g),h!==2&&(g=uo,uo=$,g!==null&&gi(g)),h}function gi(h){uo===null?uo=h:uo.push.apply(uo,h)}function $s(h){for(var g=h;;){if(g.flags&16384){var $=g.updateQueue;if($!==null&&($=$.stores,$!==null))for(var A=0;A<$.length;A++){var N=$[A],W=N.getSnapshot;N=N.value;try{if(!Ss(W(),N))return!1}catch{return!1}}}if($=g.child,g.subtreeFlags&16384&&$!==null)$.return=g,g=$;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function su(h,g){for(g&=~Ku,g&=~gc,h.suspendedLanes|=g,h.pingedLanes&=~g,h=h.expirationTimes;0<g;){var $=31-Yo(g),A=1<<$;h[$]=-1,g&=~A}}function kl(h){if(Zn&6)throw Error(l(327));Zu();var g=Rc(h,0);if(!(g&1))return hn(h,ms()),null;var $=oi(h,g);if(h.tag!==0&&$===2){var A=Tl(h);A!==0&&(g=A,$=Tn(h,A))}if($===1)throw $=iu,Wr(h,0),su(h,g),hn(h,ms()),$;if($===6)throw Error(l(345));return h.finishedWork=h.current.alternate,h.finishedLanes=g,Yc(h,uo),hn(h,ms()),null}function Pt(h){Ho!==null&&Ho.tag===0&&!(Zn&6)&&Zu();var g=Zn;Zn|=1;var $=Dn.transition,A=vr;try{if(Dn.transition=null,vr=1,h)return h()}finally{vr=A,Dn.transition=$,Zn=g,!(Zn&6)&&la()}}function hl(){Co=as.current,Cn(as)}function Wr(h,g){h.finishedWork=null,h.finishedLanes=0;var $=h.timeoutHandle;if($!==pt&&(h.timeoutHandle=pt,st($)),ei!==null)for($=ei.return;$!==null;){var A=$;switch(Hr(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&Qa();break;case 3:mh(),Cn(Di),Cn(_r),kt();break;case 5:di(A);break;case 4:mh();break;case 13:Cn(ye);break;case 19:Cn(ye);break;case 10:nl(A.type._context);break;case 22:case 23:hl()}$=$.return}if(Or=h,ei=h=go(h.current,null),Jr=Co=g,Qi=0,iu=null,Ku=gc=Yu=0,uo=Ks=null,$i!==null){for(g=0;g<$i.length;g++)if($=$i[g],A=$.interleaved,A!==null){$.interleaved=null;var N=A.next,W=$.pending;if(W!==null){var de=W.next;W.next=N,A.next=de}$.pending=A}$i=null}return h}function Qu(h,g){do{var $=ei;try{if(xo(),tn.current=Vu,vi){for(var A=gn.memoizedState;A!==null;){var N=A.queue;N!==null&&(N.pending=null),A=A.next}vi=!1}if(Xn=0,so=Pr=gn=null,oo=!1,il=0,Vi.current=null,$===null||$.return===null){Qi=1,iu=g,ei=null;break}e:{var W=h,de=$.return,ke=$,Qe=g;if(g=Jr,ke.flags|=32768,Qe!==null&&typeof Qe=="object"&&typeof Qe.then=="function"){var St=Qe,Jt=ke,ln=Jt.tag;if(!(Jt.mode&1)&&(ln===0||ln===11||ln===15)){var yn=Jt.alternate;yn?(Jt.updateQueue=yn.updateQueue,Jt.memoizedState=yn.memoizedState,Jt.lanes=yn.lanes):(Jt.updateQueue=null,Jt.memoizedState=null)}var vn=Cd(de);if(vn!==null){vn.flags&=-257,za(vn,de,ke,W,g),vn.mode&1&&dc(W,St,g),g=vn,Qe=St;var fn=g.updateQueue;if(fn===null){var Lr=new Set;Lr.add(Qe),g.updateQueue=Lr}else fn.add(Qe);break e}else{if(!(g&1)){dc(W,St,g),jc();break e}Qe=Error(l(426))}}else if(Wi&&ke.mode&1){var bt=Cd(de);if(bt!==null){!(bt.flags&65536)&&(bt.flags|=256),za(bt,de,ke,W,g),Hu(Qe);break e}}W=Qe,Qi!==4&&(Qi=2),Ks===null?Ks=[W]:Ks.push(W),Qe=Zo(Qe,ke),ke=de;do{switch(ke.tag){case 3:ke.flags|=65536,g&=-g,ke.lanes|=g;var Ce=Al(ke,Qe,g);hr(ke,Ce);break e;case 1:W=Qe;var Le=ke.type,rt=ke.stateNode;if(!(ke.flags&128)&&(typeof Le.getDerivedStateFromError=="function"||rt!==null&&typeof rt.componentDidCatch=="function"&&(ho===null||!ho.has(rt)))){ke.flags|=65536,g&=-g,ke.lanes|=g;var Ut=zc(ke,W,g);hr(ke,Ut);break e}}ke=ke.return}while(ke!==null)}dl($)}catch(rn){g=rn,ei===$&&$!==null&&(ei=$=$.return);continue}break}while(!0)}function Vh(){var h=ta.current;return ta.current=Vu,h===null?Vu:h}function jc(){(Qi===0||Qi===3||Qi===2)&&(Qi=4),Or===null||!(Yu&268435455)&&!(gc&268435455)||su(Or,Jr)}function oi(h,g){var $=Zn;Zn|=2;var A=Vh();Or===h&&Jr===g||Wr(h,g);do try{ji();break}catch(N){Qu(h,N)}while(!0);if(xo(),Zn=$,ta.current=A,ei!==null)throw Error(l(261));return Or=null,Jr=0,Qi}function ji(){for(;ei!==null;)po(ei)}function Xc(){for(;ei!==null&&!mu();)po(ei)}function po(h){var g=Kc(h.alternate,h,Co);h.memoizedProps=h.pendingProps,g===null?dl(h):ei=g,Vi.current=null}function dl(h){var g=h;do{var $=g.alternate;if(h=g.return,g.flags&32768){if($=yh($,g),$!==null){$.flags&=32767,ei=$;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Qi=6,ei=null;return}}else if($=Lp($,g,Co),$!==null){ei=$;return}if(g=g.sibling,g!==null){ei=g;return}ei=g=h}while(g!==null);Qi===0&&(Qi=5)}function Yc(h,g){var $=vr,A=Dn.transition;try{Dn.transition=null,vr=1,_c(h,g,$)}finally{Dn.transition=A,vr=$}return null}function _c(h,g,$){do Zu();while(Ho!==null);if(Zn&6)throw Error(l(327));var A=h.finishedWork,N=h.finishedLanes;if(A===null)return null;if(h.finishedWork=null,h.finishedLanes=0,A===h.current)throw Error(l(177));h.callbackNode=null,h.callbackPriority=0;var W=A.lanes|A.childLanes;if(El(h,W),h===Or&&(ei=Or=null,Jr=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||Rl||(Rl=!0,yc(no,function(){return Zu(),null})),W=(A.flags&15990)!==0,A.subtreeFlags&15990||W){W=Dn.transition,Dn.transition=null;var de=vr;vr=1;var ke=Zn;Zn|=4,Vi.current=null,nu(h,A),op(h,A),se(h.containerInfo),h.current=A,xu(A),Ki(),Zn=ke,vr=de,Dn.transition=W}else h.current=A;if(Rl&&(Rl=!1,Ho=h,Ju=N),W=h.pendingLanes,W===0&&(ho=null),ir(A.stateNode),hn(h,ms()),g!==null)for($=h.onRecoverableError,A=0;A<g.length;A++)$(g[A]);if($u)throw $u=!1,h=co,co=null,h;return Ju&1&&h.tag!==0&&Zu(),W=h.pendingLanes,W&1?h===bh?qu++:(qu=0,bh=h):qu=0,la(),null}function Zu(){if(Ho!==null){var h=jl(Ju),g=Dn.transition,$=vr;try{if(Dn.transition=null,vr=16>h?16:h,Ho===null)var A=!1;else{if(h=Ho,Ho=null,Ju=0,Zn&6)throw Error(l(331));var N=Zn;for(Zn|=4,_n=h.current;_n!==null;){var W=_n,de=W.child;if(_n.flags&16){var ke=W.deletions;if(ke!==null){for(var Qe=0;Qe<ke.length;Qe++){var St=ke[Qe];for(_n=St;_n!==null;){var Jt=_n;switch(Jt.tag){case 0:case 11:case 15:wo(8,Jt,W)}var ln=Jt.child;if(ln!==null)ln.return=Jt,_n=ln;else for(;_n!==null;){Jt=_n;var yn=Jt.sibling,vn=Jt.return;if(zo(Jt),Jt===St){_n=null;break}if(yn!==null){yn.return=vn,_n=yn;break}_n=vn}}}var fn=W.alternate;if(fn!==null){var Lr=fn.child;if(Lr!==null){fn.child=null;do{var bt=Lr.sibling;Lr.sibling=null,Lr=bt}while(Lr!==null)}}_n=W}}if(W.subtreeFlags&2064&&de!==null)de.return=W,_n=de;else e:for(;_n!==null;){if(W=_n,W.flags&2048)switch(W.tag){case 0:case 11:case 15:wo(9,W,W.return)}var Ce=W.sibling;if(Ce!==null){Ce.return=W.return,_n=Ce;break e}_n=W.return}}var Le=h.current;for(_n=Le;_n!==null;){de=_n;var rt=de.child;if(de.subtreeFlags&2064&&rt!==null)rt.return=de,_n=rt;else e:for(de=Le;_n!==null;){if(ke=_n,ke.flags&2048)try{switch(ke.tag){case 0:case 11:case 15:_s(9,ke)}}catch(rn){Js(ke,ke.return,rn)}if(ke===de){_n=null;break e}var Ut=ke.sibling;if(Ut!==null){Ut.return=ke.return,_n=Ut;break e}_n=ke.return}}if(Zn=N,la(),gu&&typeof gu.onPostCommitFiberRoot=="function")try{gu.onPostCommitFiberRoot(aa,h)}catch{}A=!0}return A}finally{vr=$,Dn.transition=g}}return!1}function Mo(h,g,$){g=Zo($,g),g=Al(h,g,1),La(h,g),g=ys(),h=Gs(h,1),h!==null&&(Sl(h,1,g),hn(h,g))}function Js(h,g,$){if(h.tag===3)Mo(h,h,$);else for(;g!==null;){if(g.tag===3){Mo(g,h,$);break}else if(g.tag===1){var A=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(ho===null||!ho.has(A))){h=Zo($,h),h=zc(g,h,1),La(g,h),h=ys(),g=Gs(g,1),g!==null&&(Sl(g,1,h),hn(g,h));break}}g=g.return}}function na(h,g,$){var A=h.pingCache;A!==null&&A.delete(g),g=ys(),h.pingedLanes|=h.suspendedLanes&$,Or===h&&(Jr&$)===$&&(Qi===4||Qi===3&&(Jr&130023424)===Jr&&500>ms()-pd?Wr(h,0):Ku|=$),hn(h,g)}function Sh(h,g){g===0&&(h.mode&1?(g=gr,gr<<=1,!(gr&130023424)&&(gr=4194304)):g=1);var $=ys();h=Gs(h,g),h!==null&&(Sl(h,g,$),hn(h,$))}function fo(h){var g=h.memoizedState,$=0;g!==null&&($=g.retryLane),Sh(h,$)}function Cu(h,g){var $=0;switch(h.tag){case 13:var A=h.stateNode,N=h.memoizedState;N!==null&&($=N.retryLane);break;case 19:A=h.stateNode;break;default:throw Error(l(314))}A!==null&&A.delete(g),Sh(h,$)}var Kc;Kc=function(h,g,$){if(h!==null)if(h.memoizedProps!==g.pendingProps||Di.current)Ai=!0;else{if(!(h.lanes&$)&&!(g.flags&128))return Ai=!1,Dp(h,g,$);Ai=!!(h.flags&131072)}else Ai=!1,Wi&&g.flags&1048576&&Kl(g,Da,g.index);switch(g.lanes=0,g.tag){case 2:var A=g.type;h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2),h=g.pendingProps;var N=hi(g,_r.current);wi(g,$),N=Yn(null,g,A,h,N,$);var W=ha();return g.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,fs(A)?(W=!0,uc(g)):W=!1,g.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,ad(g),N.updater=rp,g.stateNode=N,N._reactInternals=g,Xl(g,A,h,$),g=ea(null,g,A,!0,W,$)):(g.tag=0,Wi&&W&&Lh(g),ui(null,g,N,$),g=g.child),g;case 16:A=g.elementType;e:{switch(h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2),h=g.pendingProps,N=A._init,A=N(A._payload),g.type=A,N=g.tag=Ol(A),h=yi(A,h),N){case 0:g=is(null,g,A,h,$);break e;case 1:g=Hc(null,g,A,h,$);break e;case 11:g=qi(null,g,A,h,$);break e;case 14:g=rs(null,g,A,yi(A.type,h),$);break e}throw Error(l(306,A,""))}return g;case 0:return A=g.type,N=g.pendingProps,N=g.elementType===A?N:yi(A,N),is(h,g,A,N,$);case 1:return A=g.type,N=g.pendingProps,N=g.elementType===A?N:yi(A,N),Hc(h,g,A,N,$);case 3:e:{if(Md(g),h===null)throw Error(l(387));A=g.pendingProps,W=g.memoizedState,N=W.element,bu(h,g),Jo(g,A,null,$);var de=g.memoizedState;if(A=de.element,je&&W.isDehydrated)if(W={element:A,isDehydrated:!1,cache:de.cache,transitions:de.transitions},g.updateQueue.baseState=W,g.memoizedState=W,g.flags&256){N=Error(l(423)),g=Ad(h,g,A,$,N);break e}else if(A!==N){N=Error(l(424)),g=Ad(h,g,A,$,N);break e}else for(je&&(br=vt(g.stateNode.containerInfo),Ci=g,Wi=!0,Tu=null,ca=!1),$=Nc(g,null,A,$),g.child=$;$;)$.flags=$.flags&-3|4096,$=$.sibling;else{if(Dh(),A===N){g=fi(h,g,$);break e}ui(h,g,A,$)}g=g.child}return g;case 5:return xd(g),h===null&&Uu(g),A=g.type,N=g.pendingProps,W=h!==null?h.memoizedProps:null,de=N.children,qe(A,N)?de=null:W!==null&&qe(A,W)&&(g.flags|=32),ma(h,g),ui(h,g,de,$),g.child;case 6:return h===null&&Uu(g),null;case 13:return jn(h,g,$);case 4:return Su(g,g.stateNode.containerInfo),A=g.pendingProps,h===null?g.child=Dc(g,null,A,$):ui(h,g,A,$),g.child;case 11:return A=g.type,N=g.pendingProps,N=g.elementType===A?N:yi(A,N),qi(h,g,A,N,$);case 7:return ui(h,g,g.pendingProps,$),g.child;case 8:return ui(h,g,g.pendingProps.children,$),g.child;case 12:return ui(h,g,g.pendingProps.children,$),g.child;case 10:e:{if(A=g.type._context,N=g.pendingProps,W=g.memoizedProps,de=N.value,vu(g,A,de),W!==null)if(Ss(W.value,de)){if(W.children===N.children&&!Di.current){g=fi(h,g,$);break e}}else for(W=g.child,W!==null&&(W.return=g);W!==null;){var ke=W.dependencies;if(ke!==null){de=W.child;for(var Qe=ke.firstContext;Qe!==null;){if(Qe.context===A){if(W.tag===1){Qe=Gi(-1,$&-$),Qe.tag=2;var St=W.updateQueue;if(St!==null){St=St.shared;var Jt=St.pending;Jt===null?Qe.next=Qe:(Qe.next=Jt.next,Jt.next=Qe),St.pending=Qe}}W.lanes|=$,Qe=W.alternate,Qe!==null&&(Qe.lanes|=$),Ni(W.return,$,g),ke.lanes|=$;break}Qe=Qe.next}}else if(W.tag===10)de=W.type===g.type?null:W.child;else if(W.tag===18){if(de=W.return,de===null)throw Error(l(341));de.lanes|=$,ke=de.alternate,ke!==null&&(ke.lanes|=$),Ni(de,$,g),de=W.sibling}else de=W.child;if(de!==null)de.return=W;else for(de=W;de!==null;){if(de===g){de=null;break}if(W=de.sibling,W!==null){W.return=de.return,de=W;break}de=de.return}W=de}ui(h,g,N.children,$),g=g.child}return g;case 9:return N=g.type,A=g.pendingProps.children,wi(g,$),N=Hn(N),A=A(N),g.flags|=1,ui(h,g,A,$),g.child;case 14:return A=g.type,N=yi(A,g.pendingProps),N=yi(A.type,N),rs(h,g,A,N,$);case 15:return Uc(h,g,g.type,g.pendingProps,$);case 17:return A=g.type,N=g.pendingProps,N=g.elementType===A?N:yi(A,N),h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2),g.tag=1,fs(A)?(h=!0,uc(g)):h=!1,wi(g,$),mf(g,A,N),Xl(g,A,N,$),ea(null,g,A,!0,h,$);case 19:return pi(h,g,$);case 22:return fa(h,g,$)}throw Error(l(156,g.tag))};function yc(h,g){return Za(h,g)}function Go(h,g,$,A){this.tag=h,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mo(h,g,$,A){return new Go(h,g,$,A)}function ec(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Ol(h){if(typeof h=="function")return ec(h)?1:0;if(h!=null){if(h=h.$$typeof,h===M)return 11;if(h===O)return 14}return 2}function go(h,g){var $=h.alternate;return $===null?($=mo(h.tag,g,h.key,h.mode),$.elementType=h.elementType,$.type=h.type,$.stateNode=h.stateNode,$.alternate=h,h.alternate=$):($.pendingProps=g,$.type=h.type,$.flags=0,$.subtreeFlags=0,$.deletions=null),$.flags=h.flags&14680064,$.childLanes=h.childLanes,$.lanes=h.lanes,$.child=h.child,$.memoizedProps=h.memoizedProps,$.memoizedState=h.memoizedState,$.updateQueue=h.updateQueue,g=h.dependencies,$.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},$.sibling=h.sibling,$.index=h.index,$.ref=h.ref,$}function Ll(h,g,$,A,N,W){var de=2;if(A=h,typeof h=="function")ec(h)&&(de=1);else if(typeof h=="string")de=5;else e:switch(h){case _:return Va($.children,N,W,g);case v:de=8,N|=8;break;case b:return h=mo(12,$,g,N|2),h.elementType=b,h.lanes=W,h;case I:return h=mo(13,$,g,N),h.elementType=I,h.lanes=W,h;case L:return h=mo(19,$,g,N),h.elementType=L,h.lanes=W,h;case B:return ou($,N,W,g);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case E:de=10;break e;case C:de=9;break e;case M:de=11;break e;case O:de=14;break e;case P:de=16,A=null;break e}throw Error(l(130,h==null?h:typeof h,""))}return g=mo(de,$,g,N),g.elementType=h,g.type=A,g.lanes=W,g}function Va(h,g,$,A){return h=mo(7,h,A,g),h.lanes=$,h}function ou(h,g,$,A){return h=mo(22,h,A,g),h.elementType=B,h.lanes=$,h.stateNode={},h}function ti(h,g,$){return h=mo(6,h,null,g),h.lanes=$,h}function ls(h,g,$){return g=mo(4,h.children!==null?h.children:[],h.key,g),g.lanes=$,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}function jh(h,g,$,A,N){this.tag=g,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=pt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fu(0),this.expirationTimes=fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.identifierPrefix=A,this.onRecoverableError=N,je&&(this.mutableSourceEagerHydrationData=null)}function fd(h,g,$,A,N,W,de,ke,Qe){return h=new jh(h,g,$,ke,Qe),g===1?(g=1,W===!0&&(g|=8)):g=0,W=mo(3,null,null,g),h.current=W,W.stateNode=h,W.memoizedState={element:A,isDehydrated:$,cache:null,transitions:null},ad(W),h}function ya(h){if(!h)return Ur;h=h._reactInternals;e:{if(Z(h)!==h||h.tag!==1)throw Error(l(170));var g=h;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(fs(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(l(171))}if(h.tag===1){var $=h.type;if(fs($))return lc(h,$,g)}return g}function va(h){var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(l(188)):(h=Object.keys(h).join(","),Error(l(268,h)));return h=te(g),h===null?null:h.stateNode}function Xh(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var $=h.retryLane;h.retryLane=$!==0&&$<g?$:g}}function vc(h,g){Xh(h,g),(h=h.alternate)&&Xh(h,g)}function Np(h){return h=te(h),h===null?null:h.stateNode}function w(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var g=ys();Wa(h,134217728,g),vc(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var g=ys(),$=ks(h);Wa(h,$,g),vc(h,$)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var g=h.stateNode;if(g.current.memoizedState.isDehydrated){var $=Ei(g.pendingLanes);$!==0&&(yr(g,$|1),hn(g,ms()),!(Zn&6)&&(wu(),la()))}break;case 13:var A=ys();Pt(function(){return Wa(h,1,A)}),vc(h,1)}},t.batchedUpdates=function(h,g){var $=Zn;Zn|=1;try{return h(g)}finally{Zn=$,Zn===0&&(wu(),Pu&&la())}},t.createComponentSelector=function(h){return{$$typeof:ru,value:h}},t.createContainer=function(h,g,$,A,N,W,de){return fd(h,g,!1,null,$,A,N,W,de)},t.createHasPseudoClassSelector=function(h){return{$$typeof:Xu,value:h}},t.createHydrationContainer=function(h,g,$,A,N,W,de,ke,Qe){return h=fd($,A,!0,h,N,W,de,ke,Qe),h.context=ya(null),$=h.current,A=ys(),N=ks($),W=Gi(A,N),W.callback=g??null,La($,W),h.current.lanes=N,Sl(h,N,A),hn(h,A),h},t.createPortal=function(h,g,$){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:A==null?null:""+A,children:h,containerInfo:g,implementation:$}},t.createRoleSelector=function(h){return{$$typeof:os,value:h}},t.createTestNameSelector=function(h){return{$$typeof:Ha,value:h}},t.createTextSelector=function(h){return{$$typeof:xs,value:h}},t.deferredUpdates=function(h){var g=vr,$=Dn.transition;try{return Dn.transition=null,vr=16,h()}finally{vr=g,Dn.transition=$}},t.discreteUpdates=function(h,g,$,A,N){var W=vr,de=Dn.transition;try{return Dn.transition=null,vr=1,h(g,$,A,N)}finally{vr=W,Dn.transition=de,Zn===0&&wu()}},t.findAllNodes=ap,t.findBoundingRects=function(h,g){if(!Mt)throw Error(l(363));g=ap(h,g),h=[];for(var $=0;$<g.length;$++)h.push(xe(g[$]));for(g=h.length-1;0<g;g--){$=h[g];for(var A=$.x,N=A+$.width,W=$.y,de=W+$.height,ke=g-1;0<=ke;ke--)if(g!==ke){var Qe=h[ke],St=Qe.x,Jt=St+Qe.width,ln=Qe.y,yn=ln+Qe.height;if(A>=St&&W>=ln&&N<=Jt&&de<=yn){h.splice(g,1);break}else if(A!==St||$.width!==Qe.width||yn<W||ln>de){if(!(W!==ln||$.height!==Qe.height||Jt<A||St>N)){St>A&&(Qe.width+=St-A,Qe.x=A),Jt<N&&(Qe.width=N-St),h.splice(g,1);break}}else{ln>W&&(Qe.height+=ln-W,Qe.y=W),yn<de&&(Qe.height=de-ln),h.splice(g,1);break}}}return h},t.findHostInstance=va,t.findHostInstanceWithNoPortals=function(h){return h=J(h),h=h!==null?le(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return va(h)},t.flushControlled=function(h){var g=Zn;Zn|=1;var $=Dn.transition,A=vr;try{Dn.transition=null,vr=1,h()}finally{vr=A,Dn.transition=$,Zn=g,Zn===0&&(wu(),la())}},t.flushPassiveEffects=Zu,t.flushSync=Pt,t.focusWithin=function(h,g){if(!Mt)throw Error(l(363));for(h=Wc(h),g=mc(h,g),g=Array.from(g),h=0;h<g.length;){var $=g[h++];if(!we($)){if($.tag===5&&Tt($.stateNode))return!0;for($=$.child;$!==null;)g.push($),$=$.sibling}}return!1},t.getCurrentUpdatePriority=function(){return vr},t.getFindAllNodesFailureDescription=function(h,g){if(!Mt)throw Error(l(363));var $=0,A=[];h=[Wc(h),0];for(var N=0;N<h.length;){var W=h[N++],de=h[N++],ke=g[de];if((W.tag!==5||!we(W))&&(mi(W,ke)&&(A.push(Ga(ke)),de++,de>$&&($=de)),de<g.length))for(W=W.child;W!==null;)h.push(W,de),W=W.sibling}if($<g.length){for(h=[];$<g.length;$++)h.push(Ga(g[$]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return be(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:Np,findFiberByHostInstance:h.findFiberByHostInstance||w,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)h=!0;else{try{aa=g.inject(h),gu=g}catch{}h=!!g.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,g,$,A){if(!Mt)throw Error(l(363));h=ap(h,g);var N=At(h,$,A).disconnect;return{disconnect:function(){N()}}},t.registerMutableSourceForHydration=function(h,g){var $=g._getVersion;$=$(g._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[g,$]:h.mutableSourceEagerHydrationData.push(g,$)},t.runWithPriority=function(h,g){var $=vr;try{return vr=h,g()}finally{vr=$}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,g,$,A){var N=g.current,W=ys(),de=ks(N);return $=ya($),g.context===null?g.context=$:g.pendingContext=$,g=Gi(W,de),g.payload={element:h},A=A===void 0?null:A,A!==null&&(g.callback=A),La(N,g),h=Wa(N,de,W),h!==null&&ph(h,N,de),de},t};Uj.exports=tge;var nge=Uj.exports;const rge=O1(nge);var Hj={exports:{}},Gj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(q,oe){var se=q.length;q.push(oe);e:for(;0<se;){var pe=se-1>>>1,Se=q[pe];if(0<s(Se,oe))q[pe]=oe,q[se]=Se,se=pe;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var oe=q[0],se=q.pop();if(se!==oe){q[0]=se;e:for(var pe=0,Se=q.length,Fe=Se>>>1;pe<Fe;){var Re=2*(pe+1)-1,qe=q[Re],Ne=Re+1,it=q[Ne];if(0>s(qe,se))Ne<Se&&0>s(it,qe)?(q[pe]=it,q[Ne]=se,pe=Ne):(q[pe]=qe,q[Re]=se,pe=Re);else if(Ne<Se&&0>s(it,se))q[pe]=it,q[Ne]=se,pe=Ne;else break e}}return oe}function s(q,oe){var se=q.sortIndex-oe.sortIndex;return se!==0?se:q.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],_=1,v=null,b=3,E=!1,C=!1,M=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(q){for(var oe=t(p);oe!==null;){if(oe.callback===null)i(p);else if(oe.startTime<=q)i(p),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=t(p)}}function B(q){if(M=!1,P(q),!C)if(t(d)!==null)C=!0,be(z);else{var oe=t(p);oe!==null&&$e(B,oe.startTime-q)}}function z(q,oe){C=!1,M&&(M=!1,L(H),H=-1),E=!0;var se=b;try{for(P(oe),v=t(d);v!==null&&(!(v.expirationTime>oe)||q&&!J());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,b=v.priorityLevel;var Se=pe(v.expirationTime<=oe);oe=n.unstable_now(),typeof Se=="function"?v.callback=Se:v===t(d)&&i(d),P(oe)}else i(d);v=t(d)}if(v!==null)var Fe=!0;else{var Re=t(p);Re!==null&&$e(B,Re.startTime-oe),Fe=!1}return Fe}finally{v=null,b=se,E=!1}}var G=!1,j=null,H=-1,Z=5,ae=-1;function J(){return!(n.unstable_now()-ae<Z)}function te(){if(j!==null){var q=n.unstable_now();ae=q;var oe=!0;try{oe=j(!0,q)}finally{oe?he():(G=!1,j=null)}}else G=!1}var he;if(typeof O=="function")he=function(){O(te)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ce=le.port2;le.port1.onmessage=te,he=function(){ce.postMessage(null)}}else he=function(){I(te,0)};function be(q){j=q,G||(G=!0,he())}function $e(q,oe){H=I(function(){q(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){C||E||(C=!0,be(z))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(q){switch(b){case 1:case 2:case 3:var oe=3;break;default:oe=b}var se=b;b=oe;try{return q()}finally{b=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,oe){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=b;b=q;try{return oe()}finally{b=se}},n.unstable_scheduleCallback=function(q,oe,se){var pe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?pe+se:pe):se=pe,q){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=se+Se,q={id:_++,callback:oe,priorityLevel:q,startTime:se,expirationTime:Se,sortIndex:-1},se>pe?(q.sortIndex=se,e(p,q),t(d)===null&&q===t(p)&&(M?(L(H),H=-1):M=!0,$e(B,se-pe))):(q.sortIndex=Se,e(d,q),C||E||(C=!0,be(z))),q},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(q){var oe=b;return function(){var se=b;b=oe;try{return q.apply(this,arguments)}finally{b=se}}}})(Gj);Hj.exports=Gj;var C4=Hj.exports;const ige=n=>typeof n=="object"&&typeof n.then=="function",t1=[];function Wj(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}function Vj(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const o of t1)if(Wj(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return i.lifespan&&i.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,i.lifespan)),o.response;if(!t)throw o.promise}const s={keys:e,equal:i.equal,remove:()=>{const o=t1.indexOf(s);o!==-1&&t1.splice(o,1)},promise:(ige(n)?n:n(...e)).then(o=>{s.response=o,i.lifespan&&i.lifespan>0&&(s.timeout=setTimeout(s.remove,i.lifespan))}).catch(o=>s.error=o)};if(t1.push(s),!t)throw s.promise}const sge=(n,e,t)=>Vj(n,e,!1,t),oge=(n,e,t)=>void Vj(n,e,!0,t),age=n=>{if(n===void 0||n.length===0)t1.splice(0,t1.length);else{const e=t1.find(t=>Wj(n,t.keys,t.equal));e&&e.remove()}},jj={};function lge(n,e){function t(_,{args:v=[],attach:b,...E},C){let M=`${_[0].toUpperCase()}${_.slice(1)}`,I;if(_==="primitive"){if(E.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const L=E.object;I=Cx(L,{type:_,root:C,attach:b,primitive:!0})}else{const L=jj[M];if(!L)throw new Error(`R3F: ${M} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(v))throw new Error("R3F: The args prop must be an array!");I=Cx(new L(...v),{type:_,root:C,attach:b,memoizedProps:{args:v}})}return I.__r3f.attach===void 0&&(I instanceof Ov?I.__r3f.attach="geometry":I instanceof yv&&(I.__r3f.attach="material")),M!=="inject"&&W2(I,E),I}function i(_,v){let b=!1;if(v){var E,C;(E=v.__r3f)!=null&&E.attach?G2(_,v,v.__r3f.attach):v.isObject3D&&_.isObject3D&&(_.add(v),b=!0),b||(C=_.__r3f)==null||C.objects.push(v),v.__r3f||Cx(v,{}),v.__r3f.parent=_,xD(v),hS(v)}}function s(_,v,b){let E=!1;if(v){var C,M;if((C=v.__r3f)!=null&&C.attach)G2(_,v,v.__r3f.attach);else if(v.isObject3D&&_.isObject3D){v.parent=_,v.dispatchEvent({type:"added"}),_.dispatchEvent({type:"childadded",child:v});const I=_.children.filter(O=>O!==v),L=I.indexOf(b);_.children=[...I.slice(0,L),v,...I.slice(L)],E=!0}E||(M=_.__r3f)==null||M.objects.push(v),v.__r3f||Cx(v,{}),v.__r3f.parent=_,xD(v),hS(v)}}function o(_,v,b=!1){_&&[..._].forEach(E=>l(v,E,b))}function l(_,v,b){if(v){var E,C,M;if(v.__r3f&&(v.__r3f.parent=null),(E=_.__r3f)!=null&&E.objects&&(_.__r3f.objects=_.__r3f.objects.filter(B=>B!==v)),(C=v.__r3f)!=null&&C.attach)k4(_,v,v.__r3f.attach);else if(v.isObject3D&&_.isObject3D){var I;_.remove(v),(I=v.__r3f)!=null&&I.root&&gge(mA(v),v)}const O=(M=v.__r3f)==null?void 0:M.primitive,P=!O&&(b===void 0?v.dispose!==null:b);if(!O){var L;o((L=v.__r3f)==null?void 0:L.objects,v,P),o(v.children,v,P)}if(delete v.__r3f,P&&v.dispose&&v.type!=="Scene"){const B=()=>{try{v.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?C4.unstable_scheduleCallback(C4.unstable_IdlePriority,B):B()}hS(_)}}function u(_,v,b,E){var C;const M=(C=_.__r3f)==null?void 0:C.parent;if(!M)return;const I=t(v,b,_.__r3f.root);if(_.children){for(const L of _.children)L.__r3f&&i(I,L);_.children=_.children.filter(L=>!L.__r3f)}_.__r3f.objects.forEach(L=>i(I,L)),_.__r3f.objects=[],_.__r3f.autoRemovedBeforeAppend||l(M,_),I.parent&&(I.__r3f.autoRemovedBeforeAppend=!0),i(M,I),I.raycast&&I.__r3f.eventCount&&mA(I).getState().internal.interaction.push(I),[E,E.alternate].forEach(L=>{L!==null&&(L.stateNode=I,L.ref&&(typeof L.ref=="function"?L.ref(I):L.ref.current=I))})}const d=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:rge({createInstance:t,removeChild:l,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(_,v)=>{if(!v)return;const b=_.getState().scene;b.__r3f&&(b.__r3f.root=_,i(b,v))},removeChildFromContainer:(_,v)=>{v&&l(_.getState().scene,v)},insertInContainerBefore:(_,v,b)=>{if(!v||!b)return;const E=_.getState().scene;E.__r3f&&s(E,v,b)},getRootHostContext:()=>null,getChildHostContext:_=>_,finalizeInitialChildren(_){var v;return!!((v=_==null?void 0:_.__r3f)!=null?v:{}).handlers},prepareUpdate(_,v,b,E){var C;if(((C=_==null?void 0:_.__r3f)!=null?C:{}).primitive&&E.object&&E.object!==_)return[!0];{const{args:I=[],children:L,...O}=E,{args:P=[],children:B,...z}=b;if(!Array.isArray(I))throw new Error("R3F: the args prop must be an array!");if(I.some((j,H)=>j!==P[H]))return[!0];const G=Yj(_,O,z,!0);return G.changes.length?[!1,G]:null}},commitUpdate(_,[v,b],E,C,M,I){v?u(_,E,M,I):W2(_,b)},commitMount(_,v,b,E){var C;const M=(C=_.__r3f)!=null?C:{};_.raycast&&M.handlers&&M.eventCount&&mA(_).getState().internal.interaction.push(_)},getPublicInstance:_=>_,prepareForCommit:()=>null,preparePortalMount:_=>Cx(_.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(_){var v;const{attach:b,parent:E}=(v=_.__r3f)!=null?v:{};b&&E&&k4(E,_,b),_.isObject3D&&(_.visible=!1),hS(_)},unhideInstance(_,v){var b;const{attach:E,parent:C}=(b=_.__r3f)!=null?b:{};E&&C&&G2(C,_,E),(_.isObject3D&&v.visible==null||v.visible)&&(_.visible=!0),hS(_)},createTextInstance:d,hideTextInstance:d,unhideTextInstance:d,getCurrentEventPriority:()=>e?e():Zx.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Zp.fun(performance.now)?performance.now:Zp.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Zp.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Zp.fun(clearTimeout)?clearTimeout:void 0}),applyProps:W2}}var M4,A4;const H2=n=>"colorSpace"in n||"outputColorSpace"in n,uge=()=>{var n;return(n=jj.ColorManagement)!=null?n:null};typeof window<"u"&&((M4=window.document)!=null&&M4.createElement||((A4=window.navigator)==null?void 0:A4.product)==="ReactNative")?ge.useLayoutEffect:ge.useEffect;class cge extends ge.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}cge.getDerivedStateFromError=()=>({error:!0});const Xj="__default",I4=new Map,hge=n=>n&&!!n.memoized&&!!n.changes;function mA(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Zp={obj:n=>n===Object(n)&&!Zp.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Zp.str(n)||Zp.num(n))return n===e;const o=Zp.obj(n);if(o&&i==="reference")return n===e;const l=Zp.arr(n);if(l&&t==="reference")return n===e;if((l||o)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(o&&t==="shallow"&&i==="shallow"){for(u in s?e:n)if(!Zp.equ(n[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:n)if(n[u]!==e[u])return!1;if(Zp.und(u)){if(l&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function dge(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function Cx(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function ED(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),s=i.pop();return t=i.reduce((o,l)=>o[l],n),{target:t,key:s}}else return{target:t,key:e}}const R4=/-\d+$/;function G2(n,e,t){if(Zp.str(t)){if(R4.test(t)){const o=t.replace(R4,""),{target:l,key:u}=ED(n,o);Array.isArray(l[u])||(l[u]=[])}const{target:i,key:s}=ED(n,t);e.__r3f.previousAttach=i[s],i[s]=e}else e.__r3f.previousAttach=t(n,e)}function k4(n,e,t){var i,s;if(Zp.str(t)){const{target:o,key:l}=ED(n,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function Yj(n,{children:e,key:t,ref:i,...s},{children:o,key:l,ref:u,...d}={},p=!1){var _;const v=(_=n==null?void 0:n.__r3f)!=null?_:{},b=Object.entries(s),E=[];if(p){const M=Object.keys(d);for(let I=0;I<M.length;I++)s.hasOwnProperty(M[I])||b.unshift([M[I],Xj+"remove"])}b.forEach(([M,I])=>{var L;if((L=n.__r3f)!=null&&L.primitive&&M==="object"||Zp.equ(I,d[M]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(M))return E.push([M,I,!0,[]]);let O=[];M.includes("-")&&(O=M.split("-")),E.push([M,I,!1,O]);for(const P in s){const B=s[P];P.startsWith(`${M}-`)&&E.push([P,B,!1,P.split("-")])}});const C={...s};return v.memoizedProps&&v.memoizedProps.args&&(C.args=v.memoizedProps.args),v.memoizedProps&&v.memoizedProps.attach&&(C.attach=v.memoizedProps.attach),{memoized:C,changes:E}}const pge=typeof process<"u"&&!1;function W2(n,e){var t,i,s;const o=(t=n.__r3f)!=null?t:{},l=o.root,u=(i=l==null||l.getState==null?void 0:l.getState())!=null?i:{},{memoized:d,changes:p}=hge(e)?e:Yj(n,e),_=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=d);for(let b=0;b<p.length;b++){let[E,C,M,I]=p[b];if(H2(n)){const B="srgb",z="srgb-linear";E==="encoding"?(E="colorSpace",C=C===3001?B:z):E==="outputEncoding"&&(E="outputColorSpace",C=C===3001?B:z)}let L=n,O=L[E];if(I.length&&(O=I.reduce((P,B)=>P[B],n),!(O&&O.set))){const[P,...B]=I.reverse();L=B.reverse().reduce((z,G)=>z[G],n),E=P}if(C===Xj+"remove")if(L.constructor){let P=I4.get(L.constructor);P||(P=new L.constructor,I4.set(L.constructor,P)),C=P[E]}else C=0;if(M)C?o.handlers[E]=C:delete o.handlers[E],o.eventCount=Object.keys(o.handlers).length;else if(O&&O.set&&(O.copy||O instanceof iA)){if(Array.isArray(C))O.fromArray?O.fromArray(C):O.set(...C);else if(O.copy&&C&&C.constructor&&(pge?O.constructor.name===C.constructor.name:O.constructor===C.constructor))O.copy(C);else if(C!==void 0){const P=O instanceof kh;!P&&O.setScalar?O.setScalar(C):O instanceof iA&&C instanceof iA?O.mask=C.mask:O.set(C),!uge()&&!u.linear&&P&&O.convertSRGBToLinear()}}else if(L[E]=C,L[E]instanceof $m&&L[E].format===AB&&L[E].type===V8){const P=L[E];H2(P)&&H2(u.gl)?P.colorSpace=u.gl.outputColorSpace:P.encoding=u.gl.outputEncoding}hS(n)}if(o.parent&&n.raycast&&_!==o.eventCount){const b=mA(n).getState().internal,E=b.interaction.indexOf(n);E>-1&&b.interaction.splice(E,1),o.eventCount&&b.interaction.push(n)}return!(p.length===1&&p[0][0]==="onUpdate")&&p.length&&(s=n.__r3f)!=null&&s.parent&&xD(n),n}function hS(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function xD(n){n.onUpdate==null||n.onUpdate(n)}function fge(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Zx.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Zx.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Zx.ContinuousEventPriority;default:return Zx.DefaultEventPriority}}function mge(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function gge(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{mge(t.capturedMap,e,i,s)})}const O4=new WeakMap;function Kj(n,e){return function(t,...i){let s=O4.get(t);return s||(s=new t,O4.set(t,s)),n&&n(s),Promise.all(i.map(o=>new Promise((l,u)=>s.load(o,d=>{d.scene&&Object.assign(d,dge(d.scene)),l(d)},e,d=>u(new Error(`Could not load ${o}: ${d==null?void 0:d.message}`)))))).finally(()=>s.dispose==null?void 0:s.dispose())}}function N$(n,e,t,i){const s=Array.isArray(e)?e:[e],o=sge(Kj(t,i),[n,...s],{equal:Zp.equ});return Array.isArray(e)?o:o[0]}N$.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return oge(Kj(t),[n,...i])};N$.clear=function(n,e){const t=Array.isArray(e)?e:[e];return age([n,...t])};const _ge=new Map,{reconciler:yge,applyProps:iIe}=lge(_ge,fge);yge.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ge.version});function L4(n,e){if(e===_ne)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===rD||e===j8){let t=n.getIndex();if(t===null){const l=[],u=n.getAttribute("position");if(u!==void 0){for(let d=0;d<u.count;d++)l.push(d);n.setIndex(l),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(t)if(e===rD)for(let l=1;l<=i;l++)s.push(t.getX(0)),s.push(t.getX(l)),s.push(t.getX(l+1));else for(let l=0;l<i;l++)l%2===0?(s.push(t.getX(l)),s.push(t.getX(l+1)),s.push(t.getX(l+2))):(s.push(t.getX(l+2)),s.push(t.getX(l+1)),s.push(t.getX(l)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=n.clone();return o.setIndex(s),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const vge=parseInt(wB.replace(/\D+/g,""));class $P extends B1{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new xge(t)}),this.register(function(t){return new kge(t)}),this.register(function(t){return new Oge(t)}),this.register(function(t){return new Lge(t)}),this.register(function(t){return new $ge(t)}),this.register(function(t){return new Cge(t)}),this.register(function(t){return new Mge(t)}),this.register(function(t){return new Age(t)}),this.register(function(t){return new Ege(t)}),this.register(function(t){return new Ige(t)}),this.register(function(t){return new wge(t)}),this.register(function(t){return new Rge(t)}),this.register(function(t){return new Tge(t)}),this.register(function(t){return new Dge(t)}),this.register(function(t){return new Nge(t)})}load(e,t,i,s){const o=this;let l;this.resourcePath!==""?l=this.resourcePath:this.path!==""?l=this.path:l=c1.extractUrlBase(e),this.manager.itemStart(e);const u=function(p){s?s(p):console.error(p),o.manager.itemError(e),o.manager.itemEnd(e)},d=new eI(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,function(p){try{o.parse(p,l,function(_){t(_),o.manager.itemEnd(e)},u)}catch(_){u(_)}},i,u)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let o;const l={},u={};if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c1.decodeText(new Uint8Array(e.slice(0,4)))===Jj){try{l[Ws.KHR_BINARY_GLTF]=new Bge(e)}catch(_){s&&s(_);return}o=JSON.parse(l[Ws.KHR_BINARY_GLTF].content)}else o=JSON.parse(c1.decodeText(new Uint8Array(e)));else o=e;if(o.asset===void 0||o.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new Jge(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const _=this.pluginCallbacks[p](d);u[_.name]=_,l[_.name]=!0}if(o.extensionsUsed)for(let p=0;p<o.extensionsUsed.length;++p){const _=o.extensionsUsed[p],v=o.extensionsRequired||[];switch(_){case Ws.KHR_MATERIALS_UNLIT:l[_]=new Sge;break;case Ws.KHR_DRACO_MESH_COMPRESSION:l[_]=new Pge(o,this.dracoLoader);break;case Ws.KHR_TEXTURE_TRANSFORM:l[_]=new Fge;break;case Ws.KHR_MESH_QUANTIZATION:l[_]=new zge;break;default:v.indexOf(_)>=0&&u[_]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+_+'".')}}d.setExtensions(l),d.setPlugins(u),d.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,o){i.parse(e,t,s,o)})}}function bge(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ws={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Tge{constructor(e){this.parser=e,this.name=Ws.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const o=t.json,d=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let p;const _=new kh(16777215);d.color!==void 0&&_.fromArray(d.color);const v=d.range!==void 0?d.range:0;switch(d.type){case"directional":p=new Nre(_),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new Lre(_),p.distance=v;break;case"spot":p=new kre(_),p.distance=v,d.spot=d.spot||{},d.spot.innerConeAngle=d.spot.innerConeAngle!==void 0?d.spot.innerConeAngle:0,d.spot.outerConeAngle=d.spot.outerConeAngle!==void 0?d.spot.outerConeAngle:Math.PI/4,p.angle=d.spot.outerConeAngle,p.penumbra=1-d.spot.innerConeAngle/d.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+d.type)}return p.position.set(0,0,0),p.decay=2,nv(p,d),d.intensity!==void 0&&(p.intensity=d.intensity),p.name=t.createUniqueName(d.name||"light_"+e),s=Promise.resolve(p),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,o=i.json.nodes[e],u=(o.extensions&&o.extensions[this.name]||{}).light;return u===void 0?null:this._loadLight(u).then(function(d){return i._getNodeRef(t.cache,u,d)})}}class Sge{constructor(){this.name=Ws.KHR_MATERIALS_UNLIT}getMaterialType(){return $S}extendParams(e,t,i){const s=[];e.color=new kh(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const l=o.baseColorFactor;e.color.fromArray(l),e.opacity=l[3]}o.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",o.baseColorTexture,3001))}return Promise.all(s)}}class Ege{constructor(e){this.parser=e,this.name=Ws.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}}class xge{constructor(e){this.parser=e,this.name=Ws.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const u=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new sc(u,u)}return Promise.all(o)}}class wge{constructor(e){this.parser=e,this.name=Ws.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(o)}}class $ge{constructor(e){this.parser=e,this.name=Ws.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new kh(0,0,0),t.sheenRoughness=0,t.sheen=1;const l=s.extensions[this.name];return l.sheenColorFactor!==void 0&&t.sheenColor.fromArray(l.sheenColorFactor),l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&o.push(i.assignTexture(t,"sheenColorMap",l.sheenColorTexture,3001)),l.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(o)}}class Cge{constructor(e){this.parser=e,this.name=Ws.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&o.push(i.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(o)}}class Mge{constructor(e){this.parser=e,this.name=Ws.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&o.push(i.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;const u=l.attenuationColor||[1,1,1];return t.attenuationColor=new kh(u[0],u[1],u[2]),Promise.all(o)}}class Age{constructor(e){this.parser=e,this.name=Ws.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lv}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class Ige{constructor(e){this.parser=e,this.name=Ws.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&o.push(i.assignTexture(t,"specularIntensityMap",l.specularTexture));const u=l.specularColorFactor||[1,1,1];return t.specularColor=new kh(u[0],u[1],u[2]),l.specularColorTexture!==void 0&&o.push(i.assignTexture(t,"specularColorMap",l.specularColorTexture,3001)),Promise.all(o)}}class Rge{constructor(e){this.parser=e,this.name=Ws.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.anisotropyStrength!==void 0&&(t.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(t.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&o.push(i.assignTexture(t,"anisotropyMap",l.anisotropyTexture)),Promise.all(o)}}class kge{constructor(e){this.parser=e,this.name=Ws.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const o=s.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,l)}}class Oge{constructor(e){this.parser=e,this.name=Ws.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let d=i.textureLoader;if(u.uri){const p=i.options.manager.getHandler(u.uri);p!==null&&(d=p)}return this.detectSupport().then(function(p){if(p)return i.loadTextureImage(e,l.source,d);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Lge{constructor(e){this.parser=e,this.name=Ws.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let d=i.textureLoader;if(u.uri){const p=i.options.manager.getHandler(u.uri);p!==null&&(d=p)}return this.detectSupport().then(function(p){if(p)return i.loadTextureImage(e,l.source,d);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Dge{constructor(e){this.name=Ws.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],o=this.parser.getDependency("buffer",s.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(u){const d=s.byteOffset||0,p=s.byteLength||0,_=s.count,v=s.byteStride,b=new Uint8Array(u,d,p);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(_,v,b,s.mode,s.filter).then(function(E){return E.buffer}):l.ready.then(function(){const E=new ArrayBuffer(_*v);return l.decodeGltfBuffer(new Uint8Array(E),_,v,b,s.mode,s.filter),E})})}else return null}}class Nge{constructor(e){this.name=Ws.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const p of s.primitives)if(p.mode!==tg.TRIANGLES&&p.mode!==tg.TRIANGLE_STRIP&&p.mode!==tg.TRIANGLE_FAN&&p.mode!==void 0)return null;const l=i.extensions[this.name].attributes,u=[],d={};for(const p in l)u.push(this.parser.getDependency("accessor",l[p]).then(_=>(d[p]=_,d[p])));return u.length<1?null:(u.push(this.parser.createNodeMesh(e)),Promise.all(u).then(p=>{const _=p.pop(),v=_.isGroup?_.children:[_],b=p[0].count,E=[];for(const C of v){const M=new Vs,I=new Bt,L=new Lu,O=new Bt(1,1,1),P=new pre(C.geometry,C.material,b);for(let B=0;B<b;B++)d.TRANSLATION&&I.fromBufferAttribute(d.TRANSLATION,B),d.ROTATION&&L.fromBufferAttribute(d.ROTATION,B),d.SCALE&&O.fromBufferAttribute(d.SCALE,B),P.setMatrixAt(B,M.compose(I,L,O));for(const B in d)B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&C.geometry.setAttribute(B,d[B]);ah.prototype.copy.call(P,C),this.parser.assignFinalMaterial(P),E.push(P)}return _.isGroup?(_.clear(),_.add(...E),_):E[0]}))}}const Jj="glTF",Mx=12,D4={JSON:1313821514,BIN:5130562};class Bge{constructor(e){this.name=Ws.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Mx);if(this.header={magic:c1.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Jj)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Mx,s=new DataView(e,Mx);let o=0;for(;o<i;){const l=s.getUint32(o,!0);o+=4;const u=s.getUint32(o,!0);if(o+=4,u===D4.JSON){const d=new Uint8Array(e,Mx+o,l);this.content=c1.decodeText(d)}else if(u===D4.BIN){const d=Mx+o;this.body=e.slice(d,d+l)}o+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Pge{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ws.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,o=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,u={},d={},p={};for(const _ in l){const v=wD[_]||_.toLowerCase();u[v]=l[_]}for(const _ in e.attributes){const v=wD[_]||_.toLowerCase();if(l[_]!==void 0){const b=i.accessors[e.attributes[_]],E=GS[b.componentType];p[v]=E.name,d[v]=b.normalized===!0}}return t.getDependency("bufferView",o).then(function(_){return new Promise(function(v){s.decodeDracoFile(_,function(b){for(const E in b.attributes){const C=b.attributes[E],M=d[E];M!==void 0&&(C.normalized=M)}v(b)},u,p)})})}}class Fge{constructor(){this.name=Ws.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class zge{constructor(){this.name=Ws.KHR_MESH_QUANTIZATION}}class qj extends C${constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s*3+s;for(let l=0;l!==s;l++)t[l]=i[o+l];return t}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=u*2,p=u*3,_=s-t,v=(i-t)/_,b=v*v,E=b*v,C=e*p,M=C-p,I=-2*E+3*b,L=E-b,O=1-I,P=L-b+v;for(let B=0;B!==u;B++){const z=l[M+B+u],G=l[M+B+d]*_,j=l[C+B+u],H=l[C+B]*_;o[B]=O*z+P*G+I*j+L*H}return o}}const Uge=new Lu;class Hge extends qj{interpolate_(e,t,i,s){const o=super.interpolate_(e,t,i,s);return Uge.fromArray(o).normalize().toArray(o),o}}const tg={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},GS={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},N4={9728:Hw,9729:$B,9984:cne,9985:dne,9986:hne,9987:CB},B4={33071:Jx,33648:nD,10497:Uw},V2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wD={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...vge>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Uy={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Gge={CUBICSPLINE:void 0,LINEAR:eE,STEP:Gw},j2={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Wge(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new BB({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ZA})),n.DefaultMaterial}function Eb(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function nv(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Vge(n,e,t){let i=!1,s=!1,o=!1;for(let p=0,_=e.length;p<_;p++){const v=e[p];if(v.POSITION!==void 0&&(i=!0),v.NORMAL!==void 0&&(s=!0),v.COLOR_0!==void 0&&(o=!0),i&&s&&o)break}if(!i&&!s&&!o)return Promise.resolve(n);const l=[],u=[],d=[];for(let p=0,_=e.length;p<_;p++){const v=e[p];if(i){const b=v.POSITION!==void 0?t.getDependency("accessor",v.POSITION):n.attributes.position;l.push(b)}if(s){const b=v.NORMAL!==void 0?t.getDependency("accessor",v.NORMAL):n.attributes.normal;u.push(b)}if(o){const b=v.COLOR_0!==void 0?t.getDependency("accessor",v.COLOR_0):n.attributes.color;d.push(b)}}return Promise.all([Promise.all(l),Promise.all(u),Promise.all(d)]).then(function(p){const _=p[0],v=p[1],b=p[2];return i&&(n.morphAttributes.position=_),s&&(n.morphAttributes.normal=v),o&&(n.morphAttributes.color=b),n.morphTargetsRelative=!0,n})}function jge(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Xge(n){let e;const t=n.extensions&&n.extensions[Ws.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+X2(t.attributes):e=n.indices+":"+X2(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+X2(n.targets[i]);return e}function X2(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function $D(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Yge(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Kge=new Vs;class Jge{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new bge,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,o=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||s&&o<98?this.textureLoader=new Ire(this.options.manager):this.textureLoader=new Bre(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new eI(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(l){const u={scene:l[0][s.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:s.asset,parser:i,userData:{}};Eb(o,u,s),nv(u,s),Promise.all(i._invokeAll(function(d){return d.afterRoot&&d.afterRoot(u)})).then(function(){e(u)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,o=t.length;s<o;s++){const l=t[s].joints;for(let u=0,d=l.length;u<d;u++)e[l[u]].isBone=!0}for(let s=0,o=e.length;s<o;s++){const l=e[s];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(i[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),o=(l,u)=>{const d=this.associations.get(l);d!=null&&this.associations.set(u,d);for(const[p,_]of l.children.entries())o(_,u.children[p])};return o(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const o=e(t[s]);o&&i.push(o)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":s=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(o,l){return i.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ws.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(o,l){i.load(c1.resolveURL(t.uri,s.path),o,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,o=t.byteOffset||0;return i.slice(o,o+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const l=V2[s.type],u=GS[s.componentType],d=s.normalized===!0,p=new u(s.count*l);return Promise.resolve(new Cm(p,l,d))}const o=[];return s.bufferView!==void 0?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),s.sparse!==void 0&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then(function(l){const u=l[0],d=V2[s.type],p=GS[s.componentType],_=p.BYTES_PER_ELEMENT,v=_*d,b=s.byteOffset||0,E=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,C=s.normalized===!0;let M,I;if(E&&E!==v){const L=Math.floor(b/E),O="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+L+":"+s.count;let P=t.cache.get(O);P||(M=new p(u,L*E,s.count*E/_),P=new lre(M,E/_),t.cache.add(O,P)),I=new LB(P,d,b%E/_,C)}else u===null?M=new p(s.count*d):M=new p(u,b,s.count*d),I=new Cm(M,d,C);if(s.sparse!==void 0){const L=V2.SCALAR,O=GS[s.sparse.indices.componentType],P=s.sparse.indices.byteOffset||0,B=s.sparse.values.byteOffset||0,z=new O(l[1],P,s.sparse.count*L),G=new p(l[2],B,s.sparse.count*d);u!==null&&(I=new Cm(I.array.slice(),I.itemSize,I.normalized));for(let j=0,H=z.length;j<H;j++){const Z=z[j];if(I.setX(Z,G[j*d]),d>=2&&I.setY(Z,G[j*d+1]),d>=3&&I.setZ(Z,G[j*d+2]),d>=4&&I.setW(Z,G[j*d+3]),d>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return I})}loadTexture(e){const t=this.json,i=this.options,o=t.textures[e].source,l=t.images[o];let u=this.textureLoader;if(l.uri){const d=i.manager.getHandler(l.uri);d!==null&&(u=d)}return this.loadTextureImage(e,o,u)}loadTextureImage(e,t,i){const s=this,o=this.json,l=o.textures[e],u=o.images[t],d=(u.uri||u.bufferView)+":"+l.sampler;if(this.textureCache[d])return this.textureCache[d];const p=this.loadImageSource(t,i).then(function(_){_.flipY=!1,_.name=l.name||u.name||"",_.name===""&&typeof u.uri=="string"&&u.uri.startsWith("data:image/")===!1&&(_.name=u.uri);const b=(o.samplers||{})[l.sampler]||{};return _.magFilter=N4[b.magFilter]||$B,_.minFilter=N4[b.minFilter]||CB,_.wrapS=B4[b.wrapS]||Uw,_.wrapT=B4[b.wrapT]||Uw,s.associations.set(_,{textures:e}),_}).catch(function(){return null});return this.textureCache[d]=p,p}loadImageSource(e,t){const i=this,s=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(v=>v.clone());const l=s.images[e],u=self.URL||self.webkitURL;let d=l.uri||"",p=!1;if(l.bufferView!==void 0)d=i.getDependency("bufferView",l.bufferView).then(function(v){p=!0;const b=new Blob([v],{type:l.mimeType});return d=u.createObjectURL(b),d});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const _=Promise.resolve(d).then(function(v){return new Promise(function(b,E){let C=b;t.isImageBitmapLoader===!0&&(C=function(M){const I=new $m(M);I.needsUpdate=!0,b(I)}),t.load(c1.resolveURL(v,o.path),C,void 0,E)})}).then(function(v){return p===!0&&u.revokeObjectURL(d),v.userData.mimeType=l.mimeType||Yge(l.uri),v}).catch(function(v){throw console.error("THREE.GLTFLoader: Couldn't load texture",d),v});return this.sourceCache[e]=_,_}assignTexture(e,t,i,s){const o=this;return this.getDependency("texture",i.index).then(function(l){if(!l)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(l=l.clone(),l.channel=i.texCoord),o.extensions[Ws.KHR_TEXTURE_TRANSFORM]){const u=i.extensions!==void 0?i.extensions[Ws.KHR_TEXTURE_TRANSFORM]:void 0;if(u){const d=o.associations.get(l);l=o.extensions[Ws.KHR_TEXTURE_TRANSFORM].extendTexture(l,u),o.associations.set(l,d)}}return s!==void 0&&("colorSpace"in l?l.colorSpace=s===3001?"srgb":"srgb-linear":l.encoding=s),e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){const u="PointsMaterial:"+i.uuid;let d=this.cache.get(u);d||(d=new n7,yv.prototype.copy.call(d,i),d.color.copy(i.color),d.map=i.map,d.sizeAttenuation=!1,this.cache.add(u,d)),i=d}else if(e.isLine){const u="LineBasicMaterial:"+i.uuid;let d=this.cache.get(u);d||(d=new t7,yv.prototype.copy.call(d,i),d.color.copy(i.color),d.map=i.map,this.cache.add(u,d)),i=d}if(s||o||l){let u="ClonedMaterial:"+i.uuid+":";s&&(u+="derivative-tangents:"),o&&(u+="vertex-colors:"),l&&(u+="flat-shading:");let d=this.cache.get(u);d||(d=i.clone(),o&&(d.vertexColors=!0),l&&(d.flatShading=!0),s&&(d.normalScale&&(d.normalScale.y*=-1),d.clearcoatNormalScale&&(d.clearcoatNormalScale.y*=-1)),this.cache.add(u,d),this.associations.set(d,this.associations.get(i))),i=d}e.material=i}getMaterialType(){return BB}loadMaterial(e){const t=this,i=this.json,s=this.extensions,o=i.materials[e];let l;const u={},d=o.extensions||{},p=[];if(d[Ws.KHR_MATERIALS_UNLIT]){const v=s[Ws.KHR_MATERIALS_UNLIT];l=v.getMaterialType(),p.push(v.extendParams(u,o,t))}else{const v=o.pbrMetallicRoughness||{};if(u.color=new kh(1,1,1),u.opacity=1,Array.isArray(v.baseColorFactor)){const b=v.baseColorFactor;u.color.fromArray(b),u.opacity=b[3]}v.baseColorTexture!==void 0&&p.push(t.assignTexture(u,"map",v.baseColorTexture,3001)),u.metalness=v.metallicFactor!==void 0?v.metallicFactor:1,u.roughness=v.roughnessFactor!==void 0?v.roughnessFactor:1,v.metallicRoughnessTexture!==void 0&&(p.push(t.assignTexture(u,"metalnessMap",v.metallicRoughnessTexture)),p.push(t.assignTexture(u,"roughnessMap",v.metallicRoughnessTexture))),l=this._invokeOne(function(b){return b.getMaterialType&&b.getMaterialType(e)}),p.push(Promise.all(this._invokeAll(function(b){return b.extendMaterialParams&&b.extendMaterialParams(e,u)})))}o.doubleSided===!0&&(u.side=ane);const _=o.alphaMode||j2.OPAQUE;if(_===j2.BLEND?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,_===j2.MASK&&(u.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&l!==$S&&(p.push(t.assignTexture(u,"normalMap",o.normalTexture)),u.normalScale=new sc(1,1),o.normalTexture.scale!==void 0)){const v=o.normalTexture.scale;u.normalScale.set(v,v)}return o.occlusionTexture!==void 0&&l!==$S&&(p.push(t.assignTexture(u,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(u.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&l!==$S&&(u.emissive=new kh().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&l!==$S&&p.push(t.assignTexture(u,"emissiveMap",o.emissiveTexture,3001)),Promise.all(p).then(function(){const v=new l(u);return o.name&&(v.name=o.name),nv(v,o),t.associations.set(v,{materials:e}),o.extensions&&Eb(s,v,o),v})}createUniqueName(e){const t=$a.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function o(u){return i[Ws.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(u,t).then(function(d){return P4(d,u,t)})}const l=[];for(let u=0,d=e.length;u<d;u++){const p=e[u],_=Xge(p),v=s[_];if(v)l.push(v.promise);else{let b;p.extensions&&p.extensions[Ws.KHR_DRACO_MESH_COMPRESSION]?b=o(p):b=P4(new Ov,p,t),s[_]={primitive:p,promise:b},l.push(b)}}return Promise.all(l)}loadMesh(e){const t=this,i=this.json,s=this.extensions,o=i.meshes[e],l=o.primitives,u=[];for(let d=0,p=l.length;d<p;d++){const _=l[d].material===void 0?Wge(this.cache):this.getDependency("material",l[d].material);u.push(_)}return u.push(t.loadGeometries(l)),Promise.all(u).then(function(d){const p=d.slice(0,d.length-1),_=d[d.length-1],v=[];for(let E=0,C=_.length;E<C;E++){const M=_[E],I=l[E];let L;const O=p[E];if(I.mode===tg.TRIANGLES||I.mode===tg.TRIANGLE_STRIP||I.mode===tg.TRIANGLE_FAN||I.mode===void 0)L=o.isSkinnedMesh===!0?new cre(M,O):new XI(M,O),L.isSkinnedMesh===!0&&L.normalizeSkinWeights(),I.mode===tg.TRIANGLE_STRIP?L.geometry=L4(L.geometry,j8):I.mode===tg.TRIANGLE_FAN&&(L.geometry=L4(L.geometry,rD));else if(I.mode===tg.LINES)L=new fre(M,O);else if(I.mode===tg.LINE_STRIP)L=new NB(M,O);else if(I.mode===tg.LINE_LOOP)L=new mre(M,O);else if(I.mode===tg.POINTS)L=new gre(M,O);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+I.mode);Object.keys(L.geometry.morphAttributes).length>0&&jge(L,o),L.name=t.createUniqueName(o.name||"mesh_"+e),nv(L,o),I.extensions&&Eb(s,L,I),t.assignFinalMaterial(L),v.push(L)}for(let E=0,C=v.length;E<C;E++)t.associations.set(v[E],{meshes:e,primitives:E});if(v.length===1)return o.extensions&&Eb(s,v[0],o),v[0];const b=new g2;o.extensions&&Eb(s,b,o),t.associations.set(b,{meshes:e});for(let E=0,C=v.length;E<C;E++)b.add(v[E]);return b})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new OB(Bne.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new Q8(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),nv(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,o=t.joints.length;s<o;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const o=s.pop(),l=s,u=[],d=[];for(let p=0,_=l.length;p<_;p++){const v=l[p];if(v){u.push(v);const b=new Vs;o!==null&&b.fromArray(o.array,p*16),d.push(b)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[p])}return new DB(u,d)})}loadAnimation(e){const i=this.json.animations[e],s=i.name?i.name:"animation_"+e,o=[],l=[],u=[],d=[],p=[];for(let _=0,v=i.channels.length;_<v;_++){const b=i.channels[_],E=i.samplers[b.sampler],C=b.target,M=C.node,I=i.parameters!==void 0?i.parameters[E.input]:E.input,L=i.parameters!==void 0?i.parameters[E.output]:E.output;C.node!==void 0&&(o.push(this.getDependency("node",M)),l.push(this.getDependency("accessor",I)),u.push(this.getDependency("accessor",L)),d.push(E),p.push(C))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(d),Promise.all(p)]).then(function(_){const v=_[0],b=_[1],E=_[2],C=_[3],M=_[4],I=[];for(let L=0,O=v.length;L<O;L++){const P=v[L],B=b[L],z=E[L],G=C[L],j=M[L];if(P===void 0)continue;P.updateMatrix();let H;switch(Uy[j.path]){case Uy.weights:H=Vw;break;case Uy.rotation:H=w1;break;case Uy.position:case Uy.scale:default:H=jw;break}const Z=P.name?P.name:P.uuid,ae=G.interpolation!==void 0?Gge[G.interpolation]:eE,J=[];Uy[j.path]===Uy.weights?P.traverse(function(he){he.morphTargetInfluences&&J.push(he.name?he.name:he.uuid)}):J.push(Z);let te=z.array;if(z.normalized){const he=$D(te.constructor),le=new Float32Array(te.length);for(let ce=0,be=te.length;ce<be;ce++)le[ce]=te[ce]*he;te=le}for(let he=0,le=J.length;he<le;he++){const ce=new H(J[he]+"."+Uy[j.path],B.array,te,ae);G.interpolation==="CUBICSPLINE"&&(ce.createInterpolant=function($e){const q=this instanceof w1?Hge:qj;return new q(this.times,this.values,this.getValueSize()/3,$e)},ce.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),I.push(ce)}}return new Ere(s,void 0,I)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(o){const l=i._getNodeRef(i.meshCache,s.mesh,o);return s.weights!==void 0&&l.traverse(function(u){if(u.isMesh)for(let d=0,p=s.weights.length;d<p;d++)u.morphTargetInfluences[d]=s.weights[d]}),l})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],o=i._loadNodeShallow(e),l=[],u=s.children||[];for(let p=0,_=u.length;p<_;p++)l.push(i.getDependency("node",u[p]));const d=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([o,Promise.all(l),d]).then(function(p){const _=p[0],v=p[1],b=p[2];b!==null&&_.traverse(function(E){E.isSkinnedMesh&&E.bind(b,Kge)});for(let E=0,C=v.length;E<C;E++)_.add(v[E]);return _})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const o=t.nodes[e],l=o.name?s.createUniqueName(o.name):"",u=[],d=s._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(e)});return d&&u.push(d),o.camera!==void 0&&u.push(s.getDependency("camera",o.camera).then(function(p){return s._getNodeRef(s.cameraCache,o.camera,p)})),s._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(e)}).forEach(function(p){u.push(p)}),this.nodeCache[e]=Promise.all(u).then(function(p){let _;if(o.isBone===!0?_=new Z8:p.length>1?_=new g2:p.length===1?_=p[0]:_=new ah,_!==p[0])for(let v=0,b=p.length;v<b;v++)_.add(p[v]);if(o.name&&(_.userData.name=o.name,_.name=l),nv(_,o),o.extensions&&Eb(i,_,o),o.matrix!==void 0){const v=new Vs;v.fromArray(o.matrix),_.applyMatrix4(v)}else o.translation!==void 0&&_.position.fromArray(o.translation),o.rotation!==void 0&&_.quaternion.fromArray(o.rotation),o.scale!==void 0&&_.scale.fromArray(o.scale);return s.associations.has(_)||s.associations.set(_,{}),s.associations.get(_).nodes=e,_}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,o=new g2;i.name&&(o.name=s.createUniqueName(i.name)),nv(o,i),i.extensions&&Eb(t,o,i);const l=i.nodes||[],u=[];for(let d=0,p=l.length;d<p;d++)u.push(s.getDependency("node",l[d]));return Promise.all(u).then(function(d){for(let _=0,v=d.length;_<v;_++)o.add(d[_]);const p=_=>{const v=new Map;for(const[b,E]of s.associations)(b instanceof yv||b instanceof $m)&&v.set(b,E);return _.traverse(b=>{const E=s.associations.get(b);E!=null&&v.set(b,E)}),v};return s.associations=p(o),o})}}function qge(n,e,t){const i=e.attributes,s=new cy;if(i.POSITION!==void 0){const u=t.json.accessors[i.POSITION],d=u.min,p=u.max;if(d!==void 0&&p!==void 0){if(s.set(new Bt(d[0],d[1],d[2]),new Bt(p[0],p[1],p[2])),u.normalized){const _=$D(GS[u.componentType]);s.min.multiplyScalar(_),s.max.multiplyScalar(_)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=e.targets;if(o!==void 0){const u=new Bt,d=new Bt;for(let p=0,_=o.length;p<_;p++){const v=o[p];if(v.POSITION!==void 0){const b=t.json.accessors[v.POSITION],E=b.min,C=b.max;if(E!==void 0&&C!==void 0){if(d.setX(Math.max(Math.abs(E[0]),Math.abs(C[0]))),d.setY(Math.max(Math.abs(E[1]),Math.abs(C[1]))),d.setZ(Math.max(Math.abs(E[2]),Math.abs(C[2]))),b.normalized){const M=$D(GS[b.componentType]);d.multiplyScalar(M)}u.max(d)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(u)}n.boundingBox=s;const l=new r_;s.getCenter(l.center),l.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=l}function P4(n,e,t){const i=e.attributes,s=[];function o(l,u){return t.getDependency("accessor",l).then(function(d){n.setAttribute(u,d)})}for(const l in i){const u=wD[l]||l.toLowerCase();u in n.attributes||s.push(o(i[l],u))}if(e.indices!==void 0&&!n.index){const l=t.getDependency("accessor",e.indices).then(function(u){n.setIndex(u)});s.push(l)}return nv(n,e),qge(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?Vge(n,e.targets,t):n})}const Y2=new WeakMap;class Qge extends B1{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const o=new eI(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,l=>{const u={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(l,u).then(t).catch(s)},i,s)}decodeDracoFile(e,t,i,s){const o={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,o).then(t)}decodeGeometry(e,t){for(const d in t.attributeTypes){const p=t.attributeTypes[d];p.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[d]=p.name)}const i=JSON.stringify(t);if(Y2.has(e)){const d=Y2.get(e);if(d.key===i)return d.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const o=this.workerNextTaskID++,l=e.byteLength,u=this._getWorker(o,l).then(d=>(s=d,new Promise((p,_)=>{s._callbacks[o]={resolve:p,reject:_},s.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))).then(d=>this._createGeometry(d.geometry));return u.catch(()=>!0).then(()=>{s&&o&&this._releaseTask(s,o)}),Y2.set(e,{key:i,promise:u}),u}_createGeometry(e){const t=new Ov;e.index&&t.setIndex(new Cm(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],o=s.name,l=s.array,u=s.itemSize;t.setAttribute(o,new Cm(l,u))}return t}_loadLibrary(e,t){const i=new eI(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,o)=>{i.load(e,s,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const o=Zge.toString(),l=["/* draco decoder */",s,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(o){const l=o.data;switch(l.type){case"decode":s._callbacks[l.id].resolve(l);break;case"error":s._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,o){return s._taskLoad>o._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Zge(){let n,e;onmessage=function(l){const u=l.data;switch(u.type){case"init":n=u.decoderConfig,e=new Promise(function(_){n.onModuleLoaded=function(v){_({draco:v})},DracoDecoderModule(n)});break;case"decode":const d=u.buffer,p=u.taskConfig;e.then(_=>{const v=_.draco,b=new v.Decoder,E=new v.DecoderBuffer;E.Init(new Int8Array(d),d.byteLength);try{const C=t(v,b,E,p),M=C.attributes.map(I=>I.array.buffer);C.index&&M.push(C.index.array.buffer),self.postMessage({type:"decode",id:u.id,geometry:C},M)}catch(C){console.error(C),self.postMessage({type:"error",id:u.id,error:C.message})}finally{v.destroy(E),v.destroy(b)}});break}};function t(l,u,d,p){const _=p.attributeIDs,v=p.attributeTypes;let b,E;const C=u.GetEncodedGeometryType(d);if(C===l.TRIANGULAR_MESH)b=new l.Mesh,E=u.DecodeBufferToMesh(d,b);else if(C===l.POINT_CLOUD)b=new l.PointCloud,E=u.DecodeBufferToPointCloud(d,b);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!E.ok()||b.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+E.error_msg());const M={index:null,attributes:[]};for(const I in _){const L=self[v[I]];let O,P;if(p.useUniqueIDs)P=_[I],O=u.GetAttributeByUniqueId(b,P);else{if(P=u.GetAttributeId(b,l[_[I]]),P===-1)continue;O=u.GetAttribute(b,P)}M.attributes.push(s(l,u,b,I,L,O))}return C===l.TRIANGULAR_MESH&&(M.index=i(l,u,b)),l.destroy(b),M}function i(l,u,d){const _=d.num_faces()*3,v=_*4,b=l._malloc(v);u.GetTrianglesUInt32Array(d,v,b);const E=new Uint32Array(l.HEAPF32.buffer,b,_).slice();return l._free(b),{array:E,itemSize:1}}function s(l,u,d,p,_,v){const b=v.num_components(),C=d.num_points()*b,M=C*_.BYTES_PER_ELEMENT,I=o(l,_),L=l._malloc(M);u.GetAttributeDataArrayForAllPoints(d,v,I,M,L);const O=new _(l.HEAPF32.buffer,L,C).slice();return l._free(L),{name:p,array:O,itemSize:b}}function o(l,u){switch(u){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}let HC;const K2=()=>{if(HC)return HC;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=n;WebAssembly.validate(t)&&(s=e);let o;const l=WebAssembly.instantiate(u(s),{}).then(v=>{o=v.instance,o.exports.__wasm_call_ctors()});function u(v){const b=new Uint8Array(v.length);for(let C=0;C<v.length;++C){const M=v.charCodeAt(C);b[C]=M>96?M-71:M>64?M-65:M>47?M+4:M>46?63:62}let E=0;for(let C=0;C<v.length;++C)b[E++]=b[C]<60?i[b[C]]:(b[C]-60)*64+b[++C];return b.buffer.slice(0,E)}function d(v,b,E,C,M,I){const L=o.exports.sbrk,O=E+3&-4,P=L(O*C),B=L(M.length),z=new Uint8Array(o.exports.memory.buffer);z.set(M,B);const G=v(P,E,C,B,M.length);if(G===0&&I&&I(P,O,C),b.set(z.subarray(P,P+E*C)),L(P-L(0)),G!==0)throw new Error(`Malformed buffer data: ${G}`)}const p={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},_={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return HC={ready:l,supported:!0,decodeVertexBuffer(v,b,E,C,M){d(o.exports.meshopt_decodeVertexBuffer,v,b,E,C,o.exports[p[M]])},decodeIndexBuffer(v,b,E,C){d(o.exports.meshopt_decodeIndexBuffer,v,b,E,C)},decodeIndexSequence(v,b,E,C){d(o.exports.meshopt_decodeIndexSequence,v,b,E,C)},decodeGltfBuffer(v,b,E,C,M,I){d(o.exports[_[M]],v,b,E,C,o.exports[p[I]])}},HC};let GC=null,Qj="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Zj(n,e,t){return i=>{t&&t(i),n&&(GC||(GC=new Qge),GC.setDecoderPath(typeof n=="string"?n:Qj),i.setDRACOLoader(GC)),e&&i.setMeshoptDecoder(typeof K2=="function"?K2():K2)}}function Ht(n,e=!0,t=!0,i){return N$($P,n,Zj(e,t,i))}Ht.preload=(n,e=!0,t=!0,i)=>N$.preload($P,n,Zj(e,t,i));Ht.clear=n=>N$.clear($P,n);Ht.setDecoderPath=n=>{Qj=n};function e0e(n){const{nodes:e}=Ht(Fj);return[{type:"raw",geometry:e.BASE_FRONT_GRILL_1.geometry,material:e.BASE_FRONT_GRILL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(Fj);const eX="/gpu-programming/assets/BASE_LEFT_COVER_1-DGxtL-mQ.glb";function t0e(n){const{nodes:e}=Ht(eX);return[{type:"raw",geometry:e.BASE_LEFT_COVER_1.geometry,material:e.BASE_LEFT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(eX);const tX="/gpu-programming/assets/base_link-CxNG3VaF.glb";function n0e(n){const{nodes:e}=Ht(tX);return[{type:"raw",geometry:e.base_link.geometry,material:e.base_link.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(tX);const nX="/gpu-programming/assets/BASE_RIGHT_COVER_1-hc0og1we.glb";function r0e(n){const{nodes:e}=Ht(nX);return[{type:"raw",geometry:e.BASE_RIGHT_COVER_1.geometry,material:e.BASE_RIGHT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(nX);const rX="/gpu-programming/assets/Battery_1-CK31T6T2.glb";function i0e(n){const{nodes:e}=Ht(rX);return[{type:"raw",geometry:e.Battery_1.geometry,material:e.Battery_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(rX);const iX="/gpu-programming/assets/BODY_BASE_CONNECTOR_1-BGiepl-q.glb";function s0e(n){const{nodes:e}=Ht(iX);return[{type:"raw",geometry:e.BODY_BASE_CONNECTOR_1.geometry,material:e.BODY_BASE_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(iX);const o0e="/gpu-programming/assets/DRIVE_TRACK_LEFT_1-BU9fqrup.glb";Ht.preload(o0e);const a0e="/gpu-programming/assets/DRIVE_TRACK_RIGHT_1-inJUmdan.glb";Ht.preload(a0e);const sX="/gpu-programming/assets/EYE_LENS_1-dEqRsnM7.glb";function l0e(n){const{nodes:e}=Ht(sX);return[{type:"raw",geometry:e.EYE_LENS_1.geometry,material:e.EYE_LENS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(sX);const oX="/gpu-programming/assets/FACE_1-m_5yRlpQ.glb";function u0e(n){const{nodes:e}=Ht(oX);return[{type:"raw",geometry:e.FACE_1.geometry,material:e.FACE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(oX);const aX="/gpu-programming/assets/FRONT_LEFT_WHEEL_1-CbTd7ucE.glb";function c0e(n){const{nodes:e}=Ht(aX);return[{type:"raw",geometry:e.FRONT_LEFT_WHEEL_1.geometry,material:e.FRONT_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(aX);const lX="/gpu-programming/assets/FRONT_RIGHT_WHEEL_1-DndcS7IV.glb";function h0e(n){const{nodes:e}=Ht(lX);return[{type:"raw",geometry:e.FRONT_RIGHT_WHEEL_1.geometry,material:e.FRONT_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(lX);const uX="/gpu-programming/assets/HEAD_1-BuuEOSCL.glb";function d0e(n){const{nodes:e}=Ht(uX);return[{type:"raw",geometry:e.HEAD_1.geometry,material:e.HEAD_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(uX);const cX="/gpu-programming/assets/HEAD_VENT_LEFT_1-DjAZtO3_.glb";function p0e(n){const{nodes:e}=Ht(cX);return[{type:"raw",geometry:e.HEAD_VENT_LEFT_1.geometry,material:e.HEAD_VENT_LEFT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(cX);const hX="/gpu-programming/assets/HEAD_VENT_RIGHT_1-BfOCx_V8.glb";function f0e(n){const{nodes:e}=Ht(hX);return[{type:"raw",geometry:e.HEAD_VENT_RIGHT_1.geometry,material:e.HEAD_VENT_RIGHT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(hX);const dX="/gpu-programming/assets/LEFT_ARM_1-B8yh6mwG.glb";function m0e(n){const{nodes:e}=Ht(dX);return[{type:"raw",geometry:e.LEFT_ARM_1.geometry,material:e.LEFT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(dX);const pX="/gpu-programming/assets/LEFT_ARM_CONNECTOR_1-CXrHlUi5.glb";function g0e(n){const{nodes:e}=Ht(pX);return[{type:"raw",geometry:e.LEFT_ARM_CONNECTOR_1.geometry,material:e.LEFT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(pX);const fX="/gpu-programming/assets/MIDDLE_LEFT_WHEEL_1-BAVTGYOT.glb";function _0e(n){const{nodes:e}=Ht(fX);return[{type:"raw",geometry:e.MIDDLE_LEFT_WHEEL_1.geometry,material:e.MIDDLE_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(fX);const mX="/gpu-programming/assets/MIDDLE_RIGHT_WHEEL_1-GMj8YSda.glb";function y0e(n){const{nodes:e}=Ht(mX);return[{type:"raw",geometry:e.MIDDLE_RIGHT_WHEEL_1.geometry,material:e.MIDDLE_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(mX);const gX="/gpu-programming/assets/NECK_GLOBE_BASE_1-CpAA3cya.glb";function v0e(n){const{nodes:e}=Ht(gX);return[{type:"raw",geometry:e.NECK_GLOBE_BASE_1.geometry,material:e.NECK_GLOBE_BASE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(gX);const _X="/gpu-programming/assets/REAR_LEFT_WHEEL_1-Ca-hbPaC.glb";function b0e(n){const{nodes:e}=Ht(_X);return[{type:"raw",geometry:e.REAR_LEFT_WHEEL_1.geometry,material:e.REAR_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(_X);const yX="/gpu-programming/assets/REAR_RIGHT_WHEEL_1-DLUpOsjA.glb";function T0e(n){const{nodes:e}=Ht(yX);return[{type:"raw",geometry:e.REAR_RIGHT_WHEEL_1.geometry,material:e.REAR_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(yX);const vX="/gpu-programming/assets/RIGHT_ARM_1-CsUyYnQa.glb";function S0e(n){const{nodes:e}=Ht(vX);return[{type:"raw",geometry:e.RIGHT_ARM_1.geometry,material:e.RIGHT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(vX);const bX="/gpu-programming/assets/RIGHT_ARM_CONNECTOR_1-Og6IFGgn.glb";function E0e(n){const{nodes:e}=Ht(bX);return[{type:"raw",geometry:e.RIGHT_ARM_CONNECTOR_1.geometry,material:e.RIGHT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(bX);const TX="/gpu-programming/assets/Torso_1-Dsttb7Xv.glb";function x0e(n){const{nodes:e}=Ht(TX);return[{type:"raw",geometry:e.Torso_1.geometry,material:e.Torso_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(TX);const SX="/gpu-programming/assets/VISOR_GLASS_1-DUgs1YBX.glb";function w0e(n){const{nodes:e}=Ht(SX);return[{type:"raw",geometry:e.VISOR_GLASS_1.geometry,material:e.VISOR_GLASS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(SX);const EX="/gpu-programming/assets/eyes_acceptance-DjNbu5s_.glb";function $0e(n){const{nodes:e,materials:t}=Ht(EX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(EX);const xX="/gpu-programming/assets/eyes_admiration-KaqH2ZpQ.glb";function C0e(n){const{nodes:e,materials:t}=Ht(xX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(xX);const wX="/gpu-programming/assets/eyes_amazement-DWEI8ZWl.glb";function M0e(n){const{nodes:e,materials:t}=Ht(wX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(wX);const $X="/gpu-programming/assets/eyes_anger-BE-ut2mR.glb";function A0e(n){const{nodes:e,materials:t}=Ht($X);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload($X);const CX="/gpu-programming/assets/eyes_anticipation-b4B017F8.glb";function I0e(n){const{nodes:e,materials:t}=Ht(CX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(CX);const MX="/gpu-programming/assets/eyes_annoyed-B_lb9L_O.glb";function R0e(n){const{nodes:e,materials:t}=Ht(MX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(MX);const AX="/gpu-programming/assets/eyes_apprehension-DO3PTom6.glb";function k0e(n){const{nodes:e,materials:t}=Ht(AX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(AX);const IX="/gpu-programming/assets/eyes_apprehension_1-KlPiBiR4.glb";function O0e(n){const{nodes:e,materials:t}=Ht(IX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(IX);const RX="/gpu-programming/assets/eyes_boredom-C30alIvQ.glb";function L0e(n){const{nodes:e,materials:t}=Ht(RX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(RX);const kX="/gpu-programming/assets/eyes_default-CiQ6MqPO.glb";function F4(n){const{nodes:e,materials:t}=Ht(kX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(kX);const OX="/gpu-programming/assets/eyes_disgust-BPb8pu-1.glb";function D0e(n){const{nodes:e,materials:t}=Ht(OX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(OX);const LX="/gpu-programming/assets/eyes_ecstacy_frame_1-CAg4aUVn.glb";function N0e(n){const{nodes:e,materials:t}=Ht(LX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(LX);const DX="/gpu-programming/assets/eyes_ecstacy_frame_2-BOv7MWj_.glb";function B0e(n){const{nodes:e,materials:t}=Ht(DX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(DX);const NX="/gpu-programming/assets/eyes_fear-BL8fvSZL.glb";function P0e(n){const{nodes:e,materials:t}=Ht(NX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(NX);const BX="/gpu-programming/assets/eyes_grief-cP7yoD10.glb";function F0e(n){const{nodes:e,materials:t}=Ht(BX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(BX);const PX="/gpu-programming/assets/eyes_interest-TZH0NZC_.glb";function z0e(n){const{nodes:e,materials:t}=Ht(PX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(PX);const FX="/gpu-programming/assets/eyes_joy-B6oifIYP.glb";function U0e(n){const{nodes:e,materials:t}=Ht(FX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(FX);const zX="/gpu-programming/assets/eyes_loathing-C8bUCbQG.glb";function H0e(n){const{nodes:e,materials:t}=Ht(zX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(zX);const UX="/gpu-programming/assets/eyes_pensiveness-rZoWlZ1k.glb";function G0e(n){const{nodes:e,materials:t}=Ht(UX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(UX);const HX="/gpu-programming/assets/eyes_rage-BpM8Xr2x.glb";function W0e(n){const{nodes:e,materials:t}=Ht(HX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(HX);const GX="/gpu-programming/assets/eyes_sad-Coo-r01z.glb";function V0e(n){const{nodes:e,materials:t}=Ht(GX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(GX);const WX="/gpu-programming/assets/eyes_serenity-C07tnszo.glb";function j0e(n){const{nodes:e,materials:t}=Ht(WX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(WX);const VX="/gpu-programming/assets/eyes_surprise-eDHO2SUu.glb";function X0e(n){const{nodes:e,materials:t}=Ht(VX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(VX);const jX="/gpu-programming/assets/eyes_terror-CHUlLq9_.glb";function Y0e(n){const{nodes:e,materials:t}=Ht(jX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(jX);const XX="/gpu-programming/assets/eyes_trust-DX4X5mD0.glb";function K0e(n){const{nodes:e,materials:t}=Ht(XX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(XX);const YX="/gpu-programming/assets/eyes_vigilance-CGqg-60Y.glb";function J0e(n){const{nodes:e,materials:t}=Ht(YX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(YX);const KX="/gpu-programming/assets/e_Sleeping-2563MAKh.glb";function q0e(n){const{nodes:e,materials:t}=Ht(KX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(KX);const JX="/gpu-programming/assets/e_SleepingZZZ-CGdMpHBj.glb";function Q0e(n){const{nodes:e,materials:t}=Ht(JX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(JX);const qX="/gpu-programming/assets/e_Contempt-Bmkm0Bdj.glb";function Z0e(n){const{nodes:e,materials:t}=Ht(qX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(qX);const QX="/gpu-programming/assets/e_ContentLeft-C4jtUFpf.glb";function e_e(n){const{nodes:e,materials:t}=Ht(QX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(QX);const ZX="/gpu-programming/assets/e_ContentRight-BNMUpyf0.glb";function t_e(n){const{nodes:e,materials:t}=Ht(ZX);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(ZX);const eY="/gpu-programming/assets/e_Disoriented-DCBMT2ea.glb";function n_e(n){const{nodes:e,materials:t}=Ht(eY);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(eY);const tY="/gpu-programming/assets/e_EcstacyHilarious-Cl8xGsKE.glb";function r_e(n){const{nodes:e,materials:t}=Ht(tY);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(tY);const nY="/gpu-programming/assets/e_EcstacyStarryEyed-DRKN_BY4.glb";function i_e(n){const{nodes:e,materials:t}=Ht(nY);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(nY);const rY="/gpu-programming/assets/e_JoyGoofy-B110L9cn.glb";function s_e(n){const{nodes:e,materials:t}=Ht(rY);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(rY);const iY="/gpu-programming/assets/e_JoyGoofy2-BkM5jGNL.glb";function o_e(n){const{nodes:e,materials:t}=Ht(iY);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(iY);const sY="/gpu-programming/assets/e_JoyGoofy3-BJy3tNhw.glb";function a_e(n){const{nodes:e,materials:t}=Ht(sY);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(sY);const oY="/gpu-programming/assets/e_Love-BGY9OUZu.glb";function l_e(n){const{nodes:e,materials:t}=Ht(oY);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(oY);const aY="/gpu-programming/assets/e_Rage-C3KmRLkq.glb";function u_e(n){const{nodes:e,materials:t}=Ht(aY);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(aY);const lY="/gpu-programming/assets/e_Rage2-mVNSFSuR.glb";function c_e(n){const{nodes:e,materials:t}=Ht(lY);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(lY);const uY="/gpu-programming/assets/e_Rage3-BfYM2b7r.glb";function h_e(n){const{nodes:e,materials:t}=Ht(uY);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(uY);const cY="/gpu-programming/assets/e_Rage4-oo9re96u.glb";function d_e(n){const{nodes:e,materials:t}=Ht(cY);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(cY);const hY="/gpu-programming/assets/e_RemorseShame-BrJPOqTm.glb";function p_e(n){const{nodes:e,materials:t}=Ht(hY);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Ht.preload(hY);const f_e={"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl":e0e,"package://misty_description/meshes/BASE_LEFT_COVER_1.stl":t0e,"package://misty_description/meshes/base_link.stl":n0e,"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl":r0e,"package://misty_description/meshes/Battery_1.stl":i0e,"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl":s0e,"package://misty_description/meshes/EYE_LENS_1.stl":l0e,"package://misty_description/meshes/FACE_1.stl":u0e,"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl":c0e,"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl":h0e,"package://misty_description/meshes/HEAD_1.stl":d0e,"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl":p0e,"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl":f0e,"package://misty_description/meshes/LEFT_ARM_1.stl":m0e,"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl":g0e,"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl":_0e,"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl":y0e,"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl":v0e,"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl":b0e,"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl":T0e,"package://misty_description/meshes/RIGHT_ARM_1.stl":S0e,"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl":E0e,"package://misty_description/meshes/Torso_1.stl":x0e,"package://misty_description/meshes/VISOR_GLASS_1.stl":w0e,e_Sleeping:q0e,e_SleepingZZZ:Q0e,e_Contempt:Z0e,e_ContentLeft:e_e,e_ContentRight:t_e,e_Disoriented:n_e,e_EcstacyHilarious:r_e,e_EcstacyStarryEyed:i_e,e_JoyGoofy:s_e,e_JoyGoofy2:o_e,e_JoyGoofy3:a_e,e_Love:l_e,e_Rage:u_e,e_Rage2:c_e,e_Rage3:h_e,e_Rage4:d_e,e_RemorseShame:p_e,eyes_acceptance:$0e,eyes_admiration:C0e,eyes_amazement:M0e,eyes_anger:A0e,eyes_annoyed:R0e,eyes_anticipation:I0e,eyes_apprehension:k0e,eyes_apprehension_1:O0e,eyes_boredom:L0e,eyes_default:F4,eyes_disgust:D0e,eyes_distraction:F4,eyes_ecstasy_frame_1:N0e,eyes_ecstasy_frame_2:B0e,eyes_fear:P0e,eyes_grief:F0e,eyes_interest:z0e,eyes_joy:U0e,eyes_loathing:H0e,eyes_pensiveness:G0e,eyes_rage:W0e,eyes_sad:V0e,eyes_serenity:j0e,eyes_surprise:X0e,eyes_terror:Y0e,eyes_trust:K0e,eyes_vigilance:J0e};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const DE="143",Ub={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Hb={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},dY=0,CD=1,pY=2,m_e=3,fY=0,UR=1,yw=2,n1=3,e_=0,sd=1,nf=2,mY=1,g_e=2,lf=0,ny=1,fI=2,MD=3,AD=4,gY=5,jb=100,_Y=101,CP=102,ID=103,RD=104,yY=200,vY=201,bY=202,TY=203,HR=204,GR=205,SY=206,EY=207,xY=208,wY=209,$Y=210,CY=0,MY=1,AY=2,mI=3,IY=4,RY=5,kY=6,OY=7,B$=0,LY=1,DY=2,Qg=0,NY=1,BY=2,PY=3,MP=4,FY=5,WR=300,wv=301,$v=302,e$=303,t$=304,NE=306,aE=1e3,tf=1001,n$=1002,Ul=1003,gI=1004,__e=1004,_I=1005,y_e=1005,bl=1006,AP=1007,v_e=1007,F1=1008,b_e=1008,tp=1009,zY=1010,UY=1011,IP=1012,HY=1013,Q_=1014,j0=1015,M1=1016,GY=1017,WY=1018,vv=1020,VY=1021,jY=1022,Ff=1023,XY=1024,YY=1025,bv=1026,Cv=1027,KY=1028,JY=1029,qY=1030,QY=1031,ZY=1033,gA=33776,_A=33777,yA=33778,vA=33779,kD=35840,OD=35841,LD=35842,DD=35843,eK=36196,ND=37492,BD=37496,PD=37808,FD=37809,zD=37810,UD=37811,HD=37812,GD=37813,WD=37814,VD=37815,jD=37816,XD=37817,YD=37818,KD=37819,JD=37820,qD=37821,QD=36492,tK=2200,nK=2201,rK=2202,r$=2300,i$=2301,bA=2302,r1=2400,i1=2401,s$=2402,VR=2500,RP=2501,T_e=0,S_e=1,E_e=2,mg=3e3,ps=3001,Nv=3200,lE=3201,z1=0,iK=1,x_e="",z0="srgb",uv="srgb-linear",w_e=0,TA=7680,$_e=7681,C_e=7682,M_e=7683,A_e=34055,I_e=34056,R_e=5386,k_e=512,O_e=513,L_e=514,D_e=515,N_e=516,B_e=517,P_e=518,sK=519,o$=35044,d1=35048,F_e=35040,z_e=35045,U_e=35049,H_e=35041,G_e=35046,W_e=35050,V_e=35042,j_e="100",ZD="300 es",yI=1035;class Bm{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const i=t.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Tp=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let z4=1234567;const p1=Math.PI/180,a$=180/Math.PI;function Am(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Tp[n&255]+Tp[n>>8&255]+Tp[n>>16&255]+Tp[n>>24&255]+"-"+Tp[e&255]+Tp[e>>8&255]+"-"+Tp[e>>16&15|64]+Tp[e>>24&255]+"-"+Tp[t&63|128]+Tp[t>>8&255]+"-"+Tp[t>>16&255]+Tp[t>>24&255]+Tp[i&255]+Tp[i>>8&255]+Tp[i>>16&255]+Tp[i>>24&255]).toLowerCase()}function oh(n,e,t){return Math.max(e,Math.min(t,n))}function kP(n,e){return(n%e+e)%e}function X_e(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function Y_e(n,e,t){return n!==e?(t-n)/(e-n):0}function vw(n,e,t){return(1-t)*n+t*e}function K_e(n,e,t,i){return vw(n,e,1-Math.exp(-t*i))}function J_e(n,e=1){return e-Math.abs(kP(n,e*2)-e)}function q_e(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Q_e(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Z_e(n,e){return n+Math.floor(Math.random()*(e-n+1))}function eye(n,e){return n+Math.random()*(e-n)}function tye(n){return n*(.5-Math.random())}function nye(n){n!==void 0&&(z4=n);let e=z4+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function rye(n){return n*p1}function iye(n){return n*a$}function eN(n){return(n&n-1)===0&&n!==0}function oK(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function vI(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function sye(n,e,t,i,s){const o=Math.cos,l=Math.sin,u=o(t/2),d=l(t/2),p=o((e+i)/2),_=l((e+i)/2),v=o((e-i)/2),b=l((e-i)/2),E=o((i-e)/2),C=l((i-e)/2);switch(s){case"XYX":n.set(u*_,d*v,d*b,u*p);break;case"YZY":n.set(d*b,u*_,d*v,u*p);break;case"ZXZ":n.set(d*v,d*b,u*_,u*p);break;case"XZX":n.set(u*_,d*C,d*E,u*p);break;case"YXY":n.set(d*E,u*_,d*C,u*p);break;case"ZYZ":n.set(d*C,d*E,u*_,u*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function oye(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function aye(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var aK=Object.freeze({__proto__:null,DEG2RAD:p1,RAD2DEG:a$,generateUUID:Am,clamp:oh,euclideanModulo:kP,mapLinear:X_e,inverseLerp:Y_e,lerp:vw,damp:K_e,pingpong:J_e,smoothstep:q_e,smootherstep:Q_e,randInt:Z_e,randFloat:eye,randFloatSpread:tye,seededRandom:nye,degToRad:rye,radToDeg:iye,isPowerOfTwo:eN,ceilPowerOfTwo:oK,floorPowerOfTwo:vI,setQuaternionFromProperEuler:sye,normalize:aye,denormalize:oye});class Vt{constructor(e=0,t=0){Vt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*i-l*s+e.x,this.y=o*s+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class rf{constructor(){rf.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,s,o,l,u,d,p){const _=this.elements;return _[0]=e,_[1]=s,_[2]=u,_[3]=t,_[4]=o,_[5]=d,_[6]=i,_[7]=l,_[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[3],d=i[6],p=i[1],_=i[4],v=i[7],b=i[2],E=i[5],C=i[8],M=s[0],I=s[3],L=s[6],O=s[1],P=s[4],B=s[7],z=s[2],G=s[5],j=s[8];return o[0]=l*M+u*O+d*z,o[3]=l*I+u*P+d*G,o[6]=l*L+u*B+d*j,o[1]=p*M+_*O+v*z,o[4]=p*I+_*P+v*G,o[7]=p*L+_*B+v*j,o[2]=b*M+E*O+C*z,o[5]=b*I+E*P+C*G,o[8]=b*L+E*B+C*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],p=e[7],_=e[8];return t*l*_-t*u*p-i*o*_+i*u*d+s*o*p-s*l*d}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],p=e[7],_=e[8],v=_*l-u*p,b=u*d-_*o,E=p*o-l*d,C=t*v+i*b+s*E;if(C===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/C;return e[0]=v*M,e[1]=(s*p-_*i)*M,e[2]=(u*i-s*l)*M,e[3]=b*M,e[4]=(_*t-s*d)*M,e[5]=(s*o-u*t)*M,e[6]=E*M,e[7]=(i*d-p*t)*M,e[8]=(l*t-i*o)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,o,l,u){const d=Math.cos(o),p=Math.sin(o);return this.set(i*d,i*p,-i*(d*l+p*u)+l+e,-s*p,s*d,-s*(-p*l+d*u)+u+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),s=this.elements,o=s[0],l=s[3],u=s[6],d=s[1],p=s[4],_=s[7];return s[0]=t*o+i*d,s[3]=t*l+i*p,s[6]=t*u+i*_,s[1]=-i*o+t*d,s[4]=-i*l+t*p,s[7]=-i*u+t*_,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function lK(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}const lye={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function CS(n,e){return new lye[n](e)}function l$(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function f1(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function SA(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const J2={[z0]:{[uv]:f1},[uv]:{[z0]:SA}},eg={legacyMode:!0,get workingColorSpace(){return uv},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(J2[e]&&J2[e][t]!==void 0){const i=J2[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},uK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},td={r:0,g:0,b:0},Ng={h:0,s:0,l:0},WC={h:0,s:0,l:0};function q2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function VC(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Nn{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=z0){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,eg.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=uv){return this.r=e,this.g=t,this.b=i,eg.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=uv){if(e=kP(e,1),t=oh(t,0,1),i=oh(i,0,1),t===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,l=2*i-o;this.r=q2(l,o,e+1/3),this.g=q2(l,o,e),this.b=q2(l,o,e-1/3)}return eg.toWorkingColorSpace(this,s),this}setStyle(e,t=z0){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,eg.toWorkingColorSpace(this,t),i(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,eg.toWorkingColorSpace(this,t),i(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u)){const d=parseFloat(o[1])/360,p=parseInt(o[2],10)/100,_=parseInt(o[3],10)/100;return i(o[4]),this.setHSL(d,p,_,t)}break}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,eg.toWorkingColorSpace(this,t),this;if(l===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,eg.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=z0){const i=uK[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=f1(e.r),this.g=f1(e.g),this.b=f1(e.b),this}copyLinearToSRGB(e){return this.r=SA(e.r),this.g=SA(e.g),this.b=SA(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=z0){return eg.fromWorkingColorSpace(VC(this,td),e),oh(td.r*255,0,255)<<16^oh(td.g*255,0,255)<<8^oh(td.b*255,0,255)<<0}getHexString(e=z0){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=uv){eg.fromWorkingColorSpace(VC(this,td),t);const i=td.r,s=td.g,o=td.b,l=Math.max(i,s,o),u=Math.min(i,s,o);let d,p;const _=(u+l)/2;if(u===l)d=0,p=0;else{const v=l-u;switch(p=_<=.5?v/(l+u):v/(2-l-u),l){case i:d=(s-o)/v+(s<o?6:0);break;case s:d=(o-i)/v+2;break;case o:d=(i-s)/v+4;break}d/=6}return e.h=d,e.s=p,e.l=_,e}getRGB(e,t=uv){return eg.fromWorkingColorSpace(VC(this,td),t),e.r=td.r,e.g=td.g,e.b=td.b,e}getStyle(e=z0){return eg.fromWorkingColorSpace(VC(this,td),e),e!==z0?`color(${e} ${td.r} ${td.g} ${td.b})`:`rgb(${td.r*255|0},${td.g*255|0},${td.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(Ng),Ng.h+=e,Ng.s+=t,Ng.l+=i,this.setHSL(Ng.h,Ng.s,Ng.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ng),e.getHSL(WC);const i=vw(Ng.h,WC.h,t),s=vw(Ng.s,WC.s,t),o=vw(Ng.l,WC.l,t);return this.setHSL(i,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Nn.NAMES=uK;let WT;class OP{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{WT===void 0&&(WT=l$("canvas")),WT.width=e.width,WT.height=e.height;const i=WT.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=WT}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=l$("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=f1(o[l]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(f1(t[i]/255)*255):t[i]=f1(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class s1{constructor(e=null){this.isSource=!0,this.uuid=Am(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(Q2(s[l].image)):o.push(Q2(s[l]))}else o=Q2(s);i.url=o}return t||(e.images[this.uuid]=i),i}}function Q2(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?OP.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let uye=0;class ac extends Bm{constructor(e=ac.DEFAULT_IMAGE,t=ac.DEFAULT_MAPPING,i=tf,s=tf,o=bl,l=F1,u=Ff,d=tp,p=1,_=mg){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:uye++}),this.uuid=Am(),this.name="",this.source=new s1(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=d,this.offset=new Vt(0,0),this.repeat=new Vt(1,1),this.center=new Vt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new rf,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=_,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==WR)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case aE:e.x=e.x-Math.floor(e.x);break;case tf:e.x=e.x<0?0:1;break;case n$:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case aE:e.y=e.y-Math.floor(e.y);break;case tf:e.y=e.y<0?0:1;break;case n$:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}ac.DEFAULT_IMAGE=null;ac.DEFAULT_MAPPING=WR;class vs{constructor(e=0,t=0,i=0,s=1){vs.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*i+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*i+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*i+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,o;const l=e.elements,u=l[0],d=l[4],p=l[8],_=l[1],v=l[5],b=l[9],E=l[2],C=l[6],M=l[10];if(Math.abs(d-_)<.01&&Math.abs(p-E)<.01&&Math.abs(b-C)<.01){if(Math.abs(d+_)<.1&&Math.abs(p+E)<.1&&Math.abs(b+C)<.1&&Math.abs(u+v+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const L=(u+1)/2,O=(v+1)/2,P=(M+1)/2,B=(d+_)/4,z=(p+E)/4,G=(b+C)/4;return L>O&&L>P?L<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(L),s=B/i,o=z/i):O>P?O<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(O),i=B/s,o=G/s):P<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(P),i=z/o,s=G/o),this.set(i,s,o,t),this}let I=Math.sqrt((C-b)*(C-b)+(p-E)*(p-E)+(_-d)*(_-d));return Math.abs(I)<.001&&(I=1),this.x=(C-b)/I,this.y=(p-E)/I,this.z=(_-d)/I,this.w=Math.acos((u+v+M-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ic extends Bm{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new vs(0,0,e,t),this.scissorTest=!1,this.viewport=new vs(0,0,e,t);const s={width:e,height:t,depth:1};this.texture=new ac(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:bl,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new s1(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class P$ extends ac{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Ul,this.minFilter=Ul,this.wrapR=tf,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class cye extends Ic{constructor(e,t,i){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new P$(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class jR extends ac{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Ul,this.minFilter=Ul,this.wrapR=tf,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class hye extends Ic{constructor(e,t,i){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new jR(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class dye extends Ic{constructor(e,t,i,s={}){super(e,t,s),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let l=0;l<i;l++)this.texture[l]=o.clone(),this.texture[l].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,o=this.texture.length;s<o;s++)this.texture[s].image.width=e,this.texture[s].image.height=t,this.texture[s].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class vl{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,o,l,u){let d=i[s+0],p=i[s+1],_=i[s+2],v=i[s+3];const b=o[l+0],E=o[l+1],C=o[l+2],M=o[l+3];if(u===0){e[t+0]=d,e[t+1]=p,e[t+2]=_,e[t+3]=v;return}if(u===1){e[t+0]=b,e[t+1]=E,e[t+2]=C,e[t+3]=M;return}if(v!==M||d!==b||p!==E||_!==C){let I=1-u;const L=d*b+p*E+_*C+v*M,O=L>=0?1:-1,P=1-L*L;if(P>Number.EPSILON){const z=Math.sqrt(P),G=Math.atan2(z,L*O);I=Math.sin(I*G)/z,u=Math.sin(u*G)/z}const B=u*O;if(d=d*I+b*B,p=p*I+E*B,_=_*I+C*B,v=v*I+M*B,I===1-u){const z=1/Math.sqrt(d*d+p*p+_*_+v*v);d*=z,p*=z,_*=z,v*=z}}e[t]=d,e[t+1]=p,e[t+2]=_,e[t+3]=v}static multiplyQuaternionsFlat(e,t,i,s,o,l){const u=i[s],d=i[s+1],p=i[s+2],_=i[s+3],v=o[l],b=o[l+1],E=o[l+2],C=o[l+3];return e[t]=u*C+_*v+d*E-p*b,e[t+1]=d*C+_*b+p*v-u*E,e[t+2]=p*C+_*E+u*b-d*v,e[t+3]=_*C-u*v-d*b-p*E,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,d=Math.sin,p=u(i/2),_=u(s/2),v=u(o/2),b=d(i/2),E=d(s/2),C=d(o/2);switch(l){case"XYZ":this._x=b*_*v+p*E*C,this._y=p*E*v-b*_*C,this._z=p*_*C+b*E*v,this._w=p*_*v-b*E*C;break;case"YXZ":this._x=b*_*v+p*E*C,this._y=p*E*v-b*_*C,this._z=p*_*C-b*E*v,this._w=p*_*v+b*E*C;break;case"ZXY":this._x=b*_*v-p*E*C,this._y=p*E*v+b*_*C,this._z=p*_*C+b*E*v,this._w=p*_*v-b*E*C;break;case"ZYX":this._x=b*_*v-p*E*C,this._y=p*E*v+b*_*C,this._z=p*_*C-b*E*v,this._w=p*_*v+b*E*C;break;case"YZX":this._x=b*_*v+p*E*C,this._y=p*E*v+b*_*C,this._z=p*_*C-b*E*v,this._w=p*_*v-b*E*C;break;case"XZY":this._x=b*_*v-p*E*C,this._y=p*E*v-b*_*C,this._z=p*_*C+b*E*v,this._w=p*_*v+b*E*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],o=t[8],l=t[1],u=t[5],d=t[9],p=t[2],_=t[6],v=t[10],b=i+u+v;if(b>0){const E=.5/Math.sqrt(b+1);this._w=.25/E,this._x=(_-d)*E,this._y=(o-p)*E,this._z=(l-s)*E}else if(i>u&&i>v){const E=2*Math.sqrt(1+i-u-v);this._w=(_-d)/E,this._x=.25*E,this._y=(s+l)/E,this._z=(o+p)/E}else if(u>v){const E=2*Math.sqrt(1+u-i-v);this._w=(o-p)/E,this._x=(s+l)/E,this._y=.25*E,this._z=(d+_)/E}else{const E=2*Math.sqrt(1+v-i-u);this._w=(l-s)/E,this._x=(o+p)/E,this._y=(d+_)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(oh(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,o=e._z,l=e._w,u=t._x,d=t._y,p=t._z,_=t._w;return this._x=i*_+l*u+s*p-o*d,this._y=s*_+l*d+o*u-i*p,this._z=o*_+l*p+i*d-s*u,this._w=l*_-i*u-s*d-o*p,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+i*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=i,this._y=s,this._z=o,this;const d=1-u*u;if(d<=Number.EPSILON){const E=1-t;return this._w=E*l+t*this._w,this._x=E*i+t*this._x,this._y=E*s+t*this._y,this._z=E*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const p=Math.sqrt(d),_=Math.atan2(p,u),v=Math.sin((1-t)*_)/p,b=Math.sin(t*_)/p;return this._w=l*v+this._w*b,this._x=i*v+this._x*b,this._y=s*v+this._y*b,this._z=o*v+this._z*b,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),s=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(s),i*Math.sin(o),i*Math.cos(o),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Me{constructor(e=0,t=0,i=0){Me.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(U4.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(U4.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*s,this.y=o[1]*t+o[4]*i+o[7]*s,this.z=o[2]*t+o[5]*i+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*i+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*i+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,o=e.x,l=e.y,u=e.z,d=e.w,p=d*t+l*s-u*i,_=d*i+u*t-o*s,v=d*s+o*i-l*t,b=-o*t-l*i-u*s;return this.x=p*d+b*-o+_*-u-v*-l,this.y=_*d+b*-l+v*-o-p*-u,this.z=v*d+b*-u+p*-l-_*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s,this.y=o[1]*t+o[5]*i+o[9]*s,this.z=o[2]*t+o[6]*i+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,o=e.z,l=t.x,u=t.y,d=t.z;return this.x=s*d-o*u,this.y=o*l-i*d,this.z=i*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Z2.copy(this).projectOnVector(e),this.sub(Z2)}reflect(e){return this.sub(Z2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(oh(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Z2=new Me,U4=new vl;class n0{constructor(e=new Me(1/0,1/0,1/0),t=new Me(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let d=0,p=e.length;d<p;d+=3){const _=e[d],v=e[d+1],b=e[d+2];_<t&&(t=_),v<i&&(i=v),b<s&&(s=b),_>o&&(o=_),v>l&&(l=v),b>u&&(u=b)}return this.min.set(t,i,s),this.max.set(o,l,u),this}setFromBufferAttribute(e){let t=1/0,i=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let d=0,p=e.count;d<p;d++){const _=e.getX(d),v=e.getY(d),b=e.getZ(d);_<t&&(t=_),v<i&&(i=v),b<s&&(s=b),_>o&&(o=_),v>l&&(l=v),b>u&&(u=b)}return this.min.set(t,i,s),this.max.set(o,l,u),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=xb.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const o=i.attributes.position;for(let l=0,u=o.count;l<u;l++)xb.fromBufferAttribute(o,l).applyMatrix4(e.matrixWorld),this.expandByPoint(xb)}else i.boundingBox===null&&i.computeBoundingBox(),eO.copy(i.boundingBox),eO.applyMatrix4(e.matrixWorld),this.union(eO);const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,xb),xb.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ax),jC.subVectors(this.max,Ax),VT.subVectors(e.a,Ax),jT.subVectors(e.b,Ax),XT.subVectors(e.c,Ax),Hy.subVectors(jT,VT),Gy.subVectors(XT,jT),wb.subVectors(VT,XT);let t=[0,-Hy.z,Hy.y,0,-Gy.z,Gy.y,0,-wb.z,wb.y,Hy.z,0,-Hy.x,Gy.z,0,-Gy.x,wb.z,0,-wb.x,-Hy.y,Hy.x,0,-Gy.y,Gy.x,0,-wb.y,wb.x,0];return!tO(t,VT,jT,XT,jC)||(t=[1,0,0,0,1,0,0,0,1],!tO(t,VT,jT,XT,jC))?!1:(XC.crossVectors(Hy,Gy),t=[XC.x,XC.y,XC.z],tO(t,VT,jT,XT,jC))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return xb.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(xb).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(N_[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),N_[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),N_[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),N_[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),N_[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),N_[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),N_[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),N_[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(N_),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const N_=[new Me,new Me,new Me,new Me,new Me,new Me,new Me,new Me],xb=new Me,eO=new n0,VT=new Me,jT=new Me,XT=new Me,Hy=new Me,Gy=new Me,wb=new Me,Ax=new Me,jC=new Me,XC=new Me,$b=new Me;function tO(n,e,t,i,s){for(let o=0,l=n.length-3;o<=l;o+=3){$b.fromArray(n,o);const u=s.x*Math.abs($b.x)+s.y*Math.abs($b.y)+s.z*Math.abs($b.z),d=e.dot($b),p=t.dot($b),_=i.dot($b);if(Math.max(-Math.max(d,p,_),Math.min(d,p,_))>u)return!1}return!0}const pye=new n0,H4=new Me,YC=new Me,nO=new Me;class s_{constructor(e=new Me,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):pye.setFromPoints(e).getCenter(i);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){nO.subVectors(e,this.center);const t=nO.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.add(nO.multiplyScalar(s/i)),this.radius+=s}return this}union(e){return this.center.equals(e.center)===!0?YC.set(0,0,1).multiplyScalar(e.radius):YC.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(H4.copy(e.center).add(YC)),this.expandByPoint(H4.copy(e.center).sub(YC)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const B_=new Me,rO=new Me,KC=new Me,Wy=new Me,iO=new Me,JC=new Me,sO=new Me;class F${constructor(e=new Me,t=new Me(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,B_)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=B_.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(B_.copy(this.direction).multiplyScalar(t).add(this.origin),B_.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){rO.copy(e).add(t).multiplyScalar(.5),KC.copy(t).sub(e).normalize(),Wy.copy(this.origin).sub(rO);const o=e.distanceTo(t)*.5,l=-this.direction.dot(KC),u=Wy.dot(this.direction),d=-Wy.dot(KC),p=Wy.lengthSq(),_=Math.abs(1-l*l);let v,b,E,C;if(_>0)if(v=l*d-u,b=l*u-d,C=o*_,v>=0)if(b>=-C)if(b<=C){const M=1/_;v*=M,b*=M,E=v*(v+l*b+2*u)+b*(l*v+b+2*d)+p}else b=o,v=Math.max(0,-(l*b+u)),E=-v*v+b*(b+2*d)+p;else b=-o,v=Math.max(0,-(l*b+u)),E=-v*v+b*(b+2*d)+p;else b<=-C?(v=Math.max(0,-(-l*o+u)),b=v>0?-o:Math.min(Math.max(-o,-d),o),E=-v*v+b*(b+2*d)+p):b<=C?(v=0,b=Math.min(Math.max(-o,-d),o),E=b*(b+2*d)+p):(v=Math.max(0,-(l*o+u)),b=v>0?o:Math.min(Math.max(-o,-d),o),E=-v*v+b*(b+2*d)+p);else b=l>0?-o:o,v=Math.max(0,-(l*b+u)),E=-v*v+b*(b+2*d)+p;return i&&i.copy(this.direction).multiplyScalar(v).add(this.origin),s&&s.copy(KC).multiplyScalar(b).add(rO),E}intersectSphere(e,t){B_.subVectors(e.center,this.origin);const i=B_.dot(this.direction),s=B_.dot(B_)-i*i,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=i-l,d=i+l;return u<0&&d<0?null:u<0?this.at(d,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,o,l,u,d;const p=1/this.direction.x,_=1/this.direction.y,v=1/this.direction.z,b=this.origin;return p>=0?(i=(e.min.x-b.x)*p,s=(e.max.x-b.x)*p):(i=(e.max.x-b.x)*p,s=(e.min.x-b.x)*p),_>=0?(o=(e.min.y-b.y)*_,l=(e.max.y-b.y)*_):(o=(e.max.y-b.y)*_,l=(e.min.y-b.y)*_),i>l||o>s||((o>i||i!==i)&&(i=o),(l<s||s!==s)&&(s=l),v>=0?(u=(e.min.z-b.z)*v,d=(e.max.z-b.z)*v):(u=(e.max.z-b.z)*v,d=(e.min.z-b.z)*v),i>d||u>s)||((u>i||i!==i)&&(i=u),(d<s||s!==s)&&(s=d),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,B_)!==null}intersectTriangle(e,t,i,s,o){iO.subVectors(t,e),JC.subVectors(i,e),sO.crossVectors(iO,JC);let l=this.direction.dot(sO),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;Wy.subVectors(this.origin,e);const d=u*this.direction.dot(JC.crossVectors(Wy,JC));if(d<0)return null;const p=u*this.direction.dot(iO.cross(Wy));if(p<0||d+p>l)return null;const _=-u*Wy.dot(sO);return _<0?null:this.at(_/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class qr{constructor(){qr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,s,o,l,u,d,p,_,v,b,E,C,M,I){const L=this.elements;return L[0]=e,L[4]=t,L[8]=i,L[12]=s,L[1]=o,L[5]=l,L[9]=u,L[13]=d,L[2]=p,L[6]=_,L[10]=v,L[14]=b,L[3]=E,L[7]=C,L[11]=M,L[15]=I,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new qr().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/YT.setFromMatrixColumn(e,0).length(),o=1/YT.setFromMatrixColumn(e,1).length(),l=1/YT.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,o=e.z,l=Math.cos(i),u=Math.sin(i),d=Math.cos(s),p=Math.sin(s),_=Math.cos(o),v=Math.sin(o);if(e.order==="XYZ"){const b=l*_,E=l*v,C=u*_,M=u*v;t[0]=d*_,t[4]=-d*v,t[8]=p,t[1]=E+C*p,t[5]=b-M*p,t[9]=-u*d,t[2]=M-b*p,t[6]=C+E*p,t[10]=l*d}else if(e.order==="YXZ"){const b=d*_,E=d*v,C=p*_,M=p*v;t[0]=b+M*u,t[4]=C*u-E,t[8]=l*p,t[1]=l*v,t[5]=l*_,t[9]=-u,t[2]=E*u-C,t[6]=M+b*u,t[10]=l*d}else if(e.order==="ZXY"){const b=d*_,E=d*v,C=p*_,M=p*v;t[0]=b-M*u,t[4]=-l*v,t[8]=C+E*u,t[1]=E+C*u,t[5]=l*_,t[9]=M-b*u,t[2]=-l*p,t[6]=u,t[10]=l*d}else if(e.order==="ZYX"){const b=l*_,E=l*v,C=u*_,M=u*v;t[0]=d*_,t[4]=C*p-E,t[8]=b*p+M,t[1]=d*v,t[5]=M*p+b,t[9]=E*p-C,t[2]=-p,t[6]=u*d,t[10]=l*d}else if(e.order==="YZX"){const b=l*d,E=l*p,C=u*d,M=u*p;t[0]=d*_,t[4]=M-b*v,t[8]=C*v+E,t[1]=v,t[5]=l*_,t[9]=-u*_,t[2]=-p*_,t[6]=E*v+C,t[10]=b-M*v}else if(e.order==="XZY"){const b=l*d,E=l*p,C=u*d,M=u*p;t[0]=d*_,t[4]=-v,t[8]=p*_,t[1]=b*v+M,t[5]=l*_,t[9]=E*v-C,t[2]=C*v-E,t[6]=u*_,t[10]=M*v+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(fye,e,mye)}lookAt(e,t,i){const s=this.elements;return ym.subVectors(e,t),ym.lengthSq()===0&&(ym.z=1),ym.normalize(),Vy.crossVectors(i,ym),Vy.lengthSq()===0&&(Math.abs(i.z)===1?ym.x+=1e-4:ym.z+=1e-4,ym.normalize(),Vy.crossVectors(i,ym)),Vy.normalize(),qC.crossVectors(ym,Vy),s[0]=Vy.x,s[4]=qC.x,s[8]=ym.x,s[1]=Vy.y,s[5]=qC.y,s[9]=ym.y,s[2]=Vy.z,s[6]=qC.z,s[10]=ym.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[4],d=i[8],p=i[12],_=i[1],v=i[5],b=i[9],E=i[13],C=i[2],M=i[6],I=i[10],L=i[14],O=i[3],P=i[7],B=i[11],z=i[15],G=s[0],j=s[4],H=s[8],Z=s[12],ae=s[1],J=s[5],te=s[9],he=s[13],le=s[2],ce=s[6],be=s[10],$e=s[14],q=s[3],oe=s[7],se=s[11],pe=s[15];return o[0]=l*G+u*ae+d*le+p*q,o[4]=l*j+u*J+d*ce+p*oe,o[8]=l*H+u*te+d*be+p*se,o[12]=l*Z+u*he+d*$e+p*pe,o[1]=_*G+v*ae+b*le+E*q,o[5]=_*j+v*J+b*ce+E*oe,o[9]=_*H+v*te+b*be+E*se,o[13]=_*Z+v*he+b*$e+E*pe,o[2]=C*G+M*ae+I*le+L*q,o[6]=C*j+M*J+I*ce+L*oe,o[10]=C*H+M*te+I*be+L*se,o[14]=C*Z+M*he+I*$e+L*pe,o[3]=O*G+P*ae+B*le+z*q,o[7]=O*j+P*J+B*ce+z*oe,o[11]=O*H+P*te+B*be+z*se,o[15]=O*Z+P*he+B*$e+z*pe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],o=e[12],l=e[1],u=e[5],d=e[9],p=e[13],_=e[2],v=e[6],b=e[10],E=e[14],C=e[3],M=e[7],I=e[11],L=e[15];return C*(+o*d*v-s*p*v-o*u*b+i*p*b+s*u*E-i*d*E)+M*(+t*d*E-t*p*b+o*l*b-s*l*E+s*p*_-o*d*_)+I*(+t*p*v-t*u*E-o*l*v+i*l*E+o*u*_-i*p*_)+L*(-s*u*_-t*d*v+t*u*b+s*l*v-i*l*b+i*d*_)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],p=e[7],_=e[8],v=e[9],b=e[10],E=e[11],C=e[12],M=e[13],I=e[14],L=e[15],O=v*I*p-M*b*p+M*d*E-u*I*E-v*d*L+u*b*L,P=C*b*p-_*I*p-C*d*E+l*I*E+_*d*L-l*b*L,B=_*M*p-C*v*p+C*u*E-l*M*E-_*u*L+l*v*L,z=C*v*d-_*M*d-C*u*b+l*M*b+_*u*I-l*v*I,G=t*O+i*P+s*B+o*z;if(G===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const j=1/G;return e[0]=O*j,e[1]=(M*b*o-v*I*o-M*s*E+i*I*E+v*s*L-i*b*L)*j,e[2]=(u*I*o-M*d*o+M*s*p-i*I*p-u*s*L+i*d*L)*j,e[3]=(v*d*o-u*b*o-v*s*p+i*b*p+u*s*E-i*d*E)*j,e[4]=P*j,e[5]=(_*I*o-C*b*o+C*s*E-t*I*E-_*s*L+t*b*L)*j,e[6]=(C*d*o-l*I*o-C*s*p+t*I*p+l*s*L-t*d*L)*j,e[7]=(l*b*o-_*d*o+_*s*p-t*b*p-l*s*E+t*d*E)*j,e[8]=B*j,e[9]=(C*v*o-_*M*o-C*i*E+t*M*E+_*i*L-t*v*L)*j,e[10]=(l*M*o-C*u*o+C*i*p-t*M*p-l*i*L+t*u*L)*j,e[11]=(_*u*o-l*v*o-_*i*p+t*v*p+l*i*E-t*u*E)*j,e[12]=z*j,e[13]=(_*M*s-C*v*s+C*i*b-t*M*b-_*i*I+t*v*I)*j,e[14]=(C*u*s-l*M*s-C*i*d+t*M*d+l*i*I-t*u*I)*j,e[15]=(l*v*s-_*u*s+_*i*d-t*v*d-l*i*b+t*u*b)*j,this}scale(e){const t=this.elements,i=e.x,s=e.y,o=e.z;return t[0]*=i,t[4]*=s,t[8]*=o,t[1]*=i,t[5]*=s,t[9]*=o,t[2]*=i,t[6]*=s,t[10]*=o,t[3]*=i,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),o=1-i,l=e.x,u=e.y,d=e.z,p=o*l,_=o*u;return this.set(p*l+i,p*u-s*d,p*d+s*u,0,p*u+s*d,_*u+i,_*d-s*l,0,p*d-s*u,_*d+s*l,o*d*d+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,o,l){return this.set(1,i,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,o=t._x,l=t._y,u=t._z,d=t._w,p=o+o,_=l+l,v=u+u,b=o*p,E=o*_,C=o*v,M=l*_,I=l*v,L=u*v,O=d*p,P=d*_,B=d*v,z=i.x,G=i.y,j=i.z;return s[0]=(1-(M+L))*z,s[1]=(E+B)*z,s[2]=(C-P)*z,s[3]=0,s[4]=(E-B)*G,s[5]=(1-(b+L))*G,s[6]=(I+O)*G,s[7]=0,s[8]=(C+P)*j,s[9]=(I-O)*j,s[10]=(1-(b+M))*j,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let o=YT.set(s[0],s[1],s[2]).length();const l=YT.set(s[4],s[5],s[6]).length(),u=YT.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],Bg.copy(this);const d=1/o,p=1/l,_=1/u;return Bg.elements[0]*=d,Bg.elements[1]*=d,Bg.elements[2]*=d,Bg.elements[4]*=p,Bg.elements[5]*=p,Bg.elements[6]*=p,Bg.elements[8]*=_,Bg.elements[9]*=_,Bg.elements[10]*=_,t.setFromRotationMatrix(Bg),i.x=o,i.y=l,i.z=u,this}makePerspective(e,t,i,s,o,l){const u=this.elements,d=2*o/(t-e),p=2*o/(i-s),_=(t+e)/(t-e),v=(i+s)/(i-s),b=-(l+o)/(l-o),E=-2*l*o/(l-o);return u[0]=d,u[4]=0,u[8]=_,u[12]=0,u[1]=0,u[5]=p,u[9]=v,u[13]=0,u[2]=0,u[6]=0,u[10]=b,u[14]=E,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,s,o,l){const u=this.elements,d=1/(t-e),p=1/(i-s),_=1/(l-o),v=(t+e)*d,b=(i+s)*p,E=(l+o)*_;return u[0]=2*d,u[4]=0,u[8]=0,u[12]=-v,u[1]=0,u[5]=2*p,u[9]=0,u[13]=-b,u[2]=0,u[6]=0,u[10]=-2*_,u[14]=-E,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const YT=new Me,Bg=new qr,fye=new Me(0,0,0),mye=new Me(1,1,1),Vy=new Me,qC=new Me,ym=new Me,G4=new qr,W4=new vl;class U1{constructor(e=0,t=0,i=0,s=U1.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],d=s[1],p=s[5],_=s[9],v=s[2],b=s[6],E=s[10];switch(t){case"XYZ":this._y=Math.asin(oh(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-_,E),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(b,p),this._z=0);break;case"YXZ":this._x=Math.asin(-oh(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(u,E),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-v,o),this._z=0);break;case"ZXY":this._x=Math.asin(oh(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-v,E),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(d,o));break;case"ZYX":this._y=Math.asin(-oh(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(b,E),this._z=Math.atan2(d,o)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(oh(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-_,p),this._y=Math.atan2(-v,o)):(this._x=0,this._y=Math.atan2(u,E));break;case"XZY":this._z=Math.asin(-oh(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(b,p),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-_,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return G4.makeRotationFromQuaternion(e),this.setFromRotationMatrix(G4,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return W4.setFromEuler(this),this.setFromQuaternion(W4,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}U1.DefaultOrder="XYZ";U1.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class m1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let gye=0;const V4=new Me,KT=new vl,P_=new qr,QC=new Me,Ix=new Me,_ye=new Me,yye=new vl,j4=new Me(1,0,0),X4=new Me(0,1,0),Y4=new Me(0,0,1),vye={type:"added"},K4={type:"removed"};class to extends Bm{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:gye++}),this.uuid=Am(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=to.DefaultUp.clone();const e=new Me,t=new U1,i=new vl,s=new Me(1,1,1);function o(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(o),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new qr},normalMatrix:{value:new rf}}),this.matrix=new qr,this.matrixWorld=new qr,this.matrixAutoUpdate=to.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new m1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return KT.setFromAxisAngle(e,t),this.quaternion.multiply(KT),this}rotateOnWorldAxis(e,t){return KT.setFromAxisAngle(e,t),this.quaternion.premultiply(KT),this}rotateX(e){return this.rotateOnAxis(j4,e)}rotateY(e){return this.rotateOnAxis(X4,e)}rotateZ(e){return this.rotateOnAxis(Y4,e)}translateOnAxis(e,t){return V4.copy(e).applyQuaternion(this.quaternion),this.position.add(V4.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(j4,e)}translateY(e){return this.translateOnAxis(X4,e)}translateZ(e){return this.translateOnAxis(Y4,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(P_.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?QC.copy(e):QC.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),Ix.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?P_.lookAt(Ix,QC,this.up):P_.lookAt(QC,Ix,this.up),this.quaternion.setFromRotationMatrix(P_),s&&(P_.extractRotation(s.matrixWorld),KT.setFromRotationMatrix(P_),this.quaternion.premultiply(KT.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(vye)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(K4)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(K4)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),P_.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),P_.multiply(e.parent.matrixWorld)),e.applyMatrix4(P_),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ix,e,_ye),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ix,yye,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON()));function o(u,d){return u[d.uuid]===void 0&&(u[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const d=u.shapes;if(Array.isArray(d))for(let p=0,_=d.length;p<_;p++){const v=d[p];o(e.shapes,v)}else o(e.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let d=0,p=this.material.length;d<p;d++)u.push(o(e.materials,this.material[d]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const d=this.animations[u];s.animations.push(o(e.animations,d))}}if(t){const u=l(e.geometries),d=l(e.materials),p=l(e.textures),_=l(e.images),v=l(e.shapes),b=l(e.skeletons),E=l(e.animations),C=l(e.nodes);u.length>0&&(i.geometries=u),d.length>0&&(i.materials=d),p.length>0&&(i.textures=p),_.length>0&&(i.images=_),v.length>0&&(i.shapes=v),b.length>0&&(i.skeletons=b),E.length>0&&(i.animations=E),C.length>0&&(i.nodes=C)}return i.object=s,i;function l(u){const d=[];for(const p in u){const _=u[p];delete _.metadata,d.push(_)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}to.DefaultUp=new Me(0,1,0);to.DefaultMatrixAutoUpdate=!0;const Pg=new Me,F_=new Me,oO=new Me,z_=new Me,JT=new Me,qT=new Me,J4=new Me,aO=new Me,lO=new Me,uO=new Me;class Sm{constructor(e=new Me,t=new Me,i=new Me){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Pg.subVectors(e,t),s.cross(Pg);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,i,s,o){Pg.subVectors(s,t),F_.subVectors(i,t),oO.subVectors(e,t);const l=Pg.dot(Pg),u=Pg.dot(F_),d=Pg.dot(oO),p=F_.dot(F_),_=F_.dot(oO),v=l*p-u*u;if(v===0)return o.set(-2,-1,-1);const b=1/v,E=(p*d-u*_)*b,C=(l*_-u*d)*b;return o.set(1-E-C,C,E)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,z_),z_.x>=0&&z_.y>=0&&z_.x+z_.y<=1}static getUV(e,t,i,s,o,l,u,d){return this.getBarycoord(e,t,i,s,z_),d.set(0,0),d.addScaledVector(o,z_.x),d.addScaledVector(l,z_.y),d.addScaledVector(u,z_.z),d}static isFrontFacing(e,t,i,s){return Pg.subVectors(i,t),F_.subVectors(e,t),Pg.cross(F_).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Pg.subVectors(this.c,this.b),F_.subVectors(this.a,this.b),Pg.cross(F_).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Sm.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Sm.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,s,o){return Sm.getUV(e,this.a,this.b,this.c,t,i,s,o)}containsPoint(e){return Sm.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Sm.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,o=this.c;let l,u;JT.subVectors(s,i),qT.subVectors(o,i),aO.subVectors(e,i);const d=JT.dot(aO),p=qT.dot(aO);if(d<=0&&p<=0)return t.copy(i);lO.subVectors(e,s);const _=JT.dot(lO),v=qT.dot(lO);if(_>=0&&v<=_)return t.copy(s);const b=d*v-_*p;if(b<=0&&d>=0&&_<=0)return l=d/(d-_),t.copy(i).addScaledVector(JT,l);uO.subVectors(e,o);const E=JT.dot(uO),C=qT.dot(uO);if(C>=0&&E<=C)return t.copy(o);const M=E*p-d*C;if(M<=0&&p>=0&&C<=0)return u=p/(p-C),t.copy(i).addScaledVector(qT,u);const I=_*C-E*v;if(I<=0&&v-_>=0&&E-C>=0)return J4.subVectors(o,s),u=(v-_)/(v-_+(E-C)),t.copy(s).addScaledVector(J4,u);const L=1/(I+M+b);return l=M*L,u=b*L,t.copy(i).addScaledVector(JT,l).addScaledVector(qT,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let bye=0;class od extends Bm{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:bye++}),this.uuid=Am(),this.name="",this.type="Material",this.blending=ny,this.side=e_,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=HR,this.blendDst=GR,this.blendEquation=jb,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=mI,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=sK,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=TA,this.stencilZFail=TA,this.stencilZPass=TA,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===mY;continue}const s=this[t];if(s===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ny&&(i.blending=this.blending),this.side!==e_&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function s(o){const l=[];for(const u in o){const d=o[u];delete d.metadata,l.push(d)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(i.textures=o),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class r0 extends od{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Nn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=B$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ch=new Me,ZC=new Vt;class Do{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=o$,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),l=new Nn),t[i++]=l.r,t[i++]=l.g,t[i++]=l.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),l=new Vt),t[i++]=l.x,t[i++]=l.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),l=new Me),t[i++]=l.x,t[i++]=l.y,t[i++]=l.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),l=new vs),t[i++]=l.x,t[i++]=l.y,t[i++]=l.z,t[i++]=l.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)ZC.fromBufferAttribute(this,t),ZC.applyMatrix3(e),this.setXY(t,ZC.x,ZC.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ch.fromBufferAttribute(this,t),Ch.applyMatrix3(e),this.setXYZ(t,Ch.x,Ch.y,Ch.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ch.fromBufferAttribute(this,t),Ch.applyMatrix4(e),this.setXYZ(t,Ch.x,Ch.y,Ch.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ch.fromBufferAttribute(this,t),Ch.applyNormalMatrix(e),this.setXYZ(t,Ch.x,Ch.y,Ch.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ch.fromBufferAttribute(this,t),Ch.transformDirection(e),this.setXYZ(t,Ch.x,Ch.y,Ch.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==o$&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class Tye extends Do{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Sye extends Do{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Eye extends Do{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class xye extends Do{constructor(e,t,i){super(new Int16Array(e),t,i)}}class LP extends Do{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class wye extends Do{constructor(e,t,i){super(new Int32Array(e),t,i)}}class DP extends Do{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class $ye extends Do{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}}class sr extends Do{constructor(e,t,i){super(new Float32Array(e),t,i)}}class Cye extends Do{constructor(e,t,i){super(new Float64Array(e),t,i)}}let Mye=0;const Qm=new qr,cO=new to,QT=new Me,vm=new n0,Rx=new n0,_d=new Me;class ai extends Bm{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Mye++}),this.uuid=Am(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(lK(e)?DP:LP)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new rf().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Qm.makeRotationFromQuaternion(e),this.applyMatrix4(Qm),this}rotateX(e){return Qm.makeRotationX(e),this.applyMatrix4(Qm),this}rotateY(e){return Qm.makeRotationY(e),this.applyMatrix4(Qm),this}rotateZ(e){return Qm.makeRotationZ(e),this.applyMatrix4(Qm),this}translate(e,t,i){return Qm.makeTranslation(e,t,i),this.applyMatrix4(Qm),this}scale(e,t,i){return Qm.makeScale(e,t,i),this.applyMatrix4(Qm),this}lookAt(e){return cO.lookAt(e),cO.updateMatrix(),this.applyMatrix4(cO.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(QT).negate(),this.translate(QT.x,QT.y,QT.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new sr(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new n0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Me(-1/0,-1/0,-1/0),new Me(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const o=t[i];vm.setFromBufferAttribute(o),this.morphTargetsRelative?(_d.addVectors(this.boundingBox.min,vm.min),this.boundingBox.expandByPoint(_d),_d.addVectors(this.boundingBox.max,vm.max),this.boundingBox.expandByPoint(_d)):(this.boundingBox.expandByPoint(vm.min),this.boundingBox.expandByPoint(vm.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new s_);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Me,1/0);return}if(e){const i=this.boundingSphere.center;if(vm.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];Rx.setFromBufferAttribute(u),this.morphTargetsRelative?(_d.addVectors(vm.min,Rx.min),vm.expandByPoint(_d),_d.addVectors(vm.max,Rx.max),vm.expandByPoint(_d)):(vm.expandByPoint(Rx.min),vm.expandByPoint(Rx.max))}vm.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)_d.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(_d));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],d=this.morphTargetsRelative;for(let p=0,_=u.count;p<_;p++)_d.fromBufferAttribute(u,p),d&&(QT.fromBufferAttribute(e,p),_d.add(QT)),s=Math.max(s,i.distanceToSquared(_d))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,s=t.position.array,o=t.normal.array,l=t.uv.array,u=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Do(new Float32Array(4*u),4));const d=this.getAttribute("tangent").array,p=[],_=[];for(let ae=0;ae<u;ae++)p[ae]=new Me,_[ae]=new Me;const v=new Me,b=new Me,E=new Me,C=new Vt,M=new Vt,I=new Vt,L=new Me,O=new Me;function P(ae,J,te){v.fromArray(s,ae*3),b.fromArray(s,J*3),E.fromArray(s,te*3),C.fromArray(l,ae*2),M.fromArray(l,J*2),I.fromArray(l,te*2),b.sub(v),E.sub(v),M.sub(C),I.sub(C);const he=1/(M.x*I.y-I.x*M.y);!isFinite(he)||(L.copy(b).multiplyScalar(I.y).addScaledVector(E,-M.y).multiplyScalar(he),O.copy(E).multiplyScalar(M.x).addScaledVector(b,-I.x).multiplyScalar(he),p[ae].add(L),p[J].add(L),p[te].add(L),_[ae].add(O),_[J].add(O),_[te].add(O))}let B=this.groups;B.length===0&&(B=[{start:0,count:i.length}]);for(let ae=0,J=B.length;ae<J;++ae){const te=B[ae],he=te.start,le=te.count;for(let ce=he,be=he+le;ce<be;ce+=3)P(i[ce+0],i[ce+1],i[ce+2])}const z=new Me,G=new Me,j=new Me,H=new Me;function Z(ae){j.fromArray(o,ae*3),H.copy(j);const J=p[ae];z.copy(J),z.sub(j.multiplyScalar(j.dot(J))).normalize(),G.crossVectors(H,J);const te=G.dot(_[ae])<0?-1:1;d[ae*4]=z.x,d[ae*4+1]=z.y,d[ae*4+2]=z.z,d[ae*4+3]=te}for(let ae=0,J=B.length;ae<J;++ae){const te=B[ae],he=te.start,le=te.count;for(let ce=he,be=he+le;ce<be;ce+=3)Z(i[ce+0]),Z(i[ce+1]),Z(i[ce+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Do(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let b=0,E=i.count;b<E;b++)i.setXYZ(b,0,0,0);const s=new Me,o=new Me,l=new Me,u=new Me,d=new Me,p=new Me,_=new Me,v=new Me;if(e)for(let b=0,E=e.count;b<E;b+=3){const C=e.getX(b+0),M=e.getX(b+1),I=e.getX(b+2);s.fromBufferAttribute(t,C),o.fromBufferAttribute(t,M),l.fromBufferAttribute(t,I),_.subVectors(l,o),v.subVectors(s,o),_.cross(v),u.fromBufferAttribute(i,C),d.fromBufferAttribute(i,M),p.fromBufferAttribute(i,I),u.add(_),d.add(_),p.add(_),i.setXYZ(C,u.x,u.y,u.z),i.setXYZ(M,d.x,d.y,d.z),i.setXYZ(I,p.x,p.y,p.z)}else for(let b=0,E=t.count;b<E;b+=3)s.fromBufferAttribute(t,b+0),o.fromBufferAttribute(t,b+1),l.fromBufferAttribute(t,b+2),_.subVectors(l,o),v.subVectors(s,o),_.cross(v),i.setXYZ(b+0,_.x,_.y,_.z),i.setXYZ(b+1,_.x,_.y,_.z),i.setXYZ(b+2,_.x,_.y,_.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const s in i){if(e.attributes[s]===void 0)continue;const o=i[s].array,l=e.attributes[s],u=l.array,d=l.itemSize*t,p=Math.min(u.length,o.length-d);for(let _=0,v=d;_<p;_++,v++)o[v]=u[_]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)_d.fromBufferAttribute(e,t),_d.normalize(),e.setXYZ(t,_d.x,_d.y,_d.z)}toNonIndexed(){function e(u,d){const p=u.array,_=u.itemSize,v=u.normalized,b=new p.constructor(d.length*_);let E=0,C=0;for(let M=0,I=d.length;M<I;M++){u.isInterleavedBufferAttribute?E=d[M]*u.data.stride+u.offset:E=d[M]*_;for(let L=0;L<_;L++)b[C++]=p[E++]}return new Do(b,_,v)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ai,i=this.index.array,s=this.attributes;for(const u in s){const d=s[u],p=e(d,i);t.setAttribute(u,p)}const o=this.morphAttributes;for(const u in o){const d=[],p=o[u];for(let _=0,v=p.length;_<v;_++){const b=p[_],E=e(b,i);d.push(E)}t.morphAttributes[u]=d}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,d=l.length;u<d;u++){const p=l[u];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(e[p]=d[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const d in i){const p=i[d];e.data.attributes[d]=p.toJSON(e.data)}const s={};let o=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],_=[];for(let v=0,b=p.length;v<b;v++){const E=p[v];_.push(E.toJSON(e.data))}_.length>0&&(s[d]=_,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const p in s){const _=s[p];this.setAttribute(p,_.clone(t))}const o=e.morphAttributes;for(const p in o){const _=[],v=o[p];for(let b=0,E=v.length;b<E;b++)_.push(v[b].clone(t));this.morphAttributes[p]=_}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,_=l.length;p<_;p++){const v=l[p];this.addGroup(v.start,v.count,v.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const q4=new qr,ZT=new F$,hO=new s_,jy=new Me,Xy=new Me,Yy=new Me,dO=new Me,pO=new Me,fO=new Me,eM=new Me,tM=new Me,nM=new Me,rM=new Vt,iM=new Vt,sM=new Vt,mO=new Me,oM=new Me;class Fn extends to{constructor(e=new ai,t=new r0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(e,t){const i=this.geometry,s=this.material,o=this.matrixWorld;if(s===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),hO.copy(i.boundingSphere),hO.applyMatrix4(o),e.ray.intersectsSphere(hO)===!1)||(q4.copy(o).invert(),ZT.copy(e.ray).applyMatrix4(q4),i.boundingBox!==null&&ZT.intersectsBox(i.boundingBox)===!1))return;let l;const u=i.index,d=i.attributes.position,p=i.morphAttributes.position,_=i.morphTargetsRelative,v=i.attributes.uv,b=i.attributes.uv2,E=i.groups,C=i.drawRange;if(u!==null)if(Array.isArray(s))for(let M=0,I=E.length;M<I;M++){const L=E[M],O=s[L.materialIndex],P=Math.max(L.start,C.start),B=Math.min(u.count,Math.min(L.start+L.count,C.start+C.count));for(let z=P,G=B;z<G;z+=3){const j=u.getX(z),H=u.getX(z+1),Z=u.getX(z+2);l=aM(this,O,e,ZT,d,p,_,v,b,j,H,Z),l&&(l.faceIndex=Math.floor(z/3),l.face.materialIndex=L.materialIndex,t.push(l))}}else{const M=Math.max(0,C.start),I=Math.min(u.count,C.start+C.count);for(let L=M,O=I;L<O;L+=3){const P=u.getX(L),B=u.getX(L+1),z=u.getX(L+2);l=aM(this,s,e,ZT,d,p,_,v,b,P,B,z),l&&(l.faceIndex=Math.floor(L/3),t.push(l))}}else if(d!==void 0)if(Array.isArray(s))for(let M=0,I=E.length;M<I;M++){const L=E[M],O=s[L.materialIndex],P=Math.max(L.start,C.start),B=Math.min(d.count,Math.min(L.start+L.count,C.start+C.count));for(let z=P,G=B;z<G;z+=3){const j=z,H=z+1,Z=z+2;l=aM(this,O,e,ZT,d,p,_,v,b,j,H,Z),l&&(l.faceIndex=Math.floor(z/3),l.face.materialIndex=L.materialIndex,t.push(l))}}else{const M=Math.max(0,C.start),I=Math.min(d.count,C.start+C.count);for(let L=M,O=I;L<O;L+=3){const P=L,B=L+1,z=L+2;l=aM(this,s,e,ZT,d,p,_,v,b,P,B,z),l&&(l.faceIndex=Math.floor(L/3),t.push(l))}}}}function Aye(n,e,t,i,s,o,l,u){let d;if(e.side===sd?d=i.intersectTriangle(l,o,s,!0,u):d=i.intersectTriangle(s,o,l,e.side!==nf,u),d===null)return null;oM.copy(u),oM.applyMatrix4(n.matrixWorld);const p=t.ray.origin.distanceTo(oM);return p<t.near||p>t.far?null:{distance:p,point:oM.clone(),object:n}}function aM(n,e,t,i,s,o,l,u,d,p,_,v){jy.fromBufferAttribute(s,p),Xy.fromBufferAttribute(s,_),Yy.fromBufferAttribute(s,v);const b=n.morphTargetInfluences;if(o&&b){eM.set(0,0,0),tM.set(0,0,0),nM.set(0,0,0);for(let C=0,M=o.length;C<M;C++){const I=b[C],L=o[C];I!==0&&(dO.fromBufferAttribute(L,p),pO.fromBufferAttribute(L,_),fO.fromBufferAttribute(L,v),l?(eM.addScaledVector(dO,I),tM.addScaledVector(pO,I),nM.addScaledVector(fO,I)):(eM.addScaledVector(dO.sub(jy),I),tM.addScaledVector(pO.sub(Xy),I),nM.addScaledVector(fO.sub(Yy),I)))}jy.add(eM),Xy.add(tM),Yy.add(nM)}n.isSkinnedMesh&&(n.boneTransform(p,jy),n.boneTransform(_,Xy),n.boneTransform(v,Yy));const E=Aye(n,e,t,i,jy,Xy,Yy,mO);if(E){u&&(rM.fromBufferAttribute(u,p),iM.fromBufferAttribute(u,_),sM.fromBufferAttribute(u,v),E.uv=Sm.getUV(mO,jy,Xy,Yy,rM,iM,sM,new Vt)),d&&(rM.fromBufferAttribute(d,p),iM.fromBufferAttribute(d,_),sM.fromBufferAttribute(d,v),E.uv2=Sm.getUV(mO,jy,Xy,Yy,rM,iM,sM,new Vt));const C={a:p,b:_,c:v,normal:new Me,materialIndex:0};Sm.getNormal(jy,Xy,Yy,C.normal),E.face=C}return E}class hu extends ai{constructor(e=1,t=1,i=1,s=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:o,depthSegments:l};const u=this;s=Math.floor(s),o=Math.floor(o),l=Math.floor(l);const d=[],p=[],_=[],v=[];let b=0,E=0;C("z","y","x",-1,-1,i,t,e,l,o,0),C("z","y","x",1,-1,i,t,-e,l,o,1),C("x","z","y",1,1,e,i,t,s,l,2),C("x","z","y",1,-1,e,i,-t,s,l,3),C("x","y","z",1,-1,e,t,i,s,o,4),C("x","y","z",-1,-1,e,t,-i,s,o,5),this.setIndex(d),this.setAttribute("position",new sr(p,3)),this.setAttribute("normal",new sr(_,3)),this.setAttribute("uv",new sr(v,2));function C(M,I,L,O,P,B,z,G,j,H,Z){const ae=B/j,J=z/H,te=B/2,he=z/2,le=G/2,ce=j+1,be=H+1;let $e=0,q=0;const oe=new Me;for(let se=0;se<be;se++){const pe=se*J-he;for(let Se=0;Se<ce;Se++){const Fe=Se*ae-te;oe[M]=Fe*O,oe[I]=pe*P,oe[L]=le,p.push(oe.x,oe.y,oe.z),oe[M]=0,oe[I]=0,oe[L]=G>0?1:-1,_.push(oe.x,oe.y,oe.z),v.push(Se/j),v.push(1-se/H),$e+=1}}for(let se=0;se<H;se++)for(let pe=0;pe<j;pe++){const Se=b+pe+ce*se,Fe=b+pe+ce*(se+1),Re=b+(pe+1)+ce*(se+1),qe=b+(pe+1)+ce*se;d.push(Se,Fe,qe),d.push(Fe,Re,qe),q+=6}u.addGroup(E,q,Z),E+=q,b+=$e}}static fromJSON(e){return new hu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function uE(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function Ep(n){const e={};for(let t=0;t<n.length;t++){const i=uE(n[t]);for(const s in i)e[s]=i[s]}return e}function Iye(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const z$={clone:uE,merge:Ep};var Rye=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,kye=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class bd extends od{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Rye,this.fragmentShader=kye,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=uE(e.uniforms),this.uniformsGroups=Iye(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class BE extends to{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qr,this.projectionMatrix=new qr,this.projectionMatrixInverse=new qr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ja extends BE{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=a$*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(p1*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return a$*2*Math.atan(Math.tan(p1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(p1*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const d=l.fullWidth,p=l.fullHeight;o+=l.offsetX*s/d,t-=l.offsetY*i/p,s*=l.width/d,i*=l.height/p}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const eS=90,tS=1;class cK extends to{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const s=new Ja(eS,tS,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Me(1,0,0)),this.add(s);const o=new Ja(eS,tS,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Me(-1,0,0)),this.add(o);const l=new Ja(eS,tS,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(new Me(0,1,0)),this.add(l);const u=new Ja(eS,tS,e,t);u.layers=this.layers,u.up.set(0,0,-1),u.lookAt(new Me(0,-1,0)),this.add(u);const d=new Ja(eS,tS,e,t);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new Me(0,0,1)),this.add(d);const p=new Ja(eS,tS,e,t);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new Me(0,0,-1)),this.add(p)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[s,o,l,u,d,p]=this.children,_=e.getRenderTarget(),v=e.toneMapping,b=e.xr.enabled;e.toneMapping=Qg,e.xr.enabled=!1;const E=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,s),e.setRenderTarget(i,1),e.render(t,o),e.setRenderTarget(i,2),e.render(t,l),e.setRenderTarget(i,3),e.render(t,u),e.setRenderTarget(i,4),e.render(t,d),i.texture.generateMipmaps=E,e.setRenderTarget(i,5),e.render(t,p),e.setRenderTarget(_),e.toneMapping=v,e.xr.enabled=b,i.texture.needsPMREMUpdate=!0}}class U$ extends ac{constructor(e,t,i,s,o,l,u,d,p,_){e=e!==void 0?e:[],t=t!==void 0?t:wv,super(e,t,i,s,o,l,u,d,p,_),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class hK extends Ic{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new U$(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:bl}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new hu(5,5,5),o=new bd({name:"CubemapFromEquirect",uniforms:uE(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:sd,blending:lf});o.uniforms.tEquirect.value=t;const l=new Fn(s,o),u=t.minFilter;return t.minFilter===F1&&(t.minFilter=bl),new cK(1,10,this).update(e,l),t.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,i,s){const o=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,i,s);e.setRenderTarget(o)}}const gO=new Me,Oye=new Me,Lye=new rf;class V_{constructor(e=new Me(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=gO.subVectors(i,t).cross(Oye.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(gO),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(i).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Lye.getNormalMatrix(e),s=this.coplanarPoint(gO).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const nS=new s_,lM=new Me;class XR{constructor(e=new V_,t=new V_,i=new V_,s=new V_,o=new V_,l=new V_){this.planes=[e,t,i,s,o,l]}set(e,t,i,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,s=i[0],o=i[1],l=i[2],u=i[3],d=i[4],p=i[5],_=i[6],v=i[7],b=i[8],E=i[9],C=i[10],M=i[11],I=i[12],L=i[13],O=i[14],P=i[15];return t[0].setComponents(u-s,v-d,M-b,P-I).normalize(),t[1].setComponents(u+s,v+d,M+b,P+I).normalize(),t[2].setComponents(u+o,v+p,M+E,P+L).normalize(),t[3].setComponents(u-o,v-p,M-E,P-L).normalize(),t[4].setComponents(u-l,v-_,M-C,P-O).normalize(),t[5].setComponents(u+l,v+_,M+C,P+O).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),nS.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(nS)}intersectsSprite(e){return nS.center.set(0,0,0),nS.radius=.7071067811865476,nS.applyMatrix4(e.matrixWorld),this.intersectsSphere(nS)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(lM.x=s.normal.x>0?e.max.x:e.min.x,lM.y=s.normal.y>0?e.max.y:e.min.y,lM.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(lM)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function dK(){let n=null,e=!1,t=null,i=null;function s(o,l){t(o,l),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function Dye(n,e){const t=e.isWebGL2,i=new WeakMap;function s(p,_){const v=p.array,b=p.usage,E=n.createBuffer();n.bindBuffer(_,E),n.bufferData(_,v,b),p.onUploadCallback();let C;if(v instanceof Float32Array)C=5126;else if(v instanceof Uint16Array)if(p.isFloat16BufferAttribute)if(t)C=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else C=5123;else if(v instanceof Int16Array)C=5122;else if(v instanceof Uint32Array)C=5125;else if(v instanceof Int32Array)C=5124;else if(v instanceof Int8Array)C=5120;else if(v instanceof Uint8Array)C=5121;else if(v instanceof Uint8ClampedArray)C=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+v);return{buffer:E,type:C,bytesPerElement:v.BYTES_PER_ELEMENT,version:p.version}}function o(p,_,v){const b=_.array,E=_.updateRange;n.bindBuffer(v,p),E.count===-1?n.bufferSubData(v,0,b):(t?n.bufferSubData(v,E.offset*b.BYTES_PER_ELEMENT,b,E.offset,E.count):n.bufferSubData(v,E.offset*b.BYTES_PER_ELEMENT,b.subarray(E.offset,E.offset+E.count)),E.count=-1)}function l(p){return p.isInterleavedBufferAttribute&&(p=p.data),i.get(p)}function u(p){p.isInterleavedBufferAttribute&&(p=p.data);const _=i.get(p);_&&(n.deleteBuffer(_.buffer),i.delete(p))}function d(p,_){if(p.isGLBufferAttribute){const b=i.get(p);(!b||b.version<p.version)&&i.set(p,{buffer:p.buffer,type:p.type,bytesPerElement:p.elementSize,version:p.version});return}p.isInterleavedBufferAttribute&&(p=p.data);const v=i.get(p);v===void 0?i.set(p,s(p,_)):v.version<p.version&&(o(v.buffer,p,_),v.version=p.version)}return{get:l,remove:u,update:d}}class e0 extends ai{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const o=e/2,l=t/2,u=Math.floor(i),d=Math.floor(s),p=u+1,_=d+1,v=e/u,b=t/d,E=[],C=[],M=[],I=[];for(let L=0;L<_;L++){const O=L*b-l;for(let P=0;P<p;P++){const B=P*v-o;C.push(B,-O,0),M.push(0,0,1),I.push(P/u),I.push(1-L/d)}}for(let L=0;L<d;L++)for(let O=0;O<u;O++){const P=O+p*L,B=O+p*(L+1),z=O+1+p*(L+1),G=O+1+p*L;E.push(P,B,G),E.push(B,z,G)}this.setIndex(E),this.setAttribute("position",new sr(C,3)),this.setAttribute("normal",new sr(M,3)),this.setAttribute("uv",new sr(I,2))}static fromJSON(e){return new e0(e.width,e.height,e.widthSegments,e.heightSegments)}}var Nye=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Bye=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Pye=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Fye=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,zye=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Uye=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Hye="vec3 transformed = vec3( position );",Gye=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Wye=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Vye=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,jye=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Xye=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Yye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Kye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Jye=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,qye=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Qye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Zye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,eve=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,tve=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,nve=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,rve=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ive=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,sve=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,ove=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ave=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,lve="gl_FragColor = linearToOutputTexel( gl_FragColor );",uve=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,cve=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,hve=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,dve=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,pve=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,fve=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,mve=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,gve=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,_ve=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,yve=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,vve=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,bve=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Tve=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Sve=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Eve=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,xve=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,wve=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,$ve=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Cve=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Mve=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Ave=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Ive=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Rve=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,kve=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Ove=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Lve=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Dve=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Nve=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Bve=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Pve=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Fve=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,zve=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Uve=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Hve=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Gve=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Wve=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Vve=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,jve=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Xve=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Yve=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Kve=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Jve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Qve=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Zve=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,ebe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,tbe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,nbe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,rbe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ibe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,sbe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,obe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,abe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,lbe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,ube=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,cbe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,hbe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,dbe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,pbe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,fbe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,mbe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,gbe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,_be=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,ybe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,vbe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,bbe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Tbe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Sbe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Ebe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,xbe=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,wbe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,$be=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Cbe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Mbe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Abe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Ibe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Rbe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,kbe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Obe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Lbe=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Dbe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Nbe=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Bbe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Pbe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Fbe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,zbe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Ube=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Hbe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Gbe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Wbe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Vbe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,jbe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xbe=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ybe=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kbe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Jbe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qbe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Qbe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Zbe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,e1e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,t1e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,n1e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r1e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,i1e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,s1e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,o1e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,a1e=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,l1e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,u1e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,c1e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ds={alphamap_fragment:Nye,alphamap_pars_fragment:Bye,alphatest_fragment:Pye,alphatest_pars_fragment:Fye,aomap_fragment:zye,aomap_pars_fragment:Uye,begin_vertex:Hye,beginnormal_vertex:Gye,bsdfs:Wye,iridescence_fragment:Vye,bumpmap_pars_fragment:jye,clipping_planes_fragment:Xye,clipping_planes_pars_fragment:Yye,clipping_planes_pars_vertex:Kye,clipping_planes_vertex:Jye,color_fragment:qye,color_pars_fragment:Qye,color_pars_vertex:Zye,color_vertex:eve,common:tve,cube_uv_reflection_fragment:nve,defaultnormal_vertex:rve,displacementmap_pars_vertex:ive,displacementmap_vertex:sve,emissivemap_fragment:ove,emissivemap_pars_fragment:ave,encodings_fragment:lve,encodings_pars_fragment:uve,envmap_fragment:cve,envmap_common_pars_fragment:hve,envmap_pars_fragment:dve,envmap_pars_vertex:pve,envmap_physical_pars_fragment:xve,envmap_vertex:fve,fog_vertex:mve,fog_pars_vertex:gve,fog_fragment:_ve,fog_pars_fragment:yve,gradientmap_pars_fragment:vve,lightmap_fragment:bve,lightmap_pars_fragment:Tve,lights_lambert_vertex:Sve,lights_pars_begin:Eve,lights_toon_fragment:wve,lights_toon_pars_fragment:$ve,lights_phong_fragment:Cve,lights_phong_pars_fragment:Mve,lights_physical_fragment:Ave,lights_physical_pars_fragment:Ive,lights_fragment_begin:Rve,lights_fragment_maps:kve,lights_fragment_end:Ove,logdepthbuf_fragment:Lve,logdepthbuf_pars_fragment:Dve,logdepthbuf_pars_vertex:Nve,logdepthbuf_vertex:Bve,map_fragment:Pve,map_pars_fragment:Fve,map_particle_fragment:zve,map_particle_pars_fragment:Uve,metalnessmap_fragment:Hve,metalnessmap_pars_fragment:Gve,morphcolor_vertex:Wve,morphnormal_vertex:Vve,morphtarget_pars_vertex:jve,morphtarget_vertex:Xve,normal_fragment_begin:Yve,normal_fragment_maps:Kve,normal_pars_fragment:Jve,normal_pars_vertex:qve,normal_vertex:Qve,normalmap_pars_fragment:Zve,clearcoat_normal_fragment_begin:ebe,clearcoat_normal_fragment_maps:tbe,clearcoat_pars_fragment:nbe,iridescence_pars_fragment:rbe,output_fragment:ibe,packing:sbe,premultiplied_alpha_fragment:obe,project_vertex:abe,dithering_fragment:lbe,dithering_pars_fragment:ube,roughnessmap_fragment:cbe,roughnessmap_pars_fragment:hbe,shadowmap_pars_fragment:dbe,shadowmap_pars_vertex:pbe,shadowmap_vertex:fbe,shadowmask_pars_fragment:mbe,skinbase_vertex:gbe,skinning_pars_vertex:_be,skinning_vertex:ybe,skinnormal_vertex:vbe,specularmap_fragment:bbe,specularmap_pars_fragment:Tbe,tonemapping_fragment:Sbe,tonemapping_pars_fragment:Ebe,transmission_fragment:xbe,transmission_pars_fragment:wbe,uv_pars_fragment:$be,uv_pars_vertex:Cbe,uv_vertex:Mbe,uv2_pars_fragment:Abe,uv2_pars_vertex:Ibe,uv2_vertex:Rbe,worldpos_vertex:kbe,background_vert:Obe,background_frag:Lbe,cube_vert:Dbe,cube_frag:Nbe,depth_vert:Bbe,depth_frag:Pbe,distanceRGBA_vert:Fbe,distanceRGBA_frag:zbe,equirect_vert:Ube,equirect_frag:Hbe,linedashed_vert:Gbe,linedashed_frag:Wbe,meshbasic_vert:Vbe,meshbasic_frag:jbe,meshlambert_vert:Xbe,meshlambert_frag:Ybe,meshmatcap_vert:Kbe,meshmatcap_frag:Jbe,meshnormal_vert:qbe,meshnormal_frag:Qbe,meshphong_vert:Zbe,meshphong_frag:e1e,meshphysical_vert:t1e,meshphysical_frag:n1e,meshtoon_vert:r1e,meshtoon_frag:i1e,points_vert:s1e,points_frag:o1e,shadow_vert:a1e,shadow_frag:l1e,sprite_vert:u1e,sprite_frag:c1e},Vn={common:{diffuse:{value:new Nn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new rf},uv2Transform:{value:new rf},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Nn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Nn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new rf}},sprite:{diffuse:{value:new Nn(16777215)},opacity:{value:1},center:{value:new Vt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new rf}}},ef={basic:{uniforms:Ep([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.fog]),vertexShader:ds.meshbasic_vert,fragmentShader:ds.meshbasic_frag},lambert:{uniforms:Ep([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.fog,Vn.lights,{emissive:{value:new Nn(0)}}]),vertexShader:ds.meshlambert_vert,fragmentShader:ds.meshlambert_frag},phong:{uniforms:Ep([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,Vn.lights,{emissive:{value:new Nn(0)},specular:{value:new Nn(1118481)},shininess:{value:30}}]),vertexShader:ds.meshphong_vert,fragmentShader:ds.meshphong_frag},standard:{uniforms:Ep([Vn.common,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.roughnessmap,Vn.metalnessmap,Vn.fog,Vn.lights,{emissive:{value:new Nn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ds.meshphysical_vert,fragmentShader:ds.meshphysical_frag},toon:{uniforms:Ep([Vn.common,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.gradientmap,Vn.fog,Vn.lights,{emissive:{value:new Nn(0)}}]),vertexShader:ds.meshtoon_vert,fragmentShader:ds.meshtoon_frag},matcap:{uniforms:Ep([Vn.common,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,{matcap:{value:null}}]),vertexShader:ds.meshmatcap_vert,fragmentShader:ds.meshmatcap_frag},points:{uniforms:Ep([Vn.points,Vn.fog]),vertexShader:ds.points_vert,fragmentShader:ds.points_frag},dashed:{uniforms:Ep([Vn.common,Vn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ds.linedashed_vert,fragmentShader:ds.linedashed_frag},depth:{uniforms:Ep([Vn.common,Vn.displacementmap]),vertexShader:ds.depth_vert,fragmentShader:ds.depth_frag},normal:{uniforms:Ep([Vn.common,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,{opacity:{value:1}}]),vertexShader:ds.meshnormal_vert,fragmentShader:ds.meshnormal_frag},sprite:{uniforms:Ep([Vn.sprite,Vn.fog]),vertexShader:ds.sprite_vert,fragmentShader:ds.sprite_frag},background:{uniforms:{uvTransform:{value:new rf},t2D:{value:null}},vertexShader:ds.background_vert,fragmentShader:ds.background_frag},cube:{uniforms:Ep([Vn.envmap,{opacity:{value:1}}]),vertexShader:ds.cube_vert,fragmentShader:ds.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ds.equirect_vert,fragmentShader:ds.equirect_frag},distanceRGBA:{uniforms:Ep([Vn.common,Vn.displacementmap,{referencePosition:{value:new Me},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ds.distanceRGBA_vert,fragmentShader:ds.distanceRGBA_frag},shadow:{uniforms:Ep([Vn.lights,Vn.fog,{color:{value:new Nn(0)},opacity:{value:1}}]),vertexShader:ds.shadow_vert,fragmentShader:ds.shadow_frag}};ef.physical={uniforms:Ep([ef.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Nn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Nn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Nn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ds.meshphysical_vert,fragmentShader:ds.meshphysical_frag};function h1e(n,e,t,i,s,o){const l=new Nn(0);let u=s===!0?0:1,d,p,_=null,v=0,b=null;function E(M,I){let L=!1,O=I.isScene===!0?I.background:null;O&&O.isTexture&&(O=e.get(O));const P=n.xr,B=P.getSession&&P.getSession();B&&B.environmentBlendMode==="additive"&&(O=null),O===null?C(l,u):O&&O.isColor&&(C(O,1),L=!0),(n.autoClear||L)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),O&&(O.isCubeTexture||O.mapping===NE)?(p===void 0&&(p=new Fn(new hu(1,1,1),new bd({name:"BackgroundCubeMaterial",uniforms:uE(ef.cube.uniforms),vertexShader:ef.cube.vertexShader,fragmentShader:ef.cube.fragmentShader,side:sd,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(z,G,j){this.matrixWorld.copyPosition(j.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(p)),p.material.uniforms.envMap.value=O,p.material.uniforms.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,(_!==O||v!==O.version||b!==n.toneMapping)&&(p.material.needsUpdate=!0,_=O,v=O.version,b=n.toneMapping),p.layers.enableAll(),M.unshift(p,p.geometry,p.material,0,0,null)):O&&O.isTexture&&(d===void 0&&(d=new Fn(new e0(2,2),new bd({name:"BackgroundMaterial",uniforms:uE(ef.background.uniforms),vertexShader:ef.background.vertexShader,fragmentShader:ef.background.fragmentShader,side:e_,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(d)),d.material.uniforms.t2D.value=O,O.matrixAutoUpdate===!0&&O.updateMatrix(),d.material.uniforms.uvTransform.value.copy(O.matrix),(_!==O||v!==O.version||b!==n.toneMapping)&&(d.material.needsUpdate=!0,_=O,v=O.version,b=n.toneMapping),d.layers.enableAll(),M.unshift(d,d.geometry,d.material,0,0,null))}function C(M,I){t.buffers.color.setClear(M.r,M.g,M.b,I,o)}return{getClearColor:function(){return l},setClearColor:function(M,I=1){l.set(M),u=I,C(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(M){u=M,C(l,u)},render:E}}function d1e(n,e,t,i){const s=n.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),l=i.isWebGL2||o!==null,u={},d=I(null);let p=d,_=!1;function v(le,ce,be,$e,q){let oe=!1;if(l){const se=M($e,be,ce);p!==se&&(p=se,E(p.object)),oe=L(le,$e,be,q),oe&&O(le,$e,be,q)}else{const se=ce.wireframe===!0;(p.geometry!==$e.id||p.program!==be.id||p.wireframe!==se)&&(p.geometry=$e.id,p.program=be.id,p.wireframe=se,oe=!0)}q!==null&&t.update(q,34963),(oe||_)&&(_=!1,H(le,ce,be,$e),q!==null&&n.bindBuffer(34963,t.get(q).buffer))}function b(){return i.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}function E(le){return i.isWebGL2?n.bindVertexArray(le):o.bindVertexArrayOES(le)}function C(le){return i.isWebGL2?n.deleteVertexArray(le):o.deleteVertexArrayOES(le)}function M(le,ce,be){const $e=be.wireframe===!0;let q=u[le.id];q===void 0&&(q={},u[le.id]=q);let oe=q[ce.id];oe===void 0&&(oe={},q[ce.id]=oe);let se=oe[$e];return se===void 0&&(se=I(b()),oe[$e]=se),se}function I(le){const ce=[],be=[],$e=[];for(let q=0;q<s;q++)ce[q]=0,be[q]=0,$e[q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ce,enabledAttributes:be,attributeDivisors:$e,object:le,attributes:{},index:null}}function L(le,ce,be,$e){const q=p.attributes,oe=ce.attributes;let se=0;const pe=be.getAttributes();for(const Se in pe)if(pe[Se].location>=0){const Fe=q[Se];let Re=oe[Se];if(Re===void 0&&(Se==="instanceMatrix"&&le.instanceMatrix&&(Re=le.instanceMatrix),Se==="instanceColor"&&le.instanceColor&&(Re=le.instanceColor)),Fe===void 0||Fe.attribute!==Re||Re&&Fe.data!==Re.data)return!0;se++}return p.attributesNum!==se||p.index!==$e}function O(le,ce,be,$e){const q={},oe=ce.attributes;let se=0;const pe=be.getAttributes();for(const Se in pe)if(pe[Se].location>=0){let Fe=oe[Se];Fe===void 0&&(Se==="instanceMatrix"&&le.instanceMatrix&&(Fe=le.instanceMatrix),Se==="instanceColor"&&le.instanceColor&&(Fe=le.instanceColor));const Re={};Re.attribute=Fe,Fe&&Fe.data&&(Re.data=Fe.data),q[Se]=Re,se++}p.attributes=q,p.attributesNum=se,p.index=$e}function P(){const le=p.newAttributes;for(let ce=0,be=le.length;ce<be;ce++)le[ce]=0}function B(le){z(le,0)}function z(le,ce){const be=p.newAttributes,$e=p.enabledAttributes,q=p.attributeDivisors;be[le]=1,$e[le]===0&&(n.enableVertexAttribArray(le),$e[le]=1),q[le]!==ce&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](le,ce),q[le]=ce)}function G(){const le=p.newAttributes,ce=p.enabledAttributes;for(let be=0,$e=ce.length;be<$e;be++)ce[be]!==le[be]&&(n.disableVertexAttribArray(be),ce[be]=0)}function j(le,ce,be,$e,q,oe){i.isWebGL2===!0&&(be===5124||be===5125)?n.vertexAttribIPointer(le,ce,be,q,oe):n.vertexAttribPointer(le,ce,be,$e,q,oe)}function H(le,ce,be,$e){if(i.isWebGL2===!1&&(le.isInstancedMesh||$e.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;P();const q=$e.attributes,oe=be.getAttributes(),se=ce.defaultAttributeValues;for(const pe in oe){const Se=oe[pe];if(Se.location>=0){let Fe=q[pe];if(Fe===void 0&&(pe==="instanceMatrix"&&le.instanceMatrix&&(Fe=le.instanceMatrix),pe==="instanceColor"&&le.instanceColor&&(Fe=le.instanceColor)),Fe!==void 0){const Re=Fe.normalized,qe=Fe.itemSize,Ne=t.get(Fe);if(Ne===void 0)continue;const it=Ne.buffer,st=Ne.type,pt=Ne.bytesPerElement;if(Fe.isInterleavedBufferAttribute){const dt=Fe.data,Ue=dt.stride,Ae=Fe.offset;if(dt.isInstancedInterleavedBuffer){for(let je=0;je<Se.locationSize;je++)z(Se.location+je,dt.meshPerAttribute);le.isInstancedMesh!==!0&&$e._maxInstanceCount===void 0&&($e._maxInstanceCount=dt.meshPerAttribute*dt.count)}else for(let je=0;je<Se.locationSize;je++)B(Se.location+je);n.bindBuffer(34962,it);for(let je=0;je<Se.locationSize;je++)j(Se.location+je,qe/Se.locationSize,st,Re,Ue*pt,(Ae+qe/Se.locationSize*je)*pt)}else{if(Fe.isInstancedBufferAttribute){for(let dt=0;dt<Se.locationSize;dt++)z(Se.location+dt,Fe.meshPerAttribute);le.isInstancedMesh!==!0&&$e._maxInstanceCount===void 0&&($e._maxInstanceCount=Fe.meshPerAttribute*Fe.count)}else for(let dt=0;dt<Se.locationSize;dt++)B(Se.location+dt);n.bindBuffer(34962,it);for(let dt=0;dt<Se.locationSize;dt++)j(Se.location+dt,qe/Se.locationSize,st,Re,qe*pt,qe/Se.locationSize*dt*pt)}}else if(se!==void 0){const Re=se[pe];if(Re!==void 0)switch(Re.length){case 2:n.vertexAttrib2fv(Se.location,Re);break;case 3:n.vertexAttrib3fv(Se.location,Re);break;case 4:n.vertexAttrib4fv(Se.location,Re);break;default:n.vertexAttrib1fv(Se.location,Re)}}}}G()}function Z(){te();for(const le in u){const ce=u[le];for(const be in ce){const $e=ce[be];for(const q in $e)C($e[q].object),delete $e[q];delete ce[be]}delete u[le]}}function ae(le){if(u[le.id]===void 0)return;const ce=u[le.id];for(const be in ce){const $e=ce[be];for(const q in $e)C($e[q].object),delete $e[q];delete ce[be]}delete u[le.id]}function J(le){for(const ce in u){const be=u[ce];if(be[le.id]===void 0)continue;const $e=be[le.id];for(const q in $e)C($e[q].object),delete $e[q];delete be[le.id]}}function te(){he(),_=!0,p!==d&&(p=d,E(p.object))}function he(){d.geometry=null,d.program=null,d.wireframe=!1}return{setup:v,reset:te,resetDefaultState:he,dispose:Z,releaseStatesOfGeometry:ae,releaseStatesOfProgram:J,initAttributes:P,enableAttribute:B,disableUnusedAttributes:G}}function p1e(n,e,t,i){const s=i.isWebGL2;let o;function l(p){o=p}function u(p,_){n.drawArrays(o,p,_),t.update(_,o,1)}function d(p,_,v){if(v===0)return;let b,E;if(s)b=n,E="drawArraysInstanced";else if(b=e.get("ANGLE_instanced_arrays"),E="drawArraysInstancedANGLE",b===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}b[E](o,p,_,v),t.update(_,o,v)}this.setMode=l,this.render=u,this.renderInstances=d}function f1e(n,e,t){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const j=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(j.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(j){if(j==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";j="mediump"}return j==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const l=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let u=t.precision!==void 0?t.precision:"highp";const d=o(u);d!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",d,"instead."),u=d);const p=l||e.has("WEBGL_draw_buffers"),_=t.logarithmicDepthBuffer===!0,v=n.getParameter(34930),b=n.getParameter(35660),E=n.getParameter(3379),C=n.getParameter(34076),M=n.getParameter(34921),I=n.getParameter(36347),L=n.getParameter(36348),O=n.getParameter(36349),P=b>0,B=l||e.has("OES_texture_float"),z=P&&B,G=l?n.getParameter(36183):0;return{isWebGL2:l,drawBuffers:p,getMaxAnisotropy:s,getMaxPrecision:o,precision:u,logarithmicDepthBuffer:_,maxTextures:v,maxVertexTextures:b,maxTextureSize:E,maxCubemapSize:C,maxAttributes:M,maxVertexUniforms:I,maxVaryings:L,maxFragmentUniforms:O,vertexTextures:P,floatFragmentTextures:B,floatVertexTextures:z,maxSamples:G}}function m1e(n){const e=this;let t=null,i=0,s=!1,o=!1;const l=new V_,u=new rf,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(v,b,E){const C=v.length!==0||b||i!==0||s;return s=b,t=_(v,E,0),i=v.length,C},this.beginShadows=function(){o=!0,_(null)},this.endShadows=function(){o=!1,p()},this.setState=function(v,b,E){const C=v.clippingPlanes,M=v.clipIntersection,I=v.clipShadows,L=n.get(v);if(!s||C===null||C.length===0||o&&!I)o?_(null):p();else{const O=o?0:i,P=O*4;let B=L.clippingState||null;d.value=B,B=_(C,b,P,E);for(let z=0;z!==P;++z)B[z]=t[z];L.clippingState=B,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=O}};function p(){d.value!==t&&(d.value=t,d.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function _(v,b,E,C){const M=v!==null?v.length:0;let I=null;if(M!==0){if(I=d.value,C!==!0||I===null){const L=E+M*4,O=b.matrixWorldInverse;u.getNormalMatrix(O),(I===null||I.length<L)&&(I=new Float32Array(L));for(let P=0,B=E;P!==M;++P,B+=4)l.copy(v[P]).applyMatrix4(O,u),l.normal.toArray(I,B),I[B+3]=l.constant}d.value=I,d.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,I}}function g1e(n){let e=new WeakMap;function t(l,u){return u===e$?l.mapping=wv:u===t$&&(l.mapping=$v),l}function i(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){const u=l.mapping;if(u===e$||u===t$)if(e.has(l)){const d=e.get(l).texture;return t(d,l.mapping)}else{const d=l.image;if(d&&d.height>0){const p=new hK(d.height/2);return p.fromEquirectangularTexture(n,l),e.set(l,p),l.addEventListener("dispose",s),t(p.texture,l.mapping)}else return null}}return l}function s(l){const u=l.target;u.removeEventListener("dispose",s);const d=e.get(u);d!==void 0&&(e.delete(u),d.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}class J0 extends BE{constructor(e=-1,t=1,i=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-e,l=i+e,u=s+t,d=s-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=p*this.view.offsetX,l=o+p*this.view.width,u-=_*this.view.offsetY,d=u-_*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,d,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const MS=4,Q4=[.125,.215,.35,.446,.526,.582],Xb=20,_O=new J0,Z4=new Nn;let yO=null;const Gb=(1+Math.sqrt(5))/2,rS=1/Gb,e5=[new Me(1,1,1),new Me(-1,1,1),new Me(1,1,-1),new Me(-1,1,-1),new Me(0,Gb,rS),new Me(0,Gb,-rS),new Me(rS,0,Gb),new Me(-rS,0,Gb),new Me(Gb,rS,0),new Me(-Gb,rS,0)];class tN{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){yO=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,s,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=r5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=n5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(yO),e.scissorTest=!1,uM(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===wv||e.mapping===$v?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),yO=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:bl,minFilter:bl,generateMipmaps:!1,type:M1,format:Ff,encoding:mg,depthBuffer:!1},s=t5(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=t5(e,t,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_1e(o)),this._blurMaterial=y1e(o,e,t)}return s}_compileMaterial(e){const t=new Fn(this._lodPlanes[0],e);this._renderer.compile(t,_O)}_sceneToCubeUV(e,t,i,s){const o=new Ja(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,p=d.autoClear,_=d.toneMapping;d.getClearColor(Z4),d.toneMapping=Qg,d.autoClear=!1;const v=new r0({name:"PMREM.Background",side:sd,depthWrite:!1,depthTest:!1}),b=new Fn(new hu,v);let E=!1;const C=e.background;C?C.isColor&&(v.color.copy(C),e.background=null,E=!0):(v.color.copy(Z4),E=!0);for(let M=0;M<6;M++){const I=M%3;I===0?(o.up.set(0,l[M],0),o.lookAt(u[M],0,0)):I===1?(o.up.set(0,0,l[M]),o.lookAt(0,u[M],0)):(o.up.set(0,l[M],0),o.lookAt(0,0,u[M]));const L=this._cubeSize;uM(s,I*L,M>2?L:0,L,L),d.setRenderTarget(s),E&&d.render(b,o),d.render(e,o)}b.geometry.dispose(),b.material.dispose(),d.toneMapping=_,d.autoClear=p,e.background=C}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===wv||e.mapping===$v;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=r5()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=n5());const o=s?this._cubemapMaterial:this._equirectMaterial,l=new Fn(this._lodPlanes[0],o),u=o.uniforms;u.envMap.value=e;const d=this._cubeSize;uM(t,0,0,3*d,2*d),i.setRenderTarget(t),i.render(l,_O)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=e5[(s-1)%e5.length];this._blur(e,s-1,s,o,l)}t.autoClear=i}_blur(e,t,i,s,o){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,i,s,"latitudinal",o),this._halfBlur(l,e,i,i,s,"longitudinal",o)}_halfBlur(e,t,i,s,o,l,u){const d=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const _=3,v=new Fn(this._lodPlanes[s],p),b=p.uniforms,E=this._sizeLods[i]-1,C=isFinite(o)?Math.PI/(2*E):2*Math.PI/(2*Xb-1),M=o/C,I=isFinite(o)?1+Math.floor(_*M):Xb;I>Xb&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${I} samples when the maximum is set to ${Xb}`);const L=[];let O=0;for(let j=0;j<Xb;++j){const H=j/M,Z=Math.exp(-H*H/2);L.push(Z),j===0?O+=Z:j<I&&(O+=2*Z)}for(let j=0;j<L.length;j++)L[j]=L[j]/O;b.envMap.value=e.texture,b.samples.value=I,b.weights.value=L,b.latitudinal.value=l==="latitudinal",u&&(b.poleAxis.value=u);const{_lodMax:P}=this;b.dTheta.value=C,b.mipInt.value=P-i;const B=this._sizeLods[s],z=3*B*(s>P-MS?s-P+MS:0),G=4*(this._cubeSize-B);uM(t,z,G,3*B,2*B),d.setRenderTarget(t),d.render(v,_O)}}function _1e(n){const e=[],t=[],i=[];let s=n;const o=n-MS+1+Q4.length;for(let l=0;l<o;l++){const u=Math.pow(2,s);t.push(u);let d=1/u;l>n-MS?d=Q4[l-n+MS-1]:l===0&&(d=0),i.push(d);const p=1/(u-2),_=-p,v=1+p,b=[_,_,v,_,v,v,_,_,v,v,_,v],E=6,C=6,M=3,I=2,L=1,O=new Float32Array(M*C*E),P=new Float32Array(I*C*E),B=new Float32Array(L*C*E);for(let G=0;G<E;G++){const j=G%3*2/3-1,H=G>2?0:-1,Z=[j,H,0,j+2/3,H,0,j+2/3,H+1,0,j,H,0,j+2/3,H+1,0,j,H+1,0];O.set(Z,M*C*G),P.set(b,I*C*G);const ae=[G,G,G,G,G,G];B.set(ae,L*C*G)}const z=new ai;z.setAttribute("position",new Do(O,M)),z.setAttribute("uv",new Do(P,I)),z.setAttribute("faceIndex",new Do(B,L)),e.push(z),s>MS&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function t5(n,e,t){const i=new Ic(n,e,t);return i.texture.mapping=NE,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function uM(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function y1e(n,e,t){const i=new Float32Array(Xb),s=new Me(0,1,0);return new bd({name:"SphericalGaussianBlur",defines:{n:Xb,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:NP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:lf,depthTest:!1,depthWrite:!1})}function n5(){return new bd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:NP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:lf,depthTest:!1,depthWrite:!1})}function r5(){return new bd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:NP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:lf,depthTest:!1,depthWrite:!1})}function NP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function v1e(n){let e=new WeakMap,t=null;function i(u){if(u&&u.isTexture){const d=u.mapping,p=d===e$||d===t$,_=d===wv||d===$v;if(p||_)if(u.isRenderTargetTexture&&u.needsPMREMUpdate===!0){u.needsPMREMUpdate=!1;let v=e.get(u);return t===null&&(t=new tN(n)),v=p?t.fromEquirectangular(u,v):t.fromCubemap(u,v),e.set(u,v),v.texture}else{if(e.has(u))return e.get(u).texture;{const v=u.image;if(p&&v&&v.height>0||_&&v&&s(v)){t===null&&(t=new tN(n));const b=p?t.fromEquirectangular(u):t.fromCubemap(u);return e.set(u,b),u.addEventListener("dispose",o),b.texture}else return null}}}return u}function s(u){let d=0;const p=6;for(let _=0;_<p;_++)u[_]!==void 0&&d++;return d===p}function o(u){const d=u.target;d.removeEventListener("dispose",o);const p=e.get(d);p!==void 0&&(e.delete(d),p.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:l}}function b1e(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const s=t(i);return s===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function T1e(n,e,t,i){const s={},o=new WeakMap;function l(v){const b=v.target;b.index!==null&&e.remove(b.index);for(const C in b.attributes)e.remove(b.attributes[C]);b.removeEventListener("dispose",l),delete s[b.id];const E=o.get(b);E&&(e.remove(E),o.delete(b)),i.releaseStatesOfGeometry(b),b.isInstancedBufferGeometry===!0&&delete b._maxInstanceCount,t.memory.geometries--}function u(v,b){return s[b.id]===!0||(b.addEventListener("dispose",l),s[b.id]=!0,t.memory.geometries++),b}function d(v){const b=v.attributes;for(const C in b)e.update(b[C],34962);const E=v.morphAttributes;for(const C in E){const M=E[C];for(let I=0,L=M.length;I<L;I++)e.update(M[I],34962)}}function p(v){const b=[],E=v.index,C=v.attributes.position;let M=0;if(E!==null){const O=E.array;M=E.version;for(let P=0,B=O.length;P<B;P+=3){const z=O[P+0],G=O[P+1],j=O[P+2];b.push(z,G,G,j,j,z)}}else{const O=C.array;M=C.version;for(let P=0,B=O.length/3-1;P<B;P+=3){const z=P+0,G=P+1,j=P+2;b.push(z,G,G,j,j,z)}}const I=new(lK(b)?DP:LP)(b,1);I.version=M;const L=o.get(v);L&&e.remove(L),o.set(v,I)}function _(v){const b=o.get(v);if(b){const E=v.index;E!==null&&b.version<E.version&&p(v)}else p(v);return o.get(v)}return{get:u,update:d,getWireframeAttribute:_}}function S1e(n,e,t,i){const s=i.isWebGL2;let o;function l(b){o=b}let u,d;function p(b){u=b.type,d=b.bytesPerElement}function _(b,E){n.drawElements(o,E,u,b*d),t.update(E,o,1)}function v(b,E,C){if(C===0)return;let M,I;if(s)M=n,I="drawElementsInstanced";else if(M=e.get("ANGLE_instanced_arrays"),I="drawElementsInstancedANGLE",M===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}M[I](o,E,u,b*d,C),t.update(E,o,C)}this.setMode=l,this.setIndex=p,this.render=_,this.renderInstances=v}function E1e(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,l,u){switch(t.calls++,l){case 4:t.triangles+=u*(o/3);break;case 1:t.lines+=u*(o/2);break;case 3:t.lines+=u*(o-1);break;case 2:t.lines+=u*o;break;case 0:t.points+=u*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function x1e(n,e){return n[0]-e[0]}function w1e(n,e){return Math.abs(e[1])-Math.abs(n[1])}function vO(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Uint8Array?t=255:i instanceof Uint16Array?t=65535:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function $1e(n,e,t){const i={},s=new Float32Array(8),o=new WeakMap,l=new vs,u=[];for(let p=0;p<8;p++)u[p]=[p,0];function d(p,_,v,b){const E=p.morphTargetInfluences;if(e.isWebGL2===!0){const C=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,M=C!==void 0?C.length:0;let I=o.get(_);if(I===void 0||I.count!==M){let P=function(){le.dispose(),o.delete(_),_.removeEventListener("dispose",P)};I!==void 0&&I.texture.dispose();const B=_.morphAttributes.position!==void 0,z=_.morphAttributes.normal!==void 0,G=_.morphAttributes.color!==void 0,j=_.morphAttributes.position||[],H=_.morphAttributes.normal||[],Z=_.morphAttributes.color||[];let ae=0;B===!0&&(ae=1),z===!0&&(ae=2),G===!0&&(ae=3);let J=_.attributes.position.count*ae,te=1;J>e.maxTextureSize&&(te=Math.ceil(J/e.maxTextureSize),J=e.maxTextureSize);const he=new Float32Array(J*te*4*M),le=new P$(he,J,te,M);le.type=j0,le.needsUpdate=!0;const ce=ae*4;for(let be=0;be<M;be++){const $e=j[be],q=H[be],oe=Z[be],se=J*te*4*be;for(let pe=0;pe<$e.count;pe++){const Se=pe*ce;B===!0&&(l.fromBufferAttribute($e,pe),$e.normalized===!0&&vO(l,$e),he[se+Se+0]=l.x,he[se+Se+1]=l.y,he[se+Se+2]=l.z,he[se+Se+3]=0),z===!0&&(l.fromBufferAttribute(q,pe),q.normalized===!0&&vO(l,q),he[se+Se+4]=l.x,he[se+Se+5]=l.y,he[se+Se+6]=l.z,he[se+Se+7]=0),G===!0&&(l.fromBufferAttribute(oe,pe),oe.normalized===!0&&vO(l,oe),he[se+Se+8]=l.x,he[se+Se+9]=l.y,he[se+Se+10]=l.z,he[se+Se+11]=oe.itemSize===4?l.w:1)}}I={count:M,texture:le,size:new Vt(J,te)},o.set(_,I),_.addEventListener("dispose",P)}let L=0;for(let P=0;P<E.length;P++)L+=E[P];const O=_.morphTargetsRelative?1:1-L;b.getUniforms().setValue(n,"morphTargetBaseInfluence",O),b.getUniforms().setValue(n,"morphTargetInfluences",E),b.getUniforms().setValue(n,"morphTargetsTexture",I.texture,t),b.getUniforms().setValue(n,"morphTargetsTextureSize",I.size)}else{const C=E===void 0?0:E.length;let M=i[_.id];if(M===void 0||M.length!==C){M=[];for(let B=0;B<C;B++)M[B]=[B,0];i[_.id]=M}for(let B=0;B<C;B++){const z=M[B];z[0]=B,z[1]=E[B]}M.sort(w1e);for(let B=0;B<8;B++)B<C&&M[B][1]?(u[B][0]=M[B][0],u[B][1]=M[B][1]):(u[B][0]=Number.MAX_SAFE_INTEGER,u[B][1]=0);u.sort(x1e);const I=_.morphAttributes.position,L=_.morphAttributes.normal;let O=0;for(let B=0;B<8;B++){const z=u[B],G=z[0],j=z[1];G!==Number.MAX_SAFE_INTEGER&&j?(I&&_.getAttribute("morphTarget"+B)!==I[G]&&_.setAttribute("morphTarget"+B,I[G]),L&&_.getAttribute("morphNormal"+B)!==L[G]&&_.setAttribute("morphNormal"+B,L[G]),s[B]=j,O+=j):(I&&_.hasAttribute("morphTarget"+B)===!0&&_.deleteAttribute("morphTarget"+B),L&&_.hasAttribute("morphNormal"+B)===!0&&_.deleteAttribute("morphNormal"+B),s[B]=0)}const P=_.morphTargetsRelative?1:1-O;b.getUniforms().setValue(n,"morphTargetBaseInfluence",P),b.getUniforms().setValue(n,"morphTargetInfluences",s)}}return{update:d}}function C1e(n,e,t,i){let s=new WeakMap;function o(d){const p=i.render.frame,_=d.geometry,v=e.get(d,_);return s.get(v)!==p&&(e.update(v),s.set(v,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",u)===!1&&d.addEventListener("dispose",u),t.update(d.instanceMatrix,34962),d.instanceColor!==null&&t.update(d.instanceColor,34962)),v}function l(){s=new WeakMap}function u(d){const p=d.target;p.removeEventListener("dispose",u),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:o,dispose:l}}const pK=new ac,fK=new P$,mK=new jR,gK=new U$,i5=[],s5=[],o5=new Float32Array(16),a5=new Float32Array(9),l5=new Float32Array(4);function PE(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let o=i5[s];if(o===void 0&&(o=new Float32Array(s),i5[s]=o),e!==0){i.toArray(o,0);for(let l=1,u=0;l!==e;++l)u+=t,n[l].toArray(o,u)}return o}function hf(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function df(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function YR(n,e){let t=s5[e];t===void 0&&(t=new Int32Array(e),s5[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function M1e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function A1e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(hf(t,e))return;n.uniform2fv(this.addr,e),df(t,e)}}function I1e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(hf(t,e))return;n.uniform3fv(this.addr,e),df(t,e)}}function R1e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(hf(t,e))return;n.uniform4fv(this.addr,e),df(t,e)}}function k1e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(hf(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),df(t,e)}else{if(hf(t,i))return;l5.set(i),n.uniformMatrix2fv(this.addr,!1,l5),df(t,i)}}function O1e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(hf(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),df(t,e)}else{if(hf(t,i))return;a5.set(i),n.uniformMatrix3fv(this.addr,!1,a5),df(t,i)}}function L1e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(hf(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),df(t,e)}else{if(hf(t,i))return;o5.set(i),n.uniformMatrix4fv(this.addr,!1,o5),df(t,i)}}function D1e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function N1e(n,e){const t=this.cache;hf(t,e)||(n.uniform2iv(this.addr,e),df(t,e))}function B1e(n,e){const t=this.cache;hf(t,e)||(n.uniform3iv(this.addr,e),df(t,e))}function P1e(n,e){const t=this.cache;hf(t,e)||(n.uniform4iv(this.addr,e),df(t,e))}function F1e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function z1e(n,e){const t=this.cache;hf(t,e)||(n.uniform2uiv(this.addr,e),df(t,e))}function U1e(n,e){const t=this.cache;hf(t,e)||(n.uniform3uiv(this.addr,e),df(t,e))}function H1e(n,e){const t=this.cache;hf(t,e)||(n.uniform4uiv(this.addr,e),df(t,e))}function G1e(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2D(e||pK,s)}function W1e(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||mK,s)}function V1e(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||gK,s)}function j1e(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||fK,s)}function X1e(n){switch(n){case 5126:return M1e;case 35664:return A1e;case 35665:return I1e;case 35666:return R1e;case 35674:return k1e;case 35675:return O1e;case 35676:return L1e;case 5124:case 35670:return D1e;case 35667:case 35671:return N1e;case 35668:case 35672:return B1e;case 35669:case 35673:return P1e;case 5125:return F1e;case 36294:return z1e;case 36295:return U1e;case 36296:return H1e;case 35678:case 36198:case 36298:case 36306:case 35682:return G1e;case 35679:case 36299:case 36307:return W1e;case 35680:case 36300:case 36308:case 36293:return V1e;case 36289:case 36303:case 36311:case 36292:return j1e}}function Y1e(n,e){n.uniform1fv(this.addr,e)}function K1e(n,e){const t=PE(e,this.size,2);n.uniform2fv(this.addr,t)}function J1e(n,e){const t=PE(e,this.size,3);n.uniform3fv(this.addr,t)}function q1e(n,e){const t=PE(e,this.size,4);n.uniform4fv(this.addr,t)}function Q1e(n,e){const t=PE(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Z1e(n,e){const t=PE(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function eTe(n,e){const t=PE(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function tTe(n,e){n.uniform1iv(this.addr,e)}function nTe(n,e){n.uniform2iv(this.addr,e)}function rTe(n,e){n.uniform3iv(this.addr,e)}function iTe(n,e){n.uniform4iv(this.addr,e)}function sTe(n,e){n.uniform1uiv(this.addr,e)}function oTe(n,e){n.uniform2uiv(this.addr,e)}function aTe(n,e){n.uniform3uiv(this.addr,e)}function lTe(n,e){n.uniform4uiv(this.addr,e)}function uTe(n,e,t){const i=e.length,s=YR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture2D(e[o]||pK,s[o])}function cTe(n,e,t){const i=e.length,s=YR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture3D(e[o]||mK,s[o])}function hTe(n,e,t){const i=e.length,s=YR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTextureCube(e[o]||gK,s[o])}function dTe(n,e,t){const i=e.length,s=YR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||fK,s[o])}function pTe(n){switch(n){case 5126:return Y1e;case 35664:return K1e;case 35665:return J1e;case 35666:return q1e;case 35674:return Q1e;case 35675:return Z1e;case 35676:return eTe;case 5124:case 35670:return tTe;case 35667:case 35671:return nTe;case 35668:case 35672:return rTe;case 35669:case 35673:return iTe;case 5125:return sTe;case 36294:return oTe;case 36295:return aTe;case 36296:return lTe;case 35678:case 36198:case 36298:case 36306:case 35682:return uTe;case 35679:case 36299:case 36307:return cTe;case 35680:case 36300:case 36308:case 36293:return hTe;case 36289:case 36303:case 36311:case 36292:return dTe}}class fTe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=X1e(t.type)}}class mTe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=pTe(t.type)}}class gTe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let o=0,l=s.length;o!==l;++o){const u=s[o];u.setValue(e,t[u.id],i)}}}const bO=/(\w+)(\])?(\[|\.)?/g;function u5(n,e){n.seq.push(e),n.map[e.id]=e}function _Te(n,e,t){const i=n.name,s=i.length;for(bO.lastIndex=0;;){const o=bO.exec(i),l=bO.lastIndex;let u=o[1];const d=o[2]==="]",p=o[3];if(d&&(u=u|0),p===void 0||p==="["&&l+2===s){u5(t,p===void 0?new fTe(u,n,e):new mTe(u,n,e));break}else{let _=t.map[u];_===void 0&&(_=new gTe(u),u5(t,_)),t=_}}}class EA{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let s=0;s<i;++s){const o=e.getActiveUniform(t,s),l=e.getUniformLocation(t,o.name);_Te(o,l,this)}}setValue(e,t,i,s){const o=this.map[t];o!==void 0&&o.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let o=0,l=t.length;o!==l;++o){const u=t[o],d=i[u.id];d.needsUpdate!==!1&&u.setValue(e,d.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,o=e.length;s!==o;++s){const l=e[s];l.id in t&&i.push(l)}return i}}function c5(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let yTe=0;function vTe(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let l=s;l<o;l++){const u=l+1;i.push(`${u===e?">":" "} ${u}: ${t[l]}`)}return i.join(`
`)}function bTe(n){switch(n){case mg:return["Linear","( value )"];case ps:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function h5(n,e,t){const i=n.getShaderParameter(e,35713),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const l=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+vTe(n.getShaderSource(e),l)}else return s}function TTe(n,e){const t=bTe(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function STe(n,e){let t;switch(e){case NY:t="Linear";break;case BY:t="Reinhard";break;case PY:t="OptimizedCineon";break;case MP:t="ACESFilmic";break;case FY:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function ETe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ew).join(`
`)}function xTe(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function wTe(n,e){const t={},i=n.getProgramParameter(e,35721);for(let s=0;s<i;s++){const o=n.getActiveAttrib(e,s),l=o.name;let u=1;o.type===35674&&(u=2),o.type===35675&&(u=3),o.type===35676&&(u=4),t[l]={type:o.type,location:n.getAttribLocation(e,l),locationSize:u}}return t}function ew(n){return n!==""}function d5(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function p5(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const $Te=/^[ \t]*#include +<([\w\d./]+)>/gm;function nN(n){return n.replace($Te,CTe)}function CTe(n,e){const t=ds[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return nN(t)}const MTe=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ATe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function f5(n){return n.replace(ATe,_K).replace(MTe,ITe)}function ITe(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),_K(n,e,t,i)}function _K(n,e,t,i){let s="";for(let o=parseInt(e);o<parseInt(t);o++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function m5(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function RTe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===UR?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===yw?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===n1&&(e="SHADOWMAP_TYPE_VSM"),e}function kTe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case wv:case $v:e="ENVMAP_TYPE_CUBE";break;case NE:e="ENVMAP_TYPE_CUBE_UV";break}return e}function OTe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case $v:e="ENVMAP_MODE_REFRACTION";break}return e}function LTe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case B$:e="ENVMAP_BLENDING_MULTIPLY";break;case LY:e="ENVMAP_BLENDING_MIX";break;case DY:e="ENVMAP_BLENDING_ADD";break}return e}function DTe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function NTe(n,e,t,i){const s=n.getContext(),o=t.defines;let l=t.vertexShader,u=t.fragmentShader;const d=RTe(t),p=kTe(t),_=OTe(t),v=LTe(t),b=DTe(t),E=t.isWebGL2?"":ETe(t),C=xTe(o),M=s.createProgram();let I,L,O=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(I=[C].filter(ew).join(`
`),I.length>0&&(I+=`
`),L=[E,C].filter(ew).join(`
`),L.length>0&&(L+=`
`)):(I=[m5(t),"#define SHADER_NAME "+t.shaderName,C,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+_:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ew).join(`
`),L=[E,m5(t),"#define SHADER_NAME "+t.shaderName,C,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+_:"",t.envMap?"#define "+v:"",b?"#define CUBEUV_TEXEL_WIDTH "+b.texelWidth:"",b?"#define CUBEUV_TEXEL_HEIGHT "+b.texelHeight:"",b?"#define CUBEUV_MAX_MIP "+b.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Qg?"#define TONE_MAPPING":"",t.toneMapping!==Qg?ds.tonemapping_pars_fragment:"",t.toneMapping!==Qg?STe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ds.encodings_pars_fragment,TTe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ew).join(`
`)),l=nN(l),l=d5(l,t),l=p5(l,t),u=nN(u),u=d5(u,t),u=p5(u,t),l=f5(l),u=f5(u),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(O=`#version 300 es
`,I=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+I,L=["#define varying in",t.glslVersion===ZD?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ZD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+L);const P=O+I+l,B=O+L+u,z=c5(s,35633,P),G=c5(s,35632,B);if(s.attachShader(M,z),s.attachShader(M,G),t.index0AttributeName!==void 0?s.bindAttribLocation(M,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(M,0,"position"),s.linkProgram(M),n.debug.checkShaderErrors){const Z=s.getProgramInfoLog(M).trim(),ae=s.getShaderInfoLog(z).trim(),J=s.getShaderInfoLog(G).trim();let te=!0,he=!0;if(s.getProgramParameter(M,35714)===!1){te=!1;const le=h5(s,z,"vertex"),ce=h5(s,G,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(M,35715)+`

Program Info Log: `+Z+`
`+le+`
`+ce)}else Z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Z):(ae===""||J==="")&&(he=!1);he&&(this.diagnostics={runnable:te,programLog:Z,vertexShader:{log:ae,prefix:I},fragmentShader:{log:J,prefix:L}})}s.deleteShader(z),s.deleteShader(G);let j;this.getUniforms=function(){return j===void 0&&(j=new EA(s,M)),j};let H;return this.getAttributes=function(){return H===void 0&&(H=wTe(s,M)),H},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(M),this.program=void 0},this.name=t.shaderName,this.id=yTe++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=z,this.fragmentShader=G,this}let BTe=0;class PTe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),o=this._getShaderStage(i),l=this._getShaderCacheForMaterial(e);return l.has(s)===!1&&(l.add(s),s.usedTimes++),l.has(o)===!1&&(l.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const i=new FTe(e);t.set(e,i)}return t.get(e)}}class FTe{constructor(e){this.id=BTe++,this.code=e,this.usedTimes=0}}function zTe(n,e,t,i,s,o,l){const u=new m1,d=new PTe,p=[],_=s.isWebGL2,v=s.logarithmicDepthBuffer,b=s.vertexTextures;let E=s.precision;const C={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(H,Z,ae,J,te){const he=J.fog,le=te.geometry,ce=H.isMeshStandardMaterial?J.environment:null,be=(H.isMeshStandardMaterial?t:e).get(H.envMap||ce),$e=be&&be.mapping===NE?be.image.height:null,q=C[H.type];H.precision!==null&&(E=s.getMaxPrecision(H.precision),E!==H.precision&&console.warn("THREE.WebGLProgram.getParameters:",H.precision,"not supported, using",E,"instead."));const oe=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,se=oe!==void 0?oe.length:0;let pe=0;le.morphAttributes.position!==void 0&&(pe=1),le.morphAttributes.normal!==void 0&&(pe=2),le.morphAttributes.color!==void 0&&(pe=3);let Se,Fe,Re,qe;if(q){const dt=ef[q];Se=dt.vertexShader,Fe=dt.fragmentShader}else Se=H.vertexShader,Fe=H.fragmentShader,d.update(H),Re=d.getVertexShaderID(H),qe=d.getFragmentShaderID(H);const Ne=n.getRenderTarget(),it=H.alphaTest>0,st=H.clearcoat>0,pt=H.iridescence>0;return{isWebGL2:_,shaderID:q,shaderName:H.type,vertexShader:Se,fragmentShader:Fe,defines:H.defines,customVertexShaderID:Re,customFragmentShaderID:qe,isRawShaderMaterial:H.isRawShaderMaterial===!0,glslVersion:H.glslVersion,precision:E,instancing:te.isInstancedMesh===!0,instancingColor:te.isInstancedMesh===!0&&te.instanceColor!==null,supportsVertexTextures:b,outputEncoding:Ne===null?n.outputEncoding:Ne.isXRRenderTarget===!0?Ne.texture.encoding:mg,map:!!H.map,matcap:!!H.matcap,envMap:!!be,envMapMode:be&&be.mapping,envMapCubeUVHeight:$e,lightMap:!!H.lightMap,aoMap:!!H.aoMap,emissiveMap:!!H.emissiveMap,bumpMap:!!H.bumpMap,normalMap:!!H.normalMap,objectSpaceNormalMap:H.normalMapType===iK,tangentSpaceNormalMap:H.normalMapType===z1,decodeVideoTexture:!!H.map&&H.map.isVideoTexture===!0&&H.map.encoding===ps,clearcoat:st,clearcoatMap:st&&!!H.clearcoatMap,clearcoatRoughnessMap:st&&!!H.clearcoatRoughnessMap,clearcoatNormalMap:st&&!!H.clearcoatNormalMap,iridescence:pt,iridescenceMap:pt&&!!H.iridescenceMap,iridescenceThicknessMap:pt&&!!H.iridescenceThicknessMap,displacementMap:!!H.displacementMap,roughnessMap:!!H.roughnessMap,metalnessMap:!!H.metalnessMap,specularMap:!!H.specularMap,specularIntensityMap:!!H.specularIntensityMap,specularColorMap:!!H.specularColorMap,opaque:H.transparent===!1&&H.blending===ny,alphaMap:!!H.alphaMap,alphaTest:it,gradientMap:!!H.gradientMap,sheen:H.sheen>0,sheenColorMap:!!H.sheenColorMap,sheenRoughnessMap:!!H.sheenRoughnessMap,transmission:H.transmission>0,transmissionMap:!!H.transmissionMap,thicknessMap:!!H.thicknessMap,combine:H.combine,vertexTangents:!!H.normalMap&&!!le.attributes.tangent,vertexColors:H.vertexColors,vertexAlphas:H.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,vertexUvs:!!H.map||!!H.bumpMap||!!H.normalMap||!!H.specularMap||!!H.alphaMap||!!H.emissiveMap||!!H.roughnessMap||!!H.metalnessMap||!!H.clearcoatMap||!!H.clearcoatRoughnessMap||!!H.clearcoatNormalMap||!!H.iridescenceMap||!!H.iridescenceThicknessMap||!!H.displacementMap||!!H.transmissionMap||!!H.thicknessMap||!!H.specularIntensityMap||!!H.specularColorMap||!!H.sheenColorMap||!!H.sheenRoughnessMap,uvsVertexOnly:!(H.map||H.bumpMap||H.normalMap||H.specularMap||H.alphaMap||H.emissiveMap||H.roughnessMap||H.metalnessMap||H.clearcoatNormalMap||H.iridescenceMap||H.iridescenceThicknessMap||H.transmission>0||H.transmissionMap||H.thicknessMap||H.specularIntensityMap||H.specularColorMap||H.sheen>0||H.sheenColorMap||H.sheenRoughnessMap)&&!!H.displacementMap,fog:!!he,useFog:H.fog===!0,fogExp2:he&&he.isFogExp2,flatShading:!!H.flatShading,sizeAttenuation:H.sizeAttenuation,logarithmicDepthBuffer:v,skinning:te.isSkinnedMesh===!0,morphTargets:le.morphAttributes.position!==void 0,morphNormals:le.morphAttributes.normal!==void 0,morphColors:le.morphAttributes.color!==void 0,morphTargetsCount:se,morphTextureStride:pe,numDirLights:Z.directional.length,numPointLights:Z.point.length,numSpotLights:Z.spot.length,numRectAreaLights:Z.rectArea.length,numHemiLights:Z.hemi.length,numDirLightShadows:Z.directionalShadowMap.length,numPointLightShadows:Z.pointShadowMap.length,numSpotLightShadows:Z.spotShadowMap.length,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:H.dithering,shadowMapEnabled:n.shadowMap.enabled&&ae.length>0,shadowMapType:n.shadowMap.type,toneMapping:H.toneMapped?n.toneMapping:Qg,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:H.premultipliedAlpha,doubleSided:H.side===nf,flipSided:H.side===sd,useDepthPacking:!!H.depthPacking,depthPacking:H.depthPacking||0,index0AttributeName:H.index0AttributeName,extensionDerivatives:H.extensions&&H.extensions.derivatives,extensionFragDepth:H.extensions&&H.extensions.fragDepth,extensionDrawBuffers:H.extensions&&H.extensions.drawBuffers,extensionShaderTextureLOD:H.extensions&&H.extensions.shaderTextureLOD,rendererExtensionFragDepth:_||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:_||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:_||i.has("EXT_shader_texture_lod"),customProgramCacheKey:H.customProgramCacheKey()}}function I(H){const Z=[];if(H.shaderID?Z.push(H.shaderID):(Z.push(H.customVertexShaderID),Z.push(H.customFragmentShaderID)),H.defines!==void 0)for(const ae in H.defines)Z.push(ae),Z.push(H.defines[ae]);return H.isRawShaderMaterial===!1&&(L(Z,H),O(Z,H),Z.push(n.outputEncoding)),Z.push(H.customProgramCacheKey),Z.join()}function L(H,Z){H.push(Z.precision),H.push(Z.outputEncoding),H.push(Z.envMapMode),H.push(Z.envMapCubeUVHeight),H.push(Z.combine),H.push(Z.vertexUvs),H.push(Z.fogExp2),H.push(Z.sizeAttenuation),H.push(Z.morphTargetsCount),H.push(Z.morphAttributeCount),H.push(Z.numDirLights),H.push(Z.numPointLights),H.push(Z.numSpotLights),H.push(Z.numHemiLights),H.push(Z.numRectAreaLights),H.push(Z.numDirLightShadows),H.push(Z.numPointLightShadows),H.push(Z.numSpotLightShadows),H.push(Z.shadowMapType),H.push(Z.toneMapping),H.push(Z.numClippingPlanes),H.push(Z.numClipIntersection),H.push(Z.depthPacking)}function O(H,Z){u.disableAll(),Z.isWebGL2&&u.enable(0),Z.supportsVertexTextures&&u.enable(1),Z.instancing&&u.enable(2),Z.instancingColor&&u.enable(3),Z.map&&u.enable(4),Z.matcap&&u.enable(5),Z.envMap&&u.enable(6),Z.lightMap&&u.enable(7),Z.aoMap&&u.enable(8),Z.emissiveMap&&u.enable(9),Z.bumpMap&&u.enable(10),Z.normalMap&&u.enable(11),Z.objectSpaceNormalMap&&u.enable(12),Z.tangentSpaceNormalMap&&u.enable(13),Z.clearcoat&&u.enable(14),Z.clearcoatMap&&u.enable(15),Z.clearcoatRoughnessMap&&u.enable(16),Z.clearcoatNormalMap&&u.enable(17),Z.iridescence&&u.enable(18),Z.iridescenceMap&&u.enable(19),Z.iridescenceThicknessMap&&u.enable(20),Z.displacementMap&&u.enable(21),Z.specularMap&&u.enable(22),Z.roughnessMap&&u.enable(23),Z.metalnessMap&&u.enable(24),Z.gradientMap&&u.enable(25),Z.alphaMap&&u.enable(26),Z.alphaTest&&u.enable(27),Z.vertexColors&&u.enable(28),Z.vertexAlphas&&u.enable(29),Z.vertexUvs&&u.enable(30),Z.vertexTangents&&u.enable(31),Z.uvsVertexOnly&&u.enable(32),Z.fog&&u.enable(33),H.push(u.mask),u.disableAll(),Z.useFog&&u.enable(0),Z.flatShading&&u.enable(1),Z.logarithmicDepthBuffer&&u.enable(2),Z.skinning&&u.enable(3),Z.morphTargets&&u.enable(4),Z.morphNormals&&u.enable(5),Z.morphColors&&u.enable(6),Z.premultipliedAlpha&&u.enable(7),Z.shadowMapEnabled&&u.enable(8),Z.physicallyCorrectLights&&u.enable(9),Z.doubleSided&&u.enable(10),Z.flipSided&&u.enable(11),Z.useDepthPacking&&u.enable(12),Z.dithering&&u.enable(13),Z.specularIntensityMap&&u.enable(14),Z.specularColorMap&&u.enable(15),Z.transmission&&u.enable(16),Z.transmissionMap&&u.enable(17),Z.thicknessMap&&u.enable(18),Z.sheen&&u.enable(19),Z.sheenColorMap&&u.enable(20),Z.sheenRoughnessMap&&u.enable(21),Z.decodeVideoTexture&&u.enable(22),Z.opaque&&u.enable(23),H.push(u.mask)}function P(H){const Z=C[H.type];let ae;if(Z){const J=ef[Z];ae=z$.clone(J.uniforms)}else ae=H.uniforms;return ae}function B(H,Z){let ae;for(let J=0,te=p.length;J<te;J++){const he=p[J];if(he.cacheKey===Z){ae=he,++ae.usedTimes;break}}return ae===void 0&&(ae=new NTe(n,Z,H,o),p.push(ae)),ae}function z(H){if(--H.usedTimes===0){const Z=p.indexOf(H);p[Z]=p[p.length-1],p.pop(),H.destroy()}}function G(H){d.remove(H)}function j(){d.dispose()}return{getParameters:M,getProgramCacheKey:I,getUniforms:P,acquireProgram:B,releaseProgram:z,releaseShaderCache:G,programs:p,dispose:j}}function UTe(){let n=new WeakMap;function e(o){let l=n.get(o);return l===void 0&&(l={},n.set(o,l)),l}function t(o){n.delete(o)}function i(o,l,u){n.get(o)[l]=u}function s(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:s}}function HTe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function g5(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function _5(){const n=[];let e=0;const t=[],i=[],s=[];function o(){e=0,t.length=0,i.length=0,s.length=0}function l(v,b,E,C,M,I){let L=n[e];return L===void 0?(L={id:v.id,object:v,geometry:b,material:E,groupOrder:C,renderOrder:v.renderOrder,z:M,group:I},n[e]=L):(L.id=v.id,L.object=v,L.geometry=b,L.material=E,L.groupOrder=C,L.renderOrder=v.renderOrder,L.z=M,L.group=I),e++,L}function u(v,b,E,C,M,I){const L=l(v,b,E,C,M,I);E.transmission>0?i.push(L):E.transparent===!0?s.push(L):t.push(L)}function d(v,b,E,C,M,I){const L=l(v,b,E,C,M,I);E.transmission>0?i.unshift(L):E.transparent===!0?s.unshift(L):t.unshift(L)}function p(v,b){t.length>1&&t.sort(v||HTe),i.length>1&&i.sort(b||g5),s.length>1&&s.sort(b||g5)}function _(){for(let v=e,b=n.length;v<b;v++){const E=n[v];if(E.id===null)break;E.id=null,E.object=null,E.geometry=null,E.material=null,E.group=null}}return{opaque:t,transmissive:i,transparent:s,init:o,push:u,unshift:d,finish:_,sort:p}}function GTe(){let n=new WeakMap;function e(i,s){let o;return n.has(i)===!1?(o=new _5,n.set(i,[o])):s>=n.get(i).length?(o=new _5,n.get(i).push(o)):o=n.get(i)[s],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function WTe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Me,color:new Nn};break;case"SpotLight":t={position:new Me,direction:new Me,color:new Nn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Me,color:new Nn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Me,skyColor:new Nn,groundColor:new Nn};break;case"RectAreaLight":t={color:new Nn,position:new Me,halfWidth:new Me,halfHeight:new Me};break}return n[e.id]=t,t}}}function VTe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let jTe=0;function XTe(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function YTe(n,e){const t=new WTe,i=VTe(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let _=0;_<9;_++)s.probe.push(new Me);const o=new Me,l=new qr,u=new qr;function d(_,v){let b=0,E=0,C=0;for(let Z=0;Z<9;Z++)s.probe[Z].set(0,0,0);let M=0,I=0,L=0,O=0,P=0,B=0,z=0,G=0;_.sort(XTe);const j=v!==!0?Math.PI:1;for(let Z=0,ae=_.length;Z<ae;Z++){const J=_[Z],te=J.color,he=J.intensity,le=J.distance,ce=J.shadow&&J.shadow.map?J.shadow.map.texture:null;if(J.isAmbientLight)b+=te.r*he*j,E+=te.g*he*j,C+=te.b*he*j;else if(J.isLightProbe)for(let be=0;be<9;be++)s.probe[be].addScaledVector(J.sh.coefficients[be],he);else if(J.isDirectionalLight){const be=t.get(J);if(be.color.copy(J.color).multiplyScalar(J.intensity*j),J.castShadow){const $e=J.shadow,q=i.get(J);q.shadowBias=$e.bias,q.shadowNormalBias=$e.normalBias,q.shadowRadius=$e.radius,q.shadowMapSize=$e.mapSize,s.directionalShadow[M]=q,s.directionalShadowMap[M]=ce,s.directionalShadowMatrix[M]=J.shadow.matrix,B++}s.directional[M]=be,M++}else if(J.isSpotLight){const be=t.get(J);if(be.position.setFromMatrixPosition(J.matrixWorld),be.color.copy(te).multiplyScalar(he*j),be.distance=le,be.coneCos=Math.cos(J.angle),be.penumbraCos=Math.cos(J.angle*(1-J.penumbra)),be.decay=J.decay,J.castShadow){const $e=J.shadow,q=i.get(J);q.shadowBias=$e.bias,q.shadowNormalBias=$e.normalBias,q.shadowRadius=$e.radius,q.shadowMapSize=$e.mapSize,s.spotShadow[L]=q,s.spotShadowMap[L]=ce,s.spotShadowMatrix[L]=J.shadow.matrix,G++}s.spot[L]=be,L++}else if(J.isRectAreaLight){const be=t.get(J);be.color.copy(te).multiplyScalar(he),be.halfWidth.set(J.width*.5,0,0),be.halfHeight.set(0,J.height*.5,0),s.rectArea[O]=be,O++}else if(J.isPointLight){const be=t.get(J);if(be.color.copy(J.color).multiplyScalar(J.intensity*j),be.distance=J.distance,be.decay=J.decay,J.castShadow){const $e=J.shadow,q=i.get(J);q.shadowBias=$e.bias,q.shadowNormalBias=$e.normalBias,q.shadowRadius=$e.radius,q.shadowMapSize=$e.mapSize,q.shadowCameraNear=$e.camera.near,q.shadowCameraFar=$e.camera.far,s.pointShadow[I]=q,s.pointShadowMap[I]=ce,s.pointShadowMatrix[I]=J.shadow.matrix,z++}s.point[I]=be,I++}else if(J.isHemisphereLight){const be=t.get(J);be.skyColor.copy(J.color).multiplyScalar(he*j),be.groundColor.copy(J.groundColor).multiplyScalar(he*j),s.hemi[P]=be,P++}}O>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=Vn.LTC_FLOAT_1,s.rectAreaLTC2=Vn.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(s.rectAreaLTC1=Vn.LTC_HALF_1,s.rectAreaLTC2=Vn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=b,s.ambient[1]=E,s.ambient[2]=C;const H=s.hash;(H.directionalLength!==M||H.pointLength!==I||H.spotLength!==L||H.rectAreaLength!==O||H.hemiLength!==P||H.numDirectionalShadows!==B||H.numPointShadows!==z||H.numSpotShadows!==G)&&(s.directional.length=M,s.spot.length=L,s.rectArea.length=O,s.point.length=I,s.hemi.length=P,s.directionalShadow.length=B,s.directionalShadowMap.length=B,s.pointShadow.length=z,s.pointShadowMap.length=z,s.spotShadow.length=G,s.spotShadowMap.length=G,s.directionalShadowMatrix.length=B,s.pointShadowMatrix.length=z,s.spotShadowMatrix.length=G,H.directionalLength=M,H.pointLength=I,H.spotLength=L,H.rectAreaLength=O,H.hemiLength=P,H.numDirectionalShadows=B,H.numPointShadows=z,H.numSpotShadows=G,s.version=jTe++)}function p(_,v){let b=0,E=0,C=0,M=0,I=0;const L=v.matrixWorldInverse;for(let O=0,P=_.length;O<P;O++){const B=_[O];if(B.isDirectionalLight){const z=s.directional[b];z.direction.setFromMatrixPosition(B.matrixWorld),o.setFromMatrixPosition(B.target.matrixWorld),z.direction.sub(o),z.direction.transformDirection(L),b++}else if(B.isSpotLight){const z=s.spot[C];z.position.setFromMatrixPosition(B.matrixWorld),z.position.applyMatrix4(L),z.direction.setFromMatrixPosition(B.matrixWorld),o.setFromMatrixPosition(B.target.matrixWorld),z.direction.sub(o),z.direction.transformDirection(L),C++}else if(B.isRectAreaLight){const z=s.rectArea[M];z.position.setFromMatrixPosition(B.matrixWorld),z.position.applyMatrix4(L),u.identity(),l.copy(B.matrixWorld),l.premultiply(L),u.extractRotation(l),z.halfWidth.set(B.width*.5,0,0),z.halfHeight.set(0,B.height*.5,0),z.halfWidth.applyMatrix4(u),z.halfHeight.applyMatrix4(u),M++}else if(B.isPointLight){const z=s.point[E];z.position.setFromMatrixPosition(B.matrixWorld),z.position.applyMatrix4(L),E++}else if(B.isHemisphereLight){const z=s.hemi[I];z.direction.setFromMatrixPosition(B.matrixWorld),z.direction.transformDirection(L),I++}}}return{setup:d,setupView:p,state:s}}function y5(n,e){const t=new YTe(n,e),i=[],s=[];function o(){i.length=0,s.length=0}function l(_){i.push(_)}function u(_){s.push(_)}function d(_){t.setup(i,_)}function p(_){t.setupView(i,_)}return{init:o,state:{lightsArray:i,shadowsArray:s,lights:t},setupLights:d,setupLightsView:p,pushLight:l,pushShadow:u}}function KTe(n,e){let t=new WeakMap;function i(o,l=0){let u;return t.has(o)===!1?(u=new y5(n,e),t.set(o,[u])):l>=t.get(o).length?(u=new y5(n,e),t.get(o).push(u)):u=t.get(o)[l],u}function s(){t=new WeakMap}return{get:i,dispose:s}}class H$ extends od{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Nv,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class KR extends od{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Me,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const JTe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,qTe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function QTe(n,e,t){let i=new XR;const s=new Vt,o=new Vt,l=new vs,u=new H$({depthPacking:lE}),d=new KR,p={},_=t.maxTextureSize,v={0:sd,1:e_,2:nf},b=new bd({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vt},radius:{value:4}},vertexShader:JTe,fragmentShader:qTe}),E=b.clone();E.defines.HORIZONTAL_PASS=1;const C=new ai;C.setAttribute("position",new Do(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new Fn(C,b),I=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=UR,this.render=function(B,z,G){if(I.enabled===!1||I.autoUpdate===!1&&I.needsUpdate===!1||B.length===0)return;const j=n.getRenderTarget(),H=n.getActiveCubeFace(),Z=n.getActiveMipmapLevel(),ae=n.state;ae.setBlending(lf),ae.buffers.color.setClear(1,1,1,1),ae.buffers.depth.setTest(!0),ae.setScissorTest(!1);for(let J=0,te=B.length;J<te;J++){const he=B[J],le=he.shadow;if(le===void 0){console.warn("THREE.WebGLShadowMap:",he,"has no shadow.");continue}if(le.autoUpdate===!1&&le.needsUpdate===!1)continue;s.copy(le.mapSize);const ce=le.getFrameExtents();if(s.multiply(ce),o.copy(le.mapSize),(s.x>_||s.y>_)&&(s.x>_&&(o.x=Math.floor(_/ce.x),s.x=o.x*ce.x,le.mapSize.x=o.x),s.y>_&&(o.y=Math.floor(_/ce.y),s.y=o.y*ce.y,le.mapSize.y=o.y)),le.map===null){const $e=this.type!==n1?{minFilter:Ul,magFilter:Ul}:{};le.map=new Ic(s.x,s.y,$e),le.map.texture.name=he.name+".shadowMap",le.camera.updateProjectionMatrix()}n.setRenderTarget(le.map),n.clear();const be=le.getViewportCount();for(let $e=0;$e<be;$e++){const q=le.getViewport($e);l.set(o.x*q.x,o.y*q.y,o.x*q.z,o.y*q.w),ae.viewport(l),le.updateMatrices(he,$e),i=le.getFrustum(),P(z,G,le.camera,he,this.type)}le.isPointLightShadow!==!0&&this.type===n1&&L(le,G),le.needsUpdate=!1}I.needsUpdate=!1,n.setRenderTarget(j,H,Z)};function L(B,z){const G=e.update(M);b.defines.VSM_SAMPLES!==B.blurSamples&&(b.defines.VSM_SAMPLES=B.blurSamples,E.defines.VSM_SAMPLES=B.blurSamples,b.needsUpdate=!0,E.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new Ic(s.x,s.y)),b.uniforms.shadow_pass.value=B.map.texture,b.uniforms.resolution.value=B.mapSize,b.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(z,null,G,b,M,null),E.uniforms.shadow_pass.value=B.mapPass.texture,E.uniforms.resolution.value=B.mapSize,E.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(z,null,G,E,M,null)}function O(B,z,G,j,H,Z){let ae=null;const J=G.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(J!==void 0?ae=J:ae=G.isPointLight===!0?d:u,n.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0){const te=ae.uuid,he=z.uuid;let le=p[te];le===void 0&&(le={},p[te]=le);let ce=le[he];ce===void 0&&(ce=ae.clone(),le[he]=ce),ae=ce}return ae.visible=z.visible,ae.wireframe=z.wireframe,Z===n1?ae.side=z.shadowSide!==null?z.shadowSide:z.side:ae.side=z.shadowSide!==null?z.shadowSide:v[z.side],ae.alphaMap=z.alphaMap,ae.alphaTest=z.alphaTest,ae.clipShadows=z.clipShadows,ae.clippingPlanes=z.clippingPlanes,ae.clipIntersection=z.clipIntersection,ae.displacementMap=z.displacementMap,ae.displacementScale=z.displacementScale,ae.displacementBias=z.displacementBias,ae.wireframeLinewidth=z.wireframeLinewidth,ae.linewidth=z.linewidth,G.isPointLight===!0&&ae.isMeshDistanceMaterial===!0&&(ae.referencePosition.setFromMatrixPosition(G.matrixWorld),ae.nearDistance=j,ae.farDistance=H),ae}function P(B,z,G,j,H){if(B.visible===!1)return;if(B.layers.test(z.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&H===n1)&&(!B.frustumCulled||i.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,B.matrixWorld);const ae=e.update(B),J=B.material;if(Array.isArray(J)){const te=ae.groups;for(let he=0,le=te.length;he<le;he++){const ce=te[he],be=J[ce.materialIndex];if(be&&be.visible){const $e=O(B,be,j,G.near,G.far,H);n.renderBufferDirect(G,null,ae,$e,B,ce)}}}else if(J.visible){const te=O(B,J,j,G.near,G.far,H);n.renderBufferDirect(G,null,ae,te,B,null)}}const Z=B.children;for(let ae=0,J=Z.length;ae<J;ae++)P(Z[ae],z,G,j,H)}}function ZTe(n,e,t){const i=t.isWebGL2;function s(){let He=!1;const Zt=new vs;let _t=null;const Kt=new vs(0,0,0,0);return{setMask:function(Yt){_t!==Yt&&!He&&(n.colorMask(Yt,Yt,Yt,Yt),_t=Yt)},setLocked:function(Yt){He=Yt},setClear:function(Yt,Rn,ii,Dr,Si){Si===!0&&(Yt*=Dr,Rn*=Dr,ii*=Dr),Zt.set(Yt,Rn,ii,Dr),Kt.equals(Zt)===!1&&(n.clearColor(Yt,Rn,ii,Dr),Kt.copy(Zt))},reset:function(){He=!1,_t=null,Kt.set(-1,0,0,0)}}}function o(){let He=!1,Zt=null,_t=null,Kt=null;return{setTest:function(Yt){Yt?it(2929):st(2929)},setMask:function(Yt){Zt!==Yt&&!He&&(n.depthMask(Yt),Zt=Yt)},setFunc:function(Yt){if(_t!==Yt){if(Yt)switch(Yt){case CY:n.depthFunc(512);break;case MY:n.depthFunc(519);break;case AY:n.depthFunc(513);break;case mI:n.depthFunc(515);break;case IY:n.depthFunc(514);break;case RY:n.depthFunc(518);break;case kY:n.depthFunc(516);break;case OY:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);_t=Yt}},setLocked:function(Yt){He=Yt},setClear:function(Yt){Kt!==Yt&&(n.clearDepth(Yt),Kt=Yt)},reset:function(){He=!1,Zt=null,_t=null,Kt=null}}}function l(){let He=!1,Zt=null,_t=null,Kt=null,Yt=null,Rn=null,ii=null,Dr=null,Si=null;return{setTest:function(xr){He||(xr?it(2960):st(2960))},setMask:function(xr){Zt!==xr&&!He&&(n.stencilMask(xr),Zt=xr)},setFunc:function(xr,fr,re){(_t!==xr||Kt!==fr||Yt!==re)&&(n.stencilFunc(xr,fr,re),_t=xr,Kt=fr,Yt=re)},setOp:function(xr,fr,re){(Rn!==xr||ii!==fr||Dr!==re)&&(n.stencilOp(xr,fr,re),Rn=xr,ii=fr,Dr=re)},setLocked:function(xr){He=xr},setClear:function(xr){Si!==xr&&(n.clearStencil(xr),Si=xr)},reset:function(){He=!1,Zt=null,_t=null,Kt=null,Yt=null,Rn=null,ii=null,Dr=null,Si=null}}}const u=new s,d=new o,p=new l,_=new WeakMap,v=new WeakMap;let b={},E={},C=new WeakMap,M=[],I=null,L=!1,O=null,P=null,B=null,z=null,G=null,j=null,H=null,Z=!1,ae=null,J=null,te=null,he=null,le=null;const ce=n.getParameter(35661);let be=!1,$e=0;const q=n.getParameter(7938);q.indexOf("WebGL")!==-1?($e=parseFloat(/^WebGL (\d)/.exec(q)[1]),be=$e>=1):q.indexOf("OpenGL ES")!==-1&&($e=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),be=$e>=2);let oe=null,se={};const pe=n.getParameter(3088),Se=n.getParameter(2978),Fe=new vs().fromArray(pe),Re=new vs().fromArray(Se);function qe(He,Zt,_t){const Kt=new Uint8Array(4),Yt=n.createTexture();n.bindTexture(He,Yt),n.texParameteri(He,10241,9728),n.texParameteri(He,10240,9728);for(let Rn=0;Rn<_t;Rn++)n.texImage2D(Zt+Rn,0,6408,1,1,0,6408,5121,Kt);return Yt}const Ne={};Ne[3553]=qe(3553,3553,1),Ne[34067]=qe(34067,34069,6),u.setClear(0,0,0,1),d.setClear(1),p.setClear(0),it(2929),d.setFunc(mI),Dt(!1),Rt(CD),it(2884),nt(lf);function it(He){b[He]!==!0&&(n.enable(He),b[He]=!0)}function st(He){b[He]!==!1&&(n.disable(He),b[He]=!1)}function pt(He,Zt){return E[He]!==Zt?(n.bindFramebuffer(He,Zt),E[He]=Zt,i&&(He===36009&&(E[36160]=Zt),He===36160&&(E[36009]=Zt)),!0):!1}function dt(He,Zt){let _t=M,Kt=!1;if(He)if(_t=C.get(Zt),_t===void 0&&(_t=[],C.set(Zt,_t)),He.isWebGLMultipleRenderTargets){const Yt=He.texture;if(_t.length!==Yt.length||_t[0]!==36064){for(let Rn=0,ii=Yt.length;Rn<ii;Rn++)_t[Rn]=36064+Rn;_t.length=Yt.length,Kt=!0}}else _t[0]!==36064&&(_t[0]=36064,Kt=!0);else _t[0]!==1029&&(_t[0]=1029,Kt=!0);Kt&&(t.isWebGL2?n.drawBuffers(_t):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(_t))}function Ue(He){return I!==He?(n.useProgram(He),I=He,!0):!1}const Ae={[jb]:32774,[_Y]:32778,[CP]:32779};if(i)Ae[ID]=32775,Ae[RD]=32776;else{const He=e.get("EXT_blend_minmax");He!==null&&(Ae[ID]=He.MIN_EXT,Ae[RD]=He.MAX_EXT)}const je={[yY]:0,[vY]:1,[bY]:768,[HR]:770,[$Y]:776,[xY]:774,[SY]:772,[TY]:769,[GR]:771,[wY]:775,[EY]:773};function nt(He,Zt,_t,Kt,Yt,Rn,ii,Dr){if(He===lf){L===!0&&(st(3042),L=!1);return}if(L===!1&&(it(3042),L=!0),He!==gY){if(He!==O||Dr!==Z){if((P!==jb||G!==jb)&&(n.blendEquation(32774),P=jb,G=jb),Dr)switch(He){case ny:n.blendFuncSeparate(1,771,1,771);break;case fI:n.blendFunc(1,1);break;case MD:n.blendFuncSeparate(0,769,0,1);break;case AD:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",He);break}else switch(He){case ny:n.blendFuncSeparate(770,771,1,771);break;case fI:n.blendFunc(770,1);break;case MD:n.blendFuncSeparate(0,769,0,1);break;case AD:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",He);break}B=null,z=null,j=null,H=null,O=He,Z=Dr}return}Yt=Yt||Zt,Rn=Rn||_t,ii=ii||Kt,(Zt!==P||Yt!==G)&&(n.blendEquationSeparate(Ae[Zt],Ae[Yt]),P=Zt,G=Yt),(_t!==B||Kt!==z||Rn!==j||ii!==H)&&(n.blendFuncSeparate(je[_t],je[Kt],je[Rn],je[ii]),B=_t,z=Kt,j=Rn,H=ii),O=He,Z=null}function tt(He,Zt){He.side===nf?st(2884):it(2884);let _t=He.side===sd;Zt&&(_t=!_t),Dt(_t),He.blending===ny&&He.transparent===!1?nt(lf):nt(He.blending,He.blendEquation,He.blendSrc,He.blendDst,He.blendEquationAlpha,He.blendSrcAlpha,He.blendDstAlpha,He.premultipliedAlpha),d.setFunc(He.depthFunc),d.setTest(He.depthTest),d.setMask(He.depthWrite),u.setMask(He.colorWrite);const Kt=He.stencilWrite;p.setTest(Kt),Kt&&(p.setMask(He.stencilWriteMask),p.setFunc(He.stencilFunc,He.stencilRef,He.stencilFuncMask),p.setOp(He.stencilFail,He.stencilZFail,He.stencilZPass)),Ct(He.polygonOffset,He.polygonOffsetFactor,He.polygonOffsetUnits),He.alphaToCoverage===!0?it(32926):st(32926)}function Dt(He){ae!==He&&(He?n.frontFace(2304):n.frontFace(2305),ae=He)}function Rt(He){He!==dY?(it(2884),He!==J&&(He===CD?n.cullFace(1029):He===pY?n.cullFace(1028):n.cullFace(1032))):st(2884),J=He}function yt(He){He!==te&&(be&&n.lineWidth(He),te=He)}function Ct(He,Zt,_t){He?(it(32823),(he!==Zt||le!==_t)&&(n.polygonOffset(Zt,_t),he=Zt,le=_t)):st(32823)}function Mt(He){He?it(3089):st(3089)}function mt(He){He===void 0&&(He=33984+ce-1),oe!==He&&(n.activeTexture(He),oe=He)}function xe(He,Zt){oe===null&&mt();let _t=se[oe];_t===void 0&&(_t={type:void 0,texture:void 0},se[oe]=_t),(_t.type!==He||_t.texture!==Zt)&&(n.bindTexture(He,Zt||Ne[He]),_t.type=He,_t.texture=Zt)}function ie(){const He=se[oe];He!==void 0&&He.type!==void 0&&(n.bindTexture(He.type,null),He.type=void 0,He.texture=void 0)}function we(){try{n.compressedTexImage2D.apply(n,arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function ct(){try{n.texSubImage2D.apply(n,arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function Tt(){try{n.texSubImage3D.apply(n,arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function At(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function ft(){try{n.texStorage2D.apply(n,arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function Ke(){try{n.texStorage3D.apply(n,arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function Oe(){try{n.texImage2D.apply(n,arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function Q(){try{n.texImage3D.apply(n,arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function ne(He){Fe.equals(He)===!1&&(n.scissor(He.x,He.y,He.z,He.w),Fe.copy(He))}function fe(He){Re.equals(He)===!1&&(n.viewport(He.x,He.y,He.z,He.w),Re.copy(He))}function Ie(He,Zt){let _t=v.get(Zt);_t===void 0&&(_t=new WeakMap,v.set(Zt,_t));let Kt=_t.get(He);Kt===void 0&&(Kt=n.getUniformBlockIndex(Zt,He.name),_t.set(He,Kt))}function Ye(He,Zt){const _t=v.get(Zt).get(He);_.get(He)!==_t&&(n.uniformBlockBinding(Zt,_t,He.__bindingPointIndex),_.set(He,_t))}function Gt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),b={},oe=null,se={},E={},C=new WeakMap,M=[],I=null,L=!1,O=null,P=null,B=null,z=null,G=null,j=null,H=null,Z=!1,ae=null,J=null,te=null,he=null,le=null,Fe.set(0,0,n.canvas.width,n.canvas.height),Re.set(0,0,n.canvas.width,n.canvas.height),u.reset(),d.reset(),p.reset()}return{buffers:{color:u,depth:d,stencil:p},enable:it,disable:st,bindFramebuffer:pt,drawBuffers:dt,useProgram:Ue,setBlending:nt,setMaterial:tt,setFlipSided:Dt,setCullFace:Rt,setLineWidth:yt,setPolygonOffset:Ct,setScissorTest:Mt,activeTexture:mt,bindTexture:xe,unbindTexture:ie,compressedTexImage2D:we,texImage2D:Oe,texImage3D:Q,updateUBOMapping:Ie,uniformBlockBinding:Ye,texStorage2D:ft,texStorage3D:Ke,texSubImage2D:ct,texSubImage3D:Tt,compressedTexSubImage2D:At,scissor:ne,viewport:fe,reset:Gt}}function eSe(n,e,t,i,s,o,l){const u=s.isWebGL2,d=s.maxTextures,p=s.maxCubemapSize,_=s.maxTextureSize,v=s.maxSamples,b=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,E=/OculusBrowser/g.test(navigator.userAgent),C=new WeakMap;let M;const I=new WeakMap;let L=!1;try{L=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function O(xe,ie){return L?new OffscreenCanvas(xe,ie):l$("canvas")}function P(xe,ie,we,ct){let Tt=1;if((xe.width>ct||xe.height>ct)&&(Tt=ct/Math.max(xe.width,xe.height)),Tt<1||ie===!0)if(typeof HTMLImageElement<"u"&&xe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&xe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&xe instanceof ImageBitmap){const At=ie?vI:Math.floor,ft=At(Tt*xe.width),Ke=At(Tt*xe.height);M===void 0&&(M=O(ft,Ke));const Oe=we?O(ft,Ke):M;return Oe.width=ft,Oe.height=Ke,Oe.getContext("2d").drawImage(xe,0,0,ft,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+ft+"x"+Ke+")."),Oe}else return"data"in xe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),xe;return xe}function B(xe){return eN(xe.width)&&eN(xe.height)}function z(xe){return u?!1:xe.wrapS!==tf||xe.wrapT!==tf||xe.minFilter!==Ul&&xe.minFilter!==bl}function G(xe,ie){return xe.generateMipmaps&&ie&&xe.minFilter!==Ul&&xe.minFilter!==bl}function j(xe){n.generateMipmap(xe)}function H(xe,ie,we,ct,Tt=!1){if(u===!1)return ie;if(xe!==null){if(n[xe]!==void 0)return n[xe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+xe+"'")}let At=ie;return ie===6403&&(we===5126&&(At=33326),we===5131&&(At=33325),we===5121&&(At=33321)),ie===33319&&(we===5126&&(At=33328),we===5131&&(At=33327),we===5121&&(At=33323)),ie===6408&&(we===5126&&(At=34836),we===5131&&(At=34842),we===5121&&(At=ct===ps&&Tt===!1?35907:32856),we===32819&&(At=32854),we===32820&&(At=32855)),(At===33325||At===33326||At===33327||At===33328||At===34842||At===34836)&&e.get("EXT_color_buffer_float"),At}function Z(xe,ie,we){return G(xe,we)===!0||xe.isFramebufferTexture&&xe.minFilter!==Ul&&xe.minFilter!==bl?Math.log2(Math.max(ie.width,ie.height))+1:xe.mipmaps!==void 0&&xe.mipmaps.length>0?xe.mipmaps.length:xe.isCompressedTexture&&Array.isArray(xe.image)?ie.mipmaps.length:1}function ae(xe){return xe===Ul||xe===gI||xe===_I?9728:9729}function J(xe){const ie=xe.target;ie.removeEventListener("dispose",J),he(ie),ie.isVideoTexture&&C.delete(ie)}function te(xe){const ie=xe.target;ie.removeEventListener("dispose",te),ce(ie)}function he(xe){const ie=i.get(xe);if(ie.__webglInit===void 0)return;const we=xe.source,ct=I.get(we);if(ct){const Tt=ct[ie.__cacheKey];Tt.usedTimes--,Tt.usedTimes===0&&le(xe),Object.keys(ct).length===0&&I.delete(we)}i.remove(xe)}function le(xe){const ie=i.get(xe);n.deleteTexture(ie.__webglTexture);const we=xe.source,ct=I.get(we);delete ct[ie.__cacheKey],l.memory.textures--}function ce(xe){const ie=xe.texture,we=i.get(xe),ct=i.get(ie);if(ct.__webglTexture!==void 0&&(n.deleteTexture(ct.__webglTexture),l.memory.textures--),xe.depthTexture&&xe.depthTexture.dispose(),xe.isWebGLCubeRenderTarget)for(let Tt=0;Tt<6;Tt++)n.deleteFramebuffer(we.__webglFramebuffer[Tt]),we.__webglDepthbuffer&&n.deleteRenderbuffer(we.__webglDepthbuffer[Tt]);else{if(n.deleteFramebuffer(we.__webglFramebuffer),we.__webglDepthbuffer&&n.deleteRenderbuffer(we.__webglDepthbuffer),we.__webglMultisampledFramebuffer&&n.deleteFramebuffer(we.__webglMultisampledFramebuffer),we.__webglColorRenderbuffer)for(let Tt=0;Tt<we.__webglColorRenderbuffer.length;Tt++)we.__webglColorRenderbuffer[Tt]&&n.deleteRenderbuffer(we.__webglColorRenderbuffer[Tt]);we.__webglDepthRenderbuffer&&n.deleteRenderbuffer(we.__webglDepthRenderbuffer)}if(xe.isWebGLMultipleRenderTargets)for(let Tt=0,At=ie.length;Tt<At;Tt++){const ft=i.get(ie[Tt]);ft.__webglTexture&&(n.deleteTexture(ft.__webglTexture),l.memory.textures--),i.remove(ie[Tt])}i.remove(ie),i.remove(xe)}let be=0;function $e(){be=0}function q(){const xe=be;return xe>=d&&console.warn("THREE.WebGLTextures: Trying to use "+xe+" texture units while this GPU supports only "+d),be+=1,xe}function oe(xe){const ie=[];return ie.push(xe.wrapS),ie.push(xe.wrapT),ie.push(xe.magFilter),ie.push(xe.minFilter),ie.push(xe.anisotropy),ie.push(xe.internalFormat),ie.push(xe.format),ie.push(xe.type),ie.push(xe.generateMipmaps),ie.push(xe.premultiplyAlpha),ie.push(xe.flipY),ie.push(xe.unpackAlignment),ie.push(xe.encoding),ie.join()}function se(xe,ie){const we=i.get(xe);if(xe.isVideoTexture&&Mt(xe),xe.isRenderTargetTexture===!1&&xe.version>0&&we.__version!==xe.version){const ct=xe.image;if(ct===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ct.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{st(we,xe,ie);return}}t.activeTexture(33984+ie),t.bindTexture(3553,we.__webglTexture)}function pe(xe,ie){const we=i.get(xe);if(xe.version>0&&we.__version!==xe.version){st(we,xe,ie);return}t.activeTexture(33984+ie),t.bindTexture(35866,we.__webglTexture)}function Se(xe,ie){const we=i.get(xe);if(xe.version>0&&we.__version!==xe.version){st(we,xe,ie);return}t.activeTexture(33984+ie),t.bindTexture(32879,we.__webglTexture)}function Fe(xe,ie){const we=i.get(xe);if(xe.version>0&&we.__version!==xe.version){pt(we,xe,ie);return}t.activeTexture(33984+ie),t.bindTexture(34067,we.__webglTexture)}const Re={[aE]:10497,[tf]:33071,[n$]:33648},qe={[Ul]:9728,[gI]:9984,[_I]:9986,[bl]:9729,[AP]:9985,[F1]:9987};function Ne(xe,ie,we){if(we?(n.texParameteri(xe,10242,Re[ie.wrapS]),n.texParameteri(xe,10243,Re[ie.wrapT]),(xe===32879||xe===35866)&&n.texParameteri(xe,32882,Re[ie.wrapR]),n.texParameteri(xe,10240,qe[ie.magFilter]),n.texParameteri(xe,10241,qe[ie.minFilter])):(n.texParameteri(xe,10242,33071),n.texParameteri(xe,10243,33071),(xe===32879||xe===35866)&&n.texParameteri(xe,32882,33071),(ie.wrapS!==tf||ie.wrapT!==tf)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(xe,10240,ae(ie.magFilter)),n.texParameteri(xe,10241,ae(ie.minFilter)),ie.minFilter!==Ul&&ie.minFilter!==bl&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ct=e.get("EXT_texture_filter_anisotropic");if(ie.type===j0&&e.has("OES_texture_float_linear")===!1||u===!1&&ie.type===M1&&e.has("OES_texture_half_float_linear")===!1)return;(ie.anisotropy>1||i.get(ie).__currentAnisotropy)&&(n.texParameterf(xe,ct.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ie.anisotropy,s.getMaxAnisotropy())),i.get(ie).__currentAnisotropy=ie.anisotropy)}}function it(xe,ie){let we=!1;xe.__webglInit===void 0&&(xe.__webglInit=!0,ie.addEventListener("dispose",J));const ct=ie.source;let Tt=I.get(ct);Tt===void 0&&(Tt={},I.set(ct,Tt));const At=oe(ie);if(At!==xe.__cacheKey){Tt[At]===void 0&&(Tt[At]={texture:n.createTexture(),usedTimes:0},l.memory.textures++,we=!0),Tt[At].usedTimes++;const ft=Tt[xe.__cacheKey];ft!==void 0&&(Tt[xe.__cacheKey].usedTimes--,ft.usedTimes===0&&le(ie)),xe.__cacheKey=At,xe.__webglTexture=Tt[At].texture}return we}function st(xe,ie,we){let ct=3553;ie.isDataArrayTexture&&(ct=35866),ie.isData3DTexture&&(ct=32879);const Tt=it(xe,ie),At=ie.source;if(t.activeTexture(33984+we),t.bindTexture(ct,xe.__webglTexture),At.version!==At.__currentVersion||Tt===!0){n.pixelStorei(37440,ie.flipY),n.pixelStorei(37441,ie.premultiplyAlpha),n.pixelStorei(3317,ie.unpackAlignment),n.pixelStorei(37443,0);const ft=z(ie)&&B(ie.image)===!1;let Ke=P(ie.image,ft,!1,_);Ke=mt(ie,Ke);const Oe=B(Ke)||u,Q=o.convert(ie.format,ie.encoding);let ne=o.convert(ie.type),fe=H(ie.internalFormat,Q,ne,ie.encoding,ie.isVideoTexture);Ne(ct,ie,Oe);let Ie;const Ye=ie.mipmaps,Gt=u&&ie.isVideoTexture!==!0,He=At.__currentVersion===void 0||Tt===!0,Zt=Z(ie,Ke,Oe);if(ie.isDepthTexture)fe=6402,u?ie.type===j0?fe=36012:ie.type===Q_?fe=33190:ie.type===vv?fe=35056:fe=33189:ie.type===j0&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ie.format===bv&&fe===6402&&ie.type!==IP&&ie.type!==Q_&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ie.type=Q_,ne=o.convert(ie.type)),ie.format===Cv&&fe===6402&&(fe=34041,ie.type!==vv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ie.type=vv,ne=o.convert(ie.type))),He&&(Gt?t.texStorage2D(3553,1,fe,Ke.width,Ke.height):t.texImage2D(3553,0,fe,Ke.width,Ke.height,0,Q,ne,null));else if(ie.isDataTexture)if(Ye.length>0&&Oe){Gt&&He&&t.texStorage2D(3553,Zt,fe,Ye[0].width,Ye[0].height);for(let _t=0,Kt=Ye.length;_t<Kt;_t++)Ie=Ye[_t],Gt?t.texSubImage2D(3553,_t,0,0,Ie.width,Ie.height,Q,ne,Ie.data):t.texImage2D(3553,_t,fe,Ie.width,Ie.height,0,Q,ne,Ie.data);ie.generateMipmaps=!1}else Gt?(He&&t.texStorage2D(3553,Zt,fe,Ke.width,Ke.height),t.texSubImage2D(3553,0,0,0,Ke.width,Ke.height,Q,ne,Ke.data)):t.texImage2D(3553,0,fe,Ke.width,Ke.height,0,Q,ne,Ke.data);else if(ie.isCompressedTexture){Gt&&He&&t.texStorage2D(3553,Zt,fe,Ye[0].width,Ye[0].height);for(let _t=0,Kt=Ye.length;_t<Kt;_t++)Ie=Ye[_t],ie.format!==Ff?Q!==null?Gt?t.compressedTexSubImage2D(3553,_t,0,0,Ie.width,Ie.height,Q,Ie.data):t.compressedTexImage2D(3553,_t,fe,Ie.width,Ie.height,0,Ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Gt?t.texSubImage2D(3553,_t,0,0,Ie.width,Ie.height,Q,ne,Ie.data):t.texImage2D(3553,_t,fe,Ie.width,Ie.height,0,Q,ne,Ie.data)}else if(ie.isDataArrayTexture)Gt?(He&&t.texStorage3D(35866,Zt,fe,Ke.width,Ke.height,Ke.depth),t.texSubImage3D(35866,0,0,0,0,Ke.width,Ke.height,Ke.depth,Q,ne,Ke.data)):t.texImage3D(35866,0,fe,Ke.width,Ke.height,Ke.depth,0,Q,ne,Ke.data);else if(ie.isData3DTexture)Gt?(He&&t.texStorage3D(32879,Zt,fe,Ke.width,Ke.height,Ke.depth),t.texSubImage3D(32879,0,0,0,0,Ke.width,Ke.height,Ke.depth,Q,ne,Ke.data)):t.texImage3D(32879,0,fe,Ke.width,Ke.height,Ke.depth,0,Q,ne,Ke.data);else if(ie.isFramebufferTexture){if(He)if(Gt)t.texStorage2D(3553,Zt,fe,Ke.width,Ke.height);else{let _t=Ke.width,Kt=Ke.height;for(let Yt=0;Yt<Zt;Yt++)t.texImage2D(3553,Yt,fe,_t,Kt,0,Q,ne,null),_t>>=1,Kt>>=1}}else if(Ye.length>0&&Oe){Gt&&He&&t.texStorage2D(3553,Zt,fe,Ye[0].width,Ye[0].height);for(let _t=0,Kt=Ye.length;_t<Kt;_t++)Ie=Ye[_t],Gt?t.texSubImage2D(3553,_t,0,0,Q,ne,Ie):t.texImage2D(3553,_t,fe,Q,ne,Ie);ie.generateMipmaps=!1}else Gt?(He&&t.texStorage2D(3553,Zt,fe,Ke.width,Ke.height),t.texSubImage2D(3553,0,0,0,Q,ne,Ke)):t.texImage2D(3553,0,fe,Q,ne,Ke);G(ie,Oe)&&j(ct),At.__currentVersion=At.version,ie.onUpdate&&ie.onUpdate(ie)}xe.__version=ie.version}function pt(xe,ie,we){if(ie.image.length!==6)return;const ct=it(xe,ie),Tt=ie.source;if(t.activeTexture(33984+we),t.bindTexture(34067,xe.__webglTexture),Tt.version!==Tt.__currentVersion||ct===!0){n.pixelStorei(37440,ie.flipY),n.pixelStorei(37441,ie.premultiplyAlpha),n.pixelStorei(3317,ie.unpackAlignment),n.pixelStorei(37443,0);const At=ie.isCompressedTexture||ie.image[0].isCompressedTexture,ft=ie.image[0]&&ie.image[0].isDataTexture,Ke=[];for(let _t=0;_t<6;_t++)!At&&!ft?Ke[_t]=P(ie.image[_t],!1,!0,p):Ke[_t]=ft?ie.image[_t].image:ie.image[_t],Ke[_t]=mt(ie,Ke[_t]);const Oe=Ke[0],Q=B(Oe)||u,ne=o.convert(ie.format,ie.encoding),fe=o.convert(ie.type),Ie=H(ie.internalFormat,ne,fe,ie.encoding),Ye=u&&ie.isVideoTexture!==!0,Gt=Tt.__currentVersion===void 0||ct===!0;let He=Z(ie,Oe,Q);Ne(34067,ie,Q);let Zt;if(At){Ye&&Gt&&t.texStorage2D(34067,He,Ie,Oe.width,Oe.height);for(let _t=0;_t<6;_t++){Zt=Ke[_t].mipmaps;for(let Kt=0;Kt<Zt.length;Kt++){const Yt=Zt[Kt];ie.format!==Ff?ne!==null?Ye?t.compressedTexSubImage2D(34069+_t,Kt,0,0,Yt.width,Yt.height,ne,Yt.data):t.compressedTexImage2D(34069+_t,Kt,Ie,Yt.width,Yt.height,0,Yt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ye?t.texSubImage2D(34069+_t,Kt,0,0,Yt.width,Yt.height,ne,fe,Yt.data):t.texImage2D(34069+_t,Kt,Ie,Yt.width,Yt.height,0,ne,fe,Yt.data)}}}else{Zt=ie.mipmaps,Ye&&Gt&&(Zt.length>0&&He++,t.texStorage2D(34067,He,Ie,Ke[0].width,Ke[0].height));for(let _t=0;_t<6;_t++)if(ft){Ye?t.texSubImage2D(34069+_t,0,0,0,Ke[_t].width,Ke[_t].height,ne,fe,Ke[_t].data):t.texImage2D(34069+_t,0,Ie,Ke[_t].width,Ke[_t].height,0,ne,fe,Ke[_t].data);for(let Kt=0;Kt<Zt.length;Kt++){const Yt=Zt[Kt].image[_t].image;Ye?t.texSubImage2D(34069+_t,Kt+1,0,0,Yt.width,Yt.height,ne,fe,Yt.data):t.texImage2D(34069+_t,Kt+1,Ie,Yt.width,Yt.height,0,ne,fe,Yt.data)}}else{Ye?t.texSubImage2D(34069+_t,0,0,0,ne,fe,Ke[_t]):t.texImage2D(34069+_t,0,Ie,ne,fe,Ke[_t]);for(let Kt=0;Kt<Zt.length;Kt++){const Yt=Zt[Kt];Ye?t.texSubImage2D(34069+_t,Kt+1,0,0,ne,fe,Yt.image[_t]):t.texImage2D(34069+_t,Kt+1,Ie,ne,fe,Yt.image[_t])}}}G(ie,Q)&&j(34067),Tt.__currentVersion=Tt.version,ie.onUpdate&&ie.onUpdate(ie)}xe.__version=ie.version}function dt(xe,ie,we,ct,Tt){const At=o.convert(we.format,we.encoding),ft=o.convert(we.type),Ke=H(we.internalFormat,At,ft,we.encoding);i.get(ie).__hasExternalTextures||(Tt===32879||Tt===35866?t.texImage3D(Tt,0,Ke,ie.width,ie.height,ie.depth,0,At,ft,null):t.texImage2D(Tt,0,Ke,ie.width,ie.height,0,At,ft,null)),t.bindFramebuffer(36160,xe),Ct(ie)?b.framebufferTexture2DMultisampleEXT(36160,ct,Tt,i.get(we).__webglTexture,0,yt(ie)):n.framebufferTexture2D(36160,ct,Tt,i.get(we).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ue(xe,ie,we){if(n.bindRenderbuffer(36161,xe),ie.depthBuffer&&!ie.stencilBuffer){let ct=33189;if(we||Ct(ie)){const Tt=ie.depthTexture;Tt&&Tt.isDepthTexture&&(Tt.type===j0?ct=36012:Tt.type===Q_&&(ct=33190));const At=yt(ie);Ct(ie)?b.renderbufferStorageMultisampleEXT(36161,At,ct,ie.width,ie.height):n.renderbufferStorageMultisample(36161,At,ct,ie.width,ie.height)}else n.renderbufferStorage(36161,ct,ie.width,ie.height);n.framebufferRenderbuffer(36160,36096,36161,xe)}else if(ie.depthBuffer&&ie.stencilBuffer){const ct=yt(ie);we&&Ct(ie)===!1?n.renderbufferStorageMultisample(36161,ct,35056,ie.width,ie.height):Ct(ie)?b.renderbufferStorageMultisampleEXT(36161,ct,35056,ie.width,ie.height):n.renderbufferStorage(36161,34041,ie.width,ie.height),n.framebufferRenderbuffer(36160,33306,36161,xe)}else{const ct=ie.isWebGLMultipleRenderTargets===!0?ie.texture:[ie.texture];for(let Tt=0;Tt<ct.length;Tt++){const At=ct[Tt],ft=o.convert(At.format,At.encoding),Ke=o.convert(At.type),Oe=H(At.internalFormat,ft,Ke,At.encoding),Q=yt(ie);we&&Ct(ie)===!1?n.renderbufferStorageMultisample(36161,Q,Oe,ie.width,ie.height):Ct(ie)?b.renderbufferStorageMultisampleEXT(36161,Q,Oe,ie.width,ie.height):n.renderbufferStorage(36161,Oe,ie.width,ie.height)}}n.bindRenderbuffer(36161,null)}function Ae(xe,ie){if(ie&&ie.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,xe),!(ie.depthTexture&&ie.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(ie.depthTexture).__webglTexture||ie.depthTexture.image.width!==ie.width||ie.depthTexture.image.height!==ie.height)&&(ie.depthTexture.image.width=ie.width,ie.depthTexture.image.height=ie.height,ie.depthTexture.needsUpdate=!0),se(ie.depthTexture,0);const we=i.get(ie.depthTexture).__webglTexture,ct=yt(ie);if(ie.depthTexture.format===bv)Ct(ie)?b.framebufferTexture2DMultisampleEXT(36160,36096,3553,we,0,ct):n.framebufferTexture2D(36160,36096,3553,we,0);else if(ie.depthTexture.format===Cv)Ct(ie)?b.framebufferTexture2DMultisampleEXT(36160,33306,3553,we,0,ct):n.framebufferTexture2D(36160,33306,3553,we,0);else throw new Error("Unknown depthTexture format")}function je(xe){const ie=i.get(xe),we=xe.isWebGLCubeRenderTarget===!0;if(xe.depthTexture&&!ie.__autoAllocateDepthBuffer){if(we)throw new Error("target.depthTexture not supported in Cube render targets");Ae(ie.__webglFramebuffer,xe)}else if(we){ie.__webglDepthbuffer=[];for(let ct=0;ct<6;ct++)t.bindFramebuffer(36160,ie.__webglFramebuffer[ct]),ie.__webglDepthbuffer[ct]=n.createRenderbuffer(),Ue(ie.__webglDepthbuffer[ct],xe,!1)}else t.bindFramebuffer(36160,ie.__webglFramebuffer),ie.__webglDepthbuffer=n.createRenderbuffer(),Ue(ie.__webglDepthbuffer,xe,!1);t.bindFramebuffer(36160,null)}function nt(xe,ie,we){const ct=i.get(xe);ie!==void 0&&dt(ct.__webglFramebuffer,xe,xe.texture,36064,3553),we!==void 0&&je(xe)}function tt(xe){const ie=xe.texture,we=i.get(xe),ct=i.get(ie);xe.addEventListener("dispose",te),xe.isWebGLMultipleRenderTargets!==!0&&(ct.__webglTexture===void 0&&(ct.__webglTexture=n.createTexture()),ct.__version=ie.version,l.memory.textures++);const Tt=xe.isWebGLCubeRenderTarget===!0,At=xe.isWebGLMultipleRenderTargets===!0,ft=B(xe)||u;if(Tt){we.__webglFramebuffer=[];for(let Ke=0;Ke<6;Ke++)we.__webglFramebuffer[Ke]=n.createFramebuffer()}else{if(we.__webglFramebuffer=n.createFramebuffer(),At)if(s.drawBuffers){const Ke=xe.texture;for(let Oe=0,Q=Ke.length;Oe<Q;Oe++){const ne=i.get(Ke[Oe]);ne.__webglTexture===void 0&&(ne.__webglTexture=n.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&xe.samples>0&&Ct(xe)===!1){const Ke=At?ie:[ie];we.__webglMultisampledFramebuffer=n.createFramebuffer(),we.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,we.__webglMultisampledFramebuffer);for(let Oe=0;Oe<Ke.length;Oe++){const Q=Ke[Oe];we.__webglColorRenderbuffer[Oe]=n.createRenderbuffer(),n.bindRenderbuffer(36161,we.__webglColorRenderbuffer[Oe]);const ne=o.convert(Q.format,Q.encoding),fe=o.convert(Q.type),Ie=H(Q.internalFormat,ne,fe,Q.encoding),Ye=yt(xe);n.renderbufferStorageMultisample(36161,Ye,Ie,xe.width,xe.height),n.framebufferRenderbuffer(36160,36064+Oe,36161,we.__webglColorRenderbuffer[Oe])}n.bindRenderbuffer(36161,null),xe.depthBuffer&&(we.__webglDepthRenderbuffer=n.createRenderbuffer(),Ue(we.__webglDepthRenderbuffer,xe,!0)),t.bindFramebuffer(36160,null)}}if(Tt){t.bindTexture(34067,ct.__webglTexture),Ne(34067,ie,ft);for(let Ke=0;Ke<6;Ke++)dt(we.__webglFramebuffer[Ke],xe,ie,36064,34069+Ke);G(ie,ft)&&j(34067),t.unbindTexture()}else if(At){const Ke=xe.texture;for(let Oe=0,Q=Ke.length;Oe<Q;Oe++){const ne=Ke[Oe],fe=i.get(ne);t.bindTexture(3553,fe.__webglTexture),Ne(3553,ne,ft),dt(we.__webglFramebuffer,xe,ne,36064+Oe,3553),G(ne,ft)&&j(3553)}t.unbindTexture()}else{let Ke=3553;(xe.isWebGL3DRenderTarget||xe.isWebGLArrayRenderTarget)&&(u?Ke=xe.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ke,ct.__webglTexture),Ne(Ke,ie,ft),dt(we.__webglFramebuffer,xe,ie,36064,Ke),G(ie,ft)&&j(Ke),t.unbindTexture()}xe.depthBuffer&&je(xe)}function Dt(xe){const ie=B(xe)||u,we=xe.isWebGLMultipleRenderTargets===!0?xe.texture:[xe.texture];for(let ct=0,Tt=we.length;ct<Tt;ct++){const At=we[ct];if(G(At,ie)){const ft=xe.isWebGLCubeRenderTarget?34067:3553,Ke=i.get(At).__webglTexture;t.bindTexture(ft,Ke),j(ft),t.unbindTexture()}}}function Rt(xe){if(u&&xe.samples>0&&Ct(xe)===!1){const ie=xe.isWebGLMultipleRenderTargets?xe.texture:[xe.texture],we=xe.width,ct=xe.height;let Tt=16384;const At=[],ft=xe.stencilBuffer?33306:36096,Ke=i.get(xe),Oe=xe.isWebGLMultipleRenderTargets===!0;if(Oe)for(let Q=0;Q<ie.length;Q++)t.bindFramebuffer(36160,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Q,36161,null),t.bindFramebuffer(36160,Ke.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Q,3553,null,0);t.bindFramebuffer(36008,Ke.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ke.__webglFramebuffer);for(let Q=0;Q<ie.length;Q++){At.push(36064+Q),xe.depthBuffer&&At.push(ft);const ne=Ke.__ignoreDepthValues!==void 0?Ke.__ignoreDepthValues:!1;if(ne===!1&&(xe.depthBuffer&&(Tt|=256),xe.stencilBuffer&&(Tt|=1024)),Oe&&n.framebufferRenderbuffer(36008,36064,36161,Ke.__webglColorRenderbuffer[Q]),ne===!0&&(n.invalidateFramebuffer(36008,[ft]),n.invalidateFramebuffer(36009,[ft])),Oe){const fe=i.get(ie[Q]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,fe,0)}n.blitFramebuffer(0,0,we,ct,0,0,we,ct,Tt,9728),E&&n.invalidateFramebuffer(36008,At)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Oe)for(let Q=0;Q<ie.length;Q++){t.bindFramebuffer(36160,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Q,36161,Ke.__webglColorRenderbuffer[Q]);const ne=i.get(ie[Q]).__webglTexture;t.bindFramebuffer(36160,Ke.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Q,3553,ne,0)}t.bindFramebuffer(36009,Ke.__webglMultisampledFramebuffer)}}function yt(xe){return Math.min(v,xe.samples)}function Ct(xe){const ie=i.get(xe);return u&&xe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ie.__useRenderToTexture!==!1}function Mt(xe){const ie=l.render.frame;C.get(xe)!==ie&&(C.set(xe,ie),xe.update())}function mt(xe,ie){const we=xe.encoding,ct=xe.format,Tt=xe.type;return xe.isCompressedTexture===!0||xe.isVideoTexture===!0||xe.format===yI||we!==mg&&(we===ps?u===!1?e.has("EXT_sRGB")===!0&&ct===Ff?(xe.format=yI,xe.minFilter=bl,xe.generateMipmaps=!1):ie=OP.sRGBToLinear(ie):(ct!==Ff||Tt!==tp)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",we)),ie}this.allocateTextureUnit=q,this.resetTextureUnits=$e,this.setTexture2D=se,this.setTexture2DArray=pe,this.setTexture3D=Se,this.setTextureCube=Fe,this.rebindTextures=nt,this.setupRenderTarget=tt,this.updateRenderTargetMipmap=Dt,this.updateMultisampleRenderTarget=Rt,this.setupDepthRenderbuffer=je,this.setupFrameBufferTexture=dt,this.useMultisampledRTT=Ct}function yK(n,e,t){const i=t.isWebGL2;function s(o,l=null){let u;if(o===tp)return 5121;if(o===GY)return 32819;if(o===WY)return 32820;if(o===zY)return 5120;if(o===UY)return 5122;if(o===IP)return 5123;if(o===HY)return 5124;if(o===Q_)return 5125;if(o===j0)return 5126;if(o===M1)return i?5131:(u=e.get("OES_texture_half_float"),u!==null?u.HALF_FLOAT_OES:null);if(o===VY)return 6406;if(o===Ff)return 6408;if(o===XY)return 6409;if(o===YY)return 6410;if(o===bv)return 6402;if(o===Cv)return 34041;if(o===KY)return 6403;if(o===jY)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(o===yI)return u=e.get("EXT_sRGB"),u!==null?u.SRGB_ALPHA_EXT:null;if(o===JY)return 36244;if(o===qY)return 33319;if(o===QY)return 33320;if(o===ZY)return 36249;if(o===gA||o===_A||o===yA||o===vA)if(l===ps)if(u=e.get("WEBGL_compressed_texture_s3tc_srgb"),u!==null){if(o===gA)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===_A)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===yA)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===vA)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(u=e.get("WEBGL_compressed_texture_s3tc"),u!==null){if(o===gA)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===_A)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===yA)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===vA)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===kD||o===OD||o===LD||o===DD)if(u=e.get("WEBGL_compressed_texture_pvrtc"),u!==null){if(o===kD)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===OD)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===LD)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===DD)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===eK)return u=e.get("WEBGL_compressed_texture_etc1"),u!==null?u.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===ND||o===BD)if(u=e.get("WEBGL_compressed_texture_etc"),u!==null){if(o===ND)return l===ps?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(o===BD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===PD||o===FD||o===zD||o===UD||o===HD||o===GD||o===WD||o===VD||o===jD||o===XD||o===YD||o===KD||o===JD||o===qD)if(u=e.get("WEBGL_compressed_texture_astc"),u!==null){if(o===PD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===FD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===zD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===UD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===HD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===GD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===WD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===VD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===jD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===XD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===YD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===KD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===JD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===qD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===QD)if(u=e.get("EXT_texture_compression_bptc"),u!==null){if(o===QD)return l===ps?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return o===vv?i?34042:(u=e.get("WEBGL_depth_texture"),u!==null?u.UNSIGNED_INT_24_8_WEBGL:null):n[o]!==void 0?n[o]:null}return{convert:s}}class vK extends Ja{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class AS extends to{constructor(){super(),this.isGroup=!0,this.type="Group"}}const tSe={type:"move"};class TO{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new AS,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new AS,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Me,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Me),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new AS,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Me,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Me),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,o=null,l=null;const u=this._targetRay,d=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){l=!0;for(const M of e.hand.values()){const I=t.getJointPose(M,i);if(p.joints[M.jointName]===void 0){const O=new AS;O.matrixAutoUpdate=!1,O.visible=!1,p.joints[M.jointName]=O,p.add(O)}const L=p.joints[M.jointName];I!==null&&(L.matrix.fromArray(I.transform.matrix),L.matrix.decompose(L.position,L.rotation,L.scale),L.jointRadius=I.radius),L.visible=I!==null}const _=p.joints["index-finger-tip"],v=p.joints["thumb-tip"],b=_.position.distanceTo(v.position),E=.02,C=.005;p.inputState.pinching&&b>E+C?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&b<=E-C&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(d.matrix.fromArray(o.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),o.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(o.linearVelocity)):d.hasLinearVelocity=!1,o.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(o.angularVelocity)):d.hasAngularVelocity=!1));u!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&o!==null&&(s=o),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(tSe)))}return u!==null&&(u.visible=s!==null),d!==null&&(d.visible=o!==null),p!==null&&(p.visible=l!==null),this}}class BP extends ac{constructor(e,t,i,s,o,l,u,d,p,_){if(_=_!==void 0?_:bv,_!==bv&&_!==Cv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&_===bv&&(i=Q_),i===void 0&&_===Cv&&(i=vv),super(null,s,o,l,u,d,_,i,p),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:Ul,this.minFilter=d!==void 0?d:Ul,this.flipY=!1,this.generateMipmaps=!1}}class nSe extends Bm{constructor(e,t){super();const i=this;let s=null,o=1,l=null,u="local-floor",d=null,p=null,_=null,v=null,b=null,E=null;const C=t.getContextAttributes();let M=null,I=null;const L=[],O=[],P=new Ja;P.layers.enable(1),P.viewport=new vs;const B=new Ja;B.layers.enable(2),B.viewport=new vs;const z=[P,B],G=new vK;G.layers.enable(1),G.layers.enable(2);let j=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let se=L[oe];return se===void 0&&(se=new TO,L[oe]=se),se.getTargetRaySpace()},this.getControllerGrip=function(oe){let se=L[oe];return se===void 0&&(se=new TO,L[oe]=se),se.getGripSpace()},this.getHand=function(oe){let se=L[oe];return se===void 0&&(se=new TO,L[oe]=se),se.getHandSpace()};function Z(oe){const se=O.indexOf(oe.inputSource);if(se===-1)return;const pe=L[se];pe!==void 0&&pe.dispatchEvent({type:oe.type,data:oe.inputSource})}function ae(){s.removeEventListener("select",Z),s.removeEventListener("selectstart",Z),s.removeEventListener("selectend",Z),s.removeEventListener("squeeze",Z),s.removeEventListener("squeezestart",Z),s.removeEventListener("squeezeend",Z),s.removeEventListener("end",ae),s.removeEventListener("inputsourceschange",J);for(let oe=0;oe<L.length;oe++){const se=O[oe];se!==null&&(O[oe]=null,L[oe].disconnect(se))}j=null,H=null,e.setRenderTarget(M),b=null,v=null,_=null,s=null,I=null,q.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){o=oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){u=oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||l},this.setReferenceSpace=function(oe){d=oe},this.getBaseLayer=function(){return v!==null?v:b},this.getBinding=function(){return _},this.getFrame=function(){return E},this.getSession=function(){return s},this.setSession=async function(oe){if(s=oe,s!==null){if(M=e.getRenderTarget(),s.addEventListener("select",Z),s.addEventListener("selectstart",Z),s.addEventListener("selectend",Z),s.addEventListener("squeeze",Z),s.addEventListener("squeezestart",Z),s.addEventListener("squeezeend",Z),s.addEventListener("end",ae),s.addEventListener("inputsourceschange",J),C.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const se={antialias:s.renderState.layers===void 0?C.antialias:!0,alpha:C.alpha,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:o};b=new XRWebGLLayer(s,t,se),s.updateRenderState({baseLayer:b}),I=new Ic(b.framebufferWidth,b.framebufferHeight,{format:Ff,type:tp,encoding:e.outputEncoding})}else{let se=null,pe=null,Se=null;C.depth&&(Se=C.stencil?35056:33190,se=C.stencil?Cv:bv,pe=C.stencil?vv:Q_);const Fe={colorFormat:32856,depthFormat:Se,scaleFactor:o};_=new XRWebGLBinding(s,t),v=_.createProjectionLayer(Fe),s.updateRenderState({layers:[v]}),I=new Ic(v.textureWidth,v.textureHeight,{format:Ff,type:tp,depthTexture:new BP(v.textureWidth,v.textureHeight,pe,void 0,void 0,void 0,void 0,void 0,void 0,se),stencilBuffer:C.stencil,encoding:e.outputEncoding,samples:C.antialias?4:0});const Re=e.properties.get(I);Re.__ignoreDepthValues=v.ignoreDepthValues}I.isXRRenderTarget=!0,this.setFoveation(1),d=null,l=await s.requestReferenceSpace(u),q.setContext(s),q.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function J(oe){for(let se=0;se<oe.removed.length;se++){const pe=oe.removed[se],Se=O.indexOf(pe);Se>=0&&(O[Se]=null,L[Se].dispatchEvent({type:"disconnected",data:pe}))}for(let se=0;se<oe.added.length;se++){const pe=oe.added[se];let Se=O.indexOf(pe);if(Se===-1){for(let Re=0;Re<L.length;Re++)if(Re>=O.length){O.push(pe),Se=Re;break}else if(O[Re]===null){O[Re]=pe,Se=Re;break}if(Se===-1)break}const Fe=L[Se];Fe&&Fe.dispatchEvent({type:"connected",data:pe})}}const te=new Me,he=new Me;function le(oe,se,pe){te.setFromMatrixPosition(se.matrixWorld),he.setFromMatrixPosition(pe.matrixWorld);const Se=te.distanceTo(he),Fe=se.projectionMatrix.elements,Re=pe.projectionMatrix.elements,qe=Fe[14]/(Fe[10]-1),Ne=Fe[14]/(Fe[10]+1),it=(Fe[9]+1)/Fe[5],st=(Fe[9]-1)/Fe[5],pt=(Fe[8]-1)/Fe[0],dt=(Re[8]+1)/Re[0],Ue=qe*pt,Ae=qe*dt,je=Se/(-pt+dt),nt=je*-pt;se.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(nt),oe.translateZ(je),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert();const tt=qe+je,Dt=Ne+je,Rt=Ue-nt,yt=Ae+(Se-nt),Ct=it*Ne/Dt*tt,Mt=st*Ne/Dt*tt;oe.projectionMatrix.makePerspective(Rt,yt,Ct,Mt,tt,Dt)}function ce(oe,se){se===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(se.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(s===null)return;G.near=B.near=P.near=oe.near,G.far=B.far=P.far=oe.far,(j!==G.near||H!==G.far)&&(s.updateRenderState({depthNear:G.near,depthFar:G.far}),j=G.near,H=G.far);const se=oe.parent,pe=G.cameras;ce(G,se);for(let Fe=0;Fe<pe.length;Fe++)ce(pe[Fe],se);G.matrixWorld.decompose(G.position,G.quaternion,G.scale),oe.position.copy(G.position),oe.quaternion.copy(G.quaternion),oe.scale.copy(G.scale),oe.matrix.copy(G.matrix),oe.matrixWorld.copy(G.matrixWorld);const Se=oe.children;for(let Fe=0,Re=Se.length;Fe<Re;Fe++)Se[Fe].updateMatrixWorld(!0);pe.length===2?le(G,P,B):G.projectionMatrix.copy(P.projectionMatrix)},this.getCamera=function(){return G},this.getFoveation=function(){if(v!==null)return v.fixedFoveation;if(b!==null)return b.fixedFoveation},this.setFoveation=function(oe){v!==null&&(v.fixedFoveation=oe),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=oe)};let be=null;function $e(oe,se){if(p=se.getViewerPose(d||l),E=se,p!==null){const pe=p.views;b!==null&&(e.setRenderTargetFramebuffer(I,b.framebuffer),e.setRenderTarget(I));let Se=!1;pe.length!==G.cameras.length&&(G.cameras.length=0,Se=!0);for(let Fe=0;Fe<pe.length;Fe++){const Re=pe[Fe];let qe=null;if(b!==null)qe=b.getViewport(Re);else{const it=_.getViewSubImage(v,Re);qe=it.viewport,Fe===0&&(e.setRenderTargetTextures(I,it.colorTexture,v.ignoreDepthValues?void 0:it.depthStencilTexture),e.setRenderTarget(I))}let Ne=z[Fe];Ne===void 0&&(Ne=new Ja,Ne.layers.enable(Fe),Ne.viewport=new vs,z[Fe]=Ne),Ne.matrix.fromArray(Re.transform.matrix),Ne.projectionMatrix.fromArray(Re.projectionMatrix),Ne.viewport.set(qe.x,qe.y,qe.width,qe.height),Fe===0&&G.matrix.copy(Ne.matrix),Se===!0&&G.cameras.push(Ne)}}for(let pe=0;pe<L.length;pe++){const Se=O[pe],Fe=L[pe];Se!==null&&Fe!==void 0&&Fe.update(Se,se,d||l)}be&&be(oe,se),E=null}const q=new dK;q.setAnimationLoop($e),this.setAnimationLoop=function(oe){be=oe},this.dispose=function(){}}}function rSe(n,e){function t(M,I){M.fogColor.value.copy(I.color),I.isFog?(M.fogNear.value=I.near,M.fogFar.value=I.far):I.isFogExp2&&(M.fogDensity.value=I.density)}function i(M,I,L,O,P){I.isMeshBasicMaterial||I.isMeshLambertMaterial?s(M,I):I.isMeshToonMaterial?(s(M,I),_(M,I)):I.isMeshPhongMaterial?(s(M,I),p(M,I)):I.isMeshStandardMaterial?(s(M,I),v(M,I),I.isMeshPhysicalMaterial&&b(M,I,P)):I.isMeshMatcapMaterial?(s(M,I),E(M,I)):I.isMeshDepthMaterial?s(M,I):I.isMeshDistanceMaterial?(s(M,I),C(M,I)):I.isMeshNormalMaterial?s(M,I):I.isLineBasicMaterial?(o(M,I),I.isLineDashedMaterial&&l(M,I)):I.isPointsMaterial?u(M,I,L,O):I.isSpriteMaterial?d(M,I):I.isShadowMaterial?(M.color.value.copy(I.color),M.opacity.value=I.opacity):I.isShaderMaterial&&(I.uniformsNeedUpdate=!1)}function s(M,I){M.opacity.value=I.opacity,I.color&&M.diffuse.value.copy(I.color),I.emissive&&M.emissive.value.copy(I.emissive).multiplyScalar(I.emissiveIntensity),I.map&&(M.map.value=I.map),I.alphaMap&&(M.alphaMap.value=I.alphaMap),I.bumpMap&&(M.bumpMap.value=I.bumpMap,M.bumpScale.value=I.bumpScale,I.side===sd&&(M.bumpScale.value*=-1)),I.displacementMap&&(M.displacementMap.value=I.displacementMap,M.displacementScale.value=I.displacementScale,M.displacementBias.value=I.displacementBias),I.emissiveMap&&(M.emissiveMap.value=I.emissiveMap),I.normalMap&&(M.normalMap.value=I.normalMap,M.normalScale.value.copy(I.normalScale),I.side===sd&&M.normalScale.value.negate()),I.specularMap&&(M.specularMap.value=I.specularMap),I.alphaTest>0&&(M.alphaTest.value=I.alphaTest);const L=e.get(I).envMap;if(L&&(M.envMap.value=L,M.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=I.reflectivity,M.ior.value=I.ior,M.refractionRatio.value=I.refractionRatio),I.lightMap){M.lightMap.value=I.lightMap;const B=n.physicallyCorrectLights!==!0?Math.PI:1;M.lightMapIntensity.value=I.lightMapIntensity*B}I.aoMap&&(M.aoMap.value=I.aoMap,M.aoMapIntensity.value=I.aoMapIntensity);let O;I.map?O=I.map:I.specularMap?O=I.specularMap:I.displacementMap?O=I.displacementMap:I.normalMap?O=I.normalMap:I.bumpMap?O=I.bumpMap:I.roughnessMap?O=I.roughnessMap:I.metalnessMap?O=I.metalnessMap:I.alphaMap?O=I.alphaMap:I.emissiveMap?O=I.emissiveMap:I.clearcoatMap?O=I.clearcoatMap:I.clearcoatNormalMap?O=I.clearcoatNormalMap:I.clearcoatRoughnessMap?O=I.clearcoatRoughnessMap:I.iridescenceMap?O=I.iridescenceMap:I.iridescenceThicknessMap?O=I.iridescenceThicknessMap:I.specularIntensityMap?O=I.specularIntensityMap:I.specularColorMap?O=I.specularColorMap:I.transmissionMap?O=I.transmissionMap:I.thicknessMap?O=I.thicknessMap:I.sheenColorMap?O=I.sheenColorMap:I.sheenRoughnessMap&&(O=I.sheenRoughnessMap),O!==void 0&&(O.isWebGLRenderTarget&&(O=O.texture),O.matrixAutoUpdate===!0&&O.updateMatrix(),M.uvTransform.value.copy(O.matrix));let P;I.aoMap?P=I.aoMap:I.lightMap&&(P=I.lightMap),P!==void 0&&(P.isWebGLRenderTarget&&(P=P.texture),P.matrixAutoUpdate===!0&&P.updateMatrix(),M.uv2Transform.value.copy(P.matrix))}function o(M,I){M.diffuse.value.copy(I.color),M.opacity.value=I.opacity}function l(M,I){M.dashSize.value=I.dashSize,M.totalSize.value=I.dashSize+I.gapSize,M.scale.value=I.scale}function u(M,I,L,O){M.diffuse.value.copy(I.color),M.opacity.value=I.opacity,M.size.value=I.size*L,M.scale.value=O*.5,I.map&&(M.map.value=I.map),I.alphaMap&&(M.alphaMap.value=I.alphaMap),I.alphaTest>0&&(M.alphaTest.value=I.alphaTest);let P;I.map?P=I.map:I.alphaMap&&(P=I.alphaMap),P!==void 0&&(P.matrixAutoUpdate===!0&&P.updateMatrix(),M.uvTransform.value.copy(P.matrix))}function d(M,I){M.diffuse.value.copy(I.color),M.opacity.value=I.opacity,M.rotation.value=I.rotation,I.map&&(M.map.value=I.map),I.alphaMap&&(M.alphaMap.value=I.alphaMap),I.alphaTest>0&&(M.alphaTest.value=I.alphaTest);let L;I.map?L=I.map:I.alphaMap&&(L=I.alphaMap),L!==void 0&&(L.matrixAutoUpdate===!0&&L.updateMatrix(),M.uvTransform.value.copy(L.matrix))}function p(M,I){M.specular.value.copy(I.specular),M.shininess.value=Math.max(I.shininess,1e-4)}function _(M,I){I.gradientMap&&(M.gradientMap.value=I.gradientMap)}function v(M,I){M.roughness.value=I.roughness,M.metalness.value=I.metalness,I.roughnessMap&&(M.roughnessMap.value=I.roughnessMap),I.metalnessMap&&(M.metalnessMap.value=I.metalnessMap),e.get(I).envMap&&(M.envMapIntensity.value=I.envMapIntensity)}function b(M,I,L){M.ior.value=I.ior,I.sheen>0&&(M.sheenColor.value.copy(I.sheenColor).multiplyScalar(I.sheen),M.sheenRoughness.value=I.sheenRoughness,I.sheenColorMap&&(M.sheenColorMap.value=I.sheenColorMap),I.sheenRoughnessMap&&(M.sheenRoughnessMap.value=I.sheenRoughnessMap)),I.clearcoat>0&&(M.clearcoat.value=I.clearcoat,M.clearcoatRoughness.value=I.clearcoatRoughness,I.clearcoatMap&&(M.clearcoatMap.value=I.clearcoatMap),I.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=I.clearcoatRoughnessMap),I.clearcoatNormalMap&&(M.clearcoatNormalScale.value.copy(I.clearcoatNormalScale),M.clearcoatNormalMap.value=I.clearcoatNormalMap,I.side===sd&&M.clearcoatNormalScale.value.negate())),I.iridescence>0&&(M.iridescence.value=I.iridescence,M.iridescenceIOR.value=I.iridescenceIOR,M.iridescenceThicknessMinimum.value=I.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=I.iridescenceThicknessRange[1],I.iridescenceMap&&(M.iridescenceMap.value=I.iridescenceMap),I.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=I.iridescenceThicknessMap)),I.transmission>0&&(M.transmission.value=I.transmission,M.transmissionSamplerMap.value=L.texture,M.transmissionSamplerSize.value.set(L.width,L.height),I.transmissionMap&&(M.transmissionMap.value=I.transmissionMap),M.thickness.value=I.thickness,I.thicknessMap&&(M.thicknessMap.value=I.thicknessMap),M.attenuationDistance.value=I.attenuationDistance,M.attenuationColor.value.copy(I.attenuationColor)),M.specularIntensity.value=I.specularIntensity,M.specularColor.value.copy(I.specularColor),I.specularIntensityMap&&(M.specularIntensityMap.value=I.specularIntensityMap),I.specularColorMap&&(M.specularColorMap.value=I.specularColorMap)}function E(M,I){I.matcap&&(M.matcap.value=I.matcap)}function C(M,I){M.referencePosition.value.copy(I.referencePosition),M.nearDistance.value=I.nearDistance,M.farDistance.value=I.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function iSe(n,e,t,i){let s={},o={},l=[];const u=t.isWebGL2?n.getParameter(35375):0;function d(O,P){const B=P.program;i.uniformBlockBinding(O,B)}function p(O,P){let B=s[O.id];B===void 0&&(C(O),B=_(O),s[O.id]=B,O.addEventListener("dispose",I));const z=P.program;i.updateUBOMapping(O,z);const G=e.render.frame;o[O.id]!==G&&(b(O),o[O.id]=G)}function _(O){const P=v();O.__bindingPointIndex=P;const B=n.createBuffer(),z=O.__size,G=O.usage;return n.bindBuffer(35345,B),n.bufferData(35345,z,G),n.bindBuffer(35345,null),n.bindBufferBase(35345,P,B),B}function v(){for(let O=0;O<u;O++)if(l.indexOf(O)===-1)return l.push(O),O;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function b(O){const P=s[O.id],B=O.uniforms,z=O.__cache;n.bindBuffer(35345,P);for(let G=0,j=B.length;G<j;G++){const H=B[G];if(E(H,G,z)===!0){const Z=H.value,ae=H.__offset;typeof Z=="number"?(H.__data[0]=Z,n.bufferSubData(35345,ae,H.__data)):(H.value.isMatrix3?(H.__data[0]=H.value.elements[0],H.__data[1]=H.value.elements[1],H.__data[2]=H.value.elements[2],H.__data[3]=H.value.elements[0],H.__data[4]=H.value.elements[3],H.__data[5]=H.value.elements[4],H.__data[6]=H.value.elements[5],H.__data[7]=H.value.elements[0],H.__data[8]=H.value.elements[6],H.__data[9]=H.value.elements[7],H.__data[10]=H.value.elements[8],H.__data[11]=H.value.elements[0]):Z.toArray(H.__data),n.bufferSubData(35345,ae,H.__data))}}n.bindBuffer(35345,null)}function E(O,P,B){const z=O.value;if(B[P]===void 0)return typeof z=="number"?B[P]=z:B[P]=z.clone(),!0;if(typeof z=="number"){if(B[P]!==z)return B[P]=z,!0}else{const G=B[P];if(G.equals(z)===!1)return G.copy(z),!0}return!1}function C(O){const P=O.uniforms;let B=0;const z=16;let G=0;for(let j=0,H=P.length;j<H;j++){const Z=P[j],ae=M(Z);if(Z.__data=new Float32Array(ae.storage/Float32Array.BYTES_PER_ELEMENT),Z.__offset=B,j>0){G=B%z;const J=z-G;G!==0&&J-ae.boundary<0&&(B+=z-G,Z.__offset=B)}B+=ae.storage}return G=B%z,G>0&&(B+=z-G),O.__size=B,O.__cache={},this}function M(O){const P=O.value,B={boundary:0,storage:0};return typeof P=="number"?(B.boundary=4,B.storage=4):P.isVector2?(B.boundary=8,B.storage=8):P.isVector3||P.isColor?(B.boundary=16,B.storage=12):P.isVector4?(B.boundary=16,B.storage=16):P.isMatrix3?(B.boundary=48,B.storage=48):P.isMatrix4?(B.boundary=64,B.storage=64):P.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",P),B}function I(O){const P=O.target;P.removeEventListener("dispose",I);const B=l.indexOf(P.__bindingPointIndex);l.splice(B,1),n.deleteBuffer(s[P.id]),delete s[P.id],delete o[P.id]}function L(){for(const O in s)n.deleteBuffer(s[O]);l=[],s={},o={}}return{bind:d,update:p,dispose:L}}function sSe(){const n=l$("canvas");return n.style.display="block",n}function PP(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:sSe(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,l=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,u=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,d=n.powerPreference!==void 0?n.powerPreference:"default",p=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let _;t!==null?_=t.getContextAttributes().alpha:_=n.alpha!==void 0?n.alpha:!1;let v=null,b=null;const E=[],C=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=mg,this.physicallyCorrectLights=!1,this.toneMapping=Qg,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const M=this;let I=!1,L=0,O=0,P=null,B=-1,z=null;const G=new vs,j=new vs;let H=null,Z=e.width,ae=e.height,J=1,te=null,he=null;const le=new vs(0,0,Z,ae),ce=new vs(0,0,Z,ae);let be=!1;const $e=new XR;let q=!1,oe=!1,se=null;const pe=new qr,Se=new Vt,Fe=new Me,Re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function qe(){return P===null?J:1}let Ne=t;function it(De,gt){for(let $t=0;$t<De.length;$t++){const vt=De[$t],Wt=e.getContext(vt,gt);if(Wt!==null)return Wt}return null}try{const De={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:p};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${DE}`),e.addEventListener("webglcontextlost",Ie,!1),e.addEventListener("webglcontextrestored",Ye,!1),e.addEventListener("webglcontextcreationerror",Gt,!1),Ne===null){const gt=["webgl2","webgl","experimental-webgl"];if(M.isWebGL1Renderer===!0&&gt.shift(),Ne=it(gt,De),Ne===null)throw it(gt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Ne.getShaderPrecisionFormat===void 0&&(Ne.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(De){throw console.error("THREE.WebGLRenderer: "+De.message),De}let st,pt,dt,Ue,Ae,je,nt,tt,Dt,Rt,yt,Ct,Mt,mt,xe,ie,we,ct,Tt,At,ft,Ke,Oe,Q;function ne(){st=new b1e(Ne),pt=new f1e(Ne,st,n),st.init(pt),Ke=new yK(Ne,st,pt),dt=new ZTe(Ne,st,pt),Ue=new E1e,Ae=new UTe,je=new eSe(Ne,st,dt,Ae,pt,Ke,Ue),nt=new g1e(M),tt=new v1e(M),Dt=new Dye(Ne,pt),Oe=new d1e(Ne,st,Dt,pt),Rt=new T1e(Ne,Dt,Ue,Oe),yt=new C1e(Ne,Rt,Dt,Ue),Tt=new $1e(Ne,pt,je),ie=new m1e(Ae),Ct=new zTe(M,nt,tt,st,pt,Oe,ie),Mt=new rSe(M,Ae),mt=new GTe,xe=new KTe(st,pt),ct=new h1e(M,nt,dt,yt,_,l),we=new QTe(M,yt,pt),Q=new iSe(Ne,Ue,pt,dt),At=new p1e(Ne,st,Ue,pt),ft=new S1e(Ne,st,Ue,pt),Ue.programs=Ct.programs,M.capabilities=pt,M.extensions=st,M.properties=Ae,M.renderLists=mt,M.shadowMap=we,M.state=dt,M.info=Ue}ne();const fe=new nSe(M,Ne);this.xr=fe,this.getContext=function(){return Ne},this.getContextAttributes=function(){return Ne.getContextAttributes()},this.forceContextLoss=function(){const De=st.get("WEBGL_lose_context");De&&De.loseContext()},this.forceContextRestore=function(){const De=st.get("WEBGL_lose_context");De&&De.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(De){De!==void 0&&(J=De,this.setSize(Z,ae,!1))},this.getSize=function(De){return De.set(Z,ae)},this.setSize=function(De,gt,$t){if(fe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Z=De,ae=gt,e.width=Math.floor(De*J),e.height=Math.floor(gt*J),$t!==!1&&(e.style.width=De+"px",e.style.height=gt+"px"),this.setViewport(0,0,De,gt)},this.getDrawingBufferSize=function(De){return De.set(Z*J,ae*J).floor()},this.setDrawingBufferSize=function(De,gt,$t){Z=De,ae=gt,J=$t,e.width=Math.floor(De*$t),e.height=Math.floor(gt*$t),this.setViewport(0,0,De,gt)},this.getCurrentViewport=function(De){return De.copy(G)},this.getViewport=function(De){return De.copy(le)},this.setViewport=function(De,gt,$t,vt){De.isVector4?le.set(De.x,De.y,De.z,De.w):le.set(De,gt,$t,vt),dt.viewport(G.copy(le).multiplyScalar(J).floor())},this.getScissor=function(De){return De.copy(ce)},this.setScissor=function(De,gt,$t,vt){De.isVector4?ce.set(De.x,De.y,De.z,De.w):ce.set(De,gt,$t,vt),dt.scissor(j.copy(ce).multiplyScalar(J).floor())},this.getScissorTest=function(){return be},this.setScissorTest=function(De){dt.setScissorTest(be=De)},this.setOpaqueSort=function(De){te=De},this.setTransparentSort=function(De){he=De},this.getClearColor=function(De){return De.copy(ct.getClearColor())},this.setClearColor=function(){ct.setClearColor.apply(ct,arguments)},this.getClearAlpha=function(){return ct.getClearAlpha()},this.setClearAlpha=function(){ct.setClearAlpha.apply(ct,arguments)},this.clear=function(De=!0,gt=!0,$t=!0){let vt=0;De&&(vt|=16384),gt&&(vt|=256),$t&&(vt|=1024),Ne.clear(vt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ie,!1),e.removeEventListener("webglcontextrestored",Ye,!1),e.removeEventListener("webglcontextcreationerror",Gt,!1),mt.dispose(),xe.dispose(),Ae.dispose(),nt.dispose(),tt.dispose(),yt.dispose(),Oe.dispose(),Q.dispose(),Ct.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",Rn),fe.removeEventListener("sessionend",ii),se&&(se.dispose(),se=null),Dr.stop()};function Ie(De){De.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function Ye(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const De=Ue.autoReset,gt=we.enabled,$t=we.autoUpdate,vt=we.needsUpdate,Wt=we.type;ne(),Ue.autoReset=De,we.enabled=gt,we.autoUpdate=$t,we.needsUpdate=vt,we.type=Wt}function Gt(De){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",De.statusMessage)}function He(De){const gt=De.target;gt.removeEventListener("dispose",He),Zt(gt)}function Zt(De){_t(De),Ae.remove(De)}function _t(De){const gt=Ae.get(De).programs;gt!==void 0&&(gt.forEach(function($t){Ct.releaseProgram($t)}),De.isShaderMaterial&&Ct.releaseShaderCache(De))}this.renderBufferDirect=function(De,gt,$t,vt,Wt,Un){gt===null&&(gt=Re);const tr=Wt.isMesh&&Wt.matrixWorld.determinant()<0,mr=Ft(De,gt,$t,vt,Wt);dt.setMaterial(vt,tr);let wr=$t.index;const si=$t.attributes.position;if(wr===null){if(si===void 0||si.count===0)return}else if(wr.count===0)return;let Nr=1;vt.wireframe===!0&&(wr=Rt.getWireframeAttribute($t),Nr=2),Oe.setup(Wt,vt,mr,$t,wr);let jr,bs=At;wr!==null&&(jr=Dt.get(wr),bs=ft,bs.setIndex(jr));const Ia=wr!==null?wr.count:si.count,Eo=$t.drawRange.start*Nr,Wl=$t.drawRange.count*Nr,en=Un!==null?Un.start*Nr:0,Ar=Un!==null?Un.count*Nr:1/0,qa=Math.max(Eo,en),Ra=Math.min(Ia,Eo+Wl,en+Ar)-1,Bs=Math.max(0,Ra-qa+1);if(Bs!==0){if(Wt.isMesh)vt.wireframe===!0?(dt.setLineWidth(vt.wireframeLinewidth*qe()),bs.setMode(1)):bs.setMode(4);else if(Wt.isLine){let Ps=vt.linewidth;Ps===void 0&&(Ps=1),dt.setLineWidth(Ps*qe()),Wt.isLineSegments?bs.setMode(1):Wt.isLineLoop?bs.setMode(2):bs.setMode(3)}else Wt.isPoints?bs.setMode(0):Wt.isSprite&&bs.setMode(4);if(Wt.isInstancedMesh)bs.renderInstances(qa,Bs,Wt.count);else if($t.isInstancedBufferGeometry){const Ps=Math.min($t.instanceCount,$t._maxInstanceCount);bs.renderInstances(qa,Bs,Ps)}else bs.render(qa,Bs)}},this.compile=function(De,gt){b=xe.get(De),b.init(),C.push(b),De.traverseVisible(function($t){$t.isLight&&$t.layers.test(gt.layers)&&(b.pushLight($t),$t.castShadow&&b.pushShadow($t))}),b.setupLights(M.physicallyCorrectLights),De.traverse(function($t){const vt=$t.material;if(vt)if(Array.isArray(vt))for(let Wt=0;Wt<vt.length;Wt++){const Un=vt[Wt];Ge(Un,De,$t)}else Ge(vt,De,$t)}),C.pop(),b=null};let Kt=null;function Yt(De){Kt&&Kt(De)}function Rn(){Dr.stop()}function ii(){Dr.start()}const Dr=new dK;Dr.setAnimationLoop(Yt),typeof self<"u"&&Dr.setContext(self),this.setAnimationLoop=function(De){Kt=De,fe.setAnimationLoop(De),De===null?Dr.stop():Dr.start()},fe.addEventListener("sessionstart",Rn),fe.addEventListener("sessionend",ii),this.render=function(De,gt){if(gt!==void 0&&gt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;De.autoUpdate===!0&&De.updateMatrixWorld(),gt.parent===null&&gt.updateMatrixWorld(),fe.enabled===!0&&fe.isPresenting===!0&&(fe.cameraAutoUpdate===!0&&fe.updateCamera(gt),gt=fe.getCamera()),De.isScene===!0&&De.onBeforeRender(M,De,gt,P),b=xe.get(De,C.length),b.init(),C.push(b),pe.multiplyMatrices(gt.projectionMatrix,gt.matrixWorldInverse),$e.setFromProjectionMatrix(pe),oe=this.localClippingEnabled,q=ie.init(this.clippingPlanes,oe,gt),v=mt.get(De,E.length),v.init(),E.push(v),Si(De,gt,0,M.sortObjects),v.finish(),M.sortObjects===!0&&v.sort(te,he),q===!0&&ie.beginShadows();const $t=b.state.shadowsArray;if(we.render($t,De,gt),q===!0&&ie.endShadows(),this.info.autoReset===!0&&this.info.reset(),ct.render(v,De),b.setupLights(M.physicallyCorrectLights),gt.isArrayCamera){const vt=gt.cameras;for(let Wt=0,Un=vt.length;Wt<Un;Wt++){const tr=vt[Wt];xr(v,De,tr,tr.viewport)}}else xr(v,De,gt);P!==null&&(je.updateMultisampleRenderTarget(P),je.updateRenderTargetMipmap(P)),De.isScene===!0&&De.onAfterRender(M,De,gt),Oe.resetDefaultState(),B=-1,z=null,C.pop(),C.length>0?b=C[C.length-1]:b=null,E.pop(),E.length>0?v=E[E.length-1]:v=null};function Si(De,gt,$t,vt){if(De.visible===!1)return;if(De.layers.test(gt.layers)){if(De.isGroup)$t=De.renderOrder;else if(De.isLOD)De.autoUpdate===!0&&De.update(gt);else if(De.isLight)b.pushLight(De),De.castShadow&&b.pushShadow(De);else if(De.isSprite){if(!De.frustumCulled||$e.intersectsSprite(De)){vt&&Fe.setFromMatrixPosition(De.matrixWorld).applyMatrix4(pe);const Un=yt.update(De),tr=De.material;tr.visible&&v.push(De,Un,tr,$t,Fe.z,null)}}else if((De.isMesh||De.isLine||De.isPoints)&&(De.isSkinnedMesh&&De.skeleton.frame!==Ue.render.frame&&(De.skeleton.update(),De.skeleton.frame=Ue.render.frame),!De.frustumCulled||$e.intersectsObject(De))){vt&&Fe.setFromMatrixPosition(De.matrixWorld).applyMatrix4(pe);const Un=yt.update(De),tr=De.material;if(Array.isArray(tr)){const mr=Un.groups;for(let wr=0,si=mr.length;wr<si;wr++){const Nr=mr[wr],jr=tr[Nr.materialIndex];jr&&jr.visible&&v.push(De,Un,jr,$t,Fe.z,Nr)}}else tr.visible&&v.push(De,Un,tr,$t,Fe.z,null)}}const Wt=De.children;for(let Un=0,tr=Wt.length;Un<tr;Un++)Si(Wt[Un],gt,$t,vt)}function xr(De,gt,$t,vt){const Wt=De.opaque,Un=De.transmissive,tr=De.transparent;b.setupLightsView($t),Un.length>0&&fr(Wt,gt,$t),vt&&dt.viewport(G.copy(vt)),Wt.length>0&&re(Wt,gt,$t),Un.length>0&&re(Un,gt,$t),tr.length>0&&re(tr,gt,$t),dt.buffers.depth.setTest(!0),dt.buffers.depth.setMask(!0),dt.buffers.color.setMask(!0),dt.setPolygonOffset(!1)}function fr(De,gt,$t){const vt=pt.isWebGL2;se===null&&(se=new Ic(1,1,{generateMipmaps:!0,type:st.has("EXT_color_buffer_half_float")?M1:tp,minFilter:F1,samples:vt&&o===!0?4:0})),M.getDrawingBufferSize(Se),vt?se.setSize(Se.x,Se.y):se.setSize(vI(Se.x),vI(Se.y));const Wt=M.getRenderTarget();M.setRenderTarget(se),M.clear();const Un=M.toneMapping;M.toneMapping=Qg,re(De,gt,$t),M.toneMapping=Un,je.updateMultisampleRenderTarget(se),je.updateRenderTargetMipmap(se),M.setRenderTarget(Wt)}function re(De,gt,$t){const vt=gt.isScene===!0?gt.overrideMaterial:null;for(let Wt=0,Un=De.length;Wt<Un;Wt++){const tr=De[Wt],mr=tr.object,wr=tr.geometry,si=vt===null?tr.material:vt,Nr=tr.group;mr.layers.test($t.layers)&&Te(mr,gt,$t,wr,si,Nr)}}function Te(De,gt,$t,vt,Wt,Un){De.onBeforeRender(M,gt,$t,vt,Wt,Un),De.modelViewMatrix.multiplyMatrices($t.matrixWorldInverse,De.matrixWorld),De.normalMatrix.getNormalMatrix(De.modelViewMatrix),Wt.onBeforeRender(M,gt,$t,vt,De,Un),Wt.transparent===!0&&Wt.side===nf?(Wt.side=sd,Wt.needsUpdate=!0,M.renderBufferDirect($t,gt,vt,Wt,De,Un),Wt.side=e_,Wt.needsUpdate=!0,M.renderBufferDirect($t,gt,vt,Wt,De,Un),Wt.side=nf):M.renderBufferDirect($t,gt,vt,Wt,De,Un),De.onAfterRender(M,gt,$t,vt,Wt,Un)}function Ge(De,gt,$t){gt.isScene!==!0&&(gt=Re);const vt=Ae.get(De),Wt=b.state.lights,Un=b.state.shadowsArray,tr=Wt.state.version,mr=Ct.getParameters(De,Wt.state,Un,gt,$t),wr=Ct.getProgramCacheKey(mr);let si=vt.programs;vt.environment=De.isMeshStandardMaterial?gt.environment:null,vt.fog=gt.fog,vt.envMap=(De.isMeshStandardMaterial?tt:nt).get(De.envMap||vt.environment),si===void 0&&(De.addEventListener("dispose",He),si=new Map,vt.programs=si);let Nr=si.get(wr);if(Nr!==void 0){if(vt.currentProgram===Nr&&vt.lightsStateVersion===tr)return ot(De,mr),Nr}else mr.uniforms=Ct.getUniforms(De),De.onBuild($t,mr,M),De.onBeforeCompile(mr,M),Nr=Ct.acquireProgram(mr,wr),si.set(wr,Nr),vt.uniforms=mr.uniforms;const jr=vt.uniforms;(!De.isShaderMaterial&&!De.isRawShaderMaterial||De.clipping===!0)&&(jr.clippingPlanes=ie.uniform),ot(De,mr),vt.needsLights=On(De),vt.lightsStateVersion=tr,vt.needsLights&&(jr.ambientLightColor.value=Wt.state.ambient,jr.lightProbe.value=Wt.state.probe,jr.directionalLights.value=Wt.state.directional,jr.directionalLightShadows.value=Wt.state.directionalShadow,jr.spotLights.value=Wt.state.spot,jr.spotLightShadows.value=Wt.state.spotShadow,jr.rectAreaLights.value=Wt.state.rectArea,jr.ltc_1.value=Wt.state.rectAreaLTC1,jr.ltc_2.value=Wt.state.rectAreaLTC2,jr.pointLights.value=Wt.state.point,jr.pointLightShadows.value=Wt.state.pointShadow,jr.hemisphereLights.value=Wt.state.hemi,jr.directionalShadowMap.value=Wt.state.directionalShadowMap,jr.directionalShadowMatrix.value=Wt.state.directionalShadowMatrix,jr.spotShadowMap.value=Wt.state.spotShadowMap,jr.spotShadowMatrix.value=Wt.state.spotShadowMatrix,jr.pointShadowMap.value=Wt.state.pointShadowMap,jr.pointShadowMatrix.value=Wt.state.pointShadowMatrix);const bs=Nr.getUniforms(),Ia=EA.seqWithValue(bs.seq,jr);return vt.currentProgram=Nr,vt.uniformsList=Ia,Nr}function ot(De,gt){const $t=Ae.get(De);$t.outputEncoding=gt.outputEncoding,$t.instancing=gt.instancing,$t.skinning=gt.skinning,$t.morphTargets=gt.morphTargets,$t.morphNormals=gt.morphNormals,$t.morphColors=gt.morphColors,$t.morphTargetsCount=gt.morphTargetsCount,$t.numClippingPlanes=gt.numClippingPlanes,$t.numIntersection=gt.numClipIntersection,$t.vertexAlphas=gt.vertexAlphas,$t.vertexTangents=gt.vertexTangents,$t.toneMapping=gt.toneMapping}function Ft(De,gt,$t,vt,Wt){gt.isScene!==!0&&(gt=Re),je.resetTextureUnits();const Un=gt.fog,tr=vt.isMeshStandardMaterial?gt.environment:null,mr=P===null?M.outputEncoding:P.isXRRenderTarget===!0?P.texture.encoding:mg,wr=(vt.isMeshStandardMaterial?tt:nt).get(vt.envMap||tr),si=vt.vertexColors===!0&&!!$t.attributes.color&&$t.attributes.color.itemSize===4,Nr=!!vt.normalMap&&!!$t.attributes.tangent,jr=!!$t.morphAttributes.position,bs=!!$t.morphAttributes.normal,Ia=!!$t.morphAttributes.color,Eo=vt.toneMapped?M.toneMapping:Qg,Wl=$t.morphAttributes.position||$t.morphAttributes.normal||$t.morphAttributes.color,en=Wl!==void 0?Wl.length:0,Ar=Ae.get(vt),qa=b.state.lights;if(q===!0&&(oe===!0||De!==z)){const _r=De===z&&vt.id===B;ie.setState(vt,De,_r)}let Ra=!1;vt.version===Ar.__version?(Ar.needsLights&&Ar.lightsStateVersion!==qa.state.version||Ar.outputEncoding!==mr||Wt.isInstancedMesh&&Ar.instancing===!1||!Wt.isInstancedMesh&&Ar.instancing===!0||Wt.isSkinnedMesh&&Ar.skinning===!1||!Wt.isSkinnedMesh&&Ar.skinning===!0||Ar.envMap!==wr||vt.fog===!0&&Ar.fog!==Un||Ar.numClippingPlanes!==void 0&&(Ar.numClippingPlanes!==ie.numPlanes||Ar.numIntersection!==ie.numIntersection)||Ar.vertexAlphas!==si||Ar.vertexTangents!==Nr||Ar.morphTargets!==jr||Ar.morphNormals!==bs||Ar.morphColors!==Ia||Ar.toneMapping!==Eo||pt.isWebGL2===!0&&Ar.morphTargetsCount!==en)&&(Ra=!0):(Ra=!0,Ar.__version=vt.version);let Bs=Ar.currentProgram;Ra===!0&&(Bs=Ge(vt,gt,Wt));let Ps=!1,Li=!1,Ir=!1;const Cn=Bs.getUniforms(),Mr=Ar.uniforms;if(dt.useProgram(Bs.program)&&(Ps=!0,Li=!0,Ir=!0),vt.id!==B&&(B=vt.id,Li=!0),Ps||z!==De){if(Cn.setValue(Ne,"projectionMatrix",De.projectionMatrix),pt.logarithmicDepthBuffer&&Cn.setValue(Ne,"logDepthBufFC",2/(Math.log(De.far+1)/Math.LN2)),z!==De&&(z=De,Li=!0,Ir=!0),vt.isShaderMaterial||vt.isMeshPhongMaterial||vt.isMeshToonMaterial||vt.isMeshStandardMaterial||vt.envMap){const _r=Cn.map.cameraPosition;_r!==void 0&&_r.setValue(Ne,Fe.setFromMatrixPosition(De.matrixWorld))}(vt.isMeshPhongMaterial||vt.isMeshToonMaterial||vt.isMeshLambertMaterial||vt.isMeshBasicMaterial||vt.isMeshStandardMaterial||vt.isShaderMaterial)&&Cn.setValue(Ne,"isOrthographic",De.isOrthographicCamera===!0),(vt.isMeshPhongMaterial||vt.isMeshToonMaterial||vt.isMeshLambertMaterial||vt.isMeshBasicMaterial||vt.isMeshStandardMaterial||vt.isShaderMaterial||vt.isShadowMaterial||Wt.isSkinnedMesh)&&Cn.setValue(Ne,"viewMatrix",De.matrixWorldInverse)}if(Wt.isSkinnedMesh){Cn.setOptional(Ne,Wt,"bindMatrix"),Cn.setOptional(Ne,Wt,"bindMatrixInverse");const _r=Wt.skeleton;_r&&(pt.floatVertexTextures?(_r.boneTexture===null&&_r.computeBoneTexture(),Cn.setValue(Ne,"boneTexture",_r.boneTexture,je),Cn.setValue(Ne,"boneTextureSize",_r.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Ur=$t.morphAttributes;if((Ur.position!==void 0||Ur.normal!==void 0||Ur.color!==void 0&&pt.isWebGL2===!0)&&Tt.update(Wt,$t,vt,Bs),(Li||Ar.receiveShadow!==Wt.receiveShadow)&&(Ar.receiveShadow=Wt.receiveShadow,Cn.setValue(Ne,"receiveShadow",Wt.receiveShadow)),Li&&(Cn.setValue(Ne,"toneMappingExposure",M.toneMappingExposure),Ar.needsLights&&nn(Mr,Ir),Un&&vt.fog===!0&&Mt.refreshFogUniforms(Mr,Un),Mt.refreshMaterialUniforms(Mr,vt,J,ae,se),EA.upload(Ne,Ar.uniformsList,Mr,je)),vt.isShaderMaterial&&vt.uniformsNeedUpdate===!0&&(EA.upload(Ne,Ar.uniformsList,Mr,je),vt.uniformsNeedUpdate=!1),vt.isSpriteMaterial&&Cn.setValue(Ne,"center",Wt.center),Cn.setValue(Ne,"modelViewMatrix",Wt.modelViewMatrix),Cn.setValue(Ne,"normalMatrix",Wt.normalMatrix),Cn.setValue(Ne,"modelMatrix",Wt.matrixWorld),vt.isShaderMaterial||vt.isRawShaderMaterial){const _r=vt.uniformsGroups;for(let Di=0,Ts=_r.length;Di<Ts;Di++)if(pt.isWebGL2){const hi=_r[Di];Q.update(hi,Bs),Q.bind(hi,Bs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Bs}function nn(De,gt){De.ambientLightColor.needsUpdate=gt,De.lightProbe.needsUpdate=gt,De.directionalLights.needsUpdate=gt,De.directionalLightShadows.needsUpdate=gt,De.pointLights.needsUpdate=gt,De.pointLightShadows.needsUpdate=gt,De.spotLights.needsUpdate=gt,De.spotLightShadows.needsUpdate=gt,De.rectAreaLights.needsUpdate=gt,De.hemisphereLights.needsUpdate=gt}function On(De){return De.isMeshLambertMaterial||De.isMeshToonMaterial||De.isMeshPhongMaterial||De.isMeshStandardMaterial||De.isShadowMaterial||De.isShaderMaterial&&De.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(De,gt,$t){Ae.get(De.texture).__webglTexture=gt,Ae.get(De.depthTexture).__webglTexture=$t;const vt=Ae.get(De);vt.__hasExternalTextures=!0,vt.__hasExternalTextures&&(vt.__autoAllocateDepthBuffer=$t===void 0,vt.__autoAllocateDepthBuffer||st.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),vt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(De,gt){const $t=Ae.get(De);$t.__webglFramebuffer=gt,$t.__useDefaultFramebuffer=gt===void 0},this.setRenderTarget=function(De,gt=0,$t=0){P=De,L=gt,O=$t;let vt=!0;if(De){const mr=Ae.get(De);mr.__useDefaultFramebuffer!==void 0?(dt.bindFramebuffer(36160,null),vt=!1):mr.__webglFramebuffer===void 0?je.setupRenderTarget(De):mr.__hasExternalTextures&&je.rebindTextures(De,Ae.get(De.texture).__webglTexture,Ae.get(De.depthTexture).__webglTexture)}let Wt=null,Un=!1,tr=!1;if(De){const mr=De.texture;(mr.isData3DTexture||mr.isDataArrayTexture)&&(tr=!0);const wr=Ae.get(De).__webglFramebuffer;De.isWebGLCubeRenderTarget?(Wt=wr[gt],Un=!0):pt.isWebGL2&&De.samples>0&&je.useMultisampledRTT(De)===!1?Wt=Ae.get(De).__webglMultisampledFramebuffer:Wt=wr,G.copy(De.viewport),j.copy(De.scissor),H=De.scissorTest}else G.copy(le).multiplyScalar(J).floor(),j.copy(ce).multiplyScalar(J).floor(),H=be;if(dt.bindFramebuffer(36160,Wt)&&pt.drawBuffers&&vt&&dt.drawBuffers(De,Wt),dt.viewport(G),dt.scissor(j),dt.setScissorTest(H),Un){const mr=Ae.get(De.texture);Ne.framebufferTexture2D(36160,36064,34069+gt,mr.__webglTexture,$t)}else if(tr){const mr=Ae.get(De.texture),wr=gt||0;Ne.framebufferTextureLayer(36160,36064,mr.__webglTexture,$t||0,wr)}B=-1},this.readRenderTargetPixels=function(De,gt,$t,vt,Wt,Un,tr){if(!(De&&De.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let mr=Ae.get(De).__webglFramebuffer;if(De.isWebGLCubeRenderTarget&&tr!==void 0&&(mr=mr[tr]),mr){dt.bindFramebuffer(36160,mr);try{const wr=De.texture,si=wr.format,Nr=wr.type;if(si!==Ff&&Ke.convert(si)!==Ne.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jr=Nr===M1&&(st.has("EXT_color_buffer_half_float")||pt.isWebGL2&&st.has("EXT_color_buffer_float"));if(Nr!==tp&&Ke.convert(Nr)!==Ne.getParameter(35738)&&!(Nr===j0&&(pt.isWebGL2||st.has("OES_texture_float")||st.has("WEBGL_color_buffer_float")))&&!jr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}gt>=0&&gt<=De.width-vt&&$t>=0&&$t<=De.height-Wt&&Ne.readPixels(gt,$t,vt,Wt,Ke.convert(si),Ke.convert(Nr),Un)}finally{const wr=P!==null?Ae.get(P).__webglFramebuffer:null;dt.bindFramebuffer(36160,wr)}}},this.copyFramebufferToTexture=function(De,gt,$t=0){const vt=Math.pow(2,-$t),Wt=Math.floor(gt.image.width*vt),Un=Math.floor(gt.image.height*vt);je.setTexture2D(gt,0),Ne.copyTexSubImage2D(3553,$t,0,0,De.x,De.y,Wt,Un),dt.unbindTexture()},this.copyTextureToTexture=function(De,gt,$t,vt=0){const Wt=gt.image.width,Un=gt.image.height,tr=Ke.convert($t.format),mr=Ke.convert($t.type);je.setTexture2D($t,0),Ne.pixelStorei(37440,$t.flipY),Ne.pixelStorei(37441,$t.premultiplyAlpha),Ne.pixelStorei(3317,$t.unpackAlignment),gt.isDataTexture?Ne.texSubImage2D(3553,vt,De.x,De.y,Wt,Un,tr,mr,gt.image.data):gt.isCompressedTexture?Ne.compressedTexSubImage2D(3553,vt,De.x,De.y,gt.mipmaps[0].width,gt.mipmaps[0].height,tr,gt.mipmaps[0].data):Ne.texSubImage2D(3553,vt,De.x,De.y,tr,mr,gt.image),vt===0&&$t.generateMipmaps&&Ne.generateMipmap(3553),dt.unbindTexture()},this.copyTextureToTexture3D=function(De,gt,$t,vt,Wt=0){if(M.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Un=De.max.x-De.min.x+1,tr=De.max.y-De.min.y+1,mr=De.max.z-De.min.z+1,wr=Ke.convert(vt.format),si=Ke.convert(vt.type);let Nr;if(vt.isData3DTexture)je.setTexture3D(vt,0),Nr=32879;else if(vt.isDataArrayTexture)je.setTexture2DArray(vt,0),Nr=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Ne.pixelStorei(37440,vt.flipY),Ne.pixelStorei(37441,vt.premultiplyAlpha),Ne.pixelStorei(3317,vt.unpackAlignment);const jr=Ne.getParameter(3314),bs=Ne.getParameter(32878),Ia=Ne.getParameter(3316),Eo=Ne.getParameter(3315),Wl=Ne.getParameter(32877),en=$t.isCompressedTexture?$t.mipmaps[0]:$t.image;Ne.pixelStorei(3314,en.width),Ne.pixelStorei(32878,en.height),Ne.pixelStorei(3316,De.min.x),Ne.pixelStorei(3315,De.min.y),Ne.pixelStorei(32877,De.min.z),$t.isDataTexture||$t.isData3DTexture?Ne.texSubImage3D(Nr,Wt,gt.x,gt.y,gt.z,Un,tr,mr,wr,si,en.data):$t.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ne.compressedTexSubImage3D(Nr,Wt,gt.x,gt.y,gt.z,Un,tr,mr,wr,en.data)):Ne.texSubImage3D(Nr,Wt,gt.x,gt.y,gt.z,Un,tr,mr,wr,si,en),Ne.pixelStorei(3314,jr),Ne.pixelStorei(32878,bs),Ne.pixelStorei(3316,Ia),Ne.pixelStorei(3315,Eo),Ne.pixelStorei(32877,Wl),Wt===0&&vt.generateMipmaps&&Ne.generateMipmap(Nr),dt.unbindTexture()},this.initTexture=function(De){De.isCubeTexture?je.setTextureCube(De,0):De.isData3DTexture?je.setTexture3D(De,0):De.isDataArrayTexture?je.setTexture2DArray(De,0):je.setTexture2D(De,0),dt.unbindTexture()},this.resetState=function(){L=0,O=0,P=null,dt.reset(),Oe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class bK extends PP{}bK.prototype.isWebGL1Renderer=!0;class JR{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Nn(e),this.density=t}clone(){return new JR(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class qR{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Nn(e),this.near=t,this.far=i}clone(){return new qR(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class u$ extends to{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}class QR{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=o$,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Am()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Am()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Am()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Jp=new Me;class xm{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Jp.fromBufferAttribute(this,t),Jp.applyMatrix4(e),this.setXYZ(t,Jp.x,Jp.y,Jp.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Jp.fromBufferAttribute(this,t),Jp.applyNormalMatrix(e),this.setXYZ(t,Jp.x,Jp.y,Jp.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Jp.fromBufferAttribute(this,t),Jp.transformDirection(e),this.setXYZ(t,Jp.x,Jp.y,Jp.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new Do(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new xm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class FP extends od{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Nn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let iS;const kx=new Me,sS=new Me,oS=new Me,aS=new Vt,Ox=new Vt,TK=new qr,cM=new Me,Lx=new Me,hM=new Me,v5=new Vt,SO=new Vt,b5=new Vt;class SK extends to{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",iS===void 0){iS=new ai;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new QR(t,5);iS.setIndex([0,1,2,0,2,3]),iS.setAttribute("position",new xm(i,3,0,!1)),iS.setAttribute("uv",new xm(i,2,3,!1))}this.geometry=iS,this.material=e!==void 0?e:new FP,this.center=new Vt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),sS.setFromMatrixScale(this.matrixWorld),TK.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),oS.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&sS.multiplyScalar(-oS.z);const i=this.material.rotation;let s,o;i!==0&&(o=Math.cos(i),s=Math.sin(i));const l=this.center;dM(cM.set(-.5,-.5,0),oS,l,sS,s,o),dM(Lx.set(.5,-.5,0),oS,l,sS,s,o),dM(hM.set(.5,.5,0),oS,l,sS,s,o),v5.set(0,0),SO.set(1,0),b5.set(1,1);let u=e.ray.intersectTriangle(cM,Lx,hM,!1,kx);if(u===null&&(dM(Lx.set(-.5,.5,0),oS,l,sS,s,o),SO.set(0,1),u=e.ray.intersectTriangle(cM,hM,Lx,!1,kx),u===null))return;const d=e.ray.origin.distanceTo(kx);d<e.near||d>e.far||t.push({distance:d,point:kx.clone(),uv:Sm.getUV(kx,cM,Lx,hM,v5,SO,b5,new Vt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function dM(n,e,t,i,s,o){aS.subVectors(n,t).addScalar(.5).multiply(i),s!==void 0?(Ox.x=o*aS.x-s*aS.y,Ox.y=s*aS.x+o*aS.y):Ox.copy(aS),n.copy(e),n.x+=Ox.x,n.y+=Ox.y,n.applyMatrix4(TK)}const pM=new Me,T5=new Me;class EK extends to{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,s=t.length;i<s;i++){const o=t[i];this.addLevel(o.object.clone(),o.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,s;for(i=1,s=t.length;i<s&&!(e<t[i].distance);i++);return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){pM.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(pM);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){pM.setFromMatrixPosition(e.matrixWorld),T5.setFromMatrixPosition(this.matrixWorld);const i=pM.distanceTo(T5)/e.zoom;t[0].object.visible=!0;let s,o;for(s=1,o=t.length;s<o&&i>=t[s].distance;s++)t[s-1].object.visible=!1,t[s].object.visible=!0;for(this._currentLevel=s-1;s<o;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let s=0,o=i.length;s<o;s++){const l=i[s];t.object.levels.push({object:l.object.uuid,distance:l.distance})}return t}}const S5=new Me,E5=new vs,x5=new vs,oSe=new Me,w5=new qr;class xK extends Fn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new qr,this.bindMatrixInverse=new qr}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new vs,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,s=this.geometry;E5.fromBufferAttribute(s.attributes.skinIndex,e),x5.fromBufferAttribute(s.attributes.skinWeight,e),S5.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=x5.getComponent(o);if(l!==0){const u=E5.getComponent(o);w5.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(oSe.copy(S5).applyMatrix4(w5),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class zP extends to{constructor(){super(),this.isBone=!0,this.type="Bone"}}class WS extends ac{constructor(e=null,t=1,i=1,s,o,l,u,d,p=Ul,_=Ul,v,b){super(null,l,u,d,p,_,s,o,v,b),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const $5=new qr,aSe=new qr;class ZR{constructor(e=[],t=[]){this.uuid=Am(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new qr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new qr;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:aSe;$5.multiplyMatrices(u,t[o]),$5.toArray(i,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new ZR(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=oK(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new WS(t,e,e,Ff,j0);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const o=e.bones[i];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new zP),this.bones.push(l),this.boneInverses.push(new qr().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=i[s];e.boneInverses.push(u.toArray())}return e}}class A1 extends Do{constructor(e,t,i,s=1){typeof i=="number"&&(s=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const C5=new qr,M5=new qr,fM=[],Dx=new Fn;class wK extends Fn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new A1(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,s=this.count;if(Dx.geometry=this.geometry,Dx.material=this.material,Dx.material!==void 0)for(let o=0;o<s;o++){this.getMatrixAt(o,C5),M5.multiplyMatrices(i,C5),Dx.matrixWorld=M5,Dx.raycast(e,fM);for(let l=0,u=fM.length;l<u;l++){const d=fM[l];d.instanceId=o,d.object=this,t.push(d)}fM.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new A1(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Rp extends od{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Nn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const A5=new Me,I5=new Me,R5=new qr,EO=new F$,mM=new s_;class wp extends to{constructor(e=new ai,t=new Rp){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,o=t.count;s<o;s++)A5.fromBufferAttribute(t,s-1),I5.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=A5.distanceTo(I5);e.setAttribute("lineDistance",new sr(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),mM.copy(i.boundingSphere),mM.applyMatrix4(s),mM.radius+=o,e.ray.intersectsSphere(mM)===!1)return;R5.copy(s).invert(),EO.copy(e.ray).applyMatrix4(R5);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=new Me,_=new Me,v=new Me,b=new Me,E=this.isLineSegments?2:1,C=i.index,M=i.attributes.position;if(C!==null){const I=Math.max(0,l.start),L=Math.min(C.count,l.start+l.count);for(let O=I,P=L-1;O<P;O+=E){const B=C.getX(O),z=C.getX(O+1);if(p.fromBufferAttribute(M,B),_.fromBufferAttribute(M,z),EO.distanceSqToSegment(p,_,b,v)>d)continue;b.applyMatrix4(this.matrixWorld);const G=e.ray.origin.distanceTo(b);G<e.near||G>e.far||t.push({distance:G,point:v.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:null,object:this})}}else{const I=Math.max(0,l.start),L=Math.min(M.count,l.start+l.count);for(let O=I,P=L-1;O<P;O+=E){if(p.fromBufferAttribute(M,O),_.fromBufferAttribute(M,O+1),EO.distanceSqToSegment(p,_,b,v)>d)continue;b.applyMatrix4(this.matrixWorld);const B=e.ray.origin.distanceTo(b);B<e.near||B>e.far||t.push({distance:B,point:v.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const k5=new Me,O5=new Me;class o_ extends wp{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,o=t.count;s<o;s+=2)k5.fromBufferAttribute(t,s),O5.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+k5.distanceTo(O5);e.setAttribute("lineDistance",new sr(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class $K extends wp{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class ek extends od{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Nn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const L5=new qr,rN=new F$,gM=new s_,_M=new Me;class CK extends to{constructor(e=new ai,t=new ek){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),gM.copy(i.boundingSphere),gM.applyMatrix4(s),gM.radius+=o,e.ray.intersectsSphere(gM)===!1)return;L5.copy(s).invert(),rN.copy(e.ray).applyMatrix4(L5);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=i.index,_=i.attributes.position;if(p!==null){const v=Math.max(0,l.start),b=Math.min(p.count,l.start+l.count);for(let E=v,C=b;E<C;E++){const M=p.getX(E);_M.fromBufferAttribute(_,M),D5(_M,M,d,s,e,t,this)}}else{const v=Math.max(0,l.start),b=Math.min(_.count,l.start+l.count);for(let E=v,C=b;E<C;E++)_M.fromBufferAttribute(_,E),D5(_M,E,d,s,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function D5(n,e,t,i,s,o,l){const u=rN.distanceSqToPoint(n);if(u<t){const d=new Me;rN.closestPointToPoint(n,d),d.applyMatrix4(i);const p=s.ray.origin.distanceTo(d);if(p<s.near||p>s.far)return;o.push({distance:p,distanceToRay:Math.sqrt(u),point:d,index:e,face:null,object:l})}}class lSe extends ac{constructor(e,t,i,s,o,l,u,d,p){super(e,t,i,s,o,l,u,d,p),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:bl,this.magFilter=o!==void 0?o:bl,this.generateMipmaps=!1;const _=this;function v(){_.needsUpdate=!0,e.requestVideoFrameCallback(v)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(v)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class uSe extends ac{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=Ul,this.minFilter=Ul,this.generateMipmaps=!1,this.needsUpdate=!0}}class MK extends ac{constructor(e,t,i,s,o,l,u,d,p,_,v,b){super(null,l,u,d,p,_,s,o,v,b),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class cSe extends ac{constructor(e,t,i,s,o,l,u,d,p){super(e,t,i,s,o,l,u,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class i0{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),o=0;t.push(0);for(let l=1;l<=e;l++)i=this.getPoint(l/e),o+=i.distanceTo(s),t.push(o),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let s=0;const o=i.length;let l;t?l=t:l=e*i[o-1];let u=0,d=o-1,p;for(;u<=d;)if(s=Math.floor(u+(d-u)/2),p=i[s]-l,p<0)u=s+1;else if(p>0)d=s-1;else{d=s;break}if(s=d,i[s]===l)return s/(o-1);const _=i[s],v=i[s+1]-_,b=(l-_)/v;return(s+b)/(o-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),l=this.getPoint(s),u=t||(o.isVector2?new Vt:new Me);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new Me,s=[],o=[],l=[],u=new Me,d=new qr;for(let E=0;E<=e;E++){const C=E/e;s[E]=this.getTangentAt(C,new Me)}o[0]=new Me,l[0]=new Me;let p=Number.MAX_VALUE;const _=Math.abs(s[0].x),v=Math.abs(s[0].y),b=Math.abs(s[0].z);_<=p&&(p=_,i.set(1,0,0)),v<=p&&(p=v,i.set(0,1,0)),b<=p&&i.set(0,0,1),u.crossVectors(s[0],i).normalize(),o[0].crossVectors(s[0],u),l[0].crossVectors(s[0],o[0]);for(let E=1;E<=e;E++){if(o[E]=o[E-1].clone(),l[E]=l[E-1].clone(),u.crossVectors(s[E-1],s[E]),u.length()>Number.EPSILON){u.normalize();const C=Math.acos(oh(s[E-1].dot(s[E]),-1,1));o[E].applyMatrix4(d.makeRotationAxis(u,C))}l[E].crossVectors(s[E],o[E])}if(t===!0){let E=Math.acos(oh(o[0].dot(o[e]),-1,1));E/=e,s[0].dot(u.crossVectors(o[0],o[e]))>0&&(E=-E);for(let C=1;C<=e;C++)o[C].applyMatrix4(d.makeRotationAxis(s[C],E*C)),l[C].crossVectors(s[C],o[C])}return{tangents:s,normals:o,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class tk extends i0{constructor(e=0,t=0,i=1,s=1,o=0,l=Math.PI*2,u=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=l,this.aClockwise=u,this.aRotation=d}getPoint(e,t){const i=t||new Vt,s=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const l=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=s;for(;o>s;)o-=s;o<Number.EPSILON&&(l?o=0:o=s),this.aClockwise===!0&&!l&&(o===s?o=-s:o=o-s);const u=this.aStartAngle+e*o;let d=this.aX+this.xRadius*Math.cos(u),p=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const _=Math.cos(this.aRotation),v=Math.sin(this.aRotation),b=d-this.aX,E=p-this.aY;d=b*_-E*v+this.aX,p=b*v+E*_+this.aY}return i.set(d,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class AK extends tk{constructor(e,t,i,s,o,l){super(e,t,i,i,s,o,l),this.isArcCurve=!0,this.type="ArcCurve"}}function UP(){let n=0,e=0,t=0,i=0;function s(o,l,u,d){n=o,e=u,t=-3*o+3*l-2*u-d,i=2*o-2*l+u+d}return{initCatmullRom:function(o,l,u,d,p){s(l,u,p*(u-o),p*(d-l))},initNonuniformCatmullRom:function(o,l,u,d,p,_,v){let b=(l-o)/p-(u-o)/(p+_)+(u-l)/_,E=(u-l)/_-(d-l)/(_+v)+(d-u)/v;b*=_,E*=_,s(l,u,b,E)},calc:function(o){const l=o*o,u=l*o;return n+e*o+t*l+i*u}}}const yM=new Me,xO=new UP,wO=new UP,$O=new UP;class IK extends i0{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new Me){const i=t,s=this.points,o=s.length,l=(o-(this.closed?0:1))*e;let u=Math.floor(l),d=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:d===0&&u===o-1&&(u=o-2,d=1);let p,_;this.closed||u>0?p=s[(u-1)%o]:(yM.subVectors(s[0],s[1]).add(s[0]),p=yM);const v=s[u%o],b=s[(u+1)%o];if(this.closed||u+2<o?_=s[(u+2)%o]:(yM.subVectors(s[o-1],s[o-2]).add(s[o-1]),_=yM),this.curveType==="centripetal"||this.curveType==="chordal"){const E=this.curveType==="chordal"?.5:.25;let C=Math.pow(p.distanceToSquared(v),E),M=Math.pow(v.distanceToSquared(b),E),I=Math.pow(b.distanceToSquared(_),E);M<1e-4&&(M=1),C<1e-4&&(C=M),I<1e-4&&(I=M),xO.initNonuniformCatmullRom(p.x,v.x,b.x,_.x,C,M,I),wO.initNonuniformCatmullRom(p.y,v.y,b.y,_.y,C,M,I),$O.initNonuniformCatmullRom(p.z,v.z,b.z,_.z,C,M,I)}else this.curveType==="catmullrom"&&(xO.initCatmullRom(p.x,v.x,b.x,_.x,this.tension),wO.initCatmullRom(p.y,v.y,b.y,_.y,this.tension),$O.initCatmullRom(p.z,v.z,b.z,_.z,this.tension));return i.set(xO.calc(d),wO.calc(d),$O.calc(d)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new Me().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function N5(n,e,t,i,s){const o=(i-e)*.5,l=(s-t)*.5,u=n*n,d=n*u;return(2*t-2*i+o+l)*d+(-3*t+3*i-2*o-l)*u+o*n+t}function hSe(n,e){const t=1-n;return t*t*e}function dSe(n,e){return 2*(1-n)*n*e}function pSe(n,e){return n*n*e}function bw(n,e,t,i){return hSe(n,e)+dSe(n,t)+pSe(n,i)}function fSe(n,e){const t=1-n;return t*t*t*e}function mSe(n,e){const t=1-n;return 3*t*t*n*e}function gSe(n,e){return 3*(1-n)*n*n*e}function _Se(n,e){return n*n*n*e}function Tw(n,e,t,i,s){return fSe(n,e)+mSe(n,t)+gSe(n,i)+_Se(n,s)}class HP extends i0{constructor(e=new Vt,t=new Vt,i=new Vt,s=new Vt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Vt){const i=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return i.set(Tw(e,s.x,o.x,l.x,u.x),Tw(e,s.y,o.y,l.y,u.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class RK extends i0{constructor(e=new Me,t=new Me,i=new Me,s=new Me){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Me){const i=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return i.set(Tw(e,s.x,o.x,l.x,u.x),Tw(e,s.y,o.y,l.y,u.y),Tw(e,s.z,o.z,l.z,u.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class nk extends i0{constructor(e=new Vt,t=new Vt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Vt){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Vt;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kK extends i0{constructor(e=new Me,t=new Me){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Me){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class GP extends i0{constructor(e=new Vt,t=new Vt,i=new Vt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Vt){const i=t,s=this.v0,o=this.v1,l=this.v2;return i.set(bw(e,s.x,o.x,l.x),bw(e,s.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WP extends i0{constructor(e=new Me,t=new Me,i=new Me){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Me){const i=t,s=this.v0,o=this.v1,l=this.v2;return i.set(bw(e,s.x,o.x,l.x),bw(e,s.y,o.y,l.y),bw(e,s.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class VP extends i0{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Vt){const i=t,s=this.points,o=(s.length-1)*e,l=Math.floor(o),u=o-l,d=s[l===0?l:l-1],p=s[l],_=s[l>s.length-2?s.length-1:l+1],v=s[l>s.length-3?s.length-1:l+2];return i.set(N5(u,d.x,p.x,_.x,v.x),N5(u,d.y,p.y,_.y,v.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new Vt().fromArray(s))}return this}}var jP=Object.freeze({__proto__:null,ArcCurve:AK,CatmullRomCurve3:IK,CubicBezierCurve:HP,CubicBezierCurve3:RK,EllipseCurve:tk,LineCurve:nk,LineCurve3:kK,QuadraticBezierCurve:GP,QuadraticBezierCurve3:WP,SplineCurve:VP});class OK extends i0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new nk(t,e))}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=i){const l=s[o]-i,u=this.curves[o],d=u.getLength(),p=d===0?0:1-l/d;return u.getPointAt(p,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,o=this.curves;s<o.length;s++){const l=o[s],u=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,d=l.getPoints(u);for(let p=0;p<d.length;p++){const _=d[p];i&&i.equals(_)||(t.push(_),i=_)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(new jP[s.type]().fromJSON(s))}return this}}class c$ extends OK{constructor(e){super(),this.type="Path",this.currentPoint=new Vt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new nk(this.currentPoint.clone(),new Vt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const o=new GP(this.currentPoint.clone(),new Vt(e,t),new Vt(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,o,l){const u=new HP(this.currentPoint.clone(),new Vt(e,t),new Vt(i,s),new Vt(o,l));return this.curves.push(u),this.currentPoint.set(o,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new VP(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,o,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+u,t+d,i,s,o,l),this}absarc(e,t,i,s,o,l){return this.absellipse(e,t,i,i,s,o,l),this}ellipse(e,t,i,s,o,l,u,d){const p=this.currentPoint.x,_=this.currentPoint.y;return this.absellipse(e+p,t+_,i,s,o,l,u,d),this}absellipse(e,t,i,s,o,l,u,d){const p=new tk(e,t,i,s,o,l,u,d);if(this.curves.length>0){const v=p.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(p);const _=p.getPoint(1);return this.currentPoint.copy(_),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class I1 extends ai{constructor(e=[new Vt(0,-.5),new Vt(.5,0),new Vt(0,.5)],t=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:s},t=Math.floor(t),s=oh(s,0,Math.PI*2);const o=[],l=[],u=[],d=[],p=[],_=1/t,v=new Me,b=new Vt,E=new Me,C=new Me,M=new Me;let I=0,L=0;for(let O=0;O<=e.length-1;O++)switch(O){case 0:I=e[O+1].x-e[O].x,L=e[O+1].y-e[O].y,E.x=L*1,E.y=-I,E.z=L*0,M.copy(E),E.normalize(),d.push(E.x,E.y,E.z);break;case e.length-1:d.push(M.x,M.y,M.z);break;default:I=e[O+1].x-e[O].x,L=e[O+1].y-e[O].y,E.x=L*1,E.y=-I,E.z=L*0,C.copy(E),E.x+=M.x,E.y+=M.y,E.z+=M.z,E.normalize(),d.push(E.x,E.y,E.z),M.copy(C)}for(let O=0;O<=t;O++){const P=i+O*_*s,B=Math.sin(P),z=Math.cos(P);for(let G=0;G<=e.length-1;G++){v.x=e[G].x*B,v.y=e[G].y,v.z=e[G].x*z,l.push(v.x,v.y,v.z),b.x=O/t,b.y=G/(e.length-1),u.push(b.x,b.y);const j=d[3*G+0]*B,H=d[3*G+1],Z=d[3*G+0]*z;p.push(j,H,Z)}}for(let O=0;O<t;O++)for(let P=0;P<e.length-1;P++){const B=P+O*e.length,z=B,G=B+e.length,j=B+e.length+1,H=B+1;o.push(z,G,H),o.push(j,H,G)}this.setIndex(o),this.setAttribute("position",new sr(l,3)),this.setAttribute("uv",new sr(u,2)),this.setAttribute("normal",new sr(p,3))}static fromJSON(e){return new I1(e.points,e.segments,e.phiStart,e.phiLength)}}class cE extends I1{constructor(e=1,t=1,i=4,s=8){const o=new c$;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:s}}static fromJSON(e){return new cE(e.radius,e.length,e.capSegments,e.radialSegments)}}class hE extends ai{constructor(e=1,t=8,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:s},t=Math.max(3,t);const o=[],l=[],u=[],d=[],p=new Me,_=new Vt;l.push(0,0,0),u.push(0,0,1),d.push(.5,.5);for(let v=0,b=3;v<=t;v++,b+=3){const E=i+v/t*s;p.x=e*Math.cos(E),p.y=e*Math.sin(E),l.push(p.x,p.y,p.z),u.push(0,0,1),_.x=(l[b]/e+1)/2,_.y=(l[b+1]/e+1)/2,d.push(_.x,_.y)}for(let v=1;v<=t;v++)o.push(v,v+1,0);this.setIndex(o),this.setAttribute("position",new sr(l,3)),this.setAttribute("normal",new sr(u,3)),this.setAttribute("uv",new sr(d,2))}static fromJSON(e){return new hE(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class zl extends ai{constructor(e=1,t=1,i=1,s=8,o=1,l=!1,u=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:s,heightSegments:o,openEnded:l,thetaStart:u,thetaLength:d};const p=this;s=Math.floor(s),o=Math.floor(o);const _=[],v=[],b=[],E=[];let C=0;const M=[],I=i/2;let L=0;O(),l===!1&&(e>0&&P(!0),t>0&&P(!1)),this.setIndex(_),this.setAttribute("position",new sr(v,3)),this.setAttribute("normal",new sr(b,3)),this.setAttribute("uv",new sr(E,2));function O(){const B=new Me,z=new Me;let G=0;const j=(t-e)/i;for(let H=0;H<=o;H++){const Z=[],ae=H/o,J=ae*(t-e)+e;for(let te=0;te<=s;te++){const he=te/s,le=he*d+u,ce=Math.sin(le),be=Math.cos(le);z.x=J*ce,z.y=-ae*i+I,z.z=J*be,v.push(z.x,z.y,z.z),B.set(ce,j,be).normalize(),b.push(B.x,B.y,B.z),E.push(he,1-ae),Z.push(C++)}M.push(Z)}for(let H=0;H<s;H++)for(let Z=0;Z<o;Z++){const ae=M[Z][H],J=M[Z+1][H],te=M[Z+1][H+1],he=M[Z][H+1];_.push(ae,J,he),_.push(J,te,he),G+=6}p.addGroup(L,G,0),L+=G}function P(B){const z=C,G=new Vt,j=new Me;let H=0;const Z=B===!0?e:t,ae=B===!0?1:-1;for(let te=1;te<=s;te++)v.push(0,I*ae,0),b.push(0,ae,0),E.push(.5,.5),C++;const J=C;for(let te=0;te<=s;te++){const he=te/s*d+u,le=Math.cos(he),ce=Math.sin(he);j.x=Z*ce,j.y=I*ae,j.z=Z*le,v.push(j.x,j.y,j.z),b.push(0,ae,0),G.x=le*.5+.5,G.y=ce*.5*ae+.5,E.push(G.x,G.y),C++}for(let te=0;te<s;te++){const he=z+te,le=J+te;B===!0?_.push(le,le+1,he):_.push(le+1,le,he),H+=3}p.addGroup(L,H,B===!0?1:2),L+=H}}static fromJSON(e){return new zl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class dE extends zl{constructor(e=1,t=1,i=8,s=1,o=!1,l=0,u=Math.PI*2){super(0,e,t,i,s,o,l,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:u}}static fromJSON(e){return new dE(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class t_ extends ai{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const o=[],l=[];u(s),p(i),_(),this.setAttribute("position",new sr(o,3)),this.setAttribute("normal",new sr(o.slice(),3)),this.setAttribute("uv",new sr(l,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function u(O){const P=new Me,B=new Me,z=new Me;for(let G=0;G<t.length;G+=3)E(t[G+0],P),E(t[G+1],B),E(t[G+2],z),d(P,B,z,O)}function d(O,P,B,z){const G=z+1,j=[];for(let H=0;H<=G;H++){j[H]=[];const Z=O.clone().lerp(B,H/G),ae=P.clone().lerp(B,H/G),J=G-H;for(let te=0;te<=J;te++)te===0&&H===G?j[H][te]=Z:j[H][te]=Z.clone().lerp(ae,te/J)}for(let H=0;H<G;H++)for(let Z=0;Z<2*(G-H)-1;Z++){const ae=Math.floor(Z/2);Z%2===0?(b(j[H][ae+1]),b(j[H+1][ae]),b(j[H][ae])):(b(j[H][ae+1]),b(j[H+1][ae+1]),b(j[H+1][ae]))}}function p(O){const P=new Me;for(let B=0;B<o.length;B+=3)P.x=o[B+0],P.y=o[B+1],P.z=o[B+2],P.normalize().multiplyScalar(O),o[B+0]=P.x,o[B+1]=P.y,o[B+2]=P.z}function _(){const O=new Me;for(let P=0;P<o.length;P+=3){O.x=o[P+0],O.y=o[P+1],O.z=o[P+2];const B=I(O)/2/Math.PI+.5,z=L(O)/Math.PI+.5;l.push(B,1-z)}C(),v()}function v(){for(let O=0;O<l.length;O+=6){const P=l[O+0],B=l[O+2],z=l[O+4],G=Math.max(P,B,z),j=Math.min(P,B,z);G>.9&&j<.1&&(P<.2&&(l[O+0]+=1),B<.2&&(l[O+2]+=1),z<.2&&(l[O+4]+=1))}}function b(O){o.push(O.x,O.y,O.z)}function E(O,P){const B=O*3;P.x=e[B+0],P.y=e[B+1],P.z=e[B+2]}function C(){const O=new Me,P=new Me,B=new Me,z=new Me,G=new Vt,j=new Vt,H=new Vt;for(let Z=0,ae=0;Z<o.length;Z+=9,ae+=6){O.set(o[Z+0],o[Z+1],o[Z+2]),P.set(o[Z+3],o[Z+4],o[Z+5]),B.set(o[Z+6],o[Z+7],o[Z+8]),G.set(l[ae+0],l[ae+1]),j.set(l[ae+2],l[ae+3]),H.set(l[ae+4],l[ae+5]),z.copy(O).add(P).add(B).divideScalar(3);const J=I(z);M(G,ae+0,O,J),M(j,ae+2,P,J),M(H,ae+4,B,J)}}function M(O,P,B,z){z<0&&O.x===1&&(l[P]=O.x-1),B.x===0&&B.z===0&&(l[P]=z/2/Math.PI+.5)}function I(O){return Math.atan2(O.z,-O.x)}function L(O){return Math.atan2(-O.y,Math.sqrt(O.x*O.x+O.z*O.z))}}static fromJSON(e){return new t_(e.vertices,e.indices,e.radius,e.details)}}class pE extends t_{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new pE(e.radius,e.detail)}}const vM=new Me,bM=new Me,CO=new Me,TM=new Sm;class LK extends ai{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(p1*t),o=e.getIndex(),l=e.getAttribute("position"),u=o?o.count:l.count,d=[0,0,0],p=["a","b","c"],_=new Array(3),v={},b=[];for(let E=0;E<u;E+=3){o?(d[0]=o.getX(E),d[1]=o.getX(E+1),d[2]=o.getX(E+2)):(d[0]=E,d[1]=E+1,d[2]=E+2);const{a:C,b:M,c:I}=TM;if(C.fromBufferAttribute(l,d[0]),M.fromBufferAttribute(l,d[1]),I.fromBufferAttribute(l,d[2]),TM.getNormal(CO),_[0]=`${Math.round(C.x*i)},${Math.round(C.y*i)},${Math.round(C.z*i)}`,_[1]=`${Math.round(M.x*i)},${Math.round(M.y*i)},${Math.round(M.z*i)}`,_[2]=`${Math.round(I.x*i)},${Math.round(I.y*i)},${Math.round(I.z*i)}`,!(_[0]===_[1]||_[1]===_[2]||_[2]===_[0]))for(let L=0;L<3;L++){const O=(L+1)%3,P=_[L],B=_[O],z=TM[p[L]],G=TM[p[O]],j=`${P}_${B}`,H=`${B}_${P}`;H in v&&v[H]?(CO.dot(v[H].normal)<=s&&(b.push(z.x,z.y,z.z),b.push(G.x,G.y,G.z)),v[H]=null):j in v||(v[j]={index0:d[L],index1:d[O],normal:CO.clone()})}}for(const E in v)if(v[E]){const{index0:C,index1:M}=v[E];vM.fromBufferAttribute(l,C),bM.fromBufferAttribute(l,M),b.push(vM.x,vM.y,vM.z),b.push(bM.x,bM.y,bM.z)}this.setAttribute("position",new sr(b,3))}}}class g1 extends c${constructor(e){super(e),this.uuid=Am(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(new c$().fromJSON(s))}return this}}const ySe={triangulate:function(n,e,t=2){const i=e&&e.length,s=i?e[0]*t:n.length;let o=DK(n,0,s,t,!0);const l=[];if(!o||o.next===o.prev)return l;let u,d,p,_,v,b,E;if(i&&(o=ESe(n,e,o,t)),n.length>80*t){u=p=n[0],d=_=n[1];for(let C=t;C<s;C+=t)v=n[C],b=n[C+1],v<u&&(u=v),b<d&&(d=b),v>p&&(p=v),b>_&&(_=b);E=Math.max(p-u,_-d),E=E!==0?1/E:0}return h$(o,l,t,u,d,E),l}};function DK(n,e,t,i,s){let o,l;if(s===LSe(n,e,t,i)>0)for(o=e;o<t;o+=i)l=B5(o,n[o],n[o+1],l);else for(o=t-i;o>=e;o-=i)l=B5(o,n[o],n[o+1],l);return l&&rk(l,l.next)&&(p$(l),l=l.next),l}function Mv(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(rk(t,t.next)||rc(t.prev,t,t.next)===0)){if(p$(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function h$(n,e,t,i,s,o,l){if(!n)return;!l&&o&&MSe(n,i,s,o);let u=n,d,p;for(;n.prev!==n.next;){if(d=n.prev,p=n.next,o?bSe(n,i,s,o):vSe(n)){e.push(d.i/t),e.push(n.i/t),e.push(p.i/t),p$(n),n=p.next,u=p.next;continue}if(n=p,n===u){l?l===1?(n=TSe(Mv(n),e,t),h$(n,e,t,i,s,o,2)):l===2&&SSe(n,e,t,i,s,o):h$(Mv(n),e,t,i,s,o,1);break}}}function vSe(n){const e=n.prev,t=n,i=n.next;if(rc(e,t,i)>=0)return!1;let s=n.next.next;for(;s!==n.prev;){if(IS(e.x,e.y,t.x,t.y,i.x,i.y,s.x,s.y)&&rc(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function bSe(n,e,t,i){const s=n.prev,o=n,l=n.next;if(rc(s,o,l)>=0)return!1;const u=s.x<o.x?s.x<l.x?s.x:l.x:o.x<l.x?o.x:l.x,d=s.y<o.y?s.y<l.y?s.y:l.y:o.y<l.y?o.y:l.y,p=s.x>o.x?s.x>l.x?s.x:l.x:o.x>l.x?o.x:l.x,_=s.y>o.y?s.y>l.y?s.y:l.y:o.y>l.y?o.y:l.y,v=iN(u,d,e,t,i),b=iN(p,_,e,t,i);let E=n.prevZ,C=n.nextZ;for(;E&&E.z>=v&&C&&C.z<=b;){if(E!==n.prev&&E!==n.next&&IS(s.x,s.y,o.x,o.y,l.x,l.y,E.x,E.y)&&rc(E.prev,E,E.next)>=0||(E=E.prevZ,C!==n.prev&&C!==n.next&&IS(s.x,s.y,o.x,o.y,l.x,l.y,C.x,C.y)&&rc(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;E&&E.z>=v;){if(E!==n.prev&&E!==n.next&&IS(s.x,s.y,o.x,o.y,l.x,l.y,E.x,E.y)&&rc(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;C&&C.z<=b;){if(C!==n.prev&&C!==n.next&&IS(s.x,s.y,o.x,o.y,l.x,l.y,C.x,C.y)&&rc(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function TSe(n,e,t){let i=n;do{const s=i.prev,o=i.next.next;!rk(s,o)&&NK(s,i,i.next,o)&&d$(s,o)&&d$(o,s)&&(e.push(s.i/t),e.push(i.i/t),e.push(o.i/t),p$(i),p$(i.next),i=n=o),i=i.next}while(i!==n);return Mv(i)}function SSe(n,e,t,i,s,o){let l=n;do{let u=l.next.next;for(;u!==l.prev;){if(l.i!==u.i&&RSe(l,u)){let d=BK(l,u);l=Mv(l,l.next),d=Mv(d,d.next),h$(l,e,t,i,s,o),h$(d,e,t,i,s,o);return}u=u.next}l=l.next}while(l!==n)}function ESe(n,e,t,i){const s=[];let o,l,u,d,p;for(o=0,l=e.length;o<l;o++)u=e[o]*i,d=o<l-1?e[o+1]*i:n.length,p=DK(n,u,d,i,!1),p===p.next&&(p.steiner=!0),s.push(ISe(p));for(s.sort(xSe),o=0;o<s.length;o++)wSe(s[o],t),t=Mv(t,t.next);return t}function xSe(n,e){return n.x-e.x}function wSe(n,e){if(e=$Se(n,e),e){const t=BK(e,n);Mv(e,e.next),Mv(t,t.next)}}function $Se(n,e){let t=e;const i=n.x,s=n.y;let o=-1/0,l;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const b=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(b<=i&&b>o){if(o=b,b===i){if(s===t.y)return t;if(s===t.next.y)return t.next}l=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!l)return null;if(i===o)return l;const u=l,d=l.x,p=l.y;let _=1/0,v;t=l;do i>=t.x&&t.x>=d&&i!==t.x&&IS(s<p?i:o,s,d,p,s<p?o:i,s,t.x,t.y)&&(v=Math.abs(s-t.y)/(i-t.x),d$(t,n)&&(v<_||v===_&&(t.x>l.x||t.x===l.x&&CSe(l,t)))&&(l=t,_=v)),t=t.next;while(t!==u);return l}function CSe(n,e){return rc(n.prev,n,e.prev)<0&&rc(e.next,n,n.next)<0}function MSe(n,e,t,i){let s=n;do s.z===null&&(s.z=iN(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,ASe(s)}function ASe(n){let e,t,i,s,o,l,u,d,p=1;do{for(t=n,n=null,o=null,l=0;t;){for(l++,i=t,u=0,e=0;e<p&&(u++,i=i.nextZ,!!i);e++);for(d=p;u>0||d>0&&i;)u!==0&&(d===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,u--):(s=i,i=i.nextZ,d--),o?o.nextZ=s:n=s,s.prevZ=o,o=s;t=i}o.nextZ=null,p*=2}while(l>1);return n}function iN(n,e,t,i,s){return n=32767*(n-t)*s,e=32767*(e-i)*s,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function ISe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function IS(n,e,t,i,s,o,l,u){return(s-l)*(e-u)-(n-l)*(o-u)>=0&&(n-l)*(i-u)-(t-l)*(e-u)>=0&&(t-l)*(o-u)-(s-l)*(i-u)>=0}function RSe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!kSe(n,e)&&(d$(n,e)&&d$(e,n)&&OSe(n,e)&&(rc(n.prev,n,e.prev)||rc(n,e.prev,e))||rk(n,e)&&rc(n.prev,n,n.next)>0&&rc(e.prev,e,e.next)>0)}function rc(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function rk(n,e){return n.x===e.x&&n.y===e.y}function NK(n,e,t,i){const s=EM(rc(n,e,t)),o=EM(rc(n,e,i)),l=EM(rc(t,i,n)),u=EM(rc(t,i,e));return!!(s!==o&&l!==u||s===0&&SM(n,t,e)||o===0&&SM(n,i,e)||l===0&&SM(t,n,i)||u===0&&SM(t,e,i))}function SM(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function EM(n){return n>0?1:n<0?-1:0}function kSe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&NK(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function d$(n,e){return rc(n.prev,n,n.next)<0?rc(n,e,n.next)>=0&&rc(n,n.prev,e)>=0:rc(n,e,n.prev)<0||rc(n,n.next,e)<0}function OSe(n,e){let t=n,i=!1;const s=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&s<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function BK(n,e){const t=new sN(n.i,n.x,n.y),i=new sN(e.i,e.x,e.y),s=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function B5(n,e,t,i){const s=new sN(n,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function p$(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function sN(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function LSe(n,e,t,i){let s=0;for(let o=e,l=t-i;o<t;o+=i)s+=(n[l]-n[o])*(n[o+1]+n[l+1]),l=o;return s}class q0{static area(e){const t=e.length;let i=0;for(let s=t-1,o=0;o<t;s=o++)i+=e[s].x*e[o].y-e[o].x*e[s].y;return i*.5}static isClockWise(e){return q0.area(e)<0}static triangulateShape(e,t){const i=[],s=[],o=[];P5(e),F5(i,e);let l=e.length;t.forEach(P5);for(let d=0;d<t.length;d++)s.push(l),l+=t[d].length,F5(i,t[d]);const u=ySe.triangulate(i,s);for(let d=0;d<u.length;d+=3)o.push(u.slice(d,d+3));return o}}function P5(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function F5(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class fE extends ai{constructor(e=new g1([new Vt(.5,.5),new Vt(-.5,.5),new Vt(-.5,-.5),new Vt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,s=[],o=[];for(let u=0,d=e.length;u<d;u++){const p=e[u];l(p)}this.setAttribute("position",new sr(s,3)),this.setAttribute("uv",new sr(o,2)),this.computeVertexNormals();function l(u){const d=[],p=t.curveSegments!==void 0?t.curveSegments:12,_=t.steps!==void 0?t.steps:1,v=t.depth!==void 0?t.depth:1;let b=t.bevelEnabled!==void 0?t.bevelEnabled:!0,E=t.bevelThickness!==void 0?t.bevelThickness:.2,C=t.bevelSize!==void 0?t.bevelSize:E-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,I=t.bevelSegments!==void 0?t.bevelSegments:3;const L=t.extrudePath,O=t.UVGenerator!==void 0?t.UVGenerator:DSe;let P,B=!1,z,G,j,H;L&&(P=L.getSpacedPoints(_),B=!0,b=!1,z=L.computeFrenetFrames(_,!1),G=new Me,j=new Me,H=new Me),b||(I=0,E=0,C=0,M=0);const Z=u.extractPoints(p);let ae=Z.shape;const J=Z.holes;if(!q0.isClockWise(ae)){ae=ae.reverse();for(let Ue=0,Ae=J.length;Ue<Ae;Ue++){const je=J[Ue];q0.isClockWise(je)&&(J[Ue]=je.reverse())}}const te=q0.triangulateShape(ae,J),he=ae;for(let Ue=0,Ae=J.length;Ue<Ae;Ue++){const je=J[Ue];ae=ae.concat(je)}function le(Ue,Ae,je){return Ae||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ae.clone().multiplyScalar(je).add(Ue)}const ce=ae.length,be=te.length;function $e(Ue,Ae,je){let nt,tt,Dt;const Rt=Ue.x-Ae.x,yt=Ue.y-Ae.y,Ct=je.x-Ue.x,Mt=je.y-Ue.y,mt=Rt*Rt+yt*yt,xe=Rt*Mt-yt*Ct;if(Math.abs(xe)>Number.EPSILON){const ie=Math.sqrt(mt),we=Math.sqrt(Ct*Ct+Mt*Mt),ct=Ae.x-yt/ie,Tt=Ae.y+Rt/ie,At=je.x-Mt/we,ft=je.y+Ct/we,Ke=((At-ct)*Mt-(ft-Tt)*Ct)/(Rt*Mt-yt*Ct);nt=ct+Rt*Ke-Ue.x,tt=Tt+yt*Ke-Ue.y;const Oe=nt*nt+tt*tt;if(Oe<=2)return new Vt(nt,tt);Dt=Math.sqrt(Oe/2)}else{let ie=!1;Rt>Number.EPSILON?Ct>Number.EPSILON&&(ie=!0):Rt<-Number.EPSILON?Ct<-Number.EPSILON&&(ie=!0):Math.sign(yt)===Math.sign(Mt)&&(ie=!0),ie?(nt=-yt,tt=Rt,Dt=Math.sqrt(mt)):(nt=Rt,tt=yt,Dt=Math.sqrt(mt/2))}return new Vt(nt/Dt,tt/Dt)}const q=[];for(let Ue=0,Ae=he.length,je=Ae-1,nt=Ue+1;Ue<Ae;Ue++,je++,nt++)je===Ae&&(je=0),nt===Ae&&(nt=0),q[Ue]=$e(he[Ue],he[je],he[nt]);const oe=[];let se,pe=q.concat();for(let Ue=0,Ae=J.length;Ue<Ae;Ue++){const je=J[Ue];se=[];for(let nt=0,tt=je.length,Dt=tt-1,Rt=nt+1;nt<tt;nt++,Dt++,Rt++)Dt===tt&&(Dt=0),Rt===tt&&(Rt=0),se[nt]=$e(je[nt],je[Dt],je[Rt]);oe.push(se),pe=pe.concat(se)}for(let Ue=0;Ue<I;Ue++){const Ae=Ue/I,je=E*Math.cos(Ae*Math.PI/2),nt=C*Math.sin(Ae*Math.PI/2)+M;for(let tt=0,Dt=he.length;tt<Dt;tt++){const Rt=le(he[tt],q[tt],nt);Ne(Rt.x,Rt.y,-je)}for(let tt=0,Dt=J.length;tt<Dt;tt++){const Rt=J[tt];se=oe[tt];for(let yt=0,Ct=Rt.length;yt<Ct;yt++){const Mt=le(Rt[yt],se[yt],nt);Ne(Mt.x,Mt.y,-je)}}}const Se=C+M;for(let Ue=0;Ue<ce;Ue++){const Ae=b?le(ae[Ue],pe[Ue],Se):ae[Ue];B?(j.copy(z.normals[0]).multiplyScalar(Ae.x),G.copy(z.binormals[0]).multiplyScalar(Ae.y),H.copy(P[0]).add(j).add(G),Ne(H.x,H.y,H.z)):Ne(Ae.x,Ae.y,0)}for(let Ue=1;Ue<=_;Ue++)for(let Ae=0;Ae<ce;Ae++){const je=b?le(ae[Ae],pe[Ae],Se):ae[Ae];B?(j.copy(z.normals[Ue]).multiplyScalar(je.x),G.copy(z.binormals[Ue]).multiplyScalar(je.y),H.copy(P[Ue]).add(j).add(G),Ne(H.x,H.y,H.z)):Ne(je.x,je.y,v/_*Ue)}for(let Ue=I-1;Ue>=0;Ue--){const Ae=Ue/I,je=E*Math.cos(Ae*Math.PI/2),nt=C*Math.sin(Ae*Math.PI/2)+M;for(let tt=0,Dt=he.length;tt<Dt;tt++){const Rt=le(he[tt],q[tt],nt);Ne(Rt.x,Rt.y,v+je)}for(let tt=0,Dt=J.length;tt<Dt;tt++){const Rt=J[tt];se=oe[tt];for(let yt=0,Ct=Rt.length;yt<Ct;yt++){const Mt=le(Rt[yt],se[yt],nt);B?Ne(Mt.x,Mt.y+P[_-1].y,P[_-1].x+je):Ne(Mt.x,Mt.y,v+je)}}}Fe(),Re();function Fe(){const Ue=s.length/3;if(b){let Ae=0,je=ce*Ae;for(let nt=0;nt<be;nt++){const tt=te[nt];it(tt[2]+je,tt[1]+je,tt[0]+je)}Ae=_+I*2,je=ce*Ae;for(let nt=0;nt<be;nt++){const tt=te[nt];it(tt[0]+je,tt[1]+je,tt[2]+je)}}else{for(let Ae=0;Ae<be;Ae++){const je=te[Ae];it(je[2],je[1],je[0])}for(let Ae=0;Ae<be;Ae++){const je=te[Ae];it(je[0]+ce*_,je[1]+ce*_,je[2]+ce*_)}}i.addGroup(Ue,s.length/3-Ue,0)}function Re(){const Ue=s.length/3;let Ae=0;qe(he,Ae),Ae+=he.length;for(let je=0,nt=J.length;je<nt;je++){const tt=J[je];qe(tt,Ae),Ae+=tt.length}i.addGroup(Ue,s.length/3-Ue,1)}function qe(Ue,Ae){let je=Ue.length;for(;--je>=0;){const nt=je;let tt=je-1;tt<0&&(tt=Ue.length-1);for(let Dt=0,Rt=_+I*2;Dt<Rt;Dt++){const yt=ce*Dt,Ct=ce*(Dt+1),Mt=Ae+nt+yt,mt=Ae+tt+yt,xe=Ae+tt+Ct,ie=Ae+nt+Ct;st(Mt,mt,xe,ie)}}}function Ne(Ue,Ae,je){d.push(Ue),d.push(Ae),d.push(je)}function it(Ue,Ae,je){pt(Ue),pt(Ae),pt(je);const nt=s.length/3,tt=O.generateTopUV(i,s,nt-3,nt-2,nt-1);dt(tt[0]),dt(tt[1]),dt(tt[2])}function st(Ue,Ae,je,nt){pt(Ue),pt(Ae),pt(nt),pt(Ae),pt(je),pt(nt);const tt=s.length/3,Dt=O.generateSideWallUV(i,s,tt-6,tt-3,tt-2,tt-1);dt(Dt[0]),dt(Dt[1]),dt(Dt[3]),dt(Dt[1]),dt(Dt[2]),dt(Dt[3])}function pt(Ue){s.push(d[Ue*3+0]),s.push(d[Ue*3+1]),s.push(d[Ue*3+2])}function dt(Ue){o.push(Ue.x),o.push(Ue.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return NSe(t,i,e)}static fromJSON(e,t){const i=[];for(let o=0,l=e.shapes.length;o<l;o++){const u=t[e.shapes[o]];i.push(u)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new jP[s.type]().fromJSON(s)),new fE(i,e.options)}}const DSe={generateTopUV:function(n,e,t,i,s){const o=e[t*3],l=e[t*3+1],u=e[i*3],d=e[i*3+1],p=e[s*3],_=e[s*3+1];return[new Vt(o,l),new Vt(u,d),new Vt(p,_)]},generateSideWallUV:function(n,e,t,i,s,o){const l=e[t*3],u=e[t*3+1],d=e[t*3+2],p=e[i*3],_=e[i*3+1],v=e[i*3+2],b=e[s*3],E=e[s*3+1],C=e[s*3+2],M=e[o*3],I=e[o*3+1],L=e[o*3+2];return Math.abs(u-_)<Math.abs(l-p)?[new Vt(l,1-d),new Vt(p,1-v),new Vt(b,1-C),new Vt(M,1-L)]:[new Vt(u,1-d),new Vt(_,1-v),new Vt(E,1-C),new Vt(I,1-L)]}};function NSe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,s=n.length;i<s;i++){const o=n[i];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class mE extends t_{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new mE(e.radius,e.detail)}}class Yg extends t_{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Yg(e.radius,e.detail)}}class gE extends ai{constructor(e=.5,t=1,i=8,s=1,o=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:s,thetaStart:o,thetaLength:l},i=Math.max(3,i),s=Math.max(1,s);const u=[],d=[],p=[],_=[];let v=e;const b=(t-e)/s,E=new Me,C=new Vt;for(let M=0;M<=s;M++){for(let I=0;I<=i;I++){const L=o+I/i*l;E.x=v*Math.cos(L),E.y=v*Math.sin(L),d.push(E.x,E.y,E.z),p.push(0,0,1),C.x=(E.x/t+1)/2,C.y=(E.y/t+1)/2,_.push(C.x,C.y)}v+=b}for(let M=0;M<s;M++){const I=M*(i+1);for(let L=0;L<i;L++){const O=L+I,P=O,B=O+i+1,z=O+i+2,G=O+1;u.push(P,B,G),u.push(B,z,G)}}this.setIndex(u),this.setAttribute("position",new sr(d,3)),this.setAttribute("normal",new sr(p,3)),this.setAttribute("uv",new sr(_,2))}static fromJSON(e){return new gE(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class _E extends ai{constructor(e=new g1([new Vt(0,.5),new Vt(-.5,-.5),new Vt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],o=[],l=[];let u=0,d=0;if(Array.isArray(e)===!1)p(e);else for(let _=0;_<e.length;_++)p(e[_]),this.addGroup(u,d,_),u+=d,d=0;this.setIndex(i),this.setAttribute("position",new sr(s,3)),this.setAttribute("normal",new sr(o,3)),this.setAttribute("uv",new sr(l,2));function p(_){const v=s.length/3,b=_.extractPoints(t);let E=b.shape;const C=b.holes;q0.isClockWise(E)===!1&&(E=E.reverse());for(let I=0,L=C.length;I<L;I++){const O=C[I];q0.isClockWise(O)===!0&&(C[I]=O.reverse())}const M=q0.triangulateShape(E,C);for(let I=0,L=C.length;I<L;I++){const O=C[I];E=E.concat(O)}for(let I=0,L=E.length;I<L;I++){const O=E[I];s.push(O.x,O.y,0),o.push(0,0,1),l.push(O.x,O.y)}for(let I=0,L=M.length;I<L;I++){const O=M[I],P=O[0]+v,B=O[1]+v,z=O[2]+v;i.push(P,B,z),d+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return BSe(t,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];i.push(l)}return new _E(i,e.curveSegments)}}function BSe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const s=n[t];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e}class t0 extends ai{constructor(e=1,t=32,i=16,s=0,o=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:o,thetaStart:l,thetaLength:u},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const d=Math.min(l+u,Math.PI);let p=0;const _=[],v=new Me,b=new Me,E=[],C=[],M=[],I=[];for(let L=0;L<=i;L++){const O=[],P=L/i;let B=0;L==0&&l==0?B=.5/t:L==i&&d==Math.PI&&(B=-.5/t);for(let z=0;z<=t;z++){const G=z/t;v.x=-e*Math.cos(s+G*o)*Math.sin(l+P*u),v.y=e*Math.cos(l+P*u),v.z=e*Math.sin(s+G*o)*Math.sin(l+P*u),C.push(v.x,v.y,v.z),b.copy(v).normalize(),M.push(b.x,b.y,b.z),I.push(G+B,1-P),O.push(p++)}_.push(O)}for(let L=0;L<i;L++)for(let O=0;O<t;O++){const P=_[L][O+1],B=_[L][O],z=_[L+1][O],G=_[L+1][O+1];(L!==0||l>0)&&E.push(P,B,G),(L!==i-1||d<Math.PI)&&E.push(B,z,G)}this.setIndex(E),this.setAttribute("position",new sr(C,3)),this.setAttribute("normal",new sr(M,3)),this.setAttribute("uv",new sr(I,2))}static fromJSON(e){return new t0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class yE extends t_{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yE(e.radius,e.detail)}}class Vg extends ai{constructor(e=1,t=.4,i=8,s=6,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:s,arc:o},i=Math.floor(i),s=Math.floor(s);const l=[],u=[],d=[],p=[],_=new Me,v=new Me,b=new Me;for(let E=0;E<=i;E++)for(let C=0;C<=s;C++){const M=C/s*o,I=E/i*Math.PI*2;v.x=(e+t*Math.cos(I))*Math.cos(M),v.y=(e+t*Math.cos(I))*Math.sin(M),v.z=t*Math.sin(I),u.push(v.x,v.y,v.z),_.x=e*Math.cos(M),_.y=e*Math.sin(M),b.subVectors(v,_).normalize(),d.push(b.x,b.y,b.z),p.push(C/s),p.push(E/i)}for(let E=1;E<=i;E++)for(let C=1;C<=s;C++){const M=(s+1)*E+C-1,I=(s+1)*(E-1)+C-1,L=(s+1)*(E-1)+C,O=(s+1)*E+C;l.push(M,I,O),l.push(I,L,O)}this.setIndex(l),this.setAttribute("position",new sr(u,3)),this.setAttribute("normal",new sr(d,3)),this.setAttribute("uv",new sr(p,2))}static fromJSON(e){return new Vg(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class vE extends ai{constructor(e=1,t=.4,i=64,s=8,o=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:s,p:o,q:l},i=Math.floor(i),s=Math.floor(s);const u=[],d=[],p=[],_=[],v=new Me,b=new Me,E=new Me,C=new Me,M=new Me,I=new Me,L=new Me;for(let P=0;P<=i;++P){const B=P/i*o*Math.PI*2;O(B,o,l,e,E),O(B+.01,o,l,e,C),I.subVectors(C,E),L.addVectors(C,E),M.crossVectors(I,L),L.crossVectors(M,I),M.normalize(),L.normalize();for(let z=0;z<=s;++z){const G=z/s*Math.PI*2,j=-t*Math.cos(G),H=t*Math.sin(G);v.x=E.x+(j*L.x+H*M.x),v.y=E.y+(j*L.y+H*M.y),v.z=E.z+(j*L.z+H*M.z),d.push(v.x,v.y,v.z),b.subVectors(v,E).normalize(),p.push(b.x,b.y,b.z),_.push(P/i),_.push(z/s)}}for(let P=1;P<=i;P++)for(let B=1;B<=s;B++){const z=(s+1)*(P-1)+(B-1),G=(s+1)*P+(B-1),j=(s+1)*P+B,H=(s+1)*(P-1)+B;u.push(z,G,H),u.push(G,j,H)}this.setIndex(u),this.setAttribute("position",new sr(d,3)),this.setAttribute("normal",new sr(p,3)),this.setAttribute("uv",new sr(_,2));function O(P,B,z,G,j){const H=Math.cos(P),Z=Math.sin(P),ae=z/B*P,J=Math.cos(ae);j.x=G*(2+J)*.5*H,j.y=G*(2+J)*Z*.5,j.z=G*Math.sin(ae)*.5}}static fromJSON(e){return new vE(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class bE extends ai{constructor(e=new WP(new Me(-1,-1,0),new Me(-1,1,0),new Me(1,1,0)),t=64,i=1,s=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:s,closed:o};const l=e.computeFrenetFrames(t,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const u=new Me,d=new Me,p=new Vt;let _=new Me;const v=[],b=[],E=[],C=[];M(),this.setIndex(C),this.setAttribute("position",new sr(v,3)),this.setAttribute("normal",new sr(b,3)),this.setAttribute("uv",new sr(E,2));function M(){for(let P=0;P<t;P++)I(P);I(o===!1?t:0),O(),L()}function I(P){_=e.getPointAt(P/t,_);const B=l.normals[P],z=l.binormals[P];for(let G=0;G<=s;G++){const j=G/s*Math.PI*2,H=Math.sin(j),Z=-Math.cos(j);d.x=Z*B.x+H*z.x,d.y=Z*B.y+H*z.y,d.z=Z*B.z+H*z.z,d.normalize(),b.push(d.x,d.y,d.z),u.x=_.x+i*d.x,u.y=_.y+i*d.y,u.z=_.z+i*d.z,v.push(u.x,u.y,u.z)}}function L(){for(let P=1;P<=t;P++)for(let B=1;B<=s;B++){const z=(s+1)*(P-1)+(B-1),G=(s+1)*P+(B-1),j=(s+1)*P+B,H=(s+1)*(P-1)+B;C.push(z,G,H),C.push(G,j,H)}}function O(){for(let P=0;P<=t;P++)for(let B=0;B<=s;B++)p.x=P/t,p.y=B/s,E.push(p.x,p.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new bE(new jP[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class XP extends ai{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,s=new Me,o=new Me;if(e.index!==null){const l=e.attributes.position,u=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:u.count,materialIndex:0}]);for(let p=0,_=d.length;p<_;++p){const v=d[p],b=v.start,E=v.count;for(let C=b,M=b+E;C<M;C+=3)for(let I=0;I<3;I++){const L=u.getX(C+I),O=u.getX(C+(I+1)%3);s.fromBufferAttribute(l,L),o.fromBufferAttribute(l,O),z5(s,o,i)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}}else{const l=e.attributes.position;for(let u=0,d=l.count/3;u<d;u++)for(let p=0;p<3;p++){const _=3*u+p,v=3*u+(p+1)%3;s.fromBufferAttribute(l,_),o.fromBufferAttribute(l,v),z5(s,o,i)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new sr(t,3))}}}function z5(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(s)===!0?!1:(t.add(i),t.add(s),!0)}var U5=Object.freeze({__proto__:null,BoxGeometry:hu,BoxBufferGeometry:hu,CapsuleGeometry:cE,CapsuleBufferGeometry:cE,CircleGeometry:hE,CircleBufferGeometry:hE,ConeGeometry:dE,ConeBufferGeometry:dE,CylinderGeometry:zl,CylinderBufferGeometry:zl,DodecahedronGeometry:pE,DodecahedronBufferGeometry:pE,EdgesGeometry:LK,ExtrudeGeometry:fE,ExtrudeBufferGeometry:fE,IcosahedronGeometry:mE,IcosahedronBufferGeometry:mE,LatheGeometry:I1,LatheBufferGeometry:I1,OctahedronGeometry:Yg,OctahedronBufferGeometry:Yg,PlaneGeometry:e0,PlaneBufferGeometry:e0,PolyhedronGeometry:t_,PolyhedronBufferGeometry:t_,RingGeometry:gE,RingBufferGeometry:gE,ShapeGeometry:_E,ShapeBufferGeometry:_E,SphereGeometry:t0,SphereBufferGeometry:t0,TetrahedronGeometry:yE,TetrahedronBufferGeometry:yE,TorusGeometry:Vg,TorusBufferGeometry:Vg,TorusKnotGeometry:vE,TorusKnotBufferGeometry:vE,TubeGeometry:bE,TubeBufferGeometry:bE,WireframeGeometry:XP});class PK extends od{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Nn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class FK extends bd{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class f$ extends od{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Nn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=z1,this.normalScale=new Vt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zK extends f${constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return oh(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Nn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Nn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Nn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class UK extends od{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Nn(16777215),this.specular=new Nn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=z1,this.normalScale=new Vt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=B$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class HK extends od{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Nn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=z1,this.normalScale=new Vt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class YP extends od{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=z1,this.normalScale=new Vt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class GK extends od{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Nn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=B$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class WK extends od{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Nn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=z1,this.normalScale=new Vt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VK extends Rp{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function rg(n,e,t){return KP(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function o1(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function KP(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function jK(n){function e(s,o){return n[s]-n[o]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function oN(n,e,t){const i=n.length,s=new n.constructor(i);for(let o=0,l=0;l!==i;++o){const u=t[o]*e;for(let d=0;d!==e;++d)s[l++]=n[u+d]}return s}function JP(n,e,t,i){let s=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[s++];if(o===void 0)return;let l=o[i];if(l!==void 0)if(Array.isArray(l))do l=o[i],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=n[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[i],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=n[s++];while(o!==void 0);else do l=o[i],l!==void 0&&(e.push(o.time),t.push(l)),o=n[s++];while(o!==void 0)}function PSe(n,e,t,i,s=30){const o=n.clone();o.name=e;const l=[];for(let d=0;d<o.tracks.length;++d){const p=o.tracks[d],_=p.getValueSize(),v=[],b=[];for(let E=0;E<p.times.length;++E){const C=p.times[E]*s;if(!(C<t||C>=i)){v.push(p.times[E]);for(let M=0;M<_;++M)b.push(p.values[E*_+M])}}v.length!==0&&(p.times=o1(v,p.times.constructor),p.values=o1(b,p.values.constructor),l.push(p))}o.tracks=l;let u=1/0;for(let d=0;d<o.tracks.length;++d)u>o.tracks[d].times[0]&&(u=o.tracks[d].times[0]);for(let d=0;d<o.tracks.length;++d)o.tracks[d].shift(-1*u);return o.resetDuration(),o}function FSe(n,e=0,t=n,i=30){i<=0&&(i=30);const s=t.tracks.length,o=e/i;for(let l=0;l<s;++l){const u=t.tracks[l],d=u.ValueTypeName;if(d==="bool"||d==="string")continue;const p=n.tracks.find(function(L){return L.name===u.name&&L.ValueTypeName===d});if(p===void 0)continue;let _=0;const v=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=v/3);let b=0;const E=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=E/3);const C=u.times.length-1;let M;if(o<=u.times[0]){const L=_,O=v-_;M=rg(u.values,L,O)}else if(o>=u.times[C]){const L=C*v+_,O=L+v-_;M=rg(u.values,L,O)}else{const L=u.createInterpolant(),O=_,P=v-_;L.evaluate(o),M=rg(L.resultBuffer,O,P)}d==="quaternion"&&new vl().fromArray(M).normalize().conjugate().toArray(M);const I=p.times.length;for(let L=0;L<I;++L){const O=L*E+b;if(d==="quaternion")vl.multiplyQuaternionsFlat(p.values,O,M,0,p.values,O);else{const P=E-b*2;for(let B=0;B<P;++B)p.values[O+B]-=M[B]}}}return n.blendMode=RP,n}var zSe=Object.freeze({__proto__:null,arraySlice:rg,convertArray:o1,isTypedArray:KP,getKeyframeOrder:jK,sortedArray:oN,flattenJSON:JP,subclip:PSe,makeClipAdditive:FSe});class G${constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],o=t[i-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=i+2;;){if(s===void 0){if(e<o)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(o=s,s=t[++i],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(i=2,o=u);for(let d=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(s=o,o=t[--i-1],e>=o)break t}l=i,i=0;break n}break e}for(;i<l;){const u=i+l>>>1;e<t[u]?l=u:i=u+1}if(s=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=i[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class XK extends G${constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:r1,endingEnd:r1}}intervalChanged_(e,t,i){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],d=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case i1:o=e,u=2*t-i;break;case s$:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=i}if(d===void 0)switch(this.getSettings_().endingEnd){case i1:l=e,d=2*i-t;break;case s$:l=1,d=i+s[1]-s[0];break;default:l=e-1,d=t}const p=(i-t)*.5,_=this.valueSize;this._weightPrev=p/(t-u),this._weightNext=p/(d-i),this._offsetPrev=o*_,this._offsetNext=l*_}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,_=this._offsetPrev,v=this._offsetNext,b=this._weightPrev,E=this._weightNext,C=(i-t)/(s-t),M=C*C,I=M*C,L=-b*I+2*b*M-b*C,O=(1+b)*I+(-1.5-2*b)*M+(-.5+b)*C+1,P=(-1-E)*I+(1.5+E)*M+.5*C,B=E*I-E*M;for(let z=0;z!==u;++z)o[z]=L*l[_+z]+O*l[p+z]+P*l[d+z]+B*l[v+z];return o}}class qP extends G${constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,_=(i-t)/(s-t),v=1-_;for(let b=0;b!==u;++b)o[b]=l[p+b]*v+l[d+b]*_;return o}}class YK extends G${constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class s0{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=o1(t,this.TimeBufferType),this.values=o1(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:o1(e.times,Array),values:o1(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new YK(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new qP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new XK(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case r$:t=this.InterpolantFactoryMethodDiscrete;break;case i$:t=this.InterpolantFactoryMethodLinear;break;case bA:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return r$;case this.InterpolantFactoryMethodLinear:return i$;case this.InterpolantFactoryMethodSmooth:return bA}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let o=0,l=s-1;for(;o!==s&&i[o]<e;)++o;for(;l!==-1&&i[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=rg(i,o,l),this.values=rg(this.values,o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const d=i[u];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,d),e=!1;break}if(l!==null&&l>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,d,l),e=!1;break}l=d}if(s!==void 0&&KP(s))for(let u=0,d=s.length;u!==d;++u){const p=s[u];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,p),e=!1;break}}return e}optimize(){const e=rg(this.times),t=rg(this.values),i=this.getValueSize(),s=this.getInterpolation()===bA,o=e.length-1;let l=1;for(let u=1;u<o;++u){let d=!1;const p=e[u],_=e[u+1];if(p!==_&&(u!==1||p!==e[0]))if(s)d=!0;else{const v=u*i,b=v-i,E=v+i;for(let C=0;C!==i;++C){const M=t[v+C];if(M!==t[b+C]||M!==t[E+C]){d=!0;break}}}if(d){if(u!==l){e[l]=e[u];const v=u*i,b=l*i;for(let E=0;E!==i;++E)t[b+E]=t[v+E]}++l}}if(o>0){e[l]=e[o];for(let u=o*i,d=l*i,p=0;p!==i;++p)t[d+p]=t[u+p];++l}return l!==e.length?(this.times=rg(e,0,l),this.values=rg(t,0,l*i)):(this.times=e,this.values=t),this}clone(){const e=rg(this.times,0),t=rg(this.values,0),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}s0.prototype.TimeBufferType=Float32Array;s0.prototype.ValueBufferType=Float32Array;s0.prototype.DefaultInterpolation=i$;class H1 extends s0{}H1.prototype.ValueTypeName="bool";H1.prototype.ValueBufferType=Array;H1.prototype.DefaultInterpolation=r$;H1.prototype.InterpolantFactoryMethodLinear=void 0;H1.prototype.InterpolantFactoryMethodSmooth=void 0;class QP extends s0{}QP.prototype.ValueTypeName="color";class m$ extends s0{}m$.prototype.ValueTypeName="number";class KK extends G${constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=(i-t)/(s-t);let p=e*u;for(let _=p+u;p!==_;p+=4)vl.slerpFlat(o,0,l,p-u,l,p,d);return o}}class FE extends s0{InterpolantFactoryMethodLinear(e){return new KK(this.times,this.values,this.getValueSize(),e)}}FE.prototype.ValueTypeName="quaternion";FE.prototype.DefaultInterpolation=i$;FE.prototype.InterpolantFactoryMethodSmooth=void 0;class G1 extends s0{}G1.prototype.ValueTypeName="string";G1.prototype.ValueBufferType=Array;G1.prototype.DefaultInterpolation=r$;G1.prototype.InterpolantFactoryMethodLinear=void 0;G1.prototype.InterpolantFactoryMethodSmooth=void 0;class g$ extends s0{}g$.prototype.ValueTypeName="vector";class _${constructor(e,t=-1,i,s=VR){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=Am(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let l=0,u=i.length;l!==u;++l)t.push(HSe(i[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=i.length;o!==l;++o)t.push(s0.toJSON(i[o]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const o=t.length,l=[];for(let u=0;u<o;u++){let d=[],p=[];d.push((u+o-1)%o,u,(u+1)%o),p.push(0,1,0);const _=jK(d);d=oN(d,1,_),p=oN(p,1,_),!s&&d[0]===0&&(d.push(o),p.push(p[0])),l.push(new m$(".morphTargetInfluences["+t[u].name+"]",d,p).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,d=e.length;u<d;u++){const p=e[u],_=p.name.match(o);if(_&&_.length>1){const v=_[1];let b=s[v];b||(s[v]=b=[]),b.push(p)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,i));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(_,v,b,E,C){if(b.length!==0){const M=[],I=[];JP(b,M,I,E),M.length!==0&&C.push(new _(v,M,I))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let d=e.length||-1;const p=e.hierarchy||[];for(let _=0;_<p.length;_++){const v=p[_].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const b={};let E;for(E=0;E<v.length;E++)if(v[E].morphTargets)for(let C=0;C<v[E].morphTargets.length;C++)b[v[E].morphTargets[C]]=-1;for(const C in b){const M=[],I=[];for(let L=0;L!==v[E].morphTargets.length;++L){const O=v[E];M.push(O.time),I.push(O.morphTarget===C?1:0)}s.push(new m$(".morphTargetInfluence["+C+"]",M,I))}d=b.length*l}else{const b=".bones["+t[_].name+"]";i(g$,b+".position",v,"pos",s),i(FE,b+".quaternion",v,"rot",s),i(g$,b+".scale",v,"scl",s)}}return s.length===0?null:new this(o,d,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function USe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return m$;case"vector":case"vector2":case"vector3":case"vector4":return g$;case"color":return QP;case"quaternion":return FE;case"bool":case"boolean":return H1;case"string":return G1}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function HSe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=USe(n.type);if(n.times===void 0){const t=[],i=[];JP(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const R1={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class ZP{constructor(e,t,i){const s=this;let o=!1,l=0,u=0,d;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(_){u++,o===!1&&s.onStart!==void 0&&s.onStart(_,l,u),o=!0},this.itemEnd=function(_){l++,s.onProgress!==void 0&&s.onProgress(_,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(_){s.onError!==void 0&&s.onError(_)},this.resolveURL=function(_){return d?d(_):_},this.setURLModifier=function(_){return d=_,this},this.addHandler=function(_,v){return p.push(_,v),this},this.removeHandler=function(_){const v=p.indexOf(_);return v!==-1&&p.splice(v,2),this},this.getHandler=function(_){for(let v=0,b=p.length;v<b;v+=2){const E=p[v],C=p[v+1];if(E.global&&(E.lastIndex=0),E.test(_))return C}return null}}}const JK=new ZP;class Pm{constructor(e){this.manager=e!==void 0?e:JK,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,o){i.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const U_={};class GSe extends Error{constructor(e,t){super(e),this.response=t}}class ay extends Pm{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=R1.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(U_[e]!==void 0){U_[e].push({onLoad:t,onProgress:i,onError:s});return}U_[e]=[],U_[e].push({onLoad:t,onProgress:i,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,d=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const _=U_[e],v=p.body.getReader(),b=p.headers.get("Content-Length"),E=b?parseInt(b):0,C=E!==0;let M=0;const I=new ReadableStream({start(L){O();function O(){v.read().then(({done:P,value:B})=>{if(P)L.close();else{M+=B.byteLength;const z=new ProgressEvent("progress",{lengthComputable:C,loaded:M,total:E});for(let G=0,j=_.length;G<j;G++){const H=_[G];H.onProgress&&H.onProgress(z)}L.enqueue(B),O()}})}}});return new Response(I)}else throw new GSe(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(_=>new DOMParser().parseFromString(_,u));case"json":return p.json();default:if(u===void 0)return p.text();{const _=/charset="?([^;"\s]*)"?/i.exec(u),v=_&&_[1]?_[1].toLowerCase():void 0,b=new TextDecoder(v);return p.arrayBuffer().then(E=>b.decode(E))}}}).then(p=>{R1.add(e,p);const _=U_[e];delete U_[e];for(let v=0,b=_.length;v<b;v++){const E=_[v];E.onLoad&&E.onLoad(p)}}).catch(p=>{const _=U_[e];if(_===void 0)throw this.manager.itemError(e),p;delete U_[e];for(let v=0,b=_.length;v<b;v++){const E=_[v];E.onError&&E.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class WSe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new ay(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(d){s?s(d):console.error(d),o.manager.itemError(e)}},i,s)}parse(e){const t=[];for(let i=0;i<e.length;i++){const s=_$.parse(e[i]);t.push(s)}return t}}class VSe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=this,l=[],u=new MK,d=new ay(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(o.withCredentials);let p=0;function _(v){d.load(e[v],function(b){const E=o.parse(b,!0);l[v]={width:E.width,height:E.height,format:E.format,mipmaps:E.mipmaps},p+=1,p===6&&(E.mipmapCount===1&&(u.minFilter=bl),u.image=l,u.format=E.format,u.needsUpdate=!0,t&&t(u))},i,s)}if(Array.isArray(e))for(let v=0,b=e.length;v<b;++v)_(v);else d.load(e,function(v){const b=o.parse(v,!0);if(b.isCubemap){const E=b.mipmaps.length/b.mipmapCount;for(let C=0;C<E;C++){l[C]={mipmaps:[]};for(let M=0;M<b.mipmapCount;M++)l[C].mipmaps.push(b.mipmaps[C*b.mipmapCount+M]),l[C].format=b.format,l[C].width=b.width,l[C].height=b.height}u.image=l}else u.image.width=b.width,u.image.height=b.height,u.mipmaps=b.mipmaps;b.mipmapCount===1&&(u.minFilter=bl),u.format=b.format,u.needsUpdate=!0,t&&t(u)},i,s);return u}}class y$ extends Pm{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=R1.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=l$("img");function d(){_(),R1.add(e,this),t&&t(this),o.manager.itemEnd(e)}function p(v){_(),s&&s(v),o.manager.itemError(e),o.manager.itemEnd(e)}function _(){u.removeEventListener("load",d,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",d,!1),u.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class jSe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=new U$,l=new y$(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let u=0;function d(p){l.load(e[p],function(_){o.images[p]=_,u++,u===6&&(o.needsUpdate=!0,t&&t(o))},void 0,s)}for(let p=0;p<e.length;++p)d(p);return o}}class XSe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new WS,u=new ay(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(o.withCredentials),u.load(e,function(d){const p=o.parse(d);!p||(p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:tf,l.wrapT=p.wrapT!==void 0?p.wrapT:tf,l.magFilter=p.magFilter!==void 0?p.magFilter:bl,l.minFilter=p.minFilter!==void 0?p.minFilter:bl,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.encoding!==void 0&&(l.encoding=p.encoding),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=F1),p.mipmapCount===1&&(l.minFilter=bl),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,t&&t(l,p))},i,s),l}}class YSe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=new ac,l=new y$(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},i,s),o}}class Bv extends to{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Nn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class qK extends Bv{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(to.DefaultUp),this.updateMatrix(),this.groundColor=new Nn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const H5=new qr,G5=new Me,W5=new Me;class eF{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vt(512,512),this.map=null,this.mapPass=null,this.matrix=new qr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new XR,this._frameExtents=new Vt(1,1),this._viewportCount=1,this._viewports=[new vs(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;G5.setFromMatrixPosition(e.matrixWorld),t.position.copy(G5),W5.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(W5),t.updateMatrixWorld(),H5.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(H5),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class KSe extends eF{constructor(){super(new Ja(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=a$*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class QK extends Bv{constructor(e,t,i=0,s=Math.PI/3,o=0,l=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(to.DefaultUp),this.updateMatrix(),this.target=new to,this.distance=i,this.angle=s,this.penumbra=o,this.decay=l,this.shadow=new KSe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const V5=new qr,Nx=new Me,MO=new Me;class JSe extends eF{constructor(){super(new Ja(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vt(4,2),this._viewportCount=6,this._viewports=[new vs(2,1,1,1),new vs(0,1,1,1),new vs(3,1,1,1),new vs(1,1,1,1),new vs(3,0,1,1),new vs(1,0,1,1)],this._cubeDirections=[new Me(1,0,0),new Me(-1,0,0),new Me(0,0,1),new Me(0,0,-1),new Me(0,1,0),new Me(0,-1,0)],this._cubeUps=[new Me(0,1,0),new Me(0,1,0),new Me(0,1,0),new Me(0,1,0),new Me(0,0,1),new Me(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),Nx.setFromMatrixPosition(e.matrixWorld),i.position.copy(Nx),MO.copy(i.position),MO.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(MO),i.updateMatrixWorld(),s.makeTranslation(-Nx.x,-Nx.y,-Nx.z),V5.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(V5)}}class ZK extends Bv{constructor(e,t,i=0,s=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new JSe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class qSe extends eF{constructor(){super(new J0(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class eJ extends Bv{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(to.DefaultUp),this.updateMatrix(),this.target=new to,this.shadow=new qSe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class tJ extends Bv{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class nJ extends Bv{constructor(e,t,i=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class rJ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Me)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*s),t.addScaledVector(l[2],.488603*o),t.addScaledVector(l[3],.488603*i),t.addScaledVector(l[4],1.092548*(i*s)),t.addScaledVector(l[5],1.092548*(s*o)),t.addScaledVector(l[6],.315392*(3*o*o-1)),t.addScaledVector(l[7],1.092548*(i*o)),t.addScaledVector(l[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*s),t.addScaledVector(l[2],2*.511664*o),t.addScaledVector(l[3],2*.511664*i),t.addScaledVector(l[4],2*.429043*i*s),t.addScaledVector(l[5],2*.429043*s*o),t.addScaledVector(l[6],.743125*o*o-.247708),t.addScaledVector(l[7],2*.429043*i*o),t.addScaledVector(l[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,o=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*o,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*i*o,t[8]=.546274*(i*i-s*s)}}class ik extends Bv{constructor(e=new rJ,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class sk extends Pm{constructor(e){super(e),this.textures={}}load(e,t,i,s){const o=this,l=new ay(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(d){s?s(d):console.error(d),o.manager.itemError(e)}},i,s)}parse(e){const t=this.textures;function i(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const s=sk.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new Nn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==1&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const l=e.uniforms[o];switch(s.uniforms[o]={},l.type){case"t":s.uniforms[o].value=i(l.value);break;case"c":s.uniforms[o].value=new Nn().setHex(l.value);break;case"v2":s.uniforms[o].value=new Vt().fromArray(l.value);break;case"v3":s.uniforms[o].value=new Me().fromArray(l.value);break;case"v4":s.uniforms[o].value=new vs().fromArray(l.value);break;case"m3":s.uniforms[o].value=new rf().fromArray(l.value);break;case"m4":s.uniforms[o].value=new qr().fromArray(l.value);break;default:s.uniforms[o].value=l.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const o in e.extensions)s.extensions[o]=e.extensions[o];if(e.shading!==void 0&&(s.flatShading=e.shading===1),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),s.normalScale=new Vt().fromArray(o)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Vt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:PK,SpriteMaterial:FP,RawShaderMaterial:FK,ShaderMaterial:bd,PointsMaterial:ek,MeshPhysicalMaterial:zK,MeshStandardMaterial:f$,MeshPhongMaterial:UK,MeshToonMaterial:HK,MeshNormalMaterial:YP,MeshLambertMaterial:GK,MeshDepthMaterial:H$,MeshDistanceMaterial:KR,MeshBasicMaterial:r0,MeshMatcapMaterial:WK,LineDashedMaterial:VK,LineBasicMaterial:Rp,Material:od};return new t[e]}}class aN{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ok extends ai{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class iJ extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new ay(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(d){s?s(d):console.error(d),o.manager.itemError(e)}},i,s)}parse(e){const t={},i={};function s(b,E){if(t[E]!==void 0)return t[E];const C=b.interleavedBuffers[E],M=o(b,C.buffer),I=CS(C.type,M),L=new QR(I,C.stride);return L.uuid=C.uuid,t[E]=L,L}function o(b,E){if(i[E]!==void 0)return i[E];const C=b.arrayBuffers[E],M=new Uint32Array(C).buffer;return i[E]=M,M}const l=e.isInstancedBufferGeometry?new ok:new ai,u=e.data.index;if(u!==void 0){const b=CS(u.type,u.array);l.setIndex(new Do(b,1))}const d=e.data.attributes;for(const b in d){const E=d[b];let C;if(E.isInterleavedBufferAttribute){const M=s(e.data,E.data);C=new xm(M,E.itemSize,E.offset,E.normalized)}else{const M=CS(E.type,E.array),I=E.isInstancedBufferAttribute?A1:Do;C=new I(M,E.itemSize,E.normalized)}E.name!==void 0&&(C.name=E.name),E.usage!==void 0&&C.setUsage(E.usage),E.updateRange!==void 0&&(C.updateRange.offset=E.updateRange.offset,C.updateRange.count=E.updateRange.count),l.setAttribute(b,C)}const p=e.data.morphAttributes;if(p)for(const b in p){const E=p[b],C=[];for(let M=0,I=E.length;M<I;M++){const L=E[M];let O;if(L.isInterleavedBufferAttribute){const P=s(e.data,L.data);O=new xm(P,L.itemSize,L.offset,L.normalized)}else{const P=CS(L.type,L.array);O=new Do(P,L.itemSize,L.normalized)}L.name!==void 0&&(O.name=L.name),C.push(O)}l.morphAttributes[b]=C}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const _=e.data.groups||e.data.drawcalls||e.data.offsets;if(_!==void 0)for(let b=0,E=_.length;b!==E;++b){const C=_[b];l.addGroup(C.start,C.count,C.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const b=new Me;v.center!==void 0&&b.fromArray(v.center),l.boundingSphere=new s_(b,v.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class QSe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=this,l=this.path===""?aN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const u=new ay(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(d){let p=null;try{p=JSON.parse(d)}catch(v){s!==void 0&&s(v),console.error("THREE:ObjectLoader: Can't parse "+e+".",v.message);return}const _=p.metadata;if(_===void 0||_.type===void 0||_.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(p,t)},i,s)}async loadAsync(e,t){const i=this,s=this.path===""?aN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new ay(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const l=await o.loadAsync(e,t),u=JSON.parse(l),d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(u)}parse(e,t){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,s),l=this.parseImages(e.images,function(){t!==void 0&&t(p)}),u=this.parseTextures(e.textures,l),d=this.parseMaterials(e.materials,u),p=this.parseObject(e.object,o,d,u,i),_=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,_),t!==void 0){let v=!1;for(const b in l)if(l[b].data instanceof HTMLImageElement){v=!0;break}v===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,s,u,l,t),p=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,p),d}parseShapes(e){const t={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const o=new g1().fromJSON(e[i]);t[o.uuid]=o}return t}parseSkeletons(e,t){const i={},s={};if(t.traverse(function(o){o.isBone&&(s[o.uuid]=o)}),e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=new ZR().fromJSON(e[o],s);i[u.uuid]=u}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new iJ;for(let o=0,l=e.length;o<l;o++){let u;const d=e[o];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":u=s.parse(d);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:d.type in U5?u=U5[d.type].fromJSON(d,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}u.uuid=d.uuid,d.name!==void 0&&(u.name=d.name),u.isBufferGeometry===!0&&d.userData!==void 0&&(u.userData=d.userData),i[d.uuid]=u}}return i}parseMaterials(e,t){const i={},s={};if(e!==void 0){const o=new sk;o.setTextures(t);for(let l=0,u=e.length;l<u;l++){const d=e[l];if(d.type==="MultiMaterial"){const p=[];for(let _=0;_<d.materials.length;_++){const v=d.materials[_];i[v.uuid]===void 0&&(i[v.uuid]=o.parse(v)),p.push(i[v.uuid])}s[d.uuid]=p}else i[d.uuid]===void 0&&(i[d.uuid]=o.parse(d)),s[d.uuid]=i[d.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],o=_$.parse(s);t[o.uuid]=o}return t}parseImages(e,t){const i=this,s={};let o;function l(d){return i.manager.itemStart(d),o.load(d,function(){i.manager.itemEnd(d)},void 0,function(){i.manager.itemError(d),i.manager.itemEnd(d)})}function u(d){if(typeof d=="string"){const p=d,_=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;return l(_)}else return d.data?{data:CS(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new ZP(t);o=new y$(d),o.setCrossOrigin(this.crossOrigin);for(let p=0,_=e.length;p<_;p++){const v=e[p],b=v.url;if(Array.isArray(b)){const E=[];for(let C=0,M=b.length;C<M;C++){const I=b[C],L=u(I);L!==null&&(L instanceof HTMLImageElement?E.push(L):E.push(new WS(L.data,L.width,L.height)))}s[v.uuid]=new s1(E)}else{const E=u(v.url);s[v.uuid]=new s1(E)}}}return s}async parseImagesAsync(e){const t=this,i={};let s;async function o(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await s.loadAsync(d)}else return l.data?{data:CS(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){s=new y$(this.manager),s.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const d=e[l],p=d.url;if(Array.isArray(p)){const _=[];for(let v=0,b=p.length;v<b;v++){const E=p[v],C=await o(E);C!==null&&(C instanceof HTMLImageElement?_.push(C):_.push(new WS(C.data,C.width,C.height)))}i[d.uuid]=new s1(_)}else{const _=await o(d.url);i[d.uuid]=new s1(_)}}}return i}parseTextures(e,t){function i(o,l){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),l[o])}const s={};if(e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=e[o];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);const d=t[u.image],p=d.data;let _;Array.isArray(p)?(_=new U$,p.length===6&&(_.needsUpdate=!0)):(p&&p.data?_=new WS:_=new ac,p&&(_.needsUpdate=!0)),_.source=d,_.uuid=u.uuid,u.name!==void 0&&(_.name=u.name),u.mapping!==void 0&&(_.mapping=i(u.mapping,ZSe)),u.offset!==void 0&&_.offset.fromArray(u.offset),u.repeat!==void 0&&_.repeat.fromArray(u.repeat),u.center!==void 0&&_.center.fromArray(u.center),u.rotation!==void 0&&(_.rotation=u.rotation),u.wrap!==void 0&&(_.wrapS=i(u.wrap[0],j5),_.wrapT=i(u.wrap[1],j5)),u.format!==void 0&&(_.format=u.format),u.type!==void 0&&(_.type=u.type),u.encoding!==void 0&&(_.encoding=u.encoding),u.minFilter!==void 0&&(_.minFilter=i(u.minFilter,X5)),u.magFilter!==void 0&&(_.magFilter=i(u.magFilter,X5)),u.anisotropy!==void 0&&(_.anisotropy=u.anisotropy),u.flipY!==void 0&&(_.flipY=u.flipY),u.premultiplyAlpha!==void 0&&(_.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(_.unpackAlignment=u.unpackAlignment),u.userData!==void 0&&(_.userData=u.userData),s[u.uuid]=_}return s}parseObject(e,t,i,s,o){let l;function u(b){return t[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",b),t[b]}function d(b){if(b!==void 0){if(Array.isArray(b)){const E=[];for(let C=0,M=b.length;C<M;C++){const I=b[C];i[I]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",I),E.push(i[I])}return E}return i[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),i[b]}}function p(b){return s[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",b),s[b]}let _,v;switch(e.type){case"Scene":l=new u$,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new Nn(e.background):l.background=p(e.background)),e.environment!==void 0&&(l.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new qR(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new JR(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":l=new Ja(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new J0(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new tJ(e.color,e.intensity);break;case"DirectionalLight":l=new eJ(e.color,e.intensity);break;case"PointLight":l=new ZK(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new nJ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new QK(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new qK(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new ik().fromJSON(e);break;case"SkinnedMesh":_=u(e.geometry),v=d(e.material),l=new xK(_,v),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":_=u(e.geometry),v=d(e.material),l=new Fn(_,v);break;case"InstancedMesh":_=u(e.geometry),v=d(e.material);const b=e.count,E=e.instanceMatrix,C=e.instanceColor;l=new wK(_,v,b),l.instanceMatrix=new A1(new Float32Array(E.array),16),C!==void 0&&(l.instanceColor=new A1(new Float32Array(C.array),C.itemSize));break;case"LOD":l=new EK;break;case"Line":l=new wp(u(e.geometry),d(e.material));break;case"LineLoop":l=new $K(u(e.geometry),d(e.material));break;case"LineSegments":l=new o_(u(e.geometry),d(e.material));break;case"PointCloud":case"Points":l=new CK(u(e.geometry),d(e.material));break;case"Sprite":l=new SK(d(e.material));break;case"Group":l=new AS;break;case"Bone":l=new zP;break;default:l=new to}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const b=e.children;for(let E=0;E<b.length;E++)l.add(this.parseObject(b[E],t,i,s,o))}if(e.animations!==void 0){const b=e.animations;for(let E=0;E<b.length;E++){const C=b[E];l.animations.push(o[C])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const b=e.levels;for(let E=0;E<b.length;E++){const C=b[E],M=l.getObjectByProperty("uuid",C.object);M!==void 0&&l.addLevel(M,C.distance)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=t[i.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}}const ZSe={UVMapping:WR,CubeReflectionMapping:wv,CubeRefractionMapping:$v,EquirectangularReflectionMapping:e$,EquirectangularRefractionMapping:t$,CubeUVReflectionMapping:NE},j5={RepeatWrapping:aE,ClampToEdgeWrapping:tf,MirroredRepeatWrapping:n$},X5={NearestFilter:Ul,NearestMipmapNearestFilter:gI,NearestMipmapLinearFilter:_I,LinearFilter:bl,LinearMipmapNearestFilter:AP,LinearMipmapLinearFilter:F1};class eEe extends Pm{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=R1.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,fetch(e,u).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(d){R1.add(e,d),t&&t(d),o.manager.itemEnd(e)}).catch(function(d){s&&s(d),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}let xM;const tF={getContext:function(){return xM===void 0&&(xM=new(window.AudioContext||window.webkitAudioContext)),xM},setContext:function(n){xM=n}};class tEe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new ay(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{const d=u.slice(0);tF.getContext().decodeAudioData(d,function(p){t(p)})}catch(d){s?s(d):console.error(d),o.manager.itemError(e)}},i,s)}}class nEe extends ik{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const s=new Nn().set(e),o=new Nn().set(t),l=new Me(s.r,s.g,s.b),u=new Me(o.r,o.g,o.b),d=Math.sqrt(Math.PI),p=d*Math.sqrt(.75);this.sh.coefficients[0].copy(l).add(u).multiplyScalar(d),this.sh.coefficients[1].copy(l).sub(u).multiplyScalar(p)}}class rEe extends ik{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new Nn().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Y5=new qr,K5=new qr,Cb=new qr;class iEe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ja,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ja,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Cb.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(p1*t.fov*.5)/t.zoom;let l,u;K5.elements[12]=-i,Y5.elements[12]=i,l=-o*t.aspect+s,u=o*t.aspect+s,Cb.elements[0]=2*t.near/(u-l),Cb.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(Cb),l=-o*t.aspect-s,u=o*t.aspect-s,Cb.elements[0]=2*t.near/(u-l),Cb.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(Cb)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(K5),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Y5)}}class nF{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=J5(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=J5();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function J5(){return(typeof performance>"u"?Date:performance).now()}const Mb=new Me,q5=new vl,sEe=new Me,Ab=new Me;class oEe extends to{constructor(){super(),this.type="AudioListener",this.context=tF.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new nF}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Mb,q5,sEe),Ab.set(0,0,-1).applyQuaternion(q5),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Mb.x,s),t.positionY.linearRampToValueAtTime(Mb.y,s),t.positionZ.linearRampToValueAtTime(Mb.z,s),t.forwardX.linearRampToValueAtTime(Ab.x,s),t.forwardY.linearRampToValueAtTime(Ab.y,s),t.forwardZ.linearRampToValueAtTime(Ab.z,s),t.upX.linearRampToValueAtTime(i.x,s),t.upY.linearRampToValueAtTime(i.y,s),t.upZ.linearRampToValueAtTime(i.z,s)}else t.setPosition(Mb.x,Mb.y,Mb.z),t.setOrientation(Ab.x,Ab.y,Ab.z,i.x,i.y,i.z)}}class sJ extends to{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ib=new Me,Q5=new vl,aEe=new Me,Rb=new Me;class lEe extends sJ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ib,Q5,aEe),Rb.set(0,0,1).applyQuaternion(Q5);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ib.x,i),t.positionY.linearRampToValueAtTime(Ib.y,i),t.positionZ.linearRampToValueAtTime(Ib.z,i),t.orientationX.linearRampToValueAtTime(Rb.x,i),t.orientationY.linearRampToValueAtTime(Rb.y,i),t.orientationZ.linearRampToValueAtTime(Rb.z,i)}else t.setPosition(Ib.x,Ib.y,Ib.z),t.setOrientation(Rb.x,Rb.y,Rb.z)}}class uEe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class oJ{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,o,l;switch(t){case"quaternion":s=this._slerp,o=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,o=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,o=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=o,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,o=e*s+s;let l=this.cumulativeWeight;if(l===0){for(let u=0;u!==s;++u)i[o+u]=i[u];l=t}else{l+=t;const u=t/l;this._mixBufferRegion(i,o,0,u,s)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,o=this.cumulativeWeight,l=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const d=t*this._origIndex;this._mixBufferRegion(i,s,d,1-o,t)}l>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let d=t,p=t+t;d!==p;++d)if(i[d]!==i[d+t]){u.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let o=i,l=s;o!==l;++o)t[o]=t[s+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,o){if(s>=.5)for(let l=0;l!==o;++l)e[t+l]=e[i+l]}_slerp(e,t,i,s){vl.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,o){const l=this._workIndex*o;vl.multiplyQuaternionsFlat(e,l,e,t,e,i),vl.slerpFlat(e,t,e,t,e,l,s)}_lerp(e,t,i,s,o){const l=1-s;for(let u=0;u!==o;++u){const d=t+u;e[d]=e[d]*l+e[i+u]*s}}_lerpAdditive(e,t,i,s,o){for(let l=0;l!==o;++l){const u=t+l;e[u]=e[u]+e[i+l]*s}}}const rF="\\[\\]\\.:\\/",cEe=new RegExp("["+rF+"]","g"),iF="[^"+rF+"]",hEe="[^"+rF.replace("\\.","")+"]",dEe=/((?:WC+[\/:])*)/.source.replace("WC",iF),pEe=/(WCOD+)?/.source.replace("WCOD",hEe),fEe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",iF),mEe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",iF),gEe=new RegExp("^"+dEe+pEe+fEe+mEe+"$"),_Ee=["material","materials","bones"];class yEe{constructor(e,t,i){const s=i||bo.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class bo{constructor(e,t,i){this.path=t,this.parsedPath=i||bo.parseTrackName(t),this.node=bo.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new bo.Composite(e,t,i):new bo(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(cEe,"")}static parseTrackName(e){const t=gEe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=i.nodeName.substring(s+1);_Ee.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const d=i(u.children);if(d)return d}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=bo.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let p=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let _=0;_<e.length;_++)if(e[_].name===p){p=_;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[s];if(l===void 0){const p=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}d=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(d=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}bo.Composite=yEe;bo.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};bo.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};bo.prototype.GetterByBindingType=[bo.prototype._getValue_direct,bo.prototype._getValue_array,bo.prototype._getValue_arrayElement,bo.prototype._getValue_toArray];bo.prototype.SetterByBindingTypeAndVersioning=[[bo.prototype._setValue_direct,bo.prototype._setValue_direct_setNeedsUpdate,bo.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[bo.prototype._setValue_array,bo.prototype._setValue_array_setNeedsUpdate,bo.prototype._setValue_array_setMatrixWorldNeedsUpdate],[bo.prototype._setValue_arrayElement,bo.prototype._setValue_arrayElement_setNeedsUpdate,bo.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[bo.prototype._setValue_fromArray,bo.prototype._setValue_fromArray_setNeedsUpdate,bo.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class vEe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Am(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length;let u,d=e.length,p=this.nCachedObjects_;for(let _=0,v=arguments.length;_!==v;++_){const b=arguments[_],E=b.uuid;let C=t[E];if(C===void 0){C=d++,t[E]=C,e.push(b);for(let M=0,I=l;M!==I;++M)o[M].push(new bo(b,i[M],s[M]))}else if(C<p){u=e[C];const M=--p,I=e[M];t[I.uuid]=C,e[C]=I,t[E]=M,e[M]=b;for(let L=0,O=l;L!==O;++L){const P=o[L],B=P[M];let z=P[C];P[C]=B,z===void 0&&(z=new bo(b,i[L],s[L])),P[M]=z}}else e[C]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const d=arguments[l],p=d.uuid,_=t[p];if(_!==void 0&&_>=o){const v=o++,b=e[v];t[b.uuid]=_,e[_]=b,t[p]=v,e[v]=d;for(let E=0,C=s;E!==C;++E){const M=i[E],I=M[v],L=M[_];M[_]=I,M[v]=L}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_,l=e.length;for(let u=0,d=arguments.length;u!==d;++u){const p=arguments[u],_=p.uuid,v=t[_];if(v!==void 0)if(delete t[_],v<o){const b=--o,E=e[b],C=--l,M=e[C];t[E.uuid]=v,e[v]=E,t[M.uuid]=b,e[b]=M,e.pop();for(let I=0,L=s;I!==L;++I){const O=i[I],P=O[b],B=O[C];O[v]=P,O[b]=B,O.pop()}}else{const b=--l,E=e[b];b>0&&(t[E.uuid]=v),e[v]=E,e.pop();for(let C=0,M=s;C!==M;++C){const I=i[C];I[v]=I[b],I.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const i=this._bindingsIndicesByPath;let s=i[e];const o=this._bindings;if(s!==void 0)return o[s];const l=this._paths,u=this._parsedPaths,d=this._objects,p=d.length,_=this.nCachedObjects_,v=new Array(p);s=o.length,i[e]=s,l.push(e),u.push(t),o.push(v);for(let b=_,E=d.length;b!==E;++b){const C=d[b];v[b]=new bo(C,e,t)}return v}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const s=this._paths,o=this._parsedPaths,l=this._bindings,u=l.length-1,d=l[u],p=e[u];t[p]=i,l[i]=d,l.pop(),o[i]=o[u],o.pop(),s[i]=s[u],s.pop()}}}class bEe{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const o=t.tracks,l=o.length,u=new Array(l),d={endingStart:r1,endingEnd:r1};for(let p=0;p!==l;++p){const _=o[p].createInterpolant(null);u[p]=_,_.settings=d}this._interpolantSettings=d,this._interpolants=u,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=nK,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const s=this._clip.duration,o=e._clip.duration,l=o/s,u=s/o;e.warp(1,l,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,o=s.time,l=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=s._lendControlInterpolant(),this._timeScaleInterpolant=u);const d=u.parameterPositions,p=u.sampleValues;return d[0]=o,d[1]=o+i,p[0]=e/l,p[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const d=(e-o)*i;if(d<0||i===0)return;this._startTime=null,t=i*d}t*=this._updateTimeScale(e);const l=this._updateTime(t),u=this._updateWeight(e);if(u>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case RP:for(let _=0,v=d.length;_!==v;++_)d[_].evaluate(l),p[_].accumulateAdditive(u);break;case VR:default:for(let _=0,v=d.length;_!==v;++_)d[_].evaluate(l),p[_].accumulate(s,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,o=this._loopCount;const l=i===rK;if(e===0)return o===-1?s:l&&(o&1)===1?t-s:s;if(i===tK){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),s>=t||s<0){const u=Math.floor(s/t);s-=t*u,o+=Math.abs(u);const d=this.repetitions-o;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const p=e<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=o,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=s;if(l&&(o&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=i1,s.endingEnd=i1):(e?s.endingStart=this.zeroSlopeAtStart?i1:r1:s.endingStart=s$,t?s.endingEnd=this.zeroSlopeAtEnd?i1:r1:s.endingEnd=s$)}_scheduleFading(e,t,i){const s=this._mixer,o=s.time;let l=this._weightInterpolant;l===null&&(l=s._lendControlInterpolant(),this._weightInterpolant=l);const u=l.parameterPositions,d=l.sampleValues;return u[0]=o,d[0]=t,u[1]=o+e,d[1]=i,this}}const TEe=new Float32Array(1);class SEe extends Bm{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,o=s.length,l=e._propertyBindings,u=e._interpolants,d=i.uuid,p=this._bindingsByRootAndName;let _=p[d];_===void 0&&(_={},p[d]=_);for(let v=0;v!==o;++v){const b=s[v],E=b.name;let C=_[E];if(C!==void 0)++C.referenceCount,l[v]=C;else{if(C=l[v],C!==void 0){C._cacheIndex===null&&(++C.referenceCount,this._addInactiveBinding(C,d,E));continue}const M=t&&t._propertyBindings[v].binding.parsedPath;C=new oJ(bo.create(i,E,M),b.ValueTypeName,b.getValueSize()),++C.referenceCount,this._addInactiveBinding(C,d,E),l[v]=C}u[v].resultBuffer=C.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,o=this._actionsByClip[s];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,o=this._actionsByClip;let l=o[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=l;else{const u=l.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=s.length,s.push(e),l.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,l=this._actionsByClip,u=l[o],d=u.knownActions,p=d[d.length-1],_=e._byClipCacheIndex;p._byClipCacheIndex=_,d[_]=p,d.pop(),e._byClipCacheIndex=null;const v=u.actionByRoot,b=(e._localRoot||this._root).uuid;delete v[b],d.length===0&&delete l[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,o=this._bindings;let l=s[t];l===void 0&&(l={},s[t]=l),l[i]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,o=i.path,l=this._bindingsByRootAndName,u=l[s],d=t[t.length-1],p=e._cacheIndex;d._cacheIndex=p,t[p]=d,t.pop(),delete u[o],Object.keys(u).length===0&&delete l[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new qP(new Float32Array(2),new Float32Array(2),1,TEe),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,o=t[s];e.__cacheIndex=s,t[s]=e,o.__cacheIndex=i,t[i]=o}clipAction(e,t,i){const s=t||this._root,o=s.uuid;let l=typeof e=="string"?_$.findByName(s,e):e;const u=l!==null?l.uuid:e,d=this._actionsByClip[u];let p=null;if(i===void 0&&(l!==null?i=l.blendMode:i=VR),d!==void 0){const v=d.actionByRoot[o];if(v!==void 0&&v.blendMode===i)return v;p=d.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const _=new bEe(this,l,t,i);return this._bindAction(_,p),this._addInactiveAction(_,u,o),_}existingAction(e,t){const i=t||this._root,s=i.uuid,o=typeof e=="string"?_$.findByName(i,e):e,l=o?o.uuid:e,u=this._actionsByClip[l];return u!==void 0&&u.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,o=Math.sign(e),l=this._accuIndex^=1;for(let p=0;p!==i;++p)t[p]._update(s,e,o,l);const u=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)u[p].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,o=s[i];if(o!==void 0){const l=o.knownActions;for(let u=0,d=l.length;u!==d;++u){const p=l[u];this._deactivateAction(p);const _=p._cacheIndex,v=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,v._cacheIndex=_,t[_]=v,t.pop(),this._removeInactiveBindingsForAction(p)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const l in i){const u=i[l].actionByRoot,d=u[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const s=this._bindingsByRootAndName,o=s[t];if(o!==void 0)for(const l in o){const u=o[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class eo{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new eo(this.value.clone===void 0?this.value:this.value.clone())}}let EEe=0;class xEe extends Bm{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:EEe++}),this.name="",this.usage=o$,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,s=t.length;i<s;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class bI extends QR{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class wEe{constructor(e,t,i,s,o){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=s,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class sF{constructor(e,t,i=0,s=1/0){this.ray=new F$(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new m1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return lN(e,this,i,t),i.sort(Z5),i}intersectObjects(e,t=!0,i=[]){for(let s=0,o=e.length;s<o;s++)lN(e[s],this,i,t);return i.sort(Z5),i}}function Z5(n,e){return n.distance-e.distance}function lN(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const s=n.children;for(let o=0,l=s.length;o<l;o++)lN(s[o],e,t,!0)}}class uN{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(oh(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class $Ee{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const eH=new Vt;class CEe{constructor(e=new Vt(1/0,1/0),t=new Vt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=eH.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return eH.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const tH=new Me,wM=new Me;class oF{constructor(e=new Me,t=new Me){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){tH.subVectors(e,this.start),wM.subVectors(this.end,this.start);const i=wM.dot(wM);let s=wM.dot(tH)/i;return t&&(s=oh(s,0,1)),s}closestPointToPoint(e,t,i){const s=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const nH=new Me;class MEe extends to{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const i=new ai,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,u=1,d=32;l<d;l++,u++){const p=l/d*Math.PI*2,_=u/d*Math.PI*2;s.push(Math.cos(p),Math.sin(p),1,Math.cos(_),Math.sin(_),1)}i.setAttribute("position",new sr(s,3));const o=new Rp({fog:!1,toneMapped:!1});this.cone=new o_(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),nH.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(nH),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ky=new Me,$M=new qr,AO=new qr;class AEe extends o_{constructor(e){const t=aJ(e),i=new ai,s=[],o=[],l=new Nn(0,0,1),u=new Nn(0,1,0);for(let p=0;p<t.length;p++){const _=t[p];_.parent&&_.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(l.r,l.g,l.b),o.push(u.r,u.g,u.b))}i.setAttribute("position",new sr(s,3)),i.setAttribute("color",new sr(o,3));const d=new Rp({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,s=i.getAttribute("position");AO.copy(this.root.matrixWorld).invert();for(let o=0,l=0;o<t.length;o++){const u=t[o];u.parent&&u.parent.isBone&&($M.multiplyMatrices(AO,u.matrixWorld),Ky.setFromMatrixPosition($M),s.setXYZ(l,Ky.x,Ky.y,Ky.z),$M.multiplyMatrices(AO,u.parent.matrixWorld),Ky.setFromMatrixPosition($M),s.setXYZ(l+1,Ky.x,Ky.y,Ky.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function aJ(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,aJ(n.children[t]));return e}class IEe extends Fn{constructor(e,t,i){const s=new t0(t,4,2),o=new r0({wireframe:!0,fog:!1,toneMapped:!1});super(s,o),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const REe=new Me,rH=new Nn,iH=new Nn;class kEe extends to{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const s=new Yg(t);s.rotateY(Math.PI*.5),this.material=new r0({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=s.getAttribute("position"),l=new Float32Array(o.count*3);s.setAttribute("color",new Do(l,3)),this.add(new Fn(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");rH.copy(this.light.color),iH.copy(this.light.groundColor);for(let i=0,s=t.count;i<s;i++){const o=i<s/2?rH:iH;t.setXYZ(i,o.r,o.g,o.b)}t.needsUpdate=!0}e.lookAt(REe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class OEe extends o_{constructor(e=10,t=10,i=4473924,s=8947848){i=new Nn(i),s=new Nn(s);const o=t/2,l=e/t,u=e/2,d=[],p=[];for(let b=0,E=0,C=-u;b<=t;b++,C+=l){d.push(-u,0,C,u,0,C),d.push(C,0,-u,C,0,u);const M=b===o?i:s;M.toArray(p,E),E+=3,M.toArray(p,E),E+=3,M.toArray(p,E),E+=3,M.toArray(p,E),E+=3}const _=new ai;_.setAttribute("position",new sr(d,3)),_.setAttribute("color",new sr(p,3));const v=new Rp({vertexColors:!0,toneMapped:!1});super(_,v),this.type="GridHelper"}}class LEe extends o_{constructor(e=10,t=16,i=8,s=64,o=4473924,l=8947848){o=new Nn(o),l=new Nn(l);const u=[],d=[];for(let v=0;v<=t;v++){const b=v/t*(Math.PI*2),E=Math.sin(b)*e,C=Math.cos(b)*e;u.push(0,0,0),u.push(E,0,C);const M=v&1?o:l;d.push(M.r,M.g,M.b),d.push(M.r,M.g,M.b)}for(let v=0;v<=i;v++){const b=v&1?o:l,E=e-e/i*v;for(let C=0;C<s;C++){let M=C/s*(Math.PI*2),I=Math.sin(M)*E,L=Math.cos(M)*E;u.push(I,0,L),d.push(b.r,b.g,b.b),M=(C+1)/s*(Math.PI*2),I=Math.sin(M)*E,L=Math.cos(M)*E,u.push(I,0,L),d.push(b.r,b.g,b.b)}}const p=new ai;p.setAttribute("position",new sr(u,3)),p.setAttribute("color",new sr(d,3));const _=new Rp({vertexColors:!0,toneMapped:!1});super(p,_),this.type="PolarGridHelper"}}const sH=new Me,CM=new Me,oH=new Me;class DEe extends to{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1);let s=new ai;s.setAttribute("position",new sr([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new Rp({fog:!1,toneMapped:!1});this.lightPlane=new wp(s,o),this.add(this.lightPlane),s=new ai,s.setAttribute("position",new sr([0,0,0,0,0,1],3)),this.targetLine=new wp(s,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){sH.setFromMatrixPosition(this.light.matrixWorld),CM.setFromMatrixPosition(this.light.target.matrixWorld),oH.subVectors(CM,sH),this.lightPlane.lookAt(CM),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(CM),this.targetLine.scale.z=oH.length()}}const MM=new Me,$c=new BE;class NEe extends o_{constructor(e){const t=new ai,i=new Rp({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],o=[],l={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(C,M){d(C),d(M)}function d(C){s.push(0,0,0),o.push(0,0,0),l[C]===void 0&&(l[C]=[]),l[C].push(s.length/3-1)}t.setAttribute("position",new sr(s,3)),t.setAttribute("color",new sr(o,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new Nn(16755200),_=new Nn(16711680),v=new Nn(43775),b=new Nn(16777215),E=new Nn(3355443);this.setColors(p,_,v,b,E)}setColors(e,t,i,s,o){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,o.r,o.g,o.b),l.setXYZ(41,o.r,o.g,o.b),l.setXYZ(42,o.r,o.g,o.b),l.setXYZ(43,o.r,o.g,o.b),l.setXYZ(44,o.r,o.g,o.b),l.setXYZ(45,o.r,o.g,o.b),l.setXYZ(46,o.r,o.g,o.b),l.setXYZ(47,o.r,o.g,o.b),l.setXYZ(48,o.r,o.g,o.b),l.setXYZ(49,o.r,o.g,o.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,s=1;$c.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),rh("c",t,e,$c,0,0,-1),rh("t",t,e,$c,0,0,1),rh("n1",t,e,$c,-i,-s,-1),rh("n2",t,e,$c,i,-s,-1),rh("n3",t,e,$c,-i,s,-1),rh("n4",t,e,$c,i,s,-1),rh("f1",t,e,$c,-i,-s,1),rh("f2",t,e,$c,i,-s,1),rh("f3",t,e,$c,-i,s,1),rh("f4",t,e,$c,i,s,1),rh("u1",t,e,$c,i*.7,s*1.1,-1),rh("u2",t,e,$c,-i*.7,s*1.1,-1),rh("u3",t,e,$c,0,s*2,-1),rh("cf1",t,e,$c,-i,0,1),rh("cf2",t,e,$c,i,0,1),rh("cf3",t,e,$c,0,-s,1),rh("cf4",t,e,$c,0,s,1),rh("cn1",t,e,$c,-i,0,-1),rh("cn2",t,e,$c,i,0,-1),rh("cn3",t,e,$c,0,-s,-1),rh("cn4",t,e,$c,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function rh(n,e,t,i,s,o,l){MM.set(s,o,l).unproject(i);const u=e[n];if(u!==void 0){const d=t.getAttribute("position");for(let p=0,_=u.length;p<_;p++)d.setXYZ(u[p],MM.x,MM.y,MM.z)}}const AM=new n0;class BEe extends o_{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),o=new ai;o.setIndex(new Do(i,1)),o.setAttribute("position",new Do(s,3)),super(o,new Rp({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&AM.setFromObject(this.object),AM.isEmpty())return;const t=AM.min,i=AM.max,s=this.geometry.attributes.position,o=s.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=t.x,o[4]=i.y,o[5]=i.z,o[6]=t.x,o[7]=t.y,o[8]=i.z,o[9]=i.x,o[10]=t.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=t.z,o[15]=t.x,o[16]=i.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=i.x,o[22]=t.y,o[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}}class PEe extends o_{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new ai;o.setIndex(new Do(i,1)),o.setAttribute("position",new sr(s,3)),super(o,new Rp({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class FEe extends wp{constructor(e,t=1,i=16776960){const s=i,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new ai;l.setAttribute("position",new sr(o,3)),l.computeBoundingSphere(),super(l,new Rp({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new ai;d.setAttribute("position",new sr(u,3)),d.computeBoundingSphere(),this.add(new Fn(d,new r0({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}}const aH=new Me;let IM,IO;class zEe extends to{constructor(e=new Me(0,0,1),t=new Me(0,0,0),i=1,s=16776960,o=i*.2,l=o*.2){super(),this.type="ArrowHelper",IM===void 0&&(IM=new ai,IM.setAttribute("position",new sr([0,0,0,0,1,0],3)),IO=new zl(0,.5,1,5,1),IO.translate(0,-.5,0)),this.position.copy(t),this.line=new wp(IM,new Rp({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Fn(IO,new r0({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{aH.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(aH,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class UEe extends o_{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new ai;s.setAttribute("position",new sr(t,3)),s.setAttribute("color",new sr(i,3));const o=new Rp({vertexColors:!0,toneMapped:!1});super(s,o),this.type="AxesHelper"}setColors(e,t,i){const s=new Nn,o=this.geometry.attributes.color.array;return s.set(e),s.toArray(o,0),s.toArray(o,3),s.set(t),s.toArray(o,6),s.toArray(o,9),s.set(i),s.toArray(o,12),s.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class HEe{constructor(){this.type="ShapePath",this.color=new Nn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new c$,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this.currentPath.quadraticCurveTo(e,t,i,s),this}bezierCurveTo(e,t,i,s,o,l){return this.currentPath.bezierCurveTo(e,t,i,s,o,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function i(O){const P=[];for(let B=0,z=O.length;B<z;B++){const G=O[B],j=new g1;j.curves=G.curves,P.push(j)}return P}function s(O,P){const B=P.length;let z=!1;for(let G=B-1,j=0;j<B;G=j++){let H=P[G],Z=P[j],ae=Z.x-H.x,J=Z.y-H.y;if(Math.abs(J)>Number.EPSILON){if(J<0&&(H=P[j],ae=-ae,Z=P[G],J=-J),O.y<H.y||O.y>Z.y)continue;if(O.y===H.y){if(O.x===H.x)return!0}else{const te=J*(O.x-H.x)-ae*(O.y-H.y);if(te===0)return!0;if(te<0)continue;z=!z}}else{if(O.y!==H.y)continue;if(Z.x<=O.x&&O.x<=H.x||H.x<=O.x&&O.x<=Z.x)return!0}}return z}const o=q0.isClockWise,l=this.subPaths;if(l.length===0)return[];if(t===!0)return i(l);let u,d,p;const _=[];if(l.length===1)return d=l[0],p=new g1,p.curves=d.curves,_.push(p),_;let v=!o(l[0].getPoints());v=e?!v:v;const b=[],E=[];let C=[],M=0,I;E[M]=void 0,C[M]=[];for(let O=0,P=l.length;O<P;O++)d=l[O],I=d.getPoints(),u=o(I),u=e?!u:u,u?(!v&&E[M]&&M++,E[M]={s:new g1,p:I},E[M].s.curves=d.curves,v&&M++,C[M]=[]):C[M].push({h:d,p:I[0]});if(!E[0])return i(l);if(E.length>1){let O=!1,P=0;for(let B=0,z=E.length;B<z;B++)b[B]=[];for(let B=0,z=E.length;B<z;B++){const G=C[B];for(let j=0;j<G.length;j++){const H=G[j];let Z=!0;for(let ae=0;ae<E.length;ae++)s(H.p,E[ae].p)&&(B!==ae&&P++,Z?(Z=!1,b[ae].push(H)):O=!0);Z&&b[B].push(H)}}P>0&&O===!1&&(C=b)}let L;for(let O=0,P=E.length;O<P;O++){p=E[O].s,_.push(p),L=C[O];for(let B=0,z=L.length;B<z;B++)p.holes.push(L[B].h)}return _}}const Y_=GEe();function GEe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),s=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(i[d]=0,i[d|256]=32768,s[d]=24,s[d|256]=24):p<-14?(i[d]=1024>>-p-14,i[d|256]=1024>>-p-14|32768,s[d]=-p-1,s[d|256]=-p-1):p<=15?(i[d]=p+15<<10,i[d|256]=p+15<<10|32768,s[d]=13,s[d|256]=13):p<128?(i[d]=31744,i[d|256]=64512,s[d]=24,s[d|256]=24):(i[d]=31744,i[d|256]=64512,s[d]=13,s[d|256]=13)}const o=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,_=0;for(;!(p&8388608);)p<<=1,_-=8388608;p&=-8388609,_+=947912704,o[d]=p|_}for(let d=1024;d<2048;++d)o[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)l[d]=d<<23;l[31]=1199570944,l[32]=2147483648;for(let d=33;d<63;++d)l[d]=2147483648+(d-32<<23);l[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(u[d]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:o,exponentTable:l,offsetTable:u}}function WEe(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=oh(n,-65504,65504),Y_.floatView[0]=n;const e=Y_.uint32View[0],t=e>>23&511;return Y_.baseTable[t]+((e&8388607)>>Y_.shiftTable[t])}function VEe(n){const e=n>>10;return Y_.uint32View[0]=Y_.mantissaTable[Y_.offsetTable[e]+(n&1023)]+Y_.exponentTable[e],Y_.floatView[0]}var jEe=Object.freeze({__proto__:null,toHalfFloat:WEe,fromHalfFloat:VEe});class XEe extends ai{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}}class YEe extends ai{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}}function KEe(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function JEe(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function qEe(){console.error("THREE.ImmediateRenderObject has been removed.")}class QEe extends Ic{constructor(e,t,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,i),this.samples=4}}class ZEe extends P${constructor(e,t,i,s){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,i,s)}}class exe extends jR{constructor(e,t,i,s){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:DE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=DE);const txe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:MP,AddEquation:jb,AddOperation:DY,AdditiveAnimationBlendMode:RP,AdditiveBlending:fI,AlphaFormat:VY,AlwaysDepth:MY,AlwaysStencilFunc:sK,AmbientLight:tJ,AmbientLightProbe:rEe,AnimationClip:_$,AnimationLoader:WSe,AnimationMixer:SEe,AnimationObjectGroup:vEe,AnimationUtils:zSe,ArcCurve:AK,ArrayCamera:vK,ArrowHelper:zEe,Audio:sJ,AudioAnalyser:uEe,AudioContext:tF,AudioListener:oEe,AudioLoader:tEe,AxesHelper:UEe,BackSide:sd,BasicDepthPacking:Nv,BasicShadowMap:fY,Bone:zP,BooleanKeyframeTrack:H1,Box2:CEe,Box3:n0,Box3Helper:PEe,BoxBufferGeometry:hu,BoxGeometry:hu,BoxHelper:BEe,BufferAttribute:Do,BufferGeometry:ai,BufferGeometryLoader:iJ,ByteType:zY,Cache:R1,Camera:BE,CameraHelper:NEe,CanvasTexture:cSe,CapsuleBufferGeometry:cE,CapsuleGeometry:cE,CatmullRomCurve3:IK,CineonToneMapping:PY,CircleBufferGeometry:hE,CircleGeometry:hE,ClampToEdgeWrapping:tf,Clock:nF,Color:Nn,ColorKeyframeTrack:QP,ColorManagement:eg,CompressedTexture:MK,CompressedTextureLoader:VSe,ConeBufferGeometry:dE,ConeGeometry:dE,CubeCamera:cK,CubeReflectionMapping:wv,CubeRefractionMapping:$v,CubeTexture:U$,CubeTextureLoader:jSe,CubeUVReflectionMapping:NE,CubicBezierCurve:HP,CubicBezierCurve3:RK,CubicInterpolant:XK,CullFaceBack:CD,CullFaceFront:pY,CullFaceFrontBack:m_e,CullFaceNone:dY,Curve:i0,CurvePath:OK,CustomBlending:gY,CustomToneMapping:FY,CylinderBufferGeometry:zl,CylinderGeometry:zl,Cylindrical:$Ee,Data3DTexture:jR,DataArrayTexture:P$,DataTexture:WS,DataTexture2DArray:ZEe,DataTexture3D:exe,DataTextureLoader:XSe,DataUtils:jEe,DecrementStencilOp:M_e,DecrementWrapStencilOp:I_e,DefaultLoadingManager:JK,DepthFormat:bv,DepthStencilFormat:Cv,DepthTexture:BP,DirectionalLight:eJ,DirectionalLightHelper:DEe,DiscreteInterpolant:YK,DodecahedronBufferGeometry:pE,DodecahedronGeometry:pE,DoubleSide:nf,DstAlphaFactor:SY,DstColorFactor:xY,DynamicCopyUsage:W_e,DynamicDrawUsage:d1,DynamicReadUsage:U_e,EdgesGeometry:LK,EllipseCurve:tk,EqualDepth:IY,EqualStencilFunc:L_e,EquirectangularReflectionMapping:e$,EquirectangularRefractionMapping:t$,Euler:U1,EventDispatcher:Bm,ExtrudeBufferGeometry:fE,ExtrudeGeometry:fE,FileLoader:ay,FlatShading:mY,Float16BufferAttribute:$ye,Float32BufferAttribute:sr,Float64BufferAttribute:Cye,FloatType:j0,Fog:qR,FogExp2:JR,Font:JEe,FontLoader:KEe,FramebufferTexture:uSe,FrontSide:e_,Frustum:XR,GLBufferAttribute:wEe,GLSL1:j_e,GLSL3:ZD,GreaterDepth:kY,GreaterEqualDepth:RY,GreaterEqualStencilFunc:P_e,GreaterStencilFunc:N_e,GridHelper:OEe,Group:AS,HalfFloatType:M1,HemisphereLight:qK,HemisphereLightHelper:kEe,HemisphereLightProbe:nEe,IcosahedronBufferGeometry:mE,IcosahedronGeometry:mE,ImageBitmapLoader:eEe,ImageLoader:y$,ImageUtils:OP,ImmediateRenderObject:qEe,IncrementStencilOp:C_e,IncrementWrapStencilOp:A_e,InstancedBufferAttribute:A1,InstancedBufferGeometry:ok,InstancedInterleavedBuffer:bI,InstancedMesh:wK,Int16BufferAttribute:xye,Int32BufferAttribute:wye,Int8BufferAttribute:Tye,IntType:HY,InterleavedBuffer:QR,InterleavedBufferAttribute:xm,Interpolant:G$,InterpolateDiscrete:r$,InterpolateLinear:i$,InterpolateSmooth:bA,InvertStencilOp:R_e,KeepStencilOp:TA,KeyframeTrack:s0,LOD:EK,LatheBufferGeometry:I1,LatheGeometry:I1,Layers:m1,LessDepth:AY,LessEqualDepth:mI,LessEqualStencilFunc:D_e,LessStencilFunc:O_e,Light:Bv,LightProbe:ik,Line:wp,Line3:oF,LineBasicMaterial:Rp,LineCurve:nk,LineCurve3:kK,LineDashedMaterial:VK,LineLoop:$K,LineSegments:o_,LinearEncoding:mg,LinearFilter:bl,LinearInterpolant:qP,LinearMipMapLinearFilter:b_e,LinearMipMapNearestFilter:v_e,LinearMipmapLinearFilter:F1,LinearMipmapNearestFilter:AP,LinearSRGBColorSpace:uv,LinearToneMapping:NY,Loader:Pm,LoaderUtils:aN,LoadingManager:ZP,LoopOnce:tK,LoopPingPong:rK,LoopRepeat:nK,LuminanceAlphaFormat:YY,LuminanceFormat:XY,MOUSE:Ub,Material:od,MaterialLoader:sk,MathUtils:aK,Matrix3:rf,Matrix4:qr,MaxEquation:RD,Mesh:Fn,MeshBasicMaterial:r0,MeshDepthMaterial:H$,MeshDistanceMaterial:KR,MeshLambertMaterial:GK,MeshMatcapMaterial:WK,MeshNormalMaterial:YP,MeshPhongMaterial:UK,MeshPhysicalMaterial:zK,MeshStandardMaterial:f$,MeshToonMaterial:HK,MinEquation:ID,MirroredRepeatWrapping:n$,MixOperation:LY,MultiplyBlending:AD,MultiplyOperation:B$,NearestFilter:Ul,NearestMipMapLinearFilter:y_e,NearestMipMapNearestFilter:__e,NearestMipmapLinearFilter:_I,NearestMipmapNearestFilter:gI,NeverDepth:CY,NeverStencilFunc:k_e,NoBlending:lf,NoColorSpace:x_e,NoToneMapping:Qg,NormalAnimationBlendMode:VR,NormalBlending:ny,NotEqualDepth:OY,NotEqualStencilFunc:B_e,NumberKeyframeTrack:m$,Object3D:to,ObjectLoader:QSe,ObjectSpaceNormalMap:iK,OctahedronBufferGeometry:Yg,OctahedronGeometry:Yg,OneFactor:vY,OneMinusDstAlphaFactor:EY,OneMinusDstColorFactor:wY,OneMinusSrcAlphaFactor:GR,OneMinusSrcColorFactor:TY,OrthographicCamera:J0,PCFShadowMap:UR,PCFSoftShadowMap:yw,PMREMGenerator:tN,ParametricGeometry:XEe,Path:c$,PerspectiveCamera:Ja,Plane:V_,PlaneBufferGeometry:e0,PlaneGeometry:e0,PlaneHelper:FEe,PointLight:ZK,PointLightHelper:IEe,Points:CK,PointsMaterial:ek,PolarGridHelper:LEe,PolyhedronBufferGeometry:t_,PolyhedronGeometry:t_,PositionalAudio:lEe,PropertyBinding:bo,PropertyMixer:oJ,QuadraticBezierCurve:GP,QuadraticBezierCurve3:WP,Quaternion:vl,QuaternionKeyframeTrack:FE,QuaternionLinearInterpolant:KK,REVISION:DE,RGBADepthPacking:lE,RGBAFormat:Ff,RGBAIntegerFormat:ZY,RGBA_ASTC_10x10_Format:KD,RGBA_ASTC_10x5_Format:jD,RGBA_ASTC_10x6_Format:XD,RGBA_ASTC_10x8_Format:YD,RGBA_ASTC_12x10_Format:JD,RGBA_ASTC_12x12_Format:qD,RGBA_ASTC_4x4_Format:PD,RGBA_ASTC_5x4_Format:FD,RGBA_ASTC_5x5_Format:zD,RGBA_ASTC_6x5_Format:UD,RGBA_ASTC_6x6_Format:HD,RGBA_ASTC_8x5_Format:GD,RGBA_ASTC_8x6_Format:WD,RGBA_ASTC_8x8_Format:VD,RGBA_BPTC_Format:QD,RGBA_ETC2_EAC_Format:BD,RGBA_PVRTC_2BPPV1_Format:DD,RGBA_PVRTC_4BPPV1_Format:LD,RGBA_S3TC_DXT1_Format:_A,RGBA_S3TC_DXT3_Format:yA,RGBA_S3TC_DXT5_Format:vA,RGBFormat:jY,RGB_ETC1_Format:eK,RGB_ETC2_Format:ND,RGB_PVRTC_2BPPV1_Format:OD,RGB_PVRTC_4BPPV1_Format:kD,RGB_S3TC_DXT1_Format:gA,RGFormat:qY,RGIntegerFormat:QY,RawShaderMaterial:FK,Ray:F$,Raycaster:sF,RectAreaLight:nJ,RedFormat:KY,RedIntegerFormat:JY,ReinhardToneMapping:BY,RepeatWrapping:aE,ReplaceStencilOp:$_e,ReverseSubtractEquation:CP,RingBufferGeometry:gE,RingGeometry:gE,SRGBColorSpace:z0,Scene:u$,ShaderChunk:ds,ShaderLib:ef,ShaderMaterial:bd,ShadowMaterial:PK,Shape:g1,ShapeBufferGeometry:_E,ShapeGeometry:_E,ShapePath:HEe,ShapeUtils:q0,ShortType:UY,Skeleton:ZR,SkeletonHelper:AEe,SkinnedMesh:xK,SmoothShading:g_e,Source:s1,Sphere:s_,SphereBufferGeometry:t0,SphereGeometry:t0,Spherical:uN,SphericalHarmonics3:rJ,SplineCurve:VP,SpotLight:QK,SpotLightHelper:MEe,Sprite:SK,SpriteMaterial:FP,SrcAlphaFactor:HR,SrcAlphaSaturateFactor:$Y,SrcColorFactor:bY,StaticCopyUsage:G_e,StaticDrawUsage:o$,StaticReadUsage:z_e,StereoCamera:iEe,StreamCopyUsage:V_e,StreamDrawUsage:F_e,StreamReadUsage:H_e,StringKeyframeTrack:G1,SubtractEquation:_Y,SubtractiveBlending:MD,TOUCH:Hb,TangentSpaceNormalMap:z1,TetrahedronBufferGeometry:yE,TetrahedronGeometry:yE,TextGeometry:YEe,Texture:ac,TextureLoader:YSe,TorusBufferGeometry:Vg,TorusGeometry:Vg,TorusKnotBufferGeometry:vE,TorusKnotGeometry:vE,Triangle:Sm,TriangleFanDrawMode:E_e,TriangleStripDrawMode:S_e,TrianglesDrawMode:T_e,TubeBufferGeometry:bE,TubeGeometry:bE,UVMapping:WR,Uint16BufferAttribute:LP,Uint32BufferAttribute:DP,Uint8BufferAttribute:Sye,Uint8ClampedBufferAttribute:Eye,Uniform:eo,UniformsGroup:xEe,UniformsLib:Vn,UniformsUtils:z$,UnsignedByteType:tp,UnsignedInt248Type:vv,UnsignedIntType:Q_,UnsignedShort4444Type:GY,UnsignedShort5551Type:WY,UnsignedShortType:IP,VSMShadowMap:n1,Vector2:Vt,Vector3:Me,Vector4:vs,VectorKeyframeTrack:g$,VideoTexture:lSe,WebGL1Renderer:bK,WebGL3DRenderTarget:hye,WebGLArrayRenderTarget:cye,WebGLCubeRenderTarget:hK,WebGLMultipleRenderTargets:dye,WebGLMultisampleRenderTarget:QEe,WebGLRenderTarget:Ic,WebGLRenderer:PP,WebGLUtils:yK,WireframeGeometry:XP,WrapAroundEnding:s$,ZeroCurvatureEnding:r1,ZeroFactor:yY,ZeroSlopeEnding:i1,ZeroStencilOp:w_e,_SRGBAFormat:yI,sRGBEncoding:ps},Symbol.toStringTag,{value:"Module"}));var K_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lJ(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var a1={exports:{}},kb={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lH;function nxe(){return lH||(lH=1,kb.ConcurrentRoot=1,kb.ContinuousEventPriority=4,kb.DefaultEventPriority=16,kb.DiscreteEventPriority=1,kb.IdleEventPriority=536870912,kb.LegacyRoot=0),kb}(function(n){n.exports=nxe()})(a1);function rxe(n){let e;const t=new Set,i=(u,d)=>{const p=typeof u=="function"?u(e):u;if(p!==e){const _=e;e=d?p:Object.assign({},e,p),t.forEach(v=>v(e,_))}},s=()=>e,o=(u,d=s,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let _=d(e);function v(){const b=d(e);if(!p(_,b)){const E=_;u(_=b,E)}}return t.add(v),()=>t.delete(v)},l={setState:i,getState:s,subscribe:(u,d,p)=>d||p?o(u,d,p):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,s,l),l}const ixe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),uH=ixe?ge.useEffect:ge.useLayoutEffect;function sxe(n){const e=typeof n=="function"?rxe(n):n,t=(i=e.getState,s=Object.is)=>{const[,o]=ge.useReducer(I=>I+1,0),l=e.getState(),u=ge.useRef(l),d=ge.useRef(i),p=ge.useRef(s),_=ge.useRef(!1),v=ge.useRef();v.current===void 0&&(v.current=i(l));let b,E=!1;(u.current!==l||d.current!==i||p.current!==s||_.current)&&(b=i(l),E=!s(v.current,b)),uH(()=>{E&&(v.current=b),u.current=l,d.current=i,p.current=s,_.current=!1});const C=ge.useRef(l);uH(()=>{const I=()=>{try{const O=e.getState(),P=d.current(O);p.current(v.current,P)||(u.current=O,v.current=P,o())}catch{_.current=!0,o()}},L=e.subscribe(I);return e.getState()!==C.current&&I(),L},[]);const M=E?b:v.current;return ge.useDebugValue(M),M};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const s=i.length<=0;return{value:i.shift(),done:s}}}},t}var uJ={exports:{}},TI={exports:{}},cH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hH;function oxe(){return hH||(hH=1,function(n){function e(q,oe){var se=q.length;q.push(oe);e:for(;0<se;){var pe=se-1>>>1,Se=q[pe];if(0<s(Se,oe))q[pe]=oe,q[se]=Se,se=pe;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var oe=q[0],se=q.pop();if(se!==oe){q[0]=se;e:for(var pe=0,Se=q.length,Fe=Se>>>1;pe<Fe;){var Re=2*(pe+1)-1,qe=q[Re],Ne=Re+1,it=q[Ne];if(0>s(qe,se))Ne<Se&&0>s(it,qe)?(q[pe]=it,q[Ne]=se,pe=Ne):(q[pe]=qe,q[Re]=se,pe=Re);else if(Ne<Se&&0>s(it,se))q[pe]=it,q[Ne]=se,pe=Ne;else break e}}return oe}function s(q,oe){var se=q.sortIndex-oe.sortIndex;return se!==0?se:q.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],_=1,v=null,b=3,E=!1,C=!1,M=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(q){for(var oe=t(p);oe!==null;){if(oe.callback===null)i(p);else if(oe.startTime<=q)i(p),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=t(p)}}function B(q){if(M=!1,P(q),!C)if(t(d)!==null)C=!0,be(z);else{var oe=t(p);oe!==null&&$e(B,oe.startTime-q)}}function z(q,oe){C=!1,M&&(M=!1,L(H),H=-1),E=!0;var se=b;try{for(P(oe),v=t(d);v!==null&&(!(v.expirationTime>oe)||q&&!J());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,b=v.priorityLevel;var Se=pe(v.expirationTime<=oe);oe=n.unstable_now(),typeof Se=="function"?v.callback=Se:v===t(d)&&i(d),P(oe)}else i(d);v=t(d)}if(v!==null)var Fe=!0;else{var Re=t(p);Re!==null&&$e(B,Re.startTime-oe),Fe=!1}return Fe}finally{v=null,b=se,E=!1}}var G=!1,j=null,H=-1,Z=5,ae=-1;function J(){return!(n.unstable_now()-ae<Z)}function te(){if(j!==null){var q=n.unstable_now();ae=q;var oe=!0;try{oe=j(!0,q)}finally{oe?he():(G=!1,j=null)}}else G=!1}var he;if(typeof O=="function")he=function(){O(te)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ce=le.port2;le.port1.onmessage=te,he=function(){ce.postMessage(null)}}else he=function(){I(te,0)};function be(q){j=q,G||(G=!0,he())}function $e(q,oe){H=I(function(){q(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){C||E||(C=!0,be(z))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(q){switch(b){case 1:case 2:case 3:var oe=3;break;default:oe=b}var se=b;b=oe;try{return q()}finally{b=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,oe){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=b;b=q;try{return oe()}finally{b=se}},n.unstable_scheduleCallback=function(q,oe,se){var pe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?pe+se:pe):se=pe,q){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=se+Se,q={id:_++,callback:oe,priorityLevel:q,startTime:se,expirationTime:Se,sortIndex:-1},se>pe?(q.sortIndex=se,e(p,q),t(d)===null&&q===t(p)&&(M?(L(H),H=-1):M=!0,$e(B,se-pe))):(q.sortIndex=Se,e(d,q),C||E||(C=!0,be(z))),q},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(q){var oe=b;return function(){var se=b;b=oe;try{return q.apply(this,arguments)}finally{b=se}}}}(cH)),cH}(function(n){n.exports=oxe()})(TI);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dH,pH;function axe(){return pH||(pH=1,dH=function(n){var e={},t=Vr,i=TI.exports,s=Object.assign;function o(w){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+w,g=1;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+w+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),d=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),B=Symbol.iterator;function z(w){return w===null||typeof w!="object"?null:(w=B&&w[B]||w["@@iterator"],typeof w=="function"?w:null)}function G(w){if(w==null)return null;if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case p:return"Fragment";case d:return"Portal";case v:return"Profiler";case _:return"StrictMode";case M:return"Suspense";case I:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case E:return(w.displayName||"Context")+".Consumer";case b:return(w._context.displayName||"Context")+".Provider";case C:var h=w.render;return w=w.displayName,w||(w=h.displayName||h.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case L:return h=w.displayName||null,h!==null?h:G(w.type)||"Memo";case O:h=w._payload,w=w._init;try{return G(w(h))}catch{}}return null}function j(w){var h=w.type;switch(w.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return w=h.render,w=w.displayName||w.name||"",h.displayName||(w!==""?"ForwardRef("+w+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(h);case 8:return h===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function H(w){var h=w,g=w;if(w.alternate)for(;h.return;)h=h.return;else{w=h;do h=w,h.flags&4098&&(g=h.return),w=h.return;while(w)}return h.tag===3?g:null}function Z(w){if(H(w)!==w)throw Error(o(188))}function ae(w){var h=w.alternate;if(!h){if(h=H(w),h===null)throw Error(o(188));return h!==w?null:w}for(var g=w,$=h;;){var A=g.return;if(A===null)break;var N=A.alternate;if(N===null){if($=A.return,$!==null){g=$;continue}break}if(A.child===N.child){for(N=A.child;N;){if(N===g)return Z(A),w;if(N===$)return Z(A),h;N=N.sibling}throw Error(o(188))}if(g.return!==$.return)g=A,$=N;else{for(var W=!1,de=A.child;de;){if(de===g){W=!0,g=A,$=N;break}if(de===$){W=!0,$=A,g=N;break}de=de.sibling}if(!W){for(de=N.child;de;){if(de===g){W=!0,g=N,$=A;break}if(de===$){W=!0,$=N,g=A;break}de=de.sibling}if(!W)throw Error(o(189))}}if(g.alternate!==$)throw Error(o(190))}if(g.tag!==3)throw Error(o(188));return g.stateNode.current===g?w:h}function J(w){return w=ae(w),w!==null?te(w):null}function te(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){var h=te(w);if(h!==null)return h;w=w.sibling}return null}function he(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){if(w.tag!==4){var h=he(w);if(h!==null)return h}w=w.sibling}return null}var le=Array.isArray,ce=n.getPublicInstance,be=n.getRootHostContext,$e=n.getChildHostContext,q=n.prepareForCommit,oe=n.resetAfterCommit,se=n.createInstance,pe=n.appendInitialChild,Se=n.finalizeInitialChildren,Fe=n.prepareUpdate,Re=n.shouldSetTextContent,qe=n.createTextInstance,Ne=n.scheduleTimeout,it=n.cancelTimeout,st=n.noTimeout,pt=n.isPrimaryRenderer,dt=n.supportsMutation,Ue=n.supportsPersistence,Ae=n.supportsHydration,je=n.getInstanceFromNode,nt=n.preparePortalMount,tt=n.getCurrentEventPriority,Dt=n.detachDeletedInstance,Rt=n.supportsMicrotasks,yt=n.scheduleMicrotask,Ct=n.supportsTestSelectors,Mt=n.findFiberRoot,mt=n.getBoundingRect,xe=n.getTextContent,ie=n.isHiddenSubtree,we=n.matchAccessibilityRole,ct=n.setFocusIfFocusable,Tt=n.setupIntersectionObserver,At=n.appendChild,ft=n.appendChildToContainer,Ke=n.commitTextUpdate,Oe=n.commitMount,Q=n.commitUpdate,ne=n.insertBefore,fe=n.insertInContainerBefore,Ie=n.removeChild,Ye=n.removeChildFromContainer,Gt=n.resetTextContent,He=n.hideInstance,Zt=n.hideTextInstance,_t=n.unhideInstance,Kt=n.unhideTextInstance,Yt=n.clearContainer,Rn=n.cloneInstance,ii=n.createContainerChildSet,Dr=n.appendChildToContainerChildSet,Si=n.finalizeContainerChildren,xr=n.replaceContainerChildren,fr=n.cloneHiddenInstance,re=n.cloneHiddenTextInstance,Te=n.canHydrateInstance,Ge=n.canHydrateTextInstance,ot=n.canHydrateSuspenseInstance,Ft=n.isSuspenseInstancePending,nn=n.isSuspenseInstanceFallback,On=n.registerSuspenseInstanceRetry,De=n.getNextHydratableSibling,gt=n.getFirstHydratableChild,$t=n.getFirstHydratableChildWithinContainer,vt=n.getFirstHydratableChildWithinSuspenseInstance,Wt=n.hydrateInstance,Un=n.hydrateTextInstance,tr=n.hydrateSuspenseInstance,mr=n.getNextHydratableInstanceAfterSuspenseInstance,wr=n.commitHydratedContainer,si=n.commitHydratedSuspenseInstance,Nr=n.clearSuspenseBoundary,jr=n.clearSuspenseBoundaryFromContainer,bs=n.shouldDeleteUnhydratedTailInstances,Ia=n.didNotMatchHydratedContainerTextInstance,Eo=n.didNotMatchHydratedTextInstance,Wl;function en(w){if(Wl===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);Wl=h&&h[1]||""}return`
`+Wl+w}var Ar=!1;function qa(w,h){if(!w||Ar)return"";Ar=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Qe){var $=Qe}Reflect.construct(w,[],h)}else{try{h.call()}catch(Qe){$=Qe}w.call(h.prototype)}else{try{throw Error()}catch(Qe){$=Qe}w()}}catch(Qe){if(Qe&&$&&typeof Qe.stack=="string"){for(var A=Qe.stack.split(`
`),N=$.stack.split(`
`),W=A.length-1,de=N.length-1;1<=W&&0<=de&&A[W]!==N[de];)de--;for(;1<=W&&0<=de;W--,de--)if(A[W]!==N[de]){if(W!==1||de!==1)do if(W--,de--,0>de||A[W]!==N[de]){var ke=`
`+A[W].replace(" at new "," at ");return w.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",w.displayName)),ke}while(1<=W&&0<=de);break}}}finally{Ar=!1,Error.prepareStackTrace=g}return(w=w?w.displayName||w.name:"")?en(w):""}var Ra=Object.prototype.hasOwnProperty,Bs=[],Ps=-1;function Li(w){return{current:w}}function Ir(w){0>Ps||(w.current=Bs[Ps],Bs[Ps]=null,Ps--)}function Cn(w,h){Ps++,Bs[Ps]=w.current,w.current=h}var Mr={},Ur=Li(Mr),_r=Li(!1),Di=Mr;function Ts(w,h){var g=w.type.contextTypes;if(!g)return Mr;var $=w.stateNode;if($&&$.__reactInternalMemoizedUnmaskedChildContext===h)return $.__reactInternalMemoizedMaskedChildContext;var A={},N;for(N in g)A[N]=h[N];return $&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=h,w.__reactInternalMemoizedMaskedChildContext=A),A}function hi(w){return w=w.childContextTypes,w!=null}function fs(){Ir(_r),Ir(Ur)}function Qa(w,h,g){if(Ur.current!==Mr)throw Error(o(168));Cn(Ur,h),Cn(_r,g)}function ka(w,h,g){var $=w.stateNode;if(h=h.childContextTypes,typeof $.getChildContext!="function")return g;$=$.getChildContext();for(var A in $)if(!(A in h))throw Error(o(108,j(w)||"Unknown",A));return s({},g,$)}function lc(w){return w=(w=w.stateNode)&&w.__reactInternalMemoizedMergedChildContext||Mr,Di=Ur.current,Cn(Ur,w),Cn(_r,_r.current),!0}function uc(w,h,g){var $=w.stateNode;if(!$)throw Error(o(169));g?(w=ka(w,h,Di),$.__reactInternalMemoizedMergedChildContext=w,Ir(_r),Ir(Ur),Cn(Ur,w)):Ir(_r),Cn(_r,g)}var js=Math.clz32?Math.clz32:pu,Yo=Math.log,Vl=Math.LN2;function pu(w){return w>>>=0,w===0?32:31-(Yo(w)/Vl|0)|0}var ch=64,Ko=4194304;function gr(w){switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return w&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return w}}function Ei(w,h){var g=w.pendingLanes;if(g===0)return 0;var $=0,A=w.suspendedLanes,N=w.pingedLanes,W=g&268435455;if(W!==0){var de=W&~A;de!==0?$=gr(de):(N&=W,N!==0&&($=gr(N)))}else W=g&~A,W!==0?$=gr(W):N!==0&&($=gr(N));if($===0)return 0;if(h!==0&&h!==$&&!(h&A)&&(A=$&-$,N=h&-h,A>=N||A===16&&(N&4194240)!==0))return h;if($&4&&($|=g&16),h=w.entangledLanes,h!==0)for(w=w.entanglements,h&=$;0<h;)g=31-js(h),A=1<<g,$|=w[g],h&=~A;return $}function Rc(w,h){switch(w){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hh(w,h){for(var g=w.suspendedLanes,$=w.pingedLanes,A=w.expirationTimes,N=w.pendingLanes;0<N;){var W=31-js(N),de=1<<W,ke=A[W];ke===-1?(!(de&g)||de&$)&&(A[W]=Rc(de,h)):ke<=h&&(w.expiredLanes|=de),N&=~de}}function kc(w){return w=w.pendingLanes&-1073741825,w!==0?w:w&1073741824?1073741824:0}function Tl(w){for(var h=[],g=0;31>g;g++)h.push(w);return h}function fu(w,h,g){w.pendingLanes|=h,h!==536870912&&(w.suspendedLanes=0,w.pingedLanes=0),w=w.eventTimes,h=31-js(h),w[h]=g}function Sl(w,h){var g=w.pendingLanes&~h;w.pendingLanes=h,w.suspendedLanes=0,w.pingedLanes=0,w.expiredLanes&=h,w.mutableReadLanes&=h,w.entangledLanes&=h,h=w.entanglements;var $=w.eventTimes;for(w=w.expirationTimes;0<g;){var A=31-js(g),N=1<<A;h[A]=0,$[A]=-1,w[A]=-1,g&=~N}}function El(w,h){var g=w.entangledLanes|=h;for(w=w.entanglements;g;){var $=31-js(g),A=1<<$;A&h|w[$]&h&&(w[$]|=h),g&=~A}}var yr=0;function vr(w){return w&=-w,1<w?4<w?w&268435455?16:536870912:4:1}var jl=i.unstable_scheduleCallback,Za=i.unstable_cancelCallback,el=i.unstable_shouldYield,mu=i.unstable_requestPaint,Ki=i.unstable_now,ms=i.unstable_ImmediatePriority,tl=i.unstable_UserBlockingPriority,Sd=i.unstable_NormalPriority,no=i.unstable_IdlePriority,Bu=null,aa=null;function gu(w){if(aa&&typeof aa.onCommitFiberRoot=="function")try{aa.onCommitFiberRoot(Bu,w,void 0,(w.current.flags&128)===128)}catch{}}function ir(w,h){return w===h&&(w!==0||1/w===1/h)||w!==w&&h!==h}var zn=typeof Object.is=="function"?Object.is:ir,Ss=null,ro=!1,Pu=!1;function _u(w){Ss===null?Ss=[w]:Ss.push(w)}function dh(w){ro=!0,_u(w)}function Oa(){if(!Pu&&Ss!==null){Pu=!0;var w=0,h=yr;try{var g=Ss;for(yr=1;w<g.length;w++){var $=g[w];do $=$(!0);while($!==null)}Ss=null,ro=!1}catch(A){throw Ss!==null&&(Ss=Ss.slice(w+1)),jl(ms,Oa),A}finally{yr=h,Pu=!1}}return null}var la=l.ReactCurrentBatchConfig;function Fu(w,h){if(zn(w,h))return!0;if(typeof w!="object"||w===null||typeof h!="object"||h===null)return!1;var g=Object.keys(w),$=Object.keys(h);if(g.length!==$.length)return!1;for($=0;$<g.length;$++){var A=g[$];if(!Ra.call(h,A)||!zn(w[A],h[A]))return!1}return!0}function Tr(w){switch(w.tag){case 5:return en(w.type);case 16:return en("Lazy");case 13:return en("Suspense");case 19:return en("SuspenseList");case 0:case 2:case 15:return w=qa(w.type,!1),w;case 11:return w=qa(w.type.render,!1),w;case 1:return w=qa(w.type,!0),w;default:return""}}function Is(w,h){if(w&&w.defaultProps){h=s({},h),w=w.defaultProps;for(var g in w)h[g]===void 0&&(h[g]=w[g]);return h}return h}var yi=Li(null),xi=null,ua=null,Qr=null;function yu(){Qr=ua=xi=null}function xo(w,h,g){pt?(Cn(yi,h._currentValue),h._currentValue=g):(Cn(yi,h._currentValue2),h._currentValue2=g)}function vu(w){var h=yi.current;Ir(yi),pt?w._currentValue=h:w._currentValue2=h}function nl(w,h,g){for(;w!==null;){var $=w.alternate;if((w.childLanes&h)!==h?(w.childLanes|=h,$!==null&&($.childLanes|=h)):$!==null&&($.childLanes&h)!==h&&($.childLanes|=h),w===g)break;w=w.return}}function Ni(w,h){xi=w,Qr=ua=null,w=w.dependencies,w!==null&&w.firstContext!==null&&(w.lanes&h&&(al=!0),w.firstContext=null)}function wi(w){var h=pt?w._currentValue:w._currentValue2;if(Qr!==w)if(w={context:w,memoizedValue:h,next:null},ua===null){if(xi===null)throw Error(o(308));ua=w,xi.dependencies={lanes:0,firstContext:w}}else ua=ua.next=w;return h}var Hn=null,$i=!1;function Xr(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ad(w,h){w=w.updateQueue,h.updateQueue===w&&(h.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,effects:w.effects})}function bu(w,h){return{eventTime:w,lane:h,tag:0,payload:null,callback:null,next:null}}function Gi(w,h){var g=w.updateQueue;g!==null&&(g=g.shared,Zn!==null&&w.mode&1&&!(Dn&2)?(w=g.interleaved,w===null?(h.next=h,Hn===null?Hn=[g]:Hn.push(g)):(h.next=w.next,w.next=h),g.interleaved=h):(w=g.pending,w===null?h.next=h:(h.next=w.next,w.next=h),g.pending=h))}function La(w,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194240)!==0)){var $=h.lanes;$&=w.pendingLanes,g|=$,h.lanes=g,El(w,g)}}function ph(w,h){var g=w.updateQueue,$=w.alternate;if($!==null&&($=$.updateQueue,g===$)){var A=null,N=null;if(g=g.firstBaseUpdate,g!==null){do{var W={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};N===null?A=N=W:N=N.next=W,g=g.next}while(g!==null);N===null?A=N=h:N=N.next=h}else A=N=h;g={baseState:$.baseState,firstBaseUpdate:A,lastBaseUpdate:N,shared:$.shared,effects:$.effects},w.updateQueue=g;return}w=g.lastBaseUpdate,w===null?g.firstBaseUpdate=h:w.next=h,g.lastBaseUpdate=h}function hr(w,h,g,$){var A=w.updateQueue;$i=!1;var N=A.firstBaseUpdate,W=A.lastBaseUpdate,de=A.shared.pending;if(de!==null){A.shared.pending=null;var ke=de,Qe=ke.next;ke.next=null,W===null?N=Qe:W.next=Qe,W=ke;var St=w.alternate;St!==null&&(St=St.updateQueue,de=St.lastBaseUpdate,de!==W&&(de===null?St.firstBaseUpdate=Qe:de.next=Qe,St.lastBaseUpdate=ke))}if(N!==null){var Jt=A.baseState;W=0,St=Qe=ke=null,de=N;do{var ln=de.lane,yn=de.eventTime;if(($&ln)===ln){St!==null&&(St=St.next={eventTime:yn,lane:0,tag:de.tag,payload:de.payload,callback:de.callback,next:null});e:{var vn=w,fn=de;switch(ln=h,yn=g,fn.tag){case 1:if(vn=fn.payload,typeof vn=="function"){Jt=vn.call(yn,Jt,ln);break e}Jt=vn;break e;case 3:vn.flags=vn.flags&-65537|128;case 0:if(vn=fn.payload,ln=typeof vn=="function"?vn.call(yn,Jt,ln):vn,ln==null)break e;Jt=s({},Jt,ln);break e;case 2:$i=!0}}de.callback!==null&&de.lane!==0&&(w.flags|=64,ln=A.effects,ln===null?A.effects=[de]:ln.push(de))}else yn={eventTime:yn,lane:ln,tag:de.tag,payload:de.payload,callback:de.callback,next:null},St===null?(Qe=St=yn,ke=Jt):St=St.next=yn,W|=ln;if(de=de.next,de===null){if(de=A.shared.pending,de===null)break;ln=de,de=ln.next,ln.next=null,A.lastBaseUpdate=ln,A.shared.pending=null}}while(!0);if(St===null&&(ke=Jt),A.baseState=ke,A.firstBaseUpdate=Qe,A.lastBaseUpdate=St,h=A.shared.interleaved,h!==null){A=h;do W|=A.lane,A=A.next;while(A!==h)}else N===null&&(A.shared.lanes=0);iu|=W,w.lanes=W,w.memoizedState=Jt}}function Jo(w,h,g){if(w=h.effects,h.effects=null,w!==null)for(h=0;h<w.length;h++){var $=w[h],A=$.callback;if(A!==null){if($.callback=null,$=g,typeof A!="function")throw Error(o(191,A));A.call($)}}}var ld=new t.Component().refs;function np(w,h,g,$){h=w.memoizedState,g=g($,h),g=g==null?h:s({},h,g),w.memoizedState=g,w.lanes===0&&(w.updateQueue.baseState=g)}var Oc={isMounted:function(w){return(w=w._reactInternals)?H(w)===w:!1},enqueueSetState:function(w,h,g){w=w._reactInternals;var $=Rr(),A=ys(w),N=bu($,A);N.payload=h,g!=null&&(N.callback=g),Gi(w,N),h=ks(w,A,$),h!==null&&La(h,w,A)},enqueueReplaceState:function(w,h,g){w=w._reactInternals;var $=Rr(),A=ys(w),N=bu($,A);N.tag=1,N.payload=h,g!=null&&(N.callback=g),Gi(w,N),h=ks(w,A,$),h!==null&&La(h,w,A)},enqueueForceUpdate:function(w,h){w=w._reactInternals;var g=Rr(),$=ys(w),A=bu(g,$);A.tag=2,h!=null&&(A.callback=h),Gi(w,A),h=ks(w,$,g),h!==null&&La(h,w,$)}};function rp(w,h,g,$,A,N,W){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate($,N,W):h.prototype&&h.prototype.isPureReactComponent?!Fu(g,$)||!Fu(A,N):!0}function kp(w,h,g){var $=!1,A=Mr,N=h.contextType;return typeof N=="object"&&N!==null?N=wi(N):(A=hi(h)?Di:Ur.current,$=h.contextTypes,N=($=$!=null)?Ts(w,A):Mr),h=new h(g,N),w.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Oc,w.stateNode=h,h._reactInternals=w,$&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=A,w.__reactInternalMemoizedMaskedChildContext=N),h}function mf(w,h,g,$){w=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,$),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,$),h.state!==w&&Oc.enqueueReplaceState(h,h.state,null)}function Ed(w,h,g,$){var A=w.stateNode;A.props=g,A.state=w.memoizedState,A.refs=ld,Xr(w);var N=h.contextType;typeof N=="object"&&N!==null?A.context=wi(N):(N=hi(h)?Di:Ur.current,A.context=Ts(w,N)),A.state=w.memoizedState,N=h.getDerivedStateFromProps,typeof N=="function"&&(np(w,h,N,g),A.state=w.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(h=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),h!==A.state&&Oc.enqueueReplaceState(A,A.state,null),hr(w,g,A,$),A.state=w.memoizedState),typeof A.componentDidMount=="function"&&(w.flags|=4194308)}var Xl=[],Rs=0,zu=null,fh=0,Da=[],li=0,Sr=null,io=1,Na="";function Po(w,h){Xl[Rs++]=fh,Xl[Rs++]=zu,zu=w,fh=h}function Yl(w,h,g){Da[li++]=io,Da[li++]=Na,Da[li++]=Sr,Sr=w;var $=io;w=Na;var A=32-js($)-1;$&=~(1<<A),g+=1;var N=32-js(h)+A;if(30<N){var W=A-A%5;N=($&(1<<W)-1).toString(32),$>>=W,A-=W,io=1<<32-js(h)+A|g<<A|$,Na=N+w}else io=1<<N|g<<A|$,Na=w}function Kl(w){w.return!==null&&(Po(w,1),Yl(w,1,0))}function Lh(w){for(;w===zu;)zu=Xl[--Rs],Xl[Rs]=null,fh=Xl[--Rs],Xl[Rs]=null;for(;w===Sr;)Sr=Da[--li],Da[li]=null,Na=Da[--li],Da[li]=null,io=Da[--li],Da[li]=null}var Hr=null,Ci=null,br=!1,Wi=!1,ca=null;function Tu(w,h){var g=Go(5,null,null,0);g.elementType="DELETED",g.stateNode=h,g.return=w,h=w.deletions,h===null?(w.deletions=[g],w.flags|=16):h.push(g)}function ip(w,h){switch(w.tag){case 5:return h=Te(h,w.type,w.pendingProps),h!==null?(w.stateNode=h,Hr=w,Ci=gt(h),!0):!1;case 6:return h=Ge(h,w.pendingProps),h!==null?(w.stateNode=h,Hr=w,Ci=null,!0):!1;case 13:if(h=ot(h),h!==null){var g=Sr!==null?{id:io,overflow:Na}:null;return w.memoizedState={dehydrated:h,treeContext:g,retryLane:1073741824},g=Go(18,null,null,0),g.stateNode=h,g.return=w,w.child=g,Hr=w,Ci=null,!0}return!1;default:return!1}}function sp(w){return(w.mode&1)!==0&&(w.flags&128)===0}function ud(w){if(br){var h=Ci;if(h){var g=h;if(!ip(w,h)){if(sp(w))throw Error(o(418));h=De(g);var $=Hr;h&&ip(w,h)?Tu($,g):(w.flags=w.flags&-4097|2,br=!1,Hr=w)}}else{if(sp(w))throw Error(o(418));w.flags=w.flags&-4097|2,br=!1,Hr=w}}}function Uu(w){for(w=w.return;w!==null&&w.tag!==5&&w.tag!==3&&w.tag!==13;)w=w.return;Hr=w}function rl(w){if(!Ae||w!==Hr)return!1;if(!br)return Uu(w),br=!0,!1;if(w.tag!==3&&(w.tag!==5||bs(w.type)&&!Re(w.type,w.memoizedProps))){var h=Ci;if(h){if(sp(w)){for(w=Ci;w;)w=De(w);throw Error(o(418))}for(;h;)Tu(w,h),h=De(h)}}if(Uu(w),w.tag===13){if(!Ae)throw Error(o(316));if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(o(317));Ci=mr(w)}else Ci=Hr?De(w.stateNode):null;return!0}function Lc(){Ae&&(Ci=Hr=null,Wi=br=!1)}function Dh(w){ca===null?ca=[w]:ca.push(w)}function Hu(w,h,g){if(w=g.ref,w!==null&&typeof w!="function"&&typeof w!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(o(309));var $=g.stateNode}if(!$)throw Error(o(147,w));var A=$,N=""+w;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===N?h.ref:(h=function(W){var de=A.refs;de===ld&&(de=A.refs={}),W===null?delete de[N]:de[N]=W},h._stringRef=N,h)}if(typeof w!="string")throw Error(o(284));if(!g._owner)throw Error(o(290,w))}return w}function Jl(w,h){throw w=Object.prototype.toString.call(h),Error(o(31,w==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":w))}function Fs(w){var h=w._init;return h(w._payload)}function ql(w){function h(bt,Ce){if(w){var Le=bt.deletions;Le===null?(bt.deletions=[Ce],bt.flags|=16):Le.push(Ce)}}function g(bt,Ce){if(!w)return null;for(;Ce!==null;)h(bt,Ce),Ce=Ce.sibling;return null}function $(bt,Ce){for(bt=new Map;Ce!==null;)Ce.key!==null?bt.set(Ce.key,Ce):bt.set(Ce.index,Ce),Ce=Ce.sibling;return bt}function A(bt,Ce){return bt=Ol(bt,Ce),bt.index=0,bt.sibling=null,bt}function N(bt,Ce,Le){return bt.index=Le,w?(Le=bt.alternate,Le!==null?(Le=Le.index,Le<Ce?(bt.flags|=2,Ce):Le):(bt.flags|=2,Ce)):(bt.flags|=1048576,Ce)}function W(bt){return w&&bt.alternate===null&&(bt.flags|=2),bt}function de(bt,Ce,Le,rt){return Ce===null||Ce.tag!==6?(Ce=ou(Le,bt.mode,rt),Ce.return=bt,Ce):(Ce=A(Ce,Le),Ce.return=bt,Ce)}function ke(bt,Ce,Le,rt){var Ut=Le.type;return Ut===p?St(bt,Ce,Le.props.children,rt,Le.key):Ce!==null&&(Ce.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===O&&Fs(Ut)===Ce.type)?(rt=A(Ce,Le.props),rt.ref=Hu(bt,Ce,Le),rt.return=bt,rt):(rt=go(Le.type,Le.key,Le.props,null,bt.mode,rt),rt.ref=Hu(bt,Ce,Le),rt.return=bt,rt)}function Qe(bt,Ce,Le,rt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Le.containerInfo||Ce.stateNode.implementation!==Le.implementation?(Ce=ti(Le,bt.mode,rt),Ce.return=bt,Ce):(Ce=A(Ce,Le.children||[]),Ce.return=bt,Ce)}function St(bt,Ce,Le,rt,Ut){return Ce===null||Ce.tag!==7?(Ce=Ll(Le,bt.mode,rt,Ut),Ce.return=bt,Ce):(Ce=A(Ce,Le),Ce.return=bt,Ce)}function Jt(bt,Ce,Le){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=ou(""+Ce,bt.mode,Le),Ce.return=bt,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case u:return Le=go(Ce.type,Ce.key,Ce.props,null,bt.mode,Le),Le.ref=Hu(bt,null,Ce),Le.return=bt,Le;case d:return Ce=ti(Ce,bt.mode,Le),Ce.return=bt,Ce;case O:var rt=Ce._init;return Jt(bt,rt(Ce._payload),Le)}if(le(Ce)||z(Ce))return Ce=Ll(Ce,bt.mode,Le,null),Ce.return=bt,Ce;Jl(bt,Ce)}return null}function ln(bt,Ce,Le,rt){var Ut=Ce!==null?Ce.key:null;if(typeof Le=="string"&&Le!==""||typeof Le=="number")return Ut!==null?null:de(bt,Ce,""+Le,rt);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case u:return Le.key===Ut?ke(bt,Ce,Le,rt):null;case d:return Le.key===Ut?Qe(bt,Ce,Le,rt):null;case O:return Ut=Le._init,ln(bt,Ce,Ut(Le._payload),rt)}if(le(Le)||z(Le))return Ut!==null?null:St(bt,Ce,Le,rt,null);Jl(bt,Le)}return null}function yn(bt,Ce,Le,rt,Ut){if(typeof rt=="string"&&rt!==""||typeof rt=="number")return bt=bt.get(Le)||null,de(Ce,bt,""+rt,Ut);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case u:return bt=bt.get(rt.key===null?Le:rt.key)||null,ke(Ce,bt,rt,Ut);case d:return bt=bt.get(rt.key===null?Le:rt.key)||null,Qe(Ce,bt,rt,Ut);case O:var rn=rt._init;return yn(bt,Ce,Le,rn(rt._payload),Ut)}if(le(rt)||z(rt))return bt=bt.get(Le)||null,St(Ce,bt,rt,Ut,null);Jl(Ce,rt)}return null}function vn(bt,Ce,Le,rt){for(var Ut=null,rn=null,Sn=Ce,An=Ce=0,Bn=null;Sn!==null&&An<Le.length;An++){Sn.index>An?(Bn=Sn,Sn=null):Bn=Sn.sibling;var cr=ln(bt,Sn,Le[An],rt);if(cr===null){Sn===null&&(Sn=Bn);break}w&&Sn&&cr.alternate===null&&h(bt,Sn),Ce=N(cr,Ce,An),rn===null?Ut=cr:rn.sibling=cr,rn=cr,Sn=Bn}if(An===Le.length)return g(bt,Sn),br&&Po(bt,An),Ut;if(Sn===null){for(;An<Le.length;An++)Sn=Jt(bt,Le[An],rt),Sn!==null&&(Ce=N(Sn,Ce,An),rn===null?Ut=Sn:rn.sibling=Sn,rn=Sn);return br&&Po(bt,An),Ut}for(Sn=$(bt,Sn);An<Le.length;An++)Bn=yn(Sn,bt,An,Le[An],rt),Bn!==null&&(w&&Bn.alternate!==null&&Sn.delete(Bn.key===null?An:Bn.key),Ce=N(Bn,Ce,An),rn===null?Ut=Bn:rn.sibling=Bn,rn=Bn);return w&&Sn.forEach(function(Cr){return h(bt,Cr)}),br&&Po(bt,An),Ut}function fn(bt,Ce,Le,rt){var Ut=z(Le);if(typeof Ut!="function")throw Error(o(150));if(Le=Ut.call(Le),Le==null)throw Error(o(151));for(var rn=Ut=null,Sn=Ce,An=Ce=0,Bn=null,cr=Le.next();Sn!==null&&!cr.done;An++,cr=Le.next()){Sn.index>An?(Bn=Sn,Sn=null):Bn=Sn.sibling;var Cr=ln(bt,Sn,cr.value,rt);if(Cr===null){Sn===null&&(Sn=Bn);break}w&&Sn&&Cr.alternate===null&&h(bt,Sn),Ce=N(Cr,Ce,An),rn===null?Ut=Cr:rn.sibling=Cr,rn=Cr,Sn=Bn}if(cr.done)return g(bt,Sn),br&&Po(bt,An),Ut;if(Sn===null){for(;!cr.done;An++,cr=Le.next())cr=Jt(bt,cr.value,rt),cr!==null&&(Ce=N(cr,Ce,An),rn===null?Ut=cr:rn.sibling=cr,rn=cr);return br&&Po(bt,An),Ut}for(Sn=$(bt,Sn);!cr.done;An++,cr=Le.next())cr=yn(Sn,bt,An,cr.value,rt),cr!==null&&(w&&cr.alternate!==null&&Sn.delete(cr.key===null?An:cr.key),Ce=N(cr,Ce,An),rn===null?Ut=cr:rn.sibling=cr,rn=cr);return w&&Sn.forEach(function(Dl){return h(bt,Dl)}),br&&Po(bt,An),Ut}function Lr(bt,Ce,Le,rt){if(typeof Le=="object"&&Le!==null&&Le.type===p&&Le.key===null&&(Le=Le.props.children),typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case u:e:{for(var Ut=Le.key,rn=Ce;rn!==null;){if(rn.key===Ut){if(Ut=Le.type,Ut===p){if(rn.tag===7){g(bt,rn.sibling),Ce=A(rn,Le.props.children),Ce.return=bt,bt=Ce;break e}}else if(rn.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===O&&Fs(Ut)===rn.type){g(bt,rn.sibling),Ce=A(rn,Le.props),Ce.ref=Hu(bt,rn,Le),Ce.return=bt,bt=Ce;break e}g(bt,rn);break}else h(bt,rn);rn=rn.sibling}Le.type===p?(Ce=Ll(Le.props.children,bt.mode,rt,Le.key),Ce.return=bt,bt=Ce):(rt=go(Le.type,Le.key,Le.props,null,bt.mode,rt),rt.ref=Hu(bt,Ce,Le),rt.return=bt,bt=rt)}return W(bt);case d:e:{for(rn=Le.key;Ce!==null;){if(Ce.key===rn)if(Ce.tag===4&&Ce.stateNode.containerInfo===Le.containerInfo&&Ce.stateNode.implementation===Le.implementation){g(bt,Ce.sibling),Ce=A(Ce,Le.children||[]),Ce.return=bt,bt=Ce;break e}else{g(bt,Ce);break}else h(bt,Ce);Ce=Ce.sibling}Ce=ti(Le,bt.mode,rt),Ce.return=bt,bt=Ce}return W(bt);case O:return rn=Le._init,Lr(bt,Ce,rn(Le._payload),rt)}if(le(Le))return vn(bt,Ce,Le,rt);if(z(Le))return fn(bt,Ce,Le,rt);Jl(bt,Le)}return typeof Le=="string"&&Le!==""||typeof Le=="number"?(Le=""+Le,Ce!==null&&Ce.tag===6?(g(bt,Ce.sibling),Ce=A(Ce,Le),Ce.return=bt,bt=Ce):(g(bt,Ce),Ce=ou(Le,bt.mode,rt),Ce.return=bt,bt=Ce),W(bt)):g(bt,Ce)}return Lr}var Nh=ql(!0),Dc=ql(!1),Nc={},ns=Li(Nc),Br=Li(Nc),xl=Li(Nc);function Ba(w){if(w===Nc)throw Error(o(174));return w}function Ql(w,h){Cn(xl,h),Cn(Br,w),Cn(ns,Nc),w=be(h),Ir(ns),Cn(ns,w)}function Su(){Ir(ns),Ir(Br),Ir(xl)}function mh(w){var h=Ba(xl.current),g=Ba(ns.current);h=$e(g,w.type,h),g!==h&&(Cn(Br,w),Cn(ns,h))}function xd(w){Br.current===w&&(Ir(ns),Ir(Br))}var di=Li(0);function ye(w){for(var h=w;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||Ft(g)||nn(g)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===w)break;for(;h.sibling===null;){if(h.return===null||h.return===w)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Ve=[];function Be(){for(var w=0;w<Ve.length;w++){var h=Ve[w];pt?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}Ve.length=0}var kt=l.ReactCurrentDispatcher,tn=l.ReactCurrentBatchConfig,Mn=0,Xn=null,gn=null,Pr=null,so=!1,vi=!1,oo=0,il=0;function Bi(){throw Error(o(321))}function gs(w,h){if(h===null)return!1;for(var g=0;g<h.length&&g<w.length;g++)if(!zn(w[g],h[g]))return!1;return!0}function Eu(w,h,g,$,A,N){if(Mn=N,Xn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,kt.current=w===null||w.memoizedState===null?Vu:ju,w=g($,A),vi){N=0;do{if(vi=!1,oo=0,25<=N)throw Error(o(301));N+=1,Pr=gn=null,h.updateQueue=null,kt.current=_h,w=g($,A)}while(vi)}if(kt.current=eu,h=gn!==null&&gn.next!==null,Mn=0,Pr=gn=Xn=null,so=!1,h)throw Error(o(300));return w}function Yn(){var w=oo!==0;return oo=0,w}function ha(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?Xn.memoizedState=Pr=w:Pr=Pr.next=w,Pr}function Xs(){if(gn===null){var w=Xn.alternate;w=w!==null?w.memoizedState:null}else w=gn.next;var h=Pr===null?Xn.memoizedState:Pr.next;if(h!==null)Pr=h,gn=w;else{if(w===null)throw Error(o(310));gn=w,w={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},Pr===null?Xn.memoizedState=Pr=w:Pr=Pr.next=w}return Pr}function zs(w,h){return typeof h=="function"?h(w):h}function Pa(w){var h=Xs(),g=h.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=w;var $=gn,A=$.baseQueue,N=g.pending;if(N!==null){if(A!==null){var W=A.next;A.next=N.next,N.next=W}$.baseQueue=A=N,g.pending=null}if(A!==null){N=A.next,$=$.baseState;var de=W=null,ke=null,Qe=N;do{var St=Qe.lane;if((Mn&St)===St)ke!==null&&(ke=ke.next={lane:0,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null}),$=Qe.hasEagerState?Qe.eagerState:w($,Qe.action);else{var Jt={lane:St,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null};ke===null?(de=ke=Jt,W=$):ke=ke.next=Jt,Xn.lanes|=St,iu|=St}Qe=Qe.next}while(Qe!==null&&Qe!==N);ke===null?W=$:ke.next=de,zn($,h.memoizedState)||(al=!0),h.memoizedState=$,h.baseState=W,h.baseQueue=ke,g.lastRenderedState=$}if(w=g.interleaved,w!==null){A=w;do N=A.lane,Xn.lanes|=N,iu|=N,A=A.next;while(A!==w)}else A===null&&(g.lanes=0);return[h.memoizedState,g.dispatch]}function Bh(w){var h=Xs(),g=h.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=w;var $=g.dispatch,A=g.pending,N=h.memoizedState;if(A!==null){g.pending=null;var W=A=A.next;do N=w(N,W.action),W=W.next;while(W!==A);zn(N,h.memoizedState)||(al=!0),h.memoizedState=N,h.baseQueue===null&&(h.baseState=N),g.lastRenderedState=N}return[N,$]}function gh(){}function cc(w,h){var g=Xn,$=Xs(),A=h(),N=!zn($.memoizedState,A);if(N&&($.memoizedState=A,al=!0),$=$.queue,wl(Ph.bind(null,g,$,w),[w]),$.getSnapshot!==h||N||Pr!==null&&Pr.memoizedState.tag&1){if(g.flags|=2048,hc(9,Bc.bind(null,g,$,A,h),void 0,null),Zn===null)throw Error(o(349));Mn&30||qo(g,h,A)}return A}function qo(w,h,g){w.flags|=16384,w={getSnapshot:h,value:g},h=Xn.updateQueue,h===null?(h={lastEffect:null,stores:null},Xn.updateQueue=h,h.stores=[w]):(g=h.stores,g===null?h.stores=[w]:g.push(w))}function Bc(w,h,g,$){h.value=g,h.getSnapshot=$,Fa(h)&&ks(w,1,-1)}function Ph(w,h,g){return g(function(){Fa(h)&&ks(w,1,-1)})}function Fa(w){var h=w.getSnapshot;w=w.value;try{var g=h();return!zn(w,g)}catch{return!0}}function Fh(w){var h=ha();return typeof w=="function"&&(w=w()),h.memoizedState=h.baseState=w,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:w},h.queue=w,w=w.dispatch=Zr.bind(null,Xn,w),[h.memoizedState,w]}function hc(w,h,g,$){return w={tag:w,create:h,destroy:g,deps:$,next:null},h=Xn.updateQueue,h===null?(h={lastEffect:null,stores:null},Xn.updateQueue=h,h.lastEffect=w.next=w):(g=h.lastEffect,g===null?h.lastEffect=w.next=w:($=g.next,g.next=w,w.next=$,h.lastEffect=w)),w}function Gu(){return Xs().memoizedState}function cd(w,h,g,$){var A=ha();Xn.flags|=w,A.memoizedState=hc(1|h,g,void 0,$===void 0?null:$)}function Qo(w,h,g,$){var A=Xs();$=$===void 0?null:$;var N=void 0;if(gn!==null){var W=gn.memoizedState;if(N=W.destroy,$!==null&&gs($,W.deps)){A.memoizedState=hc(h,g,N,$);return}}Xn.flags|=w,A.memoizedState=hc(1|h,g,N,$)}function ao(w,h){return cd(8390656,8,w,h)}function wl(w,h){return Qo(2048,8,w,h)}function zh(w,h){return Qo(4,2,w,h)}function Pi(w,h){return Qo(4,4,w,h)}function hd(w,h){if(typeof h=="function")return w=w(),h(w),function(){h(null)};if(h!=null)return w=w(),h.current=w,function(){h.current=null}}function Wu(w,h,g){return g=g!=null?g.concat([w]):null,Qo(4,4,hd.bind(null,h,w),g)}function Zl(){}function Pc(w,h){var g=Xs();h=h===void 0?null:h;var $=g.memoizedState;return $!==null&&h!==null&&gs(h,$[1])?$[0]:(g.memoizedState=[w,h],w)}function wd(w,h){var g=Xs();h=h===void 0?null:h;var $=g.memoizedState;return $!==null&&h!==null&&gs(h,$[1])?$[0]:(w=w(),g.memoizedState=[w,h],w)}function $l(w,h){var g=yr;yr=g!==0&&4>g?g:4,w(!0);var $=tn.transition;tn.transition={};try{w(!1),h()}finally{yr=g,tn.transition=$}}function $d(){return Xs().memoizedState}function Uh(w,h,g){var $=ys(w);g={lane:$,action:g,hasEagerState:!1,eagerState:null,next:null},Mi(w)?gf(h,g):(Op(w,h,g),g=Rr(),w=ks(w,$,g),w!==null&&Cl(w,h,$))}function Zr(w,h,g){var $=ys(w),A={lane:$,action:g,hasEagerState:!1,eagerState:null,next:null};if(Mi(w))gf(h,A);else{Op(w,h,A);var N=w.alternate;if(w.lanes===0&&(N===null||N.lanes===0)&&(N=h.lastRenderedReducer,N!==null))try{var W=h.lastRenderedState,de=N(W,g);if(A.hasEagerState=!0,A.eagerState=de,zn(de,W))return}catch{}finally{}g=Rr(),w=ks(w,$,g),w!==null&&Cl(w,h,$)}}function Mi(w){var h=w.alternate;return w===Xn||h!==null&&h===Xn}function gf(w,h){vi=so=!0;var g=w.pending;g===null?h.next=h:(h.next=g.next,g.next=h),w.pending=h}function Op(w,h,g){Zn!==null&&w.mode&1&&!(Dn&2)?(w=h.interleaved,w===null?(g.next=g,Hn===null?Hn=[h]:Hn.push(h)):(g.next=w.next,w.next=g),h.interleaved=g):(w=h.pending,w===null?g.next=g:(g.next=w.next,w.next=g),h.pending=g)}function Cl(w,h,g){if(g&4194240){var $=h.lanes;$&=w.pendingLanes,g|=$,h.lanes=g,El(w,g)}}var eu={readContext:wi,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useInsertionEffect:Bi,useLayoutEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi,useDeferredValue:Bi,useTransition:Bi,useMutableSource:Bi,useSyncExternalStore:Bi,useId:Bi,unstable_isNewReconciler:!1},Vu={readContext:wi,useCallback:function(w,h){return ha().memoizedState=[w,h===void 0?null:h],w},useContext:wi,useEffect:ao,useImperativeHandle:function(w,h,g){return g=g!=null?g.concat([w]):null,cd(4194308,4,hd.bind(null,h,w),g)},useLayoutEffect:function(w,h){return cd(4194308,4,w,h)},useInsertionEffect:function(w,h){return cd(4,2,w,h)},useMemo:function(w,h){var g=ha();return h=h===void 0?null:h,w=w(),g.memoizedState=[w,h],w},useReducer:function(w,h,g){var $=ha();return h=g!==void 0?g(h):h,$.memoizedState=$.baseState=h,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:h},$.queue=w,w=w.dispatch=Uh.bind(null,Xn,w),[$.memoizedState,w]},useRef:function(w){var h=ha();return w={current:w},h.memoizedState=w},useState:Fh,useDebugValue:Zl,useDeferredValue:function(w){var h=Fh(w),g=h[0],$=h[1];return ao(function(){var A=tn.transition;tn.transition={};try{$(w)}finally{tn.transition=A}},[w]),g},useTransition:function(){var w=Fh(!1),h=w[0];return w=$l.bind(null,w[1]),ha().memoizedState=w,[h,w]},useMutableSource:function(){},useSyncExternalStore:function(w,h,g){var $=Xn,A=ha();if(br){if(g===void 0)throw Error(o(407));g=g()}else{if(g=h(),Zn===null)throw Error(o(349));Mn&30||qo($,h,g)}A.memoizedState=g;var N={value:g,getSnapshot:h};return A.queue=N,ao(Ph.bind(null,$,N,w),[w]),$.flags|=2048,hc(9,Bc.bind(null,$,N,g,h),void 0,null),g},useId:function(){var w=ha(),h=Zn.identifierPrefix;if(br){var g=Na,$=io;g=($&~(1<<32-js($)-1)).toString(32)+g,h=":"+h+"R"+g,g=oo++,0<g&&(h+="H"+g.toString(32)),h+=":"}else g=il++,h=":"+h+"r"+g.toString(32)+":";return w.memoizedState=h},unstable_isNewReconciler:!1},ju={readContext:wi,useCallback:Pc,useContext:wi,useEffect:wl,useImperativeHandle:Wu,useInsertionEffect:zh,useLayoutEffect:Pi,useMemo:wd,useReducer:Pa,useRef:Gu,useState:function(){return Pa(zs)},useDebugValue:Zl,useDeferredValue:function(w){var h=Pa(zs),g=h[0],$=h[1];return wl(function(){var A=tn.transition;tn.transition={};try{$(w)}finally{tn.transition=A}},[w]),g},useTransition:function(){var w=Pa(zs)[0],h=Xs().memoizedState;return[w,h]},useMutableSource:gh,useSyncExternalStore:cc,useId:$d,unstable_isNewReconciler:!1},_h={readContext:wi,useCallback:Pc,useContext:wi,useEffect:wl,useImperativeHandle:Wu,useInsertionEffect:zh,useLayoutEffect:Pi,useMemo:wd,useReducer:Bh,useRef:Gu,useState:function(){return Bh(zs)},useDebugValue:Zl,useDeferredValue:function(w){var h=Bh(zs),g=h[0],$=h[1];return wl(function(){var A=tn.transition;tn.transition={};try{$(w)}finally{tn.transition=A}},[w]),g},useTransition:function(){var w=Bh(zs)[0],h=Xs().memoizedState;return[w,h]},useMutableSource:gh,useSyncExternalStore:cc,useId:$d,unstable_isNewReconciler:!1};function sl(w,h){try{var g="",$=h;do g+=Tr($),$=$.return;while($);var A=g}catch(N){A=`
Error generating stack: `+N.message+`
`+N.stack}return{value:w,source:h,stack:A}}function Zo(w,h){try{console.error(h.value)}catch(g){setTimeout(function(){throw g})}}var Ml=typeof WeakMap=="function"?WeakMap:Map;function Fc(w,h,g){g=bu(-1,g),g.tag=3,g.payload={element:null};var $=h.value;return g.callback=function(){wu||(wu=!0,$u=$),Zo(w,h)},g}function Al(w,h,g){g=bu(-1,g),g.tag=3;var $=w.type.getDerivedStateFromError;if(typeof $=="function"){var A=h.value;g.payload=function(){return $(A)},g.callback=function(){Zo(w,h)}}var N=w.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(g.callback=function(){Zo(w,h),typeof $!="function"&&(co===null?co=new Set([this]):co.add(this));var W=h.stack;this.componentDidCatch(h.value,{componentStack:W!==null?W:""})}),g}function zc(w,h,g){var $=w.pingCache;if($===null){$=w.pingCache=new Ml;var A=new Set;$.set(h,A)}else A=$.get(h),A===void 0&&(A=new Set,$.set(h,A));A.has(g)||(A.add(g),w=Js.bind(null,w,h,g),h.then(w,w))}function dc(w){do{var h;if((h=w.tag===13)&&(h=w.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return w;w=w.return}while(w!==null);return null}function Cd(w,h,g,$,A){return w.mode&1?(w.flags|=65536,w.lanes=A,w):(w===h?w.flags|=65536:(w.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(h=bu(-1,1),h.tag=2,Gi(g,h))),g.lanes|=1),w)}function za(w){w.flags|=4}function Gr(w,h){if(w!==null&&w.child===h.child)return!0;if(h.flags&16)return!1;for(w=h.child;w!==null;){if(w.flags&12854||w.subtreeFlags&12854)return!1;w=w.sibling}return!0}var ol,Ji,da,Y;if(dt)ol=function(w,h){for(var g=h.child;g!==null;){if(g.tag===5||g.tag===6)pe(w,g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Ji=function(){},da=function(w,h,g,$,A){if(w=w.memoizedProps,w!==$){var N=h.stateNode,W=Ba(ns.current);g=Fe(N,g,w,$,A,W),(h.updateQueue=g)&&za(h)}},Y=function(w,h,g,$){g!==$&&za(h)};else if(Ue){ol=function(w,h,g,$){for(var A=h.child;A!==null;){if(A.tag===5){var N=A.stateNode;g&&$&&(N=fr(N,A.type,A.memoizedProps,A)),pe(w,N)}else if(A.tag===6)N=A.stateNode,g&&$&&(N=re(N,A.memoizedProps,A)),pe(w,N);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)N=A.child,N!==null&&(N.return=A),ol(w,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===h)break;for(;A.sibling===null;){if(A.return===null||A.return===h)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};var Es=function(w,h,g,$){for(var A=h.child;A!==null;){if(A.tag===5){var N=A.stateNode;g&&$&&(N=fr(N,A.type,A.memoizedProps,A)),Dr(w,N)}else if(A.tag===6)N=A.stateNode,g&&$&&(N=re(N,A.memoizedProps,A)),Dr(w,N);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)N=A.child,N!==null&&(N.return=A),Es(w,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===h)break;for(;A.sibling===null;){if(A.return===null||A.return===h)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};Ji=function(w,h){var g=h.stateNode;if(!Gr(w,h)){w=g.containerInfo;var $=ii(w);Es($,h,!1,!1),g.pendingChildren=$,za(h),Si(w,$)}},da=function(w,h,g,$,A){var N=w.stateNode,W=w.memoizedProps;if((w=Gr(w,h))&&W===$)h.stateNode=N;else{var de=h.stateNode,ke=Ba(ns.current),Qe=null;W!==$&&(Qe=Fe(de,g,W,$,A,ke)),w&&Qe===null?h.stateNode=N:(N=Rn(N,Qe,g,W,$,h,w,de),Se(N,g,$,A,ke)&&za(h),h.stateNode=N,w?za(h):ol(N,h,!1,!1))}},Y=function(w,h,g,$){g!==$?(w=Ba(xl.current),g=Ba(ns.current),h.stateNode=qe($,w,g,h),za(h)):h.stateNode=w.stateNode}}else Ji=function(){},da=function(){},Y=function(){};function pa(w,h){if(!br)switch(w.tailMode){case"hidden":h=w.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?w.tail=null:g.sibling=null;break;case"collapsed":g=w.tail;for(var $=null;g!==null;)g.alternate!==null&&($=g),g=g.sibling;$===null?h||w.tail===null?w.tail=null:w.tail.sibling=null:$.sibling=null}}function $r(w){var h=w.alternate!==null&&w.alternate.child===w.child,g=0,$=0;if(h)for(var A=w.child;A!==null;)g|=A.lanes|A.childLanes,$|=A.subtreeFlags&14680064,$|=A.flags&14680064,A.return=w,A=A.sibling;else for(A=w.child;A!==null;)g|=A.lanes|A.childLanes,$|=A.subtreeFlags,$|=A.flags,A.return=w,A=A.sibling;return w.subtreeFlags|=$,w.childLanes=g,h}function pn(w,h,g){var $=h.pendingProps;switch(Lh(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $r(h),null;case 1:return hi(h.type)&&fs(),$r(h),null;case 3:return $=h.stateNode,Su(),Ir(_r),Ir(Ur),Be(),$.pendingContext&&($.context=$.pendingContext,$.pendingContext=null),(w===null||w.child===null)&&(rl(h)?za(h):w===null||w.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,ca!==null&&(Tn(ca),ca=null))),Ji(w,h),$r(h),null;case 5:xd(h),g=Ba(xl.current);var A=h.type;if(w!==null&&h.stateNode!=null)da(w,h,A,$,g),w.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!$){if(h.stateNode===null)throw Error(o(166));return $r(h),null}if(w=Ba(ns.current),rl(h)){if(!Ae)throw Error(o(175));w=Wt(h.stateNode,h.type,h.memoizedProps,g,w,h,!Wi),h.updateQueue=w,w!==null&&za(h)}else{var N=se(A,$,g,w,h);ol(N,h,!1,!1),h.stateNode=N,Se(N,A,$,g,w)&&za(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return $r(h),null;case 6:if(w&&h.stateNode!=null)Y(w,h,w.memoizedProps,$);else{if(typeof $!="string"&&h.stateNode===null)throw Error(o(166));if(w=Ba(xl.current),g=Ba(ns.current),rl(h)){if(!Ae)throw Error(o(176));if(w=h.stateNode,$=h.memoizedProps,(g=Un(w,$,h,!Wi))&&(A=Hr,A!==null))switch(N=(A.mode&1)!==0,A.tag){case 3:Ia(A.stateNode.containerInfo,w,$,N);break;case 5:Eo(A.type,A.memoizedProps,A.stateNode,w,$,N)}g&&za(h)}else h.stateNode=qe($,w,g,h)}return $r(h),null;case 13:if(Ir(di),$=h.memoizedState,br&&Ci!==null&&(h.mode&1)!==0&&(h.flags&128)===0){for(w=Ci;w;)w=De(w);return Lc(),h.flags|=98560,h}if($!==null&&$.dehydrated!==null){if($=rl(h),w===null){if(!$)throw Error(o(318));if(!Ae)throw Error(o(344));if(w=h.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(o(317));tr(w,h)}else Lc(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return $r(h),null}return ca!==null&&(Tn(ca),ca=null),h.flags&128?(h.lanes=g,h):($=$!==null,g=!1,w===null?rl(h):g=w.memoizedState!==null,$&&!g&&(h.child.flags|=8192,h.mode&1&&(w===null||di.current&1?as===0&&(as=3):Vh())),h.updateQueue!==null&&(h.flags|=4),$r(h),null);case 4:return Su(),Ji(w,h),w===null&&nt(h.stateNode.containerInfo),$r(h),null;case 10:return vu(h.type._context),$r(h),null;case 17:return hi(h.type)&&fs(),$r(h),null;case 19:if(Ir(di),A=h.memoizedState,A===null)return $r(h),null;if($=(h.flags&128)!==0,N=A.rendering,N===null)if($)pa(A,!1);else{if(as!==0||w!==null&&w.flags&128)for(w=h.child;w!==null;){if(N=ye(w),N!==null){for(h.flags|=128,pa(A,!1),w=N.updateQueue,w!==null&&(h.updateQueue=w,h.flags|=4),h.subtreeFlags=0,w=g,$=h.child;$!==null;)g=$,A=w,g.flags&=14680066,N=g.alternate,N===null?(g.childLanes=0,g.lanes=A,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=N.childLanes,g.lanes=N.lanes,g.child=N.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=N.memoizedProps,g.memoizedState=N.memoizedState,g.updateQueue=N.updateQueue,g.type=N.type,A=N.dependencies,g.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext}),$=$.sibling;return Cn(di,di.current&1|2),h.child}w=w.sibling}A.tail!==null&&Ki()>pd&&(h.flags|=128,$=!0,pa(A,!1),h.lanes=4194304)}else{if(!$)if(w=ye(N),w!==null){if(h.flags|=128,$=!0,w=w.updateQueue,w!==null&&(h.updateQueue=w,h.flags|=4),pa(A,!0),A.tail===null&&A.tailMode==="hidden"&&!N.alternate&&!br)return $r(h),null}else 2*Ki()-A.renderingStartTime>pd&&g!==1073741824&&(h.flags|=128,$=!0,pa(A,!1),h.lanes=4194304);A.isBackwards?(N.sibling=h.child,h.child=N):(w=A.last,w!==null?w.sibling=N:h.child=N,A.last=N)}return A.tail!==null?(h=A.tail,A.rendering=h,A.tail=h.sibling,A.renderingStartTime=Ki(),h.sibling=null,w=di.current,Cn(di,$?w&1|2:w&1),h):($r(h),null);case 22:case 23:return Pt(),$=h.memoizedState!==null,w!==null&&w.memoizedState!==null!==$&&(h.flags|=8192),$&&h.mode&1?Jr&1073741824&&($r(h),dt&&h.subtreeFlags&6&&(h.flags|=8192)):$r(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var Lp=l.ReactCurrentOwner,al=!1;function Ai(w,h,g,$){h.child=w===null?Dc(h,null,g,$):Nh(h,w.child,g,$)}function ui(w,h,g,$,A){g=g.render;var N=h.ref;return Ni(h,A),$=Eu(w,h,g,$,N,A),g=Yn(),w!==null&&!al?(h.updateQueue=w.updateQueue,h.flags&=-2053,w.lanes&=~A,pi(w,h,A)):(br&&g&&Kl(h),h.flags|=1,Ai(w,h,$,A),h.child)}function qi(w,h,g,$,A){if(w===null){var N=g.type;return typeof N=="function"&&!mo(N)&&N.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(h.tag=15,h.type=N,rs(w,h,N,$,A)):(w=go(g.type,null,$,h,h.mode,A),w.ref=h.ref,w.return=h,h.child=w)}if(N=w.child,(w.lanes&A)===0){var W=N.memoizedProps;if(g=g.compare,g=g!==null?g:Fu,g(W,$)&&w.ref===h.ref)return pi(w,h,A)}return h.flags|=1,w=Ol(N,$),w.ref=h.ref,w.return=h,h.child=w}function rs(w,h,g,$,A){if(w!==null&&Fu(w.memoizedProps,$)&&w.ref===h.ref)if(al=!1,(w.lanes&A)!==0)w.flags&131072&&(al=!0);else return h.lanes=w.lanes,pi(w,h,A);return ma(w,h,g,$,A)}function Uc(w,h,g){var $=h.pendingProps,A=$.children,N=w!==null?w.memoizedState:null;if($.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},Cn(Co,Jr),Jr|=g;else if(g&1073741824)h.memoizedState={baseLanes:0,cachePool:null},$=N!==null?N.baseLanes:g,Cn(Co,Jr),Jr|=$;else return w=N!==null?N.baseLanes|g:g,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:w,cachePool:null},h.updateQueue=null,Cn(Co,Jr),Jr|=w,null;else N!==null?($=N.baseLanes|g,h.memoizedState=null):$=g,Cn(Co,Jr),Jr|=$;return Ai(w,h,A,g),h.child}function fa(w,h){var g=h.ref;(w===null&&g!==null||w!==null&&w.ref!==g)&&(h.flags|=512,h.flags|=2097152)}function ma(w,h,g,$,A){var N=hi(g)?Di:Ur.current;return N=Ts(h,N),Ni(h,A),g=Eu(w,h,g,$,N,A),$=Yn(),w!==null&&!al?(h.updateQueue=w.updateQueue,h.flags&=-2053,w.lanes&=~A,pi(w,h,A)):(br&&$&&Kl(h),h.flags|=1,Ai(w,h,g,A),h.child)}function is(w,h,g,$,A){if(hi(g)){var N=!0;lc(h)}else N=!1;if(Ni(h,A),h.stateNode===null)w!==null&&(w.alternate=null,h.alternate=null,h.flags|=2),kp(h,g,$),Ed(h,g,$,A),$=!0;else if(w===null){var W=h.stateNode,de=h.memoizedProps;W.props=de;var ke=W.context,Qe=g.contextType;typeof Qe=="object"&&Qe!==null?Qe=wi(Qe):(Qe=hi(g)?Di:Ur.current,Qe=Ts(h,Qe));var St=g.getDerivedStateFromProps,Jt=typeof St=="function"||typeof W.getSnapshotBeforeUpdate=="function";Jt||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(de!==$||ke!==Qe)&&mf(h,W,$,Qe),$i=!1;var ln=h.memoizedState;W.state=ln,hr(h,$,W,A),ke=h.memoizedState,de!==$||ln!==ke||_r.current||$i?(typeof St=="function"&&(np(h,g,St,$),ke=h.memoizedState),(de=$i||rp(h,g,de,$,ln,ke,Qe))?(Jt||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(h.flags|=4194308)):(typeof W.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=$,h.memoizedState=ke),W.props=$,W.state=ke,W.context=Qe,$=de):(typeof W.componentDidMount=="function"&&(h.flags|=4194308),$=!1)}else{W=h.stateNode,ad(w,h),de=h.memoizedProps,Qe=h.type===h.elementType?de:Is(h.type,de),W.props=Qe,Jt=h.pendingProps,ln=W.context,ke=g.contextType,typeof ke=="object"&&ke!==null?ke=wi(ke):(ke=hi(g)?Di:Ur.current,ke=Ts(h,ke));var yn=g.getDerivedStateFromProps;(St=typeof yn=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(de!==Jt||ln!==ke)&&mf(h,W,$,ke),$i=!1,ln=h.memoizedState,W.state=ln,hr(h,$,W,A);var vn=h.memoizedState;de!==Jt||ln!==vn||_r.current||$i?(typeof yn=="function"&&(np(h,g,yn,$),vn=h.memoizedState),(Qe=$i||rp(h,g,Qe,$,ln,vn,ke)||!1)?(St||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate($,vn,ke),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate($,vn,ke)),typeof W.componentDidUpdate=="function"&&(h.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof W.componentDidUpdate!="function"||de===w.memoizedProps&&ln===w.memoizedState||(h.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||de===w.memoizedProps&&ln===w.memoizedState||(h.flags|=1024),h.memoizedProps=$,h.memoizedState=vn),W.props=$,W.state=vn,W.context=ke,$=Qe):(typeof W.componentDidUpdate!="function"||de===w.memoizedProps&&ln===w.memoizedState||(h.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||de===w.memoizedProps&&ln===w.memoizedState||(h.flags|=1024),$=!1)}return Hc(w,h,g,$,N,A)}function Hc(w,h,g,$,A,N){fa(w,h);var W=(h.flags&128)!==0;if(!$&&!W)return A&&uc(h,g,!1),pi(w,h,N);$=h.stateNode,Lp.current=h;var de=W&&typeof g.getDerivedStateFromError!="function"?null:$.render();return h.flags|=1,w!==null&&W?(h.child=Nh(h,w.child,null,N),h.child=Nh(h,null,de,N)):Ai(w,h,de,N),h.memoizedState=$.state,A&&uc(h,g,!0),h.child}function ea(w){var h=w.stateNode;h.pendingContext?Qa(w,h.pendingContext,h.pendingContext!==h.context):h.context&&Qa(w,h.context,!1),Ql(w,h.containerInfo)}function Md(w,h,g,$,A){return Lc(),Dh(A),h.flags|=256,Ai(w,h,g,$),h.child}var Ad={dehydrated:null,treeContext:null,retryLane:0};function Hh(w){return{baseLanes:w,cachePool:null}}function Us(w,h,g){var $=h.pendingProps,A=di.current,N=!1,W=(h.flags&128)!==0,de;if((de=W)||(de=w!==null&&w.memoizedState===null?!1:(A&2)!==0),de?(N=!0,h.flags&=-129):(w===null||w.memoizedState!==null)&&(A|=1),Cn(di,A&1),w===null)return ud(h),w=h.memoizedState,w!==null&&(w=w.dehydrated,w!==null)?(h.mode&1?nn(w)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(A=$.children,w=$.fallback,N?($=h.mode,N=h.child,A={mode:"hidden",children:A},!($&1)&&N!==null?(N.childLanes=0,N.pendingProps=A):N=Va(A,$,0,null),w=Ll(w,$,g,null),N.return=h,w.return=h,N.sibling=w,h.child=N,h.child.memoizedState=Hh(g),h.memoizedState=Ad,w):jn(h,A));if(A=w.memoizedState,A!==null){if(de=A.dehydrated,de!==null){if(W)return h.flags&256?(h.flags&=-257,Fi(w,h,g,Error(o(422)))):h.memoizedState!==null?(h.child=w.child,h.flags|=128,null):(N=$.fallback,A=h.mode,$=Va({mode:"visible",children:$.children},A,0,null),N=Ll(N,A,g,null),N.flags|=2,$.return=h,N.return=h,$.sibling=N,h.child=$,h.mode&1&&Nh(h,w.child,null,g),h.child.memoizedState=Hh(g),h.memoizedState=Ad,N);if(!(h.mode&1))h=Fi(w,h,g,null);else if(nn(de))h=Fi(w,h,g,Error(o(419)));else if($=(g&w.childLanes)!==0,al||$){if($=Zn,$!==null){switch(g&-g){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}$=N&($.suspendedLanes|g)?0:N,$!==0&&$!==A.retryLane&&(A.retryLane=$,ks(w,$,-1))}Vh(),h=Fi(w,h,g,Error(o(421)))}else Ft(de)?(h.flags|=128,h.child=w.child,h=Sh.bind(null,w),On(de,h),h=null):(g=A.treeContext,Ae&&(Ci=vt(de),Hr=h,br=!0,ca=null,Wi=!1,g!==null&&(Da[li++]=io,Da[li++]=Na,Da[li++]=Sr,io=g.id,Na=g.overflow,Sr=h)),h=jn(h,h.pendingProps.children),h.flags|=4096);return h}return N?($=Ys(w,h,$.children,$.fallback,g),N=h.child,A=w.child.memoizedState,N.memoizedState=A===null?Hh(g):{baseLanes:A.baseLanes|g,cachePool:null},N.childLanes=w.childLanes&~g,h.memoizedState=Ad,$):(g=Hs(w,h,$.children,g),h.memoizedState=null,g)}return N?($=Ys(w,h,$.children,$.fallback,g),N=h.child,A=w.child.memoizedState,N.memoizedState=A===null?Hh(g):{baseLanes:A.baseLanes|g,cachePool:null},N.childLanes=w.childLanes&~g,h.memoizedState=Ad,$):(g=Hs(w,h,$.children,g),h.memoizedState=null,g)}function jn(w,h){return h=Va({mode:"visible",children:h},w.mode,0,null),h.return=w,w.child=h}function Hs(w,h,g,$){var A=w.child;return w=A.sibling,g=Ol(A,{mode:"visible",children:g}),!(h.mode&1)&&(g.lanes=$),g.return=h,g.sibling=null,w!==null&&($=h.deletions,$===null?(h.deletions=[w],h.flags|=16):$.push(w)),h.child=g}function Ys(w,h,g,$,A){var N=h.mode;w=w.child;var W=w.sibling,de={mode:"hidden",children:g};return!(N&1)&&h.child!==w?(g=h.child,g.childLanes=0,g.pendingProps=de,h.deletions=null):(g=Ol(w,de),g.subtreeFlags=w.subtreeFlags&14680064),W!==null?$=Ol(W,$):($=Ll($,N,A,null),$.flags|=2),$.return=h,g.return=h,g.sibling=$,h.child=g,$}function Fi(w,h,g,$){return $!==null&&Dh($),Nh(h,w.child,null,g),w=jn(h,h.pendingProps.children),w.flags|=2,h.memoizedState=null,w}function tu(w,h,g){w.lanes|=h;var $=w.alternate;$!==null&&($.lanes|=h),nl(w.return,h,g)}function Fo(w,h,g,$,A){var N=w.memoizedState;N===null?w.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:$,tail:g,tailMode:A}:(N.isBackwards=h,N.rendering=null,N.renderingStartTime=0,N.last=$,N.tail=g,N.tailMode=A)}function En(w,h,g){var $=h.pendingProps,A=$.revealOrder,N=$.tail;if(Ai(w,h,$.children,g),$=di.current,($&2)!==0)$=$&1|2,h.flags|=128;else{if(w!==null&&w.flags&128)e:for(w=h.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&tu(w,g,h);else if(w.tag===19)tu(w,g,h);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===h)break e;for(;w.sibling===null;){if(w.return===null||w.return===h)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}$&=1}if(Cn(di,$),(h.mode&1)===0)h.memoizedState=null;else switch(A){case"forwards":for(g=h.child,A=null;g!==null;)w=g.alternate,w!==null&&ye(w)===null&&(A=g),g=g.sibling;g=A,g===null?(A=h.child,h.child=null):(A=g.sibling,g.sibling=null),Fo(h,!1,A,g,N);break;case"backwards":for(g=null,A=h.child,h.child=null;A!==null;){if(w=A.alternate,w!==null&&ye(w)===null){h.child=A;break}w=A.sibling,A.sibling=g,g=A,A=w}Fo(h,!0,g,null,N);break;case"together":Fo(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function pi(w,h,g){if(w!==null&&(h.dependencies=w.dependencies),iu|=h.lanes,(g&h.childLanes)===0)return null;if(w!==null&&h.child!==w.child)throw Error(o(153));if(h.child!==null){for(w=h.child,g=Ol(w,w.pendingProps),h.child=g,g.return=h;w.sibling!==null;)w=w.sibling,g=g.sibling=Ol(w,w.pendingProps),g.return=h;g.sibling=null}return h.child}function fi(w,h,g){switch(h.tag){case 3:ea(h),Lc();break;case 5:mh(h);break;case 1:hi(h.type)&&lc(h);break;case 4:Ql(h,h.stateNode.containerInfo);break;case 10:xo(h,h.type._context,h.memoizedProps.value);break;case 13:var $=h.memoizedState;if($!==null)return $.dehydrated!==null?(Cn(di,di.current&1),h.flags|=128,null):g&h.child.childLanes?Us(w,h,g):(Cn(di,di.current&1),w=pi(w,h,g),w!==null?w.sibling:null);Cn(di,di.current&1);break;case 19:if($=(g&h.childLanes)!==0,(w.flags&128)!==0){if($)return En(w,h,g);h.flags|=128}var A=h.memoizedState;if(A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Cn(di,di.current),$)break;return null;case 22:case 23:return h.lanes=0,Uc(w,h,g)}return pi(w,h,g)}function Dp(w,h){switch(Lh(h),h.tag){case 1:return hi(h.type)&&fs(),w=h.flags,w&65536?(h.flags=w&-65537|128,h):null;case 3:return Su(),Ir(_r),Ir(Ur),Be(),w=h.flags,w&65536&&!(w&128)?(h.flags=w&-65537|128,h):null;case 5:return xd(h),null;case 13:if(Ir(di),w=h.memoizedState,w!==null&&w.dehydrated!==null){if(h.alternate===null)throw Error(o(340));Lc()}return w=h.flags,w&65536?(h.flags=w&-65537|128,h):null;case 19:return Ir(di),null;case 4:return Su(),null;case 10:return vu(h.type._context),null;case 22:case 23:return Pt(),null;case 24:return null;default:return null}}var yh=!1,lo=!1,ga=typeof WeakSet=="function"?WeakSet:Set,wn=null;function _n(w,h){var g=w.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch($){Mo(w,h,$)}else g.current=null}function ll(w,h,g){try{g()}catch($){Mo(w,h,$)}}var pc=!1;function _f(w,h){for(q(w.containerInfo),wn=h;wn!==null;)if(w=wn,h=w.child,(w.subtreeFlags&1028)!==0&&h!==null)h.return=w,wn=h;else for(;wn!==null;){w=wn;try{var g=w.alternate;if(w.flags&1024)switch(w.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var $=g.memoizedProps,A=g.memoizedState,N=w.stateNode,W=N.getSnapshotBeforeUpdate(w.elementType===w.type?$:Is(w.type,$),A);N.__reactInternalSnapshotBeforeUpdate=W}break;case 3:dt&&Yt(w.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(de){Mo(w,w.return,de)}if(h=w.sibling,h!==null){h.return=w.return,wn=h;break}wn=w.return}return g=pc,pc=!1,g}function nu(w,h,g){var $=h.updateQueue;if($=$!==null?$.lastEffect:null,$!==null){var A=$=$.next;do{if((A.tag&w)===w){var N=A.destroy;A.destroy=void 0,N!==void 0&&ll(h,g,N)}A=A.next}while(A!==$)}}function wo(w,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&w)===w){var $=g.create;g.destroy=$()}g=g.next}while(g!==h)}}function _s(w){var h=w.ref;if(h!==null){var g=w.stateNode;switch(w.tag){case 5:w=ce(g);break;default:w=g}typeof h=="function"?h(w):h.current=w}}function ul(w,h,g){if(aa&&typeof aa.onCommitFiberUnmount=="function")try{aa.onCommitFiberUnmount(Bu,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(w=h.updateQueue,w!==null&&(w=w.lastEffect,w!==null)){var $=w=w.next;do{var A=$,N=A.destroy;A=A.tag,N!==void 0&&(A&2||A&4)&&ll(h,g,N),$=$.next}while($!==w)}break;case 1:if(_n(h,g),w=h.stateNode,typeof w.componentWillUnmount=="function")try{w.props=h.memoizedProps,w.state=h.memoizedState,w.componentWillUnmount()}catch(W){Mo(h,g,W)}break;case 5:_n(h,g);break;case 4:dt?Gc(w,h,g):Ue&&Ue&&(h=h.stateNode.containerInfo,g=ii(h),xr(h,g))}}function ss(w,h,g){for(var $=h;;)if(ul(w,$,g),$.child===null||dt&&$.tag===4){if($===h)break;for(;$.sibling===null;){if($.return===null||$.return===h)return;$=$.return}$.sibling.return=$.return,$=$.sibling}else $.child.return=$,$=$.child}function cl(w){var h=w.alternate;h!==null&&(w.alternate=null,cl(h)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(h=w.stateNode,h!==null&&Dt(h)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}function zo(w){return w.tag===5||w.tag===3||w.tag===4}function Gh(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||zo(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function Ua(w){if(dt){e:{for(var h=w.return;h!==null;){if(zo(h))break e;h=h.return}throw Error(o(160))}var g=h;switch(g.tag){case 5:h=g.stateNode,g.flags&32&&(Gt(h),g.flags&=-33),g=Gh(w),Id(w,g,h);break;case 3:case 4:h=g.stateNode.containerInfo,g=Gh(w),Ii(w,g,h);break;default:throw Error(o(161))}}}function Ii(w,h,g){var $=w.tag;if($===5||$===6)w=w.stateNode,h?fe(g,w,h):ft(g,w);else if($!==4&&(w=w.child,w!==null))for(Ii(w,h,g),w=w.sibling;w!==null;)Ii(w,h,g),w=w.sibling}function Id(w,h,g){var $=w.tag;if($===5||$===6)w=w.stateNode,h?ne(g,w,h):At(g,w);else if($!==4&&(w=w.child,w!==null))for(Id(w,h,g),w=w.sibling;w!==null;)Id(w,h,g),w=w.sibling}function Gc(w,h,g){for(var $=h,A=!1,N,W;;){if(!A){A=$.return;e:for(;;){if(A===null)throw Error(o(160));switch(N=A.stateNode,A.tag){case 5:W=!1;break e;case 3:N=N.containerInfo,W=!0;break e;case 4:N=N.containerInfo,W=!0;break e}A=A.return}A=!0}if($.tag===5||$.tag===6)ss(w,$,g),W?Ye(N,$.stateNode):Ie(N,$.stateNode);else if($.tag===18)W?jr(N,$.stateNode):Nr(N,$.stateNode);else if($.tag===4){if($.child!==null){N=$.stateNode.containerInfo,W=!0,$.child.return=$,$=$.child;continue}}else if(ul(w,$,g),$.child!==null){$.child.return=$,$=$.child;continue}if($===h)break;for(;$.sibling===null;){if($.return===null||$.return===h)return;$=$.return,$.tag===4&&(A=!1)}$.sibling.return=$.return,$=$.sibling}}function Wh(w,h){if(dt){switch(h.tag){case 0:case 11:case 14:case 15:nu(3,h,h.return),wo(3,h),nu(5,h,h.return);return;case 1:return;case 5:var g=h.stateNode;if(g!=null){var $=h.memoizedProps;w=w!==null?w.memoizedProps:$;var A=h.type,N=h.updateQueue;h.updateQueue=null,N!==null&&Q(g,N,A,w,$,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));g=h.memoizedProps,Ke(h.stateNode,w!==null?w.memoizedProps:g,g);return;case 3:Ae&&w!==null&&w.memoizedState.isDehydrated&&wr(h.stateNode.containerInfo);return;case 12:return;case 13:Uo(h);return;case 19:Uo(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:nu(3,h,h.return),wo(3,h),nu(5,h,h.return);return;case 12:return;case 13:Uo(h);return;case 19:Uo(h);return;case 3:Ae&&w!==null&&w.memoizedState.isDehydrated&&wr(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ue){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,xr(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function Uo(w){var h=w.updateQueue;if(h!==null){w.updateQueue=null;var g=w.stateNode;g===null&&(g=w.stateNode=new ga),h.forEach(function($){var A=fo.bind(null,w,$);g.has($)||(g.add($),$.then(A,A))})}}function $o(w,h){for(wn=h;wn!==null;){h=wn;var g=h.deletions;if(g!==null)for(var $=0;$<g.length;$++){var A=g[$];try{var N=w;dt?Gc(N,A,h):ss(N,A,h);var W=A.alternate;W!==null&&(W.return=null),A.return=null}catch(Ut){Mo(A,h,Ut)}}if(g=h.child,(h.subtreeFlags&12854)!==0&&g!==null)g.return=h,wn=g;else for(;wn!==null;){h=wn;try{var de=h.flags;if(de&32&&dt&&Gt(h.stateNode),de&512){var ke=h.alternate;if(ke!==null){var Qe=ke.ref;Qe!==null&&(typeof Qe=="function"?Qe(null):Qe.current=null)}}if(de&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var St=h.alternate;(St===null||St.memoizedState===null)&&(uo=Ki())}break;case 22:var Jt=h.memoizedState!==null,ln=h.alternate,yn=ln!==null&&ln.memoizedState!==null;if(g=h,dt){e:if($=g,A=Jt,N=null,dt)for(var vn=$;;){if(vn.tag===5){if(N===null){N=vn;var fn=vn.stateNode;A?He(fn):_t(vn.stateNode,vn.memoizedProps)}}else if(vn.tag===6){if(N===null){var Lr=vn.stateNode;A?Zt(Lr):Kt(Lr,vn.memoizedProps)}}else if((vn.tag!==22&&vn.tag!==23||vn.memoizedState===null||vn===$)&&vn.child!==null){vn.child.return=vn,vn=vn.child;continue}if(vn===$)break;for(;vn.sibling===null;){if(vn.return===null||vn.return===$)break e;N===vn&&(N=null),vn=vn.return}N===vn&&(N=null),vn.sibling.return=vn.return,vn=vn.sibling}}if(Jt&&!yn&&g.mode&1){wn=g;for(var bt=g.child;bt!==null;){for(g=wn=bt;wn!==null;){$=wn;var Ce=$.child;switch($.tag){case 0:case 11:case 14:case 15:nu(4,$,$.return);break;case 1:_n($,$.return);var Le=$.stateNode;if(typeof Le.componentWillUnmount=="function"){var rt=$.return;try{Le.props=$.memoizedProps,Le.state=$.memoizedState,Le.componentWillUnmount()}catch(Ut){Mo($,rt,Ut)}}break;case 5:_n($,$.return);break;case 22:if($.memoizedState!==null){dd(g);continue}}Ce!==null?(Ce.return=$,wn=Ce):dd(g)}bt=bt.sibling}}}switch(de&4102){case 2:Ua(h),h.flags&=-3;break;case 6:Ua(h),h.flags&=-3,Wh(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,Wh(h.alternate,h);break;case 4:Wh(h.alternate,h)}}catch(Ut){Mo(h,h.return,Ut)}if(g=h.sibling,g!==null){g.return=h.return,wn=g;break}wn=h.return}}}function op(w,h,g){wn=w,xu(w)}function xu(w,h,g){for(var $=(w.mode&1)!==0;wn!==null;){var A=wn,N=A.child;if(A.tag===22&&$){var W=A.memoizedState!==null||yh;if(!W){var de=A.alternate,ke=de!==null&&de.memoizedState!==null||lo;de=yh;var Qe=lo;if(yh=W,(lo=ke)&&!Qe)for(wn=A;wn!==null;)W=wn,ke=W.child,W.tag===22&&W.memoizedState!==null?fc(A):ke!==null?(ke.return=W,wn=ke):fc(A);for(;N!==null;)wn=N,xu(N),N=N.sibling;wn=A,yh=de,lo=Qe}Il(w)}else A.subtreeFlags&8772&&N!==null?(N.return=A,wn=N):Il(w)}}function Il(w){for(;wn!==null;){var h=wn;if(h.flags&8772){var g=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:lo||wo(5,h);break;case 1:var $=h.stateNode;if(h.flags&4&&!lo)if(g===null)$.componentDidMount();else{var A=h.elementType===h.type?g.memoizedProps:Is(h.type,g.memoizedProps);$.componentDidUpdate(A,g.memoizedState,$.__reactInternalSnapshotBeforeUpdate)}var N=h.updateQueue;N!==null&&Jo(h,N,$);break;case 3:var W=h.updateQueue;if(W!==null){if(g=null,h.child!==null)switch(h.child.tag){case 5:g=ce(h.child.stateNode);break;case 1:g=h.child.stateNode}Jo(h,W,g)}break;case 5:var de=h.stateNode;g===null&&h.flags&4&&Oe(de,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(Ae&&h.memoizedState===null){var ke=h.alternate;if(ke!==null){var Qe=ke.memoizedState;if(Qe!==null){var St=Qe.dehydrated;St!==null&&si(St)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}lo||h.flags&512&&_s(h)}catch(Jt){Mo(h,h.return,Jt)}}if(h===w){wn=null;break}if(g=h.sibling,g!==null){g.return=h.return,wn=g;break}wn=h.return}}function dd(w){for(;wn!==null;){var h=wn;if(h===w){wn=null;break}var g=h.sibling;if(g!==null){g.return=h.return,wn=g;break}wn=h.return}}function fc(w){for(;wn!==null;){var h=wn;try{switch(h.tag){case 0:case 11:case 15:var g=h.return;try{wo(4,h)}catch(ke){Mo(h,g,ke)}break;case 1:var $=h.stateNode;if(typeof $.componentDidMount=="function"){var A=h.return;try{$.componentDidMount()}catch(ke){Mo(h,A,ke)}}var N=h.return;try{_s(h)}catch(ke){Mo(h,N,ke)}break;case 5:var W=h.return;try{_s(h)}catch(ke){Mo(h,W,ke)}}}catch(ke){Mo(h,h.return,ke)}if(h===w){wn=null;break}var de=h.sibling;if(de!==null){de.return=h.return,wn=de;break}wn=h.return}}var Yr=0,ru=1,Xu=2,os=3,Ha=4;if(typeof Symbol=="function"&&Symbol.for){var xs=Symbol.for;Yr=xs("selector.component"),ru=xs("selector.has_pseudo_class"),Xu=xs("selector.role"),os=xs("selector.test_id"),Ha=xs("selector.text")}function ws(w){var h=je(w);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(w=Mt(w),w===null)throw Error(o(362));return w.stateNode.current}function Wc(w,h){switch(h.$$typeof){case Yr:if(w.type===h.value)return!0;break;case ru:e:{h=h.value,w=[w,0];for(var g=0;g<w.length;){var $=w[g++],A=w[g++],N=h[A];if($.tag!==5||!ie($)){for(;N!=null&&Wc($,N);)A++,N=h[A];if(A===h.length){h=!0;break e}else for($=$.child;$!==null;)w.push($,A),$=$.sibling}}h=!1}return h;case Xu:if(w.tag===5&&we(w.stateNode,h.value))return!0;break;case Ha:if((w.tag===5||w.tag===6)&&(w=xe(w),w!==null&&0<=w.indexOf(h.value)))return!0;break;case os:if(w.tag===5&&(w=w.memoizedProps["data-testname"],typeof w=="string"&&w.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function mi(w){switch(w.$$typeof){case Yr:return"<"+(G(w.value)||"Unknown")+">";case ru:return":has("+(mi(w)||"")+")";case Xu:return'[role="'+w.value+'"]';case Ha:return'"'+w.value+'"';case os:return'[data-testname="'+w.value+'"]';default:throw Error(o(365))}}function Ga(w,h){var g=[];w=[w,0];for(var $=0;$<w.length;){var A=w[$++],N=w[$++],W=h[N];if(A.tag!==5||!ie(A)){for(;W!=null&&Wc(A,W);)N++,W=h[N];if(N===h.length)g.push(A);else for(A=A.child;A!==null;)w.push(A,N),A=A.sibling}}return g}function mc(w,h){if(!Ct)throw Error(o(363));w=ws(w),w=Ga(w,h),h=[],w=Array.from(w);for(var g=0;g<w.length;){var $=w[g++];if($.tag===5)ie($)||h.push($.stateNode);else for($=$.child;$!==null;)w.push($),$=$.sibling}return h}var ap=Math.ceil,vh=l.ReactCurrentDispatcher,ta=l.ReactCurrentOwner,Vi=l.ReactCurrentBatchConfig,Dn=0,Zn=null,Or=null,ei=0,Jr=0,Co=Li(0),as=0,Qi=null,iu=0,Yu=0,gc=0,Ku=null,Ks=null,uo=0,pd=1/0;function _a(){pd=Ki()+500}var wu=!1,$u=null,co=null,ho=!1,Rl=null,Ho=0,Ju=0,qu=null,bh=-1,Th=0;function Rr(){return Dn&6?Ki():bh!==-1?bh:bh=Ki()}function ys(w){return w.mode&1?Dn&2&&ei!==0?ei&-ei:la.transition!==null?(Th===0&&(w=ch,ch<<=1,!(ch&4194240)&&(ch=64),Th=w),Th):(w=yr,w!==0?w:tt()):1}function ks(w,h,g){if(50<Ju)throw Ju=0,qu=null,Error(o(185));var $=Wa(w,h);return $===null?null:(fu($,h,g),(!(Dn&2)||$!==Zn)&&($===Zn&&(!(Dn&2)&&(Yu|=h),as===4&&$s($,ei)),Gs($,g),h===1&&Dn===0&&!(w.mode&1)&&(_a(),ro&&Oa())),$)}function Wa(w,h){w.lanes|=h;var g=w.alternate;for(g!==null&&(g.lanes|=h),g=w,w=w.return;w!==null;)w.childLanes|=h,g=w.alternate,g!==null&&(g.childLanes|=h),g=w,w=w.return;return g.tag===3?g.stateNode:null}function Gs(w,h){var g=w.callbackNode;hh(w,h);var $=Ei(w,w===Zn?ei:0);if($===0)g!==null&&Za(g),w.callbackNode=null,w.callbackPriority=0;else if(h=$&-$,w.callbackPriority!==h){if(g!=null&&Za(g),h===1)w.tag===0?dh(su.bind(null,w)):_u(su.bind(null,w)),Rt?yt(function(){Dn===0&&Oa()}):jl(ms,Oa),g=null;else{switch(vr($)){case 1:g=ms;break;case 4:g=tl;break;case 16:g=Sd;break;case 536870912:g=no;break;default:g=Sd}g=Kc(g,hn.bind(null,w))}w.callbackPriority=h,w.callbackNode=g}}function hn(w,h){if(bh=-1,Th=0,(Dn&6)!==0)throw Error(o(327));var g=w.callbackNode;if(_c()&&w.callbackNode!==g)return null;var $=Ei(w,w===Zn?ei:0);if($===0)return null;if($&30||$&w.expiredLanes||h)h=jc(w,$);else{h=$;var A=Dn;Dn|=2;var N=Qu();(Zn!==w||ei!==h)&&(_a(),hl(w,h));do try{ji();break}catch(de){Wr(w,de)}while(!0);yu(),vh.current=N,Dn=A,Or!==null?h=0:(Zn=null,ei=0,h=as)}if(h!==0){if(h===2&&(A=kc(w),A!==0&&($=A,h=Vc(w,A))),h===1)throw g=Qi,hl(w,0),$s(w,$),Gs(w,Ki()),g;if(h===6)$s(w,$);else{if(A=w.current.alternate,($&30)===0&&!gi(A)&&(h=jc(w,$),h===2&&(N=kc(w),N!==0&&($=N,h=Vc(w,N))),h===1))throw g=Qi,hl(w,0),$s(w,$),Gs(w,Ki()),g;switch(w.finishedWork=A,w.finishedLanes=$,h){case 0:case 1:throw Error(o(345));case 2:dl(w,Ks);break;case 3:if($s(w,$),($&130023424)===$&&(h=uo+500-Ki(),10<h)){if(Ei(w,0)!==0)break;if(A=w.suspendedLanes,(A&$)!==$){Rr(),w.pingedLanes|=w.suspendedLanes&A;break}w.timeoutHandle=Ne(dl.bind(null,w,Ks),h);break}dl(w,Ks);break;case 4:if($s(w,$),($&4194240)===$)break;for(h=w.eventTimes,A=-1;0<$;){var W=31-js($);N=1<<W,W=h[W],W>A&&(A=W),$&=~N}if($=A,$=Ki()-$,$=(120>$?120:480>$?480:1080>$?1080:1920>$?1920:3e3>$?3e3:4320>$?4320:1960*ap($/1960))-$,10<$){w.timeoutHandle=Ne(dl.bind(null,w,Ks),$);break}dl(w,Ks);break;case 5:dl(w,Ks);break;default:throw Error(o(329))}}}return Gs(w,Ki()),w.callbackNode===g?hn.bind(null,w):null}function Vc(w,h){var g=Ku;return w.current.memoizedState.isDehydrated&&(hl(w,h).flags|=256),w=jc(w,h),w!==2&&(h=Ks,Ks=g,h!==null&&Tn(h)),w}function Tn(w){Ks===null?Ks=w:Ks.push.apply(Ks,w)}function gi(w){for(var h=w;;){if(h.flags&16384){var g=h.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var $=0;$<g.length;$++){var A=g[$],N=A.getSnapshot;A=A.value;try{if(!zn(N(),A))return!1}catch{return!1}}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===w)break;for(;h.sibling===null;){if(h.return===null||h.return===w)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function $s(w,h){for(h&=~gc,h&=~Yu,w.suspendedLanes|=h,w.pingedLanes&=~h,w=w.expirationTimes;0<h;){var g=31-js(h),$=1<<g;w[g]=-1,h&=~$}}function su(w){if(Dn&6)throw Error(o(327));_c();var h=Ei(w,0);if(!(h&1))return Gs(w,Ki()),null;var g=jc(w,h);if(w.tag!==0&&g===2){var $=kc(w);$!==0&&(h=$,g=Vc(w,$))}if(g===1)throw g=Qi,hl(w,0),$s(w,h),Gs(w,Ki()),g;if(g===6)throw Error(o(345));return w.finishedWork=w.current.alternate,w.finishedLanes=h,dl(w,Ks),Gs(w,Ki()),null}function kl(w){Rl!==null&&Rl.tag===0&&!(Dn&6)&&_c();var h=Dn;Dn|=1;var g=Vi.transition,$=yr;try{if(Vi.transition=null,yr=1,w)return w()}finally{yr=$,Vi.transition=g,Dn=h,!(Dn&6)&&Oa()}}function Pt(){Jr=Co.current,Ir(Co)}function hl(w,h){w.finishedWork=null,w.finishedLanes=0;var g=w.timeoutHandle;if(g!==st&&(w.timeoutHandle=st,it(g)),Or!==null)for(g=Or.return;g!==null;){var $=g;switch(Lh($),$.tag){case 1:$=$.type.childContextTypes,$!=null&&fs();break;case 3:Su(),Ir(_r),Ir(Ur),Be();break;case 5:xd($);break;case 4:Su();break;case 13:Ir(di);break;case 19:Ir(di);break;case 10:vu($.type._context);break;case 22:case 23:Pt()}g=g.return}if(Zn=w,Or=w=Ol(w.current,null),ei=Jr=h,as=0,Qi=null,gc=Yu=iu=0,Ks=Ku=null,Hn!==null){for(h=0;h<Hn.length;h++)if(g=Hn[h],$=g.interleaved,$!==null){g.interleaved=null;var A=$.next,N=g.pending;if(N!==null){var W=N.next;N.next=A,$.next=W}g.pending=$}Hn=null}return w}function Wr(w,h){do{var g=Or;try{if(yu(),kt.current=eu,so){for(var $=Xn.memoizedState;$!==null;){var A=$.queue;A!==null&&(A.pending=null),$=$.next}so=!1}if(Mn=0,Pr=gn=Xn=null,vi=!1,oo=0,ta.current=null,g===null||g.return===null){as=1,Qi=h,Or=null;break}e:{var N=w,W=g.return,de=g,ke=h;if(h=ei,de.flags|=32768,ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var Qe=ke,St=de,Jt=St.tag;if(!(St.mode&1)&&(Jt===0||Jt===11||Jt===15)){var ln=St.alternate;ln?(St.updateQueue=ln.updateQueue,St.memoizedState=ln.memoizedState,St.lanes=ln.lanes):(St.updateQueue=null,St.memoizedState=null)}var yn=dc(W);if(yn!==null){yn.flags&=-257,Cd(yn,W,de,N,h),yn.mode&1&&zc(N,Qe,h),h=yn,ke=Qe;var vn=h.updateQueue;if(vn===null){var fn=new Set;fn.add(ke),h.updateQueue=fn}else vn.add(ke);break e}else{if(!(h&1)){zc(N,Qe,h),Vh();break e}ke=Error(o(426))}}else if(br&&de.mode&1){var Lr=dc(W);if(Lr!==null){!(Lr.flags&65536)&&(Lr.flags|=256),Cd(Lr,W,de,N,h),Dh(ke);break e}}N=ke,as!==4&&(as=2),Ku===null?Ku=[N]:Ku.push(N),ke=sl(ke,de),de=W;do{switch(de.tag){case 3:de.flags|=65536,h&=-h,de.lanes|=h;var bt=Fc(de,ke,h);ph(de,bt);break e;case 1:N=ke;var Ce=de.type,Le=de.stateNode;if(!(de.flags&128)&&(typeof Ce.getDerivedStateFromError=="function"||Le!==null&&typeof Le.componentDidCatch=="function"&&(co===null||!co.has(Le)))){de.flags|=65536,h&=-h,de.lanes|=h;var rt=Al(de,N,h);ph(de,rt);break e}}de=de.return}while(de!==null)}po(g)}catch(Ut){h=Ut,Or===g&&g!==null&&(Or=g=g.return);continue}break}while(!0)}function Qu(){var w=vh.current;return vh.current=eu,w===null?eu:w}function Vh(){(as===0||as===3||as===2)&&(as=4),Zn===null||!(iu&268435455)&&!(Yu&268435455)||$s(Zn,ei)}function jc(w,h){var g=Dn;Dn|=2;var $=Qu();Zn===w&&ei===h||hl(w,h);do try{oi();break}catch(A){Wr(w,A)}while(!0);if(yu(),Dn=g,vh.current=$,Or!==null)throw Error(o(261));return Zn=null,ei=0,as}function oi(){for(;Or!==null;)Xc(Or)}function ji(){for(;Or!==null&&!el();)Xc(Or)}function Xc(w){var h=Cu(w.alternate,w,Jr);w.memoizedProps=w.pendingProps,h===null?po(w):Or=h,ta.current=null}function po(w){var h=w;do{var g=h.alternate;if(w=h.return,(h.flags&32768)===0){if(g=pn(g,h,Jr),g!==null){Or=g;return}}else{if(g=Dp(g,h),g!==null){g.flags&=32767,Or=g;return}if(w!==null)w.flags|=32768,w.subtreeFlags=0,w.deletions=null;else{as=6,Or=null;return}}if(h=h.sibling,h!==null){Or=h;return}Or=h=w}while(h!==null);as===0&&(as=5)}function dl(w,h){var g=yr,$=Vi.transition;try{Vi.transition=null,yr=1,Yc(w,h,g)}finally{Vi.transition=$,yr=g}return null}function Yc(w,h,g){do _c();while(Rl!==null);if(Dn&6)throw Error(o(327));var $=w.finishedWork,A=w.finishedLanes;if($===null)return null;if(w.finishedWork=null,w.finishedLanes=0,$===w.current)throw Error(o(177));w.callbackNode=null,w.callbackPriority=0;var N=$.lanes|$.childLanes;if(Sl(w,N),w===Zn&&(Or=Zn=null,ei=0),!($.subtreeFlags&2064)&&!($.flags&2064)||ho||(ho=!0,Kc(Sd,function(){return _c(),null})),N=($.flags&15990)!==0,($.subtreeFlags&15990)!==0||N){N=Vi.transition,Vi.transition=null;var W=yr;yr=1;var de=Dn;Dn|=4,ta.current=null,_f(w,$),$o(w,$),oe(w.containerInfo),w.current=$,op($),mu(),Dn=de,yr=W,Vi.transition=N}else w.current=$;if(ho&&(ho=!1,Rl=w,Ho=A),N=w.pendingLanes,N===0&&(co=null),gu($.stateNode),Gs(w,Ki()),h!==null)for(g=w.onRecoverableError,$=0;$<h.length;$++)g(h[$]);if(wu)throw wu=!1,w=$u,$u=null,w;return Ho&1&&w.tag!==0&&_c(),N=w.pendingLanes,N&1?w===qu?Ju++:(Ju=0,qu=w):Ju=0,Oa(),null}function _c(){if(Rl!==null){var w=vr(Ho),h=Vi.transition,g=yr;try{if(Vi.transition=null,yr=16>w?16:w,Rl===null)var $=!1;else{if(w=Rl,Rl=null,Ho=0,(Dn&6)!==0)throw Error(o(331));var A=Dn;for(Dn|=4,wn=w.current;wn!==null;){var N=wn,W=N.child;if(wn.flags&16){var de=N.deletions;if(de!==null){for(var ke=0;ke<de.length;ke++){var Qe=de[ke];for(wn=Qe;wn!==null;){var St=wn;switch(St.tag){case 0:case 11:case 15:nu(8,St,N)}var Jt=St.child;if(Jt!==null)Jt.return=St,wn=Jt;else for(;wn!==null;){St=wn;var ln=St.sibling,yn=St.return;if(cl(St),St===Qe){wn=null;break}if(ln!==null){ln.return=yn,wn=ln;break}wn=yn}}}var vn=N.alternate;if(vn!==null){var fn=vn.child;if(fn!==null){vn.child=null;do{var Lr=fn.sibling;fn.sibling=null,fn=Lr}while(fn!==null)}}wn=N}}if(N.subtreeFlags&2064&&W!==null)W.return=N,wn=W;else e:for(;wn!==null;){if(N=wn,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:nu(9,N,N.return)}var bt=N.sibling;if(bt!==null){bt.return=N.return,wn=bt;break e}wn=N.return}}var Ce=w.current;for(wn=Ce;wn!==null;){W=wn;var Le=W.child;if(W.subtreeFlags&2064&&Le!==null)Le.return=W,wn=Le;else e:for(W=Ce;wn!==null;){if(de=wn,(de.flags&2048)!==0)try{switch(de.tag){case 0:case 11:case 15:wo(9,de)}}catch(Ut){Mo(de,de.return,Ut)}if(de===W){wn=null;break e}var rt=de.sibling;if(rt!==null){rt.return=de.return,wn=rt;break e}wn=de.return}}if(Dn=A,Oa(),aa&&typeof aa.onPostCommitFiberRoot=="function")try{aa.onPostCommitFiberRoot(Bu,w)}catch{}$=!0}return $}finally{yr=g,Vi.transition=h}}return!1}function Zu(w,h,g){h=sl(g,h),h=Fc(w,h,1),Gi(w,h),h=Rr(),w=Wa(w,1),w!==null&&(fu(w,1,h),Gs(w,h))}function Mo(w,h,g){if(w.tag===3)Zu(w,w,g);else for(;h!==null;){if(h.tag===3){Zu(h,w,g);break}else if(h.tag===1){var $=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof $.componentDidCatch=="function"&&(co===null||!co.has($))){w=sl(g,w),w=Al(h,w,1),Gi(h,w),w=Rr(),h=Wa(h,1),h!==null&&(fu(h,1,w),Gs(h,w));break}}h=h.return}}function Js(w,h,g){var $=w.pingCache;$!==null&&$.delete(h),h=Rr(),w.pingedLanes|=w.suspendedLanes&g,Zn===w&&(ei&g)===g&&(as===4||as===3&&(ei&130023424)===ei&&500>Ki()-uo?hl(w,0):gc|=g),Gs(w,h)}function na(w,h){h===0&&(w.mode&1?(h=Ko,Ko<<=1,!(Ko&130023424)&&(Ko=4194304)):h=1);var g=Rr();w=Wa(w,h),w!==null&&(fu(w,h,g),Gs(w,g))}function Sh(w){var h=w.memoizedState,g=0;h!==null&&(g=h.retryLane),na(w,g)}function fo(w,h){var g=0;switch(w.tag){case 13:var $=w.stateNode,A=w.memoizedState;A!==null&&(g=A.retryLane);break;case 19:$=w.stateNode;break;default:throw Error(o(314))}$!==null&&$.delete(h),na(w,g)}var Cu;Cu=function(w,h,g){if(w!==null)if(w.memoizedProps!==h.pendingProps||_r.current)al=!0;else{if(!(w.lanes&g)&&!(h.flags&128))return al=!1,fi(w,h,g);al=(w.flags&131072)!==0}else al=!1,br&&h.flags&1048576&&Yl(h,fh,h.index);switch(h.lanes=0,h.tag){case 2:var $=h.type;w!==null&&(w.alternate=null,h.alternate=null,h.flags|=2),w=h.pendingProps;var A=Ts(h,Ur.current);Ni(h,g),A=Eu(null,h,$,w,A,g);var N=Yn();return h.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,hi($)?(N=!0,lc(h)):N=!1,h.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,Xr(h),A.updater=Oc,h.stateNode=A,A._reactInternals=h,Ed(h,$,w,g),h=Hc(null,h,$,!0,N,g)):(h.tag=0,br&&N&&Kl(h),Ai(null,h,A,g),h=h.child),h;case 16:$=h.elementType;e:{switch(w!==null&&(w.alternate=null,h.alternate=null,h.flags|=2),w=h.pendingProps,A=$._init,$=A($._payload),h.type=$,A=h.tag=ec($),w=Is($,w),A){case 0:h=ma(null,h,$,w,g);break e;case 1:h=is(null,h,$,w,g);break e;case 11:h=ui(null,h,$,w,g);break e;case 14:h=qi(null,h,$,Is($.type,w),g);break e}throw Error(o(306,$,""))}return h;case 0:return $=h.type,A=h.pendingProps,A=h.elementType===$?A:Is($,A),ma(w,h,$,A,g);case 1:return $=h.type,A=h.pendingProps,A=h.elementType===$?A:Is($,A),is(w,h,$,A,g);case 3:e:{if(ea(h),w===null)throw Error(o(387));$=h.pendingProps,N=h.memoizedState,A=N.element,ad(w,h),hr(h,$,null,g);var W=h.memoizedState;if($=W.element,Ae&&N.isDehydrated)if(N={element:$,isDehydrated:!1,cache:W.cache,transitions:W.transitions},h.updateQueue.baseState=N,h.memoizedState=N,h.flags&256){A=Error(o(423)),h=Md(w,h,$,g,A);break e}else if($!==A){A=Error(o(424)),h=Md(w,h,$,g,A);break e}else for(Ae&&(Ci=$t(h.stateNode.containerInfo),Hr=h,br=!0,ca=null,Wi=!1),g=Dc(h,null,$,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Lc(),$===A){h=pi(w,h,g);break e}Ai(w,h,$,g)}h=h.child}return h;case 5:return mh(h),w===null&&ud(h),$=h.type,A=h.pendingProps,N=w!==null?w.memoizedProps:null,W=A.children,Re($,A)?W=null:N!==null&&Re($,N)&&(h.flags|=32),fa(w,h),Ai(w,h,W,g),h.child;case 6:return w===null&&ud(h),null;case 13:return Us(w,h,g);case 4:return Ql(h,h.stateNode.containerInfo),$=h.pendingProps,w===null?h.child=Nh(h,null,$,g):Ai(w,h,$,g),h.child;case 11:return $=h.type,A=h.pendingProps,A=h.elementType===$?A:Is($,A),ui(w,h,$,A,g);case 7:return Ai(w,h,h.pendingProps,g),h.child;case 8:return Ai(w,h,h.pendingProps.children,g),h.child;case 12:return Ai(w,h,h.pendingProps.children,g),h.child;case 10:e:{if($=h.type._context,A=h.pendingProps,N=h.memoizedProps,W=A.value,xo(h,$,W),N!==null)if(zn(N.value,W)){if(N.children===A.children&&!_r.current){h=pi(w,h,g);break e}}else for(N=h.child,N!==null&&(N.return=h);N!==null;){var de=N.dependencies;if(de!==null){W=N.child;for(var ke=de.firstContext;ke!==null;){if(ke.context===$){if(N.tag===1){ke=bu(-1,g&-g),ke.tag=2;var Qe=N.updateQueue;if(Qe!==null){Qe=Qe.shared;var St=Qe.pending;St===null?ke.next=ke:(ke.next=St.next,St.next=ke),Qe.pending=ke}}N.lanes|=g,ke=N.alternate,ke!==null&&(ke.lanes|=g),nl(N.return,g,h),de.lanes|=g;break}ke=ke.next}}else if(N.tag===10)W=N.type===h.type?null:N.child;else if(N.tag===18){if(W=N.return,W===null)throw Error(o(341));W.lanes|=g,de=W.alternate,de!==null&&(de.lanes|=g),nl(W,g,h),W=N.sibling}else W=N.child;if(W!==null)W.return=N;else for(W=N;W!==null;){if(W===h){W=null;break}if(N=W.sibling,N!==null){N.return=W.return,W=N;break}W=W.return}N=W}Ai(w,h,A.children,g),h=h.child}return h;case 9:return A=h.type,$=h.pendingProps.children,Ni(h,g),A=wi(A),$=$(A),h.flags|=1,Ai(w,h,$,g),h.child;case 14:return $=h.type,A=Is($,h.pendingProps),A=Is($.type,A),qi(w,h,$,A,g);case 15:return rs(w,h,h.type,h.pendingProps,g);case 17:return $=h.type,A=h.pendingProps,A=h.elementType===$?A:Is($,A),w!==null&&(w.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,hi($)?(w=!0,lc(h)):w=!1,Ni(h,g),kp(h,$,A),Ed(h,$,A,g),Hc(null,h,$,!0,w,g);case 19:return En(w,h,g);case 22:return Uc(w,h,g)}throw Error(o(156,h.tag))};function Kc(w,h){return jl(w,h)}function yc(w,h,g,$){this.tag=w,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=$,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Go(w,h,g,$){return new yc(w,h,g,$)}function mo(w){return w=w.prototype,!(!w||!w.isReactComponent)}function ec(w){if(typeof w=="function")return mo(w)?1:0;if(w!=null){if(w=w.$$typeof,w===C)return 11;if(w===L)return 14}return 2}function Ol(w,h){var g=w.alternate;return g===null?(g=Go(w.tag,h,w.key,w.mode),g.elementType=w.elementType,g.type=w.type,g.stateNode=w.stateNode,g.alternate=w,w.alternate=g):(g.pendingProps=h,g.type=w.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=w.flags&14680064,g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,h=w.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=w.sibling,g.index=w.index,g.ref=w.ref,g}function go(w,h,g,$,A,N){var W=2;if($=w,typeof w=="function")mo(w)&&(W=1);else if(typeof w=="string")W=5;else e:switch(w){case p:return Ll(g.children,A,N,h);case _:W=8,A|=8;break;case v:return w=Go(12,g,h,A|2),w.elementType=v,w.lanes=N,w;case M:return w=Go(13,g,h,A),w.elementType=M,w.lanes=N,w;case I:return w=Go(19,g,h,A),w.elementType=I,w.lanes=N,w;case P:return Va(g,A,N,h);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case b:W=10;break e;case E:W=9;break e;case C:W=11;break e;case L:W=14;break e;case O:W=16,$=null;break e}throw Error(o(130,w==null?w:typeof w,""))}return h=Go(W,g,h,A),h.elementType=w,h.type=$,h.lanes=N,h}function Ll(w,h,g,$){return w=Go(7,w,$,h),w.lanes=g,w}function Va(w,h,g,$){return w=Go(22,w,$,h),w.elementType=P,w.lanes=g,w.stateNode={},w}function ou(w,h,g){return w=Go(6,w,null,h),w.lanes=g,w}function ti(w,h,g){return h=Go(4,w.children!==null?w.children:[],w.key,h),h.lanes=g,h.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},h}function ls(w,h,g,$,A){this.tag=h,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=st,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tl(0),this.expirationTimes=Tl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tl(0),this.identifierPrefix=$,this.onRecoverableError=A,Ae&&(this.mutableSourceEagerHydrationData=null)}function jh(w,h,g,$,A,N,W,de,ke){return w=new ls(w,h,g,de,ke),h===1?(h=1,N===!0&&(h|=8)):h=0,N=Go(3,null,null,h),w.current=N,N.stateNode=w,N.memoizedState={element:$,isDehydrated:g,cache:null,transitions:null},Xr(N),w}function fd(w){if(!w)return Mr;w=w._reactInternals;e:{if(H(w)!==w||w.tag!==1)throw Error(o(170));var h=w;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(hi(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(w.tag===1){var g=w.type;if(hi(g))return ka(w,g,h)}return h}function ya(w){var h=w._reactInternals;if(h===void 0)throw typeof w.render=="function"?Error(o(188)):(w=Object.keys(w).join(","),Error(o(268,w)));return w=J(h),w===null?null:w.stateNode}function va(w,h){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var g=w.retryLane;w.retryLane=g!==0&&g<h?g:h}}function Xh(w,h){va(w,h),(w=w.alternate)&&va(w,h)}function vc(w){return w=J(w),w===null?null:w.stateNode}function Np(){return null}return e.attemptContinuousHydration=function(w){if(w.tag===13){var h=Rr();ks(w,134217728,h),Xh(w,134217728)}},e.attemptHydrationAtCurrentPriority=function(w){if(w.tag===13){var h=Rr(),g=ys(w);ks(w,g,h),Xh(w,g)}},e.attemptSynchronousHydration=function(w){switch(w.tag){case 3:var h=w.stateNode;if(h.current.memoizedState.isDehydrated){var g=gr(h.pendingLanes);g!==0&&(El(h,g|1),Gs(h,Ki()),!(Dn&6)&&(_a(),Oa()))}break;case 13:var $=Rr();kl(function(){return ks(w,1,$)}),Xh(w,1)}},e.batchedUpdates=function(w,h){var g=Dn;Dn|=1;try{return w(h)}finally{Dn=g,Dn===0&&(_a(),ro&&Oa())}},e.createComponentSelector=function(w){return{$$typeof:Yr,value:w}},e.createContainer=function(w,h,g,$,A,N,W){return jh(w,h,!1,null,g,$,A,N,W)},e.createHasPseudoClassSelector=function(w){return{$$typeof:ru,value:w}},e.createHydrationContainer=function(w,h,g,$,A,N,W,de,ke){return w=jh(g,$,!0,w,A,N,W,de,ke),w.context=fd(null),g=w.current,$=Rr(),A=ys(g),N=bu($,A),N.callback=h??null,Gi(g,N),w.current.lanes=A,fu(w,A,$),Gs(w,$),w},e.createPortal=function(w,h,g){var $=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:$==null?null:""+$,children:w,containerInfo:h,implementation:g}},e.createRoleSelector=function(w){return{$$typeof:Xu,value:w}},e.createTestNameSelector=function(w){return{$$typeof:os,value:w}},e.createTextSelector=function(w){return{$$typeof:Ha,value:w}},e.deferredUpdates=function(w){var h=yr,g=Vi.transition;try{return Vi.transition=null,yr=16,w()}finally{yr=h,Vi.transition=g}},e.discreteUpdates=function(w,h,g,$,A){var N=yr,W=Vi.transition;try{return Vi.transition=null,yr=1,w(h,g,$,A)}finally{yr=N,Vi.transition=W,Dn===0&&_a()}},e.findAllNodes=mc,e.findBoundingRects=function(w,h){if(!Ct)throw Error(o(363));h=mc(w,h),w=[];for(var g=0;g<h.length;g++)w.push(mt(h[g]));for(h=w.length-1;0<h;h--){g=w[h];for(var $=g.x,A=$+g.width,N=g.y,W=N+g.height,de=h-1;0<=de;de--)if(h!==de){var ke=w[de],Qe=ke.x,St=Qe+ke.width,Jt=ke.y,ln=Jt+ke.height;if($>=Qe&&N>=Jt&&A<=St&&W<=ln){w.splice(h,1);break}else if($!==Qe||g.width!==ke.width||ln<N||Jt>W){if(!(N!==Jt||g.height!==ke.height||St<$||Qe>A)){Qe>$&&(ke.width+=Qe-$,ke.x=$),St<A&&(ke.width=A-Qe),w.splice(h,1);break}}else{Jt>N&&(ke.height+=Jt-N,ke.y=N),ln<W&&(ke.height=W-Jt),w.splice(h,1);break}}}return w},e.findHostInstance=ya,e.findHostInstanceWithNoPortals=function(w){return w=ae(w),w=w!==null?he(w):null,w===null?null:w.stateNode},e.findHostInstanceWithWarning=function(w){return ya(w)},e.flushControlled=function(w){var h=Dn;Dn|=1;var g=Vi.transition,$=yr;try{Vi.transition=null,yr=1,w()}finally{yr=$,Vi.transition=g,Dn=h,Dn===0&&(_a(),Oa())}},e.flushPassiveEffects=_c,e.flushSync=kl,e.focusWithin=function(w,h){if(!Ct)throw Error(o(363));for(w=ws(w),h=Ga(w,h),h=Array.from(h),w=0;w<h.length;){var g=h[w++];if(!ie(g)){if(g.tag===5&&ct(g.stateNode))return!0;for(g=g.child;g!==null;)h.push(g),g=g.sibling}}return!1},e.getCurrentUpdatePriority=function(){return yr},e.getFindAllNodesFailureDescription=function(w,h){if(!Ct)throw Error(o(363));var g=0,$=[];w=[ws(w),0];for(var A=0;A<w.length;){var N=w[A++],W=w[A++],de=h[W];if((N.tag!==5||!ie(N))&&(Wc(N,de)&&($.push(mi(de)),W++,W>g&&(g=W)),W<h.length))for(N=N.child;N!==null;)w.push(N,W),N=N.sibling}if(g<h.length){for(w=[];g<h.length;g++)w.push(mi(h[g]));return`findAllNodes was able to match part of the selector:
  `+($.join(" > ")+`

No matching component was found for:
  `)+w.join(" > ")}return null},e.getPublicRootInstance=function(w){if(w=w.current,!w.child)return null;switch(w.child.tag){case 5:return ce(w.child.stateNode);default:return w.child.stateNode}},e.injectIntoDevTools=function(w){if(w={bundleType:w.bundleType,version:w.version,rendererPackageName:w.rendererPackageName,rendererConfig:w.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:vc,findFiberByHostInstance:w.findFiberByHostInstance||Np,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")w=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)w=!0;else{try{Bu=h.inject(w),aa=h}catch{}w=!!h.checkDCE}}return w},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(w,h,g,$){if(!Ct)throw Error(o(363));w=mc(w,h);var A=Tt(w,g,$).disconnect;return{disconnect:function(){A()}}},e.registerMutableSourceForHydration=function(w,h){var g=h._getVersion;g=g(h._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[h,g]:w.mutableSourceEagerHydrationData.push(h,g)},e.runWithPriority=function(w,h){var g=yr;try{return yr=w,h()}finally{yr=g}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(w,h,g,$){var A=h.current,N=Rr(),W=ys(A);return g=fd(g),h.context===null?h.context=g:h.pendingContext=g,h=bu(N,W),h.payload={element:w},$=$===void 0?null:$,$!==null&&(h.callback=$),Gi(A,h),w=ks(A,W,N),w!==null&&La(w,A,W),W},e}),dH}(function(n){n.exports=axe()})(uJ);const lxe=lJ(uJ.exports);function uxe(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}const RM=[];function cxe(n,e,t=!1,i={}){for(const o of RM)if(uxe(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return o.response;if(!t)throw o.promise}const s={keys:e,equal:i.equal,promise:n(...e).then(o=>s.response=o).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const o=RM.indexOf(s);o!==-1&&RM.splice(o,1)},i.lifespan)}).catch(o=>s.error=o)};if(RM.push(s),!t)throw s.promise}const hxe=(n,e,t)=>cxe(n,e,!1,t);var ak={exports:{}},Bx={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fH;function dxe(){if(fH)return Bx;fH=1;var n=Vr,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,p){var _,v={},b=null,E=null;p!==void 0&&(b=""+p),d.key!==void 0&&(b=""+d.key),d.ref!==void 0&&(E=d.ref);for(_ in d)i.call(d,_)&&!o.hasOwnProperty(_)&&(v[_]=d[_]);if(u&&u.defaultProps)for(_ in d=u.defaultProps,d)v[_]===void 0&&(v[_]=d[_]);return{$$typeof:e,type:u,key:b,ref:E,props:v,_owner:s.current}}return Bx.Fragment=t,Bx.jsx=l,Bx.jsxs=l,Bx}(function(n){n.exports=dxe()})(ak);const W$=ak.exports.Fragment,an=ak.exports.jsx,Oh=ak.exports.jsxs,aF={},pxe=n=>void Object.assign(aF,n);function fxe(n,e){function t(p,{args:_=[],attach:v,...b},E){let C=`${p[0].toUpperCase()}${p.slice(1)}`,M;if(p==="primitive"){if(b.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const I=b.object;M=dS(I,{type:p,root:E,attach:v,primitive:!0})}else{const I=aF[C];if(!I)throw new Error(`R3F: ${C} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(_))throw new Error("R3F: The args prop must be an array!");M=dS(new I(..._),{type:p,root:E,attach:v,memoizedProps:{args:_}})}return M.__r3f.attach===void 0&&(M instanceof ai?M.__r3f.attach="geometry":M instanceof od&&(M.__r3f.attach="material")),C!=="inject"&&kO(M,b),M}function i(p,_){let v=!1;if(_){var b,E;(b=_.__r3f)!=null&&b.attach?RO(p,_,_.__r3f.attach):_.isObject3D&&p.isObject3D&&(p.add(_),v=!0),v||(E=p.__r3f)==null||E.objects.push(_),_.__r3f||dS(_,{}),_.__r3f.parent=p,hN(_),pS(_)}}function s(p,_,v){let b=!1;if(_){var E,C;if((E=_.__r3f)!=null&&E.attach)RO(p,_,_.__r3f.attach);else if(_.isObject3D&&p.isObject3D){_.parent=p,_.dispatchEvent({type:"added"});const M=p.children.filter(L=>L!==_),I=M.indexOf(v);p.children=[...M.slice(0,I),_,...M.slice(I)],b=!0}b||(C=p.__r3f)==null||C.objects.push(_),_.__r3f||dS(_,{}),_.__r3f.parent=p,hN(_),pS(_)}}function o(p,_,v=!1){p&&[...p].forEach(b=>l(_,b,v))}function l(p,_,v){if(_){var b,E,C;if(_.__r3f&&(_.__r3f.parent=null),(b=p.__r3f)!=null&&b.objects&&(p.__r3f.objects=p.__r3f.objects.filter(P=>P!==_)),(E=_.__r3f)!=null&&E.attach)vH(p,_,_.__r3f.attach);else if(_.isObject3D&&p.isObject3D){var M;p.remove(_),(M=_.__r3f)!=null&&M.root&&Txe(_.__r3f.root,_)}const L=(C=_.__r3f)==null?void 0:C.primitive,O=v===void 0?_.dispose!==null&&!L:v;if(!L){var I;o((I=_.__r3f)==null?void 0:I.objects,_,O),o(_.children,_,O)}_.__r3f&&(delete _.__r3f.root,delete _.__r3f.objects,delete _.__r3f.handlers,delete _.__r3f.memoizedProps,L||delete _.__r3f),O&&_.dispose&&_.type!=="Scene"&&TI.exports.unstable_scheduleCallback(TI.exports.unstable_IdlePriority,()=>{try{_.dispose()}catch{}}),pS(p)}}function u(p,_,v,b){var E;const C=(E=p.__r3f)==null?void 0:E.parent;if(!C)return;const M=t(_,v,p.__r3f.root);if(p.children){for(const I of p.children)I.__r3f&&i(M,I);p.children=p.children.filter(I=>!I.__r3f)}p.__r3f.objects.forEach(I=>i(M,I)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||l(C,p),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),i(C,M),M.raycast&&M.__r3f.eventCount&&M.__r3f.root.getState().internal.interaction.push(M),[b,b.alternate].forEach(I=>{I!==null&&(I.stateNode=M,I.ref&&(typeof I.ref=="function"?I.ref(M):I.ref.current=M))})}const d=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:lxe({createInstance:t,removeChild:l,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,_)=>{if(!_)return;const v=p.getState().scene;!v.__r3f||(v.__r3f.root=p,i(v,_))},removeChildFromContainer:(p,_)=>{!_||l(p.getState().scene,_)},insertInContainerBefore:(p,_,v)=>{if(!_||!v)return;const b=p.getState().scene;!b.__r3f||s(b,_,v)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var _;return!!((_=p==null?void 0:p.__r3f)!=null?_:{}).handlers},prepareUpdate(p,_,v,b){if(p.__r3f.primitive&&b.object&&b.object!==p)return[!0];{const{args:E=[],children:C,...M}=b,{args:I=[],children:L,...O}=v;if(!Array.isArray(E))throw new Error("R3F: the args prop must be an array!");if(E.some((B,z)=>B!==I[z]))return[!0];const P=gJ(p,M,O,!0);return P.changes.length?[!1,P]:null}},commitUpdate(p,[_,v],b,E,C,M){_?u(p,b,C,M):kO(p,v)},commitMount(p,_,v,b){var E;const C=(E=p.__r3f)!=null?E:{};p.raycast&&C.handlers&&C.eventCount&&p.__r3f.root.getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>dS(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var _;const{attach:v,parent:b}=(_=p.__r3f)!=null?_:{};v&&b&&vH(b,p,v),p.isObject3D&&(p.visible=!1),pS(p)},unhideInstance(p,_){var v;const{attach:b,parent:E}=(v=p.__r3f)!=null?v:{};b&&E&&RO(E,p,b),(p.isObject3D&&_.visible==null||_.visible)&&(p.visible=!0),pS(p)},createTextInstance:d,hideTextInstance:d,unhideTextInstance:d,getCurrentEventPriority:()=>e?e():a1.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Du.fun(performance.now)?performance.now:Du.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Du.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Du.fun(clearTimeout)?clearTimeout:void 0}),applyProps:kO}}var mH,gH;const cJ=()=>{var n;return(n=aF.ColorManagement)!=null?n:null},hJ=n=>n&&n.isOrthographicCamera,mxe=n=>n&&n.hasOwnProperty("current"),V$=typeof window<"u"&&((mH=window.document)!=null&&mH.createElement||((gH=window.navigator)==null?void 0:gH.product)==="ReactNative")?ge.useLayoutEffect:ge.useEffect;function dJ(n){const e=ge.useRef(n);return V$(()=>void(e.current=n),[n]),e}function gxe({set:n}){return V$(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class pJ extends ge.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}pJ.getDerivedStateFromError=()=>({error:!0});const fJ="__default",_H=new Map,_xe=n=>n&&!!n.memoized&&!!n.changes;function mJ(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const Px=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Du={obj:n=>n===Object(n)&&!Du.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Du.str(n)||Du.num(n))return n===e;const o=Du.obj(n);if(o&&i==="reference")return n===e;const l=Du.arr(n);if(l&&t==="reference")return n===e;if((l||o)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(o&&t==="shallow"&&i==="shallow"){for(u in s?e:n)if(!Du.equ(n[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:n)if(n[u]!==e[u])return!1;if(Du.und(u)){if(l&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function yxe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function dS(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function cN(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),s=i.pop();return t=i.reduce((o,l)=>o[l],n),{target:t,key:s}}else return{target:t,key:e}}const yH=/-\d+$/;function RO(n,e,t){if(Du.str(t)){if(yH.test(t)){const o=t.replace(yH,""),{target:l,key:u}=cN(n,o);Array.isArray(l[u])||(l[u]=[])}const{target:i,key:s}=cN(n,t);e.__r3f.previousAttach=i[s],i[s]=e}else e.__r3f.previousAttach=t(n,e)}function vH(n,e,t){var i,s;if(Du.str(t)){const{target:o,key:l}=cN(n,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function gJ(n,{children:e,key:t,ref:i,...s},{children:o,key:l,ref:u,...d}={},p=!1){var _;const v=(_=n==null?void 0:n.__r3f)!=null?_:{},b=Object.entries(s),E=[];if(p){const M=Object.keys(d);for(let I=0;I<M.length;I++)s.hasOwnProperty(M[I])||b.unshift([M[I],fJ+"remove"])}b.forEach(([M,I])=>{var L;if((L=n.__r3f)!=null&&L.primitive&&M==="object"||Du.equ(I,d[M]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(M))return E.push([M,I,!0,[]]);let O=[];M.includes("-")&&(O=M.split("-")),E.push([M,I,!1,O]);for(const P in s){const B=s[P];P.startsWith(`${M}-`)&&E.push([P,B,!1,P.split("-")])}});const C={...s};return v.memoizedProps&&v.memoizedProps.args&&(C.args=v.memoizedProps.args),v.memoizedProps&&v.memoizedProps.attach&&(C.attach=v.memoizedProps.attach),{memoized:C,changes:E}}function kO(n,e){var t,i,s;const o=(t=n.__r3f)!=null?t:{},l=o.root,u=(i=l==null||l.getState==null?void 0:l.getState())!=null?i:{},{memoized:d,changes:p}=_xe(e)?e:gJ(n,e),_=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=d);for(let v=0;v<p.length;v++){let[b,E,C,M]=p[v],I=n,L=I[b];if(M.length&&(L=M.reduce((O,P)=>O[P],n),!(L&&L.set))){const[O,...P]=M.reverse();I=P.reverse().reduce((B,z)=>B[z],n),b=O}if(E===fJ+"remove")if(I.constructor){let O=_H.get(I.constructor);O||(O=new I.constructor,_H.set(I.constructor,O)),E=O[b]}else E=0;if(C)E?o.handlers[b]=E:delete o.handlers[b],o.eventCount=Object.keys(o.handlers).length;else if(L&&L.set&&(L.copy||L instanceof m1)){if(Array.isArray(E))L.fromArray?L.fromArray(E):L.set(...E);else if(L.copy&&E&&E.constructor&&L.constructor===E.constructor)L.copy(E);else if(E!==void 0){const O=L instanceof Nn;!O&&L.setScalar?L.setScalar(E):L instanceof m1&&E instanceof m1?L.mask=E.mask:L.set(E),!cJ()&&!u.linear&&O&&L.convertSRGBToLinear()}}else I[b]=E,!u.linear&&I[b]instanceof ac&&I[b].format===Ff&&I[b].type===tp&&(I[b].encoding=ps);pS(n)}if(o.parent&&u.internal&&n.raycast&&_!==o.eventCount){const v=u.internal.interaction.indexOf(n);v>-1&&u.internal.interaction.splice(v,1),o.eventCount&&u.internal.interaction.push(n)}return!(p.length===1&&p[0][0]==="onUpdate")&&p.length&&(s=n.__r3f)!=null&&s.parent&&hN(n),n}function pS(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function hN(n){n.onUpdate==null||n.onUpdate(n)}function vxe(n,e){n.manual||(hJ(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function kM(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function bxe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return a1.exports.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return a1.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return a1.exports.ContinuousEventPriority;default:return a1.exports.DefaultEventPriority}}function _J(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function Txe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{_J(t.capturedMap,e,i,s)})}function Sxe(n){function e(d){const{internal:p}=n.getState(),_=d.offsetX-p.initialClick[0],v=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(_*_+v*v))}function t(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(_=>{var v;return(v=p.__r3f)==null?void 0:v.handlers["onPointer"+_]}))}function i(d,p){const _=n.getState(),v=new Set,b=[],E=p?p(_.internal.interaction):_.internal.interaction;for(let L=0;L<E.length;L++){const O=Px(E[L]);O&&(O.raycaster.camera=void 0)}_.previousRoot||_.events.compute==null||_.events.compute(d,_);function C(L){const O=Px(L);if(!O||!O.events.enabled||O.raycaster.camera===null)return[];if(O.raycaster.camera===void 0){var P;O.events.compute==null||O.events.compute(d,O,(P=O.previousRoot)==null?void 0:P.getState()),O.raycaster.camera===void 0&&(O.raycaster.camera=null)}return O.raycaster.camera?O.raycaster.intersectObject(L,!0):[]}let M=E.flatMap(C).sort((L,O)=>{const P=Px(L.object),B=Px(O.object);return!P||!B?L.distance-O.distance:B.events.priority-P.events.priority||L.distance-O.distance}).filter(L=>{const O=kM(L);return v.has(O)?!1:(v.add(O),!0)});_.events.filter&&(M=_.events.filter(M,_));for(const L of M){let O=L.object;for(;O;){var I;(I=O.__r3f)!=null&&I.eventCount&&b.push({...L,eventObject:O}),O=O.parent}}if("pointerId"in d&&_.internal.capturedMap.has(d.pointerId))for(let L of _.internal.capturedMap.get(d.pointerId).values())v.has(kM(L.intersection))||b.push(L.intersection);return b}function s(d,p,_,v){const b=n.getState();if(d.length){const E={stopped:!1};for(const C of d){const M=Px(C.object)||b,{raycaster:I,pointer:L,camera:O,internal:P}=M,B=new Me(L.x,L.y,0).unproject(O),z=ae=>{var J,te;return(J=(te=P.capturedMap.get(ae))==null?void 0:te.has(C.eventObject))!=null?J:!1},G=ae=>{const J={intersection:C,target:p.target};P.capturedMap.has(ae)?P.capturedMap.get(ae).set(C.eventObject,J):P.capturedMap.set(ae,new Map([[C.eventObject,J]])),p.target.setPointerCapture(ae)},j=ae=>{const J=P.capturedMap.get(ae);J&&_J(P.capturedMap,C.eventObject,J,ae)};let H={};for(let ae in p){let J=p[ae];typeof J!="function"&&(H[ae]=J)}let Z={...C,...H,pointer:L,intersections:d,stopped:E.stopped,delta:_,unprojectedPoint:B,ray:I.ray,camera:O,stopPropagation(){const ae="pointerId"in p&&P.capturedMap.get(p.pointerId);if((!ae||ae.has(C.eventObject))&&(Z.stopped=E.stopped=!0,P.hovered.size&&Array.from(P.hovered.values()).find(J=>J.eventObject===C.eventObject))){const J=d.slice(0,d.indexOf(C));o([...J,C])}},target:{hasPointerCapture:z,setPointerCapture:G,releasePointerCapture:j},currentTarget:{hasPointerCapture:z,setPointerCapture:G,releasePointerCapture:j},nativeEvent:p};if(v(Z),E.stopped===!0)break}}return d}function o(d){const{internal:p}=n.getState();for(const _ of p.hovered.values())if(!d.length||!d.find(v=>v.object===_.object&&v.index===_.index&&v.instanceId===_.instanceId)){const v=_.eventObject.__r3f,b=v==null?void 0:v.handlers;if(p.hovered.delete(kM(_)),v!=null&&v.eventCount){const E={..._,intersections:d};b.onPointerOut==null||b.onPointerOut(E),b.onPointerLeave==null||b.onPointerLeave(E)}}}function l(d,p){for(let _=0;_<p.length;_++){const v=p[_].__r3f;v==null||v.handlers.onPointerMissed==null||v.handlers.onPointerMissed(d)}}function u(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return p=>{const{internal:_}=n.getState();"pointerId"in p&&_.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{_.capturedMap.has(p.pointerId)&&(_.capturedMap.delete(p.pointerId),o([]))})}}return function(p){const{onPointerMissed:_,internal:v}=n.getState();v.lastEvent.current=p;const b=d==="onPointerMove",E=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",C=i(p,b?t:void 0),M=E?e(p):0;d==="onPointerDown"&&(v.initialClick=[p.offsetX,p.offsetY],v.initialHits=C.map(L=>L.eventObject)),E&&!C.length&&M<=2&&(l(p,v.interaction),_&&_(p)),b&&o(C);function I(L){const O=L.eventObject,P=O.__r3f,B=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(b){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const z=kM(L),G=v.hovered.get(z);G?G.stopped&&L.stopPropagation():(v.hovered.set(z,L),B.onPointerOver==null||B.onPointerOver(L),B.onPointerEnter==null||B.onPointerEnter(L))}B.onPointerMove==null||B.onPointerMove(L)}else{const z=B[d];z?(!E||v.initialHits.includes(O))&&(l(p,v.interaction.filter(G=>!v.initialHits.includes(G))),z(L)):E&&v.initialHits.includes(O)&&l(p,v.interaction.filter(G=>!v.initialHits.includes(G)))}}s(C,p,M,I)}}return{handlePointer:u}}const yJ=n=>!!(n!=null&&n.render),vJ=ge.createContext(null),Exe=(n,e)=>{const t=sxe((u,d)=>{const p=new Me,_=new Me,v=new Me;function b(I=d().camera,L=_,O=d().size){const{width:P,height:B,top:z,left:G}=O,j=P/B;L instanceof Me?v.copy(L):v.set(...L);const H=I.getWorldPosition(p).distanceTo(v);if(hJ(I))return{width:P/I.zoom,height:B/I.zoom,top:z,left:G,factor:1,distance:H,aspect:j};{const Z=I.fov*Math.PI/180,ae=2*Math.tan(Z/2)*H,J=ae*(P/B);return{width:J,height:ae,top:z,left:G,factor:P/J,distance:H,aspect:j}}}let E;const C=I=>u(L=>({performance:{...L.performance,current:I}})),M=new Vt;return{set:u,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(I=1)=>n(d(),I),advance:(I,L)=>e(I,L,d()),legacy:!1,linear:!1,flat:!1,scene:dS(new u$),controls:null,clock:new nF,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const I=d();E&&clearTimeout(E),I.performance.current!==I.performance.min&&C(I.performance.min),E=setTimeout(()=>C(d().performance.max),I.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:b},setEvents:I=>u(L=>({...L,events:{...L.events,...I}})),setSize:(I,L,O,P,B)=>{const z=d().camera,G={width:I,height:L,top:P||0,left:B||0,updateStyle:O};u(j=>({size:G,viewport:{...j.viewport,...b(z,_,G)}}))},setDpr:I=>u(L=>{const O=mJ(I);return{viewport:{...L.viewport,dpr:O,initialDpr:L.viewport.initialDpr||O}}}),setFrameloop:(I="always")=>{const L=d().clock;L.stop(),L.elapsedTime=0,I!=="never"&&(L.start(),L.elapsedTime=0),u(()=>({frameloop:I}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:ge.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(I,L,O)=>{const P=d().internal;return P.priority=P.priority+(L>0?1:0),P.subscribers.push({ref:I,priority:L,store:O}),P.subscribers=P.subscribers.sort((B,z)=>B.priority-z.priority),()=>{const B=d().internal;B!=null&&B.subscribers&&(B.priority=B.priority-(L>0?1:0),B.subscribers=B.subscribers.filter(z=>z.ref!==I))}}}}}),i=t.getState();let s=i.size,o=i.viewport.dpr,l=i.camera;return t.subscribe(()=>{const{camera:u,size:d,viewport:p,gl:_,set:v}=t.getState();if(d!==s||p.dpr!==o){var b;s=d,o=p.dpr,vxe(u,d),_.setPixelRatio(p.dpr);const E=(b=d.updateStyle)!=null?b:typeof HTMLCanvasElement<"u"&&_.domElement instanceof HTMLCanvasElement;_.setSize(d.width,d.height,E)}u!==l&&(l=u,v(E=>({viewport:{...E.viewport,...E.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>n(u)),t};let OM,xxe=new Set,wxe=new Set,$xe=new Set;function OO(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Fx(n,e){switch(n){case"before":return OO(xxe,e);case"after":return OO(wxe,e);case"tail":return OO($xe,e)}}let LO,DO;function NO(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),LO=e.internal.subscribers,OM=0;OM<LO.length;OM++)DO=LO[OM],DO.ref.current(DO.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Cxe(n){let e=!1,t,i,s;function o(d){i=requestAnimationFrame(o),e=!0,t=0,Fx("before",d);for(const _ of n.values()){var p;s=_.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((p=s.gl.xr)!=null&&p.isPresenting)&&(t+=NO(d,s))}if(Fx("after",d),t===0)return Fx("tail",d),e=!1,cancelAnimationFrame(i)}function l(d,p=1){var _;if(!d)return n.forEach(v=>l(v.store.getState()),p);(_=d.gl.xr)!=null&&_.isPresenting||!d.internal.active||d.frameloop==="never"||(d.internal.frames=Math.min(60,d.internal.frames+p),e||(e=!0,requestAnimationFrame(o)))}function u(d,p=!0,_,v){if(p&&Fx("before",d),_)NO(d,_,v);else for(const b of n.values())NO(d,b.store.getState());p&&Fx("after",d)}return{loop:o,invalidate:l,advance:u}}function bJ(){const n=ge.useContext(vJ);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function qd(n=t=>t,e){return bJ()(n,e)}function Fm(n,e=0){const t=bJ(),i=t.getState().internal.subscribe,s=dJ(n);return V$(()=>i(s,e,t),[e,i,t]),null}const TE=new Map,{invalidate:bH,advance:TH}=Cxe(TE),{reconciler:SI,applyProps:LM}=fxe(TE,bxe),lS={objects:"shallow",strict:!1},Mxe=(n,e)=>{const t=typeof n=="function"?n(e):n;return yJ(t)?t:new PP({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Axe(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:s,left:o}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function Ixe(n){const e=TE.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,o=i||Exe(bH,TH),l=t||SI.createContainer(o,a1.exports.ConcurrentRoot,null,!1,null,"",s,null);e||TE.set(n,{fiber:l,store:o});let u,d=!1,p;return{configure(_={}){let{gl:v,size:b,events:E,onCreated:C,shadows:M=!1,linear:I=!1,flat:L=!1,legacy:O=!1,orthographic:P=!1,frameloop:B="always",dpr:z=[1,2],performance:G,raycaster:j,camera:H,onPointerMissed:Z}=_,ae=o.getState(),J=ae.gl;ae.gl||ae.set({gl:J=Mxe(v,n)});let te=ae.raycaster;te||ae.set({raycaster:te=new sF});const{params:he,...le}=j||{};if(Du.equ(le,te,lS)||LM(te,{...le}),Du.equ(he,te.params,lS)||LM(te,{params:{...te.params,...he}}),!ae.camera||ae.camera===p&&!Du.equ(p,H,lS)){p=H;const se=H instanceof BE,pe=se?H:P?new J0(0,0,0,0,.1,1e3):new Ja(75,0,.1,1e3);se||(pe.position.z=5,H&&LM(pe,H),!ae.camera&&!(H!=null&&H.rotation)&&pe.lookAt(0,0,0)),ae.set({camera:pe})}if(!ae.xr){const se=(Fe,Re)=>{const qe=o.getState();qe.frameloop!=="never"&&TH(Fe,!0,qe,Re)},pe=()=>{const Fe=o.getState();Fe.gl.xr.enabled=Fe.gl.xr.isPresenting,Fe.gl.xr.setAnimationLoop(Fe.gl.xr.isPresenting?se:null),Fe.gl.xr.isPresenting||bH(Fe)},Se={connect(){const Fe=o.getState().gl;Fe.xr.addEventListener("sessionstart",pe),Fe.xr.addEventListener("sessionend",pe)},disconnect(){const Fe=o.getState().gl;Fe.xr.removeEventListener("sessionstart",pe),Fe.xr.removeEventListener("sessionend",pe)}};J.xr&&Se.connect(),ae.set({xr:Se})}if(J.shadowMap){const se=J.shadowMap.enabled,pe=J.shadowMap.type;if(J.shadowMap.enabled=!!M,Du.boo(M))J.shadowMap.type=yw;else if(Du.str(M)){var ce;const Se={basic:fY,percentage:UR,soft:yw,variance:n1};J.shadowMap.type=(ce=Se[M])!=null?ce:yw}else Du.obj(M)&&Object.assign(J.shadowMap,M);(se!==J.shadowMap.enabled||pe!==J.shadowMap.type)&&(J.shadowMap.needsUpdate=!0)}const be=cJ();be&&("enabled"in be?be.enabled=!O:"legacyMode"in be&&(be.legacyMode=O));const $e=I?mg:ps,q=L?Qg:MP;J.outputEncoding!==$e&&(J.outputEncoding=$e),J.toneMapping!==q&&(J.toneMapping=q),ae.legacy!==O&&ae.set(()=>({legacy:O})),ae.linear!==I&&ae.set(()=>({linear:I})),ae.flat!==L&&ae.set(()=>({flat:L})),v&&!Du.fun(v)&&!yJ(v)&&!Du.equ(v,J,lS)&&LM(J,v),E&&!ae.events.handlers&&ae.set({events:E(o)});const oe=Axe(n,b);return Du.equ(oe,ae.size,lS)||ae.setSize(oe.width,oe.height,oe.updateStyle,oe.top,oe.left),z&&ae.viewport.dpr!==mJ(z)&&ae.setDpr(z),ae.frameloop!==B&&ae.setFrameloop(B),ae.onPointerMissed||ae.set({onPointerMissed:Z}),G&&!Du.equ(G,ae.performance,lS)&&ae.set(se=>({performance:{...se.performance,...G}})),u=C,d=!0,this},render(_){return d||this.configure(),SI.updateContainer(an(Rxe,{store:o,children:_,onCreated:u,rootElement:n}),l,null,()=>{}),o},unmount(){TJ(n)}}}function Rxe({store:n,children:e,onCreated:t,rootElement:i}){return V$(()=>{const s=n.getState();s.set(o=>({internal:{...o.internal,active:!0}})),t&&t(s),n.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),ge.createElement(vJ.Provider,{value:n},e)}function TJ(n,e){const t=TE.get(n),i=t==null?void 0:t.fiber;if(i){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),SI.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var o,l,u,d;s.events.disconnect==null||s.events.disconnect(),(o=s.gl)==null||(l=o.renderLists)==null||l.dispose==null||l.dispose(),(u=s.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(d=s.gl)!=null&&d.xr&&s.xr.disconnect(),yxe(s),TE.delete(n),e&&e(n)}catch{}},500)})}}SI.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ge.version});function dN(){return dN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},dN.apply(this,arguments)}function pN(n,e,t){var i,s,o,l,u;e==null&&(e=100);function d(){var _=Date.now()-l;_<e&&_>=0?i=setTimeout(d,e-_):(i=null,t||(u=n.apply(o,s),o=s=null))}var p=function(){o=this,s=arguments,l=Date.now();var _=t&&!i;return i||(i=setTimeout(d,e)),_&&(u=n.apply(o,s),o=s=null),u};return p.clear=function(){i&&(clearTimeout(i),i=null)},p.flush=function(){i&&(u=n.apply(o,s),o=s=null,clearTimeout(i),i=null)},p}pN.debounce=pN;var SH=pN;function kxe(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:s}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const o=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[l,u]=ge.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),d=ge.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l}),p=e?typeof e=="number"?e:e.scroll:null,_=e?typeof e=="number"?e:e.resize:null,v=ge.useRef(!1);ge.useEffect(()=>(v.current=!0,()=>void(v.current=!1)));const[b,E,C]=ge.useMemo(()=>{const O=()=>{if(!d.current.element)return;const{left:P,top:B,width:z,height:G,bottom:j,right:H,x:Z,y:ae}=d.current.element.getBoundingClientRect(),J={left:P,top:B,width:z,height:G,bottom:j,right:H,x:Z,y:ae};d.current.element instanceof HTMLElement&&s&&(J.height=d.current.element.offsetHeight,J.width=d.current.element.offsetWidth),Object.freeze(J),v.current&&!Nxe(d.current.lastBounds,J)&&u(d.current.lastBounds=J)};return[O,_?SH(O,_):O,p?SH(O,p):O]},[u,s,p,_]);function M(){d.current.scrollContainers&&(d.current.scrollContainers.forEach(O=>O.removeEventListener("scroll",C,!0)),d.current.scrollContainers=null),d.current.resizeObserver&&(d.current.resizeObserver.disconnect(),d.current.resizeObserver=null)}function I(){!d.current.element||(d.current.resizeObserver=new o(C),d.current.resizeObserver.observe(d.current.element),t&&d.current.scrollContainers&&d.current.scrollContainers.forEach(O=>O.addEventListener("scroll",C,{capture:!0,passive:!0})))}const L=O=>{!O||O===d.current.element||(M(),d.current.element=O,d.current.scrollContainers=SJ(O),I())};return Lxe(C,!!t),Oxe(E),ge.useEffect(()=>{M(),I()},[t,C,E]),ge.useEffect(()=>M,[]),[L,l,b]}function Oxe(n){ge.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Lxe(n,e){ge.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function SJ(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:s}=window.getComputedStyle(n);return[t,i,s].some(o=>o==="auto"||o==="scroll")&&e.push(n),[...e,...SJ(n.parentElement)]}const Dxe=["x","y","top","bottom","left","right","width","height"],Nxe=(n,e)=>Dxe.every(t=>n[t]===e[t]);var Bxe=Object.defineProperty,Pxe=Object.defineProperties,Fxe=Object.getOwnPropertyDescriptors,EH=Object.getOwnPropertySymbols,zxe=Object.prototype.hasOwnProperty,Uxe=Object.prototype.propertyIsEnumerable,xH=(n,e,t)=>e in n?Bxe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wH=(n,e)=>{for(var t in e||(e={}))zxe.call(e,t)&&xH(n,t,e[t]);if(EH)for(var t of EH(e))Uxe.call(e,t)&&xH(n,t,e[t]);return n},Hxe=(n,e)=>Pxe(n,Fxe(e)),$H;function EJ(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const s=EJ(i,e,t);if(s)return s;i=e?null:i.sibling}}function xJ(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const lF=xJ(ge.createContext(null));class wJ extends ge.Component{render(){return an(lF.Provider,{value:this._reactInternals,children:this.props.children})}}const{ReactCurrentOwner:CH,ReactCurrentDispatcher:MH}=($H=ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)!=null?$H:{};function Gxe(){const n=ge.useContext(lF),e=ge.useId();return ge.useMemo(()=>{var t;return(t=CH==null?void 0:CH.current)!=null?t:EJ(n,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[n,e])}function Wxe(){var n,e;const t=Gxe(),[i]=ge.useState(()=>new Map);i.clear();let s=t;for(;s;){const o=(n=s.type)==null?void 0:n._context;o&&o!==lF&&!i.has(o)&&i.set(o,(e=MH==null?void 0:MH.current)==null?void 0:e.readContext(xJ(o))),s=s.return}return ge.useMemo(()=>Array.from(i.keys()).reduce((o,l)=>u=>ge.createElement(o,null,ge.createElement(l.Provider,Hxe(wH({},u),{value:i.get(l)}))),o=>an(wJ,{...wH({},o)})),[i])}const BO={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Vxe(n){const{handlePointer:e}=Sxe(n);return{priority:1,enabled:!0,compute(t,i,s){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(BO).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:s}=n.getState();(t=s.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{var i;const{set:s,events:o}=n.getState();o.disconnect==null||o.disconnect(),s(l=>({events:{...l.events,connected:t}})),Object.entries((i=o.handlers)!=null?i:[]).forEach(([l,u])=>{const[d,p]=BO[l];t.addEventListener(d,u,{passive:p})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([o,l])=>{if(i&&i.connected instanceof HTMLElement){const[u]=BO[o];i.connected.removeEventListener(u,l)}}),t(o=>({events:{...o.events,connected:void 0}}))}}}}const jxe=ge.forwardRef(function({children:n,fallback:e,resize:t,style:i,gl:s,events:o=Vxe,eventSource:l,eventPrefix:u,shadows:d,linear:p,flat:_,legacy:v,orthographic:b,frameloop:E,dpr:C,performance:M,raycaster:I,camera:L,onPointerMissed:O,onCreated:P,...B},z){ge.useMemo(()=>pxe(txe),[]);const G=Wxe(),[j,H]=kxe({scroll:!0,debounce:{scroll:50,resize:0},...t}),Z=ge.useRef(null),ae=ge.useRef(null);ge.useImperativeHandle(z,()=>Z.current);const J=dJ(O),[te,he]=ge.useState(!1),[le,ce]=ge.useState(!1);if(te)throw te;if(le)throw le;const be=ge.useRef(null);return V$(()=>{const $e=Z.current;H.width>0&&H.height>0&&$e&&(be.current||(be.current=Ixe($e)),be.current.configure({gl:s,events:o,shadows:d,linear:p,flat:_,legacy:v,orthographic:b,frameloop:E,dpr:C,performance:M,raycaster:I,camera:L,size:H,onPointerMissed:(...q)=>J.current==null?void 0:J.current(...q),onCreated:q=>{q.events.connect==null||q.events.connect(l?mxe(l)?l.current:l:ae.current),u&&q.setEvents({compute:(oe,se)=>{const pe=oe[u+"X"],Se=oe[u+"Y"];se.pointer.set(pe/se.size.width*2-1,-(Se/se.size.height)*2+1),se.raycaster.setFromCamera(se.pointer,se.camera)}}),P==null||P(q)}}),be.current.render(an(G,{children:an(pJ,{set:ce,children:an(ge.Suspense,{fallback:an(gxe,{set:he}),children:n})})})))}),ge.useEffect(()=>{const $e=Z.current;if($e)return()=>TJ($e)},[]),an("div",{ref:ae,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:l?"none":"auto",...i},...B,children:an("div",{ref:j,style:{width:"100%",height:"100%"},children:an("canvas",{ref:Z,style:{display:"block"},children:e})})})}),Xxe=ge.forwardRef(function(n,e){return an(wJ,{children:an(jxe,{...n,ref:e})})});var $J={exports:{}},Lf={},AH={exports:{}},IH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RH;function Yxe(){return RH||(RH=1,function(n){function e(q,oe){var se=q.length;q.push(oe);e:for(;0<se;){var pe=se-1>>>1,Se=q[pe];if(0<s(Se,oe))q[pe]=oe,q[se]=Se,se=pe;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var oe=q[0],se=q.pop();if(se!==oe){q[0]=se;e:for(var pe=0,Se=q.length,Fe=Se>>>1;pe<Fe;){var Re=2*(pe+1)-1,qe=q[Re],Ne=Re+1,it=q[Ne];if(0>s(qe,se))Ne<Se&&0>s(it,qe)?(q[pe]=it,q[Ne]=se,pe=Ne):(q[pe]=qe,q[Re]=se,pe=Re);else if(Ne<Se&&0>s(it,se))q[pe]=it,q[Ne]=se,pe=Ne;else break e}}return oe}function s(q,oe){var se=q.sortIndex-oe.sortIndex;return se!==0?se:q.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],_=1,v=null,b=3,E=!1,C=!1,M=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(q){for(var oe=t(p);oe!==null;){if(oe.callback===null)i(p);else if(oe.startTime<=q)i(p),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=t(p)}}function B(q){if(M=!1,P(q),!C)if(t(d)!==null)C=!0,be(z);else{var oe=t(p);oe!==null&&$e(B,oe.startTime-q)}}function z(q,oe){C=!1,M&&(M=!1,L(H),H=-1),E=!0;var se=b;try{for(P(oe),v=t(d);v!==null&&(!(v.expirationTime>oe)||q&&!J());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,b=v.priorityLevel;var Se=pe(v.expirationTime<=oe);oe=n.unstable_now(),typeof Se=="function"?v.callback=Se:v===t(d)&&i(d),P(oe)}else i(d);v=t(d)}if(v!==null)var Fe=!0;else{var Re=t(p);Re!==null&&$e(B,Re.startTime-oe),Fe=!1}return Fe}finally{v=null,b=se,E=!1}}var G=!1,j=null,H=-1,Z=5,ae=-1;function J(){return!(n.unstable_now()-ae<Z)}function te(){if(j!==null){var q=n.unstable_now();ae=q;var oe=!0;try{oe=j(!0,q)}finally{oe?he():(G=!1,j=null)}}else G=!1}var he;if(typeof O=="function")he=function(){O(te)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ce=le.port2;le.port1.onmessage=te,he=function(){ce.postMessage(null)}}else he=function(){I(te,0)};function be(q){j=q,G||(G=!0,he())}function $e(q,oe){H=I(function(){q(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){C||E||(C=!0,be(z))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(q){switch(b){case 1:case 2:case 3:var oe=3;break;default:oe=b}var se=b;b=oe;try{return q()}finally{b=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,oe){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=b;b=q;try{return oe()}finally{b=se}},n.unstable_scheduleCallback=function(q,oe,se){var pe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?pe+se:pe):se=pe,q){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=se+Se,q={id:_++,callback:oe,priorityLevel:q,startTime:se,expirationTime:Se,sortIndex:-1},se>pe?(q.sortIndex=se,e(p,q),t(d)===null&&q===t(p)&&(M?(L(H),H=-1):M=!0,$e(B,se-pe))):(q.sortIndex=Se,e(d,q),C||E||(C=!0,be(z))),q},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(q){var oe=b;return function(){var se=b;b=oe;try{return q.apply(this,arguments)}finally{b=se}}}}(IH)),IH}var kH;function Kxe(){return kH||(kH=1,function(n){n.exports=Yxe()}(AH)),AH.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OH;function Jxe(){if(OH)return Lf;OH=1;var n=Vr,e=Kxe();function t(y){for(var T="https://reactjs.org/docs/error-decoder.html?invariant="+y,R=1;R<arguments.length;R++)T+="&args[]="+encodeURIComponent(arguments[R]);return"Minified React error #"+y+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function o(y,T){l(y,T),l(y+"Capture",T)}function l(y,T){for(s[y]=T,y=0;y<T.length;y++)i.add(T[y])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},v={};function b(y){return d.call(v,y)?!0:d.call(_,y)?!1:p.test(y)?v[y]=!0:(_[y]=!0,!1)}function E(y,T,R,F){if(R!==null&&R.type===0)return!1;switch(typeof T){case"function":case"symbol":return!0;case"boolean":return F?!1:R!==null?!R.acceptsBooleans:(y=y.toLowerCase().slice(0,5),y!=="data-"&&y!=="aria-");default:return!1}}function C(y,T,R,F){if(T===null||typeof T>"u"||E(y,T,R,F))return!0;if(F)return!1;if(R!==null)switch(R.type){case 3:return!T;case 4:return T===!1;case 5:return isNaN(T);case 6:return isNaN(T)||1>T}return!1}function M(y,T,R,F,X,ee,ve){this.acceptsBooleans=T===2||T===3||T===4,this.attributeName=F,this.attributeNamespace=X,this.mustUseProperty=R,this.propertyName=y,this.type=T,this.sanitizeURL=ee,this.removeEmptyString=ve}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(y){I[y]=new M(y,0,!1,y,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(y){var T=y[0];I[T]=new M(T,1,!1,y[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(y){I[y]=new M(y,2,!1,y.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(y){I[y]=new M(y,2,!1,y,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(y){I[y]=new M(y,3,!1,y.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(y){I[y]=new M(y,3,!0,y,null,!1,!1)}),["capture","download"].forEach(function(y){I[y]=new M(y,4,!1,y,null,!1,!1)}),["cols","rows","size","span"].forEach(function(y){I[y]=new M(y,6,!1,y,null,!1,!1)}),["rowSpan","start"].forEach(function(y){I[y]=new M(y,5,!1,y.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function O(y){return y[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(y){var T=y.replace(L,O);I[T]=new M(T,1,!1,y,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(y){var T=y.replace(L,O);I[T]=new M(T,1,!1,y,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(y){var T=y.replace(L,O);I[T]=new M(T,1,!1,y,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(y){I[y]=new M(y,1,!1,y.toLowerCase(),null,!1,!1)}),I.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(y){I[y]=new M(y,1,!1,y.toLowerCase(),null,!0,!0)});function P(y,T,R,F){var X=I.hasOwnProperty(T)?I[T]:null;(X!==null?X.type!==0:F||!(2<T.length)||T[0]!=="o"&&T[0]!=="O"||T[1]!=="n"&&T[1]!=="N")&&(C(T,R,X,F)&&(R=null),F||X===null?b(T)&&(R===null?y.removeAttribute(T):y.setAttribute(T,""+R)):X.mustUseProperty?y[X.propertyName]=R===null?X.type===3?!1:"":R:(T=X.attributeName,F=X.attributeNamespace,R===null?y.removeAttribute(T):(X=X.type,R=X===3||X===4&&R===!0?"":""+R,F?y.setAttributeNS(F,T,R):y.setAttribute(T,R))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),G=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),ae=Symbol.for("react.provider"),J=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),q=Symbol.iterator;function oe(y){return y===null||typeof y!="object"?null:(y=q&&y[q]||y["@@iterator"],typeof y=="function"?y:null)}var se=Object.assign,pe;function Se(y){if(pe===void 0)try{throw Error()}catch(R){var T=R.stack.trim().match(/\n( *(at )?)/);pe=T&&T[1]||""}return`
`+pe+y}var Fe=!1;function Re(y,T){if(!y||Fe)return"";Fe=!0;var R=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(T)if(T=function(){throw Error()},Object.defineProperty(T.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(T,[])}catch(Ot){var F=Ot}Reflect.construct(y,[],T)}else{try{T.call()}catch(Ot){F=Ot}y.call(T.prototype)}else{try{throw Error()}catch(Ot){F=Ot}y()}}catch(Ot){if(Ot&&F&&typeof Ot.stack=="string"){for(var X=Ot.stack.split(`
`),ee=F.stack.split(`
`),ve=X.length-1,Xe=ee.length-1;1<=ve&&0<=Xe&&X[ve]!==ee[Xe];)Xe--;for(;1<=ve&&0<=Xe;ve--,Xe--)if(X[ve]!==ee[Xe]){if(ve!==1||Xe!==1)do if(ve--,Xe--,0>Xe||X[ve]!==ee[Xe]){var at=`
`+X[ve].replace(" at new "," at ");return y.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",y.displayName)),at}while(1<=ve&&0<=Xe);break}}}finally{Fe=!1,Error.prepareStackTrace=R}return(y=y?y.displayName||y.name:"")?Se(y):""}function qe(y){switch(y.tag){case 5:return Se(y.type);case 16:return Se("Lazy");case 13:return Se("Suspense");case 19:return Se("SuspenseList");case 0:case 2:case 15:return y=Re(y.type,!1),y;case 11:return y=Re(y.type.render,!1),y;case 1:return y=Re(y.type,!0),y;default:return""}}function Ne(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case j:return"Fragment";case G:return"Portal";case Z:return"Profiler";case H:return"StrictMode";case he:return"Suspense";case le:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case J:return(y.displayName||"Context")+".Consumer";case ae:return(y._context.displayName||"Context")+".Provider";case te:var T=y.render;return y=y.displayName,y||(y=T.displayName||T.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case ce:return T=y.displayName||null,T!==null?T:Ne(y.type)||"Memo";case be:T=y._payload,y=y._init;try{return Ne(y(T))}catch{}}return null}function it(y){var T=y.type;switch(y.tag){case 24:return"Cache";case 9:return(T.displayName||"Context")+".Consumer";case 10:return(T._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=T.render,y=y.displayName||y.name||"",T.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return T;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(T);case 8:return T===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof T=="function")return T.displayName||T.name||null;if(typeof T=="string")return T}return null}function st(y){switch(typeof y){case"boolean":case"number":case"string":case"undefined":return y;case"object":return y;default:return""}}function pt(y){var T=y.type;return(y=y.nodeName)&&y.toLowerCase()==="input"&&(T==="checkbox"||T==="radio")}function dt(y){var T=pt(y)?"checked":"value",R=Object.getOwnPropertyDescriptor(y.constructor.prototype,T),F=""+y[T];if(!y.hasOwnProperty(T)&&typeof R<"u"&&typeof R.get=="function"&&typeof R.set=="function"){var X=R.get,ee=R.set;return Object.defineProperty(y,T,{configurable:!0,get:function(){return X.call(this)},set:function(ve){F=""+ve,ee.call(this,ve)}}),Object.defineProperty(y,T,{enumerable:R.enumerable}),{getValue:function(){return F},setValue:function(ve){F=""+ve},stopTracking:function(){y._valueTracker=null,delete y[T]}}}}function Ue(y){y._valueTracker||(y._valueTracker=dt(y))}function Ae(y){if(!y)return!1;var T=y._valueTracker;if(!T)return!0;var R=T.getValue(),F="";return y&&(F=pt(y)?y.checked?"true":"false":y.value),y=F,y!==R?(T.setValue(y),!0):!1}function je(y){if(y=y||(typeof document<"u"?document:void 0),typeof y>"u")return null;try{return y.activeElement||y.body}catch{return y.body}}function nt(y,T){var R=T.checked;return se({},T,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:R??y._wrapperState.initialChecked})}function tt(y,T){var R=T.defaultValue==null?"":T.defaultValue,F=T.checked!=null?T.checked:T.defaultChecked;R=st(T.value!=null?T.value:R),y._wrapperState={initialChecked:F,initialValue:R,controlled:T.type==="checkbox"||T.type==="radio"?T.checked!=null:T.value!=null}}function Dt(y,T){T=T.checked,T!=null&&P(y,"checked",T,!1)}function Rt(y,T){Dt(y,T);var R=st(T.value),F=T.type;if(R!=null)F==="number"?(R===0&&y.value===""||y.value!=R)&&(y.value=""+R):y.value!==""+R&&(y.value=""+R);else if(F==="submit"||F==="reset"){y.removeAttribute("value");return}T.hasOwnProperty("value")?Ct(y,T.type,R):T.hasOwnProperty("defaultValue")&&Ct(y,T.type,st(T.defaultValue)),T.checked==null&&T.defaultChecked!=null&&(y.defaultChecked=!!T.defaultChecked)}function yt(y,T,R){if(T.hasOwnProperty("value")||T.hasOwnProperty("defaultValue")){var F=T.type;if(!(F!=="submit"&&F!=="reset"||T.value!==void 0&&T.value!==null))return;T=""+y._wrapperState.initialValue,R||T===y.value||(y.value=T),y.defaultValue=T}R=y.name,R!==""&&(y.name=""),y.defaultChecked=!!y._wrapperState.initialChecked,R!==""&&(y.name=R)}function Ct(y,T,R){(T!=="number"||je(y.ownerDocument)!==y)&&(R==null?y.defaultValue=""+y._wrapperState.initialValue:y.defaultValue!==""+R&&(y.defaultValue=""+R))}var Mt=Array.isArray;function mt(y,T,R,F){if(y=y.options,T){T={};for(var X=0;X<R.length;X++)T["$"+R[X]]=!0;for(R=0;R<y.length;R++)X=T.hasOwnProperty("$"+y[R].value),y[R].selected!==X&&(y[R].selected=X),X&&F&&(y[R].defaultSelected=!0)}else{for(R=""+st(R),T=null,X=0;X<y.length;X++){if(y[X].value===R){y[X].selected=!0,F&&(y[X].defaultSelected=!0);return}T!==null||y[X].disabled||(T=y[X])}T!==null&&(T.selected=!0)}}function xe(y,T){if(T.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},T,{value:void 0,defaultValue:void 0,children:""+y._wrapperState.initialValue})}function ie(y,T){var R=T.value;if(R==null){if(R=T.children,T=T.defaultValue,R!=null){if(T!=null)throw Error(t(92));if(Mt(R)){if(1<R.length)throw Error(t(93));R=R[0]}T=R}T==null&&(T=""),R=T}y._wrapperState={initialValue:st(R)}}function we(y,T){var R=st(T.value),F=st(T.defaultValue);R!=null&&(R=""+R,R!==y.value&&(y.value=R),T.defaultValue==null&&y.defaultValue!==R&&(y.defaultValue=R)),F!=null&&(y.defaultValue=""+F)}function ct(y){var T=y.textContent;T===y._wrapperState.initialValue&&T!==""&&T!==null&&(y.value=T)}function Tt(y){switch(y){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function At(y,T){return y==null||y==="http://www.w3.org/1999/xhtml"?Tt(T):y==="http://www.w3.org/2000/svg"&&T==="foreignObject"?"http://www.w3.org/1999/xhtml":y}var ft,Ke=function(y){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(T,R,F,X){MSApp.execUnsafeLocalFunction(function(){return y(T,R,F,X)})}:y}(function(y,T){if(y.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in y)y.innerHTML=T;else{for(ft=ft||document.createElement("div"),ft.innerHTML="<svg>"+T.valueOf().toString()+"</svg>",T=ft.firstChild;y.firstChild;)y.removeChild(y.firstChild);for(;T.firstChild;)y.appendChild(T.firstChild)}});function Oe(y,T){if(T){var R=y.firstChild;if(R&&R===y.lastChild&&R.nodeType===3){R.nodeValue=T;return}}y.textContent=T}var Q={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ne=["Webkit","ms","Moz","O"];Object.keys(Q).forEach(function(y){ne.forEach(function(T){T=T+y.charAt(0).toUpperCase()+y.substring(1),Q[T]=Q[y]})});function fe(y,T,R){return T==null||typeof T=="boolean"||T===""?"":R||typeof T!="number"||T===0||Q.hasOwnProperty(y)&&Q[y]?(""+T).trim():T+"px"}function Ie(y,T){y=y.style;for(var R in T)if(T.hasOwnProperty(R)){var F=R.indexOf("--")===0,X=fe(R,T[R],F);R==="float"&&(R="cssFloat"),F?y.setProperty(R,X):y[R]=X}}var Ye=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gt(y,T){if(T){if(Ye[y]&&(T.children!=null||T.dangerouslySetInnerHTML!=null))throw Error(t(137,y));if(T.dangerouslySetInnerHTML!=null){if(T.children!=null)throw Error(t(60));if(typeof T.dangerouslySetInnerHTML!="object"||!("__html"in T.dangerouslySetInnerHTML))throw Error(t(61))}if(T.style!=null&&typeof T.style!="object")throw Error(t(62))}}function He(y,T){if(y.indexOf("-")===-1)return typeof T.is=="string";switch(y){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zt=null;function _t(y){return y=y.target||y.srcElement||window,y.correspondingUseElement&&(y=y.correspondingUseElement),y.nodeType===3?y.parentNode:y}var Kt=null,Yt=null,Rn=null;function ii(y){if(y=$r(y)){if(typeof Kt!="function")throw Error(t(280));var T=y.stateNode;T&&(T=Lp(T),Kt(y.stateNode,y.type,T))}}function Dr(y){Yt?Rn?Rn.push(y):Rn=[y]:Yt=y}function Si(){if(Yt){var y=Yt,T=Rn;if(Rn=Yt=null,ii(y),T)for(y=0;y<T.length;y++)ii(T[y])}}function xr(y,T){return y(T)}function fr(){}var re=!1;function Te(y,T,R){if(re)return y(T,R);re=!0;try{return xr(y,T,R)}finally{re=!1,(Yt!==null||Rn!==null)&&(fr(),Si())}}function Ge(y,T){var R=y.stateNode;if(R===null)return null;var F=Lp(R);if(F===null)return null;R=F[T];e:switch(T){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(y=y.type,F=!(y==="button"||y==="input"||y==="select"||y==="textarea")),y=!F;break e;default:y=!1}if(y)return null;if(R&&typeof R!="function")throw Error(t(231,T,typeof R));return R}var ot=!1;if(u)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){ot=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch{ot=!1}function nn(y,T,R,F,X,ee,ve,Xe,at){var Ot=Array.prototype.slice.call(arguments,3);try{T.apply(R,Ot)}catch(qt){this.onError(qt)}}var On=!1,De=null,gt=!1,$t=null,vt={onError:function(y){On=!0,De=y}};function Wt(y,T,R,F,X,ee,ve,Xe,at){On=!1,De=null,nn.apply(vt,arguments)}function Un(y,T,R,F,X,ee,ve,Xe,at){if(Wt.apply(this,arguments),On){if(On){var Ot=De;On=!1,De=null}else throw Error(t(198));gt||(gt=!0,$t=Ot)}}function tr(y){var T=y,R=y;if(y.alternate)for(;T.return;)T=T.return;else{y=T;do T=y,T.flags&4098&&(R=T.return),y=T.return;while(y)}return T.tag===3?R:null}function mr(y){if(y.tag===13){var T=y.memoizedState;if(T===null&&(y=y.alternate,y!==null&&(T=y.memoizedState)),T!==null)return T.dehydrated}return null}function wr(y){if(tr(y)!==y)throw Error(t(188))}function si(y){var T=y.alternate;if(!T){if(T=tr(y),T===null)throw Error(t(188));return T!==y?null:y}for(var R=y,F=T;;){var X=R.return;if(X===null)break;var ee=X.alternate;if(ee===null){if(F=X.return,F!==null){R=F;continue}break}if(X.child===ee.child){for(ee=X.child;ee;){if(ee===R)return wr(X),y;if(ee===F)return wr(X),T;ee=ee.sibling}throw Error(t(188))}if(R.return!==F.return)R=X,F=ee;else{for(var ve=!1,Xe=X.child;Xe;){if(Xe===R){ve=!0,R=X,F=ee;break}if(Xe===F){ve=!0,F=X,R=ee;break}Xe=Xe.sibling}if(!ve){for(Xe=ee.child;Xe;){if(Xe===R){ve=!0,R=ee,F=X;break}if(Xe===F){ve=!0,F=ee,R=X;break}Xe=Xe.sibling}if(!ve)throw Error(t(189))}}if(R.alternate!==F)throw Error(t(190))}if(R.tag!==3)throw Error(t(188));return R.stateNode.current===R?y:T}function Nr(y){return y=si(y),y!==null?jr(y):null}function jr(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var T=jr(y);if(T!==null)return T;y=y.sibling}return null}var bs=e.unstable_scheduleCallback,Ia=e.unstable_cancelCallback,Eo=e.unstable_shouldYield,Wl=e.unstable_requestPaint,en=e.unstable_now,Ar=e.unstable_getCurrentPriorityLevel,qa=e.unstable_ImmediatePriority,Ra=e.unstable_UserBlockingPriority,Bs=e.unstable_NormalPriority,Ps=e.unstable_LowPriority,Li=e.unstable_IdlePriority,Ir=null,Cn=null;function Mr(y){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(Ir,y,void 0,(y.current.flags&128)===128)}catch{}}var Ur=Math.clz32?Math.clz32:Ts,_r=Math.log,Di=Math.LN2;function Ts(y){return y>>>=0,y===0?32:31-(_r(y)/Di|0)|0}var hi=64,fs=4194304;function Qa(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function ka(y,T){var R=y.pendingLanes;if(R===0)return 0;var F=0,X=y.suspendedLanes,ee=y.pingedLanes,ve=R&268435455;if(ve!==0){var Xe=ve&~X;Xe!==0?F=Qa(Xe):(ee&=ve,ee!==0&&(F=Qa(ee)))}else ve=R&~X,ve!==0?F=Qa(ve):ee!==0&&(F=Qa(ee));if(F===0)return 0;if(T!==0&&T!==F&&!(T&X)&&(X=F&-F,ee=T&-T,X>=ee||X===16&&(ee&4194240)!==0))return T;if(F&4&&(F|=R&16),T=y.entangledLanes,T!==0)for(y=y.entanglements,T&=F;0<T;)R=31-Ur(T),X=1<<R,F|=y[R],T&=~X;return F}function lc(y,T){switch(y){case 1:case 2:case 4:return T+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return T+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uc(y,T){for(var R=y.suspendedLanes,F=y.pingedLanes,X=y.expirationTimes,ee=y.pendingLanes;0<ee;){var ve=31-Ur(ee),Xe=1<<ve,at=X[ve];at===-1?(!(Xe&R)||Xe&F)&&(X[ve]=lc(Xe,T)):at<=T&&(y.expiredLanes|=Xe),ee&=~Xe}}function js(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function Yo(){var y=hi;return hi<<=1,!(hi&4194240)&&(hi=64),y}function Vl(y){for(var T=[],R=0;31>R;R++)T.push(y);return T}function pu(y,T,R){y.pendingLanes|=T,T!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,T=31-Ur(T),y[T]=R}function ch(y,T){var R=y.pendingLanes&~T;y.pendingLanes=T,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=T,y.mutableReadLanes&=T,y.entangledLanes&=T,T=y.entanglements;var F=y.eventTimes;for(y=y.expirationTimes;0<R;){var X=31-Ur(R),ee=1<<X;T[X]=0,F[X]=-1,y[X]=-1,R&=~ee}}function Ko(y,T){var R=y.entangledLanes|=T;for(y=y.entanglements;R;){var F=31-Ur(R),X=1<<F;X&T|y[F]&T&&(y[F]|=T),R&=~X}}var gr=0;function Ei(y){return y&=-y,1<y?4<y?y&268435455?16:536870912:4:1}var Rc,hh,kc,Tl,fu,Sl=!1,El=[],yr=null,vr=null,jl=null,Za=new Map,el=new Map,mu=[],Ki="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ms(y,T){switch(y){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":jl=null;break;case"pointerover":case"pointerout":Za.delete(T.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(T.pointerId)}}function tl(y,T,R,F,X,ee){return y===null||y.nativeEvent!==ee?(y={blockedOn:T,domEventName:R,eventSystemFlags:F,nativeEvent:ee,targetContainers:[X]},T!==null&&(T=$r(T),T!==null&&hh(T)),y):(y.eventSystemFlags|=F,T=y.targetContainers,X!==null&&T.indexOf(X)===-1&&T.push(X),y)}function Sd(y,T,R,F,X){switch(T){case"focusin":return yr=tl(yr,y,T,R,F,X),!0;case"dragenter":return vr=tl(vr,y,T,R,F,X),!0;case"mouseover":return jl=tl(jl,y,T,R,F,X),!0;case"pointerover":var ee=X.pointerId;return Za.set(ee,tl(Za.get(ee)||null,y,T,R,F,X)),!0;case"gotpointercapture":return ee=X.pointerId,el.set(ee,tl(el.get(ee)||null,y,T,R,F,X)),!0}return!1}function no(y){var T=pa(y.target);if(T!==null){var R=tr(T);if(R!==null){if(T=R.tag,T===13){if(T=mr(R),T!==null){y.blockedOn=T,fu(y.priority,function(){kc(R)});return}}else if(T===3&&R.stateNode.current.memoizedState.isDehydrated){y.blockedOn=R.tag===3?R.stateNode.containerInfo:null;return}}}y.blockedOn=null}function Bu(y){if(y.blockedOn!==null)return!1;for(var T=y.targetContainers;0<T.length;){var R=la(y.domEventName,y.eventSystemFlags,T[0],y.nativeEvent);if(R===null){R=y.nativeEvent;var F=new R.constructor(R.type,R);Zt=F,R.target.dispatchEvent(F),Zt=null}else return T=$r(R),T!==null&&hh(T),y.blockedOn=R,!1;T.shift()}return!0}function aa(y,T,R){Bu(y)&&R.delete(T)}function gu(){Sl=!1,yr!==null&&Bu(yr)&&(yr=null),vr!==null&&Bu(vr)&&(vr=null),jl!==null&&Bu(jl)&&(jl=null),Za.forEach(aa),el.forEach(aa)}function ir(y,T){y.blockedOn===T&&(y.blockedOn=null,Sl||(Sl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gu)))}function zn(y){function T(X){return ir(X,y)}if(0<El.length){ir(El[0],y);for(var R=1;R<El.length;R++){var F=El[R];F.blockedOn===y&&(F.blockedOn=null)}}for(yr!==null&&ir(yr,y),vr!==null&&ir(vr,y),jl!==null&&ir(jl,y),Za.forEach(T),el.forEach(T),R=0;R<mu.length;R++)F=mu[R],F.blockedOn===y&&(F.blockedOn=null);for(;0<mu.length&&(R=mu[0],R.blockedOn===null);)no(R),R.blockedOn===null&&mu.shift()}var Ss=B.ReactCurrentBatchConfig,ro=!0;function Pu(y,T,R,F){var X=gr,ee=Ss.transition;Ss.transition=null;try{gr=1,dh(y,T,R,F)}finally{gr=X,Ss.transition=ee}}function _u(y,T,R,F){var X=gr,ee=Ss.transition;Ss.transition=null;try{gr=4,dh(y,T,R,F)}finally{gr=X,Ss.transition=ee}}function dh(y,T,R,F){if(ro){var X=la(y,T,R,F);if(X===null)wd(y,T,F,Oa,R),ms(y,F);else if(Sd(X,y,T,R,F))F.stopPropagation();else if(ms(y,F),T&4&&-1<Ki.indexOf(y)){for(;X!==null;){var ee=$r(X);if(ee!==null&&Rc(ee),ee=la(y,T,R,F),ee===null&&wd(y,T,F,Oa,R),ee===X)break;X=ee}X!==null&&F.stopPropagation()}else wd(y,T,F,null,R)}}var Oa=null;function la(y,T,R,F){if(Oa=null,y=_t(F),y=pa(y),y!==null)if(T=tr(y),T===null)y=null;else if(R=T.tag,R===13){if(y=mr(T),y!==null)return y;y=null}else if(R===3){if(T.stateNode.current.memoizedState.isDehydrated)return T.tag===3?T.stateNode.containerInfo:null;y=null}else T!==y&&(y=null);return Oa=y,null}function Fu(y){switch(y){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ar()){case qa:return 1;case Ra:return 4;case Bs:case Ps:return 16;case Li:return 536870912;default:return 16}default:return 16}}var Tr=null,Is=null,yi=null;function xi(){if(yi)return yi;var y,T=Is,R=T.length,F,X="value"in Tr?Tr.value:Tr.textContent,ee=X.length;for(y=0;y<R&&T[y]===X[y];y++);var ve=R-y;for(F=1;F<=ve&&T[R-F]===X[ee-F];F++);return yi=X.slice(y,1<F?1-F:void 0)}function ua(y){var T=y.keyCode;return"charCode"in y?(y=y.charCode,y===0&&T===13&&(y=13)):y=T,y===10&&(y=13),32<=y||y===13?y:0}function Qr(){return!0}function yu(){return!1}function xo(y){function T(R,F,X,ee,ve){this._reactName=R,this._targetInst=X,this.type=F,this.nativeEvent=ee,this.target=ve,this.currentTarget=null;for(var Xe in y)y.hasOwnProperty(Xe)&&(R=y[Xe],this[Xe]=R?R(ee):ee[Xe]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?Qr:yu,this.isPropagationStopped=yu,this}return se(T.prototype,{preventDefault:function(){this.defaultPrevented=!0;var R=this.nativeEvent;R&&(R.preventDefault?R.preventDefault():typeof R.returnValue!="unknown"&&(R.returnValue=!1),this.isDefaultPrevented=Qr)},stopPropagation:function(){var R=this.nativeEvent;R&&(R.stopPropagation?R.stopPropagation():typeof R.cancelBubble!="unknown"&&(R.cancelBubble=!0),this.isPropagationStopped=Qr)},persist:function(){},isPersistent:Qr}),T}var vu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(y){return y.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nl=xo(vu),Ni=se({},vu,{view:0,detail:0}),wi=xo(Ni),Hn,$i,Xr,ad=se({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zu,button:0,buttons:0,relatedTarget:function(y){return y.relatedTarget===void 0?y.fromElement===y.srcElement?y.toElement:y.fromElement:y.relatedTarget},movementX:function(y){return"movementX"in y?y.movementX:(y!==Xr&&(Xr&&y.type==="mousemove"?(Hn=y.screenX-Xr.screenX,$i=y.screenY-Xr.screenY):$i=Hn=0,Xr=y),Hn)},movementY:function(y){return"movementY"in y?y.movementY:$i}}),bu=xo(ad),Gi=se({},ad,{dataTransfer:0}),La=xo(Gi),ph=se({},Ni,{relatedTarget:0}),hr=xo(ph),Jo=se({},vu,{animationName:0,elapsedTime:0,pseudoElement:0}),ld=xo(Jo),np=se({},vu,{clipboardData:function(y){return"clipboardData"in y?y.clipboardData:window.clipboardData}}),Oc=xo(np),rp=se({},vu,{data:0}),kp=xo(rp),mf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ed={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rs(y){var T=this.nativeEvent;return T.getModifierState?T.getModifierState(y):(y=Xl[y])?!!T[y]:!1}function zu(){return Rs}var fh=se({},Ni,{key:function(y){if(y.key){var T=mf[y.key]||y.key;if(T!=="Unidentified")return T}return y.type==="keypress"?(y=ua(y),y===13?"Enter":String.fromCharCode(y)):y.type==="keydown"||y.type==="keyup"?Ed[y.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zu,charCode:function(y){return y.type==="keypress"?ua(y):0},keyCode:function(y){return y.type==="keydown"||y.type==="keyup"?y.keyCode:0},which:function(y){return y.type==="keypress"?ua(y):y.type==="keydown"||y.type==="keyup"?y.keyCode:0}}),Da=xo(fh),li=se({},ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sr=xo(li),io=se({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zu}),Na=xo(io),Po=se({},vu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yl=xo(Po),Kl=se({},ad,{deltaX:function(y){return"deltaX"in y?y.deltaX:"wheelDeltaX"in y?-y.wheelDeltaX:0},deltaY:function(y){return"deltaY"in y?y.deltaY:"wheelDeltaY"in y?-y.wheelDeltaY:"wheelDelta"in y?-y.wheelDelta:0},deltaZ:0,deltaMode:0}),Lh=xo(Kl),Hr=[9,13,27,32],Ci=u&&"CompositionEvent"in window,br=null;u&&"documentMode"in document&&(br=document.documentMode);var Wi=u&&"TextEvent"in window&&!br,ca=u&&(!Ci||br&&8<br&&11>=br),Tu=" ",ip=!1;function sp(y,T){switch(y){case"keyup":return Hr.indexOf(T.keyCode)!==-1;case"keydown":return T.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ud(y){return y=y.detail,typeof y=="object"&&"data"in y?y.data:null}var Uu=!1;function rl(y,T){switch(y){case"compositionend":return ud(T);case"keypress":return T.which!==32?null:(ip=!0,Tu);case"textInput":return y=T.data,y===Tu&&ip?null:y;default:return null}}function Lc(y,T){if(Uu)return y==="compositionend"||!Ci&&sp(y,T)?(y=xi(),yi=Is=Tr=null,Uu=!1,y):null;switch(y){case"paste":return null;case"keypress":if(!(T.ctrlKey||T.altKey||T.metaKey)||T.ctrlKey&&T.altKey){if(T.char&&1<T.char.length)return T.char;if(T.which)return String.fromCharCode(T.which)}return null;case"compositionend":return ca&&T.locale!=="ko"?null:T.data;default:return null}}var Dh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hu(y){var T=y&&y.nodeName&&y.nodeName.toLowerCase();return T==="input"?!!Dh[y.type]:T==="textarea"}function Jl(y,T,R,F){Dr(F),T=$d(T,"onChange"),0<T.length&&(R=new nl("onChange","change",null,R,F),y.push({event:R,listeners:T}))}var Fs=null,ql=null;function Nh(y){zh(y,0)}function Dc(y){var T=pn(y);if(Ae(T))return y}function Nc(y,T){if(y==="change")return T}var ns=!1;if(u){var Br;if(u){var xl="oninput"in document;if(!xl){var Ba=document.createElement("div");Ba.setAttribute("oninput","return;"),xl=typeof Ba.oninput=="function"}Br=xl}else Br=!1;ns=Br&&(!document.documentMode||9<document.documentMode)}function Ql(){Fs&&(Fs.detachEvent("onpropertychange",Su),ql=Fs=null)}function Su(y){if(y.propertyName==="value"&&Dc(ql)){var T=[];Jl(T,ql,y,_t(y)),Te(Nh,T)}}function mh(y,T,R){y==="focusin"?(Ql(),Fs=T,ql=R,Fs.attachEvent("onpropertychange",Su)):y==="focusout"&&Ql()}function xd(y){if(y==="selectionchange"||y==="keyup"||y==="keydown")return Dc(ql)}function di(y,T){if(y==="click")return Dc(T)}function ye(y,T){if(y==="input"||y==="change")return Dc(T)}function Ve(y,T){return y===T&&(y!==0||1/y===1/T)||y!==y&&T!==T}var Be=typeof Object.is=="function"?Object.is:Ve;function kt(y,T){if(Be(y,T))return!0;if(typeof y!="object"||y===null||typeof T!="object"||T===null)return!1;var R=Object.keys(y),F=Object.keys(T);if(R.length!==F.length)return!1;for(F=0;F<R.length;F++){var X=R[F];if(!d.call(T,X)||!Be(y[X],T[X]))return!1}return!0}function tn(y){for(;y&&y.firstChild;)y=y.firstChild;return y}function Mn(y,T){var R=tn(y);y=0;for(var F;R;){if(R.nodeType===3){if(F=y+R.textContent.length,y<=T&&F>=T)return{node:R,offset:T-y};y=F}e:{for(;R;){if(R.nextSibling){R=R.nextSibling;break e}R=R.parentNode}R=void 0}R=tn(R)}}function Xn(y,T){return y&&T?y===T?!0:y&&y.nodeType===3?!1:T&&T.nodeType===3?Xn(y,T.parentNode):"contains"in y?y.contains(T):y.compareDocumentPosition?!!(y.compareDocumentPosition(T)&16):!1:!1}function gn(){for(var y=window,T=je();T instanceof y.HTMLIFrameElement;){try{var R=typeof T.contentWindow.location.href=="string"}catch{R=!1}if(R)y=T.contentWindow;else break;T=je(y.document)}return T}function Pr(y){var T=y&&y.nodeName&&y.nodeName.toLowerCase();return T&&(T==="input"&&(y.type==="text"||y.type==="search"||y.type==="tel"||y.type==="url"||y.type==="password")||T==="textarea"||y.contentEditable==="true")}function so(y){var T=gn(),R=y.focusedElem,F=y.selectionRange;if(T!==R&&R&&R.ownerDocument&&Xn(R.ownerDocument.documentElement,R)){if(F!==null&&Pr(R)){if(T=F.start,y=F.end,y===void 0&&(y=T),"selectionStart"in R)R.selectionStart=T,R.selectionEnd=Math.min(y,R.value.length);else if(y=(T=R.ownerDocument||document)&&T.defaultView||window,y.getSelection){y=y.getSelection();var X=R.textContent.length,ee=Math.min(F.start,X);F=F.end===void 0?ee:Math.min(F.end,X),!y.extend&&ee>F&&(X=F,F=ee,ee=X),X=Mn(R,ee);var ve=Mn(R,F);X&&ve&&(y.rangeCount!==1||y.anchorNode!==X.node||y.anchorOffset!==X.offset||y.focusNode!==ve.node||y.focusOffset!==ve.offset)&&(T=T.createRange(),T.setStart(X.node,X.offset),y.removeAllRanges(),ee>F?(y.addRange(T),y.extend(ve.node,ve.offset)):(T.setEnd(ve.node,ve.offset),y.addRange(T)))}}for(T=[],y=R;y=y.parentNode;)y.nodeType===1&&T.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<T.length;R++)y=T[R],y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}var vi=u&&"documentMode"in document&&11>=document.documentMode,oo=null,il=null,Bi=null,gs=!1;function Eu(y,T,R){var F=R.window===R?R.document:R.nodeType===9?R:R.ownerDocument;gs||oo==null||oo!==je(F)||(F=oo,"selectionStart"in F&&Pr(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),Bi&&kt(Bi,F)||(Bi=F,F=$d(il,"onSelect"),0<F.length&&(T=new nl("onSelect","select",null,T,R),y.push({event:T,listeners:F}),T.target=oo)))}function Yn(y,T){var R={};return R[y.toLowerCase()]=T.toLowerCase(),R["Webkit"+y]="webkit"+T,R["Moz"+y]="moz"+T,R}var ha={animationend:Yn("Animation","AnimationEnd"),animationiteration:Yn("Animation","AnimationIteration"),animationstart:Yn("Animation","AnimationStart"),transitionend:Yn("Transition","TransitionEnd")},Xs={},zs={};u&&(zs=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function Pa(y){if(Xs[y])return Xs[y];if(!ha[y])return y;var T=ha[y],R;for(R in T)if(T.hasOwnProperty(R)&&R in zs)return Xs[y]=T[R];return y}var Bh=Pa("animationend"),gh=Pa("animationiteration"),cc=Pa("animationstart"),qo=Pa("transitionend"),Bc=new Map,Ph="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fa(y,T){Bc.set(y,T),o(T,[y])}for(var Fh=0;Fh<Ph.length;Fh++){var hc=Ph[Fh],Gu=hc.toLowerCase(),cd=hc[0].toUpperCase()+hc.slice(1);Fa(Gu,"on"+cd)}Fa(Bh,"onAnimationEnd"),Fa(gh,"onAnimationIteration"),Fa(cc,"onAnimationStart"),Fa("dblclick","onDoubleClick"),Fa("focusin","onFocus"),Fa("focusout","onBlur"),Fa(qo,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ao=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function wl(y,T,R){var F=y.type||"unknown-event";y.currentTarget=R,Un(F,T,void 0,y),y.currentTarget=null}function zh(y,T){T=(T&4)!==0;for(var R=0;R<y.length;R++){var F=y[R],X=F.event;F=F.listeners;e:{var ee=void 0;if(T)for(var ve=F.length-1;0<=ve;ve--){var Xe=F[ve],at=Xe.instance,Ot=Xe.currentTarget;if(Xe=Xe.listener,at!==ee&&X.isPropagationStopped())break e;wl(X,Xe,Ot),ee=at}else for(ve=0;ve<F.length;ve++){if(Xe=F[ve],at=Xe.instance,Ot=Xe.currentTarget,Xe=Xe.listener,at!==ee&&X.isPropagationStopped())break e;wl(X,Xe,Ot),ee=at}}}if(gt)throw y=$t,gt=!1,$t=null,y}function Pi(y,T){var R=T[da];R===void 0&&(R=T[da]=new Set);var F=y+"__bubble";R.has(F)||(Pc(T,y,2,!1),R.add(F))}function hd(y,T,R){var F=0;T&&(F|=4),Pc(R,y,F,T)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function Zl(y){if(!y[Wu]){y[Wu]=!0,i.forEach(function(R){R!=="selectionchange"&&(ao.has(R)||hd(R,!1,y),hd(R,!0,y))});var T=y.nodeType===9?y:y.ownerDocument;T===null||T[Wu]||(T[Wu]=!0,hd("selectionchange",!1,T))}}function Pc(y,T,R,F){switch(Fu(T)){case 1:var X=Pu;break;case 4:X=_u;break;default:X=dh}R=X.bind(null,T,R,y),X=void 0,!ot||T!=="touchstart"&&T!=="touchmove"&&T!=="wheel"||(X=!0),F?X!==void 0?y.addEventListener(T,R,{capture:!0,passive:X}):y.addEventListener(T,R,!0):X!==void 0?y.addEventListener(T,R,{passive:X}):y.addEventListener(T,R,!1)}function wd(y,T,R,F,X){var ee=F;if(!(T&1)&&!(T&2)&&F!==null)e:for(;;){if(F===null)return;var ve=F.tag;if(ve===3||ve===4){var Xe=F.stateNode.containerInfo;if(Xe===X||Xe.nodeType===8&&Xe.parentNode===X)break;if(ve===4)for(ve=F.return;ve!==null;){var at=ve.tag;if((at===3||at===4)&&(at=ve.stateNode.containerInfo,at===X||at.nodeType===8&&at.parentNode===X))return;ve=ve.return}for(;Xe!==null;){if(ve=pa(Xe),ve===null)return;if(at=ve.tag,at===5||at===6){F=ee=ve;continue e}Xe=Xe.parentNode}}F=F.return}Te(function(){var Ot=ee,qt=_t(R),un=[];e:{var sn=Bc.get(y);if(sn!==void 0){var Ln=nl,Jn=y;switch(y){case"keypress":if(ua(R)===0)break e;case"keydown":case"keyup":Ln=Da;break;case"focusin":Jn="focus",Ln=hr;break;case"focusout":Jn="blur",Ln=hr;break;case"beforeblur":case"afterblur":Ln=hr;break;case"click":if(R.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ln=bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ln=La;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ln=Na;break;case Bh:case gh:case cc:Ln=ld;break;case qo:Ln=Yl;break;case"scroll":Ln=wi;break;case"wheel":Ln=Lh;break;case"copy":case"cut":case"paste":Ln=Oc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ln=Sr}var nr=(T&4)!==0,Ao=!nr&&y==="scroll",xt=nr?sn!==null?sn+"Capture":null:sn;nr=[];for(var ht=Ot,Et;ht!==null;){Et=ht;var bn=Et.stateNode;if(Et.tag===5&&bn!==null&&(Et=bn,xt!==null&&(bn=Ge(ht,xt),bn!=null&&nr.push($l(ht,bn,Et)))),Ao)break;ht=ht.return}0<nr.length&&(sn=new Ln(sn,Jn,null,R,qt),un.push({event:sn,listeners:nr}))}}if(!(T&7)){e:{if(sn=y==="mouseover"||y==="pointerover",Ln=y==="mouseout"||y==="pointerout",sn&&R!==Zt&&(Jn=R.relatedTarget||R.fromElement)&&(pa(Jn)||Jn[Ji]))break e;if((Ln||sn)&&(sn=qt.window===qt?qt:(sn=qt.ownerDocument)?sn.defaultView||sn.parentWindow:window,Ln?(Jn=R.relatedTarget||R.toElement,Ln=Ot,Jn=Jn?pa(Jn):null,Jn!==null&&(Ao=tr(Jn),Jn!==Ao||Jn.tag!==5&&Jn.tag!==6)&&(Jn=null)):(Ln=null,Jn=Ot),Ln!==Jn)){if(nr=bu,bn="onMouseLeave",xt="onMouseEnter",ht="mouse",(y==="pointerout"||y==="pointerover")&&(nr=Sr,bn="onPointerLeave",xt="onPointerEnter",ht="pointer"),Ao=Ln==null?sn:pn(Ln),Et=Jn==null?sn:pn(Jn),sn=new nr(bn,ht+"leave",Ln,R,qt),sn.target=Ao,sn.relatedTarget=Et,bn=null,pa(qt)===Ot&&(nr=new nr(xt,ht+"enter",Jn,R,qt),nr.target=Et,nr.relatedTarget=Ao,bn=nr),Ao=bn,Ln&&Jn)t:{for(nr=Ln,xt=Jn,ht=0,Et=nr;Et;Et=Uh(Et))ht++;for(Et=0,bn=xt;bn;bn=Uh(bn))Et++;for(;0<ht-Et;)nr=Uh(nr),ht--;for(;0<Et-ht;)xt=Uh(xt),Et--;for(;ht--;){if(nr===xt||xt!==null&&nr===xt.alternate)break t;nr=Uh(nr),xt=Uh(xt)}nr=null}else nr=null;Ln!==null&&Zr(un,sn,Ln,nr,!1),Jn!==null&&Ao!==null&&Zr(un,Ao,Jn,nr,!0)}}e:{if(sn=Ot?pn(Ot):window,Ln=sn.nodeName&&sn.nodeName.toLowerCase(),Ln==="select"||Ln==="input"&&sn.type==="file")var or=Nc;else if(Hu(sn))if(ns)or=ye;else{or=xd;var er=mh}else(Ln=sn.nodeName)&&Ln.toLowerCase()==="input"&&(sn.type==="checkbox"||sn.type==="radio")&&(or=di);if(or&&(or=or(y,Ot))){Jl(un,or,R,qt);break e}er&&er(y,sn,Ot),y==="focusout"&&(er=sn._wrapperState)&&er.controlled&&sn.type==="number"&&Ct(sn,"number",sn.value)}switch(er=Ot?pn(Ot):window,y){case"focusin":(Hu(er)||er.contentEditable==="true")&&(oo=er,il=Ot,Bi=null);break;case"focusout":Bi=il=oo=null;break;case"mousedown":gs=!0;break;case"contextmenu":case"mouseup":case"dragend":gs=!1,Eu(un,R,qt);break;case"selectionchange":if(vi)break;case"keydown":case"keyup":Eu(un,R,qt)}var pr;if(Ci)e:{switch(y){case"compositionstart":var kr="onCompositionStart";break e;case"compositionend":kr="onCompositionEnd";break e;case"compositionupdate":kr="onCompositionUpdate";break e}kr=void 0}else Uu?sp(y,R)&&(kr="onCompositionEnd"):y==="keydown"&&R.keyCode===229&&(kr="onCompositionStart");kr&&(ca&&R.locale!=="ko"&&(Uu||kr!=="onCompositionStart"?kr==="onCompositionEnd"&&Uu&&(pr=xi()):(Tr=qt,Is="value"in Tr?Tr.value:Tr.textContent,Uu=!0)),er=$d(Ot,kr),0<er.length&&(kr=new kp(kr,y,null,R,qt),un.push({event:kr,listeners:er}),pr?kr.data=pr:(pr=ud(R),pr!==null&&(kr.data=pr)))),(pr=Wi?rl(y,R):Lc(y,R))&&(Ot=$d(Ot,"onBeforeInput"),0<Ot.length&&(qt=new kp("onBeforeInput","beforeinput",null,R,qt),un.push({event:qt,listeners:Ot}),qt.data=pr))}zh(un,T)})}function $l(y,T,R){return{instance:y,listener:T,currentTarget:R}}function $d(y,T){for(var R=T+"Capture",F=[];y!==null;){var X=y,ee=X.stateNode;X.tag===5&&ee!==null&&(X=ee,ee=Ge(y,R),ee!=null&&F.unshift($l(y,ee,X)),ee=Ge(y,T),ee!=null&&F.push($l(y,ee,X))),y=y.return}return F}function Uh(y){if(y===null)return null;do y=y.return;while(y&&y.tag!==5);return y||null}function Zr(y,T,R,F,X){for(var ee=T._reactName,ve=[];R!==null&&R!==F;){var Xe=R,at=Xe.alternate,Ot=Xe.stateNode;if(at!==null&&at===F)break;Xe.tag===5&&Ot!==null&&(Xe=Ot,X?(at=Ge(R,ee),at!=null&&ve.unshift($l(R,at,Xe))):X||(at=Ge(R,ee),at!=null&&ve.push($l(R,at,Xe)))),R=R.return}ve.length!==0&&y.push({event:T,listeners:ve})}var Mi=/\r\n?/g,gf=/\u0000|\uFFFD/g;function Op(y){return(typeof y=="string"?y:""+y).replace(Mi,`
`).replace(gf,"")}function Cl(y,T,R){if(T=Op(T),Op(y)!==T&&R)throw Error(t(425))}function eu(){}var Vu=null,ju=null;function _h(y,T){return y==="textarea"||y==="noscript"||typeof T.children=="string"||typeof T.children=="number"||typeof T.dangerouslySetInnerHTML=="object"&&T.dangerouslySetInnerHTML!==null&&T.dangerouslySetInnerHTML.__html!=null}var sl=typeof setTimeout=="function"?setTimeout:void 0,Zo=typeof clearTimeout=="function"?clearTimeout:void 0,Ml=typeof Promise=="function"?Promise:void 0,Fc=typeof queueMicrotask=="function"?queueMicrotask:typeof Ml<"u"?function(y){return Ml.resolve(null).then(y).catch(Al)}:sl;function Al(y){setTimeout(function(){throw y})}function zc(y,T){var R=T,F=0;do{var X=R.nextSibling;if(y.removeChild(R),X&&X.nodeType===8)if(R=X.data,R==="/$"){if(F===0){y.removeChild(X),zn(T);return}F--}else R!=="$"&&R!=="$?"&&R!=="$!"||F++;R=X}while(R);zn(T)}function dc(y){for(;y!=null;y=y.nextSibling){var T=y.nodeType;if(T===1||T===3)break;if(T===8){if(T=y.data,T==="$"||T==="$!"||T==="$?")break;if(T==="/$")return null}}return y}function Cd(y){y=y.previousSibling;for(var T=0;y;){if(y.nodeType===8){var R=y.data;if(R==="$"||R==="$!"||R==="$?"){if(T===0)return y;T--}else R==="/$"&&T++}y=y.previousSibling}return null}var za=Math.random().toString(36).slice(2),Gr="__reactFiber$"+za,ol="__reactProps$"+za,Ji="__reactContainer$"+za,da="__reactEvents$"+za,Y="__reactListeners$"+za,Es="__reactHandles$"+za;function pa(y){var T=y[Gr];if(T)return T;for(var R=y.parentNode;R;){if(T=R[Ji]||R[Gr]){if(R=T.alternate,T.child!==null||R!==null&&R.child!==null)for(y=Cd(y);y!==null;){if(R=y[Gr])return R;y=Cd(y)}return T}y=R,R=y.parentNode}return null}function $r(y){return y=y[Gr]||y[Ji],!y||y.tag!==5&&y.tag!==6&&y.tag!==13&&y.tag!==3?null:y}function pn(y){if(y.tag===5||y.tag===6)return y.stateNode;throw Error(t(33))}function Lp(y){return y[ol]||null}var al=[],Ai=-1;function ui(y){return{current:y}}function qi(y){0>Ai||(y.current=al[Ai],al[Ai]=null,Ai--)}function rs(y,T){Ai++,al[Ai]=y.current,y.current=T}var Uc={},fa=ui(Uc),ma=ui(!1),is=Uc;function Hc(y,T){var R=y.type.contextTypes;if(!R)return Uc;var F=y.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===T)return F.__reactInternalMemoizedMaskedChildContext;var X={},ee;for(ee in R)X[ee]=T[ee];return F&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=T,y.__reactInternalMemoizedMaskedChildContext=X),X}function ea(y){return y=y.childContextTypes,y!=null}function Md(){qi(ma),qi(fa)}function Ad(y,T,R){if(fa.current!==Uc)throw Error(t(168));rs(fa,T),rs(ma,R)}function Hh(y,T,R){var F=y.stateNode;if(T=T.childContextTypes,typeof F.getChildContext!="function")return R;F=F.getChildContext();for(var X in F)if(!(X in T))throw Error(t(108,it(y)||"Unknown",X));return se({},R,F)}function Us(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||Uc,is=fa.current,rs(fa,y),rs(ma,ma.current),!0}function jn(y,T,R){var F=y.stateNode;if(!F)throw Error(t(169));R?(y=Hh(y,T,is),F.__reactInternalMemoizedMergedChildContext=y,qi(ma),qi(fa),rs(fa,y)):qi(ma),rs(ma,R)}var Hs=null,Ys=!1,Fi=!1;function tu(y){Hs===null?Hs=[y]:Hs.push(y)}function Fo(y){Ys=!0,tu(y)}function En(){if(!Fi&&Hs!==null){Fi=!0;var y=0,T=gr;try{var R=Hs;for(gr=1;y<R.length;y++){var F=R[y];do F=F(!0);while(F!==null)}Hs=null,Ys=!1}catch(X){throw Hs!==null&&(Hs=Hs.slice(y+1)),bs(qa,En),X}finally{gr=T,Fi=!1}}return null}var pi=[],fi=0,Dp=null,yh=0,lo=[],ga=0,wn=null,_n=1,ll="";function pc(y,T){pi[fi++]=yh,pi[fi++]=Dp,Dp=y,yh=T}function _f(y,T,R){lo[ga++]=_n,lo[ga++]=ll,lo[ga++]=wn,wn=y;var F=_n;y=ll;var X=32-Ur(F)-1;F&=~(1<<X),R+=1;var ee=32-Ur(T)+X;if(30<ee){var ve=X-X%5;ee=(F&(1<<ve)-1).toString(32),F>>=ve,X-=ve,_n=1<<32-Ur(T)+X|R<<X|F,ll=ee+y}else _n=1<<ee|R<<X|F,ll=y}function nu(y){y.return!==null&&(pc(y,1),_f(y,1,0))}function wo(y){for(;y===Dp;)Dp=pi[--fi],pi[fi]=null,yh=pi[--fi],pi[fi]=null;for(;y===wn;)wn=lo[--ga],lo[ga]=null,ll=lo[--ga],lo[ga]=null,_n=lo[--ga],lo[ga]=null}var _s=null,ul=null,ss=!1,cl=null;function zo(y,T){var R=Iu(5,null,null,0);R.elementType="DELETED",R.stateNode=T,R.return=y,T=y.deletions,T===null?(y.deletions=[R],y.flags|=16):T.push(R)}function Gh(y,T){switch(y.tag){case 5:var R=y.type;return T=T.nodeType!==1||R.toLowerCase()!==T.nodeName.toLowerCase()?null:T,T!==null?(y.stateNode=T,_s=y,ul=dc(T.firstChild),!0):!1;case 6:return T=y.pendingProps===""||T.nodeType!==3?null:T,T!==null?(y.stateNode=T,_s=y,ul=null,!0):!1;case 13:return T=T.nodeType!==8?null:T,T!==null?(R=wn!==null?{id:_n,overflow:ll}:null,y.memoizedState={dehydrated:T,treeContext:R,retryLane:1073741824},R=Iu(18,null,null,0),R.stateNode=T,R.return=y,y.child=R,_s=y,ul=null,!0):!1;default:return!1}}function Ua(y){return(y.mode&1)!==0&&(y.flags&128)===0}function Ii(y){if(ss){var T=ul;if(T){var R=T;if(!Gh(y,T)){if(Ua(y))throw Error(t(418));T=dc(R.nextSibling);var F=_s;T&&Gh(y,T)?zo(F,R):(y.flags=y.flags&-4097|2,ss=!1,_s=y)}}else{if(Ua(y))throw Error(t(418));y.flags=y.flags&-4097|2,ss=!1,_s=y}}}function Id(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;_s=y}function Gc(y){if(y!==_s)return!1;if(!ss)return Id(y),ss=!0,!1;var T;if((T=y.tag!==3)&&!(T=y.tag!==5)&&(T=y.type,T=T!=="head"&&T!=="body"&&!_h(y.type,y.memoizedProps)),T&&(T=ul)){if(Ua(y))throw Wh(),Error(t(418));for(;T;)zo(y,T),T=dc(T.nextSibling)}if(Id(y),y.tag===13){if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));e:{for(y=y.nextSibling,T=0;y;){if(y.nodeType===8){var R=y.data;if(R==="/$"){if(T===0){ul=dc(y.nextSibling);break e}T--}else R!=="$"&&R!=="$!"&&R!=="$?"||T++}y=y.nextSibling}ul=null}}else ul=_s?dc(y.stateNode.nextSibling):null;return!0}function Wh(){for(var y=ul;y;)y=dc(y.nextSibling)}function Uo(){ul=_s=null,ss=!1}function $o(y){cl===null?cl=[y]:cl.push(y)}var op=B.ReactCurrentBatchConfig;function xu(y,T){if(y&&y.defaultProps){T=se({},T),y=y.defaultProps;for(var R in y)T[R]===void 0&&(T[R]=y[R]);return T}return T}var Il=ui(null),dd=null,fc=null,Yr=null;function ru(){Yr=fc=dd=null}function Xu(y){var T=Il.current;qi(Il),y._currentValue=T}function os(y,T,R){for(;y!==null;){var F=y.alternate;if((y.childLanes&T)!==T?(y.childLanes|=T,F!==null&&(F.childLanes|=T)):F!==null&&(F.childLanes&T)!==T&&(F.childLanes|=T),y===R)break;y=y.return}}function Ha(y,T){dd=y,Yr=fc=null,y=y.dependencies,y!==null&&y.firstContext!==null&&(y.lanes&T&&(fn=!0),y.firstContext=null)}function xs(y){var T=y._currentValue;if(Yr!==y)if(y={context:y,memoizedValue:T,next:null},fc===null){if(dd===null)throw Error(t(308));fc=y,dd.dependencies={lanes:0,firstContext:y}}else fc=fc.next=y;return T}var ws=null;function Wc(y){ws===null?ws=[y]:ws.push(y)}function mi(y,T,R,F){var X=T.interleaved;return X===null?(R.next=R,Wc(T)):(R.next=X.next,X.next=R),T.interleaved=R,Ga(y,F)}function Ga(y,T){y.lanes|=T;var R=y.alternate;for(R!==null&&(R.lanes|=T),R=y,y=y.return;y!==null;)y.childLanes|=T,R=y.alternate,R!==null&&(R.childLanes|=T),R=y,y=y.return;return R.tag===3?R.stateNode:null}var mc=!1;function ap(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vh(y,T){y=y.updateQueue,T.updateQueue===y&&(T.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function ta(y,T){return{eventTime:y,lane:T,tag:0,payload:null,callback:null,next:null}}function Vi(y,T,R){var F=y.updateQueue;if(F===null)return null;if(F=F.shared,(Zi&2)!==0){var X=F.pending;return X===null?T.next=T:(T.next=X.next,X.next=T),F.pending=T,Ga(y,R)}return X=F.interleaved,X===null?(T.next=T,Wc(F)):(T.next=X.next,X.next=T),F.interleaved=T,Ga(y,R)}function Dn(y,T,R){if(T=T.updateQueue,T!==null&&(T=T.shared,(R&4194240)!==0)){var F=T.lanes;F&=y.pendingLanes,R|=F,T.lanes=R,Ko(y,R)}}function Zn(y,T){var R=y.updateQueue,F=y.alternate;if(F!==null&&(F=F.updateQueue,R===F)){var X=null,ee=null;if(R=R.firstBaseUpdate,R!==null){do{var ve={eventTime:R.eventTime,lane:R.lane,tag:R.tag,payload:R.payload,callback:R.callback,next:null};ee===null?X=ee=ve:ee=ee.next=ve,R=R.next}while(R!==null);ee===null?X=ee=T:ee=ee.next=T}else X=ee=T;R={baseState:F.baseState,firstBaseUpdate:X,lastBaseUpdate:ee,shared:F.shared,effects:F.effects},y.updateQueue=R;return}y=R.lastBaseUpdate,y===null?R.firstBaseUpdate=T:y.next=T,R.lastBaseUpdate=T}function Or(y,T,R,F){var X=y.updateQueue;mc=!1;var ee=X.firstBaseUpdate,ve=X.lastBaseUpdate,Xe=X.shared.pending;if(Xe!==null){X.shared.pending=null;var at=Xe,Ot=at.next;at.next=null,ve===null?ee=Ot:ve.next=Ot,ve=at;var qt=y.alternate;qt!==null&&(qt=qt.updateQueue,Xe=qt.lastBaseUpdate,Xe!==ve&&(Xe===null?qt.firstBaseUpdate=Ot:Xe.next=Ot,qt.lastBaseUpdate=at))}if(ee!==null){var un=X.baseState;ve=0,qt=Ot=at=null,Xe=ee;do{var sn=Xe.lane,Ln=Xe.eventTime;if((F&sn)===sn){qt!==null&&(qt=qt.next={eventTime:Ln,lane:0,tag:Xe.tag,payload:Xe.payload,callback:Xe.callback,next:null});e:{var Jn=y,nr=Xe;switch(sn=T,Ln=R,nr.tag){case 1:if(Jn=nr.payload,typeof Jn=="function"){un=Jn.call(Ln,un,sn);break e}un=Jn;break e;case 3:Jn.flags=Jn.flags&-65537|128;case 0:if(Jn=nr.payload,sn=typeof Jn=="function"?Jn.call(Ln,un,sn):Jn,sn==null)break e;un=se({},un,sn);break e;case 2:mc=!0}}Xe.callback!==null&&Xe.lane!==0&&(y.flags|=64,sn=X.effects,sn===null?X.effects=[Xe]:sn.push(Xe))}else Ln={eventTime:Ln,lane:sn,tag:Xe.tag,payload:Xe.payload,callback:Xe.callback,next:null},qt===null?(Ot=qt=Ln,at=un):qt=qt.next=Ln,ve|=sn;if(Xe=Xe.next,Xe===null){if(Xe=X.shared.pending,Xe===null)break;sn=Xe,Xe=sn.next,sn.next=null,X.lastBaseUpdate=sn,X.shared.pending=null}}while(!0);if(qt===null&&(at=un),X.baseState=at,X.firstBaseUpdate=Ot,X.lastBaseUpdate=qt,T=X.shared.interleaved,T!==null){X=T;do ve|=X.lane,X=X.next;while(X!==T)}else ee===null&&(X.shared.lanes=0);Nd|=ve,y.lanes=ve,y.memoizedState=un}}function ei(y,T,R){if(y=T.effects,T.effects=null,y!==null)for(T=0;T<y.length;T++){var F=y[T],X=F.callback;if(X!==null){if(F.callback=null,F=R,typeof X!="function")throw Error(t(191,X));X.call(F)}}}var Jr=new n.Component().refs;function Co(y,T,R,F){T=y.memoizedState,R=R(F,T),R=R==null?T:se({},T,R),y.memoizedState=R,y.lanes===0&&(y.updateQueue.baseState=R)}var as={isMounted:function(y){return(y=y._reactInternals)?tr(y)===y:!1},enqueueSetState:function(y,T,R){y=y._reactInternals;var F=Sc(),X=Fd(y),ee=ta(F,X);ee.payload=T,R!=null&&(ee.callback=R),T=Vi(y,ee,X),T!==null&&(ra(T,y,X,F),Dn(T,y,X))},enqueueReplaceState:function(y,T,R){y=y._reactInternals;var F=Sc(),X=Fd(y),ee=ta(F,X);ee.tag=1,ee.payload=T,R!=null&&(ee.callback=R),T=Vi(y,ee,X),T!==null&&(ra(T,y,X,F),Dn(T,y,X))},enqueueForceUpdate:function(y,T){y=y._reactInternals;var R=Sc(),F=Fd(y),X=ta(R,F);X.tag=2,T!=null&&(X.callback=T),T=Vi(y,X,F),T!==null&&(ra(T,y,F,R),Dn(T,y,F))}};function Qi(y,T,R,F,X,ee,ve){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(F,ee,ve):T.prototype&&T.prototype.isPureReactComponent?!kt(R,F)||!kt(X,ee):!0}function iu(y,T,R){var F=!1,X=Uc,ee=T.contextType;return typeof ee=="object"&&ee!==null?ee=xs(ee):(X=ea(T)?is:fa.current,F=T.contextTypes,ee=(F=F!=null)?Hc(y,X):Uc),T=new T(R,ee),y.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=as,y.stateNode=T,T._reactInternals=y,F&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=X,y.__reactInternalMemoizedMaskedChildContext=ee),T}function Yu(y,T,R,F){y=T.state,typeof T.componentWillReceiveProps=="function"&&T.componentWillReceiveProps(R,F),typeof T.UNSAFE_componentWillReceiveProps=="function"&&T.UNSAFE_componentWillReceiveProps(R,F),T.state!==y&&as.enqueueReplaceState(T,T.state,null)}function gc(y,T,R,F){var X=y.stateNode;X.props=R,X.state=y.memoizedState,X.refs=Jr,ap(y);var ee=T.contextType;typeof ee=="object"&&ee!==null?X.context=xs(ee):(ee=ea(T)?is:fa.current,X.context=Hc(y,ee)),X.state=y.memoizedState,ee=T.getDerivedStateFromProps,typeof ee=="function"&&(Co(y,T,ee,R),X.state=y.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(T=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),T!==X.state&&as.enqueueReplaceState(X,X.state,null),Or(y,R,X,F),X.state=y.memoizedState),typeof X.componentDidMount=="function"&&(y.flags|=4194308)}function Ku(y,T,R){if(y=R.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(R._owner){if(R=R._owner,R){if(R.tag!==1)throw Error(t(309));var F=R.stateNode}if(!F)throw Error(t(147,y));var X=F,ee=""+y;return T!==null&&T.ref!==null&&typeof T.ref=="function"&&T.ref._stringRef===ee?T.ref:(T=function(ve){var Xe=X.refs;Xe===Jr&&(Xe=X.refs={}),ve===null?delete Xe[ee]:Xe[ee]=ve},T._stringRef=ee,T)}if(typeof y!="string")throw Error(t(284));if(!R._owner)throw Error(t(290,y))}return y}function Ks(y,T){throw y=Object.prototype.toString.call(T),Error(t(31,y==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":y))}function uo(y){var T=y._init;return T(y._payload)}function pd(y){function T(xt,ht){if(y){var Et=xt.deletions;Et===null?(xt.deletions=[ht],xt.flags|=16):Et.push(ht)}}function R(xt,ht){if(!y)return null;for(;ht!==null;)T(xt,ht),ht=ht.sibling;return null}function F(xt,ht){for(xt=new Map;ht!==null;)ht.key!==null?xt.set(ht.key,ht):xt.set(ht.index,ht),ht=ht.sibling;return xt}function X(xt,ht){return xt=Kh(xt,ht),xt.index=0,xt.sibling=null,xt}function ee(xt,ht,Et){return xt.index=Et,y?(Et=xt.alternate,Et!==null?(Et=Et.index,Et<ht?(xt.flags|=2,ht):Et):(xt.flags|=2,ht)):(xt.flags|=1048576,ht)}function ve(xt){return y&&xt.alternate===null&&(xt.flags|=2),xt}function Xe(xt,ht,Et,bn){return ht===null||ht.tag!==6?(ht=$f(Et,xt.mode,bn),ht.return=xt,ht):(ht=X(ht,Et),ht.return=xt,ht)}function at(xt,ht,Et,bn){var or=Et.type;return or===j?qt(xt,ht,Et.props.children,bn,Et.key):ht!==null&&(ht.elementType===or||typeof or=="object"&&or!==null&&or.$$typeof===be&&uo(or)===ht.type)?(bn=X(ht,Et.props),bn.ref=Ku(xt,ht,Et),bn.return=xt,bn):(bn=rm(Et.type,Et.key,Et.props,null,xt.mode,bn),bn.ref=Ku(xt,ht,Et),bn.return=xt,bn)}function Ot(xt,ht,Et,bn){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==Et.containerInfo||ht.stateNode.implementation!==Et.implementation?(ht=md(Et,xt.mode,bn),ht.return=xt,ht):(ht=X(ht,Et.children||[]),ht.return=xt,ht)}function qt(xt,ht,Et,bn,or){return ht===null||ht.tag!==7?(ht=Up(Et,xt.mode,bn,or),ht.return=xt,ht):(ht=X(ht,Et),ht.return=xt,ht)}function un(xt,ht,Et){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return ht=$f(""+ht,xt.mode,Et),ht.return=xt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case z:return Et=rm(ht.type,ht.key,ht.props,null,xt.mode,Et),Et.ref=Ku(xt,null,ht),Et.return=xt,Et;case G:return ht=md(ht,xt.mode,Et),ht.return=xt,ht;case be:var bn=ht._init;return un(xt,bn(ht._payload),Et)}if(Mt(ht)||oe(ht))return ht=Up(ht,xt.mode,Et,null),ht.return=xt,ht;Ks(xt,ht)}return null}function sn(xt,ht,Et,bn){var or=ht!==null?ht.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number")return or!==null?null:Xe(xt,ht,""+Et,bn);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case z:return Et.key===or?at(xt,ht,Et,bn):null;case G:return Et.key===or?Ot(xt,ht,Et,bn):null;case be:return or=Et._init,sn(xt,ht,or(Et._payload),bn)}if(Mt(Et)||oe(Et))return or!==null?null:qt(xt,ht,Et,bn,null);Ks(xt,Et)}return null}function Ln(xt,ht,Et,bn,or){if(typeof bn=="string"&&bn!==""||typeof bn=="number")return xt=xt.get(Et)||null,Xe(ht,xt,""+bn,or);if(typeof bn=="object"&&bn!==null){switch(bn.$$typeof){case z:return xt=xt.get(bn.key===null?Et:bn.key)||null,at(ht,xt,bn,or);case G:return xt=xt.get(bn.key===null?Et:bn.key)||null,Ot(ht,xt,bn,or);case be:var er=bn._init;return Ln(xt,ht,Et,er(bn._payload),or)}if(Mt(bn)||oe(bn))return xt=xt.get(Et)||null,qt(ht,xt,bn,or,null);Ks(ht,bn)}return null}function Jn(xt,ht,Et,bn){for(var or=null,er=null,pr=ht,kr=ht=0,Pl=null;pr!==null&&kr<Et.length;kr++){pr.index>kr?(Pl=pr,pr=null):Pl=pr.sibling;var cs=sn(xt,pr,Et[kr],bn);if(cs===null){pr===null&&(pr=Pl);break}y&&pr&&cs.alternate===null&&T(xt,pr),ht=ee(cs,ht,kr),er===null?or=cs:er.sibling=cs,er=cs,pr=Pl}if(kr===Et.length)return R(xt,pr),ss&&pc(xt,kr),or;if(pr===null){for(;kr<Et.length;kr++)pr=un(xt,Et[kr],bn),pr!==null&&(ht=ee(pr,ht,kr),er===null?or=pr:er.sibling=pr,er=pr);return ss&&pc(xt,kr),or}for(pr=F(xt,pr);kr<Et.length;kr++)Pl=Ln(pr,xt,kr,Et[kr],bn),Pl!==null&&(y&&Pl.alternate!==null&&pr.delete(Pl.key===null?kr:Pl.key),ht=ee(Pl,ht,kr),er===null?or=Pl:er.sibling=Pl,er=Pl);return y&&pr.forEach(function(jp){return T(xt,jp)}),ss&&pc(xt,kr),or}function nr(xt,ht,Et,bn){var or=oe(Et);if(typeof or!="function")throw Error(t(150));if(Et=or.call(Et),Et==null)throw Error(t(151));for(var er=or=null,pr=ht,kr=ht=0,Pl=null,cs=Et.next();pr!==null&&!cs.done;kr++,cs=Et.next()){pr.index>kr?(Pl=pr,pr=null):Pl=pr.sibling;var jp=sn(xt,pr,cs.value,bn);if(jp===null){pr===null&&(pr=Pl);break}y&&pr&&jp.alternate===null&&T(xt,pr),ht=ee(jp,ht,kr),er===null?or=jp:er.sibling=jp,er=jp,pr=Pl}if(cs.done)return R(xt,pr),ss&&pc(xt,kr),or;if(pr===null){for(;!cs.done;kr++,cs=Et.next())cs=un(xt,cs.value,bn),cs!==null&&(ht=ee(cs,ht,kr),er===null?or=cs:er.sibling=cs,er=cs);return ss&&pc(xt,kr),or}for(pr=F(xt,pr);!cs.done;kr++,cs=Et.next())cs=Ln(pr,xt,kr,cs.value,bn),cs!==null&&(y&&cs.alternate!==null&&pr.delete(cs.key===null?kr:cs.key),ht=ee(cs,ht,kr),er===null?or=cs:er.sibling=cs,er=cs);return y&&pr.forEach(function(g0){return T(xt,g0)}),ss&&pc(xt,kr),or}function Ao(xt,ht,Et,bn){if(typeof Et=="object"&&Et!==null&&Et.type===j&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case z:e:{for(var or=Et.key,er=ht;er!==null;){if(er.key===or){if(or=Et.type,or===j){if(er.tag===7){R(xt,er.sibling),ht=X(er,Et.props.children),ht.return=xt,xt=ht;break e}}else if(er.elementType===or||typeof or=="object"&&or!==null&&or.$$typeof===be&&uo(or)===er.type){R(xt,er.sibling),ht=X(er,Et.props),ht.ref=Ku(xt,er,Et),ht.return=xt,xt=ht;break e}R(xt,er);break}else T(xt,er);er=er.sibling}Et.type===j?(ht=Up(Et.props.children,xt.mode,bn,Et.key),ht.return=xt,xt=ht):(bn=rm(Et.type,Et.key,Et.props,null,xt.mode,bn),bn.ref=Ku(xt,ht,Et),bn.return=xt,xt=bn)}return ve(xt);case G:e:{for(er=Et.key;ht!==null;){if(ht.key===er)if(ht.tag===4&&ht.stateNode.containerInfo===Et.containerInfo&&ht.stateNode.implementation===Et.implementation){R(xt,ht.sibling),ht=X(ht,Et.children||[]),ht.return=xt,xt=ht;break e}else{R(xt,ht);break}else T(xt,ht);ht=ht.sibling}ht=md(Et,xt.mode,bn),ht.return=xt,xt=ht}return ve(xt);case be:return er=Et._init,Ao(xt,ht,er(Et._payload),bn)}if(Mt(Et))return Jn(xt,ht,Et,bn);if(oe(Et))return nr(xt,ht,Et,bn);Ks(xt,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"?(Et=""+Et,ht!==null&&ht.tag===6?(R(xt,ht.sibling),ht=X(ht,Et),ht.return=xt,xt=ht):(R(xt,ht),ht=$f(Et,xt.mode,bn),ht.return=xt,xt=ht),ve(xt)):R(xt,ht)}return Ao}var _a=pd(!0),wu=pd(!1),$u={},co=ui($u),ho=ui($u),Rl=ui($u);function Ho(y){if(y===$u)throw Error(t(174));return y}function Ju(y,T){switch(rs(Rl,T),rs(ho,y),rs(co,$u),y=T.nodeType,y){case 9:case 11:T=(T=T.documentElement)?T.namespaceURI:At(null,"");break;default:y=y===8?T.parentNode:T,T=y.namespaceURI||null,y=y.tagName,T=At(T,y)}qi(co),rs(co,T)}function qu(){qi(co),qi(ho),qi(Rl)}function bh(y){Ho(Rl.current);var T=Ho(co.current),R=At(T,y.type);T!==R&&(rs(ho,y),rs(co,R))}function Th(y){ho.current===y&&(qi(co),qi(ho))}var Rr=ui(0);function ys(y){for(var T=y;T!==null;){if(T.tag===13){var R=T.memoizedState;if(R!==null&&(R=R.dehydrated,R===null||R.data==="$?"||R.data==="$!"))return T}else if(T.tag===19&&T.memoizedProps.revealOrder!==void 0){if(T.flags&128)return T}else if(T.child!==null){T.child.return=T,T=T.child;continue}if(T===y)break;for(;T.sibling===null;){if(T.return===null||T.return===y)return null;T=T.return}T.sibling.return=T.return,T=T.sibling}return null}var ks=[];function Wa(){for(var y=0;y<ks.length;y++)ks[y]._workInProgressVersionPrimary=null;ks.length=0}var Gs=B.ReactCurrentDispatcher,hn=B.ReactCurrentBatchConfig,Vc=0,Tn=null,gi=null,$s=null,su=!1,kl=!1,Pt=0,hl=0;function Wr(){throw Error(t(321))}function Qu(y,T){if(T===null)return!1;for(var R=0;R<T.length&&R<y.length;R++)if(!Be(y[R],T[R]))return!1;return!0}function Vh(y,T,R,F,X,ee){if(Vc=ee,Tn=T,T.memoizedState=null,T.updateQueue=null,T.lanes=0,Gs.current=y===null||y.memoizedState===null?g:$,y=R(F,X),kl){ee=0;do{if(kl=!1,Pt=0,25<=ee)throw Error(t(301));ee+=1,$s=gi=null,T.updateQueue=null,Gs.current=A,y=R(F,X)}while(kl)}if(Gs.current=h,T=gi!==null&&gi.next!==null,Vc=0,$s=gi=Tn=null,su=!1,T)throw Error(t(300));return y}function jc(){var y=Pt!==0;return Pt=0,y}function oi(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $s===null?Tn.memoizedState=$s=y:$s=$s.next=y,$s}function ji(){if(gi===null){var y=Tn.alternate;y=y!==null?y.memoizedState:null}else y=gi.next;var T=$s===null?Tn.memoizedState:$s.next;if(T!==null)$s=T,gi=y;else{if(y===null)throw Error(t(310));gi=y,y={memoizedState:gi.memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},$s===null?Tn.memoizedState=$s=y:$s=$s.next=y}return $s}function Xc(y,T){return typeof T=="function"?T(y):T}function po(y){var T=ji(),R=T.queue;if(R===null)throw Error(t(311));R.lastRenderedReducer=y;var F=gi,X=F.baseQueue,ee=R.pending;if(ee!==null){if(X!==null){var ve=X.next;X.next=ee.next,ee.next=ve}F.baseQueue=X=ee,R.pending=null}if(X!==null){ee=X.next,F=F.baseState;var Xe=ve=null,at=null,Ot=ee;do{var qt=Ot.lane;if((Vc&qt)===qt)at!==null&&(at=at.next={lane:0,action:Ot.action,hasEagerState:Ot.hasEagerState,eagerState:Ot.eagerState,next:null}),F=Ot.hasEagerState?Ot.eagerState:y(F,Ot.action);else{var un={lane:qt,action:Ot.action,hasEagerState:Ot.hasEagerState,eagerState:Ot.eagerState,next:null};at===null?(Xe=at=un,ve=F):at=at.next=un,Tn.lanes|=qt,Nd|=qt}Ot=Ot.next}while(Ot!==null&&Ot!==ee);at===null?ve=F:at.next=Xe,Be(F,T.memoizedState)||(fn=!0),T.memoizedState=F,T.baseState=ve,T.baseQueue=at,R.lastRenderedState=F}if(y=R.interleaved,y!==null){X=y;do ee=X.lane,Tn.lanes|=ee,Nd|=ee,X=X.next;while(X!==y)}else X===null&&(R.lanes=0);return[T.memoizedState,R.dispatch]}function dl(y){var T=ji(),R=T.queue;if(R===null)throw Error(t(311));R.lastRenderedReducer=y;var F=R.dispatch,X=R.pending,ee=T.memoizedState;if(X!==null){R.pending=null;var ve=X=X.next;do ee=y(ee,ve.action),ve=ve.next;while(ve!==X);Be(ee,T.memoizedState)||(fn=!0),T.memoizedState=ee,T.baseQueue===null&&(T.baseState=ee),R.lastRenderedState=ee}return[ee,F]}function Yc(){}function _c(y,T){var R=Tn,F=ji(),X=T(),ee=!Be(F.memoizedState,X);if(ee&&(F.memoizedState=X,fn=!0),F=F.queue,ec(Js.bind(null,R,F,y),[y]),F.getSnapshot!==T||ee||$s!==null&&$s.memoizedState.tag&1){if(R.flags|=2048,Cu(9,Mo.bind(null,R,F,X,T),void 0,null),lu===null)throw Error(t(349));Vc&30||Zu(R,T,X)}return X}function Zu(y,T,R){y.flags|=16384,y={getSnapshot:T,value:R},T=Tn.updateQueue,T===null?(T={lastEffect:null,stores:null},Tn.updateQueue=T,T.stores=[y]):(R=T.stores,R===null?T.stores=[y]:R.push(y))}function Mo(y,T,R,F){T.value=R,T.getSnapshot=F,na(T)&&Sh(y)}function Js(y,T,R){return R(function(){na(T)&&Sh(y)})}function na(y){var T=y.getSnapshot;y=y.value;try{var R=T();return!Be(y,R)}catch{return!0}}function Sh(y){var T=Ga(y,1);T!==null&&ra(T,y,1,-1)}function fo(y){var T=oi();return typeof y=="function"&&(y=y()),T.memoizedState=T.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:y},T.queue=y,y=y.dispatch=Xh.bind(null,Tn,y),[T.memoizedState,y]}function Cu(y,T,R,F){return y={tag:y,create:T,destroy:R,deps:F,next:null},T=Tn.updateQueue,T===null?(T={lastEffect:null,stores:null},Tn.updateQueue=T,T.lastEffect=y.next=y):(R=T.lastEffect,R===null?T.lastEffect=y.next=y:(F=R.next,R.next=y,y.next=F,T.lastEffect=y)),y}function Kc(){return ji().memoizedState}function yc(y,T,R,F){var X=oi();Tn.flags|=y,X.memoizedState=Cu(1|T,R,void 0,F===void 0?null:F)}function Go(y,T,R,F){var X=ji();F=F===void 0?null:F;var ee=void 0;if(gi!==null){var ve=gi.memoizedState;if(ee=ve.destroy,F!==null&&Qu(F,ve.deps)){X.memoizedState=Cu(T,R,ee,F);return}}Tn.flags|=y,X.memoizedState=Cu(1|T,R,ee,F)}function mo(y,T){return yc(8390656,8,y,T)}function ec(y,T){return Go(2048,8,y,T)}function Ol(y,T){return Go(4,2,y,T)}function go(y,T){return Go(4,4,y,T)}function Ll(y,T){if(typeof T=="function")return y=y(),T(y),function(){T(null)};if(T!=null)return y=y(),T.current=y,function(){T.current=null}}function Va(y,T,R){return R=R!=null?R.concat([y]):null,Go(4,4,Ll.bind(null,T,y),R)}function ou(){}function ti(y,T){var R=ji();T=T===void 0?null:T;var F=R.memoizedState;return F!==null&&T!==null&&Qu(T,F[1])?F[0]:(R.memoizedState=[y,T],y)}function ls(y,T){var R=ji();T=T===void 0?null:T;var F=R.memoizedState;return F!==null&&T!==null&&Qu(T,F[1])?F[0]:(y=y(),R.memoizedState=[y,T],y)}function jh(y,T,R){return Vc&21?(Be(R,T)||(R=Yo(),Tn.lanes|=R,Nd|=R,y.baseState=!0),T):(y.baseState&&(y.baseState=!1,fn=!0),y.memoizedState=R)}function fd(y,T){var R=gr;gr=R!==0&&4>R?R:4,y(!0);var F=hn.transition;hn.transition={};try{y(!1),T()}finally{gr=R,hn.transition=F}}function ya(){return ji().memoizedState}function va(y,T,R){var F=Fd(y);if(R={lane:F,action:R,hasEagerState:!1,eagerState:null,next:null},vc(y))Np(T,R);else if(R=mi(y,T,R,F),R!==null){var X=Sc();ra(R,y,F,X),w(R,T,F)}}function Xh(y,T,R){var F=Fd(y),X={lane:F,action:R,hasEagerState:!1,eagerState:null,next:null};if(vc(y))Np(T,X);else{var ee=y.alternate;if(y.lanes===0&&(ee===null||ee.lanes===0)&&(ee=T.lastRenderedReducer,ee!==null))try{var ve=T.lastRenderedState,Xe=ee(ve,R);if(X.hasEagerState=!0,X.eagerState=Xe,Be(Xe,ve)){var at=T.interleaved;at===null?(X.next=X,Wc(T)):(X.next=at.next,at.next=X),T.interleaved=X;return}}catch{}finally{}R=mi(y,T,X,F),R!==null&&(X=Sc(),ra(R,y,F,X),w(R,T,F))}}function vc(y){var T=y.alternate;return y===Tn||T!==null&&T===Tn}function Np(y,T){kl=su=!0;var R=y.pending;R===null?T.next=T:(T.next=R.next,R.next=T),y.pending=T}function w(y,T,R){if(R&4194240){var F=T.lanes;F&=y.pendingLanes,R|=F,T.lanes=R,Ko(y,R)}}var h={readContext:xs,useCallback:Wr,useContext:Wr,useEffect:Wr,useImperativeHandle:Wr,useInsertionEffect:Wr,useLayoutEffect:Wr,useMemo:Wr,useReducer:Wr,useRef:Wr,useState:Wr,useDebugValue:Wr,useDeferredValue:Wr,useTransition:Wr,useMutableSource:Wr,useSyncExternalStore:Wr,useId:Wr,unstable_isNewReconciler:!1},g={readContext:xs,useCallback:function(y,T){return oi().memoizedState=[y,T===void 0?null:T],y},useContext:xs,useEffect:mo,useImperativeHandle:function(y,T,R){return R=R!=null?R.concat([y]):null,yc(4194308,4,Ll.bind(null,T,y),R)},useLayoutEffect:function(y,T){return yc(4194308,4,y,T)},useInsertionEffect:function(y,T){return yc(4,2,y,T)},useMemo:function(y,T){var R=oi();return T=T===void 0?null:T,y=y(),R.memoizedState=[y,T],y},useReducer:function(y,T,R){var F=oi();return T=R!==void 0?R(T):T,F.memoizedState=F.baseState=T,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:T},F.queue=y,y=y.dispatch=va.bind(null,Tn,y),[F.memoizedState,y]},useRef:function(y){var T=oi();return y={current:y},T.memoizedState=y},useState:fo,useDebugValue:ou,useDeferredValue:function(y){return oi().memoizedState=y},useTransition:function(){var y=fo(!1),T=y[0];return y=fd.bind(null,y[1]),oi().memoizedState=y,[T,y]},useMutableSource:function(){},useSyncExternalStore:function(y,T,R){var F=Tn,X=oi();if(ss){if(R===void 0)throw Error(t(407));R=R()}else{if(R=T(),lu===null)throw Error(t(349));Vc&30||Zu(F,T,R)}X.memoizedState=R;var ee={value:R,getSnapshot:T};return X.queue=ee,mo(Js.bind(null,F,ee,y),[y]),F.flags|=2048,Cu(9,Mo.bind(null,F,ee,R,T),void 0,null),R},useId:function(){var y=oi(),T=lu.identifierPrefix;if(ss){var R=ll,F=_n;R=(F&~(1<<32-Ur(F)-1)).toString(32)+R,T=":"+T+"R"+R,R=Pt++,0<R&&(T+="H"+R.toString(32)),T+=":"}else R=hl++,T=":"+T+"r"+R.toString(32)+":";return y.memoizedState=T},unstable_isNewReconciler:!1},$={readContext:xs,useCallback:ti,useContext:xs,useEffect:ec,useImperativeHandle:Va,useInsertionEffect:Ol,useLayoutEffect:go,useMemo:ls,useReducer:po,useRef:Kc,useState:function(){return po(Xc)},useDebugValue:ou,useDeferredValue:function(y){var T=ji();return jh(T,gi.memoizedState,y)},useTransition:function(){var y=po(Xc)[0],T=ji().memoizedState;return[y,T]},useMutableSource:Yc,useSyncExternalStore:_c,useId:ya,unstable_isNewReconciler:!1},A={readContext:xs,useCallback:ti,useContext:xs,useEffect:ec,useImperativeHandle:Va,useInsertionEffect:Ol,useLayoutEffect:go,useMemo:ls,useReducer:dl,useRef:Kc,useState:function(){return dl(Xc)},useDebugValue:ou,useDeferredValue:function(y){var T=ji();return gi===null?T.memoizedState=y:jh(T,gi.memoizedState,y)},useTransition:function(){var y=dl(Xc)[0],T=ji().memoizedState;return[y,T]},useMutableSource:Yc,useSyncExternalStore:_c,useId:ya,unstable_isNewReconciler:!1};function N(y,T){try{var R="",F=T;do R+=qe(F),F=F.return;while(F);var X=R}catch(ee){X=`
Error generating stack: `+ee.message+`
`+ee.stack}return{value:y,source:T,stack:X,digest:null}}function W(y,T,R){return{value:y,source:null,stack:R??null,digest:T??null}}function de(y,T){try{console.error(T.value)}catch(R){setTimeout(function(){throw R})}}var ke=typeof WeakMap=="function"?WeakMap:Map;function Qe(y,T,R){R=ta(-1,R),R.tag=3,R.payload={element:null};var F=T.value;return R.callback=function(){Hm||(Hm=!0,Gm=F),de(y,T)},R}function St(y,T,R){R=ta(-1,R),R.tag=3;var F=y.type.getDerivedStateFromError;if(typeof F=="function"){var X=T.value;R.payload=function(){return F(X)},R.callback=function(){de(y,T)}}var ee=y.stateNode;return ee!==null&&typeof ee.componentDidCatch=="function"&&(R.callback=function(){de(y,T),typeof F!="function"&&(yo===null?yo=new Set([this]):yo.add(this));var ve=T.stack;this.componentDidCatch(T.value,{componentStack:ve!==null?ve:""})}),R}function Jt(y,T,R){var F=y.pingCache;if(F===null){F=y.pingCache=new ke;var X=new Set;F.set(T,X)}else X=F.get(T),X===void 0&&(X=new Set,F.set(T,X));X.has(R)||(X.add(R),y=d_.bind(null,y,T,R),T.then(y,y))}function ln(y){do{var T;if((T=y.tag===13)&&(T=y.memoizedState,T=T!==null?T.dehydrated!==null:!0),T)return y;y=y.return}while(y!==null);return null}function yn(y,T,R,F,X){return y.mode&1?(y.flags|=65536,y.lanes=X,y):(y===T?y.flags|=65536:(y.flags|=128,R.flags|=131072,R.flags&=-52805,R.tag===1&&(R.alternate===null?R.tag=17:(T=ta(-1,1),T.tag=2,Vi(R,T,1))),R.lanes|=1),y)}var vn=B.ReactCurrentOwner,fn=!1;function Lr(y,T,R,F){T.child=y===null?wu(T,null,R,F):_a(T,y.child,R,F)}function bt(y,T,R,F,X){R=R.render;var ee=T.ref;return Ha(T,X),F=Vh(y,T,R,F,ee,X),R=jc(),y!==null&&!fn?(T.updateQueue=y.updateQueue,T.flags&=-2053,y.lanes&=~X,Yh(y,T,X)):(ss&&R&&nu(T),T.flags|=1,Lr(y,T,F,X),T.child)}function Ce(y,T,R,F,X){if(y===null){var ee=R.type;return typeof ee=="function"&&!Eg(ee)&&ee.defaultProps===void 0&&R.compare===null&&R.defaultProps===void 0?(T.tag=15,T.type=ee,Le(y,T,ee,F,X)):(y=rm(R.type,null,F,T,T.mode,X),y.ref=T.ref,y.return=T,T.child=y)}if(ee=y.child,(y.lanes&X)===0){var ve=ee.memoizedProps;if(R=R.compare,R=R!==null?R:kt,R(ve,F)&&y.ref===T.ref)return Yh(y,T,X)}return T.flags|=1,y=Kh(ee,F),y.ref=T.ref,y.return=T,T.child=y}function Le(y,T,R,F,X){if(y!==null){var ee=y.memoizedProps;if(kt(ee,F)&&y.ref===T.ref)if(fn=!1,T.pendingProps=F=ee,(y.lanes&X)!==0)y.flags&131072&&(fn=!0);else return T.lanes=y.lanes,Yh(y,T,X)}return rn(y,T,R,F,X)}function rt(y,T,R){var F=T.pendingProps,X=F.children,ee=y!==null?y.memoizedState:null;if(F.mode==="hidden")if(!(T.mode&1))T.memoizedState={baseLanes:0,cachePool:null,transitions:null},rs(Tf,uu),uu|=R;else{if(!(R&1073741824))return y=ee!==null?ee.baseLanes|R:R,T.lanes=T.childLanes=1073741824,T.memoizedState={baseLanes:y,cachePool:null,transitions:null},T.updateQueue=null,rs(Tf,uu),uu|=y,null;T.memoizedState={baseLanes:0,cachePool:null,transitions:null},F=ee!==null?ee.baseLanes:R,rs(Tf,uu),uu|=F}else ee!==null?(F=ee.baseLanes|R,T.memoizedState=null):F=R,rs(Tf,uu),uu|=F;return Lr(y,T,X,R),T.child}function Ut(y,T){var R=T.ref;(y===null&&R!==null||y!==null&&y.ref!==R)&&(T.flags|=512,T.flags|=2097152)}function rn(y,T,R,F,X){var ee=ea(R)?is:fa.current;return ee=Hc(T,ee),Ha(T,X),R=Vh(y,T,R,F,ee,X),F=jc(),y!==null&&!fn?(T.updateQueue=y.updateQueue,T.flags&=-2053,y.lanes&=~X,Yh(y,T,X)):(ss&&F&&nu(T),T.flags|=1,Lr(y,T,R,X),T.child)}function Sn(y,T,R,F,X){if(ea(R)){var ee=!0;Us(T)}else ee=!1;if(Ha(T,X),T.stateNode===null)up(y,T),iu(T,R,F),gc(T,R,F,X),F=!0;else if(y===null){var ve=T.stateNode,Xe=T.memoizedProps;ve.props=Xe;var at=ve.context,Ot=R.contextType;typeof Ot=="object"&&Ot!==null?Ot=xs(Ot):(Ot=ea(R)?is:fa.current,Ot=Hc(T,Ot));var qt=R.getDerivedStateFromProps,un=typeof qt=="function"||typeof ve.getSnapshotBeforeUpdate=="function";un||typeof ve.UNSAFE_componentWillReceiveProps!="function"&&typeof ve.componentWillReceiveProps!="function"||(Xe!==F||at!==Ot)&&Yu(T,ve,F,Ot),mc=!1;var sn=T.memoizedState;ve.state=sn,Or(T,F,ve,X),at=T.memoizedState,Xe!==F||sn!==at||ma.current||mc?(typeof qt=="function"&&(Co(T,R,qt,F),at=T.memoizedState),(Xe=mc||Qi(T,R,Xe,F,sn,at,Ot))?(un||typeof ve.UNSAFE_componentWillMount!="function"&&typeof ve.componentWillMount!="function"||(typeof ve.componentWillMount=="function"&&ve.componentWillMount(),typeof ve.UNSAFE_componentWillMount=="function"&&ve.UNSAFE_componentWillMount()),typeof ve.componentDidMount=="function"&&(T.flags|=4194308)):(typeof ve.componentDidMount=="function"&&(T.flags|=4194308),T.memoizedProps=F,T.memoizedState=at),ve.props=F,ve.state=at,ve.context=Ot,F=Xe):(typeof ve.componentDidMount=="function"&&(T.flags|=4194308),F=!1)}else{ve=T.stateNode,vh(y,T),Xe=T.memoizedProps,Ot=T.type===T.elementType?Xe:xu(T.type,Xe),ve.props=Ot,un=T.pendingProps,sn=ve.context,at=R.contextType,typeof at=="object"&&at!==null?at=xs(at):(at=ea(R)?is:fa.current,at=Hc(T,at));var Ln=R.getDerivedStateFromProps;(qt=typeof Ln=="function"||typeof ve.getSnapshotBeforeUpdate=="function")||typeof ve.UNSAFE_componentWillReceiveProps!="function"&&typeof ve.componentWillReceiveProps!="function"||(Xe!==un||sn!==at)&&Yu(T,ve,F,at),mc=!1,sn=T.memoizedState,ve.state=sn,Or(T,F,ve,X);var Jn=T.memoizedState;Xe!==un||sn!==Jn||ma.current||mc?(typeof Ln=="function"&&(Co(T,R,Ln,F),Jn=T.memoizedState),(Ot=mc||Qi(T,R,Ot,F,sn,Jn,at)||!1)?(qt||typeof ve.UNSAFE_componentWillUpdate!="function"&&typeof ve.componentWillUpdate!="function"||(typeof ve.componentWillUpdate=="function"&&ve.componentWillUpdate(F,Jn,at),typeof ve.UNSAFE_componentWillUpdate=="function"&&ve.UNSAFE_componentWillUpdate(F,Jn,at)),typeof ve.componentDidUpdate=="function"&&(T.flags|=4),typeof ve.getSnapshotBeforeUpdate=="function"&&(T.flags|=1024)):(typeof ve.componentDidUpdate!="function"||Xe===y.memoizedProps&&sn===y.memoizedState||(T.flags|=4),typeof ve.getSnapshotBeforeUpdate!="function"||Xe===y.memoizedProps&&sn===y.memoizedState||(T.flags|=1024),T.memoizedProps=F,T.memoizedState=Jn),ve.props=F,ve.state=Jn,ve.context=at,F=Ot):(typeof ve.componentDidUpdate!="function"||Xe===y.memoizedProps&&sn===y.memoizedState||(T.flags|=4),typeof ve.getSnapshotBeforeUpdate!="function"||Xe===y.memoizedProps&&sn===y.memoizedState||(T.flags|=1024),F=!1)}return An(y,T,R,F,ee,X)}function An(y,T,R,F,X,ee){Ut(y,T);var ve=(T.flags&128)!==0;if(!F&&!ve)return X&&jn(T,R,!1),Yh(y,T,ee);F=T.stateNode,vn.current=T;var Xe=ve&&typeof R.getDerivedStateFromError!="function"?null:F.render();return T.flags|=1,y!==null&&ve?(T.child=_a(T,y.child,null,ee),T.child=_a(T,null,Xe,ee)):Lr(y,T,Xe,ee),T.memoizedState=F.state,X&&jn(T,R,!0),T.child}function Bn(y){var T=y.stateNode;T.pendingContext?Ad(y,T.pendingContext,T.pendingContext!==T.context):T.context&&Ad(y,T.context,!1),Ju(y,T.containerInfo)}function cr(y,T,R,F,X){return Uo(),$o(X),T.flags|=256,Lr(y,T,R,F),T.child}var Cr={dehydrated:null,treeContext:null,retryLane:0};function Dl(y){return{baseLanes:y,cachePool:null,transitions:null}}function lp(y,T,R){var F=T.pendingProps,X=Rr.current,ee=!1,ve=(T.flags&128)!==0,Xe;if((Xe=ve)||(Xe=y!==null&&y.memoizedState===null?!1:(X&2)!==0),Xe?(ee=!0,T.flags&=-129):(y===null||y.memoizedState!==null)&&(X|=1),rs(Rr,X&1),y===null)return Ii(T),y=T.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?(T.mode&1?y.data==="$!"?T.lanes=8:T.lanes=1073741824:T.lanes=1,null):(ve=F.children,y=F.fallback,ee?(F=T.mode,ee=T.child,ve={mode:"hidden",children:ve},!(F&1)&&ee!==null?(ee.childLanes=0,ee.pendingProps=ve):ee=Hp(ve,F,0,null),y=Up(y,F,R,null),ee.return=T,y.return=T,ee.sibling=y,T.child=ee,T.child.memoizedState=Dl(R),T.memoizedState=Cr,y):Eh(T,ve));if(X=y.memoizedState,X!==null&&(Xe=X.dehydrated,Xe!==null))return Jc(y,T,ve,F,Xe,X,R);if(ee){ee=F.fallback,ve=T.mode,X=y.child,Xe=X.sibling;var at={mode:"hidden",children:F.children};return!(ve&1)&&T.child!==X?(F=T.child,F.childLanes=0,F.pendingProps=at,T.deletions=null):(F=Kh(X,at),F.subtreeFlags=X.subtreeFlags&14680064),Xe!==null?ee=Kh(Xe,ee):(ee=Up(ee,ve,R,null),ee.flags|=2),ee.return=T,F.return=T,F.sibling=ee,T.child=F,F=ee,ee=T.child,ve=y.child.memoizedState,ve=ve===null?Dl(R):{baseLanes:ve.baseLanes|R,cachePool:null,transitions:ve.transitions},ee.memoizedState=ve,ee.childLanes=y.childLanes&~R,T.memoizedState=Cr,F}return ee=y.child,y=ee.sibling,F=Kh(ee,{mode:"visible",children:F.children}),!(T.mode&1)&&(F.lanes=R),F.return=T,F.sibling=null,y!==null&&(R=T.deletions,R===null?(T.deletions=[y],T.flags|=16):R.push(y)),T.child=F,T.memoizedState=null,F}function Eh(y,T){return T=Hp({mode:"visible",children:T},y.mode,0,null),T.return=y,y.child=T}function on(y,T,R,F){return F!==null&&$o(F),_a(T,y.child,null,R),y=Eh(T,T.pendingProps.children),y.flags|=2,T.memoizedState=null,y}function Jc(y,T,R,F,X,ee,ve){if(R)return T.flags&256?(T.flags&=-257,F=W(Error(t(422))),on(y,T,ve,F)):T.memoizedState!==null?(T.child=y.child,T.flags|=128,null):(ee=F.fallback,X=T.mode,F=Hp({mode:"visible",children:F.children},X,0,null),ee=Up(ee,X,ve,null),ee.flags|=2,F.return=T,ee.return=T,F.sibling=ee,T.child=F,T.mode&1&&_a(T,y.child,null,ve),T.child.memoizedState=Dl(ve),T.memoizedState=Cr,ee);if(!(T.mode&1))return on(y,T,ve,null);if(X.data==="$!"){if(F=X.nextSibling&&X.nextSibling.dataset,F)var Xe=F.dgst;return F=Xe,ee=Error(t(419)),F=W(ee,F,void 0),on(y,T,ve,F)}if(Xe=(ve&y.childLanes)!==0,fn||Xe){if(F=lu,F!==null){switch(ve&-ve){case 4:X=2;break;case 16:X=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:X=32;break;case 536870912:X=268435456;break;default:X=0}X=X&(F.suspendedLanes|ve)?0:X,X!==0&&X!==ee.retryLane&&(ee.retryLane=X,Ga(y,X),ra(F,y,X,-1))}return tm(),F=W(Error(t(421))),on(y,T,ve,F)}return X.data==="$?"?(T.flags|=128,T.child=y.child,T=nm.bind(null,y),X._reactRetry=T,null):(y=ee.treeContext,ul=dc(X.nextSibling),_s=T,ss=!0,cl=null,y!==null&&(lo[ga++]=_n,lo[ga++]=ll,lo[ga++]=wn,_n=y.id,ll=y.overflow,wn=T),T=Eh(T,F.children),T.flags|=4096,T)}function jf(y,T,R){y.lanes|=T;var F=y.alternate;F!==null&&(F.lanes|=T),os(y.return,T,R)}function ba(y,T,R,F,X){var ee=y.memoizedState;ee===null?y.memoizedState={isBackwards:T,rendering:null,renderingStartTime:0,last:F,tail:R,tailMode:X}:(ee.isBackwards=T,ee.rendering=null,ee.renderingStartTime=0,ee.last=F,ee.tail=R,ee.tailMode=X)}function pl(y,T,R){var F=T.pendingProps,X=F.revealOrder,ee=F.tail;if(Lr(y,T,F.children,R),F=Rr.current,(F&2)!==0)F=F&1|2,T.flags|=128;else{if(y!==null&&y.flags&128)e:for(y=T.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&jf(y,R,T);else if(y.tag===19)jf(y,R,T);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===T)break e;for(;y.sibling===null;){if(y.return===null||y.return===T)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}F&=1}if(rs(Rr,F),(T.mode&1)===0)T.memoizedState=null;else switch(X){case"forwards":for(R=T.child,X=null;R!==null;)y=R.alternate,y!==null&&ys(y)===null&&(X=R),R=R.sibling;R=X,R===null?(X=T.child,T.child=null):(X=R.sibling,R.sibling=null),ba(T,!1,X,R,ee);break;case"backwards":for(R=null,X=T.child,T.child=null;X!==null;){if(y=X.alternate,y!==null&&ys(y)===null){T.child=X;break}y=X.sibling,X.sibling=R,R=X,X=y}ba(T,!0,R,null,ee);break;case"together":ba(T,!1,null,null,void 0);break;default:T.memoizedState=null}return T.child}function up(y,T){!(T.mode&1)&&y!==null&&(y.alternate=null,T.alternate=null,T.flags|=2)}function Yh(y,T,R){if(y!==null&&(T.dependencies=y.dependencies),Nd|=T.lanes,(R&T.childLanes)===0)return null;if(y!==null&&T.child!==y.child)throw Error(t(153));if(T.child!==null){for(y=T.child,R=Kh(y,y.pendingProps),T.child=R,R.return=T;y.sibling!==null;)y=y.sibling,R=R.sibling=Kh(y,y.pendingProps),R.return=T;R.sibling=null}return T.child}function us(y,T,R){switch(T.tag){case 3:Bn(T),Uo();break;case 5:bh(T);break;case 1:ea(T.type)&&Us(T);break;case 4:Ju(T,T.stateNode.containerInfo);break;case 10:var F=T.type._context,X=T.memoizedProps.value;rs(Il,F._currentValue),F._currentValue=X;break;case 13:if(F=T.memoizedState,F!==null)return F.dehydrated!==null?(rs(Rr,Rr.current&1),T.flags|=128,null):R&T.child.childLanes?lp(y,T,R):(rs(Rr,Rr.current&1),y=Yh(y,T,R),y!==null?y.sibling:null);rs(Rr,Rr.current&1);break;case 19:if(F=(R&T.childLanes)!==0,(y.flags&128)!==0){if(F)return pl(y,T,R);T.flags|=128}if(X=T.memoizedState,X!==null&&(X.rendering=null,X.tail=null,X.lastEffect=null),rs(Rr,Rr.current),F)break;return null;case 22:case 23:return T.lanes=0,rt(y,T,R)}return Yh(y,T,R)}var mn,o0,yg,Um;mn=function(y,T){for(var R=T.child;R!==null;){if(R.tag===5||R.tag===6)y.appendChild(R.stateNode);else if(R.tag!==4&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===T)break;for(;R.sibling===null;){if(R.return===null||R.return===T)return;R=R.return}R.sibling.return=R.return,R=R.sibling}},o0=function(){},yg=function(y,T,R,F){var X=y.memoizedProps;if(X!==F){y=T.stateNode,Ho(co.current);var ee=null;switch(R){case"input":X=nt(y,X),F=nt(y,F),ee=[];break;case"select":X=se({},X,{value:void 0}),F=se({},F,{value:void 0}),ee=[];break;case"textarea":X=xe(y,X),F=xe(y,F),ee=[];break;default:typeof X.onClick!="function"&&typeof F.onClick=="function"&&(y.onclick=eu)}Gt(R,F);var ve;R=null;for(Ot in X)if(!F.hasOwnProperty(Ot)&&X.hasOwnProperty(Ot)&&X[Ot]!=null)if(Ot==="style"){var Xe=X[Ot];for(ve in Xe)Xe.hasOwnProperty(ve)&&(R||(R={}),R[ve]="")}else Ot!=="dangerouslySetInnerHTML"&&Ot!=="children"&&Ot!=="suppressContentEditableWarning"&&Ot!=="suppressHydrationWarning"&&Ot!=="autoFocus"&&(s.hasOwnProperty(Ot)?ee||(ee=[]):(ee=ee||[]).push(Ot,null));for(Ot in F){var at=F[Ot];if(Xe=X!=null?X[Ot]:void 0,F.hasOwnProperty(Ot)&&at!==Xe&&(at!=null||Xe!=null))if(Ot==="style")if(Xe){for(ve in Xe)!Xe.hasOwnProperty(ve)||at&&at.hasOwnProperty(ve)||(R||(R={}),R[ve]="");for(ve in at)at.hasOwnProperty(ve)&&Xe[ve]!==at[ve]&&(R||(R={}),R[ve]=at[ve])}else R||(ee||(ee=[]),ee.push(Ot,R)),R=at;else Ot==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,Xe=Xe?Xe.__html:void 0,at!=null&&Xe!==at&&(ee=ee||[]).push(Ot,at)):Ot==="children"?typeof at!="string"&&typeof at!="number"||(ee=ee||[]).push(Ot,""+at):Ot!=="suppressContentEditableWarning"&&Ot!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ot)?(at!=null&&Ot==="onScroll"&&Pi("scroll",y),ee||Xe===at||(ee=[])):(ee=ee||[]).push(Ot,at))}R&&(ee=ee||[]).push("style",R);var Ot=ee;(T.updateQueue=Ot)&&(T.flags|=4)}},Um=function(y,T,R,F){R!==F&&(T.flags|=4)};function bc(y,T){if(!ss)switch(y.tailMode){case"hidden":T=y.tail;for(var R=null;T!==null;)T.alternate!==null&&(R=T),T=T.sibling;R===null?y.tail=null:R.sibling=null;break;case"collapsed":R=y.tail;for(var F=null;R!==null;)R.alternate!==null&&(F=R),R=R.sibling;F===null?T||y.tail===null?y.tail=null:y.tail.sibling=null:F.sibling=null}}function qs(y){var T=y.alternate!==null&&y.alternate.child===y.child,R=0,F=0;if(T)for(var X=y.child;X!==null;)R|=X.lanes|X.childLanes,F|=X.subtreeFlags&14680064,F|=X.flags&14680064,X.return=y,X=X.sibling;else for(X=y.child;X!==null;)R|=X.lanes|X.childLanes,F|=X.subtreeFlags,F|=X.flags,X.return=y,X=X.sibling;return y.subtreeFlags|=F,y.childLanes=R,T}function Bp(y,T,R){var F=T.pendingProps;switch(wo(T),T.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(T),null;case 1:return ea(T.type)&&Md(),qs(T),null;case 3:return F=T.stateNode,qu(),qi(ma),qi(fa),Wa(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(y===null||y.child===null)&&(Gc(T)?T.flags|=4:y===null||y.memoizedState.isDehydrated&&!(T.flags&256)||(T.flags|=1024,cl!==null&&(u0(cl),cl=null))),o0(y,T),qs(T),null;case 5:Th(T);var X=Ho(Rl.current);if(R=T.type,y!==null&&T.stateNode!=null)yg(y,T,R,F,X),y.ref!==T.ref&&(T.flags|=512,T.flags|=2097152);else{if(!F){if(T.stateNode===null)throw Error(t(166));return qs(T),null}if(y=Ho(co.current),Gc(T)){F=T.stateNode,R=T.type;var ee=T.memoizedProps;switch(F[Gr]=T,F[ol]=ee,y=(T.mode&1)!==0,R){case"dialog":Pi("cancel",F),Pi("close",F);break;case"iframe":case"object":case"embed":Pi("load",F);break;case"video":case"audio":for(X=0;X<Qo.length;X++)Pi(Qo[X],F);break;case"source":Pi("error",F);break;case"img":case"image":case"link":Pi("error",F),Pi("load",F);break;case"details":Pi("toggle",F);break;case"input":tt(F,ee),Pi("invalid",F);break;case"select":F._wrapperState={wasMultiple:!!ee.multiple},Pi("invalid",F);break;case"textarea":ie(F,ee),Pi("invalid",F)}Gt(R,ee),X=null;for(var ve in ee)if(ee.hasOwnProperty(ve)){var Xe=ee[ve];ve==="children"?typeof Xe=="string"?F.textContent!==Xe&&(ee.suppressHydrationWarning!==!0&&Cl(F.textContent,Xe,y),X=["children",Xe]):typeof Xe=="number"&&F.textContent!==""+Xe&&(ee.suppressHydrationWarning!==!0&&Cl(F.textContent,Xe,y),X=["children",""+Xe]):s.hasOwnProperty(ve)&&Xe!=null&&ve==="onScroll"&&Pi("scroll",F)}switch(R){case"input":Ue(F),yt(F,ee,!0);break;case"textarea":Ue(F),ct(F);break;case"select":case"option":break;default:typeof ee.onClick=="function"&&(F.onclick=eu)}F=X,T.updateQueue=F,F!==null&&(T.flags|=4)}else{ve=X.nodeType===9?X:X.ownerDocument,y==="http://www.w3.org/1999/xhtml"&&(y=Tt(R)),y==="http://www.w3.org/1999/xhtml"?R==="script"?(y=ve.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild)):typeof F.is=="string"?y=ve.createElement(R,{is:F.is}):(y=ve.createElement(R),R==="select"&&(ve=y,F.multiple?ve.multiple=!0:F.size&&(ve.size=F.size))):y=ve.createElementNS(y,R),y[Gr]=T,y[ol]=F,mn(y,T,!1,!1),T.stateNode=y;e:{switch(ve=He(R,F),R){case"dialog":Pi("cancel",y),Pi("close",y),X=F;break;case"iframe":case"object":case"embed":Pi("load",y),X=F;break;case"video":case"audio":for(X=0;X<Qo.length;X++)Pi(Qo[X],y);X=F;break;case"source":Pi("error",y),X=F;break;case"img":case"image":case"link":Pi("error",y),Pi("load",y),X=F;break;case"details":Pi("toggle",y),X=F;break;case"input":tt(y,F),X=nt(y,F),Pi("invalid",y);break;case"option":X=F;break;case"select":y._wrapperState={wasMultiple:!!F.multiple},X=se({},F,{value:void 0}),Pi("invalid",y);break;case"textarea":ie(y,F),X=xe(y,F),Pi("invalid",y);break;default:X=F}Gt(R,X),Xe=X;for(ee in Xe)if(Xe.hasOwnProperty(ee)){var at=Xe[ee];ee==="style"?Ie(y,at):ee==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,at!=null&&Ke(y,at)):ee==="children"?typeof at=="string"?(R!=="textarea"||at!=="")&&Oe(y,at):typeof at=="number"&&Oe(y,""+at):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(s.hasOwnProperty(ee)?at!=null&&ee==="onScroll"&&Pi("scroll",y):at!=null&&P(y,ee,at,ve))}switch(R){case"input":Ue(y),yt(y,F,!1);break;case"textarea":Ue(y),ct(y);break;case"option":F.value!=null&&y.setAttribute("value",""+st(F.value));break;case"select":y.multiple=!!F.multiple,ee=F.value,ee!=null?mt(y,!!F.multiple,ee,!1):F.defaultValue!=null&&mt(y,!!F.multiple,F.defaultValue,!0);break;default:typeof X.onClick=="function"&&(y.onclick=eu)}switch(R){case"button":case"input":case"select":case"textarea":F=!!F.autoFocus;break e;case"img":F=!0;break e;default:F=!1}}F&&(T.flags|=4)}T.ref!==null&&(T.flags|=512,T.flags|=2097152)}return qs(T),null;case 6:if(y&&T.stateNode!=null)Um(y,T,y.memoizedProps,F);else{if(typeof F!="string"&&T.stateNode===null)throw Error(t(166));if(R=Ho(Rl.current),Ho(co.current),Gc(T)){if(F=T.stateNode,R=T.memoizedProps,F[Gr]=T,(ee=F.nodeValue!==R)&&(y=_s,y!==null))switch(y.tag){case 3:Cl(F.nodeValue,R,(y.mode&1)!==0);break;case 5:y.memoizedProps.suppressHydrationWarning!==!0&&Cl(F.nodeValue,R,(y.mode&1)!==0)}ee&&(T.flags|=4)}else F=(R.nodeType===9?R:R.ownerDocument).createTextNode(F),F[Gr]=T,T.stateNode=F}return qs(T),null;case 13:if(qi(Rr),F=T.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(ss&&ul!==null&&T.mode&1&&!(T.flags&128))Wh(),Uo(),T.flags|=98560,ee=!1;else if(ee=Gc(T),F!==null&&F.dehydrated!==null){if(y===null){if(!ee)throw Error(t(318));if(ee=T.memoizedState,ee=ee!==null?ee.dehydrated:null,!ee)throw Error(t(317));ee[Gr]=T}else Uo(),!(T.flags&128)&&(T.memoizedState=null),T.flags|=4;qs(T),ee=!1}else cl!==null&&(u0(cl),cl=null),ee=!0;if(!ee)return T.flags&65536?T:null}return T.flags&128?(T.lanes=R,T):(F=F!==null,F!==(y!==null&&y.memoizedState!==null)&&F&&(T.child.flags|=8192,T.mode&1&&(y===null||Rr.current&1?Nl===0&&(Nl=3):tm())),T.updateQueue!==null&&(T.flags|=4),qs(T),null);case 4:return qu(),o0(y,T),y===null&&Zl(T.stateNode.containerInfo),qs(T),null;case 10:return Xu(T.type._context),qs(T),null;case 17:return ea(T.type)&&Md(),qs(T),null;case 19:if(qi(Rr),ee=T.memoizedState,ee===null)return qs(T),null;if(F=(T.flags&128)!==0,ve=ee.rendering,ve===null)if(F)bc(ee,!1);else{if(Nl!==0||y!==null&&y.flags&128)for(y=T.child;y!==null;){if(ve=ys(y),ve!==null){for(T.flags|=128,bc(ee,!1),F=ve.updateQueue,F!==null&&(T.updateQueue=F,T.flags|=4),T.subtreeFlags=0,F=R,R=T.child;R!==null;)ee=R,y=F,ee.flags&=14680066,ve=ee.alternate,ve===null?(ee.childLanes=0,ee.lanes=y,ee.child=null,ee.subtreeFlags=0,ee.memoizedProps=null,ee.memoizedState=null,ee.updateQueue=null,ee.dependencies=null,ee.stateNode=null):(ee.childLanes=ve.childLanes,ee.lanes=ve.lanes,ee.child=ve.child,ee.subtreeFlags=0,ee.deletions=null,ee.memoizedProps=ve.memoizedProps,ee.memoizedState=ve.memoizedState,ee.updateQueue=ve.updateQueue,ee.type=ve.type,y=ve.dependencies,ee.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),R=R.sibling;return rs(Rr,Rr.current&1|2),T.child}y=y.sibling}ee.tail!==null&&en()>Zc&&(T.flags|=128,F=!0,bc(ee,!1),T.lanes=4194304)}else{if(!F)if(y=ys(ve),y!==null){if(T.flags|=128,F=!0,R=y.updateQueue,R!==null&&(T.updateQueue=R,T.flags|=4),bc(ee,!0),ee.tail===null&&ee.tailMode==="hidden"&&!ve.alternate&&!ss)return qs(T),null}else 2*en()-ee.renderingStartTime>Zc&&R!==1073741824&&(T.flags|=128,F=!0,bc(ee,!1),T.lanes=4194304);ee.isBackwards?(ve.sibling=T.child,T.child=ve):(R=ee.last,R!==null?R.sibling=ve:T.child=ve,ee.last=ve)}return ee.tail!==null?(T=ee.tail,ee.rendering=T,ee.tail=T.sibling,ee.renderingStartTime=en(),T.sibling=null,R=Rr.current,rs(Rr,F?R&1|2:R&1),T):(qs(T),null);case 22:case 23:return h0(),F=T.memoizedState!==null,y!==null&&y.memoizedState!==null!==F&&(T.flags|=8192),F&&T.mode&1?uu&1073741824&&(qs(T),T.subtreeFlags&6&&(T.flags|=8192)):qs(T),null;case 24:return null;case 25:return null}throw Error(t(156,T.tag))}function Rd(y,T){switch(wo(T),T.tag){case 1:return ea(T.type)&&Md(),y=T.flags,y&65536?(T.flags=y&-65537|128,T):null;case 3:return qu(),qi(ma),qi(fa),Wa(),y=T.flags,y&65536&&!(y&128)?(T.flags=y&-65537|128,T):null;case 5:return Th(T),null;case 13:if(qi(Rr),y=T.memoizedState,y!==null&&y.dehydrated!==null){if(T.alternate===null)throw Error(t(340));Uo()}return y=T.flags,y&65536?(T.flags=y&-65537|128,T):null;case 19:return qi(Rr),null;case 4:return qu(),null;case 10:return Xu(T.type._context),null;case 22:case 23:return h0(),null;case 24:return null;default:return null}}var ja=!1,Fr=!1,Ta=typeof WeakSet=="function"?WeakSet:Set,We=null;function Ri(y,T){var R=y.ref;if(R!==null)if(typeof R=="function")try{R(null)}catch(F){ia(y,T,F)}else R.current=null}function Qs(y,T,R){try{R()}catch(F){ia(y,T,F)}}var a_=!1;function Tc(y,T){if(Vu=ro,y=gn(),Pr(y)){if("selectionStart"in y)var R={start:y.selectionStart,end:y.selectionEnd};else e:{R=(R=y.ownerDocument)&&R.defaultView||window;var F=R.getSelection&&R.getSelection();if(F&&F.rangeCount!==0){R=F.anchorNode;var X=F.anchorOffset,ee=F.focusNode;F=F.focusOffset;try{R.nodeType,ee.nodeType}catch{R=null;break e}var ve=0,Xe=-1,at=-1,Ot=0,qt=0,un=y,sn=null;t:for(;;){for(var Ln;un!==R||X!==0&&un.nodeType!==3||(Xe=ve+X),un!==ee||F!==0&&un.nodeType!==3||(at=ve+F),un.nodeType===3&&(ve+=un.nodeValue.length),(Ln=un.firstChild)!==null;)sn=un,un=Ln;for(;;){if(un===y)break t;if(sn===R&&++Ot===X&&(Xe=ve),sn===ee&&++qt===F&&(at=ve),(Ln=un.nextSibling)!==null)break;un=sn,sn=un.parentNode}un=Ln}R=Xe===-1||at===-1?null:{start:Xe,end:at}}else R=null}R=R||{start:0,end:0}}else R=null;for(ju={focusedElem:y,selectionRange:R},ro=!1,We=T;We!==null;)if(T=We,y=T.child,(T.subtreeFlags&1028)!==0&&y!==null)y.return=T,We=y;else for(;We!==null;){T=We;try{var Jn=T.alternate;if(T.flags&1024)switch(T.tag){case 0:case 11:case 15:break;case 1:if(Jn!==null){var nr=Jn.memoizedProps,Ao=Jn.memoizedState,xt=T.stateNode,ht=xt.getSnapshotBeforeUpdate(T.elementType===T.type?nr:xu(T.type,nr),Ao);xt.__reactInternalSnapshotBeforeUpdate=ht}break;case 3:var Et=T.stateNode.containerInfo;Et.nodeType===1?Et.textContent="":Et.nodeType===9&&Et.documentElement&&Et.removeChild(Et.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(bn){ia(T,T.return,bn)}if(y=T.sibling,y!==null){y.return=T.return,We=y;break}We=T.return}return Jn=a_,a_=!1,Jn}function yf(y,T,R){var F=T.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var X=F=F.next;do{if((X.tag&y)===y){var ee=X.destroy;X.destroy=void 0,ee!==void 0&&Qs(T,R,ee)}X=X.next}while(X!==F)}}function Xf(y,T){if(T=T.updateQueue,T=T!==null?T.lastEffect:null,T!==null){var R=T=T.next;do{if((R.tag&y)===y){var F=R.create;R.destroy=F()}R=R.next}while(R!==T)}}function l_(y){var T=y.ref;if(T!==null){var R=y.stateNode;switch(y.tag){case 5:y=R;break;default:y=R}typeof T=="function"?T(y):T.current=y}}function vf(y){var T=y.alternate;T!==null&&(y.alternate=null,vf(T)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(T=y.stateNode,T!==null&&(delete T[Gr],delete T[ol],delete T[da],delete T[Y],delete T[Es])),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function Sa(y){return y.tag===5||y.tag===3||y.tag===4}function vg(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||Sa(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function Yf(y,T,R){var F=y.tag;if(F===5||F===6)y=y.stateNode,T?R.nodeType===8?R.parentNode.insertBefore(y,T):R.insertBefore(y,T):(R.nodeType===8?(T=R.parentNode,T.insertBefore(y,R)):(T=R,T.appendChild(y)),R=R._reactRootContainer,R!=null||T.onclick!==null||(T.onclick=eu));else if(F!==4&&(y=y.child,y!==null))for(Yf(y,T,R),y=y.sibling;y!==null;)Yf(y,T,R),y=y.sibling}function bf(y,T,R){var F=y.tag;if(F===5||F===6)y=y.stateNode,T?R.insertBefore(y,T):R.appendChild(y);else if(F!==4&&(y=y.child,y!==null))for(bf(y,T,R),y=y.sibling;y!==null;)bf(y,T,R),y=y.sibling}var fl=null,au=!1;function kd(y,T,R){for(R=R.child;R!==null;)cp(y,T,R),R=R.sibling}function cp(y,T,R){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(Ir,R)}catch{}switch(R.tag){case 5:Fr||Ri(R,T);case 6:var F=fl,X=au;fl=null,kd(y,T,R),fl=F,au=X,fl!==null&&(au?(y=fl,R=R.stateNode,y.nodeType===8?y.parentNode.removeChild(R):y.removeChild(R)):fl.removeChild(R.stateNode));break;case 18:fl!==null&&(au?(y=fl,R=R.stateNode,y.nodeType===8?zc(y.parentNode,R):y.nodeType===1&&zc(y,R),zn(y)):zc(fl,R.stateNode));break;case 4:F=fl,X=au,fl=R.stateNode.containerInfo,au=!0,kd(y,T,R),fl=F,au=X;break;case 0:case 11:case 14:case 15:if(!Fr&&(F=R.updateQueue,F!==null&&(F=F.lastEffect,F!==null))){X=F=F.next;do{var ee=X,ve=ee.destroy;ee=ee.tag,ve!==void 0&&(ee&2||ee&4)&&Qs(R,T,ve),X=X.next}while(X!==F)}kd(y,T,R);break;case 1:if(!Fr&&(Ri(R,T),F=R.stateNode,typeof F.componentWillUnmount=="function"))try{F.props=R.memoizedProps,F.state=R.memoizedState,F.componentWillUnmount()}catch(Xe){ia(R,T,Xe)}kd(y,T,R);break;case 21:kd(y,T,R);break;case 22:R.mode&1?(Fr=(F=Fr)||R.memoizedState!==null,kd(y,T,R),Fr=F):kd(y,T,R);break;default:kd(y,T,R)}}function Od(y){var T=y.updateQueue;if(T!==null){y.updateQueue=null;var R=y.stateNode;R===null&&(R=y.stateNode=new Ta),T.forEach(function(F){var X=Fv.bind(null,y,F);R.has(F)||(R.add(F),F.then(X,X))})}}function qc(y,T){var R=T.deletions;if(R!==null)for(var F=0;F<R.length;F++){var X=R[F];try{var ee=y,ve=T,Xe=ve;e:for(;Xe!==null;){switch(Xe.tag){case 5:fl=Xe.stateNode,au=!1;break e;case 3:fl=Xe.stateNode.containerInfo,au=!0;break e;case 4:fl=Xe.stateNode.containerInfo,au=!0;break e}Xe=Xe.return}if(fl===null)throw Error(t(160));cp(ee,ve,X),fl=null,au=!1;var at=X.alternate;at!==null&&(at.return=null),X.return=null}catch(Ot){ia(X,T,Ot)}}if(T.subtreeFlags&12854)for(T=T.child;T!==null;)bg(T,y),T=T.sibling}function bg(y,T){var R=y.alternate,F=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:if(qc(T,y),dr(y),F&4){try{yf(3,y,y.return),Xf(3,y)}catch(nr){ia(y,y.return,nr)}try{yf(5,y,y.return)}catch(nr){ia(y,y.return,nr)}}break;case 1:qc(T,y),dr(y),F&512&&R!==null&&Ri(R,R.return);break;case 5:if(qc(T,y),dr(y),F&512&&R!==null&&Ri(R,R.return),y.flags&32){var X=y.stateNode;try{Oe(X,"")}catch(nr){ia(y,y.return,nr)}}if(F&4&&(X=y.stateNode,X!=null)){var ee=y.memoizedProps,ve=R!==null?R.memoizedProps:ee,Xe=y.type,at=y.updateQueue;if(y.updateQueue=null,at!==null)try{Xe==="input"&&ee.type==="radio"&&ee.name!=null&&Dt(X,ee),He(Xe,ve);var Ot=He(Xe,ee);for(ve=0;ve<at.length;ve+=2){var qt=at[ve],un=at[ve+1];qt==="style"?Ie(X,un):qt==="dangerouslySetInnerHTML"?Ke(X,un):qt==="children"?Oe(X,un):P(X,qt,un,Ot)}switch(Xe){case"input":Rt(X,ee);break;case"textarea":we(X,ee);break;case"select":var sn=X._wrapperState.wasMultiple;X._wrapperState.wasMultiple=!!ee.multiple;var Ln=ee.value;Ln!=null?mt(X,!!ee.multiple,Ln,!1):sn!==!!ee.multiple&&(ee.defaultValue!=null?mt(X,!!ee.multiple,ee.defaultValue,!0):mt(X,!!ee.multiple,ee.multiple?[]:"",!1))}X[ol]=ee}catch(nr){ia(y,y.return,nr)}}break;case 6:if(qc(T,y),dr(y),F&4){if(y.stateNode===null)throw Error(t(162));X=y.stateNode,ee=y.memoizedProps;try{X.nodeValue=ee}catch(nr){ia(y,y.return,nr)}}break;case 3:if(qc(T,y),dr(y),F&4&&R!==null&&R.memoizedState.isDehydrated)try{zn(T.containerInfo)}catch(nr){ia(y,y.return,nr)}break;case 4:qc(T,y),dr(y);break;case 13:qc(T,y),dr(y),X=y.child,X.flags&8192&&(ee=X.memoizedState!==null,X.stateNode.isHidden=ee,!ee||X.alternate!==null&&X.alternate.memoizedState!==null||(gl=en())),F&4&&Od(y);break;case 22:if(qt=R!==null&&R.memoizedState!==null,y.mode&1?(Fr=(Ot=Fr)||qt,qc(T,y),Fr=Ot):qc(T,y),dr(y),F&8192){if(Ot=y.memoizedState!==null,(y.stateNode.isHidden=Ot)&&!qt&&(y.mode&1)!==0)for(We=y,qt=y.child;qt!==null;){for(un=We=qt;We!==null;){switch(sn=We,Ln=sn.child,sn.tag){case 0:case 11:case 14:case 15:yf(4,sn,sn.return);break;case 1:Ri(sn,sn.return);var Jn=sn.stateNode;if(typeof Jn.componentWillUnmount=="function"){F=sn,R=sn.return;try{T=F,Jn.props=T.memoizedProps,Jn.state=T.memoizedState,Jn.componentWillUnmount()}catch(nr){ia(F,R,nr)}}break;case 5:Ri(sn,sn.return);break;case 22:if(sn.memoizedState!==null){Kf(un);continue}}Ln!==null?(Ln.return=sn,We=Ln):Kf(un)}qt=qt.sibling}e:for(qt=null,un=y;;){if(un.tag===5){if(qt===null){qt=un;try{X=un.stateNode,Ot?(ee=X.style,typeof ee.setProperty=="function"?ee.setProperty("display","none","important"):ee.display="none"):(Xe=un.stateNode,at=un.memoizedProps.style,ve=at!=null&&at.hasOwnProperty("display")?at.display:null,Xe.style.display=fe("display",ve))}catch(nr){ia(y,y.return,nr)}}}else if(un.tag===6){if(qt===null)try{un.stateNode.nodeValue=Ot?"":un.memoizedProps}catch(nr){ia(y,y.return,nr)}}else if((un.tag!==22&&un.tag!==23||un.memoizedState===null||un===y)&&un.child!==null){un.child.return=un,un=un.child;continue}if(un===y)break e;for(;un.sibling===null;){if(un.return===null||un.return===y)break e;qt===un&&(qt=null),un=un.return}qt===un&&(qt=null),un.sibling.return=un.return,un=un.sibling}}break;case 19:qc(T,y),dr(y),F&4&&Od(y);break;case 21:break;default:qc(T,y),dr(y)}}function dr(y){var T=y.flags;if(T&2){try{e:{for(var R=y.return;R!==null;){if(Sa(R)){var F=R;break e}R=R.return}throw Error(t(160))}switch(F.tag){case 5:var X=F.stateNode;F.flags&32&&(Oe(X,""),F.flags&=-33);var ee=vg(y);bf(y,ee,X);break;case 3:case 4:var ve=F.stateNode.containerInfo,Xe=vg(y);Yf(y,Xe,ve);break;default:throw Error(t(161))}}catch(at){ia(y,y.return,at)}y.flags&=-3}T&4096&&(y.flags&=-4097)}function a0(y,T,R){We=y,_o(y)}function _o(y,T,R){for(var F=(y.mode&1)!==0;We!==null;){var X=We,ee=X.child;if(X.tag===22&&F){var ve=X.memoizedState!==null||ja;if(!ve){var Xe=X.alternate,at=Xe!==null&&Xe.memoizedState!==null||Fr;Xe=ja;var Ot=Fr;if(ja=ve,(Fr=at)&&!Ot)for(We=X;We!==null;)ve=We,at=ve.child,ve.tag===22&&ve.memoizedState!==null?Ld(X):at!==null?(at.return=ve,We=at):Ld(X);for(;ee!==null;)We=ee,_o(ee),ee=ee.sibling;We=X,ja=Xe,Fr=Ot}Xa(y)}else X.subtreeFlags&8772&&ee!==null?(ee.return=X,We=ee):Xa(y)}}function Xa(y){for(;We!==null;){var T=We;if(T.flags&8772){var R=T.alternate;try{if(T.flags&8772)switch(T.tag){case 0:case 11:case 15:Fr||Xf(5,T);break;case 1:var F=T.stateNode;if(T.flags&4&&!Fr)if(R===null)F.componentDidMount();else{var X=T.elementType===T.type?R.memoizedProps:xu(T.type,R.memoizedProps);F.componentDidUpdate(X,R.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var ee=T.updateQueue;ee!==null&&ei(T,ee,F);break;case 3:var ve=T.updateQueue;if(ve!==null){if(R=null,T.child!==null)switch(T.child.tag){case 5:R=T.child.stateNode;break;case 1:R=T.child.stateNode}ei(T,ve,R)}break;case 5:var Xe=T.stateNode;if(R===null&&T.flags&4){R=Xe;var at=T.memoizedProps;switch(T.type){case"button":case"input":case"select":case"textarea":at.autoFocus&&R.focus();break;case"img":at.src&&(R.src=at.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(T.memoizedState===null){var Ot=T.alternate;if(Ot!==null){var qt=Ot.memoizedState;if(qt!==null){var un=qt.dehydrated;un!==null&&zn(un)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Fr||T.flags&512&&l_(T)}catch(sn){ia(T,T.return,sn)}}if(T===y){We=null;break}if(R=T.sibling,R!==null){R.return=T.return,We=R;break}We=T.return}}function Kf(y){for(;We!==null;){var T=We;if(T===y){We=null;break}var R=T.sibling;if(R!==null){R.return=T.return,We=R;break}We=T.return}}function Ld(y){for(;We!==null;){var T=We;try{switch(T.tag){case 0:case 11:case 15:var R=T.return;try{Xf(4,T)}catch(at){ia(T,R,at)}break;case 1:var F=T.stateNode;if(typeof F.componentDidMount=="function"){var X=T.return;try{F.componentDidMount()}catch(at){ia(T,X,at)}}var ee=T.return;try{l_(T)}catch(at){ia(T,ee,at)}break;case 5:var ve=T.return;try{l_(T)}catch(at){ia(T,ve,at)}}}catch(at){ia(T,T.return,at)}if(T===y){We=null;break}var Xe=T.sibling;if(Xe!==null){Xe.return=T.return,We=Xe;break}We=T.return}}var Jf=Math.ceil,Mu=B.ReactCurrentDispatcher,l0=B.ReactCurrentOwner,Wo=B.ReactCurrentBatchConfig,Zi=0,lu=null,ml=null,Au=0,uu=0,Tf=ui(0),Nl=0,Dd=null,Nd=0,hp=0,Tg=0,qf=null,Qc=null,gl=0,Zc=1/0,Bd=null,Hm=!1,Gm=null,yo=null,Qf=!1,Os=null,Bl=0,Sf=0,Sg=null,Pd=-1,Wm=0;function Sc(){return Zi&6?en():Pd!==-1?Pd:Pd=en()}function Fd(y){return y.mode&1?Zi&2&&Au!==0?Au&-Au:op.transition!==null?(Wm===0&&(Wm=Yo()),Wm):(y=gr,y!==0||(y=window.event,y=y===void 0?16:Fu(y.type)),y):1}function ra(y,T,R,F){if(50<Sf)throw Sf=0,Sg=null,Error(t(185));pu(y,R,F),(!(Zi&2)||y!==lu)&&(y===lu&&(!(Zi&2)&&(hp|=R),Nl===4&&Pp(y,Au)),Ea(y,F),R===1&&Zi===0&&!(T.mode&1)&&(Zc=en()+500,Ys&&En()))}function Ea(y,T){var R=y.callbackNode;uc(y,T);var F=ka(y,y===lu?Au:0);if(F===0)R!==null&&Ia(R),y.callbackNode=null,y.callbackPriority=0;else if(T=F&-F,y.callbackPriority!==T){if(R!=null&&Ia(R),T===1)y.tag===0?Fo(Ef.bind(null,y)):tu(Ef.bind(null,y)),Fc(function(){!(Zi&6)&&En()}),R=null;else{switch(Ei(F)){case 1:R=qa;break;case 4:R=Ra;break;case 16:R=Bs;break;case 536870912:R=Li;break;default:R=Bs}R=th(R,u_.bind(null,y))}y.callbackPriority=T,y.callbackNode=R}}function u_(y,T){if(Pd=-1,Wm=0,(Zi&6)!==0)throw Error(t(327));var R=y.callbackNode;if(eh()&&y.callbackNode!==R)return null;var F=ka(y,y===lu?Au:0);if(F===0)return null;if(F&30||F&y.expiredLanes||T)T=dp(y,F);else{T=F;var X=Zi;Zi|=2;var ee=c_();(lu!==y||Au!==T)&&(Bd=null,Zc=en()+500,em(y,T));do try{Pv();break}catch(Xe){d0(y,Xe)}while(!0);ru(),Mu.current=ee,Zi=X,ml!==null?T=0:(lu=null,Au=0,T=Nl)}if(T!==0){if(T===2&&(X=js(y),X!==0&&(F=X,T=Zf(y,X))),T===1)throw R=Dd,em(y,0),Pp(y,F),Ea(y,en()),R;if(T===6)Pp(y,F);else{if(X=y.current.alternate,(F&30)===0&&!py(X)&&(T=dp(y,F),T===2&&(ee=js(y),ee!==0&&(F=ee,T=Zf(y,ee))),T===1))throw R=Dd,em(y,0),Pp(y,F),Ea(y,en()),R;switch(y.finishedWork=X,y.finishedLanes=F,T){case 0:case 1:throw Error(t(345));case 2:Fp(y,Qc,Bd);break;case 3:if(Pp(y,F),(F&130023424)===F&&(T=gl+500-en(),10<T)){if(ka(y,0)!==0)break;if(X=y.suspendedLanes,(X&F)!==F){Sc(),y.pingedLanes|=y.suspendedLanes&X;break}y.timeoutHandle=sl(Fp.bind(null,y,Qc,Bd),T);break}Fp(y,Qc,Bd);break;case 4:if(Pp(y,F),(F&4194240)===F)break;for(T=y.eventTimes,X=-1;0<F;){var ve=31-Ur(F);ee=1<<ve,ve=T[ve],ve>X&&(X=ve),F&=~ee}if(F=X,F=en()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*Jf(F/1960))-F,10<F){y.timeoutHandle=sl(Fp.bind(null,y,Qc,Bd),F);break}Fp(y,Qc,Bd);break;case 5:Fp(y,Qc,Bd);break;default:throw Error(t(329))}}}return Ea(y,en()),y.callbackNode===R?u_.bind(null,y):null}function Zf(y,T){var R=qf;return y.current.memoizedState.isDehydrated&&(em(y,T).flags|=256),y=dp(y,T),y!==2&&(T=Qc,Qc=R,T!==null&&u0(T)),y}function u0(y){Qc===null?Qc=y:Qc.push.apply(Qc,y)}function py(y){for(var T=y;;){if(T.flags&16384){var R=T.updateQueue;if(R!==null&&(R=R.stores,R!==null))for(var F=0;F<R.length;F++){var X=R[F],ee=X.getSnapshot;X=X.value;try{if(!Be(ee(),X))return!1}catch{return!1}}}if(R=T.child,T.subtreeFlags&16384&&R!==null)R.return=T,T=R;else{if(T===y)break;for(;T.sibling===null;){if(T.return===null||T.return===y)return!0;T=T.return}T.sibling.return=T.return,T=T.sibling}}return!0}function Pp(y,T){for(T&=~Tg,T&=~hp,y.suspendedLanes|=T,y.pingedLanes&=~T,y=y.expirationTimes;0<T;){var R=31-Ur(T),F=1<<R;y[R]=-1,T&=~F}}function Ef(y){if(Zi&6)throw Error(t(327));eh();var T=ka(y,0);if(!(T&1))return Ea(y,en()),null;var R=dp(y,T);if(y.tag!==0&&R===2){var F=js(y);F!==0&&(T=F,R=Zf(y,F))}if(R===1)throw R=Dd,em(y,0),Pp(y,T),Ea(y,en()),R;if(R===6)throw Error(t(345));return y.finishedWork=y.current.alternate,y.finishedLanes=T,Fp(y,Qc,Bd),Ea(y,en()),null}function c0(y,T){var R=Zi;Zi|=1;try{return y(T)}finally{Zi=R,Zi===0&&(Zc=en()+500,Ys&&En())}}function xf(y){Os!==null&&Os.tag===0&&!(Zi&6)&&eh();var T=Zi;Zi|=1;var R=Wo.transition,F=gr;try{if(Wo.transition=null,gr=1,y)return y()}finally{gr=F,Wo.transition=R,Zi=T,!(Zi&6)&&En()}}function h0(){uu=Tf.current,qi(Tf)}function em(y,T){y.finishedWork=null,y.finishedLanes=0;var R=y.timeoutHandle;if(R!==-1&&(y.timeoutHandle=-1,Zo(R)),ml!==null)for(R=ml.return;R!==null;){var F=R;switch(wo(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&Md();break;case 3:qu(),qi(ma),qi(fa),Wa();break;case 5:Th(F);break;case 4:qu();break;case 13:qi(Rr);break;case 19:qi(Rr);break;case 10:Xu(F.type._context);break;case 22:case 23:h0()}R=R.return}if(lu=y,ml=y=Kh(y.current,null),Au=uu=T,Nl=0,Dd=null,Tg=hp=Nd=0,Qc=qf=null,ws!==null){for(T=0;T<ws.length;T++)if(R=ws[T],F=R.interleaved,F!==null){R.interleaved=null;var X=F.next,ee=R.pending;if(ee!==null){var ve=ee.next;ee.next=X,F.next=ve}R.pending=F}ws=null}return y}function d0(y,T){do{var R=ml;try{if(ru(),Gs.current=h,su){for(var F=Tn.memoizedState;F!==null;){var X=F.queue;X!==null&&(X.pending=null),F=F.next}su=!1}if(Vc=0,$s=gi=Tn=null,kl=!1,Pt=0,l0.current=null,R===null||R.return===null){Nl=1,Dd=T,ml=null;break}e:{var ee=y,ve=R.return,Xe=R,at=T;if(T=Au,Xe.flags|=32768,at!==null&&typeof at=="object"&&typeof at.then=="function"){var Ot=at,qt=Xe,un=qt.tag;if(!(qt.mode&1)&&(un===0||un===11||un===15)){var sn=qt.alternate;sn?(qt.updateQueue=sn.updateQueue,qt.memoizedState=sn.memoizedState,qt.lanes=sn.lanes):(qt.updateQueue=null,qt.memoizedState=null)}var Ln=ln(ve);if(Ln!==null){Ln.flags&=-257,yn(Ln,ve,Xe,ee,T),Ln.mode&1&&Jt(ee,Ot,T),T=Ln,at=Ot;var Jn=T.updateQueue;if(Jn===null){var nr=new Set;nr.add(at),T.updateQueue=nr}else Jn.add(at);break e}else{if(!(T&1)){Jt(ee,Ot,T),tm();break e}at=Error(t(426))}}else if(ss&&Xe.mode&1){var Ao=ln(ve);if(Ao!==null){!(Ao.flags&65536)&&(Ao.flags|=256),yn(Ao,ve,Xe,ee,T),$o(N(at,Xe));break e}}ee=at=N(at,Xe),Nl!==4&&(Nl=2),qf===null?qf=[ee]:qf.push(ee),ee=ve;do{switch(ee.tag){case 3:ee.flags|=65536,T&=-T,ee.lanes|=T;var xt=Qe(ee,at,T);Zn(ee,xt);break e;case 1:Xe=at;var ht=ee.type,Et=ee.stateNode;if(!(ee.flags&128)&&(typeof ht.getDerivedStateFromError=="function"||Et!==null&&typeof Et.componentDidCatch=="function"&&(yo===null||!yo.has(Et)))){ee.flags|=65536,T&=-T,ee.lanes|=T;var bn=St(ee,Xe,T);Zn(ee,bn);break e}}ee=ee.return}while(ee!==null)}f0(R)}catch(or){T=or,ml===R&&R!==null&&(ml=R=R.return);continue}break}while(!0)}function c_(){var y=Mu.current;return Mu.current=h,y===null?h:y}function tm(){(Nl===0||Nl===3||Nl===2)&&(Nl=4),lu===null||!(Nd&268435455)&&!(hp&268435455)||Pp(lu,Au)}function dp(y,T){var R=Zi;Zi|=2;var F=c_();(lu!==y||Au!==T)&&(Bd=null,em(y,T));do try{h_();break}catch(X){d0(y,X)}while(!0);if(ru(),Zi=R,Mu.current=F,ml!==null)throw Error(t(261));return lu=null,Au=0,Nl}function h_(){for(;ml!==null;)p0(ml)}function Pv(){for(;ml!==null&&!Eo();)p0(ml)}function p0(y){var T=fy(y.alternate,y,uu);y.memoizedProps=y.pendingProps,T===null?f0(y):ml=T,l0.current=null}function f0(y){var T=y;do{var R=T.alternate;if(y=T.return,(T.flags&32768)===0){if(R=Bp(R,T,uu),R!==null){ml=R;return}}else{if(R=Rd(R,T),R!==null){R.flags&=32767,ml=R;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{Nl=6,ml=null;return}}if(T=T.sibling,T!==null){ml=T;return}ml=T=y}while(T!==null);Nl===0&&(Nl=5)}function Fp(y,T,R){var F=gr,X=Wo.transition;try{Wo.transition=null,gr=1,Pn(y,T,R,F)}finally{Wo.transition=X,gr=F}return null}function Pn(y,T,R,F){do eh();while(Os!==null);if(Zi&6)throw Error(t(327));R=y.finishedWork;var X=y.finishedLanes;if(R===null)return null;if(y.finishedWork=null,y.finishedLanes=0,R===y.current)throw Error(t(177));y.callbackNode=null,y.callbackPriority=0;var ee=R.lanes|R.childLanes;if(ch(y,ee),y===lu&&(ml=lu=null,Au=0),!(R.subtreeFlags&2064)&&!(R.flags&2064)||Qf||(Qf=!0,th(Bs,function(){return eh(),null})),ee=(R.flags&15990)!==0,(R.subtreeFlags&15990)!==0||ee){ee=Wo.transition,Wo.transition=null;var ve=gr;gr=1;var Xe=Zi;Zi|=4,l0.current=null,Tc(y,R),bg(R,y),so(ju),ro=!!Vu,ju=Vu=null,y.current=R,a0(R),Wl(),Zi=Xe,gr=ve,Wo.transition=ee}else y.current=R;if(Qf&&(Qf=!1,Os=y,Bl=X),ee=y.pendingLanes,ee===0&&(yo=null),Mr(R.stateNode),Ea(y,en()),T!==null)for(F=y.onRecoverableError,R=0;R<T.length;R++)X=T[R],F(X.value,{componentStack:X.stack,digest:X.digest});if(Hm)throw Hm=!1,y=Gm,Gm=null,y;return Bl&1&&y.tag!==0&&eh(),ee=y.pendingLanes,ee&1?y===Sg?Sf++:(Sf=0,Sg=y):Sf=0,En(),null}function eh(){if(Os!==null){var y=Ei(Bl),T=Wo.transition,R=gr;try{if(Wo.transition=null,gr=16>y?16:y,Os===null)var F=!1;else{if(y=Os,Os=null,Bl=0,(Zi&6)!==0)throw Error(t(331));var X=Zi;for(Zi|=4,We=y.current;We!==null;){var ee=We,ve=ee.child;if(We.flags&16){var Xe=ee.deletions;if(Xe!==null){for(var at=0;at<Xe.length;at++){var Ot=Xe[at];for(We=Ot;We!==null;){var qt=We;switch(qt.tag){case 0:case 11:case 15:yf(8,qt,ee)}var un=qt.child;if(un!==null)un.return=qt,We=un;else for(;We!==null;){qt=We;var sn=qt.sibling,Ln=qt.return;if(vf(qt),qt===Ot){We=null;break}if(sn!==null){sn.return=Ln,We=sn;break}We=Ln}}}var Jn=ee.alternate;if(Jn!==null){var nr=Jn.child;if(nr!==null){Jn.child=null;do{var Ao=nr.sibling;nr.sibling=null,nr=Ao}while(nr!==null)}}We=ee}}if(ee.subtreeFlags&2064&&ve!==null)ve.return=ee,We=ve;else e:for(;We!==null;){if(ee=We,(ee.flags&2048)!==0)switch(ee.tag){case 0:case 11:case 15:yf(9,ee,ee.return)}var xt=ee.sibling;if(xt!==null){xt.return=ee.return,We=xt;break e}We=ee.return}}var ht=y.current;for(We=ht;We!==null;){ve=We;var Et=ve.child;if(ve.subtreeFlags&2064&&Et!==null)Et.return=ve,We=Et;else e:for(ve=ht;We!==null;){if(Xe=We,(Xe.flags&2048)!==0)try{switch(Xe.tag){case 0:case 11:case 15:Xf(9,Xe)}}catch(or){ia(Xe,Xe.return,or)}if(Xe===ve){We=null;break e}var bn=Xe.sibling;if(bn!==null){bn.return=Xe.return,We=bn;break e}We=Xe.return}}if(Zi=X,En(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(Ir,y)}catch{}F=!0}return F}finally{gr=R,Wo.transition=T}}return!1}function wf(y,T,R){T=N(R,T),T=Qe(y,T,1),y=Vi(y,T,1),T=Sc(),y!==null&&(pu(y,1,T),Ea(y,T))}function ia(y,T,R){if(y.tag===3)wf(y,y,R);else for(;T!==null;){if(T.tag===3){wf(T,y,R);break}else if(T.tag===1){var F=T.stateNode;if(typeof T.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(yo===null||!yo.has(F))){y=N(R,y),y=St(T,y,1),T=Vi(T,y,1),y=Sc(),T!==null&&(pu(T,1,y),Ea(T,y));break}}T=T.return}}function d_(y,T,R){var F=y.pingCache;F!==null&&F.delete(T),T=Sc(),y.pingedLanes|=y.suspendedLanes&R,lu===y&&(Au&R)===R&&(Nl===4||Nl===3&&(Au&130023424)===Au&&500>en()-gl?em(y,0):Tg|=R),Ea(y,T)}function m0(y,T){T===0&&(y.mode&1?(T=fs,fs<<=1,!(fs&130023424)&&(fs=4194304)):T=1);var R=Sc();y=Ga(y,T),y!==null&&(pu(y,T,R),Ea(y,R))}function nm(y){var T=y.memoizedState,R=0;T!==null&&(R=T.retryLane),m0(y,R)}function Fv(y,T){var R=0;switch(y.tag){case 13:var F=y.stateNode,X=y.memoizedState;X!==null&&(R=X.retryLane);break;case 19:F=y.stateNode;break;default:throw Error(t(314))}F!==null&&F.delete(T),m0(y,R)}var fy;fy=function(y,T,R){if(y!==null)if(y.memoizedProps!==T.pendingProps||ma.current)fn=!0;else{if(!(y.lanes&R)&&!(T.flags&128))return fn=!1,us(y,T,R);fn=(y.flags&131072)!==0}else fn=!1,ss&&T.flags&1048576&&_f(T,yh,T.index);switch(T.lanes=0,T.tag){case 2:var F=T.type;up(y,T),y=T.pendingProps;var X=Hc(T,fa.current);Ha(T,R),X=Vh(null,T,F,y,X,R);var ee=jc();return T.flags|=1,typeof X=="object"&&X!==null&&typeof X.render=="function"&&X.$$typeof===void 0?(T.tag=1,T.memoizedState=null,T.updateQueue=null,ea(F)?(ee=!0,Us(T)):ee=!1,T.memoizedState=X.state!==null&&X.state!==void 0?X.state:null,ap(T),X.updater=as,T.stateNode=X,X._reactInternals=T,gc(T,F,y,R),T=An(null,T,F,!0,ee,R)):(T.tag=0,ss&&ee&&nu(T),Lr(null,T,X,R),T=T.child),T;case 16:F=T.elementType;e:{switch(up(y,T),y=T.pendingProps,X=F._init,F=X(F._payload),T.type=F,X=T.tag=zp(F),y=xu(F,y),X){case 0:T=rn(null,T,F,y,R);break e;case 1:T=Sn(null,T,F,y,R);break e;case 11:T=bt(null,T,F,y,R);break e;case 14:T=Ce(null,T,F,xu(F.type,y),R);break e}throw Error(t(306,F,""))}return T;case 0:return F=T.type,X=T.pendingProps,X=T.elementType===F?X:xu(F,X),rn(y,T,F,X,R);case 1:return F=T.type,X=T.pendingProps,X=T.elementType===F?X:xu(F,X),Sn(y,T,F,X,R);case 3:e:{if(Bn(T),y===null)throw Error(t(387));F=T.pendingProps,ee=T.memoizedState,X=ee.element,vh(y,T),Or(T,F,null,R);var ve=T.memoizedState;if(F=ve.element,ee.isDehydrated)if(ee={element:F,isDehydrated:!1,cache:ve.cache,pendingSuspenseBoundaries:ve.pendingSuspenseBoundaries,transitions:ve.transitions},T.updateQueue.baseState=ee,T.memoizedState=ee,T.flags&256){X=N(Error(t(423)),T),T=cr(y,T,F,R,X);break e}else if(F!==X){X=N(Error(t(424)),T),T=cr(y,T,F,R,X);break e}else for(ul=dc(T.stateNode.containerInfo.firstChild),_s=T,ss=!0,cl=null,R=wu(T,null,F,R),T.child=R;R;)R.flags=R.flags&-3|4096,R=R.sibling;else{if(Uo(),F===X){T=Yh(y,T,R);break e}Lr(y,T,F,R)}T=T.child}return T;case 5:return bh(T),y===null&&Ii(T),F=T.type,X=T.pendingProps,ee=y!==null?y.memoizedProps:null,ve=X.children,_h(F,X)?ve=null:ee!==null&&_h(F,ee)&&(T.flags|=32),Ut(y,T),Lr(y,T,ve,R),T.child;case 6:return y===null&&Ii(T),null;case 13:return lp(y,T,R);case 4:return Ju(T,T.stateNode.containerInfo),F=T.pendingProps,y===null?T.child=_a(T,null,F,R):Lr(y,T,F,R),T.child;case 11:return F=T.type,X=T.pendingProps,X=T.elementType===F?X:xu(F,X),bt(y,T,F,X,R);case 7:return Lr(y,T,T.pendingProps,R),T.child;case 8:return Lr(y,T,T.pendingProps.children,R),T.child;case 12:return Lr(y,T,T.pendingProps.children,R),T.child;case 10:e:{if(F=T.type._context,X=T.pendingProps,ee=T.memoizedProps,ve=X.value,rs(Il,F._currentValue),F._currentValue=ve,ee!==null)if(Be(ee.value,ve)){if(ee.children===X.children&&!ma.current){T=Yh(y,T,R);break e}}else for(ee=T.child,ee!==null&&(ee.return=T);ee!==null;){var Xe=ee.dependencies;if(Xe!==null){ve=ee.child;for(var at=Xe.firstContext;at!==null;){if(at.context===F){if(ee.tag===1){at=ta(-1,R&-R),at.tag=2;var Ot=ee.updateQueue;if(Ot!==null){Ot=Ot.shared;var qt=Ot.pending;qt===null?at.next=at:(at.next=qt.next,qt.next=at),Ot.pending=at}}ee.lanes|=R,at=ee.alternate,at!==null&&(at.lanes|=R),os(ee.return,R,T),Xe.lanes|=R;break}at=at.next}}else if(ee.tag===10)ve=ee.type===T.type?null:ee.child;else if(ee.tag===18){if(ve=ee.return,ve===null)throw Error(t(341));ve.lanes|=R,Xe=ve.alternate,Xe!==null&&(Xe.lanes|=R),os(ve,R,T),ve=ee.sibling}else ve=ee.child;if(ve!==null)ve.return=ee;else for(ve=ee;ve!==null;){if(ve===T){ve=null;break}if(ee=ve.sibling,ee!==null){ee.return=ve.return,ve=ee;break}ve=ve.return}ee=ve}Lr(y,T,X.children,R),T=T.child}return T;case 9:return X=T.type,F=T.pendingProps.children,Ha(T,R),X=xs(X),F=F(X),T.flags|=1,Lr(y,T,F,R),T.child;case 14:return F=T.type,X=xu(F,T.pendingProps),X=xu(F.type,X),Ce(y,T,F,X,R);case 15:return Le(y,T,T.type,T.pendingProps,R);case 17:return F=T.type,X=T.pendingProps,X=T.elementType===F?X:xu(F,X),up(y,T),T.tag=1,ea(F)?(y=!0,Us(T)):y=!1,Ha(T,R),iu(T,F,X),gc(T,F,X,R),An(null,T,F,!0,y,R);case 19:return pl(y,T,R);case 22:return rt(y,T,R)}throw Error(t(156,T.tag))};function th(y,T){return bs(y,T)}function vo(y,T,R,F){this.tag=y,this.key=R,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=T,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Iu(y,T,R,F){return new vo(y,T,R,F)}function Eg(y){return y=y.prototype,!(!y||!y.isReactComponent)}function zp(y){if(typeof y=="function")return Eg(y)?1:0;if(y!=null){if(y=y.$$typeof,y===te)return 11;if(y===ce)return 14}return 2}function Kh(y,T){var R=y.alternate;return R===null?(R=Iu(y.tag,T,y.key,y.mode),R.elementType=y.elementType,R.type=y.type,R.stateNode=y.stateNode,R.alternate=y,y.alternate=R):(R.pendingProps=T,R.type=y.type,R.flags=0,R.subtreeFlags=0,R.deletions=null),R.flags=y.flags&14680064,R.childLanes=y.childLanes,R.lanes=y.lanes,R.child=y.child,R.memoizedProps=y.memoizedProps,R.memoizedState=y.memoizedState,R.updateQueue=y.updateQueue,T=y.dependencies,R.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext},R.sibling=y.sibling,R.index=y.index,R.ref=y.ref,R}function rm(y,T,R,F,X,ee){var ve=2;if(F=y,typeof y=="function")Eg(y)&&(ve=1);else if(typeof y=="string")ve=5;else e:switch(y){case j:return Up(R.children,X,ee,T);case H:ve=8,X|=8;break;case Z:return y=Iu(12,R,T,X|2),y.elementType=Z,y.lanes=ee,y;case he:return y=Iu(13,R,T,X),y.elementType=he,y.lanes=ee,y;case le:return y=Iu(19,R,T,X),y.elementType=le,y.lanes=ee,y;case $e:return Hp(R,X,ee,T);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case ae:ve=10;break e;case J:ve=9;break e;case te:ve=11;break e;case ce:ve=14;break e;case be:ve=16,F=null;break e}throw Error(t(130,y==null?y:typeof y,""))}return T=Iu(ve,R,T,X),T.elementType=y,T.type=F,T.lanes=ee,T}function Up(y,T,R,F){return y=Iu(7,y,F,T),y.lanes=R,y}function Hp(y,T,R,F){return y=Iu(22,y,F,T),y.elementType=$e,y.lanes=R,y.stateNode={isHidden:!1},y}function $f(y,T,R){return y=Iu(6,y,null,T),y.lanes=R,y}function md(y,T,R){return T=Iu(4,y.children!==null?y.children:[],y.key,T),T.lanes=R,T.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},T}function pp(y,T,R,F,X){this.tag=T,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vl(0),this.expirationTimes=Vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vl(0),this.identifierPrefix=F,this.onRecoverableError=X,this.mutableSourceEagerHydrationData=null}function Vm(y,T,R,F,X,ee,ve,Xe,at){return y=new pp(y,T,R,Xe,at),T===1?(T=1,ee===!0&&(T|=8)):T=0,ee=Iu(3,null,null,T),y.current=ee,ee.stateNode=y,ee.memoizedState={element:F,isDehydrated:R,cache:null,transitions:null,pendingSuspenseBoundaries:null},ap(ee),y}function my(y,T,R){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:F==null?null:""+F,children:y,containerInfo:T,implementation:R}}function xg(y){if(!y)return Uc;y=y._reactInternals;e:{if(tr(y)!==y||y.tag!==1)throw Error(t(170));var T=y;do{switch(T.tag){case 3:T=T.stateNode.context;break e;case 1:if(ea(T.type)){T=T.stateNode.__reactInternalMemoizedMergedChildContext;break e}}T=T.return}while(T!==null);throw Error(t(171))}if(y.tag===1){var R=y.type;if(ea(R))return Hh(y,R,T)}return T}function zd(y,T,R,F,X,ee,ve,Xe,at){return y=Vm(R,F,!0,y,X,ee,ve,Xe,at),y.context=xg(null),R=y.current,F=Sc(),X=Fd(R),ee=ta(F,X),ee.callback=T??null,Vi(R,ee,X),y.current.lanes=X,pu(y,X,F),Ea(y,F),y}function ki(y,T,R,F){var X=T.current,ee=Sc(),ve=Fd(X);return R=xg(R),T.context===null?T.context=R:T.pendingContext=R,T=ta(ee,ve),T.payload={element:y},F=F===void 0?null:F,F!==null&&(T.callback=F),y=Vi(X,T,ve),y!==null&&(ra(y,X,ve,ee),Dn(y,X,ve)),ve}function im(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return y.child.stateNode;default:return y.child.stateNode}}function jm(y,T){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var R=y.retryLane;y.retryLane=R!==0&&R<T?R:T}}function wg(y,T){jm(y,T),(y=y.alternate)&&jm(y,T)}function gy(){return null}var Xm=typeof reportError=="function"?reportError:function(y){console.error(y)};function Cf(y){this._internalRoot=y}Ym.prototype.render=Cf.prototype.render=function(y){var T=this._internalRoot;if(T===null)throw Error(t(409));ki(y,T,null,null)},Ym.prototype.unmount=Cf.prototype.unmount=function(){var y=this._internalRoot;if(y!==null){this._internalRoot=null;var T=y.containerInfo;xf(function(){ki(null,y,null,null)}),T[Ji]=null}};function Ym(y){this._internalRoot=y}Ym.prototype.unstable_scheduleHydration=function(y){if(y){var T=Tl();y={blockedOn:null,target:y,priority:T};for(var R=0;R<mu.length&&T!==0&&T<mu[R].priority;R++);mu.splice(R,0,y),R===0&&no(y)}};function Gp(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)}function Wp(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11&&(y.nodeType!==8||y.nodeValue!==" react-mount-point-unstable "))}function sm(){}function bi(y,T,R,F,X){if(X){if(typeof F=="function"){var ee=F;F=function(){var Ot=im(ve);ee.call(Ot)}}var ve=zd(T,F,y,0,null,!1,!1,"",sm);return y._reactRootContainer=ve,y[Ji]=ve.current,Zl(y.nodeType===8?y.parentNode:y),xf(),ve}for(;X=y.lastChild;)y.removeChild(X);if(typeof F=="function"){var Xe=F;F=function(){var Ot=im(at);Xe.call(Ot)}}var at=Vm(y,0,!1,null,null,!1,!1,"",sm);return y._reactRootContainer=at,y[Ji]=at.current,Zl(y.nodeType===8?y.parentNode:y),xf(function(){ki(T,at,R,F)}),at}function Vp(y,T,R,F,X){var ee=R._reactRootContainer;if(ee){var ve=ee;if(typeof X=="function"){var Xe=X;X=function(){var at=im(ve);Xe.call(at)}}ki(T,ve,y,X)}else ve=bi(R,T,y,X,F);return im(ve)}Rc=function(y){switch(y.tag){case 3:var T=y.stateNode;if(T.current.memoizedState.isDehydrated){var R=Qa(T.pendingLanes);R!==0&&(Ko(T,R|1),Ea(T,en()),!(Zi&6)&&(Zc=en()+500,En()))}break;case 13:xf(function(){var F=Ga(y,1);if(F!==null){var X=Sc();ra(F,y,1,X)}}),wg(y,1)}},hh=function(y){if(y.tag===13){var T=Ga(y,134217728);if(T!==null){var R=Sc();ra(T,y,134217728,R)}wg(y,134217728)}},kc=function(y){if(y.tag===13){var T=Fd(y),R=Ga(y,T);if(R!==null){var F=Sc();ra(R,y,T,F)}wg(y,T)}},Tl=function(){return gr},fu=function(y,T){var R=gr;try{return gr=y,T()}finally{gr=R}},Kt=function(y,T,R){switch(T){case"input":if(Rt(y,R),T=R.name,R.type==="radio"&&T!=null){for(R=y;R.parentNode;)R=R.parentNode;for(R=R.querySelectorAll("input[name="+JSON.stringify(""+T)+'][type="radio"]'),T=0;T<R.length;T++){var F=R[T];if(F!==y&&F.form===y.form){var X=Lp(F);if(!X)throw Error(t(90));Ae(F),Rt(F,X)}}}break;case"textarea":we(y,R);break;case"select":T=R.value,T!=null&&mt(y,!!R.multiple,T,!1)}},xr=c0,fr=xf;var om={usingClientEntryPoint:!1,Events:[$r,pn,Lp,Dr,Si,c0]},am={findFiberByHostInstance:pa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Mf={bundleType:am.bundleType,version:am.version,rendererPackageName:am.rendererPackageName,rendererConfig:am.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(y){return y=Nr(y),y===null?null:y.stateNode},findFiberByHostInstance:am.findFiberByHostInstance||gy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$g.isDisabled&&$g.supportsFiber)try{Ir=$g.inject(Mf),Cn=$g}catch{}}return Lf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=om,Lf.createPortal=function(y,T){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gp(T))throw Error(t(200));return my(y,T,null,R)},Lf.createRoot=function(y,T){if(!Gp(y))throw Error(t(299));var R=!1,F="",X=Xm;return T!=null&&(T.unstable_strictMode===!0&&(R=!0),T.identifierPrefix!==void 0&&(F=T.identifierPrefix),T.onRecoverableError!==void 0&&(X=T.onRecoverableError)),T=Vm(y,1,!1,null,null,R,!1,F,X),y[Ji]=T.current,Zl(y.nodeType===8?y.parentNode:y),new Cf(T)},Lf.findDOMNode=function(y){if(y==null)return null;if(y.nodeType===1)return y;var T=y._reactInternals;if(T===void 0)throw typeof y.render=="function"?Error(t(188)):(y=Object.keys(y).join(","),Error(t(268,y)));return y=Nr(T),y=y===null?null:y.stateNode,y},Lf.flushSync=function(y){return xf(y)},Lf.hydrate=function(y,T,R){if(!Wp(T))throw Error(t(200));return Vp(null,y,T,!0,R)},Lf.hydrateRoot=function(y,T,R){if(!Gp(y))throw Error(t(405));var F=R!=null&&R.hydratedSources||null,X=!1,ee="",ve=Xm;if(R!=null&&(R.unstable_strictMode===!0&&(X=!0),R.identifierPrefix!==void 0&&(ee=R.identifierPrefix),R.onRecoverableError!==void 0&&(ve=R.onRecoverableError)),T=zd(T,null,y,1,R??null,X,!1,ee,ve),y[Ji]=T.current,Zl(y),F)for(y=0;y<F.length;y++)R=F[y],X=R._getVersion,X=X(R._source),T.mutableSourceEagerHydrationData==null?T.mutableSourceEagerHydrationData=[R,X]:T.mutableSourceEagerHydrationData.push(R,X);return new Ym(T)},Lf.render=function(y,T,R){if(!Wp(T))throw Error(t(200));return Vp(null,y,T,!1,R)},Lf.unmountComponentAtNode=function(y){if(!Wp(y))throw Error(t(40));return y._reactRootContainer?(xf(function(){Vp(null,null,y,!1,function(){y._reactRootContainer=null,y[Ji]=null})}),!0):!1},Lf.unstable_batchedUpdates=c0,Lf.unstable_renderSubtreeIntoContainer=function(y,T,R,F){if(!Wp(R))throw Error(t(200));if(y==null||y._reactInternals===void 0)throw Error(t(38));return Vp(y,T,R,!1,F)},Lf.version="18.2.0-next-9e3b772b8-20220608",Lf}(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=Jxe()})($J);var CJ,LH=$J.exports;CJ=LH.createRoot,LH.hydrateRoot;const j$=new Me,uF=new Me,qxe=new Me;function Qxe(n,e,t){const i=j$.setFromMatrixPosition(n.matrixWorld);i.project(e);const s=t.width/2,o=t.height/2;return[i.x*s+s,-(i.y*o)+o]}function Zxe(n,e){const t=j$.setFromMatrixPosition(n.matrixWorld),i=uF.setFromMatrixPosition(e.matrixWorld),s=t.sub(i),o=e.getWorldDirection(qxe);return s.angleTo(o)>Math.PI/2}function ewe(n,e,t,i){const s=j$.setFromMatrixPosition(n.matrixWorld),o=s.clone();o.project(e),t.setFromCamera(o,e);const l=t.intersectObjects(i,!0);if(l.length){const u=l[0].distance;return s.distanceTo(t.ray.origin)<u}return!0}function twe(n,e){if(e instanceof J0)return e.zoom;if(e instanceof Ja){const t=j$.setFromMatrixPosition(n.matrixWorld),i=uF.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,o=t.distanceTo(i);return 1/(2*Math.tan(s/2)*o)}else return 1}function nwe(n,e,t){if(e instanceof Ja||e instanceof J0){const i=j$.setFromMatrixPosition(n.matrixWorld),s=uF.setFromMatrixPosition(e.matrixWorld),o=i.distanceTo(s),l=(t[1]-t[0])/(e.far-e.near),u=t[1]-l*e.far;return Math.round(l*o+u)}}const fN=n=>Math.abs(n)<1e-10?0:n;function MJ(n,e,t=""){let i="matrix3d(";for(let s=0;s!==16;s++)i+=fN(e[s]*n.elements[s])+(s!==15?",":")");return t+i}const rwe=(n=>e=>MJ(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),iwe=(n=>(e,t)=>MJ(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function swe(n){return n&&typeof n=="object"&&"current"in n}const AJ=ge.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:s,center:o,fullscreen:l,portal:u,distanceFactor:d,sprite:p=!1,transform:_=!1,occlude:v,onOcclude:b,castShadow:E,receiveShadow:C,material:M,geometry:I,zIndexRange:L=[16777271,0],calculatePosition:O=Qxe,as:P="div",wrapperClass:B,pointerEvents:z="auto",...G},j)=>{const{gl:H,camera:Z,scene:ae,size:J,raycaster:te,events:he,viewport:le}=qd(),[ce]=ge.useState(()=>document.createElement(P)),be=ge.useRef(),$e=ge.useRef(null),q=ge.useRef(0),oe=ge.useRef([0,0]),se=ge.useRef(null),pe=ge.useRef(null),Se=(u==null?void 0:u.current)||he.connected||H.domElement.parentNode,Fe=ge.useRef(null),Re=ge.useRef(!1),qe=ge.useMemo(()=>v&&v!=="blending"||Array.isArray(v)&&v.length&&swe(v[0]),[v]);ge.useLayoutEffect(()=>{const dt=H.domElement;v&&v==="blending"?(dt.style.zIndex=`${Math.floor(L[0]/2)}`,dt.style.position="absolute",dt.style.pointerEvents="none"):(dt.style.zIndex=null,dt.style.position=null,dt.style.pointerEvents=null)},[v]),ge.useLayoutEffect(()=>{if($e.current){const dt=be.current=CJ(ce);if(ae.updateMatrixWorld(),_)ce.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ue=O($e.current,Z,J);ce.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ue[0]}px,${Ue[1]}px,0);transform-origin:0 0;`}return Se&&(s?Se.prepend(ce):Se.appendChild(ce)),()=>{Se&&Se.removeChild(ce),dt.unmount()}}},[Se,_]),ge.useLayoutEffect(()=>{B&&(ce.className=B)},[B]);const Ne=ge.useMemo(()=>_?{position:"absolute",top:0,left:0,width:J.width,height:J.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...l&&{top:-J.height/2,left:-J.width/2,width:J.width,height:J.height},...t},[t,o,l,J,_]),it=ge.useMemo(()=>({position:"absolute",pointerEvents:z}),[z]);ge.useLayoutEffect(()=>{if(Re.current=!1,_){var dt;(dt=be.current)==null||dt.render(an("div",{ref:se,style:Ne,children:an("div",{ref:pe,style:it,children:an("div",{ref:j,className:i,style:t,children:n})})}))}else{var Ue;(Ue=be.current)==null||Ue.render(an("div",{ref:j,style:Ne,className:i,children:n}))}});const st=ge.useRef(!0);Fm(dt=>{if($e.current){Z.updateMatrixWorld(),$e.current.updateWorldMatrix(!0,!1);const Ue=_?oe.current:O($e.current,Z,J);if(_||Math.abs(q.current-Z.zoom)>e||Math.abs(oe.current[0]-Ue[0])>e||Math.abs(oe.current[1]-Ue[1])>e){const Ae=Zxe($e.current,Z);let je=!1;qe&&(v!=="blending"?je=[ae]:Array.isArray(v)&&(je=v.map(Rt=>Rt.current)));const nt=st.current;if(je){const Rt=ewe($e.current,Z,te,je);st.current=Rt&&!Ae}else st.current=!Ae;nt!==st.current&&(b?b(!st.current):ce.style.display=st.current?"block":"none");const tt=Math.floor(L[0]/2),Dt=v?qe?[L[0],tt]:[tt-1,0]:L;if(ce.style.zIndex=`${nwe($e.current,Z,Dt)}`,_){const[Rt,yt]=[J.width/2,J.height/2],Ct=Z.projectionMatrix.elements[5]*yt,{isOrthographicCamera:Mt,top:mt,left:xe,bottom:ie,right:we}=Z,ct=rwe(Z.matrixWorldInverse),Tt=Mt?`scale(${Ct})translate(${fN(-(we+xe)/2)}px,${fN((mt+ie)/2)}px)`:`translateZ(${Ct}px)`;let At=$e.current.matrixWorld;p&&(At=Z.matrixWorldInverse.clone().transpose().copyPosition(At).scale($e.current.scale),At.elements[3]=At.elements[7]=At.elements[11]=0,At.elements[15]=1),ce.style.width=J.width+"px",ce.style.height=J.height+"px",ce.style.perspective=Mt?"":`${Ct}px`,se.current&&pe.current&&(se.current.style.transform=`${Tt}${ct}translate(${Rt}px,${yt}px)`,pe.current.style.transform=iwe(At,1/((d||10)/400)))}else{const Rt=d===void 0?1:twe($e.current,Z)*d;ce.style.transform=`translate3d(${Ue[0]}px,${Ue[1]}px,0) scale(${Rt})`}oe.current=Ue,q.current=Z.zoom}}if(!qe&&Fe.current&&!Re.current)if(_){if(se.current){const Ue=se.current.children[0];if(Ue!=null&&Ue.clientWidth&&Ue!=null&&Ue.clientHeight){const{isOrthographicCamera:Ae}=Z;if(Ae||I)G.scale&&(Array.isArray(G.scale)?G.scale instanceof Me?Fe.current.scale.copy(G.scale.clone().divideScalar(1)):Fe.current.scale.set(1/G.scale[0],1/G.scale[1],1/G.scale[2]):Fe.current.scale.setScalar(1/G.scale));else{const je=(d||10)/400,nt=Ue.clientWidth*je,tt=Ue.clientHeight*je;Fe.current.scale.set(nt,tt,1)}Re.current=!0}}}else{const Ue=ce.children[0];if(Ue!=null&&Ue.clientWidth&&Ue!=null&&Ue.clientHeight){const Ae=1/le.factor,je=Ue.clientWidth*Ae,nt=Ue.clientHeight*Ae;Fe.current.scale.set(je,nt,1),Re.current=!0}Fe.current.lookAt(dt.camera.position)}});const pt=ge.useMemo(()=>({vertexShader:_?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[_]);return an("group",{...G,ref:$e,children:v&&!qe&&Oh("mesh",{castShadow:E,receiveShadow:C,ref:Fe,children:[I||an("planeGeometry",{}),M||an("shaderMaterial",{side:nf,vertexShader:pt.vertexShader,fragmentShader:pt.fragmentShader})]})})});function cF(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}const xA=0,owe=1,awe=new Me,DH=new oF,PO=new V_,NH=new Me,DM=new Sm;class BH{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new PH,this.unassigned=new PH,this.vertices=[]}setFromPoints(e){if(e.length>=4){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.vertices.push(new lwe(e[t]));this.compute()}return this}setFromObject(e){const t=[];return e.updateMatrixWorld(!0),e.traverse(function(i){const s=i.geometry;if(s!==void 0){if(s.isGeometry){console.error("THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.");return}else if(s.isBufferGeometry){const o=s.attributes.position;if(o!==void 0)for(let l=0,u=o.count;l<u;l++){const d=new Me;d.fromBufferAttribute(o,l).applyMatrix4(i.matrixWorld),t.push(d)}}}}),this.setFromPoints(t)}containsPoint(e){const t=this.faces;for(let i=0,s=t.length;i<s;i++)if(t[i].distanceToPoint(e)>this.tolerance)return!1;return!0}intersectRay(e,t){const i=this.faces;let s=-1/0,o=1/0;for(let l=0,u=i.length;l<u;l++){const d=i[l],p=d.distanceToPoint(e.origin),_=d.normal.dot(e.direction);if(p>0&&_>=0)return null;const v=_!==0?-p/_:0;if(!(v<=0)&&(_>0?o=Math.min(v,o):s=Math.max(v,s),s>o))return null}return s!==-1/0?e.at(s,t):e.at(o,t),t}intersectsRay(e){return this.intersectRay(e,awe)!==null}makeEmpty(){return this.faces=[],this.vertices=[],this}addVertexToFace(e,t){return e.face=t,t.outside===null?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}removeVertexFromFace(e,t){return e===t.outside&&(e.next!==null&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this}removeAllVerticesFromFace(e){if(e.outside!==null){const t=e.outside;let i=e.outside;for(;i.next!==null&&i.next.face===e;)i=i.next;return this.assigned.removeSubList(t,i),t.prev=i.next=null,e.outside=null,t}}deleteFaceVertices(e,t){const i=this.removeAllVerticesFromFace(e);if(i!==void 0)if(t===void 0)this.unassigned.appendChain(i);else{let s=i;do{const o=s.next;t.distanceToPoint(s.point)>this.tolerance?this.addVertexToFace(s,t):this.unassigned.append(s),s=o}while(s!==null)}return this}resolveUnassignedPoints(e){if(this.unassigned.isEmpty()===!1){let t=this.unassigned.first();do{const i=t.next;let s=this.tolerance,o=null;for(let l=0;l<e.length;l++){const u=e[l];if(u.mark===xA){const d=u.distanceToPoint(t.point);if(d>s&&(s=d,o=u),s>1e3*this.tolerance)break}}o!==null&&this.addVertexToFace(t,o),t=i}while(t!==null)}return this}computeExtremes(){const e=new Me,t=new Me,i=[],s=[];for(let o=0;o<3;o++)i[o]=s[o]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(let o=0,l=this.vertices.length;o<l;o++){const u=this.vertices[o],d=u.point;for(let p=0;p<3;p++)d.getComponent(p)<e.getComponent(p)&&(e.setComponent(p,d.getComponent(p)),i[p]=u);for(let p=0;p<3;p++)d.getComponent(p)>t.getComponent(p)&&(t.setComponent(p,d.getComponent(p)),s[p]=u)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:i,max:s}}computeInitialHull(){const e=this.vertices,t=this.computeExtremes(),i=t.min,s=t.max;let o=0,l=0;for(let b=0;b<3;b++){const E=s[b].point.getComponent(b)-i[b].point.getComponent(b);E>o&&(o=E,l=b)}const u=i[l],d=s[l];let p,_;o=0,DH.set(u.point,d.point);for(let b=0,E=this.vertices.length;b<E;b++){const C=e[b];if(C!==u&&C!==d){DH.closestPointToPoint(C.point,!0,NH);const M=NH.distanceToSquared(C.point);M>o&&(o=M,p=C)}}o=-1,PO.setFromCoplanarPoints(u.point,d.point,p.point);for(let b=0,E=this.vertices.length;b<E;b++){const C=e[b];if(C!==u&&C!==d&&C!==p){const M=Math.abs(PO.distanceToPoint(C.point));M>o&&(o=M,_=C)}}const v=[];if(PO.distanceToPoint(_.point)<0){v.push(Fg.create(u,d,p),Fg.create(_,d,u),Fg.create(_,p,d),Fg.create(_,u,p));for(let b=0;b<3;b++){const E=(b+1)%3;v[b+1].getEdge(2).setTwin(v[0].getEdge(E)),v[b+1].getEdge(1).setTwin(v[E+1].getEdge(0))}}else{v.push(Fg.create(u,p,d),Fg.create(_,u,d),Fg.create(_,d,p),Fg.create(_,p,u));for(let b=0;b<3;b++){const E=(b+1)%3;v[b+1].getEdge(2).setTwin(v[0].getEdge((3-b)%3)),v[b+1].getEdge(0).setTwin(v[E+1].getEdge(1))}}for(let b=0;b<4;b++)this.faces.push(v[b]);for(let b=0,E=e.length;b<E;b++){const C=e[b];if(C!==u&&C!==d&&C!==p&&C!==_){o=this.tolerance;let M=null;for(let I=0;I<4;I++){const L=this.faces[I].distanceToPoint(C.point);L>o&&(o=L,M=this.faces[I])}M!==null&&this.addVertexToFace(C,M)}}return this}reindexFaces(){const e=[];for(let t=0;t<this.faces.length;t++){const i=this.faces[t];i.mark===xA&&e.push(i)}return this.faces=e,this}nextVertexToAdd(){if(this.assigned.isEmpty()===!1){let e,t=0;const i=this.assigned.first().face;let s=i.outside;do{const o=i.distanceToPoint(s.point);o>t&&(t=o,e=s),s=s.next}while(s!==null&&s.face===i);return e}}computeHorizon(e,t,i,s){this.deleteFaceVertices(i),i.mark=owe;let o;t===null?o=t=i.getEdge(0):o=t.next;do{const l=o.twin,u=l.face;u.mark===xA&&(u.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,l,u,s):s.push(o)),o=o.next}while(o!==t);return this}addAdjoiningFace(e,t){const i=Fg.create(e,t.tail(),t.head());return this.faces.push(i),i.getEdge(-1).setTwin(t.twin),i.getEdge(0)}addNewFaces(e,t){this.newFaces=[];let i=null,s=null;for(let o=0;o<t.length;o++){const l=t[o],u=this.addAdjoiningFace(e,l);i===null?i=u:u.next.setTwin(s),this.newFaces.push(u.face),s=u}return i.next.setTwin(s),this}addVertexToHull(e){const t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}compute(){let e;for(this.computeInitialHull();(e=this.nextVertexToAdd())!==void 0;)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}class Fg{constructor(){this.normal=new Me,this.midpoint=new Me,this.area=0,this.constant=0,this.outside=null,this.mark=xA,this.edge=null}static create(e,t,i){const s=new Fg,o=new FO(e,s),l=new FO(t,s),u=new FO(i,s);return o.next=u.prev=l,l.next=o.prev=u,u.next=l.prev=o,s.edge=o,s.compute()}getEdge(e){let t=this.edge;for(;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}compute(){const e=this.edge.tail(),t=this.edge.head(),i=this.edge.next.head();return DM.set(e.point,t.point,i.point),DM.getNormal(this.normal),DM.getMidpoint(this.midpoint),this.area=DM.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(e){return this.normal.dot(e)-this.constant}}class FO{constructor(e,t){this.vertex=e,this.prev=null,this.next=null,this.twin=null,this.face=t}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceTo(e.point):-1}lengthSquared(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceToSquared(e.point):-1}setTwin(e){return this.twin=e,e.twin=this,this}}class lwe{constructor(e){this.point=e,this.prev=null,this.next=null,this.face=null}}class PH{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(e,t){return t.prev=e.prev,t.next=e,t.prev===null?this.head=t:t.prev.next=t,e.prev=t,this}insertAfter(e,t){return t.prev=e,t.next=e.next,t.next===null?this.tail=t:t.next.prev=t,e.next=t,this}append(e){return this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}appendChain(e){for(this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail;e.next!==null;)e=e.next;return this.tail=e,this}remove(e){return e.prev===null?this.head=e.next:e.prev.next=e.next,e.next===null?this.tail=e.prev:e.next.prev=e.prev,this}removeSubList(e,t){return e.prev===null?this.head=t.next:e.prev.next=t.next,t.next===null?this.tail=e.prev:t.next.prev=e.prev,this}isEmpty(){return this.head===null}}class FH extends ai{constructor(e=[]){super();const t=[],i=[];BH===void 0&&console.error("THREE.ConvexGeometry: ConvexGeometry relies on ConvexHull");const s=new BH().setFromPoints(e).faces;for(let o=0;o<s.length;o++){const l=s[o];let u=l.edge;do{const d=u.head().point;t.push(d.x,d.y,d.z),i.push(l.normal.x,l.normal.y,l.normal.z),u=u.next}while(u!==l.edge)}this.setAttribute("position",new sr(t,3)),this.setAttribute("normal",new sr(i,3))}}function Oi(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const IJ=(n,e)=>{const t=n[0].index!==null,i=new Set(Object.keys(n[0].attributes)),s=new Set(Object.keys(n[0].morphAttributes)),o={},l={},u=n[0].morphTargetsRelative,d=new ai;let p=0;if(n.forEach((_,v)=>{let b=0;if(t!==(_.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+v+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let E in _.attributes){if(!i.has(E))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+v+'. All geometries must have compatible attributes; make sure "'+E+'" attribute exists among all geometries, or in none of them.'),null;o[E]===void 0&&(o[E]=[]),o[E].push(_.attributes[E]),b++}if(b!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+v+". Make sure all geometries have the same number of attributes."),null;if(u!==_.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+v+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let E in _.morphAttributes){if(!s.has(E))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+v+".  .morphAttributes must be consistent throughout all geometries."),null;l[E]===void 0&&(l[E]=[]),l[E].push(_.morphAttributes[E])}if(d.userData.mergedUserData=d.userData.mergedUserData||[],d.userData.mergedUserData.push(_.userData),e){let E;if(_.index)E=_.index.count;else if(_.attributes.position!==void 0)E=_.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+v+". The geometry must have either an index or a position attribute"),null;d.addGroup(p,E,v),p+=E}}),t){let _=0;const v=[];n.forEach(b=>{const E=b.index;for(let C=0;C<E.count;++C)v.push(E.getX(C)+_);_+=b.attributes.position.count}),d.setIndex(v)}for(let _ in o){const v=zH(o[_]);if(!v)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+_+" attribute."),null;d.setAttribute(_,v)}for(let _ in l){const v=l[_][0].length;if(v===0)break;d.morphAttributes=d.morphAttributes||{},d.morphAttributes[_]=[];for(let b=0;b<v;++b){const E=[];for(let M=0;M<l[_].length;++M)E.push(l[_][M][b]);const C=zH(E);if(!C)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+_+" morphAttribute."),null;d.morphAttributes[_].push(C)}}return d},zH=n=>{let e,t,i,s=0;if(n.forEach(o=>{if(e===void 0&&(e=o.array.constructor),e!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=o.itemSize),t!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=o.normalized),i!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;s+=o.array.length}),e&&t){const o=new e(s);let l=0;return n.forEach(u=>{o.set(u.array,l),l+=u.array.length}),new Do(o,t,i)}},UH=(n,e)=>(n%e+e)%e;class uwe extends Bm{constructor(e,t){super(),Oi(this,"object",void 0),Oi(this,"domElement",void 0),Oi(this,"enabled",!0),Oi(this,"target",new Me),Oi(this,"minDistance",0),Oi(this,"maxDistance",1/0),Oi(this,"minZoom",0),Oi(this,"maxZoom",1/0),Oi(this,"minPolarAngle",0),Oi(this,"maxPolarAngle",Math.PI),Oi(this,"minAzimuthAngle",-1/0),Oi(this,"maxAzimuthAngle",1/0),Oi(this,"enableDamping",!1),Oi(this,"dampingFactor",.05),Oi(this,"enableZoom",!0),Oi(this,"zoomSpeed",1),Oi(this,"enableRotate",!0),Oi(this,"rotateSpeed",1),Oi(this,"enablePan",!0),Oi(this,"panSpeed",1),Oi(this,"screenSpacePanning",!0),Oi(this,"keyPanSpeed",7),Oi(this,"autoRotate",!1),Oi(this,"autoRotateSpeed",2),Oi(this,"reverseOrbit",!1),Oi(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Oi(this,"mouseButtons",{LEFT:Ub.ROTATE,MIDDLE:Ub.DOLLY,RIGHT:Ub.PAN}),Oi(this,"touches",{ONE:Hb.ROTATE,TWO:Hb.DOLLY_PAN}),Oi(this,"target0",void 0),Oi(this,"position0",void 0),Oi(this,"zoom0",void 0),Oi(this,"_domElementKeyEvents",null),Oi(this,"getPolarAngle",void 0),Oi(this,"getAzimuthalAngle",void 0),Oi(this,"setPolarAngle",void 0),Oi(this,"setAzimuthalAngle",void 0),Oi(this,"getDistance",void 0),Oi(this,"listenToKeyEvents",void 0),Oi(this,"saveState",void 0),Oi(this,"reset",void 0),Oi(this,"update",void 0),Oi(this,"connect",void 0),Oi(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof Ja?this.object.zoom:1,this.getPolarAngle=()=>_.phi,this.getAzimuthalAngle=()=>_.theta,this.setPolarAngle=ne=>{let fe=UH(ne,2*Math.PI),Ie=_.phi;Ie<0&&(Ie+=2*Math.PI),fe<0&&(fe+=2*Math.PI);let Ye=Math.abs(fe-Ie);2*Math.PI-Ye<Ye&&(fe<Ie?fe+=2*Math.PI:Ie+=2*Math.PI),v.phi=fe-Ie,i.update()},this.setAzimuthalAngle=ne=>{let fe=UH(ne,2*Math.PI),Ie=_.theta;Ie<0&&(Ie+=2*Math.PI),fe<0&&(fe+=2*Math.PI);let Ye=Math.abs(fe-Ie);2*Math.PI-Ye<Ye&&(fe<Ie?fe+=2*Math.PI:Ie+=2*Math.PI),v.theta=fe-Ie,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ne=>{ne.addEventListener("keydown",we),this._domElementKeyEvents=ne},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object instanceof Ja?i.object.zoom:1},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object instanceof Ja&&(i.object.zoom=i.zoom0,i.object.updateProjectionMatrix()),i.dispatchEvent(s),i.update(),d=u.NONE},this.update=(()=>{const ne=new Me,fe=new vl().setFromUnitVectors(e.up,new Me(0,1,0)),Ie=fe.clone().invert(),Ye=new Me,Gt=new vl,He=2*Math.PI;return function(){const Zt=i.object.position;ne.copy(Zt).sub(i.target),ne.applyQuaternion(fe),_.setFromVector3(ne),i.autoRotate&&d===u.NONE&&te(ae()),i.enableDamping?(_.theta+=v.theta*i.dampingFactor,_.phi+=v.phi*i.dampingFactor):(_.theta+=v.theta,_.phi+=v.phi);let _t=i.minAzimuthAngle,Kt=i.maxAzimuthAngle;return isFinite(_t)&&isFinite(Kt)&&(_t<-Math.PI?_t+=He:_t>Math.PI&&(_t-=He),Kt<-Math.PI?Kt+=He:Kt>Math.PI&&(Kt-=He),_t<=Kt?_.theta=Math.max(_t,Math.min(Kt,_.theta)):_.theta=_.theta>(_t+Kt)/2?Math.max(_t,_.theta):Math.min(Kt,_.theta)),_.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,_.phi)),_.makeSafe(),_.radius*=b,_.radius=Math.max(i.minDistance,Math.min(i.maxDistance,_.radius)),i.enableDamping===!0?i.target.addScaledVector(E,i.dampingFactor):i.target.add(E),ne.setFromSpherical(_),ne.applyQuaternion(Ie),Zt.copy(i.target).add(ne),i.object.lookAt(i.target),i.enableDamping===!0?(v.theta*=1-i.dampingFactor,v.phi*=1-i.dampingFactor,E.multiplyScalar(1-i.dampingFactor)):(v.set(0,0,0),E.set(0,0,0)),b=1,C||Ye.distanceToSquared(i.object.position)>p||8*(1-Gt.dot(i.object.quaternion))>p?(i.dispatchEvent(s),Ye.copy(i.object.position),Gt.copy(i.object.quaternion),C=!1,!0):!1}})(),this.connect=ne=>{ne===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=ne,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",At),i.domElement.addEventListener("pointerdown",Rt),i.domElement.addEventListener("pointercancel",Mt),i.domElement.addEventListener("wheel",ie)},this.dispose=()=>{var ne,fe,Ie,Ye,Gt,He;(ne=i.domElement)===null||ne===void 0||ne.removeEventListener("contextmenu",At),(fe=i.domElement)===null||fe===void 0||fe.removeEventListener("pointerdown",Rt),(Ie=i.domElement)===null||Ie===void 0||Ie.removeEventListener("pointercancel",Mt),(Ye=i.domElement)===null||Ye===void 0||Ye.removeEventListener("wheel",ie),(Gt=i.domElement)===null||Gt===void 0||Gt.ownerDocument.removeEventListener("pointermove",yt),(He=i.domElement)===null||He===void 0||He.ownerDocument.removeEventListener("pointerup",Ct),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",we)};const i=this,s={type:"change"},o={type:"start"},l={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=u.NONE;const p=1e-6,_=new uN,v=new uN;let b=1;const E=new Me;let C=!1;const M=new Vt,I=new Vt,L=new Vt,O=new Vt,P=new Vt,B=new Vt,z=new Vt,G=new Vt,j=new Vt,H=[],Z={};function ae(){return 2*Math.PI/60/60*i.autoRotateSpeed}function J(){return Math.pow(.95,i.zoomSpeed)}function te(ne){i.reverseOrbit?v.theta+=ne:v.theta-=ne}function he(ne){i.reverseOrbit?v.phi+=ne:v.phi-=ne}const le=(()=>{const ne=new Me;return function(fe,Ie){ne.setFromMatrixColumn(Ie,0),ne.multiplyScalar(-fe),E.add(ne)}})(),ce=(()=>{const ne=new Me;return function(fe,Ie){i.screenSpacePanning===!0?ne.setFromMatrixColumn(Ie,1):(ne.setFromMatrixColumn(Ie,0),ne.crossVectors(i.object.up,ne)),ne.multiplyScalar(fe),E.add(ne)}})(),be=(()=>{const ne=new Me;return function(fe,Ie){const Ye=i.domElement;if(Ye&&i.object instanceof Ja&&i.object.isPerspectiveCamera){const Gt=i.object.position;ne.copy(Gt).sub(i.target);let He=ne.length();He*=Math.tan(i.object.fov/2*Math.PI/180),le(2*fe*He/Ye.clientHeight,i.object.matrix),ce(2*Ie*He/Ye.clientHeight,i.object.matrix)}else Ye&&i.object instanceof J0&&i.object.isOrthographicCamera?(le(fe*(i.object.right-i.object.left)/i.object.zoom/Ye.clientWidth,i.object.matrix),ce(Ie*(i.object.top-i.object.bottom)/i.object.zoom/Ye.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function $e(ne){i.object instanceof Ja&&i.object.isPerspectiveCamera?b/=ne:i.object instanceof J0&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*ne)),i.object.updateProjectionMatrix(),C=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function q(ne){i.object instanceof Ja&&i.object.isPerspectiveCamera?b*=ne:i.object instanceof J0&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/ne)),i.object.updateProjectionMatrix(),C=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function oe(ne){M.set(ne.clientX,ne.clientY)}function se(ne){z.set(ne.clientX,ne.clientY)}function pe(ne){O.set(ne.clientX,ne.clientY)}function Se(ne){I.set(ne.clientX,ne.clientY),L.subVectors(I,M).multiplyScalar(i.rotateSpeed);const fe=i.domElement;fe&&(te(2*Math.PI*L.x/fe.clientHeight),he(2*Math.PI*L.y/fe.clientHeight)),M.copy(I),i.update()}function Fe(ne){G.set(ne.clientX,ne.clientY),j.subVectors(G,z),j.y>0?$e(J()):j.y<0&&q(J()),z.copy(G),i.update()}function Re(ne){P.set(ne.clientX,ne.clientY),B.subVectors(P,O).multiplyScalar(i.panSpeed),be(B.x,B.y),O.copy(P),i.update()}function qe(ne){ne.deltaY<0?q(J()):ne.deltaY>0&&$e(J()),i.update()}function Ne(ne){let fe=!1;switch(ne.code){case i.keys.UP:be(0,i.keyPanSpeed),fe=!0;break;case i.keys.BOTTOM:be(0,-i.keyPanSpeed),fe=!0;break;case i.keys.LEFT:be(i.keyPanSpeed,0),fe=!0;break;case i.keys.RIGHT:be(-i.keyPanSpeed,0),fe=!0;break}fe&&(ne.preventDefault(),i.update())}function it(){if(H.length==1)M.set(H[0].pageX,H[0].pageY);else{const ne=.5*(H[0].pageX+H[1].pageX),fe=.5*(H[0].pageY+H[1].pageY);M.set(ne,fe)}}function st(){if(H.length==1)O.set(H[0].pageX,H[0].pageY);else{const ne=.5*(H[0].pageX+H[1].pageX),fe=.5*(H[0].pageY+H[1].pageY);O.set(ne,fe)}}function pt(){const ne=H[0].pageX-H[1].pageX,fe=H[0].pageY-H[1].pageY,Ie=Math.sqrt(ne*ne+fe*fe);z.set(0,Ie)}function dt(){i.enableZoom&&pt(),i.enablePan&&st()}function Ue(){i.enableZoom&&pt(),i.enableRotate&&it()}function Ae(ne){if(H.length==1)I.set(ne.pageX,ne.pageY);else{const Ie=Q(ne),Ye=.5*(ne.pageX+Ie.x),Gt=.5*(ne.pageY+Ie.y);I.set(Ye,Gt)}L.subVectors(I,M).multiplyScalar(i.rotateSpeed);const fe=i.domElement;fe&&(te(2*Math.PI*L.x/fe.clientHeight),he(2*Math.PI*L.y/fe.clientHeight)),M.copy(I)}function je(ne){if(H.length==1)P.set(ne.pageX,ne.pageY);else{const fe=Q(ne),Ie=.5*(ne.pageX+fe.x),Ye=.5*(ne.pageY+fe.y);P.set(Ie,Ye)}B.subVectors(P,O).multiplyScalar(i.panSpeed),be(B.x,B.y),O.copy(P)}function nt(ne){const fe=Q(ne),Ie=ne.pageX-fe.x,Ye=ne.pageY-fe.y,Gt=Math.sqrt(Ie*Ie+Ye*Ye);G.set(0,Gt),j.set(0,Math.pow(G.y/z.y,i.zoomSpeed)),$e(j.y),z.copy(G)}function tt(ne){i.enableZoom&&nt(ne),i.enablePan&&je(ne)}function Dt(ne){i.enableZoom&&nt(ne),i.enableRotate&&Ae(ne)}function Rt(ne){if(i.enabled!==!1){if(H.length===0){var fe,Ie;(fe=i.domElement)===null||fe===void 0||fe.ownerDocument.addEventListener("pointermove",yt),(Ie=i.domElement)===null||Ie===void 0||Ie.ownerDocument.addEventListener("pointerup",Ct)}ft(ne),ne.pointerType==="touch"?ct(ne):mt(ne)}}function yt(ne){i.enabled!==!1&&(ne.pointerType==="touch"?Tt(ne):xe(ne))}function Ct(ne){if(Ke(ne),H.length===0){var fe,Ie,Ye;(fe=i.domElement)===null||fe===void 0||fe.releasePointerCapture(ne.pointerId),(Ie=i.domElement)===null||Ie===void 0||Ie.ownerDocument.removeEventListener("pointermove",yt),(Ye=i.domElement)===null||Ye===void 0||Ye.ownerDocument.removeEventListener("pointerup",Ct)}i.dispatchEvent(l),d=u.NONE}function Mt(ne){Ke(ne)}function mt(ne){let fe;switch(ne.button){case 0:fe=i.mouseButtons.LEFT;break;case 1:fe=i.mouseButtons.MIDDLE;break;case 2:fe=i.mouseButtons.RIGHT;break;default:fe=-1}switch(fe){case Ub.DOLLY:if(i.enableZoom===!1)return;se(ne),d=u.DOLLY;break;case Ub.ROTATE:if(ne.ctrlKey||ne.metaKey||ne.shiftKey){if(i.enablePan===!1)return;pe(ne),d=u.PAN}else{if(i.enableRotate===!1)return;oe(ne),d=u.ROTATE}break;case Ub.PAN:if(ne.ctrlKey||ne.metaKey||ne.shiftKey){if(i.enableRotate===!1)return;oe(ne),d=u.ROTATE}else{if(i.enablePan===!1)return;pe(ne),d=u.PAN}break;default:d=u.NONE}d!==u.NONE&&i.dispatchEvent(o)}function xe(ne){if(i.enabled!==!1)switch(d){case u.ROTATE:if(i.enableRotate===!1)return;Se(ne);break;case u.DOLLY:if(i.enableZoom===!1)return;Fe(ne);break;case u.PAN:if(i.enablePan===!1)return;Re(ne);break}}function ie(ne){i.enabled===!1||i.enableZoom===!1||d!==u.NONE&&d!==u.ROTATE||(ne.preventDefault(),i.dispatchEvent(o),qe(ne),i.dispatchEvent(l))}function we(ne){i.enabled===!1||i.enablePan===!1||Ne(ne)}function ct(ne){switch(Oe(ne),H.length){case 1:switch(i.touches.ONE){case Hb.ROTATE:if(i.enableRotate===!1)return;it(),d=u.TOUCH_ROTATE;break;case Hb.PAN:if(i.enablePan===!1)return;st(),d=u.TOUCH_PAN;break;default:d=u.NONE}break;case 2:switch(i.touches.TWO){case Hb.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;dt(),d=u.TOUCH_DOLLY_PAN;break;case Hb.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ue(),d=u.TOUCH_DOLLY_ROTATE;break;default:d=u.NONE}break;default:d=u.NONE}d!==u.NONE&&i.dispatchEvent(o)}function Tt(ne){switch(Oe(ne),d){case u.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ae(ne),i.update();break;case u.TOUCH_PAN:if(i.enablePan===!1)return;je(ne),i.update();break;case u.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;tt(ne),i.update();break;case u.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Dt(ne),i.update();break;default:d=u.NONE}}function At(ne){i.enabled!==!1&&ne.preventDefault()}function ft(ne){H.push(ne)}function Ke(ne){delete Z[ne.pointerId];for(let fe=0;fe<H.length;fe++)if(H[fe].pointerId==ne.pointerId){H.splice(fe,1);return}}function Oe(ne){let fe=Z[ne.pointerId];fe===void 0&&(fe=new Vt,Z[ne.pointerId]=fe),fe.set(ne.pageX,ne.pageY)}function Q(ne){const fe=ne.pointerId===H[0].pointerId?H[1]:H[0];return Z[fe.pointerId]}t!==void 0&&this.connect(t),this.update()}}const zx=new Me;function Zm(n,e,t,i,s,o){const l=2*Math.PI*s/4,u=Math.max(o-2*s,0),d=Math.PI/4;zx.copy(e),zx[i]=0,zx.normalize();const p=.5*l/(l+u),_=1-zx.angleTo(n)/d;return Math.sign(zx[t])===1?_*p:u/(l+u)+p+p*(1-_)}class cwe extends hu{constructor(e=1,t=1,i=1,s=2,o=.1){if(s=s*2+1,o=Math.min(e/2,t/2,i/2,o),super(1,1,1,s,s,s),s===1)return;const l=this.toNonIndexed();this.index=null,this.attributes.position=l.attributes.position,this.attributes.normal=l.attributes.normal,this.attributes.uv=l.attributes.uv;const u=new Me,d=new Me,p=new Me(e,t,i).divideScalar(2).subScalar(o),_=this.attributes.position.array,v=this.attributes.normal.array,b=this.attributes.uv.array,E=_.length/6,C=new Me,M=.5/s;for(let I=0,L=0;I<_.length;I+=3,L+=2)switch(u.fromArray(_,I),d.copy(u),d.x-=Math.sign(d.x)*M,d.y-=Math.sign(d.y)*M,d.z-=Math.sign(d.z)*M,d.normalize(),_[I+0]=p.x*Math.sign(u.x)+d.x*o,_[I+1]=p.y*Math.sign(u.y)+d.y*o,_[I+2]=p.z*Math.sign(u.z)+d.z*o,v[I+0]=d.x,v[I+1]=d.y,v[I+2]=d.z,Math.floor(I/E)){case 0:C.set(1,0,0),b[L+0]=Zm(C,d,"z","y",o,i),b[L+1]=1-Zm(C,d,"y","z",o,t);break;case 1:C.set(-1,0,0),b[L+0]=1-Zm(C,d,"z","y",o,i),b[L+1]=1-Zm(C,d,"y","z",o,t);break;case 2:C.set(0,1,0),b[L+0]=1-Zm(C,d,"x","z",o,e),b[L+1]=Zm(C,d,"z","x",o,i);break;case 3:C.set(0,-1,0),b[L+0]=1-Zm(C,d,"x","z",o,e),b[L+1]=1-Zm(C,d,"z","x",o,i);break;case 4:C.set(0,0,1),b[L+0]=1-Zm(C,d,"x","y",o,e),b[L+1]=1-Zm(C,d,"y","x",o,t);break;case 5:C.set(0,0,-1),b[L+0]=Zm(C,d,"x","y",o,e),b[L+1]=1-Zm(C,d,"y","x",o,t);break}}}const HH=new n0,NM=new Me;class hF extends ok{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new sr(e,3)),this.setAttribute("uv",new sr(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new bI(t,6,1);return this.setAttribute("instanceStart",new xm(i,3,0)),this.setAttribute("instanceEnd",new xm(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new bI(t,6,1);return this.setAttribute("instanceColorStart",new xm(i,3,0)),this.setAttribute("instanceColorEnd",new xm(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new XP(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new n0);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),HH.setFromBufferAttribute(t),this.boundingBox.union(HH))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new s_),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)NM.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(NM)),NM.fromBufferAttribute(t,o),s=Math.max(s,i.distanceToSquared(NM));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class RJ extends hF{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let s=0;s<t;s+=3)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5];return super.setPositions(i),this}setColors(e){const t=e.length-3,i=new Float32Array(2*t);for(let s=0;s<t;s+=3)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5];return super.setColors(i),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}Vn.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Vt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};ef.line={uniforms:z$.merge([Vn.common,Vn.fog,Vn.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class dF extends bd{constructor(e){super({type:"LineMaterial",uniforms:z$.clone(ef.line.uniforms),vertexShader:ef.line.vertexShader,fragmentShader:ef.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const GH=new Me,WH=new Me,Xd=new vs,Yd=new vs,N0=new vs,zO=new Me,UO=new qr,xp=new oF,VH=new Me,BM=new n0,PM=new s_,B0=new vs;let V0,mN,kJ,_1;function jH(n,e,t){return B0.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),B0.multiplyScalar(1/B0.w),B0.x=_1/t.width,B0.y=_1/t.height,B0.applyMatrix4(n.projectionMatrixInverse),B0.multiplyScalar(1/B0.w),Math.abs(Math.max(B0.x,B0.y))}function hwe(n,e){for(let t=0,i=mN.count;t<i;t++){xp.start.fromBufferAttribute(mN,t),xp.end.fromBufferAttribute(kJ,t);const s=new Me,o=new Me;V0.distanceSqToSegment(xp.start,xp.end,o,s),o.distanceTo(s)<_1*.5&&e.push({point:o,pointOnLine:s,distance:V0.origin.distanceTo(o),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function dwe(n,e,t){const i=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,l=n.geometry,u=l.attributes.instanceStart,d=l.attributes.instanceEnd,p=-e.near;V0.at(1,N0),N0.w=1,N0.applyMatrix4(e.matrixWorldInverse),N0.applyMatrix4(i),N0.multiplyScalar(1/N0.w),N0.x*=s.x/2,N0.y*=s.y/2,N0.z=0,zO.copy(N0),UO.multiplyMatrices(e.matrixWorldInverse,o);for(let _=0,v=u.count;_<v;_++){if(Xd.fromBufferAttribute(u,_),Yd.fromBufferAttribute(d,_),Xd.w=1,Yd.w=1,Xd.applyMatrix4(UO),Yd.applyMatrix4(UO),Xd.z>p&&Yd.z>p)continue;if(Xd.z>p){const I=Xd.z-Yd.z,L=(Xd.z-p)/I;Xd.lerp(Yd,L)}else if(Yd.z>p){const I=Yd.z-Xd.z,L=(Yd.z-p)/I;Yd.lerp(Xd,L)}Xd.applyMatrix4(i),Yd.applyMatrix4(i),Xd.multiplyScalar(1/Xd.w),Yd.multiplyScalar(1/Yd.w),Xd.x*=s.x/2,Xd.y*=s.y/2,Yd.x*=s.x/2,Yd.y*=s.y/2,xp.start.copy(Xd),xp.start.z=0,xp.end.copy(Yd),xp.end.z=0;const b=xp.closestPointToPointParameter(zO,!0);xp.at(b,VH);const E=aK.lerp(Xd.z,Yd.z,b),C=E>=-1&&E<=1,M=zO.distanceTo(VH)<_1*.5;if(C&&M){xp.start.fromBufferAttribute(u,_),xp.end.fromBufferAttribute(d,_),xp.start.applyMatrix4(o),xp.end.applyMatrix4(o);const I=new Me,L=new Me;V0.distanceSqToSegment(xp.start,xp.end,L,I),t.push({point:L,pointOnLine:I,distance:V0.origin.distanceTo(L),object:n,face:null,faceIndex:_,uv:null,uv2:null})}}}class OJ extends Fn{constructor(e=new hF,t=new dF({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,s=new Float32Array(2*t.count);for(let l=0,u=0,d=t.count;l<d;l++,u+=2)GH.fromBufferAttribute(t,l),WH.fromBufferAttribute(i,l),s[u]=u===0?0:s[u-1],s[u+1]=s[u]+GH.distanceTo(WH);const o=new bI(s,2,1);return e.setAttribute("instanceDistanceStart",new xm(o,1,0)),e.setAttribute("instanceDistanceEnd",new xm(o,1,1)),this}raycast(e,t){const i=this.material.worldUnits,s=e.camera;s===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const o=e.params.Line2!==void 0&&e.params.Line2.threshold||0;V0=e.ray;const l=this.matrixWorld,u=this.geometry,d=this.material;_1=d.linewidth+o,mN=u.attributes.instanceStart,kJ=u.attributes.instanceEnd,u.boundingSphere===null&&u.computeBoundingSphere(),PM.copy(u.boundingSphere).applyMatrix4(l);let p;if(i)p=_1*.5;else{const v=Math.max(s.near,PM.distanceToPoint(V0.origin));p=jH(s,v,d.resolution)}if(PM.radius+=p,V0.intersectsSphere(PM)===!1)return;u.boundingBox===null&&u.computeBoundingBox(),BM.copy(u.boundingBox).applyMatrix4(l);let _;if(i)_=_1*.5;else{const v=Math.max(s.near,BM.distanceToPoint(V0.origin));_=jH(s,v,d.resolution)}BM.expandByScalar(_),V0.intersectsBox(BM)!==!1&&(i?hwe(this,t):dwe(this,s,t))}}class pwe extends OJ{constructor(e=new RJ,t=new dF({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const fwe=ge.forwardRef(function({follow:n=!0,lockX:e=!1,lockY:t=!1,lockZ:i=!1,...s},o){const l=ge.useRef();return Fm(({camera:u})=>{if(!n||!l.current)return;const d=l.current.rotation.clone();u.getWorldQuaternion(l.current.quaternion),e&&(l.current.rotation.x=d.x),t&&(l.current.rotation.y=d.y),i&&(l.current.rotation.z=d.z)}),an("group",{ref:cF([l,o]),...s})}),mwe=ge.forwardRef(function({points:n,color:e="black",vertexColors:t,linewidth:i,lineWidth:s,segments:o,dashed:l,...u},d){const p=qd(E=>E.size),_=ge.useMemo(()=>o?new OJ:new pwe,[o]),[v]=ge.useState(()=>new dF),b=ge.useMemo(()=>{const E=o?new hF:new RJ,C=n.map(M=>{const I=Array.isArray(M);return M instanceof Me?[M.x,M.y,M.z]:M instanceof Vt?[M.x,M.y,0]:I&&M.length===3?[M[0],M[1],M[2]]:I&&M.length===2?[M[0],M[1],0]:M});if(E.setPositions(C.flat()),t){const M=t.map(I=>I instanceof Nn?I.toArray():I);E.setColors(M.flat())}return E},[n,o,t]);return ge.useLayoutEffect(()=>{_.computeLineDistances()},[n,_]),ge.useLayoutEffect(()=>{l?v.defines.USE_DASH="":delete v.defines.USE_DASH,v.needsUpdate=!0},[l,v]),ge.useEffect(()=>()=>b.dispose(),[b]),Oh("primitive",{object:_,ref:d,...u,children:[an("primitive",{object:b,attach:"geometry"}),an("primitive",{object:v,attach:"material",color:e,vertexColors:!!t,resolution:[p.width,p.height],linewidth:i??s,dashed:l,...u})]})});function gwe(){var n=Object.create(null);function e(s,o){var l=s.id,u=s.name,d=s.dependencies;d===void 0&&(d=[]);var p=s.init;p===void 0&&(p=function(){});var _=s.getTransferables;if(_===void 0&&(_=null),!n[l])try{d=d.map(function(b){return b&&b.isWorkerModule&&(e(b,function(E){if(E instanceof Error)throw E}),b=n[b.id].value),b}),p=i("<"+u+">.init",p),_&&(_=i("<"+u+">.getTransferables",_));var v=null;typeof p=="function"?v=p.apply(void 0,d):console.error("worker module init function failed to rehydrate"),n[l]={id:l,value:v,getTransferables:_},o(v)}catch(b){b&&b.noLog||console.error(b),o(b)}}function t(s,o){var l,u=s.id,d=s.args;(!n[u]||typeof n[u].value!="function")&&o(new Error("Worker module "+u+": not found or its 'init' did not return a function"));try{var p=(l=n[u]).value.apply(l,d);p&&typeof p.then=="function"?p.then(_,function(v){return o(v instanceof Error?v:new Error(""+v))}):_(p)}catch(v){o(v)}function _(v){try{var b=n[u].getTransferables&&n[u].getTransferables(v);(!b||!Array.isArray(b)||!b.length)&&(b=void 0),o(v,b)}catch(E){console.error(E),o(E)}}}function i(s,o){var l=void 0;self.troikaDefine=function(d){return l=d};var u=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+o+`
)`],{type:"application/javascript"}));try{importScripts(u)}catch(d){console.error(d)}return URL.revokeObjectURL(u),delete self.troikaDefine,l}self.addEventListener("message",function(s){var o=s.data,l=o.messageId,u=o.action,d=o.data;try{u==="registerModule"&&e(d,function(p){p instanceof Error?postMessage({messageId:l,success:!1,error:p.message}):postMessage({messageId:l,success:!0,result:{isCallable:typeof p=="function"}})}),u==="callModule"&&t(d,function(p,_){p instanceof Error?postMessage({messageId:l,success:!1,error:p.message}):postMessage({messageId:l,success:!0,result:p},_||void 0)})}catch(p){postMessage({messageId:l,success:!1,error:p.stack})}})}function _we(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(o){return o&&o._getInitResult?o._getInitResult():o}):[];var s=Promise.all(t).then(function(o){return i.apply(null,o)});return e._getInitResult=function(){return s},s},e}var LJ=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u"&&!1||console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return LJ=function(){return n},n},ywe=0,vwe=0,HO=!1,Sw=Object.create(null),Ew=Object.create(null),gN=Object.create(null);function X$(n){if((!n||typeof n.init!="function")&&!HO)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,s=n.workerId;if(!LJ())return _we(n);s==null&&(s="#default");var o="workerModule"+ ++ywe,l=n.name||o,u=null;e=e&&e.map(function(p){return typeof p=="function"&&!p.workerModuleData&&(HO=!0,p=X$({workerId:s,name:"<"+l+"> function dependency: "+p.name,init:`function(){return (
`+wA(p)+`
)}`}),HO=!1),p&&p.workerModuleData&&(p=p.workerModuleData),p});function d(){for(var p=[],_=arguments.length;_--;)p[_]=arguments[_];if(!u){u=XH(s,"registerModule",d.workerModuleData);var v=function(){u=null,Ew[s].delete(v)};(Ew[s]||(Ew[s]=new Set)).add(v)}return u.then(function(b){var E=b.isCallable;if(E)return XH(s,"callModule",{id:o,args:p});throw new Error("Worker module function was called but `init` did not return a callable function")})}return d.workerModuleData={isWorkerModule:!0,id:o,name:l,dependencies:e,init:wA(t),getTransferables:i&&wA(i)},d}function bwe(n){Ew[n]&&Ew[n].forEach(function(e){e()}),Sw[n]&&(Sw[n].terminate(),delete Sw[n])}function wA(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Twe(n){var e=Sw[n];if(!e){var t=wA(gwe);e=Sw[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var s=i.data,o=s.messageId,l=gN[o];if(!l)throw new Error("WorkerModule response with empty or unknown messageId");delete gN[o],l(s)}}return e}function XH(n,e,t){return new Promise(function(i,s){var o=++vwe;gN[o]=function(l){l.success?i(l.result):s(new Error("Error in worker "+e+" call: "+l.error))},Twe(n).postMessage({messageId:o,action:e,data:t})})}function DJ(){var n=function(e){function t(oe,se,pe,Se,Fe,Re,qe,Ne){var it=1-qe;Ne.x=it*it*oe+2*it*qe*pe+qe*qe*Fe,Ne.y=it*it*se+2*it*qe*Se+qe*qe*Re}function i(oe,se,pe,Se,Fe,Re,qe,Ne,it,st){var pt=1-it;st.x=pt*pt*pt*oe+3*pt*pt*it*pe+3*pt*it*it*Fe+it*it*it*qe,st.y=pt*pt*pt*se+3*pt*pt*it*Se+3*pt*it*it*Re+it*it*it*Ne}function s(oe,se){for(var pe=/([MLQCZ])([^MLQCZ]*)/g,Se,Fe,Re,qe,Ne;Se=pe.exec(oe);){var it=Se[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(st){return parseFloat(st)});switch(Se[1]){case"M":qe=Fe=it[0],Ne=Re=it[1];break;case"L":(it[0]!==qe||it[1]!==Ne)&&se("L",qe,Ne,qe=it[0],Ne=it[1]);break;case"Q":{se("Q",qe,Ne,qe=it[2],Ne=it[3],it[0],it[1]);break}case"C":{se("C",qe,Ne,qe=it[4],Ne=it[5],it[0],it[1],it[2],it[3]);break}case"Z":(qe!==Fe||Ne!==Re)&&se("L",qe,Ne,Fe,Re);break}}}function o(oe,se,pe){pe===void 0&&(pe=16);var Se={x:0,y:0};s(oe,function(Fe,Re,qe,Ne,it,st,pt,dt,Ue){switch(Fe){case"L":se(Re,qe,Ne,it);break;case"Q":{for(var Ae=Re,je=qe,nt=1;nt<pe;nt++)t(Re,qe,st,pt,Ne,it,nt/(pe-1),Se),se(Ae,je,Se.x,Se.y),Ae=Se.x,je=Se.y;break}case"C":{for(var tt=Re,Dt=qe,Rt=1;Rt<pe;Rt++)i(Re,qe,st,pt,dt,Ue,Ne,it,Rt/(pe-1),Se),se(tt,Dt,Se.x,Se.y),tt=Se.x,Dt=Se.y;break}}})}var l="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",u="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",d=new WeakMap,p={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function _(oe,se){var pe=oe.getContext?oe.getContext("webgl",p):oe,Se=d.get(pe);if(!Se){let pt=function(tt){var Dt=Re[tt];if(!Dt&&(Dt=Re[tt]=pe.getExtension(tt),!Dt))throw new Error(tt+" not supported");return Dt},dt=function(tt,Dt){var Rt=pe.createShader(Dt);return pe.shaderSource(Rt,tt),pe.compileShader(Rt),Rt},Ue=function(tt,Dt,Rt,yt){if(!qe[tt]){var Ct={},Mt={},mt=pe.createProgram();pe.attachShader(mt,dt(Dt,pe.VERTEX_SHADER)),pe.attachShader(mt,dt(Rt,pe.FRAGMENT_SHADER)),pe.linkProgram(mt),qe[tt]={program:mt,transaction:function(xe){pe.useProgram(mt),xe({setUniform:function(ie,we){for(var ct=[],Tt=arguments.length-2;Tt-- >0;)ct[Tt]=arguments[Tt+2];var At=Mt[we]||(Mt[we]=pe.getUniformLocation(mt,we));pe["uniform"+ie].apply(pe,[At].concat(ct))},setAttribute:function(ie,we,ct,Tt,At){var ft=Ct[ie];ft||(ft=Ct[ie]={buf:pe.createBuffer(),loc:pe.getAttribLocation(mt,ie),data:null}),pe.bindBuffer(pe.ARRAY_BUFFER,ft.buf),pe.vertexAttribPointer(ft.loc,we,pe.FLOAT,!1,0,0),pe.enableVertexAttribArray(ft.loc),Fe?pe.vertexAttribDivisor(ft.loc,Tt):pt("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ft.loc,Tt),At!==ft.data&&(pe.bufferData(pe.ARRAY_BUFFER,At,ct),ft.data=At)}})}}}qe[tt].transaction(yt)},Ae=function(tt,Dt){it++;try{pe.activeTexture(pe.TEXTURE0+it);var Rt=Ne[tt];Rt||(Rt=Ne[tt]=pe.createTexture(),pe.bindTexture(pe.TEXTURE_2D,Rt),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MIN_FILTER,pe.NEAREST),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MAG_FILTER,pe.NEAREST)),pe.bindTexture(pe.TEXTURE_2D,Rt),Dt(Rt,it)}finally{it--}},je=function(tt,Dt,Rt){var yt=pe.createFramebuffer();st.push(yt),pe.bindFramebuffer(pe.FRAMEBUFFER,yt),pe.activeTexture(pe.TEXTURE0+Dt),pe.bindTexture(pe.TEXTURE_2D,tt),pe.framebufferTexture2D(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_2D,tt,0);try{Rt(yt)}finally{pe.deleteFramebuffer(yt),pe.bindFramebuffer(pe.FRAMEBUFFER,st[--st.length-1]||null)}},nt=function(){Re={},qe={},Ne={},it=-1,st.length=0};var Fe=typeof WebGL2RenderingContext<"u"&&pe instanceof WebGL2RenderingContext,Re={},qe={},Ne={},it=-1,st=[];pe.canvas.addEventListener("webglcontextlost",function(tt){nt(),tt.preventDefault()},!1),d.set(pe,Se={gl:pe,isWebGL2:Fe,getExtension:pt,withProgram:Ue,withTexture:Ae,withTextureFramebuffer:je,handleContextLoss:nt})}se(Se)}function v(oe,se,pe,Se,Fe,Re,qe,Ne){qe===void 0&&(qe=15),Ne===void 0&&(Ne=null),_(oe,function(it){var st=it.gl,pt=it.withProgram,dt=it.withTexture;dt("copy",function(Ue,Ae){st.texImage2D(st.TEXTURE_2D,0,st.RGBA,Fe,Re,0,st.RGBA,st.UNSIGNED_BYTE,se),pt("copy",l,u,function(je){var nt=je.setUniform,tt=je.setAttribute;tt("aUV",2,st.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),nt("1i","image",Ae),st.bindFramebuffer(st.FRAMEBUFFER,Ne||null),st.disable(st.BLEND),st.colorMask(qe&8,qe&4,qe&2,qe&1),st.viewport(pe,Se,Fe,Re),st.scissor(pe,Se,Fe,Re),st.drawArrays(st.TRIANGLES,0,3)})})})}function b(oe,se,pe){var Se=oe.width,Fe=oe.height;_(oe,function(Re){var qe=Re.gl,Ne=new Uint8Array(Se*Fe*4);qe.readPixels(0,0,Se,Fe,qe.RGBA,qe.UNSIGNED_BYTE,Ne),oe.width=se,oe.height=pe,v(qe,Ne,0,0,Se,Fe)})}var E=Object.freeze({__proto__:null,withWebGLContext:_,renderImageData:v,resizeWebGLCanvasWithoutClearing:b});function C(oe,se,pe,Se,Fe,Re){Re===void 0&&(Re=1);var qe=new Uint8Array(oe*se),Ne=Se[2]-Se[0],it=Se[3]-Se[1],st=[];o(pe,function(tt,Dt,Rt,yt){st.push({x1:tt,y1:Dt,x2:Rt,y2:yt,minX:Math.min(tt,Rt),minY:Math.min(Dt,yt),maxX:Math.max(tt,Rt),maxY:Math.max(Dt,yt)})}),st.sort(function(tt,Dt){return tt.maxX-Dt.maxX});for(var pt=0;pt<oe;pt++)for(var dt=0;dt<se;dt++){var Ue=je(Se[0]+Ne*(pt+.5)/oe,Se[1]+it*(dt+.5)/se),Ae=Math.pow(1-Math.abs(Ue)/Fe,Re)/2;Ue<0&&(Ae=1-Ae),Ae=Math.max(0,Math.min(255,Math.round(Ae*255))),qe[dt*oe+pt]=Ae}return qe;function je(tt,Dt){for(var Rt=1/0,yt=1/0,Ct=st.length;Ct--;){var Mt=st[Ct];if(Mt.maxX+yt<=tt)break;if(tt+yt>Mt.minX&&Dt-yt<Mt.maxY&&Dt+yt>Mt.minY){var mt=L(tt,Dt,Mt.x1,Mt.y1,Mt.x2,Mt.y2);mt<Rt&&(Rt=mt,yt=Math.sqrt(Rt))}}return nt(tt,Dt)&&(yt=-yt),yt}function nt(tt,Dt){for(var Rt=0,yt=st.length;yt--;){var Ct=st[yt];if(Ct.maxX<=tt)break;var Mt=Ct.y1>Dt!=Ct.y2>Dt&&tt<(Ct.x2-Ct.x1)*(Dt-Ct.y1)/(Ct.y2-Ct.y1)+Ct.x1;Mt&&(Rt+=Ct.y1<Ct.y2?1:-1)}return Rt!==0}}function M(oe,se,pe,Se,Fe,Re,qe,Ne,it,st){Re===void 0&&(Re=1),Ne===void 0&&(Ne=0),it===void 0&&(it=0),st===void 0&&(st=0),I(oe,se,pe,Se,Fe,Re,qe,null,Ne,it,st)}function I(oe,se,pe,Se,Fe,Re,qe,Ne,it,st,pt){Re===void 0&&(Re=1),it===void 0&&(it=0),st===void 0&&(st=0),pt===void 0&&(pt=0);for(var dt=C(oe,se,pe,Se,Fe,Re),Ue=new Uint8Array(dt.length*4),Ae=0;Ae<dt.length;Ae++)Ue[Ae*4+pt]=dt[Ae];v(qe,Ue,it,st,oe,se,1<<3-pt,Ne)}function L(oe,se,pe,Se,Fe,Re){var qe=Fe-pe,Ne=Re-Se,it=qe*qe+Ne*Ne,st=it?Math.max(0,Math.min(1,((oe-pe)*qe+(se-Se)*Ne)/it)):0,pt=oe-(pe+st*qe),dt=se-(Se+st*Ne);return pt*pt+dt*dt}var O=Object.freeze({__proto__:null,generate:C,generateIntoCanvas:M,generateIntoFramebuffer:I}),P="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",B="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",z="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",G=new Float32Array([0,0,2,0,0,2]),j=null,H=!1,Z={},ae=new WeakMap;function J(oe){if(!H&&!ce(oe))throw new Error("WebGL generation not supported")}function te(oe,se,pe,Se,Fe,Re,qe){if(Re===void 0&&(Re=1),qe===void 0&&(qe=null),!qe&&(qe=j,!qe)){var Ne=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!Ne)throw new Error("OffscreenCanvas or DOM canvas not supported");qe=j=Ne.getContext("webgl",{depth:!1})}J(qe);var it=new Uint8Array(oe*se*4);_(qe,function(Ue){var Ae=Ue.gl,je=Ue.withTexture,nt=Ue.withTextureFramebuffer;je("readable",function(tt,Dt){Ae.texImage2D(Ae.TEXTURE_2D,0,Ae.RGBA,oe,se,0,Ae.RGBA,Ae.UNSIGNED_BYTE,null),nt(tt,Dt,function(Rt){le(oe,se,pe,Se,Fe,Re,Ae,Rt,0,0,0),Ae.readPixels(0,0,oe,se,Ae.RGBA,Ae.UNSIGNED_BYTE,it)})})});for(var st=new Uint8Array(oe*se),pt=0,dt=0;pt<it.length;pt+=4)st[dt++]=it[pt];return st}function he(oe,se,pe,Se,Fe,Re,qe,Ne,it,st){Re===void 0&&(Re=1),Ne===void 0&&(Ne=0),it===void 0&&(it=0),st===void 0&&(st=0),le(oe,se,pe,Se,Fe,Re,qe,null,Ne,it,st)}function le(oe,se,pe,Se,Fe,Re,qe,Ne,it,st,pt){Re===void 0&&(Re=1),it===void 0&&(it=0),st===void 0&&(st=0),pt===void 0&&(pt=0),J(qe);var dt=[];o(pe,function(Ue,Ae,je,nt){dt.push(Ue,Ae,je,nt)}),dt=new Float32Array(dt),_(qe,function(Ue){var Ae=Ue.gl,je=Ue.isWebGL2,nt=Ue.getExtension,tt=Ue.withProgram,Dt=Ue.withTexture,Rt=Ue.withTextureFramebuffer,yt=Ue.handleContextLoss;if(Dt("rawDistances",function(Ct,Mt){(oe!==Ct._lastWidth||se!==Ct._lastHeight)&&Ae.texImage2D(Ae.TEXTURE_2D,0,Ae.RGBA,Ct._lastWidth=oe,Ct._lastHeight=se,0,Ae.RGBA,Ae.UNSIGNED_BYTE,null),tt("main",P,B,function(mt){var xe=mt.setAttribute,ie=mt.setUniform,we=!je&&nt("ANGLE_instanced_arrays"),ct=!je&&nt("EXT_blend_minmax");xe("aUV",2,Ae.STATIC_DRAW,0,G),xe("aLineSegment",4,Ae.DYNAMIC_DRAW,1,dt),ie.apply(void 0,["4f","uGlyphBounds"].concat(Se)),ie("1f","uMaxDistance",Fe),ie("1f","uExponent",Re),Rt(Ct,Mt,function(Tt){Ae.enable(Ae.BLEND),Ae.colorMask(!0,!0,!0,!0),Ae.viewport(0,0,oe,se),Ae.scissor(0,0,oe,se),Ae.blendFunc(Ae.ONE,Ae.ONE),Ae.blendEquationSeparate(Ae.FUNC_ADD,je?Ae.MAX:ct.MAX_EXT),Ae.clear(Ae.COLOR_BUFFER_BIT),je?Ae.drawArraysInstanced(Ae.TRIANGLES,0,3,dt.length/4):we.drawArraysInstancedANGLE(Ae.TRIANGLES,0,3,dt.length/4)})}),tt("post",l,z,function(mt){mt.setAttribute("aUV",2,Ae.STATIC_DRAW,0,G),mt.setUniform("1i","tex",Mt),Ae.bindFramebuffer(Ae.FRAMEBUFFER,Ne),Ae.disable(Ae.BLEND),Ae.colorMask(pt===0,pt===1,pt===2,pt===3),Ae.viewport(it,st,oe,se),Ae.scissor(it,st,oe,se),Ae.drawArrays(Ae.TRIANGLES,0,3)})}),Ae.isContextLost())throw yt(),new Error("webgl context lost")})}function ce(oe){var se=!oe||oe===j?Z:oe.canvas||oe,pe=ae.get(se);if(pe===void 0){H=!0;var Se=null;try{var Fe=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],Re=te(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,oe);pe=Re&&Fe.length===Re.length&&Re.every(function(qe,Ne){return qe===Fe[Ne]}),pe||(Se="bad trial run results",console.info(Fe,Re))}catch(qe){pe=!1,Se=qe.message}Se&&console.warn("WebGL SDF generation not supported:",Se),H=!1,ae.set(se,pe)}return pe}var be=Object.freeze({__proto__:null,generate:te,generateIntoCanvas:he,generateIntoFramebuffer:le,isSupported:ce});function $e(oe,se,pe,Se,Fe,Re){Fe===void 0&&(Fe=Math.max(Se[2]-Se[0],Se[3]-Se[1])/2),Re===void 0&&(Re=1);try{return te.apply(be,arguments)}catch(qe){return console.info("WebGL SDF generation failed, falling back to JS",qe),C.apply(O,arguments)}}function q(oe,se,pe,Se,Fe,Re,qe,Ne,it,st){Fe===void 0&&(Fe=Math.max(Se[2]-Se[0],Se[3]-Se[1])/2),Re===void 0&&(Re=1),Ne===void 0&&(Ne=0),it===void 0&&(it=0),st===void 0&&(st=0);try{return he.apply(be,arguments)}catch(pt){return console.info("WebGL SDF generation failed, falling back to JS",pt),M.apply(O,arguments)}}return e.forEachPathCommand=s,e.generate=$e,e.generateIntoCanvas=q,e.javascript=O,e.pathToLineSegments=o,e.webgl=be,e.webglUtils=E,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function Swe(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},s={};i.L=1,s[1]="L",Object.keys(t).forEach(function(yt,Ct){i[yt]=1<<Ct+1,s[i[yt]]=yt}),Object.freeze(i);var o=i.LRI|i.RLI|i.FSI,l=i.L|i.R|i.AL,u=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,d=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,p=i.S|i.WS|i.B|o|i.PDI|d,_=null;function v(){if(!_){_=new Map;var yt=function(Mt){if(t.hasOwnProperty(Mt)){var mt=0;t[Mt].split(",").forEach(function(xe){var ie=xe.split("+"),we=ie[0],ct=ie[1];we=parseInt(we,36),ct=ct?parseInt(ct,36):0,_.set(mt+=we,i[Mt]);for(var Tt=0;Tt<ct;Tt++)_.set(++mt,i[Mt])})}};for(var Ct in t)yt(Ct)}}function b(yt){return v(),_.get(yt.codePointAt(0))||i.L}function E(yt){return s[b(yt)]}var C={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function M(yt,Ct){var Mt=36,mt=0,xe=new Map,ie=Ct&&new Map,we;return yt.split(",").forEach(function ct(Tt){if(Tt.indexOf("+")!==-1)for(var At=+Tt;At--;)ct(we);else{we=Tt;var ft=Tt.split(">"),Ke=ft[0],Oe=ft[1];Ke=String.fromCodePoint(mt+=parseInt(Ke,Mt)),Oe=String.fromCodePoint(mt+=parseInt(Oe,Mt)),xe.set(Ke,Oe),Ct&&ie.set(Oe,Ke)}}),{map:xe,reverseMap:ie}}var I,L,O;function P(){if(!I){var yt=M(C.pairs,!0),Ct=yt.map,Mt=yt.reverseMap;I=Ct,L=Mt,O=M(C.canonical,!1).map}}function B(yt){return P(),I.get(yt)||null}function z(yt){return P(),L.get(yt)||null}function G(yt){return P(),O.get(yt)||null}var j=i.L,H=i.R,Z=i.EN,ae=i.ES,J=i.ET,te=i.AN,he=i.CS,le=i.B,ce=i.S,be=i.ON,$e=i.BN,q=i.NSM,oe=i.AL,se=i.LRO,pe=i.RLO,Se=i.LRE,Fe=i.RLE,Re=i.PDF,qe=i.LRI,Ne=i.RLI,it=i.FSI,st=i.PDI;function pt(yt,Ct){for(var Mt=125,mt=new Uint32Array(yt.length),xe=0;xe<yt.length;xe++)mt[xe]=b(yt[xe]);var ie=new Map;function we(Ni,wi){var Hn=mt[Ni];mt[Ni]=wi,ie.set(Hn,ie.get(Hn)-1),Hn&u&&ie.set(u,ie.get(u)-1),ie.set(wi,(ie.get(wi)||0)+1),wi&u&&ie.set(u,(ie.get(u)||0)+1)}for(var ct=new Uint8Array(yt.length),Tt=new Map,At=[],ft=null,Ke=0;Ke<yt.length;Ke++)ft||At.push(ft={start:Ke,end:yt.length-1,level:Ct==="rtl"?1:Ct==="ltr"?0:xo(Ke,!1)}),mt[Ke]&le&&(ft.end=Ke,ft=null);for(var Oe=Fe|Se|pe|se|o|st|Re|le,Q=function(Ni){return Ni+(Ni&1?1:2)},ne=function(Ni){return Ni+(Ni&1?2:1)},fe=0;fe<At.length;fe++){ft=At[fe];var Ie=[{_level:ft.level,_override:0,_isolate:0}],Ye=void 0,Gt=0,He=0,Zt=0;ie.clear();for(var _t=ft.start;_t<=ft.end;_t++){var Kt=mt[_t];if(Ye=Ie[Ie.length-1],ie.set(Kt,(ie.get(Kt)||0)+1),Kt&u&&ie.set(u,(ie.get(u)||0)+1),Kt&Oe)if(Kt&(Fe|Se)){ct[_t]=Ye._level;var Yt=(Kt===Fe?ne:Q)(Ye._level);Yt<=Mt&&!Gt&&!He?Ie.push({_level:Yt,_override:0,_isolate:0}):Gt||He++}else if(Kt&(pe|se)){ct[_t]=Ye._level;var Rn=(Kt===pe?ne:Q)(Ye._level);Rn<=Mt&&!Gt&&!He?Ie.push({_level:Rn,_override:Kt&pe?H:j,_isolate:0}):Gt||He++}else if(Kt&o){Kt&it&&(Kt=xo(_t+1,!0)===1?Ne:qe),ct[_t]=Ye._level,Ye._override&&we(_t,Ye._override);var ii=(Kt===Ne?ne:Q)(Ye._level);ii<=Mt&&Gt===0&&He===0?(Zt++,Ie.push({_level:ii,_override:0,_isolate:1,_isolInitIndex:_t})):Gt++}else if(Kt&st){if(Gt>0)Gt--;else if(Zt>0){for(He=0;!Ie[Ie.length-1]._isolate;)Ie.pop();var Dr=Ie[Ie.length-1]._isolInitIndex;Dr!=null&&(Tt.set(Dr,_t),Tt.set(_t,Dr)),Ie.pop(),Zt--}Ye=Ie[Ie.length-1],ct[_t]=Ye._level,Ye._override&&we(_t,Ye._override)}else Kt&Re?(Gt===0&&(He>0?He--:!Ye._isolate&&Ie.length>1&&(Ie.pop(),Ye=Ie[Ie.length-1])),ct[_t]=Ye._level):Kt&le&&(ct[_t]=ft.level);else ct[_t]=Ye._level,Ye._override&&Kt!==$e&&we(_t,Ye._override)}for(var Si=[],xr=null,fr=ft.start;fr<=ft.end;fr++){var re=mt[fr];if(!(re&d)){var Te=ct[fr],Ge=re&o,ot=re===st;xr&&Te===xr._level?(xr._end=fr,xr._endsWithIsolInit=Ge):Si.push(xr={_start:fr,_end:fr,_level:Te,_startsWithPDI:ot,_endsWithIsolInit:Ge})}}for(var Ft=[],nn=0;nn<Si.length;nn++){var On=Si[nn];if(!On._startsWithPDI||On._startsWithPDI&&!Tt.has(On._start)){for(var De=[xr=On],gt=void 0;xr&&xr._endsWithIsolInit&&(gt=Tt.get(xr._end))!=null;)for(var $t=nn+1;$t<Si.length;$t++)if(Si[$t]._start===gt){De.push(xr=Si[$t]);break}for(var vt=[],Wt=0;Wt<De.length;Wt++)for(var Un=De[Wt],tr=Un._start;tr<=Un._end;tr++)vt.push(tr);for(var mr=ct[vt[0]],wr=ft.level,si=vt[0]-1;si>=0;si--)if(!(mt[si]&d)){wr=ct[si];break}var Nr=vt[vt.length-1],jr=ct[Nr],bs=ft.level;if(!(mt[Nr]&o)){for(var Ia=Nr+1;Ia<=ft.end;Ia++)if(!(mt[Ia]&d)){bs=ct[Ia];break}}Ft.push({_seqIndices:vt,_sosType:Math.max(wr,mr)%2?H:j,_eosType:Math.max(bs,jr)%2?H:j})}}for(var Eo=0;Eo<Ft.length;Eo++){var Wl=Ft[Eo],en=Wl._seqIndices,Ar=Wl._sosType,qa=Wl._eosType;if(ie.get(q))for(var Ra=0;Ra<en.length;Ra++){var Bs=en[Ra];if(mt[Bs]&q){for(var Ps=Ar,Li=Ra-1;Li>=0;Li--)if(!(mt[en[Li]]&d)){Ps=mt[en[Li]];break}we(Bs,Ps&(o|st)?be:Ps)}}if(ie.get(Z))for(var Ir=0;Ir<en.length;Ir++){var Cn=en[Ir];if(mt[Cn]&Z)for(var Mr=Ir-1;Mr>=-1;Mr--){var Ur=Mr===-1?Ar:mt[en[Mr]];if(Ur&l){Ur===oe&&we(Cn,te);break}}}if(ie.get(oe))for(var _r=0;_r<en.length;_r++){var Di=en[_r];mt[Di]&oe&&we(Di,H)}if(ie.get(ae)||ie.get(he))for(var Ts=1;Ts<en.length-1;Ts++){var hi=en[Ts];if(mt[hi]&(ae|he)){for(var fs=0,Qa=0,ka=Ts-1;ka>=0&&(fs=mt[en[ka]],!!(fs&d));ka--);for(var lc=Ts+1;lc<en.length&&(Qa=mt[en[lc]],!!(Qa&d));lc++);fs===Qa&&(mt[hi]===ae?fs===Z:fs&(Z|te))&&we(hi,fs)}}if(ie.get(Z))for(var uc=0;uc<en.length;uc++){var js=en[uc];if(mt[js]&Z){for(var Yo=uc-1;Yo>=0&&mt[en[Yo]]&(J|d);Yo--)we(en[Yo],Z);for(var Vl=uc+1;Vl<en.length&&mt[en[Vl]]&(J|d);Vl++)we(en[Vl],Z)}}if(ie.get(J)||ie.get(ae)||ie.get(he))for(var pu=0;pu<en.length;pu++){var ch=en[pu];if(mt[ch]&(J|ae|he)){we(ch,be);for(var Ko=pu-1;Ko>=0&&mt[en[Ko]]&d;Ko--)we(en[Ko],be);for(var gr=pu+1;gr<en.length&&mt[en[gr]]&d;gr++)we(en[gr],be)}}if(ie.get(Z))for(var Ei=0,Rc=Ar;Ei<en.length;Ei++){var hh=en[Ei],kc=mt[hh];kc&Z?Rc===j&&we(hh,j):kc&l&&(Rc=kc)}if(ie.get(u)){var Tl=H|Z|te,fu=Tl|j,Sl=[];{for(var El=[],yr=0;yr<en.length;yr++)if(mt[en[yr]]&u){var vr=yt[en[yr]],jl=void 0;if(B(vr)!==null)if(El.length<63)El.push({char:vr,seqIndex:yr});else break;else if((jl=z(vr))!==null)for(var Za=El.length-1;Za>=0;Za--){var el=El[Za].char;if(el===jl||el===z(G(vr))||B(G(el))===vr){Sl.push([El[Za].seqIndex,yr]),El.length=Za;break}}}Sl.sort(function(Ni,wi){return Ni[0]-wi[0]})}for(var mu=0;mu<Sl.length;mu++){for(var Ki=Sl[mu],ms=Ki[0],tl=Ki[1],Sd=!1,no=0,Bu=ms+1;Bu<tl;Bu++){var aa=en[Bu];if(mt[aa]&fu){Sd=!0;var gu=mt[aa]&Tl?H:j;if(gu===nl(aa)){no=gu;break}}}if(Sd&&!no){no=Ar;for(var ir=ms-1;ir>=0;ir--){var zn=en[ir];if(mt[zn]&fu){var Ss=mt[zn]&Tl?H:j;Ss!==nl(zn)?no=Ss:no=nl(zn);break}}}if(no){if(mt[en[ms]]=mt[en[tl]]=no,no!==nl(en[ms])){for(var ro=ms+1;ro<en.length;ro++)if(!(mt[en[ro]]&d)){b(yt[en[ro]])&q&&(mt[en[ro]]=no);break}}if(no!==nl(en[tl])){for(var Pu=tl+1;Pu<en.length;Pu++)if(!(mt[en[Pu]]&d)){b(yt[en[Pu]])&q&&(mt[en[Pu]]=no);break}}}}for(var _u=0;_u<en.length;_u++)if(mt[en[_u]]&u){for(var dh=_u,Oa=_u,la=Ar,Fu=_u-1;Fu>=0;Fu--)if(mt[en[Fu]]&d)dh=Fu;else{la=mt[en[Fu]]&Tl?H:j;break}for(var Tr=qa,Is=_u+1;Is<en.length;Is++)if(mt[en[Is]]&(u|d))Oa=Is;else{Tr=mt[en[Is]]&Tl?H:j;break}for(var yi=dh;yi<=Oa;yi++)mt[en[yi]]=la===Tr?la:nl(en[yi]);_u=Oa}}}for(var xi=ft.start;xi<=ft.end;xi++){var ua=ct[xi],Qr=mt[xi];if(ua&1?Qr&(j|Z|te)&&ct[xi]++:Qr&H?ct[xi]++:Qr&(te|Z)&&(ct[xi]+=2),Qr&d&&(ct[xi]=xi===0?ft.level:ct[xi-1]),xi===ft.end||b(yt[xi])&(ce|le))for(var yu=xi;yu>=0&&b(yt[yu])&p;yu--)ct[yu]=ft.level}}return{levels:ct,paragraphs:At};function xo(Ni,wi){for(var Hn=Ni;Hn<yt.length;Hn++){var $i=mt[Hn];if($i&(H|oe))return 1;if($i&(le|j)||wi&&$i===st)return 0;if($i&o){var Xr=vu(Hn);Hn=Xr===-1?yt.length:Xr}}return 0}function vu(Ni){for(var wi=1,Hn=Ni+1;Hn<yt.length;Hn++){var $i=mt[Hn];if($i&le)break;if($i&st){if(--wi===0)return Hn}else $i&o&&wi++}return-1}function nl(Ni){return ct[Ni]&1?H:j}}var dt="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Ue;function Ae(){if(!Ue){var yt=M(dt,!0),Ct=yt.map,Mt=yt.reverseMap;Mt.forEach(function(mt,xe){Ct.set(xe,mt)}),Ue=Ct}}function je(yt){return Ae(),Ue.get(yt)||null}function nt(yt,Ct,Mt,mt){var xe=yt.length;Mt=Math.max(0,Mt==null?0:+Mt),mt=Math.min(xe-1,mt==null?xe-1:+mt);for(var ie=new Map,we=Mt;we<=mt;we++)if(Ct[we]&1){var ct=je(yt[we]);ct!==null&&ie.set(we,ct)}return ie}function tt(yt,Ct,Mt,mt){var xe=yt.length;Mt=Math.max(0,Mt==null?0:+Mt),mt=Math.min(xe-1,mt==null?xe-1:+mt);var ie=[];return Ct.paragraphs.forEach(function(we){var ct=Math.max(Mt,we.start),Tt=Math.min(mt,we.end);if(ct<Tt){for(var At=Ct.levels.slice(ct,Tt+1),ft=Tt;ft>=ct&&b(yt[ft])&p;ft--)At[ft]=we.level;for(var Ke=we.level,Oe=1/0,Q=0;Q<At.length;Q++){var ne=At[Q];ne>Ke&&(Ke=ne),ne<Oe&&(Oe=ne|1)}for(var fe=Ke;fe>=Oe;fe--)for(var Ie=0;Ie<At.length;Ie++)if(At[Ie]>=fe){for(var Ye=Ie;Ie+1<At.length&&At[Ie+1]>=fe;)Ie++;Ie>Ye&&ie.push([Ye+Mt,Ie+Mt])}}}),ie}function Dt(yt,Ct,Mt,mt){var xe=Rt(yt,Ct,Mt,mt),ie=[].concat(yt);return xe.forEach(function(we,ct){ie[ct]=(Ct.levels[we]&1?je(yt[we]):null)||yt[we]}),ie.join("")}function Rt(yt,Ct,Mt,mt){for(var xe=tt(yt,Ct,Mt,mt),ie=[],we=0;we<yt.length;we++)ie[we]=we;return xe.forEach(function(ct){for(var Tt=ct[0],At=ct[1],ft=ie.slice(Tt,At+1),Ke=ft.length;Ke--;)ie[At-Ke]=ft[Ke]}),ie}return e.closingToOpeningBracket=z,e.getBidiCharType=b,e.getBidiCharTypeName=E,e.getCanonicalBracket=G,e.getEmbeddingLevels=pt,e.getMirroredCharacter=je,e.getMirroredCharactersMap=nt,e.getReorderSegments=tt,e.getReorderedIndices=Rt,e.getReorderedString=Dt,e.openingToClosingBracket=B,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const NJ=/\bvoid\s+main\s*\(\s*\)\s*{/g;function _N(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,s){let o=ds[s];return o?_N(o):i}return n.replace(e,t)}const Kd=[];for(let n=0;n<256;n++)Kd[n]=(n<16?"0":"")+n.toString(16);function Ewe(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Kd[n&255]+Kd[n>>8&255]+Kd[n>>16&255]+Kd[n>>24&255]+"-"+Kd[e&255]+Kd[e>>8&255]+"-"+Kd[e>>16&15|64]+Kd[e>>24&255]+"-"+Kd[t&63|128]+Kd[t>>8&255]+"-"+Kd[t>>16&255]+Kd[t>>24&255]+Kd[i&255]+Kd[i>>8&255]+Kd[i>>16&255]+Kd[i>>24&255]).toUpperCase()}const Ob=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let s in i)i.hasOwnProperty(s)&&(n[s]=i[s])}return n},xwe=Date.now(),YH=new WeakMap,KH=new Map;let wwe=1e10;function yN(n,e){const t=Awe(e);let i=YH.get(n);if(i||YH.set(n,i=Object.create(null)),i[t])return new i[t];const s=`_onBeforeCompile${t}`,o=function(p){n.onBeforeCompile.call(this,p);const _=this.customProgramCacheKey()+"|"+p.vertexShader+"|"+p.fragmentShader;let v=KH[_];if(!v){const b=$we(p,e,t);v=KH[_]=b}p.vertexShader=v.vertexShader,p.fragmentShader=v.fragmentShader,Ob(p.uniforms,this.uniforms),e.timeUniform&&(p.uniforms[e.timeUniform]={get value(){return Date.now()-xwe}}),this[s]&&this[s](p)},l=function(){return u(e.chained?n:n.clone())},u=function(p){const _=Object.create(p,d);return Object.defineProperty(_,"baseMaterial",{value:n}),Object.defineProperty(_,"id",{value:wwe++}),_.uuid=Ewe(),_.uniforms=Ob({},p.uniforms,e.uniforms),_.defines=Ob({},p.defines,e.defines),_.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",_.extensions=Ob({},p.extensions,e.extensions),_._listeners=void 0,_},d={constructor:{value:l},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return o},set(p){this[s]=p}},copy:{writable:!0,configurable:!0,value:function(p){return n.copy.call(this,p),!n.isShaderMaterial&&!n.isDerivedMaterial&&(Ob(this.extensions,p.extensions),Ob(this.defines,p.defines),Ob(this.uniforms,z$.clone(p.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const p=new n.constructor;return u(p).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let p=this._depthMaterial;return p||(p=this._depthMaterial=yN(n.isDerivedMaterial?n.getDepthMaterial():new H$({depthPacking:lE}),e),p.defines.IS_DEPTH_MATERIAL="",p.uniforms=this.uniforms),p}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let p=this._distanceMaterial;return p||(p=this._distanceMaterial=yN(n.isDerivedMaterial?n.getDistanceMaterial():new KR,e),p.defines.IS_DISTANCE_MATERIAL="",p.uniforms=this.uniforms),p}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:p,_distanceMaterial:_}=this;p&&p.dispose(),_&&_.dispose(),n.dispose.call(this)}}};return i[t]=l,new l}function $we({vertexShader:n,fragmentShader:e},t,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:l,vertexTransform:u,fragmentDefs:d,fragmentMainIntro:p,fragmentMainOutro:_,fragmentColorTransform:v,customRewriter:b,timeUniform:E}=t;if(s=s||"",o=o||"",l=l||"",d=d||"",p=p||"",_=_||"",(u||b)&&(n=_N(n)),(v||b)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=_N(e)),b){let C=b({vertexShader:n,fragmentShader:e});n=C.vertexShader,e=C.fragmentShader}if(v){let C=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,M=>(C.push(M),"")),_=`${v}
${C.join(`
`)}
${_}`}if(E){const C=`
uniform float ${E};
`;s=C+s,d=C+d}return u&&(n=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${n}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${u}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,n=n.replace(/\b(position|normal|uv)\b/g,(C,M,I,L)=>/\battribute\s+vec[23]\s+$/.test(L.substr(0,I))?M:`troika_${M}_${i}`)),n=JH(n,i,s,o,l),e=JH(e,i,d,p,_),{vertexShader:n,fragmentShader:e}}function JH(n,e,t,i,s){return(i||s||t)&&(n=n.replace(NJ,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${s}
}`),n}function Cwe(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Mwe=0;const qH=new Map;function Awe(n){const e=JSON.stringify(n,Cwe);let t=qH.get(e);return t==null&&qH.set(e,t=++Mwe),t}function Iwe(n,e,t){const{defaultFontURL:i}=t,s=Object.create(null),o=1/0,l=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,u="[^\\S\\u00A0]",d=new RegExp(`${u}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function p(O,P){function B(){const z=G=>{console.error(`Failure loading font ${O}${O===i?"":"; trying fallback"}`,G),O!==i&&(O=i,B())};try{const G=new XMLHttpRequest;G.open("get",O,!0),G.responseType="arraybuffer",G.onload=function(){if(G.status>=400)z(new Error(G.statusText));else if(G.status>0)try{const j=n(G.response);P(j)}catch(j){z(j)}},G.onerror=z,G.send()}catch(G){z(G)}}B()}function _(O,P){O||(O=i);let B=s[O];B?B.pending?B.pending.push(P):P(B):(s[O]={pending:[P]},p(O,z=>{let G=s[O].pending;s[O]=z,G.forEach(j=>j(z))}))}function v({text:O="",font:P=i,sdfGlyphSize:B=64,fontSize:z=1,letterSpacing:G=0,lineHeight:j="normal",maxWidth:H=o,direction:Z,textAlign:ae="left",textIndent:J=0,whiteSpace:te="normal",overflowWrap:he="normal",anchorX:le=0,anchorY:ce=0,includeCaretPositions:be=!1,chunkedBoundsSize:$e=8192,colorRanges:q=null},oe,se=!1){const pe=M(),Se={fontLoad:0,typesetting:0};O.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),O=O.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),z=+z,G=+G,H=+H,j=j||"normal",J=+J,_(P,Fe=>{const Re=isFinite(H);let qe=null,Ne=null,it=null,st=null,pt=null,dt=null,Ue=null,Ae=0,je=0,nt=te!=="nowrap";const{ascender:tt,descender:Dt,unitsPerEm:Rt,lineGap:yt,capHeight:Ct,xHeight:Mt}=Fe;Se.fontLoad=M()-pe;const mt=M(),xe=z/Rt;j==="normal"&&(j=(tt-Dt+yt)/Rt),j=j*z;const ie=(j-(tt-Dt)*xe)/2,we=-(tt*xe+ie),ct=Math.min(j,(tt-Dt)*xe),Tt=(tt+Dt)/2*xe-ct/2;let At=J,ft=new I;const Ke=[ft];Fe.forEachGlyph(O,z,G,(ne,fe,Ie)=>{const Ye=O.charAt(Ie),Gt=ne.advanceWidth*xe,He=ft.count;let Zt;if("isEmpty"in ne||(ne.isWhitespace=!!Ye&&new RegExp(u).test(Ye),ne.canBreakAfter=!!Ye&&d.test(Ye),ne.isEmpty=ne.xMin===ne.xMax||ne.yMin===ne.yMax||l.test(Ye)),!ne.isWhitespace&&!ne.isEmpty&&je++,nt&&Re&&!ne.isWhitespace&&fe+Gt+At>H&&He){if(ft.glyphAt(He-1).glyphObj.canBreakAfter)Zt=new I,At=-fe;else for(let Kt=He;Kt--;)if(Kt===0&&he==="break-word"){Zt=new I,At=-fe;break}else if(ft.glyphAt(Kt).glyphObj.canBreakAfter){Zt=ft.splitAt(Kt+1);const Yt=Zt.glyphAt(0).x;At-=Yt;for(let Rn=Zt.count;Rn--;)Zt.glyphAt(Rn).x-=Yt;break}Zt&&(ft.isSoftWrapped=!0,ft=Zt,Ke.push(ft),Ae=H)}let _t=ft.glyphAt(ft.count);_t.glyphObj=ne,_t.x=fe+At,_t.width=Gt,_t.charIndex=Ie,Ye===`
`&&(ft=new I,Ke.push(ft),At=-(fe+Gt+G*z)+J)}),Ke.forEach(ne=>{for(let fe=ne.count;fe--;){let{glyphObj:Ie,x:Ye,width:Gt}=ne.glyphAt(fe);if(!Ie.isWhitespace){ne.width=Ye+Gt,ne.width>Ae&&(Ae=ne.width);return}}});let Oe=0,Q=0;if(le&&(typeof le=="number"?Oe=-le:typeof le=="string"&&(Oe=-Ae*(le==="left"?0:le==="center"?.5:le==="right"?1:E(le)))),ce){if(typeof ce=="number")Q=-ce;else if(typeof ce=="string"){let ne=Ke.length*j;Q=ce==="top"?0:ce==="top-baseline"?-we:ce==="top-cap"?-we-Ct*xe:ce==="top-ex"?-we-Mt*xe:ce==="middle"?ne/2:ce==="bottom"?ne:ce==="bottom-baseline"?ne-ie+Dt*xe:E(ce)*ne}}if(!se){const ne=e.getEmbeddingLevels(O,Z);qe=new Uint16Array(je),Ne=new Float32Array(je*2),it={},dt=[o,o,-o,-o],Ue=[];let fe=we;be&&(pt=new Float32Array(O.length*3)),q&&(st=new Uint8Array(je*3));let Ie=0,Ye=-1,Gt=-1,He,Zt;if(Ke.forEach((_t,Kt)=>{let{count:Yt,width:Rn}=_t;if(Yt>0){let ii=0;for(let Te=Yt;Te--&&_t.glyphAt(Te).glyphObj.isWhitespace;)ii++;let Dr=0,Si=0;if(ae==="center")Dr=(Ae-Rn)/2;else if(ae==="right")Dr=Ae-Rn;else if(ae==="justify"&&_t.isSoftWrapped){let Te=0;for(let Ge=Yt-ii;Ge--;)_t.glyphAt(Ge).glyphObj.isWhitespace&&Te++;Si=(Ae-Rn)/Te}if(Si||Dr){let Te=0;for(let Ge=0;Ge<Yt;Ge++){let ot=_t.glyphAt(Ge);const Ft=ot.glyphObj;ot.x+=Dr+Te,Si!==0&&Ft.isWhitespace&&Ge<Yt-ii&&(Te+=Si,ot.width+=Si)}}const xr=e.getReorderSegments(O,ne,_t.glyphAt(0).charIndex,_t.glyphAt(_t.count-1).charIndex);for(let Te=0;Te<xr.length;Te++){const[Ge,ot]=xr[Te];let Ft=1/0,nn=-1/0;for(let On=0;On<Yt;On++)if(_t.glyphAt(On).charIndex>=Ge){let De=On,gt=On;for(;gt<Yt;gt++){let $t=_t.glyphAt(gt);if($t.charIndex>ot)break;gt<Yt-ii&&(Ft=Math.min(Ft,$t.x),nn=Math.max(nn,$t.x+$t.width))}for(let $t=De;$t<gt;$t++){const vt=_t.glyphAt($t);vt.x=nn-(vt.x+vt.width-Ft)}break}}let fr;const re=Te=>fr=Te;for(let Te=0;Te<Yt;Te++){let Ge=_t.glyphAt(Te);fr=Ge.glyphObj;const ot=fr.index,Ft=ne.levels[Ge.charIndex]&1;if(Ft){const nn=e.getMirroredCharacter(O[Ge.charIndex]);nn&&Fe.forEachGlyph(nn,0,0,re)}if(be){const{charIndex:nn}=Ge,On=Ge.x+Oe,De=Ge.x+Ge.width+Oe;pt[nn*3]=Ft?De:On,pt[nn*3+1]=Ft?On:De,pt[nn*3+2]=fe+Tt+Q;const gt=nn-Ye;gt>1&&C(pt,Ye,gt),Ye=nn}if(q){const{charIndex:nn}=Ge;for(;nn>Gt;)Gt++,q.hasOwnProperty(Gt)&&(Zt=q[Gt])}if(!fr.isWhitespace&&!fr.isEmpty){const nn=Ie++;it[ot]||(it[ot]={path:fr.path,pathBounds:[fr.xMin,fr.yMin,fr.xMax,fr.yMax]});const On=Ge.x+Oe,De=fe+Q;Ne[nn*2]=On,Ne[nn*2+1]=De;const gt=On+fr.xMin*xe,$t=De+fr.yMin*xe,vt=On+fr.xMax*xe,Wt=De+fr.yMax*xe;gt<dt[0]&&(dt[0]=gt),$t<dt[1]&&(dt[1]=$t),vt>dt[2]&&(dt[2]=vt),Wt>dt[3]&&(dt[3]=Wt),nn%$e===0&&(He={start:nn,end:nn,rect:[o,o,-o,-o]},Ue.push(He)),He.end++;const Un=He.rect;if(gt<Un[0]&&(Un[0]=gt),$t<Un[1]&&(Un[1]=$t),vt>Un[2]&&(Un[2]=vt),Wt>Un[3]&&(Un[3]=Wt),qe[nn]=ot,q){const tr=nn*3;st[tr]=Zt>>16&255,st[tr+1]=Zt>>8&255,st[tr+2]=Zt&255}}}}fe-=j}),pt){const _t=O.length-Ye;_t>1&&C(pt,Ye,_t)}}Se.typesetting=M()-mt,oe({glyphIds:qe,glyphPositions:Ne,glyphData:it,caretPositions:pt,caretHeight:ct,glyphColors:st,chunkedBounds:Ue,fontSize:z,unitsPerEm:Rt,ascender:tt*xe,descender:Dt*xe,capHeight:Ct*xe,xHeight:Mt*xe,lineHeight:j,topBaseline:we,blockBounds:[Oe,Q-Ke.length*j,Oe+Ae,Q],visibleBounds:dt,timings:Se})})}function b(O,P){v(O,B=>{const[z,G,j,H]=B.blockBounds;P({width:j-z,height:H-G})},{metricsOnly:!0})}function E(O){let P=O.match(/^([\d.]+)%$/),B=P?parseFloat(P[1]):NaN;return isNaN(B)?0:B/100}function C(O,P,B){const z=O[P*3],G=O[P*3+1],j=O[P*3+2],H=(G-z)/B;for(let Z=0;Z<B;Z++){const ae=(P+Z)*3;O[ae]=z+H*Z,O[ae+1]=z+H*(Z+1),O[ae+2]=j}}function M(){return(self.performance||Date).now()}function I(){this.data=[]}const L=["glyphObj","x","width","charIndex"];return I.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/L.length)},glyphAt(O){let P=I.flyweight;return P.data=this.data,P.index=O,P},splitAt(O){let P=new I;return P.data=this.data.splice(O*L.length),P}},I.flyweight=L.reduce((O,P,B,z)=>(Object.defineProperty(O,P,{get(){return this.data[this.index*L.length+B]},set(G){this.data[this.index*L.length+B]=G}}),O),{data:null,index:0}),{typeset:v,measure:b,loadFont:_}}const y1=()=>(self.performance||Date).now(),lk=DJ();let QH;function Rwe(n,e,t,i,s,o,l,u,d,p,_=!0){return _?Owe(n,e,t,i,s,o,l,u,d,p).then(null,v=>(QH||(console.warn("WebGL SDF generation failed, falling back to JS",v),QH=!0),eG(n,e,t,i,s,o,l,u,d,p))):eG(n,e,t,i,s,o,l,u,d,p)}const $A=[],kwe=5;let vN=0;function BJ(){const n=y1();for(;$A.length&&y1()-n<kwe;)$A.shift()();vN=$A.length?setTimeout(BJ,0):0}const Owe=(...n)=>new Promise((e,t)=>{$A.push(()=>{const i=y1();try{lk.webgl.generateIntoCanvas(...n),e({timing:y1()-i})}catch(s){t(s)}}),vN||(vN=setTimeout(BJ,0))}),Lwe=4,Dwe=2e3,ZH={};let Nwe=0;function eG(n,e,t,i,s,o,l,u,d,p){const _="TroikaTextSDFGenerator_JS_"+Nwe++%Lwe;let v=ZH[_];return v||(v=ZH[_]={workerModule:X$({name:_,workerId:_,dependencies:[DJ,y1],init(b,E){const C=b().javascript.generate;return function(...M){const I=E();return{textureData:C(...M),timing:E()-I}}},getTransferables(b){return[b.textureData.buffer]}}),requests:0,idleTimer:null}),v.requests++,clearTimeout(v.idleTimer),v.workerModule(n,e,t,i,s,o).then(({textureData:b,timing:E})=>{const C=y1(),M=new Uint8Array(b.length*4);for(let I=0;I<b.length;I++)M[I*4+p]=b[I];return lk.webglUtils.renderImageData(l,M,u,d,n,e,1<<3-p),E+=y1()-C,--v.requests===0&&(v.idleTimer=setTimeout(()=>{bwe(_)},Dwe)),{timing:E}})}function Bwe(n){n._warm||(lk.webgl.isSupported(n),n._warm=!0)}const Pwe=lk.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Fwe(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(s){var o=e._bin,l=new Uint8Array(s);if(o.readASCII(l,0,4)=="ttcf"){var u=4;o.readUshort(l,u),u+=2,o.readUshort(l,u),u+=2;var d=o.readUint(l,u);u+=4;for(var p=[],_=0;_<d;_++){var v=o.readUint(l,u);u+=4,p.push(e._readFont(l,v))}return p}return[e._readFont(l,0)]},_readFont:function(s,o){var l=e._bin,u=o;l.readFixed(s,o),o+=4;var d=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2;for(var p=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],_={_data:s,_offset:u},v={},b=0;b<d;b++){var E=l.readASCII(s,o,4);o+=4,l.readUint(s,o),o+=4;var C=l.readUint(s,o);o+=4;var M=l.readUint(s,o);o+=4,v[E]={offset:C,length:M}}for(b=0;b<p.length;b++){var I=p[b];v[I]&&(_[I.trim()]=e[I.trim()].parse(s,v[I].offset,v[I].length,_))}return _},_tabOffset:function(s,o,l){for(var u=e._bin,d=u.readUshort(s,l+4),p=l+12,_=0;_<d;_++){var v=u.readASCII(s,p,4);p+=4,u.readUint(s,p),p+=4;var b=u.readUint(s,p);if(p+=4,u.readUint(s,p),p+=4,v==o)return b}return 0}};e._bin={readFixed:function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<8|s[o+3])/65540},readF2dot14:function(s,o){return e._bin.readShort(s,o)/16384},readInt:function(s,o){return e._bin._view(s).getInt32(o)},readInt8:function(s,o){return e._bin._view(s).getInt8(o)},readShort:function(s,o){return e._bin._view(s).getInt16(o)},readUshort:function(s,o){return e._bin._view(s).getUint16(o)},readUshorts:function(s,o,l){for(var u=[],d=0;d<l;d++)u.push(e._bin.readUshort(s,o+2*d));return u},readUint:function(s,o){return e._bin._view(s).getUint32(o)},readUint64:function(s,o){return 4294967296*e._bin.readUint(s,o)+e._bin.readUint(s,o+4)},readASCII:function(s,o,l){for(var u="",d=0;d<l;d++)u+=String.fromCharCode(s[o+d]);return u},readUnicode:function(s,o,l){for(var u="",d=0;d<l;d++){var p=s[o++]<<8|s[o++];u+=String.fromCharCode(p)}return u},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,o,l){var u=e._bin._tdec;return u&&o==0&&l==s.length?u.decode(s):e._bin.readASCII(s,o,l)},readBytes:function(s,o,l){for(var u=[],d=0;d<l;d++)u.push(s[o+d]);return u},readASCIIArray:function(s,o,l){for(var u=[],d=0;d<l;d++)u.push(String.fromCharCode(s[o+d]));return u},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},e._lctf={},e._lctf.parse=function(s,o,l,u,d){var p=e._bin,_={},v=o;p.readFixed(s,o),o+=4;var b=p.readUshort(s,o);o+=2;var E=p.readUshort(s,o);o+=2;var C=p.readUshort(s,o);return o+=2,_.scriptList=e._lctf.readScriptList(s,v+b),_.featureList=e._lctf.readFeatureList(s,v+E),_.lookupList=e._lctf.readLookupList(s,v+C,d),_},e._lctf.readLookupList=function(s,o,l){var u=e._bin,d=o,p=[],_=u.readUshort(s,o);o+=2;for(var v=0;v<_;v++){var b=u.readUshort(s,o);o+=2;var E=e._lctf.readLookupTable(s,d+b,l);p.push(E)}return p},e._lctf.readLookupTable=function(s,o,l){var u=e._bin,d=o,p={tabs:[]};p.ltype=u.readUshort(s,o),o+=2,p.flag=u.readUshort(s,o),o+=2;var _=u.readUshort(s,o);o+=2;for(var v=p.ltype,b=0;b<_;b++){var E=u.readUshort(s,o);o+=2;var C=l(s,v,d+E,p);p.tabs.push(C)}return p},e._lctf.numOfOnes=function(s){for(var o=0,l=0;l<32;l++)s>>>l&1&&o++;return o},e._lctf.readClassDef=function(s,o){var l=e._bin,u=[],d=l.readUshort(s,o);if(o+=2,d==1){var p=l.readUshort(s,o);o+=2;var _=l.readUshort(s,o);o+=2;for(var v=0;v<_;v++)u.push(p+v),u.push(p+v),u.push(l.readUshort(s,o)),o+=2}if(d==2){var b=l.readUshort(s,o);for(o+=2,v=0;v<b;v++)u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2}return u},e._lctf.getInterval=function(s,o){for(var l=0;l<s.length;l+=3){var u=s[l],d=s[l+1];if(s[l+2],u<=o&&o<=d)return l}return-1},e._lctf.readCoverage=function(s,o){var l=e._bin,u={};u.fmt=l.readUshort(s,o),o+=2;var d=l.readUshort(s,o);return o+=2,u.fmt==1&&(u.tab=l.readUshorts(s,o,d)),u.fmt==2&&(u.tab=l.readUshorts(s,o,3*d)),u},e._lctf.coverageIndex=function(s,o){var l=s.tab;if(s.fmt==1)return l.indexOf(o);if(s.fmt==2){var u=e._lctf.getInterval(l,o);if(u!=-1)return l[u+2]+(o-l[u])}return-1},e._lctf.readFeatureList=function(s,o){var l=e._bin,u=o,d=[],p=l.readUshort(s,o);o+=2;for(var _=0;_<p;_++){var v=l.readASCII(s,o,4);o+=4;var b=l.readUshort(s,o);o+=2;var E=e._lctf.readFeatureTable(s,u+b);E.tag=v.trim(),d.push(E)}return d},e._lctf.readFeatureTable=function(s,o){var l=e._bin,u=o,d={},p=l.readUshort(s,o);o+=2,p>0&&(d.featureParams=u+p);var _=l.readUshort(s,o);o+=2,d.tab=[];for(var v=0;v<_;v++)d.tab.push(l.readUshort(s,o+2*v));return d},e._lctf.readScriptList=function(s,o){var l=e._bin,u=o,d={},p=l.readUshort(s,o);o+=2;for(var _=0;_<p;_++){var v=l.readASCII(s,o,4);o+=4;var b=l.readUshort(s,o);o+=2,d[v.trim()]=e._lctf.readScriptTable(s,u+b)}return d},e._lctf.readScriptTable=function(s,o){var l=e._bin,u=o,d={},p=l.readUshort(s,o);o+=2,d.default=e._lctf.readLangSysTable(s,u+p);var _=l.readUshort(s,o);o+=2;for(var v=0;v<_;v++){var b=l.readASCII(s,o,4);o+=4;var E=l.readUshort(s,o);o+=2,d[b.trim()]=e._lctf.readLangSysTable(s,u+E)}return d},e._lctf.readLangSysTable=function(s,o){var l=e._bin,u={};l.readUshort(s,o),o+=2,u.reqFeature=l.readUshort(s,o),o+=2;var d=l.readUshort(s,o);return o+=2,u.features=l.readUshorts(s,o,d),u},e.CFF={},e.CFF.parse=function(s,o,l){var u=e._bin;(s=new Uint8Array(s.buffer,o,l))[o=0],s[++o],s[++o],s[++o],o++;var d=[];o=e.CFF.readIndex(s,o,d);for(var p=[],_=0;_<d.length-1;_++)p.push(u.readASCII(s,o+d[_],d[_+1]-d[_]));o+=d[d.length-1];var v=[];o=e.CFF.readIndex(s,o,v);var b=[];for(_=0;_<v.length-1;_++)b.push(e.CFF.readDict(s,o+v[_],o+v[_+1]));o+=v[v.length-1];var E=b[0],C=[];o=e.CFF.readIndex(s,o,C);var M=[];for(_=0;_<C.length-1;_++)M.push(u.readASCII(s,o+C[_],C[_+1]-C[_]));if(o+=C[C.length-1],e.CFF.readSubrs(s,o,E),E.CharStrings){o=E.CharStrings,C=[],o=e.CFF.readIndex(s,o,C);var I=[];for(_=0;_<C.length-1;_++)I.push(u.readBytes(s,o+C[_],C[_+1]-C[_]));E.CharStrings=I}if(E.ROS){o=E.FDArray;var L=[];for(o=e.CFF.readIndex(s,o,L),E.FDArray=[],_=0;_<L.length-1;_++){var O=e.CFF.readDict(s,o+L[_],o+L[_+1]);e.CFF._readFDict(s,O,M),E.FDArray.push(O)}o+=L[L.length-1],o=E.FDSelect,E.FDSelect=[];var P=s[o];if(o++,P!=3)throw P;var B=u.readUshort(s,o);for(o+=2,_=0;_<B+1;_++)E.FDSelect.push(u.readUshort(s,o),s[o+2]),o+=3}return E.Encoding&&(E.Encoding=e.CFF.readEncoding(s,E.Encoding,E.CharStrings.length)),E.charset&&(E.charset=e.CFF.readCharset(s,E.charset,E.CharStrings.length)),e.CFF._readFDict(s,E,M),E},e.CFF._readFDict=function(s,o,l){var u;for(var d in o.Private&&(u=o.Private[1],o.Private=e.CFF.readDict(s,u,u+o.Private[0]),o.Private.Subrs&&e.CFF.readSubrs(s,u+o.Private.Subrs,o.Private)),o)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(d)!=-1&&(o[d]=l[o[d]-426+35])},e.CFF.readSubrs=function(s,o,l){var u=e._bin,d=[];o=e.CFF.readIndex(s,o,d);var p,_=d.length;p=_<1240?107:_<33900?1131:32768,l.Bias=p,l.Subrs=[];for(var v=0;v<d.length-1;v++)l.Subrs.push(u.readBytes(s,o+d[v],d[v+1]-d[v]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(s,o){for(var l=0;l<s.charset.length;l++)if(s.charset[l]==o)return l;return-1},e.CFF.glyphBySE=function(s,o){return o<0||o>255?-1:e.CFF.glyphByUnicode(s,e.CFF.tableSE[o])},e.CFF.readEncoding=function(s,o,l){e._bin;var u=[".notdef"],d=s[o];if(o++,d!=0)throw"error: unknown encoding format: "+d;var p=s[o];o++;for(var _=0;_<p;_++)u.push(s[o+_]);return u},e.CFF.readCharset=function(s,o,l){var u=e._bin,d=[".notdef"],p=s[o];if(o++,p==0)for(var _=0;_<l;_++){var v=u.readUshort(s,o);o+=2,d.push(v)}else{if(p!=1&&p!=2)throw"error: format: "+p;for(;d.length<l;){v=u.readUshort(s,o),o+=2;var b=0;for(p==1?(b=s[o],o++):(b=u.readUshort(s,o),o+=2),_=0;_<=b;_++)d.push(v),v++}}return d},e.CFF.readIndex=function(s,o,l){var u=e._bin,d=u.readUshort(s,o)+1,p=s[o+=2];if(o++,p==1)for(var _=0;_<d;_++)l.push(s[o+_]);else if(p==2)for(_=0;_<d;_++)l.push(u.readUshort(s,o+2*_));else if(p==3)for(_=0;_<d;_++)l.push(16777215&u.readUint(s,o+3*_-1));else if(d!=1)throw"unsupported offset size: "+p+", count: "+d;return(o+=d*p)-1},e.CFF.getCharString=function(s,o,l){var u=e._bin,d=s[o],p=s[o+1];s[o+2],s[o+3],s[o+4];var _=1,v=null,b=null;d<=20&&(v=d,_=1),d==12&&(v=100*d+p,_=2),21<=d&&d<=27&&(v=d,_=1),d==28&&(b=u.readShort(s,o+1),_=3),29<=d&&d<=31&&(v=d,_=1),32<=d&&d<=246&&(b=d-139,_=1),247<=d&&d<=250&&(b=256*(d-247)+p+108,_=2),251<=d&&d<=254&&(b=256*-(d-251)-p-108,_=2),d==255&&(b=u.readInt(s,o+1)/65535,_=5),l.val=b??"o"+v,l.size=_},e.CFF.readCharString=function(s,o,l){for(var u=o+l,d=e._bin,p=[];o<u;){var _=s[o],v=s[o+1];s[o+2],s[o+3],s[o+4];var b=1,E=null,C=null;_<=20&&(E=_,b=1),_==12&&(E=100*_+v,b=2),_!=19&&_!=20||(E=_,b=2),21<=_&&_<=27&&(E=_,b=1),_==28&&(C=d.readShort(s,o+1),b=3),29<=_&&_<=31&&(E=_,b=1),32<=_&&_<=246&&(C=_-139,b=1),247<=_&&_<=250&&(C=256*(_-247)+v+108,b=2),251<=_&&_<=254&&(C=256*-(_-251)-v-108,b=2),_==255&&(C=d.readInt(s,o+1)/65535,b=5),p.push(C??"o"+E),o+=b}return p},e.CFF.readDict=function(s,o,l){for(var u=e._bin,d={},p=[];o<l;){var _=s[o],v=s[o+1];s[o+2],s[o+3],s[o+4];var b=1,E=null,C=null;if(_==28&&(C=u.readShort(s,o+1),b=3),_==29&&(C=u.readInt(s,o+1),b=5),32<=_&&_<=246&&(C=_-139,b=1),247<=_&&_<=250&&(C=256*(_-247)+v+108,b=2),251<=_&&_<=254&&(C=256*-(_-251)-v-108,b=2),_==255)throw C=u.readInt(s,o+1)/65535,b=5,"unknown number";if(_==30){var M=[];for(b=1;;){var I=s[o+b];b++;var L=I>>4,O=15&I;if(L!=15&&M.push(L),O!=15&&M.push(O),O==15)break}for(var P="",B=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],z=0;z<M.length;z++)P+=B[M[z]];C=parseFloat(P)}_<=21&&(E=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][_],b=1,_==12&&(E=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][v],b=2)),E!=null?(d[E]=p.length==1?p[0]:p,p=[]):p.push(C),o+=b}return d},e.cmap={},e.cmap.parse=function(s,o,l){s=new Uint8Array(s.buffer,o,l),o=0;var u=e._bin,d={};u.readUshort(s,o),o+=2;var p=u.readUshort(s,o);o+=2;var _=[];d.tables=[];for(var v=0;v<p;v++){var b=u.readUshort(s,o);o+=2;var E=u.readUshort(s,o);o+=2;var C=u.readUint(s,o);o+=4;var M="p"+b+"e"+E,I=_.indexOf(C);if(I==-1){var L;I=d.tables.length,_.push(C);var O=u.readUshort(s,C);O==0?L=e.cmap.parse0(s,C):O==4?L=e.cmap.parse4(s,C):O==6?L=e.cmap.parse6(s,C):O==12?L=e.cmap.parse12(s,C):console.debug("unknown format: "+O,b,E,C),d.tables.push(L)}if(d[M]!=null)throw"multiple tables for one platform+encoding";d[M]=I}return d},e.cmap.parse0=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2;var d=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,u.map=[];for(var p=0;p<d-6;p++)u.map.push(s[o+p]);return u},e.cmap.parse4=function(s,o){var l=e._bin,u=o,d={};d.format=l.readUshort(s,o),o+=2;var p=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2;var _=l.readUshort(s,o);o+=2;var v=_/2;d.searchRange=l.readUshort(s,o),o+=2,d.entrySelector=l.readUshort(s,o),o+=2,d.rangeShift=l.readUshort(s,o),o+=2,d.endCount=l.readUshorts(s,o,v),o+=2*v,o+=2,d.startCount=l.readUshorts(s,o,v),o+=2*v,d.idDelta=[];for(var b=0;b<v;b++)d.idDelta.push(l.readShort(s,o)),o+=2;for(d.idRangeOffset=l.readUshorts(s,o,v),o+=2*v,d.glyphIdArray=[];o<u+p;)d.glyphIdArray.push(l.readUshort(s,o)),o+=2;return d},e.cmap.parse6=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,u.firstCode=l.readUshort(s,o),o+=2;var d=l.readUshort(s,o);o+=2,u.glyphIdArray=[];for(var p=0;p<d;p++)u.glyphIdArray.push(l.readUshort(s,o)),o+=2;return u},e.cmap.parse12=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,o+=2,l.readUint(s,o),o+=4,l.readUint(s,o),o+=4;var d=l.readUint(s,o);o+=4,u.groups=[];for(var p=0;p<d;p++){var _=o+12*p,v=l.readUint(s,_+0),b=l.readUint(s,_+4),E=l.readUint(s,_+8);u.groups.push([v,b,E])}return u},e.glyf={},e.glyf.parse=function(s,o,l,u){for(var d=[],p=0;p<u.maxp.numGlyphs;p++)d.push(null);return d},e.glyf._parseGlyf=function(s,o){var l=e._bin,u=s._data,d=e._tabOffset(u,"glyf",s._offset)+s.loca[o];if(s.loca[o]==s.loca[o+1])return null;var p={};if(p.noc=l.readShort(u,d),d+=2,p.xMin=l.readShort(u,d),d+=2,p.yMin=l.readShort(u,d),d+=2,p.xMax=l.readShort(u,d),d+=2,p.yMax=l.readShort(u,d),d+=2,p.xMin>=p.xMax||p.yMin>=p.yMax)return null;if(p.noc>0){p.endPts=[];for(var _=0;_<p.noc;_++)p.endPts.push(l.readUshort(u,d)),d+=2;var v=l.readUshort(u,d);if(d+=2,u.length-d<v)return null;p.instructions=l.readBytes(u,d,v),d+=v;var b=p.endPts[p.noc-1]+1;for(p.flags=[],_=0;_<b;_++){var E=u[d];if(d++,p.flags.push(E),(8&E)!=0){var C=u[d];d++;for(var M=0;M<C;M++)p.flags.push(E),_++}}for(p.xs=[],_=0;_<b;_++){var I=(2&p.flags[_])!=0,L=(16&p.flags[_])!=0;I?(p.xs.push(L?u[d]:-u[d]),d++):L?p.xs.push(0):(p.xs.push(l.readShort(u,d)),d+=2)}for(p.ys=[],_=0;_<b;_++)I=(4&p.flags[_])!=0,L=(32&p.flags[_])!=0,I?(p.ys.push(L?u[d]:-u[d]),d++):L?p.ys.push(0):(p.ys.push(l.readShort(u,d)),d+=2);var O=0,P=0;for(_=0;_<b;_++)O+=p.xs[_],P+=p.ys[_],p.xs[_]=O,p.ys[_]=P}else{var B;p.parts=[];do{B=l.readUshort(u,d),d+=2;var z={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(p.parts.push(z),z.glyphIndex=l.readUshort(u,d),d+=2,1&B){var G=l.readShort(u,d);d+=2;var j=l.readShort(u,d);d+=2}else G=l.readInt8(u,d),d++,j=l.readInt8(u,d),d++;2&B?(z.m.tx=G,z.m.ty=j):(z.p1=G,z.p2=j),8&B?(z.m.a=z.m.d=l.readF2dot14(u,d),d+=2):64&B?(z.m.a=l.readF2dot14(u,d),d+=2,z.m.d=l.readF2dot14(u,d),d+=2):128&B&&(z.m.a=l.readF2dot14(u,d),d+=2,z.m.b=l.readF2dot14(u,d),d+=2,z.m.c=l.readF2dot14(u,d),d+=2,z.m.d=l.readF2dot14(u,d),d+=2)}while(32&B);if(256&B){var H=l.readUshort(u,d);for(d+=2,p.instr=[],_=0;_<H;_++)p.instr.push(u[d]),d++}}return p},e.GPOS={},e.GPOS.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GPOS.subt)},e.GPOS.subt=function(s,o,l,u){var d=e._bin,p=l,_={};if(_.fmt=d.readUshort(s,l),l+=2,o==1||o==2||o==3||o==7||o==8&&_.fmt<=2){var v=d.readUshort(s,l);l+=2,_.coverage=e._lctf.readCoverage(s,v+p)}if(o==1&&_.fmt==1){var b=d.readUshort(s,l);l+=2;var E=e._lctf.numOfOnes(b);b!=0&&(_.pos=e.GPOS.readValueRecord(s,l,b))}else if(o==2&&_.fmt>=1&&_.fmt<=2){b=d.readUshort(s,l),l+=2;var C=d.readUshort(s,l);l+=2,E=e._lctf.numOfOnes(b);var M=e._lctf.numOfOnes(C);if(_.fmt==1){_.pairsets=[];var I=d.readUshort(s,l);l+=2;for(var L=0;L<I;L++){var O=p+d.readUshort(s,l);l+=2;var P=d.readUshort(s,O);O+=2;for(var B=[],z=0;z<P;z++){var G=d.readUshort(s,O);O+=2,b!=0&&(te=e.GPOS.readValueRecord(s,O,b),O+=2*E),C!=0&&(he=e.GPOS.readValueRecord(s,O,C),O+=2*M),B.push({gid2:G,val1:te,val2:he})}_.pairsets.push(B)}}if(_.fmt==2){var j=d.readUshort(s,l);l+=2;var H=d.readUshort(s,l);l+=2;var Z=d.readUshort(s,l);l+=2;var ae=d.readUshort(s,l);for(l+=2,_.classDef1=e._lctf.readClassDef(s,p+j),_.classDef2=e._lctf.readClassDef(s,p+H),_.matrix=[],L=0;L<Z;L++){var J=[];for(z=0;z<ae;z++){var te=null,he=null;b!=0&&(te=e.GPOS.readValueRecord(s,l,b),l+=2*E),C!=0&&(he=e.GPOS.readValueRecord(s,l,C),l+=2*M),J.push({val1:te,val2:he})}_.matrix.push(J)}}}else{if(o==9&&_.fmt==1){var le=d.readUshort(s,l);l+=2;var ce=d.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=le;else if(u.ltype!=le)throw"invalid extension substitution";return e.GPOS.subt(s,u.ltype,p+ce)}console.debug("unsupported GPOS table LookupType",o,"format",_.fmt)}return _},e.GPOS.readValueRecord=function(s,o,l){var u=e._bin,d=[];return d.push(1&l?u.readShort(s,o):0),o+=1&l?2:0,d.push(2&l?u.readShort(s,o):0),o+=2&l?2:0,d.push(4&l?u.readShort(s,o):0),o+=4&l?2:0,d.push(8&l?u.readShort(s,o):0),o+=8&l?2:0,d},e.GSUB={},e.GSUB.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GSUB.subt)},e.GSUB.subt=function(s,o,l,u){var d=e._bin,p=l,_={};if(_.fmt=d.readUshort(s,l),l+=2,o!=1&&o!=4&&o!=5&&o!=6)return null;if(o==1||o==4||o==5&&_.fmt<=2||o==6&&_.fmt<=2){var v=d.readUshort(s,l);l+=2,_.coverage=e._lctf.readCoverage(s,p+v)}if(o==1&&_.fmt>=1&&_.fmt<=2){if(_.fmt==1)_.delta=d.readShort(s,l),l+=2;else if(_.fmt==2){var b=d.readUshort(s,l);l+=2,_.newg=d.readUshorts(s,l,b),l+=2*_.newg.length}}else if(o==4){_.vals=[],b=d.readUshort(s,l),l+=2;for(var E=0;E<b;E++){var C=d.readUshort(s,l);l+=2,_.vals.push(e.GSUB.readLigatureSet(s,p+C))}}else if(o==5&&_.fmt==2){if(_.fmt==2){var M=d.readUshort(s,l);l+=2,_.cDef=e._lctf.readClassDef(s,p+M),_.scset=[];var I=d.readUshort(s,l);for(l+=2,E=0;E<I;E++){var L=d.readUshort(s,l);l+=2,_.scset.push(L==0?null:e.GSUB.readSubClassSet(s,p+L))}}}else if(o==6&&_.fmt==3){if(_.fmt==3){for(E=0;E<3;E++){b=d.readUshort(s,l),l+=2;for(var O=[],P=0;P<b;P++)O.push(e._lctf.readCoverage(s,p+d.readUshort(s,l+2*P)));l+=2*b,E==0&&(_.backCvg=O),E==1&&(_.inptCvg=O),E==2&&(_.ahedCvg=O)}b=d.readUshort(s,l),l+=2,_.lookupRec=e.GSUB.readSubstLookupRecords(s,l,b)}}else{if(o==7&&_.fmt==1){var B=d.readUshort(s,l);l+=2;var z=d.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=B;else if(u.ltype!=B)throw"invalid extension substitution";return e.GSUB.subt(s,u.ltype,p+z)}console.debug("unsupported GSUB table LookupType",o,"format",_.fmt)}return _},e.GSUB.readSubClassSet=function(s,o){var l=e._bin.readUshort,u=o,d=[],p=l(s,o);o+=2;for(var _=0;_<p;_++){var v=l(s,o);o+=2,d.push(e.GSUB.readSubClassRule(s,u+v))}return d},e.GSUB.readSubClassRule=function(s,o){var l=e._bin.readUshort,u={},d=l(s,o),p=l(s,o+=2);o+=2,u.input=[];for(var _=0;_<d-1;_++)u.input.push(l(s,o)),o+=2;return u.substLookupRecords=e.GSUB.readSubstLookupRecords(s,o,p),u},e.GSUB.readSubstLookupRecords=function(s,o,l){for(var u=e._bin.readUshort,d=[],p=0;p<l;p++)d.push(u(s,o),u(s,o+2)),o+=4;return d},e.GSUB.readChainSubClassSet=function(s,o){var l=e._bin,u=o,d=[],p=l.readUshort(s,o);o+=2;for(var _=0;_<p;_++){var v=l.readUshort(s,o);o+=2,d.push(e.GSUB.readChainSubClassRule(s,u+v))}return d},e.GSUB.readChainSubClassRule=function(s,o){for(var l=e._bin,u={},d=["backtrack","input","lookahead"],p=0;p<d.length;p++){var _=l.readUshort(s,o);o+=2,p==1&&_--,u[d[p]]=l.readUshorts(s,o,_),o+=2*u[d[p]].length}return _=l.readUshort(s,o),o+=2,u.subst=l.readUshorts(s,o,2*_),o+=2*u.subst.length,u},e.GSUB.readLigatureSet=function(s,o){var l=e._bin,u=o,d=[],p=l.readUshort(s,o);o+=2;for(var _=0;_<p;_++){var v=l.readUshort(s,o);o+=2,d.push(e.GSUB.readLigature(s,u+v))}return d},e.GSUB.readLigature=function(s,o){var l=e._bin,u={chain:[]};u.nglyph=l.readUshort(s,o),o+=2;var d=l.readUshort(s,o);o+=2;for(var p=0;p<d-1;p++)u.chain.push(l.readUshort(s,o)),o+=2;return u},e.head={},e.head.parse=function(s,o,l){var u=e._bin,d={};return u.readFixed(s,o),o+=4,d.fontRevision=u.readFixed(s,o),o+=4,u.readUint(s,o),o+=4,u.readUint(s,o),o+=4,d.flags=u.readUshort(s,o),o+=2,d.unitsPerEm=u.readUshort(s,o),o+=2,d.created=u.readUint64(s,o),o+=8,d.modified=u.readUint64(s,o),o+=8,d.xMin=u.readShort(s,o),o+=2,d.yMin=u.readShort(s,o),o+=2,d.xMax=u.readShort(s,o),o+=2,d.yMax=u.readShort(s,o),o+=2,d.macStyle=u.readUshort(s,o),o+=2,d.lowestRecPPEM=u.readUshort(s,o),o+=2,d.fontDirectionHint=u.readShort(s,o),o+=2,d.indexToLocFormat=u.readShort(s,o),o+=2,d.glyphDataFormat=u.readShort(s,o),o+=2,d},e.hhea={},e.hhea.parse=function(s,o,l){var u=e._bin,d={};return u.readFixed(s,o),o+=4,d.ascender=u.readShort(s,o),o+=2,d.descender=u.readShort(s,o),o+=2,d.lineGap=u.readShort(s,o),o+=2,d.advanceWidthMax=u.readUshort(s,o),o+=2,d.minLeftSideBearing=u.readShort(s,o),o+=2,d.minRightSideBearing=u.readShort(s,o),o+=2,d.xMaxExtent=u.readShort(s,o),o+=2,d.caretSlopeRise=u.readShort(s,o),o+=2,d.caretSlopeRun=u.readShort(s,o),o+=2,d.caretOffset=u.readShort(s,o),o+=2,o+=8,d.metricDataFormat=u.readShort(s,o),o+=2,d.numberOfHMetrics=u.readUshort(s,o),o+=2,d},e.hmtx={},e.hmtx.parse=function(s,o,l,u){for(var d=e._bin,p={aWidth:[],lsBearing:[]},_=0,v=0,b=0;b<u.maxp.numGlyphs;b++)b<u.hhea.numberOfHMetrics&&(_=d.readUshort(s,o),o+=2,v=d.readShort(s,o),o+=2),p.aWidth.push(_),p.lsBearing.push(v);return p},e.kern={},e.kern.parse=function(s,o,l,u){var d=e._bin,p=d.readUshort(s,o);if(o+=2,p==1)return e.kern.parseV1(s,o-2,l,u);var _=d.readUshort(s,o);o+=2;for(var v={glyph1:[],rval:[]},b=0;b<_;b++){o+=2,l=d.readUshort(s,o),o+=2;var E=d.readUshort(s,o);o+=2;var C=E>>>8;if((C&=15)!=0)throw"unknown kern table format: "+C;o=e.kern.readFormat0(s,o,v)}return v},e.kern.parseV1=function(s,o,l,u){var d=e._bin;d.readFixed(s,o),o+=4;var p=d.readUint(s,o);o+=4;for(var _={glyph1:[],rval:[]},v=0;v<p;v++){d.readUint(s,o),o+=4;var b=d.readUshort(s,o);o+=2,d.readUshort(s,o),o+=2;var E=b>>>8;if((E&=15)!=0)throw"unknown kern table format: "+E;o=e.kern.readFormat0(s,o,_)}return _},e.kern.readFormat0=function(s,o,l){var u=e._bin,d=-1,p=u.readUshort(s,o);o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2;for(var _=0;_<p;_++){var v=u.readUshort(s,o);o+=2;var b=u.readUshort(s,o);o+=2;var E=u.readShort(s,o);o+=2,v!=d&&(l.glyph1.push(v),l.rval.push({glyph2:[],vals:[]}));var C=l.rval[l.rval.length-1];C.glyph2.push(b),C.vals.push(E),d=v}return o},e.loca={},e.loca.parse=function(s,o,l,u){var d=e._bin,p=[],_=u.head.indexToLocFormat,v=u.maxp.numGlyphs+1;if(_==0)for(var b=0;b<v;b++)p.push(d.readUshort(s,o+(b<<1))<<1);if(_==1)for(b=0;b<v;b++)p.push(d.readUint(s,o+(b<<2)));return p},e.maxp={},e.maxp.parse=function(s,o,l){var u=e._bin,d={},p=u.readUint(s,o);return o+=4,d.numGlyphs=u.readUshort(s,o),o+=2,p==65536&&(d.maxPoints=u.readUshort(s,o),o+=2,d.maxContours=u.readUshort(s,o),o+=2,d.maxCompositePoints=u.readUshort(s,o),o+=2,d.maxCompositeContours=u.readUshort(s,o),o+=2,d.maxZones=u.readUshort(s,o),o+=2,d.maxTwilightPoints=u.readUshort(s,o),o+=2,d.maxStorage=u.readUshort(s,o),o+=2,d.maxFunctionDefs=u.readUshort(s,o),o+=2,d.maxInstructionDefs=u.readUshort(s,o),o+=2,d.maxStackElements=u.readUshort(s,o),o+=2,d.maxSizeOfInstructions=u.readUshort(s,o),o+=2,d.maxComponentElements=u.readUshort(s,o),o+=2,d.maxComponentDepth=u.readUshort(s,o),o+=2),d},e.name={},e.name.parse=function(s,o,l){var u=e._bin,d={};u.readUshort(s,o),o+=2;var p=u.readUshort(s,o);o+=2,u.readUshort(s,o);for(var _,v=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],b=o+=2,E=0;E<p;E++){var C=u.readUshort(s,o);o+=2;var M=u.readUshort(s,o);o+=2;var I=u.readUshort(s,o);o+=2;var L=u.readUshort(s,o);o+=2;var O=u.readUshort(s,o);o+=2;var P=u.readUshort(s,o);o+=2;var B,z=v[L],G=b+12*p+P;if(C==0)B=u.readUnicode(s,G,O/2);else if(C==3&&M==0)B=u.readUnicode(s,G,O/2);else if(M==0)B=u.readASCII(s,G,O);else if(M==1)B=u.readUnicode(s,G,O/2);else if(M==3)B=u.readUnicode(s,G,O/2);else{if(C!=1)throw"unknown encoding "+M+", platformID: "+C;B=u.readASCII(s,G,O),console.debug("reading unknown MAC encoding "+M+" as ASCII")}var j="p"+C+","+I.toString(16);d[j]==null&&(d[j]={}),d[j][z!==void 0?z:L]=B,d[j]._lang=I}for(var H in d)if(d[H].postScriptName!=null&&d[H]._lang==1033)return d[H];for(var H in d)if(d[H].postScriptName!=null&&d[H]._lang==0)return d[H];for(var H in d)if(d[H].postScriptName!=null&&d[H]._lang==3084)return d[H];for(var H in d)if(d[H].postScriptName!=null)return d[H];for(var H in d){_=H;break}return console.debug("returning name table with languageID "+d[_]._lang),d[_]},e["OS/2"]={},e["OS/2"].parse=function(s,o,l){var u=e._bin.readUshort(s,o);o+=2;var d={};if(u==0)e["OS/2"].version0(s,o,d);else if(u==1)e["OS/2"].version1(s,o,d);else if(u==2||u==3||u==4)e["OS/2"].version2(s,o,d);else{if(u!=5)throw"unknown OS/2 table version: "+u;e["OS/2"].version5(s,o,d)}return d},e["OS/2"].version0=function(s,o,l){var u=e._bin;return l.xAvgCharWidth=u.readShort(s,o),o+=2,l.usWeightClass=u.readUshort(s,o),o+=2,l.usWidthClass=u.readUshort(s,o),o+=2,l.fsType=u.readUshort(s,o),o+=2,l.ySubscriptXSize=u.readShort(s,o),o+=2,l.ySubscriptYSize=u.readShort(s,o),o+=2,l.ySubscriptXOffset=u.readShort(s,o),o+=2,l.ySubscriptYOffset=u.readShort(s,o),o+=2,l.ySuperscriptXSize=u.readShort(s,o),o+=2,l.ySuperscriptYSize=u.readShort(s,o),o+=2,l.ySuperscriptXOffset=u.readShort(s,o),o+=2,l.ySuperscriptYOffset=u.readShort(s,o),o+=2,l.yStrikeoutSize=u.readShort(s,o),o+=2,l.yStrikeoutPosition=u.readShort(s,o),o+=2,l.sFamilyClass=u.readShort(s,o),o+=2,l.panose=u.readBytes(s,o,10),o+=10,l.ulUnicodeRange1=u.readUint(s,o),o+=4,l.ulUnicodeRange2=u.readUint(s,o),o+=4,l.ulUnicodeRange3=u.readUint(s,o),o+=4,l.ulUnicodeRange4=u.readUint(s,o),o+=4,l.achVendID=[u.readInt8(s,o),u.readInt8(s,o+1),u.readInt8(s,o+2),u.readInt8(s,o+3)],o+=4,l.fsSelection=u.readUshort(s,o),o+=2,l.usFirstCharIndex=u.readUshort(s,o),o+=2,l.usLastCharIndex=u.readUshort(s,o),o+=2,l.sTypoAscender=u.readShort(s,o),o+=2,l.sTypoDescender=u.readShort(s,o),o+=2,l.sTypoLineGap=u.readShort(s,o),o+=2,l.usWinAscent=u.readUshort(s,o),o+=2,l.usWinDescent=u.readUshort(s,o),o+=2},e["OS/2"].version1=function(s,o,l){var u=e._bin;return o=e["OS/2"].version0(s,o,l),l.ulCodePageRange1=u.readUint(s,o),o+=4,l.ulCodePageRange2=u.readUint(s,o),o+=4},e["OS/2"].version2=function(s,o,l){var u=e._bin;return o=e["OS/2"].version1(s,o,l),l.sxHeight=u.readShort(s,o),o+=2,l.sCapHeight=u.readShort(s,o),o+=2,l.usDefault=u.readUshort(s,o),o+=2,l.usBreak=u.readUshort(s,o),o+=2,l.usMaxContext=u.readUshort(s,o),o+=2},e["OS/2"].version5=function(s,o,l){var u=e._bin;return o=e["OS/2"].version2(s,o,l),l.usLowerOpticalPointSize=u.readUshort(s,o),o+=2,l.usUpperOpticalPointSize=u.readUshort(s,o),o+=2},e.post={},e.post.parse=function(s,o,l){var u=e._bin,d={};return d.version=u.readFixed(s,o),o+=4,d.italicAngle=u.readFixed(s,o),o+=4,d.underlinePosition=u.readShort(s,o),o+=2,d.underlineThickness=u.readShort(s,o),o+=2,d},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(s,o){var l=s.cmap,u=-1;if(l.p0e4!=null?u=l.p0e4:l.p3e1!=null?u=l.p3e1:l.p1e0!=null?u=l.p1e0:l.p0e3!=null&&(u=l.p0e3),u==-1)throw"no familiar platform and encoding!";var d=l.tables[u];if(d.format==0)return o>=d.map.length?0:d.map[o];if(d.format==4){for(var p=-1,_=0;_<d.endCount.length;_++)if(o<=d.endCount[_]){p=_;break}return p==-1||d.startCount[p]>o?0:65535&(d.idRangeOffset[p]!=0?d.glyphIdArray[o-d.startCount[p]+(d.idRangeOffset[p]>>1)-(d.idRangeOffset.length-p)]:o+d.idDelta[p])}if(d.format==12){if(o>d.groups[d.groups.length-1][1])return 0;for(_=0;_<d.groups.length;_++){var v=d.groups[_];if(v[0]<=o&&o<=v[1])return v[2]+(o-v[0])}return 0}throw"unknown cmap table format "+d.format},e.U.glyphToPath=function(s,o){var l={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[o]){var u=s.SVG.entries[o];return u==null?l:(typeof u=="string"&&(u=e.SVG.toPath(u),s.SVG.entries[o]=u),u)}if(s.CFF){var d={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},p=s.CFF,_=s.CFF.Private;if(p.ROS){for(var v=0;p.FDSelect[v+2]<=o;)v+=2;_=p.FDArray[p.FDSelect[v+1]].Private}e.U._drawCFF(s.CFF.CharStrings[o],d,p,_,l)}else s.glyf&&e.U._drawGlyf(o,s,l);return l},e.U._drawGlyf=function(s,o,l){var u=o.glyf[s];u==null&&(u=o.glyf[s]=e.glyf._parseGlyf(o,s)),u!=null&&(u.noc>-1?e.U._simpleGlyph(u,l):e.U._compoGlyph(u,o,l))},e.U._simpleGlyph=function(s,o){for(var l=0;l<s.noc;l++){for(var u=l==0?0:s.endPts[l-1]+1,d=s.endPts[l],p=u;p<=d;p++){var _=p==u?d:p-1,v=p==d?u:p+1,b=1&s.flags[p],E=1&s.flags[_],C=1&s.flags[v],M=s.xs[p],I=s.ys[p];if(p==u)if(b){if(!E){e.U.P.moveTo(o,M,I);continue}e.U.P.moveTo(o,s.xs[_],s.ys[_])}else E?e.U.P.moveTo(o,s.xs[_],s.ys[_]):e.U.P.moveTo(o,(s.xs[_]+M)/2,(s.ys[_]+I)/2);b?E&&e.U.P.lineTo(o,M,I):C?e.U.P.qcurveTo(o,M,I,s.xs[v],s.ys[v]):e.U.P.qcurveTo(o,M,I,(M+s.xs[v])/2,(I+s.ys[v])/2)}e.U.P.closePath(o)}},e.U._compoGlyph=function(s,o,l){for(var u=0;u<s.parts.length;u++){var d={cmds:[],crds:[]},p=s.parts[u];e.U._drawGlyf(p.glyphIndex,o,d);for(var _=p.m,v=0;v<d.crds.length;v+=2){var b=d.crds[v],E=d.crds[v+1];l.crds.push(b*_.a+E*_.b+_.tx),l.crds.push(b*_.c+E*_.d+_.ty)}for(v=0;v<d.cmds.length;v++)l.cmds.push(d.cmds[v])}},e.U._getGlyphClass=function(s,o){var l=e._lctf.getInterval(o,s);return l==-1?0:o[l+2]},e.U.getPairAdjustment=function(s,o,l){var u=!1;if(s.GPOS)for(var d=s.GPOS,p=d.lookupList,_=d.featureList,v=[],b=0;b<_.length;b++){var E=_[b];if(E.tag=="kern"){u=!0;for(var C=0;C<E.tab.length;C++)if(!v[E.tab[C]]){v[E.tab[C]]=!0;for(var M=p[E.tab[C]],I=0;I<M.tabs.length;I++)if(M.tabs[I]!=null){var L,O=M.tabs[I];if((!O.coverage||(L=e._lctf.coverageIndex(O.coverage,o))!=-1)&&M.ltype!=1&&M.ltype==2){var P=null;if(O.fmt==1){var B=O.pairsets[L];for(b=0;b<B.length;b++)B[b].gid2==l&&(P=B[b])}else if(O.fmt==2){var z=e.U._getGlyphClass(o,O.classDef1),G=e.U._getGlyphClass(l,O.classDef2);P=O.matrix[z][G]}if(P){var j=0;return P.val1&&P.val1[2]&&(j+=P.val1[2]),P.val2&&P.val2[0]&&(j+=P.val2[0]),j}}}}}}if(s.kern&&!u){var H=s.kern.glyph1.indexOf(o);if(H!=-1){var Z=s.kern.rval[H].glyph2.indexOf(l);if(Z!=-1)return s.kern.rval[H].vals[Z]}}return 0},e.U._applySubs=function(s,o,l,u){for(var d=s.length-o-1,p=0;p<l.tabs.length;p++)if(l.tabs[p]!=null){var _,v=l.tabs[p];if(!v.coverage||(_=e._lctf.coverageIndex(v.coverage,s[o]))!=-1){if(l.ltype==1)s[o],v.fmt==1?s[o]=s[o]+v.delta:s[o]=v.newg[_];else if(l.ltype==4)for(var b=v.vals[_],E=0;E<b.length;E++){var C=b[E],M=C.chain.length;if(!(M>d)){for(var I=!0,L=0,O=0;O<M;O++){for(;s[o+L+(1+O)]==-1;)L++;C.chain[O]!=s[o+L+(1+O)]&&(I=!1)}if(I){for(s[o]=C.nglyph,O=0;O<M+L;O++)s[o+O+1]=-1;break}}}else if(l.ltype==5&&v.fmt==2)for(var P=e._lctf.getInterval(v.cDef,s[o]),B=v.cDef[P+2],z=v.scset[B],G=0;G<z.length;G++){var j=z[G],H=j.input;if(!(H.length>d)){for(I=!0,O=0;O<H.length;O++){var Z=e._lctf.getInterval(v.cDef,s[o+1+O]);if(P==-1&&v.cDef[Z+2]!=H[O]){I=!1;break}}if(I){var ae=j.substLookupRecords;for(E=0;E<ae.length;E+=2)ae[E],ae[E+1]}}}else if(l.ltype==6&&v.fmt==3){if(!e.U._glsCovered(s,v.backCvg,o-v.backCvg.length)||!e.U._glsCovered(s,v.inptCvg,o)||!e.U._glsCovered(s,v.ahedCvg,o+v.inptCvg.length))continue;var J=v.lookupRec;for(G=0;G<J.length;G+=2){P=J[G];var te=u[J[G+1]];e.U._applySubs(s,o+P,te,u)}}}}},e.U._glsCovered=function(s,o,l){for(var u=0;u<o.length;u++)if(e._lctf.coverageIndex(o[u],s[l+u])==-1)return!1;return!0},e.U.glyphsToPath=function(s,o,l){for(var u={cmds:[],crds:[]},d=0,p=0;p<o.length;p++){var _=o[p];if(_!=-1){for(var v=p<o.length-1&&o[p+1]!=-1?o[p+1]:0,b=e.U.glyphToPath(s,_),E=0;E<b.crds.length;E+=2)u.crds.push(b.crds[E]+d),u.crds.push(b.crds[E+1]);for(l&&u.cmds.push(l),E=0;E<b.cmds.length;E++)u.cmds.push(b.cmds[E]);l&&u.cmds.push("X"),d+=s.hmtx.aWidth[_],p<o.length-1&&(d+=e.U.getPairAdjustment(s,_,v))}}return u},e.U.P={},e.U.P.moveTo=function(s,o,l){s.cmds.push("M"),s.crds.push(o,l)},e.U.P.lineTo=function(s,o,l){s.cmds.push("L"),s.crds.push(o,l)},e.U.P.curveTo=function(s,o,l,u,d,p,_){s.cmds.push("C"),s.crds.push(o,l,u,d,p,_)},e.U.P.qcurveTo=function(s,o,l,u,d){s.cmds.push("Q"),s.crds.push(o,l,u,d)},e.U.P.closePath=function(s){s.cmds.push("Z")},e.U._drawCFF=function(s,o,l,u,d){for(var p=o.stack,_=o.nStems,v=o.haveWidth,b=o.width,E=o.open,C=0,M=o.x,I=o.y,L=0,O=0,P=0,B=0,z=0,G=0,j=0,H=0,Z=0,ae=0,J={val:0,size:0};C<s.length;){e.CFF.getCharString(s,C,J);var te=J.val;if(C+=J.size,te=="o1"||te=="o18")p.length%2!=0&&!v&&(b=p.shift()+u.nominalWidthX),_+=p.length>>1,p.length=0,v=!0;else if(te=="o3"||te=="o23")p.length%2!=0&&!v&&(b=p.shift()+u.nominalWidthX),_+=p.length>>1,p.length=0,v=!0;else if(te=="o4")p.length>1&&!v&&(b=p.shift()+u.nominalWidthX,v=!0),E&&e.U.P.closePath(d),I+=p.pop(),e.U.P.moveTo(d,M,I),E=!0;else if(te=="o5")for(;p.length>0;)M+=p.shift(),I+=p.shift(),e.U.P.lineTo(d,M,I);else if(te=="o6"||te=="o7")for(var he=p.length,le=te=="o6",ce=0;ce<he;ce++){var be=p.shift();le?M+=be:I+=be,le=!le,e.U.P.lineTo(d,M,I)}else if(te=="o8"||te=="o24"){he=p.length;for(var $e=0;$e+6<=he;)L=M+p.shift(),O=I+p.shift(),P=L+p.shift(),B=O+p.shift(),M=P+p.shift(),I=B+p.shift(),e.U.P.curveTo(d,L,O,P,B,M,I),$e+=6;te=="o24"&&(M+=p.shift(),I+=p.shift(),e.U.P.lineTo(d,M,I))}else{if(te=="o11")break;if(te=="o1234"||te=="o1235"||te=="o1236"||te=="o1237")te=="o1234"&&(O=I,P=(L=M+p.shift())+p.shift(),ae=B=O+p.shift(),G=B,H=I,M=(j=(z=(Z=P+p.shift())+p.shift())+p.shift())+p.shift(),e.U.P.curveTo(d,L,O,P,B,Z,ae),e.U.P.curveTo(d,z,G,j,H,M,I)),te=="o1235"&&(L=M+p.shift(),O=I+p.shift(),P=L+p.shift(),B=O+p.shift(),Z=P+p.shift(),ae=B+p.shift(),z=Z+p.shift(),G=ae+p.shift(),j=z+p.shift(),H=G+p.shift(),M=j+p.shift(),I=H+p.shift(),p.shift(),e.U.P.curveTo(d,L,O,P,B,Z,ae),e.U.P.curveTo(d,z,G,j,H,M,I)),te=="o1236"&&(L=M+p.shift(),O=I+p.shift(),P=L+p.shift(),ae=B=O+p.shift(),G=B,j=(z=(Z=P+p.shift())+p.shift())+p.shift(),H=G+p.shift(),M=j+p.shift(),e.U.P.curveTo(d,L,O,P,B,Z,ae),e.U.P.curveTo(d,z,G,j,H,M,I)),te=="o1237"&&(L=M+p.shift(),O=I+p.shift(),P=L+p.shift(),B=O+p.shift(),Z=P+p.shift(),ae=B+p.shift(),z=Z+p.shift(),G=ae+p.shift(),j=z+p.shift(),H=G+p.shift(),Math.abs(j-M)>Math.abs(H-I)?M=j+p.shift():I=H+p.shift(),e.U.P.curveTo(d,L,O,P,B,Z,ae),e.U.P.curveTo(d,z,G,j,H,M,I));else if(te=="o14"){if(p.length>0&&!v&&(b=p.shift()+l.nominalWidthX,v=!0),p.length==4){var q=p.shift(),oe=p.shift(),se=p.shift(),pe=p.shift(),Se=e.CFF.glyphBySE(l,se),Fe=e.CFF.glyphBySE(l,pe);e.U._drawCFF(l.CharStrings[Se],o,l,u,d),o.x=q,o.y=oe,e.U._drawCFF(l.CharStrings[Fe],o,l,u,d)}E&&(e.U.P.closePath(d),E=!1)}else if(te=="o19"||te=="o20")p.length%2!=0&&!v&&(b=p.shift()+u.nominalWidthX),_+=p.length>>1,p.length=0,v=!0,C+=_+7>>3;else if(te=="o21")p.length>2&&!v&&(b=p.shift()+u.nominalWidthX,v=!0),I+=p.pop(),M+=p.pop(),E&&e.U.P.closePath(d),e.U.P.moveTo(d,M,I),E=!0;else if(te=="o22")p.length>1&&!v&&(b=p.shift()+u.nominalWidthX,v=!0),M+=p.pop(),E&&e.U.P.closePath(d),e.U.P.moveTo(d,M,I),E=!0;else if(te=="o25"){for(;p.length>6;)M+=p.shift(),I+=p.shift(),e.U.P.lineTo(d,M,I);L=M+p.shift(),O=I+p.shift(),P=L+p.shift(),B=O+p.shift(),M=P+p.shift(),I=B+p.shift(),e.U.P.curveTo(d,L,O,P,B,M,I)}else if(te=="o26")for(p.length%2&&(M+=p.shift());p.length>0;)L=M,O=I+p.shift(),M=P=L+p.shift(),I=(B=O+p.shift())+p.shift(),e.U.P.curveTo(d,L,O,P,B,M,I);else if(te=="o27")for(p.length%2&&(I+=p.shift());p.length>0;)O=I,P=(L=M+p.shift())+p.shift(),B=O+p.shift(),M=P+p.shift(),I=B,e.U.P.curveTo(d,L,O,P,B,M,I);else if(te=="o10"||te=="o29"){var Re=te=="o10"?u:l;if(p.length==0)console.debug("error: empty stack");else{var qe=p.pop(),Ne=Re.Subrs[qe+Re.Bias];o.x=M,o.y=I,o.nStems=_,o.haveWidth=v,o.width=b,o.open=E,e.U._drawCFF(Ne,o,l,u,d),M=o.x,I=o.y,_=o.nStems,v=o.haveWidth,b=o.width,E=o.open}}else if(te=="o30"||te=="o31"){var it=p.length,st=($e=0,te=="o31");for($e+=it-(he=-3&it);$e<he;)st?(O=I,P=(L=M+p.shift())+p.shift(),I=(B=O+p.shift())+p.shift(),he-$e==5?(M=P+p.shift(),$e++):M=P,st=!1):(L=M,O=I+p.shift(),P=L+p.shift(),B=O+p.shift(),M=P+p.shift(),he-$e==5?(I=B+p.shift(),$e++):I=B,st=!0),e.U.P.curveTo(d,L,O,P,B,M,I),$e+=4}else{if((te+"").charAt(0)=="o")throw console.debug("Unknown operation: "+te,s),te;p.push(te)}}}o.x=M,o.y=I,o.nStems=_,o.haveWidth=v,o.width=b,o.open=E};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function zwe(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,s=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(te,he){for(var le=new t(31),ce=0;ce<31;++ce)le[ce]=he+=1<<te[ce-1];var be=new i(le[30]);for(ce=1;ce<30;++ce)for(var $e=le[ce];$e<le[ce+1];++$e)be[$e]=$e-le[ce]<<5|ce;return[le,be]},d=u(s,2),p=d[0],_=d[1];p[28]=258,_[258]=28;for(var v=u(o,0)[0],b=new t(32768),E=0;E<32768;++E){var C=(43690&E)>>>1|(21845&E)<<1;C=(61680&(C=(52428&C)>>>2|(13107&C)<<2))>>>4|(3855&C)<<4,b[E]=((65280&C)>>>8|(255&C)<<8)>>>1}var M=function(te,he,le){for(var ce=te.length,be=0,$e=new t(he);be<ce;++be)++$e[te[be]-1];var q,oe=new t(he);for(be=0;be<he;++be)oe[be]=oe[be-1]+$e[be-1]<<1;if(le){q=new t(1<<he);var se=15-he;for(be=0;be<ce;++be)if(te[be])for(var pe=be<<4|te[be],Se=he-te[be],Fe=oe[te[be]-1]++<<Se,Re=Fe|(1<<Se)-1;Fe<=Re;++Fe)q[b[Fe]>>>se]=pe}else for(q=new t(ce),be=0;be<ce;++be)te[be]&&(q[be]=b[oe[te[be]-1]++]>>>15-te[be]);return q},I=new e(288);for(E=0;E<144;++E)I[E]=8;for(E=144;E<256;++E)I[E]=9;for(E=256;E<280;++E)I[E]=7;for(E=280;E<288;++E)I[E]=8;var L=new e(32);for(E=0;E<32;++E)L[E]=5;var O=M(I,9,1),P=M(L,5,1),B=function(te){for(var he=te[0],le=1;le<te.length;++le)te[le]>he&&(he=te[le]);return he},z=function(te,he,le){var ce=he/8|0;return(te[ce]|te[ce+1]<<8)>>(7&he)&le},G=function(te,he){var le=he/8|0;return(te[le]|te[le+1]<<8|te[le+2]<<16)>>(7&he)},j=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],H=function(te,he,le){var ce=new Error(he||j[te]);if(ce.code=te,Error.captureStackTrace&&Error.captureStackTrace(ce,H),!le)throw ce;return ce},Z=function(te,he,le){var ce=te.length;if(!ce||le&&!le.l&&ce<5)return he||new e(0);var be=!he||le,$e=!le||le.i;le||(le={}),he||(he=new e(3*ce));var q,oe=function(Ye){var Gt=he.length;if(Ye>Gt){var He=new e(Math.max(2*Gt,Ye));He.set(he),he=He}},se=le.f||0,pe=le.p||0,Se=le.b||0,Fe=le.l,Re=le.d,qe=le.m,Ne=le.n,it=8*ce;do{if(!Fe){le.f=se=z(te,pe,1);var st=z(te,pe+1,3);if(pe+=3,!st){var pt=te[(Mt=((q=pe)/8|0)+(7&q&&1)+4)-4]|te[Mt-3]<<8,dt=Mt+pt;if(dt>ce){$e&&H(0);break}be&&oe(Se+pt),he.set(te.subarray(Mt,dt),Se),le.b=Se+=pt,le.p=pe=8*dt;continue}if(st==1)Fe=O,Re=P,qe=9,Ne=5;else if(st==2){var Ue=z(te,pe,31)+257,Ae=z(te,pe+10,15)+4,je=Ue+z(te,pe+5,31)+1;pe+=14;for(var nt=new e(je),tt=new e(19),Dt=0;Dt<Ae;++Dt)tt[l[Dt]]=z(te,pe+3*Dt,7);pe+=3*Ae;var Rt=B(tt),yt=(1<<Rt)-1,Ct=M(tt,Rt,1);for(Dt=0;Dt<je;){var Mt,mt=Ct[z(te,pe,yt)];if(pe+=15&mt,(Mt=mt>>>4)<16)nt[Dt++]=Mt;else{var xe=0,ie=0;for(Mt==16?(ie=3+z(te,pe,3),pe+=2,xe=nt[Dt-1]):Mt==17?(ie=3+z(te,pe,7),pe+=3):Mt==18&&(ie=11+z(te,pe,127),pe+=7);ie--;)nt[Dt++]=xe}}var we=nt.subarray(0,Ue),ct=nt.subarray(Ue);qe=B(we),Ne=B(ct),Fe=M(we,qe,1),Re=M(ct,Ne,1)}else H(1);if(pe>it){$e&&H(0);break}}be&&oe(Se+131072);for(var Tt=(1<<qe)-1,At=(1<<Ne)-1,ft=pe;;ft=pe){var Ke=(xe=Fe[G(te,pe)&Tt])>>>4;if((pe+=15&xe)>it){$e&&H(0);break}if(xe||H(2),Ke<256)he[Se++]=Ke;else{if(Ke==256){ft=pe,Fe=null;break}var Oe=Ke-254;if(Ke>264){var Q=s[Dt=Ke-257];Oe=z(te,pe,(1<<Q)-1)+p[Dt],pe+=Q}var ne=Re[G(te,pe)&At],fe=ne>>>4;if(ne||H(3),pe+=15&ne,ct=v[fe],fe>3&&(Q=o[fe],ct+=G(te,pe)&(1<<Q)-1,pe+=Q),pe>it){$e&&H(0);break}be&&oe(Se+131072);for(var Ie=Se+Oe;Se<Ie;Se+=4)he[Se]=he[Se-ct],he[Se+1]=he[Se+1-ct],he[Se+2]=he[Se+2-ct],he[Se+3]=he[Se+3-ct];Se=Ie}}le.l=Fe,le.p=ft,le.b=Se,Fe&&(se=1,le.m=qe,le.d=Re,le.n=Ne)}while(!se);return Se==he.length?he:function(Ye,Gt,He){(Gt==null||Gt<0)&&(Gt=0),(He==null||He>Ye.length)&&(He=Ye.length);var Zt=new(Ye instanceof t?t:Ye instanceof i?i:e)(He-Gt);return Zt.set(Ye.subarray(Gt,He)),Zt}(he,0,Se)},ae=new e(0),J=typeof TextDecoder<"u"&&new TextDecoder;try{J.decode(ae,{stream:!0})}catch{}return n.convert_streams=function(te){var he=new DataView(te),le=0;function ce(){var Ue=he.getUint16(le);return le+=2,Ue}function be(){var Ue=he.getUint32(le);return le+=4,Ue}function $e(Ue){pt.setUint16(dt,Ue),dt+=2}function q(Ue){pt.setUint32(dt,Ue),dt+=4}for(var oe={signature:be(),flavor:be(),length:be(),numTables:ce(),reserved:ce(),totalSfntSize:be(),majorVersion:ce(),minorVersion:ce(),metaOffset:be(),metaLength:be(),metaOrigLength:be(),privOffset:be(),privLength:be()},se=0;Math.pow(2,se)<=oe.numTables;)se++;se--;for(var pe=16*Math.pow(2,se),Se=16*oe.numTables-pe,Fe=12,Re=[],qe=0;qe<oe.numTables;qe++)Re.push({tag:be(),offset:be(),compLength:be(),origLength:be(),origChecksum:be()}),Fe+=16;var Ne,it=new Uint8Array(12+16*Re.length+Re.reduce(function(Ue,Ae){return Ue+Ae.origLength+4},0)),st=it.buffer,pt=new DataView(st),dt=0;return q(oe.flavor),$e(oe.numTables),$e(pe),$e(se),$e(Se),Re.forEach(function(Ue){q(Ue.tag),q(Ue.origChecksum),q(Fe),q(Ue.origLength),Ue.outOffset=Fe,(Fe+=Ue.origLength)%4!=0&&(Fe+=4-Fe%4)}),Re.forEach(function(Ue){var Ae,je=te.slice(Ue.offset,Ue.offset+Ue.compLength);if(Ue.compLength!=Ue.origLength){var nt=new Uint8Array(Ue.origLength);Ae=new Uint8Array(je,2),Z(Ae,nt)}else nt=new Uint8Array(je);it.set(nt,Ue.outOffset);var tt=0;(Fe=Ue.outOffset+Ue.origLength)%4!=0&&(tt=4-Fe%4),it.set(new Uint8Array(tt).buffer,Ue.outOffset+Ue.origLength),Ne=Fe+tt}),st.slice(0,Ne)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function Uwe(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,o=2,l=4,u=8,d=16,p=32;let _;function v(z){if(!_){const G={R:o,L:s,D:l,C:d,U:p,T:u};_=new Map;for(let j in i){let H=0;i[j].split(",").forEach(Z=>{let[ae,J]=Z.split("+");ae=parseInt(ae,36),J=J?parseInt(J,36):0,_.set(H+=ae,G[j]);for(let te=J;te--;)_.set(++H,G[j])})}}return _.get(z)||p}const b=1,E=2,C=3,M=4,I=[null,"isol","init","fina","medi"];function L(z){const G=new Uint8Array(z.length);let j=p,H=b,Z=-1;for(let ae=0;ae<z.length;ae++){const J=z.codePointAt(ae);let te=v(J)|0,he=b;te&u||(j&(s|l|d)?te&(o|l|d)?(he=C,(H===b||H===C)&&G[Z]++):te&(s|p)&&(H===E||H===M)&&G[Z]--:j&(o|p)&&(H===E||H===M)&&G[Z]--,H=G[ae]=he,j=te,Z=ae,J>65535&&ae++)}return G}function O(z,G){const j=[];for(let Z=0;Z<G.length;Z++){const ae=G.codePointAt(Z);ae>65535&&Z++,j.push(n.U.codeToGlyph(z,ae))}const H=z.GSUB;if(H){const{lookupList:Z,featureList:ae}=H;let J;const te=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,he=[];ae.forEach(le=>{if(te.test(le.tag))for(let ce=0;ce<le.tab.length;ce++){if(he[le.tab[ce]])continue;he[le.tab[ce]]=!0;const be=Z[le.tab[ce]],$e=/^(isol|init|fina|medi)$/.test(le.tag);$e&&!J&&(J=L(G));for(let q=0;q<j.length;q++)(!J||!$e||I[J[q]]===le.tag)&&n.U._applySubs(j,q,be,Z)}})}return j}function P(...z){for(let G=0;G<z.length;G++)if(typeof z[G]=="number")return z[G]}function B(z){const G=Object.create(null),j=z["OS/2"],H=z.hhea,Z=z.head.unitsPerEm,ae=P(j&&j.sTypoAscender,H&&H.ascender,Z),J={unitsPerEm:Z,ascender:ae,descender:P(j&&j.sTypoDescender,H&&H.descender,0),capHeight:P(j&&j.sCapHeight,ae),xHeight:P(j&&j.sxHeight,ae),lineGap:P(j&&j.sTypoLineGap,H&&H.lineGap),forEachGlyph(te,he,le,ce){let be=0;const $e=1/J.unitsPerEm*he,q=O(z,te);let oe=0,se=-1;return q.forEach((pe,Se)=>{if(pe!==-1){let Fe=G[pe];if(!Fe){const{cmds:Re,crds:qe}=n.U.glyphToPath(z,pe);let Ne="",it=0;for(let Ae=0,je=Re.length;Ae<je;Ae++){const nt=t[Re[Ae]];Ne+=Re[Ae];for(let tt=1;tt<=nt;tt++)Ne+=(tt>1?",":"")+qe[it++]}let st,pt,dt,Ue;if(qe.length){st=pt=1/0,dt=Ue=-1/0;for(let Ae=0,je=qe.length;Ae<je;Ae+=2){let nt=qe[Ae],tt=qe[Ae+1];nt<st&&(st=nt),tt<pt&&(pt=tt),nt>dt&&(dt=nt),tt>Ue&&(Ue=tt)}}else st=dt=pt=Ue=0;Fe=G[pe]={index:pe,advanceWidth:z.hmtx.aWidth[pe],xMin:st,yMin:pt,xMax:dt,yMax:Ue,path:Ne,pathCommandCount:Re.length}}se!==-1&&(be+=n.U.getPairAdjustment(z,se,pe)*$e),ce.call(null,Fe,be,oe),Fe.advanceWidth&&(be+=Fe.advanceWidth*$e),le&&(be+=le*he),se=pe}oe+=te.codePointAt(oe)>65535?2:1}),be}};return J}return function(z){const G=new Uint8Array(z,0,4),j=n._bin.readASCII(G,0,4);if(j==="wOFF")z=e(z);else if(j==="wOF2")throw new Error("woff2 fonts not supported");return B(n.parse(z)[0])}}const Hwe=X$({name:"Typr Font Parser",dependencies:[Fwe,zwe,Uwe],init(n,e,t){const i=n(),s=e();return t(i,s)}}),RS={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Gwe=new Nn;function uS(){return(self.performance||Date).now()}const tG=Object.create(null);function PJ(n,e){n=jwe({},n);const t=uS();if(n.font=Xwe(n.font||RS.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||RS.sdfGlyphSize,n.colorRanges!=null){let v={};for(let b in n.colorRanges)if(n.colorRanges.hasOwnProperty(b)){let E=n.colorRanges[b];typeof E!="number"&&(E=Gwe.set(E).getHex()),v[b]=E}n.colorRanges=v}Object.freeze(n);const{textureWidth:i,sdfExponent:s}=RS,{sdfGlyphSize:o}=n,l=i/o*4;let u=tG[o];if(!u){const v=document.createElement("canvas");v.width=i,v.height=o*256/l,u=tG[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:v,sdfTexture:new ac(v,void 0,void 0,void 0,bl,bl),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,Wwe(u)}const{sdfTexture:d,sdfCanvas:p}=u;let _=u.glyphsByFont.get(n.font);_||u.glyphsByFont.set(n.font,_=new Map),Kwe(n).then(v=>{const{glyphIds:b,glyphPositions:E,fontSize:C,unitsPerEm:M,timings:I}=v,L=[],O=new Float32Array(b.length*4),P=C/M;let B=0,z=0;const G=uS();b.forEach((J,te)=>{let he=_.get(J);if(!he){const{path:$e,pathBounds:q}=v.glyphData[J],oe=Math.max(q[2]-q[0],q[3]-q[1])/o*(RS.sdfMargin*o+.5),se=u.glyphCount++,pe=[q[0]-oe,q[1]-oe,q[2]+oe,q[3]+oe];_.set(J,he={path:$e,atlasIndex:se,sdfViewBox:pe}),L.push(he)}const{sdfViewBox:le}=he,ce=E[z++],be=E[z++];O[B++]=ce+le[0]*P,O[B++]=be+le[1]*P,O[B++]=ce+le[2]*P,O[B++]=be+le[3]*P,b[te]=he.atlasIndex}),I.quads=(I.quads||0)+(uS()-G);const j=uS();I.sdf={};const H=p.height,Z=Math.ceil(u.glyphCount/l),ae=Math.pow(2,Math.ceil(Math.log2(Z*o)));ae>H&&(console.info(`Increasing SDF texture size ${H}->${ae}`),Pwe(p,i,ae),d.dispose()),Promise.all(L.map(J=>FJ(J,u,n.gpuAccelerateSDF).then(({timing:te})=>{I.sdf[J.atlasIndex]=te}))).then(()=>{L.length&&!u.contextLost&&(zJ(u),d.needsUpdate=!0),I.sdfTotal=uS()-j,I.total=uS()-t,e(Object.freeze({parameters:n,sdfTexture:d,sdfGlyphSize:o,sdfExponent:s,glyphBounds:O,glyphAtlasIndices:b,glyphColors:v.glyphColors,caretPositions:v.caretPositions,caretHeight:v.caretHeight,chunkedBounds:v.chunkedBounds,ascender:v.ascender,descender:v.descender,lineHeight:v.lineHeight,capHeight:v.capHeight,xHeight:v.xHeight,topBaseline:v.topBaseline,blockBounds:v.blockBounds,visibleBounds:v.visibleBounds,timings:v.timings}))})}),Promise.resolve().then(()=>{u.contextLost||Bwe(p)})}function FJ({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:s,contextLost:o},l){if(o)return Promise.resolve({timing:-1});const{textureWidth:u,sdfExponent:d}=RS,p=Math.max(t[2]-t[0],t[3]-t[1]),_=Math.floor(e/4),v=_%(u/i)*i,b=Math.floor(_/(u/i))*i,E=e%4;return Rwe(i,i,n,t,p,d,s,v,b,E,l)}function Wwe(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(s=>{s.forEach(o=>{i.push(FJ(o,n,!0))})}),Promise.all(i).then(()=>{zJ(n),n.sdfTexture.needsUpdate=!0})})}function Vwe({font:n,characters:e,sdfGlyphSize:t},i){let s=Array.isArray(e)?e.join(`
`):""+e;PJ({font:n,sdfGlyphSize:t,text:s},i)}function jwe(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let FM;function Xwe(n){return FM||(FM=typeof document>"u"?{}:document.createElement("a")),FM.href=n,FM.href}function zJ(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:s}=e,o=n.sdfCanvas.getContext("webgl");let l=t.image.data;(!l||l.length!==i*s*4)&&(l=new Uint8Array(i*s*4),t.image={width:i,height:s,data:l},t.flipY=!1,t.isDataTexture=!0),o.readPixels(0,0,i,s,o.RGBA,o.UNSIGNED_BYTE,l)}}const Ywe=X$({name:"Typesetter",dependencies:[RS,Hwe,Iwe,Swe],init(n,e,t,i){const{defaultFontURL:s}=n;return t(e,i(),{defaultFontURL:s})}}),Kwe=X$({name:"Typesetter",dependencies:[Ywe],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),nG={};function Jwe(n){let e=nG[n];if(!e){const t=new e0(1,1,n,n),i=t.clone(),s=t.attributes,o=i.attributes,l=new ai,u=s.uv.count;for(let d=0;d<u;d++)o.position.array[d*3]*=-1,o.normal.array[d*3+2]*=-1;["position","normal","uv"].forEach(d=>{l.setAttribute(d,new sr([...s[d].array,...o[d].array],s[d].itemSize))}),l.setIndex([...t.index.array,...i.index.array.map(d=>d+u)]),l.translate(.5,.5,0),e=nG[n]=l}return e}const qwe="aTroikaGlyphBounds",rG="aTroikaGlyphIndex",Qwe="aTroikaGlyphColor";class Zwe extends ok{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new s_,this.boundingBox=new n0}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===sd?t/2:0,e===nf?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=Jwe(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,s,o){GO(this,qwe,e,4),GO(this,rG,t,1),GO(this,Qwe,o,3),this._blockBounds=i,this._chunkedBounds=s,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:s,floor:o,min:l,max:u,sin:d,cos:p}=Math,_=s/2,v=s*2,b=Math.abs(t),E=e[0]/b,C=e[2]/b,M=o((E+_)/v)!==o((C+_)/v)?-b:l(d(E)*b,d(C)*b),I=o((E-_)/v)!==o((C-_)/v)?b:u(d(E)*b,d(C)*b),L=o((E+s)/v)!==o((C+s)/v)?b*2:u(b-p(E)*b,b-p(C)*b);i.min.set(M,e[1],t<0?-L:0),i.max.set(I,e[3],t<0?0:L)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(rG).count,i=this._chunkedBounds;if(i)for(let s=i.length;s--;){t=i[s].end;let o=i[s].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}this.instanceCount=t}}function GO(n,e,t,i){const s=n.getAttribute(e);t?s&&s.array.length===t.length?(s.array.set(t),s.needsUpdate=!0):(n.setAttribute(e,new A1(t,i)),delete n._maxInstanceCount,n.dispose()):s&&n.deleteAttribute(e)}const e$e=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,t$e=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,n$e=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,r$e=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function i$e(n){const e=yN(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Vt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new vs(0,0,0,0)},uTroikaClipRect:{value:new vs(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Vt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Nn},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new rf},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:e$e,vertexTransform:t$e,fragmentDefs:n$e,fragmentColorTransform:r$e,customRewriter({vertexShader:t,fragmentShader:i}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(i)&&(i=i.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(t)||(t=t.replace(NJ,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const pF=new r0({color:16777215,side:nf,transparent:!0}),iG=8421504,sG=new qr,zM=new Me,WO=new Me,Ux=[],s$e=new Me,VO="+x+y";function oG(n){return Array.isArray(n)?n[0]:n}let UJ=()=>{const n=new Fn(new e0(1,1),pF);return UJ=()=>n,n},HJ=()=>{const n=new Fn(new e0(1,1,32,1),pF);return HJ=()=>n,n};const o$e={type:"syncstart"},a$e={type:"synccomplete"},GJ=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],l$e=GJ.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class WJ extends Fn{constructor(){const e=new Zwe;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=iG,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=VO,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(o$e),PJ({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(s=>s&&s())})),this.dispatchEvent(a$e),e&&e()})))}onBeforeRender(e,t,i,s,o,l){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=e_}onAfterRender(e,t,i,s,o,l){o._hadOwnSide?o.side=o._actualSide:delete o.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=pF.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=i$e(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function s(){e.removeEventListener("dispose",s),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return oG(this.material).getDepthMaterial()}get customDistanceMaterial(){return oG(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:u,blockBounds:d}=s;i.uTroikaSDFTexture.value=u,i.uTroikaSDFTextureSize.value.set(u.image.width,u.image.height),i.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,i.uTroikaSDFExponent.value=s.sdfExponent,i.uTroikaTotalBounds.value.fromArray(d),i.uTroikaUseGlyphColors.value=!t&&!!s.glyphColors;let p=0,_=0,v=0,b,E,C,M=0,I=0;if(t){let{outlineWidth:O,outlineOffsetX:P,outlineOffsetY:B,outlineBlur:z,outlineOpacity:G}=this;p=this._parsePercent(O)||0,_=Math.max(0,this._parsePercent(z)||0),b=G,M=this._parsePercent(P)||0,I=this._parsePercent(B)||0}else v=Math.max(0,this._parsePercent(this.strokeWidth)||0),v&&(C=this.strokeColor,i.uTroikaStrokeColor.value.set(C??iG),E=this.strokeOpacity,E==null&&(E=1)),b=this.fillOpacity;i.uTroikaDistanceOffset.value=p,i.uTroikaPositionOffset.value.set(M,I),i.uTroikaBlurRadius.value=_,i.uTroikaStrokeWidth.value=v,i.uTroikaStrokeOpacity.value=E,i.uTroikaFillOpacity.value=b??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let L=this.clipRect;if(L&&Array.isArray(L)&&L.length===4)i.uTroikaClipRect.value.fromArray(L);else{const O=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(d[0]-O,d[1]-O,d[2]+O,d[3]+O)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const o=t?this.outlineColor||0:this.color;if(o==null)delete e.color;else{const u=e.hasOwnProperty("color")?e.color:e.color=new Nn;(o!==u._input||typeof o=="object")&&u.set(u._input=o)}let l=this.orientation||VO;if(l!==e._orientation){let u=i.uTroikaOrient.value;l=l.replace(/[^-+xyz]/g,"");let d=l!==VO&&l.match(/^([-+])([xyz])([-+])([xyz])$/);if(d){let[,p,_,v,b]=d;zM.set(0,0,0)[_]=p==="-"?1:-1,WO.set(0,0,0)[b]=v==="-"?-1:1,sG.lookAt(s$e,zM.cross(WO),WO),u.setFromMatrix4(sG)}else u.identity();e._orientation=l}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Vt){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new Vt){return zM.copy(e),this.localPositionToTextCoords(this.worldToLocal(zM),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:s}=this;if(i){const o=i.blockBounds,l=s?HJ():UJ(),u=l.geometry,{position:d,uv:p}=u.attributes;for(let _=0;_<p.count;_++){let v=o[0]+p.getX(_)*(o[2]-o[0]);const b=o[1]+p.getY(_)*(o[3]-o[1]);let E=0;s&&(E=s-Math.cos(v/s)*s,v=Math.sin(v/s)*s),d.setXYZ(_,v,b,E)}u.boundingSphere=this.geometry.boundingSphere,u.boundingBox=this.geometry.boundingBox,l.matrixWorld=this.matrixWorld,l.material.side=this.material.side,Ux.length=0,l.raycast(e,Ux);for(let _=0;_<Ux.length;_++)Ux[_].object=this,t.push(Ux[_])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,l$e.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}}GJ.forEach(n=>{const e="_private_"+n;Object.defineProperty(WJ.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const u$e=ge.forwardRef(({anchorX:n="center",anchorY:e="middle",font:t,fontSize:i=1,children:s,characters:o,onSync:l,...u},d)=>{const p=qd(({invalidate:E})=>E),[_]=ge.useState(()=>new WJ),[v,b]=ge.useMemo(()=>{const E=[];let C="";return ge.Children.forEach(s,M=>{typeof M=="string"||typeof M=="number"?C+=M:E.push(M)}),[E,C]},[s]);return hxe(()=>new Promise(E=>Vwe({font:t,characters:o},E)),["troika-text",t,o]),ge.useLayoutEffect(()=>void _.sync(()=>{p(),l&&l(_)})),ge.useEffect(()=>()=>_.dispose(),[_]),an("primitive",{object:_,ref:d,font:t,text:b,anchorX:n,anchorY:e,fontSize:i,...u,children:v})});var c$e=1/0,h$e=9007199254740991,d$e="[object Arguments]",p$e="[object Function]",f$e="[object GeneratorFunction]",m$e="[object Symbol]",g$e=typeof K_=="object"&&K_&&K_.Object===Object&&K_,_$e=typeof self=="object"&&self&&self.Object===Object&&self,y$e=g$e||_$e||Function("return this")();function v$e(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function b$e(n,e){for(var t=-1,i=n?n.length:0,s=Array(i);++t<i;)s[t]=e(n[t],t,n);return s}function T$e(n,e){for(var t=-1,i=e.length,s=n.length;++t<i;)n[s+t]=e[t];return n}var fF=Object.prototype,S$e=fF.hasOwnProperty,mF=fF.toString,aG=y$e.Symbol,E$e=fF.propertyIsEnumerable,lG=aG?aG.isConcatSpreadable:void 0,uG=Math.max;function VJ(n,e,t,i,s){var o=-1,l=n.length;for(t||(t=C$e),s||(s=[]);++o<l;){var u=n[o];e>0&&t(u)?e>1?VJ(u,e-1,t,i,s):T$e(s,u):i||(s[s.length]=u)}return s}function x$e(n,e){return n=Object(n),w$e(n,e,function(t,i){return i in n})}function w$e(n,e,t){for(var i=-1,s=e.length,o={};++i<s;){var l=e[i],u=n[l];t(u,l)&&(o[l]=u)}return o}function $$e(n,e){return e=uG(e===void 0?n.length-1:e,0),function(){for(var t=arguments,i=-1,s=uG(t.length-e,0),o=Array(s);++i<s;)o[i]=t[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=t[i];return l[e]=o,v$e(n,this,l)}}function C$e(n){return I$e(n)||A$e(n)||!!(lG&&n&&n[lG])}function M$e(n){if(typeof n=="string"||N$e(n))return n;var e=n+"";return e=="0"&&1/n==-c$e?"-0":e}function A$e(n){return k$e(n)&&S$e.call(n,"callee")&&(!E$e.call(n,"callee")||mF.call(n)==d$e)}var I$e=Array.isArray;function R$e(n){return n!=null&&L$e(n.length)&&!O$e(n)}function k$e(n){return jJ(n)&&R$e(n)}function O$e(n){var e=D$e(n)?mF.call(n):"";return e==p$e||e==f$e}function L$e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=h$e}function D$e(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function jJ(n){return!!n&&typeof n=="object"}function N$e(n){return typeof n=="symbol"||jJ(n)&&mF.call(n)==m$e}var B$e=$$e(function(n,e){return n==null?{}:x$e(n,b$e(VJ(e,1),M$e))}),jO=B$e;const P$e=ge.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:s=!0,onChange:o,onStart:l,onEnd:u,...d},p)=>{const _=qd(z=>z.invalidate),v=qd(z=>z.camera),b=qd(z=>z.gl),E=qd(z=>z.events),C=qd(z=>z.setEvents),M=qd(z=>z.set),I=qd(z=>z.get),L=qd(z=>z.performance),O=e||v,P=i||E.connected||b.domElement,B=ge.useMemo(()=>new uwe(O),[O]);return Fm(()=>{B.enabled&&B.update()},-1),ge.useEffect(()=>(B.connect(P),()=>void B.dispose()),[P,t,B,_]),ge.useEffect(()=>{const z=H=>{_(),t&&L.regress(),o&&o(H)},G=H=>{l&&l(H)},j=H=>{u&&u(H)};return B.addEventListener("change",z),B.addEventListener("start",G),B.addEventListener("end",j),()=>{B.removeEventListener("start",G),B.removeEventListener("end",j),B.removeEventListener("change",z)}},[o,l,u,B,_,C]),ge.useEffect(()=>{if(n){const z=I().controls;return M({controls:B}),()=>M({controls:z})}},[n,B]),an("primitive",{ref:p,object:B,enableDamping:s,...d})});class F$e extends ek{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:s}=i.capabilities;t.fragmentShader=t.fragmentShader.replace("#include <output_fragment>",`
        ${s?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <encodings_fragment>
      `)}}}const z$e=ge.forwardRef((n,e)=>{const[t]=ge.useState(()=>new F$e(null));return an("primitive",{...n,object:t,ref:e,attach:"material"})});function U$e(n){const e=n+"Geometry";return ge.forwardRef(({args:t,children:i,...s},o)=>Oh("mesh",{ref:o,...s,children:[an(e,{attach:"geometry",args:t}),i]}))}const H$e=U$e("circle");let Lb,Hx;const G$e=ge.createContext(null),cG=new qr,hG=new Me,W$e=ge.forwardRef(({children:n,range:e,limit:t=1e3,...i},s)=>{const o=ge.useRef(null),[l,u]=ge.useState([]),[[d,p,_]]=ge.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);ge.useEffect(()=>{o.current.geometry.attributes.position.needsUpdate=!0}),Fm(()=>{for(o.current.updateMatrix(),o.current.updateMatrixWorld(),cG.copy(o.current.matrixWorld).invert(),o.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,l.length),Lb=0;Lb<l.length;Lb++)Hx=l[Lb].current,Hx.getWorldPosition(hG).applyMatrix4(cG),hG.toArray(d,Lb*3),o.current.geometry.attributes.position.needsUpdate=!0,Hx.matrixWorldNeedsUpdate=!0,Hx.color.toArray(p,Lb*3),o.current.geometry.attributes.color.needsUpdate=!0,_.set([Hx.size],Lb),o.current.geometry.attributes.size.needsUpdate=!0});const v=ge.useMemo(()=>({getParent:()=>o,subscribe:b=>(u(E=>[...E,b]),()=>u(E=>E.filter(C=>C.current!==b.current)))}),[]);return ge.createElement("points",dN({userData:{instances:l},matrixAutoUpdate:!1,ref:cF([s,o]),raycast:()=>null},i),Oh("bufferGeometry",{children:[an("bufferAttribute",{attach:"attributes-position",count:d.length/3,array:d,itemSize:3,usage:d1}),an("bufferAttribute",{attach:"attributes-color",count:p.length/3,array:p,itemSize:3,usage:d1}),an("bufferAttribute",{attach:"attributes-size",count:_.length,array:_,itemSize:1,usage:d1})]}),ge.createElement(G$e.Provider,{value:v},n))}),V$e=ge.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:s=3,...o},l)=>{const u=ge.useRef(null);return Fm(()=>{const d=u.current.geometry.attributes;d.position.needsUpdate=!0,t&&(d.color.needsUpdate=!0),i&&(d.size.needsUpdate=!0)}),Oh("points",{ref:cF([l,u]),...o,children:[Oh("bufferGeometry",{children:[an("bufferAttribute",{attach:"attributes-position",count:e.length/s,array:e,itemSize:s,usage:d1}),t&&an("bufferAttribute",{attach:"attributes-color",count:t.length/s,array:t,itemSize:3,usage:d1}),i&&an("bufferAttribute",{attach:"attributes-size",count:i.length/s,array:i,itemSize:1,usage:d1})]}),n]})}),j$e=ge.forwardRef((n,e)=>n.positions instanceof Float32Array?an(V$e,{...n,ref:e}):an(W$e,{...n,ref:e})),dG=n=>{let e;const t=new Set,i=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const p=e;e=u??typeof d!="object"?d:Object.assign({},e,d),t.forEach(_=>_(e,p))}},s=()=>e,o={setState:i,getState:s,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return e=n(i,s,o),o},X$e=n=>n?dG(n):dG;var XJ={exports:{}},XO={},pG={exports:{}},YO={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fG;function Y$e(){if(fG)return YO;fG=1;var n=Vr;function e(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(v,b){var E=b(),C=i({inst:{value:E,getSnapshot:b}}),M=C[0].inst,I=C[1];return o(function(){M.value=E,M.getSnapshot=b,d(M)&&I({inst:M})},[v,E,b]),s(function(){return d(M)&&I({inst:M}),v(function(){d(M)&&I({inst:M})})},[v]),l(E),E}function d(v){var b=v.getSnapshot;v=v.value;try{var E=b();return!t(v,E)}catch{return!0}}function p(v,b){return b()}var _=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return YO.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:_,YO}var mG;function K$e(){return mG||(mG=1,function(n){n.exports=Y$e()}(pG)),pG.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gG;function J$e(){if(gG)return XO;gG=1;var n=Vr,e=K$e();function t(p,_){return p===_&&(p!==0||1/p===1/_)||p!==p&&_!==_}var i=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,d=n.useDebugValue;return XO.useSyncExternalStoreWithSelector=function(p,_,v,b,E){var C=o(null);if(C.current===null){var M={hasValue:!1,value:null};C.current=M}else M=C.current;C=u(function(){function L(G){if(!O){if(O=!0,P=G,G=b(G),E!==void 0&&M.hasValue){var j=M.value;if(E(j,G))return B=j}return B=G}if(j=B,i(P,G))return j;var H=b(G);return E!==void 0&&E(j,H)?j:(P=G,B=H)}var O=!1,P,B,z=v===void 0?null:v;return[function(){return L(_())},z===null?void 0:function(){return L(z())}]},[_,v,b,E]);var I=s(p,C[0],C[1]);return l(function(){M.hasValue=!0,M.value=I},[I]),d(I),I},XO}(function(n){n.exports=J$e()})(XJ);const q$e=lJ(XJ.exports),{useSyncExternalStoreWithSelector:Q$e}=q$e;function YJ(n,e=n.getState,t){const i=Q$e(n.subscribe,n.getState,n.getServerState||n.getState,e,t);return ge.useDebugValue(i),i}const _G=n=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?X$e(n):n,t=(i,s)=>YJ(e,i,s);return Object.assign(t,e),t},Z$e=n=>n?_G(n):_G,eCe=n=>(e,t,i)=>{const s=i.subscribe;return i.subscribe=(o,l,u)=>{let d=o;if(l){const p=(u==null?void 0:u.equalityFn)||Object.is;let _=o(i.getState());d=v=>{const b=o(v);if(!p(_,b)){const E=_;l(_=b,E)}},u!=null&&u.fireImmediately&&l(_,_)}return s(d)},n(e,t,i)},tCe=eCe;function jg(n){for(var e=arguments.length,t=Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+n+(t.length?" "+t.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function SE(n){return!!n&&!!n[Rm]}function k1(n){return!!n&&(function(e){if(!e||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;var i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===uCe}(n)||Array.isArray(n)||!!n[wG]||!!n.constructor[wG]||gF(n)||_F(n))}function v$(n,e,t){t===void 0&&(t=!1),zE(n)===0?(t?Object.keys:SF)(n).forEach(function(i){t&&typeof i=="symbol"||e(i,n[i],n)}):n.forEach(function(i,s){return e(s,i,n)})}function zE(n){var e=n[Rm];return e?e.i>3?e.i-4:e.i:Array.isArray(n)?1:gF(n)?2:_F(n)?3:0}function bN(n,e){return zE(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function nCe(n,e){return zE(n)===2?n.get(e):n[e]}function KJ(n,e,t){var i=zE(n);i===2?n.set(e,t):i===3?(n.delete(e),n.add(t)):n[e]=t}function rCe(n,e){return n===e?n!==0||1/n==1/e:n!=n&&e!=e}function gF(n){return aCe&&n instanceof Map}function _F(n){return lCe&&n instanceof Set}function Wb(n){return n.o||n.t}function yF(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var e=cCe(n);delete e[Rm];for(var t=SF(e),i=0;i<t.length;i++){var s=t[i],o=e[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[s]})}return Object.create(Object.getPrototypeOf(n),e)}function vF(n,e){return e===void 0&&(e=!1),bF(n)||SE(n)||!k1(n)||(zE(n)>1&&(n.set=n.add=n.clear=n.delete=iCe),Object.freeze(n),e&&v$(n,function(t,i){return vF(i,!0)},!0)),n}function iCe(){jg(2)}function bF(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function Q0(n){var e=hCe[n];return e||jg(18,n),e}function yG(){return b$}function KO(n,e){e&&(Q0("Patches"),n.u=[],n.s=[],n.v=e)}function EI(n){TN(n),n.p.forEach(sCe),n.p=null}function TN(n){n===b$&&(b$=n.l)}function vG(n){return b$={p:[],l:b$,h:n,m:!0,_:0}}function sCe(n){var e=n[Rm];e.i===0||e.i===1?e.j():e.O=!0}function JO(n,e){e._=e.p.length;var t=e.p[0],i=n!==void 0&&n!==t;return e.h.g||Q0("ES5").S(e,n,i),i?(t[Rm].P&&(EI(e),jg(4)),k1(n)&&(n=xI(e,n),e.l||wI(e,n)),e.u&&Q0("Patches").M(t[Rm].t,n,e.u,e.s)):n=xI(e,t,[]),EI(e),e.u&&e.v(e.u,e.s),n!==JJ?n:void 0}function xI(n,e,t){if(bF(e))return e;var i=e[Rm];if(!i)return v$(e,function(o,l){return bG(n,i,e,o,l,t)},!0),e;if(i.A!==n)return e;if(!i.P)return wI(n,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var s=i.i===4||i.i===5?i.o=yF(i.k):i.o;v$(i.i===3?new Set(s):s,function(o,l){return bG(n,i,s,o,l,t)}),wI(n,s,!1),t&&n.u&&Q0("Patches").R(i,t,n.u,n.s)}return i.o}function bG(n,e,t,i,s,o){if(SE(s)){var l=xI(n,s,o&&e&&e.i!==3&&!bN(e.D,i)?o.concat(i):void 0);if(KJ(t,i,l),!SE(l))return;n.m=!1}if(k1(s)&&!bF(s)){if(!n.h.F&&n._<1)return;xI(n,s),e&&e.A.l||wI(n,s)}}function wI(n,e,t){t===void 0&&(t=!1),n.h.F&&n.m&&vF(e,t)}function qO(n,e){var t=n[Rm];return(t?Wb(t):n)[e]}function TG(n,e){if(e in n)for(var t=Object.getPrototypeOf(n);t;){var i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Object.getPrototypeOf(t)}}function SN(n){n.P||(n.P=!0,n.l&&SN(n.l))}function QO(n){n.o||(n.o=yF(n.t))}function EN(n,e,t){var i=gF(e)?Q0("MapSet").N(e,t):_F(e)?Q0("MapSet").T(e,t):n.g?function(s,o){var l=Array.isArray(s),u={i:l?1:0,A:o?o.A:yG(),P:!1,I:!1,D:{},l:o,t:s,k:null,o:null,j:null,C:!1},d=u,p=xN;l&&(d=[u],p=tw);var _=Proxy.revocable(d,p),v=_.revoke,b=_.proxy;return u.k=b,u.j=v,b}(e,t):Q0("ES5").J(e,t);return(t?t.A:yG()).p.push(i),i}function oCe(n){return SE(n)||jg(22,n),function e(t){if(!k1(t))return t;var i,s=t[Rm],o=zE(t);if(s){if(!s.P&&(s.i<4||!Q0("ES5").K(s)))return s.t;s.I=!0,i=SG(t,o),s.I=!1}else i=SG(t,o);return v$(i,function(l,u){s&&nCe(s.t,l)===u||KJ(i,l,e(u))}),o===3?new Set(i):i}(n)}function SG(n,e){switch(e){case 2:return new Map(n);case 3:return Array.from(n)}return yF(n)}var EG,b$,TF=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",aCe=typeof Map<"u",lCe=typeof Set<"u",xG=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",JJ=TF?Symbol.for("immer-nothing"):((EG={})["immer-nothing"]=!0,EG),wG=TF?Symbol.for("immer-draftable"):"__$immer_draftable",Rm=TF?Symbol.for("immer-state"):"__$immer_state",uCe=""+Object.prototype.constructor,SF=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,cCe=Object.getOwnPropertyDescriptors||function(n){var e={};return SF(n).forEach(function(t){e[t]=Object.getOwnPropertyDescriptor(n,t)}),e},hCe={},xN={get:function(n,e){if(e===Rm)return n;var t=Wb(n);if(!bN(t,e))return function(s,o,l){var u,d=TG(o,l);return d?"value"in d?d.value:(u=d.get)===null||u===void 0?void 0:u.call(s.k):void 0}(n,t,e);var i=t[e];return n.I||!k1(i)?i:i===qO(n.t,e)?(QO(n),n.o[e]=EN(n.A.h,i,n)):i},has:function(n,e){return e in Wb(n)},ownKeys:function(n){return Reflect.ownKeys(Wb(n))},set:function(n,e,t){var i=TG(Wb(n),e);if(i!=null&&i.set)return i.set.call(n.k,t),!0;if(!n.P){var s=qO(Wb(n),e),o=s==null?void 0:s[Rm];if(o&&o.t===t)return n.o[e]=t,n.D[e]=!1,!0;if(rCe(t,s)&&(t!==void 0||bN(n.t,e)))return!0;QO(n),SN(n)}return n.o[e]===t&&typeof t!="number"&&(t!==void 0||e in n.o)||(n.o[e]=t,n.D[e]=!0,!0)},deleteProperty:function(n,e){return qO(n.t,e)!==void 0||e in n.t?(n.D[e]=!1,QO(n),SN(n)):delete n.D[e],n.o&&delete n.o[e],!0},getOwnPropertyDescriptor:function(n,e){var t=Wb(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.i!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty:function(){jg(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){jg(12)}},tw={};v$(xN,function(n,e){tw[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),tw.deleteProperty=function(n,e){return tw.set.call(this,n,e,void 0)},tw.set=function(n,e,t){return xN.set.call(this,n[0],e,t,n[0])};var dCe=function(){function n(t){var i=this;this.g=xG,this.F=!0,this.produce=function(s,o,l){if(typeof s=="function"&&typeof o!="function"){var u=o;o=s;var d=i;return function(M){var I=this;M===void 0&&(M=u);for(var L=arguments.length,O=Array(L>1?L-1:0),P=1;P<L;P++)O[P-1]=arguments[P];return d.produce(M,function(B){var z;return(z=o).call.apply(z,[I,B].concat(O))})}}var p;if(typeof o!="function"&&jg(6),l!==void 0&&typeof l!="function"&&jg(7),k1(s)){var _=vG(i),v=EN(i,s,void 0),b=!0;try{p=o(v),b=!1}finally{b?EI(_):TN(_)}return typeof Promise<"u"&&p instanceof Promise?p.then(function(M){return KO(_,l),JO(M,_)},function(M){throw EI(_),M}):(KO(_,l),JO(p,_))}if(!s||typeof s!="object"){if((p=o(s))===void 0&&(p=s),p===JJ&&(p=void 0),i.F&&vF(p,!0),l){var E=[],C=[];Q0("Patches").M(s,p,E,C),l(E,C)}return p}jg(21,s)},this.produceWithPatches=function(s,o){if(typeof s=="function")return function(p){for(var _=arguments.length,v=Array(_>1?_-1:0),b=1;b<_;b++)v[b-1]=arguments[b];return i.produceWithPatches(p,function(E){return s.apply(void 0,[E].concat(v))})};var l,u,d=i.produce(s,o,function(p,_){l=p,u=_});return typeof Promise<"u"&&d instanceof Promise?d.then(function(p){return[p,l,u]}):[d,l,u]},typeof(t==null?void 0:t.useProxies)=="boolean"&&this.setUseProxies(t.useProxies),typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=n.prototype;return e.createDraft=function(t){k1(t)||jg(8),SE(t)&&(t=oCe(t));var i=vG(this),s=EN(this,t,void 0);return s[Rm].C=!0,TN(i),s},e.finishDraft=function(t,i){var s=t&&t[Rm],o=s.A;return KO(o,i),JO(void 0,o)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!xG&&jg(20),this.g=t},e.applyPatches=function(t,i){var s;for(s=i.length-1;s>=0;s--){var o=i[s];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}s>-1&&(i=i.slice(s+1));var l=Q0("Patches").$;return SE(t)?l(t,i):this.produce(t,function(u){return l(u,i)})},n}(),km=new dCe,pCe=km.produce;km.produceWithPatches.bind(km);km.setAutoFreeze.bind(km);km.setUseProxies.bind(km);km.applyPatches.bind(km);km.createDraft.bind(km);km.finishDraft.bind(km);const fCe=n=>(e,t,i)=>(i.setState=(s,o,...l)=>{const u=typeof s=="function"?pCe(s):s;return e(u,o,...l)},n(i.setState,t,i)),mCe=fCe;class gCe{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=_Ce.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function _Ce(){document.hidden===!1&&this.reset()}var sg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,i="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",p=500,_="__lodash_placeholder__",v=1,b=2,E=4,C=1,M=2,I=1,L=2,O=4,P=8,B=16,z=32,G=64,j=128,H=256,Z=512,ae=30,J="...",te=800,he=16,le=1,ce=2,be=3,$e=1/0,q=9007199254740991,oe=17976931348623157e292,se=NaN,pe=4294967295,Se=pe-1,Fe=pe>>>1,Re=[["ary",j],["bind",I],["bindKey",L],["curry",P],["curryRight",B],["flip",Z],["partial",z],["partialRight",G],["rearg",H]],qe="[object Arguments]",Ne="[object Array]",it="[object AsyncFunction]",st="[object Boolean]",pt="[object Date]",dt="[object DOMException]",Ue="[object Error]",Ae="[object Function]",je="[object GeneratorFunction]",nt="[object Map]",tt="[object Number]",Dt="[object Null]",Rt="[object Object]",yt="[object Promise]",Ct="[object Proxy]",Mt="[object RegExp]",mt="[object Set]",xe="[object String]",ie="[object Symbol]",we="[object Undefined]",ct="[object WeakMap]",Tt="[object WeakSet]",At="[object ArrayBuffer]",ft="[object DataView]",Ke="[object Float32Array]",Oe="[object Float64Array]",Q="[object Int8Array]",ne="[object Int16Array]",fe="[object Int32Array]",Ie="[object Uint8Array]",Ye="[object Uint8ClampedArray]",Gt="[object Uint16Array]",He="[object Uint32Array]",Zt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,Kt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yt=/&(?:amp|lt|gt|quot|#39);/g,Rn=/[&<>"']/g,ii=RegExp(Yt.source),Dr=RegExp(Rn.source),Si=/<%-([\s\S]+?)%>/g,xr=/<%([\s\S]+?)%>/g,fr=/<%=([\s\S]+?)%>/g,re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/,Ge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ot=/[\\^$.*+?()[\]{}|]/g,Ft=RegExp(ot.source),nn=/^\s+/,On=/\s/,De=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gt=/\{\n\/\* \[wrapped with (.+)\] \*/,$t=/,? & /,vt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wt=/[()=,{}\[\]\/\s]/,Un=/\\(\\)?/g,tr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mr=/\w*$/,wr=/^[-+]0x[0-9a-f]+$/i,si=/^0b[01]+$/i,Nr=/^\[object .+?Constructor\]$/,jr=/^0o[0-7]+$/i,bs=/^(?:0|[1-9]\d*)$/,Ia=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Eo=/($^)/,Wl=/['\n\r\u2028\u2029\\]/g,en="\\ud800-\\udfff",Ar="\\u0300-\\u036f",qa="\\ufe20-\\ufe2f",Ra="\\u20d0-\\u20ff",Bs=Ar+qa+Ra,Ps="\\u2700-\\u27bf",Li="a-z\\xdf-\\xf6\\xf8-\\xff",Ir="\\xac\\xb1\\xd7\\xf7",Cn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Mr="\\u2000-\\u206f",Ur=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_r="A-Z\\xc0-\\xd6\\xd8-\\xde",Di="\\ufe0e\\ufe0f",Ts=Ir+Cn+Mr+Ur,hi="['’]",fs="["+en+"]",Qa="["+Ts+"]",ka="["+Bs+"]",lc="\\d+",uc="["+Ps+"]",js="["+Li+"]",Yo="[^"+en+Ts+lc+Ps+Li+_r+"]",Vl="\\ud83c[\\udffb-\\udfff]",pu="(?:"+ka+"|"+Vl+")",ch="[^"+en+"]",Ko="(?:\\ud83c[\\udde6-\\uddff]){2}",gr="[\\ud800-\\udbff][\\udc00-\\udfff]",Ei="["+_r+"]",Rc="\\u200d",hh="(?:"+js+"|"+Yo+")",kc="(?:"+Ei+"|"+Yo+")",Tl="(?:"+hi+"(?:d|ll|m|re|s|t|ve))?",fu="(?:"+hi+"(?:D|LL|M|RE|S|T|VE))?",Sl=pu+"?",El="["+Di+"]?",yr="(?:"+Rc+"(?:"+[ch,Ko,gr].join("|")+")"+El+Sl+")*",vr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Za=El+Sl+yr,el="(?:"+[uc,Ko,gr].join("|")+")"+Za,mu="(?:"+[ch+ka+"?",ka,Ko,gr,fs].join("|")+")",Ki=RegExp(hi,"g"),ms=RegExp(ka,"g"),tl=RegExp(Vl+"(?="+Vl+")|"+mu+Za,"g"),Sd=RegExp([Ei+"?"+js+"+"+Tl+"(?="+[Qa,Ei,"$"].join("|")+")",kc+"+"+fu+"(?="+[Qa,Ei+hh,"$"].join("|")+")",Ei+"?"+hh+"+"+Tl,Ei+"+"+fu,jl,vr,lc,el].join("|"),"g"),no=RegExp("["+Rc+en+Bs+Di+"]"),Bu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,aa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],gu=-1,ir={};ir[Ke]=ir[Oe]=ir[Q]=ir[ne]=ir[fe]=ir[Ie]=ir[Ye]=ir[Gt]=ir[He]=!0,ir[qe]=ir[Ne]=ir[At]=ir[st]=ir[ft]=ir[pt]=ir[Ue]=ir[Ae]=ir[nt]=ir[tt]=ir[Rt]=ir[Mt]=ir[mt]=ir[xe]=ir[ct]=!1;var zn={};zn[qe]=zn[Ne]=zn[At]=zn[ft]=zn[st]=zn[pt]=zn[Ke]=zn[Oe]=zn[Q]=zn[ne]=zn[fe]=zn[nt]=zn[tt]=zn[Rt]=zn[Mt]=zn[mt]=zn[xe]=zn[ie]=zn[Ie]=zn[Ye]=zn[Gt]=zn[He]=!0,zn[Ue]=zn[Ae]=zn[ct]=!1;var Ss={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ro={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_u={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dh=parseFloat,Oa=parseInt,la=typeof K_=="object"&&K_&&K_.Object===Object&&K_,Fu=typeof self=="object"&&self&&self.Object===Object&&self,Tr=la||Fu||Function("return this")(),Is=e&&!e.nodeType&&e,yi=Is&&!0&&n&&!n.nodeType&&n,xi=yi&&yi.exports===Is,ua=xi&&la.process,Qr=function(){try{var ye=yi&&yi.require&&yi.require("util").types;return ye||ua&&ua.binding&&ua.binding("util")}catch{}}(),yu=Qr&&Qr.isArrayBuffer,xo=Qr&&Qr.isDate,vu=Qr&&Qr.isMap,nl=Qr&&Qr.isRegExp,Ni=Qr&&Qr.isSet,wi=Qr&&Qr.isTypedArray;function Hn(ye,Ve,Be){switch(Be.length){case 0:return ye.call(Ve);case 1:return ye.call(Ve,Be[0]);case 2:return ye.call(Ve,Be[0],Be[1]);case 3:return ye.call(Ve,Be[0],Be[1],Be[2])}return ye.apply(Ve,Be)}function $i(ye,Ve,Be,kt){for(var tn=-1,Mn=ye==null?0:ye.length;++tn<Mn;){var Xn=ye[tn];Ve(kt,Xn,Be(Xn),ye)}return kt}function Xr(ye,Ve){for(var Be=-1,kt=ye==null?0:ye.length;++Be<kt&&Ve(ye[Be],Be,ye)!==!1;);return ye}function ad(ye,Ve){for(var Be=ye==null?0:ye.length;Be--&&Ve(ye[Be],Be,ye)!==!1;);return ye}function bu(ye,Ve){for(var Be=-1,kt=ye==null?0:ye.length;++Be<kt;)if(!Ve(ye[Be],Be,ye))return!1;return!0}function Gi(ye,Ve){for(var Be=-1,kt=ye==null?0:ye.length,tn=0,Mn=[];++Be<kt;){var Xn=ye[Be];Ve(Xn,Be,ye)&&(Mn[tn++]=Xn)}return Mn}function La(ye,Ve){var Be=ye==null?0:ye.length;return!!Be&&Rs(ye,Ve,0)>-1}function ph(ye,Ve,Be){for(var kt=-1,tn=ye==null?0:ye.length;++kt<tn;)if(Be(Ve,ye[kt]))return!0;return!1}function hr(ye,Ve){for(var Be=-1,kt=ye==null?0:ye.length,tn=Array(kt);++Be<kt;)tn[Be]=Ve(ye[Be],Be,ye);return tn}function Jo(ye,Ve){for(var Be=-1,kt=Ve.length,tn=ye.length;++Be<kt;)ye[tn+Be]=Ve[Be];return ye}function ld(ye,Ve,Be,kt){var tn=-1,Mn=ye==null?0:ye.length;for(kt&&Mn&&(Be=ye[++tn]);++tn<Mn;)Be=Ve(Be,ye[tn],tn,ye);return Be}function np(ye,Ve,Be,kt){var tn=ye==null?0:ye.length;for(kt&&tn&&(Be=ye[--tn]);tn--;)Be=Ve(Be,ye[tn],tn,ye);return Be}function Oc(ye,Ve){for(var Be=-1,kt=ye==null?0:ye.length;++Be<kt;)if(Ve(ye[Be],Be,ye))return!0;return!1}var rp=li("length");function kp(ye){return ye.split("")}function mf(ye){return ye.match(vt)||[]}function Ed(ye,Ve,Be){var kt;return Be(ye,function(tn,Mn,Xn){if(Ve(tn,Mn,Xn))return kt=Mn,!1}),kt}function Xl(ye,Ve,Be,kt){for(var tn=ye.length,Mn=Be+(kt?1:-1);kt?Mn--:++Mn<tn;)if(Ve(ye[Mn],Mn,ye))return Mn;return-1}function Rs(ye,Ve,Be){return Ve===Ve?Dc(ye,Ve,Be):Xl(ye,fh,Be)}function zu(ye,Ve,Be,kt){for(var tn=Be-1,Mn=ye.length;++tn<Mn;)if(kt(ye[tn],Ve))return tn;return-1}function fh(ye){return ye!==ye}function Da(ye,Ve){var Be=ye==null?0:ye.length;return Be?Po(ye,Ve)/Be:se}function li(ye){return function(Ve){return Ve==null?t:Ve[ye]}}function Sr(ye){return function(Ve){return ye==null?t:ye[Ve]}}function io(ye,Ve,Be,kt,tn){return tn(ye,function(Mn,Xn,gn){Be=kt?(kt=!1,Mn):Ve(Be,Mn,Xn,gn)}),Be}function Na(ye,Ve){var Be=ye.length;for(ye.sort(Ve);Be--;)ye[Be]=ye[Be].value;return ye}function Po(ye,Ve){for(var Be,kt=-1,tn=ye.length;++kt<tn;){var Mn=Ve(ye[kt]);Mn!==t&&(Be=Be===t?Mn:Be+Mn)}return Be}function Yl(ye,Ve){for(var Be=-1,kt=Array(ye);++Be<ye;)kt[Be]=Ve(Be);return kt}function Kl(ye,Ve){return hr(Ve,function(Be){return[Be,ye[Be]]})}function Lh(ye){return ye&&ye.slice(0,xl(ye)+1).replace(nn,"")}function Hr(ye){return function(Ve){return ye(Ve)}}function Ci(ye,Ve){return hr(Ve,function(Be){return ye[Be]})}function br(ye,Ve){return ye.has(Ve)}function Wi(ye,Ve){for(var Be=-1,kt=ye.length;++Be<kt&&Rs(Ve,ye[Be],0)>-1;);return Be}function ca(ye,Ve){for(var Be=ye.length;Be--&&Rs(Ve,ye[Be],0)>-1;);return Be}function Tu(ye,Ve){for(var Be=ye.length,kt=0;Be--;)ye[Be]===Ve&&++kt;return kt}var ip=Sr(Ss),sp=Sr(ro);function ud(ye){return"\\"+_u[ye]}function Uu(ye,Ve){return ye==null?t:ye[Ve]}function rl(ye){return no.test(ye)}function Lc(ye){return Bu.test(ye)}function Dh(ye){for(var Ve,Be=[];!(Ve=ye.next()).done;)Be.push(Ve.value);return Be}function Hu(ye){var Ve=-1,Be=Array(ye.size);return ye.forEach(function(kt,tn){Be[++Ve]=[tn,kt]}),Be}function Jl(ye,Ve){return function(Be){return ye(Ve(Be))}}function Fs(ye,Ve){for(var Be=-1,kt=ye.length,tn=0,Mn=[];++Be<kt;){var Xn=ye[Be];(Xn===Ve||Xn===_)&&(ye[Be]=_,Mn[tn++]=Be)}return Mn}function ql(ye){var Ve=-1,Be=Array(ye.size);return ye.forEach(function(kt){Be[++Ve]=kt}),Be}function Nh(ye){var Ve=-1,Be=Array(ye.size);return ye.forEach(function(kt){Be[++Ve]=[kt,kt]}),Be}function Dc(ye,Ve,Be){for(var kt=Be-1,tn=ye.length;++kt<tn;)if(ye[kt]===Ve)return kt;return-1}function Nc(ye,Ve,Be){for(var kt=Be+1;kt--;)if(ye[kt]===Ve)return kt;return kt}function ns(ye){return rl(ye)?Ql(ye):rp(ye)}function Br(ye){return rl(ye)?Su(ye):kp(ye)}function xl(ye){for(var Ve=ye.length;Ve--&&On.test(ye.charAt(Ve)););return Ve}var Ba=Sr(Pu);function Ql(ye){for(var Ve=tl.lastIndex=0;tl.test(ye);)++Ve;return Ve}function Su(ye){return ye.match(tl)||[]}function mh(ye){return ye.match(Sd)||[]}var xd=function ye(Ve){Ve=Ve==null?Tr:di.defaults(Tr.Object(),Ve,di.pick(Tr,aa));var Be=Ve.Array,kt=Ve.Date,tn=Ve.Error,Mn=Ve.Function,Xn=Ve.Math,gn=Ve.Object,Pr=Ve.RegExp,so=Ve.String,vi=Ve.TypeError,oo=Be.prototype,il=Mn.prototype,Bi=gn.prototype,gs=Ve["__core-js_shared__"],Eu=il.toString,Yn=Bi.hasOwnProperty,ha=0,Xs=function(){var c=/[^.]+$/.exec(gs&&gs.keys&&gs.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),zs=Bi.toString,Pa=Eu.call(gn),Bh=Tr._,gh=Pr("^"+Eu.call(Yn).replace(ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cc=xi?Ve.Buffer:t,qo=Ve.Symbol,Bc=Ve.Uint8Array,Ph=cc?cc.allocUnsafe:t,Fa=Jl(gn.getPrototypeOf,gn),Fh=gn.create,hc=Bi.propertyIsEnumerable,Gu=oo.splice,cd=qo?qo.isConcatSpreadable:t,Qo=qo?qo.iterator:t,ao=qo?qo.toStringTag:t,wl=function(){try{var c=ba(gn,"defineProperty");return c({},"",{}),c}catch{}}(),zh=Ve.clearTimeout!==Tr.clearTimeout&&Ve.clearTimeout,Pi=kt&&kt.now!==Tr.Date.now&&kt.now,hd=Ve.setTimeout!==Tr.setTimeout&&Ve.setTimeout,Wu=Xn.ceil,Zl=Xn.floor,Pc=gn.getOwnPropertySymbols,wd=cc?cc.isBuffer:t,$l=Ve.isFinite,$d=oo.join,Uh=Jl(gn.keys,gn),Zr=Xn.max,Mi=Xn.min,gf=kt.now,Op=Ve.parseInt,Cl=Xn.random,eu=oo.reverse,Vu=ba(Ve,"DataView"),ju=ba(Ve,"Map"),_h=ba(Ve,"Promise"),sl=ba(Ve,"Set"),Zo=ba(Ve,"WeakMap"),Ml=ba(gn,"create"),Fc=Zo&&new Zo,Al={},zc=Xa(Vu),dc=Xa(ju),Cd=Xa(_h),za=Xa(sl),Gr=Xa(Zo),ol=qo?qo.prototype:t,Ji=ol?ol.valueOf:t,da=ol?ol.toString:t;function Y(c){if(ci(c)&&!In(c)&&!(c instanceof pn)){if(c instanceof $r)return c;if(Yn.call(c,"__wrapped__"))return Ld(c)}return new $r(c)}var Es=function(){function c(){}return function(m){if(!ni(m))return{};if(Fh)return Fh(m);c.prototype=m;var x=new c;return c.prototype=t,x}}();function pa(){}function $r(c,m){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=t}Y.templateSettings={escape:Si,evaluate:xr,interpolate:fr,variable:"",imports:{_:Y}},Y.prototype=pa.prototype,Y.prototype.constructor=Y,$r.prototype=Es(pa.prototype),$r.prototype.constructor=$r;function pn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=pe,this.__views__=[]}function Lp(){var c=new pn(this.__wrapped__);return c.__actions__=ti(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=ti(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=ti(this.__views__),c}function al(){if(this.__filtered__){var c=new pn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Ai(){var c=this.__wrapped__.value(),m=this.__dir__,x=In(c),D=m<0,U=x?c.length:0,K=mn(0,U,this.__views__),ue=K.start,me=K.end,Ee=me-ue,Ze=D?me:ue-1,et=this.__iteratees__,ut=et.length,It=0,Xt=Mi(Ee,this.__takeCount__);if(!x||!D&&U==Ee&&Xt==Ee)return Yc(c,this.__actions__);var dn=[];e:for(;Ee--&&It<Xt;){Ze+=m;for(var kn=-1,cn=c[Ze];++kn<ut;){var Wn=et[kn],qn=Wn.iteratee,oa=Wn.type,Zs=qn(cn);if(oa==ce)cn=Zs;else if(!Zs){if(oa==le)continue e;break e}}dn[It++]=cn}return dn}pn.prototype=Es(pa.prototype),pn.prototype.constructor=pn;function ui(c){var m=-1,x=c==null?0:c.length;for(this.clear();++m<x;){var D=c[m];this.set(D[0],D[1])}}function qi(){this.__data__=Ml?Ml(null):{},this.size=0}function rs(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m}function Uc(c){var m=this.__data__;if(Ml){var x=m[c];return x===d?t:x}return Yn.call(m,c)?m[c]:t}function fa(c){var m=this.__data__;return Ml?m[c]!==t:Yn.call(m,c)}function ma(c,m){var x=this.__data__;return this.size+=this.has(c)?0:1,x[c]=Ml&&m===t?d:m,this}ui.prototype.clear=qi,ui.prototype.delete=rs,ui.prototype.get=Uc,ui.prototype.has=fa,ui.prototype.set=ma;function is(c){var m=-1,x=c==null?0:c.length;for(this.clear();++m<x;){var D=c[m];this.set(D[0],D[1])}}function Hc(){this.__data__=[],this.size=0}function ea(c){var m=this.__data__,x=_s(m,c);if(x<0)return!1;var D=m.length-1;return x==D?m.pop():Gu.call(m,x,1),--this.size,!0}function Md(c){var m=this.__data__,x=_s(m,c);return x<0?t:m[x][1]}function Ad(c){return _s(this.__data__,c)>-1}function Hh(c,m){var x=this.__data__,D=_s(x,c);return D<0?(++this.size,x.push([c,m])):x[D][1]=m,this}is.prototype.clear=Hc,is.prototype.delete=ea,is.prototype.get=Md,is.prototype.has=Ad,is.prototype.set=Hh;function Us(c){var m=-1,x=c==null?0:c.length;for(this.clear();++m<x;){var D=c[m];this.set(D[0],D[1])}}function jn(){this.size=0,this.__data__={hash:new ui,map:new(ju||is),string:new ui}}function Hs(c){var m=Jc(this,c).delete(c);return this.size-=m?1:0,m}function Ys(c){return Jc(this,c).get(c)}function Fi(c){return Jc(this,c).has(c)}function tu(c,m){var x=Jc(this,c),D=x.size;return x.set(c,m),this.size+=x.size==D?0:1,this}Us.prototype.clear=jn,Us.prototype.delete=Hs,Us.prototype.get=Ys,Us.prototype.has=Fi,Us.prototype.set=tu;function Fo(c){var m=-1,x=c==null?0:c.length;for(this.__data__=new Us;++m<x;)this.add(c[m])}function En(c){return this.__data__.set(c,d),this}function pi(c){return this.__data__.has(c)}Fo.prototype.add=Fo.prototype.push=En,Fo.prototype.has=pi;function fi(c){var m=this.__data__=new is(c);this.size=m.size}function Dp(){this.__data__=new is,this.size=0}function yh(c){var m=this.__data__,x=m.delete(c);return this.size=m.size,x}function lo(c){return this.__data__.get(c)}function ga(c){return this.__data__.has(c)}function wn(c,m){var x=this.__data__;if(x instanceof is){var D=x.__data__;if(!ju||D.length<s-1)return D.push([c,m]),this.size=++x.size,this;x=this.__data__=new Us(D)}return x.set(c,m),this.size=x.size,this}fi.prototype.clear=Dp,fi.prototype.delete=yh,fi.prototype.get=lo,fi.prototype.has=ga,fi.prototype.set=wn;function _n(c,m){var x=In(c),D=!x&&Hd(c),U=!x&&!D&&nh(c),K=!x&&!D&&!U&&Vd(c),ue=x||D||U||K,me=ue?Yl(c.length,so):[],Ee=me.length;for(var Ze in c)(m||Yn.call(c,Ze))&&!(ue&&(Ze=="length"||U&&(Ze=="offset"||Ze=="parent")||K&&(Ze=="buffer"||Ze=="byteLength"||Ze=="byteOffset")||ja(Ze,Ee)))&&me.push(Ze);return me}function ll(c){var m=c.length;return m?c[ks(0,m-1)]:t}function pc(c,m){return dr(ti(c),Ua(m,0,c.length))}function _f(c){return dr(ti(c))}function nu(c,m,x){(x!==t&&!xa(c[m],x)||x===t&&!(m in c))&&zo(c,m,x)}function wo(c,m,x){var D=c[m];(!(Yn.call(c,m)&&xa(D,x))||x===t&&!(m in c))&&zo(c,m,x)}function _s(c,m){for(var x=c.length;x--;)if(xa(c[x][0],m))return x;return-1}function ul(c,m,x,D){return $o(c,function(U,K,ue){m(D,U,x(U),ue)}),D}function ss(c,m){return c&&ls(m,Ti(m),c)}function cl(c,m){return c&&ls(m,es(m),c)}function zo(c,m,x){m=="__proto__"&&wl?wl(c,m,{configurable:!0,enumerable:!0,value:x,writable:!0}):c[m]=x}function Gh(c,m){for(var x=-1,D=m.length,U=Be(D),K=c==null;++x<D;)U[x]=K?t:hm(c,m[x]);return U}function Ua(c,m,x){return c===c&&(x!==t&&(c=c<=x?c:x),m!==t&&(c=c>=m?c:m)),c}function Ii(c,m,x,D,U,K){var ue,me=m&v,Ee=m&b,Ze=m&E;if(x&&(ue=U?x(c,D,U,K):x(c)),ue!==t)return ue;if(!ni(c))return c;var et=In(c);if(et){if(ue=Um(c),!me)return ti(c,ue)}else{var ut=us(c),It=ut==Ae||ut==je;if(nh(c))return Kc(c,me);if(ut==Rt||ut==qe||It&&!U){if(ue=Ee||It?{}:bc(c),!me)return Ee?fd(c,cl(ue,c)):jh(c,ss(ue,c))}else{if(!zn[ut])return U?c:{};ue=qs(c,ut,me)}}K||(K=new fi);var Xt=K.get(c);if(Xt)return Xt;K.set(c,ue),f_(c)?c.forEach(function(cn){ue.add(Ii(cn,m,x,cn,c,K))}):Jh(c)&&c.forEach(function(cn,Wn){ue.set(Wn,Ii(cn,m,x,Wn,c,K))});var dn=Ze?Ee?Cr:cr:Ee?es:Ti,kn=et?t:dn(c);return Xr(kn||c,function(cn,Wn){kn&&(Wn=cn,cn=c[Wn]),wo(ue,Wn,Ii(cn,m,x,Wn,c,K))}),ue}function Id(c){var m=Ti(c);return function(x){return Gc(x,c,m)}}function Gc(c,m,x){var D=x.length;if(c==null)return!D;for(c=gn(c);D--;){var U=x[D],K=m[U],ue=c[U];if(ue===t&&!(U in c)||!K(ue))return!1}return!0}function Wh(c,m,x){if(typeof c!="function")throw new vi(l);return cp(function(){c.apply(t,x)},m)}function Uo(c,m,x,D){var U=-1,K=La,ue=!0,me=c.length,Ee=[],Ze=m.length;if(!me)return Ee;x&&(m=hr(m,Hr(x))),D?(K=ph,ue=!1):m.length>=s&&(K=br,ue=!1,m=new Fo(m));e:for(;++U<me;){var et=c[U],ut=x==null?et:x(et);if(et=D||et!==0?et:0,ue&&ut===ut){for(var It=Ze;It--;)if(m[It]===ut)continue e;Ee.push(et)}else K(m,ut,D)||Ee.push(et)}return Ee}var $o=Xh(os),op=Xh(Ha,!0);function xu(c,m){var x=!0;return $o(c,function(D,U,K){return x=!!m(D,U,K),x}),x}function Il(c,m,x){for(var D=-1,U=c.length;++D<U;){var K=c[D],ue=m(K);if(ue!=null&&(me===t?ue===ue&&!sa(ue):x(ue,me)))var me=ue,Ee=K}return Ee}function dd(c,m,x,D){var U=c.length;for(x=$n(x),x<0&&(x=-x>U?0:U+x),D=D===t||D>U?U:$n(D),D<0&&(D+=U),D=x>D?0:b0(D);x<D;)c[x++]=m;return c}function fc(c,m){var x=[];return $o(c,function(D,U,K){m(D,U,K)&&x.push(D)}),x}function Yr(c,m,x,D,U){var K=-1,ue=c.length;for(x||(x=Rd),U||(U=[]);++K<ue;){var me=c[K];m>0&&x(me)?m>1?Yr(me,m-1,x,D,U):Jo(U,me):D||(U[U.length]=me)}return U}var ru=vc(),Xu=vc(!0);function os(c,m){return c&&ru(c,m,Ti)}function Ha(c,m){return c&&Xu(c,m,Ti)}function xs(c,m){return Gi(m,function(x){return Ec(c[x])})}function ws(c,m){m=na(m,c);for(var x=0,D=m.length;c!=null&&x<D;)c=c[_o(m[x++])];return x&&x==D?c:t}function Wc(c,m,x){var D=m(c);return In(c)?D:Jo(D,x(c))}function mi(c){return c==null?c===t?we:Dt:ao&&ao in gn(c)?pl(c):vg(c)}function Ga(c,m){return c>m}function mc(c,m){return c!=null&&Yn.call(c,m)}function ap(c,m){return c!=null&&m in gn(c)}function vh(c,m,x){return c>=Mi(m,x)&&c<Zr(m,x)}function ta(c,m,x){for(var D=x?ph:La,U=c[0].length,K=c.length,ue=K,me=Be(K),Ee=1/0,Ze=[];ue--;){var et=c[ue];ue&&m&&(et=hr(et,Hr(m))),Ee=Mi(et.length,Ee),me[ue]=!x&&(m||U>=120&&et.length>=120)?new Fo(ue&&et):t}et=c[0];var ut=-1,It=me[0];e:for(;++ut<U&&Ze.length<Ee;){var Xt=et[ut],dn=m?m(Xt):Xt;if(Xt=x||Xt!==0?Xt:0,!(It?br(It,dn):D(Ze,dn,x))){for(ue=K;--ue;){var kn=me[ue];if(!(kn?br(kn,dn):D(c[ue],dn,x)))continue e}It&&It.push(dn),Ze.push(Xt)}}return Ze}function Vi(c,m,x,D){return os(c,function(U,K,ue){m(D,x(U),K,ue)}),D}function Dn(c,m,x){m=na(m,c),c=bf(c,m);var D=c==null?c:c[_o(Os(m))];return D==null?t:Hn(D,c,x)}function Zn(c){return ci(c)&&mi(c)==qe}function Or(c){return ci(c)&&mi(c)==At}function ei(c){return ci(c)&&mi(c)==pt}function Jr(c,m,x,D,U){return c===m?!0:c==null||m==null||!ci(c)&&!ci(m)?c!==c&&m!==m:Co(c,m,x,D,Jr,U)}function Co(c,m,x,D,U,K){var ue=In(c),me=In(m),Ee=ue?Ne:us(c),Ze=me?Ne:us(m);Ee=Ee==qe?Rt:Ee,Ze=Ze==qe?Rt:Ze;var et=Ee==Rt,ut=Ze==Rt,It=Ee==Ze;if(It&&nh(c)){if(!nh(m))return!1;ue=!0,et=!1}if(It&&!et)return K||(K=new fi),ue||Vd(c)?rn(c,m,x,D,U,K):Sn(c,m,Ee,x,D,U,K);if(!(x&C)){var Xt=et&&Yn.call(c,"__wrapped__"),dn=ut&&Yn.call(m,"__wrapped__");if(Xt||dn){var kn=Xt?c.value():c,cn=dn?m.value():m;return K||(K=new fi),U(kn,cn,x,D,K)}}return It?(K||(K=new fi),An(c,m,x,D,U,K)):!1}function as(c){return ci(c)&&us(c)==nt}function Qi(c,m,x,D){var U=x.length,K=U,ue=!D;if(c==null)return!K;for(c=gn(c);U--;){var me=x[U];if(ue&&me[2]?me[1]!==c[me[0]]:!(me[0]in c))return!1}for(;++U<K;){me=x[U];var Ee=me[0],Ze=c[Ee],et=me[1];if(ue&&me[2]){if(Ze===t&&!(Ee in c))return!1}else{var ut=new fi;if(D)var It=D(Ze,et,Ee,c,m,ut);if(!(It===t?Jr(et,Ze,C|M,D,ut):It))return!1}}return!0}function iu(c){if(!ni(c)||Qs(c))return!1;var m=Ec(c)?gh:Nr;return m.test(Xa(c))}function Yu(c){return ci(c)&&mi(c)==Mt}function gc(c){return ci(c)&&us(c)==mt}function Ku(c){return ci(c)&&xh(c.length)&&!!ir[mi(c)]}function Ks(c){return typeof c=="function"?c:c==null?Ro:typeof c=="object"?In(c)?co(c[0],c[1]):$u(c):M_(c)}function uo(c){if(!Tc(c))return Uh(c);var m=[];for(var x in gn(c))Yn.call(c,x)&&x!="constructor"&&m.push(x);return m}function pd(c){if(!ni(c))return Sa(c);var m=Tc(c),x=[];for(var D in c)D=="constructor"&&(m||!Yn.call(c,D))||x.push(D);return x}function _a(c,m){return c<m}function wu(c,m){var x=-1,D=zi(c)?Be(c.length):[];return $o(c,function(U,K,ue){D[++x]=m(U,K,ue)}),D}function $u(c){var m=jf(c);return m.length==1&&m[0][2]?Xf(m[0][0],m[0][1]):function(x){return x===c||Qi(x,c,m)}}function co(c,m){return Ta(c)&&yf(m)?Xf(_o(c),m):function(x){var D=hm(x,c);return D===t&&D===m?dm(x,c):Jr(m,D,C|M)}}function ho(c,m,x,D,U){c!==m&&ru(m,function(K,ue){if(U||(U=new fi),ni(K))Rl(c,m,ue,x,ho,D,U);else{var me=D?D(au(c,ue),K,ue+"",c,m,U):t;me===t&&(me=K),nu(c,ue,me)}},es)}function Rl(c,m,x,D,U,K,ue){var me=au(c,x),Ee=au(m,x),Ze=ue.get(Ee);if(Ze){nu(c,x,Ze);return}var et=K?K(me,Ee,x+"",c,m,ue):t,ut=et===t;if(ut){var It=In(Ee),Xt=!It&&nh(Ee),dn=!It&&!Xt&&Vd(Ee);et=Ee,It||Xt||dn?In(me)?et=me:Kr(me)?et=ti(me):Xt?(ut=!1,et=Kc(Ee,!0)):dn?(ut=!1,et=Ol(Ee,!0)):et=[]:zr(Ee)||Hd(Ee)?(et=me,Hd(me)?et=Gv(me):(!ni(me)||Ec(me))&&(et=bc(Ee))):ut=!1}ut&&(ue.set(Ee,et),U(et,Ee,D,K,ue),ue.delete(Ee)),nu(c,x,et)}function Ho(c,m){var x=c.length;if(x)return m+=m<0?x:0,ja(m,x)?c[m]:t}function Ju(c,m,x){m.length?m=hr(m,function(K){return In(K)?function(ue){return ws(ue,K.length===1?K[0]:K)}:K}):m=[Ro];var D=-1;m=hr(m,Hr(on()));var U=wu(c,function(K,ue,me){var Ee=hr(m,function(Ze){return Ze(K)});return{criteria:Ee,index:++D,value:K}});return Na(U,function(K,ue){return Ll(K,ue,x)})}function qu(c,m){return bh(c,m,function(x,D){return dm(c,D)})}function bh(c,m,x){for(var D=-1,U=m.length,K={};++D<U;){var ue=m[D],me=ws(c,ue);x(me,ue)&&gi(K,na(ue,c),me)}return K}function Th(c){return function(m){return ws(m,c)}}function Rr(c,m,x,D){var U=D?zu:Rs,K=-1,ue=m.length,me=c;for(c===m&&(m=ti(m)),x&&(me=hr(c,Hr(x)));++K<ue;)for(var Ee=0,Ze=m[K],et=x?x(Ze):Ze;(Ee=U(me,et,Ee,D))>-1;)me!==c&&Gu.call(me,Ee,1),Gu.call(c,Ee,1);return c}function ys(c,m){for(var x=c?m.length:0,D=x-1;x--;){var U=m[x];if(x==D||U!==K){var K=U;ja(U)?Gu.call(c,U,1):Xc(c,U)}}return c}function ks(c,m){return c+Zl(Cl()*(m-c+1))}function Wa(c,m,x,D){for(var U=-1,K=Zr(Wu((m-c)/(x||1)),0),ue=Be(K);K--;)ue[D?K:++U]=c,c+=x;return ue}function Gs(c,m){var x="";if(!c||m<1||m>q)return x;do m%2&&(x+=c),m=Zl(m/2),m&&(c+=c);while(m);return x}function hn(c,m){return Od(Yf(c,m,Ro),c+"")}function Vc(c){return ll(mp(c))}function Tn(c,m){var x=mp(c);return dr(x,Ua(m,0,x.length))}function gi(c,m,x,D){if(!ni(c))return c;m=na(m,c);for(var U=-1,K=m.length,ue=K-1,me=c;me!=null&&++U<K;){var Ee=_o(m[U]),Ze=x;if(Ee==="__proto__"||Ee==="constructor"||Ee==="prototype")return c;if(U!=ue){var et=me[Ee];Ze=D?D(et,Ee,me):t,Ze===t&&(Ze=ni(et)?et:ja(m[U+1])?[]:{})}wo(me,Ee,Ze),me=me[Ee]}return c}var $s=Fc?function(c,m){return Fc.set(c,m),c}:Ro,su=wl?function(c,m){return wl(c,"toString",{configurable:!0,enumerable:!1,value:w_(m),writable:!0})}:Ro;function kl(c){return dr(mp(c))}function Pt(c,m,x){var D=-1,U=c.length;m<0&&(m=-m>U?0:U+m),x=x>U?U:x,x<0&&(x+=U),U=m>x?0:x-m>>>0,m>>>=0;for(var K=Be(U);++D<U;)K[D]=c[D+m];return K}function hl(c,m){var x;return $o(c,function(D,U,K){return x=m(D,U,K),!x}),!!x}function Wr(c,m,x){var D=0,U=c==null?D:c.length;if(typeof m=="number"&&m===m&&U<=Fe){for(;D<U;){var K=D+U>>>1,ue=c[K];ue!==null&&!sa(ue)&&(x?ue<=m:ue<m)?D=K+1:U=K}return U}return Qu(c,m,Ro,x)}function Qu(c,m,x,D){var U=0,K=c==null?0:c.length;if(K===0)return 0;m=x(m);for(var ue=m!==m,me=m===null,Ee=sa(m),Ze=m===t;U<K;){var et=Zl((U+K)/2),ut=x(c[et]),It=ut!==t,Xt=ut===null,dn=ut===ut,kn=sa(ut);if(ue)var cn=D||dn;else Ze?cn=dn&&(D||It):me?cn=dn&&It&&(D||!Xt):Ee?cn=dn&&It&&!Xt&&(D||!kn):Xt||kn?cn=!1:cn=D?ut<=m:ut<m;cn?U=et+1:K=et}return Mi(K,Se)}function Vh(c,m){for(var x=-1,D=c.length,U=0,K=[];++x<D;){var ue=c[x],me=m?m(ue):ue;if(!x||!xa(me,Ee)){var Ee=me;K[U++]=ue===0?0:ue}}return K}function jc(c){return typeof c=="number"?c:sa(c)?se:+c}function oi(c){if(typeof c=="string")return c;if(In(c))return hr(c,oi)+"";if(sa(c))return da?da.call(c):"";var m=c+"";return m=="0"&&1/c==-$e?"-0":m}function ji(c,m,x){var D=-1,U=La,K=c.length,ue=!0,me=[],Ee=me;if(x)ue=!1,U=ph;else if(K>=s){var Ze=m?null:Lr(c);if(Ze)return ql(Ze);ue=!1,U=br,Ee=new Fo}else Ee=m?[]:me;e:for(;++D<K;){var et=c[D],ut=m?m(et):et;if(et=x||et!==0?et:0,ue&&ut===ut){for(var It=Ee.length;It--;)if(Ee[It]===ut)continue e;m&&Ee.push(ut),me.push(et)}else U(Ee,ut,x)||(Ee!==me&&Ee.push(ut),me.push(et))}return me}function Xc(c,m){return m=na(m,c),c=bf(c,m),c==null||delete c[_o(Os(m))]}function po(c,m,x,D){return gi(c,m,x(ws(c,m)),D)}function dl(c,m,x,D){for(var U=c.length,K=D?U:-1;(D?K--:++K<U)&&m(c[K],K,c););return x?Pt(c,D?0:K,D?K+1:U):Pt(c,D?K+1:0,D?U:K)}function Yc(c,m){var x=c;return x instanceof pn&&(x=x.value()),ld(m,function(D,U){return U.func.apply(U.thisArg,Jo([D],U.args))},x)}function _c(c,m,x){var D=c.length;if(D<2)return D?ji(c[0]):[];for(var U=-1,K=Be(D);++U<D;)for(var ue=c[U],me=-1;++me<D;)me!=U&&(K[U]=Uo(K[U]||ue,c[me],m,x));return ji(Yr(K,1),m,x)}function Zu(c,m,x){for(var D=-1,U=c.length,K=m.length,ue={};++D<U;){var me=D<K?m[D]:t;x(ue,c[D],me)}return ue}function Mo(c){return Kr(c)?c:[]}function Js(c){return typeof c=="function"?c:Ro}function na(c,m){return In(c)?c:Ta(c,m)?[c]:a0(rr(c))}var Sh=hn;function fo(c,m,x){var D=c.length;return x=x===t?D:x,!m&&x>=D?c:Pt(c,m,x)}var Cu=zh||function(c){return Tr.clearTimeout(c)};function Kc(c,m){if(m)return c.slice();var x=c.length,D=Ph?Ph(x):new c.constructor(x);return c.copy(D),D}function yc(c){var m=new c.constructor(c.byteLength);return new Bc(m).set(new Bc(c)),m}function Go(c,m){var x=m?yc(c.buffer):c.buffer;return new c.constructor(x,c.byteOffset,c.byteLength)}function mo(c){var m=new c.constructor(c.source,mr.exec(c));return m.lastIndex=c.lastIndex,m}function ec(c){return Ji?gn(Ji.call(c)):{}}function Ol(c,m){var x=m?yc(c.buffer):c.buffer;return new c.constructor(x,c.byteOffset,c.length)}function go(c,m){if(c!==m){var x=c!==t,D=c===null,U=c===c,K=sa(c),ue=m!==t,me=m===null,Ee=m===m,Ze=sa(m);if(!me&&!Ze&&!K&&c>m||K&&ue&&Ee&&!me&&!Ze||D&&ue&&Ee||!x&&Ee||!U)return 1;if(!D&&!K&&!Ze&&c<m||Ze&&x&&U&&!D&&!K||me&&x&&U||!ue&&U||!Ee)return-1}return 0}function Ll(c,m,x){for(var D=-1,U=c.criteria,K=m.criteria,ue=U.length,me=x.length;++D<ue;){var Ee=go(U[D],K[D]);if(Ee){if(D>=me)return Ee;var Ze=x[D];return Ee*(Ze=="desc"?-1:1)}}return c.index-m.index}function Va(c,m,x,D){for(var U=-1,K=c.length,ue=x.length,me=-1,Ee=m.length,Ze=Zr(K-ue,0),et=Be(Ee+Ze),ut=!D;++me<Ee;)et[me]=m[me];for(;++U<ue;)(ut||U<K)&&(et[x[U]]=c[U]);for(;Ze--;)et[me++]=c[U++];return et}function ou(c,m,x,D){for(var U=-1,K=c.length,ue=-1,me=x.length,Ee=-1,Ze=m.length,et=Zr(K-me,0),ut=Be(et+Ze),It=!D;++U<et;)ut[U]=c[U];for(var Xt=U;++Ee<Ze;)ut[Xt+Ee]=m[Ee];for(;++ue<me;)(It||U<K)&&(ut[Xt+x[ue]]=c[U++]);return ut}function ti(c,m){var x=-1,D=c.length;for(m||(m=Be(D));++x<D;)m[x]=c[x];return m}function ls(c,m,x,D){var U=!x;x||(x={});for(var K=-1,ue=m.length;++K<ue;){var me=m[K],Ee=D?D(x[me],c[me],me,x,c):t;Ee===t&&(Ee=c[me]),U?zo(x,me,Ee):wo(x,me,Ee)}return x}function jh(c,m){return ls(c,up(c),m)}function fd(c,m){return ls(c,Yh(c),m)}function ya(c,m){return function(x,D){var U=In(x)?$i:ul,K=m?m():{};return U(x,c,on(D,2),K)}}function va(c){return hn(function(m,x){var D=-1,U=x.length,K=U>1?x[U-1]:t,ue=U>2?x[2]:t;for(K=c.length>3&&typeof K=="function"?(U--,K):t,ue&&Fr(x[0],x[1],ue)&&(K=U<3?t:K,U=1),m=gn(m);++D<U;){var me=x[D];me&&c(m,me,D,K)}return m})}function Xh(c,m){return function(x,D){if(x==null)return x;if(!zi(x))return c(x,D);for(var U=x.length,K=m?U:-1,ue=gn(x);(m?K--:++K<U)&&D(ue[K],K,ue)!==!1;);return x}}function vc(c){return function(m,x,D){for(var U=-1,K=gn(m),ue=D(m),me=ue.length;me--;){var Ee=ue[c?me:++U];if(x(K[Ee],Ee,K)===!1)break}return m}}function Np(c,m,x){var D=m&I,U=g(c);function K(){var ue=this&&this!==Tr&&this instanceof K?U:c;return ue.apply(D?x:this,arguments)}return K}function w(c){return function(m){m=rr(m);var x=rl(m)?Br(m):t,D=x?x[0]:m.charAt(0),U=x?fo(x,1).join(""):m.slice(1);return D[c]()+U}}function h(c){return function(m){return ld(rb(xy(m).replace(Ki,"")),c,"")}}function g(c){return function(){var m=arguments;switch(m.length){case 0:return new c;case 1:return new c(m[0]);case 2:return new c(m[0],m[1]);case 3:return new c(m[0],m[1],m[2]);case 4:return new c(m[0],m[1],m[2],m[3]);case 5:return new c(m[0],m[1],m[2],m[3],m[4]);case 6:return new c(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new c(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var x=Es(c.prototype),D=c.apply(x,m);return ni(D)?D:x}}function $(c,m,x){var D=g(c);function U(){for(var K=arguments.length,ue=Be(K),me=K,Ee=Eh(U);me--;)ue[me]=arguments[me];var Ze=K<3&&ue[0]!==Ee&&ue[K-1]!==Ee?[]:Fs(ue,Ee);if(K-=Ze.length,K<x)return vn(c,m,W,U.placeholder,t,ue,Ze,t,t,x-K);var et=this&&this!==Tr&&this instanceof U?D:c;return Hn(et,this,ue)}return U}function A(c){return function(m,x,D){var U=gn(m);if(!zi(m)){var K=on(x,3);m=Ti(m),x=function(me){return K(U[me],me,U)}}var ue=c(m,x,D);return ue>-1?U[K?m[ue]:ue]:t}}function N(c){return Bn(function(m){var x=m.length,D=x,U=$r.prototype.thru;for(c&&m.reverse();D--;){var K=m[D];if(typeof K!="function")throw new vi(l);if(U&&!ue&&lp(K)=="wrapper")var ue=new $r([],!0)}for(D=ue?D:x;++D<x;){K=m[D];var me=lp(K),Ee=me=="wrapper"?Dl(K):t;Ee&&Ri(Ee[0])&&Ee[1]==(j|P|z|H)&&!Ee[4].length&&Ee[9]==1?ue=ue[lp(Ee[0])].apply(ue,Ee[3]):ue=K.length==1&&Ri(K)?ue[me]():ue.thru(K)}return function(){var Ze=arguments,et=Ze[0];if(ue&&Ze.length==1&&In(et))return ue.plant(et).value();for(var ut=0,It=x?m[ut].apply(this,Ze):et;++ut<x;)It=m[ut].call(this,It);return It}})}function W(c,m,x,D,U,K,ue,me,Ee,Ze){var et=m&j,ut=m&I,It=m&L,Xt=m&(P|B),dn=m&Z,kn=It?t:g(c);function cn(){for(var Wn=arguments.length,qn=Be(Wn),oa=Wn;oa--;)qn[oa]=arguments[oa];if(Xt)var Zs=Eh(cn),Ds=Tu(qn,Zs);if(D&&(qn=Va(qn,D,U,Xt)),K&&(qn=ou(qn,K,ue,Xt)),Wn-=Ds,Xt&&Wn<Ze){var _i=Fs(qn,Zs);return vn(c,m,W,cn.placeholder,x,qn,_i,me,Ee,Ze-Wn)}var Fl=ut?x:this,wc=It?Fl[c]:c;return Wn=qn.length,me?qn=fl(qn,me):dn&&Wn>1&&qn.reverse(),et&&Ee<Wn&&(qn.length=Ee),this&&this!==Tr&&this instanceof cn&&(wc=kn||g(wc)),wc.apply(Fl,qn)}return cn}function de(c,m){return function(x,D){return Vi(x,c,m(D),{})}}function ke(c,m){return function(x,D){var U;if(x===t&&D===t)return m;if(x!==t&&(U=x),D!==t){if(U===t)return D;typeof x=="string"||typeof D=="string"?(x=oi(x),D=oi(D)):(x=jc(x),D=jc(D)),U=c(x,D)}return U}}function Qe(c){return Bn(function(m){return m=hr(m,Hr(on())),hn(function(x){var D=this;return c(m,function(U){return Hn(U,D,x)})})})}function St(c,m){m=m===t?" ":oi(m);var x=m.length;if(x<2)return x?Gs(m,c):m;var D=Gs(m,Wu(c/ns(m)));return rl(m)?fo(Br(D),0,c).join(""):D.slice(0,c)}function Jt(c,m,x,D){var U=m&I,K=g(c);function ue(){for(var me=-1,Ee=arguments.length,Ze=-1,et=D.length,ut=Be(et+Ee),It=this&&this!==Tr&&this instanceof ue?K:c;++Ze<et;)ut[Ze]=D[Ze];for(;Ee--;)ut[Ze++]=arguments[++me];return Hn(It,U?x:this,ut)}return ue}function ln(c){return function(m,x,D){return D&&typeof D!="number"&&Fr(m,x,D)&&(x=D=t),m=xc(m),x===t?(x=m,m=0):x=xc(x),D=D===t?m<x?1:-1:xc(D),Wa(m,x,D,c)}}function yn(c){return function(m,x){return typeof m=="string"&&typeof x=="string"||(m=Xi(m),x=Xi(x)),c(m,x)}}function vn(c,m,x,D,U,K,ue,me,Ee,Ze){var et=m&P,ut=et?ue:t,It=et?t:ue,Xt=et?K:t,dn=et?t:K;m|=et?z:G,m&=~(et?G:z),m&O||(m&=~(I|L));var kn=[c,m,U,Xt,ut,dn,It,me,Ee,Ze],cn=x.apply(t,kn);return Ri(c)&&kd(cn,kn),cn.placeholder=D,qc(cn,c,m)}function fn(c){var m=Xn[c];return function(x,D){if(x=Xi(x),D=D==null?0:Mi($n(D),292),D&&$l(x)){var U=(rr(x)+"e").split("e"),K=m(U[0]+"e"+(+U[1]+D));return U=(rr(K)+"e").split("e"),+(U[0]+"e"+(+U[1]-D))}return m(x)}}var Lr=sl&&1/ql(new sl([,-0]))[1]==$e?function(c){return new sl(c)}:I0;function bt(c){return function(m){var x=us(m);return x==nt?Hu(m):x==mt?Nh(m):Kl(m,c(m))}}function Ce(c,m,x,D,U,K,ue,me){var Ee=m&L;if(!Ee&&typeof c!="function")throw new vi(l);var Ze=D?D.length:0;if(Ze||(m&=~(z|G),D=U=t),ue=ue===t?ue:Zr($n(ue),0),me=me===t?me:$n(me),Ze-=U?U.length:0,m&G){var et=D,ut=U;D=U=t}var It=Ee?t:Dl(c),Xt=[c,m,x,D,U,et,ut,K,ue,me];if(It&&vf(Xt,It),c=Xt[0],m=Xt[1],x=Xt[2],D=Xt[3],U=Xt[4],me=Xt[9]=Xt[9]===t?Ee?0:c.length:Zr(Xt[9]-Ze,0),!me&&m&(P|B)&&(m&=~(P|B)),!m||m==I)var dn=Np(c,m,x);else m==P||m==B?dn=$(c,m,me):(m==z||m==(I|z))&&!U.length?dn=Jt(c,m,x,D):dn=W.apply(t,Xt);var kn=It?$s:kd;return qc(kn(dn,Xt),c,m)}function Le(c,m,x,D){return c===t||xa(c,Bi[x])&&!Yn.call(D,x)?m:c}function rt(c,m,x,D,U,K){return ni(c)&&ni(m)&&(K.set(m,c),ho(c,m,t,rt,K),K.delete(m)),c}function Ut(c){return zr(c)?t:c}function rn(c,m,x,D,U,K){var ue=x&C,me=c.length,Ee=m.length;if(me!=Ee&&!(ue&&Ee>me))return!1;var Ze=K.get(c),et=K.get(m);if(Ze&&et)return Ze==m&&et==c;var ut=-1,It=!0,Xt=x&M?new Fo:t;for(K.set(c,m),K.set(m,c);++ut<me;){var dn=c[ut],kn=m[ut];if(D)var cn=ue?D(kn,dn,ut,m,c,K):D(dn,kn,ut,c,m,K);if(cn!==t){if(cn)continue;It=!1;break}if(Xt){if(!Oc(m,function(Wn,qn){if(!br(Xt,qn)&&(dn===Wn||U(dn,Wn,x,D,K)))return Xt.push(qn)})){It=!1;break}}else if(!(dn===kn||U(dn,kn,x,D,K))){It=!1;break}}return K.delete(c),K.delete(m),It}function Sn(c,m,x,D,U,K,ue){switch(x){case ft:if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case At:return!(c.byteLength!=m.byteLength||!K(new Bc(c),new Bc(m)));case st:case pt:case tt:return xa(+c,+m);case Ue:return c.name==m.name&&c.message==m.message;case Mt:case xe:return c==m+"";case nt:var me=Hu;case mt:var Ee=D&C;if(me||(me=ql),c.size!=m.size&&!Ee)return!1;var Ze=ue.get(c);if(Ze)return Ze==m;D|=M,ue.set(c,m);var et=rn(me(c),me(m),D,U,K,ue);return ue.delete(c),et;case ie:if(Ji)return Ji.call(c)==Ji.call(m)}return!1}function An(c,m,x,D,U,K){var ue=x&C,me=cr(c),Ee=me.length,Ze=cr(m),et=Ze.length;if(Ee!=et&&!ue)return!1;for(var ut=Ee;ut--;){var It=me[ut];if(!(ue?It in m:Yn.call(m,It)))return!1}var Xt=K.get(c),dn=K.get(m);if(Xt&&dn)return Xt==m&&dn==c;var kn=!0;K.set(c,m),K.set(m,c);for(var cn=ue;++ut<Ee;){It=me[ut];var Wn=c[It],qn=m[It];if(D)var oa=ue?D(qn,Wn,It,m,c,K):D(Wn,qn,It,c,m,K);if(!(oa===t?Wn===qn||U(Wn,qn,x,D,K):oa)){kn=!1;break}cn||(cn=It=="constructor")}if(kn&&!cn){var Zs=c.constructor,Ds=m.constructor;Zs!=Ds&&"constructor"in c&&"constructor"in m&&!(typeof Zs=="function"&&Zs instanceof Zs&&typeof Ds=="function"&&Ds instanceof Ds)&&(kn=!1)}return K.delete(c),K.delete(m),kn}function Bn(c){return Od(Yf(c,t,hp),c+"")}function cr(c){return Wc(c,Ti,up)}function Cr(c){return Wc(c,es,Yh)}var Dl=Fc?function(c){return Fc.get(c)}:I0;function lp(c){for(var m=c.name+"",x=Al[m],D=Yn.call(Al,m)?x.length:0;D--;){var U=x[D],K=U.func;if(K==null||K==c)return U.name}return m}function Eh(c){var m=Yn.call(Y,"placeholder")?Y:c;return m.placeholder}function on(){var c=Y.iteratee||Yi;return c=c===Yi?Ks:c,arguments.length?c(arguments[0],arguments[1]):c}function Jc(c,m){var x=c.__data__;return We(m)?x[typeof m=="string"?"string":"hash"]:x.map}function jf(c){for(var m=Ti(c),x=m.length;x--;){var D=m[x],U=c[D];m[x]=[D,U,yf(U)]}return m}function ba(c,m){var x=Uu(c,m);return iu(x)?x:t}function pl(c){var m=Yn.call(c,ao),x=c[ao];try{c[ao]=t;var D=!0}catch{}var U=zs.call(c);return D&&(m?c[ao]=x:delete c[ao]),U}var up=Pc?function(c){return c==null?[]:(c=gn(c),Gi(Pc(c),function(m){return hc.call(c,m)}))}:R0,Yh=Pc?function(c){for(var m=[];c;)Jo(m,up(c)),c=Fa(c);return m}:R0,us=mi;(Vu&&us(new Vu(new ArrayBuffer(1)))!=ft||ju&&us(new ju)!=nt||_h&&us(_h.resolve())!=yt||sl&&us(new sl)!=mt||Zo&&us(new Zo)!=ct)&&(us=function(c){var m=mi(c),x=m==Rt?c.constructor:t,D=x?Xa(x):"";if(D)switch(D){case zc:return ft;case dc:return nt;case Cd:return yt;case za:return mt;case Gr:return ct}return m});function mn(c,m,x){for(var D=-1,U=x.length;++D<U;){var K=x[D],ue=K.size;switch(K.type){case"drop":c+=ue;break;case"dropRight":m-=ue;break;case"take":m=Mi(m,c+ue);break;case"takeRight":c=Zr(c,m-ue);break}}return{start:c,end:m}}function o0(c){var m=c.match(gt);return m?m[1].split($t):[]}function yg(c,m,x){m=na(m,c);for(var D=-1,U=m.length,K=!1;++D<U;){var ue=_o(m[D]);if(!(K=c!=null&&x(c,ue)))break;c=c[ue]}return K||++D!=U?K:(U=c==null?0:c.length,!!U&&xh(U)&&ja(ue,U)&&(In(c)||Hd(c)))}function Um(c){var m=c.length,x=new c.constructor(m);return m&&typeof c[0]=="string"&&Yn.call(c,"index")&&(x.index=c.index,x.input=c.input),x}function bc(c){return typeof c.constructor=="function"&&!Tc(c)?Es(Fa(c)):{}}function qs(c,m,x){var D=c.constructor;switch(m){case At:return yc(c);case st:case pt:return new D(+c);case ft:return Go(c,x);case Ke:case Oe:case Q:case ne:case fe:case Ie:case Ye:case Gt:case He:return Ol(c,x);case nt:return new D;case tt:case xe:return new D(c);case Mt:return mo(c);case mt:return new D;case ie:return ec(c)}}function Bp(c,m){var x=m.length;if(!x)return c;var D=x-1;return m[D]=(x>1?"& ":"")+m[D],m=m.join(x>2?", ":" "),c.replace(De,`{
/* [wrapped with `+m+`] */
`)}function Rd(c){return In(c)||Hd(c)||!!(cd&&c&&c[cd])}function ja(c,m){var x=typeof c;return m=m??q,!!m&&(x=="number"||x!="symbol"&&bs.test(c))&&c>-1&&c%1==0&&c<m}function Fr(c,m,x){if(!ni(x))return!1;var D=typeof m;return(D=="number"?zi(x)&&ja(m,x.length):D=="string"&&m in x)?xa(x[m],c):!1}function Ta(c,m){if(In(c))return!1;var x=typeof c;return x=="number"||x=="symbol"||x=="boolean"||c==null||sa(c)?!0:Te.test(c)||!re.test(c)||m!=null&&c in gn(m)}function We(c){var m=typeof c;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null}function Ri(c){var m=lp(c),x=Y[m];if(typeof x!="function"||!(m in pn.prototype))return!1;if(c===x)return!0;var D=Dl(x);return!!D&&c===D[0]}function Qs(c){return!!Xs&&Xs in c}var a_=gs?Ec:mm;function Tc(c){var m=c&&c.constructor,x=typeof m=="function"&&m.prototype||Bi;return c===x}function yf(c){return c===c&&!ni(c)}function Xf(c,m){return function(x){return x==null?!1:x[c]===m&&(m!==t||c in gn(x))}}function l_(c){var m=ht(c,function(D){return x.size===p&&x.clear(),D}),x=m.cache;return m}function vf(c,m){var x=c[1],D=m[1],U=x|D,K=U<(I|L|j),ue=D==j&&x==P||D==j&&x==H&&c[7].length<=m[8]||D==(j|H)&&m[7].length<=m[8]&&x==P;if(!(K||ue))return c;D&I&&(c[2]=m[2],U|=x&I?0:O);var me=m[3];if(me){var Ee=c[3];c[3]=Ee?Va(Ee,me,m[4]):me,c[4]=Ee?Fs(c[3],_):m[4]}return me=m[5],me&&(Ee=c[5],c[5]=Ee?ou(Ee,me,m[6]):me,c[6]=Ee?Fs(c[5],_):m[6]),me=m[7],me&&(c[7]=me),D&j&&(c[8]=c[8]==null?m[8]:Mi(c[8],m[8])),c[9]==null&&(c[9]=m[9]),c[0]=m[0],c[1]=U,c}function Sa(c){var m=[];if(c!=null)for(var x in gn(c))m.push(x);return m}function vg(c){return zs.call(c)}function Yf(c,m,x){return m=Zr(m===t?c.length-1:m,0),function(){for(var D=arguments,U=-1,K=Zr(D.length-m,0),ue=Be(K);++U<K;)ue[U]=D[m+U];U=-1;for(var me=Be(m+1);++U<m;)me[U]=D[U];return me[m]=x(ue),Hn(c,this,me)}}function bf(c,m){return m.length<2?c:ws(c,Pt(m,0,-1))}function fl(c,m){for(var x=c.length,D=Mi(m.length,x),U=ti(c);D--;){var K=m[D];c[D]=ja(K,x)?U[K]:t}return c}function au(c,m){if(!(m==="constructor"&&typeof c[m]=="function")&&m!="__proto__")return c[m]}var kd=bg($s),cp=hd||function(c,m){return Tr.setTimeout(c,m)},Od=bg(su);function qc(c,m,x){var D=m+"";return Od(c,Bp(D,Kf(o0(D),x)))}function bg(c){var m=0,x=0;return function(){var D=gf(),U=he-(D-x);if(x=D,U>0){if(++m>=te)return arguments[0]}else m=0;return c.apply(t,arguments)}}function dr(c,m){var x=-1,D=c.length,U=D-1;for(m=m===t?D:m;++x<m;){var K=ks(x,U),ue=c[K];c[K]=c[x],c[x]=ue}return c.length=m,c}var a0=l_(function(c){var m=[];return c.charCodeAt(0)===46&&m.push(""),c.replace(Ge,function(x,D,U,K){m.push(U?K.replace(Un,"$1"):D||x)}),m});function _o(c){if(typeof c=="string"||sa(c))return c;var m=c+"";return m=="0"&&1/c==-$e?"-0":m}function Xa(c){if(c!=null){try{return Eu.call(c)}catch{}try{return c+""}catch{}}return""}function Kf(c,m){return Xr(Re,function(x){var D="_."+x[0];m&x[1]&&!La(c,D)&&c.push(D)}),c.sort()}function Ld(c){if(c instanceof pn)return c.clone();var m=new $r(c.__wrapped__,c.__chain__);return m.__actions__=ti(c.__actions__),m.__index__=c.__index__,m.__values__=c.__values__,m}function Jf(c,m,x){(x?Fr(c,m,x):m===t)?m=1:m=Zr($n(m),0);var D=c==null?0:c.length;if(!D||m<1)return[];for(var U=0,K=0,ue=Be(Wu(D/m));U<D;)ue[K++]=Pt(c,U,U+=m);return ue}function Mu(c){for(var m=-1,x=c==null?0:c.length,D=0,U=[];++m<x;){var K=c[m];K&&(U[D++]=K)}return U}function l0(){var c=arguments.length;if(!c)return[];for(var m=Be(c-1),x=arguments[0],D=c;D--;)m[D-1]=arguments[D];return Jo(In(x)?ti(x):[x],Yr(m,1))}var Wo=hn(function(c,m){return Kr(c)?Uo(c,Yr(m,1,Kr,!0)):[]}),Zi=hn(function(c,m){var x=Os(m);return Kr(x)&&(x=t),Kr(c)?Uo(c,Yr(m,1,Kr,!0),on(x,2)):[]}),lu=hn(function(c,m){var x=Os(m);return Kr(x)&&(x=t),Kr(c)?Uo(c,Yr(m,1,Kr,!0),t,x):[]});function ml(c,m,x){var D=c==null?0:c.length;return D?(m=x||m===t?1:$n(m),Pt(c,m<0?0:m,D)):[]}function Au(c,m,x){var D=c==null?0:c.length;return D?(m=x||m===t?1:$n(m),m=D-m,Pt(c,0,m<0?0:m)):[]}function uu(c,m){return c&&c.length?dl(c,on(m,3),!0,!0):[]}function Tf(c,m){return c&&c.length?dl(c,on(m,3),!0):[]}function Nl(c,m,x,D){var U=c==null?0:c.length;return U?(x&&typeof x!="number"&&Fr(c,m,x)&&(x=0,D=U),dd(c,m,x,D)):[]}function Dd(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var U=x==null?0:$n(x);return U<0&&(U=Zr(D+U,0)),Xl(c,on(m,3),U)}function Nd(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var U=D-1;return x!==t&&(U=$n(x),U=x<0?Zr(D+U,0):Mi(U,D-1)),Xl(c,on(m,3),U,!0)}function hp(c){var m=c==null?0:c.length;return m?Yr(c,1):[]}function Tg(c){var m=c==null?0:c.length;return m?Yr(c,$e):[]}function qf(c,m){var x=c==null?0:c.length;return x?(m=m===t?1:$n(m),Yr(c,m)):[]}function Qc(c){for(var m=-1,x=c==null?0:c.length,D={};++m<x;){var U=c[m];D[U[0]]=U[1]}return D}function gl(c){return c&&c.length?c[0]:t}function Zc(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var U=x==null?0:$n(x);return U<0&&(U=Zr(D+U,0)),Rs(c,m,U)}function Bd(c){var m=c==null?0:c.length;return m?Pt(c,0,-1):[]}var Hm=hn(function(c){var m=hr(c,Mo);return m.length&&m[0]===c[0]?ta(m):[]}),Gm=hn(function(c){var m=Os(c),x=hr(c,Mo);return m===Os(x)?m=t:x.pop(),x.length&&x[0]===c[0]?ta(x,on(m,2)):[]}),yo=hn(function(c){var m=Os(c),x=hr(c,Mo);return m=typeof m=="function"?m:t,m&&x.pop(),x.length&&x[0]===c[0]?ta(x,t,m):[]});function Qf(c,m){return c==null?"":$d.call(c,m)}function Os(c){var m=c==null?0:c.length;return m?c[m-1]:t}function Bl(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var U=D;return x!==t&&(U=$n(x),U=U<0?Zr(D+U,0):Mi(U,D-1)),m===m?Nc(c,m,U):Xl(c,fh,U,!0)}function Sf(c,m){return c&&c.length?Ho(c,$n(m)):t}var Sg=hn(Pd);function Pd(c,m){return c&&c.length&&m&&m.length?Rr(c,m):c}function Wm(c,m,x){return c&&c.length&&m&&m.length?Rr(c,m,on(x,2)):c}function Sc(c,m,x){return c&&c.length&&m&&m.length?Rr(c,m,t,x):c}var Fd=Bn(function(c,m){var x=c==null?0:c.length,D=Gh(c,m);return ys(c,hr(m,function(U){return ja(U,x)?+U:U}).sort(go)),D});function ra(c,m){var x=[];if(!(c&&c.length))return x;var D=-1,U=[],K=c.length;for(m=on(m,3);++D<K;){var ue=c[D];m(ue,D,c)&&(x.push(ue),U.push(D))}return ys(c,U),x}function Ea(c){return c==null?c:eu.call(c)}function u_(c,m,x){var D=c==null?0:c.length;return D?(x&&typeof x!="number"&&Fr(c,m,x)?(m=0,x=D):(m=m==null?0:$n(m),x=x===t?D:$n(x)),Pt(c,m,x)):[]}function Zf(c,m){return Wr(c,m)}function u0(c,m,x){return Qu(c,m,on(x,2))}function py(c,m){var x=c==null?0:c.length;if(x){var D=Wr(c,m);if(D<x&&xa(c[D],m))return D}return-1}function Pp(c,m){return Wr(c,m,!0)}function Ef(c,m,x){return Qu(c,m,on(x,2),!0)}function c0(c,m){var x=c==null?0:c.length;if(x){var D=Wr(c,m,!0)-1;if(xa(c[D],m))return D}return-1}function xf(c){return c&&c.length?Vh(c):[]}function h0(c,m){return c&&c.length?Vh(c,on(m,2)):[]}function em(c){var m=c==null?0:c.length;return m?Pt(c,1,m):[]}function d0(c,m,x){return c&&c.length?(m=x||m===t?1:$n(m),Pt(c,0,m<0?0:m)):[]}function c_(c,m,x){var D=c==null?0:c.length;return D?(m=x||m===t?1:$n(m),m=D-m,Pt(c,m<0?0:m,D)):[]}function tm(c,m){return c&&c.length?dl(c,on(m,3),!1,!0):[]}function dp(c,m){return c&&c.length?dl(c,on(m,3)):[]}var h_=hn(function(c){return ji(Yr(c,1,Kr,!0))}),Pv=hn(function(c){var m=Os(c);return Kr(m)&&(m=t),ji(Yr(c,1,Kr,!0),on(m,2))}),p0=hn(function(c){var m=Os(c);return m=typeof m=="function"?m:t,ji(Yr(c,1,Kr,!0),t,m)});function f0(c){return c&&c.length?ji(c):[]}function Fp(c,m){return c&&c.length?ji(c,on(m,2)):[]}function Pn(c,m){return m=typeof m=="function"?m:t,c&&c.length?ji(c,t,m):[]}function eh(c){if(!(c&&c.length))return[];var m=0;return c=Gi(c,function(x){if(Kr(x))return m=Zr(x.length,m),!0}),Yl(m,function(x){return hr(c,li(x))})}function wf(c,m){if(!(c&&c.length))return[];var x=eh(c);return m==null?x:hr(x,function(D){return Hn(m,t,D)})}var ia=hn(function(c,m){return Kr(c)?Uo(c,m):[]}),d_=hn(function(c){return _c(Gi(c,Kr))}),m0=hn(function(c){var m=Os(c);return Kr(m)&&(m=t),_c(Gi(c,Kr),on(m,2))}),nm=hn(function(c){var m=Os(c);return m=typeof m=="function"?m:t,_c(Gi(c,Kr),t,m)}),Fv=hn(eh);function fy(c,m){return Zu(c||[],m||[],wo)}function th(c,m){return Zu(c||[],m||[],gi)}var vo=hn(function(c){var m=c.length,x=m>1?c[m-1]:t;return x=typeof x=="function"?(c.pop(),x):t,wf(c,x)});function Iu(c){var m=Y(c);return m.__chain__=!0,m}function Eg(c,m){return m(c),c}function zp(c,m){return m(c)}var Kh=Bn(function(c){var m=c.length,x=m?c[0]:0,D=this.__wrapped__,U=function(K){return Gh(K,c)};return m>1||this.__actions__.length||!(D instanceof pn)||!ja(x)?this.thru(U):(D=D.slice(x,+x+(m?1:0)),D.__actions__.push({func:zp,args:[U],thisArg:t}),new $r(D,this.__chain__).thru(function(K){return m&&!K.length&&K.push(t),K}))});function rm(){return Iu(this)}function Up(){return new $r(this.value(),this.__chain__)}function Hp(){this.__values__===t&&(this.__values__=Ty(this.value()));var c=this.__index__>=this.__values__.length,m=c?t:this.__values__[this.__index__++];return{done:c,value:m}}function $f(){return this}function md(c){for(var m,x=this;x instanceof pa;){var D=Ld(x);D.__index__=0,D.__values__=t,m?U.__wrapped__=D:m=D;var U=D;x=x.__wrapped__}return U.__wrapped__=c,m}function pp(){var c=this.__wrapped__;if(c instanceof pn){var m=c;return this.__actions__.length&&(m=new pn(this)),m=m.reverse(),m.__actions__.push({func:zp,args:[Ea],thisArg:t}),new $r(m,this.__chain__)}return this.thru(Ea)}function Vm(){return Yc(this.__wrapped__,this.__actions__)}var my=ya(function(c,m,x){Yn.call(c,x)?++c[x]:zo(c,x,1)});function xg(c,m,x){var D=In(c)?bu:xu;return x&&Fr(c,m,x)&&(m=t),D(c,on(m,3))}function zd(c,m){var x=In(c)?Gi:fc;return x(c,on(m,3))}var ki=A(Dd),im=A(Nd);function jm(c,m){return Yr(bi(c,m),1)}function wg(c,m){return Yr(bi(c,m),$e)}function gy(c,m,x){return x=x===t?1:$n(x),Yr(bi(c,m),x)}function Xm(c,m){var x=In(c)?Xr:$o;return x(c,on(m,3))}function Cf(c,m){var x=In(c)?ad:op;return x(c,on(m,3))}var Ym=ya(function(c,m,x){Yn.call(c,x)?c[x].push(m):zo(c,x,[m])});function Gp(c,m,x,D){c=zi(c)?c:mp(c),x=x&&!D?$n(x):0;var U=c.length;return x<0&&(x=Zr(U+x,0)),cm(c)?x<=U&&c.indexOf(m,x)>-1:!!U&&Rs(c,m,x)>-1}var Wp=hn(function(c,m,x){var D=-1,U=typeof m=="function",K=zi(c)?Be(c.length):[];return $o(c,function(ue){K[++D]=U?Hn(m,ue,x):Dn(ue,m,x)}),K}),sm=ya(function(c,m,x){zo(c,x,m)});function bi(c,m){var x=In(c)?hr:wu;return x(c,on(m,3))}function Vp(c,m,x,D){return c==null?[]:(In(m)||(m=m==null?[]:[m]),x=D?t:x,In(x)||(x=x==null?[]:[x]),Ju(c,m,x))}var om=ya(function(c,m,x){c[x?0:1].push(m)},function(){return[[],[]]});function am(c,m,x){var D=In(c)?ld:io,U=arguments.length<3;return D(c,on(m,4),x,U,$o)}function Mf(c,m,x){var D=In(c)?np:io,U=arguments.length<3;return D(c,on(m,4),x,U,op)}function $g(c,m){var x=In(c)?Gi:fc;return x(c,Et(on(m,3)))}function y(c){var m=In(c)?ll:Vc;return m(c)}function T(c,m,x){(x?Fr(c,m,x):m===t)?m=1:m=$n(m);var D=In(c)?pc:Tn;return D(c,m)}function R(c){var m=In(c)?_f:kl;return m(c)}function F(c){if(c==null)return 0;if(zi(c))return cm(c)?ns(c):c.length;var m=us(c);return m==nt||m==mt?c.size:uo(c).length}function X(c,m,x){var D=In(c)?Oc:hl;return x&&Fr(c,m,x)&&(m=t),D(c,on(m,3))}var ee=hn(function(c,m){if(c==null)return[];var x=m.length;return x>1&&Fr(c,m[0],m[1])?m=[]:x>2&&Fr(m[0],m[1],m[2])&&(m=[m[0]]),Ju(c,Yr(m,1),[])}),ve=Pi||function(){return Tr.Date.now()};function Xe(c,m){if(typeof m!="function")throw new vi(l);return c=$n(c),function(){if(--c<1)return m.apply(this,arguments)}}function at(c,m,x){return m=x?t:m,m=c&&m==null?c.length:m,Ce(c,j,t,t,t,t,m)}function Ot(c,m){var x;if(typeof m!="function")throw new vi(l);return c=$n(c),function(){return--c>0&&(x=m.apply(this,arguments)),c<=1&&(m=t),x}}var qt=hn(function(c,m,x){var D=I;if(x.length){var U=Fs(x,Eh(qt));D|=z}return Ce(c,D,m,x,U)}),un=hn(function(c,m,x){var D=I|L;if(x.length){var U=Fs(x,Eh(un));D|=z}return Ce(m,D,c,x,U)});function sn(c,m,x){m=x?t:m;var D=Ce(c,P,t,t,t,t,t,m);return D.placeholder=sn.placeholder,D}function Ln(c,m,x){m=x?t:m;var D=Ce(c,B,t,t,t,t,t,m);return D.placeholder=Ln.placeholder,D}function Jn(c,m,x){var D,U,K,ue,me,Ee,Ze=0,et=!1,ut=!1,It=!0;if(typeof c!="function")throw new vi(l);m=Xi(m)||0,ni(x)&&(et=!!x.leading,ut="maxWait"in x,K=ut?Zr(Xi(x.maxWait)||0,m):K,It="trailing"in x?!!x.trailing:It);function Xt(_i){var Fl=D,wc=U;return D=U=t,Ze=_i,ue=c.apply(wc,Fl),ue}function dn(_i){return Ze=_i,me=cp(Wn,m),et?Xt(_i):ue}function kn(_i){var Fl=_i-Ee,wc=_i-Ze,Iy=m-Fl;return ut?Mi(Iy,K-wc):Iy}function cn(_i){var Fl=_i-Ee,wc=_i-Ze;return Ee===t||Fl>=m||Fl<0||ut&&wc>=K}function Wn(){var _i=ve();if(cn(_i))return qn(_i);me=cp(Wn,kn(_i))}function qn(_i){return me=t,It&&D?Xt(_i):(D=U=t,ue)}function oa(){me!==t&&Cu(me),Ze=0,D=Ee=U=me=t}function Zs(){return me===t?ue:qn(ve())}function Ds(){var _i=ve(),Fl=cn(_i);if(D=arguments,U=this,Ee=_i,Fl){if(me===t)return dn(Ee);if(ut)return Cu(me),me=cp(Wn,m),Xt(Ee)}return me===t&&(me=cp(Wn,m)),ue}return Ds.cancel=oa,Ds.flush=Zs,Ds}var nr=hn(function(c,m){return Wh(c,1,m)}),Ao=hn(function(c,m,x){return Wh(c,Xi(m)||0,x)});function xt(c){return Ce(c,Z)}function ht(c,m){if(typeof c!="function"||m!=null&&typeof m!="function")throw new vi(l);var x=function(){var D=arguments,U=m?m.apply(this,D):D[0],K=x.cache;if(K.has(U))return K.get(U);var ue=c.apply(this,D);return x.cache=K.set(U,ue)||K,ue};return x.cache=new(ht.Cache||Us),x}ht.Cache=Us;function Et(c){if(typeof c!="function")throw new vi(l);return function(){var m=arguments;switch(m.length){case 0:return!c.call(this);case 1:return!c.call(this,m[0]);case 2:return!c.call(this,m[0],m[1]);case 3:return!c.call(this,m[0],m[1],m[2])}return!c.apply(this,m)}}function bn(c){return Ot(2,c)}var or=Sh(function(c,m){m=m.length==1&&In(m[0])?hr(m[0],Hr(on())):hr(Yr(m,1),Hr(on()));var x=m.length;return hn(function(D){for(var U=-1,K=Mi(D.length,x);++U<K;)D[U]=m[U].call(this,D[U]);return Hn(c,this,D)})}),er=hn(function(c,m){var x=Fs(m,Eh(er));return Ce(c,z,t,m,x)}),pr=hn(function(c,m){var x=Fs(m,Eh(pr));return Ce(c,G,t,m,x)}),kr=Bn(function(c,m){return Ce(c,H,t,t,t,m)});function Pl(c,m){if(typeof c!="function")throw new vi(l);return m=m===t?m:$n(m),hn(c,m)}function cs(c,m){if(typeof c!="function")throw new vi(l);return m=m==null?0:Zr($n(m),0),hn(function(x){var D=x[m],U=fo(x,0,m);return D&&Jo(U,D),Hn(c,this,U)})}function jp(c,m,x){var D=!0,U=!0;if(typeof c!="function")throw new vi(l);return ni(x)&&(D="leading"in x?!!x.leading:D,U="trailing"in x?!!x.trailing:U),Jn(c,m,{leading:D,maxWait:m,trailing:U})}function g0(c){return at(c,1)}function Ru(c,m){return er(Js(m),c)}function Ud(){if(!arguments.length)return[];var c=arguments[0];return In(c)?c:[c]}function W1(c){return Ii(c,E)}function HE(c,m){return m=typeof m=="function"?m:t,Ii(c,E,m)}function GE(c){return Ii(c,v|E)}function lm(c,m){return m=typeof m=="function"?m:t,Ii(c,v|E,m)}function zv(c,m){return m==null||Gc(c,m,Ti(m))}function xa(c,m){return c===m||c!==c&&m!==m}var V1=yn(Ga),Cg=yn(function(c,m){return c>=m}),Hd=Zn(function(){return arguments}())?Zn:function(c){return ci(c)&&Yn.call(c,"callee")&&!hc.call(c,"callee")},In=Be.isArray,_y=yu?Hr(yu):Or;function zi(c){return c!=null&&xh(c.length)&&!Ec(c)}function Kr(c){return ci(c)&&zi(c)}function Uv(c){return c===!0||c===!1||ci(c)&&mi(c)==st}var nh=wd||mm,j1=xo?Hr(xo):ei;function fp(c){return ci(c)&&c.nodeType===1&&!zr(c)}function p_(c){if(c==null)return!0;if(zi(c)&&(In(c)||typeof c=="string"||typeof c.splice=="function"||nh(c)||Vd(c)||Hd(c)))return!c.length;var m=us(c);if(m==nt||m==mt)return!c.size;if(Tc(c))return!uo(c).length;for(var x in c)if(Yn.call(c,x))return!1;return!0}function Ui(c,m){return Jr(c,m)}function Io(c,m,x){x=typeof x=="function"?x:t;var D=x?x(c,m):t;return D===t?Jr(c,m,t,x):!!D}function _0(c){if(!ci(c))return!1;var m=mi(c);return m==Ue||m==dt||typeof c.message=="string"&&typeof c.name=="string"&&!zr(c)}function yy(c){return typeof c=="number"&&$l(c)}function Ec(c){if(!ni(c))return!1;var m=mi(c);return m==Ae||m==je||m==it||m==Ct}function y0(c){return typeof c=="number"&&c==$n(c)}function xh(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=q}function ni(c){var m=typeof c;return c!=null&&(m=="object"||m=="function")}function ci(c){return c!=null&&typeof c=="object"}var Jh=vu?Hr(vu):as;function Cs(c,m){return c===m||Qi(c,m,jf(m))}function um(c,m,x){return x=typeof x=="function"?x:t,Qi(c,m,jf(m),x)}function vy(c){return Gd(c)&&c!=+c}function by(c){if(a_(c))throw new tn(o);return iu(c)}function v0(c){return c===null}function WE(c){return c==null}function Gd(c){return typeof c=="number"||ci(c)&&mi(c)==tt}function zr(c){if(!ci(c)||mi(c)!=Rt)return!1;var m=Fa(c);if(m===null)return!0;var x=Yn.call(m,"constructor")&&m.constructor;return typeof x=="function"&&x instanceof x&&Eu.call(x)==Pa}var Wd=nl?Hr(nl):Yu;function Ya(c){return y0(c)&&c>=-q&&c<=q}var f_=Ni?Hr(Ni):gc;function cm(c){return typeof c=="string"||!In(c)&&ci(c)&&mi(c)==xe}function sa(c){return typeof c=="symbol"||ci(c)&&mi(c)==ie}var Vd=wi?Hr(wi):Ku;function X1(c){return c===t}function Y1(c){return ci(c)&&us(c)==ct}function qh(c){return ci(c)&&mi(c)==Tt}var Hv=yn(_a),Xp=yn(function(c,m){return c<=m});function Ty(c){if(!c)return[];if(zi(c))return cm(c)?Br(c):ti(c);if(Qo&&c[Qo])return Dh(c[Qo]());var m=us(c),x=m==nt?Hu:m==mt?ql:mp;return x(c)}function xc(c){if(!c)return c===0?c:0;if(c=Xi(c),c===$e||c===-$e){var m=c<0?-1:1;return m*oe}return c===c?c:0}function $n(c){var m=xc(c),x=m%1;return m===m?x?m-x:m:0}function b0(c){return c?Ua($n(c),0,pe):0}function Xi(c){if(typeof c=="number")return c;if(sa(c))return se;if(ni(c)){var m=typeof c.valueOf=="function"?c.valueOf():c;c=ni(m)?m+"":m}if(typeof c!="string")return c===0?c:+c;c=Lh(c);var x=si.test(c);return x||jr.test(c)?Oa(c.slice(2),x?2:8):wr.test(c)?se:+c}function Gv(c){return ls(c,es(c))}function lt(c){return c?Ua($n(c),-q,q):c===0?c:0}function rr(c){return c==null?"":oi(c)}var m_=va(function(c,m){if(Tc(m)||zi(m)){ls(m,Ti(m),c);return}for(var x in m)Yn.call(m,x)&&wo(c,x,m[x])}),g_=va(function(c,m){ls(m,es(m),c)}),Qh=va(function(c,m,x,D){ls(m,es(m),c,D)}),Km=va(function(c,m,x,D){ls(m,Ti(m),c,D)}),Sy=Bn(Gh);function T0(c,m){var x=Es(c);return m==null?x:ss(x,m)}var Wv=hn(function(c,m){c=gn(c);var x=-1,D=m.length,U=D>2?m[2]:t;for(U&&Fr(m[0],m[1],U)&&(D=1);++x<D;)for(var K=m[x],ue=es(K),me=-1,Ee=ue.length;++me<Ee;){var Ze=ue[me],et=c[Ze];(et===t||xa(et,Bi[Ze])&&!Yn.call(c,Ze))&&(c[Ze]=K[Ze])}return c}),K1=hn(function(c){return c.push(t,rt),Hn(Zh,t,c)});function jd(c,m){return Ed(c,on(m,3),os)}function Vv(c,m){return Ed(c,on(m,3),Ha)}function __(c,m){return c==null?c:ru(c,on(m,3),es)}function jv(c,m){return c==null?c:Xu(c,on(m,3),es)}function J1(c,m){return c&&os(c,on(m,3))}function q1(c,m){return c&&Ha(c,on(m,3))}function Q1(c){return c==null?[]:xs(c,Ti(c))}function Z1(c){return c==null?[]:xs(c,es(c))}function hm(c,m,x){var D=c==null?t:ws(c,m);return D===t?x:D}function Xv(c,m){return c!=null&&yg(c,m,mc)}function dm(c,m){return c!=null&&yg(c,m,ap)}var Yv=de(function(c,m,x){m!=null&&typeof m.toString!="function"&&(m=zs.call(m)),c[m]=x},w_(Ro)),y_=de(function(c,m,x){m!=null&&typeof m.toString!="function"&&(m=zs.call(m)),Yn.call(c,m)?c[m].push(x):c[m]=[x]},on),v_=hn(Dn);function Ti(c){return zi(c)?_n(c):uo(c)}function es(c){return zi(c)?_n(c,!0):pd(c)}function eT(c,m){var x={};return m=on(m,3),os(c,function(D,U,K){zo(x,m(D,U,K),D)}),x}function Af(c,m){var x={};return m=on(m,3),os(c,function(D,U,K){zo(x,U,m(D,U,K))}),x}var pm=va(function(c,m,x){ho(c,m,x)}),Zh=va(function(c,m,x,D){ho(c,m,x,D)}),tT=Bn(function(c,m){var x={};if(c==null)return x;var D=!1;m=hr(m,function(K){return K=na(K,c),D||(D=K.length>1),K}),ls(c,Cr(c),x),D&&(x=Ii(x,v|b|E,Ut));for(var U=m.length;U--;)Xc(x,m[U]);return x});function S0(c,m){return b_(c,Et(on(m)))}var Qt=Bn(function(c,m){return c==null?{}:qu(c,m)});function b_(c,m){if(c==null)return{};var x=hr(Cr(c),function(D){return[D]});return m=on(m),bh(c,x,function(D,U){return m(D,U[0])})}function VE(c,m,x){m=na(m,c);var D=-1,U=m.length;for(U||(U=1,c=t);++D<U;){var K=c==null?t:c[_o(m[D])];K===t&&(D=U,K=x),c=Ec(K)?K.call(c):K}return c}function jE(c,m,x){return c==null?c:gi(c,m,x)}function XE(c,m,x,D){return D=typeof D=="function"?D:t,c==null?c:gi(c,m,x,D)}var T_=bt(Ti),E0=bt(es);function hs(c,m,x){var D=In(c),U=D||nh(c)||Vd(c);if(m=on(m,4),x==null){var K=c&&c.constructor;U?x=D?new K:[]:ni(c)?x=Ec(K)?Es(Fa(c)):{}:x={}}return(U?Xr:os)(c,function(ue,me,Ee){return m(x,ue,me,Ee)}),x}function Mg(c,m){return c==null?!0:Xc(c,m)}function Ey(c,m,x){return c==null?c:po(c,m,Js(x))}function YE(c,m,x,D){return D=typeof D=="function"?D:t,c==null?c:po(c,m,Js(x),D)}function mp(c){return c==null?[]:Ci(c,Ti(c))}function gp(c){return c==null?[]:Ci(c,es(c))}function S_(c,m,x){return x===t&&(x=m,m=t),x!==t&&(x=Xi(x),x=x===x?x:0),m!==t&&(m=Xi(m),m=m===m?m:0),Ua(Xi(c),m,x)}function Ls(c,m,x){return m=xc(m),x===t?(x=m,m=0):x=xc(x),c=Xi(c),vh(c,m,x)}function nT(c,m,x){if(x&&typeof x!="boolean"&&Fr(c,m,x)&&(m=x=t),x===t&&(typeof m=="boolean"?(x=m,m=t):typeof c=="boolean"&&(x=c,c=t)),c===t&&m===t?(c=0,m=1):(c=xc(c),m===t?(m=c,c=0):m=xc(m)),c>m){var D=c;c=m,m=D}if(x||c%1||m%1){var U=Cl();return Mi(c+U*(m-c+dh("1e-"+((U+"").length-1))),m)}return ks(c,m)}var Kv=h(function(c,m,x){return m=m.toLowerCase(),c+(x?fm(m):m)});function fm(c){return C0(rr(c).toLowerCase())}function xy(c){return c=rr(c),c&&c.replace(Ia,ip).replace(ms,"")}function Jv(c,m,x){c=rr(c),m=oi(m);var D=c.length;x=x===t?D:Ua($n(x),0,D);var U=x;return x-=m.length,x>=0&&c.slice(x,U)==m}function qv(c){return c=rr(c),c&&Dr.test(c)?c.replace(Rn,sp):c}function Qv(c){return c=rr(c),c&&Ft.test(c)?c.replace(ot,"\\$&"):c}var E_=h(function(c,m,x){return c+(x?"-":"")+m.toLowerCase()}),KE=h(function(c,m,x){return c+(x?" ":"")+m.toLowerCase()}),rT=w("toLowerCase");function JE(c,m,x){c=rr(c),m=$n(m);var D=m?ns(c):0;if(!m||D>=m)return c;var U=(m-D)/2;return St(Zl(U),x)+c+St(Wu(U),x)}function qE(c,m,x){c=rr(c),m=$n(m);var D=m?ns(c):0;return m&&D<m?c+St(m-D,x):c}function Yp(c,m,x){c=rr(c),m=$n(m);var D=m?ns(c):0;return m&&D<m?St(m-D,x)+c:c}function Zv(c,m,x){return x||m==null?m=0:m&&(m=+m),Op(rr(c).replace(nn,""),m||0)}function eb(c,m,x){return(x?Fr(c,m,x):m===t)?m=1:m=$n(m),Gs(rr(c),m)}function x0(){var c=arguments,m=rr(c[0]);return c.length<3?m:m.replace(c[1],c[2])}var iT=h(function(c,m,x){return c+(x?"_":"")+m.toLowerCase()});function tb(c,m,x){return x&&typeof x!="number"&&Fr(c,m,x)&&(m=x=t),x=x===t?pe:x>>>0,x?(c=rr(c),c&&(typeof m=="string"||m!=null&&!Wd(m))&&(m=oi(m),!m&&rl(c))?fo(Br(c),0,x):c.split(m,x)):[]}var x_=h(function(c,m,x){return c+(x?" ":"")+C0(m)});function sT(c,m,x){return c=rr(c),x=x==null?0:Ua($n(x),0,c.length),m=oi(m),c.slice(x,x+m.length)==m}function nb(c,m,x){var D=Y.templateSettings;x&&Fr(c,m,x)&&(m=t),c=rr(c),m=Qh({},m,D,Le);var U=Qh({},m.imports,D.imports,Le),K=Ti(U),ue=Ci(U,K),me,Ee,Ze=0,et=m.interpolate||Eo,ut="__p += '",It=Pr((m.escape||Eo).source+"|"+et.source+"|"+(et===fr?tr:Eo).source+"|"+(m.evaluate||Eo).source+"|$","g"),Xt="//# sourceURL="+(Yn.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++gu+"]")+`
`;c.replace(It,function(cn,Wn,qn,oa,Zs,Ds){return qn||(qn=oa),ut+=c.slice(Ze,Ds).replace(Wl,ud),Wn&&(me=!0,ut+=`' +
__e(`+Wn+`) +
'`),Zs&&(Ee=!0,ut+=`';
`+Zs+`;
__p += '`),qn&&(ut+=`' +
((__t = (`+qn+`)) == null ? '' : __t) +
'`),Ze=Ds+cn.length,cn}),ut+=`';
`;var dn=Yn.call(m,"variable")&&m.variable;if(!dn)ut=`with (obj) {
`+ut+`
}
`;else if(Wt.test(dn))throw new tn(u);ut=(Ee?ut.replace(Zt,""):ut).replace(_t,"$1").replace(Kt,"$1;"),ut="function("+(dn||"obj")+`) {
`+(dn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(me?", __e = _.escape":"")+(Ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ut+`return __p
}`;var kn=M0(function(){return Mn(K,Xt+"return "+ut).apply(t,ue)});if(kn.source=ut,_0(kn))throw kn;return kn}function ed(c){return rr(c).toLowerCase()}function If(c){return rr(c).toUpperCase()}function oT(c,m,x){if(c=rr(c),c&&(x||m===t))return Lh(c);if(!c||!(m=oi(m)))return c;var D=Br(c),U=Br(m),K=Wi(D,U),ue=ca(D,U)+1;return fo(D,K,ue).join("")}function wy(c,m,x){if(c=rr(c),c&&(x||m===t))return c.slice(0,xl(c)+1);if(!c||!(m=oi(m)))return c;var D=Br(c),U=ca(D,Br(m))+1;return fo(D,0,U).join("")}function aT(c,m,x){if(c=rr(c),c&&(x||m===t))return c.replace(nn,"");if(!c||!(m=oi(m)))return c;var D=Br(c),U=Wi(D,Br(m));return fo(D,U).join("")}function w0(c,m){var x=ae,D=J;if(ni(m)){var U="separator"in m?m.separator:U;x="length"in m?$n(m.length):x,D="omission"in m?oi(m.omission):D}c=rr(c);var K=c.length;if(rl(c)){var ue=Br(c);K=ue.length}if(x>=K)return c;var me=x-ns(D);if(me<1)return D;var Ee=ue?fo(ue,0,me).join(""):c.slice(0,me);if(U===t)return Ee+D;if(ue&&(me+=Ee.length-me),Wd(U)){if(c.slice(me).search(U)){var Ze,et=Ee;for(U.global||(U=Pr(U.source,rr(mr.exec(U))+"g")),U.lastIndex=0;Ze=U.exec(et);)var ut=Ze.index;Ee=Ee.slice(0,ut===t?me:ut)}}else if(c.indexOf(oi(U),me)!=me){var It=Ee.lastIndexOf(U);It>-1&&(Ee=Ee.slice(0,It))}return Ee+D}function $y(c){return c=rr(c),c&&ii.test(c)?c.replace(Yt,Ba):c}var $0=h(function(c,m,x){return c+(x?" ":"")+m.toUpperCase()}),C0=w("toUpperCase");function rb(c,m,x){return c=rr(c),m=x?t:m,m===t?Lc(c)?mh(c):mf(c):c.match(m)||[]}var M0=hn(function(c,m){try{return Hn(c,t,m)}catch(x){return _0(x)?x:new tn(x)}}),ib=Bn(function(c,m){return Xr(m,function(x){x=_o(x),zo(c,x,qt(c[x],c))}),c});function sb(c){var m=c==null?0:c.length,x=on();return c=m?hr(c,function(D){if(typeof D[1]!="function")throw new vi(l);return[x(D[0]),D[1]]}):[],hn(function(D){for(var U=-1;++U<m;){var K=c[U];if(Hn(K[0],this,D))return Hn(K[1],this,D)}})}function QE(c){return Id(Ii(c,v))}function w_(c){return function(){return c}}function ZE(c,m){return c==null||c!==c?m:c}var lT=N(),ex=N(!0);function Ro(c){return c}function Yi(c){return Ks(typeof c=="function"?c:Ii(c,v))}function Rf(c){return $u(Ii(c,v))}function $_(c,m){return co(c,Ii(m,v))}var Cy=hn(function(c,m){return function(x){return Dn(x,c,m)}}),kf=hn(function(c,m){return function(x){return Dn(c,x,m)}});function C_(c,m,x){var D=Ti(m),U=xs(m,D);x==null&&!(ni(m)&&(U.length||!D.length))&&(x=m,m=c,c=this,U=xs(m,Ti(m)));var K=!(ni(x)&&"chain"in x)||!!x.chain,ue=Ec(c);return Xr(U,function(me){var Ee=m[me];c[me]=Ee,ue&&(c.prototype[me]=function(){var Ze=this.__chain__;if(K||Ze){var et=c(this.__wrapped__),ut=et.__actions__=ti(this.__actions__);return ut.push({func:Ee,args:arguments,thisArg:c}),et.__chain__=Ze,et}return Ee.apply(c,Jo([this.value()],arguments))})}),c}function A0(){return Tr._===this&&(Tr._=Bh),this}function I0(){}function uT(c){return c=$n(c),hn(function(m){return Ho(m,c)})}var ob=Qe(hr),tx=Qe(bu),ab=Qe(Oc);function M_(c){return Ta(c)?li(_o(c)):Th(c)}function cT(c){return function(m){return c==null?t:ws(c,m)}}var lb=ln(),My=ln(!0);function R0(){return[]}function mm(){return!1}function ub(){return{}}function cb(){return""}function hb(){return!0}function db(c,m){if(c=$n(c),c<1||c>q)return[];var x=pe,D=Mi(c,pe);m=on(m),c-=pe;for(var U=Yl(D,m);++x<c;)m(x);return U}function Jm(c){return In(c)?hr(c,_o):sa(c)?[c]:ti(a0(rr(c)))}function pb(c){var m=++ha;return rr(c)+m}var fb=ke(function(c,m){return c+m},0),mb=fn("ceil"),gb=ke(function(c,m){return c/m},1),_b=fn("floor");function Kn(c){return c&&c.length?Il(c,Ro,Ga):t}function hT(c,m){return c&&c.length?Il(c,on(m,2),Ga):t}function dT(c){return Da(c,Ro)}function Ag(c,m){return Da(c,on(m,2))}function A_(c){return c&&c.length?Il(c,Ro,_a):t}function k0(c,m){return c&&c.length?Il(c,on(m,2),_a):t}var pT=ke(function(c,m){return c*m},1),Ay=fn("round"),fT=ke(function(c,m){return c-m},0);function mT(c){return c&&c.length?Po(c,Ro):0}function gT(c,m){return c&&c.length?Po(c,on(m,2)):0}return Y.after=Xe,Y.ary=at,Y.assign=m_,Y.assignIn=g_,Y.assignInWith=Qh,Y.assignWith=Km,Y.at=Sy,Y.before=Ot,Y.bind=qt,Y.bindAll=ib,Y.bindKey=un,Y.castArray=Ud,Y.chain=Iu,Y.chunk=Jf,Y.compact=Mu,Y.concat=l0,Y.cond=sb,Y.conforms=QE,Y.constant=w_,Y.countBy=my,Y.create=T0,Y.curry=sn,Y.curryRight=Ln,Y.debounce=Jn,Y.defaults=Wv,Y.defaultsDeep=K1,Y.defer=nr,Y.delay=Ao,Y.difference=Wo,Y.differenceBy=Zi,Y.differenceWith=lu,Y.drop=ml,Y.dropRight=Au,Y.dropRightWhile=uu,Y.dropWhile=Tf,Y.fill=Nl,Y.filter=zd,Y.flatMap=jm,Y.flatMapDeep=wg,Y.flatMapDepth=gy,Y.flatten=hp,Y.flattenDeep=Tg,Y.flattenDepth=qf,Y.flip=xt,Y.flow=lT,Y.flowRight=ex,Y.fromPairs=Qc,Y.functions=Q1,Y.functionsIn=Z1,Y.groupBy=Ym,Y.initial=Bd,Y.intersection=Hm,Y.intersectionBy=Gm,Y.intersectionWith=yo,Y.invert=Yv,Y.invertBy=y_,Y.invokeMap=Wp,Y.iteratee=Yi,Y.keyBy=sm,Y.keys=Ti,Y.keysIn=es,Y.map=bi,Y.mapKeys=eT,Y.mapValues=Af,Y.matches=Rf,Y.matchesProperty=$_,Y.memoize=ht,Y.merge=pm,Y.mergeWith=Zh,Y.method=Cy,Y.methodOf=kf,Y.mixin=C_,Y.negate=Et,Y.nthArg=uT,Y.omit=tT,Y.omitBy=S0,Y.once=bn,Y.orderBy=Vp,Y.over=ob,Y.overArgs=or,Y.overEvery=tx,Y.overSome=ab,Y.partial=er,Y.partialRight=pr,Y.partition=om,Y.pick=Qt,Y.pickBy=b_,Y.property=M_,Y.propertyOf=cT,Y.pull=Sg,Y.pullAll=Pd,Y.pullAllBy=Wm,Y.pullAllWith=Sc,Y.pullAt=Fd,Y.range=lb,Y.rangeRight=My,Y.rearg=kr,Y.reject=$g,Y.remove=ra,Y.rest=Pl,Y.reverse=Ea,Y.sampleSize=T,Y.set=jE,Y.setWith=XE,Y.shuffle=R,Y.slice=u_,Y.sortBy=ee,Y.sortedUniq=xf,Y.sortedUniqBy=h0,Y.split=tb,Y.spread=cs,Y.tail=em,Y.take=d0,Y.takeRight=c_,Y.takeRightWhile=tm,Y.takeWhile=dp,Y.tap=Eg,Y.throttle=jp,Y.thru=zp,Y.toArray=Ty,Y.toPairs=T_,Y.toPairsIn=E0,Y.toPath=Jm,Y.toPlainObject=Gv,Y.transform=hs,Y.unary=g0,Y.union=h_,Y.unionBy=Pv,Y.unionWith=p0,Y.uniq=f0,Y.uniqBy=Fp,Y.uniqWith=Pn,Y.unset=Mg,Y.unzip=eh,Y.unzipWith=wf,Y.update=Ey,Y.updateWith=YE,Y.values=mp,Y.valuesIn=gp,Y.without=ia,Y.words=rb,Y.wrap=Ru,Y.xor=d_,Y.xorBy=m0,Y.xorWith=nm,Y.zip=Fv,Y.zipObject=fy,Y.zipObjectDeep=th,Y.zipWith=vo,Y.entries=T_,Y.entriesIn=E0,Y.extend=g_,Y.extendWith=Qh,C_(Y,Y),Y.add=fb,Y.attempt=M0,Y.camelCase=Kv,Y.capitalize=fm,Y.ceil=mb,Y.clamp=S_,Y.clone=W1,Y.cloneDeep=GE,Y.cloneDeepWith=lm,Y.cloneWith=HE,Y.conformsTo=zv,Y.deburr=xy,Y.defaultTo=ZE,Y.divide=gb,Y.endsWith=Jv,Y.eq=xa,Y.escape=qv,Y.escapeRegExp=Qv,Y.every=xg,Y.find=ki,Y.findIndex=Dd,Y.findKey=jd,Y.findLast=im,Y.findLastIndex=Nd,Y.findLastKey=Vv,Y.floor=_b,Y.forEach=Xm,Y.forEachRight=Cf,Y.forIn=__,Y.forInRight=jv,Y.forOwn=J1,Y.forOwnRight=q1,Y.get=hm,Y.gt=V1,Y.gte=Cg,Y.has=Xv,Y.hasIn=dm,Y.head=gl,Y.identity=Ro,Y.includes=Gp,Y.indexOf=Zc,Y.inRange=Ls,Y.invoke=v_,Y.isArguments=Hd,Y.isArray=In,Y.isArrayBuffer=_y,Y.isArrayLike=zi,Y.isArrayLikeObject=Kr,Y.isBoolean=Uv,Y.isBuffer=nh,Y.isDate=j1,Y.isElement=fp,Y.isEmpty=p_,Y.isEqual=Ui,Y.isEqualWith=Io,Y.isError=_0,Y.isFinite=yy,Y.isFunction=Ec,Y.isInteger=y0,Y.isLength=xh,Y.isMap=Jh,Y.isMatch=Cs,Y.isMatchWith=um,Y.isNaN=vy,Y.isNative=by,Y.isNil=WE,Y.isNull=v0,Y.isNumber=Gd,Y.isObject=ni,Y.isObjectLike=ci,Y.isPlainObject=zr,Y.isRegExp=Wd,Y.isSafeInteger=Ya,Y.isSet=f_,Y.isString=cm,Y.isSymbol=sa,Y.isTypedArray=Vd,Y.isUndefined=X1,Y.isWeakMap=Y1,Y.isWeakSet=qh,Y.join=Qf,Y.kebabCase=E_,Y.last=Os,Y.lastIndexOf=Bl,Y.lowerCase=KE,Y.lowerFirst=rT,Y.lt=Hv,Y.lte=Xp,Y.max=Kn,Y.maxBy=hT,Y.mean=dT,Y.meanBy=Ag,Y.min=A_,Y.minBy=k0,Y.stubArray=R0,Y.stubFalse=mm,Y.stubObject=ub,Y.stubString=cb,Y.stubTrue=hb,Y.multiply=pT,Y.nth=Sf,Y.noConflict=A0,Y.noop=I0,Y.now=ve,Y.pad=JE,Y.padEnd=qE,Y.padStart=Yp,Y.parseInt=Zv,Y.random=nT,Y.reduce=am,Y.reduceRight=Mf,Y.repeat=eb,Y.replace=x0,Y.result=VE,Y.round=Ay,Y.runInContext=ye,Y.sample=y,Y.size=F,Y.snakeCase=iT,Y.some=X,Y.sortedIndex=Zf,Y.sortedIndexBy=u0,Y.sortedIndexOf=py,Y.sortedLastIndex=Pp,Y.sortedLastIndexBy=Ef,Y.sortedLastIndexOf=c0,Y.startCase=x_,Y.startsWith=sT,Y.subtract=fT,Y.sum=mT,Y.sumBy=gT,Y.template=nb,Y.times=db,Y.toFinite=xc,Y.toInteger=$n,Y.toLength=b0,Y.toLower=ed,Y.toNumber=Xi,Y.toSafeInteger=lt,Y.toString=rr,Y.toUpper=If,Y.trim=oT,Y.trimEnd=wy,Y.trimStart=aT,Y.truncate=w0,Y.unescape=$y,Y.uniqueId=pb,Y.upperCase=$0,Y.upperFirst=C0,Y.each=Xm,Y.eachRight=Cf,Y.first=gl,C_(Y,function(){var c={};return os(Y,function(m,x){Yn.call(Y.prototype,x)||(c[x]=m)}),c}(),{chain:!1}),Y.VERSION=i,Xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){Y[c].placeholder=Y}),Xr(["drop","take"],function(c,m){pn.prototype[c]=function(x){x=x===t?1:Zr($n(x),0);var D=this.__filtered__&&!m?new pn(this):this.clone();return D.__filtered__?D.__takeCount__=Mi(x,D.__takeCount__):D.__views__.push({size:Mi(x,pe),type:c+(D.__dir__<0?"Right":"")}),D},pn.prototype[c+"Right"]=function(x){return this.reverse()[c](x).reverse()}}),Xr(["filter","map","takeWhile"],function(c,m){var x=m+1,D=x==le||x==be;pn.prototype[c]=function(U){var K=this.clone();return K.__iteratees__.push({iteratee:on(U,3),type:x}),K.__filtered__=K.__filtered__||D,K}}),Xr(["head","last"],function(c,m){var x="take"+(m?"Right":"");pn.prototype[c]=function(){return this[x](1).value()[0]}}),Xr(["initial","tail"],function(c,m){var x="drop"+(m?"":"Right");pn.prototype[c]=function(){return this.__filtered__?new pn(this):this[x](1)}}),pn.prototype.compact=function(){return this.filter(Ro)},pn.prototype.find=function(c){return this.filter(c).head()},pn.prototype.findLast=function(c){return this.reverse().find(c)},pn.prototype.invokeMap=hn(function(c,m){return typeof c=="function"?new pn(this):this.map(function(x){return Dn(x,c,m)})}),pn.prototype.reject=function(c){return this.filter(Et(on(c)))},pn.prototype.slice=function(c,m){c=$n(c);var x=this;return x.__filtered__&&(c>0||m<0)?new pn(x):(c<0?x=x.takeRight(-c):c&&(x=x.drop(c)),m!==t&&(m=$n(m),x=m<0?x.dropRight(-m):x.take(m-c)),x)},pn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},pn.prototype.toArray=function(){return this.take(pe)},os(pn.prototype,function(c,m){var x=/^(?:filter|find|map|reject)|While$/.test(m),D=/^(?:head|last)$/.test(m),U=Y[D?"take"+(m=="last"?"Right":""):m],K=D||/^find/.test(m);!U||(Y.prototype[m]=function(){var ue=this.__wrapped__,me=D?[1]:arguments,Ee=ue instanceof pn,Ze=me[0],et=Ee||In(ue),ut=function(Wn){var qn=U.apply(Y,Jo([Wn],me));return D&&It?qn[0]:qn};et&&x&&typeof Ze=="function"&&Ze.length!=1&&(Ee=et=!1);var It=this.__chain__,Xt=!!this.__actions__.length,dn=K&&!It,kn=Ee&&!Xt;if(!K&&et){ue=kn?ue:new pn(this);var cn=c.apply(ue,me);return cn.__actions__.push({func:zp,args:[ut],thisArg:t}),new $r(cn,It)}return dn&&kn?c.apply(this,me):(cn=this.thru(ut),dn?D?cn.value()[0]:cn.value():cn)})}),Xr(["pop","push","shift","sort","splice","unshift"],function(c){var m=oo[c],x=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",D=/^(?:pop|shift)$/.test(c);Y.prototype[c]=function(){var U=arguments;if(D&&!this.__chain__){var K=this.value();return m.apply(In(K)?K:[],U)}return this[x](function(ue){return m.apply(In(ue)?ue:[],U)})}}),os(pn.prototype,function(c,m){var x=Y[m];if(x){var D=x.name+"";Yn.call(Al,D)||(Al[D]=[]),Al[D].push({name:m,func:x})}}),Al[W(t,L).name]=[{name:"wrapper",func:t}],pn.prototype.clone=Lp,pn.prototype.reverse=al,pn.prototype.value=Ai,Y.prototype.at=Kh,Y.prototype.chain=rm,Y.prototype.commit=Up,Y.prototype.next=Hp,Y.prototype.plant=md,Y.prototype.reverse=pp,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=Vm,Y.prototype.first=Y.prototype.head,Qo&&(Y.prototype[Qo]=$f),Y},di=xd();yi?((yi.exports=di)._=di,Is._=di):Tr._=di}).call(K_)})(sg,sg.exports);const yCe=sg.exports,vCe=(n,e)=>({clock:new gCe,items:{},tfs:{},hulls:{},lines:{},texts:{},points:{},widgets:{},onMove:(t,i,s,o)=>n(l=>{console.log(o),l[i][t].position={...o.position},l[i][t].rotation=o.quaternion,l[i][t].rotation.x=o.quaternion.x,l[i][t].rotation.y=o.quaternion.y,l[i][t].rotation.z=o.quaternion.z,l[i][t].rotation.w=o.quaternion.w,l[i][t].scale={...o.scale}}),onClick:(t,i,s,o)=>{i||console.log(`id: ${t} clicked!`,s),e().items[t]&&!i&&o.stopPropagation()},onPointerOver:(t,i,s)=>{},onPointerOut:(t,i,s)=>{},pause:()=>n(t=>{t.clock.setTimescale(0)}),play:t=>n(i=>{i.clock.setTimescale(t||1)}),reset:t=>n(i=>{console.log(`setting time to ${t}`),i.clock._elapsed=t?t*1e3:0}),clearItems:()=>n(t=>({items:{}})),clearLines:()=>n(t=>({lines:{}})),clearTfs:()=>n(t=>({tfs:{}})),clearHulls:()=>n(t=>({hulls:{}})),clearTexts:()=>n(t=>({texts:{}})),clearPoints:()=>n(t=>({points:{}})),setItems:t=>n(i=>({items:t})),setLines:t=>n(i=>({lines:t})),setTfs:t=>n(i=>({tfs:t})),setHulls:t=>n(i=>({hulls:t})),setTexts:t=>n(i=>({texts:t})),setPoints:t=>n(i=>({points:t})),removeItem:t=>n(i=>{delete i.items[t]}),removeLine:t=>n(i=>{delete i.lines[t]}),removeTf:t=>n(i=>{delete i.tfs[t]}),removeHull:t=>n(i=>{delete i.hulls[t]}),removeText:t=>n(i=>{delete i.texts[t]}),removePoint:t=>n(i=>{delete i.points[t]}),setItem:(t,i)=>n(s=>{s.items[t]=i}),setLine:(t,i)=>n(s=>{s.lines[t]=i}),setTf:(t,i)=>n(s=>{s.tfs[t]=i}),setHull:(t,i)=>n(s=>{s.hulls[t]=i}),setText:(t,i)=>n(s=>{s.texts[t]=i}),setPoint:(t,i)=>n(s=>{s.points[t]=i}),setProperty:(t,i)=>n(s=>{yCe.set(s,t,i)})}),bCe=mCe(tCe(vCe)),TCe=Z$e(bCe),qJ=ge.createContext(),Lo=(n,e)=>{const t=ge.useContext(qJ);return YJ(t,n,e)},SCe=({store:n,children:e,debug:t=!1})=>(t&&console.log("SceneProvider regenerated"),an(qJ.Provider,{value:n||TCe,children:e})),ECe=Vr.forwardRef((n,e)=>an("ambientLight",{ref:e,...n}));Vr.forwardRef((n,e)=>an("pointLight",{ref:e,...n}));const xCe=Vr.forwardRef((n,e)=>an("directionalLight",{ref:e,...n})),Z0=(n,e,t,i)=>{var s=new Nn;return s.setRGB(n/255,e/255,t/255),i<=.99?new f$({color:s.getHex(),opacity:i+.1,transparent:!0,depthWrite:!0,blendSrc:HR,blendDst:GR,blendEquation:CP,blending:ny}):new f$({color:s.getHex(),opacity:i,blending:ny})},CA=sg.exports.memoize(n=>{var e=new Nn(n),t=`
		varying vec3	vVertexWorldPosition;
		varying vec3	vVertexNormal;

		// varying vec4	vFragColor;

		void main(){
			vVertexNormal	= normalize(normalMatrix * normal);

			vVertexWorldPosition	= (modelMatrix * vec4(position, 1.0)).xyz;

			// set gl_Position
			gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
		}`,i=`
		uniform vec3	glowColor;
		uniform float	coeficient;
		uniform float	power;

		varying vec3	vVertexNormal;
		varying vec3	vVertexWorldPosition;

		// varying vec4	vFragColor;

		void main(){
			vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;
			vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
			viewCameraToVertex	= normalize(viewCameraToVertex);
			float intensity		= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);
			gl_FragColor		= vec4(glowColor, intensity);
		}`,s=new bd({uniforms:{coeficient:{type:"f",value:1.2},power:{type:"f",value:4},glowColor:{type:"c",value:e}},vertexShader:t,fragmentShader:i,blending:fI,transparent:!0,depthWrite:!1,depthTest:!1});return s});function wCe(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(e,function(i,s,o,l){return s+s+o+o+l+l});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}const Db=new sF,Nf=new Me,Jy=new Me,Ou=new vl,$G={X:new Me(1,0,0),Y:new Me(0,1,0),Z:new Me(0,0,1)},ZO={type:"change"},CG={type:"mouseDown"},MG={type:"mouseUp",mode:null},AG={type:"objectChange"};class $Ce extends to{constructor(e,t){super(),t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const i=new kCe;this._gizmo=i,this.add(i);const s=new OCe;this._plane=s,this.add(s);const o=this;function l(O,P){let B=P;Object.defineProperty(o,O,{get:function(){return B!==void 0?B:P},set:function(z){B!==z&&(B=z,s[O]=z,i[O]=z,o.dispatchEvent({type:O+"-changed",value:z}),o.dispatchEvent(ZO))}}),o[O]=P,s[O]=P,i[O]=P}l("camera",e),l("object",void 0),l("enabled",!0),l("axis",null),l("mode","translate"),l("translationSnap",null),l("rotationSnap",null),l("scaleSnap",null),l("space","world"),l("size",1),l("dragging",!1),l("showX",!0),l("showY",!0),l("showZ",!0);const u=new Me,d=new Me,p=new vl,_=new vl,v=new Me,b=new vl,E=new Me,C=new Me,M=new Me,I=0,L=new Me;l("worldPosition",u),l("worldPositionStart",d),l("worldQuaternion",p),l("worldQuaternionStart",_),l("cameraPosition",v),l("cameraQuaternion",b),l("pointStart",E),l("pointEnd",C),l("rotationAxis",M),l("rotationAngle",I),l("eye",L),this._offset=new Me,this._startNorm=new Me,this._endNorm=new Me,this._cameraScale=new Me,this._parentPosition=new Me,this._parentQuaternion=new vl,this._parentQuaternionInv=new vl,this._parentScale=new Me,this._worldScaleStart=new Me,this._worldQuaternionInv=new vl,this._worldScale=new Me,this._positionStart=new Me,this._quaternionStart=new vl,this._scaleStart=new Me,this._getPointer=CCe.bind(this),this._onPointerDown=ACe.bind(this),this._onPointerHover=MCe.bind(this),this._onPointerMove=ICe.bind(this),this._onPointerUp=RCe.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye):this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;Db.setFromCamera(e,this.camera);const t=eL(this._gizmo.picker[this.mode],Db);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){Db.setFromCamera(e,this.camera);const t=eL(this._plane,Db,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,CG.mode=this.mode,this.dispatchEvent(CG)}}pointerMove(e){const t=this.axis,i=this.mode,s=this.object;let o=this.space;if(i==="scale"?o="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(o="world"),s===void 0||t===null||this.dragging===!1||e.button!==-1)return;Db.setFromCamera(e,this.camera);const l=eL(this._plane,Db,!0);if(l){if(this.pointEnd.copy(l.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),o==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),o==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),s.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(o==="local"&&(s.position.applyQuaternion(Ou.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.position.applyQuaternion(this._quaternionStart)),o==="world"&&(s.parent&&s.position.add(Nf.setFromMatrixPosition(s.parent.matrixWorld)),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.parent&&s.position.sub(Nf.setFromMatrixPosition(s.parent.matrixWorld))));else if(i==="scale"){if(t.search("XYZ")!==-1){let u=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(u*=-1),Jy.set(u,u,u)}else Nf.copy(this.pointStart),Jy.copy(this.pointEnd),Nf.applyQuaternion(this._worldQuaternionInv),Jy.applyQuaternion(this._worldQuaternionInv),Jy.divide(Nf),t.search("X")===-1&&(Jy.x=1),t.search("Y")===-1&&(Jy.y=1),t.search("Z")===-1&&(Jy.z=1);s.scale.copy(this._scaleStart).multiply(Jy),this.scaleSnap&&(t.search("X")!==-1&&(s.scale.x=Math.round(s.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(s.scale.y=Math.round(s.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(s.scale.z=Math.round(s.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const u=20/this.worldPosition.distanceTo(Nf.setFromMatrixPosition(this.camera.matrixWorld));t==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Nf.copy(this.rotationAxis).cross(this.eye))*u):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy($G[t]),Nf.copy($G[t]),o==="local"&&Nf.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Nf.cross(this.eye).normalize())*u),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),o==="local"&&t!=="E"&&t!=="XYZE"?(s.quaternion.copy(this._quaternionStart),s.quaternion.multiply(Ou.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),s.quaternion.copy(Ou.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),s.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(ZO),this.dispatchEvent(AG)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(MG.mode=this.mode,this.dispatchEvent(MG)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){!this.enabled||this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(ZO),this.dispatchEvent(AG),this.pointStart.copy(this.pointEnd))}getRaycaster(){return Db}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function CCe(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{const e=this.domElement.getBoundingClientRect();return{x:(n.clientX-e.left)/e.width*2-1,y:-(n.clientY-e.top)/e.height*2+1,button:n.button}}}function MCe(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n));break}}function ACe(n){!this.enabled||(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function ICe(n){!this.enabled||this.pointerMove(this._getPointer(n))}function RCe(n){!this.enabled||(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function eL(n,e,t){const i=e.intersectObject(n,!0);for(let s=0;s<i.length;s++)if(i[s].object.visible||t)return i[s];return!1}const UM=new U1,yl=new Me(0,1,0),IG=new Me(0,0,0),RG=new qr,HM=new vl,MA=new vl,P0=new Me,kG=new qr,nw=new Me(1,0,0),Vb=new Me(0,1,0),rw=new Me(0,0,1),GM=new Me,Gx=new Me,Wx=new Me;class kCe extends to{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new r0({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Rp({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=e.clone();i.opacity=.15;const s=t.clone();s.opacity=.5;const o=e.clone();o.color.setHex(16711680);const l=e.clone();l.color.setHex(65280);const u=e.clone();u.color.setHex(255);const d=e.clone();d.color.setHex(16711680),d.opacity=.5;const p=e.clone();p.color.setHex(65280),p.opacity=.5;const _=e.clone();_.color.setHex(255),_.opacity=.5;const v=e.clone();v.opacity=.25;const b=e.clone();b.color.setHex(16776960),b.opacity=.25,e.clone().color.setHex(16776960);const E=e.clone();E.color.setHex(7895160);const C=new zl(0,.04,.1,12);C.translate(0,.05,0);const M=new hu(.08,.08,.08);M.translate(0,.04,0);const I=new ai;I.setAttribute("position",new sr([0,0,0,1,0,0],3));const L=new zl(.0075,.0075,.5,3);L.translate(0,.25,0);function O(le,ce){const be=new Vg(le,.0075,3,64,ce*Math.PI*2);return be.rotateY(Math.PI/2),be.rotateX(Math.PI/2),be}function P(){const le=new ai;return le.setAttribute("position",new sr([0,0,0,1,1,1],3)),le}const B={X:[[new Fn(C,o),[.5,0,0],[0,0,-Math.PI/2]],[new Fn(C,o),[-.5,0,0],[0,0,Math.PI/2]],[new Fn(L,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Fn(C,l),[0,.5,0]],[new Fn(C,l),[0,-.5,0],[Math.PI,0,0]],[new Fn(L,l)]],Z:[[new Fn(C,u),[0,0,.5],[Math.PI/2,0,0]],[new Fn(C,u),[0,0,-.5],[-Math.PI/2,0,0]],[new Fn(L,u),null,[Math.PI/2,0,0]]],XYZ:[[new Fn(new Yg(.1,0),v.clone()),[0,0,0]]],XY:[[new Fn(new hu(.15,.15,.01),_.clone()),[.15,.15,0]]],YZ:[[new Fn(new hu(.15,.15,.01),d.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Fn(new hu(.15,.15,.01),p.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},z={X:[[new Fn(new zl(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new Fn(new zl(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Fn(new zl(.2,0,.6,4),i),[0,.3,0]],[new Fn(new zl(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Fn(new zl(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new Fn(new zl(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Fn(new Yg(.2,0),i)]],XY:[[new Fn(new hu(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new Fn(new hu(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Fn(new hu(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},G={START:[[new Fn(new Yg(.01,2),s),null,null,null,"helper"]],END:[[new Fn(new Yg(.01,2),s),null,null,null,"helper"]],DELTA:[[new wp(P(),s),null,null,null,"helper"]],X:[[new wp(I,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new wp(I,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new wp(I,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},j={XYZE:[[new Fn(O(.5,1),E),null,[0,Math.PI/2,0]]],X:[[new Fn(O(.5,.5),o)]],Y:[[new Fn(O(.5,.5),l),null,[0,0,-Math.PI/2]]],Z:[[new Fn(O(.5,.5),u),null,[0,Math.PI/2,0]]],E:[[new Fn(O(.75,1),b),null,[0,Math.PI/2,0]]]},H={AXIS:[[new wp(I,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},Z={XYZE:[[new Fn(new t0(.25,10,8),i)]],X:[[new Fn(new Vg(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Fn(new Vg(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Fn(new Vg(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Fn(new Vg(.75,.1,2,24),i)]]},ae={X:[[new Fn(M,o),[.5,0,0],[0,0,-Math.PI/2]],[new Fn(L,o),[0,0,0],[0,0,-Math.PI/2]],[new Fn(M,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Fn(M,l),[0,.5,0]],[new Fn(L,l)],[new Fn(M,l),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Fn(M,u),[0,0,.5],[Math.PI/2,0,0]],[new Fn(L,u),[0,0,0],[Math.PI/2,0,0]],[new Fn(M,u),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Fn(new hu(.15,.15,.01),_),[.15,.15,0]]],YZ:[[new Fn(new hu(.15,.15,.01),d),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Fn(new hu(.15,.15,.01),p),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Fn(new hu(.1,.1,.1),v.clone())]]},J={X:[[new Fn(new zl(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new Fn(new zl(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Fn(new zl(.2,0,.6,4),i),[0,.3,0]],[new Fn(new zl(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Fn(new zl(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new Fn(new zl(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Fn(new hu(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new Fn(new hu(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Fn(new hu(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Fn(new hu(.2,.2,.2),i),[0,0,0]]]},te={X:[[new wp(I,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new wp(I,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new wp(I,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function he(le){const ce=new to;for(const be in le)for(let $e=le[be].length;$e--;){const q=le[be][$e][0].clone(),oe=le[be][$e][1],se=le[be][$e][2],pe=le[be][$e][3],Se=le[be][$e][4];q.name=be,q.tag=Se,oe&&q.position.set(oe[0],oe[1],oe[2]),se&&q.rotation.set(se[0],se[1],se[2]),pe&&q.scale.set(pe[0],pe[1],pe[2]),q.updateMatrix();const Fe=q.geometry.clone();Fe.applyMatrix4(q.matrix),q.geometry=Fe,q.renderOrder=1/0,q.position.set(0,0,0),q.rotation.set(0,0,0),q.scale.set(1,1,1),ce.add(q)}return ce}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=he(B)),this.add(this.gizmo.rotate=he(j)),this.add(this.gizmo.scale=he(ae)),this.add(this.picker.translate=he(z)),this.add(this.picker.rotate=he(Z)),this.add(this.picker.scale=he(J)),this.add(this.helper.translate=he(G)),this.add(this.helper.rotate=he(H)),this.add(this.helper.scale=he(te)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:MA;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let i=[];i=i.concat(this.picker[this.mode].children),i=i.concat(this.gizmo[this.mode].children),i=i.concat(this.helper[this.mode].children);for(let s=0;s<i.length;s++){const o=i[s];o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition);let l;if(this.camera.isOrthographicCamera?l=(this.camera.top-this.camera.bottom)/this.camera.zoom:l=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(l*this.size/4),o.tag==="helper"){o.visible=!1,o.name==="AXIS"?(o.position.copy(this.worldPositionStart),o.visible=!!this.axis,this.axis==="X"&&(Ou.setFromEuler(UM.set(0,0,0)),o.quaternion.copy(t).multiply(Ou),Math.abs(yl.copy(nw).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Y"&&(Ou.setFromEuler(UM.set(0,0,Math.PI/2)),o.quaternion.copy(t).multiply(Ou),Math.abs(yl.copy(Vb).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Z"&&(Ou.setFromEuler(UM.set(0,Math.PI/2,0)),o.quaternion.copy(t).multiply(Ou),Math.abs(yl.copy(rw).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="XYZE"&&(Ou.setFromEuler(UM.set(0,Math.PI/2,0)),yl.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(RG.lookAt(IG,yl,Vb)),o.quaternion.multiply(Ou),o.visible=this.dragging),this.axis==="E"&&(o.visible=!1)):o.name==="START"?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):o.name==="END"?(o.position.copy(this.worldPosition),o.visible=this.dragging):o.name==="DELTA"?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),Nf.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Nf.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(Nf),o.visible=this.dragging):(o.quaternion.copy(t),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=this.axis.search(o.name)!==-1));continue}o.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(o.name==="X"&&Math.abs(yl.copy(nw).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Y"&&Math.abs(yl.copy(Vb).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Z"&&Math.abs(yl.copy(rw).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XY"&&Math.abs(yl.copy(rw).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="YZ"&&Math.abs(yl.copy(nw).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XZ"&&Math.abs(yl.copy(Vb).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):this.mode==="rotate"&&(HM.copy(t),yl.copy(this.eye).applyQuaternion(Ou.copy(t).invert()),o.name.search("E")!==-1&&o.quaternion.setFromRotationMatrix(RG.lookAt(this.eye,IG,Vb)),o.name==="X"&&(Ou.setFromAxisAngle(nw,Math.atan2(-yl.y,yl.z)),Ou.multiplyQuaternions(HM,Ou),o.quaternion.copy(Ou)),o.name==="Y"&&(Ou.setFromAxisAngle(Vb,Math.atan2(yl.x,yl.z)),Ou.multiplyQuaternions(HM,Ou),o.quaternion.copy(Ou)),o.name==="Z"&&(Ou.setFromAxisAngle(rw,Math.atan2(yl.y,yl.x)),Ou.multiplyQuaternions(HM,Ou),o.quaternion.copy(Ou))),o.visible=o.visible&&(o.name.indexOf("X")===-1||this.showX),o.visible=o.visible&&(o.name.indexOf("Y")===-1||this.showY),o.visible=o.visible&&(o.name.indexOf("Z")===-1||this.showZ),o.visible=o.visible&&(o.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(u){return o.name===u}))&&(o.material.color.setHex(16776960),o.material.opacity=1)}super.updateMatrixWorld(e)}}class OCe extends Fn{constructor(){super(new e0(1e5,1e5,2,2),new r0({visible:!1,wireframe:!0,side:nf,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),GM.copy(nw).applyQuaternion(t==="local"?this.worldQuaternion:MA),Gx.copy(Vb).applyQuaternion(t==="local"?this.worldQuaternion:MA),Wx.copy(rw).applyQuaternion(t==="local"?this.worldQuaternion:MA),yl.copy(Gx),this.mode){case"translate":case"scale":switch(this.axis){case"X":yl.copy(this.eye).cross(GM),P0.copy(GM).cross(yl);break;case"Y":yl.copy(this.eye).cross(Gx),P0.copy(Gx).cross(yl);break;case"Z":yl.copy(this.eye).cross(Wx),P0.copy(Wx).cross(yl);break;case"XY":P0.copy(Wx);break;case"YZ":P0.copy(GM);break;case"XZ":yl.copy(Wx),P0.copy(Gx);break;case"XYZ":case"E":P0.set(0,0,0);break}break;case"rotate":default:P0.set(0,0,0)}P0.length()===0?this.quaternion.copy(this.cameraQuaternion):(kG.lookAt(Nf.set(0,0,0),P0,yl),this.quaternion.setFromRotationMatrix(kG)),super.updateMatrixWorld(e)}}const tL=1,LCe=n=>{let{x:e,y:t,z:i}=n===void 0?{}:n;return e=e===void 0?tL:e,t=t===void 0?tL:t,i=i===void 0?tL:i,new cwe(e,t,i,2,.05)},DCe=.5,NCe=n=>{let{radius:e}=n===void 0?{}:n;return e=e===void 0?DCe:e,new t0(e,32,32)},QJ=.5,ZJ=1,BCe=n=>{let{radius:e,height:t}=n===void 0?{}:n;return e=e===void 0?QJ:e,t=t===void 0?ZJ:t,new zl(e,e,t,32,1,!1)},PCe=.4,FCe=.05,zCe=.2,UCe=.6,uk=n=>{let{length:e,radius:t}=n===void 0?{}:n;e=e===void 0?1:e,t=t===void 0?1:t;const i=PCe*e,s=zCe*.5*t,o=new zl(0,s,i,32,1),l=UCe*e,u=FCe*.5*t,d=new zl(u,u,l,32,1);var p=new qr;return p.setPosition(new Me(0,l*.5,0)),d.applyMatrix4(p),p.setPosition(new Me(0,l+i*.5,0)),o.applyMatrix4(p),IJ([o,d])},HCe=n=>{let{radius:e,height:t}=n===void 0?{}:n;e=e===void 0?QJ:e,t=t===void 0?ZJ:t;const i=new zl(e,e,t,32,1,!0),s=new t0(e,32,32,Math.PI,Math.PI),o=new t0(e,32,32,Math.PI,Math.PI);var l=new qr;l.makeRotationX(Math.PI/2),l.setPosition(0,t/2,0);var u=new qr;return u.makeRotationX(-Math.PI/2),u.setPosition(0,-t/2,0),s.applyMatrix4(l),o.applyMatrix4(u),IJ([i,s,o])},T$=(n,e,t)=>{if(n.current&&e){const i=typeof e.r=="function"?e.r(t)/255:e.r/255,s=typeof e.g=="function"?e.g(t)/255:e.g/255,o=typeof e.b=="function"?e.b(t)/255:e.b/255,l=typeof e.a=="function"?e.a(t):e.a;n.current.material.color.setRGB(i,s,o),n.current.material.opacity=l,n.current.material.transparent=l!==1}},GCe=n=>{let e=null;if(n.shape)n.shape==="cube"?e=LCe(n.shapeParams):n.shape==="cylinder"?e=BCe(n.shapeParams):n.shape==="sphere"?e=NCe(n.shapeParams):n.shape==="capsule"?e=HCe(n.shapeParams):n.shape==="arrow"&&(e=uk(n.shapeParams));else return[];return[{geometry:e,type:"part"}]};function UE(...n){const e=ge.useRef();return ge.useEffect(()=>{n.forEach(t=>{!t||(typeof t=="function"?t(e.current):t.current=e.current)})},[n]),e}function Ap(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[i,s]of n)if(!Object.is(s,e.get(i)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}const WCe=ge.forwardRef(({objectKey:n,displayTfs:e,position:t,rotation:i,scale:s,ghost:o,highlightColor:l,children:u},d)=>{const p=ge.useRef(null),_=UE(d,p),v=Lo(ge.useCallback(C=>C.tfs[n],[n]),Ap),b=Lo(C=>C.clock);Fm(ge.useCallback(()=>{const C=b.getElapsed()*1e3;_.current&&(_.current.position.set(t?t.x:typeof v.position.x=="function"?v.position.x(C):v.position.x,t?t.y:typeof v.position.y=="function"?v.position.y(C):v.position.y,t?t.z:typeof v.position.z=="function"?v.position.z(C):v.position.z),_.current.quaternion.set(i?i.x:typeof v.rotation.x=="function"?v.rotation.x(C):v.rotation.x,i?i.y:typeof v.rotation.y=="function"?v.rotation.y(C):v.rotation.y,i?i.z:typeof v.rotation.z=="function"?v.rotation.z(C):v.rotation.z,i?i.w:typeof v.rotation.w=="function"?v.rotation.w(C):v.rotation.w),_.current.scale.set(s?s.x:v.scale?typeof v.scale.x=="function"?v.scale.x(C):v.scale.x:0,s?s.y:v.scale?typeof v.scale.y=="function"?v.scale.y(C):v.scale.y:0,s?s.z:v.scale?typeof v.scale.z=="function"?v.scale.z(C):v.scale.z:0))},[v,t,i,s,_,b]));const E=uk();return Oh("group",{ref:_,dispose:null,up:[0,0,1],children:[e&&Oh(W$,{children:[an("axesHelper",{size:1}),an("mesh",{geometry:E,material:o?CA(l):Z0(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},`${n}ArrowX`),an("mesh",{geometry:E,material:o?CA(l):Z0(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},`${n}ArrowY`),an("mesh",{geometry:E,material:o?CA(l):Z0(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},`${n}ArrowZ`)]}),u]})});function VCe({displayTfs:n,children:e}){const t=uk();return Oh("group",{dispose:null,up:[0,0,1],children:[n&&Oh(W$,{children:[an("axesHelper",{size:1}),an("mesh",{geometry:t,material:Z0(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),an("mesh",{geometry:t,material:Z0(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),an("mesh",{geometry:t,material:Z0(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}function jCe({displayTfs:n,children:e}){const t=uk();return Oh("group",{dispose:null,up:[0,0,1],children:[n&&Oh(W$,{children:[an("axesHelper",{size:1}),an("mesh",{geometry:t,material:Z0(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),an("mesh",{geometry:t,material:Z0(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),an("mesh",{geometry:t,material:Z0(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}/**
 * postprocessing v6.30.1 build Fri Feb 24 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rüschen
 * @license Zlib
 */var XCe="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}";function OG(n,e){let t="texel";if(n!==null){const i=Number.parseInt(DE);if(!(e&&i>=133&&i!==135&&n.format===Ff&&n.type===tp&&n.encoding===ps))switch(n.encoding){case ps:t="sRGBToLinear(texel)";break;case mg:t="texel";break;default:throw new Error(`Unsupported encoding: ${n.encoding}`)}}return t}var Ms={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},v1={NONE:0,DEPTH:1,CONVOLUTION:2},Oo={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},EF={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},YCe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,KCe="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",JCe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],qCe=class extends bd{constructor(n=new vs){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new eo(null),texelSize:new eo(new vs),scale:new eo(1),kernel:new eo(0)},blending:lf,depthWrite:!1,depthTest:!1,fragmentShader:YCe,vertexShader:KCe}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this.kernelSize=EF.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return JCe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},QCe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,eq=class extends bd{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new eo(null),opacity:new eo(1)},blending:lf,depthWrite:!1,depthTest:!1,fragmentShader:QCe,vertexShader:XCe}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},ZCe=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,eMe=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,tMe=class extends bd{constructor(n=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new eo(null),cameraNear:new eo(.3),cameraFar:new eo(1e3)},blending:lf,depthWrite:!1,depthTest:!1,fragmentShader:ZCe,vertexShader:eMe}),this.toneMapped=!1,this.depthBuffer=n,this.depthPacking=lE,this.copyCameraSettings(e)}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=lE){this.depthBuffer=n,this.depthPacking=e}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Ja?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},nMe=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,rMe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",iMe=class extends bd{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new eo(null),normalBuffer:new eo(null),texelSize:new eo(new Vt)},blending:lf,depthWrite:!1,depthTest:!1,fragmentShader:nMe,vertexShader:rMe}),this.toneMapped=!1}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Nv){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},sMe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,oMe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",aMe=class extends bd{constructor(n,e,t,i,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:DE.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new eo(null),depthBuffer:new eo(null),resolution:new eo(new Vt),texelSize:new eo(new Vt),cameraNear:new eo(.3),cameraFar:new eo(1e3),aspect:new eo(1),time:new eo(0)},blending:lf,depthWrite:!1,depthTest:!1,dithering:s}),this.toneMapped=!1,n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Nv){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){var e,t,i,s,o;return this.fragmentShader=sMe.replace(Oo.FRAGMENT_HEAD,(e=n.get(Oo.FRAGMENT_HEAD))!=null?e:"").replace(Oo.FRAGMENT_MAIN_UV,(t=n.get(Oo.FRAGMENT_MAIN_UV))!=null?t:"").replace(Oo.FRAGMENT_MAIN_IMAGE,(i=n.get(Oo.FRAGMENT_MAIN_IMAGE))!=null?i:""),this.vertexShader=oMe.replace(Oo.VERTEX_HEAD,(s=n.get(Oo.VERTEX_HEAD))!=null?s:"").replace(Oo.VERTEX_MAIN_SUPPORT,(o=n.get(Oo.VERTEX_MAIN_SUPPORT))!=null?o:""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Ja?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return Oo}},lMe="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",uMe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",cMe=class extends bd{constructor(n=new Vt){super({name:"OutlineMaterial",uniforms:{inputBuffer:new eo(null),texelSize:new eo(new Vt)},blending:lf,depthWrite:!1,depthTest:!1,fragmentShader:lMe,vertexShader:uMe}),this.toneMapped=!1,this.uniforms.texelSize.value.set(n.x,n.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},hMe=new BE,qy=null;function dMe(){if(qy===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);qy=new ai,qy.setAttribute!==void 0?(qy.setAttribute("position",new Do(n,3)),qy.setAttribute("uv",new Do(e,2))):(qy.addAttribute("position",new Do(n,3)),qy.addAttribute("uv",new Do(e,2)))}return qy}var zm=class{constructor(n="Pass",e=new u$,t=hMe){this.name=n,this.renderer=null,this.scene=e,this.camera=t,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(n){if(this.rtt===n){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!n}}set mainScene(n){}set mainCamera(n){}setRenderer(n){this.renderer=n}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(n){let e=this.screen;e!==null?e.material=n:(e=new Fn(dMe(),n),e.frustumCulled=!1,this.scene===null&&(this.scene=new u$),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(n){this.fullscreenMaterial=n}getDepthTexture(){return null}setDepthTexture(n,e=Nv){}render(n,e,t,i,s){throw new Error("Render method not implemented!")}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Ic||e instanceof od||e instanceof ac||e instanceof zm)&&this[n].dispose()}}},pMe=class extends zm{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new eq,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new Ic(1,1,{minFilter:bl,magFilter:bl,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,s){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==tp?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n.outputEncoding===ps&&(this.renderTarget.texture.encoding=ps))}},fMe=class extends zm{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,s){const o=n.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},LG=new Nn,xF=class extends zm{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,s){const o=this.overrideClearColor,l=this.overrideClearAlpha,u=n.getClearAlpha(),d=o!==null,p=l>=0;d?(n.getClearColor(LG),n.setClearColor(o,p?l:u)):p&&n.setClearAlpha(l),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),d?n.setClearColor(LG,u):p&&n.setClearAlpha(u)}},Qy=-1,sf=class extends Bm{constructor(n,e=Qy,t=Qy,i=1){super(),this.resizable=n,this.baseSize=new Vt(1,1),this.preferredSize=new Vt(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new Vt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==Qy?t.width=e.width:e.height!==Qy?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==Qy?t.height=e.height:e.width!==Qy?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(Qy),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Qy}},nL=!1,DG=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case nf:t=this.materialsFlatShadedDoubleSide;break;case sd:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case nf:t=this.materialsDoubleSide;break;case sd:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[n.clone(),n.clone(),n.clone()];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=e_;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.side=sd,i}),this.materialsDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.side=nf,i}),this.materialsFlatShaded=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=sd,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=nf,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,nL){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const o of s)o[0].material=o[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=s}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return nL}static set workaroundEnabled(n){nL=n}},ck=class extends zm{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new xF,this.overrideMaterialManager=t===null?null:new DG(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new DG(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,s){const o=this.scene,l=this.camera,u=this.selection,d=l.layers.mask,p=o.background,_=n.shadowMap.autoUpdate,v=this.renderToScreen?null:e;u!==null&&l.layers.set(u.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(v),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,o,l):n.render(o,l),l.layers.mask=d,o.background=p,n.shadowMap.autoUpdate=_}},mMe=class extends zm{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:s=sf.AUTO_SIZE,height:o=sf.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new ck(n,e,new H$({depthPacking:lE}));const d=this.renderPass;d.skipShadowMapUpdate=!0,d.ignoreBackground=!0;const p=d.getClearPass();p.overrideClearColor=new Nn(16777215),p.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Ic(1,1,{minFilter:Ul,magFilter:Ul}),this.renderTarget.texture.name="DepthPass.Target");const _=this.resolution=new sf(this,l,u,i);_.addEventListener("change",v=>this.setSize(_.baseWidth,_.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},gMe=class extends zm{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=sf.AUTO_SIZE,height:i=sf.AUTO_SIZE,resolutionX:s=t,resolutionY:o=i}={}){super("DepthDownsamplingPass");const l=new iMe;l.normalBuffer=n,this.fullscreenMaterial=l,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ic(1,1,{minFilter:Ul,magFilter:Ul,depthBuffer:!1,type:j0}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const u=this.resolution=new sf(this,s,o,e);u.addEventListener("change",d=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Nv){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,s){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const i=n.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function NG(n,e,t){for(const i of e){const s="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),o=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const l of t.entries())l[1]!==null&&t.set(l[0],l[1].replace(o,s))}}function _Me(n,e,t){var i,s,o,l,u;let d=e.getFragmentShader(),p=e.getVertexShader();const _=d!==void 0&&/mainImage/.test(d),v=d!==void 0&&/mainUv/.test(d);if(t.attributes|=e.getAttributes(),d===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(v&&t.attributes&v1.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!_&&!v)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const b=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,E=t.shaderParts;let C=(i=E.get(Oo.FRAGMENT_HEAD))!=null?i:"",M=(s=E.get(Oo.FRAGMENT_MAIN_UV))!=null?s:"",I=(o=E.get(Oo.FRAGMENT_MAIN_IMAGE))!=null?o:"",L=(l=E.get(Oo.VERTEX_HEAD))!=null?l:"",O=(u=E.get(Oo.VERTEX_MAIN_SUPPORT))!=null?u:"";const P=new Set,B=new Set;if(v&&(M+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),p!==null&&/mainSupport/.test(p)){const j=/mainSupport *\([\w\s]*?uv\s*?\)/.test(p);O+=`	${n}MainSupport(`,O+=j?`vUv);
`:`);
`;for(const H of p.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const Z of H[1].split(/\s*,\s*/))t.varyings.add(Z),P.add(Z),B.add(Z);for(const H of p.matchAll(b))B.add(H[1])}for(const j of d.matchAll(b))B.add(j[1]);for(const j of e.defines.keys())B.add(j.replace(/\([\w\s,]*\)/g,""));for(const j of e.uniforms.keys())B.add(j);B.delete("while"),B.delete("for"),B.delete("if"),e.uniforms.forEach((j,H)=>t.uniforms.set(n+H.charAt(0).toUpperCase()+H.slice(1),j)),e.defines.forEach((j,H)=>t.defines.set(n+H.charAt(0).toUpperCase()+H.slice(1),j));const z=new Map([["fragment",d],["vertex",p]]);NG(n,B,t.defines),NG(n,B,z),d=z.get("fragment"),p=z.get("vertex");const G=e.blendMode;if(t.blendModes.set(G.blendFunction,G),_){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(I+=e.inputColorSpace===ps?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==null?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const j=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;I+=`${n}MainImage(color0, UV, `,t.attributes&v1.DEPTH&&j.test(d)&&(I+="depth, ",t.readDepth=!0),I+=`color1);
	`;const H=n+"BlendOpacity";t.uniforms.set(H,G.opacity),I+=`color0 = blend${G.blendFunction}(color0, color1, ${H});

	`,C+=`uniform float ${H};

`}if(C+=d+`
`,p!==null&&(L+=p+`
`),E.set(Oo.FRAGMENT_HEAD,C),E.set(Oo.FRAGMENT_MAIN_UV,M),E.set(Oo.FRAGMENT_MAIN_IMAGE,I),E.set(Oo.VERTEX_HEAD,L),E.set(Oo.VERTEX_MAIN_SUPPORT,O),e.extensions!==null)for(const j of e.extensions)t.extensions.add(j)}}var yMe=class extends zm{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new aMe(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new $Me;let e=0;for(const l of this.effects)if(l.blendMode.blendFunction===Ms.DST)n.attributes|=l.getAttributes()&v1.DEPTH;else{if(n.attributes&l.getAttributes()&v1.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${l.name})`);_Me("e"+e++,l,n)}let t=n.shaderParts.get(Oo.FRAGMENT_HEAD),i=n.shaderParts.get(Oo.FRAGMENT_MAIN_IMAGE),s=n.shaderParts.get(Oo.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const l of n.blendModes.values())t+=l.getShaderCode().replace(o,`blend${l.blendFunction}`)+`
`;n.attributes&v1.DEPTH?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===ps&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(Oo.FRAGMENT_HEAD,t),n.shaderParts.set(Oo.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(Oo.FRAGMENT_MAIN_UV,s),n.shaderParts.forEach((l,u,d)=>d.set(u,l==null?void 0:l.trim().replace(/^#/,`
#`))),this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Nv){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,s){for(const o of this.effects)o.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const o=this.fullscreenMaterial;o.inputBuffer=e.texture,o.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==tp&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},vMe=class extends zm{constructor({kernelSize:n=EF.MEDIUM,resolutionScale:e=.5,width:t=sf.AUTO_SIZE,height:i=sf.AUTO_SIZE,resolutionX:s=t,resolutionY:o=i}={}){super("KawaseBlurPass"),this.renderTargetA=new Ic(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const l=this.resolution=new sf(this,s,o,e);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight)),this._blurMaterial=new qCe,this._blurMaterial.kernelSize=n,this.copyMaterial=new eq}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const o=this.scene,l=this.camera,u=this.renderTargetA,d=this.renderTargetB,p=this.blurMaterial,_=p.kernelSequence;let v=e;this.fullscreenMaterial=p;for(let b=0,E=_.length;b<E;++b){const C=b&1?d:u;p.kernel=_[b],p.inputBuffer=v.texture,n.setRenderTarget(C),n.render(o,l),v=C}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=v.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(o,l)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,s=t.height;this.renderTargetA.setSize(i,s),this.renderTargetB.setSize(i,s),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==tp?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n.outputEncoding===ps&&(this.renderTargetA.texture.encoding=ps,this.renderTargetB.texture.encoding=ps))}static get AUTO_SIZE(){return sf.AUTO_SIZE}},bMe=class extends zm{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new xF(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,s){const o=n.getContext(),l=n.state.buffers,u=this.scene,d=this.camera,p=this.clearPass,_=this.inverted?0:1,v=1-_;l.color.setMask(!1),l.depth.setMask(!1),l.color.setLocked(!0),l.depth.setLocked(!0),l.stencil.setTest(!0),l.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),l.stencil.setFunc(o.ALWAYS,_,4294967295),l.stencil.setClear(v),l.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?p.render(n,null):(p.render(n,e),p.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(u,d)):(n.setRenderTarget(e),n.render(u,d),n.setRenderTarget(t),n.render(u,d)),l.color.setLocked(!1),l.depth.setLocked(!1),l.stencil.setLocked(!1),l.stencil.setFunc(o.EQUAL,1,4294967295),l.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),l.stencil.setLocked(!0)}},TMe=class extends zm{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:s=sf.AUTO_SIZE,height:o=sf.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new ck(n,e,new YP);const d=this.renderPass;d.ignoreBackground=!0,d.skipShadowMapUpdate=!0;const p=d.getClearPass();p.overrideClearColor=new Nn(7829503),p.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Ic(1,1,{minFilter:Ul,magFilter:Ul}),this.renderTarget.texture.name="NormalPass.Target");const _=this.resolution=new sf(this,l,u,i);_.addEventListener("change",v=>this.setSize(_.baseWidth,_.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,o,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},SMe=class extends zm{constructor(n,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=n,this.input=e}setInput(n){this.input=n}render(n,e,t,i,s){const o=this.fullscreenMaterial.uniforms;e!==null&&o!==void 0&&o[this.input]!==void 0&&(o[this.input].value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){t!==void 0&&t!==tp&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},rL=1/1e3,EMe=1e3,xMe=class{constructor(){this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*rL}get fixedDelta(){return this._fixedDelta*rL}set fixedDelta(n){this._fixedDelta=n*EMe}get elapsed(){return this._elapsed*rL}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=n!==void 0?n:performance.now(),this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()}handleEvent(n){document.hidden||(this.currentTime=performance.now())}dispose(){this.autoReset=!1}},wMe=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new pMe,this.depthTexture=null,this.passes=[],this.timer=new xMe,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new Vt),t=n.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===tp&&n.outputEncoding===ps&&(this.inputBuffer.texture.encoding=ps,this.outputBuffer.texture.encoding=ps,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const s of this.passes)s.initialize(n,t,i)}}replaceRenderer(n,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(n),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new BP;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=Cv,n.type=vv):n.type=Q_,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,i){const s=this.renderer,o=s===null?new Vt:s.getDrawingBufferSize(new Vt),l={minFilter:bl,magFilter:bl,stencilBuffer:e,depthBuffer:n,type:t},u=new Ic(o.width,o.height,l);return i>0&&(u.ignoreDepthForMultisampleCopy=!1,u.samples=i),t===tp&&s!==null&&s.outputEncoding===ps&&(u.texture.encoding=ps),u.texture.name="EffectComposer.Buffer",u.texture.generateMipmaps=!1,u}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new Vt),o=i.getContext().getContextAttributes().alpha,l=this.inputBuffer.texture.type;if(n.setRenderer(i),n.setSize(s.width,s.height),n.initialize(i,o,l),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const u=this.createDepthTexture();for(n of t)n.setDepthTexture(u)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const i=(s,o)=>s||o.needsDepthTexture;e.reduce(i,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,o=!1,l,u,d;n===void 0&&(this.timer.update(),n=this.timer.delta);for(const p of this.passes)p.enabled&&(p.render(e,i,s,n,o),p.needsSwap&&(o&&(t.renderToScreen=p.renderToScreen,l=e.getContext(),u=e.state.buffers.stencil,u.setFunc(l.NOTEQUAL,1,4294967295),t.render(e,i,s,n,o),u.setFunc(l.EQUAL,1,4294967295)),d=i,i=s,s=d),p instanceof bMe?o=!0:p instanceof fMe&&(o=!1))}setSize(n,e,t){const i=this.renderer,s=i.getSize(new Vt);(n===void 0||e===void 0)&&(n=s.width,e=s.height),(s.width!==n||s.height!==e)&&i.setSize(n,e,t);const o=i.getDrawingBufferSize(new Vt);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const l of this.passes)l.setSize(o.width,o.height)}reset(){const n=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=n}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},$Me=class{constructor(){this.shaderParts=new Map([[Oo.FRAGMENT_HEAD,null],[Oo.FRAGMENT_MAIN_UV,null],[Oo.FRAGMENT_MAIN_IMAGE,null],[Oo.VERTEX_HEAD,null],[Oo.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=v1.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=mg}},CMe=class extends Set{constructor(n,e=10){super(),this.l=e,this.exclusive=!1,n!==void 0&&this.set(n)}get layer(){return this.l}set layer(n){const e=this.l;for(const t of this)t.layers.disable(e),t.layers.enable(n);this.l=n}getLayer(){return this.layer}setLayer(n){this.layer=n}isExclusive(){return this.exclusive}setExclusive(n){this.exclusive=n}clear(){const n=this.layer;for(const e of this)e.layers.disable(n);return super.clear()}set(n){this.clear();for(const e of n)this.add(e);return this}indexOf(n){return this.has(n)?0:-1}add(n){return this.exclusive?n.layers.set(this.layer):n.layers.enable(this.layer),super.add(n)}delete(n){return this.has(n)&&n.layers.disable(this.layer),super.delete(n)}toggle(n){let e;return this.has(n)?(this.delete(n),e=!1):(this.add(n),e=!0),e}setVisible(n){for(const e of this)n?e.layers.enable(0):e.layers.disable(0);return this}},MMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",AMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",IMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",RMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",kMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",OMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",LMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",DMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",NMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",BMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",PMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",FMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",zMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",UMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",HMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",GMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",WMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",VMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",jMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",XMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",YMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",KMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",JMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",qMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",QMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",ZMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",eAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",tAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",nAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",rAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",iAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",sAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",oAe=new Map([[Ms.ADD,MMe],[Ms.ALPHA,AMe],[Ms.AVERAGE,IMe],[Ms.COLOR,RMe],[Ms.COLOR_BURN,kMe],[Ms.COLOR_DODGE,OMe],[Ms.DARKEN,LMe],[Ms.DIFFERENCE,DMe],[Ms.DIVIDE,NMe],[Ms.DST,null],[Ms.EXCLUSION,BMe],[Ms.HARD_LIGHT,PMe],[Ms.HARD_MIX,FMe],[Ms.HUE,zMe],[Ms.INVERT,UMe],[Ms.INVERT_RGB,HMe],[Ms.LIGHTEN,GMe],[Ms.LINEAR_BURN,WMe],[Ms.LINEAR_DODGE,VMe],[Ms.LINEAR_LIGHT,jMe],[Ms.LUMINOSITY,XMe],[Ms.MULTIPLY,YMe],[Ms.NEGATION,KMe],[Ms.NORMAL,JMe],[Ms.OVERLAY,qMe],[Ms.PIN_LIGHT,QMe],[Ms.REFLECT,ZMe],[Ms.SATURATION,eAe],[Ms.SCREEN,tAe],[Ms.SOFT_LIGHT,nAe],[Ms.SRC,rAe],[Ms.SUBTRACT,iAe],[Ms.VIVID_LIGHT,sAe]]),aAe=class extends Bm{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new eo(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return oAe.get(this.blendFunction)}},lAe=class extends Bm{constructor(n,e,{attributes:t=v1.NONE,blendFunction:i=Ms.NORMAL,defines:s=new Map,uniforms:o=new Map,extensions:l=null,vertexShader:u=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=u,this.defines=s,this.uniforms=o,this.extensions=l,this.blendMode=new aAe(i),this.blendMode.addEventListener("change",d=>this.setChanged()),this._inputColorSpace=mg,this._outputColorSpace=null}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Nv){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Ic||e instanceof od||e instanceof ac||e instanceof zm)&&this[n].dispose()}}};new Me;new qr;new Nn;var uAe=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texelToLinear(texture2D(patternTexture,vUvPattern));
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,cAe="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",hAe=class extends lAe{constructor(n,e,{blendFunction:t=Ms.SCREEN,patternTexture:i=null,patternScale:s=1,edgeStrength:o=1,pulseSpeed:l=0,visibleEdgeColor:u=16777215,hiddenEdgeColor:d=2230538,kernelSize:p=EF.VERY_SMALL,blur:_=!1,xRay:v=!0,multisampling:b=0,resolutionScale:E=.5,width:C=sf.AUTO_SIZE,height:M=sf.AUTO_SIZE,resolutionX:I=C,resolutionY:L=M}={}){super("OutlineEffect",uAe,{uniforms:new Map([["maskTexture",new eo(null)],["edgeTexture",new eo(null)],["edgeStrength",new eo(o)],["visibleEdgeColor",new eo(new Nn(u))],["hiddenEdgeColor",new eo(new Nn(d))],["pulse",new eo(1)],["patternScale",new eo(s)],["patternTexture",new eo(null)]])}),this.blendMode.addEventListener("change",z=>{this.blendMode.getBlendFunction()===Ms.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.setBlendFunction(t),this.patternTexture=i,this.xRay=v,this.scene=n,this.camera=e,this.renderTargetMask=new Ic(1,1),this.renderTargetMask.samples=b,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new Ic(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new xF,this.clearPass.overrideClearColor=new Nn(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new mMe(n,e),this.maskPass=new ck(n,e,new tMe(this.depthPass.texture,e));const O=this.maskPass.clearPass;O.overrideClearColor=new Nn(16777215),O.overrideClearAlpha=1,this.blurPass=new vMe({resolutionScale:E,resolutionX:I,resolutionY:L,kernelSize:p}),this.blurPass.enabled=_;const P=this.blurPass.resolution;P.addEventListener("change",z=>this.setSize(P.baseWidth,P.baseHeight)),this.outlinePass=new SMe(new cMe);const B=this.outlinePass.fullscreenMaterial;B.inputBuffer=this.renderTargetMask.texture,this.time=0,this.active=!1,this.selection=new CMe,this.selection.layer=10,this.pulseSpeed=l}set mainScene(n){this.scene=n,this.depthPass.mainScene=n,this.maskPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.maskPass.mainCamera=n,this.maskPass.overrideMaterial.copyCameraSettings(n)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(n){this.renderTargetMask.samples=n,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(n){this.uniforms.get("patternScale").value=n}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(n){this.uniforms.get("edgeStrength").value=n}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(n){this.uniforms.get("visibleEdgeColor").value=n}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(n){this.uniforms.get("hiddenEdgeColor").value=n}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(n){this.pulseSpeed=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get selectionLayer(){return this.selection.layer}set selectionLayer(n){this.selection.layer=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get xRay(){return this.defines.has("X_RAY")}set xRay(n){this.xRay!==n&&(n?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(n){this.xRay=n}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(n){if(n!==null?(n.wrapS=n.wrapT=aE,this.defines.set("USE_PATTERN","1"),this.setVertexShader(cAe)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.renderer!==null){const e=OG(n,this.renderer.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",e)}this.uniforms.get("patternTexture").value=n,this.setChanged()}setPatternTexture(n){this.patternTexture=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}setSelection(n){return this.selection.set(n),this}clearSelection(){return this.selection.clear(),this}selectObject(n){return this.selection.add(n),this}deselectObject(n){return this.selection.delete(n),this}update(n,e,t){const i=this.scene,s=this.camera,o=this.selection,l=this.uniforms.get("pulse"),u=i.background,d=s.layers.mask;o.size>0?(i.background=null,l.value=1,this.pulseSpeed>0&&(l.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.active=!0,this.time+=t,o.setVisible(!1),this.depthPass.render(n),o.setVisible(!0),s.layers.set(o.layer),this.maskPass.render(n,this.renderTargetMask),s.layers.mask=d,i.background=u,this.outlinePass.render(n,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(n,this.renderTargetOutline,this.renderTargetOutline)):this.active&&(this.clearPass.render(n,this.renderTargetOutline),this.active=!1)}setSize(n,e){this.blurPass.setSize(n,e),this.renderTargetMask.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e);const i=t.width,s=t.height;this.depthPass.setSize(i,s),this.renderTargetOutline.setSize(i,s),this.outlinePass.fullscreenMaterial.setSize(i,s)}initialize(n,e,t){const i=this.patternTexture,s=OG(i,n.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",s),this.blurPass.initialize(n,e,tp),t!==void 0&&(this.depthPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.outlinePass.initialize(n,e,t))}};new Me;new Me;let Vx;function dAe(){if(Vx!==void 0)return Vx;try{var n;let e;const t=document.createElement("canvas");return Vx=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))===null||n===void 0||n.loseContext()),Vx}catch{return Vx=!1}}const pAe=n=>!!n.current,BG=n=>pAe(n)?n.current:n,tq=ge.createContext(null),fAe=Vr.memo(ge.forwardRef((n,e)=>{let{children:t,camera:i,scene:s,resolutionScale:o,enabled:l=!0,renderPriority:u=1,autoClear:d=!0,depthBuffer:p,disableNormalPass:_,stencilBuffer:v,multisampling:b=8,frameBufferType:E=M1}=n;const{gl:C,scene:M,camera:I,size:L}=qd();s=s||M,i=i||I;const[O,P,B]=ge.useMemo(()=>{const j=dAe(),H=new wMe(C,{depthBuffer:p,stencilBuffer:v,multisampling:b>0&&j?b:0,frameBufferType:E});H.addPass(new ck(s,i));let Z=null,ae=null;return _||(ae=new TMe(s,i),ae.enabled=!1,H.addPass(ae),o!==void 0&&j&&(Z=new gMe({normalBuffer:ae.texture,resolutionScale:o}),Z.enabled=!1,H.addPass(Z))),[H,ae,Z]},[i,C,p,v,b,E,s,_,o]);ge.useEffect(()=>O==null?void 0:O.setSize(L.width,L.height),[O,L]),Fm((j,H)=>{l&&(C.autoClear=d,O.render(H))},l?u:0);const z=ge.useRef(null);ge.useLayoutEffect(()=>{let j;return z.current&&z.current.__r3f&&O&&(j=new yMe(i,...z.current.__r3f.objects),j.renderToScreen=!0,O.addPass(j),P&&(P.enabled=!0),B&&(B.enabled=!0)),()=>{j&&(O==null||O.removePass(j)),P&&(P.enabled=!1),B&&(B.enabled=!1)}},[O,t,i,P,B]);const G=ge.useMemo(()=>({composer:O,normalPass:P,downSamplingPass:B,resolutionScale:o,camera:i,scene:s}),[O,P,B,o,i,s]);return ge.useImperativeHandle(e,()=>O,[O]),an(tq.Provider,{value:G,children:an("group",{ref:z,children:t})})})),wF=ge.createContext(null);function mAe(n){let{children:e,enabled:t=!0}=n;const[i,s]=ge.useState([]),o=ge.useMemo(()=>({selected:i,select:s,enabled:t}),[i,s,t]);return Vr.createElement(wF.Provider,{value:o},e)}function nq(n){let{enabled:e=!1,children:t,...i}=n;const s=ge.useRef(null),o=ge.useContext(wF);return ge.useEffect(()=>{if(o&&e){let l=!1;const u=[];if(s.current.traverse(d=>{d.type==="Mesh"&&u.push(d),o.selected.indexOf(d)===-1&&(l=!0)}),l)return o.select(d=>[...d,...u]),()=>{o.select(d=>d.filter(p=>!u.includes(p)))}}},[e,t]),an("group",{ref:s,...i,children:t})}const gAe=ge.forwardRef(function(n,e){let{selection:t=[],selectionLayer:i=10,blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:d,hiddenEdgeColor:p,width:_,height:v,kernelSize:b,blur:E,xRay:C,...M}=n;const I=qd(z=>z.invalidate),{scene:L,camera:O}=ge.useContext(tq),P=ge.useMemo(()=>new hAe(L,O,{blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:d,hiddenEdgeColor:p,width:_,height:v,kernelSize:b,blur:E,xRay:C,...M}),[s,E,O,l,v,p,b,o,u,L,d,_,C]),B=ge.useContext(wF);return ge.useEffect(()=>{if(!B&&t)return P.selection.set(Array.isArray(t)?t.map(BG):[BG(t)]),I(),()=>{P.selection.clear(),I()}},[P,t,B]),ge.useEffect(()=>{P.selectionLayer=i,I()},[P,i]),ge.useRef(),ge.useEffect(()=>{if(B&&B.enabled){var z;if((z=B.selected)!=null&&z.length)return P.selection.set(B.selected),I(),()=>{P.selection.clear(),I()}}},[B]),an("primitive",{ref:e,object:P})}),_Ae=["cube","cylinder","sphere","capsule","arrow"],rq=ge.createContext(),yAe=n=>{const e=ge.useContext(rq)[n.shape];return _Ae.includes(n.shape)?GCe(n):e&&typeof e=="function"?e():(console.warn(`Shape not loaded: ${n.shape} (reading property 'shape' of item)`,n),[])},vAe=({meshes:n,children:e})=>an(rq.Provider,{value:n,children:e}),bAe=ge.memo(ge.forwardRef(({objectKey:n,highlightColor:e,position:t,rotation:i,scale:s,ghost:o},l)=>{const u=ge.useRef(null),d=UE(l,u),p=Lo(M=>M.onClick,Ap),_=Lo(M=>M.onPointerOver,Ap),v=Lo(M=>M.onPointerOut,Ap),b=Lo(M=>M.clock),E=Lo(ge.useCallback(M=>M.items[n],[n]),Ap),C=yAe(E);return Fm(ge.useCallback(()=>{const M=b.getElapsed()*1e3;d.current&&(d.current.position.set(t?t.x:typeof E.position.x=="function"?E.position.x(M):E.position.x,t?t.y:typeof E.position.y=="function"?E.position.y(M):E.position.y,t?t.z:typeof E.position.z=="function"?E.position.z(M):E.position.z),d.current.quaternion.set(i?i.x:typeof E.rotation.x=="function"?E.rotation.x(M):E.rotation.x,i?i.y:typeof E.rotation.y=="function"?E.rotation.y(M):E.rotation.y,i?i.z:typeof E.rotation.z=="function"?E.rotation.z(M):E.rotation.z,i?i.w:typeof E.rotation.w=="function"?E.rotation.w(M):E.rotation.w),d.current.scale.set(s?s.x:typeof E.scale.x=="function"?E.scale.x(M):E.scale.x,s?s.y:typeof E.scale.y=="function"?E.scale.y(M):E.scale.y,s?s.z:typeof E.scale.z=="function"?E.scale.z(M):E.scale.z),d.current.visible=typeof E.hidden=="function"?!E.hidden(M):!E.hidden)},[E,t,i,s,d,b])),an(nq,{enabled:E.highlighted,children:Oh("group",{ref:d,up:[0,0,1],children:[an("group",{up:[0,0,1],rotation:[Math.PI/2,0,0],onPointerDown:M=>{p(n,!d.current.visible,{local:{position:d.current.position,rotation:d.current.quaternion},world:{position:d.current.getWorldPosition(new Me),rotation:d.current.getWorldQuaternion(new vl)}},M)},onPointerOver:M=>{_(n,!d.current.visible,M)},onPointerOut:M=>{v(n,!d.current.visible,M)},children:C.map((M,I)=>an(iq,{idx:I,groupOrPart:M,objectKey:n,ghost:o,highlightColor:e},I))}),E.showName&&an(AJ,{distanceFactor:3,position:[0,0,.2],children:an("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey",padding:5,userSelect:"none"},children:E.name})})]})})})),TAe=ge.memo(({part:n,objectKey:e,ghost:t,highlightColor:i})=>{const s=Lo(ge.useCallback(_=>_.items[e].wireframe,[e])),o=Lo(ge.useCallback(_=>_.items[e].color,[e])),l=o!==void 0,u=ge.useRef(),d=ge.useRef(),p=Lo(_=>_.clock);return Fm(ge.useCallback(()=>{const _=p.getElapsed()*1e3;t||(T$(d,o,_),T$(u,o,_))},[t,u,d,p,o])),t?an("mesh",{ref:d,geometry:n.geometry,material:CA(i),scale:n.scale,castShadow:!1,receiveShadow:!1},"B"):l?Oh("group",{up:[0,0,1],children:[an("mesh",{ref:d,geometry:n.geometry,scale:n.scale,castShadow:!1,receiveShadow:!1,children:an("meshLambertMaterial",{transparent:!0,wireframe:s,attach:"material",opacity:1,side:sd})},"B"),an("mesh",{ref:u,geometry:n.geometry,scale:n.scale,castShadow:!1,receiveShadow:!1,children:an("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:s,opacity:1,side:e_})},"F")]}):an(W$,{children:an("mesh",{ref:u,geometry:n.geometry,material:n.material,scale:n.scale,castShadow:!0,receiveShadow:!0,wireframe:s},"I")})}),iq=ge.memo(({idx:n,groupOrPart:e,ghost:t,objectKey:i,highlightColor:s})=>e.type==="group"?an("group",{up:[0,0,1],position:e.position,rotation:e.rotation,scale:e.scale,children:e.children.map((o,l)=>an(iq,{idx:l,groupOrPart:o,objectKey:i,ghost:t,highlightColor:s},l))},n):an(TAe,{part:e,objectKey:i,highlightColor:s,ghost:t},n)),SAe=ge.forwardRef(({objectKey:n},e)=>{const t=ge.useRef(null),i=UE(e,t),{vertices:s,width:o,hidden:l}=Lo(ge.useCallback(u=>({vertices:u.lines[n].vertices,width:u.lines[n].width,hidden:u.lines[n].hidden}),[n]),Ap);return s.length<=1?null:an(mwe,{ref:i,visible:!l,points:s.map(u=>[u.position.x,u.position.y,u.position.z]),color:"white",vertexColors:s.map(u=>[u.color.r/255,u.color.g/255,u.color.b/255]),lineWidth:o})}),EAe=ge.forwardRef(({objectKey:n},e)=>{const t=ge.useRef(null),i=UE(e,t),s=Lo(C=>C.onClick,Ap),o=Lo(C=>C.onPointerOver,Ap),l=Lo(C=>C.onPointerOut,Ap),u=Lo(ge.useCallback(C=>C.hulls[n],[n]),Ap),d=Lo(ge.useCallback(C=>C.hulls[n].vertices,[n]),Ap),p=Lo(C=>C.clock),_=ge.useRef(),v=ge.useRef(),b=typeof d=="function"?d(0):d,E=new FH(b.map(C=>new Me(C.x,C.y,C.z)));return Fm(ge.useCallback(()=>{const C=p.getElapsed()*1e3;T$(v,u.color,C),T$(_,u.color,C);const M=typeof d=="function"?d(C):d;if(M!==b){const L=new FH(M.map(O=>new Me(O.x,O.y,O.z)));_.current.geometry=L,v.current.geometry=L}const I=typeof u.hidden=="function"?!u.hidden(C):!u.hidden;_.current.visible=I,v.current.visible=I},[_,v,b,u,p,d])),an(nq,{enabled:u.highlighted,children:Oh("group",{ref:i,up:[0,0,1],children:[Oh("group",{up:[0,0,1],onPointerDown:C=>{s(n,_.current.visible,C)},onPointerOver:C=>{o(n,_.current.visible,C)},onPointerOut:C=>{l(n,_.current.visible,C)},children:[an("mesh",{ref:v,geometry:E,castShadow:!1,receiveShadow:!1,children:an("meshLambertMaterial",{transparent:!0,wireframe:u.wireframe,attach:"material",side:sd})},`${n}B`),an("mesh",{ref:_,geometry:E,castShadow:!1,receiveShadow:!1,children:an("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:u.wireframe,side:e_})},`${n}F`)]}),u.showName&&an(AJ,{distanceFactor:2,position:[0,0,.5],children:an("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey"},className:"disable-text-selection",children:u.name})})]})})}),xAe=ge.forwardRef(({objectKey:n},e)=>{const t=ge.useRef(null),i=UE(e,t),s=ge.useRef(),o=Lo(u=>u.clock),l=Lo(ge.useCallback(u=>u.texts[n],[n]));return Fm(ge.useCallback(()=>{const u=o.getElapsed()*1e3;i.current&&(i.current.position.set(typeof l.position.x=="function"?l.position.x(u):l.position.x,typeof l.position.y=="function"?l.position.y(u):l.position.y,typeof l.position.z=="function"?l.position.z(u):l.position.z),i.current.visible=typeof l.hidden=="function"?!l.hidden(u):!l.hidden),s.current&&T$(s,l.color,u)},[l,i,o])),an("group",{ref:i,children:an(fwe,{follow:!0,children:an(u$e,{ref:s,depthOffset:2,scale:[.2,.2,.2],children:l.value})})})}),wAe=ge.forwardRef(({objectKey:n},e)=>{const t=ge.useRef(null),i=UE(e,t),s=Lo(_=>_.clock),{points:o,scale:l,hidden:u}=Lo(ge.useCallback(_=>({points:_.points[n].points,scale:_.points[n].scale,hidden:_.points[n].hidden}),[n]),Ap),[{positions:d,colors:p}]=ge.useState(()=>({positions:new Float32Array(o.length*3),colors:new Float32Array(o.length*3)}));return Fm(()=>{const _=s.getElapsed()*1e3;if(i.current)for(let v=0;v<o.length;v++){let b=v*3;d[b]=typeof o[v].position.x=="function"?o[v].position.x(_):o[v].position.x,d[b+1]=typeof o[v].position.y=="function"?o[v].position.y(_):o[v].position.y,d[b+2]=typeof o[v].position.z=="function"?o[v].position.z(_):o[v].position.z,p[b]=typeof o[v].color.r=="function"?o[v].color.r(_)/255:o[v].color.r/255,p[b+1]=typeof o[v].color.g=="function"?o[v].color.g(_)/255:o[v].color.g/255,p[b+2]=typeof o[v].color.b=="function"?o[v].color.b(_)/255:o[v].color.b/255}}),o.length<=1?null:an(j$e,{ref:i,hidden:u,positions:d,colors:p,children:an(z$e,{transparent:!0,vertexColors:!0,sizeAttenuation:!0,depthWrite:!0,size:l*.1})})}),$F=ge.memo(({activeTf:n,displayTfs:e,allTfs:t,allItems:i,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:d,ghosts:p,targetRef:_,targetId:v,targetSource:b,filterActive:E,tfFilter:C,customProps:M})=>{const I=n==="world"?VCe:n==="gizmo"?jCe:WCe,L=n===v?M:{},O=E?t.filter(B=>C.includes(B.key)):t,P=E&&n!==_;return Oh(I,{objectKey:n,displayTfs:e,ref:v===n?_:null,...L,ghost:p,highlightColor:d,children:[O.filter(B=>B.frame===n||n==="world"&&!B.frame).map(B=>an($F,{activeTf:B.key,displayTfs:e,allTfs:t,allItems:i,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:d,ghosts:p,targetRef:_,targetSource:b,targetId:v,filterActive:P,tfFilter:C,customProps:M},B.key)),i.filter(B=>B.frame===n||n==="world"&&!B.frame).map(B=>{const z=B.key===v&&b==="items"?M:{};return!E||B.key===v||n===v?an(bAe,{objectKey:B.key,highlightColor:d,ghost:p,ref:B.key===v?_:null,...z},B.key):null}),s.filter(B=>B.frame===n||n==="world"&&!B.frame).map(B=>{const z=B.key===v&&b==="lines"?M:{};return!E||B.key===v||n===v?an(SAe,{objectKey:B.key,ref:B.lineKey===v?_:null,...z},B.key):null}),o.filter(B=>B.frame===n||n==="world"&&!B.frame).map(B=>{const z=B.key===v&&b==="hulls"?M:{};return!E||B.key===v||n===v?an(EAe,{objectKey:B.key,highlightColor:d,ghost:p,ref:B.key===v?_:null,...z},B.key):null}),l.filter(B=>B.frame===n||n==="world"&&!B.frame).map(B=>{const z=B.key===v&&b==="texts"?M:{};return!E||B.key===v||n===v?an(xAe,{objectKey:B.key,highlightColor:d,ref:B.key===v?_:null,...z},B.key):null}),u.filter(B=>B.frame===n||n==="world"&&!B.frame).map(B=>{const z=B.key===v&&b==="points"?M:{};return!E||B.key===v||n===v?an(wAe,{objectKey:B.key,highlightColor:d,ref:B.key===v?_:null,...z},B.key):null})]})}),$Ae=["enabled","axis","translationSnap","rotationSnap","scaleSnap","space","size"],CAe=["displayTfs","allTfs","allItems","allLines","allHulls","allTexts","allPoints","highlightColor"],MAe=ge.memo(({camera:n,objectInfo:e,highlightColor:t,translateSnap:i,rotateSnap:s,scaleSnap:o,onDragStart:l,onDragEnd:u,mode:d,...p})=>{const _=jO(p,$Ae),v=jO(p,CAe),b=Lo(ge.useCallback(te=>{let he=[];e.source==="tfs"&&he.push(e.key);let le=te[e.source][e.key].frame;for(;le&&le!=="world"&&le!=="gizmo";){let ce=te.tfs[le];he.push(le),le=ce.frame}return he},[e]),Ap),E=ge.useRef(),C=ge.useRef(),M=Lo(te=>jO(te[e.source][e.key],["position","rotation","scale"]),Ap),I=qd(({gl:te})=>te),L=qd(({camera:te})=>te),O=qd(({invalidate:te})=>te),P=n||L,[B]=ge.useState(()=>new $Ce(P,I.domElement));B.translationSnap=i,B.rotationSnap=s,B.scaleSnap=o,d!=null&&d.includes("translate")?B.mode="translate":d!=null&&d.includes("rotate")?B.mode="rotate":d!=null&&d.includes("scale")&&(B.mode="scale"),d!=null&&d.includes("-x")?(B.showY=!1,B.showZ=!1):d!=null&&d.includes("-y")?(B.showX=!1,B.showZ=!1):d!=null&&d.includes("-z")&&(B.showX=!1,B.showY=!1);const[z,G]=ge.useState(!1),[j,H]=ge.useState(M),[Z,ae]=ge.useState(!1);ge.useEffect(()=>{console.log("refreshing transform"),H(M)},[M,Z]);const J=Lo(te=>te.onMove,Ap);return ge.useEffect(()=>{const te=he=>{var le,ce,be;const $e=(le=C==null?void 0:C.current)==null?void 0:le.position,q=(ce=C==null?void 0:C.current)==null?void 0:ce.quaternion,oe=(be=C==null?void 0:C.current)==null?void 0:be.scale;he.value&&!z?(console.log("starting transform"),G(!0),H({position:$e,rotation:q,scale:oe}),l&&l()):!he.value&&z&&(console.log("stopping transform"),G(!1),u&&u(),J(e.key,e.source,{position:B.worldPosition,quaternion:B.worldQuaternion,scale:B._worldScale},{position:$e?{x:$e.x,y:$e.y,z:$e.z}:null,quaternion:q?{x:q.x,y:q.y,z:q.z,w:q.w}:null,scale:oe?{x:oe.x,y:oe.y,z:oe.z}:null}),ae(!Z))};return B&&B.addEventListener("dragging-changed",te),()=>{B.removeEventListener("dragging-changed",te)}},[M,z,e]),ge.useEffect(()=>void(B==null?void 0:B.attach(C.current)),[C,B]),ge.useEffect(()=>(B&&B.addEventListener("change",O),()=>{var te;return(te=B==null?void 0:B.removeEventListener)==null?void 0:te.call(B,"change",O)}),[B,O]),B?Oh(W$,{children:[an("primitive",{ref:E,object:B,..._}),an($F,{...v,activeTf:"world",tfFilter:b,ghosts:!0,targetRef:C,targetSource:e.source,targetId:e.key,filterActive:!0,customProps:{...j}})]}):null}),Nb=(n,e)=>n.length!==e.length?!1:!n.some((t,i)=>!sg.exports.isEqual(e[i],t));function AAe({displayTfs:n=!1,displayGrid:e=!0,isPolar:t=!1,backgroundColor:i="#d0d0d0",planeColor:s="#a8a8a8",highlightColor:o="#00ffff",plane:l=0,translateSnap:u=0,rotateSnap:d=0,scaleSnap:p=0,debug:_=!1}){_&&console.log("content rerender");const v=qd(J=>J.camera),b=Lo(J=>J.clock,Ap);Fm(()=>{b.update()});const E=Lo(J=>sg.exports.sortBy(Object.entries(J.tfs).map(([te,he])=>({key:te,frame:he.frame,transformMode:he.transformMode,source:"tfs"})),te=>te.key),Nb),C=Lo(J=>sg.exports.sortBy(Object.entries(J.items).map(([te,he])=>({key:te,frame:he.frame,transformMode:he.transformMode,source:"items"})),te=>te.key),Nb),M=Lo(J=>sg.exports.sortBy(Object.entries(J.lines).map(([te,he])=>({key:te,frame:he.frame,source:"lines"})),te=>te.key),Nb),I=Lo(J=>sg.exports.sortBy(Object.entries(J.hulls).map(([te,he])=>({key:te,frame:he.frame,source:"hulls"})),te=>te.key),Nb),L=Lo(J=>sg.exports.sortBy(Object.entries(J.texts).map(([te,he])=>({key:te,frame:he.frame,source:"texts"})),te=>te.key),Nb),O=Lo(J=>sg.exports.sortBy(Object.entries(J.points).map(([te,he])=>({key:te,frame:he.frame,source:"points"})),te=>te.key),Nb),P=Lo(J=>sg.exports.sortBy(Object.entries(J.widgets).map(([te,he])=>({key:te,frame:he.frame,source:"widgets"})),te=>te.key),Nb),B=[...C,...E].filter(J=>["translate","rotate","scale","translate-x","translate-y","translate-z","rotate-x","rotate-y","rotate-z","scale-x","scale-y","scale-z"].includes(J.transformMode)),z=ge.useRef(),G=ge.useRef(),j=ge.useRef(),H=ge.useRef(),Z=wCe(s),ae=[Z.r,Z.g,Z.b,.5];return Oh(Vr.Fragment,{children:[an(P$e,{ref:H,makeDefault:!0,camera:v}),an("pointLight",{ref:G,intensity:.5,position:[-1,-3,3],color:"#FFFAEE"}),an(ECe,{ref:z,intensity:.7,color:"white"}),an(xCe,{ref:j,castShadow:!0,position:[5,15,15],intensity:.6,color:"#FFFAEE"}),an("spotLight",{penumbra:1,position:[-1,-1,4],intensity:.3,castShadow:!0,color:"#FFFAEE"}),an("color",{attach:"background",args:[i]}),an("fogExp2",{attach:"fog",args:[i,.01]}),an(H$e,{receiveShadow:!0,scale:1e3,position:[0,0,l-.01],material:Z0(...ae)}),Oh(mAe,{children:[an(fAe,{autoClear:!1,children:an(gAe,{visibleEdgeColor:o,hiddenEdgeColor:o,blur:!0,kernelSize:1,edgeStrength:50,pulseSpeed:.25,xRay:!0})}),an($F,{activeTf:"world",displayTfs:n,allTfs:E,allItems:C,allLines:M,allHulls:I,allTexts:L,allPoints:O,allWidgets:P,highlightColor:o})]}),an("group",{position:[0,0,l],rotation:[Math.PI/2,0,0],up:[0,0,1],children:e&&(t?an("polarGridHelper",{args:[10,16,8,64,"white","gray"]}):an("gridHelper",{args:[20,20,"white","gray"]}))}),B.map(J=>an(MAe,{objectInfo:J,mode:J.transformMode,displayTfs:n,allTfs:E,allItems:C,allLines:M,allHulls:I,allTexts:L,allPoints:O,allWidgets:P,translateSnap:u,rotateSnap:d,scaleSnap:p,highlightColor:o,onDragEnd:()=>{H.current&&(H.current.enabled=!0)},onDragStart:()=>{H.current&&(H.current.enabled=!1)}},`movableObjectTransform-${J.key}`))]})}to.DefaultUp.set(0,0,1);function IAe({backgroundColor:n="#d0d0d0",store:e,fov:t=60,onPointerMissed:i=()=>{},meshLookup:s={},debug:o=!1,...l}){return o&&console.log("Scene rerender"),an(Xxe,{camera:{up:[0,0,1],fov:t,position:[0,-3,3]},shadows:!0,style:{background:n||"#d0d0d0"},onPointerMissed:i||(()=>{}),children:an(SCe,{store:e,debug:o,children:an(vAe,{meshes:s,children:an(ge.Suspense,{children:an(AAe,{...l,backgroundColor:n,debug:o})})})})})}var CF={},RAe=RE;Object.defineProperty(CF,"__esModule",{value:!0});var sq=CF.default=void 0,kAe=RAe(PR()),OAe=Pe;sq=CF.default=(0,kAe.default)((0,OAe.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt");var MF={},LAe=RE;Object.defineProperty(MF,"__esModule",{value:!0});var oq=MF.default=void 0,DAe=LAe(PR()),NAe=Pe;oq=MF.default=(0,DAe.default)((0,NAe.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");var AF={},BAe=RE;Object.defineProperty(AF,"__esModule",{value:!0});var aq=AF.default=void 0,PAe=BAe(PR()),FAe=Pe;aq=AF.default=(0,PAe.default)((0,FAe.jsx)("path",{d:"M6 6h12v12H6z"}),"Stop");const zAe="/gpu-programming/assets/compile-worker-zKwuajBM.js",UAe={Left:"LEFT_ARM_CONNECTOR_1",Right:"RIGHT_ARM_CONNECTOR_1",Head:"HEAD_1",Neck:"NECK_GLOBE_BASE_1",Base:"base_link"},Hi=n=>UAe[n],HAe={s_Acceptance:"s_Acceptance.wav",s_Amazement:"s_Amazement.wav",s_Amazement2:"s_Amazement2.wav",s_Anger:"s_Anger.wav",s_Anger2:"s_Anger2.wav",s_Anger3:"s_Anger3.wav",s_Anger4:"s_Anger4.wav",s_Annoyance:"s_Annoyance.wav",s_Annoyance2:"s_Annoyance2.wav",s_Annoyance3:"s_Annoyance3.wav",s_Annoyance4:"s_Annoyance4.wav",s_Awe:"s_Awe.wav",s_Awe2:"s_Awe2.wav",s_Awe3:"s_Awe3.wav",s_Boredom:"s_Boredom.wav",s_Disapproval:"s_Disapproval.wav",s_Disgust:"s_Disgust.wav",s_Disgust2:"s_Disgust2.wav",s_Disgust3:"s_Disgust3.wav",s_DisorientedConfused:"s_DisorientedConfused.wav",s_DisorientedConfused2:"s_DisorientedConfused2.wav",s_DisorientedConfused3:"s_DisorientedConfused3.wav",s_DisorientedConfused4:"s_DisorientedConfused4.wav",s_DisorientedConfused5:"s_DisorientedConfused5.wav",s_DisorientedConfused6:"s_DisorientedConfused6.wav",s_Distraction:"s_Distraction.wav",s_Ecstacy:"s_Ecstacy.wav",s_Ecstacy2:"s_Ecstacy2.wav",s_Fear:"s_Fear.wav",s_Grief:"s_Grief.wav",s_Grief2:"s_Grief2.wav",s_Grief3:"s_Grief3.wav",s_Grief4:"s_Grief4.wav",s_Joy:"s_Joy.wav",s_Joy2:"s_Joy2.wav",s_Joy3:"s_Joy3.wav",s_Joy4:"s_Joy4.wav",s_Loathing:"s_Loathing.wav",s_Love:"s_Love.wav",s_PhraseByeBye:"s_PhraseByeBye.wav",s_PhraseEvilAhHa:"s_PhraseEvilAhHa.wav",s_PhraseHello:"s_PhraseHello.wav",s_PhraseNoNoNo:"s_PhraseNoNoNo.wav",s_PhraseOopsy:"s_PhraseOopsy.wav",s_PhraseOwOwOw:"s_PhraseOwOwOw.wav",s_PhraseOwwww:"s_PhraseOwwww.wav",s_PhraseUhOh:"s_PhraseUhOh.wav",s_Rage:"s_Rage.wav",s_Sadness:"s_Sadness.wav",s_Sadness2:"s_Sadness2.wav",s_Sadness3:"s_Sadness3.wav",s_Sadness4:"s_Sadness4.wav",s_Sadness5:"s_Sadness5.wav",s_Sadness6:"s_Sadness6.wav",s_Sadness7:"s_Sadness7.wav",s_Sleepy:"s_Sleepy.wav",s_Sleepy2:"s_Sleepy2.wav",s_Sleepy3:"s_Sleepy3.wav",s_Sleepy4:"s_Sleepy4.wav",s_SleepySnore:"s_SleepySnore.wav",s_SystemCameraShutter:"s_SystemCameraShutter.wav"},PG=n=>HAe[n],H_={e_Sleeping:"e_Sleeping.jpg",e_SleepingZZZ:"e_SleepingZZZ.jpg",e_Contempt:"e_Contempt.jpg",e_ContentLeft:"e_ContentLeft.jpg",e_ContentRight:"e_ContentRight.jpg",e_Disoriented:"e_Disoriented.jpg",e_EcstacyHilarious:"e_EcstacyHilarious.jpg",e_EcstacyStarryEyed:"e_EcstacyStarryEyed.jpg",e_JoyGoofy:"e_JoyGoofy.jpg",e_JoyGoofy2:"e_JoyGoofy2.jpg",e_JoyGoofy3:"e_JoyGoofy3.jpg",e_Love:"e_Love.jpg",e_Rage:"e_Rage.jpg",e_Rage2:"e_Rage2.jpg",e_Rage3:"e_Rage3.jpg",e_Rage4:"e_Rage4.jpg",e_RemorseShame:"e_RemorseShame.jpg",eyes_acceptance:"eyes_acceptance.jpg",eyes_admiration:"eyes_admiration.jpg",eyes_amazement:"eyes_amazement.jpg",eyes_anger:"eyes_anger.jpg",eyes_annoyed:"eyes_annoyed.jpg",eyes_anticipation:"eyes_anticipation.png",eyes_apprehension:"eyes_apprehension.jpg",eyes_apprehension_1:"eyes_apprehension_1.jpg",eyes_boredom:"eyes_boredom.jpg",eyes_default:"eyes_default.jpg",eyes_disgust:"eyes_disgust.jpg",eyes_distraction:"eyes_distraction.gif",eyes_ecstasy_frame_1:"eyes_ecstasy_frame_1.jpg",eyes_ecstasy_frame_2:"eyes_ecstasy_frame_2.jpg",eyes_fear:"eyes_fear.jpg",eyes_grief:"eyes_grief.jpg",eyes_interest:"eyes_interest.jpg",eyes_joy:"eyes_joy.jpg",eyes_loathing:"eyes_loathing.jpg",eyes_pensiveness:"eyes_pensiveness.jpg",eyes_rage:"eyes_rage.jpg",eyes_sad:"eyes_sad.jpg",eyes_serenity:"eyes_serenity.jpg",eyes_surprise:"eyes_surprise.png",eyes_terror:"eyes_terror.jpg",eyes_trust:"eyes_trust.jpg",eyes_vigilance:"eyes_vigilance.jpg"},GAe=n=>H_[n],WAe=({blocks:n,tfs:e,items:t})=>{var ae;var i=e[Hi("Left")],s=e[Hi("Right")],o=e[Hi("Head")],l=e[Hi("Base")];let u={Left:{x:[i.rotation.x],y:[i.rotation.y],z:[i.rotation.z],w:[i.rotation.w]},Right:{x:[s.rotation.x],y:[s.rotation.y],z:[s.rotation.z],w:[s.rotation.w]},Head:{x:[o.rotation.x],y:[o.rotation.y],z:[o.rotation.z],w:[o.rotation.w]},Base:{position:{x:[l.position.x],y:[l.position.y],z:[l.position.z],angle:[0],distance:[0]},rotation:{x:[l.rotation.x],y:[l.rotation.y],z:[l.rotation.z],w:[l.rotation.w]}},Time:[0]},d=Object.keys(H_);for(let J=0;J<d.length;J++){let te=d[J];u[te]=[!!((ae=t[te])!=null&&ae.hidden)]}const p=(J,te,he)=>{if(J==="both")_(te,he,te,he);else if(he>0){var le=J,ce=J==="Left"?"Right":"Left",be={rotation:{x:u[le].x[u[le].x.length-1],y:u[le].y[u[le].y.length-1],z:u[le].z[u[le].z.length-1],w:u[le].w[u[le].w.length-1]}},$e=oA(be.rotation),q=2*nd*sA*Math.abs($e.y-te),oe=q/(he/100*E2),se={x:0,y:te-x2,z:0},pe=1;if(se.y<0&&$e.y>0||se.y>0&&$e.y<0){let Re=(se.y-$e.y)/2,qe=se.y-Re;var Se=Py(0,qe*nd/180,0);u[le].w.push(Se._w),u[le].x.push(Se._x),u[le].y.push(Se._y),u[le].z.push(Se._z),u.Time.push(oe/2),pe+=1}var Fe=Py(se.x,se.y*nd/180,se.z);u[le].w.push(Fe._w),u[le].x.push(Fe._x),u[le].y.push(Fe._y),u[le].z.push(Fe._z);for(let Re=0;Re<pe;Re++){u[ce].w.push(u[ce].w[u[ce].w.length-1]),u[ce].x.push(u[ce].x[u[ce].x.length-1]),u[ce].y.push(u[ce].y[u[ce].y.length-1]),u[ce].z.push(u[ce].z[u[ce].z.length-1]),u.Head.x.push(u.Head.x[u.Head.x.length-1]),u.Head.y.push(u.Head.y[u.Head.y.length-1]),u.Head.z.push(u.Head.z[u.Head.z.length-1]),u.Head.w.push(u.Head.w[u.Head.w.length-1]),u.Base.position.x.push(u.Base.position.x[u.Base.position.x.length-1]),u.Base.position.y.push(u.Base.position.y[u.Base.position.y.length-1]),u.Base.position.z.push(u.Base.position.z[u.Base.position.z.length-1]),u.Base.rotation.w.push(u.Base.rotation.w[u.Base.rotation.w.length-1]),u.Base.rotation.x.push(u.Base.rotation.x[u.Base.rotation.x.length-1]),u.Base.rotation.y.push(u.Base.rotation.y[u.Base.rotation.y.length-1]),u.Base.rotation.z.push(u.Base.rotation.z[u.Base.rotation.z.length-1]);let qe=Object.keys(H_);for(let Ne=0;Ne<qe.length;Ne++){let it=qe[Ne];u[it].push(u[it][u[it].length-1])}}pe>1?u.Time.push(oe/2):u.Time.push(oe)}},_=(J,te,he,le)=>{if(te>0||le>0){var ce={rotation:{x:u.Left.x[u.Left.x.length-1],y:u.Left.y[u.Left.y.length-1],z:u.Left.z[u.Left.z.length-1],w:u.Left.w[u.Left.w.length-1]}},be={rotation:{x:u.Right.x[u.Right.x.length-1],y:u.Right.y[u.Right.y.length-1],z:u.Right.z[u.Right.z.length-1],w:u.Right.w[u.Right.w.length-1]}},$e=oA(ce.rotation),q=2*nd*sA*Math.abs($e.y-J),oe=q/(te/100*E2),se=oA(be.rotation),pe=2*nd*sA*Math.abs(se.y-he),Se=pe/(le/100*E2),Fe=te===0?Se:le===0?oe:Math.max(oe,Se),Re={x:0,y:J-x2,z:0},qe=Py(Re.x,Re.y*nd/180,Re.z),Ne={x:0,y:he-x2,z:0},it=Py(Ne.x,Ne.y*nd/180,Ne.z);let dt=1;if(Re.y<0&&$e.y>0||Re.y>0&&$e.y<0||Ne.y<0&&se.y>0||Ne.y>0&&se.y<0){let Ue=(Re.y-$e.y)/2,Ae=(Re.y-$e.y)/2,je=Re.y-Ue,nt=Ne.y-Ae;var st=Py(0,je*nd/180,0),pt=Py(0,nt*nd/180,0);te>0?(u.Left.w.push(st._w),u.Left.x.push(st._x),u.Left.y.push(st._y),u.Left.z.push(st._z)):(u.Left.w.push(u.Left.w[u.Left.w.length-1]),u.Left.x.push(u.Left.x[u.Left.x.length-1]),u.Left.y.push(u.Left.y[u.Left.y.length-1]),u.Left.z.push(u.Left.z[u.Left.z.length-1])),le>0?(u.Right.w.push(pt._w),u.Right.x.push(pt._x),u.Right.y.push(pt._y),u.Right.z.push(pt._z)):(u.Right.w.push(u.Right.w[u.Right.w.length-1]),u.Right.x.push(u.Right.x[u.Right.x.length-1]),u.Right.y.push(u.Right.y[u.Right.y.length-1]),u.Right.z.push(u.Right.z[u.Right.z.length-1])),u.Time.push(Fe/2),dt+=1}te>0?(u.Left.w.push(qe._w),u.Left.x.push(qe._x),u.Left.y.push(qe._y),u.Left.z.push(qe._z)):(u.Left.w.push(u.Left.w[u.Left.w.length-1]),u.Left.x.push(u.Left.x[u.Left.x.length-1]),u.Left.y.push(u.Left.y[u.Left.y.length-1]),u.Left.z.push(u.Left.z[u.Left.z.length-1])),le>0?(u.Right.w.push(it._w),u.Right.x.push(it._x),u.Right.y.push(it._y),u.Right.z.push(it._z)):(u.Right.w.push(u.Right.w[u.Right.w.length-1]),u.Right.x.push(u.Right.x[u.Right.x.length-1]),u.Right.y.push(u.Right.y[u.Right.y.length-1]),u.Right.z.push(u.Right.z[u.Right.z.length-1]));for(let Ue=0;Ue<dt;Ue++){u.Head.x.push(u.Head.x[u.Head.x.length-1]),u.Head.y.push(u.Head.y[u.Head.y.length-1]),u.Head.z.push(u.Head.z[u.Head.z.length-1]),u.Head.w.push(u.Head.w[u.Head.w.length-1]),u.Base.position.x.push(u.Base.position.x[u.Base.position.x.length-1]),u.Base.position.y.push(u.Base.position.y[u.Base.position.y.length-1]),u.Base.position.z.push(u.Base.position.z[u.Base.position.z.length-1]),u.Base.rotation.w.push(u.Base.rotation.w[u.Base.rotation.w.length-1]),u.Base.rotation.x.push(u.Base.rotation.x[u.Base.rotation.x.length-1]),u.Base.rotation.y.push(u.Base.rotation.y[u.Base.rotation.y.length-1]),u.Base.rotation.z.push(u.Base.rotation.z[u.Base.rotation.z.length-1]);let Ae=Object.keys(H_);for(let je=0;je<Ae.length;je++){let nt=Ae[je];u[nt].push(u[nt][u[nt].length-1])}}dt>1?u.Time.push(Fe/2):u.Time.push(Fe)}},v=(J,te,he,le)=>{if(le>0){var ce=Py(te*nd/180,J*nd/180,he*nd/180);u.Head.w.push(ce._w),u.Head.x.push(ce._x),u.Head.y.push(ce._y),u.Head.z.push(ce._z),u.Left.w.push(u.Left.w[u.Left.w.length-1]),u.Left.x.push(u.Left.x[u.Left.x.length-1]),u.Left.y.push(u.Left.y[u.Left.y.length-1]),u.Left.z.push(u.Left.z[u.Left.z.length-1]),u.Right.w.push(u.Right.w[u.Right.w.length-1]),u.Right.x.push(u.Right.x[u.Right.x.length-1]),u.Right.y.push(u.Right.y[u.Right.y.length-1]),u.Right.z.push(u.Right.z[u.Right.z.length-1]),u.Base.position.x.push(u.Base.position.x[u.Base.position.x.length-1]),u.Base.position.y.push(u.Base.position.y[u.Base.position.y.length-1]),u.Base.position.z.push(u.Base.position.z[u.Base.position.z.length-1]),u.Base.rotation.w.push(u.Base.rotation.w[u.Base.rotation.w.length-1]),u.Base.rotation.x.push(u.Base.rotation.x[u.Base.rotation.x.length-1]),u.Base.rotation.y.push(u.Base.rotation.y[u.Base.rotation.y.length-1]),u.Base.rotation.z.push(u.Base.rotation.z[u.Base.rotation.z.length-1]);let be=Object.keys(H_);for(let $e=0;$e<be.length;$e++){let q=be[$e];u[q].push(u[q][u[q].length-1])}u.Time.push(le)}},b=(J,te,he)=>{if(he>0){var le={position:{x:u.Base.position.x[u.Base.position.x.length-1],y:u.Base.position.y[u.Base.position.y.length-1],z:u.Base.position.z[u.Base.position.z.length-1]},rotation:{x:u.Base.rotation.x[u.Base.rotation.x.length-1],y:u.Base.rotation.y[u.Base.rotation.y.length-1],z:u.Base.rotation.z[u.Base.rotation.z.length-1],w:u.Base.rotation.w[u.Base.rotation.w.length-1]}},ce=te/100*Yre*he/D0,be=J/100*Xre*he/D0,$e=new Lu(le.rotation.x,le.rotation.y,le.rotation.z,le.rotation.w),q=Qre($e);if(ce!==0){var oe={x:0,y:0,z:ce};$e=Py(oe.x,oe.y,oe.z),$e.multiply(new Lu(le.rotation.x,le.rotation.y,le.rotation.z,le.rotation.w))}let se=le.position.x,pe=le.position.y,Se=null;Se=new Bt(se+Math.sin(q-ce)*be,pe-Math.cos(q-ce)*be,le.position.z),u.Base.position.x.push(Se.x),u.Base.position.y.push(Se.y),u.Base.position.z.push(Se.z),u.Base.position.angle.push(ce),u.Base.position.distance.push(be),u.Base.rotation.w.push($e._w),u.Base.rotation.x.push($e._x),u.Base.rotation.y.push($e._y),u.Base.rotation.z.push($e._z),u.Head.x.push(u.Head.x[u.Head.x.length-1]),u.Head.y.push(u.Head.y[u.Head.y.length-1]),u.Head.z.push(u.Head.z[u.Head.z.length-1]),u.Head.w.push(u.Head.w[u.Head.w.length-1]),u.Left.w.push(u.Left.w[u.Left.w.length-1]),u.Left.x.push(u.Left.x[u.Left.x.length-1]),u.Left.y.push(u.Left.y[u.Left.y.length-1]),u.Left.z.push(u.Left.z[u.Left.z.length-1]),u.Right.w.push(u.Right.w[u.Right.w.length-1]),u.Right.x.push(u.Right.x[u.Right.x.length-1]),u.Right.y.push(u.Right.y[u.Right.y.length-1]),u.Right.z.push(u.Right.z[u.Right.z.length-1]);let Fe=Object.keys(H_);for(let Re=0;Re<Fe.length;Re++){let qe=Fe[Re];u[qe].push(u[qe][u[qe].length-1])}u.Time.push(he)}},E=(J,te)=>{let he=Object.keys(H_);for(let ce=0;ce<he.length;ce++){let be=he[ce];u[be].push(J!==be)}let le=u.Head.x.length-1;u.Base.position.x.push(u.Base.position.x[le]),u.Base.position.y.push(u.Base.position.y[le]),u.Base.position.z.push(u.Base.position.z[le]),u.Base.rotation.w.push(u.Base.rotation.w[le]),u.Base.rotation.x.push(u.Base.rotation.x[le]),u.Base.rotation.y.push(u.Base.rotation.y[le]),u.Base.rotation.z.push(u.Base.rotation.z[le]),u.Head.x.push(u.Head.x[le]),u.Head.y.push(u.Head.y[le]),u.Head.z.push(u.Head.z[le]),u.Head.w.push(u.Head.w[le]),u.Left.w.push(u.Left.w[le]),u.Left.x.push(u.Left.x[le]),u.Left.y.push(u.Left.y[le]),u.Left.z.push(u.Left.z[le]),u.Right.w.push(u.Right.w[le]),u.Right.x.push(u.Right.x[le]),u.Right.y.push(u.Right.y[le]),u.Right.z.push(u.Right.z[le]),u.Time.push(te)},C=J=>{let te=u.Head.x.length-1;u.Base.position.x.push(u.Base.position.x[te]),u.Base.position.y.push(u.Base.position.y[te]),u.Base.position.z.push(u.Base.position.z[te]),u.Base.rotation.w.push(u.Base.rotation.w[te]),u.Base.rotation.x.push(u.Base.rotation.x[te]),u.Base.rotation.y.push(u.Base.rotation.y[te]),u.Base.rotation.z.push(u.Base.rotation.z[te]),u.Head.x.push(u.Head.x[te]),u.Head.y.push(u.Head.y[te]),u.Head.z.push(u.Head.z[te]),u.Head.w.push(u.Head.w[te]),u.Left.w.push(u.Left.w[te]),u.Left.x.push(u.Left.x[te]),u.Left.y.push(u.Left.y[te]),u.Left.z.push(u.Left.z[te]),u.Right.w.push(u.Right.w[te]),u.Right.x.push(u.Right.x[te]),u.Right.y.push(u.Right.y[te]),u.Right.z.push(u.Right.z[te]);let he=Object.keys(H_);for(let le=0;le<he.length;le++){let ce=he[le];u[ce].push(u[ce][te])}u.Time.push(J)},M=()=>{let J=JSON.parse(JSON.stringify(e)),te=JSON.parse(JSON.stringify(e)),he=JSON.parse(JSON.stringify(t)),le=JSON.parse(JSON.stringify(t)),ce=u.Time.length,be=0,$e=[],q=[],oe=[],se=[],pe=[],Se=[],Fe=[],Re=[],qe=[],Ne=[],it=[],st=[],pt=[],dt=[],Ue=[],Ae=[],je=[],nt=[],tt=[],Dt=[],Rt=[],yt=Object.keys(H_);for(let we=0;we<yt.length;we++)Rt.push([]);for(let we=1;we<ce;we++){let ct=u.Time[we],Tt=new Lu(u.Left.x[we],u.Left.y[we],u.Left.z[we],u.Left.w[we]),At=new Lu(u.Right.x[we],u.Right.y[we],u.Right.z[we],u.Right.w[we]),ft=new Lu(u.Head.x[we],u.Head.y[we],u.Head.z[we],u.Head.w[we]),Ke=new Lu(u.Base.rotation.x[we],u.Base.rotation.y[we],u.Base.rotation.z[we],u.Base.rotation.w[we]),Oe=new Bt(u.Base.position.x[we],u.Base.position.y[we],u.Base.position.z[we]);for(let Q=10;Q<NT;Q+=10){$e.push(ct/D0*Q+be);let ne=new Lu(u.Left.x[we-1],u.Left.y[we-1],u.Left.z[we-1],u.Left.w[we-1]),fe=new Lu(u.Right.x[we-1],u.Right.y[we-1],u.Right.z[we-1],u.Right.w[we-1]),Ie=new Lu(u.Head.x[we-1],u.Head.y[we-1],u.Head.z[we-1],u.Head.w[we-1]),Ye=new Lu(u.Base.rotation.x[we-1],u.Base.rotation.y[we-1],u.Base.rotation.z[we-1],u.Base.rotation.w[we-1]),Gt=new Bt(u.Base.position.x[we-1],u.Base.position.y[we-1],u.Base.position.z[we-1]);ne.slerp(Tt,Q/NT),fe.slerp(At,Q/NT),Ie.slerp(ft,Q/NT),Ye.slerp(Ke,Q/NT),Gt.lerp(Oe,Q/NT),q.push(ne._w),oe.push(ne._x),se.push(ne._y),pe.push(ne._z),Se.push(fe._w),Fe.push(fe._x),Re.push(fe._y),qe.push(fe._z),Ne.push(Ie._w),it.push(Ie._x),st.push(Ie._y),pt.push(Ie._z),dt.push(Gt.x),Ue.push(Gt.y),Ae.push(Gt.z),je.push(Ye._w),nt.push(Ye._x),tt.push(Ye._y),Dt.push(Ye._z);for(let He=0;He<yt.length;He++)Rt[He].push(u[yt[He]][we])}be+=ct}let Ct=new Lu(u.Left.x[ce-1],u.Left.y[ce-1],u.Left.z[ce-1],u.Left.w[ce-1]),Mt=new Lu(u.Right.x[ce-1],u.Right.y[ce-1],u.Right.z[ce-1],u.Right.w[ce-1]),mt=new Lu(u.Head.x[ce-1],u.Head.y[ce-1],u.Head.z[ce-1],u.Head.w[ce-1]),xe=new Lu(u.Base.rotation.x[ce-1],u.Base.rotation.y[ce-1],u.Base.rotation.z[ce-1],u.Base.rotation.w[ce-1]),ie=new Bt(u.Base.position.x[ce-1],u.Base.position.y[ce-1],u.Base.position.z[ce-1]);$e.push(1/0),q.push(Ct._w),oe.push(Ct._x),se.push(Ct._y),pe.push(Ct._z),Se.push(Mt._w),Fe.push(Mt._x),Re.push(Mt._y),qe.push(Mt._z),Ne.push(mt._w),it.push(mt._x),st.push(mt._y),pt.push(mt._z),dt.push(ie.x),Ue.push(ie.y),Ae.push(ie.z),je.push(xe._w),nt.push(xe._x),tt.push(xe._y),Dt.push(xe._z);for(let we=0;we<yt.length;we++)Rt[we].push(u[yt[we]][ce-1]),he[yt[we]].hidden=$h($e,Rt[we]),le[yt[we]].hidden=u[yt[we]][ce-1];return J[Hi("Left")].rotation.w=$h($e,q),J[Hi("Left")].rotation.x=$h($e,oe),J[Hi("Left")].rotation.y=$h($e,se),J[Hi("Left")].rotation.z=$h($e,pe),te[Hi("Left")].rotation.w=Ct._w,te[Hi("Left")].rotation.x=Ct._x,te[Hi("Left")].rotation.y=Ct._y,te[Hi("Left")].rotation.z=Ct._z,J[Hi("Right")].rotation.w=$h($e,Se),J[Hi("Right")].rotation.x=$h($e,Fe),J[Hi("Right")].rotation.y=$h($e,Re),J[Hi("Right")].rotation.z=$h($e,qe),te[Hi("Right")].rotation.w=Mt._w,te[Hi("Right")].rotation.x=Mt._x,te[Hi("Right")].rotation.y=Mt._y,te[Hi("Right")].rotation.z=Mt._z,J[Hi("Head")].rotation.w=$h($e,Ne),J[Hi("Head")].rotation.x=$h($e,it),J[Hi("Head")].rotation.y=$h($e,st),J[Hi("Head")].rotation.z=$h($e,pt),te[Hi("Head")].rotation.w=mt._w,te[Hi("Head")].rotation.x=mt._x,te[Hi("Head")].rotation.y=mt._y,te[Hi("Head")].rotation.z=mt._z,J[Hi("Base")].rotation.w=$h($e,je),J[Hi("Base")].rotation.x=$h($e,nt),J[Hi("Base")].rotation.y=$h($e,tt),J[Hi("Base")].rotation.z=$h($e,Dt),J[Hi("Base")].position.x=$h($e,dt),J[Hi("Base")].position.y=$h($e,Ue),J[Hi("Base")].position.z=$h($e,Ae),te[Hi("Base")].rotation.w=xe._w,te[Hi("Base")].rotation.x=xe._x,te[Hi("Base")].rotation.y=xe._y,te[Hi("Base")].rotation.z=xe._z,te[Hi("Base")].position.x=ie.x,te[Hi("Base")].position.y=ie.y,te[Hi("Base")].position.z=ie.z,{newTfs:J,newEndingTfs:te,newItems:he,newEndingItems:le}},I=J=>Object.values(n).filter(te=>te.type===J)[0],L=J=>n[J],O=(J,te)=>{const he=L(J);let le=L(te);if(j(he,he.type))for(j(le,le.type);le.next;)le=L(le.next),j(le,le.type)},P=J=>J==="TRUE";function B(J,te){return J=Math.ceil(J),te=Math.floor(te),Math.floor(Math.random()*(te-J+1))+J}function z(J){if(J===2||J===3)return!0;if(J<=1||J%2===0||J%3===0)return!1;for(let te=5;te*te<=J;te+=6)if(J%te===0||J%(te+2)===0)return!1;return!0}function G(J){var te;if(typeof J!="string"&&typeof J!="object")return J.shadow.fields.NUM;{let he=(te=J==null?void 0:J.shadow)!=null&&te.id?L(J.shadow.id):L(J);return j(he,he.type)}}const j=(J,te)=>{var yt,Ct,Mt;switch(!0){case te==="controls_if":if(!J.inputs||!J.inputs.IF0||!J.inputs.DO0)throw new Error("err: controls_if not complete!");O(J.inputs.IF0,J.inputs.DO0);break;case te==="logic_boolean":return P(J.fields.BOOL);case te==="logic_compare":if(!J.inputs||!J.inputs.A||!J.inputs.B)throw new Error("err: logic_compare is not complete!");const mt=J.fields.OP,xe=J.inputs.A,ie=J.inputs.B,we=L(xe),ct=L(ie);if(mt==="EQ")return j(we,we.type)==j(ct,ct.type);if(mt==="NEQ")return j(we,we.type)!==j(ct,ct.type);if(mt==="LT")return j(we,we.type)<j(ct,ct.type);if(mt==="LTE")return j(we,we.type)<=j(ct,ct.type);if(mt==="GT")return j(we,we.type)>j(ct,ct.type);if(mt==="GTE")return j(we,we.type)>=j(ct,ct.type);case te==="logic_operation":if(!J.inputs||!J.inputs.A||!J.inputs.B)throw new Error("err: logic_operation is not complete!");const Tt=J.fields.OP,At=J.inputs.A,ft=J.inputs.B,Ke=L(At),Oe=L(ft);return Tt==="OR"?j(Ke,Ke.type)||j(Oe,Oe.type):j(Ke,Ke.type)&&j(Oe,Oe.type);case te==="logic_negate":if(!J.inputs)throw new Error("err: logic_negate is not complete!");const Q=L(J.inputs.BOOL);return!j(Q,Q.type);case te==="logic_boolean":return!J.fields.BOOL!=="FALSE";case te==="logic_null":return null;case te==="logic_ternary":if(!J.inputs||!J.inputs.IF||!J.inputs.THEN||!J.inputs.ELSE)throw new Error("err: logic_ternary is not complete!");const ne=J.inputs.IF,fe=J.inputs.THEN,Ie=J.inputs.ELSE,Ye=L(ne),Gt=L(fe),He=L(Ie);return j(Ye,Ye.type)?j(Gt,Gt.type):j(He,He.type);case te==="controls_repeat_ext":const _t=G(J.inputs.TIMES);if(!J.inputs.DO)throw new Error("err: controls_repeat_ext is not complete!");let Kt=L(J.inputs.DO);for(let wr=0;wr<_t;wr++){j(Kt,Kt.type);let si=Kt;for(;si.next;)si=L(si.next),j(si,si.type)}return;case te==="math_number":return J.fields.NUM;case te=="BasicSlider":case te=="ArmPositionSlider":case te=="SpeedSlider":case te=="TimeSlider":case te=="HeadPitchSlider":case te=="HeadRollSlider":case te=="HeadYawSlider":return J.fields.FIELD_slider_value;case te==="math_number_property":const Yt=J.fields.PROPERTY,Rn=G(J.inputs.NUMBER_TO_CHECK);if(Yt==="EVEN")return Rn%2===0;if(Yt==="ODD")return Rn%2===1;if(Yt==="PRIME")return z(Rn);if(Yt==="WHOLE")return Rn%1===0;if(Yt==="POSITIVE")return Rn>0;if(Yt==="NEGATIVE")return Rn<0;if(Yt==="DIVISIBLE_BY"){if(!J.inputs||!J.inputs.DIVISOR)throw new Error("err: DIVISOR is not filled!");if(J.inputs.DIVISOR===0)throw new Error("Note that divisor cannot be 0!");return Rn%J.inputs.DIVISOR===0}return;case te==="math_random_int":const ii=G(J.inputs.FROM),Dr=G(J.inputs.TO);return B(ii,Dr);case te==="colour_picker":return BT(J.fields.COLOUR);case te==="colour_random":let Si=B(0,255),xr=B(0,255),fr=B(0,255);return{r:Si,g:xr,b:fr};case te==="colour_rgb":const re=G(J.inputs.RED),Te=G(J.inputs.GREEN),Ge=G(J.inputs.BLUE);return{r:re,g:Te,b:Ge};case te==="colour_blend":const ot=G(J.inputs.RATIO),Ft=BT(J.inputs.COLOUR1.shadow.fields.COLOUR),nn=BT(J.inputs.COLOUR2.shadow.fields.COLOUR),On=Ft.r*ot,De=Ft.g*ot,gt=Ft.b*ot,$t=nn.r,vt=nn.g,Wt=nn.b,Un=($t+On)/(ot+1),tr=(vt+De)/(ot+1),mr=(Wt+gt)/(ot+1);return{r:Un,g:tr,b:mr};case te==="ChangeLED":if(!J.inputs||!J.inputs.FIELD_ChangeLED)throw new Error("err: ChangeLED is not complete!");var he=L(J.inputs.FIELD_ChangeLED),le=null;(yt=he==null?void 0:he.fields)!=null&&yt.COLOUR?le=BT(he.fields.COLOUR):le=j(he,he.type);var Se={Red:le.r,Green:le.g,Blue:le.b};return;case te==="TransitionLED":if(!J.inputs||!J.inputs.COLOR1||!J.inputs.COLOR2)throw new Error("err: TransitionLED is not complete!");var ce=L(J.inputs.COLOR1),be=L(J.inputs.COLOR2),$e=null;(Ct=ce==null?void 0:ce.fields)!=null&&Ct.COLOUR?$e=BT(ce.fields.COLOUR):$e=j(ce,ce.type);var q=null;(Mt=be==null?void 0:be.fields)!=null&&Mt.COLOUR?q=BT(be.fields.COLOUR):q=j(be,be.type);var tt=J.fields.FIELD_TransitionTime_TimeMs*D0,oe=J.fields.TRANSITION_TYPE,Se={Red:$e.r,Green:$e.g,Blue:$e.b,Red2:q.r,Green2:q.g,Blue2:q.b,TransitionType:oe,TimeMS:tt};return;case te==="DisplayImage":if(!J.inputs||!J.inputs.FIELD_DisplayImage_Filename)throw new Error("err: DisplayImage is not complete!");var se=L(J.inputs.FIELD_DisplayImage_Filename),pe=GAe(se.type);E(se.type,500);return;case te==="PlayAudio":if(!J.inputs||!J.inputs.FIELD_PlayAudio_Filename)throw new Error("err: PlayAudio is not complete!");var se=L(J.inputs.FIELD_PlayAudio_Filename),pe=PG(se.type);return;case te==="DisplayAnimation":if(!J.inputs||!J.inputs.FIELD_DisplayAnimation_Filename)throw new Error("err: DisplayAnimation is not complete!");var se=L(J.inputs.FIELD_DisplayAnimation_Filename),pe=PG(se.type),Se={FileName:pe};readFile(Se);return;case te==="DisplayText":J.fields.FIELD_DisplayText_Text;return;case te==="TurnOnFlashlight":return;case te==="TurnOffFlashlight":return;case te==="WaitForSeconds":var tt=parseFloat(J.fields.NumSeconds)*D0;C(tt);return;case te==="MoveArm":var Fe=J.fields.FIELD_MoveArm_Arm==="Right"?"Right":"Left",Re=G(J.fields.FIELD_MoveArm_Position),Ae=G(J.fields.FIELD_MoveArm_Velocity);p(Fe,Re,Ae);return;case te==="MoveArm2":var Re=G(J.fields.FIELD_MoveArm2_Position),Ae=G(J.fields.FIELD_MoveArm2_Velocity),Fe="both";p(Fe,Re,Ae);return;case te==="MoveArm3":var Fe=J.fields.FIELD_MoveArm_Arm==="Right"?"Right":"Left",Re=G(J.fields.FIELD_MoveArm_Position),Ae=G(J.fields.FIELD_MoveArm_Velocity);p(Fe,Re,Ae);return;case te==="MoveArms2":var qe=G(J.inputs.FIELD_MoveArm_LeftPosition),Ne=G(J.inputs.FIELD_MoveArm_LeftVelocity),it=G(J.inputs.FIELD_MoveArm_RightPosition),st=G(J.inputs.FIELD_MoveArm_RightVelocity);_(qe,Ne,it,st);return;case te==="MoveHead":var pt=J.fields.FIELD_MoveHead_Pitch==="D"?25:-40,tt=2e3;v(pt,0,0,tt);return;case te==="MoveHead3":var pt,dt,Ue;pt=G(J.inputs.FIELD_MoveHead_Pitch),dt=G(J.inputs.FIELD_MoveHead_Roll),Ue=G(J.inputs.FIELD_MoveHead_Yaw),tt=G(J.inputs.FIELD_MoveHead_Time)*D0,v(pt,dt,Ue,tt);return;case te==="DriveTime":var nt=J.fields.FIELD_DriveTime_Direction,Ae=parseInt(J.fields.FIELD_DriveTime_Velocity),tt=parseInt(J.fields.FIELD_DriveTime_TimeMs)*D0,je=nt==="F"?Ae:-Ae;b(je,0,tt);return;case te==="DriveTime2":var je=G(J.inputs.FIELD_DriveTime_Velocity),Dt=G(J.inputs.FIELD_DriveTime_Angular),tt=G(J.inputs.FIELD_DriveTime_TimeMs)*D0;b(je,Dt,tt);return;case te==="Turn":var nt=J.fields.FIELD_Turn_Direction,tt=parseInt(J.fields.FIELD_Turn_Duration)*D0,Dt=nt==="L"?100:-100;b(0,Dt,tt);return;case te==="Turn2":var nt=J.fields.FIELD_Turn_Direction,tt=parseInt(G(J.inputs.FIELD_Turn_Duration))*D0,Dt=nt==="L"?100:-100;b(0,Dt,tt);return;case te=="Speak":var Rt=L(J.inputs.FIELD_Speak_Text);Rt.fields.TEXT;return;case te=="SpeakDefault":J.fields.FIELD_SpeakDefault_Text;return;default:return}};let Z=I("Start");for(;Z&&Z.next;)Z=L(Z.next),j(Z,Z.type);return M()};function VAe(n){const e=Qn(As(z=>z.resetSim)),t=Qn(As(z=>z.toggleSimOnly)),i=Qn(As(z=>z.isConnected)),s=Qn(As(z=>z.ip)),o=Qn(As(z=>z.getBlocks)),l=Qn(As(z=>z.getEndingItems)),u=Qn(As(z=>z.clock)),d=Qn(As(z=>z.mistyImageList)),p=Qn(As(z=>z.mistyAudioList)),_=Qn(As(z=>z.simOnly)),v=Qn(As(z=>z.endingTfs)),b=Qn(As(z=>z.setAnimationFrames)),E=Qn(As(z=>z.workerThread)),C=Qn(As(z=>z.setWorkerThread)),M=Qn(As(z=>z.llmMode));function I(z,G){s&&!_&&i&&fetch(`http://${s}/api/${z}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)})}const L=async()=>{u.reset_elapsed(),E&&(E.terminate(),C(null));const z=`import ${JSON.stringify(new URL(zAe,import.meta.url))}`,G=new Blob([z],{type:"application/javascript"}),j=URL.createObjectURL(G);let H=new Worker(j,{type:"module"});H.onmessage=function(he){console.log("Message received from worker "+he.data),C(null)},H.onerror=function(he){console.log(he),URL.revokeObjectURL(j)},H.postMessage({blocks:o(),mistyAudioList:p,mistyImageList:d,tfs:v,ip:s,runOnRobot:!_}),C(H);let{newTfs:Z,newEndingTfs:ae,newItems:J,newEndingItems:te}=WAe({blocks:o(),tfs:v,items:l()});b(Z,ae,J,te),ih("Click Run Code button")},O=()=>{E&&(E.terminate(),C(null),I("halt",{})),ih("Click Stop Code button")},P=()=>{I("arms/set",{LeftArmPosition:90,RightArmPosition:90,LeftArmVelocity:100,RightArmVelocity:100,Units:"Degrees"}),I("head",{Pitch:0,Yaw:0,Roll:0,Duration:1,Units:"Degrees"}),I("images/display",{FileName:"e_DefaultContent.jpg",Alpha:1}),I("text/display",{Text:""}),I("led",{Red:100,Green:70,Blue:160}),e()};let B=M?{top:"10px"}:{bottom:"0px"};return Pe.jsxs(Qw,{style:{position:"absolute",padding:"0px",left:"10px",...B},children:[Pe.jsxs(o4,{style:{paddingLeft:"0px",paddingRight:"0px"},children:[!E&&Pe.jsx(fA,{variant:"contained","aria-label":"play",style:{backgroundColor:"#FAFAFA",marginBottom:"5px"},onClick:L,id:"runButton",children:Pe.jsx(oq,{})}),E&&Pe.jsx(fA,{variant:"contained","aria-label":"play",style:{backgroundColor:"#FAFAFA",marginBottom:"5px"},onClick:O,id:"stopButton",children:Pe.jsx(aq,{})}),Pe.jsx(fA,{variant:"contained","aria-label":"restart",style:{backgroundColor:"#FAFAFA",marginLeft:"5px",marginBottom:"5px"},onClick:P,children:Pe.jsx(sq,{})})]}),i&&Pe.jsx(o4,{style:{backgroundColor:"#FAFAFA",borderRadius:"5px",marginBottom:"5px",paddingLeft:"10px",paddingRight:"0px"},children:Pe.jsx(yj,{children:Pe.jsx(_j,{control:Pe.jsx(Bhe,{onChange:z=>t(z.target.checked)}),label:"Sim only"})})})]})}function jAe(n){const e={displayTfs:!1,displayGrid:!0,isPolar:!1,backgroundColor:"#3a3a3a",planeColor:"#3a3a3a",highlightColor:"#ffffff",plane:0,fov:60,ar:!1,vr:!1};return Pe.jsxs(lv,{height:"100%",children:[Pe.jsx(IAe,{style:{overflow:"hidden"},store:Qn,meshLookup:f_e,...e}),Pe.jsx(VAe,{})]})}var lq={exports:{}};(function(n,e){(function(t,i){i()})(Hl,function(){function t(p,_){return typeof _>"u"?_={autoBom:!1}:typeof _!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(p.type)?new Blob(["\uFEFF",p],{type:p.type}):p}function i(p,_,v){var b=new XMLHttpRequest;b.open("GET",p),b.responseType="blob",b.onload=function(){d(b.response,_,v)},b.onerror=function(){console.error("could not download file")},b.send()}function s(p){var _=new XMLHttpRequest;_.open("HEAD",p,!1);try{_.send()}catch{}return 200<=_.status&&299>=_.status}function o(p){try{p.dispatchEvent(new MouseEvent("click"))}catch{var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),p.dispatchEvent(_)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Hl=="object"&&Hl.global===Hl?Hl:void 0,u=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(p,_,v){var b=l.URL||l.webkitURL,E=document.createElement("a");_=_||p.name||"download",E.download=_,E.rel="noopener",typeof p=="string"?(E.href=p,E.origin===location.origin?o(E):s(E.href)?i(p,_,v):o(E,E.target="_blank")):(E.href=b.createObjectURL(p),setTimeout(function(){b.revokeObjectURL(E.href)},4e4),setTimeout(function(){o(E)},0))}:"msSaveOrOpenBlob"in navigator?function(p,_,v){if(_=_||p.name||"download",typeof p!="string")navigator.msSaveOrOpenBlob(t(p,v),_);else if(s(p))i(p,_,v);else{var b=document.createElement("a");b.href=p,b.target="_blank",setTimeout(function(){o(b)})}}:function(p,_,v,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof p=="string")return i(p,_,v);var E=p.type==="application/octet-stream",C=/constructor/i.test(l.HTMLElement)||l.safari,M=/CriOS\/[\d]+/.test(navigator.userAgent);if((M||E&&C||u)&&typeof FileReader<"u"){var I=new FileReader;I.onloadend=function(){var P=I.result;P=M?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=P:location=P,b=null},I.readAsDataURL(p)}else{var L=l.URL||l.webkitURL,O=L.createObjectURL(p);b?b.location=O:location.href=O,b=null,setTimeout(function(){L.revokeObjectURL(O)},4e4)}});l.saveAs=d.saveAs=d,n.exports=d})})(lq);var XAe=lq.exports;const YAe=O1(XAe);function WM({title:n,children:e,style:t}){return Pe.jsx(lv,{style:{padding:"5px",paddingTop:"20px",...t},children:Pe.jsxs(lv,{style:{backgroundColor:"#E4E5F1",border:"3px #9394A5 solid",padding:"5px",borderRadius:"6px"},children:[Pe.jsx(lv,{style:{position:"relative",display:"float",top:"-18px",left:"10px"},children:Pe.jsx(lv,{children:Pe.jsx(rE,{display:"inline",style:{filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",backgroundColor:"#E4E5F1",padding:"3px",border:"3px #9394A5 solid",borderRadius:"6px"},children:n})})}),Pe.jsx(Qw,{children:ge.Children.map(e,i=>Pe.jsx("div",{style:{padding:"3px",margin:"3px"},children:i}))})]})})}function FG({label:n,buttonText:e,clickFunction:t,style:i}){return Pe.jsxs(Ih,{container:!0,direction:"row",alignItems:"center",style:{...i},children:[Pe.jsx(rE,{display:"inline",style:{paddingRight:"10px",flex:"1"},children:n}),Pe.jsx(ey,{text:e,clickFunction:t})]})}function iL({label:n,onChangeFunction:e,fieldType:t,textFieldInput:i,style:s}){return Pe.jsxs(Ih,{container:!0,direction:"row",alignItems:"center",style:{...s},children:[Pe.jsx(rE,{display:"inline",style:{paddingRight:"10px",flex:"1"},children:n}),Pe.jsx(SP,{value:i,type:t,onChange:e})]})}const KAe=()=>{const n=Qn(E=>E.closeModal),e=Qn(E=>E.setEndpoint),t=Qn(E=>E.setAPIKey),i=Qn(E=>E.setDeployment),s=Qn(As(E=>E.llmDeployment)),o=Qn(As(E=>E.llmAPIKey)),l=Qn(As(E=>E.llmEndpoint)),u=Qn(E=>E.blocklyWorkspace),d=Qn(E=>E.toggleLLMBlockPrompt),p=Qn(As(E=>E.displayLLMBlockPrompt)),_=()=>{var E=new Blob([activityLog],{type:"text/plain;charset=utf-8"});YAe.saveAs(E,"activity log.txt")},v=()=>{const E=Gg.Xml.domToPrettyText(Gg.Xml.workspaceToDom(u)),C=new Blob([E],{type:"text/xml"}),M=URL.createObjectURL(C),I=document.createElement("a");I.href=M,I.download="myBlocks.xml",I.click()},b=E=>{const C=new FileReader;C.onload=function(){const M=C.result;if(u)try{const L=new DOMParser().parseFromString(M,"text/xml");Gg.Xml.domToWorkspace(L.firstChild,u)}catch(I){console.error("Error parsing XML:",I)}else console.error("Blockly workspace not initialized")},C.readAsText(E.target.files[0])};return Pe.jsxs(lv,{sx:{backgroundColor:"#585D92",padding:"5px",margin:"0",borderRadius:"10px",maxHeight:"70vh",overflowY:"scroll"},children:[Pe.jsxs(WM,{title:"LLM Settings",children:[Pe.jsx(iL,{onChangeFunction:E=>e(E.target.value),label:"Server Endpoint",fieldType:"password",textFieldInput:l}),Pe.jsx(iL,{onChangeFunction:E=>t(E.target.value),label:"API Key",fieldType:"password",textFieldInput:o}),Pe.jsx(iL,{onChangeFunction:E=>i(E.target.value),label:"Deployment Model",fieldType:"password",textFieldInput:s})]}),Pe.jsxs(WM,{title:"Downloads",children:[Pe.jsx(FG,{clickFunction:_,label:"Download Activity Log",buttonText:"Download"}),Pe.jsx(FG,{clickFunction:v,label:"Download Workspace XML",buttonText:"Download"})]}),Pe.jsx(WM,{title:"Upload",children:Pe.jsx(vP,{type:"file",onChange:b,accept:".xml"})}),Pe.jsx(WM,{title:"Toggles",children:Pe.jsx(yj,{style:{justifyContent:"left"},children:Pe.jsx(_j,{style:{justifyContent:"left"},control:Pe.jsx(Ufe,{defaultChecked:p,onChange:E=>d(E.target.checked)}),label:"Enable LLM Block Prompt",labelPlacement:"start"})})}),Pe.jsx(ey,{clickFunction:n,text:"Close",style:{float:"right"}})]})},JAe=()=>{const n=Qn(t=>t.setActiveModal),e=Qn(t=>t.activeModal);return Pe.jsx(fj,{open:e===s7,onClose:(t,i)=>{i==="backdropClick"&&n("")},children:e&&Pe.jsx(KAe,{})})},qAe=()=>Pe.jsx(lv,{sx:{backgroundColor:"#585D92",padding:"15px",margin:"0",borderRadius:"10px",maxHeight:"70vh",overflowY:"scroll"},children:Pe.jsx(Rj,{style:{backgroundColor:"#FAFAFA",borderRadius:"5px"},maxVH:50})}),QAe=()=>{const n=Qn(t=>t.setActiveModal),e=Qn(t=>t.activeModal);return Pe.jsx(fj,{open:e===Kre,onClose:(t,i)=>{i==="backdropClick"&&n("")},children:e&&Pe.jsx(qAe,{})})},VM=ur("div")(({theme:n})=>({textAlign:"center",height:"100%"}));function ZAe(n){return Pe.jsxs(sE,{orientation:"vertical",style:{height:"100%",width:"100vw"},children:[Pe.jsx(X_,{flex:.15,children:Pe.jsx(VM,{style:{width:"100%",height:"100%"},children:Pe.jsx("div",{children:Pe.jsx("p",{children:" Some crazy description of the task"})})})}),Pe.jsx($p,{propagate:!0}),Pe.jsx(X_,{flex:.5,children:Pe.jsx(VM,{style:{width:"100%",height:"100%"},children:Pe.jsx("div",{children:Pe.jsx("p",{children:" LLM chatbox "})})})}),Pe.jsx($p,{propagate:!0}),Pe.jsx(X_,{flex:.35,children:Pe.jsxs(sE,{orientation:"horizontal",children:[Pe.jsx(X_,{children:Pe.jsx(VM,{children:Pe.jsx("div",{children:Pe.jsx("p",{children:" Objectives "})})})}),Pe.jsx($p,{propagate:!0}),Pe.jsx(X_,{children:Pe.jsx(VM,{children:Pe.jsx("div",{children:Pe.jsx("p",{children:" Misty Image "})})})})]})})]})}function eIe(n){const e=Qn(t=>t.updateScreen);return Pe.jsxs(Ih,{container:!0,direction:"row",justifyContent:"center",spacing:2,style:{height:"100%",textAlign:"center",alignContent:"center",backgroundColor:"#E4E5F1",marginTop:0},children:[Pe.jsx(Ih,{item:!0,xs:2}),Pe.jsx(Ih,{item:!0,xs:2,children:Pe.jsx(ey,{text:"Day One",clickFunction:()=>e(GB),style:{padding:"50px"}})}),Pe.jsx(Ih,{item:!0,xs:2}),Pe.jsx(Ih,{item:!0,xs:2,children:Pe.jsx(ey,{text:"Day Two",clickFunction:()=>e(FS),style:{padding:"50px"}})}),Pe.jsx(Ih,{item:!0,xs:2})]})}const sL=ur("div")(({theme:n})=>({textAlign:"center",height:"100%"}));Gg.common.defineBlocks(_ee);Object.assign(QS.javascriptGenerator.forBlock,HI);function tIe(){const n=Qn(As(o=>o.llmMode)),e=Qn(As(o=>o.llmProcessing)),t=Qn(As(o=>o.headerHeight)),i=Qn(o=>o.fullScreenPanel),s=Qn(o=>o.screenToShow);return Pe.jsxs(lv,{width:"100vw",height:`calc(100vh - ${t}px)`,padding:0,children:[Pe.jsx(tme,{}),s===HB&&Pe.jsx(eIe,{}),s===GB&&Pe.jsx(ZAe,{}),s===FS&&i&&Pe.jsx(v4,{style:{width:"100vw"}}),s===FS&&!i&&Pe.jsxs(sE,{orientation:"vertical",style:{height:"100%",width:"100vw"},children:[Pe.jsx(X_,{flex:.55,children:Pe.jsxs(sL,{style:{width:"100%",height:"100%"},children:[i&&Pe.jsx(v4,{}),!i&&Pe.jsx(cme,{})]})}),Pe.jsx($p,{propagate:!0}),Pe.jsx(X_,{flex:.45,children:Pe.jsxs(sE,{orientation:"horizontal",children:[Pe.jsx(X_,{children:Pe.jsx(sL,{children:!n&&Pe.jsx(jAe,{})})}),Pe.jsx($p,{propagate:!0}),Pe.jsx(X_,{children:Pe.jsx(sL,{children:!n&&Pe.jsx(kj,{})})})]})})]}),Pe.jsx(NR,{style:{color:"#fff",zIndex:1500},open:e,children:Pe.jsx(dj,{color:"inherit"})}),Pe.jsx(JAe,{}),Pe.jsx(QAe,{})]})}aL.createRoot(document.getElementById("root")).render(Pe.jsx(Vr.StrictMode,{children:Pe.jsx(tIe,{})}));
