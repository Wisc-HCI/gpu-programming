function qX(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function a0(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var RG={exports:{}},sI={},kG={exports:{}},Vi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx=Symbol.for("react.element"),ZX=Symbol.for("react.portal"),eY=Symbol.for("react.fragment"),tY=Symbol.for("react.strict_mode"),nY=Symbol.for("react.profiler"),rY=Symbol.for("react.provider"),iY=Symbol.for("react.context"),sY=Symbol.for("react.forward_ref"),oY=Symbol.for("react.suspense"),aY=Symbol.for("react.memo"),lY=Symbol.for("react.lazy"),FF=Symbol.iterator;function uY(n){return n===null||typeof n!="object"?null:(n=FF&&n[FF]||n["@@iterator"],typeof n=="function"?n:null)}var OG={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LG=Object.assign,DG={};function oS(n,e,t){this.props=n,this.context=e,this.refs=DG,this.updater=t||OG}oS.prototype.isReactComponent={};oS.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};oS.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function NG(){}NG.prototype=oS.prototype;function vN(n,e,t){this.props=n,this.context=e,this.refs=DG,this.updater=t||OG}var yN=vN.prototype=new NG;yN.constructor=vN;LG(yN,oS.prototype);yN.isPureReactComponent=!0;var UF=Array.isArray,BG=Object.prototype.hasOwnProperty,bN={current:null},PG={key:!0,ref:!0,__self:!0,__source:!0};function FG(n,e,t){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)BG.call(e,i)&&!PG.hasOwnProperty(i)&&(s[i]=e[i]);var u=arguments.length-2;if(u===1)s.children=t;else if(1<u){for(var h=Array(u),d=0;d<u;d++)h[d]=arguments[d+2];s.children=h}if(n&&n.defaultProps)for(i in u=n.defaultProps,u)s[i]===void 0&&(s[i]=u[i]);return{$$typeof:Mx,type:n,key:o,ref:l,props:s,_owner:bN.current}}function cY(n,e){return{$$typeof:Mx,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function TN(n){return typeof n=="object"&&n!==null&&n.$$typeof===Mx}function hY(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var zF=/\/+/g;function ak(n,e){return typeof n=="object"&&n!==null&&n.key!=null?hY(""+n.key):e.toString(36)}function xM(n,e,t,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var l=!1;if(n===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case Mx:case ZX:l=!0}}if(l)return l=n,s=s(l),n=i===""?"."+ak(l,0):i,UF(s)?(t="",n!=null&&(t=n.replace(zF,"$&/")+"/"),xM(s,e,t,"",function(d){return d})):s!=null&&(TN(s)&&(s=cY(s,t+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(zF,"$&/")+"/")+n)),e.push(s)),1;if(l=0,i=i===""?".":i+":",UF(n))for(var u=0;u<n.length;u++){o=n[u];var h=i+ak(o,u);l+=xM(o,e,t,h,s)}else if(h=uY(n),typeof h=="function")for(n=h.call(n),u=0;!(o=n.next()).done;)o=o.value,h=i+ak(o,u++),l+=xM(o,e,t,h,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Mw(n,e,t){if(n==null)return n;var i=[],s=0;return xM(n,i,"","",function(o){return e.call(t,o,s++)}),i}function dY(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var hp={current:null},wM={transition:null},pY={ReactCurrentDispatcher:hp,ReactCurrentBatchConfig:wM,ReactCurrentOwner:bN};Vi.Children={map:Mw,forEach:function(n,e,t){Mw(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Mw(n,function(){e++}),e},toArray:function(n){return Mw(n,function(e){return e})||[]},only:function(n){if(!TN(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Vi.Component=oS;Vi.Fragment=eY;Vi.Profiler=nY;Vi.PureComponent=vN;Vi.StrictMode=tY;Vi.Suspense=oY;Vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pY;Vi.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=LG({},n.props),s=n.key,o=n.ref,l=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=bN.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var u=n.type.defaultProps;for(h in e)BG.call(e,h)&&!PG.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=t;else if(1<h){u=Array(h);for(var d=0;d<h;d++)u[d]=arguments[d+2];i.children=u}return{$$typeof:Mx,type:n.type,key:s,ref:o,props:i,_owner:l}};Vi.createContext=function(n){return n={$$typeof:iY,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:rY,_context:n},n.Consumer=n};Vi.createElement=FG;Vi.createFactory=function(n){var e=FG.bind(null,n);return e.type=n,e};Vi.createRef=function(){return{current:null}};Vi.forwardRef=function(n){return{$$typeof:sY,render:n}};Vi.isValidElement=TN;Vi.lazy=function(n){return{$$typeof:lY,_payload:{_status:-1,_result:n},_init:dY}};Vi.memo=function(n,e){return{$$typeof:aY,type:n,compare:e===void 0?null:e}};Vi.startTransition=function(n){var e=wM.transition;wM.transition={};try{n()}finally{wM.transition=e}};Vi.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Vi.useCallback=function(n,e){return hp.current.useCallback(n,e)};Vi.useContext=function(n){return hp.current.useContext(n)};Vi.useDebugValue=function(){};Vi.useDeferredValue=function(n){return hp.current.useDeferredValue(n)};Vi.useEffect=function(n,e){return hp.current.useEffect(n,e)};Vi.useId=function(){return hp.current.useId()};Vi.useImperativeHandle=function(n,e,t){return hp.current.useImperativeHandle(n,e,t)};Vi.useInsertionEffect=function(n,e){return hp.current.useInsertionEffect(n,e)};Vi.useLayoutEffect=function(n,e){return hp.current.useLayoutEffect(n,e)};Vi.useMemo=function(n,e){return hp.current.useMemo(n,e)};Vi.useReducer=function(n,e,t){return hp.current.useReducer(n,e,t)};Vi.useRef=function(n){return hp.current.useRef(n)};Vi.useState=function(n){return hp.current.useState(n)};Vi.useSyncExternalStore=function(n,e,t){return hp.current.useSyncExternalStore(n,e,t)};Vi.useTransition=function(){return hp.current.useTransition()};Vi.version="18.2.0";kG.exports=Vi;var he=kG.exports;const Sr=bb(he),ZO=qX({__proto__:null,default:Sr},[he]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fY=he,mY=Symbol.for("react.element"),gY=Symbol.for("react.fragment"),_Y=Object.prototype.hasOwnProperty,vY=fY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yY={key:!0,ref:!0,__self:!0,__source:!0};function UG(n,e,t){var i,s={},o=null,l=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)_Y.call(e,i)&&!yY.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:mY,type:n,key:o,ref:l,props:s,_owner:vY.current}}sI.Fragment=gY;sI.jsx=UG;sI.jsxs=UG;RG.exports=sI;var Ve=RG.exports,eL={},zG={exports:{}},Rf={},HG={exports:{}},GG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(j,Z){var ne=j.length;j.push(Z);e:for(;0<ne;){var ae=ne-1>>>1,_e=j[ae];if(0<s(_e,Z))j[ae]=Z,j[ne]=_e,ne=ae;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var Z=j[0],ne=j.pop();if(ne!==Z){j[0]=ne;e:for(var ae=0,_e=j.length,Le=_e>>>1;ae<Le;){var we=2*(ae+1)-1,Xe=j[we],Re=we+1,qe=j[Re];if(0>s(Xe,ne))Re<_e&&0>s(qe,Xe)?(j[ae]=qe,j[Re]=ne,ae=Re):(j[ae]=Xe,j[we]=ne,ae=we);else if(Re<_e&&0>s(qe,ne))j[ae]=qe,j[Re]=ne,ae=Re;else break e}}return Z}function s(j,Z){var ne=j.sortIndex-Z.sortIndex;return ne!==0?ne:j.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],d=[],m=1,_=null,v=3,S=!1,x=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(j){for(var Z=t(d);Z!==null;){if(Z.callback===null)i(d);else if(Z.startTime<=j)i(d),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(d)}}function L(j){if(w=!1,D(j),!x)if(t(h)!==null)x=!0,me(z);else{var Z=t(d);Z!==null&&Ae(L,Z.startTime-j)}}function z(j,Z){x=!1,w&&(w=!1,k(P),P=-1),S=!0;var ne=v;try{for(D(Z),_=t(h);_!==null&&(!(_.expirationTime>Z)||j&&!re());){var ae=_.callback;if(typeof ae=="function"){_.callback=null,v=_.priorityLevel;var _e=ae(_.expirationTime<=Z);Z=n.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),D(Z)}else i(h);_=t(h)}if(_!==null)var Le=!0;else{var we=t(d);we!==null&&Ae(L,we.startTime-Z),Le=!1}return Le}finally{_=null,v=ne,S=!1}}var H=!1,U=null,P=-1,K=5,ee=-1;function re(){return!(n.unstable_now()-ee<K)}function ie(){if(U!==null){var j=n.unstable_now();ee=j;var Z=!0;try{Z=U(!0,j)}finally{Z?de():(H=!1,U=null)}}else H=!1}var de;if(typeof O=="function")de=function(){O(ie)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ce=oe.port2;oe.port1.onmessage=ie,de=function(){ce.postMessage(null)}}else de=function(){A(ie,0)};function me(j){U=j,H||(H=!0,de())}function Ae(j,Z){P=A(function(){j(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){x||S||(x=!0,me(z))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var ne=v;v=Z;try{return j()}finally{v=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,Z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ne=v;v=j;try{return Z()}finally{v=ne}},n.unstable_scheduleCallback=function(j,Z,ne){var ae=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ae+ne:ae):ne=ae,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ne+_e,j={id:m++,callback:Z,priorityLevel:j,startTime:ne,expirationTime:_e,sortIndex:-1},ne>ae?(j.sortIndex=ne,e(d,j),t(h)===null&&j===t(d)&&(w?(k(P),P=-1):w=!0,Ae(L,ne-ae))):(j.sortIndex=_e,e(h,j),x||S||(x=!0,me(z))),j},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(j){var Z=v;return function(){var ne=v;v=Z;try{return j.apply(this,arguments)}finally{v=ne}}}})(GG);HG.exports=GG;var bY=HG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WG=he,Mf=bY;function cn(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VG=new Set,R$={};function Tb(n,e){MT(n,e),MT(n+"Capture",e)}function MT(n,e){for(R$[n]=e,n=0;n<e.length;n++)VG.add(e[n])}var e_=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tL=Object.prototype.hasOwnProperty,TY=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HF={},GF={};function SY(n){return tL.call(GF,n)?!0:tL.call(HF,n)?!1:TY.test(n)?GF[n]=!0:(HF[n]=!0,!1)}function EY(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $Y(n,e,t,i){if(e===null||typeof e>"u"||EY(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dp(n,e,t,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var jh={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){jh[n]=new dp(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];jh[e]=new dp(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){jh[n]=new dp(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){jh[n]=new dp(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){jh[n]=new dp(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){jh[n]=new dp(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){jh[n]=new dp(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){jh[n]=new dp(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){jh[n]=new dp(n,5,!1,n.toLowerCase(),null,!1,!1)});var SN=/[\-:]([a-z])/g;function EN(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(SN,EN);jh[e]=new dp(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(SN,EN);jh[e]=new dp(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(SN,EN);jh[e]=new dp(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){jh[n]=new dp(n,1,!1,n.toLowerCase(),null,!1,!1)});jh.xlinkHref=new dp("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){jh[n]=new dp(n,1,!1,n.toLowerCase(),null,!0,!0)});function $N(n,e,t,i){var s=jh.hasOwnProperty(e)?jh[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($Y(e,t,s,i)&&(t=null),i||s===null?SY(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var s_=WG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Aw=Symbol.for("react.element"),Q1=Symbol.for("react.portal"),q1=Symbol.for("react.fragment"),xN=Symbol.for("react.strict_mode"),nL=Symbol.for("react.profiler"),jG=Symbol.for("react.provider"),XG=Symbol.for("react.context"),wN=Symbol.for("react.forward_ref"),rL=Symbol.for("react.suspense"),iL=Symbol.for("react.suspense_list"),CN=Symbol.for("react.memo"),Z_=Symbol.for("react.lazy"),YG=Symbol.for("react.offscreen"),WF=Symbol.iterator;function hE(n){return n===null||typeof n!="object"?null:(n=WF&&n[WF]||n["@@iterator"],typeof n=="function"?n:null)}var Pl=Object.assign,lk;function ZE(n){if(lk===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);lk=e&&e[1]||""}return`
`+lk+n}var uk=!1;function ck(n,e){if(!n||uk)return"";uk=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var i=d}Reflect.construct(n,[],e)}else{try{e.call()}catch(d){i=d}n.call(e.prototype)}else{try{throw Error()}catch(d){i=d}n()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,u=o.length-1;1<=l&&0<=u&&s[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(s[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||s[l]!==o[u]){var h=`
`+s[l].replace(" at new "," at ");return n.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",n.displayName)),h}while(1<=l&&0<=u);break}}}finally{uk=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ZE(n):""}function xY(n){switch(n.tag){case 5:return ZE(n.type);case 16:return ZE("Lazy");case 13:return ZE("Suspense");case 19:return ZE("SuspenseList");case 0:case 2:case 15:return n=ck(n.type,!1),n;case 11:return n=ck(n.type.render,!1),n;case 1:return n=ck(n.type,!0),n;default:return""}}function sL(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q1:return"Fragment";case Q1:return"Portal";case nL:return"Profiler";case xN:return"StrictMode";case rL:return"Suspense";case iL:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case XG:return(n.displayName||"Context")+".Consumer";case jG:return(n._context.displayName||"Context")+".Provider";case wN:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case CN:return e=n.displayName||null,e!==null?e:sL(n.type)||"Memo";case Z_:e=n._payload,n=n._init;try{return sL(n(e))}catch{}}return null}function wY(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sL(e);case 8:return e===xN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bv(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function KG(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CY(n){var e=KG(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Iw(n){n._valueTracker||(n._valueTracker=CY(n))}function JG(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=KG(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function lA(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function oL(n,e){var t=e.checked;return Pl({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function VF(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=bv(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function QG(n,e){e=e.checked,e!=null&&$N(n,"checked",e,!1)}function aL(n,e){QG(n,e);var t=bv(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?lL(n,e.type,t):e.hasOwnProperty("defaultValue")&&lL(n,e.type,bv(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function jF(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function lL(n,e,t){(e!=="number"||lA(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var e$=Array.isArray;function mT(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+bv(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function uL(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(cn(91));return Pl({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function XF(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(cn(92));if(e$(t)){if(1<t.length)throw Error(cn(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:bv(t)}}function qG(n,e){var t=bv(e.value),i=bv(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function YF(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function ZG(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cL(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?ZG(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Rw,e6=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Rw=Rw||document.createElement("div"),Rw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rw.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function k$(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var h$={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MY=["Webkit","ms","Moz","O"];Object.keys(h$).forEach(function(n){MY.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),h$[e]=h$[n]})});function t6(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||h$.hasOwnProperty(n)&&h$[n]?(""+e).trim():e+"px"}function n6(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=t6(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var AY=Pl({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hL(n,e){if(e){if(AY[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(cn(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(cn(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(cn(61))}if(e.style!=null&&typeof e.style!="object")throw Error(cn(62))}}function dL(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pL=null;function MN(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fL=null,gT=null,_T=null;function KF(n){if(n=Rx(n)){if(typeof fL!="function")throw Error(cn(280));var e=n.stateNode;e&&(e=cI(e),fL(n.stateNode,n.type,e))}}function r6(n){gT?_T?_T.push(n):_T=[n]:gT=n}function i6(){if(gT){var n=gT,e=_T;if(_T=gT=null,KF(n),e)for(n=0;n<e.length;n++)KF(e[n])}}function s6(n,e){return n(e)}function o6(){}var hk=!1;function a6(n,e,t){if(hk)return n(e,t);hk=!0;try{return s6(n,e,t)}finally{hk=!1,(gT!==null||_T!==null)&&(o6(),i6())}}function O$(n,e){var t=n.stateNode;if(t===null)return null;var i=cI(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(cn(231,e,typeof t));return t}var mL=!1;if(e_)try{var dE={};Object.defineProperty(dE,"passive",{get:function(){mL=!0}}),window.addEventListener("test",dE,dE),window.removeEventListener("test",dE,dE)}catch{mL=!1}function IY(n,e,t,i,s,o,l,u,h){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(m){this.onError(m)}}var d$=!1,uA=null,cA=!1,gL=null,RY={onError:function(n){d$=!0,uA=n}};function kY(n,e,t,i,s,o,l,u,h){d$=!1,uA=null,IY.apply(RY,arguments)}function OY(n,e,t,i,s,o,l,u,h){if(kY.apply(this,arguments),d$){if(d$){var d=uA;d$=!1,uA=null}else throw Error(cn(198));cA||(cA=!0,gL=d)}}function Sb(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function l6(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function JF(n){if(Sb(n)!==n)throw Error(cn(188))}function LY(n){var e=n.alternate;if(!e){if(e=Sb(n),e===null)throw Error(cn(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===t)return JF(s),n;if(o===i)return JF(s),e;o=o.sibling}throw Error(cn(188))}if(t.return!==i.return)t=s,i=o;else{for(var l=!1,u=s.child;u;){if(u===t){l=!0,t=s,i=o;break}if(u===i){l=!0,i=s,t=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===t){l=!0,t=o,i=s;break}if(u===i){l=!0,i=o,t=s;break}u=u.sibling}if(!l)throw Error(cn(189))}}if(t.alternate!==i)throw Error(cn(190))}if(t.tag!==3)throw Error(cn(188));return t.stateNode.current===t?n:e}function u6(n){return n=LY(n),n!==null?c6(n):null}function c6(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=c6(n);if(e!==null)return e;n=n.sibling}return null}var h6=Mf.unstable_scheduleCallback,QF=Mf.unstable_cancelCallback,DY=Mf.unstable_shouldYield,NY=Mf.unstable_requestPaint,Hu=Mf.unstable_now,BY=Mf.unstable_getCurrentPriorityLevel,AN=Mf.unstable_ImmediatePriority,d6=Mf.unstable_UserBlockingPriority,hA=Mf.unstable_NormalPriority,PY=Mf.unstable_LowPriority,p6=Mf.unstable_IdlePriority,oI=null,qg=null;function FY(n){if(qg&&typeof qg.onCommitFiberRoot=="function")try{qg.onCommitFiberRoot(oI,n,void 0,(n.current.flags&128)===128)}catch{}}var hg=Math.clz32?Math.clz32:HY,UY=Math.log,zY=Math.LN2;function HY(n){return n>>>=0,n===0?32:31-(UY(n)/zY|0)|0}var kw=64,Ow=4194304;function t$(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function dA(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,l=t&268435455;if(l!==0){var u=l&~s;u!==0?i=t$(u):(o&=l,o!==0&&(i=t$(o)))}else l=t&~s,l!==0?i=t$(l):o!==0&&(i=t$(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-hg(e),s=1<<t,i|=n[t],e&=~s;return i}function GY(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WY(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var l=31-hg(o),u=1<<l,h=s[l];h===-1?(!(u&t)||u&i)&&(s[l]=GY(u,e)):h<=e&&(n.expiredLanes|=u),o&=~u}}function _L(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function f6(){var n=kw;return kw<<=1,!(kw&4194240)&&(kw=64),n}function dk(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Ax(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-hg(e),n[e]=t}function VY(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-hg(t),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~o}}function IN(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-hg(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var vo=0;function m6(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var g6,RN,_6,v6,y6,vL=!1,Lw=[],uv=null,cv=null,hv=null,L$=new Map,D$=new Map,nv=[],jY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qF(n,e){switch(n){case"focusin":case"focusout":uv=null;break;case"dragenter":case"dragleave":cv=null;break;case"mouseover":case"mouseout":hv=null;break;case"pointerover":case"pointerout":L$.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":D$.delete(e.pointerId)}}function pE(n,e,t,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Rx(e),e!==null&&RN(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function XY(n,e,t,i,s){switch(e){case"focusin":return uv=pE(uv,n,e,t,i,s),!0;case"dragenter":return cv=pE(cv,n,e,t,i,s),!0;case"mouseover":return hv=pE(hv,n,e,t,i,s),!0;case"pointerover":var o=s.pointerId;return L$.set(o,pE(L$.get(o)||null,n,e,t,i,s)),!0;case"gotpointercapture":return o=s.pointerId,D$.set(o,pE(D$.get(o)||null,n,e,t,i,s)),!0}return!1}function b6(n){var e=Dy(n.target);if(e!==null){var t=Sb(e);if(t!==null){if(e=t.tag,e===13){if(e=l6(t),e!==null){n.blockedOn=e,y6(n.priority,function(){_6(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function CM(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=yL(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);pL=i,t.target.dispatchEvent(i),pL=null}else return e=Rx(t),e!==null&&RN(e),n.blockedOn=t,!1;e.shift()}return!0}function ZF(n,e,t){CM(n)&&t.delete(e)}function YY(){vL=!1,uv!==null&&CM(uv)&&(uv=null),cv!==null&&CM(cv)&&(cv=null),hv!==null&&CM(hv)&&(hv=null),L$.forEach(ZF),D$.forEach(ZF)}function fE(n,e){n.blockedOn===e&&(n.blockedOn=null,vL||(vL=!0,Mf.unstable_scheduleCallback(Mf.unstable_NormalPriority,YY)))}function N$(n){function e(s){return fE(s,n)}if(0<Lw.length){fE(Lw[0],n);for(var t=1;t<Lw.length;t++){var i=Lw[t];i.blockedOn===n&&(i.blockedOn=null)}}for(uv!==null&&fE(uv,n),cv!==null&&fE(cv,n),hv!==null&&fE(hv,n),L$.forEach(e),D$.forEach(e),t=0;t<nv.length;t++)i=nv[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<nv.length&&(t=nv[0],t.blockedOn===null);)b6(t),t.blockedOn===null&&nv.shift()}var vT=s_.ReactCurrentBatchConfig,pA=!0;function KY(n,e,t,i){var s=vo,o=vT.transition;vT.transition=null;try{vo=1,kN(n,e,t,i)}finally{vo=s,vT.transition=o}}function JY(n,e,t,i){var s=vo,o=vT.transition;vT.transition=null;try{vo=4,kN(n,e,t,i)}finally{vo=s,vT.transition=o}}function kN(n,e,t,i){if(pA){var s=yL(n,e,t,i);if(s===null)Sk(n,e,i,fA,t),qF(n,i);else if(XY(s,n,e,t,i))i.stopPropagation();else if(qF(n,i),e&4&&-1<jY.indexOf(n)){for(;s!==null;){var o=Rx(s);if(o!==null&&g6(o),o=yL(n,e,t,i),o===null&&Sk(n,e,i,fA,t),o===s)break;s=o}s!==null&&i.stopPropagation()}else Sk(n,e,i,null,t)}}var fA=null;function yL(n,e,t,i){if(fA=null,n=MN(i),n=Dy(n),n!==null)if(e=Sb(n),e===null)n=null;else if(t=e.tag,t===13){if(n=l6(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return fA=n,null}function T6(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BY()){case AN:return 1;case d6:return 4;case hA:case PY:return 16;case p6:return 536870912;default:return 16}default:return 16}}var iv=null,ON=null,MM=null;function S6(){if(MM)return MM;var n,e=ON,t=e.length,i,s="value"in iv?iv.value:iv.textContent,o=s.length;for(n=0;n<t&&e[n]===s[n];n++);var l=t-n;for(i=1;i<=l&&e[t-i]===s[o-i];i++);return MM=s.slice(n,1<i?1-i:void 0)}function AM(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Dw(){return!0}function e3(){return!1}function kf(n){function e(t,i,s,o,l){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in n)n.hasOwnProperty(u)&&(t=n[u],this[u]=t?t(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Dw:e3,this.isPropagationStopped=e3,this}return Pl(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Dw)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Dw)},persist:function(){},isPersistent:Dw}),e}var aS={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},LN=kf(aS),Ix=Pl({},aS,{view:0,detail:0}),QY=kf(Ix),pk,fk,mE,aI=Pl({},Ix,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DN,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==mE&&(mE&&n.type==="mousemove"?(pk=n.screenX-mE.screenX,fk=n.screenY-mE.screenY):fk=pk=0,mE=n),pk)},movementY:function(n){return"movementY"in n?n.movementY:fk}}),t3=kf(aI),qY=Pl({},aI,{dataTransfer:0}),ZY=kf(qY),eK=Pl({},Ix,{relatedTarget:0}),mk=kf(eK),tK=Pl({},aS,{animationName:0,elapsedTime:0,pseudoElement:0}),nK=kf(tK),rK=Pl({},aS,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),iK=kf(rK),sK=Pl({},aS,{data:0}),n3=kf(sK),oK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uK(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=lK[n])?!!e[n]:!1}function DN(){return uK}var cK=Pl({},Ix,{key:function(n){if(n.key){var e=oK[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=AM(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?aK[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DN,charCode:function(n){return n.type==="keypress"?AM(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?AM(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hK=kf(cK),dK=Pl({},aI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r3=kf(dK),pK=Pl({},Ix,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DN}),fK=kf(pK),mK=Pl({},aS,{propertyName:0,elapsedTime:0,pseudoElement:0}),gK=kf(mK),_K=Pl({},aI,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),vK=kf(_K),yK=[9,13,27,32],NN=e_&&"CompositionEvent"in window,p$=null;e_&&"documentMode"in document&&(p$=document.documentMode);var bK=e_&&"TextEvent"in window&&!p$,E6=e_&&(!NN||p$&&8<p$&&11>=p$),i3=" ",s3=!1;function $6(n,e){switch(n){case"keyup":return yK.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x6(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Z1=!1;function TK(n,e){switch(n){case"compositionend":return x6(e);case"keypress":return e.which!==32?null:(s3=!0,i3);case"textInput":return n=e.data,n===i3&&s3?null:n;default:return null}}function SK(n,e){if(Z1)return n==="compositionend"||!NN&&$6(n,e)?(n=S6(),MM=ON=iv=null,Z1=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return E6&&e.locale!=="ko"?null:e.data;default:return null}}var EK={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o3(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!EK[n.type]:e==="textarea"}function w6(n,e,t,i){r6(i),e=mA(e,"onChange"),0<e.length&&(t=new LN("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var f$=null,B$=null;function $K(n){B6(n,0)}function lI(n){var e=nT(n);if(JG(e))return n}function xK(n,e){if(n==="change")return e}var C6=!1;if(e_){var gk;if(e_){var _k="oninput"in document;if(!_k){var a3=document.createElement("div");a3.setAttribute("oninput","return;"),_k=typeof a3.oninput=="function"}gk=_k}else gk=!1;C6=gk&&(!document.documentMode||9<document.documentMode)}function l3(){f$&&(f$.detachEvent("onpropertychange",M6),B$=f$=null)}function M6(n){if(n.propertyName==="value"&&lI(B$)){var e=[];w6(e,B$,n,MN(n)),a6($K,e)}}function wK(n,e,t){n==="focusin"?(l3(),f$=e,B$=t,f$.attachEvent("onpropertychange",M6)):n==="focusout"&&l3()}function CK(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return lI(B$)}function MK(n,e){if(n==="click")return lI(e)}function AK(n,e){if(n==="input"||n==="change")return lI(e)}function IK(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var mg=typeof Object.is=="function"?Object.is:IK;function P$(n,e){if(mg(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!tL.call(e,s)||!mg(n[s],e[s]))return!1}return!0}function u3(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function c3(n,e){var t=u3(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=u3(t)}}function A6(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?A6(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function I6(){for(var n=window,e=lA();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=lA(n.document)}return e}function BN(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function RK(n){var e=I6(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&A6(t.ownerDocument.documentElement,t)){if(i!==null&&BN(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=c3(t,o);var l=c3(t,i);s&&l&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==l.node||n.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var kK=e_&&"documentMode"in document&&11>=document.documentMode,eT=null,bL=null,m$=null,TL=!1;function h3(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;TL||eT==null||eT!==lA(i)||(i=eT,"selectionStart"in i&&BN(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),m$&&P$(m$,i)||(m$=i,i=mA(bL,"onSelect"),0<i.length&&(e=new LN("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=eT)))}function Nw(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var tT={animationend:Nw("Animation","AnimationEnd"),animationiteration:Nw("Animation","AnimationIteration"),animationstart:Nw("Animation","AnimationStart"),transitionend:Nw("Transition","TransitionEnd")},vk={},R6={};e_&&(R6=document.createElement("div").style,"AnimationEvent"in window||(delete tT.animationend.animation,delete tT.animationiteration.animation,delete tT.animationstart.animation),"TransitionEvent"in window||delete tT.transitionend.transition);function uI(n){if(vk[n])return vk[n];if(!tT[n])return n;var e=tT[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in R6)return vk[n]=e[t];return n}var k6=uI("animationend"),O6=uI("animationiteration"),L6=uI("animationstart"),D6=uI("transitionend"),N6=new Map,d3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mv(n,e){N6.set(n,e),Tb(e,[n])}for(var yk=0;yk<d3.length;yk++){var bk=d3[yk],OK=bk.toLowerCase(),LK=bk[0].toUpperCase()+bk.slice(1);Mv(OK,"on"+LK)}Mv(k6,"onAnimationEnd");Mv(O6,"onAnimationIteration");Mv(L6,"onAnimationStart");Mv("dblclick","onDoubleClick");Mv("focusin","onFocus");Mv("focusout","onBlur");Mv(D6,"onTransitionEnd");MT("onMouseEnter",["mouseout","mouseover"]);MT("onMouseLeave",["mouseout","mouseover"]);MT("onPointerEnter",["pointerout","pointerover"]);MT("onPointerLeave",["pointerout","pointerover"]);Tb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tb("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var n$="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DK=new Set("cancel close invalid load scroll toggle".split(" ").concat(n$));function p3(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,OY(i,e,void 0,n),n.currentTarget=null}function B6(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var u=i[l],h=u.instance,d=u.currentTarget;if(u=u.listener,h!==o&&s.isPropagationStopped())break e;p3(s,u,d),o=h}else for(l=0;l<i.length;l++){if(u=i[l],h=u.instance,d=u.currentTarget,u=u.listener,h!==o&&s.isPropagationStopped())break e;p3(s,u,d),o=h}}}if(cA)throw n=gL,cA=!1,gL=null,n}function Ba(n,e){var t=e[wL];t===void 0&&(t=e[wL]=new Set);var i=n+"__bubble";t.has(i)||(P6(e,n,2,!1),t.add(i))}function Tk(n,e,t){var i=0;e&&(i|=4),P6(t,n,i,e)}var Bw="_reactListening"+Math.random().toString(36).slice(2);function F$(n){if(!n[Bw]){n[Bw]=!0,VG.forEach(function(t){t!=="selectionchange"&&(DK.has(t)||Tk(t,!1,n),Tk(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Bw]||(e[Bw]=!0,Tk("selectionchange",!1,e))}}function P6(n,e,t,i){switch(T6(e)){case 1:var s=KY;break;case 4:s=JY;break;default:s=kN}t=s.bind(null,e,t,n),s=void 0,!mL||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Sk(n,e,t,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var u=i.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;l=l.return}for(;u!==null;){if(l=Dy(u),l===null)return;if(h=l.tag,h===5||h===6){i=o=l;continue e}u=u.parentNode}}i=i.return}a6(function(){var d=o,m=MN(t),_=[];e:{var v=N6.get(n);if(v!==void 0){var S=LN,x=n;switch(n){case"keypress":if(AM(t)===0)break e;case"keydown":case"keyup":S=hK;break;case"focusin":x="focus",S=mk;break;case"focusout":x="blur",S=mk;break;case"beforeblur":case"afterblur":S=mk;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=t3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=ZY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=fK;break;case k6:case O6:case L6:S=nK;break;case D6:S=gK;break;case"scroll":S=QY;break;case"wheel":S=vK;break;case"copy":case"cut":case"paste":S=iK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=r3}var w=(e&4)!==0,A=!w&&n==="scroll",k=w?v!==null?v+"Capture":null:v;w=[];for(var O=d,D;O!==null;){D=O;var L=D.stateNode;if(D.tag===5&&L!==null&&(D=L,k!==null&&(L=O$(O,k),L!=null&&w.push(U$(O,L,D)))),A)break;O=O.return}0<w.length&&(v=new S(v,x,null,t,m),_.push({event:v,listeners:w}))}}if(!(e&7)){e:{if(v=n==="mouseover"||n==="pointerover",S=n==="mouseout"||n==="pointerout",v&&t!==pL&&(x=t.relatedTarget||t.fromElement)&&(Dy(x)||x[t_]))break e;if((S||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,S?(x=t.relatedTarget||t.toElement,S=d,x=x?Dy(x):null,x!==null&&(A=Sb(x),x!==A||x.tag!==5&&x.tag!==6)&&(x=null)):(S=null,x=d),S!==x)){if(w=t3,L="onMouseLeave",k="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(w=r3,L="onPointerLeave",k="onPointerEnter",O="pointer"),A=S==null?v:nT(S),D=x==null?v:nT(x),v=new w(L,O+"leave",S,t,m),v.target=A,v.relatedTarget=D,L=null,Dy(m)===d&&(w=new w(k,O+"enter",x,t,m),w.target=D,w.relatedTarget=A,L=w),A=L,S&&x)t:{for(w=S,k=x,O=0,D=w;D;D=i1(D))O++;for(D=0,L=k;L;L=i1(L))D++;for(;0<O-D;)w=i1(w),O--;for(;0<D-O;)k=i1(k),D--;for(;O--;){if(w===k||k!==null&&w===k.alternate)break t;w=i1(w),k=i1(k)}w=null}else w=null;S!==null&&f3(_,v,S,w,!1),x!==null&&A!==null&&f3(_,A,x,w,!0)}}e:{if(v=d?nT(d):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var z=xK;else if(o3(v))if(C6)z=AK;else{z=CK;var H=wK}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(z=MK);if(z&&(z=z(n,d))){w6(_,z,t,m);break e}H&&H(n,v,d),n==="focusout"&&(H=v._wrapperState)&&H.controlled&&v.type==="number"&&lL(v,"number",v.value)}switch(H=d?nT(d):window,n){case"focusin":(o3(H)||H.contentEditable==="true")&&(eT=H,bL=d,m$=null);break;case"focusout":m$=bL=eT=null;break;case"mousedown":TL=!0;break;case"contextmenu":case"mouseup":case"dragend":TL=!1,h3(_,t,m);break;case"selectionchange":if(kK)break;case"keydown":case"keyup":h3(_,t,m)}var U;if(NN)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Z1?$6(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(E6&&t.locale!=="ko"&&(Z1||P!=="onCompositionStart"?P==="onCompositionEnd"&&Z1&&(U=S6()):(iv=m,ON="value"in iv?iv.value:iv.textContent,Z1=!0)),H=mA(d,P),0<H.length&&(P=new n3(P,n,null,t,m),_.push({event:P,listeners:H}),U?P.data=U:(U=x6(t),U!==null&&(P.data=U)))),(U=bK?TK(n,t):SK(n,t))&&(d=mA(d,"onBeforeInput"),0<d.length&&(m=new n3("onBeforeInput","beforeinput",null,t,m),_.push({event:m,listeners:d}),m.data=U))}B6(_,e)})}function U$(n,e,t){return{instance:n,listener:e,currentTarget:t}}function mA(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=O$(n,t),o!=null&&i.unshift(U$(n,o,s)),o=O$(n,e),o!=null&&i.push(U$(n,o,s))),n=n.return}return i}function i1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function f3(n,e,t,i,s){for(var o=e._reactName,l=[];t!==null&&t!==i;){var u=t,h=u.alternate,d=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&d!==null&&(u=d,s?(h=O$(t,o),h!=null&&l.unshift(U$(t,h,u))):s||(h=O$(t,o),h!=null&&l.push(U$(t,h,u)))),t=t.return}l.length!==0&&n.push({event:e,listeners:l})}var NK=/\r\n?/g,BK=/\u0000|\uFFFD/g;function m3(n){return(typeof n=="string"?n:""+n).replace(NK,`
`).replace(BK,"")}function Pw(n,e,t){if(e=m3(e),m3(n)!==e&&t)throw Error(cn(425))}function gA(){}var SL=null,EL=null;function $L(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xL=typeof setTimeout=="function"?setTimeout:void 0,PK=typeof clearTimeout=="function"?clearTimeout:void 0,g3=typeof Promise=="function"?Promise:void 0,FK=typeof queueMicrotask=="function"?queueMicrotask:typeof g3<"u"?function(n){return g3.resolve(null).then(n).catch(UK)}:xL;function UK(n){setTimeout(function(){throw n})}function Ek(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),N$(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);N$(e)}function dv(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function _3(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var lS=Math.random().toString(36).slice(2),Xg="__reactFiber$"+lS,z$="__reactProps$"+lS,t_="__reactContainer$"+lS,wL="__reactEvents$"+lS,zK="__reactListeners$"+lS,HK="__reactHandles$"+lS;function Dy(n){var e=n[Xg];if(e)return e;for(var t=n.parentNode;t;){if(e=t[t_]||t[Xg]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=_3(n);n!==null;){if(t=n[Xg])return t;n=_3(n)}return e}n=t,t=n.parentNode}return null}function Rx(n){return n=n[Xg]||n[t_],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function nT(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(cn(33))}function cI(n){return n[z$]||null}var CL=[],rT=-1;function Av(n){return{current:n}}function Fa(n){0>rT||(n.current=CL[rT],CL[rT]=null,rT--)}function ma(n,e){rT++,CL[rT]=n.current,n.current=e}var Tv={},Id=Av(Tv),Fp=Av(!1),ab=Tv;function AT(n,e){var t=n.type.contextTypes;if(!t)return Tv;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in t)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Up(n){return n=n.childContextTypes,n!=null}function _A(){Fa(Fp),Fa(Id)}function v3(n,e,t){if(Id.current!==Tv)throw Error(cn(168));ma(Id,e),ma(Fp,t)}function F6(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(cn(108,wY(n)||"Unknown",s));return Pl({},t,i)}function vA(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Tv,ab=Id.current,ma(Id,n),ma(Fp,Fp.current),!0}function y3(n,e,t){var i=n.stateNode;if(!i)throw Error(cn(169));t?(n=F6(n,e,ab),i.__reactInternalMemoizedMergedChildContext=n,Fa(Fp),Fa(Id),ma(Id,n)):Fa(Fp),ma(Fp,t)}var G0=null,hI=!1,$k=!1;function U6(n){G0===null?G0=[n]:G0.push(n)}function GK(n){hI=!0,U6(n)}function Iv(){if(!$k&&G0!==null){$k=!0;var n=0,e=vo;try{var t=G0;for(vo=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}G0=null,hI=!1}catch(s){throw G0!==null&&(G0=G0.slice(n+1)),h6(AN,Iv),s}finally{vo=e,$k=!1}}return null}var iT=[],sT=0,yA=null,bA=0,pm=[],fm=0,lb=null,Y0=1,K0="";function Ey(n,e){iT[sT++]=bA,iT[sT++]=yA,yA=n,bA=e}function z6(n,e,t){pm[fm++]=Y0,pm[fm++]=K0,pm[fm++]=lb,lb=n;var i=Y0;n=K0;var s=32-hg(i)-1;i&=~(1<<s),t+=1;var o=32-hg(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Y0=1<<32-hg(e)+s|t<<s|i,K0=o+n}else Y0=1<<o|t<<s|i,K0=n}function PN(n){n.return!==null&&(Ey(n,1),z6(n,1,0))}function FN(n){for(;n===yA;)yA=iT[--sT],iT[sT]=null,bA=iT[--sT],iT[sT]=null;for(;n===lb;)lb=pm[--fm],pm[fm]=null,K0=pm[--fm],pm[fm]=null,Y0=pm[--fm],pm[fm]=null}var Ef=null,Tf=null,ul=!1,og=null;function H6(n,e){var t=ym(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function b3(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ef=n,Tf=dv(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ef=n,Tf=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=lb!==null?{id:Y0,overflow:K0}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ym(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ef=n,Tf=null,!0):!1;default:return!1}}function ML(n){return(n.mode&1)!==0&&(n.flags&128)===0}function AL(n){if(ul){var e=Tf;if(e){var t=e;if(!b3(n,e)){if(ML(n))throw Error(cn(418));e=dv(t.nextSibling);var i=Ef;e&&b3(n,e)?H6(i,t):(n.flags=n.flags&-4097|2,ul=!1,Ef=n)}}else{if(ML(n))throw Error(cn(418));n.flags=n.flags&-4097|2,ul=!1,Ef=n}}}function T3(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ef=n}function Fw(n){if(n!==Ef)return!1;if(!ul)return T3(n),ul=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!$L(n.type,n.memoizedProps)),e&&(e=Tf)){if(ML(n))throw G6(),Error(cn(418));for(;e;)H6(n,e),e=dv(e.nextSibling)}if(T3(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(cn(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Tf=dv(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Tf=null}}else Tf=Ef?dv(n.stateNode.nextSibling):null;return!0}function G6(){for(var n=Tf;n;)n=dv(n.nextSibling)}function IT(){Tf=Ef=null,ul=!1}function UN(n){og===null?og=[n]:og.push(n)}var WK=s_.ReactCurrentBatchConfig;function ig(n,e){if(n&&n.defaultProps){e=Pl({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var TA=Av(null),SA=null,oT=null,zN=null;function HN(){zN=oT=SA=null}function GN(n){var e=TA.current;Fa(TA),n._currentValue=e}function IL(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function yT(n,e){SA=n,zN=oT=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Bp=!0),n.firstContext=null)}function Tm(n){var e=n._currentValue;if(zN!==n)if(n={context:n,memoizedValue:e,next:null},oT===null){if(SA===null)throw Error(cn(308));oT=n,SA.dependencies={lanes:0,firstContext:n}}else oT=oT.next=n;return e}var Ny=null;function WN(n){Ny===null?Ny=[n]:Ny.push(n)}function W6(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,WN(e)):(t.next=s.next,s.next=t),e.interleaved=t,n_(n,i)}function n_(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ev=!1;function VN(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function V6(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Q0(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function pv(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ps&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,n_(n,t)}return s=i.interleaved,s===null?(e.next=e,WN(i)):(e.next=s.next,s.next=e),i.interleaved=e,n_(n,t)}function IM(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,IN(n,t)}}function S3(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?s=o=l:o=o.next=l,t=t.next}while(t!==null);o===null?s=o=e:o=o.next=e}else s=o=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function EA(n,e,t,i){var s=n.updateQueue;ev=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var h=u,d=h.next;h.next=null,l===null?o=d:l.next=d,l=h;var m=n.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==l&&(u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=h))}if(o!==null){var _=s.baseState;l=0,m=d=h=null,u=o;do{var v=u.lane,S=u.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var x=n,w=u;switch(v=e,S=t,w.tag){case 1:if(x=w.payload,typeof x=="function"){_=x.call(S,_,v);break e}_=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,v=typeof x=="function"?x.call(S,_,v):x,v==null)break e;_=Pl({},_,v);break e;case 2:ev=!0}}u.callback!==null&&u.lane!==0&&(n.flags|=64,v=s.effects,v===null?s.effects=[u]:v.push(u))}else S={eventTime:S,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(d=m=S,h=_):m=m.next=S,l|=v;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;v=u,u=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(m===null&&(h=_),s.baseState=h,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);cb|=l,n.lanes=l,n.memoizedState=_}}function E3(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(cn(191,s));s.call(i)}}}var j6=new WG.Component().refs;function RL(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Pl({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var dI={isMounted:function(n){return(n=n._reactInternals)?Sb(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=ip(),s=mv(n),o=Q0(i,s);o.payload=e,t!=null&&(o.callback=t),e=pv(n,o,s),e!==null&&(dg(e,n,s,i),IM(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=ip(),s=mv(n),o=Q0(i,s);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=pv(n,o,s),e!==null&&(dg(e,n,s,i),IM(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ip(),i=mv(n),s=Q0(t,i);s.tag=2,e!=null&&(s.callback=e),e=pv(n,s,i),e!==null&&(dg(e,n,i,t),IM(e,n,i))}};function $3(n,e,t,i,s,o,l){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!P$(t,i)||!P$(s,o):!0}function X6(n,e,t){var i=!1,s=Tv,o=e.contextType;return typeof o=="object"&&o!==null?o=Tm(o):(s=Up(e)?ab:Id.current,i=e.contextTypes,o=(i=i!=null)?AT(n,s):Tv),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dI,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function x3(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&dI.enqueueReplaceState(e,e.state,null)}function kL(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs=j6,VN(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Tm(o):(o=Up(e)?ab:Id.current,s.context=AT(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(RL(n,e,o,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&dI.enqueueReplaceState(s,s.state,null),EA(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function gE(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(cn(309));var i=t.stateNode}if(!i)throw Error(cn(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var u=s.refs;u===j6&&(u=s.refs={}),l===null?delete u[o]:u[o]=l},e._stringRef=o,e)}if(typeof n!="string")throw Error(cn(284));if(!t._owner)throw Error(cn(290,n))}return n}function Uw(n,e){throw n=Object.prototype.toString.call(e),Error(cn(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function w3(n){var e=n._init;return e(n._payload)}function Y6(n){function e(k,O){if(n){var D=k.deletions;D===null?(k.deletions=[O],k.flags|=16):D.push(O)}}function t(k,O){if(!n)return null;for(;O!==null;)e(k,O),O=O.sibling;return null}function i(k,O){for(k=new Map;O!==null;)O.key!==null?k.set(O.key,O):k.set(O.index,O),O=O.sibling;return k}function s(k,O){return k=gv(k,O),k.index=0,k.sibling=null,k}function o(k,O,D){return k.index=D,n?(D=k.alternate,D!==null?(D=D.index,D<O?(k.flags|=2,O):D):(k.flags|=2,O)):(k.flags|=1048576,O)}function l(k){return n&&k.alternate===null&&(k.flags|=2),k}function u(k,O,D,L){return O===null||O.tag!==6?(O=Rk(D,k.mode,L),O.return=k,O):(O=s(O,D),O.return=k,O)}function h(k,O,D,L){var z=D.type;return z===q1?m(k,O,D.props.children,L,D.key):O!==null&&(O.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Z_&&w3(z)===O.type)?(L=s(O,D.props),L.ref=gE(k,O,D),L.return=k,L):(L=NM(D.type,D.key,D.props,null,k.mode,L),L.ref=gE(k,O,D),L.return=k,L)}function d(k,O,D,L){return O===null||O.tag!==4||O.stateNode.containerInfo!==D.containerInfo||O.stateNode.implementation!==D.implementation?(O=kk(D,k.mode,L),O.return=k,O):(O=s(O,D.children||[]),O.return=k,O)}function m(k,O,D,L,z){return O===null||O.tag!==7?(O=Jy(D,k.mode,L,z),O.return=k,O):(O=s(O,D),O.return=k,O)}function _(k,O,D){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Rk(""+O,k.mode,D),O.return=k,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Aw:return D=NM(O.type,O.key,O.props,null,k.mode,D),D.ref=gE(k,null,O),D.return=k,D;case Q1:return O=kk(O,k.mode,D),O.return=k,O;case Z_:var L=O._init;return _(k,L(O._payload),D)}if(e$(O)||hE(O))return O=Jy(O,k.mode,D,null),O.return=k,O;Uw(k,O)}return null}function v(k,O,D,L){var z=O!==null?O.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return z!==null?null:u(k,O,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Aw:return D.key===z?h(k,O,D,L):null;case Q1:return D.key===z?d(k,O,D,L):null;case Z_:return z=D._init,v(k,O,z(D._payload),L)}if(e$(D)||hE(D))return z!==null?null:m(k,O,D,L,null);Uw(k,D)}return null}function S(k,O,D,L,z){if(typeof L=="string"&&L!==""||typeof L=="number")return k=k.get(D)||null,u(O,k,""+L,z);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Aw:return k=k.get(L.key===null?D:L.key)||null,h(O,k,L,z);case Q1:return k=k.get(L.key===null?D:L.key)||null,d(O,k,L,z);case Z_:var H=L._init;return S(k,O,D,H(L._payload),z)}if(e$(L)||hE(L))return k=k.get(D)||null,m(O,k,L,z,null);Uw(O,L)}return null}function x(k,O,D,L){for(var z=null,H=null,U=O,P=O=0,K=null;U!==null&&P<D.length;P++){U.index>P?(K=U,U=null):K=U.sibling;var ee=v(k,U,D[P],L);if(ee===null){U===null&&(U=K);break}n&&U&&ee.alternate===null&&e(k,U),O=o(ee,O,P),H===null?z=ee:H.sibling=ee,H=ee,U=K}if(P===D.length)return t(k,U),ul&&Ey(k,P),z;if(U===null){for(;P<D.length;P++)U=_(k,D[P],L),U!==null&&(O=o(U,O,P),H===null?z=U:H.sibling=U,H=U);return ul&&Ey(k,P),z}for(U=i(k,U);P<D.length;P++)K=S(U,k,P,D[P],L),K!==null&&(n&&K.alternate!==null&&U.delete(K.key===null?P:K.key),O=o(K,O,P),H===null?z=K:H.sibling=K,H=K);return n&&U.forEach(function(re){return e(k,re)}),ul&&Ey(k,P),z}function w(k,O,D,L){var z=hE(D);if(typeof z!="function")throw Error(cn(150));if(D=z.call(D),D==null)throw Error(cn(151));for(var H=z=null,U=O,P=O=0,K=null,ee=D.next();U!==null&&!ee.done;P++,ee=D.next()){U.index>P?(K=U,U=null):K=U.sibling;var re=v(k,U,ee.value,L);if(re===null){U===null&&(U=K);break}n&&U&&re.alternate===null&&e(k,U),O=o(re,O,P),H===null?z=re:H.sibling=re,H=re,U=K}if(ee.done)return t(k,U),ul&&Ey(k,P),z;if(U===null){for(;!ee.done;P++,ee=D.next())ee=_(k,ee.value,L),ee!==null&&(O=o(ee,O,P),H===null?z=ee:H.sibling=ee,H=ee);return ul&&Ey(k,P),z}for(U=i(k,U);!ee.done;P++,ee=D.next())ee=S(U,k,P,ee.value,L),ee!==null&&(n&&ee.alternate!==null&&U.delete(ee.key===null?P:ee.key),O=o(ee,O,P),H===null?z=ee:H.sibling=ee,H=ee);return n&&U.forEach(function(ie){return e(k,ie)}),ul&&Ey(k,P),z}function A(k,O,D,L){if(typeof D=="object"&&D!==null&&D.type===q1&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case Aw:e:{for(var z=D.key,H=O;H!==null;){if(H.key===z){if(z=D.type,z===q1){if(H.tag===7){t(k,H.sibling),O=s(H,D.props.children),O.return=k,k=O;break e}}else if(H.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Z_&&w3(z)===H.type){t(k,H.sibling),O=s(H,D.props),O.ref=gE(k,H,D),O.return=k,k=O;break e}t(k,H);break}else e(k,H);H=H.sibling}D.type===q1?(O=Jy(D.props.children,k.mode,L,D.key),O.return=k,k=O):(L=NM(D.type,D.key,D.props,null,k.mode,L),L.ref=gE(k,O,D),L.return=k,k=L)}return l(k);case Q1:e:{for(H=D.key;O!==null;){if(O.key===H)if(O.tag===4&&O.stateNode.containerInfo===D.containerInfo&&O.stateNode.implementation===D.implementation){t(k,O.sibling),O=s(O,D.children||[]),O.return=k,k=O;break e}else{t(k,O);break}else e(k,O);O=O.sibling}O=kk(D,k.mode,L),O.return=k,k=O}return l(k);case Z_:return H=D._init,A(k,O,H(D._payload),L)}if(e$(D))return x(k,O,D,L);if(hE(D))return w(k,O,D,L);Uw(k,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,O!==null&&O.tag===6?(t(k,O.sibling),O=s(O,D),O.return=k,k=O):(t(k,O),O=Rk(D,k.mode,L),O.return=k,k=O),l(k)):t(k,O)}return A}var RT=Y6(!0),K6=Y6(!1),kx={},Zg=Av(kx),H$=Av(kx),G$=Av(kx);function By(n){if(n===kx)throw Error(cn(174));return n}function jN(n,e){switch(ma(G$,e),ma(H$,n),ma(Zg,kx),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cL(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=cL(e,n)}Fa(Zg),ma(Zg,e)}function kT(){Fa(Zg),Fa(H$),Fa(G$)}function J6(n){By(G$.current);var e=By(Zg.current),t=cL(e,n.type);e!==t&&(ma(H$,n),ma(Zg,t))}function XN(n){H$.current===n&&(Fa(Zg),Fa(H$))}var Ol=Av(0);function $A(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xk=[];function YN(){for(var n=0;n<xk.length;n++)xk[n]._workInProgressVersionPrimary=null;xk.length=0}var RM=s_.ReactCurrentDispatcher,wk=s_.ReactCurrentBatchConfig,ub=0,Nl=null,zc=null,ph=null,xA=!1,g$=!1,W$=0,VK=0;function vd(){throw Error(cn(321))}function KN(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!mg(n[t],e[t]))return!1;return!0}function JN(n,e,t,i,s,o){if(ub=o,Nl=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,RM.current=n===null||n.memoizedState===null?KK:JK,n=t(i,s),g$){o=0;do{if(g$=!1,W$=0,25<=o)throw Error(cn(301));o+=1,ph=zc=null,e.updateQueue=null,RM.current=QK,n=t(i,s)}while(g$)}if(RM.current=wA,e=zc!==null&&zc.next!==null,ub=0,ph=zc=Nl=null,xA=!1,e)throw Error(cn(300));return n}function QN(){var n=W$!==0;return W$=0,n}function Gg(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ph===null?Nl.memoizedState=ph=n:ph=ph.next=n,ph}function Sm(){if(zc===null){var n=Nl.alternate;n=n!==null?n.memoizedState:null}else n=zc.next;var e=ph===null?Nl.memoizedState:ph.next;if(e!==null)ph=e,zc=n;else{if(n===null)throw Error(cn(310));zc=n,n={memoizedState:zc.memoizedState,baseState:zc.baseState,baseQueue:zc.baseQueue,queue:zc.queue,next:null},ph===null?Nl.memoizedState=ph=n:ph=ph.next=n}return ph}function V$(n,e){return typeof e=="function"?e(n):e}function Ck(n){var e=Sm(),t=e.queue;if(t===null)throw Error(cn(311));t.lastRenderedReducer=n;var i=zc,s=i.baseQueue,o=t.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,t.pending=null}if(s!==null){o=s.next,i=i.baseState;var u=l=null,h=null,d=o;do{var m=d.lane;if((ub&m)===m)h!==null&&(h=h.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:n(i,d.action);else{var _={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};h===null?(u=h=_,l=i):h=h.next=_,Nl.lanes|=m,cb|=m}d=d.next}while(d!==null&&d!==o);h===null?l=i:h.next=u,mg(i,e.memoizedState)||(Bp=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=h,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do o=s.lane,Nl.lanes|=o,cb|=o,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Mk(n){var e=Sm(),t=e.queue;if(t===null)throw Error(cn(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,o=e.memoizedState;if(s!==null){t.pending=null;var l=s=s.next;do o=n(o,l.action),l=l.next;while(l!==s);mg(o,e.memoizedState)||(Bp=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,i]}function Q6(){}function q6(n,e){var t=Nl,i=Sm(),s=e(),o=!mg(i.memoizedState,s);if(o&&(i.memoizedState=s,Bp=!0),i=i.queue,qN(tW.bind(null,t,i,n),[n]),i.getSnapshot!==e||o||ph!==null&&ph.memoizedState.tag&1){if(t.flags|=2048,j$(9,eW.bind(null,t,i,s,e),void 0,null),fh===null)throw Error(cn(349));ub&30||Z6(t,e,s)}return s}function Z6(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Nl.updateQueue,e===null?(e={lastEffect:null,stores:null},Nl.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function eW(n,e,t,i){e.value=t,e.getSnapshot=i,nW(e)&&rW(n)}function tW(n,e,t){return t(function(){nW(e)&&rW(n)})}function nW(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!mg(n,t)}catch{return!0}}function rW(n){var e=n_(n,1);e!==null&&dg(e,n,1,-1)}function C3(n){var e=Gg();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:V$,lastRenderedState:n},e.queue=n,n=n.dispatch=YK.bind(null,Nl,n),[e.memoizedState,n]}function j$(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Nl.updateQueue,e===null?(e={lastEffect:null,stores:null},Nl.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function iW(){return Sm().memoizedState}function kM(n,e,t,i){var s=Gg();Nl.flags|=n,s.memoizedState=j$(1|e,t,void 0,i===void 0?null:i)}function pI(n,e,t,i){var s=Sm();i=i===void 0?null:i;var o=void 0;if(zc!==null){var l=zc.memoizedState;if(o=l.destroy,i!==null&&KN(i,l.deps)){s.memoizedState=j$(e,t,o,i);return}}Nl.flags|=n,s.memoizedState=j$(1|e,t,o,i)}function M3(n,e){return kM(8390656,8,n,e)}function qN(n,e){return pI(2048,8,n,e)}function sW(n,e){return pI(4,2,n,e)}function oW(n,e){return pI(4,4,n,e)}function aW(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function lW(n,e,t){return t=t!=null?t.concat([n]):null,pI(4,4,aW.bind(null,e,n),t)}function ZN(){}function uW(n,e){var t=Sm();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&KN(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function cW(n,e){var t=Sm();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&KN(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function hW(n,e,t){return ub&21?(mg(t,e)||(t=f6(),Nl.lanes|=t,cb|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Bp=!0),n.memoizedState=t)}function jK(n,e){var t=vo;vo=t!==0&&4>t?t:4,n(!0);var i=wk.transition;wk.transition={};try{n(!1),e()}finally{vo=t,wk.transition=i}}function dW(){return Sm().memoizedState}function XK(n,e,t){var i=mv(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},pW(n))fW(e,t);else if(t=W6(n,e,t,i),t!==null){var s=ip();dg(t,n,i,s),mW(t,e,i)}}function YK(n,e,t){var i=mv(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(pW(n))fW(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,u=o(l,t);if(s.hasEagerState=!0,s.eagerState=u,mg(u,l)){var h=e.interleaved;h===null?(s.next=s,WN(e)):(s.next=h.next,h.next=s),e.interleaved=s;return}}catch{}finally{}t=W6(n,e,s,i),t!==null&&(s=ip(),dg(t,n,i,s),mW(t,e,i))}}function pW(n){var e=n.alternate;return n===Nl||e!==null&&e===Nl}function fW(n,e){g$=xA=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function mW(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,IN(n,t)}}var wA={readContext:Tm,useCallback:vd,useContext:vd,useEffect:vd,useImperativeHandle:vd,useInsertionEffect:vd,useLayoutEffect:vd,useMemo:vd,useReducer:vd,useRef:vd,useState:vd,useDebugValue:vd,useDeferredValue:vd,useTransition:vd,useMutableSource:vd,useSyncExternalStore:vd,useId:vd,unstable_isNewReconciler:!1},KK={readContext:Tm,useCallback:function(n,e){return Gg().memoizedState=[n,e===void 0?null:e],n},useContext:Tm,useEffect:M3,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,kM(4194308,4,aW.bind(null,e,n),t)},useLayoutEffect:function(n,e){return kM(4194308,4,n,e)},useInsertionEffect:function(n,e){return kM(4,2,n,e)},useMemo:function(n,e){var t=Gg();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Gg();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=XK.bind(null,Nl,n),[i.memoizedState,n]},useRef:function(n){var e=Gg();return n={current:n},e.memoizedState=n},useState:C3,useDebugValue:ZN,useDeferredValue:function(n){return Gg().memoizedState=n},useTransition:function(){var n=C3(!1),e=n[0];return n=jK.bind(null,n[1]),Gg().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Nl,s=Gg();if(ul){if(t===void 0)throw Error(cn(407));t=t()}else{if(t=e(),fh===null)throw Error(cn(349));ub&30||Z6(i,e,t)}s.memoizedState=t;var o={value:t,getSnapshot:e};return s.queue=o,M3(tW.bind(null,i,o,n),[n]),i.flags|=2048,j$(9,eW.bind(null,i,o,t,e),void 0,null),t},useId:function(){var n=Gg(),e=fh.identifierPrefix;if(ul){var t=K0,i=Y0;t=(i&~(1<<32-hg(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=W$++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=VK++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},JK={readContext:Tm,useCallback:uW,useContext:Tm,useEffect:qN,useImperativeHandle:lW,useInsertionEffect:sW,useLayoutEffect:oW,useMemo:cW,useReducer:Ck,useRef:iW,useState:function(){return Ck(V$)},useDebugValue:ZN,useDeferredValue:function(n){var e=Sm();return hW(e,zc.memoizedState,n)},useTransition:function(){var n=Ck(V$)[0],e=Sm().memoizedState;return[n,e]},useMutableSource:Q6,useSyncExternalStore:q6,useId:dW,unstable_isNewReconciler:!1},QK={readContext:Tm,useCallback:uW,useContext:Tm,useEffect:qN,useImperativeHandle:lW,useInsertionEffect:sW,useLayoutEffect:oW,useMemo:cW,useReducer:Mk,useRef:iW,useState:function(){return Mk(V$)},useDebugValue:ZN,useDeferredValue:function(n){var e=Sm();return zc===null?e.memoizedState=n:hW(e,zc.memoizedState,n)},useTransition:function(){var n=Mk(V$)[0],e=Sm().memoizedState;return[n,e]},useMutableSource:Q6,useSyncExternalStore:q6,useId:dW,unstable_isNewReconciler:!1};function OT(n,e){try{var t="",i=e;do t+=xY(i),i=i.return;while(i);var s=t}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function Ak(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function OL(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var qK=typeof WeakMap=="function"?WeakMap:Map;function gW(n,e,t){t=Q0(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){MA||(MA=!0,GL=i),OL(n,e)},t}function _W(n,e,t){t=Q0(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){OL(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){OL(n,e),typeof i!="function"&&(fv===null?fv=new Set([this]):fv.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),t}function A3(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new qK;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=dJ.bind(null,n,e,t),e.then(n,n))}function I3(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function R3(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Q0(-1,1),e.tag=2,pv(t,e,1))),t.lanes|=1),n)}var ZK=s_.ReactCurrentOwner,Bp=!1;function Qd(n,e,t,i){e.child=n===null?K6(e,null,t,i):RT(e,n.child,t,i)}function k3(n,e,t,i,s){t=t.render;var o=e.ref;return yT(e,s),i=JN(n,e,t,i,o,s),t=QN(),n!==null&&!Bp?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,r_(n,e,s)):(ul&&t&&PN(e),e.flags|=1,Qd(n,e,i,s),e.child)}function O3(n,e,t,i,s){if(n===null){var o=t.type;return typeof o=="function"&&!aB(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,vW(n,e,o,i,s)):(n=NM(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var l=o.memoizedProps;if(t=t.compare,t=t!==null?t:P$,t(l,i)&&n.ref===e.ref)return r_(n,e,s)}return e.flags|=1,n=gv(o,i),n.ref=e.ref,n.return=e,e.child=n}function vW(n,e,t,i,s){if(n!==null){var o=n.memoizedProps;if(P$(o,i)&&n.ref===e.ref)if(Bp=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(Bp=!0);else return e.lanes=n.lanes,r_(n,e,s)}return LL(n,e,t,i,s)}function yW(n,e,t){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ma(lT,_f),_f|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ma(lT,_f),_f|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:t,ma(lT,_f),_f|=i}else o!==null?(i=o.baseLanes|t,e.memoizedState=null):i=t,ma(lT,_f),_f|=i;return Qd(n,e,s,t),e.child}function bW(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function LL(n,e,t,i,s){var o=Up(t)?ab:Id.current;return o=AT(e,o),yT(e,s),t=JN(n,e,t,i,o,s),i=QN(),n!==null&&!Bp?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,r_(n,e,s)):(ul&&i&&PN(e),e.flags|=1,Qd(n,e,t,s),e.child)}function L3(n,e,t,i,s){if(Up(t)){var o=!0;vA(e)}else o=!1;if(yT(e,s),e.stateNode===null)OM(n,e),X6(e,t,i),kL(e,t,i,s),i=!0;else if(n===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var h=l.context,d=t.contextType;typeof d=="object"&&d!==null?d=Tm(d):(d=Up(t)?ab:Id.current,d=AT(e,d));var m=t.getDerivedStateFromProps,_=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";_||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==i||h!==d)&&x3(e,l,i,d),ev=!1;var v=e.memoizedState;l.state=v,EA(e,i,l,s),h=e.memoizedState,u!==i||v!==h||Fp.current||ev?(typeof m=="function"&&(RL(e,t,m,i),h=e.memoizedState),(u=ev||$3(e,t,u,i,v,h,d))?(_||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),l.props=i,l.state=h,l.context=d,i=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,V6(n,e),u=e.memoizedProps,d=e.type===e.elementType?u:ig(e.type,u),l.props=d,_=e.pendingProps,v=l.context,h=t.contextType,typeof h=="object"&&h!==null?h=Tm(h):(h=Up(t)?ab:Id.current,h=AT(e,h));var S=t.getDerivedStateFromProps;(m=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==_||v!==h)&&x3(e,l,i,h),ev=!1,v=e.memoizedState,l.state=v,EA(e,i,l,s);var x=e.memoizedState;u!==_||v!==x||Fp.current||ev?(typeof S=="function"&&(RL(e,t,S,i),x=e.memoizedState),(d=ev||$3(e,t,d,i,v,x,h)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,x,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,x,h)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&v===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&v===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=x),l.props=i,l.state=x,l.context=h,i=d):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&v===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&v===n.memoizedState||(e.flags|=1024),i=!1)}return DL(n,e,t,i,o,s)}function DL(n,e,t,i,s,o){bW(n,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&y3(e,t,!1),r_(n,e,o);i=e.stateNode,ZK.current=e;var u=l&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&l?(e.child=RT(e,n.child,null,o),e.child=RT(e,null,u,o)):Qd(n,e,u,o),e.memoizedState=i.state,s&&y3(e,t,!0),e.child}function TW(n){var e=n.stateNode;e.pendingContext?v3(n,e.pendingContext,e.pendingContext!==e.context):e.context&&v3(n,e.context,!1),jN(n,e.containerInfo)}function D3(n,e,t,i,s){return IT(),UN(s),e.flags|=256,Qd(n,e,t,i),e.child}var NL={dehydrated:null,treeContext:null,retryLane:0};function BL(n){return{baseLanes:n,cachePool:null,transitions:null}}function SW(n,e,t){var i=e.pendingProps,s=Ol.current,o=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=n!==null&&n.memoizedState===null?!1:(s&2)!==0),u?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),ma(Ol,s&1),n===null)return AL(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,n=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=gI(l,i,0,null),n=Jy(n,i,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=BL(t),e.memoizedState=NL,n):eB(e,l));if(s=n.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return eJ(n,e,l,i,u,s,t);if(o){o=i.fallback,l=e.mode,s=n.child,u=s.sibling;var h={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=gv(s,h),i.subtreeFlags=s.subtreeFlags&14680064),u!==null?o=gv(u,o):(o=Jy(o,l,t,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=n.child.memoizedState,l=l===null?BL(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=n.childLanes&~t,e.memoizedState=NL,i}return o=n.child,n=o.sibling,i=gv(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function eB(n,e){return e=gI({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function zw(n,e,t,i){return i!==null&&UN(i),RT(e,n.child,null,t),n=eB(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function eJ(n,e,t,i,s,o,l){if(t)return e.flags&256?(e.flags&=-257,i=Ak(Error(cn(422))),zw(n,e,l,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=gI({mode:"visible",children:i.children},s,0,null),o=Jy(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&RT(e,n.child,null,l),e.child.memoizedState=BL(l),e.memoizedState=NL,o);if(!(e.mode&1))return zw(n,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(cn(419)),i=Ak(o,i,void 0),zw(n,e,l,i)}if(u=(l&n.childLanes)!==0,Bp||u){if(i=fh,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,n_(n,s),dg(i,n,s,-1))}return oB(),i=Ak(Error(cn(421))),zw(n,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=pJ.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,Tf=dv(s.nextSibling),Ef=e,ul=!0,og=null,n!==null&&(pm[fm++]=Y0,pm[fm++]=K0,pm[fm++]=lb,Y0=n.id,K0=n.overflow,lb=e),e=eB(e,i.children),e.flags|=4096,e)}function N3(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),IL(n.return,e,t)}function Ik(n,e,t,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=t,o.tailMode=s)}function EW(n,e,t){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Qd(n,e,i.children,t),i=Ol.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&N3(n,t,e);else if(n.tag===19)N3(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(ma(Ol,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&$A(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),Ik(e,!1,s,t,o);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&$A(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}Ik(e,!0,t,null,o);break;case"together":Ik(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function OM(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function r_(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),cb|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(cn(153));if(e.child!==null){for(n=e.child,t=gv(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=gv(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function tJ(n,e,t){switch(e.tag){case 3:TW(e),IT();break;case 5:J6(e);break;case 1:Up(e.type)&&vA(e);break;case 4:jN(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ma(TA,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ma(Ol,Ol.current&1),e.flags|=128,null):t&e.child.childLanes?SW(n,e,t):(ma(Ol,Ol.current&1),n=r_(n,e,t),n!==null?n.sibling:null);ma(Ol,Ol.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return EW(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ma(Ol,Ol.current),i)break;return null;case 22:case 23:return e.lanes=0,yW(n,e,t)}return r_(n,e,t)}var $W,PL,xW,wW;$W=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};PL=function(){};xW=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,By(Zg.current);var o=null;switch(t){case"input":s=oL(n,s),i=oL(n,i),o=[];break;case"select":s=Pl({},s,{value:void 0}),i=Pl({},i,{value:void 0}),o=[];break;case"textarea":s=uL(n,s),i=uL(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=gA)}hL(t,i);var l;t=null;for(d in s)if(!i.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(l in u)u.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(R$.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in i){var h=i[d];if(u=s!=null?s[d]:void 0,i.hasOwnProperty(d)&&h!==u&&(h!=null||u!=null))if(d==="style")if(u){for(l in u)!u.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in h)h.hasOwnProperty(l)&&u[l]!==h[l]&&(t||(t={}),t[l]=h[l])}else t||(o||(o=[]),o.push(d,t)),t=h;else d==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(d,h)):d==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(d,""+h):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(R$.hasOwnProperty(d)?(h!=null&&d==="onScroll"&&Ba("scroll",n),o||u===h||(o=[])):(o=o||[]).push(d,h))}t&&(o=o||[]).push("style",t);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};wW=function(n,e,t,i){t!==i&&(e.flags|=4)};function _E(n,e){if(!ul)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function yd(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function nJ(n,e,t){var i=e.pendingProps;switch(FN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yd(e),null;case 1:return Up(e.type)&&_A(),yd(e),null;case 3:return i=e.stateNode,kT(),Fa(Fp),Fa(Id),YN(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Fw(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,og!==null&&(jL(og),og=null))),PL(n,e),yd(e),null;case 5:XN(e);var s=By(G$.current);if(t=e.type,n!==null&&e.stateNode!=null)xW(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(cn(166));return yd(e),null}if(n=By(Zg.current),Fw(e)){i=e.stateNode,t=e.type;var o=e.memoizedProps;switch(i[Xg]=e,i[z$]=o,n=(e.mode&1)!==0,t){case"dialog":Ba("cancel",i),Ba("close",i);break;case"iframe":case"object":case"embed":Ba("load",i);break;case"video":case"audio":for(s=0;s<n$.length;s++)Ba(n$[s],i);break;case"source":Ba("error",i);break;case"img":case"image":case"link":Ba("error",i),Ba("load",i);break;case"details":Ba("toggle",i);break;case"input":VF(i,o),Ba("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ba("invalid",i);break;case"textarea":XF(i,o),Ba("invalid",i)}hL(t,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&Pw(i.textContent,u,n),s=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Pw(i.textContent,u,n),s=["children",""+u]):R$.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Ba("scroll",i)}switch(t){case"input":Iw(i),jF(i,o,!0);break;case"textarea":Iw(i),YF(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=gA)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ZG(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=l.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=l.createElement(t,{is:i.is}):(n=l.createElement(t),t==="select"&&(l=n,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):n=l.createElementNS(n,t),n[Xg]=e,n[z$]=i,$W(n,e,!1,!1),e.stateNode=n;e:{switch(l=dL(t,i),t){case"dialog":Ba("cancel",n),Ba("close",n),s=i;break;case"iframe":case"object":case"embed":Ba("load",n),s=i;break;case"video":case"audio":for(s=0;s<n$.length;s++)Ba(n$[s],n);s=i;break;case"source":Ba("error",n),s=i;break;case"img":case"image":case"link":Ba("error",n),Ba("load",n),s=i;break;case"details":Ba("toggle",n),s=i;break;case"input":VF(n,i),s=oL(n,i),Ba("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Pl({},i,{value:void 0}),Ba("invalid",n);break;case"textarea":XF(n,i),s=uL(n,i),Ba("invalid",n);break;default:s=i}hL(t,s),u=s;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?n6(n,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&e6(n,h)):o==="children"?typeof h=="string"?(t!=="textarea"||h!=="")&&k$(n,h):typeof h=="number"&&k$(n,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(R$.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Ba("scroll",n):h!=null&&$N(n,o,h,l))}switch(t){case"input":Iw(n),jF(n,i,!1);break;case"textarea":Iw(n),YF(n);break;case"option":i.value!=null&&n.setAttribute("value",""+bv(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?mT(n,!!i.multiple,o,!1):i.defaultValue!=null&&mT(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=gA)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yd(e),null;case 6:if(n&&e.stateNode!=null)wW(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(cn(166));if(t=By(G$.current),By(Zg.current),Fw(e)){if(i=e.stateNode,t=e.memoizedProps,i[Xg]=e,(o=i.nodeValue!==t)&&(n=Ef,n!==null))switch(n.tag){case 3:Pw(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Pw(i.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Xg]=e,e.stateNode=i}return yd(e),null;case 13:if(Fa(Ol),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ul&&Tf!==null&&e.mode&1&&!(e.flags&128))G6(),IT(),e.flags|=98560,o=!1;else if(o=Fw(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(cn(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(cn(317));o[Xg]=e}else IT(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yd(e),o=!1}else og!==null&&(jL(og),og=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Ol.current&1?Hc===0&&(Hc=3):oB())),e.updateQueue!==null&&(e.flags|=4),yd(e),null);case 4:return kT(),PL(n,e),n===null&&F$(e.stateNode.containerInfo),yd(e),null;case 10:return GN(e.type._context),yd(e),null;case 17:return Up(e.type)&&_A(),yd(e),null;case 19:if(Fa(Ol),o=e.memoizedState,o===null)return yd(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)_E(o,!1);else{if(Hc!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(l=$A(n),l!==null){for(e.flags|=128,_E(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)o=t,n=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,n=l.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ma(Ol,Ol.current&1|2),e.child}n=n.sibling}o.tail!==null&&Hu()>LT&&(e.flags|=128,i=!0,_E(o,!1),e.lanes=4194304)}else{if(!i)if(n=$A(l),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),_E(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!ul)return yd(e),null}else 2*Hu()-o.renderingStartTime>LT&&t!==1073741824&&(e.flags|=128,i=!0,_E(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(t=o.last,t!==null?t.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Hu(),e.sibling=null,t=Ol.current,ma(Ol,i?t&1|2:t&1),e):(yd(e),null);case 22:case 23:return sB(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?_f&1073741824&&(yd(e),e.subtreeFlags&6&&(e.flags|=8192)):yd(e),null;case 24:return null;case 25:return null}throw Error(cn(156,e.tag))}function rJ(n,e){switch(FN(e),e.tag){case 1:return Up(e.type)&&_A(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return kT(),Fa(Fp),Fa(Id),YN(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return XN(e),null;case 13:if(Fa(Ol),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(cn(340));IT()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Fa(Ol),null;case 4:return kT(),null;case 10:return GN(e.type._context),null;case 22:case 23:return sB(),null;case 24:return null;default:return null}}var Hw=!1,Cd=!1,iJ=typeof WeakSet=="function"?WeakSet:Set,Un=null;function aT(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){uu(n,e,i)}else t.current=null}function FL(n,e,t){try{t()}catch(i){uu(n,e,i)}}var B3=!1;function sJ(n,e){if(SL=pA,n=I6(),BN(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var l=0,u=-1,h=-1,d=0,m=0,_=n,v=null;t:for(;;){for(var S;_!==t||s!==0&&_.nodeType!==3||(u=l+s),_!==o||i!==0&&_.nodeType!==3||(h=l+i),_.nodeType===3&&(l+=_.nodeValue.length),(S=_.firstChild)!==null;)v=_,_=S;for(;;){if(_===n)break t;if(v===t&&++d===s&&(u=l),v===o&&++m===i&&(h=l),(S=_.nextSibling)!==null)break;_=v,v=_.parentNode}_=S}t=u===-1||h===-1?null:{start:u,end:h}}else t=null}t=t||{start:0,end:0}}else t=null;for(EL={focusedElem:n,selectionRange:t},pA=!1,Un=e;Un!==null;)if(e=Un,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Un=n;else for(;Un!==null;){e=Un;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,A=x.memoizedState,k=e.stateNode,O=k.getSnapshotBeforeUpdate(e.elementType===e.type?w:ig(e.type,w),A);k.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var D=e.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(cn(163))}}catch(L){uu(e,e.return,L)}if(n=e.sibling,n!==null){n.return=e.return,Un=n;break}Un=e.return}return x=B3,B3=!1,x}function _$(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&FL(e,t,o)}s=s.next}while(s!==i)}}function fI(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function UL(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function CW(n){var e=n.alternate;e!==null&&(n.alternate=null,CW(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Xg],delete e[z$],delete e[wL],delete e[zK],delete e[HK])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function MW(n){return n.tag===5||n.tag===3||n.tag===4}function P3(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||MW(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zL(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=gA));else if(i!==4&&(n=n.child,n!==null))for(zL(n,e,t),n=n.sibling;n!==null;)zL(n,e,t),n=n.sibling}function HL(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(HL(n,e,t),n=n.sibling;n!==null;)HL(n,e,t),n=n.sibling}var Hh=null,sg=!1;function R_(n,e,t){for(t=t.child;t!==null;)AW(n,e,t),t=t.sibling}function AW(n,e,t){if(qg&&typeof qg.onCommitFiberUnmount=="function")try{qg.onCommitFiberUnmount(oI,t)}catch{}switch(t.tag){case 5:Cd||aT(t,e);case 6:var i=Hh,s=sg;Hh=null,R_(n,e,t),Hh=i,sg=s,Hh!==null&&(sg?(n=Hh,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Hh.removeChild(t.stateNode));break;case 18:Hh!==null&&(sg?(n=Hh,t=t.stateNode,n.nodeType===8?Ek(n.parentNode,t):n.nodeType===1&&Ek(n,t),N$(n)):Ek(Hh,t.stateNode));break;case 4:i=Hh,s=sg,Hh=t.stateNode.containerInfo,sg=!0,R_(n,e,t),Hh=i,sg=s;break;case 0:case 11:case 14:case 15:if(!Cd&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&FL(t,e,l),s=s.next}while(s!==i)}R_(n,e,t);break;case 1:if(!Cd&&(aT(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(u){uu(t,e,u)}R_(n,e,t);break;case 21:R_(n,e,t);break;case 22:t.mode&1?(Cd=(i=Cd)||t.memoizedState!==null,R_(n,e,t),Cd=i):R_(n,e,t);break;default:R_(n,e,t)}}function F3(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new iJ),e.forEach(function(i){var s=fJ.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function Km(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var o=n,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:Hh=u.stateNode,sg=!1;break e;case 3:Hh=u.stateNode.containerInfo,sg=!0;break e;case 4:Hh=u.stateNode.containerInfo,sg=!0;break e}u=u.return}if(Hh===null)throw Error(cn(160));AW(o,l,s),Hh=null,sg=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(d){uu(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IW(e,n),e=e.sibling}function IW(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Km(e,n),Pg(n),i&4){try{_$(3,n,n.return),fI(3,n)}catch(w){uu(n,n.return,w)}try{_$(5,n,n.return)}catch(w){uu(n,n.return,w)}}break;case 1:Km(e,n),Pg(n),i&512&&t!==null&&aT(t,t.return);break;case 5:if(Km(e,n),Pg(n),i&512&&t!==null&&aT(t,t.return),n.flags&32){var s=n.stateNode;try{k$(s,"")}catch(w){uu(n,n.return,w)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,l=t!==null?t.memoizedProps:o,u=n.type,h=n.updateQueue;if(n.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&QG(s,o),dL(u,l);var d=dL(u,o);for(l=0;l<h.length;l+=2){var m=h[l],_=h[l+1];m==="style"?n6(s,_):m==="dangerouslySetInnerHTML"?e6(s,_):m==="children"?k$(s,_):$N(s,m,_,d)}switch(u){case"input":aL(s,o);break;case"textarea":qG(s,o);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?mT(s,!!o.multiple,S,!1):v!==!!o.multiple&&(o.defaultValue!=null?mT(s,!!o.multiple,o.defaultValue,!0):mT(s,!!o.multiple,o.multiple?[]:"",!1))}s[z$]=o}catch(w){uu(n,n.return,w)}}break;case 6:if(Km(e,n),Pg(n),i&4){if(n.stateNode===null)throw Error(cn(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(w){uu(n,n.return,w)}}break;case 3:if(Km(e,n),Pg(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{N$(e.containerInfo)}catch(w){uu(n,n.return,w)}break;case 4:Km(e,n),Pg(n);break;case 13:Km(e,n),Pg(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(rB=Hu())),i&4&&F3(n);break;case 22:if(m=t!==null&&t.memoizedState!==null,n.mode&1?(Cd=(d=Cd)||m,Km(e,n),Cd=d):Km(e,n),Pg(n),i&8192){if(d=n.memoizedState!==null,(n.stateNode.isHidden=d)&&!m&&n.mode&1)for(Un=n,m=n.child;m!==null;){for(_=Un=m;Un!==null;){switch(v=Un,S=v.child,v.tag){case 0:case 11:case 14:case 15:_$(4,v,v.return);break;case 1:aT(v,v.return);var x=v.stateNode;if(typeof x.componentWillUnmount=="function"){i=v,t=v.return;try{e=i,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(w){uu(i,t,w)}}break;case 5:aT(v,v.return);break;case 22:if(v.memoizedState!==null){z3(_);continue}}S!==null?(S.return=v,Un=S):z3(_)}m=m.sibling}e:for(m=null,_=n;;){if(_.tag===5){if(m===null){m=_;try{s=_.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=_.stateNode,h=_.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=t6("display",l))}catch(w){uu(n,n.return,w)}}}else if(_.tag===6){if(m===null)try{_.stateNode.nodeValue=d?"":_.memoizedProps}catch(w){uu(n,n.return,w)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===n)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===n)break e;for(;_.sibling===null;){if(_.return===null||_.return===n)break e;m===_&&(m=null),_=_.return}m===_&&(m=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:Km(e,n),Pg(n),i&4&&F3(n);break;case 21:break;default:Km(e,n),Pg(n)}}function Pg(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(MW(t)){var i=t;break e}t=t.return}throw Error(cn(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(k$(s,""),i.flags&=-33);var o=P3(n);HL(n,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,u=P3(n);zL(n,u,l);break;default:throw Error(cn(161))}}catch(h){uu(n,n.return,h)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function oJ(n,e,t){Un=n,RW(n)}function RW(n,e,t){for(var i=(n.mode&1)!==0;Un!==null;){var s=Un,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||Hw;if(!l){var u=s.alternate,h=u!==null&&u.memoizedState!==null||Cd;u=Hw;var d=Cd;if(Hw=l,(Cd=h)&&!d)for(Un=s;Un!==null;)l=Un,h=l.child,l.tag===22&&l.memoizedState!==null?H3(s):h!==null?(h.return=l,Un=h):H3(s);for(;o!==null;)Un=o,RW(o),o=o.sibling;Un=s,Hw=u,Cd=d}U3(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Un=o):U3(n)}}function U3(n){for(;Un!==null;){var e=Un;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cd||fI(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Cd)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:ig(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&E3(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}E3(e,l,t)}break;case 5:var u=e.stateNode;if(t===null&&e.flags&4){t=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&t.focus();break;case"img":h.src&&(t.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var _=m.dehydrated;_!==null&&N$(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(cn(163))}Cd||e.flags&512&&UL(e)}catch(v){uu(e,e.return,v)}}if(e===n){Un=null;break}if(t=e.sibling,t!==null){t.return=e.return,Un=t;break}Un=e.return}}function z3(n){for(;Un!==null;){var e=Un;if(e===n){Un=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Un=t;break}Un=e.return}}function H3(n){for(;Un!==null;){var e=Un;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{fI(4,e)}catch(h){uu(e,t,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(h){uu(e,s,h)}}var o=e.return;try{UL(e)}catch(h){uu(e,o,h)}break;case 5:var l=e.return;try{UL(e)}catch(h){uu(e,l,h)}}}catch(h){uu(e,e.return,h)}if(e===n){Un=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Un=u;break}Un=e.return}}var aJ=Math.ceil,CA=s_.ReactCurrentDispatcher,tB=s_.ReactCurrentOwner,bm=s_.ReactCurrentBatchConfig,ps=0,fh=null,mc=null,Vh=0,_f=0,lT=Av(0),Hc=0,X$=null,cb=0,mI=0,nB=0,v$=null,Np=null,rB=0,LT=1/0,H0=null,MA=!1,GL=null,fv=null,Gw=!1,sv=null,AA=0,y$=0,WL=null,LM=-1,DM=0;function ip(){return ps&6?Hu():LM!==-1?LM:LM=Hu()}function mv(n){return n.mode&1?ps&2&&Vh!==0?Vh&-Vh:WK.transition!==null?(DM===0&&(DM=f6()),DM):(n=vo,n!==0||(n=window.event,n=n===void 0?16:T6(n.type)),n):1}function dg(n,e,t,i){if(50<y$)throw y$=0,WL=null,Error(cn(185));Ax(n,t,i),(!(ps&2)||n!==fh)&&(n===fh&&(!(ps&2)&&(mI|=t),Hc===4&&rv(n,Vh)),zp(n,i),t===1&&ps===0&&!(e.mode&1)&&(LT=Hu()+500,hI&&Iv()))}function zp(n,e){var t=n.callbackNode;WY(n,e);var i=dA(n,n===fh?Vh:0);if(i===0)t!==null&&QF(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&QF(t),e===1)n.tag===0?GK(G3.bind(null,n)):U6(G3.bind(null,n)),FK(function(){!(ps&6)&&Iv()}),t=null;else{switch(m6(i)){case 1:t=AN;break;case 4:t=d6;break;case 16:t=hA;break;case 536870912:t=p6;break;default:t=hA}t=FW(t,kW.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function kW(n,e){if(LM=-1,DM=0,ps&6)throw Error(cn(327));var t=n.callbackNode;if(bT()&&n.callbackNode!==t)return null;var i=dA(n,n===fh?Vh:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=IA(n,i);else{e=i;var s=ps;ps|=2;var o=LW();(fh!==n||Vh!==e)&&(H0=null,LT=Hu()+500,Ky(n,e));do try{cJ();break}catch(u){OW(n,u)}while(!0);HN(),CA.current=o,ps=s,mc!==null?e=0:(fh=null,Vh=0,e=Hc)}if(e!==0){if(e===2&&(s=_L(n),s!==0&&(i=s,e=VL(n,s))),e===1)throw t=X$,Ky(n,0),rv(n,i),zp(n,Hu()),t;if(e===6)rv(n,i);else{if(s=n.current.alternate,!(i&30)&&!lJ(s)&&(e=IA(n,i),e===2&&(o=_L(n),o!==0&&(i=o,e=VL(n,o))),e===1))throw t=X$,Ky(n,0),rv(n,i),zp(n,Hu()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(cn(345));case 2:$y(n,Np,H0);break;case 3:if(rv(n,i),(i&130023424)===i&&(e=rB+500-Hu(),10<e)){if(dA(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){ip(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=xL($y.bind(null,n,Np,H0),e);break}$y(n,Np,H0);break;case 4:if(rv(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var l=31-hg(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=Hu()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*aJ(i/1960))-i,10<i){n.timeoutHandle=xL($y.bind(null,n,Np,H0),i);break}$y(n,Np,H0);break;case 5:$y(n,Np,H0);break;default:throw Error(cn(329))}}}return zp(n,Hu()),n.callbackNode===t?kW.bind(null,n):null}function VL(n,e){var t=v$;return n.current.memoizedState.isDehydrated&&(Ky(n,e).flags|=256),n=IA(n,e),n!==2&&(e=Np,Np=t,e!==null&&jL(e)),n}function jL(n){Np===null?Np=n:Np.push.apply(Np,n)}function lJ(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],o=s.getSnapshot;s=s.value;try{if(!mg(o(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rv(n,e){for(e&=~nB,e&=~mI,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-hg(e),i=1<<t;n[t]=-1,e&=~i}}function G3(n){if(ps&6)throw Error(cn(327));bT();var e=dA(n,0);if(!(e&1))return zp(n,Hu()),null;var t=IA(n,e);if(n.tag!==0&&t===2){var i=_L(n);i!==0&&(e=i,t=VL(n,i))}if(t===1)throw t=X$,Ky(n,0),rv(n,e),zp(n,Hu()),t;if(t===6)throw Error(cn(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,$y(n,Np,H0),zp(n,Hu()),null}function iB(n,e){var t=ps;ps|=1;try{return n(e)}finally{ps=t,ps===0&&(LT=Hu()+500,hI&&Iv())}}function hb(n){sv!==null&&sv.tag===0&&!(ps&6)&&bT();var e=ps;ps|=1;var t=bm.transition,i=vo;try{if(bm.transition=null,vo=1,n)return n()}finally{vo=i,bm.transition=t,ps=e,!(ps&6)&&Iv()}}function sB(){_f=lT.current,Fa(lT)}function Ky(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,PK(t)),mc!==null)for(t=mc.return;t!==null;){var i=t;switch(FN(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&_A();break;case 3:kT(),Fa(Fp),Fa(Id),YN();break;case 5:XN(i);break;case 4:kT();break;case 13:Fa(Ol);break;case 19:Fa(Ol);break;case 10:GN(i.type._context);break;case 22:case 23:sB()}t=t.return}if(fh=n,mc=n=gv(n.current,null),Vh=_f=e,Hc=0,X$=null,nB=mI=cb=0,Np=v$=null,Ny!==null){for(e=0;e<Ny.length;e++)if(t=Ny[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,o=t.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}t.pending=i}Ny=null}return n}function OW(n,e){do{var t=mc;try{if(HN(),RM.current=wA,xA){for(var i=Nl.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}xA=!1}if(ub=0,ph=zc=Nl=null,g$=!1,W$=0,tB.current=null,t===null||t.return===null){Hc=1,X$=e,mc=null;break}e:{var o=n,l=t.return,u=t,h=e;if(e=Vh,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var d=h,m=u,_=m.tag;if(!(m.mode&1)&&(_===0||_===11||_===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var S=I3(l);if(S!==null){S.flags&=-257,R3(S,l,u,o,e),S.mode&1&&A3(o,d,e),e=S,h=d;var x=e.updateQueue;if(x===null){var w=new Set;w.add(h),e.updateQueue=w}else x.add(h);break e}else{if(!(e&1)){A3(o,d,e),oB();break e}h=Error(cn(426))}}else if(ul&&u.mode&1){var A=I3(l);if(A!==null){!(A.flags&65536)&&(A.flags|=256),R3(A,l,u,o,e),UN(OT(h,u));break e}}o=h=OT(h,u),Hc!==4&&(Hc=2),v$===null?v$=[o]:v$.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var k=gW(o,h,e);S3(o,k);break e;case 1:u=h;var O=o.type,D=o.stateNode;if(!(o.flags&128)&&(typeof O.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(fv===null||!fv.has(D)))){o.flags|=65536,e&=-e,o.lanes|=e;var L=_W(o,u,e);S3(o,L);break e}}o=o.return}while(o!==null)}NW(t)}catch(z){e=z,mc===t&&t!==null&&(mc=t=t.return);continue}break}while(!0)}function LW(){var n=CA.current;return CA.current=wA,n===null?wA:n}function oB(){(Hc===0||Hc===3||Hc===2)&&(Hc=4),fh===null||!(cb&268435455)&&!(mI&268435455)||rv(fh,Vh)}function IA(n,e){var t=ps;ps|=2;var i=LW();(fh!==n||Vh!==e)&&(H0=null,Ky(n,e));do try{uJ();break}catch(s){OW(n,s)}while(!0);if(HN(),ps=t,CA.current=i,mc!==null)throw Error(cn(261));return fh=null,Vh=0,Hc}function uJ(){for(;mc!==null;)DW(mc)}function cJ(){for(;mc!==null&&!DY();)DW(mc)}function DW(n){var e=PW(n.alternate,n,_f);n.memoizedProps=n.pendingProps,e===null?NW(n):mc=e,tB.current=null}function NW(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=rJ(t,e),t!==null){t.flags&=32767,mc=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Hc=6,mc=null;return}}else if(t=nJ(t,e,_f),t!==null){mc=t;return}if(e=e.sibling,e!==null){mc=e;return}mc=e=n}while(e!==null);Hc===0&&(Hc=5)}function $y(n,e,t){var i=vo,s=bm.transition;try{bm.transition=null,vo=1,hJ(n,e,t,i)}finally{bm.transition=s,vo=i}return null}function hJ(n,e,t,i){do bT();while(sv!==null);if(ps&6)throw Error(cn(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(cn(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(VY(n,o),n===fh&&(mc=fh=null,Vh=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Gw||(Gw=!0,FW(hA,function(){return bT(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=bm.transition,bm.transition=null;var l=vo;vo=1;var u=ps;ps|=4,tB.current=null,sJ(n,t),IW(t,n),RK(EL),pA=!!SL,EL=SL=null,n.current=t,oJ(t),NY(),ps=u,vo=l,bm.transition=o}else n.current=t;if(Gw&&(Gw=!1,sv=n,AA=s),o=n.pendingLanes,o===0&&(fv=null),FY(t.stateNode),zp(n,Hu()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(MA)throw MA=!1,n=GL,GL=null,n;return AA&1&&n.tag!==0&&bT(),o=n.pendingLanes,o&1?n===WL?y$++:(y$=0,WL=n):y$=0,Iv(),null}function bT(){if(sv!==null){var n=m6(AA),e=bm.transition,t=vo;try{if(bm.transition=null,vo=16>n?16:n,sv===null)var i=!1;else{if(n=sv,sv=null,AA=0,ps&6)throw Error(cn(331));var s=ps;for(ps|=4,Un=n.current;Un!==null;){var o=Un,l=o.child;if(Un.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var d=u[h];for(Un=d;Un!==null;){var m=Un;switch(m.tag){case 0:case 11:case 15:_$(8,m,o)}var _=m.child;if(_!==null)_.return=m,Un=_;else for(;Un!==null;){m=Un;var v=m.sibling,S=m.return;if(CW(m),m===d){Un=null;break}if(v!==null){v.return=S,Un=v;break}Un=S}}}var x=o.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var A=w.sibling;w.sibling=null,w=A}while(w!==null)}}Un=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,Un=l;else e:for(;Un!==null;){if(o=Un,o.flags&2048)switch(o.tag){case 0:case 11:case 15:_$(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,Un=k;break e}Un=o.return}}var O=n.current;for(Un=O;Un!==null;){l=Un;var D=l.child;if(l.subtreeFlags&2064&&D!==null)D.return=l,Un=D;else e:for(l=O;Un!==null;){if(u=Un,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:fI(9,u)}}catch(z){uu(u,u.return,z)}if(u===l){Un=null;break e}var L=u.sibling;if(L!==null){L.return=u.return,Un=L;break e}Un=u.return}}if(ps=s,Iv(),qg&&typeof qg.onPostCommitFiberRoot=="function")try{qg.onPostCommitFiberRoot(oI,n)}catch{}i=!0}return i}finally{vo=t,bm.transition=e}}return!1}function W3(n,e,t){e=OT(t,e),e=gW(n,e,1),n=pv(n,e,1),e=ip(),n!==null&&(Ax(n,1,e),zp(n,e))}function uu(n,e,t){if(n.tag===3)W3(n,n,t);else for(;e!==null;){if(e.tag===3){W3(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fv===null||!fv.has(i))){n=OT(t,n),n=_W(e,n,1),e=pv(e,n,1),n=ip(),e!==null&&(Ax(e,1,n),zp(e,n));break}}e=e.return}}function dJ(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=ip(),n.pingedLanes|=n.suspendedLanes&t,fh===n&&(Vh&t)===t&&(Hc===4||Hc===3&&(Vh&130023424)===Vh&&500>Hu()-rB?Ky(n,0):nB|=t),zp(n,e)}function BW(n,e){e===0&&(n.mode&1?(e=Ow,Ow<<=1,!(Ow&130023424)&&(Ow=4194304)):e=1);var t=ip();n=n_(n,e),n!==null&&(Ax(n,e,t),zp(n,t))}function pJ(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),BW(n,t)}function fJ(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(cn(314))}i!==null&&i.delete(e),BW(n,t)}var PW;PW=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Fp.current)Bp=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Bp=!1,tJ(n,e,t);Bp=!!(n.flags&131072)}else Bp=!1,ul&&e.flags&1048576&&z6(e,bA,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;OM(n,e),n=e.pendingProps;var s=AT(e,Id.current);yT(e,t),s=JN(null,e,i,n,s,t);var o=QN();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Up(i)?(o=!0,vA(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,VN(e),s.updater=dI,e.stateNode=s,s._reactInternals=e,kL(e,i,n,t),e=DL(null,e,i,!0,o,t)):(e.tag=0,ul&&o&&PN(e),Qd(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(OM(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=gJ(i),n=ig(i,n),s){case 0:e=LL(null,e,i,n,t);break e;case 1:e=L3(null,e,i,n,t);break e;case 11:e=k3(null,e,i,n,t);break e;case 14:e=O3(null,e,i,ig(i.type,n),t);break e}throw Error(cn(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ig(i,s),LL(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ig(i,s),L3(n,e,i,s,t);case 3:e:{if(TW(e),n===null)throw Error(cn(387));i=e.pendingProps,o=e.memoizedState,s=o.element,V6(n,e),EA(e,i,null,t);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=OT(Error(cn(423)),e),e=D3(n,e,i,t,s);break e}else if(i!==s){s=OT(Error(cn(424)),e),e=D3(n,e,i,t,s);break e}else for(Tf=dv(e.stateNode.containerInfo.firstChild),Ef=e,ul=!0,og=null,t=K6(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(IT(),i===s){e=r_(n,e,t);break e}Qd(n,e,i,t)}e=e.child}return e;case 5:return J6(e),n===null&&AL(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,l=s.children,$L(i,s)?l=null:o!==null&&$L(i,o)&&(e.flags|=32),bW(n,e),Qd(n,e,l,t),e.child;case 6:return n===null&&AL(e),null;case 13:return SW(n,e,t);case 4:return jN(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=RT(e,null,i,t):Qd(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ig(i,s),k3(n,e,i,s,t);case 7:return Qd(n,e,e.pendingProps,t),e.child;case 8:return Qd(n,e,e.pendingProps.children,t),e.child;case 12:return Qd(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,ma(TA,i._currentValue),i._currentValue=l,o!==null)if(mg(o.value,l)){if(o.children===s.children&&!Fp.current){e=r_(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=Q0(-1,t&-t),h.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?h.next=h:(h.next=m.next,m.next=h),d.pending=h}}o.lanes|=t,h=o.alternate,h!==null&&(h.lanes|=t),IL(o.return,t,e),u.lanes|=t;break}h=h.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(cn(341));l.lanes|=t,u=l.alternate,u!==null&&(u.lanes|=t),IL(l,t,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Qd(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,yT(e,t),s=Tm(s),i=i(s),e.flags|=1,Qd(n,e,i,t),e.child;case 14:return i=e.type,s=ig(i,e.pendingProps),s=ig(i.type,s),O3(n,e,i,s,t);case 15:return vW(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ig(i,s),OM(n,e),e.tag=1,Up(i)?(n=!0,vA(e)):n=!1,yT(e,t),X6(e,i,s),kL(e,i,s,t),DL(null,e,i,!0,n,t);case 19:return EW(n,e,t);case 22:return yW(n,e,t)}throw Error(cn(156,e.tag))};function FW(n,e){return h6(n,e)}function mJ(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ym(n,e,t,i){return new mJ(n,e,t,i)}function aB(n){return n=n.prototype,!(!n||!n.isReactComponent)}function gJ(n){if(typeof n=="function")return aB(n)?1:0;if(n!=null){if(n=n.$$typeof,n===wN)return 11;if(n===CN)return 14}return 2}function gv(n,e){var t=n.alternate;return t===null?(t=ym(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function NM(n,e,t,i,s,o){var l=2;if(i=n,typeof n=="function")aB(n)&&(l=1);else if(typeof n=="string")l=5;else e:switch(n){case q1:return Jy(t.children,s,o,e);case xN:l=8,s|=8;break;case nL:return n=ym(12,t,e,s|2),n.elementType=nL,n.lanes=o,n;case rL:return n=ym(13,t,e,s),n.elementType=rL,n.lanes=o,n;case iL:return n=ym(19,t,e,s),n.elementType=iL,n.lanes=o,n;case YG:return gI(t,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case jG:l=10;break e;case XG:l=9;break e;case wN:l=11;break e;case CN:l=14;break e;case Z_:l=16,i=null;break e}throw Error(cn(130,n==null?n:typeof n,""))}return e=ym(l,t,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function Jy(n,e,t,i){return n=ym(7,n,i,e),n.lanes=t,n}function gI(n,e,t,i){return n=ym(22,n,i,e),n.elementType=YG,n.lanes=t,n.stateNode={isHidden:!1},n}function Rk(n,e,t){return n=ym(6,n,null,e),n.lanes=t,n}function kk(n,e,t){return e=ym(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function _J(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dk(0),this.expirationTimes=dk(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dk(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function lB(n,e,t,i,s,o,l,u,h){return n=new _J(n,e,t,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ym(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},VN(o),n}function vJ(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q1,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function UW(n){if(!n)return Tv;n=n._reactInternals;e:{if(Sb(n)!==n||n.tag!==1)throw Error(cn(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Up(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(cn(171))}if(n.tag===1){var t=n.type;if(Up(t))return F6(n,t,e)}return e}function zW(n,e,t,i,s,o,l,u,h){return n=lB(t,i,!0,n,s,o,l,u,h),n.context=UW(null),t=n.current,i=ip(),s=mv(t),o=Q0(i,s),o.callback=e??null,pv(t,o,s),n.current.lanes=s,Ax(n,s,i),zp(n,i),n}function _I(n,e,t,i){var s=e.current,o=ip(),l=mv(s);return t=UW(t),e.context===null?e.context=t:e.pendingContext=t,e=Q0(o,l),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=pv(s,e,l),n!==null&&(dg(n,s,l,o),IM(n,s,l)),l}function RA(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function V3(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function uB(n,e){V3(n,e),(n=n.alternate)&&V3(n,e)}function yJ(){return null}var HW=typeof reportError=="function"?reportError:function(n){console.error(n)};function cB(n){this._internalRoot=n}vI.prototype.render=cB.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(cn(409));_I(n,e,null,null)};vI.prototype.unmount=cB.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;hb(function(){_I(null,n,null,null)}),e[t_]=null}};function vI(n){this._internalRoot=n}vI.prototype.unstable_scheduleHydration=function(n){if(n){var e=v6();n={blockedOn:null,target:n,priority:e};for(var t=0;t<nv.length&&e!==0&&e<nv[t].priority;t++);nv.splice(t,0,n),t===0&&b6(n)}};function hB(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function yI(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function j3(){}function bJ(n,e,t,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var d=RA(l);o.call(d)}}var l=zW(e,i,n,0,null,!1,!1,"",j3);return n._reactRootContainer=l,n[t_]=l.current,F$(n.nodeType===8?n.parentNode:n),hb(),l}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var u=i;i=function(){var d=RA(h);u.call(d)}}var h=lB(n,0,!1,null,null,!1,!1,"",j3);return n._reactRootContainer=h,n[t_]=h.current,F$(n.nodeType===8?n.parentNode:n),hb(function(){_I(e,h,t,i)}),h}function bI(n,e,t,i,s){var o=t._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var u=s;s=function(){var h=RA(l);u.call(h)}}_I(e,l,n,s)}else l=bJ(t,e,n,s,i);return RA(l)}g6=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=t$(e.pendingLanes);t!==0&&(IN(e,t|1),zp(e,Hu()),!(ps&6)&&(LT=Hu()+500,Iv()))}break;case 13:hb(function(){var i=n_(n,1);if(i!==null){var s=ip();dg(i,n,1,s)}}),uB(n,1)}};RN=function(n){if(n.tag===13){var e=n_(n,134217728);if(e!==null){var t=ip();dg(e,n,134217728,t)}uB(n,134217728)}};_6=function(n){if(n.tag===13){var e=mv(n),t=n_(n,e);if(t!==null){var i=ip();dg(t,n,e,i)}uB(n,e)}};v6=function(){return vo};y6=function(n,e){var t=vo;try{return vo=n,e()}finally{vo=t}};fL=function(n,e,t){switch(e){case"input":if(aL(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=cI(i);if(!s)throw Error(cn(90));JG(i),aL(i,s)}}}break;case"textarea":qG(n,t);break;case"select":e=t.value,e!=null&&mT(n,!!t.multiple,e,!1)}};s6=iB;o6=hb;var TJ={usingClientEntryPoint:!1,Events:[Rx,nT,cI,r6,i6,iB]},vE={findFiberByHostInstance:Dy,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},SJ={bundleType:vE.bundleType,version:vE.version,rendererPackageName:vE.rendererPackageName,rendererConfig:vE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s_.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=u6(n),n===null?null:n.stateNode},findFiberByHostInstance:vE.findFiberByHostInstance||yJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ww=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ww.isDisabled&&Ww.supportsFiber)try{oI=Ww.inject(SJ),qg=Ww}catch{}}Rf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TJ;Rf.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hB(e))throw Error(cn(200));return vJ(n,e,null,t)};Rf.createRoot=function(n,e){if(!hB(n))throw Error(cn(299));var t=!1,i="",s=HW;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=lB(n,1,!1,null,null,t,!1,i,s),n[t_]=e.current,F$(n.nodeType===8?n.parentNode:n),new cB(e)};Rf.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(cn(188)):(n=Object.keys(n).join(","),Error(cn(268,n)));return n=u6(e),n=n===null?null:n.stateNode,n};Rf.flushSync=function(n){return hb(n)};Rf.hydrate=function(n,e,t){if(!yI(e))throw Error(cn(200));return bI(null,n,e,!0,t)};Rf.hydrateRoot=function(n,e,t){if(!hB(n))throw Error(cn(405));var i=t!=null&&t.hydratedSources||null,s=!1,o="",l=HW;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),e=zW(e,null,n,1,t??null,s,!1,o,l),n[t_]=e.current,F$(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new vI(e)};Rf.render=function(n,e,t){if(!yI(e))throw Error(cn(200));return bI(null,n,e,!1,t)};Rf.unmountComponentAtNode=function(n){if(!yI(n))throw Error(cn(40));return n._reactRootContainer?(hb(function(){bI(null,null,n,!1,function(){n._reactRootContainer=null,n[t_]=null})}),!0):!1};Rf.unstable_batchedUpdates=iB;Rf.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!yI(t))throw Error(cn(200));if(n==null||n._reactInternals===void 0)throw Error(cn(38));return bI(n,e,t,!1,i)};Rf.version="18.2.0-next-9e3b772b8-20220608";function GW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GW)}catch(n){console.error(n)}}GW(),zG.exports=Rf;var dB=zG.exports;const Vw=bb(dB);var X3=dB;eL.createRoot=X3.createRoot,eL.hydrateRoot=X3.hydrateRoot;var WW={exports:{}},Ok={exports:{}},Lk={exports:{}},Dk={exports:{}},Nk={exports:{}},Y3;function pB(){return Y3||(Y3=1,function(n,e){(function(t,i){n.exports=i()})(Wu,function(){var t={},i,s,o,l,u,h,d,m,_,v,S,x,w,A,k,O,D,L,z,H,U,P,K,ee,re,ie,de,oe,ce,me,Ae,j,Z,ne,ae,_e,Le,we,Xe,Re,qe,Je,ht,it,Oe,Ee,Fe,rt,nt,dt,It,mt,wt,$t,pt,Te,te,ke,ot,ft,xt,at,Ge,Ce,X,Q,le,$e,We,Ft,Be,Ut,ut,Ht,zt,En,Pr,Er,Kr,or,Wn,q,ge,Ne,tt,kt,qt,_n,Ie,lt,Et,gt,Nt,yn,Pn,ir,yr,ni,$r,Ir,ji,Yo,Oo,cl,Kt,dr,ga,Ko,ms,gs,di,pr,fn,ur,wr,nr,pi,Zi,Xr,Fi,Ua,hl,vc,Yu,Os,Lo,hu,Ul,_h,Jo,rr,Ui,Vc,vh,yc,dl,du,pl,fl,qn,Zn,ml,za,_a,zl,$i,zi,gl,kd,Ls,pu,Do,Hl,Yr,fr,Xi,Ds,fu,Gl,jc,Qo,qo,mu,Jr,_s,Ri,ri,va,Hi,gu,oo,_u,Ha,fi,ii,zn,Qr,xi,Yh,vu,vs,_l,Kh,mi,yu,pp,fp,yh,mp,Vp,Ff,gp,Ku,ao,bu,bh,ya,Vr,cr,Xs,Zo,No,Tu,vl,Jh,wi,gi,hr,Ci,ea,Wl,_p,vp,Qh,Su,Ju,bc,Th,Tc,Vl,ta,Qu,Sh,Sc,Ec,ys,qr,yl,na,bl,jl,Xc,Od,_i,Ye,Ot,Tt,gn,Nn,er,sr,In,Rr,Ns,bs,To,ba,Yi,ls,$c,Fr,Bo,Bs,Ys,ra,Eh,Yc,$h,Eu,qh,Zh,Tl,ed,xc,Kc,Ld,Ga,Ta,$u,xh,si,td,Jc,qu,wh,Dd,Sl,Nd,Ch,lo,ia,Uf,jp,El,$l,wc,Mh,nd,Zu,Wa,ec,rd,Cc,Mc,tc,Bd,sa,Cr,Xl,es,oa,ve,Ks,Va,Hr,Hn,Xp,Sa,Zr,vi,Mi,ki,Ac,Po,Fo,uo,Ic,So,Pd,Fd,Ah,Ea,Mn,us,Ts,oi,xl,wl,hn,Gr,ts,Yp,Qc,Ps,Uo,pn,sn,ja,nc,zf,xu,aa,cs,$a,Gi,xa,wu,Ud,rc,Js,zd,qc,id,wa,Cl,Kp,Yl,Cu,sd,Rc,hs,Mu,ic,Eo,Xa,Ss,co,Zc,Qs,Ya,sc,yp,eh,la,yi,Cn,Ln,br,Lr,Wr,qs,Oi,Wi,Kl,Au,oc,Iu,Fs,ho,od,Ca,Ru,ku,Zs,$o,Ka,xo,ac,Ou,Ih,th,xr,Ki,Es,ua,Us,Vn,kc,an;i=function(r,a,p,b){if(!(r instanceof Bt)&&typeof r!="string"||`${r}`.trim()==="")throw Error('Invalid type "'+r+'". The type must be a non-empty string or a Blockly.registry.Type.');if(r=`${r}`.toLowerCase(),typeof a!="string"||a.trim()==="")throw Error('Invalid name "'+a+'". The name must be a non-empty string.');const R=a.toLowerCase();if(!p)throw Error("Can not register a null value");let W=ai[r],pe=Ml[r];if(W||(W=ai[r]=Object.create(null),pe=Ml[r]=Object.create(null)),s(r,p),!b&&W[R])throw Error('Name "'+R+'" with type "'+r+'" already registered.');W[R]=p,pe[R]=a},s=function(r,a){switch(r){case String(Bt.FIELD):if(typeof a.fromJson!="function")throw Error('Type "'+r+'" must have a fromJson function')}},o=function(r,a){r=`${r}`.toLowerCase(),a=a.toLowerCase();const p=ai[r];p&&p[a]?(delete ai[r][a],delete Ml[r][a]):console.warn("Unable to unregister ["+a+"]["+r+"] from the registry.")},l=function(r,a,p){r=`${r}`.toLowerCase(),a=a.toLowerCase();const b=ai[r];if(!b||!b[a]){if(a="Unable to find ["+a+"]["+r+"] in the registry.",p)throw Error(a+" You must require or register a "+r+" plugin.");return console.warn(a),null}return b[a]},u=function(r,a){return r=`${r}`.toLowerCase(),a=a.toLowerCase(),(r=ai[r])?!!r[a]:!1},h=function(r,a,p){return l(r,a,p)},d=function(r,a,p){return l(r,a,p)},m=function(r,a,p){r=`${r}`.toLowerCase();var b=ai[r];if(!b){if(b=`Unable to find [${r}] in the registry.`,p)throw Error(`${b} You must require or register a ${r} plugin.`);return console.warn(b),null}if(!a)return b;r=Ml[r],p=Object.create(null);for(const R of Object.keys(b))p[r[R]]=b[R];return p},_=function(r,a,p){return a=a.plugins[String(r)]||Ja,typeof a=="function"?a:h(r,a,p)},v=function(r){return Oc[r]||null},S=function(){const r=[];for(const a in Oc)r.push(Oc[a]);return r},x=function(r){Oc[r.id]=r},w=function(r){delete Oc[r.id]},A=function(){return ad},k=function(r){ad=r},O=function(){return nh},D=function(r){nh=r},L=function(){return rs},z=function(r){rs=r},H=function(r){for(;r.options.parentWorkspace;)r=r.options.parentWorkspace;const a=r.getParentSvg(),p=r.getCachedParentSvgSize();var b=a.parentElement;if(b instanceof HTMLElement){var R=b.offsetWidth;b=b.offsetHeight,p.width!==R&&(a.setAttribute("width",R+"px"),r.setCachedParentSvgSize(R,null)),p.height!==b&&(a.setAttribute("height",b+"px"),r.setCachedParentSvgSize(null,b)),r.resize()}},U=function(r,a){const p=Object.create(null),b=r.getDescendants(!0);a&&(r=r.getNextBlock())&&(r=b.indexOf(r),b.splice(r,b.length-r));for(let R=0,W;W=b[R];R++)p[W.type]?p[W.type]++:p[W.type]=1;return p},P=function(r){return function(){this.jsonInit(r)}},K=function(r){Rh.defineBlocksWithJsonArrayInternal(r)},ee=function(r){t.defineBlocks$$module$build$src$core$common(t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(r))},t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(r){const a={};for(let p=0;p<r.length;p++){const b=r[p];if(!b){console.warn(`Block definition #${p} in JSON array is ${b}. Skipping`);continue}const R=b.type;R?a[R]={init:P(b)}:console.warn(`Block definition #${p} in JSON array is missing a type attribute. Skipping.`)}return a},t.defineBlocks$$module$build$src$core$common=function(r){for(const a of Object.keys(r)){const p=r[a];a in Dr&&console.warn(`Block definiton "${a}" overwrites previous definition.`),Dr[a]=p}},re=function(){return"blockly-"+(ih++).toString(36)},ie=function(){return rh.genUid()},de=function(r){to=r},oe=function(){return to},ce=function(r){Jp.fireInternal(r)},me=function(r){if(ne()){if(!Lc.length)try{requestAnimationFrame(()=>{setTimeout(Ae,0)})}catch{setTimeout(Ae,0)}Lc.push(r)}},Ae=function(){var r=j(Lc,!0);Lc.length=0;for(let p=0,b;b=r[p];p++)if(b.workspaceId){var a=v(b.workspaceId);a&&a.fireChangeListener(b)}r=new Set(r.map(p=>p.workspaceId));for(const p of r){if(!p||(r=v(p),!r))continue;r=r.getUndoStack();let b;for(a=r.length;0<a;a--){const R=r[a-1];if(R.group==="")break;if(b===void 0)b=R.group;else if(R.group!==b)break}b&&a!=r.length-1&&(a=r.splice(a,r.length-a),a=j(a,!0),r.push(...a))}},j=function(r,a){r=r.slice(),a||r.reverse();const p=[],b=Object.create(null);for(let pe=0,De;De=r[pe];pe++)if(!De.isNull()){var R=[De.isUiEvent?ah:De.type,De.blockId,De.workspaceId].join(" "),W=b[R];const Pt=W?W.event:null;W?De.type===t.MOVE$$module$build$src$core$events$utils&&W.index===pe-1?(R=De,Pt.newParentId=R.newParentId,Pt.newInputName=R.newInputName,Pt.newCoordinate=R.newCoordinate,R.reason&&(Pt.reason?(R=new Set(R.reason.concat(Pt.reason)),Pt.reason=Array.from(R)):Pt.reason=R.reason),W.index=pe):De.type===t.CHANGE$$module$build$src$core$events$utils&&De.element===Pt.element&&De.name===Pt.name?Pt.newValue=De.newValue:De.type===is?(W=De,Pt.viewTop=W.viewTop,Pt.viewLeft=W.viewLeft,Pt.scale=W.scale,Pt.oldScale=W.oldScale):(De.type!==Nu||Pt.type!==no)&&(b[R]={event:De,index:pe},p.push(De)):(b[R]={event:De,index:pe},p.push(De))}r=p.filter(function(pe){return!pe.isNull()}),a||r.reverse();for(let pe=1,De;De=r[pe];pe++)De.type===t.CHANGE$$module$build$src$core$events$utils&&De.element==="mutation"&&r.unshift(r.splice(pe,1)[0]);return r},Z=function(){for(let r=0,a;a=Lc[r];r++)a.recordUndo=!1},t.disable$$module$build$src$core$events$utils=function(){Lu++},t.enable$$module$build$src$core$events$utils=function(){Lu--},ne=function(){return Lu===0},t.getGroup$$module$build$src$core$events$utils=function(){return wo},t.setGroup$$module$build$src$core$events$utils=function(r){Jp.setGroupInternal(r)},ae=function(r){wo=typeof r=="boolean"?r?ie():"":r},_e=function(r){const a=[];r=r.getDescendants(!1);for(let p=0,b;b=r[p];p++)a[p]=b.id;return a},Le=function(r,a){const p=we(r.type);if(!p)throw Error("Unknown event type.");return p.fromJson(r,a)},we=function(r){const a=h(Bt.EVENT,r);if(!a)throw Error(`Event type ${r} not found in registry.`);return a},Xe=function(r){if((r.type===t.MOVE$$module$build$src$core$events$utils||r.type===t.CREATE$$module$build$src$core$events$utils)&&r.workspaceId){var a=v(r.workspaceId);if(!r.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(r=a.getBlockById(r.blockId)){const p=to;try{to=!1;const b=r.getParent();if(b&&b.isEnabled()){const R=r.getDescendants(!1);for(let W=0,pe;pe=R[W];W++)pe.setEnabled(!0)}else if((r.outputConnection||r.previousConnection)&&!a.isDragging())do r.setEnabled(!1),r=r.getNextBlock();while(r)}finally{to=p}}}},Re=function(r,a){qe(),je=setTimeout(function(){a&&a.handleRightClick(r)},N)},qe=function(){je&&(clearTimeout(je),je=0)},Je=function(){se=null},ht=function(r){return!r.type.startsWith("pointer")||r instanceof PointerEvent&&Oe(r)},it=function(r){return`${r.pointerId}`},Oe=function(r){const a=it(r);return se?se===a:r.type==="pointerdown"?(se=a,!0):!1},Ee=function(r,a,p,b,R){function W(De){(R||ht(De))&&(p?b.call(p,De):b(De))}const pe=[];if(a in xe)for(let De=0;De<xe[a].length;De++){const Pt=xe[a][De];r.addEventListener(Pt,W,!1),pe.push([r,Pt,W])}else r.addEventListener(a,W,!1),pe.push([r,a,W]);return pe},Fe=function(r,a,p,b){function R(pe){p?b.call(p,pe):b(pe)}const W=[];if(a in xe)for(let pe=0;pe<xe[a].length;pe++){const De=xe[a][pe];r.addEventListener(De,R,!1),W.push([r,De,R])}else r.addEventListener(a,R,!1),W.push([r,a,R]);return W},rt=function(r){const a=r[r.length-1][2];for(;r.length;){const[p,b,R]=r.pop();p.removeEventListener(b,R,!1)}return a},nt=function(r){if(r.target instanceof HTMLElement){if(r.target.isContentEditable||r.target.getAttribute("data-is-text-input")==="true")return!0;if(r.target instanceof HTMLInputElement)return r=r.target,r.type==="text"||r.type==="number"||r.type==="email"||r.type==="password"||r.type==="search"||r.type==="tel"||r.type==="url";if(r.target instanceof HTMLTextAreaElement)return!0}return!1},dt=function(r){return r.ctrlKey&&mr?!0:r.button===2},It=function(r,a,p){const b=a.createSVGPoint();return b.x=r.clientX,b.y=r.clientY,p||(p=a.getScreenCTM().inverse()),b.matrixTransform(p)},mt=function(r){switch(r.deltaMode){default:return{x:r.deltaX,y:r.deltaY};case 1:return{x:r.deltaX*Qp,y:r.deltaY*Qp};case 2:return{x:r.deltaX*Jn,y:r.deltaY*Jn}}},wt=function(r,a){return a=r.indexOf(a),a===-1?!1:(r.splice(a,1),!0)},$t=function(r){if(Hf)throw Error("CSS already injected");hd+=`
`+r},pt=function(r,a){Hf||(Hf=!0,r&&(r=a.replace(/[\\/]$/,""),a=hd.replace(/<<<PATH>>>/g,r),hd="",r=document.createElement("style"),r.id="blockly-common-style",a=document.createTextNode(a),r.appendChild(a),document.head.insertBefore(r,document.head.firstChild)))},Te=function(r,a,p,b){r=r+" was deprecated in "+a+" and will be deleted in "+p+".",b&&(r+=`
Use `+b+" instead."),c_.has(r)||(c_.add(r),console.warn(r))},te=function(r,a,p){r=document.createElementNS(Sg,`${r}`);for(const b in a)r.setAttribute(b,`${a[b]}`);return p&&p.appendChild(r),r},ke=function(r,a){return a=a.split(" "),a.every(p=>r.classList.contains(p))?!1:(r.classList.add(...a),!0)},ot=function(r,a){r.classList.remove(...a.split(" "))},ft=function(r,a){return a=a.split(" "),a.every(p=>!r.classList.contains(p))?!1:(r.classList.remove(...a),!0)},xt=function(r,a){return r.classList.contains(a)},at=function(r){return r&&r.parentNode?r.parentNode.removeChild(r):null},Ge=function(r,a){const p=a.nextSibling;if(a=a.parentNode,!a)throw Error("Reference node has no parent.");p?a.insertBefore(r,p):a.appendChild(r)},Ce=function(r,a){return Te("Blockly.utils.dom.containsNode","version 10","version 11",'Use native "contains" DOM method'),r.contains(a)},X=function(r,a){r.style.transform=a,r.style["-webkit-transform"]=a},Q=function(){lh++,Hd||(Hd=Object.create(null))},le=function(){lh--,lh||(Hd=null)},$e=function(r){const a=r.textContent+`
`+r.className.baseVal;let p;if(Hd&&(p=Hd[a]))return p;try{p=r.getComputedTextLength()}catch{return 8*r.textContent.length}return Hd&&(Hd[a]=p),p},We=function(r,a,p,b){return Ft(r,a+"pt",p,b)},Ft=function(r,a,p,b){const R=r.textContent;r=R+`
`+r.className.baseVal;var W;return Hd&&(W=Hd[r])||(Li||(W=document.createElement("canvas"),W.className="blocklyComputeCanvas",document.body.appendChild(W),Li=W.getContext("2d")),Li.font=p+" "+a+" "+b,W=R?Li.measureText(R).width:0,Hd&&(Hd[r]=W)),W},Be=function(r,a,p,b){const R=document.createElement("span");R.style.font=p+" "+a+" "+b,R.textContent=r,r=document.createElement("div"),r.style.width="1px",r.style.height="0",a=document.createElement("div"),a.style.display="flex",a.style.position="fixed",a.style.top="0",a.style.left="0",a.appendChild(R),a.appendChild(r),document.body.appendChild(a),p={height:0,baseline:0};try{a.style.alignItems="baseline",p.baseline=r.offsetTop-R.offsetTop,a.style.alignItems="flex-end",p.height=r.offsetTop-R.offsetTop}finally{document.body.removeChild(a)}return p},Ut=function(r){return Bv.getSizeInternal(r)},ut=function(r){if(zt(r,"display")!=="none")return Ht(r);const a=r.style,p=a.display,b=a.visibility,R=a.position;a.visibility="hidden",a.position="absolute",a.display="inline";const W=r.offsetWidth;return r=r.offsetHeight,a.display=p,a.position=R,a.visibility=b,new ws(W,r)},Ht=function(r){return new ws(r.offsetWidth,r.offsetHeight)},zt=function(r,a){return r=window.getComputedStyle(r),r[a]||r.getPropertyValue(a)},En=function(r){const a=new nn(0,0);r=r.getBoundingClientRect();var p=document.documentElement;return p=new nn(window.pageXOffset||p.scrollLeft,window.pageYOffset||p.scrollTop),a.x=r.left+p.x,a.y=r.top+p.y,a},Pr=function(){const r=document.body,a=document.documentElement;return new nn(r.scrollLeft||a.scrollLeft,r.scrollTop||a.scrollTop)},Er=function(r){const a=parseFloat(zt(r,"borderLeftWidth")),p=parseFloat(zt(r,"borderRightWidth")),b=parseFloat(zt(r,"borderTopWidth"));return r=parseFloat(zt(r,"borderBottomWidth")),new bi(b,r,a,p)},Kr=function(r,a,p){r=or(r,a,p),a.scrollLeft=r.x,a.scrollTop=r.y},or=function(r,a,p){var b=En(r),R=En(a),W=Er(a);const pe=b.x-R.x-W.left;return b=b.y-R.y-W.top,R=Ht(r),r=a.clientWidth-R.width,R=a.clientHeight-R.height,W=a.scrollLeft,a=a.scrollTop,p?(W+=pe-r/2,a+=b-R/2):(W+=Math.min(pe,Math.max(pe-r,0)),a+=Math.min(b,Math.max(b-R,0))),new nn(W,a)},Wn=function(r){const a=new nn(0,0);var p=r.x&&r.getAttribute("x");const b=r.y&&r.getAttribute("y");return p&&(a.x=parseInt(p)),b&&(a.y=parseInt(b)),(p=(p=r.getAttribute("transform"))&&p.match(Mm))&&(a.x+=Number(p[1]),p[3]&&(a.y+=Number(p[3]))),(r=r.getAttribute("style"))&&-1<r.indexOf("translate")&&(r=r.match(Eg))&&(a.x+=Number(r[1]),r[3]&&(a.y+=Number(r[3]))),a},q=function(r){let a=0,p=0;for(;r;){const b=Wn(r);if(a+=b.x,p+=b.y,(" "+(r.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;r=r.parentNode}return new nn(a,p)},ge=function(){const r=Pr();return new bi(r.y,document.documentElement.clientHeight+r.y,r.x,document.documentElement.clientWidth+r.x)},Ne=function(){const r=document.documentElement,a=window;return new nn(a.pageXOffset||r.scrollLeft,a.pageYOffset||r.scrollTop)},tt=function(r,a){var p=a.x;a=a.y;const b=r.getInjectionDiv().getBoundingClientRect();return p=new nn(p-b.left,a-b.top),a=r.getOriginOffsetInPixels(),nn.difference(p,a).scale(1/r.scale)},kt=function(r,a){var p=a.scale(r.scale);a=p.x,p=p.y;const b=r.getInjectionDiv().getBoundingClientRect();return r=r.getOriginOffsetInPixels(),new nn(a+b.left+r.x,p+b.top+r.y)},qt=function(r){({document:Am=Am,DOMParser:ka=ka,XMLSerializer:Pu=Pu}=r),p0=new ka,$g=new Pu},t.createElement$$module$build$src$core$utils$xml=function(r){return Am.createElementNS(bp,r)},t.createTextNode$$module$build$src$core$utils$xml=function(r){return Am.createTextNode(r)},t.textToDom$$module$build$src$core$utils$xml=function(r){let a=p0.parseFromString(r,"text/xml");if(a&&a.documentElement&&!a.getElementsByTagName("parsererror").length)return a.documentElement;if((a=p0.parseFromString(r,"text/html"))&&a.body.firstChild&&a.body.firstChild.nodeName.toLowerCase()==="xml")return a.body.firstChild;throw Error(`DOMParser was unable to parse: ${r}`)},_n=function(r){return Ie($g.serializeToString(r))},Ie=function(r){return r.replace(xg,a=>`&#${a.charCodeAt(0)};`)},lt=function(r){return r?((r instanceof Element||typeof r=="string")&&(r=$r(r),r=ir(r)),Et(r),r):null},Et=function(r){const a=r.kind;if(r=r.contents,a&&a!==d_&&a!==uh)throw Error("Invalid toolbox kind "+a+". Please supply either "+d_+" or "+uh);if(!r)throw Error("Toolbox must have a contents attribute.")},gt=function(r){return r?r.contents?r.contents:Array.isArray(r)&&0<r.length&&!r[0].nodeType?r:yr(r):[]},Nt=function(r){return Fv.hasCategoriesInternal(r)},yn=function(r){if(!r)return!1;const a=r.kind;return a?a===uh:!!r.contents.filter(function(p){return p.kind.toUpperCase()==="CATEGORY"}).length},Pn=function(r){return r&&r.contents?!!r.contents.filter(function(a){return a.kind.toUpperCase()==="CATEGORY"}).length:!1},ir=function(r){const a={contents:yr(r)};return r instanceof Node&&ni(r,a),a},yr=function(r){const a=[];let p=r.childNodes;p||(p=r);for(let b=0,R;R=p[b];b++){if(!R.tagName)continue;r={};const W=R.tagName.toUpperCase();r.kind=W,W==="BLOCK"?r.blockxml=R:R.childNodes&&0<R.childNodes.length&&(r.contents=yr(R)),ni(R,r),a.push(r)}return a},ni=function(r,a){for(let p=0;p<r.attributes.length;p++){const b=r.attributes[p];-1<b.nodeName.indexOf("css-")?(a.cssconfig=a.cssconfig||{},a.cssconfig[b.nodeName.replace("css-","")]=b.value):a[b.nodeName]=b.value}},$r=function(r){let a=null;if(r)if(typeof r=="string"){if(a=t.textToDom$$module$build$src$core$utils$xml(r),a.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else r instanceof Element&&(a=r);return a},Ir=function(r,a,p,b,R,W){const pe=W.scrollbar&&W.scrollbar.canScrollVertically();return r.horizontal===Im.LEFT?(p=R.absoluteMetrics.left+p,pe&&W.RTL&&(p+=zo.scrollbarThickness)):(p=R.absoluteMetrics.left+R.viewMetrics.width-a.width-p,pe&&!W.RTL&&(p-=zo.scrollbarThickness)),r.vertical===uc.TOP?r=R.absoluteMetrics.top+b:(r=R.absoluteMetrics.top+R.viewMetrics.height-a.height-b,W.scrollbar&&W.scrollbar.canScrollHorizontally()&&(r-=zo.scrollbarThickness)),new bi(r,r+a.height,p,p+a.width)},ji=function(r,a){return{horizontal:a.toolboxMetrics.position===Qn.LEFT||r.horizontalLayout&&!r.RTL?Im.RIGHT:Im.LEFT,vertical:a.toolboxMetrics.position===Qn.BOTTOM?uc.TOP:uc.BOTTOM}},Yo=function(r,a,p,b){const R=r.left,W=r.right-r.left,pe=r.bottom-r.top;for(let De=0;De<b.length;De++){const Pt=b[De];r.intersects(Pt)&&(r=p===Tp.UP?Pt.top-pe-a:Pt.bottom+a,r=new bi(r,r+pe,R,R+W),De=-1)}return r},Oo=function(r,a){Ai(r,a)},cl=function(r){Ai=r},Kt=function(r,a){ru.confirmInternal(r,a)},dr=function(r,a){Il(r,a)},ga=function(r){Il=r},Ko=function(r,a,p){Oa(r,a,p)},ms=function(r){Oa=r},gs=function(r){return r.getVariableModel!==void 0},di=function(r){return r.getProcedureDef!==void 0},pr=function(r){return r.getProcedureCall!==void 0&&r.renameProcedure!==void 0},t.allUsedVarModels$$module$build$src$core$variables=function(r){r=r.getAllBlocks(!1);const a=new Set;for(let p=0;p<r.length;p++){const b=r[p].getVarModels();if(b)for(let R=0;R<b.length;R++){const W=b[R];W.getId()&&a.add(W)}}return Array.from(a.values())},t.allDeveloperVariables$$module$build$src$core$variables=function(r){r=r.getAllBlocks(!1);const a=new Set;for(let b=0,R;R=r[b];b++){var p=R.getDeveloperVariables;if(p){p=p();for(let W=0;W<p.length;W++)a.add(p[W])}}return Array.from(a.values())},fn=function(r){let a=[];const p=document.createElement("button");return p.setAttribute("text","%{BKY_NEW_VARIABLE}"),p.setAttribute("callbackKey","CREATE_VARIABLE"),r.registerButtonCallback("CREATE_VARIABLE",function(b){Zi(b.getTargetWorkspace())}),a.push(p),r=ur(r),a=a.concat(r)},ur=function(r){r=r.getVariablesOfType("");const a=[];if(0<r.length){var p=r[r.length-1];if(Dr.variables_set){var b=t.createElement$$module$build$src$core$utils$xml("block");b.setAttribute("type","variables_set"),b.setAttribute("gap",Dr.math_change?"8":"24"),b.appendChild(Os(p)),a.push(b)}if(Dr.math_change&&(b=t.createElement$$module$build$src$core$utils$xml("block"),b.setAttribute("type","math_change"),b.setAttribute("gap",Dr.variables_get?"20":"8"),b.appendChild(Os(p)),p=t.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),b.appendChild(p),a.push(b)),Dr.variables_get){r.sort(ef.compareByName);for(let R=0,W;W=r[R];R++)p=t.createElement$$module$build$src$core$utils$xml("block"),p.setAttribute("type","variables_get"),p.setAttribute("gap","8"),p.appendChild(Os(W)),a.push(p)}}return a},wr=function(r){return Nc.generateUniqueNameInternal(r)},nr=function(r){return pi(km.charAt(0),r.getAllVariableNames())},pi=function(r,a){if(!a.length)return r;const p=km;let b="",R=p.indexOf(r);for(;;){let W=!1;for(let pe=0;pe<a.length;pe++)if(a[pe].toLowerCase()===r){W=!0;break}if(!W)break;R++,R===p.length&&(R=0,b=`${Number(b)+1}`),r=p.charAt(R)+b}return r},Zi=function(r,a,p){function b(W){Xr(t.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,W,function(pe){if(pe){var De=Ua(pe,r);if(De){if(De.type===R)var Pt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",De.name);else Pt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,Pt=Pt.replace("%1",De.name).replace("%2",De.type);Oo(Pt,function(){b(pe)})}else r.createVariable(pe,R),a&&a(pe)}else a&&a(null)})}const R=p||"";b("")},t.renameVariable$$module$build$src$core$variables=function(r,a,p){function b(R){const W=t.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",a.name);Xr(W,R,function(pe){if(pe){var De=Fi(pe,a.type,r),Pt=hl(a.name,pe,r);if(De||Pt){var xn="";De?xn=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",De.name).replace("%2",De.type):Pt&&(xn=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",pe).replace("%2",Pt)),Oo(xn,function(){b(pe)})}else r.renameVariableById(a.getId(),pe),p&&p(pe)}else p&&p(null)})}b("")},Xr=function(r,a,p){Ko(r,a,function(b){b&&(b=b.replace(/[\s\xa0]+/g," ").trim(),b===t.Msg$$module$build$src$core$msg.RENAME_VARIABLE||b===t.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(b=null),p(b)})},Fi=function(r,a,p){p=p.getVariableMap().getAllVariables(),r=r.toLowerCase();for(let b=0,R;R=p[b];b++)if(R.name.toLowerCase()===r&&R.type!==a)return R;return null},Ua=function(r,a){a=a.getVariableMap().getAllVariables(),r=r.toLowerCase();for(let p=0,b;b=a[p];p++)if(b.name.toLowerCase()===r)return b;return null},hl=function(r,a,p){return p.getProcedureMap().getProcedures().length?vc(r,a,p):Yu(r,a,p)},vc=function(r,a,p){r=r.toLowerCase(),a=a.toLowerCase(),p=p.getProcedureMap().getProcedures();for(const R of p){var b=R.getParameters().filter(gs).map(W=>W.getVariableModel().name);if(b&&(p=b.some(W=>W.toLowerCase()===r),b=b.some(W=>W.toLowerCase()===a),p&&b))return R.getName()}return null},Yu=function(r,a,p){r=r.toLowerCase(),a=a.toLowerCase(),p=p.getAllBlocks(!1);for(const R of p){if(!di(R))continue;p=R.getProcedureDef();var b=p[1];const W=b.some(pe=>pe.toLowerCase()===r);if(b=b.some(pe=>pe.toLowerCase()===a),W&&b)return p[0]}return null},Os=function(r){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name","VAR"),a.setAttribute("id",r.getId()),a.setAttribute("variabletype",r.type),r=t.createTextNode$$module$build$src$core$utils$xml(r.name),a.appendChild(r),a},t.getOrCreateVariablePackage$$module$build$src$core$variables=function(r,a,p,b){let R=t.getVariable$$module$build$src$core$variables(r,a,p,b);return R||(R=Lo(r,a,p,b)),R},t.getVariable$$module$build$src$core$variables=function(r,a,p,b){const R=r.getPotentialVariableMap();let W=null;if(a&&(W=r.getVariableById(a),!W&&R&&(W=R.getVariableById(a)),W))return W;if(p){if(b===void 0)throw Error("Tried to look up a variable by name without a type");W=r.getVariable(p,b),!W&&R&&(W=R.getVariable(p,b))}return W},Lo=function(r,a,p,b){const R=r.getPotentialVariableMap();return p||(p=wr(r.isFlyout?r.targetWorkspace:r)),R?R.createVariable(p,b,a):r.createVariable(p,b,a)},hu=function(r,a){r=r.getAllVariables();const p=[];if(a.length!==r.length)for(let b=0;b<r.length;b++){const R=r[b];a.indexOf(R)===-1&&p.push(R)}return p},Ul=function(r,a){i(Bt.PASTER,r,a)},_h=function(r){o(Bt.PASTER,r)},Jo=function(r){return vh(r),Vc()?(yc(),Promise.resolve()):($p||($p=new Promise(a=>{Mg=a,cc=window.requestAnimationFrame(()=>{yc(),a()})})),$p)},rr=function(){return $p||Promise.resolve()},Ui=function(r){r||window.cancelAnimationFrame(cc),yc(r),!r&&Mg&&Mg()},Vc=function(){return Jt},vh=function(r){m0.add(r);const a=r.getParent();a?vh(a):Vf.add(r)},yc=function(r){const a=r?new Set([r]):new Set([...Vf].map(R=>R.workspace)),p=[...Vf].filter(du).filter(R=>a.has(R.workspace));for(var b of p)pl(b);for(const R of a)R.resizeContents();for(const R of p)b=R.getRelativeToSurfaceXY(),R.updateComponentLocations(b);for(const R of p)dl(R);r||($p=null)},dl=function(r){Vf.delete(r),m0.delete(r);for(const a of r.getChildren(!1))dl(a)},du=function(r){return!r.isDisposed()&&!r.getParent()},pl=function(r){if(m0.has(r)){for(const a of r.getChildren(!1))pl(a);r.renderEfficiently()}},fl=function(r,a){const p=t.createElement$$module$build$src$core$utils$xml("xml");var b=qn(t.allUsedVarModels$$module$build$src$core$variables(r));b.hasChildNodes()&&p.appendChild(b),b=r.getTopComments(!0);for(let R=0;R<b.length;R++)p.appendChild(b[R].toXmlWithXY(a));for(r=r.getTopBlocks(!0),b=0;b<r.length;b++)p.appendChild(Zn(r[b],a));return p},qn=function(r){const a=t.createElement$$module$build$src$core$utils$xml("variables");for(let p=0;p<r.length;p++){const b=r[p],R=t.createElement$$module$build$src$core$utils$xml("variable");R.appendChild(t.createTextNode$$module$build$src$core$utils$xml(b.name)),b.type&&R.setAttribute("type",b.type),R.id=b.getId(),a.appendChild(R)}return a},Zn=function(r,a){if(r.isInsertionMarker()&&(r=r.getChildren(!1)[0],!r))return new DocumentFragment;let p=0;if(r.workspace.RTL&&(p=r.workspace.getWidth()),a=_a(r,a),mu(a)){const b=r.getRelativeToSurfaceXY();a.setAttribute("x",String(Math.round(r.workspace.RTL?p-b.x:b.x))),a.setAttribute("y",String(Math.round(b.y)))}return a},ml=function(r){if(r.isSerializable()){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name",r.name||""),r.toXml(a)}return null},za=function(r,a){for(let p=0;p<r.inputList.length;p++){const b=r.inputList[p];for(let R=0;R<b.fieldRow.length;R++){const W=ml(b.fieldRow[R]);W&&a.appendChild(W)}}},_a=function(r,a){if(r.isInsertionMarker())return(a=r.getChildren(!1)[0])?_a(a):new DocumentFragment;const p=t.createElement$$module$build$src$core$utils$xml(r.isShadow()?"shadow":"block");if(p.setAttribute("type",r.type),a||(p.id=r.id),r.mutationToDom){var b=r.mutationToDom();b&&(b.hasChildNodes()||b.hasAttributes())&&p.appendChild(b)}if(za(r,p),b=r.getCommentText()){var R=r.getIcon(fo.COMMENT),W=R.getBubbleSize();R=R.bubbleIsVisible();var pe=t.createElement$$module$build$src$core$utils$xml("comment");pe.appendChild(t.createTextNode$$module$build$src$core$utils$xml(b)),pe.setAttribute("pinned",`${R}`),pe.setAttribute("h",String(W.height)),pe.setAttribute("w",String(W.width)),p.appendChild(pe)}for(r.data&&(b=t.createElement$$module$build$src$core$utils$xml("data"),b.appendChild(t.createTextNode$$module$build$src$core$utils$xml(r.data)),p.appendChild(b)),b=0;b<r.inputList.length;b++){W=r.inputList[b];var De=void 0;if(R=!0,W.type!==t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&W.type!==t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){pe=W.connection.targetBlock(),W.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?De=t.createElement$$module$build$src$core$utils$xml("value"):W.type===t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(De=t.createElement$$module$build$src$core$utils$xml("statement"));const xn=W.connection.getShadowDom();!xn||pe&&pe.isShadow()||De.appendChild(zl(xn,a)),pe&&(pe=_a(pe,a),pe.nodeType===qp.ELEMENT_NODE&&(De.appendChild(pe),R=!1)),De.setAttribute("name",W.name),R||p.appendChild(De)}}r.inputsInline!==void 0&&r.inputsInline!==r.inputsInlineDefault&&p.setAttribute("inline",String(r.inputsInline)),r.isCollapsed()&&p.setAttribute("collapsed","true"),r.isEnabled()||p.setAttribute("disabled","true"),r.isDeletable()||r.isShadow()||p.setAttribute("deletable","false"),r.isMovable()||r.isShadow()||p.setAttribute("movable","false"),r.isEditable()||p.setAttribute("editable","false"),De=r.getNextBlock();let Pt;return De&&(b=_a(De,a),b.nodeType===qp.ELEMENT_NODE&&(Pt=t.createElement$$module$build$src$core$utils$xml("next"),Pt.appendChild(b),p.appendChild(Pt))),r=r.nextConnection&&r.nextConnection.getShadowDom(),!r||De&&De.isShadow()||Pt.appendChild(zl(r,a)),p},zl=function(r,a){let p=r=r.cloneNode(!0),b;for(;p;)if(a&&p.nodeName==="shadow"&&p.removeAttribute("id"),p.firstChild)p=p.firstChild;else{for(;p&&!p.nextSibling;){b=p,p=p.parentNode;let R;b.nodeType===qp.TEXT_NODE&&b.data.trim()===""&&((R=p)==null?void 0:R.firstChild)!==b&&at(b)}p&&(b=p,p=p.nextSibling,b.nodeType===qp.TEXT_NODE&&b.data.trim()===""&&at(b))}return r},$i=function(r){return _n(r).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},zi=function(r){r=$i(r).split("<");let a="";for(let p=1;p<r.length;p++){const b=r[p];b[0]==="/"&&(a=a.substring(2)),r[p]=a+"<"+b,b[0]!=="/"&&b.slice(-2)!=="/>"&&(a+="  ")}return r=r.join(`
`),r=r.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),r.replace(/^\n/,"")},gl=function(r,a){return a.setResizesEnabled(!1),a.clear(),r=t.domToWorkspace$$module$build$src$core$xml(r,a),a.setResizesEnabled(!0),r},t.domToWorkspace$$module$build$src$core$xml=function(r,a){let p=0;a.RTL&&(p=a.getWidth());const b=[];Q();const R=t.getGroup$$module$build$src$core$events$utils();R||t.setGroup$$module$build$src$core$events$utils(!0),a.setResizesEnabled&&a.setResizesEnabled(!1);let W=!0;try{for(let pe=0,De;De=r.childNodes[pe];pe++){const Pt=De.nodeName.toLowerCase(),xn=De;if(Pt==="block"||Pt==="shadow"&&!oe()){const Go=Ls(xn,a);b.push(Go.id);let Ro;const kp=parseInt((Ro=xn.getAttribute("x"))!=null?Ro:"10",10);let n1;const r1=parseInt((n1=xn.getAttribute("y"))!=null?n1:"10",10);isNaN(kp)||isNaN(r1)||Go.moveBy(a.RTL?p-kp:kp,r1,["create"]),W=!1}else{if(Pt==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(Pt==="comment")a.rendered?nl.fromXmlRendered(xn,a,p):Bc.fromXml(xn,a);else if(Pt==="variables"){if(W)pu(xn,a);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");W=!1}}}}finally{t.setGroup$$module$build$src$core$events$utils(R),a.setResizesEnabled&&a.setResizesEnabled(!0),a.rendered&&Ui(),le()}return ce(new(we(ql))(a)),b},kd=function(r,a){if(!a.getBlocksBoundingBox)return t.domToWorkspace$$module$build$src$core$xml(r,a);var p=a.getBlocksBoundingBox();if(r=t.domToWorkspace$$module$build$src$core$xml(r,a),p&&p.top!==p.bottom){var b=p.bottom;p=a.RTL?p.right:p.left;var R=1/0;let W=-1/0,pe=1/0;for(let De=0;De<r.length;De++){const Pt=a.getBlockById(r[De]).getRelativeToSurfaceXY();Pt.y<pe&&(pe=Pt.y),Pt.x<R&&(R=Pt.x),Pt.x>W&&(W=Pt.x)}for(b=b-pe+10,p=a.RTL?p-W:p-R,R=0;R<r.length;R++)a.getBlockById(r[R]).moveBy(p,b,["create"])}return r},t.domToBlock$$module$build$src$core$xml=function(r,a){return r=Ls(r,a),a.rendered&&Ui(),r},Ls=function(r,a){t.disable$$module$build$src$core$events$utils();var p=a.getAllVariables();let b;try{if(b=jc(r,a),a.rendered){const R=b,W=b.getDescendants(!1);R.setConnectionTracking(!1);for(let pe=W.length-1;0<=pe;pe--)W[pe].initSvg();for(let pe=W.length-1;0<=pe;pe--)W[pe].queueRender();setTimeout(function(){R.disposed||R.setConnectionTracking(!0)},1),a.resizeContents()}else{const R=b.getDescendants(!1);for(let W=R.length-1;0<=W;W--)R[W].initModel()}}finally{t.enable$$module$build$src$core$events$utils()}if(ne()){for(r=hu(a,p),a=0;a<r.length;a++)p=r[a],ce(new(we(Qa))(p));ce(new(we(t.CREATE$$module$build$src$core$events$utils))(b))}return b},pu=function(r,a){for(let b=0;b<r.children.length;b++){var p=r.children[b];const R=p.getAttribute("type"),W=p.getAttribute("id");if(p=p.textContent,!p)break;a.createVariable(p,R,W)}},Do=function(r){const a={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let p=0;p<r.children.length;p++){const b=r.children[p];if(b.nodeType!==qp.TEXT_NODE)switch(b.nodeName.toLowerCase()){case"mutation":a.mutation.push(b);break;case"comment":a.comment.push(b);break;case"data":a.data.push(b);break;case"title":case"field":a.field.push(b);break;case"value":case"statement":a.input.push(b);break;case"next":a.next.push(b);break;default:console.warn("Ignoring unknown tag: "+b.nodeName)}}return a},Hl=function(r,a){let p=!1;for(let b=0;b<r.length;b++){const R=r[b];a.domToMutation&&(a.domToMutation(R),a.initSvg&&(p=!0))}return p},Yr=function(r,a){for(let b=0;b<r.length;b++){var p=r[b];const R=p.textContent,W=p.getAttribute("pinned")==="true";let pe;const De=parseInt((pe=p.getAttribute("w"))!=null?pe:"50",10);let Pt;p=parseInt((Pt=p.getAttribute("h"))!=null?Pt:"50",10),a.setCommentText(R);const xn=a.getIcon(fo.COMMENT);isNaN(De)||isNaN(p)||xn.setBubbleSize(new ws(De,p)),xn.setBubbleVisible(W),setTimeout(()=>xn.setBubbleVisible(W),1)}},fr=function(r,a){for(let p=0;p<r.length;p++)a.data=r[p].textContent},Xi=function(r,a){for(let p=0;p<r.length;p++){const b=r[p],R=b.getAttribute("name");R?Qo(a,R,b):console.warn(`Ignoring unnamed field in block ${a.type}`)}},Ds=function(r){let a=null,p=null;for(let b=0;b<r.childNodes.length;b++){const R=r.childNodes[b];mu(R)&&(R.nodeName.toLowerCase()==="block"?a=R:R.nodeName.toLowerCase()==="shadow"&&(p=R))}return{childBlockElement:a,childShadowElement:p}},fu=function(r,a,p,b){for(let W=0;W<r.length;W++){var R=r[W];const pe=R.getAttribute("name"),De=pe?p.getInput(pe):null;if(!De){console.warn("Ignoring non-existent input "+pe+" in block "+b);break}if(R=Ds(R),R.childBlockElement){if(!De.connection)throw TypeError("Input connection does not exist.");jc(R.childBlockElement,a,De.connection,!1)}if(R.childShadowElement){let Pt;(Pt=De.connection)==null||Pt.setShadowDom(R.childShadowElement)}}},Gl=function(r,a,p){for(let b=0;b<r.length;b++){const R=Ds(r[b]);if(R.childBlockElement){if(!p.nextConnection)throw TypeError("Next statement does not exist.");if(p.nextConnection.isConnected())throw TypeError("Next statement is already connected.");jc(R.childBlockElement,a,p.nextConnection,!0)}R.childShadowElement&&p.nextConnection&&p.nextConnection.setShadowDom(R.childShadowElement)}},jc=function(r,a,p,b){var R;const W=r.getAttribute("type");if(!W)throw TypeError("Block type unspecified: "+r.outerHTML);var pe=(R=r.getAttribute("id"))!=null?R:void 0;R=a.newBlock(W,pe),pe=Do(r);const De=Hl(pe.mutation,R);if(Yr(pe.comment,R),fr(pe.data,R),p)if(b)if(R.previousConnection)p.connect(R.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(R.outputConnection)p.connect(R.outputConnection);else if(R.previousConnection)p.connect(R.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Xi(pe.field,R),fu(pe.input,a,R,W),Gl(pe.next,a,R),De&&R.initSvg(),(a=r.getAttribute("inline"))&&R.setInputsInline(a==="true"),(a=r.getAttribute("disabled"))&&R.setEnabled(a!=="true"&&a!=="disabled"),(a=r.getAttribute("deletable"))&&R.setDeletable(a==="true"),(a=r.getAttribute("movable"))&&R.setMovable(a==="true"),(a=r.getAttribute("editable"))&&R.setEditable(a==="true"),(a=r.getAttribute("collapsed"))&&R.setCollapsed(a==="true"),r.nodeName.toLowerCase()==="shadow"){for(r=R.getChildren(!1),a=0;a<r.length;a++)if(!r[a].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");R.setShadow(!0)}return R},Qo=function(r,a,p){const b=r.getField(a);b?b.fromXml(p):console.warn("Ignoring non-existent field "+a+" in block "+r.type)},qo=function(r){for(let a=0;a<r.childNodes.length;a++){const p=r.childNodes[a];if(p.nodeName.toLowerCase()==="next"){r.removeChild(p);break}}},mu=function(r){return r.nodeType===qp.ELEMENT_NODE},Jr=function(r){return r.saveState!==void 0&&r.loadState!==void 0},_s=function(r,a){i(Bt.SERIALIZER,r,a)},Ri=function(r){o(Bt.SERIALIZER,r)},ri=function(r,{addCoordinates:a=!1,addInputBlocks:p=!0,addNextBlocks:b=!0,doFullSerialization:R=!0,saveIds:W=!0}={}){if(r.isInsertionMarker())return null;const pe={type:r.type,id:W?r.id:void 0};return a&&Hi(r,pe),va(r,pe),gu(r,pe,R),oo(r,pe,R),_u(r,pe,R),p&&Ha(r,pe,R,W),b&&fi(r,pe,R,W),pe},va=function(r,a){r.isCollapsed()&&(a.collapsed=!0),r.isEnabled()||(a.enabled=!1),r.isOwnDeletable()||(a.deletable=!1),r.isOwnMovable()||(a.movable=!1),r.isOwnEditable()||(a.editable=!1),r.inputsInline!==void 0&&r.inputsInline!==r.inputsInlineDefault&&(a.inline=r.inputsInline),r.data&&(a.data=r.data)},Hi=function(r,a){const p=r.workspace;r=r.getRelativeToSurfaceXY(),a.x=Math.round(p.RTL?p.getWidth()-r.x:r.x),a.y=Math.round(r.y)},gu=function(r,a,p){r.saveExtraState?(r=r.saveExtraState(p),r!==null&&(a.extraState=r)):r.mutationToDom&&(r=r.mutationToDom(),r!==null&&(a.extraState=$i(r).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},oo=function(r,a,p){const b=Object.create(null);for(const R of r.getIcons())Jr(R)&&(r=R.saveState(p))&&(b[R.getType().toString()]=r);Object.keys(b).length&&(a.icons=b)},_u=function(r,a,p){const b=Object.create(null);for(let R=0;R<r.inputList.length;R++){const W=r.inputList[R];for(let pe=0;pe<W.fieldRow.length;pe++){const De=W.fieldRow[pe];De.isSerializable()&&(b[De.name]=De.saveState(p))}}Object.keys(b).length&&(a.fields=b)},Ha=function(r,a,p,b){const R=Object.create(null);for(let W=0;W<r.inputList.length;W++){const pe=r.inputList[W];if(!pe.connection)continue;const De=ii(pe.connection,p,b);De&&(R[pe.name]=De)}Object.keys(R).length&&(a.inputs=R)},fi=function(r,a,p,b){r.nextConnection&&(r=ii(r.nextConnection,p,b))&&(a.next=r)},ii=function(r,a,p){const b=r.getShadowState(!0);if(r=r.targetBlock(),!b&&!r)return null;const R=Object.create(null);return b&&(R.shadow=b),r&&!r.isShadow()&&(R.block=ri(r,{doFullSerialization:a,saveIds:p})),R},zn=function(r,a,{recordUndo:p=!1}={}){return r=Qr(r,a,{recordUndo:p}),a.rendered&&Ui(),r},Qr=function(r,a,{parentConnection:p,isShadow:b=!1,recordUndo:R=!1}={}){const W=oe();de(R),(R=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),t.disable$$module$build$src$core$events$utils();let pe;try{pe=xi(r,a,{parentConnection:p,isShadow:b})}finally{t.enable$$module$build$src$core$events$utils()}if(ne()&&ce(new(we(t.CREATE$$module$build$src$core$events$utils))(pe)),t.setGroup$$module$build$src$core$events$utils(R),de(W),a.rendered){const De=pe;setTimeout(()=>{De.disposed||De.setConnectionTracking(!0)},1)}return pe},xi=function(r,a,{parentConnection:p,isShadow:b=!1}={}){if(!r.type)throw new Uv(r);const R=a.newBlock(r.type,r.id);return R.setShadow(b),Yh(R,r),vu(R,r),vs(R,r),_l(p,R,r),Kh(R,r),mi(R,r),yu(R,r),pp(R,r),yh(R,a.rendered),R},Yh=function(r,a){let p=a.x===void 0?0:a.x;a=a.y===void 0?0:a.y;const b=r.workspace;p=b.RTL?b.getWidth()-p:p,r.moveBy(p,a)},vu=function(r,a){a.collapsed&&r.setCollapsed(!0),a.deletable===!1&&r.setDeletable(!1),a.movable===!1&&r.setMovable(!1),a.editable===!1&&r.setEditable(!1),a.enabled===!1&&r.setEnabled(!1),a.inline!==void 0&&r.setInputsInline(a.inline),a.data!==void 0&&(r.data=a.data)},vs=function(r,a){a.extraState&&(r.loadExtraState?r.loadExtraState(a.extraState):r.domToMutation&&r.domToMutation(t.textToDom$$module$build$src$core$utils$xml(a.extraState)))},_l=function(r,a,p){if(r){if(r.getSourceBlock().isShadow()&&!a.isShadow())throw new Rb(p);if(r.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var b=a.outputConnection;if(!b)throw new Lm("output",a,p)}else if(b=a.previousConnection,!b)throw new Lm("previous",a,p);if(!r.connect(b)){const R=a.workspace.connectionChecker;throw new f_(R.getErrorMessage(R.canConnectWithReason(b,r,!1),b,r),r.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",a,p)}}},Kh=function(r,a){if(a.icons){var p=Object.keys(a.icons);for(const R of p){p=a.icons[R];var b=r.getIcon(R);if(!b){if(b=h(Bt.ICON,R,!1),!b)throw new tf(R,r,a);b=new b(r),r.addIcon(b)}Jr(b)&&b.loadState(p)}}},mi=function(r,a){if(a.fields){var p=Object.keys(a.fields);for(let b=0;b<p.length;b++){const R=p[b],W=a.fields[R],pe=r.getField(R);pe?pe.loadState(W):console.warn(`Ignoring non-existant field ${R} in block ${r.type}`)}}},yu=function(r,a){if(a.inputs){var p=Object.keys(a.inputs);for(let b=0;b<p.length;b++){const R=p[b],W=r.getInput(R);if(!W||!W.connection)throw new Lm(R,r,a);fp(W.connection,a.inputs[R])}}},pp=function(r,a){if(a.next){if(!r.nextConnection)throw new Lm("next",r,a);fp(r.nextConnection,a.next)}},fp=function(r,a){a.shadow&&r.setShadowState(a.shadow),a.block&&xi(a.block,r.getSourceBlock().workspace,{parentConnection:r})},yh=function(r,a){if(a){r.setConnectionTracking(!1),r.initSvg(),r.queueRender();for(const p of r.getIcons())p.onLocationChange(r.getRelativeToSurfaceXY())}else r.initModel()},mp=function(r){const a=r.workspace,p=t.config$$module$build$src$core$config.snapRadius,b=r.getRelativeToSurfaceXY(),R=new nn(0,0),W=a.getAllBlocks(!1).filter(pe=>pe.id!=r.id).map(pe=>pe.getRelativeToSurfaceXY());for(;Vp(nn.sum(b,R),W)||Ff(r,R,p);)a.RTL?R.translate(-p,2*p):R.translate(p,2*p);r.moveTo(nn.sum(b,R))},Vp=function(r,a){return a.some(p=>1>=Math.abs(p.x-r.x)&&1>=Math.abs(p.y-r.y))},Ff=function(r,a,p){return r.getConnections_(!1).some(b=>!!b.closest(p,a).connection)},gp=function(r){return Te("Blockly.clipboard.copy","v11","v12","myCopyable.toCopyData()"),b_.copyInternal(r)},Ku=function(r){const a=r.toCopyData();Ao=a;let p;return Gv=(p=r.workspace)!=null?p:null,a},ao=function(r,a,p){return r&&a?bu(r,a,p):Ao&&Gv?bu(Ao,Gv):null},bu=function(r,a,p){let b;a=(b=a.getRootWorkspace())!=null?b:a;let R,W;return(W=(R=d(Bt.PASTER,r.paster,!1))==null?void 0:R.paste(r,a,p))!=null?W:null},bh=function(r){return Te("Blockly.clipboard.duplicate","v11","v12","Blockly.clipboard.paste(myCopyable.toCopyData(), myWorkspace)"),b_.duplicateInternal(r)},ya=function(r){const a=r.toCopyData();return a?ao(a,r.workspace):null},Vr=function(r,a){r.setAttribute(kb,a)},cr=function(r,a,p){Array.isArray(p)&&(p=p.join(" ")),r.setAttribute(CS+a,`${p}`)},Xs=function(){return pd},Zo=function(r){if(pd=r,r===null){let a;(a=document.querySelector("."+rf))==null||a.remove()}},No=function(){document.querySelector("."+rf)||(pd=document.createElement("div"),pd.className=rf,(L()||document.body).appendChild(pd))},Tu=function(r,a,p){vl(),Lh=r,Fm=p,(r=pd)&&(r.style.direction=a?"rtl":"ltr",r.style.display="block",a=A(),sf=a.getRenderer().getClassName(),Yf=a.getTheme().getClassName(),sf&&ke(r,sf),Yf&&ke(r,Yf))},vl=function(){if(Jh()){Lh=null;var r=pd;r&&(r.style.display="none",r.style.left="",r.style.top="",Fm&&Fm(),Fm=null,r.textContent="",sf&&(ft(r,sf),sf=""),Yf&&(ft(r,Yf),Yf=""),A().markFocused())}},Jh=function(){return!!Lh},wi=function(r){Lh===r&&vl()},gi=function(r,a,p){pd.style.left=r+"px",pd.style.top=a+"px",pd.style.height=p+"px"},hr=function(r,a,p,b){const R=ea(r,a,p);r=Ci(r,a,p,b),0>R?gi(r,0,p.height+R):gi(r,R,p.height)},Ci=function(r,a,p,b){return b?Math.min(Math.max(a.right-p.width,r.left),r.right-p.width):Math.max(Math.min(a.left,r.right-p.width),r.left)},ea=function(r,a,p){return a.bottom+p.height>=r.bottom?a.top-p.height:a.bottom},Wl=function(r){return!(r==null||!r.repositionForWindowResize)},_p=function(){Wl(Lh)&&Lh.repositionForWindowResize()||vl()},vp=function(){return Ig},Qh=function(r){Ig=r},Su=function(r,a,p){if(Tu(Ob,p,ta),a.length){var b=Ju(a,p);_0=b,bc(b,r,p),setTimeout(function(){b.focus()},1),Ig=null}else Vl()},Ju=function(r,a){const p=new g0;p.setRole(Pc.MENU);for(let b=0;b<r.length;b++){const R=r[b],W=new Ag(R.text);W.setRightToLeft(a),W.setRole(Pc.MENUITEM),p.addChild(W),W.setEnabled(R.enabled),R.enabled&&W.onAction(function(){Vl(),requestAnimationFrame(()=>{setTimeout(()=>{R.callback(R.scope)},0)})},{})}return p},bc=function(r,a,p){const b=ge();a=new bi(a.clientY+b.top,a.clientY+b.top,a.clientX+b.left,a.clientX+b.left),Th(r);const R=r.getSize();p&&(a.left+=R.width,a.right+=R.width,b.left+=R.width,b.right+=R.width),hr(b,a,R,p),r.focus()},Th=function(r){var a=Xs();if(!a)throw Error("Attempting to create a context menu when widget div is null");a=r.render(a),ke(a,"blocklyContextMenu"),Ee(a,"contextmenu",null,Tc),r.focus()},Tc=function(r){r.preventDefault(),r.stopPropagation()},Vl=function(){wi(Ob),Ig=null},ta=function(){_0&&(_0.dispose(),_0=null)},t.callbackFactory$$module$build$src$core$contextmenu=function(r,a){return()=>{t.disable$$module$build$src$core$events$utils();let p;try{p=a instanceof Element?Ls(a,r.workspace):Qr(a,r.workspace);const b=r.getRelativeToSurfaceXY();b.x=r.RTL?b.x-t.config$$module$build$src$core$config.snapRadius:b.x+t.config$$module$build$src$core$config.snapRadius,b.y+=2*t.config$$module$build$src$core$config.snapRadius,p.moveBy(b.x,b.y)}finally{t.enable$$module$build$src$core$events$utils()}return ne()&&!p.isShadow()&&ce(new(we(t.CREATE$$module$build$src$core$events$utils))(p)),p.select(),p}},Qu=function(r){return{text:t.Msg$$module$build$src$core$msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.setGroup$$module$build$src$core$events$utils(!0),r.dispose(),t.setGroup$$module$build$src$core$events$utils(!1)}}},Sh=function(r){return{text:t.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){const a=r.toCopyData();a&&ao(a,r.workspace)}}},Sc=function(r,a){const p={enabled:!0};return p.text=t.Msg$$module$build$src$core$msg.ADD_COMMENT,p.callback=function(){const b=new nl(r,t.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT,nl.DEFAULT_SIZE,nl.DEFAULT_SIZE);var R=r.getInjectionDiv().getBoundingClientRect();R=new nn(a.clientX-R.left,a.clientY-R.top);const W=r.getOriginOffsetInPixels();R=nn.difference(R,W),R.scale(1/r.scale),b.moveBy(R.x,R.y),r.rendered&&(b.initSvg(),b.render(),b.select())},p},Ec=function(r){return r*Math.PI/180},ys=function(r){return 180*r/Math.PI},qr=function(r,a,p){if(p<r){const b=p;p=r,r=b}return Math.max(r,Math.min(a,p))},yl=function(){document.querySelector(".blocklyDropDownDiv")||(li=document.createElement("div"),li.className="blocklyDropDownDiv",(L()||document.body).appendChild(li),lf=document.createElement("div"),lf.className="blocklyDropDownContent",li.appendChild(lf),Gm=document.createElement("div"),Gm.className="blocklyDropDownArrow",li.appendChild(Gm),li.style.opacity="0",li.style.transition="transform "+zm+"s, opacity "+zm+"s",li.addEventListener("focusin",function(){ke(li,"blocklyFocused")}),li.addEventListener("focusout",function(){ft(li,"blocklyFocused")}))},na=function(r){Wm=r},bl=function(){return Kf},jl=function(){return lf},Xc=function(){lf.textContent="",lf.style.width=""},Od=function(r,a){li.style.backgroundColor=r,li.style.borderColor=a},_i=function(r,a,p,b){return gn(Ot(a),r,p,b)},Ye=function(r,a,p){return b0=!0,gn(Tt(r),r,a,p)},Ot=function(r){var a=r.getSvgRoot();const p=r.workspace.scale,b=r.height*p;return r=r.width*p,a=En(a),new bi(a.y,a.y+b,a.x,a.x+r)},Tt=function(r){return r=r.getScaledBBox(),new bi(r.top,r.bottom,r.left,r.right)},gn=function(r,a,p,b){const R=r.left+(r.right-r.left)/2,W=r.bottom;r=r.top,b&&(r+=b),b=a.getSourceBlock();let pe=b.workspace;for(;pe.options.parentWorkspace;)pe=pe.options.parentWorkspace;return na(pe.getParentSvg().parentNode),Nn(a,b.RTL,R,W,R,r,p)},Nn=function(r,a,p,b,R,W,pe){return Kf=r,of=pe||null,li.style.direction=a?"rtl":"ltr",r=A(),af=r.getRenderer().getClassName(),Hm=r.getTheme().getClassName(),af&&ke(li,af),Hm&&ke(li,Hm),Yi(p,b,R,W)},er=function(r,a,p,b){return r=Rr(r,p.left,p.right,b.width),{initialX:r.divX,initialY:a,finalX:r.divX,finalY:a+y0,arrowX:r.arrowX,arrowY:-(Rg/2+v0),arrowAtTop:!0,arrowVisible:!0}},sr=function(r,a,p,b){return r=Rr(r,p.left,p.right,b.width),{initialX:r.divX,initialY:a-b.height,finalX:r.divX,finalY:a-b.height-y0,arrowX:r.arrowX,arrowY:b.height-2*v0-Rg/2,arrowAtTop:!1,arrowVisible:!0}},In=function(r,a,p){return r=Rr(r,a.left,a.right,p.width),{initialX:r.divX,initialY:0,finalX:r.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Rr=function(r,a,p,b){return a=qr(a,r-b/2,p-b),r=r-Rg/2-a,p=Lb,r=qr(p,r,b-p-Rg),{arrowX:r,divX:a}},Ns=function(){return!!Kf},bs=function(r,a){return Kf===r?(a?ba():To(),!0):!1},To=function(){li.style.transform="translate(0, 0)",li.style.opacity="0",kg=setTimeout(function(){ba()},1e3*zm),of&&(of(),of=null)},ba=function(){Ns()&&(kg&&clearTimeout(kg),li.style.transform="",li.style.left="",li.style.top="",li.style.opacity="0",li.style.display="none",li.style.backgroundColor="",li.style.borderColor="",of&&(of(),of=null),Xc(),Kf=null,af&&(ft(li,af),af=""),Hm&&(ft(li,Hm),Hm=""),A().markFocused())},Yi=function(r,a,p,b){r=g.getPositionMetrics(r,a,p,b),r.arrowVisible?(Gm.style.display="",Gm.style.transform="translate("+r.arrowX+"px,"+r.arrowY+"px) rotate(45deg)",Gm.setAttribute("class",r.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Gm.style.display="none",a=Math.floor(r.initialX),p=Math.floor(r.initialY),b=Math.floor(r.finalX);const R=Math.floor(r.finalY);return li.style.left=a+"px",li.style.top=p+"px",li.style.display="block",li.style.opacity="1",li.style.transform="translate("+(b-a)+"px,"+(R-p)+"px)",!!r.arrowAtTop},ls=function(){if(Kf){var r=Kf.getSourceBlock();r=b0?Tt(Kf):Ot(r);const a=r.left+(r.right-r.left)/2;Yi(a,r.bottom,a,r.top)}else To()},$c=function(r){if(!(100<r.getDescendants(!1).length)){var a=r.workspace,p=r.getSvgRoot();a.getAudioManager().play("delete");var b=a.getSvgXY(p);p=p.cloneNode(!0),p.setAttribute("transform","translate("+b.x+","+b.y+")"),a.getParentSvg().appendChild(p),Fr(p,{x:b.x,y:b.y,width:r.width,height:r.height},a.RTL,new Date,a.scale)}},Fr=function(r,a,p,b,R){const W=(new Date().getTime()-b.getTime())/150;1<W?at(r):(r.setAttribute("transform","translate("+(a.x+(p?-1:1)*a.width*R/2*W)+","+(a.y+a.height*R*W)+") scale("+(1-W)*R+")"),setTimeout(Fr,10,r,a,p,b,R))},Bo=function(r){var a=r.workspace;const p=a.scale;if(a.getAudioManager().play("click"),!(1>p)){var b=a.getSvgXY(r.getSvgRoot());r.outputConnection?(b.x+=(r.RTL?3:-3)*p,b.y+=13*p):r.previousConnection&&(b.x+=(r.RTL?-23:23)*p,b.y+=3*p);var R=te(Pe.CIRCLE,{cx:b.x,cy:b.y,r:0,fill:"none",stroke:"#888","stroke-width":10},a.getParentSvg());r=te(Pe.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*p},R),a=te(Pe.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},R),r.beginElement(),a.beginElement(),setTimeout(()=>void at(R),150)}},Bs=function(r){if(ra(),r.workspace.getAudioManager().play("disconnect"),!(1>r.workspace.scale)){var a=r.getHeightWidth().height;a=Math.atan(10/a)/Math.PI*180,r.RTL||(a*=-1),B=r,Ys(r,a,new Date)}},Ys=function(r,a,p){const b=(new Date().getTime()-p.getTime())/200;let R="";1>=b&&(R=`skewX(${Math.round(Math.sin(b*Math.PI*3)*(1-b)*a)})`,I=setTimeout(Ys,10,r,a,p)),r.getSvgRoot().setAttribute("transform",`${r.getTranslation()} ${R}`)},ra=function(){B&&(I&&(clearTimeout(I),I=null),B.getSvgRoot().setAttribute("transform",B.getTranslation()),B=null)},Eh=function(r,a){return Te("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),r.startsWith(a)},Yc=function(r){return r.length?r.reduce(function(a,p){return a.length<p.length?a:p}).length:0},$h=function(r,a){if(!r.length)return 0;if(r.length===1)return r[0].length;let p=0;a=a||Yc(r);let b;for(b=0;b<a;b++){for(var R=r[0][b],W=1;W<r.length;W++)if(R!==r[W][b])return p;R===" "&&(p=b+1)}for(R=1;R<r.length;R++)if((W=r[R][b])&&W!==" ")return p;return a},Eu=function(r,a){if(!r.length)return 0;if(r.length===1)return r[0].length;let p=0;a=a||Yc(r);let b;for(b=0;b<a;b++){for(var R=r[0].substr(-b-1,1),W=1;W<r.length;W++)if(R!==r[W].substr(-b-1,1))return p;R===" "&&(p=b+1)}for(R=1;R<r.length;R++)if((W=r[R].charAt(r[R].length-b-1))&&W!==" ")return p;return a},t.wrap$$module$build$src$core$utils$string=function(r,a){r=r.split(`
`);for(let p=0;p<r.length;p++)r[p]=qh(r[p],a);return r.join(`
`)},qh=function(r,a){if(r.length<=a)return r;const p=r.trim().split(/\s+/);for(var b=0;b<p.length;b++)p[b].length>a&&(a=p[b].length);var R=-1/0;let W,pe=1;do{b=R,W=r,r=[],R=p.length/pe;let De=1;for(let Pt=0;Pt<p.length-1;Pt++)De<(Pt+1.5)/R?(De++,r[Pt]=!0):r[Pt]=!1;r=Tl(p,r,a),R=Zh(p,r,a),r=ed(p,r),pe++}while(R>b);return W},Zh=function(r,a,p){const b=[0],R=[];for(var W=0;W<r.length;W++)b[b.length-1]+=r[W].length,a[W]===!0?(b.push(0),R.push(r[W].charAt(r[W].length-1))):a[W]===!1&&b[b.length-1]++;for(r=Math.max(...b),a=0,W=0;W<b.length;W++)a-=2*Math.pow(Math.abs(p-b[W]),1.5),a-=Math.pow(r-b[W],1.5),".?!".indexOf(R[W])!==-1?a+=p/3:",;)]}".indexOf(R[W])!==-1&&(a+=p/4);return 1<b.length&&b[b.length-1]<=b[b.length-2]&&(a+=.5),a},Tl=function(r,a,p){let b=Zh(r,a,p),R;for(let W=0;W<a.length-1;W++){if(a[W]===a[W+1])continue;const pe=[].concat(a);pe[W]=!pe[W],pe[W+1]=!pe[W+1];const De=Zh(r,pe,p);De>b&&(b=De,R=pe)}return R?Tl(r,R,p):a},ed=function(r,a){const p=[];for(let b=0;b<r.length;b++)p.push(r[b]),a[b]!==void 0&&p.push(a[b]?`
`:" ");return p.join("")},t.isNumber$$module$build$src$core$utils$string=function(r){return/^\s*-?\d+(\.\d+)?\s*$/.test(r)},xc=function(r){Rn=r},Kc=function(){return Rn},Ld=function(){return Dn},Ga=function(){return iu},Ta=function(r){if(r=$u(r)){for(r=r.tooltip;typeof r=="function";)r=r();if(typeof r!="string")throw Error("Tooltip function must return a string.");return r}return""},$u=function(r){for(;r&&r.tooltip;){if(typeof r.tooltip=="string"||typeof r.tooltip=="function")return r;r=r.tooltip}return null},xh=function(){document.querySelector(".blocklyTooltipDiv")||(iu=document.createElement("div"),iu.className="blocklyTooltipDiv",(L()||document.body).appendChild(iu))},si=function(r){r.mouseOverWrapper_=Fe(r,"pointerover",null,Jc),r.mouseOutWrapper_=Fe(r,"pointerout",null,qu),r.addEventListener("pointermove",wh,!1)},td=function(r){r&&(rt(r.mouseOverWrapper_),rt(r.mouseOutWrapper_),r.removeEventListener("pointermove",wh))},Jc=function(r){ro||(r=$u(r.currentTarget),Bn!==r&&(Sl(),Yn=null,Bn=r),clearTimeout(st))},qu=function(r){ro||(st=setTimeout(function(){Yn=Bn=null,Sl()},1),clearTimeout(bt),bt=0)},wh=function(r){if(Bn&&Bn.tooltip&&!ro)if(Dn){const a=on-r.pageX;r=Gn-r.pageY,Math.sqrt(a*a+r*r)>Di&&Sl()}else Yn!==Bn&&(clearTimeout(bt),on=r.pageX,Gn=r.pageY,bt=setTimeout(jp,uf))},Dd=function(){Yn=Bn=null,Sl()},Sl=function(){Dn&&(Dn=!1,iu&&(iu.style.display="none")),bt&&(clearTimeout(bt),bt=0)},Nd=function(){Sl(),ro=!0},Ch=function(){ro=!1},lo=function(){iu&&Bn&&(typeof Rn=="function"?Rn(iu,Bn):ia())},ia=function(){var r=Ta(Bn);r=t.wrap$$module$build$src$core$utils$string(r,yt),r=r.split(`
`);for(let a=0;a<r.length;a++){const p=document.createElement("div");p.appendChild(document.createTextNode(r[a])),iu.appendChild(p)}},Uf=function(r){const a=document.documentElement.clientWidth,p=document.documentElement.clientHeight;let b=on;b=r?b-(gr+iu.offsetWidth):b+gr;let R=Gn+rl;return R+iu.offsetHeight>p+window.scrollY&&(R-=iu.offsetHeight+2*rl),r?b=Math.max(T_-window.scrollX,b):b+iu.offsetWidth>a+window.scrollX-2*T_&&(b=a-iu.offsetWidth-2*T_),{x:b,y:R}},jp=function(){if(!ro&&(Yn=Bn,iu)){iu.textContent="",lo();var r=Bn.RTL;iu.style.direction=r?"rtl":"ltr",iu.style.display="block",Dn=!0;var{x:a,y:p}=Uf(r);iu.style.left=a+"px",iu.style.top=p+"px"}},El=function(r,a){for(const p in a)r[p]=a[p]!==null&&typeof a[p]=="object"?El(r[p]||Object.create(null),a[p]):a[p];return r},$l=function(r){return r.bubbleIsVisible!==void 0&&r.setBubbleVisible!==void 0},wc=function(){return AS},Mh=function(r){AS=r},nd=function(){return Jf},Zu=function(r){Jf=r},Wa=function(r){r=`${r}`.toLowerCase().trim();var a=tw[r];if(a||(a=r.substring(0,2)==="0x"?"#"+r.substring(2):r,a=a[0]==="#"?a:"#"+a,/^#[0-9a-f]{6}$/.test(a)))return a;if(/^#[0-9a-f]{3}$/.test(a))return["#",a[1],a[1],a[2],a[2],a[3],a[3]].join("");var p=r.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return p&&(r=Number(p[1]),a=Number(p[2]),p=Number(p[3]),0<=r&&256>r&&0<=a&&256>a&&0<=p&&256>p)?ec(r,a,p):null},ec=function(r,a,p){return a=r<<16|a<<8|p,16>r?"#"+(16777216|a).toString(16).substr(1):"#"+a.toString(16)},rd=function(r){return r=Wa(r),r?(r=parseInt(r.substr(1),16),[r>>16,r>>8&255,r&255]):[0,0,0]},Cc=function(r,a,p){let b=0,R=0,W=0;if(a===0)W=R=b=p;else{const pe=Math.floor(r/60),De=r/60-pe;r=p*(1-a);const Pt=p*(1-a*De);switch(a=p*(1-a*(1-De)),pe){case 1:b=Pt,R=p,W=r;break;case 2:b=r,R=p,W=a;break;case 3:b=r,R=Pt,W=p;break;case 4:b=a,R=r,W=p;break;case 5:b=p,R=r,W=Pt;break;case 6:case 0:b=p,R=a,W=r}}return ec(Math.floor(b),Math.floor(R),Math.floor(W))},Mc=function(r,a,p){return r=Wa(r),!r||(a=Wa(a),!a)?null:(r=rd(r),a=rd(a),ec(Math.round(a[0]+p*(r[0]-a[0])),Math.round(a[1]+p*(r[1]-a[1])),Math.round(a[2]+p*(r[2]-a[2]))))},tc=function(r){return Cc(r,AS,255*Jf)},Bd=function(r,a,p){const b=[];var R=r.split("");R.push("");var W=0;r=[];let pe=null;for(let xn=0;xn<R.length;xn++){var De=R[xn];if(W===0)if(De==="%")(W=r.join(""))&&b.push(W),r.length=0,W=1;else if(p&&De===`
`){const Go=r.join("");Go&&b.push(Go),r.length=0,b.push(De)}else r.push(De);else if(W===1)De==="%"?(r.push(De),W=0):a&&"0"<=De&&"9">=De?(W=2,pe=De,(De=r.join(""))&&b.push(De),r.length=0):De==="{"?W=3:(r.push("%",De),W=0);else if(W===2)if("0"<=De&&"9">=De)pe+=De;else{var Pt=void 0;b.push(parseInt((Pt=pe)!=null?Pt:"",10)),xn--,W=0}else W===3&&(De===""?(r.splice(0,0,"%{"),xn--,W=0):De!=="}"?r.push(De):(W=r.join(""),/[A-Z]\w*/i.test(W)?(De=W.toUpperCase(),(De=De.startsWith("BKY_")?De.substring(4):null)&&De in t.Msg$$module$build$src$core$msg?(W=t.Msg$$module$build$src$core$msg[De],typeof W=="string"?Array.prototype.push.apply(b,Bd(W,a,p)):a?b.push(`${W}`):b.push(W)):b.push("%{"+W+"}")):b.push("%{"+W+"}"),W=r.length=0))}for((a=r.join(""))&&b.push(a),Pt=[],r.length=0,R=0;R<b.length;R++)typeof b[R]!="string"||p&&b[R]===`
`?((a=r.join(""))&&Pt.push(a),r.length=0,Pt.push(b[R])):r.push(b[R]);return(a=r.join(""))&&Pt.push(a),r.length=0,Pt},sa=function(r){return Bd(r,!0,!0)},Cr=function(r){return typeof r!="string"?r:(r=Bd(r,!1,!1),r.length?String(r[0]):"")},Xl=function(r){let a=!0;const p=t.Msg$$module$build$src$core$msg,b=r.match(/%{BKY_[A-Z]\w*}/gi);if(b)for(let R=0;R<b.length;R++){const W=b[R].toUpperCase();p[W.slice(6,-1)]===void 0&&(console.warn("No message string for "+b[R]+" in "+r),a=!1)}return a},es=function(r){const a=typeof r=="string"?Cr(r):r;var p=Number(a);if(!isNaN(p)&&0<=p&&360>=p)return{hue:p,hex:Cc(p,wc(),255*nd())};if(p=Wa(a))return{hue:null,hex:p};throw p='Invalid colour: "'+a+'"',r!==a&&(p+=' (from "'+r+'")'),Error(p)},oa=function(r){return r.getProcedureModel!==void 0&&r.doProcedureUpdate!==void 0&&r.isProcedureDef!==void 0},ve=function(r){return r.startPublishing!==void 0&&r.stopPublishing!==void 0},Ks=function(r,a){i(Bt.FIELD,r,a)},Va=function(r){o(Bt.FIELD,r)},t.fromJson$$module$build$src$core$field_registry=function(r){return Qf.fromJsonInternal(r)},Hr=function(r){const a=d(Bt.FIELD,r.type);if(a){if(typeof a.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return a.fromJson(r)}return console.warn("Blockly could not create a field of type "+r.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},Hn=function(r){let a=!1;const p=r.map(([pe,De])=>typeof pe=="string"?[Cr(pe),De]:(a=!0,[pe.alt!==null?Object.assign({},pe,{alt:Cr(pe.alt)}):Object.assign({},pe),De]));if(a||2>r.length)return{options:p};var b=p.map(([pe])=>pe),R=Yc(b);r=$h(b,R);const W=Eu(b,R);return!r&&!W||R<=r+W?{options:p}:(R=r?b[0].substring(0,r-1):void 0,b=W?b[0].substr(1-W):void 0,{options:Xp(p,r,W),prefix:R,suffix:b})},Xp=function(r,a,p){return r.map(([b,R])=>[b.substring(a,b.length-p),R])},Sa=function(r){if(!Array.isArray(r))throw TypeError("FieldDropdown options must be an array.");if(!r.length)throw TypeError("FieldDropdown options must not be an empty array.");let a=!1;for(let p=0;p<r.length;p++){const b=r[p];Array.isArray(b)?typeof b[1]!="string"?(a=!0,console.error("Invalid option["+p+"]: Each FieldDropdown option id must be a string. Found "+b[1]+" in: ",b)):b[0]&&typeof b[0]!="string"&&typeof b[0].src!="string"&&(a=!0,console.error("Invalid option["+p+"]: Each FieldDropdown option must have a string label or image description. Found"+b[0]+" in: ",b)):(a=!0,console.error("Invalid option["+p+"]: Each FieldDropdown option must be an array. Found: ",b))}if(a)throw TypeError("Found invalid FieldDropdown options.")},t.register$$module$build$src$core$extensions=function(r,a){if(typeof r!="string"||r.trim()==="")throw Error('Error: Invalid extension name "'+r+'"');if(S_[r])throw Error('Error: Extension "'+r+'" is already registered.');if(typeof a!="function")throw Error('Error: Extension "'+r+'" must be a function');S_[r]=a},t.registerMixin$$module$build$src$core$extensions=function(r,a){if(!a||typeof a!="object")throw Error('Error: Mixin "'+r+'" must be a object');t.register$$module$build$src$core$extensions(r,function(){this.mixin(a)})},t.registerMutator$$module$build$src$core$extensions=function(r,a,p,b){const R='Error when registering mutator "'+r+'": ';Ic(R,a);const W=Fo(a,R);if(p&&typeof p!="function")throw Error(R+'Extension "'+r+'" is not a function');t.register$$module$build$src$core$extensions(r,function(){W&&this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(b||[],this)),this.mixin(a),p&&p.apply(this)})},Zr=function(r){vi(r)?delete S_[r]:console.warn('No extension mapping for name "'+r+'" found to unregister')},vi=function(r){return!!S_[r]},Mi=function(r,a,p){const b=S_[r];if(typeof b!="function")throw Error('Error: Extension "'+r+'" not found.');let R;if(p?ki(r,a):R=So(a),b.apply(a),p)Ic('Error after applying mutator "'+r+'": ',a);else if(!Pd(R,a))throw Error('Error when applying extension "'+r+'": mutation properties changed when applying a non-mutator extension.')},ki=function(r,a){if(So(a).length)throw Error('Error: tried to apply mutation "'+r+'" to a block that already has mutator functions.  Block id: '+a.id)},Ac=function(r,a){return uo(r.mutationToDom,r.domToMutation,a+" mutationToDom/domToMutation")},Po=function(r,a){return uo(r.saveExtraState,r.loadExtraState,a+" saveExtraState/loadExtraState")},Fo=function(r,a){return uo(r.compose,r.decompose,a+" compose/decompose")},uo=function(r,a,p){if(r&&a){if(typeof r!="function"||typeof a!="function")throw Error(p+" must be a function");return!0}if(!r&&!a)return!1;throw Error(p+"Must have both or neither functions")},Ic=function(r,a){const p=Ac(a,r),b=Po(a,r);if(!p&&!b)throw Error(r+"Mutations must contain either XML hooks, or JSON hooks, or both");Fo(a,r)},So=function(r){const a=[];return r.domToMutation!==void 0&&a.push(r.domToMutation),r.mutationToDom!==void 0&&a.push(r.mutationToDom),r.saveExtraState!==void 0&&a.push(r.saveExtraState),r.loadExtraState!==void 0&&a.push(r.loadExtraState),r.compose!==void 0&&a.push(r.compose),r.decompose!==void 0&&a.push(r.decompose),a},Pd=function(r,a){if(a=So(a),a.length!==r.length)return!1;for(let p=0;p<a.length;p++)if(r[p]!==a[p])return!1;return!0},Fd=function(r){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")r();else{const a=setInterval(function(){document.readyState==="complete"&&(clearInterval(a),r())},10)}},t.buildTooltipForDropdown$$module$build$src$core$extensions=function(r,a){const p=[];return function(){p.indexOf(this.type)===-1&&(Ah(this,r,a),p.push(this.type)),this.setTooltip((function(){const b=String(this.getFieldValue(r));return Cr(a[b])}).bind(this))}},Ah=function(r,a,p){var b=r.getField(a);if(b instanceof Xd&&!b.isOptionListDynamic()){b=b.getOptions();for(const[,R]of b)p[R]===void 0&&console.warn(`No tooltip mapping for value ${R} of field ${a} of block type ${r.type}.`)}},t.buildTooltipWithFieldText$$module$build$src$core$extensions=function(r,a){return function(){this.setTooltip((function(){const p=this.getField(a);return Cr(r).replace("%1",p?p.getText():"")}).bind(this))}},Ea=function(){const r=this.tooltip;this.setTooltip((function(){const a=this.getParent();return a&&a.getInputsInline()&&a.tooltip||r}).bind(this))},Mn=function(r,a){return" "+r+","+a+" "},us=function(r,a){return" "+r+a.join("")},Ts=function(r,a){return" M "+r+","+a+" "},oi=function(r,a){return" m "+r+","+a+" "},xl=function(r,a){return" l "+r+","+a+" "},wl=function(r){return" l"+r.join("")},hn=function(r,a){return" "+r+" "+a+" "},Gr=function(r,a,p,b){return r+" "+p+" "+p+" "+a+b},ts=function(r,a){i(Bt.ICON,r.toString(),a)},Yp=function(r){o(Bt.ICON,r)},Qc=function(r){const a=r.getProcedureMap().getProcedures().filter(b=>!b.getReturnTypes()).map(b=>[b.getName(),b.getParameters().map(R=>R.getName()),!1]);r.getBlocksByType("procedures_defnoreturn",!1).forEach(b=>{!oa(b)&&di(b)&&a.push(b.getProcedureDef())});const p=r.getProcedureMap().getProcedures().filter(b=>!!b.getReturnTypes()).map(b=>[b.getName(),b.getParameters().map(R=>R.getName()),!0]);return r.getBlocksByType("procedures_defreturn",!1).forEach(b=>{!oa(b)&&di(b)&&p.push(b.getProcedureDef())}),a.sort(Ps),p.sort(Ps),[a,p]},Ps=function(r,a){return r[0].localeCompare(a[0],void 0,{sensitivity:"base"})},t.findLegalName$$module$build$src$core$procedures=function(r,a){if(a.isInFlyout)return r;for(r=r||t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!Uo(r,a.workspace,a);){const p=r.match(/^(.*?)(\d+)$/);r=p?p[1]+(parseInt(p[2])+1):r+"2"}return r},Uo=function(r,a,p){return!pn(r,a,p)},pn=function(r,a,p){for(const b of a.getAllBlocks(!1))if(b!==p&&di(b)&&t.Names$$module$build$src$core$names.equals(b.getProcedureDef()[0],r))return!0;p=p&&oa(p)?p==null?void 0:p.getProcedureModel():void 0;for(const b of a.getProcedureMap().getProcedures())if(b!==p&&t.Names$$module$build$src$core$names.equals(b.getName(),r))return!0;return!1},t.rename$$module$build$src$core$procedures=function(r){var a=this.getSourceBlock();if(!a)throw new io;r=r.trim();const p=t.findLegalName$$module$build$src$core$procedures(r,a);oa(a)&&!a.isInsertionMarker()&&a.getProcedureModel().setName(p);const b=this.getValue();if(b!==r&&b!==p)for(r=a.workspace.getAllBlocks(!1),a=0;a<r.length;a++){const R=r[a];R.renameProcedure&&R.renameProcedure(b,p)}return p},sn=function(r){function a(W,pe){for(let Pt=0;Pt<W.length;Pt++){var De=W[Pt][0];const xn=W[Pt][1],Go=t.createElement$$module$build$src$core$utils$xml("block");Go.setAttribute("type",pe),Go.setAttribute("gap","16");const Ro=t.createElement$$module$build$src$core$utils$xml("mutation");for(Ro.setAttribute("name",De),Go.appendChild(Ro),De=0;De<xn.length;De++){const kp=t.createElement$$module$build$src$core$utils$xml("arg");kp.setAttribute("name",xn[De]),Ro.appendChild(kp)}p.push(Go)}}const p=[];if(Dr.procedures_defnoreturn){var b=t.createElement$$module$build$src$core$utils$xml("block");b.setAttribute("type","procedures_defnoreturn"),b.setAttribute("gap","16");var R=t.createElement$$module$build$src$core$utils$xml("field");R.setAttribute("name","NAME"),R.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),b.appendChild(R),p.push(b)}return Dr.procedures_defreturn&&(b=t.createElement$$module$build$src$core$utils$xml("block"),b.setAttribute("type","procedures_defreturn"),b.setAttribute("gap","16"),R=t.createElement$$module$build$src$core$utils$xml("field"),R.setAttribute("name","NAME"),R.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),b.appendChild(R),p.push(b)),Dr.procedures_ifreturn&&(b=t.createElement$$module$build$src$core$utils$xml("block"),b.setAttribute("type","procedures_ifreturn"),b.setAttribute("gap","16"),p.push(b)),p.length&&p[p.length-1].setAttribute("gap","24"),r=Qc(r),a(r[0],"procedures_callnoreturn"),a(r[1],"procedures_callreturn"),p},ja=function(r){var a=[],p=r.getBlocksByType("procedures_mutatorarg",!1);for(let W=0,pe;pe=p[W];W++)a.push(pe.getFieldValue("NAME"));p=t.createElement$$module$build$src$core$utils$xml("xml");const b=t.createElement$$module$build$src$core$utils$xml("block");b.setAttribute("type","procedures_mutatorarg");const R=t.createElement$$module$build$src$core$utils$xml("field");R.setAttribute("name","NAME"),a=pi(t.DEFAULT_ARG$$module$build$src$core$procedures,a),a=t.createTextNode$$module$build$src$core$utils$xml(a),R.appendChild(a),b.appendChild(R),p.appendChild(b),r.updateToolbox(p)},nc=function(r){if(r.type===no&&r.bubbleType==="mutator"&&r.isOpen&&r.blockId){r=v(r.workspaceId).getBlockById(r.blockId);var a=r.type;(a==="procedures_defnoreturn"||a==="procedures_defreturn")&&(r=r.getIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),ja(r),r.addChangeListener(zf))}},zf=function(r){(r.type===t.CREATE$$module$build$src$core$events$utils||r.type===t.DELETE$$module$build$src$core$events$utils||r.type===t.CHANGE$$module$build$src$core$events$utils||r.type===sh)&&(r=v(r.workspaceId),ja(r))},xu=function(r,a){return a.getAllBlocks(!1).filter(p=>aa(p,r)||pr(p)&&t.Names$$module$build$src$core$names.equals(p.getProcedureCall(),r))},aa=function(r,a){return oa(r)&&!r.isProcedureDef()&&r.getProcedureModel()&&t.Names$$module$build$src$core$names.equals(r.getProcedureModel().getName(),a)},t.mutateCallers$$module$build$src$core$procedures=function(r){const a=oe();var p=r.getProcedureDef()[0];const b=r.mutationToDom(!0);r=xu(p,r.workspace);for(let W=0,pe;pe=r[W];W++){p=(p=pe.mutationToDom())&&_n(p),pe.domToMutation&&pe.domToMutation(b);var R=pe.mutationToDom();R=R&&_n(R),p!==R&&(de(!1),ce(new(we(t.CHANGE$$module$build$src$core$events$utils))(pe,"mutation",null,p,R)),de(a))}},t.getDefinition$$module$build$src$core$procedures=function(r,a){for(const p of a.getAllBlocks(!1))if(oa(p)&&p.isProcedureDef()&&t.Names$$module$build$src$core$names.equals(p.getProcedureModel().getName(),r)||di(p)&&t.Names$$module$build$src$core$names.equals(p.getProcedureDef()[0],r))return p;return null},cs=function(r){return r.isDynamic},$a=function(r){return r.pathDown!==void 0&&r.pathUp!==void 0},Gi=function(r){return r.pathLeft!==void 0&&r.pathRight!==void 0},xa=function(r){let a=r.outputConnection;return(!a||r.previousConnection&&r.previousConnection.isConnected())&&(a=r.previousConnection),a},wu=function(r,a){if(!r||!a)throw Error("Cannot connect null connections.");r.targetConnection=a,a.targetConnection=r},Ud=function(r,a){let p=null;a=a.outputConnection;const b=a==null?void 0:a.getConnectionChecker();for(let R=0,W;W=r.inputList[R];R++){const pe=W.connection;let De;if(pe&&((De=b)!=null&&De.canConnect(a,pe,!1))){if(p)return null;p=pe}}return p},rc=function(r,a){let p;for(;p=Ud(r,a);)if(r=p.targetBlock(),!r||r.isShadow())return p;return null},Js=function(r,a){i(Bt.RENDERER,r,a)},zd=function(r){o(Bt.RENDERER,r)},qc=function(r,a,p){return r=new(h(Bt.RENDERER,r))(r),r.init(a,p),r},id=function(r){Zi(r.getTargetWorkspace(),void 0,"String")},wa=function(r){Zi(r.getTargetWorkspace(),void 0,"Number")},Cl=function(r){Zi(r.getTargetWorkspace(),void 0,"Colour")},Kp=function(r){let a=[],p=document.createElement("button");return p.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),p.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),a.push(p),p=document.createElement("button"),p.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),p.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),a.push(p),p=document.createElement("button"),p.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),p.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),a.push(p),r.registerButtonCallback("CREATE_VARIABLE_STRING",id),r.registerButtonCallback("CREATE_VARIABLE_NUMBER",wa),r.registerButtonCallback("CREATE_VARIABLE_COLOUR",Cl),r=Yl(r),a=a.concat(r)},Yl=function(r){r=r.getAllVariables();const a=[];if(0<r.length){if(Dr.variables_set_dynamic){var p=r[r.length-1];const b=t.createElement$$module$build$src$core$utils$xml("block");b.setAttribute("type","variables_set_dynamic"),b.setAttribute("gap","24"),b.appendChild(Os(p)),a.push(b)}if(Dr.variables_get_dynamic){r.sort(ef.compareByName);for(let b=0,R;R=r[b];b++)p=t.createElement$$module$build$src$core$utils$xml("block"),p.setAttribute("type","variables_get_dynamic"),p.setAttribute("gap","8"),p.appendChild(Os(R)),a.push(p)}}return a},Cu=function(r){return r.toCopyData!==void 0},sd=function(){Bi.registry.register({name:tm.ESCAPE,preconditionFn(r){return!r.options.readOnly},callback(r){return r.hideChaff(),!0},keyCodes:[Nr.ESC]})},Rc=function(){Bi.registry.register({name:tm.DELETE,preconditionFn(r){const a=O();return!r.options.readOnly&&a!=null&&a.isDeletable()},callback(r,a){return a.preventDefault(),Vm.inProgress()?!1:(O().checkAndDelete(),!0)},keyCodes:[Nr.DELETE,Nr.BACKSPACE]})},hs=function(){const r=Bi.registry.createSerializedKey(Nr.C,[Nr.CTRL]),a=Bi.registry.createSerializedKey(Nr.C,[Nr.ALT]),p=Bi.registry.createSerializedKey(Nr.C,[Nr.META]);Bi.registry.register({name:tm.COPY,preconditionFn(b){const R=O();return!b.options.readOnly&&!Vm.inProgress()&&R!=null&&R.isDeletable()&&R.isMovable()&&Cu(R)},callback(b,R){return R.preventDefault(),b.hideChaff(),R=O(),!R||!Cu(R)?!1:(ny=R.toCopyData(),Kb=b,!!ny)},keyCodes:[r,a,p]})},Mu=function(){const r=Bi.registry.createSerializedKey(Nr.X,[Nr.CTRL]),a=Bi.registry.createSerializedKey(Nr.X,[Nr.ALT]),p=Bi.registry.createSerializedKey(Nr.X,[Nr.META]);Bi.registry.register({name:tm.CUT,preconditionFn(b){const R=O();return!b.options.readOnly&&!Vm.inProgress()&&R!=null&&R instanceof em&&R.isDeletable()&&R.isMovable()&&!R.workspace.isFlyout},callback(b){const R=O();return!R||!Cu(R)?!1:(ny=R.toCopyData(),Kb=b,R.checkAndDelete(),!0)},keyCodes:[r,a,p]})},ic=function(){const r=Bi.registry.createSerializedKey(Nr.V,[Nr.CTRL]),a=Bi.registry.createSerializedKey(Nr.V,[Nr.ALT]),p=Bi.registry.createSerializedKey(Nr.V,[Nr.META]);Bi.registry.register({name:tm.PASTE,preconditionFn(b){return!b.options.readOnly&&!Vm.inProgress()},callback(){return ny&&Kb?!!ao(ny,Kb):!1},keyCodes:[r,a,p]})},Eo=function(){const r=Bi.registry.createSerializedKey(Nr.Z,[Nr.CTRL]),a=Bi.registry.createSerializedKey(Nr.Z,[Nr.ALT]),p=Bi.registry.createSerializedKey(Nr.Z,[Nr.META]);Bi.registry.register({name:tm.UNDO,preconditionFn(b){return!b.options.readOnly&&!Vm.inProgress()},callback(b){return b.hideChaff(),b.undo(!1),!0},keyCodes:[r,a,p]})},Xa=function(){const r=Bi.registry.createSerializedKey(Nr.Z,[Nr.SHIFT,Nr.CTRL]),a=Bi.registry.createSerializedKey(Nr.Z,[Nr.SHIFT,Nr.ALT]),p=Bi.registry.createSerializedKey(Nr.Z,[Nr.SHIFT,Nr.META]),b=Bi.registry.createSerializedKey(Nr.Y,[Nr.CTRL]);Bi.registry.register({name:tm.REDO,preconditionFn(R){return!Vm.inProgress()&&!R.options.readOnly},callback(R){return R.hideChaff(),R.undo(!0),!0},keyCodes:[r,a,p,b]})},Ss=function(){sd(),Rc(),hs(),Mu(),ic(),Eo(),Xa()},co=function(r){const a={id:r.getId(),name:r.getName(),returnTypes:r.getReturnTypes()};return r.getParameters().length&&(a.parameters=r.getParameters().map(p=>Zc(p))),a},Zc=function(r){const a={id:r.getId(),name:r.getName()};return r.getTypes().length&&(a.types=r.getTypes()),a},Qs=function(r,a,p,b){if(r=new r(b,p.name,p.id).setReturnTypes(p.returnTypes),!p.parameters)return r;for(const[R,W]of p.parameters.entries())r.insertParameter(Ya(a,W,b),R);return r},Ya=function(r,a,p){return r=new r(p,a.name,a.id),a.types&&r.setTypes(a.types),r},sc=function(r){const a=Object.create(null),p=m(Bt.SERIALIZER,!0);for(const b in p){let R;const W=(R=p[b])==null?void 0:R.save(r);W&&(a[b]=W)}return a},yp=function(r,a,{recordUndo:p=!1}={}){var b=m(Bt.SERIALIZER,!0);if(b){b=Object.entries(b).sort((W,pe)=>pe[1].priority-W[1].priority);var R=oe();de(p),(p=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),Q(),a instanceof df&&a.setResizesEnabled(!1);for(const[,W]of b.reverse()){let pe;(pe=W)==null||pe.clear(a)}for(let[W,pe]of b.reverse())if(r[W]){let De;(De=pe)==null||De.load(r[W],a)}a instanceof df&&a.setResizesEnabled(!0),le(),ce(new(we(ql))(a)),t.setGroup$$module$build$src$core$events$utils(p),de(R)}},eh=function(r,a,p){const b=p.getBoundingRectangle(),R=b.right-b.left,W=qr(a.top,b.top,a.top+a.height-(b.bottom-b.top))-b.top;let pe=a.left;return a=a.left+a.width-R,r.RTL?pe=Math.min(a,pe):a=Math.max(pe,a),(r=qr(pe,b.left,a)-b.left)||W?(p.moveBy(r,W,["inbounds"]),!0):!1},la=function(r){return a=>{var p=r.getMetricsManager();if(p.hasFixedEdges()&&!r.isDragging()){var b;if(ud.indexOf((b=a.type)!=null?b:"")!==-1){b=p.getScrollMetrics(!0);const R=yi(r,a);R&&(p=t.getGroup$$module$build$src$core$events$utils()||!1,t.setGroup$$module$build$src$core$events$utils(a.group),eh(r,b,R)&&!a.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),t.setGroup$$module$build$src$core$events$utils(p))}else a.type===is&&a.scale&&a.oldScale&&a.scale>a.oldScale&&Cn(r)}}},yi=function(r,a){let p=null;switch(a.type){case t.CREATE$$module$build$src$core$events$utils:case t.MOVE$$module$build$src$core$events$utils:(p=r.getBlockById(a.blockId))&&(p=p.getRootBlock());break;case Co:case Za:p=r.getCommentById(a.commentId)}return p},Cn=function(r){var a=r.getMetricsManager();if(a.hasFixedEdges()&&!r.isDragging()){a=a.getScrollMetrics(!0);var p=r.getTopBoundedElements();for(let b=0,R;R=p[b];b++)eh(r,a,R)}},Ln=function(r,a){const p=[];for(const b of r.getIcons())(!$l(b)||b.bubbleIsVisible())&&(p.push({location:a,icon:b}),b.onLocationChange(a));for(const b of r.getChildren(!1))p.push(...Ln(b,nn.sum(a,b.relativeCoords)));return p},br=function(){ei.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.UNDO},preconditionFn(r){return 0<r.workspace.getUndoStack().length?"enabled":"disabled"},callback(r){r.workspace.undo(!1)},scopeType:ei.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},Lr=function(){ei.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.REDO},preconditionFn(r){return 0<r.workspace.getRedoStack().length?"enabled":"disabled"},callback(r){r.workspace.undo(!0)},scopeType:ei.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Wr=function(){ei.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(r){return r.workspace.isMovable()?1<r.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(r){r.workspace.cleanUp()},scopeType:ei.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},qs=function(r,a){function p(W){R--,W.setCollapsed(r),R===0&&t.setGroup$$module$build$src$core$events$utils(!1)}let b=0,R=0;t.setGroup$$module$build$src$core$events$utils(!0);for(let W=0;W<a.length;W++){let pe=a[W];for(;pe;)R++,setTimeout(p.bind(null,pe),b),pe=pe.getNextBlock(),b+=10}},Oi=function(){ei.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(r){if(r.workspace.options.collapse){r=r.workspace.getTopBlocks(!1);for(let a=0;a<r.length;a++){let p=r[a];for(;p;){if(!p.isCollapsed())return"enabled";p=p.getNextBlock()}}return"disabled"}return"hidden"},callback(r){qs(!0,r.workspace.getTopBlocks(!0))},scopeType:ei.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Wi=function(){ei.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(r){if(r.workspace.options.collapse){r=r.workspace.getTopBlocks(!1);for(let a=0;a<r.length;a++){let p=r[a];for(;p;){if(p.isCollapsed())return"enabled";p=p.getNextBlock()}}return"disabled"}return"hidden"},callback(r){qs(!1,r.workspace.getTopBlocks(!0))},scopeType:ei.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Kl=function(r,a){if(r.isDeletable())Array.prototype.push.apply(a,r.getDescendants(!1));else{r=r.getChildren(!1);for(let p=0;p<r.length;p++)Kl(r[p],a)}},Au=function(r){const a=[];r=r.getTopBlocks(!0);for(let p=0;p<r.length;p++)Kl(r[p],a);return a},oc=function(r,a){a?t.setGroup$$module$build$src$core$events$utils(a):(t.setGroup$$module$build$src$core$events$utils(!0),a=t.getGroup$$module$build$src$core$events$utils());const p=r.shift();p&&(p.isDeadOrDying()?oc(r,a):(p.dispose(!1,!0),setTimeout(oc,10,r,a))),t.setGroup$$module$build$src$core$events$utils(!1)},Iu=function(){ei.registry.register({displayText(r){return r.workspace?(r=Au(r.workspace).length,r===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${r}`)):""},preconditionFn(r){return r.workspace&&0<Au(r.workspace).length?"enabled":"disabled"},callback(r){if(r.workspace){r.workspace.cancelCurrentGesture();var a=Au(r.workspace);2>a.length?oc(a):Kt(t.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(a.length)),function(p){p&&oc(a)})}},scopeType:ei.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Fs=function(){br(),Lr(),Wr(),Oi(),Wi(),Iu()},ho=function(){ei.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.isDeletable()&&r.isMovable()?r.isDuplicatable()?"enabled":"disabled":"hidden"},callback(r){if(r.block){var a=r.block.toCopyData();a&&ao(a,r.block.workspace)}},scopeType:ei.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},od=function(){ei.registry.register({displayText(r){return r.block.hasIcon(Nh.TYPE)?t.Msg$$module$build$src$core$msg.REMOVE_COMMENT:t.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.workspace.options.comments&&!r.isCollapsed()&&r.isEditable()?"enabled":"hidden"},callback(r){r=r.block,r.hasIcon(Nh.TYPE)?r.setCommentText(null):r.setCommentText("")},scopeType:ei.ScopeType.BLOCK,id:"blockComment",weight:2})},Ca=function(){ei.registry.register({displayText(r){return r.block.getInputsInline()?t.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:t.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(r){if(r=r.block,!r.isInFlyout&&r.isMovable()&&!r.isCollapsed()){for(let a=1;a<r.inputList.length;a++)if(!(r.inputList[a-1]instanceof e1||r.inputList[a]instanceof e1))return"enabled"}return"hidden"},callback(r){r.block.setInputsInline(!r.block.getInputsInline())},scopeType:ei.ScopeType.BLOCK,id:"blockInline",weight:3})},Ru=function(){ei.registry.register({displayText(r){return r.block.isCollapsed()?t.Msg$$module$build$src$core$msg.EXPAND_BLOCK:t.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.isMovable()&&r.workspace.options.collapse?"enabled":"hidden"},callback(r){r.block.setCollapsed(!r.block.isCollapsed())},scopeType:ei.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},ku=function(){ei.registry.register({displayText(r){return r.block.isEnabled()?t.Msg$$module$build$src$core$msg.DISABLE_BLOCK:t.Msg$$module$build$src$core$msg.ENABLE_BLOCK},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.workspace.options.disable&&r.isEditable()?r.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(r){r=r.block;const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),r.setEnabled(!r.isEnabled()),t.setGroup$$module$build$src$core$events$utils(a)},scopeType:ei.ScopeType.BLOCK,id:"blockDisable",weight:5})},Zs=function(){ei.registry.register({displayText(r){var a=r.block;return r=a.getDescendants(!1).length,(a=a.getNextBlock())&&(r-=a.getDescendants(!1).length),r===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${r}`)},preconditionFn(r){return!r.block.isInFlyout&&r.block.isDeletable()?"enabled":"hidden"},callback(r){r.block&&r.block.checkAndDelete()},scopeType:ei.ScopeType.BLOCK,id:"blockDelete",weight:6})},$o=function(){ei.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.HELP},preconditionFn(r){return r=r.block,(typeof r.helpUrl=="function"?r.helpUrl():r.helpUrl)?"enabled":"hidden"},callback(r){r.block.showHelp()},scopeType:ei.ScopeType.BLOCK,id:"blockHelp",weight:7})},Ka=function(){ho(),od(),Ca(),Ru(),ku(),Zs(),$o()},xo=function(){Fs(),Ka()},ac=function(r,a){var p=null;p=typeof r=="string"?document.getElementById(r)||document.querySelector(r):r;let b;if(!document.contains(p)&&document!==((b=p)==null?void 0:b.ownerDocument))throw Error("Error: container is not in current document");r=new Ho(a||{}),a=document.createElement("div"),a.className="injectionDiv",a.tabIndex=0,cr(a,Gs.LABEL,t.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),p.appendChild(a),p=Ou(a,r);const R=Ih(a,p,r);return th(R),k(R),H(R),a.addEventListener("focusin",function(){k(R)}),R},Ou=function(r,a){r.setAttribute("dir","LTR"),pt(a.hasCss,a.pathToMedia),r=te(Pe.SVG,{xmlns:Sg,"xmlns:html":Dc,"xmlns:xlink":xs,version:"1.1",class:"blocklySvg",tabindex:"0"},r);const p=te(Pe.DEFS,{},r),b=String(Math.random()).substring(2);return a.gridPattern=MS.createDom(b,a.gridOptions,p),r},Ih=function(r,a,p){p.parentWorkspace=null,p=new df(p);const b=p.options;p.scale=b.zoomOptions.startScale,a.appendChild(p.createDom("blocklyMainBackground",r));var R=p.getRenderer().getClassName();return R&&ke(r,R),(R=p.getTheme().getClassName())&&ke(r,R),!b.hasCategories&&b.languageTree&&(r=p.addFlyout(Pe.SVG),Ge(r,a)),b.hasTrashcan&&p.addTrashcan(),b.zoomOptions&&b.zoomOptions.controls&&p.addZoomControls(),p.getThemeManager().subscribe(a,"workspaceBackgroundColour","background-color"),p.translate(0,0),p.addChangeListener(la(p)),H(p),No(),yl(),xh(),p},th=function(r){const a=r.options;var p=r.getParentSvg();if(Ee(p.parentNode,"contextmenu",null,function(b){nt(b)||b.preventDefault()}),p=Ee(window,"resize",null,function(){Sl(),r.hideComponents(!0),ls(),_p(),H(r),Cn(r)}),r.setResizeHandlerWrapper(p),Ki(),a.languageTree){p=r.getToolbox();const b=r.getFlyout(!0);p?p.init():b&&(b.init(r),b.show(a.languageTree),typeof b.scrollToStart=="function"&&b.scrollToStart())}a.hasTrashcan&&r.trashcan.init(),a.zoomOptions&&a.zoomOptions.controls&&r.zoomControls_.init(),a.moveOptions&&a.moveOptions.scrollbars?(r.scrollbar=new QS(r,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.horizontal,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),r.scrollbar.resize()):r.setMetrics({x:.5,y:.5}),a.hasSounds&&Es(a.pathToMedia,r)},xr=function(r){const a=A();a&&!(nt(r)||a.rendered&&!a.isVisible())&&Bi.registry.onKeyDown(a,r)},Ki=function(){ch||(Ee(document,"scroll",null,function(){const r=S();for(let a=0,p;p=r[a];a++)p instanceof df&&p.updateInverseScreenCTM()}),Ee(document,"keydown",null,xr),Fe(document,"touchend",null,qe),Fe(document,"touchcancel",null,qe),On&&Ee(window,"orientationchange",document,function(){H(A())})),ch=!0},Es=function(r,a){function p(){for(;R.length;){const W=R.pop();W&&rt(W)}b.preload()}const b=a.getAudioManager();b.load([r+"click.mp3",r+"click.wav",r+"click.ogg"],"click"),b.load([r+"disconnect.wav",r+"disconnect.mp3",r+"disconnect.ogg"],"disconnect"),b.load([r+"delete.mp3",r+"delete.ogg",r+"delete.wav"],"delete");const R=[];R.push(Ee(document,"pointermove",null,p,!0)),R.push(Ee(document,"touchstart",null,p,!0))},ua=function(r){return r.getType!==void 0&&r.initView!==void 0&&r.dispose!==void 0&&r.getWeight!==void 0&&r.getSize!==void 0&&r.applyColour!==void 0&&r.hideForInsertionMarker!==void 0&&r.updateEditable!==void 0&&r.updateCollapsed!==void 0&&r.isShownWhenCollapsed!==void 0&&r.setOffsetInBlock!==void 0&&r.onLocationChange!==void 0&&r.onClick!==void 0},Us=function(r){return r.paste!==void 0},Vn=function(r){return r.isSelectable()},kc=function(r){A().hideChaff(r)},an=an||{},an.scope={},an.ASSUME_ES5=!1,an.ASSUME_NO_NATIVE_MAP=!1,an.ASSUME_NO_NATIVE_SET=!1,an.SIMPLE_FROUND_POLYFILL=!1,an.ISOLATE_POLYFILLS=!1,an.FORCE_POLYFILL_PROMISE=!1,an.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,an.defineProperty=an.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(r,a,p){return r==Array.prototype||r==Object.prototype||(r[a]=p.value),r},an.getGlobal=function(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wu=="object"&&Wu];for(var a=0;a<r.length;++a){var p=r[a];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")},an.global=an.getGlobal(this),an.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",an.TRUST_ES6_POLYFILLS=!an.ISOLATE_POLYFILLS||an.IS_SYMBOL_NATIVE,an.polyfills={},an.propertyToPolyfillSymbol={},an.POLYFILL_PREFIX="$jscp$",an.polyfill=function(r,a,p,b){a&&(an.ISOLATE_POLYFILLS?an.polyfillIsolated(r,a,p,b):an.polyfillUnisolated(r,a,p,b))},an.polyfillUnisolated=function(r,a,p,b){for(p=an.global,r=r.split("."),b=0;b<r.length-1;b++){var R=r[b];if(!(R in p))return;p=p[R]}r=r[r.length-1],b=p[r],a=a(b),a!=b&&a!=null&&an.defineProperty(p,r,{configurable:!0,writable:!0,value:a})},an.polyfillIsolated=function(r,a,p,b){var R=r.split(".");r=R.length===1,b=R[0],b=!r&&b in an.polyfills?an.polyfills:an.global;for(var W=0;W<R.length-1;W++){var pe=R[W];if(!(pe in b))return;b=b[pe]}R=R[R.length-1],p=an.IS_SYMBOL_NATIVE&&p==="es6"?b[R]:null,a=a(p),a!=null&&(r?an.defineProperty(an.polyfills,R,{configurable:!0,writable:!0,value:a}):a!==p&&(an.propertyToPolyfillSymbol[R]===void 0&&(p=1e9*Math.random()>>>0,an.propertyToPolyfillSymbol[R]=an.IS_SYMBOL_NATIVE?an.global.Symbol(R):an.POLYFILL_PREFIX+p+"$"+R),an.defineProperty(b,an.propertyToPolyfillSymbol[R],{configurable:!0,writable:!0,value:a})))},an.polyfill("globalThis",function(r){return r||an.global},"es_2020","es3"),an.arrayIteratorImpl=function(r){var a=0;return function(){return a<r.length?{done:!1,value:r[a++]}:{done:!0}}},an.arrayIterator=function(r){return{next:an.arrayIteratorImpl(r)}},an.initSymbol=function(){},an.iteratorPrototype=function(r){return r={next:r},r[Symbol.iterator]=function(){return this},r},an.iteratorFromArray=function(r,a){r instanceof String&&(r+="");var p=0,b=!1,R={next:function(){if(!b&&p<r.length){var W=p++;return{value:a(W,r[W]),done:!1}}return b=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R},an.polyfill("Array.prototype.values",function(r){return r||function(){return an.iteratorFromArray(this,function(a,p){return p})}},"es8","es3"),an.polyfill("Array.prototype.flat",function(r){return r||function(a){a=a===void 0?1:a;var p=[];return Array.prototype.forEach.call(this,function(b){Array.isArray(b)&&0<a?(b=Array.prototype.flat.call(b,a-1),p.push.apply(p,b)):p.push(b)}),p}},"es9","es5"),an.owns=function(r,a){return Object.prototype.hasOwnProperty.call(r,a)},an.polyfill("Object.entries",function(r){return r||function(a){var p=[],b;for(b in a)an.owns(a,b)&&p.push([b,a[b]]);return p}},"es8","es3"),an.polyfill("Object.values",function(r){return r||function(a){var p=[],b;for(b in a)an.owns(a,b)&&p.push(a[b]);return p}},"es8","es3");var ai=Object.create(null),ns={typeMap:ai},Ml=Object.create(null),Ja="default",Bt=class{constructor(r){this.name=r}toString(){return this.name}};Bt.CONNECTION_CHECKER=new Bt("connectionChecker"),Bt.CONNECTION_PREVIEWER=new Bt("connectionPreviewer"),Bt.CURSOR=new Bt("cursor"),Bt.EVENT=new Bt("event"),Bt.FIELD=new Bt("field"),Bt.INPUT=new Bt("input"),Bt.RENDERER=new Bt("renderer"),Bt.TOOLBOX=new Bt("toolbox"),Bt.THEME=new Bt("theme"),Bt.TOOLBOX_ITEM=new Bt("toolboxItem"),Bt.FLYOUTS_VERTICAL_TOOLBOX=new Bt("flyoutsVerticalToolbox"),Bt.FLYOUTS_HORIZONTAL_TOOLBOX=new Bt("flyoutsHorizontalToolbox"),Bt.METRICS_MANAGER=new Bt("metricsManager"),Bt.BLOCK_DRAGGER=new Bt("blockDragger"),Bt.SERIALIZER=new Bt("serializer"),Bt.ICON=new Bt("icon"),Bt.PASTER=new Bt("paster");var Ma={DEFAULT:Ja,TEST_ONLY:ns};Ma.Type=Bt,Ma.getAllItems=m,Ma.getClass=h,Ma.getClassFromOptions=_,Ma.getObject=d,Ma.hasItem=u,Ma.register=i,Ma.unregister=o;var Dr=Object.create(null),Oc=Object.create(null),ad,nh=null,rs,$s=[],Rh={defineBlocksWithJsonArrayInternal:ee},eo={TEST_ONLY:Rh};eo.createBlockDefinitionsFromJsonArray=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,eo.defineBlocks=t.defineBlocks$$module$build$src$core$common,eo.defineBlocksWithJsonArray=K,eo.draggingConnections=$s,eo.getAllWorkspaces=S,eo.getBlockTypeCounts=U,eo.getMainWorkspace=A,eo.getParentContainer=L,eo.getSelected=O,eo.getWorkspaceById=v,eo.registerWorkspace=x,eo.setMainWorkspace=k,eo.setParentContainer=z,eo.setSelected=D,eo.svgResize=H,eo.unregisterWorkpace=w;var Jl="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",rh={genUid:()=>{const r=Jl.length,a=[];for(let p=0;20>p;p++)a[p]=Jl.charAt(Math.random()*r);return a.join("")}},ih=0,lc={TEST_ONLY:rh};lc.genUid=ie,lc.getNextUniqueId=re;var wo,to,Lu,sh,Qa,Du,oh,ah,po,zs,Nu,Al,no,qa,Aa,Ql,is,Co,kh,ld,Za,ql,ud,Lc,Jp,E;wo="",to=!0,Lu=0,t.CREATE$$module$build$src$core$events$utils="create",t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils="delete",t.DELETE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils="change",t.CHANGE$$module$build$src$core$events$utils,sh="block_field_intermediate_change",t.MOVE$$module$build$src$core$events$utils="move",t.MOVE$$module$build$src$core$events$utils,Qa="var_create",Du="var_delete",oh="var_rename",ah="ui",po="drag",zs="selected",Nu="click",Al="marker_move",no="bubble_open",qa="trashcan_open",Aa="toolbox_item_select",Ql="theme_change",is="viewport_change",Co="comment_create",kh="comment_delete",ld="comment_change",Za="comment_move",ql="finished_loading",ud=[t.CREATE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,Co,Za],Lc=[],Jp={FIRE_QUEUE:Lc,fireNow:Ae,fireInternal:me,setGroupInternal:ae},E={BLOCK_CHANGE:t.CHANGE$$module$build$src$core$events$utils,BLOCK_CREATE:t.CREATE$$module$build$src$core$events$utils,BLOCK_DELETE:t.DELETE$$module$build$src$core$events$utils,BLOCK_DRAG:po,BLOCK_FIELD_INTERMEDIATE_CHANGE:sh,BLOCK_MOVE:t.MOVE$$module$build$src$core$events$utils,BUBBLE_OPEN:no,BUMP_EVENTS:ud,CHANGE:t.CHANGE$$module$build$src$core$events$utils,CLICK:Nu,COMMENT_CHANGE:ld,COMMENT_CREATE:Co,COMMENT_DELETE:kh,COMMENT_MOVE:Za,CREATE:t.CREATE$$module$build$src$core$events$utils,DELETE:t.DELETE$$module$build$src$core$events$utils,FINISHED_LOADING:ql,MARKER_MOVE:Al,MOVE:t.MOVE$$module$build$src$core$events$utils,SELECTED:zs,TEST_ONLY:Jp,THEME_CHANGE:Ql,TOOLBOX_ITEM_SELECT:Aa,TRASHCAN_OPEN:qa,UI:ah,VAR_CREATE:Qa,VAR_DELETE:Du,VAR_RENAME:oh,VIEWPORT_CHANGE:is},E.clearPendingUndo=Z,E.disable=t.disable$$module$build$src$core$events$utils,E.disableOrphans=Xe,E.enable=t.enable$$module$build$src$core$events$utils,E.filter=j,E.fire=ce,E.fromJson=Le,E.get=we,E.getDescendantIds=_e,E.getGroup=t.getGroup$$module$build$src$core$events$utils,E.getRecordUndo=oe,E.isEnabled=ne,E.setGroup=t.setGroup$$module$build$src$core$events$utils,E.setRecordUndo=de;var c=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=oe()}toJson(){return{type:this.type,group:this.group}}static fromJson(r,a,p){return p.isBlank=!1,p.group=r.group||"",p.workspaceId=a.id,p}isNull(){return!1}run(r){}getEventWorkspace_(){let r;if(this.workspaceId&&(r=v(this.workspaceId)),!r)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return r}},f=class extends c{constructor(r){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof r>"u",this.workspaceId=r||""}},$=class extends f{constructor(r,a,p){a=r?r.workspace.id:a,a===null&&(a=void 0),super(a),this.type=Nu,this.blockId=r?r.id:void 0,this.targetType=p}toJson(){const r=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return r.targetType=this.targetType,r.blockId=this.blockId,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new $),a.targetType=r.targetType,a.blockId=r.blockId,a}},M;(function(r){r.BLOCK="block",r.WORKSPACE="workspace",r.ZOOM_CONTROLS="zoom_controls"})(M||(M={})),i(Bt.EVENT,Nu,$);var N=750,G="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),se=null,xe={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},je=0,vt={TOUCH_ENABLED:G,TOUCH_MAP:xe};vt.checkTouchIdentifier=Oe,vt.clearTouchIdentifier=Je,vt.getTouchIdentifierFromEvent=it,vt.longStart=Re,vt.longStop=qe,vt.shouldHandleEvent=ht;var Gt,en,dn,ln,rn,Tr,_t,Se,Me,Ke;(function(r){function a(b){return p.indexOf(b.toUpperCase())!==-1}Gt=r;const p=Gt.toUpperCase();en=a("JavaFX"),dn=a("WebKit"),ln=a("Gecko")&&!dn,rn=a("Android"),r=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Tr=a("iPad")||a("Macintosh")&&0<r,_t=a("iPhone")&&!Tr,Se=a("Macintosh"),Me=Tr||rn&&!a("Mobile")||a("Silk"),Ke=!Me&&(_t||rn)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Lt=Gt,Jt=en,un=ln,mn=rn,On=Tr,Xn=_t,mr=Se,Zl=Ke,Cm={ANDROID:mn,GECKO:un,IPAD:On,IPHONE:Xn,JavaFx:Jt,MAC:mr,MOBILE:Zl,raw:Lt},Qp=40,Jn=125,cd={};cd.bind=Fe,cd.conditionalBind=Ee,cd.getScrollDeltaPixels=mt,cd.isRightButton=dt,cd.isTargetInput=nt,cd.mouseToSvg=It,cd.unbind=rt;var d0={};d0.removeElem=wt;var Bu=class{constructor(r){this.name_=r}toString(){return this.name_}};Bu.POSITIONABLE=new Bu("positionable"),Bu.DRAG_TARGET=new Bu("drag_target"),Bu.DELETE_AREA=new Bu("delete_area"),Bu.AUTOHIDEABLE=new Bu("autohideable");var Ia=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(r,a){const p=r.component.id;if(!a&&this.componentData.has(p)){var b;throw Error('Plugin "'+p+'" with capabilities "'+((b=this.componentData.get(p))==null?void 0:b.capabilities)+'" already added.')}for(this.componentData.set(p,r),a=[],b=0;b<r.capabilities.length;b++){const R=String(r.capabilities[b]).toLowerCase();if(a.push(R),this.capabilityToComponentIds.has(R)){let W;(W=this.capabilityToComponentIds.get(R))==null||W.push(p)}else this.capabilityToComponentIds.set(R,[p])}this.componentData.get(p).capabilities=a}removeComponent(r){const a=this.componentData.get(r);if(a){for(let p=0;p<a.capabilities.length;p++){const b=String(a.capabilities[p]).toLowerCase();wt(this.capabilityToComponentIds.get(b),r)}this.componentData.delete(r)}}addCapability(r,a){if(!this.getComponent(r))throw Error('Cannot add capability, "'+a+'". Plugin "'+r+'" has not been added to the ComponentManager');if(this.hasCapability(r,a))console.warn('Plugin "'+r+'already has capability "'+a+'"');else{a=`${a}`.toLowerCase();var p;(p=this.componentData.get(r))==null||p.capabilities.push(a);var b;(b=this.capabilityToComponentIds.get(a))==null||b.push(r)}}removeCapability(r,a){if(!this.getComponent(r))throw Error('Cannot remove capability, "'+a+'". Plugin "'+r+'" has not been added to the ComponentManager');this.hasCapability(r,a)?(a=`${a}`.toLowerCase(),wt(this.componentData.get(r).capabilities,a),wt(this.capabilityToComponentIds.get(a),r)):console.warn('Plugin "'+r+`doesn't have capability "`+a+'" to remove')}hasCapability(r,a){return a=`${a}`.toLowerCase(),this.componentData.has(r)&&this.componentData.get(r).capabilities.indexOf(a)!==-1}getComponent(r){let a;return(a=this.componentData.get(r))==null?void 0:a.component}getComponents(r,a){if(r=`${r}`.toLowerCase(),r=this.capabilityToComponentIds.get(r),!r)return[];const p=[];if(a){const b=[];r.forEach(R=>{b.push(this.componentData.get(R))}),b.sort(function(R,W){return R.weight-W.weight}),b.forEach(function(R){p.push(R.component)})}else r.forEach(b=>{p.push(this.componentData.get(b).component)});return p}};Ia.Capability=Bu;var Hf=!1,hd=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,eu={};eu.inject=pt,eu.register=$t;var nn=class{constructor(r,a){this.x=r,this.y=a}clone(){return new nn(this.x,this.y)}scale(r){return this.x*=r,this.y*=r,this}translate(r,a){return this.x+=r,this.y+=a,this}static equals(r,a){return r===a?!0:r&&a?r.x===a.x&&r.y===a.y:!1}static distance(r,a){const p=r.x-a.x;return r=r.y-a.y,Math.sqrt(p*p+r*r)}static magnitude(r){return Math.sqrt(r.x*r.x+r.y*r.y)}static difference(r,a){return new nn(r.x-a.x,r.y-a.y)}static sum(r,a){return new nn(r.x+a.x,r.y+a.y)}},c_=new Set,h_={};h_.warn=Te;var Sg="http://www.w3.org/2000/svg",Dc="http://www.w3.org/1999/xhtml",xs="http://www.w3.org/1999/xlink",qp;(function(r){r[r.ELEMENT_NODE=1]="ELEMENT_NODE",r[r.TEXT_NODE=3]="TEXT_NODE",r[r.COMMENT_NODE=8]="COMMENT_NODE"})(qp||(qp={}));var Hd=null,lh=0,Li=null,Ra={HTML_NS:Dc};Ra.NodeType=qp,Ra.SVG_NS=Sg,Ra.XLINK_NS=xs,Ra.addClass=ke,Ra.containsNode=Ce,Ra.createSvgElement=te,Ra.getFastTextWidth=We,Ra.getFastTextWidthWithSizeString=Ft,Ra.getTextWidth=$e,Ra.hasClass=xt,Ra.insertAfter=Ge,Ra.measureFontMetrics=Be,Ra.removeClass=ft,Ra.removeClasses=ot,Ra.removeNode=at,Ra.setCssTransform=X,Ra.startTextWidthCache=Q,Ra.stopTextWidthCache=le;var Pe=class{constructor(r){this.tagName=r}toString(){return this.tagName}};Pe.ANIMATE=new Pe("animate"),Pe.CIRCLE=new Pe("circle"),Pe.CLIPPATH=new Pe("clipPath"),Pe.DEFS=new Pe("defs"),Pe.FECOMPOSITE=new Pe("feComposite"),Pe.FECOMPONENTTRANSFER=new Pe("feComponentTransfer"),Pe.FEFLOOD=new Pe("feFlood"),Pe.FEFUNCA=new Pe("feFuncA"),Pe.FEGAUSSIANBLUR=new Pe("feGaussianBlur"),Pe.FEPOINTLIGHT=new Pe("fePointLight"),Pe.FESPECULARLIGHTING=new Pe("feSpecularLighting"),Pe.FILTER=new Pe("filter"),Pe.FOREIGNOBJECT=new Pe("foreignObject"),Pe.G=new Pe("g"),Pe.IMAGE=new Pe("image"),Pe.LINE=new Pe("line"),Pe.PATH=new Pe("path"),Pe.PATTERN=new Pe("pattern"),Pe.POLYGON=new Pe("polygon"),Pe.RECT=new Pe("rect"),Pe.SVG=new Pe("svg"),Pe.TEXT=new Pe("text"),Pe.TSPAN=new Pe("tspan");var bi=class{constructor(r,a,p,b){this.top=r,this.bottom=a,this.left=p,this.right=b}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(r,a){return r>=this.left&&r<=this.right&&a>=this.top&&a<=this.bottom}intersects(r){return!(this.left>r.right||this.right<r.left||this.top>r.bottom||this.bottom<r.top)}},ws=class{constructor(r,a){this.width=r,this.height=a}static equals(r,a){return r===a?!0:r&&a?r.width===a.width&&r.height===a.height:!1}},Bv={getSizeInternal:ut},dd={TEST_ONLY:Bv};dd.getBorderBox=Er,dd.getComputedStyle=zt,dd.getContainerOffsetToScrollInto=or,dd.getPageOffset=En,dd.getSize=Ut,dd.getViewportPageOffset=Pr,dd.scrollIntoContainerView=Kr;var Mm=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Eg=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Pv={XY_REGEX:Mm,XY_STYLE_REGEX:Eg},Gf={TEST_ONLY:Pv};Gf.getDocumentScroll=Ne,Gf.getInjectionDivXY=q,Gf.getRelativeXY=Wn,Gf.getViewportBBox=ge,Gf.screenToWsCoordinates=tt,Gf.wsToScreenCoordinates=kt;var zo=class{constructor(r,a,p,b,R){this.workspace=r,this.horizontal=a,this.oldHostMetrics=null,this.ratio=1,this.origin=new nn(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new nn(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=p||!1,this.margin=R!==void 0?R:zo.DEFAULT_SCROLLBAR_MARGIN,r="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),b&&(r+=" "+b),this.outerSvg=te(Pe.SVG,{class:r}),b=te(Pe.G,{},this.outerSvg),this.svgBackground=te(Pe.RECT,{class:"blocklyScrollbarBackground"},b),r=Math.floor((zo.scrollbarThickness-5)/2),this.svgHandle=te(Pe.RECT,{class:"blocklyScrollbarHandle",rx:r,ry:r},b),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),Ge(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),a?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Ee(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Ee(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const r=zo.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(r)),this.outerSvg.setAttribute("height",String(r)),this.svgHandle.setAttribute("height",String(r-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(r)),this.outerSvg.setAttribute("width",String(r)),this.svgHandle.setAttribute("width",String(r-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),rt(this.onMouseDownBarWrapper_),rt(this.onMouseDownHandleWrapper_),at(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(r){return r=0>=r||isNaN(r)?0:Math.min(r,this.scrollbarLength)}setHandleLength(r){this.handleLength=r,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(r){return r=0>=r||isNaN(r)?0:Math.min(r,this.scrollbarLength-this.handleLength)}setHandlePosition(r){this.handlePosition=r,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(r){this.scrollbarLength=r,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(r,a){this.position.x=r,this.position.y=a,X(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(r){!r&&(r=this.workspace.getMetrics(),!r)||this.oldHostMetrics&&zo.metricsAreEquivalent(r,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(r):this.resizeVertical(r),this.oldHostMetrics=r,this.updateMetrics())}requiresViewResize(r){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==r.viewWidth||this.oldHostMetrics.viewHeight!==r.viewHeight||this.oldHostMetrics.absoluteLeft!==r.absoluteLeft||this.oldHostMetrics.absoluteTop!==r.absoluteTop:!0}resizeHorizontal(r){this.requiresViewResize(r)?this.resizeViewHorizontal(r):this.resizeContentHorizontal(r)}resizeViewHorizontal(r){var a=r.viewWidth-2*this.margin;this.pair&&(a-=zo.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),a=r.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(a+=zo.scrollbarThickness),this.setPosition(a,r.absoluteTop+r.viewHeight-zo.scrollbarThickness-this.margin),this.resizeContentHorizontal(r)}resizeContentHorizontal(r){if(r.viewWidth>=r.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*r.viewWidth/r.scrollWidth;a=this.constrainHandleLength(a),this.setHandleLength(a),a=r.scrollWidth-r.viewWidth;var p=this.scrollbarLength-this.handleLength;r=(r.viewLeft-r.scrollLeft)/a*p,r=this.constrainHandlePosition(r),this.setHandlePosition(r),this.ratio=p/a}}resizeVertical(r){this.requiresViewResize(r)?this.resizeViewVertical(r):this.resizeContentVertical(r)}resizeViewVertical(r){let a=r.viewHeight-2*this.margin;this.pair&&(a-=zo.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),this.setPosition(this.workspace.RTL?r.absoluteLeft+this.margin:r.absoluteLeft+r.viewWidth-zo.scrollbarThickness-this.margin,r.absoluteTop+this.margin),this.resizeContentVertical(r)}resizeContentVertical(r){if(r.viewHeight>=r.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*r.viewHeight/r.scrollHeight;a=this.constrainHandleLength(a),this.setHandleLength(a),a=r.scrollHeight-r.viewHeight;var p=this.scrollbarLength-this.handleLength;r=(r.viewTop-r.scrollTop)/a*p,r=this.constrainHandlePosition(r),this.setHandlePosition(r),this.ratio=p/a}}isVisible(){return this.isHandleVisible}setContainerVisible(r){const a=r!==this.containerVisible;this.containerVisible=r,a&&this.updateDisplay_()}setVisible(r){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(r)}setVisibleInternal(r){const a=r!==this.isVisible();this.isHandleVisible=r,a&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(r){if(this.workspace.markFocused(),Je(),this.cleanUp(),dt(r))r.stopPropagation();else{var a=It(r,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());a=this.horizontal?a.x:a.y;var p=q(this.svgHandle);p=this.horizontal?p.x:p.y;var b=this.handlePosition,R=.95*this.handleLength;a<=p?b-=R:a>=p+this.handleLength&&(b+=R),this.setHandlePosition(this.constrainHandlePosition(b)),this.updateMetrics(),r.stopPropagation(),r.preventDefault()}}onMouseDownHandle(r){this.workspace.markFocused(),this.cleanUp(),dt(r)?r.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?r.clientX:r.clientY,this.onMouseUpWrapper_=Ee(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Ee(document,"pointermove",this,this.onMouseMoveHandle),r.stopPropagation(),r.preventDefault())}onMouseMoveHandle(r){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?r.clientX:r.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){Je(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(rt(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(rt(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let r=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(r)&&(r=0),r}updateMetrics(){const r=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:r}):this.workspace.setMetrics({y:r})}set(r,a){this.setHandlePosition(this.constrainHandlePosition(r*this.ratio)),(a||a===void 0)&&this.updateMetrics()}setOrigin(r,a){this.origin=new nn(r,a)}static metricsAreEquivalent(r,a){return r.viewWidth===a.viewWidth&&r.viewHeight===a.viewHeight&&r.viewLeft===a.viewLeft&&r.viewTop===a.viewTop&&r.absoluteTop===a.absoluteTop&&r.absoluteLeft===a.absoluteLeft&&r.scrollWidth===a.scrollWidth&&r.scrollHeight===a.scrollHeight&&r.scrollLeft===a.scrollLeft&&r.scrollTop===a.scrollTop}};zo.scrollbarThickness=G?25:15,zo.DEFAULT_SCROLLBAR_MARGIN=.5;var p0={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},$g={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Am,DOMParser:ka,XMLSerializer:Pu}=globalThis;ka&&(p0=new ka),Pu&&($g=new Pu);var bp="https://developers.google.com/blockly/xml",xg=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Zp={NAME_SPACE:bp};Zp.createElement=t.createElement$$module$build$src$core$utils$xml,Zp.createTextNode=t.createTextNode$$module$build$src$core$utils$xml,Zp.domToText=_n,Zp.injectDependencies=qt,Zp.textToDom=t.textToDom$$module$build$src$core$utils$xml;var uh="categoryToolbox",d_="flyoutToolbox",Qn;(function(r){r[r.TOP=0]="TOP",r[r.BOTTOM=1]="BOTTOM",r[r.LEFT=2]="LEFT",r[r.RIGHT=3]="RIGHT"})(Qn||(Qn={}));var Fv={hasCategoriesInternal:yn},tu={};tu.Position=Qn,tu.TEST_ONLY=Fv,tu.convertFlyoutDefToJsonArray=gt,tu.convertToolboxDefToJson=lt,tu.hasCategories=Nt,tu.isCategoryCollapsible=Pn,tu.parseToolboxTree=$r;var uc;(function(r){r[r.TOP=0]="TOP",r[r.BOTTOM=1]="BOTTOM"})(uc||(uc={}));var Im;(function(r){r[r.LEFT=0]="LEFT",r[r.RIGHT=1]="RIGHT"})(Im||(Im={}));var Tp;(function(r){r[r.UP=0]="UP",r[r.DOWN=1]="DOWN"})(Tp||(Tp={}));var Rm={};Rm.bumpDirection=Tp,Rm.bumpPositionRect=Yo,Rm.getCornerOppositeToolbox=ji,Rm.getStartPositionRect=Ir,Rm.horizontalPosition=Im,Rm.verticalPosition=uc;var nu={width:96,height:124,url:"sprites.png"},p_=class{constructor(r){this.workspace=r,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=te(Pe.G,{});const r=String(Math.random()).substring(2);return this.createZoomOutSvg(r),this.createZoomInSvg(r),this.workspace.isMovable()&&this.createZoomResetSvg(r),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[Ia.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&at(this.svgGroup);for(const r of this.boundEvents)rt(r);this.boundEvents.length=0}getBoundingRectangle(){let r=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(r+=this.LARGE_SPACING+this.HEIGHT),new bi(this.top,this.top+r,this.left,this.left+this.WIDTH)}position(r,a){if(this.initialized){var p=ji(this.workspace,r),b=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(b+=this.LARGE_SPACING+this.HEIGHT),r=Ir(p,new ws(this.WIDTH,b),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,r,this.workspace),p=p.vertical,a=Yo(r,this.MARGIN_VERTICAL,p===uc.TOP?Tp.DOWN:Tp.UP,a),p===uc.TOP){var R=this.SMALL_SPACING+this.HEIGHT,W;(W=this.zoomInGroup)==null||W.setAttribute("transform","translate(0, "+R+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(R+this.LARGE_SPACING+this.HEIGHT)+")")}else{W=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let De;(De=this.zoomInGroup)==null||De.setAttribute("transform","translate(0, "+W+")"),W=W+this.SMALL_SPACING+this.HEIGHT,(R=this.zoomOutGroup)==null||R.setAttribute("transform","translate(0, "+W+")")}this.top=a.top,this.left=a.left;var pe;(pe=this.svgGroup)==null||pe.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(r){this.zoomOutGroup=te(Pe.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const a=te(Pe.CLIPPATH,{id:"blocklyZoomoutClipPath"+r},this.zoomOutGroup);te(Pe.RECT,{width:32,height:32},a),te(Pe.IMAGE,{width:nu.width,height:nu.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+r+")"},this.zoomOutGroup).setAttributeNS(xs,"xlink:href",this.workspace.options.pathToMedia+nu.url),this.boundEvents.push(Ee(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(r){this.zoomInGroup=te(Pe.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const a=te(Pe.CLIPPATH,{id:"blocklyZoominClipPath"+r},this.zoomInGroup);te(Pe.RECT,{width:32,height:32},a),te(Pe.IMAGE,{width:nu.width,height:nu.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+r+")"},this.zoomInGroup).setAttributeNS(xs,"xlink:href",this.workspace.options.pathToMedia+nu.url),this.boundEvents.push(Ee(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(r,a){this.workspace.markFocused(),this.workspace.zoomCenter(r),this.fireZoomEvent(),Je(),a.stopPropagation(),a.preventDefault()}createZoomResetSvg(r){this.zoomResetGroup=te(Pe.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const a=te(Pe.CLIPPATH,{id:"blocklyZoomresetClipPath"+r},this.zoomResetGroup);te(Pe.RECT,{width:32,height:32},a),te(Pe.IMAGE,{width:nu.width,height:nu.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+r+")"},this.zoomResetGroup).setAttributeNS(xs,"xlink:href",this.workspace.options.pathToMedia+nu.url),this.boundEvents.push(Ee(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(r){this.workspace.markFocused();const a=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(a),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),Je(),r.stopPropagation(),r.preventDefault()}fireZoomEvent(){const r=new(we(Nu))(null,this.workspace.id,"zoom_controls");ce(r)}};$t(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var fo=class{constructor(r){this.name=r}toString(){return this.name}equals(r){return this.name===r.toString()}};fo.MUTATOR=new fo("mutator"),fo.WARNING=new fo("warning"),fo.COMMENT=new fo("comment"),function(r){r[r.VALUE=1]="VALUE",r[r.STATEMENT=3]="STATEMENT",r[r.DUMMY=5]="DUMMY",r[r.CUSTOM=6]="CUSTOM",r[r.END_ROW=7]="END_ROW"}(t.inputTypes$$module$build$src$core$inputs$input_types||(t.inputTypes$$module$build$src$core$inputs$input_types={})),t.inputTypes$$module$build$src$core$inputs$input_types;var Ai=function(r,a){window.alert(r),a&&a()},Il=function(r,a){a(window.confirm(r))},Oa=function(r,a,p){p(window.prompt(r,a))},ru={confirmInternal:dr},Rl={TEST_ONLY:ru};Rl.alert=Oo,Rl.confirm=Kt,Rl.prompt=Ko,Rl.setAlert=cl,Rl.setConfirm=ga,Rl.setPrompt=ms;var Wf,el;t.Msg$$module$build$src$core$msg=Object.create(null),Wf=function(r){Object.keys(r).forEach(function(a){t.Msg$$module$build$src$core$msg[a]=r[a]})},el={Msg:t.Msg$$module$build$src$core$msg,setLocale:Wf};var Sp=class extends c{constructor(r){super(),this.isBlank=typeof r>"u",r&&(this.varId=r.getId(),this.workspaceId=r.workspace.id)}toJson(){const r=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return r.varId=this.varId,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new Sp),a.varId=r.varId,a}},Ep=class extends Sp{constructor(r){super(r),this.type=Qa,r&&(this.varType=r.type,this.varName=r.name)}toJson(){const r=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return r.varType=this.varType,r.varName=this.varName,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new Ep),a.varType=r.varType,a.varName=r.varName,a}run(r){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");r?a.createVariable(this.varName,this.varType,this.varId):a.deleteVariableById(this.varId)}};i(Bt.EVENT,Qa,Ep);var ef=class{constructor(r,a,p,b){this.workspace=r,this.name=a,this.type=p||"",this.id_=b||ie()}getId(){return this.id_}static compareByName(r,a){return r.name.localeCompare(a.name,void 0,{sensitivity:"base"})}},f0="VARIABLE",km="ijkmnopqrstuvwxyzabcdefgh",Nc={generateUniqueNameInternal:nr},tl={CATEGORY_NAME:f0,TEST_ONLY:Nc,VAR_LETTER_OPTIONS:km};tl.allDeveloperVariables=t.allDeveloperVariables$$module$build$src$core$variables,tl.allUsedVarModels=t.allUsedVarModels$$module$build$src$core$variables,tl.createVariableButtonHandler=Zi,tl.flyoutCategory=fn,tl.flyoutCategoryBlocks=ur,tl.generateUniqueName=wr,tl.generateUniqueNameFromOptions=pi,tl.generateVariableFieldDom=Os,tl.getAddedVariables=hu,tl.getOrCreateVariablePackage=t.getOrCreateVariablePackage$$module$build$src$core$variables,tl.getVariable=t.getVariable$$module$build$src$core$variables,tl.nameUsedWithAnyType=Ua,tl.nameUsedWithConflictingParam=hl,tl.promptName=Xr,tl.renameVariable=t.renameVariable$$module$build$src$core$variables;var Bc=class{constructor(r,a,p,b,R){this.workspace=r,this.editable=this.movable=this.deletable=!0,this.disposed_=!1,this.isComment=!0,this.id=R&&!r.getCommentById(R)?R:ie(),r.addTopComment(this),this.xy_=new nn(0,0),this.height_=p,this.width_=b,this.RTL=r.RTL,this.content_=a,Bc.fireCreateEvent(this)}dispose(){this.disposed_||(ne()&&ce(new(we(kh))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(r){this.height_=r}getWidth(){return this.width_}setWidth(r){this.width_=r}getRelativeToSurfaceXY(){return new nn(this.xy_.x,this.xy_.y)}moveBy(r,a){const p=new(we(Za))(this);this.xy_.translate(r,a),p.recordNew(),ce(p)}isDeletable(){return this.deletable&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(r){this.deletable=r}isMovable(){return this.movable&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(r){this.movable=r}isEditable(){return this.editable&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(r){this.editable=r}getContent(){return this.content_}setContent(r){this.content_!==r&&(ce(new(we(ld))(this,this.content_,r)),this.content_=r)}toXmlWithXY(r){return r=this.toXml(r),r.setAttribute("x",String(Math.round(this.xy_.x))),r.setAttribute("y",String(Math.round(this.xy_.y))),r.setAttribute("h",String(this.height_)),r.setAttribute("w",String(this.width_)),r}toXml(r){const a=t.createElement$$module$build$src$core$utils$xml("comment");return r||(a.id=this.id),a.textContent=this.getContent(),a}static fireCreateEvent(r){if(ne()){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);try{ce(new(we(Co))(r))}finally{t.setGroup$$module$build$src$core$events$utils(a)}}}static fromXml(r,a){var p=Bc.parseAttributes(r);return a=new Bc(a,p.content,p.h,p.w,p.id),p=r.getAttribute("x"),r=r.getAttribute("y"),p=p?parseInt(p,10):NaN,r=r?parseInt(r,10):NaN,isNaN(p)||isNaN(r)||a.moveBy(p,r),Bc.fireCreateEvent(a),a}static parseAttributes(r){const a=r.getAttribute("h"),p=r.getAttribute("w"),b=r.getAttribute("x"),R=r.getAttribute("y"),W=r.getAttribute("id");if(!W)throw Error("No ID present in XML comment definition.");let pe;return{id:W,h:a?parseInt(a):100,w:p?parseInt(p):100,x:b?parseInt(b):NaN,y:R?parseInt(R):NaN,content:(pe=r.textContent)!=null?pe:""}}},Gd=class extends f{constructor(r,a,p){super(p),this.type=zs,this.oldElementId=r??void 0,this.newElementId=a??void 0}toJson(){const r=super.toJson();return r.oldElementId=this.oldElementId,r.newElementId=this.newElementId,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new Gd),a.oldElementId=r.oldElementId,a.newElementId=r.newElementId,a}};i(Bt.EVENT,zs,Gd);var wg={};wg.register=Ul,wg.unregister=_h;var Cg=class{paste(r,a,p){const b=r.commentState;if(p)b.setAttribute("x",`${p.x}`),b.setAttribute("y",`${p.y}`);else{var R;p=parseInt((R=b.getAttribute("x"))!=null?R:"0")+50;let W;R=parseInt((W=b.getAttribute("y"))!=null?W:"0")+50,b.setAttribute("x",`${p}`),b.setAttribute("y",`${R}`)}return nl.fromXmlRendered(r.commentState,a)}};Cg.TYPE="workspace-comment",Ul(Cg.TYPE,new Cg);var Hs=8,Om=3,kl=2,nl=class extends Bc{constructor(r,a,p,b,R){super(r,a,p,b,R),this.onMouseMoveWrapper=this.onMouseUpWrapper=null,this.eventsInit=!1,this.deleteIconBorder=this.deleteGroup=this.resizeGroup=this.foreignObject=this.svgHandleTarget=this.svgRectTarget=this.textarea=null,this.rendered=this.autoLayout=this.focused=!1,this.svgGroup=te(Pe.G,{class:"blocklyComment"}),this.workspace=r,this.svgRect_=te(Pe.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:Om,ry:Om}),this.svgGroup.appendChild(this.svgRect_),this.render()}dispose(){this.disposed_||(O()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),ne()&&ce(new(we(kh))(this)),at(this.svgGroup),t.disable$$module$build$src$core$events$utils(),super.dispose(),t.enable$$module$build$src$core$events$utils())}initSvg(r){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit||(Ee(this.svgRectTarget,"pointerdown",this,this.pathMouseDown),Ee(this.svgHandleTarget,"pointerdown",this,this.pathMouseDown)),this.eventsInit=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!r&&this.textarea&&this.textarea.select()}pathMouseDown(r){const a=this.workspace.getGesture(r);a&&a.handleBubbleStart(r,this)}showContextMenu(r){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(O()!==this){var r=null;if(O()){r=O().id,t.disable$$module$build$src$core$events$utils();try{O().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}r=new(we(zs))(r,this.id,this.workspace.id),ce(r),D(this),this.addSelect()}}unselect(){if(O()===this){var r=new(we(zs))(this.id,null,this.workspace.id);ce(r),D(null),this.removeSelect(),this.blurFocus()}}addSelect(){ke(this.svgGroup,"blocklySelected"),this.setFocus()}removeSelect(){ke(this.svgGroup,"blocklySelected"),this.blurFocus()}addFocus(){ke(this.svgGroup,"blocklyFocused")}removeFocus(){ft(this.svgGroup,"blocklyFocused")}getRelativeToSurfaceXY(){const r=this.workspace.getLayerManager();if(!r)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,p=0,b=this.getSvgRoot();if(b)do{const R=Wn(b);a+=R.x,p+=R.y,b=b.parentNode}while(b&&!r.hasLayer(b)&&b!==null);return this.xy_=new nn(a,p)}moveBy(r,a){const p=new(we(Za))(this),b=this.getRelativeToSurfaceXY();this.translate(b.x+r,b.y+a),this.xy_=new nn(b.x+r,b.y+a),p.recordNew(),ce(p),this.workspace.resizeContents()}translate(r,a){this.xy_=new nn(r,a),this.getSvgRoot().setAttribute("transform","translate("+r+","+a+")")}moveDuringDrag(r){r=`translate(${r.x}, ${r.y})`,this.getSvgRoot().setAttribute("transform",r)}moveTo(r,a){this.translate(r,a)}clearTransformAttributes(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var r=this.getRelativeToSurfaceXY();const a=this.getHeightWidth(),p=r.y,b=r.y+a.height;let R;return this.RTL?(R=r.x-a.width,r=r.x):(R=r.x,r=r.x+a.width),new bi(p,b,R,r)}updateMovable(){this.isMovable()?ke(this.svgGroup,"blocklyDraggable"):ft(this.svgGroup,"blocklyDraggable")}setMovable(r){super.setMovable(r),this.updateMovable()}setEditable(r){super.setEditable(r),this.textarea&&(this.textarea.readOnly=!r)}setDragging(r){r?ke(this.getSvgRoot(),"blocklyDragging"):ft(this.getSvgRoot(),"blocklyDragging")}getSvgRoot(){return this.svgGroup}getContent(){return this.textarea?this.textarea.value:this.content_}setContent(r){super.setContent(r),this.textarea&&(this.textarea.value=r)}setDeleteStyle(r){r?ke(this.svgGroup,"blocklyDraggingDelete"):ft(this.svgGroup,"blocklyDraggingDelete")}setAutoLayout(r){}toXmlWithXY(r){let a=0;this.workspace.RTL&&(a=this.workspace.getWidth()),r=this.toXml(r);const p=this.getRelativeToSurfaceXY();return r.setAttribute("x",String(Math.round(this.workspace.RTL?a-p.x:p.x))),r.setAttribute("y",String(Math.round(p.y))),r.setAttribute("h",String(this.getHeight())),r.setAttribute("w",String(this.getWidth())),r}toCopyData(){return{paster:Cg.TYPE,commentState:this.toXmlWithXY()}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered){var r=this.getHeightWidth(),a=this.createEditor();this.svgGroup.appendChild(a),this.svgHandleTarget=te(Pe.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup.appendChild(this.svgHandleTarget),this.svgRectTarget=te(Pe.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:Om,ry:Om}),this.svgGroup.appendChild(this.svgRectTarget),this.addResizeDom(),this.isDeletable()&&this.addDeleteDom(),this.setSize(r.width,r.height),this.textarea.value=this.content_,this.rendered=!0,this.resizeGroup&&Ee(this.resizeGroup,"pointerdown",this,this.resizeMouseDown),this.isDeletable()&&(Ee(this.deleteGroup,"pointerdown",this,this.deleteMouseDown),Ee(this.deleteGroup,"pointerout",this,this.deleteMouseOut),Ee(this.deleteGroup,"pointerup",this,this.deleteMouseUp))}}createEditor(){this.foreignObject=te(Pe.FOREIGNOBJECT,{x:0,y:nl.TOP_OFFSET,class:"blocklyCommentForeignObject"});const r=document.createElementNS(Dc,"body");r.setAttribute("xmlns",Dc),r.className="blocklyMinimalBody";const a=document.createElementNS(Dc,"textarea");return a.className="blocklyCommentTextarea",a.setAttribute("dir",this.RTL?"RTL":"LTR"),a.readOnly=!this.isEditable(),r.appendChild(a),this.textarea=a,this.foreignObject.appendChild(r),Ee(a,"wheel",this,function(p){p.stopPropagation()}),Ee(a,"change",this,function(p){this.setContent(a.value)}),this.foreignObject}addResizeDom(){this.resizeGroup=te(Pe.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup),te(Pe.POLYGON,{points:`0,${Hs} ${Hs},${Hs} ${Hs},0`},this.resizeGroup),te(Pe.LINE,{class:"blocklyResizeLine",x1:Hs/3,y1:Hs-1,x2:Hs-1,y2:Hs/3},this.resizeGroup),te(Pe.LINE,{class:"blocklyResizeLine",x1:2*Hs/3,y1:Hs-1,x2:Hs-1,y2:2*Hs/3},this.resizeGroup)}addDeleteDom(){this.deleteGroup=te(Pe.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup),this.deleteIconBorder=te(Pe.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup),te(Pe.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup),te(Pe.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup)}resizeMouseDown(r){this.unbindDragEvents(),dt(r)||(this.workspace.startDrag(r,new nn(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper=Ee(document,"pointerup",this,this.resizeMouseUp),this.onMouseMoveWrapper=Ee(document,"pointermove",this,this.resizeMouseMove),this.workspace.hideChaff()),r.stopPropagation()}deleteMouseDown(r){this.deleteIconBorder&&ke(this.deleteIconBorder,"blocklyDeleteIconHighlighted"),r.stopPropagation()}deleteMouseOut(r){this.deleteIconBorder&&ft(this.deleteIconBorder,"blocklyDeleteIconHighlighted")}deleteMouseUp(r){this.dispose(),r.stopPropagation()}unbindDragEvents(){this.onMouseUpWrapper&&(rt(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onMouseMoveWrapper&&(rt(this.onMouseMoveWrapper),this.onMouseMoveWrapper=null)}resizeMouseUp(r){Je(),this.unbindDragEvents()}resizeMouseMove(r){this.autoLayout=!1,r=this.workspace.moveDrag(r),this.setSize(this.RTL?-r.x:r.x,r.y)}resizeComment(){const r=this.getHeightWidth(),a=nl.TOP_OFFSET,p=2*kl;let b;(b=this.foreignObject)==null||b.setAttribute("width",String(r.width));let R;if((R=this.foreignObject)==null||R.setAttribute("height",String(r.height-a)),this.RTL){let W;(W=this.foreignObject)==null||W.setAttribute("x",String(-r.width))}this.textarea&&(this.textarea.style.width=r.width-p+"px",this.textarea.style.height=r.height-p-a+"px")}setSize(r,a){r=Math.max(r,45),a=Math.max(a,20+nl.TOP_OFFSET),this.width_=r,this.height_=a,this.svgRect_.setAttribute("width",`${r}`),this.svgRect_.setAttribute("height",`${a}`);let p;(p=this.svgRectTarget)==null||p.setAttribute("width",`${r}`);let b;(b=this.svgRectTarget)==null||b.setAttribute("height",`${a}`);let R;(R=this.svgHandleTarget)==null||R.setAttribute("width",`${r}`);let W;if((W=this.svgHandleTarget)==null||W.setAttribute("height",String(nl.TOP_OFFSET)),this.RTL){this.svgRect_.setAttribute("transform","scale(-1 1)");let pe;(pe=this.svgRectTarget)==null||pe.setAttribute("transform","scale(-1 1)")}if(this.resizeGroup)if(this.RTL){this.resizeGroup.setAttribute("transform","translate("+(-r+Hs)+","+(a-Hs)+") scale(-1 1)");let pe;(pe=this.deleteGroup)==null||pe.setAttribute("transform","translate("+(-r+Hs)+","+-Hs+") scale(-1 1)")}else{this.resizeGroup.setAttribute("transform","translate("+(r-Hs)+","+(a-Hs)+")");let pe;(pe=this.deleteGroup)==null||pe.setAttribute("transform","translate("+(r-Hs)+","+-Hs+")")}this.resizeComment()}setFocus(){this.focused=!0,setTimeout(()=>{this.disposed_||(this.textarea.focus(),this.addFocus(),this.svgRectTarget&&ke(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&ke(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused=!1,setTimeout(()=>{this.disposed_||(this.textarea.blur(),this.removeFocus(),this.svgRectTarget&&ft(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&ft(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(r,a,p){t.disable$$module$build$src$core$events$utils();let b;try{const R=Bc.parseAttributes(r);if(b=new nl(a,R.content,R.h,R.w,R.id),a.rendered&&(b.initSvg(!0),b.render()),!isNaN(R.x)&&!isNaN(R.y))if(a.RTL){const W=p||a.getWidth();b.moveBy(W-R.x,R.y)}else b.moveBy(R.x,R.y)}finally{t.enable$$module$build$src$core$events$utils()}return Bc.fireCreateEvent(b),b}};nl.DEFAULT_SIZE=100,nl.TOP_OFFSET=10,$t(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`);var Vf=new Set,m0=new WeakSet,$p=null,Mg=null,cc=0,Wd={};Wd.finishQueuedRenders=rr,Wd.queueRender=Jo,Wd.triggerQueuedRenders=Ui;var Mo={};Mo.appendDomToWorkspace=kd,Mo.blockToDom=_a,Mo.blockToDomWithXY=Zn,Mo.clearWorkspaceAndLoadFromXml=gl,Mo.deleteNext=qo,Mo.domToBlock=t.domToBlock$$module$build$src$core$xml,Mo.domToBlockInternal=Ls,Mo.domToPrettyText=zi,Mo.domToText=$i,Mo.domToVariables=pu,Mo.domToWorkspace=t.domToWorkspace$$module$build$src$core$xml,Mo.variablesToDom=qn,Mo.workspaceToDom=fl;var La=class extends Error{},Uv=class extends La{constructor(r){super("Expected to find a 'type' property, defining the block type"),this.state=r}},Lm=class extends La{constructor(r,a,p){super(`The block ${a.toDevString()} is missing a(n) ${r}
connection`),this.block=a,this.state=p}},f_=class extends La{constructor(r,a,p,b){super(`The block ${p.toDevString()} could not connect its
${a} to its parent, because: ${r}`),this.childBlock=p,this.childState=b}},Rb=class extends La{constructor(r){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=r}},tf=class extends La{constructor(r,a,p){super(`Cannot add an icon of type '${r}' to the block ${a.toDevString()}, because there is no icon registered with type '${r}'. Make sure that all of your icons have been registered.`),this.block=a,this.state=p}},jf={};jf.BadConnectionCheck=f_,jf.DeserializationError=La,jf.MissingBlockType=Uv,jf.MissingConnection=Lm,jf.RealChildOfShadow=Rb,jf.UnregisteredIcon=tf;var m_=100,Xf=75,g_=50,Dm={BLOCKS:g_,PROCEDURES:Xf,VARIABLES:m_},__={};__.register=_s,__.unregister=Ri;var zv=class{constructor(){this.priority=g_}save(r){const a=[];for(const p of r.getTopBlocks(!1))(r=ri(p,{addCoordinates:!0,doFullSerialization:!1}))&&a.push(r);return a.length?{languageVersion:0,blocks:a}:null}load(r,a){r=r.blocks;for(const p of r)zn(p,a,{recordUndo:oe()})}clear(r){for(const a of r.getTopBlocks(!1))a.dispose(!1)}};_s("blocks",new zv);var Nm={};Nm.BlockSerializer=zv,Nm.append=zn,Nm.appendInternal=Qr,Nm.save=ri;var xp=class extends c{constructor(r){super(),this.isBlank=!r,r&&(this.blockId=r.id,this.workspaceId=r.workspace.id)}toJson(){const r=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return r.blockId=this.blockId,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new xp),a.blockId=r.blockId,a}},Hv=class extends xp{constructor(r){super(r),this.type=t.CREATE$$module$build$src$core$events$utils,r&&(r.isShadow()&&(this.recordUndo=!1),this.xml=Zn(r),this.ids=_e(r),this.json=ri(r,{addCoordinates:!0}))}toJson(){const r=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return r.xml=$i(this.xml),r.ids=this.ids,r.json=this.json,this.recordUndo||(r.recordUndo=this.recordUndo),r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new Hv),a.xml=t.textToDom$$module$build$src$core$utils$xml(r.xml),a.ids=r.ids,a.json=r.json,r.recordUndo!==void 0&&(a.recordUndo=r.recordUndo),a}run(r){const a=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!wS(a,this.ids))if(r)zn(this.json,a);else for(r=0;r<this.ids.length;r++){const p=this.ids[r],b=a.getBlockById(p);b?b.dispose(!1):p===this.blockId&&console.warn("Can't uncreate non-existent block: "+p)}}},wS=function(r,a){return a.map(p=>r.getBlockById(p)).filter(p=>p&&p.isShadow()).length===a.length};i(Bt.EVENT,t.CREATE$$module$build$src$core$events$utils,Hv);var v_=class extends f{constructor(r,a){super(a),this.type=Ql,this.themeName=r}toJson(){const r=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return r.themeName=this.themeName,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new v_),a.themeName=r.themeName,a}};i(Bt.EVENT,Ql,v_);var y_=class extends f{constructor(r,a,p,b,R){super(b),this.type=is,this.viewTop=r,this.viewLeft=a,this.scale=p,this.oldScale=R}toJson(){const r=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return r.viewTop=this.viewTop,r.viewLeft=this.viewLeft,r.scale=this.scale,r.oldScale=this.oldScale,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new y_),a.viewTop=r.viewTop,a.viewLeft=r.viewLeft,a.scale=r.scale,a.oldScale=r.oldScale,a}};i(Bt.EVENT,is,y_);var nf;nf=28,t.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:nf,connectingSnapRadius:nf,currentConnectionPreference:8,bumpDelay:250},t.config$$module$build$src$core$config;var $n;(function(r){r[r.INPUT_VALUE=1]="INPUT_VALUE",r[r.OUTPUT_VALUE=2]="OUTPUT_VALUE",r[r.NEXT_STATEMENT=3]="NEXT_STATEMENT",r[r.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})($n||($n={}));var Oh=class{constructor(r){this.connectionChecker=r,this.connections=[]}addConnection(r,a){a=this.calculateIndexForYPos(a),this.connections.splice(a,0,r)}findIndexOfConnection(r,a){if(!this.connections.length)return-1;const p=this.calculateIndexForYPos(a);if(p>=this.connections.length)return-1;a=r.y;let b=p;for(;0<=b&&this.connections[b].y===a;){if(this.connections[b]===r)return b;b--}for(b=p;b<this.connections.length&&this.connections[b].y===a;){if(this.connections[b]===r)return b;b++}return-1}calculateIndexForYPos(r){if(!this.connections.length)return 0;let a=0,p=this.connections.length;for(;a<p;){const b=Math.floor((a+p)/2);if(this.connections[b].y<r)a=b+1;else if(this.connections[b].y>r)p=b;else{a=b;break}}return a}removeConnection(r,a){if(r=this.findIndexOfConnection(r,a),r===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(r,1)}getNeighbours(r,a){function p(xn){const Go=R-b[xn].x,Ro=W-b[xn].y;return Math.sqrt(Go*Go+Ro*Ro)<=a&&Pt.push(b[xn]),Ro<a}const b=this.connections,R=r.x,W=r.y;r=0;let pe=b.length-2,De=pe;for(;r<De;)b[De].y<W?r=De:pe=De,De=Math.floor((r+pe)/2);const Pt=[];if(pe=r=De,b.length){for(;0<=r&&p(r);)r--;do pe++;while(pe<b.length&&p(pe))}return Pt}isInYRange(r,a,p){return Math.abs(this.connections[r].y-a)<=p}searchForClosest(r,a,p){if(!this.connections.length)return{connection:null,radius:a};const b=r.y,R=r.x;r.x=R+p.x,r.y=b+p.y;var W=this.calculateIndexForYPos(r.y);p=null;let pe=a,De,Pt=W-1;for(;0<=Pt&&this.isInYRange(Pt,r.y,a);)De=this.connections[Pt],this.connectionChecker.canConnect(r,De,!0,pe)&&(p=De,pe=De.distanceFrom(r)),Pt--;for(;W<this.connections.length&&this.isInYRange(W,r.y,a);)De=this.connections[W],this.connectionChecker.canConnect(r,De,!0,pe)&&(p=De,pe=De.distanceFrom(r)),W++;return r.x=R,r.y=b,{connection:p,radius:pe}}static init(r){const a=[];return a[$n.INPUT_VALUE]=new Oh(r),a[$n.OUTPUT_VALUE]=new Oh(r),a[$n.NEXT_STATEMENT]=new Oh(r),a[$n.PREVIOUS_STATEMENT]=new Oh(r),a}},Bm=class{paste(r,a,p){if(!a.isCapacityAvailable(r.typeCounts))return null;p&&(r.blockState.x=p.x,r.blockState.y=p.y),t.disable$$module$build$src$core$events$utils();let b;try{b=zn(r.blockState,a),mp(b)}finally{t.enable$$module$build$src$core$events$utils()}return b&&(ne()&&!b.isShadow()&&ce(new(we(t.CREATE$$module$build$src$core$events$utils))(b)),b.select(),b)}};Bm.TYPE="block",Ul(Bm.TYPE,new Bm);var Ao=null,Gv=null,b_={duplicateInternal:ya,copyInternal:Ku},Pm={};Pm.BlockPaster=Bm,Pm.TEST_ONLY=b_,Pm.copy=gp,Pm.duplicate=bh,Pm.paste=ao,Pm.registry=wg;var CS="aria-",kb="role",Pc;(function(r){r.GRID="grid",r.GRIDCELL="gridcell",r.GROUP="group",r.LISTBOX="listbox",r.MENU="menu",r.MENUITEM="menuitem",r.MENUITEMCHECKBOX="menuitemcheckbox",r.OPTION="option",r.PRESENTATION="presentation",r.ROW="row",r.TREE="tree",r.TREEITEM="treeitem"})(Pc||(Pc={}));var Gs;(function(r){r.ACTIVEDESCENDANT="activedescendant",r.COLCOUNT="colcount",r.DISABLED="disabled",r.EXPANDED="expanded",r.INVALID="invalid",r.LABEL="label",r.LABELLEDBY="labelledby",r.LEVEL="level",r.ORIENTATION="orientation",r.POSINSET="posinset",r.ROWCOUNT="rowcount",r.SELECTED="selected",r.SETSIZE="setsize",r.VALUEMAX="valuemax",r.VALUEMIN="valuemin"})(Gs||(Gs={}));var Fu={};Fu.Role=Pc,Fu.State=Gs,Fu.setRole=Vr,Fu.setState=cr;var g0=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(r){this.menuItems.push(r)}render(r){const a=document.createElement("div");a.className="blocklyMenu goog-menu blocklyNonSelectable",a.tabIndex=0,this.roleName&&Vr(a,this.roleName),this.element=a;for(let p=0,b;b=this.menuItems[p];p++)a.appendChild(b.createDom());return this.mouseOverHandler=Ee(a,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=Ee(a,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=Ee(a,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=Ee(a,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=Ee(a,"keydown",this,this.handleKeyEvent),r.appendChild(a),a}getElement(){return this.element}focus(){const r=this.getElement();r&&(r.focus({preventScroll:!0}),ke(r,"blocklyFocused"))}blur(){const r=this.getElement();r&&(r.blur(),ft(r,"blocklyFocused"))}setRole(r){this.roleName=r}dispose(){this.mouseOverHandler&&(rt(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(rt(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(rt(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(rt(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(rt(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let r=0,a;a=this.menuItems[r];r++)a.dispose();this.element=null}getMenuItem(r){const a=this.getElement();for(;r&&r!==a;){if(r.classList.contains("blocklyMenuItem")){for(let p=0,b;b=this.menuItems[p];p++)if(b.getElement()===r)return b}r=r.parentElement}return null}setHighlighted(r){var a=this.highlightedItem;a&&(a.setHighlighted(!1),this.highlightedItem=null),r&&(r.setHighlighted(!0),this.highlightedItem=r,a=this.getElement(),Kr(r.getElement(),a),cr(a,Gs.ACTIVEDESCENDANT,r.getId()))}highlightNext(){const r=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(r,1)}highlightPrevious(){const r=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>r?this.menuItems.length:r,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(r,a){r+=a;let p;for(;p=this.menuItems[r];){if(p.isEnabled()){this.setHighlighted(p);break}r+=a}}handleMouseOver(r){(r=this.getMenuItem(r.target))&&(r.isEnabled()?this.highlightedItem!==r&&this.setHighlighted(r):this.setHighlighted(null))}handleClick(r){const a=this.openingCoords;if(this.openingCoords=null,a&&typeof r.clientX=="number"){const p=new nn(r.clientX,r.clientY);if(1>nn.distance(a,p))return}(r=this.getMenuItem(r.target))&&r.performAction()}handleMouseEnter(r){this.focus()}handleMouseLeave(r){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(r){if(this.menuItems.length&&!(r.shiftKey||r.ctrlKey||r.metaKey||r.altKey)){var a=this.highlightedItem;switch(r.key){case"Enter":case" ":a&&a.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}r.preventDefault(),r.stopPropagation()}}getSize(){const r=this.getElement(),a=Ut(r);return a.height=r.scrollHeight,a}},Ag=class{constructor(r,a){this.content=r,this.opt_value=a,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const r=document.createElement("div");r.id=re(),this.element=r,r.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const a=document.createElement("div");if(a.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var p=document.createElement("div");p.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",a.appendChild(p)}return p=this.content,typeof this.content=="string"&&(p=document.createTextNode(this.content)),a.appendChild(p),r.appendChild(a),this.roleName&&Vr(r,this.roleName),cr(r,Gs.SELECTED,this.checkable&&this.checked||!1),cr(r,Gs.DISABLED,!this.enabled),r}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let r;return(r=this.opt_value)!=null?r:null}setRightToLeft(r){this.rightToLeft=r}setRole(r){this.roleName=r}setCheckable(r){this.checkable=r}setChecked(r){this.checked=r}setHighlighted(r){this.highlight=r;const a=this.getElement();a&&this.isEnabled()&&(r?(ke(a,"blocklyMenuItemHighlight"),ke(a,"goog-menuitem-highlight")):(ft(a,"blocklyMenuItemHighlight"),ft(a,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(r){this.enabled=r}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(r,a){this.actionHandler=r.bind(a)}},Lh=null,Fm=null,rf="blocklyWidgetDiv",sf="",Yf="",pd,wp={};wp.createDom=No,wp.getDiv=Xs,wp.hide=vl,wp.hideIfOwner=wi,wp.isVisible=Jh,wp.positionWithAnchor=hr,wp.repositionForWindowResize=_p,wp.show=Tu,wp.testOnly_setDiv=Zo;var Ig=null,Ob={},_0=null,Vd={};Vd.callbackFactory=t.callbackFactory$$module$build$src$core$contextmenu,Vd.commentDeleteOption=Qu,Vd.commentDuplicateOption=Sh,Vd.dispose=ta,Vd.getCurrentBlock=vp,Vd.hide=Vl,Vd.setCurrentBlock=Qh,Vd.show=Su,Vd.workspaceCommentOption=Sc;var ei=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(r){if(this.registry_.has(r.id))throw Error('Menu item with ID "'+r.id+'" is already registered.');this.registry_.set(r.id,r)}unregister(r){if(!this.registry_.has(r))throw Error('Menu item with ID "'+r+'" not found.');this.registry_.delete(r)}getItem(r){let a;return(a=this.registry_.get(r))!=null?a:null}getContextMenuOptions(r,a){const p=[];for(const R of this.registry_.values())if(r===R.scopeType){var b=R.preconditionFn(a);b!=="hidden"&&(b={text:typeof R.displayText=="function"?R.displayText(a):R.displayText,enabled:b==="enabled",callback:R.callback,scope:a,weight:R.weight},p.push(b))}return p.sort(function(R,W){return R.weight-W.weight}),p}};(function(r){var a=r.ScopeType||(r.ScopeType={});a.BLOCK="block",a.WORKSPACE="workspace",r.registry=new r})(ei||(ei={})),ei.ScopeType;var Um={};Um.clamp=qr,Um.toDegrees=ys,Um.toRadians=Ec;var Rg=16,v0=1,Lb=12,y0=16,zm=.25,kg=null,of=null,af="",Hm="",li,lf,Gm,Wm=null,Kf=null,b0=null,g={getBoundsInfo:function(){const r=En(Wm),a=Ut(Wm);return{left:r.x,right:r.x+a.width,top:r.y,bottom:r.y+a.height,width:a.width,height:a.height}},getPositionMetrics:function(r,a,p,b){const R=g.getBoundsInfo(),W=Ut(li);return a+W.height<R.bottom?er(r,a,R,W):b-W.height>R.top?sr(p,b,R,W):a+W.height<document.documentElement.clientHeight?er(r,a,R,W):b-W.height>document.documentElement.clientTop?sr(p,b,R,W):In(r,R,W)}},y={ANIMATION_TIME:zm,ARROW_HORIZONTAL_PADDING:Lb,ARROW_SIZE:Rg,BORDER_SIZE:v0,PADDING_Y:y0,TEST_ONLY:g};y.clearContent=Xc,y.createDom=yl,y.getContentDiv=jl,y.getOwner=bl,y.getPositionX=Rr,y.hide=To,y.hideIfOwner=bs,y.hideWithoutAnimation=ba,y.isVisible=Ns,y.repositionForWindowResize=ls,y.setBoundsElement=na,y.setColour=Od,y.show=Nn,y.showPositionedByBlock=_i,y.showPositionedByField=Ye;var I=null,B=null,V={};V.connectionUiEffect=Bo,V.disconnectUiEffect=Bs,V.disconnectUiStop=ra,V.disposeUiEffect=$c;var J=50,fe=100,Ue=class{constructor(r,a){this.bubble=r,this.workspace=a,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY()}startBubbleDrag(){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout&&this.bubble.setAutoLayout(!1);let r;(r=this.workspace.getLayerManager())==null||r.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(r,a){a=this.pixelsToWorkspaceUnits_(a),a=nn.sum(this.startXY_,a),this.bubble.moveDuringDrag(a),a=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(r),r=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),r!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==a&&(a&&a.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(r){return r&&this.workspace.getComponentManager().hasCapability(r.id,Ia.Capability.DELETE_AREA)?r.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(r,a){if(this.dragBubble(r,a),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?r=this.startXY_:(r=this.pixelsToWorkspaceUnits_(a),r=nn.sum(this.startXY_,r)),this.bubble.moveTo(r.x,r.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_)this.fireMoveEvent_(),this.bubble.dispose();else{if(this.bubble.setDragging){this.bubble.setDragging(!1);let p;(p=this.workspace.getLayerManager())==null||p.moveOffDragLayer(this.bubble,fe)}this.fireMoveEvent_()}this.workspace.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}fireMoveEvent_(){if(this.bubble instanceof nl){const r=new(we(Za))(this.bubble);r.setOldCoordinate(this.startXY_),r.recordNew(),ce(r)}}pixelsToWorkspaceUnits_(r){return r=new nn(r.x/this.workspace.scale,r.y/this.workspace.scale),this.workspace.isMutator&&r.scale(1/this.workspace.options.parentWorkspace.scale),r}},Ze=30,Ct=!0,Xt=[];Xt[$n.INPUT_VALUE]=$n.OUTPUT_VALUE,Xt[$n.OUTPUT_VALUE]=$n.INPUT_VALUE,Xt[$n.NEXT_STATEMENT]=$n.PREVIOUS_STATEMENT,Xt[$n.PREVIOUS_STATEMENT]=$n.NEXT_STATEMENT;var tn="RENAME_VARIABLE_ID",Qt="DELETE_VARIABLE_ID",bn={};bn.commonWordPrefix=$h,bn.commonWordSuffix=Eu,bn.isNumber=t.isNumber$$module$build$src$core$utils$string,bn.shortestStringLength=Yc,bn.startsWith=Eh,bn.wrap=t.wrap$$module$build$src$core$utils$string;var Rn=void 0,Dn=!1,ro=!1,yt=50,st=0,bt=0,on=0,Gn=0,Bn=null,Yn=null,gr=0,rl=10,Di=10,uf=750,T_=5,iu=null,jd={HOVER_MS:uf,LIMIT:yt,MARGINS:T_,OFFSET_X:gr,OFFSET_Y:rl,RADIUS_OK:Di};jd.bindMouseEvents=si,jd.block=Nd,jd.createDom=xh,jd.dispose=Dd,jd.getCustomTooltip=Kc,jd.getDiv=Ga,jd.getTooltipOfObject=Ta,jd.hide=Sl,jd.isVisible=Ld,jd.setCustomTooltip=xc,jd.unbindMouseEvents=td,jd.unblock=Ch;var Zx=class{constructor(r){this.workspace=r,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new nn(r.scrollX,r.scrollY)}dispose(){this.workspace=null}startDrag(){O()&&O().unselect()}endDrag(r){this.drag(r)}drag(r){if(r=nn.sum(this.startScrollXY_,r),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(r.x,r.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(r.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,r.y);else throw new TypeError("Invalid state.")}},WR=5,VR=6,Vm=class{constructor(r,a){this.creatorWorkspace=a,this.mouseDownXY=new nn(0,0),this.startWorkspace_=this.targetBlock=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.flyout=this.workspaceDragger=this.blockDragger=this.bubbleDragger=null,this.isMultiTouch_=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=r,this.currentDragDeltaXY=new nn(0,0),this.healStack=!Ct}dispose(){Je(),Ch(),this.creatorWorkspace.clearGesture();for(const r of this.boundEvents)rt(r);this.boundEvents.length=0,this.blockDragger&&this.blockDragger.dispose(),this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(r){const a=new nn(r.clientX,r.clientY);this.updateDragDelta(a)&&(this.updateIsDragging(),qe()),this.mostRecentEvent=r}updateDragDelta(r){return this.currentDragDeltaXY=nn.difference(r,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=nn.magnitude(this.currentDragDeltaXY)>(this.flyout?t.config$$module$build$src$core$config.flyoutDragRadius:t.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let r;if(!this.targetBlock||(r=this.flyout)==null||!r.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),this.targetBlock.select(),!0):!1}updateIsDraggingBubble(){return this.startBubble?(this.startDraggingBubble(),!0):!1}updateIsDraggingBlock(){if(!this.targetBlock)return!1;if(this.flyout){if(this.updateIsDraggingFromFlyout())return this.startDraggingBlock(),!0}else if(this.targetBlock.isMovable())return this.startDraggingBlock(),!0;return!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger=new Zx(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(){if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.updateIsDraggingBubble()||this.updateIsDraggingBlock()||this.updateIsDraggingWorkspace()}startDraggingBlock(){this.blockDragger=new(_(Bt.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock,this.startWorkspace_),this.blockDragger.startDrag(this.currentDragDeltaXY,this.healStack),this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY)}startDraggingBubble(){if(!this.startBubble)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger=new Ue(this.startBubble,this.startWorkspace_),this.bubbleDragger.startBubbleDrag(),this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY)}doStart(r){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,nt(r)?this.cancel():(this.gestureHasStarted=!0,ra(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=bl(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=r,Nd(),this.targetBlock&&this.targetBlock.select(),dt(r)?this.handleRightClick(r):(r.type.toLowerCase()==="pointerdown"&&r.pointerType!=="mouse"&&Re(r,this),this.mouseDownXY=new nn(r.clientX,r.clientY),this.healStack=r.altKey||r.ctrlKey||r.metaKey,this.bindMouseEvents(r),this.isEnding_||this.handleTouchStart(r)))}bindMouseEvents(r){this.boundEvents.push(Ee(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(Ee(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(Ee(document,"pointerup",null,this.handleUp.bind(this),!0)),r.preventDefault(),r.stopPropagation()}handleStart(r){this.isDragging()||(this.handleTouchStart(r),this.isMultiTouch()&&qe())}handleMove(r){this.isDragging()&&ht(r)||!this.isMultiTouch()?(this.updateFromEvent(r),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.blockDragger?this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY):this.bubbleDragger&&this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY),r.preventDefault(),r.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(r),qe())}handleUp(r){if(this.isDragging()||this.handleTouchEnd(r),!this.isMultiTouch()||this.isDragging()){if(!ht(r))return;if(this.updateFromEvent(r),qe(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.bubbleDragger?this.bubbleDragger.endBubbleDrag(r,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(r,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()?this.doBubbleClick():this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(r)}r.preventDefault(),r.stopPropagation(),this.dispose()}handleTouchStart(r){var a=it(r);this.cachedPoints.set(a,this.getTouchPoint(r));var p=Array.from(this.cachedPoints.keys());p.length===2&&(a=this.cachedPoints.get(p[0]),p=this.cachedPoints.get(p[1]),this.startDistance=nn.distance(a,p),this.isMultiTouch_=!0,r.preventDefault())}handleTouchMove(r){const a=it(r);this.cachedPoints.set(a,this.getTouchPoint(r)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(r):this.handleMove(r)}handlePinch(r){var a=Array.from(this.cachedPoints.keys()),p=this.cachedPoints.get(a[0]);if(a=this.cachedPoints.get(a[1]),p=nn.distance(p,a)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(a=p-this.previousScale,a=0<a?a*WR:a*VR,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const b=this.startWorkspace_,R=It(r,b.getParentSvg(),b.getInverseScreenCTM());b.zoom(R.x,R.y,a)}this.previousScale=p,r.preventDefault()}handleTouchEnd(r){r=it(r),this.cachedPoints.has(r)&&this.cachedPoints.delete(r),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(r){return this.startWorkspace_?new nn(r.pageX,r.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(qe(),this.bubbleDragger?this.bubbleDragger.endBubbleDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(r){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(r)):this.startBubble?this.startBubble.showContextMenu(r):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(r)),r.preventDefault(),r.stopPropagation(),this.dispose()}handleWsStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(a),this.mostRecentEvent=r,this.doStart(r)}fireWorkspaceClick(r){ce(new(we(Nu))(null,r.id,"workspace"))}handleFlyoutStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(a),this.handleWsStart(r,a.getWorkspace())}handleBlockStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(a),this.mostRecentEvent=r}handleBubbleStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(a),this.mostRecentEvent=r}doBubbleClick(){this.startBubble instanceof nl&&(this.startBubble.setFocus(),this.startBubble.select())}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock.isEnabled()&&(t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.flyout.createBlock(this.targetBlock).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const r=new(we(Nu))(this.startBlock,this.startWorkspace_.id,"block");ce(r)}this.bringBlockToFront(),t.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(r){r=this.creatorWorkspace,O()&&O().unselect(),this.fireWorkspaceClick(this.startWorkspace_||r)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(r){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=r)}setStartIcon(r){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=r)}setStartBubble(r){this.startBubble||(this.startBubble=r)}setStartBlock(r){this.startBlock||this.startBubble||(this.startBlock=r,r.isInFlyout&&r!==r.getRootBlock()?this.setTargetBlock(r.getRootBlock()):this.setTargetBlock(r))}setTargetBlock(r){r.isShadow()?this.setTargetBlock(r.getParent()):this.targetBlock=r}setStartWorkspace(r){this.startWorkspace_||(this.startWorkspace_=r)}setStartFlyout(r){this.flyout||(this.flyout=r)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const r=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&r}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}isDragging(){return!!this.workspaceDragger||!!this.blockDragger||!!this.bubbleDragger}hasStarted(){return this.gestureHasStarted}getInsertionMarkers(){return this.blockDragger?this.blockDragger.getInsertionMarkers():[]}getCurrentDragger(){let r,a;return(a=(r=this.blockDragger)!=null?r:this.workspaceDragger)!=null?a:this.bubbleDragger}static inProgress(){const r=S();for(let a=0,p;p=r[a];a++)if(p.currentGesture_)return!0;return!1}},MS=class{constructor(r,a){this.pattern=r,this.scale=1;let p;this.spacing=(p=a.spacing)!=null?p:0;let b;this.length=(b=a.length)!=null?b:1,this.line2=(this.line1=r.firstChild)&&this.line1.nextSibling;let R;this.snapToGrid=(R=a.snap)!=null?R:!1}setSpacing(r){this.spacing=r,this.update(this.scale)}setLength(r){this.length=r,this.update(this.scale)}setSnapToGrid(r){this.snapToGrid=r}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(r){this.scale=r;var a=this.spacing*r;this.pattern.setAttribute("width",`${a}`),this.pattern.setAttribute("height",`${a}`),a=Math.floor(this.spacing/2)+.5;let p=a-this.length/2,b=a+this.length/2;a*=r,p*=r,b*=r,this.setLineAttributes(this.line1,r,p,b,a,a),this.setLineAttributes(this.line2,r,a,a,p,b)}setLineAttributes(r,a,p,b,R,W){r&&(r.setAttribute("stroke-width",`${a}`),r.setAttribute("x1",`${p}`),r.setAttribute("y1",`${R}`),r.setAttribute("x2",`${b}`),r.setAttribute("y2",`${W}`))}moveTo(r,a){this.pattern.setAttribute("x",`${r}`),this.pattern.setAttribute("y",`${a}`)}static createDom(r,a,p){r=te(Pe.PATTERN,{id:"blocklyGridPattern"+r,patternUnits:"userSpaceOnUse"},p);let b,R;if(0<((b=a.length)!=null?b:1)&&0<((R=a.spacing)!=null?R:0)){te(Pe.LINE,{stroke:a.colour},r);let W;(W=a.length)!=null&&W&&te(Pe.LINE,{stroke:a.colour},r)}else te(Pe.LINE,{},r);return r}},Dh=class{constructor(r){this.workspace=r,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(r,a){this.markers.has(r)&&this.unregisterMarker(r),a.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,a)),this.setMarkerSvg(a.getDrawer().createDom()),this.markers.set(r,a)}unregisterMarker(r){const a=this.markers.get(r);if(a)a.dispose(),this.markers.delete(r);else throw Error("Marker with ID "+r+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(r){return this.markers.get(r)||null}setCursor(r){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=r)&&(r=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(r),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(r){r?(this.workspace.getBlockCanvas().appendChild(r),this.cursorSvg_=r):this.cursorSvg_=null}setMarkerSvg(r){r?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(r,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(r)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const r=Object.keys(this.markers);for(let a=0,p;p=r[a];a++)this.unregisterMarker(p);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};Dh.LOCAL_MARKER="local_marker_1";var ew={};ew.deepMerge=El;var T0=class{constructor(r,a,p,b){this.name=r,this.startHats=!1,this.blockStyles=a||Object.create(null),this.categoryStyles=p||Object.create(null),this.componentStyles=b||Object.create(null),this.fontStyle=Object.create(null),i(Bt.THEME,r,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(r,a){this.blockStyles[r]=a}setCategoryStyle(r,a){this.categoryStyles[r]=a}getComponentStyle(r){if(r=this.componentStyles[r],!r)return null;if(typeof r=="string"){const a=this.getComponentStyle(r);if(a)return a}return`${r}`}setComponentStyle(r,a){this.componentStyles[r]=a}setFontStyle(r){this.fontStyle=r}setStartHats(r){this.startHats=r}static defineTheme(r,a){r=r.toLowerCase();const p=new T0(r);let b=a.base;if(b){if(typeof b=="string"){let R;b=(R=d(Bt.THEME,b))!=null?R:void 0}b instanceof T0&&(El(p,b),p.name=r)}return El(p.blockStyles,a.blockStyles),El(p.categoryStyles,a.categoryStyles),El(p.componentStyles,a.componentStyles),El(p.fontStyle,a.fontStyle),a.startHats!==null&&(p.startHats=a.startHats),p}},S0={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},zr={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},Db=new T0("classic",S0,zr),Ho=class{constructor(r){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let a=null,p=!1;var b=!1,R=!1,W=!1,pe=!1,De=!1;const Pt=!!r.readOnly;if(!Pt){var xn;a=lt((xn=r.toolbox)!=null?xn:null),p=Nt(a),b=r.trashcan,b=b===void 0?p:b,R=r.collapse,R=R===void 0?p:R,W=r.comments,W=W===void 0?p:W,pe=r.disable,pe=pe===void 0?p:pe,De=r.sounds,De=De===void 0?!0:De}xn=r.maxTrashcanContents,b?xn===void 0&&(xn=32):xn=0;const Go=!!r.rtl;let Ro=r.horizontalLayout;Ro===void 0&&(Ro=!1);var kp=r.toolboxPosition!=="end";kp=Ro?kp?Qn.TOP:Qn.BOTTOM:kp===Go?Qn.RIGHT:Qn.LEFT;let n1=r.css;n1===void 0&&(n1=!0);let r1="https://blockly-demo.appspot.com/static/media/";r.media?r1=r.media.endsWith("/")?r.media:r.media+"/":"path"in r&&(Te("path","Nov 2014","Jul 2023","media"),r1=r.path+"media/");const DF=r.oneBasedIndex,JX=r.renderer||"geras",QX=r.plugins||{};let ok=r.modalInputs;ok===void 0&&(ok=!0),this.RTL=Go,this.oneBasedIndex=DF===void 0?!0:DF,this.collapse=R,this.comments=W,this.disable=pe,this.readOnly=Pt,this.maxBlocks=r.maxBlocks||1/0;let NF;this.maxInstances=(NF=r.maxInstances)!=null?NF:null,this.modalInputs=ok,this.pathToMedia=r1,this.hasCategories=p,this.moveOptions=Ho.parseMoveOptions_(r,p),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=b,this.maxTrashcanContents=xn,this.hasSounds=De,this.hasCss=n1,this.horizontalLayout=Ro,this.languageTree=a,this.gridOptions=Ho.parseGridOptions_(r),this.zoomOptions=Ho.parseZoomOptions_(r),this.toolboxPosition=kp,this.theme=Ho.parseThemeOptions_(r),this.renderer=JX;let BF;this.rendererOverrides=(BF=r.rendererOverrides)!=null?BF:null;let PF;this.parentWorkspace=(PF=r.parentWorkspace)!=null?PF:null,this.plugins=QX}static parseMoveOptions_(r,a){const p=r.move||{},b={};return p.scrollbars===void 0&&r.scrollbars===void 0?b.scrollbars=a:typeof p.scrollbars=="object"?(b.scrollbars={horizontal:!!p.scrollbars.horizontal,vertical:!!p.scrollbars.vertical},b.scrollbars.horizontal&&b.scrollbars.vertical?b.scrollbars=!0:b.scrollbars.horizontal||b.scrollbars.vertical||(b.scrollbars=!1)):b.scrollbars=!!p.scrollbars||!!r.scrollbars,b.wheel=b.scrollbars&&p.wheel!==void 0?!!p.wheel:typeof b.scrollbars=="object",b.drag=b.scrollbars?p.drag===void 0?!0:!!p.drag:!1,b}static parseZoomOptions_(r){r=r.zoom||{};const a={};return a.controls=r.controls===void 0?!1:!!r.controls,a.wheel=r.wheel===void 0?!1:!!r.wheel,a.startScale=r.startScale===void 0?1:Number(r.startScale),a.maxScale=r.maxScale===void 0?3:Number(r.maxScale),a.minScale=r.minScale===void 0?.3:Number(r.minScale),a.scaleSpeed=r.scaleSpeed===void 0?1.2:Number(r.scaleSpeed),a.pinch=r.pinch===void 0?a.wheel||a.controls:!!r.pinch,a}static parseGridOptions_(r){r=r.grid||{};const a={};return a.spacing=Number(r.spacing)||0,a.colour=r.colour||"#888",a.length=r.length===void 0?1:Number(r.length),a.snap=0<a.spacing&&!!r.snap,a}static parseThemeOptions_(r){return r=r.theme||Db,typeof r=="string"?d(Bt.THEME,r):r instanceof T0?r:T0.defineTheme(r.name||"builtin"+re(),r)}},mo=class extends xp{constructor(r,a,p,b,R){super(r),this.type=t.CHANGE$$module$build$src$core$events$utils,r&&(this.element=a,this.name=p||void 0,this.oldValue=b,this.newValue=R)}toJson(){const r=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return r.element=this.element,r.name=this.name,r.oldValue=this.oldValue,r.newValue=this.newValue,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new mo),a.element=r.element,a.name=r.name,a.oldValue=r.oldValue,a.newValue=r.newValue,a}isNull(){return this.oldValue===this.newValue}run(r){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");var p=a.getIcon(fo.MUTATOR);switch(p&&$l(p)&&p.bubbleIsVisible()&&p.setBubbleVisible(!1),r=r?this.newValue:this.oldValue,this.element){case"field":(a=a.getField(this.name))?a.setValue(r):console.warn("Can't set non-existent field: "+this.name);break;case"comment":a.setCommentText(r||null);break;case"collapsed":a.setCollapsed(!!r);break;case"disabled":a.setEnabled(!r);break;case"inline":a.setInputsInline(!!r);break;case"mutation":p=mo.getExtraBlockState_(a),a.loadExtraState?a.loadExtraState(JSON.parse(r||"{}")):a.domToMutation&&a.domToMutation(t.textToDom$$module$build$src$core$utils$xml(r||"<mutation/>")),ce(new mo(a,"mutation",null,p,r));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(r){return r.saveExtraState?(r=r.saveExtraState(!0))?JSON.stringify(r):"":r.mutationToDom&&(r=r.mutationToDom())?$i(r):""}};i(Bt.EVENT,t.CHANGE$$module$build$src$core$events$utils,mo);var AS=.45,Jf=.65,tw={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},Cp={};Cp.blend=Mc,Cp.getHsvSaturation=wc,Cp.getHsvValue=nd,Cp.hexToRgb=rd,Cp.hsvToHex=Cc,Cp.hueToHex=tc,Cp.names=tw,Cp.parse=Wa,Cp.rgbToHex=ec,Cp.setHsvSaturation=Mh,Cp.setHsvValue=Zu;var Wv={};Wv.checkMessageReferences=Xl,Wv.parseBlockColour=es,Wv.replaceMessageReferences=Cr,Wv.tokenizeInterpolation=sa;var ui=class{constructor(r,a,p){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new ws(0,0),r!==ui.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(r),a&&this.setValidator(a))}configure_(r){r.tooltip&&this.setTooltip(Cr(r.tooltip))}setSourceBlock(r){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=r}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=te(Pe.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=te(Pe.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=te(Pe.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const r=this.getClickTarget_();if(!r)throw Error("A click target has not been set.");si(r),this.mouseDownWrapper_=Ee(r,"pointerdown",this,this.onMouseDown_)}fromXml(r){this.setValue(r.textContent)}toXml(r){return r.textContent=this.getValue(),r}saveState(r){return r=this.saveLegacyState(ui),r!==null?r:this.getValue()}loadState(r){this.loadLegacyState(ui,r)||this.setValue(r)}saveLegacyState(r){return r.prototype.saveState===this.saveState&&r.prototype.toXml!==this.toXml?(r=t.createElement$$module$build$src$core$utils$xml("field"),r.setAttribute("name",this.name||""),_n(this.toXml(r)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(r,a){return r.prototype.loadState===this.loadState&&r.prototype.fromXml!==this.fromXml?(this.fromXml(t.textToDom$$module$build$src$core$utils$xml(a)),!0):!1}dispose(){bs(this),wi(this);let r;(r=this.getSourceBlock())!=null&&r.isDeadOrDying()||at(this.fieldGroup_),this.disposed=!0}updateEditable(){const r=this.fieldGroup_,a=this.getSourceBlock();this.EDITABLE&&r&&a&&(this.enabled_&&a.isEditable()?(ke(r,"blocklyEditableText"),ft(r,"blocklyNonEditableText"),r.style.cursor=this.CURSOR):(ke(r,"blocklyNonEditableText"),ft(r,"blocklyEditableText"),r.style.cursor=""))}setEnabled(r){this.enabled_=r,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==ui.prototype.showEditor_}isClickableInFlyout(r){return!r}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let r=!1;return this.name&&(this.SERIALIZABLE?r=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),r=!0)),r}isVisible(){return this.visible_}setVisible(r){if(this.visible_!==r){this.visible_=r;var a=this.fieldGroup_;a&&(a.style.display=r?"block":"none")}}setValidator(r){this.validator_=r}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(r){this.isClickable()&&this.showEditor_(r)}showEditor_(r){}repositionForWindowResize(){return!1}updateSize_(r){const a=this.getConstants();r=r!==void 0?r:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let p=2*r,b=a.FIELD_TEXT_HEIGHT,R=0;this.textElement_&&(R=We(this.textElement_,a.FIELD_TEXT_FONTSIZE,a.FIELD_TEXT_FONTWEIGHT,a.FIELD_TEXT_FONTFAMILY),p+=R),this.isFullBlockField()||(b=Math.max(b,a.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=b,this.size_.width=p,this.positionTextElement_(r,R),this.positionBorderRect_()}positionTextElement_(r,a){if(this.textElement_){var p=this.getConstants(),b=this.size_.height/2,R;this.textElement_.setAttribute("x",String((R=this.getSourceBlock())!=null&&R.RTL?this.size_.width-a-r:r)),this.textElement_.setAttribute("y",String(p.FIELD_TEXT_BASELINE_CENTER?b:b-p.FIELD_TEXT_HEIGHT/2+p.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new ws(0,0)}getScaledBBox(){let r;var a=this.getSourceBlock();if(!a)throw new io;if(this.isFullBlockField()){var p=this.sourceBlock_.getHeightWidth();const b=a.workspace.scale;r=this.getAbsoluteXY_(),a=(p.width+1)*b,p=(p.height+1)*b,un?(r.x+=1.5*b,r.y+=1.5*b):(r.x-=.5*b,r.y-=.5*b)}else p=this.borderRect_.getBoundingClientRect(),r=En(this.borderRect_),a=p.width,p=p.height;return new bi(r.y,r.y+p,r.x,r.x+a)}onLocationChange(r){}getDisplayText_(){let r=this.getText();return r?(r.length>this.maxDisplayLength&&(r=r.substring(0,this.maxDisplayLength-2)+"…"),r=r.replace(/\s/g,ui.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(r+="‏"),r):ui.NBSP}getText(){const r=this.getText_();return String(r!==null?r:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.queueRender(),this.sourceBlock_.bumpNeighbours())}setValue(r,a=!0){if(r!==null){var p=this.doClassValidation_(r);if(r=this.processValidation_(r,p),!(r instanceof Error)){var b;p=(b=this.getValidator())==null?void 0:b.call(this,r),b=this.processValidation_(r,p),b instanceof Error||(r=this.sourceBlock_,r&&r.disposed||(p=this.getValue(),p===b?this.doValueUpdate_(b):(this.doValueUpdate_(b),a&&r&&ne()&&ce(new(we(t.CHANGE$$module$build$src$core$events$utils))(r,"field",this.name||null,p,b)),this.isDirty_&&this.forceRerender())))}}}processValidation_(r,a){return a===null?(this.doValueInvalid_(r),this.isDirty_&&this.forceRerender(),Error()):a===void 0?r:a}getValue(){return this.value_}doClassValidation_(r){return r??null}doValueUpdate_(r){this.value_=r,this.isDirty_=!0}doValueInvalid_(r){}onMouseDown_(r){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(r=this.sourceBlock_.workspace.getGesture(r))&&r.setStartField(this)}setTooltip(r){r||r===""||(r=this.sourceBlock_);const a=this.getClickTarget_();a?a.tooltip=r:this.tooltip_=r}getTooltip(){const r=this.getClickTarget_();return Ta(r||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return En(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let r=null;const a=this.getSourceBlock();if(!a)throw new io;const p=a.inputList;for(let b=0;b<a.inputList.length;b++){const R=p[b],W=R.fieldRow;for(let pe=0;pe<W.length;pe++)if(W[pe]===this){r=R;break}}return r}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(r){return!1}setCursorSvg(r){if(r){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(r),this.cursorSvg_=r}else this.cursorSvg_=null}setMarkerSvg(r){if(r){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(r),this.markerSvg_=r}else this.markerSvg_=null}updateMarkers_(){var r=this.getSourceBlock();if(!r)throw new io;r=r.workspace,r.keyboardAccessibilityMode&&this.cursorSvg_&&r.getCursor().draw(),r.keyboardAccessibilityMode&&this.markerSvg_&&r.getMarker(Dh.LOCAL_MARKER).draw()}};ui.NBSP=" ",ui.SKIP_SETUP=Symbol("SKIP_SETUP");var io=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}};t.Names$$module$build$src$core$names=class{constructor(r,a){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=a||"",this.reservedWords=new Set(r?r.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(r){this.variableMap=r}getNameForUserVariable(r){return this.variableMap?(r=this.variableMap.getVariableById(r))?r.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(r){r=t.allUsedVarModels$$module$build$src$core$variables(r);for(let a=0;a<r.length;a++)this.getName(r[a].getId(),t.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(r){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(r,a){let p=r;a===t.NameType$$module$build$src$core$names.VARIABLE&&(r=this.getNameForUserVariable(r))&&(p=r),r=p.toLowerCase();const b=a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(a)||this.db.set(a,new Map);const R=this.db.get(a);return R.has(r)?b+R.get(r):(a=this.getDistinctName(p,a),R.set(r,a.substr(b.length)),a)}getUserNames(r){let a;return(r=(a=this.db.get(r))==null?void 0:a.keys())?Array.from(r):[]}getDistinctName(r,a){r=this.safeName(r);let p=null,b,R;for(;this.dbReverse.has(r+((b=p)!=null?b:""))||this.reservedWords.has(r+((R=p)!=null?R:""));)p=p?p+1:2;let W;return r+=(W=p)!=null?W:"",this.dbReverse.add(r),(a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+r}safeName(r){return r?(r=encodeURI(r.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(r[0])!==-1&&(r="my_"+r)):r=t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",r}static equals(r,a){return r.toLowerCase()===a.toLowerCase()}},function(r){r=r.NameType||(r.NameType={}),r.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",r.VARIABLE="VARIABLE",r.PROCEDURE="PROCEDURE"}(t.Names$$module$build$src$core$names||(t.Names$$module$build$src$core$names={})),t.NameType$$module$build$src$core$names=t.Names$$module$build$src$core$names.NameType,t.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,t.NameType$$module$build$src$core$names,t.Names$$module$build$src$core$names;var Nb=class extends Map{constructor(){super()}set(r,a){return this.get(r)===a?this:(super.set(r,a),ve(a)&&a.startPublishing(),this)}delete(r){const a=this.get(r);return r=super.delete(r),r&&(ve(a)&&a.stopPublishing(),r)}clear(){if(this.size)for(const r of this.keys())this.delete(r)}add(r){return this.set(r.getId(),r)}getProcedures(){return[...this.values()]}},Bb=class{constructor(r){this.sourceBlock=r,this.offsetInBlock=new nn(0,0),this.workspaceLocation=new nn(0,0),this.svgRoot=null,this.tooltip=r}getType(){throw Error("Icons must implement getType")}initView(r){if(!this.svgRoot){var a=this.sourceBlock;this.svgRoot=te(Pe.G,{class:"blocklyIconGroup"}),a.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),Ee(this.svgRoot,"pointerdown",this,r),this.svgRoot.tooltip=this,si(this.svgRoot)}}dispose(){td(this.svgRoot),at(this.svgRoot)}getWeight(){return-1}getSize(){return new ws(0,0)}setTooltip(r){this.tooltip=r??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",$l(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(r){this.offsetInBlock=r,this.updateSvgRootOffset()}updateSvgRootOffset(){let r;(r=this.svgRoot)==null||r.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(r){this.workspaceLocation=nn.sum(r,this.offsetInBlock)}onClick(){}isClickableInFlyout(r){return!0}setVisible(r){Te("setVisible","v10","v11","setBubbleVisible"),$l(this)&&this.setBubbleVisible(r)}},Qf={fromJsonInternal:Hr},Vv={TEST_ONLY:Qf};Vv.fromJson=t.fromJson$$module$build$src$core$field_registry,Vv.register=Ks,Vv.unregister=Va;var Xd=class extends ui{constructor(r,a,p){super(ui.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,r!==ui.SKIP_SETUP&&(Array.isArray(r)?(Sa(r),r=Hn(r),this.menuGenerator_=r.options,this.prefixField=r.prefix||null,this.suffixField=r.suffix||null):this.menuGenerator_=r,this.selectedOption=this.getOptions(!1)[0],p&&this.configure_(p),this.setValue(this.selectedOption[1]),a&&this.setValidator(a))}fromXml(r){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(r.textContent)}loadState(r){this.loadLegacyState(Xd,r)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(r))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=te(Pe.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&ke(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let r;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((r=this.getSourceBlock())!=null&&r.isShadow())}createTextArrow_(){this.arrow=te(Pe.TSPAN,{},this.textElement_);let r;this.arrow.appendChild(document.createTextNode((r=this.getSourceBlock())!=null&&r.RTL?Xd.ARROW_CHAR+" ":" "+Xd.ARROW_CHAR));let a;(a=this.getSourceBlock())!=null&&a.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=te(Pe.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(xs,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(r){var a=this.getSourceBlock();if(!a)throw new io;this.dropdownCreate(),this.menu_.openingCoords=r&&typeof r.clientX=="number"?new nn(r.clientX,r.clientY):null,Xc(),r=this.menu_.render(jl()),ke(r,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(a=a.getColour(),Od(a,this.sourceBlock_.style.colourTertiary)),Ye(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),Kr(this.selectedMenuItem.getElement(),jl(),!0)),this.applyColour()}dropdownCreate(){const r=this.getSourceBlock();if(!r)throw new io;const a=new g0;a.setRole(Pc.LISTBOX),this.menu_=a;const p=this.getOptions(!1);this.selectedMenuItem=null;for(let R=0;R<p.length;R++){const[W,pe]=p[R];if(typeof W=="object"){var b=new Image(W.width,W.height);b.src=W.src,b.alt=W.alt||""}else b=W;b=new Ag(b,pe),b.setRole(Pc.OPTION),b.setRightToLeft(r.RTL),b.setCheckable(!0),a.addChild(b),b.setChecked(pe===this.value_),pe===this.value_&&(this.selectedMenuItem=b),b.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(r){bs(this,!0),this.onItemSelected_(this.menu_,r)}onItemSelected_(r,a){this.setValue(a.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(r){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:r&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),Sa(this.generatedOptions),this.generatedOptions)}doClassValidation_(r){return this.getOptions(!0).some(a=>a[1]===r)?r:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+r),null)}doValueUpdate_(r){super.doValueUpdate_(r),r=this.getOptions(!0);for(let a=0,p;p=r[a];a++)p[1]===this.value_&&(this.selectedOption=p)}applyColour(){const r=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",r.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",r.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=r.colourSecondary:this.arrow.style.fill=r.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const r=this.selectedOption&&this.selectedOption[0];r&&typeof r=="object"?this.renderSelectedImage(r):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(r){const a=this.getSourceBlock();if(!a)throw new io;this.imageElement.style.display="",this.imageElement.setAttributeNS(xs,"xlink:href",r.src),this.imageElement.setAttribute("height",String(r.height)),this.imageElement.setAttribute("width",String(r.width));const p=Number(r.height);r=Number(r.width);var b=!!this.borderRect_;const R=Math.max(b?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,p+il);b=b?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let W;W=this.svgArrow?this.positionSVGArrow(r+b,R/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):We(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=r+W+2*b,this.size_.height=R;let pe=0;a.RTL?this.imageElement.setAttribute("x",`${b+W}`):(pe=r+W,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${b}`)),this.imageElement.setAttribute("y",String(R/2-p/2)),this.positionTextElement_(pe+b,r+W)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var r=this.getTextElement();ke(r,"blocklyDropdownText"),r.setAttribute("text-anchor","start");var a=!!this.borderRect_;r=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const p=We(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let b=0;this.svgArrow&&(b=this.positionSVGArrow(p+a,r/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=p+b+2*a,this.size_.height=r,this.positionTextElement_(a,p)}positionSVGArrow(r,a){if(!this.svgArrow)return 0;const p=this.getSourceBlock();if(!p)throw new io;const b=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,R=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,W=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(p.RTL?b:r+R)+","+a+")"),W+R}getText_(){if(!this.selectedOption)return null;const r=this.selectedOption[0];return typeof r=="object"?r.alt:r}static fromJson(r){if(!r.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(r.options,void 0,r)}};Xd.CHECKMARK_OVERHANG=25,Xd.MAX_MENU_HEIGHT_VH=.45,Xd.ARROW_CHAR="▾";var Da=5,il=2*Da;Ks("field_dropdown",Xd);var fd,Ji=class{constructor(r,a,p){this.workspace=r,this.anchor=a,this.ownerRect=p,this.size=new ws(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.svgRoot=te(Pe.G,{},r.getBubbleCanvas()),r=te(Pe.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=te(Pe.PATH,{},r),this.background=te(Pe.RECT,{class:"blocklyDraggable",x:0,y:0,rx:fd.BORDER_WIDTH,ry:fd.BORDER_WIDTH},r),this.contentContainer=te(Pe.G,{},this.svgRoot),Ee(this.background,"pointerdown",this,this.onMouseDown)}dispose(){at(this.svgRoot),this.disposed=!0}setAnchorLocation(r,a=!1){this.anchor=r,a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(r,a){this.relativeLeft=r,this.relativeTop=a,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(r,a=!1){r.width=Math.max(r.width,fd.MIN_SIZE),r.height=Math.max(r.height,fd.MIN_SIZE),this.size=r,this.background.setAttribute("width",`${r.width}`),this.background.setAttribute("height",`${r.height}`),a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(r){this.colour=r,this.tail.setAttribute("fill",r),this.background.setAttribute("fill",r)}onMouseDown(r){let a;(a=this.workspace.getGesture(r))==null||a.handleBubbleStart(r,this)}positionRelativeToAnchor(){let r=this.anchor.x;r=this.workspace.RTL?r-(this.relativeLeft+this.size.width):r+this.relativeLeft,this.moveTo(r,this.relativeTop+this.anchor.y)}moveTo(r,a){this.svgRoot.setAttribute("transform",`translate(${r}, ${a})`)}positionByRect(r=new bi(0,0,0,0)){var a=this.workspace.getMetricsManager().getViewMetrics(!0),p=this.getOptimalRelativeLeft(a),b=this.getOptimalRelativeTop(a);const R={x:p,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},W={x:-this.size.width-30,y:b};b={x:r.getWidth(),y:b};var pe={x:p,y:r.getHeight()};p=r.getWidth()<r.getHeight()?b:pe,r=r.getWidth()<r.getHeight()?pe:b,b=this.getOverlap(R,a),pe=this.getOverlap(W,a);const De=this.getOverlap(p,a);a=this.getOverlap(r,a),a=Math.max(b,pe,De,a),b===a?(this.relativeLeft=R.x,this.relativeTop=R.y):pe===a?(this.relativeLeft=W.x,this.relativeTop=W.y):De===a?(this.relativeLeft=p.x,this.relativeTop=p.y):(this.relativeLeft=r.x,this.relativeTop=r.y),this.positionRelativeToAnchor()}getOverlap(r,a){var p=this.workspace.RTL?this.anchor.x-r.x-this.size.width:r.x+this.anchor.x;return r=r.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(p+this.size.width,a.left+a.width)-Math.max(p,a.left))*(Math.min(r+this.size.height,a.top+a.height)-Math.max(r,a.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(r){let a=-this.size.width/4;if(this.size.width>r.width)return a;if(r=this.getWorkspaceViewRect(r),this.workspace.RTL){var p=this.anchor.x-a;p-this.size.width<r.left?a=-(r.left-this.anchor.x+this.size.width):p>r.right&&(a=-(r.right-this.anchor.x))}else{p=a+this.anchor.x;const b=p+this.size.width;p<r.left?a=r.left-this.anchor.x:b>r.right&&(a=r.right-this.anchor.x-this.size.width)}return a}getOptimalRelativeTop(r){let a=-this.size.height/4;if(this.size.height>r.height)return a;const p=this.anchor.y+a,b=p+this.size.height;return r=this.getWorkspaceViewRect(r),p<r.top?a=r.top-this.anchor.y:b>r.bottom&&(a=r.bottom-this.anchor.y-this.size.height),a}getWorkspaceViewRect(r){const a=r.top;let p=r.top+r.height,b=r.left;return r=r.left+r.width,p-=this.getScrollbarThickness(),this.workspace.RTL?b-=this.getScrollbarThickness():r-=this.getScrollbarThickness(),new bi(a,p,b,r)}getScrollbarThickness(){return zo.scrollbarThickness/this.workspace.scale}renderTail(){const r=[];var a=this.size.width/2,p=this.size.height/2,b=-this.relativeLeft,R=-this.relativeTop;if(a===b&&p===R)r.push("M "+a+","+p);else{R-=p,b-=a,this.workspace.RTL&&(b*=-1);var W=Math.sqrt(R*R+b*b),pe=Math.acos(b/W);0>R&&(pe=2*Math.PI-pe);var De=pe+Math.PI/2;De>2*Math.PI&&(De-=2*Math.PI);var Pt=Math.sin(De);const Go=Math.cos(De);let Ro=(this.size.width+this.size.height)/fd.TAIL_THICKNESS;Ro=Math.min(Ro,this.size.width,this.size.height)/4,De=1-fd.ANCHOR_RADIUS/W,b=a+De*b,R=p+De*R,De=a+Ro*Go;const kp=p+Ro*Pt;a-=Ro*Go,p-=Ro*Pt,Pt=Ec(this.workspace.RTL?-fd.TAIL_ANGLE:fd.TAIL_ANGLE),Pt=pe+Pt,Pt>2*Math.PI&&(Pt-=2*Math.PI),pe=Math.sin(Pt)*W/fd.TAIL_BEND,W=Math.cos(Pt)*W/fd.TAIL_BEND,r.push("M"+De+","+kp),r.push("C"+(De+W)+","+(kp+pe)+" "+b+","+R+" "+b+","+R),r.push("C"+b+","+R+" "+(a+W)+","+(p+pe)+" "+a+","+p)}r.push("z");let xn;(xn=this.tail)==null||xn.setAttribute("d",r.join(" "))}bringToFront(){let r;const a=(r=this.svgRoot)==null?void 0:r.parentNode;return this.svgRoot&&(a==null?void 0:a.lastChild)!==this.svgRoot?(a==null||a.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new nn(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(r){this.moveTo(r.x,r.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-r.x-this.size.width:r.x-this.anchor.x,this.relativeTop=r.y-this.anchor.y,this.renderTail()}setDragging(r){}setDeleteStyle(r){}isDeletable(){return!1}showContextMenu(r){}};fd=Ji,Ji.BORDER_WIDTH=6,Ji.DOUBLE_BORDER=2*fd.BORDER_WIDTH,Ji.MIN_SIZE=fd.DOUBLE_BORDER,Ji.TAIL_THICKNESS=1,Ji.TAIL_ANGLE=20,Ji.TAIL_BEND=4,Ji.ANCHOR_RADIUS=8;var jm=class extends Ji{constructor(r,a,p,b){super(a,p,b),this.workspace=a,this.anchor=p,this.ownerRect=b,this.autoLayout=!0,a=new Ho(r),this.validateWorkspaceOptions(a),this.svgDialog=te(Pe.SVG,{x:Ji.BORDER_WIDTH,y:Ji.BORDER_WIDTH},this.contentContainer),r.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new Ho(r)),this.miniWorkspace.internalIsMutator=!0,r=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(r),a.languageTree&&(r.insertBefore(this.miniWorkspace.addFlyout(Pe.G),this.miniWorkspace.getCanvas()),r=this.miniWorkspace.getFlyout(),r==null||r.init(this.miniWorkspace),r==null||r.show(a.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let R,W;(R=this.miniWorkspace.getFlyout())==null||(W=R.getWorkspace())==null||W.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(r){this.miniWorkspace.addChangeListener(r)}validateWorkspaceOptions(r){if(r.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(r.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(r.zoomOptions.controls||r.zoomOptions.wheel||r.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(r.moveOptions.scrollbars||r.moveOptions.wheel||r.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(r.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const r of this.miniWorkspace.getTopBlocks(!1)){const a=r.getRelativeToSurfaceXY();if(20>a.y&&r.moveBy(0,20-a.y),r.RTL){let p=-20;const b=this.miniWorkspace.getFlyout();b&&(p-=b.getWidth()),a.x>p&&r.moveBy(p-a.x,0)}else 20>a.x&&r.moveBy(20-a.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var r=this.getSize(),a=this.calculateWorkspaceSize();Math.abs(r.width-a.width)<jm.MINIMUM_VIEW_CHANGE&&Math.abs(r.height-a.height)<jm.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${a.width}px`),this.svgDialog.setAttribute("height",`${a.height}px`),this.miniWorkspace.setCachedParentSvgSize(a.width,a.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${a.width}, 0)`),this.setSize(new ws(a.width+Ji.DOUBLE_BORDER,a.height+Ji.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var r=this.miniWorkspace.getCanvas().getBBox();let a=r.width+jm.MARGIN;r=r.height+jm.MARGIN;const p=this.miniWorkspace.getFlyout();if(p){const b=p.getWorkspace().getMetricsManager().getScrollMetrics();r=Math.max(r,b.height+20),a+=p.getWidth()}return new ws(a,r)}updateBlockStyles(){for(var r of this.miniWorkspace.getAllBlocks(!1))r.setStyle(r.getStyleName());let a;if(r=(a=this.miniWorkspace.getFlyout())==null?void 0:a.getWorkspace())for(const p of r.getAllBlocks(!1))p.setStyle(p.getStyleName())}moveDuringDrag(r){super.moveDuringDrag(r),this.autoLayout=!1}moveTo(r,a){super.moveTo(r,a),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(r){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};jm.MINIMUM_VIEW_CHANGE=10,jm.MARGIN=3*Ji.DOUBLE_BORDER;var Pb,Fb;Pb=17,Fb=16,t.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends Bb{constructor(r,a){super(a),this.flyoutBlockTypes=r,this.sourceBlock=a,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(r){this.svgRoot||(super.initView(r),te(Pe.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),te(Pe.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),te(Pe.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),ke(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let r;(r=this.miniWorkspaceBubble)==null||r.dispose()}getWeight(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new ws(Pb,Pb)}applyColour(){super.applyColour();let r;(r=this.miniWorkspaceBubble)==null||r.setColour(this.sourceBlock.style.colourPrimary);let a;(a=this.miniWorkspaceBubble)==null||a.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(r){super.onLocationChange(r);let a;(a=this.miniWorkspaceBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(r){if(this.bubbleIsVisible()!==r){if(r){this.miniWorkspaceBubble=new jm(this.getMiniWorkspaceConfig(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour(),this.createRootBlock(),this.addSaveConnectionsListener();let a;(a=this.miniWorkspaceBubble)==null||a.addWorkspaceChangeListener(this.createMiniWorkspaceChangeListener())}else{let a;(a=this.miniWorkspaceBubble)==null||a.dispose(),this.miniWorkspaceBubble=null,this.saveConnectionsListener&&this.sourceBlock.workspace.removeChangeListener(this.saveConnectionsListener),this.saveConnectionsListener=null}ce(new(we(no))(this.sourceBlock,r,"mutator"))}}getMiniWorkspaceConfig(){let r;const a={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(r=this.sourceBlock.workspace.options.rendererOverrides)!=null?r:void 0};return this.flyoutBlockTypes.length&&(a.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(p=>({kind:"block",type:p}))}),a}getAnchorLocation(){const r=Pb/2;return nn.sum(this.workspaceLocation,new nn(r,r))}getBubbleOwnerRect(){const r=this.sourceBlock.getSvgRoot().getBBox();return new bi(r.y,r.y+r.height,r.x,r.x+r.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var r of this.rootBlock.getDescendants(!1))r.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let a,p,b,R;r=(R=(a=this.miniWorkspaceBubble)==null||(p=a.getWorkspace())==null||(b=p.getFlyout())==null?void 0:b.getWidth())!=null?R:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(r+Fb):Fb,Fb)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return r=>{t.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(r)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(r){return r.isUiEvent||r.type===t.CREATE$$module$build$src$core$events$utils||r.type===t.CHANGE$$module$build$src$core$events$utils&&r.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var r=t.getGroup$$module$build$src$core$events$utils();r||t.setGroup$$module$build$src$core$events$utils(!0);var a=mo.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var p=mo.getExtraBlockState_(this.sourceBlock);a!==p&&ce(new(we(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"mutation",null,a,p)),t.setGroup$$module$build$src$core$events$utils(r)}}getWorkspace(){let r;return(r=this.miniWorkspaceBubble)==null?void 0:r.getWorkspace()}static reconnect(r,a,p){return Te("MutatorIcon.reconnect","v10","v11","connection.reconnect"),r?r.reconnect(a,p):!1}static findParentWs(r){return Te("MutatorIcon.findParentWs","v10","v11","workspace.getRootWorkspace"),r.getRootWorkspace()}},t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=fo.MUTATOR,t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,t.MutatorIcon$$module$build$src$core$icons$mutator_icon;var S_=Object.create(null),jR={allExtensions:S_};t.register$$module$build$src$core$extensions("parent_tooltip_when_inline",Ea);var Mp={TEST_ONLY:jR};Mp.apply=Mi,Mp.buildTooltipForDropdown=t.buildTooltipForDropdown$$module$build$src$core$extensions,Mp.buildTooltipWithFieldText=t.buildTooltipWithFieldText$$module$build$src$core$extensions,Mp.isRegistered=vi,Mp.register=t.register$$module$build$src$core$extensions,Mp.registerMixin=t.registerMixin$$module$build$src$core$extensions,Mp.registerMutator=t.registerMutator$$module$build$src$core$extensions,Mp.runAfterPageLoad=Fd,Mp.unregister=Zr;var Nr;(function(r){r[r.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",r[r.MAC_ENTER=3]="MAC_ENTER",r[r.BACKSPACE=8]="BACKSPACE",r[r.TAB=9]="TAB",r[r.NUM_CENTER=12]="NUM_CENTER",r[r.ENTER=13]="ENTER",r[r.SHIFT=16]="SHIFT",r[r.CTRL=17]="CTRL",r[r.ALT=18]="ALT",r[r.PAUSE=19]="PAUSE",r[r.CAPS_LOCK=20]="CAPS_LOCK",r[r.ESC=27]="ESC",r[r.SPACE=32]="SPACE",r[r.PAGE_UP=33]="PAGE_UP",r[r.PAGE_DOWN=34]="PAGE_DOWN",r[r.END=35]="END",r[r.HOME=36]="HOME",r[r.LEFT=37]="LEFT",r[r.UP=38]="UP",r[r.RIGHT=39]="RIGHT",r[r.DOWN=40]="DOWN",r[r.PLUS_SIGN=43]="PLUS_SIGN",r[r.PRINT_SCREEN=44]="PRINT_SCREEN",r[r.INSERT=45]="INSERT",r[r.DELETE=46]="DELETE",r[r.ZERO=48]="ZERO",r[r.ONE=49]="ONE",r[r.TWO=50]="TWO",r[r.THREE=51]="THREE",r[r.FOUR=52]="FOUR",r[r.FIVE=53]="FIVE",r[r.SIX=54]="SIX",r[r.SEVEN=55]="SEVEN",r[r.EIGHT=56]="EIGHT",r[r.NINE=57]="NINE",r[r.FF_SEMICOLON=59]="FF_SEMICOLON",r[r.FF_EQUALS=61]="FF_EQUALS",r[r.FF_DASH=173]="FF_DASH",r[r.FF_HASH=163]="FF_HASH",r[r.QUESTION_MARK=63]="QUESTION_MARK",r[r.AT_SIGN=64]="AT_SIGN",r[r.A=65]="A",r[r.B=66]="B",r[r.C=67]="C",r[r.D=68]="D",r[r.E=69]="E",r[r.F=70]="F",r[r.G=71]="G",r[r.H=72]="H",r[r.I=73]="I",r[r.J=74]="J",r[r.K=75]="K",r[r.L=76]="L",r[r.M=77]="M",r[r.N=78]="N",r[r.O=79]="O",r[r.P=80]="P",r[r.Q=81]="Q",r[r.R=82]="R",r[r.S=83]="S",r[r.T=84]="T",r[r.U=85]="U",r[r.V=86]="V",r[r.W=87]="W",r[r.X=88]="X",r[r.Y=89]="Y",r[r.Z=90]="Z",r[r.META=91]="META",r[r.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",r[r.CONTEXT_MENU=93]="CONTEXT_MENU",r[r.NUM_ZERO=96]="NUM_ZERO",r[r.NUM_ONE=97]="NUM_ONE",r[r.NUM_TWO=98]="NUM_TWO",r[r.NUM_THREE=99]="NUM_THREE",r[r.NUM_FOUR=100]="NUM_FOUR",r[r.NUM_FIVE=101]="NUM_FIVE",r[r.NUM_SIX=102]="NUM_SIX",r[r.NUM_SEVEN=103]="NUM_SEVEN",r[r.NUM_EIGHT=104]="NUM_EIGHT",r[r.NUM_NINE=105]="NUM_NINE",r[r.NUM_MULTIPLY=106]="NUM_MULTIPLY",r[r.NUM_PLUS=107]="NUM_PLUS",r[r.NUM_MINUS=109]="NUM_MINUS",r[r.NUM_PERIOD=110]="NUM_PERIOD",r[r.NUM_DIVISION=111]="NUM_DIVISION",r[r.F1=112]="F1",r[r.F2=113]="F2",r[r.F3=114]="F3",r[r.F4=115]="F4",r[r.F5=116]="F5",r[r.F6=117]="F6",r[r.F7=118]="F7",r[r.F8=119]="F8",r[r.F9=120]="F9",r[r.F10=121]="F10",r[r.F11=122]="F11",r[r.F12=123]="F12",r[r.NUMLOCK=144]="NUMLOCK",r[r.SCROLL_LOCK=145]="SCROLL_LOCK",r[r.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",r[r.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",r[r.SEMICOLON=186]="SEMICOLON",r[r.DASH=189]="DASH",r[r.EQUALS=187]="EQUALS",r[r.COMMA=188]="COMMA",r[r.PERIOD=190]="PERIOD",r[r.SLASH=191]="SLASH",r[r.APOSTROPHE=192]="APOSTROPHE",r[r.TILDE=192]="TILDE",r[r.SINGLE_QUOTE=222]="SINGLE_QUOTE",r[r.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",r[r.BACKSLASH=220]="BACKSLASH",r[r.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",r[r.WIN_KEY=224]="WIN_KEY",r[r.MAC_FF_META=224]="MAC_FF_META",r[r.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",r[r.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",r[r.WIN_IME=229]="WIN_IME",r[r.VK_NONAME=252]="VK_NONAME",r[r.PHANTOM=255]="PHANTOM"})(Nr||(Nr={}));var cf={};cf.arc=Gr,cf.curve=us,cf.line=wl,cf.lineOnAxis=hn,cf.lineTo=xl,cf.moveBy=oi,cf.moveTo=Ts,cf.point=Mn;var ca={};ca.Coordinate=nn,ca.KeyCodes=Nr,ca.Rect=bi,ca.Size=ws,ca.Svg=Pe,ca.aria=Fu,ca.array=d0,ca.browserEvents=cd,ca.colour=Cp,ca.deprecation=h_,ca.dom=Ra,ca.extensions=Mp,ca.idGenerator=lc,ca.math=Um,ca.object=ew,ca.parsing=Wv,ca.string=bn,ca.style=dd,ca.svgMath=Gf,ca.svgPaths=cf,ca.toolbox=tu,ca.userAgent=Cm,ca.xml=Zp;var Ub={};Ub.register=ts,Ub.unregister=Yp;var E_=class extends Ji{constructor(r,a,p,b){super(a,p,b),this.text=r,this.workspace=a,this.anchor=p,this.ownerRect=b,this.paragraph=this.stringToSvg(r,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(r){this.text=r,at(this.paragraph),this.paragraph=this.stringToSvg(r,this.contentContainer),this.updateBubbleSize()}stringToSvg(r,a){return a=this.createParagraph(a),r=this.createSpans(a,r),this.workspace.RTL&&this.rightAlignSpans(a.getBBox().width,r),a}createParagraph(r){return te(Pe.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Ji.BORDER_WIDTH},r)}createSpans(r,a){return a.split(`
`).map(p=>{const b=te(Pe.TSPAN,{dy:"1em",x:Ji.BORDER_WIDTH},r);return p=document.createTextNode(p),b.appendChild(p),b})}rightAlignSpans(r,a){for(const p of a)p.setAttribute("text-anchor","end"),p.setAttribute("x",`${r+Ji.BORDER_WIDTH}`)}updateBubbleSize(){const r=this.paragraph.getBBox();this.setSize(new ws(r.width+2*Ji.BORDER_WIDTH,r.height+2*Ji.BORDER_WIDTH),!0)}},md=class extends Ji{constructor(r,a,p){super(r,a,p),this.workspace=r,this.anchor=a,this.ownerRect=p,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new ws(160+Ji.DOUBLE_BORDER,80+Ji.DOUBLE_BORDER),this.MIN_SIZE=new ws(45+Ji.DOUBLE_BORDER,20+Ji.DOUBLE_BORDER),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(r){this.text=r,this.textArea.value=r,this.onTextChange()}addTextChangeListener(r){this.textChangeListeners.push(r)}addSizeChangeListener(r){this.sizeChangeListeners.push(r)}createEditor(r){r=te(Pe.FOREIGNOBJECT,{x:Ji.BORDER_WIDTH,y:Ji.BORDER_WIDTH},r);const a=document.createElementNS(Dc,"body");a.setAttribute("xmlns",Dc),a.className="blocklyMinimalBody";const p=document.createElementNS(Dc,"textarea");return p.className="blocklyCommentTextarea",p.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),a.appendChild(p),r.appendChild(a),this.bindTextAreaEvents(p),setTimeout(()=>{p.focus()},0),{inputRoot:r,textArea:p}}bindTextAreaEvents(r){Ee(r,"wheel",this,a=>{a.stopPropagation()}),Ee(r,"focus",this,this.onStartEdit,!0),Ee(r,"change",this,this.onTextChange)}createResizeHandle(r){r=te(Pe.G,{class:this.workspace.RTL?"blocklyResizeSW":"blocklyResizeSE"},r);const a=2*Ji.BORDER_WIDTH;return te(Pe.POLYGON,{points:`0,${a} ${a},${a} ${a},0`},r),te(Pe.LINE,{class:"blocklyResizeLine",x1:a/3,y1:a-1,x2:a-1,y2:a/3},r),te(Pe.LINE,{class:"blocklyResizeLine",x1:2*a/3,y1:a-1,x2:a-1,y2:2*a/3},r),Ee(r,"pointerdown",this,this.onResizePointerDown),r}setSize(r,a=!1){r.width=Math.max(r.width,this.MIN_SIZE.width),r.height=Math.max(r.height,this.MIN_SIZE.height);const p=r.width-Ji.DOUBLE_BORDER,b=r.height-Ji.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${p}`),this.inputRoot.setAttribute("height",`${b}`),this.textArea.style.width=`${p-4}px`,this.textArea.style.height=`${b-4}px`,this.workspace.RTL?this.resizeGroup.setAttribute("transform",`translate(${Ji.DOUBLE_BORDER}, ${b}) scale(-1 1)`):this.resizeGroup.setAttribute("transform",`translate(${p}, ${b})`),super.setSize(r,a),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(r){this.bringToFront(),dt(r)||(this.workspace.startDrag(r,new nn(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Ee(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Ee(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),r.stopPropagation()}onResizePointerUp(r){Je(),this.resizePointerUpListener&&(rt(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(rt(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(r){r=this.workspace.moveDrag(r),this.setSize(new ws(this.workspace.RTL?-r.x:r.x,r.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const r of this.textChangeListeners)r()}onSizeChange(){for(const r of this.sizeChangeListeners)r()}};$t(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var Og=17,nw=160,rw=80,Nh=class extends Bb{constructor(r){super(r),this.sourceBlock=r,this.textBubble=this.textInputBubble=null,this.text="",this.bubbleSize=new ws(nw,rw),this.bubbleVisiblity=!1}getType(){return Nh.TYPE}initView(r){this.svgRoot||(super.initView(r),te(Pe.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),te(Pe.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),te(Pe.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),ke(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let r;(r=this.textInputBubble)==null||r.dispose();let a;(a=this.textBubble)==null||a.dispose()}getWeight(){return Nh.WEIGHT}getSize(){return new ws(Og,Og)}applyColour(){super.applyColour();const r=this.sourceBlock.style.colourPrimary;let a;(a=this.textInputBubble)==null||a.setColour(r);let p;(p=this.textBubble)==null||p.setColour(r)}updateEditable(){super.updateEditable(),this.bubbleIsVisible()&&(this.setBubbleVisible(!1),this.setBubbleVisible(!0))}onLocationChange(r){super.onLocationChange(r),r=this.getAnchorLocation();let a;(a=this.textInputBubble)==null||a.setAnchorLocation(r);let p;(p=this.textBubble)==null||p.setAnchorLocation(r)}setText(r){const a=this.text;ce(new(we(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,a,r)),this.text=r;let p;(p=this.textInputBubble)==null||p.setText(this.text);let b;(b=this.textBubble)==null||b.setText(this.text)}getText(){return this.text}setBubbleSize(r){this.bubbleSize=r;let a;(a=this.textInputBubble)==null||a.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(r){let a;this.text=(a=r.text)!=null?a:"";let p,b;this.bubbleSize=new ws((p=r.width)!=null?p:nw,(b=r.height)!=null?b:rw);let R;this.bubbleVisiblity=(R=r.pinned)!=null?R:!1,setTimeout(()=>this.setBubbleVisible(this.bubbleVisiblity),1)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var r=this.textInputBubble.getText();this.text!==r&&(ce(new(we(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,this.text,r)),this.text=r)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(r){(!r||!this.textBubble&&!this.textInputBubble)&&(r||this.textBubble||this.textInputBubble)&&(this.bubbleVisiblity=r,this.sourceBlock.rendered&&!this.sourceBlock.isInFlyout&&(r?(this.sourceBlock.isEditable()?this.showEditableBubble():this.showNonEditableBubble(),this.applyColour()):this.hideBubble(),ce(new(we(no))(this.sourceBlock,r,"comment"))))}showEditableBubble(){this.textInputBubble=new md(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.textBubble=new E_(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect())}hideBubble(){let r;(r=this.textInputBubble)==null||r.dispose(),this.textInputBubble=null;let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}getAnchorLocation(){const r=Og/2;return nn.sum(this.workspaceLocation,new nn(r,r))}getBubbleOwnerRect(){const r=this.sourceBlock.getSvgRoot().getBBox();return new bi(r.y,r.y+r.height,r.x,r.x+r.width)}};Nh.TYPE=fo.COMMENT,Nh.WEIGHT=3,ts(Nh.TYPE,Nh);var IS=17,hf=class extends Bb{constructor(r){super(r),this.sourceBlock=r,this.textMap=new Map,this.textBubble=null}getType(){return hf.TYPE}initView(r){this.svgRoot||(super.initView(r),te(Pe.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),te(Pe.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),te(Pe.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),ke(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let r;(r=this.textBubble)==null||r.dispose()}getWeight(){return hf.WEIGHT}getSize(){return new ws(IS,IS)}applyColour(){super.applyColour();let r;(r=this.textBubble)==null||r.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(r){super.onLocationChange(r);let a;(a=this.textBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}addMessage(r,a){if(this.textMap.get(a)===r)return this;r?this.textMap.set(a,r):this.textMap.delete(a);let p;return(p=this.textBubble)==null||p.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(r){if(this.bubbleIsVisible()!==r){if(r)this.textBubble=new E_(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour();else{let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}ce(new(we(no))(this.sourceBlock,r,"warning"))}}getAnchorLocation(){const r=IS/2;return nn.sum(this.workspaceLocation,new nn(r,r))}getBubbleOwnerRect(){const r=this.sourceBlock.getSvgRoot().getBBox();return new bi(r.y,r.y+r.height,r.x,r.x+r.width)}};hf.TYPE=fo.WARNING,hf.WEIGHT=2;var RS=class extends Error{constructor(r){super(`Tried to append an icon of type ${r.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=r}},qf={};qf.DuplicateIconType=RS;var Mr={};Mr.CommentIcon=Nh,Mr.Icon=Bb,Mr.IconType=fo,Mr.MutatorIcon=t.MutatorIcon$$module$build$src$core$icons$mutator_icon,Mr.WarningIcon=hf,Mr.exceptions=qf,Mr.registry=Ub;var jv,Io;jv="PROCEDURE",t.DEFAULT_ARG$$module$build$src$core$procedures="x",Io={CATEGORY_NAME:jv,DEFAULT_ARG:t.DEFAULT_ARG$$module$build$src$core$procedures},Io.ObservableProcedureMap=Nb,Io.allProcedures=Qc,Io.findLegalName=t.findLegalName$$module$build$src$core$procedures,Io.flyoutCategory=sn,Io.getCallers=xu,Io.getDefinition=t.getDefinition$$module$build$src$core$procedures,Io.isNameUsed=pn,Io.isProcedureBlock=oa,Io.mutateCallers=t.mutateCallers$$module$build$src$core$procedures,Io.mutatorOpenListener=nc,Io.rename=t.rename$$module$build$src$core$procedures;var iw=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(r){return Object.prototype.hasOwnProperty.call(this,r)||(this[r]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[r]}isField(r){return r.type&this.FIELD}isHat(r){return r.type&this.HAT}isIcon(r){return r.type&this.ICON}isSpacer(r){return r.type&this.SPACER}isInRowSpacer(r){return r.type&this.IN_ROW_SPACER}isInput(r){return r.type&this.INPUT}isExternalInput(r){return r.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(r){return r.type&this.INLINE_INPUT}isStatementInput(r){return r.type&this.STATEMENT_INPUT}isPreviousConnection(r){return r.type&this.PREVIOUS_CONNECTION}isNextConnection(r){return r.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(r){return r.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(r){return r.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(r){return r.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(r){return r.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(r){return r.type&this.RIGHT_SQUARE_CORNER}isCorner(r){return r.type&this.CORNER}isJaggedEdge(r){return r.type&this.JAGGED_EDGE}isRow(r){return r.type&this.ROW}isBetweenRowSpacer(r){return r.type&this.BETWEEN_ROW_SPACER}isTopRow(r){return r.type&this.TOP_ROW}isBottomRow(r){return r.type&this.BOTTOM_ROW}isTopOrBottomRow(r){return r.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(r){return r.type&this.INPUT_ROW}},et=new iw,ti=class{constructor(r){this.centerline=this.xPos=this.height=this.width=0,this.constants_=r,this.type=et.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},Xv=class{constructor(r){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=r,this.type=et.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let r=this.elements.length-1;0<=r;r--){const a=this.elements[r];if(et.isInput(a))return a}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let r=0;r<this.elements.length;r++){const a=this.elements[r];if(et.isSpacer(a))return a}return null}getLastSpacer(){for(let r=this.elements.length-1;0<=r;r--){const a=this.elements[r];if(et.isSpacer(a))return a}return null}},zb=class extends Xv{constructor(r){super(r),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=et.BOTTOM_ROW}hasLeftSquareCorner(r){return!!r.outputConnection||!!r.getNextBlock()}hasRightSquareCorner(r){return!0}measure(){let r=0,a=0,p=0;for(let b=0;b<this.elements.length;b++){const R=this.elements[b];a+=R.width,et.isSpacer(R)||(et.isNextConnection(R)?p=Math.max(p,R.height):r=Math.max(r,R.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,r)+p,this.descenderHeight=p,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Ap=class extends ti{constructor(r,a){super(r),this.connectionModel=a,this.type|=et.CONNECTION,this.shape=this.constants_.shapeFor(a),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=a.isHighlighted()}},Lg=class extends Ap{constructor(r,a){super(r,a.connection),this.input=a,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=et.INPUT,this.align=a.align,(this.connectedBlock=a.connection&&a.connection.targetBlock()?a.connection.targetBlock():null)?(r=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=r.width,this.connectedBlockHeight=r.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Hb=class extends Lg{constructor(r,a){super(r,a),this.height=0,this.type|=et.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},$_=class extends ti{constructor(r,a,p){super(r),this.field=a,this.parentInput=p,this.isEditable=a.EDITABLE,this.flipRtl=a.getFlipRtl(),this.type|=et.FIELD,r=this.field.getSize(),this.height=r.height,this.width=r.width}},kS=class extends ti{constructor(r){super(r),this.type|=et.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},sw=class extends ti{constructor(r,a){super(r),this.icon=a,this.flipRtl=!1,this.isVisible=$l(a)&&a.bubbleIsVisible(),this.type|=et.ICON,r=a.getSize(),this.height=r.height,this.width=r.width}},Yd=class extends ti{constructor(r,a){super(r),this.type=this.type|et.SPACER|et.IN_ROW_SPACER,this.width=a,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},OS=class extends Lg{constructor(r,a){super(r,a),this.type|=et.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},Yv=class extends Lg{constructor(r,a){super(r,a),this.type|=et.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},LS=class extends Xv{constructor(r){super(r),this.connectedBlockWidths=0,this.type|=et.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let r=0;for(let a=0;a<this.elements.length;a++){const p=this.elements[a];this.width+=p.width,et.isInput(p)&&p instanceof Lg&&(et.isStatementInput(p)&&p instanceof Yv?r+=p.connectedBlockWidth:et.isExternalInput(p)&&p instanceof Hb&&p.connectedBlockWidth!==0&&(r+=p.connectedBlockWidth-p.connectionWidth)),et.isSpacer(p)||(this.height=Math.max(this.height,p.height))}this.connectedBlockWidths=r,this.widthWithConnectedBlocks=this.width+r}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},ow=class extends ti{constructor(r){super(r),this.type|=et.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},aw=class extends Ap{constructor(r,a){super(r,a),this.type|=et.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},lw=class extends Ap{constructor(r,a){super(r,a),this.connectionOffsetX=0,this.type|=et.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},uw=class extends Ap{constructor(r,a){super(r,a),this.type|=et.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},E0=class extends ti{constructor(r,a){super(r),this.type=(a&&a!=="left"?et.RIGHT_ROUND_CORNER:et.LEFT_ROUND_CORNER)|et.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},DS=class extends Xv{constructor(r,a,p){super(r),this.height=a,this.width=p,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|et.SPACER|et.BETWEEN_ROW_SPACER,this.elements=[new Yd(this.constants_,p)]}measure(){}},$0=class extends ti{constructor(r,a){super(r),this.type=(a&&a!=="left"?et.RIGHT_SQUARE_CORNER:et.LEFT_SQUARE_CORNER)|et.CORNER,this.width=this.height=this.constants_.NO_PADDING}},NS=class extends Xv{constructor(r){super(r),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=et.TOP_ROW}hasLeftSquareCorner(r){const a=(r.hat?r.hat==="cap":this.constants_.ADD_START_HATS)&&!r.outputConnection&&!r.previousConnection,p=r.getPreviousBlock();return!!r.outputConnection||a||(p?p.getNextBlock()===r:!1)}hasRightSquareCorner(r){return!0}measure(){let r=0,a=0,p=0;for(let b=0;b<this.elements.length;b++){const R=this.elements[b];a+=R.width,et.isSpacer(R)||(et.isHat(R)&&R instanceof kS?p=Math.max(p,R.ascenderHeight):r=Math.max(r,R.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,r)+p,this.capline=this.ascenderHeight=p,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Kv=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=oi(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(r){this.blockStyles=Object.create(null);const a=r.blockStyles;for(const p in a)this.blockStyles[p]=this.validatedBlockStyle_(a[p]);this.setDynamicProperties_(r)}setDynamicProperties_(r){this.setFontConstants_(r),this.setComponentConstants_(r),this.ADD_START_HATS=r.startHats!==void 0?r.startHats:this.ADD_START_HATS}setFontConstants_(r){r.fontStyle&&r.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=r.fontStyle.family),r.fontStyle&&r.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=r.fontStyle.weight),r.fontStyle&&r.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=r.fontStyle.size),r=Be("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=r.height,this.FIELD_TEXT_BASELINE=r.baseline}setComponentConstants_(r){this.CURSOR_COLOUR=r.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=r.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=r.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(r.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(r){const a="auto_"+r;return this.blockStyles[a]||(this.blockStyles[a]=this.createBlockStyle_(r)),{style:this.blockStyles[a],name:a}}getBlockStyle(r){return this.blockStyles[r||""]||(r&&r.indexOf("auto_")===0?this.getBlockStyleForColour(r.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(r){return this.validatedBlockStyle_({colourPrimary:r})}validatedBlockStyle_(r){const a={};return r&&Object.assign(a,r),r=es(a.colourPrimary||"#000"),a.colourPrimary=r.hex,a.colourSecondary=a.colourSecondary?es(a.colourSecondary).hex:this.generateSecondaryColour_(a.colourPrimary),a.colourTertiary=a.colourTertiary?es(a.colourTertiary).hex:this.generateTertiaryColour_(a.colourPrimary),a.hat=a.hat||"",a}generateSecondaryColour_(r){return Mc("#fff",r,.6)||r}generateTertiaryColour_(r){return Mc("#fff",r,.3)||r}dispose(){this.embossFilter&&at(this.embossFilter),this.disabledPattern&&at(this.disabledPattern),this.debugFilter&&at(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const r=this.JAGGED_TEETH_HEIGHT,a=this.JAGGED_TEETH_WIDTH,p=wl([Mn(a,r/4),Mn(2*-a,r/2),Mn(a,r/4)]);return{height:r,width:a,path:p}}makeStartHat(){const r=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,p=us("c",[Mn(30,-r),Mn(70,-r),Mn(a,0)]);return{height:r,width:a,path:p}}makePuzzleTab(){function r(W){W=W?-1:1;const pe=-W;var De=p/2;const Pt=De+2.5,xn=De+.5,Go=Mn(-a,W*De);return De=Mn(a,W*De),us("c",[Mn(0,W*Pt),Mn(-a,pe*xn),Go])+us("s",[Mn(a,2.5*pe),De])}const a=this.TAB_WIDTH,p=this.TAB_HEIGHT,b=r(!0),R=r(!1);return{type:this.SHAPES.PUZZLE,width:a,height:p,pathDown:R,pathUp:b}}makeNotch(){function r(pe){return wl([Mn(pe*b,p),Mn(3*pe,0),Mn(pe*b,-p)])}const a=this.NOTCH_WIDTH,p=this.NOTCH_HEIGHT,b=(a-3)/2,R=r(1),W=r(-1);return{type:this.SHAPES.NOTCH,width:a,height:p,pathLeft:R,pathRight:W}}makeInsideCorners(){const r=this.CORNER_RADIUS,a=Gr("a","0 0,0",r,Mn(-r,r)),p=Gr("a","0 0,0",r,Mn(r,r));return{width:r,height:r,pathTop:a,pathBottom:p}}makeOutsideCorners(){const r=this.CORNER_RADIUS,a=oi(0,r)+Gr("a","0 0,1",r,Mn(r,-r)),p=Gr("a","0 0,1",r,Mn(r,r)),b=Gr("a","0 0,1",r,Mn(-r,-r)),R=Gr("a","0 0,1",r,Mn(-r,r));return{topLeft:a,topRight:p,bottomRight:R,bottomLeft:b,rightHeight:r}}shapeFor(r){switch(r.type){case $n.INPUT_VALUE:case $n.OUTPUT_VALUE:return this.PUZZLE_TAB;case $n.PREVIOUS_STATEMENT:case $n.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(r,a,p){this.injectCSS_(a,p),this.defs=te(Pe.DEFS,{},r),r=te(Pe.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),te(Pe.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},r),a=te(Pe.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},r),te(Pe.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},a),te(Pe.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},r),te(Pe.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},r),this.embossFilterId=r.id,this.embossFilter=r,r=te(Pe.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),te(Pe.RECT,{width:10,height:10,fill:"#aaa"},r),te(Pe.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},r),this.disabledPatternId=r.id,this.disabledPattern=r,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const r=te(Pe.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),a=te(Pe.FECOMPONENTTRANSFER,{result:"outBlur"},r);te(Pe.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),te(Pe.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},r),te(Pe.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},r),this.debugFilterId=r.id,this.debugFilter=r}}injectCSS_(r,a){a=this.getCSS_(a),r="blockly-renderer-style-"+r,this.cssNode=document.getElementById(r);const p=a.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=p:(a=document.createElement("style"),a.id=r,r=document.createTextNode(p),a.appendChild(r),document.head.insertBefore(a,document.head.firstChild),this.cssNode=a)}getCSS_(r){return[`${r} .blocklyText, `,`${r} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${r} .blocklyText {`,"fill: #fff;","}",`${r} .blocklyNonEditableText>rect,`,`${r} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${r} .blocklyNonEditableText>text,`,`${r} .blocklyEditableText>text {`,"fill: #000;","}",`${r} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${r} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${r} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${r} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${r} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${r} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${r} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${r} .blocklyReplaceable .blocklyPathLight,`,`${r} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${r} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Jv=class{constructor(r,a){this.inlinePath_=this.outlinePath_="",this.block_=r,this.info_=a,this.topLeft_=r.getRelativeToSurfaceXY(),this.constants_=a.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}hideHiddenIcons_(){Te("hideHiddenIcons_","v10","v11")}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}drawOutline_(){this.drawTop_();for(let r=1;r<this.info_.rows.length-1;r++){const a=this.info_.rows[r];a.hasJaggedEdge?this.drawJaggedEdge_(a):a.hasStatement?this.drawStatementInput_(a):a.hasExternalInput?this.drawValueInput_(a):this.drawRightSideRow_(a)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const r=this.info_.topRow,a=r.elements;this.positionPreviousConnection_(),this.outlinePath_+=oi(r.xPos,this.info_.startY);for(let p=0,b;b=a[p];p++)et.isLeftRoundedCorner(b)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:et.isRightRoundedCorner(b)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:et.isPreviousConnection(b)&&b instanceof Ap?this.outlinePath_+=b.shape.pathLeft:et.isHat(b)?this.outlinePath_+=this.constants_.START_HAT.path:et.isSpacer(b)&&(this.outlinePath_+=hn("h",b.width));this.outlinePath_+=hn("v",r.height)}drawJaggedEdge_(r){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+hn("v",r.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(r){const a=r.getLastInput();this.positionExternalValueConnection_(r);const p=cs(a.shape)?a.shape.pathDown(a.height):a.shape.pathDown;this.outlinePath_+=hn("H",a.xPos+a.width)+p+hn("v",r.height-a.connectionHeight)}drawStatementInput_(r){var a=r.getLastInput();if(a){var p=a.xPos+a.notchOffset+a.shape.width;a=a.shape.pathRight+hn("h",-(a.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var b=r.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=hn("H",p)+a+hn("v",b)+this.constants_.INSIDE_CORNERS.pathBottom+hn("H",r.xPos+r.width),this.positionStatementInputConnection_(r)}}drawRightSideRow_(r){this.outlinePath_+=hn("V",r.yPos+r.height)}drawBottom_(){const r=this.info_.bottomRow,a=r.elements;this.positionNextConnection_();let p=0,b="";for(let R=a.length-1,W;W=a[R];R--)et.isNextConnection(W)&&W instanceof Ap?b+=W.shape.pathRight:et.isLeftSquareCorner(W)?b+=hn("H",r.xPos):et.isLeftRoundedCorner(W)?b+=this.constants_.OUTSIDE_CORNERS.bottomLeft:et.isRightRoundedCorner(W)?(b+=this.constants_.OUTSIDE_CORNERS.bottomRight,p=this.constants_.OUTSIDE_CORNERS.rightHeight):et.isSpacer(W)&&(b+=hn("h",-1*W.width));this.outlinePath_+=hn("V",r.baseline-p),this.outlinePath_+=b}drawLeft_(){var r=this.info_.outputConnection;if(this.positionOutputConnection_(),r){const a=r.connectionOffsetY+r.height;r=cs(r.shape)?r.shape.pathUp(r.height):r.shape.pathUp,this.outlinePath_+=hn("V",a)+r}this.outlinePath_+="z"}drawInternals_(){for(let r=0,a;a=this.info_.rows[r];r++)for(let p=0,b;b=a.elements[p];p++)et.isInlineInput(b)?this.drawInlineInput_(b):(et.isIcon(b)||et.isField(b))&&this.layoutField_(b)}layoutField_(r){const a=r.centerline-r.height/2;let p=r.xPos;var b="";this.info_.RTL&&(p=-(p+r.width),r.flipRtl&&(p+=r.width,b="scale(-1 1)")),et.isIcon(r)?(b=r.icon,b.setOffsetInBlock(new nn(p,a)),this.info_.isInsertionMarker&&b.hideForInsertionMarker()):(r=r.field.getSvgRoot(),r.setAttribute("transform","translate("+p+","+a+")"+b),this.info_.isInsertionMarker&&r.setAttribute("display","none"))}drawInlineInput_(r){const a=r.width,p=r.height,b=r.connectionOffsetY,R=r.connectionHeight+b;this.inlinePath_+=Ts(r.xPos+r.connectionWidth,r.centerline-p/2)+hn("v",b)+r.shape.pathDown+hn("v",p-R)+hn("h",a-r.connectionWidth)+hn("v",-p)+"z",this.positionInlineInputConnection_(r)}positionInlineInputConnection_(r){const a=r.centerline-r.height/2;if(r.connectionModel){let p=r.xPos+r.connectionWidth+r.connectionOffsetX;this.info_.RTL&&(p*=-1),r.connectionModel.setOffsetInBlock(p,a+r.connectionOffsetY)}}positionStatementInputConnection_(r){const a=r.getLastInput();if(a!=null&&a.connectionModel){let p=r.xPos+r.statementEdge+a.notchOffset;this.info_.RTL&&(p*=-1),a.connectionModel.setOffsetInBlock(p,r.yPos)}}positionExternalValueConnection_(r){const a=r.getLastInput();if(a&&a.connectionModel){let p=r.xPos+r.width;this.info_.RTL&&(p*=-1),a.connectionModel.setOffsetInBlock(p,r.yPos)}}positionPreviousConnection_(){const r=this.info_.topRow;if(r.connection){const a=r.xPos+r.notchOffset;r.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-a:a,0)}}positionNextConnection_(){const r=this.info_.bottomRow;if(r.connection){const a=r.connection,p=a.xPos;a.connectionModel.setOffsetInBlock(this.info_.RTL?-p:p,r.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const r=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-r:r,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const r of this.info_.rows)for(const a of r.elements)if(a instanceof Ap)if(a.highlighted)this.drawConnectionHighlightPath(a);else{let p,b;(b=(p=this.block_.pathObject).removeConnectionHighlight)==null||b.call(p,a.connectionModel)}}drawConnectionHighlightPath(r){const a=r.connectionModel;r=a.type===$n.INPUT_VALUE||a.type===$n.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(r):this.getStatementConnectionHighlightPath(r);const p=a.getSourceBlock();let b,R;(R=(b=p.pathObject).addConnectionHighlight)==null||R.call(b,a,r,a.getOffsetInBlock(),p.RTL)}getExpressionConnectionHighlightPath(r){let a="";return cs(r.shape)?a=r.shape.pathDown(r.height):$a(r.shape)&&(a=r.shape.pathDown),r=this.constants_.TAB_OFFSET_FROM_TOP,oi(0,-r)+hn("v",r)+a+hn("v",r)}getStatementConnectionHighlightPath(r){if(!Gi(r.shape))throw Error("Statement connections should have notch shapes");const a=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return oi(-a,0)+hn("h",a)+r.shape.pathLeft+hn("h",a)}};(function(r){r[r.LEFT=-1]="LEFT",r[r.CENTRE=0]="CENTRE",r[r.RIGHT=1]="RIGHT"})(t.Align$$module$build$src$core$inputs$align||(t.Align$$module$build$src$core$inputs$align={})),t.Align$$module$build$src$core$inputs$align;var ha=class extends ui{constructor(r,a,p){super(ui.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,r!==ui.SKIP_SETUP&&(p?this.configure_(p):this.class=a||null,this.setValue(r))}configure_(r){super.configure_(r),r.class&&(this.class=r.class)}initView(){this.createTextElement_(),this.class&&ke(this.getTextElement(),this.class)}doClassValidation_(r){return r==null?null:`${r}`}setClass(r){this.textElement_&&(this.class&&ft(this.textElement_,this.class),r&&ke(this.textElement_,r)),this.class=r}static fromJson(r){return new this(Cr(r.text),void 0,r)}};Ks("field_label",ha),ha.prototype.DEFAULT_VALUE="";var Na=class{constructor(r,a){this.name=r,this.sourceBlock=a,this.fieldRow=[],this.align=t.Align$$module$build$src$core$inputs$input.LEFT,this.visible=!0,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(r,a){return this.insertFieldAt(this.fieldRow.length,r,a),this}insertFieldAt(r,a,p){if(0>r||r>this.fieldRow.length)throw Error("index "+r+" out of bounds.");return(a||a===""&&p)&&(typeof a=="string"&&(a=t.fromJson$$module$build$src$core$field_registry({type:"field_label",text:a})),a.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(a.init(),a.applyColour()),a.name=p,a.setVisible(this.isVisible()),a.prefixField&&(r=this.insertFieldAt(r,a.prefixField)),this.fieldRow.splice(r,0,a),r++,a.suffixField&&(r=this.insertFieldAt(r,a.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours())),r}removeField(r,a){for(let p=0,b;b=this.fieldRow[p];p++)if(b.name===r)return b.dispose(),this.fieldRow.splice(p,1),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours()),!0;if(a)return!1;throw Error('Field "'+r+'" not found.')}isVisible(){return this.visible}setVisible(r){let a=[];if(this.visible===r)return a;this.visible=r;for(let b=0,R;R=this.fieldRow[b];b++)R.setVisible(r);if(this.connection){var p=this.connection;r?a=p.startTrackingAll():p.stopTrackingAll(),(p=p.targetBlock())&&(p.getSvgRoot().style.display=r?"block":"none")}return a}markDirty(){for(let r=0,a;a=this.fieldRow[r];r++)a.markDirty()}setCheck(r){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(r),this}setAlign(r){return this.align=r,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(r){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(r),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let r=0;r<this.fieldRow.length;r++)this.fieldRow[r].init()}dispose(){for(let r=0,a;a=this.fieldRow[r];r++)a.dispose();this.connection&&this.connection.dispose()}makeConnection(r){return this.sourceBlock.makeConnection_(r)}},cw;(function(r){r=r.Align||(r.Align={}),r[r.LEFT=-1]="LEFT",r[r.CENTRE=0]="CENTRE",r[r.RIGHT=1]="RIGHT"})(Na||(Na={})),t.Align$$module$build$src$core$inputs$input=Na.Align,cw={Align:t.Align$$module$build$src$core$inputs$input},cw.Input=Na;var Zf=class extends Na{constructor(r,a){super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},Xm=class extends Na{constructor(r,a){super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},gd=class extends Na{constructor(r,a){if(!r)throw Error("Statement inputs must have a non-empty name");super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection($n.NEXT_STATEMENT)}},hw;t.ValueInput$$module$build$src$core$inputs$value_input=class extends Na{constructor(r,a){if(!r)throw Error("Value inputs must have a non-empty name");super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection($n.INPUT_VALUE)}},hw={},hw.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input;var x_=class{constructor(r,a){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=r,this.block_=a,this.constants_=this.renderer_.getConstants(),this.outputConnection=a.outputConnection?new lw(this.constants_,a.outputConnection):null,this.isInline=a.getInputsInline()&&!a.isCollapsed(),this.isCollapsed=a.isCollapsed(),this.isInsertionMarker=a.isInsertionMarker(),this.RTL=a.RTL,this.topRow=new NS(this.constants_),this.bottomRow=new zb(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let r=new LS(this.constants_);this.inputRows.push(r);var a=this.block_.getIcons();for(let p=0,b;b=a[p];p++){const R=new sw(this.constants_,b);this.isCollapsed&&!b.isShownWhenCollapsed()||r.elements.push(R)}a=void 0;for(let p=0,b;b=this.block_.inputList[p];p++)if(b.isVisible()){this.shouldStartNewRow_(b,a)&&(this.rows.push(r),r=new LS(this.constants_),this.inputRows.push(r));for(let R=0,W;W=b.fieldRow[R];R++)r.elements.push(new $_(this.constants_,W,b));this.addInput_(b,r),a=b}this.isCollapsed&&(r.hasJaggedEdge=!0,r.elements.push(new ow(this.constants_))),(r.elements.length||r.hasDummyInput)&&this.rows.push(r),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var r=!!this.block_.previousConnection;const a=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!r;let p=this.topRow.hasLeftSquareCorner(this.block_)?$0:E0;this.topRow.elements.push(new p(this.constants_)),a?(r=new kS(this.constants_),this.topRow.elements.push(r),this.topRow.capline=r.ascenderHeight):r&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new uw(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof gd&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,p=this.topRow.hasRightSquareCorner(this.block_)?$0:E0,this.topRow.elements.push(new p(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof gd?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new $0(this.constants_)):this.bottomRow.elements.push(new E0(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new aw(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new $0(this.constants_,"right")):this.bottomRow.elements.push(new E0(this.constants_,"right"))}addInput_(r,a){this.isInline&&r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new OS(this.constants_,r)),a.hasInlineInput=!0):r instanceof gd?(a.elements.push(new Yv(this.constants_,r)),a.hasStatement=!0):r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new Hb(this.constants_,r)),a.hasExternalInput=!0):(r instanceof Zf||r instanceof Xm)&&(a.minHeight=Math.max(a.minHeight,r.getSourceBlock()&&r.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),a.align===null&&(a.align=r.align)}shouldStartNewRow_(r,a){return a?a instanceof Xm||r instanceof gd||a instanceof gd?!0:r instanceof t.ValueInput$$module$build$src$core$inputs$value_input||r instanceof Zf||a instanceof t.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let r=0,a;a=this.rows[r];r++){const p=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new Yd(this.constants_,this.getInRowSpacing_(null,p[0]))),p.length){for(let b=0;b<p.length-1;b++){a.elements.push(p[b]);const R=this.getInRowSpacing_(p[b],p[b+1]);a.elements.push(new Yd(this.constants_,R))}a.elements.push(p[p.length-1]),a.endsWithElemSpacer()&&a.elements.push(new Yd(this.constants_,this.getInRowSpacing_(p[p.length-1],null)))}}}getInRowSpacing_(r,a){if(!r&&a&&et.isStatementInput(a))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(r&&et.isInput(r)&&!a){if(et.isExternalInput(r))return this.constants_.NO_PADDING;if(et.isInlineInput(r))return this.constants_.LARGE_PADDING;if(et.isStatementInput(r))return this.constants_.NO_PADDING}return r&&et.isLeftSquareCorner(r)&&a&&(et.isPreviousConnection(a)||et.isNextConnection(a))?a.notchOffset:r&&et.isLeftRoundedCorner(r)&&a&&(et.isPreviousConnection(a)||et.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let r=0,a=0,p=0;for(let R=0,W;W=this.rows[R];R++){if(W.measure(),a=Math.max(a,W.width),W.hasStatement){var b=W.getLastInput();let pe,De;b=W.width-((De=(pe=b)==null?void 0:pe.width)!=null?De:0),r=Math.max(r,b)}p=Math.max(p,W.widthWithConnectedBlocks)}this.statementEdge=r,this.width=a;for(let R=0,W;W=this.rows[R];R++)W.hasStatement&&(W.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(a,p),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let a=0,p;p=this.rows[a];a++)if(p.hasStatement)this.alignStatementRow_(p);else{var r=p.width;r=this.getDesiredRowWidth_(p)-r,0<r&&this.addAlignmentPadding_(p,r),et.isTopOrBottomRow(p)&&(p.widthWithConnectedBlocks=p.width)}}getDesiredRowWidth_(r){return this.width-this.startX}addAlignmentPadding_(r,a){const p=r.getFirstSpacer(),b=r.getLastSpacer();if((r.hasExternalInput||r.hasStatement)&&(r.widthWithConnectedBlocks+=a),r.align===t.Align$$module$build$src$core$inputs$align.LEFT&&b)b.width+=a;else if(r.align===t.Align$$module$build$src$core$inputs$align.CENTRE&&p&&b)p.width+=a/2,b.width+=a/2;else if(r.align===t.Align$$module$build$src$core$inputs$align.RIGHT&&p)p.width+=a;else if(b)b.width+=a;else return;r.width+=a}alignStatementRow_(r){const a=r.getLastInput();if(a){var p=r.width-a.width,b=this.statementEdge;p=b-p,0<p&&this.addAlignmentPadding_(r,p),p=r.width,b=this.getDesiredRowWidth_(r),a.width+=b-p,a.height=Math.max(a.height,r.height),r.width+=b-p,r.widthWithConnectedBlocks=Math.max(r.width,this.statementEdge+r.connectedBlockWidths)}}addRowSpacing_(){const r=this.rows;this.rows=[];for(let a=0;a<r.length;a++)this.rows.push(r[a]),a!==r.length-1&&this.rows.push(this.makeSpacerRow_(r[a],r[a+1]))}makeSpacerRow_(r,a){var p=this.getSpacerRowHeight_(r,a);const b=this.getSpacerRowWidth_(r,a);return p=new DS(this.constants_,p,b),r.hasStatement&&(p.followsStatement=!0),a.hasStatement&&(p.precedesStatement=!0),p}getSpacerRowWidth_(r,a){return this.width-this.startX}getSpacerRowHeight_(r,a){return this.constants_.MEDIUM_PADDING}getElemCenterline_(r,a){return et.isSpacer(a)?r.yPos+a.height/2:et.isBottomRow(r)?(r=r.yPos+r.height-r.descenderHeight,et.isNextConnection(a)?r+a.height/2:r-a.height/2):et.isTopRow(r)?et.isHat(a)?r.capline-a.height/2:r.capline+a.height/2:r.yPos+r.height/2}recordElemPositions_(r){let a=r.xPos;for(let p=0,b;b=r.elements[p];p++)et.isSpacer(b)&&(b.height=r.height),b.xPos=a,b.centerline=this.getElemCenterline_(r,b),a+=b.width}finalize_(){let r=0,a=0;for(let p=0,b;b=this.rows[p];p++)b.yPos=a,b.xPos=this.startX,a+=b.height,r=Math.max(r,b.widthWithConnectedBlocks),this.recordElemPositions_(b);if(this.outputConnection&&this.block_.nextConnection){const p=this.block_.nextConnection.targetBlock();p&&(r=Math.max(r,p.getHeightWidth().width))}this.widthWithChildren=r+this.startX,this.height=a,this.startY=this.topRow.capline,this.bottomRow.baseline=a-this.bottomRow.descenderHeight}getMeasureableForConnection(r){let a;if(((a=this.outputConnection)==null?void 0:a.connectionModel)===r)return this.outputConnection;for(const p of this.rows)for(const b of p.elements)if(b instanceof Ap&&b.connectionModel===r)return b;return null}},jt=class{constructor(r,a,p){if(this.wsCoordinate=null,!a)throw Error("Cannot create a node without a location.");this.type=r,this.isConnectionLocation=jt.isConnectionType(r),this.location=a,this.processParams(p||null)}processParams(r){r&&r.wsCoordinate&&(this.wsCoordinate=r.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var r=this.location.getParentInput();const a=r.getSourceBlock();for(r=a.inputList.indexOf(r),r+=1;r<a.inputList.length;r++){const p=a.inputList[r],b=p.fieldRow;for(let R=0;R<b.length;R++){const W=b[R];if(W.isClickable()||jt.NAVIGATE_ALL_FIELDS)return jt.createFieldNode(W)}if(p.connection)return jt.createInputNode(p)}return null}findNextForField(){var r=this.location,a=r.getParentInput();const p=r.getSourceBlock();if(!p)throw Error("The current AST location is not associated with a block");var b=p.inputList.indexOf(a);for(r=a.fieldRow.indexOf(r)+1;b<p.inputList.length;b++){a=p.inputList[b];const R=a.fieldRow;for(;r<R.length;){if(R[r].isClickable()||jt.NAVIGATE_ALL_FIELDS)return jt.createFieldNode(R[r]);r++}if(r=0,a.connection)return jt.createInputNode(a)}return null}findPrevForInput(){const r=this.location.getParentInput(),a=r.getSourceBlock();for(var p=a.inputList.indexOf(r);0<=p;p--){var b=a.inputList[p];if(b.connection&&b!==r)return jt.createInputNode(b);b=b.fieldRow;for(let R=b.length-1;0<=R;R--){const W=b[R];if(W.isClickable()||jt.NAVIGATE_ALL_FIELDS)return jt.createFieldNode(W)}}return null}findPrevForField(){var r=this.location;const a=r.getParentInput(),p=r.getSourceBlock();if(!p)throw Error("The current AST location is not associated with a block");var b=p.inputList.indexOf(a);for(r=a.fieldRow.indexOf(r)-1;0<=b;b--){var R=p.inputList[b];if(R.connection&&R!==a)return jt.createInputNode(R);for(R=R.fieldRow;-1<r;){if(R[r].isClickable()||jt.NAVIGATE_ALL_FIELDS)return jt.createFieldNode(R[r]);r--}0<=b-1&&(r=p.inputList[b-1].fieldRow.length-1)}return null}navigateBetweenStacks(r){var a=this.getLocation();if(a.getSourceBlock){var p=a.getSourceBlock();p&&(a=p)}if(!a||a.isDeadOrDying())return null;p=a.getRootBlock(),a=p.workspace.getTopBlocks(!0);for(let b=0;b<a.length;b++)if(p.id===a[b].id)return r=b+(r?1:-1),r===-1||r===a.length?null:jt.createStackNode(a[r]);throw Error("Couldn't find "+(r?"next":"previous")+" stack?!")}findTopASTNodeForBlock(r){const a=xa(r);return a?jt.createConnectionNode(a):jt.createBlockNode(r)}getOutAstNodeForBlock(r){if(!r)return null;r=r.getTopStackBlock();const a=xa(r);return a&&a.targetConnection&&a.targetConnection.getParentInput()?jt.createInputNode(a.targetConnection.getParentInput()):jt.createStackNode(r)}findFirstFieldOrInput(r){r=r.inputList;for(let a=0;a<r.length;a++){const p=r[a],b=p.fieldRow;for(let R=0;R<b.length;R++){const W=b[R];if(W.isClickable()||jt.NAVIGATE_ALL_FIELDS)return jt.createFieldNode(W)}if(p.connection)return jt.createInputNode(p)}return null}getSourceBlock(){return this.getType()===jt.types.BLOCK?this.getLocation():this.getType()===jt.types.STACK?this.getLocation():this.getType()===jt.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case jt.types.STACK:return this.navigateBetweenStacks(!0);case jt.types.OUTPUT:return jt.createBlockNode(this.location.getSourceBlock());case jt.types.FIELD:return this.findNextForField();case jt.types.INPUT:return this.findNextForInput();case jt.types.BLOCK:const r=this.location.nextConnection;if(!r)break;return jt.createConnectionNode(r);case jt.types.PREVIOUS:return jt.createBlockNode(this.location.getSourceBlock());case jt.types.NEXT:return jt.createConnectionNode(this.location.targetConnection)}return null}in(){switch(this.type){case jt.types.WORKSPACE:const r=this.location.getTopBlocks(!0);if(0<r.length)return jt.createStackNode(r[0]);break;case jt.types.STACK:return this.findTopASTNodeForBlock(this.location);case jt.types.BLOCK:return this.findFirstFieldOrInput(this.location);case jt.types.INPUT:return jt.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case jt.types.STACK:return this.navigateBetweenStacks(!1);case jt.types.FIELD:return this.findPrevForField();case jt.types.INPUT:return this.findPrevForInput();case jt.types.BLOCK:var r=xa(this.location);if(!r)break;return jt.createConnectionNode(r);case jt.types.PREVIOUS:if((r=this.location.targetConnection)&&!r.getParentInput())return jt.createConnectionNode(r);break;case jt.types.NEXT:return jt.createBlockNode(this.location.getSourceBlock())}return null}out(){switch(this.type){case jt.types.STACK:var r=this.location,a=r.getRelativeToSurfaceXY();return a=new nn(a.x,a.y+jt.DEFAULT_OFFSET_Y),jt.createWorkspaceNode(r.workspace,a);case jt.types.OUTPUT:return r=this.location,(a=r.targetConnection)?jt.createConnectionNode(a):jt.createStackNode(r.getSourceBlock());case jt.types.FIELD:if(r=this.location.getSourceBlock(),!r)throw Error("The current AST location is not associated with a block");return jt.createBlockNode(r);case jt.types.INPUT:return jt.createBlockNode(this.location.getSourceBlock());case jt.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case jt.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case jt.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(r){switch(r){case jt.types.PREVIOUS:case jt.types.NEXT:case jt.types.INPUT:case jt.types.OUTPUT:return!0}return!1}static createFieldNode(r){return r?new jt(jt.types.FIELD,r):null}static createConnectionNode(r){if(!r)return null;const a=r.type;return a===$n.INPUT_VALUE||a===$n.NEXT_STATEMENT&&r.getParentInput()?jt.createInputNode(r.getParentInput()):a===$n.NEXT_STATEMENT?new jt(jt.types.NEXT,r):a===$n.OUTPUT_VALUE?new jt(jt.types.OUTPUT,r):a===$n.PREVIOUS_STATEMENT?new jt(jt.types.PREVIOUS,r):null}static createInputNode(r){return r&&r.connection?new jt(jt.types.INPUT,r.connection):null}static createBlockNode(r){return r?new jt(jt.types.BLOCK,r):null}static createStackNode(r){return r?new jt(jt.types.STACK,r):null}static createWorkspaceNode(r,a){return a&&r?new jt(jt.types.WORKSPACE,r,{wsCoordinate:a}):null}static createTopNode(r){const a=xa(r);return a?jt.createConnectionNode(a):jt.createBlockNode(r)}};jt.NAVIGATE_ALL_FIELDS=!1,jt.DEFAULT_OFFSET_Y=-20,function(r){r=r.types||(r.types={}),r.FIELD="field",r.BLOCK="block",r.INPUT="input",r.OUTPUT="output",r.NEXT="next",r.PREVIOUS="previous",r.STACK="stack",r.WORKSPACE="workspace"}(jt||(jt={}));var Gb=class extends f{constructor(r,a,p,b){let R=r?r.workspace.id:void 0;b&&b.getType()===jt.types.WORKSPACE&&(R=b.getLocation().id),super(R),this.type=Al,this.blockId=r==null?void 0:r.id,this.oldNode=p||void 0,this.newNode=b,this.isCursor=a}toJson(){const r=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return r.isCursor=this.isCursor,r.blockId=this.blockId,r.oldNode=this.oldNode,r.newNode=this.newNode,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new Gb),a.isCursor=r.isCursor,a.blockId=r.blockId,a.oldNode=r.oldNode,a.newNode=r.newNode,a}};i(Bt.EVENT,Al,Gb);var XR="blocklyCursor",YR="blocklyMarker",KR=.75,Wb=class{constructor(r,a,p){this.workspace=r,this.marker=p,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=a,r=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=p.colour||r}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const r=this.isCursor()?XR:YR;return this.svgGroup_=te(Pe.G,{class:r}),this.createDomInternal_(),this.svgGroup_}setParent_(r){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),r.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),r.setMarkerSvg(this.getSvgRoot())),this.parent=r}draw(r,a){if(a){this.constants_=this.workspace.getRenderer().getConstants();var p=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||p,this.applyColour_(a),this.showAtLocation_(a),this.fireMarkerEvent(r,a),r=this.currentMarkerSvg.childNodes[0],r!==void 0&&r.beginElement&&r.beginElement()}else this.hide()}showAtLocation_(r){const a=r.getLocation().type;r.getType()===jt.types.BLOCK?this.showWithBlock_(r):r.getType()===jt.types.OUTPUT?this.showWithOutput_(r):a===$n.INPUT_VALUE?this.showWithInput_(r):a===$n.NEXT_STATEMENT?this.showWithNext_(r):r.getType()===jt.types.PREVIOUS?this.showWithPrevious_(r):r.getType()===jt.types.FIELD?this.showWithField_(r):r.getType()===jt.types.WORKSPACE?this.showWithCoordinates_(r):r.getType()===jt.types.STACK&&this.showWithStack_(r)}showWithBlockPrevOutput(r){r=r.getSourceBlock();const a=r.width;var p=r.height,b=p*KR;const R=this.constants_.CURSOR_BLOCK_PADDING;r.previousConnection?(p=this.constants_.shapeFor(r.previousConnection),this.positionPrevious_(a,R,b,p)):r.outputConnection?(b=this.constants_.shapeFor(r.outputConnection),this.positionOutput_(a,p,b)):this.positionBlock_(a,R,b),this.setParent_(r),this.showCurrent_()}showWithBlock_(r){this.showWithBlockPrevOutput(r)}showWithPrevious_(r){this.showWithBlockPrevOutput(r)}showWithOutput_(r){this.showWithBlockPrevOutput(r)}showWithCoordinates_(r){var a=r.getWsCoordinate();r=a.x,a=a.y,this.workspace.RTL&&(r-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(r,a,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(r){r=r.getLocation();const a=r.getSize().width,p=r.getSize().height;this.positionRect_(0,0,a,p),this.setParent_(r),this.showCurrent_()}showWithInput_(r){r=r.getLocation();const a=r.getSourceBlock();this.positionInput_(r),this.setParent_(a),this.showCurrent_()}showWithNext_(r){var a=r.getLocation();r=a.getSourceBlock();let p=0;a=a.getOffsetInBlock().y;const b=r.getHeightWidth().width;this.workspace.RTL&&(p=-b),this.positionLine_(p,a,b),this.setParent_(r),this.showCurrent_()}showWithStack_(r){r=r.getLocation();var a=r.getHeightWidth();const p=a.width+this.constants_.CURSOR_STACK_PADDING;a=a.height+this.constants_.CURSOR_STACK_PADDING;const b=-this.constants_.CURSOR_STACK_PADDING/2,R=-this.constants_.CURSOR_STACK_PADDING/2;let W=b;this.workspace.RTL&&(W=-(p+b)),this.positionRect_(W,R,p,a),this.setParent_(r),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(r,a,p){if(r=oi(-a,p)+hn("V",-a)+hn("H",r+2*a)+hn("V",p),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",r),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(r){const a=r.getOffsetInBlock().x,p=r.getOffsetInBlock().y;r=Ts(0,0)+this.constants_.shapeFor(r).pathDown,this.markerInput_.setAttribute("d",r),this.markerInput_.setAttribute("transform","translate("+a+","+p+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(r,a,p){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${r}`),this.markerSvgLine_.setAttribute("y",`${a}`),this.markerSvgLine_.setAttribute("width",`${p}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(r,a,p){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");r=oi(r,0)+hn("h",-(r-p.width))+hn("v",this.constants_.TAB_OFFSET_FROM_TOP)+p.pathDown+hn("V",a)+hn("H",r),this.markerBlock_.setAttribute("d",r),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(r,a,p,b){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");r=oi(-a,p)+hn("V",-a)+hn("H",this.constants_.NOTCH_OFFSET_LEFT)+b.pathLeft+hn("H",r+2*a)+hn("V",p),this.markerBlock_.setAttribute("d",r),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(r,a,p,b){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${r}`),this.markerSvgRect_.setAttribute("y",`${a}`),this.markerSvgRect_.setAttribute("width",`${p}`),this.markerSvgRect_.setAttribute("height",`${b}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(r){r.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(r,a){const p=a.getSourceBlock();r=new(we(Al))(p,this.isCursor(),r,a),ce(r)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=te(Pe.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=te(Pe.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=te(Pe.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=te(Pe.PATH,{transform:""},this.markerSvg_),this.markerBlock_=te(Pe.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const r=this.getBlinkProperties_();te(Pe.ANIMATE,r,this.markerSvgLine_),te(Pe.ANIMATE,r,this.markerInput_),te(Pe.ANIMATE,Object.assign({},r,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(r){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(r=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",r),this.markerInput_.firstElementChild.setAttribute("values",r),this.markerBlock_.firstElementChild.setAttribute("values",r))}dispose(){this.svgGroup_&&at(this.svgGroup_)}},Qv=class{constructor(r,a,p){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=p,this.style=a,this.svgRoot=r,this.svgPath=te(Pe.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(r){this.svgPath.setAttribute("d",r)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(r){r?(this.svgRoot.appendChild(r),this.cursorSvg=r):this.cursorSvg=null}setMarkerSvg(r){r?(this.cursorSvg?this.svgRoot.insertBefore(r,this.cursorSvg):this.svgRoot.appendChild(r),this.markerSvg=r):this.markerSvg=null}applyColour(r){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(r.isShadow()),this.updateDisabled_(!r.isEnabled()||r.getInheritedDisabled())}setStyle(r){this.style=r}setClass_(r,a){r&&(a?ke(this.svgRoot,r):ft(this.svgRoot,r))}updateHighlighted(r){r?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(r){r&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(r){this.setClass_("blocklyDisabled",r),r&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(r){this.setClass_("blocklySelected",r)}updateDraggingDelete(r){this.setClass_("blocklyDraggingDelete",r)}updateInsertionMarker(r){this.setClass_("blocklyInsertionMarker",r)}updateMovable(r){this.setClass_("blocklyDraggable",r)}updateReplacementFade(r){this.setClass_("blocklyReplaceable",r)}updateShapeForInputHighlight(r,a){}addConnectionHighlight(r,a,p,b){if(this.connectionHighlights.has(r)){if(this.currentHighlightMatchesNew(r,a,p))return;this.removeConnectionHighlight(r)}a=te(Pe.PATH,{class:"blocklyHighlightedConnectionPath",d:a,transform:`translate(${p.x}, ${p.y})`+(b?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(r,a)}currentHighlightMatchesNew(r,a,p){let b;const R=(b=this.connectionHighlights.get(r))==null?void 0:b.getAttribute("d");return r=this.highlightOffsets.get(r),R===a&&nn.equals(r,p)}removeConnectionHighlight(r){const a=this.connectionHighlights.get(r);a&&(at(a),this.connectionHighlights.delete(r))}},Ni=class{constructor(r,a){this.type=a,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=r}connect_(r){const a=$n.INPUT_VALUE,p=this.getSourceBlock();var b=r.getSourceBlock();r.isConnected()&&r.disconnectInternal(!1);let R;if(this.isConnected()){const pe=this.stashShadowState(),De=this.targetBlock();De.isShadow()?De.dispose(!1):(this.disconnectInternal(),R=De),this.applyShadowState(pe)}let W;ne()&&(W=new(we(t.MOVE$$module$build$src$core$events$utils))(b),W.setReason(["connect"])),wu(this,r),b.setParent(p),W&&(W.recordNew(),ce(W)),R&&(r=this.type===a?R.outputConnection:R.previousConnection)&&((b=Ni.getConnectionForOrphanedConnection(b,r))?r.connect(b):r.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal();const r=this.targetBlock();r&&!r.isDeadOrDying()&&r.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===$n.INPUT_VALUE||this.type===$n.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(r){}connect(r){if(this.targetConnection===r)return!0;if(this.getConnectionChecker().canConnect(this,r,!1)){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(r):r.connect_(this),t.setGroup$$module$build$src$core$events$utils(a)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(r=!0){const{parentConnection:a,childConnection:p}=this.getParentAndChildConnections();if(!a||!p)throw Error("Source connection not connected.");const b=t.getGroup$$module$build$src$core$events$utils();b||t.setGroup$$module$build$src$core$events$utils(!0);let R;ne()&&(R=new(we(t.MOVE$$module$build$src$core$events$utils))(p.getSourceBlock()),R.setReason(["disconnect"]));const W=this.targetConnection;W&&(W.targetConnection=null),this.targetConnection=null,r&&p.getSourceBlock().setParent(null),R&&(R.recordNew(),ce(R)),p.getSourceBlock().isShadow()||a.respawnShadow_(),t.setGroup$$module$build$src$core$events$utils(b)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(r,a){if(this.getSourceBlock().isDeadOrDying())return!1;var p;return a=(p=r.getInput(a))==null?void 0:p.connection,p=this.targetBlock(),p&&p!==r||!a||a.targetConnection===this?!1:(a.isConnected()&&a.disconnect(),a.connect(this),!0)}targetBlock(){if(this.isConnected()){let r,a;return(a=(r=this.targetConnection)==null?void 0:r.getSourceBlock())!=null?a:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(r){return r?(Array.isArray(r)||(r=[r]),this.check=r,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(r){this.setShadowStateInternal({shadowDom:r})}getShadowDom(r){return r&&this.targetBlock().isShadow()?_a(this.targetBlock()):this.shadowDom}setShadowState(r){this.setShadowStateInternal({shadowState:r})}getShadowState(r){return r&&this.targetBlock()&&this.targetBlock().isShadow()?ri(this.targetBlock()):this.shadowState}neighbours(r){return[]}getParentInput(){let r=null;const a=this.sourceBlock_.inputList;for(let p=0;p<a.length;p++)if(a[p].connection===this){r=a[p];break}return r}toString(){const r=this.sourceBlock_;if(!r)return"Orphan Connection";if(r.outputConnection===this)var a="Output Connection of ";else if(r.previousConnection===this)a="Previous Connection of ";else if(r.nextConnection===this)a="Next Connection of ";else{a=null;for(let p=0,b;b=r.inputList[p];p++)if(b.connection===this){a=b;break}if(a)a='Input "'+a.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return a+r.toDevString()}stashShadowState(){const r=this.getShadowDom(!0),a=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:r,shadowState:a}}applyShadowState({shadowDom:r,shadowState:a}){this.shadowDom=r,this.shadowState=a}setShadowStateInternal({shadowDom:r=null,shadowState:a=null}={}){this.shadowDom=r,this.shadowState=a,(r=this.targetBlock())?r.isShadow()?(r.dispose(!1),this.getSourceBlock().isDeadOrDying()||(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))):(r=this.createShadowBlock(!1),this.serializeShadow(r),r&&r.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))}createShadowBlock(r){var a=this.getSourceBlock();const p=this.getShadowState(),b=this.getShadowDom();if(a.isDeadOrDying()||!p&&!b)return null;if(p)return a=Qr(p,a.workspace,{parentConnection:r?this:void 0,isShadow:!0,recordUndo:!1});if(b){if(a=Ls(b,a.workspace),r)if(this.type===$n.INPUT_VALUE){if(!a.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(a.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===$n.NEXT_STATEMENT){if(!a.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(a.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return a}return null}serializeShadow(r){r&&(this.shadowDom=_a(r),this.shadowState=ri(r))}static getConnectionForOrphanedConnection(r,a){if(a.type===$n.OUTPUT_VALUE)return rc(r,a.getSourceBlock());r=r.lastConnectionInStack(!0);const p=a.getConnectionChecker();return r&&p.canConnect(a,r,!1)?r:null}};Ni.CAN_CONNECT=0,Ni.REASON_SELF_CONNECTION=1,Ni.REASON_WRONG_TYPE=2,Ni.REASON_TARGET_NULL=3,Ni.REASON_CHECKS_FAILED=4,Ni.REASON_DIFFERENT_WORKSPACES=5,Ni.REASON_SHADOW_PARENT=6,Ni.REASON_DRAG_CHECKS_FAILED=7,Ni.REASON_PREVIOUS_AND_OUTPUT=8;var x0="_TEMP_COLLAPSED_INPUT",Vb="_TEMP_COLLAPSED_FIELD",JR={COLLAPSED_FIELD_NAME:Vb,COLLAPSED_INPUT_NAME:x0},w0="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Ip=class{constructor(r){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,D(r),this.topBlock=r,this.workspace=r.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){t.disable$$module$build$src$core$events$utils(),this.hidePreview(),t.enable$$module$build$src$core$events$utils();var{local:r,closest:a}=this.activeCandidate;if(r.connect(a),this.topBlock.rendered){const p=r.isSuperior()?a:r,b=this.topBlock.getRootBlock();rr().then(()=>{Bo(p.getSourceBlock()),setTimeout(()=>{b.bringToFront()},0)})}}}update(r,a){const p=this.getCandidate(r);((this.wouldDeleteBlock=this.shouldDelete(!!p,a))||this.shouldUpdatePreviews(p,r))&&(t.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(p),this.maybeShowPreview(p),t.enable$$module$build$src$core$events$utils())}createMarkerBlock(r){var a=r.type;t.disable$$module$build$src$core$events$utils();let p;try{if(p=this.workspace.newBlock(a),p.setInsertionMarker(!0),r.saveExtraState){var b=r.saveExtraState(!0);b&&p.loadExtraState&&p.loadExtraState(b)}else if(r.mutationToDom){const R=r.mutationToDom();R&&p.domToMutation&&p.domToMutation(R)}for(a=0;a<r.inputList.length;a++){const R=r.inputList[a];if(R.name===x0)continue;const W=p.inputList[a];if(!W)throw Error(w0.replace("%1","an input"));for(b=0;b<R.fieldRow.length;b++){const pe=R.fieldRow[b],De=W.fieldRow[b];if(!De)throw Error(w0.replace("%1","a field"));De.setValue(pe.getValue())}}for(const R of p.getDescendants(!1))R.setInsertionMarker(!0);p.setCollapsed(r.isCollapsed()),p.setInputsInline(r.getInputsInline()),p.initSvg(),p.getSvgRoot().setAttribute("visibility","hidden")}finally{t.enable$$module$build$src$core$events$utils()}return p}initAvailableConnections(){const r=this.topBlock.getConnections_(!1),a=this.topBlock.lastConnectionInStack(!0);return a&&a!==this.topBlock.nextConnection&&(r.push(a),this.lastOnStack=a),r}shouldUpdatePreviews(r,a){if(!r)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:p,closest:b}=this.activeCandidate;if(b===r.closest&&p===r.local)return!1;const R=p.x+a.x-b.x;return a=p.y+a.y-b.y,r.radius<Math.sqrt(R*R+a*a)-t.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(r){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let a=this.getStartRadius(),p=null;for(let b=0;b<this.availableConnections.length;b++){const R=this.availableConnections[b],W=R.closest(a,r);W.connection&&(p={closest:W.connection,local:R,radius:W.radius},a=W.radius)}return p}getStartRadius(){return this.activeCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius}shouldDelete(r,a){return a&&this.workspace.getComponentManager().hasCapability(a.id,Ia.Capability.DELETE_AREA)?a.wouldDelete(this.topBlock,r):!1}maybeShowPreview(r){if(!this.wouldDeleteBlock&&r){var a=r.closest,p;a===((p=this.activeCandidate)==null?void 0:p.closest)||a.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=r,this.showPreview(this.activeCandidate))}}showPreview(r){const a=this.workspace.getRenderer();switch(a.getConnectionPreviewMethod(r.closest,r.local,this.topBlock)){case Ip.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(r);break;case Ip.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(r);break;case Ip.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(r)}a.shouldHighlightConnection(r.closest)&&r.closest.highlight()}maybeHidePreview(r){if(!r)this.hidePreview();else if(this.activeCandidate){const a=this.activeCandidate.local!==r.local;(this.activeCandidate.closest!==r.closest||a||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let r;const a=(r=this.activeCandidate)==null?void 0:r.closest;a&&a.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(a)&&a.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(r){const{local:a,closest:p}=r;let b=(r=this.lastOnStack&&a===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!b)throw Error("Cannot show the insertion marker because there is no insertion marker block");let R;try{R=b.getMatchingConnection(a.getSourceBlock(),a)}catch{if(r&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),b=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),b=this.firstMarker=this.createMarkerBlock(this.topBlock)),!b)throw Error("Cannot show the insertion marker because there is no insertion marker block");R=b.getMatchingConnection(a.getSourceBlock(),a)}if(!R)throw Error("Cannot show the insertion marker because there is no associated connection");if(R===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");b.queueRender(),Ui(),R.connect(p);const W={x:p.x-R.x,y:p.y-R.y},pe=R.getOffsetInBlock().clone(),De=R;rr().then(()=>{let Pt;(Pt=b)==null||Pt.positionNearConnection(De,W,pe);let xn;(xn=b)==null||xn.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=R}hideInsertionMarker(){if(this.markerConnection){var r=this.markerConnection,a=r.getSourceBlock(),p=a.outputConnection,b;if((b=a.previousConnection)!=null&&b.targetConnection||p!=null&&p.targetConnection)a.unplug(!0);else{let R;(R=r.targetBlock())==null||R.unplug(!1)}if(r.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(r=a.getSvgRoot())&&r.setAttribute("visibility","hidden")}}showInsertionInputOutline(r){r=r.closest,this.highlightedBlock=r.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(r,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(r){if(this.fadedBlock=r.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const r=[];return this.firstMarker&&r.push(this.firstMarker),this.lastMarker&&r.push(this.lastMarker),r}disposeInsertionMarker(r){if(r){t.disable$$module$build$src$core$events$utils();try{r.dispose()}finally{t.enable$$module$build$src$core$events$utils()}}}};(function(r){r=r.PREVIEW_TYPE||(r.PREVIEW_TYPE={}),r[r.INSERTION_MARKER=0]="INSERTION_MARKER",r[r.INPUT_OUTLINE=1]="INPUT_OUTLINE",r[r.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Ip||(Ip={})),Ip.PREVIEW_TYPE;var qv=class{constructor(r){this.overrides=null,this.name=r}getClassName(){return this.name+"-renderer"}init(r,a){this.constants_=this.makeConstants_(),a&&(this.overrides=a,Object.assign(this.constants_,a)),this.constants_.setTheme(r),this.constants_.init()}createDom(r,a){this.constants_.createDom(r,this.name+"-"+a.name,"."+this.getClassName()+"."+a.getClassName())}refreshDom(r,a){const p=this.getConstants();p.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=p.randomIdentifier,this.constants_.setTheme(a),this.constants_.init(),this.createDom(r,a)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new Kv}makeRenderInfo_(r){return new x_(this,r)}makeDrawer_(r,a){return new Jv(r,a)}makeMarkerDrawer(r,a){return new Wb(r,this.getConstants(),a)}makePathObject(r,a){return new Qv(r,a,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(r){return!0}orphanCanConnectAtEnd(r,a,p){return!!Ni.getConnectionForOrphanedConnection(r,p===$n.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}getConnectionPreviewMethod(r,a,p){return Te("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===$n.OUTPUT_VALUE||a.type===$n.PREVIOUS_STATEMENT?!r.isConnected()||this.orphanCanConnectAtEnd(p,r.targetBlock(),a.type)?Ip.PREVIEW_TYPE.INSERTION_MARKER:Ip.PREVIEW_TYPE.REPLACEMENT_FADE:Ip.PREVIEW_TYPE.INSERTION_MARKER}render(r){const a=this.makeRenderInfo_(r);a.measure(),this.makeDrawer_(r,a).draw()}},ss={};ss.BottomRow=zb,ss.Connection=Ap,ss.ConstantProvider=Kv,ss.Drawer=Jv,ss.ExternalValueInput=Hb,ss.Field=$_,ss.Hat=kS,ss.Icon=sw,ss.InRowSpacer=Yd,ss.InlineInput=OS,ss.InputConnection=Lg,ss.InputRow=LS,ss.JaggedEdge=ow,ss.MarkerSvg=Wb,ss.Measurable=ti,ss.NextConnection=aw,ss.OutputConnection=lw,ss.PathObject=Qv,ss.PreviousConnection=uw,ss.RenderInfo=x_,ss.Renderer=qv,ss.RoundCorner=E0,ss.Row=Xv,ss.SpacerRow=DS,ss.SquareCorner=$0,ss.StatementInput=Yv,ss.TopRow=NS,ss.Types=et,ss.init=qc,ss.register=Js,ss.unregister=zd;var dw=class{constructor(r,a){this.workspace=r,this.theme=a,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(r){var a=this.theme;this.theme=r,(r=this.workspace.getInjectionDiv())&&(a&&(a=a.getClassName())&&ft(r,a),(a=this.theme.getClassName())&&ke(r,a));for(let p=0,b;b=this.subscribedWorkspaces_[p];p++)b.refreshTheme();for(const[p,b]of this.componentDB)for(const R of b){r=R.element,a=R.propertyName;const W=this.theme&&this.theme.getComponentStyle(p);r.style.setProperty(a,W||"")}for(const p of this.subscribedWorkspaces_)p.hideChaff()}subscribeWorkspace(r){this.subscribedWorkspaces_.push(r)}unsubscribeWorkspace(r){if(!wt(this.subscribedWorkspaces_,r))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(r,a,p){this.componentDB.has(a)||this.componentDB.set(a,[]),this.componentDB.get(a).push({element:r,propertyName:p}),a=this.theme&&this.theme.getComponentStyle(a),r.style.setProperty(p,a||"")}unsubscribe(r){if(r)for(const[a,p]of this.componentDB){for(let b=p.length-1;0<=b;b--)p[b].element===r&&p.splice(b,1);p.length||this.componentDB.delete(a)}}dispose(){this.subscribedWorkspaces_.length=0,this.componentDB.clear()}},BS="VARIABLE_DYNAMIC",Dg={CATEGORY_NAME:BS};Dg.flyoutCategory=Kp,Dg.flyoutCategoryBlocks=Yl,Dg.onCreateVariableButtonClick_Colour=Cl,Dg.onCreateVariableButtonClick_Number=wa,Dg.onCreateVariableButtonClick_String=id;var PS=class{canConnect(r,a,p,b){return this.canConnectWithReason(r,a,p,b)===Ni.CAN_CONNECT}canConnectWithReason(r,a,p,b){const R=this.doSafetyChecks(r,a);return R!==Ni.CAN_CONNECT?R:this.doTypeChecks(r,a)?p&&!this.doDragChecks(r,a,b||0)?Ni.REASON_DRAG_CHECKS_FAILED:Ni.CAN_CONNECT:Ni.REASON_CHECKS_FAILED}getErrorMessage(r,a,p){switch(r){case Ni.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Ni.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Ni.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Ni.REASON_TARGET_NULL:return"Target connection is null.";case Ni.REASON_CHECKS_FAILED:return"Connection checks failed. "+(a+" expected "+a.getCheck()+", found "+p.getCheck());case Ni.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Ni.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Ni.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(r,a){if(!r||!a)return Ni.REASON_TARGET_NULL;let p,b,R;return r.isSuperior()?(p=r.getSourceBlock(),b=a.getSourceBlock(),R=a):(b=r.getSourceBlock(),p=a.getSourceBlock(),R=r,r=a),p===b?Ni.REASON_SELF_CONNECTION:R.type!==Xt[r.type]?Ni.REASON_WRONG_TYPE:p.workspace!==b.workspace?Ni.REASON_DIFFERENT_WORKSPACES:p.isShadow()&&!b.isShadow()?Ni.REASON_SHADOW_PARENT:R.type===$n.OUTPUT_VALUE&&b.previousConnection&&b.previousConnection.isConnected()||R.type===$n.PREVIOUS_STATEMENT&&b.outputConnection&&b.outputConnection.isConnected()?Ni.REASON_PREVIOUS_AND_OUTPUT:Ni.CAN_CONNECT}doTypeChecks(r,a){if(r=r.getCheck(),a=a.getCheck(),!r||!a)return!0;for(let p=0;p<r.length;p++)if(a.indexOf(r[p])!==-1)return!0;return!1}doDragChecks(r,a,p){if(r.distanceFrom(a)>p||a.getSourceBlock().isInsertionMarker())return!1;switch(a.type){case $n.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(r,a);case $n.OUTPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isInsertionMarker()||r.isConnected())return!1;break;case $n.INPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;case $n.NEXT_STATEMENT:if(a.isConnected()&&!r.getSourceBlock().nextConnection&&!a.targetBlock().isShadow()&&a.targetBlock().nextConnection||a.targetBlock()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;default:return!1}return $s.indexOf(a)===-1}canConnectToPrevious_(r,a){return r.targetConnection||$s.indexOf(a)!==-1?!1:a.targetConnection?(r=a.targetBlock(),r.isInsertionMarker()?!r.getPreviousBlock():!1):!0}};i(Bt.CONNECTION_CHECKER,Ja,PS);var FS=class extends Sp{constructor(r){super(r),this.type=Du,r&&(this.varType=r.type,this.varName=r.name)}toJson(){const r=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return r.varType=this.varType,r.varName=this.varName,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new FS),a.varType=r.varType,a.varName=r.varName,a}run(r){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");r?a.deleteVariableById(this.varId):a.createVariable(this.varName,this.varType,this.varId)}};i(Bt.EVENT,Du,FS);var US=class extends Sp{constructor(r,a){super(r),this.type=oh,r&&(this.oldName=r.name,this.newName=typeof a>"u"?"":a)}toJson(){const r=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return r.oldName=this.oldName,r.newName=this.newName,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new US),a.oldName=r.oldName,a.newName=r.newName,a}run(r){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");r?a.renameVariableById(this.varId,this.newName):a.renameVariableById(this.varId,this.oldName)}};i(Bt.EVENT,oh,US);var zS=class{constructor(r){this.workspace=r,this.variableMap=new Map}clear(){for(const r of this.variableMap.values())for(;0<r.length;)this.deleteVariable(r[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(r,a){if(r.name!==a){var p=this.getVariable(a,r.type),b=this.workspace.getAllBlocks(!1),R=t.getGroup$$module$build$src$core$events$utils();R||t.setGroup$$module$build$src$core$events$utils(!0);try{p&&p.getId()!==r.getId()?this.renameVariableWithConflict_(r,a,p,b):this.renameVariableAndUses_(r,a,b)}finally{t.setGroup$$module$build$src$core$events$utils(R)}}}renameVariableById(r,a){const p=this.getVariableById(r);if(!p)throw Error("Tried to rename a variable that didn't exist. ID: "+r);this.renameVariable(p,a)}renameVariableAndUses_(r,a,p){for(ce(new(we(oh))(r,a)),r.name=a,a=0;a<p.length;a++)p[a].updateVarName(r)}renameVariableWithConflict_(r,a,p,b){const R=r.type;for(a!==p.name&&this.renameVariableAndUses_(p,a,b),a=0;a<b.length;a++)b[a].renameVarById(r.getId(),p.getId());ce(new(we(Du))(r)),wt(this.variableMap.get(R),r)}createVariable(r,a,p){var b=this.getVariable(r,a);if(b){if(p&&b.getId()!==p)throw Error('Variable "'+r+'" is already in use and its id is "'+b.getId()+'" which conflicts with the passed in id, "'+p+'".');return b}if(p&&this.getVariableById(p))throw Error('Variable id, "'+p+'", is already in use.');return b=p||ie(),a=a||"",b=new ef(this.workspace,r,a,b),r=this.variableMap.get(a)||[],r.push(b),this.variableMap.delete(a),this.variableMap.set(a,r),ce(new(we(Qa))(b)),b}deleteVariable(r){const a=r.getId(),p=this.variableMap.get(r.type);if(p){for(let b=0;b<p.length;b++)if(p[b].getId()===a){p.splice(b,1),ce(new(we(Du))(r)),p.length===0&&this.variableMap.delete(r.type);break}}}deleteVariableById(r){const a=this.getVariableById(r);if(a){var p=a.name;const b=this.getVariableUsesById(r);for(let R=0,W;W=b[R];R++)if(W.type==="procedures_defnoreturn"||W.type==="procedures_defreturn"){r=String(W.getFieldValue("NAME")),p=t.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",p).replace("%2",r),Oo(p);return}1<b.length?(p=t.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(b.length)).replace("%2",p),Kt(p,R=>{R&&a&&this.deleteVariableInternal(a,b)})):this.deleteVariableInternal(a,b)}else console.warn("Can't delete non-existent variable: "+r)}deleteVariableInternal(r,a){const p=t.getGroup$$module$build$src$core$events$utils();p||t.setGroup$$module$build$src$core$events$utils(!0);try{for(let b=0;b<a.length;b++)a[b].dispose(!0);this.deleteVariable(r)}finally{t.setGroup$$module$build$src$core$events$utils(p)}}getVariable(r,a){if(a=this.variableMap.get(a||"")){for(let p=0,b;b=a[p];p++)if(t.Names$$module$build$src$core$names.equals(b.name,r))return b}return null}getVariableById(r){for(const a of this.variableMap.values())for(const p of a)if(p.getId()===r)return p;return null}getVariablesOfType(r){return(r=this.variableMap.get(r||""))?r.slice():[]}getVariableTypes(r){const a=new Set(this.variableMap.keys());if(r&&r.getPotentialVariableMap())for(const p of r.getPotentialVariableMap().variableMap.keys())a.add(p);return a.has("")||a.add(""),Array.from(a.values())}getAllVariables(){let r=[];for(const a of this.variableMap.values())r=r.concat(a);return r}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(r=>r.name)}getVariableUsesById(r){const a=[],p=this.workspace.getAllBlocks(!1);for(let b=0;b<p.length;b++){const R=p[b].getVarModels();if(R)for(let W=0;W<R.length;W++)R[W].getId()===r&&a.push(p[b])}return a}},Zv=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(r){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Nb,this.potentialVariableMap=null,this.id=ie(),x(this),this.options=r||new Ho({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(_(Bt.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new zS(this)}dispose(){this.listeners.length=0,this.clear(),w(this)}sortObjects_(r,a){const p=Math.sin(Ec(Zv.SCAN_ANGLE))*(this.RTL?-1:1);return r=r.getRelativeToSurfaceXY(),a=a.getRelativeToSurfaceXY(),r.y+p*r.x-(a.y+p*a.x)}addTopBlock(r){this.topBlocks.push(r)}removeTopBlock(r){if(!wt(this.topBlocks,r))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(r=!1){const a=[].concat(this.topBlocks);return r&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}addTypedBlock(r){this.typedBlocksDB.has(r.type)||this.typedBlocksDB.set(r.type,[]),this.typedBlocksDB.get(r.type).push(r)}removeTypedBlock(r){wt(this.typedBlocksDB.get(r.type),r),this.typedBlocksDB.get(r.type).length||this.typedBlocksDB.delete(r.type)}getBlocksByType(r,a=!1){return this.typedBlocksDB.has(r)?(r=this.typedBlocksDB.get(r).slice(0),a&&r&&1<r.length&&r.sort(this.sortObjects_.bind(this)),r.filter(function(p){return!p.isInsertionMarker()})):[]}addTopComment(r){this.topComments.push(r),this.commentDB.has(r.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+r.id+'"'),this.commentDB.set(r.id,r)}removeTopComment(r){if(!wt(this.topComments,r))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(r.id)}getTopComments(r=!1){const a=[].concat(this.topComments);return r&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}getAllBlocks(r=!1){if(r){var a=this.getTopBlocks(!0);r=[];for(let p=0;p<a.length;p++)r.push(...a[p].getDescendants(!0))}else for(r=this.getTopBlocks(!1),a=0;a<r.length;a++)r.push(...r[a].getChildren(!1));return r.filter(function(p){return!p.isInsertionMarker()})}clear(){this.isClearing=!0;try{const r=t.getGroup$$module$build$src$core$events$utils();for(r||t.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();t.setGroup$$module$build$src$core$events$utils(r),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(r,a){this.variableMap.renameVariableById(r,a)}createVariable(r,a,p){return this.variableMap.createVariable(r,a,p)}getVariableUsesById(r){return this.variableMap.getVariableUsesById(r)}deleteVariableById(r){this.variableMap.deleteVariableById(r)}getVariable(r,a){return this.variableMap.getVariable(r,a)}getVariableById(r){return this.variableMap.getVariableById(r)}getVariablesOfType(r){return this.variableMap.getVariablesOfType(r)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(r,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(r){return this.options.maxInstances?(this.options.maxInstances[r]!==void 0?this.options.maxInstances[r]:1/0)-this.getBlocksByType(r,!1).length:1/0}isCapacityAvailable(r){if(!this.hasBlockLimits())return!0;let a=0;for(const p in r){if(r[p]>this.remainingCapacityOfType(p))return!1;a+=r[p]}return!(a>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(r){var a=r?this.redoStack_:this.undoStack_,p=r?this.undoStack_:this.redoStack_;const b=a.pop();if(b){for(var R=[b];a.length&&b.group&&b.group===a[a.length-1].group;){const W=a.pop();W&&R.push(W)}for(a=0;a<R.length;a++)p.push(R[a]);R=j(R,r),de(!1);try{for(p=0;p<R.length;p++)R[p].run(r)}finally{de(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,Z()}addChangeListener(r){return this.listeners.push(r),r}removeChangeListener(r){wt(this.listeners,r)}fireChangeListener(r){if(r.recordUndo)for(this.undoStack_.push(r),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let a=0;a<this.listeners.length;a++)(0,this.listeners[a])(r)}getBlockById(r){return this.blockDB.get(r)||null}setBlockById(r,a){this.blockDB.set(r,a)}removeBlockById(r){this.blockDB.delete(r)}getCommentById(r){let a;return(a=this.commentDB.get(r))!=null?a:null}allInputsFilled(r){const a=this.getTopBlocks(!1);for(let p=0;p<a.length;p++)if(!a[p].allInputsFilled(r))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new zS(this)}getVariableMap(){return this.variableMap}setVariableMap(r){this.variableMap=r}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let r=null;const a=this.options.parentWorkspace;return this.isFlyout?a&&a.options&&(r=a.options.parentWorkspace):a&&(r=a),r}static getById(r){return v(r)}static getAll(){return S()}};Zv.SCAN_ANGLE=3;var QR=100,pw=class{constructor(r){this.parentWorkspace=r,this.sounds=new Map,this.lastSound_=null,this.muted=!1}dispose(){this.sounds.clear()}load(r,a){if(r.length){try{var p=new globalThis.Audio}catch{return}for(let R=0;R<r.length;R++){const W=r[R],pe=W.match(/\.(\w+)$/);if(pe&&p.canPlayType("audio/"+pe[1])){var b=new globalThis.Audio(W);break}}b&&this.sounds.set(a,b)}}preload(){for(const r of this.sounds.values()){r.volume=.01;const a=r.play();if(a!==void 0?a.then(r.pause).catch(function(){}):r.pause(),On||Xn)break}}play(r,a){if(!this.muted){var p=this.sounds.get(r);p?(r=new Date,this.lastSound_!==null&&r.getTime()-this.lastSound_.getTime()<QR||(this.lastSound_=r,p=On||mn?p:p.cloneNode(),p.volume=a===void 0?1:a,p.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(r,a)}}setMuted(r){this.muted=r}getMuted(){return this.muted}},qR=class{constructor(r){this.workspace=r,this.layers=new Map,(r=r.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(r)),r=this.createLayer(J),ke(r,"blocklyBlockCanvas"),r=this.createLayer(fe),ke(r,"blocklyBubbleCanvas")}createDragLayer(r){const a=te(Pe.SVG,{class:"blocklyBlockDragSurface",xmlns:Sg,"xmlns:html":Dc,"xmlns:xlink":xs,version:"1.1"});return r.append(a),te(Pe.G,{},a)}translateLayers(r,a){r=`translate(${r.x}, ${r.y}) scale(${a})`;let p;(p=this.dragLayer)==null||p.setAttribute("transform",r);for(const[,b]of this.layers)b.setAttribute("transform",r)}moveToDragLayer(r){let a;(a=this.dragLayer)==null||a.appendChild(r.getSvgRoot())}moveOffDragLayer(r,a){this.append(r,a)}append(r,a){this.layers.has(a)||this.createLayer(a);let p;(p=this.layers.get(a))==null||p.appendChild(r.getSvgRoot())}createLayer(r){const a=this.workspace.getSvgGroup(),p=te(Pe.G,{});let b=!1;const R=[...this.layers].sort((W,pe)=>W[0]-pe[0]);for(const[W,pe]of R)if(r<W){a.insertBefore(p,pe),b=!0;break}return b||a.appendChild(p),this.layers.set(r,p),p}hasLayer(r){return r===this.dragLayer||new Set(this.layers.values()).has(r)}getBlockLayer(){return this.layers.get(J)}getBubbleLayer(){return this.layers.get(fe)}},ZR=20,df=class extends Zv{constructor(r){super(r),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(_(Bt.METRICS_MANAGER,r,!0))(this),this.getMetrics=r.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=r.setMetrics||df.setTopLevelWorkspaceMetrics_,this.componentManager=new Ia,this.connectionDBList=Oh.init(this.connectionChecker),this.audioManager=new pw(r.parentWorkspace),this.grid=this.options.gridPattern?new MS(this.options.gridPattern,r.gridOptions):null,this.markerManager=new Dh(this),tl&&fn&&this.registerToolboxCategoryCallback(f0,fn),Dg&&Kp&&this.registerToolboxCategoryCallback(BS,Kp),Io&&sn&&(this.registerToolboxCategoryCallback(jv,sn),this.addChangeListener(nc)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new dw(this,this.options.theme||Db),this.themeManager_.subscribeWorkspace(this);let a;this.renderer=qc(this.options.renderer||"geras",this.getTheme(),(a=this.options.rendererOverrides)!=null?a:void 0),this.cachedParentSvgSize=new ws(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(r){this.metricsManager=r,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(r){this.markerManager.setCursorSvg(r)}setMarkerSvg(r){this.markerManager.setMarkerSvg(r)}getMarker(r){return this.markerManager?this.markerManager.getMarker(r):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(r){r||(r=Db),this.themeManager_.setTheme(r)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(a){return!!a.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const r=new(we(Ql))(this.getTheme().name,this.id);ce(r)}updateBlockStyles_(r){for(let a=0,p;p=r[a];a++){const b=p.getStyleName();b&&p.setStyle(b)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const r=this.getParentSvg().getScreenCTM();r&&(this.inverseScreenCTM=r.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(r){let a=0,p=0,b=1;(this.getCanvas().contains(r)||this.getBubbleCanvas().contains(r))&&(b=this.scale);do{const R=Wn(r);(r===this.getCanvas()||r===this.getBubbleCanvas())&&(b=1),a+=R.x*b,p+=R.y*b,r=r.parentNode}while(r&&r!==this.getParentSvg()&&r!==this.getInjectionDiv());return new nn(a,p)}getCachedParentSvgSize(){const r=this.cachedParentSvgSize;return new ws(r.width,r.height)}getOriginOffsetInPixels(){return q(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let r=this.svgGroup_;for(;r;){if((" "+(r.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=r;break}r=r.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(r){this.resizeHandlerWrapper=r}createDom(r,a){return this.injectionDiv||(this.injectionDiv=a??null),this.svgGroup_=te(Pe.G,{class:"blocklyWorkspace"}),r&&(this.svgBackground_=te(Pe.RECT,{height:"100%",width:"100%",class:r},this.svgGroup_),r==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new qR(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(Ee(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),Ee(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(_(Bt.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(r=_(Bt.CURSOR,this.options))&&this.markerManager.setCursor(new r),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&at(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const r=this.getParentSvg();r&&r.parentNode&&at(r.parentNode)}this.resizeHandlerWrapper&&(rt(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=df.newTrashcan(this);const r=this.trashcan.createDom();this.svgGroup_.insertBefore(r,this.getCanvas())}static newTrashcan(r){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new p_(this);const r=this.zoomControls_.createDom();this.svgGroup_.appendChild(r)}addFlyout(r){const a=new Ho({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(_(Bt.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(a):new(_(Bt.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(a),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(r)}getFlyout(r){return this.flyout||r?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const r=this.componentManager.getComponents(Ia.Capability.POSITIONABLE,!0),a=this.getMetricsManager().getUiMetrics(),p=[];for(let b=0,R;R=r[b];b++){R.position(a,p);const W=R.getBoundingRectangle();W&&p.push(W)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const r=Ne();nn.equals(this.lastRecordedPageScroll,r)||(this.lastRecordedPageScroll=r,this.updateScreenCalculations_())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(r,a){const p=this.getParentSvg();r!=null&&(this.cachedParentSvgSize.width=r,p.setAttribute("data-cached-width",`${r}`)),a!=null&&(this.cachedParentSvgSize.height=a,p.setAttribute("data-cached-height",`${a}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let r=this.svgGroup_;for(;r;){if(r.tagName==="svg"){this.cachedParentSvg=r;break}r=r.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(ne()){var r=this.scale,a=-this.scrollY,p=-this.scrollX;if(!(r===this.oldScale&&1>Math.abs(a-this.oldTop)&&1>Math.abs(p-this.oldLeft))){var b=new(we(is))(a,p,r,this.id,this.oldScale);this.oldScale=r,this.oldTop=a,this.oldLeft=p,ce(b)}}}translate(r,a){let p;(p=this.layerManager)==null||p.translateLayers(new nn(r,a),this.scale);let b;(b=this.grid)==null||b.moveTo(r,a),this.maybeFireViewportChangeEvent()}getWidth(){const r=this.getMetrics();return r?r.viewWidth/this.scale:0}setVisible(r){this.isVisible_=r,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(r),this.getFlyout()&&this.getFlyout().setContainerVisible(r),this.getParentSvg().style.display=r?"block":"none",this.toolbox_&&this.toolbox_.setVisible(r),r||this.hideChaff(!0))}render(){for(var r=this.getAllBlocks(!1),a=r.length-1;0<=a;a--)r[a].queueRender();if(this.currentGesture_)for(r=this.currentGesture_.getInsertionMarkers(),a=0;a<r.length;a++)r[a].queueRender();rr().then(()=>void this.markerManager.updateMarkers())}highlightBlock(r,a){if(a===void 0){for(let p=0,b;b=this.highlightedBlocks[p];p++)b.setHighlighted(!1);this.highlightedBlocks.length=0}(r=r?this.getBlockById(r):null)&&((a=a===void 0||a)?this.highlightedBlocks.indexOf(r)===-1&&this.highlightedBlocks.push(r):wt(this.highlightedBlocks,r),r.setHighlighted(a))}paste(r){if(Te("Blockly.WorkspaceSvg.prototype.paste","v10","v11","Blockly.clipboard.paste"),!this.rendered||!r.type&&!r.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);let p;try{p=r.type?this.pasteBlock_(null,r):r.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(r):this.pasteBlock_(r,null)}finally{t.setGroup$$module$build$src$core$events$utils(a)}return p}pasteBlock_(r,a){t.disable$$module$build$src$core$events$utils();let p;try{let b=0,R=0;if(r){p=Ls(r,this);let W;b=parseInt((W=r.getAttribute("x"))!=null?W:"0"),this.RTL&&(b=-b);let pe;R=parseInt((pe=r.getAttribute("y"))!=null?pe:"0")}else a&&(p=zn(a,this),b=a.x||10,this.RTL&&(b=this.getWidth()-b),R=a.y||10);if(!isNaN(b)&&!isNaN(R)){let W;do{W=!1;const pe=this.getAllBlocks(!1);for(let De=0,Pt;Pt=pe[De];De++){const xn=Pt.getRelativeToSurfaceXY();if(1>=Math.abs(b-xn.x)&&1>=Math.abs(R-xn.y)){W=!0;break}}if(!W){const De=p.getConnections_(!1);for(let Pt=0,xn;xn=De[Pt];Pt++)if(xn.closest(t.config$$module$build$src$core$config.snapRadius,new nn(b,R)).connection){W=!0;break}}W&&(b=this.RTL?b-t.config$$module$build$src$core$config.snapRadius:b+t.config$$module$build$src$core$config.snapRadius,R+=2*t.config$$module$build$src$core$config.snapRadius)}while(W);p.moveTo(new nn(b,R))}}finally{t.enable$$module$build$src$core$events$utils()}return ne()&&!p.isShadow()&&ce(new(we(t.CREATE$$module$build$src$core$events$utils))(p)),p.select(),p}pasteWorkspaceComment_(r){t.disable$$module$build$src$core$events$utils();let a;try{a=nl.fromXmlRendered(r,this);let p,b=parseInt((p=r.getAttribute("x"))!=null?p:"0"),R,W=parseInt((R=r.getAttribute("y"))!=null?R:"0");isNaN(b)||isNaN(W)||(this.RTL&&(b=-b),a.moveBy(b+50,W+50))}finally{t.enable$$module$build$src$core$events$utils()}return ne()&&Bc.fireCreateEvent(a),a.select(),a}refreshToolboxSelection(){const r=this.isFlyout?this.targetWorkspace:this;r&&!r.currentGesture_&&r.toolbox_&&r.toolbox_.getFlyout()&&r.toolbox_.refreshSelection()}renameVariableById(r,a){super.renameVariableById(r,a),this.refreshToolboxSelection()}deleteVariableById(r){super.deleteVariableById(r),this.refreshToolboxSelection()}createVariable(r,a,p){return r=super.createVariable(r,a,p),this.refreshToolboxSelection(),r}recordDragTargets(){const r=this.componentManager.getComponents(Ia.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let a=0,p;p=r[a];a++){const b=p.getClientRect();b&&this.dragTargetAreas.push({component:p,clientRect:b})}}newBlock(r,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(r){for(let a=0,p;p=this.dragTargetAreas[a];a++)if(p.clientRect.contains(r.clientX,r.clientY))return p.component;return null}onMouseDown_(r){const a=this.getGesture(r);a&&a.handleWsStart(r,this)}startDrag(r,a){r=It(r,this.getParentSvg(),this.getInverseScreenCTM()),r.x/=this.scale,r.y/=this.scale,this.dragDeltaXY=nn.difference(a,r)}moveDrag(r){return r=It(r,this.getParentSvg(),this.getInverseScreenCTM()),r.x/=this.scale,r.y/=this.scale,nn.sum(this.dragDeltaXY,r)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const r=!!this.scrollbar;return this.isMovable()&&(!r||r&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const r=!!this.scrollbar;return this.isMovable()&&(!r||r&&this.scrollbar.canScrollVertically())}onMouseWheel_(r){if(Vm.inProgress())r.preventDefault(),r.stopPropagation();else{var a=this.options.zoomOptions&&this.options.zoomOptions.wheel,p=this.options.moveOptions&&this.options.moveOptions.wheel;if(a||p){var b=mt(r);if(mr)var R=r.metaKey;a&&(r.ctrlKey||R||!p)?(b=-b.y/50,a=It(r,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(a.x,a.y,b)):(a=this.scrollX-b.x,p=this.scrollY-b.y,r.shiftKey&&!b.x&&(a=this.scrollX-b.y,p=this.scrollY),this.scroll(a,p)),r.preventDefault()}}}getBlocksBoundingBox(){const r=this.getTopBoundedElements();if(!r.length)return new bi(0,0,0,0);const a=r[0].getBoundingRectangle();for(let b=1;b<r.length;b++){var p=r[b];p.isInsertionMarker&&p.isInsertionMarker()||(p=p.getBoundingRectangle(),p.top<a.top&&(a.top=p.top),p.bottom>a.bottom&&(a.bottom=p.bottom),p.left<a.left&&(a.left=p.left),p.right>a.right&&(a.right=p.right))}return a}cleanUp(){this.setResizesEnabled(!1),t.setGroup$$module$build$src$core$events$utils(!0);const r=this.getTopBlocks(!0);let a=0;for(let p=0,b;b=r[p];p++){if(!b.isMovable())continue;const R=b.getRelativeToSurfaceXY();b.moveBy(-R.x,a-R.y,["cleanup"]),b.snapToGrid(),a=b.getRelativeToSurfaceXY().y+b.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}t.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(r){if(!this.options.readOnly&&!this.isFlyout){var a=ei.registry.getContextMenuOptions(ei.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(a,r),Su(r,a,this.RTL)}}updateToolbox(r){if(r=lt(r)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Nt(r)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=r,this.toolbox_.render(r)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=r,this.flyout.show(r)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(k(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(r,a,p){p=Math.pow(this.options.zoomOptions.scaleSpeed,p);const b=this.scale*p;if(this.scale!==b){b>this.options.zoomOptions.maxScale?p=this.options.zoomOptions.maxScale/this.scale:b<this.options.zoomOptions.minScale&&(p=this.options.zoomOptions.minScale/this.scale);var R=this.getCanvas().getCTM(),W=this.getParentSvg().createSVGPoint();W.x=r,W.y=a,W=W.matrixTransform(R.inverse()),r=W.x,a=W.y,R=R.translate(r*(1-p),a*(1-p)).scale(p),this.scrollX=R.e,this.scrollY=R.f,this.setScale(b)}}zoomCenter(r){var a=this.getMetrics();let p;this.flyout?(p=a.svgWidth?a.svgWidth/2:0,a=a.svgHeight?a.svgHeight/2:0):(p=a.viewWidth/2+a.absoluteLeft,a=a.viewHeight/2+a.absoluteTop),this.zoom(p,a,r)}zoomToFit(){if(this.isMovable()){var r=this.getMetrics(),a=r.viewWidth;r=r.viewHeight;var p=this.getBlocksBoundingBox(),b=2*ZR,R=p.right-p.left+b;if(p=p.bottom-p.top+b,R){this.flyout&&(this.horizontalLayout?(r+=this.flyout.getHeight(),p+=this.flyout.getHeight()/this.scale):(a+=this.flyout.getWidth(),R+=this.flyout.getWidth()/this.scale)),a/=R,r/=p,t.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(a,r)),this.scrollCenter()}finally{t.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){ke(this.getCanvas(),"blocklyCanvasTransitioning"),ke(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){ft(this.getCanvas(),"blocklyCanvasTransitioning"),ft(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var r=this.getMetrics(),a=(r.scrollWidth-r.viewWidth)/2,p=(r.scrollHeight-r.viewHeight)/2;a=-a-r.scrollLeft,p=-p-r.scrollTop,this.scroll(a,p)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(r,a){if(this.isMovable()){var p=r?this.getBlockById(r):null;if(p){r=p.getRelativeToSurfaceXY(),p=a?{height:p.height,width:p.width}:p.getHeightWidth();var b=this.scale;a=(r.x+(this.RTL?-1:1)*p.width/2)*b,r=(r.y+p.height/2)*b,p=this.getMetrics(),this.scroll(-(a-p.viewWidth/2),-(r-p.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(r){this.options.zoomOptions.maxScale&&r>this.options.zoomOptions.maxScale?r=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&r<this.options.zoomOptions.minScale&&(r=this.options.zoomOptions.minScale),this.scale=r,this.hideChaff(!1),(r=this.getFlyout(!1))&&r.isVisible()&&(r.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),r=this.getMetrics(),this.scrollX-=r.absoluteLeft,this.scrollY-=r.absoluteTop,r.viewLeft+=r.absoluteLeft,r.viewTop+=r.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(r):this.scrollbar.resizeContent(r))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(r,a){this.hideChaff(!0);const p=this.getMetrics();r=Math.min(r,-p.scrollLeft),a=Math.min(a,-p.scrollTop);const b=p.scrollTop+Math.max(0,p.scrollHeight-p.viewHeight);r=Math.max(r,-(p.scrollLeft+Math.max(0,p.scrollWidth-p.viewWidth))),a=Math.max(a,-b),this.scrollX=r,this.scrollY=a,this.scrollbar&&this.scrollbar.set(-(r+p.scrollLeft),-(a+p.scrollTop),!1),r+=p.absoluteLeft,a+=p.absoluteTop,this.translate(r,a)}getBlockById(r){return super.getBlockById(r)}getAllBlocks(r=!1){return super.getAllBlocks(r)}getTopBlocks(r=!1){return super.getTopBlocks(r)}addTopBlock(r){this.addTopBoundedElement(r),super.addTopBlock(r)}removeTopBlock(r){this.removeTopBoundedElement(r),super.removeTopBlock(r)}addTopComment(r){this.addTopBoundedElement(r),super.addTopComment(r)}removeTopComment(r){this.removeTopBoundedElement(r),super.removeTopComment(r)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(r){this.topBoundedElements.push(r)}removeTopBoundedElement(r){wt(this.topBoundedElements,r)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(r){const a=!this.resizesEnabled&&r;this.resizesEnabled=r,a&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(r,a){if(typeof a!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(r,a)}getButtonCallback(r){let a;return(a=this.flyoutButtonCallbacks.get(r))!=null?a:null}removeButtonCallback(r){this.flyoutButtonCallbacks.delete(r)}registerToolboxCategoryCallback(r,a){if(typeof a!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(r,a)}getToolboxCategoryCallback(r){return this.toolboxCategoryCallbacks.get(r)||null}removeToolboxCategoryCallback(r){this.toolboxCategoryCallbacks.delete(r)}getGesture(r){const a=r.type==="pointerdown",p=this.currentGesture_;return p?a&&p.hasStarted()?(console.warn("Tried to start the same gesture twice."),p.cancel(),null):p:a?this.currentGesture_=new Vm(r,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(r=!1){Sl(),vl(),ba(),this.hideComponents(r)}hideComponents(r=!1){this.getComponentManager().getComponents(Ia.Capability.AUTOHIDEABLE,!0).forEach(a=>a.autoHide(r))}static setTopLevelWorkspaceMetrics_(r){const a=this.getMetrics();typeof r.x=="number"&&(this.scrollX=-(a.scrollLeft+(a.scrollWidth-a.viewWidth)*r.x)),typeof r.y=="number"&&(this.scrollY=-(a.scrollTop+(a.scrollHeight-a.viewHeight)*r.y)),this.translate(this.scrollX+a.absoluteLeft,this.scrollY+a.absoluteTop)}},HS=class extends f{constructor(r,a){super(a),this.type=qa,this.isOpen=r}toJson(){const r=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return r.isOpen=this.isOpen,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new HS),a.isOpen=r.isOpen,a}};i(Bt.EVENT,qa,HS);var GS=class extends xp{constructor(r){if(super(r),this.type=t.DELETE$$module$build$src$core$events$utils,r){if(r.getParent())throw Error("Connected blocks cannot be deleted.");r.isShadow()&&(this.recordUndo=!1),this.oldXml=Zn(r),this.ids=_e(r),this.wasShadow=r.isShadow(),this.oldJson=ri(r,{addCoordinates:!0})}}toJson(){const r=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return r.oldXml=$i(this.oldXml),r.ids=this.ids,r.wasShadow=this.wasShadow,r.oldJson=this.oldJson,this.recordUndo||(r.recordUndo=this.recordUndo),r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new GS),a.oldXml=t.textToDom$$module$build$src$core$utils$xml(r.oldXml),a.ids=r.ids,a.wasShadow=r.wasShadow||a.oldXml.tagName.toLowerCase()==="shadow",a.oldJson=r.oldJson,r.recordUndo!==void 0&&(a.recordUndo=r.recordUndo),a}run(r){const a=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(r)for(r=0;r<this.ids.length;r++){const p=this.ids[r],b=a.getBlockById(p);b?b.dispose(!1):p===this.blockId&&console.warn("Can't delete non-existent block: "+p)}else zn(this.oldJson,a)}};i(Bt.EVENT,t.DELETE$$module$build$src$core$events$utils,GS);var w_=class{constructor(r,a,p){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.isInsertionMarker_=this.disposing=!1,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=r,this.id=p&&!r.getBlockById(p)?p:ie(),r.setBlockById(this.id,this),this.xy_=new nn(0,0),this.isInFlyout=r.isFlyout,this.isInMutator=r.isMutator,this.RTL=r.RTL,a){if(this.type=a,p=Dr[a],!p||typeof p!="object")throw TypeError("Invalid block definition for type: "+a);Object.assign(this,p)}r.addTopBlock(this),r.addTypedBlock(this),new.target===w_&&this.doInit_()}doInit_(){const r=t.getGroup$$module$build$src$core$events$utils();r||t.setGroup$$module$build$src$core$events$utils(!0);const a=oe();try{typeof this.init=="function"&&(de(!1),this.init(),de(a)),ne()&&ce(new(we(t.CREATE$$module$build$src$core$events$utils))(this))}finally{t.setGroup$$module$build$src$core$events$utils(r),de(a)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(r){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(r),ne()&&ce(new(we(t.DELETE$$module$build$src$core$events$utils))(this)),this.workspace.removeTopBlock(this),this.disposeInternal())}disposeInternal(){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0,typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(r=>r.disposeInternal()),this.inputList.forEach(r=>r.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(r=>r.dispose()),this.disposed=!0)}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(const r of this.inputList)for(const a of r.fieldRow)a.initModel&&a.initModel()}unplug(r){this.outputConnection&&this.unplugFromRow_(r),this.previousConnection&&this.unplugFromStack_(r)}unplugFromRow_(r){let a=null,p;(p=this.outputConnection)!=null&&p.isConnected()&&(a=this.outputConnection.targetConnection,this.outputConnection.disconnect()),a&&r&&(r=this.getOnlyValueConnection_())&&r.isConnected()&&!r.targetBlock().isShadow()&&(r=r.targetConnection,r==null||r.disconnect(),this.workspace.connectionChecker.canConnect(r,a,!1)?a.connect(r):r==null||r.onFailedConnect(a))}getOnlyValueConnection_(){let r=null;for(let a=0;a<this.inputList.length;a++){const p=this.inputList[a].connection;if(p&&p.type===$n.INPUT_VALUE&&p.targetConnection){if(r)return null;r=p}}return r}unplugFromStack_(r){let a=null;var p;if((p=this.previousConnection)!=null&&p.isConnected()&&(a=this.previousConnection.targetConnection,this.previousConnection.disconnect()),p=this.getNextBlock(),r&&p&&!p.isShadow()){let b,R;r=(R=(b=this.nextConnection)==null?void 0:b.targetConnection)!=null?R:null,r==null||r.disconnect(),a&&this.workspace.connectionChecker.canConnect(a,r,!1)&&a.connect(r)}}getConnections_(r){r=[],this.outputConnection&&r.push(this.outputConnection),this.previousConnection&&r.push(this.previousConnection),this.nextConnection&&r.push(this.nextConnection);for(let a=0,p;p=this.inputList[a];a++)p.connection&&r.push(p.connection);return r}lastConnectionInStack(r){let a=this.nextConnection;for(;a;){const p=a.targetBlock();if(!p||r&&p.isShadow())return a;a=p.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(r){for(let a=0,p;p=this.inputList[a];a++)if(p.connection&&p.connection.targetBlock()===r)return p;return null}getSurroundParent(){let r=this,a;do if(a=r,r=r.getParent(),!r)return null;while(r.getNextBlock()===a);return r}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let r,a=this;do r=a,a=r.parentBlock_;while(a);return r}getTopStackBlock(){let r=this,a;do a=r.getPreviousBlock();while(a&&a.getNextBlock()===r&&(r=a));return r}getChildren(r){if(!r)return this.childBlocks_;r=[];for(let p=0,b;b=this.inputList[p];p++)if(b.connection){var a=b.connection.targetBlock();a&&r.push(a)}return(a=this.getNextBlock())&&r.push(a),r}setParent(r){if(r!==this.parentBlock_){var a=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),p=!!a;if(p&&r&&a!==r)throw Error("Block connected to superior one that is not new parent.");if(!p&&r)throw Error("Block not connected to new parent.");if(p&&!r)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?wt(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=r)?r.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(r){const a=[this],p=this.getChildren(r);for(let b,R=0;b=p[R];R++)a.push(...b.getDescendants(r));return a}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable_}setDeletable(r){this.deletable_=r}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable_}setMovable(r){this.movable_=r}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(U(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(r){this.isShadow_=r}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(r){this.isInsertionMarker_=r}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable_}setEditable(r){this.editable_=r;for(let a=0,p;p=this.inputList[a];a++)for(let b=0,R;R=p.fieldRow[b];b++)R.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const r of this.inputList)if(r.connection||1<r.fieldRow.length)return!1;return!0}getMatchingConnection(r,a){const p=this.getConnections_(!0);if(r=r.getConnections_(!0),p.length!==r.length)throw Error("Connection lists did not match in length.");for(let b=0;b<r.length;b++)if(r[b]===a)return p[b];return null}setHelpUrl(r){this.helpUrl=r}setTooltip(r){this.tooltip=r}getTooltip(){return Ta(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(r){r=es(r),this.hue_=r.hue,this.colour_=r.hex}setStyle(r){this.styleName_=r}setOnChange(r){if(r&&typeof r!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=r,this.onchangeWrapper_=r.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(r){if(typeof r!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(r===void 0?"nothing":r+" of type "+typeof r)+" instead");for(let a=0,p;p=this.inputList[a];a++)for(let b=0,R;R=p.fieldRow[b];b++)if(R.name===r)return R;return null}getVars(){const r=[];for(let a=0,p;p=this.inputList[a];a++)for(let b=0,R;R=p.fieldRow[b];b++)R.referencesVariables()&&r.push(R.getValue());return r}getVarModels(){const r=[];for(let a=0,p;p=this.inputList[a];a++)for(let b=0,R;R=p.fieldRow[b];b++)if(R.referencesVariables()){const W=this.workspace.getVariableById(R.getValue());W&&r.push(W)}return r}updateVarName(r){for(let a=0,p;p=this.inputList[a];a++)for(let b=0,R;R=p.fieldRow[b];b++)R.referencesVariables()&&r.getId()===R.getValue()&&R.refreshVariableName()}renameVarById(r,a){for(let p=0,b;b=this.inputList[p];p++)for(let R=0,W;W=b.fieldRow[R];R++)W.referencesVariables()&&r===W.getValue()&&W.setValue(a)}getFieldValue(r){return(r=this.getField(r))?r.getValue():null}setFieldValue(r,a){const p=this.getField(a);if(!p)throw Error('Field "'+a+'" not found.');p.setValue(r)}setPreviousStatement(r,a){if(r)a===void 0&&(a=null),this.previousConnection||(this.previousConnection=this.makeConnection_($n.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(a);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(r,a){if(r)a===void 0&&(a=null),this.nextConnection||(this.nextConnection=this.makeConnection_($n.NEXT_STATEMENT)),this.nextConnection.setCheck(a);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(r,a){if(r)a===void 0&&(a=null),this.outputConnection||(this.outputConnection=this.makeConnection_($n.OUTPUT_VALUE)),this.outputConnection.setCheck(a);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(r){this.inputsInline!==r&&(ce(new(we(t.CHANGE$$module$build$src$core$events$utils))(this,"inline",null,this.inputsInline,r)),this.inputsInline=r)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var r=1;r<this.inputList.length;r++)if(this.inputList[r-1]instanceof Zf&&this.inputList[r]instanceof Zf)return!1;for(r=1;r<this.inputList.length;r++)if(this.inputList[r-1]instanceof t.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[r]instanceof Zf)return!0;for(r=0;r<this.inputList.length;r++)if(this.inputList[r]instanceof Xm)return!0;return!1}setOutputShape(r){this.outputShape_=r}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(r){if(this.isEnabled()!==r){const a=this.disabled;this.disabled=!r,ce(new(we(t.CHANGE$$module$build$src$core$events$utils))(this,"disabled",null,a,!r))}}getInheritedDisabled(){let r=this.getSurroundParent();for(;r;){if(r.disabled)return!0;r=r.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(r){this.collapsed_!==r&&(ce(new(we(t.CHANGE$$module$build$src$core$events$utils))(this,"collapsed",null,this.collapsed_,r)),this.collapsed_=r)}toString(r,a){a=this.toTokens(a);for(let b=2;b<a.length;b++)a[b-2]==="("&&a[b]===")"&&(a[b-2]=a[b-1],a.splice(b-1,2));let p="";return a=a.reduce((b,R)=>(b=b+(p==="("||R===")"?"":" ")+R,p=R[R.length-1],b),""),a=a.trim()||"???",r&&a.length>r&&(a=a.substring(0,r-3)+"..."),a}toTokens(r="?"){const a=[];for(const b of this.inputList)if(b.name!=x0){for(const R of b.fieldRow)a.push(R.getText());if(b.connection){const R=b.connection.targetBlock();if(R){var p=b.connection;let W=p.getCheck();!W&&p.targetConnection&&(W=p.targetConnection.getCheck()),(p=!!W&&(W.indexOf("Boolean")!==-1||W.indexOf("Number")!==-1))&&a.push("("),a.push(...R.toTokens(r)),p&&a.push(")")}else a.push(r)}}return a}appendValueInput(r){return this.appendInput(new t.ValueInput$$module$build$src$core$inputs$value_input(r,this))}appendStatementInput(r){return this.statementInputCount++,this.appendInput(new gd(r,this))}appendDummyInput(r=""){return this.appendInput(new Zf(r,this))}appendEndRowInput(r=""){return this.appendInput(new Xm(r,this))}appendInput(r){return this.inputList.push(r),r}appendInputFromRegistry(r,a){return(r=h(Bt.INPUT,r,!1))?this.appendInput(new r(a,this)):null}jsonInit(r){var a=r.type?'Block "'+r.type+'": ':"";if(r.output&&r.previousStatement)throw Error(a+"Must not have both an output and a previousStatement.");for(var p=0;r["args"+p];){if(r["message"+p]===void 0)throw Error(a+`args${p} must have a corresponding message (message${p}).`);p++}if(r.style&&r.style.hat&&(this.hat=r.style.hat,r.style=null),r.style&&r.colour)throw Error(a+"Must not have both a colour and a style.");for(r.style?this.jsonInitStyle_(r,a):this.jsonInitColour_(r,a),p=0;r["message"+p]!==void 0;)this.interpolate_(r["message"+p],r["args"+p]||[],r["implicitAlign"+p]||r["lastDummyAlign"+p],a),p++;if(r.inputsInline!==void 0&&(t.disable$$module$build$src$core$events$utils(),this.setInputsInline(r.inputsInline),t.enable$$module$build$src$core$events$utils()),r.output!==void 0&&this.setOutput(!0,r.output),r.outputShape!==void 0&&this.setOutputShape(r.outputShape),r.previousStatement!==void 0&&this.setPreviousStatement(!0,r.previousStatement),r.nextStatement!==void 0&&this.setNextStatement(!0,r.nextStatement),r.tooltip!==void 0&&(p=Cr(r.tooltip),this.setTooltip(p)),r.enableContextMenu!==void 0&&(this.contextMenu=!!r.enableContextMenu),r.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!r.suppressPrefixSuffix),r.helpUrl!==void 0&&(p=Cr(r.helpUrl),this.setHelpUrl(p)),typeof r.extensions=="string"&&(console.warn(a+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+r.type+"' block."),r.extensions=[r.extensions]),r.mutator!==void 0&&Mi(r.mutator,this,!0),r=r.extensions,Array.isArray(r))for(a=0;a<r.length;a++)Mi(r[a],this,!1)}jsonInitColour_(r,a){if("colour"in r)if(r.colour===void 0)console.warn(a+"Undefined colour value.");else{r=r.colour;try{this.setColour(r)}catch{console.warn(a+"Illegal colour value: ",r)}}}jsonInitStyle_(r,a){r=r.style;try{this.setStyle(r)}catch{console.warn(a+"Style does not exist: ",r)}}mixin(r,a){if(a!==void 0&&typeof a!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!a){a=[];for(const p in r)this[p]!==void 0&&a.push(p);if(a.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(a))}Object.assign(this,r)}interpolate_(r,a,p,b){r=sa(r),this.validateTokens_(r,a.length),a=this.interpolateArguments_(r,a,p),p=[];for(let R=0,W;W=a[R];R++)if(this.isInputKeyword_(W.type)){if(r=this.inputFromJson_(W,b)){for(let pe=0,De;De=p[pe];pe++)r.appendField(De[0],De[1]);p.length=0}}else(r=this.fieldFromJson_(W))&&p.push([r,W.name])}validateTokens_(r,a){const p=[];let b=0;for(let R=0;R<r.length;R++){const W=r[R];if(typeof W=="number"){if(1>W||W>a)throw Error('Block "'+this.type+'": Message index %'+W+" out of range.");if(p[W])throw Error('Block "'+this.type+'": Message index %'+W+" duplicated.");p[W]=!0,b++}}if(b!==a)throw Error('Block "'+this.type+'": Message does not reference all '+a+" arg(s).")}interpolateArguments_(r,a,p){const b=[];for(let W=0;W<r.length;W++){var R=r[W];if(typeof R=="number"&&(R=a[R-1]),typeof R=="string"){if(R===`
`)R={type:"input_end_row"},p&&(R.align=p);else if(R=this.stringToFieldJson_(R),!R)continue}b.push(R)}return(r=b.length)&&!this.isInputKeyword_(b[r-1].type)&&(r={type:"input_dummy"},p&&(r.align=p),b.push(r)),b}fieldFromJson_(r){const a=t.fromJson$$module$build$src$core$field_registry(r);return!a&&r.alt?typeof r.alt=="string"?(r=this.stringToFieldJson_(r.alt))?this.fieldFromJson_(r):null:this.fieldFromJson_(r.alt):a}inputFromJson_(r,a){var p={LEFT:t.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:t.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:t.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:t.Align$$module$build$src$core$inputs$align.CENTRE};let b;switch(r.type){case"input_value":b=this.appendValueInput(r.name);break;case"input_statement":b=this.appendStatementInput(r.name);break;case"input_dummy":b=this.appendDummyInput(r.name);break;case"input_end_row":b=this.appendEndRowInput(r.name);break;default:b=this.appendInputFromRegistry(r.type,r.name)}return b?(r.check&&b.setCheck(r.check),r.align&&(p=p[r.align.toUpperCase()],p===void 0?console.warn(a+"Illegal align value: ",r.align):b.setAlign(p)),b):null}isInputKeyword_(r){return r==="input_value"||r==="input_statement"||r==="input_dummy"||r==="input_end_row"||u(Bt.INPUT,r)}stringToFieldJson_(r){return(r=r.trim())?{type:"field_label",text:r}:null}moveInputBefore(r,a){if(r!==a){var p=-1,b=a?-1:this.inputList.length;for(let R=0,W;W=this.inputList[R];R++)if(W.name===r){if(p=R,b!==-1)break}else if(a&&W.name===a&&(b=R,p!==-1))break;if(p===-1)throw Error('Named input "'+r+'" not found.');if(b===-1)throw Error('Reference input "'+a+'" not found.');this.moveNumberedInputBefore(p,b)}}moveNumberedInputBefore(r,a){if(r===a)throw Error("Can't move input to itself.");if(r>=this.inputList.length)throw RangeError("Input index "+r+" out of bounds.");if(a>this.inputList.length)throw RangeError("Reference input "+a+" out of bounds.");const p=this.inputList[r];this.inputList.splice(r,1),r<a&&a--,this.inputList.splice(a,0,p)}removeInput(r,a){for(let p=0,b;b=this.inputList[p];p++)if(b.name===r)return b instanceof gd&&this.statementInputCount--,b.dispose(),this.inputList.splice(p,1),!0;if(a)return!1;throw Error("Input not found: "+r)}getInput(r){for(let a=0,p;p=this.inputList[a];a++)if(p.name===r)return p;return null}getInputTargetBlock(r){return(r=this.getInput(r))&&r.connection&&r.connection.targetBlock()}getCommentText(){let r,a;return(a=(r=this.getIcon(Nh.TYPE))==null?void 0:r.getText())!=null?a:null}setCommentText(r){var a;let p;const b=(p=(a=this.getIcon(Nh.TYPE))==null?void 0:a.getText())!=null?p:null;b!==r&&(r!==null?((a=this.getIcon(Nh.TYPE))||(a=this.addIcon(new Nh(this))),t.disable$$module$build$src$core$events$utils(),a.setText(r),t.enable$$module$build$src$core$events$utils()):this.removeIcon(Nh.TYPE),ce(new(we(t.CHANGE$$module$build$src$core$events$utils))(this,"comment",null,b,r)))}setWarningText(r,a){}setMutator(r){}addIcon(r){if(this.hasIcon(r.getType()))throw new RS(r);return this.icons.push(r),this.icons.sort((a,p)=>a.getWeight()-p.getWeight()),r}removeIcon(r){if(!this.hasIcon(r))return!1;let a;return(a=this.getIcon(r))==null||a.dispose(),this.icons=this.icons.filter(p=>!p.getType().equals(r)),!0}hasIcon(r){return this.icons.some(a=>a.getType().equals(r))}getIcon(r){return r instanceof fo?this.icons.find(a=>a.getType().equals(r)):this.icons.find(a=>a.getType().toString()===r)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy_}moveBy(r,a,p){if(this.parentBlock_)throw Error("Block has parent");const b=new(we(t.MOVE$$module$build$src$core$events$utils))(this);p&&b.setReason(p),this.xy_.translate(r,a),b.recordNew(),ce(b)}makeConnection_(r){return new Ni(this,r)}allInputsFilled(r){if(r===void 0&&(r=!0),!r&&this.isShadow())return!1;for(let p=0,b;b=this.inputList[p];p++)if(b.connection){var a=b.connection.targetBlock();if(!a||!a.allInputsFilled(r))return!1}return(a=this.getNextBlock())?a.allInputsFilled(r):!0}toDevString(){let r=this.type?'"'+this.type+'" block':"Block";return this.id&&(r+=' (id="'+this.id+'")'),r}};w_.COLLAPSED_INPUT_NAME=x0,w_.COLLAPSED_FIELD_NAME=Vb;var fw=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(r){this.drawer=r}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(r){const a=this.curNode;this.curNode=r,this.drawer&&this.drawer.draw(a,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},WS=class extends fw{constructor(){super(),this.type="cursor"}next(){var r=this.getCurNode();if(!r)return null;for(r=r.next();r&&r.next()&&(r.getType()===jt.types.NEXT||r.getType()===jt.types.BLOCK);)r=r.next();return r&&this.setCurNode(r),r}in(){var r=this.getCurNode();if(!r)return null;(r.getType()===jt.types.PREVIOUS||r.getType()===jt.types.OUTPUT)&&(r=r.next());let a,p;return(r=(p=(a=r)==null?void 0:a.in())!=null?p:null)&&this.setCurNode(r),r}prev(){var r=this.getCurNode();if(!r)return null;for(r=r.prev();r&&r.prev()&&(r.getType()===jt.types.NEXT||r.getType()===jt.types.BLOCK);)r=r.prev();return r&&this.setCurNode(r),r}out(){var r=this.getCurNode();return r?((r=r.out())&&r.getType()===jt.types.BLOCK&&(r=r.prev()||r),r&&this.setCurNode(r),r):null}};i(Bt.CURSOR,Ja,WS);var ey=class extends WS{constructor(){super()}next(){var r=this.getCurNode();return r?((r=this.getNextNode_(r,this.validNode_))&&this.setCurNode(r),r):null}in(){return this.next()}prev(){var r=this.getCurNode();return r?((r=this.getPreviousNode_(r,this.validNode_))&&this.setCurNode(r),r):null}out(){return this.prev()}getNextNode_(r,a){if(!r)return null;const p=r.in()||r.next();return a(p)?p:p?this.getNextNode_(p,a):(r=this.findSiblingOrParent(r.out()),a(r)?r:r?this.getNextNode_(r,a):null)}getPreviousNode_(r,a){if(!r)return null;let p=r.prev();return p=p?this.getRightMostChild(p):r.out(),a(p)?p:p?this.getPreviousNode_(p,a):null}validNode_(r){let a=!1;return r=r&&r.getType(),(r===jt.types.OUTPUT||r===jt.types.INPUT||r===jt.types.FIELD||r===jt.types.NEXT||r===jt.types.PREVIOUS||r===jt.types.WORKSPACE)&&(a=!0),a}findSiblingOrParent(r){if(!r)return null;const a=r.next();return a||this.findSiblingOrParent(r.out())}getRightMostChild(r){if(!r.in())return r;for(r=r.in();r&&r.next();)r=r.next();return this.getRightMostChild(r)}};ey.registrationName="basicCursor",i(Bt.CURSOR,ey.registrationName,ey);var mw=class extends ey{validNode_(r){let a=!1;const p=r&&r.getType();return r&&(r=r.getLocation(),p===jt.types.FIELD&&r&&r.isTabNavigable()&&r.isClickable()&&(a=!0)),a}},VS=10,Bh=class extends Ni{constructor(r,a){super(r,a),this.highlighted=!1,this.targetConnection=null,this.db=r.workspace.connectionDBList[a],this.dbOpposite=r.workspace.connectionDBList[Xt[a]],this.offsetInBlock=new nn(0,0),this.trackedState=Bh.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Bh.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let r,a;(a=(r=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||a.call(r,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(r){const a=this.x-r.x;return r=this.y-r.y,Math.sqrt(a*a+r*r)}bumpAwayFrom(r){if(!this.sourceBlock_.workspace.isDragging()){var a=this.sourceBlock_.getRootBlock();if(!a.isInFlyout){var p=!1;if(!a.isMovable()){if(a=r.getSourceBlock().getRootBlock(),!a.isMovable())return;r=this,p=!0}var b=O()==a;b||a.addSelect();var R=r.x+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*VS)-this.x,W=r.y+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*VS)-this.y;p&&(W=-W),a.RTL&&(R=r.x-t.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*VS)-this.x),a.moveBy(R,W,["bump"]),b||a.removeSelect()}}}moveTo(r,a){let p=!1;return this.trackedState===Bh.TrackedState.WILL_TRACK?(this.db.addConnection(this,a),this.trackedState=Bh.TrackedState.TRACKED,p=!0):this.trackedState===Bh.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,a),p=!0),this.x=r,this.y=a,p}moveBy(r,a){return this.moveTo(this.x+r,this.y+a)}moveToOffset(r){return this.moveTo(r.x+this.offsetInBlock.x,r.y+this.offsetInBlock.y)}setOffsetInBlock(r,a){this.offsetInBlock.x=r,this.offsetInBlock.y=a}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var r=this.targetConnection;const a=this.targetBlock();r&&a&&(r=nn.difference(this.offsetInBlock,r.offsetInBlock),a.translate(r.x,r.y))}closest(r,a){return this.dbOpposite.searchForClosest(this,r,a)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(r){r&&this.trackedState===Bh.TrackedState.TRACKED||!r&&this.trackedState===Bh.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(r?(this.db.addConnection(this,this.y),this.trackedState=Bh.TrackedState.TRACKED):(this.trackedState===Bh.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Bh.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const r=this.targetBlock().getDescendants(!1);for(let a=0;a<r.length;a++){const p=r[a],b=p.getConnections_(!0);for(let R=0;R<b.length;R++)b[R].setTracking(!1);for(const R of p.getIcons())$l(R)&&R.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let r=[];if(this.type!==$n.INPUT_VALUE&&this.type!==$n.NEXT_STATEMENT)return r;const a=this.targetBlock();if(a){let p;a.isCollapsed()?(p=[],a.outputConnection&&p.push(a.outputConnection),a.nextConnection&&p.push(a.nextConnection),a.previousConnection&&p.push(a.previousConnection)):p=a.getConnections_(!0);for(let b=0;b<p.length;b++)r.push(...p[b].startTrackingAll());r.length||(r=[a])}return r}onFailedConnect(r){const a=this.getSourceBlock();if(oe()){const p=t.getGroup$$module$build$src$core$events$utils();setTimeout((function(){a.isDisposed()||a.getParent()||(t.setGroup$$module$build$src$core$events$utils(p),this.bumpAwayFrom(r),t.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),t.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(r=!0){const{parentConnection:a,childConnection:p}=this.getParentAndChildConnections();if(a&&p){var b=a.getSourceBlock(),R=p.getSourceBlock();super.disconnectInternal(r),b.rendered&&b.queueRender(),R.rendered&&(R.updateDisabled(),R.queueRender(),R.getSvgRoot().style.display="block")}}respawnShadow_(){super.respawnShadow_();const r=this.targetBlock();r&&(r.initSvg(),r.queueRender())}neighbours(r){return this.dbOpposite.getNeighbours(this,r)}connect_(r){super.connect_(r);var a=this.getSourceBlock();r=r.getSourceBlock();const p=a.rendered,b=r.rendered;p&&a.updateDisabled(),b&&r.updateDisabled(),p&&b&&(this.type===$n.NEXT_STATEMENT||this.type===$n.PREVIOUS_STATEMENT?r.queueRender():a.queueRender()),(a=a.getInputWithBlock(r))&&(a=a.isVisible(),r.getSvgRoot().style.display=a?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}setCheck(r){return super.setCheck(r),this.sourceBlock_.rendered&&this.sourceBlock_.queueRender(),this}};(function(r){r=r.TrackedState||(r.TrackedState={}),r[r.WILL_TRACK=-1]="WILL_TRACK",r[r.UNTRACKED=0]="UNTRACKED",r[r.TRACKED=1]="TRACKED"})(Bh||(Bh={})),Bh.TrackedState;var em=class extends w_{constructor(r,a,p){super(r,a,p),this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.visuallyDisabled=this.rendered=!1,this.translation="",this.bumpNeighboursPid=0,this.dragging=!1,this.relativeCoords=new nn(0,0),this.workspace=r,this.svgGroup_=te(Pe.G,{}),this.style=r.getRenderer().getConstants().getBlockStyle(null),this.pathObject=r.getRenderer().makePathObject(this.svgGroup_,this.style),r=this.pathObject.svgPath,r.tooltip=this,si(r),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let a=0,p;p=this.inputList[a];a++)p.init();for(var r of this.getIcons())r.initView(this.createIconPointerDownListener(r)),r.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),r=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!r||Ee(r,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,r.parentNode||this.workspace.getCanvas().appendChild(r)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(O()!==this){var r=null;if(O()){r=O().id,t.disable$$module$build$src$core$events$utils();try{O().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}r=new(we(zs))(r,this.id,this.workspace.id),ce(r),D(this),this.addSelect()}}unselect(){if(O()===this){var r=new(we(zs))(this.id,null,this.workspace.id);r.workspaceId=this.workspace.id,ce(r),D(null),this.removeSelect()}}setParent(r){const a=this.parentBlock_;if(r!==a){Q(),super.setParent(r),le();var p=this.getSvgRoot();if(!this.workspace.isClearing&&p){var b=this.getRelativeToSurfaceXY();r?r.getSvgRoot().appendChild(p):a&&((r=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(p,r):this.workspace.getCanvas().appendChild(p),this.translate(b.x,b.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const r=this.workspace.getLayerManager();if(!r)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,p=0,b=this.getSvgRoot();if(b)do{const R=Wn(b);a+=R.x,p+=R.y,b=b.parentNode}while(b&&!r.hasLayer(b));return new nn(a,p)}moveBy(r,a,p){if(this.parentBlock_)throw Error("Block has parent");const b=ne();let R=null;b&&(R=new(we(t.MOVE$$module$build$src$core$events$utils))(this),p&&R.setReason(p)),r=new nn(r,a),a=this.getRelativeToSurfaceXY(),r=nn.sum(a,r),this.translate(r.x,r.y),this.updateComponentLocations(r),b&&R&&(R.recordNew(),ce(R)),this.workspace.resizeContents()}translate(r,a){this.translation=`translate(${r}, ${a})`,this.relativeCoords=new nn(r,a),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(r,a){const p=this.getRelativeToSurfaceXY();this.moveBy(r.x-p.x,r.y-p.y,a)}moveDuringDrag(r){this.translate(r.x,r.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(r)}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var r=this.workspace.getGrid();if(r&&r.shouldSnap()){var a=r.getSpacing(),p=a/2,b=this.getRelativeToSurfaceXY();r=Math.round(Math.round((b.x-p)/a)*a+p-b.x),a=Math.round(Math.round((b.y-p)/a)*a+p-b.y),(r||a)&&this.moveBy(r,a,["snap"])}}}getBoundingRectangle(){const r=this.getRelativeToSurfaceXY(),a=this.getHeightWidth();let p,b;return this.RTL?(p=r.x-a.width,b=r.x):(p=r.x,b=r.x+a.width),new bi(r.y,r.y+a.height,p,b)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let r=0,a;a=this.inputList[r];r++)a.markDirty()}setCollapsed(r){this.collapsed_!==r&&(super.setCollapsed(r),this.updateCollapsed_())}updateCollapsed_(){var r=this.isCollapsed();const a=x0,p=Vb;for(let R=0,W;W=this.inputList[R];R++)W.name!==a&&W.setVisible(!r);for(var b of this.getIcons())b.updateCollapsed();r?(r=this.toString(Ze),(b=this.getField(p))?b.setValue(r):(this.getInput(a)||this.appendDummyInput(a)).appendField(new ha(r),p)):(this.updateDisabled(),this.removeInput(a))}tab(r,a){const p=new mw;p.setCurNode(jt.createFieldNode(r)),r=p.getCurNode(),a?p.next():p.prev(),(a=p.getCurNode())&&a!==r&&(a.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(a))}onMouseDown_(r){const a=this.workspace.getGesture(r);a&&a.handleBlockStart(r,this)}showHelp(){const r=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;r&&window.open(r)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const r=ei.registry.getContextMenuOptions(ei.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(r),r}showContextMenu(r){const a=this.generateContextMenu();a&&a.length&&(Su(r,a,this.RTL),Qh(this))}updateComponentLocations(r){if(this.rendered){this.dragging||this.updateConnectionLocations(r),this.updateIconLocations(r),this.updateFieldLocations(r);for(const a of this.getChildren(!1))a.updateComponentLocations(nn.sum(r,a.relativeCoords))}}updateConnectionLocations(r){for(const a of this.getConnections_(!1))a.moveToOffset(r)}updateIconLocations(r){for(const a of this.getIcons())a.onLocationChange(r)}updateFieldLocations(r){for(const a of this.inputList)for(const p of a.fieldRow)p.onLocationChange(r)}setDragging(r){(this.dragging=r)?(this.translation="",$s.push(...this.getConnections_(!0)),ke(this.svgGroup_,"blocklyDragging")):($s.length=0,ft(this.svgGroup_,"blocklyDragging"));for(let a=0;a<this.childBlocks_.length;a++)this.childBlocks_[a].setDragging(r)}setMovable(r){super.setMovable(r),this.pathObject.updateMovable(r)}setEditable(r){super.setEditable(r),r=this.getIcons();for(let a=0;a<r.length;a++)r[a].updateEditable()}setShadow(r){super.setShadow(r),this.applyColour()}setInsertionMarker(r){this.isInsertionMarker_!==r&&(this.isInsertionMarker_=r)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(r,a){this.isDeadOrDying()||(Dd(),Vl(),a&&this.rendered&&(this.unplug(r),$c(this)),super.dispose(!!r),at(this.svgGroup_))}disposeInternal(){this.isDeadOrDying()||(super.disposeInternal(),this.rendered=!1,O()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(r=>clearTimeout(r)),this.warningTextDb.clear(),this.getIcons().forEach(r=>r.dispose()))}checkAndDelete(){this.workspace.isFlyout||(t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),t.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:Bm.TYPE,blockState:ri(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:U(this,!0)}}applyColour(){this.pathObject.applyColour(this);const r=this.getIcons();for(let a=0;a<r.length;a++)r[a].applyColour();for(let a=0,p;p=this.inputList[a];a++)for(let b=0,R;R=p.fieldRow[b];b++)R.applyColour()}updateDisabled(){const r=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===r){let a;(a=this.getNextBlock())==null||a.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=r;for(const a of this.getChildren(!1))a.updateDisabled()}}getCommentIcon(){Te("getCommentIcon","v10","v11","getIcon");let r;return(r=this.getIcon(Nh.TYPE))!=null?r:null}setWarningText(r,a=""){if(a)this.warningTextDb.has(a)&&(clearTimeout(this.warningTextDb.get(a)),this.warningTextDb.delete(a));else{for(var p of this.warningTextDb.values())clearTimeout(p);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(a,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(a),this.setWarningText(r,a))},100));else if(this.isInFlyout&&(r=null),p=this.getIcon(hf.TYPE),r){let b=this.getSurroundParent(),R=null;for(;b;)b.isCollapsed()&&(R=b),b=b.getSurroundParent();R&&R.setWarningText(t.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,em.COLLAPSED_WARNING_ID),p?p.addMessage(r,a):this.addIcon(new hf(this).addMessage(r,a))}else p&&(a?(p.addMessage("",a),p.getText()||this.removeIcon(hf.TYPE)):this.removeIcon(hf.TYPE))}setMutator(r){this.removeIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),r&&this.addIcon(r)}addIcon(r){return super.addIcon(r),r instanceof hf&&(this.warning=r),r instanceof t.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=r),this.rendered&&(r.initView(this.createIconPointerDownListener(r)),r.applyColour(),r.updateEditable(),this.queueRender(),Ui(),this.bumpNeighbours()),r}createIconPointerDownListener(r){return a=>{this.isDeadOrDying()||(a=this.workspace.getGesture(a))&&a.setStartIcon(r)}}removeIcon(r){const a=super.removeIcon(r);return r.equals(hf.TYPE)&&(this.warning=null),r.equals(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.rendered&&(this.queueRender(),Ui(),this.bumpNeighbours()),a}setEnabled(r){this.isEnabled()!==r&&(super.setEnabled(r),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(r){this.rendered&&this.pathObject.updateHighlighted(r)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(r){this.pathObject.updateDraggingDelete(r)}getColour(){return this.style.colourPrimary}setColour(r){super.setColour(r),r=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(r.style),this.style=r.style,this.styleName_=r.name,this.applyColour()}setStyle(r){const a=this.workspace.getRenderer().getConstants().getBlockStyle(r);if(this.styleName_=r,a)this.hat=a.hat,this.pathObject.setStyle(a),this.colour_=a.colourPrimary,this.style=a,this.applyColour();else throw Error("Invalid style name: "+r)}bringToFront(r=!1){let a=this;if(!a.isDeadOrDying())do{const p=a.getSvgRoot(),b=p.parentNode,R=b.childNodes;if(R[R.length-1]!==p&&b.appendChild(p),r)break;a=a.getParent()}while(a)}setPreviousStatement(r,a){super.setPreviousStatement(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setNextStatement(r,a){super.setNextStatement(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setOutput(r,a){super.setOutput(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setInputsInline(r){super.setInputsInline(r),this.rendered&&(this.queueRender(),this.bumpNeighbours())}removeInput(r,a){return r=super.removeInput(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours()),r}moveNumberedInputBefore(r,a){super.moveNumberedInputBefore(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}appendInput(r){return super.appendInput(r),this.rendered&&(this.queueRender(),this.bumpNeighbours()),r}setConnectionTracking(r){if(this.previousConnection&&this.previousConnection.setTracking(r),this.outputConnection&&this.outputConnection.setTracking(r),this.nextConnection){this.nextConnection.setTracking(r);var a=this.nextConnection.targetBlock();a&&a.setConnectionTracking(r)}if(!this.collapsed_)for(a=0;a<this.inputList.length;a++){var p=this.inputList[a].connection;p&&(p.setTracking(r),(p=p.targetBlock())&&p.setConnectionTracking(r))}}getConnections_(r){const a=[];if((r||this.rendered)&&(this.outputConnection&&a.push(this.outputConnection),this.previousConnection&&a.push(this.previousConnection),this.nextConnection&&a.push(this.nextConnection),r||!this.collapsed_))for(let p=0,b;b=this.inputList[p];p++)b.connection&&a.push(b.connection);return a}lastConnectionInStack(r){return super.lastConnectionInStack(r)}getMatchingConnection(r,a){return super.getMatchingConnection(r,a)}makeConnection_(r){return new Bh(this,r)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){if(!this.bumpNeighboursPid){var r=t.getGroup$$module$build$src$core$events$utils();this.bumpNeighboursPid=setTimeout(()=>{const a=t.getGroup$$module$build$src$core$events$utils();t.setGroup$$module$build$src$core$events$utils(r),this.getRootBlock().bumpNeighboursInternal(),t.setGroup$$module$build$src$core$events$utils(a),this.bumpNeighboursPid=0},t.config$$module$build$src$core$config.bumpDelay)}}bumpNeighboursInternal(){const r=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||r.isInFlyout))for(const a of this.getConnections_(!1)){if(a.isSuperior()){let p;(p=a.targetBlock())==null||p.bumpNeighboursInternal()}for(const p of a.neighbours(t.config$$module$build$src$core$config.snapRadius))p.getSourceBlock().getRootBlock()!==r&&(a.isConnected()&&p.isConnected()||(a.isSuperior()?p.bumpAwayFrom(a):a.bumpAwayFrom(p)))}}scheduleSnapAndBump(){const r=t.getGroup$$module$build$src$core$events$utils();setTimeout(()=>{t.setGroup$$module$build$src$core$events$utils(r),this.snapToGrid(),t.setGroup$$module$build$src$core$events$utils(!1)},t.config$$module$build$src$core$config.bumpDelay/2),this.bumpNeighbours()}positionNearConnection(r,a,p){if(r.type===$n.NEXT_STATEMENT||r.type===$n.INPUT_VALUE){let b=a.x;a=a.y,b+=p.x-r.getOffsetInBlock().x,a+=p.y-r.getOffsetInBlock().y,this.moveBy(b,a)}}getChildren(r){return super.getChildren(r)}queueRender(){return Jo(this)}render(){this.queueRender(),Ui()}renderEfficiently(){this.rendered=!0,Q(),this.isCollapsed()&&this.updateCollapsed_(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),le(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const r of this.inputList){const a=r.connection;a&&a.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Dh.LOCAL_MARKER).draw();for(const r of this.inputList)for(const a of r.fieldRow)a.updateMarkers_()}setCursorSvg(r){this.pathObject.setCursorSvg(r)}setMarkerSvg(r){this.pathObject.setMarkerSvg(r)}getHeightWidth(){let r=this.height,a=this.width;var p=this.getNextBlock();if(p){p=p.getHeightWidth();const b=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;r+=p.height-b,a=Math.max(a,p.width)}return{height:r,width:a}}fadeForReplacement(r){this.pathObject.updateReplacementFade(r)}highlightShapeForInput(r,a){this.pathObject.updateShapeForInputHighlight(r,a)}};em.INLINE=-1,em.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var gw=class{constructor(){}onDragEnter(r){}onDragOver(r){}onDragExit(r){}onDrop(r){}getClientRect(){return null}shouldPreventMove(r){return!1}},jb=class extends gw{constructor(){super(),this.wouldDelete_=!1}wouldDelete(r,a){return r instanceof em?(r=!r.getParent()&&r.isDeletable(),this.updateWouldDelete_(r&&!a)):this.updateWouldDelete_(r.isDeletable()),this.wouldDelete_}updateWouldDelete_(r){this.wouldDelete_=r}},_w=class extends jb{constructor(r){super(),this.workspace=r,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(r=new Ho({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(r.toolboxPosition=this.workspace.toolboxPosition===Qn.TOP?Qn.BOTTOM:Qn.TOP,this.flyout=new(_(Bt.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(r)):(r.toolboxPosition=this.workspace.toolboxPosition===Qn.RIGHT?Qn.LEFT:Qn.RIGHT,this.flyout=new(_(Bt.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(r)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=te(Pe.G,{class:"blocklyTrash"});let r;const a=String(Math.random()).substring(2);r=te(Pe.CLIPPATH,{id:"blocklyTrashBodyClipPath"+a},this.svgGroup),te(Pe.RECT,{width:C_,height:Xb,y:M_},r);const p=te(Pe.IMAGE,{width:nu.width,x:-jS,height:nu.height,y:-XS,"clip-path":"url(#blocklyTrashBodyClipPath"+a+")"},this.svgGroup);return p.setAttributeNS(xs,"xlink:href",this.workspace.options.pathToMedia+nu.url),r=te(Pe.CLIPPATH,{id:"blocklyTrashLidClipPath"+a},this.svgGroup),te(Pe.RECT,{width:C_,height:M_},r),this.svgLid=te(Pe.IMAGE,{width:nu.width,x:-jS,height:nu.height,y:-XS,"clip-path":"url(#blocklyTrashLidClipPath"+a+")"},this.svgGroup),this.svgLid.setAttributeNS(xs,"xlink:href",this.workspace.options.pathToMedia+nu.url),Fe(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),Fe(this.svgGroup,"pointerup",this,this.click),Fe(p,"pointerover",this,this.mouseOver),Fe(p,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(Ge(this.flyout.createDom(Pe.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ia.Capability.AUTOHIDEABLE,Ia.Capability.DELETE_AREA,Ia.Capability.DRAG_TARGET,Ia.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&at(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var r=this.contents.map(function(p){return JSON.parse(p)}),a=this.workspace.getParentSvg().style;a.cursor="wait",setTimeout(()=>{let p;(p=this.flyout)==null||p.show(r),a.cursor="";let b;(b=this.workspace.scrollbar)==null||b.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var r;(r=this.flyout)==null||r.hide();var a;(a=this.workspace.scrollbar)==null||a.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(r){!r&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(r,a){if(this.initialized){var p=ji(this.workspace,r);r=Ir(p,new ws(C_,Xb+M_),vw,Yb,r,this.workspace),a=Yo(r,Yb,p.vertical===uc.TOP?Tp.DOWN:Tp.UP,a),this.top=a.top,this.left=a.left;var b;(b=this.svgGroup)==null||b.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new bi(this.top,this.top+Xb+M_,this.left,this.left+C_)}getClientRect(){if(!this.svgGroup)return null;var r=this.svgGroup.getBoundingClientRect();const a=r.top+XS-ty;return r=r.left+jS-ty,new bi(a,a+M_+Xb+2*ty,r,r+C_+2*ty)}onDragOver(r){this.setLidOpen(this.wouldDelete_)}onDragExit(r){this.setLidOpen(!1)}onDrop(r){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(r){this.isLidOpen!==r&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=r,this.animateLid())}animateLid(){const r=tk;var a=1/(r+1);this.lidOpen+=this.isLidOpen?a:-a,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Ph),a=yw+this.lidOpen*(nk-yw),this.svgGroup&&(this.svgGroup.style.opacity=`${a}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),YS/r))}setLidAngle(r){const a=this.workspace.toolboxPosition===Qn.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let p;(p=this.svgLid)==null||p.setAttribute("transform","rotate("+(a?-r:r)+","+(a?4:C_-4)+","+(M_-2)+")")}setMinOpenness(r){this.minOpenness=r,this.isLidOpen||this.setLidAngle(r*Ph)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(r){r=new(we(qa))(r,this.workspace.id),ce(r)}blockMouseDownWhenOpenable(r){!this.contentsIsOpen()&&this.hasContents()&&r.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(r){if(!(0>=this.workspace.options.maxTrashcanContents||r.type!==t.DELETE$$module$build$src$core$events$utils||r.type!==t.DELETE$$module$build$src$core$events$utils||r.wasShadow)){if(!r.oldJson)throw Error("Encountered a delete event without proper oldJson");if(r=JSON.stringify(this.cleanBlockJson(r.oldJson)),this.contents.indexOf(r)===-1){for(this.contents.unshift(r);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(ek)}}}cleanBlockJson(r){function a(p){if(p){if(delete p.id,delete p.x,delete p.y,delete p.enabled,p.icons&&p.icons.comment){var b=p.icons.comment;delete b.height,delete b.width,delete b.pinned}b=p.inputs;for(var R in b){var W=b[R];const pe=W.block;W=W.shadow,pe&&a(pe),W&&a(W)}p.next&&(R=p.next,p=R.block,R=R.shadow,p&&a(p),R&&a(R))}}return r=JSON.parse(JSON.stringify(r)),a(r),Object.assign({},{kind:"BLOCK"},r)}},C_=47,Xb=44,M_=16,Yb=20,vw=20,ty=10,jS=0,XS=32,ek=.1,YS=80,tk=4,yw=.4,nk=.8,Ph=45,Bi=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(r,a){if(this.shortcuts.get(r.name)&&!a)throw Error(`Shortcut named "${r.name}" already exists.`);if(this.shortcuts.set(r.name,r),(a=r.keyCodes)&&0<a.length)for(let p=0;p<a.length;p++)this.addKeyMapping(a[p],r.name,!!r.allowCollision)}unregister(r){return this.shortcuts.get(r)?(this.removeAllKeyMappings(r),this.shortcuts.delete(r),!0):(console.warn(`Keyboard shortcut named "${r}" not found.`),!1)}addKeyMapping(r,a,p){r=`${r}`;const b=this.keyMap.get(r);if(b&&!p)throw Error(`Shortcut named "${a}" collides with shortcuts "${b}"`);b&&p?b.unshift(a):this.keyMap.set(r,[a])}removeKeyMapping(r,a,p){const b=this.keyMap.get(r);if(!b)return p||console.warn(`No keyboard shortcut named "${a}" registered with key code "${r}"`),!1;const R=b.indexOf(a);return-1<R?(b.splice(R,1),b.length===0&&this.keyMap.delete(r),!0):(p||console.warn(`No keyboard shortcut named "${a}" registered with key code "${r}"`),!1)}removeAllKeyMappings(r){for(const a of this.keyMap.keys())this.removeKeyMapping(a,r,!0)}setKeyMap(r){this.keyMap.clear();for(const a in r)this.keyMap.set(a,r[a])}getKeyMap(){const r=Object.create(null);for(const[a,p]of this.keyMap)r[a]=p;return r}getRegistry(){const r=Object.create(null);for(const[a,p]of this.shortcuts)r[a]=p;return El(Object.create(null),r)}onKeyDown(r,a){var p=this.serializeKeyEvent_(a);if(p=this.getShortcutNamesByKeyCode(p),!p)return!1;for(let b=0,R;R=p[b];b++){const W=this.shortcuts.get(R);let pe,De;if((pe=W)==null||!pe.preconditionFn||(De=W)!=null&&De.preconditionFn(r)){let Pt,xn;if((Pt=W)!=null&&Pt.callback&&((xn=W)!=null&&xn.callback(r,a,W)))return!0}}return!1}getShortcutNamesByKeyCode(r){return this.keyMap.get(r)||[]}getKeyCodesByShortcutName(r){const a=[];for(const[p,b]of this.keyMap)-1<b.indexOf(r)&&a.push(p);return a}serializeKeyEvent_(r){let a="";for(const p in Bi.modifierKeys)r.getModifierState(p)&&(a!==""&&(a+="+"),a+=p);return a!==""&&r.keyCode?a=a+"+"+r.keyCode:r.keyCode&&(a=String(r.keyCode)),a}checkModifiers_(r){for(let a=0,p;p=r[a];a++)if(!(p in Bi.modifierKeys))throw Error(p+" is not a valid modifier key.")}createSerializedKey(r,a){let p="";if(a){this.checkModifiers_(a);for(const b in Bi.modifierKeys)-1<a.indexOf(Bi.modifierKeys[b])&&(p!==""&&(p+="+"),p+=b)}return p!==""&&r?p=p+"+"+r:r&&(p=`${r}`),p}};Bi.registry=new Bi,function(r){r=r.modifierKeys||(r.modifierKeys={}),r[r.Shift=16]="Shift",r[r.Control=17]="Control",r[r.Alt=18]="Alt",r[r.Meta=91]="Meta"}(Bi||(Bi={}));var tm;(function(r){r.ESCAPE="escape",r.DELETE="delete",r.COPY="copy",r.CUT="cut",r.PASTE="paste",r.UNDO="undo",r.REDO="redo"})(tm||(tm={}));var ny=null,Kb=null;Ss();var nm={};nm.names=tm,nm.registerCopy=hs,nm.registerCut=Mu,nm.registerDefaultShortcuts=Ss,nm.registerDelete=Rc,nm.registerEscape=sd,nm.registerPaste=ic,nm.registerRedo=Xa,nm.registerUndo=Eo;var KS=class{constructor(r,a){this.procedureModelClass=r,this.parameterModelClass=a,this.priority=Xf}save(r){return r=r.getProcedureMap().getProcedures().map(a=>co(a)),r.length?r:null}load(r,a){const p=a.getProcedureMap();for(const b of r)p.add(Qs(this.procedureModelClass,this.parameterModelClass,b,a))}clear(r){r.getProcedureMap().clear()}},A_={};A_.ProcedureSerializer=KS,A_.loadParameter=Ya,A_.loadProcedure=Qs,A_.saveParameter=Zc,A_.saveProcedure=co;var Jb=class{constructor(){this.priority=m_}save(r){const a=[];for(const p of r.getAllVariables())r={name:p.name,id:p.getId()},p.type&&(r.type=p.type),a.push(r);return a.length?a:null}load(r,a){for(const p of r)a.createVariable(p.name,p.type,p.id)}clear(r){r.getVariableMap().clear()}};_s("variables",new Jb);var bw={};bw.VariableSerializer=Jb;var JS={};JS.load=yp,JS.save=sc;var rk={blocks:Nm,exceptions:jf,priorities:Dm,procedures:A_,registry:__,variables:bw,workspaces:JS},QS=class{constructor(r,a,p,b,R){this.workspace=r,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,a=a===void 0?!0:a,p=p===void 0?!0:p;const W=a&&p;a&&(this.hScroll=new zo(r,!0,W,b,R)),p&&(this.vScroll=new zo(r,!1,W,b,R)),W&&(this.corner_=te(Pe.RECT,{height:zo.scrollbarThickness,width:zo.scrollbarThickness,class:"blocklyScrollbarBackground"}),Ge(this.corner_,r.getBubbleCanvas()))}dispose(){at(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const r=this.workspace.getMetrics();if(r){var a=!1,p=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===r.viewWidth&&this.oldHostMetrics_.viewHeight===r.viewHeight&&this.oldHostMetrics_.absoluteTop===r.absoluteTop&&this.oldHostMetrics_.absoluteLeft===r.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===r.scrollWidth&&this.oldHostMetrics_.viewLeft===r.viewLeft&&this.oldHostMetrics_.scrollLeft===r.scrollLeft||(a=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===r.scrollHeight&&this.oldHostMetrics_.viewTop===r.viewTop&&this.oldHostMetrics_.scrollTop===r.scrollTop||(p=!0)):p=a=!0,a||p){try{t.disable$$module$build$src$core$events$utils(),this.hScroll&&a&&this.hScroll.resize(r),this.vScroll&&p&&this.vScroll.resize(r)}finally{t.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==r.viewWidth||this.oldHostMetrics_.absoluteLeft!==r.absoluteLeft){let b;(b=this.corner_)==null||b.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==r.viewHeight||this.oldHostMetrics_.absoluteTop!==r.absoluteTop){let b;(b=this.corner_)==null||b.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=r}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(r,a){this.hScroll&&this.hScroll.setOrigin(r,a),this.vScroll&&this.vScroll.setOrigin(r,a)}set(r,a,p){this.hScroll&&this.hScroll.set(r,!1),this.vScroll&&this.vScroll.set(a,!1),(p||p===void 0)&&(r={},this.hScroll&&(r.x=this.hScroll.getRatio_()),this.vScroll&&(r.y=this.vScroll.getRatio_()),this.workspace.setMetrics(r))}setX(r){this.hScroll&&this.hScroll.set(r,!0)}setY(r){this.vScroll&&this.vScroll.set(r,!0)}setContainerVisible(r){this.hScroll&&this.hScroll.setContainerVisible(r),this.vScroll&&this.vScroll.setContainerVisible(r)}isVisible(){let r=!1;return this.hScroll&&(r=this.hScroll.isVisible()),this.vScroll&&(r=r||this.vScroll.isVisible()),r}setVisible(r){this.hScroll&&this.hScroll.setVisibleInternal(r),this.vScroll&&this.vScroll.setVisibleInternal(r)}resizeContent(r){this.hScroll&&this.hScroll.resizeContentHorizontal(r),this.vScroll&&this.vScroll.resizeContentVertical(r)}resizeView(r){this.hScroll&&this.hScroll.resizeViewHorizontal(r),this.vScroll&&this.vScroll.resizeViewVertical(r)}},Qb=class{constructor(r){this.workspace_=r}getDimensionsPx_(r){let a=0,p=0;return r&&(a=r.getWidth(),p=r.getHeight()),new ws(a,p)}getFlyoutMetrics(r){return r=this.getDimensionsPx_(this.workspace_.getFlyout(r)),{width:r.width,height:r.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const r=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:r.width,height:r.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let r=0,a=0;const p=this.getToolboxMetrics(),b=this.getFlyoutMetrics(),R=!!this.workspace_.getToolbox();var W;const pe=!((W=this.workspace_.getFlyout())!=null&&W.autoClose);W=R?p.position:b.position;const De=W===Qn.TOP;return W===Qn.LEFT&&(R&&(r+=p.width),pe&&(r+=b.width)),De&&(R&&(a+=p.height),pe&&(a+=b.height)),{top:a,left:r}}getViewMetrics(r){r=r?this.workspace_.scale:1;const a=this.getSvgMetrics(),p=this.getToolboxMetrics(),b=this.getFlyoutMetrics(),R=!!this.workspace_.getToolbox();var W;const pe=!((W=this.workspace_.getFlyout())!=null&&W.autoClose);W=R?p.position:b.position;const De=W===Qn.LEFT||W===Qn.RIGHT;return(W===Qn.TOP||W===Qn.BOTTOM)&&(R&&(a.height-=p.height),pe&&(a.height-=b.height)),De&&(R&&(a.width-=p.width),pe&&(a.width-=b.width)),{height:a.height/r,width:a.width/r,top:-this.workspace_.scrollY/r,left:-this.workspace_.scrollX/r}}getContentMetrics(r){r=r?1:this.workspace_.scale;const a=this.workspace_.getBlocksBoundingBox();return{height:(a.bottom-a.top)*r,width:(a.right-a.left)*r,top:a.top*r,left:a.left*r}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(r){if(!this.hasFixedEdges())return{};const a=this.workspace_.isMovableHorizontally(),p=this.workspace_.isMovableVertically();r=r||this.getViewMetrics(!1);const b={};return p||(b.top=r.top,b.bottom=r.top+r.height),a||(b.left=r.left,b.right=r.left+r.width),b}getPaddedContent_(r,a){const p=a.top+a.height,b=a.left+a.width,R=r.width;r=r.height;const W=R/2,pe=r/2;return{top:Math.min(a.top-pe,p-r),bottom:Math.max(p+pe,a.top+r),left:Math.min(a.left-W,b-R),right:Math.max(b+W,a.left+R)}}getScrollMetrics(r,a,p){r=r?this.workspace_.scale:1,a=a||this.getViewMetrics(!1);var b=p||this.getContentMetrics();p=this.getComputedFixedEdges_(a),a=this.getPaddedContent_(a,b),b=p.top!==void 0?p.top:a.top;const R=p.left!==void 0?p.left:a.left;return{top:b/r,left:R/r,width:((p.right!==void 0?p.right:a.right)-R)/r,height:((p.bottom!==void 0?p.bottom:a.bottom)-b)/r}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const r=this.getToolboxMetrics(),a=this.getFlyoutMetrics(!0),p=this.getSvgMetrics(),b=this.getAbsoluteMetrics(),R=this.getViewMetrics(),W=this.getContentMetrics(),pe=this.getScrollMetrics(!1,R,W);return{contentHeight:W.height,contentWidth:W.width,contentTop:W.top,contentLeft:W.left,scrollHeight:pe.height,scrollWidth:pe.width,scrollTop:pe.top,scrollLeft:pe.left,viewHeight:R.height,viewWidth:R.width,viewTop:R.top,viewLeft:R.left,absoluteTop:b.top,absoluteLeft:b.left,svgHeight:p.height,svgWidth:p.width,toolboxWidth:r.width,toolboxHeight:r.height,toolboxPosition:r.position,flyoutWidth:a.width,flyoutHeight:a.height}}};i(Bt.METRICS_MANAGER,Ja,Qb);var Tw=class extends c{constructor(r){super(),this.isBlank=!0,this.recordUndo=!1,this.type=ql,this.isBlank=!!r,r&&(this.workspaceId=r.id)}};i(Bt.EVENT,ql,Tw);var qS=class extends f{constructor(r,a,p){super(r?r.workspace.id:void 0),this.type=po,r&&(this.blockId=r.id,this.isStart=a,this.blocks=p)}toJson(){const r=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return r.isStart=this.isStart,r.blockId=this.blockId,r.blocks=this.blocks,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new qS),a.isStart=r.isStart,a.blockId=r.blockId,a.blocks=r.blocks,a}};i(Bt.EVENT,po,qS);var qb={};qb.bumpIntoBounds=eh,qb.bumpIntoBoundsHandler=la,qb.bumpTopObjectsIntoBounds=Cn;var Zb=class{constructor(r,a){this.connectionCandidate=this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.dragIconData_=[],this.draggingBlock_=r,this.workspace_=a,this.connectionPreviewer=new(_(Bt.CONNECTION_PREVIEWER,this.workspace_.options))(r),this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=Ln(r,this.startXY_)}dispose(){this.dragIconData_.length=0,this.connectionPreviewer.dispose()}startDrag(r,a){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent_(),this.draggingBlock_.bringToFront(!0),Q(),this.workspace_.setResizesEnabled(!1),ra(),this.shouldDisconnect_(a)&&this.disconnectBlock_(a,r),this.draggingBlock_.setDragging(!0);let p;(p=this.workspace_.getLayerManager())==null||p.moveToDragLayer(this.draggingBlock_)}shouldDisconnect_(r){return!!(this.draggingBlock_.getParent()||r&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(r,a){this.draggingBlock_.unplug(r),r=this.pixelsToWorkspaceUnits_(a),r=nn.sum(this.startXY_,r),this.draggingBlock_.translate(r.x,r.y),Bs(this.draggingBlock_)}fireDragStartEvent_(){const r=new(we(po))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));ce(r)}drag(r,a){const p=this.draggingBlock_;this.moveBlock(p,a),this.updateDragTargets(r,p),this.wouldDeleteBlock_=this.wouldDeleteBlock(r,p,a),this.updateCursorDuringBlockDrag_(),this.updateConnectionPreview(p,a)}moveBlock(r,a){a=this.pixelsToWorkspaceUnits_(a),a=nn.sum(this.startXY_,a),r.moveDuringDrag(a)}updateDragTargets(r,a){if(r=this.workspace_.getDragTarget(r),this.dragTarget_!==r){let p;(p=this.dragTarget_)==null||p.onDragExit(a),r==null||r.onDragEnter(a)}r==null||r.onDragOver(a),this.dragTarget_=r}wouldDeleteBlock(r,a,p){return(r=this.workspace_.getDragTarget(r))&&this.workspace_.getComponentManager().hasCapability(r.id,Ia.Capability.DELETE_AREA)?r.wouldDelete(a,!!this.getConnectionCandidate(a,p)):!1}updateConnectionPreview(r,a){a=this.pixelsToWorkspaceUnits_(a);const p=this.connectionCandidate,b=this.getConnectionCandidate(r,a);if(b){this.connectionCandidate=a=p&&this.currCandidateIsBetter(p,a,b)?p:b;var{local:R,neighbour:W}=a;R.type!==$n.OUTPUT_VALUE&&R.type!==$n.PREVIOUS_STATEMENT||!W.isConnected()||W.targetBlock().isInsertionMarker()||this.orphanCanConnectAtEnd(r,W.targetBlock(),R.type)?this.connectionPreviewer.previewConnection(R,W):this.connectionPreviewer.previewReplacement(R,W,W.targetBlock())}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(r,a,p){return!!Ni.getConnectionForOrphanedConnection(r,p===$n.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}currCandidateIsBetter(r,a,p){const{local:b,neighbour:R}=r;r=new nn(b.x,b.y);const W=new nn(R.x,R.y);return a=nn.distance(nn.sum(r,a),W),p.distance>a-t.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(r,a){r=this.getLocalConnections(r);let p=this.connectionCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius,b=null;for(const R of r){const{connection:W,radius:pe}=R.closest(p,a);W&&(b={local:R,neighbour:W,distance:pe},p=pe)}return b}getLocalConnections(r){const a=r.getConnections_(!1),p=r.lastConnectionInStack(!0);return p&&p!==r.nextConnection&&a.push(p),a}endDrag(r,a){if(this.drag(r,a),this.fireDragEndEvent_(),le(),ra(),this.connectionPreviewer.hidePreview(),r=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)||(r=this.getNewLocationAfterDrag_(a).delta),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),!this.maybeDeleteBlock_()){let p;(p=this.workspace_.getLayerManager())==null||p.moveOffDragLayer(this.draggingBlock_,J),this.draggingBlock_.setDragging(!1),r?this.updateBlockAfterMove_():eh(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)}this.connectionPreviewer.dispose(),this.workspace_.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}getNewLocationAfterDrag_(r){r=this.pixelsToWorkspaceUnits_(r);const a=nn.sum(this.startXY_,r);return{delta:r,newLocation:a}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),$s.length=0,!0):!1}updateBlockAfterMove_(){this.fireMoveEvent_(),this.connectionCandidate?this.applyConnections(this.connectionCandidate):this.draggingBlock_.queueRender(),this.draggingBlock_.scheduleSnapAndBump()}applyConnections(r){const{local:a,neighbour:p}=r;if(a.connect(p),this.draggingBlock_.rendered){const b=a.isSuperior()?p:a,R=this.draggingBlock_.getRootBlock();rr().then(()=>{Bo(b.getSourceBlock()),setTimeout(()=>{R.bringToFront()},0)})}}fireDragEndEvent_(){const r=new(we(po))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));ce(r)}updateToolboxStyle_(r){const a=this.workspace_.getToolbox();if(a){const p=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";r&&typeof a.removeStyle=="function"?a.removeStyle(p):r||typeof a.addStyle!="function"||a.addStyle(p)}}fireMoveEvent_(){if(!this.draggingBlock_.isDeadOrDying()){var r=new(we(t.MOVE$$module$build$src$core$events$utils))(this.draggingBlock_);r.setReason(["drag"]),r.oldCoordinate=this.startXY_,r.recordNew(),ce(r)}}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(r){return r=new nn(r.x/this.workspace_.scale,r.y/this.workspace_.scale),this.workspace_.isMutator&&r.scale(1/this.workspace_.options.parentWorkspace.scale),r}dragIcons_(){Te("Blockly.BlockDragger.prototype.dragIcons_","v10","v11")}getInsertionMarkers(){return this.workspace_.getAllBlocks().filter(r=>r.isInsertionMarker())}};i(Bt.BLOCK_DRAGGER,Ja,Zb);var C0={};C0.Bubble=Ji,C0.MiniWorkspaceBubble=jm,C0.TextBubble=E_,C0.TextInputBubble=md;var ZS=class extends xp{constructor(r,a,p,b){super(r),this.type=sh,this.recordUndo=!1,r&&(this.name=a,this.oldValue=p,this.newValue=b)}toJson(){const r=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return r.name=this.name,r.oldValue=this.oldValue,r.newValue=this.newValue,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new ZS),a.name=r.name,a.oldValue=r.oldValue,a.newValue=r.newValue,a}isNull(){return this.oldValue===this.newValue}run(r){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");r=r?this.newValue:this.oldValue,(a=a.getField(this.name))?a.setValue(r):console.warn("Can't set non-existent field: "+this.name)}};i(Bt.EVENT,sh,ZS);var eE=class extends xp{constructor(r){super(r),this.type=t.MOVE$$module$build$src$core$events$utils,r&&(r.isShadow()&&(this.recordUndo=!1),r=this.currentLocation_(),this.oldParentId=r.parentId,this.oldInputName=r.inputName,this.oldCoordinate=r.coordinate)}toJson(){const r=super.toJson();return r.oldParentId=this.oldParentId,r.oldInputName=this.oldInputName,this.oldCoordinate&&(r.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),r.newParentId=this.newParentId,r.newInputName=this.newInputName,this.newCoordinate&&(r.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(r.reason=this.reason),this.recordUndo||(r.recordUndo=this.recordUndo),r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new eE),a.oldParentId=r.oldParentId,a.oldInputName=r.oldInputName,r.oldCoordinate&&(p=r.oldCoordinate.split(","),a.oldCoordinate=new nn(Number(p[0]),Number(p[1]))),a.newParentId=r.newParentId,a.newInputName=r.newInputName,r.newCoordinate&&(p=r.newCoordinate.split(","),a.newCoordinate=new nn(Number(p[0]),Number(p[1]))),r.reason!==void 0&&(a.reason=r.reason),r.recordUndo!==void 0&&(a.recordUndo=r.recordUndo),a}recordNew(){const r=this.currentLocation_();this.newParentId=r.parentId,this.newInputName=r.inputName,this.newCoordinate=r.coordinate}setReason(r){this.reason=r}currentLocation_(){var r=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var a=r.getBlockById(this.blockId);if(!a)throw Error("The block associated with the block move event could not be found");r={};const p=a.getParent();return p?(r.parentId=p.id,(a=p.getInputWithBlock(a))&&(r.inputName=a.name)):r.coordinate=a.getRelativeToSurfaceXY(),r}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&nn.equals(this.oldCoordinate,this.newCoordinate)}run(r){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var p=a.getBlockById(this.blockId);if(p){var b=r?this.newParentId:this.oldParentId,R=r?this.newInputName:this.oldInputName;if(r=r?this.newCoordinate:this.oldCoordinate,b){var W=a.getBlockById(b);if(!W){console.warn("Can't connect to non-existent block: "+b);return}}if(p.getParent()&&p.unplug(),r)R=p.getRelativeToSurfaceXY(),p.moveBy(r.x-R.x,r.y-R.y,this.reason);else{a=p.outputConnection,(!a||p.previousConnection&&p.previousConnection.isConnected())&&(a=p.previousConnection);let pe,De;p=(De=a)==null?void 0:De.type,R?(p=W.getInput(R))&&(pe=p.connection):p===$n.PREVIOUS_STATEMENT&&(pe=W.nextConnection),pe&&a?a.connect(pe):console.warn("Can't connect to non-existent input: "+R)}}else console.warn("Can't move non-existent block: "+this.blockId)}};i(Bt.EVENT,t.MOVE$$module$build$src$core$events$utils,eE);var tE=class extends f{constructor(r,a,p){super(r?r.workspace.id:void 0),this.type=no,r&&(this.blockId=r.id,this.isOpen=a,this.bubbleType=p)}toJson(){const r=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return r.isOpen=this.isOpen,r.bubbleType=this.bubbleType,r.blockId=this.blockId||"",r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new tE),a.isOpen=r.isOpen,a.bubbleType=r.bubbleType,a.blockId=r.blockId,a}},nE;(function(r){r.MUTATOR="mutator",r.COMMENT="comment",r.WARNING="warning"})(nE||(nE={})),i(Bt.EVENT,no,tE);var Ng=class extends c{constructor(r){super(),this.isBlank=!r,r&&(this.commentId=r.id,this.workspaceId=r.workspace.id,this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=oe())}toJson(){const r=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return r.commentId=this.commentId,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new Ng),a.commentId=r.commentId,a}static CommentCreateDeleteHelper(r,a){var p=r.getEventWorkspace_();if(a){if(a=t.createElement$$module$build$src$core$utils$xml("xml"),!r.xml)throw Error("Ecountered a comment event without proper xml");a.appendChild(r.xml),t.domToWorkspace$$module$build$src$core$xml(a,p)}else{if(!r.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(p=p.getCommentById(r.commentId))?p.dispose():console.warn("Can't uncreate non-existent comment: "+r.commentId)}}},rE=class extends Ng{constructor(r,a,p){super(r),this.type=ld,r&&(this.oldContents_=typeof a>"u"?"":a,this.newContents_=typeof p>"u"?"":p)}toJson(){const r=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return r.oldContents=this.oldContents_,r.newContents=this.newContents_,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new rE),a.oldContents_=r.oldContents,a.newContents_=r.newContents,a}isNull(){return this.oldContents_===this.newContents_}run(r){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){var p=r?this.newContents_:this.oldContents_;if(!p)throw Error(r?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");a.setContent(p)}else console.warn("Can't change non-existent comment: "+this.commentId)}};i(Bt.EVENT,ld,rE);var iE=class extends Ng{constructor(r){super(r),this.type=Co,r&&(this.xml=r.toXmlWithXY())}toJson(){const r=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return r.xml=$i(this.xml),r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new iE),a.xml=t.textToDom$$module$build$src$core$utils$xml(r.xml),a}run(r){Ng.CommentCreateDeleteHelper(this,r)}};i(Bt.EVENT,Co,iE);var sE=class extends Ng{constructor(r){super(r),this.type=kh,r&&(this.xml=r.toXmlWithXY())}run(r){Ng.CommentCreateDeleteHelper(this,!r)}toJson(){const r=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return r.xml=$i(this.xml),r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new sE),a.xml=t.textToDom$$module$build$src$core$utils$xml(r.xml),a}};i(Bt.EVENT,kh,sE);var oE=class extends Ng{constructor(r){super(r),this.type=Za,r&&(this.comment_=r,this.oldCoordinate_=r.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setOldCoordinate(r){this.oldCoordinate_=r}toJson(){const r=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return r.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,r.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new oE),p=r.oldCoordinate.split(","),a.oldCoordinate_=new nn(Number(p[0]),Number(p[1])),p=r.newCoordinate.split(","),a.newCoordinate_=new nn(Number(p[0]),Number(p[1])),a}isNull(){return nn.equals(this.oldCoordinate_,this.newCoordinate_)}run(r){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){if(r=r?this.newCoordinate_:this.oldCoordinate_,!r)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var p=a.getRelativeToSurfaceXY();a.moveBy(r.x-p.x,r.y-p.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};i(Bt.EVENT,Za,oE);var aE=class extends f{constructor(r,a,p){super(p),this.type=Aa,this.oldItem=r??void 0,this.newItem=a??void 0}toJson(){const r=super.toJson();return r.oldItem=this.oldItem,r.newItem=this.newItem,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new aE),a.oldItem=r.oldItem,a.newItem=r.newItem,a}};i(Bt.EVENT,Aa,aE),t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.disable$$module$build$src$core$events$utils,t.enable$$module$build$src$core$events$utils,t.getGroup$$module$build$src$core$events$utils,t.setGroup$$module$build$src$core$events$utils;var An={};An.Abstract=c,An.BLOCK_CHANGE=t.CHANGE$$module$build$src$core$events$utils,An.BLOCK_CREATE=t.CREATE$$module$build$src$core$events$utils,An.BLOCK_DELETE=t.DELETE$$module$build$src$core$events$utils,An.BLOCK_DRAG=po,An.BLOCK_FIELD_INTERMEDIATE_CHANGE=sh,An.BLOCK_MOVE=t.MOVE$$module$build$src$core$events$utils,An.BUBBLE_OPEN=no,An.BUMP_EVENTS=ud,An.BlockBase=xp,An.BlockChange=mo,An.BlockCreate=Hv,An.BlockDelete=GS,An.BlockDrag=qS,An.BlockFieldIntermediateChange=ZS,An.BlockMove=eE,An.BubbleOpen=tE,An.BubbleType=nE,An.CHANGE=t.CHANGE$$module$build$src$core$events$utils,An.CLICK=Nu,An.COMMENT_CHANGE=ld,An.COMMENT_CREATE=Co,An.COMMENT_DELETE=kh,An.COMMENT_MOVE=Za,An.CREATE=t.CREATE$$module$build$src$core$events$utils,An.Click=$,An.ClickTarget=M,An.CommentBase=Ng,An.CommentChange=rE,An.CommentCreate=iE,An.CommentDelete=sE,An.CommentMove=oE,An.DELETE=t.DELETE$$module$build$src$core$events$utils,An.FINISHED_LOADING=ql,An.FinishedLoading=Tw,An.MARKER_MOVE=Al,An.MOVE=t.MOVE$$module$build$src$core$events$utils,An.MarkerMove=Gb,An.SELECTED=zs,An.Selected=Gd,An.THEME_CHANGE=Ql,An.TOOLBOX_ITEM_SELECT=Aa,An.TRASHCAN_OPEN=qa,An.ThemeChange=v_,An.ToolboxItemSelect=aE,An.TrashcanOpen=HS,An.UI=ah,An.UiBase=f,An.VAR_CREATE=Qa,An.VAR_DELETE=Du,An.VAR_RENAME=oh,An.VIEWPORT_CHANGE=is,An.VarBase=Sp,An.VarCreate=Ep,An.VarDelete=FS,An.VarRename=US,An.ViewportChange=y_,An.clearPendingUndo=Z,An.disable=t.disable$$module$build$src$core$events$utils,An.disableOrphans=Xe,An.enable=t.enable$$module$build$src$core$events$utils,An.filter=j,An.fire=ce,An.fromJson=Le,An.get=we,An.getDescendantIds=_e,An.getGroup=t.getGroup$$module$build$src$core$events$utils,An.getRecordUndo=oe,An.isEnabled=ne,An.setGroup=t.setGroup$$module$build$src$core$events$utils,An.setRecordUndo=de;var Sw=class extends Kv{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(r){super.setFontConstants_(r),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(r){super.setDynamicProperties_(r),this.SELECTED_GLOW_COLOUR=r.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const a=Number(r.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=a&&!isNaN(a)?a:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=r.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(r=Number(r.getComponentStyle("replacementGlowSize")))&&!isNaN(r)?r:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&at(this.selectedGlowFilter),this.replacementGlowFilter&&at(this.replacementGlowFilter)}makeStartHat(){const r=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,p=us("c",[Mn(25,-r),Mn(71,-r),Mn(a,0)]);return{height:r,width:a,path:p}}makeHexagonal(){function r(p,b,R){var W=p/2;return W=W>a?a:W,R=R?-1:1,p=(b?-1:1)*p/2,xl(-R*W,p)+xl(R*W,p)}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(p){return p/=2,p>a?a:p},height(p){return p},connectionOffsetY(p){return p/2},connectionOffsetX(p){return-p},pathDown(p){return r(p,!1,!1)},pathUp(p){return r(p,!0,!1)},pathRightDown(p){return r(p,!1,!0)},pathRightUp(p){return r(p,!1,!0)}}}makeRounded(){function r(b,R,W){const pe=b>p?b-p:0;b=(b>p?p:b)/2;const De=W===R?"0":"1";return Gr("a","0 0,"+De,b,Mn((W?1:-1)*b,(R?-1:1)*b))+hn("v",(R?-1:1)*pe)+Gr("a","0 0,"+De,b,Mn((W?-1:1)*b,(R?-1:1)*b))}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,p=2*a;return{type:this.SHAPES.ROUND,isDynamic:!0,width(b){return b/=2,b>a?a:b},height(b){return b},connectionOffsetY(b){return b/2},connectionOffsetX(b){return-b},pathDown(b){return r(b,!1,!1)},pathUp(b){return r(b,!0,!1)},pathRightDown(b){return r(b,!1,!0)},pathRightUp(b){return r(b,!1,!0)}}}makeSquared(){function r(p,b,R){p-=2*a;const W=R===b?"0":"1";return Gr("a","0 0,"+W,a,Mn((R?1:-1)*a,(b?-1:1)*a))+hn("v",(b?-1:1)*p)+Gr("a","0 0,"+W,a,Mn((R?-1:1)*a,(b?-1:1)*a))}const a=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(p){return a},height(p){return p},connectionOffsetY(p){return p/2},connectionOffsetX(p){return-p},pathDown(p){return r(p,!1,!1)},pathUp(p){return r(p,!0,!1)},pathRightDown(p){return r(p,!1,!0)},pathRightUp(p){return r(p,!1,!0)}}}shapeFor(r){let a=r.getCheck();switch(!a&&r.targetConnection&&(a=r.targetConnection.getCheck()),r.type){case $n.INPUT_VALUE:case $n.OUTPUT_VALUE:if(r=r.getSourceBlock().getOutputShape(),r!==null)switch(r){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return a&&a.indexOf("Boolean")!==-1?this.HEXAGONAL:a&&a.indexOf("Number")!==-1?this.ROUNDED:(a&&a.indexOf("String"),this.ROUNDED);case $n.PREVIOUS_STATEMENT:case $n.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function r(xn){return us("c",[Mn(xn*R/2,0),Mn(xn*R*3/4,pe/2),Mn(xn*R,pe)])+wl([Mn(xn*R,W)])+us("c",[Mn(xn*R/4,pe/2),Mn(xn*R/2,pe),Mn(xn*R,pe)])+hn("h",xn*b)+us("c",[Mn(xn*R/2,0),Mn(xn*R*3/4,-(pe/2)),Mn(xn*R,-pe)])+wl([Mn(xn*R,-W)])+us("c",[Mn(xn*R/4,-(pe/2)),Mn(xn*R/2,-pe),Mn(xn*R,-pe)])}const a=this.NOTCH_WIDTH,p=this.NOTCH_HEIGHT,b=a/3,R=b/3,W=p/2,pe=W/2,De=r(1),Pt=r(-1);return{type:this.SHAPES.NOTCH,width:a,height:p,pathLeft:De,pathRight:Pt}}makeInsideCorners(){const r=this.CORNER_RADIUS,a=Gr("a","0 0,0",r,Mn(-r,r)),p=Gr("a","0 0,1",r,Mn(-r,r)),b=Gr("a","0 0,0",r,Mn(r,r)),R=Gr("a","0 0,1",r,Mn(r,r));return{width:r,height:r,pathTop:a,pathBottom:b,rightWidth:r,rightHeight:r,pathTopRight:p,pathBottomRight:R}}generateSecondaryColour_(r){return Mc("#000",r,.15)||r}generateTertiaryColour_(r){return Mc("#000",r,.25)||r}createDom(r,a,p){super.createDom(r,a,p),r=te(Pe.DEFS,{},r),a=te(Pe.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},r),te(Pe.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},a),p=te(Pe.FECOMPONENTTRANSFER,{result:"outBlur"},a),te(Pe.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},p),te(Pe.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},a),te(Pe.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},a),this.selectedGlowFilterId=a.id,this.selectedGlowFilter=a,r=te(Pe.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},r),te(Pe.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},r),a=te(Pe.FECOMPONENTTRANSFER,{result:"outBlur"},r),te(Pe.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),te(Pe.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},r),te(Pe.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},r),te(Pe.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},r),this.replacementGlowFilterId=r.id,this.replacementGlowFilter=r}getCSS_(r){return[`${r} .blocklyText,`,`${r} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${r} .blocklyText {`,"fill: #fff;","}",`${r} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${r} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${r} .blocklyNonEditableText>text,`,`${r} .blocklyEditableText>text,`,`${r} .blocklyNonEditableText>g>text,`,`${r} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${r} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${r} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${r} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${r} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${r} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${r} .blocklyDropdownText {`,"fill: #fff !important;","}",`${r}.blocklyWidgetDiv .goog-menuitem,`,`${r}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${r}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${r} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${r} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${r} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Ew=class extends Jv{constructor(r,a){super(r,a)}draw(){const r=this.block_.pathObject;r.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),r.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&r.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(r.outputShapeType=this.info_.outputConnection.shape.type),r.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(r){if(!(0>=r.height)){if(et.isSpacer(r)){const b=r.precedesStatement;var a=r.followsStatement;if(b||a){const R=this.constants_.INSIDE_CORNERS;var p=R.rightHeight;p=r.height-(b?p:0),a=a?R.pathBottomRight:"",r=0<p?hn("V",r.yPos+p):"",this.outlinePath_+=a+r+(b?R.pathTopRight:"");return}}this.outlinePath_+=hn("V",r.yPos+r.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const r=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=oi(r.xPos,this.info_.startY),this.outlinePath_+=hn("h",r.width)}drawFlatBottom_(){const r=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=hn("V",r.baseline),this.outlinePath_+=hn("h",-r.width)}drawInlineInput_(r){this.positionInlineInputConnection_(r);const a=r.input.name;r.connectedBlock||this.info_.isInsertionMarker||(r=Ts(r.xPos+r.connectionWidth,r.centerline-r.height/2)+this.getInlineInputPath(r),this.block_.pathObject.setOutlinePath(a,r))}getInlineInputPath(r){const a=r.width-2*r.connectionWidth,p=r.height;return hn("h",a)+r.shape.pathRightDown(p)+hn("h",-a)+r.shape.pathUp(p)+"z"}drawStatementInput_(r){var a=r.getLastInput();const p=a.xPos+a.notchOffset+a.shape.width,b=this.constants_.INSIDE_CORNERS,R=a.shape.pathRight+hn("h",-(a.notchOffset-b.width))+b.pathTop,W=r.height-2*b.height;a=b.pathBottom+hn("h",a.notchOffset-b.width)+(a.connectedBottomNextConnection?"":a.shape.pathLeft),this.outlinePath_+=hn("H",p)+R+hn("v",W)+a+hn("H",r.xPos+r.width),this.positionStatementInputConnection_(r)}drawConnectionHighlightPath(r){const a=r.connectionModel;if(a.type===$n.NEXT_STATEMENT||a.type===$n.PREVIOUS_STATEMENT||a.type===$n.OUTPUT_VALUE&&!r.isDynamicShape)super.drawConnectionHighlightPath(r);else{r=a.type===$n.INPUT_VALUE?Ts(r.connectionWidth,-r.height/2)+this.getInlineInputPath(r):Ts(r.width,-r.height/2)+r.shape.pathDown(r.height);var p=a.getSourceBlock(),b,R;(R=(b=p.pathObject).addConnectionHighlight)==null||R.call(b,a,r,a.getOffsetInBlock(),p.RTL)}}},M0=class extends ui{constructor(r,a,p,b,R,W,pe){if(super(ui.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",p=Number(Cr(p)),a=Number(Cr(a)),isNaN(p)||isNaN(a))throw Error("Height and width values of an image field must cast to numbers.");if(0>=p||0>=a)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new ws(a,p+M0.Y_PADDING),this.imageHeight=p,typeof R=="function"&&(this.clickHandler=R),r!==ui.SKIP_SETUP&&(pe?this.configure_(pe):(this.flipRtl=!!W,this.altText=Cr(b)||""),this.setValue(Cr(r)))}configure_(r){super.configure_(r),r.flipRtl&&(this.flipRtl=r.flipRtl),r.alt&&(this.altText=Cr(r.alt))}initView(){this.imageElement=te(Pe.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(xs,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(r){return typeof r!="string"?null:r}doValueUpdate_(r){this.value_=r,this.imageElement&&this.imageElement.setAttributeNS(xs,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(r){r!==this.altText&&(this.altText=r||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(r){this.clickHandler=r}getText_(){return this.altText}static fromJson(r){if(!r.src||!r.width||!r.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(r.src,r.width,r.height,void 0,void 0,void 0,r)}};M0.Y_PADDING=1,Ks("field_image",M0),M0.prototype.DEFAULT_VALUE="";var ry=class extends ui{constructor(r,a,p){super(ui.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",r!==ui.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.spellcheck!==void 0&&(this.spellcheck_=r.spellcheck)}initView(){if(!this.getSourceBlock())throw new io;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const r=this.getSourceBlock();if(!r)throw new io;let a;return this.fullBlockClickTarget_=!((a=this.getConstants())==null||!a.FULL_BLOCK_FIELDS)&&r.isSimpleReporter()}doValueInvalid_(r){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,r=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&ne()&&ce(new(we(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,r,this.value_)))}doValueUpdate_(r){this.isTextValid_=this.isDirty_=!0,this.value_=r}applyColour(){const r=this.getSourceBlock();if(!r)throw new io;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",r.style.colourTertiary)):(this.borderRect_.style.display="none",r.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let r;return(r=this.getConstants())!=null&&r.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var r=this.htmlInput_;this.isTextValid_?(ft(r,"blocklyInvalidInput"),cr(r,Gs.INVALID,!1)):(ke(r,"blocklyInvalidInput"),cr(r,Gs.INVALID,!0))}if(r=this.getSourceBlock(),!r)throw new io;this.getConstants().FULL_BLOCK_FIELDS&&r.applyColour()}setSpellcheck(r){r!==this.spellcheck_&&(this.spellcheck_=r,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(r,a=!1){this.workspace_=this.sourceBlock_.workspace,!a&&this.workspace_.options.modalInputs&&(Zl||mn||On)?this.showPromptEditor_():this.showInlineEditor_(a)}showPromptEditor_(){Ko(t.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),r=>{r!==null&&this.setValue(this.getValueFromEditorText_(r)),this.onFinishEditing_(this.value_)})}showInlineEditor_(r){const a=this.getSourceBlock();if(!a)throw new io;Tu(this,a.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,r||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var r=this.getSourceBlock();if(!r)throw new io;t.setGroup$$module$build$src$core$events$utils(!0);const a=Xs();var p=this.getClickTarget_();if(!p)throw Error("A click target has not been set.");ke(p,"editing"),p=document.createElement("input"),p.className="blocklyHtmlInput",p.setAttribute("spellcheck",this.spellcheck_);const b=this.workspace_.getScale();var R=this.getConstants().FIELD_TEXT_FONTSIZE*b+"pt";return a.style.fontSize=R,p.style.fontSize=R,R=ry.BORDERRADIUS*b+"px",this.isFullBlockField()&&(R=this.getScaledBBox(),R=(R.bottom-R.top)/2+"px",r=r.getParent()?r.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,p.style.border=1*b+"px solid "+r,a.style.borderRadius=R,a.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(a.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*b+"px")),p.style.borderRadius=R,a.appendChild(p),p.value=p.defaultValue=this.getEditorText_(this.value_),p.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(p),p}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&ne()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(ce(new(we(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),t.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var r=Xs().style;if(r.width="auto",r.height="auto",r.fontSize="",r.transition="",r.boxShadow="",this.htmlInput_=null,r=this.getClickTarget_(),!r)throw Error("A click target has not been set.");ft(r,"editing")}onFinishEditing_(r){}bindInputEvents_(r){this.onKeyDownWrapper_=Ee(r,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=Ee(r,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(rt(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(rt(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(r){r.key==="Enter"?(vl(),ba()):r.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),vl(),ba()):r.key==="Tab"&&(vl(),ba(),this.sourceBlock_.tab(this,!r.shiftKey),r.preventDefault())}onHtmlInputChange_(r){r=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&ne()&&this.value_!==r&&ce(new(we(sh))(this.sourceBlock_,this.name||null,r,this.value_))}setEditorValue_(r,a=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(r)),this.setValue(r,a)}resizeEditor_(){var r=this.getSourceBlock();if(!r)throw new io;const a=Xs(),p=this.getScaledBBox();a.style.width=p.right-p.left+"px",a.style.height=p.bottom-p.top+"px",r=new nn(r.RTL?p.right-a.offsetWidth:p.left,p.top),a.style.left=r.x+"px",a.style.top=r.y+"px"}repositionForWindowResize(){const r=this.getSourceBlock();return r instanceof em?(eh(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),r)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(r){return`${r}`}getValueFromEditorText_(r){return r}};ry.BORDERRADIUS=4;var I_=class extends ry{constructor(r,a,p){super(r,a,p)}doClassValidation_(r){return r===void 0?null:`${r}`}static fromJson(r){return new this(Cr(r.text),void 0,r)}};Ks("field_input",I_),I_.prototype.DEFAULT_VALUE="";var $w=class extends zb{constructor(r){super(r)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(r){return!!r.outputConnection}hasRightSquareCorner(r){return!!r.outputConnection&&!r.statementInputCount&&!r.nextConnection}},e1=class extends Yv{constructor(r,a){if(super(r,a),this.connectedBottomNextConnection=!1,this.connectedBlock){for(r=this.connectedBlock;a=r.getNextBlock();)r=a;r.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},xw=class extends ti{constructor(r){super(r),this.width=this.height=0,this.type|=et.getType("RIGHT_CONNECTION")}},ww=class extends NS{constructor(r){super(r)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(r){const a=(r.hat?r.hat==="cap":this.constants_.ADD_START_HATS)&&!r.outputConnection&&!r.previousConnection;return!!r.outputConnection||a}hasRightSquareCorner(r){return!!r.outputConnection&&!r.statementInputCount&&!r.nextConnection}},Cw=class extends x_{constructor(r,a){super(r,a),this.isInline=!0,this.renderer_=r,this.constants_=this.renderer_.getConstants(),this.topRow=new ww(this.constants_),this.bottomRow=new $w(this.constants_),this.isMultiRow=!a.getInputsInline()||a.isCollapsed(),this.hasStatementInput=0<a.statementInputCount,this.rightSide=this.outputConnection?new xw(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(r,a){return a?a instanceof Xm||r instanceof gd||a instanceof gd?!0:r instanceof t.ValueInput$$module$build$src$core$inputs$value_input||r instanceof Zf||r instanceof Xm?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(r){return r.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(r)}getInRowSpacing_(r,a){return r&&a||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!r&&a&&et.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:r&&et.isLeftRoundedCorner(r)&&a&&(et.isPreviousConnection(a)||et.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:r&&et.isLeftSquareCorner(r)&&a&&et.isHat(a)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(r,a){if(et.isTopRow(r)&&et.isBottomRow(a))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const p=et.isInputRow(r)&&r.hasStatement,b=et.isInputRow(a)&&a.hasStatement;return b||p?(r=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),b&&p?Math.max(r,this.constants_.DUMMY_INPUT_MIN_HEIGHT):r):et.isTopRow(r)?r.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):et.isBottomRow(a)?this.outputConnection?!a.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(r,a){const p=this.width-this.startX;return et.isInputRow(r)&&r.hasStatement||et.isInputRow(a)&&a.hasStatement?Math.max(p,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):p}getElemCenterline_(r,a){if(r.hasStatement&&!et.isSpacer(a)&&!et.isStatementInput(a))return r.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(et.isInlineInput(a)&&a instanceof Lg){const p=a.connectedBlock;if(p&&p.outputConnection&&p.nextConnection)return r.yPos+p.height/2}return super.getElemCenterline_(r,a)}addInput_(r,a){if((r instanceof Zf||r instanceof Xm)&&a.hasDummyInput&&a.align===t.Align$$module$build$src$core$inputs$align.LEFT&&r.align===t.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(a,r);else if(r instanceof gd){a.elements.push(new e1(this.constants_,r)),a.hasStatement=!0,a.align===null&&(a.align=r.align);return}super.addInput_(r,a)}addAlignmentPadding_(r,a){if(this.rightAlignedDummyInputs.get(r)){let p;for(let b=0;b<r.elements.length;b++){const R=r.elements[b];if(et.isSpacer(R)&&(p=R),et.isField(R)&&R instanceof $_&&R.parentInput===this.rightAlignedDummyInputs.get(r))break}if(p){p.width+=a,r.width+=a;return}}super.addAlignmentPadding_(r,a)}adjustXPosition_(){const r=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let a=r;for(let R=2;R<this.rows.length-1;R+=2){var p=this.rows[R-1];const W=this.rows[R];var b=this.rows[R+1];if(p=R===2?!!this.topRow.hasPreviousConnection:!!p.followsStatement,b=R+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!b.precedesStatement,et.isInputRow(W)&&W.hasStatement){W.measure();let pe,De;a=W.width-((De=(pe=W.getLastInput())==null?void 0:pe.width)!=null?De:0)+r}else if(p&&(R===2||b)&&et.isInputRow(W)&&!W.hasStatement){b=W.xPos,p=null;for(let pe=0;pe<W.elements.length;pe++){const De=W.elements[pe];et.isSpacer(De)&&(p=De),p&&(et.isField(De)||et.isInput(De))&&b<a&&!(et.isField(De)&&De instanceof $_&&(De.field instanceof ha||De.field instanceof M0))&&(p.width+=a-b),b+=De.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var r=this.outputConnection.shape;if("isDynamic"in r&&r.isDynamic){for(var a=0,p=0;p<this.rows.length;p++){const b=this.rows[p];b.yPos=a,a+=b.height}this.height=a,p=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,a=r.height(p),p=r.width(p),this.outputConnection.height=a,this.outputConnection.width=p,this.outputConnection.startX=p,this.outputConnection.connectionOffsetY=r.connectionOffsetY(a),this.outputConnection.connectionOffsetX=r.connectionOffsetX(p),r=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(r=p,this.rightSide.height=a,this.rightSide.width=r,this.rightSide.centerline=a/2,this.rightSide.xPos=this.width+r),this.startX=p,this.width+=p+r,this.widthWithChildren+=p+r}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var r=0,a=0;a<this.rows.length;a++){var p=this.rows[a];if(!et.isInputRow(p))continue;r=p.elements[p.elements.length-2];let b=this.getNegativeSpacing_(p.elements[1]),R=this.getNegativeSpacing_(r);r=b+R;const W=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-r<W&&(r=this.width-W,b=r/2,R=r/2),p.elements.unshift(new Yd(this.constants_,-b)),p.elements.push(new Yd(this.constants_,-R))}if(r)for(this.width-=r,this.widthWithChildren-=r,this.rightSide.xPos-=r,a=0;a<this.rows.length;a++)p=this.rows[a],et.isTopOrBottomRow(p)&&(p.elements[1].width-=r),p.width-=r,p.widthWithConnectedBlocks-=r}}getNegativeSpacing_(r){if(!r||!this.outputConnection)return 0;const a=this.outputConnection.width;var p=this.outputConnection.shape.type;const b=this.constants_;if(1<this.inputRows.length)switch(p){case b.SHAPES.ROUND:return p=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,p=this.height/2>p?p:this.height/2,a-p*(1-Math.sin(Math.acos((p-this.constants_.SMALL_PADDING)/p)));default:return 0}if(et.isInlineInput(r)&&r instanceof Lg){const R=r.connectedBlock;return r=R?R.pathObject.outputShapeType:r.shape.type,r==null||R&&R.outputConnection&&(R.statementInputCount||R.nextConnection)||p===b.SHAPES.HEXAGONAL&&p!==r?0:a-this.constants_.SHAPE_IN_SHAPE_PADDING[p][r]}return et.isField(r)&&r instanceof $_?p===b.SHAPES.ROUND&&r.field instanceof I_?a-2.75*b.GRID_UNIT:a-this.constants_.SHAPE_IN_SHAPE_PADDING[p][0]:et.isIcon(r)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let b=2;b<this.rows.length-1;b+=2){const R=this.rows[b-1],W=this.rows[b],pe=this.rows[b+1];var r=b===2,a=b+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!pe.precedesStatement;if(r?this.topRow.hasPreviousConnection:R.followsStatement){var p=W.elements[1];if(p=W.elements.length===3&&p instanceof $_&&(p.field instanceof ha||p.field instanceof M0),!r&&p)R.height-=this.constants_.SMALL_PADDING,pe.height-=this.constants_.SMALL_PADDING,W.height-=this.constants_.MEDIUM_PADDING;else if(!r&&!a)R.height+=this.constants_.SMALL_PADDING;else if(a){for(r=!1,a=0;a<W.elements.length;a++)if(p=W.elements[a],p instanceof Lg&&et.isInlineInput(p)&&p.connectedBlock&&!p.connectedBlock.isShadow()&&40<=p.connectedBlock.getHeightWidth().height){r=!0;break}r&&(R.height-=this.constants_.SMALL_PADDING,pe.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},T=class extends Wb{constructor(r,a,p){super(r,a,p),this.markerCircle=null}showWithInputOutput(r){const a=r.getSourceBlock();r=r.getLocation().getOffsetInBlock(),this.positionCircle(r.x,r.y),this.setParent_(a),this.showCurrent_()}showWithOutput_(r){this.showWithInputOutput(r)}showWithInput_(r){this.showWithInputOutput(r)}showWithBlock_(r){r=r.getLocation();const a=r.getHeightWidth();this.positionRect_(0,0,a.width,a.height),this.setParent_(r),this.showCurrent_()}positionCircle(r,a){let p;(p=this.markerCircle)==null||p.setAttribute("cx",`${r}`);let b;(b=this.markerCircle)==null||b.setAttribute("cy",`${a}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=te(Pe.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const r=this.getBlinkProperties_();te(Pe.ANIMATE,r,this.markerCircle)}return this.markerSvg_}applyColour_(r){super.applyColour_(r);let a;(a=this.markerCircle)==null||a.setAttribute("fill",this.colour_);let p;if((p=this.markerCircle)==null||p.setAttribute("stroke",this.colour_),this.isCursor()){r=this.colour_+";transparent;transparent;";let b;(b=this.markerCircle)==null||b.firstElementChild.setAttribute("values",r)}}},C=class extends Qv{constructor(r,a,p){super(r,a,p),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=p}setPath(r){super.setPath(r),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",r)}applyColour(r){super.applyColour(r);const a=r.getParent();r.isShadow()&&a&&this.svgPath.setAttribute("stroke",a.style.colourTertiary);for(const p of this.outlines.values())p.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const r of this.outlines.values())r.setAttribute("transform","scale(-1 1)")}updateSelected(r){this.setClass_("blocklySelected",r),r?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(r){this.setClass_("blocklyReplaceable",r),r?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(r,a){r=r.getParentInput().name,(r=this.getOutlinePath(r))&&(a?r.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):r.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const r of this.outlines.keys())this.remainingOutlines.add(r)}endDrawing(){if(this.remainingOutlines.size)for(const r of this.remainingOutlines)this.removeOutlinePath(r);this.remainingOutlines.clear()}setOutlinePath(r,a){r=this.getOutlinePath(r),r.setAttribute("d",a),r.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(r){return this.outlines.has(r)||this.outlines.set(r,te(Pe.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(r),this.outlines.get(r)}removeOutlinePath(r){let a,p;(a=this.outlines.get(r))==null||(p=a.parentNode)==null||p.removeChild(this.outlines.get(r)),this.outlines.delete(r)}},F=class extends qv{constructor(r){super(r)}makeConstants_(){return new Sw}makeRenderInfo_(r){return new Cw(this,r)}makeDrawer_(r,a){return new Ew(r,a)}makeMarkerDrawer(r,a){return new T(r,this.getConstants(),a)}makePathObject(r,a){return new C(r,a,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(r,a,p){return Te("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===$n.OUTPUT_VALUE?r.isConnected()?Ip.PREVIEW_TYPE.REPLACEMENT_FADE:Ip.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(r,a,p)}};Js("zelos",F);var Y={};Y.BottomRow=$w,Y.ConstantProvider=Sw,Y.Drawer=Ew,Y.MarkerSvg=T,Y.PathObject=C,Y.RenderInfo=Cw,Y.Renderer=F,Y.RightConnectionShape=xw,Y.StatementInput=e1,Y.TopRow=ww,xo();var ue={};ue.registerCleanup=Wr,ue.registerCollapse=Oi,ue.registerCollapseExpandBlock=Ru,ue.registerComment=od,ue.registerDefaultOptions=xo,ue.registerDelete=Zs,ue.registerDeleteAll=Iu,ue.registerDisable=ku,ue.registerDuplicate=ho,ue.registerExpand=Wi,ue.registerHelp=$o,ue.registerInline=Ca,ue.registerRedo=Lr,ue.registerUndo=br;var ye=class extends ry{constructor(r,a,p){super(ui.SKIP_SETUP),this.clockwise=ye.CLOCKWISE,this.offset=ye.OFFSET,this.wrap=ye.WRAP,this.round=ye.ROUND,this.boundEvents=[],this.symbol_=this.gauge=this.line=null,r!==ui.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(r),a&&this.setValidator(a))}configure_(r){switch(super.configure_(r),r.mode){case He.COMPASS:this.clockwise=!0,this.offset=90;break;case He.PROTRACTOR:this.clockwise=!1,this.offset=0}r.clockwise&&(this.clockwise=r.clockwise),r.offset&&(this.offset=r.offset),r.wrap&&(this.wrap=r.wrap),r.round&&(this.round=r.round)}initView(){super.initView(),this.symbol_=te(Pe.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("°")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph()}showEditor_(r){super.showEditor_(r,Zl||mn||On),r=this.dropdownCreate(),jl().appendChild(r),this.sourceBlock_ instanceof em&&Od(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),Ye(this,this.dropdownDispose.bind(this)),this.updateGraph()}dropdownCreate(){const r=te(Pe.SVG,{xmlns:Sg,"xmlns:html":Dc,"xmlns:xlink":xs,version:"1.1",height:2*ye.HALF+"px",width:2*ye.HALF+"px"});r.style.touchAction="none";const a=te(Pe.CIRCLE,{cx:ye.HALF,cy:ye.HALF,r:ye.RADIUS,class:"blocklyAngleCircle"},r);this.gauge=te(Pe.PATH,{class:"blocklyAngleGauge"},r),this.line=te(Pe.LINE,{x1:ye.HALF,y1:ye.HALF,class:"blocklyAngleLine"},r);for(let p=0;360>p;p+=15)te(Pe.LINE,{x1:ye.HALF+ye.RADIUS,y1:ye.HALF,x2:ye.HALF+ye.RADIUS-(p%45===0?10:5),y2:ye.HALF,class:"blocklyAngleMarks",transform:"rotate("+p+","+ye.HALF+","+ye.HALF+")"},r);return this.boundEvents.push(Ee(r,"click",this,this.hide)),this.boundEvents.push(Ee(a,"pointerdown",this,this.onMouseMove_,!0)),this.boundEvents.push(Ee(a,"pointermove",this,this.onMouseMove_,!0)),r}dropdownDispose(){for(const r of this.boundEvents)rt(r);this.boundEvents.length=0,this.line=this.gauge=null}hide(){bs(this),vl()}onMouseMove_(r){var a=this.gauge.ownerSVGElement.getBoundingClientRect();const p=r.clientX-a.left-ye.HALF;r=r.clientY-a.top-ye.HALF,a=Math.atan(-r/p),isNaN(a)||(a=ys(a),0>p?a+=180:0<r&&(a+=360),a=this.clockwise?this.offset+360-a:360-(this.offset-a),this.displayMouseOrKeyboardValue(a))}displayMouseOrKeyboardValue(r){if(this.round&&(r=Math.round(r/this.round)*this.round),r=this.wrapValue(r),r!==this.value_){const a=this.value_;this.setEditorValue_(r,!1),this.sourceBlock_&&ne()&&this.value_!==a&&ce(new(we(sh))(this.sourceBlock_,this.name||null,a,this.value_))}}updateGraph(){if(this.gauge&&this.line){var r=Number(this.getText())+this.offset,a=Ec(r%360);r=["M ",ye.HALF,",",ye.HALF];var p=ye.HALF,b=ye.HALF;if(!isNaN(a)){const R=Number(this.clockwise),W=Ec(this.offset),pe=Math.cos(W)*ye.RADIUS,De=Math.sin(W)*-ye.RADIUS;R&&(a=2*W-a),p+=Math.cos(a)*ye.RADIUS,b-=Math.sin(a)*ye.RADIUS,a=Math.abs(Math.floor((a-W)/Math.PI)%2),R&&(a=1-a),r.push(" l ",pe,",",De," A ",ye.RADIUS,",",ye.RADIUS," 0 ",a," ",R," ",p,",",b," z")}this.gauge.setAttribute("d",r.join("")),this.line.setAttribute("x2",`${p}`),this.line.setAttribute("y2",`${b}`)}}onHtmlInputKeyDown_(r){super.onHtmlInputKeyDown_(r);var a=this.getSourceBlock();if(!a)throw new io;let p=0;switch(r.key){case"ArrowLeft":p=a.RTL?1:-1;break;case"ArrowRight":p=a.RTL?-1:1;break;case"ArrowDown":p=-1;break;case"ArrowUp":p=1}p&&(a=this.getValue(),this.displayMouseOrKeyboardValue(a+p*this.round),r.preventDefault(),r.stopPropagation())}doClassValidation_(r){return r=Number(r),isNaN(r)||!isFinite(r)?null:this.wrapValue(r)}wrapValue(r){return r%=360,0>r&&(r+=360),r>this.wrap&&(r-=360),r}static fromJson(r){return new this(r.angle,void 0,r)}};ye.HALF=50,ye.RADIUS=ye.HALF-1,ye.CLOCKWISE=!1,ye.OFFSET=0,ye.WRAP=360,ye.ROUND=15,Ks("field_angle",ye),ye.prototype.DEFAULT_VALUE=0,$t(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: 0.8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: 0.8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`);var He;(function(r){r.COMPASS="compass",r.PROTRACTOR="protractor"})(He||(He={}));var Qe=class extends ui{constructor(r,a,p){super(ui.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=Qe.CHECK_CHAR,r!==ui.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.checkCharacter&&(this.checkChar=r.checkCharacter)}saveState(){const r=this.saveLegacyState(Qe);return r!==null?r:this.getValueBoolean()}initView(){super.initView();const r=this.getTextElement();ke(r,"blocklyCheckbox"),r.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(r){this.checkChar=r||Qe.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(r){return r===!0||r==="TRUE"?"TRUE":r===!1||r==="FALSE"?"FALSE":null}doValueUpdate_(r){this.value_=this.convertValueToBool_(r),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(r){return typeof r=="string"?r==="TRUE":!!r}static fromJson(r){return new this(r.checked,void 0,r)}};Qe.CHECK_CHAR="✓",Ks("field_checkbox",Qe),Qe.prototype.DEFAULT_VALUE=!1;var ct=class extends ui{constructor(r,a,p){super(ui.SKIP_SETUP),this.highlightedIndex=this.picker=null,this.boundEvents=[],this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles=this.colours=null,this.columns=0,r!==ui.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.colourOptions&&(this.colours=r.colourOptions),r.colourTitles&&(this.titles=r.colourTitles),r.columns&&(this.columns=r.columns)}initView(){this.size_=new ws(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1",this.getBorderRect().setAttribute("stroke","#fff"),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const r=this.getSourceBlock();if(!r)throw new io;const a=this.getConstants();return r.isSimpleReporter()&&!(a==null||!a.FIELD_COLOUR_FULL_BLOCK)}applyColour(){const r=this.getSourceBlock();if(!r)throw new io;if(this.fieldGroup_){var a=this.borderRect_;if(!a)throw Error("The border rect has not been initialized");this.isFullBlockField()?(a.style.display="none",r.pathObject.svgPath.setAttribute("fill",this.getValue()),r.pathObject.svgPath.setAttribute("stroke","#fff")):(a.style.display="block",a.style.fill=this.getValue())}}getSize(){let r;return(r=this.getConstants())!=null&&r.FIELD_COLOUR_FULL_BLOCK&&(this.render_(),this.isDirty_=!1),super.getSize()}render_(){super.render_();const r=this.getSourceBlock();if(!r)throw new io;r.applyColour()}updateSize_(r){var a=this.getConstants();this.isFullBlockField()?(r=2*(r??0),a=a.FIELD_TEXT_HEIGHT):(r=a.FIELD_COLOUR_DEFAULT_WIDTH,a=a.FIELD_COLOUR_DEFAULT_HEIGHT),this.size_.height=a,this.size_.width=r,this.positionBorderRect_()}doClassValidation_(r){return typeof r!="string"?null:Wa(r)}getText(){let r=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(r)&&(r="#"+r[1]+r[3]+r[5]),r}setColours(r,a){return this.colours=r,a&&(this.titles=a),this}setColumns(r){return this.columns=r,this}showEditor_(){this.dropdownCreate(),jl().appendChild(this.picker),Ye(this,this.dropdownDispose.bind(this)),this.picker.focus({preventScroll:!0})}onClick(r){r=(r=r.target)&&r.getAttribute("data-colour"),r!==null&&(this.setValue(r),bs(this))}onKeyDown(r){let a=!0;var p;switch(r.key){case"ArrowUp":this.moveHighlightBy(0,-1);break;case"ArrowDown":this.moveHighlightBy(0,1);break;case"ArrowLeft":this.moveHighlightBy(-1,0);break;case"ArrowRight":this.moveHighlightBy(1,0);break;case"Enter":(p=this.getHighlighted())&&(p=p.getAttribute("data-colour"),p!==null&&this.setValue(p)),ba();break;default:a=!1}a&&r.stopPropagation()}moveHighlightBy(r,a){if(this.highlightedIndex){var p=this.colours||ct.COLOURS,b=this.columns||ct.COLUMNS,R=this.highlightedIndex%b,W=Math.floor(this.highlightedIndex/b);R+=r,W+=a,0>r?0>R&&0<W?(R=b-1,W--):0>R&&(R=0):0<r?R>b-1&&W<Math.floor(p.length/b)-1?(R=0,W++):R>b-1&&R--:0>a?0>W&&(W=0):0<a&&W>Math.floor(p.length/b)-1&&(W=Math.floor(p.length/b)-1),this.setHighlightedCell(this.picker.childNodes[W].childNodes[R],W*b+R)}}onMouseMove(r){const a=(r=r.target)&&Number(r.getAttribute("data-index"));a!==null&&a!==this.highlightedIndex&&this.setHighlightedCell(r,a)}onMouseEnter(){let r;(r=this.picker)==null||r.focus({preventScroll:!0})}onMouseLeave(){var r;(r=this.picker)==null||r.blur(),(r=this.getHighlighted())&&ft(r,"blocklyColourHighlighted")}getHighlighted(){if(!this.highlightedIndex)return null;const r=this.columns||ct.COLUMNS,a=this.picker.childNodes[Math.floor(this.highlightedIndex/r)];return a?a.childNodes[this.highlightedIndex%r]:null}setHighlightedCell(r,a){const p=this.getHighlighted();p&&ft(p,"blocklyColourHighlighted"),ke(r,"blocklyColourHighlighted"),this.highlightedIndex=a,(r=r.getAttribute("id"))&&this.picker&&cr(this.picker,Gs.ACTIVEDESCENDANT,r)}dropdownCreate(){const r=this.columns||ct.COLUMNS,a=this.colours||ct.COLOURS,p=this.titles||ct.TITLES,b=this.getValue(),R=document.createElement("table");R.className="blocklyColourTable",R.tabIndex=0,R.dir="ltr",Vr(R,Pc.GRID),cr(R,Gs.EXPANDED,!0),cr(R,Gs.ROWCOUNT,Math.floor(a.length/r)),cr(R,Gs.COLCOUNT,r);let W;for(let pe=0;pe<a.length;pe++){pe%r===0&&(W=document.createElement("tr"),Vr(W,Pc.ROW),R.appendChild(W));const De=document.createElement("td");W.appendChild(De),De.setAttribute("data-colour",a[pe]),De.title=p[pe]||a[pe],De.id=re(),De.setAttribute("data-index",`${pe}`),Vr(De,Pc.GRIDCELL),cr(De,Gs.LABEL,a[pe]),cr(De,Gs.SELECTED,a[pe]===b),De.style.backgroundColor=a[pe],a[pe]===b&&(De.className="blocklyColourSelected",this.highlightedIndex=pe)}this.boundEvents.push(Ee(R,"pointerdown",this,this.onClick,!0)),this.boundEvents.push(Ee(R,"pointermove",this,this.onMouseMove,!0)),this.boundEvents.push(Ee(R,"pointerenter",this,this.onMouseEnter,!0)),this.boundEvents.push(Ee(R,"pointerleave",this,this.onMouseLeave,!0)),this.boundEvents.push(Ee(R,"keydown",this,this.onKeyDown,!1)),this.picker=R}dropdownDispose(){for(const r of this.boundEvents)rt(r);this.boundEvents.length=0,this.highlightedIndex=this.picker=null}static fromJson(r){return new this(r.colour,void 0,r)}};ct.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),ct.TITLES=[],ct.COLUMNS=7,ct.prototype.DEFAULT_VALUE=ct.COLOURS[0],Ks("field_colour",ct),$t(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: 0.5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`);var Wt=class extends ha{constructor(r,a,p){super(String(r??""),a,p),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(r){return new this(Cr(r.text),void 0,r)}};Ks("field_label_serializable",Wt);var Vt=class extends I_{constructor(r,a,p){super(ui.SKIP_SETUP),this.textGroup=null,this.maxLines_=1/0,this.isOverflowedY_=!1,r!==ui.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.maxLines&&this.setMaxLines(r.maxLines)}toXml(r){return r.textContent=this.getValue().replace(/\n/g,"&#10;"),r}fromXml(r){this.setValue(r.textContent.replace(/&#10;/g,`
`))}saveState(){const r=this.saveLegacyState(Vt);return r!==null?r:this.getValue()}loadState(r){this.loadLegacyState(ui,r)||this.setValue(r)}initView(){this.createBorderRect_(),this.textGroup=te(Pe.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const r=this.getSourceBlock();if(!r)throw new io;let a=this.getText();if(!a)return ui.NBSP;const p=a.split(`
`);a="";const b=this.isOverflowedY_?this.maxLines_:p.length;for(let R=0;R<b;R++){let W=p[R];W.length>this.maxDisplayLength?W=W.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&R===b-1&&(W=W.substring(0,W.length-3)+"..."),W=W.replace(/\s/g,ui.NBSP),a+=W,R!==b-1&&(a+=`
`)}return r.RTL&&(a+="‏"),a}doValueUpdate_(r){super.doValueUpdate_(r),this.value_!==null&&(this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_)}render_(){var r=this.getSourceBlock();if(!r)throw new io;for(var a,p=this.textGroup;a=p.firstChild;)p.removeChild(a);a=this.getDisplayText_().split(`
`);let b=0;for(let R=0;R<a.length;R++){const W=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;te(Pe.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:b+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},p).appendChild(document.createTextNode(a[R])),b+=W}this.isBeingEdited_&&(p=this.htmlInput_,this.isOverflowedY_?ke(p,"blocklyHtmlTextAreaInputOverflowedY"):ft(p,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(r.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),r=this.htmlInput_,this.isTextValid_?(ft(r,"blocklyInvalidInput"),cr(r,Gs.INVALID,!1)):(ke(r,"blocklyInvalidInput"),cr(r,Gs.INVALID,!0)))}updateSize_(){var r=this.textGroup.childNodes;const a=this.getConstants().FIELD_TEXT_FONTSIZE,p=this.getConstants().FIELD_TEXT_FONTWEIGHT,b=this.getConstants().FIELD_TEXT_FONTFAMILY;let R=0,W=0;for(var pe=0;pe<r.length;pe++){var De=We(r[pe],a,p,b);De>R&&(R=De),W+=this.getConstants().FIELD_TEXT_HEIGHT+(0<pe?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(r=String(this.value_).split(`
`),pe=te(Pe.TEXT,{class:"blocklyText blocklyMultilineText"}),De=0;De<r.length;De++){r[De].length>this.maxDisplayLength&&(r[De]=r[De].substring(0,this.maxDisplayLength)),pe.textContent=r[De];const Pt=We(pe,a,p,b);Pt>R&&(R=Pt)}R+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(W+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,R+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",`${R}`),this.borderRect_.setAttribute("height",`${W}`)),this.size_.width=R,this.size_.height=W,this.positionBorderRect_()}showEditor_(r,a){super.showEditor_(r,a),this.forceRerender()}widgetCreate_(){const r=Xs(),a=this.workspace_.getScale(),p=document.createElement("textarea");p.className="blocklyHtmlInput blocklyHtmlTextAreaInput",p.setAttribute("spellcheck",String(this.spellcheck_));var b=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";r.style.fontSize=b,p.style.fontSize=b,p.style.borderRadius=I_.BORDERRADIUS*a+"px",b=this.getConstants().FIELD_BORDER_RECT_X_PADDING*a;const R=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*a/2;return p.style.padding=R+"px "+b+"px "+R+"px "+b+"px",b=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,p.style.lineHeight=b*a+"px",r.appendChild(p),p.value=p.defaultValue=this.getEditorText_(this.value_),p.setAttribute("data-untyped-default-value",String(this.value_)),p.setAttribute("data-old-value",""),un?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(p),p}setMaxLines(r){typeof r=="number"&&0<r&&r!==this.maxLines_&&(this.maxLines_=r,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(r){r.key!=="Enter"&&super.onHtmlInputKeyDown_(r)}static fromJson(r){return new this(Cr(r.text),void 0,r)}};Ks("field_multilinetext",Vt),$t(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`);var Zt=class extends ry{constructor(r,a,p,b,R,W){super(ui.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,r!==ui.SKIP_SETUP&&(W?this.configure_(W):this.setConstraints(a,p,b),this.setValue(r),R&&this.setValidator(R))}configure_(r){super.configure_(r),this.setMinInternal(r.min),this.setMaxInternal(r.max),this.setPrecisionInternal(r.precision)}setConstraints(r,a,p){this.setMinInternal(r),this.setMaxInternal(a),this.setPrecisionInternal(p),this.setValue(this.getValue())}setMin(r){this.setMinInternal(r),this.setValue(this.getValue())}setMinInternal(r){r==null?this.min_=-1/0:(r=Number(r),isNaN(r)||(this.min_=r))}getMin(){return this.min_}setMax(r){this.setMaxInternal(r),this.setValue(this.getValue())}setMaxInternal(r){r==null?this.max_=1/0:(r=Number(r),isNaN(r)||(this.max_=r))}getMax(){return this.max_}setPrecision(r){this.setPrecisionInternal(r),this.setValue(this.getValue())}setPrecisionInternal(r){this.precision_=Number(r)||0;let a=String(this.precision_);a.indexOf("e")!==-1&&(a=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const p=a.indexOf(".");this.decimalPlaces=p===-1?r?0:null:a.length-p-1}getPrecision(){return this.precision_}doClassValidation_(r){return r===null||(r=`${r}`.replace(/O/gi,"0"),r=r.replace(/,/g,""),r=r.replace(/infinity/i,"Infinity"),r=Number(r||0),isNaN(r))?null:(r=Math.min(Math.max(r,this.min_),this.max_),this.precision_&&isFinite(r)&&(r=Math.round(r/this.precision_)*this.precision_),this.decimalPlaces!==null&&(r=Number(r.toFixed(this.decimalPlaces))),r)}widgetCreate_(){const r=super.widgetCreate_();return-1/0<this.min_&&(r.min=`${this.min_}`,cr(r,Gs.VALUEMIN,this.min_)),1/0>this.max_&&(r.max=`${this.max_}`,cr(r,Gs.VALUEMAX,this.max_)),r}static fromJson(r){return new this(r.value,void 0,void 0,void 0,void 0,r)}};Ks("field_number",Zt),Zt.prototype.DEFAULT_VALUE=0;var Tn=class extends Xd{constructor(r,a,p,b,R){super(ui.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=Tn.dropdownCreate,this.defaultVariableName=typeof r=="string"?r:"",this.size_=new ws(0,0),r!==ui.SKIP_SETUP&&(R?this.configure_(R):this.setTypes(p,b),a&&this.setValidator(a))}configure_(r){super.configure_(r),this.setTypes(r.variableTypes,r.defaultType)}initModel(){var r=this.getSourceBlock();if(!r)throw new io;this.variable||(r=t.getOrCreateVariablePackage$$module$build$src$core$variables(r.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(r.getId()))}shouldAddBorderRect_(){const r=this.getSourceBlock();if(!r)throw new io;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||r.type!=="variables_get")}fromXml(r){var a=this.getSourceBlock();if(!a)throw new io;const p=r.getAttribute("id"),b=r.textContent,R=r.getAttribute("variabletype")||r.getAttribute("variableType")||"";if(a=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,p,b,R),R!==null&&R!==a.type)throw Error("Serialized variable type with id '"+a.getId()+"' had type "+a.type+", and does not match variable field that references it: "+$i(r)+".");this.setValue(a.getId())}toXml(r){return this.initModel(),r.id=this.variable.getId(),r.textContent=this.variable.name,this.variable.type&&r.setAttribute("variabletype",this.variable.type),r}saveState(r){var a=this.saveLegacyState(Tn);return a!==null||(this.initModel(),a={id:this.variable.getId()},r&&(a.name=this.variable.name,a.type=this.variable.type)),a}loadState(r){const a=this.getSourceBlock();if(!a)throw new io;this.loadLegacyState(Tn,r)||(r=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,r.id||null,r.name,r.type||""),this.setValue(r.getId()))}setSourceBlock(r){if(r.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(r)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(r){if(r===null)return null;var a=this.getSourceBlock();if(!a)throw new io;return a=t.getVariable$$module$build$src$core$variables(a.workspace,r),a?(a=a.type,this.typeIsAllowed(a)?r:(console.warn("Variable type doesn't match this field!  Type was "+a),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+r),null)}doValueUpdate_(r){const a=this.getSourceBlock();if(!a)throw new io;this.variable=t.getVariable$$module$build$src$core$variables(a.workspace,r),super.doValueUpdate_(r)}typeIsAllowed(r){const a=this.getVariableTypes();if(!a)return!0;for(let p=0;p<a.length;p++)if(r===a[p])return!0;return!1}getVariableTypes(){var r=this.variableTypes;if(r===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(r=r||[""],r.length===0)throw r=this.getText(),Error("'variableTypes' of field variable "+r+" was an empty list");return r}setTypes(r=null,a=""){if(Array.isArray(r)){let p=!1;for(let b=0;b<r.length;b++)r[b]===a&&(p=!0);if(!p)throw Error("Invalid default type '"+a+"' in the definition of a FieldVariable")}else if(r!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=a,this.variableTypes=r}refreshVariableName(){this.forceRerender()}onItemSelected_(r,a){if(r=a.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(r===tn){t.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(r===Qt){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(r)}referencesVariables(){return!0}static fromJson(r){return new this(Cr(r.variable),void 0,void 0,void 0,r)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const r=this.getText();let a=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var p=this.getVariableTypes(),b=0;b<p.length;b++){const R=this.sourceBlock_.workspace.getVariablesOfType(p[b]);a=a.concat(R)}for(a.sort(ef.compareByName),p=[],b=0;b<a.length;b++)p[b]=[a[b].name,a[b].getId()];return p.push([t.Msg$$module$build$src$core$msg.RENAME_VARIABLE,tn]),t.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&p.push([t.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",r),Qt]),p}};Ks("field_variable",Tn);var kn=class{constructor(r,a,p,b){this.workspace=r,this.targetWorkspace=a,this.isLabel_=b,this.onMouseUpWrapper=null,this.height=this.width=0,this.svgText=this.svgGroup=null,this.text=p.text,this.position=new nn(0,0),this.callbackKey=p.callbackKey||p.callbackkey,this.cssClass=p["web-class"]||null,this.info=p}createDom(){var r=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(r+=" "+this.cssClass),this.svgGroup=te(Pe.G,{class:r},this.workspace.getCanvas());let a;this.isLabel_||(a=te(Pe.RECT,{class:"blocklyFlyoutButtonShadow",rx:kn.BORDER_RADIUS,ry:kn.BORDER_RADIUS,x:1,y:1},this.svgGroup)),r=te(Pe.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:kn.BORDER_RADIUS,ry:kn.BORDER_RADIUS},this.svgGroup);const p=te(Pe.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var b=Cr(this.text);this.workspace.RTL&&(b+="‏"),p.textContent=b,this.isLabel_&&(this.svgText=p,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const R=zt(p,"fontSize"),W=zt(p,"fontWeight"),pe=zt(p,"fontFamily");if(this.width=Ft(p,R,W,pe),b=Be(b,R,W,pe),this.height=b.height,!this.isLabel_){this.width+=2*kn.TEXT_MARGIN_X,this.height+=2*kn.TEXT_MARGIN_Y;let De;(De=a)==null||De.setAttribute("width",String(this.width));let Pt;(Pt=a)==null||Pt.setAttribute("height",String(this.height))}return r.setAttribute("width",String(this.width)),r.setAttribute("height",String(this.height)),p.setAttribute("x",String(this.width/2)),p.setAttribute("y",String(this.height/2-b.height/2+b.baseline)),this.updateTransform(),this.onMouseUpWrapper=Ee(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(r,a){this.position.x=r,this.position.y=a,this.updateTransform()}isLabel(){return this.isLabel_}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper&&rt(this.onMouseUpWrapper),this.svgGroup&&at(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}onMouseUp(r){(r=this.targetWorkspace.getGesture(r))&&r.cancel(),this.isLabel_&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isLabel_||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isLabel_||(r=this.targetWorkspace.getButtonCallback(this.callbackKey))&&r(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};kn.TEXT_MARGIN_X=5,kn.TEXT_MARGIN_Y=2,kn.BORDER_RADIUS=4,$t(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var _r=class extends Qb{constructor(r,a){super(r),this.flyout_=a}getBoundingBox_(){let r;try{r=this.workspace_.getCanvas().getBBox()}catch{r={height:0,y:0,width:0,x:0}}return r}getContentMetrics(r){const a=this.getBoundingBox_();return r=r?1:this.workspace_.scale,{height:a.height*r,width:a.width*r,top:a.y*r,left:a.x*r}}getScrollMetrics(r,a,p){return a=p||this.getContentMetrics(),p=this.flyout_.MARGIN*this.workspace_.scale,r=r?this.workspace_.scale:1,{height:(a.height+2*p)/r,width:(a.width+a.left+p)/r,top:0,left:0}}},Br;(function(r){r.BLOCK="block",r.BUTTON="button"})(Br||(Br={}));var ar=class extends jb{constructor(r){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,r.setMetrics=this.setMetrics_.bind(this),this.workspace_=new df(r),this.workspace_.setMetricsManager(new _r(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=ie(),this.RTL=!!r.RTL,this.toolboxPosition_=r.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(r){return this.svgGroup_=te(r,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=te(Pe.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(r){this.targetWorkspace=r,this.workspace_.targetWorkspace=r,this.workspace_.scrollbar=new QS(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(Ee(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(Ee(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),r.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ia.Capability.AUTOHIDEABLE,Ia.Capability.DELETE_AREA,Ia.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const r of this.boundEvents)rt(r);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&at(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(r){this.autoClose=r,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(r){!r&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}isVisible(){return this.isVisible_}setVisible(r){const a=r!==this.isVisible();this.isVisible_=r,a&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(r){const a=r!==this.containerVisible;this.containerVisible=r,a&&this.updateDisplay()}updateDisplay(){let r;r=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=r?"block":"none");let a;(a=this.workspace_.scrollbar)==null||a.setContainerVisible(r)}positionAt_(r,a,p,b){let R;(R=this.svgGroup_)==null||R.setAttribute("width",`${r}`);let W;(W=this.svgGroup_)==null||W.setAttribute("height",`${a}`),this.workspace_.setCachedParentSvgSize(r,a),this.svgGroup_&&X(this.svgGroup_,"translate("+p+"px,"+b+"px)"),(r=this.workspace_.scrollbar)&&(r.setOrigin(p,b),r.resize(),r.hScroll&&r.hScroll.setPosition(r.hScroll.position.x,r.hScroll.position.y),r.vScroll&&r.vScroll.setPosition(r.vScroll.position.x,r.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const r of this.listeners)rt(r);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(r){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof r=="string"&&(r=this.getDynamicCategoryContents(r)),this.setVisible(!0),r=gt(r),r=this.createFlyoutInfo(r),Ui(this.workspace_),this.layout_(r.contents,r.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(r){const a=[],p=[];this.permanentlyDisabled.length=0;const b=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const R of r){if("custom"in R){r=this.getDynamicCategoryContents(R.custom),r=gt(r);const{contents:W,gaps:pe}=this.createFlyoutInfo(r);a.push(...W),p.push(...pe)}switch(R.kind.toUpperCase()){case"BLOCK":r=R;const W=this.createFlyoutBlock(r);a.push({type:Br.BLOCK,block:W}),this.addBlockGap(r,p,b);break;case"SEP":this.addSeparatorGap(R,p,b);break;case"LABEL":r=this.createButton(R,!0),a.push({type:Br.BUTTON,button:r}),p.push(b);break;case"BUTTON":r=this.createButton(R,!1),a.push({type:Br.BUTTON,button:r}),p.push(b)}}return{contents:a,gaps:p}}getDynamicCategoryContents(r){if(r=this.workspace_.targetWorkspace.getToolboxCategoryCallback(r),typeof r!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return r(this.workspace_.targetWorkspace)}createButton(r,a){return new kn(this.workspace_,this.targetWorkspace,r,a)}createFlyoutBlock(r){let a;return r.blockxml?(r=typeof r.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(r.blockxml):r.blockxml,(a=this.getRecycledBlock(r.getAttribute("type")))||(a=Ls(r,this.workspace_))):(a=this.getRecycledBlock(r.type),a||(r.enabled===void 0&&(r.enabled=r.disabled!=="true"&&r.disabled!==!0),a=Qr(r,this.workspace_))),a.isEnabled()||this.permanentlyDisabled.push(a),a}getRecycledBlock(r){let a=-1;for(let p=0;p<this.recycledBlocks.length;p++)if(this.recycledBlocks[p].type===r){a=p;break}return a===-1?void 0:this.recycledBlocks.splice(a,1)[0]}addBlockGap(r,a,p){let b;r.gap?b=parseInt(String(r.gap)):r.blockxml&&(r=typeof r.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(r.blockxml):r.blockxml,b=parseInt(r.getAttribute("gap"))),a.push(!b||isNaN(b)?p:b)}addSeparatorGap(r,a,p){r=parseInt(String(r.gap)),!isNaN(r)&&0<a.length?a[a.length-1]=r:a.push(p)}clearOldBlocks(){var r=this.workspace_.getTopBlocks(!1);for(let p=0,b;b=r[p];p++)this.blockIsRecyclable_(b)?this.recycleBlock(b):b.dispose(!1,!1);for(r=0;r<this.mats.length;r++){const p=this.mats[r];p&&(td(p),at(p))}this.mats.length=0;for(let p=0,b;b=this.buttons_[p];p++)b.dispose();this.buttons_.length=0;let a;(a=this.workspace_.getPotentialVariableMap())==null||a.clear()}emptyRecycledBlocks(){for(let r=0;r<this.recycledBlocks.length;r++)this.recycledBlocks[r].dispose();this.recycledBlocks=[]}blockIsRecyclable_(r){return!1}recycleBlock(r){const a=r.getRelativeToSurfaceXY();r.moveBy(-a.x,-a.y),this.recycledBlocks.push(r)}addBlockListeners_(r,a,p){this.listeners.push(Ee(r,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(Ee(p,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(Fe(r,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(Fe(r,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()})),this.listeners.push(Fe(p,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(Fe(p,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()}))}blockMouseDown(r){return a=>{const p=this.targetWorkspace.getGesture(a);p&&(p.setStartBlock(r),p.handleFlyoutStart(a,this))}}onMouseDown(r){const a=this.targetWorkspace.getGesture(r);a&&a.handleFlyoutStart(r,this)}isBlockCreatable(r){return r.isEnabled()}createBlock(r){let a=null;t.disable$$module$build$src$core$events$utils();var p=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{a=this.placeNewBlock(r)}finally{t.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),r=hu(this.targetWorkspace,p),ne()){for(t.setGroup$$module$build$src$core$events$utils(!0),p=0;p<r.length;p++){const b=r[p];ce(new(we(Qa))(b))}ce(new(we(t.CREATE$$module$build$src$core$events$utils))(a))}return this.autoClose?this.hide():this.filterForCapacity(),a}initFlyoutButton_(r,a,p){const b=r.createDom();r.moveTo(a,p),r.show(),this.listeners.push(Ee(b,"pointerdown",this,this.onMouseDown)),this.buttons_.push(r)}createRect_(r,a,p,b,R){return a=te(Pe.RECT,{"fill-opacity":0,x:a,y:p,height:b.height,width:b.width}),a.tooltip=r,si(a),this.workspace_.getCanvas().insertBefore(a,r.getSvgRoot()),this.rectMap_.set(r,a),this.mats[R]=a}moveRectToBlock_(r,a){const p=a.getHeightWidth();r.setAttribute("width",String(p.width)),r.setAttribute("height",String(p.height)),a=a.getRelativeToSurfaceXY(),r.setAttribute("y",String(a.y)),r.setAttribute("x",String(this.RTL?a.x-p.width:a.x))}filterForCapacity(){const r=this.workspace_.getTopBlocks(!1);for(let a=0,p;p=r[a];a++)if(this.permanentlyDisabled.indexOf(p)===-1){const b=this.targetWorkspace.isCapacityAvailable(U(p));for(;p;)p.setEnabled(b),p=p.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(r){var a=this.targetWorkspace;if(!r.getSvgRoot())throw Error("oldBlock is not rendered");const p=ri(r);return a.setResizesEnabled(!1),a=zn(p,a),this.positionNewBlock(r,a),a}positionNewBlock(r,a){const p=this.targetWorkspace;var b=p.getOriginOffsetInPixels(),R=this.workspace_.getOriginOffsetInPixels();r=r.getRelativeToSurfaceXY(),r.scale(this.workspace_.scale),R=nn.sum(R,r),b=nn.difference(R,b),b.scale(1/p.scale),a.moveTo(new nn(b.x,b.y))}};ar.FlyoutItemType=Br;var ci=class extends ar{constructor(r){super(r),this.horizontalLayout=!0}setMetrics_(r){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),p=a.getScrollMetrics(),b=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof r.x=="number"&&(this.workspace_.scrollX=-(p.left+(p.width-b.width)*r.x)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var r=this.targetWorkspace.getMetricsManager();const a=r.getAbsoluteMetrics(),p=r.getViewMetrics();r=r.getToolboxMetrics();const b=this.toolboxPosition_===Qn.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?b?r.height:p.height-this.height_:b?0:p.height:b?0:p.height+a.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var r=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=r.width,this.setBackgroundPath(r.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),r=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,r,a)}}setBackgroundPath(r,a){const p=this.toolboxPosition_===Qn.TOP,b=["M 0,"+(p?0:this.CORNER_RADIUS)];p?(b.push("h",r+2*this.CORNER_RADIUS),b.push("v",a),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),b.push("h",-r),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),b.push("h",r),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),b.push("v",a),b.push("h",-r-2*this.CORNER_RADIUS)),b.push("z"),this.svgBackground_.setAttribute("d",b.join(" "))}scrollToStart(){let r;(r=this.workspace_.scrollbar)==null||r.setX(this.RTL?1/0:0)}wheel_(r){var a=mt(r);if(a=a.x||a.y){const p=this.workspace_.getMetricsManager(),b=p.getScrollMetrics();a=p.getViewMetrics().left-b.left+a;let R;(R=this.workspace_.scrollbar)==null||R.setX(a),vl(),ba()}r.preventDefault(),r.stopPropagation()}layout_(r,a){this.workspace_.scale=this.targetWorkspace.scale;const p=this.MARGIN;let b=p+this.tabWidth_;this.RTL&&(r=r.reverse());for(let De=0,Pt;Pt=r[De];De++)if(Pt.type==="block"){var R=Pt.block,W=R.getDescendants(!1);for(let Go=0,Ro;Ro=W[Go];Go++)Ro.isInFlyout=!0;W=R.getSvgRoot();const xn=R.getHeightWidth();var pe=R.outputConnection?this.tabWidth_:0;pe=this.RTL?b+xn.width:b-pe,R.moveBy(pe,p),pe=this.createRect_(R,pe,p,xn,De),b+=xn.width+a[De],this.addBlockListeners_(W,R,pe)}else Pt.type==="button"&&(R=Pt.button,this.initFlyoutButton_(R,b,p),b+=R.width+a[De])}isDragTowardWorkspace(r){r=Math.atan2(r.y,r.x)/Math.PI*180;const a=this.dragAngleRange_;return r<90+a&&r>90-a||r>-90-a&&r<-90+a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const r=this.svgGroup_.getBoundingClientRect(),a=r.top;return this.toolboxPosition_===Qn.TOP?new bi(-1e9,a+r.height,-1e9,1e9):new bi(a,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let r=0;const a=this.workspace_.getTopBlocks(!1);for(let b=0,R;R=a[b];b++)r=Math.max(r,R.getHeightWidth().height);const p=this.buttons_;for(let b=0,R;R=p[b];b++)r=Math.max(r,R.height);if(r+=1.5*this.MARGIN,r*=this.workspace_.scale,r+=zo.scrollbarThickness,this.height_!==r){for(let b=0,R;R=a[b];b++)this.rectMap_.has(R)&&this.moveRectToBlock_(this.rectMap_.get(R),R);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Qn.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+r),this.height_=r,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};i(Bt.FLYOUTS_HORIZONTAL_TOOLBOX,Ja,ci);var Ti=class extends ar{constructor(r){super(r)}setMetrics_(r){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),p=a.getScrollMetrics(),b=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof r.y=="number"&&(this.workspace_.scrollY=-(p.top+(p.height-b.height)*r.y)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){if(!this.isVisible())return 0;var r=this.targetWorkspace.getMetricsManager();const a=r.getAbsoluteMetrics(),p=r.getViewMetrics();return r=r.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Qn.LEFT?r.width:p.width-this.width_:this.toolboxPosition_===Qn.LEFT?0:p.width:this.toolboxPosition_===Qn.LEFT?0:p.width+a.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var r=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=r.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,r.height-2*this.CORNER_RADIUS),r=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,r,a)}}setBackgroundPath(r,a){const p=this.toolboxPosition_===Qn.RIGHT;var b=r+this.CORNER_RADIUS;b=["M "+(p?b:0)+",0"],b.push("h",p?-r:r),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,p?0:1,p?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),b.push("v",Math.max(0,a)),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,p?0:1,p?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),b.push("h",p?r:-r),b.push("z"),this.svgBackground_.setAttribute("d",b.join(" "))}scrollToStart(){let r;(r=this.workspace_.scrollbar)==null||r.setY(0)}wheel_(r){var a=mt(r);if(a.y){const p=this.workspace_.getMetricsManager(),b=p.getScrollMetrics();a=p.getViewMetrics().top-b.top+a.y;let R;(R=this.workspace_.scrollbar)==null||R.setY(a),vl(),ba()}r.preventDefault(),r.stopPropagation()}layout_(r,a){this.workspace_.scale=this.targetWorkspace.scale;var p=this.MARGIN;const b=this.RTL?p:p+this.tabWidth_;for(let De=0,Pt;Pt=r[De];De++)if(Pt.type==="block"){var R=Pt.block,W=R.getDescendants(!1);for(let Go=0,Ro;Ro=W[Go];Go++)Ro.isInFlyout=!0;W=R.getSvgRoot();const xn=R.getHeightWidth();var pe=R.outputConnection?b-this.tabWidth_:b;R.moveBy(pe,p),pe=this.createRect_(R,this.RTL?pe-xn.width:pe,p,xn,De),this.addBlockListeners_(W,R,pe),p+=xn.height+a[De]}else Pt.type==="button"&&(R=Pt.button,this.initFlyoutButton_(R,b,p),p+=R.height+a[De])}isDragTowardWorkspace(r){r=Math.atan2(r.y,r.x)/Math.PI*180;const a=this.dragAngleRange_;return r<a&&r>-a||r<-180+a||r>180-a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const r=this.svgGroup_.getBoundingClientRect(),a=r.left;return this.toolboxPosition_===Qn.LEFT?new bi(-1e9,1e9,-1e9,a+r.width):new bi(-1e9,1e9,a,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let r=0;var a=this.workspace_.getTopBlocks(!1);for(let b=0,R;R=a[b];b++){var p=R.getHeightWidth().width;R.outputConnection&&(p-=this.tabWidth_),r=Math.max(r,p)}for(let b=0,R;R=this.buttons_[b];b++)r=Math.max(r,R.width);if(r+=1.5*this.MARGIN+this.tabWidth_,r*=this.workspace_.scale,r+=zo.scrollbarThickness,this.width_!==r){for(let b=0,R;R=a[b];b++){if(this.RTL){p=R.getRelativeToSurfaceXY().x;let W=r/this.workspace_.scale-this.MARGIN;R.outputConnection||(W-=this.tabWidth_),R.moveBy(W-p,0)}this.rectMap_.has(R)&&this.moveRectToBlock_(this.rectMap_.get(R),R)}if(this.RTL)for(let b=0,R;R=this.buttons_[b];b++)a=R.getPosition().y,R.moveTo(r/this.workspace_.scale-R.width-this.MARGIN-this.tabWidth_,a);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Qn.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+r,this.targetWorkspace.scrollY),this.width_=r,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};Ti.registryName="verticalFlyout",i(Bt.FLYOUTS_VERTICAL_TOOLBOX,Ja,Ti);var _d;t.CodeGenerator$$module$build$src$core$generator=class{constructor(r){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=r,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(r){r||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),r=A());var a=[];this.init(r),r=r.getTopBlocks(!0);for(let p=0,b;b=r[p];p++){let R=this.blockToCode(b);Array.isArray(R)&&(R=R[0]),R&&(b.outputConnection&&(R=this.scrubNakedValue(R),this.STATEMENT_PREFIX&&!b.suppressPrefixSuffix&&(R=this.injectId(this.STATEMENT_PREFIX,b)+R),this.STATEMENT_SUFFIX&&!b.suppressPrefixSuffix&&(R+=this.injectId(this.STATEMENT_SUFFIX,b))),a.push(R))}return a=a.join(`
`),a=this.finish(a),a=a.replace(/^\s+\n/,""),a=a.replace(/\n\s+$/,`
`),a=a.replace(/[ \t]+\n/g,`
`)}prefixLines(r,a){return a+r.replace(/(?!\n$)\n/g,`
`+a)}allNestedComments(r){const a=[];r=r.getDescendants(!0);for(let p=0;p<r.length;p++){const b=r[p].getCommentText();b&&a.push(b)}return a.length&&a.push(""),a.join(`
`)}blockToCode(r,a){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!r)return"";if(!r.isEnabled())return a?"":this.blockToCode(r.getNextBlock());if(r.isInsertionMarker())return a?"":this.blockToCode(r.getChildren(!1)[0]);var p=this.forBlock[r.type];if(!p&&this[r.type]&&(Te("block generator functions on CodeGenerator objects","10.0","11.0","the .forBlock[blockType] dictionary"),p=this[r.type]),typeof p!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${r.type}".`);if(p=p.call(r,r,this),Array.isArray(p)){if(!r.outputConnection)throw TypeError("Expecting string from statement block: "+r.type);return[this.scrub_(r,p[0],a),p[1]]}if(typeof p=="string")return this.STATEMENT_PREFIX&&!r.suppressPrefixSuffix&&(p=this.injectId(this.STATEMENT_PREFIX,r)+p),this.STATEMENT_SUFFIX&&!r.suppressPrefixSuffix&&(p+=this.injectId(this.STATEMENT_SUFFIX,r)),this.scrub_(r,p,a);if(p===null)return"";throw SyntaxError("Invalid code generated: "+p)}valueToCode(r,a,p){if(isNaN(p))throw TypeError("Expecting valid order from block: "+r.type);var b=r.getInputTargetBlock(a);if(!b||(a=this.blockToCode(b),a===""))return"";if(!Array.isArray(a))throw TypeError(`Expecting tuple from value block: ${b.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(r=a[0],a=a[1],isNaN(a))throw TypeError("Expecting valid order from value block: "+b.type);if(!r)return"";b=!1;var R=Math.floor(p);const W=Math.floor(a);if(R<=W&&(R!==W||R!==0&&R!==99)){for(b=!0,R=0;R<this.ORDER_OVERRIDES.length;R++)if(this.ORDER_OVERRIDES[R][0]===p&&this.ORDER_OVERRIDES[R][1]===a){b=!1;break}}return b&&(r="("+r+")"),r}statementToCode(r,a){if(r=r.getInputTargetBlock(a),a=this.blockToCode(r),typeof a!="string")throw TypeError("Expecting code from statement block: "+(r&&r.type));return a&&(a=this.prefixLines(a,this.INDENT)),a}addLoopTrap(r,a){return this.INFINITE_LOOP_TRAP&&(r=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,a),this.INDENT)+r),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(r=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,a),this.INDENT)+r),this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(r+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,a),this.INDENT)),r}injectId(r,a){return a=a.id.replace(/\$/g,"$$$$"),r.replace(/%1/g,"'"+a+"'")}addReservedWords(r){this.RESERVED_WORDS_+=r+","}provideFunction_(r,a){if(!this.definitions_[r]){const p=this.nameDB_.getDistinctName(r,t.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[r]=p,Array.isArray(a)&&(a=a.join(`
`)),a=a.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,p);let b;for(;b!==a;)b=a,a=a.replace(/^(( {2})*) {2}/gm,"$1\0");a=a.replace(/\0/g,this.INDENT),this.definitions_[r]=a}return this.functionNames_[r]}getVariableName(r){return this.getName(r,t.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(r){return this.getName(r,t.NameType$$module$build$src$core$names.PROCEDURE)}getName(r,a){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(r,a)}init(r){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(r,a,p){return a}finish(r){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),r}scrubNakedValue(r){return r}},_d={},_d.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator;var ch=!1,su={};su.Align=t.Align$$module$build$src$core$inputs$align,su.DummyInput=Zf,su.EndRowInput=Xm,su.Input=Na,su.StatementInput=gd,su.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input,su.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types;var sl="The insertion marker previewer tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Rp=class{constructor(r){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=r.workspace}previewReplacement(r,a,p){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=p,p.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(a)&&(a.highlight(),this.staticConn=a)}finally{t.enable$$module$build$src$core$events$utils()}}previewConnection(r,a){if(r!==this.draggedConn||a!==this.staticConn){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(r,a)&&(this.markerConn=this.previewMarker(r,a)),this.workspace.getRenderer().shouldHighlightConnection(a)&&a.highlight(),this.draggedConn=r,this.staticConn=a}finally{t.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(r,a){return a.type===$n.PREVIOUS_STATEMENT||a.type===$n.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof F)}previewMarker(r,a){const p=r.getSourceBlock(),b=this.createInsertionMarker(p),R=this.getMatchingConnection(p,b,r);if(!R)throw Error("Could not create insertion marker to preview connection");b.queueRender(),Ui(),R.connect(a);const W={x:a.x-R.x,y:a.y-R.y},pe=R.getOffsetInBlock().clone();return rr().then(()=>{b==null||b.positionNearConnection(R,W,pe),b==null||b.getSvgRoot().setAttribute("visibility","visible")}),R}createInsertionMarker(r){const a=this.workspace.newBlock(r.type);if(a.setInsertionMarker(!0),r.saveExtraState){var p=r.saveExtraState(!0);p&&a.loadExtraState&&a.loadExtraState(p)}else r.mutationToDom&&(p=r.mutationToDom())&&a.domToMutation&&a.domToMutation(p);for(p=0;p<r.inputList.length;p++){const b=r.inputList[p];if(b.name===x0)continue;const R=a.inputList[p];if(!R)throw Error(sl.replace("%1","an input"));for(let W=0;W<b.fieldRow.length;W++){const pe=b.fieldRow[W],De=R.fieldRow[W];if(!De)throw Error(sl.replace("%1","a field"));De.setValue(pe.getValue())}}for(const b of a.getDescendants(!1))b.setInsertionMarker(!0);return a.setCollapsed(r.isCollapsed()),a.setInputsInline(r.getInputsInline()),a.initSvg(),a.getSvgRoot().setAttribute("visibility","hidden"),a}getMatchingConnection(r,a,p){if(r=r.getConnections_(!0),a=a.getConnections_(!0),r.length!==a.length)return null;for(let b=0;b<r.length;b++)if(r[b]===p)return a[b];return null}hidePreview(){t.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{t.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(r){const a=r.getSourceBlock(),p=a.outputConnection;let b;if((b=a.previousConnection)!=null&&b.targetConnection||p!=null&&p.targetConnection)a.unplug(!0);else{let R;(R=r.targetBlock())==null||R.unplug(!1)}a.dispose()}dispose(){this.hidePreview()}};i(Bt.CONNECTION_PREVIEWER,Ja,Rp);var rm=class extends Kv{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(r){return super.getCSS_(r).concat([`${r} .blocklyInsertionMarker>.blocklyPathLight,`,`${r} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},lE=class{constructor(r){this.inlineSteps_=this.steps_="",this.info_=r,this.RTL_=this.info_.RTL,r=r.getRenderer(),this.constants_=r.getConstants(),this.highlightConstants_=r.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(r){this.steps_+=oi(r.xPos,this.info_.startY);for(let a=0,p;p=r.elements[a];a++)et.isLeftSquareCorner(p)?this.steps_+=this.highlightConstants_.START_POINT:et.isLeftRoundedCorner(p)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):et.isPreviousConnection(p)?this.steps_+=this.notchPaths_.pathLeft:et.isHat(p)?this.steps_+=this.startPaths_.path(this.RTL_):et.isSpacer(p)&&p.width!==0&&(this.steps_+=hn("H",p.xPos+p.width-this.highlightOffset));this.steps_+=hn("H",r.xPos+r.width-this.highlightOffset)}drawJaggedEdge_(r){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+hn("v",r.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(r){const a=r.getLastInput();if(this.RTL_){const p=r.height-a.connectionHeight;this.steps_+=Ts(a.xPos+a.width-this.highlightOffset,r.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+hn("v",p)}else this.steps_+=Ts(a.xPos+a.width,r.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(r){const a=r.getLastInput();if(a)if(this.RTL_){const p=r.height-2*this.insideCornerPaths_.height;this.steps_+=Ts(a.xPos,r.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+hn("v",p)+this.insideCornerPaths_.pathBottom(this.RTL_)+xl(r.width-a.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Ts(a.xPos,r.yPos+r.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+xl(r.width-a.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(r){const a=r.xPos+r.width-this.highlightOffset;r instanceof DS&&r.followsStatement&&(this.steps_+=hn("H",a)),this.RTL_&&(this.steps_+=hn("H",a),r.height>this.highlightOffset&&(this.steps_+=hn("V",r.yPos+r.height-this.highlightOffset)))}drawBottomRow(r){if(this.RTL_)this.steps_+=hn("V",r.baseline-this.highlightOffset);else{const a=this.info_.bottomRow.elements[0];et.isLeftSquareCorner(a)?this.steps_+=Ts(r.xPos+this.highlightOffset,r.baseline-this.highlightOffset):et.isLeftRoundedCorner(a)&&(this.steps_+=Ts(r.xPos,r.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var r=this.info_.outputConnection;r&&(r=r.connectionOffsetY+r.height,this.RTL_?this.steps_+=Ts(this.info_.startX,r):(this.steps_+=Ts(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=hn("V",r)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(r=this.info_.topRow,et.isLeftRoundedCorner(r.elements[0])?this.steps_+=hn("V",this.outsideCornerPaths_.height):this.steps_+=hn("V",r.capline+this.highlightOffset))}drawInlineInput(r){const a=this.highlightOffset,p=r.xPos+r.connectionWidth;var b=r.centerline-r.height/2;const R=r.width-r.connectionWidth,W=b+a;this.RTL_?(b=r.connectionOffsetY-a,r=r.height-(r.connectionOffsetY+r.connectionHeight)+a,this.inlineSteps_+=Ts(p-a,W)+hn("v",b)+this.puzzleTabPaths_.pathDown(this.RTL_)+hn("v",r)+hn("h",R)):this.inlineSteps_+=Ts(r.xPos+r.width+a,W)+hn("v",r.height)+hn("h",-R)+Ts(p,b+r.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},TF=class extends Jv{constructor(r,a){super(r,a),this.highlighter_=new lE(a)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const r=this.block_.pathObject;r.setPath(this.outlinePath_+`
`+this.inlinePath_),r.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&r.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(r){this.highlighter_.drawJaggedEdge_(r),super.drawJaggedEdge_(r)}drawValueInput_(r){this.highlighter_.drawValueInput(r),super.drawValueInput_(r)}drawStatementInput_(r){this.highlighter_.drawStatementInput(r),super.drawStatementInput_(r)}drawRightSideRow_(r){this.highlighter_.drawRightSideRow(r),this.outlinePath_+=hn("H",r.xPos+r.width)+hn("V",r.yPos+r.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(r){this.highlighter_.drawInlineInput(r),super.drawInlineInput_(r)}positionInlineInputConnection_(r){const a=r.centerline-r.height/2;if(r.connectionModel){let p=r.xPos+r.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(p*=-1),r.connectionModel.setOffsetInBlock(p,a+r.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(r){const a=r.getLastInput();if(a!=null&&a.connectionModel){let p=r.xPos+r.statementEdge+a.notchOffset;p=this.info_.RTL?-1*p:p+this.constants_.DARK_PATH_OFFSET,a.connectionModel.setOffsetInBlock(p,r.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(r){const a=r.getLastInput();if(a&&a.connectionModel){let p=r.xPos+r.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(p*=-1),a.connectionModel.setOffsetInBlock(p,r.yPos)}}positionNextConnection_(){const r=this.info_.bottomRow;if(r.connection){const a=r.connection,p=a.xPos;a.connectionModel.setOffsetInBlock((this.info_.RTL?-p:p)+this.constants_.DARK_PATH_OFFSET/2,r.baseline+this.constants_.DARK_PATH_OFFSET)}}},SF=class{constructor(r){this.OFFSET=.5,this.constantProvider=r,this.START_POINT=oi(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const r=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,p=(1-Math.SQRT1_2)*(r+a)-a,b=oi(p,p)+Gr("a","0 0,0",r,Mn(-p-a,r-p)),R=Gr("a","0 0,0",r+a,Mn(r+a,r+a)),W=oi(p,-p)+Gr("a","0 0,0",r+a,Mn(r-p,p+a));return{width:r+a,height:r,pathTop(pe){return pe?b:""},pathBottom(pe){return pe?R:W}}}makeOutsideCorner(){const r=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,p=(1-Math.SQRT1_2)*(r-a)+a,b=oi(p,p)+Gr("a","0 0,1",r-a,Mn(r-p,-p+a)),R=oi(a,r)+Gr("a","0 0,1",r-a,Mn(r,-r+a)),W=-p,pe=oi(p,W)+Gr("a","0 0,1",r-a,Mn(-p+a,-W-r));return{height:r,topLeft(De){return De?b:R},bottomLeft(){return pe}}}makePuzzleTab(){const r=this.constantProvider.TAB_WIDTH,a=this.constantProvider.TAB_HEIGHT,p=oi(-2,-a+3.4)+xl(-.45*r,-2.1),b=hn("v",2.5)+oi(.97*-r,2.5)+us("q",[Mn(.05*-r,10),Mn(.3*r,9.5)])+oi(.67*r,-1.9)+hn("v",2.5),R=hn("v",-1.5)+oi(-.92*r,-.5)+us("q",[Mn(-.19*r,-5.5),Mn(0,-11)])+oi(.92*r,1),W=oi(-5,a-.7)+xl(.46*r,-2.1);return{width:r,height:a,pathUp(pe){return pe?p:R},pathDown(pe){return pe?b:W}}}makeNotch(){return{pathLeft:hn("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:xl(5.1,2.6)+oi(-10.2,6.8)+xl(5.1,2.6),height:12,width:10.2}}makeStartHat(){const r=this.constantProvider.START_HAT.height,a=oi(25,-8.7)+us("c",[Mn(29.7,-6.2),Mn(57.2,-.5),Mn(75,8.7)]),p=us("c",[Mn(17.8,-9.2),Mn(45.3,-14.9),Mn(75,-8.7)])+Ts(100.5,r+.5);return{path(b){return b?a:p}}}},EF=class extends OS{constructor(r,a){super(r,a),this.constants_=r,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},$F=class extends Yv{constructor(r,a){super(r,a),this.constants_=r,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},xF=class extends x_{constructor(r,a){super(r,a),this.renderer_=r}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof gd||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(r,a){this.isInline&&r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new EF(this.constants_,r)),a.hasInlineInput=!0):r instanceof gd?(a.elements.push(new $F(this.constants_,r)),a.hasStatement=!0):r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new Hb(this.constants_,r)),a.hasExternalInput=!0):(r instanceof Zf||r instanceof Xm)&&(a.minHeight=Math.max(a.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),this.isInline||a.align!==null||(a.align=r.align)}addElemSpacing_(){let r=!1;for(let p=0,b;b=this.rows[p];p++)b.hasExternalInput&&(r=!0);for(let p=0,b;b=this.rows[p];p++){var a=b.elements;if(b.elements=[],b.startsWithElemSpacer()&&b.elements.push(new Yd(this.constants_,this.getInRowSpacing_(null,a[0]))),a.length){for(let R=0;R<a.length-1;R++){b.elements.push(a[R]);const W=this.getInRowSpacing_(a[R],a[R+1]);b.elements.push(new Yd(this.constants_,W))}b.elements.push(a[a.length-1]),b.endsWithElemSpacer()&&(a=this.getInRowSpacing_(a[a.length-1],null),r&&b.hasDummyInput&&(a+=this.constants_.TAB_WIDTH),b.elements.push(new Yd(this.constants_,a)))}}}getInRowSpacing_(r,a){if(!r)return a&&et.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&et.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&et.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!et.isInput(r)&&(!a||et.isStatementInput(a)))return et.isField(r)&&r.isEditable?this.constants_.MEDIUM_PADDING:et.isIcon(r)?2*this.constants_.LARGE_PADDING+1:et.isHat(r)?this.constants_.NO_PADDING:et.isPreviousOrNextConnection(r)?this.constants_.LARGE_PADDING:et.isLeftRoundedCorner(r)?this.constants_.MIN_BLOCK_WIDTH:et.isJaggedEdge(r)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(et.isInput(r)&&!a){if(et.isExternalInput(r))return this.constants_.NO_PADDING;if(et.isInlineInput(r))return this.constants_.LARGE_PADDING;if(et.isStatementInput(r))return this.constants_.NO_PADDING}if(!et.isInput(r)&&a&&et.isInput(a)){if(et.isField(r)&&r.isEditable){if(et.isInlineInput(a)||et.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(et.isInlineInput(a)||et.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(et.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(et.isIcon(r)&&a&&!et.isInput(a))return this.constants_.LARGE_PADDING;if(et.isInlineInput(r)&&a&&et.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(et.isLeftSquareCorner(r)&&a){if(et.isHat(a))return this.constants_.NO_PADDING;if(et.isPreviousConnection(a))return a.notchOffset;if(et.isNextConnection(a))return a.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(et.isLeftRoundedCorner(r)&&a){if(et.isPreviousConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS;if(et.isNextConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return et.isField(r)&&a&&et.isField(a)&&r.isEditable===a.isEditable||a&&et.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(r,a){return et.isTopRow(r)&&et.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:et.isTopRow(r)||et.isBottomRow(a)?this.constants_.NO_PADDING:r.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!r.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:r.hasStatement&&a.hasStatement||!r.hasStatement&&a.hasDummyInput||r.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(r,a){if(et.isSpacer(a))return r.yPos+a.height/2;if(et.isBottomRow(r))return r=r.yPos+r.height-r.descenderHeight,et.isNextConnection(a)?r+a.height/2:r-a.height/2;if(et.isTopRow(r))return et.isHat(a)?r.capline-a.height/2:r.capline+a.height/2;let p=r.yPos;return et.isField(a)||et.isIcon(a)?(p+=a.height/2,(r.hasInlineInput||r.hasStatement)&&a.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=r.height&&(p+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):p=et.isInlineInput(a)?p+a.height/2:p+r.height/2,p}alignRowElements_(){if(this.isInline){var r=0,a=new WeakMap,p=null;for(let b=this.rows.length-1,R;R=this.rows[b];b--)a.set(R,r),et.isInputRow(R)&&(R.hasStatement&&this.alignStatementRow_(R),p&&p.hasStatement&&R.width<p.width?a.set(R,p.width):r=R.hasStatement?R.width:Math.max(r,R.width),p=R);r=0;for(let b=0,R;R=this.rows[b];b++)R.hasStatement?r=this.getDesiredRowWidth_(R):et.isSpacer(R)?R.width=Math.max(r,a.get(R)):(p=R.width,r=Math.max(r,a.get(R))-p,0<r&&this.addAlignmentPadding_(R,r),r=R.width)}else super.alignRowElements_()}getDesiredRowWidth_(r){return this.isInline&&r.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(r)}finalize_(){let r=0,a=0;for(let b=0,R;R=this.rows[b];b++){R.yPos=a,R.xPos=this.startX,a+=R.height,r=Math.max(r,R.widthWithConnectedBlocks);var p=a-this.topRow.ascenderHeight;R===this.bottomRow&&p<this.constants_.MIN_BLOCK_HEIGHT&&(p=this.constants_.MIN_BLOCK_HEIGHT-p,this.bottomRow.height+=p,a+=p),this.recordElemPositions_(R)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(p=this.block_.nextConnection.targetBlock())&&(r=Math.max(r,p.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=r+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=a+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},wF=class extends Qv{constructor(r,a,p){super(r,a,p),this.constants=p,this.colourDark="#000000",this.svgPathDark=te(Pe.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=te(Pe.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(r){this.svgPath.setAttribute("d",r),this.svgPathDark.setAttribute("d",r)}setHighlightPath(r){this.svgPathLight.setAttribute("d",r)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(r){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(r),this.svgPath.setAttribute("stroke","none")}setStyle(r){this.style=r,this.colourDark=Mc("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(r){r?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(r){if(r){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(r){super.updateDisabled_(r),r&&this.svgPath.setAttribute("stroke","none")}},CF=class extends qv{constructor(r){super(r),this.highlightConstants=null}init(r,a){super.init(r,a),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(r,a){super.refreshDom(r,a),this.getHighlightConstants().init()}makeConstants_(){return new rm}makeRenderInfo_(r){return new xF(this,r)}makeDrawer_(r,a){return new TF(r,a)}makePathObject(r,a){return new wF(r,a,this.getConstants())}makeHighlightConstants_(){return new SF(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};Js("geras",CF);var Bg={};Bg.ConstantProvider=rm,Bg.Drawer=TF,Bg.HighlightConstantProvider=SF,Bg.Highlighter=lE,Bg.InlineInput=EF,Bg.PathObject=wF,Bg.RenderInfo=xF,Bg.Renderer=CF,Bg.StatementInput=$F;var MF=class extends Kv{constructor(){super(),Te("Blockly.minimalist.ConstantProvider","v10","v11","Blockly.blockRendering.ConstantProvider")}},AF=class extends Jv{constructor(r,a){super(r,a),Te("Blockly.minimalist.Drawer","v10","v11","Blockly.blockRendering.Drawer")}},IF=class extends x_{constructor(r,a){super(r,a),Te("Blockly.minimalist.RenderInfo","v10","v11","Blockly.blockRendering.RenderInfo")}getRenderer(){return this.renderer_}},RF=class extends qv{constructor(r){super(r),Te("Blockly.minimalist.Renderer","v10","v11","Blockly.blockRendering.Renderer")}makeConstants_(){return new MF}makeRenderInfo_(r){return new IF(this,r)}makeDrawer_(r,a){return new AF(r,a)}};Js("minimalist",RF);var uE={};uE.ConstantProvider=MF,uE.Drawer=AF,uE.RenderInfo=IF,uE.Renderer=RF;var kF=class extends x_{constructor(r,a){super(r,a)}getRenderer(){return this.renderer_}addElemSpacing_(){let r=!1;for(var a=0;a<this.rows.length;a++)if(this.rows[a].hasExternalInput){r=!0;break}for(a=0;a<this.rows.length;a++){const b=this.rows[a];var p=b.elements;if(b.elements=[],b.startsWithElemSpacer()&&b.elements.push(new Yd(this.constants_,this.getInRowSpacing_(null,p[0]))),p.length){for(let R=0;R<p.length-1;R++){b.elements.push(p[R]);const W=this.getInRowSpacing_(p[R],p[R+1]);b.elements.push(new Yd(this.constants_,W))}b.elements.push(p[p.length-1]),b.endsWithElemSpacer()&&(p=this.getInRowSpacing_(p[p.length-1],null),r&&b.hasDummyInput&&(p+=this.constants_.TAB_WIDTH),b.elements.push(new Yd(this.constants_,p)))}}}getInRowSpacing_(r,a){if(!r)return a&&et.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&et.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&et.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!et.isInput(r)&&!a)return et.isField(r)&&r.isEditable?this.constants_.MEDIUM_PADDING:et.isIcon(r)?2*this.constants_.LARGE_PADDING+1:et.isHat(r)?this.constants_.NO_PADDING:et.isPreviousOrNextConnection(r)?this.constants_.LARGE_PADDING:et.isLeftRoundedCorner(r)?this.constants_.MIN_BLOCK_WIDTH:et.isJaggedEdge(r)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(et.isInput(r)&&!a){if(et.isExternalInput(r))return this.constants_.NO_PADDING;if(et.isInlineInput(r))return this.constants_.LARGE_PADDING;if(et.isStatementInput(r))return this.constants_.NO_PADDING}if(!et.isInput(r)&&a&&et.isInput(a)){if(et.isField(r)&&r.isEditable){if(et.isInlineInput(a)||et.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(et.isInlineInput(a)||et.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(et.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(et.isIcon(r)&&a&&!et.isInput(a))return this.constants_.LARGE_PADDING;if(et.isInlineInput(r)&&a&&et.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(et.isLeftSquareCorner(r)&&a){if(et.isHat(a))return this.constants_.NO_PADDING;if(et.isPreviousConnection(a)||et.isNextConnection(a))return a.notchOffset}return et.isLeftRoundedCorner(r)&&a?a.notchOffset-this.constants_.CORNER_RADIUS:et.isField(r)&&a&&et.isField(a)&&r.isEditable===a.isEditable||a&&et.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(r,a){return et.isTopRow(r)&&et.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:et.isTopRow(r)||et.isBottomRow(a)?this.constants_.NO_PADDING:r.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!r.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:r.hasStatement&&a.hasStatement||r.hasDummyInput||a.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(r,a){if(et.isSpacer(a))return r.yPos+a.height/2;if(et.isBottomRow(r))return r=r.yPos+r.height-r.descenderHeight,et.isNextConnection(a)?r+a.height/2:r-a.height/2;if(et.isTopRow(r))return et.isHat(a)?r.capline-a.height/2:r.capline+a.height/2;let p=r.yPos;return p=et.isField(a)&&r.hasStatement?p+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+a.height/2):p+r.height/2}finalize_(){let r=0,a=0;for(var p=0;p<this.rows.length;p++){const R=this.rows[p];R.yPos=a,R.xPos=this.startX,a+=R.height,r=Math.max(r,R.widthWithConnectedBlocks);var b=a-this.topRow.ascenderHeight;R===this.bottomRow&&b<this.constants_.MIN_BLOCK_HEIGHT&&(b=this.constants_.MIN_BLOCK_HEIGHT-b,this.bottomRow.height+=b,a+=b),this.recordElemPositions_(R)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(p=this.block_.nextConnection.targetBlock())&&(r=Math.max(r,p.getHeightWidth().width)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=r+this.startX,this.height=a,this.startY=this.topRow.capline}},OF=class extends qv{constructor(r){super(r)}makeRenderInfo_(r){return new kF(this,r)}};Js("thrasos",OF);var ik={};ik.RenderInfo=kF,ik.Renderer=OF;var kX={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},OX={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},LX=new T0("zelos",kX,OX),DX={Classic:Db,Zelos:LX},sk=class{constructor(r,a,p){this.id_=r.toolboxitemid||re(),this.level_=(this.parent_=p||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=r,this.parentToolbox_=a,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(r){}},Ym=class extends sk{constructor(r,a,p){super(r,a,p),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(r){if("custom"in r)this.flyoutItems_=r.custom;else if(r=r.contents)for(let a=0;a<r.length;a++){const p=r[a];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(p)}}parseCategoryDef_(r){this.name_="name"in r?Cr(r.name):"",this.colour_=this.getColour_(r),Object.assign(this.cssConfig_,r.cssconfig||r.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Vr(this.htmlDiv_,Pc.TREEITEM),cr(this.htmlDiv_,Gs.SELECTED,!1),cr(this.htmlDiv_,Gs.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Vr(this.iconDom_,Pc.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const r=this.labelDom_.getAttribute("id");return r&&cr(this.htmlDiv_,Gs.LABELLEDBY,r),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const r=document.createElement("div"),a=this.cssConfig_.container;return a&&ke(r,a),r}createRowContainer_(){const r=document.createElement("div");var a=this.cssConfig_.row;return a&&ke(r,a),a=`${Ym.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?r.style.paddingRight=a:r.style.paddingLeft=a,r}createRowContentsContainer_(){const r=document.createElement("div"),a=this.cssConfig_.rowcontentcontainer;return a&&ke(r,a),r}createIconDom_(){const r=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&ke(r,a)}return r.style.display="inline-block",r}createLabelDom_(r){const a=document.createElement("span");return a.setAttribute("id",this.getId()+".label"),a.textContent=r,(r=this.cssConfig_.label)&&ke(a,r),a}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(r){r&&(r=Ym.borderWidth+"px solid "+(r||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=r:this.rowDiv_.style.borderLeft=r)}getColour_(r){const a=r.categorystyle||r.categoryStyle;if((r=r.colour)&&a)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(a)return this.getColourfromStyle_(a);if(r)return this.parseColour_(r)}return""}getColourfromStyle_(r){var a=this.workspace_.getTheme();if(r&&a){if((a=a.categoryStyles[r])&&a.colour)return this.parseColour_(a.colour);console.warn('Style "'+r+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(r){if(r=Cr(r),r==null||r==="")return"";var a=Number(r);return isNaN(a)?(a=Wa(r))?a:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+r),""):tc(a)}openIcon_(r){if(r){var a=this.cssConfig_.closedicon;a&&ot(r,a),(a=this.cssConfig_.openicon)&&ke(r,a)}}closeIcon_(r){if(r){var a=this.cssConfig_.openicon;a&&ot(r,a),(a=this.cssConfig_.closedicon)&&ke(r,a)}}setVisible_(r){this.htmlDiv_.style.display=r?"block":"none",this.isHidden_=!r,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let r=this;for(;r.getParent();)if(r=r.getParent(),!r.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(r){}setSelected(r){if(this.rowDiv_){var a=this.cssConfig_.selected;if(r){const p=this.parseColour_(Ym.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||p,a&&ke(this.rowDiv_,a)}else this.rowDiv_.style.backgroundColor="",a&&ft(this.rowDiv_,a);cr(this.htmlDiv_,Gs.SELECTED,r)}}setDisabled(r){this.isDisabled_=r,this.getDiv().setAttribute("disabled",`${r}`),r?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(r){this.flyoutItems_=[],this.toolboxItemDef_=typeof r=="string"?{kind:this.toolboxItemDef_.kind,custom:r,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:gt(r),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){at(this.htmlDiv_)}};Ym.registrationName="category",Ym.nestedPadding=19,Ym.borderWidth=8,Ym.defaultBackgroundColour="#57e",$t(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),i(Bt.TOOLBOX_ITEM,Ym.registrationName,Ym);var cE=class extends sk{constructor(r,a){super(r,a),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,r.cssconfig||r.cssConfig)}init(){this.createDom_()}createDom_(){const r=document.createElement("div"),a=this.cssConfig_.container;return a&&ke(r,a),this.htmlDiv_=r}getDiv(){return this.htmlDiv_}dispose(){at(this.htmlDiv_)}};cE.registrationName="sep",$t(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),i(Bt.TOOLBOX_ITEM,cE.registrationName,cE);var t1=class extends Ym{constructor(r,a,p){super(r,a,p),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const r=super.makeDefaultCssConfig_();return r.contents="blocklyToolboxContents",r}parseContents_(r){if("custom"in r)this.flyoutItems_=r.custom;else{const a=r.contents;if(a){this.flyoutItems_=[],r=!0;for(let p=0;p<a.length;p++){const b=a[p];!u(Bt.TOOLBOX_ITEM,b.kind)||b.kind.toLowerCase()===cE.registrationName&&r?(this.flyoutItems_.push(b),r=!0):(this.createToolboxItem_(b),r=!1)}}}}createToolboxItem_(r){let a=r.kind;a.toUpperCase()==="CATEGORY"&&Pn(r)&&(a=t1.registrationName),r=new(h(Bt.TOOLBOX_ITEM,a))(r,this.parentToolbox_,this),this.toolboxItems_.push(r)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const r=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(r),Vr(this.subcategoriesDiv_,Pc.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),cr(this.htmlDiv_,Gs.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const r=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&ke(r,a),r.style.visibility="visible"}return r.style.display="inline-block",r}createSubCategoriesDom_(r){const a=document.createElement("div");a.style.display="none";var p=this.cssConfig_.contents;for(p&&ke(a,p),p=0;p<r.length;p++){const b=r[p];b.init();const R=b.getDiv();if(a.appendChild(R),b.getClickTarget){let W;(W=b.getClickTarget())==null||W.setAttribute("id",b.getId())}}return a}setExpanded(r){if(this.expanded_!==r){if(this.expanded_=r)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let a;(a=this.parentToolbox_.getFlyout())==null||a.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}cr(this.htmlDiv_,Gs.EXPANDED,r),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(r){this.htmlDiv_.style.display=r?"block":"none";const a=this.getChildToolboxItems();for(let p=0;p<a.length;p++)a[p].setVisible_(r);this.isHidden_=!r,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(r){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};t1.registrationName="collapsibleCategory",i(Bt.TOOLBOX_ITEM,t1.registrationName,t1);var LF=class extends jb{constructor(r){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=r,this.toolboxDef_=r.options.languageTree||{contents:[]},this.horizontalLayout_=r.options.horizontalLayout,this.RTL=r.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=r.options.toolboxPosition}onShortcut(r){return!1}init(){var r=this.workspace_;const a=r.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),Ge(this.flyout_.createDom("svg"),a),this.setVisible(!0),this.flyout_.init(r),this.render(this.toolboxDef_),r=r.getThemeManager(),r.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),r.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ia.Capability.AUTOHIDEABLE,Ia.Capability.DELETE_AREA,Ia.Capability.DRAG_TARGET]})}createDom_(r){r=r.getParentSvg();const a=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Vr(this.contentsDiv_,Pc.TREE),a.appendChild(this.contentsDiv_),r.parentNode.insertBefore(a,r),this.attachEvents_(a,this.contentsDiv_),a}createContainer_(){const r=document.createElement("div");return r.setAttribute("layout",this.isHorizontal()?"h":"v"),ke(r,"blocklyToolboxDiv"),ke(r,"blocklyNonSelectable"),r.setAttribute("dir",this.RTL?"RTL":"LTR"),r}createContentsContainer_(){const r=document.createElement("div");return ke(r,"blocklyToolboxContents"),this.isHorizontal()&&(r.style.flexDirection="row"),r}attachEvents_(r,a){r=Ee(r,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(r),a=Ee(a,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(a)}onClick_(r){if(dt(r)||r.target===this.HtmlDiv)A().hideChaff(!1);else{var a=r.target.getAttribute("id");a&&(a=this.getToolboxItemById(a),a.isSelectable()&&(this.setSelectedItem(a),a.onClick(r))),A().hideChaff(!0)}Je()}onKeyDown_(r){let a=!1;switch(r.key){case"ArrowDown":a=this.selectNext_();break;case"ArrowUp":a=this.selectPrevious_();break;case"ArrowLeft":a=this.selectParent_();break;case"ArrowRight":a=this.selectChild_();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),a=!0);break;default:a=!1}!a&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(a=this.selectedItem_.onKeyDown(r)),a&&r.preventDefault()}createFlyout_(){const r=this.workspace_,a=new Ho({parentWorkspace:r,rtl:r.RTL,oneBasedIndex:r.options.oneBasedIndex,horizontalLayout:r.horizontalLayout,renderer:r.options.renderer,rendererOverrides:r.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=r.options.toolboxPosition,new(r.horizontalLayout?_(Bt.FLYOUTS_HORIZONTAL_TOOLBOX,r.options,!0):_(Bt.FLYOUTS_VERTICAL_TOOLBOX,r.options,!0))(a)}render(r){this.toolboxDef_=r;for(let a=0;a<this.contents_.length;a++){const p=this.contents_[a];p&&p.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(r.contents),this.position(),this.handleToolboxItemResize()}renderContents_(r){const a=document.createDocumentFragment();for(let p=0;p<r.length;p++)this.createToolboxItem_(r[p],a);this.contentsDiv_.appendChild(a)}createToolboxItem_(r,a){var p=r.kind;p.toUpperCase()==="CATEGORY"&&Pn(r)&&(p=t1.registrationName),(p=h(Bt.TOOLBOX_ITEM,p.toLowerCase()))&&(r=new p(r,this),r.init(),this.addToolboxItem_(r),(p=r.getDiv())&&a.appendChild(p),r.getClickTarget()&&r.getClickTarget().setAttribute("id",r.getId()))}addToolboxItem_(r){if(this.contents_.push(r),this.contentMap_[r.getId()]=r,r.isCollapsible()){r=r.getChildToolboxItems();for(let a=0;a<r.length;a++)this.addToolboxItem_(r[a])}}getToolboxItems(){return this.contents_}addStyle(r){r&&this.HtmlDiv&&ke(this.HtmlDiv,r)}removeStyle(r){r&&this.HtmlDiv&&ft(this.HtmlDiv,r)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var r=this.HtmlDiv.getBoundingClientRect();const a=r.top,p=a+r.height,b=r.left;return r=b+r.width,this.toolboxPosition===Qn.TOP?new bi(-1e7,p,-1e7,1e7):this.toolboxPosition===Qn.BOTTOM?new bi(a,1e7,-1e7,1e7):this.toolboxPosition===Qn.LEFT?new bi(-1e7,1e7,-1e7,r):new bi(-1e7,1e7,b,1e7)}wouldDelete(r,a){return r instanceof em?this.updateWouldDelete_(!r.getParent()&&r.isDeletable()):this.updateWouldDelete_(r.isDeletable()),this.wouldDelete_}onDragEnter(r){this.updateCursorDeleteStyle_(!0)}onDragExit(r){this.updateCursorDeleteStyle_(!1)}onDrop(r){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(r){r!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=r,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(r){const a=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";r?this.addStyle(a):this.removeStyle(a)}getToolboxItemById(r){return this.contentMap_[r]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const r=this.workspace_.getMetrics(),a=this.HtmlDiv;a&&(this.horizontalLayout_?(a.style.left="0",a.style.height="auto",a.style.width="100%",this.height_=a.offsetHeight,this.width_=r.viewWidth,this.toolboxPosition===Qn.TOP?a.style.top="0":a.style.bottom="0"):(this.toolboxPosition===Qn.RIGHT?a.style.right="0":a.style.left="0",a.style.height="100%",this.width_=a.offsetWidth,this.height_=r.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const r=this.workspace_,a=this.HtmlDiv.getBoundingClientRect();r.translate(this.toolboxPosition===Qn.LEFT?r.scrollX+a.width:r.scrollX,this.toolboxPosition===Qn.TOP?r.scrollY+a.height:r.scrollY),H(r)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let r=0;r<this.contents_.length;r++){const a=this.contents_[r];a.refreshTheme&&a.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(r){this.isVisible_!==r&&(this.HtmlDiv.style.display=r?"block":"none",this.isVisible_=r,this.workspace_.recordDragTargets())}autoHide(r){!r&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(r){const a=this.selectedItem_;!r&&!a||r&&!Vn(r)||(this.shouldDeselectItem_(a,r)&&a!==null&&this.deselectItem_(a),this.shouldSelectItem_(a,r)&&r!==null&&this.selectItem_(a,r),this.updateFlyout_(a,r),this.fireSelectEvent_(a,r))}shouldDeselectItem_(r,a){return r!==null&&(!r.isCollapsible()||r!==a)}shouldSelectItem_(r,a){return a!==null&&a!==r}deselectItem_(r){this.selectedItem_=null,this.previouslySelectedItem_=r,r.setSelected(!1),cr(this.contentsDiv_,Gs.ACTIVEDESCENDANT,"")}selectItem_(r,a){this.selectedItem_=a,this.previouslySelectedItem_=r,a.setSelected(!0),cr(this.contentsDiv_,Gs.ACTIVEDESCENDANT,a.getId())}selectItemByPosition(r){-1<r&&r<this.contents_.length&&(r=this.contents_[r],r.isSelectable()&&this.setSelectedItem(r))}updateFlyout_(r,a){a&&(r!==a||a.isCollapsible())&&a.getContents().length?(this.flyout_.show(a.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(r,a){const p=r&&r.getName();let b=a&&a.getName();r===a&&(b=null),r=new(we(Aa))(p,b,this.workspace_.id),ce(r)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const r=this.selectedItem_;return r.isExpanded()?this.selectNext_():r.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let r=this.contents_.indexOf(this.selectedItem_)+1;if(-1<r&&r<this.contents_.length){let a=this.contents_[r];for(;a&&!a.isSelectable();)a=this.contents_[++r];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let r=this.contents_.indexOf(this.selectedItem_)-1;if(-1<r&&r<this.contents_.length){let a=this.contents_[r];for(;a&&!a.isSelectable();)a=this.contents_[--r];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var r=0;r<this.contents_.length;r++)this.contents_[r].dispose();for(r=0;r<this.boundEvents_.length;r++)rt(this.boundEvents_[r]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),at(this.HtmlDiv))}};$t(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),i(Bt.TOOLBOX,Ja,LF);var NX="10.4.3",BX=t.Align$$module$build$src$core$inputs$align.LEFT,PX=t.Align$$module$build$src$core$inputs$align.CENTRE,FX=t.Align$$module$build$src$core$inputs$align.RIGHT,UX=$n.INPUT_VALUE,zX=$n.OUTPUT_VALUE,HX=$n.NEXT_STATEMENT,GX=$n.PREVIOUS_STATEMENT,WX=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY,VX=Qn.TOP,jX=Qn.BOTTOM,XX=Qn.LEFT,YX=Qn.RIGHT;Zv.prototype.newBlock=function(r,a){return new w_(this,r,a)},df.prototype.newBlock=function(r,a){return new em(this,r,a)},df.newTrashcan=function(r){return new _w(r)},nl.prototype.showContextMenu=function(r){if(!this.workspace.options.readOnly){var a=[];this.isDeletable()&&this.isMovable()&&(a.push(Sh(this)),a.push(Qu(this))),Su(r,a,this.RTL)}},jm.prototype.newWorkspaceSvg=function(r){return new df(r)},t.Names$$module$build$src$core$names.prototype.populateProcedures=function(r){r=Qc(r),r=r[0].concat(r[1]);for(let a=0;a<r.length;a++)this.getName(r[a][0],t.Names$$module$build$src$core$names.NameType.PROCEDURE)};var KX=$n,At={ALIGN_CENTRE:PX,ALIGN_LEFT:BX,ALIGN_RIGHT:FX};return At.ASTNode=jt,At.BasicCursor=ey,At.Block=w_,At.BlockDragger=Zb,At.BlockSvg=em,At.Blocks=Dr,At.Bubble=Ji,At.BubbleDragger=Ue,At.COLLAPSED_FIELD_NAME=Vb,At.COLLAPSED_INPUT_NAME=x0,At.COLLAPSE_CHARS=Ze,At.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator,At.CollapsibleToolboxCategory=t1,At.ComponentManager=Ia,At.Connection=Ni,At.ConnectionChecker=PS,At.ConnectionDB=Oh,At.ConnectionType=$n,At.ContextMenu=Vd,At.ContextMenuItems=ue,At.ContextMenuRegistry=ei,At.Css=eu,At.Cursor=WS,At.DELETE_VARIABLE_ID=Qt,At.DRAG_STACK=Ct,At.DUMMY_INPUT=WX,At.DeleteArea=jb,At.DragTarget=gw,At.DropDownDiv=y,At.Events=An,At.Extensions=Mp,At.Field=ui,At.FieldAngle=ye,At.FieldCheckbox=Qe,At.FieldColour=ct,At.FieldDropdown=Xd,At.FieldImage=M0,At.FieldLabel=ha,At.FieldLabelSerializable=Wt,At.FieldMultilineInput=Vt,At.FieldNumber=Zt,At.FieldTextInput=I_,At.FieldVariable=Tn,At.Flyout=ar,At.FlyoutButton=kn,At.FlyoutMetricsManager=_r,At.Generator=t.CodeGenerator$$module$build$src$core$generator,At.Gesture=Vm,At.Grid=MS,At.HorizontalFlyout=ci,At.INPUT_VALUE=UX,At.Input=Na,At.InsertionMarkerManager=Ip,At.InsertionMarkerPreviewer=Rp,At.Marker=fw,At.MarkerManager=Dh,At.Menu=g0,At.MenuItem=Ag,At.MetricsManager=Qb,At.Msg=t.Msg$$module$build$src$core$msg,At.NEXT_STATEMENT=HX,At.Names=t.Names$$module$build$src$core$names,At.OPPOSITE_TYPE=Xt,At.OUTPUT_VALUE=zX,At.Options=Ho,At.PREVIOUS_STATEMENT=GX,At.PROCEDURE_CATEGORY_NAME=jv,At.Procedures=Io,At.RENAME_VARIABLE_ID=tn,At.RenderedConnection=Bh,At.Scrollbar=zo,At.ScrollbarPair=QS,At.ShortcutItems=nm,At.ShortcutRegistry=Bi,At.TOOLBOX_AT_BOTTOM=jX,At.TOOLBOX_AT_LEFT=XX,At.TOOLBOX_AT_RIGHT=YX,At.TOOLBOX_AT_TOP=VX,At.TabNavigateCursor=mw,At.Theme=T0,At.ThemeManager=dw,At.Themes=DX,At.Toolbox=LF,At.ToolboxCategory=Ym,At.ToolboxItem=sk,At.ToolboxSeparator=cE,At.Tooltip=jd,At.Touch=vt,At.Trashcan=_w,At.UnattachedFieldError=io,At.VARIABLE_CATEGORY_NAME=f0,At.VARIABLE_DYNAMIC_CATEGORY_NAME=BS,At.VERSION=NX,At.VariableMap=zS,At.VariableModel=ef,At.Variables=tl,At.VariablesDynamic=Dg,At.VerticalFlyout=Ti,At.WidgetDiv=wp,At.Workspace=Zv,At.WorkspaceAudio=pw,At.WorkspaceComment=Bc,At.WorkspaceCommentSvg=nl,At.WorkspaceDragger=Zx,At.WorkspaceSvg=df,At.Xml=Mo,At.ZoomControls=p_,At.blockAnimations=V,At.blockRendering=ss,At.browserEvents=cd,At.bubbles=C0,At.bumpObjects=qb,At.clipboard=Pm,At.common=eo,At.config=t.config$$module$build$src$core$config,At.connectionTypes=KX,At.constants=JR,At.defineBlocksWithJsonArray=K,At.dialog=Rl,At.fieldRegistry=Vv,At.geras=Bg,At.getMainWorkspace=A,At.getSelected=O,At.hasBubble=$l,At.hideChaff=kc,At.icons=Mr,At.inject=ac,At.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types,At.inputs=su,At.isCopyable=Cu,At.isIcon=ua,At.isObservable=ve,At.isPaster=Us,At.isSerializable=Jr,At.isVariableBackedParameterModel=gs,At.minimalist=uE,At.procedures=Io,At.registry=Ma,At.renderManagement=Wd,At.serialization=rk,At.setLocale=Wf,At.setParentContainer=z,At.svgResize=H,At.thrasos=ik,At.uiPosition=Rm,At.utils=ca,At.zelos=Y,Object.defineProperties(At,{HSV_SATURATION:{get:function(){return Te("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.getHsvSaturation()"),wc()},set:function(r){Te("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.setHsvSaturation()"),Mh(r)}},HSV_VALUE:{get:function(){return Te("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.getHsvValue()"),nd()},set:function(r){Te("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.setHsvValue()"),Zu(r)}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:el}),At.__namespace__=t,At})}(Nk)),Nk.exports}var K3;function EJ(){return K3||(K3=1,function(n,e){(function(t,i){n.exports=i(pB())})(Wu,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(Dk)),Dk.exports}var J3;function fB(){return J3||(J3=1,function(n,e){(function(t,i){n.exports=i(EJ())})(Wu,function(t){return t})}(Lk)),Lk.exports}var Bk={exports:{}},Q3;function $J(){return Q3||(Q3=1,function(n,e){(function(t,i){n.exports=i()})(Wu,function(){var t=t||{Msg:Object.create(null)};return t.Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DIALOG_CANCEL="Cancel",t.Msg.DIALOG_OK="OK",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="÷",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="×",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg})}(Bk)),Bk.exports}var Pk={exports:{}},Fk={exports:{}},q3;function xJ(){return q3||(q3=1,function(n,e){(function(t,i){n.exports=i(pB())})(Wu,function(t){var i=t.__namespace__,s=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),o={customContextMenu:function(X){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(le={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:l(this)},$e=this.getField("VAR").getText(),$e={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",$e),enabled:!0,callback:u(this)},X.unshift(le),X.unshift($e));else{if(this.type==="variables_get_dynamic")var Q="variables_set_dynamic",le=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else Q="variables_get_dynamic",le=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var $e=this.getField("VAR");Q={type:Q,fields:{VAR:$e.saveState(!0)}},X.push({enabled:0<this.workspace.remainingCapacity(),text:le.replace("%1",$e.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,Q)})}},onchange:function(X){X=this.getFieldValue("VAR"),X=i.getVariable$$module$build$src$core$variables(this.workspace,X),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(X.type):this.getInput("VALUE").connection.setCheck(X.type)}},l=function(X){return function(){const Q=X.workspace,le=X.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(Q,le)}},u=function(X){return function(){const Q=X.workspace,le=X.getField("VAR").getVariable();Q.deleteVariableById(le.getId()),Q.refreshToolboxSelection()}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",o),i.defineBlocks$$module$build$src$core$common(s);var h={blocks:s},d=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),m={customContextMenu:function(X){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(le={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:_(this)},$e=this.getField("VAR").getText(),$e={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",$e),enabled:!0,callback:v(this)},X.unshift(le),X.unshift($e));else{if(this.type==="variables_get")var Q="variables_set",le=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else Q="variables_get",le=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var $e=this.getField("VAR");Q={type:Q,fields:{VAR:$e.saveState(!0)}},X.push({enabled:0<this.workspace.remainingCapacity(),text:le.replace("%1",$e.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,Q)})}}},_=function(X){return function(){const Q=X.workspace,le=X.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(Q,le)}},v=function(X){return function(){const Q=X.workspace,le=X.getField("VAR").getVariable();Q.deleteVariableById(le.getId()),Q.refreshToolboxSelection()}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",m),i.defineBlocks$$module$build$src$core$common(d);var S={blocks:d},x=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"¶"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),w={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");var Q=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return X.setAttribute("at1",`${Q}`),Q=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,X.setAttribute("at2",`${Q}`),X},domToMutation:function(X){const Q=X.getAttribute("at1")==="true";X=X.getAttribute("at2")==="true",this.updateAt_(1,Q),this.updateAt_(2,X)},updateAt_:function(X,Q){this.removeInput("AT"+X),this.removeInput("ORDINAL"+X,!0),Q?(this.appendValueInput("AT"+X).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+X).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+X),X===2&&i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL));const le=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+X]});le.setValidator(function($e){const We=$e==="FROM_START"||$e==="FROM_END";if(We!==Q){const Ft=this.getSourceBlock();return Ft.updateAt_(X,We),Ft.setFieldValue($e,"WHERE"+X),null}}),this.getInput("AT"+X).appendField(le,"WHERE"+X),X===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}};x.text_getSubstring=w,x.text_changeCase={init:function(){const X=[[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},x.text_trim={init:function(){const X=[[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},x.text_print={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var A={updateType_:function(X){this.outputConnection.setCheck(X==="NUMBER"?"Number":"String")},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("type",this.getFieldValue("TYPE")),X},domToMutation:function(X){this.updateType_(X.getAttribute("type"))}};x.text_prompt_ext=Object.assign({},A,{init:function(){var X=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),X.setValidator(Q=>{this.updateType_(Q)}),this.appendValueInput("TEXT").appendField(X,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});var k=Object.assign({},A,{init:function(){this.mixin(O);var X=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),X.setValidator(Q=>{this.updateType_(Q)}),this.appendDummyInput().appendField(X,"TYPE").appendField(this.newQuote_(!0)).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});x.text_prompt=k,x.text_count={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},x.text_replace={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},x.text_reverse={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var O={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(X){for(let Q=0,le;le=this.inputList[Q];Q++)for(let $e=0,We;We=le.fieldRow[$e];$e++)if(X===We.name){le.insertFieldAt($e,this.newQuote_(!0)),le.insertFieldAt($e+2,this.newQuote_(!1));return}console.warn('field named "'+X+'" not found in '+this.toDevString())},newQuote_:function(X){return X=this.RTL?!X:X,i.fromJson$$module$build$src$core$field_registry({type:"field_image",src:X?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:X?"“":"”"})}},D=function(){this.mixin(O),this.quoteField_("TEXT")},L={itemCount_:0,mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("items",`${this.itemCount_}`),X},domToMutation:function(X){this.itemCount_=parseInt(X.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(X){this.itemCount_=X.itemCount,this.updateShape_()},decompose:function(X){const Q=X.newBlock("text_create_join_container");Q.initSvg();let le=Q.getInput("STACK").connection;for(let $e=0;$e<this.itemCount_;$e++){const We=X.newBlock("text_create_join_item");We.initSvg(),le.connect(We.previousConnection),le=We.nextConnection}return Q},compose:function(X){var Q=X.getInputTargetBlock("STACK");for(X=[];Q;)Q.isInsertionMarker()||X.push(Q.valueConnection_),Q=Q.getNextBlock();for(Q=0;Q<this.itemCount_;Q++){const le=this.getInput("ADD"+Q).connection.targetConnection;le&&X.indexOf(le)===-1&&le.disconnect()}for(this.itemCount_=X.length,this.updateShape_(),Q=0;Q<this.itemCount_;Q++){let le;(le=X[Q])==null||le.reconnect(this,"ADD"+Q)}},saveConnections:function(X){X=X.getInputTargetBlock("STACK");let Q=0;for(;X;){if(X.isInsertionMarker()){X=X.getNextBlock();continue}const le=this.getInput("ADD"+Q);X.valueConnection_=le&&le.connection.targetConnection,X=X.getNextBlock(),Q++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var X=0;X<this.itemCount_;X++)if(!this.getInput("ADD"+X)){const Q=this.appendValueInput("ADD"+X).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);X===0&&Q.appendField(i.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(X=this.itemCount_;this.getInput("ADD"+X);X++)this.removeInput("ADD"+X)}},z=function(){this.mixin(O),this.itemCount_=2,this.updateShape_(),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};i.register$$module$build$src$core$extensions("text_append_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var H=function(){this.setTooltip(()=>i.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},U={isAt_:!1,mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("at",`${this.isAt_}`),X},domToMutation:function(X){X=X.getAttribute("at")!=="false",this.updateAt_(X)},updateAt_:function(X){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),X&&(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=X}},P=function(){this.getField("WHERE").setValidator(function(X){X=X==="FROM_START"||X==="FROM_END";const Q=this.getSourceBlock();X!==Q.isAt_&&Q.updateAt_(X)}),this.updateAt_(!0),this.setTooltip(()=>{var X=this.getFieldValue("WHERE");let Q=i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(X==="FROM_START"||X==="FROM_END")&&(X=X==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(Q+="  "+X.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Q})};i.register$$module$build$src$core$extensions("text_indexOf_tooltip",H),i.register$$module$build$src$core$extensions("text_quotes",D),i.registerMixin$$module$build$src$core$extensions("quote_image_mixin",O),i.registerMutator$$module$build$src$core$extensions("text_join_mutator",L,z),i.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",U,P),i.defineBlocks$$module$build$src$core$common(x);var K={blocks:x},ee={},re={setStatements_:function(X){this.hasStatements_!==X&&(X?(this.appendStatementInput("STACK").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=X)},updateParams_:function(){let X="";this.arguments_.length&&(X=i.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),i.disable$$module$build$src$core$events$utils();try{this.setFieldValue(X,"PARAMS")}finally{i.enable$$module$build$src$core$events$utils()}},mutationToDom:function(X){const Q=i.createElement$$module$build$src$core$utils$xml("mutation");X&&Q.setAttribute("name",this.getFieldValue("NAME"));for(let le=0;le<this.argumentVarModels_.length;le++){const $e=i.createElement$$module$build$src$core$utils$xml("arg"),We=this.argumentVarModels_[le];$e.setAttribute("name",We.name),$e.setAttribute("varid",We.getId()),X&&this.paramIds_&&$e.setAttribute("paramId",this.paramIds_[le]),Q.appendChild($e)}return this.hasStatements_||Q.setAttribute("statements","false"),Q},domToMutation:function(X){this.arguments_=[],this.argumentVarModels_=[];for(let le=0,$e;$e=X.childNodes[le];le++)if($e.nodeName.toLowerCase()==="arg"){var Q=$e;const We=Q.getAttribute("name");Q=Q.getAttribute("varid")||Q.getAttribute("varId"),this.arguments_.push(We),Q=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,Q,We,""),Q!==null?this.argumentVarModels_.push(Q):console.log(`Failed to create a variable named "${We}", ignoring.`)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(X.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const X=Object.create(null);if(this.argumentVarModels_.length){X.params=[];for(let Q=0;Q<this.argumentVarModels_.length;Q++)X.params.push({name:this.argumentVarModels_[Q].name,id:this.argumentVarModels_[Q].getId()})}return this.hasStatements_||(X.hasStatements=!1),X},loadExtraState:function(X){if(this.arguments_=[],this.argumentVarModels_=[],X.params)for(let le=0;le<X.params.length;le++){var Q=X.params[le];Q=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,Q.id,Q.name,""),this.arguments_.push(Q.name),this.argumentVarModels_.push(Q)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(X.hasStatements!==!1)},decompose:function(X){const Q=i.createElement$$module$build$src$core$utils$xml("block");Q.setAttribute("type","procedures_mutatorcontainer");var le=i.createElement$$module$build$src$core$utils$xml("statement");le.setAttribute("name","STACK"),Q.appendChild(le);for(let We=0;We<this.arguments_.length;We++){const Ft=i.createElement$$module$build$src$core$utils$xml("block");Ft.setAttribute("type","procedures_mutatorarg");var $e=i.createElement$$module$build$src$core$utils$xml("field");$e.setAttribute("name","NAME");const Be=i.createTextNode$$module$build$src$core$utils$xml(this.arguments_[We]);$e.appendChild(Be),Ft.appendChild($e),$e=i.createElement$$module$build$src$core$utils$xml("next"),Ft.appendChild($e),le.appendChild(Ft),le=$e}return X=i.domToBlock$$module$build$src$core$xml(Q,X),this.type==="procedures_defreturn"?X.setFieldValue(this.hasStatements_,"STATEMENTS"):X.removeInput("STATEMENT_INPUT"),i.mutateCallers$$module$build$src$core$procedures(this),X},compose:function(X){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let Q=X.getInputTargetBlock("STACK");for(;Q&&!Q.isInsertionMarker();){var le=Q.getFieldValue("NAME");this.arguments_.push(le),le=this.workspace.getVariable(le,""),this.argumentVarModels_.push(le),this.paramIds_.push(Q.id),Q=Q.nextConnection&&Q.nextConnection.targetBlock()}if(this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),X=X.getFieldValue("STATEMENTS"),X!==null&&(X=X==="TRUE",this.hasStatements_!==X))if(X){this.setStatements_(!0);var $e;($e=this.statementConnection_)==null||$e.reconnect(this,"STACK"),this.statementConnection_=null}else $e=this.getInput("STACK").connection,(this.statementConnection_=$e.targetConnection)&&($e=$e.targetBlock(),$e.unplug(),$e.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(X,Q){var le=this.workspace.getVariableById(X);if(le.type===""){le=le.name,Q=this.workspace.getVariableById(Q);var $e=!1;for(let We=0;We<this.argumentVarModels_.length;We++)this.argumentVarModels_[We].getId()===X&&(this.arguments_[We]=Q.name,this.argumentVarModels_[We]=Q,$e=!0);$e&&(this.displayRenamedVar_(le,Q.name),i.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(X){const Q=X.name;let le=!1,$e;for(let We=0;We<this.argumentVarModels_.length;We++)this.argumentVarModels_[We].getId()===X.getId()&&($e=this.arguments_[We],this.arguments_[We]=Q,le=!0);le&&(this.displayRenamedVar_($e,Q),i.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(X,Q){this.updateParams_();var le=this.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(le&&le.bubbleIsVisible()){le=le.getWorkspace().getAllBlocks(!1);for(let $e=0,We;We=le[$e];$e++)We.type==="procedures_mutatorarg"&&i.Names$$module$build$src$core$names.equals(X,We.getFieldValue("NAME"))&&We.setFieldValue(Q,"NAME")}},customContextMenu:function(X){if(!this.isInFlyout){var Q=this.getFieldValue("NAME"),le={type:this.callType_,extraState:{name:Q,params:this.arguments_}};if(X.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",Q),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,le)}),!this.isCollapsed())for(Q=0;Q<this.argumentVarModels_.length;Q++){le=this.argumentVarModels_[Q];const $e={type:"variables_get",fields:{VAR:{name:le.name,id:le.getId(),type:le.type}}};X.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",le.name),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,$e)})}}}};ee.procedures_defnoreturn=Object.assign({},re,{init:function(){var X=i.findLegalName$$module$build$src$core$procedures("",this);X=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:X}),X.setValidator(i.rename$$module$build$src$core$procedures),X.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(X,"NAME").appendField("","PARAMS"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),ee.procedures_defreturn=Object.assign({},re,{init:function(){var X=i.findLegalName$$module$build$src$core$procedures("",this);X=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:X}),X.setValidator(i.rename$$module$build$src$core$procedures),X.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(X,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(i.Align$$module$build$src$core$inputs$input.RIGHT).appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var ie={init:function(){this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};ee.procedures_mutatorcontainer=ie;var de={init:function(){const X=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:i.DEFAULT_ARG$$module$build$src$core$procedures});X.setValidator(this.validator_),X.oldShowEditorFn_=X.showEditor_,X.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(X,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,X.onFinishEditing_=this.deleteIntermediateVars_,X.createdVariables_=[],X.onFinishEditing_("x")},validator_:function(X){var Q=this.getSourceBlock();const le=Q.workspace.getRootWorkspace();if(X=X.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!X)return null;const $e=(Q.workspace.targetWorkspace||Q.workspace).getAllBlocks(!1),We=X.toLowerCase();for(let Ft=0;Ft<$e.length;Ft++){if($e[Ft].id===this.getSourceBlock().id)continue;const Be=$e[Ft].getFieldValue("NAME");if(Be&&Be.toLowerCase()===We)return null}return Q.isInFlyout||((Q=le.getVariable(X,""))&&Q.name!==X&&le.renameVariableById(Q.getId(),X),Q||(Q=le.createVariable(X,""))&&this.createdVariables_&&this.createdVariables_.push(Q)),X},deleteIntermediateVars_:function(X){const Q=this.getSourceBlock().workspace.getRootWorkspace();if(Q)for(let le=0;le<this.createdVariables_.length;le++){const $e=this.createdVariables_[le];$e.name!==X&&Q.deleteVariableById($e.getId())}}};ee.procedures_mutatorarg=de;var oe={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(X,Q){i.Names$$module$build$src$core$names.equals(X,this.getProcedureCall())&&(this.setFieldValue(Q,"NAME"),this.setTooltip((this.outputConnection?i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",Q)))},setProcedureParameters_:function(X,Q){var le=i.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((le=(le=le&&le.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&le.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),X.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=Q;else{if(Q.length!==X.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let We=0;We<this.arguments_.length;We++){var $e=this.getInput("ARG"+We);$e&&($e=$e.connection.targetConnection,this.quarkConnections_[this.quarkIds_[We]]=$e,le&&$e&&Q.indexOf(this.quarkIds_[We])===-1&&($e.disconnect(),$e.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(X),this.argumentVarModels_=[],X=0;X<this.arguments_.length;X++)le=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[X],""),this.argumentVarModels_.push(le);if(this.updateShape_(),this.quarkIds_=Q){for(Q=0;Q<this.arguments_.length;Q++)if(X=this.quarkIds_[Q],X in this.quarkConnections_){let We;(We=this.quarkConnections_[X])!=null&&We.reconnect(this,"ARG"+Q)||delete this.quarkConnections_[X]}}}},updateShape_:function(){for(var X=0;X<this.arguments_.length;X++){var Q=this.getField("ARGNAME"+X);if(Q){i.disable$$module$build$src$core$events$utils();try{Q.setValue(this.arguments_[X])}finally{i.enable$$module$build$src$core$events$utils()}}else Q=i.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[X]}),this.appendValueInput("ARG"+X).setAlign(i.Align$$module$build$src$core$inputs$input.RIGHT).appendField(Q,"ARGNAME"+X).init()}for(X=this.arguments_.length;this.getInput("ARG"+X);X++)this.removeInput("ARG"+X);(X=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(X.appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),X.init()):this.getField("WITH")&&X.removeField("WITH"))},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");X.setAttribute("name",this.getProcedureCall());for(let Q=0;Q<this.arguments_.length;Q++){const le=i.createElement$$module$build$src$core$utils$xml("arg");le.setAttribute("name",this.arguments_[Q]),X.appendChild(le)}return X},domToMutation:function(X){var Q=X.getAttribute("name");this.renameProcedure(this.getProcedureCall(),Q),Q=[];const le=[];for(let $e=0,We;We=X.childNodes[$e];$e++)We.nodeName.toLowerCase()==="arg"&&(Q.push(We.getAttribute("name")),le.push(We.getAttribute("paramId")));this.setProcedureParameters_(Q,le)},saveExtraState:function(){const X=Object.create(null);return X.name=this.getProcedureCall(),this.arguments_.length&&(X.params=this.arguments_),X},loadExtraState:function(X){if(this.renameProcedure(this.getProcedureCall(),X.name),X=X.params){const Q=[];Q.length=X.length,Q.fill(null),this.setProcedureParameters_(X,Q)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(X){if(this.workspace&&!this.workspace.isFlyout&&X.recordUndo)if(X.type===i.CREATE$$module$build$src$core$events$utils&&X.ids.indexOf(this.id)!==-1){var Q=this.getProcedureCall();if(Q=i.getDefinition$$module$build$src$core$procedures(Q,this.workspace),!Q||Q.type===this.defType_&&JSON.stringify(Q.getVars())===JSON.stringify(this.arguments_)||(Q=null),!Q){i.setGroup$$module$build$src$core$events$utils(X.group),X=i.createElement$$module$build$src$core$utils$xml("xml"),Q=i.createElement$$module$build$src$core$utils$xml("block"),Q.setAttribute("type",this.defType_);var le=this.getRelativeToSurfaceXY(),$e=le.y+2*i.config$$module$build$src$core$config.snapRadius;Q.setAttribute("x",`${le.x+i.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),Q.setAttribute("y",`${$e}`),le=this.mutationToDom(),Q.appendChild(le),le=i.createElement$$module$build$src$core$utils$xml("field"),le.setAttribute("name","NAME"),$e=this.getProcedureCall();const We=i.findLegalName$$module$build$src$core$procedures($e,this);$e!==We&&this.renameProcedure($e,We),le.appendChild(i.createTextNode$$module$build$src$core$utils$xml($e)),Q.appendChild(le),X.appendChild(Q),i.domToWorkspace$$module$build$src$core$xml(X,this.workspace),i.setGroup$$module$build$src$core$events$utils(!1)}}else X.type===i.DELETE$$module$build$src$core$events$utils?(Q=this.getProcedureCall(),i.getDefinition$$module$build$src$core$procedures(Q,this.workspace)||(i.setGroup$$module$build$src$core$events$utils(X.group),this.dispose(!0),i.setGroup$$module$build$src$core$events$utils(!1))):X.type===i.CHANGE$$module$build$src$core$events$utils&&X.element==="disabled"&&(Q=this.getProcedureCall(),(Q=i.getDefinition$$module$build$src$core$procedures(Q,this.workspace))&&Q.id===X.blockId&&((Q=i.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),i.setGroup$$module$build$src$core$events$utils(X.group),X.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),i.setGroup$$module$build$src$core$events$utils(Q)))},customContextMenu:function(X){if(this.workspace.isMovable()){var Q=this.getProcedureCall(),le=this.workspace;X.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const $e=i.getDefinition$$module$build$src$core$procedures(Q,le);$e&&(le.centerOnBlock($e.id),$e.select())}})}}};ee.procedures_callnoreturn=Object.assign({},oe,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),ee.procedures_callreturn=Object.assign({},oe,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"});var ce={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("value",String(Number(this.hasReturnValue_))),X},domToMutation:function(X){this.hasReturnValue_=X.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(X){if(!(this.workspace.isDragging&&this.workspace.isDragging()||X.type!==i.MOVE$$module$build$src$core$events$utils)){var Q=!1,le=this;do{if(this.FUNCTION_TYPES.indexOf(le.type)!==-1){Q=!0;break}le=le.getSurroundParent()}while(le);Q?(le.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):le.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(le=i.getGroup$$module$build$src$core$events$utils(),i.setGroup$$module$build$src$core$events$utils(X.group),this.setEnabled(Q),i.setGroup$$module$build$src$core$events$utils(le))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};ee.procedures_ifreturn=ce,i.defineBlocks$$module$build$src$core$common(ee);var me={blocks:ee},Ae=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),j={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};i.register$$module$build$src$core$extensions("math_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",j));var Z={mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation"),Q=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return X.setAttribute("divisor_input",String(Q)),X},domToMutation:function(X){X=X.getAttribute("divisor_input")==="true",this.updateShape_(X)},updateShape_:function(X){const Q=this.getInput("DIVISOR");X?Q||this.appendValueInput("DIVISOR").setCheck("Number"):Q&&this.removeInput("DIVISOR")}},ne=function(){this.getField("PROPERTY").setValidator(function(X){X=X==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(X)})};i.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",Z,ne),i.register$$module$build$src$core$extensions("math_change_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var ae={updateType_:function(X){X==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("op",this.getFieldValue("OP")),X},domToMutation:function(X){if(X=X.getAttribute("op"),X===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(X)}},_e=function(){this.getField("OP").setValidator((function(X){this.updateType_(X)}).bind(this))};i.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",ae,_e),i.defineBlocks$$module$build$src$core$common(Ae);var Le={blocks:Ae},we=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),Xe={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};i.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",Xe));var Re={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};i.register$$module$build$src$core$extensions("controls_flow_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",Re));var qe={customContextMenu:function(X){if(!this.isInFlyout){var Q=this.getField("VAR"),le=Q.getVariable().name;this.isCollapsed()||le===null||(Q={type:"variables_get",fields:{VAR:Q.saveState(!0)}},X.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",le),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,Q)}))}}};i.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",qe),i.register$$module$build$src$core$extensions("controls_for_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),i.register$$module$build$src$core$extensions("controls_forEach_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var Je=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),ht={getSurroundLoop:function(){let X=this;do{if(Je.has(X.type))return X;X=X.getSurroundParent()}while(X);return null},onchange:function(X){var Q=this.workspace;if(Q.isDragging&&!Q.isDragging()&&X.type===i.MOVE$$module$build$src$core$events$utils&&(Q=!!this.getSurroundLoop(),this.setWarningText(Q?null:i.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout)){const le=i.getGroup$$module$build$src$core$events$utils();i.setGroup$$module$build$src$core$events$utils(X.group),this.setEnabled(Q),i.setGroup$$module$build$src$core$events$utils(le)}}};i.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",ht),i.defineBlocks$$module$build$src$core$common(we);var it={blocks:we,loopTypes:Je},Oe=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Ee={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};i.register$$module$build$src$core$extensions("logic_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Ee));var Fe={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const X=i.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&X.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&X.setAttribute("else","1"),X},domToMutation:function(X){this.elseifCount_=parseInt(X.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(X.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const X=Object.create(null);return this.elseifCount_&&(X.elseIfCount=this.elseifCount_),this.elseCount_&&(X.hasElse=!0),X},loadExtraState:function(X){this.elseifCount_=X.elseIfCount||0,this.elseCount_=X.hasElse?1:0,this.updateShape_()},decompose:function(X){const Q=X.newBlock("controls_if_if");Q.initSvg();let le=Q.nextConnection;for(let $e=1;$e<=this.elseifCount_;$e++){const We=X.newBlock("controls_if_elseif");We.initSvg(),le.connect(We.previousConnection),le=We.nextConnection}return this.elseCount_&&(X=X.newBlock("controls_if_else"),X.initSvg(),le.connect(X.previousConnection)),Q},compose:function(X){X=X.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const Q=[null],le=[null];let $e=null;for(;X;){if(!X.isInsertionMarker())switch(X.type){case"controls_if_elseif":this.elseifCount_++,Q.push(X.valueConnection_),le.push(X.statementConnection_);break;case"controls_if_else":this.elseCount_++,$e=X.statementConnection_;break;default:throw TypeError("Unknown block type: "+X.type)}X=X.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(Q,le,$e)},saveConnections:function(X){X=X.nextConnection.targetBlock();let Q=1;for(;X;){if(!X.isInsertionMarker())switch(X.type){case"controls_if_elseif":var le=this.getInput("IF"+Q);const $e=this.getInput("DO"+Q);X.valueConnection_=le&&le.connection.targetConnection,X.statementConnection_=$e&&$e.connection.targetConnection,Q++;break;case"controls_if_else":le=this.getInput("ELSE"),X.statementConnection_=le&&le.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+X.type)}X=X.getNextBlock()}},rebuildShape_:function(){const X=[null],Q=[null];let le=null;this.getInput("ELSE")&&(le=this.getInput("ELSE").connection.targetConnection);for(let $e=1;this.getInput("IF"+$e);$e++){const We=this.getInput("IF"+$e),Ft=this.getInput("DO"+$e);X.push(We.connection.targetConnection),Q.push(Ft.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(X,Q,le)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var X=1;this.getInput("IF"+X);X++)this.removeInput("IF"+X),this.removeInput("DO"+X);for(X=1;X<=this.elseifCount_;X++)this.appendValueInput("IF"+X).setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+X).appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(X,Q,le){for(let $e=1;$e<=this.elseifCount_;$e++){let We;(We=X[$e])==null||We.reconnect(this,"IF"+$e);let Ft;(Ft=Q[$e])==null||Ft.reconnect(this,"DO"+$e)}le==null||le.reconnect(this,"ELSE")}};i.registerMutator$$module$build$src$core$extensions("controls_if_mutator",Fe,null,["controls_if_elseif","controls_if_else"]);var rt=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};i.register$$module$build$src$core$extensions("controls_if_tooltip",rt);var nt={onchange:function(X){this.prevBlocks_||(this.prevBlocks_=[null,null]);var Q=this.getInputTargetBlock("A");const le=this.getInputTargetBlock("B");Q&&le&&!this.workspace.connectionChecker.doTypeChecks(Q.outputConnection,le.outputConnection)&&(i.setGroup$$module$build$src$core$events$utils(X.group),X=this.prevBlocks_[0],X!==Q&&(Q.unplug(),!X||X.isDisposed()||X.isShadow()||this.getInput("A").connection.connect(X.outputConnection)),Q=this.prevBlocks_[1],Q!==le&&(le.unplug(),!Q||Q.isDisposed()||Q.isShadow()||this.getInput("B").connection.connect(Q.outputConnection)),this.bumpNeighbours(),i.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},dt=function(){this.mixin(nt)};i.register$$module$build$src$core$extensions("logic_compare",dt);var It={prevParentConnection_:null,onchange:function(X){const Q=this.getInputTargetBlock("THEN"),le=this.getInputTargetBlock("ELSE"),$e=this.outputConnection.targetConnection;if((Q||le)&&$e)for(let We=0;2>We;We++){const Ft=We===1?Q:le;Ft&&!Ft.workspace.connectionChecker.doTypeChecks(Ft.outputConnection,$e)&&(i.setGroup$$module$build$src$core$events$utils(X.group),$e===this.prevParentConnection_?(this.unplug(),$e.getSourceBlock().bumpNeighbours()):(Ft.unplug(),Ft.bumpNeighbours()),i.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=$e}};i.registerMixin$$module$build$src$core$extensions("logic_ternary",It),i.defineBlocks$$module$build$src$core$common(Oe);var mt=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),wt={init:function(){this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("items",String(this.itemCount_)),X},domToMutation:function(X){if(X=X.getAttribute("items"),!X)throw new TypeError("element did not have items");this.itemCount_=parseInt(X,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(X){this.itemCount_=X.itemCount,this.updateShape_()},decompose:function(X){const Q=X.newBlock("lists_create_with_container");Q.initSvg();let le=Q.getInput("STACK").connection;for(let $e=0;$e<this.itemCount_;$e++){const We=X.newBlock("lists_create_with_item");if(We.initSvg(),!We.previousConnection)throw Error("itemBlock has no previousConnection");le.connect(We.previousConnection),le=We.nextConnection}return Q},compose:function(X){var Q=X.getInputTargetBlock("STACK");for(X=[];Q;)Q.isInsertionMarker()||X.push(Q.valueConnection_),Q=Q.getNextBlock();for(Q=0;Q<this.itemCount_;Q++){const le=this.getInput("ADD"+Q).connection.targetConnection;le&&X.indexOf(le)===-1&&le.disconnect()}for(this.itemCount_=X.length,this.updateShape_(),Q=0;Q<this.itemCount_;Q++){let le;(le=X[Q])==null||le.reconnect(this,"ADD"+Q)}},saveConnections:function(X){X=X.getInputTargetBlock("STACK");let Q=0;for(;X;){if(X.isInsertionMarker()){X=X.getNextBlock();continue}const le=this.getInput("ADD"+Q);let $e;X.valueConnection_=($e=le)==null?void 0:$e.connection.targetConnection,X=X.getNextBlock(),Q++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var X=0;X<this.itemCount_;X++)if(!this.getInput("ADD"+X)){const Q=this.appendValueInput("ADD"+X).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);X===0&&Q.appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(X=this.itemCount_;this.getInput("ADD"+X);X++)this.removeInput("ADD"+X)}};mt.lists_create_with=wt;var $t={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};mt.lists_create_with_container=$t;var pt={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};mt.lists_create_with_item=pt;var Te={init:function(){var X=[[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),!X)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(X,"END"),this.setInputsInline(!0),this.setTooltip(()=>i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};mt.lists_indexOf=Te;var te={init:function(){var X=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),X.setValidator(function(Q){Q=Q==="REMOVE",this.getSourceBlock().updateStatement_(Q)}),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(X,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const Q=this.getFieldValue("MODE"),le=this.getFieldValue("WHERE");let $e="";switch(Q+" "+le){case"GET FROM_START":case"GET FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(le==="FROM_START"||le==="FROM_END")&&($e+="  "+(le==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),$e})},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");X.setAttribute("statement",String(!this.outputConnection));const Q=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return X.setAttribute("at",String(Q)),X},domToMutation:function(X){const Q=X.getAttribute("statement")==="true";this.updateStatement_(Q),X=X.getAttribute("at")!=="false",this.updateAt_(X)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(X){X.isStatement?this.updateStatement_(!0):typeof X=="string"&&this.domToMutation(i.textToDom$$module$build$src$core$utils$xml(X))},updateStatement_:function(X){X!==!this.outputConnection&&(this.unplug(!0,!0),X?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(X){this.removeInput("AT"),this.removeInput("ORDINAL",!0),X?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const Q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});Q.setValidator(function(le){const $e=le==="FROM_START"||le==="FROM_END";if($e!==X){const We=this.getSourceBlock();return We.updateAt_($e),We.setFieldValue(le,"WHERE"),null}}),this.getInput("AT").appendField(Q,"WHERE"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};mt.lists_getIndex=te;var ke={init:function(){var X=[[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),this.appendDummyInput().appendField(X,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const Q=this.getFieldValue("MODE"),le=this.getFieldValue("WHERE");let $e="";switch(Q+" "+le){case"SET FROM_START":case"SET FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(le==="FROM_START"||le==="FROM_END")&&($e+="  "+i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),$e})},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation"),Q=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return X.setAttribute("at",String(Q)),X},domToMutation:function(X){X=X.getAttribute("at")!=="false",this.updateAt_(X)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(X){this.removeInput("AT"),this.removeInput("ORDINAL",!0),X?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const Q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});Q.setValidator(function(le){const $e=le==="FROM_START"||le==="FROM_END";if($e!==X){const We=this.getSourceBlock();return We.updateAt_($e),We.setFieldValue(le,"WHERE"),null}}),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(Q,"WHERE")}};mt.lists_setIndex=ke;var ot={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");var Q=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return X.setAttribute("at1",String(Q)),Q=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,X.setAttribute("at2",String(Q)),X},domToMutation:function(X){const Q=X.getAttribute("at1")==="true";X=X.getAttribute("at2")==="true",this.updateAt_(1,Q),this.updateAt_(2,X)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(X,Q){this.removeInput("AT"+X),this.removeInput("ORDINAL"+X,!0),Q?(this.appendValueInput("AT"+X).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+X).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+X);const le=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+X]});le.setValidator(function($e){const We=$e==="FROM_START"||$e==="FROM_END";if(We!==Q){const Ft=this.getSourceBlock();return Ft.updateAt_(X,We),Ft.setFieldValue($e,"WHERE"+X),null}}),this.getInput("AT"+X).appendField(le,"WHERE"+X),X===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};mt.lists_getSublist=ot,mt.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},mt.lists_split={init:function(){const X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!X)throw Error("field_dropdown not found");X.setValidator(Q=>{this.updateType_(Q)}),this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(X,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const Q=this.getFieldValue("MODE");if(Q==="SPLIT")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(Q==="JOIN")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+Q)})},updateType_:function(X){if(this.getFieldValue("MODE")!==X){const Q=this.getInput("INPUT").connection;Q.setShadowDom(null);const le=Q.targetBlock();le&&(Q.disconnect(),le.isShadow()?le.dispose(!1):this.bumpNeighbours())}X==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("mode",this.getFieldValue("MODE")),X},domToMutation:function(X){this.updateType_(X.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},i.defineBlocks$$module$build$src$core$common(mt);var ft={blocks:mt},xt=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]);i.defineBlocks$$module$build$src$core$common(xt);var at={blocks:xt},Ge=Object.assign({},xt,mt,Oe,we,Ae,ee,d,s),Ce={blocks:Ge,colour:at,lists:ft,loops:it,math:Le,procedures:me,texts:K,variables:S,variablesDynamic:h};return Ce.__namespace__=i,Ce})}(Fk)),Fk.exports}var Z3;function wJ(){return Z3||(Z3=1,function(n,e){(function(t,i){n.exports=i(xJ())})(Wu,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(Pk)),Pk.exports}var VW={exports:{}},Uk={exports:{}},eU;function CJ(){return eU||(eU=1,function(n,e){(function(t,i){n.exports=i(pB())})(Wu,function(t){var i=t.__namespace__,s=function(q,ge){return[ge.quote_(q.getFieldValue("COLOUR")),Ce.ATOMIC]},o=function(q,ge){return[ge.provideFunction_("colourRandom",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",Ce.FUNCTION_CALL]},l=function(q,ge){const Ne=ge.valueToCode(q,"RED",Ce.NONE)||0,tt=ge.valueToCode(q,"GREEN",Ce.NONE)||0;return q=ge.valueToCode(q,"BLUE",Ce.NONE)||0,[ge.provideFunction_("colourRgb",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+Ne+", "+tt+", "+q+")",Ce.FUNCTION_CALL]},u=function(q,ge){const Ne=ge.valueToCode(q,"COLOUR1",Ce.NONE)||"'#000000'",tt=ge.valueToCode(q,"COLOUR2",Ce.NONE)||"'#000000'";return q=ge.valueToCode(q,"RATIO",Ce.NONE)||.5,[ge.provideFunction_("colourBlend",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+Ne+", "+tt+", "+q+")",Ce.FUNCTION_CALL]},h=function(q,ge){return["[]",Ce.ATOMIC]},d=function(q,ge){const Ne=Array(q.itemCount_);for(let tt=0;tt<q.itemCount_;tt++)Ne[tt]=ge.valueToCode(q,"ADD"+tt,Ce.NONE)||"null";return["["+Ne.join(", ")+"]",Ce.ATOMIC]},m=function(q,ge){const Ne=ge.provideFunction_("listsRepeat",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),tt=ge.valueToCode(q,"ITEM",Ce.NONE)||"null";return q=ge.valueToCode(q,"NUM",Ce.NONE)||"0",[Ne+"("+tt+", "+q+")",Ce.FUNCTION_CALL]},_=function(q,ge){return[(ge.valueToCode(q,"VALUE",Ce.MEMBER)||"[]")+".length",Ce.MEMBER]},v=function(q,ge){return["!"+(ge.valueToCode(q,"VALUE",Ce.MEMBER)||"[]")+".length",Ce.LOGICAL_NOT]},S=function(q,ge){const Ne=q.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",tt=ge.valueToCode(q,"FIND",Ce.NONE)||"''";return ge=(ge.valueToCode(q,"VALUE",Ce.MEMBER)||"[]")+"."+Ne+"("+tt+")",q.workspace.options.oneBasedIndex?[ge+" + 1",Ce.ADDITION]:[ge,Ce.FUNCTION_CALL]},x=function(q,ge){const Ne=q.getFieldValue("MODE")||"GET",tt=q.getFieldValue("WHERE")||"FROM_START";var kt=ge.valueToCode(q,"VALUE",tt==="RANDOM"?Ce.NONE:Ce.MEMBER)||"[]";switch(tt){case"FIRST":if(Ne==="GET")return[kt+"[0]",Ce.MEMBER];if(Ne==="GET_REMOVE")return[kt+".shift()",Ce.MEMBER];if(Ne==="REMOVE")return kt+`.shift();
`;break;case"LAST":if(Ne==="GET")return[kt+".slice(-1)[0]",Ce.MEMBER];if(Ne==="GET_REMOVE")return[kt+".pop()",Ce.MEMBER];if(Ne==="REMOVE")return kt+`.pop();
`;break;case"FROM_START":if(q=ge.getAdjusted(q,"AT"),Ne==="GET")return[kt+"["+q+"]",Ce.MEMBER];if(Ne==="GET_REMOVE")return[kt+".splice("+q+", 1)[0]",Ce.FUNCTION_CALL];if(Ne==="REMOVE")return kt+".splice("+q+`, 1);
`;break;case"FROM_END":if(q=ge.getAdjusted(q,"AT",1,!0),Ne==="GET")return[kt+".slice("+q+")[0]",Ce.FUNCTION_CALL];if(Ne==="GET_REMOVE")return[kt+".splice("+q+", 1)[0]",Ce.FUNCTION_CALL];if(Ne==="REMOVE")return kt+".splice("+q+", 1);";break;case"RANDOM":if(kt=ge.provideFunction_("listsGetRandomItem",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+kt+", "+(Ne!=="GET")+")",Ne==="GET"||Ne==="GET_REMOVE")return[kt,Ce.FUNCTION_CALL];if(Ne==="REMOVE")return kt+`;
`}throw Error("Unhandled combination (lists_getIndex).")},w=function(q,ge){function Ne(){if(tt.match(/^\w+$/))return"";const Ie=ge.nameDB_.getDistinctName("tmpList",i.NameType$$module$build$src$core$names.VARIABLE),lt="var "+Ie+" = "+tt+`;
`;return tt=Ie,lt}let tt=ge.valueToCode(q,"LIST",Ce.MEMBER)||"[]";const kt=q.getFieldValue("MODE")||"GET";var qt=q.getFieldValue("WHERE")||"FROM_START";const _n=ge.valueToCode(q,"TO",Ce.ASSIGNMENT)||"null";switch(qt){case"FIRST":if(kt==="SET")return tt+"[0] = "+_n+`;
`;if(kt==="INSERT")return tt+".unshift("+_n+`);
`;break;case"LAST":if(kt==="SET")return Ne()+(tt+"["+tt+".length - 1] = "+_n+`;
`);if(kt==="INSERT")return tt+".push("+_n+`);
`;break;case"FROM_START":if(q=ge.getAdjusted(q,"AT"),kt==="SET")return tt+"["+q+"] = "+_n+`;
`;if(kt==="INSERT")return tt+".splice("+q+", 0, "+_n+`);
`;break;case"FROM_END":if(q=ge.getAdjusted(q,"AT",1,!1,Ce.SUBTRACTION),qt=Ne(),kt==="SET")return qt+(tt+"["+tt+".length - "+q+"] = "+_n+`;
`);if(kt==="INSERT")return qt+(tt+".splice("+tt+".length - "+q+", 0, "+_n+`);
`);break;case"RANDOM":if(q=Ne(),qt=ge.nameDB_.getDistinctName("tmpX",i.NameType$$module$build$src$core$names.VARIABLE),q+="var "+qt+" = Math.floor(Math.random() * "+tt+`.length);
`,kt==="SET")return q+(tt+"["+qt+"] = "+_n+`;
`);if(kt==="INSERT")return q+(tt+".splice("+qt+", 0, "+_n+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},A=function(q,ge){var Ne={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},tt=ge.valueToCode(q,"LIST",Ce.MEMBER)||"[]";const kt=q.getFieldValue("WHERE1"),qt=q.getFieldValue("WHERE2");if(kt==="FIRST"&&qt==="LAST")tt+=".slice(0)";else if(tt.match(/^\w+$/)||kt!=="FROM_END"&&qt==="FROM_START"){switch(kt){case"FROM_START":Ne=ge.getAdjusted(q,"AT1");break;case"FROM_END":Ne=ge.getAdjusted(q,"AT1",1,!1,Ce.SUBTRACTION),Ne=tt+".length - "+Ne;break;case"FIRST":Ne="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(qt){case"FROM_START":ge=ge.getAdjusted(q,"AT2",1);break;case"FROM_END":ge=ge.getAdjusted(q,"AT2",0,!1,Ce.SUBTRACTION),ge=tt+".length - "+ge;break;case"LAST":ge=tt+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}tt=tt+".slice("+Ne+", "+ge+")"}else{const _n=ge.getAdjusted(q,"AT1");q=ge.getAdjusted(q,"AT2"),tt=ge.provideFunction_("subsequence"+Ne[kt]+Ne[qt],`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(sequence${kt==="FROM_END"||kt==="FROM_START"?", at1":""}${qt==="FROM_END"||qt==="FROM_START"?", at2":""}) {
  var start = ${le("sequence",kt,"at1")};
  var end = ${le("sequence",qt,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+tt+(kt==="FROM_END"||kt==="FROM_START"?", "+_n:"")+(qt==="FROM_END"||qt==="FROM_START"?", "+q:"")+")"}return[tt,Ce.FUNCTION_CALL]},k=function(q,ge){const Ne=ge.valueToCode(q,"LIST",Ce.FUNCTION_CALL)||"[]",tt=q.getFieldValue("DIRECTION")==="1"?1:-1;return q=q.getFieldValue("TYPE"),ge=ge.provideFunction_("listsGetSortCompare",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[Ne+".slice().sort("+ge+'("'+q+'", '+tt+"))",Ce.FUNCTION_CALL]},O=function(q,ge){let Ne=ge.valueToCode(q,"INPUT",Ce.MEMBER);if(ge=ge.valueToCode(q,"DELIM",Ce.NONE)||"''",q=q.getFieldValue("MODE"),q==="SPLIT")Ne||(Ne="''"),q="split";else if(q==="JOIN")Ne||(Ne="[]"),q="join";else throw Error("Unknown mode: "+q);return[Ne+"."+q+"("+ge+")",Ce.FUNCTION_CALL]},D=function(q,ge){return[(ge.valueToCode(q,"LIST",Ce.FUNCTION_CALL)||"[]")+".slice().reverse()",Ce.FUNCTION_CALL]},L=function(q,ge){var Ne=0;let tt="";ge.STATEMENT_PREFIX&&(tt+=ge.injectId(ge.STATEMENT_PREFIX,q));do{const kt=ge.valueToCode(q,"IF"+Ne,Ce.NONE)||"false";let qt=ge.statementToCode(q,"DO"+Ne);ge.STATEMENT_SUFFIX&&(qt=ge.prefixLines(ge.injectId(ge.STATEMENT_SUFFIX,q),ge.INDENT)+qt),tt+=(0<Ne?" else ":"")+"if ("+kt+`) {
`+qt+"}",Ne++}while(q.getInput("IF"+Ne));return(q.getInput("ELSE")||ge.STATEMENT_SUFFIX)&&(Ne=ge.statementToCode(q,"ELSE"),ge.STATEMENT_SUFFIX&&(Ne=ge.prefixLines(ge.injectId(ge.STATEMENT_SUFFIX,q),ge.INDENT)+Ne),tt+=` else {
`+Ne+"}"),tt+`
`},z=function(q,ge){const Ne={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[q.getFieldValue("OP")],tt=Ne==="=="||Ne==="!="?Ce.EQUALITY:Ce.RELATIONAL,kt=ge.valueToCode(q,"A",tt)||"0";return q=ge.valueToCode(q,"B",tt)||"0",[kt+" "+Ne+" "+q,tt]},H=function(q,ge){const Ne=q.getFieldValue("OP")==="AND"?"&&":"||",tt=Ne==="&&"?Ce.LOGICAL_AND:Ce.LOGICAL_OR;let kt=ge.valueToCode(q,"A",tt);return q=ge.valueToCode(q,"B",tt),kt||q?(ge=Ne==="&&"?"true":"false",kt||(kt=ge),q||(q=ge)):q=kt="false",[kt+" "+Ne+" "+q,tt]},U=function(q,ge){const Ne=Ce.LOGICAL_NOT;return["!"+(ge.valueToCode(q,"BOOL",Ne)||"true"),Ne]},P=function(q,ge){return[q.getFieldValue("BOOL")==="TRUE"?"true":"false",Ce.ATOMIC]},K=function(q,ge){return["null",Ce.ATOMIC]},ee=function(q,ge){const Ne=ge.valueToCode(q,"IF",Ce.CONDITIONAL)||"false",tt=ge.valueToCode(q,"THEN",Ce.CONDITIONAL)||"null";return q=ge.valueToCode(q,"ELSE",Ce.CONDITIONAL)||"null",[Ne+" ? "+tt+" : "+q,Ce.CONDITIONAL]},re=function(q,ge){let Ne;Ne=q.getField("TIMES")?String(Number(q.getFieldValue("TIMES"))):ge.valueToCode(q,"TIMES",Ce.ASSIGNMENT)||"0";let tt=ge.statementToCode(q,"DO");tt=ge.addLoopTrap(tt,q),q="";const kt=ge.nameDB_.getDistinctName("count",i.NameType$$module$build$src$core$names.VARIABLE);let qt=Ne;return Ne.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(Ne)||(qt=ge.nameDB_.getDistinctName("repeat_end",i.NameType$$module$build$src$core$names.VARIABLE),q+="var "+qt+" = "+Ne+`;
`),q+("for (var "+kt+" = 0; "+kt+" < "+qt+"; "+kt+`++) {
`+tt+`}
`)},ie=function(q,ge){const Ne=q.getFieldValue("MODE")==="UNTIL";let tt=ge.valueToCode(q,"BOOL",Ne?Ce.LOGICAL_NOT:Ce.NONE)||"false",kt=ge.statementToCode(q,"DO");return kt=ge.addLoopTrap(kt,q),Ne&&(tt="!"+tt),"while ("+tt+`) {
`+kt+`}
`},de=function(q,ge){var Ne=ge.getVariableName(q.getFieldValue("VAR")),tt=ge.valueToCode(q,"FROM",Ce.ASSIGNMENT)||"0",kt=ge.valueToCode(q,"TO",Ce.ASSIGNMENT)||"0";const qt=ge.valueToCode(q,"BY",Ce.ASSIGNMENT)||"1";let _n=ge.statementToCode(q,"DO");if(_n=ge.addLoopTrap(_n,q),i.isNumber$$module$build$src$core$utils$string(tt)&&i.isNumber$$module$build$src$core$utils$string(kt)&&i.isNumber$$module$build$src$core$utils$string(qt))ge=Number(tt)<=Number(kt),q="for ("+Ne+" = "+tt+"; "+Ne+(ge?" <= ":" >= ")+kt+"; "+Ne,Ne=Math.abs(Number(qt)),q=Ne===1?q+(ge?"++":"--"):q+((ge?" += ":" -= ")+Ne),q+=`) {
`+_n+`}
`;else{q="";let Ie=tt;tt.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(tt)||(Ie=ge.nameDB_.getDistinctName(Ne+"_start",i.NameType$$module$build$src$core$names.VARIABLE),q+="var "+Ie+" = "+tt+`;
`),tt=kt,kt.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(kt)||(tt=ge.nameDB_.getDistinctName(Ne+"_end",i.NameType$$module$build$src$core$names.VARIABLE),q+="var "+tt+" = "+kt+`;
`),kt=ge.nameDB_.getDistinctName(Ne+"_inc",i.NameType$$module$build$src$core$names.VARIABLE),q+="var "+kt+" = ",q=i.isNumber$$module$build$src$core$utils$string(qt)?q+(Math.abs(Number(qt))+`;
`):q+("Math.abs("+qt+`);
`),q+="if ("+Ie+" > "+tt+`) {
`,q+=ge.INDENT+kt+" = -"+kt+`;
`,q=q+`}
for (`+(Ne+" = "+Ie+"; "+kt+" >= 0 ? "+Ne+" <= "+tt+" : "+Ne+" >= "+tt+"; "+Ne+" += "+kt+`) {
`+_n+`}
`)}return q},oe=function(q,ge){const Ne=ge.getVariableName(q.getFieldValue("VAR"));var tt=ge.valueToCode(q,"LIST",Ce.ASSIGNMENT)||"[]";let kt=ge.statementToCode(q,"DO");kt=ge.addLoopTrap(kt,q),q="";let qt=tt;return tt.match(/^\w+$/)||(qt=ge.nameDB_.getDistinctName(Ne+"_list",i.NameType$$module$build$src$core$names.VARIABLE),q+="var "+qt+" = "+tt+`;
`),tt=ge.nameDB_.getDistinctName(Ne+"_index",i.NameType$$module$build$src$core$names.VARIABLE),kt=ge.INDENT+Ne+" = "+qt+"["+tt+`];
`+kt,q+("for (var "+tt+" in "+qt+`) {
`+kt+`}
`)},ce=function(q,ge){let Ne="";if(ge.STATEMENT_PREFIX&&(Ne+=ge.injectId(ge.STATEMENT_PREFIX,q)),ge.STATEMENT_SUFFIX&&(Ne+=ge.injectId(ge.STATEMENT_SUFFIX,q)),ge.STATEMENT_PREFIX){const tt=q.getSurroundLoop();tt&&!tt.suppressPrefixSuffix&&(Ne+=ge.injectId(ge.STATEMENT_PREFIX,tt))}switch(q.getFieldValue("FLOW")){case"BREAK":return Ne+`break;
`;case"CONTINUE":return Ne+`continue;
`}throw Error("Unknown flow statement.")},me=function(q,ge){return q=Number(q.getFieldValue("NUM")),[String(q),0<=q?Ce.ATOMIC:Ce.UNARY_NEGATION]},Ae=function(q,ge){var Ne={ADD:[" + ",Ce.ADDITION],MINUS:[" - ",Ce.SUBTRACTION],MULTIPLY:[" * ",Ce.MULTIPLICATION],DIVIDE:[" / ",Ce.DIVISION],POWER:[null,Ce.NONE]}[q.getFieldValue("OP")];const tt=Ne[0];Ne=Ne[1];const kt=ge.valueToCode(q,"A",Ne)||"0";return q=ge.valueToCode(q,"B",Ne)||"0",tt?[kt+tt+q,Ne]:["Math.pow("+kt+", "+q+")",Ce.FUNCTION_CALL]},j=function(q,ge){const Ne=q.getFieldValue("OP");let tt;if(Ne==="NEG")return q=ge.valueToCode(q,"NUM",Ce.UNARY_NEGATION)||"0",q[0]==="-"&&(q=" "+q),["-"+q,Ce.UNARY_NEGATION];switch(q=Ne==="SIN"||Ne==="COS"||Ne==="TAN"?ge.valueToCode(q,"NUM",Ce.DIVISION)||"0":ge.valueToCode(q,"NUM",Ce.NONE)||"0",Ne){case"ABS":tt="Math.abs("+q+")";break;case"ROOT":tt="Math.sqrt("+q+")";break;case"LN":tt="Math.log("+q+")";break;case"EXP":tt="Math.exp("+q+")";break;case"POW10":tt="Math.pow(10,"+q+")";break;case"ROUND":tt="Math.round("+q+")";break;case"ROUNDUP":tt="Math.ceil("+q+")";break;case"ROUNDDOWN":tt="Math.floor("+q+")";break;case"SIN":tt="Math.sin("+q+" / 180 * Math.PI)";break;case"COS":tt="Math.cos("+q+" / 180 * Math.PI)";break;case"TAN":tt="Math.tan("+q+" / 180 * Math.PI)"}if(tt)return[tt,Ce.FUNCTION_CALL];switch(Ne){case"LOG10":tt="Math.log("+q+") / Math.log(10)";break;case"ASIN":tt="Math.asin("+q+") / Math.PI * 180";break;case"ACOS":tt="Math.acos("+q+") / Math.PI * 180";break;case"ATAN":tt="Math.atan("+q+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+Ne)}return[tt,Ce.DIVISION]},Z=function(q,ge){return{PI:["Math.PI",Ce.MEMBER],E:["Math.E",Ce.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",Ce.DIVISION],SQRT2:["Math.SQRT2",Ce.MEMBER],SQRT1_2:["Math.SQRT1_2",Ce.MEMBER],INFINITY:["Infinity",Ce.ATOMIC]}[q.getFieldValue("CONSTANT")]},ne=function(q,ge){var Ne={EVEN:[" % 2 === 0",Ce.MODULUS,Ce.EQUALITY],ODD:[" % 2 === 1",Ce.MODULUS,Ce.EQUALITY],WHOLE:[" % 1 === 0",Ce.MODULUS,Ce.EQUALITY],POSITIVE:[" > 0",Ce.RELATIONAL,Ce.RELATIONAL],NEGATIVE:[" < 0",Ce.RELATIONAL,Ce.RELATIONAL],DIVISIBLE_BY:[null,Ce.MODULUS,Ce.EQUALITY],PRIME:[null,Ce.NONE,Ce.FUNCTION_CALL]};const tt=q.getFieldValue("PROPERTY"),[kt,qt,_n]=Ne[tt];return Ne=ge.valueToCode(q,"NUMBER_TO_CHECK",qt)||"0",tt==="PRIME"?q=ge.provideFunction_("mathIsPrime",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+Ne+")":tt==="DIVISIBLE_BY"?(q=ge.valueToCode(q,"DIVISOR",Ce.MODULUS)||"0",q=Ne+" % "+q+" === 0"):q=Ne+kt,[q,_n]},ae=function(q,ge){const Ne=ge.valueToCode(q,"DELTA",Ce.ADDITION)||"0";return q=ge.getVariableName(q.getFieldValue("VAR")),q+" = (typeof "+q+" === 'number' ? "+q+" : 0) + "+Ne+`;
`},_e=function(q,ge){var Ne=q.getFieldValue("OP");switch(Ne){case"SUM":q=ge.valueToCode(q,"LIST",Ce.MEMBER)||"[]",q+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":q=ge.valueToCode(q,"LIST",Ce.NONE)||"[]",q="Math.min.apply(null, "+q+")";break;case"MAX":q=ge.valueToCode(q,"LIST",Ce.NONE)||"[]",q="Math.max.apply(null, "+q+")";break;case"AVERAGE":Ne=ge.provideFunction_("mathMean",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),q=ge.valueToCode(q,"LIST",Ce.NONE)||"[]",q=Ne+"("+q+")";break;case"MEDIAN":Ne=ge.provideFunction_("mathMedian",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),q=ge.valueToCode(q,"LIST",Ce.NONE)||"[]",q=Ne+"("+q+")";break;case"MODE":Ne=ge.provideFunction_("mathModes",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),q=ge.valueToCode(q,"LIST",Ce.NONE)||"[]",q=Ne+"("+q+")";break;case"STD_DEV":Ne=ge.provideFunction_("mathStandardDeviation",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),q=ge.valueToCode(q,"LIST",Ce.NONE)||"[]",q=Ne+"("+q+")";break;case"RANDOM":Ne=ge.provideFunction_("mathRandomList",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),q=ge.valueToCode(q,"LIST",Ce.NONE)||"[]",q=Ne+"("+q+")";break;default:throw Error("Unknown operator: "+Ne)}return[q,Ce.FUNCTION_CALL]},Le=function(q,ge){const Ne=ge.valueToCode(q,"DIVIDEND",Ce.MODULUS)||"0";return q=ge.valueToCode(q,"DIVISOR",Ce.MODULUS)||"0",[Ne+" % "+q,Ce.MODULUS]},we=function(q,ge){const Ne=ge.valueToCode(q,"VALUE",Ce.NONE)||"0",tt=ge.valueToCode(q,"LOW",Ce.NONE)||"0";return q=ge.valueToCode(q,"HIGH",Ce.NONE)||"Infinity",["Math.min(Math.max("+Ne+", "+tt+"), "+q+")",Ce.FUNCTION_CALL]},Xe=function(q,ge){const Ne=ge.valueToCode(q,"FROM",Ce.NONE)||"0";return q=ge.valueToCode(q,"TO",Ce.NONE)||"0",[ge.provideFunction_("mathRandomInt",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+Ne+", "+q+")",Ce.FUNCTION_CALL]},Re=function(q,ge){return["Math.random()",Ce.FUNCTION_CALL]},qe=function(q,ge){const Ne=ge.valueToCode(q,"X",Ce.NONE)||"0";return["Math.atan2("+(ge.valueToCode(q,"Y",Ce.NONE)||"0")+", "+Ne+") / Math.PI * 180",Ce.DIVISION]},Je=function(q,ge){const Ne=ge.getProcedureName(q.getFieldValue("NAME"));var tt="";ge.STATEMENT_PREFIX&&(tt+=ge.injectId(ge.STATEMENT_PREFIX,q)),ge.STATEMENT_SUFFIX&&(tt+=ge.injectId(ge.STATEMENT_SUFFIX,q)),tt&&(tt=ge.prefixLines(tt,ge.INDENT));let kt="";ge.INFINITE_LOOP_TRAP&&(kt=ge.prefixLines(ge.injectId(ge.INFINITE_LOOP_TRAP,q),ge.INDENT));const qt=ge.statementToCode(q,"STACK");let _n=ge.valueToCode(q,"RETURN",Ce.NONE)||"",Ie="";qt&&_n&&(Ie=tt),_n&&(_n=ge.INDENT+"return "+_n+`;
`);const lt=[],Et=q.getVars();for(let gt=0;gt<Et.length;gt++)lt[gt]=ge.getVariableName(Et[gt]);return tt="function "+Ne+"("+lt.join(", ")+`) {
`+tt+kt+qt+Ie+_n+"}",tt=ge.scrub_(q,tt),ge.definitions_["%"+Ne]=tt,null},ht=function(q,ge){const Ne=ge.getProcedureName(q.getFieldValue("NAME")),tt=[],kt=q.getVars();for(let qt=0;qt<kt.length;qt++)tt[qt]=ge.valueToCode(q,"ARG"+qt,Ce.NONE)||"null";return[Ne+"("+tt.join(", ")+")",Ce.FUNCTION_CALL]},it=function(q,ge){return ge.forBlock.procedures_callreturn(q,ge)[0]+`;
`},Oe=function(q,ge){let Ne="if ("+(ge.valueToCode(q,"CONDITION",Ce.NONE)||"false")+`) {
`;return ge.STATEMENT_SUFFIX&&(Ne+=ge.prefixLines(ge.injectId(ge.STATEMENT_SUFFIX,q),ge.INDENT)),q.hasReturnValue_?(q=ge.valueToCode(q,"VALUE",Ce.NONE)||"null",Ne+=ge.INDENT+"return "+q+`;
`):Ne+=ge.INDENT+`return;
`,Ne+`}
`},Ee=function(q,ge){return[ge.quote_(q.getFieldValue("TEXT")),Ce.ATOMIC]},Fe=function(q,ge){return q=ge.multiline_quote_(q.getFieldValue("TEXT")),ge=q.indexOf("+")!==-1?Ce.ADDITION:Ce.ATOMIC,[q,ge]},rt=function(q,ge){switch(q.itemCount_){case 0:return["''",Ce.ATOMIC];case 1:return q=ge.valueToCode(q,"ADD0",Ce.NONE)||"''",Ht(q);case 2:var Ne=ge.valueToCode(q,"ADD0",Ce.NONE)||"''";return q=ge.valueToCode(q,"ADD1",Ce.NONE)||"''",[Ht(Ne)[0]+" + "+Ht(q)[0],Ce.ADDITION];default:Ne=Array(q.itemCount_);for(let tt=0;tt<q.itemCount_;tt++)Ne[tt]=ge.valueToCode(q,"ADD"+tt,Ce.NONE)||"''";return["["+Ne.join(",")+"].join('')",Ce.FUNCTION_CALL]}},nt=function(q,ge){const Ne=ge.getVariableName(q.getFieldValue("VAR"));return q=ge.valueToCode(q,"TEXT",Ce.NONE)||"''",Ne+" += "+Ht(q)[0]+`;
`},dt=function(q,ge){return[(ge.valueToCode(q,"VALUE",Ce.MEMBER)||"''")+".length",Ce.MEMBER]},It=function(q,ge){return["!"+(ge.valueToCode(q,"VALUE",Ce.MEMBER)||"''")+".length",Ce.LOGICAL_NOT]},mt=function(q,ge){const Ne=q.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",tt=ge.valueToCode(q,"FIND",Ce.NONE)||"''";return ge=(ge.valueToCode(q,"VALUE",Ce.MEMBER)||"''")+"."+Ne+"("+tt+")",q.workspace.options.oneBasedIndex?[ge+" + 1",Ce.ADDITION]:[ge,Ce.FUNCTION_CALL]},wt=function(q,ge){const Ne=q.getFieldValue("WHERE")||"FROM_START",tt=ge.valueToCode(q,"VALUE",Ne==="RANDOM"?Ce.NONE:Ce.MEMBER)||"''";switch(Ne){case"FIRST":return[tt+".charAt(0)",Ce.FUNCTION_CALL];case"LAST":return[tt+".slice(-1)",Ce.FUNCTION_CALL];case"FROM_START":return q=ge.getAdjusted(q,"AT"),[tt+".charAt("+q+")",Ce.FUNCTION_CALL];case"FROM_END":return q=ge.getAdjusted(q,"AT",1,!0),[tt+".slice("+q+").charAt(0)",Ce.FUNCTION_CALL];case"RANDOM":return[ge.provideFunction_("textRandomLetter",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+tt+")",Ce.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},$t=function(q,ge){var Ne={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const tt=q.getFieldValue("WHERE1"),kt=q.getFieldValue("WHERE2");var qt=tt!=="FROM_END"&&tt!=="LAST"&&kt!=="FROM_END"&&kt!=="LAST",_n=ge.valueToCode(q,"STRING",qt?Ce.MEMBER:Ce.NONE)||"''";if(tt==="FIRST"&&kt==="LAST")return[_n,Ce.NONE];if(_n.match(/^'?\w+'?$/)||qt){switch(tt){case"FROM_START":Ne=ge.getAdjusted(q,"AT1");break;case"FROM_END":Ne=ge.getAdjusted(q,"AT1",1,!1,Ce.SUBTRACTION),Ne=_n+".length - "+Ne;break;case"FIRST":Ne="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(kt){case"FROM_START":ge=ge.getAdjusted(q,"AT2",1);break;case"FROM_END":ge=ge.getAdjusted(q,"AT2",0,!1,Ce.SUBTRACTION),ge=_n+".length - "+ge;break;case"LAST":ge=_n+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}_n=_n+".slice("+Ne+", "+ge+")"}else qt=ge.getAdjusted(q,"AT1"),q=ge.getAdjusted(q,"AT2"),_n=ge.provideFunction_("subsequence"+Ne[tt]+Ne[kt],`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(sequence${tt==="FROM_END"||tt==="FROM_START"?", at1":""}${kt==="FROM_END"||kt==="FROM_START"?", at2":""}) {
  var start = ${zt("sequence",tt,"at1")};
  var end = ${zt("sequence",kt,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+_n+(tt==="FROM_END"||tt==="FROM_START"?", "+qt:"")+(kt==="FROM_END"||kt==="FROM_START"?", "+q:"")+")";return[_n,Ce.FUNCTION_CALL]},pt=function(q,ge){const Ne={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[q.getFieldValue("CASE")];return q=ge.valueToCode(q,"TEXT",Ne?Ce.MEMBER:Ce.NONE)||"''",[Ne?q+Ne:ge.provideFunction_("textToTitleCase",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+q+")",Ce.FUNCTION_CALL]},Te=function(q,ge){const Ne={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[q.getFieldValue("MODE")];return[(ge.valueToCode(q,"TEXT",Ce.MEMBER)||"''")+Ne,Ce.FUNCTION_CALL]},te=function(q,ge){return"window.alert("+(ge.valueToCode(q,"TEXT",Ce.NONE)||"''")+`);
`},ke=function(q,ge){return ge="window.prompt("+(q.getField("TEXT")?ge.quote_(q.getFieldValue("TEXT")):ge.valueToCode(q,"TEXT",Ce.NONE)||"''")+")",q.getFieldValue("TYPE")==="NUMBER"&&(ge="Number("+ge+")"),[ge,Ce.FUNCTION_CALL]},ot=function(q,ge){const Ne=ge.valueToCode(q,"TEXT",Ce.NONE)||"''";return q=ge.valueToCode(q,"SUB",Ce.NONE)||"''",[ge.provideFunction_("textCount",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+Ne+", "+q+")",Ce.FUNCTION_CALL]},ft=function(q,ge){const Ne=ge.valueToCode(q,"TEXT",Ce.NONE)||"''",tt=ge.valueToCode(q,"FROM",Ce.NONE)||"''";return q=ge.valueToCode(q,"TO",Ce.NONE)||"''",[ge.provideFunction_("textReplace",`
function ${ge.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+Ne+", "+tt+", "+q+")",Ce.FUNCTION_CALL]},xt=function(q,ge){return[(ge.valueToCode(q,"TEXT",Ce.MEMBER)||"''")+".split('').reverse().join('')",Ce.FUNCTION_CALL]},at=function(q,ge){return[ge.getVariableName(q.getFieldValue("VAR")),Ce.ATOMIC]},Ge=function(q,ge){const Ne=ge.valueToCode(q,"VALUE",Ce.ASSIGNMENT)||"0";return ge.getVariableName(q.getFieldValue("VAR"))+" = "+Ne+`;
`},Ce;(function(q){q[q.ATOMIC=0]="ATOMIC",q[q.NEW=1.1]="NEW",q[q.MEMBER=1.2]="MEMBER",q[q.FUNCTION_CALL=2]="FUNCTION_CALL",q[q.INCREMENT=3]="INCREMENT",q[q.DECREMENT=3]="DECREMENT",q[q.BITWISE_NOT=4.1]="BITWISE_NOT",q[q.UNARY_PLUS=4.2]="UNARY_PLUS",q[q.UNARY_NEGATION=4.3]="UNARY_NEGATION",q[q.LOGICAL_NOT=4.4]="LOGICAL_NOT",q[q.TYPEOF=4.5]="TYPEOF",q[q.VOID=4.6]="VOID",q[q.DELETE=4.7]="DELETE",q[q.AWAIT=4.8]="AWAIT",q[q.EXPONENTIATION=5]="EXPONENTIATION",q[q.MULTIPLICATION=5.1]="MULTIPLICATION",q[q.DIVISION=5.2]="DIVISION",q[q.MODULUS=5.3]="MODULUS",q[q.SUBTRACTION=6.1]="SUBTRACTION",q[q.ADDITION=6.2]="ADDITION",q[q.BITWISE_SHIFT=7]="BITWISE_SHIFT",q[q.RELATIONAL=8]="RELATIONAL",q[q.IN=8]="IN",q[q.INSTANCEOF=8]="INSTANCEOF",q[q.EQUALITY=9]="EQUALITY",q[q.BITWISE_AND=10]="BITWISE_AND",q[q.BITWISE_XOR=11]="BITWISE_XOR",q[q.BITWISE_OR=12]="BITWISE_OR",q[q.LOGICAL_AND=13]="LOGICAL_AND",q[q.LOGICAL_OR=14]="LOGICAL_OR",q[q.CONDITIONAL=15]="CONDITIONAL",q[q.ASSIGNMENT=16]="ASSIGNMENT",q[q.YIELD=17]="YIELD",q[q.COMMA=18]="COMMA",q[q.NONE=99]="NONE"})(Ce||(Ce={}));var X=class extends i.CodeGenerator$$module$build$src$core$generator{constructor(q="JavaScript"){super(q),this.ORDER_OVERRIDES=[[Ce.FUNCTION_CALL,Ce.MEMBER],[Ce.FUNCTION_CALL,Ce.FUNCTION_CALL],[Ce.MEMBER,Ce.MEMBER],[Ce.MEMBER,Ce.FUNCTION_CALL],[Ce.LOGICAL_NOT,Ce.LOGICAL_NOT],[Ce.MULTIPLICATION,Ce.MULTIPLICATION],[Ce.ADDITION,Ce.ADDITION],[Ce.LOGICAL_AND,Ce.LOGICAL_AND],[Ce.LOGICAL_OR,Ce.LOGICAL_OR]],this.isInitialized=!1;for(const ge in Ce)q=Ce[ge],typeof q!="string"&&(this["ORDER_"+ge]=q);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(q){super.init(q),this.nameDB_?this.nameDB_.reset():this.nameDB_=new i.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(q.getVariableMap()),this.nameDB_.populateVariables(q),this.nameDB_.populateProcedures(q);const ge=[];var Ne=i.allDeveloperVariables$$module$build$src$core$variables(q);for(let tt=0;tt<Ne.length;tt++)ge.push(this.nameDB_.getName(Ne[tt],i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(q=i.allUsedVarModels$$module$build$src$core$variables(q),Ne=0;Ne<q.length;Ne++)ge.push(this.nameDB_.getName(q[Ne].getId(),i.NameType$$module$build$src$core$names.VARIABLE));ge.length&&(this.definitions_.variables="var "+ge.join(", ")+";"),this.isInitialized=!0}finish(q){const ge=Object.values(this.definitions_);return super.finish(q),this.isInitialized=!1,this.nameDB_.reset(),ge.join(`

`)+`


`+q}scrubNakedValue(q){return q+`;
`}quote_(q){return q=q.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+q+"'"}multiline_quote_(q){return q.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(q,ge,Ne=!1){let tt="";if(!q.outputConnection||!q.outputConnection.targetConnection){var kt=q.getCommentText();kt&&(kt=i.wrap$$module$build$src$core$utils$string(kt,this.COMMENT_WRAP-3),tt+=this.prefixLines(kt+`
`,"// "));for(let qt=0;qt<q.inputList.length;qt++)q.inputList[qt].type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(kt=q.inputList[qt].connection.targetBlock())&&(kt=this.allNestedComments(kt))&&(tt+=this.prefixLines(kt,"// "))}return q=q.nextConnection&&q.nextConnection.targetBlock(),Ne=Ne?"":this.blockToCode(q),tt+ge+Ne}getAdjusted(q,ge,Ne=0,tt=!1,kt=Ce.NONE){q.workspace.options.oneBasedIndex&&Ne--;const qt=q.workspace.options.oneBasedIndex?"1":"0";let _n=kt;return 0<Ne?_n=Ce.ADDITION:0>Ne?_n=Ce.SUBTRACTION:tt&&(_n=Ce.UNARY_NEGATION),q=this.valueToCode(q,ge,_n)||qt,Ne===0&&!tt?q:i.isNumber$$module$build$src$core$utils$string(q)?(q=String(Number(q)+Ne),tt&&(q=String(-Number(q))),q):(0<Ne?q=`${q} + ${Ne}`:0>Ne&&(q=`${q} - ${-Ne}`),tt&&(q=Ne?`-(${q})`:`-${q}`),Math.floor(kt)>=Math.floor(_n)&&(q=`(${q})`),q)}},Q={};Q.colour_blend=u,Q.colour_picker=s,Q.colour_random=o,Q.colour_rgb=l;var le=function(q,ge,Ne){return ge==="FIRST"?"0":ge==="FROM_END"?q+".length - 1 - "+Ne:ge==="LAST"?q+".length - 1":Ne},$e={};$e.lists_create_empty=h,$e.lists_create_with=d,$e.lists_getIndex=x,$e.lists_getSublist=A,$e.lists_indexOf=S,$e.lists_isEmpty=v,$e.lists_length=_,$e.lists_repeat=m,$e.lists_reverse=D,$e.lists_setIndex=w,$e.lists_sort=k,$e.lists_split=O;var We={};We.controls_if=L,We.controls_ifelse=L,We.logic_boolean=P,We.logic_compare=z,We.logic_negate=U,We.logic_null=K,We.logic_operation=H,We.logic_ternary=ee;var Ft={};Ft.controls_flow_statements=ce,Ft.controls_for=de,Ft.controls_forEach=oe,Ft.controls_repeat=re,Ft.controls_repeat_ext=re,Ft.controls_whileUntil=ie;var Be={};Be.math_arithmetic=Ae,Be.math_atan2=qe,Be.math_change=ae,Be.math_constant=Z,Be.math_constrain=we,Be.math_modulo=Le,Be.math_number=me,Be.math_number_property=ne,Be.math_on_list=_e,Be.math_random_float=Re,Be.math_random_int=Xe,Be.math_round=j,Be.math_single=j,Be.math_trig=j;var Ut={};Ut.procedures_callnoreturn=it,Ut.procedures_callreturn=ht,Ut.procedures_defnoreturn=Je,Ut.procedures_defreturn=Je,Ut.procedures_ifreturn=Oe;var ut=/^\s*'([^']|\\')*'\s*$/,Ht=function(q){return ut.test(q)?[q,Ce.ATOMIC]:["String("+q+")",Ce.FUNCTION_CALL]},zt=function(q,ge,Ne){return ge==="FIRST"?"0":ge==="FROM_END"?q+".length - 1 - "+Ne:ge==="LAST"?q+".length - 1":Ne},En={};En.text=Ee,En.text_append=nt,En.text_changeCase=pt,En.text_charAt=wt,En.text_count=ot,En.text_getSubstring=$t,En.text_indexOf=mt,En.text_isEmpty=It,En.text_join=rt,En.text_length=dt,En.text_multiline=Fe,En.text_print=te,En.text_prompt=ke,En.text_prompt_ext=ke,En.text_replace=ft,En.text_reverse=xt,En.text_trim=Te;var Pr={};Pr.variables_get=at,Pr.variables_set=Ge;var Er={};Er.variables_get_dynamic=at,Er.variables_set_dynamic=Ge;var Kr=new X,or=Object.assign({},Q,$e,We,Ft,Be,Ut,En,Pr,Er);for(const q in or)Kr.forBlock[q]=or[q];var Wn={};return Wn.JavascriptGenerator=X,Wn.Order=Ce,Wn.javascriptGenerator=Kr,Wn.__namespace__=i,Wn})}(Uk)),Uk.exports}(function(n,e){(function(t,i){n.exports=i(fB(),CJ())})(Wu,function(t,i){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return i})})(VW);var DT=VW.exports,tU;function MJ(){return tU||(tU=1,function(n,e){(function(t,i){n.exports=i(fB(),$J(),wJ(),DT)})(Wu,function(t,i,s,o){return t.setLocale(i),t})}(Ok)),Ok.exports}(function(n,e){(function(t,i){n.exports=i(MJ())})(Wu,function(t){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})})(WW);var mm=WW.exports,St=fB();const AJ={colour:"#D92626"},IJ={colour:"#7F7F7F"},RJ={colour:"#8C564B"},kJ={colour:"#212121"},OJ={colour:"#CC6633"},LJ={colour:"#25B14B"},DJ={colour:"#33CCB3"},NJ={colour:"#3366CC"},BJ={colour:"#7F33CC"},PJ={colour:"#CC3399"},Rt={logic_category:AJ,loop_category:IJ,math_category:RJ,procedure_category:kJ,movement_category:OJ,light_category:LJ,speech_category:DJ,face_category:NJ,audio_category:BJ,misc_category:PJ};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ap extends St.FieldNumber{constructor(e,t,i,s,o,l,u,h){super(e,t,i,s,u,h),this.boundEvents=[],this.sliderInput=null,this.leftLabel=o,this.rightLabel=l}setLeftLabel(e){this.leftLabel=e}setRightLabel(e){this.rightLabel=e}setLabels(e,t){this.leftLabel=e,this.rightLabel=t}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,void 0,void 0,e)}showEditor_(e,t){super.showEditor_(e,!0);const i=this.dropdownCreate_();St.DropDownDiv.getContentDiv().appendChild(i);const s=this.getSourceBlock();if(s instanceof St.BlockSvg){const o=s.getColour()||"",l=s.getColourTertiary()||"";St.DropDownDiv.setColour(o,l)}St.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),t||i.firstChild.focus({preventScroll:!0})}render_(){super.render_(),this.updateSlider_()}static createLabelInContainer(e,t){const i=document.createElement("div"),s=document.createElement("span"),o=document.createElement("span");return i.classList.add("mathNumSliderLabel"),s.textContent=e,i.appendChild(s),i.appendChild(o),t.appendChild(i),o}dropdownCreate_(){const e=document.createElement("div");e.className="mathNumSliderContainer",this.leftLabel&&ap.createLabelInContainer(this.leftLabel,e);const t=document.createElement("input");return t.setAttribute("type","range"),t.setAttribute("min",`${this.min_}`),t.setAttribute("max",`${this.max_}`),t.setAttribute("step",`${this.precision_}`),t.setAttribute("value",`${this.getValue()}`),t.setAttribute("tabindex","0"),t.className="mathNumSlider",e.appendChild(t),this.rightLabel&&ap.createLabelInContainer(this.rightLabel,e),this.sliderInput=t,this.boundEvents.push(St.browserEvents.conditionalBind(t,"input",this,this.onSliderChange_)),e}dropdownDispose_(){for(const e of this.boundEvents)St.browserEvents.unbind(e);this.boundEvents.length=0,this.sliderInput=null}onSliderChange_(){var t;const e=this.value_;this.setEditorValue_((t=this.sliderInput)==null?void 0:t.value,!1),this.getSourceBlock()&&St.Events.fire(new(St.Events.get(St.Events.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_)),this.resizeEditor_()}updateSlider_(){this.sliderInput&&this.sliderInput.setAttribute("value",`${this.getValue()}`)}}St.fieldRegistry.register("math_num_slider",ap);St.Css.register(`
.mathNumSliderContainer {
  align-items: center;
  display: flex;
  height: 32px;
  justify-content: center;
  width: 150px;
}
.mathNumSliderLabel {
    color: white;
}
.mathNumSlider {
  -webkit-appearance: none;
  background: transparent; /* override white in chrome */
  margin: 4px;
  padding: 0;
  width: 100%;
}
.mathNumSlider:focus {
  outline: none;
}
/* Webkit */
.mathNumSlider::-webkit-slider-runnable-track {
  background: #ddd;
  border-radius: 5px;
  height: 10px;
}
.mathNumSlider::-webkit-slider-thumb {
  -webkit-appearance: none;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  margin-top: -7px;
  width: 24px;
}
/* Firefox */
.mathNumSlider::-moz-range-track {
  background: #ddd;
  border-radius: 5px;
  height: 10px;
}
.mathNumSlider::-moz-range-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  width: 24px;
}
.mathNumSlider::-moz-focus-outer {
  /* override the focus border style */
  border: 0;
}
/* IE */
.mathNumSlider::-ms-track {
  /* IE wont let the thumb overflow the track, so fake it */
  background: transparent;
  border-color: transparent;
  border-width: 15px 0;
  /* remove default tick marks */
  color: transparent;
  height: 10px;
  width: 100%;
  margin: -4px 0;
}
.mathNumSlider::-ms-fill-lower  {
  background: #ddd;
  border-radius: 5px;
}
.mathNumSlider::-ms-fill-upper  {
  background: #ddd;
  border-radius: 5px;
}
.mathNumSlider::-ms-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  width: 24px;
}
`);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FJ={type:"add_text",message0:"Add text %1 with color %2",args0:[{type:"input_value",name:"TEXT",check:"String"},{type:"input_value",name:"COLOR",check:"Colour"}],previousStatement:null,nextStatement:null,colour:160,tooltip:"",helpUrl:""};St.Blocks.ChangeLED={init:function(){this.setColour(Rt.light_category.colour),this.appendValueInput("FIELD_ChangeLED").setCheck("Colour").appendField("Change the LED color to"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setOutput(!1),this.setTooltip("Changes Misty's LED to a specified color")}};St.Blocks.TransitionLED={init:function(){this.setColour(Rt.light_category.colour),this.appendValueInput("COLOR1").setCheck("Colour").appendField("Transition LED from"),this.appendValueInput("COLOR2").setCheck("Colour").appendField("to"),this.appendDummyInput().appendField("using the").appendField(new St.FieldDropdown([["Breathe","BREATHE"],["Blink","BLINK"],["Transition Once","TRANSITION_ONCE"]]),"TRANSITION_TYPE").appendField("transition"),this.appendDummyInput().appendField("for a duration of").appendField(new St.FieldNumber(1,0,60,1),"FIELD_TransitionTime_TimeMs").appendField("secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Transition LED between two colors with the specified transition type and time.")}};St.Blocks.DisplayImage={init:function(){this.setColour(Rt.face_category.colour),this.appendValueInput("FIELD_DisplayImage_Filename").setCheck("Face").appendField("Change face expression to: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Displays an image on Misty's screen, Alpha specifies transparency (0 is completely transparent, 1 is completely opaque) ***WARNING: MUST connect with ListFilesAvailable to select the image file to display***")}};St.Blocks.DisplayAnimation={init:function(){this.setColour(Rt.misc_category.colour),this.appendValueInput("FIELD_DisplayAnimation_Filename").setCheck("Animation").appendField("Show this animation on Misty: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Runs a specified animation on Misty")}};St.Blocks.MoveHead={init:function(){this.setColour(Rt.movement_category.colour),this.appendDummyInput().appendField("Move head").appendField(new St.FieldDropdown([["Up","U"],["Down","D"]]),"FIELD_MoveHead_Pitch"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head Up or Down")}};St.Blocks.MoveArm={init:function(){this.setColour(Rt.movement_category.colour),this.appendDummyInput().appendField("Move ").appendField(new St.FieldDropdown([["Right","Right"],["Left","Left"]]),"FIELD_MoveArm_Arm").appendField("arm to position").appendField(new ap(45,-29,90,1,"Up","Down"),"FIELD_MoveArm_Position").appendField("at a speed of (0 to 100)").appendField(new ap(50,0,100,1,"Slow","Fast"),"FIELD_MoveArm_Velocity"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves one of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)")}};St.Blocks.MoveArm2={init:function(){this.setColour(Rt.movement_category.colour),this.appendDummyInput().appendField("Move both arms to position").appendField(new ap(45,-29,90,1,"Up","Down"),"FIELD_MoveArm2_Position").appendField("at a speed of (0 to 100)").appendField(new ap(50,0,100,1,"Slow","Fast"),"FIELD_MoveArm2_Velocity"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)")}};St.Blocks.BasicSlider={init:function(){this.setColour(Rt.math_category.colour),this.appendDummyInput().appendField("Slider Value: ").appendField(new ap(0,0,100,1,"Min","Max"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};St.Blocks.ArmPositionSlider={init:function(){this.setColour(Rt.math_category.colour),this.appendDummyInput().appendField(new ap(45,-29,90,1,"Up","Down"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};St.Blocks.SpeedSlider={init:function(){this.setColour(Rt.math_category.colour),this.appendDummyInput().appendField(new ap(1,1,100,1,"Slow","Fast"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};St.Blocks.TimeSlider={init:function(){this.setColour(Rt.math_category.colour),this.appendDummyInput().appendField(new ap(1,1,60,1,"Short","Long"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};St.Blocks.HeadPitchSlider={init:function(){this.setColour(Rt.math_category.colour),this.appendDummyInput().appendField(new ap(0,-40,25,1,"Up","Down"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};St.Blocks.HeadRollSlider={init:function(){this.setColour(Rt.math_category.colour),this.appendDummyInput().appendField(new ap(0,-40,40,1,"Right","Left"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};St.Blocks.HeadYawSlider={init:function(){this.setColour(Rt.math_category.colour),this.appendDummyInput().appendField(new ap(0,-81,81,1,"Right","Left"),"FIELD_slider_value"),this.setInputsInline(!1),this.setOutput(!0,null)}};St.Blocks.MoveArms2={init:function(){var n=this.workspace.newBlock("ArmPositionSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("SpeedSlider");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("ArmPositionSlider");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection,l=this.workspace.newBlock("SpeedSlider");l.setShadow(!0),l.initSvg(),l.render();var u=l.outputConnection;this.setColour(Rt.movement_category.colour),this.appendValueInput("FIELD_MoveArm_LeftPosition").setCheck("Number").appendField("Left Arm Position");var h=this.getInput("FIELD_MoveArm_LeftPosition").connection;h.connect(e),this.appendValueInput("FIELD_MoveArm_LeftVelocity").setCheck("Number").appendField("Left Arm Speed");var m=this.getInput("FIELD_MoveArm_LeftVelocity").connection;m.connect(i),this.appendValueInput("FIELD_MoveArm_RightPosition").setCheck("Number").appendField("Right Arm Position");var d=this.getInput("FIELD_MoveArm_RightPosition").connection;d.connect(o),this.appendValueInput("FIELD_MoveArm_RightVelocity").setCheck("Number").appendField("Right Arm Speed");var m=this.getInput("FIELD_MoveArm_RightVelocity").connection;m.connect(u),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed")}};St.Blocks.MoveArm3={init:function(){var n=this.workspace.newBlock("ArmPositionSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("SpeedSlider");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection;this.appendDummyInput().appendField("Move Arm: ").appendField(new St.FieldDropdown([["Right","Right"],["Left","Left"]]),"FIELD_MoveArm_Arm"),this.setColour(Rt.movement_category.colour),this.appendValueInput("FIELD_MoveArm_Position").setCheck("Number").appendField("Left Arm Position");var s=this.getInput("FIELD_MoveArm_Position").connection;s.connect(e),this.appendValueInput("FIELD_MoveArm_Velocity").setCheck("Number").appendField("Left Arm Speed");var o=this.getInput("FIELD_MoveArm_Velocity").connection;o.connect(i),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed")}};St.Blocks.DriveTime={init:function(){this.setColour(Rt.movement_category.colour),this.appendDummyInput().appendField("Move ").appendField(new St.FieldDropdown([["Forward","F"],["Backward","B"]]),"FIELD_DriveTime_Direction").appendField("at a speed of (0 to 100)").appendField(new St.FieldNumber(25,0,100,1),"FIELD_DriveTime_Velocity").appendField("for a duration of").appendField(new St.FieldNumber(1,0,60,1),"FIELD_DriveTime_TimeMs").appendField("secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty straight in a specified direction at a specified speed for a specified amount of time (1000ms = 1 second)")}};St.Blocks.MoveHead3={init:function(){var n=this.workspace.newBlock("HeadPitchSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("HeadRollSlider");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("HeadYawSlider");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection,l=this.workspace.newBlock("TimeSlider");l.setShadow(!0),l.initSvg(),l.render();var u=l.outputConnection;this.setColour(Rt.movement_category.colour),this.appendDummyInput("FIELD_TEXT_IGNORE").appendField("Move head"),this.appendValueInput("FIELD_MoveHead_Pitch").setCheck("Number").appendField("Look Up/Down:");var h=this.getInput("FIELD_MoveHead_Pitch").connection;h.connect(e),this.appendValueInput("FIELD_MoveHead_Roll").setCheck("Number").appendField("Tilt Left/Right:");var d=this.getInput("FIELD_MoveHead_Roll").connection;d.connect(i),this.appendValueInput("FIELD_MoveHead_Yaw").setCheck("Number").appendField("Look Right/Left:");var m=this.getInput("FIELD_MoveHead_Yaw").connection;m.connect(o),this.appendValueInput("FIELD_MoveHead_Time").setCheck("Number").appendField("Time (seconds):");var _=this.getInput("FIELD_MoveHead_Time").connection;_.connect(u),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head a specified amount of degrees with roll, pitch, and/or yaw")}};St.Blocks.DriveTime2={init:function(){var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("math_number");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("math_number");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection;this.setColour(Rt.movement_category.colour),this.appendValueInput("FIELD_DriveTime_Velocity").setCheck("Number").appendField("Move at a speed of (-100 to 100)");var l=this.getInput("FIELD_DriveTime_Velocity").connection;l.connect(e),this.appendValueInput("FIELD_DriveTime_Angular").setCheck("Number").appendField("with angular velocity of (-100 CW to 100 CCW)");var u=this.getInput("FIELD_DriveTime_Angular").connection;u.connect(i),this.appendValueInput("FIELD_DriveTime_TimeMs").setCheck("Number").appendField("for a duration of secs");var h=this.getInput("FIELD_DriveTime_TimeMs").connection;h.connect(o),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty forward (positive speed) or backward (negative speed) with possible turning using angular velocity (0 for straight) for the specified duration (1000 ms = 1 second)")}};St.Blocks.Turn={init:function(){this.setColour(Rt.movement_category.colour),this.appendDummyInput().appendField("Turn").appendField(new St.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction").appendField("for time of").appendField(new St.FieldNumber(4500),"FIELD_Turn_Duration").appendField("milliseconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)")}};St.Blocks.Turn2={init:function(){var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.setColour(Rt.movement_category.colour),this.appendDummyInput().appendField("Turn").appendField(new St.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction"),this.appendValueInput("FIELD_Turn_Duration").setCheck("Number").appendField("for time of");var t=this.getInput("FIELD_Turn_Duration").connection;t.connect(e),this.appendDummyInput().appendField("milliseconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)")}};St.Blocks.Speak={init:function(){this.setColour(Rt.speech_category.colour),this.appendValueInput("FIELD_Speak_Text").setCheck("String").appendField("Speak: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given input text")}};St.Blocks.SpeakDefault={init:function(){this.setColour(Rt.speech_category.colour),this.appendDummyInput().appendField("Speak: ").appendField(new St.FieldDropdown([["Hi","Hi"],["Hello","Hello"],["How are you today?","How are you today?"],["Goodbye","Goodbye"]]),"FIELD_SpeakDefault_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given selected default text")}};St.Blocks.TurnOnFlashlight={init:function(){this.setColour(Rt.light_category.colour),this.appendDummyInput().appendField("Turn on flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn on flashlight")}};St.Blocks.TurnOffFlashlight={init:function(){this.setColour(Rt.light_category.colour),this.appendDummyInput().appendField("Turn off flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn off flashlight")}};St.Blocks.WaitForSeconds={init:function(){this.appendDummyInput().appendField("wait for"),this.appendDummyInput().setAlign(St.ALIGN_CENTRE).appendField(new St.FieldNumber(0,-1/0,1/0,.1),"NumSeconds"),this.appendDummyInput().appendField("Seconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(Rt.misc_category.colour),this.setTooltip("Delay the execution of the next block by some number of seconds")}};St.Blocks.PlayAudio={init:function(){this.setColour(Rt.audio_category.colour),this.appendValueInput("FIELD_PlayAudio_Filename").setCheck("Audio").appendField("Play audio: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};St.Blocks.SetVolume={init:function(){this.setColour(Rt.audio_category.colour);var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.appendValueInput("FIELD_Volume").setCheck("Number").appendField("Set volume to (0-100): ");var t=this.getInput("FIELD_Volume").connection;t.connect(e),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Adjusts Misty's volume level for audio playback")}};St.Blocks.DisplayText={init:function(){this.setColour(Rt.misc_category.colour),this.appendDummyInput().appendField("Display Text: ").appendField(new St.FieldTextInput("default"),"FIELD_DisplayText_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};St.Blocks.ClearText={init:function(){this.setColour(Rt.misc_category.colour),this.appendDummyInput().appendField("Clear Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};St.Blocks.eyes_acceptance={init:function(){this.appendDummyInput().appendField("Expression: acceptance"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'acceptance'")}};St.Blocks.eyes_admiration={init:function(){this.appendDummyInput().appendField("Expression: admiration"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'admiration'")}};St.Blocks.eyes_amazement={init:function(){this.appendDummyInput().appendField("Expression: amazement"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'amazement'")}};St.Blocks.eyes_anger={init:function(){this.appendDummyInput().appendField("Expression: anger"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'anger'")}};St.Blocks.eyes_annoyed={init:function(){this.appendDummyInput().appendField("Expression: annoyed"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'annoyed'")}};St.Blocks.eyes_anticipation={init:function(){this.appendDummyInput().appendField("Expression: anticipation"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'anticipation'")}};St.Blocks.eyes_apprehension={init:function(){this.appendDummyInput().appendField("Expression: apprehension"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'apprehension'")}};St.Blocks.eyes_boredom={init:function(){this.appendDummyInput().appendField("Expression: boredom"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'boredom'")}};St.Blocks.eyes_default={init:function(){this.appendDummyInput().appendField("Expression: default"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'default'")}};St.Blocks.eyes_disgust={init:function(){this.appendDummyInput().appendField("Expression: disgust"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'disgust'")}};St.Blocks.eyes_distraction={init:function(){this.appendDummyInput().appendField("Expression: distraction"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'distraction'")}};St.Blocks.eyes_ecstasy_frame_1={init:function(){this.appendDummyInput().appendField("Expression: ecstasy 1"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstasy 1'")}};St.Blocks.eyes_ecstasy_frame_2={init:function(){this.appendDummyInput().appendField("Expression: ecstasy 2"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstasy 2'")}};St.Blocks.eyes_fear={init:function(){this.appendDummyInput().appendField("Expression: fear"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'fear'")}};St.Blocks.eyes_grief={init:function(){this.appendDummyInput().appendField("Expression: grief"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'grief'")}};St.Blocks.eyes_interest={init:function(){this.appendDummyInput().appendField("Expression: interest"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'interest'")}};St.Blocks.eyes_joy={init:function(){this.appendDummyInput().appendField("Expression: joy"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'joy'")}};St.Blocks.eyes_loathing={init:function(){this.appendDummyInput().appendField("Expression: loathing"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'loathing'")}};St.Blocks.eyes_pensiveness={init:function(){this.appendDummyInput().appendField("Expression: pensiveness"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'pensiveness'")}};St.Blocks.eyes_rage={init:function(){this.appendDummyInput().appendField("Expression: rage eyes"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'rage eyes'")}};St.Blocks.eyes_sad={init:function(){this.appendDummyInput().appendField("Expression: sad"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'sad'")}};St.Blocks.eyes_serenity={init:function(){this.appendDummyInput().appendField("Expression: serenity"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'serenity'")}};St.Blocks.eyes_surprise={init:function(){this.appendDummyInput().appendField("Expression: surprise"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'surprise'")}};St.Blocks.eyes_terror={init:function(){this.appendDummyInput().appendField("Expression: terror"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'terror'")}};St.Blocks.eyes_trust={init:function(){this.appendDummyInput().appendField("Expression: trust"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'trust'")}};St.Blocks.eyes_vigilance={init:function(){this.appendDummyInput().appendField("Expression: vigilance"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'vigilance'")}};St.Blocks.e_Sleeping={init:function(){this.appendDummyInput().appendField("Expression: sleeping"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'sleeping'")}};St.Blocks.e_SleepingZZZ={init:function(){this.appendDummyInput().appendField("Expression: sleeping ZZZ"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'sleeping ZZZ'")}};St.Blocks.e_Contempt={init:function(){this.appendDummyInput().appendField("Expression: contempt"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'contempt'")}};St.Blocks.e_ContentLeft={init:function(){this.appendDummyInput().appendField("Expression: content (left)"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'content (left)'")}};St.Blocks.e_ContentRight={init:function(){this.appendDummyInput().appendField("Expression: content (right)"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'content (right)'")}};St.Blocks.e_Disoriented={init:function(){this.appendDummyInput().appendField("Expression: disoriented"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'disoriented'")}};St.Blocks.e_EcstacyHilarious={init:function(){this.appendDummyInput().appendField("Expression: ecstacy hilarious"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstacy hilarious'")}};St.Blocks.e_EcstacyStarryEyed={init:function(){this.appendDummyInput().appendField("Expression: ecstacy starry eyed"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstacy starry eyed'")}};St.Blocks.e_JoyGoofy={init:function(){this.appendDummyInput().appendField("Expression: joy goofy"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy'")}};St.Blocks.e_JoyGoofy2={init:function(){this.appendDummyInput().appendField("Expression: joy goofy 2"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy 2'")}};St.Blocks.e_JoyGoofy3={init:function(){this.appendDummyInput().appendField("Expression: joy goofy 3"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy 3'")}};St.Blocks.e_Love={init:function(){this.appendDummyInput().appendField("Expression: love"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'love'")}};St.Blocks.e_Rage={init:function(){this.appendDummyInput().appendField("Expression: rage"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'rage'")}};St.Blocks.e_Rage2={init:function(){this.appendDummyInput().appendField("Expression: rage 2"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'rage 2'")}};St.Blocks.e_Rage3={init:function(){this.appendDummyInput().appendField("Expression: rage 3"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'rage 3'")}};St.Blocks.e_Rage4={init:function(){this.appendDummyInput().appendField("Expression: rage 4"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'rage 4'")}};St.Blocks.e_RemorseShame={init:function(){this.appendDummyInput().appendField("Expression: remorse shame"),this.setOutput(!0,"Face"),this.setColour(Rt.face_category.colour),this.setTooltip("Represents the facial expression 'remorse shame'")}};St.Blocks["animation_sleepy.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Sleeping"),this.setOutput(!0,"Animation"),this.setColour(Rt.face_category.colour),this.setTooltip("Run the animation 'sleepy'")}};St.Blocks["animation_dancing.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Dancing"),this.setOutput(!0,"Animation"),this.setColour(Rt.face_category.colour),this.setTooltip("Run the animation 'dancing'")}};St.Blocks["animation_spooked.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Spooked"),this.setOutput(!0,"Animation"),this.setColour(Rt.face_category.colour),this.setTooltip("Run the animation 'spooked'")}};St.Blocks.s_Acceptance={init:function(){this.appendDummyInput().appendField("Sound: acceptance"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'acceptance'")}};St.Blocks.s_Amazement={init:function(){this.appendDummyInput().appendField("Sound: amazement"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'amazement'")}};St.Blocks.s_Amazement2={init:function(){this.appendDummyInput().appendField("Sound: amazement 2"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'amazement 2'")}};St.Blocks.s_Anger={init:function(){this.appendDummyInput().appendField("Sound: anger"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'anger'")}};St.Blocks.s_Anger2={init:function(){this.appendDummyInput().appendField("Sound: anger 2"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'anger 2'")}};St.Blocks.s_Anger3={init:function(){this.appendDummyInput().appendField("Sound: anger 3"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'anger 3'")}};St.Blocks.s_Anger4={init:function(){this.appendDummyInput().appendField("Sound: anger 4"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'anger 4'")}};St.Blocks.s_Annoyance={init:function(){this.appendDummyInput().appendField("Sound: annoyance"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance'")}};St.Blocks.s_Annoyance2={init:function(){this.appendDummyInput().appendField("Sound: annoyance 2"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 2'")}};St.Blocks.s_Annoyance3={init:function(){this.appendDummyInput().appendField("Sound: annoyance 3"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 3'")}};St.Blocks.s_Annoyance4={init:function(){this.appendDummyInput().appendField("Sound: annoyance 4"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 4'")}};St.Blocks.s_Awe={init:function(){this.appendDummyInput().appendField("Sound: awe"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'awe'")}};St.Blocks.s_Awe2={init:function(){this.appendDummyInput().appendField("Sound: awe 2"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'awe 2'")}};St.Blocks.s_Awe3={init:function(){this.appendDummyInput().appendField("Sound: awe 3"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'awe 3'")}};St.Blocks.s_Boredom={init:function(){this.appendDummyInput().appendField("Sound: boredom"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'boredom'")}};St.Blocks.s_Disapproval={init:function(){this.appendDummyInput().appendField("Sound: disapproval"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'disapproval'")}};St.Blocks.s_Disgust={init:function(){this.appendDummyInput().appendField("Sound: disgust"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'disgust'")}};St.Blocks.s_Disgust2={init:function(){this.appendDummyInput().appendField("Sound: disgust 2"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'disgust 2'")}};St.Blocks.s_Disgust3={init:function(){this.appendDummyInput().appendField("Sound: disgust 3"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'disgust 3'")}};St.Blocks.s_DisorientedConfused={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused'")}};St.Blocks.s_DisorientedConfused2={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 2"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 2'")}};St.Blocks.s_DisorientedConfused3={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 3"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 3'")}};St.Blocks.s_DisorientedConfused4={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 4"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 4'")}};St.Blocks.s_DisorientedConfused5={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 5"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 5'")}};St.Blocks.s_DisorientedConfused6={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 6"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 6'")}};St.Blocks.s_Distraction={init:function(){this.appendDummyInput().appendField("Sound: distraction"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'distraction'")}};St.Blocks.s_Ecstacy={init:function(){this.appendDummyInput().appendField("Sound: ecstacy"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'ecstacy'")}};St.Blocks.s_Ecstacy2={init:function(){this.appendDummyInput().appendField("Sound: ecstacy 2"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'ecstacy 2'")}};St.Blocks.s_Fear={init:function(){this.appendDummyInput().appendField("Sound: fear"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'fear'")}};St.Blocks.s_Grief={init:function(){this.appendDummyInput().appendField("Sound: grief"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'grief'")}};St.Blocks.s_Grief2={init:function(){this.appendDummyInput().appendField("Sound: grief 2"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'grief 2'")}};St.Blocks.s_Grief3={init:function(){this.appendDummyInput().appendField("Sound: grief 3"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'grief 3'")}};St.Blocks.s_Grief4={init:function(){this.appendDummyInput().appendField("Sound: grief 4"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'grief 4'")}};St.Blocks.s_Joy={init:function(){this.appendDummyInput().appendField("Sound: joy"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'joy'")}};St.Blocks.s_Joy2={init:function(){this.appendDummyInput().appendField("Sound: joy 2"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'joy 2'")}};St.Blocks.s_Joy3={init:function(){this.appendDummyInput().appendField("Sound: joy 3"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'joy 3'")}};St.Blocks.s_Joy4={init:function(){this.appendDummyInput().appendField("Sound: joy 4"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'joy 4'")}};St.Blocks.s_Loathing={init:function(){this.appendDummyInput().appendField("Sound: loathing"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'loathing'")}};St.Blocks.s_Love={init:function(){this.appendDummyInput().appendField("Sound: love"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'love'")}};St.Blocks.s_PhraseByeBye={init:function(){this.appendDummyInput().appendField("Sound: Bye Bye"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Bye Bye'")}};St.Blocks.s_PhraseEvilAhHa={init:function(){this.appendDummyInput().appendField("Sound: Evil Ah Ha"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Evil Ah Ha'")}};St.Blocks.s_PhraseHello={init:function(){this.appendDummyInput().appendField("Sound: Hello"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Hello'")}};St.Blocks.s_PhraseNoNoNo={init:function(){this.appendDummyInput().appendField("Sound: No No No"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: No No No'")}};St.Blocks.s_PhraseOopsy={init:function(){this.appendDummyInput().appendField("Sound: Oopsy"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Oopsy'")}};St.Blocks.s_PhraseOwOwOw={init:function(){this.appendDummyInput().appendField("Sound: Ow Ow Ow"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Ow Ow Ow'")}};St.Blocks.s_PhraseOwwww={init:function(){this.appendDummyInput().appendField("Sound: Owwww"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Owwww'")}};St.Blocks.s_PhraseUhOh={init:function(){this.appendDummyInput().appendField("Sound: Uh Oh"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Uh Oh'")}};St.Blocks.s_Rage={init:function(){this.appendDummyInput().appendField("Sound: rage"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'rage'")}};St.Blocks.s_Sadness={init:function(){this.appendDummyInput().appendField("Sound: sadness"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'sadness'")}};St.Blocks.s_Sadness2={init:function(){this.appendDummyInput().appendField("Sound: sadness 2"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 2'")}};St.Blocks.s_Sadness3={init:function(){this.appendDummyInput().appendField("Sound: sadness 3"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 3'")}};St.Blocks.s_Sadness4={init:function(){this.appendDummyInput().appendField("Sound: sadness 4"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 4'")}};St.Blocks.s_Sadness5={init:function(){this.appendDummyInput().appendField("Sound: sadness 5"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 5'")}};St.Blocks.s_Sadness6={init:function(){this.appendDummyInput().appendField("Sound: sadness 6"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 6'")}};St.Blocks.s_Sadness7={init:function(){this.appendDummyInput().appendField("Sound: sadness 7"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 7'")}};St.Blocks.s_Sleepy={init:function(){this.appendDummyInput().appendField("Sound: sleepy"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy'")}};St.Blocks.s_Sleepy2={init:function(){this.appendDummyInput().appendField("Sound: sleepy 2"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 2'")}};St.Blocks.s_Sleepy3={init:function(){this.appendDummyInput().appendField("Sound: sleepy 3"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 3'")}};St.Blocks.s_Sleepy4={init:function(){this.appendDummyInput().appendField("Sound: sleepy 4"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 4'")}};St.Blocks.s_SleepySnore={init:function(){this.appendDummyInput().appendField("Sound: sleepy snore"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy snore'")}};St.Blocks.s_SystemCameraShutter={init:function(){this.appendDummyInput().appendField("Sound: system camera shutter"),this.setOutput(!0,"Audio"),this.setColour(Rt.audio_category.colour),this.setTooltip("Represents the audio 'system camera shutter'")}};const UJ=St.common.createBlockDefinitionsFromJsonArray([FJ]);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TI=Object.create(null);TI.add_text=function(n,e){const t=e.valueToCode(n,"TEXT",DT.Order.NONE)||"''",i=e.valueToCode(n,"COLOR",DT.Order.ATOMIC)||"'#ffffff'";return`${e.provideFunction_("addText",`function ${e.FUNCTION_NAME_PLACEHOLDER_}(text, color) {

  // Add text to the output area.
  const outputDiv = document.getElementById('output');
  const textEl = document.createElement('p');
  textEl.innerText = text;
  textEl.style.color = color;
  outputDiv.appendChild(textEl);
}`)}(${t}, ${i});
`};TI.Start=function(n){return""};var zJ={BASE_URL:"/gpu-programming/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const nU=n=>{let e;const t=new Set,i=(m,_)=>{const v=typeof m=="function"?m(e):m;if(!Object.is(v,e)){const S=e;e=_??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(x=>x(e,S))}},s=()=>e,h={setState:i,getState:s,getInitialState:()=>d,subscribe:m=>(t.add(m),()=>t.delete(m)),destroy:()=>{(zJ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},d=e=n(i,s,h);return h},HJ=n=>n?nU(n):nU;var jW={exports:{}},XW={},YW={exports:{}},KW={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT=he;function GJ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var WJ=typeof Object.is=="function"?Object.is:GJ,VJ=NT.useState,jJ=NT.useEffect,XJ=NT.useLayoutEffect,YJ=NT.useDebugValue;function KJ(n,e){var t=e(),i=VJ({inst:{value:t,getSnapshot:e}}),s=i[0].inst,o=i[1];return XJ(function(){s.value=t,s.getSnapshot=e,zk(s)&&o({inst:s})},[n,t,e]),jJ(function(){return zk(s)&&o({inst:s}),n(function(){zk(s)&&o({inst:s})})},[n]),YJ(t),t}function zk(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!WJ(n,t)}catch{return!0}}function JJ(n,e){return e()}var QJ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?JJ:KJ;KW.useSyncExternalStore=NT.useSyncExternalStore!==void 0?NT.useSyncExternalStore:QJ;YW.exports=KW;var qJ=YW.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SI=he,ZJ=qJ;function eQ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var tQ=typeof Object.is=="function"?Object.is:eQ,nQ=ZJ.useSyncExternalStore,rQ=SI.useRef,iQ=SI.useEffect,sQ=SI.useMemo,oQ=SI.useDebugValue;XW.useSyncExternalStoreWithSelector=function(n,e,t,i,s){var o=rQ(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=sQ(function(){function h(S){if(!d){if(d=!0,m=S,S=i(S),s!==void 0&&l.hasValue){var x=l.value;if(s(x,S))return _=x}return _=S}if(x=_,tQ(m,S))return x;var w=i(S);return s!==void 0&&s(x,w)?x:(m=S,_=w)}var d=!1,m,_,v=t===void 0?null:t;return[function(){return h(e())},v===null?void 0:function(){return h(v())}]},[e,t,i,s]);var u=nQ(n,o[0],o[1]);return iQ(function(){l.hasValue=!0,l.value=u},[u]),oQ(u),u};jW.exports=XW;var aQ=jW.exports;const lQ=bb(aQ);var JW={BASE_URL:"/gpu-programming/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:uQ}=Sr,{useSyncExternalStoreWithSelector:cQ}=lQ;let rU=!1;const hQ=n=>n;function dQ(n,e=hQ,t){(JW?"production":void 0)!=="production"&&t&&!rU&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),rU=!0);const i=cQ(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return uQ(i),i}const iU=n=>{(JW?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?HJ(n):n,t=(i,s)=>dQ(e,i,s);return Object.assign(t,e),t},pQ=n=>n?iU(n):iU;var mB={},EI={};(function(n){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",t=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",i="["+e+"]["+t+"]*",s=new RegExp("^"+i+"$"),o=function(u,h){const d=[];let m=h.exec(u);for(;m;){const _=[];_.startIndex=h.lastIndex-m[0].length;const v=m.length;for(let S=0;S<v;S++)_.push(m[S]);d.push(_),m=h.exec(u)}return d},l=function(u){const h=s.exec(u);return!(h===null||typeof h>"u")};n.isExist=function(u){return typeof u<"u"},n.isEmptyObject=function(u){return Object.keys(u).length===0},n.merge=function(u,h,d){if(h){const m=Object.keys(h),_=m.length;for(let v=0;v<_;v++)d==="strict"?u[m[v]]=[h[m[v]]]:u[m[v]]=h[m[v]]}},n.getValue=function(u){return n.isExist(u)?u:""},n.isName=l,n.getAllMatches=o,n.nameRegexp=i})(EI);const gB=EI,fQ={allowBooleanAttributes:!1,unpairedTags:[]};mB.validate=function(n,e){e=Object.assign({},fQ,e);const t=[];let i=!1,s=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let o=0;o<n.length;o++)if(n[o]==="<"&&n[o+1]==="?"){if(o+=2,o=oU(n,o),o.err)return o}else if(n[o]==="<"){let l=o;if(o++,n[o]==="!"){o=aU(n,o);continue}else{let u=!1;n[o]==="/"&&(u=!0,o++);let h="";for(;o<n.length&&n[o]!==">"&&n[o]!==" "&&n[o]!=="	"&&n[o]!==`
`&&n[o]!=="\r";o++)h+=n[o];if(h=h.trim(),h[h.length-1]==="/"&&(h=h.substring(0,h.length-1),o--),!SQ(h)){let _;return h.trim().length===0?_="Invalid space after '<'.":_="Tag '"+h+"' is an invalid name.",pc("InvalidTag",_,Lp(n,o))}const d=_Q(n,o);if(d===!1)return pc("InvalidAttr","Attributes for '"+h+"' have open quote.",Lp(n,o));let m=d.value;if(o=d.index,m[m.length-1]==="/"){const _=o-m.length;m=m.substring(0,m.length-1);const v=lU(m,e);if(v===!0)i=!0;else return pc(v.err.code,v.err.msg,Lp(n,_+v.err.line))}else if(u)if(d.tagClosed){if(m.trim().length>0)return pc("InvalidTag","Closing tag '"+h+"' can't have attributes or invalid starting.",Lp(n,l));{const _=t.pop();if(h!==_.tagName){let v=Lp(n,_.tagStartPos);return pc("InvalidTag","Expected closing tag '"+_.tagName+"' (opened in line "+v.line+", col "+v.col+") instead of closing tag '"+h+"'.",Lp(n,l))}t.length==0&&(s=!0)}}else return pc("InvalidTag","Closing tag '"+h+"' doesn't have proper closing.",Lp(n,o));else{const _=lU(m,e);if(_!==!0)return pc(_.err.code,_.err.msg,Lp(n,o-m.length+_.err.line));if(s===!0)return pc("InvalidXml","Multiple possible root nodes found.",Lp(n,o));e.unpairedTags.indexOf(h)!==-1||t.push({tagName:h,tagStartPos:l}),i=!0}for(o++;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="!"){o++,o=aU(n,o);continue}else if(n[o+1]==="?"){if(o=oU(n,++o),o.err)return o}else break;else if(n[o]==="&"){const _=bQ(n,o);if(_==-1)return pc("InvalidChar","char '&' is not expected.",Lp(n,o));o=_}else if(s===!0&&!sU(n[o]))return pc("InvalidXml","Extra text at the end",Lp(n,o));n[o]==="<"&&o--}}else{if(sU(n[o]))continue;return pc("InvalidChar","char '"+n[o]+"' is not expected.",Lp(n,o))}if(i){if(t.length==1)return pc("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",Lp(n,t[0].tagStartPos));if(t.length>0)return pc("InvalidXml","Invalid '"+JSON.stringify(t.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return pc("InvalidXml","Start tag expected.",1);return!0};function sU(n){return n===" "||n==="	"||n===`
`||n==="\r"}function oU(n,e){const t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){const i=n.substr(t,e-t);if(e>5&&i==="xml")return pc("InvalidXml","XML declaration allowed only at the start of the document.",Lp(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}function aU(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}const mQ='"',gQ="'";function _Q(n,e){let t="",i="",s=!1;for(;e<n.length;e++){if(n[e]===mQ||n[e]===gQ)i===""?i=n[e]:i!==n[e]||(i="");else if(n[e]===">"&&i===""){s=!0;break}t+=n[e]}return i!==""?!1:{value:t,index:e,tagClosed:s}}const vQ=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function lU(n,e){const t=gB.getAllMatches(n,vQ),i={};for(let s=0;s<t.length;s++){if(t[s][1].length===0)return pc("InvalidAttr","Attribute '"+t[s][2]+"' has no space in starting.",yE(t[s]));if(t[s][3]!==void 0&&t[s][4]===void 0)return pc("InvalidAttr","Attribute '"+t[s][2]+"' is without value.",yE(t[s]));if(t[s][3]===void 0&&!e.allowBooleanAttributes)return pc("InvalidAttr","boolean attribute '"+t[s][2]+"' is not allowed.",yE(t[s]));const o=t[s][2];if(!TQ(o))return pc("InvalidAttr","Attribute '"+o+"' is an invalid name.",yE(t[s]));if(!i.hasOwnProperty(o))i[o]=1;else return pc("InvalidAttr","Attribute '"+o+"' is repeated.",yE(t[s]))}return!0}function yQ(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}function bQ(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,yQ(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}function pc(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}function TQ(n){return gB.isName(n)}function SQ(n){return gB.isName(n)}function Lp(n,e){const t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function yE(n){return n.startIndex+n[1].length}var _B={};const QW={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,e,t){return n}},EQ=function(n){return Object.assign({},QW,n)};_B.buildOptions=EQ;_B.defaultOptions=QW;class $Q{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}var xQ=$Q;const wQ=EI;function CQ(n,e){const t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let i=1,s=!1,o=!1,l="";for(;e<n.length;e++)if(n[e]==="<"&&!o){if(s&&IQ(n,e))e+=7,[entityName,val,e]=MQ(n,e+1),val.indexOf("&")===-1&&(t[LQ(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&RQ(n,e))e+=8;else if(s&&kQ(n,e))e+=8;else if(s&&OQ(n,e))e+=9;else if(AQ)o=!0;else throw new Error("Invalid DOCTYPE");i++,l=""}else if(n[e]===">"){if(o?n[e-1]==="-"&&n[e-2]==="-"&&(o=!1,i--):i--,i===0)break}else n[e]==="["?s=!0:l+=n[e];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}function MQ(n,e){let t="";for(;e<n.length&&n[e]!=="'"&&n[e]!=='"';e++)t+=n[e];if(t=t.trim(),t.indexOf(" ")!==-1)throw new Error("External entites are not supported");const i=n[e++];let s="";for(;e<n.length&&n[e]!==i;e++)s+=n[e];return[t,s,e]}function AQ(n,e){return n[e+1]==="!"&&n[e+2]==="-"&&n[e+3]==="-"}function IQ(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="N"&&n[e+4]==="T"&&n[e+5]==="I"&&n[e+6]==="T"&&n[e+7]==="Y"}function RQ(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="L"&&n[e+4]==="E"&&n[e+5]==="M"&&n[e+6]==="E"&&n[e+7]==="N"&&n[e+8]==="T"}function kQ(n,e){return n[e+1]==="!"&&n[e+2]==="A"&&n[e+3]==="T"&&n[e+4]==="T"&&n[e+5]==="L"&&n[e+6]==="I"&&n[e+7]==="S"&&n[e+8]==="T"}function OQ(n,e){return n[e+1]==="!"&&n[e+2]==="N"&&n[e+3]==="O"&&n[e+4]==="T"&&n[e+5]==="A"&&n[e+6]==="T"&&n[e+7]==="I"&&n[e+8]==="O"&&n[e+9]==="N"}function LQ(n){if(wQ.isName(n))return n;throw new Error(`Invalid entity name ${n}`)}var DQ=CQ;const NQ=/^[-+]?0x[a-fA-F0-9]+$/,BQ=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const PQ={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function FQ(n,e={}){if(e=Object.assign({},PQ,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(e.hex&&NQ.test(t))return Number.parseInt(t,16);{const i=BQ.exec(t);if(i){const s=i[1],o=i[2];let l=UQ(i[3]);const u=i[4]||i[6];if(!e.leadingZeros&&o.length>0&&s&&t[2]!==".")return n;if(!e.leadingZeros&&o.length>0&&!s&&t[1]!==".")return n;{const h=Number(t),d=""+h;return d.search(/[eE]/)!==-1||u?e.eNotation?h:n:t.indexOf(".")!==-1?d==="0"&&l===""||d===l||s&&d==="-"+l?h:n:o?l===d||s+l===d?h:n:t===d||t===s+d?h:n}}else return n}}function UQ(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substr(0,n.length-1))),n}var zQ=FQ;const qW=EI,bE=xQ,HQ=DQ,GQ=zQ;let WQ=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,i)=>String.fromCharCode(Number.parseInt(i,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,i)=>String.fromCharCode(Number.parseInt(i,16))}},this.addExternalEntities=VQ,this.parseXml=JQ,this.parseTextData=jQ,this.resolveNameSpace=XQ,this.buildAttributesMap=KQ,this.isItStopNode=eq,this.replaceEntitiesValue=qQ,this.readStopNodeData=nq,this.saveTextToParentTag=ZQ,this.addChild=QQ}};function VQ(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:n[i]}}}function jQ(n,e,t,i,s,o,l){if(n!==void 0&&(this.options.trimValues&&!i&&(n=n.trim()),n.length>0)){l||(n=this.replaceEntitiesValue(n));const u=this.options.tagValueProcessor(e,n,t,s,o);return u==null?n:typeof u!=typeof n||u!==n?u:this.options.trimValues?YL(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?YL(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function XQ(n){if(this.options.removeNSPrefix){const e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}const YQ=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function KQ(n,e,t){if(!this.options.ignoreAttributes&&typeof n=="string"){const i=qW.getAllMatches(n,YQ),s=i.length,o={};for(let l=0;l<s;l++){const u=this.resolveNameSpace(i[l][1]);let h=i[l][4],d=this.options.attributeNamePrefix+u;if(u.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),h!==void 0){this.options.trimValues&&(h=h.trim()),h=this.replaceEntitiesValue(h);const m=this.options.attributeValueProcessor(u,h,e);m==null?o[d]=h:typeof m!=typeof h||m!==h?o[d]=m:o[d]=YL(h,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[d]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const l={};return l[this.options.attributesGroupName]=o,l}return o}}const JQ=function(n){n=n.replace(/\r\n?/g,`
`);const e=new bE("!xml");let t=e,i="",s="";for(let o=0;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="/"){const u=Py(n,">",o,"Closing Tag is not closed.");let h=n.substring(o+2,u).trim();if(this.options.removeNSPrefix){const _=h.indexOf(":");_!==-1&&(h=h.substr(_+1))}this.options.transformTagName&&(h=this.options.transformTagName(h)),t&&(i=this.saveTextToParentTag(i,t,s));const d=s.substring(s.lastIndexOf(".")+1);if(h&&this.options.unpairedTags.indexOf(h)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${h}>`);let m=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(m=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):m=s.lastIndexOf("."),s=s.substring(0,m),t=this.tagsNodeStack.pop(),i="",o=u}else if(n[o+1]==="?"){let u=XL(n,o,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,t,s),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){const h=new bE(u.tagName);h.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(h[":@"]=this.buildAttributesMap(u.tagExp,s,u.tagName)),this.addChild(t,h,s)}o=u.closeIndex+1}else if(n.substr(o+1,3)==="!--"){const u=Py(n,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){const h=n.substring(o+4,u-2);i=this.saveTextToParentTag(i,t,s),t.add(this.options.commentPropName,[{[this.options.textNodeName]:h}])}o=u}else if(n.substr(o+1,2)==="!D"){const u=HQ(n,o);this.docTypeEntities=u.entities,o=u.i}else if(n.substr(o+1,2)==="!["){const u=Py(n,"]]>",o,"CDATA is not closed.")-2,h=n.substring(o+9,u);i=this.saveTextToParentTag(i,t,s);let d=this.parseTextData(h,t.tagname,s,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:h}]):t.add(this.options.textNodeName,d),o=u+2}else{let u=XL(n,o,this.options.removeNSPrefix),h=u.tagName;const d=u.rawTagName;let m=u.tagExp,_=u.attrExpPresent,v=u.closeIndex;this.options.transformTagName&&(h=this.options.transformTagName(h)),t&&i&&t.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,t,s,!1));const S=t;if(S&&this.options.unpairedTags.indexOf(S.tagname)!==-1&&(t=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),h!==e.tagname&&(s+=s?"."+h:h),this.isItStopNode(this.options.stopNodes,s,h)){let x="";if(m.length>0&&m.lastIndexOf("/")===m.length-1)o=u.closeIndex;else if(this.options.unpairedTags.indexOf(h)!==-1)o=u.closeIndex;else{const A=this.readStopNodeData(n,d,v+1);if(!A)throw new Error(`Unexpected end of ${d}`);o=A.i,x=A.tagContent}const w=new bE(h);h!==m&&_&&(w[":@"]=this.buildAttributesMap(m,s,h)),x&&(x=this.parseTextData(x,h,s,!0,_,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),w.add(this.options.textNodeName,x),this.addChild(t,w,s)}else{if(m.length>0&&m.lastIndexOf("/")===m.length-1){h[h.length-1]==="/"?(h=h.substr(0,h.length-1),s=s.substr(0,s.length-1),m=h):m=m.substr(0,m.length-1),this.options.transformTagName&&(h=this.options.transformTagName(h));const x=new bE(h);h!==m&&_&&(x[":@"]=this.buildAttributesMap(m,s,h)),this.addChild(t,x,s),s=s.substr(0,s.lastIndexOf("."))}else{const x=new bE(h);this.tagsNodeStack.push(t),h!==m&&_&&(x[":@"]=this.buildAttributesMap(m,s,h)),this.addChild(t,x,s),t=x}i="",o=v}}else i+=n[o];return e.child};function QQ(n,e,t){const i=this.options.updateTag(e.tagname,t,e[":@"]);i===!1||(typeof i=="string"&&(e.tagname=i),n.addChild(e))}const qQ=function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function ZQ(n,e,t,i){return n&&(i===void 0&&(i=Object.keys(e.child).length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}function eq(n,e,t){const i="*."+t;for(const s in n){const o=n[s];if(i===o||e===o)return!0}return!1}function tq(n,e,t=">"){let i,s="";for(let o=e;o<n.length;o++){let l=n[o];if(i)l===i&&(i="");else if(l==='"'||l==="'")i=l;else if(l===t[0])if(t[1]){if(n[o+1]===t[1])return{data:s,index:o}}else return{data:s,index:o};else l==="	"&&(l=" ");s+=l}}function Py(n,e,t,i){const s=n.indexOf(e,t);if(s===-1)throw new Error(i);return s+e.length-1}function XL(n,e,t,i=">"){const s=tq(n,e+1,i);if(!s)return;let o=s.data;const l=s.index,u=o.search(/\s/);let h=o,d=!0;u!==-1&&(h=o.substring(0,u),o=o.substring(u+1).trimStart());const m=h;if(t){const _=h.indexOf(":");_!==-1&&(h=h.substr(_+1),d=h!==s.data.substr(_+1))}return{tagName:h,tagExp:o,closeIndex:l,attrExpPresent:d,rawTagName:m}}function nq(n,e,t){const i=t;let s=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){const o=Py(n,">",t,`${e} is not closed`);if(n.substring(t+2,o).trim()===e&&(s--,s===0))return{tagContent:n.substring(i,t),i:o};t=o}else if(n[t+1]==="?")t=Py(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=Py(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=Py(n,"]]>",t,"StopNode is not closed.")-2;else{const o=XL(n,t,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,t=o.closeIndex)}}function YL(n,e,t){if(e&&typeof n=="string"){const i=n.trim();return i==="true"?!0:i==="false"?!1:GQ(n,t)}else return qW.isExist(n)?n:""}var rq=WQ,ZW={};function iq(n,e){return eV(n,e)}function eV(n,e,t){let i;const s={};for(let o=0;o<n.length;o++){const l=n[o],u=sq(l);let h="";if(t===void 0?h=u:h=t+"."+u,u===e.textNodeName)i===void 0?i=l[u]:i+=""+l[u];else{if(u===void 0)continue;if(l[u]){let d=eV(l[u],e,h);const m=aq(d,e);l[":@"]?oq(d,l[":@"],h,e):Object.keys(d).length===1&&d[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?d=d[e.textNodeName]:Object.keys(d).length===0&&(e.alwaysCreateTextNode?d[e.textNodeName]="":d=""),s[u]!==void 0&&s.hasOwnProperty(u)?(Array.isArray(s[u])||(s[u]=[s[u]]),s[u].push(d)):e.isArray(u,h,m)?s[u]=[d]:s[u]=d}}}return typeof i=="string"?i.length>0&&(s[e.textNodeName]=i):i!==void 0&&(s[e.textNodeName]=i),s}function sq(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];if(i!==":@")return i}}function oq(n,e,t,i){if(e){const s=Object.keys(e),o=s.length;for(let l=0;l<o;l++){const u=s[l];i.isArray(u,t+"."+u,!0,!0)?n[u]=[e[u]]:n[u]=e[u]}}}function aq(n,e){const{textNodeName:t}=e,i=Object.keys(n).length;return!!(i===0||i===1&&(n[t]||typeof n[t]=="boolean"||n[t]===0))}ZW.prettify=iq;const{buildOptions:lq}=_B,uq=rq,{prettify:cq}=ZW,hq=mB;let dq=class{constructor(e){this.externalEntities={},this.options=lq(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const o=hq.validate(e,t);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}const i=new uq(this.options);i.addExternalEntities(this.externalEntities);const s=i.parseXml(e);return this.options.preserveOrder||s===void 0?s:cq(s,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};var pq=dq;const fq=`
`;function mq(n,e){let t="";return e.format&&e.indentBy.length>0&&(t=fq),tV(n,e,"",t)}function tV(n,e,t,i){let s="",o=!1;for(let l=0;l<n.length;l++){const u=n[l],h=gq(u);if(h===void 0)continue;let d="";if(t.length===0?d=h:d=`${t}.${h}`,h===e.textNodeName){let x=u[h];_q(d,e)||(x=e.tagValueProcessor(h,x),x=nV(x,e)),o&&(s+=i),s+=x,o=!1;continue}else if(h===e.cdataPropName){o&&(s+=i),s+=`<![CDATA[${u[h][0][e.textNodeName]}]]>`,o=!1;continue}else if(h===e.commentPropName){s+=i+`<!--${u[h][0][e.textNodeName]}-->`,o=!0;continue}else if(h[0]==="?"){const x=uU(u[":@"],e),w=h==="?xml"?"":i;let A=u[h][0][e.textNodeName];A=A.length!==0?" "+A:"",s+=w+`<${h}${A}${x}?>`,o=!0;continue}let m=i;m!==""&&(m+=e.indentBy);const _=uU(u[":@"],e),v=i+`<${h}${_}`,S=tV(u[h],e,d,m);e.unpairedTags.indexOf(h)!==-1?e.suppressUnpairedNode?s+=v+">":s+=v+"/>":(!S||S.length===0)&&e.suppressEmptyNode?s+=v+"/>":S&&S.endsWith(">")?s+=v+`>${S}${i}</${h}>`:(s+=v+">",S&&i!==""&&(S.includes("/>")||S.includes("</"))?s+=i+e.indentBy+S+i:s+=S,s+=`</${h}>`),o=!0}return s}function gq(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];if(n.hasOwnProperty(i)&&i!==":@")return i}}function uU(n,e){let t="";if(n&&!e.ignoreAttributes)for(let i in n){if(!n.hasOwnProperty(i))continue;let s=e.attributeValueProcessor(i,n[i]);s=nV(s,e),s===!0&&e.suppressBooleanAttributes?t+=` ${i.substr(e.attributeNamePrefix.length)}`:t+=` ${i.substr(e.attributeNamePrefix.length)}="${s}"`}return t}function _q(n,e){n=n.substr(0,n.length-e.textNodeName.length-1);let t=n.substr(n.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===n||e.stopNodes[i]==="*."+t)return!0;return!1}function nV(n,e){if(n&&n.length>0&&e.processEntities)for(let t=0;t<e.entities.length;t++){const i=e.entities[t];n=n.replace(i.regex,i.val)}return n}var vq=mq;const yq=vq,bq={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Rv(n){this.options=Object.assign({},bq,n),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Eq),this.processTextOrObjNode=Tq,this.options.format?(this.indentate=Sq,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Rv.prototype.build=function(n){return this.options.preserveOrder?yq(n,this.options):(Array.isArray(n)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(n={[this.options.arrayNodeName]:n}),this.j2x(n,0).val)};Rv.prototype.j2x=function(n,e){let t="",i="";for(let s in n)if(Object.prototype.hasOwnProperty.call(n,s))if(typeof n[s]>"u")this.isAttribute(s)&&(i+="");else if(n[s]===null)this.isAttribute(s)?i+="":s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(n[s]instanceof Date)i+=this.buildTextValNode(n[s],s,"",e);else if(typeof n[s]!="object"){const o=this.isAttribute(s);if(o)t+=this.buildAttrPairStr(o,""+n[s]);else if(s===this.options.textNodeName){let l=this.options.tagValueProcessor(s,""+n[s]);i+=this.replaceEntitiesValue(l)}else i+=this.buildTextValNode(n[s],s,"",e)}else if(Array.isArray(n[s])){const o=n[s].length;let l="";for(let u=0;u<o;u++){const h=n[s][u];typeof h>"u"||(h===null?s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof h=="object"?this.options.oneListGroup?l+=this.j2x(h,e+1).val:l+=this.processTextOrObjNode(h,s,e):l+=this.buildTextValNode(h,s,"",e))}this.options.oneListGroup&&(l=this.buildObjectNode(l,s,"",e)),i+=l}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const o=Object.keys(n[s]),l=o.length;for(let u=0;u<l;u++)t+=this.buildAttrPairStr(o[u],""+n[s][o[u]])}else i+=this.processTextOrObjNode(n[s],s,e);return{attrStr:t,val:i}};Rv.prototype.buildAttrPairStr=function(n,e){return e=this.options.attributeValueProcessor(n,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+n:" "+n+'="'+e+'"'};function Tq(n,e,t){const i=this.j2x(n,t+1);return n[this.options.textNodeName]!==void 0&&Object.keys(n).length===1?this.buildTextValNode(n[this.options.textNodeName],e,i.attrStr,t):this.buildObjectNode(i.val,e,i.attrStr,t)}Rv.prototype.buildObjectNode=function(n,e,t,i){if(n==="")return e[0]==="?"?this.indentate(i)+"<"+e+t+"?"+this.tagEndChar:this.indentate(i)+"<"+e+t+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),(t||t==="")&&n.indexOf("<")===-1?this.indentate(i)+"<"+e+t+o+">"+n+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(i)+`<!--${n}-->`+this.newLine:this.indentate(i)+"<"+e+t+o+this.tagEndChar+n+this.indentate(i)+s}};Rv.prototype.closeTag=function(n){let e="";return this.options.unpairedTags.indexOf(n)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${n}`,e};Rv.prototype.buildTextValNode=function(n,e,t,i){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${n}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(i)+`<!--${n}-->`+this.newLine;if(e[0]==="?")return this.indentate(i)+"<"+e+t+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,n);return s=this.replaceEntitiesValue(s),s===""?this.indentate(i)+"<"+e+t+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+t+">"+s+"</"+e+this.tagEndChar}};Rv.prototype.replaceEntitiesValue=function(n){if(n&&n.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const t=this.options.entities[e];n=n.replace(t.regex,t.val)}return n};function Sq(n){return this.options.indentBy.repeat(n)}function Eq(n){return n.startsWith(this.options.attributeNamePrefix)&&n!==this.options.textNodeName?n.substr(this.attrPrefixLen):!1}var $q=Rv;const xq=mB,wq=pq,Cq=$q;var rV={XMLParser:wq,XMLValidator:xq,XMLBuilder:Cq};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const vB="162",kA=0,Mq=1,Aq=2,cU=1,hU=100,dU=204,pU=205,fU=3,Iq=0,mU="attached",Rq="detached",iV=300,Y$=1e3,r$=1001,KL=1002,K$=1003,kq=1004,Oq=1005,yB=1006,Lq=1007,bB=1008,sV=1009,Dq=1014,TB=1015,Nq=1020,SB=1023,Hk=1026,gU=1027,Bq=1028,J$=2300,BT=2301,Gk=2302,_U=2400,vU=2401,yU=2402,Pq=2500,Fq=0,oV=1,JL=2,Uq=0,aV="",q_="srgb",EB="srgb-linear",zq="display-p3",lV="display-p3-linear",QL="linear",bU="srgb",TU="rec709",SU="p3",s1=7680,EU=519,Hq=515,qL=35044,Fy=2e3,ZL=2001;class $I{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const o=s.indexOf(t);o!==-1&&s.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let o=0,l=s.length;o<l;o++)s[o].call(this,e);e.target=null}}}const bd=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let $U=1234567;const b$=Math.PI/180,Q$=180/Math.PI;function pg(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(bd[n&255]+bd[n>>8&255]+bd[n>>16&255]+bd[n>>24&255]+"-"+bd[e&255]+bd[e>>8&255]+"-"+bd[e>>16&15|64]+bd[e>>24&255]+"-"+bd[t&63|128]+bd[t>>8&255]+"-"+bd[t>>16&255]+bd[t>>24&255]+bd[i&255]+bd[i>>8&255]+bd[i>>16&255]+bd[i>>24&255]).toLowerCase()}function Md(n,e,t){return Math.max(e,Math.min(t,n))}function $B(n,e){return(n%e+e)%e}function Gq(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function Wq(n,e,t){return n!==e?(t-n)/(e-n):0}function T$(n,e,t){return(1-t)*n+t*e}function Vq(n,e,t,i){return T$(n,e,1-Math.exp(-t*i))}function jq(n,e=1){return e-Math.abs($B(n,e*2)-e)}function Xq(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Yq(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Kq(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Jq(n,e){return n+Math.random()*(e-n)}function Qq(n){return n*(.5-Math.random())}function qq(n){n!==void 0&&($U=n);let e=$U+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Zq(n){return n*b$}function eZ(n){return n*Q$}function tZ(n){return(n&n-1)===0&&n!==0}function nZ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function rZ(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function iZ(n,e,t,i,s){const o=Math.cos,l=Math.sin,u=o(t/2),h=l(t/2),d=o((e+i)/2),m=l((e+i)/2),_=o((e-i)/2),v=l((e-i)/2),S=o((i-e)/2),x=l((i-e)/2);switch(s){case"XYX":n.set(u*m,h*_,h*v,u*d);break;case"YZY":n.set(h*v,u*m,h*_,u*d);break;case"ZXZ":n.set(h*_,h*v,u*m,u*d);break;case"XZX":n.set(u*m,h*x,h*S,u*d);break;case"YXY":n.set(h*S,u*m,h*x,u*d);break;case"ZYZ":n.set(h*x,h*S,u*m,u*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function ag(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function go(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const sZ={DEG2RAD:b$,RAD2DEG:Q$,generateUUID:pg,clamp:Md,euclideanModulo:$B,mapLinear:Gq,inverseLerp:Wq,lerp:T$,damp:Vq,pingpong:jq,smoothstep:Xq,smootherstep:Yq,randInt:Kq,randFloat:Jq,randFloatSpread:Qq,seededRandom:qq,degToRad:Zq,radToDeg:eZ,isPowerOfTwo:tZ,ceilPowerOfTwo:nZ,floorPowerOfTwo:rZ,setQuaternionFromProperEuler:iZ,normalize:go,denormalize:ag};class Bl{constructor(e=0,t=0){Bl.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Md(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*i-l*s+e.x,this.y=o*s+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class o_{constructor(e,t,i,s,o,l,u,h,d){o_.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,o,l,u,h,d)}set(e,t,i,s,o,l,u,h,d){const m=this.elements;return m[0]=e,m[1]=s,m[2]=u,m[3]=t,m[4]=o,m[5]=h,m[6]=i,m[7]=l,m[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[3],h=i[6],d=i[1],m=i[4],_=i[7],v=i[2],S=i[5],x=i[8],w=s[0],A=s[3],k=s[6],O=s[1],D=s[4],L=s[7],z=s[2],H=s[5],U=s[8];return o[0]=l*w+u*O+h*z,o[3]=l*A+u*D+h*H,o[6]=l*k+u*L+h*U,o[1]=d*w+m*O+_*z,o[4]=d*A+m*D+_*H,o[7]=d*k+m*L+_*U,o[2]=v*w+S*O+x*z,o[5]=v*A+S*D+x*H,o[8]=v*k+S*L+x*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],d=e[7],m=e[8];return t*l*m-t*u*d-i*o*m+i*u*h+s*o*d-s*l*h}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],d=e[7],m=e[8],_=m*l-u*d,v=u*h-m*o,S=d*o-l*h,x=t*_+i*v+s*S;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=_*w,e[1]=(s*d-m*i)*w,e[2]=(u*i-s*l)*w,e[3]=v*w,e[4]=(m*t-s*h)*w,e[5]=(s*o-u*t)*w,e[6]=S*w,e[7]=(i*h-d*t)*w,e[8]=(l*t-i*o)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,o,l,u){const h=Math.cos(o),d=Math.sin(o);return this.set(i*h,i*d,-i*(h*l+d*u)+l+e,-s*d,s*h,-s*(-d*l+h*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(Wk.makeScale(e,t)),this}rotate(e){return this.premultiply(Wk.makeRotation(-e)),this}translate(e,t){return this.premultiply(Wk.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Wk=new o_;function oZ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function eD(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const xU={};function uV(n){n in xU||(xU[n]=!0,console.warn(n))}const wU=new o_().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),CU=new o_().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),jw={[EB]:{transfer:QL,primaries:TU,toReference:n=>n,fromReference:n=>n},[q_]:{transfer:bU,primaries:TU,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[lV]:{transfer:QL,primaries:SU,toReference:n=>n.applyMatrix3(CU),fromReference:n=>n.applyMatrix3(wU)},[zq]:{transfer:bU,primaries:SU,toReference:n=>n.convertSRGBToLinear().applyMatrix3(CU),fromReference:n=>n.applyMatrix3(wU).convertLinearToSRGB()}},aZ=new Set([EB,lV]),Jm={enabled:!0,_workingColorSpace:EB,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!aZ.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=jw[e].toReference,s=jw[t].fromReference;return s(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return jw[n].primaries},getTransfer:function(n){return n===aV?QL:jw[n].transfer}};function TT(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Vk(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let o1;class lZ{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{o1===void 0&&(o1=eD("canvas")),o1.width=e.width,o1.height=e.height;const i=o1.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=o1}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=eD("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=TT(o[l]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(TT(t[i]/255)*255):t[i]=TT(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let uZ=0;class cZ{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:uZ++}),this.uuid=pg(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(jk(s[l].image)):o.push(jk(s[l]))}else o=jk(s);i.url=o}return t||(e.images[this.uuid]=i),i}}function jk(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?lZ.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let hZ=0;class $f extends $I{constructor(e=$f.DEFAULT_IMAGE,t=$f.DEFAULT_MAPPING,i=r$,s=r$,o=yB,l=bB,u=SB,h=sV,d=$f.DEFAULT_ANISOTROPY,m=aV){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:hZ++}),this.uuid=pg(),this.name="",this.source=new cZ(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=d,this.format=u,this.internalFormat=null,this.type=h,this.offset=new Bl(0,0),this.repeat=new Bl(1,1),this.center=new Bl(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new o_,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==iV)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Y$:e.x=e.x-Math.floor(e.x);break;case r$:e.x=e.x<0?0:1;break;case KL:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Y$:e.y=e.y-Math.floor(e.y);break;case r$:e.y=e.y<0?0:1;break;case KL:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}$f.DEFAULT_IMAGE=null;$f.DEFAULT_MAPPING=iV;$f.DEFAULT_ANISOTROPY=1;class gm{constructor(e=0,t=0,i=0,s=1){gm.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*i+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*i+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*i+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,o;const h=e.elements,d=h[0],m=h[4],_=h[8],v=h[1],S=h[5],x=h[9],w=h[2],A=h[6],k=h[10];if(Math.abs(m-v)<.01&&Math.abs(_-w)<.01&&Math.abs(x-A)<.01){if(Math.abs(m+v)<.1&&Math.abs(_+w)<.1&&Math.abs(x+A)<.1&&Math.abs(d+S+k-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(d+1)/2,L=(S+1)/2,z=(k+1)/2,H=(m+v)/4,U=(_+w)/4,P=(x+A)/4;return D>L&&D>z?D<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(D),s=H/i,o=U/i):L>z?L<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(L),i=H/s,o=P/s):z<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(z),i=U/o,s=P/o),this.set(i,s,o,t),this}let O=Math.sqrt((A-x)*(A-x)+(_-w)*(_-w)+(v-m)*(v-m));return Math.abs(O)<.001&&(O=1),this.x=(A-x)/O,this.y=(_-w)/O,this.z=(v-m)/O,this.w=Math.acos((d+S+k-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Vo{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,o,l,u){let h=i[s+0],d=i[s+1],m=i[s+2],_=i[s+3];const v=o[l+0],S=o[l+1],x=o[l+2],w=o[l+3];if(u===0){e[t+0]=h,e[t+1]=d,e[t+2]=m,e[t+3]=_;return}if(u===1){e[t+0]=v,e[t+1]=S,e[t+2]=x,e[t+3]=w;return}if(_!==w||h!==v||d!==S||m!==x){let A=1-u;const k=h*v+d*S+m*x+_*w,O=k>=0?1:-1,D=1-k*k;if(D>Number.EPSILON){const z=Math.sqrt(D),H=Math.atan2(z,k*O);A=Math.sin(A*H)/z,u=Math.sin(u*H)/z}const L=u*O;if(h=h*A+v*L,d=d*A+S*L,m=m*A+x*L,_=_*A+w*L,A===1-u){const z=1/Math.sqrt(h*h+d*d+m*m+_*_);h*=z,d*=z,m*=z,_*=z}}e[t]=h,e[t+1]=d,e[t+2]=m,e[t+3]=_}static multiplyQuaternionsFlat(e,t,i,s,o,l){const u=i[s],h=i[s+1],d=i[s+2],m=i[s+3],_=o[l],v=o[l+1],S=o[l+2],x=o[l+3];return e[t]=u*x+m*_+h*S-d*v,e[t+1]=h*x+m*v+d*_-u*S,e[t+2]=d*x+m*S+u*v-h*_,e[t+3]=m*x-u*_-h*v-d*S,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,h=Math.sin,d=u(i/2),m=u(s/2),_=u(o/2),v=h(i/2),S=h(s/2),x=h(o/2);switch(l){case"XYZ":this._x=v*m*_+d*S*x,this._y=d*S*_-v*m*x,this._z=d*m*x+v*S*_,this._w=d*m*_-v*S*x;break;case"YXZ":this._x=v*m*_+d*S*x,this._y=d*S*_-v*m*x,this._z=d*m*x-v*S*_,this._w=d*m*_+v*S*x;break;case"ZXY":this._x=v*m*_-d*S*x,this._y=d*S*_+v*m*x,this._z=d*m*x+v*S*_,this._w=d*m*_-v*S*x;break;case"ZYX":this._x=v*m*_-d*S*x,this._y=d*S*_+v*m*x,this._z=d*m*x-v*S*_,this._w=d*m*_+v*S*x;break;case"YZX":this._x=v*m*_+d*S*x,this._y=d*S*_+v*m*x,this._z=d*m*x-v*S*_,this._w=d*m*_-v*S*x;break;case"XZY":this._x=v*m*_-d*S*x,this._y=d*S*_-v*m*x,this._z=d*m*x+v*S*_,this._w=d*m*_+v*S*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],o=t[8],l=t[1],u=t[5],h=t[9],d=t[2],m=t[6],_=t[10],v=i+u+_;if(v>0){const S=.5/Math.sqrt(v+1);this._w=.25/S,this._x=(m-h)*S,this._y=(o-d)*S,this._z=(l-s)*S}else if(i>u&&i>_){const S=2*Math.sqrt(1+i-u-_);this._w=(m-h)/S,this._x=.25*S,this._y=(s+l)/S,this._z=(o+d)/S}else if(u>_){const S=2*Math.sqrt(1+u-i-_);this._w=(o-d)/S,this._x=(s+l)/S,this._y=.25*S,this._z=(h+m)/S}else{const S=2*Math.sqrt(1+_-i-u);this._w=(l-s)/S,this._x=(o+d)/S,this._y=(h+m)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Md(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,o=e._z,l=e._w,u=t._x,h=t._y,d=t._z,m=t._w;return this._x=i*m+l*u+s*d-o*h,this._y=s*m+l*h+o*u-i*d,this._z=o*m+l*d+i*h-s*u,this._w=l*m-i*u-s*h-o*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+i*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=i,this._y=s,this._z=o,this;const h=1-u*u;if(h<=Number.EPSILON){const S=1-t;return this._w=S*l+t*this._w,this._x=S*i+t*this._x,this._y=S*s+t*this._y,this._z=S*o+t*this._z,this.normalize(),this}const d=Math.sqrt(h),m=Math.atan2(d,u),_=Math.sin((1-t)*m)/d,v=Math.sin(t*m)/d;return this._w=l*_+this._w*v,this._x=i*_+this._x*v,this._y=s*_+this._y*v,this._z=o*_+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Mt{constructor(e=0,t=0,i=0){Mt.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(MU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(MU.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*s,this.y=o[1]*t+o[4]*i+o[7]*s,this.z=o[2]*t+o[5]*i+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*i+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*i+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,o=e.x,l=e.y,u=e.z,h=e.w,d=2*(l*s-u*i),m=2*(u*t-o*s),_=2*(o*i-l*t);return this.x=t+h*d+l*_-u*m,this.y=i+h*m+u*d-o*_,this.z=s+h*_+o*m-l*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s,this.y=o[1]*t+o[5]*i+o[9]*s,this.z=o[2]*t+o[6]*i+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,o=e.z,l=t.x,u=t.y,h=t.z;return this.x=s*h-o*u,this.y=o*l-i*h,this.z=i*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Xk.copy(this).projectOnVector(e),this.sub(Xk)}reflect(e){return this.sub(Xk.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Md(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Xk=new Mt,MU=new Vo;class a_{constructor(e=new Mt(1/0,1/0,1/0),t=new Mt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Qm.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Qm.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Qm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let l=0,u=o.count;l<u;l++)e.isMesh===!0?e.getVertexPosition(l,Qm):Qm.fromBufferAttribute(o,l),Qm.applyMatrix4(e.matrixWorld),this.expandByPoint(Qm);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Xw.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Xw.copy(i.boundingBox)),Xw.applyMatrix4(e.matrixWorld),this.union(Xw)}const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Qm),Qm.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(TE),Yw.subVectors(this.max,TE),a1.subVectors(e.a,TE),l1.subVectors(e.b,TE),u1.subVectors(e.c,TE),k_.subVectors(l1,a1),O_.subVectors(u1,l1),iy.subVectors(a1,u1);let t=[0,-k_.z,k_.y,0,-O_.z,O_.y,0,-iy.z,iy.y,k_.z,0,-k_.x,O_.z,0,-O_.x,iy.z,0,-iy.x,-k_.y,k_.x,0,-O_.y,O_.x,0,-iy.y,iy.x,0];return!Yk(t,a1,l1,u1,Yw)||(t=[1,0,0,0,1,0,0,0,1],!Yk(t,a1,l1,u1,Yw))?!1:(Kw.crossVectors(k_,O_),t=[Kw.x,Kw.y,Kw.z],Yk(t,a1,l1,u1,Yw))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Qm).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Qm).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(A0[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),A0[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),A0[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),A0[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),A0[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),A0[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),A0[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),A0[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(A0),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const A0=[new Mt,new Mt,new Mt,new Mt,new Mt,new Mt,new Mt,new Mt],Qm=new Mt,Xw=new a_,a1=new Mt,l1=new Mt,u1=new Mt,k_=new Mt,O_=new Mt,iy=new Mt,TE=new Mt,Yw=new Mt,Kw=new Mt,sy=new Mt;function Yk(n,e,t,i,s){for(let o=0,l=n.length-3;o<=l;o+=3){sy.fromArray(n,o);const u=s.x*Math.abs(sy.x)+s.y*Math.abs(sy.y)+s.z*Math.abs(sy.z),h=e.dot(sy),d=t.dot(sy),m=i.dot(sy);if(Math.max(-Math.max(h,d,m),Math.min(h,d,m))>u)return!1}return!0}const dZ=new a_,SE=new Mt,Kk=new Mt;class l0{constructor(e=new Mt,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):dZ.setFromPoints(e).getCenter(i);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;SE.subVectors(e,this.center);const t=SE.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(SE,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Kk.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(SE.copy(e.center).add(Kk)),this.expandByPoint(SE.copy(e.center).sub(Kk))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const I0=new Mt,Jk=new Mt,Jw=new Mt,L_=new Mt,Qk=new Mt,Qw=new Mt,qk=new Mt;class xI{constructor(e=new Mt,t=new Mt(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,I0)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=I0.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(I0.copy(this.origin).addScaledVector(this.direction,t),I0.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){Jk.copy(e).add(t).multiplyScalar(.5),Jw.copy(t).sub(e).normalize(),L_.copy(this.origin).sub(Jk);const o=e.distanceTo(t)*.5,l=-this.direction.dot(Jw),u=L_.dot(this.direction),h=-L_.dot(Jw),d=L_.lengthSq(),m=Math.abs(1-l*l);let _,v,S,x;if(m>0)if(_=l*h-u,v=l*u-h,x=o*m,_>=0)if(v>=-x)if(v<=x){const w=1/m;_*=w,v*=w,S=_*(_+l*v+2*u)+v*(l*_+v+2*h)+d}else v=o,_=Math.max(0,-(l*v+u)),S=-_*_+v*(v+2*h)+d;else v=-o,_=Math.max(0,-(l*v+u)),S=-_*_+v*(v+2*h)+d;else v<=-x?(_=Math.max(0,-(-l*o+u)),v=_>0?-o:Math.min(Math.max(-o,-h),o),S=-_*_+v*(v+2*h)+d):v<=x?(_=0,v=Math.min(Math.max(-o,-h),o),S=v*(v+2*h)+d):(_=Math.max(0,-(l*o+u)),v=_>0?o:Math.min(Math.max(-o,-h),o),S=-_*_+v*(v+2*h)+d);else v=l>0?-o:o,_=Math.max(0,-(l*v+u)),S=-_*_+v*(v+2*h)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,_),s&&s.copy(Jk).addScaledVector(Jw,v),S}intersectSphere(e,t){I0.subVectors(e.center,this.origin);const i=I0.dot(this.direction),s=I0.dot(I0)-i*i,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=i-l,h=i+l;return h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,o,l,u,h;const d=1/this.direction.x,m=1/this.direction.y,_=1/this.direction.z,v=this.origin;return d>=0?(i=(e.min.x-v.x)*d,s=(e.max.x-v.x)*d):(i=(e.max.x-v.x)*d,s=(e.min.x-v.x)*d),m>=0?(o=(e.min.y-v.y)*m,l=(e.max.y-v.y)*m):(o=(e.max.y-v.y)*m,l=(e.min.y-v.y)*m),i>l||o>s||((o>i||isNaN(i))&&(i=o),(l<s||isNaN(s))&&(s=l),_>=0?(u=(e.min.z-v.z)*_,h=(e.max.z-v.z)*_):(u=(e.max.z-v.z)*_,h=(e.min.z-v.z)*_),i>h||u>s)||((u>i||i!==i)&&(i=u),(h<s||s!==s)&&(s=h),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,I0)!==null}intersectTriangle(e,t,i,s,o){Qk.subVectors(t,e),Qw.subVectors(i,e),qk.crossVectors(Qk,Qw);let l=this.direction.dot(qk),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;L_.subVectors(this.origin,e);const h=u*this.direction.dot(Qw.crossVectors(L_,Qw));if(h<0)return null;const d=u*this.direction.dot(Qk.cross(L_));if(d<0||h+d>l)return null;const m=-u*L_.dot(qk);return m<0?null:this.at(m/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class qi{constructor(e,t,i,s,o,l,u,h,d,m,_,v,S,x,w,A){qi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,o,l,u,h,d,m,_,v,S,x,w,A)}set(e,t,i,s,o,l,u,h,d,m,_,v,S,x,w,A){const k=this.elements;return k[0]=e,k[4]=t,k[8]=i,k[12]=s,k[1]=o,k[5]=l,k[9]=u,k[13]=h,k[2]=d,k[6]=m,k[10]=_,k[14]=v,k[3]=S,k[7]=x,k[11]=w,k[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new qi().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/c1.setFromMatrixColumn(e,0).length(),o=1/c1.setFromMatrixColumn(e,1).length(),l=1/c1.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,o=e.z,l=Math.cos(i),u=Math.sin(i),h=Math.cos(s),d=Math.sin(s),m=Math.cos(o),_=Math.sin(o);if(e.order==="XYZ"){const v=l*m,S=l*_,x=u*m,w=u*_;t[0]=h*m,t[4]=-h*_,t[8]=d,t[1]=S+x*d,t[5]=v-w*d,t[9]=-u*h,t[2]=w-v*d,t[6]=x+S*d,t[10]=l*h}else if(e.order==="YXZ"){const v=h*m,S=h*_,x=d*m,w=d*_;t[0]=v+w*u,t[4]=x*u-S,t[8]=l*d,t[1]=l*_,t[5]=l*m,t[9]=-u,t[2]=S*u-x,t[6]=w+v*u,t[10]=l*h}else if(e.order==="ZXY"){const v=h*m,S=h*_,x=d*m,w=d*_;t[0]=v-w*u,t[4]=-l*_,t[8]=x+S*u,t[1]=S+x*u,t[5]=l*m,t[9]=w-v*u,t[2]=-l*d,t[6]=u,t[10]=l*h}else if(e.order==="ZYX"){const v=l*m,S=l*_,x=u*m,w=u*_;t[0]=h*m,t[4]=x*d-S,t[8]=v*d+w,t[1]=h*_,t[5]=w*d+v,t[9]=S*d-x,t[2]=-d,t[6]=u*h,t[10]=l*h}else if(e.order==="YZX"){const v=l*h,S=l*d,x=u*h,w=u*d;t[0]=h*m,t[4]=w-v*_,t[8]=x*_+S,t[1]=_,t[5]=l*m,t[9]=-u*m,t[2]=-d*m,t[6]=S*_+x,t[10]=v-w*_}else if(e.order==="XZY"){const v=l*h,S=l*d,x=u*h,w=u*d;t[0]=h*m,t[4]=-_,t[8]=d*m,t[1]=v*_+w,t[5]=l*m,t[9]=S*_-x,t[2]=x*_-S,t[6]=u*m,t[10]=w*_+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(pZ,e,fZ)}lookAt(e,t,i){const s=this.elements;return pf.subVectors(e,t),pf.lengthSq()===0&&(pf.z=1),pf.normalize(),D_.crossVectors(i,pf),D_.lengthSq()===0&&(Math.abs(i.z)===1?pf.x+=1e-4:pf.z+=1e-4,pf.normalize(),D_.crossVectors(i,pf)),D_.normalize(),qw.crossVectors(pf,D_),s[0]=D_.x,s[4]=qw.x,s[8]=pf.x,s[1]=D_.y,s[5]=qw.y,s[9]=pf.y,s[2]=D_.z,s[6]=qw.z,s[10]=pf.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[4],h=i[8],d=i[12],m=i[1],_=i[5],v=i[9],S=i[13],x=i[2],w=i[6],A=i[10],k=i[14],O=i[3],D=i[7],L=i[11],z=i[15],H=s[0],U=s[4],P=s[8],K=s[12],ee=s[1],re=s[5],ie=s[9],de=s[13],oe=s[2],ce=s[6],me=s[10],Ae=s[14],j=s[3],Z=s[7],ne=s[11],ae=s[15];return o[0]=l*H+u*ee+h*oe+d*j,o[4]=l*U+u*re+h*ce+d*Z,o[8]=l*P+u*ie+h*me+d*ne,o[12]=l*K+u*de+h*Ae+d*ae,o[1]=m*H+_*ee+v*oe+S*j,o[5]=m*U+_*re+v*ce+S*Z,o[9]=m*P+_*ie+v*me+S*ne,o[13]=m*K+_*de+v*Ae+S*ae,o[2]=x*H+w*ee+A*oe+k*j,o[6]=x*U+w*re+A*ce+k*Z,o[10]=x*P+w*ie+A*me+k*ne,o[14]=x*K+w*de+A*Ae+k*ae,o[3]=O*H+D*ee+L*oe+z*j,o[7]=O*U+D*re+L*ce+z*Z,o[11]=O*P+D*ie+L*me+z*ne,o[15]=O*K+D*de+L*Ae+z*ae,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],o=e[12],l=e[1],u=e[5],h=e[9],d=e[13],m=e[2],_=e[6],v=e[10],S=e[14],x=e[3],w=e[7],A=e[11],k=e[15];return x*(+o*h*_-s*d*_-o*u*v+i*d*v+s*u*S-i*h*S)+w*(+t*h*S-t*d*v+o*l*v-s*l*S+s*d*m-o*h*m)+A*(+t*d*_-t*u*S-o*l*_+i*l*S+o*u*m-i*d*m)+k*(-s*u*m-t*h*_+t*u*v+s*l*_-i*l*v+i*h*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],d=e[7],m=e[8],_=e[9],v=e[10],S=e[11],x=e[12],w=e[13],A=e[14],k=e[15],O=_*A*d-w*v*d+w*h*S-u*A*S-_*h*k+u*v*k,D=x*v*d-m*A*d-x*h*S+l*A*S+m*h*k-l*v*k,L=m*w*d-x*_*d+x*u*S-l*w*S-m*u*k+l*_*k,z=x*_*h-m*w*h-x*u*v+l*w*v+m*u*A-l*_*A,H=t*O+i*D+s*L+o*z;if(H===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const U=1/H;return e[0]=O*U,e[1]=(w*v*o-_*A*o-w*s*S+i*A*S+_*s*k-i*v*k)*U,e[2]=(u*A*o-w*h*o+w*s*d-i*A*d-u*s*k+i*h*k)*U,e[3]=(_*h*o-u*v*o-_*s*d+i*v*d+u*s*S-i*h*S)*U,e[4]=D*U,e[5]=(m*A*o-x*v*o+x*s*S-t*A*S-m*s*k+t*v*k)*U,e[6]=(x*h*o-l*A*o-x*s*d+t*A*d+l*s*k-t*h*k)*U,e[7]=(l*v*o-m*h*o+m*s*d-t*v*d-l*s*S+t*h*S)*U,e[8]=L*U,e[9]=(x*_*o-m*w*o-x*i*S+t*w*S+m*i*k-t*_*k)*U,e[10]=(l*w*o-x*u*o+x*i*d-t*w*d-l*i*k+t*u*k)*U,e[11]=(m*u*o-l*_*o-m*i*d+t*_*d+l*i*S-t*u*S)*U,e[12]=z*U,e[13]=(m*w*s-x*_*s+x*i*v-t*w*v-m*i*A+t*_*A)*U,e[14]=(x*u*s-l*w*s-x*i*h+t*w*h+l*i*A-t*u*A)*U,e[15]=(l*_*s-m*u*s+m*i*h-t*_*h-l*i*v+t*u*v)*U,this}scale(e){const t=this.elements,i=e.x,s=e.y,o=e.z;return t[0]*=i,t[4]*=s,t[8]*=o,t[1]*=i,t[5]*=s,t[9]*=o,t[2]*=i,t[6]*=s,t[10]*=o,t[3]*=i,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),o=1-i,l=e.x,u=e.y,h=e.z,d=o*l,m=o*u;return this.set(d*l+i,d*u-s*h,d*h+s*u,0,d*u+s*h,m*u+i,m*h-s*l,0,d*h-s*u,m*h+s*l,o*h*h+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,o,l){return this.set(1,i,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,o=t._x,l=t._y,u=t._z,h=t._w,d=o+o,m=l+l,_=u+u,v=o*d,S=o*m,x=o*_,w=l*m,A=l*_,k=u*_,O=h*d,D=h*m,L=h*_,z=i.x,H=i.y,U=i.z;return s[0]=(1-(w+k))*z,s[1]=(S+L)*z,s[2]=(x-D)*z,s[3]=0,s[4]=(S-L)*H,s[5]=(1-(v+k))*H,s[6]=(A+O)*H,s[7]=0,s[8]=(x+D)*U,s[9]=(A-O)*U,s[10]=(1-(v+w))*U,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let o=c1.set(s[0],s[1],s[2]).length();const l=c1.set(s[4],s[5],s[6]).length(),u=c1.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],qm.copy(this);const d=1/o,m=1/l,_=1/u;return qm.elements[0]*=d,qm.elements[1]*=d,qm.elements[2]*=d,qm.elements[4]*=m,qm.elements[5]*=m,qm.elements[6]*=m,qm.elements[8]*=_,qm.elements[9]*=_,qm.elements[10]*=_,t.setFromRotationMatrix(qm),i.x=o,i.y=l,i.z=u,this}makePerspective(e,t,i,s,o,l,u=Fy){const h=this.elements,d=2*o/(t-e),m=2*o/(i-s),_=(t+e)/(t-e),v=(i+s)/(i-s);let S,x;if(u===Fy)S=-(l+o)/(l-o),x=-2*l*o/(l-o);else if(u===ZL)S=-l/(l-o),x=-l*o/(l-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return h[0]=d,h[4]=0,h[8]=_,h[12]=0,h[1]=0,h[5]=m,h[9]=v,h[13]=0,h[2]=0,h[6]=0,h[10]=S,h[14]=x,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,i,s,o,l,u=Fy){const h=this.elements,d=1/(t-e),m=1/(i-s),_=1/(l-o),v=(t+e)*d,S=(i+s)*m;let x,w;if(u===Fy)x=(l+o)*_,w=-2*_;else if(u===ZL)x=o*_,w=-1*_;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return h[0]=2*d,h[4]=0,h[8]=0,h[12]=-v,h[1]=0,h[5]=2*m,h[9]=0,h[13]=-S,h[2]=0,h[6]=0,h[10]=w,h[14]=-x,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const c1=new Mt,qm=new qi,pZ=new Mt(0,0,0),fZ=new Mt(1,1,1),D_=new Mt,qw=new Mt,pf=new Mt,AU=new qi,IU=new Vo;class Eb{constructor(e=0,t=0,i=0,s=Eb.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],h=s[1],d=s[5],m=s[9],_=s[2],v=s[6],S=s[10];switch(t){case"XYZ":this._y=Math.asin(Md(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,S),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(v,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Md(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(u,S),this._z=Math.atan2(h,d)):(this._y=Math.atan2(-_,o),this._z=0);break;case"ZXY":this._x=Math.asin(Md(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-_,S),this._z=Math.atan2(-l,d)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-Md(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(v,S),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,d));break;case"YZX":this._z=Math.asin(Md(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-m,d),this._y=Math.atan2(-_,o)):(this._x=0,this._y=Math.atan2(u,S));break;case"XZY":this._z=Math.asin(-Md(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(v,d),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-m,S),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return AU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(AU,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return IU.setFromEuler(this),this.setFromQuaternion(IU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Eb.DEFAULT_ORDER="XYZ";class BM{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let mZ=0;const RU=new Mt,h1=new Vo,R0=new qi,Zw=new Mt,EE=new Mt,gZ=new Mt,_Z=new Vo,kU=new Mt(1,0,0),OU=new Mt(0,1,0),LU=new Mt(0,0,1),vZ={type:"added"},yZ={type:"removed"},Zk={type:"childadded",child:null},e2={type:"childremoved",child:null};class Vu extends $I{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:mZ++}),this.uuid=pg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Vu.DEFAULT_UP.clone();const e=new Mt,t=new Eb,i=new Vo,s=new Mt(1,1,1);function o(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(o),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new qi},normalMatrix:{value:new o_}}),this.matrix=new qi,this.matrixWorld=new qi,this.matrixAutoUpdate=Vu.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Vu.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new BM,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return h1.setFromAxisAngle(e,t),this.quaternion.multiply(h1),this}rotateOnWorldAxis(e,t){return h1.setFromAxisAngle(e,t),this.quaternion.premultiply(h1),this}rotateX(e){return this.rotateOnAxis(kU,e)}rotateY(e){return this.rotateOnAxis(OU,e)}rotateZ(e){return this.rotateOnAxis(LU,e)}translateOnAxis(e,t){return RU.copy(e).applyQuaternion(this.quaternion),this.position.add(RU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(kU,e)}translateY(e){return this.translateOnAxis(OU,e)}translateZ(e){return this.translateOnAxis(LU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(R0.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Zw.copy(e):Zw.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),EE.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?R0.lookAt(EE,Zw,this.up):R0.lookAt(Zw,EE,this.up),this.quaternion.setFromRotationMatrix(R0),s&&(R0.extractRotation(s.matrixWorld),h1.setFromRotationMatrix(R0),this.quaternion.premultiply(h1.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(vZ),Zk.child=e,this.dispatchEvent(Zk),Zk.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(yZ),e2.child=e,this.dispatchEvent(e2),e2.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),R0.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),R0.multiply(e.parent.matrixWorld)),e.applyMatrix4(R0),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const l=this.children[i].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(EE,e,gZ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(EE,_Z,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++){const o=t[i];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++){const u=s[o];u.matrixWorldAutoUpdate===!0&&u.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let d=0,m=h.length;d<m;d++){const _=h[d];o(e.shapes,_)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,d=this.material.length;h<d;h++)u.push(o(e.materials,this.material[h]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];s.animations.push(o(e.animations,h))}}if(t){const u=l(e.geometries),h=l(e.materials),d=l(e.textures),m=l(e.images),_=l(e.shapes),v=l(e.skeletons),S=l(e.animations),x=l(e.nodes);u.length>0&&(i.geometries=u),h.length>0&&(i.materials=h),d.length>0&&(i.textures=d),m.length>0&&(i.images=m),_.length>0&&(i.shapes=_),v.length>0&&(i.skeletons=v),S.length>0&&(i.animations=S),x.length>0&&(i.nodes=x)}return i.object=s,i;function l(u){const h=[];for(const d in u){const m=u[d];delete m.metadata,h.push(m)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}Vu.DEFAULT_UP=new Mt(0,1,0);Vu.DEFAULT_MATRIX_AUTO_UPDATE=!0;Vu.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Zm=new Mt,k0=new Mt,t2=new Mt,O0=new Mt,d1=new Mt,p1=new Mt,DU=new Mt,n2=new Mt,r2=new Mt,i2=new Mt;class Yg{constructor(e=new Mt,t=new Mt,i=new Mt){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Zm.subVectors(e,t),s.cross(Zm);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,i,s,o){Zm.subVectors(s,t),k0.subVectors(i,t),t2.subVectors(e,t);const l=Zm.dot(Zm),u=Zm.dot(k0),h=Zm.dot(t2),d=k0.dot(k0),m=k0.dot(t2),_=l*d-u*u;if(_===0)return o.set(0,0,0),null;const v=1/_,S=(d*h-u*m)*v,x=(l*m-u*h)*v;return o.set(1-S-x,x,S)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,O0)===null?!1:O0.x>=0&&O0.y>=0&&O0.x+O0.y<=1}static getInterpolation(e,t,i,s,o,l,u,h){return this.getBarycoord(e,t,i,s,O0)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(o,O0.x),h.addScaledVector(l,O0.y),h.addScaledVector(u,O0.z),h)}static isFrontFacing(e,t,i,s){return Zm.subVectors(i,t),k0.subVectors(e,t),Zm.cross(k0).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zm.subVectors(this.c,this.b),k0.subVectors(this.a,this.b),Zm.cross(k0).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Yg.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Yg.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,o){return Yg.getInterpolation(e,this.a,this.b,this.c,t,i,s,o)}containsPoint(e){return Yg.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Yg.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,o=this.c;let l,u;d1.subVectors(s,i),p1.subVectors(o,i),n2.subVectors(e,i);const h=d1.dot(n2),d=p1.dot(n2);if(h<=0&&d<=0)return t.copy(i);r2.subVectors(e,s);const m=d1.dot(r2),_=p1.dot(r2);if(m>=0&&_<=m)return t.copy(s);const v=h*_-m*d;if(v<=0&&h>=0&&m<=0)return l=h/(h-m),t.copy(i).addScaledVector(d1,l);i2.subVectors(e,o);const S=d1.dot(i2),x=p1.dot(i2);if(x>=0&&S<=x)return t.copy(o);const w=S*d-h*x;if(w<=0&&d>=0&&x<=0)return u=d/(d-x),t.copy(i).addScaledVector(p1,u);const A=m*x-S*_;if(A<=0&&_-m>=0&&S-x>=0)return DU.subVectors(o,s),u=(_-m)/(_-m+(S-x)),t.copy(s).addScaledVector(DU,u);const k=1/(A+w+v);return l=w*k,u=v*k,t.copy(i).addScaledVector(d1,l).addScaledVector(p1,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const cV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},N_={h:0,s:0,l:0},eC={h:0,s:0,l:0};function s2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class gc{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=q_){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Jm.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=Jm.workingColorSpace){return this.r=e,this.g=t,this.b=i,Jm.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=Jm.workingColorSpace){if(e=$B(e,1),t=Md(t,0,1),i=Md(i,0,1),t===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,l=2*i-o;this.r=s2(l,o,e+1/3),this.g=s2(l,o,e),this.b=s2(l,o,e-1/3)}return Jm.toWorkingColorSpace(this,s),this}setStyle(e,t=q_){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=q_){const i=cV[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=TT(e.r),this.g=TT(e.g),this.b=TT(e.b),this}copyLinearToSRGB(e){return this.r=Vk(e.r),this.g=Vk(e.g),this.b=Vk(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=q_){return Jm.fromWorkingColorSpace(Td.copy(this),e),Math.round(Md(Td.r*255,0,255))*65536+Math.round(Md(Td.g*255,0,255))*256+Math.round(Md(Td.b*255,0,255))}getHexString(e=q_){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Jm.workingColorSpace){Jm.fromWorkingColorSpace(Td.copy(this),t);const i=Td.r,s=Td.g,o=Td.b,l=Math.max(i,s,o),u=Math.min(i,s,o);let h,d;const m=(u+l)/2;if(u===l)h=0,d=0;else{const _=l-u;switch(d=m<=.5?_/(l+u):_/(2-l-u),l){case i:h=(s-o)/_+(s<o?6:0);break;case s:h=(o-i)/_+2;break;case o:h=(i-s)/_+4;break}h/=6}return e.h=h,e.s=d,e.l=m,e}getRGB(e,t=Jm.workingColorSpace){return Jm.fromWorkingColorSpace(Td.copy(this),t),e.r=Td.r,e.g=Td.g,e.b=Td.b,e}getStyle(e=q_){Jm.fromWorkingColorSpace(Td.copy(this),e);const t=Td.r,i=Td.g,s=Td.b;return e!==q_?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(N_),this.setHSL(N_.h+e,N_.s+t,N_.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(N_),e.getHSL(eC);const i=T$(N_.h,eC.h,t),s=T$(N_.s,eC.s,t),o=T$(N_.l,eC.l,t);return this.setHSL(i,s,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*s,this.g=o[1]*t+o[4]*i+o[7]*s,this.b=o[2]*t+o[5]*i+o[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Td=new gc;gc.NAMES=cV;let bZ=0;class _v extends $I{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:bZ++}),this.uuid=pg(),this.name="",this.type="Material",this.blending=cU,this.side=kA,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=dU,this.blendDst=pU,this.blendEquation=hU,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new gc(0,0,0),this.blendAlpha=0,this.depthFunc=fU,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=EU,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=s1,this.stencilZFail=s1,this.stencilZPass=s1,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==cU&&(i.blending=this.blending),this.side!==kA&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==dU&&(i.blendSrc=this.blendSrc),this.blendDst!==pU&&(i.blendDst=this.blendDst),this.blendEquation!==hU&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==fU&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==EU&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==s1&&(i.stencilFail=this.stencilFail),this.stencilZFail!==s1&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==s1&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(o){const l=[];for(const u in o){const h=o[u];delete h.metadata,l.push(h)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(i.textures=o),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class uT extends _v{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new gc(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Eb,this.combine=Iq,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const hc=new Mt,tC=new Bl;class xf{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=qL,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=TB,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return uV("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)tC.fromBufferAttribute(this,t),tC.applyMatrix3(e),this.setXY(t,tC.x,tC.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)hc.fromBufferAttribute(this,t),hc.applyMatrix3(e),this.setXYZ(t,hc.x,hc.y,hc.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)hc.fromBufferAttribute(this,t),hc.applyMatrix4(e),this.setXYZ(t,hc.x,hc.y,hc.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)hc.fromBufferAttribute(this,t),hc.applyNormalMatrix(e),this.setXYZ(t,hc.x,hc.y,hc.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)hc.fromBufferAttribute(this,t),hc.transformDirection(e),this.setXYZ(t,hc.x,hc.y,hc.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ag(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=go(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ag(t,this.array)),t}setX(e,t){return this.normalized&&(t=go(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ag(t,this.array)),t}setY(e,t){return this.normalized&&(t=go(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ag(t,this.array)),t}setZ(e,t){return this.normalized&&(t=go(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ag(t,this.array)),t}setW(e,t){return this.normalized&&(t=go(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=go(t,this.array),i=go(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=go(t,this.array),i=go(i,this.array),s=go(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e*=this.itemSize,this.normalized&&(t=go(t,this.array),i=go(i,this.array),s=go(s,this.array),o=go(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==qL&&(e.usage=this.usage),e}}class TZ extends xf{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class SZ extends xf{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class xB extends xf{constructor(e,t,i){super(new Float32Array(e),t,i)}}let EZ=0;const im=new qi,o2=new Vu,f1=new Mt,ff=new a_,$E=new a_,hh=new Mt;class kv extends $I{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:EZ++}),this.uuid=pg(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(oZ(e)?SZ:TZ)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new o_().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return im.makeRotationFromQuaternion(e),this.applyMatrix4(im),this}rotateX(e){return im.makeRotationX(e),this.applyMatrix4(im),this}rotateY(e){return im.makeRotationY(e),this.applyMatrix4(im),this}rotateZ(e){return im.makeRotationZ(e),this.applyMatrix4(im),this}translate(e,t,i){return im.makeTranslation(e,t,i),this.applyMatrix4(im),this}scale(e,t,i){return im.makeScale(e,t,i),this.applyMatrix4(im),this}lookAt(e){return o2.lookAt(e),o2.updateMatrix(),this.applyMatrix4(o2.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(f1).negate(),this.translate(f1.x,f1.y,f1.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new xB(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new a_);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Mt(-1/0,-1/0,-1/0),new Mt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const o=t[i];ff.setFromBufferAttribute(o),this.morphTargetsRelative?(hh.addVectors(this.boundingBox.min,ff.min),this.boundingBox.expandByPoint(hh),hh.addVectors(this.boundingBox.max,ff.max),this.boundingBox.expandByPoint(hh)):(this.boundingBox.expandByPoint(ff.min),this.boundingBox.expandByPoint(ff.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new l0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Mt,1/0);return}if(e){const i=this.boundingSphere.center;if(ff.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];$E.setFromBufferAttribute(u),this.morphTargetsRelative?(hh.addVectors(ff.min,$E.min),ff.expandByPoint(hh),hh.addVectors(ff.max,$E.max),ff.expandByPoint(hh)):(ff.expandByPoint($E.min),ff.expandByPoint($E.max))}ff.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)hh.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(hh));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],h=this.morphTargetsRelative;for(let d=0,m=u.count;d<m;d++)hh.fromBufferAttribute(u,d),h&&(f1.fromBufferAttribute(e,d),hh.add(f1)),s=Math.max(s,i.distanceToSquared(hh))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new xf(new Float32Array(4*i.count),4));const l=this.getAttribute("tangent"),u=[],h=[];for(let P=0;P<i.count;P++)u[P]=new Mt,h[P]=new Mt;const d=new Mt,m=new Mt,_=new Mt,v=new Bl,S=new Bl,x=new Bl,w=new Mt,A=new Mt;function k(P,K,ee){d.fromBufferAttribute(i,P),m.fromBufferAttribute(i,K),_.fromBufferAttribute(i,ee),v.fromBufferAttribute(o,P),S.fromBufferAttribute(o,K),x.fromBufferAttribute(o,ee),m.sub(d),_.sub(d),S.sub(v),x.sub(v);const re=1/(S.x*x.y-x.x*S.y);isFinite(re)&&(w.copy(m).multiplyScalar(x.y).addScaledVector(_,-S.y).multiplyScalar(re),A.copy(_).multiplyScalar(S.x).addScaledVector(m,-x.x).multiplyScalar(re),u[P].add(w),u[K].add(w),u[ee].add(w),h[P].add(A),h[K].add(A),h[ee].add(A))}let O=this.groups;O.length===0&&(O=[{start:0,count:e.count}]);for(let P=0,K=O.length;P<K;++P){const ee=O[P],re=ee.start,ie=ee.count;for(let de=re,oe=re+ie;de<oe;de+=3)k(e.getX(de+0),e.getX(de+1),e.getX(de+2))}const D=new Mt,L=new Mt,z=new Mt,H=new Mt;function U(P){z.fromBufferAttribute(s,P),H.copy(z);const K=u[P];D.copy(K),D.sub(z.multiplyScalar(z.dot(K))).normalize(),L.crossVectors(H,K);const re=L.dot(h[P])<0?-1:1;l.setXYZW(P,D.x,D.y,D.z,re)}for(let P=0,K=O.length;P<K;++P){const ee=O[P],re=ee.start,ie=ee.count;for(let de=re,oe=re+ie;de<oe;de+=3)U(e.getX(de+0)),U(e.getX(de+1)),U(e.getX(de+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new xf(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,S=i.count;v<S;v++)i.setXYZ(v,0,0,0);const s=new Mt,o=new Mt,l=new Mt,u=new Mt,h=new Mt,d=new Mt,m=new Mt,_=new Mt;if(e)for(let v=0,S=e.count;v<S;v+=3){const x=e.getX(v+0),w=e.getX(v+1),A=e.getX(v+2);s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,w),l.fromBufferAttribute(t,A),m.subVectors(l,o),_.subVectors(s,o),m.cross(_),u.fromBufferAttribute(i,x),h.fromBufferAttribute(i,w),d.fromBufferAttribute(i,A),u.add(m),h.add(m),d.add(m),i.setXYZ(x,u.x,u.y,u.z),i.setXYZ(w,h.x,h.y,h.z),i.setXYZ(A,d.x,d.y,d.z)}else for(let v=0,S=t.count;v<S;v+=3)s.fromBufferAttribute(t,v+0),o.fromBufferAttribute(t,v+1),l.fromBufferAttribute(t,v+2),m.subVectors(l,o),_.subVectors(s,o),m.cross(_),i.setXYZ(v+0,m.x,m.y,m.z),i.setXYZ(v+1,m.x,m.y,m.z),i.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)hh.fromBufferAttribute(e,t),hh.normalize(),e.setXYZ(t,hh.x,hh.y,hh.z)}toNonIndexed(){function e(u,h){const d=u.array,m=u.itemSize,_=u.normalized,v=new d.constructor(h.length*m);let S=0,x=0;for(let w=0,A=h.length;w<A;w++){u.isInterleavedBufferAttribute?S=h[w]*u.data.stride+u.offset:S=h[w]*m;for(let k=0;k<m;k++)v[x++]=d[S++]}return new xf(v,m,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new kv,i=this.index.array,s=this.attributes;for(const u in s){const h=s[u],d=e(h,i);t.setAttribute(u,d)}const o=this.morphAttributes;for(const u in o){const h=[],d=o[u];for(let m=0,_=d.length;m<_;m++){const v=d[m],S=e(v,i);h.push(S)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,h=l.length;u<h;u++){const d=l[u];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const d in h)h[d]!==void 0&&(e[d]=h[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const h in i){const d=i[h];e.data.attributes[h]=d.toJSON(e.data)}const s={};let o=!1;for(const h in this.morphAttributes){const d=this.morphAttributes[h],m=[];for(let _=0,v=d.length;_<v;_++){const S=d[_];m.push(S.toJSON(e.data))}m.length>0&&(s[h]=m,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const d in s){const m=s[d];this.setAttribute(d,m.clone(t))}const o=e.morphAttributes;for(const d in o){const m=[],_=o[d];for(let v=0,S=_.length;v<S;v++)m.push(_[v].clone(t));this.morphAttributes[d]=m}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let d=0,m=l.length;d<m;d++){const _=l[d];this.addGroup(_.start,_.count,_.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const NU=new qi,oy=new xI,nC=new l0,BU=new Mt,m1=new Mt,g1=new Mt,_1=new Mt,a2=new Mt,rC=new Mt,iC=new Bl,sC=new Bl,oC=new Bl,PU=new Mt,FU=new Mt,UU=new Mt,aC=new Mt,lC=new Mt;class wI extends Vu{constructor(e=new kv,t=new uT){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,o=i.morphAttributes.position,l=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const u=this.morphTargetInfluences;if(o&&u){rC.set(0,0,0);for(let h=0,d=o.length;h<d;h++){const m=u[h],_=o[h];m!==0&&(a2.fromBufferAttribute(_,e),l?rC.addScaledVector(a2,m):rC.addScaledVector(a2.sub(t),m))}t.add(rC)}return t}raycast(e,t){const i=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),nC.copy(i.boundingSphere),nC.applyMatrix4(o),oy.copy(e.ray).recast(e.near),!(nC.containsPoint(oy.origin)===!1&&(oy.intersectSphere(nC,BU)===null||oy.origin.distanceToSquared(BU)>(e.far-e.near)**2))&&(NU.copy(o).invert(),oy.copy(e.ray).applyMatrix4(NU),!(i.boundingBox!==null&&oy.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,oy)))}_computeIntersections(e,t,i){let s;const o=this.geometry,l=this.material,u=o.index,h=o.attributes.position,d=o.attributes.uv,m=o.attributes.uv1,_=o.attributes.normal,v=o.groups,S=o.drawRange;if(u!==null)if(Array.isArray(l))for(let x=0,w=v.length;x<w;x++){const A=v[x],k=l[A.materialIndex],O=Math.max(A.start,S.start),D=Math.min(u.count,Math.min(A.start+A.count,S.start+S.count));for(let L=O,z=D;L<z;L+=3){const H=u.getX(L),U=u.getX(L+1),P=u.getX(L+2);s=uC(this,k,e,i,d,m,_,H,U,P),s&&(s.faceIndex=Math.floor(L/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const x=Math.max(0,S.start),w=Math.min(u.count,S.start+S.count);for(let A=x,k=w;A<k;A+=3){const O=u.getX(A),D=u.getX(A+1),L=u.getX(A+2);s=uC(this,l,e,i,d,m,_,O,D,L),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}else if(h!==void 0)if(Array.isArray(l))for(let x=0,w=v.length;x<w;x++){const A=v[x],k=l[A.materialIndex],O=Math.max(A.start,S.start),D=Math.min(h.count,Math.min(A.start+A.count,S.start+S.count));for(let L=O,z=D;L<z;L+=3){const H=L,U=L+1,P=L+2;s=uC(this,k,e,i,d,m,_,H,U,P),s&&(s.faceIndex=Math.floor(L/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const x=Math.max(0,S.start),w=Math.min(h.count,S.start+S.count);for(let A=x,k=w;A<k;A+=3){const O=A,D=A+1,L=A+2;s=uC(this,l,e,i,d,m,_,O,D,L),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}}}function $Z(n,e,t,i,s,o,l,u){let h;if(e.side===Mq?h=i.intersectTriangle(l,o,s,!0,u):h=i.intersectTriangle(s,o,l,e.side===kA,u),h===null)return null;lC.copy(u),lC.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(lC);return d<t.near||d>t.far?null:{distance:d,point:lC.clone(),object:n}}function uC(n,e,t,i,s,o,l,u,h,d){n.getVertexPosition(u,m1),n.getVertexPosition(h,g1),n.getVertexPosition(d,_1);const m=$Z(n,e,t,i,m1,g1,_1,aC);if(m){s&&(iC.fromBufferAttribute(s,u),sC.fromBufferAttribute(s,h),oC.fromBufferAttribute(s,d),m.uv=Yg.getInterpolation(aC,m1,g1,_1,iC,sC,oC,new Bl)),o&&(iC.fromBufferAttribute(o,u),sC.fromBufferAttribute(o,h),oC.fromBufferAttribute(o,d),m.uv1=Yg.getInterpolation(aC,m1,g1,_1,iC,sC,oC,new Bl)),l&&(PU.fromBufferAttribute(l,u),FU.fromBufferAttribute(l,h),UU.fromBufferAttribute(l,d),m.normal=Yg.getInterpolation(aC,m1,g1,_1,PU,FU,UU,new Mt),m.normal.dot(i.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:d,normal:new Mt,materialIndex:0};Yg.getNormal(m1,g1,_1,_.normal),m.face=_}return m}class hV extends Vu{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qi,this.projectionMatrix=new qi,this.projectionMatrixInverse=new qi,this.coordinateSystem=Fy}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const B_=new Mt,zU=new Bl,HU=new Bl;class wB extends hV{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Q$*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(b$*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Q$*2*Math.atan(Math.tan(b$*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){B_.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(B_.x,B_.y).multiplyScalar(-e/B_.z),B_.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(B_.x,B_.y).multiplyScalar(-e/B_.z)}getViewSize(e,t){return this.getViewBounds(e,zU,HU),t.subVectors(HU,zU)}setViewOffset(e,t,i,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(b$*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,d=l.fullHeight;o+=l.offsetX*s/h,t-=l.offsetY*i/d,s*=l.width/h,i*=l.height/d}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const l2=new Mt,xZ=new Mt,wZ=new o_;class v1{constructor(e=new Mt(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=l2.subVectors(i,t).cross(xZ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(l2),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||wZ.getNormalMatrix(e),s=this.coplanarPoint(l2).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ay=new l0,cC=new Mt;class CZ{constructor(e=new v1,t=new v1,i=new v1,s=new v1,o=new v1,l=new v1){this.planes=[e,t,i,s,o,l]}set(e,t,i,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Fy){const i=this.planes,s=e.elements,o=s[0],l=s[1],u=s[2],h=s[3],d=s[4],m=s[5],_=s[6],v=s[7],S=s[8],x=s[9],w=s[10],A=s[11],k=s[12],O=s[13],D=s[14],L=s[15];if(i[0].setComponents(h-o,v-d,A-S,L-k).normalize(),i[1].setComponents(h+o,v+d,A+S,L+k).normalize(),i[2].setComponents(h+l,v+m,A+x,L+O).normalize(),i[3].setComponents(h-l,v-m,A-x,L-O).normalize(),i[4].setComponents(h-u,v-_,A-w,L-D).normalize(),t===Fy)i[5].setComponents(h+u,v+_,A+w,L+D).normalize();else if(t===ZL)i[5].setComponents(u,_,w,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ay.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ay.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ay)}intersectsSprite(e){return ay.center.set(0,0,0),ay.radius=.7071067811865476,ay.applyMatrix4(e.matrixWorld),this.intersectsSphere(ay)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(cC.x=s.normal.x>0?e.max.x:e.min.x,cC.y=s.normal.y>0?e.max.y:e.min.y,cC.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(cC)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class dV extends hV{constructor(e=-1,t=1,i=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-e,l=i+e,u=s+t,h=s-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=d*this.view.offsetX,l=o+d*this.view.width,u-=m*this.view.offsetY,h=u-m*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class MZ extends $f{constructor(e,t,i,s,o,l,u,h,d,m){if(m=m!==void 0?m:Hk,m!==Hk&&m!==gU)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&m===Hk&&(i=Dq),i===void 0&&m===gU&&(i=Nq),super(null,s,o,l,u,h,m,i,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:K$,this.minFilter=h!==void 0?h:K$,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const AZ=new MZ(1,1);AZ.compareFunction=Hq;class u2 extends Vu{constructor(){super(),this.isGroup=!0,this.type="Group"}}class IZ{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=qL,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=pg()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return uV("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=pg()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=pg()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Kd=new Mt;class CB{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Kd.fromBufferAttribute(this,t),Kd.applyMatrix4(e),this.setXYZ(t,Kd.x,Kd.y,Kd.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Kd.fromBufferAttribute(this,t),Kd.applyNormalMatrix(e),this.setXYZ(t,Kd.x,Kd.y,Kd.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Kd.fromBufferAttribute(this,t),Kd.transformDirection(e),this.setXYZ(t,Kd.x,Kd.y,Kd.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=ag(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=go(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=go(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=go(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=go(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=go(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ag(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ag(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ag(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ag(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=go(t,this.array),i=go(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=go(t,this.array),i=go(i,this.array),s=go(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=go(t,this.array),i=go(i,this.array),s=go(s,this.array),o=go(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new xf(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new CB(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const GU=new Mt,WU=new gm,VU=new gm,RZ=new Mt,jU=new qi,hC=new Mt,c2=new l0,XU=new qi,h2=new xI;class kZ extends wI{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=mU,this.bindMatrix=new qi,this.bindMatrixInverse=new qi,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new a_),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,hC),this.boundingBox.expandByPoint(hC)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new l0),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,hC),this.boundingSphere.expandByPoint(hC)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),c2.copy(this.boundingSphere),c2.applyMatrix4(s),e.ray.intersectsSphere(c2)!==!1&&(XU.copy(s).invert(),h2.copy(e.ray).applyMatrix4(XU),!(this.boundingBox!==null&&h2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,h2)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new gm,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===mU?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Rq?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;WU.fromBufferAttribute(s.attributes.skinIndex,e),VU.fromBufferAttribute(s.attributes.skinWeight,e),GU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=VU.getComponent(o);if(l!==0){const u=WU.getComponent(o);jU.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(RZ.copy(GU).applyMatrix4(jU),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class pV extends Vu{constructor(){super(),this.isBone=!0,this.type="Bone"}}class fV extends $f{constructor(e=null,t=1,i=1,s,o,l,u,h,d=K$,m=K$,_,v){super(null,l,u,h,d,m,s,o,_,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const YU=new qi,OZ=new qi;class MB{constructor(e=[],t=[]){this.uuid=pg(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new qi)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new qi;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:OZ;YU.multiplyMatrices(u,t[o]),YU.toArray(i,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new MB(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new fV(t,e,e,SB,TB);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const o=e.bones[i];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new pV),this.bones.push(l),this.boneInverses.push(new qi().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=i[s];e.boneInverses.push(u.toArray())}return e}}class KU extends xf{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const y1=new qi,JU=new qi,dC=[],QU=new a_,LZ=new qi,xE=new wI,wE=new l0;class DZ extends wI{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new KU(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,LZ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new a_),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,y1),QU.copy(e.boundingBox).applyMatrix4(y1),this.boundingBox.union(QU)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new l0),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,y1),wE.copy(e.boundingSphere).applyMatrix4(y1),this.boundingSphere.union(wE)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,o=i.length+1,l=e*o+1;for(let u=0;u<i.length;u++)i[u]=s[l+u]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(xE.geometry=this.geometry,xE.material=this.material,xE.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),wE.copy(this.boundingSphere),wE.applyMatrix4(i),e.ray.intersectsSphere(wE)!==!1))for(let o=0;o<s;o++){this.getMatrixAt(o,y1),JU.multiplyMatrices(i,y1),xE.matrixWorld=JU,xE.raycast(e,dC);for(let l=0,u=dC.length;l<u;l++){const h=dC[l];h.instanceId=o,h.object=this,t.push(h)}dC.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new KU(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new fV(new Float32Array(s*this.count),s,this.count,Bq,TB));const o=this.morphTexture.source.data.data;let l=0;for(let d=0;d<i.length;d++)l+=i[d];const u=this.geometry.morphTargetsRelative?1:1-l,h=s*e;o[h]=u,o.set(i,h+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class mV extends _v{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new gc(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const qU=new Mt,ZU=new Mt,ez=new qi,d2=new xI,pC=new l0;class AB extends Vu{constructor(e=new kv,t=new mV){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,o=t.count;s<o;s++)qU.fromBufferAttribute(t,s-1),ZU.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=qU.distanceTo(ZU);e.setAttribute("lineDistance",new xB(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),pC.copy(i.boundingSphere),pC.applyMatrix4(s),pC.radius+=o,e.ray.intersectsSphere(pC)===!1)return;ez.copy(s).invert(),d2.copy(e.ray).applyMatrix4(ez);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,d=new Mt,m=new Mt,_=new Mt,v=new Mt,S=this.isLineSegments?2:1,x=i.index,A=i.attributes.position;if(x!==null){const k=Math.max(0,l.start),O=Math.min(x.count,l.start+l.count);for(let D=k,L=O-1;D<L;D+=S){const z=x.getX(D),H=x.getX(D+1);if(d.fromBufferAttribute(A,z),m.fromBufferAttribute(A,H),d2.distanceSqToSegment(d,m,v,_)>h)continue;v.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(v);P<e.near||P>e.far||t.push({distance:P,point:_.clone().applyMatrix4(this.matrixWorld),index:D,face:null,faceIndex:null,object:this})}}else{const k=Math.max(0,l.start),O=Math.min(A.count,l.start+l.count);for(let D=k,L=O-1;D<L;D+=S){if(d.fromBufferAttribute(A,D),m.fromBufferAttribute(A,D+1),d2.distanceSqToSegment(d,m,v,_)>h)continue;v.applyMatrix4(this.matrixWorld);const H=e.ray.origin.distanceTo(v);H<e.near||H>e.far||t.push({distance:H,point:_.clone().applyMatrix4(this.matrixWorld),index:D,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}const tz=new Mt,nz=new Mt;class NZ extends AB{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,o=t.count;s<o;s+=2)tz.fromBufferAttribute(t,s),nz.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+tz.distanceTo(nz);e.setAttribute("lineDistance",new xB(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class BZ extends AB{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class gV extends _v{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new gc(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const rz=new qi,tD=new xI,fC=new l0,mC=new Mt;class PZ extends Vu{constructor(e=new kv,t=new gV){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),fC.copy(i.boundingSphere),fC.applyMatrix4(s),fC.radius+=o,e.ray.intersectsSphere(fC)===!1)return;rz.copy(s).invert(),tD.copy(e.ray).applyMatrix4(rz);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,d=i.index,_=i.attributes.position;if(d!==null){const v=Math.max(0,l.start),S=Math.min(d.count,l.start+l.count);for(let x=v,w=S;x<w;x++){const A=d.getX(x);mC.fromBufferAttribute(_,A),iz(mC,A,h,s,e,t,this)}}else{const v=Math.max(0,l.start),S=Math.min(_.count,l.start+l.count);for(let x=v,w=S;x<w;x++)mC.fromBufferAttribute(_,x),iz(mC,x,h,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}function iz(n,e,t,i,s,o,l){const u=tD.distanceSqToPoint(n);if(u<t){const h=new Mt;tD.closestPointToPoint(n,h),h.applyMatrix4(i);const d=s.ray.origin.distanceTo(h);if(d<s.near||d>s.far)return;o.push({distance:d,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,object:l})}}class IB extends _v{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new gc(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uq,this.normalScale=new Bl(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Eb,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ov extends IB{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Bl(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Md(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new gc(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new gc(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new gc(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function gC(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function FZ(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function UZ(n){function e(s,o){return n[s]-n[o]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function sz(n,e,t){const i=n.length,s=new n.constructor(i);for(let o=0,l=0;l!==i;++o){const u=t[o]*e;for(let h=0;h!==e;++h)s[l++]=n[u+h]}return s}function _V(n,e,t,i){let s=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[s++];if(o===void 0)return;let l=o[i];if(l!==void 0)if(Array.isArray(l))do l=o[i],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=n[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[i],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=n[s++];while(o!==void 0);else do l=o[i],l!==void 0&&(e.push(o.time),t.push(l)),o=n[s++];while(o!==void 0)}class Ox{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],o=t[i-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=i+2;;){if(s===void 0){if(e<o)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(o=s,s=t[++i],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(i=2,o=u);for(let h=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===h)break;if(s=o,o=t[--i-1],e>=o)break t}l=i,i=0;break n}break e}for(;i<l;){const u=i+l>>>1;e<t[u]?l=u:i=u+1}if(s=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=i[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class zZ extends Ox{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:_U,endingEnd:_U}}intervalChanged_(e,t,i){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],h=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case vU:o=e,u=2*t-i;break;case yU:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=i}if(h===void 0)switch(this.getSettings_().endingEnd){case vU:l=e,h=2*i-t;break;case yU:l=1,h=i+s[1]-s[0];break;default:l=e-1,h=t}const d=(i-t)*.5,m=this.valueSize;this._weightPrev=d/(t-u),this._weightNext=d/(h-i),this._offsetPrev=o*m,this._offsetNext=l*m}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,d=h-u,m=this._offsetPrev,_=this._offsetNext,v=this._weightPrev,S=this._weightNext,x=(i-t)/(s-t),w=x*x,A=w*x,k=-v*A+2*v*w-v*x,O=(1+v)*A+(-1.5-2*v)*w+(-.5+v)*x+1,D=(-1-S)*A+(1.5+S)*w+.5*x,L=S*A-S*w;for(let z=0;z!==u;++z)o[z]=k*l[m+z]+O*l[d+z]+D*l[h+z]+L*l[_+z];return o}}class HZ extends Ox{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,d=h-u,m=(i-t)/(s-t),_=1-m;for(let v=0;v!==u;++v)o[v]=l[d+v]*_+l[h+v]*m;return o}}class GZ extends Ox{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class u0{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gC(t,this.TimeBufferType),this.values=gC(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:gC(e.times,Array),values:gC(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new GZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new HZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new zZ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case J$:t=this.InterpolantFactoryMethodDiscrete;break;case BT:t=this.InterpolantFactoryMethodLinear;break;case Gk:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return J$;case this.InterpolantFactoryMethodLinear:return BT;case this.InterpolantFactoryMethodSmooth:return Gk}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let o=0,l=s-1;for(;o!==s&&i[o]<e;)++o;for(;l!==-1&&i[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=i.slice(o,l),this.values=this.values.slice(o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const h=i[u];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,h),e=!1;break}if(l!==null&&l>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,h,l),e=!1;break}l=h}if(s!==void 0&&FZ(s))for(let u=0,h=s.length;u!==h;++u){const d=s[u];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===Gk,o=e.length-1;let l=1;for(let u=1;u<o;++u){let h=!1;const d=e[u],m=e[u+1];if(d!==m&&(u!==1||d!==e[0]))if(s)h=!0;else{const _=u*i,v=_-i,S=_+i;for(let x=0;x!==i;++x){const w=t[_+x];if(w!==t[v+x]||w!==t[S+x]){h=!0;break}}}if(h){if(u!==l){e[l]=e[u];const _=u*i,v=l*i;for(let S=0;S!==i;++S)t[v+S]=t[_+S]}++l}}if(o>0){e[l]=e[o];for(let u=o*i,h=l*i,d=0;d!==i;++d)t[h+d]=t[u+d];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}u0.prototype.TimeBufferType=Float32Array;u0.prototype.ValueBufferType=Float32Array;u0.prototype.DefaultInterpolation=BT;class uS extends u0{}uS.prototype.ValueTypeName="bool";uS.prototype.ValueBufferType=Array;uS.prototype.DefaultInterpolation=J$;uS.prototype.InterpolantFactoryMethodLinear=void 0;uS.prototype.InterpolantFactoryMethodSmooth=void 0;class vV extends u0{}vV.prototype.ValueTypeName="color";class q$ extends u0{}q$.prototype.ValueTypeName="number";class WZ extends Ox{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=(i-t)/(s-t);let d=e*u;for(let m=d+u;d!==m;d+=4)Vo.slerpFlat(o,0,l,d-u,l,d,h);return o}}class db extends u0{InterpolantFactoryMethodLinear(e){return new WZ(this.times,this.values,this.getValueSize(),e)}}db.prototype.ValueTypeName="quaternion";db.prototype.DefaultInterpolation=BT;db.prototype.InterpolantFactoryMethodSmooth=void 0;class cS extends u0{}cS.prototype.ValueTypeName="string";cS.prototype.ValueBufferType=Array;cS.prototype.DefaultInterpolation=J$;cS.prototype.InterpolantFactoryMethodLinear=void 0;cS.prototype.InterpolantFactoryMethodSmooth=void 0;class Z$ extends u0{}Z$.prototype.ValueTypeName="vector";class VZ{constructor(e,t=-1,i,s=Pq){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=pg(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let l=0,u=i.length;l!==u;++l)t.push(XZ(i[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=i.length;o!==l;++o)t.push(u0.toJSON(i[o]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const o=t.length,l=[];for(let u=0;u<o;u++){let h=[],d=[];h.push((u+o-1)%o,u,(u+1)%o),d.push(0,1,0);const m=UZ(h);h=sz(h,1,m),d=sz(d,1,m),!s&&h[0]===0&&(h.push(o),d.push(d[0])),l.push(new q$(".morphTargetInfluences["+t[u].name+"]",h,d).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const d=e[u],m=d.name.match(o);if(m&&m.length>1){const _=m[1];let v=s[_];v||(s[_]=v=[]),v.push(d)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,i));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(_,v,S,x,w){if(S.length!==0){const A=[],k=[];_V(S,A,k,x),A.length!==0&&w.push(new _(v,A,k))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let h=e.length||-1;const d=e.hierarchy||[];for(let _=0;_<d.length;_++){const v=d[_].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const S={};let x;for(x=0;x<v.length;x++)if(v[x].morphTargets)for(let w=0;w<v[x].morphTargets.length;w++)S[v[x].morphTargets[w]]=-1;for(const w in S){const A=[],k=[];for(let O=0;O!==v[x].morphTargets.length;++O){const D=v[x];A.push(D.time),k.push(D.morphTarget===w?1:0)}s.push(new q$(".morphTargetInfluence["+w+"]",A,k))}h=S.length*l}else{const S=".bones["+t[_].name+"]";i(Z$,S+".position",v,"pos",s),i(db,S+".quaternion",v,"rot",s),i(Z$,S+".scale",v,"scl",s)}}return s.length===0?null:new this(o,h,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function jZ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return q$;case"vector":case"vector2":case"vector3":case"vector4":return Z$;case"color":return vV;case"quaternion":return db;case"bool":case"boolean":return uS;case"string":return cS}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function XZ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=jZ(n.type);if(n.times===void 0){const t=[],i=[];_V(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ov={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class YZ{constructor(e,t,i){const s=this;let o=!1,l=0,u=0,h;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(m){u++,o===!1&&s.onStart!==void 0&&s.onStart(m,l,u),o=!0},this.itemEnd=function(m){l++,s.onProgress!==void 0&&s.onProgress(m,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(m){s.onError!==void 0&&s.onError(m)},this.resolveURL=function(m){return h?h(m):m},this.setURLModifier=function(m){return h=m,this},this.addHandler=function(m,_){return d.push(m,_),this},this.removeHandler=function(m){const _=d.indexOf(m);return _!==-1&&d.splice(_,2),this},this.getHandler=function(m){for(let _=0,v=d.length;_<v;_+=2){const S=d[_],x=d[_+1];if(S.global&&(S.lastIndex=0),S.test(m))return x}return null}}}const KZ=new YZ;class $b{constructor(e){this.manager=e!==void 0?e:KZ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,o){i.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}$b.DEFAULT_MATERIAL_NAME="__DEFAULT";const L0={};class JZ extends Error{constructor(e,t){super(e),this.response=t}}class OA extends $b{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=ov.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(L0[e]!==void 0){L0[e].push({onLoad:t,onProgress:i,onError:s});return}L0[e]=[],L0[e].push({onLoad:t,onProgress:i,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(l).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const m=L0[e],_=d.body.getReader(),v=d.headers.get("Content-Length")||d.headers.get("X-File-Size"),S=v?parseInt(v):0,x=S!==0;let w=0;const A=new ReadableStream({start(k){O();function O(){_.read().then(({done:D,value:L})=>{if(D)k.close();else{w+=L.byteLength;const z=new ProgressEvent("progress",{lengthComputable:x,loaded:w,total:S});for(let H=0,U=m.length;H<U;H++){const P=m[H];P.onProgress&&P.onProgress(z)}k.enqueue(L),O()}})}}});return new Response(A)}else throw new JZ(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(h){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(m=>new DOMParser().parseFromString(m,u));case"json":return d.json();default:if(u===void 0)return d.text();{const _=/charset="?([^;"\s]*)"?/i.exec(u),v=_&&_[1]?_[1].toLowerCase():void 0,S=new TextDecoder(v);return d.arrayBuffer().then(x=>S.decode(x))}}}).then(d=>{ov.add(e,d);const m=L0[e];delete L0[e];for(let _=0,v=m.length;_<v;_++){const S=m[_];S.onLoad&&S.onLoad(d)}}).catch(d=>{const m=L0[e];if(m===void 0)throw this.manager.itemError(e),d;delete L0[e];for(let _=0,v=m.length;_<v;_++){const S=m[_];S.onError&&S.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class QZ extends $b{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=ov.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=eD("img");function h(){m(),ov.add(e,this),t&&t(this),o.manager.itemEnd(e)}function d(_){m(),s&&s(_),o.manager.itemError(e),o.manager.itemEnd(e)}function m(){u.removeEventListener("load",h,!1),u.removeEventListener("error",d,!1)}return u.addEventListener("load",h,!1),u.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class qZ extends $b{constructor(e){super(e)}load(e,t,i,s){const o=new $f,l=new QZ(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},i,s),o}}class RB extends Vu{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new gc(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const p2=new qi,oz=new Mt,az=new Mt;class kB{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Bl(512,512),this.map=null,this.mapPass=null,this.matrix=new qi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new CZ,this._frameExtents=new Bl(1,1),this._viewportCount=1,this._viewports=[new gm(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;oz.setFromMatrixPosition(e.matrixWorld),t.position.copy(oz),az.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(az),t.updateMatrixWorld(),p2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(p2),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(p2)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ZZ extends kB{constructor(){super(new wB(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Q$*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class eee extends RB{constructor(e,t,i=0,s=Math.PI/3,o=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Vu.DEFAULT_UP),this.updateMatrix(),this.target=new Vu,this.distance=i,this.angle=s,this.penumbra=o,this.decay=l,this.map=null,this.shadow=new ZZ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const lz=new qi,CE=new Mt,f2=new Mt;class tee extends kB{constructor(){super(new wB(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Bl(4,2),this._viewportCount=6,this._viewports=[new gm(2,1,1,1),new gm(0,1,1,1),new gm(3,1,1,1),new gm(1,1,1,1),new gm(3,0,1,1),new gm(1,0,1,1)],this._cubeDirections=[new Mt(1,0,0),new Mt(-1,0,0),new Mt(0,0,1),new Mt(0,0,-1),new Mt(0,1,0),new Mt(0,-1,0)],this._cubeUps=[new Mt(0,1,0),new Mt(0,1,0),new Mt(0,1,0),new Mt(0,1,0),new Mt(0,0,1),new Mt(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),CE.setFromMatrixPosition(e.matrixWorld),i.position.copy(CE),f2.copy(i.position),f2.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(f2),i.updateMatrixWorld(),s.makeTranslation(-CE.x,-CE.y,-CE.z),lz.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lz)}}class nee extends RB{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new tee}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class ree extends kB{constructor(){super(new dV(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class iee extends RB{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Vu.DEFAULT_UP),this.updateMatrix(),this.target=new Vu,this.shadow=new ree}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Qy{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class see extends $b{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=ov.get(e);if(l!==void 0){if(o.manager.itemStart(e),l.then){l.then(d=>{t&&t(d),o.manager.itemEnd(e)}).catch(d=>{s&&s(d)});return}return setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader;const h=fetch(e,u).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(d){return ov.add(e,d),t&&t(d),o.manager.itemEnd(e),d}).catch(function(d){s&&s(d),ov.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});ov.add(e,h),o.manager.itemStart(e)}}const OB="\\[\\]\\.:\\/",oee=new RegExp("["+OB+"]","g"),LB="[^"+OB+"]",aee="[^"+OB.replace("\\.","")+"]",lee=/((?:WC+[\/:])*)/.source.replace("WC",LB),uee=/(WCOD+)?/.source.replace("WCOD",aee),cee=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",LB),hee=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",LB),dee=new RegExp("^"+lee+uee+cee+hee+"$"),pee=["material","materials","bones","map"];class fee{constructor(e,t,i){const s=i||_o.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class _o{constructor(e,t,i){this.path=t,this.parsedPath=i||_o.parseTrackName(t),this.node=_o.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new _o.Composite(e,t,i):new _o(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(oee,"")}static parseTrackName(e){const t=dee.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=i.nodeName.substring(s+1);pee.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const h=i(u.children);if(h)return h}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=_o.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let d=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===d){d=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const l=e[s];if(l===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_o.Composite=fee;_o.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};_o.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};_o.prototype.GetterByBindingType=[_o.prototype._getValue_direct,_o.prototype._getValue_array,_o.prototype._getValue_arrayElement,_o.prototype._getValue_toArray];_o.prototype.SetterByBindingTypeAndVersioning=[[_o.prototype._setValue_direct,_o.prototype._setValue_direct_setNeedsUpdate,_o.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_o.prototype._setValue_array,_o.prototype._setValue_array_setNeedsUpdate,_o.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_o.prototype._setValue_arrayElement,_o.prototype._setValue_arrayElement_setNeedsUpdate,_o.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_o.prototype._setValue_fromArray,_o.prototype._setValue_fromArray_setNeedsUpdate,_o.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:vB}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=vB);const m2=180/Math.PI,Uc=Math.PI,PM=.079,g2=2*Math.PI*PM*180/1.5,_2=45,yV=.3725,bV=50*Uc/180,xy=1e3,Fg=1e3,TV="settings",SV="prompt",mee={sxyz:[0,0,0,0],sxyx:[0,0,1,0],sxzy:[0,1,0,0],sxzx:[0,1,1,0],syzx:[1,0,0,0],syzy:[1,0,1,0],syxz:[1,1,0,0],syxy:[1,1,1,0],szxy:[2,0,0,0],szxz:[2,0,1,0],szyx:[2,1,0,0],szyz:[2,1,1,0],rzyx:[0,0,0,1],rxyx:[0,0,1,1],ryzx:[0,1,0,1],rxzx:[0,1,1,1],rxzy:[1,0,0,1],ryzy:[1,0,1,1],rzxy:[1,1,0,1],ryxy:[1,1,1,1],ryxz:[2,0,0,1],rzxz:[2,0,1,1],rxyz:[2,1,0,1],rzyz:[2,1,1,1]},uz=[1,2,0,1];function da(n,e){return n.length<=0?null:i=>{const s=i>n[n.length-1]?i%n[n.length-1]:i;let o=0;for(let l=0;l<n.length&&n[l]<=s;l++)o=l;return e[o]}}const EV=(n,e="szxy")=>{let[t,i,s]=[...n],[o,l,u,h]=[...mee[e.toLowerCase()]],d=o+1,m=uz[d+l-1]+1,_=uz[d-l]+1;if(h!==0){let U=[t,s];t=U[1],s=U[0]}l!==0&&(i=-1*i),t=t/2,i=i/2,s=s/2;let v=Math.cos(t),S=Math.sin(t),x=Math.cos(i),w=Math.sin(i),A=Math.cos(s),k=Math.sin(s),O=v*A,D=v*k,L=S*A,z=S*k,H=[null,null,null,null];return u!==0?(H[0]=x*(O-z),H[d]=x*(D+L),H[m]=w*(O+z),H[_]=w*(D-L)):(H[0]=x*O+w*z,H[d]=x*L-w*D,H[m]=x*z+w*O,H[_]=x*D-w*L),l!==0&&(H[m]*=-1),H},gee=n=>({x:n.x*m2,y:n.y*m2,z:n.z*m2}),FM=n=>{let e=gee(new Eb().setFromQuaternion(new Vo(n.x,n.y,n.z,n.w)));return{x:e.x,y:e.y,z:e.z}},z0=(n,e,t)=>{let i=Math.cos(n*.5),s=Math.cos(e*.5),o=Math.cos(t*.5),l=Math.sin(n*.5),u=Math.sin(e*.5),h=Math.sin(t*.5),d=new Vo;return d.w=o*i*s+h*l*u,d.x=o*l*s-h*i*u,d.y=o*i*u+h*l*s,d.z=h*i*s-o*l*u,d},$V=n=>n._w===.707&&n._z===.707?Uc/2:n._w===.707&&n._z===-.707?-Uc/2:n._w===-.707&&n._z===.707?3*Uc/4:n._w===-.707&&n._z===-.707?-3*Uc/4:n._z===1?Uc:n._z===-1?-Uc:FM(n).z;function b1(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(e,function(i,s,o,l){return s+s+o+o+l+l});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return console.log(t),t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function _ee(n,e){const t={ignoreAttributes:!1,attributeNamePrefix:"@_"},o=new rV.XMLParser(t).parse(n).robot.joint,l={};return(Array.isArray(o)?o:[o]).forEach(h=>{h["@_name"];const d=h.origin,m=h.parent["@_link"],_=h.child["@_link"],v=d["@_xyz"].split(" ").map(Number),S=d["@_rpy"].split(" ").map(Number),x=EV(S,"sxyz");l[_]={frame:m,position:{x:v[0],y:v[1],z:v[2]},rotation:{w:x[0],x:x[1],y:x[2],z:x[3]},scale:{x:1,y:1,z:1}}}),l.base_link={frame:"world",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},console.log(l),l}function vee(n){const e={ignoreAttributes:!1,attributeNamePrefix:"@_",parseAttributeValue:!0},i=new rV.XMLParser(e).parse(n),s=i.robot.link,o=i.robot.material,l={},u={};return o&&(Array.isArray(o)?o:[o]).forEach(m=>{const _=m["@_name"],v=m.color["@_rgba"].split(" ").map(Number);u[_]={r:v[0],g:v[1],b:v[2],a:v[3]}}),(Array.isArray(s)?s:[s]).forEach(d=>{var x,w;const m=d["@_name"],_=d.visual;let v=null,S=null;if((x=_==null?void 0:_.geometry)!=null&&x.mesh&&(v=_.geometry.mesh["@_filename"],S=(w=_.geometry.mesh["@_scale"])==null?void 0:w.split(" ").map(Number)),m&&_&&v){if(_.material.color){let D=_.material.color["@_rgba"].split(" ").map(Number);D[0],D[1],D[2],D[3]}else _.material["@_name"]&&u[_.material["@_name"]]&&u[_.material["@_name"]];const A=_.origin["@_xyz"].split(" ").map(Number),k=_.origin["@_rpy"].split(" ").map(Number),O=EV(k,"sxyz");l[m]={shape:v,name:m,frame:m,position:{x:A[0],y:A[1],z:A[2]},rotation:{w:O[0],x:O[1],y:O[2],z:O[3]},color:{r:.7*255,g:.7*255,b:.7*255,a:1},scale:S?{x:S[0],y:S[1],z:S[2]}:{x:1,y:1,z:1},highlight:"false"}}}),l}class yee{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=bee.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}reset_elapsed(){return this._elapsed=0,this}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function bee(){document.hidden===!1&&this.reset()}const Tee={Left:"LEFT_ARM_CONNECTOR_1",Right:"RIGHT_ARM_CONNECTOR_1",Head:"HEAD_1",Neck:"NECK_GLOBE_BASE_1",Base:"base_link"},Ur=n=>Tee[n],v2={camera_link:{frame:"HEAD_1",position:{x:null,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},imu_sensor_link:{frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BODY_BASE_CONNECTOR_1:{frame:"base_link",position:{x:-.263414,y:-.061691,z:.210284},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_RIGHT_COVER_1:{frame:"base_link",position:{x:.062309,y:-.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_LEFT_COVER_1:{frame:"base_link",position:{x:.062309,y:.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_FRONT_GRILL_1:{frame:"base_link",position:{x:.039109,y:.043,z:.078796},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Torso_1:{frame:"BODY_BASE_CONNECTOR_1",position:{x:.214514,y:.061691,z:-.095653},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},NECK_GLOBE_BASE_1:{frame:"Torso_1",position:{x:.014661,y:.0228,z:.084122},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_RIGHT_1:{frame:"HEAD_1",position:{x:.08973-.019009,y:-.057013+.025,z:.04831+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_1:{frame:"NECK_GLOBE_BASE_1",position:{x:.034239,y:-.02,z:.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},EYE_LENS_1:{frame:"HEAD_1",position:{x:.016845-.019009,y:.061941+.025,z:.034753+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FACE_1:{frame:"EYE_LENS_1",position:{x:.076086,y:.007237,z:-.003703},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},VISOR_GLASS_1:{frame:"HEAD_1",position:{x:.111798-.019009,y:-.024175+.025,z:-.124256+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_LEFT_1:{frame:"HEAD_1",position:{x:-.042326-.019009,y:.038377+.025,z:-.162881+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_1:{frame:"LEFT_ARM_CONNECTOR_1",position:{x:-.013297,y:.005336,z:-.001514},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_1:{frame:"RIGHT_ARM_CONNECTOR_1",position:{x:-.014964,y:-.001971,z:-287e-6},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Battery_1:{frame:"base_link",position:{x:-.321414,y:.065009,z:.175134},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:-.066216,z:.057987},rotation:{w:.924,x:0,y:.383,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:.066216,z:.057987},rotation:{w:.924,x:0,y:.383,z:0},scale:{x:1,y:1,z:1}},FRONT_LEFT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FRONT_RIGHT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:-.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BALANCE_WHEEL:{frame:"base_link",position:{x:-.075191,y:0,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},base_link:{frame:"world",position:{x:0,y:0,z:0},rotation:{w:.707,x:0,y:0,z:-.707},scale:{x:1,y:1,z:1}}},See={base_link:{shape:"package://misty_description/meshes/base_link.stl",name:"base_link",frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl",name:"MIDDLE_LEFT_WHEEL_1",frame:"MIDDLE_LEFT_WHEEL_1",position:{x:.006691,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl",name:"REAR_LEFT_WHEEL_1",frame:"REAR_LEFT_WHEEL_1",position:{x:.075191,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl",name:"REAR_RIGHT_WHEEL_1",frame:"REAR_RIGHT_WHEEL_1",position:{x:.075191,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl",name:"MIDDLE_RIGHT_WHEEL_1",frame:"MIDDLE_RIGHT_WHEEL_1",position:{x:.006691,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BODY_BASE_CONNECTOR_1:{shape:"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl",name:"BODY_BASE_CONNECTOR_1",frame:"BODY_BASE_CONNECTOR_1",position:{x:.263414,y:.061691,z:-.210284},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_RIGHT_COVER_1:{shape:"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl",name:"BASE_RIGHT_COVER_1",frame:"BASE_RIGHT_COVER_1",position:{x:-.062309,y:.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_LEFT_COVER_1:{shape:"package://misty_description/meshes/BASE_LEFT_COVER_1.stl",name:"BASE_LEFT_COVER_1",frame:"BASE_LEFT_COVER_1",position:{x:-.062309,y:-.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_FRONT_GRILL_1:{shape:"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl",name:"BASE_FRONT_GRILL_1",frame:"BASE_FRONT_GRILL_1",position:{x:-.039109,y:-.043,z:-.078796},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Torso_1:{shape:"package://misty_description/meshes/Torso_1.stl",name:"Torso_1",frame:"Torso_1",position:{x:.0489,y:0,z:-.114631},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},NECK_GLOBE_BASE_1:{shape:"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl",name:"NECK_GLOBE_BASE_1",frame:"NECK_GLOBE_BASE_1",position:{x:.034239,y:-.0228,z:-.198753},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_RIGHT_1:{shape:"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl",name:"HEAD_VENT_RIGHT_1",frame:"HEAD_VENT_RIGHT_1",position:{x:-.070814,y:.032838,z:-.485664},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_1:{shape:"package://misty_description/meshes/HEAD_1.stl",name:"HEAD_1",frame:"HEAD_1",position:{x:0,y:0,z:-.25},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},EYE_LENS_1:{shape:"package://misty_description/meshes/EYE_LENS_1.stl",name:"EYE_LENS_1",frame:"EYE_LENS_1",position:{x:.002071,y:-.086116,z:-.472107},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FACE_1:{shape:"package://misty_description/meshes/FACE_1.stl",name:"FACE_1",frame:"FACE_1",position:{x:-.074015,y:-.093353,z:-.468404},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},VISOR_GLASS_1:{shape:"package://misty_description/meshes/VISOR_GLASS_1.stl",name:"VISOR_GLASS_1",frame:"VISOR_GLASS_1",position:{x:-.092882,y:0,z:-.313098},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_LEFT_1:{shape:"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl",name:"HEAD_VENT_LEFT_1",frame:"HEAD_VENT_LEFT_1",position:{x:.061242,y:-.062552,z:-.274473},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_1:{shape:"package://misty_description/meshes/LEFT_ARM_1.stl",name:"LEFT_ARM_1",frame:"LEFT_ARM_1",position:{x:.017446,y:-.071552,z:-.171104},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_1:{shape:"package://misty_description/meshes/RIGHT_ARM_1.stl",name:"RIGHT_ARM_1",frame:"RIGHT_ARM_1",position:{x:.019113,y:.068187,z:-.172331},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Battery_1:{shape:"package://misty_description/meshes/Battery_1.stl",name:"Battery_1",frame:"Battery_1",position:{x:.321414,y:-.065009,z:-.175134},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl",name:"RIGHT_ARM_CONNECTOR_1",frame:"RIGHT_ARM_CONNECTOR_1",position:{x:.004149,y:.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl",name:"LEFT_ARM_CONNECTOR_1",frame:"LEFT_ARM_CONNECTOR_1",position:{x:.004149,y:-.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl",name:"FRONT_LEFT_WHEEL_1",frame:"FRONT_LEFT_WHEEL_1",position:{x:-.060309,y:-.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl",name:"FRONT_RIGHT_WHEEL_1",frame:"FRONT_RIGHT_WHEEL_1",position:{x:-.060309,y:.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Reset_Button:{shape:"cube",frame:"gizmo",name:"Reset_Button",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:255,g:0,b:0,a:1},scale:{x:1,y:1,z:1}}},Eee=`You are an assistive agent that translates descriptions of robot behavior into JSON that describes goals for programming. These goals are individual steps for a user to achieve in order to program the robot to perform the corresponding behavior. A user will use these goals to help them figure out how to build a robot program using a custom interface for programming robots. 
For example, a user might say: "The robot should say "Watch me", play a sound, and then do a dance." 
One possible result is the following set of JSON goals: 
"{
  "task1": {
    "id": "task1",
    "name": "Robot Dance",
    "order": 1,
    "type": "task",
    "subtasks": ["subtask1a", "subtask1b", "subtask1c", "subtask1d", "subtask1e", "subtask1f"]
  },
  "subtask1a": {
    "id": "subtask1a",
    "type": "subtask",
    "title": "Make the robot speak",
    "subtext": "Have the robot say: 'Watch me!'",
    "hints": ["hint1a", "hint1b", "hint1c"]
  },
  "hint1a": {
    "id": "hint1a",
    "type": "hint",
    "text": "Open the 'Speech' category and add a 'Speak' block to your program. You can add it after the 'Start' block."
  },
  "hint1b": {
    "id": "hint1b",
    "type": "hint",
    "text": "Open the 'Speech' category and add a text block to the "Speak" block you added to the program."
  },
  "hint1c": {
    "id": "hint1c",
    "type": "hint",
    "text": "In the text block you added, type 'Watch me!'"
  },
  "subtask1b": {
    "id": "subtask1b",
    "type": "subtask",
    "title": "Play a sound",
    "subtext": "Have the robot start playing some music.",
    "hints": []
  },
  "subtask1c": {
    "id": "subtask1c",
    "type": "subtask",
    "title": "Make the robot move around",
    "subtext": "Drive the robot left, then right. You can vary the speed to make the dance more performative.",
    "hints": ["hint2a", "hint2b", "hint2c", "hint2d"]
  },
  "hint2a": {
    "id": "hint2a",
    "type": "hint",
    "text": "Open the 'Movement' category and add a 'Drive' block to your program. You can add it after the 'Speak' block."
  },
  "hint2b": {
    "id": "hint2b",
    "type": "hint",
    "text": "Make the robot turn left. Add an angular velocity of -100 for 2 seconds."
  },
  "hint2c": {
    "id": "hint2c",
    "type": "hint",
    "text": "Open the 'Movement' category and add another 'Drive' block to your program. You can add it after the other 'Drive' block."
  },
  "hint2d": {
    "id": "hint2d",
    "type": "hint",
    "text": "Make the robot turn right. Add an angular velocity of 100 for 4 seconds."
  },
  "subtask1d": {
    "id": "subtask1d",
    "type": "subtask",
    "title": "Move the robot's arms",
    "subtext": "Move both of the robot's arms upward quickly to show it's excited to dance!",
    "hints": []
  },
  "subtask1e": {
    "id": "subtask1e",
    "type": "subtask",
    "title": "Move the robot's head",
    "subtext": "Move the robot's head left as the music plays.",
    "hints": []
  },
  "subtask1f": {
    "id": "subtask1f",
    "type": "subtask",
    "title": "Move the robot's head",
    "subtext": "Move the robot's head right to complete the dance.",
    "hints": []
  }
}"
Every returned JSON file has the following properties:
1) Every object in the JSON has the following fields: "id" and "type". "id" is unique for each object, and "type" can only be: "hint", "subtask", or "task".
2) "task" refers to the high level goal and there should only ever be 1 of these in the JSON. "task" objects have the following fields in addition to those in 1). These are: "name", "order", and "subtasks". "name" is a 1-3 word description of the overall task goal. "order" will always be 1. "subtasks" is a list of ids of subtasks relevant to the completion of the task.
3) "subtask" refers to a single step in that task. In addition to the fields specified in 1), "subtask" also has the following fields: "title", "subtext", and "hints". "title" refers to a brief description (1-7 words) of the what needs to be done for the current step. "subtext" refers to a more elaborate description of the goal for the subtask. It should be a description of what the user needs to complete, without giving direct instructions (these direct instructions are reserved for "hint" type objects). Finally, "subtask" objects have a "hints" field that is a list of ids of "hint" objects.
4) In addition to the fields specified in 1), "hint" objects have a "text" field that offers advice for the subtask, such as describing where to find program blocks in the interface, where to connect blocks to, etc.
5) Most "subtasks" should have between 1 and 5 hints. If you can explain a subtask further, create a hint for it!

The user who is building the program has access to a custom block-based programming interface. This interface has the following categories of program blocks: "Logic", "Loops", "Math", "Movement", "Light", "Speech", "Face", "Audio", and "Misc". 
In the "Logic" category, users have access to if statements, boolean values, and negation blocks. 
In the "Loops" category, users have acces to a while loop block that allows them to specify the number of iterations to perform.
In the "Math" category, users have access to a number block that allows them to input any number they want, as well as a random number block that allows them to specify a min and max number for the random generation.
In the "Movement" category, users have access to blocks for moving different parts of the robot. This include blocks to control the movement of the robot's head, arms, as well as allow the robot to drive and turn.
In the "Light" category, users have acces to blocks for controlling the various lights on the robot. This inculdes blocks for turning the flashlight on or off, as well as changing the color of the LED on the robot's chest. This category also has blocks for selecting colors for the LED (random color selection, or RGB color picker).
In the "Speech" category, users have access to blocks for controlling what the robot says. This includes a "Speak" block that accepts a "Text" block. The "Text" block allows users to type anything they want the robot to say. There is also another "Speak" block that has a dropdown list of common things to say. This dropdown list includes: "Hi", "Hello", "How are you today?", and "Goodbye".
In the "Face" category, users have access to blocks for changing the robot's facial expression. This includes a "Change Face" block that accepts a specific face to apply to the robot. The rest of the blocks in the category are specific faces the user can apply. This list is:
  "Sleeping",
  "SleepingZZZ",
  "Contempt",
  "ContentLeft",
  "ContentRight",
  "Disoriented",
  "EcstacyHilarious",
  "EcstacyStarryEyed",
  "JoyGoofy",
  "JoyGoofy2",
  "JoyGoofy3",
  "Love",
  "Rage",
  "Rage2",
  "Rage3",
  "Rage4",
  "RemorseShame",
  "acceptance",
  "admiration",
  "amazement",
  "anger",
  "annoyed",
  "anticipation",
  "apprehension",
  "apprehension_1",
  "boredom",
  "default",
  "disgust",
  "distraction",
  "ecstasy_frame_1",
  "ecstasy_frame_2",
  "fear",
  "grief",
  "interest",
  "joy",
  "loathing",
  "pensiveness",
  "rage",
  "sad",
  "serenity",
  "surprise",
  "terror",
  "trust",
  "vigilance"
In the "Audio" category, users have access to blocks for playing audio files through the robot's speakers. This includes a "Play Audio" block that accepts a specific file to play on the robot. The rest of the blocks in the category are specific audio files the user can play. This list is:
  "Acceptance",
  "Amazement",
  "Amazement2",
  "Anger",
  "Anger2",
  "Anger3",
  "Anger4",
  "Annoyance",
  "Annoyance2",
  "Annoyance3",
  "Annoyance4",
  "Awe",
  "Awe2",
  "Awe3",
  "Boredom",
  "Disapproval",
  "Disgust",
  "Disgust2",
  "Disgust3",
  "DisorientedConfused",
  "DisorientedConfused2",
  "DisorientedConfused3",
  "DisorientedConfused4",
  "DisorientedConfused5",
  "DisorientedConfused6",
  "Distraction",
  "Ecstacy",
  "Ecstacy2",
  "Fear",
  "Grief",
  "Grief2",
  "Grief3",
  "Grief4",
  "Joy",
  "Joy2",
  "Joy3",
  "Joy4",
  "Loathing",
  "Love",
  "PhraseByeBye",
  "PhraseEvilAhHa",
  "PhraseHello",
  "PhraseNoNoNo",
  "PhraseOopsy",
  "PhraseOwOwOw",
  "PhraseOwwww",
  "PhraseUhOh",
  "Rage",
  "Sadness",
  "Sadness2",
  "Sadness3",
  "Sadness4",
  "Sadness5",
  "Sadness6",
  "Sadness7",
  "Sleepy",
  "Sleepy2",
  "Sleepy3" 
  "Sleepy4",
  "SleepySnore",
  "SystemCameraShutter"
Finally, in the "Misc" category, users have a few blocks to select from. The user can use the "Display Text" block to display text on the robot's face. This allows the user to type whatever text they want to appear. There is also a "Clear Text" block to clear all text from the robot's face. And finally there is a "Wait" block that allows the users to specify an amount of time for the robot to do nothing.

Any tasks, subtasks, and hints you create can only use these blocks and categories! ONLY respond with the JSON. Do not explain anything.`,lr=pQ((n,e)=>({ip:"",blocks:{},Start:{},lines:{},hulls:{},texts:{},points:{},widgets:{},counter:0,blocklyWorkspaceXML:{},lightMode:!0,simOnly:!1,isConnected:!1,workerThread:null,blocklyWorkspace:null,llmEndpoint:"",llmAPIKey:"",llmDeployment:"",userPrompt:"",programGoals:{},llmProcessing:!1,llmMode:!1,mistyAudioList:[],mistyImageList:[],headerHeight:0,headerWidth:0,clock:new yee,tfs:{...v2},startingTfs:JSON.parse(JSON.stringify(v2)),endingTfs:JSON.parse(JSON.stringify(v2)),items:{...See},activeModal:null,setActiveModal:t=>n(i=>({activeModal:t})),closeModal:()=>n(t=>({activeModal:null})),toggleLLMMode:t=>n({llmMode:t}),toggleTheme:t=>n({lightMode:t}),setWorkerThread:t=>n({workerThread:t}),setBlocklyWorkspace:t=>n({blocklyWorkspace:t}),setAPIKey:t=>n({llmAPIKey:t}),setEndpoint:t=>n({llmEndpoint:t}),setDeployment:t=>n({llmDeployment:t}),setImageList:t=>n({mistyImageList:t}),setAudioList:t=>n({mistyAudioList:t}),setUserPrompt:t=>n({userPrompt:t}),setHeaderDimensions:(t,i)=>n({headerHeight:t,headerWidth:i}),generateProgramOutline:()=>{n({llmProcessing:!0});let t=e(),i=t.userPrompt,s=t.llmEndpoint,o=t.llmDeployment,l=t.llmAPIKey;fetch(s+"/openai/deployments/"+o+"/chat/completions?api-version=2024-02-01",{method:"POST",headers:{"Content-Type":"application/json","api-key":l},body:JSON.stringify({messages:[{role:"system",content:Eee},{role:"user",content:'Give me the output for the following user prompt: "'+i+'"'}]})}).then(u=>{if(!u.ok)throw new Error(`LLM Request failed with status ${u.status}`);return u.json()}).then(u=>{console.log(u),n({programGoals:u.choices[0].message.content,llmProcessing:!1,activeModal:null})}).catch(u=>{n({llmProcessing:!1}),alert(`Failed to connect to ChatGPT: ${u.message}`)})},clearProgram:()=>n({blocks:{}}),loadBlocks:(t,i)=>{var d,m;e().clearProgram();let s=null,o=[],l=[],u=[t.data[0].id];for(let _=0;_<t.data.length;_++){let v=mm.serialization.blocks.append({type:t.data[_].type},i);v.type==="Start"&&(s=v),t.data[_].type==="math_number"&&v.getField("NUM").setValue(t.data[_].value),t.data[_].type==="colour_picker"&&v.getField("COLOUR").setValue(t.data[_].value),t.data[_].type==="text"&&v.getField("TEXT").setValue(t.data[_].value),["BasicSlider","ArmPositionSlider","SpeedSlider","TimeSlider","HeadPitchSlider","HeadRollSlider","HeadYawSlider"].includes(t.data[_].type)&&v.getField("FIELD_slider_value").setValue(t.data[_].value),o.push(t.data[_].id),l.push(v.id),(d=t.data[_])!=null&&d.nextStatement&&u.push((m=t.data[_])==null?void 0:m.nextStatement)}for(let _=0;_<t.data.length;_++){let v=i.getBlockById(l[o.indexOf(t.data[_].id)]);v&&Object.keys(t.data[_]).forEach(S=>{if(!(S=="id"||S=="value"||S=="type"||S=="nextStatement")){const x=i.getBlockById(l[o.indexOf(t.data[_][S])]);v.getInput(S).connection.connect(x.outputConnection)}})}for(let _=1;_<u.length;_++){let v=i.getBlockById(l[o.indexOf(u[_])]),S=i.getBlockById(l[o.indexOf(u[_-1])]);v&&S.nextConnection.connect(v.previousConnection)}let h=i.getBlockById(l[o.indexOf(u[0])]);s.nextConnection.connect(h.previousConnection)},setIsConnected:t=>n({isConnected:t}),loadFromURDF:t=>n({tfs:{..._ee(t)},items:{...vee(t)}}),setIp:t=>n({ip:t}),disconnect:()=>n({ip:"",isConnected:!1,mistyAudioList:[],mistyImageList:[]}),addBlock:(t,i)=>n(s=>({blocks:{...s.blocks,[t]:i}})),removeBlock:t=>n(i=>({blocks:Object.keys(i.blocks).reduce((o,l)=>(t.includes(l)||(o[l]=i.blocks[l]),o),{})})),updateBlock:(t,i)=>n(s=>({blocks:{...s.blocks,[t]:i}})),getBlock:t=>e().blocks[t],getBlocks:()=>e().blocks,addBlocktoStart:(t,i)=>n(s=>({Start:{...s.Start,[t]:i}})),removeBlockfromStart:t=>n(i=>({Start:Object.keys(i.Start).reduce((o,l)=>(l!==t&&(o[l]=i.Start[l]),o),{})})),getBlocksByType:t=>{const i=e().blocks;return Object.values(i).filter(s=>s.type===t)[0]},getBlockType:t=>{var s;return((s=e().blocks[t])==null?void 0:s.type)||"Unknown block type"},setWorkspaceXml:t=>n({blocklyWorkspaceXML:t}),getWorkspaceXml:()=>e().blocklyWorkspaceXML,onPointerMissed:()=>console.log("Missed Click"),onPointerOver:()=>{},onPointerOut:()=>{},resetSim:()=>{const t=JSON.parse(JSON.stringify(e().startingTfs));n({tfs:{...t},endingTfs:{...t}})},toggleSimOnly:t=>{n({simOnly:t})},setAnimationFrames:(t,i)=>{n({tfs:{...t},endingTfs:{...i}})},animateDrive:(t,i,s,o)=>{const l=JSON.parse(JSON.stringify(e().endingTfs));let u=JSON.parse(JSON.stringify(l[Ur("Base")])),h=JSON.parse(JSON.stringify(l[Ur("Base")]));const d=i/100*bV*o/1e3,m=t/100*yV*o/1e3,_=d!==0?m/d:m;let v=new Vo(h.rotation.x,h.rotation.y,h.rotation.z,h.rotation.w);const S=$V(v);if(console.log(S),d!==0){let ie={x:0,y:0,z:d};v=z0(ie.x,ie.y,ie.z),v.multiply(new Vo(h.rotation.x,h.rotation.y,h.rotation.z,h.rotation.w))}let x=[0],w=[h.position.x],A=[h.position.y],k=[h.position.z],O=[h.rotation.w],D=[h.rotation.x],L=[h.rotation.y],z=[h.rotation.z];const H=xy;let U=h.position.x,P=h.position.y;d>0?U=_:d<0&&(U-=_),console.log(d);let K=null;for(let ie=10;ie<=H;ie=10){x.push(o/1e3*ie);let de=d*ie/H,oe=m*ie/H;d!==0?K=new Mt(U(Math.cos(S)*oe/de*Math.cos(oe)),P(Math.sin(S)*oe/de*Math.sin(oe)),k[0]):K=new Mt(U(Math.cos(S)*oe),P(Math.sin(S)*oe),k[0]),w.push(K.x),A.push(K.y),k.push(K.z);let ce=new Vo(D[0],L[0],z[0],O[0]);ce.slerp(v,ie/H),O.push(ce._w),D.push(ce._x),L.push(ce._y),z.push(ce._z)}x.push(1/0),w.push(K.x),A.push(K.y),k.push(K.z),O.push(v._w),D.push(v._x),L.push(v._y),z.push(v._z),u.position.x=K.x,u.position.y=K.y,u.position.z=K.z,u.rotation.w=v._w,u.rotation.x=v._x,u.rotation.y=v._y,u.rotation.z=v._z,h.position.x=da(x,w),h.position.y=da(x,A),h.position.z=da(x,k),h.rotation.w=da(x,O),h.rotation.x=da(x,D),h.rotation.y=da(x,L),h.rotation.z=da(x,z);let ee={};ee[Ur("Base")]={...h};let re={};re[Ur("Base")]={...u},n({tfs:{...l,...ee},endingTfs:{...l,...re}})}}));let cz="";const zu=n=>{const t=new Date().toLocaleString();cz=cz.concat(`
`,`[${t}] ${n}`)};function $ee(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[i,s]of n)if(!Object.is(s,e.get(i)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const i of t)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(n[i],e[i]))return!1;return!0}const{useRef:xee}=Sr;function so(n){const e=xee();return t=>{const i=n(t);return $ee(e.current,i)?e.current:e.current=i}}const wee={black:"#000",white:"#fff"},ex=wee,Cee={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},T1=Cee,Mee={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},S1=Mee,Aee={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},E1=Aee,Iee={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},$1=Iee,Ree={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},x1=Ree,kee={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},ME=kee,Oee={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Lee=Oee;function pb(n){let e="https://mui.com/production-error/?code="+n;for(let t=1;t<arguments.length;t+=1)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+n+"; visit "+e+" for the full message."}const Dee=Object.freeze(Object.defineProperty({__proto__:null,default:pb},Symbol.toStringTag,{value:"Module"})),Lx="$$material";function ze(){return ze=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ze.apply(this,arguments)}const Nee=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"}));function tr(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function xV(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var Bee=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Pee=xV(function(n){return Bee.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91});function Fee(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function Uee(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var zee=function(){function n(t){var i=this;this._insertTag=function(s){var o;i.tags.length===0?i.insertionPoint?o=i.insertionPoint.nextSibling:i.prepend?o=i.container.firstChild:o=i.before:o=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(s,o),i.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Uee(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Fee(s);try{o.insertRule(i,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},n}(),Ed="-ms-",LA="-moz-",Ws="-webkit-",wV="comm",DB="rule",NB="decl",Hee="@import",CV="@keyframes",Gee="@layer",Wee=Math.abs,CI=String.fromCharCode,Vee=Object.assign;function jee(n,e){return Wh(n,0)^45?(((e<<2^Wh(n,0))<<2^Wh(n,1))<<2^Wh(n,2))<<2^Wh(n,3):0}function MV(n){return n.trim()}function Xee(n,e){return(n=e.exec(n))?n[0]:n}function Vs(n,e,t){return n.replace(e,t)}function nD(n,e){return n.indexOf(e)}function Wh(n,e){return n.charCodeAt(e)|0}function tx(n,e,t){return n.slice(e,t)}function Vg(n){return n.length}function BB(n){return n.length}function _C(n,e){return e.push(n),n}function Yee(n,e){return n.map(e).join("")}var MI=1,PT=1,AV=0,Gp=0,fc=0,hS="";function AI(n,e,t,i,s,o,l){return{value:n,root:e,parent:t,type:i,props:s,children:o,line:MI,column:PT,length:l,return:""}}function AE(n,e){return Vee(AI("",null,null,"",null,null,0),n,{length:-n.length},e)}function Kee(){return fc}function Jee(){return fc=Gp>0?Wh(hS,--Gp):0,PT--,fc===10&&(PT=1,MI--),fc}function wf(){return fc=Gp<AV?Wh(hS,Gp++):0,PT++,fc===10&&(PT=1,MI++),fc}function e0(){return Wh(hS,Gp)}function UM(){return Gp}function Dx(n,e){return tx(hS,n,e)}function nx(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function IV(n){return MI=PT=1,AV=Vg(hS=n),Gp=0,[]}function RV(n){return hS="",n}function zM(n){return MV(Dx(Gp-1,rD(n===91?n+2:n===40?n+1:n)))}function Qee(n){for(;(fc=e0())&&fc<33;)wf();return nx(n)>2||nx(fc)>3?"":" "}function qee(n,e){for(;--e&&wf()&&!(fc<48||fc>102||fc>57&&fc<65||fc>70&&fc<97););return Dx(n,UM()+(e<6&&e0()==32&&wf()==32))}function rD(n){for(;wf();)switch(fc){case n:return Gp;case 34:case 39:n!==34&&n!==39&&rD(fc);break;case 40:n===41&&rD(n);break;case 92:wf();break}return Gp}function Zee(n,e){for(;wf()&&n+fc!==57;)if(n+fc===84&&e0()===47)break;return"/*"+Dx(e,Gp-1)+"*"+CI(n===47?n:wf())}function ete(n){for(;!nx(e0());)wf();return Dx(n,Gp)}function tte(n){return RV(HM("",null,null,null,[""],n=IV(n),0,[0],n))}function HM(n,e,t,i,s,o,l,u,h){for(var d=0,m=0,_=l,v=0,S=0,x=0,w=1,A=1,k=1,O=0,D="",L=s,z=o,H=i,U=D;A;)switch(x=O,O=wf()){case 40:if(x!=108&&Wh(U,_-1)==58){nD(U+=Vs(zM(O),"&","&\f"),"&\f")!=-1&&(k=-1);break}case 34:case 39:case 91:U+=zM(O);break;case 9:case 10:case 13:case 32:U+=Qee(x);break;case 92:U+=qee(UM()-1,7);continue;case 47:switch(e0()){case 42:case 47:_C(nte(Zee(wf(),UM()),e,t),h);break;default:U+="/"}break;case 123*w:u[d++]=Vg(U)*k;case 125*w:case 59:case 0:switch(O){case 0:case 125:A=0;case 59+m:k==-1&&(U=Vs(U,/\f/g,"")),S>0&&Vg(U)-_&&_C(S>32?dz(U+";",i,t,_-1):dz(Vs(U," ","")+";",i,t,_-2),h);break;case 59:U+=";";default:if(_C(H=hz(U,e,t,d,m,s,u,D,L=[],z=[],_),o),O===123)if(m===0)HM(U,e,H,H,L,o,_,u,z);else switch(v===99&&Wh(U,3)===110?100:v){case 100:case 108:case 109:case 115:HM(n,H,H,i&&_C(hz(n,H,H,0,0,s,u,D,s,L=[],_),z),s,z,_,u,i?L:z);break;default:HM(U,H,H,H,[""],z,0,u,z)}}d=m=S=0,w=k=1,D=U="",_=l;break;case 58:_=1+Vg(U),S=x;default:if(w<1){if(O==123)--w;else if(O==125&&w++==0&&Jee()==125)continue}switch(U+=CI(O),O*w){case 38:k=m>0?1:(U+="\f",-1);break;case 44:u[d++]=(Vg(U)-1)*k,k=1;break;case 64:e0()===45&&(U+=zM(wf())),v=e0(),m=_=Vg(D=U+=ete(UM())),O++;break;case 45:x===45&&Vg(U)==2&&(w=0)}}return o}function hz(n,e,t,i,s,o,l,u,h,d,m){for(var _=s-1,v=s===0?o:[""],S=BB(v),x=0,w=0,A=0;x<i;++x)for(var k=0,O=tx(n,_+1,_=Wee(w=l[x])),D=n;k<S;++k)(D=MV(w>0?v[k]+" "+O:Vs(O,/&\f/g,v[k])))&&(h[A++]=D);return AI(n,e,t,s===0?DB:u,h,d,m)}function nte(n,e,t){return AI(n,e,t,wV,CI(Kee()),tx(n,2,-2),0)}function dz(n,e,t,i){return AI(n,e,t,NB,tx(n,0,i),tx(n,i+1,-1),i)}function ST(n,e){for(var t="",i=BB(n),s=0;s<i;s++)t+=e(n[s],s,n,e)||"";return t}function rte(n,e,t,i){switch(n.type){case Gee:if(n.children.length)break;case Hee:case NB:return n.return=n.return||n.value;case wV:return"";case CV:return n.return=n.value+"{"+ST(n.children,i)+"}";case DB:n.value=n.props.join(",")}return Vg(t=ST(n.children,i))?n.return=n.value+"{"+t+"}":""}function ite(n){var e=BB(n);return function(t,i,s,o){for(var l="",u=0;u<e;u++)l+=n[u](t,i,s,o)||"";return l}}function ste(n){return function(e){e.root||(e=e.return)&&n(e)}}var ote=function(e,t,i){for(var s=0,o=0;s=o,o=e0(),s===38&&o===12&&(t[i]=1),!nx(o);)wf();return Dx(e,Gp)},ate=function(e,t){var i=-1,s=44;do switch(nx(s)){case 0:s===38&&e0()===12&&(t[i]=1),e[i]+=ote(Gp-1,t,i);break;case 2:e[i]+=zM(s);break;case 4:if(s===44){e[++i]=e0()===58?"&\f":"",t[i]=e[i].length;break}default:e[i]+=CI(s)}while(s=wf());return e},lte=function(e,t){return RV(ate(IV(e),t))},pz=new WeakMap,ute=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,i=e.parent,s=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!pz.get(i))&&!s){pz.set(e,!0);for(var o=[],l=lte(t,o),u=i.props,h=0,d=0;h<l.length;h++)for(var m=0;m<u.length;m++,d++)e.props[d]=o[h]?l[h].replace(/&\f/g,u[m]):u[m]+" "+l[h]}}},cte=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function kV(n,e){switch(jee(n,e)){case 5103:return Ws+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ws+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Ws+n+LA+n+Ed+n+n;case 6828:case 4268:return Ws+n+Ed+n+n;case 6165:return Ws+n+Ed+"flex-"+n+n;case 5187:return Ws+n+Vs(n,/(\w+).+(:[^]+)/,Ws+"box-$1$2"+Ed+"flex-$1$2")+n;case 5443:return Ws+n+Ed+"flex-item-"+Vs(n,/flex-|-self/,"")+n;case 4675:return Ws+n+Ed+"flex-line-pack"+Vs(n,/align-content|flex-|-self/,"")+n;case 5548:return Ws+n+Ed+Vs(n,"shrink","negative")+n;case 5292:return Ws+n+Ed+Vs(n,"basis","preferred-size")+n;case 6060:return Ws+"box-"+Vs(n,"-grow","")+Ws+n+Ed+Vs(n,"grow","positive")+n;case 4554:return Ws+Vs(n,/([^-])(transform)/g,"$1"+Ws+"$2")+n;case 6187:return Vs(Vs(Vs(n,/(zoom-|grab)/,Ws+"$1"),/(image-set)/,Ws+"$1"),n,"")+n;case 5495:case 3959:return Vs(n,/(image-set\([^]*)/,Ws+"$1$`$1");case 4968:return Vs(Vs(n,/(.+:)(flex-)?(.*)/,Ws+"box-pack:$3"+Ed+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ws+n+n;case 4095:case 3583:case 4068:case 2532:return Vs(n,/(.+)-inline(.+)/,Ws+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Vg(n)-1-e>6)switch(Wh(n,e+1)){case 109:if(Wh(n,e+4)!==45)break;case 102:return Vs(n,/(.+:)(.+)-([^]+)/,"$1"+Ws+"$2-$3$1"+LA+(Wh(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~nD(n,"stretch")?kV(Vs(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Wh(n,e+1)!==115)break;case 6444:switch(Wh(n,Vg(n)-3-(~nD(n,"!important")&&10))){case 107:return Vs(n,":",":"+Ws)+n;case 101:return Vs(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ws+(Wh(n,14)===45?"inline-":"")+"box$3$1"+Ws+"$2$3$1"+Ed+"$2box$3")+n}break;case 5936:switch(Wh(n,e+11)){case 114:return Ws+n+Ed+Vs(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Ws+n+Ed+Vs(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Ws+n+Ed+Vs(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Ws+n+Ed+n+n}return n}var hte=function(e,t,i,s){if(e.length>-1&&!e.return)switch(e.type){case NB:e.return=kV(e.value,e.length);break;case CV:return ST([AE(e,{value:Vs(e.value,"@","@"+Ws)})],s);case DB:if(e.length)return Yee(e.props,function(o){switch(Xee(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ST([AE(e,{props:[Vs(o,/:(read-\w+)/,":"+LA+"$1")]})],s);case"::placeholder":return ST([AE(e,{props:[Vs(o,/:(plac\w+)/,":"+Ws+"input-$1")]}),AE(e,{props:[Vs(o,/:(plac\w+)/,":"+LA+"$1")]}),AE(e,{props:[Vs(o,/:(plac\w+)/,Ed+"input-$1")]})],s)}return""})}},dte=[hte],OV=function(e){var t=e.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(w){var A=w.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var s=e.stylisPlugins||dte,o={},l,u=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(w){for(var A=w.getAttribute("data-emotion").split(" "),k=1;k<A.length;k++)o[A[k]]=!0;u.push(w)});var h,d=[ute,cte];{var m,_=[rte,ste(function(w){m.insert(w)})],v=ite(d.concat(s,_)),S=function(A){return ST(tte(A),v)};h=function(A,k,O,D){m=O,S(A?A+"{"+k.styles+"}":k.styles),D&&(x.inserted[k.name]=!0)}}var x={key:t,sheet:new zee({key:t,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:h};return x.sheet.hydrate(u),x},LV={exports:{}},yo={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gh=typeof Symbol=="function"&&Symbol.for,PB=gh?Symbol.for("react.element"):60103,FB=gh?Symbol.for("react.portal"):60106,II=gh?Symbol.for("react.fragment"):60107,RI=gh?Symbol.for("react.strict_mode"):60108,kI=gh?Symbol.for("react.profiler"):60114,OI=gh?Symbol.for("react.provider"):60109,LI=gh?Symbol.for("react.context"):60110,UB=gh?Symbol.for("react.async_mode"):60111,DI=gh?Symbol.for("react.concurrent_mode"):60111,NI=gh?Symbol.for("react.forward_ref"):60112,BI=gh?Symbol.for("react.suspense"):60113,pte=gh?Symbol.for("react.suspense_list"):60120,PI=gh?Symbol.for("react.memo"):60115,FI=gh?Symbol.for("react.lazy"):60116,fte=gh?Symbol.for("react.block"):60121,mte=gh?Symbol.for("react.fundamental"):60117,gte=gh?Symbol.for("react.responder"):60118,_te=gh?Symbol.for("react.scope"):60119;function Of(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case PB:switch(n=n.type,n){case UB:case DI:case II:case kI:case RI:case BI:return n;default:switch(n=n&&n.$$typeof,n){case LI:case NI:case FI:case PI:case OI:return n;default:return e}}case FB:return e}}}function DV(n){return Of(n)===DI}yo.AsyncMode=UB;yo.ConcurrentMode=DI;yo.ContextConsumer=LI;yo.ContextProvider=OI;yo.Element=PB;yo.ForwardRef=NI;yo.Fragment=II;yo.Lazy=FI;yo.Memo=PI;yo.Portal=FB;yo.Profiler=kI;yo.StrictMode=RI;yo.Suspense=BI;yo.isAsyncMode=function(n){return DV(n)||Of(n)===UB};yo.isConcurrentMode=DV;yo.isContextConsumer=function(n){return Of(n)===LI};yo.isContextProvider=function(n){return Of(n)===OI};yo.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===PB};yo.isForwardRef=function(n){return Of(n)===NI};yo.isFragment=function(n){return Of(n)===II};yo.isLazy=function(n){return Of(n)===FI};yo.isMemo=function(n){return Of(n)===PI};yo.isPortal=function(n){return Of(n)===FB};yo.isProfiler=function(n){return Of(n)===kI};yo.isStrictMode=function(n){return Of(n)===RI};yo.isSuspense=function(n){return Of(n)===BI};yo.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===II||n===DI||n===kI||n===RI||n===BI||n===pte||typeof n=="object"&&n!==null&&(n.$$typeof===FI||n.$$typeof===PI||n.$$typeof===OI||n.$$typeof===LI||n.$$typeof===NI||n.$$typeof===mte||n.$$typeof===gte||n.$$typeof===_te||n.$$typeof===fte)};yo.typeOf=Of;LV.exports=yo;var vte=LV.exports,NV=vte,yte={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},bte={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},BV={};BV[NV.ForwardRef]=yte;BV[NV.Memo]=bte;var Tte=!0;function Ste(n,e,t){var i="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):i+=s+" "}),i}var PV=function(e,t,i){var s=e.key+"-"+t.name;(i===!1||Tte===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},FV=function(e,t,i){PV(e,t,i);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var o=t;do e.insert(t===o?"."+s:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function Ete(n){for(var e=0,t,i=0,s=n.length;s>=4;++i,s-=4)t=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var $te={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},xte=/[A-Z]|^ms/g,wte=/_EMO_([^_]+?)_([^]*?)_EMO_/g,UV=function(e){return e.charCodeAt(1)===45},fz=function(e){return e!=null&&typeof e!="boolean"},y2=xV(function(n){return UV(n)?n:n.replace(xte,"-$&").toLowerCase()}),mz=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(wte,function(i,s,o){return jg={name:s,styles:o,next:jg},s})}return $te[e]!==1&&!UV(e)&&typeof t=="number"&&t!==0?t+"px":t};function rx(n,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return jg={name:t.name,styles:t.styles,next:jg},t.name;if(t.styles!==void 0){var i=t.next;if(i!==void 0)for(;i!==void 0;)jg={name:i.name,styles:i.styles,next:jg},i=i.next;var s=t.styles+";";return s}return Cte(n,e,t)}case"function":{if(n!==void 0){var o=jg,l=t(n);return jg=o,rx(n,e,l)}break}}if(e==null)return t;var u=e[t];return u!==void 0?u:t}function Cte(n,e,t){var i="";if(Array.isArray(t))for(var s=0;s<t.length;s++)i+=rx(n,e,t[s])+";";else for(var o in t){var l=t[o];if(typeof l!="object")e!=null&&e[l]!==void 0?i+=o+"{"+e[l]+"}":fz(l)&&(i+=y2(o)+":"+mz(o,l)+";");else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var u=0;u<l.length;u++)fz(l[u])&&(i+=y2(o)+":"+mz(o,l[u])+";");else{var h=rx(n,e,l);switch(o){case"animation":case"animationName":{i+=y2(o)+":"+h+";";break}default:i+=o+"{"+h+"}"}}}return i}var gz=/label:\s*([^\s;\n{]+)\s*(;|$)/g,jg,zB=function(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,o="";jg=void 0;var l=e[0];l==null||l.raw===void 0?(s=!1,o+=rx(i,t,l)):o+=l[0];for(var u=1;u<e.length;u++)o+=rx(i,t,e[u]),s&&(o+=l[u]);gz.lastIndex=0;for(var h="",d;(d=gz.exec(o))!==null;)h+="-"+d[1];var m=Ete(o)+h;return{name:m,styles:o,next:jg}},Mte=function(e){return e()},zV=ZO.useInsertionEffect?ZO.useInsertionEffect:!1,Ate=zV||Mte,_z=zV||he.useLayoutEffect,HV=he.createContext(typeof HTMLElement<"u"?OV({key:"css"}):null),Ite=HV.Provider,GV=function(e){return he.forwardRef(function(t,i){var s=he.useContext(HV);return e(t,s,i)})},UI=he.createContext({}),Rte=GV(function(n,e){var t=n.styles,i=zB([t],void 0,he.useContext(UI)),s=he.useRef();return _z(function(){var o=e.key+"-global",l=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),u=!1,h=document.querySelector('style[data-emotion="'+o+" "+i.name+'"]');return e.sheet.tags.length&&(l.before=e.sheet.tags[0]),h!==null&&(u=!0,h.setAttribute("data-emotion",o),l.hydrate([h])),s.current=[l,u],function(){l.flush()}},[e]),_z(function(){var o=s.current,l=o[0],u=o[1];if(u){o[1]=!1;return}if(i.next!==void 0&&FV(e,i.next,!0),l.tags.length){var h=l.tags[l.tags.length-1].nextElementSibling;l.before=h,l.flush()}e.insert("",i,l,!1)},[e,i.name]),null});function zI(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return zB(e)}var dS=function(){var e=zI.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},kte=Pee,Ote=function(e){return e!=="theme"},vz=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?kte:Ote},yz=function(e,t,i){var s;if(t){var o=t.shouldForwardProp;s=e.__emotion_forwardProp&&o?function(l){return e.__emotion_forwardProp(l)&&o(l)}:o}return typeof s!="function"&&i&&(s=e.__emotion_forwardProp),s},Lte=function(e){var t=e.cache,i=e.serialized,s=e.isStringTag;return PV(t,i,s),Ate(function(){return FV(t,i,s)}),null},Dte=function n(e,t){var i=e.__emotion_real===e,s=i&&e.__emotion_base||e,o,l;t!==void 0&&(o=t.label,l=t.target);var u=yz(e,t,i),h=u||vz(s),d=!h("as");return function(){var m=arguments,_=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&_.push("label:"+o+";"),m[0]==null||m[0].raw===void 0)_.push.apply(_,m);else{_.push(m[0][0]);for(var v=m.length,S=1;S<v;S++)_.push(m[S],m[0][S])}var x=GV(function(w,A,k){var O=d&&w.as||s,D="",L=[],z=w;if(w.theme==null){z={};for(var H in w)z[H]=w[H];z.theme=he.useContext(UI)}typeof w.className=="string"?D=Ste(A.registered,L,w.className):w.className!=null&&(D=w.className+" ");var U=zB(_.concat(L),A.registered,z);D+=A.key+"-"+U.name,l!==void 0&&(D+=" "+l);var P=d&&u===void 0?vz(O):h,K={};for(var ee in w)d&&ee==="as"||P(ee)&&(K[ee]=w[ee]);return K.className=D,K.ref=k,he.createElement(he.Fragment,null,he.createElement(Lte,{cache:A,serialized:U,isStringTag:typeof O=="string"}),he.createElement(O,K))});return x.displayName=o!==void 0?o:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",x.defaultProps=e.defaultProps,x.__emotion_real=x,x.__emotion_base=s,x.__emotion_styles=_,x.__emotion_forwardProp=u,Object.defineProperty(x,"toString",{value:function(){return"."+l}}),x.withComponent=function(w,A){return n(w,ze({},t,A,{shouldForwardProp:yz(x,A,!0)})).apply(void 0,_)},x}},Nte=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],iD=Dte.bind();Nte.forEach(function(n){iD[n]=iD(n)});var WV={exports:{}},Bte="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Pte=Bte,Fte=Pte;function VV(){}function jV(){}jV.resetWarningCache=VV;var Ute=function(){function n(i,s,o,l,u,h){if(h!==Fte){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:jV,resetWarningCache:VV};return t.PropTypes=t,t};WV.exports=Ute();var zte=WV.exports;const hi=bb(zte);let sD;typeof document=="object"&&(sD=OV({key:"css",prepend:!0}));function Hte(n){const{injectFirst:e,children:t}=n;return e&&sD?Ve.jsx(Ite,{value:sD,children:t}):t}function Gte(n){return n==null||Object.keys(n).length===0}function XV(n){const{styles:e,defaultTheme:t={}}=n,i=typeof e=="function"?s=>e(Gte(s)?t:s):e;return Ve.jsx(Rte,{styles:i})}function HB(n,e){return iD(n,e)}const YV=(n,e)=>{Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))},Wte=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:XV,StyledEngineProvider:Hte,ThemeContext:UI,css:zI,default:HB,internal_processStyles:YV,keyframes:dS},Symbol.toStringTag,{value:"Module"}));function V0(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function KV(n){if(!V0(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=KV(n[t])}),e}function sp(n,e,t={clone:!0}){const i=t.clone?ze({},n):n;return V0(n)&&V0(e)&&Object.keys(e).forEach(s=>{s!=="__proto__"&&(V0(e[s])&&s in n&&V0(n[s])?i[s]=sp(n[s],e[s],t):t.clone?i[s]=V0(e[s])?KV(e[s]):e[s]:i[s]=e[s])}),i}const Vte=Object.freeze(Object.defineProperty({__proto__:null,default:sp,isPlainObject:V0},Symbol.toStringTag,{value:"Module"})),jte=["values","unit","step"],Xte=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,i)=>t.val-i.val),e.reduce((t,i)=>ze({},t,{[i.key]:i.val}),{})};function JV(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:i=5}=n,s=tr(n,jte),o=Xte(e),l=Object.keys(o);function u(v){return`@media (min-width:${typeof e[v]=="number"?e[v]:v}${t})`}function h(v){return`@media (max-width:${(typeof e[v]=="number"?e[v]:v)-i/100}${t})`}function d(v,S){const x=l.indexOf(S);return`@media (min-width:${typeof e[v]=="number"?e[v]:v}${t}) and (max-width:${(x!==-1&&typeof e[l[x]]=="number"?e[l[x]]:S)-i/100}${t})`}function m(v){return l.indexOf(v)+1<l.length?d(v,l[l.indexOf(v)+1]):u(v)}function _(v){const S=l.indexOf(v);return S===0?u(l[1]):S===l.length-1?h(l[S]):d(v,l[l.indexOf(v)+1]).replace("@media","@media not all and")}return ze({keys:l,values:o,up:u,down:h,between:d,only:m,not:_,unit:t},s)}const Yte={borderRadius:4},Kte=Yte;function S$(n,e){return e?sp(n,e,{clone:!1}):n}const GB={xs:0,sm:600,md:900,lg:1200,xl:1536},bz={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${GB[n]}px)`};function Wp(n,e,t){const i=n.theme||{};if(Array.isArray(e)){const o=i.breakpoints||bz;return e.reduce((l,u,h)=>(l[o.up(o.keys[h])]=t(e[h]),l),{})}if(typeof e=="object"){const o=i.breakpoints||bz;return Object.keys(e).reduce((l,u)=>{if(Object.keys(o.values||GB).indexOf(u)!==-1){const h=o.up(u);l[h]=t(e[u],u)}else{const h=u;l[h]=e[h]}return l},{})}return t(e)}function QV(n={}){var e;return((e=n.keys)==null?void 0:e.reduce((i,s)=>{const o=n.up(s);return i[o]={},i},{}))||{}}function qV(n,e){return n.reduce((t,i)=>{const s=t[i];return(!s||Object.keys(s).length===0)&&delete t[i],t},e)}function Jte(n,...e){const t=QV(n),i=[t,...e].reduce((s,o)=>sp(s,o),{});return qV(Object.keys(t),i)}function Qte(n,e){if(typeof n!="object")return{};const t={},i=Object.keys(e);return Array.isArray(n)?i.forEach((s,o)=>{o<n.length&&(t[s]=!0)}):i.forEach(s=>{n[s]!=null&&(t[s]=!0)}),t}function qy({values:n,breakpoints:e,base:t}){const i=t||Qte(n,e),s=Object.keys(i);if(s.length===0)return n;let o;return s.reduce((l,u,h)=>(Array.isArray(n)?(l[u]=n[h]!=null?n[h]:n[o],o=h):typeof n=="object"?(l[u]=n[u]!=null?n[u]:n[o],o=u):l[u]=n,l),{})}function Kn(n){if(typeof n!="string")throw new Error(pb(7));return n.charAt(0).toUpperCase()+n.slice(1)}const qte=Object.freeze(Object.defineProperty({__proto__:null,default:Kn},Symbol.toStringTag,{value:"Module"}));function HI(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const i=`vars.${e}`.split(".").reduce((s,o)=>s&&s[o]?s[o]:null,n);if(i!=null)return i}return e.split(".").reduce((i,s)=>i&&i[s]!=null?i[s]:null,n)}function DA(n,e,t,i=t){let s;return typeof n=="function"?s=n(t):Array.isArray(n)?s=n[t]||i:s=HI(n,t)||i,e&&(s=e(s,i,n)),s}function ju(n){const{prop:e,cssProperty:t=n.prop,themeKey:i,transform:s}=n,o=l=>{if(l[e]==null)return null;const u=l[e],h=l.theme,d=HI(h,i)||{};return Wp(l,u,_=>{let v=DA(d,s,_);return _===v&&typeof _=="string"&&(v=DA(d,s,`${e}${_==="default"?"":Kn(_)}`,_)),t===!1?v:{[t]:v}})};return o.propTypes={},o.filterProps=[e],o}function Zte(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const ene={m:"margin",p:"padding"},tne={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Tz={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},nne=Zte(n=>{if(n.length>2)if(Tz[n])n=Tz[n];else return[n];const[e,t]=n.split(""),i=ene[e],s=tne[t]||"";return Array.isArray(s)?s.map(o=>i+o):[i+s]}),WB=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],VB=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...WB,...VB];function Nx(n,e,t,i){var s;const o=(s=HI(n,e,!1))!=null?s:t;return typeof o=="number"?l=>typeof l=="string"?l:o*l:Array.isArray(o)?l=>typeof l=="string"?l:o[l]:typeof o=="function"?o:()=>{}}function jB(n){return Nx(n,"spacing",8)}function fb(n,e){if(typeof e=="string"||e==null)return e;const t=Math.abs(e),i=n(t);return e>=0?i:typeof i=="number"?-i:`-${i}`}function rne(n,e){return t=>n.reduce((i,s)=>(i[s]=fb(e,t),i),{})}function ine(n,e,t,i){if(e.indexOf(t)===-1)return null;const s=nne(t),o=rne(s,i),l=n[t];return Wp(n,l,o)}function ZV(n,e){const t=jB(n.theme);return Object.keys(n).map(i=>ine(n,e,i,t)).reduce(S$,{})}function au(n){return ZV(n,WB)}au.propTypes={};au.filterProps=WB;function lu(n){return ZV(n,VB)}lu.propTypes={};lu.filterProps=VB;function sne(n=8){if(n.mui)return n;const e=jB({spacing:n}),t=(...i)=>(i.length===0?[1]:i).map(o=>{const l=e(o);return typeof l=="number"?`${l}px`:l}).join(" ");return t.mui=!0,t}function GI(...n){const e=n.reduce((i,s)=>(s.filterProps.forEach(o=>{i[o]=s}),i),{}),t=i=>Object.keys(i).reduce((s,o)=>e[o]?S$(s,e[o](i)):s,{});return t.propTypes={},t.filterProps=n.reduce((i,s)=>i.concat(s.filterProps),[]),t}function _m(n){return typeof n!="number"?n:`${n}px solid`}function xm(n,e){return ju({prop:n,themeKey:"borders",transform:e})}const one=xm("border",_m),ane=xm("borderTop",_m),lne=xm("borderRight",_m),une=xm("borderBottom",_m),cne=xm("borderLeft",_m),hne=xm("borderColor"),dne=xm("borderTopColor"),pne=xm("borderRightColor"),fne=xm("borderBottomColor"),mne=xm("borderLeftColor"),gne=xm("outline",_m),_ne=xm("outlineColor"),WI=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=Nx(n.theme,"shape.borderRadius",4),t=i=>({borderRadius:fb(e,i)});return Wp(n,n.borderRadius,t)}return null};WI.propTypes={};WI.filterProps=["borderRadius"];GI(one,ane,lne,une,cne,hne,dne,pne,fne,mne,WI,gne,_ne);const VI=n=>{if(n.gap!==void 0&&n.gap!==null){const e=Nx(n.theme,"spacing",8),t=i=>({gap:fb(e,i)});return Wp(n,n.gap,t)}return null};VI.propTypes={};VI.filterProps=["gap"];const jI=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=Nx(n.theme,"spacing",8),t=i=>({columnGap:fb(e,i)});return Wp(n,n.columnGap,t)}return null};jI.propTypes={};jI.filterProps=["columnGap"];const XI=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=Nx(n.theme,"spacing",8),t=i=>({rowGap:fb(e,i)});return Wp(n,n.rowGap,t)}return null};XI.propTypes={};XI.filterProps=["rowGap"];const vne=ju({prop:"gridColumn"}),yne=ju({prop:"gridRow"}),bne=ju({prop:"gridAutoFlow"}),Tne=ju({prop:"gridAutoColumns"}),Sne=ju({prop:"gridAutoRows"}),Ene=ju({prop:"gridTemplateColumns"}),$ne=ju({prop:"gridTemplateRows"}),xne=ju({prop:"gridTemplateAreas"}),wne=ju({prop:"gridArea"});GI(VI,jI,XI,vne,yne,bne,Tne,Sne,Ene,$ne,xne,wne);function ET(n,e){return e==="grey"?e:n}const Cne=ju({prop:"color",themeKey:"palette",transform:ET}),Mne=ju({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ET}),Ane=ju({prop:"backgroundColor",themeKey:"palette",transform:ET});GI(Cne,Mne,Ane);function yf(n){return n<=1&&n!==0?`${n*100}%`:n}const Ine=ju({prop:"width",transform:yf}),XB=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var i,s;const o=((i=n.theme)==null||(i=i.breakpoints)==null||(i=i.values)==null?void 0:i[t])||GB[t];return o?((s=n.theme)==null||(s=s.breakpoints)==null?void 0:s.unit)!=="px"?{maxWidth:`${o}${n.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:yf(t)}};return Wp(n,n.maxWidth,e)}return null};XB.filterProps=["maxWidth"];const Rne=ju({prop:"minWidth",transform:yf}),kne=ju({prop:"height",transform:yf}),One=ju({prop:"maxHeight",transform:yf}),Lne=ju({prop:"minHeight",transform:yf});ju({prop:"size",cssProperty:"width",transform:yf});ju({prop:"size",cssProperty:"height",transform:yf});const Dne=ju({prop:"boxSizing"});GI(Ine,XB,Rne,kne,One,Lne,Dne);const Nne={border:{themeKey:"borders",transform:_m},borderTop:{themeKey:"borders",transform:_m},borderRight:{themeKey:"borders",transform:_m},borderBottom:{themeKey:"borders",transform:_m},borderLeft:{themeKey:"borders",transform:_m},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:_m},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:WI},color:{themeKey:"palette",transform:ET},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ET},backgroundColor:{themeKey:"palette",transform:ET},p:{style:lu},pt:{style:lu},pr:{style:lu},pb:{style:lu},pl:{style:lu},px:{style:lu},py:{style:lu},padding:{style:lu},paddingTop:{style:lu},paddingRight:{style:lu},paddingBottom:{style:lu},paddingLeft:{style:lu},paddingX:{style:lu},paddingY:{style:lu},paddingInline:{style:lu},paddingInlineStart:{style:lu},paddingInlineEnd:{style:lu},paddingBlock:{style:lu},paddingBlockStart:{style:lu},paddingBlockEnd:{style:lu},m:{style:au},mt:{style:au},mr:{style:au},mb:{style:au},ml:{style:au},mx:{style:au},my:{style:au},margin:{style:au},marginTop:{style:au},marginRight:{style:au},marginBottom:{style:au},marginLeft:{style:au},marginX:{style:au},marginY:{style:au},marginInline:{style:au},marginInlineStart:{style:au},marginInlineEnd:{style:au},marginBlock:{style:au},marginBlockStart:{style:au},marginBlockEnd:{style:au},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:VI},rowGap:{style:XI},columnGap:{style:jI},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:yf},maxWidth:{style:XB},minWidth:{transform:yf},height:{transform:yf},maxHeight:{transform:yf},minHeight:{transform:yf},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Bx=Nne;function Bne(...n){const e=n.reduce((i,s)=>i.concat(Object.keys(s)),[]),t=new Set(e);return n.every(i=>t.size===Object.keys(i).length)}function Pne(n,e){return typeof n=="function"?n(e):n}function e8(){function n(t,i,s,o){const l={[t]:i,theme:s},u=o[t];if(!u)return{[t]:i};const{cssProperty:h=t,themeKey:d,transform:m,style:_}=u;if(i==null)return null;if(d==="typography"&&i==="inherit")return{[t]:i};const v=HI(s,d)||{};return _?_(l):Wp(l,i,x=>{let w=DA(v,m,x);return x===w&&typeof x=="string"&&(w=DA(v,m,`${t}${x==="default"?"":Kn(x)}`,x)),h===!1?w:{[h]:w}})}function e(t){var i;const{sx:s,theme:o={}}=t||{};if(!s)return null;const l=(i=o.unstable_sxConfig)!=null?i:Bx;function u(h){let d=h;if(typeof h=="function")d=h(o);else if(typeof h!="object")return h;if(!d)return null;const m=QV(o.breakpoints),_=Object.keys(m);let v=m;return Object.keys(d).forEach(S=>{const x=Pne(d[S],o);if(x!=null)if(typeof x=="object")if(l[S])v=S$(v,n(S,x,o,l));else{const w=Wp({theme:o},x,A=>({[S]:A}));Bne(w,x)?v[S]=e({sx:x,theme:o}):v=S$(v,w)}else v=S$(v,n(S,x,o,l))}),qV(_,v)}return Array.isArray(s)?s.map(u):u(s)}return e}const t8=e8();t8.filterProps=["sx"];const Px=t8;function n8(n,e){const t=this;return t.vars&&typeof t.getColorSchemeSelector=="function"?{[t.getColorSchemeSelector(n).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:t.palette.mode===n?e:{}}const Fne=["breakpoints","palette","spacing","shape"];function pS(n={},...e){const{breakpoints:t={},palette:i={},spacing:s,shape:o={}}=n,l=tr(n,Fne),u=JV(t),h=sne(s);let d=sp({breakpoints:u,direction:"ltr",components:{},palette:ze({mode:"light"},i),spacing:h,shape:ze({},Kte,o)},l);return d.applyStyles=n8,d=e.reduce((m,_)=>sp(m,_),d),d.unstable_sxConfig=ze({},Bx,l==null?void 0:l.unstable_sxConfig),d.unstable_sx=function(_){return Px({sx:_,theme:this})},d}const Une=Object.freeze(Object.defineProperty({__proto__:null,default:pS,private_createBreakpoints:JV,unstable_applyStyles:n8},Symbol.toStringTag,{value:"Module"}));function zne(n){return Object.keys(n).length===0}function Hne(n=null){const e=he.useContext(UI);return!e||zne(e)?n:e}const Gne=pS();function YI(n=Gne){return Hne(n)}function Wne({styles:n,themeId:e,defaultTheme:t={}}){const i=YI(t),s=typeof n=="function"?n(e&&i[e]||i):n;return Ve.jsx(XV,{styles:s})}const Vne=["sx"],jne=n=>{var e,t;const i={systemProps:{},otherProps:{}},s=(e=n==null||(t=n.theme)==null?void 0:t.unstable_sxConfig)!=null?e:Bx;return Object.keys(n).forEach(o=>{s[o]?i.systemProps[o]=n[o]:i.otherProps[o]=n[o]}),i};function Fx(n){const{sx:e}=n,t=tr(n,Vne),{systemProps:i,otherProps:s}=jne(t);let o;return Array.isArray(e)?o=[i,...e]:typeof e=="function"?o=(...l)=>{const u=e(...l);return V0(u)?ze({},i,u):i}:o=ze({},i,e),ze({},s,{sx:o})}const Xne=Object.freeze(Object.defineProperty({__proto__:null,default:Px,extendSxProp:Fx,unstable_createStyleFunctionSx:e8,unstable_defaultSxConfig:Bx},Symbol.toStringTag,{value:"Module"})),Sz=n=>n,Yne=()=>{let n=Sz;return{configure(e){n=e},generate(e){return n(e)},reset(){n=Sz}}},Kne=Yne(),YB=Kne;function r8(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=r8(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function kr(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=r8(n))&&(i&&(i+=" "),i+=e);return i}const Jne=["className","component"];function Qne(n={}){const{themeId:e,defaultTheme:t,defaultClassName:i="MuiBox-root",generateClassName:s}=n,o=HB("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(Px);return he.forwardRef(function(h,d){const m=YI(t),_=Fx(h),{className:v,component:S="div"}=_,x=tr(_,Jne);return Ve.jsx(o,ze({as:S,ref:d,className:kr(v,s?s(i):i),theme:e&&m[e]||m},x))})}const qne={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function fs(n,e,t="Mui"){const i=qne[e];return i?`${t}-${i}`:`${YB.generate(n)}-${e}`}function Rs(n,e,t="Mui"){const i={};return e.forEach(s=>{i[s]=fs(n,s,t)}),i}var i8={exports:{}},bo={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KB=Symbol.for("react.element"),JB=Symbol.for("react.portal"),KI=Symbol.for("react.fragment"),JI=Symbol.for("react.strict_mode"),QI=Symbol.for("react.profiler"),qI=Symbol.for("react.provider"),ZI=Symbol.for("react.context"),Zne=Symbol.for("react.server_context"),eR=Symbol.for("react.forward_ref"),tR=Symbol.for("react.suspense"),nR=Symbol.for("react.suspense_list"),rR=Symbol.for("react.memo"),iR=Symbol.for("react.lazy"),ere=Symbol.for("react.offscreen"),s8;s8=Symbol.for("react.module.reference");function wm(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case KB:switch(n=n.type,n){case KI:case QI:case JI:case tR:case nR:return n;default:switch(n=n&&n.$$typeof,n){case Zne:case ZI:case eR:case iR:case rR:case qI:return n;default:return e}}case JB:return e}}}bo.ContextConsumer=ZI;bo.ContextProvider=qI;bo.Element=KB;bo.ForwardRef=eR;bo.Fragment=KI;bo.Lazy=iR;bo.Memo=rR;bo.Portal=JB;bo.Profiler=QI;bo.StrictMode=JI;bo.Suspense=tR;bo.SuspenseList=nR;bo.isAsyncMode=function(){return!1};bo.isConcurrentMode=function(){return!1};bo.isContextConsumer=function(n){return wm(n)===ZI};bo.isContextProvider=function(n){return wm(n)===qI};bo.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===KB};bo.isForwardRef=function(n){return wm(n)===eR};bo.isFragment=function(n){return wm(n)===KI};bo.isLazy=function(n){return wm(n)===iR};bo.isMemo=function(n){return wm(n)===rR};bo.isPortal=function(n){return wm(n)===JB};bo.isProfiler=function(n){return wm(n)===QI};bo.isStrictMode=function(n){return wm(n)===JI};bo.isSuspense=function(n){return wm(n)===tR};bo.isSuspenseList=function(n){return wm(n)===nR};bo.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===KI||n===QI||n===JI||n===tR||n===nR||n===ere||typeof n=="object"&&n!==null&&(n.$$typeof===iR||n.$$typeof===rR||n.$$typeof===qI||n.$$typeof===ZI||n.$$typeof===eR||n.$$typeof===s8||n.getModuleId!==void 0)};bo.typeOf=wm;i8.exports=bo;var Ez=i8.exports;const tre=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o8(n){const e=`${n}`.match(tre);return e&&e[1]||""}function a8(n,e=""){return n.displayName||n.name||o8(n)||e}function $z(n,e,t){const i=a8(e);return n.displayName||(i!==""?`${t}(${i})`:t)}function nre(n){if(n!=null){if(typeof n=="string")return n;if(typeof n=="function")return a8(n,"Component");if(typeof n=="object")switch(n.$$typeof){case Ez.ForwardRef:return $z(n,n.render,"ForwardRef");case Ez.Memo:return $z(n,n.type,"memo");default:return}}}const rre=Object.freeze(Object.defineProperty({__proto__:null,default:nre,getFunctionName:o8},Symbol.toStringTag,{value:"Module"})),ire=["ownerState"],sre=["variants"],ore=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function are(n){return Object.keys(n).length===0}function lre(n){return typeof n=="string"&&n.charCodeAt(0)>96}function b2(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const ure=pS(),cre=n=>n&&n.charAt(0).toLowerCase()+n.slice(1);function vC({defaultTheme:n,theme:e,themeId:t}){return are(e)?n:e[t]||e}function hre(n){return n?(e,t)=>t[n]:null}function GM(n,e){let{ownerState:t}=e,i=tr(e,ire);const s=typeof n=="function"?n(ze({ownerState:t},i)):n;if(Array.isArray(s))return s.flatMap(o=>GM(o,ze({ownerState:t},i)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=tr(s,sre);return o.forEach(h=>{let d=!0;typeof h.props=="function"?d=h.props(ze({ownerState:t},i,t)):Object.keys(h.props).forEach(m=>{(t==null?void 0:t[m])!==h.props[m]&&i[m]!==h.props[m]&&(d=!1)}),d&&(Array.isArray(u)||(u=[u]),u.push(typeof h.style=="function"?h.style(ze({ownerState:t},i,t)):h.style))}),u}return s}function dre(n={}){const{themeId:e,defaultTheme:t=ure,rootShouldForwardProp:i=b2,slotShouldForwardProp:s=b2}=n,o=l=>Px(ze({},l,{theme:vC(ze({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{YV(l,z=>z.filter(H=>!(H!=null&&H.__mui_systemSx)));const{name:h,slot:d,skipVariantsResolver:m,skipSx:_,overridesResolver:v=hre(cre(d))}=u,S=tr(u,ore),x=m!==void 0?m:d&&d!=="Root"&&d!=="root"||!1,w=_||!1;let A,k=b2;d==="Root"||d==="root"?k=i:d?k=s:lre(l)&&(k=void 0);const O=HB(l,ze({shouldForwardProp:k,label:A},S)),D=z=>typeof z=="function"&&z.__emotion_real!==z||V0(z)?H=>GM(z,ze({},H,{theme:vC({theme:H.theme,defaultTheme:t,themeId:e})})):z,L=(z,...H)=>{let U=D(z);const P=H?H.map(D):[];h&&v&&P.push(re=>{const ie=vC(ze({},re,{defaultTheme:t,themeId:e}));if(!ie.components||!ie.components[h]||!ie.components[h].styleOverrides)return null;const de=ie.components[h].styleOverrides,oe={};return Object.entries(de).forEach(([ce,me])=>{oe[ce]=GM(me,ze({},re,{theme:ie}))}),v(re,oe)}),h&&!x&&P.push(re=>{var ie;const de=vC(ze({},re,{defaultTheme:t,themeId:e})),oe=de==null||(ie=de.components)==null||(ie=ie[h])==null?void 0:ie.variants;return GM({variants:oe},ze({},re,{theme:de}))}),w||P.push(o);const K=P.length-H.length;if(Array.isArray(z)&&K>0){const re=new Array(K).fill("");U=[...z,...re],U.raw=[...z.raw,...re]}const ee=O(U,...P);return l.muiName&&(ee.muiName=l.muiName),ee};return O.withConfig&&(L.withConfig=O.withConfig),L}}const l8=dre();function QB(n,e){const t=ze({},e);return Object.keys(n).forEach(i=>{if(i.toString().match(/^(components|slots)$/))t[i]=ze({},n[i],t[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const s=n[i]||{},o=e[i];t[i]={},!o||!Object.keys(o)?t[i]=s:!s||!Object.keys(s)?t[i]=o:(t[i]=ze({},o),Object.keys(s).forEach(l=>{t[i][l]=QB(s[l],o[l])}))}else t[i]===void 0&&(t[i]=n[i])}),t}function pre(n){const{theme:e,name:t,props:i}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?i:QB(e.components[t].defaultProps,i)}function qB({props:n,name:e,defaultTheme:t,themeId:i}){let s=YI(t);return i&&(s=s[i]||s),pre({theme:s,name:e,props:n})}const fre=typeof window<"u"?he.useLayoutEffect:he.useEffect,Sv=fre;function mre(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}const gre=Object.freeze(Object.defineProperty({__proto__:null,default:mre},Symbol.toStringTag,{value:"Module"}));function oD(...n){return n.reduce((e,t)=>t==null?e:function(...s){e.apply(this,s),t.apply(this,s)},()=>{})}function ZB(n,e=166){let t;function i(...s){const o=()=>{n.apply(this,s)};clearTimeout(t),t=setTimeout(o,e)}return i.clear=()=>{clearTimeout(t)},i}function _re(n,e){return()=>null}function WM(n,e){var t,i;return he.isValidElement(n)&&e.indexOf((t=n.type.muiName)!=null?t:(i=n.type)==null||(i=i._payload)==null||(i=i.value)==null?void 0:i.muiName)!==-1}function Hp(n){return n&&n.ownerDocument||document}function Ev(n){return Hp(n).defaultView||window}function vre(n,e){return()=>null}function NA(n,e){typeof n=="function"?n(e):n&&(n.current=e)}let xz=0;function yre(n){const[e,t]=he.useState(n),i=n||e;return he.useEffect(()=>{e==null&&(xz+=1,t(`mui-${xz}`))},[e]),i}const wz=ZO.useId;function sR(n){if(wz!==void 0){const e=wz();return n??e}return yre(n)}function bre(n,e,t,i,s){return null}function BA({controlled:n,default:e,name:t,state:i="value"}){const{current:s}=he.useRef(n!==void 0),[o,l]=he.useState(e),u=s?n:o,h=he.useCallback(d=>{s||l(d)},[]);return[u,h]}function Uy(n){const e=he.useRef(n);return Sv(()=>{e.current=n}),he.useRef((...t)=>(0,e.current)(...t)).current}function lp(...n){return he.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{NA(t,e)})},n)}const Cz={};function Tre(n,e){const t=he.useRef(Cz);return t.current===Cz&&(t.current=n(e)),t}const Sre=[];function Ere(n){he.useEffect(n,Sre)}class oR{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new oR}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function u8(){const n=Tre(oR.create).current;return Ere(n.disposeEffect),n}let aR=!0,aD=!1;const $re=new oR,xre={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function wre(n){const{type:e,tagName:t}=n;return!!(t==="INPUT"&&xre[e]&&!n.readOnly||t==="TEXTAREA"&&!n.readOnly||n.isContentEditable)}function Cre(n){n.metaKey||n.altKey||n.ctrlKey||(aR=!0)}function T2(){aR=!1}function Mre(){this.visibilityState==="hidden"&&aD&&(aR=!0)}function Are(n){n.addEventListener("keydown",Cre,!0),n.addEventListener("mousedown",T2,!0),n.addEventListener("pointerdown",T2,!0),n.addEventListener("touchstart",T2,!0),n.addEventListener("visibilitychange",Mre,!0)}function Ire(n){const{target:e}=n;try{return e.matches(":focus-visible")}catch{}return aR||wre(e)}function c8(){const n=he.useCallback(s=>{s!=null&&Are(s.ownerDocument)},[]),e=he.useRef(!1);function t(){return e.current?(aD=!0,$re.start(100,()=>{aD=!1}),e.current=!1,!0):!1}function i(s){return Ire(s)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:i,onBlur:t,ref:n}}function h8(n){const e=n.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function ks(n,e,t=void 0){const i={};return Object.keys(n).forEach(s=>{i[s]=n[s].reduce((o,l)=>{if(l){const u=e(l);u!==""&&o.push(u),t&&t[l]&&o.push(t[l])}return o},[]).join(" ")}),i}const Rre=he.createContext(),kre=()=>{const n=he.useContext(Rre);return n??!1};function ix(n){"@babel/helpers - typeof";return ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ix(n)}function Ore(n,e){if(ix(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(ix(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Lre(n){var e=Ore(n,"string");return ix(e)=="symbol"?e:e+""}const Dre=["className","component","disableGutters","fixed","maxWidth","classes"],Nre=pS(),Bre=l8("div",{name:"MuiContainer",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`maxWidth${Kn(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),Pre=n=>qB({props:n,name:"MuiContainer",defaultTheme:Nre}),Fre=(n,e)=>{const t=h=>fs(e,h),{classes:i,fixed:s,disableGutters:o,maxWidth:l}=n,u={root:["root",l&&`maxWidth${Kn(String(l))}`,s&&"fixed",o&&"disableGutters"]};return ks(u,t,i)};function Ure(n={}){const{createStyledComponent:e=Bre,useThemeProps:t=Pre,componentName:i="MuiContainer"}=n,s=e(({theme:l,ownerState:u})=>ze({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!u.disableGutters&&{paddingLeft:l.spacing(2),paddingRight:l.spacing(2),[l.breakpoints.up("sm")]:{paddingLeft:l.spacing(3),paddingRight:l.spacing(3)}}),({theme:l,ownerState:u})=>u.fixed&&Object.keys(l.breakpoints.values).reduce((h,d)=>{const m=d,_=l.breakpoints.values[m];return _!==0&&(h[l.breakpoints.up(m)]={maxWidth:`${_}${l.breakpoints.unit}`}),h},{}),({theme:l,ownerState:u})=>ze({},u.maxWidth==="xs"&&{[l.breakpoints.up("xs")]:{maxWidth:Math.max(l.breakpoints.values.xs,444)}},u.maxWidth&&u.maxWidth!=="xs"&&{[l.breakpoints.up(u.maxWidth)]:{maxWidth:`${l.breakpoints.values[u.maxWidth]}${l.breakpoints.unit}`}}));return he.forwardRef(function(u,h){const d=t(u),{className:m,component:_="div",disableGutters:v=!1,fixed:S=!1,maxWidth:x="lg"}=d,w=tr(d,Dre),A=ze({},d,{component:_,disableGutters:v,fixed:S,maxWidth:x}),k=Fre(A,i);return Ve.jsx(s,ze({as:_,ownerState:A,className:kr(k.root,m),ref:h},w))})}const zre=["component","direction","spacing","divider","children","className","useFlexGap"],Hre=pS(),Gre=l8("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root});function Wre(n){return qB({props:n,name:"MuiStack",defaultTheme:Hre})}function Vre(n,e){const t=he.Children.toArray(n).filter(Boolean);return t.reduce((i,s,o)=>(i.push(s),o<t.length-1&&i.push(he.cloneElement(e,{key:`separator-${o}`})),i),[])}const jre=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],Xre=({ownerState:n,theme:e})=>{let t=ze({display:"flex",flexDirection:"column"},Wp({theme:e},qy({values:n.direction,breakpoints:e.breakpoints.values}),i=>({flexDirection:i})));if(n.spacing){const i=jB(e),s=Object.keys(e.breakpoints.values).reduce((h,d)=>((typeof n.spacing=="object"&&n.spacing[d]!=null||typeof n.direction=="object"&&n.direction[d]!=null)&&(h[d]=!0),h),{}),o=qy({values:n.direction,base:s}),l=qy({values:n.spacing,base:s});typeof o=="object"&&Object.keys(o).forEach((h,d,m)=>{if(!o[h]){const v=d>0?o[m[d-1]]:"column";o[h]=v}}),t=sp(t,Wp({theme:e},l,(h,d)=>n.useFlexGap?{gap:fb(i,h)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${jre(d?o[d]:n.direction)}`]:fb(i,h)}}))}return t=Jte(e.breakpoints,t),t};function Yre(n={}){const{createStyledComponent:e=Gre,useThemeProps:t=Wre,componentName:i="MuiStack"}=n,s=()=>ks({root:["root"]},h=>fs(i,h),{}),o=e(Xre);return he.forwardRef(function(h,d){const m=t(h),_=Fx(m),{component:v="div",direction:S="column",spacing:x=0,divider:w,children:A,className:k,useFlexGap:O=!1}=_,D=tr(_,zre),L={direction:S,spacing:x,useFlexGap:O},z=s();return Ve.jsx(o,ze({as:v,ownerState:L,ref:d,className:kr(z.root,k)},D,{children:w?Vre(A,w):A}))})}function Kre(n,e){return ze({toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}}},e)}var Xu={},d8={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(d8);var fS=d8.exports;const Jre=a0(Dee),Qre=a0(gre);var p8=fS;Object.defineProperty(Xu,"__esModule",{value:!0});var Jg=Xu.alpha=_8;Xu.blend=cie;Xu.colorChannel=void 0;var qre=Xu.darken=tP;Xu.decomposeColor=Em;Xu.emphasize=v8;var Zre=Xu.getContrastRatio=sie;Xu.getLuminance=PA;Xu.hexToRgb=f8;Xu.hslToRgb=g8;var eie=Xu.lighten=nP;Xu.private_safeAlpha=oie;Xu.private_safeColorChannel=void 0;Xu.private_safeDarken=aie;Xu.private_safeEmphasize=uie;Xu.private_safeLighten=lie;Xu.recomposeColor=mS;Xu.rgbToHex=iie;var Mz=p8(Jre),tie=p8(Qre);function eP(n,e=0,t=1){return(0,tie.default)(n,e,t)}function f8(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(i=>i+i)),t?`rgb${t.length===4?"a":""}(${t.map((i,s)=>s<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function nie(n){const e=n.toString(16);return e.length===1?`0${e}`:e}function Em(n){if(n.type)return n;if(n.charAt(0)==="#")return Em(f8(n));const e=n.indexOf("("),t=n.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(t)===-1)throw new Error((0,Mz.default)(9,n));let i=n.substring(e+1,n.length-1),s;if(t==="color"){if(i=i.split(" "),s=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error((0,Mz.default)(10,s))}else i=i.split(",");return i=i.map(o=>parseFloat(o)),{type:t,values:i,colorSpace:s}}const m8=n=>{const e=Em(n);return e.values.slice(0,3).map((t,i)=>e.type.indexOf("hsl")!==-1&&i!==0?`${t}%`:t).join(" ")};Xu.colorChannel=m8;const rie=(n,e)=>{try{return m8(n)}catch{return n}};Xu.private_safeColorChannel=rie;function mS(n){const{type:e,colorSpace:t}=n;let{values:i}=n;return e.indexOf("rgb")!==-1?i=i.map((s,o)=>o<3?parseInt(s,10):s):e.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.indexOf("color")!==-1?i=`${t} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function iie(n){if(n.indexOf("#")===0)return n;const{values:e}=Em(n);return`#${e.map((t,i)=>nie(i===3?Math.round(255*t):t)).join("")}`}function g8(n){n=Em(n);const{values:e}=n,t=e[0],i=e[1]/100,s=e[2]/100,o=i*Math.min(s,1-s),l=(d,m=(d+t/30)%12)=>s-o*Math.max(Math.min(m-3,9-m,1),-1);let u="rgb";const h=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return n.type==="hsla"&&(u+="a",h.push(e[3])),mS({type:u,values:h})}function PA(n){n=Em(n);let e=n.type==="hsl"||n.type==="hsla"?Em(g8(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function sie(n,e){const t=PA(n),i=PA(e);return(Math.max(t,i)+.05)/(Math.min(t,i)+.05)}function _8(n,e){return n=Em(n),e=eP(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,mS(n)}function oie(n,e,t){try{return _8(n,e)}catch{return n}}function tP(n,e){if(n=Em(n),e=eP(e),n.type.indexOf("hsl")!==-1)n.values[2]*=1-e;else if(n.type.indexOf("rgb")!==-1||n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]*=1-e;return mS(n)}function aie(n,e,t){try{return tP(n,e)}catch{return n}}function nP(n,e){if(n=Em(n),e=eP(e),n.type.indexOf("hsl")!==-1)n.values[2]+=(100-n.values[2])*e;else if(n.type.indexOf("rgb")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return mS(n)}function lie(n,e,t){try{return nP(n,e)}catch{return n}}function v8(n,e=.15){return PA(n)>.5?tP(n,e):nP(n,e)}function uie(n,e,t){try{return v8(n,e)}catch{return n}}function cie(n,e,t,i=1){const s=(h,d)=>Math.round((h**(1/i)*(1-t)+d**(1/i)*t)**i),o=Em(n),l=Em(e),u=[s(o.values[0],l.values[0]),s(o.values[1],l.values[1]),s(o.values[2],l.values[2])];return mS({type:"rgb",values:u})}const hie=["mode","contrastThreshold","tonalOffset"],Az={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ex.white,default:ex.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},S2={text:{primary:ex.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ex.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Iz(n,e,t,i){const s=i.light||i,o=i.dark||i*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=eie(n.main,s):e==="dark"&&(n.dark=qre(n.main,o)))}function die(n="light"){return n==="dark"?{main:E1[200],light:E1[50],dark:E1[400]}:{main:E1[700],light:E1[400],dark:E1[800]}}function pie(n="light"){return n==="dark"?{main:S1[200],light:S1[50],dark:S1[400]}:{main:S1[500],light:S1[300],dark:S1[700]}}function fie(n="light"){return n==="dark"?{main:T1[500],light:T1[300],dark:T1[700]}:{main:T1[700],light:T1[400],dark:T1[800]}}function mie(n="light"){return n==="dark"?{main:$1[400],light:$1[300],dark:$1[700]}:{main:$1[700],light:$1[500],dark:$1[900]}}function gie(n="light"){return n==="dark"?{main:x1[400],light:x1[300],dark:x1[700]}:{main:x1[800],light:x1[500],dark:x1[900]}}function _ie(n="light"){return n==="dark"?{main:ME[400],light:ME[300],dark:ME[700]}:{main:"#ed6c02",light:ME[500],dark:ME[900]}}function vie(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:i=.2}=n,s=tr(n,hie),o=n.primary||die(e),l=n.secondary||pie(e),u=n.error||fie(e),h=n.info||mie(e),d=n.success||gie(e),m=n.warning||_ie(e);function _(w){return Zre(w,S2.text.primary)>=t?S2.text.primary:Az.text.primary}const v=({color:w,name:A,mainShade:k=500,lightShade:O=300,darkShade:D=700})=>{if(w=ze({},w),!w.main&&w[k]&&(w.main=w[k]),!w.hasOwnProperty("main"))throw new Error(pb(11,A?` (${A})`:"",k));if(typeof w.main!="string")throw new Error(pb(12,A?` (${A})`:"",JSON.stringify(w.main)));return Iz(w,"light",O,i),Iz(w,"dark",D,i),w.contrastText||(w.contrastText=_(w.main)),w},S={dark:S2,light:Az};return sp(ze({common:ze({},ex),mode:e,primary:v({color:o,name:"primary"}),secondary:v({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:u,name:"error"}),warning:v({color:m,name:"warning"}),info:v({color:h,name:"info"}),success:v({color:d,name:"success"}),grey:Lee,contrastThreshold:t,getContrastText:_,augmentColor:v,tonalOffset:i},S[e]),s)}const yie=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function bie(n){return Math.round(n*1e5)/1e5}const Rz={textTransform:"uppercase"},kz='"Roboto", "Helvetica", "Arial", sans-serif';function Tie(n,e){const t=typeof e=="function"?e(n):e,{fontFamily:i=kz,fontSize:s=14,fontWeightLight:o=300,fontWeightRegular:l=400,fontWeightMedium:u=500,fontWeightBold:h=700,htmlFontSize:d=16,allVariants:m,pxToRem:_}=t,v=tr(t,yie),S=s/14,x=_||(k=>`${k/d*S}rem`),w=(k,O,D,L,z)=>ze({fontFamily:i,fontWeight:k,fontSize:x(O),lineHeight:D},i===kz?{letterSpacing:`${bie(L/O)}em`}:{},z,m),A={h1:w(o,96,1.167,-1.5),h2:w(o,60,1.2,-.5),h3:w(l,48,1.167,0),h4:w(l,34,1.235,.25),h5:w(l,24,1.334,0),h6:w(u,20,1.6,.15),subtitle1:w(l,16,1.75,.15),subtitle2:w(u,14,1.57,.1),body1:w(l,16,1.5,.15),body2:w(l,14,1.43,.15),button:w(u,14,1.75,.4,Rz),caption:w(l,12,1.66,.4),overline:w(l,12,2.66,1,Rz),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return sp(ze({htmlFontSize:d,pxToRem:x,fontFamily:i,fontSize:s,fontWeightLight:o,fontWeightRegular:l,fontWeightMedium:u,fontWeightBold:h},A),v,{clone:!1})}const Sie=.2,Eie=.14,$ie=.12;function ol(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${Sie})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${Eie})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${$ie})`].join(",")}const xie=["none",ol(0,2,1,-1,0,1,1,0,0,1,3,0),ol(0,3,1,-2,0,2,2,0,0,1,5,0),ol(0,3,3,-2,0,3,4,0,0,1,8,0),ol(0,2,4,-1,0,4,5,0,0,1,10,0),ol(0,3,5,-1,0,5,8,0,0,1,14,0),ol(0,3,5,-1,0,6,10,0,0,1,18,0),ol(0,4,5,-2,0,7,10,1,0,2,16,1),ol(0,5,5,-3,0,8,10,1,0,3,14,2),ol(0,5,6,-3,0,9,12,1,0,3,16,2),ol(0,6,6,-3,0,10,14,1,0,4,18,3),ol(0,6,7,-4,0,11,15,1,0,4,20,3),ol(0,7,8,-4,0,12,17,2,0,5,22,4),ol(0,7,8,-4,0,13,19,2,0,5,24,4),ol(0,7,9,-4,0,14,21,2,0,5,26,4),ol(0,8,9,-5,0,15,22,2,0,6,28,5),ol(0,8,10,-5,0,16,24,2,0,6,30,5),ol(0,8,11,-5,0,17,26,2,0,6,32,5),ol(0,9,11,-5,0,18,28,2,0,7,34,6),ol(0,9,12,-6,0,19,29,2,0,7,36,6),ol(0,10,13,-6,0,20,31,3,0,8,38,7),ol(0,10,13,-6,0,21,33,3,0,8,40,7),ol(0,10,14,-6,0,22,35,3,0,8,42,7),ol(0,11,14,-7,0,23,36,3,0,9,44,8),ol(0,11,15,-7,0,24,38,3,0,9,46,8)],wie=["duration","easing","delay"],Cie={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Mie={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Oz(n){return`${Math.round(n)}ms`}function Aie(n){if(!n)return 0;const e=n/36;return Math.round((4+15*e**.25+e/5)*10)}function Iie(n){const e=ze({},Cie,n.easing),t=ze({},Mie,n.duration);return ze({getAutoHeightDuration:Aie,create:(s=["all"],o={})=>{const{duration:l=t.standard,easing:u=e.easeInOut,delay:h=0}=o;return tr(o,wie),(Array.isArray(s)?s:[s]).map(d=>`${d} ${typeof l=="string"?l:Oz(l)} ${u} ${typeof h=="string"?h:Oz(h)}`).join(",")}},n,{easing:e,duration:t})}const Rie={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},kie=Rie,Oie=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function y8(n={},...e){const{mixins:t={},palette:i={},transitions:s={},typography:o={}}=n,l=tr(n,Oie);if(n.vars)throw new Error(pb(18));const u=vie(i),h=pS(n);let d=sp(h,{mixins:Kre(h.breakpoints,t),palette:u,shadows:xie.slice(),typography:Tie(u,o),transitions:Iie(s),zIndex:ze({},kie)});return d=sp(d,l),d=e.reduce((m,_)=>sp(m,_),d),d.unstable_sxConfig=ze({},Bx,l==null?void 0:l.unstable_sxConfig),d.unstable_sx=function(_){return Px({sx:_,theme:this})},d}const Lie=y8(),lR=Lie;function uR(){const n=YI(lR);return n[Lx]||n}function js({props:n,name:e}){return qB({props:n,name:e,defaultTheme:lR,themeId:Lx})}var Ux={};const Die=a0(Nee);var E2={exports:{}},Lz;function Nie(){return Lz||(Lz=1,function(n){function e(t,i){if(t==null)return{};var s={},o=Object.keys(t),l,u;for(u=0;u<o.length;u++)l=o[u],!(i.indexOf(l)>=0)&&(s[l]=t[l]);return s}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(E2)),E2.exports}const Bie=a0(Wte),Pie=a0(Vte),Fie=a0(qte),Uie=a0(rre),zie=a0(Une),Hie=a0(Xne);var gS=fS;Object.defineProperty(Ux,"__esModule",{value:!0});var Gie=Ux.default=nse;Ux.shouldForwardProp=VM;Ux.systemDefaultTheme=void 0;var um=gS(Die),lD=gS(Nie()),Dz=Jie(Bie),Wie=Pie;gS(Fie);gS(Uie);var Vie=gS(zie),jie=gS(Hie);const Xie=["ownerState"],Yie=["variants"],Kie=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function b8(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(b8=function(i){return i?t:e})(n)}function Jie(n,e){if(!e&&n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=b8(e);if(t&&t.has(n))return t.get(n);var i={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var l=s?Object.getOwnPropertyDescriptor(n,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=n[o]}return i.default=n,t&&t.set(n,i),i}function Qie(n){return Object.keys(n).length===0}function qie(n){return typeof n=="string"&&n.charCodeAt(0)>96}function VM(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const Zie=Ux.systemDefaultTheme=(0,Vie.default)(),ese=n=>n&&n.charAt(0).toLowerCase()+n.slice(1);function yC({defaultTheme:n,theme:e,themeId:t}){return Qie(e)?n:e[t]||e}function tse(n){return n?(e,t)=>t[n]:null}function jM(n,e){let{ownerState:t}=e,i=(0,lD.default)(e,Xie);const s=typeof n=="function"?n((0,um.default)({ownerState:t},i)):n;if(Array.isArray(s))return s.flatMap(o=>jM(o,(0,um.default)({ownerState:t},i)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=(0,lD.default)(s,Yie);return o.forEach(h=>{let d=!0;typeof h.props=="function"?d=h.props((0,um.default)({ownerState:t},i,t)):Object.keys(h.props).forEach(m=>{(t==null?void 0:t[m])!==h.props[m]&&i[m]!==h.props[m]&&(d=!1)}),d&&(Array.isArray(u)||(u=[u]),u.push(typeof h.style=="function"?h.style((0,um.default)({ownerState:t},i,t)):h.style))}),u}return s}function nse(n={}){const{themeId:e,defaultTheme:t=Zie,rootShouldForwardProp:i=VM,slotShouldForwardProp:s=VM}=n,o=l=>(0,jie.default)((0,um.default)({},l,{theme:yC((0,um.default)({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{(0,Dz.internal_processStyles)(l,z=>z.filter(H=>!(H!=null&&H.__mui_systemSx)));const{name:h,slot:d,skipVariantsResolver:m,skipSx:_,overridesResolver:v=tse(ese(d))}=u,S=(0,lD.default)(u,Kie),x=m!==void 0?m:d&&d!=="Root"&&d!=="root"||!1,w=_||!1;let A,k=VM;d==="Root"||d==="root"?k=i:d?k=s:qie(l)&&(k=void 0);const O=(0,Dz.default)(l,(0,um.default)({shouldForwardProp:k,label:A},S)),D=z=>typeof z=="function"&&z.__emotion_real!==z||(0,Wie.isPlainObject)(z)?H=>jM(z,(0,um.default)({},H,{theme:yC({theme:H.theme,defaultTheme:t,themeId:e})})):z,L=(z,...H)=>{let U=D(z);const P=H?H.map(D):[];h&&v&&P.push(re=>{const ie=yC((0,um.default)({},re,{defaultTheme:t,themeId:e}));if(!ie.components||!ie.components[h]||!ie.components[h].styleOverrides)return null;const de=ie.components[h].styleOverrides,oe={};return Object.entries(de).forEach(([ce,me])=>{oe[ce]=jM(me,(0,um.default)({},re,{theme:ie}))}),v(re,oe)}),h&&!x&&P.push(re=>{var ie;const de=yC((0,um.default)({},re,{defaultTheme:t,themeId:e})),oe=de==null||(ie=de.components)==null||(ie=ie[h])==null?void 0:ie.variants;return jM({variants:oe},(0,um.default)({},re,{theme:de}))}),w||P.push(o);const K=P.length-H.length;if(Array.isArray(z)&&K>0){const re=new Array(K).fill("");U=[...z,...re],U.raw=[...z.raw,...re]}const ee=O(U,...P);return l.muiName&&(ee.muiName=l.muiName),ee};return O.withConfig&&(L.withConfig=O.withConfig),L}}function T8(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const rse=n=>T8(n)&&n!=="classes",Lf=rse,jn=Gie({themeId:Lx,defaultTheme:lR,rootShouldForwardProp:Lf}),Nz=n=>{let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,(e/100).toFixed(2)};function ise(n){return fs("MuiSvgIcon",n)}Rs("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const sse=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],ose=n=>{const{color:e,fontSize:t,classes:i}=n,s={root:["root",e!=="inherit"&&`color${Kn(e)}`,`fontSize${Kn(t)}`]};return ks(s,ise,i)},ase=jn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${Kn(t.color)}`],e[`fontSize${Kn(t.fontSize)}`]]}})(({theme:n,ownerState:e})=>{var t,i,s,o,l,u,h,d,m,_,v,S,x;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(t=n.transitions)==null||(i=t.create)==null?void 0:i.call(t,"fill",{duration:(s=n.transitions)==null||(s=s.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((o=n.typography)==null||(l=o.pxToRem)==null?void 0:l.call(o,20))||"1.25rem",medium:((u=n.typography)==null||(h=u.pxToRem)==null?void 0:h.call(u,24))||"1.5rem",large:((d=n.typography)==null||(m=d.pxToRem)==null?void 0:m.call(d,35))||"2.1875rem"}[e.fontSize],color:(_=(v=(n.vars||n).palette)==null||(v=v[e.color])==null?void 0:v.main)!=null?_:{action:(S=(n.vars||n).palette)==null||(S=S.action)==null?void 0:S.active,disabled:(x=(n.vars||n).palette)==null||(x=x.action)==null?void 0:x.disabled,inherit:void 0}[e.color]}}),uD=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiSvgIcon"}),{children:s,className:o,color:l="inherit",component:u="svg",fontSize:h="medium",htmlColor:d,inheritViewBox:m=!1,titleAccess:_,viewBox:v="0 0 24 24"}=i,S=tr(i,sse),x=he.isValidElement(s)&&s.type==="svg",w=ze({},i,{color:l,component:u,fontSize:h,instanceFontSize:e.fontSize,inheritViewBox:m,viewBox:v,hasSvgAsChild:x}),A={};m||(A.viewBox=v);const k=ose(w);return Ve.jsxs(ase,ze({as:u,className:kr(k.root,o),focusable:"false",color:d,"aria-hidden":_?void 0:!0,role:_?"img":void 0,ref:t},A,S,x&&s.props,{ownerState:w,children:[x?s.props.children:s,_?Ve.jsx("title",{children:_}):null]}))});uD.muiName="SvgIcon";function _S(n,e){function t(i,s){return Ve.jsx(uD,ze({"data-testid":`${e}Icon`,ref:s},i,{children:n}))}return t.muiName=uD.muiName,he.memo(he.forwardRef(t))}const lse={configure:n=>{YB.configure(n)}},use=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Kn,createChainedFunction:oD,createSvgIcon:_S,debounce:ZB,deprecatedPropType:_re,isMuiElement:WM,ownerDocument:Hp,ownerWindow:Ev,requirePropFactory:vre,setRef:NA,unstable_ClassNameGenerator:lse,unstable_useEnhancedEffect:Sv,unstable_useId:sR,unsupportedProp:bre,useControlled:BA,useEventCallback:Uy,useForkRef:lp,useIsFocusVisible:c8},Symbol.toStringTag,{value:"Module"}));function cD(n,e){return cD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},cD(n,e)}function rP(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,cD(n,e)}const Bz={disabled:!1},FA=Sr.createContext(null);var cse=function(e){return e.scrollTop},i$="unmounted",wy="exited",Cy="entering",X1="entered",hD="exiting",l_=function(n){rP(e,n);function e(i,s){var o;o=n.call(this,i,s)||this;var l=s,u=l&&!l.isMounting?i.enter:i.appear,h;return o.appearStatus=null,i.in?u?(h=wy,o.appearStatus=Cy):h=X1:i.unmountOnExit||i.mountOnEnter?h=i$:h=wy,o.state={status:h},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===i$?{status:wy}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==Cy&&l!==X1&&(o=Cy):(l===Cy||l===X1)&&(o=hD)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,o,l,u;return o=l=u=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:u}},t.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===Cy){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:Vw.findDOMNode(this);l&&cse(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===wy&&this.setState({status:i$})},t.performEnter=function(s){var o=this,l=this.props.enter,u=this.context?this.context.isMounting:s,h=this.props.nodeRef?[u]:[Vw.findDOMNode(this),u],d=h[0],m=h[1],_=this.getTimeouts(),v=u?_.appear:_.enter;if(!s&&!l||Bz.disabled){this.safeSetState({status:X1},function(){o.props.onEntered(d)});return}this.props.onEnter(d,m),this.safeSetState({status:Cy},function(){o.props.onEntering(d,m),o.onTransitionEnd(v,function(){o.safeSetState({status:X1},function(){o.props.onEntered(d,m)})})})},t.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:Vw.findDOMNode(this);if(!o||Bz.disabled){this.safeSetState({status:wy},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:hD},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:wy},function(){s.props.onExited(u)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},t.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:Vw.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],d=h[0],m=h[1];this.props.addEndListener(d,m)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===i$)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=tr(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Sr.createElement(FA.Provider,{value:null},typeof l=="function"?l(s,u):Sr.cloneElement(Sr.Children.only(l),u))},e}(Sr.Component);l_.contextType=FA;l_.propTypes={};function w1(){}l_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:w1,onEntering:w1,onEntered:w1,onExit:w1,onExiting:w1,onExited:w1};l_.UNMOUNTED=i$;l_.EXITED=wy;l_.ENTERING=Cy;l_.ENTERED=X1;l_.EXITING=hD;const S8=l_;function hse(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function iP(n,e){var t=function(o){return e&&he.isValidElement(o)?e(o):o},i=Object.create(null);return n&&he.Children.map(n,function(s){return s}).forEach(function(s){i[s.key]=t(s)}),i}function dse(n,e){n=n||{},e=e||{};function t(m){return m in e?e[m]:n[m]}var i=Object.create(null),s=[];for(var o in n)o in e?s.length&&(i[o]=s,s=[]):s.push(o);var l,u={};for(var h in e){if(i[h])for(l=0;l<i[h].length;l++){var d=i[h][l];u[i[h][l]]=t(d)}u[h]=t(h)}for(l=0;l<s.length;l++)u[s[l]]=t(s[l]);return u}function zy(n,e,t){return t[e]!=null?t[e]:n.props[e]}function pse(n,e){return iP(n.children,function(t){return he.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:zy(t,"appear",n),enter:zy(t,"enter",n),exit:zy(t,"exit",n)})})}function fse(n,e,t){var i=iP(n.children),s=dse(e,i);return Object.keys(s).forEach(function(o){var l=s[o];if(he.isValidElement(l)){var u=o in e,h=o in i,d=e[o],m=he.isValidElement(d)&&!d.props.in;h&&(!u||m)?s[o]=he.cloneElement(l,{onExited:t.bind(null,l),in:!0,exit:zy(l,"exit",n),enter:zy(l,"enter",n)}):!h&&u&&!m?s[o]=he.cloneElement(l,{in:!1}):h&&u&&he.isValidElement(d)&&(s[o]=he.cloneElement(l,{onExited:t.bind(null,l),in:d.props.in,exit:zy(l,"exit",n),enter:zy(l,"enter",n)}))}}),s}var mse=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},gse={component:"div",childFactory:function(e){return e}},sP=function(n){rP(e,n);function e(i,s){var o;o=n.call(this,i,s)||this;var l=o.handleExited.bind(hse(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,u=o.handleExited,h=o.firstRender;return{children:h?pse(s,u):fse(s,l,u),firstRender:!1}},t.handleExited=function(s,o){var l=iP(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(u){var h=ze({},u.children);return delete h[s.key],{children:h}}))},t.render=function(){var s=this.props,o=s.component,l=s.childFactory,u=tr(s,["component","childFactory"]),h=this.state.contextValue,d=mse(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?Sr.createElement(FA.Provider,{value:h},d):Sr.createElement(FA.Provider,{value:h},Sr.createElement(o,u,d))},e}(Sr.Component);sP.propTypes={};sP.defaultProps=gse;const _se=sP,E8=n=>n.scrollTop;function UA(n,e){var t,i;const{timeout:s,easing:o,style:l={}}=n;return{duration:(t=l.transitionDuration)!=null?t:typeof s=="number"?s:s[e.mode]||0,easing:(i=l.transitionTimingFunction)!=null?i:typeof o=="object"?o[e.mode]:o,delay:l.transitionDelay}}function vse(n){return fs("MuiPaper",n)}Rs("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const yse=["className","component","elevation","square","variant"],bse=n=>{const{square:e,elevation:t,variant:i,classes:s}=n,o={root:["root",i,!e&&"rounded",i==="elevation"&&`elevation${t}`]};return ks(o,vse,s)},Tse=jn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(({theme:n,ownerState:e})=>{var t;return ze({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!e.square&&{borderRadius:n.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(n.vars||n).palette.divider}`},e.variant==="elevation"&&ze({boxShadow:(n.vars||n).shadows[e.elevation]},!n.vars&&n.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Jg("#fff",Nz(e.elevation))}, ${Jg("#fff",Nz(e.elevation))})`},n.vars&&{backgroundImage:(t=n.vars.overlays)==null?void 0:t[e.elevation]}))}),Sse=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiPaper"}),{className:s,component:o="div",elevation:l=1,square:u=!1,variant:h="elevation"}=i,d=tr(i,yse),m=ze({},i,{component:o,elevation:l,square:u,variant:h}),_=bse(m);return Ve.jsx(Tse,ze({as:o,ownerState:m,className:kr(_.root,s),ref:t},d))}),oP=Sse;function zA(n){return typeof n=="string"}function Ese(n,e,t){return n===void 0||zA(n)?e:ze({},e,{ownerState:ze({},e.ownerState,t)})}function $8(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(i=>i.match(/^on[A-Z]/)&&typeof n[i]=="function"&&!e.includes(i)).forEach(i=>{t[i]=n[i]}),t}function $se(n,e,t){return typeof n=="function"?n(e,t):n}function Pz(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function xse(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:i,externalForwardedProps:s,className:o}=n;if(!e){const S=kr(t==null?void 0:t.className,o,s==null?void 0:s.className,i==null?void 0:i.className),x=ze({},t==null?void 0:t.style,s==null?void 0:s.style,i==null?void 0:i.style),w=ze({},t,s,i);return S.length>0&&(w.className=S),Object.keys(x).length>0&&(w.style=x),{props:w,internalRef:void 0}}const l=$8(ze({},s,i)),u=Pz(i),h=Pz(s),d=e(l),m=kr(d==null?void 0:d.className,t==null?void 0:t.className,o,s==null?void 0:s.className,i==null?void 0:i.className),_=ze({},d==null?void 0:d.style,t==null?void 0:t.style,s==null?void 0:s.style,i==null?void 0:i.style),v=ze({},d,t,h,u);return m.length>0&&(v.className=m),Object.keys(_).length>0&&(v.style=_),{props:v,internalRef:d.ref}}const wse=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function FT(n){var e;const{elementType:t,externalSlotProps:i,ownerState:s,skipResolvingSlotProps:o=!1}=n,l=tr(n,wse),u=o?{}:$se(i,s),{props:h,internalRef:d}=xse(ze({},l,{externalSlotProps:u})),m=lp(d,u==null?void 0:u.ref,(e=n.additionalProps)==null?void 0:e.ref);return Ese(t,ze({},h,{ref:m}),s)}function Cse(n){const{className:e,classes:t,pulsate:i=!1,rippleX:s,rippleY:o,rippleSize:l,in:u,onExited:h,timeout:d}=n,[m,_]=he.useState(!1),v=kr(e,t.ripple,t.rippleVisible,i&&t.ripplePulsate),S={width:l,height:l,top:-(l/2)+o,left:-(l/2)+s},x=kr(t.child,m&&t.childLeaving,i&&t.childPulsate);return!u&&!m&&_(!0),he.useEffect(()=>{if(!u&&h!=null){const w=setTimeout(h,d);return()=>{clearTimeout(w)}}},[h,u,d]),Ve.jsx("span",{className:v,style:S,children:Ve.jsx("span",{className:x})})}const hm=Rs("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Mse=["center","classes","className"];let cR=n=>n,Fz,Uz,zz,Hz;const dD=550,Ase=80,Ise=dS(Fz||(Fz=cR`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Rse=dS(Uz||(Uz=cR`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),kse=dS(zz||(zz=cR`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Ose=jn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Lse=jn(Cse,{name:"MuiTouchRipple",slot:"Ripple"})(Hz||(Hz=cR`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),hm.rippleVisible,Ise,dD,({theme:n})=>n.transitions.easing.easeInOut,hm.ripplePulsate,({theme:n})=>n.transitions.duration.shorter,hm.child,hm.childLeaving,Rse,dD,({theme:n})=>n.transitions.easing.easeInOut,hm.childPulsate,kse,({theme:n})=>n.transitions.easing.easeInOut),Dse=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:o={},className:l}=i,u=tr(i,Mse),[h,d]=he.useState([]),m=he.useRef(0),_=he.useRef(null);he.useEffect(()=>{_.current&&(_.current(),_.current=null)},[h]);const v=he.useRef(!1),S=u8(),x=he.useRef(null),w=he.useRef(null),A=he.useCallback(L=>{const{pulsate:z,rippleX:H,rippleY:U,rippleSize:P,cb:K}=L;d(ee=>[...ee,Ve.jsx(Lse,{classes:{ripple:kr(o.ripple,hm.ripple),rippleVisible:kr(o.rippleVisible,hm.rippleVisible),ripplePulsate:kr(o.ripplePulsate,hm.ripplePulsate),child:kr(o.child,hm.child),childLeaving:kr(o.childLeaving,hm.childLeaving),childPulsate:kr(o.childPulsate,hm.childPulsate)},timeout:dD,pulsate:z,rippleX:H,rippleY:U,rippleSize:P},m.current)]),m.current+=1,_.current=K},[o]),k=he.useCallback((L={},z={},H=()=>{})=>{const{pulsate:U=!1,center:P=s||z.pulsate,fakeElement:K=!1}=z;if((L==null?void 0:L.type)==="mousedown"&&v.current){v.current=!1;return}(L==null?void 0:L.type)==="touchstart"&&(v.current=!0);const ee=K?null:w.current,re=ee?ee.getBoundingClientRect():{width:0,height:0,left:0,top:0};let ie,de,oe;if(P||L===void 0||L.clientX===0&&L.clientY===0||!L.clientX&&!L.touches)ie=Math.round(re.width/2),de=Math.round(re.height/2);else{const{clientX:ce,clientY:me}=L.touches&&L.touches.length>0?L.touches[0]:L;ie=Math.round(ce-re.left),de=Math.round(me-re.top)}if(P)oe=Math.sqrt((2*re.width**2+re.height**2)/3),oe%2===0&&(oe+=1);else{const ce=Math.max(Math.abs((ee?ee.clientWidth:0)-ie),ie)*2+2,me=Math.max(Math.abs((ee?ee.clientHeight:0)-de),de)*2+2;oe=Math.sqrt(ce**2+me**2)}L!=null&&L.touches?x.current===null&&(x.current=()=>{A({pulsate:U,rippleX:ie,rippleY:de,rippleSize:oe,cb:H})},S.start(Ase,()=>{x.current&&(x.current(),x.current=null)})):A({pulsate:U,rippleX:ie,rippleY:de,rippleSize:oe,cb:H})},[s,A,S]),O=he.useCallback(()=>{k({},{pulsate:!0})},[k]),D=he.useCallback((L,z)=>{if(S.clear(),(L==null?void 0:L.type)==="touchend"&&x.current){x.current(),x.current=null,S.start(0,()=>{D(L,z)});return}x.current=null,d(H=>H.length>0?H.slice(1):H),_.current=z},[S]);return he.useImperativeHandle(t,()=>({pulsate:O,start:k,stop:D}),[O,k,D]),Ve.jsx(Ose,ze({className:kr(hm.root,o.root,l),ref:w},u,{children:Ve.jsx(_se,{component:null,exit:!0,children:h})}))}),Nse=Dse;function Bse(n){return fs("MuiButtonBase",n)}const Pse=Rs("MuiButtonBase",["root","disabled","focusVisible"]),Fse=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Use=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:i,classes:s}=n,l=ks({root:["root",e&&"disabled",t&&"focusVisible"]},Bse,s);return t&&i&&(l.root+=` ${i}`),l},zse=jn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Pse.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Hse=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:o=!1,children:l,className:u,component:h="button",disabled:d=!1,disableRipple:m=!1,disableTouchRipple:_=!1,focusRipple:v=!1,LinkComponent:S="a",onBlur:x,onClick:w,onContextMenu:A,onDragLeave:k,onFocus:O,onFocusVisible:D,onKeyDown:L,onKeyUp:z,onMouseDown:H,onMouseLeave:U,onMouseUp:P,onTouchEnd:K,onTouchMove:ee,onTouchStart:re,tabIndex:ie=0,TouchRippleProps:de,touchRippleRef:oe,type:ce}=i,me=tr(i,Fse),Ae=he.useRef(null),j=he.useRef(null),Z=lp(j,oe),{isFocusVisibleRef:ne,onFocus:ae,onBlur:_e,ref:Le}=c8(),[we,Xe]=he.useState(!1);d&&we&&Xe(!1),he.useImperativeHandle(s,()=>({focusVisible:()=>{Xe(!0),Ae.current.focus()}}),[]);const[Re,qe]=he.useState(!1);he.useEffect(()=>{qe(!0)},[]);const Je=Re&&!m&&!d;he.useEffect(()=>{we&&v&&!m&&Re&&j.current.pulsate()},[m,v,we,Re]);function ht(Ge,Ce,X=_){return Uy(Q=>(Ce&&Ce(Q),!X&&j.current&&j.current[Ge](Q),!0))}const it=ht("start",H),Oe=ht("stop",A),Ee=ht("stop",k),Fe=ht("stop",P),rt=ht("stop",Ge=>{we&&Ge.preventDefault(),U&&U(Ge)}),nt=ht("start",re),dt=ht("stop",K),It=ht("stop",ee),mt=ht("stop",Ge=>{_e(Ge),ne.current===!1&&Xe(!1),x&&x(Ge)},!1),wt=Uy(Ge=>{Ae.current||(Ae.current=Ge.currentTarget),ae(Ge),ne.current===!0&&(Xe(!0),D&&D(Ge)),O&&O(Ge)}),$t=()=>{const Ge=Ae.current;return h&&h!=="button"&&!(Ge.tagName==="A"&&Ge.href)},pt=he.useRef(!1),Te=Uy(Ge=>{v&&!pt.current&&we&&j.current&&Ge.key===" "&&(pt.current=!0,j.current.stop(Ge,()=>{j.current.start(Ge)})),Ge.target===Ge.currentTarget&&$t()&&Ge.key===" "&&Ge.preventDefault(),L&&L(Ge),Ge.target===Ge.currentTarget&&$t()&&Ge.key==="Enter"&&!d&&(Ge.preventDefault(),w&&w(Ge))}),te=Uy(Ge=>{v&&Ge.key===" "&&j.current&&we&&!Ge.defaultPrevented&&(pt.current=!1,j.current.stop(Ge,()=>{j.current.pulsate(Ge)})),z&&z(Ge),w&&Ge.target===Ge.currentTarget&&$t()&&Ge.key===" "&&!Ge.defaultPrevented&&w(Ge)});let ke=h;ke==="button"&&(me.href||me.to)&&(ke=S);const ot={};ke==="button"?(ot.type=ce===void 0?"button":ce,ot.disabled=d):(!me.href&&!me.to&&(ot.role="button"),d&&(ot["aria-disabled"]=d));const ft=lp(t,Le,Ae),xt=ze({},i,{centerRipple:o,component:h,disabled:d,disableRipple:m,disableTouchRipple:_,focusRipple:v,tabIndex:ie,focusVisible:we}),at=Use(xt);return Ve.jsxs(zse,ze({as:ke,className:kr(at.root,u),ownerState:xt,onBlur:mt,onClick:w,onContextMenu:Oe,onFocus:wt,onKeyDown:Te,onKeyUp:te,onMouseDown:it,onMouseLeave:rt,onMouseUp:Fe,onDragLeave:Ee,onTouchEnd:dt,onTouchMove:It,onTouchStart:nt,ref:ft,tabIndex:d?-1:ie,type:ce},ot,me,{children:[l,Je?Ve.jsx(Nse,ze({ref:Z,center:o},de)):null]}))}),aP=Hse;function Gse(n){return fs("MuiIconButton",n)}const Wse=Rs("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Vse=["edge","children","className","color","disabled","disableFocusRipple","size"],jse=n=>{const{classes:e,disabled:t,color:i,edge:s,size:o}=n,l={root:["root",t&&"disabled",i!=="default"&&`color${Kn(i)}`,s&&`edge${Kn(s)}`,`size${Kn(o)}`]};return ks(l,Gse,e)},Xse=jn(aP,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="default"&&e[`color${Kn(t.color)}`],t.edge&&e[`edge${Kn(t.edge)}`],e[`size${Kn(t.size)}`]]}})(({theme:n,ownerState:e})=>ze({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Jg(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:n,ownerState:e})=>{var t;const i=(t=(n.vars||n).palette)==null?void 0:t[e.color];return ze({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&ze({color:i==null?void 0:i.main},!e.disableRipple&&{"&:hover":ze({},i&&{backgroundColor:n.vars?`rgba(${i.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Jg(i.main,n.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:n.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:n.typography.pxToRem(28)},{[`&.${Wse.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}})}),Yse=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiIconButton"}),{edge:s=!1,children:o,className:l,color:u="default",disabled:h=!1,disableFocusRipple:d=!1,size:m="medium"}=i,_=tr(i,Vse),v=ze({},i,{edge:s,color:u,disabled:h,disableFocusRipple:d,size:m}),S=jse(v);return Ve.jsx(Xse,ze({className:kr(S.root,l),centerRipple:!0,focusRipple:!d,disabled:h,ref:t},_,{ownerState:v,children:o}))}),XM=Yse;function Kse(n){return fs("MuiTypography",n)}Rs("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Jse=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Qse=n=>{const{align:e,gutterBottom:t,noWrap:i,paragraph:s,variant:o,classes:l}=n,u={root:["root",o,n.align!=="inherit"&&`align${Kn(e)}`,t&&"gutterBottom",i&&"noWrap",s&&"paragraph"]};return ks(u,Kse,l)},qse=jn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${Kn(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(({theme:n,ownerState:e})=>ze({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&n.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),Gz={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Zse={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},eoe=n=>Zse[n]||n,toe=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiTypography"}),s=eoe(i.color),o=Fx(ze({},i,{color:s})),{align:l="inherit",className:u,component:h,gutterBottom:d=!1,noWrap:m=!1,paragraph:_=!1,variant:v="body1",variantMapping:S=Gz}=o,x=tr(o,Jse),w=ze({},o,{align:l,color:s,className:u,component:h,gutterBottom:d,noWrap:m,paragraph:_,variant:v,variantMapping:S}),A=h||(_?"p":S[v]||Gz[v])||"span",k=Qse(w);return Ve.jsx(qse,ze({as:A,ref:t,ownerState:w,className:kr(k.root,u)},x))}),UT=toe,noe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function roe(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function ioe(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=i=>n.ownerDocument.querySelector(`input[type="radio"]${i}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function soe(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||ioe(n))}function ooe(n){const e=[],t=[];return Array.from(n.querySelectorAll(noe)).forEach((i,s)=>{const o=roe(i);o===-1||!soe(i)||(o===0?e.push(i):t.push({documentOrder:s,tabIndex:o,node:i}))}),t.sort((i,s)=>i.tabIndex===s.tabIndex?i.documentOrder-s.documentOrder:i.tabIndex-s.tabIndex).map(i=>i.node).concat(e)}function aoe(){return!0}function loe(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:i=!1,disableRestoreFocus:s=!1,getTabbable:o=ooe,isEnabled:l=aoe,open:u}=n,h=he.useRef(!1),d=he.useRef(null),m=he.useRef(null),_=he.useRef(null),v=he.useRef(null),S=he.useRef(!1),x=he.useRef(null),w=lp(e.ref,x),A=he.useRef(null);he.useEffect(()=>{!u||!x.current||(S.current=!t)},[t,u]),he.useEffect(()=>{if(!u||!x.current)return;const D=Hp(x.current);return x.current.contains(D.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),S.current&&x.current.focus()),()=>{s||(_.current&&_.current.focus&&(h.current=!0,_.current.focus()),_.current=null)}},[u]),he.useEffect(()=>{if(!u||!x.current)return;const D=Hp(x.current),L=U=>{A.current=U,!(i||!l()||U.key!=="Tab")&&D.activeElement===x.current&&U.shiftKey&&(h.current=!0,m.current&&m.current.focus())},z=()=>{const U=x.current;if(U===null)return;if(!D.hasFocus()||!l()||h.current){h.current=!1;return}if(U.contains(D.activeElement)||i&&D.activeElement!==d.current&&D.activeElement!==m.current)return;if(D.activeElement!==v.current)v.current=null;else if(v.current!==null)return;if(!S.current)return;let P=[];if((D.activeElement===d.current||D.activeElement===m.current)&&(P=o(x.current)),P.length>0){var K,ee;const re=!!((K=A.current)!=null&&K.shiftKey&&((ee=A.current)==null?void 0:ee.key)==="Tab"),ie=P[0],de=P[P.length-1];typeof ie!="string"&&typeof de!="string"&&(re?de.focus():ie.focus())}else U.focus()};D.addEventListener("focusin",z),D.addEventListener("keydown",L,!0);const H=setInterval(()=>{D.activeElement&&D.activeElement.tagName==="BODY"&&z()},50);return()=>{clearInterval(H),D.removeEventListener("focusin",z),D.removeEventListener("keydown",L,!0)}},[t,i,s,l,u,o]);const k=D=>{_.current===null&&(_.current=D.relatedTarget),S.current=!0,v.current=D.target;const L=e.props.onFocus;L&&L(D)},O=D=>{_.current===null&&(_.current=D.relatedTarget),S.current=!0};return Ve.jsxs(he.Fragment,{children:[Ve.jsx("div",{tabIndex:u?0:-1,onFocus:O,ref:d,"data-testid":"sentinelStart"}),he.cloneElement(e,{ref:w,onFocus:k}),Ve.jsx("div",{tabIndex:u?0:-1,onFocus:O,ref:m,"data-testid":"sentinelEnd"})]})}function uoe(n){return typeof n=="function"?n():n}const coe=he.forwardRef(function(e,t){const{children:i,container:s,disablePortal:o=!1}=e,[l,u]=he.useState(null),h=lp(he.isValidElement(i)?i.ref:null,t);if(Sv(()=>{o||u(uoe(s)||document.body)},[s,o]),Sv(()=>{if(l&&!o)return NA(t,l),()=>{NA(t,null)}},[t,l,o]),o){if(he.isValidElement(i)){const d={ref:h};return he.cloneElement(i,d)}return Ve.jsx(he.Fragment,{children:i})}return Ve.jsx(he.Fragment,{children:l&&dB.createPortal(i,l)})});function hoe(n){const e=Hp(n);return e.body===n?Ev(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function E$(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function Wz(n){return parseInt(Ev(n).getComputedStyle(n).paddingRight,10)||0}function doe(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(n.tagName)!==-1,i=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||i}function Vz(n,e,t,i,s){const o=[e,t,...i];[].forEach.call(n.children,l=>{const u=o.indexOf(l)===-1,h=!doe(l);u&&h&&E$(l,s)})}function $2(n,e){let t=-1;return n.some((i,s)=>e(i)?(t=s,!0):!1),t}function poe(n,e){const t=[],i=n.container;if(!e.disableScrollLock){if(hoe(i)){const l=h8(Hp(i));t.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${Wz(i)+l}px`;const u=Hp(i).querySelectorAll(".mui-fixed");[].forEach.call(u,h=>{t.push({value:h.style.paddingRight,property:"padding-right",el:h}),h.style.paddingRight=`${Wz(h)+l}px`})}let o;if(i.parentNode instanceof DocumentFragment)o=Hp(i).body;else{const l=i.parentElement,u=Ev(i);o=(l==null?void 0:l.nodeName)==="HTML"&&u.getComputedStyle(l).overflowY==="scroll"?l:i}t.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{t.forEach(({value:o,el:l,property:u})=>{o?l.style.setProperty(u,o):l.style.removeProperty(u)})}}function foe(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class moe{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let i=this.modals.indexOf(e);if(i!==-1)return i;i=this.modals.length,this.modals.push(e),e.modalRef&&E$(e.modalRef,!1);const s=foe(t);Vz(t,e.mount,e.modalRef,s,!0);const o=$2(this.containers,l=>l.container===t);return o!==-1?(this.containers[o].modals.push(e),i):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:s}),i)}mount(e,t){const i=$2(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];s.restore||(s.restore=poe(s,t))}remove(e,t=!0){const i=this.modals.indexOf(e);if(i===-1)return i;const s=$2(this.containers,l=>l.modals.indexOf(e)!==-1),o=this.containers[s];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(i,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&E$(e.modalRef,t),Vz(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(s,1);else{const l=o.modals[o.modals.length-1];l.modalRef&&E$(l.modalRef,!1)}return i}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function goe(n){return typeof n=="function"?n():n}function _oe(n){return n?n.props.hasOwnProperty("in"):!1}const voe=new moe;function yoe(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:i=!1,manager:s=voe,closeAfterTransition:o=!1,onTransitionEnter:l,onTransitionExited:u,children:h,onClose:d,open:m,rootRef:_}=n,v=he.useRef({}),S=he.useRef(null),x=he.useRef(null),w=lp(x,_),[A,k]=he.useState(!m),O=_oe(h);let D=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(D=!1);const L=()=>Hp(S.current),z=()=>(v.current.modalRef=x.current,v.current.mount=S.current,v.current),H=()=>{s.mount(z(),{disableScrollLock:i}),x.current&&(x.current.scrollTop=0)},U=Uy(()=>{const me=goe(e)||L().body;s.add(z(),me),x.current&&H()}),P=he.useCallback(()=>s.isTopModal(z()),[s]),K=Uy(me=>{S.current=me,me&&(m&&P()?H():x.current&&E$(x.current,D))}),ee=he.useCallback(()=>{s.remove(z(),D)},[D,s]);he.useEffect(()=>()=>{ee()},[ee]),he.useEffect(()=>{m?U():(!O||!o)&&ee()},[m,ee,O,o,U]);const re=me=>Ae=>{var j;(j=me.onKeyDown)==null||j.call(me,Ae),!(Ae.key!=="Escape"||Ae.which===229||!P())&&(t||(Ae.stopPropagation(),d&&d(Ae,"escapeKeyDown")))},ie=me=>Ae=>{var j;(j=me.onClick)==null||j.call(me,Ae),Ae.target===Ae.currentTarget&&d&&d(Ae,"backdropClick")};return{getRootProps:(me={})=>{const Ae=$8(n);delete Ae.onTransitionEnter,delete Ae.onTransitionExited;const j=ze({},Ae,me);return ze({role:"presentation"},j,{onKeyDown:re(j),ref:w})},getBackdropProps:(me={})=>{const Ae=me;return ze({"aria-hidden":!0},Ae,{onClick:ie(Ae),open:m})},getTransitionProps:()=>{const me=()=>{k(!1),l&&l()},Ae=()=>{k(!0),u&&u(),o&&ee()};return{onEnter:oD(me,h==null?void 0:h.props.onEnter),onExited:oD(Ae,h==null?void 0:h.props.onExited)}},rootRef:w,portalRef:K,isTopModal:P,exited:A,hasTransition:O}}const boe=["onChange","maxRows","minRows","style","value"];function bC(n){return parseInt(n,10)||0}const Toe={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Soe(n){return n==null||Object.keys(n).length===0||n.outerHeightStyle===0&&!n.overflowing}const Eoe=he.forwardRef(function(e,t){const{onChange:i,maxRows:s,minRows:o=1,style:l,value:u}=e,h=tr(e,boe),{current:d}=he.useRef(u!=null),m=he.useRef(null),_=lp(t,m),v=he.useRef(null),S=he.useCallback(()=>{const A=m.current,O=Ev(A).getComputedStyle(A);if(O.width==="0px")return{outerHeightStyle:0,overflowing:!1};const D=v.current;D.style.width=O.width,D.value=A.value||e.placeholder||"x",D.value.slice(-1)===`
`&&(D.value+=" ");const L=O.boxSizing,z=bC(O.paddingBottom)+bC(O.paddingTop),H=bC(O.borderBottomWidth)+bC(O.borderTopWidth),U=D.scrollHeight;D.value="x";const P=D.scrollHeight;let K=U;o&&(K=Math.max(Number(o)*P,K)),s&&(K=Math.min(Number(s)*P,K)),K=Math.max(K,P);const ee=K+(L==="border-box"?z+H:0),re=Math.abs(K-U)<=1;return{outerHeightStyle:ee,overflowing:re}},[s,o,e.placeholder]),x=he.useCallback(()=>{const A=S();if(Soe(A))return;const k=m.current;k.style.height=`${A.outerHeightStyle}px`,k.style.overflow=A.overflowing?"hidden":""},[S]);Sv(()=>{const A=()=>{x()};let k;const O=ZB(A),D=m.current,L=Ev(D);L.addEventListener("resize",O);let z;return typeof ResizeObserver<"u"&&(z=new ResizeObserver(A),z.observe(D)),()=>{O.clear(),cancelAnimationFrame(k),L.removeEventListener("resize",O),z&&z.disconnect()}},[S,x]),Sv(()=>{x()});const w=A=>{d||x(),i&&i(A)};return Ve.jsxs(he.Fragment,{children:[Ve.jsx("textarea",ze({value:u,onChange:w,ref:_,rows:o,style:l},h)),Ve.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:v,tabIndex:-1,style:ze({},Toe.shadow,l,{paddingTop:0,paddingBottom:0})})]})});function Lv({props:n,states:e,muiFormControl:t}){return e.reduce((i,s)=>(i[s]=n[s],t&&typeof n[s]>"u"&&(i[s]=t[s]),i),{})}const $oe=he.createContext(void 0),lP=$oe;function u_(){return he.useContext(lP)}function xoe(n){return Ve.jsx(Wne,ze({},n,{defaultTheme:lR,themeId:Lx}))}function jz(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function HA(n,e=!1){return n&&(jz(n.value)&&n.value!==""||e&&jz(n.defaultValue)&&n.defaultValue!=="")}function woe(n){return n.startAdornment}function Coe(n){return fs("MuiInputBase",n)}const Moe=Rs("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),zT=Moe,Aoe=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],hR=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${Kn(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},dR=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},Ioe=n=>{const{classes:e,color:t,disabled:i,error:s,endAdornment:o,focused:l,formControl:u,fullWidth:h,hiddenLabel:d,multiline:m,readOnly:_,size:v,startAdornment:S,type:x}=n,w={root:["root",`color${Kn(t)}`,i&&"disabled",s&&"error",h&&"fullWidth",l&&"focused",u&&"formControl",v&&v!=="medium"&&`size${Kn(v)}`,m&&"multiline",S&&"adornedStart",o&&"adornedEnd",d&&"hiddenLabel",_&&"readOnly"],input:["input",i&&"disabled",x==="search"&&"inputTypeSearch",m&&"inputMultiline",v==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",S&&"inputAdornedStart",o&&"inputAdornedEnd",_&&"readOnly"]};return ks(w,Coe,e)},pR=jn("div",{name:"MuiInputBase",slot:"Root",overridesResolver:hR})(({theme:n,ownerState:e})=>ze({},n.typography.body1,{color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${zT.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"}},e.multiline&&ze({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),fR=jn("input",{name:"MuiInputBase",slot:"Input",overridesResolver:dR})(({theme:n,ownerState:e})=>{const t=n.palette.mode==="light",i=ze({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),s={opacity:"0 !important"},o=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return ze({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${zT.formControl} &`]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${zT.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),Roe=Ve.jsx(xoe,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),koe=he.forwardRef(function(e,t){var i;const s=js({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:l,autoFocus:u,className:h,components:d={},componentsProps:m={},defaultValue:_,disabled:v,disableInjectingGlobalStyles:S,endAdornment:x,fullWidth:w=!1,id:A,inputComponent:k="input",inputProps:O={},inputRef:D,maxRows:L,minRows:z,multiline:H=!1,name:U,onBlur:P,onChange:K,onClick:ee,onFocus:re,onKeyDown:ie,onKeyUp:de,placeholder:oe,readOnly:ce,renderSuffix:me,rows:Ae,slotProps:j={},slots:Z={},startAdornment:ne,type:ae="text",value:_e}=s,Le=tr(s,Aoe),we=O.value!=null?O.value:_e,{current:Xe}=he.useRef(we!=null),Re=he.useRef(),qe=he.useCallback(at=>{},[]),Je=lp(Re,D,O.ref,qe),[ht,it]=he.useState(!1),Oe=u_(),Ee=Lv({props:s,muiFormControl:Oe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ee.focused=Oe?Oe.focused:ht,he.useEffect(()=>{!Oe&&v&&ht&&(it(!1),P&&P())},[Oe,v,ht,P]);const Fe=Oe&&Oe.onFilled,rt=Oe&&Oe.onEmpty,nt=he.useCallback(at=>{HA(at)?Fe&&Fe():rt&&rt()},[Fe,rt]);Sv(()=>{Xe&&nt({value:we})},[we,nt,Xe]);const dt=at=>{if(Ee.disabled){at.stopPropagation();return}re&&re(at),O.onFocus&&O.onFocus(at),Oe&&Oe.onFocus?Oe.onFocus(at):it(!0)},It=at=>{P&&P(at),O.onBlur&&O.onBlur(at),Oe&&Oe.onBlur?Oe.onBlur(at):it(!1)},mt=(at,...Ge)=>{if(!Xe){const Ce=at.target||Re.current;if(Ce==null)throw new Error(pb(1));nt({value:Ce.value})}O.onChange&&O.onChange(at,...Ge),K&&K(at,...Ge)};he.useEffect(()=>{nt(Re.current)},[]);const wt=at=>{Re.current&&at.currentTarget===at.target&&Re.current.focus(),ee&&ee(at)};let $t=k,pt=O;H&&$t==="input"&&(Ae?pt=ze({type:void 0,minRows:Ae,maxRows:Ae},pt):pt=ze({type:void 0,maxRows:L,minRows:z},pt),$t=Eoe);const Te=at=>{nt(at.animationName==="mui-auto-fill-cancel"?Re.current:{value:"x"})};he.useEffect(()=>{Oe&&Oe.setAdornedStart(!!ne)},[Oe,ne]);const te=ze({},s,{color:Ee.color||"primary",disabled:Ee.disabled,endAdornment:x,error:Ee.error,focused:Ee.focused,formControl:Oe,fullWidth:w,hiddenLabel:Ee.hiddenLabel,multiline:H,size:Ee.size,startAdornment:ne,type:ae}),ke=Ioe(te),ot=Z.root||d.Root||pR,ft=j.root||m.root||{},xt=Z.input||d.Input||fR;return pt=ze({},pt,(i=j.input)!=null?i:m.input),Ve.jsxs(he.Fragment,{children:[!S&&Roe,Ve.jsxs(ot,ze({},ft,!zA(ot)&&{ownerState:ze({},te,ft.ownerState)},{ref:t,onClick:wt},Le,{className:kr(ke.root,ft.className,h,ce&&"MuiInputBase-readOnly"),children:[ne,Ve.jsx(lP.Provider,{value:null,children:Ve.jsx(xt,ze({ownerState:te,"aria-invalid":Ee.error,"aria-describedby":o,autoComplete:l,autoFocus:u,defaultValue:_,disabled:Ee.disabled,id:A,onAnimationStart:Te,name:U,placeholder:oe,readOnly:ce,required:Ee.required,rows:Ae,value:we,onKeyDown:ie,onKeyUp:de,type:ae},pt,!zA(xt)&&{as:$t,ownerState:ze({},te,pt.ownerState)},{ref:Je,className:kr(ke.input,pt.className,ce&&"MuiInputBase-readOnly"),onBlur:It,onChange:mt,onFocus:dt}))}),x,me?me(ze({},Ee,{startAdornment:ne})):null]}))]})}),uP=koe;function Ooe(n){return fs("MuiInput",n)}const Loe=ze({},zT,Rs("MuiInput",["root","underline","input"])),IE=Loe;function Doe(n){return fs("MuiOutlinedInput",n)}const Noe=ze({},zT,Rs("MuiOutlinedInput",["root","notchedOutline","input"])),P_=Noe;function Boe(n){return fs("MuiFilledInput",n)}const Poe=ze({},zT,Rs("MuiFilledInput",["root","underline","input"])),ly=Poe,Foe=_S(Ve.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Uoe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],zoe={entering:{opacity:1},entered:{opacity:1}},Hoe=he.forwardRef(function(e,t){const i=uR(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:u,easing:h,in:d,onEnter:m,onEntered:_,onEntering:v,onExit:S,onExited:x,onExiting:w,style:A,timeout:k=s,TransitionComponent:O=S8}=e,D=tr(e,Uoe),L=he.useRef(null),z=lp(L,u.ref,t),H=oe=>ce=>{if(oe){const me=L.current;ce===void 0?oe(me):oe(me,ce)}},U=H(v),P=H((oe,ce)=>{E8(oe);const me=UA({style:A,timeout:k,easing:h},{mode:"enter"});oe.style.webkitTransition=i.transitions.create("opacity",me),oe.style.transition=i.transitions.create("opacity",me),m&&m(oe,ce)}),K=H(_),ee=H(w),re=H(oe=>{const ce=UA({style:A,timeout:k,easing:h},{mode:"exit"});oe.style.webkitTransition=i.transitions.create("opacity",ce),oe.style.transition=i.transitions.create("opacity",ce),S&&S(oe)}),ie=H(x),de=oe=>{o&&o(L.current,oe)};return Ve.jsx(O,ze({appear:l,in:d,nodeRef:L,onEnter:P,onEntered:K,onEntering:U,onExit:re,onExited:ie,onExiting:ee,addEndListener:de,timeout:k},D,{children:(oe,ce)=>he.cloneElement(u,ze({style:ze({opacity:0,visibility:oe==="exited"&&!d?"hidden":void 0},zoe[oe],A,u.props.style),ref:z},ce))}))}),x8=Hoe;function Goe(n){return fs("MuiBackdrop",n)}Rs("MuiBackdrop",["root","invisible"]);const Woe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Voe=n=>{const{classes:e,invisible:t}=n;return ks({root:["root",t&&"invisible"]},Goe,e)},joe=jn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})(({ownerState:n})=>ze({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},n.invisible&&{backgroundColor:"transparent"})),Xoe=he.forwardRef(function(e,t){var i,s,o;const l=js({props:e,name:"MuiBackdrop"}),{children:u,className:h,component:d="div",components:m={},componentsProps:_={},invisible:v=!1,open:S,slotProps:x={},slots:w={},TransitionComponent:A=x8,transitionDuration:k}=l,O=tr(l,Woe),D=ze({},l,{component:d,invisible:v}),L=Voe(D),z=(i=x.root)!=null?i:_.root;return Ve.jsx(A,ze({in:S,timeout:k},O,{children:Ve.jsx(joe,ze({"aria-hidden":!0},z,{as:(s=(o=w.root)!=null?o:m.Root)!=null?s:d,className:kr(L.root,h,z==null?void 0:z.className),ownerState:ze({},D,z==null?void 0:z.ownerState),classes:L,ref:t,children:u}))}))}),mR=Xoe,Yoe=Rs("MuiBox",["root"]),Koe=Yoe,Joe=y8(),Qoe=Qne({themeId:Lx,defaultTheme:Joe,defaultClassName:Koe.root,generateClassName:YB.generate}),av=Qoe;function qoe(n){return fs("MuiButton",n)}const Zoe=Rs("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),TC=Zoe,eae=he.createContext({}),tae=eae,nae=he.createContext(void 0),rae=nae,iae=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],sae=n=>{const{color:e,disableElevation:t,fullWidth:i,size:s,variant:o,classes:l}=n,u={root:["root",o,`${o}${Kn(e)}`,`size${Kn(s)}`,`${o}Size${Kn(s)}`,`color${Kn(e)}`,t&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${Kn(s)}`],endIcon:["icon","endIcon",`iconSize${Kn(s)}`]},h=ks(u,qoe,l);return ze({},l,h)},w8=n=>ze({},n.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},n.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},n.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),oae=jn(aP,{shouldForwardProp:n=>Lf(n)||n==="classes",name:"MuiButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`${t.variant}${Kn(t.color)}`],e[`size${Kn(t.size)}`],e[`${t.variant}Size${Kn(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth]}})(({theme:n,ownerState:e})=>{var t,i;const s=n.palette.mode==="light"?n.palette.grey[300]:n.palette.grey[800],o=n.palette.mode==="light"?n.palette.grey.A100:n.palette.grey[700];return ze({},n.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":ze({textDecoration:"none",backgroundColor:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.hoverOpacity})`:Jg(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:n.vars?`rgba(${n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Jg(n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(n.vars||n).palette[e.color].main}`,backgroundColor:n.vars?`rgba(${n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Jg(n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:n.vars?n.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(n.vars||n).shadows[4],"@media (hover: none)":{boxShadow:(n.vars||n).shadows[2],backgroundColor:(n.vars||n).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(n.vars||n).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(n.vars||n).palette[e.color].main}}),"&:active":ze({},e.variant==="contained"&&{boxShadow:(n.vars||n).shadows[8]}),[`&.${TC.focusVisible}`]:ze({},e.variant==="contained"&&{boxShadow:(n.vars||n).shadows[6]}),[`&.${TC.disabled}`]:ze({color:(n.vars||n).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(n.vars||n).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(n.vars||n).palette.action.disabled,boxShadow:(n.vars||n).shadows[0],backgroundColor:(n.vars||n).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main,border:n.vars?`1px solid rgba(${n.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${Jg(n.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:n.vars?n.vars.palette.text.primary:(t=(i=n.palette).getContrastText)==null?void 0:t.call(i,n.palette.grey[300]),backgroundColor:n.vars?n.vars.palette.Button.inheritContainedBg:s,boxShadow:(n.vars||n).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].contrastText,backgroundColor:(n.vars||n).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:n.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:n.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:n.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:n})=>n.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${TC.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${TC.disabled}`]:{boxShadow:"none"}}),aae=jn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.startIcon,e[`iconSize${Kn(t.size)}`]]}})(({ownerState:n})=>ze({display:"inherit",marginRight:8,marginLeft:-4},n.size==="small"&&{marginLeft:-2},w8(n))),lae=jn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.endIcon,e[`iconSize${Kn(t.size)}`]]}})(({ownerState:n})=>ze({display:"inherit",marginRight:-4,marginLeft:8},n.size==="small"&&{marginRight:-2},w8(n))),uae=he.forwardRef(function(e,t){const i=he.useContext(tae),s=he.useContext(rae),o=QB(i,e),l=js({props:o,name:"MuiButton"}),{children:u,color:h="primary",component:d="button",className:m,disabled:_=!1,disableElevation:v=!1,disableFocusRipple:S=!1,endIcon:x,focusVisibleClassName:w,fullWidth:A=!1,size:k="medium",startIcon:O,type:D,variant:L="text"}=l,z=tr(l,iae),H=ze({},l,{color:h,component:d,disabled:_,disableElevation:v,disableFocusRipple:S,fullWidth:A,size:k,type:D,variant:L}),U=sae(H),P=O&&Ve.jsx(aae,{className:U.startIcon,ownerState:H,children:O}),K=x&&Ve.jsx(lae,{className:U.endIcon,ownerState:H,children:x}),ee=s||"";return Ve.jsxs(oae,ze({ownerState:H,className:kr(i.className,U.root,m,ee),component:d,disabled:_,focusRipple:!S,focusVisibleClassName:kr(U.focusVisible,w),ref:t,type:D},z,{classes:U,children:[P,u,K]}))}),cae=uae;function hae(n){return fs("PrivateSwitchBase",n)}Rs("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const dae=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],pae=n=>{const{classes:e,checked:t,disabled:i,edge:s}=n,o={root:["root",t&&"checked",i&&"disabled",s&&`edge${Kn(s)}`],input:["input"]};return ks(o,hae,e)},fae=jn(aP)(({ownerState:n})=>ze({padding:9,borderRadius:"50%"},n.edge==="start"&&{marginLeft:n.size==="small"?-3:-12},n.edge==="end"&&{marginRight:n.size==="small"?-3:-12})),mae=jn("input",{shouldForwardProp:Lf})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),gae=he.forwardRef(function(e,t){const{autoFocus:i,checked:s,checkedIcon:o,className:l,defaultChecked:u,disabled:h,disableFocusRipple:d=!1,edge:m=!1,icon:_,id:v,inputProps:S,inputRef:x,name:w,onBlur:A,onChange:k,onFocus:O,readOnly:D,required:L=!1,tabIndex:z,type:H,value:U}=e,P=tr(e,dae),[K,ee]=BA({controlled:s,default:!!u,name:"SwitchBase",state:"checked"}),re=u_(),ie=Z=>{O&&O(Z),re&&re.onFocus&&re.onFocus(Z)},de=Z=>{A&&A(Z),re&&re.onBlur&&re.onBlur(Z)},oe=Z=>{if(Z.nativeEvent.defaultPrevented)return;const ne=Z.target.checked;ee(ne),k&&k(Z,ne)};let ce=h;re&&typeof ce>"u"&&(ce=re.disabled);const me=H==="checkbox"||H==="radio",Ae=ze({},e,{checked:K,disabled:ce,disableFocusRipple:d,edge:m}),j=pae(Ae);return Ve.jsxs(fae,ze({component:"span",className:kr(j.root,l),centerRipple:!0,focusRipple:!d,disabled:ce,tabIndex:null,role:void 0,onFocus:ie,onBlur:de,ownerState:Ae,ref:t},P,{children:[Ve.jsx(mae,ze({autoFocus:i,checked:s,defaultChecked:u,className:j.input,disabled:ce,id:me?v:void 0,name:w,onChange:oe,readOnly:D,ref:x,required:L,ownerState:Ae,tabIndex:z,type:H},H==="checkbox"&&U===void 0?{}:{value:U},S)),K?o:_]}))}),_ae=gae,vae=_S(Ve.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),yae=_S(Ve.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),bae=_S(Ve.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Tae(n){return fs("MuiCheckbox",n)}const Sae=Rs("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),x2=Sae,Eae=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],$ae=n=>{const{classes:e,indeterminate:t,color:i,size:s}=n,o={root:["root",t&&"indeterminate",`color${Kn(i)}`,`size${Kn(s)}`]},l=ks(o,Tae,e);return ze({},e,l)},xae=jn(_ae,{shouldForwardProp:n=>Lf(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${Kn(t.size)}`],t.color!=="default"&&e[`color${Kn(t.color)}`]]}})(({theme:n,ownerState:e})=>ze({color:(n.vars||n).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${e.color==="default"?n.vars.palette.action.activeChannel:n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Jg(e.color==="default"?n.palette.action.active:n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${x2.checked}, &.${x2.indeterminate}`]:{color:(n.vars||n).palette[e.color].main},[`&.${x2.disabled}`]:{color:(n.vars||n).palette.action.disabled}})),wae=Ve.jsx(yae,{}),Cae=Ve.jsx(vae,{}),Mae=Ve.jsx(bae,{}),Aae=he.forwardRef(function(e,t){var i,s;const o=js({props:e,name:"MuiCheckbox"}),{checkedIcon:l=wae,color:u="primary",icon:h=Cae,indeterminate:d=!1,indeterminateIcon:m=Mae,inputProps:_,size:v="medium",className:S}=o,x=tr(o,Eae),w=d?m:h,A=d?m:l,k=ze({},o,{color:u,indeterminate:d,size:v}),O=$ae(k);return Ve.jsx(xae,ze({type:"checkbox",inputProps:ze({"data-indeterminate":d},_),icon:he.cloneElement(w,{fontSize:(i=w.props.fontSize)!=null?i:v}),checkedIcon:he.cloneElement(A,{fontSize:(s=A.props.fontSize)!=null?s:v}),ownerState:k,ref:t,className:kr(O.root,S)},x,{classes:O}))}),Iae=Aae;function Rae(n){return fs("MuiCircularProgress",n)}Rs("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const kae=["className","color","disableShrink","size","style","thickness","value","variant"];let gR=n=>n,Xz,Yz,Kz,Jz;const F_=44,Oae=dS(Xz||(Xz=gR`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Lae=dS(Yz||(Yz=gR`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Dae=n=>{const{classes:e,variant:t,color:i,disableShrink:s}=n,o={root:["root",t,`color${Kn(i)}`],svg:["svg"],circle:["circle",`circle${Kn(t)}`,s&&"circleDisableShrink"]};return ks(o,Rae,e)},Nae=jn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`color${Kn(t.color)}`]]}})(({ownerState:n,theme:e})=>ze({display:"inline-block"},n.variant==="determinate"&&{transition:e.transitions.create("transform")},n.color!=="inherit"&&{color:(e.vars||e).palette[n.color].main}),({ownerState:n})=>n.variant==="indeterminate"&&zI(Kz||(Kz=gR`
      animation: ${0} 1.4s linear infinite;
    `),Oae)),Bae=jn("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(n,e)=>e.svg})({display:"block"}),Pae=jn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.circle,e[`circle${Kn(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(({ownerState:n,theme:e})=>ze({stroke:"currentColor"},n.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},n.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:n})=>n.variant==="indeterminate"&&!n.disableShrink&&zI(Jz||(Jz=gR`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Lae)),Fae=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiCircularProgress"}),{className:s,color:o="primary",disableShrink:l=!1,size:u=40,style:h,thickness:d=3.6,value:m=0,variant:_="indeterminate"}=i,v=tr(i,kae),S=ze({},i,{color:o,disableShrink:l,size:u,thickness:d,value:m,variant:_}),x=Dae(S),w={},A={},k={};if(_==="determinate"){const O=2*Math.PI*((F_-d)/2);w.strokeDasharray=O.toFixed(3),k["aria-valuenow"]=Math.round(m),w.strokeDashoffset=`${((100-m)/100*O).toFixed(3)}px`,A.transform="rotate(-90deg)"}return Ve.jsx(Nae,ze({className:kr(x.root,s),style:ze({width:u,height:u},A,h),ownerState:S,ref:t,role:"progressbar"},k,v,{children:Ve.jsx(Bae,{className:x.svg,ownerState:S,viewBox:`${F_/2} ${F_/2} ${F_} ${F_}`,children:Ve.jsx(Pae,{className:x.circle,style:w,ownerState:S,cx:F_,cy:F_,r:(F_-d)/2,fill:"none",strokeWidth:d})})}))}),C8=Fae,Uae=Ure({createStyledComponent:jn("div",{name:"MuiContainer",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`maxWidth${Kn(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),useThemeProps:n=>js({props:n,name:"MuiContainer"})}),Qz=Uae;function zae(n){return fs("MuiModal",n)}Rs("MuiModal",["root","hidden","backdrop"]);const Hae=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],Gae=n=>{const{open:e,exited:t,classes:i}=n;return ks({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},zae,i)},Wae=jn("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(({theme:n,ownerState:e})=>ze({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),Vae=jn(mR,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,e)=>e.backdrop})({zIndex:-1}),jae=he.forwardRef(function(e,t){var i,s,o,l,u,h;const d=js({name:"MuiModal",props:e}),{BackdropComponent:m=Vae,BackdropProps:_,className:v,closeAfterTransition:S=!1,children:x,container:w,component:A,components:k={},componentsProps:O={},disableAutoFocus:D=!1,disableEnforceFocus:L=!1,disableEscapeKeyDown:z=!1,disablePortal:H=!1,disableRestoreFocus:U=!1,disableScrollLock:P=!1,hideBackdrop:K=!1,keepMounted:ee=!1,onBackdropClick:re,open:ie,slotProps:de,slots:oe}=d,ce=tr(d,Hae),me=ze({},d,{closeAfterTransition:S,disableAutoFocus:D,disableEnforceFocus:L,disableEscapeKeyDown:z,disablePortal:H,disableRestoreFocus:U,disableScrollLock:P,hideBackdrop:K,keepMounted:ee}),{getRootProps:Ae,getBackdropProps:j,getTransitionProps:Z,portalRef:ne,isTopModal:ae,exited:_e,hasTransition:Le}=yoe(ze({},me,{rootRef:t})),we=ze({},me,{exited:_e}),Xe=Gae(we),Re={};if(x.props.tabIndex===void 0&&(Re.tabIndex="-1"),Le){const{onEnter:Fe,onExited:rt}=Z();Re.onEnter=Fe,Re.onExited=rt}const qe=(i=(s=oe==null?void 0:oe.root)!=null?s:k.Root)!=null?i:Wae,Je=(o=(l=oe==null?void 0:oe.backdrop)!=null?l:k.Backdrop)!=null?o:m,ht=(u=de==null?void 0:de.root)!=null?u:O.root,it=(h=de==null?void 0:de.backdrop)!=null?h:O.backdrop,Oe=FT({elementType:qe,externalSlotProps:ht,externalForwardedProps:ce,getSlotProps:Ae,additionalProps:{ref:t,as:A},ownerState:we,className:kr(v,ht==null?void 0:ht.className,Xe==null?void 0:Xe.root,!we.open&&we.exited&&(Xe==null?void 0:Xe.hidden))}),Ee=FT({elementType:Je,externalSlotProps:it,additionalProps:_,getSlotProps:Fe=>j(ze({},Fe,{onClick:rt=>{re&&re(rt),Fe!=null&&Fe.onClick&&Fe.onClick(rt)}})),className:kr(it==null?void 0:it.className,_==null?void 0:_.className,Xe==null?void 0:Xe.backdrop),ownerState:we});return!ee&&!ie&&(!Le||_e)?null:Ve.jsx(coe,{ref:ne,container:w,disablePortal:H,children:Ve.jsxs(qe,ze({},Oe,{children:[!K&&m?Ve.jsx(Je,ze({},Ee)):null,Ve.jsx(loe,{disableEnforceFocus:L,disableAutoFocus:D,disableRestoreFocus:U,isEnabled:ae,open:ie,children:he.cloneElement(x,Re)})]}))})}),M8=jae;function Xae(n){return fs("MuiDialog",n)}const Yae=Rs("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),w2=Yae,Kae=he.createContext({}),Jae=Kae,Qae=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],qae=jn(mR,{name:"MuiDialog",slot:"Backdrop",overrides:(n,e)=>e.backdrop})({zIndex:-1}),Zae=n=>{const{classes:e,scroll:t,maxWidth:i,fullWidth:s,fullScreen:o}=n,l={root:["root"],container:["container",`scroll${Kn(t)}`],paper:["paper",`paperScroll${Kn(t)}`,`paperWidth${Kn(String(i))}`,s&&"paperFullWidth",o&&"paperFullScreen"]};return ks(l,Xae,e)},ele=jn(M8,{name:"MuiDialog",slot:"Root",overridesResolver:(n,e)=>e.root})({"@media print":{position:"absolute !important"}}),tle=jn("div",{name:"MuiDialog",slot:"Container",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.container,e[`scroll${Kn(t.scroll)}`]]}})(({ownerState:n})=>ze({height:"100%","@media print":{height:"auto"},outline:0},n.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},n.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),nle=jn(oP,{name:"MuiDialog",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`scrollPaper${Kn(t.scroll)}`],e[`paperWidth${Kn(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(({theme:n,ownerState:e})=>ze({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:n.breakpoints.unit==="px"?Math.max(n.breakpoints.values.xs,444):`max(${n.breakpoints.values.xs}${n.breakpoints.unit}, 444px)`,[`&.${w2.paperScrollBody}`]:{[n.breakpoints.down(Math.max(n.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${n.breakpoints.values[e.maxWidth]}${n.breakpoints.unit}`,[`&.${w2.paperScrollBody}`]:{[n.breakpoints.down(n.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${w2.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),rle=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiDialog"}),s=uR(),o={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":u,BackdropComponent:h,BackdropProps:d,children:m,className:_,disableEscapeKeyDown:v=!1,fullScreen:S=!1,fullWidth:x=!1,maxWidth:w="sm",onBackdropClick:A,onClose:k,open:O,PaperComponent:D=oP,PaperProps:L={},scroll:z="paper",TransitionComponent:H=x8,transitionDuration:U=o,TransitionProps:P}=i,K=tr(i,Qae),ee=ze({},i,{disableEscapeKeyDown:v,fullScreen:S,fullWidth:x,maxWidth:w,scroll:z}),re=Zae(ee),ie=he.useRef(),de=Ae=>{ie.current=Ae.target===Ae.currentTarget},oe=Ae=>{ie.current&&(ie.current=null,A&&A(Ae),k&&k(Ae,"backdropClick"))},ce=sR(u),me=he.useMemo(()=>({titleId:ce}),[ce]);return Ve.jsx(ele,ze({className:kr(re.root,_),closeAfterTransition:!0,components:{Backdrop:qae},componentsProps:{backdrop:ze({transitionDuration:U,as:h},d)},disableEscapeKeyDown:v,onClose:k,open:O,ref:t,onClick:oe,ownerState:ee},K,{children:Ve.jsx(H,ze({appear:!0,in:O,timeout:U,role:"presentation"},P,{children:Ve.jsx(tle,{className:kr(re.container),onMouseDown:de,ownerState:ee,children:Ve.jsx(nle,ze({as:D,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":ce},L,{className:kr(re.paper,L.className),ownerState:ee,children:Ve.jsx(Jae.Provider,{value:me,children:m})}))})}))}))}),A8=rle;function ile(n){return fs("MuiDivider",n)}Rs("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const sle=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],ole=n=>{const{absolute:e,children:t,classes:i,flexItem:s,light:o,orientation:l,textAlign:u,variant:h}=n;return ks({root:["root",e&&"absolute",h,o&&"light",l==="vertical"&&"vertical",s&&"flexItem",t&&"withChildren",t&&l==="vertical"&&"withChildrenVertical",u==="right"&&l!=="vertical"&&"textAlignRight",u==="left"&&l!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",l==="vertical"&&"wrapperVertical"]},ile,i)},ale=jn("div",{name:"MuiDivider",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.absolute&&e.absolute,e[t.variant],t.light&&e.light,t.orientation==="vertical"&&e.vertical,t.flexItem&&e.flexItem,t.children&&e.withChildren,t.children&&t.orientation==="vertical"&&e.withChildrenVertical,t.textAlign==="right"&&t.orientation!=="vertical"&&e.textAlignRight,t.textAlign==="left"&&t.orientation!=="vertical"&&e.textAlignLeft]}})(({theme:n,ownerState:e})=>ze({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(n.vars||n).palette.divider,borderBottomWidth:"thin"},e.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},e.light&&{borderColor:n.vars?`rgba(${n.vars.palette.dividerChannel} / 0.08)`:Jg(n.palette.divider,.08)},e.variant==="inset"&&{marginLeft:72},e.variant==="middle"&&e.orientation==="horizontal"&&{marginLeft:n.spacing(2),marginRight:n.spacing(2)},e.variant==="middle"&&e.orientation==="vertical"&&{marginTop:n.spacing(1),marginBottom:n.spacing(1)},e.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},e.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:n})=>ze({},n.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:n,ownerState:e})=>ze({},e.children&&e.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(n.vars||n).palette.divider}`}}),({theme:n,ownerState:e})=>ze({},e.children&&e.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(n.vars||n).palette.divider}`}}),({ownerState:n})=>ze({},n.textAlign==="right"&&n.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},n.textAlign==="left"&&n.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),lle=jn("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.wrapper,t.orientation==="vertical"&&e.wrapperVertical]}})(({theme:n,ownerState:e})=>ze({display:"inline-block",paddingLeft:`calc(${n.spacing(1)} * 1.2)`,paddingRight:`calc(${n.spacing(1)} * 1.2)`},e.orientation==="vertical"&&{paddingTop:`calc(${n.spacing(1)} * 1.2)`,paddingBottom:`calc(${n.spacing(1)} * 1.2)`})),I8=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiDivider"}),{absolute:s=!1,children:o,className:l,component:u=o?"div":"hr",flexItem:h=!1,light:d=!1,orientation:m="horizontal",role:_=u!=="hr"?"separator":void 0,textAlign:v="center",variant:S="fullWidth"}=i,x=tr(i,sle),w=ze({},i,{absolute:s,component:u,flexItem:h,light:d,orientation:m,role:_,textAlign:v,variant:S}),A=ole(w);return Ve.jsx(ale,ze({as:u,className:kr(A.root,l),role:_,ref:t,ownerState:w},x,{children:o?Ve.jsx(lle,{className:A.wrapper,ownerState:w,children:o}):null}))});I8.muiSkipListHighlight=!0;const ule=I8,cle=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],hle=n=>{const{classes:e,disableUnderline:t}=n,s=ks({root:["root",!t&&"underline"],input:["input"]},Boe,e);return ze({},e,s)},dle=jn(pR,{shouldForwardProp:n=>Lf(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...hR(n,e),!t.disableUnderline&&e.underline]}})(({theme:n,ownerState:e})=>{var t;const i=n.palette.mode==="light",s=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return ze({position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o}},[`&.${ly.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o},[`&.${ly.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:u}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t=(n.vars||n).palette[e.color||"primary"])==null?void 0:t.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ly.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ly.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:s}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ly.disabled}, .${ly.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${ly.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&ze({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),ple=jn(fR,{name:"MuiFilledInput",slot:"Input",overridesResolver:dR})(({theme:n,ownerState:e})=>ze({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),R8=he.forwardRef(function(e,t){var i,s,o,l;const u=js({props:e,name:"MuiFilledInput"}),{components:h={},componentsProps:d,fullWidth:m=!1,inputComponent:_="input",multiline:v=!1,slotProps:S,slots:x={},type:w="text"}=u,A=tr(u,cle),k=ze({},u,{fullWidth:m,inputComponent:_,multiline:v,type:w}),O=hle(u),D={root:{ownerState:k},input:{ownerState:k}},L=S??d?sp(D,S??d):D,z=(i=(s=x.root)!=null?s:h.Root)!=null?i:dle,H=(o=(l=x.input)!=null?l:h.Input)!=null?o:ple;return Ve.jsx(uP,ze({slots:{root:z,input:H},componentsProps:L,fullWidth:m,inputComponent:_,multiline:v,ref:t,type:w},A,{classes:O}))});R8.muiName="Input";const k8=R8;function fle(n){return fs("MuiFormControl",n)}Rs("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const mle=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],gle=n=>{const{classes:e,margin:t,fullWidth:i}=n,s={root:["root",t!=="none"&&`margin${Kn(t)}`,i&&"fullWidth"]};return ks(s,fle,e)},_le=jn("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:n},e)=>ze({},e.root,e[`margin${Kn(n.margin)}`],n.fullWidth&&e.fullWidth)})(({ownerState:n})=>ze({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},n.margin==="normal"&&{marginTop:16,marginBottom:8},n.margin==="dense"&&{marginTop:8,marginBottom:4},n.fullWidth&&{width:"100%"})),vle=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiFormControl"}),{children:s,className:o,color:l="primary",component:u="div",disabled:h=!1,error:d=!1,focused:m,fullWidth:_=!1,hiddenLabel:v=!1,margin:S="none",required:x=!1,size:w="medium",variant:A="outlined"}=i,k=tr(i,mle),O=ze({},i,{color:l,component:u,disabled:h,error:d,fullWidth:_,hiddenLabel:v,margin:S,required:x,size:w,variant:A}),D=gle(O),[L,z]=he.useState(()=>{let de=!1;return s&&he.Children.forEach(s,oe=>{if(!WM(oe,["Input","Select"]))return;const ce=WM(oe,["Select"])?oe.props.input:oe;ce&&woe(ce.props)&&(de=!0)}),de}),[H,U]=he.useState(()=>{let de=!1;return s&&he.Children.forEach(s,oe=>{WM(oe,["Input","Select"])&&(HA(oe.props,!0)||HA(oe.props.inputProps,!0))&&(de=!0)}),de}),[P,K]=he.useState(!1);h&&P&&K(!1);const ee=m!==void 0&&!h?m:P;let re;const ie=he.useMemo(()=>({adornedStart:L,setAdornedStart:z,color:l,disabled:h,error:d,filled:H,focused:ee,fullWidth:_,hiddenLabel:v,size:w,onBlur:()=>{K(!1)},onEmpty:()=>{U(!1)},onFilled:()=>{U(!0)},onFocus:()=>{K(!0)},registerEffect:re,required:x,variant:A}),[L,l,h,d,H,ee,_,v,re,x,w,A]);return Ve.jsx(lP.Provider,{value:ie,children:Ve.jsx(_le,ze({as:u,ownerState:O,className:kr(D.root,o),ref:t},k,{children:s}))})}),yle=vle,ble=Yre({createStyledComponent:jn("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root}),useThemeProps:n=>js({props:n,name:"MuiStack"})}),HT=ble;function Tle(n){return fs("MuiFormControlLabel",n)}const Sle=Rs("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),s$=Sle,Ele=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],$le=n=>{const{classes:e,disabled:t,labelPlacement:i,error:s,required:o}=n,l={root:["root",t&&"disabled",`labelPlacement${Kn(i)}`,s&&"error",o&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",s&&"error"]};return ks(l,Tle,e)},xle=jn("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${s$.label}`]:e.label},e.root,e[`labelPlacement${Kn(t.labelPlacement)}`]]}})(({theme:n,ownerState:e})=>ze({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${s$.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${s$.label}`]:{[`&.${s$.disabled}`]:{color:(n.vars||n).palette.text.disabled}}})),wle=jn("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${s$.error}`]:{color:(n.vars||n).palette.error.main}})),Cle=he.forwardRef(function(e,t){var i,s;const o=js({props:e,name:"MuiFormControlLabel"}),{className:l,componentsProps:u={},control:h,disabled:d,disableTypography:m,label:_,labelPlacement:v="end",required:S,slotProps:x={}}=o,w=tr(o,Ele),A=u_(),k=(i=d??h.props.disabled)!=null?i:A==null?void 0:A.disabled,O=S??h.props.required,D={disabled:k,required:O};["checked","name","onChange","value","inputRef"].forEach(K=>{typeof h.props[K]>"u"&&typeof o[K]<"u"&&(D[K]=o[K])});const L=Lv({props:o,muiFormControl:A,states:["error"]}),z=ze({},o,{disabled:k,labelPlacement:v,required:O,error:L.error}),H=$le(z),U=(s=x.typography)!=null?s:u.typography;let P=_;return P!=null&&P.type!==UT&&!m&&(P=Ve.jsx(UT,ze({component:"span"},U,{className:kr(H.label,U==null?void 0:U.className),children:P}))),Ve.jsxs(xle,ze({className:kr(H.root,l),ownerState:z,ref:t},w,{children:[he.cloneElement(h,D),O?Ve.jsxs(HT,{display:"block",children:[P,Ve.jsxs(wle,{ownerState:z,"aria-hidden":!0,className:H.asterisk,children:[" ","*"]})]}):P]}))}),Mle=Cle;function Ale(n){return fs("MuiFormGroup",n)}Rs("MuiFormGroup",["root","row","error"]);const Ile=["className","row"],Rle=n=>{const{classes:e,row:t,error:i}=n;return ks({root:["root",t&&"row",i&&"error"]},Ale,e)},kle=jn("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.row&&e.row]}})(({ownerState:n})=>ze({display:"flex",flexDirection:"column",flexWrap:"wrap"},n.row&&{flexDirection:"row"})),Ole=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiFormGroup"}),{className:s,row:o=!1}=i,l=tr(i,Ile),u=u_(),h=Lv({props:i,muiFormControl:u,states:["error"]}),d=ze({},i,{row:o,error:h.error}),m=Rle(d);return Ve.jsx(kle,ze({className:kr(m.root,s),ownerState:d,ref:t},l))}),Lle=Ole;function Dle(n){return fs("MuiFormHelperText",n)}const Nle=Rs("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),qz=Nle;var Zz;const Ble=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Ple=n=>{const{classes:e,contained:t,size:i,disabled:s,error:o,filled:l,focused:u,required:h}=n,d={root:["root",s&&"disabled",o&&"error",i&&`size${Kn(i)}`,t&&"contained",u&&"focused",l&&"filled",h&&"required"]};return ks(d,Dle,e)},Fle=jn("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${Kn(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(({theme:n,ownerState:e})=>ze({color:(n.vars||n).palette.text.secondary},n.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${qz.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${qz.error}`]:{color:(n.vars||n).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),Ule=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiFormHelperText"}),{children:s,className:o,component:l="p"}=i,u=tr(i,Ble),h=u_(),d=Lv({props:i,muiFormControl:h,states:["variant","size","disabled","error","filled","focused","required"]}),m=ze({},i,{component:l,contained:d.variant==="filled"||d.variant==="outlined",variant:d.variant,size:d.size,disabled:d.disabled,error:d.error,filled:d.filled,focused:d.focused,required:d.required}),_=Ple(m);return Ve.jsx(Fle,ze({as:l,ownerState:m,className:kr(_.root,o),ref:t},u,{children:s===" "?Zz||(Zz=Ve.jsx("span",{className:"notranslate",children:"​"})):s}))}),zle=Ule;function Hle(n){return fs("MuiFormLabel",n)}const Gle=Rs("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),$$=Gle,Wle=["children","className","color","component","disabled","error","filled","focused","required"],Vle=n=>{const{classes:e,color:t,focused:i,disabled:s,error:o,filled:l,required:u}=n,h={root:["root",`color${Kn(t)}`,s&&"disabled",o&&"error",l&&"filled",i&&"focused",u&&"required"],asterisk:["asterisk",o&&"error"]};return ks(h,Hle,e)},jle=jn("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:n},e)=>ze({},e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled)})(({theme:n,ownerState:e})=>ze({color:(n.vars||n).palette.text.secondary},n.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${$$.focused}`]:{color:(n.vars||n).palette[e.color].main},[`&.${$$.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${$$.error}`]:{color:(n.vars||n).palette.error.main}})),Xle=jn("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${$$.error}`]:{color:(n.vars||n).palette.error.main}})),Yle=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiFormLabel"}),{children:s,className:o,component:l="label"}=i,u=tr(i,Wle),h=u_(),d=Lv({props:i,muiFormControl:h,states:["color","required","focused","disabled","error","filled"]}),m=ze({},i,{color:d.color||"primary",component:l,disabled:d.disabled,error:d.error,filled:d.filled,focused:d.focused,required:d.required}),_=Vle(m);return Ve.jsxs(jle,ze({as:l,ownerState:m,className:kr(_.root,o),ref:t},u,{children:[s,d.required&&Ve.jsxs(Xle,{ownerState:m,"aria-hidden":!0,className:_.asterisk,children:[" ","*"]})]}))}),Kle=Yle,Jle=he.createContext(),e4=Jle;function Qle(n){return fs("MuiGrid",n)}const qle=[0,1,2,3,4,5,6,7,8,9,10],Zle=["column-reverse","column","row-reverse","row"],eue=["nowrap","wrap-reverse","wrap"],RE=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],sx=Rs("MuiGrid",["root","container","item","zeroMinWidth",...qle.map(n=>`spacing-xs-${n}`),...Zle.map(n=>`direction-xs-${n}`),...eue.map(n=>`wrap-xs-${n}`),...RE.map(n=>`grid-xs-${n}`),...RE.map(n=>`grid-sm-${n}`),...RE.map(n=>`grid-md-${n}`),...RE.map(n=>`grid-lg-${n}`),...RE.map(n=>`grid-xl-${n}`)]),tue=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function $T(n){const e=parseFloat(n);return`${e}${String(n).replace(String(e),"")||"px"}`}function nue({theme:n,ownerState:e}){let t;return n.breakpoints.keys.reduce((i,s)=>{let o={};if(e[s]&&(t=e[s]),!t)return i;if(t===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(t==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const l=qy({values:e.columns,breakpoints:n.breakpoints.values}),u=typeof l=="object"?l[s]:l;if(u==null)return i;const h=`${Math.round(t/u*1e8)/1e6}%`;let d={};if(e.container&&e.item&&e.columnSpacing!==0){const m=n.spacing(e.columnSpacing);if(m!=="0px"){const _=`calc(${h} + ${$T(m)})`;d={flexBasis:_,maxWidth:_}}}o=ze({flexBasis:h,flexGrow:0,maxWidth:h},d)}return n.breakpoints.values[s]===0?Object.assign(i,o):i[n.breakpoints.up(s)]=o,i},{})}function rue({theme:n,ownerState:e}){const t=qy({values:e.direction,breakpoints:n.breakpoints.values});return Wp({theme:n},t,i=>{const s={flexDirection:i};return i.indexOf("column")===0&&(s[`& > .${sx.item}`]={maxWidth:"none"}),s})}function O8({breakpoints:n,values:e}){let t="";Object.keys(e).forEach(s=>{t===""&&e[s]!==0&&(t=s)});const i=Object.keys(n).sort((s,o)=>n[s]-n[o]);return i.slice(0,i.indexOf(t))}function iue({theme:n,ownerState:e}){const{container:t,rowSpacing:i}=e;let s={};if(t&&i!==0){const o=qy({values:i,breakpoints:n.breakpoints.values});let l;typeof o=="object"&&(l=O8({breakpoints:n.breakpoints.values,values:o})),s=Wp({theme:n},o,(u,h)=>{var d;const m=n.spacing(u);return m!=="0px"?{marginTop:`-${$T(m)}`,[`& > .${sx.item}`]:{paddingTop:$T(m)}}:(d=l)!=null&&d.includes(h)?{}:{marginTop:0,[`& > .${sx.item}`]:{paddingTop:0}}})}return s}function sue({theme:n,ownerState:e}){const{container:t,columnSpacing:i}=e;let s={};if(t&&i!==0){const o=qy({values:i,breakpoints:n.breakpoints.values});let l;typeof o=="object"&&(l=O8({breakpoints:n.breakpoints.values,values:o})),s=Wp({theme:n},o,(u,h)=>{var d;const m=n.spacing(u);return m!=="0px"?{width:`calc(100% + ${$T(m)})`,marginLeft:`-${$T(m)}`,[`& > .${sx.item}`]:{paddingLeft:$T(m)}}:(d=l)!=null&&d.includes(h)?{}:{width:"100%",marginLeft:0,[`& > .${sx.item}`]:{paddingLeft:0}}})}return s}function oue(n,e,t={}){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[t[`spacing-xs-${String(n)}`]];const i=[];return e.forEach(s=>{const o=n[s];Number(o)>0&&i.push(t[`spacing-${s}-${String(o)}`])}),i}const aue=jn("div",{name:"MuiGrid",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n,{container:i,direction:s,item:o,spacing:l,wrap:u,zeroMinWidth:h,breakpoints:d}=t;let m=[];i&&(m=oue(l,d,e));const _=[];return d.forEach(v=>{const S=t[v];S&&_.push(e[`grid-${v}-${String(S)}`])}),[e.root,i&&e.container,o&&e.item,h&&e.zeroMinWidth,...m,s!=="row"&&e[`direction-xs-${String(s)}`],u!=="wrap"&&e[`wrap-xs-${String(u)}`],..._]}})(({ownerState:n})=>ze({boxSizing:"border-box"},n.container&&{display:"flex",flexWrap:"wrap",width:"100%"},n.item&&{margin:0},n.zeroMinWidth&&{minWidth:0},n.wrap!=="wrap"&&{flexWrap:n.wrap}),rue,iue,sue,nue);function lue(n,e){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[`spacing-xs-${String(n)}`];const t=[];return e.forEach(i=>{const s=n[i];if(Number(s)>0){const o=`spacing-${i}-${String(s)}`;t.push(o)}}),t}const uue=n=>{const{classes:e,container:t,direction:i,item:s,spacing:o,wrap:l,zeroMinWidth:u,breakpoints:h}=n;let d=[];t&&(d=lue(o,h));const m=[];h.forEach(v=>{const S=n[v];S&&m.push(`grid-${v}-${String(S)}`)});const _={root:["root",t&&"container",s&&"item",u&&"zeroMinWidth",...d,i!=="row"&&`direction-xs-${String(i)}`,l!=="wrap"&&`wrap-xs-${String(l)}`,...m]};return ks(_,Qle,e)},cue=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiGrid"}),{breakpoints:s}=uR(),o=Fx(i),{className:l,columns:u,columnSpacing:h,component:d="div",container:m=!1,direction:_="row",item:v=!1,rowSpacing:S,spacing:x=0,wrap:w="wrap",zeroMinWidth:A=!1}=o,k=tr(o,tue),O=S||x,D=h||x,L=he.useContext(e4),z=m?u||12:L,H={},U=ze({},k);s.keys.forEach(ee=>{k[ee]!=null&&(H[ee]=k[ee],delete U[ee])});const P=ze({},o,{columns:z,container:m,direction:_,item:v,rowSpacing:O,columnSpacing:D,wrap:w,zeroMinWidth:A,spacing:x},H,{breakpoints:s.keys}),K=uue(P);return Ve.jsx(e4.Provider,{value:z,children:Ve.jsx(aue,ze({ownerState:P,className:kr(K.root,l),as:d,ref:t},U))})}),vm=cue,hue=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function pD(n){return`scale(${n}, ${n**2})`}const due={entering:{opacity:1,transform:pD(1)},entered:{opacity:1,transform:"none"}},C2=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),L8=he.forwardRef(function(e,t){const{addEndListener:i,appear:s=!0,children:o,easing:l,in:u,onEnter:h,onEntered:d,onEntering:m,onExit:_,onExited:v,onExiting:S,style:x,timeout:w="auto",TransitionComponent:A=S8}=e,k=tr(e,hue),O=u8(),D=he.useRef(),L=uR(),z=he.useRef(null),H=lp(z,o.ref,t),U=ce=>me=>{if(ce){const Ae=z.current;me===void 0?ce(Ae):ce(Ae,me)}},P=U(m),K=U((ce,me)=>{E8(ce);const{duration:Ae,delay:j,easing:Z}=UA({style:x,timeout:w,easing:l},{mode:"enter"});let ne;w==="auto"?(ne=L.transitions.getAutoHeightDuration(ce.clientHeight),D.current=ne):ne=Ae,ce.style.transition=[L.transitions.create("opacity",{duration:ne,delay:j}),L.transitions.create("transform",{duration:C2?ne:ne*.666,delay:j,easing:Z})].join(","),h&&h(ce,me)}),ee=U(d),re=U(S),ie=U(ce=>{const{duration:me,delay:Ae,easing:j}=UA({style:x,timeout:w,easing:l},{mode:"exit"});let Z;w==="auto"?(Z=L.transitions.getAutoHeightDuration(ce.clientHeight),D.current=Z):Z=me,ce.style.transition=[L.transitions.create("opacity",{duration:Z,delay:Ae}),L.transitions.create("transform",{duration:C2?Z:Z*.666,delay:C2?Ae:Ae||Z*.333,easing:j})].join(","),ce.style.opacity=0,ce.style.transform=pD(.75),_&&_(ce)}),de=U(v),oe=ce=>{w==="auto"&&O.start(D.current||0,ce),i&&i(z.current,ce)};return Ve.jsx(A,ze({appear:s,in:u,nodeRef:z,onEnter:K,onEntered:ee,onEntering:P,onExit:ie,onExited:de,onExiting:re,addEndListener:oe,timeout:w==="auto"?null:w},k,{children:(ce,me)=>he.cloneElement(o,ze({style:ze({opacity:0,transform:pD(.75),visibility:ce==="exited"&&!u?"hidden":void 0},due[ce],x,o.props.style),ref:H},me))}))});L8.muiSupportAuto=!0;const pue=L8,fue=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],mue=n=>{const{classes:e,disableUnderline:t}=n,s=ks({root:["root",!t&&"underline"],input:["input"]},Ooe,e);return ze({},e,s)},gue=jn(pR,{shouldForwardProp:n=>Lf(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...hR(n,e),!t.disableUnderline&&e.underline]}})(({theme:n,ownerState:e})=>{let i=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(i=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),ze({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${IE.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${IE.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${IE.disabled}, .${IE.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${i}`}},[`&.${IE.disabled}:before`]:{borderBottomStyle:"dotted"}})}),_ue=jn(fR,{name:"MuiInput",slot:"Input",overridesResolver:dR})({}),D8=he.forwardRef(function(e,t){var i,s,o,l;const u=js({props:e,name:"MuiInput"}),{disableUnderline:h,components:d={},componentsProps:m,fullWidth:_=!1,inputComponent:v="input",multiline:S=!1,slotProps:x,slots:w={},type:A="text"}=u,k=tr(u,fue),O=mue(u),L={root:{ownerState:{disableUnderline:h}}},z=x??m?sp(x??m,L):L,H=(i=(s=w.root)!=null?s:d.Root)!=null?i:gue,U=(o=(l=w.input)!=null?l:d.Input)!=null?o:_ue;return Ve.jsx(uP,ze({slots:{root:H,input:U},slotProps:z,fullWidth:_,inputComponent:v,multiline:S,ref:t,type:A},k,{classes:O}))});D8.muiName="Input";const cP=D8;function vue(n){return fs("MuiInputLabel",n)}Rs("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const yue=["disableAnimation","margin","shrink","variant","className"],bue=n=>{const{classes:e,formControl:t,size:i,shrink:s,disableAnimation:o,variant:l,required:u}=n,h={root:["root",t&&"formControl",!o&&"animated",s&&"shrink",i&&i!=="normal"&&`size${Kn(i)}`,l],asterisk:[u&&"asterisk"]},d=ks(h,vue,e);return ze({},e,d)},Tue=jn(Kle,{shouldForwardProp:n=>Lf(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${$$.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(({theme:n,ownerState:e})=>ze({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})},e.variant==="filled"&&ze({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&ze({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&ze({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Sue=he.forwardRef(function(e,t){const i=js({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,shrink:o,className:l}=i,u=tr(i,yue),h=u_();let d=o;typeof d>"u"&&h&&(d=h.filled||h.focused||h.adornedStart);const m=Lv({props:i,muiFormControl:h,states:["size","variant","required","focused"]}),_=ze({},i,{disableAnimation:s,formControl:h,shrink:d,size:m.size,variant:m.variant,required:m.required,focused:m.focused}),v=bue(_);return Ve.jsx(Tue,ze({"data-shrink":d,ownerState:_,ref:t,className:kr(v.root,l)},u,{classes:v}))}),Eue=Sue,$ue=he.createContext({}),xue=$ue;function wue(n){return fs("MuiList",n)}Rs("MuiList",["root","padding","dense","subheader"]);const Cue=["children","className","component","dense","disablePadding","subheader"],Mue=n=>{const{classes:e,disablePadding:t,dense:i,subheader:s}=n;return ks({root:["root",!t&&"padding",i&&"dense",s&&"subheader"]},wue,e)},Aue=jn("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})(({ownerState:n})=>ze({listStyle:"none",margin:0,padding:0,position:"relative"},!n.disablePadding&&{paddingTop:8,paddingBottom:8},n.subheader&&{paddingTop:0})),Iue=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiList"}),{children:s,className:o,component:l="ul",dense:u=!1,disablePadding:h=!1,subheader:d}=i,m=tr(i,Cue),_=he.useMemo(()=>({dense:u}),[u]),v=ze({},i,{component:l,dense:u,disablePadding:h}),S=Mue(v);return Ve.jsx(xue.Provider,{value:_,children:Ve.jsxs(Aue,ze({as:l,className:kr(S.root,o),ref:t,ownerState:v},m,{children:[d,s]}))})}),Rue=Iue,kue=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function M2(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function t4(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function N8(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.indexOf(e.keys.join(""))===0}function kE(n,e,t,i,s,o){let l=!1,u=s(n,e,e?t:!1);for(;u;){if(u===n.firstChild){if(l)return!1;l=!0}const h=i?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!N8(u,o)||h)u=s(n,u,t);else return u.focus(),!0}return!1}const Oue=he.forwardRef(function(e,t){const{actions:i,autoFocus:s=!1,autoFocusItem:o=!1,children:l,className:u,disabledItemsFocusable:h=!1,disableListWrap:d=!1,onKeyDown:m,variant:_="selectedMenu"}=e,v=tr(e,kue),S=he.useRef(null),x=he.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Sv(()=>{s&&S.current.focus()},[s]),he.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(D,{direction:L})=>{const z=!S.current.style.width;if(D.clientHeight<S.current.clientHeight&&z){const H=`${h8(Hp(D))}px`;S.current.style[L==="rtl"?"paddingLeft":"paddingRight"]=H,S.current.style.width=`calc(100% + ${H})`}return S.current}}),[]);const w=D=>{const L=S.current,z=D.key,H=Hp(L).activeElement;if(z==="ArrowDown")D.preventDefault(),kE(L,H,d,h,M2);else if(z==="ArrowUp")D.preventDefault(),kE(L,H,d,h,t4);else if(z==="Home")D.preventDefault(),kE(L,null,d,h,M2);else if(z==="End")D.preventDefault(),kE(L,null,d,h,t4);else if(z.length===1){const U=x.current,P=z.toLowerCase(),K=performance.now();U.keys.length>0&&(K-U.lastTime>500?(U.keys=[],U.repeating=!0,U.previousKeyMatched=!0):U.repeating&&P!==U.keys[0]&&(U.repeating=!1)),U.lastTime=K,U.keys.push(P);const ee=H&&!U.repeating&&N8(H,U);U.previousKeyMatched&&(ee||kE(L,H,!1,h,M2,U))?D.preventDefault():U.previousKeyMatched=!1}m&&m(D)},A=lp(S,t);let k=-1;he.Children.forEach(l,(D,L)=>{if(!he.isValidElement(D)){k===L&&(k+=1,k>=l.length&&(k=-1));return}D.props.disabled||(_==="selectedMenu"&&D.props.selected||k===-1)&&(k=L),k===L&&(D.props.disabled||D.props.muiSkipListHighlight||D.type.muiSkipListHighlight)&&(k+=1,k>=l.length&&(k=-1))});const O=he.Children.map(l,(D,L)=>{if(L===k){const z={};return o&&(z.autoFocus=!0),D.props.tabIndex===void 0&&_==="selectedMenu"&&(z.tabIndex=0),he.cloneElement(D,z)}return D});return Ve.jsx(Rue,ze({role:"menu",ref:A,className:u,onKeyDown:w,tabIndex:s?0:-1},v,{children:O}))}),Lue=Oue;function Due(n){return fs("MuiPopover",n)}Rs("MuiPopover",["root","paper"]);const Nue=["onEntering"],Bue=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Pue=["slotProps"];function n4(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function r4(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function i4(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function A2(n){return typeof n=="function"?n():n}const Fue=n=>{const{classes:e}=n;return ks({root:["root"],paper:["paper"]},Due,e)},Uue=jn(M8,{name:"MuiPopover",slot:"Root",overridesResolver:(n,e)=>e.root})({}),B8=jn(oP,{name:"MuiPopover",slot:"Paper",overridesResolver:(n,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),zue=he.forwardRef(function(e,t){var i,s,o;const l=js({props:e,name:"MuiPopover"}),{action:u,anchorEl:h,anchorOrigin:d={vertical:"top",horizontal:"left"},anchorPosition:m,anchorReference:_="anchorEl",children:v,className:S,container:x,elevation:w=8,marginThreshold:A=16,open:k,PaperProps:O={},slots:D,slotProps:L,transformOrigin:z={vertical:"top",horizontal:"left"},TransitionComponent:H=pue,transitionDuration:U="auto",TransitionProps:{onEntering:P}={},disableScrollLock:K=!1}=l,ee=tr(l.TransitionProps,Nue),re=tr(l,Bue),ie=(i=L==null?void 0:L.paper)!=null?i:O,de=he.useRef(),oe=lp(de,ie.ref),ce=ze({},l,{anchorOrigin:d,anchorReference:_,elevation:w,marginThreshold:A,externalPaperSlotProps:ie,transformOrigin:z,TransitionComponent:H,transitionDuration:U,TransitionProps:ee}),me=Fue(ce),Ae=he.useCallback(()=>{if(_==="anchorPosition")return m;const Fe=A2(h),nt=(Fe&&Fe.nodeType===1?Fe:Hp(de.current).body).getBoundingClientRect();return{top:nt.top+n4(nt,d.vertical),left:nt.left+r4(nt,d.horizontal)}},[h,d.horizontal,d.vertical,m,_]),j=he.useCallback(Fe=>({vertical:n4(Fe,z.vertical),horizontal:r4(Fe,z.horizontal)}),[z.horizontal,z.vertical]),Z=he.useCallback(Fe=>{const rt={width:Fe.offsetWidth,height:Fe.offsetHeight},nt=j(rt);if(_==="none")return{top:null,left:null,transformOrigin:i4(nt)};const dt=Ae();let It=dt.top-nt.vertical,mt=dt.left-nt.horizontal;const wt=It+rt.height,$t=mt+rt.width,pt=Ev(A2(h)),Te=pt.innerHeight-A,te=pt.innerWidth-A;if(A!==null&&It<A){const ke=It-A;It-=ke,nt.vertical+=ke}else if(A!==null&&wt>Te){const ke=wt-Te;It-=ke,nt.vertical+=ke}if(A!==null&&mt<A){const ke=mt-A;mt-=ke,nt.horizontal+=ke}else if($t>te){const ke=$t-te;mt-=ke,nt.horizontal+=ke}return{top:`${Math.round(It)}px`,left:`${Math.round(mt)}px`,transformOrigin:i4(nt)}},[h,_,Ae,j,A]),[ne,ae]=he.useState(k),_e=he.useCallback(()=>{const Fe=de.current;if(!Fe)return;const rt=Z(Fe);rt.top!==null&&(Fe.style.top=rt.top),rt.left!==null&&(Fe.style.left=rt.left),Fe.style.transformOrigin=rt.transformOrigin,ae(!0)},[Z]);he.useEffect(()=>(K&&window.addEventListener("scroll",_e),()=>window.removeEventListener("scroll",_e)),[h,K,_e]);const Le=(Fe,rt)=>{P&&P(Fe,rt),_e()},we=()=>{ae(!1)};he.useEffect(()=>{k&&_e()}),he.useImperativeHandle(u,()=>k?{updatePosition:()=>{_e()}}:null,[k,_e]),he.useEffect(()=>{if(!k)return;const Fe=ZB(()=>{_e()}),rt=Ev(h);return rt.addEventListener("resize",Fe),()=>{Fe.clear(),rt.removeEventListener("resize",Fe)}},[h,k,_e]);let Xe=U;U==="auto"&&!H.muiSupportAuto&&(Xe=void 0);const Re=x||(h?Hp(A2(h)).body:void 0),qe=(s=D==null?void 0:D.root)!=null?s:Uue,Je=(o=D==null?void 0:D.paper)!=null?o:B8,ht=FT({elementType:Je,externalSlotProps:ze({},ie,{style:ne?ie.style:ze({},ie.style,{opacity:0})}),additionalProps:{elevation:w,ref:oe},ownerState:ce,className:kr(me.paper,ie==null?void 0:ie.className)}),it=FT({elementType:qe,externalSlotProps:(L==null?void 0:L.root)||{},externalForwardedProps:re,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:Re,open:k},ownerState:ce,className:kr(me.root,S)}),{slotProps:Oe}=it,Ee=tr(it,Pue);return Ve.jsx(qe,ze({},Ee,!zA(qe)&&{slotProps:Oe,disableScrollLock:K},{children:Ve.jsx(H,ze({appear:!0,in:k,onEntering:Le,onExited:we,timeout:Xe},ee,{children:Ve.jsx(Je,ze({},ht,{children:v}))}))}))}),Hue=zue;function Gue(n){return fs("MuiMenu",n)}Rs("MuiMenu",["root","paper","list"]);const Wue=["onEntering"],Vue=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],jue={vertical:"top",horizontal:"right"},Xue={vertical:"top",horizontal:"left"},Yue=n=>{const{classes:e}=n;return ks({root:["root"],paper:["paper"],list:["list"]},Gue,e)},Kue=jn(Hue,{shouldForwardProp:n=>Lf(n)||n==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Jue=jn(B8,{name:"MuiMenu",slot:"Paper",overridesResolver:(n,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Que=jn(Lue,{name:"MuiMenu",slot:"List",overridesResolver:(n,e)=>e.list})({outline:0}),que=he.forwardRef(function(e,t){var i,s;const o=js({props:e,name:"MuiMenu"}),{autoFocus:l=!0,children:u,className:h,disableAutoFocusItem:d=!1,MenuListProps:m={},onClose:_,open:v,PaperProps:S={},PopoverClasses:x,transitionDuration:w="auto",TransitionProps:{onEntering:A}={},variant:k="selectedMenu",slots:O={},slotProps:D={}}=o,L=tr(o.TransitionProps,Wue),z=tr(o,Vue),H=kre(),U=ze({},o,{autoFocus:l,disableAutoFocusItem:d,MenuListProps:m,onEntering:A,PaperProps:S,transitionDuration:w,TransitionProps:L,variant:k}),P=Yue(U),K=l&&!d&&v,ee=he.useRef(null),re=(j,Z)=>{ee.current&&ee.current.adjustStyleForScrollbar(j,{direction:H?"rtl":"ltr"}),A&&A(j,Z)},ie=j=>{j.key==="Tab"&&(j.preventDefault(),_&&_(j,"tabKeyDown"))};let de=-1;he.Children.map(u,(j,Z)=>{he.isValidElement(j)&&(j.props.disabled||(k==="selectedMenu"&&j.props.selected||de===-1)&&(de=Z))});const oe=(i=O.paper)!=null?i:Jue,ce=(s=D.paper)!=null?s:S,me=FT({elementType:O.root,externalSlotProps:D.root,ownerState:U,className:[P.root,h]}),Ae=FT({elementType:oe,externalSlotProps:ce,ownerState:U,className:P.paper});return Ve.jsx(Kue,ze({onClose:_,anchorOrigin:{vertical:"bottom",horizontal:H?"right":"left"},transformOrigin:H?jue:Xue,slots:{paper:oe,root:O.root},slotProps:{root:me,paper:Ae},open:v,ref:t,transitionDuration:w,TransitionProps:ze({onEntering:re},L),ownerState:U},z,{classes:x,children:Ve.jsx(Que,ze({onKeyDown:ie,actions:ee,autoFocus:l&&(de===-1||d),autoFocusItem:K,variant:k},m,{className:kr(P.list,m.className),children:u}))}))}),Zue=que;function ece(n){return fs("MuiNativeSelect",n)}const tce=Rs("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),hP=tce,nce=["className","disabled","error","IconComponent","inputRef","variant"],rce=n=>{const{classes:e,variant:t,disabled:i,multiple:s,open:o,error:l}=n,u={select:["select",t,i&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${Kn(t)}`,o&&"iconOpen",i&&"disabled"]};return ks(u,ece,e)},P8=({ownerState:n,theme:e})=>ze({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":ze({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${hP.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},n.variant==="filled"&&{"&&&":{paddingRight:32}},n.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),ice=jn("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Lf,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${hP.multiple}`]:e.multiple}]}})(P8),F8=({ownerState:n,theme:e})=>ze({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${hP.disabled}`]:{color:(e.vars||e).palette.action.disabled}},n.open&&{transform:"rotate(180deg)"},n.variant==="filled"&&{right:7},n.variant==="outlined"&&{right:7}),sce=jn("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${Kn(t.variant)}`],t.open&&e.iconOpen]}})(F8),oce=he.forwardRef(function(e,t){const{className:i,disabled:s,error:o,IconComponent:l,inputRef:u,variant:h="standard"}=e,d=tr(e,nce),m=ze({},e,{disabled:s,variant:h,error:o}),_=rce(m);return Ve.jsxs(he.Fragment,{children:[Ve.jsx(ice,ze({ownerState:m,className:kr(_.select,i),disabled:s,ref:u||t},d)),e.multiple?null:Ve.jsx(sce,{as:l,ownerState:m,className:_.icon})]})}),ace=oce;var s4;const lce=["children","classes","className","label","notched"],uce=jn("fieldset",{shouldForwardProp:Lf})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),cce=jn("legend",{shouldForwardProp:Lf})(({ownerState:n,theme:e})=>ze({float:"unset",width:"auto",overflow:"hidden"},!n.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},n.withLabel&&ze({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},n.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function hce(n){const{className:e,label:t,notched:i}=n,s=tr(n,lce),o=t!=null&&t!=="",l=ze({},n,{notched:i,withLabel:o});return Ve.jsx(uce,ze({"aria-hidden":!0,className:e,ownerState:l},s,{children:Ve.jsx(cce,{ownerState:l,children:o?Ve.jsx("span",{children:t}):s4||(s4=Ve.jsx("span",{className:"notranslate",children:"​"}))})}))}const dce=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],pce=n=>{const{classes:e}=n,i=ks({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Doe,e);return ze({},e,i)},fce=jn(pR,{shouldForwardProp:n=>Lf(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:hR})(({theme:n,ownerState:e})=>{const t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return ze({position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${P_.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${P_.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${P_.focused} .${P_.notchedOutline}`]:{borderColor:(n.vars||n).palette[e.color].main,borderWidth:2},[`&.${P_.error} .${P_.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${P_.disabled} .${P_.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&ze({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),mce=jn(hce,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,e)=>e.notchedOutline})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),gce=jn(fR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:dR})(({theme:n,ownerState:e})=>ze({padding:"16.5px 14px"},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),U8=he.forwardRef(function(e,t){var i,s,o,l,u;const h=js({props:e,name:"MuiOutlinedInput"}),{components:d={},fullWidth:m=!1,inputComponent:_="input",label:v,multiline:S=!1,notched:x,slots:w={},type:A="text"}=h,k=tr(h,dce),O=pce(h),D=u_(),L=Lv({props:h,muiFormControl:D,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),z=ze({},h,{color:L.color||"primary",disabled:L.disabled,error:L.error,focused:L.focused,formControl:D,fullWidth:m,hiddenLabel:L.hiddenLabel,multiline:S,size:L.size,type:A}),H=(i=(s=w.root)!=null?s:d.Root)!=null?i:fce,U=(o=(l=w.input)!=null?l:d.Input)!=null?o:gce;return Ve.jsx(uP,ze({slots:{root:H,input:U},renderSuffix:P=>Ve.jsx(mce,{ownerState:z,className:O.notchedOutline,label:v!=null&&v!==""&&L.required?u||(u=Ve.jsxs(he.Fragment,{children:[v," ","*"]})):v,notched:typeof x<"u"?x:!!(P.startAdornment||P.filled||P.focused)}),fullWidth:m,inputComponent:_,multiline:S,ref:t,type:A},k,{classes:ze({},O,{notchedOutline:null})}))});U8.muiName="Input";const z8=U8;function _ce(n){return fs("MuiSelect",n)}const OE=Rs("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var o4;const vce=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],yce=jn("div",{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${OE.select}`]:e.select},{[`&.${OE.select}`]:e[t.variant]},{[`&.${OE.error}`]:e.error},{[`&.${OE.multiple}`]:e.multiple}]}})(P8,{[`&.${OE.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),bce=jn("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${Kn(t.variant)}`],t.open&&e.iconOpen]}})(F8),Tce=jn("input",{shouldForwardProp:n=>T8(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(n,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function a4(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function Sce(n){return n==null||typeof n=="string"&&!n.trim()}const Ece=n=>{const{classes:e,variant:t,disabled:i,multiple:s,open:o,error:l}=n,u={select:["select",t,i&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${Kn(t)}`,o&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return ks(u,_ce,e)},$ce=he.forwardRef(function(e,t){var i;const{"aria-describedby":s,"aria-label":o,autoFocus:l,autoWidth:u,children:h,className:d,defaultOpen:m,defaultValue:_,disabled:v,displayEmpty:S,error:x=!1,IconComponent:w,inputRef:A,labelId:k,MenuProps:O={},multiple:D,name:L,onBlur:z,onChange:H,onClose:U,onFocus:P,onOpen:K,open:ee,readOnly:re,renderValue:ie,SelectDisplayProps:de={},tabIndex:oe,value:ce,variant:me="standard"}=e,Ae=tr(e,vce),[j,Z]=BA({controlled:ce,default:_,name:"Select"}),[ne,ae]=BA({controlled:ee,default:m,name:"Select"}),_e=he.useRef(null),Le=he.useRef(null),[we,Xe]=he.useState(null),{current:Re}=he.useRef(ee!=null),[qe,Je]=he.useState(),ht=lp(t,A),it=he.useCallback(le=>{Le.current=le,le&&Xe(le)},[]),Oe=we==null?void 0:we.parentNode;he.useImperativeHandle(ht,()=>({focus:()=>{Le.current.focus()},node:_e.current,value:j}),[j]),he.useEffect(()=>{m&&ne&&we&&!Re&&(Je(u?null:Oe.clientWidth),Le.current.focus())},[we,u]),he.useEffect(()=>{l&&Le.current.focus()},[l]),he.useEffect(()=>{if(!k)return;const le=Hp(Le.current).getElementById(k);if(le){const $e=()=>{getSelection().isCollapsed&&Le.current.focus()};return le.addEventListener("click",$e),()=>{le.removeEventListener("click",$e)}}},[k]);const Ee=(le,$e)=>{le?K&&K($e):U&&U($e),Re||(Je(u?null:Oe.clientWidth),ae(le))},Fe=le=>{le.button===0&&(le.preventDefault(),Le.current.focus(),Ee(!0,le))},rt=le=>{Ee(!1,le)},nt=he.Children.toArray(h),dt=le=>{const $e=nt.find(We=>We.props.value===le.target.value);$e!==void 0&&(Z($e.props.value),H&&H(le,$e))},It=le=>$e=>{let We;if($e.currentTarget.hasAttribute("tabindex")){if(D){We=Array.isArray(j)?j.slice():[];const Ft=j.indexOf(le.props.value);Ft===-1?We.push(le.props.value):We.splice(Ft,1)}else We=le.props.value;if(le.props.onClick&&le.props.onClick($e),j!==We&&(Z(We),H)){const Ft=$e.nativeEvent||$e,Be=new Ft.constructor(Ft.type,Ft);Object.defineProperty(Be,"target",{writable:!0,value:{value:We,name:L}}),H(Be,le)}D||Ee(!1,$e)}},mt=le=>{re||[" ","ArrowUp","ArrowDown","Enter"].indexOf(le.key)!==-1&&(le.preventDefault(),Ee(!0,le))},wt=we!==null&&ne,$t=le=>{!wt&&z&&(Object.defineProperty(le,"target",{writable:!0,value:{value:j,name:L}}),z(le))};delete Ae["aria-invalid"];let pt,Te;const te=[];let ke=!1;(HA({value:j})||S)&&(ie?pt=ie(j):ke=!0);const ot=nt.map(le=>{if(!he.isValidElement(le))return null;let $e;if(D){if(!Array.isArray(j))throw new Error(pb(2));$e=j.some(We=>a4(We,le.props.value)),$e&&ke&&te.push(le.props.children)}else $e=a4(j,le.props.value),$e&&ke&&(Te=le.props.children);return he.cloneElement(le,{"aria-selected":$e?"true":"false",onClick:It(le),onKeyUp:We=>{We.key===" "&&We.preventDefault(),le.props.onKeyUp&&le.props.onKeyUp(We)},role:"option",selected:$e,value:void 0,"data-value":le.props.value})});ke&&(D?te.length===0?pt=null:pt=te.reduce((le,$e,We)=>(le.push($e),We<te.length-1&&le.push(", "),le),[]):pt=Te);let ft=qe;!u&&Re&&we&&(ft=Oe.clientWidth);let xt;typeof oe<"u"?xt=oe:xt=v?null:0;const at=de.id||(L?`mui-component-select-${L}`:void 0),Ge=ze({},e,{variant:me,value:j,open:wt,error:x}),Ce=Ece(Ge),X=ze({},O.PaperProps,(i=O.slotProps)==null?void 0:i.paper),Q=sR();return Ve.jsxs(he.Fragment,{children:[Ve.jsx(yce,ze({ref:it,tabIndex:xt,role:"combobox","aria-controls":Q,"aria-disabled":v?"true":void 0,"aria-expanded":wt?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[k,at].filter(Boolean).join(" ")||void 0,"aria-describedby":s,onKeyDown:mt,onMouseDown:v||re?null:Fe,onBlur:$t,onFocus:P},de,{ownerState:Ge,className:kr(de.className,Ce.select,d),id:at,children:Sce(pt)?o4||(o4=Ve.jsx("span",{className:"notranslate",children:"​"})):pt})),Ve.jsx(Tce,ze({"aria-invalid":x,value:Array.isArray(j)?j.join(","):j,name:L,ref:_e,"aria-hidden":!0,onChange:dt,tabIndex:-1,disabled:v,className:Ce.nativeInput,autoFocus:l,ownerState:Ge},Ae)),Ve.jsx(bce,{as:w,className:Ce.icon,ownerState:Ge}),Ve.jsx(Zue,ze({id:`menu-${L||""}`,anchorEl:Oe,open:wt,onClose:rt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},O,{MenuListProps:ze({"aria-labelledby":k,role:"listbox","aria-multiselectable":D?"true":void 0,disableListWrap:!0,id:Q},O.MenuListProps),slotProps:ze({},O.slotProps,{paper:ze({},X,{style:ze({minWidth:ft},X!=null?X.style:null)})}),children:ot}))]})}),xce=$ce,wce=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Cce=["root"],Mce=n=>{const{classes:e}=n;return e},dP={name:"MuiSelect",overridesResolver:(n,e)=>e.root,shouldForwardProp:n=>Lf(n)&&n!=="variant",slot:"Root"},Ace=jn(cP,dP)(""),Ice=jn(z8,dP)(""),Rce=jn(k8,dP)(""),H8=he.forwardRef(function(e,t){const i=js({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:o,classes:l={},className:u,defaultOpen:h=!1,displayEmpty:d=!1,IconComponent:m=Foe,id:_,input:v,inputProps:S,label:x,labelId:w,MenuProps:A,multiple:k=!1,native:O=!1,onClose:D,onOpen:L,open:z,renderValue:H,SelectDisplayProps:U,variant:P="outlined"}=i,K=tr(i,wce),ee=O?ace:xce,re=u_(),ie=Lv({props:i,muiFormControl:re,states:["variant","error"]}),de=ie.variant||P,oe=ze({},i,{variant:de,classes:l}),ce=Mce(oe),me=tr(ce,Cce),Ae=v||{standard:Ve.jsx(Ace,{ownerState:oe}),outlined:Ve.jsx(Ice,{label:x,ownerState:oe}),filled:Ve.jsx(Rce,{ownerState:oe})}[de],j=lp(t,Ae.ref);return Ve.jsx(he.Fragment,{children:he.cloneElement(Ae,ze({inputComponent:ee,inputProps:ze({children:o,error:ie.error,IconComponent:m,variant:de,type:void 0,multiple:k},O?{id:_}:{autoWidth:s,defaultOpen:h,displayEmpty:d,labelId:w,MenuProps:A,onClose:D,onOpen:L,open:z,renderValue:H,SelectDisplayProps:ze({id:_},U)},S,{classes:S?sp(me,S.classes):me},v?v.props.inputProps:{})},(k&&O||d)&&de==="outlined"?{notched:!0}:{},{ref:j,className:kr(Ae.props.className,u,ce.root)},!v&&{variant:de},K))})});H8.muiName="Select";const kce=H8;function Oce(n){return fs("MuiTextField",n)}Rs("MuiTextField",["root"]);const Lce=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Dce={standard:cP,filled:k8,outlined:z8},Nce=n=>{const{classes:e}=n;return ks({root:["root"]},Oce,e)},Bce=jn(yle,{name:"MuiTextField",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Pce=he.forwardRef(function(e,t){const i=js({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:o=!1,children:l,className:u,color:h="primary",defaultValue:d,disabled:m=!1,error:_=!1,FormHelperTextProps:v,fullWidth:S=!1,helperText:x,id:w,InputLabelProps:A,inputProps:k,InputProps:O,inputRef:D,label:L,maxRows:z,minRows:H,multiline:U=!1,name:P,onBlur:K,onChange:ee,onFocus:re,placeholder:ie,required:de=!1,rows:oe,select:ce=!1,SelectProps:me,type:Ae,value:j,variant:Z="outlined"}=i,ne=tr(i,Lce),ae=ze({},i,{autoFocus:o,color:h,disabled:m,error:_,fullWidth:S,multiline:U,required:de,select:ce,variant:Z}),_e=Nce(ae),Le={};Z==="outlined"&&(A&&typeof A.shrink<"u"&&(Le.notched=A.shrink),Le.label=L),ce&&((!me||!me.native)&&(Le.id=void 0),Le["aria-describedby"]=void 0);const we=sR(w),Xe=x&&we?`${we}-helper-text`:void 0,Re=L&&we?`${we}-label`:void 0,qe=Dce[Z],Je=Ve.jsx(qe,ze({"aria-describedby":Xe,autoComplete:s,autoFocus:o,defaultValue:d,fullWidth:S,multiline:U,name:P,rows:oe,maxRows:z,minRows:H,type:Ae,value:j,id:we,inputRef:D,onBlur:K,onChange:ee,onFocus:re,placeholder:ie,inputProps:k},Le,O));return Ve.jsxs(Bce,ze({className:kr(_e.root,u),disabled:m,error:_,fullWidth:S,ref:t,required:de,color:h,variant:Z,ownerState:ae},ne,{children:[L!=null&&L!==""&&Ve.jsx(Eue,ze({htmlFor:we,id:Re},A,{children:L})),ce?Ve.jsx(kce,ze({"aria-describedby":Xe,id:we,labelId:Re,value:j,input:Je},me,{children:l})):Je,x&&Ve.jsx(zle,ze({id:Xe},v,{children:x}))]}))}),pP=Pce,Fce="/gpu-programming/assets/misty-Q0vWeXcA.svg",Uce="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20400%20400'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-54.8776,-69.2073)'%3e%3cg%20transform='matrix(1.02822,0,0,1.03479,-55.9535,52.2937)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,286.809,459.697)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'/%3e%3c/g%3e%3cg%20transform='matrix(0.440957,0.440957,-0.704461,0.704461,267.224,-50.5009)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.249775,0.249775,-0.614768,-0.614768,655.131,143.162)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20451.634,248.57%20429.001,248.57L121.05,248.57C98.417,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2098.417,215.247%20121.05,215.247L429.001,215.247C451.634,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(1.02822,0,0,1.03479,44.3939,-48.6949)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,171.204,575.302)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,453.376,402.183)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.249775,0.249775,-0.614768,-0.614768,274.402,521.42)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20451.634,248.57%20429.001,248.57L121.05,248.57C98.417,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2098.417,215.247%20121.05,215.247L429.001,215.247C451.634,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.440957,-0.440957,0.704461,-0.704461,241.43,564.525)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,395.716,343.809)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",zce="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20401%20400'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-53.2986,-56.7857)'%3e%3cg%20transform='matrix(0.992184,0,0,0.998302,0.416603,0.0964004)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,286.809,459.697)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'/%3e%3c/g%3e%3cg%20transform='matrix(0.440957,0.440957,-0.704461,0.704461,267.224,-50.5009)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.237219,0.237219,-0.614768,-0.614768,613.767,184.608)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20450.661,248.57%20426.831,248.57L123.22,248.57C99.39,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2099.39,215.247%20123.22,215.247L426.831,215.247C450.661,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(0.992184,0,0,0.998302,0.416603,0.0964004)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,171.204,575.302)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,453.376,402.183)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.237219,0.237219,-0.614768,-0.614768,311.603,484.301)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20450.661,248.57%20426.831,248.57L123.22,248.57C99.39,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2099.39,215.247%20123.22,215.247L426.831,215.247C450.661,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.440957,-0.440957,0.704461,-0.704461,241.43,564.525)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,395.716,343.809)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function xT({icon:n,text:e,clickFunction:t,disabled:i,style:s}){return Ve.jsx(cae,{onClick:t,startIcon:n,disabled:i,classes:{disabled:"disabledDropShadowButton"},style:{margin:"5px",color:"black",backgroundColor:"#FAFAFA",borderRadius:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",...s},children:e})}var fP={},I2={};const Hce=a0(use);var l4;function _R(){return l4||(l4=1,function(n){"use client";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=Hce}(I2)),I2}var Gce=fS;Object.defineProperty(fP,"__esModule",{value:!0});var G8=fP.default=void 0,Wce=Gce(_R()),Vce=Ve;G8=fP.default=(0,Wce.default)((0,Vce.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");const jce=_S(Ve.jsx("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"}),"EditNote");function Xce(n){const[e,t]=he.useState(""),i=lr(so(x=>x.setIp)),s=lr(so(x=>x.setImageList)),o=lr(so(x=>x.setAudioList)),l=lr(so(x=>x.setIsConnected)),u=lr(so(x=>x.isConnected)),h=lr(so(x=>x.disconnect)),d=lr(x=>x.setActiveModal);lr(x=>x.toggleLLMMode);const m=lr(so(x=>x.llmMode)),_=lr(x=>x.setHeaderDimensions);he.useEffect(()=>{const x=document.getElementById("website-header");new ResizeObserver(A=>{for(let k of A)_(x.offsetHeight,x.offsetWidth)}).observe(x)},[]);const v=()=>{i(e),fetch(`http://${e}/api/battery`,{method:"GET"}).then(x=>{if(!x.ok)throw new Error(`Request failed with status ${x.status}`);return x.json()}).then(x=>(console.log(`Successfully sent a GET request, the response is: ${x}`),l(!0),fetch(`http://${e}/api/audio/list`))).then(x=>{if(!x.ok)throw new Error(`Request failed with status ${x.status}`);return x.json()}).then(x=>(o(x.result),fetch(`http://${e}/api/images/list`))).then(x=>{if(!x.ok)throw new Error(`Request failed with status ${x.status}`);return x.json()}).then(x=>{s(x.result)}).catch(x=>{console.error("Error during fetch operation:",x.message),alert(`Error fetching data: ${x.message}`)}),zu("Hit Confirm IP Address Button")},S={backgroundColor:"#585D92",color:"#FFFFFF",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",zIndex:101,position:"relative",paddingLeft:"20px",paddingTop:"5px",paddingBottom:"5px"};return Ve.jsxs(vm,{id:"website-header",container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",style:S,children:[Ve.jsx(vm,{item:!0,xs:12,sm:3,md:2,lg:3,xl:3,children:Ve.jsxs(HT,{direction:"row",alignItems:"center",children:[Ve.jsx("img",{style:{maxHeight:"35px",paddingRight:"5px"},src:Fce}),Ve.jsx(UT,{display:"inline",variant:"h5",children:"Robo-Blocks"})]})}),Ve.jsx(vm,{item:!0,xs:12,sm:9,md:10,lg:9,xl:9,children:Ve.jsxs(vm,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[Ve.jsx(vm,{item:!0,xs:12,sm:12,md:4,lg:4,xl:3,style:{justifyContent:"right",display:"flex"},children:Ve.jsx(xT,{icon:Ve.jsx(jce,{}),text:m?"Program Manually":"Program with ChatGPT",clickFunction:()=>d(SV)})}),Ve.jsx(vm,{item:!0,xs:12,sm:12,md:8,lg:5,xl:4,style:{justifyContent:"right",display:"flex"},children:Ve.jsxs(HT,{direction:"row",children:[!u&&Ve.jsx("div",{style:{backgroundColor:"#FF7E7E",width:"45px",height:"45px",borderRadius:"25px",marginRight:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},children:Ve.jsx("img",{style:{height:"34px",position:"absolute",top:"5px",left:"5px"},src:zce})}),u&&Ve.jsx("div",{style:{backgroundColor:"#A0FF7E",width:"45px",height:"45px",borderRadius:"25px",marginRight:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},children:Ve.jsx("img",{style:{height:"34px",position:"absolute",top:"5px",left:"5px"},src:Uce})}),Ve.jsx(pP,{id:"robotIpAddress",disabled:u,label:"IP",variant:"filled",style:{backgroundColor:"#FFFFFF50",borderRadius:"5px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",marginRight:"5px"},defaultValue:"",onChange:x=>t(x.target.value)}),!u&&Ve.jsx(xT,{text:"Connect",clickFunction:v}),u&&Ve.jsx(xT,{text:"Disconnect",clickFunction:h}),Ve.jsx(XM,{style:{margin:"5px",marginRight:"10px",color:"black",backgroundColor:"#FAFAFA",borderRadius:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},onClick:()=>{d(TV)},children:Ve.jsx(G8,{})})]})})]})})]})}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yce={kind:"categoryToolbox",contents:[{kind:"category",name:"Logic",categorystyle:"logic_category",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_null"},{kind:"block",type:"logic_ternary"}]},{kind:"category",name:"Loops",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{shadow:{type:"math_number",fields:{NUM:10}}}}}]},{kind:"category",name:"Math",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"BasicSlider"},{kind:"block",type:"math_number_property",inputs:{NUMBER_TO_CHECK:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"math_random_int",inputs:{FROM:{shadow:{type:"math_number",fields:{NUM:1}}},TO:{shadow:{type:"math_number",fields:{NUM:100}}}}}]},{kind:"category",name:"Functions",categorystyle:"procedure_category",custom:"PROCEDURE"},{kind:"sep",gap:"8"},{kind:"category",name:"Movement",categorystyle:"movement_category",contents:[{kind:"block",type:"DriveTime"},{kind:"block",type:"DriveTime2"},{kind:"block",type:"Turn"},{kind:"block",type:"Turn2"},{kind:"block",type:"MoveHead"},{kind:"block",type:"MoveHead3"},{kind:"block",type:"MoveArm"},{kind:"block",type:"MoveArm2"},{kind:"block",type:"MoveArms2"},{kind:"block",type:"MoveArm3"}]},{kind:"category",name:"Light",categorystyle:"light_category",contents:[{kind:"block",type:"ChangeLED"},{kind:"block",type:"TransitionLED"},{kind:"block",type:"colour_picker"},{kind:"block",type:"colour_random"},{kind:"block",type:"colour_rgb",inputs:{RED:{shadow:{type:"math_number",fields:{NUM:100}}},GREEN:{shadow:{type:"math_number",fields:{NUM:50}}},BLUE:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"colour_blend",inputs:{COLOUR1:{shadow:{type:"colour_picker",fields:{COLOUR:"#ff0000"}}},COLOUR2:{shadow:{type:"colour_picker",fields:{COLOUR:"#3333ff"}}},RATIO:{shadow:{type:"math_number",fields:{NUM:.5}}}}},{kind:"block",type:"TurnOnFlashlight"},{kind:"block",type:"TurnOffFlashlight"}]},{kind:"category",name:"Speech",categorystyle:"speech_category",contents:[{kind:"block",type:"Speak"},{kind:"block",type:"SpeakDefault"},{kind:"block",type:"text"}]},{kind:"category",name:"Face",categorystyle:"face_category",contents:[{kind:"block",type:"DisplayImage"},{kind:"block",type:"eyes_acceptance"},{kind:"block",type:"eyes_admiration"},{kind:"block",type:"eyes_amazement"},{kind:"block",type:"eyes_anger"},{kind:"block",type:"eyes_annoyed"},{kind:"block",type:"eyes_anticipation"},{kind:"block",type:"eyes_apprehension"},{kind:"block",type:"eyes_boredom"},{kind:"block",type:"eyes_default"},{kind:"block",type:"eyes_disgust"},{kind:"block",type:"eyes_distraction"},{kind:"block",type:"eyes_ecstasy_frame_1"},{kind:"block",type:"eyes_ecstasy_frame_2"},{kind:"block",type:"eyes_fear"},{kind:"block",type:"eyes_grief"},{kind:"block",type:"eyes_interest"},{kind:"block",type:"eyes_joy"},{kind:"block",type:"eyes_loathing"},{kind:"block",type:"eyes_pensiveness"},{kind:"block",type:"eyes_rage"},{kind:"block",type:"eyes_sad"},{kind:"block",type:"eyes_serenity"},{kind:"block",type:"eyes_surprise"},{kind:"block",type:"eyes_terror"},{kind:"block",type:"eyes_trust"},{kind:"block",type:"eyes_vigilance"},{kind:"block",type:"e_Sleeping"},{kind:"block",type:"e_SleepingZZZ"},{kind:"block",type:"e_Contempt"},{kind:"block",type:"e_ContentLeft"},{kind:"block",type:"e_ContentRight"},{kind:"block",type:"e_Disoriented"},{kind:"block",type:"e_EcstacyHilarious"},{kind:"block",type:"e_EcstacyStarryEyed"},{kind:"block",type:"e_JoyGoofy"},{kind:"block",type:"e_JoyGoofy2"},{kind:"block",type:"e_JoyGoofy3"},{kind:"block",type:"e_Love"},{kind:"block",type:"e_Rage"},{kind:"block",type:"e_Rage2"},{kind:"block",type:"e_Rage3"},{kind:"block",type:"e_Rage4"},{kind:"block",type:"e_RemorseShame"}]},{kind:"category",name:"Audio",categorystyle:"audio_category",contents:[{kind:"block",type:"SetVolume"},{kind:"block",type:"PlayAudio"},{kind:"block",type:"s_Acceptance"},{kind:"block",type:"s_Amazement"},{kind:"block",type:"s_Amazement2"},{kind:"block",type:"s_Anger"},{kind:"block",type:"s_Anger2"},{kind:"block",type:"s_Anger3"},{kind:"block",type:"s_Anger4"},{kind:"block",type:"s_Annoyance"},{kind:"block",type:"s_Annoyance2"},{kind:"block",type:"s_Annoyance3"},{kind:"block",type:"s_Annoyance4"},{kind:"block",type:"s_Awe"},{kind:"block",type:"s_Awe2"},{kind:"block",type:"s_Awe3"},{kind:"block",type:"s_Boredom"},{kind:"block",type:"s_Disapproval"},{kind:"block",type:"s_Disgust"},{kind:"block",type:"s_Disgust2"},{kind:"block",type:"s_Disgust3"},{kind:"block",type:"s_DisorientedConfused"},{kind:"block",type:"s_DisorientedConfused2"},{kind:"block",type:"s_DisorientedConfused3"},{kind:"block",type:"s_DisorientedConfused4"},{kind:"block",type:"s_DisorientedConfused5"},{kind:"block",type:"s_DisorientedConfused6"},{kind:"block",type:"s_Distraction"},{kind:"block",type:"s_Ecstacy"},{kind:"block",type:"s_Ecstacy2"},{kind:"block",type:"s_Fear"},{kind:"block",type:"s_Grief"},{kind:"block",type:"s_Grief2"},{kind:"block",type:"s_Grief3"},{kind:"block",type:"s_Grief4"},{kind:"block",type:"s_Joy"},{kind:"block",type:"s_Joy2"},{kind:"block",type:"s_Joy3"},{kind:"block",type:"s_Joy4"},{kind:"block",type:"s_Loathing"},{kind:"block",type:"s_Love"},{kind:"block",type:"s_PhraseByeBye"},{kind:"block",type:"s_PhraseEvilAhHa"},{kind:"block",type:"s_PhraseHello"},{kind:"block",type:"s_PhraseNoNoNo"},{kind:"block",type:"s_PhraseOopsy"},{kind:"block",type:"s_PhraseOwOwOw"},{kind:"block",type:"s_PhraseOwwww"},{kind:"block",type:"s_PhraseUhOh"},{kind:"block",type:"s_Rage"},{kind:"block",type:"s_Sadness"},{kind:"block",type:"s_Sadness2"},{kind:"block",type:"s_Sadness3"},{kind:"block",type:"s_Sadness4"},{kind:"block",type:"s_Sadness5"},{kind:"block",type:"s_Sadness6"},{kind:"block",type:"s_Sadness7"},{kind:"block",type:"s_Sleepy"},{kind:"block",type:"s_Sleepy2"},{kind:"block",type:"s_Sleepy3"},{kind:"block",type:"s_Sleepy4"},{kind:"block",type:"s_SleepySnore"},{kind:"block",type:"s_SystemCameraShutter"}]},{kind:"category",name:"Misc",categorystyle:"misc_category",contents:[{kind:"block",type:"DisplayAnimation"},{kind:"block",type:"DisplayText"},{kind:"block",type:"ClearText"},{kind:"block",type:"WaitForSeconds"}]}]},Kce="/gpu-programming/assets/uw-crest-color-web-digital-CjofXveo.svg",Jce="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20194%20209'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-67.3413,-198.983)'%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,37.529,47.7569)'%3e%3cpath%20d='M-4.263,-4.263C-1.908,-4.263%200.001,-2.353%200.001,0.002C0.001,2.356%20-1.908,4.263%20-4.263,4.263C-6.617,4.263%20-8.527,2.356%20-8.527,0.002C-8.527,-2.353%20-6.617,-4.263%20-4.263,-4.263'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,59.9955,60.1716)'%3e%3cpath%20d='M-2.673,-2.671C-1.196,-2.671%20-0.001,-1.477%20-0.001,0.001C-0.001,1.477%20-1.196,2.673%20-2.673,2.673C-4.148,2.673%20-5.342,1.477%20-5.342,0.001C-5.342,-1.477%20-4.148,-2.671%20-2.673,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,18.8329,65.7474)'%3e%3cpath%20d='M-2.671,-2.671C-1.196,-2.671%200.001,-1.476%200.001,0C0.001,1.475%20-1.196,2.671%20-2.671,2.671C-4.146,2.671%20-5.343,1.475%20-5.343,0C-5.343,-1.476%20-4.146,-2.671%20-2.671,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,34.0834,92.4773)'%3e%3cpath%20d='M-2.672,-2.672C-1.197,-2.672%200,-1.477%200,-0.001C0,1.475%20-1.197,2.672%20-2.672,2.672C-4.149,2.672%20-5.344,1.475%20-5.344,-0.001C-5.344,-1.477%20-4.149,-2.672%20-2.672,-2.672'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,47.2036,90.0173)'%3e%3cpath%20d='M-2.673,-2.671C-1.198,-2.671%20-0.001,-1.477%20-0.001,0C-0.001,1.476%20-1.198,2.673%20-2.673,2.673C-4.148,2.673%20-5.342,1.476%20-5.342,0C-5.342,-1.477%20-4.148,-2.671%20-2.673,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(1,0,0,1,31.4239,88.2618)'%3e%3cpath%20d='M0,-31.486L-7.343,-31.486L-7.343,-24.621L-2.62,-27.134C-2.62,-27.134%20-1.885,-30.033%200,-31.486M-2.667,-21.8L-7.343,-19.427L-7.343,0L0.218,0C0.652,-4.687%201.012,-14.334%200.385,-17.054C-1.978,-18.859%20-2.667,-21.8%20-2.667,-21.8M16.67,-22.279C16.05,-19.824%2014.854,-18.168%2013.521,-16.972C16.087,-15.06%2018.567,-11.369%2018.567,-7.484L18.567,0L23.979,0L23.979,-22.367C22.277,-21.923%2019.538,-21.203%2016.67,-22.279M8.317,-13.886C7.15,-14.439%205.715,-14.459%205.715,-14.459L5.715,0L13.318,0L13.318,-6.519C13.318,-11.601%209.419,-13.365%208.317,-13.886M13.92,-31.486C15.038,-30.308%2015.911,-29.021%2016.417,-27.457C18.939,-25.75%2022.22,-26.601%2023.979,-26.855L23.979,-31.486L13.92,-31.486Z'%20style='fill:rgb(205,20,66);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function Qce(n){return Ve.jsxs(HT,{style:{position:"absolute",left:"20px",bottom:"20px",zIndex:"101",width:"70px"},children:[Ve.jsx("img",{style:{paddingBottom:"20px"},src:Jce}),Ve.jsx("img",{src:Kce})]})}mm.Blocks.Start={init:function(){this.setStyle("hat_blocks"),this.appendDummyInput().appendField("Program starts here"),this.setColour(Rt.procedure_category.colour),this.setTooltip("This is the starting block"),this.setNextStatement(!0,null),this.setHelpUrl(""),this.setDeletable(!1)}};function u4(n){const e=lr(v=>v.addBlock),t=lr(v=>v.blocks),i=lr(v=>v.removeBlock),s=lr(v=>v.getBlock),o=lr(v=>v.updateBlock),l=lr(v=>v.getBlockType),u=lr(v=>v.setBlocklyWorkspace),h=lr(v=>v.loadBlocks),d=lr(v=>v.blocklyWorkspace);lr(v=>v.ip);const m=(v,S)=>{v.push(S);let x=s(S);for(;x.next;)x=x.next,v.push(x)},_=(v,S)=>{zu(S?v?`switch toolbox category from ${S} to ${v}`:`unselect toolbox category: ${S}`:`select toolbox category: ${v}`)};return mm.common.defineBlocks(t),Object.assign(DT.javascriptGenerator.forBlock,TI),he.useEffect(()=>{var v,S,x;if(!document.querySelector(".blocklySvg")){const w=document.getElementById("pageContainer"),A=document.getElementById("blocklyDiv");let k=null;if(k=mm.inject(A,{toolbox:Yce,grid:{spacing:20,length:3,colour:"#ccc",snap:!0},theme:mm.Theme.defineTheme("gpuTheme",{componentStyles:{toolboxBackgroundColour:"#E4E5F1",flyoutBackgroundColour:"#d2d3db"},categoryStyles:{...Rt},blockStyles:{logic_blocks:{colourPrimary:Rt.logic_category.colour},loop_blocks:{colourPrimary:Rt.loop_category.colour},math_blocks:{colourPrimary:Rt.math_category.colour},procedure_blocks:{colourPrimary:Rt.procedure_category.colour},text_blocks:{colourPrimary:Rt.speech_category.colour},colour_blocks:{colourPrimary:Rt.light_category.colour},hat_blocks:{hat:"cap"}}})}),!d&&k.getAllBlocks().filter(L=>L.type==="Start").length===0){const L=k.newBlock("Start");L.setDeletable(!1),L.moveBy(50,50),L.initSvg(),L.render()}if(d){let D={data:[]},L=Object.keys(t),z=L.length;for(let H=0;H<z;H++){let U={id:t[L[H]].id,type:t[L[H]].type};t[L[H]].next&&t[L[H]].next!==""&&(U.nextStatement=t[L[H]].next);let P=(v=t[L[H]])!=null&&v.inputs?Object.keys((S=t[L[H]])==null?void 0:S.inputs):[];for(let K=0;K<P.length;K++)U[P[K]]=(x=t[L[H]].inputs[P[K]])!=null&&x.shadow?t[L[H]].inputs[P[K]].shadow.id:t[L[H]].inputs[P[K]];U.type==="math_number"&&(U.value=t[L[H]].fields.NUM),U.type==="colour_picker"&&(U.value=t[L[H]].fields.COLOUR),U.type==="text"&&(U.value=t[L[H]].fields.TEXT),["BasicSlider","ArmPositionSlider","SpeedSlider","TimeSlider","HeadPitchSlider","HeadRollSlider","HeadYawSlider"].includes(U.type)&&(U.value=t[L[H]].fields.FIELD_slider_value),D.data.push({...U})}h(D,k)}u(k),DT.javascriptGenerator.addReservedWords("code"),new ResizeObserver(D=>{for(let L of D){let z=w,H=0,U=0;do H+=z.offsetLeft,U+=z.offsetTop,z=z.offsetParent;while(z);A.style.left=H+"px",A.style.top=U+"px",A.style.width=w.offsetWidth+"px",A.style.height=w.offsetHeight+"px",mm.svgResize(k)}}).observe(w),k.render(),k.addChangeListener(D=>{if(D.isUiEvent){if(D.type==="toolbox_item_select")_(D.newItem,D.oldItem);else if(D.type==="click"){if(D.targetType==="block"){const L=l(D.blockId);zu(`click on ${L} block`)}D.targetType==="workspace"&&zu("click on workspace")}else if(D.type==="selected"){if(D.oldElementId){const L=l(D.oldElementId);zu(`unselect and un-highlight ${L} `)}if(D.newElementId){const L=l(D.newElementId);zu(`select and highlight ${L} `)}}else if(D.type==="drag"){const L=l(D.blockId);D.isStart?zu(`drag block ${L} start `):zu(`drag block ${L} end `)}return}if(D.type===mm.Events.BLOCK_DELETE){let L=D.blockId,z=[L],H=s(L).inputs;if(H)for(let[K,ee]of Object.entries(H))typeof ee!="string"?z.push(ee.id):m(z,ee);let U=s(D.blockId).next;U&&m(z,U);const P=z.map(K=>l(K));i(z),zu(`block ${L} is deleted, total delete blocks: ${P}`)}if(D.type===mm.Events.BLOCK_CHANGE){const L=l(D.blockId);let z=D.blockId,H=s(z);H.fields[D.name]=D.newValue,o(z,H),zu(`field ${D.name} of ${L} change from ${D.oldValue} to ${D.newValue} `)}if(D.type==="create"){let L={id:D.json.id,type:D.json.type,prev:"",next:"",isShadow:!1};if(D.json.type==="Start"&&(D.json.id,L={id:D.json.id,type:D.json.type,next:""}),D.json.fields&&(L.fields=D.json.fields),D.json.inputs){L.inputs=D.json.inputs;for(let[z,H]of Object.entries(D.json.inputs))if(H.shadow){let U={id:H.shadow.id,type:H.shadow.type,fields:H.shadow.fields,isShadow:!0,initialParent:D.ids[0],initialInput:z};"shadows"in L||(L.shadows={}),L.shadows[z]=H.shadow.id,e(H.shadow.id,U),zu(`create a instance of type ${U.type}`)}}e(D.json.id,L),zu(`create a instance of type ${L.type}`)}if(D.type==="move"){const L=l(D.blockId),z=D.reason;if(z&&(typeof z!="string"&&z[1]==="drag"||z[0]==="drag")&&D.newCoordinate&&zu(`drag ${L} from coordinate: {x: ${D.oldCoordinate.x}, y: ${D.oldCoordinate.y}} to {x: ${D.newCoordinate.x},y: ${D.newCoordinate.y}}`),D.reason&&D.reason.includes("connect")){let H=D.newParentId,U=s(D.newParentId);const P=U.type,K=s(D.blockId);D.newInputName?("inputs"in U||(U.inputs={}),U.inputs[D.newInputName]=D.blockId,o(H,U),zu(`connect ${K.type}  as input of ${P}`)):(U.next=D.blockId,o(H,U),K.prev=H,o(D.blockId,K),zu(`Placed ${K.type} after ${P}`))}if(D.reason&&D.reason.includes("disconnect")){let H=D.oldParentId,U=s(D.oldParentId);const P=U.type,K=s(D.blockId);if(!D.oldInputName)U.next="",o(H,U),K.prev="",o(D.blockId,K),zu(`disconnect ${P} from ${U.type}`);else{if(U.inputs[D.oldInputName]="",U.shadows&&U.shadows[D.oldInputName]){let ee=U.shadows[D.oldInputName];U.inputs[D.oldInputName]=ee}o(H,U),zu(`remove ${P} from input of ${U.type}`)}}}})}},[]),Ve.jsxs("div",{style:{width:"100%",height:"100%"},children:[Ve.jsx(Qce,{}),Ve.jsxs("div",{id:"pageContainer",style:{width:"100%",height:"100%"},children:[Ve.jsx("div",{id:"blocklyDiv",style:{width:"100%",height:"100%",minHeight:"480px",minWidth:"480px"}}),Ve.jsx("xml",{id:"toolbox",style:{display:"none"}})]})]})}function Ll(n,e,t){return e=Lre(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&i.push.apply(i,Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.forEach(function(s){Ll(n,s,t[s])})}return n}class Cs{static isBrowser(){return typeof window<"u"}static isOpera(){return Cs.isBrowser()&&(!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0)}static isFirefox(){return Cs.isBrowser()&&typeof InstallTrigger<"u"}static isSafari(){return Cs.isBrowser()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}static isIE(){return Cs.isBrowser()&&!!document.documentMode}static isEdge(){return Cs.isBrowser()&&!Cs.isIE()&&!!window.StyleMedia}static isChrome(){return Cs.isBrowser()&&!!window.chrome&&!!window.chrome.webstore}static isBlink(){return Cs.isBrowser()&&(Cs.isChrome()||Cs.isOpera())&&!!window.CSS}static getUserAgent(){return typeof navigator>"u"?"":navigator.userAgent}static isAndroid(){return Cs.isBrowser()&&Cs.getUserAgent().match(/Android/i)}static isBlackBerry(){return Cs.isBrowser()&&Cs.getUserAgent().match(/BlackBerry/i)}static isIOS(){return Cs.isBrowser()&&Cs.getUserAgent().match(/iPhone|iPad|iPod/i)}static isOpera(){return Cs.isBrowser()&&Cs.getUserAgent().match(/Opera Mini/i)}static isWindows(){return Cs.isBrowser()&&Cs.isWindowsDesktop()||Cs.isWindowsMobile()}static isWindowsMobile(){return Cs.isBrowser()&&Cs.getUserAgent().match(/IEMobile/i)}static isWindowsDesktop(){return Cs.isBrowser()&&Cs.getUserAgent().match(/WPDesktop/i)}static isMobile(){return Cs.isBrowser()&&(Cs.isWindowsMobile()||Cs.isBlackBerry()||Cs.isAndroid()||Cs.isIOS())}}const vR=n=>Object.keys(n).reduce((e,t)=>t.substr(0,5)==="data-"?q0({},e,{[t]:n[t]}):e,{});class vf extends Sr.Component{static isA(e){return e?e.type===Sr.createElement(vf,null).type:!1}constructor(e){super(e),Ll(this,"ref",Sr.createRef()),Ll(this,"onMouseMove",t=>{if(this.state.active){const i=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:i,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:i}),t.stopPropagation(),t.preventDefault()}}),Ll(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),Ll(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[Cs.isMobile()?"reflex-thin":"",...this.props.className.split(" "),this.state.active?"active":"","reflex-splitter"].join(" ").trim();return Sr.createElement("div",ze({},vR(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}Ll(vf,"propTypes",{children:hi.oneOfType([hi.arrayOf(hi.node),hi.node]),onStartResize:hi.func,onStopResize:hi.func,className:hi.string,propagate:hi.bool,onResize:hi.func,style:hi.object});Ll(vf,"defaultProps",{document:typeof document<"u"?document:null,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});class qce{constructor(){this._events={}}on(e,t){return e.split(" ").forEach(i=>{this._events[i]=this._events[i]||[],this._events[i].push(t)}),this}off(e,t){if(e==null){this._events={};return}return e.split(" ").forEach(i=>{i in this._events&&(t?this._events[i].splice(this._events[i].indexOf(t),1):this._events[i]=[])}),this}emit(e){if(this._events[e]!==void 0)for(var t=this._events[e].slice(),i=0;i<t.length;++i){var s=t[i].apply(this,Array.prototype.slice.call(arguments,1));if(s!==void 0)return s}}}Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(n,e){if(this==null)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if(i===0)return!1;var s=e|0,o=Math.max(s>=0?s:i-Math.abs(s),0);function l(u,h){return u===h||typeof u=="number"&&typeof h=="number"&&isNaN(u)&&isNaN(h)}for(;o<i;){if(l(t[o],n))return!0;o++}return!1}});Math.sign||(Math.sign=function(n){return(n>0)-(n<0)||+n});class GA extends Sr.Component{constructor(e){super(e),Ll(this,"onWindowResize",()=>{this.setState({flexData:this.computeFlexData()})}),Ll(this,"onStartResize",t=>{const i=t.event.changedTouches?t.event.changedTouches[0]:t.event;switch(this.props.orientation){case"horizontal":document.body.classList.add("reflex-row-resize"),this.previousPos=i.clientY;break;case"vertical":default:document.body.classList.add("reflex-col-resize"),this.previousPos=i.clientX;break}this.elements=[this.children[t.index-1],this.children[t.index+1]],this.emitElementsEvent(this.elements,"onStartResize")}),Ll(this,"onResize",t=>{const i=t.event.changedTouches?t.event.changedTouches[0]:t.event,s=this.getOffset(i,t.domElement);switch(this.props.orientation){case"horizontal":this.previousPos=i.clientY;break;case"vertical":default:this.previousPos=i.clientX;break}if(s){const o=this.computeAvailableOffset(t.index,s);o&&(this.elements=this.dispatchOffset(t.index,o),this.adjustFlex(this.elements),this.setState({resizing:!0},()=>{this.emitElementsEvent(this.elements,"onResize")}))}}),Ll(this,"onStopResize",t=>{document.body.classList.remove("reflex-row-resize"),document.body.classList.remove("reflex-col-resize");const i=this.elements?this.elements.map(o=>o.ref):[],s=this.children.filter(o=>!vf.isA(o)&&i.includes(o.ref));this.emitElementsEvent(s,"onStopResize"),this.setState({resizing:!1})}),Ll(this,"onElementSize",t=>new Promise(i=>{try{const s=t.index,o=this.getSize(this.children[s]),l=t.size-o,u=t.direction,h=s+u,d=this.computeAvailableOffset(h,u*l);this.elements=null,d&&(this.elements=this.dispatchOffset(h,d),this.adjustFlex(this.elements)),this.setState(this.state,()=>{this.emitElementsEvent(this.elements,"onResize"),i()})}catch(s){console.log(s)}})),this.events=new qce,this.children=[],this.state={flexData:[]},this.ref=Sr.createRef()}componentDidMount(){const e=this.computeFlexData(),{windowResizeAware:t}=this.props;t&&window.addEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:t,flexData:e}),this.events.on("element.size",this.onElementSize),this.events.on("startResize",this.onStartResize),this.events.on("stopResize",this.onStopResize),this.events.on("resize",this.onResize)}componentWillUnmount(){this.events.off(),window.removeEventListener("resize",this.onWindowResize)}getValidChildren(e=this.props){return this.toArray(e.children).filter(t=>!!t)}componentDidUpdate(e,t){const i=this.getValidChildren(this.props);if(i.length!==this.state.flexData.length||e.orientation!==this.props.orientation||this.flexHasChanged(e)){const s=this.computeFlexData(i,this.props);this.setState({flexData:s})}this.props.windowResizeAware!==this.state.windowResizeAware&&(this.props.windowResizeAware?window.addEventListener("resize",this.onWindowResize):window.removeEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:this.props.windowResizeAware}))}flexHasChanged(e){const t=this.getValidChildren(e).map(s=>s.props.flex||0);return!this.getValidChildren().map(s=>s.props.flex||0).every((s,o)=>s===t[o])}getSize(e){var t,i,s;const o=e==null||(t=e.ref)===null||t===void 0?void 0:t.current;switch(this.props.orientation){case"horizontal":return(i=o==null?void 0:o.offsetHeight)!==null&&i!==void 0?i:0;case"vertical":default:return(s=o==null?void 0:o.offsetWidth)!==null&&s!==void 0?s:0}}getOffset(e,t){const{top:i,bottom:s,left:o,right:l}=t.getBoundingClientRect();switch(this.props.orientation){case"horizontal":{const u=e.clientY-this.previousPos;if(u>0){if(e.clientY>=i)return u}else if(e.clientY<=s)return u;break}case"vertical":default:{const u=e.clientX-this.previousPos;if(u>0){if(e.clientX>o)return u}else if(e.clientX<l)return u}break}return 0}adjustFlex(e){const t=e.reduce((i,s)=>{const o=s.props.index,l=s.props.flex,u=this.state.flexData[o].flex;return i+(l-u)/e.length},0);e.forEach(i=>{this.state.flexData[i.props.index].flex+=t})}computeAvailableOffset(e,t){const i=this.computeAvailableStretch(e,t),s=this.computeAvailableShrink(e,t);return Math.min(i,s)*Math.sign(t)}checkPropagate(e,t){if(t>0){if(e<this.children.length-2){const i=this.children[e+2];return vf.isA(i)&&i.props.propagate}}else if(e>2){const i=this.children[e-2];return vf.isA(i)&&i.props.propagate}return!1}computeAvailableStretch(e,t){var i;const s=t<0?e+1:e-1,o=this.children[s],l=this.getSize(o),h=((i=o==null?void 0:o.props.maxSize)!==null&&i!==void 0?i:0)-l;if(h<Math.abs(t)&&this.checkPropagate(e,-1*t)){const d=Math.sign(t)*(Math.abs(t)-h);return h+this.computeAvailableStretch(t<0?e+2:e-2,d)}return Math.min(h,Math.abs(t))}computeAvailableShrink(e,t){var i;const s=t>0?e+1:e-1,o=this.children[s],l=this.getSize(o),u=Math.max((i=o==null?void 0:o.props.minSize)!==null&&i!==void 0?i:0,0),h=l-u;if(h<Math.abs(t)&&this.checkPropagate(e,t)){const d=Math.sign(t)*(Math.abs(t)-h);return h+this.computeAvailableShrink(t>0?e+2:e-2,d)}return Math.min(h,Math.abs(t))}computePixelFlex(e=this.props.orientation){if(!this.ref.current)return console.warn("Unable to locate ReflexContainer dom node"),0;switch(e){case"horizontal":return this.ref.current.offsetHeight===0?(console.warn("Found ReflexContainer with height=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetHeight;case"vertical":default:return this.ref.current.offsetWidth===0?(console.warn("Found ReflexContainer with width=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetWidth}}addOffset(e,t){const i=this.getSize(e),s=e.props.index,o=Math.max(i+t,0),l=this.state.flexData[s].flex,u=l>0?l*o/i:this.computePixelFlex()*o;this.state.flexData[s].flex=!isFinite(u)||isNaN(u)?0:u}dispatchStretch(e,t){const i=t<0?e+1:e-1;if(i<0||i>this.children.length-1)return[];const s=this.children[i],o=this.getSize(s),u=Math.min(s.props.maxSize,o+Math.abs(t))-o;if(this.addOffset(s,u),u<Math.abs(t)){const h=e-Math.sign(t)*2,d=Math.sign(t)*(Math.abs(t)-u);return[s,...this.dispatchStretch(h,d)]}return[s]}dispatchShrink(e,t){const i=t>0?e+1:e-1;if(i<0||i>this.children.length-1)return[];const s=this.children[i],o=this.getSize(s),u=Math.max(s.props.minSize,o-Math.abs(t))-o;if(this.addOffset(s,u),Math.abs(u)<Math.abs(t)){const h=e+Math.sign(t)*2,d=Math.sign(t)*(Math.abs(t)+u);return[s,...this.dispatchShrink(h,d)]}return[s]}dispatchOffset(e,t){return[...this.dispatchStretch(e,t),...this.dispatchShrink(e,t)]}emitElementsEvent(e,t){this.toArray(e).forEach(i=>{i.props[t]&&i.props[t]({domElement:i.ref.current,component:i})})}computeFlexData(e=this.getValidChildren(),t=this.props){const i=this.computePixelFlex(t.orientation),s=d=>d.reduce((m,_)=>!vf.isA(_)&&_.constrained?m-_.flex:m,1),o=d=>d.reduce((m,_)=>!vf.isA(_)&&!_.constrained?m+1:m,0),l=e.map(d=>{const m=d.props;return{maxFlex:(m.maxSize||Number.MAX_VALUE)*i,sizeFlex:(m.size||Number.MAX_VALUE)*i,minFlex:(m.minSize||1)*i,constrained:m.flex!==void 0,flex:m.flex||0,type:d.type}}),u=(d,m=0)=>{let _=!1;const v=o(d),S=s(d),x=d.map(w=>{if(vf.isA(w))return w;const A=w.constrained?w.flex:S/v,k=Math.min(w.sizeFlex,Math.min(w.maxFlex,Math.max(w.minFlex,A))),O=w.constrained||k!==A;return _=_||O,q0({},w,{flex:k,constrained:O})});return _&&m<this.props.maxRecDepth?u(x,m+1):x};return u(l).map(d=>({flex:vf.isA(d)?0:d.flex,ref:Sr.createRef()}))}toArray(e){return e?Array.isArray(e)?e:[e]:[]}render(){const e=[this.state.resizing?"reflex-resizing":"",...this.props.className.split(" "),this.props.orientation,"reflex-container"].join(" ").trim();return this.children=Sr.Children.map(this.getValidChildren(),(t,i)=>{if(i>this.state.flexData.length-1)return Sr.createElement("div",null);const s=this.state.flexData[i],o=q0({},t.props,{maxSize:t.props.maxSize||Number.MAX_VALUE,orientation:this.props.orientation,minSize:t.props.minSize||1,events:this.events,flex:s.flex,ref:s.ref,index:i});return Sr.cloneElement(t,o)}),Sr.createElement("div",ze({},vR(this.props),{style:this.props.style,className:e,ref:this.ref}),this.children)}}Ll(GA,"propTypes",{windowResizeAware:hi.bool,orientation:hi.oneOf(["horizontal","vertical"]),maxRecDepth:hi.number,className:hi.string,style:hi.object});Ll(GA,"defaultProps",{orientation:"horizontal",windowResizeAware:!1,maxRecDepth:100,className:"",style:{}});class vS extends Sr.Component{static isA(e){return e?e.type===vS:!1}constructor(e){super(e),Ll(this,"ref",Sr.createRef()),Ll(this,"onMouseMove",t=>{if(this.state.active){const i=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:i,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:i}),t.stopPropagation(),t.preventDefault()}}),Ll(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),Ll(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[...this.props.className.split(" "),this.state.active?"active":"","reflex-handle"].join(" ").trim();return Sr.createElement("div",ze({},vR(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}Ll(vS,"propTypes",{children:hi.oneOfType([hi.arrayOf(hi.node),hi.node]),onStartResize:hi.func,onStopResize:hi.func,className:hi.string,propagate:hi.bool,onResize:hi.func,style:hi.object});Ll(vS,"defaultProps",{document:typeof document>"u"?null:document,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});var W8="Expected a function",c4=NaN,Zce="[object Symbol]",ehe=/^\s+|\s+$/g,the=/^[-+]0x[0-9a-f]+$/i,nhe=/^0b[01]+$/i,rhe=/^0o[0-7]+$/i,ihe=parseInt,she=typeof Wu=="object"&&Wu&&Wu.Object===Object&&Wu,ohe=typeof self=="object"&&self&&self.Object===Object&&self,ahe=she||ohe||Function("return this")(),lhe=Object.prototype,uhe=lhe.toString,che=Math.max,hhe=Math.min,R2=function(){return ahe.Date.now()};function dhe(n,e,t){var i,s,o,l,u,h,d=0,m=!1,_=!1,v=!0;if(typeof n!="function")throw new TypeError(W8);e=h4(e)||0,WA(t)&&(m=!!t.leading,_="maxWait"in t,o=_?che(h4(t.maxWait)||0,e):o,v="trailing"in t?!!t.trailing:v);function S(H){var U=i,P=s;return i=s=void 0,d=H,l=n.apply(P,U),l}function x(H){return d=H,u=setTimeout(k,e),m?S(H):l}function w(H){var U=H-h,P=H-d,K=e-U;return _?hhe(K,o-P):K}function A(H){var U=H-h,P=H-d;return h===void 0||U>=e||U<0||_&&P>=o}function k(){var H=R2();if(A(H))return O(H);u=setTimeout(k,w(H))}function O(H){return u=void 0,v&&i?S(H):(i=s=void 0,l)}function D(){u!==void 0&&clearTimeout(u),d=0,i=h=s=u=void 0}function L(){return u===void 0?l:O(R2())}function z(){var H=R2(),U=A(H);if(i=arguments,s=this,h=H,U){if(u===void 0)return x(h);if(_)return u=setTimeout(k,e),S(h)}return u===void 0&&(u=setTimeout(k,e)),l}return z.cancel=D,z.flush=L,z}function phe(n,e,t){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(W8);return WA(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),dhe(n,e,{leading:i,maxWait:e,trailing:s})}function WA(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function fhe(n){return!!n&&typeof n=="object"}function mhe(n){return typeof n=="symbol"||fhe(n)&&uhe.call(n)==Zce}function h4(n){if(typeof n=="number")return n;if(mhe(n))return c4;if(WA(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=WA(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(ehe,"");var t=nhe.test(n);return t||rhe.test(n)?ihe(n.slice(2),t?2:8):the.test(n)?c4:+n}var ghe=phe;const _he=bb(ghe);var V8=function(){if(typeof Map<"u")return Map;function n(e,t){var i=-1;return e.some(function(s,o){return s[0]===t?(i=o,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var i=n(this.__entries__,t),s=this.__entries__[i];return s&&s[1]},e.prototype.set=function(t,i){var s=n(this.__entries__,t);~s?this.__entries__[s][1]=i:this.__entries__.push([t,i])},e.prototype.delete=function(t){var i=this.__entries__,s=n(i,t);~s&&i.splice(s,1)},e.prototype.has=function(t){return!!~n(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,i){i===void 0&&(i=null);for(var s=0,o=this.__entries__;s<o.length;s++){var l=o[s];t.call(i,l[1],l[0])}},e}()}(),fD=typeof window<"u"&&typeof document<"u"&&window.document===document,VA=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),vhe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(VA):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),yhe=2;function bhe(n,e){var t=!1,i=!1,s=0;function o(){t&&(t=!1,n()),i&&u()}function l(){vhe(o)}function u(){var h=Date.now();if(t){if(h-s<yhe)return;i=!0}else t=!0,i=!1,setTimeout(l,e);s=h}return u}var The=20,She=["top","right","bottom","left","width","height","size","weight"],Ehe=typeof MutationObserver<"u",$he=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=bhe(this.refresh.bind(this),The)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var t=this.observers_,i=t.indexOf(e);~i&&t.splice(i,1),!t.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!fD||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Ehe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!fD||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var t=e.propertyName,i=t===void 0?"":t,s=She.some(function(o){return!!~i.indexOf(o)});s&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),j8=function(n,e){for(var t=0,i=Object.keys(e);t<i.length;t++){var s=i[t];Object.defineProperty(n,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return n},GT=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||VA},X8=yR(0,0,0,0);function jA(n){return parseFloat(n)||0}function d4(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(i,s){var o=n["border-"+s+"-width"];return i+jA(o)},0)}function xhe(n){for(var e=["top","right","bottom","left"],t={},i=0,s=e;i<s.length;i++){var o=s[i],l=n["padding-"+o];t[o]=jA(l)}return t}function whe(n){var e=n.getBBox();return yR(0,0,e.width,e.height)}function Che(n){var e=n.clientWidth,t=n.clientHeight;if(!e&&!t)return X8;var i=GT(n).getComputedStyle(n),s=xhe(i),o=s.left+s.right,l=s.top+s.bottom,u=jA(i.width),h=jA(i.height);if(i.boxSizing==="border-box"&&(Math.round(u+o)!==e&&(u-=d4(i,"left","right")+o),Math.round(h+l)!==t&&(h-=d4(i,"top","bottom")+l)),!Ahe(n)){var d=Math.round(u+o)-e,m=Math.round(h+l)-t;Math.abs(d)!==1&&(u-=d),Math.abs(m)!==1&&(h-=m)}return yR(s.left,s.top,u,h)}var Mhe=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof GT(n).SVGGraphicsElement}:function(n){return n instanceof GT(n).SVGElement&&typeof n.getBBox=="function"}}();function Ahe(n){return n===GT(n).document.documentElement}function Ihe(n){return fD?Mhe(n)?whe(n):Che(n):X8}function Rhe(n){var e=n.x,t=n.y,i=n.width,s=n.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return j8(l,{x:e,y:t,width:i,height:s,top:t,right:e+i,bottom:s+t,left:e}),l}function yR(n,e,t,i){return{x:n,y:e,width:t,height:i}}var khe=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=yR(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=Ihe(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),Ohe=function(){function n(e,t){var i=Rhe(t);j8(this,{target:e,contentRect:i})}return n}(),Lhe=function(){function n(e,t,i){if(this.activeObservations_=[],this.observations_=new V8,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof GT(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new khe(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof GT(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(i){return new Ohe(i.target,i.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),Y8=typeof WeakMap<"u"?new WeakMap:new V8,K8=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=$he.getInstance(),i=new Lhe(e,t,this);Y8.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){K8.prototype[n]=function(){var e;return(e=Y8.get(this))[n].apply(e,arguments)}});var Dhe=function(){return typeof VA.ResizeObserver<"u"?VA.ResizeObserver:K8}(),Nhe=["client","offset","scroll","bounds","margin"];function p4(n){var e=[];return Nhe.forEach(function(t){n[t]&&e.push(t)}),e}function f4(n,e){var t={};if(e.indexOf("client")>-1&&(t.client={top:n.clientTop,left:n.clientLeft,width:n.clientWidth,height:n.clientHeight}),e.indexOf("offset")>-1&&(t.offset={top:n.offsetTop,left:n.offsetLeft,width:n.offsetWidth,height:n.offsetHeight}),e.indexOf("scroll")>-1&&(t.scroll={top:n.scrollTop,left:n.scrollLeft,width:n.scrollWidth,height:n.scrollHeight}),e.indexOf("bounds")>-1){var i=n.getBoundingClientRect();t.bounds={top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height}}if(e.indexOf("margin")>-1){var s=getComputedStyle(n);t.margin={top:s?parseInt(s.marginTop):0,right:s?parseInt(s.marginRight):0,bottom:s?parseInt(s.marginBottom):0,left:s?parseInt(s.marginLeft):0}}return t}function Bhe(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||window}function Phe(n){return function(e){var t,i;return i=t=function(s){rP(o,s);function o(){for(var u,h=arguments.length,d=new Array(h),m=0;m<h;m++)d[m]=arguments[m];return u=s.call.apply(s,[this].concat(d))||this,u.state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},u._animationFrameID=null,u._resizeObserver=null,u._node=null,u._window=null,u.measure=function(_){var v=f4(u._node,n||p4(u.props));_&&(v.entry=_[0].contentRect),u._animationFrameID=u._window.requestAnimationFrame(function(){u._resizeObserver!==null&&(u.setState({contentRect:v}),typeof u.props.onResize=="function"&&u.props.onResize(v))})},u._handleRef=function(_){u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.unobserve(u._node),u._node=_,u._window=Bhe(u._node);var v=u.props.innerRef;v&&(typeof v=="function"?v(u._node):v.current=u._node),u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.observe(u._node)},u}var l=o.prototype;return l.componentDidMount=function(){this._resizeObserver=this._window!==null&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new Dhe(this.measure),this._node!==null&&(this._resizeObserver.observe(this._node),typeof this.props.onResize=="function"&&this.props.onResize(f4(this._node,n||p4(this.props))))},l.componentWillUnmount=function(){this._window!==null&&this._window.cancelAnimationFrame(this._animationFrameID),this._resizeObserver!==null&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},l.render=function(){var h=this.props;h.innerRef,h.onResize;var d=tr(h,["innerRef","onResize"]);return he.createElement(e,ze({},d,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},o}(he.Component),t.propTypes={client:hi.bool,offset:hi.bool,scroll:hi.bool,bounds:hi.bool,margin:hi.bool,innerRef:hi.oneOfType([hi.object,hi.func]),onResize:hi.func},i}}var mP=Phe()(function(n){var e=n.measure,t=n.measureRef,i=n.contentRect,s=n.children;return s({measure:e,measureRef:t,contentRect:i})});mP.displayName="Measure";mP.propTypes.children=hi.func;const mD=n=>n?Array.isArray(n)?n:[n]:[];class Fhe extends Sr.Component{constructor(e){super(e),Ll(this,"onResize",t=>{const{resizeHeight:i,resizeWidth:s}=this.props,{height:o,width:l}=t.bounds;this.setDimensions(q0({},i&&{height:o},s&&{width:l}))}),this.setDimensions=_he(t=>{this.setState(t)},this.props.propagateDimensionsRate/1e3),this.state={height:"100%",width:"100%"}}renderChildren(){const{propagateDimensions:e}=this.props,t=mD(this.props.children).filter(i=>!!i);return Sr.Children.map(t,i=>this.props.withHandle||vS.isA(i)?Sr.cloneElement(i,q0({dimensions:e&&this.state},i.props,{index:this.props.index-1,events:this.props.events})):e?Sr.cloneElement(i,q0({},i.props,{dimensions:this.state})):i)}render(){return Sr.createElement(mP,{bounds:!0,onResize:this.onResize},({measureRef:e})=>Sr.createElement("div",{ref:e,className:"reflex-size-aware"},Sr.createElement("div",{style:this.state},this.renderChildren())))}}class gP extends Sr.Component{constructor(e){super(e),this.state={size:e.size}}static getDerivedStateFromProps(e,t){return e.size!==t.size?q0({},t,{size:e.size}):null}async componentDidUpdate(e,t,i){if(t.size!==this.state.size){const s=mD(this.props.direction);for(let o of s)await this.props.events.emit("element.size",{index:this.props.index,size:this.props.size,direction:o})}}renderChildren(){const e=mD(this.props.children).filter(t=>!!t);return Sr.Children.map(e,t=>this.props.withHandle||vS.isA(t)?Sr.cloneElement(t,q0({},t.props,{index:this.props.index-1,events:this.props.events})):t)}render(){const e=[...this.props.className.split(" "),this.props.orientation,"reflex-element"].join(" ").trim(),t=q0({},this.props.style,{flexGrow:this.props.flex,flexShrink:1,flexBasis:"0%"});return Sr.createElement("div",ze({},vR(this.props),{ref:this.props.innerRef,className:e,style:t}),this.props.propagateDimensions?Sr.createElement(Fhe,this.props):this.renderChildren())}}Ll(gP,"propTypes",{propagateDimensions:hi.bool,resizeHeight:hi.bool,resizeWidth:hi.bool,className:hi.string,size:hi.number});Ll(gP,"defaultProps",{propagateDimensionsRate:100,propagateDimensions:!1,resizeHeight:!0,resizeWidth:!0,direction:[1],className:""});const SC=Sr.forwardRef((n,e)=>Sr.createElement(gP,ze({innerRef:e},n))),J8="/gpu-programming/assets/BASE_FRONT_GRILL_1-b5goAhwv.glb";var Q8={exports:{}},xb={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */xb.ConcurrentRoot=1;xb.ContinuousEventPriority=4;xb.DefaultEventPriority=16;xb.DiscreteEventPriority=1;xb.IdleEventPriority=536870912;xb.LegacyRoot=0;Q8.exports=xb;var o$=Q8.exports,q8={exports:{}},k2={exports:{}},O2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m4;function Uhe(){return m4||(m4=1,function(n){function e(j,Z){var ne=j.length;j.push(Z);e:for(;0<ne;){var ae=ne-1>>>1,_e=j[ae];if(0<s(_e,Z))j[ae]=Z,j[ne]=_e,ne=ae;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var Z=j[0],ne=j.pop();if(ne!==Z){j[0]=ne;e:for(var ae=0,_e=j.length,Le=_e>>>1;ae<Le;){var we=2*(ae+1)-1,Xe=j[we],Re=we+1,qe=j[Re];if(0>s(Xe,ne))Re<_e&&0>s(qe,Xe)?(j[ae]=qe,j[Re]=ne,ae=Re):(j[ae]=Xe,j[we]=ne,ae=we);else if(Re<_e&&0>s(qe,ne))j[ae]=qe,j[Re]=ne,ae=Re;else break e}}return Z}function s(j,Z){var ne=j.sortIndex-Z.sortIndex;return ne!==0?ne:j.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],d=[],m=1,_=null,v=3,S=!1,x=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(j){for(var Z=t(d);Z!==null;){if(Z.callback===null)i(d);else if(Z.startTime<=j)i(d),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(d)}}function L(j){if(w=!1,D(j),!x)if(t(h)!==null)x=!0,me(z);else{var Z=t(d);Z!==null&&Ae(L,Z.startTime-j)}}function z(j,Z){x=!1,w&&(w=!1,k(P),P=-1),S=!0;var ne=v;try{for(D(Z),_=t(h);_!==null&&(!(_.expirationTime>Z)||j&&!re());){var ae=_.callback;if(typeof ae=="function"){_.callback=null,v=_.priorityLevel;var _e=ae(_.expirationTime<=Z);Z=n.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),D(Z)}else i(h);_=t(h)}if(_!==null)var Le=!0;else{var we=t(d);we!==null&&Ae(L,we.startTime-Z),Le=!1}return Le}finally{_=null,v=ne,S=!1}}var H=!1,U=null,P=-1,K=5,ee=-1;function re(){return!(n.unstable_now()-ee<K)}function ie(){if(U!==null){var j=n.unstable_now();ee=j;var Z=!0;try{Z=U(!0,j)}finally{Z?de():(H=!1,U=null)}}else H=!1}var de;if(typeof O=="function")de=function(){O(ie)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ce=oe.port2;oe.port1.onmessage=ie,de=function(){ce.postMessage(null)}}else de=function(){A(ie,0)};function me(j){U=j,H||(H=!0,de())}function Ae(j,Z){P=A(function(){j(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){x||S||(x=!0,me(z))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var ne=v;v=Z;try{return j()}finally{v=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,Z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ne=v;v=j;try{return Z()}finally{v=ne}},n.unstable_scheduleCallback=function(j,Z,ne){var ae=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ae+ne:ae):ne=ae,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ne+_e,j={id:m++,callback:Z,priorityLevel:j,startTime:ne,expirationTime:_e,sortIndex:-1},ne>ae?(j.sortIndex=ne,e(d,j),t(h)===null&&j===t(d)&&(w?(k(P),P=-1):w=!0,Ae(L,ne-ae))):(j.sortIndex=_e,e(h,j),x||S||(x=!0,me(z))),j},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(j){var Z=v;return function(){var ne=v;v=Z;try{return j.apply(this,arguments)}finally{v=ne}}}}(O2)),O2}var g4;function zhe(){return g4||(g4=1,k2.exports=Uhe()),k2.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hhe=function(e){var t={},i=he,s=zhe(),o=Object.assign;function l(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,$=1;$<arguments.length;$++)f+="&args[]="+encodeURIComponent(arguments[$]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h=Symbol.for("react.element"),d=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),x=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),z=Symbol.iterator;function H(c){return c===null||typeof c!="object"?null:(c=z&&c[z]||c["@@iterator"],typeof c=="function"?c:null)}function U(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case m:return"Fragment";case d:return"Portal";case v:return"Profiler";case _:return"StrictMode";case A:return"Suspense";case k:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case x:return(c.displayName||"Context")+".Consumer";case S:return(c._context.displayName||"Context")+".Provider";case w:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case O:return f=c.displayName||null,f!==null?f:U(c.type)||"Memo";case D:f=c._payload,c=c._init;try{return U(c(f))}catch{}}return null}function P(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(f);case 8:return f===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function K(c){var f=c,$=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&($=f.return),c=f.return;while(c)}return f.tag===3?$:null}function ee(c){if(K(c)!==c)throw Error(l(188))}function re(c){var f=c.alternate;if(!f){if(f=K(c),f===null)throw Error(l(188));return f!==c?null:c}for(var $=c,M=f;;){var N=$.return;if(N===null)break;var G=N.alternate;if(G===null){if(M=N.return,M!==null){$=M;continue}break}if(N.child===G.child){for(G=N.child;G;){if(G===$)return ee(N),c;if(G===M)return ee(N),f;G=G.sibling}throw Error(l(188))}if($.return!==M.return)$=N,M=G;else{for(var se=!1,xe=N.child;xe;){if(xe===$){se=!0,$=N,M=G;break}if(xe===M){se=!0,M=N,$=G;break}xe=xe.sibling}if(!se){for(xe=G.child;xe;){if(xe===$){se=!0,$=G,M=N;break}if(xe===M){se=!0,M=G,$=N;break}xe=xe.sibling}if(!se)throw Error(l(189))}}if($.alternate!==M)throw Error(l(190))}if($.tag!==3)throw Error(l(188));return $.stateNode.current===$?c:f}function ie(c){return c=re(c),c!==null?de(c):null}function de(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=de(c);if(f!==null)return f;c=c.sibling}return null}function oe(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var f=oe(c);if(f!==null)return f}c=c.sibling}return null}var ce=Array.isArray,me=e.getPublicInstance,Ae=e.getRootHostContext,j=e.getChildHostContext,Z=e.prepareForCommit,ne=e.resetAfterCommit,ae=e.createInstance,_e=e.appendInitialChild,Le=e.finalizeInitialChildren,we=e.prepareUpdate,Xe=e.shouldSetTextContent,Re=e.createTextInstance,qe=e.scheduleTimeout,Je=e.cancelTimeout,ht=e.noTimeout,it=e.isPrimaryRenderer,Oe=e.supportsMutation,Ee=e.supportsPersistence,Fe=e.supportsHydration,rt=e.getInstanceFromNode,nt=e.preparePortalMount,dt=e.getCurrentEventPriority,It=e.detachDeletedInstance,mt=e.supportsMicrotasks,wt=e.scheduleMicrotask,$t=e.supportsTestSelectors,pt=e.findFiberRoot,Te=e.getBoundingRect,te=e.getTextContent,ke=e.isHiddenSubtree,ot=e.matchAccessibilityRole,ft=e.setFocusIfFocusable,xt=e.setupIntersectionObserver,at=e.appendChild,Ge=e.appendChildToContainer,Ce=e.commitTextUpdate,X=e.commitMount,Q=e.commitUpdate,le=e.insertBefore,$e=e.insertInContainerBefore,We=e.removeChild,Ft=e.removeChildFromContainer,Be=e.resetTextContent,Ut=e.hideInstance,ut=e.hideTextInstance,Ht=e.unhideInstance,zt=e.unhideTextInstance,En=e.clearContainer,Pr=e.cloneInstance,Er=e.createContainerChildSet,Kr=e.appendChildToContainerChildSet,or=e.finalizeContainerChildren,Wn=e.replaceContainerChildren,q=e.cloneHiddenInstance,ge=e.cloneHiddenTextInstance,Ne=e.canHydrateInstance,tt=e.canHydrateTextInstance,kt=e.canHydrateSuspenseInstance,qt=e.isSuspenseInstancePending,_n=e.isSuspenseInstanceFallback,Ie=e.registerSuspenseInstanceRetry,lt=e.getNextHydratableSibling,Et=e.getFirstHydratableChild,gt=e.getFirstHydratableChildWithinContainer,Nt=e.getFirstHydratableChildWithinSuspenseInstance,yn=e.hydrateInstance,Pn=e.hydrateTextInstance,ir=e.hydrateSuspenseInstance,yr=e.getNextHydratableInstanceAfterSuspenseInstance,ni=e.commitHydratedContainer,$r=e.commitHydratedSuspenseInstance,Ir=e.clearSuspenseBoundary,ji=e.clearSuspenseBoundaryFromContainer,Yo=e.shouldDeleteUnhydratedTailInstances,Oo=e.didNotMatchHydratedContainerTextInstance,cl=e.didNotMatchHydratedTextInstance,Kt;function dr(c){if(Kt===void 0)try{throw Error()}catch($){var f=$.stack.trim().match(/\n( *(at )?)/);Kt=f&&f[1]||""}return`
`+Kt+c}var ga=!1;function Ko(c,f){if(!c||ga)return"";ga=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(vt){var M=vt}Reflect.construct(c,[],f)}else{try{f.call()}catch(vt){M=vt}c.call(f.prototype)}else{try{throw Error()}catch(vt){M=vt}c()}}catch(vt){if(vt&&M&&typeof vt.stack=="string"){for(var N=vt.stack.split(`
`),G=M.stack.split(`
`),se=N.length-1,xe=G.length-1;1<=se&&0<=xe&&N[se]!==G[xe];)xe--;for(;1<=se&&0<=xe;se--,xe--)if(N[se]!==G[xe]){if(se!==1||xe!==1)do if(se--,xe--,0>xe||N[se]!==G[xe]){var je=`
`+N[se].replace(" at new "," at ");return c.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",c.displayName)),je}while(1<=se&&0<=xe);break}}}finally{ga=!1,Error.prepareStackTrace=$}return(c=c?c.displayName||c.name:"")?dr(c):""}var ms=Object.prototype.hasOwnProperty,gs=[],di=-1;function pr(c){return{current:c}}function fn(c){0>di||(c.current=gs[di],gs[di]=null,di--)}function ur(c,f){di++,gs[di]=c.current,c.current=f}var wr={},nr=pr(wr),pi=pr(!1),Zi=wr;function Xr(c,f){var $=c.type.contextTypes;if(!$)return wr;var M=c.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===f)return M.__reactInternalMemoizedMaskedChildContext;var N={},G;for(G in $)N[G]=f[G];return M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=N),N}function Fi(c){return c=c.childContextTypes,c!=null}function Ua(){fn(pi),fn(nr)}function hl(c,f,$){if(nr.current!==wr)throw Error(l(168));ur(nr,f),ur(pi,$)}function vc(c,f,$){var M=c.stateNode;if(f=f.childContextTypes,typeof M.getChildContext!="function")return $;M=M.getChildContext();for(var N in M)if(!(N in f))throw Error(l(108,P(c)||"Unknown",N));return o({},$,M)}function Yu(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||wr,Zi=nr.current,ur(nr,c),ur(pi,pi.current),!0}function Os(c,f,$){var M=c.stateNode;if(!M)throw Error(l(169));$?(c=vc(c,f,Zi),M.__reactInternalMemoizedMergedChildContext=c,fn(pi),fn(nr),ur(nr,c)):fn(pi),ur(pi,$)}var Lo=Math.clz32?Math.clz32:_h,hu=Math.log,Ul=Math.LN2;function _h(c){return c>>>=0,c===0?32:31-(hu(c)/Ul|0)|0}var Jo=64,rr=4194304;function Ui(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Vc(c,f){var $=c.pendingLanes;if($===0)return 0;var M=0,N=c.suspendedLanes,G=c.pingedLanes,se=$&268435455;if(se!==0){var xe=se&~N;xe!==0?M=Ui(xe):(G&=se,G!==0&&(M=Ui(G)))}else se=$&~N,se!==0?M=Ui(se):G!==0&&(M=Ui(G));if(M===0)return 0;if(f!==0&&f!==M&&!(f&N)&&(N=M&-M,G=f&-f,N>=G||N===16&&(G&4194240)!==0))return f;if(M&4&&(M|=$&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=M;0<f;)$=31-Lo(f),N=1<<$,M|=c[$],f&=~N;return M}function vh(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yc(c,f){for(var $=c.suspendedLanes,M=c.pingedLanes,N=c.expirationTimes,G=c.pendingLanes;0<G;){var se=31-Lo(G),xe=1<<se,je=N[se];je===-1?(!(xe&$)||xe&M)&&(N[se]=vh(xe,f)):je<=f&&(c.expiredLanes|=xe),G&=~xe}}function dl(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function du(c){for(var f=[],$=0;31>$;$++)f.push(c);return f}function pl(c,f,$){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-Lo(f),c[f]=$}function fl(c,f){var $=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var M=c.eventTimes;for(c=c.expirationTimes;0<$;){var N=31-Lo($),G=1<<N;f[N]=0,M[N]=-1,c[N]=-1,$&=~G}}function qn(c,f){var $=c.entangledLanes|=f;for(c=c.entanglements;$;){var M=31-Lo($),N=1<<M;N&f|c[M]&f&&(c[M]|=f),$&=~N}}var Zn=0;function ml(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var za=s.unstable_scheduleCallback,_a=s.unstable_cancelCallback,zl=s.unstable_shouldYield,$i=s.unstable_requestPaint,zi=s.unstable_now,gl=s.unstable_ImmediatePriority,kd=s.unstable_UserBlockingPriority,Ls=s.unstable_NormalPriority,pu=s.unstable_IdlePriority,Do=null,Hl=null;function Yr(c){if(Hl&&typeof Hl.onCommitFiberRoot=="function")try{Hl.onCommitFiberRoot(Do,c,void 0,(c.current.flags&128)===128)}catch{}}function fr(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Xi=typeof Object.is=="function"?Object.is:fr,Ds=null,fu=!1,Gl=!1;function jc(c){Ds===null?Ds=[c]:Ds.push(c)}function Qo(c){fu=!0,jc(c)}function qo(){if(!Gl&&Ds!==null){Gl=!0;var c=0,f=Zn;try{var $=Ds;for(Zn=1;c<$.length;c++){var M=$[c];do M=M(!0);while(M!==null)}Ds=null,fu=!1}catch(N){throw Ds!==null&&(Ds=Ds.slice(c+1)),za(gl,qo),N}finally{Zn=f,Gl=!1}}return null}var mu=u.ReactCurrentBatchConfig;function Jr(c,f){if(Xi(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var $=Object.keys(c),M=Object.keys(f);if($.length!==M.length)return!1;for(M=0;M<$.length;M++){var N=$[M];if(!ms.call(f,N)||!Xi(c[N],f[N]))return!1}return!0}function _s(c){switch(c.tag){case 5:return dr(c.type);case 16:return dr("Lazy");case 13:return dr("Suspense");case 19:return dr("SuspenseList");case 0:case 2:case 15:return c=Ko(c.type,!1),c;case 11:return c=Ko(c.type.render,!1),c;case 1:return c=Ko(c.type,!0),c;default:return""}}function Ri(c,f){if(c&&c.defaultProps){f=o({},f),c=c.defaultProps;for(var $ in c)f[$]===void 0&&(f[$]=c[$]);return f}return f}var ri=pr(null),va=null,Hi=null,gu=null;function oo(){gu=Hi=va=null}function _u(c,f,$){it?(ur(ri,f._currentValue),f._currentValue=$):(ur(ri,f._currentValue2),f._currentValue2=$)}function Ha(c){var f=ri.current;fn(ri),it?c._currentValue=f:c._currentValue2=f}function fi(c,f,$){for(;c!==null;){var M=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,M!==null&&(M.childLanes|=f)):M!==null&&(M.childLanes&f)!==f&&(M.childLanes|=f),c===$)break;c=c.return}}function ii(c,f){va=c,gu=Hi=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(Zr=!0),c.firstContext=null)}function zn(c){var f=it?c._currentValue:c._currentValue2;if(gu!==c)if(c={context:c,memoizedValue:f,next:null},Hi===null){if(va===null)throw Error(l(308));Hi=c,va.dependencies={lanes:0,firstContext:c}}else Hi=Hi.next=c;return f}var Qr=null,xi=!1;function Yh(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vu(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function vs(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function _l(c,f){var $=c.updateQueue;$!==null&&($=$.shared,br!==null&&c.mode&1&&!(Ln&2)?(c=$.interleaved,c===null?(f.next=f,Qr===null?Qr=[$]:Qr.push($)):(f.next=c.next,c.next=f),$.interleaved=f):(c=$.pending,c===null?f.next=f:(f.next=c.next,c.next=f),$.pending=f))}function Kh(c,f,$){if(f=f.updateQueue,f!==null&&(f=f.shared,($&4194240)!==0)){var M=f.lanes;M&=c.pendingLanes,$|=M,f.lanes=$,qn(c,$)}}function mi(c,f){var $=c.updateQueue,M=c.alternate;if(M!==null&&(M=M.updateQueue,$===M)){var N=null,G=null;if($=$.firstBaseUpdate,$!==null){do{var se={eventTime:$.eventTime,lane:$.lane,tag:$.tag,payload:$.payload,callback:$.callback,next:null};G===null?N=G=se:G=G.next=se,$=$.next}while($!==null);G===null?N=G=f:G=G.next=f}else N=G=f;$={baseState:M.baseState,firstBaseUpdate:N,lastBaseUpdate:G,shared:M.shared,effects:M.effects},c.updateQueue=$;return}c=$.lastBaseUpdate,c===null?$.firstBaseUpdate=f:c.next=f,$.lastBaseUpdate=f}function yu(c,f,$,M){var N=c.updateQueue;xi=!1;var G=N.firstBaseUpdate,se=N.lastBaseUpdate,xe=N.shared.pending;if(xe!==null){N.shared.pending=null;var je=xe,vt=je.next;je.next=null,se===null?G=vt:se.next=vt,se=je;var Gt=c.alternate;Gt!==null&&(Gt=Gt.updateQueue,xe=Gt.lastBaseUpdate,xe!==se&&(xe===null?Gt.firstBaseUpdate=vt:xe.next=vt,Gt.lastBaseUpdate=je))}if(G!==null){var en=N.baseState;se=0,Gt=vt=je=null,xe=G;do{var dn=xe.lane,ln=xe.eventTime;if((M&dn)===dn){Gt!==null&&(Gt=Gt.next={eventTime:ln,lane:0,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null});e:{var rn=c,Tr=xe;switch(dn=f,ln=$,Tr.tag){case 1:if(rn=Tr.payload,typeof rn=="function"){en=rn.call(ln,en,dn);break e}en=rn;break e;case 3:rn.flags=rn.flags&-65537|128;case 0:if(rn=Tr.payload,dn=typeof rn=="function"?rn.call(ln,en,dn):rn,dn==null)break e;en=o({},en,dn);break e;case 2:xi=!0}}xe.callback!==null&&xe.lane!==0&&(c.flags|=64,dn=N.effects,dn===null?N.effects=[xe]:dn.push(xe))}else ln={eventTime:ln,lane:dn,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},Gt===null?(vt=Gt=ln,je=en):Gt=Gt.next=ln,se|=dn;if(xe=xe.next,xe===null){if(xe=N.shared.pending,xe===null)break;dn=xe,xe=dn.next,dn.next=null,N.lastBaseUpdate=dn,N.shared.pending=null}}while(!0);if(Gt===null&&(je=en),N.baseState=je,N.firstBaseUpdate=vt,N.lastBaseUpdate=Gt,f=N.shared.interleaved,f!==null){N=f;do se|=N.lane,N=N.next;while(N!==f)}else G===null&&(N.shared.lanes=0);Au|=se,c.lanes=se,c.memoizedState=en}}function pp(c,f,$){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var M=c[f],N=M.callback;if(N!==null){if(M.callback=null,M=$,typeof N!="function")throw Error(l(191,N));N.call(M)}}}var fp=new i.Component().refs;function yh(c,f,$,M){f=c.memoizedState,$=$(M,f),$=$==null?f:o({},f,$),c.memoizedState=$,c.lanes===0&&(c.updateQueue.baseState=$)}var mp={isMounted:function(c){return(c=c._reactInternals)?K(c)===c:!1},enqueueSetState:function(c,f,$){c=c._reactInternals;var M=Ki(),N=Es(c),G=vs(M,N);G.payload=f,$!=null&&(G.callback=$),_l(c,G),f=ua(c,N,M),f!==null&&Kh(f,c,N)},enqueueReplaceState:function(c,f,$){c=c._reactInternals;var M=Ki(),N=Es(c),G=vs(M,N);G.tag=1,G.payload=f,$!=null&&(G.callback=$),_l(c,G),f=ua(c,N,M),f!==null&&Kh(f,c,N)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var $=Ki(),M=Es(c),N=vs($,M);N.tag=2,f!=null&&(N.callback=f),_l(c,N),f=ua(c,M,$),f!==null&&Kh(f,c,M)}};function Vp(c,f,$,M,N,G,se){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(M,G,se):f.prototype&&f.prototype.isPureReactComponent?!Jr($,M)||!Jr(N,G):!0}function Ff(c,f,$){var M=!1,N=wr,G=f.contextType;return typeof G=="object"&&G!==null?G=zn(G):(N=Fi(f)?Zi:nr.current,M=f.contextTypes,G=(M=M!=null)?Xr(c,N):wr),f=new f($,G),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=mp,c.stateNode=f,f._reactInternals=c,M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=N,c.__reactInternalMemoizedMaskedChildContext=G),f}function gp(c,f,$,M){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps($,M),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps($,M),f.state!==c&&mp.enqueueReplaceState(f,f.state,null)}function Ku(c,f,$,M){var N=c.stateNode;N.props=$,N.state=c.memoizedState,N.refs=fp,Yh(c);var G=f.contextType;typeof G=="object"&&G!==null?N.context=zn(G):(G=Fi(f)?Zi:nr.current,N.context=Xr(c,G)),N.state=c.memoizedState,G=f.getDerivedStateFromProps,typeof G=="function"&&(yh(c,f,G,$),N.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(f=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),f!==N.state&&mp.enqueueReplaceState(N,N.state,null),yu(c,$,N,M),N.state=c.memoizedState),typeof N.componentDidMount=="function"&&(c.flags|=4194308)}var ao=[],bu=0,bh=null,ya=0,Vr=[],cr=0,Xs=null,Zo=1,No="";function Tu(c,f){ao[bu++]=ya,ao[bu++]=bh,bh=c,ya=f}function vl(c,f,$){Vr[cr++]=Zo,Vr[cr++]=No,Vr[cr++]=Xs,Xs=c;var M=Zo;c=No;var N=32-Lo(M)-1;M&=~(1<<N),$+=1;var G=32-Lo(f)+N;if(30<G){var se=N-N%5;G=(M&(1<<se)-1).toString(32),M>>=se,N-=se,Zo=1<<32-Lo(f)+N|$<<N|M,No=G+c}else Zo=1<<G|$<<N|M,No=c}function Jh(c){c.return!==null&&(Tu(c,1),vl(c,1,0))}function wi(c){for(;c===bh;)bh=ao[--bu],ao[bu]=null,ya=ao[--bu],ao[bu]=null;for(;c===Xs;)Xs=Vr[--cr],Vr[cr]=null,No=Vr[--cr],Vr[cr]=null,Zo=Vr[--cr],Vr[cr]=null}var gi=null,hr=null,Ci=!1,ea=!1,Wl=null;function _p(c,f){var $=zs(5,null,null,0);$.elementType="DELETED",$.stateNode=f,$.return=c,f=c.deletions,f===null?(c.deletions=[$],c.flags|=16):f.push($)}function vp(c,f){switch(c.tag){case 5:return f=Ne(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,gi=c,hr=Et(f),!0):!1;case 6:return f=tt(f,c.pendingProps),f!==null?(c.stateNode=f,gi=c,hr=null,!0):!1;case 13:if(f=kt(f),f!==null){var $=Xs!==null?{id:Zo,overflow:No}:null;return c.memoizedState={dehydrated:f,treeContext:$,retryLane:1073741824},$=zs(18,null,null,0),$.stateNode=f,$.return=c,c.child=$,gi=c,hr=null,!0}return!1;default:return!1}}function Qh(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Su(c){if(Ci){var f=hr;if(f){var $=f;if(!vp(c,f)){if(Qh(c))throw Error(l(418));f=lt($);var M=gi;f&&vp(c,f)?_p(M,$):(c.flags=c.flags&-4097|2,Ci=!1,gi=c)}}else{if(Qh(c))throw Error(l(418));c.flags=c.flags&-4097|2,Ci=!1,gi=c}}}function Ju(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;gi=c}function bc(c){if(!Fe||c!==gi)return!1;if(!Ci)return Ju(c),Ci=!0,!1;if(c.tag!==3&&(c.tag!==5||Yo(c.type)&&!Xe(c.type,c.memoizedProps))){var f=hr;if(f){if(Qh(c)){for(c=hr;c;)c=lt(c);throw Error(l(418))}for(;f;)_p(c,f),f=lt(f)}}if(Ju(c),c.tag===13){if(!Fe)throw Error(l(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));hr=yr(c)}else hr=gi?lt(c.stateNode):null;return!0}function Th(){Fe&&(hr=gi=null,ea=Ci=!1)}function Tc(c){Wl===null?Wl=[c]:Wl.push(c)}function Vl(c,f,$){if(c=$.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if($._owner){if($=$._owner,$){if($.tag!==1)throw Error(l(309));var M=$.stateNode}if(!M)throw Error(l(147,c));var N=M,G=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===G?f.ref:(f=function(se){var xe=N.refs;xe===fp&&(xe=N.refs={}),se===null?delete xe[G]:xe[G]=se},f._stringRef=G,f)}if(typeof c!="string")throw Error(l(284));if(!$._owner)throw Error(l(290,c))}return c}function ta(c,f){throw c=Object.prototype.toString.call(f),Error(l(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function Qu(c){var f=c._init;return f(c._payload)}function Sh(c){function f(Se,Me){if(c){var Ke=Se.deletions;Ke===null?(Se.deletions=[Me],Se.flags|=16):Ke.push(Me)}}function $(Se,Me){if(!c)return null;for(;Me!==null;)f(Se,Me),Me=Me.sibling;return null}function M(Se,Me){for(Se=new Map;Me!==null;)Me.key!==null?Se.set(Me.key,Me):Se.set(Me.index,Me),Me=Me.sibling;return Se}function N(Se,Me){return Se=no(Se,Me),Se.index=0,Se.sibling=null,Se}function G(Se,Me,Ke){return Se.index=Ke,c?(Ke=Se.alternate,Ke!==null?(Ke=Ke.index,Ke<Me?(Se.flags|=2,Me):Ke):(Se.flags|=2,Me)):(Se.flags|=1048576,Me)}function se(Se){return c&&Se.alternate===null&&(Se.flags|=2),Se}function xe(Se,Me,Ke,Lt){return Me===null||Me.tag!==6?(Me=is(Ke,Se.mode,Lt),Me.return=Se,Me):(Me=N(Me,Ke),Me.return=Se,Me)}function je(Se,Me,Ke,Lt){var Jt=Ke.type;return Jt===m?Gt(Se,Me,Ke.props.children,Lt,Ke.key):Me!==null&&(Me.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===D&&Qu(Jt)===Me.type)?(Lt=N(Me,Ke.props),Lt.ref=Vl(Se,Me,Ke),Lt.return=Se,Lt):(Lt=qa(Ke.type,Ke.key,Ke.props,null,Se.mode,Lt),Lt.ref=Vl(Se,Me,Ke),Lt.return=Se,Lt)}function vt(Se,Me,Ke,Lt){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==Ke.containerInfo||Me.stateNode.implementation!==Ke.implementation?(Me=Co(Ke,Se.mode,Lt),Me.return=Se,Me):(Me=N(Me,Ke.children||[]),Me.return=Se,Me)}function Gt(Se,Me,Ke,Lt,Jt){return Me===null||Me.tag!==7?(Me=Aa(Ke,Se.mode,Lt,Jt),Me.return=Se,Me):(Me=N(Me,Ke),Me.return=Se,Me)}function en(Se,Me,Ke){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Me=is(""+Me,Se.mode,Ke),Me.return=Se,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case h:return Ke=qa(Me.type,Me.key,Me.props,null,Se.mode,Ke),Ke.ref=Vl(Se,null,Me),Ke.return=Se,Ke;case d:return Me=Co(Me,Se.mode,Ke),Me.return=Se,Me;case D:var Lt=Me._init;return en(Se,Lt(Me._payload),Ke)}if(ce(Me)||H(Me))return Me=Aa(Me,Se.mode,Ke,null),Me.return=Se,Me;ta(Se,Me)}return null}function dn(Se,Me,Ke,Lt){var Jt=Me!==null?Me.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Jt!==null?null:xe(Se,Me,""+Ke,Lt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case h:return Ke.key===Jt?je(Se,Me,Ke,Lt):null;case d:return Ke.key===Jt?vt(Se,Me,Ke,Lt):null;case D:return Jt=Ke._init,dn(Se,Me,Jt(Ke._payload),Lt)}if(ce(Ke)||H(Ke))return Jt!==null?null:Gt(Se,Me,Ke,Lt,null);ta(Se,Ke)}return null}function ln(Se,Me,Ke,Lt,Jt){if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number")return Se=Se.get(Ke)||null,xe(Me,Se,""+Lt,Jt);if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case h:return Se=Se.get(Lt.key===null?Ke:Lt.key)||null,je(Me,Se,Lt,Jt);case d:return Se=Se.get(Lt.key===null?Ke:Lt.key)||null,vt(Me,Se,Lt,Jt);case D:var un=Lt._init;return ln(Se,Me,Ke,un(Lt._payload),Jt)}if(ce(Lt)||H(Lt))return Se=Se.get(Ke)||null,Gt(Me,Se,Lt,Jt,null);ta(Me,Lt)}return null}function rn(Se,Me,Ke,Lt){for(var Jt=null,un=null,mn=Me,On=Me=0,Xn=null;mn!==null&&On<Ke.length;On++){mn.index>On?(Xn=mn,mn=null):Xn=mn.sibling;var mr=dn(Se,mn,Ke[On],Lt);if(mr===null){mn===null&&(mn=Xn);break}c&&mn&&mr.alternate===null&&f(Se,mn),Me=G(mr,Me,On),un===null?Jt=mr:un.sibling=mr,un=mr,mn=Xn}if(On===Ke.length)return $(Se,mn),Ci&&Tu(Se,On),Jt;if(mn===null){for(;On<Ke.length;On++)mn=en(Se,Ke[On],Lt),mn!==null&&(Me=G(mn,Me,On),un===null?Jt=mn:un.sibling=mn,un=mn);return Ci&&Tu(Se,On),Jt}for(mn=M(Se,mn);On<Ke.length;On++)Xn=ln(mn,Se,On,Ke[On],Lt),Xn!==null&&(c&&Xn.alternate!==null&&mn.delete(Xn.key===null?On:Xn.key),Me=G(Xn,Me,On),un===null?Jt=Xn:un.sibling=Xn,un=Xn);return c&&mn.forEach(function(Zl){return f(Se,Zl)}),Ci&&Tu(Se,On),Jt}function Tr(Se,Me,Ke,Lt){var Jt=H(Ke);if(typeof Jt!="function")throw Error(l(150));if(Ke=Jt.call(Ke),Ke==null)throw Error(l(151));for(var un=Jt=null,mn=Me,On=Me=0,Xn=null,mr=Ke.next();mn!==null&&!mr.done;On++,mr=Ke.next()){mn.index>On?(Xn=mn,mn=null):Xn=mn.sibling;var Zl=dn(Se,mn,mr.value,Lt);if(Zl===null){mn===null&&(mn=Xn);break}c&&mn&&Zl.alternate===null&&f(Se,mn),Me=G(Zl,Me,On),un===null?Jt=Zl:un.sibling=Zl,un=Zl,mn=Xn}if(mr.done)return $(Se,mn),Ci&&Tu(Se,On),Jt;if(mn===null){for(;!mr.done;On++,mr=Ke.next())mr=en(Se,mr.value,Lt),mr!==null&&(Me=G(mr,Me,On),un===null?Jt=mr:un.sibling=mr,un=mr);return Ci&&Tu(Se,On),Jt}for(mn=M(Se,mn);!mr.done;On++,mr=Ke.next())mr=ln(mn,Se,On,mr.value,Lt),mr!==null&&(c&&mr.alternate!==null&&mn.delete(mr.key===null?On:mr.key),Me=G(mr,Me,On),un===null?Jt=mr:un.sibling=mr,un=mr);return c&&mn.forEach(function(Cm){return f(Se,Cm)}),Ci&&Tu(Se,On),Jt}function _t(Se,Me,Ke,Lt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===m&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case h:e:{for(var Jt=Ke.key,un=Me;un!==null;){if(un.key===Jt){if(Jt=Ke.type,Jt===m){if(un.tag===7){$(Se,un.sibling),Me=N(un,Ke.props.children),Me.return=Se,Se=Me;break e}}else if(un.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===D&&Qu(Jt)===un.type){$(Se,un.sibling),Me=N(un,Ke.props),Me.ref=Vl(Se,un,Ke),Me.return=Se,Se=Me;break e}$(Se,un);break}else f(Se,un);un=un.sibling}Ke.type===m?(Me=Aa(Ke.props.children,Se.mode,Lt,Ke.key),Me.return=Se,Se=Me):(Lt=qa(Ke.type,Ke.key,Ke.props,null,Se.mode,Lt),Lt.ref=Vl(Se,Me,Ke),Lt.return=Se,Se=Lt)}return se(Se);case d:e:{for(un=Ke.key;Me!==null;){if(Me.key===un)if(Me.tag===4&&Me.stateNode.containerInfo===Ke.containerInfo&&Me.stateNode.implementation===Ke.implementation){$(Se,Me.sibling),Me=N(Me,Ke.children||[]),Me.return=Se,Se=Me;break e}else{$(Se,Me);break}else f(Se,Me);Me=Me.sibling}Me=Co(Ke,Se.mode,Lt),Me.return=Se,Se=Me}return se(Se);case D:return un=Ke._init,_t(Se,Me,un(Ke._payload),Lt)}if(ce(Ke))return rn(Se,Me,Ke,Lt);if(H(Ke))return Tr(Se,Me,Ke,Lt);ta(Se,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?(Ke=""+Ke,Me!==null&&Me.tag===6?($(Se,Me.sibling),Me=N(Me,Ke),Me.return=Se,Se=Me):($(Se,Me),Me=is(Ke,Se.mode,Lt),Me.return=Se,Se=Me),se(Se)):$(Se,Me)}return _t}var Sc=Sh(!0),Ec=Sh(!1),ys={},qr=pr(ys),yl=pr(ys),na=pr(ys);function bl(c){if(c===ys)throw Error(l(174));return c}function jl(c,f){ur(na,f),ur(yl,c),ur(qr,ys),c=Ae(f),fn(qr),ur(qr,c)}function Xc(){fn(qr),fn(yl),fn(na)}function Od(c){var f=bl(na.current),$=bl(qr.current);f=j($,c.type,f),$!==f&&(ur(yl,c),ur(qr,f))}function _i(c){yl.current===c&&(fn(qr),fn(yl))}var Ye=pr(0);function Ot(c){for(var f=c;f!==null;){if(f.tag===13){var $=f.memoizedState;if($!==null&&($=$.dehydrated,$===null||qt($)||_n($)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Tt=[];function gn(){for(var c=0;c<Tt.length;c++){var f=Tt[c];it?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}Tt.length=0}var Nn=u.ReactCurrentDispatcher,er=u.ReactCurrentBatchConfig,sr=0,In=null,Rr=null,Ns=null,bs=!1,To=!1,ba=0,Yi=0;function ls(){throw Error(l(321))}function $c(c,f){if(f===null)return!1;for(var $=0;$<f.length&&$<c.length;$++)if(!Xi(c[$],f[$]))return!1;return!0}function Fr(c,f,$,M,N,G){if(sr=G,In=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Nn.current=c===null||c.memoizedState===null?Mh:nd,c=$(M,N),To){G=0;do{if(To=!1,ba=0,25<=G)throw Error(l(301));G+=1,Ns=Rr=null,f.updateQueue=null,Nn.current=Zu,c=$(M,N)}while(To)}if(Nn.current=wc,f=Rr!==null&&Rr.next!==null,sr=0,Ns=Rr=In=null,bs=!1,f)throw Error(l(300));return c}function Bo(){var c=ba!==0;return ba=0,c}function Bs(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ns===null?In.memoizedState=Ns=c:Ns=Ns.next=c,Ns}function Ys(){if(Rr===null){var c=In.alternate;c=c!==null?c.memoizedState:null}else c=Rr.next;var f=Ns===null?In.memoizedState:Ns.next;if(f!==null)Ns=f,Rr=c;else{if(c===null)throw Error(l(310));Rr=c,c={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},Ns===null?In.memoizedState=Ns=c:Ns=Ns.next=c}return Ns}function ra(c,f){return typeof f=="function"?f(c):f}function Eh(c){var f=Ys(),$=f.queue;if($===null)throw Error(l(311));$.lastRenderedReducer=c;var M=Rr,N=M.baseQueue,G=$.pending;if(G!==null){if(N!==null){var se=N.next;N.next=G.next,G.next=se}M.baseQueue=N=G,$.pending=null}if(N!==null){G=N.next,M=M.baseState;var xe=se=null,je=null,vt=G;do{var Gt=vt.lane;if((sr&Gt)===Gt)je!==null&&(je=je.next={lane:0,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),M=vt.hasEagerState?vt.eagerState:c(M,vt.action);else{var en={lane:Gt,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null};je===null?(xe=je=en,se=M):je=je.next=en,In.lanes|=Gt,Au|=Gt}vt=vt.next}while(vt!==null&&vt!==G);je===null?se=M:je.next=xe,Xi(M,f.memoizedState)||(Zr=!0),f.memoizedState=M,f.baseState=se,f.baseQueue=je,$.lastRenderedState=M}if(c=$.interleaved,c!==null){N=c;do G=N.lane,In.lanes|=G,Au|=G,N=N.next;while(N!==c)}else N===null&&($.lanes=0);return[f.memoizedState,$.dispatch]}function Yc(c){var f=Ys(),$=f.queue;if($===null)throw Error(l(311));$.lastRenderedReducer=c;var M=$.dispatch,N=$.pending,G=f.memoizedState;if(N!==null){$.pending=null;var se=N=N.next;do G=c(G,se.action),se=se.next;while(se!==N);Xi(G,f.memoizedState)||(Zr=!0),f.memoizedState=G,f.baseQueue===null&&(f.baseState=G),$.lastRenderedState=G}return[G,M]}function $h(){}function Eu(c,f){var $=In,M=Ys(),N=f(),G=!Xi(M.memoizedState,N);if(G&&(M.memoizedState=N,Zr=!0),M=M.queue,xh(Tl.bind(null,$,M,c),[c]),M.getSnapshot!==f||G||Ns!==null&&Ns.memoizedState.tag&1){if($.flags|=2048,Kc(9,Zh.bind(null,$,M,N,f),void 0,null),br===null)throw Error(l(349));sr&30||qh($,f,N)}return N}function qh(c,f,$){c.flags|=16384,c={getSnapshot:f,value:$},f=In.updateQueue,f===null?(f={lastEffect:null,stores:null},In.updateQueue=f,f.stores=[c]):($=f.stores,$===null?f.stores=[c]:$.push(c))}function Zh(c,f,$,M){f.value=$,f.getSnapshot=M,ed(f)&&ua(c,1,-1)}function Tl(c,f,$){return $(function(){ed(f)&&ua(c,1,-1)})}function ed(c){var f=c.getSnapshot;c=c.value;try{var $=f();return!Xi(c,$)}catch{return!0}}function xc(c){var f=Bs();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:c},f.queue=c,c=c.dispatch=ia.bind(null,In,c),[f.memoizedState,c]}function Kc(c,f,$,M){return c={tag:c,create:f,destroy:$,deps:M,next:null},f=In.updateQueue,f===null?(f={lastEffect:null,stores:null},In.updateQueue=f,f.lastEffect=c.next=c):($=f.lastEffect,$===null?f.lastEffect=c.next=c:(M=$.next,$.next=c,c.next=M,f.lastEffect=c)),c}function Ld(){return Ys().memoizedState}function Ga(c,f,$,M){var N=Bs();In.flags|=c,N.memoizedState=Kc(1|f,$,void 0,M===void 0?null:M)}function Ta(c,f,$,M){var N=Ys();M=M===void 0?null:M;var G=void 0;if(Rr!==null){var se=Rr.memoizedState;if(G=se.destroy,M!==null&&$c(M,se.deps)){N.memoizedState=Kc(f,$,G,M);return}}In.flags|=c,N.memoizedState=Kc(1|f,$,G,M)}function $u(c,f){return Ga(8390656,8,c,f)}function xh(c,f){return Ta(2048,8,c,f)}function si(c,f){return Ta(4,2,c,f)}function td(c,f){return Ta(4,4,c,f)}function Jc(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function qu(c,f,$){return $=$!=null?$.concat([c]):null,Ta(4,4,Jc.bind(null,f,c),$)}function wh(){}function Dd(c,f){var $=Ys();f=f===void 0?null:f;var M=$.memoizedState;return M!==null&&f!==null&&$c(f,M[1])?M[0]:($.memoizedState=[c,f],c)}function Sl(c,f){var $=Ys();f=f===void 0?null:f;var M=$.memoizedState;return M!==null&&f!==null&&$c(f,M[1])?M[0]:(c=c(),$.memoizedState=[c,f],c)}function Nd(c,f){var $=Zn;Zn=$!==0&&4>$?$:4,c(!0);var M=er.transition;er.transition={};try{c(!1),f()}finally{Zn=$,er.transition=M}}function Ch(){return Ys().memoizedState}function lo(c,f,$){var M=Es(c);$={lane:M,action:$,hasEagerState:!1,eagerState:null,next:null},Uf(c)?jp(f,$):(El(c,f,$),$=Ki(),c=ua(c,M,$),c!==null&&$l(c,f,M))}function ia(c,f,$){var M=Es(c),N={lane:M,action:$,hasEagerState:!1,eagerState:null,next:null};if(Uf(c))jp(f,N);else{El(c,f,N);var G=c.alternate;if(c.lanes===0&&(G===null||G.lanes===0)&&(G=f.lastRenderedReducer,G!==null))try{var se=f.lastRenderedState,xe=G(se,$);if(N.hasEagerState=!0,N.eagerState=xe,Xi(xe,se))return}catch{}finally{}$=Ki(),c=ua(c,M,$),c!==null&&$l(c,f,M)}}function Uf(c){var f=c.alternate;return c===In||f!==null&&f===In}function jp(c,f){To=bs=!0;var $=c.pending;$===null?f.next=f:(f.next=$.next,$.next=f),c.pending=f}function El(c,f,$){br!==null&&c.mode&1&&!(Ln&2)?(c=f.interleaved,c===null?($.next=$,Qr===null?Qr=[f]:Qr.push(f)):($.next=c.next,c.next=$),f.interleaved=$):(c=f.pending,c===null?$.next=$:($.next=c.next,c.next=$),f.pending=$)}function $l(c,f,$){if($&4194240){var M=f.lanes;M&=c.pendingLanes,$|=M,f.lanes=$,qn(c,$)}}var wc={readContext:zn,useCallback:ls,useContext:ls,useEffect:ls,useImperativeHandle:ls,useInsertionEffect:ls,useLayoutEffect:ls,useMemo:ls,useReducer:ls,useRef:ls,useState:ls,useDebugValue:ls,useDeferredValue:ls,useTransition:ls,useMutableSource:ls,useSyncExternalStore:ls,useId:ls,unstable_isNewReconciler:!1},Mh={readContext:zn,useCallback:function(c,f){return Bs().memoizedState=[c,f===void 0?null:f],c},useContext:zn,useEffect:$u,useImperativeHandle:function(c,f,$){return $=$!=null?$.concat([c]):null,Ga(4194308,4,Jc.bind(null,f,c),$)},useLayoutEffect:function(c,f){return Ga(4194308,4,c,f)},useInsertionEffect:function(c,f){return Ga(4,2,c,f)},useMemo:function(c,f){var $=Bs();return f=f===void 0?null:f,c=c(),$.memoizedState=[c,f],c},useReducer:function(c,f,$){var M=Bs();return f=$!==void 0?$(f):f,M.memoizedState=M.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},M.queue=c,c=c.dispatch=lo.bind(null,In,c),[M.memoizedState,c]},useRef:function(c){var f=Bs();return c={current:c},f.memoizedState=c},useState:xc,useDebugValue:wh,useDeferredValue:function(c){var f=xc(c),$=f[0],M=f[1];return $u(function(){var N=er.transition;er.transition={};try{M(c)}finally{er.transition=N}},[c]),$},useTransition:function(){var c=xc(!1),f=c[0];return c=Nd.bind(null,c[1]),Bs().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,$){var M=In,N=Bs();if(Ci){if($===void 0)throw Error(l(407));$=$()}else{if($=f(),br===null)throw Error(l(349));sr&30||qh(M,f,$)}N.memoizedState=$;var G={value:$,getSnapshot:f};return N.queue=G,$u(Tl.bind(null,M,G,c),[c]),M.flags|=2048,Kc(9,Zh.bind(null,M,G,$,f),void 0,null),$},useId:function(){var c=Bs(),f=br.identifierPrefix;if(Ci){var $=No,M=Zo;$=(M&~(1<<32-Lo(M)-1)).toString(32)+$,f=":"+f+"R"+$,$=ba++,0<$&&(f+="H"+$.toString(32)),f+=":"}else $=Yi++,f=":"+f+"r"+$.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},nd={readContext:zn,useCallback:Dd,useContext:zn,useEffect:xh,useImperativeHandle:qu,useInsertionEffect:si,useLayoutEffect:td,useMemo:Sl,useReducer:Eh,useRef:Ld,useState:function(){return Eh(ra)},useDebugValue:wh,useDeferredValue:function(c){var f=Eh(ra),$=f[0],M=f[1];return xh(function(){var N=er.transition;er.transition={};try{M(c)}finally{er.transition=N}},[c]),$},useTransition:function(){var c=Eh(ra)[0],f=Ys().memoizedState;return[c,f]},useMutableSource:$h,useSyncExternalStore:Eu,useId:Ch,unstable_isNewReconciler:!1},Zu={readContext:zn,useCallback:Dd,useContext:zn,useEffect:xh,useImperativeHandle:qu,useInsertionEffect:si,useLayoutEffect:td,useMemo:Sl,useReducer:Yc,useRef:Ld,useState:function(){return Yc(ra)},useDebugValue:wh,useDeferredValue:function(c){var f=Yc(ra),$=f[0],M=f[1];return xh(function(){var N=er.transition;er.transition={};try{M(c)}finally{er.transition=N}},[c]),$},useTransition:function(){var c=Yc(ra)[0],f=Ys().memoizedState;return[c,f]},useMutableSource:$h,useSyncExternalStore:Eu,useId:Ch,unstable_isNewReconciler:!1};function Wa(c,f){try{var $="",M=f;do $+=_s(M),M=M.return;while(M);var N=$}catch(G){N=`
Error generating stack: `+G.message+`
`+G.stack}return{value:c,source:f,stack:N}}function ec(c,f){try{console.error(f.value)}catch($){setTimeout(function(){throw $})}}var rd=typeof WeakMap=="function"?WeakMap:Map;function Cc(c,f,$){$=vs(-1,$),$.tag=3,$.payload={element:null};var M=f.value;return $.callback=function(){ku||(ku=!0,Zs=M),ec(c,f)},$}function Mc(c,f,$){$=vs(-1,$),$.tag=3;var M=c.type.getDerivedStateFromError;if(typeof M=="function"){var N=f.value;$.payload=function(){return M(N)},$.callback=function(){ec(c,f)}}var G=c.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&($.callback=function(){ec(c,f),typeof M!="function"&&($o===null?$o=new Set([this]):$o.add(this));var se=f.stack;this.componentDidCatch(f.value,{componentStack:se!==null?se:""})}),$}function tc(c,f,$){var M=c.pingCache;if(M===null){M=c.pingCache=new rd;var N=new Set;M.set(f,N)}else N=M.get(f),N===void 0&&(N=new Set,M.set(f,N));N.has($)||(N.add($),c=Lu.bind(null,c,f,$),f.then(c,c))}function Bd(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function sa(c,f,$,M,N){return c.mode&1?(c.flags|=65536,c.lanes=N,c):(c===f?c.flags|=65536:(c.flags|=128,$.flags|=131072,$.flags&=-52805,$.tag===1&&($.alternate===null?$.tag=17:(f=vs(-1,1),f.tag=2,_l($,f))),$.lanes|=1),c)}function Cr(c){c.flags|=4}function Xl(c,f){if(c!==null&&c.child===f.child)return!0;if(f.flags&16)return!1;for(c=f.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var es,oa,ve,Ks;if(Oe)es=function(c,f){for(var $=f.child;$!==null;){if($.tag===5||$.tag===6)_e(c,$.stateNode);else if($.tag!==4&&$.child!==null){$.child.return=$,$=$.child;continue}if($===f)break;for(;$.sibling===null;){if($.return===null||$.return===f)return;$=$.return}$.sibling.return=$.return,$=$.sibling}},oa=function(){},ve=function(c,f,$,M,N){if(c=c.memoizedProps,c!==M){var G=f.stateNode,se=bl(qr.current);$=we(G,$,c,M,N,se),(f.updateQueue=$)&&Cr(f)}},Ks=function(c,f,$,M){$!==M&&Cr(f)};else if(Ee){es=function(c,f,$,M){for(var N=f.child;N!==null;){if(N.tag===5){var G=N.stateNode;$&&M&&(G=q(G,N.type,N.memoizedProps,N)),_e(c,G)}else if(N.tag===6)G=N.stateNode,$&&M&&(G=ge(G,N.memoizedProps,N)),_e(c,G);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)G=N.child,G!==null&&(G.return=N),es(c,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===f)break;for(;N.sibling===null;){if(N.return===null||N.return===f)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var Va=function(c,f,$,M){for(var N=f.child;N!==null;){if(N.tag===5){var G=N.stateNode;$&&M&&(G=q(G,N.type,N.memoizedProps,N)),Kr(c,G)}else if(N.tag===6)G=N.stateNode,$&&M&&(G=ge(G,N.memoizedProps,N)),Kr(c,G);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)G=N.child,G!==null&&(G.return=N),Va(c,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===f)break;for(;N.sibling===null;){if(N.return===null||N.return===f)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};oa=function(c,f){var $=f.stateNode;if(!Xl(c,f)){c=$.containerInfo;var M=Er(c);Va(M,f,!1,!1),$.pendingChildren=M,Cr(f),or(c,M)}},ve=function(c,f,$,M,N){var G=c.stateNode,se=c.memoizedProps;if((c=Xl(c,f))&&se===M)f.stateNode=G;else{var xe=f.stateNode,je=bl(qr.current),vt=null;se!==M&&(vt=we(xe,$,se,M,N,je)),c&&vt===null?f.stateNode=G:(G=Pr(G,vt,$,se,M,f,c,xe),Le(G,$,M,N,je)&&Cr(f),f.stateNode=G,c?Cr(f):es(G,f,!1,!1))}},Ks=function(c,f,$,M){$!==M?(c=bl(na.current),$=bl(qr.current),f.stateNode=Re(M,c,$,f),Cr(f)):f.stateNode=c.stateNode}}else oa=function(){},ve=function(){},Ks=function(){};function Hr(c,f){if(!Ci)switch(c.tailMode){case"hidden":f=c.tail;for(var $=null;f!==null;)f.alternate!==null&&($=f),f=f.sibling;$===null?c.tail=null:$.sibling=null;break;case"collapsed":$=c.tail;for(var M=null;$!==null;)$.alternate!==null&&(M=$),$=$.sibling;M===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:M.sibling=null}}function Hn(c){var f=c.alternate!==null&&c.alternate.child===c.child,$=0,M=0;if(f)for(var N=c.child;N!==null;)$|=N.lanes|N.childLanes,M|=N.subtreeFlags&14680064,M|=N.flags&14680064,N.return=c,N=N.sibling;else for(N=c.child;N!==null;)$|=N.lanes|N.childLanes,M|=N.subtreeFlags,M|=N.flags,N.return=c,N=N.sibling;return c.subtreeFlags|=M,c.childLanes=$,f}function Xp(c,f,$){var M=f.pendingProps;switch(wi(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(f),null;case 1:return Fi(f.type)&&Ua(),Hn(f),null;case 3:return M=f.stateNode,Xc(),fn(pi),fn(nr),gn(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(c===null||c.child===null)&&(bc(f)?Cr(f):c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Wl!==null&&(ai(Wl),Wl=null))),oa(c,f),Hn(f),null;case 5:_i(f),$=bl(na.current);var N=f.type;if(c!==null&&f.stateNode!=null)ve(c,f,N,M,$),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!M){if(f.stateNode===null)throw Error(l(166));return Hn(f),null}if(c=bl(qr.current),bc(f)){if(!Fe)throw Error(l(175));c=yn(f.stateNode,f.type,f.memoizedProps,$,c,f,!ea),f.updateQueue=c,c!==null&&Cr(f)}else{var G=ae(N,M,$,c,f);es(G,f,!1,!1),f.stateNode=G,Le(G,N,M,$,c)&&Cr(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Hn(f),null;case 6:if(c&&f.stateNode!=null)Ks(c,f,c.memoizedProps,M);else{if(typeof M!="string"&&f.stateNode===null)throw Error(l(166));if(c=bl(na.current),$=bl(qr.current),bc(f)){if(!Fe)throw Error(l(176));if(c=f.stateNode,M=f.memoizedProps,($=Pn(c,M,f,!ea))&&(N=gi,N!==null))switch(G=(N.mode&1)!==0,N.tag){case 3:Oo(N.stateNode.containerInfo,c,M,G);break;case 5:cl(N.type,N.memoizedProps,N.stateNode,c,M,G)}$&&Cr(f)}else f.stateNode=Re(M,c,$,f)}return Hn(f),null;case 13:if(fn(Ye),M=f.memoizedState,Ci&&hr!==null&&f.mode&1&&!(f.flags&128)){for(c=hr;c;)c=lt(c);return Th(),f.flags|=98560,f}if(M!==null&&M.dehydrated!==null){if(M=bc(f),c===null){if(!M)throw Error(l(318));if(!Fe)throw Error(l(344));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));ir(c,f)}else Th(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return Hn(f),null}return Wl!==null&&(ai(Wl),Wl=null),f.flags&128?(f.lanes=$,f):(M=M!==null,$=!1,c===null?bc(f):$=c.memoizedState!==null,M&&!$&&(f.child.flags|=8192,f.mode&1&&(c===null||Ye.current&1?Wi===0&&(Wi=3):nh())),f.updateQueue!==null&&(f.flags|=4),Hn(f),null);case 4:return Xc(),oa(c,f),c===null&&nt(f.stateNode.containerInfo),Hn(f),null;case 10:return Ha(f.type._context),Hn(f),null;case 17:return Fi(f.type)&&Ua(),Hn(f),null;case 19:if(fn(Ye),N=f.memoizedState,N===null)return Hn(f),null;if(M=(f.flags&128)!==0,G=N.rendering,G===null)if(M)Hr(N,!1);else{if(Wi!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(G=Ot(c),G!==null){for(f.flags|=128,Hr(N,!1),c=G.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),f.subtreeFlags=0,c=$,M=f.child;M!==null;)$=M,N=c,$.flags&=14680066,G=$.alternate,G===null?($.childLanes=0,$.lanes=N,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=G.childLanes,$.lanes=G.lanes,$.child=G.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=G.memoizedProps,$.memoizedState=G.memoizedState,$.updateQueue=G.updateQueue,$.type=G.type,N=G.dependencies,$.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),M=M.sibling;return ur(Ye,Ye.current&1|2),f.child}c=c.sibling}N.tail!==null&&zi()>Ca&&(f.flags|=128,M=!0,Hr(N,!1),f.lanes=4194304)}else{if(!M)if(c=Ot(G),c!==null){if(f.flags|=128,M=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),Hr(N,!0),N.tail===null&&N.tailMode==="hidden"&&!G.alternate&&!Ci)return Hn(f),null}else 2*zi()-N.renderingStartTime>Ca&&$!==1073741824&&(f.flags|=128,M=!0,Hr(N,!1),f.lanes=4194304);N.isBackwards?(G.sibling=f.child,f.child=G):(c=N.last,c!==null?c.sibling=G:f.child=G,N.last=G)}return N.tail!==null?(f=N.tail,N.rendering=f,N.tail=f.sibling,N.renderingStartTime=zi(),f.sibling=null,c=Ye.current,ur(Ye,M?c&1|2:c&1),f):(Hn(f),null);case 22:case 23:return Ma(),M=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==M&&(f.flags|=8192),M&&f.mode&1?qs&1073741824&&(Hn(f),Oe&&f.subtreeFlags&6&&(f.flags|=8192)):Hn(f),null;case 24:return null;case 25:return null}throw Error(l(156,f.tag))}var Sa=u.ReactCurrentOwner,Zr=!1;function vi(c,f,$,M){f.child=c===null?Ec(f,null,$,M):Sc(f,c.child,$,M)}function Mi(c,f,$,M,N){$=$.render;var G=f.ref;return ii(f,N),M=Fr(c,f,$,M,G,N),$=Bo(),c!==null&&!Zr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~N,ts(c,f,N)):(Ci&&$&&Jh(f),f.flags|=1,vi(c,f,M,N),f.child)}function ki(c,f,$,M,N){if(c===null){var G=$.type;return typeof G=="function"&&!Nu(G)&&G.defaultProps===void 0&&$.compare===null&&$.defaultProps===void 0?(f.tag=15,f.type=G,Ac(c,f,G,M,N)):(c=qa($.type,null,M,f,f.mode,N),c.ref=f.ref,c.return=f,f.child=c)}if(G=c.child,!(c.lanes&N)){var se=G.memoizedProps;if($=$.compare,$=$!==null?$:Jr,$(se,M)&&c.ref===f.ref)return ts(c,f,N)}return f.flags|=1,c=no(G,M),c.ref=f.ref,c.return=f,f.child=c}function Ac(c,f,$,M,N){if(c!==null&&Jr(c.memoizedProps,M)&&c.ref===f.ref)if(Zr=!1,(c.lanes&N)!==0)c.flags&131072&&(Zr=!0);else return f.lanes=c.lanes,ts(c,f,N);return uo(c,f,$,M,N)}function Po(c,f,$){var M=f.pendingProps,N=M.children,G=c!==null?c.memoizedState:null;if(M.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},ur(Oi,qs),qs|=$;else if($&1073741824)f.memoizedState={baseLanes:0,cachePool:null},M=G!==null?G.baseLanes:$,ur(Oi,qs),qs|=M;else return c=G!==null?G.baseLanes|$:$,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null},f.updateQueue=null,ur(Oi,qs),qs|=c,null;else G!==null?(M=G.baseLanes|$,f.memoizedState=null):M=$,ur(Oi,qs),qs|=M;return vi(c,f,N,$),f.child}function Fo(c,f){var $=f.ref;(c===null&&$!==null||c!==null&&c.ref!==$)&&(f.flags|=512,f.flags|=2097152)}function uo(c,f,$,M,N){var G=Fi($)?Zi:nr.current;return G=Xr(f,G),ii(f,N),$=Fr(c,f,$,M,G,N),M=Bo(),c!==null&&!Zr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~N,ts(c,f,N)):(Ci&&M&&Jh(f),f.flags|=1,vi(c,f,$,N),f.child)}function Ic(c,f,$,M,N){if(Fi($)){var G=!0;Yu(f)}else G=!1;if(ii(f,N),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),Ff(f,$,M),Ku(f,$,M,N),M=!0;else if(c===null){var se=f.stateNode,xe=f.memoizedProps;se.props=xe;var je=se.context,vt=$.contextType;typeof vt=="object"&&vt!==null?vt=zn(vt):(vt=Fi($)?Zi:nr.current,vt=Xr(f,vt));var Gt=$.getDerivedStateFromProps,en=typeof Gt=="function"||typeof se.getSnapshotBeforeUpdate=="function";en||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(xe!==M||je!==vt)&&gp(f,se,M,vt),xi=!1;var dn=f.memoizedState;se.state=dn,yu(f,M,se,N),je=f.memoizedState,xe!==M||dn!==je||pi.current||xi?(typeof Gt=="function"&&(yh(f,$,Gt,M),je=f.memoizedState),(xe=xi||Vp(f,$,xe,M,dn,je,vt))?(en||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(f.flags|=4194308)):(typeof se.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=M,f.memoizedState=je),se.props=M,se.state=je,se.context=vt,M=xe):(typeof se.componentDidMount=="function"&&(f.flags|=4194308),M=!1)}else{se=f.stateNode,vu(c,f),xe=f.memoizedProps,vt=f.type===f.elementType?xe:Ri(f.type,xe),se.props=vt,en=f.pendingProps,dn=se.context,je=$.contextType,typeof je=="object"&&je!==null?je=zn(je):(je=Fi($)?Zi:nr.current,je=Xr(f,je));var ln=$.getDerivedStateFromProps;(Gt=typeof ln=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(xe!==en||dn!==je)&&gp(f,se,M,je),xi=!1,dn=f.memoizedState,se.state=dn,yu(f,M,se,N);var rn=f.memoizedState;xe!==en||dn!==rn||pi.current||xi?(typeof ln=="function"&&(yh(f,$,ln,M),rn=f.memoizedState),(vt=xi||Vp(f,$,vt,M,dn,rn,je)||!1)?(Gt||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(M,rn,je),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(M,rn,je)),typeof se.componentDidUpdate=="function"&&(f.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof se.componentDidUpdate!="function"||xe===c.memoizedProps&&dn===c.memoizedState||(f.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||xe===c.memoizedProps&&dn===c.memoizedState||(f.flags|=1024),f.memoizedProps=M,f.memoizedState=rn),se.props=M,se.state=rn,se.context=je,M=vt):(typeof se.componentDidUpdate!="function"||xe===c.memoizedProps&&dn===c.memoizedState||(f.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||xe===c.memoizedProps&&dn===c.memoizedState||(f.flags|=1024),M=!1)}return So(c,f,$,M,G,N)}function So(c,f,$,M,N,G){Fo(c,f);var se=(f.flags&128)!==0;if(!M&&!se)return N&&Os(f,$,!1),ts(c,f,G);M=f.stateNode,Sa.current=f;var xe=se&&typeof $.getDerivedStateFromError!="function"?null:M.render();return f.flags|=1,c!==null&&se?(f.child=Sc(f,c.child,null,G),f.child=Sc(f,null,xe,G)):vi(c,f,xe,G),f.memoizedState=M.state,N&&Os(f,$,!0),f.child}function Pd(c){var f=c.stateNode;f.pendingContext?hl(c,f.pendingContext,f.pendingContext!==f.context):f.context&&hl(c,f.context,!1),jl(c,f.containerInfo)}function Fd(c,f,$,M,N){return Th(),Tc(N),f.flags|=256,vi(c,f,$,M),f.child}var Ah={dehydrated:null,treeContext:null,retryLane:0};function Ea(c){return{baseLanes:c,cachePool:null}}function Mn(c,f,$){var M=f.pendingProps,N=Ye.current,G=!1,se=(f.flags&128)!==0,xe;if((xe=se)||(xe=c!==null&&c.memoizedState===null?!1:(N&2)!==0),xe?(G=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(N|=1),ur(Ye,N&1),c===null)return Su(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?_n(c)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(N=M.children,c=M.fallback,G?(M=f.mode,G=f.child,N={mode:"hidden",children:N},!(M&1)&&G!==null?(G.childLanes=0,G.pendingProps=N):G=Ql(N,M,0,null),c=Aa(c,M,$,null),G.return=f,c.return=f,G.sibling=c,f.child=G,f.child.memoizedState=Ea($),f.memoizedState=Ah,c):us(f,N));if(N=c.memoizedState,N!==null){if(xe=N.dehydrated,xe!==null){if(se)return f.flags&256?(f.flags&=-257,xl(c,f,$,Error(l(422)))):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(G=M.fallback,N=f.mode,M=Ql({mode:"visible",children:M.children},N,0,null),G=Aa(G,N,$,null),G.flags|=2,M.return=f,G.return=f,M.sibling=G,f.child=M,f.mode&1&&Sc(f,c.child,null,$),f.child.memoizedState=Ea($),f.memoizedState=Ah,G);if(!(f.mode&1))f=xl(c,f,$,null);else if(_n(xe))f=xl(c,f,$,Error(l(419)));else if(M=($&c.childLanes)!==0,Zr||M){if(M=br,M!==null){switch($&-$){case 4:G=2;break;case 16:G=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:G=32;break;case 536870912:G=268435456;break;default:G=0}M=G&(M.suspendedLanes|$)?0:G,M!==0&&M!==N.retryLane&&(N.retryLane=M,ua(c,M,-1))}nh(),f=xl(c,f,$,Error(l(421)))}else qt(xe)?(f.flags|=128,f.child=c.child,f=Qa.bind(null,c),Ie(xe,f),f=null):($=N.treeContext,Fe&&(hr=Nt(xe),gi=f,Ci=!0,Wl=null,ea=!1,$!==null&&(Vr[cr++]=Zo,Vr[cr++]=No,Vr[cr++]=Xs,Zo=$.id,No=$.overflow,Xs=f)),f=us(f,f.pendingProps.children),f.flags|=4096);return f}return G?(M=oi(c,f,M.children,M.fallback,$),G=f.child,N=c.child.memoizedState,G.memoizedState=N===null?Ea($):{baseLanes:N.baseLanes|$,cachePool:null},G.childLanes=c.childLanes&~$,f.memoizedState=Ah,M):($=Ts(c,f,M.children,$),f.memoizedState=null,$)}return G?(M=oi(c,f,M.children,M.fallback,$),G=f.child,N=c.child.memoizedState,G.memoizedState=N===null?Ea($):{baseLanes:N.baseLanes|$,cachePool:null},G.childLanes=c.childLanes&~$,f.memoizedState=Ah,M):($=Ts(c,f,M.children,$),f.memoizedState=null,$)}function us(c,f){return f=Ql({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function Ts(c,f,$,M){var N=c.child;return c=N.sibling,$=no(N,{mode:"visible",children:$}),!(f.mode&1)&&($.lanes=M),$.return=f,$.sibling=null,c!==null&&(M=f.deletions,M===null?(f.deletions=[c],f.flags|=16):M.push(c)),f.child=$}function oi(c,f,$,M,N){var G=f.mode;c=c.child;var se=c.sibling,xe={mode:"hidden",children:$};return!(G&1)&&f.child!==c?($=f.child,$.childLanes=0,$.pendingProps=xe,f.deletions=null):($=no(c,xe),$.subtreeFlags=c.subtreeFlags&14680064),se!==null?M=no(se,M):(M=Aa(M,G,N,null),M.flags|=2),M.return=f,$.return=f,$.sibling=M,f.child=$,M}function xl(c,f,$,M){return M!==null&&Tc(M),Sc(f,c.child,null,$),c=us(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function wl(c,f,$){c.lanes|=f;var M=c.alternate;M!==null&&(M.lanes|=f),fi(c.return,f,$)}function hn(c,f,$,M,N){var G=c.memoizedState;G===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:M,tail:$,tailMode:N}:(G.isBackwards=f,G.rendering=null,G.renderingStartTime=0,G.last=M,G.tail=$,G.tailMode=N)}function Gr(c,f,$){var M=f.pendingProps,N=M.revealOrder,G=M.tail;if(vi(c,f,M.children,$),M=Ye.current,M&2)M=M&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&wl(c,$,f);else if(c.tag===19)wl(c,$,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}M&=1}if(ur(Ye,M),!(f.mode&1))f.memoizedState=null;else switch(N){case"forwards":for($=f.child,N=null;$!==null;)c=$.alternate,c!==null&&Ot(c)===null&&(N=$),$=$.sibling;$=N,$===null?(N=f.child,f.child=null):(N=$.sibling,$.sibling=null),hn(f,!1,N,$,G);break;case"backwards":for($=null,N=f.child,f.child=null;N!==null;){if(c=N.alternate,c!==null&&Ot(c)===null){f.child=N;break}c=N.sibling,N.sibling=$,$=N,N=c}hn(f,!0,$,null,G);break;case"together":hn(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function ts(c,f,$){if(c!==null&&(f.dependencies=c.dependencies),Au|=f.lanes,!($&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(l(153));if(f.child!==null){for(c=f.child,$=no(c,c.pendingProps),f.child=$,$.return=f;c.sibling!==null;)c=c.sibling,$=$.sibling=no(c,c.pendingProps),$.return=f;$.sibling=null}return f.child}function Yp(c,f,$){switch(f.tag){case 3:Pd(f),Th();break;case 5:Od(f);break;case 1:Fi(f.type)&&Yu(f);break;case 4:jl(f,f.stateNode.containerInfo);break;case 10:_u(f,f.type._context,f.memoizedProps.value);break;case 13:var M=f.memoizedState;if(M!==null)return M.dehydrated!==null?(ur(Ye,Ye.current&1),f.flags|=128,null):$&f.child.childLanes?Mn(c,f,$):(ur(Ye,Ye.current&1),c=ts(c,f,$),c!==null?c.sibling:null);ur(Ye,Ye.current&1);break;case 19:if(M=($&f.childLanes)!==0,c.flags&128){if(M)return Gr(c,f,$);f.flags|=128}var N=f.memoizedState;if(N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),ur(Ye,Ye.current),M)break;return null;case 22:case 23:return f.lanes=0,Po(c,f,$)}return ts(c,f,$)}function Qc(c,f){switch(wi(f),f.tag){case 1:return Fi(f.type)&&Ua(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return Xc(),fn(pi),fn(nr),gn(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;case 5:return _i(f),null;case 13:if(fn(Ye),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(l(340));Th()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return fn(Ye),null;case 4:return Xc(),null;case 10:return Ha(f.type._context),null;case 22:case 23:return Ma(),null;case 24:return null;default:return null}}var Ps=!1,Uo=!1,pn=typeof WeakSet=="function"?WeakSet:Set,sn=null;function ja(c,f){var $=c.ref;if($!==null)if(typeof $=="function")try{$(null)}catch(M){to(c,f,M)}else $.current=null}function nc(c,f,$){try{$()}catch(M){to(c,f,M)}}var zf=!1;function xu(c,f){for(Z(c.containerInfo),sn=f;sn!==null;)if(c=sn,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,sn=f;else for(;sn!==null;){c=sn;try{var $=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if($!==null){var M=$.memoizedProps,N=$.memoizedState,G=c.stateNode,se=G.getSnapshotBeforeUpdate(c.elementType===c.type?M:Ri(c.type,M),N);G.__reactInternalSnapshotBeforeUpdate=se}break;case 3:Oe&&En(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(xe){to(c,c.return,xe)}if(f=c.sibling,f!==null){f.return=c.return,sn=f;break}sn=c.return}return $=zf,zf=!1,$}function aa(c,f,$){var M=f.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var N=M=M.next;do{if((N.tag&c)===c){var G=N.destroy;N.destroy=void 0,G!==void 0&&nc(f,$,G)}N=N.next}while(N!==M)}}function cs(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var $=f=f.next;do{if(($.tag&c)===c){var M=$.create;$.destroy=M()}$=$.next}while($!==f)}}function $a(c){var f=c.ref;if(f!==null){var $=c.stateNode;switch(c.tag){case 5:c=me($);break;default:c=$}typeof f=="function"?f(c):f.current=c}}function Gi(c,f,$){if(Hl&&typeof Hl.onCommitFiberUnmount=="function")try{Hl.onCommitFiberUnmount(Do,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var M=c=c.next;do{var N=M,G=N.destroy;N=N.tag,G!==void 0&&(N&2||N&4)&&nc(f,$,G),M=M.next}while(M!==c)}break;case 1:if(ja(f,$),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(se){to(f,$,se)}break;case 5:ja(f,$);break;case 4:Oe?id(c,f,$):Ee&&Ee&&(f=f.stateNode.containerInfo,$=Er(f),Wn(f,$))}}function xa(c,f,$){for(var M=f;;)if(Gi(c,M,$),M.child===null||Oe&&M.tag===4){if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function wu(c){var f=c.alternate;f!==null&&(c.alternate=null,wu(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&It(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Ud(c){return c.tag===5||c.tag===3||c.tag===4}function rc(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Ud(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Js(c){if(Oe){e:{for(var f=c.return;f!==null;){if(Ud(f))break e;f=f.return}throw Error(l(160))}var $=f;switch($.tag){case 5:f=$.stateNode,$.flags&32&&(Be(f),$.flags&=-33),$=rc(c),qc(c,$,f);break;case 3:case 4:f=$.stateNode.containerInfo,$=rc(c),zd(c,$,f);break;default:throw Error(l(161))}}}function zd(c,f,$){var M=c.tag;if(M===5||M===6)c=c.stateNode,f?$e($,c,f):Ge($,c);else if(M!==4&&(c=c.child,c!==null))for(zd(c,f,$),c=c.sibling;c!==null;)zd(c,f,$),c=c.sibling}function qc(c,f,$){var M=c.tag;if(M===5||M===6)c=c.stateNode,f?le($,c,f):at($,c);else if(M!==4&&(c=c.child,c!==null))for(qc(c,f,$),c=c.sibling;c!==null;)qc(c,f,$),c=c.sibling}function id(c,f,$){for(var M=f,N=!1,G,se;;){if(!N){N=M.return;e:for(;;){if(N===null)throw Error(l(160));switch(G=N.stateNode,N.tag){case 5:se=!1;break e;case 3:G=G.containerInfo,se=!0;break e;case 4:G=G.containerInfo,se=!0;break e}N=N.return}N=!0}if(M.tag===5||M.tag===6)xa(c,M,$),se?Ft(G,M.stateNode):We(G,M.stateNode);else if(M.tag===18)se?ji(G,M.stateNode):Ir(G,M.stateNode);else if(M.tag===4){if(M.child!==null){G=M.stateNode.containerInfo,se=!0,M.child.return=M,M=M.child;continue}}else if(Gi(c,M,$),M.child!==null){M.child.return=M,M=M.child;continue}if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return,M.tag===4&&(N=!1)}M.sibling.return=M.return,M=M.sibling}}function wa(c,f){if(Oe){switch(f.tag){case 0:case 11:case 14:case 15:aa(3,f,f.return),cs(3,f),aa(5,f,f.return);return;case 1:return;case 5:var $=f.stateNode;if($!=null){var M=f.memoizedProps;c=c!==null?c.memoizedProps:M;var N=f.type,G=f.updateQueue;f.updateQueue=null,G!==null&&Q($,G,N,c,M,f)}return;case 6:if(f.stateNode===null)throw Error(l(162));$=f.memoizedProps,Ce(f.stateNode,c!==null?c.memoizedProps:$,$);return;case 3:Fe&&c!==null&&c.memoizedState.isDehydrated&&ni(f.stateNode.containerInfo);return;case 12:return;case 13:Cl(f);return;case 19:Cl(f);return;case 17:return}throw Error(l(163))}switch(f.tag){case 0:case 11:case 14:case 15:aa(3,f,f.return),cs(3,f),aa(5,f,f.return);return;case 12:return;case 13:Cl(f);return;case 19:Cl(f);return;case 3:Fe&&c!==null&&c.memoizedState.isDehydrated&&ni(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ee){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Wn(f.containerInfo,f.pendingChildren);break e}throw Error(l(163))}}function Cl(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var $=c.stateNode;$===null&&($=c.stateNode=new pn),f.forEach(function(M){var N=Du.bind(null,c,M);$.has(M)||($.add(M),M.then(N,N))})}}function Kp(c,f){for(sn=f;sn!==null;){f=sn;var $=f.deletions;if($!==null)for(var M=0;M<$.length;M++){var N=$[M];try{var G=c;Oe?id(G,N,f):xa(G,N,f);var se=N.alternate;se!==null&&(se.return=null),N.return=null}catch(Jt){to(N,f,Jt)}}if($=f.child,f.subtreeFlags&12854&&$!==null)$.return=f,sn=$;else for(;sn!==null;){f=sn;try{var xe=f.flags;if(xe&32&&Oe&&Be(f.stateNode),xe&512){var je=f.alternate;if(je!==null){var vt=je.ref;vt!==null&&(typeof vt=="function"?vt(null):vt.current=null)}}if(xe&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var Gt=f.alternate;(Gt===null||Gt.memoizedState===null)&&(od=zi())}break;case 22:var en=f.memoizedState!==null,dn=f.alternate,ln=dn!==null&&dn.memoizedState!==null;if($=f,Oe){e:if(M=$,N=en,G=null,Oe)for(var rn=M;;){if(rn.tag===5){if(G===null){G=rn;var Tr=rn.stateNode;N?Ut(Tr):Ht(rn.stateNode,rn.memoizedProps)}}else if(rn.tag===6){if(G===null){var _t=rn.stateNode;N?ut(_t):zt(_t,rn.memoizedProps)}}else if((rn.tag!==22&&rn.tag!==23||rn.memoizedState===null||rn===M)&&rn.child!==null){rn.child.return=rn,rn=rn.child;continue}if(rn===M)break;for(;rn.sibling===null;){if(rn.return===null||rn.return===M)break e;G===rn&&(G=null),rn=rn.return}G===rn&&(G=null),rn.sibling.return=rn.return,rn=rn.sibling}}if(en&&!ln&&$.mode&1){sn=$;for(var Se=$.child;Se!==null;){for($=sn=Se;sn!==null;){M=sn;var Me=M.child;switch(M.tag){case 0:case 11:case 14:case 15:aa(4,M,M.return);break;case 1:ja(M,M.return);var Ke=M.stateNode;if(typeof Ke.componentWillUnmount=="function"){var Lt=M.return;try{Ke.props=M.memoizedProps,Ke.state=M.memoizedState,Ke.componentWillUnmount()}catch(Jt){to(M,Lt,Jt)}}break;case 5:ja(M,M.return);break;case 22:if(M.memoizedState!==null){Rc($);continue}}Me!==null?(Me.return=M,sn=Me):Rc($)}Se=Se.sibling}}}switch(xe&4102){case 2:Js(f),f.flags&=-3;break;case 6:Js(f),f.flags&=-3,wa(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,wa(f.alternate,f);break;case 4:wa(f.alternate,f)}}catch(Jt){to(f,f.return,Jt)}if($=f.sibling,$!==null){$.return=f.return,sn=$;break}sn=f.return}}}function Yl(c,f,$){sn=c,Cu(c)}function Cu(c,f,$){for(var M=(c.mode&1)!==0;sn!==null;){var N=sn,G=N.child;if(N.tag===22&&M){var se=N.memoizedState!==null||Ps;if(!se){var xe=N.alternate,je=xe!==null&&xe.memoizedState!==null||Uo;xe=Ps;var vt=Uo;if(Ps=se,(Uo=je)&&!vt)for(sn=N;sn!==null;)se=sn,je=se.child,se.tag===22&&se.memoizedState!==null?hs(N):je!==null?(je.return=se,sn=je):hs(N);for(;G!==null;)sn=G,Cu(G),G=G.sibling;sn=N,Ps=xe,Uo=vt}sd(c)}else N.subtreeFlags&8772&&G!==null?(G.return=N,sn=G):sd(c)}}function sd(c){for(;sn!==null;){var f=sn;if(f.flags&8772){var $=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:Uo||cs(5,f);break;case 1:var M=f.stateNode;if(f.flags&4&&!Uo)if($===null)M.componentDidMount();else{var N=f.elementType===f.type?$.memoizedProps:Ri(f.type,$.memoizedProps);M.componentDidUpdate(N,$.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var G=f.updateQueue;G!==null&&pp(f,G,M);break;case 3:var se=f.updateQueue;if(se!==null){if($=null,f.child!==null)switch(f.child.tag){case 5:$=me(f.child.stateNode);break;case 1:$=f.child.stateNode}pp(f,se,$)}break;case 5:var xe=f.stateNode;$===null&&f.flags&4&&X(xe,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Fe&&f.memoizedState===null){var je=f.alternate;if(je!==null){var vt=je.memoizedState;if(vt!==null){var Gt=vt.dehydrated;Gt!==null&&$r(Gt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(l(163))}Uo||f.flags&512&&$a(f)}catch(en){to(f,f.return,en)}}if(f===c){sn=null;break}if($=f.sibling,$!==null){$.return=f.return,sn=$;break}sn=f.return}}function Rc(c){for(;sn!==null;){var f=sn;if(f===c){sn=null;break}var $=f.sibling;if($!==null){$.return=f.return,sn=$;break}sn=f.return}}function hs(c){for(;sn!==null;){var f=sn;try{switch(f.tag){case 0:case 11:case 15:var $=f.return;try{cs(4,f)}catch(je){to(f,$,je)}break;case 1:var M=f.stateNode;if(typeof M.componentDidMount=="function"){var N=f.return;try{M.componentDidMount()}catch(je){to(f,N,je)}}var G=f.return;try{$a(f)}catch(je){to(f,G,je)}break;case 5:var se=f.return;try{$a(f)}catch(je){to(f,se,je)}}}catch(je){to(f,f.return,je)}if(f===c){sn=null;break}var xe=f.sibling;if(xe!==null){xe.return=f.return,sn=xe;break}sn=f.return}}var Mu=0,ic=1,Eo=2,Xa=3,Ss=4;if(typeof Symbol=="function"&&Symbol.for){var co=Symbol.for;Mu=co("selector.component"),ic=co("selector.has_pseudo_class"),Eo=co("selector.role"),Xa=co("selector.test_id"),Ss=co("selector.text")}function Zc(c){var f=rt(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(l(364));return f}if(c=pt(c),c===null)throw Error(l(362));return c.stateNode.current}function Qs(c,f){switch(f.$$typeof){case Mu:if(c.type===f.value)return!0;break;case ic:e:{f=f.value,c=[c,0];for(var $=0;$<c.length;){var M=c[$++],N=c[$++],G=f[N];if(M.tag!==5||!ke(M)){for(;G!=null&&Qs(M,G);)N++,G=f[N];if(N===f.length){f=!0;break e}else for(M=M.child;M!==null;)c.push(M,N),M=M.sibling}}f=!1}return f;case Eo:if(c.tag===5&&ot(c.stateNode,f.value))return!0;break;case Ss:if((c.tag===5||c.tag===6)&&(c=te(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case Xa:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function Ya(c){switch(c.$$typeof){case Mu:return"<"+(U(c.value)||"Unknown")+">";case ic:return":has("+(Ya(c)||"")+")";case Eo:return'[role="'+c.value+'"]';case Ss:return'"'+c.value+'"';case Xa:return'[data-testname="'+c.value+'"]';default:throw Error(l(365))}}function sc(c,f){var $=[];c=[c,0];for(var M=0;M<c.length;){var N=c[M++],G=c[M++],se=f[G];if(N.tag!==5||!ke(N)){for(;se!=null&&Qs(N,se);)G++,se=f[G];if(G===f.length)$.push(N);else for(N=N.child;N!==null;)c.push(N,G),N=N.sibling}}return $}function yp(c,f){if(!$t)throw Error(l(363));c=Zc(c),c=sc(c,f),f=[],c=Array.from(c);for(var $=0;$<c.length;){var M=c[$++];if(M.tag===5)ke(M)||f.push(M.stateNode);else for(M=M.child;M!==null;)c.push(M),M=M.sibling}return f}var eh=Math.ceil,la=u.ReactCurrentDispatcher,yi=u.ReactCurrentOwner,Cn=u.ReactCurrentBatchConfig,Ln=0,br=null,Lr=null,Wr=0,qs=0,Oi=pr(0),Wi=0,Kl=null,Au=0,oc=0,Iu=0,Fs=null,ho=null,od=0,Ca=1/0;function Ru(){Ca=zi()+500}var ku=!1,Zs=null,$o=null,Ka=!1,xo=null,ac=0,Ou=0,Ih=null,th=-1,xr=0;function Ki(){return Ln&6?zi():th!==-1?th:th=zi()}function Es(c){return c.mode&1?Ln&2&&Wr!==0?Wr&-Wr:mu.transition!==null?(xr===0&&(c=Jo,Jo<<=1,!(Jo&4194240)&&(Jo=64),xr=c),xr):(c=Zn,c!==0?c:dt()):1}function ua(c,f,$){if(50<Ou)throw Ou=0,Ih=null,Error(l(185));var M=Us(c,f);return M===null?null:(pl(M,f,$),(!(Ln&2)||M!==br)&&(M===br&&(!(Ln&2)&&(oc|=f),Wi===4&&Ml(M,Wr)),Vn(M,$),f===1&&Ln===0&&!(c.mode&1)&&(Ru(),fu&&qo())),M)}function Us(c,f){c.lanes|=f;var $=c.alternate;for($!==null&&($.lanes|=f),$=c,c=c.return;c!==null;)c.childLanes|=f,$=c.alternate,$!==null&&($.childLanes|=f),$=c,c=c.return;return $.tag===3?$.stateNode:null}function Vn(c,f){var $=c.callbackNode;yc(c,f);var M=Vc(c,c===br?Wr:0);if(M===0)$!==null&&_a($),c.callbackNode=null,c.callbackPriority=0;else if(f=M&-M,c.callbackPriority!==f){if($!=null&&_a($),f===1)c.tag===0?Qo(Ja.bind(null,c)):jc(Ja.bind(null,c)),mt?wt(function(){Ln===0&&qo()}):za(gl,qo),$=null;else{switch(ml(M)){case 1:$=gl;break;case 4:$=kd;break;case 16:$=Ls;break;case 536870912:$=pu;break;default:$=Ls}$=ah($,kc.bind(null,c))}c.callbackPriority=f,c.callbackNode=$}}function kc(c,f){if(th=-1,xr=0,Ln&6)throw Error(l(327));var $=c.callbackNode;if(lc()&&c.callbackNode!==$)return null;var M=Vc(c,c===br?Wr:0);if(M===0)return null;if(M&30||M&c.expiredLanes||f)f=rs(c,M);else{f=M;var N=Ln;Ln|=2;var G=ad();(br!==c||Wr!==f)&&(Ru(),Dr(c,f));do try{Rh();break}catch(xe){Oc(c,xe)}while(!0);oo(),la.current=G,Ln=N,Lr!==null?f=0:(br=null,Wr=0,f=Wi)}if(f!==0){if(f===2&&(N=dl(c),N!==0&&(M=N,f=an(c,N))),f===1)throw $=Kl,Dr(c,0),Ml(c,M),Vn(c,zi()),$;if(f===6)Ml(c,M);else{if(N=c.current.alternate,!(M&30)&&!ns(N)&&(f=rs(c,M),f===2&&(G=dl(c),G!==0&&(M=G,f=an(c,G))),f===1))throw $=Kl,Dr(c,0),Ml(c,M),Vn(c,zi()),$;switch(c.finishedWork=N,c.finishedLanes=M,f){case 0:case 1:throw Error(l(345));case 2:rh(c,ho);break;case 3:if(Ml(c,M),(M&130023424)===M&&(f=od+500-zi(),10<f)){if(Vc(c,0)!==0)break;if(N=c.suspendedLanes,(N&M)!==M){Ki(),c.pingedLanes|=c.suspendedLanes&N;break}c.timeoutHandle=qe(rh.bind(null,c,ho),f);break}rh(c,ho);break;case 4:if(Ml(c,M),(M&4194240)===M)break;for(f=c.eventTimes,N=-1;0<M;){var se=31-Lo(M);G=1<<se,se=f[se],se>N&&(N=se),M&=~G}if(M=N,M=zi()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*eh(M/1960))-M,10<M){c.timeoutHandle=qe(rh.bind(null,c,ho),M);break}rh(c,ho);break;case 5:rh(c,ho);break;default:throw Error(l(329))}}}return Vn(c,zi()),c.callbackNode===$?kc.bind(null,c):null}function an(c,f){var $=Fs;return c.current.memoizedState.isDehydrated&&(Dr(c,f).flags|=256),c=rs(c,f),c!==2&&(f=ho,ho=$,f!==null&&ai(f)),c}function ai(c){ho===null?ho=c:ho.push.apply(ho,c)}function ns(c){for(var f=c;;){if(f.flags&16384){var $=f.updateQueue;if($!==null&&($=$.stores,$!==null))for(var M=0;M<$.length;M++){var N=$[M],G=N.getSnapshot;N=N.value;try{if(!Xi(G(),N))return!1}catch{return!1}}}if($=f.child,f.subtreeFlags&16384&&$!==null)$.return=f,f=$;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ml(c,f){for(f&=~Iu,f&=~oc,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var $=31-Lo(f),M=1<<$;c[$]=-1,f&=~M}}function Ja(c){if(Ln&6)throw Error(l(327));lc();var f=Vc(c,0);if(!(f&1))return Vn(c,zi()),null;var $=rs(c,f);if(c.tag!==0&&$===2){var M=dl(c);M!==0&&(f=M,$=an(c,M))}if($===1)throw $=Kl,Dr(c,0),Ml(c,f),Vn(c,zi()),$;if($===6)throw Error(l(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,rh(c,ho),Vn(c,zi()),null}function Bt(c){xo!==null&&xo.tag===0&&!(Ln&6)&&lc();var f=Ln;Ln|=1;var $=Cn.transition,M=Zn;try{if(Cn.transition=null,Zn=1,c)return c()}finally{Zn=M,Cn.transition=$,Ln=f,!(Ln&6)&&qo()}}function Ma(){qs=Oi.current,fn(Oi)}function Dr(c,f){c.finishedWork=null,c.finishedLanes=0;var $=c.timeoutHandle;if($!==ht&&(c.timeoutHandle=ht,Je($)),Lr!==null)for($=Lr.return;$!==null;){var M=$;switch(wi(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Ua();break;case 3:Xc(),fn(pi),fn(nr),gn();break;case 5:_i(M);break;case 4:Xc();break;case 13:fn(Ye);break;case 19:fn(Ye);break;case 10:Ha(M.type._context);break;case 22:case 23:Ma()}$=$.return}if(br=c,Lr=c=no(c.current,null),Wr=qs=f,Wi=0,Kl=null,Iu=oc=Au=0,ho=Fs=null,Qr!==null){for(f=0;f<Qr.length;f++)if($=Qr[f],M=$.interleaved,M!==null){$.interleaved=null;var N=M.next,G=$.pending;if(G!==null){var se=G.next;G.next=N,M.next=se}$.pending=M}Qr=null}return c}function Oc(c,f){do{var $=Lr;try{if(oo(),Nn.current=wc,bs){for(var M=In.memoizedState;M!==null;){var N=M.queue;N!==null&&(N.pending=null),M=M.next}bs=!1}if(sr=0,Ns=Rr=In=null,To=!1,ba=0,yi.current=null,$===null||$.return===null){Wi=1,Kl=f,Lr=null;break}e:{var G=c,se=$.return,xe=$,je=f;if(f=Wr,xe.flags|=32768,je!==null&&typeof je=="object"&&typeof je.then=="function"){var vt=je,Gt=xe,en=Gt.tag;if(!(Gt.mode&1)&&(en===0||en===11||en===15)){var dn=Gt.alternate;dn?(Gt.updateQueue=dn.updateQueue,Gt.memoizedState=dn.memoizedState,Gt.lanes=dn.lanes):(Gt.updateQueue=null,Gt.memoizedState=null)}var ln=Bd(se);if(ln!==null){ln.flags&=-257,sa(ln,se,xe,G,f),ln.mode&1&&tc(G,vt,f),f=ln,je=vt;var rn=f.updateQueue;if(rn===null){var Tr=new Set;Tr.add(je),f.updateQueue=Tr}else rn.add(je);break e}else{if(!(f&1)){tc(G,vt,f),nh();break e}je=Error(l(426))}}else if(Ci&&xe.mode&1){var _t=Bd(se);if(_t!==null){!(_t.flags&65536)&&(_t.flags|=256),sa(_t,se,xe,G,f),Tc(je);break e}}G=je,Wi!==4&&(Wi=2),Fs===null?Fs=[G]:Fs.push(G),je=Wa(je,xe),xe=se;do{switch(xe.tag){case 3:xe.flags|=65536,f&=-f,xe.lanes|=f;var Se=Cc(xe,je,f);mi(xe,Se);break e;case 1:G=je;var Me=xe.type,Ke=xe.stateNode;if(!(xe.flags&128)&&(typeof Me.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&($o===null||!$o.has(Ke)))){xe.flags|=65536,f&=-f,xe.lanes|=f;var Lt=Mc(xe,G,f);mi(xe,Lt);break e}}xe=xe.return}while(xe!==null)}Jl($)}catch(Jt){f=Jt,Lr===$&&$!==null&&(Lr=$=$.return);continue}break}while(!0)}function ad(){var c=la.current;return la.current=wc,c===null?wc:c}function nh(){(Wi===0||Wi===3||Wi===2)&&(Wi=4),br===null||!(Au&268435455)&&!(oc&268435455)||Ml(br,Wr)}function rs(c,f){var $=Ln;Ln|=2;var M=ad();br===c&&Wr===f||Dr(c,f);do try{$s();break}catch(N){Oc(c,N)}while(!0);if(oo(),Ln=$,la.current=M,Lr!==null)throw Error(l(261));return br=null,Wr=0,Wi}function $s(){for(;Lr!==null;)eo(Lr)}function Rh(){for(;Lr!==null&&!zl();)eo(Lr)}function eo(c){var f=oh(c.alternate,c,qs);c.memoizedProps=c.pendingProps,f===null?Jl(c):Lr=f,yi.current=null}function Jl(c){var f=c;do{var $=f.alternate;if(c=f.return,f.flags&32768){if($=Qc($,f),$!==null){$.flags&=32767,Lr=$;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Wi=6,Lr=null;return}}else if($=Xp($,f,qs),$!==null){Lr=$;return}if(f=f.sibling,f!==null){Lr=f;return}Lr=f=c}while(f!==null);Wi===0&&(Wi=5)}function rh(c,f){var $=Zn,M=Cn.transition;try{Cn.transition=null,Zn=1,ih(c,f,$)}finally{Cn.transition=M,Zn=$}return null}function ih(c,f,$){do lc();while(xo!==null);if(Ln&6)throw Error(l(327));var M=c.finishedWork,N=c.finishedLanes;if(M===null)return null;if(c.finishedWork=null,c.finishedLanes=0,M===c.current)throw Error(l(177));c.callbackNode=null,c.callbackPriority=0;var G=M.lanes|M.childLanes;if(fl(c,G),c===br&&(Lr=br=null,Wr=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||Ka||(Ka=!0,ah(Ls,function(){return lc(),null})),G=(M.flags&15990)!==0,M.subtreeFlags&15990||G){G=Cn.transition,Cn.transition=null;var se=Zn;Zn=1;var xe=Ln;Ln|=4,yi.current=null,xu(c,M),Kp(c,M),ne(c.containerInfo),c.current=M,Yl(M),$i(),Ln=xe,Zn=se,Cn.transition=G}else c.current=M;if(Ka&&(Ka=!1,xo=c,ac=N),G=c.pendingLanes,G===0&&($o=null),Yr(M.stateNode),Vn(c,zi()),f!==null)for($=c.onRecoverableError,M=0;M<f.length;M++)$(f[M]);if(ku)throw ku=!1,c=Zs,Zs=null,c;return ac&1&&c.tag!==0&&lc(),G=c.pendingLanes,G&1?c===Ih?Ou++:(Ou=0,Ih=c):Ou=0,qo(),null}function lc(){if(xo!==null){var c=ml(ac),f=Cn.transition,$=Zn;try{if(Cn.transition=null,Zn=16>c?16:c,xo===null)var M=!1;else{if(c=xo,xo=null,ac=0,Ln&6)throw Error(l(331));var N=Ln;for(Ln|=4,sn=c.current;sn!==null;){var G=sn,se=G.child;if(sn.flags&16){var xe=G.deletions;if(xe!==null){for(var je=0;je<xe.length;je++){var vt=xe[je];for(sn=vt;sn!==null;){var Gt=sn;switch(Gt.tag){case 0:case 11:case 15:aa(8,Gt,G)}var en=Gt.child;if(en!==null)en.return=Gt,sn=en;else for(;sn!==null;){Gt=sn;var dn=Gt.sibling,ln=Gt.return;if(wu(Gt),Gt===vt){sn=null;break}if(dn!==null){dn.return=ln,sn=dn;break}sn=ln}}}var rn=G.alternate;if(rn!==null){var Tr=rn.child;if(Tr!==null){rn.child=null;do{var _t=Tr.sibling;Tr.sibling=null,Tr=_t}while(Tr!==null)}}sn=G}}if(G.subtreeFlags&2064&&se!==null)se.return=G,sn=se;else e:for(;sn!==null;){if(G=sn,G.flags&2048)switch(G.tag){case 0:case 11:case 15:aa(9,G,G.return)}var Se=G.sibling;if(Se!==null){Se.return=G.return,sn=Se;break e}sn=G.return}}var Me=c.current;for(sn=Me;sn!==null;){se=sn;var Ke=se.child;if(se.subtreeFlags&2064&&Ke!==null)Ke.return=se,sn=Ke;else e:for(se=Me;sn!==null;){if(xe=sn,xe.flags&2048)try{switch(xe.tag){case 0:case 11:case 15:cs(9,xe)}}catch(Jt){to(xe,xe.return,Jt)}if(xe===se){sn=null;break e}var Lt=xe.sibling;if(Lt!==null){Lt.return=xe.return,sn=Lt;break e}sn=xe.return}}if(Ln=N,qo(),Hl&&typeof Hl.onPostCommitFiberRoot=="function")try{Hl.onPostCommitFiberRoot(Do,c)}catch{}M=!0}return M}finally{Zn=$,Cn.transition=f}}return!1}function wo(c,f,$){f=Wa($,f),f=Cc(c,f,1),_l(c,f),f=Ki(),c=Us(c,1),c!==null&&(pl(c,1,f),Vn(c,f))}function to(c,f,$){if(c.tag===3)wo(c,c,$);else for(;f!==null;){if(f.tag===3){wo(f,c,$);break}else if(f.tag===1){var M=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&($o===null||!$o.has(M))){c=Wa($,c),c=Mc(f,c,1),_l(f,c),c=Ki(),f=Us(f,1),f!==null&&(pl(f,1,c),Vn(f,c));break}}f=f.return}}function Lu(c,f,$){var M=c.pingCache;M!==null&&M.delete(f),f=Ki(),c.pingedLanes|=c.suspendedLanes&$,br===c&&(Wr&$)===$&&(Wi===4||Wi===3&&(Wr&130023424)===Wr&&500>zi()-od?Dr(c,0):Iu|=$),Vn(c,f)}function sh(c,f){f===0&&(c.mode&1?(f=rr,rr<<=1,!(rr&130023424)&&(rr=4194304)):f=1);var $=Ki();c=Us(c,f),c!==null&&(pl(c,f,$),Vn(c,$))}function Qa(c){var f=c.memoizedState,$=0;f!==null&&($=f.retryLane),sh(c,$)}function Du(c,f){var $=0;switch(c.tag){case 13:var M=c.stateNode,N=c.memoizedState;N!==null&&($=N.retryLane);break;case 19:M=c.stateNode;break;default:throw Error(l(314))}M!==null&&M.delete(f),sh(c,$)}var oh;oh=function(c,f,$){if(c!==null)if(c.memoizedProps!==f.pendingProps||pi.current)Zr=!0;else{if(!(c.lanes&$)&&!(f.flags&128))return Zr=!1,Yp(c,f,$);Zr=!!(c.flags&131072)}else Zr=!1,Ci&&f.flags&1048576&&vl(f,ya,f.index);switch(f.lanes=0,f.tag){case 2:var M=f.type;c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps;var N=Xr(f,nr.current);ii(f,$),N=Fr(null,f,M,c,N,$);var G=Bo();return f.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Fi(M)?(G=!0,Yu(f)):G=!1,f.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Yh(f),N.updater=mp,f.stateNode=N,N._reactInternals=f,Ku(f,M,c,$),f=So(null,f,M,!0,G,$)):(f.tag=0,Ci&&G&&Jh(f),vi(null,f,N,$),f=f.child),f;case 16:M=f.elementType;e:{switch(c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,N=M._init,M=N(M._payload),f.type=M,N=f.tag=Al(M),c=Ri(M,c),N){case 0:f=uo(null,f,M,c,$);break e;case 1:f=Ic(null,f,M,c,$);break e;case 11:f=Mi(null,f,M,c,$);break e;case 14:f=ki(null,f,M,Ri(M.type,c),$);break e}throw Error(l(306,M,""))}return f;case 0:return M=f.type,N=f.pendingProps,N=f.elementType===M?N:Ri(M,N),uo(c,f,M,N,$);case 1:return M=f.type,N=f.pendingProps,N=f.elementType===M?N:Ri(M,N),Ic(c,f,M,N,$);case 3:e:{if(Pd(f),c===null)throw Error(l(387));M=f.pendingProps,G=f.memoizedState,N=G.element,vu(c,f),yu(f,M,null,$);var se=f.memoizedState;if(M=se.element,Fe&&G.isDehydrated)if(G={element:M,isDehydrated:!1,cache:se.cache,transitions:se.transitions},f.updateQueue.baseState=G,f.memoizedState=G,f.flags&256){N=Error(l(423)),f=Fd(c,f,M,$,N);break e}else if(M!==N){N=Error(l(424)),f=Fd(c,f,M,$,N);break e}else for(Fe&&(hr=gt(f.stateNode.containerInfo),gi=f,Ci=!0,Wl=null,ea=!1),$=Ec(f,null,M,$),f.child=$;$;)$.flags=$.flags&-3|4096,$=$.sibling;else{if(Th(),M===N){f=ts(c,f,$);break e}vi(c,f,M,$)}f=f.child}return f;case 5:return Od(f),c===null&&Su(f),M=f.type,N=f.pendingProps,G=c!==null?c.memoizedProps:null,se=N.children,Xe(M,N)?se=null:G!==null&&Xe(M,G)&&(f.flags|=32),Fo(c,f),vi(c,f,se,$),f.child;case 6:return c===null&&Su(f),null;case 13:return Mn(c,f,$);case 4:return jl(f,f.stateNode.containerInfo),M=f.pendingProps,c===null?f.child=Sc(f,null,M,$):vi(c,f,M,$),f.child;case 11:return M=f.type,N=f.pendingProps,N=f.elementType===M?N:Ri(M,N),Mi(c,f,M,N,$);case 7:return vi(c,f,f.pendingProps,$),f.child;case 8:return vi(c,f,f.pendingProps.children,$),f.child;case 12:return vi(c,f,f.pendingProps.children,$),f.child;case 10:e:{if(M=f.type._context,N=f.pendingProps,G=f.memoizedProps,se=N.value,_u(f,M,se),G!==null)if(Xi(G.value,se)){if(G.children===N.children&&!pi.current){f=ts(c,f,$);break e}}else for(G=f.child,G!==null&&(G.return=f);G!==null;){var xe=G.dependencies;if(xe!==null){se=G.child;for(var je=xe.firstContext;je!==null;){if(je.context===M){if(G.tag===1){je=vs(-1,$&-$),je.tag=2;var vt=G.updateQueue;if(vt!==null){vt=vt.shared;var Gt=vt.pending;Gt===null?je.next=je:(je.next=Gt.next,Gt.next=je),vt.pending=je}}G.lanes|=$,je=G.alternate,je!==null&&(je.lanes|=$),fi(G.return,$,f),xe.lanes|=$;break}je=je.next}}else if(G.tag===10)se=G.type===f.type?null:G.child;else if(G.tag===18){if(se=G.return,se===null)throw Error(l(341));se.lanes|=$,xe=se.alternate,xe!==null&&(xe.lanes|=$),fi(se,$,f),se=G.sibling}else se=G.child;if(se!==null)se.return=G;else for(se=G;se!==null;){if(se===f){se=null;break}if(G=se.sibling,G!==null){G.return=se.return,se=G;break}se=se.return}G=se}vi(c,f,N.children,$),f=f.child}return f;case 9:return N=f.type,M=f.pendingProps.children,ii(f,$),N=zn(N),M=M(N),f.flags|=1,vi(c,f,M,$),f.child;case 14:return M=f.type,N=Ri(M,f.pendingProps),N=Ri(M.type,N),ki(c,f,M,N,$);case 15:return Ac(c,f,f.type,f.pendingProps,$);case 17:return M=f.type,N=f.pendingProps,N=f.elementType===M?N:Ri(M,N),c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,Fi(M)?(c=!0,Yu(f)):c=!1,ii(f,$),Ff(f,M,N),Ku(f,M,N,$),So(null,f,M,!0,c,$);case 19:return Gr(c,f,$);case 22:return Po(c,f,$)}throw Error(l(156,f.tag))};function ah(c,f){return za(c,f)}function po(c,f,$,M){this.tag=c,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(c,f,$,M){return new po(c,f,$,M)}function Nu(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Al(c){if(typeof c=="function")return Nu(c)?1:0;if(c!=null){if(c=c.$$typeof,c===w)return 11;if(c===O)return 14}return 2}function no(c,f){var $=c.alternate;return $===null?($=zs(c.tag,f,c.key,c.mode),$.elementType=c.elementType,$.type=c.type,$.stateNode=c.stateNode,$.alternate=c,c.alternate=$):($.pendingProps=f,$.type=c.type,$.flags=0,$.subtreeFlags=0,$.deletions=null),$.flags=c.flags&14680064,$.childLanes=c.childLanes,$.lanes=c.lanes,$.child=c.child,$.memoizedProps=c.memoizedProps,$.memoizedState=c.memoizedState,$.updateQueue=c.updateQueue,f=c.dependencies,$.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},$.sibling=c.sibling,$.index=c.index,$.ref=c.ref,$}function qa(c,f,$,M,N,G){var se=2;if(M=c,typeof c=="function")Nu(c)&&(se=1);else if(typeof c=="string")se=5;else e:switch(c){case m:return Aa($.children,N,G,f);case _:se=8,N|=8;break;case v:return c=zs(12,$,f,N|2),c.elementType=v,c.lanes=G,c;case A:return c=zs(13,$,f,N),c.elementType=A,c.lanes=G,c;case k:return c=zs(19,$,f,N),c.elementType=k,c.lanes=G,c;case L:return Ql($,N,G,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case S:se=10;break e;case x:se=9;break e;case w:se=11;break e;case O:se=14;break e;case D:se=16,M=null;break e}throw Error(l(130,c==null?c:typeof c,""))}return f=zs(se,$,f,N),f.elementType=c,f.type=M,f.lanes=G,f}function Aa(c,f,$,M){return c=zs(7,c,M,f),c.lanes=$,c}function Ql(c,f,$,M){return c=zs(22,c,M,f),c.elementType=L,c.lanes=$,c.stateNode={},c}function is(c,f,$){return c=zs(6,c,null,f),c.lanes=$,c}function Co(c,f,$){return f=zs(4,c.children!==null?c.children:[],c.key,f),f.lanes=$,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function kh(c,f,$,M,N){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ht,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=du(0),this.expirationTimes=du(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=du(0),this.identifierPrefix=M,this.onRecoverableError=N,Fe&&(this.mutableSourceEagerHydrationData=null)}function ld(c,f,$,M,N,G,se,xe,je){return c=new kh(c,f,$,xe,je),f===1?(f=1,G===!0&&(f|=8)):f=0,G=zs(3,null,null,f),c.current=G,G.stateNode=c,G.memoizedState={element:M,isDehydrated:$,cache:null,transitions:null},Yh(G),c}function Za(c){if(!c)return wr;c=c._reactInternals;e:{if(K(c)!==c||c.tag!==1)throw Error(l(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Fi(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(l(171))}if(c.tag===1){var $=c.type;if(Fi($))return vc(c,$,f)}return f}function ql(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(l(188)):(c=Object.keys(c).join(","),Error(l(268,c)));return c=ie(f),c===null?null:c.stateNode}function ud(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var $=c.retryLane;c.retryLane=$!==0&&$<f?$:f}}function Lc(c,f){ud(c,f),(c=c.alternate)&&ud(c,f)}function Jp(c){return c=ie(c),c===null?null:c.stateNode}function E(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var f=Ki();ua(c,134217728,f),Lc(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=Ki(),$=Es(c);ua(c,$,f),Lc(c,$)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var $=Ui(f.pendingLanes);$!==0&&(qn(f,$|1),Vn(f,zi()),!(Ln&6)&&(Ru(),qo()))}break;case 13:var M=Ki();Bt(function(){return ua(c,1,M)}),Lc(c,1)}},t.batchedUpdates=function(c,f){var $=Ln;Ln|=1;try{return c(f)}finally{Ln=$,Ln===0&&(Ru(),fu&&qo())}},t.createComponentSelector=function(c){return{$$typeof:Mu,value:c}},t.createContainer=function(c,f,$,M,N,G,se){return ld(c,f,!1,null,$,M,N,G,se)},t.createHasPseudoClassSelector=function(c){return{$$typeof:ic,value:c}},t.createHydrationContainer=function(c,f,$,M,N,G,se,xe,je){return c=ld($,M,!0,c,N,G,se,xe,je),c.context=Za(null),$=c.current,M=Ki(),N=Es($),G=vs(M,N),G.callback=f??null,_l($,G),c.current.lanes=N,pl(c,N,M),Vn(c,M),c},t.createPortal=function(c,f,$){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:M==null?null:""+M,children:c,containerInfo:f,implementation:$}},t.createRoleSelector=function(c){return{$$typeof:Eo,value:c}},t.createTestNameSelector=function(c){return{$$typeof:Xa,value:c}},t.createTextSelector=function(c){return{$$typeof:Ss,value:c}},t.deferredUpdates=function(c){var f=Zn,$=Cn.transition;try{return Cn.transition=null,Zn=16,c()}finally{Zn=f,Cn.transition=$}},t.discreteUpdates=function(c,f,$,M,N){var G=Zn,se=Cn.transition;try{return Cn.transition=null,Zn=1,c(f,$,M,N)}finally{Zn=G,Cn.transition=se,Ln===0&&Ru()}},t.findAllNodes=yp,t.findBoundingRects=function(c,f){if(!$t)throw Error(l(363));f=yp(c,f),c=[];for(var $=0;$<f.length;$++)c.push(Te(f[$]));for(f=c.length-1;0<f;f--){$=c[f];for(var M=$.x,N=M+$.width,G=$.y,se=G+$.height,xe=f-1;0<=xe;xe--)if(f!==xe){var je=c[xe],vt=je.x,Gt=vt+je.width,en=je.y,dn=en+je.height;if(M>=vt&&G>=en&&N<=Gt&&se<=dn){c.splice(f,1);break}else if(M!==vt||$.width!==je.width||dn<G||en>se){if(!(G!==en||$.height!==je.height||Gt<M||vt>N)){vt>M&&(je.width+=vt-M,je.x=M),Gt<N&&(je.width=N-vt),c.splice(f,1);break}}else{en>G&&(je.height+=en-G,je.y=G),dn<se&&(je.height=se-en),c.splice(f,1);break}}}return c},t.findHostInstance=ql,t.findHostInstanceWithNoPortals=function(c){return c=re(c),c=c!==null?oe(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return ql(c)},t.flushControlled=function(c){var f=Ln;Ln|=1;var $=Cn.transition,M=Zn;try{Cn.transition=null,Zn=1,c()}finally{Zn=M,Cn.transition=$,Ln=f,Ln===0&&(Ru(),qo())}},t.flushPassiveEffects=lc,t.flushSync=Bt,t.focusWithin=function(c,f){if(!$t)throw Error(l(363));for(c=Zc(c),f=sc(c,f),f=Array.from(f),c=0;c<f.length;){var $=f[c++];if(!ke($)){if($.tag===5&&ft($.stateNode))return!0;for($=$.child;$!==null;)f.push($),$=$.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Zn},t.getFindAllNodesFailureDescription=function(c,f){if(!$t)throw Error(l(363));var $=0,M=[];c=[Zc(c),0];for(var N=0;N<c.length;){var G=c[N++],se=c[N++],xe=f[se];if((G.tag!==5||!ke(G))&&(Qs(G,xe)&&(M.push(Ya(xe)),se++,se>$&&($=se)),se<f.length))for(G=G.child;G!==null;)c.push(G,se),G=G.sibling}if($<f.length){for(c=[];$<f.length;$++)c.push(Ya(f[$]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return me(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:Jp,findFiberByHostInstance:c.findFiberByHostInstance||E,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{Do=f.inject(c),Hl=f}catch{}c=!!f.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,f,$,M){if(!$t)throw Error(l(363));c=yp(c,f);var N=xt(c,$,M).disconnect;return{disconnect:function(){N()}}},t.registerMutableSourceForHydration=function(c,f){var $=f._getVersion;$=$(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,$]:c.mutableSourceEagerHydrationData.push(f,$)},t.runWithPriority=function(c,f){var $=Zn;try{return Zn=c,f()}finally{Zn=$}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,f,$,M){var N=f.current,G=Ki(),se=Es(N);return $=Za($),f.context===null?f.context=$:f.pendingContext=$,f=vs(G,se),f.payload={element:c},M=M===void 0?null:M,M!==null&&(f.callback=M),_l(N,f),c=ua(N,se,G),c!==null&&Kh(c,N,se),se},t};q8.exports=Hhe;var Ghe=q8.exports;const Whe=bb(Ghe);var Z8={exports:{}},e9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(j,Z){var ne=j.length;j.push(Z);e:for(;0<ne;){var ae=ne-1>>>1,_e=j[ae];if(0<s(_e,Z))j[ae]=Z,j[ne]=_e,ne=ae;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var Z=j[0],ne=j.pop();if(ne!==Z){j[0]=ne;e:for(var ae=0,_e=j.length,Le=_e>>>1;ae<Le;){var we=2*(ae+1)-1,Xe=j[we],Re=we+1,qe=j[Re];if(0>s(Xe,ne))Re<_e&&0>s(qe,Xe)?(j[ae]=qe,j[Re]=ne,ae=Re):(j[ae]=Xe,j[we]=ne,ae=we);else if(Re<_e&&0>s(qe,ne))j[ae]=qe,j[Re]=ne,ae=Re;else break e}}return Z}function s(j,Z){var ne=j.sortIndex-Z.sortIndex;return ne!==0?ne:j.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],d=[],m=1,_=null,v=3,S=!1,x=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(j){for(var Z=t(d);Z!==null;){if(Z.callback===null)i(d);else if(Z.startTime<=j)i(d),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(d)}}function L(j){if(w=!1,D(j),!x)if(t(h)!==null)x=!0,me(z);else{var Z=t(d);Z!==null&&Ae(L,Z.startTime-j)}}function z(j,Z){x=!1,w&&(w=!1,k(P),P=-1),S=!0;var ne=v;try{for(D(Z),_=t(h);_!==null&&(!(_.expirationTime>Z)||j&&!re());){var ae=_.callback;if(typeof ae=="function"){_.callback=null,v=_.priorityLevel;var _e=ae(_.expirationTime<=Z);Z=n.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),D(Z)}else i(h);_=t(h)}if(_!==null)var Le=!0;else{var we=t(d);we!==null&&Ae(L,we.startTime-Z),Le=!1}return Le}finally{_=null,v=ne,S=!1}}var H=!1,U=null,P=-1,K=5,ee=-1;function re(){return!(n.unstable_now()-ee<K)}function ie(){if(U!==null){var j=n.unstable_now();ee=j;var Z=!0;try{Z=U(!0,j)}finally{Z?de():(H=!1,U=null)}}else H=!1}var de;if(typeof O=="function")de=function(){O(ie)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ce=oe.port2;oe.port1.onmessage=ie,de=function(){ce.postMessage(null)}}else de=function(){A(ie,0)};function me(j){U=j,H||(H=!0,de())}function Ae(j,Z){P=A(function(){j(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){x||S||(x=!0,me(z))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var ne=v;v=Z;try{return j()}finally{v=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,Z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ne=v;v=j;try{return Z()}finally{v=ne}},n.unstable_scheduleCallback=function(j,Z,ne){var ae=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ae+ne:ae):ne=ae,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ne+_e,j={id:m++,callback:Z,priorityLevel:j,startTime:ne,expirationTime:_e,sortIndex:-1},ne>ae?(j.sortIndex=ne,e(d,j),t(h)===null&&j===t(d)&&(w?(k(P),P=-1):w=!0,Ae(L,ne-ae))):(j.sortIndex=_e,e(h,j),x||S||(x=!0,me(z))),j},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(j){var Z=v;return function(){var ne=v;v=Z;try{return j.apply(this,arguments)}finally{v=ne}}}})(e9);Z8.exports=e9;var _4=Z8.exports;const Vhe=n=>typeof n=="object"&&typeof n.then=="function",Hy=[];function t9(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}function n9(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const o of Hy)if(t9(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return i.lifespan&&i.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,i.lifespan)),o.response;if(!t)throw o.promise}const s={keys:e,equal:i.equal,remove:()=>{const o=Hy.indexOf(s);o!==-1&&Hy.splice(o,1)},promise:(Vhe(n)?n:n(...e)).then(o=>{s.response=o,i.lifespan&&i.lifespan>0&&(s.timeout=setTimeout(s.remove,i.lifespan))}).catch(o=>s.error=o)};if(Hy.push(s),!t)throw s.promise}const jhe=(n,e,t)=>n9(n,e,!1,t),Xhe=(n,e,t)=>void n9(n,e,!0,t),Yhe=n=>{if(n===void 0||n.length===0)Hy.splice(0,Hy.length);else{const e=Hy.find(t=>t9(n,t.keys,t.equal));e&&e.remove()}},r9={};function Khe(n,e){function t(m,{args:_=[],attach:v,...S},x){let w=`${m[0].toUpperCase()}${m.slice(1)}`,A;if(m==="primitive"){if(S.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const k=S.object;A=LE(k,{type:m,root:x,attach:v,primitive:!0})}else{const k=r9[w];if(!k)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(_))throw new Error("R3F: The args prop must be an array!");A=LE(new k(..._),{type:m,root:x,attach:v,memoizedProps:{args:_}})}return A.__r3f.attach===void 0&&(A instanceof kv?A.__r3f.attach="geometry":A instanceof _v&&(A.__r3f.attach="material")),w!=="inject"&&N2(A,S),A}function i(m,_){let v=!1;if(_){var S,x;(S=_.__r3f)!=null&&S.attach?D2(m,_,_.__r3f.attach):_.isObject3D&&m.isObject3D&&(m.add(_),v=!0),v||(x=m.__r3f)==null||x.objects.push(_),_.__r3f||LE(_,{}),_.__r3f.parent=m,_D(_),Y1(_)}}function s(m,_,v){let S=!1;if(_){var x,w;if((x=_.__r3f)!=null&&x.attach)D2(m,_,_.__r3f.attach);else if(_.isObject3D&&m.isObject3D){_.parent=m,_.dispatchEvent({type:"added"}),m.dispatchEvent({type:"childadded",child:_});const A=m.children.filter(O=>O!==_),k=A.indexOf(v);m.children=[...A.slice(0,k),_,...A.slice(k)],S=!0}S||(w=m.__r3f)==null||w.objects.push(_),_.__r3f||LE(_,{}),_.__r3f.parent=m,_D(_),Y1(_)}}function o(m,_,v=!1){m&&[...m].forEach(S=>l(_,S,v))}function l(m,_,v){if(_){var S,x,w;if(_.__r3f&&(_.__r3f.parent=null),(S=m.__r3f)!=null&&S.objects&&(m.__r3f.objects=m.__r3f.objects.filter(L=>L!==_)),(x=_.__r3f)!=null&&x.attach)S4(m,_,_.__r3f.attach);else if(_.isObject3D&&m.isObject3D){var A;m.remove(_),(A=_.__r3f)!=null&&A.root&&rde(YM(_),_)}const O=(w=_.__r3f)==null?void 0:w.primitive,D=!O&&(v===void 0?_.dispose!==null:v);if(!O){var k;o((k=_.__r3f)==null?void 0:k.objects,_,D),o(_.children,_,D)}if(delete _.__r3f,D&&_.dispose&&_.type!=="Scene"){const L=()=>{try{_.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?_4.unstable_scheduleCallback(_4.unstable_IdlePriority,L):L()}Y1(m)}}function u(m,_,v,S){var x;const w=(x=m.__r3f)==null?void 0:x.parent;if(!w)return;const A=t(_,v,m.__r3f.root);if(m.children){for(const k of m.children)k.__r3f&&i(A,k);m.children=m.children.filter(k=>!k.__r3f)}m.__r3f.objects.forEach(k=>i(A,k)),m.__r3f.objects=[],m.__r3f.autoRemovedBeforeAppend||l(w,m),A.parent&&(A.__r3f.autoRemovedBeforeAppend=!0),i(w,A),A.raycast&&A.__r3f.eventCount&&YM(A).getState().internal.interaction.push(A),[S,S.alternate].forEach(k=>{k!==null&&(k.stateNode=A,k.ref&&(typeof k.ref=="function"?k.ref(A):k.ref.current=A))})}const h=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Whe({createInstance:t,removeChild:l,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(m,_)=>{if(!_)return;const v=m.getState().scene;v.__r3f&&(v.__r3f.root=m,i(v,_))},removeChildFromContainer:(m,_)=>{_&&l(m.getState().scene,_)},insertInContainerBefore:(m,_,v)=>{if(!_||!v)return;const S=m.getState().scene;S.__r3f&&s(S,_,v)},getRootHostContext:()=>null,getChildHostContext:m=>m,finalizeInitialChildren(m){var _;return!!((_=m==null?void 0:m.__r3f)!=null?_:{}).handlers},prepareUpdate(m,_,v,S){var x;if(((x=m==null?void 0:m.__r3f)!=null?x:{}).primitive&&S.object&&S.object!==m)return[!0];{const{args:A=[],children:k,...O}=S,{args:D=[],children:L,...z}=v;if(!Array.isArray(A))throw new Error("R3F: the args prop must be an array!");if(A.some((U,P)=>U!==D[P]))return[!0];const H=s9(m,O,z,!0);return H.changes.length?[!1,H]:null}},commitUpdate(m,[_,v],S,x,w,A){_?u(m,S,w,A):N2(m,v)},commitMount(m,_,v,S){var x;const w=(x=m.__r3f)!=null?x:{};m.raycast&&w.handlers&&w.eventCount&&YM(m).getState().internal.interaction.push(m)},getPublicInstance:m=>m,prepareForCommit:()=>null,preparePortalMount:m=>LE(m.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(m){var _;const{attach:v,parent:S}=(_=m.__r3f)!=null?_:{};v&&S&&S4(S,m,v),m.isObject3D&&(m.visible=!1),Y1(m)},unhideInstance(m,_){var v;const{attach:S,parent:x}=(v=m.__r3f)!=null?v:{};S&&x&&D2(x,m,S),(m.isObject3D&&_.visible==null||_.visible)&&(m.visible=!0),Y1(m)},createTextInstance:h,hideTextInstance:h,unhideTextInstance:h,getCurrentEventPriority:()=>e?e():o$.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&qd.fun(performance.now)?performance.now:qd.fun(Date.now)?Date.now:()=>0,scheduleTimeout:qd.fun(setTimeout)?setTimeout:void 0,cancelTimeout:qd.fun(clearTimeout)?clearTimeout:void 0}),applyProps:N2}}var v4,y4;const L2=n=>"colorSpace"in n||"outputColorSpace"in n,Jhe=()=>{var n;return(n=r9.ColorManagement)!=null?n:null};typeof window<"u"&&((v4=window.document)!=null&&v4.createElement||((y4=window.navigator)==null?void 0:y4.product)==="ReactNative")?he.useLayoutEffect:he.useEffect;class Qhe extends he.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Qhe.getDerivedStateFromError=()=>({error:!0});const i9="__default",b4=new Map,qhe=n=>n&&!!n.memoized&&!!n.changes;function YM(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const qd={obj:n=>n===Object(n)&&!qd.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(qd.str(n)||qd.num(n))return n===e;const o=qd.obj(n);if(o&&i==="reference")return n===e;const l=qd.arr(n);if(l&&t==="reference")return n===e;if((l||o)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(o&&t==="shallow"&&i==="shallow"){for(u in s?e:n)if(!qd.equ(n[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:n)if(n[u]!==e[u])return!1;if(qd.und(u)){if(l&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Zhe(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function LE(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function gD(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),s=i.pop();return t=i.reduce((o,l)=>o[l],n),{target:t,key:s}}else return{target:t,key:e}}const T4=/-\d+$/;function D2(n,e,t){if(qd.str(t)){if(T4.test(t)){const o=t.replace(T4,""),{target:l,key:u}=gD(n,o);Array.isArray(l[u])||(l[u]=[])}const{target:i,key:s}=gD(n,t);e.__r3f.previousAttach=i[s],i[s]=e}else e.__r3f.previousAttach=t(n,e)}function S4(n,e,t){var i,s;if(qd.str(t)){const{target:o,key:l}=gD(n,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function s9(n,{children:e,key:t,ref:i,...s},{children:o,key:l,ref:u,...h}={},d=!1){var m;const _=(m=n==null?void 0:n.__r3f)!=null?m:{},v=Object.entries(s),S=[];if(d){const w=Object.keys(h);for(let A=0;A<w.length;A++)s.hasOwnProperty(w[A])||v.unshift([w[A],i9+"remove"])}v.forEach(([w,A])=>{var k;if((k=n.__r3f)!=null&&k.primitive&&w==="object"||qd.equ(A,h[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return S.push([w,A,!0,[]]);let O=[];w.includes("-")&&(O=w.split("-")),S.push([w,A,!1,O]);for(const D in s){const L=s[D];D.startsWith(`${w}-`)&&S.push([D,L,!1,D.split("-")])}});const x={...s};return _.memoizedProps&&_.memoizedProps.args&&(x.args=_.memoizedProps.args),_.memoizedProps&&_.memoizedProps.attach&&(x.attach=_.memoizedProps.attach),{memoized:x,changes:S}}const ede=typeof process<"u"&&!1;function N2(n,e){var t,i,s;const o=(t=n.__r3f)!=null?t:{},l=o.root,u=(i=l==null||l.getState==null?void 0:l.getState())!=null?i:{},{memoized:h,changes:d}=qhe(e)?e:s9(n,e),m=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=h);for(let v=0;v<d.length;v++){let[S,x,w,A]=d[v];if(L2(n)){const L="srgb",z="srgb-linear";S==="encoding"?(S="colorSpace",x=x===3001?L:z):S==="outputEncoding"&&(S="outputColorSpace",x=x===3001?L:z)}let k=n,O=k[S];if(A.length&&(O=A.reduce((D,L)=>D[L],n),!(O&&O.set))){const[D,...L]=A.reverse();k=L.reverse().reduce((z,H)=>z[H],n),S=D}if(x===i9+"remove")if(k.constructor){let D=b4.get(k.constructor);D||(D=new k.constructor,b4.set(k.constructor,D)),x=D[S]}else x=0;if(w)x?o.handlers[S]=x:delete o.handlers[S],o.eventCount=Object.keys(o.handlers).length;else if(O&&O.set&&(O.copy||O instanceof BM)){if(Array.isArray(x))O.fromArray?O.fromArray(x):O.set(...x);else if(O.copy&&x&&x.constructor&&(ede?O.constructor.name===x.constructor.name:O.constructor===x.constructor))O.copy(x);else if(x!==void 0){const D=O instanceof gc;!D&&O.setScalar?O.setScalar(x):O instanceof BM&&x instanceof BM?O.mask=x.mask:O.set(x),!Jhe()&&!u.linear&&D&&O.convertSRGBToLinear()}}else if(k[S]=x,k[S]instanceof $f&&k[S].format===SB&&k[S].type===sV){const D=k[S];L2(D)&&L2(u.gl)?D.colorSpace=u.gl.outputColorSpace:D.encoding=u.gl.outputEncoding}Y1(n)}if(o.parent&&n.raycast&&m!==o.eventCount){const v=YM(n).getState().internal,S=v.interaction.indexOf(n);S>-1&&v.interaction.splice(S,1),o.eventCount&&v.interaction.push(n)}return!(d.length===1&&d[0][0]==="onUpdate")&&d.length&&(s=n.__r3f)!=null&&s.parent&&_D(n),n}function Y1(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function _D(n){n.onUpdate==null||n.onUpdate(n)}function tde(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return o$.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return o$.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return o$.ContinuousEventPriority;default:return o$.DefaultEventPriority}}function nde(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function rde(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{nde(t.capturedMap,e,i,s)})}const E4=new WeakMap;function o9(n,e){return function(t,...i){let s=E4.get(t);return s||(s=new t,E4.set(t,s)),n&&n(s),Promise.all(i.map(o=>new Promise((l,u)=>s.load(o,h=>{h.scene&&Object.assign(h,Zhe(h.scene)),l(h)},e,h=>u(new Error(`Could not load ${o}: ${h==null?void 0:h.message}`)))))).finally(()=>s.dispose==null?void 0:s.dispose())}}function zx(n,e,t,i){const s=Array.isArray(e)?e:[e],o=jhe(o9(t,i),[n,...s],{equal:qd.equ});return Array.isArray(e)?o:o[0]}zx.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return Xhe(o9(t),[n,...i])};zx.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Yhe([n,...t])};const ide=new Map,{reconciler:sde,applyProps:rxe}=Khe(ide,tde);sde.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:he.version});function $4(n,e){if(e===Fq)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===JL||e===oV){let t=n.getIndex();if(t===null){const l=[],u=n.getAttribute("position");if(u!==void 0){for(let h=0;h<u.count;h++)l.push(h);n.setIndex(l),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(t)if(e===JL)for(let l=1;l<=i;l++)s.push(t.getX(0)),s.push(t.getX(l)),s.push(t.getX(l+1));else for(let l=0;l<i;l++)l%2===0?(s.push(t.getX(l)),s.push(t.getX(l+1)),s.push(t.getX(l+2))):(s.push(t.getX(l+2)),s.push(t.getX(l+1)),s.push(t.getX(l)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=n.clone();return o.setIndex(s),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const ode=parseInt(vB.replace(/\D+/g,""));class _P extends $b{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new hde(t)}),this.register(function(t){return new yde(t)}),this.register(function(t){return new bde(t)}),this.register(function(t){return new Tde(t)}),this.register(function(t){return new pde(t)}),this.register(function(t){return new fde(t)}),this.register(function(t){return new mde(t)}),this.register(function(t){return new gde(t)}),this.register(function(t){return new cde(t)}),this.register(function(t){return new _de(t)}),this.register(function(t){return new dde(t)}),this.register(function(t){return new vde(t)}),this.register(function(t){return new lde(t)}),this.register(function(t){return new Sde(t)}),this.register(function(t){return new Ede(t)})}load(e,t,i,s){const o=this;let l;this.resourcePath!==""?l=this.resourcePath:this.path!==""?l=this.path:l=Qy.extractUrlBase(e),this.manager.itemStart(e);const u=function(d){s?s(d):console.error(d),o.manager.itemError(e),o.manager.itemEnd(e)},h=new OA(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(d){try{o.parse(d,l,function(m){t(m),o.manager.itemEnd(e)},u)}catch(m){u(m)}},i,u)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let o;const l={},u={};if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Qy.decodeText(new Uint8Array(e.slice(0,4)))===a9){try{l[Qi.KHR_BINARY_GLTF]=new $de(e)}catch(m){s&&s(m);return}o=JSON.parse(l[Qi.KHR_BINARY_GLTF].content)}else o=JSON.parse(Qy.decodeText(new Uint8Array(e)));else o=e;if(o.asset===void 0||o.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new Bde(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const m=this.pluginCallbacks[d](h);u[m.name]=m,l[m.name]=!0}if(o.extensionsUsed)for(let d=0;d<o.extensionsUsed.length;++d){const m=o.extensionsUsed[d],_=o.extensionsRequired||[];switch(m){case Qi.KHR_MATERIALS_UNLIT:l[m]=new ude;break;case Qi.KHR_DRACO_MESH_COMPRESSION:l[m]=new xde(o,this.dracoLoader);break;case Qi.KHR_TEXTURE_TRANSFORM:l[m]=new wde;break;case Qi.KHR_MESH_QUANTIZATION:l[m]=new Cde;break;default:_.indexOf(m)>=0&&u[m]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+m+'".')}}h.setExtensions(l),h.setPlugins(u),h.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,o){i.parse(e,t,s,o)})}}function ade(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Qi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class lde{constructor(e){this.parser=e,this.name=Qi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const o=t.json,h=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let d;const m=new gc(16777215);h.color!==void 0&&m.fromArray(h.color);const _=h.range!==void 0?h.range:0;switch(h.type){case"directional":d=new iee(m),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new nee(m),d.distance=_;break;case"spot":d=new eee(m),d.distance=_,h.spot=h.spot||{},h.spot.innerConeAngle=h.spot.innerConeAngle!==void 0?h.spot.innerConeAngle:0,h.spot.outerConeAngle=h.spot.outerConeAngle!==void 0?h.spot.outerConeAngle:Math.PI/4,d.angle=h.spot.outerConeAngle,d.penumbra=1-h.spot.innerConeAngle/h.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+h.type)}return d.position.set(0,0,0),d.decay=2,tv(d,h),h.intensity!==void 0&&(d.intensity=h.intensity),d.name=t.createUniqueName(h.name||"light_"+e),s=Promise.resolve(d),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,o=i.json.nodes[e],u=(o.extensions&&o.extensions[this.name]||{}).light;return u===void 0?null:this._loadLight(u).then(function(h){return i._getNodeRef(t.cache,u,h)})}}class ude{constructor(){this.name=Qi.KHR_MATERIALS_UNLIT}getMaterialType(){return uT}extendParams(e,t,i){const s=[];e.color=new gc(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const l=o.baseColorFactor;e.color.fromArray(l),e.opacity=l[3]}o.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",o.baseColorTexture,3001))}return Promise.all(s)}}class cde{constructor(e){this.parser=e,this.name=Qi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}}class hde{constructor(e){this.parser=e,this.name=Qi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ov}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const u=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Bl(u,u)}return Promise.all(o)}}class dde{constructor(e){this.parser=e,this.name=Qi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ov}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(o)}}class pde{constructor(e){this.parser=e,this.name=Qi.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ov}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new gc(0,0,0),t.sheenRoughness=0,t.sheen=1;const l=s.extensions[this.name];return l.sheenColorFactor!==void 0&&t.sheenColor.fromArray(l.sheenColorFactor),l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&o.push(i.assignTexture(t,"sheenColorMap",l.sheenColorTexture,3001)),l.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(o)}}class fde{constructor(e){this.parser=e,this.name=Qi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ov}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&o.push(i.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(o)}}class mde{constructor(e){this.parser=e,this.name=Qi.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ov}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&o.push(i.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;const u=l.attenuationColor||[1,1,1];return t.attenuationColor=new gc(u[0],u[1],u[2]),Promise.all(o)}}class gde{constructor(e){this.parser=e,this.name=Qi.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ov}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class _de{constructor(e){this.parser=e,this.name=Qi.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ov}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&o.push(i.assignTexture(t,"specularIntensityMap",l.specularTexture));const u=l.specularColorFactor||[1,1,1];return t.specularColor=new gc(u[0],u[1],u[2]),l.specularColorTexture!==void 0&&o.push(i.assignTexture(t,"specularColorMap",l.specularColorTexture,3001)),Promise.all(o)}}class vde{constructor(e){this.parser=e,this.name=Qi.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ov}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.anisotropyStrength!==void 0&&(t.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(t.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&o.push(i.assignTexture(t,"anisotropyMap",l.anisotropyTexture)),Promise.all(o)}}class yde{constructor(e){this.parser=e,this.name=Qi.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const o=s.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,l)}}class bde{constructor(e){this.parser=e,this.name=Qi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let h=i.textureLoader;if(u.uri){const d=i.options.manager.getHandler(u.uri);d!==null&&(h=d)}return this.detectSupport().then(function(d){if(d)return i.loadTextureImage(e,l.source,h);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Tde{constructor(e){this.parser=e,this.name=Qi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let h=i.textureLoader;if(u.uri){const d=i.options.manager.getHandler(u.uri);d!==null&&(h=d)}return this.detectSupport().then(function(d){if(d)return i.loadTextureImage(e,l.source,h);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Sde{constructor(e){this.name=Qi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],o=this.parser.getDependency("buffer",s.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(u){const h=s.byteOffset||0,d=s.byteLength||0,m=s.count,_=s.byteStride,v=new Uint8Array(u,h,d);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(m,_,v,s.mode,s.filter).then(function(S){return S.buffer}):l.ready.then(function(){const S=new ArrayBuffer(m*_);return l.decodeGltfBuffer(new Uint8Array(S),m,_,v,s.mode,s.filter),S})})}else return null}}class Ede{constructor(e){this.name=Qi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const d of s.primitives)if(d.mode!==lm.TRIANGLES&&d.mode!==lm.TRIANGLE_STRIP&&d.mode!==lm.TRIANGLE_FAN&&d.mode!==void 0)return null;const l=i.extensions[this.name].attributes,u=[],h={};for(const d in l)u.push(this.parser.getDependency("accessor",l[d]).then(m=>(h[d]=m,h[d])));return u.length<1?null:(u.push(this.parser.createNodeMesh(e)),Promise.all(u).then(d=>{const m=d.pop(),_=m.isGroup?m.children:[m],v=d[0].count,S=[];for(const x of _){const w=new qi,A=new Mt,k=new Vo,O=new Mt(1,1,1),D=new DZ(x.geometry,x.material,v);for(let L=0;L<v;L++)h.TRANSLATION&&A.fromBufferAttribute(h.TRANSLATION,L),h.ROTATION&&k.fromBufferAttribute(h.ROTATION,L),h.SCALE&&O.fromBufferAttribute(h.SCALE,L),D.setMatrixAt(L,w.compose(A,k,O));for(const L in h)L!=="TRANSLATION"&&L!=="ROTATION"&&L!=="SCALE"&&x.geometry.setAttribute(L,h[L]);Vu.prototype.copy.call(D,x),this.parser.assignFinalMaterial(D),S.push(D)}return m.isGroup?(m.clear(),m.add(...S),m):S[0]}))}}const a9="glTF",DE=12,x4={JSON:1313821514,BIN:5130562};class $de{constructor(e){this.name=Qi.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,DE);if(this.header={magic:Qy.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==a9)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-DE,s=new DataView(e,DE);let o=0;for(;o<i;){const l=s.getUint32(o,!0);o+=4;const u=s.getUint32(o,!0);if(o+=4,u===x4.JSON){const h=new Uint8Array(e,DE+o,l);this.content=Qy.decodeText(h)}else if(u===x4.BIN){const h=DE+o;this.body=e.slice(h,h+l)}o+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class xde{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Qi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,o=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,u={},h={},d={};for(const m in l){const _=vD[m]||m.toLowerCase();u[_]=l[m]}for(const m in e.attributes){const _=vD[m]||m.toLowerCase();if(l[m]!==void 0){const v=i.accessors[e.attributes[m]],S=wT[v.componentType];d[_]=S.name,h[_]=v.normalized===!0}}return t.getDependency("bufferView",o).then(function(m){return new Promise(function(_){s.decodeDracoFile(m,function(v){for(const S in v.attributes){const x=v.attributes[S],w=h[S];w!==void 0&&(x.normalized=w)}_(v)},u,d)})})}}class wde{constructor(){this.name=Qi.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Cde{constructor(){this.name=Qi.KHR_MESH_QUANTIZATION}}class l9 extends Ox{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s*3+s;for(let l=0;l!==s;l++)t[l]=i[o+l];return t}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=u*2,d=u*3,m=s-t,_=(i-t)/m,v=_*_,S=v*_,x=e*d,w=x-d,A=-2*S+3*v,k=S-v,O=1-A,D=k-v+_;for(let L=0;L!==u;L++){const z=l[w+L+u],H=l[w+L+h]*m,U=l[x+L+u],P=l[x+L]*m;o[L]=O*z+D*H+A*U+k*P}return o}}const Mde=new Vo;class Ade extends l9{interpolate_(e,t,i,s){const o=super.interpolate_(e,t,i,s);return Mde.fromArray(o).normalize().toArray(o),o}}const lm={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},wT={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},w4={9728:K$,9729:yB,9984:kq,9985:Lq,9986:Oq,9987:bB},C4={33071:r$,33648:KL,10497:Y$},B2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vD={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...ode>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},U_={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ide={CUBICSPLINE:void 0,LINEAR:BT,STEP:J$},P2={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Rde(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new IB({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:kA})),n.DefaultMaterial}function uy(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function tv(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function kde(n,e,t){let i=!1,s=!1,o=!1;for(let d=0,m=e.length;d<m;d++){const _=e[d];if(_.POSITION!==void 0&&(i=!0),_.NORMAL!==void 0&&(s=!0),_.COLOR_0!==void 0&&(o=!0),i&&s&&o)break}if(!i&&!s&&!o)return Promise.resolve(n);const l=[],u=[],h=[];for(let d=0,m=e.length;d<m;d++){const _=e[d];if(i){const v=_.POSITION!==void 0?t.getDependency("accessor",_.POSITION):n.attributes.position;l.push(v)}if(s){const v=_.NORMAL!==void 0?t.getDependency("accessor",_.NORMAL):n.attributes.normal;u.push(v)}if(o){const v=_.COLOR_0!==void 0?t.getDependency("accessor",_.COLOR_0):n.attributes.color;h.push(v)}}return Promise.all([Promise.all(l),Promise.all(u),Promise.all(h)]).then(function(d){const m=d[0],_=d[1],v=d[2];return i&&(n.morphAttributes.position=m),s&&(n.morphAttributes.normal=_),o&&(n.morphAttributes.color=v),n.morphTargetsRelative=!0,n})}function Ode(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Lde(n){let e;const t=n.extensions&&n.extensions[Qi.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+F2(t.attributes):e=n.indices+":"+F2(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+F2(n.targets[i]);return e}function F2(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function yD(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Dde(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Nde=new qi;class Bde{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ade,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,o=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||s&&o<98?this.textureLoader=new qZ(this.options.manager):this.textureLoader=new see(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new OA(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(l){const u={scene:l[0][s.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:s.asset,parser:i,userData:{}};uy(o,u,s),tv(u,s),Promise.all(i._invokeAll(function(h){return h.afterRoot&&h.afterRoot(u)})).then(function(){e(u)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,o=t.length;s<o;s++){const l=t[s].joints;for(let u=0,h=l.length;u<h;u++)e[l[u]].isBone=!0}for(let s=0,o=e.length;s<o;s++){const l=e[s];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(i[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),o=(l,u)=>{const h=this.associations.get(l);h!=null&&this.associations.set(u,h);for(const[d,m]of l.children.entries())o(m,u.children[d])};return o(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const o=e(t[s]);o&&i.push(o)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":s=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(o,l){return i.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Qi.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(o,l){i.load(Qy.resolveURL(t.uri,s.path),o,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,o=t.byteOffset||0;return i.slice(o,o+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const l=B2[s.type],u=wT[s.componentType],h=s.normalized===!0,d=new u(s.count*l);return Promise.resolve(new xf(d,l,h))}const o=[];return s.bufferView!==void 0?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),s.sparse!==void 0&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then(function(l){const u=l[0],h=B2[s.type],d=wT[s.componentType],m=d.BYTES_PER_ELEMENT,_=m*h,v=s.byteOffset||0,S=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,x=s.normalized===!0;let w,A;if(S&&S!==_){const k=Math.floor(v/S),O="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+k+":"+s.count;let D=t.cache.get(O);D||(w=new d(u,k*S,s.count*S/m),D=new IZ(w,S/m),t.cache.add(O,D)),A=new CB(D,h,v%S/m,x)}else u===null?w=new d(s.count*h):w=new d(u,v,s.count*h),A=new xf(w,h,x);if(s.sparse!==void 0){const k=B2.SCALAR,O=wT[s.sparse.indices.componentType],D=s.sparse.indices.byteOffset||0,L=s.sparse.values.byteOffset||0,z=new O(l[1],D,s.sparse.count*k),H=new d(l[2],L,s.sparse.count*h);u!==null&&(A=new xf(A.array.slice(),A.itemSize,A.normalized));for(let U=0,P=z.length;U<P;U++){const K=z[U];if(A.setX(K,H[U*h]),h>=2&&A.setY(K,H[U*h+1]),h>=3&&A.setZ(K,H[U*h+2]),h>=4&&A.setW(K,H[U*h+3]),h>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){const t=this.json,i=this.options,o=t.textures[e].source,l=t.images[o];let u=this.textureLoader;if(l.uri){const h=i.manager.getHandler(l.uri);h!==null&&(u=h)}return this.loadTextureImage(e,o,u)}loadTextureImage(e,t,i){const s=this,o=this.json,l=o.textures[e],u=o.images[t],h=(u.uri||u.bufferView)+":"+l.sampler;if(this.textureCache[h])return this.textureCache[h];const d=this.loadImageSource(t,i).then(function(m){m.flipY=!1,m.name=l.name||u.name||"",m.name===""&&typeof u.uri=="string"&&u.uri.startsWith("data:image/")===!1&&(m.name=u.uri);const v=(o.samplers||{})[l.sampler]||{};return m.magFilter=w4[v.magFilter]||yB,m.minFilter=w4[v.minFilter]||bB,m.wrapS=C4[v.wrapS]||Y$,m.wrapT=C4[v.wrapT]||Y$,s.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[h]=d,d}loadImageSource(e,t){const i=this,s=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(_=>_.clone());const l=s.images[e],u=self.URL||self.webkitURL;let h=l.uri||"",d=!1;if(l.bufferView!==void 0)h=i.getDependency("bufferView",l.bufferView).then(function(_){d=!0;const v=new Blob([_],{type:l.mimeType});return h=u.createObjectURL(v),h});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(h).then(function(_){return new Promise(function(v,S){let x=v;t.isImageBitmapLoader===!0&&(x=function(w){const A=new $f(w);A.needsUpdate=!0,v(A)}),t.load(Qy.resolveURL(_,o.path),x,void 0,S)})}).then(function(_){return d===!0&&u.revokeObjectURL(h),_.userData.mimeType=l.mimeType||Dde(l.uri),_}).catch(function(_){throw console.error("THREE.GLTFLoader: Couldn't load texture",h),_});return this.sourceCache[e]=m,m}assignTexture(e,t,i,s){const o=this;return this.getDependency("texture",i.index).then(function(l){if(!l)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(l=l.clone(),l.channel=i.texCoord),o.extensions[Qi.KHR_TEXTURE_TRANSFORM]){const u=i.extensions!==void 0?i.extensions[Qi.KHR_TEXTURE_TRANSFORM]:void 0;if(u){const h=o.associations.get(l);l=o.extensions[Qi.KHR_TEXTURE_TRANSFORM].extendTexture(l,u),o.associations.set(l,h)}}return s!==void 0&&("colorSpace"in l?l.colorSpace=s===3001?"srgb":"srgb-linear":l.encoding=s),e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){const u="PointsMaterial:"+i.uuid;let h=this.cache.get(u);h||(h=new gV,_v.prototype.copy.call(h,i),h.color.copy(i.color),h.map=i.map,h.sizeAttenuation=!1,this.cache.add(u,h)),i=h}else if(e.isLine){const u="LineBasicMaterial:"+i.uuid;let h=this.cache.get(u);h||(h=new mV,_v.prototype.copy.call(h,i),h.color.copy(i.color),h.map=i.map,this.cache.add(u,h)),i=h}if(s||o||l){let u="ClonedMaterial:"+i.uuid+":";s&&(u+="derivative-tangents:"),o&&(u+="vertex-colors:"),l&&(u+="flat-shading:");let h=this.cache.get(u);h||(h=i.clone(),o&&(h.vertexColors=!0),l&&(h.flatShading=!0),s&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(u,h),this.associations.set(h,this.associations.get(i))),i=h}e.material=i}getMaterialType(){return IB}loadMaterial(e){const t=this,i=this.json,s=this.extensions,o=i.materials[e];let l;const u={},h=o.extensions||{},d=[];if(h[Qi.KHR_MATERIALS_UNLIT]){const _=s[Qi.KHR_MATERIALS_UNLIT];l=_.getMaterialType(),d.push(_.extendParams(u,o,t))}else{const _=o.pbrMetallicRoughness||{};if(u.color=new gc(1,1,1),u.opacity=1,Array.isArray(_.baseColorFactor)){const v=_.baseColorFactor;u.color.fromArray(v),u.opacity=v[3]}_.baseColorTexture!==void 0&&d.push(t.assignTexture(u,"map",_.baseColorTexture,3001)),u.metalness=_.metallicFactor!==void 0?_.metallicFactor:1,u.roughness=_.roughnessFactor!==void 0?_.roughnessFactor:1,_.metallicRoughnessTexture!==void 0&&(d.push(t.assignTexture(u,"metalnessMap",_.metallicRoughnessTexture)),d.push(t.assignTexture(u,"roughnessMap",_.metallicRoughnessTexture))),l=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),d.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,u)})))}o.doubleSided===!0&&(u.side=Aq);const m=o.alphaMode||P2.OPAQUE;if(m===P2.BLEND?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,m===P2.MASK&&(u.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&l!==uT&&(d.push(t.assignTexture(u,"normalMap",o.normalTexture)),u.normalScale=new Bl(1,1),o.normalTexture.scale!==void 0)){const _=o.normalTexture.scale;u.normalScale.set(_,_)}return o.occlusionTexture!==void 0&&l!==uT&&(d.push(t.assignTexture(u,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(u.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&l!==uT&&(u.emissive=new gc().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&l!==uT&&d.push(t.assignTexture(u,"emissiveMap",o.emissiveTexture,3001)),Promise.all(d).then(function(){const _=new l(u);return o.name&&(_.name=o.name),tv(_,o),t.associations.set(_,{materials:e}),o.extensions&&uy(s,_,o),_})}createUniqueName(e){const t=_o.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function o(u){return i[Qi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(u,t).then(function(h){return M4(h,u,t)})}const l=[];for(let u=0,h=e.length;u<h;u++){const d=e[u],m=Lde(d),_=s[m];if(_)l.push(_.promise);else{let v;d.extensions&&d.extensions[Qi.KHR_DRACO_MESH_COMPRESSION]?v=o(d):v=M4(new kv,d,t),s[m]={primitive:d,promise:v},l.push(v)}}return Promise.all(l)}loadMesh(e){const t=this,i=this.json,s=this.extensions,o=i.meshes[e],l=o.primitives,u=[];for(let h=0,d=l.length;h<d;h++){const m=l[h].material===void 0?Rde(this.cache):this.getDependency("material",l[h].material);u.push(m)}return u.push(t.loadGeometries(l)),Promise.all(u).then(function(h){const d=h.slice(0,h.length-1),m=h[h.length-1],_=[];for(let S=0,x=m.length;S<x;S++){const w=m[S],A=l[S];let k;const O=d[S];if(A.mode===lm.TRIANGLES||A.mode===lm.TRIANGLE_STRIP||A.mode===lm.TRIANGLE_FAN||A.mode===void 0)k=o.isSkinnedMesh===!0?new kZ(w,O):new wI(w,O),k.isSkinnedMesh===!0&&k.normalizeSkinWeights(),A.mode===lm.TRIANGLE_STRIP?k.geometry=$4(k.geometry,oV):A.mode===lm.TRIANGLE_FAN&&(k.geometry=$4(k.geometry,JL));else if(A.mode===lm.LINES)k=new NZ(w,O);else if(A.mode===lm.LINE_STRIP)k=new AB(w,O);else if(A.mode===lm.LINE_LOOP)k=new BZ(w,O);else if(A.mode===lm.POINTS)k=new PZ(w,O);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(k.geometry.morphAttributes).length>0&&Ode(k,o),k.name=t.createUniqueName(o.name||"mesh_"+e),tv(k,o),A.extensions&&uy(s,k,A),t.assignFinalMaterial(k),_.push(k)}for(let S=0,x=_.length;S<x;S++)t.associations.set(_[S],{meshes:e,primitives:S});if(_.length===1)return o.extensions&&uy(s,_[0],o),_[0];const v=new u2;o.extensions&&uy(s,v,o),t.associations.set(v,{meshes:e});for(let S=0,x=_.length;S<x;S++)v.add(_[S]);return v})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new wB(sZ.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new dV(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),tv(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,o=t.joints.length;s<o;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const o=s.pop(),l=s,u=[],h=[];for(let d=0,m=l.length;d<m;d++){const _=l[d];if(_){u.push(_);const v=new qi;o!==null&&v.fromArray(o.array,d*16),h.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[d])}return new MB(u,h)})}loadAnimation(e){const i=this.json.animations[e],s=i.name?i.name:"animation_"+e,o=[],l=[],u=[],h=[],d=[];for(let m=0,_=i.channels.length;m<_;m++){const v=i.channels[m],S=i.samplers[v.sampler],x=v.target,w=x.node,A=i.parameters!==void 0?i.parameters[S.input]:S.input,k=i.parameters!==void 0?i.parameters[S.output]:S.output;x.node!==void 0&&(o.push(this.getDependency("node",w)),l.push(this.getDependency("accessor",A)),u.push(this.getDependency("accessor",k)),h.push(S),d.push(x))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(h),Promise.all(d)]).then(function(m){const _=m[0],v=m[1],S=m[2],x=m[3],w=m[4],A=[];for(let k=0,O=_.length;k<O;k++){const D=_[k],L=v[k],z=S[k],H=x[k],U=w[k];if(D===void 0)continue;D.updateMatrix();let P;switch(U_[U.path]){case U_.weights:P=q$;break;case U_.rotation:P=db;break;case U_.position:case U_.scale:default:P=Z$;break}const K=D.name?D.name:D.uuid,ee=H.interpolation!==void 0?Ide[H.interpolation]:BT,re=[];U_[U.path]===U_.weights?D.traverse(function(de){de.morphTargetInfluences&&re.push(de.name?de.name:de.uuid)}):re.push(K);let ie=z.array;if(z.normalized){const de=yD(ie.constructor),oe=new Float32Array(ie.length);for(let ce=0,me=ie.length;ce<me;ce++)oe[ce]=ie[ce]*de;ie=oe}for(let de=0,oe=re.length;de<oe;de++){const ce=new P(re[de]+"."+U_[U.path],L.array,ie,ee);H.interpolation==="CUBICSPLINE"&&(ce.createInterpolant=function(Ae){const j=this instanceof db?Ade:l9;return new j(this.times,this.values,this.getValueSize()/3,Ae)},ce.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),A.push(ce)}}return new VZ(s,void 0,A)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(o){const l=i._getNodeRef(i.meshCache,s.mesh,o);return s.weights!==void 0&&l.traverse(function(u){if(u.isMesh)for(let h=0,d=s.weights.length;h<d;h++)u.morphTargetInfluences[h]=s.weights[h]}),l})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],o=i._loadNodeShallow(e),l=[],u=s.children||[];for(let d=0,m=u.length;d<m;d++)l.push(i.getDependency("node",u[d]));const h=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([o,Promise.all(l),h]).then(function(d){const m=d[0],_=d[1],v=d[2];v!==null&&m.traverse(function(S){S.isSkinnedMesh&&S.bind(v,Nde)});for(let S=0,x=_.length;S<x;S++)m.add(_[S]);return m})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const o=t.nodes[e],l=o.name?s.createUniqueName(o.name):"",u=[],h=s._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});return h&&u.push(h),o.camera!==void 0&&u.push(s.getDependency("camera",o.camera).then(function(d){return s._getNodeRef(s.cameraCache,o.camera,d)})),s._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){u.push(d)}),this.nodeCache[e]=Promise.all(u).then(function(d){let m;if(o.isBone===!0?m=new pV:d.length>1?m=new u2:d.length===1?m=d[0]:m=new Vu,m!==d[0])for(let _=0,v=d.length;_<v;_++)m.add(d[_]);if(o.name&&(m.userData.name=o.name,m.name=l),tv(m,o),o.extensions&&uy(i,m,o),o.matrix!==void 0){const _=new qi;_.fromArray(o.matrix),m.applyMatrix4(_)}else o.translation!==void 0&&m.position.fromArray(o.translation),o.rotation!==void 0&&m.quaternion.fromArray(o.rotation),o.scale!==void 0&&m.scale.fromArray(o.scale);return s.associations.has(m)||s.associations.set(m,{}),s.associations.get(m).nodes=e,m}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,o=new u2;i.name&&(o.name=s.createUniqueName(i.name)),tv(o,i),i.extensions&&uy(t,o,i);const l=i.nodes||[],u=[];for(let h=0,d=l.length;h<d;h++)u.push(s.getDependency("node",l[h]));return Promise.all(u).then(function(h){for(let m=0,_=h.length;m<_;m++)o.add(h[m]);const d=m=>{const _=new Map;for(const[v,S]of s.associations)(v instanceof _v||v instanceof $f)&&_.set(v,S);return m.traverse(v=>{const S=s.associations.get(v);S!=null&&_.set(v,S)}),_};return s.associations=d(o),o})}}function Pde(n,e,t){const i=e.attributes,s=new a_;if(i.POSITION!==void 0){const u=t.json.accessors[i.POSITION],h=u.min,d=u.max;if(h!==void 0&&d!==void 0){if(s.set(new Mt(h[0],h[1],h[2]),new Mt(d[0],d[1],d[2])),u.normalized){const m=yD(wT[u.componentType]);s.min.multiplyScalar(m),s.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=e.targets;if(o!==void 0){const u=new Mt,h=new Mt;for(let d=0,m=o.length;d<m;d++){const _=o[d];if(_.POSITION!==void 0){const v=t.json.accessors[_.POSITION],S=v.min,x=v.max;if(S!==void 0&&x!==void 0){if(h.setX(Math.max(Math.abs(S[0]),Math.abs(x[0]))),h.setY(Math.max(Math.abs(S[1]),Math.abs(x[1]))),h.setZ(Math.max(Math.abs(S[2]),Math.abs(x[2]))),v.normalized){const w=yD(wT[v.componentType]);h.multiplyScalar(w)}u.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(u)}n.boundingBox=s;const l=new l0;s.getCenter(l.center),l.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=l}function M4(n,e,t){const i=e.attributes,s=[];function o(l,u){return t.getDependency("accessor",l).then(function(h){n.setAttribute(u,h)})}for(const l in i){const u=vD[l]||l.toLowerCase();u in n.attributes||s.push(o(i[l],u))}if(e.indices!==void 0&&!n.index){const l=t.getDependency("accessor",e.indices).then(function(u){n.setIndex(u)});s.push(l)}return tv(n,e),Pde(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?kde(n,e.targets,t):n})}const U2=new WeakMap;class Fde extends $b{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const o=new OA(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,l=>{const u={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(l,u).then(t).catch(s)},i,s)}decodeDracoFile(e,t,i,s){const o={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,o).then(t)}decodeGeometry(e,t){for(const h in t.attributeTypes){const d=t.attributeTypes[h];d.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[h]=d.name)}const i=JSON.stringify(t);if(U2.has(e)){const h=U2.get(e);if(h.key===i)return h.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const o=this.workerNextTaskID++,l=e.byteLength,u=this._getWorker(o,l).then(h=>(s=h,new Promise((d,m)=>{s._callbacks[o]={resolve:d,reject:m},s.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))).then(h=>this._createGeometry(h.geometry));return u.catch(()=>!0).then(()=>{s&&o&&this._releaseTask(s,o)}),U2.set(e,{key:i,promise:u}),u}_createGeometry(e){const t=new kv;e.index&&t.setIndex(new xf(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],o=s.name,l=s.array,u=s.itemSize;t.setAttribute(o,new xf(l,u))}return t}_loadLibrary(e,t){const i=new OA(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,o)=>{i.load(e,s,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const o=Ude.toString(),l=["/* draco decoder */",s,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(o){const l=o.data;switch(l.type){case"decode":s._callbacks[l.id].resolve(l);break;case"error":s._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,o){return s._taskLoad>o._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Ude(){let n,e;onmessage=function(l){const u=l.data;switch(u.type){case"init":n=u.decoderConfig,e=new Promise(function(m){n.onModuleLoaded=function(_){m({draco:_})},DracoDecoderModule(n)});break;case"decode":const h=u.buffer,d=u.taskConfig;e.then(m=>{const _=m.draco,v=new _.Decoder,S=new _.DecoderBuffer;S.Init(new Int8Array(h),h.byteLength);try{const x=t(_,v,S,d),w=x.attributes.map(A=>A.array.buffer);x.index&&w.push(x.index.array.buffer),self.postMessage({type:"decode",id:u.id,geometry:x},w)}catch(x){console.error(x),self.postMessage({type:"error",id:u.id,error:x.message})}finally{_.destroy(S),_.destroy(v)}});break}};function t(l,u,h,d){const m=d.attributeIDs,_=d.attributeTypes;let v,S;const x=u.GetEncodedGeometryType(h);if(x===l.TRIANGULAR_MESH)v=new l.Mesh,S=u.DecodeBufferToMesh(h,v);else if(x===l.POINT_CLOUD)v=new l.PointCloud,S=u.DecodeBufferToPointCloud(h,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!S.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+S.error_msg());const w={index:null,attributes:[]};for(const A in m){const k=self[_[A]];let O,D;if(d.useUniqueIDs)D=m[A],O=u.GetAttributeByUniqueId(v,D);else{if(D=u.GetAttributeId(v,l[m[A]]),D===-1)continue;O=u.GetAttribute(v,D)}w.attributes.push(s(l,u,v,A,k,O))}return x===l.TRIANGULAR_MESH&&(w.index=i(l,u,v)),l.destroy(v),w}function i(l,u,h){const m=h.num_faces()*3,_=m*4,v=l._malloc(_);u.GetTrianglesUInt32Array(h,_,v);const S=new Uint32Array(l.HEAPF32.buffer,v,m).slice();return l._free(v),{array:S,itemSize:1}}function s(l,u,h,d,m,_){const v=_.num_components(),x=h.num_points()*v,w=x*m.BYTES_PER_ELEMENT,A=o(l,m),k=l._malloc(w);u.GetAttributeDataArrayForAllPoints(h,_,A,w,k);const O=new m(l.HEAPF32.buffer,k,x).slice();return l._free(k),{name:d,array:O,itemSize:v}}function o(l,u){switch(u){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}let EC;const z2=()=>{if(EC)return EC;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=n;WebAssembly.validate(t)&&(s=e);let o;const l=WebAssembly.instantiate(u(s),{}).then(_=>{o=_.instance,o.exports.__wasm_call_ctors()});function u(_){const v=new Uint8Array(_.length);for(let x=0;x<_.length;++x){const w=_.charCodeAt(x);v[x]=w>96?w-71:w>64?w-65:w>47?w+4:w>46?63:62}let S=0;for(let x=0;x<_.length;++x)v[S++]=v[x]<60?i[v[x]]:(v[x]-60)*64+v[++x];return v.buffer.slice(0,S)}function h(_,v,S,x,w,A){const k=o.exports.sbrk,O=S+3&-4,D=k(O*x),L=k(w.length),z=new Uint8Array(o.exports.memory.buffer);z.set(w,L);const H=_(D,S,x,L,w.length);if(H===0&&A&&A(D,O,x),v.set(z.subarray(D,D+S*x)),k(D-k(0)),H!==0)throw new Error(`Malformed buffer data: ${H}`)}const d={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},m={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return EC={ready:l,supported:!0,decodeVertexBuffer(_,v,S,x,w){h(o.exports.meshopt_decodeVertexBuffer,_,v,S,x,o.exports[d[w]])},decodeIndexBuffer(_,v,S,x){h(o.exports.meshopt_decodeIndexBuffer,_,v,S,x)},decodeIndexSequence(_,v,S,x){h(o.exports.meshopt_decodeIndexSequence,_,v,S,x)},decodeGltfBuffer(_,v,S,x,w,A){h(o.exports[m[w]],_,v,S,x,o.exports[d[A]])}},EC};let $C=null,u9="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function c9(n,e,t){return i=>{t&&t(i),n&&($C||($C=new Fde),$C.setDecoderPath(typeof n=="string"?n:u9),i.setDRACOLoader($C)),e&&i.setMeshoptDecoder(typeof z2=="function"?z2():z2)}}function vr(n,e=!0,t=!0,i){return zx(_P,n,c9(e,t,i))}vr.preload=(n,e=!0,t=!0,i)=>zx.preload(_P,n,c9(e,t,i));vr.clear=n=>zx.clear(_P,n);vr.setDecoderPath=n=>{u9=n};function zde(n){const{nodes:e}=vr(J8);return[{type:"raw",geometry:e.BASE_FRONT_GRILL_1.geometry,material:e.BASE_FRONT_GRILL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(J8);const h9="/gpu-programming/assets/BASE_LEFT_COVER_1-DGxtL-mQ.glb";function Hde(n){const{nodes:e}=vr(h9);return[{type:"raw",geometry:e.BASE_LEFT_COVER_1.geometry,material:e.BASE_LEFT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(h9);const d9="/gpu-programming/assets/base_link-CxNG3VaF.glb";function Gde(n){const{nodes:e}=vr(d9);return[{type:"raw",geometry:e.base_link.geometry,material:e.base_link.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(d9);const p9="/gpu-programming/assets/BASE_RIGHT_COVER_1-hc0og1we.glb";function Wde(n){const{nodes:e}=vr(p9);return[{type:"raw",geometry:e.BASE_RIGHT_COVER_1.geometry,material:e.BASE_RIGHT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(p9);const f9="/gpu-programming/assets/Battery_1-CK31T6T2.glb";function Vde(n){const{nodes:e}=vr(f9);return[{type:"raw",geometry:e.Battery_1.geometry,material:e.Battery_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(f9);const m9="/gpu-programming/assets/BODY_BASE_CONNECTOR_1-BGiepl-q.glb";function jde(n){const{nodes:e}=vr(m9);return[{type:"raw",geometry:e.BODY_BASE_CONNECTOR_1.geometry,material:e.BODY_BASE_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(m9);const Xde="/gpu-programming/assets/DRIVE_TRACK_LEFT_1-BU9fqrup.glb";vr.preload(Xde);const Yde="/gpu-programming/assets/DRIVE_TRACK_RIGHT_1-inJUmdan.glb";vr.preload(Yde);const g9="/gpu-programming/assets/EYE_LENS_1-dEqRsnM7.glb";function Kde(n){const{nodes:e}=vr(g9);return[{type:"raw",geometry:e.EYE_LENS_1.geometry,material:e.EYE_LENS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(g9);const _9="/gpu-programming/assets/FACE_1-m_5yRlpQ.glb";function Jde(n){const{nodes:e}=vr(_9);return[{type:"raw",geometry:e.FACE_1.geometry,material:e.FACE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(_9);const v9="/gpu-programming/assets/FRONT_LEFT_WHEEL_1-CbTd7ucE.glb";function Qde(n){const{nodes:e}=vr(v9);return[{type:"raw",geometry:e.FRONT_LEFT_WHEEL_1.geometry,material:e.FRONT_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(v9);const y9="/gpu-programming/assets/FRONT_RIGHT_WHEEL_1-DndcS7IV.glb";function qde(n){const{nodes:e}=vr(y9);return[{type:"raw",geometry:e.FRONT_RIGHT_WHEEL_1.geometry,material:e.FRONT_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(y9);const b9="/gpu-programming/assets/HEAD_1-BuuEOSCL.glb";function Zde(n){const{nodes:e}=vr(b9);return[{type:"raw",geometry:e.HEAD_1.geometry,material:e.HEAD_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(b9);const T9="/gpu-programming/assets/HEAD_VENT_LEFT_1-DjAZtO3_.glb";function epe(n){const{nodes:e}=vr(T9);return[{type:"raw",geometry:e.HEAD_VENT_LEFT_1.geometry,material:e.HEAD_VENT_LEFT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(T9);const S9="/gpu-programming/assets/HEAD_VENT_RIGHT_1-BfOCx_V8.glb";function tpe(n){const{nodes:e}=vr(S9);return[{type:"raw",geometry:e.HEAD_VENT_RIGHT_1.geometry,material:e.HEAD_VENT_RIGHT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(S9);const E9="/gpu-programming/assets/LEFT_ARM_1-B8yh6mwG.glb";function npe(n){const{nodes:e}=vr(E9);return[{type:"raw",geometry:e.LEFT_ARM_1.geometry,material:e.LEFT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(E9);const $9="/gpu-programming/assets/LEFT_ARM_CONNECTOR_1-CXrHlUi5.glb";function rpe(n){const{nodes:e}=vr($9);return[{type:"raw",geometry:e.LEFT_ARM_CONNECTOR_1.geometry,material:e.LEFT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload($9);const x9="/gpu-programming/assets/MIDDLE_LEFT_WHEEL_1-BAVTGYOT.glb";function ipe(n){const{nodes:e}=vr(x9);return[{type:"raw",geometry:e.MIDDLE_LEFT_WHEEL_1.geometry,material:e.MIDDLE_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(x9);const w9="/gpu-programming/assets/MIDDLE_RIGHT_WHEEL_1-GMj8YSda.glb";function spe(n){const{nodes:e}=vr(w9);return[{type:"raw",geometry:e.MIDDLE_RIGHT_WHEEL_1.geometry,material:e.MIDDLE_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(w9);const C9="/gpu-programming/assets/NECK_GLOBE_BASE_1-CpAA3cya.glb";function ope(n){const{nodes:e}=vr(C9);return[{type:"raw",geometry:e.NECK_GLOBE_BASE_1.geometry,material:e.NECK_GLOBE_BASE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(C9);const M9="/gpu-programming/assets/REAR_LEFT_WHEEL_1-Ca-hbPaC.glb";function ape(n){const{nodes:e}=vr(M9);return[{type:"raw",geometry:e.REAR_LEFT_WHEEL_1.geometry,material:e.REAR_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(M9);const A9="/gpu-programming/assets/REAR_RIGHT_WHEEL_1-DLUpOsjA.glb";function lpe(n){const{nodes:e}=vr(A9);return[{type:"raw",geometry:e.REAR_RIGHT_WHEEL_1.geometry,material:e.REAR_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(A9);const I9="/gpu-programming/assets/RIGHT_ARM_1-CsUyYnQa.glb";function upe(n){const{nodes:e}=vr(I9);return[{type:"raw",geometry:e.RIGHT_ARM_1.geometry,material:e.RIGHT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(I9);const R9="/gpu-programming/assets/RIGHT_ARM_CONNECTOR_1-Og6IFGgn.glb";function cpe(n){const{nodes:e}=vr(R9);return[{type:"raw",geometry:e.RIGHT_ARM_CONNECTOR_1.geometry,material:e.RIGHT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(R9);const k9="/gpu-programming/assets/Torso_1-Dsttb7Xv.glb";function hpe(n){const{nodes:e}=vr(k9);return[{type:"raw",geometry:e.Torso_1.geometry,material:e.Torso_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(k9);const O9="/gpu-programming/assets/VISOR_GLASS_1-DUgs1YBX.glb";function dpe(n){const{nodes:e}=vr(O9);return[{type:"raw",geometry:e.VISOR_GLASS_1.geometry,material:e.VISOR_GLASS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}vr.preload(O9);const ppe={"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl":zde,"package://misty_description/meshes/BASE_LEFT_COVER_1.stl":Hde,"package://misty_description/meshes/base_link.stl":Gde,"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl":Wde,"package://misty_description/meshes/Battery_1.stl":Vde,"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl":jde,"package://misty_description/meshes/EYE_LENS_1.stl":Kde,"package://misty_description/meshes/FACE_1.stl":Jde,"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl":Qde,"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl":qde,"package://misty_description/meshes/HEAD_1.stl":Zde,"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl":epe,"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl":tpe,"package://misty_description/meshes/LEFT_ARM_1.stl":npe,"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl":rpe,"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl":ipe,"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl":spe,"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl":ope,"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl":ape,"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl":lpe,"package://misty_description/meshes/RIGHT_ARM_1.stl":upe,"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl":cpe,"package://misty_description/meshes/Torso_1.stl":hpe,"package://misty_description/meshes/VISOR_GLASS_1.stl":dpe};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const yS="143",My={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ay={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},L9=0,bD=1,D9=2,fpe=3,N9=0,bR=1,x$=2,Gy=3,s0=0,Gc=1,tp=2,B9=1,mpe=2,op=0,Z0=1,XA=2,TD=3,SD=4,P9=5,Oy=100,F9=101,vP=102,ED=103,$D=104,U9=200,z9=201,H9=202,G9=203,TR=204,SR=205,W9=206,V9=207,j9=208,X9=209,Y9=210,K9=0,J9=1,Q9=2,YA=3,q9=4,Z9=5,e7=6,t7=7,Hx=0,n7=1,r7=2,fg=0,i7=1,s7=2,o7=3,yP=4,a7=5,ER=300,$v=301,xv=302,ox=303,ax=304,bS=306,WT=1e3,ep=1001,lx=1002,fa=1003,KA=1004,gpe=1004,JA=1005,_pe=1005,Xo=1006,bP=1007,vpe=1007,wb=1008,ype=1008,Xh=1009,l7=1010,u7=1011,TP=1012,c7=1013,J0=1014,Qg=1015,mb=1016,h7=1017,d7=1018,vv=1020,p7=1021,f7=1022,Pp=1023,m7=1024,g7=1025,yv=1026,wv=1027,_7=1028,v7=1029,y7=1030,b7=1031,T7=1033,KM=33776,JM=33777,QM=33778,qM=33779,xD=35840,wD=35841,CD=35842,MD=35843,S7=36196,AD=37492,ID=37496,RD=37808,kD=37809,OD=37810,LD=37811,DD=37812,ND=37813,BD=37814,PD=37815,FD=37816,UD=37817,zD=37818,HD=37819,GD=37820,WD=37821,VD=36492,E7=2200,$7=2201,x7=2202,ux=2300,cx=2301,ZM=2302,Wy=2400,Vy=2401,hx=2402,$R=2500,SP=2501,bpe=0,Tpe=1,Spe=2,$m=3e3,Ei=3001,Dv=3200,VT=3201,Cb=0,w7=1,Epe="",Wg="srgb",lv="srgb-linear",$pe=0,eA=7680,xpe=7681,wpe=7682,Cpe=7683,Mpe=34055,Ape=34056,Ipe=5386,Rpe=512,kpe=513,Ope=514,Lpe=515,Dpe=516,Npe=517,Bpe=518,C7=519,dx=35044,Zy=35048,Ppe=35040,Fpe=35045,Upe=35049,zpe=35041,Hpe=35046,Gpe=35050,Wpe=35042,Vpe="100",jD="300 es",QA=1035;class Df{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const i=t.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Sd=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let A4=1234567;const eb=Math.PI/180,px=180/Math.PI;function Cf(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Sd[n&255]+Sd[n>>8&255]+Sd[n>>16&255]+Sd[n>>24&255]+"-"+Sd[e&255]+Sd[e>>8&255]+"-"+Sd[e>>16&15|64]+Sd[e>>24&255]+"-"+Sd[t&63|128]+Sd[t>>8&255]+"-"+Sd[t>>16&255]+Sd[t>>24&255]+Sd[i&255]+Sd[i>>8&255]+Sd[i>>16&255]+Sd[i>>24&255]).toLowerCase()}function Gu(n,e,t){return Math.max(e,Math.min(t,n))}function EP(n,e){return(n%e+e)%e}function jpe(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function Xpe(n,e,t){return n!==e?(t-n)/(e-n):0}function w$(n,e,t){return(1-t)*n+t*e}function Ype(n,e,t,i){return w$(n,e,1-Math.exp(-t*i))}function Kpe(n,e=1){return e-Math.abs(EP(n,e*2)-e)}function Jpe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Qpe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function qpe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Zpe(n,e){return n+Math.random()*(e-n)}function efe(n){return n*(.5-Math.random())}function tfe(n){n!==void 0&&(A4=n);let e=A4+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function nfe(n){return n*eb}function rfe(n){return n*px}function XD(n){return(n&n-1)===0&&n!==0}function M7(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function qA(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function ife(n,e,t,i,s){const o=Math.cos,l=Math.sin,u=o(t/2),h=l(t/2),d=o((e+i)/2),m=l((e+i)/2),_=o((e-i)/2),v=l((e-i)/2),S=o((i-e)/2),x=l((i-e)/2);switch(s){case"XYX":n.set(u*m,h*_,h*v,u*d);break;case"YZY":n.set(h*v,u*m,h*_,u*d);break;case"ZXZ":n.set(h*_,h*v,u*m,u*d);break;case"XZX":n.set(u*m,h*x,h*S,u*d);break;case"YXY":n.set(h*S,u*m,h*x,u*d);break;case"ZYZ":n.set(h*x,h*S,u*m,u*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function sfe(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ofe(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var A7=Object.freeze({__proto__:null,DEG2RAD:eb,RAD2DEG:px,generateUUID:Cf,clamp:Gu,euclideanModulo:EP,mapLinear:jpe,inverseLerp:Xpe,lerp:w$,damp:Ype,pingpong:Kpe,smoothstep:Jpe,smootherstep:Qpe,randInt:qpe,randFloat:Zpe,randFloatSpread:efe,seededRandom:tfe,degToRad:nfe,radToDeg:rfe,isPowerOfTwo:XD,ceilPowerOfTwo:M7,floorPowerOfTwo:qA,setQuaternionFromProperEuler:ife,normalize:ofe,denormalize:sfe});class Dt{constructor(e=0,t=0){Dt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*i-l*s+e.x,this.y=o*s+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class np{constructor(){np.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,s,o,l,u,h,d){const m=this.elements;return m[0]=e,m[1]=s,m[2]=u,m[3]=t,m[4]=o,m[5]=h,m[6]=i,m[7]=l,m[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[3],h=i[6],d=i[1],m=i[4],_=i[7],v=i[2],S=i[5],x=i[8],w=s[0],A=s[3],k=s[6],O=s[1],D=s[4],L=s[7],z=s[2],H=s[5],U=s[8];return o[0]=l*w+u*O+h*z,o[3]=l*A+u*D+h*H,o[6]=l*k+u*L+h*U,o[1]=d*w+m*O+_*z,o[4]=d*A+m*D+_*H,o[7]=d*k+m*L+_*U,o[2]=v*w+S*O+x*z,o[5]=v*A+S*D+x*H,o[8]=v*k+S*L+x*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],d=e[7],m=e[8];return t*l*m-t*u*d-i*o*m+i*u*h+s*o*d-s*l*h}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],d=e[7],m=e[8],_=m*l-u*d,v=u*h-m*o,S=d*o-l*h,x=t*_+i*v+s*S;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=_*w,e[1]=(s*d-m*i)*w,e[2]=(u*i-s*l)*w,e[3]=v*w,e[4]=(m*t-s*h)*w,e[5]=(s*o-u*t)*w,e[6]=S*w,e[7]=(i*h-d*t)*w,e[8]=(l*t-i*o)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,o,l,u){const h=Math.cos(o),d=Math.sin(o);return this.set(i*h,i*d,-i*(h*l+d*u)+l+e,-s*d,s*h,-s*(-d*l+h*u)+u+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),s=this.elements,o=s[0],l=s[3],u=s[6],h=s[1],d=s[4],m=s[7];return s[0]=t*o+i*h,s[3]=t*l+i*d,s[6]=t*u+i*m,s[1]=-i*o+t*h,s[4]=-i*l+t*d,s[7]=-i*u+t*m,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function I7(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}const afe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function cT(n,e){return new afe[n](e)}function fx(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function tb(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function tA(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const H2={[Wg]:{[lv]:tb},[lv]:{[Wg]:tA}},am={legacyMode:!0,get workingColorSpace(){return lv},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(H2[e]&&H2[e][t]!==void 0){const i=H2[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},R7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fc={r:0,g:0,b:0},eg={h:0,s:0,l:0},xC={h:0,s:0,l:0};function G2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function wC(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class vn{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Wg){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,am.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=lv){return this.r=e,this.g=t,this.b=i,am.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=lv){if(e=EP(e,1),t=Gu(t,0,1),i=Gu(i,0,1),t===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,l=2*i-o;this.r=G2(l,o,e+1/3),this.g=G2(l,o,e),this.b=G2(l,o,e-1/3)}return am.toWorkingColorSpace(this,s),this}setStyle(e,t=Wg){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,am.toWorkingColorSpace(this,t),i(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,am.toWorkingColorSpace(this,t),i(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u)){const h=parseFloat(o[1])/360,d=parseInt(o[2],10)/100,m=parseInt(o[3],10)/100;return i(o[4]),this.setHSL(h,d,m,t)}break}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,am.toWorkingColorSpace(this,t),this;if(l===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,am.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Wg){const i=R7[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=tb(e.r),this.g=tb(e.g),this.b=tb(e.b),this}copyLinearToSRGB(e){return this.r=tA(e.r),this.g=tA(e.g),this.b=tA(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Wg){return am.fromWorkingColorSpace(wC(this,Fc),e),Gu(Fc.r*255,0,255)<<16^Gu(Fc.g*255,0,255)<<8^Gu(Fc.b*255,0,255)<<0}getHexString(e=Wg){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=lv){am.fromWorkingColorSpace(wC(this,Fc),t);const i=Fc.r,s=Fc.g,o=Fc.b,l=Math.max(i,s,o),u=Math.min(i,s,o);let h,d;const m=(u+l)/2;if(u===l)h=0,d=0;else{const _=l-u;switch(d=m<=.5?_/(l+u):_/(2-l-u),l){case i:h=(s-o)/_+(s<o?6:0);break;case s:h=(o-i)/_+2;break;case o:h=(i-s)/_+4;break}h/=6}return e.h=h,e.s=d,e.l=m,e}getRGB(e,t=lv){return am.fromWorkingColorSpace(wC(this,Fc),t),e.r=Fc.r,e.g=Fc.g,e.b=Fc.b,e}getStyle(e=Wg){return am.fromWorkingColorSpace(wC(this,Fc),e),e!==Wg?`color(${e} ${Fc.r} ${Fc.g} ${Fc.b})`:`rgb(${Fc.r*255|0},${Fc.g*255|0},${Fc.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(eg),eg.h+=e,eg.s+=t,eg.l+=i,this.setHSL(eg.h,eg.s,eg.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(eg),e.getHSL(xC);const i=w$(eg.h,xC.h,t),s=w$(eg.s,xC.s,t),o=w$(eg.l,xC.l,t);return this.setHSL(i,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}vn.NAMES=R7;let C1;class $P{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{C1===void 0&&(C1=fx("canvas")),C1.width=e.width,C1.height=e.height;const i=C1.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=C1}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=fx("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=tb(o[l]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(tb(t[i]/255)*255):t[i]=tb(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class jy{constructor(e=null){this.isSource=!0,this.uuid=Cf(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(W2(s[l].image)):o.push(W2(s[l]))}else o=W2(s);i.url=o}return t||(e.images[this.uuid]=i),i}}function W2(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?$P.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let lfe=0;class Fl extends Df{constructor(e=Fl.DEFAULT_IMAGE,t=Fl.DEFAULT_MAPPING,i=ep,s=ep,o=Xo,l=wb,u=Pp,h=Xh,d=1,m=$m){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:lfe++}),this.uuid=Cf(),this.name="",this.source=new jy(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=d,this.format=u,this.internalFormat=null,this.type=h,this.offset=new Dt(0,0),this.repeat=new Dt(1,1),this.center=new Dt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new np,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=m,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ER)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case WT:e.x=e.x-Math.floor(e.x);break;case ep:e.x=e.x<0?0:1;break;case lx:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case WT:e.y=e.y-Math.floor(e.y);break;case ep:e.y=e.y<0?0:1;break;case lx:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Fl.DEFAULT_IMAGE=null;Fl.DEFAULT_MAPPING=ER;class Ii{constructor(e=0,t=0,i=0,s=1){Ii.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*i+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*i+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*i+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,o;const l=e.elements,u=l[0],h=l[4],d=l[8],m=l[1],_=l[5],v=l[9],S=l[2],x=l[6],w=l[10];if(Math.abs(h-m)<.01&&Math.abs(d-S)<.01&&Math.abs(v-x)<.01){if(Math.abs(h+m)<.1&&Math.abs(d+S)<.1&&Math.abs(v+x)<.1&&Math.abs(u+_+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const k=(u+1)/2,O=(_+1)/2,D=(w+1)/2,L=(h+m)/4,z=(d+S)/4,H=(v+x)/4;return k>O&&k>D?k<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(k),s=L/i,o=z/i):O>D?O<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(O),i=L/s,o=H/s):D<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(D),i=z/o,s=H/o),this.set(i,s,o,t),this}let A=Math.sqrt((x-v)*(x-v)+(d-S)*(d-S)+(m-h)*(m-h));return Math.abs(A)<.001&&(A=1),this.x=(x-v)/A,this.y=(d-S)/A,this.z=(m-h)/A,this.w=Math.acos((u+_+w-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class cu extends Df{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ii(0,0,e,t),this.scissorTest=!1,this.viewport=new Ii(0,0,e,t);const s={width:e,height:t,depth:1};this.texture=new Fl(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Xo,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new jy(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Gx extends Fl{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=fa,this.minFilter=fa,this.wrapR=ep,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ufe extends cu{constructor(e,t,i){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Gx(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class xR extends Fl{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=fa,this.minFilter=fa,this.wrapR=ep,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class cfe extends cu{constructor(e,t,i){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new xR(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class hfe extends cu{constructor(e,t,i,s={}){super(e,t,s),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let l=0;l<i;l++)this.texture[l]=o.clone(),this.texture[l].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,o=this.texture.length;s<o;s++)this.texture[s].image.width=e,this.texture[s].image.height=t,this.texture[s].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class jo{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,o,l,u){let h=i[s+0],d=i[s+1],m=i[s+2],_=i[s+3];const v=o[l+0],S=o[l+1],x=o[l+2],w=o[l+3];if(u===0){e[t+0]=h,e[t+1]=d,e[t+2]=m,e[t+3]=_;return}if(u===1){e[t+0]=v,e[t+1]=S,e[t+2]=x,e[t+3]=w;return}if(_!==w||h!==v||d!==S||m!==x){let A=1-u;const k=h*v+d*S+m*x+_*w,O=k>=0?1:-1,D=1-k*k;if(D>Number.EPSILON){const z=Math.sqrt(D),H=Math.atan2(z,k*O);A=Math.sin(A*H)/z,u=Math.sin(u*H)/z}const L=u*O;if(h=h*A+v*L,d=d*A+S*L,m=m*A+x*L,_=_*A+w*L,A===1-u){const z=1/Math.sqrt(h*h+d*d+m*m+_*_);h*=z,d*=z,m*=z,_*=z}}e[t]=h,e[t+1]=d,e[t+2]=m,e[t+3]=_}static multiplyQuaternionsFlat(e,t,i,s,o,l){const u=i[s],h=i[s+1],d=i[s+2],m=i[s+3],_=o[l],v=o[l+1],S=o[l+2],x=o[l+3];return e[t]=u*x+m*_+h*S-d*v,e[t+1]=h*x+m*v+d*_-u*S,e[t+2]=d*x+m*S+u*v-h*_,e[t+3]=m*x-u*_-h*v-d*S,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,h=Math.sin,d=u(i/2),m=u(s/2),_=u(o/2),v=h(i/2),S=h(s/2),x=h(o/2);switch(l){case"XYZ":this._x=v*m*_+d*S*x,this._y=d*S*_-v*m*x,this._z=d*m*x+v*S*_,this._w=d*m*_-v*S*x;break;case"YXZ":this._x=v*m*_+d*S*x,this._y=d*S*_-v*m*x,this._z=d*m*x-v*S*_,this._w=d*m*_+v*S*x;break;case"ZXY":this._x=v*m*_-d*S*x,this._y=d*S*_+v*m*x,this._z=d*m*x+v*S*_,this._w=d*m*_-v*S*x;break;case"ZYX":this._x=v*m*_-d*S*x,this._y=d*S*_+v*m*x,this._z=d*m*x-v*S*_,this._w=d*m*_+v*S*x;break;case"YZX":this._x=v*m*_+d*S*x,this._y=d*S*_+v*m*x,this._z=d*m*x-v*S*_,this._w=d*m*_-v*S*x;break;case"XZY":this._x=v*m*_-d*S*x,this._y=d*S*_-v*m*x,this._z=d*m*x+v*S*_,this._w=d*m*_+v*S*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],o=t[8],l=t[1],u=t[5],h=t[9],d=t[2],m=t[6],_=t[10],v=i+u+_;if(v>0){const S=.5/Math.sqrt(v+1);this._w=.25/S,this._x=(m-h)*S,this._y=(o-d)*S,this._z=(l-s)*S}else if(i>u&&i>_){const S=2*Math.sqrt(1+i-u-_);this._w=(m-h)/S,this._x=.25*S,this._y=(s+l)/S,this._z=(o+d)/S}else if(u>_){const S=2*Math.sqrt(1+u-i-_);this._w=(o-d)/S,this._x=(s+l)/S,this._y=.25*S,this._z=(h+m)/S}else{const S=2*Math.sqrt(1+_-i-u);this._w=(l-s)/S,this._x=(o+d)/S,this._y=(h+m)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Gu(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,o=e._z,l=e._w,u=t._x,h=t._y,d=t._z,m=t._w;return this._x=i*m+l*u+s*d-o*h,this._y=s*m+l*h+o*u-i*d,this._z=o*m+l*d+i*h-s*u,this._w=l*m-i*u-s*h-o*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+i*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=i,this._y=s,this._z=o,this;const h=1-u*u;if(h<=Number.EPSILON){const S=1-t;return this._w=S*l+t*this._w,this._x=S*i+t*this._x,this._y=S*s+t*this._y,this._z=S*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(h),m=Math.atan2(d,u),_=Math.sin((1-t)*m)/d,v=Math.sin(t*m)/d;return this._w=l*_+this._w*v,this._x=i*_+this._x*v,this._y=s*_+this._y*v,this._z=o*_+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),s=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(s),i*Math.sin(o),i*Math.cos(o),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class be{constructor(e=0,t=0,i=0){be.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(I4.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(I4.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*s,this.y=o[1]*t+o[4]*i+o[7]*s,this.z=o[2]*t+o[5]*i+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*i+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*i+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,o=e.x,l=e.y,u=e.z,h=e.w,d=h*t+l*s-u*i,m=h*i+u*t-o*s,_=h*s+o*i-l*t,v=-o*t-l*i-u*s;return this.x=d*h+v*-o+m*-u-_*-l,this.y=m*h+v*-l+_*-o-d*-u,this.z=_*h+v*-u+d*-l-m*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s,this.y=o[1]*t+o[5]*i+o[9]*s,this.z=o[2]*t+o[6]*i+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,o=e.z,l=t.x,u=t.y,h=t.z;return this.x=s*h-o*u,this.y=o*l-i*h,this.z=i*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return V2.copy(this).projectOnVector(e),this.sub(V2)}reflect(e){return this.sub(V2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Gu(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const V2=new be,I4=new jo;class vg{constructor(e=new be(1/0,1/0,1/0),t=new be(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let h=0,d=e.length;h<d;h+=3){const m=e[h],_=e[h+1],v=e[h+2];m<t&&(t=m),_<i&&(i=_),v<s&&(s=v),m>o&&(o=m),_>l&&(l=_),v>u&&(u=v)}return this.min.set(t,i,s),this.max.set(o,l,u),this}setFromBufferAttribute(e){let t=1/0,i=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let h=0,d=e.count;h<d;h++){const m=e.getX(h),_=e.getY(h),v=e.getZ(h);m<t&&(t=m),_<i&&(i=_),v<s&&(s=v),m>o&&(o=m),_>l&&(l=_),v>u&&(u=v)}return this.min.set(t,i,s),this.max.set(o,l,u),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=cy.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const o=i.attributes.position;for(let l=0,u=o.count;l<u;l++)cy.fromBufferAttribute(o,l).applyMatrix4(e.matrixWorld),this.expandByPoint(cy)}else i.boundingBox===null&&i.computeBoundingBox(),j2.copy(i.boundingBox),j2.applyMatrix4(e.matrixWorld),this.union(j2);const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,cy),cy.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(NE),CC.subVectors(this.max,NE),M1.subVectors(e.a,NE),A1.subVectors(e.b,NE),I1.subVectors(e.c,NE),z_.subVectors(A1,M1),H_.subVectors(I1,A1),hy.subVectors(M1,I1);let t=[0,-z_.z,z_.y,0,-H_.z,H_.y,0,-hy.z,hy.y,z_.z,0,-z_.x,H_.z,0,-H_.x,hy.z,0,-hy.x,-z_.y,z_.x,0,-H_.y,H_.x,0,-hy.y,hy.x,0];return!X2(t,M1,A1,I1,CC)||(t=[1,0,0,0,1,0,0,0,1],!X2(t,M1,A1,I1,CC))?!1:(MC.crossVectors(z_,H_),t=[MC.x,MC.y,MC.z],X2(t,M1,A1,I1,CC))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return cy.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(cy).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(D0[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),D0[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),D0[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),D0[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),D0[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),D0[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),D0[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),D0[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(D0),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const D0=[new be,new be,new be,new be,new be,new be,new be,new be],cy=new be,j2=new vg,M1=new be,A1=new be,I1=new be,z_=new be,H_=new be,hy=new be,NE=new be,CC=new be,MC=new be,dy=new be;function X2(n,e,t,i,s){for(let o=0,l=n.length-3;o<=l;o+=3){dy.fromArray(n,o);const u=s.x*Math.abs(dy.x)+s.y*Math.abs(dy.y)+s.z*Math.abs(dy.z),h=e.dot(dy),d=t.dot(dy),m=i.dot(dy);if(Math.max(-Math.max(h,d,m),Math.min(h,d,m))>u)return!1}return!0}const dfe=new vg,R4=new be,AC=new be,Y2=new be;class c0{constructor(e=new be,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):dfe.setFromPoints(e).getCenter(i);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Y2.subVectors(e,this.center);const t=Y2.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.add(Y2.multiplyScalar(s/i)),this.radius+=s}return this}union(e){return this.center.equals(e.center)===!0?AC.set(0,0,1).multiplyScalar(e.radius):AC.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(R4.copy(e.center).add(AC)),this.expandByPoint(R4.copy(e.center).sub(AC)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const N0=new be,K2=new be,IC=new be,G_=new be,J2=new be,RC=new be,Q2=new be;class Wx{constructor(e=new be,t=new be(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,N0)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=N0.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(N0.copy(this.direction).multiplyScalar(t).add(this.origin),N0.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){K2.copy(e).add(t).multiplyScalar(.5),IC.copy(t).sub(e).normalize(),G_.copy(this.origin).sub(K2);const o=e.distanceTo(t)*.5,l=-this.direction.dot(IC),u=G_.dot(this.direction),h=-G_.dot(IC),d=G_.lengthSq(),m=Math.abs(1-l*l);let _,v,S,x;if(m>0)if(_=l*h-u,v=l*u-h,x=o*m,_>=0)if(v>=-x)if(v<=x){const w=1/m;_*=w,v*=w,S=_*(_+l*v+2*u)+v*(l*_+v+2*h)+d}else v=o,_=Math.max(0,-(l*v+u)),S=-_*_+v*(v+2*h)+d;else v=-o,_=Math.max(0,-(l*v+u)),S=-_*_+v*(v+2*h)+d;else v<=-x?(_=Math.max(0,-(-l*o+u)),v=_>0?-o:Math.min(Math.max(-o,-h),o),S=-_*_+v*(v+2*h)+d):v<=x?(_=0,v=Math.min(Math.max(-o,-h),o),S=v*(v+2*h)+d):(_=Math.max(0,-(l*o+u)),v=_>0?o:Math.min(Math.max(-o,-h),o),S=-_*_+v*(v+2*h)+d);else v=l>0?-o:o,_=Math.max(0,-(l*v+u)),S=-_*_+v*(v+2*h)+d;return i&&i.copy(this.direction).multiplyScalar(_).add(this.origin),s&&s.copy(IC).multiplyScalar(v).add(K2),S}intersectSphere(e,t){N0.subVectors(e.center,this.origin);const i=N0.dot(this.direction),s=N0.dot(N0)-i*i,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=i-l,h=i+l;return u<0&&h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,o,l,u,h;const d=1/this.direction.x,m=1/this.direction.y,_=1/this.direction.z,v=this.origin;return d>=0?(i=(e.min.x-v.x)*d,s=(e.max.x-v.x)*d):(i=(e.max.x-v.x)*d,s=(e.min.x-v.x)*d),m>=0?(o=(e.min.y-v.y)*m,l=(e.max.y-v.y)*m):(o=(e.max.y-v.y)*m,l=(e.min.y-v.y)*m),i>l||o>s||((o>i||i!==i)&&(i=o),(l<s||s!==s)&&(s=l),_>=0?(u=(e.min.z-v.z)*_,h=(e.max.z-v.z)*_):(u=(e.max.z-v.z)*_,h=(e.min.z-v.z)*_),i>h||u>s)||((u>i||i!==i)&&(i=u),(h<s||s!==s)&&(s=h),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,N0)!==null}intersectTriangle(e,t,i,s,o){J2.subVectors(t,e),RC.subVectors(i,e),Q2.crossVectors(J2,RC);let l=this.direction.dot(Q2),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;G_.subVectors(this.origin,e);const h=u*this.direction.dot(RC.crossVectors(G_,RC));if(h<0)return null;const d=u*this.direction.dot(J2.cross(G_));if(d<0||h+d>l)return null;const m=-u*G_.dot(Q2);return m<0?null:this.at(m/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ar{constructor(){Ar.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,s,o,l,u,h,d,m,_,v,S,x,w,A){const k=this.elements;return k[0]=e,k[4]=t,k[8]=i,k[12]=s,k[1]=o,k[5]=l,k[9]=u,k[13]=h,k[2]=d,k[6]=m,k[10]=_,k[14]=v,k[3]=S,k[7]=x,k[11]=w,k[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ar().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/R1.setFromMatrixColumn(e,0).length(),o=1/R1.setFromMatrixColumn(e,1).length(),l=1/R1.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,o=e.z,l=Math.cos(i),u=Math.sin(i),h=Math.cos(s),d=Math.sin(s),m=Math.cos(o),_=Math.sin(o);if(e.order==="XYZ"){const v=l*m,S=l*_,x=u*m,w=u*_;t[0]=h*m,t[4]=-h*_,t[8]=d,t[1]=S+x*d,t[5]=v-w*d,t[9]=-u*h,t[2]=w-v*d,t[6]=x+S*d,t[10]=l*h}else if(e.order==="YXZ"){const v=h*m,S=h*_,x=d*m,w=d*_;t[0]=v+w*u,t[4]=x*u-S,t[8]=l*d,t[1]=l*_,t[5]=l*m,t[9]=-u,t[2]=S*u-x,t[6]=w+v*u,t[10]=l*h}else if(e.order==="ZXY"){const v=h*m,S=h*_,x=d*m,w=d*_;t[0]=v-w*u,t[4]=-l*_,t[8]=x+S*u,t[1]=S+x*u,t[5]=l*m,t[9]=w-v*u,t[2]=-l*d,t[6]=u,t[10]=l*h}else if(e.order==="ZYX"){const v=l*m,S=l*_,x=u*m,w=u*_;t[0]=h*m,t[4]=x*d-S,t[8]=v*d+w,t[1]=h*_,t[5]=w*d+v,t[9]=S*d-x,t[2]=-d,t[6]=u*h,t[10]=l*h}else if(e.order==="YZX"){const v=l*h,S=l*d,x=u*h,w=u*d;t[0]=h*m,t[4]=w-v*_,t[8]=x*_+S,t[1]=_,t[5]=l*m,t[9]=-u*m,t[2]=-d*m,t[6]=S*_+x,t[10]=v-w*_}else if(e.order==="XZY"){const v=l*h,S=l*d,x=u*h,w=u*d;t[0]=h*m,t[4]=-_,t[8]=d*m,t[1]=v*_+w,t[5]=l*m,t[9]=S*_-x,t[2]=x*_-S,t[6]=u*m,t[10]=w*_+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(pfe,e,ffe)}lookAt(e,t,i){const s=this.elements;return mf.subVectors(e,t),mf.lengthSq()===0&&(mf.z=1),mf.normalize(),W_.crossVectors(i,mf),W_.lengthSq()===0&&(Math.abs(i.z)===1?mf.x+=1e-4:mf.z+=1e-4,mf.normalize(),W_.crossVectors(i,mf)),W_.normalize(),kC.crossVectors(mf,W_),s[0]=W_.x,s[4]=kC.x,s[8]=mf.x,s[1]=W_.y,s[5]=kC.y,s[9]=mf.y,s[2]=W_.z,s[6]=kC.z,s[10]=mf.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[4],h=i[8],d=i[12],m=i[1],_=i[5],v=i[9],S=i[13],x=i[2],w=i[6],A=i[10],k=i[14],O=i[3],D=i[7],L=i[11],z=i[15],H=s[0],U=s[4],P=s[8],K=s[12],ee=s[1],re=s[5],ie=s[9],de=s[13],oe=s[2],ce=s[6],me=s[10],Ae=s[14],j=s[3],Z=s[7],ne=s[11],ae=s[15];return o[0]=l*H+u*ee+h*oe+d*j,o[4]=l*U+u*re+h*ce+d*Z,o[8]=l*P+u*ie+h*me+d*ne,o[12]=l*K+u*de+h*Ae+d*ae,o[1]=m*H+_*ee+v*oe+S*j,o[5]=m*U+_*re+v*ce+S*Z,o[9]=m*P+_*ie+v*me+S*ne,o[13]=m*K+_*de+v*Ae+S*ae,o[2]=x*H+w*ee+A*oe+k*j,o[6]=x*U+w*re+A*ce+k*Z,o[10]=x*P+w*ie+A*me+k*ne,o[14]=x*K+w*de+A*Ae+k*ae,o[3]=O*H+D*ee+L*oe+z*j,o[7]=O*U+D*re+L*ce+z*Z,o[11]=O*P+D*ie+L*me+z*ne,o[15]=O*K+D*de+L*Ae+z*ae,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],o=e[12],l=e[1],u=e[5],h=e[9],d=e[13],m=e[2],_=e[6],v=e[10],S=e[14],x=e[3],w=e[7],A=e[11],k=e[15];return x*(+o*h*_-s*d*_-o*u*v+i*d*v+s*u*S-i*h*S)+w*(+t*h*S-t*d*v+o*l*v-s*l*S+s*d*m-o*h*m)+A*(+t*d*_-t*u*S-o*l*_+i*l*S+o*u*m-i*d*m)+k*(-s*u*m-t*h*_+t*u*v+s*l*_-i*l*v+i*h*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],d=e[7],m=e[8],_=e[9],v=e[10],S=e[11],x=e[12],w=e[13],A=e[14],k=e[15],O=_*A*d-w*v*d+w*h*S-u*A*S-_*h*k+u*v*k,D=x*v*d-m*A*d-x*h*S+l*A*S+m*h*k-l*v*k,L=m*w*d-x*_*d+x*u*S-l*w*S-m*u*k+l*_*k,z=x*_*h-m*w*h-x*u*v+l*w*v+m*u*A-l*_*A,H=t*O+i*D+s*L+o*z;if(H===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const U=1/H;return e[0]=O*U,e[1]=(w*v*o-_*A*o-w*s*S+i*A*S+_*s*k-i*v*k)*U,e[2]=(u*A*o-w*h*o+w*s*d-i*A*d-u*s*k+i*h*k)*U,e[3]=(_*h*o-u*v*o-_*s*d+i*v*d+u*s*S-i*h*S)*U,e[4]=D*U,e[5]=(m*A*o-x*v*o+x*s*S-t*A*S-m*s*k+t*v*k)*U,e[6]=(x*h*o-l*A*o-x*s*d+t*A*d+l*s*k-t*h*k)*U,e[7]=(l*v*o-m*h*o+m*s*d-t*v*d-l*s*S+t*h*S)*U,e[8]=L*U,e[9]=(x*_*o-m*w*o-x*i*S+t*w*S+m*i*k-t*_*k)*U,e[10]=(l*w*o-x*u*o+x*i*d-t*w*d-l*i*k+t*u*k)*U,e[11]=(m*u*o-l*_*o-m*i*d+t*_*d+l*i*S-t*u*S)*U,e[12]=z*U,e[13]=(m*w*s-x*_*s+x*i*v-t*w*v-m*i*A+t*_*A)*U,e[14]=(x*u*s-l*w*s-x*i*h+t*w*h+l*i*A-t*u*A)*U,e[15]=(l*_*s-m*u*s+m*i*h-t*_*h-l*i*v+t*u*v)*U,this}scale(e){const t=this.elements,i=e.x,s=e.y,o=e.z;return t[0]*=i,t[4]*=s,t[8]*=o,t[1]*=i,t[5]*=s,t[9]*=o,t[2]*=i,t[6]*=s,t[10]*=o,t[3]*=i,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),o=1-i,l=e.x,u=e.y,h=e.z,d=o*l,m=o*u;return this.set(d*l+i,d*u-s*h,d*h+s*u,0,d*u+s*h,m*u+i,m*h-s*l,0,d*h-s*u,m*h+s*l,o*h*h+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,o,l){return this.set(1,i,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,o=t._x,l=t._y,u=t._z,h=t._w,d=o+o,m=l+l,_=u+u,v=o*d,S=o*m,x=o*_,w=l*m,A=l*_,k=u*_,O=h*d,D=h*m,L=h*_,z=i.x,H=i.y,U=i.z;return s[0]=(1-(w+k))*z,s[1]=(S+L)*z,s[2]=(x-D)*z,s[3]=0,s[4]=(S-L)*H,s[5]=(1-(v+k))*H,s[6]=(A+O)*H,s[7]=0,s[8]=(x+D)*U,s[9]=(A-O)*U,s[10]=(1-(v+w))*U,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let o=R1.set(s[0],s[1],s[2]).length();const l=R1.set(s[4],s[5],s[6]).length(),u=R1.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],tg.copy(this);const h=1/o,d=1/l,m=1/u;return tg.elements[0]*=h,tg.elements[1]*=h,tg.elements[2]*=h,tg.elements[4]*=d,tg.elements[5]*=d,tg.elements[6]*=d,tg.elements[8]*=m,tg.elements[9]*=m,tg.elements[10]*=m,t.setFromRotationMatrix(tg),i.x=o,i.y=l,i.z=u,this}makePerspective(e,t,i,s,o,l){const u=this.elements,h=2*o/(t-e),d=2*o/(i-s),m=(t+e)/(t-e),_=(i+s)/(i-s),v=-(l+o)/(l-o),S=-2*l*o/(l-o);return u[0]=h,u[4]=0,u[8]=m,u[12]=0,u[1]=0,u[5]=d,u[9]=_,u[13]=0,u[2]=0,u[6]=0,u[10]=v,u[14]=S,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,s,o,l){const u=this.elements,h=1/(t-e),d=1/(i-s),m=1/(l-o),_=(t+e)*h,v=(i+s)*d,S=(l+o)*m;return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-_,u[1]=0,u[5]=2*d,u[9]=0,u[13]=-v,u[2]=0,u[6]=0,u[10]=-2*m,u[14]=-S,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const R1=new be,tg=new Ar,pfe=new be(0,0,0),ffe=new be(1,1,1),W_=new be,kC=new be,mf=new be,k4=new Ar,O4=new jo;class Mb{constructor(e=0,t=0,i=0,s=Mb.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],h=s[1],d=s[5],m=s[9],_=s[2],v=s[6],S=s[10];switch(t){case"XYZ":this._y=Math.asin(Gu(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,S),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(v,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Gu(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(u,S),this._z=Math.atan2(h,d)):(this._y=Math.atan2(-_,o),this._z=0);break;case"ZXY":this._x=Math.asin(Gu(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-_,S),this._z=Math.atan2(-l,d)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-Gu(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(v,S),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,d));break;case"YZX":this._z=Math.asin(Gu(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-m,d),this._y=Math.atan2(-_,o)):(this._x=0,this._y=Math.atan2(u,S));break;case"XZY":this._z=Math.asin(-Gu(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(v,d),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-m,S),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return k4.makeRotationFromQuaternion(e),this.setFromRotationMatrix(k4,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return O4.setFromEuler(this),this.setFromQuaternion(O4,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Mb.DefaultOrder="XYZ";Mb.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class nb{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let mfe=0;const L4=new be,k1=new jo,B0=new Ar,OC=new be,BE=new be,gfe=new be,_fe=new jo,D4=new be(1,0,0),N4=new be(0,1,0),B4=new be(0,0,1),vfe={type:"added"},P4={type:"removed"};class as extends Df{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:mfe++}),this.uuid=Cf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=as.DefaultUp.clone();const e=new be,t=new Mb,i=new jo,s=new be(1,1,1);function o(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(o),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ar},normalMatrix:{value:new np}}),this.matrix=new Ar,this.matrixWorld=new Ar,this.matrixAutoUpdate=as.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new nb,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return k1.setFromAxisAngle(e,t),this.quaternion.multiply(k1),this}rotateOnWorldAxis(e,t){return k1.setFromAxisAngle(e,t),this.quaternion.premultiply(k1),this}rotateX(e){return this.rotateOnAxis(D4,e)}rotateY(e){return this.rotateOnAxis(N4,e)}rotateZ(e){return this.rotateOnAxis(B4,e)}translateOnAxis(e,t){return L4.copy(e).applyQuaternion(this.quaternion),this.position.add(L4.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(D4,e)}translateY(e){return this.translateOnAxis(N4,e)}translateZ(e){return this.translateOnAxis(B4,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(B0.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?OC.copy(e):OC.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),BE.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?B0.lookAt(BE,OC,this.up):B0.lookAt(OC,BE,this.up),this.quaternion.setFromRotationMatrix(B0),s&&(B0.extractRotation(s.matrixWorld),k1.setFromRotationMatrix(B0),this.quaternion.premultiply(k1.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(vfe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(P4)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(P4)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),B0.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),B0.multiply(e.parent.matrixWorld)),e.applyMatrix4(B0),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(BE,e,gfe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(BE,_fe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON()));function o(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let d=0,m=h.length;d<m;d++){const _=h[d];o(e.shapes,_)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,d=this.material.length;h<d;h++)u.push(o(e.materials,this.material[h]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];s.animations.push(o(e.animations,h))}}if(t){const u=l(e.geometries),h=l(e.materials),d=l(e.textures),m=l(e.images),_=l(e.shapes),v=l(e.skeletons),S=l(e.animations),x=l(e.nodes);u.length>0&&(i.geometries=u),h.length>0&&(i.materials=h),d.length>0&&(i.textures=d),m.length>0&&(i.images=m),_.length>0&&(i.shapes=_),v.length>0&&(i.skeletons=v),S.length>0&&(i.animations=S),x.length>0&&(i.nodes=x)}return i.object=s,i;function l(u){const h=[];for(const d in u){const m=u[d];delete m.metadata,h.push(m)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}as.DefaultUp=new be(0,1,0);as.DefaultMatrixAutoUpdate=!0;const ng=new be,P0=new be,q2=new be,F0=new be,O1=new be,L1=new be,F4=new be,Z2=new be,eO=new be,tO=new be;class bf{constructor(e=new be,t=new be,i=new be){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),ng.subVectors(e,t),s.cross(ng);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,i,s,o){ng.subVectors(s,t),P0.subVectors(i,t),q2.subVectors(e,t);const l=ng.dot(ng),u=ng.dot(P0),h=ng.dot(q2),d=P0.dot(P0),m=P0.dot(q2),_=l*d-u*u;if(_===0)return o.set(-2,-1,-1);const v=1/_,S=(d*h-u*m)*v,x=(l*m-u*h)*v;return o.set(1-S-x,x,S)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,F0),F0.x>=0&&F0.y>=0&&F0.x+F0.y<=1}static getUV(e,t,i,s,o,l,u,h){return this.getBarycoord(e,t,i,s,F0),h.set(0,0),h.addScaledVector(o,F0.x),h.addScaledVector(l,F0.y),h.addScaledVector(u,F0.z),h}static isFrontFacing(e,t,i,s){return ng.subVectors(i,t),P0.subVectors(e,t),ng.cross(P0).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ng.subVectors(this.c,this.b),P0.subVectors(this.a,this.b),ng.cross(P0).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return bf.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return bf.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,s,o){return bf.getUV(e,this.a,this.b,this.c,t,i,s,o)}containsPoint(e){return bf.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return bf.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,o=this.c;let l,u;O1.subVectors(s,i),L1.subVectors(o,i),Z2.subVectors(e,i);const h=O1.dot(Z2),d=L1.dot(Z2);if(h<=0&&d<=0)return t.copy(i);eO.subVectors(e,s);const m=O1.dot(eO),_=L1.dot(eO);if(m>=0&&_<=m)return t.copy(s);const v=h*_-m*d;if(v<=0&&h>=0&&m<=0)return l=h/(h-m),t.copy(i).addScaledVector(O1,l);tO.subVectors(e,o);const S=O1.dot(tO),x=L1.dot(tO);if(x>=0&&S<=x)return t.copy(o);const w=S*d-h*x;if(w<=0&&d>=0&&x<=0)return u=d/(d-x),t.copy(i).addScaledVector(L1,u);const A=m*x-S*_;if(A<=0&&_-m>=0&&S-x>=0)return F4.subVectors(o,s),u=(_-m)/(_-m+(S-x)),t.copy(s).addScaledVector(F4,u);const k=1/(A+w+v);return l=w*k,u=v*k,t.copy(i).addScaledVector(O1,l).addScaledVector(L1,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let yfe=0;class Wc extends Df{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:yfe++}),this.uuid=Cf(),this.name="",this.type="Material",this.blending=Z0,this.side=s0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=TR,this.blendDst=SR,this.blendEquation=Oy,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=YA,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=C7,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=eA,this.stencilZFail=eA,this.stencilZPass=eA,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===B9;continue}const s=this[t];if(s===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Z0&&(i.blending=this.blending),this.side!==s0&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function s(o){const l=[];for(const u in o){const h=o[u];delete h.metadata,l.push(h)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(i.textures=o),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class yg extends Wc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new vn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const dc=new be,LC=new Dt;class Is{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=dx,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),l=new vn),t[i++]=l.r,t[i++]=l.g,t[i++]=l.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),l=new Dt),t[i++]=l.x,t[i++]=l.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),l=new be),t[i++]=l.x,t[i++]=l.y,t[i++]=l.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),l=new Ii),t[i++]=l.x,t[i++]=l.y,t[i++]=l.z,t[i++]=l.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)LC.fromBufferAttribute(this,t),LC.applyMatrix3(e),this.setXY(t,LC.x,LC.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)dc.fromBufferAttribute(this,t),dc.applyMatrix3(e),this.setXYZ(t,dc.x,dc.y,dc.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)dc.fromBufferAttribute(this,t),dc.applyMatrix4(e),this.setXYZ(t,dc.x,dc.y,dc.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)dc.fromBufferAttribute(this,t),dc.applyNormalMatrix(e),this.setXYZ(t,dc.x,dc.y,dc.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)dc.fromBufferAttribute(this,t),dc.transformDirection(e),this.setXYZ(t,dc.x,dc.y,dc.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==dx&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class bfe extends Is{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Tfe extends Is{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Sfe extends Is{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class Efe extends Is{constructor(e,t,i){super(new Int16Array(e),t,i)}}class xP extends Is{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class $fe extends Is{constructor(e,t,i){super(new Int32Array(e),t,i)}}class wP extends Is{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class xfe extends Is{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}}class Fn extends Is{constructor(e,t,i){super(new Float32Array(e),t,i)}}class wfe extends Is{constructor(e,t,i){super(new Float64Array(e),t,i)}}let Cfe=0;const sm=new Ar,nO=new as,D1=new be,gf=new vg,PE=new vg,dh=new be;class Or extends Df{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Cfe++}),this.uuid=Cf(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(I7(e)?wP:xP)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new np().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return sm.makeRotationFromQuaternion(e),this.applyMatrix4(sm),this}rotateX(e){return sm.makeRotationX(e),this.applyMatrix4(sm),this}rotateY(e){return sm.makeRotationY(e),this.applyMatrix4(sm),this}rotateZ(e){return sm.makeRotationZ(e),this.applyMatrix4(sm),this}translate(e,t,i){return sm.makeTranslation(e,t,i),this.applyMatrix4(sm),this}scale(e,t,i){return sm.makeScale(e,t,i),this.applyMatrix4(sm),this}lookAt(e){return nO.lookAt(e),nO.updateMatrix(),this.applyMatrix4(nO.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(D1).negate(),this.translate(D1.x,D1.y,D1.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Fn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vg);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new be(-1/0,-1/0,-1/0),new be(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const o=t[i];gf.setFromBufferAttribute(o),this.morphTargetsRelative?(dh.addVectors(this.boundingBox.min,gf.min),this.boundingBox.expandByPoint(dh),dh.addVectors(this.boundingBox.max,gf.max),this.boundingBox.expandByPoint(dh)):(this.boundingBox.expandByPoint(gf.min),this.boundingBox.expandByPoint(gf.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new c0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new be,1/0);return}if(e){const i=this.boundingSphere.center;if(gf.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];PE.setFromBufferAttribute(u),this.morphTargetsRelative?(dh.addVectors(gf.min,PE.min),gf.expandByPoint(dh),dh.addVectors(gf.max,PE.max),gf.expandByPoint(dh)):(gf.expandByPoint(PE.min),gf.expandByPoint(PE.max))}gf.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)dh.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(dh));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],h=this.morphTargetsRelative;for(let d=0,m=u.count;d<m;d++)dh.fromBufferAttribute(u,d),h&&(D1.fromBufferAttribute(e,d),dh.add(D1)),s=Math.max(s,i.distanceToSquared(dh))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,s=t.position.array,o=t.normal.array,l=t.uv.array,u=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Is(new Float32Array(4*u),4));const h=this.getAttribute("tangent").array,d=[],m=[];for(let ee=0;ee<u;ee++)d[ee]=new be,m[ee]=new be;const _=new be,v=new be,S=new be,x=new Dt,w=new Dt,A=new Dt,k=new be,O=new be;function D(ee,re,ie){_.fromArray(s,ee*3),v.fromArray(s,re*3),S.fromArray(s,ie*3),x.fromArray(l,ee*2),w.fromArray(l,re*2),A.fromArray(l,ie*2),v.sub(_),S.sub(_),w.sub(x),A.sub(x);const de=1/(w.x*A.y-A.x*w.y);!isFinite(de)||(k.copy(v).multiplyScalar(A.y).addScaledVector(S,-w.y).multiplyScalar(de),O.copy(S).multiplyScalar(w.x).addScaledVector(v,-A.x).multiplyScalar(de),d[ee].add(k),d[re].add(k),d[ie].add(k),m[ee].add(O),m[re].add(O),m[ie].add(O))}let L=this.groups;L.length===0&&(L=[{start:0,count:i.length}]);for(let ee=0,re=L.length;ee<re;++ee){const ie=L[ee],de=ie.start,oe=ie.count;for(let ce=de,me=de+oe;ce<me;ce+=3)D(i[ce+0],i[ce+1],i[ce+2])}const z=new be,H=new be,U=new be,P=new be;function K(ee){U.fromArray(o,ee*3),P.copy(U);const re=d[ee];z.copy(re),z.sub(U.multiplyScalar(U.dot(re))).normalize(),H.crossVectors(P,re);const ie=H.dot(m[ee])<0?-1:1;h[ee*4]=z.x,h[ee*4+1]=z.y,h[ee*4+2]=z.z,h[ee*4+3]=ie}for(let ee=0,re=L.length;ee<re;++ee){const ie=L[ee],de=ie.start,oe=ie.count;for(let ce=de,me=de+oe;ce<me;ce+=3)K(i[ce+0]),K(i[ce+1]),K(i[ce+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Is(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,S=i.count;v<S;v++)i.setXYZ(v,0,0,0);const s=new be,o=new be,l=new be,u=new be,h=new be,d=new be,m=new be,_=new be;if(e)for(let v=0,S=e.count;v<S;v+=3){const x=e.getX(v+0),w=e.getX(v+1),A=e.getX(v+2);s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,w),l.fromBufferAttribute(t,A),m.subVectors(l,o),_.subVectors(s,o),m.cross(_),u.fromBufferAttribute(i,x),h.fromBufferAttribute(i,w),d.fromBufferAttribute(i,A),u.add(m),h.add(m),d.add(m),i.setXYZ(x,u.x,u.y,u.z),i.setXYZ(w,h.x,h.y,h.z),i.setXYZ(A,d.x,d.y,d.z)}else for(let v=0,S=t.count;v<S;v+=3)s.fromBufferAttribute(t,v+0),o.fromBufferAttribute(t,v+1),l.fromBufferAttribute(t,v+2),m.subVectors(l,o),_.subVectors(s,o),m.cross(_),i.setXYZ(v+0,m.x,m.y,m.z),i.setXYZ(v+1,m.x,m.y,m.z),i.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const s in i){if(e.attributes[s]===void 0)continue;const o=i[s].array,l=e.attributes[s],u=l.array,h=l.itemSize*t,d=Math.min(u.length,o.length-h);for(let m=0,_=h;m<d;m++,_++)o[_]=u[m]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)dh.fromBufferAttribute(e,t),dh.normalize(),e.setXYZ(t,dh.x,dh.y,dh.z)}toNonIndexed(){function e(u,h){const d=u.array,m=u.itemSize,_=u.normalized,v=new d.constructor(h.length*m);let S=0,x=0;for(let w=0,A=h.length;w<A;w++){u.isInterleavedBufferAttribute?S=h[w]*u.data.stride+u.offset:S=h[w]*m;for(let k=0;k<m;k++)v[x++]=d[S++]}return new Is(v,m,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Or,i=this.index.array,s=this.attributes;for(const u in s){const h=s[u],d=e(h,i);t.setAttribute(u,d)}const o=this.morphAttributes;for(const u in o){const h=[],d=o[u];for(let m=0,_=d.length;m<_;m++){const v=d[m],S=e(v,i);h.push(S)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,h=l.length;u<h;u++){const d=l[u];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const d in h)h[d]!==void 0&&(e[d]=h[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const h in i){const d=i[h];e.data.attributes[h]=d.toJSON(e.data)}const s={};let o=!1;for(const h in this.morphAttributes){const d=this.morphAttributes[h],m=[];for(let _=0,v=d.length;_<v;_++){const S=d[_];m.push(S.toJSON(e.data))}m.length>0&&(s[h]=m,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const d in s){const m=s[d];this.setAttribute(d,m.clone(t))}const o=e.morphAttributes;for(const d in o){const m=[],_=o[d];for(let v=0,S=_.length;v<S;v++)m.push(_[v].clone(t));this.morphAttributes[d]=m}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let d=0,m=l.length;d<m;d++){const _=l[d];this.addGroup(_.start,_.count,_.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const U4=new Ar,N1=new Wx,rO=new c0,V_=new be,j_=new be,X_=new be,iO=new be,sO=new be,oO=new be,DC=new be,NC=new be,BC=new be,PC=new Dt,FC=new Dt,UC=new Dt,aO=new be,zC=new be;class Sn extends as{constructor(e=new Or,t=new yg){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(e,t){const i=this.geometry,s=this.material,o=this.matrixWorld;if(s===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),rO.copy(i.boundingSphere),rO.applyMatrix4(o),e.ray.intersectsSphere(rO)===!1)||(U4.copy(o).invert(),N1.copy(e.ray).applyMatrix4(U4),i.boundingBox!==null&&N1.intersectsBox(i.boundingBox)===!1))return;let l;const u=i.index,h=i.attributes.position,d=i.morphAttributes.position,m=i.morphTargetsRelative,_=i.attributes.uv,v=i.attributes.uv2,S=i.groups,x=i.drawRange;if(u!==null)if(Array.isArray(s))for(let w=0,A=S.length;w<A;w++){const k=S[w],O=s[k.materialIndex],D=Math.max(k.start,x.start),L=Math.min(u.count,Math.min(k.start+k.count,x.start+x.count));for(let z=D,H=L;z<H;z+=3){const U=u.getX(z),P=u.getX(z+1),K=u.getX(z+2);l=HC(this,O,e,N1,h,d,m,_,v,U,P,K),l&&(l.faceIndex=Math.floor(z/3),l.face.materialIndex=k.materialIndex,t.push(l))}}else{const w=Math.max(0,x.start),A=Math.min(u.count,x.start+x.count);for(let k=w,O=A;k<O;k+=3){const D=u.getX(k),L=u.getX(k+1),z=u.getX(k+2);l=HC(this,s,e,N1,h,d,m,_,v,D,L,z),l&&(l.faceIndex=Math.floor(k/3),t.push(l))}}else if(h!==void 0)if(Array.isArray(s))for(let w=0,A=S.length;w<A;w++){const k=S[w],O=s[k.materialIndex],D=Math.max(k.start,x.start),L=Math.min(h.count,Math.min(k.start+k.count,x.start+x.count));for(let z=D,H=L;z<H;z+=3){const U=z,P=z+1,K=z+2;l=HC(this,O,e,N1,h,d,m,_,v,U,P,K),l&&(l.faceIndex=Math.floor(z/3),l.face.materialIndex=k.materialIndex,t.push(l))}}else{const w=Math.max(0,x.start),A=Math.min(h.count,x.start+x.count);for(let k=w,O=A;k<O;k+=3){const D=k,L=k+1,z=k+2;l=HC(this,s,e,N1,h,d,m,_,v,D,L,z),l&&(l.faceIndex=Math.floor(k/3),t.push(l))}}}}function Mfe(n,e,t,i,s,o,l,u){let h;if(e.side===Gc?h=i.intersectTriangle(l,o,s,!0,u):h=i.intersectTriangle(s,o,l,e.side!==tp,u),h===null)return null;zC.copy(u),zC.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(zC);return d<t.near||d>t.far?null:{distance:d,point:zC.clone(),object:n}}function HC(n,e,t,i,s,o,l,u,h,d,m,_){V_.fromBufferAttribute(s,d),j_.fromBufferAttribute(s,m),X_.fromBufferAttribute(s,_);const v=n.morphTargetInfluences;if(o&&v){DC.set(0,0,0),NC.set(0,0,0),BC.set(0,0,0);for(let x=0,w=o.length;x<w;x++){const A=v[x],k=o[x];A!==0&&(iO.fromBufferAttribute(k,d),sO.fromBufferAttribute(k,m),oO.fromBufferAttribute(k,_),l?(DC.addScaledVector(iO,A),NC.addScaledVector(sO,A),BC.addScaledVector(oO,A)):(DC.addScaledVector(iO.sub(V_),A),NC.addScaledVector(sO.sub(j_),A),BC.addScaledVector(oO.sub(X_),A)))}V_.add(DC),j_.add(NC),X_.add(BC)}n.isSkinnedMesh&&(n.boneTransform(d,V_),n.boneTransform(m,j_),n.boneTransform(_,X_));const S=Mfe(n,e,t,i,V_,j_,X_,aO);if(S){u&&(PC.fromBufferAttribute(u,d),FC.fromBufferAttribute(u,m),UC.fromBufferAttribute(u,_),S.uv=bf.getUV(aO,V_,j_,X_,PC,FC,UC,new Dt)),h&&(PC.fromBufferAttribute(h,d),FC.fromBufferAttribute(h,m),UC.fromBufferAttribute(h,_),S.uv2=bf.getUV(aO,V_,j_,X_,PC,FC,UC,new Dt));const x={a:d,b:m,c:_,normal:new be,materialIndex:0};bf.getNormal(V_,j_,X_,x.normal),S.face=x}return S}class Pa extends Or{constructor(e=1,t=1,i=1,s=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:o,depthSegments:l};const u=this;s=Math.floor(s),o=Math.floor(o),l=Math.floor(l);const h=[],d=[],m=[],_=[];let v=0,S=0;x("z","y","x",-1,-1,i,t,e,l,o,0),x("z","y","x",1,-1,i,t,-e,l,o,1),x("x","z","y",1,1,e,i,t,s,l,2),x("x","z","y",1,-1,e,i,-t,s,l,3),x("x","y","z",1,-1,e,t,i,s,o,4),x("x","y","z",-1,-1,e,t,-i,s,o,5),this.setIndex(h),this.setAttribute("position",new Fn(d,3)),this.setAttribute("normal",new Fn(m,3)),this.setAttribute("uv",new Fn(_,2));function x(w,A,k,O,D,L,z,H,U,P,K){const ee=L/U,re=z/P,ie=L/2,de=z/2,oe=H/2,ce=U+1,me=P+1;let Ae=0,j=0;const Z=new be;for(let ne=0;ne<me;ne++){const ae=ne*re-de;for(let _e=0;_e<ce;_e++){const Le=_e*ee-ie;Z[w]=Le*O,Z[A]=ae*D,Z[k]=oe,d.push(Z.x,Z.y,Z.z),Z[w]=0,Z[A]=0,Z[k]=H>0?1:-1,m.push(Z.x,Z.y,Z.z),_.push(_e/U),_.push(1-ne/P),Ae+=1}}for(let ne=0;ne<P;ne++)for(let ae=0;ae<U;ae++){const _e=v+ae+ce*ne,Le=v+ae+ce*(ne+1),we=v+(ae+1)+ce*(ne+1),Xe=v+(ae+1)+ce*ne;h.push(_e,Le,Xe),h.push(Le,we,Xe),j+=6}u.addGroup(S,j,K),S+=j,v+=Ae}}static fromJSON(e){return new Pa(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function jT(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function $d(n){const e={};for(let t=0;t<n.length;t++){const i=jT(n[t]);for(const s in i)e[s]=i[s]}return e}function Afe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const Vx={clone:jT,merge:$d};var Ife=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Rfe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class mh extends Wc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Ife,this.fragmentShader=Rfe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=jT(e.uniforms),this.uniformsGroups=Afe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class TS extends as{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ar,this.projectionMatrix=new Ar,this.projectionMatrixInverse=new Ar}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class ko extends TS{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=px*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(eb*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return px*2*Math.atan(Math.tan(eb*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(eb*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,d=l.fullHeight;o+=l.offsetX*s/h,t-=l.offsetY*i/d,s*=l.width/h,i*=l.height/d}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const B1=90,P1=1;class k7 extends as{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const s=new ko(B1,P1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new be(1,0,0)),this.add(s);const o=new ko(B1,P1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new be(-1,0,0)),this.add(o);const l=new ko(B1,P1,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(new be(0,1,0)),this.add(l);const u=new ko(B1,P1,e,t);u.layers=this.layers,u.up.set(0,0,-1),u.lookAt(new be(0,-1,0)),this.add(u);const h=new ko(B1,P1,e,t);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new be(0,0,1)),this.add(h);const d=new ko(B1,P1,e,t);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new be(0,0,-1)),this.add(d)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[s,o,l,u,h,d]=this.children,m=e.getRenderTarget(),_=e.toneMapping,v=e.xr.enabled;e.toneMapping=fg,e.xr.enabled=!1;const S=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,s),e.setRenderTarget(i,1),e.render(t,o),e.setRenderTarget(i,2),e.render(t,l),e.setRenderTarget(i,3),e.render(t,u),e.setRenderTarget(i,4),e.render(t,h),i.texture.generateMipmaps=S,e.setRenderTarget(i,5),e.render(t,d),e.setRenderTarget(m),e.toneMapping=_,e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class jx extends Fl{constructor(e,t,i,s,o,l,u,h,d,m){e=e!==void 0?e:[],t=t!==void 0?t:$v,super(e,t,i,s,o,l,u,h,d,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class O7 extends cu{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new jx(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Xo}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Pa(5,5,5),o=new mh({name:"CubemapFromEquirect",uniforms:jT(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Gc,blending:op});o.uniforms.tEquirect.value=t;const l=new Sn(s,o),u=t.minFilter;return t.minFilter===wb&&(t.minFilter=Xo),new k7(1,10,this).update(e,l),t.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,i,s){const o=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,i,s);e.setRenderTarget(o)}}const lO=new be,kfe=new be,Ofe=new np;class W0{constructor(e=new be(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=lO.subVectors(i,t).cross(kfe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(lO),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(i).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Ofe.getNormalMatrix(e),s=this.coplanarPoint(lO).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const F1=new c0,GC=new be;class wR{constructor(e=new W0,t=new W0,i=new W0,s=new W0,o=new W0,l=new W0){this.planes=[e,t,i,s,o,l]}set(e,t,i,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,s=i[0],o=i[1],l=i[2],u=i[3],h=i[4],d=i[5],m=i[6],_=i[7],v=i[8],S=i[9],x=i[10],w=i[11],A=i[12],k=i[13],O=i[14],D=i[15];return t[0].setComponents(u-s,_-h,w-v,D-A).normalize(),t[1].setComponents(u+s,_+h,w+v,D+A).normalize(),t[2].setComponents(u+o,_+d,w+S,D+k).normalize(),t[3].setComponents(u-o,_-d,w-S,D-k).normalize(),t[4].setComponents(u-l,_-m,w-x,D-O).normalize(),t[5].setComponents(u+l,_+m,w+x,D+O).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),F1.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(F1)}intersectsSprite(e){return F1.center.set(0,0,0),F1.radius=.7071067811865476,F1.applyMatrix4(e.matrixWorld),this.intersectsSphere(F1)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(GC.x=s.normal.x>0?e.max.x:e.min.x,GC.y=s.normal.y>0?e.max.y:e.min.y,GC.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(GC)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function L7(){let n=null,e=!1,t=null,i=null;function s(o,l){t(o,l),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function Lfe(n,e){const t=e.isWebGL2,i=new WeakMap;function s(d,m){const _=d.array,v=d.usage,S=n.createBuffer();n.bindBuffer(m,S),n.bufferData(m,_,v),d.onUploadCallback();let x;if(_ instanceof Float32Array)x=5126;else if(_ instanceof Uint16Array)if(d.isFloat16BufferAttribute)if(t)x=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else x=5123;else if(_ instanceof Int16Array)x=5122;else if(_ instanceof Uint32Array)x=5125;else if(_ instanceof Int32Array)x=5124;else if(_ instanceof Int8Array)x=5120;else if(_ instanceof Uint8Array)x=5121;else if(_ instanceof Uint8ClampedArray)x=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_);return{buffer:S,type:x,bytesPerElement:_.BYTES_PER_ELEMENT,version:d.version}}function o(d,m,_){const v=m.array,S=m.updateRange;n.bindBuffer(_,d),S.count===-1?n.bufferSubData(_,0,v):(t?n.bufferSubData(_,S.offset*v.BYTES_PER_ELEMENT,v,S.offset,S.count):n.bufferSubData(_,S.offset*v.BYTES_PER_ELEMENT,v.subarray(S.offset,S.offset+S.count)),S.count=-1)}function l(d){return d.isInterleavedBufferAttribute&&(d=d.data),i.get(d)}function u(d){d.isInterleavedBufferAttribute&&(d=d.data);const m=i.get(d);m&&(n.deleteBuffer(m.buffer),i.delete(d))}function h(d,m){if(d.isGLBufferAttribute){const v=i.get(d);(!v||v.version<d.version)&&i.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}d.isInterleavedBufferAttribute&&(d=d.data);const _=i.get(d);_===void 0?i.set(d,s(d,m)):_.version<d.version&&(o(_.buffer,d,m),_.version=d.version)}return{get:l,remove:u,update:h}}class gg extends Or{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const o=e/2,l=t/2,u=Math.floor(i),h=Math.floor(s),d=u+1,m=h+1,_=e/u,v=t/h,S=[],x=[],w=[],A=[];for(let k=0;k<m;k++){const O=k*v-l;for(let D=0;D<d;D++){const L=D*_-o;x.push(L,-O,0),w.push(0,0,1),A.push(D/u),A.push(1-k/h)}}for(let k=0;k<h;k++)for(let O=0;O<u;O++){const D=O+d*k,L=O+d*(k+1),z=O+1+d*(k+1),H=O+1+d*k;S.push(D,L,H),S.push(L,z,H)}this.setIndex(S),this.setAttribute("position",new Fn(x,3)),this.setAttribute("normal",new Fn(w,3)),this.setAttribute("uv",new Fn(A,2))}static fromJSON(e){return new gg(e.width,e.height,e.widthSegments,e.heightSegments)}}var Dfe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Nfe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Bfe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Pfe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Ffe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ufe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,zfe="vec3 transformed = vec3( position );",Hfe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Gfe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Wfe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Vfe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,jfe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Xfe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Yfe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Kfe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Jfe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Qfe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,qfe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Zfe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,eme=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,tme=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,nme=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,rme=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ime=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,sme=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ome=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ame="gl_FragColor = linearToOutputTexel( gl_FragColor );",lme=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,ume=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,cme=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,hme=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,dme=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,pme=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fme=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,mme=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,gme=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,_me=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,vme=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,yme=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,bme=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Tme=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Sme=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Eme=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,$me=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,xme=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,wme=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Cme=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Mme=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Ame=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ime=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Rme=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,kme=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Ome=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Lme=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Dme=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Nme=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Bme=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Pme=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Fme=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Ume=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,zme=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Hme=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Gme=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Wme=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Vme=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,jme=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Xme=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Yme=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Kme=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Jme=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Qme=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,qme=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Zme=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,ege=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,tge=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,nge=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,rge=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,ige=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,sge=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,oge=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,age=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,lge=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,uge=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,cge=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,hge=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,dge=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,pge=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,fge=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,mge=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,gge=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,_ge=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,vge=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,yge=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,bge=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Tge=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Sge=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Ege=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,$ge=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,xge=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,wge=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Cge=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Mge=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Age=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Ige=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Rge=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const kge=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Oge=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Lge=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Dge=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Nge=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Bge=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Pge=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Fge=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Uge=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,zge=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Hge=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Gge=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Wge=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Vge=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jge=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Xge=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yge=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Kge=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jge=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Qge=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,qge=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zge=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,e0e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,t0e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n0e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,r0e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i0e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,s0e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,o0e=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a0e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,l0e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,u0e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Si={alphamap_fragment:Dfe,alphamap_pars_fragment:Nfe,alphatest_fragment:Bfe,alphatest_pars_fragment:Pfe,aomap_fragment:Ffe,aomap_pars_fragment:Ufe,begin_vertex:zfe,beginnormal_vertex:Hfe,bsdfs:Gfe,iridescence_fragment:Wfe,bumpmap_pars_fragment:Vfe,clipping_planes_fragment:jfe,clipping_planes_pars_fragment:Xfe,clipping_planes_pars_vertex:Yfe,clipping_planes_vertex:Kfe,color_fragment:Jfe,color_pars_fragment:Qfe,color_pars_vertex:qfe,color_vertex:Zfe,common:eme,cube_uv_reflection_fragment:tme,defaultnormal_vertex:nme,displacementmap_pars_vertex:rme,displacementmap_vertex:ime,emissivemap_fragment:sme,emissivemap_pars_fragment:ome,encodings_fragment:ame,encodings_pars_fragment:lme,envmap_fragment:ume,envmap_common_pars_fragment:cme,envmap_pars_fragment:hme,envmap_pars_vertex:dme,envmap_physical_pars_fragment:Eme,envmap_vertex:pme,fog_vertex:fme,fog_pars_vertex:mme,fog_fragment:gme,fog_pars_fragment:_me,gradientmap_pars_fragment:vme,lightmap_fragment:yme,lightmap_pars_fragment:bme,lights_lambert_vertex:Tme,lights_pars_begin:Sme,lights_toon_fragment:$me,lights_toon_pars_fragment:xme,lights_phong_fragment:wme,lights_phong_pars_fragment:Cme,lights_physical_fragment:Mme,lights_physical_pars_fragment:Ame,lights_fragment_begin:Ime,lights_fragment_maps:Rme,lights_fragment_end:kme,logdepthbuf_fragment:Ome,logdepthbuf_pars_fragment:Lme,logdepthbuf_pars_vertex:Dme,logdepthbuf_vertex:Nme,map_fragment:Bme,map_pars_fragment:Pme,map_particle_fragment:Fme,map_particle_pars_fragment:Ume,metalnessmap_fragment:zme,metalnessmap_pars_fragment:Hme,morphcolor_vertex:Gme,morphnormal_vertex:Wme,morphtarget_pars_vertex:Vme,morphtarget_vertex:jme,normal_fragment_begin:Xme,normal_fragment_maps:Yme,normal_pars_fragment:Kme,normal_pars_vertex:Jme,normal_vertex:Qme,normalmap_pars_fragment:qme,clearcoat_normal_fragment_begin:Zme,clearcoat_normal_fragment_maps:ege,clearcoat_pars_fragment:tge,iridescence_pars_fragment:nge,output_fragment:rge,packing:ige,premultiplied_alpha_fragment:sge,project_vertex:oge,dithering_fragment:age,dithering_pars_fragment:lge,roughnessmap_fragment:uge,roughnessmap_pars_fragment:cge,shadowmap_pars_fragment:hge,shadowmap_pars_vertex:dge,shadowmap_vertex:pge,shadowmask_pars_fragment:fge,skinbase_vertex:mge,skinning_pars_vertex:gge,skinning_vertex:_ge,skinnormal_vertex:vge,specularmap_fragment:yge,specularmap_pars_fragment:bge,tonemapping_fragment:Tge,tonemapping_pars_fragment:Sge,transmission_fragment:Ege,transmission_pars_fragment:$ge,uv_pars_fragment:xge,uv_pars_vertex:wge,uv_vertex:Cge,uv2_pars_fragment:Mge,uv2_pars_vertex:Age,uv2_vertex:Ige,worldpos_vertex:Rge,background_vert:kge,background_frag:Oge,cube_vert:Lge,cube_frag:Dge,depth_vert:Nge,depth_frag:Bge,distanceRGBA_vert:Pge,distanceRGBA_frag:Fge,equirect_vert:Uge,equirect_frag:zge,linedashed_vert:Hge,linedashed_frag:Gge,meshbasic_vert:Wge,meshbasic_frag:Vge,meshlambert_vert:jge,meshlambert_frag:Xge,meshmatcap_vert:Yge,meshmatcap_frag:Kge,meshnormal_vert:Jge,meshnormal_frag:Qge,meshphong_vert:qge,meshphong_frag:Zge,meshphysical_vert:e0e,meshphysical_frag:t0e,meshtoon_vert:n0e,meshtoon_frag:r0e,points_vert:i0e,points_frag:s0e,shadow_vert:o0e,shadow_frag:a0e,sprite_vert:l0e,sprite_frag:u0e},wn={common:{diffuse:{value:new vn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new np},uv2Transform:{value:new np},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Dt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new np}},sprite:{diffuse:{value:new vn(16777215)},opacity:{value:1},center:{value:new Dt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new np}}},Zd={basic:{uniforms:$d([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.fog]),vertexShader:Si.meshbasic_vert,fragmentShader:Si.meshbasic_frag},lambert:{uniforms:$d([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.fog,wn.lights,{emissive:{value:new vn(0)}}]),vertexShader:Si.meshlambert_vert,fragmentShader:Si.meshlambert_frag},phong:{uniforms:$d([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,wn.lights,{emissive:{value:new vn(0)},specular:{value:new vn(1118481)},shininess:{value:30}}]),vertexShader:Si.meshphong_vert,fragmentShader:Si.meshphong_frag},standard:{uniforms:$d([wn.common,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.roughnessmap,wn.metalnessmap,wn.fog,wn.lights,{emissive:{value:new vn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Si.meshphysical_vert,fragmentShader:Si.meshphysical_frag},toon:{uniforms:$d([wn.common,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.gradientmap,wn.fog,wn.lights,{emissive:{value:new vn(0)}}]),vertexShader:Si.meshtoon_vert,fragmentShader:Si.meshtoon_frag},matcap:{uniforms:$d([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,{matcap:{value:null}}]),vertexShader:Si.meshmatcap_vert,fragmentShader:Si.meshmatcap_frag},points:{uniforms:$d([wn.points,wn.fog]),vertexShader:Si.points_vert,fragmentShader:Si.points_frag},dashed:{uniforms:$d([wn.common,wn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Si.linedashed_vert,fragmentShader:Si.linedashed_frag},depth:{uniforms:$d([wn.common,wn.displacementmap]),vertexShader:Si.depth_vert,fragmentShader:Si.depth_frag},normal:{uniforms:$d([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,{opacity:{value:1}}]),vertexShader:Si.meshnormal_vert,fragmentShader:Si.meshnormal_frag},sprite:{uniforms:$d([wn.sprite,wn.fog]),vertexShader:Si.sprite_vert,fragmentShader:Si.sprite_frag},background:{uniforms:{uvTransform:{value:new np},t2D:{value:null}},vertexShader:Si.background_vert,fragmentShader:Si.background_frag},cube:{uniforms:$d([wn.envmap,{opacity:{value:1}}]),vertexShader:Si.cube_vert,fragmentShader:Si.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Si.equirect_vert,fragmentShader:Si.equirect_frag},distanceRGBA:{uniforms:$d([wn.common,wn.displacementmap,{referencePosition:{value:new be},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Si.distanceRGBA_vert,fragmentShader:Si.distanceRGBA_frag},shadow:{uniforms:$d([wn.lights,wn.fog,{color:{value:new vn(0)},opacity:{value:1}}]),vertexShader:Si.shadow_vert,fragmentShader:Si.shadow_frag}};Zd.physical={uniforms:$d([Zd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Dt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new vn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Dt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new vn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new vn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Si.meshphysical_vert,fragmentShader:Si.meshphysical_frag};function c0e(n,e,t,i,s,o){const l=new vn(0);let u=s===!0?0:1,h,d,m=null,_=0,v=null;function S(w,A){let k=!1,O=A.isScene===!0?A.background:null;O&&O.isTexture&&(O=e.get(O));const D=n.xr,L=D.getSession&&D.getSession();L&&L.environmentBlendMode==="additive"&&(O=null),O===null?x(l,u):O&&O.isColor&&(x(O,1),k=!0),(n.autoClear||k)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),O&&(O.isCubeTexture||O.mapping===bS)?(d===void 0&&(d=new Sn(new Pa(1,1,1),new mh({name:"BackgroundCubeMaterial",uniforms:jT(Zd.cube.uniforms),vertexShader:Zd.cube.vertexShader,fragmentShader:Zd.cube.fragmentShader,side:Gc,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(z,H,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),d.material.uniforms.envMap.value=O,d.material.uniforms.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,(m!==O||_!==O.version||v!==n.toneMapping)&&(d.material.needsUpdate=!0,m=O,_=O.version,v=n.toneMapping),d.layers.enableAll(),w.unshift(d,d.geometry,d.material,0,0,null)):O&&O.isTexture&&(h===void 0&&(h=new Sn(new gg(2,2),new mh({name:"BackgroundMaterial",uniforms:jT(Zd.background.uniforms),vertexShader:Zd.background.vertexShader,fragmentShader:Zd.background.fragmentShader,side:s0,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(h)),h.material.uniforms.t2D.value=O,O.matrixAutoUpdate===!0&&O.updateMatrix(),h.material.uniforms.uvTransform.value.copy(O.matrix),(m!==O||_!==O.version||v!==n.toneMapping)&&(h.material.needsUpdate=!0,m=O,_=O.version,v=n.toneMapping),h.layers.enableAll(),w.unshift(h,h.geometry,h.material,0,0,null))}function x(w,A){t.buffers.color.setClear(w.r,w.g,w.b,A,o)}return{getClearColor:function(){return l},setClearColor:function(w,A=1){l.set(w),u=A,x(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(w){u=w,x(l,u)},render:S}}function h0e(n,e,t,i){const s=n.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),l=i.isWebGL2||o!==null,u={},h=A(null);let d=h,m=!1;function _(oe,ce,me,Ae,j){let Z=!1;if(l){const ne=w(Ae,me,ce);d!==ne&&(d=ne,S(d.object)),Z=k(oe,Ae,me,j),Z&&O(oe,Ae,me,j)}else{const ne=ce.wireframe===!0;(d.geometry!==Ae.id||d.program!==me.id||d.wireframe!==ne)&&(d.geometry=Ae.id,d.program=me.id,d.wireframe=ne,Z=!0)}j!==null&&t.update(j,34963),(Z||m)&&(m=!1,P(oe,ce,me,Ae),j!==null&&n.bindBuffer(34963,t.get(j).buffer))}function v(){return i.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}function S(oe){return i.isWebGL2?n.bindVertexArray(oe):o.bindVertexArrayOES(oe)}function x(oe){return i.isWebGL2?n.deleteVertexArray(oe):o.deleteVertexArrayOES(oe)}function w(oe,ce,me){const Ae=me.wireframe===!0;let j=u[oe.id];j===void 0&&(j={},u[oe.id]=j);let Z=j[ce.id];Z===void 0&&(Z={},j[ce.id]=Z);let ne=Z[Ae];return ne===void 0&&(ne=A(v()),Z[Ae]=ne),ne}function A(oe){const ce=[],me=[],Ae=[];for(let j=0;j<s;j++)ce[j]=0,me[j]=0,Ae[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ce,enabledAttributes:me,attributeDivisors:Ae,object:oe,attributes:{},index:null}}function k(oe,ce,me,Ae){const j=d.attributes,Z=ce.attributes;let ne=0;const ae=me.getAttributes();for(const _e in ae)if(ae[_e].location>=0){const Le=j[_e];let we=Z[_e];if(we===void 0&&(_e==="instanceMatrix"&&oe.instanceMatrix&&(we=oe.instanceMatrix),_e==="instanceColor"&&oe.instanceColor&&(we=oe.instanceColor)),Le===void 0||Le.attribute!==we||we&&Le.data!==we.data)return!0;ne++}return d.attributesNum!==ne||d.index!==Ae}function O(oe,ce,me,Ae){const j={},Z=ce.attributes;let ne=0;const ae=me.getAttributes();for(const _e in ae)if(ae[_e].location>=0){let Le=Z[_e];Le===void 0&&(_e==="instanceMatrix"&&oe.instanceMatrix&&(Le=oe.instanceMatrix),_e==="instanceColor"&&oe.instanceColor&&(Le=oe.instanceColor));const we={};we.attribute=Le,Le&&Le.data&&(we.data=Le.data),j[_e]=we,ne++}d.attributes=j,d.attributesNum=ne,d.index=Ae}function D(){const oe=d.newAttributes;for(let ce=0,me=oe.length;ce<me;ce++)oe[ce]=0}function L(oe){z(oe,0)}function z(oe,ce){const me=d.newAttributes,Ae=d.enabledAttributes,j=d.attributeDivisors;me[oe]=1,Ae[oe]===0&&(n.enableVertexAttribArray(oe),Ae[oe]=1),j[oe]!==ce&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](oe,ce),j[oe]=ce)}function H(){const oe=d.newAttributes,ce=d.enabledAttributes;for(let me=0,Ae=ce.length;me<Ae;me++)ce[me]!==oe[me]&&(n.disableVertexAttribArray(me),ce[me]=0)}function U(oe,ce,me,Ae,j,Z){i.isWebGL2===!0&&(me===5124||me===5125)?n.vertexAttribIPointer(oe,ce,me,j,Z):n.vertexAttribPointer(oe,ce,me,Ae,j,Z)}function P(oe,ce,me,Ae){if(i.isWebGL2===!1&&(oe.isInstancedMesh||Ae.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;D();const j=Ae.attributes,Z=me.getAttributes(),ne=ce.defaultAttributeValues;for(const ae in Z){const _e=Z[ae];if(_e.location>=0){let Le=j[ae];if(Le===void 0&&(ae==="instanceMatrix"&&oe.instanceMatrix&&(Le=oe.instanceMatrix),ae==="instanceColor"&&oe.instanceColor&&(Le=oe.instanceColor)),Le!==void 0){const we=Le.normalized,Xe=Le.itemSize,Re=t.get(Le);if(Re===void 0)continue;const qe=Re.buffer,Je=Re.type,ht=Re.bytesPerElement;if(Le.isInterleavedBufferAttribute){const it=Le.data,Oe=it.stride,Ee=Le.offset;if(it.isInstancedInterleavedBuffer){for(let Fe=0;Fe<_e.locationSize;Fe++)z(_e.location+Fe,it.meshPerAttribute);oe.isInstancedMesh!==!0&&Ae._maxInstanceCount===void 0&&(Ae._maxInstanceCount=it.meshPerAttribute*it.count)}else for(let Fe=0;Fe<_e.locationSize;Fe++)L(_e.location+Fe);n.bindBuffer(34962,qe);for(let Fe=0;Fe<_e.locationSize;Fe++)U(_e.location+Fe,Xe/_e.locationSize,Je,we,Oe*ht,(Ee+Xe/_e.locationSize*Fe)*ht)}else{if(Le.isInstancedBufferAttribute){for(let it=0;it<_e.locationSize;it++)z(_e.location+it,Le.meshPerAttribute);oe.isInstancedMesh!==!0&&Ae._maxInstanceCount===void 0&&(Ae._maxInstanceCount=Le.meshPerAttribute*Le.count)}else for(let it=0;it<_e.locationSize;it++)L(_e.location+it);n.bindBuffer(34962,qe);for(let it=0;it<_e.locationSize;it++)U(_e.location+it,Xe/_e.locationSize,Je,we,Xe*ht,Xe/_e.locationSize*it*ht)}}else if(ne!==void 0){const we=ne[ae];if(we!==void 0)switch(we.length){case 2:n.vertexAttrib2fv(_e.location,we);break;case 3:n.vertexAttrib3fv(_e.location,we);break;case 4:n.vertexAttrib4fv(_e.location,we);break;default:n.vertexAttrib1fv(_e.location,we)}}}}H()}function K(){ie();for(const oe in u){const ce=u[oe];for(const me in ce){const Ae=ce[me];for(const j in Ae)x(Ae[j].object),delete Ae[j];delete ce[me]}delete u[oe]}}function ee(oe){if(u[oe.id]===void 0)return;const ce=u[oe.id];for(const me in ce){const Ae=ce[me];for(const j in Ae)x(Ae[j].object),delete Ae[j];delete ce[me]}delete u[oe.id]}function re(oe){for(const ce in u){const me=u[ce];if(me[oe.id]===void 0)continue;const Ae=me[oe.id];for(const j in Ae)x(Ae[j].object),delete Ae[j];delete me[oe.id]}}function ie(){de(),m=!0,d!==h&&(d=h,S(d.object))}function de(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:_,reset:ie,resetDefaultState:de,dispose:K,releaseStatesOfGeometry:ee,releaseStatesOfProgram:re,initAttributes:D,enableAttribute:L,disableUnusedAttributes:H}}function d0e(n,e,t,i){const s=i.isWebGL2;let o;function l(d){o=d}function u(d,m){n.drawArrays(o,d,m),t.update(m,o,1)}function h(d,m,_){if(_===0)return;let v,S;if(s)v=n,S="drawArraysInstanced";else if(v=e.get("ANGLE_instanced_arrays"),S="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[S](o,d,m,_),t.update(m,o,_)}this.setMode=l,this.render=u,this.renderInstances=h}function p0e(n,e,t){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const U=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(U.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(U){if(U==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";U="mediump"}return U==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const l=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let u=t.precision!==void 0?t.precision:"highp";const h=o(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const d=l||e.has("WEBGL_draw_buffers"),m=t.logarithmicDepthBuffer===!0,_=n.getParameter(34930),v=n.getParameter(35660),S=n.getParameter(3379),x=n.getParameter(34076),w=n.getParameter(34921),A=n.getParameter(36347),k=n.getParameter(36348),O=n.getParameter(36349),D=v>0,L=l||e.has("OES_texture_float"),z=D&&L,H=l?n.getParameter(36183):0;return{isWebGL2:l,drawBuffers:d,getMaxAnisotropy:s,getMaxPrecision:o,precision:u,logarithmicDepthBuffer:m,maxTextures:_,maxVertexTextures:v,maxTextureSize:S,maxCubemapSize:x,maxAttributes:w,maxVertexUniforms:A,maxVaryings:k,maxFragmentUniforms:O,vertexTextures:D,floatFragmentTextures:L,floatVertexTextures:z,maxSamples:H}}function f0e(n){const e=this;let t=null,i=0,s=!1,o=!1;const l=new W0,u=new np,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(_,v,S){const x=_.length!==0||v||i!==0||s;return s=v,t=m(_,S,0),i=_.length,x},this.beginShadows=function(){o=!0,m(null)},this.endShadows=function(){o=!1,d()},this.setState=function(_,v,S){const x=_.clippingPlanes,w=_.clipIntersection,A=_.clipShadows,k=n.get(_);if(!s||x===null||x.length===0||o&&!A)o?m(null):d();else{const O=o?0:i,D=O*4;let L=k.clippingState||null;h.value=L,L=m(x,v,D,S);for(let z=0;z!==D;++z)L[z]=t[z];k.clippingState=L,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=O}};function d(){h.value!==t&&(h.value=t,h.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function m(_,v,S,x){const w=_!==null?_.length:0;let A=null;if(w!==0){if(A=h.value,x!==!0||A===null){const k=S+w*4,O=v.matrixWorldInverse;u.getNormalMatrix(O),(A===null||A.length<k)&&(A=new Float32Array(k));for(let D=0,L=S;D!==w;++D,L+=4)l.copy(_[D]).applyMatrix4(O,u),l.normal.toArray(A,L),A[L+3]=l.constant}h.value=A,h.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,A}}function m0e(n){let e=new WeakMap;function t(l,u){return u===ox?l.mapping=$v:u===ax&&(l.mapping=xv),l}function i(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){const u=l.mapping;if(u===ox||u===ax)if(e.has(l)){const h=e.get(l).texture;return t(h,l.mapping)}else{const h=l.image;if(h&&h.height>0){const d=new O7(h.height/2);return d.fromEquirectangularTexture(n,l),e.set(l,d),l.addEventListener("dispose",s),t(d.texture,l.mapping)}else return null}}return l}function s(l){const u=l.target;u.removeEventListener("dispose",s);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}class t0 extends TS{constructor(e=-1,t=1,i=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-e,l=i+e,u=s+t,h=s-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=d*this.view.offsetX,l=o+d*this.view.width,u-=m*this.view.offsetY,h=u-m*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const hT=4,z4=[.125,.215,.35,.446,.526,.582],Ly=20,uO=new t0,H4=new vn;let cO=null;const Iy=(1+Math.sqrt(5))/2,U1=1/Iy,G4=[new be(1,1,1),new be(-1,1,1),new be(1,1,-1),new be(-1,1,-1),new be(0,Iy,U1),new be(0,Iy,-U1),new be(U1,0,Iy),new be(-U1,0,Iy),new be(Iy,U1,0),new be(-Iy,U1,0)];class YD{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){cO=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,s,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=j4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=V4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(cO),e.scissorTest=!1,WC(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===$v||e.mapping===xv?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cO=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Xo,minFilter:Xo,generateMipmaps:!1,type:mb,format:Pp,encoding:$m,depthBuffer:!1},s=W4(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=W4(e,t,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=g0e(o)),this._blurMaterial=_0e(o,e,t)}return s}_compileMaterial(e){const t=new Sn(this._lodPlanes[0],e);this._renderer.compile(t,uO)}_sceneToCubeUV(e,t,i,s){const o=new ko(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,m=h.toneMapping;h.getClearColor(H4),h.toneMapping=fg,h.autoClear=!1;const _=new yg({name:"PMREM.Background",side:Gc,depthWrite:!1,depthTest:!1}),v=new Sn(new Pa,_);let S=!1;const x=e.background;x?x.isColor&&(_.color.copy(x),e.background=null,S=!0):(_.color.copy(H4),S=!0);for(let w=0;w<6;w++){const A=w%3;A===0?(o.up.set(0,l[w],0),o.lookAt(u[w],0,0)):A===1?(o.up.set(0,0,l[w]),o.lookAt(0,u[w],0)):(o.up.set(0,l[w],0),o.lookAt(0,0,u[w]));const k=this._cubeSize;WC(s,A*k,w>2?k:0,k,k),h.setRenderTarget(s),S&&h.render(v,o),h.render(e,o)}v.geometry.dispose(),v.material.dispose(),h.toneMapping=m,h.autoClear=d,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===$v||e.mapping===xv;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=j4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=V4());const o=s?this._cubemapMaterial:this._equirectMaterial,l=new Sn(this._lodPlanes[0],o),u=o.uniforms;u.envMap.value=e;const h=this._cubeSize;WC(t,0,0,3*h,2*h),i.setRenderTarget(t),i.render(l,uO)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=G4[(s-1)%G4.length];this._blur(e,s-1,s,o,l)}t.autoClear=i}_blur(e,t,i,s,o){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,i,s,"latitudinal",o),this._halfBlur(l,e,i,i,s,"longitudinal",o)}_halfBlur(e,t,i,s,o,l,u){const h=this._renderer,d=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,_=new Sn(this._lodPlanes[s],d),v=d.uniforms,S=this._sizeLods[i]-1,x=isFinite(o)?Math.PI/(2*S):2*Math.PI/(2*Ly-1),w=o/x,A=isFinite(o)?1+Math.floor(m*w):Ly;A>Ly&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${Ly}`);const k=[];let O=0;for(let U=0;U<Ly;++U){const P=U/w,K=Math.exp(-P*P/2);k.push(K),U===0?O+=K:U<A&&(O+=2*K)}for(let U=0;U<k.length;U++)k[U]=k[U]/O;v.envMap.value=e.texture,v.samples.value=A,v.weights.value=k,v.latitudinal.value=l==="latitudinal",u&&(v.poleAxis.value=u);const{_lodMax:D}=this;v.dTheta.value=x,v.mipInt.value=D-i;const L=this._sizeLods[s],z=3*L*(s>D-hT?s-D+hT:0),H=4*(this._cubeSize-L);WC(t,z,H,3*L,2*L),h.setRenderTarget(t),h.render(_,uO)}}function g0e(n){const e=[],t=[],i=[];let s=n;const o=n-hT+1+z4.length;for(let l=0;l<o;l++){const u=Math.pow(2,s);t.push(u);let h=1/u;l>n-hT?h=z4[l-n+hT-1]:l===0&&(h=0),i.push(h);const d=1/(u-2),m=-d,_=1+d,v=[m,m,_,m,_,_,m,m,_,_,m,_],S=6,x=6,w=3,A=2,k=1,O=new Float32Array(w*x*S),D=new Float32Array(A*x*S),L=new Float32Array(k*x*S);for(let H=0;H<S;H++){const U=H%3*2/3-1,P=H>2?0:-1,K=[U,P,0,U+2/3,P,0,U+2/3,P+1,0,U,P,0,U+2/3,P+1,0,U,P+1,0];O.set(K,w*x*H),D.set(v,A*x*H);const ee=[H,H,H,H,H,H];L.set(ee,k*x*H)}const z=new Or;z.setAttribute("position",new Is(O,w)),z.setAttribute("uv",new Is(D,A)),z.setAttribute("faceIndex",new Is(L,k)),e.push(z),s>hT&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function W4(n,e,t){const i=new cu(n,e,t);return i.texture.mapping=bS,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function WC(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function _0e(n,e,t){const i=new Float32Array(Ly),s=new be(0,1,0);return new mh({name:"SphericalGaussianBlur",defines:{n:Ly,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:CP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:op,depthTest:!1,depthWrite:!1})}function V4(){return new mh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:CP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:op,depthTest:!1,depthWrite:!1})}function j4(){return new mh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:CP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:op,depthTest:!1,depthWrite:!1})}function CP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function v0e(n){let e=new WeakMap,t=null;function i(u){if(u&&u.isTexture){const h=u.mapping,d=h===ox||h===ax,m=h===$v||h===xv;if(d||m)if(u.isRenderTargetTexture&&u.needsPMREMUpdate===!0){u.needsPMREMUpdate=!1;let _=e.get(u);return t===null&&(t=new YD(n)),_=d?t.fromEquirectangular(u,_):t.fromCubemap(u,_),e.set(u,_),_.texture}else{if(e.has(u))return e.get(u).texture;{const _=u.image;if(d&&_&&_.height>0||m&&_&&s(_)){t===null&&(t=new YD(n));const v=d?t.fromEquirectangular(u):t.fromCubemap(u);return e.set(u,v),u.addEventListener("dispose",o),v.texture}else return null}}}return u}function s(u){let h=0;const d=6;for(let m=0;m<d;m++)u[m]!==void 0&&h++;return h===d}function o(u){const h=u.target;h.removeEventListener("dispose",o);const d=e.get(h);d!==void 0&&(e.delete(h),d.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:l}}function y0e(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const s=t(i);return s===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function b0e(n,e,t,i){const s={},o=new WeakMap;function l(_){const v=_.target;v.index!==null&&e.remove(v.index);for(const x in v.attributes)e.remove(v.attributes[x]);v.removeEventListener("dispose",l),delete s[v.id];const S=o.get(v);S&&(e.remove(S),o.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function u(_,v){return s[v.id]===!0||(v.addEventListener("dispose",l),s[v.id]=!0,t.memory.geometries++),v}function h(_){const v=_.attributes;for(const x in v)e.update(v[x],34962);const S=_.morphAttributes;for(const x in S){const w=S[x];for(let A=0,k=w.length;A<k;A++)e.update(w[A],34962)}}function d(_){const v=[],S=_.index,x=_.attributes.position;let w=0;if(S!==null){const O=S.array;w=S.version;for(let D=0,L=O.length;D<L;D+=3){const z=O[D+0],H=O[D+1],U=O[D+2];v.push(z,H,H,U,U,z)}}else{const O=x.array;w=x.version;for(let D=0,L=O.length/3-1;D<L;D+=3){const z=D+0,H=D+1,U=D+2;v.push(z,H,H,U,U,z)}}const A=new(I7(v)?wP:xP)(v,1);A.version=w;const k=o.get(_);k&&e.remove(k),o.set(_,A)}function m(_){const v=o.get(_);if(v){const S=_.index;S!==null&&v.version<S.version&&d(_)}else d(_);return o.get(_)}return{get:u,update:h,getWireframeAttribute:m}}function T0e(n,e,t,i){const s=i.isWebGL2;let o;function l(v){o=v}let u,h;function d(v){u=v.type,h=v.bytesPerElement}function m(v,S){n.drawElements(o,S,u,v*h),t.update(S,o,1)}function _(v,S,x){if(x===0)return;let w,A;if(s)w=n,A="drawElementsInstanced";else if(w=e.get("ANGLE_instanced_arrays"),A="drawElementsInstancedANGLE",w===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}w[A](o,S,u,v*h,x),t.update(S,o,x)}this.setMode=l,this.setIndex=d,this.render=m,this.renderInstances=_}function S0e(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,l,u){switch(t.calls++,l){case 4:t.triangles+=u*(o/3);break;case 1:t.lines+=u*(o/2);break;case 3:t.lines+=u*(o-1);break;case 2:t.lines+=u*o;break;case 0:t.points+=u*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function E0e(n,e){return n[0]-e[0]}function $0e(n,e){return Math.abs(e[1])-Math.abs(n[1])}function hO(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Uint8Array?t=255:i instanceof Uint16Array?t=65535:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function x0e(n,e,t){const i={},s=new Float32Array(8),o=new WeakMap,l=new Ii,u=[];for(let d=0;d<8;d++)u[d]=[d,0];function h(d,m,_,v){const S=d.morphTargetInfluences;if(e.isWebGL2===!0){const x=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,w=x!==void 0?x.length:0;let A=o.get(m);if(A===void 0||A.count!==w){let D=function(){oe.dispose(),o.delete(m),m.removeEventListener("dispose",D)};A!==void 0&&A.texture.dispose();const L=m.morphAttributes.position!==void 0,z=m.morphAttributes.normal!==void 0,H=m.morphAttributes.color!==void 0,U=m.morphAttributes.position||[],P=m.morphAttributes.normal||[],K=m.morphAttributes.color||[];let ee=0;L===!0&&(ee=1),z===!0&&(ee=2),H===!0&&(ee=3);let re=m.attributes.position.count*ee,ie=1;re>e.maxTextureSize&&(ie=Math.ceil(re/e.maxTextureSize),re=e.maxTextureSize);const de=new Float32Array(re*ie*4*w),oe=new Gx(de,re,ie,w);oe.type=Qg,oe.needsUpdate=!0;const ce=ee*4;for(let me=0;me<w;me++){const Ae=U[me],j=P[me],Z=K[me],ne=re*ie*4*me;for(let ae=0;ae<Ae.count;ae++){const _e=ae*ce;L===!0&&(l.fromBufferAttribute(Ae,ae),Ae.normalized===!0&&hO(l,Ae),de[ne+_e+0]=l.x,de[ne+_e+1]=l.y,de[ne+_e+2]=l.z,de[ne+_e+3]=0),z===!0&&(l.fromBufferAttribute(j,ae),j.normalized===!0&&hO(l,j),de[ne+_e+4]=l.x,de[ne+_e+5]=l.y,de[ne+_e+6]=l.z,de[ne+_e+7]=0),H===!0&&(l.fromBufferAttribute(Z,ae),Z.normalized===!0&&hO(l,Z),de[ne+_e+8]=l.x,de[ne+_e+9]=l.y,de[ne+_e+10]=l.z,de[ne+_e+11]=Z.itemSize===4?l.w:1)}}A={count:w,texture:oe,size:new Dt(re,ie)},o.set(m,A),m.addEventListener("dispose",D)}let k=0;for(let D=0;D<S.length;D++)k+=S[D];const O=m.morphTargetsRelative?1:1-k;v.getUniforms().setValue(n,"morphTargetBaseInfluence",O),v.getUniforms().setValue(n,"morphTargetInfluences",S),v.getUniforms().setValue(n,"morphTargetsTexture",A.texture,t),v.getUniforms().setValue(n,"morphTargetsTextureSize",A.size)}else{const x=S===void 0?0:S.length;let w=i[m.id];if(w===void 0||w.length!==x){w=[];for(let L=0;L<x;L++)w[L]=[L,0];i[m.id]=w}for(let L=0;L<x;L++){const z=w[L];z[0]=L,z[1]=S[L]}w.sort($0e);for(let L=0;L<8;L++)L<x&&w[L][1]?(u[L][0]=w[L][0],u[L][1]=w[L][1]):(u[L][0]=Number.MAX_SAFE_INTEGER,u[L][1]=0);u.sort(E0e);const A=m.morphAttributes.position,k=m.morphAttributes.normal;let O=0;for(let L=0;L<8;L++){const z=u[L],H=z[0],U=z[1];H!==Number.MAX_SAFE_INTEGER&&U?(A&&m.getAttribute("morphTarget"+L)!==A[H]&&m.setAttribute("morphTarget"+L,A[H]),k&&m.getAttribute("morphNormal"+L)!==k[H]&&m.setAttribute("morphNormal"+L,k[H]),s[L]=U,O+=U):(A&&m.hasAttribute("morphTarget"+L)===!0&&m.deleteAttribute("morphTarget"+L),k&&m.hasAttribute("morphNormal"+L)===!0&&m.deleteAttribute("morphNormal"+L),s[L]=0)}const D=m.morphTargetsRelative?1:1-O;v.getUniforms().setValue(n,"morphTargetBaseInfluence",D),v.getUniforms().setValue(n,"morphTargetInfluences",s)}}return{update:h}}function w0e(n,e,t,i){let s=new WeakMap;function o(h){const d=i.render.frame,m=h.geometry,_=e.get(h,m);return s.get(_)!==d&&(e.update(_),s.set(_,d)),h.isInstancedMesh&&(h.hasEventListener("dispose",u)===!1&&h.addEventListener("dispose",u),t.update(h.instanceMatrix,34962),h.instanceColor!==null&&t.update(h.instanceColor,34962)),_}function l(){s=new WeakMap}function u(h){const d=h.target;d.removeEventListener("dispose",u),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:o,dispose:l}}const D7=new Fl,N7=new Gx,B7=new xR,P7=new jx,X4=[],Y4=[],K4=new Float32Array(16),J4=new Float32Array(9),Q4=new Float32Array(4);function SS(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let o=X4[s];if(o===void 0&&(o=new Float32Array(s),X4[s]=o),e!==0){i.toArray(o,0);for(let l=1,u=0;l!==e;++l)u+=t,n[l].toArray(o,u)}return o}function up(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function cp(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function CR(n,e){let t=Y4[e];t===void 0&&(t=new Int32Array(e),Y4[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function C0e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function M0e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(up(t,e))return;n.uniform2fv(this.addr,e),cp(t,e)}}function A0e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(up(t,e))return;n.uniform3fv(this.addr,e),cp(t,e)}}function I0e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(up(t,e))return;n.uniform4fv(this.addr,e),cp(t,e)}}function R0e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(up(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),cp(t,e)}else{if(up(t,i))return;Q4.set(i),n.uniformMatrix2fv(this.addr,!1,Q4),cp(t,i)}}function k0e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(up(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),cp(t,e)}else{if(up(t,i))return;J4.set(i),n.uniformMatrix3fv(this.addr,!1,J4),cp(t,i)}}function O0e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(up(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),cp(t,e)}else{if(up(t,i))return;K4.set(i),n.uniformMatrix4fv(this.addr,!1,K4),cp(t,i)}}function L0e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function D0e(n,e){const t=this.cache;up(t,e)||(n.uniform2iv(this.addr,e),cp(t,e))}function N0e(n,e){const t=this.cache;up(t,e)||(n.uniform3iv(this.addr,e),cp(t,e))}function B0e(n,e){const t=this.cache;up(t,e)||(n.uniform4iv(this.addr,e),cp(t,e))}function P0e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function F0e(n,e){const t=this.cache;up(t,e)||(n.uniform2uiv(this.addr,e),cp(t,e))}function U0e(n,e){const t=this.cache;up(t,e)||(n.uniform3uiv(this.addr,e),cp(t,e))}function z0e(n,e){const t=this.cache;up(t,e)||(n.uniform4uiv(this.addr,e),cp(t,e))}function H0e(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2D(e||D7,s)}function G0e(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||B7,s)}function W0e(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||P7,s)}function V0e(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||N7,s)}function j0e(n){switch(n){case 5126:return C0e;case 35664:return M0e;case 35665:return A0e;case 35666:return I0e;case 35674:return R0e;case 35675:return k0e;case 35676:return O0e;case 5124:case 35670:return L0e;case 35667:case 35671:return D0e;case 35668:case 35672:return N0e;case 35669:case 35673:return B0e;case 5125:return P0e;case 36294:return F0e;case 36295:return U0e;case 36296:return z0e;case 35678:case 36198:case 36298:case 36306:case 35682:return H0e;case 35679:case 36299:case 36307:return G0e;case 35680:case 36300:case 36308:case 36293:return W0e;case 36289:case 36303:case 36311:case 36292:return V0e}}function X0e(n,e){n.uniform1fv(this.addr,e)}function Y0e(n,e){const t=SS(e,this.size,2);n.uniform2fv(this.addr,t)}function K0e(n,e){const t=SS(e,this.size,3);n.uniform3fv(this.addr,t)}function J0e(n,e){const t=SS(e,this.size,4);n.uniform4fv(this.addr,t)}function Q0e(n,e){const t=SS(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function q0e(n,e){const t=SS(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Z0e(n,e){const t=SS(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function e_e(n,e){n.uniform1iv(this.addr,e)}function t_e(n,e){n.uniform2iv(this.addr,e)}function n_e(n,e){n.uniform3iv(this.addr,e)}function r_e(n,e){n.uniform4iv(this.addr,e)}function i_e(n,e){n.uniform1uiv(this.addr,e)}function s_e(n,e){n.uniform2uiv(this.addr,e)}function o_e(n,e){n.uniform3uiv(this.addr,e)}function a_e(n,e){n.uniform4uiv(this.addr,e)}function l_e(n,e,t){const i=e.length,s=CR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture2D(e[o]||D7,s[o])}function u_e(n,e,t){const i=e.length,s=CR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture3D(e[o]||B7,s[o])}function c_e(n,e,t){const i=e.length,s=CR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTextureCube(e[o]||P7,s[o])}function h_e(n,e,t){const i=e.length,s=CR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||N7,s[o])}function d_e(n){switch(n){case 5126:return X0e;case 35664:return Y0e;case 35665:return K0e;case 35666:return J0e;case 35674:return Q0e;case 35675:return q0e;case 35676:return Z0e;case 5124:case 35670:return e_e;case 35667:case 35671:return t_e;case 35668:case 35672:return n_e;case 35669:case 35673:return r_e;case 5125:return i_e;case 36294:return s_e;case 36295:return o_e;case 36296:return a_e;case 35678:case 36198:case 36298:case 36306:case 35682:return l_e;case 35679:case 36299:case 36307:return u_e;case 35680:case 36300:case 36308:case 36293:return c_e;case 36289:case 36303:case 36311:case 36292:return h_e}}class p_e{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=j0e(t.type)}}class f_e{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=d_e(t.type)}}class m_e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let o=0,l=s.length;o!==l;++o){const u=s[o];u.setValue(e,t[u.id],i)}}}const dO=/(\w+)(\])?(\[|\.)?/g;function q4(n,e){n.seq.push(e),n.map[e.id]=e}function g_e(n,e,t){const i=n.name,s=i.length;for(dO.lastIndex=0;;){const o=dO.exec(i),l=dO.lastIndex;let u=o[1];const h=o[2]==="]",d=o[3];if(h&&(u=u|0),d===void 0||d==="["&&l+2===s){q4(t,d===void 0?new p_e(u,n,e):new f_e(u,n,e));break}else{let m=t.map[u];m===void 0&&(m=new m_e(u),q4(t,m)),t=m}}}class nA{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let s=0;s<i;++s){const o=e.getActiveUniform(t,s),l=e.getUniformLocation(t,o.name);g_e(o,l,this)}}setValue(e,t,i,s){const o=this.map[t];o!==void 0&&o.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let o=0,l=t.length;o!==l;++o){const u=t[o],h=i[u.id];h.needsUpdate!==!1&&u.setValue(e,h.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,o=e.length;s!==o;++s){const l=e[s];l.id in t&&i.push(l)}return i}}function Z4(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let __e=0;function v_e(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let l=s;l<o;l++){const u=l+1;i.push(`${u===e?">":" "} ${u}: ${t[l]}`)}return i.join(`
`)}function y_e(n){switch(n){case $m:return["Linear","( value )"];case Ei:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function eH(n,e,t){const i=n.getShaderParameter(e,35713),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const l=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+v_e(n.getShaderSource(e),l)}else return s}function b_e(n,e){const t=y_e(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function T_e(n,e){let t;switch(e){case i7:t="Linear";break;case s7:t="Reinhard";break;case o7:t="OptimizedCineon";break;case yP:t="ACESFilmic";break;case a7:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function S_e(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(a$).join(`
`)}function E_e(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function $_e(n,e){const t={},i=n.getProgramParameter(e,35721);for(let s=0;s<i;s++){const o=n.getActiveAttrib(e,s),l=o.name;let u=1;o.type===35674&&(u=2),o.type===35675&&(u=3),o.type===35676&&(u=4),t[l]={type:o.type,location:n.getAttribLocation(e,l),locationSize:u}}return t}function a$(n){return n!==""}function tH(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function nH(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const x_e=/^[ \t]*#include +<([\w\d./]+)>/gm;function KD(n){return n.replace(x_e,w_e)}function w_e(n,e){const t=Si[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return KD(t)}const C_e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,M_e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function rH(n){return n.replace(M_e,F7).replace(C_e,A_e)}function A_e(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),F7(n,e,t,i)}function F7(n,e,t,i){let s="";for(let o=parseInt(e);o<parseInt(t);o++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function iH(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function I_e(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===bR?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===x$?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Gy&&(e="SHADOWMAP_TYPE_VSM"),e}function R_e(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case $v:case xv:e="ENVMAP_TYPE_CUBE";break;case bS:e="ENVMAP_TYPE_CUBE_UV";break}return e}function k_e(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case xv:e="ENVMAP_MODE_REFRACTION";break}return e}function O_e(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Hx:e="ENVMAP_BLENDING_MULTIPLY";break;case n7:e="ENVMAP_BLENDING_MIX";break;case r7:e="ENVMAP_BLENDING_ADD";break}return e}function L_e(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function D_e(n,e,t,i){const s=n.getContext(),o=t.defines;let l=t.vertexShader,u=t.fragmentShader;const h=I_e(t),d=R_e(t),m=k_e(t),_=O_e(t),v=L_e(t),S=t.isWebGL2?"":S_e(t),x=E_e(o),w=s.createProgram();let A,k,O=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=[x].filter(a$).join(`
`),A.length>0&&(A+=`
`),k=[S,x].filter(a$).join(`
`),k.length>0&&(k+=`
`)):(A=[iH(t),"#define SHADER_NAME "+t.shaderName,x,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(a$).join(`
`),k=[S,iH(t),"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+m:"",t.envMap?"#define "+_:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==fg?"#define TONE_MAPPING":"",t.toneMapping!==fg?Si.tonemapping_pars_fragment:"",t.toneMapping!==fg?T_e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Si.encodings_pars_fragment,b_e("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(a$).join(`
`)),l=KD(l),l=tH(l,t),l=nH(l,t),u=KD(u),u=tH(u,t),u=nH(u,t),l=rH(l),u=rH(u),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(O=`#version 300 es
`,A=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,k=["#define varying in",t.glslVersion===jD?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===jD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+k);const D=O+A+l,L=O+k+u,z=Z4(s,35633,D),H=Z4(s,35632,L);if(s.attachShader(w,z),s.attachShader(w,H),t.index0AttributeName!==void 0?s.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(w,0,"position"),s.linkProgram(w),n.debug.checkShaderErrors){const K=s.getProgramInfoLog(w).trim(),ee=s.getShaderInfoLog(z).trim(),re=s.getShaderInfoLog(H).trim();let ie=!0,de=!0;if(s.getProgramParameter(w,35714)===!1){ie=!1;const oe=eH(s,z,"vertex"),ce=eH(s,H,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(w,35715)+`

Program Info Log: `+K+`
`+oe+`
`+ce)}else K!==""?console.warn("THREE.WebGLProgram: Program Info Log:",K):(ee===""||re==="")&&(de=!1);de&&(this.diagnostics={runnable:ie,programLog:K,vertexShader:{log:ee,prefix:A},fragmentShader:{log:re,prefix:k}})}s.deleteShader(z),s.deleteShader(H);let U;this.getUniforms=function(){return U===void 0&&(U=new nA(s,w)),U};let P;return this.getAttributes=function(){return P===void 0&&(P=$_e(s,w)),P},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(w),this.program=void 0},this.name=t.shaderName,this.id=__e++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=z,this.fragmentShader=H,this}let N_e=0;class B_e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),o=this._getShaderStage(i),l=this._getShaderCacheForMaterial(e);return l.has(s)===!1&&(l.add(s),s.usedTimes++),l.has(o)===!1&&(l.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const i=new P_e(e);t.set(e,i)}return t.get(e)}}class P_e{constructor(e){this.id=N_e++,this.code=e,this.usedTimes=0}}function F_e(n,e,t,i,s,o,l){const u=new nb,h=new B_e,d=[],m=s.isWebGL2,_=s.logarithmicDepthBuffer,v=s.vertexTextures;let S=s.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(P,K,ee,re,ie){const de=re.fog,oe=ie.geometry,ce=P.isMeshStandardMaterial?re.environment:null,me=(P.isMeshStandardMaterial?t:e).get(P.envMap||ce),Ae=me&&me.mapping===bS?me.image.height:null,j=x[P.type];P.precision!==null&&(S=s.getMaxPrecision(P.precision),S!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",S,"instead."));const Z=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,ne=Z!==void 0?Z.length:0;let ae=0;oe.morphAttributes.position!==void 0&&(ae=1),oe.morphAttributes.normal!==void 0&&(ae=2),oe.morphAttributes.color!==void 0&&(ae=3);let _e,Le,we,Xe;if(j){const it=Zd[j];_e=it.vertexShader,Le=it.fragmentShader}else _e=P.vertexShader,Le=P.fragmentShader,h.update(P),we=h.getVertexShaderID(P),Xe=h.getFragmentShaderID(P);const Re=n.getRenderTarget(),qe=P.alphaTest>0,Je=P.clearcoat>0,ht=P.iridescence>0;return{isWebGL2:m,shaderID:j,shaderName:P.type,vertexShader:_e,fragmentShader:Le,defines:P.defines,customVertexShaderID:we,customFragmentShaderID:Xe,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:S,instancing:ie.isInstancedMesh===!0,instancingColor:ie.isInstancedMesh===!0&&ie.instanceColor!==null,supportsVertexTextures:v,outputEncoding:Re===null?n.outputEncoding:Re.isXRRenderTarget===!0?Re.texture.encoding:$m,map:!!P.map,matcap:!!P.matcap,envMap:!!me,envMapMode:me&&me.mapping,envMapCubeUVHeight:Ae,lightMap:!!P.lightMap,aoMap:!!P.aoMap,emissiveMap:!!P.emissiveMap,bumpMap:!!P.bumpMap,normalMap:!!P.normalMap,objectSpaceNormalMap:P.normalMapType===w7,tangentSpaceNormalMap:P.normalMapType===Cb,decodeVideoTexture:!!P.map&&P.map.isVideoTexture===!0&&P.map.encoding===Ei,clearcoat:Je,clearcoatMap:Je&&!!P.clearcoatMap,clearcoatRoughnessMap:Je&&!!P.clearcoatRoughnessMap,clearcoatNormalMap:Je&&!!P.clearcoatNormalMap,iridescence:ht,iridescenceMap:ht&&!!P.iridescenceMap,iridescenceThicknessMap:ht&&!!P.iridescenceThicknessMap,displacementMap:!!P.displacementMap,roughnessMap:!!P.roughnessMap,metalnessMap:!!P.metalnessMap,specularMap:!!P.specularMap,specularIntensityMap:!!P.specularIntensityMap,specularColorMap:!!P.specularColorMap,opaque:P.transparent===!1&&P.blending===Z0,alphaMap:!!P.alphaMap,alphaTest:qe,gradientMap:!!P.gradientMap,sheen:P.sheen>0,sheenColorMap:!!P.sheenColorMap,sheenRoughnessMap:!!P.sheenRoughnessMap,transmission:P.transmission>0,transmissionMap:!!P.transmissionMap,thicknessMap:!!P.thicknessMap,combine:P.combine,vertexTangents:!!P.normalMap&&!!oe.attributes.tangent,vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,vertexUvs:!!P.map||!!P.bumpMap||!!P.normalMap||!!P.specularMap||!!P.alphaMap||!!P.emissiveMap||!!P.roughnessMap||!!P.metalnessMap||!!P.clearcoatMap||!!P.clearcoatRoughnessMap||!!P.clearcoatNormalMap||!!P.iridescenceMap||!!P.iridescenceThicknessMap||!!P.displacementMap||!!P.transmissionMap||!!P.thicknessMap||!!P.specularIntensityMap||!!P.specularColorMap||!!P.sheenColorMap||!!P.sheenRoughnessMap,uvsVertexOnly:!(P.map||P.bumpMap||P.normalMap||P.specularMap||P.alphaMap||P.emissiveMap||P.roughnessMap||P.metalnessMap||P.clearcoatNormalMap||P.iridescenceMap||P.iridescenceThicknessMap||P.transmission>0||P.transmissionMap||P.thicknessMap||P.specularIntensityMap||P.specularColorMap||P.sheen>0||P.sheenColorMap||P.sheenRoughnessMap)&&!!P.displacementMap,fog:!!de,useFog:P.fog===!0,fogExp2:de&&de.isFogExp2,flatShading:!!P.flatShading,sizeAttenuation:P.sizeAttenuation,logarithmicDepthBuffer:_,skinning:ie.isSkinnedMesh===!0,morphTargets:oe.morphAttributes.position!==void 0,morphNormals:oe.morphAttributes.normal!==void 0,morphColors:oe.morphAttributes.color!==void 0,morphTargetsCount:ne,morphTextureStride:ae,numDirLights:K.directional.length,numPointLights:K.point.length,numSpotLights:K.spot.length,numRectAreaLights:K.rectArea.length,numHemiLights:K.hemi.length,numDirLightShadows:K.directionalShadowMap.length,numPointLightShadows:K.pointShadowMap.length,numSpotLightShadows:K.spotShadowMap.length,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&ee.length>0,shadowMapType:n.shadowMap.type,toneMapping:P.toneMapped?n.toneMapping:fg,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===tp,flipSided:P.side===Gc,useDepthPacking:!!P.depthPacking,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionDerivatives:P.extensions&&P.extensions.derivatives,extensionFragDepth:P.extensions&&P.extensions.fragDepth,extensionDrawBuffers:P.extensions&&P.extensions.drawBuffers,extensionShaderTextureLOD:P.extensions&&P.extensions.shaderTextureLOD,rendererExtensionFragDepth:m||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:m||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:m||i.has("EXT_shader_texture_lod"),customProgramCacheKey:P.customProgramCacheKey()}}function A(P){const K=[];if(P.shaderID?K.push(P.shaderID):(K.push(P.customVertexShaderID),K.push(P.customFragmentShaderID)),P.defines!==void 0)for(const ee in P.defines)K.push(ee),K.push(P.defines[ee]);return P.isRawShaderMaterial===!1&&(k(K,P),O(K,P),K.push(n.outputEncoding)),K.push(P.customProgramCacheKey),K.join()}function k(P,K){P.push(K.precision),P.push(K.outputEncoding),P.push(K.envMapMode),P.push(K.envMapCubeUVHeight),P.push(K.combine),P.push(K.vertexUvs),P.push(K.fogExp2),P.push(K.sizeAttenuation),P.push(K.morphTargetsCount),P.push(K.morphAttributeCount),P.push(K.numDirLights),P.push(K.numPointLights),P.push(K.numSpotLights),P.push(K.numHemiLights),P.push(K.numRectAreaLights),P.push(K.numDirLightShadows),P.push(K.numPointLightShadows),P.push(K.numSpotLightShadows),P.push(K.shadowMapType),P.push(K.toneMapping),P.push(K.numClippingPlanes),P.push(K.numClipIntersection),P.push(K.depthPacking)}function O(P,K){u.disableAll(),K.isWebGL2&&u.enable(0),K.supportsVertexTextures&&u.enable(1),K.instancing&&u.enable(2),K.instancingColor&&u.enable(3),K.map&&u.enable(4),K.matcap&&u.enable(5),K.envMap&&u.enable(6),K.lightMap&&u.enable(7),K.aoMap&&u.enable(8),K.emissiveMap&&u.enable(9),K.bumpMap&&u.enable(10),K.normalMap&&u.enable(11),K.objectSpaceNormalMap&&u.enable(12),K.tangentSpaceNormalMap&&u.enable(13),K.clearcoat&&u.enable(14),K.clearcoatMap&&u.enable(15),K.clearcoatRoughnessMap&&u.enable(16),K.clearcoatNormalMap&&u.enable(17),K.iridescence&&u.enable(18),K.iridescenceMap&&u.enable(19),K.iridescenceThicknessMap&&u.enable(20),K.displacementMap&&u.enable(21),K.specularMap&&u.enable(22),K.roughnessMap&&u.enable(23),K.metalnessMap&&u.enable(24),K.gradientMap&&u.enable(25),K.alphaMap&&u.enable(26),K.alphaTest&&u.enable(27),K.vertexColors&&u.enable(28),K.vertexAlphas&&u.enable(29),K.vertexUvs&&u.enable(30),K.vertexTangents&&u.enable(31),K.uvsVertexOnly&&u.enable(32),K.fog&&u.enable(33),P.push(u.mask),u.disableAll(),K.useFog&&u.enable(0),K.flatShading&&u.enable(1),K.logarithmicDepthBuffer&&u.enable(2),K.skinning&&u.enable(3),K.morphTargets&&u.enable(4),K.morphNormals&&u.enable(5),K.morphColors&&u.enable(6),K.premultipliedAlpha&&u.enable(7),K.shadowMapEnabled&&u.enable(8),K.physicallyCorrectLights&&u.enable(9),K.doubleSided&&u.enable(10),K.flipSided&&u.enable(11),K.useDepthPacking&&u.enable(12),K.dithering&&u.enable(13),K.specularIntensityMap&&u.enable(14),K.specularColorMap&&u.enable(15),K.transmission&&u.enable(16),K.transmissionMap&&u.enable(17),K.thicknessMap&&u.enable(18),K.sheen&&u.enable(19),K.sheenColorMap&&u.enable(20),K.sheenRoughnessMap&&u.enable(21),K.decodeVideoTexture&&u.enable(22),K.opaque&&u.enable(23),P.push(u.mask)}function D(P){const K=x[P.type];let ee;if(K){const re=Zd[K];ee=Vx.clone(re.uniforms)}else ee=P.uniforms;return ee}function L(P,K){let ee;for(let re=0,ie=d.length;re<ie;re++){const de=d[re];if(de.cacheKey===K){ee=de,++ee.usedTimes;break}}return ee===void 0&&(ee=new D_e(n,K,P,o),d.push(ee)),ee}function z(P){if(--P.usedTimes===0){const K=d.indexOf(P);d[K]=d[d.length-1],d.pop(),P.destroy()}}function H(P){h.remove(P)}function U(){h.dispose()}return{getParameters:w,getProgramCacheKey:A,getUniforms:D,acquireProgram:L,releaseProgram:z,releaseShaderCache:H,programs:d,dispose:U}}function U_e(){let n=new WeakMap;function e(o){let l=n.get(o);return l===void 0&&(l={},n.set(o,l)),l}function t(o){n.delete(o)}function i(o,l,u){n.get(o)[l]=u}function s(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:s}}function z_e(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function sH(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function oH(){const n=[];let e=0;const t=[],i=[],s=[];function o(){e=0,t.length=0,i.length=0,s.length=0}function l(_,v,S,x,w,A){let k=n[e];return k===void 0?(k={id:_.id,object:_,geometry:v,material:S,groupOrder:x,renderOrder:_.renderOrder,z:w,group:A},n[e]=k):(k.id=_.id,k.object=_,k.geometry=v,k.material=S,k.groupOrder=x,k.renderOrder=_.renderOrder,k.z=w,k.group=A),e++,k}function u(_,v,S,x,w,A){const k=l(_,v,S,x,w,A);S.transmission>0?i.push(k):S.transparent===!0?s.push(k):t.push(k)}function h(_,v,S,x,w,A){const k=l(_,v,S,x,w,A);S.transmission>0?i.unshift(k):S.transparent===!0?s.unshift(k):t.unshift(k)}function d(_,v){t.length>1&&t.sort(_||z_e),i.length>1&&i.sort(v||sH),s.length>1&&s.sort(v||sH)}function m(){for(let _=e,v=n.length;_<v;_++){const S=n[_];if(S.id===null)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.group=null}}return{opaque:t,transmissive:i,transparent:s,init:o,push:u,unshift:h,finish:m,sort:d}}function H_e(){let n=new WeakMap;function e(i,s){let o;return n.has(i)===!1?(o=new oH,n.set(i,[o])):s>=n.get(i).length?(o=new oH,n.get(i).push(o)):o=n.get(i)[s],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function G_e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new be,color:new vn};break;case"SpotLight":t={position:new be,direction:new be,color:new vn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new be,color:new vn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new be,skyColor:new vn,groundColor:new vn};break;case"RectAreaLight":t={color:new vn,position:new be,halfWidth:new be,halfHeight:new be};break}return n[e.id]=t,t}}}function W_e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Dt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Dt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Dt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let V_e=0;function j_e(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function X_e(n,e){const t=new G_e,i=W_e(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let m=0;m<9;m++)s.probe.push(new be);const o=new be,l=new Ar,u=new Ar;function h(m,_){let v=0,S=0,x=0;for(let K=0;K<9;K++)s.probe[K].set(0,0,0);let w=0,A=0,k=0,O=0,D=0,L=0,z=0,H=0;m.sort(j_e);const U=_!==!0?Math.PI:1;for(let K=0,ee=m.length;K<ee;K++){const re=m[K],ie=re.color,de=re.intensity,oe=re.distance,ce=re.shadow&&re.shadow.map?re.shadow.map.texture:null;if(re.isAmbientLight)v+=ie.r*de*U,S+=ie.g*de*U,x+=ie.b*de*U;else if(re.isLightProbe)for(let me=0;me<9;me++)s.probe[me].addScaledVector(re.sh.coefficients[me],de);else if(re.isDirectionalLight){const me=t.get(re);if(me.color.copy(re.color).multiplyScalar(re.intensity*U),re.castShadow){const Ae=re.shadow,j=i.get(re);j.shadowBias=Ae.bias,j.shadowNormalBias=Ae.normalBias,j.shadowRadius=Ae.radius,j.shadowMapSize=Ae.mapSize,s.directionalShadow[w]=j,s.directionalShadowMap[w]=ce,s.directionalShadowMatrix[w]=re.shadow.matrix,L++}s.directional[w]=me,w++}else if(re.isSpotLight){const me=t.get(re);if(me.position.setFromMatrixPosition(re.matrixWorld),me.color.copy(ie).multiplyScalar(de*U),me.distance=oe,me.coneCos=Math.cos(re.angle),me.penumbraCos=Math.cos(re.angle*(1-re.penumbra)),me.decay=re.decay,re.castShadow){const Ae=re.shadow,j=i.get(re);j.shadowBias=Ae.bias,j.shadowNormalBias=Ae.normalBias,j.shadowRadius=Ae.radius,j.shadowMapSize=Ae.mapSize,s.spotShadow[k]=j,s.spotShadowMap[k]=ce,s.spotShadowMatrix[k]=re.shadow.matrix,H++}s.spot[k]=me,k++}else if(re.isRectAreaLight){const me=t.get(re);me.color.copy(ie).multiplyScalar(de),me.halfWidth.set(re.width*.5,0,0),me.halfHeight.set(0,re.height*.5,0),s.rectArea[O]=me,O++}else if(re.isPointLight){const me=t.get(re);if(me.color.copy(re.color).multiplyScalar(re.intensity*U),me.distance=re.distance,me.decay=re.decay,re.castShadow){const Ae=re.shadow,j=i.get(re);j.shadowBias=Ae.bias,j.shadowNormalBias=Ae.normalBias,j.shadowRadius=Ae.radius,j.shadowMapSize=Ae.mapSize,j.shadowCameraNear=Ae.camera.near,j.shadowCameraFar=Ae.camera.far,s.pointShadow[A]=j,s.pointShadowMap[A]=ce,s.pointShadowMatrix[A]=re.shadow.matrix,z++}s.point[A]=me,A++}else if(re.isHemisphereLight){const me=t.get(re);me.skyColor.copy(re.color).multiplyScalar(de*U),me.groundColor.copy(re.groundColor).multiplyScalar(de*U),s.hemi[D]=me,D++}}O>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=wn.LTC_FLOAT_1,s.rectAreaLTC2=wn.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(s.rectAreaLTC1=wn.LTC_HALF_1,s.rectAreaLTC2=wn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=v,s.ambient[1]=S,s.ambient[2]=x;const P=s.hash;(P.directionalLength!==w||P.pointLength!==A||P.spotLength!==k||P.rectAreaLength!==O||P.hemiLength!==D||P.numDirectionalShadows!==L||P.numPointShadows!==z||P.numSpotShadows!==H)&&(s.directional.length=w,s.spot.length=k,s.rectArea.length=O,s.point.length=A,s.hemi.length=D,s.directionalShadow.length=L,s.directionalShadowMap.length=L,s.pointShadow.length=z,s.pointShadowMap.length=z,s.spotShadow.length=H,s.spotShadowMap.length=H,s.directionalShadowMatrix.length=L,s.pointShadowMatrix.length=z,s.spotShadowMatrix.length=H,P.directionalLength=w,P.pointLength=A,P.spotLength=k,P.rectAreaLength=O,P.hemiLength=D,P.numDirectionalShadows=L,P.numPointShadows=z,P.numSpotShadows=H,s.version=V_e++)}function d(m,_){let v=0,S=0,x=0,w=0,A=0;const k=_.matrixWorldInverse;for(let O=0,D=m.length;O<D;O++){const L=m[O];if(L.isDirectionalLight){const z=s.directional[v];z.direction.setFromMatrixPosition(L.matrixWorld),o.setFromMatrixPosition(L.target.matrixWorld),z.direction.sub(o),z.direction.transformDirection(k),v++}else if(L.isSpotLight){const z=s.spot[x];z.position.setFromMatrixPosition(L.matrixWorld),z.position.applyMatrix4(k),z.direction.setFromMatrixPosition(L.matrixWorld),o.setFromMatrixPosition(L.target.matrixWorld),z.direction.sub(o),z.direction.transformDirection(k),x++}else if(L.isRectAreaLight){const z=s.rectArea[w];z.position.setFromMatrixPosition(L.matrixWorld),z.position.applyMatrix4(k),u.identity(),l.copy(L.matrixWorld),l.premultiply(k),u.extractRotation(l),z.halfWidth.set(L.width*.5,0,0),z.halfHeight.set(0,L.height*.5,0),z.halfWidth.applyMatrix4(u),z.halfHeight.applyMatrix4(u),w++}else if(L.isPointLight){const z=s.point[S];z.position.setFromMatrixPosition(L.matrixWorld),z.position.applyMatrix4(k),S++}else if(L.isHemisphereLight){const z=s.hemi[A];z.direction.setFromMatrixPosition(L.matrixWorld),z.direction.transformDirection(k),A++}}}return{setup:h,setupView:d,state:s}}function aH(n,e){const t=new X_e(n,e),i=[],s=[];function o(){i.length=0,s.length=0}function l(m){i.push(m)}function u(m){s.push(m)}function h(m){t.setup(i,m)}function d(m){t.setupView(i,m)}return{init:o,state:{lightsArray:i,shadowsArray:s,lights:t},setupLights:h,setupLightsView:d,pushLight:l,pushShadow:u}}function Y_e(n,e){let t=new WeakMap;function i(o,l=0){let u;return t.has(o)===!1?(u=new aH(n,e),t.set(o,[u])):l>=t.get(o).length?(u=new aH(n,e),t.get(o).push(u)):u=t.get(o)[l],u}function s(){t=new WeakMap}return{get:i,dispose:s}}class Xx extends Wc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Dv,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class MR extends Wc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new be,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const K_e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,J_e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Q_e(n,e,t){let i=new wR;const s=new Dt,o=new Dt,l=new Ii,u=new Xx({depthPacking:VT}),h=new MR,d={},m=t.maxTextureSize,_={0:Gc,1:s0,2:tp},v=new mh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Dt},radius:{value:4}},vertexShader:K_e,fragmentShader:J_e}),S=v.clone();S.defines.HORIZONTAL_PASS=1;const x=new Or;x.setAttribute("position",new Is(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Sn(x,v),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=bR,this.render=function(L,z,H){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||L.length===0)return;const U=n.getRenderTarget(),P=n.getActiveCubeFace(),K=n.getActiveMipmapLevel(),ee=n.state;ee.setBlending(op),ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);for(let re=0,ie=L.length;re<ie;re++){const de=L[re],oe=de.shadow;if(oe===void 0){console.warn("THREE.WebGLShadowMap:",de,"has no shadow.");continue}if(oe.autoUpdate===!1&&oe.needsUpdate===!1)continue;s.copy(oe.mapSize);const ce=oe.getFrameExtents();if(s.multiply(ce),o.copy(oe.mapSize),(s.x>m||s.y>m)&&(s.x>m&&(o.x=Math.floor(m/ce.x),s.x=o.x*ce.x,oe.mapSize.x=o.x),s.y>m&&(o.y=Math.floor(m/ce.y),s.y=o.y*ce.y,oe.mapSize.y=o.y)),oe.map===null){const Ae=this.type!==Gy?{minFilter:fa,magFilter:fa}:{};oe.map=new cu(s.x,s.y,Ae),oe.map.texture.name=de.name+".shadowMap",oe.camera.updateProjectionMatrix()}n.setRenderTarget(oe.map),n.clear();const me=oe.getViewportCount();for(let Ae=0;Ae<me;Ae++){const j=oe.getViewport(Ae);l.set(o.x*j.x,o.y*j.y,o.x*j.z,o.y*j.w),ee.viewport(l),oe.updateMatrices(de,Ae),i=oe.getFrustum(),D(z,H,oe.camera,de,this.type)}oe.isPointLightShadow!==!0&&this.type===Gy&&k(oe,H),oe.needsUpdate=!1}A.needsUpdate=!1,n.setRenderTarget(U,P,K)};function k(L,z){const H=e.update(w);v.defines.VSM_SAMPLES!==L.blurSamples&&(v.defines.VSM_SAMPLES=L.blurSamples,S.defines.VSM_SAMPLES=L.blurSamples,v.needsUpdate=!0,S.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new cu(s.x,s.y)),v.uniforms.shadow_pass.value=L.map.texture,v.uniforms.resolution.value=L.mapSize,v.uniforms.radius.value=L.radius,n.setRenderTarget(L.mapPass),n.clear(),n.renderBufferDirect(z,null,H,v,w,null),S.uniforms.shadow_pass.value=L.mapPass.texture,S.uniforms.resolution.value=L.mapSize,S.uniforms.radius.value=L.radius,n.setRenderTarget(L.map),n.clear(),n.renderBufferDirect(z,null,H,S,w,null)}function O(L,z,H,U,P,K){let ee=null;const re=H.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(re!==void 0?ee=re:ee=H.isPointLight===!0?h:u,n.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0){const ie=ee.uuid,de=z.uuid;let oe=d[ie];oe===void 0&&(oe={},d[ie]=oe);let ce=oe[de];ce===void 0&&(ce=ee.clone(),oe[de]=ce),ee=ce}return ee.visible=z.visible,ee.wireframe=z.wireframe,K===Gy?ee.side=z.shadowSide!==null?z.shadowSide:z.side:ee.side=z.shadowSide!==null?z.shadowSide:_[z.side],ee.alphaMap=z.alphaMap,ee.alphaTest=z.alphaTest,ee.clipShadows=z.clipShadows,ee.clippingPlanes=z.clippingPlanes,ee.clipIntersection=z.clipIntersection,ee.displacementMap=z.displacementMap,ee.displacementScale=z.displacementScale,ee.displacementBias=z.displacementBias,ee.wireframeLinewidth=z.wireframeLinewidth,ee.linewidth=z.linewidth,H.isPointLight===!0&&ee.isMeshDistanceMaterial===!0&&(ee.referencePosition.setFromMatrixPosition(H.matrixWorld),ee.nearDistance=U,ee.farDistance=P),ee}function D(L,z,H,U,P){if(L.visible===!1)return;if(L.layers.test(z.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&P===Gy)&&(!L.frustumCulled||i.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,L.matrixWorld);const ee=e.update(L),re=L.material;if(Array.isArray(re)){const ie=ee.groups;for(let de=0,oe=ie.length;de<oe;de++){const ce=ie[de],me=re[ce.materialIndex];if(me&&me.visible){const Ae=O(L,me,U,H.near,H.far,P);n.renderBufferDirect(H,null,ee,Ae,L,ce)}}}else if(re.visible){const ie=O(L,re,U,H.near,H.far,P);n.renderBufferDirect(H,null,ee,ie,L,null)}}const K=L.children;for(let ee=0,re=K.length;ee<re;ee++)D(K[ee],z,H,U,P)}}function q_e(n,e,t){const i=t.isWebGL2;function s(){let Be=!1;const Ut=new Ii;let ut=null;const Ht=new Ii(0,0,0,0);return{setMask:function(zt){ut!==zt&&!Be&&(n.colorMask(zt,zt,zt,zt),ut=zt)},setLocked:function(zt){Be=zt},setClear:function(zt,En,Pr,Er,Kr){Kr===!0&&(zt*=Er,En*=Er,Pr*=Er),Ut.set(zt,En,Pr,Er),Ht.equals(Ut)===!1&&(n.clearColor(zt,En,Pr,Er),Ht.copy(Ut))},reset:function(){Be=!1,ut=null,Ht.set(-1,0,0,0)}}}function o(){let Be=!1,Ut=null,ut=null,Ht=null;return{setTest:function(zt){zt?qe(2929):Je(2929)},setMask:function(zt){Ut!==zt&&!Be&&(n.depthMask(zt),Ut=zt)},setFunc:function(zt){if(ut!==zt){if(zt)switch(zt){case K9:n.depthFunc(512);break;case J9:n.depthFunc(519);break;case Q9:n.depthFunc(513);break;case YA:n.depthFunc(515);break;case q9:n.depthFunc(514);break;case Z9:n.depthFunc(518);break;case e7:n.depthFunc(516);break;case t7:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);ut=zt}},setLocked:function(zt){Be=zt},setClear:function(zt){Ht!==zt&&(n.clearDepth(zt),Ht=zt)},reset:function(){Be=!1,Ut=null,ut=null,Ht=null}}}function l(){let Be=!1,Ut=null,ut=null,Ht=null,zt=null,En=null,Pr=null,Er=null,Kr=null;return{setTest:function(or){Be||(or?qe(2960):Je(2960))},setMask:function(or){Ut!==or&&!Be&&(n.stencilMask(or),Ut=or)},setFunc:function(or,Wn,q){(ut!==or||Ht!==Wn||zt!==q)&&(n.stencilFunc(or,Wn,q),ut=or,Ht=Wn,zt=q)},setOp:function(or,Wn,q){(En!==or||Pr!==Wn||Er!==q)&&(n.stencilOp(or,Wn,q),En=or,Pr=Wn,Er=q)},setLocked:function(or){Be=or},setClear:function(or){Kr!==or&&(n.clearStencil(or),Kr=or)},reset:function(){Be=!1,Ut=null,ut=null,Ht=null,zt=null,En=null,Pr=null,Er=null,Kr=null}}}const u=new s,h=new o,d=new l,m=new WeakMap,_=new WeakMap;let v={},S={},x=new WeakMap,w=[],A=null,k=!1,O=null,D=null,L=null,z=null,H=null,U=null,P=null,K=!1,ee=null,re=null,ie=null,de=null,oe=null;const ce=n.getParameter(35661);let me=!1,Ae=0;const j=n.getParameter(7938);j.indexOf("WebGL")!==-1?(Ae=parseFloat(/^WebGL (\d)/.exec(j)[1]),me=Ae>=1):j.indexOf("OpenGL ES")!==-1&&(Ae=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),me=Ae>=2);let Z=null,ne={};const ae=n.getParameter(3088),_e=n.getParameter(2978),Le=new Ii().fromArray(ae),we=new Ii().fromArray(_e);function Xe(Be,Ut,ut){const Ht=new Uint8Array(4),zt=n.createTexture();n.bindTexture(Be,zt),n.texParameteri(Be,10241,9728),n.texParameteri(Be,10240,9728);for(let En=0;En<ut;En++)n.texImage2D(Ut+En,0,6408,1,1,0,6408,5121,Ht);return zt}const Re={};Re[3553]=Xe(3553,3553,1),Re[34067]=Xe(34067,34069,6),u.setClear(0,0,0,1),h.setClear(1),d.setClear(0),qe(2929),h.setFunc(YA),dt(!1),It(bD),qe(2884),rt(op);function qe(Be){v[Be]!==!0&&(n.enable(Be),v[Be]=!0)}function Je(Be){v[Be]!==!1&&(n.disable(Be),v[Be]=!1)}function ht(Be,Ut){return S[Be]!==Ut?(n.bindFramebuffer(Be,Ut),S[Be]=Ut,i&&(Be===36009&&(S[36160]=Ut),Be===36160&&(S[36009]=Ut)),!0):!1}function it(Be,Ut){let ut=w,Ht=!1;if(Be)if(ut=x.get(Ut),ut===void 0&&(ut=[],x.set(Ut,ut)),Be.isWebGLMultipleRenderTargets){const zt=Be.texture;if(ut.length!==zt.length||ut[0]!==36064){for(let En=0,Pr=zt.length;En<Pr;En++)ut[En]=36064+En;ut.length=zt.length,Ht=!0}}else ut[0]!==36064&&(ut[0]=36064,Ht=!0);else ut[0]!==1029&&(ut[0]=1029,Ht=!0);Ht&&(t.isWebGL2?n.drawBuffers(ut):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ut))}function Oe(Be){return A!==Be?(n.useProgram(Be),A=Be,!0):!1}const Ee={[Oy]:32774,[F9]:32778,[vP]:32779};if(i)Ee[ED]=32775,Ee[$D]=32776;else{const Be=e.get("EXT_blend_minmax");Be!==null&&(Ee[ED]=Be.MIN_EXT,Ee[$D]=Be.MAX_EXT)}const Fe={[U9]:0,[z9]:1,[H9]:768,[TR]:770,[Y9]:776,[j9]:774,[W9]:772,[G9]:769,[SR]:771,[X9]:775,[V9]:773};function rt(Be,Ut,ut,Ht,zt,En,Pr,Er){if(Be===op){k===!0&&(Je(3042),k=!1);return}if(k===!1&&(qe(3042),k=!0),Be!==P9){if(Be!==O||Er!==K){if((D!==Oy||H!==Oy)&&(n.blendEquation(32774),D=Oy,H=Oy),Er)switch(Be){case Z0:n.blendFuncSeparate(1,771,1,771);break;case XA:n.blendFunc(1,1);break;case TD:n.blendFuncSeparate(0,769,0,1);break;case SD:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Be);break}else switch(Be){case Z0:n.blendFuncSeparate(770,771,1,771);break;case XA:n.blendFunc(770,1);break;case TD:n.blendFuncSeparate(0,769,0,1);break;case SD:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Be);break}L=null,z=null,U=null,P=null,O=Be,K=Er}return}zt=zt||Ut,En=En||ut,Pr=Pr||Ht,(Ut!==D||zt!==H)&&(n.blendEquationSeparate(Ee[Ut],Ee[zt]),D=Ut,H=zt),(ut!==L||Ht!==z||En!==U||Pr!==P)&&(n.blendFuncSeparate(Fe[ut],Fe[Ht],Fe[En],Fe[Pr]),L=ut,z=Ht,U=En,P=Pr),O=Be,K=null}function nt(Be,Ut){Be.side===tp?Je(2884):qe(2884);let ut=Be.side===Gc;Ut&&(ut=!ut),dt(ut),Be.blending===Z0&&Be.transparent===!1?rt(op):rt(Be.blending,Be.blendEquation,Be.blendSrc,Be.blendDst,Be.blendEquationAlpha,Be.blendSrcAlpha,Be.blendDstAlpha,Be.premultipliedAlpha),h.setFunc(Be.depthFunc),h.setTest(Be.depthTest),h.setMask(Be.depthWrite),u.setMask(Be.colorWrite);const Ht=Be.stencilWrite;d.setTest(Ht),Ht&&(d.setMask(Be.stencilWriteMask),d.setFunc(Be.stencilFunc,Be.stencilRef,Be.stencilFuncMask),d.setOp(Be.stencilFail,Be.stencilZFail,Be.stencilZPass)),wt(Be.polygonOffset,Be.polygonOffsetFactor,Be.polygonOffsetUnits),Be.alphaToCoverage===!0?qe(32926):Je(32926)}function dt(Be){ee!==Be&&(Be?n.frontFace(2304):n.frontFace(2305),ee=Be)}function It(Be){Be!==L9?(qe(2884),Be!==re&&(Be===bD?n.cullFace(1029):Be===D9?n.cullFace(1028):n.cullFace(1032))):Je(2884),re=Be}function mt(Be){Be!==ie&&(me&&n.lineWidth(Be),ie=Be)}function wt(Be,Ut,ut){Be?(qe(32823),(de!==Ut||oe!==ut)&&(n.polygonOffset(Ut,ut),de=Ut,oe=ut)):Je(32823)}function $t(Be){Be?qe(3089):Je(3089)}function pt(Be){Be===void 0&&(Be=33984+ce-1),Z!==Be&&(n.activeTexture(Be),Z=Be)}function Te(Be,Ut){Z===null&&pt();let ut=ne[Z];ut===void 0&&(ut={type:void 0,texture:void 0},ne[Z]=ut),(ut.type!==Be||ut.texture!==Ut)&&(n.bindTexture(Be,Ut||Re[Be]),ut.type=Be,ut.texture=Ut)}function te(){const Be=ne[Z];Be!==void 0&&Be.type!==void 0&&(n.bindTexture(Be.type,null),Be.type=void 0,Be.texture=void 0)}function ke(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function ot(){try{n.texSubImage2D.apply(n,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function ft(){try{n.texSubImage3D.apply(n,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function xt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function at(){try{n.texStorage2D.apply(n,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Ge(){try{n.texStorage3D.apply(n,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Ce(){try{n.texImage2D.apply(n,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function X(){try{n.texImage3D.apply(n,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Q(Be){Le.equals(Be)===!1&&(n.scissor(Be.x,Be.y,Be.z,Be.w),Le.copy(Be))}function le(Be){we.equals(Be)===!1&&(n.viewport(Be.x,Be.y,Be.z,Be.w),we.copy(Be))}function $e(Be,Ut){let ut=_.get(Ut);ut===void 0&&(ut=new WeakMap,_.set(Ut,ut));let Ht=ut.get(Be);Ht===void 0&&(Ht=n.getUniformBlockIndex(Ut,Be.name),ut.set(Be,Ht))}function We(Be,Ut){const ut=_.get(Ut).get(Be);m.get(Be)!==ut&&(n.uniformBlockBinding(Ut,ut,Be.__bindingPointIndex),m.set(Be,ut))}function Ft(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),v={},Z=null,ne={},S={},x=new WeakMap,w=[],A=null,k=!1,O=null,D=null,L=null,z=null,H=null,U=null,P=null,K=!1,ee=null,re=null,ie=null,de=null,oe=null,Le.set(0,0,n.canvas.width,n.canvas.height),we.set(0,0,n.canvas.width,n.canvas.height),u.reset(),h.reset(),d.reset()}return{buffers:{color:u,depth:h,stencil:d},enable:qe,disable:Je,bindFramebuffer:ht,drawBuffers:it,useProgram:Oe,setBlending:rt,setMaterial:nt,setFlipSided:dt,setCullFace:It,setLineWidth:mt,setPolygonOffset:wt,setScissorTest:$t,activeTexture:pt,bindTexture:Te,unbindTexture:te,compressedTexImage2D:ke,texImage2D:Ce,texImage3D:X,updateUBOMapping:$e,uniformBlockBinding:We,texStorage2D:at,texStorage3D:Ge,texSubImage2D:ot,texSubImage3D:ft,compressedTexSubImage2D:xt,scissor:Q,viewport:le,reset:Ft}}function Z_e(n,e,t,i,s,o,l){const u=s.isWebGL2,h=s.maxTextures,d=s.maxCubemapSize,m=s.maxTextureSize,_=s.maxSamples,v=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,S=/OculusBrowser/g.test(navigator.userAgent),x=new WeakMap;let w;const A=new WeakMap;let k=!1;try{k=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function O(Te,te){return k?new OffscreenCanvas(Te,te):fx("canvas")}function D(Te,te,ke,ot){let ft=1;if((Te.width>ot||Te.height>ot)&&(ft=ot/Math.max(Te.width,Te.height)),ft<1||te===!0)if(typeof HTMLImageElement<"u"&&Te instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Te instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Te instanceof ImageBitmap){const xt=te?qA:Math.floor,at=xt(ft*Te.width),Ge=xt(ft*Te.height);w===void 0&&(w=O(at,Ge));const Ce=ke?O(at,Ge):w;return Ce.width=at,Ce.height=Ge,Ce.getContext("2d").drawImage(Te,0,0,at,Ge),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Te.width+"x"+Te.height+") to ("+at+"x"+Ge+")."),Ce}else return"data"in Te&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Te.width+"x"+Te.height+")."),Te;return Te}function L(Te){return XD(Te.width)&&XD(Te.height)}function z(Te){return u?!1:Te.wrapS!==ep||Te.wrapT!==ep||Te.minFilter!==fa&&Te.minFilter!==Xo}function H(Te,te){return Te.generateMipmaps&&te&&Te.minFilter!==fa&&Te.minFilter!==Xo}function U(Te){n.generateMipmap(Te)}function P(Te,te,ke,ot,ft=!1){if(u===!1)return te;if(Te!==null){if(n[Te]!==void 0)return n[Te];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Te+"'")}let xt=te;return te===6403&&(ke===5126&&(xt=33326),ke===5131&&(xt=33325),ke===5121&&(xt=33321)),te===33319&&(ke===5126&&(xt=33328),ke===5131&&(xt=33327),ke===5121&&(xt=33323)),te===6408&&(ke===5126&&(xt=34836),ke===5131&&(xt=34842),ke===5121&&(xt=ot===Ei&&ft===!1?35907:32856),ke===32819&&(xt=32854),ke===32820&&(xt=32855)),(xt===33325||xt===33326||xt===33327||xt===33328||xt===34842||xt===34836)&&e.get("EXT_color_buffer_float"),xt}function K(Te,te,ke){return H(Te,ke)===!0||Te.isFramebufferTexture&&Te.minFilter!==fa&&Te.minFilter!==Xo?Math.log2(Math.max(te.width,te.height))+1:Te.mipmaps!==void 0&&Te.mipmaps.length>0?Te.mipmaps.length:Te.isCompressedTexture&&Array.isArray(Te.image)?te.mipmaps.length:1}function ee(Te){return Te===fa||Te===KA||Te===JA?9728:9729}function re(Te){const te=Te.target;te.removeEventListener("dispose",re),de(te),te.isVideoTexture&&x.delete(te)}function ie(Te){const te=Te.target;te.removeEventListener("dispose",ie),ce(te)}function de(Te){const te=i.get(Te);if(te.__webglInit===void 0)return;const ke=Te.source,ot=A.get(ke);if(ot){const ft=ot[te.__cacheKey];ft.usedTimes--,ft.usedTimes===0&&oe(Te),Object.keys(ot).length===0&&A.delete(ke)}i.remove(Te)}function oe(Te){const te=i.get(Te);n.deleteTexture(te.__webglTexture);const ke=Te.source,ot=A.get(ke);delete ot[te.__cacheKey],l.memory.textures--}function ce(Te){const te=Te.texture,ke=i.get(Te),ot=i.get(te);if(ot.__webglTexture!==void 0&&(n.deleteTexture(ot.__webglTexture),l.memory.textures--),Te.depthTexture&&Te.depthTexture.dispose(),Te.isWebGLCubeRenderTarget)for(let ft=0;ft<6;ft++)n.deleteFramebuffer(ke.__webglFramebuffer[ft]),ke.__webglDepthbuffer&&n.deleteRenderbuffer(ke.__webglDepthbuffer[ft]);else{if(n.deleteFramebuffer(ke.__webglFramebuffer),ke.__webglDepthbuffer&&n.deleteRenderbuffer(ke.__webglDepthbuffer),ke.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ke.__webglMultisampledFramebuffer),ke.__webglColorRenderbuffer)for(let ft=0;ft<ke.__webglColorRenderbuffer.length;ft++)ke.__webglColorRenderbuffer[ft]&&n.deleteRenderbuffer(ke.__webglColorRenderbuffer[ft]);ke.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ke.__webglDepthRenderbuffer)}if(Te.isWebGLMultipleRenderTargets)for(let ft=0,xt=te.length;ft<xt;ft++){const at=i.get(te[ft]);at.__webglTexture&&(n.deleteTexture(at.__webglTexture),l.memory.textures--),i.remove(te[ft])}i.remove(te),i.remove(Te)}let me=0;function Ae(){me=0}function j(){const Te=me;return Te>=h&&console.warn("THREE.WebGLTextures: Trying to use "+Te+" texture units while this GPU supports only "+h),me+=1,Te}function Z(Te){const te=[];return te.push(Te.wrapS),te.push(Te.wrapT),te.push(Te.magFilter),te.push(Te.minFilter),te.push(Te.anisotropy),te.push(Te.internalFormat),te.push(Te.format),te.push(Te.type),te.push(Te.generateMipmaps),te.push(Te.premultiplyAlpha),te.push(Te.flipY),te.push(Te.unpackAlignment),te.push(Te.encoding),te.join()}function ne(Te,te){const ke=i.get(Te);if(Te.isVideoTexture&&$t(Te),Te.isRenderTargetTexture===!1&&Te.version>0&&ke.__version!==Te.version){const ot=Te.image;if(ot===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ot.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Je(ke,Te,te);return}}t.activeTexture(33984+te),t.bindTexture(3553,ke.__webglTexture)}function ae(Te,te){const ke=i.get(Te);if(Te.version>0&&ke.__version!==Te.version){Je(ke,Te,te);return}t.activeTexture(33984+te),t.bindTexture(35866,ke.__webglTexture)}function _e(Te,te){const ke=i.get(Te);if(Te.version>0&&ke.__version!==Te.version){Je(ke,Te,te);return}t.activeTexture(33984+te),t.bindTexture(32879,ke.__webglTexture)}function Le(Te,te){const ke=i.get(Te);if(Te.version>0&&ke.__version!==Te.version){ht(ke,Te,te);return}t.activeTexture(33984+te),t.bindTexture(34067,ke.__webglTexture)}const we={[WT]:10497,[ep]:33071,[lx]:33648},Xe={[fa]:9728,[KA]:9984,[JA]:9986,[Xo]:9729,[bP]:9985,[wb]:9987};function Re(Te,te,ke){if(ke?(n.texParameteri(Te,10242,we[te.wrapS]),n.texParameteri(Te,10243,we[te.wrapT]),(Te===32879||Te===35866)&&n.texParameteri(Te,32882,we[te.wrapR]),n.texParameteri(Te,10240,Xe[te.magFilter]),n.texParameteri(Te,10241,Xe[te.minFilter])):(n.texParameteri(Te,10242,33071),n.texParameteri(Te,10243,33071),(Te===32879||Te===35866)&&n.texParameteri(Te,32882,33071),(te.wrapS!==ep||te.wrapT!==ep)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(Te,10240,ee(te.magFilter)),n.texParameteri(Te,10241,ee(te.minFilter)),te.minFilter!==fa&&te.minFilter!==Xo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ot=e.get("EXT_texture_filter_anisotropic");if(te.type===Qg&&e.has("OES_texture_float_linear")===!1||u===!1&&te.type===mb&&e.has("OES_texture_half_float_linear")===!1)return;(te.anisotropy>1||i.get(te).__currentAnisotropy)&&(n.texParameterf(Te,ot.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(te.anisotropy,s.getMaxAnisotropy())),i.get(te).__currentAnisotropy=te.anisotropy)}}function qe(Te,te){let ke=!1;Te.__webglInit===void 0&&(Te.__webglInit=!0,te.addEventListener("dispose",re));const ot=te.source;let ft=A.get(ot);ft===void 0&&(ft={},A.set(ot,ft));const xt=Z(te);if(xt!==Te.__cacheKey){ft[xt]===void 0&&(ft[xt]={texture:n.createTexture(),usedTimes:0},l.memory.textures++,ke=!0),ft[xt].usedTimes++;const at=ft[Te.__cacheKey];at!==void 0&&(ft[Te.__cacheKey].usedTimes--,at.usedTimes===0&&oe(te)),Te.__cacheKey=xt,Te.__webglTexture=ft[xt].texture}return ke}function Je(Te,te,ke){let ot=3553;te.isDataArrayTexture&&(ot=35866),te.isData3DTexture&&(ot=32879);const ft=qe(Te,te),xt=te.source;if(t.activeTexture(33984+ke),t.bindTexture(ot,Te.__webglTexture),xt.version!==xt.__currentVersion||ft===!0){n.pixelStorei(37440,te.flipY),n.pixelStorei(37441,te.premultiplyAlpha),n.pixelStorei(3317,te.unpackAlignment),n.pixelStorei(37443,0);const at=z(te)&&L(te.image)===!1;let Ge=D(te.image,at,!1,m);Ge=pt(te,Ge);const Ce=L(Ge)||u,X=o.convert(te.format,te.encoding);let Q=o.convert(te.type),le=P(te.internalFormat,X,Q,te.encoding,te.isVideoTexture);Re(ot,te,Ce);let $e;const We=te.mipmaps,Ft=u&&te.isVideoTexture!==!0,Be=xt.__currentVersion===void 0||ft===!0,Ut=K(te,Ge,Ce);if(te.isDepthTexture)le=6402,u?te.type===Qg?le=36012:te.type===J0?le=33190:te.type===vv?le=35056:le=33189:te.type===Qg&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),te.format===yv&&le===6402&&te.type!==TP&&te.type!==J0&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),te.type=J0,Q=o.convert(te.type)),te.format===wv&&le===6402&&(le=34041,te.type!==vv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),te.type=vv,Q=o.convert(te.type))),Be&&(Ft?t.texStorage2D(3553,1,le,Ge.width,Ge.height):t.texImage2D(3553,0,le,Ge.width,Ge.height,0,X,Q,null));else if(te.isDataTexture)if(We.length>0&&Ce){Ft&&Be&&t.texStorage2D(3553,Ut,le,We[0].width,We[0].height);for(let ut=0,Ht=We.length;ut<Ht;ut++)$e=We[ut],Ft?t.texSubImage2D(3553,ut,0,0,$e.width,$e.height,X,Q,$e.data):t.texImage2D(3553,ut,le,$e.width,$e.height,0,X,Q,$e.data);te.generateMipmaps=!1}else Ft?(Be&&t.texStorage2D(3553,Ut,le,Ge.width,Ge.height),t.texSubImage2D(3553,0,0,0,Ge.width,Ge.height,X,Q,Ge.data)):t.texImage2D(3553,0,le,Ge.width,Ge.height,0,X,Q,Ge.data);else if(te.isCompressedTexture){Ft&&Be&&t.texStorage2D(3553,Ut,le,We[0].width,We[0].height);for(let ut=0,Ht=We.length;ut<Ht;ut++)$e=We[ut],te.format!==Pp?X!==null?Ft?t.compressedTexSubImage2D(3553,ut,0,0,$e.width,$e.height,X,$e.data):t.compressedTexImage2D(3553,ut,le,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ft?t.texSubImage2D(3553,ut,0,0,$e.width,$e.height,X,Q,$e.data):t.texImage2D(3553,ut,le,$e.width,$e.height,0,X,Q,$e.data)}else if(te.isDataArrayTexture)Ft?(Be&&t.texStorage3D(35866,Ut,le,Ge.width,Ge.height,Ge.depth),t.texSubImage3D(35866,0,0,0,0,Ge.width,Ge.height,Ge.depth,X,Q,Ge.data)):t.texImage3D(35866,0,le,Ge.width,Ge.height,Ge.depth,0,X,Q,Ge.data);else if(te.isData3DTexture)Ft?(Be&&t.texStorage3D(32879,Ut,le,Ge.width,Ge.height,Ge.depth),t.texSubImage3D(32879,0,0,0,0,Ge.width,Ge.height,Ge.depth,X,Q,Ge.data)):t.texImage3D(32879,0,le,Ge.width,Ge.height,Ge.depth,0,X,Q,Ge.data);else if(te.isFramebufferTexture){if(Be)if(Ft)t.texStorage2D(3553,Ut,le,Ge.width,Ge.height);else{let ut=Ge.width,Ht=Ge.height;for(let zt=0;zt<Ut;zt++)t.texImage2D(3553,zt,le,ut,Ht,0,X,Q,null),ut>>=1,Ht>>=1}}else if(We.length>0&&Ce){Ft&&Be&&t.texStorage2D(3553,Ut,le,We[0].width,We[0].height);for(let ut=0,Ht=We.length;ut<Ht;ut++)$e=We[ut],Ft?t.texSubImage2D(3553,ut,0,0,X,Q,$e):t.texImage2D(3553,ut,le,X,Q,$e);te.generateMipmaps=!1}else Ft?(Be&&t.texStorage2D(3553,Ut,le,Ge.width,Ge.height),t.texSubImage2D(3553,0,0,0,X,Q,Ge)):t.texImage2D(3553,0,le,X,Q,Ge);H(te,Ce)&&U(ot),xt.__currentVersion=xt.version,te.onUpdate&&te.onUpdate(te)}Te.__version=te.version}function ht(Te,te,ke){if(te.image.length!==6)return;const ot=qe(Te,te),ft=te.source;if(t.activeTexture(33984+ke),t.bindTexture(34067,Te.__webglTexture),ft.version!==ft.__currentVersion||ot===!0){n.pixelStorei(37440,te.flipY),n.pixelStorei(37441,te.premultiplyAlpha),n.pixelStorei(3317,te.unpackAlignment),n.pixelStorei(37443,0);const xt=te.isCompressedTexture||te.image[0].isCompressedTexture,at=te.image[0]&&te.image[0].isDataTexture,Ge=[];for(let ut=0;ut<6;ut++)!xt&&!at?Ge[ut]=D(te.image[ut],!1,!0,d):Ge[ut]=at?te.image[ut].image:te.image[ut],Ge[ut]=pt(te,Ge[ut]);const Ce=Ge[0],X=L(Ce)||u,Q=o.convert(te.format,te.encoding),le=o.convert(te.type),$e=P(te.internalFormat,Q,le,te.encoding),We=u&&te.isVideoTexture!==!0,Ft=ft.__currentVersion===void 0||ot===!0;let Be=K(te,Ce,X);Re(34067,te,X);let Ut;if(xt){We&&Ft&&t.texStorage2D(34067,Be,$e,Ce.width,Ce.height);for(let ut=0;ut<6;ut++){Ut=Ge[ut].mipmaps;for(let Ht=0;Ht<Ut.length;Ht++){const zt=Ut[Ht];te.format!==Pp?Q!==null?We?t.compressedTexSubImage2D(34069+ut,Ht,0,0,zt.width,zt.height,Q,zt.data):t.compressedTexImage2D(34069+ut,Ht,$e,zt.width,zt.height,0,zt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):We?t.texSubImage2D(34069+ut,Ht,0,0,zt.width,zt.height,Q,le,zt.data):t.texImage2D(34069+ut,Ht,$e,zt.width,zt.height,0,Q,le,zt.data)}}}else{Ut=te.mipmaps,We&&Ft&&(Ut.length>0&&Be++,t.texStorage2D(34067,Be,$e,Ge[0].width,Ge[0].height));for(let ut=0;ut<6;ut++)if(at){We?t.texSubImage2D(34069+ut,0,0,0,Ge[ut].width,Ge[ut].height,Q,le,Ge[ut].data):t.texImage2D(34069+ut,0,$e,Ge[ut].width,Ge[ut].height,0,Q,le,Ge[ut].data);for(let Ht=0;Ht<Ut.length;Ht++){const zt=Ut[Ht].image[ut].image;We?t.texSubImage2D(34069+ut,Ht+1,0,0,zt.width,zt.height,Q,le,zt.data):t.texImage2D(34069+ut,Ht+1,$e,zt.width,zt.height,0,Q,le,zt.data)}}else{We?t.texSubImage2D(34069+ut,0,0,0,Q,le,Ge[ut]):t.texImage2D(34069+ut,0,$e,Q,le,Ge[ut]);for(let Ht=0;Ht<Ut.length;Ht++){const zt=Ut[Ht];We?t.texSubImage2D(34069+ut,Ht+1,0,0,Q,le,zt.image[ut]):t.texImage2D(34069+ut,Ht+1,$e,Q,le,zt.image[ut])}}}H(te,X)&&U(34067),ft.__currentVersion=ft.version,te.onUpdate&&te.onUpdate(te)}Te.__version=te.version}function it(Te,te,ke,ot,ft){const xt=o.convert(ke.format,ke.encoding),at=o.convert(ke.type),Ge=P(ke.internalFormat,xt,at,ke.encoding);i.get(te).__hasExternalTextures||(ft===32879||ft===35866?t.texImage3D(ft,0,Ge,te.width,te.height,te.depth,0,xt,at,null):t.texImage2D(ft,0,Ge,te.width,te.height,0,xt,at,null)),t.bindFramebuffer(36160,Te),wt(te)?v.framebufferTexture2DMultisampleEXT(36160,ot,ft,i.get(ke).__webglTexture,0,mt(te)):n.framebufferTexture2D(36160,ot,ft,i.get(ke).__webglTexture,0),t.bindFramebuffer(36160,null)}function Oe(Te,te,ke){if(n.bindRenderbuffer(36161,Te),te.depthBuffer&&!te.stencilBuffer){let ot=33189;if(ke||wt(te)){const ft=te.depthTexture;ft&&ft.isDepthTexture&&(ft.type===Qg?ot=36012:ft.type===J0&&(ot=33190));const xt=mt(te);wt(te)?v.renderbufferStorageMultisampleEXT(36161,xt,ot,te.width,te.height):n.renderbufferStorageMultisample(36161,xt,ot,te.width,te.height)}else n.renderbufferStorage(36161,ot,te.width,te.height);n.framebufferRenderbuffer(36160,36096,36161,Te)}else if(te.depthBuffer&&te.stencilBuffer){const ot=mt(te);ke&&wt(te)===!1?n.renderbufferStorageMultisample(36161,ot,35056,te.width,te.height):wt(te)?v.renderbufferStorageMultisampleEXT(36161,ot,35056,te.width,te.height):n.renderbufferStorage(36161,34041,te.width,te.height),n.framebufferRenderbuffer(36160,33306,36161,Te)}else{const ot=te.isWebGLMultipleRenderTargets===!0?te.texture:[te.texture];for(let ft=0;ft<ot.length;ft++){const xt=ot[ft],at=o.convert(xt.format,xt.encoding),Ge=o.convert(xt.type),Ce=P(xt.internalFormat,at,Ge,xt.encoding),X=mt(te);ke&&wt(te)===!1?n.renderbufferStorageMultisample(36161,X,Ce,te.width,te.height):wt(te)?v.renderbufferStorageMultisampleEXT(36161,X,Ce,te.width,te.height):n.renderbufferStorage(36161,Ce,te.width,te.height)}}n.bindRenderbuffer(36161,null)}function Ee(Te,te){if(te&&te.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,Te),!(te.depthTexture&&te.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(te.depthTexture).__webglTexture||te.depthTexture.image.width!==te.width||te.depthTexture.image.height!==te.height)&&(te.depthTexture.image.width=te.width,te.depthTexture.image.height=te.height,te.depthTexture.needsUpdate=!0),ne(te.depthTexture,0);const ke=i.get(te.depthTexture).__webglTexture,ot=mt(te);if(te.depthTexture.format===yv)wt(te)?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,ke,0,ot):n.framebufferTexture2D(36160,36096,3553,ke,0);else if(te.depthTexture.format===wv)wt(te)?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,ke,0,ot):n.framebufferTexture2D(36160,33306,3553,ke,0);else throw new Error("Unknown depthTexture format")}function Fe(Te){const te=i.get(Te),ke=Te.isWebGLCubeRenderTarget===!0;if(Te.depthTexture&&!te.__autoAllocateDepthBuffer){if(ke)throw new Error("target.depthTexture not supported in Cube render targets");Ee(te.__webglFramebuffer,Te)}else if(ke){te.__webglDepthbuffer=[];for(let ot=0;ot<6;ot++)t.bindFramebuffer(36160,te.__webglFramebuffer[ot]),te.__webglDepthbuffer[ot]=n.createRenderbuffer(),Oe(te.__webglDepthbuffer[ot],Te,!1)}else t.bindFramebuffer(36160,te.__webglFramebuffer),te.__webglDepthbuffer=n.createRenderbuffer(),Oe(te.__webglDepthbuffer,Te,!1);t.bindFramebuffer(36160,null)}function rt(Te,te,ke){const ot=i.get(Te);te!==void 0&&it(ot.__webglFramebuffer,Te,Te.texture,36064,3553),ke!==void 0&&Fe(Te)}function nt(Te){const te=Te.texture,ke=i.get(Te),ot=i.get(te);Te.addEventListener("dispose",ie),Te.isWebGLMultipleRenderTargets!==!0&&(ot.__webglTexture===void 0&&(ot.__webglTexture=n.createTexture()),ot.__version=te.version,l.memory.textures++);const ft=Te.isWebGLCubeRenderTarget===!0,xt=Te.isWebGLMultipleRenderTargets===!0,at=L(Te)||u;if(ft){ke.__webglFramebuffer=[];for(let Ge=0;Ge<6;Ge++)ke.__webglFramebuffer[Ge]=n.createFramebuffer()}else{if(ke.__webglFramebuffer=n.createFramebuffer(),xt)if(s.drawBuffers){const Ge=Te.texture;for(let Ce=0,X=Ge.length;Ce<X;Ce++){const Q=i.get(Ge[Ce]);Q.__webglTexture===void 0&&(Q.__webglTexture=n.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&Te.samples>0&&wt(Te)===!1){const Ge=xt?te:[te];ke.__webglMultisampledFramebuffer=n.createFramebuffer(),ke.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ke.__webglMultisampledFramebuffer);for(let Ce=0;Ce<Ge.length;Ce++){const X=Ge[Ce];ke.__webglColorRenderbuffer[Ce]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ke.__webglColorRenderbuffer[Ce]);const Q=o.convert(X.format,X.encoding),le=o.convert(X.type),$e=P(X.internalFormat,Q,le,X.encoding),We=mt(Te);n.renderbufferStorageMultisample(36161,We,$e,Te.width,Te.height),n.framebufferRenderbuffer(36160,36064+Ce,36161,ke.__webglColorRenderbuffer[Ce])}n.bindRenderbuffer(36161,null),Te.depthBuffer&&(ke.__webglDepthRenderbuffer=n.createRenderbuffer(),Oe(ke.__webglDepthRenderbuffer,Te,!0)),t.bindFramebuffer(36160,null)}}if(ft){t.bindTexture(34067,ot.__webglTexture),Re(34067,te,at);for(let Ge=0;Ge<6;Ge++)it(ke.__webglFramebuffer[Ge],Te,te,36064,34069+Ge);H(te,at)&&U(34067),t.unbindTexture()}else if(xt){const Ge=Te.texture;for(let Ce=0,X=Ge.length;Ce<X;Ce++){const Q=Ge[Ce],le=i.get(Q);t.bindTexture(3553,le.__webglTexture),Re(3553,Q,at),it(ke.__webglFramebuffer,Te,Q,36064+Ce,3553),H(Q,at)&&U(3553)}t.unbindTexture()}else{let Ge=3553;(Te.isWebGL3DRenderTarget||Te.isWebGLArrayRenderTarget)&&(u?Ge=Te.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ge,ot.__webglTexture),Re(Ge,te,at),it(ke.__webglFramebuffer,Te,te,36064,Ge),H(te,at)&&U(Ge),t.unbindTexture()}Te.depthBuffer&&Fe(Te)}function dt(Te){const te=L(Te)||u,ke=Te.isWebGLMultipleRenderTargets===!0?Te.texture:[Te.texture];for(let ot=0,ft=ke.length;ot<ft;ot++){const xt=ke[ot];if(H(xt,te)){const at=Te.isWebGLCubeRenderTarget?34067:3553,Ge=i.get(xt).__webglTexture;t.bindTexture(at,Ge),U(at),t.unbindTexture()}}}function It(Te){if(u&&Te.samples>0&&wt(Te)===!1){const te=Te.isWebGLMultipleRenderTargets?Te.texture:[Te.texture],ke=Te.width,ot=Te.height;let ft=16384;const xt=[],at=Te.stencilBuffer?33306:36096,Ge=i.get(Te),Ce=Te.isWebGLMultipleRenderTargets===!0;if(Ce)for(let X=0;X<te.length;X++)t.bindFramebuffer(36160,Ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+X,36161,null),t.bindFramebuffer(36160,Ge.__webglFramebuffer),n.framebufferTexture2D(36009,36064+X,3553,null,0);t.bindFramebuffer(36008,Ge.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ge.__webglFramebuffer);for(let X=0;X<te.length;X++){xt.push(36064+X),Te.depthBuffer&&xt.push(at);const Q=Ge.__ignoreDepthValues!==void 0?Ge.__ignoreDepthValues:!1;if(Q===!1&&(Te.depthBuffer&&(ft|=256),Te.stencilBuffer&&(ft|=1024)),Ce&&n.framebufferRenderbuffer(36008,36064,36161,Ge.__webglColorRenderbuffer[X]),Q===!0&&(n.invalidateFramebuffer(36008,[at]),n.invalidateFramebuffer(36009,[at])),Ce){const le=i.get(te[X]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,le,0)}n.blitFramebuffer(0,0,ke,ot,0,0,ke,ot,ft,9728),S&&n.invalidateFramebuffer(36008,xt)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Ce)for(let X=0;X<te.length;X++){t.bindFramebuffer(36160,Ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+X,36161,Ge.__webglColorRenderbuffer[X]);const Q=i.get(te[X]).__webglTexture;t.bindFramebuffer(36160,Ge.__webglFramebuffer),n.framebufferTexture2D(36009,36064+X,3553,Q,0)}t.bindFramebuffer(36009,Ge.__webglMultisampledFramebuffer)}}function mt(Te){return Math.min(_,Te.samples)}function wt(Te){const te=i.get(Te);return u&&Te.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&te.__useRenderToTexture!==!1}function $t(Te){const te=l.render.frame;x.get(Te)!==te&&(x.set(Te,te),Te.update())}function pt(Te,te){const ke=Te.encoding,ot=Te.format,ft=Te.type;return Te.isCompressedTexture===!0||Te.isVideoTexture===!0||Te.format===QA||ke!==$m&&(ke===Ei?u===!1?e.has("EXT_sRGB")===!0&&ot===Pp?(Te.format=QA,Te.minFilter=Xo,Te.generateMipmaps=!1):te=$P.sRGBToLinear(te):(ot!==Pp||ft!==Xh)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ke)),te}this.allocateTextureUnit=j,this.resetTextureUnits=Ae,this.setTexture2D=ne,this.setTexture2DArray=ae,this.setTexture3D=_e,this.setTextureCube=Le,this.rebindTextures=rt,this.setupRenderTarget=nt,this.updateRenderTargetMipmap=dt,this.updateMultisampleRenderTarget=It,this.setupDepthRenderbuffer=Fe,this.setupFrameBufferTexture=it,this.useMultisampledRTT=wt}function U7(n,e,t){const i=t.isWebGL2;function s(o,l=null){let u;if(o===Xh)return 5121;if(o===h7)return 32819;if(o===d7)return 32820;if(o===l7)return 5120;if(o===u7)return 5122;if(o===TP)return 5123;if(o===c7)return 5124;if(o===J0)return 5125;if(o===Qg)return 5126;if(o===mb)return i?5131:(u=e.get("OES_texture_half_float"),u!==null?u.HALF_FLOAT_OES:null);if(o===p7)return 6406;if(o===Pp)return 6408;if(o===m7)return 6409;if(o===g7)return 6410;if(o===yv)return 6402;if(o===wv)return 34041;if(o===_7)return 6403;if(o===f7)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(o===QA)return u=e.get("EXT_sRGB"),u!==null?u.SRGB_ALPHA_EXT:null;if(o===v7)return 36244;if(o===y7)return 33319;if(o===b7)return 33320;if(o===T7)return 36249;if(o===KM||o===JM||o===QM||o===qM)if(l===Ei)if(u=e.get("WEBGL_compressed_texture_s3tc_srgb"),u!==null){if(o===KM)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===JM)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===QM)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===qM)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(u=e.get("WEBGL_compressed_texture_s3tc"),u!==null){if(o===KM)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===JM)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===QM)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===qM)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===xD||o===wD||o===CD||o===MD)if(u=e.get("WEBGL_compressed_texture_pvrtc"),u!==null){if(o===xD)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===wD)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===CD)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===MD)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===S7)return u=e.get("WEBGL_compressed_texture_etc1"),u!==null?u.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===AD||o===ID)if(u=e.get("WEBGL_compressed_texture_etc"),u!==null){if(o===AD)return l===Ei?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(o===ID)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===RD||o===kD||o===OD||o===LD||o===DD||o===ND||o===BD||o===PD||o===FD||o===UD||o===zD||o===HD||o===GD||o===WD)if(u=e.get("WEBGL_compressed_texture_astc"),u!==null){if(o===RD)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===kD)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===OD)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===LD)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===DD)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===ND)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===BD)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===PD)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===FD)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===UD)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===zD)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===HD)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===GD)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===WD)return l===Ei?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===VD)if(u=e.get("EXT_texture_compression_bptc"),u!==null){if(o===VD)return l===Ei?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return o===vv?i?34042:(u=e.get("WEBGL_depth_texture"),u!==null?u.UNSIGNED_INT_24_8_WEBGL:null):n[o]!==void 0?n[o]:null}return{convert:s}}class z7 extends ko{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class dT extends as{constructor(){super(),this.isGroup=!0,this.type="Group"}}const eve={type:"move"};class pO{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new dT,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new dT,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new be,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new be),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new dT,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new be,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new be),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,o=null,l=null;const u=this._targetRay,h=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){l=!0;for(const w of e.hand.values()){const A=t.getJointPose(w,i);if(d.joints[w.jointName]===void 0){const O=new dT;O.matrixAutoUpdate=!1,O.visible=!1,d.joints[w.jointName]=O,d.add(O)}const k=d.joints[w.jointName];A!==null&&(k.matrix.fromArray(A.transform.matrix),k.matrix.decompose(k.position,k.rotation,k.scale),k.jointRadius=A.radius),k.visible=A!==null}const m=d.joints["index-finger-tip"],_=d.joints["thumb-tip"],v=m.position.distanceTo(_.position),S=.02,x=.005;d.inputState.pinching&&v>S+x?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&v<=S-x&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1));u!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&o!==null&&(s=o),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(eve)))}return u!==null&&(u.visible=s!==null),h!==null&&(h.visible=o!==null),d!==null&&(d.visible=l!==null),this}}class MP extends Fl{constructor(e,t,i,s,o,l,u,h,d,m){if(m=m!==void 0?m:yv,m!==yv&&m!==wv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&m===yv&&(i=J0),i===void 0&&m===wv&&(i=vv),super(null,s,o,l,u,h,m,i,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:fa,this.minFilter=h!==void 0?h:fa,this.flipY=!1,this.generateMipmaps=!1}}class tve extends Df{constructor(e,t){super();const i=this;let s=null,o=1,l=null,u="local-floor",h=null,d=null,m=null,_=null,v=null,S=null;const x=t.getContextAttributes();let w=null,A=null;const k=[],O=[],D=new ko;D.layers.enable(1),D.viewport=new Ii;const L=new ko;L.layers.enable(2),L.viewport=new Ii;const z=[D,L],H=new z7;H.layers.enable(1),H.layers.enable(2);let U=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let ne=k[Z];return ne===void 0&&(ne=new pO,k[Z]=ne),ne.getTargetRaySpace()},this.getControllerGrip=function(Z){let ne=k[Z];return ne===void 0&&(ne=new pO,k[Z]=ne),ne.getGripSpace()},this.getHand=function(Z){let ne=k[Z];return ne===void 0&&(ne=new pO,k[Z]=ne),ne.getHandSpace()};function K(Z){const ne=O.indexOf(Z.inputSource);if(ne===-1)return;const ae=k[ne];ae!==void 0&&ae.dispatchEvent({type:Z.type,data:Z.inputSource})}function ee(){s.removeEventListener("select",K),s.removeEventListener("selectstart",K),s.removeEventListener("selectend",K),s.removeEventListener("squeeze",K),s.removeEventListener("squeezestart",K),s.removeEventListener("squeezeend",K),s.removeEventListener("end",ee),s.removeEventListener("inputsourceschange",re);for(let Z=0;Z<k.length;Z++){const ne=O[Z];ne!==null&&(O[Z]=null,k[Z].disconnect(ne))}U=null,P=null,e.setRenderTarget(w),v=null,_=null,m=null,s=null,A=null,j.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){o=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){u=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||l},this.setReferenceSpace=function(Z){h=Z},this.getBaseLayer=function(){return _!==null?_:v},this.getBinding=function(){return m},this.getFrame=function(){return S},this.getSession=function(){return s},this.setSession=async function(Z){if(s=Z,s!==null){if(w=e.getRenderTarget(),s.addEventListener("select",K),s.addEventListener("selectstart",K),s.addEventListener("selectend",K),s.addEventListener("squeeze",K),s.addEventListener("squeezestart",K),s.addEventListener("squeezeend",K),s.addEventListener("end",ee),s.addEventListener("inputsourceschange",re),x.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ne={antialias:s.renderState.layers===void 0?x.antialias:!0,alpha:x.alpha,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:o};v=new XRWebGLLayer(s,t,ne),s.updateRenderState({baseLayer:v}),A=new cu(v.framebufferWidth,v.framebufferHeight,{format:Pp,type:Xh,encoding:e.outputEncoding})}else{let ne=null,ae=null,_e=null;x.depth&&(_e=x.stencil?35056:33190,ne=x.stencil?wv:yv,ae=x.stencil?vv:J0);const Le={colorFormat:32856,depthFormat:_e,scaleFactor:o};m=new XRWebGLBinding(s,t),_=m.createProjectionLayer(Le),s.updateRenderState({layers:[_]}),A=new cu(_.textureWidth,_.textureHeight,{format:Pp,type:Xh,depthTexture:new MP(_.textureWidth,_.textureHeight,ae,void 0,void 0,void 0,void 0,void 0,void 0,ne),stencilBuffer:x.stencil,encoding:e.outputEncoding,samples:x.antialias?4:0});const we=e.properties.get(A);we.__ignoreDepthValues=_.ignoreDepthValues}A.isXRRenderTarget=!0,this.setFoveation(1),h=null,l=await s.requestReferenceSpace(u),j.setContext(s),j.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function re(Z){for(let ne=0;ne<Z.removed.length;ne++){const ae=Z.removed[ne],_e=O.indexOf(ae);_e>=0&&(O[_e]=null,k[_e].dispatchEvent({type:"disconnected",data:ae}))}for(let ne=0;ne<Z.added.length;ne++){const ae=Z.added[ne];let _e=O.indexOf(ae);if(_e===-1){for(let we=0;we<k.length;we++)if(we>=O.length){O.push(ae),_e=we;break}else if(O[we]===null){O[we]=ae,_e=we;break}if(_e===-1)break}const Le=k[_e];Le&&Le.dispatchEvent({type:"connected",data:ae})}}const ie=new be,de=new be;function oe(Z,ne,ae){ie.setFromMatrixPosition(ne.matrixWorld),de.setFromMatrixPosition(ae.matrixWorld);const _e=ie.distanceTo(de),Le=ne.projectionMatrix.elements,we=ae.projectionMatrix.elements,Xe=Le[14]/(Le[10]-1),Re=Le[14]/(Le[10]+1),qe=(Le[9]+1)/Le[5],Je=(Le[9]-1)/Le[5],ht=(Le[8]-1)/Le[0],it=(we[8]+1)/we[0],Oe=Xe*ht,Ee=Xe*it,Fe=_e/(-ht+it),rt=Fe*-ht;ne.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(rt),Z.translateZ(Fe),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert();const nt=Xe+Fe,dt=Re+Fe,It=Oe-rt,mt=Ee+(_e-rt),wt=qe*Re/dt*nt,$t=Je*Re/dt*nt;Z.projectionMatrix.makePerspective(It,mt,wt,$t,nt,dt)}function ce(Z,ne){ne===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(ne.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(s===null)return;H.near=L.near=D.near=Z.near,H.far=L.far=D.far=Z.far,(U!==H.near||P!==H.far)&&(s.updateRenderState({depthNear:H.near,depthFar:H.far}),U=H.near,P=H.far);const ne=Z.parent,ae=H.cameras;ce(H,ne);for(let Le=0;Le<ae.length;Le++)ce(ae[Le],ne);H.matrixWorld.decompose(H.position,H.quaternion,H.scale),Z.position.copy(H.position),Z.quaternion.copy(H.quaternion),Z.scale.copy(H.scale),Z.matrix.copy(H.matrix),Z.matrixWorld.copy(H.matrixWorld);const _e=Z.children;for(let Le=0,we=_e.length;Le<we;Le++)_e[Le].updateMatrixWorld(!0);ae.length===2?oe(H,D,L):H.projectionMatrix.copy(D.projectionMatrix)},this.getCamera=function(){return H},this.getFoveation=function(){if(_!==null)return _.fixedFoveation;if(v!==null)return v.fixedFoveation},this.setFoveation=function(Z){_!==null&&(_.fixedFoveation=Z),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=Z)};let me=null;function Ae(Z,ne){if(d=ne.getViewerPose(h||l),S=ne,d!==null){const ae=d.views;v!==null&&(e.setRenderTargetFramebuffer(A,v.framebuffer),e.setRenderTarget(A));let _e=!1;ae.length!==H.cameras.length&&(H.cameras.length=0,_e=!0);for(let Le=0;Le<ae.length;Le++){const we=ae[Le];let Xe=null;if(v!==null)Xe=v.getViewport(we);else{const qe=m.getViewSubImage(_,we);Xe=qe.viewport,Le===0&&(e.setRenderTargetTextures(A,qe.colorTexture,_.ignoreDepthValues?void 0:qe.depthStencilTexture),e.setRenderTarget(A))}let Re=z[Le];Re===void 0&&(Re=new ko,Re.layers.enable(Le),Re.viewport=new Ii,z[Le]=Re),Re.matrix.fromArray(we.transform.matrix),Re.projectionMatrix.fromArray(we.projectionMatrix),Re.viewport.set(Xe.x,Xe.y,Xe.width,Xe.height),Le===0&&H.matrix.copy(Re.matrix),_e===!0&&H.cameras.push(Re)}}for(let ae=0;ae<k.length;ae++){const _e=O[ae],Le=k[ae];_e!==null&&Le!==void 0&&Le.update(_e,ne,h||l)}me&&me(Z,ne),S=null}const j=new L7;j.setAnimationLoop(Ae),this.setAnimationLoop=function(Z){me=Z},this.dispose=function(){}}}function nve(n,e){function t(w,A){w.fogColor.value.copy(A.color),A.isFog?(w.fogNear.value=A.near,w.fogFar.value=A.far):A.isFogExp2&&(w.fogDensity.value=A.density)}function i(w,A,k,O,D){A.isMeshBasicMaterial||A.isMeshLambertMaterial?s(w,A):A.isMeshToonMaterial?(s(w,A),m(w,A)):A.isMeshPhongMaterial?(s(w,A),d(w,A)):A.isMeshStandardMaterial?(s(w,A),_(w,A),A.isMeshPhysicalMaterial&&v(w,A,D)):A.isMeshMatcapMaterial?(s(w,A),S(w,A)):A.isMeshDepthMaterial?s(w,A):A.isMeshDistanceMaterial?(s(w,A),x(w,A)):A.isMeshNormalMaterial?s(w,A):A.isLineBasicMaterial?(o(w,A),A.isLineDashedMaterial&&l(w,A)):A.isPointsMaterial?u(w,A,k,O):A.isSpriteMaterial?h(w,A):A.isShadowMaterial?(w.color.value.copy(A.color),w.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function s(w,A){w.opacity.value=A.opacity,A.color&&w.diffuse.value.copy(A.color),A.emissive&&w.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(w.map.value=A.map),A.alphaMap&&(w.alphaMap.value=A.alphaMap),A.bumpMap&&(w.bumpMap.value=A.bumpMap,w.bumpScale.value=A.bumpScale,A.side===Gc&&(w.bumpScale.value*=-1)),A.displacementMap&&(w.displacementMap.value=A.displacementMap,w.displacementScale.value=A.displacementScale,w.displacementBias.value=A.displacementBias),A.emissiveMap&&(w.emissiveMap.value=A.emissiveMap),A.normalMap&&(w.normalMap.value=A.normalMap,w.normalScale.value.copy(A.normalScale),A.side===Gc&&w.normalScale.value.negate()),A.specularMap&&(w.specularMap.value=A.specularMap),A.alphaTest>0&&(w.alphaTest.value=A.alphaTest);const k=e.get(A).envMap;if(k&&(w.envMap.value=k,w.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=A.reflectivity,w.ior.value=A.ior,w.refractionRatio.value=A.refractionRatio),A.lightMap){w.lightMap.value=A.lightMap;const L=n.physicallyCorrectLights!==!0?Math.PI:1;w.lightMapIntensity.value=A.lightMapIntensity*L}A.aoMap&&(w.aoMap.value=A.aoMap,w.aoMapIntensity.value=A.aoMapIntensity);let O;A.map?O=A.map:A.specularMap?O=A.specularMap:A.displacementMap?O=A.displacementMap:A.normalMap?O=A.normalMap:A.bumpMap?O=A.bumpMap:A.roughnessMap?O=A.roughnessMap:A.metalnessMap?O=A.metalnessMap:A.alphaMap?O=A.alphaMap:A.emissiveMap?O=A.emissiveMap:A.clearcoatMap?O=A.clearcoatMap:A.clearcoatNormalMap?O=A.clearcoatNormalMap:A.clearcoatRoughnessMap?O=A.clearcoatRoughnessMap:A.iridescenceMap?O=A.iridescenceMap:A.iridescenceThicknessMap?O=A.iridescenceThicknessMap:A.specularIntensityMap?O=A.specularIntensityMap:A.specularColorMap?O=A.specularColorMap:A.transmissionMap?O=A.transmissionMap:A.thicknessMap?O=A.thicknessMap:A.sheenColorMap?O=A.sheenColorMap:A.sheenRoughnessMap&&(O=A.sheenRoughnessMap),O!==void 0&&(O.isWebGLRenderTarget&&(O=O.texture),O.matrixAutoUpdate===!0&&O.updateMatrix(),w.uvTransform.value.copy(O.matrix));let D;A.aoMap?D=A.aoMap:A.lightMap&&(D=A.lightMap),D!==void 0&&(D.isWebGLRenderTarget&&(D=D.texture),D.matrixAutoUpdate===!0&&D.updateMatrix(),w.uv2Transform.value.copy(D.matrix))}function o(w,A){w.diffuse.value.copy(A.color),w.opacity.value=A.opacity}function l(w,A){w.dashSize.value=A.dashSize,w.totalSize.value=A.dashSize+A.gapSize,w.scale.value=A.scale}function u(w,A,k,O){w.diffuse.value.copy(A.color),w.opacity.value=A.opacity,w.size.value=A.size*k,w.scale.value=O*.5,A.map&&(w.map.value=A.map),A.alphaMap&&(w.alphaMap.value=A.alphaMap),A.alphaTest>0&&(w.alphaTest.value=A.alphaTest);let D;A.map?D=A.map:A.alphaMap&&(D=A.alphaMap),D!==void 0&&(D.matrixAutoUpdate===!0&&D.updateMatrix(),w.uvTransform.value.copy(D.matrix))}function h(w,A){w.diffuse.value.copy(A.color),w.opacity.value=A.opacity,w.rotation.value=A.rotation,A.map&&(w.map.value=A.map),A.alphaMap&&(w.alphaMap.value=A.alphaMap),A.alphaTest>0&&(w.alphaTest.value=A.alphaTest);let k;A.map?k=A.map:A.alphaMap&&(k=A.alphaMap),k!==void 0&&(k.matrixAutoUpdate===!0&&k.updateMatrix(),w.uvTransform.value.copy(k.matrix))}function d(w,A){w.specular.value.copy(A.specular),w.shininess.value=Math.max(A.shininess,1e-4)}function m(w,A){A.gradientMap&&(w.gradientMap.value=A.gradientMap)}function _(w,A){w.roughness.value=A.roughness,w.metalness.value=A.metalness,A.roughnessMap&&(w.roughnessMap.value=A.roughnessMap),A.metalnessMap&&(w.metalnessMap.value=A.metalnessMap),e.get(A).envMap&&(w.envMapIntensity.value=A.envMapIntensity)}function v(w,A,k){w.ior.value=A.ior,A.sheen>0&&(w.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),w.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(w.sheenColorMap.value=A.sheenColorMap),A.sheenRoughnessMap&&(w.sheenRoughnessMap.value=A.sheenRoughnessMap)),A.clearcoat>0&&(w.clearcoat.value=A.clearcoat,w.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(w.clearcoatMap.value=A.clearcoatMap),A.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap),A.clearcoatNormalMap&&(w.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),w.clearcoatNormalMap.value=A.clearcoatNormalMap,A.side===Gc&&w.clearcoatNormalScale.value.negate())),A.iridescence>0&&(w.iridescence.value=A.iridescence,w.iridescenceIOR.value=A.iridescenceIOR,w.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(w.iridescenceMap.value=A.iridescenceMap),A.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=A.iridescenceThicknessMap)),A.transmission>0&&(w.transmission.value=A.transmission,w.transmissionSamplerMap.value=k.texture,w.transmissionSamplerSize.value.set(k.width,k.height),A.transmissionMap&&(w.transmissionMap.value=A.transmissionMap),w.thickness.value=A.thickness,A.thicknessMap&&(w.thicknessMap.value=A.thicknessMap),w.attenuationDistance.value=A.attenuationDistance,w.attenuationColor.value.copy(A.attenuationColor)),w.specularIntensity.value=A.specularIntensity,w.specularColor.value.copy(A.specularColor),A.specularIntensityMap&&(w.specularIntensityMap.value=A.specularIntensityMap),A.specularColorMap&&(w.specularColorMap.value=A.specularColorMap)}function S(w,A){A.matcap&&(w.matcap.value=A.matcap)}function x(w,A){w.referencePosition.value.copy(A.referencePosition),w.nearDistance.value=A.nearDistance,w.farDistance.value=A.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function rve(n,e,t,i){let s={},o={},l=[];const u=t.isWebGL2?n.getParameter(35375):0;function h(O,D){const L=D.program;i.uniformBlockBinding(O,L)}function d(O,D){let L=s[O.id];L===void 0&&(x(O),L=m(O),s[O.id]=L,O.addEventListener("dispose",A));const z=D.program;i.updateUBOMapping(O,z);const H=e.render.frame;o[O.id]!==H&&(v(O),o[O.id]=H)}function m(O){const D=_();O.__bindingPointIndex=D;const L=n.createBuffer(),z=O.__size,H=O.usage;return n.bindBuffer(35345,L),n.bufferData(35345,z,H),n.bindBuffer(35345,null),n.bindBufferBase(35345,D,L),L}function _(){for(let O=0;O<u;O++)if(l.indexOf(O)===-1)return l.push(O),O;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(O){const D=s[O.id],L=O.uniforms,z=O.__cache;n.bindBuffer(35345,D);for(let H=0,U=L.length;H<U;H++){const P=L[H];if(S(P,H,z)===!0){const K=P.value,ee=P.__offset;typeof K=="number"?(P.__data[0]=K,n.bufferSubData(35345,ee,P.__data)):(P.value.isMatrix3?(P.__data[0]=P.value.elements[0],P.__data[1]=P.value.elements[1],P.__data[2]=P.value.elements[2],P.__data[3]=P.value.elements[0],P.__data[4]=P.value.elements[3],P.__data[5]=P.value.elements[4],P.__data[6]=P.value.elements[5],P.__data[7]=P.value.elements[0],P.__data[8]=P.value.elements[6],P.__data[9]=P.value.elements[7],P.__data[10]=P.value.elements[8],P.__data[11]=P.value.elements[0]):K.toArray(P.__data),n.bufferSubData(35345,ee,P.__data))}}n.bindBuffer(35345,null)}function S(O,D,L){const z=O.value;if(L[D]===void 0)return typeof z=="number"?L[D]=z:L[D]=z.clone(),!0;if(typeof z=="number"){if(L[D]!==z)return L[D]=z,!0}else{const H=L[D];if(H.equals(z)===!1)return H.copy(z),!0}return!1}function x(O){const D=O.uniforms;let L=0;const z=16;let H=0;for(let U=0,P=D.length;U<P;U++){const K=D[U],ee=w(K);if(K.__data=new Float32Array(ee.storage/Float32Array.BYTES_PER_ELEMENT),K.__offset=L,U>0){H=L%z;const re=z-H;H!==0&&re-ee.boundary<0&&(L+=z-H,K.__offset=L)}L+=ee.storage}return H=L%z,H>0&&(L+=z-H),O.__size=L,O.__cache={},this}function w(O){const D=O.value,L={boundary:0,storage:0};return typeof D=="number"?(L.boundary=4,L.storage=4):D.isVector2?(L.boundary=8,L.storage=8):D.isVector3||D.isColor?(L.boundary=16,L.storage=12):D.isVector4?(L.boundary=16,L.storage=16):D.isMatrix3?(L.boundary=48,L.storage=48):D.isMatrix4?(L.boundary=64,L.storage=64):D.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",D),L}function A(O){const D=O.target;D.removeEventListener("dispose",A);const L=l.indexOf(D.__bindingPointIndex);l.splice(L,1),n.deleteBuffer(s[D.id]),delete s[D.id],delete o[D.id]}function k(){for(const O in s)n.deleteBuffer(s[O]);l=[],s={},o={}}return{bind:h,update:d,dispose:k}}function ive(){const n=fx("canvas");return n.style.display="block",n}function AP(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:ive(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,l=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,u=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,h=n.powerPreference!==void 0?n.powerPreference:"default",d=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let m;t!==null?m=t.getContextAttributes().alpha:m=n.alpha!==void 0?n.alpha:!1;let _=null,v=null;const S=[],x=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=$m,this.physicallyCorrectLights=!1,this.toneMapping=fg,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const w=this;let A=!1,k=0,O=0,D=null,L=-1,z=null;const H=new Ii,U=new Ii;let P=null,K=e.width,ee=e.height,re=1,ie=null,de=null;const oe=new Ii(0,0,K,ee),ce=new Ii(0,0,K,ee);let me=!1;const Ae=new wR;let j=!1,Z=!1,ne=null;const ae=new Ar,_e=new Dt,Le=new be,we={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Xe(){return D===null?re:1}let Re=t;function qe(Ie,lt){for(let Et=0;Et<Ie.length;Et++){const gt=Ie[Et],Nt=e.getContext(gt,lt);if(Nt!==null)return Nt}return null}try{const Ie={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${yS}`),e.addEventListener("webglcontextlost",$e,!1),e.addEventListener("webglcontextrestored",We,!1),e.addEventListener("webglcontextcreationerror",Ft,!1),Re===null){const lt=["webgl2","webgl","experimental-webgl"];if(w.isWebGL1Renderer===!0&&lt.shift(),Re=qe(lt,Ie),Re===null)throw qe(lt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Re.getShaderPrecisionFormat===void 0&&(Re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ie){throw console.error("THREE.WebGLRenderer: "+Ie.message),Ie}let Je,ht,it,Oe,Ee,Fe,rt,nt,dt,It,mt,wt,$t,pt,Te,te,ke,ot,ft,xt,at,Ge,Ce,X;function Q(){Je=new y0e(Re),ht=new p0e(Re,Je,n),Je.init(ht),Ge=new U7(Re,Je,ht),it=new q_e(Re,Je,ht),Oe=new S0e,Ee=new U_e,Fe=new Z_e(Re,Je,it,Ee,ht,Ge,Oe),rt=new m0e(w),nt=new v0e(w),dt=new Lfe(Re,ht),Ce=new h0e(Re,Je,dt,ht),It=new b0e(Re,dt,Oe,Ce),mt=new w0e(Re,It,dt,Oe),ft=new x0e(Re,ht,Fe),te=new f0e(Ee),wt=new F_e(w,rt,nt,Je,ht,Ce,te),$t=new nve(w,Ee),pt=new H_e,Te=new Y_e(Je,ht),ot=new c0e(w,rt,it,mt,m,l),ke=new Q_e(w,mt,ht),X=new rve(Re,Oe,ht,it),xt=new d0e(Re,Je,Oe,ht),at=new T0e(Re,Je,Oe,ht),Oe.programs=wt.programs,w.capabilities=ht,w.extensions=Je,w.properties=Ee,w.renderLists=pt,w.shadowMap=ke,w.state=it,w.info=Oe}Q();const le=new tve(w,Re);this.xr=le,this.getContext=function(){return Re},this.getContextAttributes=function(){return Re.getContextAttributes()},this.forceContextLoss=function(){const Ie=Je.get("WEBGL_lose_context");Ie&&Ie.loseContext()},this.forceContextRestore=function(){const Ie=Je.get("WEBGL_lose_context");Ie&&Ie.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(Ie){Ie!==void 0&&(re=Ie,this.setSize(K,ee,!1))},this.getSize=function(Ie){return Ie.set(K,ee)},this.setSize=function(Ie,lt,Et){if(le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}K=Ie,ee=lt,e.width=Math.floor(Ie*re),e.height=Math.floor(lt*re),Et!==!1&&(e.style.width=Ie+"px",e.style.height=lt+"px"),this.setViewport(0,0,Ie,lt)},this.getDrawingBufferSize=function(Ie){return Ie.set(K*re,ee*re).floor()},this.setDrawingBufferSize=function(Ie,lt,Et){K=Ie,ee=lt,re=Et,e.width=Math.floor(Ie*Et),e.height=Math.floor(lt*Et),this.setViewport(0,0,Ie,lt)},this.getCurrentViewport=function(Ie){return Ie.copy(H)},this.getViewport=function(Ie){return Ie.copy(oe)},this.setViewport=function(Ie,lt,Et,gt){Ie.isVector4?oe.set(Ie.x,Ie.y,Ie.z,Ie.w):oe.set(Ie,lt,Et,gt),it.viewport(H.copy(oe).multiplyScalar(re).floor())},this.getScissor=function(Ie){return Ie.copy(ce)},this.setScissor=function(Ie,lt,Et,gt){Ie.isVector4?ce.set(Ie.x,Ie.y,Ie.z,Ie.w):ce.set(Ie,lt,Et,gt),it.scissor(U.copy(ce).multiplyScalar(re).floor())},this.getScissorTest=function(){return me},this.setScissorTest=function(Ie){it.setScissorTest(me=Ie)},this.setOpaqueSort=function(Ie){ie=Ie},this.setTransparentSort=function(Ie){de=Ie},this.getClearColor=function(Ie){return Ie.copy(ot.getClearColor())},this.setClearColor=function(){ot.setClearColor.apply(ot,arguments)},this.getClearAlpha=function(){return ot.getClearAlpha()},this.setClearAlpha=function(){ot.setClearAlpha.apply(ot,arguments)},this.clear=function(Ie=!0,lt=!0,Et=!0){let gt=0;Ie&&(gt|=16384),lt&&(gt|=256),Et&&(gt|=1024),Re.clear(gt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",$e,!1),e.removeEventListener("webglcontextrestored",We,!1),e.removeEventListener("webglcontextcreationerror",Ft,!1),pt.dispose(),Te.dispose(),Ee.dispose(),rt.dispose(),nt.dispose(),mt.dispose(),Ce.dispose(),X.dispose(),wt.dispose(),le.dispose(),le.removeEventListener("sessionstart",En),le.removeEventListener("sessionend",Pr),ne&&(ne.dispose(),ne=null),Er.stop()};function $e(Ie){Ie.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function We(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const Ie=Oe.autoReset,lt=ke.enabled,Et=ke.autoUpdate,gt=ke.needsUpdate,Nt=ke.type;Q(),Oe.autoReset=Ie,ke.enabled=lt,ke.autoUpdate=Et,ke.needsUpdate=gt,ke.type=Nt}function Ft(Ie){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ie.statusMessage)}function Be(Ie){const lt=Ie.target;lt.removeEventListener("dispose",Be),Ut(lt)}function Ut(Ie){ut(Ie),Ee.remove(Ie)}function ut(Ie){const lt=Ee.get(Ie).programs;lt!==void 0&&(lt.forEach(function(Et){wt.releaseProgram(Et)}),Ie.isShaderMaterial&&wt.releaseShaderCache(Ie))}this.renderBufferDirect=function(Ie,lt,Et,gt,Nt,yn){lt===null&&(lt=we);const Pn=Nt.isMesh&&Nt.matrixWorld.determinant()<0,ir=kt(Ie,lt,Et,gt,Nt);it.setMaterial(gt,Pn);let yr=Et.index;const ni=Et.attributes.position;if(yr===null){if(ni===void 0||ni.count===0)return}else if(yr.count===0)return;let $r=1;gt.wireframe===!0&&(yr=It.getWireframeAttribute(Et),$r=2),Ce.setup(Nt,gt,ir,Et,yr);let Ir,ji=xt;yr!==null&&(Ir=dt.get(yr),ji=at,ji.setIndex(Ir));const Yo=yr!==null?yr.count:ni.count,Oo=Et.drawRange.start*$r,cl=Et.drawRange.count*$r,Kt=yn!==null?yn.start*$r:0,dr=yn!==null?yn.count*$r:1/0,ga=Math.max(Oo,Kt),Ko=Math.min(Yo,Oo+cl,Kt+dr)-1,ms=Math.max(0,Ko-ga+1);if(ms!==0){if(Nt.isMesh)gt.wireframe===!0?(it.setLineWidth(gt.wireframeLinewidth*Xe()),ji.setMode(1)):ji.setMode(4);else if(Nt.isLine){let gs=gt.linewidth;gs===void 0&&(gs=1),it.setLineWidth(gs*Xe()),Nt.isLineSegments?ji.setMode(1):Nt.isLineLoop?ji.setMode(2):ji.setMode(3)}else Nt.isPoints?ji.setMode(0):Nt.isSprite&&ji.setMode(4);if(Nt.isInstancedMesh)ji.renderInstances(ga,ms,Nt.count);else if(Et.isInstancedBufferGeometry){const gs=Math.min(Et.instanceCount,Et._maxInstanceCount);ji.renderInstances(ga,ms,gs)}else ji.render(ga,ms)}},this.compile=function(Ie,lt){v=Te.get(Ie),v.init(),x.push(v),Ie.traverseVisible(function(Et){Et.isLight&&Et.layers.test(lt.layers)&&(v.pushLight(Et),Et.castShadow&&v.pushShadow(Et))}),v.setupLights(w.physicallyCorrectLights),Ie.traverse(function(Et){const gt=Et.material;if(gt)if(Array.isArray(gt))for(let Nt=0;Nt<gt.length;Nt++){const yn=gt[Nt];Ne(yn,Ie,Et)}else Ne(gt,Ie,Et)}),x.pop(),v=null};let Ht=null;function zt(Ie){Ht&&Ht(Ie)}function En(){Er.stop()}function Pr(){Er.start()}const Er=new L7;Er.setAnimationLoop(zt),typeof self<"u"&&Er.setContext(self),this.setAnimationLoop=function(Ie){Ht=Ie,le.setAnimationLoop(Ie),Ie===null?Er.stop():Er.start()},le.addEventListener("sessionstart",En),le.addEventListener("sessionend",Pr),this.render=function(Ie,lt){if(lt!==void 0&&lt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;Ie.autoUpdate===!0&&Ie.updateMatrixWorld(),lt.parent===null&&lt.updateMatrixWorld(),le.enabled===!0&&le.isPresenting===!0&&(le.cameraAutoUpdate===!0&&le.updateCamera(lt),lt=le.getCamera()),Ie.isScene===!0&&Ie.onBeforeRender(w,Ie,lt,D),v=Te.get(Ie,x.length),v.init(),x.push(v),ae.multiplyMatrices(lt.projectionMatrix,lt.matrixWorldInverse),Ae.setFromProjectionMatrix(ae),Z=this.localClippingEnabled,j=te.init(this.clippingPlanes,Z,lt),_=pt.get(Ie,S.length),_.init(),S.push(_),Kr(Ie,lt,0,w.sortObjects),_.finish(),w.sortObjects===!0&&_.sort(ie,de),j===!0&&te.beginShadows();const Et=v.state.shadowsArray;if(ke.render(Et,Ie,lt),j===!0&&te.endShadows(),this.info.autoReset===!0&&this.info.reset(),ot.render(_,Ie),v.setupLights(w.physicallyCorrectLights),lt.isArrayCamera){const gt=lt.cameras;for(let Nt=0,yn=gt.length;Nt<yn;Nt++){const Pn=gt[Nt];or(_,Ie,Pn,Pn.viewport)}}else or(_,Ie,lt);D!==null&&(Fe.updateMultisampleRenderTarget(D),Fe.updateRenderTargetMipmap(D)),Ie.isScene===!0&&Ie.onAfterRender(w,Ie,lt),Ce.resetDefaultState(),L=-1,z=null,x.pop(),x.length>0?v=x[x.length-1]:v=null,S.pop(),S.length>0?_=S[S.length-1]:_=null};function Kr(Ie,lt,Et,gt){if(Ie.visible===!1)return;if(Ie.layers.test(lt.layers)){if(Ie.isGroup)Et=Ie.renderOrder;else if(Ie.isLOD)Ie.autoUpdate===!0&&Ie.update(lt);else if(Ie.isLight)v.pushLight(Ie),Ie.castShadow&&v.pushShadow(Ie);else if(Ie.isSprite){if(!Ie.frustumCulled||Ae.intersectsSprite(Ie)){gt&&Le.setFromMatrixPosition(Ie.matrixWorld).applyMatrix4(ae);const yn=mt.update(Ie),Pn=Ie.material;Pn.visible&&_.push(Ie,yn,Pn,Et,Le.z,null)}}else if((Ie.isMesh||Ie.isLine||Ie.isPoints)&&(Ie.isSkinnedMesh&&Ie.skeleton.frame!==Oe.render.frame&&(Ie.skeleton.update(),Ie.skeleton.frame=Oe.render.frame),!Ie.frustumCulled||Ae.intersectsObject(Ie))){gt&&Le.setFromMatrixPosition(Ie.matrixWorld).applyMatrix4(ae);const yn=mt.update(Ie),Pn=Ie.material;if(Array.isArray(Pn)){const ir=yn.groups;for(let yr=0,ni=ir.length;yr<ni;yr++){const $r=ir[yr],Ir=Pn[$r.materialIndex];Ir&&Ir.visible&&_.push(Ie,yn,Ir,Et,Le.z,$r)}}else Pn.visible&&_.push(Ie,yn,Pn,Et,Le.z,null)}}const Nt=Ie.children;for(let yn=0,Pn=Nt.length;yn<Pn;yn++)Kr(Nt[yn],lt,Et,gt)}function or(Ie,lt,Et,gt){const Nt=Ie.opaque,yn=Ie.transmissive,Pn=Ie.transparent;v.setupLightsView(Et),yn.length>0&&Wn(Nt,lt,Et),gt&&it.viewport(H.copy(gt)),Nt.length>0&&q(Nt,lt,Et),yn.length>0&&q(yn,lt,Et),Pn.length>0&&q(Pn,lt,Et),it.buffers.depth.setTest(!0),it.buffers.depth.setMask(!0),it.buffers.color.setMask(!0),it.setPolygonOffset(!1)}function Wn(Ie,lt,Et){const gt=ht.isWebGL2;ne===null&&(ne=new cu(1,1,{generateMipmaps:!0,type:Je.has("EXT_color_buffer_half_float")?mb:Xh,minFilter:wb,samples:gt&&o===!0?4:0})),w.getDrawingBufferSize(_e),gt?ne.setSize(_e.x,_e.y):ne.setSize(qA(_e.x),qA(_e.y));const Nt=w.getRenderTarget();w.setRenderTarget(ne),w.clear();const yn=w.toneMapping;w.toneMapping=fg,q(Ie,lt,Et),w.toneMapping=yn,Fe.updateMultisampleRenderTarget(ne),Fe.updateRenderTargetMipmap(ne),w.setRenderTarget(Nt)}function q(Ie,lt,Et){const gt=lt.isScene===!0?lt.overrideMaterial:null;for(let Nt=0,yn=Ie.length;Nt<yn;Nt++){const Pn=Ie[Nt],ir=Pn.object,yr=Pn.geometry,ni=gt===null?Pn.material:gt,$r=Pn.group;ir.layers.test(Et.layers)&&ge(ir,lt,Et,yr,ni,$r)}}function ge(Ie,lt,Et,gt,Nt,yn){Ie.onBeforeRender(w,lt,Et,gt,Nt,yn),Ie.modelViewMatrix.multiplyMatrices(Et.matrixWorldInverse,Ie.matrixWorld),Ie.normalMatrix.getNormalMatrix(Ie.modelViewMatrix),Nt.onBeforeRender(w,lt,Et,gt,Ie,yn),Nt.transparent===!0&&Nt.side===tp?(Nt.side=Gc,Nt.needsUpdate=!0,w.renderBufferDirect(Et,lt,gt,Nt,Ie,yn),Nt.side=s0,Nt.needsUpdate=!0,w.renderBufferDirect(Et,lt,gt,Nt,Ie,yn),Nt.side=tp):w.renderBufferDirect(Et,lt,gt,Nt,Ie,yn),Ie.onAfterRender(w,lt,Et,gt,Nt,yn)}function Ne(Ie,lt,Et){lt.isScene!==!0&&(lt=we);const gt=Ee.get(Ie),Nt=v.state.lights,yn=v.state.shadowsArray,Pn=Nt.state.version,ir=wt.getParameters(Ie,Nt.state,yn,lt,Et),yr=wt.getProgramCacheKey(ir);let ni=gt.programs;gt.environment=Ie.isMeshStandardMaterial?lt.environment:null,gt.fog=lt.fog,gt.envMap=(Ie.isMeshStandardMaterial?nt:rt).get(Ie.envMap||gt.environment),ni===void 0&&(Ie.addEventListener("dispose",Be),ni=new Map,gt.programs=ni);let $r=ni.get(yr);if($r!==void 0){if(gt.currentProgram===$r&&gt.lightsStateVersion===Pn)return tt(Ie,ir),$r}else ir.uniforms=wt.getUniforms(Ie),Ie.onBuild(Et,ir,w),Ie.onBeforeCompile(ir,w),$r=wt.acquireProgram(ir,yr),ni.set(yr,$r),gt.uniforms=ir.uniforms;const Ir=gt.uniforms;(!Ie.isShaderMaterial&&!Ie.isRawShaderMaterial||Ie.clipping===!0)&&(Ir.clippingPlanes=te.uniform),tt(Ie,ir),gt.needsLights=_n(Ie),gt.lightsStateVersion=Pn,gt.needsLights&&(Ir.ambientLightColor.value=Nt.state.ambient,Ir.lightProbe.value=Nt.state.probe,Ir.directionalLights.value=Nt.state.directional,Ir.directionalLightShadows.value=Nt.state.directionalShadow,Ir.spotLights.value=Nt.state.spot,Ir.spotLightShadows.value=Nt.state.spotShadow,Ir.rectAreaLights.value=Nt.state.rectArea,Ir.ltc_1.value=Nt.state.rectAreaLTC1,Ir.ltc_2.value=Nt.state.rectAreaLTC2,Ir.pointLights.value=Nt.state.point,Ir.pointLightShadows.value=Nt.state.pointShadow,Ir.hemisphereLights.value=Nt.state.hemi,Ir.directionalShadowMap.value=Nt.state.directionalShadowMap,Ir.directionalShadowMatrix.value=Nt.state.directionalShadowMatrix,Ir.spotShadowMap.value=Nt.state.spotShadowMap,Ir.spotShadowMatrix.value=Nt.state.spotShadowMatrix,Ir.pointShadowMap.value=Nt.state.pointShadowMap,Ir.pointShadowMatrix.value=Nt.state.pointShadowMatrix);const ji=$r.getUniforms(),Yo=nA.seqWithValue(ji.seq,Ir);return gt.currentProgram=$r,gt.uniformsList=Yo,$r}function tt(Ie,lt){const Et=Ee.get(Ie);Et.outputEncoding=lt.outputEncoding,Et.instancing=lt.instancing,Et.skinning=lt.skinning,Et.morphTargets=lt.morphTargets,Et.morphNormals=lt.morphNormals,Et.morphColors=lt.morphColors,Et.morphTargetsCount=lt.morphTargetsCount,Et.numClippingPlanes=lt.numClippingPlanes,Et.numIntersection=lt.numClipIntersection,Et.vertexAlphas=lt.vertexAlphas,Et.vertexTangents=lt.vertexTangents,Et.toneMapping=lt.toneMapping}function kt(Ie,lt,Et,gt,Nt){lt.isScene!==!0&&(lt=we),Fe.resetTextureUnits();const yn=lt.fog,Pn=gt.isMeshStandardMaterial?lt.environment:null,ir=D===null?w.outputEncoding:D.isXRRenderTarget===!0?D.texture.encoding:$m,yr=(gt.isMeshStandardMaterial?nt:rt).get(gt.envMap||Pn),ni=gt.vertexColors===!0&&!!Et.attributes.color&&Et.attributes.color.itemSize===4,$r=!!gt.normalMap&&!!Et.attributes.tangent,Ir=!!Et.morphAttributes.position,ji=!!Et.morphAttributes.normal,Yo=!!Et.morphAttributes.color,Oo=gt.toneMapped?w.toneMapping:fg,cl=Et.morphAttributes.position||Et.morphAttributes.normal||Et.morphAttributes.color,Kt=cl!==void 0?cl.length:0,dr=Ee.get(gt),ga=v.state.lights;if(j===!0&&(Z===!0||Ie!==z)){const nr=Ie===z&&gt.id===L;te.setState(gt,Ie,nr)}let Ko=!1;gt.version===dr.__version?(dr.needsLights&&dr.lightsStateVersion!==ga.state.version||dr.outputEncoding!==ir||Nt.isInstancedMesh&&dr.instancing===!1||!Nt.isInstancedMesh&&dr.instancing===!0||Nt.isSkinnedMesh&&dr.skinning===!1||!Nt.isSkinnedMesh&&dr.skinning===!0||dr.envMap!==yr||gt.fog===!0&&dr.fog!==yn||dr.numClippingPlanes!==void 0&&(dr.numClippingPlanes!==te.numPlanes||dr.numIntersection!==te.numIntersection)||dr.vertexAlphas!==ni||dr.vertexTangents!==$r||dr.morphTargets!==Ir||dr.morphNormals!==ji||dr.morphColors!==Yo||dr.toneMapping!==Oo||ht.isWebGL2===!0&&dr.morphTargetsCount!==Kt)&&(Ko=!0):(Ko=!0,dr.__version=gt.version);let ms=dr.currentProgram;Ko===!0&&(ms=Ne(gt,lt,Nt));let gs=!1,di=!1,pr=!1;const fn=ms.getUniforms(),ur=dr.uniforms;if(it.useProgram(ms.program)&&(gs=!0,di=!0,pr=!0),gt.id!==L&&(L=gt.id,di=!0),gs||z!==Ie){if(fn.setValue(Re,"projectionMatrix",Ie.projectionMatrix),ht.logarithmicDepthBuffer&&fn.setValue(Re,"logDepthBufFC",2/(Math.log(Ie.far+1)/Math.LN2)),z!==Ie&&(z=Ie,di=!0,pr=!0),gt.isShaderMaterial||gt.isMeshPhongMaterial||gt.isMeshToonMaterial||gt.isMeshStandardMaterial||gt.envMap){const nr=fn.map.cameraPosition;nr!==void 0&&nr.setValue(Re,Le.setFromMatrixPosition(Ie.matrixWorld))}(gt.isMeshPhongMaterial||gt.isMeshToonMaterial||gt.isMeshLambertMaterial||gt.isMeshBasicMaterial||gt.isMeshStandardMaterial||gt.isShaderMaterial)&&fn.setValue(Re,"isOrthographic",Ie.isOrthographicCamera===!0),(gt.isMeshPhongMaterial||gt.isMeshToonMaterial||gt.isMeshLambertMaterial||gt.isMeshBasicMaterial||gt.isMeshStandardMaterial||gt.isShaderMaterial||gt.isShadowMaterial||Nt.isSkinnedMesh)&&fn.setValue(Re,"viewMatrix",Ie.matrixWorldInverse)}if(Nt.isSkinnedMesh){fn.setOptional(Re,Nt,"bindMatrix"),fn.setOptional(Re,Nt,"bindMatrixInverse");const nr=Nt.skeleton;nr&&(ht.floatVertexTextures?(nr.boneTexture===null&&nr.computeBoneTexture(),fn.setValue(Re,"boneTexture",nr.boneTexture,Fe),fn.setValue(Re,"boneTextureSize",nr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const wr=Et.morphAttributes;if((wr.position!==void 0||wr.normal!==void 0||wr.color!==void 0&&ht.isWebGL2===!0)&&ft.update(Nt,Et,gt,ms),(di||dr.receiveShadow!==Nt.receiveShadow)&&(dr.receiveShadow=Nt.receiveShadow,fn.setValue(Re,"receiveShadow",Nt.receiveShadow)),di&&(fn.setValue(Re,"toneMappingExposure",w.toneMappingExposure),dr.needsLights&&qt(ur,pr),yn&&gt.fog===!0&&$t.refreshFogUniforms(ur,yn),$t.refreshMaterialUniforms(ur,gt,re,ee,ne),nA.upload(Re,dr.uniformsList,ur,Fe)),gt.isShaderMaterial&&gt.uniformsNeedUpdate===!0&&(nA.upload(Re,dr.uniformsList,ur,Fe),gt.uniformsNeedUpdate=!1),gt.isSpriteMaterial&&fn.setValue(Re,"center",Nt.center),fn.setValue(Re,"modelViewMatrix",Nt.modelViewMatrix),fn.setValue(Re,"normalMatrix",Nt.normalMatrix),fn.setValue(Re,"modelMatrix",Nt.matrixWorld),gt.isShaderMaterial||gt.isRawShaderMaterial){const nr=gt.uniformsGroups;for(let pi=0,Zi=nr.length;pi<Zi;pi++)if(ht.isWebGL2){const Xr=nr[pi];X.update(Xr,ms),X.bind(Xr,ms)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ms}function qt(Ie,lt){Ie.ambientLightColor.needsUpdate=lt,Ie.lightProbe.needsUpdate=lt,Ie.directionalLights.needsUpdate=lt,Ie.directionalLightShadows.needsUpdate=lt,Ie.pointLights.needsUpdate=lt,Ie.pointLightShadows.needsUpdate=lt,Ie.spotLights.needsUpdate=lt,Ie.spotLightShadows.needsUpdate=lt,Ie.rectAreaLights.needsUpdate=lt,Ie.hemisphereLights.needsUpdate=lt}function _n(Ie){return Ie.isMeshLambertMaterial||Ie.isMeshToonMaterial||Ie.isMeshPhongMaterial||Ie.isMeshStandardMaterial||Ie.isShadowMaterial||Ie.isShaderMaterial&&Ie.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(Ie,lt,Et){Ee.get(Ie.texture).__webglTexture=lt,Ee.get(Ie.depthTexture).__webglTexture=Et;const gt=Ee.get(Ie);gt.__hasExternalTextures=!0,gt.__hasExternalTextures&&(gt.__autoAllocateDepthBuffer=Et===void 0,gt.__autoAllocateDepthBuffer||Je.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),gt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ie,lt){const Et=Ee.get(Ie);Et.__webglFramebuffer=lt,Et.__useDefaultFramebuffer=lt===void 0},this.setRenderTarget=function(Ie,lt=0,Et=0){D=Ie,k=lt,O=Et;let gt=!0;if(Ie){const ir=Ee.get(Ie);ir.__useDefaultFramebuffer!==void 0?(it.bindFramebuffer(36160,null),gt=!1):ir.__webglFramebuffer===void 0?Fe.setupRenderTarget(Ie):ir.__hasExternalTextures&&Fe.rebindTextures(Ie,Ee.get(Ie.texture).__webglTexture,Ee.get(Ie.depthTexture).__webglTexture)}let Nt=null,yn=!1,Pn=!1;if(Ie){const ir=Ie.texture;(ir.isData3DTexture||ir.isDataArrayTexture)&&(Pn=!0);const yr=Ee.get(Ie).__webglFramebuffer;Ie.isWebGLCubeRenderTarget?(Nt=yr[lt],yn=!0):ht.isWebGL2&&Ie.samples>0&&Fe.useMultisampledRTT(Ie)===!1?Nt=Ee.get(Ie).__webglMultisampledFramebuffer:Nt=yr,H.copy(Ie.viewport),U.copy(Ie.scissor),P=Ie.scissorTest}else H.copy(oe).multiplyScalar(re).floor(),U.copy(ce).multiplyScalar(re).floor(),P=me;if(it.bindFramebuffer(36160,Nt)&&ht.drawBuffers&&gt&&it.drawBuffers(Ie,Nt),it.viewport(H),it.scissor(U),it.setScissorTest(P),yn){const ir=Ee.get(Ie.texture);Re.framebufferTexture2D(36160,36064,34069+lt,ir.__webglTexture,Et)}else if(Pn){const ir=Ee.get(Ie.texture),yr=lt||0;Re.framebufferTextureLayer(36160,36064,ir.__webglTexture,Et||0,yr)}L=-1},this.readRenderTargetPixels=function(Ie,lt,Et,gt,Nt,yn,Pn){if(!(Ie&&Ie.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ir=Ee.get(Ie).__webglFramebuffer;if(Ie.isWebGLCubeRenderTarget&&Pn!==void 0&&(ir=ir[Pn]),ir){it.bindFramebuffer(36160,ir);try{const yr=Ie.texture,ni=yr.format,$r=yr.type;if(ni!==Pp&&Ge.convert(ni)!==Re.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ir=$r===mb&&(Je.has("EXT_color_buffer_half_float")||ht.isWebGL2&&Je.has("EXT_color_buffer_float"));if($r!==Xh&&Ge.convert($r)!==Re.getParameter(35738)&&!($r===Qg&&(ht.isWebGL2||Je.has("OES_texture_float")||Je.has("WEBGL_color_buffer_float")))&&!Ir){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}lt>=0&&lt<=Ie.width-gt&&Et>=0&&Et<=Ie.height-Nt&&Re.readPixels(lt,Et,gt,Nt,Ge.convert(ni),Ge.convert($r),yn)}finally{const yr=D!==null?Ee.get(D).__webglFramebuffer:null;it.bindFramebuffer(36160,yr)}}},this.copyFramebufferToTexture=function(Ie,lt,Et=0){const gt=Math.pow(2,-Et),Nt=Math.floor(lt.image.width*gt),yn=Math.floor(lt.image.height*gt);Fe.setTexture2D(lt,0),Re.copyTexSubImage2D(3553,Et,0,0,Ie.x,Ie.y,Nt,yn),it.unbindTexture()},this.copyTextureToTexture=function(Ie,lt,Et,gt=0){const Nt=lt.image.width,yn=lt.image.height,Pn=Ge.convert(Et.format),ir=Ge.convert(Et.type);Fe.setTexture2D(Et,0),Re.pixelStorei(37440,Et.flipY),Re.pixelStorei(37441,Et.premultiplyAlpha),Re.pixelStorei(3317,Et.unpackAlignment),lt.isDataTexture?Re.texSubImage2D(3553,gt,Ie.x,Ie.y,Nt,yn,Pn,ir,lt.image.data):lt.isCompressedTexture?Re.compressedTexSubImage2D(3553,gt,Ie.x,Ie.y,lt.mipmaps[0].width,lt.mipmaps[0].height,Pn,lt.mipmaps[0].data):Re.texSubImage2D(3553,gt,Ie.x,Ie.y,Pn,ir,lt.image),gt===0&&Et.generateMipmaps&&Re.generateMipmap(3553),it.unbindTexture()},this.copyTextureToTexture3D=function(Ie,lt,Et,gt,Nt=0){if(w.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const yn=Ie.max.x-Ie.min.x+1,Pn=Ie.max.y-Ie.min.y+1,ir=Ie.max.z-Ie.min.z+1,yr=Ge.convert(gt.format),ni=Ge.convert(gt.type);let $r;if(gt.isData3DTexture)Fe.setTexture3D(gt,0),$r=32879;else if(gt.isDataArrayTexture)Fe.setTexture2DArray(gt,0),$r=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Re.pixelStorei(37440,gt.flipY),Re.pixelStorei(37441,gt.premultiplyAlpha),Re.pixelStorei(3317,gt.unpackAlignment);const Ir=Re.getParameter(3314),ji=Re.getParameter(32878),Yo=Re.getParameter(3316),Oo=Re.getParameter(3315),cl=Re.getParameter(32877),Kt=Et.isCompressedTexture?Et.mipmaps[0]:Et.image;Re.pixelStorei(3314,Kt.width),Re.pixelStorei(32878,Kt.height),Re.pixelStorei(3316,Ie.min.x),Re.pixelStorei(3315,Ie.min.y),Re.pixelStorei(32877,Ie.min.z),Et.isDataTexture||Et.isData3DTexture?Re.texSubImage3D($r,Nt,lt.x,lt.y,lt.z,yn,Pn,ir,yr,ni,Kt.data):Et.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Re.compressedTexSubImage3D($r,Nt,lt.x,lt.y,lt.z,yn,Pn,ir,yr,Kt.data)):Re.texSubImage3D($r,Nt,lt.x,lt.y,lt.z,yn,Pn,ir,yr,ni,Kt),Re.pixelStorei(3314,Ir),Re.pixelStorei(32878,ji),Re.pixelStorei(3316,Yo),Re.pixelStorei(3315,Oo),Re.pixelStorei(32877,cl),Nt===0&&gt.generateMipmaps&&Re.generateMipmap($r),it.unbindTexture()},this.initTexture=function(Ie){Ie.isCubeTexture?Fe.setTextureCube(Ie,0):Ie.isData3DTexture?Fe.setTexture3D(Ie,0):Ie.isDataArrayTexture?Fe.setTexture2DArray(Ie,0):Fe.setTexture2D(Ie,0),it.unbindTexture()},this.resetState=function(){k=0,O=0,D=null,it.reset(),Ce.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class H7 extends AP{}H7.prototype.isWebGL1Renderer=!0;class AR{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new vn(e),this.density=t}clone(){return new AR(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class IR{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new vn(e),this.near=t,this.far=i}clone(){return new IR(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class mx extends as{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}class RR{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=dx,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Cf()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Cf()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Cf()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Jd=new be;class Sf{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Jd.fromBufferAttribute(this,t),Jd.applyMatrix4(e),this.setXYZ(t,Jd.x,Jd.y,Jd.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Jd.fromBufferAttribute(this,t),Jd.applyNormalMatrix(e),this.setXYZ(t,Jd.x,Jd.y,Jd.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Jd.fromBufferAttribute(this,t),Jd.transformDirection(e),this.setXYZ(t,Jd.x,Jd.y,Jd.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new Is(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Sf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class IP extends Wc{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new vn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let z1;const FE=new be,H1=new be,G1=new be,W1=new Dt,UE=new Dt,G7=new Ar,VC=new be,zE=new be,jC=new be,lH=new Dt,fO=new Dt,uH=new Dt;class W7 extends as{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",z1===void 0){z1=new Or;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new RR(t,5);z1.setIndex([0,1,2,0,2,3]),z1.setAttribute("position",new Sf(i,3,0,!1)),z1.setAttribute("uv",new Sf(i,2,3,!1))}this.geometry=z1,this.material=e!==void 0?e:new IP,this.center=new Dt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),H1.setFromMatrixScale(this.matrixWorld),G7.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),G1.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&H1.multiplyScalar(-G1.z);const i=this.material.rotation;let s,o;i!==0&&(o=Math.cos(i),s=Math.sin(i));const l=this.center;XC(VC.set(-.5,-.5,0),G1,l,H1,s,o),XC(zE.set(.5,-.5,0),G1,l,H1,s,o),XC(jC.set(.5,.5,0),G1,l,H1,s,o),lH.set(0,0),fO.set(1,0),uH.set(1,1);let u=e.ray.intersectTriangle(VC,zE,jC,!1,FE);if(u===null&&(XC(zE.set(-.5,.5,0),G1,l,H1,s,o),fO.set(0,1),u=e.ray.intersectTriangle(VC,jC,zE,!1,FE),u===null))return;const h=e.ray.origin.distanceTo(FE);h<e.near||h>e.far||t.push({distance:h,point:FE.clone(),uv:bf.getUV(FE,VC,zE,jC,lH,fO,uH,new Dt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function XC(n,e,t,i,s,o){W1.subVectors(n,t).addScalar(.5).multiply(i),s!==void 0?(UE.x=o*W1.x-s*W1.y,UE.y=s*W1.x+o*W1.y):UE.copy(W1),n.copy(e),n.x+=UE.x,n.y+=UE.y,n.applyMatrix4(G7)}const YC=new be,cH=new be;class V7 extends as{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,s=t.length;i<s;i++){const o=t[i];this.addLevel(o.object.clone(),o.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,s;for(i=1,s=t.length;i<s&&!(e<t[i].distance);i++);return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){YC.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(YC);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){YC.setFromMatrixPosition(e.matrixWorld),cH.setFromMatrixPosition(this.matrixWorld);const i=YC.distanceTo(cH)/e.zoom;t[0].object.visible=!0;let s,o;for(s=1,o=t.length;s<o&&i>=t[s].distance;s++)t[s-1].object.visible=!1,t[s].object.visible=!0;for(this._currentLevel=s-1;s<o;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let s=0,o=i.length;s<o;s++){const l=i[s];t.object.levels.push({object:l.object.uuid,distance:l.distance})}return t}}const hH=new be,dH=new Ii,pH=new Ii,sve=new be,fH=new Ar;class j7 extends Sn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ar,this.bindMatrixInverse=new Ar}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ii,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,s=this.geometry;dH.fromBufferAttribute(s.attributes.skinIndex,e),pH.fromBufferAttribute(s.attributes.skinWeight,e),hH.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=pH.getComponent(o);if(l!==0){const u=dH.getComponent(o);fH.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(sve.copy(hH).applyMatrix4(fH),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class RP extends as{constructor(){super(),this.isBone=!0,this.type="Bone"}}class CT extends Fl{constructor(e=null,t=1,i=1,s,o,l,u,h,d=fa,m=fa,_,v){super(null,l,u,h,d,m,s,o,_,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const mH=new Ar,ove=new Ar;class kR{constructor(e=[],t=[]){this.uuid=Cf(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Ar)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Ar;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:ove;mH.multiplyMatrices(u,t[o]),mH.toArray(i,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new kR(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=M7(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new CT(t,e,e,Pp,Qg);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const o=e.bones[i];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new RP),this.bones.push(l),this.boneInverses.push(new Ar().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=i[s];e.boneInverses.push(u.toArray())}return e}}class gb extends Is{constructor(e,t,i,s=1){typeof i=="number"&&(s=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const gH=new Ar,_H=new Ar,KC=[],HE=new Sn;class X7 extends Sn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new gb(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,s=this.count;if(HE.geometry=this.geometry,HE.material=this.material,HE.material!==void 0)for(let o=0;o<s;o++){this.getMatrixAt(o,gH),_H.multiplyMatrices(i,gH),HE.matrixWorld=_H,HE.raycast(e,KC);for(let l=0,u=KC.length;l<u;l++){const h=KC[l];h.instanceId=o,h.object=this,t.push(h)}KC.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new gb(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Rd extends Wc{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new vn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const vH=new be,yH=new be,bH=new Ar,mO=new Wx,JC=new c0;class wd extends as{constructor(e=new Or,t=new Rd){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,o=t.count;s<o;s++)vH.fromBufferAttribute(t,s-1),yH.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=vH.distanceTo(yH);e.setAttribute("lineDistance",new Fn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),JC.copy(i.boundingSphere),JC.applyMatrix4(s),JC.radius+=o,e.ray.intersectsSphere(JC)===!1)return;bH.copy(s).invert(),mO.copy(e.ray).applyMatrix4(bH);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,d=new be,m=new be,_=new be,v=new be,S=this.isLineSegments?2:1,x=i.index,w=i.attributes.position;if(x!==null){const A=Math.max(0,l.start),k=Math.min(x.count,l.start+l.count);for(let O=A,D=k-1;O<D;O+=S){const L=x.getX(O),z=x.getX(O+1);if(d.fromBufferAttribute(w,L),m.fromBufferAttribute(w,z),mO.distanceSqToSegment(d,m,v,_)>h)continue;v.applyMatrix4(this.matrixWorld);const H=e.ray.origin.distanceTo(v);H<e.near||H>e.far||t.push({distance:H,point:_.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:null,object:this})}}else{const A=Math.max(0,l.start),k=Math.min(w.count,l.start+l.count);for(let O=A,D=k-1;O<D;O+=S){if(d.fromBufferAttribute(w,O),m.fromBufferAttribute(w,O+1),mO.distanceSqToSegment(d,m,v,_)>h)continue;v.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(v);L<e.near||L>e.far||t.push({distance:L,point:_.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const TH=new be,SH=new be;class h0 extends wd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,o=t.count;s<o;s+=2)TH.fromBufferAttribute(t,s),SH.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+TH.distanceTo(SH);e.setAttribute("lineDistance",new Fn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Y7 extends wd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class OR extends Wc{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new vn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const EH=new Ar,JD=new Wx,QC=new c0,qC=new be;class K7 extends as{constructor(e=new Or,t=new OR){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),QC.copy(i.boundingSphere),QC.applyMatrix4(s),QC.radius+=o,e.ray.intersectsSphere(QC)===!1)return;EH.copy(s).invert(),JD.copy(e.ray).applyMatrix4(EH);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,d=i.index,m=i.attributes.position;if(d!==null){const _=Math.max(0,l.start),v=Math.min(d.count,l.start+l.count);for(let S=_,x=v;S<x;S++){const w=d.getX(S);qC.fromBufferAttribute(m,w),$H(qC,w,h,s,e,t,this)}}else{const _=Math.max(0,l.start),v=Math.min(m.count,l.start+l.count);for(let S=_,x=v;S<x;S++)qC.fromBufferAttribute(m,S),$H(qC,S,h,s,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function $H(n,e,t,i,s,o,l){const u=JD.distanceSqToPoint(n);if(u<t){const h=new be;JD.closestPointToPoint(n,h),h.applyMatrix4(i);const d=s.ray.origin.distanceTo(h);if(d<s.near||d>s.far)return;o.push({distance:d,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,object:l})}}class ave extends Fl{constructor(e,t,i,s,o,l,u,h,d){super(e,t,i,s,o,l,u,h,d),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:Xo,this.magFilter=o!==void 0?o:Xo,this.generateMipmaps=!1;const m=this;function _(){m.needsUpdate=!0,e.requestVideoFrameCallback(_)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(_)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class lve extends Fl{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=fa,this.minFilter=fa,this.generateMipmaps=!1,this.needsUpdate=!0}}class J7 extends Fl{constructor(e,t,i,s,o,l,u,h,d,m,_,v){super(null,l,u,h,d,m,s,o,_,v),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class uve extends Fl{constructor(e,t,i,s,o,l,u,h,d){super(e,t,i,s,o,l,u,h,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class bg{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),o=0;t.push(0);for(let l=1;l<=e;l++)i=this.getPoint(l/e),o+=i.distanceTo(s),t.push(o),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let s=0;const o=i.length;let l;t?l=t:l=e*i[o-1];let u=0,h=o-1,d;for(;u<=h;)if(s=Math.floor(u+(h-u)/2),d=i[s]-l,d<0)u=s+1;else if(d>0)h=s-1;else{h=s;break}if(s=h,i[s]===l)return s/(o-1);const m=i[s],_=i[s+1]-m,v=(l-m)/_;return(s+v)/(o-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),l=this.getPoint(s),u=t||(o.isVector2?new Dt:new be);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new be,s=[],o=[],l=[],u=new be,h=new Ar;for(let S=0;S<=e;S++){const x=S/e;s[S]=this.getTangentAt(x,new be)}o[0]=new be,l[0]=new be;let d=Number.MAX_VALUE;const m=Math.abs(s[0].x),_=Math.abs(s[0].y),v=Math.abs(s[0].z);m<=d&&(d=m,i.set(1,0,0)),_<=d&&(d=_,i.set(0,1,0)),v<=d&&i.set(0,0,1),u.crossVectors(s[0],i).normalize(),o[0].crossVectors(s[0],u),l[0].crossVectors(s[0],o[0]);for(let S=1;S<=e;S++){if(o[S]=o[S-1].clone(),l[S]=l[S-1].clone(),u.crossVectors(s[S-1],s[S]),u.length()>Number.EPSILON){u.normalize();const x=Math.acos(Gu(s[S-1].dot(s[S]),-1,1));o[S].applyMatrix4(h.makeRotationAxis(u,x))}l[S].crossVectors(s[S],o[S])}if(t===!0){let S=Math.acos(Gu(o[0].dot(o[e]),-1,1));S/=e,s[0].dot(u.crossVectors(o[0],o[e]))>0&&(S=-S);for(let x=1;x<=e;x++)o[x].applyMatrix4(h.makeRotationAxis(s[x],S*x)),l[x].crossVectors(s[x],o[x])}return{tangents:s,normals:o,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class LR extends bg{constructor(e=0,t=0,i=1,s=1,o=0,l=Math.PI*2,u=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=l,this.aClockwise=u,this.aRotation=h}getPoint(e,t){const i=t||new Dt,s=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const l=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=s;for(;o>s;)o-=s;o<Number.EPSILON&&(l?o=0:o=s),this.aClockwise===!0&&!l&&(o===s?o=-s:o=o-s);const u=this.aStartAngle+e*o;let h=this.aX+this.xRadius*Math.cos(u),d=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const m=Math.cos(this.aRotation),_=Math.sin(this.aRotation),v=h-this.aX,S=d-this.aY;h=v*m-S*_+this.aX,d=v*_+S*m+this.aY}return i.set(h,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Q7 extends LR{constructor(e,t,i,s,o,l){super(e,t,i,i,s,o,l),this.isArcCurve=!0,this.type="ArcCurve"}}function kP(){let n=0,e=0,t=0,i=0;function s(o,l,u,h){n=o,e=u,t=-3*o+3*l-2*u-h,i=2*o-2*l+u+h}return{initCatmullRom:function(o,l,u,h,d){s(l,u,d*(u-o),d*(h-l))},initNonuniformCatmullRom:function(o,l,u,h,d,m,_){let v=(l-o)/d-(u-o)/(d+m)+(u-l)/m,S=(u-l)/m-(h-l)/(m+_)+(h-u)/_;v*=m,S*=m,s(l,u,v,S)},calc:function(o){const l=o*o,u=l*o;return n+e*o+t*l+i*u}}}const ZC=new be,gO=new kP,_O=new kP,vO=new kP;class q7 extends bg{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new be){const i=t,s=this.points,o=s.length,l=(o-(this.closed?0:1))*e;let u=Math.floor(l),h=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:h===0&&u===o-1&&(u=o-2,h=1);let d,m;this.closed||u>0?d=s[(u-1)%o]:(ZC.subVectors(s[0],s[1]).add(s[0]),d=ZC);const _=s[u%o],v=s[(u+1)%o];if(this.closed||u+2<o?m=s[(u+2)%o]:(ZC.subVectors(s[o-1],s[o-2]).add(s[o-1]),m=ZC),this.curveType==="centripetal"||this.curveType==="chordal"){const S=this.curveType==="chordal"?.5:.25;let x=Math.pow(d.distanceToSquared(_),S),w=Math.pow(_.distanceToSquared(v),S),A=Math.pow(v.distanceToSquared(m),S);w<1e-4&&(w=1),x<1e-4&&(x=w),A<1e-4&&(A=w),gO.initNonuniformCatmullRom(d.x,_.x,v.x,m.x,x,w,A),_O.initNonuniformCatmullRom(d.y,_.y,v.y,m.y,x,w,A),vO.initNonuniformCatmullRom(d.z,_.z,v.z,m.z,x,w,A)}else this.curveType==="catmullrom"&&(gO.initCatmullRom(d.x,_.x,v.x,m.x,this.tension),_O.initCatmullRom(d.y,_.y,v.y,m.y,this.tension),vO.initCatmullRom(d.z,_.z,v.z,m.z,this.tension));return i.set(gO.calc(h),_O.calc(h),vO.calc(h)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new be().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function xH(n,e,t,i,s){const o=(i-e)*.5,l=(s-t)*.5,u=n*n,h=n*u;return(2*t-2*i+o+l)*h+(-3*t+3*i-2*o-l)*u+o*n+t}function cve(n,e){const t=1-n;return t*t*e}function hve(n,e){return 2*(1-n)*n*e}function dve(n,e){return n*n*e}function C$(n,e,t,i){return cve(n,e)+hve(n,t)+dve(n,i)}function pve(n,e){const t=1-n;return t*t*t*e}function fve(n,e){const t=1-n;return 3*t*t*n*e}function mve(n,e){return 3*(1-n)*n*n*e}function gve(n,e){return n*n*n*e}function M$(n,e,t,i,s){return pve(n,e)+fve(n,t)+mve(n,i)+gve(n,s)}class OP extends bg{constructor(e=new Dt,t=new Dt,i=new Dt,s=new Dt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Dt){const i=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return i.set(M$(e,s.x,o.x,l.x,u.x),M$(e,s.y,o.y,l.y,u.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Z7 extends bg{constructor(e=new be,t=new be,i=new be,s=new be){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new be){const i=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return i.set(M$(e,s.x,o.x,l.x,u.x),M$(e,s.y,o.y,l.y,u.y),M$(e,s.z,o.z,l.z,u.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class DR extends bg{constructor(e=new Dt,t=new Dt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Dt){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Dt;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ej extends bg{constructor(e=new be,t=new be){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new be){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LP extends bg{constructor(e=new Dt,t=new Dt,i=new Dt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Dt){const i=t,s=this.v0,o=this.v1,l=this.v2;return i.set(C$(e,s.x,o.x,l.x),C$(e,s.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class DP extends bg{constructor(e=new be,t=new be,i=new be){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new be){const i=t,s=this.v0,o=this.v1,l=this.v2;return i.set(C$(e,s.x,o.x,l.x),C$(e,s.y,o.y,l.y),C$(e,s.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class NP extends bg{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Dt){const i=t,s=this.points,o=(s.length-1)*e,l=Math.floor(o),u=o-l,h=s[l===0?l:l-1],d=s[l],m=s[l>s.length-2?s.length-1:l+1],_=s[l>s.length-3?s.length-1:l+2];return i.set(xH(u,h.x,d.x,m.x,_.x),xH(u,h.y,d.y,m.y,_.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new Dt().fromArray(s))}return this}}var BP=Object.freeze({__proto__:null,ArcCurve:Q7,CatmullRomCurve3:q7,CubicBezierCurve:OP,CubicBezierCurve3:Z7,EllipseCurve:LR,LineCurve:DR,LineCurve3:ej,QuadraticBezierCurve:LP,QuadraticBezierCurve3:DP,SplineCurve:NP});class tj extends bg{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new DR(t,e))}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=i){const l=s[o]-i,u=this.curves[o],h=u.getLength(),d=h===0?0:1-l/h;return u.getPointAt(d,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,o=this.curves;s<o.length;s++){const l=o[s],u=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,h=l.getPoints(u);for(let d=0;d<h.length;d++){const m=h[d];i&&i.equals(m)||(t.push(m),i=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(new BP[s.type]().fromJSON(s))}return this}}class gx extends tj{constructor(e){super(),this.type="Path",this.currentPoint=new Dt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new DR(this.currentPoint.clone(),new Dt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const o=new LP(this.currentPoint.clone(),new Dt(e,t),new Dt(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,o,l){const u=new OP(this.currentPoint.clone(),new Dt(e,t),new Dt(i,s),new Dt(o,l));return this.curves.push(u),this.currentPoint.set(o,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new NP(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,o,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+u,t+h,i,s,o,l),this}absarc(e,t,i,s,o,l){return this.absellipse(e,t,i,i,s,o,l),this}ellipse(e,t,i,s,o,l,u,h){const d=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+d,t+m,i,s,o,l,u,h),this}absellipse(e,t,i,s,o,l,u,h){const d=new LR(e,t,i,s,o,l,u,h);if(this.curves.length>0){const _=d.getPoint(0);_.equals(this.currentPoint)||this.lineTo(_.x,_.y)}this.curves.push(d);const m=d.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class _b extends Or{constructor(e=[new Dt(0,-.5),new Dt(.5,0),new Dt(0,.5)],t=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:s},t=Math.floor(t),s=Gu(s,0,Math.PI*2);const o=[],l=[],u=[],h=[],d=[],m=1/t,_=new be,v=new Dt,S=new be,x=new be,w=new be;let A=0,k=0;for(let O=0;O<=e.length-1;O++)switch(O){case 0:A=e[O+1].x-e[O].x,k=e[O+1].y-e[O].y,S.x=k*1,S.y=-A,S.z=k*0,w.copy(S),S.normalize(),h.push(S.x,S.y,S.z);break;case e.length-1:h.push(w.x,w.y,w.z);break;default:A=e[O+1].x-e[O].x,k=e[O+1].y-e[O].y,S.x=k*1,S.y=-A,S.z=k*0,x.copy(S),S.x+=w.x,S.y+=w.y,S.z+=w.z,S.normalize(),h.push(S.x,S.y,S.z),w.copy(x)}for(let O=0;O<=t;O++){const D=i+O*m*s,L=Math.sin(D),z=Math.cos(D);for(let H=0;H<=e.length-1;H++){_.x=e[H].x*L,_.y=e[H].y,_.z=e[H].x*z,l.push(_.x,_.y,_.z),v.x=O/t,v.y=H/(e.length-1),u.push(v.x,v.y);const U=h[3*H+0]*L,P=h[3*H+1],K=h[3*H+0]*z;d.push(U,P,K)}}for(let O=0;O<t;O++)for(let D=0;D<e.length-1;D++){const L=D+O*e.length,z=L,H=L+e.length,U=L+e.length+1,P=L+1;o.push(z,H,P),o.push(U,P,H)}this.setIndex(o),this.setAttribute("position",new Fn(l,3)),this.setAttribute("uv",new Fn(u,2)),this.setAttribute("normal",new Fn(d,3))}static fromJSON(e){return new _b(e.points,e.segments,e.phiStart,e.phiLength)}}class XT extends _b{constructor(e=1,t=1,i=4,s=8){const o=new gx;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:s}}static fromJSON(e){return new XT(e.radius,e.length,e.capSegments,e.radialSegments)}}class YT extends Or{constructor(e=1,t=8,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:s},t=Math.max(3,t);const o=[],l=[],u=[],h=[],d=new be,m=new Dt;l.push(0,0,0),u.push(0,0,1),h.push(.5,.5);for(let _=0,v=3;_<=t;_++,v+=3){const S=i+_/t*s;d.x=e*Math.cos(S),d.y=e*Math.sin(S),l.push(d.x,d.y,d.z),u.push(0,0,1),m.x=(l[v]/e+1)/2,m.y=(l[v+1]/e+1)/2,h.push(m.x,m.y)}for(let _=1;_<=t;_++)o.push(_,_+1,0);this.setIndex(o),this.setAttribute("position",new Fn(l,3)),this.setAttribute("normal",new Fn(u,3)),this.setAttribute("uv",new Fn(h,2))}static fromJSON(e){return new YT(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class pa extends Or{constructor(e=1,t=1,i=1,s=8,o=1,l=!1,u=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:s,heightSegments:o,openEnded:l,thetaStart:u,thetaLength:h};const d=this;s=Math.floor(s),o=Math.floor(o);const m=[],_=[],v=[],S=[];let x=0;const w=[],A=i/2;let k=0;O(),l===!1&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(m),this.setAttribute("position",new Fn(_,3)),this.setAttribute("normal",new Fn(v,3)),this.setAttribute("uv",new Fn(S,2));function O(){const L=new be,z=new be;let H=0;const U=(t-e)/i;for(let P=0;P<=o;P++){const K=[],ee=P/o,re=ee*(t-e)+e;for(let ie=0;ie<=s;ie++){const de=ie/s,oe=de*h+u,ce=Math.sin(oe),me=Math.cos(oe);z.x=re*ce,z.y=-ee*i+A,z.z=re*me,_.push(z.x,z.y,z.z),L.set(ce,U,me).normalize(),v.push(L.x,L.y,L.z),S.push(de,1-ee),K.push(x++)}w.push(K)}for(let P=0;P<s;P++)for(let K=0;K<o;K++){const ee=w[K][P],re=w[K+1][P],ie=w[K+1][P+1],de=w[K][P+1];m.push(ee,re,de),m.push(re,ie,de),H+=6}d.addGroup(k,H,0),k+=H}function D(L){const z=x,H=new Dt,U=new be;let P=0;const K=L===!0?e:t,ee=L===!0?1:-1;for(let ie=1;ie<=s;ie++)_.push(0,A*ee,0),v.push(0,ee,0),S.push(.5,.5),x++;const re=x;for(let ie=0;ie<=s;ie++){const de=ie/s*h+u,oe=Math.cos(de),ce=Math.sin(de);U.x=K*ce,U.y=A*ee,U.z=K*oe,_.push(U.x,U.y,U.z),v.push(0,ee,0),H.x=oe*.5+.5,H.y=ce*.5*ee+.5,S.push(H.x,H.y),x++}for(let ie=0;ie<s;ie++){const de=z+ie,oe=re+ie;L===!0?m.push(oe,oe+1,de):m.push(oe+1,oe,de),P+=3}d.addGroup(k,P,L===!0?1:2),k+=P}}static fromJSON(e){return new pa(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class KT extends pa{constructor(e=1,t=1,i=8,s=1,o=!1,l=0,u=Math.PI*2){super(0,e,t,i,s,o,l,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:u}}static fromJSON(e){return new KT(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class o0 extends Or{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const o=[],l=[];u(s),d(i),m(),this.setAttribute("position",new Fn(o,3)),this.setAttribute("normal",new Fn(o.slice(),3)),this.setAttribute("uv",new Fn(l,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function u(O){const D=new be,L=new be,z=new be;for(let H=0;H<t.length;H+=3)S(t[H+0],D),S(t[H+1],L),S(t[H+2],z),h(D,L,z,O)}function h(O,D,L,z){const H=z+1,U=[];for(let P=0;P<=H;P++){U[P]=[];const K=O.clone().lerp(L,P/H),ee=D.clone().lerp(L,P/H),re=H-P;for(let ie=0;ie<=re;ie++)ie===0&&P===H?U[P][ie]=K:U[P][ie]=K.clone().lerp(ee,ie/re)}for(let P=0;P<H;P++)for(let K=0;K<2*(H-P)-1;K++){const ee=Math.floor(K/2);K%2===0?(v(U[P][ee+1]),v(U[P+1][ee]),v(U[P][ee])):(v(U[P][ee+1]),v(U[P+1][ee+1]),v(U[P+1][ee]))}}function d(O){const D=new be;for(let L=0;L<o.length;L+=3)D.x=o[L+0],D.y=o[L+1],D.z=o[L+2],D.normalize().multiplyScalar(O),o[L+0]=D.x,o[L+1]=D.y,o[L+2]=D.z}function m(){const O=new be;for(let D=0;D<o.length;D+=3){O.x=o[D+0],O.y=o[D+1],O.z=o[D+2];const L=A(O)/2/Math.PI+.5,z=k(O)/Math.PI+.5;l.push(L,1-z)}x(),_()}function _(){for(let O=0;O<l.length;O+=6){const D=l[O+0],L=l[O+2],z=l[O+4],H=Math.max(D,L,z),U=Math.min(D,L,z);H>.9&&U<.1&&(D<.2&&(l[O+0]+=1),L<.2&&(l[O+2]+=1),z<.2&&(l[O+4]+=1))}}function v(O){o.push(O.x,O.y,O.z)}function S(O,D){const L=O*3;D.x=e[L+0],D.y=e[L+1],D.z=e[L+2]}function x(){const O=new be,D=new be,L=new be,z=new be,H=new Dt,U=new Dt,P=new Dt;for(let K=0,ee=0;K<o.length;K+=9,ee+=6){O.set(o[K+0],o[K+1],o[K+2]),D.set(o[K+3],o[K+4],o[K+5]),L.set(o[K+6],o[K+7],o[K+8]),H.set(l[ee+0],l[ee+1]),U.set(l[ee+2],l[ee+3]),P.set(l[ee+4],l[ee+5]),z.copy(O).add(D).add(L).divideScalar(3);const re=A(z);w(H,ee+0,O,re),w(U,ee+2,D,re),w(P,ee+4,L,re)}}function w(O,D,L,z){z<0&&O.x===1&&(l[D]=O.x-1),L.x===0&&L.z===0&&(l[D]=z/2/Math.PI+.5)}function A(O){return Math.atan2(O.z,-O.x)}function k(O){return Math.atan2(-O.y,Math.sqrt(O.x*O.x+O.z*O.z))}}static fromJSON(e){return new o0(e.vertices,e.indices,e.radius,e.details)}}class JT extends o0{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new JT(e.radius,e.detail)}}const eM=new be,tM=new be,yO=new be,nM=new bf;class nj extends Or{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(eb*t),o=e.getIndex(),l=e.getAttribute("position"),u=o?o.count:l.count,h=[0,0,0],d=["a","b","c"],m=new Array(3),_={},v=[];for(let S=0;S<u;S+=3){o?(h[0]=o.getX(S),h[1]=o.getX(S+1),h[2]=o.getX(S+2)):(h[0]=S,h[1]=S+1,h[2]=S+2);const{a:x,b:w,c:A}=nM;if(x.fromBufferAttribute(l,h[0]),w.fromBufferAttribute(l,h[1]),A.fromBufferAttribute(l,h[2]),nM.getNormal(yO),m[0]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,m[1]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,m[2]=`${Math.round(A.x*i)},${Math.round(A.y*i)},${Math.round(A.z*i)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let k=0;k<3;k++){const O=(k+1)%3,D=m[k],L=m[O],z=nM[d[k]],H=nM[d[O]],U=`${D}_${L}`,P=`${L}_${D}`;P in _&&_[P]?(yO.dot(_[P].normal)<=s&&(v.push(z.x,z.y,z.z),v.push(H.x,H.y,H.z)),_[P]=null):U in _||(_[U]={index0:h[k],index1:h[O],normal:yO.clone()})}}for(const S in _)if(_[S]){const{index0:x,index1:w}=_[S];eM.fromBufferAttribute(l,x),tM.fromBufferAttribute(l,w),v.push(eM.x,eM.y,eM.z),v.push(tM.x,tM.y,tM.z)}this.setAttribute("position",new Fn(v,3))}}}class rb extends gx{constructor(e){super(e),this.uuid=Cf(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(new gx().fromJSON(s))}return this}}const _ve={triangulate:function(n,e,t=2){const i=e&&e.length,s=i?e[0]*t:n.length;let o=rj(n,0,s,t,!0);const l=[];if(!o||o.next===o.prev)return l;let u,h,d,m,_,v,S;if(i&&(o=Sve(n,e,o,t)),n.length>80*t){u=d=n[0],h=m=n[1];for(let x=t;x<s;x+=t)_=n[x],v=n[x+1],_<u&&(u=_),v<h&&(h=v),_>d&&(d=_),v>m&&(m=v);S=Math.max(d-u,m-h),S=S!==0?1/S:0}return _x(o,l,t,u,h,S),l}};function rj(n,e,t,i,s){let o,l;if(s===Ove(n,e,t,i)>0)for(o=e;o<t;o+=i)l=wH(o,n[o],n[o+1],l);else for(o=t-i;o>=e;o-=i)l=wH(o,n[o],n[o+1],l);return l&&NR(l,l.next)&&(yx(l),l=l.next),l}function Cv(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(NR(t,t.next)||Dl(t.prev,t,t.next)===0)){if(yx(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function _x(n,e,t,i,s,o,l){if(!n)return;!l&&o&&Cve(n,i,s,o);let u=n,h,d;for(;n.prev!==n.next;){if(h=n.prev,d=n.next,o?yve(n,i,s,o):vve(n)){e.push(h.i/t),e.push(n.i/t),e.push(d.i/t),yx(n),n=d.next,u=d.next;continue}if(n=d,n===u){l?l===1?(n=bve(Cv(n),e,t),_x(n,e,t,i,s,o,2)):l===2&&Tve(n,e,t,i,s,o):_x(Cv(n),e,t,i,s,o,1);break}}}function vve(n){const e=n.prev,t=n,i=n.next;if(Dl(e,t,i)>=0)return!1;let s=n.next.next;for(;s!==n.prev;){if(pT(e.x,e.y,t.x,t.y,i.x,i.y,s.x,s.y)&&Dl(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function yve(n,e,t,i){const s=n.prev,o=n,l=n.next;if(Dl(s,o,l)>=0)return!1;const u=s.x<o.x?s.x<l.x?s.x:l.x:o.x<l.x?o.x:l.x,h=s.y<o.y?s.y<l.y?s.y:l.y:o.y<l.y?o.y:l.y,d=s.x>o.x?s.x>l.x?s.x:l.x:o.x>l.x?o.x:l.x,m=s.y>o.y?s.y>l.y?s.y:l.y:o.y>l.y?o.y:l.y,_=QD(u,h,e,t,i),v=QD(d,m,e,t,i);let S=n.prevZ,x=n.nextZ;for(;S&&S.z>=_&&x&&x.z<=v;){if(S!==n.prev&&S!==n.next&&pT(s.x,s.y,o.x,o.y,l.x,l.y,S.x,S.y)&&Dl(S.prev,S,S.next)>=0||(S=S.prevZ,x!==n.prev&&x!==n.next&&pT(s.x,s.y,o.x,o.y,l.x,l.y,x.x,x.y)&&Dl(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;S&&S.z>=_;){if(S!==n.prev&&S!==n.next&&pT(s.x,s.y,o.x,o.y,l.x,l.y,S.x,S.y)&&Dl(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;x&&x.z<=v;){if(x!==n.prev&&x!==n.next&&pT(s.x,s.y,o.x,o.y,l.x,l.y,x.x,x.y)&&Dl(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function bve(n,e,t){let i=n;do{const s=i.prev,o=i.next.next;!NR(s,o)&&ij(s,i,i.next,o)&&vx(s,o)&&vx(o,s)&&(e.push(s.i/t),e.push(i.i/t),e.push(o.i/t),yx(i),yx(i.next),i=n=o),i=i.next}while(i!==n);return Cv(i)}function Tve(n,e,t,i,s,o){let l=n;do{let u=l.next.next;for(;u!==l.prev;){if(l.i!==u.i&&Ive(l,u)){let h=sj(l,u);l=Cv(l,l.next),h=Cv(h,h.next),_x(l,e,t,i,s,o),_x(h,e,t,i,s,o);return}u=u.next}l=l.next}while(l!==n)}function Sve(n,e,t,i){const s=[];let o,l,u,h,d;for(o=0,l=e.length;o<l;o++)u=e[o]*i,h=o<l-1?e[o+1]*i:n.length,d=rj(n,u,h,i,!1),d===d.next&&(d.steiner=!0),s.push(Ave(d));for(s.sort(Eve),o=0;o<s.length;o++)$ve(s[o],t),t=Cv(t,t.next);return t}function Eve(n,e){return n.x-e.x}function $ve(n,e){if(e=xve(n,e),e){const t=sj(e,n);Cv(e,e.next),Cv(t,t.next)}}function xve(n,e){let t=e;const i=n.x,s=n.y;let o=-1/0,l;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const v=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=i&&v>o){if(o=v,v===i){if(s===t.y)return t;if(s===t.next.y)return t.next}l=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!l)return null;if(i===o)return l;const u=l,h=l.x,d=l.y;let m=1/0,_;t=l;do i>=t.x&&t.x>=h&&i!==t.x&&pT(s<d?i:o,s,h,d,s<d?o:i,s,t.x,t.y)&&(_=Math.abs(s-t.y)/(i-t.x),vx(t,n)&&(_<m||_===m&&(t.x>l.x||t.x===l.x&&wve(l,t)))&&(l=t,m=_)),t=t.next;while(t!==u);return l}function wve(n,e){return Dl(n.prev,n,e.prev)<0&&Dl(e.next,n,n.next)<0}function Cve(n,e,t,i){let s=n;do s.z===null&&(s.z=QD(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,Mve(s)}function Mve(n){let e,t,i,s,o,l,u,h,d=1;do{for(t=n,n=null,o=null,l=0;t;){for(l++,i=t,u=0,e=0;e<d&&(u++,i=i.nextZ,!!i);e++);for(h=d;u>0||h>0&&i;)u!==0&&(h===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,u--):(s=i,i=i.nextZ,h--),o?o.nextZ=s:n=s,s.prevZ=o,o=s;t=i}o.nextZ=null,d*=2}while(l>1);return n}function QD(n,e,t,i,s){return n=32767*(n-t)*s,e=32767*(e-i)*s,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Ave(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function pT(n,e,t,i,s,o,l,u){return(s-l)*(e-u)-(n-l)*(o-u)>=0&&(n-l)*(i-u)-(t-l)*(e-u)>=0&&(t-l)*(o-u)-(s-l)*(i-u)>=0}function Ive(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Rve(n,e)&&(vx(n,e)&&vx(e,n)&&kve(n,e)&&(Dl(n.prev,n,e.prev)||Dl(n,e.prev,e))||NR(n,e)&&Dl(n.prev,n,n.next)>0&&Dl(e.prev,e,e.next)>0)}function Dl(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function NR(n,e){return n.x===e.x&&n.y===e.y}function ij(n,e,t,i){const s=iM(Dl(n,e,t)),o=iM(Dl(n,e,i)),l=iM(Dl(t,i,n)),u=iM(Dl(t,i,e));return!!(s!==o&&l!==u||s===0&&rM(n,t,e)||o===0&&rM(n,i,e)||l===0&&rM(t,n,i)||u===0&&rM(t,e,i))}function rM(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function iM(n){return n>0?1:n<0?-1:0}function Rve(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&ij(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function vx(n,e){return Dl(n.prev,n,n.next)<0?Dl(n,e,n.next)>=0&&Dl(n,n.prev,e)>=0:Dl(n,e,n.prev)<0||Dl(n,n.next,e)<0}function kve(n,e){let t=n,i=!1;const s=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&s<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function sj(n,e){const t=new qD(n.i,n.x,n.y),i=new qD(e.i,e.x,e.y),s=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function wH(n,e,t,i){const s=new qD(n,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function yx(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function qD(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ove(n,e,t,i){let s=0;for(let o=e,l=t-i;o<t;o+=i)s+=(n[l]-n[o])*(n[o+1]+n[l+1]),l=o;return s}class n0{static area(e){const t=e.length;let i=0;for(let s=t-1,o=0;o<t;s=o++)i+=e[s].x*e[o].y-e[o].x*e[s].y;return i*.5}static isClockWise(e){return n0.area(e)<0}static triangulateShape(e,t){const i=[],s=[],o=[];CH(e),MH(i,e);let l=e.length;t.forEach(CH);for(let h=0;h<t.length;h++)s.push(l),l+=t[h].length,MH(i,t[h]);const u=_ve.triangulate(i,s);for(let h=0;h<u.length;h+=3)o.push(u.slice(h,h+3));return o}}function CH(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function MH(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class QT extends Or{constructor(e=new rb([new Dt(.5,.5),new Dt(-.5,.5),new Dt(-.5,-.5),new Dt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,s=[],o=[];for(let u=0,h=e.length;u<h;u++){const d=e[u];l(d)}this.setAttribute("position",new Fn(s,3)),this.setAttribute("uv",new Fn(o,2)),this.computeVertexNormals();function l(u){const h=[],d=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,_=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,S=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:S-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,A=t.bevelSegments!==void 0?t.bevelSegments:3;const k=t.extrudePath,O=t.UVGenerator!==void 0?t.UVGenerator:Lve;let D,L=!1,z,H,U,P;k&&(D=k.getSpacedPoints(m),L=!0,v=!1,z=k.computeFrenetFrames(m,!1),H=new be,U=new be,P=new be),v||(A=0,S=0,x=0,w=0);const K=u.extractPoints(d);let ee=K.shape;const re=K.holes;if(!n0.isClockWise(ee)){ee=ee.reverse();for(let Oe=0,Ee=re.length;Oe<Ee;Oe++){const Fe=re[Oe];n0.isClockWise(Fe)&&(re[Oe]=Fe.reverse())}}const ie=n0.triangulateShape(ee,re),de=ee;for(let Oe=0,Ee=re.length;Oe<Ee;Oe++){const Fe=re[Oe];ee=ee.concat(Fe)}function oe(Oe,Ee,Fe){return Ee||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ee.clone().multiplyScalar(Fe).add(Oe)}const ce=ee.length,me=ie.length;function Ae(Oe,Ee,Fe){let rt,nt,dt;const It=Oe.x-Ee.x,mt=Oe.y-Ee.y,wt=Fe.x-Oe.x,$t=Fe.y-Oe.y,pt=It*It+mt*mt,Te=It*$t-mt*wt;if(Math.abs(Te)>Number.EPSILON){const te=Math.sqrt(pt),ke=Math.sqrt(wt*wt+$t*$t),ot=Ee.x-mt/te,ft=Ee.y+It/te,xt=Fe.x-$t/ke,at=Fe.y+wt/ke,Ge=((xt-ot)*$t-(at-ft)*wt)/(It*$t-mt*wt);rt=ot+It*Ge-Oe.x,nt=ft+mt*Ge-Oe.y;const Ce=rt*rt+nt*nt;if(Ce<=2)return new Dt(rt,nt);dt=Math.sqrt(Ce/2)}else{let te=!1;It>Number.EPSILON?wt>Number.EPSILON&&(te=!0):It<-Number.EPSILON?wt<-Number.EPSILON&&(te=!0):Math.sign(mt)===Math.sign($t)&&(te=!0),te?(rt=-mt,nt=It,dt=Math.sqrt(pt)):(rt=It,nt=mt,dt=Math.sqrt(pt/2))}return new Dt(rt/dt,nt/dt)}const j=[];for(let Oe=0,Ee=de.length,Fe=Ee-1,rt=Oe+1;Oe<Ee;Oe++,Fe++,rt++)Fe===Ee&&(Fe=0),rt===Ee&&(rt=0),j[Oe]=Ae(de[Oe],de[Fe],de[rt]);const Z=[];let ne,ae=j.concat();for(let Oe=0,Ee=re.length;Oe<Ee;Oe++){const Fe=re[Oe];ne=[];for(let rt=0,nt=Fe.length,dt=nt-1,It=rt+1;rt<nt;rt++,dt++,It++)dt===nt&&(dt=0),It===nt&&(It=0),ne[rt]=Ae(Fe[rt],Fe[dt],Fe[It]);Z.push(ne),ae=ae.concat(ne)}for(let Oe=0;Oe<A;Oe++){const Ee=Oe/A,Fe=S*Math.cos(Ee*Math.PI/2),rt=x*Math.sin(Ee*Math.PI/2)+w;for(let nt=0,dt=de.length;nt<dt;nt++){const It=oe(de[nt],j[nt],rt);Re(It.x,It.y,-Fe)}for(let nt=0,dt=re.length;nt<dt;nt++){const It=re[nt];ne=Z[nt];for(let mt=0,wt=It.length;mt<wt;mt++){const $t=oe(It[mt],ne[mt],rt);Re($t.x,$t.y,-Fe)}}}const _e=x+w;for(let Oe=0;Oe<ce;Oe++){const Ee=v?oe(ee[Oe],ae[Oe],_e):ee[Oe];L?(U.copy(z.normals[0]).multiplyScalar(Ee.x),H.copy(z.binormals[0]).multiplyScalar(Ee.y),P.copy(D[0]).add(U).add(H),Re(P.x,P.y,P.z)):Re(Ee.x,Ee.y,0)}for(let Oe=1;Oe<=m;Oe++)for(let Ee=0;Ee<ce;Ee++){const Fe=v?oe(ee[Ee],ae[Ee],_e):ee[Ee];L?(U.copy(z.normals[Oe]).multiplyScalar(Fe.x),H.copy(z.binormals[Oe]).multiplyScalar(Fe.y),P.copy(D[Oe]).add(U).add(H),Re(P.x,P.y,P.z)):Re(Fe.x,Fe.y,_/m*Oe)}for(let Oe=A-1;Oe>=0;Oe--){const Ee=Oe/A,Fe=S*Math.cos(Ee*Math.PI/2),rt=x*Math.sin(Ee*Math.PI/2)+w;for(let nt=0,dt=de.length;nt<dt;nt++){const It=oe(de[nt],j[nt],rt);Re(It.x,It.y,_+Fe)}for(let nt=0,dt=re.length;nt<dt;nt++){const It=re[nt];ne=Z[nt];for(let mt=0,wt=It.length;mt<wt;mt++){const $t=oe(It[mt],ne[mt],rt);L?Re($t.x,$t.y+D[m-1].y,D[m-1].x+Fe):Re($t.x,$t.y,_+Fe)}}}Le(),we();function Le(){const Oe=s.length/3;if(v){let Ee=0,Fe=ce*Ee;for(let rt=0;rt<me;rt++){const nt=ie[rt];qe(nt[2]+Fe,nt[1]+Fe,nt[0]+Fe)}Ee=m+A*2,Fe=ce*Ee;for(let rt=0;rt<me;rt++){const nt=ie[rt];qe(nt[0]+Fe,nt[1]+Fe,nt[2]+Fe)}}else{for(let Ee=0;Ee<me;Ee++){const Fe=ie[Ee];qe(Fe[2],Fe[1],Fe[0])}for(let Ee=0;Ee<me;Ee++){const Fe=ie[Ee];qe(Fe[0]+ce*m,Fe[1]+ce*m,Fe[2]+ce*m)}}i.addGroup(Oe,s.length/3-Oe,0)}function we(){const Oe=s.length/3;let Ee=0;Xe(de,Ee),Ee+=de.length;for(let Fe=0,rt=re.length;Fe<rt;Fe++){const nt=re[Fe];Xe(nt,Ee),Ee+=nt.length}i.addGroup(Oe,s.length/3-Oe,1)}function Xe(Oe,Ee){let Fe=Oe.length;for(;--Fe>=0;){const rt=Fe;let nt=Fe-1;nt<0&&(nt=Oe.length-1);for(let dt=0,It=m+A*2;dt<It;dt++){const mt=ce*dt,wt=ce*(dt+1),$t=Ee+rt+mt,pt=Ee+nt+mt,Te=Ee+nt+wt,te=Ee+rt+wt;Je($t,pt,Te,te)}}}function Re(Oe,Ee,Fe){h.push(Oe),h.push(Ee),h.push(Fe)}function qe(Oe,Ee,Fe){ht(Oe),ht(Ee),ht(Fe);const rt=s.length/3,nt=O.generateTopUV(i,s,rt-3,rt-2,rt-1);it(nt[0]),it(nt[1]),it(nt[2])}function Je(Oe,Ee,Fe,rt){ht(Oe),ht(Ee),ht(rt),ht(Ee),ht(Fe),ht(rt);const nt=s.length/3,dt=O.generateSideWallUV(i,s,nt-6,nt-3,nt-2,nt-1);it(dt[0]),it(dt[1]),it(dt[3]),it(dt[1]),it(dt[2]),it(dt[3])}function ht(Oe){s.push(h[Oe*3+0]),s.push(h[Oe*3+1]),s.push(h[Oe*3+2])}function it(Oe){o.push(Oe.x),o.push(Oe.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Dve(t,i,e)}static fromJSON(e,t){const i=[];for(let o=0,l=e.shapes.length;o<l;o++){const u=t[e.shapes[o]];i.push(u)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new BP[s.type]().fromJSON(s)),new QT(i,e.options)}}const Lve={generateTopUV:function(n,e,t,i,s){const o=e[t*3],l=e[t*3+1],u=e[i*3],h=e[i*3+1],d=e[s*3],m=e[s*3+1];return[new Dt(o,l),new Dt(u,h),new Dt(d,m)]},generateSideWallUV:function(n,e,t,i,s,o){const l=e[t*3],u=e[t*3+1],h=e[t*3+2],d=e[i*3],m=e[i*3+1],_=e[i*3+2],v=e[s*3],S=e[s*3+1],x=e[s*3+2],w=e[o*3],A=e[o*3+1],k=e[o*3+2];return Math.abs(u-m)<Math.abs(l-d)?[new Dt(l,1-h),new Dt(d,1-_),new Dt(v,1-x),new Dt(w,1-k)]:[new Dt(u,1-h),new Dt(m,1-_),new Dt(S,1-x),new Dt(A,1-k)]}};function Dve(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,s=n.length;i<s;i++){const o=n[i];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class qT extends o0{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qT(e.radius,e.detail)}}class cg extends o0{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cg(e.radius,e.detail)}}class ZT extends Or{constructor(e=.5,t=1,i=8,s=1,o=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:s,thetaStart:o,thetaLength:l},i=Math.max(3,i),s=Math.max(1,s);const u=[],h=[],d=[],m=[];let _=e;const v=(t-e)/s,S=new be,x=new Dt;for(let w=0;w<=s;w++){for(let A=0;A<=i;A++){const k=o+A/i*l;S.x=_*Math.cos(k),S.y=_*Math.sin(k),h.push(S.x,S.y,S.z),d.push(0,0,1),x.x=(S.x/t+1)/2,x.y=(S.y/t+1)/2,m.push(x.x,x.y)}_+=v}for(let w=0;w<s;w++){const A=w*(i+1);for(let k=0;k<i;k++){const O=k+A,D=O,L=O+i+1,z=O+i+2,H=O+1;u.push(D,L,H),u.push(L,z,H)}}this.setIndex(u),this.setAttribute("position",new Fn(h,3)),this.setAttribute("normal",new Fn(d,3)),this.setAttribute("uv",new Fn(m,2))}static fromJSON(e){return new ZT(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class eS extends Or{constructor(e=new rb([new Dt(0,.5),new Dt(-.5,-.5),new Dt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],o=[],l=[];let u=0,h=0;if(Array.isArray(e)===!1)d(e);else for(let m=0;m<e.length;m++)d(e[m]),this.addGroup(u,h,m),u+=h,h=0;this.setIndex(i),this.setAttribute("position",new Fn(s,3)),this.setAttribute("normal",new Fn(o,3)),this.setAttribute("uv",new Fn(l,2));function d(m){const _=s.length/3,v=m.extractPoints(t);let S=v.shape;const x=v.holes;n0.isClockWise(S)===!1&&(S=S.reverse());for(let A=0,k=x.length;A<k;A++){const O=x[A];n0.isClockWise(O)===!0&&(x[A]=O.reverse())}const w=n0.triangulateShape(S,x);for(let A=0,k=x.length;A<k;A++){const O=x[A];S=S.concat(O)}for(let A=0,k=S.length;A<k;A++){const O=S[A];s.push(O.x,O.y,0),o.push(0,0,1),l.push(O.x,O.y)}for(let A=0,k=w.length;A<k;A++){const O=w[A],D=O[0]+_,L=O[1]+_,z=O[2]+_;i.push(D,L,z),h+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Nve(t,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];i.push(l)}return new eS(i,e.curveSegments)}}function Nve(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const s=n[t];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e}class _g extends Or{constructor(e=1,t=32,i=16,s=0,o=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:o,thetaStart:l,thetaLength:u},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const h=Math.min(l+u,Math.PI);let d=0;const m=[],_=new be,v=new be,S=[],x=[],w=[],A=[];for(let k=0;k<=i;k++){const O=[],D=k/i;let L=0;k==0&&l==0?L=.5/t:k==i&&h==Math.PI&&(L=-.5/t);for(let z=0;z<=t;z++){const H=z/t;_.x=-e*Math.cos(s+H*o)*Math.sin(l+D*u),_.y=e*Math.cos(l+D*u),_.z=e*Math.sin(s+H*o)*Math.sin(l+D*u),x.push(_.x,_.y,_.z),v.copy(_).normalize(),w.push(v.x,v.y,v.z),A.push(H+L,1-D),O.push(d++)}m.push(O)}for(let k=0;k<i;k++)for(let O=0;O<t;O++){const D=m[k][O+1],L=m[k][O],z=m[k+1][O],H=m[k+1][O+1];(k!==0||l>0)&&S.push(D,L,H),(k!==i-1||h<Math.PI)&&S.push(L,z,H)}this.setIndex(S),this.setAttribute("position",new Fn(x,3)),this.setAttribute("normal",new Fn(w,3)),this.setAttribute("uv",new Fn(A,2))}static fromJSON(e){return new _g(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class tS extends o0{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new tS(e.radius,e.detail)}}class lg extends Or{constructor(e=1,t=.4,i=8,s=6,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:s,arc:o},i=Math.floor(i),s=Math.floor(s);const l=[],u=[],h=[],d=[],m=new be,_=new be,v=new be;for(let S=0;S<=i;S++)for(let x=0;x<=s;x++){const w=x/s*o,A=S/i*Math.PI*2;_.x=(e+t*Math.cos(A))*Math.cos(w),_.y=(e+t*Math.cos(A))*Math.sin(w),_.z=t*Math.sin(A),u.push(_.x,_.y,_.z),m.x=e*Math.cos(w),m.y=e*Math.sin(w),v.subVectors(_,m).normalize(),h.push(v.x,v.y,v.z),d.push(x/s),d.push(S/i)}for(let S=1;S<=i;S++)for(let x=1;x<=s;x++){const w=(s+1)*S+x-1,A=(s+1)*(S-1)+x-1,k=(s+1)*(S-1)+x,O=(s+1)*S+x;l.push(w,A,O),l.push(A,k,O)}this.setIndex(l),this.setAttribute("position",new Fn(u,3)),this.setAttribute("normal",new Fn(h,3)),this.setAttribute("uv",new Fn(d,2))}static fromJSON(e){return new lg(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class nS extends Or{constructor(e=1,t=.4,i=64,s=8,o=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:s,p:o,q:l},i=Math.floor(i),s=Math.floor(s);const u=[],h=[],d=[],m=[],_=new be,v=new be,S=new be,x=new be,w=new be,A=new be,k=new be;for(let D=0;D<=i;++D){const L=D/i*o*Math.PI*2;O(L,o,l,e,S),O(L+.01,o,l,e,x),A.subVectors(x,S),k.addVectors(x,S),w.crossVectors(A,k),k.crossVectors(w,A),w.normalize(),k.normalize();for(let z=0;z<=s;++z){const H=z/s*Math.PI*2,U=-t*Math.cos(H),P=t*Math.sin(H);_.x=S.x+(U*k.x+P*w.x),_.y=S.y+(U*k.y+P*w.y),_.z=S.z+(U*k.z+P*w.z),h.push(_.x,_.y,_.z),v.subVectors(_,S).normalize(),d.push(v.x,v.y,v.z),m.push(D/i),m.push(z/s)}}for(let D=1;D<=i;D++)for(let L=1;L<=s;L++){const z=(s+1)*(D-1)+(L-1),H=(s+1)*D+(L-1),U=(s+1)*D+L,P=(s+1)*(D-1)+L;u.push(z,H,P),u.push(H,U,P)}this.setIndex(u),this.setAttribute("position",new Fn(h,3)),this.setAttribute("normal",new Fn(d,3)),this.setAttribute("uv",new Fn(m,2));function O(D,L,z,H,U){const P=Math.cos(D),K=Math.sin(D),ee=z/L*D,re=Math.cos(ee);U.x=H*(2+re)*.5*P,U.y=H*(2+re)*K*.5,U.z=H*Math.sin(ee)*.5}}static fromJSON(e){return new nS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class rS extends Or{constructor(e=new DP(new be(-1,-1,0),new be(-1,1,0),new be(1,1,0)),t=64,i=1,s=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:s,closed:o};const l=e.computeFrenetFrames(t,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const u=new be,h=new be,d=new Dt;let m=new be;const _=[],v=[],S=[],x=[];w(),this.setIndex(x),this.setAttribute("position",new Fn(_,3)),this.setAttribute("normal",new Fn(v,3)),this.setAttribute("uv",new Fn(S,2));function w(){for(let D=0;D<t;D++)A(D);A(o===!1?t:0),O(),k()}function A(D){m=e.getPointAt(D/t,m);const L=l.normals[D],z=l.binormals[D];for(let H=0;H<=s;H++){const U=H/s*Math.PI*2,P=Math.sin(U),K=-Math.cos(U);h.x=K*L.x+P*z.x,h.y=K*L.y+P*z.y,h.z=K*L.z+P*z.z,h.normalize(),v.push(h.x,h.y,h.z),u.x=m.x+i*h.x,u.y=m.y+i*h.y,u.z=m.z+i*h.z,_.push(u.x,u.y,u.z)}}function k(){for(let D=1;D<=t;D++)for(let L=1;L<=s;L++){const z=(s+1)*(D-1)+(L-1),H=(s+1)*D+(L-1),U=(s+1)*D+L,P=(s+1)*(D-1)+L;x.push(z,H,P),x.push(H,U,P)}}function O(){for(let D=0;D<=t;D++)for(let L=0;L<=s;L++)d.x=D/t,d.y=L/s,S.push(d.x,d.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new rS(new BP[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class PP extends Or{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,s=new be,o=new be;if(e.index!==null){const l=e.attributes.position,u=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:u.count,materialIndex:0}]);for(let d=0,m=h.length;d<m;++d){const _=h[d],v=_.start,S=_.count;for(let x=v,w=v+S;x<w;x+=3)for(let A=0;A<3;A++){const k=u.getX(x+A),O=u.getX(x+(A+1)%3);s.fromBufferAttribute(l,k),o.fromBufferAttribute(l,O),AH(s,o,i)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}}else{const l=e.attributes.position;for(let u=0,h=l.count/3;u<h;u++)for(let d=0;d<3;d++){const m=3*u+d,_=3*u+(d+1)%3;s.fromBufferAttribute(l,m),o.fromBufferAttribute(l,_),AH(s,o,i)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new Fn(t,3))}}}function AH(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(s)===!0?!1:(t.add(i),t.add(s),!0)}var IH=Object.freeze({__proto__:null,BoxGeometry:Pa,BoxBufferGeometry:Pa,CapsuleGeometry:XT,CapsuleBufferGeometry:XT,CircleGeometry:YT,CircleBufferGeometry:YT,ConeGeometry:KT,ConeBufferGeometry:KT,CylinderGeometry:pa,CylinderBufferGeometry:pa,DodecahedronGeometry:JT,DodecahedronBufferGeometry:JT,EdgesGeometry:nj,ExtrudeGeometry:QT,ExtrudeBufferGeometry:QT,IcosahedronGeometry:qT,IcosahedronBufferGeometry:qT,LatheGeometry:_b,LatheBufferGeometry:_b,OctahedronGeometry:cg,OctahedronBufferGeometry:cg,PlaneGeometry:gg,PlaneBufferGeometry:gg,PolyhedronGeometry:o0,PolyhedronBufferGeometry:o0,RingGeometry:ZT,RingBufferGeometry:ZT,ShapeGeometry:eS,ShapeBufferGeometry:eS,SphereGeometry:_g,SphereBufferGeometry:_g,TetrahedronGeometry:tS,TetrahedronBufferGeometry:tS,TorusGeometry:lg,TorusBufferGeometry:lg,TorusKnotGeometry:nS,TorusKnotBufferGeometry:nS,TubeGeometry:rS,TubeBufferGeometry:rS,WireframeGeometry:PP});class oj extends Wc{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new vn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class aj extends mh{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class bx extends Wc{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Cb,this.normalScale=new Dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lj extends bx{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Dt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Gu(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new vn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new vn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new vn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class uj extends Wc{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new vn(16777215),this.specular=new vn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Cb,this.normalScale=new Dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cj extends Wc{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Cb,this.normalScale=new Dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class FP extends Wc{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Cb,this.normalScale=new Dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class hj extends Wc{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new vn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class dj extends Wc{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Cb,this.normalScale=new Dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pj extends Rd{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function cm(n,e,t){return UP(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Xy(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function UP(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function fj(n){function e(s,o){return n[s]-n[o]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function ZD(n,e,t){const i=n.length,s=new n.constructor(i);for(let o=0,l=0;l!==i;++o){const u=t[o]*e;for(let h=0;h!==e;++h)s[l++]=n[u+h]}return s}function zP(n,e,t,i){let s=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[s++];if(o===void 0)return;let l=o[i];if(l!==void 0)if(Array.isArray(l))do l=o[i],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=n[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[i],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=n[s++];while(o!==void 0);else do l=o[i],l!==void 0&&(e.push(o.time),t.push(l)),o=n[s++];while(o!==void 0)}function Bve(n,e,t,i,s=30){const o=n.clone();o.name=e;const l=[];for(let h=0;h<o.tracks.length;++h){const d=o.tracks[h],m=d.getValueSize(),_=[],v=[];for(let S=0;S<d.times.length;++S){const x=d.times[S]*s;if(!(x<t||x>=i)){_.push(d.times[S]);for(let w=0;w<m;++w)v.push(d.values[S*m+w])}}_.length!==0&&(d.times=Xy(_,d.times.constructor),d.values=Xy(v,d.values.constructor),l.push(d))}o.tracks=l;let u=1/0;for(let h=0;h<o.tracks.length;++h)u>o.tracks[h].times[0]&&(u=o.tracks[h].times[0]);for(let h=0;h<o.tracks.length;++h)o.tracks[h].shift(-1*u);return o.resetDuration(),o}function Pve(n,e=0,t=n,i=30){i<=0&&(i=30);const s=t.tracks.length,o=e/i;for(let l=0;l<s;++l){const u=t.tracks[l],h=u.ValueTypeName;if(h==="bool"||h==="string")continue;const d=n.tracks.find(function(k){return k.name===u.name&&k.ValueTypeName===h});if(d===void 0)continue;let m=0;const _=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=_/3);let v=0;const S=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=S/3);const x=u.times.length-1;let w;if(o<=u.times[0]){const k=m,O=_-m;w=cm(u.values,k,O)}else if(o>=u.times[x]){const k=x*_+m,O=k+_-m;w=cm(u.values,k,O)}else{const k=u.createInterpolant(),O=m,D=_-m;k.evaluate(o),w=cm(k.resultBuffer,O,D)}h==="quaternion"&&new jo().fromArray(w).normalize().conjugate().toArray(w);const A=d.times.length;for(let k=0;k<A;++k){const O=k*S+v;if(h==="quaternion")jo.multiplyQuaternionsFlat(d.values,O,w,0,d.values,O);else{const D=S-v*2;for(let L=0;L<D;++L)d.values[O+L]-=w[L]}}}return n.blendMode=SP,n}var Fve=Object.freeze({__proto__:null,arraySlice:cm,convertArray:Xy,isTypedArray:UP,getKeyframeOrder:fj,sortedArray:ZD,flattenJSON:zP,subclip:Bve,makeClipAdditive:Pve});class Yx{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],o=t[i-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=i+2;;){if(s===void 0){if(e<o)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(o=s,s=t[++i],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(i=2,o=u);for(let h=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===h)break;if(s=o,o=t[--i-1],e>=o)break t}l=i,i=0;break n}break e}for(;i<l;){const u=i+l>>>1;e<t[u]?l=u:i=u+1}if(s=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=i[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class mj extends Yx{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Wy,endingEnd:Wy}}intervalChanged_(e,t,i){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],h=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case Vy:o=e,u=2*t-i;break;case hx:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=i}if(h===void 0)switch(this.getSettings_().endingEnd){case Vy:l=e,h=2*i-t;break;case hx:l=1,h=i+s[1]-s[0];break;default:l=e-1,h=t}const d=(i-t)*.5,m=this.valueSize;this._weightPrev=d/(t-u),this._weightNext=d/(h-i),this._offsetPrev=o*m,this._offsetNext=l*m}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,d=h-u,m=this._offsetPrev,_=this._offsetNext,v=this._weightPrev,S=this._weightNext,x=(i-t)/(s-t),w=x*x,A=w*x,k=-v*A+2*v*w-v*x,O=(1+v)*A+(-1.5-2*v)*w+(-.5+v)*x+1,D=(-1-S)*A+(1.5+S)*w+.5*x,L=S*A-S*w;for(let z=0;z!==u;++z)o[z]=k*l[m+z]+O*l[d+z]+D*l[h+z]+L*l[_+z];return o}}class HP extends Yx{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,d=h-u,m=(i-t)/(s-t),_=1-m;for(let v=0;v!==u;++v)o[v]=l[d+v]*_+l[h+v]*m;return o}}class gj extends Yx{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Tg{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Xy(t,this.TimeBufferType),this.values=Xy(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Xy(e.times,Array),values:Xy(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new gj(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new HP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new mj(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ux:t=this.InterpolantFactoryMethodDiscrete;break;case cx:t=this.InterpolantFactoryMethodLinear;break;case ZM:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ux;case this.InterpolantFactoryMethodLinear:return cx;case this.InterpolantFactoryMethodSmooth:return ZM}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let o=0,l=s-1;for(;o!==s&&i[o]<e;)++o;for(;l!==-1&&i[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=cm(i,o,l),this.values=cm(this.values,o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const h=i[u];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,h),e=!1;break}if(l!==null&&l>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,h,l),e=!1;break}l=h}if(s!==void 0&&UP(s))for(let u=0,h=s.length;u!==h;++u){const d=s[u];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,d),e=!1;break}}return e}optimize(){const e=cm(this.times),t=cm(this.values),i=this.getValueSize(),s=this.getInterpolation()===ZM,o=e.length-1;let l=1;for(let u=1;u<o;++u){let h=!1;const d=e[u],m=e[u+1];if(d!==m&&(u!==1||d!==e[0]))if(s)h=!0;else{const _=u*i,v=_-i,S=_+i;for(let x=0;x!==i;++x){const w=t[_+x];if(w!==t[v+x]||w!==t[S+x]){h=!0;break}}}if(h){if(u!==l){e[l]=e[u];const _=u*i,v=l*i;for(let S=0;S!==i;++S)t[v+S]=t[_+S]}++l}}if(o>0){e[l]=e[o];for(let u=o*i,h=l*i,d=0;d!==i;++d)t[h+d]=t[u+d];++l}return l!==e.length?(this.times=cm(e,0,l),this.values=cm(t,0,l*i)):(this.times=e,this.values=t),this}clone(){const e=cm(this.times,0),t=cm(this.values,0),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Tg.prototype.TimeBufferType=Float32Array;Tg.prototype.ValueBufferType=Float32Array;Tg.prototype.DefaultInterpolation=cx;class Ab extends Tg{}Ab.prototype.ValueTypeName="bool";Ab.prototype.ValueBufferType=Array;Ab.prototype.DefaultInterpolation=ux;Ab.prototype.InterpolantFactoryMethodLinear=void 0;Ab.prototype.InterpolantFactoryMethodSmooth=void 0;class GP extends Tg{}GP.prototype.ValueTypeName="color";class Tx extends Tg{}Tx.prototype.ValueTypeName="number";class _j extends Yx{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=(i-t)/(s-t);let d=e*u;for(let m=d+u;d!==m;d+=4)jo.slerpFlat(o,0,l,d-u,l,d,h);return o}}class ES extends Tg{InterpolantFactoryMethodLinear(e){return new _j(this.times,this.values,this.getValueSize(),e)}}ES.prototype.ValueTypeName="quaternion";ES.prototype.DefaultInterpolation=cx;ES.prototype.InterpolantFactoryMethodSmooth=void 0;class Ib extends Tg{}Ib.prototype.ValueTypeName="string";Ib.prototype.ValueBufferType=Array;Ib.prototype.DefaultInterpolation=ux;Ib.prototype.InterpolantFactoryMethodLinear=void 0;Ib.prototype.InterpolantFactoryMethodSmooth=void 0;class Sx extends Tg{}Sx.prototype.ValueTypeName="vector";class Ex{constructor(e,t=-1,i,s=$R){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=Cf(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let l=0,u=i.length;l!==u;++l)t.push(zve(i[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=i.length;o!==l;++o)t.push(Tg.toJSON(i[o]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const o=t.length,l=[];for(let u=0;u<o;u++){let h=[],d=[];h.push((u+o-1)%o,u,(u+1)%o),d.push(0,1,0);const m=fj(h);h=ZD(h,1,m),d=ZD(d,1,m),!s&&h[0]===0&&(h.push(o),d.push(d[0])),l.push(new Tx(".morphTargetInfluences["+t[u].name+"]",h,d).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const d=e[u],m=d.name.match(o);if(m&&m.length>1){const _=m[1];let v=s[_];v||(s[_]=v=[]),v.push(d)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,i));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(m,_,v,S,x){if(v.length!==0){const w=[],A=[];zP(v,w,A,S),w.length!==0&&x.push(new m(_,w,A))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let h=e.length||-1;const d=e.hierarchy||[];for(let m=0;m<d.length;m++){const _=d[m].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const v={};let S;for(S=0;S<_.length;S++)if(_[S].morphTargets)for(let x=0;x<_[S].morphTargets.length;x++)v[_[S].morphTargets[x]]=-1;for(const x in v){const w=[],A=[];for(let k=0;k!==_[S].morphTargets.length;++k){const O=_[S];w.push(O.time),A.push(O.morphTarget===x?1:0)}s.push(new Tx(".morphTargetInfluence["+x+"]",w,A))}h=v.length*l}else{const v=".bones["+t[m].name+"]";i(Sx,v+".position",_,"pos",s),i(ES,v+".quaternion",_,"rot",s),i(Sx,v+".scale",_,"scl",s)}}return s.length===0?null:new this(o,h,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Uve(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Tx;case"vector":case"vector2":case"vector3":case"vector4":return Sx;case"color":return GP;case"quaternion":return ES;case"bool":case"boolean":return Ab;case"string":return Ib}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function zve(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Uve(n.type);if(n.times===void 0){const t=[],i=[];zP(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const vb={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class WP{constructor(e,t,i){const s=this;let o=!1,l=0,u=0,h;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(m){u++,o===!1&&s.onStart!==void 0&&s.onStart(m,l,u),o=!0},this.itemEnd=function(m){l++,s.onProgress!==void 0&&s.onProgress(m,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(m){s.onError!==void 0&&s.onError(m)},this.resolveURL=function(m){return h?h(m):m},this.setURLModifier=function(m){return h=m,this},this.addHandler=function(m,_){return d.push(m,_),this},this.removeHandler=function(m){const _=d.indexOf(m);return _!==-1&&d.splice(_,2),this},this.getHandler=function(m){for(let _=0,v=d.length;_<v;_+=2){const S=d[_],x=d[_+1];if(S.global&&(S.lastIndex=0),S.test(m))return x}return null}}}const vj=new WP;class Nf{constructor(e){this.manager=e!==void 0?e:vj,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,o){i.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const U0={};class Hve extends Error{constructor(e,t){super(e),this.response=t}}class i_ extends Nf{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=vb.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(U0[e]!==void 0){U0[e].push({onLoad:t,onProgress:i,onError:s});return}U0[e]=[],U0[e].push({onLoad:t,onProgress:i,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(l).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const m=U0[e],_=d.body.getReader(),v=d.headers.get("Content-Length"),S=v?parseInt(v):0,x=S!==0;let w=0;const A=new ReadableStream({start(k){O();function O(){_.read().then(({done:D,value:L})=>{if(D)k.close();else{w+=L.byteLength;const z=new ProgressEvent("progress",{lengthComputable:x,loaded:w,total:S});for(let H=0,U=m.length;H<U;H++){const P=m[H];P.onProgress&&P.onProgress(z)}k.enqueue(L),O()}})}}});return new Response(A)}else throw new Hve(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(h){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(m=>new DOMParser().parseFromString(m,u));case"json":return d.json();default:if(u===void 0)return d.text();{const m=/charset="?([^;"\s]*)"?/i.exec(u),_=m&&m[1]?m[1].toLowerCase():void 0,v=new TextDecoder(_);return d.arrayBuffer().then(S=>v.decode(S))}}}).then(d=>{vb.add(e,d);const m=U0[e];delete U0[e];for(let _=0,v=m.length;_<v;_++){const S=m[_];S.onLoad&&S.onLoad(d)}}).catch(d=>{const m=U0[e];if(m===void 0)throw this.manager.itemError(e),d;delete U0[e];for(let _=0,v=m.length;_<v;_++){const S=m[_];S.onError&&S.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Gve extends Nf{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new i_(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}parse(e){const t=[];for(let i=0;i<e.length;i++){const s=Ex.parse(e[i]);t.push(s)}return t}}class Wve extends Nf{constructor(e){super(e)}load(e,t,i,s){const o=this,l=[],u=new J7,h=new i_(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(o.withCredentials);let d=0;function m(_){h.load(e[_],function(v){const S=o.parse(v,!0);l[_]={width:S.width,height:S.height,format:S.format,mipmaps:S.mipmaps},d+=1,d===6&&(S.mipmapCount===1&&(u.minFilter=Xo),u.image=l,u.format=S.format,u.needsUpdate=!0,t&&t(u))},i,s)}if(Array.isArray(e))for(let _=0,v=e.length;_<v;++_)m(_);else h.load(e,function(_){const v=o.parse(_,!0);if(v.isCubemap){const S=v.mipmaps.length/v.mipmapCount;for(let x=0;x<S;x++){l[x]={mipmaps:[]};for(let w=0;w<v.mipmapCount;w++)l[x].mipmaps.push(v.mipmaps[x*v.mipmapCount+w]),l[x].format=v.format,l[x].width=v.width,l[x].height=v.height}u.image=l}else u.image.width=v.width,u.image.height=v.height,u.mipmaps=v.mipmaps;v.mipmapCount===1&&(u.minFilter=Xo),u.format=v.format,u.needsUpdate=!0,t&&t(u)},i,s);return u}}class $x extends Nf{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=vb.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=fx("img");function h(){m(),vb.add(e,this),t&&t(this),o.manager.itemEnd(e)}function d(_){m(),s&&s(_),o.manager.itemError(e),o.manager.itemEnd(e)}function m(){u.removeEventListener("load",h,!1),u.removeEventListener("error",d,!1)}return u.addEventListener("load",h,!1),u.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class Vve extends Nf{constructor(e){super(e)}load(e,t,i,s){const o=new jx,l=new $x(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let u=0;function h(d){l.load(e[d],function(m){o.images[d]=m,u++,u===6&&(o.needsUpdate=!0,t&&t(o))},void 0,s)}for(let d=0;d<e.length;++d)h(d);return o}}class jve extends Nf{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new CT,u=new i_(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(o.withCredentials),u.load(e,function(h){const d=o.parse(h);!d||(d.image!==void 0?l.image=d.image:d.data!==void 0&&(l.image.width=d.width,l.image.height=d.height,l.image.data=d.data),l.wrapS=d.wrapS!==void 0?d.wrapS:ep,l.wrapT=d.wrapT!==void 0?d.wrapT:ep,l.magFilter=d.magFilter!==void 0?d.magFilter:Xo,l.minFilter=d.minFilter!==void 0?d.minFilter:Xo,l.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.encoding!==void 0&&(l.encoding=d.encoding),d.flipY!==void 0&&(l.flipY=d.flipY),d.format!==void 0&&(l.format=d.format),d.type!==void 0&&(l.type=d.type),d.mipmaps!==void 0&&(l.mipmaps=d.mipmaps,l.minFilter=wb),d.mipmapCount===1&&(l.minFilter=Xo),d.generateMipmaps!==void 0&&(l.generateMipmaps=d.generateMipmaps),l.needsUpdate=!0,t&&t(l,d))},i,s),l}}class Xve extends Nf{constructor(e){super(e)}load(e,t,i,s){const o=new Fl,l=new $x(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},i,s),o}}class Nv extends as{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new vn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class yj extends Nv{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(as.DefaultUp),this.updateMatrix(),this.groundColor=new vn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const RH=new Ar,kH=new be,OH=new be;class VP{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Dt(512,512),this.map=null,this.mapPass=null,this.matrix=new Ar,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wR,this._frameExtents=new Dt(1,1),this._viewportCount=1,this._viewports=[new Ii(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;kH.setFromMatrixPosition(e.matrixWorld),t.position.copy(kH),OH.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(OH),t.updateMatrixWorld(),RH.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(RH),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Yve extends VP{constructor(){super(new ko(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=px*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class bj extends Nv{constructor(e,t,i=0,s=Math.PI/3,o=0,l=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(as.DefaultUp),this.updateMatrix(),this.target=new as,this.distance=i,this.angle=s,this.penumbra=o,this.decay=l,this.shadow=new Yve}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const LH=new Ar,GE=new be,bO=new be;class Kve extends VP{constructor(){super(new ko(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Dt(4,2),this._viewportCount=6,this._viewports=[new Ii(2,1,1,1),new Ii(0,1,1,1),new Ii(3,1,1,1),new Ii(1,1,1,1),new Ii(3,0,1,1),new Ii(1,0,1,1)],this._cubeDirections=[new be(1,0,0),new be(-1,0,0),new be(0,0,1),new be(0,0,-1),new be(0,1,0),new be(0,-1,0)],this._cubeUps=[new be(0,1,0),new be(0,1,0),new be(0,1,0),new be(0,1,0),new be(0,0,1),new be(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),GE.setFromMatrixPosition(e.matrixWorld),i.position.copy(GE),bO.copy(i.position),bO.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(bO),i.updateMatrixWorld(),s.makeTranslation(-GE.x,-GE.y,-GE.z),LH.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(LH)}}class Tj extends Nv{constructor(e,t,i=0,s=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new Kve}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Jve extends VP{constructor(){super(new t0(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Sj extends Nv{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(as.DefaultUp),this.updateMatrix(),this.target=new as,this.shadow=new Jve}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Ej extends Nv{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class $j extends Nv{constructor(e,t,i=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class xj{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new be)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*s),t.addScaledVector(l[2],.488603*o),t.addScaledVector(l[3],.488603*i),t.addScaledVector(l[4],1.092548*(i*s)),t.addScaledVector(l[5],1.092548*(s*o)),t.addScaledVector(l[6],.315392*(3*o*o-1)),t.addScaledVector(l[7],1.092548*(i*o)),t.addScaledVector(l[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*s),t.addScaledVector(l[2],2*.511664*o),t.addScaledVector(l[3],2*.511664*i),t.addScaledVector(l[4],2*.429043*i*s),t.addScaledVector(l[5],2*.429043*s*o),t.addScaledVector(l[6],.743125*o*o-.247708),t.addScaledVector(l[7],2*.429043*i*o),t.addScaledVector(l[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,o=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*o,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*i*o,t[8]=.546274*(i*i-s*s)}}class BR extends Nv{constructor(e=new xj,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class PR extends Nf{constructor(e){super(e),this.textures={}}load(e,t,i,s){const o=this,l=new i_(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}parse(e){const t=this.textures;function i(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const s=PR.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new vn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==1&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const l=e.uniforms[o];switch(s.uniforms[o]={},l.type){case"t":s.uniforms[o].value=i(l.value);break;case"c":s.uniforms[o].value=new vn().setHex(l.value);break;case"v2":s.uniforms[o].value=new Dt().fromArray(l.value);break;case"v3":s.uniforms[o].value=new be().fromArray(l.value);break;case"v4":s.uniforms[o].value=new Ii().fromArray(l.value);break;case"m3":s.uniforms[o].value=new np().fromArray(l.value);break;case"m4":s.uniforms[o].value=new Ar().fromArray(l.value);break;default:s.uniforms[o].value=l.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const o in e.extensions)s.extensions[o]=e.extensions[o];if(e.shading!==void 0&&(s.flatShading=e.shading===1),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),s.normalScale=new Dt().fromArray(o)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Dt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:oj,SpriteMaterial:IP,RawShaderMaterial:aj,ShaderMaterial:mh,PointsMaterial:OR,MeshPhysicalMaterial:lj,MeshStandardMaterial:bx,MeshPhongMaterial:uj,MeshToonMaterial:cj,MeshNormalMaterial:FP,MeshLambertMaterial:hj,MeshDepthMaterial:Xx,MeshDistanceMaterial:MR,MeshBasicMaterial:yg,MeshMatcapMaterial:dj,LineDashedMaterial:pj,LineBasicMaterial:Rd,Material:Wc};return new t[e]}}class eN{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class FR extends Or{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class wj extends Nf{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new i_(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}parse(e){const t={},i={};function s(v,S){if(t[S]!==void 0)return t[S];const x=v.interleavedBuffers[S],w=o(v,x.buffer),A=cT(x.type,w),k=new RR(A,x.stride);return k.uuid=x.uuid,t[S]=k,k}function o(v,S){if(i[S]!==void 0)return i[S];const x=v.arrayBuffers[S],w=new Uint32Array(x).buffer;return i[S]=w,w}const l=e.isInstancedBufferGeometry?new FR:new Or,u=e.data.index;if(u!==void 0){const v=cT(u.type,u.array);l.setIndex(new Is(v,1))}const h=e.data.attributes;for(const v in h){const S=h[v];let x;if(S.isInterleavedBufferAttribute){const w=s(e.data,S.data);x=new Sf(w,S.itemSize,S.offset,S.normalized)}else{const w=cT(S.type,S.array),A=S.isInstancedBufferAttribute?gb:Is;x=new A(w,S.itemSize,S.normalized)}S.name!==void 0&&(x.name=S.name),S.usage!==void 0&&x.setUsage(S.usage),S.updateRange!==void 0&&(x.updateRange.offset=S.updateRange.offset,x.updateRange.count=S.updateRange.count),l.setAttribute(v,x)}const d=e.data.morphAttributes;if(d)for(const v in d){const S=d[v],x=[];for(let w=0,A=S.length;w<A;w++){const k=S[w];let O;if(k.isInterleavedBufferAttribute){const D=s(e.data,k.data);O=new Sf(D,k.itemSize,k.offset,k.normalized)}else{const D=cT(k.type,k.array);O=new Is(D,k.itemSize,k.normalized)}k.name!==void 0&&(O.name=k.name),x.push(O)}l.morphAttributes[v]=x}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let v=0,S=m.length;v!==S;++v){const x=m[v];l.addGroup(x.start,x.count,x.materialIndex)}const _=e.data.boundingSphere;if(_!==void 0){const v=new be;_.center!==void 0&&v.fromArray(_.center),l.boundingSphere=new c0(v,_.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class Qve extends Nf{constructor(e){super(e)}load(e,t,i,s){const o=this,l=this.path===""?eN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const u=new i_(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){let d=null;try{d=JSON.parse(h)}catch(_){s!==void 0&&s(_),console.error("THREE:ObjectLoader: Can't parse "+e+".",_.message);return}const m=d.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(d,t)},i,s)}async loadAsync(e,t){const i=this,s=this.path===""?eN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new i_(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const l=await o.loadAsync(e,t),u=JSON.parse(l),h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(u)}parse(e,t){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,s),l=this.parseImages(e.images,function(){t!==void 0&&t(d)}),u=this.parseTextures(e.textures,l),h=this.parseMaterials(e.materials,u),d=this.parseObject(e.object,o,h,u,i),m=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,m),t!==void 0){let _=!1;for(const v in l)if(l[v].data instanceof HTMLImageElement){_=!0;break}_===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,u,l,t),d=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,d),h}parseShapes(e){const t={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const o=new rb().fromJSON(e[i]);t[o.uuid]=o}return t}parseSkeletons(e,t){const i={},s={};if(t.traverse(function(o){o.isBone&&(s[o.uuid]=o)}),e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=new kR().fromJSON(e[o],s);i[u.uuid]=u}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new wj;for(let o=0,l=e.length;o<l;o++){let u;const h=e[o];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":u=s.parse(h);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:h.type in IH?u=IH[h.type].fromJSON(h,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${h.type}"`)}u.uuid=h.uuid,h.name!==void 0&&(u.name=h.name),u.isBufferGeometry===!0&&h.userData!==void 0&&(u.userData=h.userData),i[h.uuid]=u}}return i}parseMaterials(e,t){const i={},s={};if(e!==void 0){const o=new PR;o.setTextures(t);for(let l=0,u=e.length;l<u;l++){const h=e[l];if(h.type==="MultiMaterial"){const d=[];for(let m=0;m<h.materials.length;m++){const _=h.materials[m];i[_.uuid]===void 0&&(i[_.uuid]=o.parse(_)),d.push(i[_.uuid])}s[h.uuid]=d}else i[h.uuid]===void 0&&(i[h.uuid]=o.parse(h)),s[h.uuid]=i[h.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],o=Ex.parse(s);t[o.uuid]=o}return t}parseImages(e,t){const i=this,s={};let o;function l(h){return i.manager.itemStart(h),o.load(h,function(){i.manager.itemEnd(h)},void 0,function(){i.manager.itemError(h),i.manager.itemEnd(h)})}function u(h){if(typeof h=="string"){const d=h,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:i.resourcePath+d;return l(m)}else return h.data?{data:cT(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new WP(t);o=new $x(h),o.setCrossOrigin(this.crossOrigin);for(let d=0,m=e.length;d<m;d++){const _=e[d],v=_.url;if(Array.isArray(v)){const S=[];for(let x=0,w=v.length;x<w;x++){const A=v[x],k=u(A);k!==null&&(k instanceof HTMLImageElement?S.push(k):S.push(new CT(k.data,k.width,k.height)))}s[_.uuid]=new jy(S)}else{const S=u(_.url);s[_.uuid]=new jy(S)}}}return s}async parseImagesAsync(e){const t=this,i={};let s;async function o(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await s.loadAsync(h)}else return l.data?{data:cT(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){s=new $x(this.manager),s.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const h=e[l],d=h.url;if(Array.isArray(d)){const m=[];for(let _=0,v=d.length;_<v;_++){const S=d[_],x=await o(S);x!==null&&(x instanceof HTMLImageElement?m.push(x):m.push(new CT(x.data,x.width,x.height)))}i[h.uuid]=new jy(m)}else{const m=await o(h.url);i[h.uuid]=new jy(m)}}}return i}parseTextures(e,t){function i(o,l){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),l[o])}const s={};if(e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=e[o];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);const h=t[u.image],d=h.data;let m;Array.isArray(d)?(m=new jx,d.length===6&&(m.needsUpdate=!0)):(d&&d.data?m=new CT:m=new Fl,d&&(m.needsUpdate=!0)),m.source=h,m.uuid=u.uuid,u.name!==void 0&&(m.name=u.name),u.mapping!==void 0&&(m.mapping=i(u.mapping,qve)),u.offset!==void 0&&m.offset.fromArray(u.offset),u.repeat!==void 0&&m.repeat.fromArray(u.repeat),u.center!==void 0&&m.center.fromArray(u.center),u.rotation!==void 0&&(m.rotation=u.rotation),u.wrap!==void 0&&(m.wrapS=i(u.wrap[0],DH),m.wrapT=i(u.wrap[1],DH)),u.format!==void 0&&(m.format=u.format),u.type!==void 0&&(m.type=u.type),u.encoding!==void 0&&(m.encoding=u.encoding),u.minFilter!==void 0&&(m.minFilter=i(u.minFilter,NH)),u.magFilter!==void 0&&(m.magFilter=i(u.magFilter,NH)),u.anisotropy!==void 0&&(m.anisotropy=u.anisotropy),u.flipY!==void 0&&(m.flipY=u.flipY),u.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(m.unpackAlignment=u.unpackAlignment),u.userData!==void 0&&(m.userData=u.userData),s[u.uuid]=m}return s}parseObject(e,t,i,s,o){let l;function u(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function h(v){if(v!==void 0){if(Array.isArray(v)){const S=[];for(let x=0,w=v.length;x<w;x++){const A=v[x];i[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),S.push(i[A])}return S}return i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),i[v]}}function d(v){return s[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),s[v]}let m,_;switch(e.type){case"Scene":l=new mx,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new vn(e.background):l.background=d(e.background)),e.environment!==void 0&&(l.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new IR(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new AR(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":l=new ko(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new t0(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new Ej(e.color,e.intensity);break;case"DirectionalLight":l=new Sj(e.color,e.intensity);break;case"PointLight":l=new Tj(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new $j(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new bj(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new yj(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new BR().fromJSON(e);break;case"SkinnedMesh":m=u(e.geometry),_=h(e.material),l=new j7(m,_),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":m=u(e.geometry),_=h(e.material),l=new Sn(m,_);break;case"InstancedMesh":m=u(e.geometry),_=h(e.material);const v=e.count,S=e.instanceMatrix,x=e.instanceColor;l=new X7(m,_,v),l.instanceMatrix=new gb(new Float32Array(S.array),16),x!==void 0&&(l.instanceColor=new gb(new Float32Array(x.array),x.itemSize));break;case"LOD":l=new V7;break;case"Line":l=new wd(u(e.geometry),h(e.material));break;case"LineLoop":l=new Y7(u(e.geometry),h(e.material));break;case"LineSegments":l=new h0(u(e.geometry),h(e.material));break;case"PointCloud":case"Points":l=new K7(u(e.geometry),h(e.material));break;case"Sprite":l=new W7(h(e.material));break;case"Group":l=new dT;break;case"Bone":l=new RP;break;default:l=new as}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let S=0;S<v.length;S++)l.add(this.parseObject(v[S],t,i,s,o))}if(e.animations!==void 0){const v=e.animations;for(let S=0;S<v.length;S++){const x=v[S];l.animations.push(o[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const v=e.levels;for(let S=0;S<v.length;S++){const x=v[S],w=l.getObjectByProperty("uuid",x.object);w!==void 0&&l.addLevel(w,x.distance)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=t[i.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}}const qve={UVMapping:ER,CubeReflectionMapping:$v,CubeRefractionMapping:xv,EquirectangularReflectionMapping:ox,EquirectangularRefractionMapping:ax,CubeUVReflectionMapping:bS},DH={RepeatWrapping:WT,ClampToEdgeWrapping:ep,MirroredRepeatWrapping:lx},NH={NearestFilter:fa,NearestMipmapNearestFilter:KA,NearestMipmapLinearFilter:JA,LinearFilter:Xo,LinearMipmapNearestFilter:bP,LinearMipmapLinearFilter:wb};class Zve extends Nf{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=vb.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,fetch(e,u).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(h){vb.add(e,h),t&&t(h),o.manager.itemEnd(e)}).catch(function(h){s&&s(h),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}let sM;const jP={getContext:function(){return sM===void 0&&(sM=new(window.AudioContext||window.webkitAudioContext)),sM},setContext:function(n){sM=n}};class eye extends Nf{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new i_(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{const h=u.slice(0);jP.getContext().decodeAudioData(h,function(d){t(d)})}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}}class tye extends BR{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const s=new vn().set(e),o=new vn().set(t),l=new be(s.r,s.g,s.b),u=new be(o.r,o.g,o.b),h=Math.sqrt(Math.PI),d=h*Math.sqrt(.75);this.sh.coefficients[0].copy(l).add(u).multiplyScalar(h),this.sh.coefficients[1].copy(l).sub(u).multiplyScalar(d)}}class nye extends BR{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new vn().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const BH=new Ar,PH=new Ar,py=new Ar;class rye{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ko,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ko,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,py.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(eb*t.fov*.5)/t.zoom;let l,u;PH.elements[12]=-i,BH.elements[12]=i,l=-o*t.aspect+s,u=o*t.aspect+s,py.elements[0]=2*t.near/(u-l),py.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(py),l=-o*t.aspect-s,u=o*t.aspect-s,py.elements[0]=2*t.near/(u-l),py.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(py)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(PH),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(BH)}}class XP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=FH(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=FH();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function FH(){return(typeof performance>"u"?Date:performance).now()}const fy=new be,UH=new jo,iye=new be,my=new be;class sye extends as{constructor(){super(),this.type="AudioListener",this.context=jP.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new XP}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(fy,UH,iye),my.set(0,0,-1).applyQuaternion(UH),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(fy.x,s),t.positionY.linearRampToValueAtTime(fy.y,s),t.positionZ.linearRampToValueAtTime(fy.z,s),t.forwardX.linearRampToValueAtTime(my.x,s),t.forwardY.linearRampToValueAtTime(my.y,s),t.forwardZ.linearRampToValueAtTime(my.z,s),t.upX.linearRampToValueAtTime(i.x,s),t.upY.linearRampToValueAtTime(i.y,s),t.upZ.linearRampToValueAtTime(i.z,s)}else t.setPosition(fy.x,fy.y,fy.z),t.setOrientation(my.x,my.y,my.z,i.x,i.y,i.z)}}class Cj extends as{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const gy=new be,zH=new jo,oye=new be,_y=new be;class aye extends Cj{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(gy,zH,oye),_y.set(0,0,1).applyQuaternion(zH);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(gy.x,i),t.positionY.linearRampToValueAtTime(gy.y,i),t.positionZ.linearRampToValueAtTime(gy.z,i),t.orientationX.linearRampToValueAtTime(_y.x,i),t.orientationY.linearRampToValueAtTime(_y.y,i),t.orientationZ.linearRampToValueAtTime(_y.z,i)}else t.setPosition(gy.x,gy.y,gy.z),t.setOrientation(_y.x,_y.y,_y.z)}}class lye{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class Mj{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,o,l;switch(t){case"quaternion":s=this._slerp,o=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,o=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,o=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=o,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,o=e*s+s;let l=this.cumulativeWeight;if(l===0){for(let u=0;u!==s;++u)i[o+u]=i[u];l=t}else{l+=t;const u=t/l;this._mixBufferRegion(i,o,0,u,s)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,o=this.cumulativeWeight,l=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const h=t*this._origIndex;this._mixBufferRegion(i,s,h,1-o,t)}l>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let h=t,d=t+t;h!==d;++h)if(i[h]!==i[h+t]){u.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let o=i,l=s;o!==l;++o)t[o]=t[s+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,o){if(s>=.5)for(let l=0;l!==o;++l)e[t+l]=e[i+l]}_slerp(e,t,i,s){jo.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,o){const l=this._workIndex*o;jo.multiplyQuaternionsFlat(e,l,e,t,e,i),jo.slerpFlat(e,t,e,t,e,l,s)}_lerp(e,t,i,s,o){const l=1-s;for(let u=0;u!==o;++u){const h=t+u;e[h]=e[h]*l+e[i+u]*s}}_lerpAdditive(e,t,i,s,o){for(let l=0;l!==o;++l){const u=t+l;e[u]=e[u]+e[i+l]*s}}}const YP="\\[\\]\\.:\\/",uye=new RegExp("["+YP+"]","g"),KP="[^"+YP+"]",cye="[^"+YP.replace("\\.","")+"]",hye=/((?:WC+[\/:])*)/.source.replace("WC",KP),dye=/(WCOD+)?/.source.replace("WCOD",cye),pye=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",KP),fye=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",KP),mye=new RegExp("^"+hye+dye+pye+fye+"$"),gye=["material","materials","bones"];class _ye{constructor(e,t,i){const s=i||ds.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class ds{constructor(e,t,i){this.path=t,this.parsedPath=i||ds.parseTrackName(t),this.node=ds.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new ds.Composite(e,t,i):new ds(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(uye,"")}static parseTrackName(e){const t=mye.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=i.nodeName.substring(s+1);gye.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const h=i(u.children);if(h)return h}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=ds.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let d=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===d){d=m;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const l=e[s];if(l===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ds.Composite=_ye;ds.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ds.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ds.prototype.GetterByBindingType=[ds.prototype._getValue_direct,ds.prototype._getValue_array,ds.prototype._getValue_arrayElement,ds.prototype._getValue_toArray];ds.prototype.SetterByBindingTypeAndVersioning=[[ds.prototype._setValue_direct,ds.prototype._setValue_direct_setNeedsUpdate,ds.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ds.prototype._setValue_array,ds.prototype._setValue_array_setNeedsUpdate,ds.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ds.prototype._setValue_arrayElement,ds.prototype._setValue_arrayElement_setNeedsUpdate,ds.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ds.prototype._setValue_fromArray,ds.prototype._setValue_fromArray_setNeedsUpdate,ds.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class vye{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Cf(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length;let u,h=e.length,d=this.nCachedObjects_;for(let m=0,_=arguments.length;m!==_;++m){const v=arguments[m],S=v.uuid;let x=t[S];if(x===void 0){x=h++,t[S]=x,e.push(v);for(let w=0,A=l;w!==A;++w)o[w].push(new ds(v,i[w],s[w]))}else if(x<d){u=e[x];const w=--d,A=e[w];t[A.uuid]=x,e[x]=A,t[S]=w,e[w]=v;for(let k=0,O=l;k!==O;++k){const D=o[k],L=D[w];let z=D[x];D[x]=L,z===void 0&&(z=new ds(v,i[k],s[k])),D[w]=z}}else e[x]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],d=h.uuid,m=t[d];if(m!==void 0&&m>=o){const _=o++,v=e[_];t[v.uuid]=m,e[m]=v,t[d]=_,e[_]=h;for(let S=0,x=s;S!==x;++S){const w=i[S],A=w[_],k=w[m];w[m]=A,w[_]=k}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_,l=e.length;for(let u=0,h=arguments.length;u!==h;++u){const d=arguments[u],m=d.uuid,_=t[m];if(_!==void 0)if(delete t[m],_<o){const v=--o,S=e[v],x=--l,w=e[x];t[S.uuid]=_,e[_]=S,t[w.uuid]=v,e[v]=w,e.pop();for(let A=0,k=s;A!==k;++A){const O=i[A],D=O[v],L=O[x];O[_]=D,O[v]=L,O.pop()}}else{const v=--l,S=e[v];v>0&&(t[S.uuid]=_),e[_]=S,e.pop();for(let x=0,w=s;x!==w;++x){const A=i[x];A[_]=A[v],A.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const i=this._bindingsIndicesByPath;let s=i[e];const o=this._bindings;if(s!==void 0)return o[s];const l=this._paths,u=this._parsedPaths,h=this._objects,d=h.length,m=this.nCachedObjects_,_=new Array(d);s=o.length,i[e]=s,l.push(e),u.push(t),o.push(_);for(let v=m,S=h.length;v!==S;++v){const x=h[v];_[v]=new ds(x,e,t)}return _}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const s=this._paths,o=this._parsedPaths,l=this._bindings,u=l.length-1,h=l[u],d=e[u];t[d]=i,l[i]=h,l.pop(),o[i]=o[u],o.pop(),s[i]=s[u],s.pop()}}}class yye{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const o=t.tracks,l=o.length,u=new Array(l),h={endingStart:Wy,endingEnd:Wy};for(let d=0;d!==l;++d){const m=o[d].createInterpolant(null);u[d]=m,m.settings=h}this._interpolantSettings=h,this._interpolants=u,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=$7,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const s=this._clip.duration,o=e._clip.duration,l=o/s,u=s/o;e.warp(1,l,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,o=s.time,l=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=s._lendControlInterpolant(),this._timeScaleInterpolant=u);const h=u.parameterPositions,d=u.sampleValues;return h[0]=o,h[1]=o+i,d[0]=e/l,d[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const h=(e-o)*i;if(h<0||i===0)return;this._startTime=null,t=i*h}t*=this._updateTimeScale(e);const l=this._updateTime(t),u=this._updateWeight(e);if(u>0){const h=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case SP:for(let m=0,_=h.length;m!==_;++m)h[m].evaluate(l),d[m].accumulateAdditive(u);break;case $R:default:for(let m=0,_=h.length;m!==_;++m)h[m].evaluate(l),d[m].accumulate(s,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,o=this._loopCount;const l=i===x7;if(e===0)return o===-1?s:l&&(o&1)===1?t-s:s;if(i===E7){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),s>=t||s<0){const u=Math.floor(s/t);s-=t*u,o+=Math.abs(u);const h=this.repetitions-o;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const d=e<0;this._setEndings(d,!d,l)}else this._setEndings(!1,!1,l);this._loopCount=o,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=s;if(l&&(o&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=Vy,s.endingEnd=Vy):(e?s.endingStart=this.zeroSlopeAtStart?Vy:Wy:s.endingStart=hx,t?s.endingEnd=this.zeroSlopeAtEnd?Vy:Wy:s.endingEnd=hx)}_scheduleFading(e,t,i){const s=this._mixer,o=s.time;let l=this._weightInterpolant;l===null&&(l=s._lendControlInterpolant(),this._weightInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=o,h[0]=t,u[1]=o+e,h[1]=i,this}}const bye=new Float32Array(1);class Tye extends Df{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,o=s.length,l=e._propertyBindings,u=e._interpolants,h=i.uuid,d=this._bindingsByRootAndName;let m=d[h];m===void 0&&(m={},d[h]=m);for(let _=0;_!==o;++_){const v=s[_],S=v.name;let x=m[S];if(x!==void 0)++x.referenceCount,l[_]=x;else{if(x=l[_],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,h,S));continue}const w=t&&t._propertyBindings[_].binding.parsedPath;x=new Mj(ds.create(i,S,w),v.ValueTypeName,v.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,h,S),l[_]=x}u[_].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,o=this._actionsByClip[s];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,o=this._actionsByClip;let l=o[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=l;else{const u=l.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=s.length,s.push(e),l.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,l=this._actionsByClip,u=l[o],h=u.knownActions,d=h[h.length-1],m=e._byClipCacheIndex;d._byClipCacheIndex=m,h[m]=d,h.pop(),e._byClipCacheIndex=null;const _=u.actionByRoot,v=(e._localRoot||this._root).uuid;delete _[v],h.length===0&&delete l[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,o=this._bindings;let l=s[t];l===void 0&&(l={},s[t]=l),l[i]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,o=i.path,l=this._bindingsByRootAndName,u=l[s],h=t[t.length-1],d=e._cacheIndex;h._cacheIndex=d,t[d]=h,t.pop(),delete u[o],Object.keys(u).length===0&&delete l[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new HP(new Float32Array(2),new Float32Array(2),1,bye),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,o=t[s];e.__cacheIndex=s,t[s]=e,o.__cacheIndex=i,t[i]=o}clipAction(e,t,i){const s=t||this._root,o=s.uuid;let l=typeof e=="string"?Ex.findByName(s,e):e;const u=l!==null?l.uuid:e,h=this._actionsByClip[u];let d=null;if(i===void 0&&(l!==null?i=l.blendMode:i=$R),h!==void 0){const _=h.actionByRoot[o];if(_!==void 0&&_.blendMode===i)return _;d=h.knownActions[0],l===null&&(l=d._clip)}if(l===null)return null;const m=new yye(this,l,t,i);return this._bindAction(m,d),this._addInactiveAction(m,u,o),m}existingAction(e,t){const i=t||this._root,s=i.uuid,o=typeof e=="string"?Ex.findByName(i,e):e,l=o?o.uuid:e,u=this._actionsByClip[l];return u!==void 0&&u.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,o=Math.sign(e),l=this._accuIndex^=1;for(let d=0;d!==i;++d)t[d]._update(s,e,o,l);const u=this._bindings,h=this._nActiveBindings;for(let d=0;d!==h;++d)u[d].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,o=s[i];if(o!==void 0){const l=o.knownActions;for(let u=0,h=l.length;u!==h;++u){const d=l[u];this._deactivateAction(d);const m=d._cacheIndex,_=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,_._cacheIndex=m,t[m]=_,t.pop(),this._removeInactiveBindingsForAction(d)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const l in i){const u=i[l].actionByRoot,h=u[t];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const s=this._bindingsByRootAndName,o=s[t];if(o!==void 0)for(const l in o){const u=o[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class os{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new os(this.value.clone===void 0?this.value:this.value.clone())}}let Sye=0;class Eye extends Df{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Sye++}),this.name="",this.usage=dx,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,s=t.length;i<s;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class ZA extends RR{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class $ye{constructor(e,t,i,s,o){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=s,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class JP{constructor(e,t,i=0,s=1/0){this.ray=new Wx(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new nb,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return tN(e,this,i,t),i.sort(HH),i}intersectObjects(e,t=!0,i=[]){for(let s=0,o=e.length;s<o;s++)tN(e[s],this,i,t);return i.sort(HH),i}}function HH(n,e){return n.distance-e.distance}function tN(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const s=n.children;for(let o=0,l=s.length;o<l;o++)tN(s[o],e,t,!0)}}class nN{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Gu(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class xye{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const GH=new Dt;class wye{constructor(e=new Dt(1/0,1/0),t=new Dt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=GH.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return GH.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const WH=new be,oM=new be;class QP{constructor(e=new be,t=new be){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){WH.subVectors(e,this.start),oM.subVectors(this.end,this.start);const i=oM.dot(oM);let s=oM.dot(WH)/i;return t&&(s=Gu(s,0,1)),s}closestPointToPoint(e,t,i){const s=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const VH=new be;class Cye extends as{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const i=new Or,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,u=1,h=32;l<h;l++,u++){const d=l/h*Math.PI*2,m=u/h*Math.PI*2;s.push(Math.cos(d),Math.sin(d),1,Math.cos(m),Math.sin(m),1)}i.setAttribute("position",new Fn(s,3));const o=new Rd({fog:!1,toneMapped:!1});this.cone=new h0(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),VH.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(VH),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Y_=new be,aM=new Ar,TO=new Ar;class Mye extends h0{constructor(e){const t=Aj(e),i=new Or,s=[],o=[],l=new vn(0,0,1),u=new vn(0,1,0);for(let d=0;d<t.length;d++){const m=t[d];m.parent&&m.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(l.r,l.g,l.b),o.push(u.r,u.g,u.b))}i.setAttribute("position",new Fn(s,3)),i.setAttribute("color",new Fn(o,3));const h=new Rd({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,h),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,s=i.getAttribute("position");TO.copy(this.root.matrixWorld).invert();for(let o=0,l=0;o<t.length;o++){const u=t[o];u.parent&&u.parent.isBone&&(aM.multiplyMatrices(TO,u.matrixWorld),Y_.setFromMatrixPosition(aM),s.setXYZ(l,Y_.x,Y_.y,Y_.z),aM.multiplyMatrices(TO,u.parent.matrixWorld),Y_.setFromMatrixPosition(aM),s.setXYZ(l+1,Y_.x,Y_.y,Y_.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function Aj(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,Aj(n.children[t]));return e}class Aye extends Sn{constructor(e,t,i){const s=new _g(t,4,2),o=new yg({wireframe:!0,fog:!1,toneMapped:!1});super(s,o),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Iye=new be,jH=new vn,XH=new vn;class Rye extends as{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const s=new cg(t);s.rotateY(Math.PI*.5),this.material=new yg({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=s.getAttribute("position"),l=new Float32Array(o.count*3);s.setAttribute("color",new Is(l,3)),this.add(new Sn(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");jH.copy(this.light.color),XH.copy(this.light.groundColor);for(let i=0,s=t.count;i<s;i++){const o=i<s/2?jH:XH;t.setXYZ(i,o.r,o.g,o.b)}t.needsUpdate=!0}e.lookAt(Iye.setFromMatrixPosition(this.light.matrixWorld).negate())}}class kye extends h0{constructor(e=10,t=10,i=4473924,s=8947848){i=new vn(i),s=new vn(s);const o=t/2,l=e/t,u=e/2,h=[],d=[];for(let v=0,S=0,x=-u;v<=t;v++,x+=l){h.push(-u,0,x,u,0,x),h.push(x,0,-u,x,0,u);const w=v===o?i:s;w.toArray(d,S),S+=3,w.toArray(d,S),S+=3,w.toArray(d,S),S+=3,w.toArray(d,S),S+=3}const m=new Or;m.setAttribute("position",new Fn(h,3)),m.setAttribute("color",new Fn(d,3));const _=new Rd({vertexColors:!0,toneMapped:!1});super(m,_),this.type="GridHelper"}}class Oye extends h0{constructor(e=10,t=16,i=8,s=64,o=4473924,l=8947848){o=new vn(o),l=new vn(l);const u=[],h=[];for(let _=0;_<=t;_++){const v=_/t*(Math.PI*2),S=Math.sin(v)*e,x=Math.cos(v)*e;u.push(0,0,0),u.push(S,0,x);const w=_&1?o:l;h.push(w.r,w.g,w.b),h.push(w.r,w.g,w.b)}for(let _=0;_<=i;_++){const v=_&1?o:l,S=e-e/i*_;for(let x=0;x<s;x++){let w=x/s*(Math.PI*2),A=Math.sin(w)*S,k=Math.cos(w)*S;u.push(A,0,k),h.push(v.r,v.g,v.b),w=(x+1)/s*(Math.PI*2),A=Math.sin(w)*S,k=Math.cos(w)*S,u.push(A,0,k),h.push(v.r,v.g,v.b)}}const d=new Or;d.setAttribute("position",new Fn(u,3)),d.setAttribute("color",new Fn(h,3));const m=new Rd({vertexColors:!0,toneMapped:!1});super(d,m),this.type="PolarGridHelper"}}const YH=new be,lM=new be,KH=new be;class Lye extends as{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1);let s=new Or;s.setAttribute("position",new Fn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new Rd({fog:!1,toneMapped:!1});this.lightPlane=new wd(s,o),this.add(this.lightPlane),s=new Or,s.setAttribute("position",new Fn([0,0,0,0,0,1],3)),this.targetLine=new wd(s,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){YH.setFromMatrixPosition(this.light.matrixWorld),lM.setFromMatrixPosition(this.light.target.matrixWorld),KH.subVectors(lM,YH),this.lightPlane.lookAt(lM),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(lM),this.targetLine.scale.z=KH.length()}}const uM=new be,ou=new TS;class Dye extends h0{constructor(e){const t=new Or,i=new Rd({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],o=[],l={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(x,w){h(x),h(w)}function h(x){s.push(0,0,0),o.push(0,0,0),l[x]===void 0&&(l[x]=[]),l[x].push(s.length/3-1)}t.setAttribute("position",new Fn(s,3)),t.setAttribute("color",new Fn(o,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const d=new vn(16755200),m=new vn(16711680),_=new vn(43775),v=new vn(16777215),S=new vn(3355443);this.setColors(d,m,_,v,S)}setColors(e,t,i,s,o){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,o.r,o.g,o.b),l.setXYZ(41,o.r,o.g,o.b),l.setXYZ(42,o.r,o.g,o.b),l.setXYZ(43,o.r,o.g,o.b),l.setXYZ(44,o.r,o.g,o.b),l.setXYZ(45,o.r,o.g,o.b),l.setXYZ(46,o.r,o.g,o.b),l.setXYZ(47,o.r,o.g,o.b),l.setXYZ(48,o.r,o.g,o.b),l.setXYZ(49,o.r,o.g,o.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,s=1;ou.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Uu("c",t,e,ou,0,0,-1),Uu("t",t,e,ou,0,0,1),Uu("n1",t,e,ou,-i,-s,-1),Uu("n2",t,e,ou,i,-s,-1),Uu("n3",t,e,ou,-i,s,-1),Uu("n4",t,e,ou,i,s,-1),Uu("f1",t,e,ou,-i,-s,1),Uu("f2",t,e,ou,i,-s,1),Uu("f3",t,e,ou,-i,s,1),Uu("f4",t,e,ou,i,s,1),Uu("u1",t,e,ou,i*.7,s*1.1,-1),Uu("u2",t,e,ou,-i*.7,s*1.1,-1),Uu("u3",t,e,ou,0,s*2,-1),Uu("cf1",t,e,ou,-i,0,1),Uu("cf2",t,e,ou,i,0,1),Uu("cf3",t,e,ou,0,-s,1),Uu("cf4",t,e,ou,0,s,1),Uu("cn1",t,e,ou,-i,0,-1),Uu("cn2",t,e,ou,i,0,-1),Uu("cn3",t,e,ou,0,-s,-1),Uu("cn4",t,e,ou,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Uu(n,e,t,i,s,o,l){uM.set(s,o,l).unproject(i);const u=e[n];if(u!==void 0){const h=t.getAttribute("position");for(let d=0,m=u.length;d<m;d++)h.setXYZ(u[d],uM.x,uM.y,uM.z)}}const cM=new vg;class Nye extends h0{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),o=new Or;o.setIndex(new Is(i,1)),o.setAttribute("position",new Is(s,3)),super(o,new Rd({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&cM.setFromObject(this.object),cM.isEmpty())return;const t=cM.min,i=cM.max,s=this.geometry.attributes.position,o=s.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=t.x,o[4]=i.y,o[5]=i.z,o[6]=t.x,o[7]=t.y,o[8]=i.z,o[9]=i.x,o[10]=t.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=t.z,o[15]=t.x,o[16]=i.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=i.x,o[22]=t.y,o[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}}class Bye extends h0{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Or;o.setIndex(new Is(i,1)),o.setAttribute("position",new Fn(s,3)),super(o,new Rd({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class Pye extends wd{constructor(e,t=1,i=16776960){const s=i,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new Or;l.setAttribute("position",new Fn(o,3)),l.computeBoundingSphere(),super(l,new Rd({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new Or;h.setAttribute("position",new Fn(u,3)),h.computeBoundingSphere(),this.add(new Sn(h,new yg({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}}const JH=new be;let hM,SO;class Fye extends as{constructor(e=new be(0,0,1),t=new be(0,0,0),i=1,s=16776960,o=i*.2,l=o*.2){super(),this.type="ArrowHelper",hM===void 0&&(hM=new Or,hM.setAttribute("position",new Fn([0,0,0,0,1,0],3)),SO=new pa(0,.5,1,5,1),SO.translate(0,-.5,0)),this.position.copy(t),this.line=new wd(hM,new Rd({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Sn(SO,new yg({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{JH.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(JH,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class Uye extends h0{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Or;s.setAttribute("position",new Fn(t,3)),s.setAttribute("color",new Fn(i,3));const o=new Rd({vertexColors:!0,toneMapped:!1});super(s,o),this.type="AxesHelper"}setColors(e,t,i){const s=new vn,o=this.geometry.attributes.color.array;return s.set(e),s.toArray(o,0),s.toArray(o,3),s.set(t),s.toArray(o,6),s.toArray(o,9),s.set(i),s.toArray(o,12),s.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class zye{constructor(){this.type="ShapePath",this.color=new vn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new gx,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this.currentPath.quadraticCurveTo(e,t,i,s),this}bezierCurveTo(e,t,i,s,o,l){return this.currentPath.bezierCurveTo(e,t,i,s,o,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function i(O){const D=[];for(let L=0,z=O.length;L<z;L++){const H=O[L],U=new rb;U.curves=H.curves,D.push(U)}return D}function s(O,D){const L=D.length;let z=!1;for(let H=L-1,U=0;U<L;H=U++){let P=D[H],K=D[U],ee=K.x-P.x,re=K.y-P.y;if(Math.abs(re)>Number.EPSILON){if(re<0&&(P=D[U],ee=-ee,K=D[H],re=-re),O.y<P.y||O.y>K.y)continue;if(O.y===P.y){if(O.x===P.x)return!0}else{const ie=re*(O.x-P.x)-ee*(O.y-P.y);if(ie===0)return!0;if(ie<0)continue;z=!z}}else{if(O.y!==P.y)continue;if(K.x<=O.x&&O.x<=P.x||P.x<=O.x&&O.x<=K.x)return!0}}return z}const o=n0.isClockWise,l=this.subPaths;if(l.length===0)return[];if(t===!0)return i(l);let u,h,d;const m=[];if(l.length===1)return h=l[0],d=new rb,d.curves=h.curves,m.push(d),m;let _=!o(l[0].getPoints());_=e?!_:_;const v=[],S=[];let x=[],w=0,A;S[w]=void 0,x[w]=[];for(let O=0,D=l.length;O<D;O++)h=l[O],A=h.getPoints(),u=o(A),u=e?!u:u,u?(!_&&S[w]&&w++,S[w]={s:new rb,p:A},S[w].s.curves=h.curves,_&&w++,x[w]=[]):x[w].push({h,p:A[0]});if(!S[0])return i(l);if(S.length>1){let O=!1,D=0;for(let L=0,z=S.length;L<z;L++)v[L]=[];for(let L=0,z=S.length;L<z;L++){const H=x[L];for(let U=0;U<H.length;U++){const P=H[U];let K=!0;for(let ee=0;ee<S.length;ee++)s(P.p,S[ee].p)&&(L!==ee&&D++,K?(K=!1,v[ee].push(P)):O=!0);K&&v[L].push(P)}}D>0&&O===!1&&(x=v)}let k;for(let O=0,D=S.length;O<D;O++){d=S[O].s,m.push(d),k=x[O];for(let L=0,z=k.length;L<z;L++)d.holes.push(k[L].h)}return m}}const j0=Hye();function Hye(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),s=new Uint32Array(512);for(let h=0;h<256;++h){const d=h-127;d<-27?(i[h]=0,i[h|256]=32768,s[h]=24,s[h|256]=24):d<-14?(i[h]=1024>>-d-14,i[h|256]=1024>>-d-14|32768,s[h]=-d-1,s[h|256]=-d-1):d<=15?(i[h]=d+15<<10,i[h|256]=d+15<<10|32768,s[h]=13,s[h|256]=13):d<128?(i[h]=31744,i[h|256]=64512,s[h]=24,s[h|256]=24):(i[h]=31744,i[h|256]=64512,s[h]=13,s[h|256]=13)}const o=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let h=1;h<1024;++h){let d=h<<13,m=0;for(;!(d&8388608);)d<<=1,m-=8388608;d&=-8388609,m+=947912704,o[h]=d|m}for(let h=1024;h<2048;++h)o[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)l[h]=h<<23;l[31]=1199570944,l[32]=2147483648;for(let h=33;h<63;++h)l[h]=2147483648+(h-32<<23);l[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(u[h]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:o,exponentTable:l,offsetTable:u}}function Gye(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Gu(n,-65504,65504),j0.floatView[0]=n;const e=j0.uint32View[0],t=e>>23&511;return j0.baseTable[t]+((e&8388607)>>j0.shiftTable[t])}function Wye(n){const e=n>>10;return j0.uint32View[0]=j0.mantissaTable[j0.offsetTable[e]+(n&1023)]+j0.exponentTable[e],j0.floatView[0]}var Vye=Object.freeze({__proto__:null,toHalfFloat:Gye,fromHalfFloat:Wye});class jye extends Or{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}}class Xye extends Or{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}}function Yye(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function Kye(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function Jye(){console.error("THREE.ImmediateRenderObject has been removed.")}class Qye extends cu{constructor(e,t,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,i),this.samples=4}}class qye extends Gx{constructor(e,t,i,s){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,i,s)}}class Zye extends xR{constructor(e,t,i,s){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:yS}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=yS);const ebe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:yP,AddEquation:Oy,AddOperation:r7,AdditiveAnimationBlendMode:SP,AdditiveBlending:XA,AlphaFormat:p7,AlwaysDepth:J9,AlwaysStencilFunc:C7,AmbientLight:Ej,AmbientLightProbe:nye,AnimationClip:Ex,AnimationLoader:Gve,AnimationMixer:Tye,AnimationObjectGroup:vye,AnimationUtils:Fve,ArcCurve:Q7,ArrayCamera:z7,ArrowHelper:Fye,Audio:Cj,AudioAnalyser:lye,AudioContext:jP,AudioListener:sye,AudioLoader:eye,AxesHelper:Uye,BackSide:Gc,BasicDepthPacking:Dv,BasicShadowMap:N9,Bone:RP,BooleanKeyframeTrack:Ab,Box2:wye,Box3:vg,Box3Helper:Bye,BoxBufferGeometry:Pa,BoxGeometry:Pa,BoxHelper:Nye,BufferAttribute:Is,BufferGeometry:Or,BufferGeometryLoader:wj,ByteType:l7,Cache:vb,Camera:TS,CameraHelper:Dye,CanvasTexture:uve,CapsuleBufferGeometry:XT,CapsuleGeometry:XT,CatmullRomCurve3:q7,CineonToneMapping:o7,CircleBufferGeometry:YT,CircleGeometry:YT,ClampToEdgeWrapping:ep,Clock:XP,Color:vn,ColorKeyframeTrack:GP,ColorManagement:am,CompressedTexture:J7,CompressedTextureLoader:Wve,ConeBufferGeometry:KT,ConeGeometry:KT,CubeCamera:k7,CubeReflectionMapping:$v,CubeRefractionMapping:xv,CubeTexture:jx,CubeTextureLoader:Vve,CubeUVReflectionMapping:bS,CubicBezierCurve:OP,CubicBezierCurve3:Z7,CubicInterpolant:mj,CullFaceBack:bD,CullFaceFront:D9,CullFaceFrontBack:fpe,CullFaceNone:L9,Curve:bg,CurvePath:tj,CustomBlending:P9,CustomToneMapping:a7,CylinderBufferGeometry:pa,CylinderGeometry:pa,Cylindrical:xye,Data3DTexture:xR,DataArrayTexture:Gx,DataTexture:CT,DataTexture2DArray:qye,DataTexture3D:Zye,DataTextureLoader:jve,DataUtils:Vye,DecrementStencilOp:Cpe,DecrementWrapStencilOp:Ape,DefaultLoadingManager:vj,DepthFormat:yv,DepthStencilFormat:wv,DepthTexture:MP,DirectionalLight:Sj,DirectionalLightHelper:Lye,DiscreteInterpolant:gj,DodecahedronBufferGeometry:JT,DodecahedronGeometry:JT,DoubleSide:tp,DstAlphaFactor:W9,DstColorFactor:j9,DynamicCopyUsage:Gpe,DynamicDrawUsage:Zy,DynamicReadUsage:Upe,EdgesGeometry:nj,EllipseCurve:LR,EqualDepth:q9,EqualStencilFunc:Ope,EquirectangularReflectionMapping:ox,EquirectangularRefractionMapping:ax,Euler:Mb,EventDispatcher:Df,ExtrudeBufferGeometry:QT,ExtrudeGeometry:QT,FileLoader:i_,FlatShading:B9,Float16BufferAttribute:xfe,Float32BufferAttribute:Fn,Float64BufferAttribute:wfe,FloatType:Qg,Fog:IR,FogExp2:AR,Font:Kye,FontLoader:Yye,FramebufferTexture:lve,FrontSide:s0,Frustum:wR,GLBufferAttribute:$ye,GLSL1:Vpe,GLSL3:jD,GreaterDepth:e7,GreaterEqualDepth:Z9,GreaterEqualStencilFunc:Bpe,GreaterStencilFunc:Dpe,GridHelper:kye,Group:dT,HalfFloatType:mb,HemisphereLight:yj,HemisphereLightHelper:Rye,HemisphereLightProbe:tye,IcosahedronBufferGeometry:qT,IcosahedronGeometry:qT,ImageBitmapLoader:Zve,ImageLoader:$x,ImageUtils:$P,ImmediateRenderObject:Jye,IncrementStencilOp:wpe,IncrementWrapStencilOp:Mpe,InstancedBufferAttribute:gb,InstancedBufferGeometry:FR,InstancedInterleavedBuffer:ZA,InstancedMesh:X7,Int16BufferAttribute:Efe,Int32BufferAttribute:$fe,Int8BufferAttribute:bfe,IntType:c7,InterleavedBuffer:RR,InterleavedBufferAttribute:Sf,Interpolant:Yx,InterpolateDiscrete:ux,InterpolateLinear:cx,InterpolateSmooth:ZM,InvertStencilOp:Ipe,KeepStencilOp:eA,KeyframeTrack:Tg,LOD:V7,LatheBufferGeometry:_b,LatheGeometry:_b,Layers:nb,LessDepth:Q9,LessEqualDepth:YA,LessEqualStencilFunc:Lpe,LessStencilFunc:kpe,Light:Nv,LightProbe:BR,Line:wd,Line3:QP,LineBasicMaterial:Rd,LineCurve:DR,LineCurve3:ej,LineDashedMaterial:pj,LineLoop:Y7,LineSegments:h0,LinearEncoding:$m,LinearFilter:Xo,LinearInterpolant:HP,LinearMipMapLinearFilter:ype,LinearMipMapNearestFilter:vpe,LinearMipmapLinearFilter:wb,LinearMipmapNearestFilter:bP,LinearSRGBColorSpace:lv,LinearToneMapping:i7,Loader:Nf,LoaderUtils:eN,LoadingManager:WP,LoopOnce:E7,LoopPingPong:x7,LoopRepeat:$7,LuminanceAlphaFormat:g7,LuminanceFormat:m7,MOUSE:My,Material:Wc,MaterialLoader:PR,MathUtils:A7,Matrix3:np,Matrix4:Ar,MaxEquation:$D,Mesh:Sn,MeshBasicMaterial:yg,MeshDepthMaterial:Xx,MeshDistanceMaterial:MR,MeshLambertMaterial:hj,MeshMatcapMaterial:dj,MeshNormalMaterial:FP,MeshPhongMaterial:uj,MeshPhysicalMaterial:lj,MeshStandardMaterial:bx,MeshToonMaterial:cj,MinEquation:ED,MirroredRepeatWrapping:lx,MixOperation:n7,MultiplyBlending:SD,MultiplyOperation:Hx,NearestFilter:fa,NearestMipMapLinearFilter:_pe,NearestMipMapNearestFilter:gpe,NearestMipmapLinearFilter:JA,NearestMipmapNearestFilter:KA,NeverDepth:K9,NeverStencilFunc:Rpe,NoBlending:op,NoColorSpace:Epe,NoToneMapping:fg,NormalAnimationBlendMode:$R,NormalBlending:Z0,NotEqualDepth:t7,NotEqualStencilFunc:Npe,NumberKeyframeTrack:Tx,Object3D:as,ObjectLoader:Qve,ObjectSpaceNormalMap:w7,OctahedronBufferGeometry:cg,OctahedronGeometry:cg,OneFactor:z9,OneMinusDstAlphaFactor:V9,OneMinusDstColorFactor:X9,OneMinusSrcAlphaFactor:SR,OneMinusSrcColorFactor:G9,OrthographicCamera:t0,PCFShadowMap:bR,PCFSoftShadowMap:x$,PMREMGenerator:YD,ParametricGeometry:jye,Path:gx,PerspectiveCamera:ko,Plane:W0,PlaneBufferGeometry:gg,PlaneGeometry:gg,PlaneHelper:Pye,PointLight:Tj,PointLightHelper:Aye,Points:K7,PointsMaterial:OR,PolarGridHelper:Oye,PolyhedronBufferGeometry:o0,PolyhedronGeometry:o0,PositionalAudio:aye,PropertyBinding:ds,PropertyMixer:Mj,QuadraticBezierCurve:LP,QuadraticBezierCurve3:DP,Quaternion:jo,QuaternionKeyframeTrack:ES,QuaternionLinearInterpolant:_j,REVISION:yS,RGBADepthPacking:VT,RGBAFormat:Pp,RGBAIntegerFormat:T7,RGBA_ASTC_10x10_Format:HD,RGBA_ASTC_10x5_Format:FD,RGBA_ASTC_10x6_Format:UD,RGBA_ASTC_10x8_Format:zD,RGBA_ASTC_12x10_Format:GD,RGBA_ASTC_12x12_Format:WD,RGBA_ASTC_4x4_Format:RD,RGBA_ASTC_5x4_Format:kD,RGBA_ASTC_5x5_Format:OD,RGBA_ASTC_6x5_Format:LD,RGBA_ASTC_6x6_Format:DD,RGBA_ASTC_8x5_Format:ND,RGBA_ASTC_8x6_Format:BD,RGBA_ASTC_8x8_Format:PD,RGBA_BPTC_Format:VD,RGBA_ETC2_EAC_Format:ID,RGBA_PVRTC_2BPPV1_Format:MD,RGBA_PVRTC_4BPPV1_Format:CD,RGBA_S3TC_DXT1_Format:JM,RGBA_S3TC_DXT3_Format:QM,RGBA_S3TC_DXT5_Format:qM,RGBFormat:f7,RGB_ETC1_Format:S7,RGB_ETC2_Format:AD,RGB_PVRTC_2BPPV1_Format:wD,RGB_PVRTC_4BPPV1_Format:xD,RGB_S3TC_DXT1_Format:KM,RGFormat:y7,RGIntegerFormat:b7,RawShaderMaterial:aj,Ray:Wx,Raycaster:JP,RectAreaLight:$j,RedFormat:_7,RedIntegerFormat:v7,ReinhardToneMapping:s7,RepeatWrapping:WT,ReplaceStencilOp:xpe,ReverseSubtractEquation:vP,RingBufferGeometry:ZT,RingGeometry:ZT,SRGBColorSpace:Wg,Scene:mx,ShaderChunk:Si,ShaderLib:Zd,ShaderMaterial:mh,ShadowMaterial:oj,Shape:rb,ShapeBufferGeometry:eS,ShapeGeometry:eS,ShapePath:zye,ShapeUtils:n0,ShortType:u7,Skeleton:kR,SkeletonHelper:Mye,SkinnedMesh:j7,SmoothShading:mpe,Source:jy,Sphere:c0,SphereBufferGeometry:_g,SphereGeometry:_g,Spherical:nN,SphericalHarmonics3:xj,SplineCurve:NP,SpotLight:bj,SpotLightHelper:Cye,Sprite:W7,SpriteMaterial:IP,SrcAlphaFactor:TR,SrcAlphaSaturateFactor:Y9,SrcColorFactor:H9,StaticCopyUsage:Hpe,StaticDrawUsage:dx,StaticReadUsage:Fpe,StereoCamera:rye,StreamCopyUsage:Wpe,StreamDrawUsage:Ppe,StreamReadUsage:zpe,StringKeyframeTrack:Ib,SubtractEquation:F9,SubtractiveBlending:TD,TOUCH:Ay,TangentSpaceNormalMap:Cb,TetrahedronBufferGeometry:tS,TetrahedronGeometry:tS,TextGeometry:Xye,Texture:Fl,TextureLoader:Xve,TorusBufferGeometry:lg,TorusGeometry:lg,TorusKnotBufferGeometry:nS,TorusKnotGeometry:nS,Triangle:bf,TriangleFanDrawMode:Spe,TriangleStripDrawMode:Tpe,TrianglesDrawMode:bpe,TubeBufferGeometry:rS,TubeGeometry:rS,UVMapping:ER,Uint16BufferAttribute:xP,Uint32BufferAttribute:wP,Uint8BufferAttribute:Tfe,Uint8ClampedBufferAttribute:Sfe,Uniform:os,UniformsGroup:Eye,UniformsLib:wn,UniformsUtils:Vx,UnsignedByteType:Xh,UnsignedInt248Type:vv,UnsignedIntType:J0,UnsignedShort4444Type:h7,UnsignedShort5551Type:d7,UnsignedShortType:TP,VSMShadowMap:Gy,Vector2:Dt,Vector3:be,Vector4:Ii,VectorKeyframeTrack:Sx,VideoTexture:ave,WebGL1Renderer:H7,WebGL3DRenderTarget:cfe,WebGLArrayRenderTarget:ufe,WebGLCubeRenderTarget:O7,WebGLMultipleRenderTargets:hfe,WebGLMultisampleRenderTarget:Qye,WebGLRenderTarget:cu,WebGLRenderer:AP,WebGLUtils:U7,WireframeGeometry:PP,WrapAroundEnding:hx,ZeroCurvatureEnding:Wy,ZeroFactor:U9,ZeroSlopeEnding:Vy,ZeroStencilOp:$pe,_SRGBAFormat:QA,sRGBEncoding:Ei},Symbol.toStringTag,{value:"Module"}));var X0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ij(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Yy={exports:{}},vy={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QH;function tbe(){return QH||(QH=1,vy.ConcurrentRoot=1,vy.ContinuousEventPriority=4,vy.DefaultEventPriority=16,vy.DiscreteEventPriority=1,vy.IdleEventPriority=536870912,vy.LegacyRoot=0),vy}(function(n){n.exports=tbe()})(Yy);function nbe(n){let e;const t=new Set,i=(u,h)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const m=e;e=h?d:Object.assign({},e,d),t.forEach(_=>_(e,m))}},s=()=>e,o=(u,h=s,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=h(e);function _(){const v=h(e);if(!d(m,v)){const S=m;u(m=v,S)}}return t.add(_),()=>t.delete(_)},l={setState:i,getState:s,subscribe:(u,h,d)=>h||d?o(u,h,d):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,s,l),l}const rbe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),qH=rbe?he.useEffect:he.useLayoutEffect;function ibe(n){const e=typeof n=="function"?nbe(n):n,t=(i=e.getState,s=Object.is)=>{const[,o]=he.useReducer(A=>A+1,0),l=e.getState(),u=he.useRef(l),h=he.useRef(i),d=he.useRef(s),m=he.useRef(!1),_=he.useRef();_.current===void 0&&(_.current=i(l));let v,S=!1;(u.current!==l||h.current!==i||d.current!==s||m.current)&&(v=i(l),S=!s(_.current,v)),qH(()=>{S&&(_.current=v),u.current=l,h.current=i,d.current=s,m.current=!1});const x=he.useRef(l);qH(()=>{const A=()=>{try{const O=e.getState(),D=h.current(O);d.current(_.current,D)||(u.current=O,_.current=D,o())}catch{m.current=!0,o()}},k=e.subscribe(A);return e.getState()!==x.current&&A(),k},[]);const w=S?v:_.current;return he.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const s=i.length<=0;return{value:i.shift(),done:s}}}},t}var Rj={exports:{}},eI={exports:{}},ZH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e5;function sbe(){return e5||(e5=1,function(n){function e(j,Z){var ne=j.length;j.push(Z);e:for(;0<ne;){var ae=ne-1>>>1,_e=j[ae];if(0<s(_e,Z))j[ae]=Z,j[ne]=_e,ne=ae;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var Z=j[0],ne=j.pop();if(ne!==Z){j[0]=ne;e:for(var ae=0,_e=j.length,Le=_e>>>1;ae<Le;){var we=2*(ae+1)-1,Xe=j[we],Re=we+1,qe=j[Re];if(0>s(Xe,ne))Re<_e&&0>s(qe,Xe)?(j[ae]=qe,j[Re]=ne,ae=Re):(j[ae]=Xe,j[we]=ne,ae=we);else if(Re<_e&&0>s(qe,ne))j[ae]=qe,j[Re]=ne,ae=Re;else break e}}return Z}function s(j,Z){var ne=j.sortIndex-Z.sortIndex;return ne!==0?ne:j.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],d=[],m=1,_=null,v=3,S=!1,x=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(j){for(var Z=t(d);Z!==null;){if(Z.callback===null)i(d);else if(Z.startTime<=j)i(d),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(d)}}function L(j){if(w=!1,D(j),!x)if(t(h)!==null)x=!0,me(z);else{var Z=t(d);Z!==null&&Ae(L,Z.startTime-j)}}function z(j,Z){x=!1,w&&(w=!1,k(P),P=-1),S=!0;var ne=v;try{for(D(Z),_=t(h);_!==null&&(!(_.expirationTime>Z)||j&&!re());){var ae=_.callback;if(typeof ae=="function"){_.callback=null,v=_.priorityLevel;var _e=ae(_.expirationTime<=Z);Z=n.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),D(Z)}else i(h);_=t(h)}if(_!==null)var Le=!0;else{var we=t(d);we!==null&&Ae(L,we.startTime-Z),Le=!1}return Le}finally{_=null,v=ne,S=!1}}var H=!1,U=null,P=-1,K=5,ee=-1;function re(){return!(n.unstable_now()-ee<K)}function ie(){if(U!==null){var j=n.unstable_now();ee=j;var Z=!0;try{Z=U(!0,j)}finally{Z?de():(H=!1,U=null)}}else H=!1}var de;if(typeof O=="function")de=function(){O(ie)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ce=oe.port2;oe.port1.onmessage=ie,de=function(){ce.postMessage(null)}}else de=function(){A(ie,0)};function me(j){U=j,H||(H=!0,de())}function Ae(j,Z){P=A(function(){j(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){x||S||(x=!0,me(z))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var ne=v;v=Z;try{return j()}finally{v=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,Z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ne=v;v=j;try{return Z()}finally{v=ne}},n.unstable_scheduleCallback=function(j,Z,ne){var ae=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ae+ne:ae):ne=ae,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ne+_e,j={id:m++,callback:Z,priorityLevel:j,startTime:ne,expirationTime:_e,sortIndex:-1},ne>ae?(j.sortIndex=ne,e(d,j),t(h)===null&&j===t(d)&&(w?(k(P),P=-1):w=!0,Ae(L,ne-ae))):(j.sortIndex=_e,e(h,j),x||S||(x=!0,me(z))),j},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(j){var Z=v;return function(){var ne=v;v=Z;try{return j.apply(this,arguments)}finally{v=ne}}}}(ZH)),ZH}(function(n){n.exports=sbe()})(eI);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t5,n5;function obe(){return n5||(n5=1,t5=function(n){var e={},t=Sr,i=eI.exports,s=Object.assign;function o(E){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+E,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+E+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),h=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),S=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),L=Symbol.iterator;function z(E){return E===null||typeof E!="object"?null:(E=L&&E[L]||E["@@iterator"],typeof E=="function"?E:null)}function H(E){if(E==null)return null;if(typeof E=="function")return E.displayName||E.name||null;if(typeof E=="string")return E;switch(E){case d:return"Fragment";case h:return"Portal";case _:return"Profiler";case m:return"StrictMode";case w:return"Suspense";case A:return"SuspenseList"}if(typeof E=="object")switch(E.$$typeof){case S:return(E.displayName||"Context")+".Consumer";case v:return(E._context.displayName||"Context")+".Provider";case x:var c=E.render;return E=E.displayName,E||(E=c.displayName||c.name||"",E=E!==""?"ForwardRef("+E+")":"ForwardRef"),E;case k:return c=E.displayName||null,c!==null?c:H(E.type)||"Memo";case O:c=E._payload,E=E._init;try{return H(E(c))}catch{}}return null}function U(E){var c=E.type;switch(E.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return E=c.render,E=E.displayName||E.name||"",c.displayName||(E!==""?"ForwardRef("+E+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(c);case 8:return c===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function P(E){var c=E,f=E;if(E.alternate)for(;c.return;)c=c.return;else{E=c;do c=E,c.flags&4098&&(f=c.return),E=c.return;while(E)}return c.tag===3?f:null}function K(E){if(P(E)!==E)throw Error(o(188))}function ee(E){var c=E.alternate;if(!c){if(c=P(E),c===null)throw Error(o(188));return c!==E?null:E}for(var f=E,$=c;;){var M=f.return;if(M===null)break;var N=M.alternate;if(N===null){if($=M.return,$!==null){f=$;continue}break}if(M.child===N.child){for(N=M.child;N;){if(N===f)return K(M),E;if(N===$)return K(M),c;N=N.sibling}throw Error(o(188))}if(f.return!==$.return)f=M,$=N;else{for(var G=!1,se=M.child;se;){if(se===f){G=!0,f=M,$=N;break}if(se===$){G=!0,$=M,f=N;break}se=se.sibling}if(!G){for(se=N.child;se;){if(se===f){G=!0,f=N,$=M;break}if(se===$){G=!0,$=N,f=M;break}se=se.sibling}if(!G)throw Error(o(189))}}if(f.alternate!==$)throw Error(o(190))}if(f.tag!==3)throw Error(o(188));return f.stateNode.current===f?E:c}function re(E){return E=ee(E),E!==null?ie(E):null}function ie(E){if(E.tag===5||E.tag===6)return E;for(E=E.child;E!==null;){var c=ie(E);if(c!==null)return c;E=E.sibling}return null}function de(E){if(E.tag===5||E.tag===6)return E;for(E=E.child;E!==null;){if(E.tag!==4){var c=de(E);if(c!==null)return c}E=E.sibling}return null}var oe=Array.isArray,ce=n.getPublicInstance,me=n.getRootHostContext,Ae=n.getChildHostContext,j=n.prepareForCommit,Z=n.resetAfterCommit,ne=n.createInstance,ae=n.appendInitialChild,_e=n.finalizeInitialChildren,Le=n.prepareUpdate,we=n.shouldSetTextContent,Xe=n.createTextInstance,Re=n.scheduleTimeout,qe=n.cancelTimeout,Je=n.noTimeout,ht=n.isPrimaryRenderer,it=n.supportsMutation,Oe=n.supportsPersistence,Ee=n.supportsHydration,Fe=n.getInstanceFromNode,rt=n.preparePortalMount,nt=n.getCurrentEventPriority,dt=n.detachDeletedInstance,It=n.supportsMicrotasks,mt=n.scheduleMicrotask,wt=n.supportsTestSelectors,$t=n.findFiberRoot,pt=n.getBoundingRect,Te=n.getTextContent,te=n.isHiddenSubtree,ke=n.matchAccessibilityRole,ot=n.setFocusIfFocusable,ft=n.setupIntersectionObserver,xt=n.appendChild,at=n.appendChildToContainer,Ge=n.commitTextUpdate,Ce=n.commitMount,X=n.commitUpdate,Q=n.insertBefore,le=n.insertInContainerBefore,$e=n.removeChild,We=n.removeChildFromContainer,Ft=n.resetTextContent,Be=n.hideInstance,Ut=n.hideTextInstance,ut=n.unhideInstance,Ht=n.unhideTextInstance,zt=n.clearContainer,En=n.cloneInstance,Pr=n.createContainerChildSet,Er=n.appendChildToContainerChildSet,Kr=n.finalizeContainerChildren,or=n.replaceContainerChildren,Wn=n.cloneHiddenInstance,q=n.cloneHiddenTextInstance,ge=n.canHydrateInstance,Ne=n.canHydrateTextInstance,tt=n.canHydrateSuspenseInstance,kt=n.isSuspenseInstancePending,qt=n.isSuspenseInstanceFallback,_n=n.registerSuspenseInstanceRetry,Ie=n.getNextHydratableSibling,lt=n.getFirstHydratableChild,Et=n.getFirstHydratableChildWithinContainer,gt=n.getFirstHydratableChildWithinSuspenseInstance,Nt=n.hydrateInstance,yn=n.hydrateTextInstance,Pn=n.hydrateSuspenseInstance,ir=n.getNextHydratableInstanceAfterSuspenseInstance,yr=n.commitHydratedContainer,ni=n.commitHydratedSuspenseInstance,$r=n.clearSuspenseBoundary,Ir=n.clearSuspenseBoundaryFromContainer,ji=n.shouldDeleteUnhydratedTailInstances,Yo=n.didNotMatchHydratedContainerTextInstance,Oo=n.didNotMatchHydratedTextInstance,cl;function Kt(E){if(cl===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);cl=c&&c[1]||""}return`
`+cl+E}var dr=!1;function ga(E,c){if(!E||dr)return"";dr=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(je){var $=je}Reflect.construct(E,[],c)}else{try{c.call()}catch(je){$=je}E.call(c.prototype)}else{try{throw Error()}catch(je){$=je}E()}}catch(je){if(je&&$&&typeof je.stack=="string"){for(var M=je.stack.split(`
`),N=$.stack.split(`
`),G=M.length-1,se=N.length-1;1<=G&&0<=se&&M[G]!==N[se];)se--;for(;1<=G&&0<=se;G--,se--)if(M[G]!==N[se]){if(G!==1||se!==1)do if(G--,se--,0>se||M[G]!==N[se]){var xe=`
`+M[G].replace(" at new "," at ");return E.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",E.displayName)),xe}while(1<=G&&0<=se);break}}}finally{dr=!1,Error.prepareStackTrace=f}return(E=E?E.displayName||E.name:"")?Kt(E):""}var Ko=Object.prototype.hasOwnProperty,ms=[],gs=-1;function di(E){return{current:E}}function pr(E){0>gs||(E.current=ms[gs],ms[gs]=null,gs--)}function fn(E,c){gs++,ms[gs]=E.current,E.current=c}var ur={},wr=di(ur),nr=di(!1),pi=ur;function Zi(E,c){var f=E.type.contextTypes;if(!f)return ur;var $=E.stateNode;if($&&$.__reactInternalMemoizedUnmaskedChildContext===c)return $.__reactInternalMemoizedMaskedChildContext;var M={},N;for(N in f)M[N]=c[N];return $&&(E=E.stateNode,E.__reactInternalMemoizedUnmaskedChildContext=c,E.__reactInternalMemoizedMaskedChildContext=M),M}function Xr(E){return E=E.childContextTypes,E!=null}function Fi(){pr(nr),pr(wr)}function Ua(E,c,f){if(wr.current!==ur)throw Error(o(168));fn(wr,c),fn(nr,f)}function hl(E,c,f){var $=E.stateNode;if(c=c.childContextTypes,typeof $.getChildContext!="function")return f;$=$.getChildContext();for(var M in $)if(!(M in c))throw Error(o(108,U(E)||"Unknown",M));return s({},f,$)}function vc(E){return E=(E=E.stateNode)&&E.__reactInternalMemoizedMergedChildContext||ur,pi=wr.current,fn(wr,E),fn(nr,nr.current),!0}function Yu(E,c,f){var $=E.stateNode;if(!$)throw Error(o(169));f?(E=hl(E,c,pi),$.__reactInternalMemoizedMergedChildContext=E,pr(nr),pr(wr),fn(wr,E)):pr(nr),fn(nr,f)}var Os=Math.clz32?Math.clz32:Ul,Lo=Math.log,hu=Math.LN2;function Ul(E){return E>>>=0,E===0?32:31-(Lo(E)/hu|0)|0}var _h=64,Jo=4194304;function rr(E){switch(E&-E){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return E&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return E}}function Ui(E,c){var f=E.pendingLanes;if(f===0)return 0;var $=0,M=E.suspendedLanes,N=E.pingedLanes,G=f&268435455;if(G!==0){var se=G&~M;se!==0?$=rr(se):(N&=G,N!==0&&($=rr(N)))}else G=f&~M,G!==0?$=rr(G):N!==0&&($=rr(N));if($===0)return 0;if(c!==0&&c!==$&&!(c&M)&&(M=$&-$,N=c&-c,M>=N||M===16&&(N&4194240)!==0))return c;if($&4&&($|=f&16),c=E.entangledLanes,c!==0)for(E=E.entanglements,c&=$;0<c;)f=31-Os(c),M=1<<f,$|=E[f],c&=~M;return $}function Vc(E,c){switch(E){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vh(E,c){for(var f=E.suspendedLanes,$=E.pingedLanes,M=E.expirationTimes,N=E.pendingLanes;0<N;){var G=31-Os(N),se=1<<G,xe=M[G];xe===-1?(!(se&f)||se&$)&&(M[G]=Vc(se,c)):xe<=c&&(E.expiredLanes|=se),N&=~se}}function yc(E){return E=E.pendingLanes&-1073741825,E!==0?E:E&1073741824?1073741824:0}function dl(E){for(var c=[],f=0;31>f;f++)c.push(E);return c}function du(E,c,f){E.pendingLanes|=c,c!==536870912&&(E.suspendedLanes=0,E.pingedLanes=0),E=E.eventTimes,c=31-Os(c),E[c]=f}function pl(E,c){var f=E.pendingLanes&~c;E.pendingLanes=c,E.suspendedLanes=0,E.pingedLanes=0,E.expiredLanes&=c,E.mutableReadLanes&=c,E.entangledLanes&=c,c=E.entanglements;var $=E.eventTimes;for(E=E.expirationTimes;0<f;){var M=31-Os(f),N=1<<M;c[M]=0,$[M]=-1,E[M]=-1,f&=~N}}function fl(E,c){var f=E.entangledLanes|=c;for(E=E.entanglements;f;){var $=31-Os(f),M=1<<$;M&c|E[$]&c&&(E[$]|=c),f&=~M}}var qn=0;function Zn(E){return E&=-E,1<E?4<E?E&268435455?16:536870912:4:1}var ml=i.unstable_scheduleCallback,za=i.unstable_cancelCallback,_a=i.unstable_shouldYield,zl=i.unstable_requestPaint,$i=i.unstable_now,zi=i.unstable_ImmediatePriority,gl=i.unstable_UserBlockingPriority,kd=i.unstable_NormalPriority,Ls=i.unstable_IdlePriority,pu=null,Do=null;function Hl(E){if(Do&&typeof Do.onCommitFiberRoot=="function")try{Do.onCommitFiberRoot(pu,E,void 0,(E.current.flags&128)===128)}catch{}}function Yr(E,c){return E===c&&(E!==0||1/E===1/c)||E!==E&&c!==c}var fr=typeof Object.is=="function"?Object.is:Yr,Xi=null,Ds=!1,fu=!1;function Gl(E){Xi===null?Xi=[E]:Xi.push(E)}function jc(E){Ds=!0,Gl(E)}function Qo(){if(!fu&&Xi!==null){fu=!0;var E=0,c=qn;try{var f=Xi;for(qn=1;E<f.length;E++){var $=f[E];do $=$(!0);while($!==null)}Xi=null,Ds=!1}catch(M){throw Xi!==null&&(Xi=Xi.slice(E+1)),ml(zi,Qo),M}finally{qn=c,fu=!1}}return null}var qo=l.ReactCurrentBatchConfig;function mu(E,c){if(fr(E,c))return!0;if(typeof E!="object"||E===null||typeof c!="object"||c===null)return!1;var f=Object.keys(E),$=Object.keys(c);if(f.length!==$.length)return!1;for($=0;$<f.length;$++){var M=f[$];if(!Ko.call(c,M)||!fr(E[M],c[M]))return!1}return!0}function Jr(E){switch(E.tag){case 5:return Kt(E.type);case 16:return Kt("Lazy");case 13:return Kt("Suspense");case 19:return Kt("SuspenseList");case 0:case 2:case 15:return E=ga(E.type,!1),E;case 11:return E=ga(E.type.render,!1),E;case 1:return E=ga(E.type,!0),E;default:return""}}function _s(E,c){if(E&&E.defaultProps){c=s({},c),E=E.defaultProps;for(var f in E)c[f]===void 0&&(c[f]=E[f]);return c}return c}var Ri=di(null),ri=null,va=null,Hi=null;function gu(){Hi=va=ri=null}function oo(E,c,f){ht?(fn(Ri,c._currentValue),c._currentValue=f):(fn(Ri,c._currentValue2),c._currentValue2=f)}function _u(E){var c=Ri.current;pr(Ri),ht?E._currentValue=c:E._currentValue2=c}function Ha(E,c,f){for(;E!==null;){var $=E.alternate;if((E.childLanes&c)!==c?(E.childLanes|=c,$!==null&&($.childLanes|=c)):$!==null&&($.childLanes&c)!==c&&($.childLanes|=c),E===f)break;E=E.return}}function fi(E,c){ri=E,Hi=va=null,E=E.dependencies,E!==null&&E.firstContext!==null&&(E.lanes&c&&(Sa=!0),E.firstContext=null)}function ii(E){var c=ht?E._currentValue:E._currentValue2;if(Hi!==E)if(E={context:E,memoizedValue:c,next:null},va===null){if(ri===null)throw Error(o(308));va=E,ri.dependencies={lanes:0,firstContext:E}}else va=va.next=E;return c}var zn=null,Qr=!1;function xi(E){E.updateQueue={baseState:E.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yh(E,c){E=E.updateQueue,c.updateQueue===E&&(c.updateQueue={baseState:E.baseState,firstBaseUpdate:E.firstBaseUpdate,lastBaseUpdate:E.lastBaseUpdate,shared:E.shared,effects:E.effects})}function vu(E,c){return{eventTime:E,lane:c,tag:0,payload:null,callback:null,next:null}}function vs(E,c){var f=E.updateQueue;f!==null&&(f=f.shared,Ln!==null&&E.mode&1&&!(Cn&2)?(E=f.interleaved,E===null?(c.next=c,zn===null?zn=[f]:zn.push(f)):(c.next=E.next,E.next=c),f.interleaved=c):(E=f.pending,E===null?c.next=c:(c.next=E.next,E.next=c),f.pending=c))}function _l(E,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var $=c.lanes;$&=E.pendingLanes,f|=$,c.lanes=f,fl(E,f)}}function Kh(E,c){var f=E.updateQueue,$=E.alternate;if($!==null&&($=$.updateQueue,f===$)){var M=null,N=null;if(f=f.firstBaseUpdate,f!==null){do{var G={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};N===null?M=N=G:N=N.next=G,f=f.next}while(f!==null);N===null?M=N=c:N=N.next=c}else M=N=c;f={baseState:$.baseState,firstBaseUpdate:M,lastBaseUpdate:N,shared:$.shared,effects:$.effects},E.updateQueue=f;return}E=f.lastBaseUpdate,E===null?f.firstBaseUpdate=c:E.next=c,f.lastBaseUpdate=c}function mi(E,c,f,$){var M=E.updateQueue;Qr=!1;var N=M.firstBaseUpdate,G=M.lastBaseUpdate,se=M.shared.pending;if(se!==null){M.shared.pending=null;var xe=se,je=xe.next;xe.next=null,G===null?N=je:G.next=je,G=xe;var vt=E.alternate;vt!==null&&(vt=vt.updateQueue,se=vt.lastBaseUpdate,se!==G&&(se===null?vt.firstBaseUpdate=je:se.next=je,vt.lastBaseUpdate=xe))}if(N!==null){var Gt=M.baseState;G=0,vt=je=xe=null,se=N;do{var en=se.lane,dn=se.eventTime;if(($&en)===en){vt!==null&&(vt=vt.next={eventTime:dn,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var ln=E,rn=se;switch(en=c,dn=f,rn.tag){case 1:if(ln=rn.payload,typeof ln=="function"){Gt=ln.call(dn,Gt,en);break e}Gt=ln;break e;case 3:ln.flags=ln.flags&-65537|128;case 0:if(ln=rn.payload,en=typeof ln=="function"?ln.call(dn,Gt,en):ln,en==null)break e;Gt=s({},Gt,en);break e;case 2:Qr=!0}}se.callback!==null&&se.lane!==0&&(E.flags|=64,en=M.effects,en===null?M.effects=[se]:en.push(se))}else dn={eventTime:dn,lane:en,tag:se.tag,payload:se.payload,callback:se.callback,next:null},vt===null?(je=vt=dn,xe=Gt):vt=vt.next=dn,G|=en;if(se=se.next,se===null){if(se=M.shared.pending,se===null)break;en=se,se=en.next,en.next=null,M.lastBaseUpdate=en,M.shared.pending=null}}while(!0);if(vt===null&&(xe=Gt),M.baseState=xe,M.firstBaseUpdate=je,M.lastBaseUpdate=vt,c=M.shared.interleaved,c!==null){M=c;do G|=M.lane,M=M.next;while(M!==c)}else N===null&&(M.shared.lanes=0);Kl|=G,E.lanes=G,E.memoizedState=Gt}}function yu(E,c,f){if(E=c.effects,c.effects=null,E!==null)for(c=0;c<E.length;c++){var $=E[c],M=$.callback;if(M!==null){if($.callback=null,$=f,typeof M!="function")throw Error(o(191,M));M.call($)}}}var pp=new t.Component().refs;function fp(E,c,f,$){c=E.memoizedState,f=f($,c),f=f==null?c:s({},c,f),E.memoizedState=f,E.lanes===0&&(E.updateQueue.baseState=f)}var yh={isMounted:function(E){return(E=E._reactInternals)?P(E)===E:!1},enqueueSetState:function(E,c,f){E=E._reactInternals;var $=xr(),M=Ki(E),N=vu($,M);N.payload=c,f!=null&&(N.callback=f),vs(E,N),c=Es(E,M,$),c!==null&&_l(c,E,M)},enqueueReplaceState:function(E,c,f){E=E._reactInternals;var $=xr(),M=Ki(E),N=vu($,M);N.tag=1,N.payload=c,f!=null&&(N.callback=f),vs(E,N),c=Es(E,M,$),c!==null&&_l(c,E,M)},enqueueForceUpdate:function(E,c){E=E._reactInternals;var f=xr(),$=Ki(E),M=vu(f,$);M.tag=2,c!=null&&(M.callback=c),vs(E,M),c=Es(E,$,f),c!==null&&_l(c,E,$)}};function mp(E,c,f,$,M,N,G){return E=E.stateNode,typeof E.shouldComponentUpdate=="function"?E.shouldComponentUpdate($,N,G):c.prototype&&c.prototype.isPureReactComponent?!mu(f,$)||!mu(M,N):!0}function Vp(E,c,f){var $=!1,M=ur,N=c.contextType;return typeof N=="object"&&N!==null?N=ii(N):(M=Xr(c)?pi:wr.current,$=c.contextTypes,N=($=$!=null)?Zi(E,M):ur),c=new c(f,N),E.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=yh,E.stateNode=c,c._reactInternals=E,$&&(E=E.stateNode,E.__reactInternalMemoizedUnmaskedChildContext=M,E.__reactInternalMemoizedMaskedChildContext=N),c}function Ff(E,c,f,$){E=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,$),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,$),c.state!==E&&yh.enqueueReplaceState(c,c.state,null)}function gp(E,c,f,$){var M=E.stateNode;M.props=f,M.state=E.memoizedState,M.refs=pp,xi(E);var N=c.contextType;typeof N=="object"&&N!==null?M.context=ii(N):(N=Xr(c)?pi:wr.current,M.context=Zi(E,N)),M.state=E.memoizedState,N=c.getDerivedStateFromProps,typeof N=="function"&&(fp(E,c,N,f),M.state=E.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(c=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),c!==M.state&&yh.enqueueReplaceState(M,M.state,null),mi(E,f,M,$),M.state=E.memoizedState),typeof M.componentDidMount=="function"&&(E.flags|=4194308)}var Ku=[],ao=0,bu=null,bh=0,ya=[],Vr=0,cr=null,Xs=1,Zo="";function No(E,c){Ku[ao++]=bh,Ku[ao++]=bu,bu=E,bh=c}function Tu(E,c,f){ya[Vr++]=Xs,ya[Vr++]=Zo,ya[Vr++]=cr,cr=E;var $=Xs;E=Zo;var M=32-Os($)-1;$&=~(1<<M),f+=1;var N=32-Os(c)+M;if(30<N){var G=M-M%5;N=($&(1<<G)-1).toString(32),$>>=G,M-=G,Xs=1<<32-Os(c)+M|f<<M|$,Zo=N+E}else Xs=1<<N|f<<M|$,Zo=E}function vl(E){E.return!==null&&(No(E,1),Tu(E,1,0))}function Jh(E){for(;E===bu;)bu=Ku[--ao],Ku[ao]=null,bh=Ku[--ao],Ku[ao]=null;for(;E===cr;)cr=ya[--Vr],ya[Vr]=null,Zo=ya[--Vr],ya[Vr]=null,Xs=ya[--Vr],ya[Vr]=null}var wi=null,gi=null,hr=!1,Ci=!1,ea=null;function Wl(E,c){var f=po(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=E,c=E.deletions,c===null?(E.deletions=[f],E.flags|=16):c.push(f)}function _p(E,c){switch(E.tag){case 5:return c=ge(c,E.type,E.pendingProps),c!==null?(E.stateNode=c,wi=E,gi=lt(c),!0):!1;case 6:return c=Ne(c,E.pendingProps),c!==null?(E.stateNode=c,wi=E,gi=null,!0):!1;case 13:if(c=tt(c),c!==null){var f=cr!==null?{id:Xs,overflow:Zo}:null;return E.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=po(18,null,null,0),f.stateNode=c,f.return=E,E.child=f,wi=E,gi=null,!0}return!1;default:return!1}}function vp(E){return(E.mode&1)!==0&&(E.flags&128)===0}function Qh(E){if(hr){var c=gi;if(c){var f=c;if(!_p(E,c)){if(vp(E))throw Error(o(418));c=Ie(f);var $=wi;c&&_p(E,c)?Wl($,f):(E.flags=E.flags&-4097|2,hr=!1,wi=E)}}else{if(vp(E))throw Error(o(418));E.flags=E.flags&-4097|2,hr=!1,wi=E}}}function Su(E){for(E=E.return;E!==null&&E.tag!==5&&E.tag!==3&&E.tag!==13;)E=E.return;wi=E}function Ju(E){if(!Ee||E!==wi)return!1;if(!hr)return Su(E),hr=!0,!1;if(E.tag!==3&&(E.tag!==5||ji(E.type)&&!we(E.type,E.memoizedProps))){var c=gi;if(c){if(vp(E)){for(E=gi;E;)E=Ie(E);throw Error(o(418))}for(;c;)Wl(E,c),c=Ie(c)}}if(Su(E),E.tag===13){if(!Ee)throw Error(o(316));if(E=E.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));gi=ir(E)}else gi=wi?Ie(E.stateNode):null;return!0}function bc(){Ee&&(gi=wi=null,Ci=hr=!1)}function Th(E){ea===null?ea=[E]:ea.push(E)}function Tc(E,c,f){if(E=f.ref,E!==null&&typeof E!="function"&&typeof E!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(o(309));var $=f.stateNode}if(!$)throw Error(o(147,E));var M=$,N=""+E;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===N?c.ref:(c=function(G){var se=M.refs;se===pp&&(se=M.refs={}),G===null?delete se[N]:se[N]=G},c._stringRef=N,c)}if(typeof E!="string")throw Error(o(284));if(!f._owner)throw Error(o(290,E))}return E}function Vl(E,c){throw E=Object.prototype.toString.call(c),Error(o(31,E==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":E))}function ta(E){var c=E._init;return c(E._payload)}function Qu(E){function c(_t,Se){if(E){var Me=_t.deletions;Me===null?(_t.deletions=[Se],_t.flags|=16):Me.push(Se)}}function f(_t,Se){if(!E)return null;for(;Se!==null;)c(_t,Se),Se=Se.sibling;return null}function $(_t,Se){for(_t=new Map;Se!==null;)Se.key!==null?_t.set(Se.key,Se):_t.set(Se.index,Se),Se=Se.sibling;return _t}function M(_t,Se){return _t=Al(_t,Se),_t.index=0,_t.sibling=null,_t}function N(_t,Se,Me){return _t.index=Me,E?(Me=_t.alternate,Me!==null?(Me=Me.index,Me<Se?(_t.flags|=2,Se):Me):(_t.flags|=2,Se)):(_t.flags|=1048576,Se)}function G(_t){return E&&_t.alternate===null&&(_t.flags|=2),_t}function se(_t,Se,Me,Ke){return Se===null||Se.tag!==6?(Se=Ql(Me,_t.mode,Ke),Se.return=_t,Se):(Se=M(Se,Me),Se.return=_t,Se)}function xe(_t,Se,Me,Ke){var Lt=Me.type;return Lt===d?vt(_t,Se,Me.props.children,Ke,Me.key):Se!==null&&(Se.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===O&&ta(Lt)===Se.type)?(Ke=M(Se,Me.props),Ke.ref=Tc(_t,Se,Me),Ke.return=_t,Ke):(Ke=no(Me.type,Me.key,Me.props,null,_t.mode,Ke),Ke.ref=Tc(_t,Se,Me),Ke.return=_t,Ke)}function je(_t,Se,Me,Ke){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Me.containerInfo||Se.stateNode.implementation!==Me.implementation?(Se=is(Me,_t.mode,Ke),Se.return=_t,Se):(Se=M(Se,Me.children||[]),Se.return=_t,Se)}function vt(_t,Se,Me,Ke,Lt){return Se===null||Se.tag!==7?(Se=qa(Me,_t.mode,Ke,Lt),Se.return=_t,Se):(Se=M(Se,Me),Se.return=_t,Se)}function Gt(_t,Se,Me){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return Se=Ql(""+Se,_t.mode,Me),Se.return=_t,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case u:return Me=no(Se.type,Se.key,Se.props,null,_t.mode,Me),Me.ref=Tc(_t,null,Se),Me.return=_t,Me;case h:return Se=is(Se,_t.mode,Me),Se.return=_t,Se;case O:var Ke=Se._init;return Gt(_t,Ke(Se._payload),Me)}if(oe(Se)||z(Se))return Se=qa(Se,_t.mode,Me,null),Se.return=_t,Se;Vl(_t,Se)}return null}function en(_t,Se,Me,Ke){var Lt=Se!==null?Se.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Lt!==null?null:se(_t,Se,""+Me,Ke);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case u:return Me.key===Lt?xe(_t,Se,Me,Ke):null;case h:return Me.key===Lt?je(_t,Se,Me,Ke):null;case O:return Lt=Me._init,en(_t,Se,Lt(Me._payload),Ke)}if(oe(Me)||z(Me))return Lt!==null?null:vt(_t,Se,Me,Ke,null);Vl(_t,Me)}return null}function dn(_t,Se,Me,Ke,Lt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return _t=_t.get(Me)||null,se(Se,_t,""+Ke,Lt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case u:return _t=_t.get(Ke.key===null?Me:Ke.key)||null,xe(Se,_t,Ke,Lt);case h:return _t=_t.get(Ke.key===null?Me:Ke.key)||null,je(Se,_t,Ke,Lt);case O:var Jt=Ke._init;return dn(_t,Se,Me,Jt(Ke._payload),Lt)}if(oe(Ke)||z(Ke))return _t=_t.get(Me)||null,vt(Se,_t,Ke,Lt,null);Vl(Se,Ke)}return null}function ln(_t,Se,Me,Ke){for(var Lt=null,Jt=null,un=Se,mn=Se=0,On=null;un!==null&&mn<Me.length;mn++){un.index>mn?(On=un,un=null):On=un.sibling;var Xn=en(_t,un,Me[mn],Ke);if(Xn===null){un===null&&(un=On);break}E&&un&&Xn.alternate===null&&c(_t,un),Se=N(Xn,Se,mn),Jt===null?Lt=Xn:Jt.sibling=Xn,Jt=Xn,un=On}if(mn===Me.length)return f(_t,un),hr&&No(_t,mn),Lt;if(un===null){for(;mn<Me.length;mn++)un=Gt(_t,Me[mn],Ke),un!==null&&(Se=N(un,Se,mn),Jt===null?Lt=un:Jt.sibling=un,Jt=un);return hr&&No(_t,mn),Lt}for(un=$(_t,un);mn<Me.length;mn++)On=dn(un,_t,mn,Me[mn],Ke),On!==null&&(E&&On.alternate!==null&&un.delete(On.key===null?mn:On.key),Se=N(On,Se,mn),Jt===null?Lt=On:Jt.sibling=On,Jt=On);return E&&un.forEach(function(mr){return c(_t,mr)}),hr&&No(_t,mn),Lt}function rn(_t,Se,Me,Ke){var Lt=z(Me);if(typeof Lt!="function")throw Error(o(150));if(Me=Lt.call(Me),Me==null)throw Error(o(151));for(var Jt=Lt=null,un=Se,mn=Se=0,On=null,Xn=Me.next();un!==null&&!Xn.done;mn++,Xn=Me.next()){un.index>mn?(On=un,un=null):On=un.sibling;var mr=en(_t,un,Xn.value,Ke);if(mr===null){un===null&&(un=On);break}E&&un&&mr.alternate===null&&c(_t,un),Se=N(mr,Se,mn),Jt===null?Lt=mr:Jt.sibling=mr,Jt=mr,un=On}if(Xn.done)return f(_t,un),hr&&No(_t,mn),Lt;if(un===null){for(;!Xn.done;mn++,Xn=Me.next())Xn=Gt(_t,Xn.value,Ke),Xn!==null&&(Se=N(Xn,Se,mn),Jt===null?Lt=Xn:Jt.sibling=Xn,Jt=Xn);return hr&&No(_t,mn),Lt}for(un=$(_t,un);!Xn.done;mn++,Xn=Me.next())Xn=dn(un,_t,mn,Xn.value,Ke),Xn!==null&&(E&&Xn.alternate!==null&&un.delete(Xn.key===null?mn:Xn.key),Se=N(Xn,Se,mn),Jt===null?Lt=Xn:Jt.sibling=Xn,Jt=Xn);return E&&un.forEach(function(Zl){return c(_t,Zl)}),hr&&No(_t,mn),Lt}function Tr(_t,Se,Me,Ke){if(typeof Me=="object"&&Me!==null&&Me.type===d&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case u:e:{for(var Lt=Me.key,Jt=Se;Jt!==null;){if(Jt.key===Lt){if(Lt=Me.type,Lt===d){if(Jt.tag===7){f(_t,Jt.sibling),Se=M(Jt,Me.props.children),Se.return=_t,_t=Se;break e}}else if(Jt.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===O&&ta(Lt)===Jt.type){f(_t,Jt.sibling),Se=M(Jt,Me.props),Se.ref=Tc(_t,Jt,Me),Se.return=_t,_t=Se;break e}f(_t,Jt);break}else c(_t,Jt);Jt=Jt.sibling}Me.type===d?(Se=qa(Me.props.children,_t.mode,Ke,Me.key),Se.return=_t,_t=Se):(Ke=no(Me.type,Me.key,Me.props,null,_t.mode,Ke),Ke.ref=Tc(_t,Se,Me),Ke.return=_t,_t=Ke)}return G(_t);case h:e:{for(Jt=Me.key;Se!==null;){if(Se.key===Jt)if(Se.tag===4&&Se.stateNode.containerInfo===Me.containerInfo&&Se.stateNode.implementation===Me.implementation){f(_t,Se.sibling),Se=M(Se,Me.children||[]),Se.return=_t,_t=Se;break e}else{f(_t,Se);break}else c(_t,Se);Se=Se.sibling}Se=is(Me,_t.mode,Ke),Se.return=_t,_t=Se}return G(_t);case O:return Jt=Me._init,Tr(_t,Se,Jt(Me._payload),Ke)}if(oe(Me))return ln(_t,Se,Me,Ke);if(z(Me))return rn(_t,Se,Me,Ke);Vl(_t,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,Se!==null&&Se.tag===6?(f(_t,Se.sibling),Se=M(Se,Me),Se.return=_t,_t=Se):(f(_t,Se),Se=Ql(Me,_t.mode,Ke),Se.return=_t,_t=Se),G(_t)):f(_t,Se)}return Tr}var Sh=Qu(!0),Sc=Qu(!1),Ec={},ys=di(Ec),qr=di(Ec),yl=di(Ec);function na(E){if(E===Ec)throw Error(o(174));return E}function bl(E,c){fn(yl,c),fn(qr,E),fn(ys,Ec),E=me(c),pr(ys),fn(ys,E)}function jl(){pr(ys),pr(qr),pr(yl)}function Xc(E){var c=na(yl.current),f=na(ys.current);c=Ae(f,E.type,c),f!==c&&(fn(qr,E),fn(ys,c))}function Od(E){qr.current===E&&(pr(ys),pr(qr))}var _i=di(0);function Ye(E){for(var c=E;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||kt(f)||qt(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===E)break;for(;c.sibling===null;){if(c.return===null||c.return===E)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Ot=[];function Tt(){for(var E=0;E<Ot.length;E++){var c=Ot[E];ht?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}Ot.length=0}var gn=l.ReactCurrentDispatcher,Nn=l.ReactCurrentBatchConfig,er=0,sr=null,In=null,Rr=null,Ns=!1,bs=!1,To=0,ba=0;function Yi(){throw Error(o(321))}function ls(E,c){if(c===null)return!1;for(var f=0;f<c.length&&f<E.length;f++)if(!fr(E[f],c[f]))return!1;return!0}function $c(E,c,f,$,M,N){if(er=N,sr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,gn.current=E===null||E.memoizedState===null?wc:Mh,E=f($,M),bs){N=0;do{if(bs=!1,To=0,25<=N)throw Error(o(301));N+=1,Rr=In=null,c.updateQueue=null,gn.current=nd,E=f($,M)}while(bs)}if(gn.current=$l,c=In!==null&&In.next!==null,er=0,Rr=In=sr=null,Ns=!1,c)throw Error(o(300));return E}function Fr(){var E=To!==0;return To=0,E}function Bo(){var E={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rr===null?sr.memoizedState=Rr=E:Rr=Rr.next=E,Rr}function Bs(){if(In===null){var E=sr.alternate;E=E!==null?E.memoizedState:null}else E=In.next;var c=Rr===null?sr.memoizedState:Rr.next;if(c!==null)Rr=c,In=E;else{if(E===null)throw Error(o(310));In=E,E={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},Rr===null?sr.memoizedState=Rr=E:Rr=Rr.next=E}return Rr}function Ys(E,c){return typeof c=="function"?c(E):c}function ra(E){var c=Bs(),f=c.queue;if(f===null)throw Error(o(311));f.lastRenderedReducer=E;var $=In,M=$.baseQueue,N=f.pending;if(N!==null){if(M!==null){var G=M.next;M.next=N.next,N.next=G}$.baseQueue=M=N,f.pending=null}if(M!==null){N=M.next,$=$.baseState;var se=G=null,xe=null,je=N;do{var vt=je.lane;if((er&vt)===vt)xe!==null&&(xe=xe.next={lane:0,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null}),$=je.hasEagerState?je.eagerState:E($,je.action);else{var Gt={lane:vt,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null};xe===null?(se=xe=Gt,G=$):xe=xe.next=Gt,sr.lanes|=vt,Kl|=vt}je=je.next}while(je!==null&&je!==N);xe===null?G=$:xe.next=se,fr($,c.memoizedState)||(Sa=!0),c.memoizedState=$,c.baseState=G,c.baseQueue=xe,f.lastRenderedState=$}if(E=f.interleaved,E!==null){M=E;do N=M.lane,sr.lanes|=N,Kl|=N,M=M.next;while(M!==E)}else M===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function Eh(E){var c=Bs(),f=c.queue;if(f===null)throw Error(o(311));f.lastRenderedReducer=E;var $=f.dispatch,M=f.pending,N=c.memoizedState;if(M!==null){f.pending=null;var G=M=M.next;do N=E(N,G.action),G=G.next;while(G!==M);fr(N,c.memoizedState)||(Sa=!0),c.memoizedState=N,c.baseQueue===null&&(c.baseState=N),f.lastRenderedState=N}return[N,$]}function Yc(){}function $h(E,c){var f=sr,$=Bs(),M=c(),N=!fr($.memoizedState,M);if(N&&($.memoizedState=M,Sa=!0),$=$.queue,$u(Zh.bind(null,f,$,E),[E]),$.getSnapshot!==c||N||Rr!==null&&Rr.memoizedState.tag&1){if(f.flags|=2048,xc(9,qh.bind(null,f,$,M,c),void 0,null),Ln===null)throw Error(o(349));er&30||Eu(f,c,M)}return M}function Eu(E,c,f){E.flags|=16384,E={getSnapshot:c,value:f},c=sr.updateQueue,c===null?(c={lastEffect:null,stores:null},sr.updateQueue=c,c.stores=[E]):(f=c.stores,f===null?c.stores=[E]:f.push(E))}function qh(E,c,f,$){c.value=f,c.getSnapshot=$,Tl(c)&&Es(E,1,-1)}function Zh(E,c,f){return f(function(){Tl(c)&&Es(E,1,-1)})}function Tl(E){var c=E.getSnapshot;E=E.value;try{var f=c();return!fr(E,f)}catch{return!0}}function ed(E){var c=Bo();return typeof E=="function"&&(E=E()),c.memoizedState=c.baseState=E,E={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:E},c.queue=E,E=E.dispatch=lo.bind(null,sr,E),[c.memoizedState,E]}function xc(E,c,f,$){return E={tag:E,create:c,destroy:f,deps:$,next:null},c=sr.updateQueue,c===null?(c={lastEffect:null,stores:null},sr.updateQueue=c,c.lastEffect=E.next=E):(f=c.lastEffect,f===null?c.lastEffect=E.next=E:($=f.next,f.next=E,E.next=$,c.lastEffect=E)),E}function Kc(){return Bs().memoizedState}function Ld(E,c,f,$){var M=Bo();sr.flags|=E,M.memoizedState=xc(1|c,f,void 0,$===void 0?null:$)}function Ga(E,c,f,$){var M=Bs();$=$===void 0?null:$;var N=void 0;if(In!==null){var G=In.memoizedState;if(N=G.destroy,$!==null&&ls($,G.deps)){M.memoizedState=xc(c,f,N,$);return}}sr.flags|=E,M.memoizedState=xc(1|c,f,N,$)}function Ta(E,c){return Ld(8390656,8,E,c)}function $u(E,c){return Ga(2048,8,E,c)}function xh(E,c){return Ga(4,2,E,c)}function si(E,c){return Ga(4,4,E,c)}function td(E,c){if(typeof c=="function")return E=E(),c(E),function(){c(null)};if(c!=null)return E=E(),c.current=E,function(){c.current=null}}function Jc(E,c,f){return f=f!=null?f.concat([E]):null,Ga(4,4,td.bind(null,c,E),f)}function qu(){}function wh(E,c){var f=Bs();c=c===void 0?null:c;var $=f.memoizedState;return $!==null&&c!==null&&ls(c,$[1])?$[0]:(f.memoizedState=[E,c],E)}function Dd(E,c){var f=Bs();c=c===void 0?null:c;var $=f.memoizedState;return $!==null&&c!==null&&ls(c,$[1])?$[0]:(E=E(),f.memoizedState=[E,c],E)}function Sl(E,c){var f=qn;qn=f!==0&&4>f?f:4,E(!0);var $=Nn.transition;Nn.transition={};try{E(!1),c()}finally{qn=f,Nn.transition=$}}function Nd(){return Bs().memoizedState}function Ch(E,c,f){var $=Ki(E);f={lane:$,action:f,hasEagerState:!1,eagerState:null,next:null},ia(E)?Uf(c,f):(jp(E,c,f),f=xr(),E=Es(E,$,f),E!==null&&El(E,c,$))}function lo(E,c,f){var $=Ki(E),M={lane:$,action:f,hasEagerState:!1,eagerState:null,next:null};if(ia(E))Uf(c,M);else{jp(E,c,M);var N=E.alternate;if(E.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var G=c.lastRenderedState,se=N(G,f);if(M.hasEagerState=!0,M.eagerState=se,fr(se,G))return}catch{}finally{}f=xr(),E=Es(E,$,f),E!==null&&El(E,c,$)}}function ia(E){var c=E.alternate;return E===sr||c!==null&&c===sr}function Uf(E,c){bs=Ns=!0;var f=E.pending;f===null?c.next=c:(c.next=f.next,f.next=c),E.pending=c}function jp(E,c,f){Ln!==null&&E.mode&1&&!(Cn&2)?(E=c.interleaved,E===null?(f.next=f,zn===null?zn=[c]:zn.push(c)):(f.next=E.next,E.next=f),c.interleaved=f):(E=c.pending,E===null?f.next=f:(f.next=E.next,E.next=f),c.pending=f)}function El(E,c,f){if(f&4194240){var $=c.lanes;$&=E.pendingLanes,f|=$,c.lanes=f,fl(E,f)}}var $l={readContext:ii,useCallback:Yi,useContext:Yi,useEffect:Yi,useImperativeHandle:Yi,useInsertionEffect:Yi,useLayoutEffect:Yi,useMemo:Yi,useReducer:Yi,useRef:Yi,useState:Yi,useDebugValue:Yi,useDeferredValue:Yi,useTransition:Yi,useMutableSource:Yi,useSyncExternalStore:Yi,useId:Yi,unstable_isNewReconciler:!1},wc={readContext:ii,useCallback:function(E,c){return Bo().memoizedState=[E,c===void 0?null:c],E},useContext:ii,useEffect:Ta,useImperativeHandle:function(E,c,f){return f=f!=null?f.concat([E]):null,Ld(4194308,4,td.bind(null,c,E),f)},useLayoutEffect:function(E,c){return Ld(4194308,4,E,c)},useInsertionEffect:function(E,c){return Ld(4,2,E,c)},useMemo:function(E,c){var f=Bo();return c=c===void 0?null:c,E=E(),f.memoizedState=[E,c],E},useReducer:function(E,c,f){var $=Bo();return c=f!==void 0?f(c):c,$.memoizedState=$.baseState=c,E={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:E,lastRenderedState:c},$.queue=E,E=E.dispatch=Ch.bind(null,sr,E),[$.memoizedState,E]},useRef:function(E){var c=Bo();return E={current:E},c.memoizedState=E},useState:ed,useDebugValue:qu,useDeferredValue:function(E){var c=ed(E),f=c[0],$=c[1];return Ta(function(){var M=Nn.transition;Nn.transition={};try{$(E)}finally{Nn.transition=M}},[E]),f},useTransition:function(){var E=ed(!1),c=E[0];return E=Sl.bind(null,E[1]),Bo().memoizedState=E,[c,E]},useMutableSource:function(){},useSyncExternalStore:function(E,c,f){var $=sr,M=Bo();if(hr){if(f===void 0)throw Error(o(407));f=f()}else{if(f=c(),Ln===null)throw Error(o(349));er&30||Eu($,c,f)}M.memoizedState=f;var N={value:f,getSnapshot:c};return M.queue=N,Ta(Zh.bind(null,$,N,E),[E]),$.flags|=2048,xc(9,qh.bind(null,$,N,f,c),void 0,null),f},useId:function(){var E=Bo(),c=Ln.identifierPrefix;if(hr){var f=Zo,$=Xs;f=($&~(1<<32-Os($)-1)).toString(32)+f,c=":"+c+"R"+f,f=To++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=ba++,c=":"+c+"r"+f.toString(32)+":";return E.memoizedState=c},unstable_isNewReconciler:!1},Mh={readContext:ii,useCallback:wh,useContext:ii,useEffect:$u,useImperativeHandle:Jc,useInsertionEffect:xh,useLayoutEffect:si,useMemo:Dd,useReducer:ra,useRef:Kc,useState:function(){return ra(Ys)},useDebugValue:qu,useDeferredValue:function(E){var c=ra(Ys),f=c[0],$=c[1];return $u(function(){var M=Nn.transition;Nn.transition={};try{$(E)}finally{Nn.transition=M}},[E]),f},useTransition:function(){var E=ra(Ys)[0],c=Bs().memoizedState;return[E,c]},useMutableSource:Yc,useSyncExternalStore:$h,useId:Nd,unstable_isNewReconciler:!1},nd={readContext:ii,useCallback:wh,useContext:ii,useEffect:$u,useImperativeHandle:Jc,useInsertionEffect:xh,useLayoutEffect:si,useMemo:Dd,useReducer:Eh,useRef:Kc,useState:function(){return Eh(Ys)},useDebugValue:qu,useDeferredValue:function(E){var c=Eh(Ys),f=c[0],$=c[1];return $u(function(){var M=Nn.transition;Nn.transition={};try{$(E)}finally{Nn.transition=M}},[E]),f},useTransition:function(){var E=Eh(Ys)[0],c=Bs().memoizedState;return[E,c]},useMutableSource:Yc,useSyncExternalStore:$h,useId:Nd,unstable_isNewReconciler:!1};function Zu(E,c){try{var f="",$=c;do f+=Jr($),$=$.return;while($);var M=f}catch(N){M=`
Error generating stack: `+N.message+`
`+N.stack}return{value:E,source:c,stack:M}}function Wa(E,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var ec=typeof WeakMap=="function"?WeakMap:Map;function rd(E,c,f){f=vu(-1,f),f.tag=3,f.payload={element:null};var $=c.value;return f.callback=function(){Ru||(Ru=!0,ku=$),Wa(E,c)},f}function Cc(E,c,f){f=vu(-1,f),f.tag=3;var $=E.type.getDerivedStateFromError;if(typeof $=="function"){var M=c.value;f.payload=function(){return $(M)},f.callback=function(){Wa(E,c)}}var N=E.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(f.callback=function(){Wa(E,c),typeof $!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var G=c.stack;this.componentDidCatch(c.value,{componentStack:G!==null?G:""})}),f}function Mc(E,c,f){var $=E.pingCache;if($===null){$=E.pingCache=new ec;var M=new Set;$.set(c,M)}else M=$.get(c),M===void 0&&(M=new Set,$.set(c,M));M.has(f)||(M.add(f),E=to.bind(null,E,c,f),c.then(E,E))}function tc(E){do{var c;if((c=E.tag===13)&&(c=E.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return E;E=E.return}while(E!==null);return null}function Bd(E,c,f,$,M){return E.mode&1?(E.flags|=65536,E.lanes=M,E):(E===c?E.flags|=65536:(E.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=vu(-1,1),c.tag=2,vs(f,c))),f.lanes|=1),E)}function sa(E){E.flags|=4}function Cr(E,c){if(E!==null&&E.child===c.child)return!0;if(c.flags&16)return!1;for(E=c.child;E!==null;){if(E.flags&12854||E.subtreeFlags&12854)return!1;E=E.sibling}return!0}var Xl,es,oa,ve;if(it)Xl=function(E,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)ae(E,f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},es=function(){},oa=function(E,c,f,$,M){if(E=E.memoizedProps,E!==$){var N=c.stateNode,G=na(ys.current);f=Le(N,f,E,$,M,G),(c.updateQueue=f)&&sa(c)}},ve=function(E,c,f,$){f!==$&&sa(c)};else if(Oe){Xl=function(E,c,f,$){for(var M=c.child;M!==null;){if(M.tag===5){var N=M.stateNode;f&&$&&(N=Wn(N,M.type,M.memoizedProps,M)),ae(E,N)}else if(M.tag===6)N=M.stateNode,f&&$&&(N=q(N,M.memoizedProps,M)),ae(E,N);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)N=M.child,N!==null&&(N.return=M),Xl(E,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===c)break;for(;M.sibling===null;){if(M.return===null||M.return===c)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var Ks=function(E,c,f,$){for(var M=c.child;M!==null;){if(M.tag===5){var N=M.stateNode;f&&$&&(N=Wn(N,M.type,M.memoizedProps,M)),Er(E,N)}else if(M.tag===6)N=M.stateNode,f&&$&&(N=q(N,M.memoizedProps,M)),Er(E,N);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)N=M.child,N!==null&&(N.return=M),Ks(E,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===c)break;for(;M.sibling===null;){if(M.return===null||M.return===c)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};es=function(E,c){var f=c.stateNode;if(!Cr(E,c)){E=f.containerInfo;var $=Pr(E);Ks($,c,!1,!1),f.pendingChildren=$,sa(c),Kr(E,$)}},oa=function(E,c,f,$,M){var N=E.stateNode,G=E.memoizedProps;if((E=Cr(E,c))&&G===$)c.stateNode=N;else{var se=c.stateNode,xe=na(ys.current),je=null;G!==$&&(je=Le(se,f,G,$,M,xe)),E&&je===null?c.stateNode=N:(N=En(N,je,f,G,$,c,E,se),_e(N,f,$,M,xe)&&sa(c),c.stateNode=N,E?sa(c):Xl(N,c,!1,!1))}},ve=function(E,c,f,$){f!==$?(E=na(yl.current),f=na(ys.current),c.stateNode=Xe($,E,f,c),sa(c)):c.stateNode=E.stateNode}}else es=function(){},oa=function(){},ve=function(){};function Va(E,c){if(!hr)switch(E.tailMode){case"hidden":c=E.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?E.tail=null:f.sibling=null;break;case"collapsed":f=E.tail;for(var $=null;f!==null;)f.alternate!==null&&($=f),f=f.sibling;$===null?c||E.tail===null?E.tail=null:E.tail.sibling=null:$.sibling=null}}function Hr(E){var c=E.alternate!==null&&E.alternate.child===E.child,f=0,$=0;if(c)for(var M=E.child;M!==null;)f|=M.lanes|M.childLanes,$|=M.subtreeFlags&14680064,$|=M.flags&14680064,M.return=E,M=M.sibling;else for(M=E.child;M!==null;)f|=M.lanes|M.childLanes,$|=M.subtreeFlags,$|=M.flags,M.return=E,M=M.sibling;return E.subtreeFlags|=$,E.childLanes=f,c}function Hn(E,c,f){var $=c.pendingProps;switch(Jh(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hr(c),null;case 1:return Xr(c.type)&&Fi(),Hr(c),null;case 3:return $=c.stateNode,jl(),pr(nr),pr(wr),Tt(),$.pendingContext&&($.context=$.pendingContext,$.pendingContext=null),(E===null||E.child===null)&&(Ju(c)?sa(c):E===null||E.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,ea!==null&&(an(ea),ea=null))),es(E,c),Hr(c),null;case 5:Od(c),f=na(yl.current);var M=c.type;if(E!==null&&c.stateNode!=null)oa(E,c,M,$,f),E.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!$){if(c.stateNode===null)throw Error(o(166));return Hr(c),null}if(E=na(ys.current),Ju(c)){if(!Ee)throw Error(o(175));E=Nt(c.stateNode,c.type,c.memoizedProps,f,E,c,!Ci),c.updateQueue=E,E!==null&&sa(c)}else{var N=ne(M,$,f,E,c);Xl(N,c,!1,!1),c.stateNode=N,_e(N,M,$,f,E)&&sa(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Hr(c),null;case 6:if(E&&c.stateNode!=null)ve(E,c,E.memoizedProps,$);else{if(typeof $!="string"&&c.stateNode===null)throw Error(o(166));if(E=na(yl.current),f=na(ys.current),Ju(c)){if(!Ee)throw Error(o(176));if(E=c.stateNode,$=c.memoizedProps,(f=yn(E,$,c,!Ci))&&(M=wi,M!==null))switch(N=(M.mode&1)!==0,M.tag){case 3:Yo(M.stateNode.containerInfo,E,$,N);break;case 5:Oo(M.type,M.memoizedProps,M.stateNode,E,$,N)}f&&sa(c)}else c.stateNode=Xe($,E,f,c)}return Hr(c),null;case 13:if(pr(_i),$=c.memoizedState,hr&&gi!==null&&(c.mode&1)!==0&&(c.flags&128)===0){for(E=gi;E;)E=Ie(E);return bc(),c.flags|=98560,c}if($!==null&&$.dehydrated!==null){if($=Ju(c),E===null){if(!$)throw Error(o(318));if(!Ee)throw Error(o(344));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));Pn(E,c)}else bc(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;return Hr(c),null}return ea!==null&&(an(ea),ea=null),c.flags&128?(c.lanes=f,c):($=$!==null,f=!1,E===null?Ju(c):f=E.memoizedState!==null,$&&!f&&(c.child.flags|=8192,c.mode&1&&(E===null||_i.current&1?Oi===0&&(Oi=3):ad())),c.updateQueue!==null&&(c.flags|=4),Hr(c),null);case 4:return jl(),es(E,c),E===null&&rt(c.stateNode.containerInfo),Hr(c),null;case 10:return _u(c.type._context),Hr(c),null;case 17:return Xr(c.type)&&Fi(),Hr(c),null;case 19:if(pr(_i),M=c.memoizedState,M===null)return Hr(c),null;if($=(c.flags&128)!==0,N=M.rendering,N===null)if($)Va(M,!1);else{if(Oi!==0||E!==null&&E.flags&128)for(E=c.child;E!==null;){if(N=Ye(E),N!==null){for(c.flags|=128,Va(M,!1),E=N.updateQueue,E!==null&&(c.updateQueue=E,c.flags|=4),c.subtreeFlags=0,E=f,$=c.child;$!==null;)f=$,M=E,f.flags&=14680066,N=f.alternate,N===null?(f.childLanes=0,f.lanes=M,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=N.childLanes,f.lanes=N.lanes,f.child=N.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=N.memoizedProps,f.memoizedState=N.memoizedState,f.updateQueue=N.updateQueue,f.type=N.type,M=N.dependencies,f.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),$=$.sibling;return fn(_i,_i.current&1|2),c.child}E=E.sibling}M.tail!==null&&$i()>od&&(c.flags|=128,$=!0,Va(M,!1),c.lanes=4194304)}else{if(!$)if(E=Ye(N),E!==null){if(c.flags|=128,$=!0,E=E.updateQueue,E!==null&&(c.updateQueue=E,c.flags|=4),Va(M,!0),M.tail===null&&M.tailMode==="hidden"&&!N.alternate&&!hr)return Hr(c),null}else 2*$i()-M.renderingStartTime>od&&f!==1073741824&&(c.flags|=128,$=!0,Va(M,!1),c.lanes=4194304);M.isBackwards?(N.sibling=c.child,c.child=N):(E=M.last,E!==null?E.sibling=N:c.child=N,M.last=N)}return M.tail!==null?(c=M.tail,M.rendering=c,M.tail=c.sibling,M.renderingStartTime=$i(),c.sibling=null,E=_i.current,fn(_i,$?E&1|2:E&1),c):(Hr(c),null);case 22:case 23:return Bt(),$=c.memoizedState!==null,E!==null&&E.memoizedState!==null!==$&&(c.flags|=8192),$&&c.mode&1?Wr&1073741824&&(Hr(c),it&&c.subtreeFlags&6&&(c.flags|=8192)):Hr(c),null;case 24:return null;case 25:return null}throw Error(o(156,c.tag))}var Xp=l.ReactCurrentOwner,Sa=!1;function Zr(E,c,f,$){c.child=E===null?Sc(c,null,f,$):Sh(c,E.child,f,$)}function vi(E,c,f,$,M){f=f.render;var N=c.ref;return fi(c,M),$=$c(E,c,f,$,N,M),f=Fr(),E!==null&&!Sa?(c.updateQueue=E.updateQueue,c.flags&=-2053,E.lanes&=~M,Gr(E,c,M)):(hr&&f&&vl(c),c.flags|=1,Zr(E,c,$,M),c.child)}function Mi(E,c,f,$,M){if(E===null){var N=f.type;return typeof N=="function"&&!zs(N)&&N.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=N,ki(E,c,N,$,M)):(E=no(f.type,null,$,c,c.mode,M),E.ref=c.ref,E.return=c,c.child=E)}if(N=E.child,(E.lanes&M)===0){var G=N.memoizedProps;if(f=f.compare,f=f!==null?f:mu,f(G,$)&&E.ref===c.ref)return Gr(E,c,M)}return c.flags|=1,E=Al(N,$),E.ref=c.ref,E.return=c,c.child=E}function ki(E,c,f,$,M){if(E!==null&&mu(E.memoizedProps,$)&&E.ref===c.ref)if(Sa=!1,(E.lanes&M)!==0)E.flags&131072&&(Sa=!0);else return c.lanes=E.lanes,Gr(E,c,M);return Fo(E,c,f,$,M)}function Ac(E,c,f){var $=c.pendingProps,M=$.children,N=E!==null?E.memoizedState:null;if($.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null},fn(qs,Wr),Wr|=f;else if(f&1073741824)c.memoizedState={baseLanes:0,cachePool:null},$=N!==null?N.baseLanes:f,fn(qs,Wr),Wr|=$;else return E=N!==null?N.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:E,cachePool:null},c.updateQueue=null,fn(qs,Wr),Wr|=E,null;else N!==null?($=N.baseLanes|f,c.memoizedState=null):$=f,fn(qs,Wr),Wr|=$;return Zr(E,c,M,f),c.child}function Po(E,c){var f=c.ref;(E===null&&f!==null||E!==null&&E.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function Fo(E,c,f,$,M){var N=Xr(f)?pi:wr.current;return N=Zi(c,N),fi(c,M),f=$c(E,c,f,$,N,M),$=Fr(),E!==null&&!Sa?(c.updateQueue=E.updateQueue,c.flags&=-2053,E.lanes&=~M,Gr(E,c,M)):(hr&&$&&vl(c),c.flags|=1,Zr(E,c,f,M),c.child)}function uo(E,c,f,$,M){if(Xr(f)){var N=!0;vc(c)}else N=!1;if(fi(c,M),c.stateNode===null)E!==null&&(E.alternate=null,c.alternate=null,c.flags|=2),Vp(c,f,$),gp(c,f,$,M),$=!0;else if(E===null){var G=c.stateNode,se=c.memoizedProps;G.props=se;var xe=G.context,je=f.contextType;typeof je=="object"&&je!==null?je=ii(je):(je=Xr(f)?pi:wr.current,je=Zi(c,je));var vt=f.getDerivedStateFromProps,Gt=typeof vt=="function"||typeof G.getSnapshotBeforeUpdate=="function";Gt||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(se!==$||xe!==je)&&Ff(c,G,$,je),Qr=!1;var en=c.memoizedState;G.state=en,mi(c,$,G,M),xe=c.memoizedState,se!==$||en!==xe||nr.current||Qr?(typeof vt=="function"&&(fp(c,f,vt,$),xe=c.memoizedState),(se=Qr||mp(c,f,se,$,en,xe,je))?(Gt||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(c.flags|=4194308)):(typeof G.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=$,c.memoizedState=xe),G.props=$,G.state=xe,G.context=je,$=se):(typeof G.componentDidMount=="function"&&(c.flags|=4194308),$=!1)}else{G=c.stateNode,Yh(E,c),se=c.memoizedProps,je=c.type===c.elementType?se:_s(c.type,se),G.props=je,Gt=c.pendingProps,en=G.context,xe=f.contextType,typeof xe=="object"&&xe!==null?xe=ii(xe):(xe=Xr(f)?pi:wr.current,xe=Zi(c,xe));var dn=f.getDerivedStateFromProps;(vt=typeof dn=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(se!==Gt||en!==xe)&&Ff(c,G,$,xe),Qr=!1,en=c.memoizedState,G.state=en,mi(c,$,G,M);var ln=c.memoizedState;se!==Gt||en!==ln||nr.current||Qr?(typeof dn=="function"&&(fp(c,f,dn,$),ln=c.memoizedState),(je=Qr||mp(c,f,je,$,en,ln,xe)||!1)?(vt||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate($,ln,xe),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate($,ln,xe)),typeof G.componentDidUpdate=="function"&&(c.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof G.componentDidUpdate!="function"||se===E.memoizedProps&&en===E.memoizedState||(c.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||se===E.memoizedProps&&en===E.memoizedState||(c.flags|=1024),c.memoizedProps=$,c.memoizedState=ln),G.props=$,G.state=ln,G.context=xe,$=je):(typeof G.componentDidUpdate!="function"||se===E.memoizedProps&&en===E.memoizedState||(c.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||se===E.memoizedProps&&en===E.memoizedState||(c.flags|=1024),$=!1)}return Ic(E,c,f,$,N,M)}function Ic(E,c,f,$,M,N){Po(E,c);var G=(c.flags&128)!==0;if(!$&&!G)return M&&Yu(c,f,!1),Gr(E,c,N);$=c.stateNode,Xp.current=c;var se=G&&typeof f.getDerivedStateFromError!="function"?null:$.render();return c.flags|=1,E!==null&&G?(c.child=Sh(c,E.child,null,N),c.child=Sh(c,null,se,N)):Zr(E,c,se,N),c.memoizedState=$.state,M&&Yu(c,f,!0),c.child}function So(E){var c=E.stateNode;c.pendingContext?Ua(E,c.pendingContext,c.pendingContext!==c.context):c.context&&Ua(E,c.context,!1),bl(E,c.containerInfo)}function Pd(E,c,f,$,M){return bc(),Th(M),c.flags|=256,Zr(E,c,f,$),c.child}var Fd={dehydrated:null,treeContext:null,retryLane:0};function Ah(E){return{baseLanes:E,cachePool:null}}function Ea(E,c,f){var $=c.pendingProps,M=_i.current,N=!1,G=(c.flags&128)!==0,se;if((se=G)||(se=E!==null&&E.memoizedState===null?!1:(M&2)!==0),se?(N=!0,c.flags&=-129):(E===null||E.memoizedState!==null)&&(M|=1),fn(_i,M&1),E===null)return Qh(c),E=c.memoizedState,E!==null&&(E=E.dehydrated,E!==null)?(c.mode&1?qt(E)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(M=$.children,E=$.fallback,N?($=c.mode,N=c.child,M={mode:"hidden",children:M},!($&1)&&N!==null?(N.childLanes=0,N.pendingProps=M):N=Aa(M,$,0,null),E=qa(E,$,f,null),N.return=c,E.return=c,N.sibling=E,c.child=N,c.child.memoizedState=Ah(f),c.memoizedState=Fd,E):Mn(c,M));if(M=E.memoizedState,M!==null){if(se=M.dehydrated,se!==null){if(G)return c.flags&256?(c.flags&=-257,oi(E,c,f,Error(o(422)))):c.memoizedState!==null?(c.child=E.child,c.flags|=128,null):(N=$.fallback,M=c.mode,$=Aa({mode:"visible",children:$.children},M,0,null),N=qa(N,M,f,null),N.flags|=2,$.return=c,N.return=c,$.sibling=N,c.child=$,c.mode&1&&Sh(c,E.child,null,f),c.child.memoizedState=Ah(f),c.memoizedState=Fd,N);if(!(c.mode&1))c=oi(E,c,f,null);else if(qt(se))c=oi(E,c,f,Error(o(419)));else if($=(f&E.childLanes)!==0,Sa||$){if($=Ln,$!==null){switch(f&-f){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}$=N&($.suspendedLanes|f)?0:N,$!==0&&$!==M.retryLane&&(M.retryLane=$,Es(E,$,-1))}ad(),c=oi(E,c,f,Error(o(421)))}else kt(se)?(c.flags|=128,c.child=E.child,c=sh.bind(null,E),_n(se,c),c=null):(f=M.treeContext,Ee&&(gi=gt(se),wi=c,hr=!0,ea=null,Ci=!1,f!==null&&(ya[Vr++]=Xs,ya[Vr++]=Zo,ya[Vr++]=cr,Xs=f.id,Zo=f.overflow,cr=c)),c=Mn(c,c.pendingProps.children),c.flags|=4096);return c}return N?($=Ts(E,c,$.children,$.fallback,f),N=c.child,M=E.child.memoizedState,N.memoizedState=M===null?Ah(f):{baseLanes:M.baseLanes|f,cachePool:null},N.childLanes=E.childLanes&~f,c.memoizedState=Fd,$):(f=us(E,c,$.children,f),c.memoizedState=null,f)}return N?($=Ts(E,c,$.children,$.fallback,f),N=c.child,M=E.child.memoizedState,N.memoizedState=M===null?Ah(f):{baseLanes:M.baseLanes|f,cachePool:null},N.childLanes=E.childLanes&~f,c.memoizedState=Fd,$):(f=us(E,c,$.children,f),c.memoizedState=null,f)}function Mn(E,c){return c=Aa({mode:"visible",children:c},E.mode,0,null),c.return=E,E.child=c}function us(E,c,f,$){var M=E.child;return E=M.sibling,f=Al(M,{mode:"visible",children:f}),!(c.mode&1)&&(f.lanes=$),f.return=c,f.sibling=null,E!==null&&($=c.deletions,$===null?(c.deletions=[E],c.flags|=16):$.push(E)),c.child=f}function Ts(E,c,f,$,M){var N=c.mode;E=E.child;var G=E.sibling,se={mode:"hidden",children:f};return!(N&1)&&c.child!==E?(f=c.child,f.childLanes=0,f.pendingProps=se,c.deletions=null):(f=Al(E,se),f.subtreeFlags=E.subtreeFlags&14680064),G!==null?$=Al(G,$):($=qa($,N,M,null),$.flags|=2),$.return=c,f.return=c,f.sibling=$,c.child=f,$}function oi(E,c,f,$){return $!==null&&Th($),Sh(c,E.child,null,f),E=Mn(c,c.pendingProps.children),E.flags|=2,c.memoizedState=null,E}function xl(E,c,f){E.lanes|=c;var $=E.alternate;$!==null&&($.lanes|=c),Ha(E.return,c,f)}function wl(E,c,f,$,M){var N=E.memoizedState;N===null?E.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:$,tail:f,tailMode:M}:(N.isBackwards=c,N.rendering=null,N.renderingStartTime=0,N.last=$,N.tail=f,N.tailMode=M)}function hn(E,c,f){var $=c.pendingProps,M=$.revealOrder,N=$.tail;if(Zr(E,c,$.children,f),$=_i.current,($&2)!==0)$=$&1|2,c.flags|=128;else{if(E!==null&&E.flags&128)e:for(E=c.child;E!==null;){if(E.tag===13)E.memoizedState!==null&&xl(E,f,c);else if(E.tag===19)xl(E,f,c);else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===c)break e;for(;E.sibling===null;){if(E.return===null||E.return===c)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}$&=1}if(fn(_i,$),(c.mode&1)===0)c.memoizedState=null;else switch(M){case"forwards":for(f=c.child,M=null;f!==null;)E=f.alternate,E!==null&&Ye(E)===null&&(M=f),f=f.sibling;f=M,f===null?(M=c.child,c.child=null):(M=f.sibling,f.sibling=null),wl(c,!1,M,f,N);break;case"backwards":for(f=null,M=c.child,c.child=null;M!==null;){if(E=M.alternate,E!==null&&Ye(E)===null){c.child=M;break}E=M.sibling,M.sibling=f,f=M,M=E}wl(c,!0,f,null,N);break;case"together":wl(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Gr(E,c,f){if(E!==null&&(c.dependencies=E.dependencies),Kl|=c.lanes,(f&c.childLanes)===0)return null;if(E!==null&&c.child!==E.child)throw Error(o(153));if(c.child!==null){for(E=c.child,f=Al(E,E.pendingProps),c.child=f,f.return=c;E.sibling!==null;)E=E.sibling,f=f.sibling=Al(E,E.pendingProps),f.return=c;f.sibling=null}return c.child}function ts(E,c,f){switch(c.tag){case 3:So(c),bc();break;case 5:Xc(c);break;case 1:Xr(c.type)&&vc(c);break;case 4:bl(c,c.stateNode.containerInfo);break;case 10:oo(c,c.type._context,c.memoizedProps.value);break;case 13:var $=c.memoizedState;if($!==null)return $.dehydrated!==null?(fn(_i,_i.current&1),c.flags|=128,null):f&c.child.childLanes?Ea(E,c,f):(fn(_i,_i.current&1),E=Gr(E,c,f),E!==null?E.sibling:null);fn(_i,_i.current&1);break;case 19:if($=(f&c.childLanes)!==0,(E.flags&128)!==0){if($)return hn(E,c,f);c.flags|=128}var M=c.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),fn(_i,_i.current),$)break;return null;case 22:case 23:return c.lanes=0,Ac(E,c,f)}return Gr(E,c,f)}function Yp(E,c){switch(Jh(c),c.tag){case 1:return Xr(c.type)&&Fi(),E=c.flags,E&65536?(c.flags=E&-65537|128,c):null;case 3:return jl(),pr(nr),pr(wr),Tt(),E=c.flags,E&65536&&!(E&128)?(c.flags=E&-65537|128,c):null;case 5:return Od(c),null;case 13:if(pr(_i),E=c.memoizedState,E!==null&&E.dehydrated!==null){if(c.alternate===null)throw Error(o(340));bc()}return E=c.flags,E&65536?(c.flags=E&-65537|128,c):null;case 19:return pr(_i),null;case 4:return jl(),null;case 10:return _u(c.type._context),null;case 22:case 23:return Bt(),null;case 24:return null;default:return null}}var Qc=!1,Ps=!1,Uo=typeof WeakSet=="function"?WeakSet:Set,pn=null;function sn(E,c){var f=E.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch($){wo(E,c,$)}else f.current=null}function ja(E,c,f){try{f()}catch($){wo(E,c,$)}}var nc=!1;function zf(E,c){for(j(E.containerInfo),pn=c;pn!==null;)if(E=pn,c=E.child,(E.subtreeFlags&1028)!==0&&c!==null)c.return=E,pn=c;else for(;pn!==null;){E=pn;try{var f=E.alternate;if(E.flags&1024)switch(E.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var $=f.memoizedProps,M=f.memoizedState,N=E.stateNode,G=N.getSnapshotBeforeUpdate(E.elementType===E.type?$:_s(E.type,$),M);N.__reactInternalSnapshotBeforeUpdate=G}break;case 3:it&&zt(E.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(se){wo(E,E.return,se)}if(c=E.sibling,c!==null){c.return=E.return,pn=c;break}pn=E.return}return f=nc,nc=!1,f}function xu(E,c,f){var $=c.updateQueue;if($=$!==null?$.lastEffect:null,$!==null){var M=$=$.next;do{if((M.tag&E)===E){var N=M.destroy;M.destroy=void 0,N!==void 0&&ja(c,f,N)}M=M.next}while(M!==$)}}function aa(E,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&E)===E){var $=f.create;f.destroy=$()}f=f.next}while(f!==c)}}function cs(E){var c=E.ref;if(c!==null){var f=E.stateNode;switch(E.tag){case 5:E=ce(f);break;default:E=f}typeof c=="function"?c(E):c.current=E}}function $a(E,c,f){if(Do&&typeof Do.onCommitFiberUnmount=="function")try{Do.onCommitFiberUnmount(pu,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:if(E=c.updateQueue,E!==null&&(E=E.lastEffect,E!==null)){var $=E=E.next;do{var M=$,N=M.destroy;M=M.tag,N!==void 0&&(M&2||M&4)&&ja(c,f,N),$=$.next}while($!==E)}break;case 1:if(sn(c,f),E=c.stateNode,typeof E.componentWillUnmount=="function")try{E.props=c.memoizedProps,E.state=c.memoizedState,E.componentWillUnmount()}catch(G){wo(c,f,G)}break;case 5:sn(c,f);break;case 4:it?qc(E,c,f):Oe&&Oe&&(c=c.stateNode.containerInfo,f=Pr(c),or(c,f))}}function Gi(E,c,f){for(var $=c;;)if($a(E,$,f),$.child===null||it&&$.tag===4){if($===c)break;for(;$.sibling===null;){if($.return===null||$.return===c)return;$=$.return}$.sibling.return=$.return,$=$.sibling}else $.child.return=$,$=$.child}function xa(E){var c=E.alternate;c!==null&&(E.alternate=null,xa(c)),E.child=null,E.deletions=null,E.sibling=null,E.tag===5&&(c=E.stateNode,c!==null&&dt(c)),E.stateNode=null,E.return=null,E.dependencies=null,E.memoizedProps=null,E.memoizedState=null,E.pendingProps=null,E.stateNode=null,E.updateQueue=null}function wu(E){return E.tag===5||E.tag===3||E.tag===4}function Ud(E){e:for(;;){for(;E.sibling===null;){if(E.return===null||wu(E.return))return null;E=E.return}for(E.sibling.return=E.return,E=E.sibling;E.tag!==5&&E.tag!==6&&E.tag!==18;){if(E.flags&2||E.child===null||E.tag===4)continue e;E.child.return=E,E=E.child}if(!(E.flags&2))return E.stateNode}}function rc(E){if(it){e:{for(var c=E.return;c!==null;){if(wu(c))break e;c=c.return}throw Error(o(160))}var f=c;switch(f.tag){case 5:c=f.stateNode,f.flags&32&&(Ft(c),f.flags&=-33),f=Ud(E),zd(E,f,c);break;case 3:case 4:c=f.stateNode.containerInfo,f=Ud(E),Js(E,f,c);break;default:throw Error(o(161))}}}function Js(E,c,f){var $=E.tag;if($===5||$===6)E=E.stateNode,c?le(f,E,c):at(f,E);else if($!==4&&(E=E.child,E!==null))for(Js(E,c,f),E=E.sibling;E!==null;)Js(E,c,f),E=E.sibling}function zd(E,c,f){var $=E.tag;if($===5||$===6)E=E.stateNode,c?Q(f,E,c):xt(f,E);else if($!==4&&(E=E.child,E!==null))for(zd(E,c,f),E=E.sibling;E!==null;)zd(E,c,f),E=E.sibling}function qc(E,c,f){for(var $=c,M=!1,N,G;;){if(!M){M=$.return;e:for(;;){if(M===null)throw Error(o(160));switch(N=M.stateNode,M.tag){case 5:G=!1;break e;case 3:N=N.containerInfo,G=!0;break e;case 4:N=N.containerInfo,G=!0;break e}M=M.return}M=!0}if($.tag===5||$.tag===6)Gi(E,$,f),G?We(N,$.stateNode):$e(N,$.stateNode);else if($.tag===18)G?Ir(N,$.stateNode):$r(N,$.stateNode);else if($.tag===4){if($.child!==null){N=$.stateNode.containerInfo,G=!0,$.child.return=$,$=$.child;continue}}else if($a(E,$,f),$.child!==null){$.child.return=$,$=$.child;continue}if($===c)break;for(;$.sibling===null;){if($.return===null||$.return===c)return;$=$.return,$.tag===4&&(M=!1)}$.sibling.return=$.return,$=$.sibling}}function id(E,c){if(it){switch(c.tag){case 0:case 11:case 14:case 15:xu(3,c,c.return),aa(3,c),xu(5,c,c.return);return;case 1:return;case 5:var f=c.stateNode;if(f!=null){var $=c.memoizedProps;E=E!==null?E.memoizedProps:$;var M=c.type,N=c.updateQueue;c.updateQueue=null,N!==null&&X(f,N,M,E,$,c)}return;case 6:if(c.stateNode===null)throw Error(o(162));f=c.memoizedProps,Ge(c.stateNode,E!==null?E.memoizedProps:f,f);return;case 3:Ee&&E!==null&&E.memoizedState.isDehydrated&&yr(c.stateNode.containerInfo);return;case 12:return;case 13:wa(c);return;case 19:wa(c);return;case 17:return}throw Error(o(163))}switch(c.tag){case 0:case 11:case 14:case 15:xu(3,c,c.return),aa(3,c),xu(5,c,c.return);return;case 12:return;case 13:wa(c);return;case 19:wa(c);return;case 3:Ee&&E!==null&&E.memoizedState.isDehydrated&&yr(c.stateNode.containerInfo);break;case 22:case 23:return}e:if(Oe){switch(c.tag){case 1:case 5:case 6:break e;case 3:case 4:c=c.stateNode,or(c.containerInfo,c.pendingChildren);break e}throw Error(o(163))}}function wa(E){var c=E.updateQueue;if(c!==null){E.updateQueue=null;var f=E.stateNode;f===null&&(f=E.stateNode=new Uo),c.forEach(function($){var M=Qa.bind(null,E,$);f.has($)||(f.add($),$.then(M,M))})}}function Cl(E,c){for(pn=c;pn!==null;){c=pn;var f=c.deletions;if(f!==null)for(var $=0;$<f.length;$++){var M=f[$];try{var N=E;it?qc(N,M,c):Gi(N,M,c);var G=M.alternate;G!==null&&(G.return=null),M.return=null}catch(Lt){wo(M,c,Lt)}}if(f=c.child,(c.subtreeFlags&12854)!==0&&f!==null)f.return=c,pn=f;else for(;pn!==null;){c=pn;try{var se=c.flags;if(se&32&&it&&Ft(c.stateNode),se&512){var xe=c.alternate;if(xe!==null){var je=xe.ref;je!==null&&(typeof je=="function"?je(null):je.current=null)}}if(se&8192)switch(c.tag){case 13:if(c.memoizedState!==null){var vt=c.alternate;(vt===null||vt.memoizedState===null)&&(ho=$i())}break;case 22:var Gt=c.memoizedState!==null,en=c.alternate,dn=en!==null&&en.memoizedState!==null;if(f=c,it){e:if($=f,M=Gt,N=null,it)for(var ln=$;;){if(ln.tag===5){if(N===null){N=ln;var rn=ln.stateNode;M?Be(rn):ut(ln.stateNode,ln.memoizedProps)}}else if(ln.tag===6){if(N===null){var Tr=ln.stateNode;M?Ut(Tr):Ht(Tr,ln.memoizedProps)}}else if((ln.tag!==22&&ln.tag!==23||ln.memoizedState===null||ln===$)&&ln.child!==null){ln.child.return=ln,ln=ln.child;continue}if(ln===$)break;for(;ln.sibling===null;){if(ln.return===null||ln.return===$)break e;N===ln&&(N=null),ln=ln.return}N===ln&&(N=null),ln.sibling.return=ln.return,ln=ln.sibling}}if(Gt&&!dn&&f.mode&1){pn=f;for(var _t=f.child;_t!==null;){for(f=pn=_t;pn!==null;){$=pn;var Se=$.child;switch($.tag){case 0:case 11:case 14:case 15:xu(4,$,$.return);break;case 1:sn($,$.return);var Me=$.stateNode;if(typeof Me.componentWillUnmount=="function"){var Ke=$.return;try{Me.props=$.memoizedProps,Me.state=$.memoizedState,Me.componentWillUnmount()}catch(Lt){wo($,Ke,Lt)}}break;case 5:sn($,$.return);break;case 22:if($.memoizedState!==null){sd(f);continue}}Se!==null?(Se.return=$,pn=Se):sd(f)}_t=_t.sibling}}}switch(se&4102){case 2:rc(c),c.flags&=-3;break;case 6:rc(c),c.flags&=-3,id(c.alternate,c);break;case 4096:c.flags&=-4097;break;case 4100:c.flags&=-4097,id(c.alternate,c);break;case 4:id(c.alternate,c)}}catch(Lt){wo(c,c.return,Lt)}if(f=c.sibling,f!==null){f.return=c.return,pn=f;break}pn=c.return}}}function Kp(E,c,f){pn=E,Yl(E)}function Yl(E,c,f){for(var $=(E.mode&1)!==0;pn!==null;){var M=pn,N=M.child;if(M.tag===22&&$){var G=M.memoizedState!==null||Qc;if(!G){var se=M.alternate,xe=se!==null&&se.memoizedState!==null||Ps;se=Qc;var je=Ps;if(Qc=G,(Ps=xe)&&!je)for(pn=M;pn!==null;)G=pn,xe=G.child,G.tag===22&&G.memoizedState!==null?Rc(M):xe!==null?(xe.return=G,pn=xe):Rc(M);for(;N!==null;)pn=N,Yl(N),N=N.sibling;pn=M,Qc=se,Ps=je}Cu(E)}else M.subtreeFlags&8772&&N!==null?(N.return=M,pn=N):Cu(E)}}function Cu(E){for(;pn!==null;){var c=pn;if(c.flags&8772){var f=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:Ps||aa(5,c);break;case 1:var $=c.stateNode;if(c.flags&4&&!Ps)if(f===null)$.componentDidMount();else{var M=c.elementType===c.type?f.memoizedProps:_s(c.type,f.memoizedProps);$.componentDidUpdate(M,f.memoizedState,$.__reactInternalSnapshotBeforeUpdate)}var N=c.updateQueue;N!==null&&yu(c,N,$);break;case 3:var G=c.updateQueue;if(G!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=ce(c.child.stateNode);break;case 1:f=c.child.stateNode}yu(c,G,f)}break;case 5:var se=c.stateNode;f===null&&c.flags&4&&Ce(se,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(Ee&&c.memoizedState===null){var xe=c.alternate;if(xe!==null){var je=xe.memoizedState;if(je!==null){var vt=je.dehydrated;vt!==null&&ni(vt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Ps||c.flags&512&&cs(c)}catch(Gt){wo(c,c.return,Gt)}}if(c===E){pn=null;break}if(f=c.sibling,f!==null){f.return=c.return,pn=f;break}pn=c.return}}function sd(E){for(;pn!==null;){var c=pn;if(c===E){pn=null;break}var f=c.sibling;if(f!==null){f.return=c.return,pn=f;break}pn=c.return}}function Rc(E){for(;pn!==null;){var c=pn;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{aa(4,c)}catch(xe){wo(c,f,xe)}break;case 1:var $=c.stateNode;if(typeof $.componentDidMount=="function"){var M=c.return;try{$.componentDidMount()}catch(xe){wo(c,M,xe)}}var N=c.return;try{cs(c)}catch(xe){wo(c,N,xe)}break;case 5:var G=c.return;try{cs(c)}catch(xe){wo(c,G,xe)}}}catch(xe){wo(c,c.return,xe)}if(c===E){pn=null;break}var se=c.sibling;if(se!==null){se.return=c.return,pn=se;break}pn=c.return}}var hs=0,Mu=1,ic=2,Eo=3,Xa=4;if(typeof Symbol=="function"&&Symbol.for){var Ss=Symbol.for;hs=Ss("selector.component"),Mu=Ss("selector.has_pseudo_class"),ic=Ss("selector.role"),Eo=Ss("selector.test_id"),Xa=Ss("selector.text")}function co(E){var c=Fe(E);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(o(364));return c}if(E=$t(E),E===null)throw Error(o(362));return E.stateNode.current}function Zc(E,c){switch(c.$$typeof){case hs:if(E.type===c.value)return!0;break;case Mu:e:{c=c.value,E=[E,0];for(var f=0;f<E.length;){var $=E[f++],M=E[f++],N=c[M];if($.tag!==5||!te($)){for(;N!=null&&Zc($,N);)M++,N=c[M];if(M===c.length){c=!0;break e}else for($=$.child;$!==null;)E.push($,M),$=$.sibling}}c=!1}return c;case ic:if(E.tag===5&&ke(E.stateNode,c.value))return!0;break;case Xa:if((E.tag===5||E.tag===6)&&(E=Te(E),E!==null&&0<=E.indexOf(c.value)))return!0;break;case Eo:if(E.tag===5&&(E=E.memoizedProps["data-testname"],typeof E=="string"&&E.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Qs(E){switch(E.$$typeof){case hs:return"<"+(H(E.value)||"Unknown")+">";case Mu:return":has("+(Qs(E)||"")+")";case ic:return'[role="'+E.value+'"]';case Xa:return'"'+E.value+'"';case Eo:return'[data-testname="'+E.value+'"]';default:throw Error(o(365))}}function Ya(E,c){var f=[];E=[E,0];for(var $=0;$<E.length;){var M=E[$++],N=E[$++],G=c[N];if(M.tag!==5||!te(M)){for(;G!=null&&Zc(M,G);)N++,G=c[N];if(N===c.length)f.push(M);else for(M=M.child;M!==null;)E.push(M,N),M=M.sibling}}return f}function sc(E,c){if(!wt)throw Error(o(363));E=co(E),E=Ya(E,c),c=[],E=Array.from(E);for(var f=0;f<E.length;){var $=E[f++];if($.tag===5)te($)||c.push($.stateNode);else for($=$.child;$!==null;)E.push($),$=$.sibling}return c}var yp=Math.ceil,eh=l.ReactCurrentDispatcher,la=l.ReactCurrentOwner,yi=l.ReactCurrentBatchConfig,Cn=0,Ln=null,br=null,Lr=0,Wr=0,qs=di(0),Oi=0,Wi=null,Kl=0,Au=0,oc=0,Iu=null,Fs=null,ho=0,od=1/0;function Ca(){od=$i()+500}var Ru=!1,ku=null,Zs=null,$o=!1,Ka=null,xo=0,ac=0,Ou=null,Ih=-1,th=0;function xr(){return Cn&6?$i():Ih!==-1?Ih:Ih=$i()}function Ki(E){return E.mode&1?Cn&2&&Lr!==0?Lr&-Lr:qo.transition!==null?(th===0&&(E=_h,_h<<=1,!(_h&4194240)&&(_h=64),th=E),th):(E=qn,E!==0?E:nt()):1}function Es(E,c,f){if(50<ac)throw ac=0,Ou=null,Error(o(185));var $=ua(E,c);return $===null?null:(du($,c,f),(!(Cn&2)||$!==Ln)&&($===Ln&&(!(Cn&2)&&(Au|=c),Oi===4&&ns($,Lr)),Us($,f),c===1&&Cn===0&&!(E.mode&1)&&(Ca(),Ds&&Qo())),$)}function ua(E,c){E.lanes|=c;var f=E.alternate;for(f!==null&&(f.lanes|=c),f=E,E=E.return;E!==null;)E.childLanes|=c,f=E.alternate,f!==null&&(f.childLanes|=c),f=E,E=E.return;return f.tag===3?f.stateNode:null}function Us(E,c){var f=E.callbackNode;vh(E,c);var $=Ui(E,E===Ln?Lr:0);if($===0)f!==null&&za(f),E.callbackNode=null,E.callbackPriority=0;else if(c=$&-$,E.callbackPriority!==c){if(f!=null&&za(f),c===1)E.tag===0?jc(Ml.bind(null,E)):Gl(Ml.bind(null,E)),It?mt(function(){Cn===0&&Qo()}):ml(zi,Qo),f=null;else{switch(Zn($)){case 1:f=zi;break;case 4:f=gl;break;case 16:f=kd;break;case 536870912:f=Ls;break;default:f=kd}f=oh(f,Vn.bind(null,E))}E.callbackPriority=c,E.callbackNode=f}}function Vn(E,c){if(Ih=-1,th=0,(Cn&6)!==0)throw Error(o(327));var f=E.callbackNode;if(ih()&&E.callbackNode!==f)return null;var $=Ui(E,E===Ln?Lr:0);if($===0)return null;if($&30||$&E.expiredLanes||c)c=nh(E,$);else{c=$;var M=Cn;Cn|=2;var N=Oc();(Ln!==E||Lr!==c)&&(Ca(),Ma(E,c));do try{$s();break}catch(se){Dr(E,se)}while(!0);gu(),eh.current=N,Cn=M,br!==null?c=0:(Ln=null,Lr=0,c=Oi)}if(c!==0){if(c===2&&(M=yc(E),M!==0&&($=M,c=kc(E,M))),c===1)throw f=Wi,Ma(E,0),ns(E,$),Us(E,$i()),f;if(c===6)ns(E,$);else{if(M=E.current.alternate,($&30)===0&&!ai(M)&&(c=nh(E,$),c===2&&(N=yc(E),N!==0&&($=N,c=kc(E,N))),c===1))throw f=Wi,Ma(E,0),ns(E,$),Us(E,$i()),f;switch(E.finishedWork=M,E.finishedLanes=$,c){case 0:case 1:throw Error(o(345));case 2:Jl(E,Fs);break;case 3:if(ns(E,$),($&130023424)===$&&(c=ho+500-$i(),10<c)){if(Ui(E,0)!==0)break;if(M=E.suspendedLanes,(M&$)!==$){xr(),E.pingedLanes|=E.suspendedLanes&M;break}E.timeoutHandle=Re(Jl.bind(null,E,Fs),c);break}Jl(E,Fs);break;case 4:if(ns(E,$),($&4194240)===$)break;for(c=E.eventTimes,M=-1;0<$;){var G=31-Os($);N=1<<G,G=c[G],G>M&&(M=G),$&=~N}if($=M,$=$i()-$,$=(120>$?120:480>$?480:1080>$?1080:1920>$?1920:3e3>$?3e3:4320>$?4320:1960*yp($/1960))-$,10<$){E.timeoutHandle=Re(Jl.bind(null,E,Fs),$);break}Jl(E,Fs);break;case 5:Jl(E,Fs);break;default:throw Error(o(329))}}}return Us(E,$i()),E.callbackNode===f?Vn.bind(null,E):null}function kc(E,c){var f=Iu;return E.current.memoizedState.isDehydrated&&(Ma(E,c).flags|=256),E=nh(E,c),E!==2&&(c=Fs,Fs=f,c!==null&&an(c)),E}function an(E){Fs===null?Fs=E:Fs.push.apply(Fs,E)}function ai(E){for(var c=E;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var $=0;$<f.length;$++){var M=f[$],N=M.getSnapshot;M=M.value;try{if(!fr(N(),M))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===E)break;for(;c.sibling===null;){if(c.return===null||c.return===E)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ns(E,c){for(c&=~oc,c&=~Au,E.suspendedLanes|=c,E.pingedLanes&=~c,E=E.expirationTimes;0<c;){var f=31-Os(c),$=1<<f;E[f]=-1,c&=~$}}function Ml(E){if(Cn&6)throw Error(o(327));ih();var c=Ui(E,0);if(!(c&1))return Us(E,$i()),null;var f=nh(E,c);if(E.tag!==0&&f===2){var $=yc(E);$!==0&&(c=$,f=kc(E,$))}if(f===1)throw f=Wi,Ma(E,0),ns(E,c),Us(E,$i()),f;if(f===6)throw Error(o(345));return E.finishedWork=E.current.alternate,E.finishedLanes=c,Jl(E,Fs),Us(E,$i()),null}function Ja(E){Ka!==null&&Ka.tag===0&&!(Cn&6)&&ih();var c=Cn;Cn|=1;var f=yi.transition,$=qn;try{if(yi.transition=null,qn=1,E)return E()}finally{qn=$,yi.transition=f,Cn=c,!(Cn&6)&&Qo()}}function Bt(){Wr=qs.current,pr(qs)}function Ma(E,c){E.finishedWork=null,E.finishedLanes=0;var f=E.timeoutHandle;if(f!==Je&&(E.timeoutHandle=Je,qe(f)),br!==null)for(f=br.return;f!==null;){var $=f;switch(Jh($),$.tag){case 1:$=$.type.childContextTypes,$!=null&&Fi();break;case 3:jl(),pr(nr),pr(wr),Tt();break;case 5:Od($);break;case 4:jl();break;case 13:pr(_i);break;case 19:pr(_i);break;case 10:_u($.type._context);break;case 22:case 23:Bt()}f=f.return}if(Ln=E,br=E=Al(E.current,null),Lr=Wr=c,Oi=0,Wi=null,oc=Au=Kl=0,Fs=Iu=null,zn!==null){for(c=0;c<zn.length;c++)if(f=zn[c],$=f.interleaved,$!==null){f.interleaved=null;var M=$.next,N=f.pending;if(N!==null){var G=N.next;N.next=M,$.next=G}f.pending=$}zn=null}return E}function Dr(E,c){do{var f=br;try{if(gu(),gn.current=$l,Ns){for(var $=sr.memoizedState;$!==null;){var M=$.queue;M!==null&&(M.pending=null),$=$.next}Ns=!1}if(er=0,Rr=In=sr=null,bs=!1,To=0,la.current=null,f===null||f.return===null){Oi=1,Wi=c,br=null;break}e:{var N=E,G=f.return,se=f,xe=c;if(c=Lr,se.flags|=32768,xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){var je=xe,vt=se,Gt=vt.tag;if(!(vt.mode&1)&&(Gt===0||Gt===11||Gt===15)){var en=vt.alternate;en?(vt.updateQueue=en.updateQueue,vt.memoizedState=en.memoizedState,vt.lanes=en.lanes):(vt.updateQueue=null,vt.memoizedState=null)}var dn=tc(G);if(dn!==null){dn.flags&=-257,Bd(dn,G,se,N,c),dn.mode&1&&Mc(N,je,c),c=dn,xe=je;var ln=c.updateQueue;if(ln===null){var rn=new Set;rn.add(xe),c.updateQueue=rn}else ln.add(xe);break e}else{if(!(c&1)){Mc(N,je,c),ad();break e}xe=Error(o(426))}}else if(hr&&se.mode&1){var Tr=tc(G);if(Tr!==null){!(Tr.flags&65536)&&(Tr.flags|=256),Bd(Tr,G,se,N,c),Th(xe);break e}}N=xe,Oi!==4&&(Oi=2),Iu===null?Iu=[N]:Iu.push(N),xe=Zu(xe,se),se=G;do{switch(se.tag){case 3:se.flags|=65536,c&=-c,se.lanes|=c;var _t=rd(se,xe,c);Kh(se,_t);break e;case 1:N=xe;var Se=se.type,Me=se.stateNode;if(!(se.flags&128)&&(typeof Se.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(Zs===null||!Zs.has(Me)))){se.flags|=65536,c&=-c,se.lanes|=c;var Ke=Cc(se,N,c);Kh(se,Ke);break e}}se=se.return}while(se!==null)}eo(f)}catch(Lt){c=Lt,br===f&&f!==null&&(br=f=f.return);continue}break}while(!0)}function Oc(){var E=eh.current;return eh.current=$l,E===null?$l:E}function ad(){(Oi===0||Oi===3||Oi===2)&&(Oi=4),Ln===null||!(Kl&268435455)&&!(Au&268435455)||ns(Ln,Lr)}function nh(E,c){var f=Cn;Cn|=2;var $=Oc();Ln===E&&Lr===c||Ma(E,c);do try{rs();break}catch(M){Dr(E,M)}while(!0);if(gu(),Cn=f,eh.current=$,br!==null)throw Error(o(261));return Ln=null,Lr=0,Oi}function rs(){for(;br!==null;)Rh(br)}function $s(){for(;br!==null&&!_a();)Rh(br)}function Rh(E){var c=Du(E.alternate,E,Wr);E.memoizedProps=E.pendingProps,c===null?eo(E):br=c,la.current=null}function eo(E){var c=E;do{var f=c.alternate;if(E=c.return,(c.flags&32768)===0){if(f=Hn(f,c,Wr),f!==null){br=f;return}}else{if(f=Yp(f,c),f!==null){f.flags&=32767,br=f;return}if(E!==null)E.flags|=32768,E.subtreeFlags=0,E.deletions=null;else{Oi=6,br=null;return}}if(c=c.sibling,c!==null){br=c;return}br=c=E}while(c!==null);Oi===0&&(Oi=5)}function Jl(E,c){var f=qn,$=yi.transition;try{yi.transition=null,qn=1,rh(E,c,f)}finally{yi.transition=$,qn=f}return null}function rh(E,c,f){do ih();while(Ka!==null);if(Cn&6)throw Error(o(327));var $=E.finishedWork,M=E.finishedLanes;if($===null)return null;if(E.finishedWork=null,E.finishedLanes=0,$===E.current)throw Error(o(177));E.callbackNode=null,E.callbackPriority=0;var N=$.lanes|$.childLanes;if(pl(E,N),E===Ln&&(br=Ln=null,Lr=0),!($.subtreeFlags&2064)&&!($.flags&2064)||$o||($o=!0,oh(kd,function(){return ih(),null})),N=($.flags&15990)!==0,($.subtreeFlags&15990)!==0||N){N=yi.transition,yi.transition=null;var G=qn;qn=1;var se=Cn;Cn|=4,la.current=null,zf(E,$),Cl(E,$),Z(E.containerInfo),E.current=$,Kp($),zl(),Cn=se,qn=G,yi.transition=N}else E.current=$;if($o&&($o=!1,Ka=E,xo=M),N=E.pendingLanes,N===0&&(Zs=null),Hl($.stateNode),Us(E,$i()),c!==null)for(f=E.onRecoverableError,$=0;$<c.length;$++)f(c[$]);if(Ru)throw Ru=!1,E=ku,ku=null,E;return xo&1&&E.tag!==0&&ih(),N=E.pendingLanes,N&1?E===Ou?ac++:(ac=0,Ou=E):ac=0,Qo(),null}function ih(){if(Ka!==null){var E=Zn(xo),c=yi.transition,f=qn;try{if(yi.transition=null,qn=16>E?16:E,Ka===null)var $=!1;else{if(E=Ka,Ka=null,xo=0,(Cn&6)!==0)throw Error(o(331));var M=Cn;for(Cn|=4,pn=E.current;pn!==null;){var N=pn,G=N.child;if(pn.flags&16){var se=N.deletions;if(se!==null){for(var xe=0;xe<se.length;xe++){var je=se[xe];for(pn=je;pn!==null;){var vt=pn;switch(vt.tag){case 0:case 11:case 15:xu(8,vt,N)}var Gt=vt.child;if(Gt!==null)Gt.return=vt,pn=Gt;else for(;pn!==null;){vt=pn;var en=vt.sibling,dn=vt.return;if(xa(vt),vt===je){pn=null;break}if(en!==null){en.return=dn,pn=en;break}pn=dn}}}var ln=N.alternate;if(ln!==null){var rn=ln.child;if(rn!==null){ln.child=null;do{var Tr=rn.sibling;rn.sibling=null,rn=Tr}while(rn!==null)}}pn=N}}if(N.subtreeFlags&2064&&G!==null)G.return=N,pn=G;else e:for(;pn!==null;){if(N=pn,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:xu(9,N,N.return)}var _t=N.sibling;if(_t!==null){_t.return=N.return,pn=_t;break e}pn=N.return}}var Se=E.current;for(pn=Se;pn!==null;){G=pn;var Me=G.child;if(G.subtreeFlags&2064&&Me!==null)Me.return=G,pn=Me;else e:for(G=Se;pn!==null;){if(se=pn,(se.flags&2048)!==0)try{switch(se.tag){case 0:case 11:case 15:aa(9,se)}}catch(Lt){wo(se,se.return,Lt)}if(se===G){pn=null;break e}var Ke=se.sibling;if(Ke!==null){Ke.return=se.return,pn=Ke;break e}pn=se.return}}if(Cn=M,Qo(),Do&&typeof Do.onPostCommitFiberRoot=="function")try{Do.onPostCommitFiberRoot(pu,E)}catch{}$=!0}return $}finally{qn=f,yi.transition=c}}return!1}function lc(E,c,f){c=Zu(f,c),c=rd(E,c,1),vs(E,c),c=xr(),E=ua(E,1),E!==null&&(du(E,1,c),Us(E,c))}function wo(E,c,f){if(E.tag===3)lc(E,E,f);else for(;c!==null;){if(c.tag===3){lc(c,E,f);break}else if(c.tag===1){var $=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof $.componentDidCatch=="function"&&(Zs===null||!Zs.has($))){E=Zu(f,E),E=Cc(c,E,1),vs(c,E),E=xr(),c=ua(c,1),c!==null&&(du(c,1,E),Us(c,E));break}}c=c.return}}function to(E,c,f){var $=E.pingCache;$!==null&&$.delete(c),c=xr(),E.pingedLanes|=E.suspendedLanes&f,Ln===E&&(Lr&f)===f&&(Oi===4||Oi===3&&(Lr&130023424)===Lr&&500>$i()-ho?Ma(E,0):oc|=f),Us(E,c)}function Lu(E,c){c===0&&(E.mode&1?(c=Jo,Jo<<=1,!(Jo&130023424)&&(Jo=4194304)):c=1);var f=xr();E=ua(E,c),E!==null&&(du(E,c,f),Us(E,f))}function sh(E){var c=E.memoizedState,f=0;c!==null&&(f=c.retryLane),Lu(E,f)}function Qa(E,c){var f=0;switch(E.tag){case 13:var $=E.stateNode,M=E.memoizedState;M!==null&&(f=M.retryLane);break;case 19:$=E.stateNode;break;default:throw Error(o(314))}$!==null&&$.delete(c),Lu(E,f)}var Du;Du=function(E,c,f){if(E!==null)if(E.memoizedProps!==c.pendingProps||nr.current)Sa=!0;else{if(!(E.lanes&f)&&!(c.flags&128))return Sa=!1,ts(E,c,f);Sa=(E.flags&131072)!==0}else Sa=!1,hr&&c.flags&1048576&&Tu(c,bh,c.index);switch(c.lanes=0,c.tag){case 2:var $=c.type;E!==null&&(E.alternate=null,c.alternate=null,c.flags|=2),E=c.pendingProps;var M=Zi(c,wr.current);fi(c,f),M=$c(null,c,$,E,M,f);var N=Fr();return c.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Xr($)?(N=!0,vc(c)):N=!1,c.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,xi(c),M.updater=yh,c.stateNode=M,M._reactInternals=c,gp(c,$,E,f),c=Ic(null,c,$,!0,N,f)):(c.tag=0,hr&&N&&vl(c),Zr(null,c,M,f),c=c.child),c;case 16:$=c.elementType;e:{switch(E!==null&&(E.alternate=null,c.alternate=null,c.flags|=2),E=c.pendingProps,M=$._init,$=M($._payload),c.type=$,M=c.tag=Nu($),E=_s($,E),M){case 0:c=Fo(null,c,$,E,f);break e;case 1:c=uo(null,c,$,E,f);break e;case 11:c=vi(null,c,$,E,f);break e;case 14:c=Mi(null,c,$,_s($.type,E),f);break e}throw Error(o(306,$,""))}return c;case 0:return $=c.type,M=c.pendingProps,M=c.elementType===$?M:_s($,M),Fo(E,c,$,M,f);case 1:return $=c.type,M=c.pendingProps,M=c.elementType===$?M:_s($,M),uo(E,c,$,M,f);case 3:e:{if(So(c),E===null)throw Error(o(387));$=c.pendingProps,N=c.memoizedState,M=N.element,Yh(E,c),mi(c,$,null,f);var G=c.memoizedState;if($=G.element,Ee&&N.isDehydrated)if(N={element:$,isDehydrated:!1,cache:G.cache,transitions:G.transitions},c.updateQueue.baseState=N,c.memoizedState=N,c.flags&256){M=Error(o(423)),c=Pd(E,c,$,f,M);break e}else if($!==M){M=Error(o(424)),c=Pd(E,c,$,f,M);break e}else for(Ee&&(gi=Et(c.stateNode.containerInfo),wi=c,hr=!0,ea=null,Ci=!1),f=Sc(c,null,$,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(bc(),$===M){c=Gr(E,c,f);break e}Zr(E,c,$,f)}c=c.child}return c;case 5:return Xc(c),E===null&&Qh(c),$=c.type,M=c.pendingProps,N=E!==null?E.memoizedProps:null,G=M.children,we($,M)?G=null:N!==null&&we($,N)&&(c.flags|=32),Po(E,c),Zr(E,c,G,f),c.child;case 6:return E===null&&Qh(c),null;case 13:return Ea(E,c,f);case 4:return bl(c,c.stateNode.containerInfo),$=c.pendingProps,E===null?c.child=Sh(c,null,$,f):Zr(E,c,$,f),c.child;case 11:return $=c.type,M=c.pendingProps,M=c.elementType===$?M:_s($,M),vi(E,c,$,M,f);case 7:return Zr(E,c,c.pendingProps,f),c.child;case 8:return Zr(E,c,c.pendingProps.children,f),c.child;case 12:return Zr(E,c,c.pendingProps.children,f),c.child;case 10:e:{if($=c.type._context,M=c.pendingProps,N=c.memoizedProps,G=M.value,oo(c,$,G),N!==null)if(fr(N.value,G)){if(N.children===M.children&&!nr.current){c=Gr(E,c,f);break e}}else for(N=c.child,N!==null&&(N.return=c);N!==null;){var se=N.dependencies;if(se!==null){G=N.child;for(var xe=se.firstContext;xe!==null;){if(xe.context===$){if(N.tag===1){xe=vu(-1,f&-f),xe.tag=2;var je=N.updateQueue;if(je!==null){je=je.shared;var vt=je.pending;vt===null?xe.next=xe:(xe.next=vt.next,vt.next=xe),je.pending=xe}}N.lanes|=f,xe=N.alternate,xe!==null&&(xe.lanes|=f),Ha(N.return,f,c),se.lanes|=f;break}xe=xe.next}}else if(N.tag===10)G=N.type===c.type?null:N.child;else if(N.tag===18){if(G=N.return,G===null)throw Error(o(341));G.lanes|=f,se=G.alternate,se!==null&&(se.lanes|=f),Ha(G,f,c),G=N.sibling}else G=N.child;if(G!==null)G.return=N;else for(G=N;G!==null;){if(G===c){G=null;break}if(N=G.sibling,N!==null){N.return=G.return,G=N;break}G=G.return}N=G}Zr(E,c,M.children,f),c=c.child}return c;case 9:return M=c.type,$=c.pendingProps.children,fi(c,f),M=ii(M),$=$(M),c.flags|=1,Zr(E,c,$,f),c.child;case 14:return $=c.type,M=_s($,c.pendingProps),M=_s($.type,M),Mi(E,c,$,M,f);case 15:return ki(E,c,c.type,c.pendingProps,f);case 17:return $=c.type,M=c.pendingProps,M=c.elementType===$?M:_s($,M),E!==null&&(E.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,Xr($)?(E=!0,vc(c)):E=!1,fi(c,f),Vp(c,$,M),gp(c,$,M,f),Ic(null,c,$,!0,E,f);case 19:return hn(E,c,f);case 22:return Ac(E,c,f)}throw Error(o(156,c.tag))};function oh(E,c){return ml(E,c)}function ah(E,c,f,$){this.tag=E,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=$,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function po(E,c,f,$){return new ah(E,c,f,$)}function zs(E){return E=E.prototype,!(!E||!E.isReactComponent)}function Nu(E){if(typeof E=="function")return zs(E)?1:0;if(E!=null){if(E=E.$$typeof,E===x)return 11;if(E===k)return 14}return 2}function Al(E,c){var f=E.alternate;return f===null?(f=po(E.tag,c,E.key,E.mode),f.elementType=E.elementType,f.type=E.type,f.stateNode=E.stateNode,f.alternate=E,E.alternate=f):(f.pendingProps=c,f.type=E.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=E.flags&14680064,f.childLanes=E.childLanes,f.lanes=E.lanes,f.child=E.child,f.memoizedProps=E.memoizedProps,f.memoizedState=E.memoizedState,f.updateQueue=E.updateQueue,c=E.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=E.sibling,f.index=E.index,f.ref=E.ref,f}function no(E,c,f,$,M,N){var G=2;if($=E,typeof E=="function")zs(E)&&(G=1);else if(typeof E=="string")G=5;else e:switch(E){case d:return qa(f.children,M,N,c);case m:G=8,M|=8;break;case _:return E=po(12,f,c,M|2),E.elementType=_,E.lanes=N,E;case w:return E=po(13,f,c,M),E.elementType=w,E.lanes=N,E;case A:return E=po(19,f,c,M),E.elementType=A,E.lanes=N,E;case D:return Aa(f,M,N,c);default:if(typeof E=="object"&&E!==null)switch(E.$$typeof){case v:G=10;break e;case S:G=9;break e;case x:G=11;break e;case k:G=14;break e;case O:G=16,$=null;break e}throw Error(o(130,E==null?E:typeof E,""))}return c=po(G,f,c,M),c.elementType=E,c.type=$,c.lanes=N,c}function qa(E,c,f,$){return E=po(7,E,$,c),E.lanes=f,E}function Aa(E,c,f,$){return E=po(22,E,$,c),E.elementType=D,E.lanes=f,E.stateNode={},E}function Ql(E,c,f){return E=po(6,E,null,c),E.lanes=f,E}function is(E,c,f){return c=po(4,E.children!==null?E.children:[],E.key,c),c.lanes=f,c.stateNode={containerInfo:E.containerInfo,pendingChildren:null,implementation:E.implementation},c}function Co(E,c,f,$,M){this.tag=c,this.containerInfo=E,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Je,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dl(0),this.expirationTimes=dl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dl(0),this.identifierPrefix=$,this.onRecoverableError=M,Ee&&(this.mutableSourceEagerHydrationData=null)}function kh(E,c,f,$,M,N,G,se,xe){return E=new Co(E,c,f,se,xe),c===1?(c=1,N===!0&&(c|=8)):c=0,N=po(3,null,null,c),E.current=N,N.stateNode=E,N.memoizedState={element:$,isDehydrated:f,cache:null,transitions:null},xi(N),E}function ld(E){if(!E)return ur;E=E._reactInternals;e:{if(P(E)!==E||E.tag!==1)throw Error(o(170));var c=E;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Xr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(o(171))}if(E.tag===1){var f=E.type;if(Xr(f))return hl(E,f,c)}return c}function Za(E){var c=E._reactInternals;if(c===void 0)throw typeof E.render=="function"?Error(o(188)):(E=Object.keys(E).join(","),Error(o(268,E)));return E=re(c),E===null?null:E.stateNode}function ql(E,c){if(E=E.memoizedState,E!==null&&E.dehydrated!==null){var f=E.retryLane;E.retryLane=f!==0&&f<c?f:c}}function ud(E,c){ql(E,c),(E=E.alternate)&&ql(E,c)}function Lc(E){return E=re(E),E===null?null:E.stateNode}function Jp(){return null}return e.attemptContinuousHydration=function(E){if(E.tag===13){var c=xr();Es(E,134217728,c),ud(E,134217728)}},e.attemptHydrationAtCurrentPriority=function(E){if(E.tag===13){var c=xr(),f=Ki(E);Es(E,f,c),ud(E,f)}},e.attemptSynchronousHydration=function(E){switch(E.tag){case 3:var c=E.stateNode;if(c.current.memoizedState.isDehydrated){var f=rr(c.pendingLanes);f!==0&&(fl(c,f|1),Us(c,$i()),!(Cn&6)&&(Ca(),Qo()))}break;case 13:var $=xr();Ja(function(){return Es(E,1,$)}),ud(E,1)}},e.batchedUpdates=function(E,c){var f=Cn;Cn|=1;try{return E(c)}finally{Cn=f,Cn===0&&(Ca(),Ds&&Qo())}},e.createComponentSelector=function(E){return{$$typeof:hs,value:E}},e.createContainer=function(E,c,f,$,M,N,G){return kh(E,c,!1,null,f,$,M,N,G)},e.createHasPseudoClassSelector=function(E){return{$$typeof:Mu,value:E}},e.createHydrationContainer=function(E,c,f,$,M,N,G,se,xe){return E=kh(f,$,!0,E,M,N,G,se,xe),E.context=ld(null),f=E.current,$=xr(),M=Ki(f),N=vu($,M),N.callback=c??null,vs(f,N),E.current.lanes=M,du(E,M,$),Us(E,$),E},e.createPortal=function(E,c,f){var $=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:$==null?null:""+$,children:E,containerInfo:c,implementation:f}},e.createRoleSelector=function(E){return{$$typeof:ic,value:E}},e.createTestNameSelector=function(E){return{$$typeof:Eo,value:E}},e.createTextSelector=function(E){return{$$typeof:Xa,value:E}},e.deferredUpdates=function(E){var c=qn,f=yi.transition;try{return yi.transition=null,qn=16,E()}finally{qn=c,yi.transition=f}},e.discreteUpdates=function(E,c,f,$,M){var N=qn,G=yi.transition;try{return yi.transition=null,qn=1,E(c,f,$,M)}finally{qn=N,yi.transition=G,Cn===0&&Ca()}},e.findAllNodes=sc,e.findBoundingRects=function(E,c){if(!wt)throw Error(o(363));c=sc(E,c),E=[];for(var f=0;f<c.length;f++)E.push(pt(c[f]));for(c=E.length-1;0<c;c--){f=E[c];for(var $=f.x,M=$+f.width,N=f.y,G=N+f.height,se=c-1;0<=se;se--)if(c!==se){var xe=E[se],je=xe.x,vt=je+xe.width,Gt=xe.y,en=Gt+xe.height;if($>=je&&N>=Gt&&M<=vt&&G<=en){E.splice(c,1);break}else if($!==je||f.width!==xe.width||en<N||Gt>G){if(!(N!==Gt||f.height!==xe.height||vt<$||je>M)){je>$&&(xe.width+=je-$,xe.x=$),vt<M&&(xe.width=M-je),E.splice(c,1);break}}else{Gt>N&&(xe.height+=Gt-N,xe.y=N),en<G&&(xe.height=G-Gt),E.splice(c,1);break}}}return E},e.findHostInstance=Za,e.findHostInstanceWithNoPortals=function(E){return E=ee(E),E=E!==null?de(E):null,E===null?null:E.stateNode},e.findHostInstanceWithWarning=function(E){return Za(E)},e.flushControlled=function(E){var c=Cn;Cn|=1;var f=yi.transition,$=qn;try{yi.transition=null,qn=1,E()}finally{qn=$,yi.transition=f,Cn=c,Cn===0&&(Ca(),Qo())}},e.flushPassiveEffects=ih,e.flushSync=Ja,e.focusWithin=function(E,c){if(!wt)throw Error(o(363));for(E=co(E),c=Ya(E,c),c=Array.from(c),E=0;E<c.length;){var f=c[E++];if(!te(f)){if(f.tag===5&&ot(f.stateNode))return!0;for(f=f.child;f!==null;)c.push(f),f=f.sibling}}return!1},e.getCurrentUpdatePriority=function(){return qn},e.getFindAllNodesFailureDescription=function(E,c){if(!wt)throw Error(o(363));var f=0,$=[];E=[co(E),0];for(var M=0;M<E.length;){var N=E[M++],G=E[M++],se=c[G];if((N.tag!==5||!te(N))&&(Zc(N,se)&&($.push(Qs(se)),G++,G>f&&(f=G)),G<c.length))for(N=N.child;N!==null;)E.push(N,G),N=N.sibling}if(f<c.length){for(E=[];f<c.length;f++)E.push(Qs(c[f]));return`findAllNodes was able to match part of the selector:
  `+($.join(" > ")+`

No matching component was found for:
  `)+E.join(" > ")}return null},e.getPublicRootInstance=function(E){if(E=E.current,!E.child)return null;switch(E.child.tag){case 5:return ce(E.child.stateNode);default:return E.child.stateNode}},e.injectIntoDevTools=function(E){if(E={bundleType:E.bundleType,version:E.version,rendererPackageName:E.rendererPackageName,rendererConfig:E.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:Lc,findFiberByHostInstance:E.findFiberByHostInstance||Jp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")E=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)E=!0;else{try{pu=c.inject(E),Do=c}catch{}E=!!c.checkDCE}}return E},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(E,c,f,$){if(!wt)throw Error(o(363));E=sc(E,c);var M=ft(E,f,$).disconnect;return{disconnect:function(){M()}}},e.registerMutableSourceForHydration=function(E,c){var f=c._getVersion;f=f(c._source),E.mutableSourceEagerHydrationData==null?E.mutableSourceEagerHydrationData=[c,f]:E.mutableSourceEagerHydrationData.push(c,f)},e.runWithPriority=function(E,c){var f=qn;try{return qn=E,c()}finally{qn=f}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(E,c,f,$){var M=c.current,N=xr(),G=Ki(M);return f=ld(f),c.context===null?c.context=f:c.pendingContext=f,c=vu(N,G),c.payload={element:E},$=$===void 0?null:$,$!==null&&(c.callback=$),vs(M,c),E=Es(M,G,N),E!==null&&_l(E,M,G),G},e}),t5}(function(n){n.exports=obe()})(Rj);const abe=Ij(Rj.exports);function lbe(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}const dM=[];function ube(n,e,t=!1,i={}){for(const o of dM)if(lbe(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return o.response;if(!t)throw o.promise}const s={keys:e,equal:i.equal,promise:n(...e).then(o=>s.response=o).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const o=dM.indexOf(s);o!==-1&&dM.splice(o,1)},i.lifespan)}).catch(o=>s.error=o)};if(dM.push(s),!t)throw s.promise}const cbe=(n,e,t)=>ube(n,e,!1,t);var UR={exports:{}},WE={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r5;function hbe(){if(r5)return WE;r5=1;var n=Sr,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,d){var m,_={},v=null,S=null;d!==void 0&&(v=""+d),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(S=h.ref);for(m in h)i.call(h,m)&&!o.hasOwnProperty(m)&&(_[m]=h[m]);if(u&&u.defaultProps)for(m in h=u.defaultProps,h)_[m]===void 0&&(_[m]=h[m]);return{$$typeof:e,type:u,key:v,ref:S,props:_,_owner:s.current}}return WE.Fragment=t,WE.jsx=l,WE.jsxs=l,WE}(function(n){n.exports=hbe()})(UR);const Kx=UR.exports.Fragment,Yt=UR.exports.jsx,_c=UR.exports.jsxs,qP={},dbe=n=>void Object.assign(qP,n);function pbe(n,e){function t(d,{args:m=[],attach:_,...v},S){let x=`${d[0].toUpperCase()}${d.slice(1)}`,w;if(d==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const A=v.object;w=K1(A,{type:d,root:S,attach:_,primitive:!0})}else{const A=qP[x];if(!A)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");w=K1(new A(...m),{type:d,root:S,attach:_,memoizedProps:{args:m}})}return w.__r3f.attach===void 0&&(w instanceof Or?w.__r3f.attach="geometry":w instanceof Wc&&(w.__r3f.attach="material")),x!=="inject"&&$O(w,v),w}function i(d,m){let _=!1;if(m){var v,S;(v=m.__r3f)!=null&&v.attach?EO(d,m,m.__r3f.attach):m.isObject3D&&d.isObject3D&&(d.add(m),_=!0),_||(S=d.__r3f)==null||S.objects.push(m),m.__r3f||K1(m,{}),m.__r3f.parent=d,iN(m),J1(m)}}function s(d,m,_){let v=!1;if(m){var S,x;if((S=m.__r3f)!=null&&S.attach)EO(d,m,m.__r3f.attach);else if(m.isObject3D&&d.isObject3D){m.parent=d,m.dispatchEvent({type:"added"});const w=d.children.filter(k=>k!==m),A=w.indexOf(_);d.children=[...w.slice(0,A),m,...w.slice(A)],v=!0}v||(x=d.__r3f)==null||x.objects.push(m),m.__r3f||K1(m,{}),m.__r3f.parent=d,iN(m),J1(m)}}function o(d,m,_=!1){d&&[...d].forEach(v=>l(m,v,_))}function l(d,m,_){if(m){var v,S,x;if(m.__r3f&&(m.__r3f.parent=null),(v=d.__r3f)!=null&&v.objects&&(d.__r3f.objects=d.__r3f.objects.filter(D=>D!==m)),(S=m.__r3f)!=null&&S.attach)l5(d,m,m.__r3f.attach);else if(m.isObject3D&&d.isObject3D){var w;d.remove(m),(w=m.__r3f)!=null&&w.root&&bbe(m.__r3f.root,m)}const k=(x=m.__r3f)==null?void 0:x.primitive,O=_===void 0?m.dispose!==null&&!k:_;if(!k){var A;o((A=m.__r3f)==null?void 0:A.objects,m,O),o(m.children,m,O)}m.__r3f&&(delete m.__r3f.root,delete m.__r3f.objects,delete m.__r3f.handlers,delete m.__r3f.memoizedProps,k||delete m.__r3f),O&&m.dispose&&m.type!=="Scene"&&eI.exports.unstable_scheduleCallback(eI.exports.unstable_IdlePriority,()=>{try{m.dispose()}catch{}}),J1(d)}}function u(d,m,_,v){var S;const x=(S=d.__r3f)==null?void 0:S.parent;if(!x)return;const w=t(m,_,d.__r3f.root);if(d.children){for(const A of d.children)A.__r3f&&i(w,A);d.children=d.children.filter(A=>!A.__r3f)}d.__r3f.objects.forEach(A=>i(w,A)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||l(x,d),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),i(x,w),w.raycast&&w.__r3f.eventCount&&w.__r3f.root.getState().internal.interaction.push(w),[v,v.alternate].forEach(A=>{A!==null&&(A.stateNode=w,A.ref&&(typeof A.ref=="function"?A.ref(w):A.ref.current=w))})}const h=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:abe({createInstance:t,removeChild:l,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,m)=>{if(!m)return;const _=d.getState().scene;!_.__r3f||(_.__r3f.root=d,i(_,m))},removeChildFromContainer:(d,m)=>{!m||l(d.getState().scene,m)},insertInContainerBefore:(d,m,_)=>{if(!m||!_)return;const v=d.getState().scene;!v.__r3f||s(v,m,_)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var m;return!!((m=d==null?void 0:d.__r3f)!=null?m:{}).handlers},prepareUpdate(d,m,_,v){if(d.__r3f.primitive&&v.object&&v.object!==d)return[!0];{const{args:S=[],children:x,...w}=v,{args:A=[],children:k,...O}=_;if(!Array.isArray(S))throw new Error("R3F: the args prop must be an array!");if(S.some((L,z)=>L!==A[z]))return[!0];const D=Pj(d,w,O,!0);return D.changes.length?[!1,D]:null}},commitUpdate(d,[m,_],v,S,x,w){m?u(d,v,x,w):$O(d,_)},commitMount(d,m,_,v){var S;const x=(S=d.__r3f)!=null?S:{};d.raycast&&x.handlers&&x.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>K1(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var m;const{attach:_,parent:v}=(m=d.__r3f)!=null?m:{};_&&v&&l5(v,d,_),d.isObject3D&&(d.visible=!1),J1(d)},unhideInstance(d,m){var _;const{attach:v,parent:S}=(_=d.__r3f)!=null?_:{};v&&S&&EO(S,d,v),(d.isObject3D&&m.visible==null||m.visible)&&(d.visible=!0),J1(d)},createTextInstance:h,hideTextInstance:h,unhideTextInstance:h,getCurrentEventPriority:()=>e?e():Yy.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&ll.fun(performance.now)?performance.now:ll.fun(Date.now)?Date.now:()=>0,scheduleTimeout:ll.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ll.fun(clearTimeout)?clearTimeout:void 0}),applyProps:$O}}var i5,s5;const kj=()=>{var n;return(n=qP.ColorManagement)!=null?n:null},Oj=n=>n&&n.isOrthographicCamera,fbe=n=>n&&n.hasOwnProperty("current"),Jx=typeof window<"u"&&((i5=window.document)!=null&&i5.createElement||((s5=window.navigator)==null?void 0:s5.product)==="ReactNative")?he.useLayoutEffect:he.useEffect;function Lj(n){const e=he.useRef(n);return Jx(()=>void(e.current=n),[n]),e}function mbe({set:n}){return Jx(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class Dj extends he.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Dj.getDerivedStateFromError=()=>({error:!0});const Nj="__default",o5=new Map,gbe=n=>n&&!!n.memoized&&!!n.changes;function Bj(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const VE=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},ll={obj:n=>n===Object(n)&&!ll.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(ll.str(n)||ll.num(n))return n===e;const o=ll.obj(n);if(o&&i==="reference")return n===e;const l=ll.arr(n);if(l&&t==="reference")return n===e;if((l||o)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(o&&t==="shallow"&&i==="shallow"){for(u in s?e:n)if(!ll.equ(n[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:n)if(n[u]!==e[u])return!1;if(ll.und(u)){if(l&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function _be(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function K1(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function rN(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),s=i.pop();return t=i.reduce((o,l)=>o[l],n),{target:t,key:s}}else return{target:t,key:e}}const a5=/-\d+$/;function EO(n,e,t){if(ll.str(t)){if(a5.test(t)){const o=t.replace(a5,""),{target:l,key:u}=rN(n,o);Array.isArray(l[u])||(l[u]=[])}const{target:i,key:s}=rN(n,t);e.__r3f.previousAttach=i[s],i[s]=e}else e.__r3f.previousAttach=t(n,e)}function l5(n,e,t){var i,s;if(ll.str(t)){const{target:o,key:l}=rN(n,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function Pj(n,{children:e,key:t,ref:i,...s},{children:o,key:l,ref:u,...h}={},d=!1){var m;const _=(m=n==null?void 0:n.__r3f)!=null?m:{},v=Object.entries(s),S=[];if(d){const w=Object.keys(h);for(let A=0;A<w.length;A++)s.hasOwnProperty(w[A])||v.unshift([w[A],Nj+"remove"])}v.forEach(([w,A])=>{var k;if((k=n.__r3f)!=null&&k.primitive&&w==="object"||ll.equ(A,h[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return S.push([w,A,!0,[]]);let O=[];w.includes("-")&&(O=w.split("-")),S.push([w,A,!1,O]);for(const D in s){const L=s[D];D.startsWith(`${w}-`)&&S.push([D,L,!1,D.split("-")])}});const x={...s};return _.memoizedProps&&_.memoizedProps.args&&(x.args=_.memoizedProps.args),_.memoizedProps&&_.memoizedProps.attach&&(x.attach=_.memoizedProps.attach),{memoized:x,changes:S}}function $O(n,e){var t,i,s;const o=(t=n.__r3f)!=null?t:{},l=o.root,u=(i=l==null||l.getState==null?void 0:l.getState())!=null?i:{},{memoized:h,changes:d}=gbe(e)?e:Pj(n,e),m=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=h);for(let _=0;_<d.length;_++){let[v,S,x,w]=d[_],A=n,k=A[v];if(w.length&&(k=w.reduce((O,D)=>O[D],n),!(k&&k.set))){const[O,...D]=w.reverse();A=D.reverse().reduce((L,z)=>L[z],n),v=O}if(S===Nj+"remove")if(A.constructor){let O=o5.get(A.constructor);O||(O=new A.constructor,o5.set(A.constructor,O)),S=O[v]}else S=0;if(x)S?o.handlers[v]=S:delete o.handlers[v],o.eventCount=Object.keys(o.handlers).length;else if(k&&k.set&&(k.copy||k instanceof nb)){if(Array.isArray(S))k.fromArray?k.fromArray(S):k.set(...S);else if(k.copy&&S&&S.constructor&&k.constructor===S.constructor)k.copy(S);else if(S!==void 0){const O=k instanceof vn;!O&&k.setScalar?k.setScalar(S):k instanceof nb&&S instanceof nb?k.mask=S.mask:k.set(S),!kj()&&!u.linear&&O&&k.convertSRGBToLinear()}}else A[v]=S,!u.linear&&A[v]instanceof Fl&&A[v].format===Pp&&A[v].type===Xh&&(A[v].encoding=Ei);J1(n)}if(o.parent&&u.internal&&n.raycast&&m!==o.eventCount){const _=u.internal.interaction.indexOf(n);_>-1&&u.internal.interaction.splice(_,1),o.eventCount&&u.internal.interaction.push(n)}return!(d.length===1&&d[0][0]==="onUpdate")&&d.length&&(s=n.__r3f)!=null&&s.parent&&iN(n),n}function J1(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function iN(n){n.onUpdate==null||n.onUpdate(n)}function vbe(n,e){n.manual||(Oj(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function pM(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function ybe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Yy.exports.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Yy.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Yy.exports.ContinuousEventPriority;default:return Yy.exports.DefaultEventPriority}}function Fj(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function bbe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{Fj(t.capturedMap,e,i,s)})}function Tbe(n){function e(h){const{internal:d}=n.getState(),m=h.offsetX-d.initialClick[0],_=h.offsetY-d.initialClick[1];return Math.round(Math.sqrt(m*m+_*_))}function t(h){return h.filter(d=>["Move","Over","Enter","Out","Leave"].some(m=>{var _;return(_=d.__r3f)==null?void 0:_.handlers["onPointer"+m]}))}function i(h,d){const m=n.getState(),_=new Set,v=[],S=d?d(m.internal.interaction):m.internal.interaction;for(let k=0;k<S.length;k++){const O=VE(S[k]);O&&(O.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(h,m);function x(k){const O=VE(k);if(!O||!O.events.enabled||O.raycaster.camera===null)return[];if(O.raycaster.camera===void 0){var D;O.events.compute==null||O.events.compute(h,O,(D=O.previousRoot)==null?void 0:D.getState()),O.raycaster.camera===void 0&&(O.raycaster.camera=null)}return O.raycaster.camera?O.raycaster.intersectObject(k,!0):[]}let w=S.flatMap(x).sort((k,O)=>{const D=VE(k.object),L=VE(O.object);return!D||!L?k.distance-O.distance:L.events.priority-D.events.priority||k.distance-O.distance}).filter(k=>{const O=pM(k);return _.has(O)?!1:(_.add(O),!0)});m.events.filter&&(w=m.events.filter(w,m));for(const k of w){let O=k.object;for(;O;){var A;(A=O.__r3f)!=null&&A.eventCount&&v.push({...k,eventObject:O}),O=O.parent}}if("pointerId"in h&&m.internal.capturedMap.has(h.pointerId))for(let k of m.internal.capturedMap.get(h.pointerId).values())_.has(pM(k.intersection))||v.push(k.intersection);return v}function s(h,d,m,_){const v=n.getState();if(h.length){const S={stopped:!1};for(const x of h){const w=VE(x.object)||v,{raycaster:A,pointer:k,camera:O,internal:D}=w,L=new be(k.x,k.y,0).unproject(O),z=ee=>{var re,ie;return(re=(ie=D.capturedMap.get(ee))==null?void 0:ie.has(x.eventObject))!=null?re:!1},H=ee=>{const re={intersection:x,target:d.target};D.capturedMap.has(ee)?D.capturedMap.get(ee).set(x.eventObject,re):D.capturedMap.set(ee,new Map([[x.eventObject,re]])),d.target.setPointerCapture(ee)},U=ee=>{const re=D.capturedMap.get(ee);re&&Fj(D.capturedMap,x.eventObject,re,ee)};let P={};for(let ee in d){let re=d[ee];typeof re!="function"&&(P[ee]=re)}let K={...x,...P,pointer:k,intersections:h,stopped:S.stopped,delta:m,unprojectedPoint:L,ray:A.ray,camera:O,stopPropagation(){const ee="pointerId"in d&&D.capturedMap.get(d.pointerId);if((!ee||ee.has(x.eventObject))&&(K.stopped=S.stopped=!0,D.hovered.size&&Array.from(D.hovered.values()).find(re=>re.eventObject===x.eventObject))){const re=h.slice(0,h.indexOf(x));o([...re,x])}},target:{hasPointerCapture:z,setPointerCapture:H,releasePointerCapture:U},currentTarget:{hasPointerCapture:z,setPointerCapture:H,releasePointerCapture:U},nativeEvent:d};if(_(K),S.stopped===!0)break}}return h}function o(h){const{internal:d}=n.getState();for(const m of d.hovered.values())if(!h.length||!h.find(_=>_.object===m.object&&_.index===m.index&&_.instanceId===m.instanceId)){const _=m.eventObject.__r3f,v=_==null?void 0:_.handlers;if(d.hovered.delete(pM(m)),_!=null&&_.eventCount){const S={...m,intersections:h};v.onPointerOut==null||v.onPointerOut(S),v.onPointerLeave==null||v.onPointerLeave(S)}}}function l(h,d){for(let m=0;m<d.length;m++){const _=d[m].__r3f;_==null||_.handlers.onPointerMissed==null||_.handlers.onPointerMissed(h)}}function u(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return d=>{const{internal:m}=n.getState();"pointerId"in d&&m.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(d.pointerId)&&(m.capturedMap.delete(d.pointerId),o([]))})}}return function(d){const{onPointerMissed:m,internal:_}=n.getState();_.lastEvent.current=d;const v=h==="onPointerMove",S=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",x=i(d,v?t:void 0),w=S?e(d):0;h==="onPointerDown"&&(_.initialClick=[d.offsetX,d.offsetY],_.initialHits=x.map(k=>k.eventObject)),S&&!x.length&&w<=2&&(l(d,_.interaction),m&&m(d)),v&&o(x);function A(k){const O=k.eventObject,D=O.__r3f,L=D==null?void 0:D.handlers;if(D!=null&&D.eventCount)if(v){if(L.onPointerOver||L.onPointerEnter||L.onPointerOut||L.onPointerLeave){const z=pM(k),H=_.hovered.get(z);H?H.stopped&&k.stopPropagation():(_.hovered.set(z,k),L.onPointerOver==null||L.onPointerOver(k),L.onPointerEnter==null||L.onPointerEnter(k))}L.onPointerMove==null||L.onPointerMove(k)}else{const z=L[h];z?(!S||_.initialHits.includes(O))&&(l(d,_.interaction.filter(H=>!_.initialHits.includes(H))),z(k)):S&&_.initialHits.includes(O)&&l(d,_.interaction.filter(H=>!_.initialHits.includes(H)))}}s(x,d,w,A)}}return{handlePointer:u}}const Uj=n=>!!(n!=null&&n.render),zj=he.createContext(null),Sbe=(n,e)=>{const t=ibe((u,h)=>{const d=new be,m=new be,_=new be;function v(A=h().camera,k=m,O=h().size){const{width:D,height:L,top:z,left:H}=O,U=D/L;k instanceof be?_.copy(k):_.set(...k);const P=A.getWorldPosition(d).distanceTo(_);if(Oj(A))return{width:D/A.zoom,height:L/A.zoom,top:z,left:H,factor:1,distance:P,aspect:U};{const K=A.fov*Math.PI/180,ee=2*Math.tan(K/2)*P,re=ee*(D/L);return{width:re,height:ee,top:z,left:H,factor:D/re,distance:P,aspect:U}}}let S;const x=A=>u(k=>({performance:{...k.performance,current:A}})),w=new Dt;return{set:u,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(A=1)=>n(h(),A),advance:(A,k)=>e(A,k,h()),legacy:!1,linear:!1,flat:!1,scene:K1(new mx),controls:null,clock:new XP,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const A=h();S&&clearTimeout(S),A.performance.current!==A.performance.min&&x(A.performance.min),S=setTimeout(()=>x(h().performance.max),A.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:A=>u(k=>({...k,events:{...k.events,...A}})),setSize:(A,k,O,D,L)=>{const z=h().camera,H={width:A,height:k,top:D||0,left:L||0,updateStyle:O};u(U=>({size:H,viewport:{...U.viewport,...v(z,m,H)}}))},setDpr:A=>u(k=>{const O=Bj(A);return{viewport:{...k.viewport,dpr:O,initialDpr:k.viewport.initialDpr||O}}}),setFrameloop:(A="always")=>{const k=h().clock;k.stop(),k.elapsedTime=0,A!=="never"&&(k.start(),k.elapsedTime=0),u(()=>({frameloop:A}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:he.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(A,k,O)=>{const D=h().internal;return D.priority=D.priority+(k>0?1:0),D.subscribers.push({ref:A,priority:k,store:O}),D.subscribers=D.subscribers.sort((L,z)=>L.priority-z.priority),()=>{const L=h().internal;L!=null&&L.subscribers&&(L.priority=L.priority-(k>0?1:0),L.subscribers=L.subscribers.filter(z=>z.ref!==A))}}}}}),i=t.getState();let s=i.size,o=i.viewport.dpr,l=i.camera;return t.subscribe(()=>{const{camera:u,size:h,viewport:d,gl:m,set:_}=t.getState();if(h!==s||d.dpr!==o){var v;s=h,o=d.dpr,vbe(u,h),m.setPixelRatio(d.dpr);const S=(v=h.updateStyle)!=null?v:typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(h.width,h.height,S)}u!==l&&(l=u,_(S=>({viewport:{...S.viewport,...S.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>n(u)),t};let fM,Ebe=new Set,$be=new Set,xbe=new Set;function xO(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function jE(n,e){switch(n){case"before":return xO(Ebe,e);case"after":return xO($be,e);case"tail":return xO(xbe,e)}}let wO,CO;function MO(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),wO=e.internal.subscribers,fM=0;fM<wO.length;fM++)CO=wO[fM],CO.ref.current(CO.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function wbe(n){let e=!1,t,i,s;function o(h){i=requestAnimationFrame(o),e=!0,t=0,jE("before",h);for(const m of n.values()){var d;s=m.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((d=s.gl.xr)!=null&&d.isPresenting)&&(t+=MO(h,s))}if(jE("after",h),t===0)return jE("tail",h),e=!1,cancelAnimationFrame(i)}function l(h,d=1){var m;if(!h)return n.forEach(_=>l(_.store.getState()),d);(m=h.gl.xr)!=null&&m.isPresenting||!h.internal.active||h.frameloop==="never"||(h.internal.frames=Math.min(60,h.internal.frames+d),e||(e=!0,requestAnimationFrame(o)))}function u(h,d=!0,m,_){if(d&&jE("before",h),m)MO(h,m,_);else for(const v of n.values())MO(h,v.store.getState());d&&jE("after",h)}return{loop:o,invalidate:l,advance:u}}function Hj(){const n=he.useContext(zj);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Gh(n=t=>t,e){return Hj()(n,e)}function Bf(n,e=0){const t=Hj(),i=t.getState().internal.subscribe,s=Lj(n);return Jx(()=>i(s,e,t),[e,i,t]),null}const iS=new Map,{invalidate:u5,advance:c5}=wbe(iS),{reconciler:tI,applyProps:mM}=pbe(iS,ybe),V1={objects:"shallow",strict:!1},Cbe=(n,e)=>{const t=typeof n=="function"?n(e):n;return Uj(t)?t:new AP({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Mbe(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:s,left:o}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function Abe(n){const e=iS.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,o=i||Sbe(u5,c5),l=t||tI.createContainer(o,Yy.exports.ConcurrentRoot,null,!1,null,"",s,null);e||iS.set(n,{fiber:l,store:o});let u,h=!1,d;return{configure(m={}){let{gl:_,size:v,events:S,onCreated:x,shadows:w=!1,linear:A=!1,flat:k=!1,legacy:O=!1,orthographic:D=!1,frameloop:L="always",dpr:z=[1,2],performance:H,raycaster:U,camera:P,onPointerMissed:K}=m,ee=o.getState(),re=ee.gl;ee.gl||ee.set({gl:re=Cbe(_,n)});let ie=ee.raycaster;ie||ee.set({raycaster:ie=new JP});const{params:de,...oe}=U||{};if(ll.equ(oe,ie,V1)||mM(ie,{...oe}),ll.equ(de,ie.params,V1)||mM(ie,{params:{...ie.params,...de}}),!ee.camera||ee.camera===d&&!ll.equ(d,P,V1)){d=P;const ne=P instanceof TS,ae=ne?P:D?new t0(0,0,0,0,.1,1e3):new ko(75,0,.1,1e3);ne||(ae.position.z=5,P&&mM(ae,P),!ee.camera&&!(P!=null&&P.rotation)&&ae.lookAt(0,0,0)),ee.set({camera:ae})}if(!ee.xr){const ne=(Le,we)=>{const Xe=o.getState();Xe.frameloop!=="never"&&c5(Le,!0,Xe,we)},ae=()=>{const Le=o.getState();Le.gl.xr.enabled=Le.gl.xr.isPresenting,Le.gl.xr.setAnimationLoop(Le.gl.xr.isPresenting?ne:null),Le.gl.xr.isPresenting||u5(Le)},_e={connect(){const Le=o.getState().gl;Le.xr.addEventListener("sessionstart",ae),Le.xr.addEventListener("sessionend",ae)},disconnect(){const Le=o.getState().gl;Le.xr.removeEventListener("sessionstart",ae),Le.xr.removeEventListener("sessionend",ae)}};re.xr&&_e.connect(),ee.set({xr:_e})}if(re.shadowMap){const ne=re.shadowMap.enabled,ae=re.shadowMap.type;if(re.shadowMap.enabled=!!w,ll.boo(w))re.shadowMap.type=x$;else if(ll.str(w)){var ce;const _e={basic:N9,percentage:bR,soft:x$,variance:Gy};re.shadowMap.type=(ce=_e[w])!=null?ce:x$}else ll.obj(w)&&Object.assign(re.shadowMap,w);(ne!==re.shadowMap.enabled||ae!==re.shadowMap.type)&&(re.shadowMap.needsUpdate=!0)}const me=kj();me&&("enabled"in me?me.enabled=!O:"legacyMode"in me&&(me.legacyMode=O));const Ae=A?$m:Ei,j=k?fg:yP;re.outputEncoding!==Ae&&(re.outputEncoding=Ae),re.toneMapping!==j&&(re.toneMapping=j),ee.legacy!==O&&ee.set(()=>({legacy:O})),ee.linear!==A&&ee.set(()=>({linear:A})),ee.flat!==k&&ee.set(()=>({flat:k})),_&&!ll.fun(_)&&!Uj(_)&&!ll.equ(_,re,V1)&&mM(re,_),S&&!ee.events.handlers&&ee.set({events:S(o)});const Z=Mbe(n,v);return ll.equ(Z,ee.size,V1)||ee.setSize(Z.width,Z.height,Z.updateStyle,Z.top,Z.left),z&&ee.viewport.dpr!==Bj(z)&&ee.setDpr(z),ee.frameloop!==L&&ee.setFrameloop(L),ee.onPointerMissed||ee.set({onPointerMissed:K}),H&&!ll.equ(H,ee.performance,V1)&&ee.set(ne=>({performance:{...ne.performance,...H}})),u=x,h=!0,this},render(m){return h||this.configure(),tI.updateContainer(Yt(Ibe,{store:o,children:m,onCreated:u,rootElement:n}),l,null,()=>{}),o},unmount(){Gj(n)}}}function Ibe({store:n,children:e,onCreated:t,rootElement:i}){return Jx(()=>{const s=n.getState();s.set(o=>({internal:{...o.internal,active:!0}})),t&&t(s),n.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),he.createElement(zj.Provider,{value:n},e)}function Gj(n,e){const t=iS.get(n),i=t==null?void 0:t.fiber;if(i){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),tI.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var o,l,u,h;s.events.disconnect==null||s.events.disconnect(),(o=s.gl)==null||(l=o.renderLists)==null||l.dispose==null||l.dispose(),(u=s.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(h=s.gl)!=null&&h.xr&&s.xr.disconnect(),_be(s),iS.delete(n),e&&e(n)}catch{}},500)})}}tI.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:he.version});function sN(){return sN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},sN.apply(this,arguments)}function oN(n,e,t){var i,s,o,l,u;e==null&&(e=100);function h(){var m=Date.now()-l;m<e&&m>=0?i=setTimeout(h,e-m):(i=null,t||(u=n.apply(o,s),o=s=null))}var d=function(){o=this,s=arguments,l=Date.now();var m=t&&!i;return i||(i=setTimeout(h,e)),m&&(u=n.apply(o,s),o=s=null),u};return d.clear=function(){i&&(clearTimeout(i),i=null)},d.flush=function(){i&&(u=n.apply(o,s),o=s=null,clearTimeout(i),i=null)},d}oN.debounce=oN;var h5=oN;function Rbe(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:s}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const o=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[l,u]=he.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=he.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l}),d=e?typeof e=="number"?e:e.scroll:null,m=e?typeof e=="number"?e:e.resize:null,_=he.useRef(!1);he.useEffect(()=>(_.current=!0,()=>void(_.current=!1)));const[v,S,x]=he.useMemo(()=>{const O=()=>{if(!h.current.element)return;const{left:D,top:L,width:z,height:H,bottom:U,right:P,x:K,y:ee}=h.current.element.getBoundingClientRect(),re={left:D,top:L,width:z,height:H,bottom:U,right:P,x:K,y:ee};h.current.element instanceof HTMLElement&&s&&(re.height=h.current.element.offsetHeight,re.width=h.current.element.offsetWidth),Object.freeze(re),_.current&&!Dbe(h.current.lastBounds,re)&&u(h.current.lastBounds=re)};return[O,m?h5(O,m):O,d?h5(O,d):O]},[u,s,d,m]);function w(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(O=>O.removeEventListener("scroll",x,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null)}function A(){!h.current.element||(h.current.resizeObserver=new o(x),h.current.resizeObserver.observe(h.current.element),t&&h.current.scrollContainers&&h.current.scrollContainers.forEach(O=>O.addEventListener("scroll",x,{capture:!0,passive:!0})))}const k=O=>{!O||O===h.current.element||(w(),h.current.element=O,h.current.scrollContainers=Wj(O),A())};return Obe(x,!!t),kbe(S),he.useEffect(()=>{w(),A()},[t,x,S]),he.useEffect(()=>w,[]),[k,l,v]}function kbe(n){he.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Obe(n,e){he.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Wj(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:s}=window.getComputedStyle(n);return[t,i,s].some(o=>o==="auto"||o==="scroll")&&e.push(n),[...e,...Wj(n.parentElement)]}const Lbe=["x","y","top","bottom","left","right","width","height"],Dbe=(n,e)=>Lbe.every(t=>n[t]===e[t]);var Nbe=Object.defineProperty,Bbe=Object.defineProperties,Pbe=Object.getOwnPropertyDescriptors,d5=Object.getOwnPropertySymbols,Fbe=Object.prototype.hasOwnProperty,Ube=Object.prototype.propertyIsEnumerable,p5=(n,e,t)=>e in n?Nbe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,f5=(n,e)=>{for(var t in e||(e={}))Fbe.call(e,t)&&p5(n,t,e[t]);if(d5)for(var t of d5(e))Ube.call(e,t)&&p5(n,t,e[t]);return n},zbe=(n,e)=>Bbe(n,Pbe(e)),m5;function Vj(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const s=Vj(i,e,t);if(s)return s;i=e?null:i.sibling}}function jj(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const ZP=jj(he.createContext(null));class Xj extends he.Component{render(){return Yt(ZP.Provider,{value:this._reactInternals,children:this.props.children})}}const{ReactCurrentOwner:g5,ReactCurrentDispatcher:_5}=(m5=he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)!=null?m5:{};function Hbe(){const n=he.useContext(ZP),e=he.useId();return he.useMemo(()=>{var t;return(t=g5==null?void 0:g5.current)!=null?t:Vj(n,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[n,e])}function Gbe(){var n,e;const t=Hbe(),[i]=he.useState(()=>new Map);i.clear();let s=t;for(;s;){const o=(n=s.type)==null?void 0:n._context;o&&o!==ZP&&!i.has(o)&&i.set(o,(e=_5==null?void 0:_5.current)==null?void 0:e.readContext(jj(o))),s=s.return}return he.useMemo(()=>Array.from(i.keys()).reduce((o,l)=>u=>he.createElement(o,null,he.createElement(l.Provider,zbe(f5({},u),{value:i.get(l)}))),o=>Yt(Xj,{...f5({},o)})),[i])}const AO={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Wbe(n){const{handlePointer:e}=Tbe(n);return{priority:1,enabled:!0,compute(t,i,s){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(AO).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:s}=n.getState();(t=s.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{var i;const{set:s,events:o}=n.getState();o.disconnect==null||o.disconnect(),s(l=>({events:{...l.events,connected:t}})),Object.entries((i=o.handlers)!=null?i:[]).forEach(([l,u])=>{const[h,d]=AO[l];t.addEventListener(h,u,{passive:d})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([o,l])=>{if(i&&i.connected instanceof HTMLElement){const[u]=AO[o];i.connected.removeEventListener(u,l)}}),t(o=>({events:{...o.events,connected:void 0}}))}}}}const Vbe=he.forwardRef(function({children:n,fallback:e,resize:t,style:i,gl:s,events:o=Wbe,eventSource:l,eventPrefix:u,shadows:h,linear:d,flat:m,legacy:_,orthographic:v,frameloop:S,dpr:x,performance:w,raycaster:A,camera:k,onPointerMissed:O,onCreated:D,...L},z){he.useMemo(()=>dbe(ebe),[]);const H=Gbe(),[U,P]=Rbe({scroll:!0,debounce:{scroll:50,resize:0},...t}),K=he.useRef(null),ee=he.useRef(null);he.useImperativeHandle(z,()=>K.current);const re=Lj(O),[ie,de]=he.useState(!1),[oe,ce]=he.useState(!1);if(ie)throw ie;if(oe)throw oe;const me=he.useRef(null);return Jx(()=>{const Ae=K.current;P.width>0&&P.height>0&&Ae&&(me.current||(me.current=Abe(Ae)),me.current.configure({gl:s,events:o,shadows:h,linear:d,flat:m,legacy:_,orthographic:v,frameloop:S,dpr:x,performance:w,raycaster:A,camera:k,size:P,onPointerMissed:(...j)=>re.current==null?void 0:re.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(l?fbe(l)?l.current:l:ee.current),u&&j.setEvents({compute:(Z,ne)=>{const ae=Z[u+"X"],_e=Z[u+"Y"];ne.pointer.set(ae/ne.size.width*2-1,-(_e/ne.size.height)*2+1),ne.raycaster.setFromCamera(ne.pointer,ne.camera)}}),D==null||D(j)}}),me.current.render(Yt(H,{children:Yt(Dj,{set:ce,children:Yt(he.Suspense,{fallback:Yt(mbe,{set:de}),children:n})})})))}),he.useEffect(()=>{const Ae=K.current;if(Ae)return()=>Gj(Ae)},[]),Yt("div",{ref:ee,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:l?"none":"auto",...i},...L,children:Yt("div",{ref:U,style:{width:"100%",height:"100%"},children:Yt("canvas",{ref:K,style:{display:"block"},children:e})})})}),jbe=he.forwardRef(function(n,e){return Yt(Xj,{children:Yt(Vbe,{...n,ref:e})})});var Yj={exports:{}},Op={},v5={exports:{}},y5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b5;function Xbe(){return b5||(b5=1,function(n){function e(j,Z){var ne=j.length;j.push(Z);e:for(;0<ne;){var ae=ne-1>>>1,_e=j[ae];if(0<s(_e,Z))j[ae]=Z,j[ne]=_e,ne=ae;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var Z=j[0],ne=j.pop();if(ne!==Z){j[0]=ne;e:for(var ae=0,_e=j.length,Le=_e>>>1;ae<Le;){var we=2*(ae+1)-1,Xe=j[we],Re=we+1,qe=j[Re];if(0>s(Xe,ne))Re<_e&&0>s(qe,Xe)?(j[ae]=qe,j[Re]=ne,ae=Re):(j[ae]=Xe,j[we]=ne,ae=we);else if(Re<_e&&0>s(qe,ne))j[ae]=qe,j[Re]=ne,ae=Re;else break e}}return Z}function s(j,Z){var ne=j.sortIndex-Z.sortIndex;return ne!==0?ne:j.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],d=[],m=1,_=null,v=3,S=!1,x=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(j){for(var Z=t(d);Z!==null;){if(Z.callback===null)i(d);else if(Z.startTime<=j)i(d),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(d)}}function L(j){if(w=!1,D(j),!x)if(t(h)!==null)x=!0,me(z);else{var Z=t(d);Z!==null&&Ae(L,Z.startTime-j)}}function z(j,Z){x=!1,w&&(w=!1,k(P),P=-1),S=!0;var ne=v;try{for(D(Z),_=t(h);_!==null&&(!(_.expirationTime>Z)||j&&!re());){var ae=_.callback;if(typeof ae=="function"){_.callback=null,v=_.priorityLevel;var _e=ae(_.expirationTime<=Z);Z=n.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),D(Z)}else i(h);_=t(h)}if(_!==null)var Le=!0;else{var we=t(d);we!==null&&Ae(L,we.startTime-Z),Le=!1}return Le}finally{_=null,v=ne,S=!1}}var H=!1,U=null,P=-1,K=5,ee=-1;function re(){return!(n.unstable_now()-ee<K)}function ie(){if(U!==null){var j=n.unstable_now();ee=j;var Z=!0;try{Z=U(!0,j)}finally{Z?de():(H=!1,U=null)}}else H=!1}var de;if(typeof O=="function")de=function(){O(ie)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ce=oe.port2;oe.port1.onmessage=ie,de=function(){ce.postMessage(null)}}else de=function(){A(ie,0)};function me(j){U=j,H||(H=!0,de())}function Ae(j,Z){P=A(function(){j(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){x||S||(x=!0,me(z))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var ne=v;v=Z;try{return j()}finally{v=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,Z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ne=v;v=j;try{return Z()}finally{v=ne}},n.unstable_scheduleCallback=function(j,Z,ne){var ae=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ae+ne:ae):ne=ae,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ne+_e,j={id:m++,callback:Z,priorityLevel:j,startTime:ne,expirationTime:_e,sortIndex:-1},ne>ae?(j.sortIndex=ne,e(d,j),t(h)===null&&j===t(d)&&(w?(k(P),P=-1):w=!0,Ae(L,ne-ae))):(j.sortIndex=_e,e(h,j),x||S||(x=!0,me(z))),j},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(j){var Z=v;return function(){var ne=v;v=Z;try{return j.apply(this,arguments)}finally{v=ne}}}}(y5)),y5}var T5;function Ybe(){return T5||(T5=1,function(n){n.exports=Xbe()}(v5)),v5.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S5;function Kbe(){if(S5)return Op;S5=1;var n=Sr,e=Ybe();function t(g){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+g,I=1;I<arguments.length;I++)y+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function o(g,y){l(g,y),l(g+"Capture",y)}function l(g,y){for(s[g]=y,g=0;g<y.length;g++)i.add(y[g])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},_={};function v(g){return h.call(_,g)?!0:h.call(m,g)?!1:d.test(g)?_[g]=!0:(m[g]=!0,!1)}function S(g,y,I,B){if(I!==null&&I.type===0)return!1;switch(typeof y){case"function":case"symbol":return!0;case"boolean":return B?!1:I!==null?!I.acceptsBooleans:(g=g.toLowerCase().slice(0,5),g!=="data-"&&g!=="aria-");default:return!1}}function x(g,y,I,B){if(y===null||typeof y>"u"||S(g,y,I,B))return!0;if(B)return!1;if(I!==null)switch(I.type){case 3:return!y;case 4:return y===!1;case 5:return isNaN(y);case 6:return isNaN(y)||1>y}return!1}function w(g,y,I,B,V,J,fe){this.acceptsBooleans=y===2||y===3||y===4,this.attributeName=B,this.attributeNamespace=V,this.mustUseProperty=I,this.propertyName=g,this.type=y,this.sanitizeURL=J,this.removeEmptyString=fe}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(g){A[g]=new w(g,0,!1,g,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(g){var y=g[0];A[y]=new w(y,1,!1,g[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(g){A[g]=new w(g,2,!1,g.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(g){A[g]=new w(g,2,!1,g,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(g){A[g]=new w(g,3,!1,g.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(g){A[g]=new w(g,3,!0,g,null,!1,!1)}),["capture","download"].forEach(function(g){A[g]=new w(g,4,!1,g,null,!1,!1)}),["cols","rows","size","span"].forEach(function(g){A[g]=new w(g,6,!1,g,null,!1,!1)}),["rowSpan","start"].forEach(function(g){A[g]=new w(g,5,!1,g.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function O(g){return g[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(g){var y=g.replace(k,O);A[y]=new w(y,1,!1,g,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(g){var y=g.replace(k,O);A[y]=new w(y,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(g){var y=g.replace(k,O);A[y]=new w(y,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(g){A[g]=new w(g,1,!1,g.toLowerCase(),null,!1,!1)}),A.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(g){A[g]=new w(g,1,!1,g.toLowerCase(),null,!0,!0)});function D(g,y,I,B){var V=A.hasOwnProperty(y)?A[y]:null;(V!==null?V.type!==0:B||!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(x(y,I,V,B)&&(I=null),B||V===null?v(y)&&(I===null?g.removeAttribute(y):g.setAttribute(y,""+I)):V.mustUseProperty?g[V.propertyName]=I===null?V.type===3?!1:"":I:(y=V.attributeName,B=V.attributeNamespace,I===null?g.removeAttribute(y):(V=V.type,I=V===3||V===4&&I===!0?"":""+I,B?g.setAttributeNS(B,y,I):g.setAttribute(y,I))))}var L=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),H=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),re=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),j=Symbol.iterator;function Z(g){return g===null||typeof g!="object"?null:(g=j&&g[j]||g["@@iterator"],typeof g=="function"?g:null)}var ne=Object.assign,ae;function _e(g){if(ae===void 0)try{throw Error()}catch(I){var y=I.stack.trim().match(/\n( *(at )?)/);ae=y&&y[1]||""}return`
`+ae+g}var Le=!1;function we(g,y){if(!g||Le)return"";Le=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(Ct){var B=Ct}Reflect.construct(g,[],y)}else{try{y.call()}catch(Ct){B=Ct}g.call(y.prototype)}else{try{throw Error()}catch(Ct){B=Ct}g()}}catch(Ct){if(Ct&&B&&typeof Ct.stack=="string"){for(var V=Ct.stack.split(`
`),J=B.stack.split(`
`),fe=V.length-1,Ue=J.length-1;1<=fe&&0<=Ue&&V[fe]!==J[Ue];)Ue--;for(;1<=fe&&0<=Ue;fe--,Ue--)if(V[fe]!==J[Ue]){if(fe!==1||Ue!==1)do if(fe--,Ue--,0>Ue||V[fe]!==J[Ue]){var Ze=`
`+V[fe].replace(" at new "," at ");return g.displayName&&Ze.includes("<anonymous>")&&(Ze=Ze.replace("<anonymous>",g.displayName)),Ze}while(1<=fe&&0<=Ue);break}}}finally{Le=!1,Error.prepareStackTrace=I}return(g=g?g.displayName||g.name:"")?_e(g):""}function Xe(g){switch(g.tag){case 5:return _e(g.type);case 16:return _e("Lazy");case 13:return _e("Suspense");case 19:return _e("SuspenseList");case 0:case 2:case 15:return g=we(g.type,!1),g;case 11:return g=we(g.type.render,!1),g;case 1:return g=we(g.type,!0),g;default:return""}}function Re(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case U:return"Fragment";case H:return"Portal";case K:return"Profiler";case P:return"StrictMode";case de:return"Suspense";case oe:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case re:return(g.displayName||"Context")+".Consumer";case ee:return(g._context.displayName||"Context")+".Provider";case ie:var y=g.render;return g=g.displayName,g||(g=y.displayName||y.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case ce:return y=g.displayName||null,y!==null?y:Re(g.type)||"Memo";case me:y=g._payload,g=g._init;try{return Re(g(y))}catch{}}return null}function qe(g){var y=g.type;switch(g.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=y.render,g=g.displayName||g.name||"",y.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(y);case 8:return y===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function Je(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function ht(g){var y=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function it(g){var y=ht(g)?"checked":"value",I=Object.getOwnPropertyDescriptor(g.constructor.prototype,y),B=""+g[y];if(!g.hasOwnProperty(y)&&typeof I<"u"&&typeof I.get=="function"&&typeof I.set=="function"){var V=I.get,J=I.set;return Object.defineProperty(g,y,{configurable:!0,get:function(){return V.call(this)},set:function(fe){B=""+fe,J.call(this,fe)}}),Object.defineProperty(g,y,{enumerable:I.enumerable}),{getValue:function(){return B},setValue:function(fe){B=""+fe},stopTracking:function(){g._valueTracker=null,delete g[y]}}}}function Oe(g){g._valueTracker||(g._valueTracker=it(g))}function Ee(g){if(!g)return!1;var y=g._valueTracker;if(!y)return!0;var I=y.getValue(),B="";return g&&(B=ht(g)?g.checked?"true":"false":g.value),g=B,g!==I?(y.setValue(g),!0):!1}function Fe(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}function rt(g,y){var I=y.checked;return ne({},y,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:I??g._wrapperState.initialChecked})}function nt(g,y){var I=y.defaultValue==null?"":y.defaultValue,B=y.checked!=null?y.checked:y.defaultChecked;I=Je(y.value!=null?y.value:I),g._wrapperState={initialChecked:B,initialValue:I,controlled:y.type==="checkbox"||y.type==="radio"?y.checked!=null:y.value!=null}}function dt(g,y){y=y.checked,y!=null&&D(g,"checked",y,!1)}function It(g,y){dt(g,y);var I=Je(y.value),B=y.type;if(I!=null)B==="number"?(I===0&&g.value===""||g.value!=I)&&(g.value=""+I):g.value!==""+I&&(g.value=""+I);else if(B==="submit"||B==="reset"){g.removeAttribute("value");return}y.hasOwnProperty("value")?wt(g,y.type,I):y.hasOwnProperty("defaultValue")&&wt(g,y.type,Je(y.defaultValue)),y.checked==null&&y.defaultChecked!=null&&(g.defaultChecked=!!y.defaultChecked)}function mt(g,y,I){if(y.hasOwnProperty("value")||y.hasOwnProperty("defaultValue")){var B=y.type;if(!(B!=="submit"&&B!=="reset"||y.value!==void 0&&y.value!==null))return;y=""+g._wrapperState.initialValue,I||y===g.value||(g.value=y),g.defaultValue=y}I=g.name,I!==""&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,I!==""&&(g.name=I)}function wt(g,y,I){(y!=="number"||Fe(g.ownerDocument)!==g)&&(I==null?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+I&&(g.defaultValue=""+I))}var $t=Array.isArray;function pt(g,y,I,B){if(g=g.options,y){y={};for(var V=0;V<I.length;V++)y["$"+I[V]]=!0;for(I=0;I<g.length;I++)V=y.hasOwnProperty("$"+g[I].value),g[I].selected!==V&&(g[I].selected=V),V&&B&&(g[I].defaultSelected=!0)}else{for(I=""+Je(I),y=null,V=0;V<g.length;V++){if(g[V].value===I){g[V].selected=!0,B&&(g[V].defaultSelected=!0);return}y!==null||g[V].disabled||(y=g[V])}y!==null&&(y.selected=!0)}}function Te(g,y){if(y.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},y,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function te(g,y){var I=y.value;if(I==null){if(I=y.children,y=y.defaultValue,I!=null){if(y!=null)throw Error(t(92));if($t(I)){if(1<I.length)throw Error(t(93));I=I[0]}y=I}y==null&&(y=""),I=y}g._wrapperState={initialValue:Je(I)}}function ke(g,y){var I=Je(y.value),B=Je(y.defaultValue);I!=null&&(I=""+I,I!==g.value&&(g.value=I),y.defaultValue==null&&g.defaultValue!==I&&(g.defaultValue=I)),B!=null&&(g.defaultValue=""+B)}function ot(g){var y=g.textContent;y===g._wrapperState.initialValue&&y!==""&&y!==null&&(g.value=y)}function ft(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xt(g,y){return g==null||g==="http://www.w3.org/1999/xhtml"?ft(y):g==="http://www.w3.org/2000/svg"&&y==="foreignObject"?"http://www.w3.org/1999/xhtml":g}var at,Ge=function(g){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(y,I,B,V){MSApp.execUnsafeLocalFunction(function(){return g(y,I,B,V)})}:g}(function(g,y){if(g.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in g)g.innerHTML=y;else{for(at=at||document.createElement("div"),at.innerHTML="<svg>"+y.valueOf().toString()+"</svg>",y=at.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;y.firstChild;)g.appendChild(y.firstChild)}});function Ce(g,y){if(y){var I=g.firstChild;if(I&&I===g.lastChild&&I.nodeType===3){I.nodeValue=y;return}}g.textContent=y}var X={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q=["Webkit","ms","Moz","O"];Object.keys(X).forEach(function(g){Q.forEach(function(y){y=y+g.charAt(0).toUpperCase()+g.substring(1),X[y]=X[g]})});function le(g,y,I){return y==null||typeof y=="boolean"||y===""?"":I||typeof y!="number"||y===0||X.hasOwnProperty(g)&&X[g]?(""+y).trim():y+"px"}function $e(g,y){g=g.style;for(var I in y)if(y.hasOwnProperty(I)){var B=I.indexOf("--")===0,V=le(I,y[I],B);I==="float"&&(I="cssFloat"),B?g.setProperty(I,V):g[I]=V}}var We=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ft(g,y){if(y){if(We[g]&&(y.children!=null||y.dangerouslySetInnerHTML!=null))throw Error(t(137,g));if(y.dangerouslySetInnerHTML!=null){if(y.children!=null)throw Error(t(60));if(typeof y.dangerouslySetInnerHTML!="object"||!("__html"in y.dangerouslySetInnerHTML))throw Error(t(61))}if(y.style!=null&&typeof y.style!="object")throw Error(t(62))}}function Be(g,y){if(g.indexOf("-")===-1)return typeof y.is=="string";switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ut=null;function ut(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var Ht=null,zt=null,En=null;function Pr(g){if(g=Hr(g)){if(typeof Ht!="function")throw Error(t(280));var y=g.stateNode;y&&(y=Xp(y),Ht(g.stateNode,g.type,y))}}function Er(g){zt?En?En.push(g):En=[g]:zt=g}function Kr(){if(zt){var g=zt,y=En;if(En=zt=null,Pr(g),y)for(g=0;g<y.length;g++)Pr(y[g])}}function or(g,y){return g(y)}function Wn(){}var q=!1;function ge(g,y,I){if(q)return g(y,I);q=!0;try{return or(g,y,I)}finally{q=!1,(zt!==null||En!==null)&&(Wn(),Kr())}}function Ne(g,y){var I=g.stateNode;if(I===null)return null;var B=Xp(I);if(B===null)return null;I=B[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(B=!B.disabled)||(g=g.type,B=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!B;break e;default:g=!1}if(g)return null;if(I&&typeof I!="function")throw Error(t(231,y,typeof I));return I}var tt=!1;if(u)try{var kt={};Object.defineProperty(kt,"passive",{get:function(){tt=!0}}),window.addEventListener("test",kt,kt),window.removeEventListener("test",kt,kt)}catch{tt=!1}function qt(g,y,I,B,V,J,fe,Ue,Ze){var Ct=Array.prototype.slice.call(arguments,3);try{y.apply(I,Ct)}catch(Xt){this.onError(Xt)}}var _n=!1,Ie=null,lt=!1,Et=null,gt={onError:function(g){_n=!0,Ie=g}};function Nt(g,y,I,B,V,J,fe,Ue,Ze){_n=!1,Ie=null,qt.apply(gt,arguments)}function yn(g,y,I,B,V,J,fe,Ue,Ze){if(Nt.apply(this,arguments),_n){if(_n){var Ct=Ie;_n=!1,Ie=null}else throw Error(t(198));lt||(lt=!0,Et=Ct)}}function Pn(g){var y=g,I=g;if(g.alternate)for(;y.return;)y=y.return;else{g=y;do y=g,y.flags&4098&&(I=y.return),g=y.return;while(g)}return y.tag===3?I:null}function ir(g){if(g.tag===13){var y=g.memoizedState;if(y===null&&(g=g.alternate,g!==null&&(y=g.memoizedState)),y!==null)return y.dehydrated}return null}function yr(g){if(Pn(g)!==g)throw Error(t(188))}function ni(g){var y=g.alternate;if(!y){if(y=Pn(g),y===null)throw Error(t(188));return y!==g?null:g}for(var I=g,B=y;;){var V=I.return;if(V===null)break;var J=V.alternate;if(J===null){if(B=V.return,B!==null){I=B;continue}break}if(V.child===J.child){for(J=V.child;J;){if(J===I)return yr(V),g;if(J===B)return yr(V),y;J=J.sibling}throw Error(t(188))}if(I.return!==B.return)I=V,B=J;else{for(var fe=!1,Ue=V.child;Ue;){if(Ue===I){fe=!0,I=V,B=J;break}if(Ue===B){fe=!0,B=V,I=J;break}Ue=Ue.sibling}if(!fe){for(Ue=J.child;Ue;){if(Ue===I){fe=!0,I=J,B=V;break}if(Ue===B){fe=!0,B=J,I=V;break}Ue=Ue.sibling}if(!fe)throw Error(t(189))}}if(I.alternate!==B)throw Error(t(190))}if(I.tag!==3)throw Error(t(188));return I.stateNode.current===I?g:y}function $r(g){return g=ni(g),g!==null?Ir(g):null}function Ir(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var y=Ir(g);if(y!==null)return y;g=g.sibling}return null}var ji=e.unstable_scheduleCallback,Yo=e.unstable_cancelCallback,Oo=e.unstable_shouldYield,cl=e.unstable_requestPaint,Kt=e.unstable_now,dr=e.unstable_getCurrentPriorityLevel,ga=e.unstable_ImmediatePriority,Ko=e.unstable_UserBlockingPriority,ms=e.unstable_NormalPriority,gs=e.unstable_LowPriority,di=e.unstable_IdlePriority,pr=null,fn=null;function ur(g){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(pr,g,void 0,(g.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:Zi,nr=Math.log,pi=Math.LN2;function Zi(g){return g>>>=0,g===0?32:31-(nr(g)/pi|0)|0}var Xr=64,Fi=4194304;function Ua(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function hl(g,y){var I=g.pendingLanes;if(I===0)return 0;var B=0,V=g.suspendedLanes,J=g.pingedLanes,fe=I&268435455;if(fe!==0){var Ue=fe&~V;Ue!==0?B=Ua(Ue):(J&=fe,J!==0&&(B=Ua(J)))}else fe=I&~V,fe!==0?B=Ua(fe):J!==0&&(B=Ua(J));if(B===0)return 0;if(y!==0&&y!==B&&!(y&V)&&(V=B&-B,J=y&-y,V>=J||V===16&&(J&4194240)!==0))return y;if(B&4&&(B|=I&16),y=g.entangledLanes,y!==0)for(g=g.entanglements,y&=B;0<y;)I=31-wr(y),V=1<<I,B|=g[I],y&=~V;return B}function vc(g,y){switch(g){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yu(g,y){for(var I=g.suspendedLanes,B=g.pingedLanes,V=g.expirationTimes,J=g.pendingLanes;0<J;){var fe=31-wr(J),Ue=1<<fe,Ze=V[fe];Ze===-1?(!(Ue&I)||Ue&B)&&(V[fe]=vc(Ue,y)):Ze<=y&&(g.expiredLanes|=Ue),J&=~Ue}}function Os(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function Lo(){var g=Xr;return Xr<<=1,!(Xr&4194240)&&(Xr=64),g}function hu(g){for(var y=[],I=0;31>I;I++)y.push(g);return y}function Ul(g,y,I){g.pendingLanes|=y,y!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,y=31-wr(y),g[y]=I}function _h(g,y){var I=g.pendingLanes&~y;g.pendingLanes=y,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=y,g.mutableReadLanes&=y,g.entangledLanes&=y,y=g.entanglements;var B=g.eventTimes;for(g=g.expirationTimes;0<I;){var V=31-wr(I),J=1<<V;y[V]=0,B[V]=-1,g[V]=-1,I&=~J}}function Jo(g,y){var I=g.entangledLanes|=y;for(g=g.entanglements;I;){var B=31-wr(I),V=1<<B;V&y|g[B]&y&&(g[B]|=y),I&=~V}}var rr=0;function Ui(g){return g&=-g,1<g?4<g?g&268435455?16:536870912:4:1}var Vc,vh,yc,dl,du,pl=!1,fl=[],qn=null,Zn=null,ml=null,za=new Map,_a=new Map,zl=[],$i="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zi(g,y){switch(g){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":ml=null;break;case"pointerover":case"pointerout":za.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":_a.delete(y.pointerId)}}function gl(g,y,I,B,V,J){return g===null||g.nativeEvent!==J?(g={blockedOn:y,domEventName:I,eventSystemFlags:B,nativeEvent:J,targetContainers:[V]},y!==null&&(y=Hr(y),y!==null&&vh(y)),g):(g.eventSystemFlags|=B,y=g.targetContainers,V!==null&&y.indexOf(V)===-1&&y.push(V),g)}function kd(g,y,I,B,V){switch(y){case"focusin":return qn=gl(qn,g,y,I,B,V),!0;case"dragenter":return Zn=gl(Zn,g,y,I,B,V),!0;case"mouseover":return ml=gl(ml,g,y,I,B,V),!0;case"pointerover":var J=V.pointerId;return za.set(J,gl(za.get(J)||null,g,y,I,B,V)),!0;case"gotpointercapture":return J=V.pointerId,_a.set(J,gl(_a.get(J)||null,g,y,I,B,V)),!0}return!1}function Ls(g){var y=Va(g.target);if(y!==null){var I=Pn(y);if(I!==null){if(y=I.tag,y===13){if(y=ir(I),y!==null){g.blockedOn=y,du(g.priority,function(){yc(I)});return}}else if(y===3&&I.stateNode.current.memoizedState.isDehydrated){g.blockedOn=I.tag===3?I.stateNode.containerInfo:null;return}}}g.blockedOn=null}function pu(g){if(g.blockedOn!==null)return!1;for(var y=g.targetContainers;0<y.length;){var I=qo(g.domEventName,g.eventSystemFlags,y[0],g.nativeEvent);if(I===null){I=g.nativeEvent;var B=new I.constructor(I.type,I);Ut=B,I.target.dispatchEvent(B),Ut=null}else return y=Hr(I),y!==null&&vh(y),g.blockedOn=I,!1;y.shift()}return!0}function Do(g,y,I){pu(g)&&I.delete(y)}function Hl(){pl=!1,qn!==null&&pu(qn)&&(qn=null),Zn!==null&&pu(Zn)&&(Zn=null),ml!==null&&pu(ml)&&(ml=null),za.forEach(Do),_a.forEach(Do)}function Yr(g,y){g.blockedOn===y&&(g.blockedOn=null,pl||(pl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hl)))}function fr(g){function y(V){return Yr(V,g)}if(0<fl.length){Yr(fl[0],g);for(var I=1;I<fl.length;I++){var B=fl[I];B.blockedOn===g&&(B.blockedOn=null)}}for(qn!==null&&Yr(qn,g),Zn!==null&&Yr(Zn,g),ml!==null&&Yr(ml,g),za.forEach(y),_a.forEach(y),I=0;I<zl.length;I++)B=zl[I],B.blockedOn===g&&(B.blockedOn=null);for(;0<zl.length&&(I=zl[0],I.blockedOn===null);)Ls(I),I.blockedOn===null&&zl.shift()}var Xi=L.ReactCurrentBatchConfig,Ds=!0;function fu(g,y,I,B){var V=rr,J=Xi.transition;Xi.transition=null;try{rr=1,jc(g,y,I,B)}finally{rr=V,Xi.transition=J}}function Gl(g,y,I,B){var V=rr,J=Xi.transition;Xi.transition=null;try{rr=4,jc(g,y,I,B)}finally{rr=V,Xi.transition=J}}function jc(g,y,I,B){if(Ds){var V=qo(g,y,I,B);if(V===null)Dd(g,y,B,Qo,I),zi(g,B);else if(kd(V,g,y,I,B))B.stopPropagation();else if(zi(g,B),y&4&&-1<$i.indexOf(g)){for(;V!==null;){var J=Hr(V);if(J!==null&&Vc(J),J=qo(g,y,I,B),J===null&&Dd(g,y,B,Qo,I),J===V)break;V=J}V!==null&&B.stopPropagation()}else Dd(g,y,B,null,I)}}var Qo=null;function qo(g,y,I,B){if(Qo=null,g=ut(B),g=Va(g),g!==null)if(y=Pn(g),y===null)g=null;else if(I=y.tag,I===13){if(g=ir(y),g!==null)return g;g=null}else if(I===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;g=null}else y!==g&&(g=null);return Qo=g,null}function mu(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dr()){case ga:return 1;case Ko:return 4;case ms:case gs:return 16;case di:return 536870912;default:return 16}default:return 16}}var Jr=null,_s=null,Ri=null;function ri(){if(Ri)return Ri;var g,y=_s,I=y.length,B,V="value"in Jr?Jr.value:Jr.textContent,J=V.length;for(g=0;g<I&&y[g]===V[g];g++);var fe=I-g;for(B=1;B<=fe&&y[I-B]===V[J-B];B++);return Ri=V.slice(g,1<B?1-B:void 0)}function va(g){var y=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&y===13&&(g=13)):g=y,g===10&&(g=13),32<=g||g===13?g:0}function Hi(){return!0}function gu(){return!1}function oo(g){function y(I,B,V,J,fe){this._reactName=I,this._targetInst=V,this.type=B,this.nativeEvent=J,this.target=fe,this.currentTarget=null;for(var Ue in g)g.hasOwnProperty(Ue)&&(I=g[Ue],this[Ue]=I?I(J):J[Ue]);return this.isDefaultPrevented=(J.defaultPrevented!=null?J.defaultPrevented:J.returnValue===!1)?Hi:gu,this.isPropagationStopped=gu,this}return ne(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var I=this.nativeEvent;I&&(I.preventDefault?I.preventDefault():typeof I.returnValue!="unknown"&&(I.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var I=this.nativeEvent;I&&(I.stopPropagation?I.stopPropagation():typeof I.cancelBubble!="unknown"&&(I.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),y}var _u={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ha=oo(_u),fi=ne({},_u,{view:0,detail:0}),ii=oo(fi),zn,Qr,xi,Yh=ne({},fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bu,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==xi&&(xi&&g.type==="mousemove"?(zn=g.screenX-xi.screenX,Qr=g.screenY-xi.screenY):Qr=zn=0,xi=g),zn)},movementY:function(g){return"movementY"in g?g.movementY:Qr}}),vu=oo(Yh),vs=ne({},Yh,{dataTransfer:0}),_l=oo(vs),Kh=ne({},fi,{relatedTarget:0}),mi=oo(Kh),yu=ne({},_u,{animationName:0,elapsedTime:0,pseudoElement:0}),pp=oo(yu),fp=ne({},_u,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),yh=oo(fp),mp=ne({},_u,{data:0}),Vp=oo(mp),Ff={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ao(g){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(g):(g=Ku[g])?!!y[g]:!1}function bu(){return ao}var bh=ne({},fi,{key:function(g){if(g.key){var y=Ff[g.key]||g.key;if(y!=="Unidentified")return y}return g.type==="keypress"?(g=va(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?gp[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bu,charCode:function(g){return g.type==="keypress"?va(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?va(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),ya=oo(bh),Vr=ne({},Yh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cr=oo(Vr),Xs=ne({},fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bu}),Zo=oo(Xs),No=ne({},_u,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tu=oo(No),vl=ne({},Yh,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),Jh=oo(vl),wi=[9,13,27,32],gi=u&&"CompositionEvent"in window,hr=null;u&&"documentMode"in document&&(hr=document.documentMode);var Ci=u&&"TextEvent"in window&&!hr,ea=u&&(!gi||hr&&8<hr&&11>=hr),Wl=" ",_p=!1;function vp(g,y){switch(g){case"keyup":return wi.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qh(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var Su=!1;function Ju(g,y){switch(g){case"compositionend":return Qh(y);case"keypress":return y.which!==32?null:(_p=!0,Wl);case"textInput":return g=y.data,g===Wl&&_p?null:g;default:return null}}function bc(g,y){if(Su)return g==="compositionend"||!gi&&vp(g,y)?(g=ri(),Ri=_s=Jr=null,Su=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return ea&&y.locale!=="ko"?null:y.data;default:return null}}var Th={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tc(g){var y=g&&g.nodeName&&g.nodeName.toLowerCase();return y==="input"?!!Th[g.type]:y==="textarea"}function Vl(g,y,I,B){Er(B),y=Nd(y,"onChange"),0<y.length&&(I=new Ha("onChange","change",null,I,B),g.push({event:I,listeners:y}))}var ta=null,Qu=null;function Sh(g){xh(g,0)}function Sc(g){var y=Hn(g);if(Ee(y))return g}function Ec(g,y){if(g==="change")return y}var ys=!1;if(u){var qr;if(u){var yl="oninput"in document;if(!yl){var na=document.createElement("div");na.setAttribute("oninput","return;"),yl=typeof na.oninput=="function"}qr=yl}else qr=!1;ys=qr&&(!document.documentMode||9<document.documentMode)}function bl(){ta&&(ta.detachEvent("onpropertychange",jl),Qu=ta=null)}function jl(g){if(g.propertyName==="value"&&Sc(Qu)){var y=[];Vl(y,Qu,g,ut(g)),ge(Sh,y)}}function Xc(g,y,I){g==="focusin"?(bl(),ta=y,Qu=I,ta.attachEvent("onpropertychange",jl)):g==="focusout"&&bl()}function Od(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return Sc(Qu)}function _i(g,y){if(g==="click")return Sc(y)}function Ye(g,y){if(g==="input"||g==="change")return Sc(y)}function Ot(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var Tt=typeof Object.is=="function"?Object.is:Ot;function gn(g,y){if(Tt(g,y))return!0;if(typeof g!="object"||g===null||typeof y!="object"||y===null)return!1;var I=Object.keys(g),B=Object.keys(y);if(I.length!==B.length)return!1;for(B=0;B<I.length;B++){var V=I[B];if(!h.call(y,V)||!Tt(g[V],y[V]))return!1}return!0}function Nn(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function er(g,y){var I=Nn(g);g=0;for(var B;I;){if(I.nodeType===3){if(B=g+I.textContent.length,g<=y&&B>=y)return{node:I,offset:y-g};g=B}e:{for(;I;){if(I.nextSibling){I=I.nextSibling;break e}I=I.parentNode}I=void 0}I=Nn(I)}}function sr(g,y){return g&&y?g===y?!0:g&&g.nodeType===3?!1:y&&y.nodeType===3?sr(g,y.parentNode):"contains"in g?g.contains(y):g.compareDocumentPosition?!!(g.compareDocumentPosition(y)&16):!1:!1}function In(){for(var g=window,y=Fe();y instanceof g.HTMLIFrameElement;){try{var I=typeof y.contentWindow.location.href=="string"}catch{I=!1}if(I)g=y.contentWindow;else break;y=Fe(g.document)}return y}function Rr(g){var y=g&&g.nodeName&&g.nodeName.toLowerCase();return y&&(y==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||y==="textarea"||g.contentEditable==="true")}function Ns(g){var y=In(),I=g.focusedElem,B=g.selectionRange;if(y!==I&&I&&I.ownerDocument&&sr(I.ownerDocument.documentElement,I)){if(B!==null&&Rr(I)){if(y=B.start,g=B.end,g===void 0&&(g=y),"selectionStart"in I)I.selectionStart=y,I.selectionEnd=Math.min(g,I.value.length);else if(g=(y=I.ownerDocument||document)&&y.defaultView||window,g.getSelection){g=g.getSelection();var V=I.textContent.length,J=Math.min(B.start,V);B=B.end===void 0?J:Math.min(B.end,V),!g.extend&&J>B&&(V=B,B=J,J=V),V=er(I,J);var fe=er(I,B);V&&fe&&(g.rangeCount!==1||g.anchorNode!==V.node||g.anchorOffset!==V.offset||g.focusNode!==fe.node||g.focusOffset!==fe.offset)&&(y=y.createRange(),y.setStart(V.node,V.offset),g.removeAllRanges(),J>B?(g.addRange(y),g.extend(fe.node,fe.offset)):(y.setEnd(fe.node,fe.offset),g.addRange(y)))}}for(y=[],g=I;g=g.parentNode;)g.nodeType===1&&y.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<y.length;I++)g=y[I],g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}var bs=u&&"documentMode"in document&&11>=document.documentMode,To=null,ba=null,Yi=null,ls=!1;function $c(g,y,I){var B=I.window===I?I.document:I.nodeType===9?I:I.ownerDocument;ls||To==null||To!==Fe(B)||(B=To,"selectionStart"in B&&Rr(B)?B={start:B.selectionStart,end:B.selectionEnd}:(B=(B.ownerDocument&&B.ownerDocument.defaultView||window).getSelection(),B={anchorNode:B.anchorNode,anchorOffset:B.anchorOffset,focusNode:B.focusNode,focusOffset:B.focusOffset}),Yi&&gn(Yi,B)||(Yi=B,B=Nd(ba,"onSelect"),0<B.length&&(y=new Ha("onSelect","select",null,y,I),g.push({event:y,listeners:B}),y.target=To)))}function Fr(g,y){var I={};return I[g.toLowerCase()]=y.toLowerCase(),I["Webkit"+g]="webkit"+y,I["Moz"+g]="moz"+y,I}var Bo={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionend:Fr("Transition","TransitionEnd")},Bs={},Ys={};u&&(Ys=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function ra(g){if(Bs[g])return Bs[g];if(!Bo[g])return g;var y=Bo[g],I;for(I in y)if(y.hasOwnProperty(I)&&I in Ys)return Bs[g]=y[I];return g}var Eh=ra("animationend"),Yc=ra("animationiteration"),$h=ra("animationstart"),Eu=ra("transitionend"),qh=new Map,Zh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tl(g,y){qh.set(g,y),o(y,[g])}for(var ed=0;ed<Zh.length;ed++){var xc=Zh[ed],Kc=xc.toLowerCase(),Ld=xc[0].toUpperCase()+xc.slice(1);Tl(Kc,"on"+Ld)}Tl(Eh,"onAnimationEnd"),Tl(Yc,"onAnimationIteration"),Tl($h,"onAnimationStart"),Tl("dblclick","onDoubleClick"),Tl("focusin","onFocus"),Tl("focusout","onBlur"),Tl(Eu,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ta=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ga));function $u(g,y,I){var B=g.type||"unknown-event";g.currentTarget=I,yn(B,y,void 0,g),g.currentTarget=null}function xh(g,y){y=(y&4)!==0;for(var I=0;I<g.length;I++){var B=g[I],V=B.event;B=B.listeners;e:{var J=void 0;if(y)for(var fe=B.length-1;0<=fe;fe--){var Ue=B[fe],Ze=Ue.instance,Ct=Ue.currentTarget;if(Ue=Ue.listener,Ze!==J&&V.isPropagationStopped())break e;$u(V,Ue,Ct),J=Ze}else for(fe=0;fe<B.length;fe++){if(Ue=B[fe],Ze=Ue.instance,Ct=Ue.currentTarget,Ue=Ue.listener,Ze!==J&&V.isPropagationStopped())break e;$u(V,Ue,Ct),J=Ze}}}if(lt)throw g=Et,lt=!1,Et=null,g}function si(g,y){var I=y[oa];I===void 0&&(I=y[oa]=new Set);var B=g+"__bubble";I.has(B)||(wh(y,g,2,!1),I.add(B))}function td(g,y,I){var B=0;y&&(B|=4),wh(I,g,B,y)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function qu(g){if(!g[Jc]){g[Jc]=!0,i.forEach(function(I){I!=="selectionchange"&&(Ta.has(I)||td(I,!1,g),td(I,!0,g))});var y=g.nodeType===9?g:g.ownerDocument;y===null||y[Jc]||(y[Jc]=!0,td("selectionchange",!1,y))}}function wh(g,y,I,B){switch(mu(y)){case 1:var V=fu;break;case 4:V=Gl;break;default:V=jc}I=V.bind(null,y,I,g),V=void 0,!tt||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(V=!0),B?V!==void 0?g.addEventListener(y,I,{capture:!0,passive:V}):g.addEventListener(y,I,!0):V!==void 0?g.addEventListener(y,I,{passive:V}):g.addEventListener(y,I,!1)}function Dd(g,y,I,B,V){var J=B;if(!(y&1)&&!(y&2)&&B!==null)e:for(;;){if(B===null)return;var fe=B.tag;if(fe===3||fe===4){var Ue=B.stateNode.containerInfo;if(Ue===V||Ue.nodeType===8&&Ue.parentNode===V)break;if(fe===4)for(fe=B.return;fe!==null;){var Ze=fe.tag;if((Ze===3||Ze===4)&&(Ze=fe.stateNode.containerInfo,Ze===V||Ze.nodeType===8&&Ze.parentNode===V))return;fe=fe.return}for(;Ue!==null;){if(fe=Va(Ue),fe===null)return;if(Ze=fe.tag,Ze===5||Ze===6){B=J=fe;continue e}Ue=Ue.parentNode}}B=B.return}ge(function(){var Ct=J,Xt=ut(I),tn=[];e:{var Qt=qh.get(g);if(Qt!==void 0){var bn=Ha,Rn=g;switch(g){case"keypress":if(va(I)===0)break e;case"keydown":case"keyup":bn=ya;break;case"focusin":Rn="focus",bn=mi;break;case"focusout":Rn="blur",bn=mi;break;case"beforeblur":case"afterblur":bn=mi;break;case"click":if(I.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bn=vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bn=_l;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bn=Zo;break;case Eh:case Yc:case $h:bn=pp;break;case Eu:bn=Tu;break;case"scroll":bn=ii;break;case"wheel":bn=Jh;break;case"copy":case"cut":case"paste":bn=yh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bn=cr}var Dn=(y&4)!==0,ro=!Dn&&g==="scroll",yt=Dn?Qt!==null?Qt+"Capture":null:Qt;Dn=[];for(var st=Ct,bt;st!==null;){bt=st;var on=bt.stateNode;if(bt.tag===5&&on!==null&&(bt=on,yt!==null&&(on=Ne(st,yt),on!=null&&Dn.push(Sl(st,on,bt)))),ro)break;st=st.return}0<Dn.length&&(Qt=new bn(Qt,Rn,null,I,Xt),tn.push({event:Qt,listeners:Dn}))}}if(!(y&7)){e:{if(Qt=g==="mouseover"||g==="pointerover",bn=g==="mouseout"||g==="pointerout",Qt&&I!==Ut&&(Rn=I.relatedTarget||I.fromElement)&&(Va(Rn)||Rn[es]))break e;if((bn||Qt)&&(Qt=Xt.window===Xt?Xt:(Qt=Xt.ownerDocument)?Qt.defaultView||Qt.parentWindow:window,bn?(Rn=I.relatedTarget||I.toElement,bn=Ct,Rn=Rn?Va(Rn):null,Rn!==null&&(ro=Pn(Rn),Rn!==ro||Rn.tag!==5&&Rn.tag!==6)&&(Rn=null)):(bn=null,Rn=Ct),bn!==Rn)){if(Dn=vu,on="onMouseLeave",yt="onMouseEnter",st="mouse",(g==="pointerout"||g==="pointerover")&&(Dn=cr,on="onPointerLeave",yt="onPointerEnter",st="pointer"),ro=bn==null?Qt:Hn(bn),bt=Rn==null?Qt:Hn(Rn),Qt=new Dn(on,st+"leave",bn,I,Xt),Qt.target=ro,Qt.relatedTarget=bt,on=null,Va(Xt)===Ct&&(Dn=new Dn(yt,st+"enter",Rn,I,Xt),Dn.target=bt,Dn.relatedTarget=ro,on=Dn),ro=on,bn&&Rn)t:{for(Dn=bn,yt=Rn,st=0,bt=Dn;bt;bt=Ch(bt))st++;for(bt=0,on=yt;on;on=Ch(on))bt++;for(;0<st-bt;)Dn=Ch(Dn),st--;for(;0<bt-st;)yt=Ch(yt),bt--;for(;st--;){if(Dn===yt||yt!==null&&Dn===yt.alternate)break t;Dn=Ch(Dn),yt=Ch(yt)}Dn=null}else Dn=null;bn!==null&&lo(tn,Qt,bn,Dn,!1),Rn!==null&&ro!==null&&lo(tn,ro,Rn,Dn,!0)}}e:{if(Qt=Ct?Hn(Ct):window,bn=Qt.nodeName&&Qt.nodeName.toLowerCase(),bn==="select"||bn==="input"&&Qt.type==="file")var Gn=Ec;else if(Tc(Qt))if(ys)Gn=Ye;else{Gn=Od;var Bn=Xc}else(bn=Qt.nodeName)&&bn.toLowerCase()==="input"&&(Qt.type==="checkbox"||Qt.type==="radio")&&(Gn=_i);if(Gn&&(Gn=Gn(g,Ct))){Vl(tn,Gn,I,Xt);break e}Bn&&Bn(g,Qt,Ct),g==="focusout"&&(Bn=Qt._wrapperState)&&Bn.controlled&&Qt.type==="number"&&wt(Qt,"number",Qt.value)}switch(Bn=Ct?Hn(Ct):window,g){case"focusin":(Tc(Bn)||Bn.contentEditable==="true")&&(To=Bn,ba=Ct,Yi=null);break;case"focusout":Yi=ba=To=null;break;case"mousedown":ls=!0;break;case"contextmenu":case"mouseup":case"dragend":ls=!1,$c(tn,I,Xt);break;case"selectionchange":if(bs)break;case"keydown":case"keyup":$c(tn,I,Xt)}var Yn;if(gi)e:{switch(g){case"compositionstart":var gr="onCompositionStart";break e;case"compositionend":gr="onCompositionEnd";break e;case"compositionupdate":gr="onCompositionUpdate";break e}gr=void 0}else Su?vp(g,I)&&(gr="onCompositionEnd"):g==="keydown"&&I.keyCode===229&&(gr="onCompositionStart");gr&&(ea&&I.locale!=="ko"&&(Su||gr!=="onCompositionStart"?gr==="onCompositionEnd"&&Su&&(Yn=ri()):(Jr=Xt,_s="value"in Jr?Jr.value:Jr.textContent,Su=!0)),Bn=Nd(Ct,gr),0<Bn.length&&(gr=new Vp(gr,g,null,I,Xt),tn.push({event:gr,listeners:Bn}),Yn?gr.data=Yn:(Yn=Qh(I),Yn!==null&&(gr.data=Yn)))),(Yn=Ci?Ju(g,I):bc(g,I))&&(Ct=Nd(Ct,"onBeforeInput"),0<Ct.length&&(Xt=new Vp("onBeforeInput","beforeinput",null,I,Xt),tn.push({event:Xt,listeners:Ct}),Xt.data=Yn))}xh(tn,y)})}function Sl(g,y,I){return{instance:g,listener:y,currentTarget:I}}function Nd(g,y){for(var I=y+"Capture",B=[];g!==null;){var V=g,J=V.stateNode;V.tag===5&&J!==null&&(V=J,J=Ne(g,I),J!=null&&B.unshift(Sl(g,J,V)),J=Ne(g,y),J!=null&&B.push(Sl(g,J,V))),g=g.return}return B}function Ch(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5);return g||null}function lo(g,y,I,B,V){for(var J=y._reactName,fe=[];I!==null&&I!==B;){var Ue=I,Ze=Ue.alternate,Ct=Ue.stateNode;if(Ze!==null&&Ze===B)break;Ue.tag===5&&Ct!==null&&(Ue=Ct,V?(Ze=Ne(I,J),Ze!=null&&fe.unshift(Sl(I,Ze,Ue))):V||(Ze=Ne(I,J),Ze!=null&&fe.push(Sl(I,Ze,Ue)))),I=I.return}fe.length!==0&&g.push({event:y,listeners:fe})}var ia=/\r\n?/g,Uf=/\u0000|\uFFFD/g;function jp(g){return(typeof g=="string"?g:""+g).replace(ia,`
`).replace(Uf,"")}function El(g,y,I){if(y=jp(y),jp(g)!==y&&I)throw Error(t(425))}function $l(){}var wc=null,Mh=null;function nd(g,y){return g==="textarea"||g==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var Zu=typeof setTimeout=="function"?setTimeout:void 0,Wa=typeof clearTimeout=="function"?clearTimeout:void 0,ec=typeof Promise=="function"?Promise:void 0,rd=typeof queueMicrotask=="function"?queueMicrotask:typeof ec<"u"?function(g){return ec.resolve(null).then(g).catch(Cc)}:Zu;function Cc(g){setTimeout(function(){throw g})}function Mc(g,y){var I=y,B=0;do{var V=I.nextSibling;if(g.removeChild(I),V&&V.nodeType===8)if(I=V.data,I==="/$"){if(B===0){g.removeChild(V),fr(y);return}B--}else I!=="$"&&I!=="$?"&&I!=="$!"||B++;I=V}while(I);fr(y)}function tc(g){for(;g!=null;g=g.nextSibling){var y=g.nodeType;if(y===1||y===3)break;if(y===8){if(y=g.data,y==="$"||y==="$!"||y==="$?")break;if(y==="/$")return null}}return g}function Bd(g){g=g.previousSibling;for(var y=0;g;){if(g.nodeType===8){var I=g.data;if(I==="$"||I==="$!"||I==="$?"){if(y===0)return g;y--}else I==="/$"&&y++}g=g.previousSibling}return null}var sa=Math.random().toString(36).slice(2),Cr="__reactFiber$"+sa,Xl="__reactProps$"+sa,es="__reactContainer$"+sa,oa="__reactEvents$"+sa,ve="__reactListeners$"+sa,Ks="__reactHandles$"+sa;function Va(g){var y=g[Cr];if(y)return y;for(var I=g.parentNode;I;){if(y=I[es]||I[Cr]){if(I=y.alternate,y.child!==null||I!==null&&I.child!==null)for(g=Bd(g);g!==null;){if(I=g[Cr])return I;g=Bd(g)}return y}g=I,I=g.parentNode}return null}function Hr(g){return g=g[Cr]||g[es],!g||g.tag!==5&&g.tag!==6&&g.tag!==13&&g.tag!==3?null:g}function Hn(g){if(g.tag===5||g.tag===6)return g.stateNode;throw Error(t(33))}function Xp(g){return g[Xl]||null}var Sa=[],Zr=-1;function vi(g){return{current:g}}function Mi(g){0>Zr||(g.current=Sa[Zr],Sa[Zr]=null,Zr--)}function ki(g,y){Zr++,Sa[Zr]=g.current,g.current=y}var Ac={},Po=vi(Ac),Fo=vi(!1),uo=Ac;function Ic(g,y){var I=g.type.contextTypes;if(!I)return Ac;var B=g.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===y)return B.__reactInternalMemoizedMaskedChildContext;var V={},J;for(J in I)V[J]=y[J];return B&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=y,g.__reactInternalMemoizedMaskedChildContext=V),V}function So(g){return g=g.childContextTypes,g!=null}function Pd(){Mi(Fo),Mi(Po)}function Fd(g,y,I){if(Po.current!==Ac)throw Error(t(168));ki(Po,y),ki(Fo,I)}function Ah(g,y,I){var B=g.stateNode;if(y=y.childContextTypes,typeof B.getChildContext!="function")return I;B=B.getChildContext();for(var V in B)if(!(V in y))throw Error(t(108,qe(g)||"Unknown",V));return ne({},I,B)}function Ea(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Ac,uo=Po.current,ki(Po,g),ki(Fo,Fo.current),!0}function Mn(g,y,I){var B=g.stateNode;if(!B)throw Error(t(169));I?(g=Ah(g,y,uo),B.__reactInternalMemoizedMergedChildContext=g,Mi(Fo),Mi(Po),ki(Po,g)):Mi(Fo),ki(Fo,I)}var us=null,Ts=!1,oi=!1;function xl(g){us===null?us=[g]:us.push(g)}function wl(g){Ts=!0,xl(g)}function hn(){if(!oi&&us!==null){oi=!0;var g=0,y=rr;try{var I=us;for(rr=1;g<I.length;g++){var B=I[g];do B=B(!0);while(B!==null)}us=null,Ts=!1}catch(V){throw us!==null&&(us=us.slice(g+1)),ji(ga,hn),V}finally{rr=y,oi=!1}}return null}var Gr=[],ts=0,Yp=null,Qc=0,Ps=[],Uo=0,pn=null,sn=1,ja="";function nc(g,y){Gr[ts++]=Qc,Gr[ts++]=Yp,Yp=g,Qc=y}function zf(g,y,I){Ps[Uo++]=sn,Ps[Uo++]=ja,Ps[Uo++]=pn,pn=g;var B=sn;g=ja;var V=32-wr(B)-1;B&=~(1<<V),I+=1;var J=32-wr(y)+V;if(30<J){var fe=V-V%5;J=(B&(1<<fe)-1).toString(32),B>>=fe,V-=fe,sn=1<<32-wr(y)+V|I<<V|B,ja=J+g}else sn=1<<J|I<<V|B,ja=g}function xu(g){g.return!==null&&(nc(g,1),zf(g,1,0))}function aa(g){for(;g===Yp;)Yp=Gr[--ts],Gr[ts]=null,Qc=Gr[--ts],Gr[ts]=null;for(;g===pn;)pn=Ps[--Uo],Ps[Uo]=null,ja=Ps[--Uo],Ps[Uo]=null,sn=Ps[--Uo],Ps[Uo]=null}var cs=null,$a=null,Gi=!1,xa=null;function wu(g,y){var I=Fu(5,null,null,0);I.elementType="DELETED",I.stateNode=y,I.return=g,y=g.deletions,y===null?(g.deletions=[I],g.flags|=16):y.push(I)}function Ud(g,y){switch(g.tag){case 5:var I=g.type;return y=y.nodeType!==1||I.toLowerCase()!==y.nodeName.toLowerCase()?null:y,y!==null?(g.stateNode=y,cs=g,$a=tc(y.firstChild),!0):!1;case 6:return y=g.pendingProps===""||y.nodeType!==3?null:y,y!==null?(g.stateNode=y,cs=g,$a=null,!0):!1;case 13:return y=y.nodeType!==8?null:y,y!==null?(I=pn!==null?{id:sn,overflow:ja}:null,g.memoizedState={dehydrated:y,treeContext:I,retryLane:1073741824},I=Fu(18,null,null,0),I.stateNode=y,I.return=g,g.child=I,cs=g,$a=null,!0):!1;default:return!1}}function rc(g){return(g.mode&1)!==0&&(g.flags&128)===0}function Js(g){if(Gi){var y=$a;if(y){var I=y;if(!Ud(g,y)){if(rc(g))throw Error(t(418));y=tc(I.nextSibling);var B=cs;y&&Ud(g,y)?wu(B,I):(g.flags=g.flags&-4097|2,Gi=!1,cs=g)}}else{if(rc(g))throw Error(t(418));g.flags=g.flags&-4097|2,Gi=!1,cs=g}}}function zd(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;cs=g}function qc(g){if(g!==cs)return!1;if(!Gi)return zd(g),Gi=!0,!1;var y;if((y=g.tag!==3)&&!(y=g.tag!==5)&&(y=g.type,y=y!=="head"&&y!=="body"&&!nd(g.type,g.memoizedProps)),y&&(y=$a)){if(rc(g))throw id(),Error(t(418));for(;y;)wu(g,y),y=tc(y.nextSibling)}if(zd(g),g.tag===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));e:{for(g=g.nextSibling,y=0;g;){if(g.nodeType===8){var I=g.data;if(I==="/$"){if(y===0){$a=tc(g.nextSibling);break e}y--}else I!=="$"&&I!=="$!"&&I!=="$?"||y++}g=g.nextSibling}$a=null}}else $a=cs?tc(g.stateNode.nextSibling):null;return!0}function id(){for(var g=$a;g;)g=tc(g.nextSibling)}function wa(){$a=cs=null,Gi=!1}function Cl(g){xa===null?xa=[g]:xa.push(g)}var Kp=L.ReactCurrentBatchConfig;function Yl(g,y){if(g&&g.defaultProps){y=ne({},y),g=g.defaultProps;for(var I in g)y[I]===void 0&&(y[I]=g[I]);return y}return y}var Cu=vi(null),sd=null,Rc=null,hs=null;function Mu(){hs=Rc=sd=null}function ic(g){var y=Cu.current;Mi(Cu),g._currentValue=y}function Eo(g,y,I){for(;g!==null;){var B=g.alternate;if((g.childLanes&y)!==y?(g.childLanes|=y,B!==null&&(B.childLanes|=y)):B!==null&&(B.childLanes&y)!==y&&(B.childLanes|=y),g===I)break;g=g.return}}function Xa(g,y){sd=g,hs=Rc=null,g=g.dependencies,g!==null&&g.firstContext!==null&&(g.lanes&y&&(rn=!0),g.firstContext=null)}function Ss(g){var y=g._currentValue;if(hs!==g)if(g={context:g,memoizedValue:y,next:null},Rc===null){if(sd===null)throw Error(t(308));Rc=g,sd.dependencies={lanes:0,firstContext:g}}else Rc=Rc.next=g;return y}var co=null;function Zc(g){co===null?co=[g]:co.push(g)}function Qs(g,y,I,B){var V=y.interleaved;return V===null?(I.next=I,Zc(y)):(I.next=V.next,V.next=I),y.interleaved=I,Ya(g,B)}function Ya(g,y){g.lanes|=y;var I=g.alternate;for(I!==null&&(I.lanes|=y),I=g,g=g.return;g!==null;)g.childLanes|=y,I=g.alternate,I!==null&&(I.childLanes|=y),I=g,g=g.return;return I.tag===3?I.stateNode:null}var sc=!1;function yp(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eh(g,y){g=g.updateQueue,y.updateQueue===g&&(y.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function la(g,y){return{eventTime:g,lane:y,tag:0,payload:null,callback:null,next:null}}function yi(g,y,I){var B=g.updateQueue;if(B===null)return null;if(B=B.shared,(Ai&2)!==0){var V=B.pending;return V===null?y.next=y:(y.next=V.next,V.next=y),B.pending=y,Ya(g,I)}return V=B.interleaved,V===null?(y.next=y,Zc(B)):(y.next=V.next,V.next=y),B.interleaved=y,Ya(g,I)}function Cn(g,y,I){if(y=y.updateQueue,y!==null&&(y=y.shared,(I&4194240)!==0)){var B=y.lanes;B&=g.pendingLanes,I|=B,y.lanes=I,Jo(g,I)}}function Ln(g,y){var I=g.updateQueue,B=g.alternate;if(B!==null&&(B=B.updateQueue,I===B)){var V=null,J=null;if(I=I.firstBaseUpdate,I!==null){do{var fe={eventTime:I.eventTime,lane:I.lane,tag:I.tag,payload:I.payload,callback:I.callback,next:null};J===null?V=J=fe:J=J.next=fe,I=I.next}while(I!==null);J===null?V=J=y:J=J.next=y}else V=J=y;I={baseState:B.baseState,firstBaseUpdate:V,lastBaseUpdate:J,shared:B.shared,effects:B.effects},g.updateQueue=I;return}g=I.lastBaseUpdate,g===null?I.firstBaseUpdate=y:g.next=y,I.lastBaseUpdate=y}function br(g,y,I,B){var V=g.updateQueue;sc=!1;var J=V.firstBaseUpdate,fe=V.lastBaseUpdate,Ue=V.shared.pending;if(Ue!==null){V.shared.pending=null;var Ze=Ue,Ct=Ze.next;Ze.next=null,fe===null?J=Ct:fe.next=Ct,fe=Ze;var Xt=g.alternate;Xt!==null&&(Xt=Xt.updateQueue,Ue=Xt.lastBaseUpdate,Ue!==fe&&(Ue===null?Xt.firstBaseUpdate=Ct:Ue.next=Ct,Xt.lastBaseUpdate=Ze))}if(J!==null){var tn=V.baseState;fe=0,Xt=Ct=Ze=null,Ue=J;do{var Qt=Ue.lane,bn=Ue.eventTime;if((B&Qt)===Qt){Xt!==null&&(Xt=Xt.next={eventTime:bn,lane:0,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null});e:{var Rn=g,Dn=Ue;switch(Qt=y,bn=I,Dn.tag){case 1:if(Rn=Dn.payload,typeof Rn=="function"){tn=Rn.call(bn,tn,Qt);break e}tn=Rn;break e;case 3:Rn.flags=Rn.flags&-65537|128;case 0:if(Rn=Dn.payload,Qt=typeof Rn=="function"?Rn.call(bn,tn,Qt):Rn,Qt==null)break e;tn=ne({},tn,Qt);break e;case 2:sc=!0}}Ue.callback!==null&&Ue.lane!==0&&(g.flags|=64,Qt=V.effects,Qt===null?V.effects=[Ue]:Qt.push(Ue))}else bn={eventTime:bn,lane:Qt,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null},Xt===null?(Ct=Xt=bn,Ze=tn):Xt=Xt.next=bn,fe|=Qt;if(Ue=Ue.next,Ue===null){if(Ue=V.shared.pending,Ue===null)break;Qt=Ue,Ue=Qt.next,Qt.next=null,V.lastBaseUpdate=Qt,V.shared.pending=null}}while(!0);if(Xt===null&&(Ze=tn),V.baseState=Ze,V.firstBaseUpdate=Ct,V.lastBaseUpdate=Xt,y=V.shared.interleaved,y!==null){V=y;do fe|=V.lane,V=V.next;while(V!==y)}else J===null&&(V.shared.lanes=0);Ep|=fe,g.lanes=fe,g.memoizedState=tn}}function Lr(g,y,I){if(g=y.effects,y.effects=null,g!==null)for(y=0;y<g.length;y++){var B=g[y],V=B.callback;if(V!==null){if(B.callback=null,B=I,typeof V!="function")throw Error(t(191,V));V.call(B)}}}var Wr=new n.Component().refs;function qs(g,y,I,B){y=g.memoizedState,I=I(B,y),I=I==null?y:ne({},y,I),g.memoizedState=I,g.lanes===0&&(g.updateQueue.baseState=I)}var Oi={isMounted:function(g){return(g=g._reactInternals)?Pn(g)===g:!1},enqueueSetState:function(g,y,I){g=g._reactInternals;var B=cc(),V=Wd(g),J=la(B,V);J.payload=y,I!=null&&(J.callback=I),y=yi(g,J,V),y!==null&&(Mo(y,g,V,B),Cn(y,g,V))},enqueueReplaceState:function(g,y,I){g=g._reactInternals;var B=cc(),V=Wd(g),J=la(B,V);J.tag=1,J.payload=y,I!=null&&(J.callback=I),y=yi(g,J,V),y!==null&&(Mo(y,g,V,B),Cn(y,g,V))},enqueueForceUpdate:function(g,y){g=g._reactInternals;var I=cc(),B=Wd(g),V=la(I,B);V.tag=2,y!=null&&(V.callback=y),y=yi(g,V,B),y!==null&&(Mo(y,g,B,I),Cn(y,g,B))}};function Wi(g,y,I,B,V,J,fe){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(B,J,fe):y.prototype&&y.prototype.isPureReactComponent?!gn(I,B)||!gn(V,J):!0}function Kl(g,y,I){var B=!1,V=Ac,J=y.contextType;return typeof J=="object"&&J!==null?J=Ss(J):(V=So(y)?uo:Po.current,B=y.contextTypes,J=(B=B!=null)?Ic(g,V):Ac),y=new y(I,J),g.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Oi,g.stateNode=y,y._reactInternals=g,B&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=V,g.__reactInternalMemoizedMaskedChildContext=J),y}function Au(g,y,I,B){g=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(I,B),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(I,B),y.state!==g&&Oi.enqueueReplaceState(y,y.state,null)}function oc(g,y,I,B){var V=g.stateNode;V.props=I,V.state=g.memoizedState,V.refs=Wr,yp(g);var J=y.contextType;typeof J=="object"&&J!==null?V.context=Ss(J):(J=So(y)?uo:Po.current,V.context=Ic(g,J)),V.state=g.memoizedState,J=y.getDerivedStateFromProps,typeof J=="function"&&(qs(g,y,J,I),V.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(y=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),y!==V.state&&Oi.enqueueReplaceState(V,V.state,null),br(g,I,V,B),V.state=g.memoizedState),typeof V.componentDidMount=="function"&&(g.flags|=4194308)}function Iu(g,y,I){if(g=I.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(I._owner){if(I=I._owner,I){if(I.tag!==1)throw Error(t(309));var B=I.stateNode}if(!B)throw Error(t(147,g));var V=B,J=""+g;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===J?y.ref:(y=function(fe){var Ue=V.refs;Ue===Wr&&(Ue=V.refs={}),fe===null?delete Ue[J]:Ue[J]=fe},y._stringRef=J,y)}if(typeof g!="string")throw Error(t(284));if(!I._owner)throw Error(t(290,g))}return g}function Fs(g,y){throw g=Object.prototype.toString.call(y),Error(t(31,g==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":g))}function ho(g){var y=g._init;return y(g._payload)}function od(g){function y(yt,st){if(g){var bt=yt.deletions;bt===null?(yt.deletions=[st],yt.flags|=16):bt.push(st)}}function I(yt,st){if(!g)return null;for(;st!==null;)y(yt,st),st=st.sibling;return null}function B(yt,st){for(yt=new Map;st!==null;)st.key!==null?yt.set(st.key,st):yt.set(st.index,st),st=st.sibling;return yt}function V(yt,st){return yt=Lh(yt,st),yt.index=0,yt.sibling=null,yt}function J(yt,st,bt){return yt.index=bt,g?(bt=yt.alternate,bt!==null?(bt=bt.index,bt<st?(yt.flags|=2,st):bt):(yt.flags|=2,st)):(yt.flags|=1048576,st)}function fe(yt){return g&&yt.alternate===null&&(yt.flags|=2),yt}function Ue(yt,st,bt,on){return st===null||st.tag!==6?(st=Yf(bt,yt.mode,on),st.return=yt,st):(st=V(st,bt),st.return=yt,st)}function Ze(yt,st,bt,on){var Gn=bt.type;return Gn===U?Xt(yt,st,bt.props.children,on,bt.key):st!==null&&(st.elementType===Gn||typeof Gn=="object"&&Gn!==null&&Gn.$$typeof===me&&ho(Gn)===st.type)?(on=V(st,bt.props),on.ref=Iu(yt,st,bt),on.return=yt,on):(on=Fm(bt.type,bt.key,bt.props,null,yt.mode,on),on.ref=Iu(yt,st,bt),on.return=yt,on)}function Ct(yt,st,bt,on){return st===null||st.tag!==4||st.stateNode.containerInfo!==bt.containerInfo||st.stateNode.implementation!==bt.implementation?(st=pd(bt,yt.mode,on),st.return=yt,st):(st=V(st,bt.children||[]),st.return=yt,st)}function Xt(yt,st,bt,on,Gn){return st===null||st.tag!==7?(st=rf(bt,yt.mode,on,Gn),st.return=yt,st):(st=V(st,bt),st.return=yt,st)}function tn(yt,st,bt){if(typeof st=="string"&&st!==""||typeof st=="number")return st=Yf(""+st,yt.mode,bt),st.return=yt,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case z:return bt=Fm(st.type,st.key,st.props,null,yt.mode,bt),bt.ref=Iu(yt,null,st),bt.return=yt,bt;case H:return st=pd(st,yt.mode,bt),st.return=yt,st;case me:var on=st._init;return tn(yt,on(st._payload),bt)}if($t(st)||Z(st))return st=rf(st,yt.mode,bt,null),st.return=yt,st;Fs(yt,st)}return null}function Qt(yt,st,bt,on){var Gn=st!==null?st.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number")return Gn!==null?null:Ue(yt,st,""+bt,on);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case z:return bt.key===Gn?Ze(yt,st,bt,on):null;case H:return bt.key===Gn?Ct(yt,st,bt,on):null;case me:return Gn=bt._init,Qt(yt,st,Gn(bt._payload),on)}if($t(bt)||Z(bt))return Gn!==null?null:Xt(yt,st,bt,on,null);Fs(yt,bt)}return null}function bn(yt,st,bt,on,Gn){if(typeof on=="string"&&on!==""||typeof on=="number")return yt=yt.get(bt)||null,Ue(st,yt,""+on,Gn);if(typeof on=="object"&&on!==null){switch(on.$$typeof){case z:return yt=yt.get(on.key===null?bt:on.key)||null,Ze(st,yt,on,Gn);case H:return yt=yt.get(on.key===null?bt:on.key)||null,Ct(st,yt,on,Gn);case me:var Bn=on._init;return bn(yt,st,bt,Bn(on._payload),Gn)}if($t(on)||Z(on))return yt=yt.get(bt)||null,Xt(st,yt,on,Gn,null);Fs(st,on)}return null}function Rn(yt,st,bt,on){for(var Gn=null,Bn=null,Yn=st,gr=st=0,rl=null;Yn!==null&&gr<bt.length;gr++){Yn.index>gr?(rl=Yn,Yn=null):rl=Yn.sibling;var Di=Qt(yt,Yn,bt[gr],on);if(Di===null){Yn===null&&(Yn=rl);break}g&&Yn&&Di.alternate===null&&y(yt,Yn),st=J(Di,st,gr),Bn===null?Gn=Di:Bn.sibling=Di,Bn=Di,Yn=rl}if(gr===bt.length)return I(yt,Yn),Gi&&nc(yt,gr),Gn;if(Yn===null){for(;gr<bt.length;gr++)Yn=tn(yt,bt[gr],on),Yn!==null&&(st=J(Yn,st,gr),Bn===null?Gn=Yn:Bn.sibling=Yn,Bn=Yn);return Gi&&nc(yt,gr),Gn}for(Yn=B(yt,Yn);gr<bt.length;gr++)rl=bn(Yn,yt,gr,bt[gr],on),rl!==null&&(g&&rl.alternate!==null&&Yn.delete(rl.key===null?gr:rl.key),st=J(rl,st,gr),Bn===null?Gn=rl:Bn.sibling=rl,Bn=rl);return g&&Yn.forEach(function(uf){return y(yt,uf)}),Gi&&nc(yt,gr),Gn}function Dn(yt,st,bt,on){var Gn=Z(bt);if(typeof Gn!="function")throw Error(t(150));if(bt=Gn.call(bt),bt==null)throw Error(t(151));for(var Bn=Gn=null,Yn=st,gr=st=0,rl=null,Di=bt.next();Yn!==null&&!Di.done;gr++,Di=bt.next()){Yn.index>gr?(rl=Yn,Yn=null):rl=Yn.sibling;var uf=Qt(yt,Yn,Di.value,on);if(uf===null){Yn===null&&(Yn=rl);break}g&&Yn&&uf.alternate===null&&y(yt,Yn),st=J(uf,st,gr),Bn===null?Gn=uf:Bn.sibling=uf,Bn=uf,Yn=rl}if(Di.done)return I(yt,Yn),Gi&&nc(yt,gr),Gn;if(Yn===null){for(;!Di.done;gr++,Di=bt.next())Di=tn(yt,Di.value,on),Di!==null&&(st=J(Di,st,gr),Bn===null?Gn=Di:Bn.sibling=Di,Bn=Di);return Gi&&nc(yt,gr),Gn}for(Yn=B(yt,Yn);!Di.done;gr++,Di=bt.next())Di=bn(Yn,yt,gr,Di.value,on),Di!==null&&(g&&Di.alternate!==null&&Yn.delete(Di.key===null?gr:Di.key),st=J(Di,st,gr),Bn===null?Gn=Di:Bn.sibling=Di,Bn=Di);return g&&Yn.forEach(function(T_){return y(yt,T_)}),Gi&&nc(yt,gr),Gn}function ro(yt,st,bt,on){if(typeof bt=="object"&&bt!==null&&bt.type===U&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case z:e:{for(var Gn=bt.key,Bn=st;Bn!==null;){if(Bn.key===Gn){if(Gn=bt.type,Gn===U){if(Bn.tag===7){I(yt,Bn.sibling),st=V(Bn,bt.props.children),st.return=yt,yt=st;break e}}else if(Bn.elementType===Gn||typeof Gn=="object"&&Gn!==null&&Gn.$$typeof===me&&ho(Gn)===Bn.type){I(yt,Bn.sibling),st=V(Bn,bt.props),st.ref=Iu(yt,Bn,bt),st.return=yt,yt=st;break e}I(yt,Bn);break}else y(yt,Bn);Bn=Bn.sibling}bt.type===U?(st=rf(bt.props.children,yt.mode,on,bt.key),st.return=yt,yt=st):(on=Fm(bt.type,bt.key,bt.props,null,yt.mode,on),on.ref=Iu(yt,st,bt),on.return=yt,yt=on)}return fe(yt);case H:e:{for(Bn=bt.key;st!==null;){if(st.key===Bn)if(st.tag===4&&st.stateNode.containerInfo===bt.containerInfo&&st.stateNode.implementation===bt.implementation){I(yt,st.sibling),st=V(st,bt.children||[]),st.return=yt,yt=st;break e}else{I(yt,st);break}else y(yt,st);st=st.sibling}st=pd(bt,yt.mode,on),st.return=yt,yt=st}return fe(yt);case me:return Bn=bt._init,ro(yt,st,Bn(bt._payload),on)}if($t(bt))return Rn(yt,st,bt,on);if(Z(bt))return Dn(yt,st,bt,on);Fs(yt,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"?(bt=""+bt,st!==null&&st.tag===6?(I(yt,st.sibling),st=V(st,bt),st.return=yt,yt=st):(I(yt,st),st=Yf(bt,yt.mode,on),st.return=yt,yt=st),fe(yt)):I(yt,st)}return ro}var Ca=od(!0),Ru=od(!1),ku={},Zs=vi(ku),$o=vi(ku),Ka=vi(ku);function xo(g){if(g===ku)throw Error(t(174));return g}function ac(g,y){switch(ki(Ka,y),ki($o,g),ki(Zs,ku),g=y.nodeType,g){case 9:case 11:y=(y=y.documentElement)?y.namespaceURI:xt(null,"");break;default:g=g===8?y.parentNode:y,y=g.namespaceURI||null,g=g.tagName,y=xt(y,g)}Mi(Zs),ki(Zs,y)}function Ou(){Mi(Zs),Mi($o),Mi(Ka)}function Ih(g){xo(Ka.current);var y=xo(Zs.current),I=xt(y,g.type);y!==I&&(ki($o,g),ki(Zs,I))}function th(g){$o.current===g&&(Mi(Zs),Mi($o))}var xr=vi(0);function Ki(g){for(var y=g;y!==null;){if(y.tag===13){var I=y.memoizedState;if(I!==null&&(I=I.dehydrated,I===null||I.data==="$?"||I.data==="$!"))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if(y.flags&128)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var Es=[];function ua(){for(var g=0;g<Es.length;g++)Es[g]._workInProgressVersionPrimary=null;Es.length=0}var Us=L.ReactCurrentDispatcher,Vn=L.ReactCurrentBatchConfig,kc=0,an=null,ai=null,ns=null,Ml=!1,Ja=!1,Bt=0,Ma=0;function Dr(){throw Error(t(321))}function Oc(g,y){if(y===null)return!1;for(var I=0;I<y.length&&I<g.length;I++)if(!Tt(g[I],y[I]))return!1;return!0}function ad(g,y,I,B,V,J){if(kc=J,an=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,Us.current=g===null||g.memoizedState===null?f:$,g=I(B,V),Ja){J=0;do{if(Ja=!1,Bt=0,25<=J)throw Error(t(301));J+=1,ns=ai=null,y.updateQueue=null,Us.current=M,g=I(B,V)}while(Ja)}if(Us.current=c,y=ai!==null&&ai.next!==null,kc=0,ns=ai=an=null,Ml=!1,y)throw Error(t(300));return g}function nh(){var g=Bt!==0;return Bt=0,g}function rs(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ns===null?an.memoizedState=ns=g:ns=ns.next=g,ns}function $s(){if(ai===null){var g=an.alternate;g=g!==null?g.memoizedState:null}else g=ai.next;var y=ns===null?an.memoizedState:ns.next;if(y!==null)ns=y,ai=g;else{if(g===null)throw Error(t(310));ai=g,g={memoizedState:ai.memoizedState,baseState:ai.baseState,baseQueue:ai.baseQueue,queue:ai.queue,next:null},ns===null?an.memoizedState=ns=g:ns=ns.next=g}return ns}function Rh(g,y){return typeof y=="function"?y(g):y}function eo(g){var y=$s(),I=y.queue;if(I===null)throw Error(t(311));I.lastRenderedReducer=g;var B=ai,V=B.baseQueue,J=I.pending;if(J!==null){if(V!==null){var fe=V.next;V.next=J.next,J.next=fe}B.baseQueue=V=J,I.pending=null}if(V!==null){J=V.next,B=B.baseState;var Ue=fe=null,Ze=null,Ct=J;do{var Xt=Ct.lane;if((kc&Xt)===Xt)Ze!==null&&(Ze=Ze.next={lane:0,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null}),B=Ct.hasEagerState?Ct.eagerState:g(B,Ct.action);else{var tn={lane:Xt,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null};Ze===null?(Ue=Ze=tn,fe=B):Ze=Ze.next=tn,an.lanes|=Xt,Ep|=Xt}Ct=Ct.next}while(Ct!==null&&Ct!==J);Ze===null?fe=B:Ze.next=Ue,Tt(B,y.memoizedState)||(rn=!0),y.memoizedState=B,y.baseState=fe,y.baseQueue=Ze,I.lastRenderedState=B}if(g=I.interleaved,g!==null){V=g;do J=V.lane,an.lanes|=J,Ep|=J,V=V.next;while(V!==g)}else V===null&&(I.lanes=0);return[y.memoizedState,I.dispatch]}function Jl(g){var y=$s(),I=y.queue;if(I===null)throw Error(t(311));I.lastRenderedReducer=g;var B=I.dispatch,V=I.pending,J=y.memoizedState;if(V!==null){I.pending=null;var fe=V=V.next;do J=g(J,fe.action),fe=fe.next;while(fe!==V);Tt(J,y.memoizedState)||(rn=!0),y.memoizedState=J,y.baseQueue===null&&(y.baseState=J),I.lastRenderedState=J}return[J,B]}function rh(){}function ih(g,y){var I=an,B=$s(),V=y(),J=!Tt(B.memoizedState,V);if(J&&(B.memoizedState=V,rn=!0),B=B.queue,Nu(to.bind(null,I,B,g),[g]),B.getSnapshot!==y||J||ns!==null&&ns.memoizedState.tag&1){if(I.flags|=2048,Du(9,wo.bind(null,I,B,V,y),void 0,null),Il===null)throw Error(t(349));kc&30||lc(I,y,V)}return V}function lc(g,y,I){g.flags|=16384,g={getSnapshot:y,value:I},y=an.updateQueue,y===null?(y={lastEffect:null,stores:null},an.updateQueue=y,y.stores=[g]):(I=y.stores,I===null?y.stores=[g]:I.push(g))}function wo(g,y,I,B){y.value=I,y.getSnapshot=B,Lu(y)&&sh(g)}function to(g,y,I){return I(function(){Lu(y)&&sh(g)})}function Lu(g){var y=g.getSnapshot;g=g.value;try{var I=y();return!Tt(g,I)}catch{return!0}}function sh(g){var y=Ya(g,1);y!==null&&Mo(y,g,1,-1)}function Qa(g){var y=rs();return typeof g=="function"&&(g=g()),y.memoizedState=y.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rh,lastRenderedState:g},y.queue=g,g=g.dispatch=ud.bind(null,an,g),[y.memoizedState,g]}function Du(g,y,I,B){return g={tag:g,create:y,destroy:I,deps:B,next:null},y=an.updateQueue,y===null?(y={lastEffect:null,stores:null},an.updateQueue=y,y.lastEffect=g.next=g):(I=y.lastEffect,I===null?y.lastEffect=g.next=g:(B=I.next,I.next=g,g.next=B,y.lastEffect=g)),g}function oh(){return $s().memoizedState}function ah(g,y,I,B){var V=rs();an.flags|=g,V.memoizedState=Du(1|y,I,void 0,B===void 0?null:B)}function po(g,y,I,B){var V=$s();B=B===void 0?null:B;var J=void 0;if(ai!==null){var fe=ai.memoizedState;if(J=fe.destroy,B!==null&&Oc(B,fe.deps)){V.memoizedState=Du(y,I,J,B);return}}an.flags|=g,V.memoizedState=Du(1|y,I,J,B)}function zs(g,y){return ah(8390656,8,g,y)}function Nu(g,y){return po(2048,8,g,y)}function Al(g,y){return po(4,2,g,y)}function no(g,y){return po(4,4,g,y)}function qa(g,y){if(typeof y=="function")return g=g(),y(g),function(){y(null)};if(y!=null)return g=g(),y.current=g,function(){y.current=null}}function Aa(g,y,I){return I=I!=null?I.concat([g]):null,po(4,4,qa.bind(null,y,g),I)}function Ql(){}function is(g,y){var I=$s();y=y===void 0?null:y;var B=I.memoizedState;return B!==null&&y!==null&&Oc(y,B[1])?B[0]:(I.memoizedState=[g,y],g)}function Co(g,y){var I=$s();y=y===void 0?null:y;var B=I.memoizedState;return B!==null&&y!==null&&Oc(y,B[1])?B[0]:(g=g(),I.memoizedState=[g,y],g)}function kh(g,y,I){return kc&21?(Tt(I,y)||(I=Lo(),an.lanes|=I,Ep|=I,g.baseState=!0),y):(g.baseState&&(g.baseState=!1,rn=!0),g.memoizedState=I)}function ld(g,y){var I=rr;rr=I!==0&&4>I?I:4,g(!0);var B=Vn.transition;Vn.transition={};try{g(!1),y()}finally{rr=I,Vn.transition=B}}function Za(){return $s().memoizedState}function ql(g,y,I){var B=Wd(g);if(I={lane:B,action:I,hasEagerState:!1,eagerState:null,next:null},Lc(g))Jp(y,I);else if(I=Qs(g,y,I,B),I!==null){var V=cc();Mo(I,g,B,V),E(I,y,B)}}function ud(g,y,I){var B=Wd(g),V={lane:B,action:I,hasEagerState:!1,eagerState:null,next:null};if(Lc(g))Jp(y,V);else{var J=g.alternate;if(g.lanes===0&&(J===null||J.lanes===0)&&(J=y.lastRenderedReducer,J!==null))try{var fe=y.lastRenderedState,Ue=J(fe,I);if(V.hasEagerState=!0,V.eagerState=Ue,Tt(Ue,fe)){var Ze=y.interleaved;Ze===null?(V.next=V,Zc(y)):(V.next=Ze.next,Ze.next=V),y.interleaved=V;return}}catch{}finally{}I=Qs(g,y,V,B),I!==null&&(V=cc(),Mo(I,g,B,V),E(I,y,B))}}function Lc(g){var y=g.alternate;return g===an||y!==null&&y===an}function Jp(g,y){Ja=Ml=!0;var I=g.pending;I===null?y.next=y:(y.next=I.next,I.next=y),g.pending=y}function E(g,y,I){if(I&4194240){var B=y.lanes;B&=g.pendingLanes,I|=B,y.lanes=I,Jo(g,I)}}var c={readContext:Ss,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useInsertionEffect:Dr,useLayoutEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useMutableSource:Dr,useSyncExternalStore:Dr,useId:Dr,unstable_isNewReconciler:!1},f={readContext:Ss,useCallback:function(g,y){return rs().memoizedState=[g,y===void 0?null:y],g},useContext:Ss,useEffect:zs,useImperativeHandle:function(g,y,I){return I=I!=null?I.concat([g]):null,ah(4194308,4,qa.bind(null,y,g),I)},useLayoutEffect:function(g,y){return ah(4194308,4,g,y)},useInsertionEffect:function(g,y){return ah(4,2,g,y)},useMemo:function(g,y){var I=rs();return y=y===void 0?null:y,g=g(),I.memoizedState=[g,y],g},useReducer:function(g,y,I){var B=rs();return y=I!==void 0?I(y):y,B.memoizedState=B.baseState=y,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:y},B.queue=g,g=g.dispatch=ql.bind(null,an,g),[B.memoizedState,g]},useRef:function(g){var y=rs();return g={current:g},y.memoizedState=g},useState:Qa,useDebugValue:Ql,useDeferredValue:function(g){return rs().memoizedState=g},useTransition:function(){var g=Qa(!1),y=g[0];return g=ld.bind(null,g[1]),rs().memoizedState=g,[y,g]},useMutableSource:function(){},useSyncExternalStore:function(g,y,I){var B=an,V=rs();if(Gi){if(I===void 0)throw Error(t(407));I=I()}else{if(I=y(),Il===null)throw Error(t(349));kc&30||lc(B,y,I)}V.memoizedState=I;var J={value:I,getSnapshot:y};return V.queue=J,zs(to.bind(null,B,J,g),[g]),B.flags|=2048,Du(9,wo.bind(null,B,J,I,y),void 0,null),I},useId:function(){var g=rs(),y=Il.identifierPrefix;if(Gi){var I=ja,B=sn;I=(B&~(1<<32-wr(B)-1)).toString(32)+I,y=":"+y+"R"+I,I=Bt++,0<I&&(y+="H"+I.toString(32)),y+=":"}else I=Ma++,y=":"+y+"r"+I.toString(32)+":";return g.memoizedState=y},unstable_isNewReconciler:!1},$={readContext:Ss,useCallback:is,useContext:Ss,useEffect:Nu,useImperativeHandle:Aa,useInsertionEffect:Al,useLayoutEffect:no,useMemo:Co,useReducer:eo,useRef:oh,useState:function(){return eo(Rh)},useDebugValue:Ql,useDeferredValue:function(g){var y=$s();return kh(y,ai.memoizedState,g)},useTransition:function(){var g=eo(Rh)[0],y=$s().memoizedState;return[g,y]},useMutableSource:rh,useSyncExternalStore:ih,useId:Za,unstable_isNewReconciler:!1},M={readContext:Ss,useCallback:is,useContext:Ss,useEffect:Nu,useImperativeHandle:Aa,useInsertionEffect:Al,useLayoutEffect:no,useMemo:Co,useReducer:Jl,useRef:oh,useState:function(){return Jl(Rh)},useDebugValue:Ql,useDeferredValue:function(g){var y=$s();return ai===null?y.memoizedState=g:kh(y,ai.memoizedState,g)},useTransition:function(){var g=Jl(Rh)[0],y=$s().memoizedState;return[g,y]},useMutableSource:rh,useSyncExternalStore:ih,useId:Za,unstable_isNewReconciler:!1};function N(g,y){try{var I="",B=y;do I+=Xe(B),B=B.return;while(B);var V=I}catch(J){V=`
Error generating stack: `+J.message+`
`+J.stack}return{value:g,source:y,stack:V,digest:null}}function G(g,y,I){return{value:g,source:null,stack:I??null,digest:y??null}}function se(g,y){try{console.error(y.value)}catch(I){setTimeout(function(){throw I})}}var xe=typeof WeakMap=="function"?WeakMap:Map;function je(g,y,I){I=la(-1,I),I.tag=3,I.payload={element:null};var B=y.value;return I.callback=function(){wg||(wg=!0,Cg=B),se(g,y)},I}function vt(g,y,I){I=la(-1,I),I.tag=3;var B=g.type.getDerivedStateFromError;if(typeof B=="function"){var V=y.value;I.payload=function(){return B(V)},I.callback=function(){se(g,y)}}var J=g.stateNode;return J!==null&&typeof J.componentDidCatch=="function"&&(I.callback=function(){se(g,y),typeof B!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var fe=y.stack;this.componentDidCatch(y.value,{componentStack:fe!==null?fe:""})}),I}function Gt(g,y,I){var B=g.pingCache;if(B===null){B=g.pingCache=new xe;var V=new Set;B.set(y,V)}else V=B.get(y),V===void 0&&(V=new Set,B.set(y,V));V.has(I)||(V.add(I),g=Gv.bind(null,g,y,I),y.then(g,g))}function en(g){do{var y;if((y=g.tag===13)&&(y=g.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return g;g=g.return}while(g!==null);return null}function dn(g,y,I,B,V){return g.mode&1?(g.flags|=65536,g.lanes=V,g):(g===y?g.flags|=65536:(g.flags|=128,I.flags|=131072,I.flags&=-52805,I.tag===1&&(I.alternate===null?I.tag=17:(y=la(-1,1),y.tag=2,yi(I,y,1))),I.lanes|=1),g)}var ln=L.ReactCurrentOwner,rn=!1;function Tr(g,y,I,B){y.child=g===null?Ru(y,null,I,B):Ca(y,g.child,I,B)}function _t(g,y,I,B,V){I=I.render;var J=y.ref;return Xa(y,V),B=ad(g,y,I,B,J,V),I=nh(),g!==null&&!rn?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~V,hd(g,y,V)):(Gi&&I&&xu(y),y.flags|=1,Tr(g,y,B,V),y.child)}function Se(g,y,I,B,V){if(g===null){var J=I.type;return typeof J=="function"&&!g0(J)&&J.defaultProps===void 0&&I.compare===null&&I.defaultProps===void 0?(y.tag=15,y.type=J,Me(g,y,J,B,V)):(g=Fm(I.type,null,B,y,y.mode,V),g.ref=y.ref,g.return=y,y.child=g)}if(J=g.child,(g.lanes&V)===0){var fe=J.memoizedProps;if(I=I.compare,I=I!==null?I:gn,I(fe,B)&&g.ref===y.ref)return hd(g,y,V)}return y.flags|=1,g=Lh(J,B),g.ref=y.ref,g.return=y,y.child=g}function Me(g,y,I,B,V){if(g!==null){var J=g.memoizedProps;if(gn(J,B)&&g.ref===y.ref)if(rn=!1,y.pendingProps=B=J,(g.lanes&V)!==0)g.flags&131072&&(rn=!0);else return y.lanes=g.lanes,hd(g,y,V)}return Jt(g,y,I,B,V)}function Ke(g,y,I){var B=y.pendingProps,V=B.children,J=g!==null?g.memoizedState:null;if(B.mode==="hidden")if(!(y.mode&1))y.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Wf,Rl),Rl|=I;else{if(!(I&1073741824))return g=J!==null?J.baseLanes|I:I,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:g,cachePool:null,transitions:null},y.updateQueue=null,ki(Wf,Rl),Rl|=g,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},B=J!==null?J.baseLanes:I,ki(Wf,Rl),Rl|=B}else J!==null?(B=J.baseLanes|I,y.memoizedState=null):B=I,ki(Wf,Rl),Rl|=B;return Tr(g,y,V,I),y.child}function Lt(g,y){var I=y.ref;(g===null&&I!==null||g!==null&&g.ref!==I)&&(y.flags|=512,y.flags|=2097152)}function Jt(g,y,I,B,V){var J=So(I)?uo:Po.current;return J=Ic(y,J),Xa(y,V),I=ad(g,y,I,B,J,V),B=nh(),g!==null&&!rn?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~V,hd(g,y,V)):(Gi&&B&&xu(y),y.flags|=1,Tr(g,y,I,V),y.child)}function un(g,y,I,B,V){if(So(I)){var J=!0;Ea(y)}else J=!1;if(Xa(y,V),y.stateNode===null)Hf(g,y),Kl(y,I,B),oc(y,I,B,V),B=!0;else if(g===null){var fe=y.stateNode,Ue=y.memoizedProps;fe.props=Ue;var Ze=fe.context,Ct=I.contextType;typeof Ct=="object"&&Ct!==null?Ct=Ss(Ct):(Ct=So(I)?uo:Po.current,Ct=Ic(y,Ct));var Xt=I.getDerivedStateFromProps,tn=typeof Xt=="function"||typeof fe.getSnapshotBeforeUpdate=="function";tn||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(Ue!==B||Ze!==Ct)&&Au(y,fe,B,Ct),sc=!1;var Qt=y.memoizedState;fe.state=Qt,br(y,B,fe,V),Ze=y.memoizedState,Ue!==B||Qt!==Ze||Fo.current||sc?(typeof Xt=="function"&&(qs(y,I,Xt,B),Ze=y.memoizedState),(Ue=sc||Wi(y,I,Ue,B,Qt,Ze,Ct))?(tn||typeof fe.UNSAFE_componentWillMount!="function"&&typeof fe.componentWillMount!="function"||(typeof fe.componentWillMount=="function"&&fe.componentWillMount(),typeof fe.UNSAFE_componentWillMount=="function"&&fe.UNSAFE_componentWillMount()),typeof fe.componentDidMount=="function"&&(y.flags|=4194308)):(typeof fe.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=B,y.memoizedState=Ze),fe.props=B,fe.state=Ze,fe.context=Ct,B=Ue):(typeof fe.componentDidMount=="function"&&(y.flags|=4194308),B=!1)}else{fe=y.stateNode,eh(g,y),Ue=y.memoizedProps,Ct=y.type===y.elementType?Ue:Yl(y.type,Ue),fe.props=Ct,tn=y.pendingProps,Qt=fe.context,Ze=I.contextType,typeof Ze=="object"&&Ze!==null?Ze=Ss(Ze):(Ze=So(I)?uo:Po.current,Ze=Ic(y,Ze));var bn=I.getDerivedStateFromProps;(Xt=typeof bn=="function"||typeof fe.getSnapshotBeforeUpdate=="function")||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(Ue!==tn||Qt!==Ze)&&Au(y,fe,B,Ze),sc=!1,Qt=y.memoizedState,fe.state=Qt,br(y,B,fe,V);var Rn=y.memoizedState;Ue!==tn||Qt!==Rn||Fo.current||sc?(typeof bn=="function"&&(qs(y,I,bn,B),Rn=y.memoizedState),(Ct=sc||Wi(y,I,Ct,B,Qt,Rn,Ze)||!1)?(Xt||typeof fe.UNSAFE_componentWillUpdate!="function"&&typeof fe.componentWillUpdate!="function"||(typeof fe.componentWillUpdate=="function"&&fe.componentWillUpdate(B,Rn,Ze),typeof fe.UNSAFE_componentWillUpdate=="function"&&fe.UNSAFE_componentWillUpdate(B,Rn,Ze)),typeof fe.componentDidUpdate=="function"&&(y.flags|=4),typeof fe.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof fe.componentDidUpdate!="function"||Ue===g.memoizedProps&&Qt===g.memoizedState||(y.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||Ue===g.memoizedProps&&Qt===g.memoizedState||(y.flags|=1024),y.memoizedProps=B,y.memoizedState=Rn),fe.props=B,fe.state=Rn,fe.context=Ze,B=Ct):(typeof fe.componentDidUpdate!="function"||Ue===g.memoizedProps&&Qt===g.memoizedState||(y.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||Ue===g.memoizedProps&&Qt===g.memoizedState||(y.flags|=1024),B=!1)}return mn(g,y,I,B,J,V)}function mn(g,y,I,B,V,J){Lt(g,y);var fe=(y.flags&128)!==0;if(!B&&!fe)return V&&Mn(y,I,!1),hd(g,y,J);B=y.stateNode,ln.current=y;var Ue=fe&&typeof I.getDerivedStateFromError!="function"?null:B.render();return y.flags|=1,g!==null&&fe?(y.child=Ca(y,g.child,null,J),y.child=Ca(y,null,Ue,J)):Tr(g,y,Ue,J),y.memoizedState=B.state,V&&Mn(y,I,!0),y.child}function On(g){var y=g.stateNode;y.pendingContext?Fd(g,y.pendingContext,y.pendingContext!==y.context):y.context&&Fd(g,y.context,!1),ac(g,y.containerInfo)}function Xn(g,y,I,B,V){return wa(),Cl(V),y.flags|=256,Tr(g,y,I,B),y.child}var mr={dehydrated:null,treeContext:null,retryLane:0};function Zl(g){return{baseLanes:g,cachePool:null,transitions:null}}function Cm(g,y,I){var B=y.pendingProps,V=xr.current,J=!1,fe=(y.flags&128)!==0,Ue;if((Ue=fe)||(Ue=g!==null&&g.memoizedState===null?!1:(V&2)!==0),Ue?(J=!0,y.flags&=-129):(g===null||g.memoizedState!==null)&&(V|=1),ki(xr,V&1),g===null)return Js(y),g=y.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?(y.mode&1?g.data==="$!"?y.lanes=8:y.lanes=1073741824:y.lanes=1,null):(fe=B.children,g=B.fallback,J?(B=y.mode,J=y.child,fe={mode:"hidden",children:fe},!(B&1)&&J!==null?(J.childLanes=0,J.pendingProps=fe):J=sf(fe,B,0,null),g=rf(g,B,I,null),J.return=y,g.return=y,J.sibling=g,y.child=J,y.child.memoizedState=Zl(I),y.memoizedState=mr,g):Qp(y,fe));if(V=g.memoizedState,V!==null&&(Ue=V.dehydrated,Ue!==null))return cd(g,y,fe,B,Ue,V,I);if(J){J=B.fallback,fe=y.mode,V=g.child,Ue=V.sibling;var Ze={mode:"hidden",children:B.children};return!(fe&1)&&y.child!==V?(B=y.child,B.childLanes=0,B.pendingProps=Ze,y.deletions=null):(B=Lh(V,Ze),B.subtreeFlags=V.subtreeFlags&14680064),Ue!==null?J=Lh(Ue,J):(J=rf(J,fe,I,null),J.flags|=2),J.return=y,B.return=y,B.sibling=J,y.child=B,B=J,J=y.child,fe=g.child.memoizedState,fe=fe===null?Zl(I):{baseLanes:fe.baseLanes|I,cachePool:null,transitions:fe.transitions},J.memoizedState=fe,J.childLanes=g.childLanes&~I,y.memoizedState=mr,B}return J=g.child,g=J.sibling,B=Lh(J,{mode:"visible",children:B.children}),!(y.mode&1)&&(B.lanes=I),B.return=y,B.sibling=null,g!==null&&(I=y.deletions,I===null?(y.deletions=[g],y.flags|=16):I.push(g)),y.child=B,y.memoizedState=null,B}function Qp(g,y){return y=sf({mode:"visible",children:y},g.mode,0,null),y.return=g,g.child=y}function Jn(g,y,I,B){return B!==null&&Cl(B),Ca(y,g.child,null,I),g=Qp(y,y.pendingProps.children),g.flags|=2,y.memoizedState=null,g}function cd(g,y,I,B,V,J,fe){if(I)return y.flags&256?(y.flags&=-257,B=G(Error(t(422))),Jn(g,y,fe,B)):y.memoizedState!==null?(y.child=g.child,y.flags|=128,null):(J=B.fallback,V=y.mode,B=sf({mode:"visible",children:B.children},V,0,null),J=rf(J,V,fe,null),J.flags|=2,B.return=y,J.return=y,B.sibling=J,y.child=B,y.mode&1&&Ca(y,g.child,null,fe),y.child.memoizedState=Zl(fe),y.memoizedState=mr,J);if(!(y.mode&1))return Jn(g,y,fe,null);if(V.data==="$!"){if(B=V.nextSibling&&V.nextSibling.dataset,B)var Ue=B.dgst;return B=Ue,J=Error(t(419)),B=G(J,B,void 0),Jn(g,y,fe,B)}if(Ue=(fe&g.childLanes)!==0,rn||Ue){if(B=Il,B!==null){switch(fe&-fe){case 4:V=2;break;case 16:V=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:V=32;break;case 536870912:V=268435456;break;default:V=0}V=V&(B.suspendedLanes|fe)?0:V,V!==0&&V!==J.retryLane&&(J.retryLane=V,Ya(g,V),Mo(B,g,V,-1))}return Nm(),B=G(Error(t(421))),Jn(g,y,fe,B)}return V.data==="$?"?(y.flags|=128,y.child=g.child,y=Pm.bind(null,g),V._reactRetry=y,null):(g=J.treeContext,$a=tc(V.nextSibling),cs=y,Gi=!0,xa=null,g!==null&&(Ps[Uo++]=sn,Ps[Uo++]=ja,Ps[Uo++]=pn,sn=g.id,ja=g.overflow,pn=y),y=Qp(y,B.children),y.flags|=4096,y)}function d0(g,y,I){g.lanes|=y;var B=g.alternate;B!==null&&(B.lanes|=y),Eo(g.return,y,I)}function Bu(g,y,I,B,V){var J=g.memoizedState;J===null?g.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:B,tail:I,tailMode:V}:(J.isBackwards=y,J.rendering=null,J.renderingStartTime=0,J.last=B,J.tail=I,J.tailMode=V)}function Ia(g,y,I){var B=y.pendingProps,V=B.revealOrder,J=B.tail;if(Tr(g,y,B.children,I),B=xr.current,(B&2)!==0)B=B&1|2,y.flags|=128;else{if(g!==null&&g.flags&128)e:for(g=y.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&d0(g,I,y);else if(g.tag===19)d0(g,I,y);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===y)break e;for(;g.sibling===null;){if(g.return===null||g.return===y)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}B&=1}if(ki(xr,B),(y.mode&1)===0)y.memoizedState=null;else switch(V){case"forwards":for(I=y.child,V=null;I!==null;)g=I.alternate,g!==null&&Ki(g)===null&&(V=I),I=I.sibling;I=V,I===null?(V=y.child,y.child=null):(V=I.sibling,I.sibling=null),Bu(y,!1,V,I,J);break;case"backwards":for(I=null,V=y.child,y.child=null;V!==null;){if(g=V.alternate,g!==null&&Ki(g)===null){y.child=V;break}g=V.sibling,V.sibling=I,I=V,V=g}Bu(y,!0,I,null,J);break;case"together":Bu(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function Hf(g,y){!(y.mode&1)&&g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2)}function hd(g,y,I){if(g!==null&&(y.dependencies=g.dependencies),Ep|=y.lanes,(I&y.childLanes)===0)return null;if(g!==null&&y.child!==g.child)throw Error(t(153));if(y.child!==null){for(g=y.child,I=Lh(g,g.pendingProps),y.child=I,I.return=y;g.sibling!==null;)g=g.sibling,I=I.sibling=Lh(g,g.pendingProps),I.return=y;I.sibling=null}return y.child}function eu(g,y,I){switch(y.tag){case 3:On(y),wa();break;case 5:Ih(y);break;case 1:So(y.type)&&Ea(y);break;case 4:ac(y,y.stateNode.containerInfo);break;case 10:var B=y.type._context,V=y.memoizedProps.value;ki(Cu,B._currentValue),B._currentValue=V;break;case 13:if(B=y.memoizedState,B!==null)return B.dehydrated!==null?(ki(xr,xr.current&1),y.flags|=128,null):I&y.child.childLanes?Cm(g,y,I):(ki(xr,xr.current&1),g=hd(g,y,I),g!==null?g.sibling:null);ki(xr,xr.current&1);break;case 19:if(B=(I&y.childLanes)!==0,(g.flags&128)!==0){if(B)return Ia(g,y,I);y.flags|=128}if(V=y.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),ki(xr,xr.current),B)break;return null;case 22:case 23:return y.lanes=0,Ke(g,y,I)}return hd(g,y,I)}var nn,c_,h_,Sg;nn=function(g,y){for(var I=y.child;I!==null;){if(I.tag===5||I.tag===6)g.appendChild(I.stateNode);else if(I.tag!==4&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===y)break;for(;I.sibling===null;){if(I.return===null||I.return===y)return;I=I.return}I.sibling.return=I.return,I=I.sibling}},c_=function(){},h_=function(g,y,I,B){var V=g.memoizedProps;if(V!==B){g=y.stateNode,xo(Zs.current);var J=null;switch(I){case"input":V=rt(g,V),B=rt(g,B),J=[];break;case"select":V=ne({},V,{value:void 0}),B=ne({},B,{value:void 0}),J=[];break;case"textarea":V=Te(g,V),B=Te(g,B),J=[];break;default:typeof V.onClick!="function"&&typeof B.onClick=="function"&&(g.onclick=$l)}Ft(I,B);var fe;I=null;for(Ct in V)if(!B.hasOwnProperty(Ct)&&V.hasOwnProperty(Ct)&&V[Ct]!=null)if(Ct==="style"){var Ue=V[Ct];for(fe in Ue)Ue.hasOwnProperty(fe)&&(I||(I={}),I[fe]="")}else Ct!=="dangerouslySetInnerHTML"&&Ct!=="children"&&Ct!=="suppressContentEditableWarning"&&Ct!=="suppressHydrationWarning"&&Ct!=="autoFocus"&&(s.hasOwnProperty(Ct)?J||(J=[]):(J=J||[]).push(Ct,null));for(Ct in B){var Ze=B[Ct];if(Ue=V!=null?V[Ct]:void 0,B.hasOwnProperty(Ct)&&Ze!==Ue&&(Ze!=null||Ue!=null))if(Ct==="style")if(Ue){for(fe in Ue)!Ue.hasOwnProperty(fe)||Ze&&Ze.hasOwnProperty(fe)||(I||(I={}),I[fe]="");for(fe in Ze)Ze.hasOwnProperty(fe)&&Ue[fe]!==Ze[fe]&&(I||(I={}),I[fe]=Ze[fe])}else I||(J||(J=[]),J.push(Ct,I)),I=Ze;else Ct==="dangerouslySetInnerHTML"?(Ze=Ze?Ze.__html:void 0,Ue=Ue?Ue.__html:void 0,Ze!=null&&Ue!==Ze&&(J=J||[]).push(Ct,Ze)):Ct==="children"?typeof Ze!="string"&&typeof Ze!="number"||(J=J||[]).push(Ct,""+Ze):Ct!=="suppressContentEditableWarning"&&Ct!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ct)?(Ze!=null&&Ct==="onScroll"&&si("scroll",g),J||Ue===Ze||(J=[])):(J=J||[]).push(Ct,Ze))}I&&(J=J||[]).push("style",I);var Ct=J;(y.updateQueue=Ct)&&(y.flags|=4)}},Sg=function(g,y,I,B){I!==B&&(y.flags|=4)};function Dc(g,y){if(!Gi)switch(g.tailMode){case"hidden":y=g.tail;for(var I=null;y!==null;)y.alternate!==null&&(I=y),y=y.sibling;I===null?g.tail=null:I.sibling=null;break;case"collapsed":I=g.tail;for(var B=null;I!==null;)I.alternate!==null&&(B=I),I=I.sibling;B===null?y||g.tail===null?g.tail=null:g.tail.sibling=null:B.sibling=null}}function xs(g){var y=g.alternate!==null&&g.alternate.child===g.child,I=0,B=0;if(y)for(var V=g.child;V!==null;)I|=V.lanes|V.childLanes,B|=V.subtreeFlags&14680064,B|=V.flags&14680064,V.return=g,V=V.sibling;else for(V=g.child;V!==null;)I|=V.lanes|V.childLanes,B|=V.subtreeFlags,B|=V.flags,V.return=g,V=V.sibling;return g.subtreeFlags|=B,g.childLanes=I,y}function qp(g,y,I){var B=y.pendingProps;switch(aa(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xs(y),null;case 1:return So(y.type)&&Pd(),xs(y),null;case 3:return B=y.stateNode,Ou(),Mi(Fo),Mi(Po),ua(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(g===null||g.child===null)&&(qc(y)?y.flags|=4:g===null||g.memoizedState.isDehydrated&&!(y.flags&256)||(y.flags|=1024,xa!==null&&(f_(xa),xa=null))),c_(g,y),xs(y),null;case 5:th(y);var V=xo(Ka.current);if(I=y.type,g!==null&&y.stateNode!=null)h_(g,y,I,B,V),g.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!B){if(y.stateNode===null)throw Error(t(166));return xs(y),null}if(g=xo(Zs.current),qc(y)){B=y.stateNode,I=y.type;var J=y.memoizedProps;switch(B[Cr]=y,B[Xl]=J,g=(y.mode&1)!==0,I){case"dialog":si("cancel",B),si("close",B);break;case"iframe":case"object":case"embed":si("load",B);break;case"video":case"audio":for(V=0;V<Ga.length;V++)si(Ga[V],B);break;case"source":si("error",B);break;case"img":case"image":case"link":si("error",B),si("load",B);break;case"details":si("toggle",B);break;case"input":nt(B,J),si("invalid",B);break;case"select":B._wrapperState={wasMultiple:!!J.multiple},si("invalid",B);break;case"textarea":te(B,J),si("invalid",B)}Ft(I,J),V=null;for(var fe in J)if(J.hasOwnProperty(fe)){var Ue=J[fe];fe==="children"?typeof Ue=="string"?B.textContent!==Ue&&(J.suppressHydrationWarning!==!0&&El(B.textContent,Ue,g),V=["children",Ue]):typeof Ue=="number"&&B.textContent!==""+Ue&&(J.suppressHydrationWarning!==!0&&El(B.textContent,Ue,g),V=["children",""+Ue]):s.hasOwnProperty(fe)&&Ue!=null&&fe==="onScroll"&&si("scroll",B)}switch(I){case"input":Oe(B),mt(B,J,!0);break;case"textarea":Oe(B),ot(B);break;case"select":case"option":break;default:typeof J.onClick=="function"&&(B.onclick=$l)}B=V,y.updateQueue=B,B!==null&&(y.flags|=4)}else{fe=V.nodeType===9?V:V.ownerDocument,g==="http://www.w3.org/1999/xhtml"&&(g=ft(I)),g==="http://www.w3.org/1999/xhtml"?I==="script"?(g=fe.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):typeof B.is=="string"?g=fe.createElement(I,{is:B.is}):(g=fe.createElement(I),I==="select"&&(fe=g,B.multiple?fe.multiple=!0:B.size&&(fe.size=B.size))):g=fe.createElementNS(g,I),g[Cr]=y,g[Xl]=B,nn(g,y,!1,!1),y.stateNode=g;e:{switch(fe=Be(I,B),I){case"dialog":si("cancel",g),si("close",g),V=B;break;case"iframe":case"object":case"embed":si("load",g),V=B;break;case"video":case"audio":for(V=0;V<Ga.length;V++)si(Ga[V],g);V=B;break;case"source":si("error",g),V=B;break;case"img":case"image":case"link":si("error",g),si("load",g),V=B;break;case"details":si("toggle",g),V=B;break;case"input":nt(g,B),V=rt(g,B),si("invalid",g);break;case"option":V=B;break;case"select":g._wrapperState={wasMultiple:!!B.multiple},V=ne({},B,{value:void 0}),si("invalid",g);break;case"textarea":te(g,B),V=Te(g,B),si("invalid",g);break;default:V=B}Ft(I,V),Ue=V;for(J in Ue)if(Ue.hasOwnProperty(J)){var Ze=Ue[J];J==="style"?$e(g,Ze):J==="dangerouslySetInnerHTML"?(Ze=Ze?Ze.__html:void 0,Ze!=null&&Ge(g,Ze)):J==="children"?typeof Ze=="string"?(I!=="textarea"||Ze!=="")&&Ce(g,Ze):typeof Ze=="number"&&Ce(g,""+Ze):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(s.hasOwnProperty(J)?Ze!=null&&J==="onScroll"&&si("scroll",g):Ze!=null&&D(g,J,Ze,fe))}switch(I){case"input":Oe(g),mt(g,B,!1);break;case"textarea":Oe(g),ot(g);break;case"option":B.value!=null&&g.setAttribute("value",""+Je(B.value));break;case"select":g.multiple=!!B.multiple,J=B.value,J!=null?pt(g,!!B.multiple,J,!1):B.defaultValue!=null&&pt(g,!!B.multiple,B.defaultValue,!0);break;default:typeof V.onClick=="function"&&(g.onclick=$l)}switch(I){case"button":case"input":case"select":case"textarea":B=!!B.autoFocus;break e;case"img":B=!0;break e;default:B=!1}}B&&(y.flags|=4)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return xs(y),null;case 6:if(g&&y.stateNode!=null)Sg(g,y,g.memoizedProps,B);else{if(typeof B!="string"&&y.stateNode===null)throw Error(t(166));if(I=xo(Ka.current),xo(Zs.current),qc(y)){if(B=y.stateNode,I=y.memoizedProps,B[Cr]=y,(J=B.nodeValue!==I)&&(g=cs,g!==null))switch(g.tag){case 3:El(B.nodeValue,I,(g.mode&1)!==0);break;case 5:g.memoizedProps.suppressHydrationWarning!==!0&&El(B.nodeValue,I,(g.mode&1)!==0)}J&&(y.flags|=4)}else B=(I.nodeType===9?I:I.ownerDocument).createTextNode(B),B[Cr]=y,y.stateNode=B}return xs(y),null;case 13:if(Mi(xr),B=y.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(Gi&&$a!==null&&y.mode&1&&!(y.flags&128))id(),wa(),y.flags|=98560,J=!1;else if(J=qc(y),B!==null&&B.dehydrated!==null){if(g===null){if(!J)throw Error(t(318));if(J=y.memoizedState,J=J!==null?J.dehydrated:null,!J)throw Error(t(317));J[Cr]=y}else wa(),!(y.flags&128)&&(y.memoizedState=null),y.flags|=4;xs(y),J=!1}else xa!==null&&(f_(xa),xa=null),J=!0;if(!J)return y.flags&65536?y:null}return y.flags&128?(y.lanes=I,y):(B=B!==null,B!==(g!==null&&g.memoizedState!==null)&&B&&(y.child.flags|=8192,y.mode&1&&(g===null||xr.current&1?el===0&&(el=3):Nm())),y.updateQueue!==null&&(y.flags|=4),xs(y),null);case 4:return Ou(),c_(g,y),g===null&&qu(y.stateNode.containerInfo),xs(y),null;case 10:return ic(y.type._context),xs(y),null;case 17:return So(y.type)&&Pd(),xs(y),null;case 19:if(Mi(xr),J=y.memoizedState,J===null)return xs(y),null;if(B=(y.flags&128)!==0,fe=J.rendering,fe===null)if(B)Dc(J,!1);else{if(el!==0||g!==null&&g.flags&128)for(g=y.child;g!==null;){if(fe=Ki(g),fe!==null){for(y.flags|=128,Dc(J,!1),B=fe.updateQueue,B!==null&&(y.updateQueue=B,y.flags|=4),y.subtreeFlags=0,B=I,I=y.child;I!==null;)J=I,g=B,J.flags&=14680066,fe=J.alternate,fe===null?(J.childLanes=0,J.lanes=g,J.child=null,J.subtreeFlags=0,J.memoizedProps=null,J.memoizedState=null,J.updateQueue=null,J.dependencies=null,J.stateNode=null):(J.childLanes=fe.childLanes,J.lanes=fe.lanes,J.child=fe.child,J.subtreeFlags=0,J.deletions=null,J.memoizedProps=fe.memoizedProps,J.memoizedState=fe.memoizedState,J.updateQueue=fe.updateQueue,J.type=fe.type,g=fe.dependencies,J.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),I=I.sibling;return ki(xr,xr.current&1|2),y.child}g=g.sibling}J.tail!==null&&Kt()>Bc&&(y.flags|=128,B=!0,Dc(J,!1),y.lanes=4194304)}else{if(!B)if(g=Ki(fe),g!==null){if(y.flags|=128,B=!0,I=g.updateQueue,I!==null&&(y.updateQueue=I,y.flags|=4),Dc(J,!0),J.tail===null&&J.tailMode==="hidden"&&!fe.alternate&&!Gi)return xs(y),null}else 2*Kt()-J.renderingStartTime>Bc&&I!==1073741824&&(y.flags|=128,B=!0,Dc(J,!1),y.lanes=4194304);J.isBackwards?(fe.sibling=y.child,y.child=fe):(I=J.last,I!==null?I.sibling=fe:y.child=fe,J.last=fe)}return J.tail!==null?(y=J.tail,J.rendering=y,J.tail=y.sibling,J.renderingStartTime=Kt(),y.sibling=null,I=xr.current,ki(xr,B?I&1|2:I&1),y):(xs(y),null);case 22:case 23:return g_(),B=y.memoizedState!==null,g!==null&&g.memoizedState!==null!==B&&(y.flags|=8192),B&&y.mode&1?Rl&1073741824&&(xs(y),y.subtreeFlags&6&&(y.flags|=8192)):xs(y),null;case 24:return null;case 25:return null}throw Error(t(156,y.tag))}function Hd(g,y){switch(aa(y),y.tag){case 1:return So(y.type)&&Pd(),g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 3:return Ou(),Mi(Fo),Mi(Po),ua(),g=y.flags,g&65536&&!(g&128)?(y.flags=g&-65537|128,y):null;case 5:return th(y),null;case 13:if(Mi(xr),g=y.memoizedState,g!==null&&g.dehydrated!==null){if(y.alternate===null)throw Error(t(340));wa()}return g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 19:return Mi(xr),null;case 4:return Ou(),null;case 10:return ic(y.type._context),null;case 22:case 23:return g_(),null;case 24:return null;default:return null}}var lh=!1,Li=!1,Ra=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function bi(g,y){var I=g.ref;if(I!==null)if(typeof I=="function")try{I(null)}catch(B){Ao(g,y,B)}else I.current=null}function ws(g,y,I){try{I()}catch(B){Ao(g,y,B)}}var Bv=!1;function dd(g,y){if(wc=Ds,g=In(),Rr(g)){if("selectionStart"in g)var I={start:g.selectionStart,end:g.selectionEnd};else e:{I=(I=g.ownerDocument)&&I.defaultView||window;var B=I.getSelection&&I.getSelection();if(B&&B.rangeCount!==0){I=B.anchorNode;var V=B.anchorOffset,J=B.focusNode;B=B.focusOffset;try{I.nodeType,J.nodeType}catch{I=null;break e}var fe=0,Ue=-1,Ze=-1,Ct=0,Xt=0,tn=g,Qt=null;t:for(;;){for(var bn;tn!==I||V!==0&&tn.nodeType!==3||(Ue=fe+V),tn!==J||B!==0&&tn.nodeType!==3||(Ze=fe+B),tn.nodeType===3&&(fe+=tn.nodeValue.length),(bn=tn.firstChild)!==null;)Qt=tn,tn=bn;for(;;){if(tn===g)break t;if(Qt===I&&++Ct===V&&(Ue=fe),Qt===J&&++Xt===B&&(Ze=fe),(bn=tn.nextSibling)!==null)break;tn=Qt,Qt=tn.parentNode}tn=bn}I=Ue===-1||Ze===-1?null:{start:Ue,end:Ze}}else I=null}I=I||{start:0,end:0}}else I=null;for(Mh={focusedElem:g,selectionRange:I},Ds=!1,Pe=y;Pe!==null;)if(y=Pe,g=y.child,(y.subtreeFlags&1028)!==0&&g!==null)g.return=y,Pe=g;else for(;Pe!==null;){y=Pe;try{var Rn=y.alternate;if(y.flags&1024)switch(y.tag){case 0:case 11:case 15:break;case 1:if(Rn!==null){var Dn=Rn.memoizedProps,ro=Rn.memoizedState,yt=y.stateNode,st=yt.getSnapshotBeforeUpdate(y.elementType===y.type?Dn:Yl(y.type,Dn),ro);yt.__reactInternalSnapshotBeforeUpdate=st}break;case 3:var bt=y.stateNode.containerInfo;bt.nodeType===1?bt.textContent="":bt.nodeType===9&&bt.documentElement&&bt.removeChild(bt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(on){Ao(y,y.return,on)}if(g=y.sibling,g!==null){g.return=y.return,Pe=g;break}Pe=y.return}return Rn=Bv,Bv=!1,Rn}function Mm(g,y,I){var B=y.updateQueue;if(B=B!==null?B.lastEffect:null,B!==null){var V=B=B.next;do{if((V.tag&g)===g){var J=V.destroy;V.destroy=void 0,J!==void 0&&ws(y,I,J)}V=V.next}while(V!==B)}}function Eg(g,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var I=y=y.next;do{if((I.tag&g)===g){var B=I.create;I.destroy=B()}I=I.next}while(I!==y)}}function Pv(g){var y=g.ref;if(y!==null){var I=g.stateNode;switch(g.tag){case 5:g=I;break;default:g=I}typeof y=="function"?y(g):y.current=g}}function Gf(g){var y=g.alternate;y!==null&&(g.alternate=null,Gf(y)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(y=g.stateNode,y!==null&&(delete y[Cr],delete y[Xl],delete y[oa],delete y[ve],delete y[Ks])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function zo(g){return g.tag===5||g.tag===3||g.tag===4}function p0(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||zo(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function $g(g,y,I){var B=g.tag;if(B===5||B===6)g=g.stateNode,y?I.nodeType===8?I.parentNode.insertBefore(g,y):I.insertBefore(g,y):(I.nodeType===8?(y=I.parentNode,y.insertBefore(g,I)):(y=I,y.appendChild(g)),I=I._reactRootContainer,I!=null||y.onclick!==null||(y.onclick=$l));else if(B!==4&&(g=g.child,g!==null))for($g(g,y,I),g=g.sibling;g!==null;)$g(g,y,I),g=g.sibling}function Am(g,y,I){var B=g.tag;if(B===5||B===6)g=g.stateNode,y?I.insertBefore(g,y):I.appendChild(g);else if(B!==4&&(g=g.child,g!==null))for(Am(g,y,I),g=g.sibling;g!==null;)Am(g,y,I),g=g.sibling}var ka=null,Pu=!1;function bp(g,y,I){for(I=I.child;I!==null;)xg(g,y,I),I=I.sibling}function xg(g,y,I){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(pr,I)}catch{}switch(I.tag){case 5:Li||bi(I,y);case 6:var B=ka,V=Pu;ka=null,bp(g,y,I),ka=B,Pu=V,ka!==null&&(Pu?(g=ka,I=I.stateNode,g.nodeType===8?g.parentNode.removeChild(I):g.removeChild(I)):ka.removeChild(I.stateNode));break;case 18:ka!==null&&(Pu?(g=ka,I=I.stateNode,g.nodeType===8?Mc(g.parentNode,I):g.nodeType===1&&Mc(g,I),fr(g)):Mc(ka,I.stateNode));break;case 4:B=ka,V=Pu,ka=I.stateNode.containerInfo,Pu=!0,bp(g,y,I),ka=B,Pu=V;break;case 0:case 11:case 14:case 15:if(!Li&&(B=I.updateQueue,B!==null&&(B=B.lastEffect,B!==null))){V=B=B.next;do{var J=V,fe=J.destroy;J=J.tag,fe!==void 0&&(J&2||J&4)&&ws(I,y,fe),V=V.next}while(V!==B)}bp(g,y,I);break;case 1:if(!Li&&(bi(I,y),B=I.stateNode,typeof B.componentWillUnmount=="function"))try{B.props=I.memoizedProps,B.state=I.memoizedState,B.componentWillUnmount()}catch(Ue){Ao(I,y,Ue)}bp(g,y,I);break;case 21:bp(g,y,I);break;case 22:I.mode&1?(Li=(B=Li)||I.memoizedState!==null,bp(g,y,I),Li=B):bp(g,y,I);break;default:bp(g,y,I)}}function Zp(g){var y=g.updateQueue;if(y!==null){g.updateQueue=null;var I=g.stateNode;I===null&&(I=g.stateNode=new Ra),y.forEach(function(B){var V=CS.bind(null,g,B);I.has(B)||(I.add(B),B.then(V,V))})}}function uh(g,y){var I=y.deletions;if(I!==null)for(var B=0;B<I.length;B++){var V=I[B];try{var J=g,fe=y,Ue=fe;e:for(;Ue!==null;){switch(Ue.tag){case 5:ka=Ue.stateNode,Pu=!1;break e;case 3:ka=Ue.stateNode.containerInfo,Pu=!0;break e;case 4:ka=Ue.stateNode.containerInfo,Pu=!0;break e}Ue=Ue.return}if(ka===null)throw Error(t(160));xg(J,fe,V),ka=null,Pu=!1;var Ze=V.alternate;Ze!==null&&(Ze.return=null),V.return=null}catch(Ct){Ao(V,y,Ct)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)d_(y,g),y=y.sibling}function d_(g,y){var I=g.alternate,B=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(uh(y,g),Qn(g),B&4){try{Mm(3,g,g.return),Eg(3,g)}catch(Dn){Ao(g,g.return,Dn)}try{Mm(5,g,g.return)}catch(Dn){Ao(g,g.return,Dn)}}break;case 1:uh(y,g),Qn(g),B&512&&I!==null&&bi(I,I.return);break;case 5:if(uh(y,g),Qn(g),B&512&&I!==null&&bi(I,I.return),g.flags&32){var V=g.stateNode;try{Ce(V,"")}catch(Dn){Ao(g,g.return,Dn)}}if(B&4&&(V=g.stateNode,V!=null)){var J=g.memoizedProps,fe=I!==null?I.memoizedProps:J,Ue=g.type,Ze=g.updateQueue;if(g.updateQueue=null,Ze!==null)try{Ue==="input"&&J.type==="radio"&&J.name!=null&&dt(V,J),Be(Ue,fe);var Ct=Be(Ue,J);for(fe=0;fe<Ze.length;fe+=2){var Xt=Ze[fe],tn=Ze[fe+1];Xt==="style"?$e(V,tn):Xt==="dangerouslySetInnerHTML"?Ge(V,tn):Xt==="children"?Ce(V,tn):D(V,Xt,tn,Ct)}switch(Ue){case"input":It(V,J);break;case"textarea":ke(V,J);break;case"select":var Qt=V._wrapperState.wasMultiple;V._wrapperState.wasMultiple=!!J.multiple;var bn=J.value;bn!=null?pt(V,!!J.multiple,bn,!1):Qt!==!!J.multiple&&(J.defaultValue!=null?pt(V,!!J.multiple,J.defaultValue,!0):pt(V,!!J.multiple,J.multiple?[]:"",!1))}V[Xl]=J}catch(Dn){Ao(g,g.return,Dn)}}break;case 6:if(uh(y,g),Qn(g),B&4){if(g.stateNode===null)throw Error(t(162));V=g.stateNode,J=g.memoizedProps;try{V.nodeValue=J}catch(Dn){Ao(g,g.return,Dn)}}break;case 3:if(uh(y,g),Qn(g),B&4&&I!==null&&I.memoizedState.isDehydrated)try{fr(y.containerInfo)}catch(Dn){Ao(g,g.return,Dn)}break;case 4:uh(y,g),Qn(g);break;case 13:uh(y,g),Qn(g),V=g.child,V.flags&8192&&(J=V.memoizedState!==null,V.stateNode.isHidden=J,!J||V.alternate!==null&&V.alternate.memoizedState!==null||(tl=Kt())),B&4&&Zp(g);break;case 22:if(Xt=I!==null&&I.memoizedState!==null,g.mode&1?(Li=(Ct=Li)||Xt,uh(y,g),Li=Ct):uh(y,g),Qn(g),B&8192){if(Ct=g.memoizedState!==null,(g.stateNode.isHidden=Ct)&&!Xt&&(g.mode&1)!==0)for(Pe=g,Xt=g.child;Xt!==null;){for(tn=Pe=Xt;Pe!==null;){switch(Qt=Pe,bn=Qt.child,Qt.tag){case 0:case 11:case 14:case 15:Mm(4,Qt,Qt.return);break;case 1:bi(Qt,Qt.return);var Rn=Qt.stateNode;if(typeof Rn.componentWillUnmount=="function"){B=Qt,I=Qt.return;try{y=B,Rn.props=y.memoizedProps,Rn.state=y.memoizedState,Rn.componentWillUnmount()}catch(Dn){Ao(B,I,Dn)}}break;case 5:bi(Qt,Qt.return);break;case 22:if(Qt.memoizedState!==null){Im(tn);continue}}bn!==null?(bn.return=Qt,Pe=bn):Im(tn)}Xt=Xt.sibling}e:for(Xt=null,tn=g;;){if(tn.tag===5){if(Xt===null){Xt=tn;try{V=tn.stateNode,Ct?(J=V.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none"):(Ue=tn.stateNode,Ze=tn.memoizedProps.style,fe=Ze!=null&&Ze.hasOwnProperty("display")?Ze.display:null,Ue.style.display=le("display",fe))}catch(Dn){Ao(g,g.return,Dn)}}}else if(tn.tag===6){if(Xt===null)try{tn.stateNode.nodeValue=Ct?"":tn.memoizedProps}catch(Dn){Ao(g,g.return,Dn)}}else if((tn.tag!==22&&tn.tag!==23||tn.memoizedState===null||tn===g)&&tn.child!==null){tn.child.return=tn,tn=tn.child;continue}if(tn===g)break e;for(;tn.sibling===null;){if(tn.return===null||tn.return===g)break e;Xt===tn&&(Xt=null),tn=tn.return}Xt===tn&&(Xt=null),tn.sibling.return=tn.return,tn=tn.sibling}}break;case 19:uh(y,g),Qn(g),B&4&&Zp(g);break;case 21:break;default:uh(y,g),Qn(g)}}function Qn(g){var y=g.flags;if(y&2){try{e:{for(var I=g.return;I!==null;){if(zo(I)){var B=I;break e}I=I.return}throw Error(t(160))}switch(B.tag){case 5:var V=B.stateNode;B.flags&32&&(Ce(V,""),B.flags&=-33);var J=p0(g);Am(g,J,V);break;case 3:case 4:var fe=B.stateNode.containerInfo,Ue=p0(g);$g(g,Ue,fe);break;default:throw Error(t(161))}}catch(Ze){Ao(g,g.return,Ze)}g.flags&=-3}y&4096&&(g.flags&=-4097)}function Fv(g,y,I){Pe=g,tu(g)}function tu(g,y,I){for(var B=(g.mode&1)!==0;Pe!==null;){var V=Pe,J=V.child;if(V.tag===22&&B){var fe=V.memoizedState!==null||lh;if(!fe){var Ue=V.alternate,Ze=Ue!==null&&Ue.memoizedState!==null||Li;Ue=lh;var Ct=Li;if(lh=fe,(Li=Ze)&&!Ct)for(Pe=V;Pe!==null;)fe=Pe,Ze=fe.child,fe.tag===22&&fe.memoizedState!==null?Tp(V):Ze!==null?(Ze.return=fe,Pe=Ze):Tp(V);for(;J!==null;)Pe=J,tu(J),J=J.sibling;Pe=V,lh=Ue,Li=Ct}uc(g)}else V.subtreeFlags&8772&&J!==null?(J.return=V,Pe=J):uc(g)}}function uc(g){for(;Pe!==null;){var y=Pe;if(y.flags&8772){var I=y.alternate;try{if(y.flags&8772)switch(y.tag){case 0:case 11:case 15:Li||Eg(5,y);break;case 1:var B=y.stateNode;if(y.flags&4&&!Li)if(I===null)B.componentDidMount();else{var V=y.elementType===y.type?I.memoizedProps:Yl(y.type,I.memoizedProps);B.componentDidUpdate(V,I.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var J=y.updateQueue;J!==null&&Lr(y,J,B);break;case 3:var fe=y.updateQueue;if(fe!==null){if(I=null,y.child!==null)switch(y.child.tag){case 5:I=y.child.stateNode;break;case 1:I=y.child.stateNode}Lr(y,fe,I)}break;case 5:var Ue=y.stateNode;if(I===null&&y.flags&4){I=Ue;var Ze=y.memoizedProps;switch(y.type){case"button":case"input":case"select":case"textarea":Ze.autoFocus&&I.focus();break;case"img":Ze.src&&(I.src=Ze.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(y.memoizedState===null){var Ct=y.alternate;if(Ct!==null){var Xt=Ct.memoizedState;if(Xt!==null){var tn=Xt.dehydrated;tn!==null&&fr(tn)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Li||y.flags&512&&Pv(y)}catch(Qt){Ao(y,y.return,Qt)}}if(y===g){Pe=null;break}if(I=y.sibling,I!==null){I.return=y.return,Pe=I;break}Pe=y.return}}function Im(g){for(;Pe!==null;){var y=Pe;if(y===g){Pe=null;break}var I=y.sibling;if(I!==null){I.return=y.return,Pe=I;break}Pe=y.return}}function Tp(g){for(;Pe!==null;){var y=Pe;try{switch(y.tag){case 0:case 11:case 15:var I=y.return;try{Eg(4,y)}catch(Ze){Ao(y,I,Ze)}break;case 1:var B=y.stateNode;if(typeof B.componentDidMount=="function"){var V=y.return;try{B.componentDidMount()}catch(Ze){Ao(y,V,Ze)}}var J=y.return;try{Pv(y)}catch(Ze){Ao(y,J,Ze)}break;case 5:var fe=y.return;try{Pv(y)}catch(Ze){Ao(y,fe,Ze)}}}catch(Ze){Ao(y,y.return,Ze)}if(y===g){Pe=null;break}var Ue=y.sibling;if(Ue!==null){Ue.return=y.return,Pe=Ue;break}Pe=y.return}}var Rm=Math.ceil,nu=L.ReactCurrentDispatcher,p_=L.ReactCurrentOwner,fo=L.ReactCurrentBatchConfig,Ai=0,Il=null,Oa=null,ru=0,Rl=0,Wf=vi(0),el=0,Sp=null,Ep=0,ef=0,f0=0,km=null,Nc=null,tl=0,Bc=1/0,Gd=null,wg=!1,Cg=null,Hs=null,Om=!1,kl=null,nl=0,Vf=0,m0=null,$p=-1,Mg=0;function cc(){return Ai&6?Kt():$p!==-1?$p:$p=Kt()}function Wd(g){return g.mode&1?Ai&2&&ru!==0?ru&-ru:Kp.transition!==null?(Mg===0&&(Mg=Lo()),Mg):(g=rr,g!==0||(g=window.event,g=g===void 0?16:mu(g.type)),g):1}function Mo(g,y,I,B){if(50<Vf)throw Vf=0,m0=null,Error(t(185));Ul(g,I,B),(!(Ai&2)||g!==Il)&&(g===Il&&(!(Ai&2)&&(ef|=I),el===4&&tf(g,ru)),La(g,B),I===1&&Ai===0&&!(y.mode&1)&&(Bc=Kt()+500,Ts&&hn()))}function La(g,y){var I=g.callbackNode;Yu(g,y);var B=hl(g,g===Il?ru:0);if(B===0)I!==null&&Yo(I),g.callbackNode=null,g.callbackPriority=0;else if(y=B&-B,g.callbackPriority!==y){if(I!=null&&Yo(I),y===1)g.tag===0?wl(jf.bind(null,g)):xl(jf.bind(null,g)),rd(function(){!(Ai&6)&&hn()}),I=null;else{switch(Ui(B)){case 1:I=ga;break;case 4:I=Ko;break;case 16:I=ms;break;case 536870912:I=di;break;default:I=ms}I=Pc(I,Uv.bind(null,g))}g.callbackPriority=y,g.callbackNode=I}}function Uv(g,y){if($p=-1,Mg=0,(Ai&6)!==0)throw Error(t(327));var I=g.callbackNode;if(Oh()&&g.callbackNode!==I)return null;var B=hl(g,g===Il?ru:0);if(B===0)return null;if(B&30||B&g.expiredLanes||y)y=xp(g,B);else{y=B;var V=Ai;Ai|=2;var J=zv();(Il!==g||ru!==y)&&(Gd=null,Bc=Kt()+500,Dm(g,y));do try{wS();break}catch(Ue){__(g,Ue)}while(!0);Mu(),nu.current=J,Ai=V,Oa!==null?y=0:(Il=null,ru=0,y=el)}if(y!==0){if(y===2&&(V=Os(g),V!==0&&(B=V,y=Lm(g,V))),y===1)throw I=Sp,Dm(g,0),tf(g,B),La(g,Kt()),I;if(y===6)tf(g,B);else{if(V=g.current.alternate,(B&30)===0&&!Rb(V)&&(y=xp(g,B),y===2&&(J=Os(g),J!==0&&(B=J,y=Lm(g,J))),y===1))throw I=Sp,Dm(g,0),tf(g,B),La(g,Kt()),I;switch(g.finishedWork=V,g.finishedLanes=B,y){case 0:case 1:throw Error(t(345));case 2:nf(g,Nc,Gd);break;case 3:if(tf(g,B),(B&130023424)===B&&(y=tl+500-Kt(),10<y)){if(hl(g,0)!==0)break;if(V=g.suspendedLanes,(V&B)!==B){cc(),g.pingedLanes|=g.suspendedLanes&V;break}g.timeoutHandle=Zu(nf.bind(null,g,Nc,Gd),y);break}nf(g,Nc,Gd);break;case 4:if(tf(g,B),(B&4194240)===B)break;for(y=g.eventTimes,V=-1;0<B;){var fe=31-wr(B);J=1<<fe,fe=y[fe],fe>V&&(V=fe),B&=~J}if(B=V,B=Kt()-B,B=(120>B?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*Rm(B/1960))-B,10<B){g.timeoutHandle=Zu(nf.bind(null,g,Nc,Gd),B);break}nf(g,Nc,Gd);break;case 5:nf(g,Nc,Gd);break;default:throw Error(t(329))}}}return La(g,Kt()),g.callbackNode===I?Uv.bind(null,g):null}function Lm(g,y){var I=km;return g.current.memoizedState.isDehydrated&&(Dm(g,y).flags|=256),g=xp(g,y),g!==2&&(y=Nc,Nc=I,y!==null&&f_(y)),g}function f_(g){Nc===null?Nc=g:Nc.push.apply(Nc,g)}function Rb(g){for(var y=g;;){if(y.flags&16384){var I=y.updateQueue;if(I!==null&&(I=I.stores,I!==null))for(var B=0;B<I.length;B++){var V=I[B],J=V.getSnapshot;V=V.value;try{if(!Tt(J(),V))return!1}catch{return!1}}}if(I=y.child,y.subtreeFlags&16384&&I!==null)I.return=y,y=I;else{if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function tf(g,y){for(y&=~f0,y&=~ef,g.suspendedLanes|=y,g.pingedLanes&=~y,g=g.expirationTimes;0<y;){var I=31-wr(y),B=1<<I;g[I]=-1,y&=~B}}function jf(g){if(Ai&6)throw Error(t(327));Oh();var y=hl(g,0);if(!(y&1))return La(g,Kt()),null;var I=xp(g,y);if(g.tag!==0&&I===2){var B=Os(g);B!==0&&(y=B,I=Lm(g,B))}if(I===1)throw I=Sp,Dm(g,0),tf(g,y),La(g,Kt()),I;if(I===6)throw Error(t(345));return g.finishedWork=g.current.alternate,g.finishedLanes=y,nf(g,Nc,Gd),La(g,Kt()),null}function m_(g,y){var I=Ai;Ai|=1;try{return g(y)}finally{Ai=I,Ai===0&&(Bc=Kt()+500,Ts&&hn())}}function Xf(g){kl!==null&&kl.tag===0&&!(Ai&6)&&Oh();var y=Ai;Ai|=1;var I=fo.transition,B=rr;try{if(fo.transition=null,rr=1,g)return g()}finally{rr=B,fo.transition=I,Ai=y,!(Ai&6)&&hn()}}function g_(){Rl=Wf.current,Mi(Wf)}function Dm(g,y){g.finishedWork=null,g.finishedLanes=0;var I=g.timeoutHandle;if(I!==-1&&(g.timeoutHandle=-1,Wa(I)),Oa!==null)for(I=Oa.return;I!==null;){var B=I;switch(aa(B),B.tag){case 1:B=B.type.childContextTypes,B!=null&&Pd();break;case 3:Ou(),Mi(Fo),Mi(Po),ua();break;case 5:th(B);break;case 4:Ou();break;case 13:Mi(xr);break;case 19:Mi(xr);break;case 10:ic(B.type._context);break;case 22:case 23:g_()}I=I.return}if(Il=g,Oa=g=Lh(g.current,null),ru=Rl=y,el=0,Sp=null,f0=ef=Ep=0,Nc=km=null,co!==null){for(y=0;y<co.length;y++)if(I=co[y],B=I.interleaved,B!==null){I.interleaved=null;var V=B.next,J=I.pending;if(J!==null){var fe=J.next;J.next=V,B.next=fe}I.pending=B}co=null}return g}function __(g,y){do{var I=Oa;try{if(Mu(),Us.current=c,Ml){for(var B=an.memoizedState;B!==null;){var V=B.queue;V!==null&&(V.pending=null),B=B.next}Ml=!1}if(kc=0,ns=ai=an=null,Ja=!1,Bt=0,p_.current=null,I===null||I.return===null){el=1,Sp=y,Oa=null;break}e:{var J=g,fe=I.return,Ue=I,Ze=y;if(y=ru,Ue.flags|=32768,Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var Ct=Ze,Xt=Ue,tn=Xt.tag;if(!(Xt.mode&1)&&(tn===0||tn===11||tn===15)){var Qt=Xt.alternate;Qt?(Xt.updateQueue=Qt.updateQueue,Xt.memoizedState=Qt.memoizedState,Xt.lanes=Qt.lanes):(Xt.updateQueue=null,Xt.memoizedState=null)}var bn=en(fe);if(bn!==null){bn.flags&=-257,dn(bn,fe,Ue,J,y),bn.mode&1&&Gt(J,Ct,y),y=bn,Ze=Ct;var Rn=y.updateQueue;if(Rn===null){var Dn=new Set;Dn.add(Ze),y.updateQueue=Dn}else Rn.add(Ze);break e}else{if(!(y&1)){Gt(J,Ct,y),Nm();break e}Ze=Error(t(426))}}else if(Gi&&Ue.mode&1){var ro=en(fe);if(ro!==null){!(ro.flags&65536)&&(ro.flags|=256),dn(ro,fe,Ue,J,y),Cl(N(Ze,Ue));break e}}J=Ze=N(Ze,Ue),el!==4&&(el=2),km===null?km=[J]:km.push(J),J=fe;do{switch(J.tag){case 3:J.flags|=65536,y&=-y,J.lanes|=y;var yt=je(J,Ze,y);Ln(J,yt);break e;case 1:Ue=Ze;var st=J.type,bt=J.stateNode;if(!(J.flags&128)&&(typeof st.getDerivedStateFromError=="function"||bt!==null&&typeof bt.componentDidCatch=="function"&&(Hs===null||!Hs.has(bt)))){J.flags|=65536,y&=-y,J.lanes|=y;var on=vt(J,Ue,y);Ln(J,on);break e}}J=J.return}while(J!==null)}y_(I)}catch(Gn){y=Gn,Oa===I&&I!==null&&(Oa=I=I.return);continue}break}while(!0)}function zv(){var g=nu.current;return nu.current=c,g===null?c:g}function Nm(){(el===0||el===3||el===2)&&(el=4),Il===null||!(Ep&268435455)&&!(ef&268435455)||tf(Il,ru)}function xp(g,y){var I=Ai;Ai|=2;var B=zv();(Il!==g||ru!==y)&&(Gd=null,Dm(g,y));do try{Hv();break}catch(V){__(g,V)}while(!0);if(Mu(),Ai=I,nu.current=B,Oa!==null)throw Error(t(261));return Il=null,ru=0,el}function Hv(){for(;Oa!==null;)v_(Oa)}function wS(){for(;Oa!==null&&!Oo();)v_(Oa)}function v_(g){var y=kb(g.alternate,g,Rl);g.memoizedProps=g.pendingProps,y===null?y_(g):Oa=y,p_.current=null}function y_(g){var y=g;do{var I=y.alternate;if(g=y.return,(y.flags&32768)===0){if(I=qp(I,y,Rl),I!==null){Oa=I;return}}else{if(I=Hd(I,y),I!==null){I.flags&=32767,Oa=I;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{el=6,Oa=null;return}}if(y=y.sibling,y!==null){Oa=y;return}Oa=y=g}while(y!==null);el===0&&(el=5)}function nf(g,y,I){var B=rr,V=fo.transition;try{fo.transition=null,rr=1,$n(g,y,I,B)}finally{fo.transition=V,rr=B}return null}function $n(g,y,I,B){do Oh();while(kl!==null);if(Ai&6)throw Error(t(327));I=g.finishedWork;var V=g.finishedLanes;if(I===null)return null;if(g.finishedWork=null,g.finishedLanes=0,I===g.current)throw Error(t(177));g.callbackNode=null,g.callbackPriority=0;var J=I.lanes|I.childLanes;if(_h(g,J),g===Il&&(Oa=Il=null,ru=0),!(I.subtreeFlags&2064)&&!(I.flags&2064)||Om||(Om=!0,Pc(ms,function(){return Oh(),null})),J=(I.flags&15990)!==0,(I.subtreeFlags&15990)!==0||J){J=fo.transition,fo.transition=null;var fe=rr;rr=1;var Ue=Ai;Ai|=4,p_.current=null,dd(g,I),d_(I,g),Ns(Mh),Ds=!!wc,Mh=wc=null,g.current=I,Fv(I),cl(),Ai=Ue,rr=fe,fo.transition=J}else g.current=I;if(Om&&(Om=!1,kl=g,nl=V),J=g.pendingLanes,J===0&&(Hs=null),ur(I.stateNode),La(g,Kt()),y!==null)for(B=g.onRecoverableError,I=0;I<y.length;I++)V=y[I],B(V.value,{componentStack:V.stack,digest:V.digest});if(wg)throw wg=!1,g=Cg,Cg=null,g;return nl&1&&g.tag!==0&&Oh(),J=g.pendingLanes,J&1?g===m0?Vf++:(Vf=0,m0=g):Vf=0,hn(),null}function Oh(){if(kl!==null){var g=Ui(nl),y=fo.transition,I=rr;try{if(fo.transition=null,rr=16>g?16:g,kl===null)var B=!1;else{if(g=kl,kl=null,nl=0,(Ai&6)!==0)throw Error(t(331));var V=Ai;for(Ai|=4,Pe=g.current;Pe!==null;){var J=Pe,fe=J.child;if(Pe.flags&16){var Ue=J.deletions;if(Ue!==null){for(var Ze=0;Ze<Ue.length;Ze++){var Ct=Ue[Ze];for(Pe=Ct;Pe!==null;){var Xt=Pe;switch(Xt.tag){case 0:case 11:case 15:Mm(8,Xt,J)}var tn=Xt.child;if(tn!==null)tn.return=Xt,Pe=tn;else for(;Pe!==null;){Xt=Pe;var Qt=Xt.sibling,bn=Xt.return;if(Gf(Xt),Xt===Ct){Pe=null;break}if(Qt!==null){Qt.return=bn,Pe=Qt;break}Pe=bn}}}var Rn=J.alternate;if(Rn!==null){var Dn=Rn.child;if(Dn!==null){Rn.child=null;do{var ro=Dn.sibling;Dn.sibling=null,Dn=ro}while(Dn!==null)}}Pe=J}}if(J.subtreeFlags&2064&&fe!==null)fe.return=J,Pe=fe;else e:for(;Pe!==null;){if(J=Pe,(J.flags&2048)!==0)switch(J.tag){case 0:case 11:case 15:Mm(9,J,J.return)}var yt=J.sibling;if(yt!==null){yt.return=J.return,Pe=yt;break e}Pe=J.return}}var st=g.current;for(Pe=st;Pe!==null;){fe=Pe;var bt=fe.child;if(fe.subtreeFlags&2064&&bt!==null)bt.return=fe,Pe=bt;else e:for(fe=st;Pe!==null;){if(Ue=Pe,(Ue.flags&2048)!==0)try{switch(Ue.tag){case 0:case 11:case 15:Eg(9,Ue)}}catch(Gn){Ao(Ue,Ue.return,Gn)}if(Ue===fe){Pe=null;break e}var on=Ue.sibling;if(on!==null){on.return=Ue.return,Pe=on;break e}Pe=Ue.return}}if(Ai=V,hn(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(pr,g)}catch{}B=!0}return B}finally{rr=I,fo.transition=y}}return!1}function Bm(g,y,I){y=N(I,y),y=je(g,y,1),g=yi(g,y,1),y=cc(),g!==null&&(Ul(g,1,y),La(g,y))}function Ao(g,y,I){if(g.tag===3)Bm(g,g,I);else for(;y!==null;){if(y.tag===3){Bm(y,g,I);break}else if(y.tag===1){var B=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(Hs===null||!Hs.has(B))){g=N(I,g),g=vt(y,g,1),y=yi(y,g,1),g=cc(),y!==null&&(Ul(y,1,g),La(y,g));break}}y=y.return}}function Gv(g,y,I){var B=g.pingCache;B!==null&&B.delete(y),y=cc(),g.pingedLanes|=g.suspendedLanes&I,Il===g&&(ru&I)===I&&(el===4||el===3&&(ru&130023424)===ru&&500>Kt()-tl?Dm(g,0):f0|=I),La(g,y)}function b_(g,y){y===0&&(g.mode&1?(y=Fi,Fi<<=1,!(Fi&130023424)&&(Fi=4194304)):y=1);var I=cc();g=Ya(g,y),g!==null&&(Ul(g,y,I),La(g,I))}function Pm(g){var y=g.memoizedState,I=0;y!==null&&(I=y.retryLane),b_(g,I)}function CS(g,y){var I=0;switch(g.tag){case 13:var B=g.stateNode,V=g.memoizedState;V!==null&&(I=V.retryLane);break;case 19:B=g.stateNode;break;default:throw Error(t(314))}B!==null&&B.delete(y),b_(g,I)}var kb;kb=function(g,y,I){if(g!==null)if(g.memoizedProps!==y.pendingProps||Fo.current)rn=!0;else{if(!(g.lanes&I)&&!(y.flags&128))return rn=!1,eu(g,y,I);rn=(g.flags&131072)!==0}else rn=!1,Gi&&y.flags&1048576&&zf(y,Qc,y.index);switch(y.lanes=0,y.tag){case 2:var B=y.type;Hf(g,y),g=y.pendingProps;var V=Ic(y,Po.current);Xa(y,I),V=ad(null,y,B,g,V,I);var J=nh();return y.flags|=1,typeof V=="object"&&V!==null&&typeof V.render=="function"&&V.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,So(B)?(J=!0,Ea(y)):J=!1,y.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,yp(y),V.updater=Oi,y.stateNode=V,V._reactInternals=y,oc(y,B,g,I),y=mn(null,y,B,!0,J,I)):(y.tag=0,Gi&&J&&xu(y),Tr(null,y,V,I),y=y.child),y;case 16:B=y.elementType;e:{switch(Hf(g,y),g=y.pendingProps,V=B._init,B=V(B._payload),y.type=B,V=y.tag=Ag(B),g=Yl(B,g),V){case 0:y=Jt(null,y,B,g,I);break e;case 1:y=un(null,y,B,g,I);break e;case 11:y=_t(null,y,B,g,I);break e;case 14:y=Se(null,y,B,Yl(B.type,g),I);break e}throw Error(t(306,B,""))}return y;case 0:return B=y.type,V=y.pendingProps,V=y.elementType===B?V:Yl(B,V),Jt(g,y,B,V,I);case 1:return B=y.type,V=y.pendingProps,V=y.elementType===B?V:Yl(B,V),un(g,y,B,V,I);case 3:e:{if(On(y),g===null)throw Error(t(387));B=y.pendingProps,J=y.memoizedState,V=J.element,eh(g,y),br(y,B,null,I);var fe=y.memoizedState;if(B=fe.element,J.isDehydrated)if(J={element:B,isDehydrated:!1,cache:fe.cache,pendingSuspenseBoundaries:fe.pendingSuspenseBoundaries,transitions:fe.transitions},y.updateQueue.baseState=J,y.memoizedState=J,y.flags&256){V=N(Error(t(423)),y),y=Xn(g,y,B,I,V);break e}else if(B!==V){V=N(Error(t(424)),y),y=Xn(g,y,B,I,V);break e}else for($a=tc(y.stateNode.containerInfo.firstChild),cs=y,Gi=!0,xa=null,I=Ru(y,null,B,I),y.child=I;I;)I.flags=I.flags&-3|4096,I=I.sibling;else{if(wa(),B===V){y=hd(g,y,I);break e}Tr(g,y,B,I)}y=y.child}return y;case 5:return Ih(y),g===null&&Js(y),B=y.type,V=y.pendingProps,J=g!==null?g.memoizedProps:null,fe=V.children,nd(B,V)?fe=null:J!==null&&nd(B,J)&&(y.flags|=32),Lt(g,y),Tr(g,y,fe,I),y.child;case 6:return g===null&&Js(y),null;case 13:return Cm(g,y,I);case 4:return ac(y,y.stateNode.containerInfo),B=y.pendingProps,g===null?y.child=Ca(y,null,B,I):Tr(g,y,B,I),y.child;case 11:return B=y.type,V=y.pendingProps,V=y.elementType===B?V:Yl(B,V),_t(g,y,B,V,I);case 7:return Tr(g,y,y.pendingProps,I),y.child;case 8:return Tr(g,y,y.pendingProps.children,I),y.child;case 12:return Tr(g,y,y.pendingProps.children,I),y.child;case 10:e:{if(B=y.type._context,V=y.pendingProps,J=y.memoizedProps,fe=V.value,ki(Cu,B._currentValue),B._currentValue=fe,J!==null)if(Tt(J.value,fe)){if(J.children===V.children&&!Fo.current){y=hd(g,y,I);break e}}else for(J=y.child,J!==null&&(J.return=y);J!==null;){var Ue=J.dependencies;if(Ue!==null){fe=J.child;for(var Ze=Ue.firstContext;Ze!==null;){if(Ze.context===B){if(J.tag===1){Ze=la(-1,I&-I),Ze.tag=2;var Ct=J.updateQueue;if(Ct!==null){Ct=Ct.shared;var Xt=Ct.pending;Xt===null?Ze.next=Ze:(Ze.next=Xt.next,Xt.next=Ze),Ct.pending=Ze}}J.lanes|=I,Ze=J.alternate,Ze!==null&&(Ze.lanes|=I),Eo(J.return,I,y),Ue.lanes|=I;break}Ze=Ze.next}}else if(J.tag===10)fe=J.type===y.type?null:J.child;else if(J.tag===18){if(fe=J.return,fe===null)throw Error(t(341));fe.lanes|=I,Ue=fe.alternate,Ue!==null&&(Ue.lanes|=I),Eo(fe,I,y),fe=J.sibling}else fe=J.child;if(fe!==null)fe.return=J;else for(fe=J;fe!==null;){if(fe===y){fe=null;break}if(J=fe.sibling,J!==null){J.return=fe.return,fe=J;break}fe=fe.return}J=fe}Tr(g,y,V.children,I),y=y.child}return y;case 9:return V=y.type,B=y.pendingProps.children,Xa(y,I),V=Ss(V),B=B(V),y.flags|=1,Tr(g,y,B,I),y.child;case 14:return B=y.type,V=Yl(B,y.pendingProps),V=Yl(B.type,V),Se(g,y,B,V,I);case 15:return Me(g,y,y.type,y.pendingProps,I);case 17:return B=y.type,V=y.pendingProps,V=y.elementType===B?V:Yl(B,V),Hf(g,y),y.tag=1,So(B)?(g=!0,Ea(y)):g=!1,Xa(y,I),Kl(y,B,V),oc(y,B,V,I),mn(null,y,B,!0,g,I);case 19:return Ia(g,y,I);case 22:return Ke(g,y,I)}throw Error(t(156,y.tag))};function Pc(g,y){return ji(g,y)}function Gs(g,y,I,B){this.tag=g,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fu(g,y,I,B){return new Gs(g,y,I,B)}function g0(g){return g=g.prototype,!(!g||!g.isReactComponent)}function Ag(g){if(typeof g=="function")return g0(g)?1:0;if(g!=null){if(g=g.$$typeof,g===ie)return 11;if(g===ce)return 14}return 2}function Lh(g,y){var I=g.alternate;return I===null?(I=Fu(g.tag,y,g.key,g.mode),I.elementType=g.elementType,I.type=g.type,I.stateNode=g.stateNode,I.alternate=g,g.alternate=I):(I.pendingProps=y,I.type=g.type,I.flags=0,I.subtreeFlags=0,I.deletions=null),I.flags=g.flags&14680064,I.childLanes=g.childLanes,I.lanes=g.lanes,I.child=g.child,I.memoizedProps=g.memoizedProps,I.memoizedState=g.memoizedState,I.updateQueue=g.updateQueue,y=g.dependencies,I.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},I.sibling=g.sibling,I.index=g.index,I.ref=g.ref,I}function Fm(g,y,I,B,V,J){var fe=2;if(B=g,typeof g=="function")g0(g)&&(fe=1);else if(typeof g=="string")fe=5;else e:switch(g){case U:return rf(I.children,V,J,y);case P:fe=8,V|=8;break;case K:return g=Fu(12,I,y,V|2),g.elementType=K,g.lanes=J,g;case de:return g=Fu(13,I,y,V),g.elementType=de,g.lanes=J,g;case oe:return g=Fu(19,I,y,V),g.elementType=oe,g.lanes=J,g;case Ae:return sf(I,V,J,y);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case ee:fe=10;break e;case re:fe=9;break e;case ie:fe=11;break e;case ce:fe=14;break e;case me:fe=16,B=null;break e}throw Error(t(130,g==null?g:typeof g,""))}return y=Fu(fe,I,y,V),y.elementType=g,y.type=B,y.lanes=J,y}function rf(g,y,I,B){return g=Fu(7,g,B,y),g.lanes=I,g}function sf(g,y,I,B){return g=Fu(22,g,B,y),g.elementType=Ae,g.lanes=I,g.stateNode={isHidden:!1},g}function Yf(g,y,I){return g=Fu(6,g,null,y),g.lanes=I,g}function pd(g,y,I){return y=Fu(4,g.children!==null?g.children:[],g.key,y),y.lanes=I,y.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},y}function wp(g,y,I,B,V){this.tag=y,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hu(0),this.expirationTimes=hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hu(0),this.identifierPrefix=B,this.onRecoverableError=V,this.mutableSourceEagerHydrationData=null}function Ig(g,y,I,B,V,J,fe,Ue,Ze){return g=new wp(g,y,I,Ue,Ze),y===1?(y=1,J===!0&&(y|=8)):y=0,J=Fu(3,null,null,y),g.current=J,J.stateNode=g,J.memoizedState={element:B,isDehydrated:I,cache:null,transitions:null,pendingSuspenseBoundaries:null},yp(J),g}function Ob(g,y,I){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:B==null?null:""+B,children:g,containerInfo:y,implementation:I}}function _0(g){if(!g)return Ac;g=g._reactInternals;e:{if(Pn(g)!==g||g.tag!==1)throw Error(t(170));var y=g;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(So(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(t(171))}if(g.tag===1){var I=g.type;if(So(I))return Ah(g,I,y)}return y}function Vd(g,y,I,B,V,J,fe,Ue,Ze){return g=Ig(I,B,!0,g,V,J,fe,Ue,Ze),g.context=_0(null),I=g.current,B=cc(),V=Wd(I),J=la(B,V),J.callback=y??null,yi(I,J,V),g.current.lanes=V,Ul(g,V,B),La(g,B),g}function ei(g,y,I,B){var V=y.current,J=cc(),fe=Wd(V);return I=_0(I),y.context===null?y.context=I:y.pendingContext=I,y=la(J,fe),y.payload={element:g},B=B===void 0?null:B,B!==null&&(y.callback=B),g=yi(V,y,fe),g!==null&&(Mo(g,V,fe,J),Cn(g,V,fe)),fe}function Um(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return g.child.stateNode;default:return g.child.stateNode}}function Rg(g,y){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var I=g.retryLane;g.retryLane=I!==0&&I<y?I:y}}function v0(g,y){Rg(g,y),(g=g.alternate)&&Rg(g,y)}function Lb(){return null}var y0=typeof reportError=="function"?reportError:function(g){console.error(g)};function zm(g){this._internalRoot=g}kg.prototype.render=zm.prototype.render=function(g){var y=this._internalRoot;if(y===null)throw Error(t(409));ei(g,y,null,null)},kg.prototype.unmount=zm.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var y=g.containerInfo;Xf(function(){ei(null,g,null,null)}),y[es]=null}};function kg(g){this._internalRoot=g}kg.prototype.unstable_scheduleHydration=function(g){if(g){var y=dl();g={blockedOn:null,target:g,priority:y};for(var I=0;I<zl.length&&y!==0&&y<zl[I].priority;I++);zl.splice(I,0,g),I===0&&Ls(g)}};function of(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function af(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11&&(g.nodeType!==8||g.nodeValue!==" react-mount-point-unstable "))}function Hm(){}function li(g,y,I,B,V){if(V){if(typeof B=="function"){var J=B;B=function(){var Ct=Um(fe);J.call(Ct)}}var fe=Vd(y,B,g,0,null,!1,!1,"",Hm);return g._reactRootContainer=fe,g[es]=fe.current,qu(g.nodeType===8?g.parentNode:g),Xf(),fe}for(;V=g.lastChild;)g.removeChild(V);if(typeof B=="function"){var Ue=B;B=function(){var Ct=Um(Ze);Ue.call(Ct)}}var Ze=Ig(g,0,!1,null,null,!1,!1,"",Hm);return g._reactRootContainer=Ze,g[es]=Ze.current,qu(g.nodeType===8?g.parentNode:g),Xf(function(){ei(y,Ze,I,B)}),Ze}function lf(g,y,I,B,V){var J=I._reactRootContainer;if(J){var fe=J;if(typeof V=="function"){var Ue=V;V=function(){var Ze=Um(fe);Ue.call(Ze)}}ei(y,fe,g,V)}else fe=li(I,y,g,V,B);return Um(fe)}Vc=function(g){switch(g.tag){case 3:var y=g.stateNode;if(y.current.memoizedState.isDehydrated){var I=Ua(y.pendingLanes);I!==0&&(Jo(y,I|1),La(y,Kt()),!(Ai&6)&&(Bc=Kt()+500,hn()))}break;case 13:Xf(function(){var B=Ya(g,1);if(B!==null){var V=cc();Mo(B,g,1,V)}}),v0(g,1)}},vh=function(g){if(g.tag===13){var y=Ya(g,134217728);if(y!==null){var I=cc();Mo(y,g,134217728,I)}v0(g,134217728)}},yc=function(g){if(g.tag===13){var y=Wd(g),I=Ya(g,y);if(I!==null){var B=cc();Mo(I,g,y,B)}v0(g,y)}},dl=function(){return rr},du=function(g,y){var I=rr;try{return rr=g,y()}finally{rr=I}},Ht=function(g,y,I){switch(y){case"input":if(It(g,I),y=I.name,I.type==="radio"&&y!=null){for(I=g;I.parentNode;)I=I.parentNode;for(I=I.querySelectorAll("input[name="+JSON.stringify(""+y)+'][type="radio"]'),y=0;y<I.length;y++){var B=I[y];if(B!==g&&B.form===g.form){var V=Xp(B);if(!V)throw Error(t(90));Ee(B),It(B,V)}}}break;case"textarea":ke(g,I);break;case"select":y=I.value,y!=null&&pt(g,!!I.multiple,y,!1)}},or=m_,Wn=Xf;var Gm={usingClientEntryPoint:!1,Events:[Hr,Hn,Xp,Er,Kr,m_]},Wm={findFiberByHostInstance:Va,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Kf={bundleType:Wm.bundleType,version:Wm.version,rendererPackageName:Wm.rendererPackageName,rendererConfig:Wm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return g=$r(g),g===null?null:g.stateNode},findFiberByHostInstance:Wm.findFiberByHostInstance||Lb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var b0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!b0.isDisabled&&b0.supportsFiber)try{pr=b0.inject(Kf),fn=b0}catch{}}return Op.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gm,Op.createPortal=function(g,y){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!of(y))throw Error(t(200));return Ob(g,y,null,I)},Op.createRoot=function(g,y){if(!of(g))throw Error(t(299));var I=!1,B="",V=y0;return y!=null&&(y.unstable_strictMode===!0&&(I=!0),y.identifierPrefix!==void 0&&(B=y.identifierPrefix),y.onRecoverableError!==void 0&&(V=y.onRecoverableError)),y=Ig(g,1,!1,null,null,I,!1,B,V),g[es]=y.current,qu(g.nodeType===8?g.parentNode:g),new zm(y)},Op.findDOMNode=function(g){if(g==null)return null;if(g.nodeType===1)return g;var y=g._reactInternals;if(y===void 0)throw typeof g.render=="function"?Error(t(188)):(g=Object.keys(g).join(","),Error(t(268,g)));return g=$r(y),g=g===null?null:g.stateNode,g},Op.flushSync=function(g){return Xf(g)},Op.hydrate=function(g,y,I){if(!af(y))throw Error(t(200));return lf(null,g,y,!0,I)},Op.hydrateRoot=function(g,y,I){if(!of(g))throw Error(t(405));var B=I!=null&&I.hydratedSources||null,V=!1,J="",fe=y0;if(I!=null&&(I.unstable_strictMode===!0&&(V=!0),I.identifierPrefix!==void 0&&(J=I.identifierPrefix),I.onRecoverableError!==void 0&&(fe=I.onRecoverableError)),y=Vd(y,null,g,1,I??null,V,!1,J,fe),g[es]=y.current,qu(g),B)for(g=0;g<B.length;g++)I=B[g],V=I._getVersion,V=V(I._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[I,V]:y.mutableSourceEagerHydrationData.push(I,V);return new kg(y)},Op.render=function(g,y,I){if(!af(y))throw Error(t(200));return lf(null,g,y,!1,I)},Op.unmountComponentAtNode=function(g){if(!af(g))throw Error(t(40));return g._reactRootContainer?(Xf(function(){lf(null,null,g,!1,function(){g._reactRootContainer=null,g[es]=null})}),!0):!1},Op.unstable_batchedUpdates=m_,Op.unstable_renderSubtreeIntoContainer=function(g,y,I,B){if(!af(I))throw Error(t(200));if(g==null||g._reactInternals===void 0)throw Error(t(38));return lf(g,y,I,!1,B)},Op.version="18.2.0-next-9e3b772b8-20220608",Op}(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=Kbe()})(Yj);var Kj,E5=Yj.exports;Kj=E5.createRoot,E5.hydrateRoot;const Qx=new be,eF=new be,Jbe=new be;function Qbe(n,e,t){const i=Qx.setFromMatrixPosition(n.matrixWorld);i.project(e);const s=t.width/2,o=t.height/2;return[i.x*s+s,-(i.y*o)+o]}function qbe(n,e){const t=Qx.setFromMatrixPosition(n.matrixWorld),i=eF.setFromMatrixPosition(e.matrixWorld),s=t.sub(i),o=e.getWorldDirection(Jbe);return s.angleTo(o)>Math.PI/2}function Zbe(n,e,t,i){const s=Qx.setFromMatrixPosition(n.matrixWorld),o=s.clone();o.project(e),t.setFromCamera(o,e);const l=t.intersectObjects(i,!0);if(l.length){const u=l[0].distance;return s.distanceTo(t.ray.origin)<u}return!0}function e1e(n,e){if(e instanceof t0)return e.zoom;if(e instanceof ko){const t=Qx.setFromMatrixPosition(n.matrixWorld),i=eF.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,o=t.distanceTo(i);return 1/(2*Math.tan(s/2)*o)}else return 1}function t1e(n,e,t){if(e instanceof ko||e instanceof t0){const i=Qx.setFromMatrixPosition(n.matrixWorld),s=eF.setFromMatrixPosition(e.matrixWorld),o=i.distanceTo(s),l=(t[1]-t[0])/(e.far-e.near),u=t[1]-l*e.far;return Math.round(l*o+u)}}const aN=n=>Math.abs(n)<1e-10?0:n;function Jj(n,e,t=""){let i="matrix3d(";for(let s=0;s!==16;s++)i+=aN(e[s]*n.elements[s])+(s!==15?",":")");return t+i}const n1e=(n=>e=>Jj(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),r1e=(n=>(e,t)=>Jj(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function i1e(n){return n&&typeof n=="object"&&"current"in n}const Qj=he.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:s,center:o,fullscreen:l,portal:u,distanceFactor:h,sprite:d=!1,transform:m=!1,occlude:_,onOcclude:v,castShadow:S,receiveShadow:x,material:w,geometry:A,zIndexRange:k=[16777271,0],calculatePosition:O=Qbe,as:D="div",wrapperClass:L,pointerEvents:z="auto",...H},U)=>{const{gl:P,camera:K,scene:ee,size:re,raycaster:ie,events:de,viewport:oe}=Gh(),[ce]=he.useState(()=>document.createElement(D)),me=he.useRef(),Ae=he.useRef(null),j=he.useRef(0),Z=he.useRef([0,0]),ne=he.useRef(null),ae=he.useRef(null),_e=(u==null?void 0:u.current)||de.connected||P.domElement.parentNode,Le=he.useRef(null),we=he.useRef(!1),Xe=he.useMemo(()=>_&&_!=="blending"||Array.isArray(_)&&_.length&&i1e(_[0]),[_]);he.useLayoutEffect(()=>{const it=P.domElement;_&&_==="blending"?(it.style.zIndex=`${Math.floor(k[0]/2)}`,it.style.position="absolute",it.style.pointerEvents="none"):(it.style.zIndex=null,it.style.position=null,it.style.pointerEvents=null)},[_]),he.useLayoutEffect(()=>{if(Ae.current){const it=me.current=Kj(ce);if(ee.updateMatrixWorld(),m)ce.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Oe=O(Ae.current,K,re);ce.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Oe[0]}px,${Oe[1]}px,0);transform-origin:0 0;`}return _e&&(s?_e.prepend(ce):_e.appendChild(ce)),()=>{_e&&_e.removeChild(ce),it.unmount()}}},[_e,m]),he.useLayoutEffect(()=>{L&&(ce.className=L)},[L]);const Re=he.useMemo(()=>m?{position:"absolute",top:0,left:0,width:re.width,height:re.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...l&&{top:-re.height/2,left:-re.width/2,width:re.width,height:re.height},...t},[t,o,l,re,m]),qe=he.useMemo(()=>({position:"absolute",pointerEvents:z}),[z]);he.useLayoutEffect(()=>{if(we.current=!1,m){var it;(it=me.current)==null||it.render(Yt("div",{ref:ne,style:Re,children:Yt("div",{ref:ae,style:qe,children:Yt("div",{ref:U,className:i,style:t,children:n})})}))}else{var Oe;(Oe=me.current)==null||Oe.render(Yt("div",{ref:U,style:Re,className:i,children:n}))}});const Je=he.useRef(!0);Bf(it=>{if(Ae.current){K.updateMatrixWorld(),Ae.current.updateWorldMatrix(!0,!1);const Oe=m?Z.current:O(Ae.current,K,re);if(m||Math.abs(j.current-K.zoom)>e||Math.abs(Z.current[0]-Oe[0])>e||Math.abs(Z.current[1]-Oe[1])>e){const Ee=qbe(Ae.current,K);let Fe=!1;Xe&&(_!=="blending"?Fe=[ee]:Array.isArray(_)&&(Fe=_.map(It=>It.current)));const rt=Je.current;if(Fe){const It=Zbe(Ae.current,K,ie,Fe);Je.current=It&&!Ee}else Je.current=!Ee;rt!==Je.current&&(v?v(!Je.current):ce.style.display=Je.current?"block":"none");const nt=Math.floor(k[0]/2),dt=_?Xe?[k[0],nt]:[nt-1,0]:k;if(ce.style.zIndex=`${t1e(Ae.current,K,dt)}`,m){const[It,mt]=[re.width/2,re.height/2],wt=K.projectionMatrix.elements[5]*mt,{isOrthographicCamera:$t,top:pt,left:Te,bottom:te,right:ke}=K,ot=n1e(K.matrixWorldInverse),ft=$t?`scale(${wt})translate(${aN(-(ke+Te)/2)}px,${aN((pt+te)/2)}px)`:`translateZ(${wt}px)`;let xt=Ae.current.matrixWorld;d&&(xt=K.matrixWorldInverse.clone().transpose().copyPosition(xt).scale(Ae.current.scale),xt.elements[3]=xt.elements[7]=xt.elements[11]=0,xt.elements[15]=1),ce.style.width=re.width+"px",ce.style.height=re.height+"px",ce.style.perspective=$t?"":`${wt}px`,ne.current&&ae.current&&(ne.current.style.transform=`${ft}${ot}translate(${It}px,${mt}px)`,ae.current.style.transform=r1e(xt,1/((h||10)/400)))}else{const It=h===void 0?1:e1e(Ae.current,K)*h;ce.style.transform=`translate3d(${Oe[0]}px,${Oe[1]}px,0) scale(${It})`}Z.current=Oe,j.current=K.zoom}}if(!Xe&&Le.current&&!we.current)if(m){if(ne.current){const Oe=ne.current.children[0];if(Oe!=null&&Oe.clientWidth&&Oe!=null&&Oe.clientHeight){const{isOrthographicCamera:Ee}=K;if(Ee||A)H.scale&&(Array.isArray(H.scale)?H.scale instanceof be?Le.current.scale.copy(H.scale.clone().divideScalar(1)):Le.current.scale.set(1/H.scale[0],1/H.scale[1],1/H.scale[2]):Le.current.scale.setScalar(1/H.scale));else{const Fe=(h||10)/400,rt=Oe.clientWidth*Fe,nt=Oe.clientHeight*Fe;Le.current.scale.set(rt,nt,1)}we.current=!0}}}else{const Oe=ce.children[0];if(Oe!=null&&Oe.clientWidth&&Oe!=null&&Oe.clientHeight){const Ee=1/oe.factor,Fe=Oe.clientWidth*Ee,rt=Oe.clientHeight*Ee;Le.current.scale.set(Fe,rt,1),we.current=!0}Le.current.lookAt(it.camera.position)}});const ht=he.useMemo(()=>({vertexShader:m?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[m]);return Yt("group",{...H,ref:Ae,children:_&&!Xe&&_c("mesh",{castShadow:S,receiveShadow:x,ref:Le,children:[A||Yt("planeGeometry",{}),w||Yt("shaderMaterial",{side:tp,vertexShader:ht.vertexShader,fragmentShader:ht.fragmentShader})]})})});function tF(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}const rA=0,s1e=1,o1e=new be,$5=new QP,IO=new W0,x5=new be,gM=new bf;class w5{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new C5,this.unassigned=new C5,this.vertices=[]}setFromPoints(e){if(e.length>=4){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.vertices.push(new a1e(e[t]));this.compute()}return this}setFromObject(e){const t=[];return e.updateMatrixWorld(!0),e.traverse(function(i){const s=i.geometry;if(s!==void 0){if(s.isGeometry){console.error("THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.");return}else if(s.isBufferGeometry){const o=s.attributes.position;if(o!==void 0)for(let l=0,u=o.count;l<u;l++){const h=new be;h.fromBufferAttribute(o,l).applyMatrix4(i.matrixWorld),t.push(h)}}}}),this.setFromPoints(t)}containsPoint(e){const t=this.faces;for(let i=0,s=t.length;i<s;i++)if(t[i].distanceToPoint(e)>this.tolerance)return!1;return!0}intersectRay(e,t){const i=this.faces;let s=-1/0,o=1/0;for(let l=0,u=i.length;l<u;l++){const h=i[l],d=h.distanceToPoint(e.origin),m=h.normal.dot(e.direction);if(d>0&&m>=0)return null;const _=m!==0?-d/m:0;if(!(_<=0)&&(m>0?o=Math.min(_,o):s=Math.max(_,s),s>o))return null}return s!==-1/0?e.at(s,t):e.at(o,t),t}intersectsRay(e){return this.intersectRay(e,o1e)!==null}makeEmpty(){return this.faces=[],this.vertices=[],this}addVertexToFace(e,t){return e.face=t,t.outside===null?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}removeVertexFromFace(e,t){return e===t.outside&&(e.next!==null&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this}removeAllVerticesFromFace(e){if(e.outside!==null){const t=e.outside;let i=e.outside;for(;i.next!==null&&i.next.face===e;)i=i.next;return this.assigned.removeSubList(t,i),t.prev=i.next=null,e.outside=null,t}}deleteFaceVertices(e,t){const i=this.removeAllVerticesFromFace(e);if(i!==void 0)if(t===void 0)this.unassigned.appendChain(i);else{let s=i;do{const o=s.next;t.distanceToPoint(s.point)>this.tolerance?this.addVertexToFace(s,t):this.unassigned.append(s),s=o}while(s!==null)}return this}resolveUnassignedPoints(e){if(this.unassigned.isEmpty()===!1){let t=this.unassigned.first();do{const i=t.next;let s=this.tolerance,o=null;for(let l=0;l<e.length;l++){const u=e[l];if(u.mark===rA){const h=u.distanceToPoint(t.point);if(h>s&&(s=h,o=u),s>1e3*this.tolerance)break}}o!==null&&this.addVertexToFace(t,o),t=i}while(t!==null)}return this}computeExtremes(){const e=new be,t=new be,i=[],s=[];for(let o=0;o<3;o++)i[o]=s[o]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(let o=0,l=this.vertices.length;o<l;o++){const u=this.vertices[o],h=u.point;for(let d=0;d<3;d++)h.getComponent(d)<e.getComponent(d)&&(e.setComponent(d,h.getComponent(d)),i[d]=u);for(let d=0;d<3;d++)h.getComponent(d)>t.getComponent(d)&&(t.setComponent(d,h.getComponent(d)),s[d]=u)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:i,max:s}}computeInitialHull(){const e=this.vertices,t=this.computeExtremes(),i=t.min,s=t.max;let o=0,l=0;for(let v=0;v<3;v++){const S=s[v].point.getComponent(v)-i[v].point.getComponent(v);S>o&&(o=S,l=v)}const u=i[l],h=s[l];let d,m;o=0,$5.set(u.point,h.point);for(let v=0,S=this.vertices.length;v<S;v++){const x=e[v];if(x!==u&&x!==h){$5.closestPointToPoint(x.point,!0,x5);const w=x5.distanceToSquared(x.point);w>o&&(o=w,d=x)}}o=-1,IO.setFromCoplanarPoints(u.point,h.point,d.point);for(let v=0,S=this.vertices.length;v<S;v++){const x=e[v];if(x!==u&&x!==h&&x!==d){const w=Math.abs(IO.distanceToPoint(x.point));w>o&&(o=w,m=x)}}const _=[];if(IO.distanceToPoint(m.point)<0){_.push(rg.create(u,h,d),rg.create(m,h,u),rg.create(m,d,h),rg.create(m,u,d));for(let v=0;v<3;v++){const S=(v+1)%3;_[v+1].getEdge(2).setTwin(_[0].getEdge(S)),_[v+1].getEdge(1).setTwin(_[S+1].getEdge(0))}}else{_.push(rg.create(u,d,h),rg.create(m,u,h),rg.create(m,h,d),rg.create(m,d,u));for(let v=0;v<3;v++){const S=(v+1)%3;_[v+1].getEdge(2).setTwin(_[0].getEdge((3-v)%3)),_[v+1].getEdge(0).setTwin(_[S+1].getEdge(1))}}for(let v=0;v<4;v++)this.faces.push(_[v]);for(let v=0,S=e.length;v<S;v++){const x=e[v];if(x!==u&&x!==h&&x!==d&&x!==m){o=this.tolerance;let w=null;for(let A=0;A<4;A++){const k=this.faces[A].distanceToPoint(x.point);k>o&&(o=k,w=this.faces[A])}w!==null&&this.addVertexToFace(x,w)}}return this}reindexFaces(){const e=[];for(let t=0;t<this.faces.length;t++){const i=this.faces[t];i.mark===rA&&e.push(i)}return this.faces=e,this}nextVertexToAdd(){if(this.assigned.isEmpty()===!1){let e,t=0;const i=this.assigned.first().face;let s=i.outside;do{const o=i.distanceToPoint(s.point);o>t&&(t=o,e=s),s=s.next}while(s!==null&&s.face===i);return e}}computeHorizon(e,t,i,s){this.deleteFaceVertices(i),i.mark=s1e;let o;t===null?o=t=i.getEdge(0):o=t.next;do{const l=o.twin,u=l.face;u.mark===rA&&(u.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,l,u,s):s.push(o)),o=o.next}while(o!==t);return this}addAdjoiningFace(e,t){const i=rg.create(e,t.tail(),t.head());return this.faces.push(i),i.getEdge(-1).setTwin(t.twin),i.getEdge(0)}addNewFaces(e,t){this.newFaces=[];let i=null,s=null;for(let o=0;o<t.length;o++){const l=t[o],u=this.addAdjoiningFace(e,l);i===null?i=u:u.next.setTwin(s),this.newFaces.push(u.face),s=u}return i.next.setTwin(s),this}addVertexToHull(e){const t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}compute(){let e;for(this.computeInitialHull();(e=this.nextVertexToAdd())!==void 0;)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}class rg{constructor(){this.normal=new be,this.midpoint=new be,this.area=0,this.constant=0,this.outside=null,this.mark=rA,this.edge=null}static create(e,t,i){const s=new rg,o=new RO(e,s),l=new RO(t,s),u=new RO(i,s);return o.next=u.prev=l,l.next=o.prev=u,u.next=l.prev=o,s.edge=o,s.compute()}getEdge(e){let t=this.edge;for(;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}compute(){const e=this.edge.tail(),t=this.edge.head(),i=this.edge.next.head();return gM.set(e.point,t.point,i.point),gM.getNormal(this.normal),gM.getMidpoint(this.midpoint),this.area=gM.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(e){return this.normal.dot(e)-this.constant}}class RO{constructor(e,t){this.vertex=e,this.prev=null,this.next=null,this.twin=null,this.face=t}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceTo(e.point):-1}lengthSquared(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceToSquared(e.point):-1}setTwin(e){return this.twin=e,e.twin=this,this}}class a1e{constructor(e){this.point=e,this.prev=null,this.next=null,this.face=null}}class C5{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(e,t){return t.prev=e.prev,t.next=e,t.prev===null?this.head=t:t.prev.next=t,e.prev=t,this}insertAfter(e,t){return t.prev=e,t.next=e.next,t.next===null?this.tail=t:t.next.prev=t,e.next=t,this}append(e){return this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}appendChain(e){for(this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail;e.next!==null;)e=e.next;return this.tail=e,this}remove(e){return e.prev===null?this.head=e.next:e.prev.next=e.next,e.next===null?this.tail=e.prev:e.next.prev=e.prev,this}removeSubList(e,t){return e.prev===null?this.head=t.next:e.prev.next=t.next,t.next===null?this.tail=e.prev:t.next.prev=e.prev,this}isEmpty(){return this.head===null}}class M5 extends Or{constructor(e=[]){super();const t=[],i=[];w5===void 0&&console.error("THREE.ConvexGeometry: ConvexGeometry relies on ConvexHull");const s=new w5().setFromPoints(e).faces;for(let o=0;o<s.length;o++){const l=s[o];let u=l.edge;do{const h=u.head().point;t.push(h.x,h.y,h.z),i.push(l.normal.x,l.normal.y,l.normal.z),u=u.next}while(u!==l.edge)}this.setAttribute("position",new Fn(t,3)),this.setAttribute("normal",new Fn(i,3))}}function jr(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const qj=(n,e)=>{const t=n[0].index!==null,i=new Set(Object.keys(n[0].attributes)),s=new Set(Object.keys(n[0].morphAttributes)),o={},l={},u=n[0].morphTargetsRelative,h=new Or;let d=0;if(n.forEach((m,_)=>{let v=0;if(t!==(m.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let S in m.attributes){if(!i.has(S))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+'. All geometries must have compatible attributes; make sure "'+S+'" attribute exists among all geometries, or in none of them.'),null;o[S]===void 0&&(o[S]=[]),o[S].push(m.attributes[S]),v++}if(v!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+". Make sure all geometries have the same number of attributes."),null;if(u!==m.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let S in m.morphAttributes){if(!s.has(S))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+".  .morphAttributes must be consistent throughout all geometries."),null;l[S]===void 0&&(l[S]=[]),l[S].push(m.morphAttributes[S])}if(h.userData.mergedUserData=h.userData.mergedUserData||[],h.userData.mergedUserData.push(m.userData),e){let S;if(m.index)S=m.index.count;else if(m.attributes.position!==void 0)S=m.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+". The geometry must have either an index or a position attribute"),null;h.addGroup(d,S,_),d+=S}}),t){let m=0;const _=[];n.forEach(v=>{const S=v.index;for(let x=0;x<S.count;++x)_.push(S.getX(x)+m);m+=v.attributes.position.count}),h.setIndex(_)}for(let m in o){const _=A5(o[m]);if(!_)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+m+" attribute."),null;h.setAttribute(m,_)}for(let m in l){const _=l[m][0].length;if(_===0)break;h.morphAttributes=h.morphAttributes||{},h.morphAttributes[m]=[];for(let v=0;v<_;++v){const S=[];for(let w=0;w<l[m].length;++w)S.push(l[m][w][v]);const x=A5(S);if(!x)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+m+" morphAttribute."),null;h.morphAttributes[m].push(x)}}return h},A5=n=>{let e,t,i,s=0;if(n.forEach(o=>{if(e===void 0&&(e=o.array.constructor),e!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=o.itemSize),t!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=o.normalized),i!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;s+=o.array.length}),e&&t){const o=new e(s);let l=0;return n.forEach(u=>{o.set(u.array,l),l+=u.array.length}),new Is(o,t,i)}},I5=(n,e)=>(n%e+e)%e;class l1e extends Df{constructor(e,t){super(),jr(this,"object",void 0),jr(this,"domElement",void 0),jr(this,"enabled",!0),jr(this,"target",new be),jr(this,"minDistance",0),jr(this,"maxDistance",1/0),jr(this,"minZoom",0),jr(this,"maxZoom",1/0),jr(this,"minPolarAngle",0),jr(this,"maxPolarAngle",Math.PI),jr(this,"minAzimuthAngle",-1/0),jr(this,"maxAzimuthAngle",1/0),jr(this,"enableDamping",!1),jr(this,"dampingFactor",.05),jr(this,"enableZoom",!0),jr(this,"zoomSpeed",1),jr(this,"enableRotate",!0),jr(this,"rotateSpeed",1),jr(this,"enablePan",!0),jr(this,"panSpeed",1),jr(this,"screenSpacePanning",!0),jr(this,"keyPanSpeed",7),jr(this,"autoRotate",!1),jr(this,"autoRotateSpeed",2),jr(this,"reverseOrbit",!1),jr(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),jr(this,"mouseButtons",{LEFT:My.ROTATE,MIDDLE:My.DOLLY,RIGHT:My.PAN}),jr(this,"touches",{ONE:Ay.ROTATE,TWO:Ay.DOLLY_PAN}),jr(this,"target0",void 0),jr(this,"position0",void 0),jr(this,"zoom0",void 0),jr(this,"_domElementKeyEvents",null),jr(this,"getPolarAngle",void 0),jr(this,"getAzimuthalAngle",void 0),jr(this,"setPolarAngle",void 0),jr(this,"setAzimuthalAngle",void 0),jr(this,"getDistance",void 0),jr(this,"listenToKeyEvents",void 0),jr(this,"saveState",void 0),jr(this,"reset",void 0),jr(this,"update",void 0),jr(this,"connect",void 0),jr(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof ko?this.object.zoom:1,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=Q=>{let le=I5(Q,2*Math.PI),$e=m.phi;$e<0&&($e+=2*Math.PI),le<0&&(le+=2*Math.PI);let We=Math.abs(le-$e);2*Math.PI-We<We&&(le<$e?le+=2*Math.PI:$e+=2*Math.PI),_.phi=le-$e,i.update()},this.setAzimuthalAngle=Q=>{let le=I5(Q,2*Math.PI),$e=m.theta;$e<0&&($e+=2*Math.PI),le<0&&(le+=2*Math.PI);let We=Math.abs(le-$e);2*Math.PI-We<We&&(le<$e?le+=2*Math.PI:$e+=2*Math.PI),_.theta=le-$e,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=Q=>{Q.addEventListener("keydown",ke),this._domElementKeyEvents=Q},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object instanceof ko?i.object.zoom:1},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object instanceof ko&&(i.object.zoom=i.zoom0,i.object.updateProjectionMatrix()),i.dispatchEvent(s),i.update(),h=u.NONE},this.update=(()=>{const Q=new be,le=new jo().setFromUnitVectors(e.up,new be(0,1,0)),$e=le.clone().invert(),We=new be,Ft=new jo,Be=2*Math.PI;return function(){const Ut=i.object.position;Q.copy(Ut).sub(i.target),Q.applyQuaternion(le),m.setFromVector3(Q),i.autoRotate&&h===u.NONE&&ie(ee()),i.enableDamping?(m.theta+=_.theta*i.dampingFactor,m.phi+=_.phi*i.dampingFactor):(m.theta+=_.theta,m.phi+=_.phi);let ut=i.minAzimuthAngle,Ht=i.maxAzimuthAngle;return isFinite(ut)&&isFinite(Ht)&&(ut<-Math.PI?ut+=Be:ut>Math.PI&&(ut-=Be),Ht<-Math.PI?Ht+=Be:Ht>Math.PI&&(Ht-=Be),ut<=Ht?m.theta=Math.max(ut,Math.min(Ht,m.theta)):m.theta=m.theta>(ut+Ht)/2?Math.max(ut,m.theta):Math.min(Ht,m.theta)),m.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=v,m.radius=Math.max(i.minDistance,Math.min(i.maxDistance,m.radius)),i.enableDamping===!0?i.target.addScaledVector(S,i.dampingFactor):i.target.add(S),Q.setFromSpherical(m),Q.applyQuaternion($e),Ut.copy(i.target).add(Q),i.object.lookAt(i.target),i.enableDamping===!0?(_.theta*=1-i.dampingFactor,_.phi*=1-i.dampingFactor,S.multiplyScalar(1-i.dampingFactor)):(_.set(0,0,0),S.set(0,0,0)),v=1,x||We.distanceToSquared(i.object.position)>d||8*(1-Ft.dot(i.object.quaternion))>d?(i.dispatchEvent(s),We.copy(i.object.position),Ft.copy(i.object.quaternion),x=!1,!0):!1}})(),this.connect=Q=>{Q===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=Q,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",xt),i.domElement.addEventListener("pointerdown",It),i.domElement.addEventListener("pointercancel",$t),i.domElement.addEventListener("wheel",te)},this.dispose=()=>{var Q,le,$e,We,Ft,Be;(Q=i.domElement)===null||Q===void 0||Q.removeEventListener("contextmenu",xt),(le=i.domElement)===null||le===void 0||le.removeEventListener("pointerdown",It),($e=i.domElement)===null||$e===void 0||$e.removeEventListener("pointercancel",$t),(We=i.domElement)===null||We===void 0||We.removeEventListener("wheel",te),(Ft=i.domElement)===null||Ft===void 0||Ft.ownerDocument.removeEventListener("pointermove",mt),(Be=i.domElement)===null||Be===void 0||Be.ownerDocument.removeEventListener("pointerup",wt),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ke)};const i=this,s={type:"change"},o={type:"start"},l={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=u.NONE;const d=1e-6,m=new nN,_=new nN;let v=1;const S=new be;let x=!1;const w=new Dt,A=new Dt,k=new Dt,O=new Dt,D=new Dt,L=new Dt,z=new Dt,H=new Dt,U=new Dt,P=[],K={};function ee(){return 2*Math.PI/60/60*i.autoRotateSpeed}function re(){return Math.pow(.95,i.zoomSpeed)}function ie(Q){i.reverseOrbit?_.theta+=Q:_.theta-=Q}function de(Q){i.reverseOrbit?_.phi+=Q:_.phi-=Q}const oe=(()=>{const Q=new be;return function(le,$e){Q.setFromMatrixColumn($e,0),Q.multiplyScalar(-le),S.add(Q)}})(),ce=(()=>{const Q=new be;return function(le,$e){i.screenSpacePanning===!0?Q.setFromMatrixColumn($e,1):(Q.setFromMatrixColumn($e,0),Q.crossVectors(i.object.up,Q)),Q.multiplyScalar(le),S.add(Q)}})(),me=(()=>{const Q=new be;return function(le,$e){const We=i.domElement;if(We&&i.object instanceof ko&&i.object.isPerspectiveCamera){const Ft=i.object.position;Q.copy(Ft).sub(i.target);let Be=Q.length();Be*=Math.tan(i.object.fov/2*Math.PI/180),oe(2*le*Be/We.clientHeight,i.object.matrix),ce(2*$e*Be/We.clientHeight,i.object.matrix)}else We&&i.object instanceof t0&&i.object.isOrthographicCamera?(oe(le*(i.object.right-i.object.left)/i.object.zoom/We.clientWidth,i.object.matrix),ce($e*(i.object.top-i.object.bottom)/i.object.zoom/We.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function Ae(Q){i.object instanceof ko&&i.object.isPerspectiveCamera?v/=Q:i.object instanceof t0&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*Q)),i.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function j(Q){i.object instanceof ko&&i.object.isPerspectiveCamera?v*=Q:i.object instanceof t0&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/Q)),i.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Z(Q){w.set(Q.clientX,Q.clientY)}function ne(Q){z.set(Q.clientX,Q.clientY)}function ae(Q){O.set(Q.clientX,Q.clientY)}function _e(Q){A.set(Q.clientX,Q.clientY),k.subVectors(A,w).multiplyScalar(i.rotateSpeed);const le=i.domElement;le&&(ie(2*Math.PI*k.x/le.clientHeight),de(2*Math.PI*k.y/le.clientHeight)),w.copy(A),i.update()}function Le(Q){H.set(Q.clientX,Q.clientY),U.subVectors(H,z),U.y>0?Ae(re()):U.y<0&&j(re()),z.copy(H),i.update()}function we(Q){D.set(Q.clientX,Q.clientY),L.subVectors(D,O).multiplyScalar(i.panSpeed),me(L.x,L.y),O.copy(D),i.update()}function Xe(Q){Q.deltaY<0?j(re()):Q.deltaY>0&&Ae(re()),i.update()}function Re(Q){let le=!1;switch(Q.code){case i.keys.UP:me(0,i.keyPanSpeed),le=!0;break;case i.keys.BOTTOM:me(0,-i.keyPanSpeed),le=!0;break;case i.keys.LEFT:me(i.keyPanSpeed,0),le=!0;break;case i.keys.RIGHT:me(-i.keyPanSpeed,0),le=!0;break}le&&(Q.preventDefault(),i.update())}function qe(){if(P.length==1)w.set(P[0].pageX,P[0].pageY);else{const Q=.5*(P[0].pageX+P[1].pageX),le=.5*(P[0].pageY+P[1].pageY);w.set(Q,le)}}function Je(){if(P.length==1)O.set(P[0].pageX,P[0].pageY);else{const Q=.5*(P[0].pageX+P[1].pageX),le=.5*(P[0].pageY+P[1].pageY);O.set(Q,le)}}function ht(){const Q=P[0].pageX-P[1].pageX,le=P[0].pageY-P[1].pageY,$e=Math.sqrt(Q*Q+le*le);z.set(0,$e)}function it(){i.enableZoom&&ht(),i.enablePan&&Je()}function Oe(){i.enableZoom&&ht(),i.enableRotate&&qe()}function Ee(Q){if(P.length==1)A.set(Q.pageX,Q.pageY);else{const $e=X(Q),We=.5*(Q.pageX+$e.x),Ft=.5*(Q.pageY+$e.y);A.set(We,Ft)}k.subVectors(A,w).multiplyScalar(i.rotateSpeed);const le=i.domElement;le&&(ie(2*Math.PI*k.x/le.clientHeight),de(2*Math.PI*k.y/le.clientHeight)),w.copy(A)}function Fe(Q){if(P.length==1)D.set(Q.pageX,Q.pageY);else{const le=X(Q),$e=.5*(Q.pageX+le.x),We=.5*(Q.pageY+le.y);D.set($e,We)}L.subVectors(D,O).multiplyScalar(i.panSpeed),me(L.x,L.y),O.copy(D)}function rt(Q){const le=X(Q),$e=Q.pageX-le.x,We=Q.pageY-le.y,Ft=Math.sqrt($e*$e+We*We);H.set(0,Ft),U.set(0,Math.pow(H.y/z.y,i.zoomSpeed)),Ae(U.y),z.copy(H)}function nt(Q){i.enableZoom&&rt(Q),i.enablePan&&Fe(Q)}function dt(Q){i.enableZoom&&rt(Q),i.enableRotate&&Ee(Q)}function It(Q){if(i.enabled!==!1){if(P.length===0){var le,$e;(le=i.domElement)===null||le===void 0||le.ownerDocument.addEventListener("pointermove",mt),($e=i.domElement)===null||$e===void 0||$e.ownerDocument.addEventListener("pointerup",wt)}at(Q),Q.pointerType==="touch"?ot(Q):pt(Q)}}function mt(Q){i.enabled!==!1&&(Q.pointerType==="touch"?ft(Q):Te(Q))}function wt(Q){if(Ge(Q),P.length===0){var le,$e,We;(le=i.domElement)===null||le===void 0||le.releasePointerCapture(Q.pointerId),($e=i.domElement)===null||$e===void 0||$e.ownerDocument.removeEventListener("pointermove",mt),(We=i.domElement)===null||We===void 0||We.ownerDocument.removeEventListener("pointerup",wt)}i.dispatchEvent(l),h=u.NONE}function $t(Q){Ge(Q)}function pt(Q){let le;switch(Q.button){case 0:le=i.mouseButtons.LEFT;break;case 1:le=i.mouseButtons.MIDDLE;break;case 2:le=i.mouseButtons.RIGHT;break;default:le=-1}switch(le){case My.DOLLY:if(i.enableZoom===!1)return;ne(Q),h=u.DOLLY;break;case My.ROTATE:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(i.enablePan===!1)return;ae(Q),h=u.PAN}else{if(i.enableRotate===!1)return;Z(Q),h=u.ROTATE}break;case My.PAN:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(i.enableRotate===!1)return;Z(Q),h=u.ROTATE}else{if(i.enablePan===!1)return;ae(Q),h=u.PAN}break;default:h=u.NONE}h!==u.NONE&&i.dispatchEvent(o)}function Te(Q){if(i.enabled!==!1)switch(h){case u.ROTATE:if(i.enableRotate===!1)return;_e(Q);break;case u.DOLLY:if(i.enableZoom===!1)return;Le(Q);break;case u.PAN:if(i.enablePan===!1)return;we(Q);break}}function te(Q){i.enabled===!1||i.enableZoom===!1||h!==u.NONE&&h!==u.ROTATE||(Q.preventDefault(),i.dispatchEvent(o),Xe(Q),i.dispatchEvent(l))}function ke(Q){i.enabled===!1||i.enablePan===!1||Re(Q)}function ot(Q){switch(Ce(Q),P.length){case 1:switch(i.touches.ONE){case Ay.ROTATE:if(i.enableRotate===!1)return;qe(),h=u.TOUCH_ROTATE;break;case Ay.PAN:if(i.enablePan===!1)return;Je(),h=u.TOUCH_PAN;break;default:h=u.NONE}break;case 2:switch(i.touches.TWO){case Ay.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;it(),h=u.TOUCH_DOLLY_PAN;break;case Ay.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Oe(),h=u.TOUCH_DOLLY_ROTATE;break;default:h=u.NONE}break;default:h=u.NONE}h!==u.NONE&&i.dispatchEvent(o)}function ft(Q){switch(Ce(Q),h){case u.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ee(Q),i.update();break;case u.TOUCH_PAN:if(i.enablePan===!1)return;Fe(Q),i.update();break;case u.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;nt(Q),i.update();break;case u.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;dt(Q),i.update();break;default:h=u.NONE}}function xt(Q){i.enabled!==!1&&Q.preventDefault()}function at(Q){P.push(Q)}function Ge(Q){delete K[Q.pointerId];for(let le=0;le<P.length;le++)if(P[le].pointerId==Q.pointerId){P.splice(le,1);return}}function Ce(Q){let le=K[Q.pointerId];le===void 0&&(le=new Dt,K[Q.pointerId]=le),le.set(Q.pageX,Q.pageY)}function X(Q){const le=Q.pointerId===P[0].pointerId?P[1]:P[0];return K[le.pointerId]}t!==void 0&&this.connect(t),this.update()}}const XE=new be;function om(n,e,t,i,s,o){const l=2*Math.PI*s/4,u=Math.max(o-2*s,0),h=Math.PI/4;XE.copy(e),XE[i]=0,XE.normalize();const d=.5*l/(l+u),m=1-XE.angleTo(n)/h;return Math.sign(XE[t])===1?m*d:u/(l+u)+d+d*(1-m)}class u1e extends Pa{constructor(e=1,t=1,i=1,s=2,o=.1){if(s=s*2+1,o=Math.min(e/2,t/2,i/2,o),super(1,1,1,s,s,s),s===1)return;const l=this.toNonIndexed();this.index=null,this.attributes.position=l.attributes.position,this.attributes.normal=l.attributes.normal,this.attributes.uv=l.attributes.uv;const u=new be,h=new be,d=new be(e,t,i).divideScalar(2).subScalar(o),m=this.attributes.position.array,_=this.attributes.normal.array,v=this.attributes.uv.array,S=m.length/6,x=new be,w=.5/s;for(let A=0,k=0;A<m.length;A+=3,k+=2)switch(u.fromArray(m,A),h.copy(u),h.x-=Math.sign(h.x)*w,h.y-=Math.sign(h.y)*w,h.z-=Math.sign(h.z)*w,h.normalize(),m[A+0]=d.x*Math.sign(u.x)+h.x*o,m[A+1]=d.y*Math.sign(u.y)+h.y*o,m[A+2]=d.z*Math.sign(u.z)+h.z*o,_[A+0]=h.x,_[A+1]=h.y,_[A+2]=h.z,Math.floor(A/S)){case 0:x.set(1,0,0),v[k+0]=om(x,h,"z","y",o,i),v[k+1]=1-om(x,h,"y","z",o,t);break;case 1:x.set(-1,0,0),v[k+0]=1-om(x,h,"z","y",o,i),v[k+1]=1-om(x,h,"y","z",o,t);break;case 2:x.set(0,1,0),v[k+0]=1-om(x,h,"x","z",o,e),v[k+1]=om(x,h,"z","x",o,i);break;case 3:x.set(0,-1,0),v[k+0]=1-om(x,h,"x","z",o,e),v[k+1]=1-om(x,h,"z","x",o,i);break;case 4:x.set(0,0,1),v[k+0]=1-om(x,h,"x","y",o,e),v[k+1]=1-om(x,h,"y","x",o,t);break;case 5:x.set(0,0,-1),v[k+0]=om(x,h,"x","y",o,e),v[k+1]=1-om(x,h,"y","x",o,t);break}}}const R5=new vg,_M=new be;class nF extends FR{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new Fn(e,3)),this.setAttribute("uv",new Fn(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new ZA(t,6,1);return this.setAttribute("instanceStart",new Sf(i,3,0)),this.setAttribute("instanceEnd",new Sf(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new ZA(t,6,1);return this.setAttribute("instanceColorStart",new Sf(i,3,0)),this.setAttribute("instanceColorEnd",new Sf(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new PP(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vg);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),R5.setFromBufferAttribute(t),this.boundingBox.union(R5))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new c0),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)_M.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(_M)),_M.fromBufferAttribute(t,o),s=Math.max(s,i.distanceToSquared(_M));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class Zj extends nF{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let s=0;s<t;s+=3)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5];return super.setPositions(i),this}setColors(e){const t=e.length-3,i=new Float32Array(2*t);for(let s=0;s<t;s+=3)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5];return super.setColors(i),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}wn.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Dt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};Zd.line={uniforms:Vx.merge([wn.common,wn.fog,wn.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class rF extends mh{constructor(e){super({type:"LineMaterial",uniforms:Vx.clone(Zd.line.uniforms),vertexShader:Zd.line.vertexShader,fragmentShader:Zd.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const k5=new be,O5=new be,Fh=new Ii,Uh=new Ii,Ug=new Ii,kO=new be,OO=new Ar,xd=new QP,L5=new be,vM=new vg,yM=new c0,zg=new Ii;let Kg,lN,eX,ib;function D5(n,e,t){return zg.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),zg.multiplyScalar(1/zg.w),zg.x=ib/t.width,zg.y=ib/t.height,zg.applyMatrix4(n.projectionMatrixInverse),zg.multiplyScalar(1/zg.w),Math.abs(Math.max(zg.x,zg.y))}function c1e(n,e){for(let t=0,i=lN.count;t<i;t++){xd.start.fromBufferAttribute(lN,t),xd.end.fromBufferAttribute(eX,t);const s=new be,o=new be;Kg.distanceSqToSegment(xd.start,xd.end,o,s),o.distanceTo(s)<ib*.5&&e.push({point:o,pointOnLine:s,distance:Kg.origin.distanceTo(o),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function h1e(n,e,t){const i=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,l=n.geometry,u=l.attributes.instanceStart,h=l.attributes.instanceEnd,d=-e.near;Kg.at(1,Ug),Ug.w=1,Ug.applyMatrix4(e.matrixWorldInverse),Ug.applyMatrix4(i),Ug.multiplyScalar(1/Ug.w),Ug.x*=s.x/2,Ug.y*=s.y/2,Ug.z=0,kO.copy(Ug),OO.multiplyMatrices(e.matrixWorldInverse,o);for(let m=0,_=u.count;m<_;m++){if(Fh.fromBufferAttribute(u,m),Uh.fromBufferAttribute(h,m),Fh.w=1,Uh.w=1,Fh.applyMatrix4(OO),Uh.applyMatrix4(OO),Fh.z>d&&Uh.z>d)continue;if(Fh.z>d){const A=Fh.z-Uh.z,k=(Fh.z-d)/A;Fh.lerp(Uh,k)}else if(Uh.z>d){const A=Uh.z-Fh.z,k=(Uh.z-d)/A;Uh.lerp(Fh,k)}Fh.applyMatrix4(i),Uh.applyMatrix4(i),Fh.multiplyScalar(1/Fh.w),Uh.multiplyScalar(1/Uh.w),Fh.x*=s.x/2,Fh.y*=s.y/2,Uh.x*=s.x/2,Uh.y*=s.y/2,xd.start.copy(Fh),xd.start.z=0,xd.end.copy(Uh),xd.end.z=0;const v=xd.closestPointToPointParameter(kO,!0);xd.at(v,L5);const S=A7.lerp(Fh.z,Uh.z,v),x=S>=-1&&S<=1,w=kO.distanceTo(L5)<ib*.5;if(x&&w){xd.start.fromBufferAttribute(u,m),xd.end.fromBufferAttribute(h,m),xd.start.applyMatrix4(o),xd.end.applyMatrix4(o);const A=new be,k=new be;Kg.distanceSqToSegment(xd.start,xd.end,k,A),t.push({point:k,pointOnLine:A,distance:Kg.origin.distanceTo(k),object:n,face:null,faceIndex:m,uv:null,uv2:null})}}}class tX extends Sn{constructor(e=new nF,t=new rF({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,s=new Float32Array(2*t.count);for(let l=0,u=0,h=t.count;l<h;l++,u+=2)k5.fromBufferAttribute(t,l),O5.fromBufferAttribute(i,l),s[u]=u===0?0:s[u-1],s[u+1]=s[u]+k5.distanceTo(O5);const o=new ZA(s,2,1);return e.setAttribute("instanceDistanceStart",new Sf(o,1,0)),e.setAttribute("instanceDistanceEnd",new Sf(o,1,1)),this}raycast(e,t){const i=this.material.worldUnits,s=e.camera;s===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const o=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Kg=e.ray;const l=this.matrixWorld,u=this.geometry,h=this.material;ib=h.linewidth+o,lN=u.attributes.instanceStart,eX=u.attributes.instanceEnd,u.boundingSphere===null&&u.computeBoundingSphere(),yM.copy(u.boundingSphere).applyMatrix4(l);let d;if(i)d=ib*.5;else{const _=Math.max(s.near,yM.distanceToPoint(Kg.origin));d=D5(s,_,h.resolution)}if(yM.radius+=d,Kg.intersectsSphere(yM)===!1)return;u.boundingBox===null&&u.computeBoundingBox(),vM.copy(u.boundingBox).applyMatrix4(l);let m;if(i)m=ib*.5;else{const _=Math.max(s.near,vM.distanceToPoint(Kg.origin));m=D5(s,_,h.resolution)}vM.expandByScalar(m),Kg.intersectsBox(vM)!==!1&&(i?c1e(this,t):h1e(this,s,t))}}class d1e extends tX{constructor(e=new Zj,t=new rF({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const p1e=he.forwardRef(function({follow:n=!0,lockX:e=!1,lockY:t=!1,lockZ:i=!1,...s},o){const l=he.useRef();return Bf(({camera:u})=>{if(!n||!l.current)return;const h=l.current.rotation.clone();u.getWorldQuaternion(l.current.quaternion),e&&(l.current.rotation.x=h.x),t&&(l.current.rotation.y=h.y),i&&(l.current.rotation.z=h.z)}),Yt("group",{ref:tF([l,o]),...s})}),f1e=he.forwardRef(function({points:n,color:e="black",vertexColors:t,linewidth:i,lineWidth:s,segments:o,dashed:l,...u},h){const d=Gh(S=>S.size),m=he.useMemo(()=>o?new tX:new d1e,[o]),[_]=he.useState(()=>new rF),v=he.useMemo(()=>{const S=o?new nF:new Zj,x=n.map(w=>{const A=Array.isArray(w);return w instanceof be?[w.x,w.y,w.z]:w instanceof Dt?[w.x,w.y,0]:A&&w.length===3?[w[0],w[1],w[2]]:A&&w.length===2?[w[0],w[1],0]:w});if(S.setPositions(x.flat()),t){const w=t.map(A=>A instanceof vn?A.toArray():A);S.setColors(w.flat())}return S},[n,o,t]);return he.useLayoutEffect(()=>{m.computeLineDistances()},[n,m]),he.useLayoutEffect(()=>{l?_.defines.USE_DASH="":delete _.defines.USE_DASH,_.needsUpdate=!0},[l,_]),he.useEffect(()=>()=>v.dispose(),[v]),_c("primitive",{object:m,ref:h,...u,children:[Yt("primitive",{object:v,attach:"geometry"}),Yt("primitive",{object:_,attach:"material",color:e,vertexColors:!!t,resolution:[d.width,d.height],linewidth:i??s,dashed:l,...u})]})});function m1e(){var n=Object.create(null);function e(s,o){var l=s.id,u=s.name,h=s.dependencies;h===void 0&&(h=[]);var d=s.init;d===void 0&&(d=function(){});var m=s.getTransferables;if(m===void 0&&(m=null),!n[l])try{h=h.map(function(v){return v&&v.isWorkerModule&&(e(v,function(S){if(S instanceof Error)throw S}),v=n[v.id].value),v}),d=i("<"+u+">.init",d),m&&(m=i("<"+u+">.getTransferables",m));var _=null;typeof d=="function"?_=d.apply(void 0,h):console.error("worker module init function failed to rehydrate"),n[l]={id:l,value:_,getTransferables:m},o(_)}catch(v){v&&v.noLog||console.error(v),o(v)}}function t(s,o){var l,u=s.id,h=s.args;(!n[u]||typeof n[u].value!="function")&&o(new Error("Worker module "+u+": not found or its 'init' did not return a function"));try{var d=(l=n[u]).value.apply(l,h);d&&typeof d.then=="function"?d.then(m,function(_){return o(_ instanceof Error?_:new Error(""+_))}):m(d)}catch(_){o(_)}function m(_){try{var v=n[u].getTransferables&&n[u].getTransferables(_);(!v||!Array.isArray(v)||!v.length)&&(v=void 0),o(_,v)}catch(S){console.error(S),o(S)}}}function i(s,o){var l=void 0;self.troikaDefine=function(h){return l=h};var u=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+o+`
)`],{type:"application/javascript"}));try{importScripts(u)}catch(h){console.error(h)}return URL.revokeObjectURL(u),delete self.troikaDefine,l}self.addEventListener("message",function(s){var o=s.data,l=o.messageId,u=o.action,h=o.data;try{u==="registerModule"&&e(h,function(d){d instanceof Error?postMessage({messageId:l,success:!1,error:d.message}):postMessage({messageId:l,success:!0,result:{isCallable:typeof d=="function"}})}),u==="callModule"&&t(h,function(d,m){d instanceof Error?postMessage({messageId:l,success:!1,error:d.message}):postMessage({messageId:l,success:!0,result:d},m||void 0)})}catch(d){postMessage({messageId:l,success:!1,error:d.stack})}})}function g1e(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(o){return o&&o._getInitResult?o._getInitResult():o}):[];var s=Promise.all(t).then(function(o){return i.apply(null,o)});return e._getInitResult=function(){return s},s},e}var nX=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u"&&!1||console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return nX=function(){return n},n},_1e=0,v1e=0,LO=!1,A$=Object.create(null),I$=Object.create(null),uN=Object.create(null);function qx(n){if((!n||typeof n.init!="function")&&!LO)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,s=n.workerId;if(!nX())return g1e(n);s==null&&(s="#default");var o="workerModule"+ ++_1e,l=n.name||o,u=null;e=e&&e.map(function(d){return typeof d=="function"&&!d.workerModuleData&&(LO=!0,d=qx({workerId:s,name:"<"+l+"> function dependency: "+d.name,init:`function(){return (
`+iA(d)+`
)}`}),LO=!1),d&&d.workerModuleData&&(d=d.workerModuleData),d});function h(){for(var d=[],m=arguments.length;m--;)d[m]=arguments[m];if(!u){u=N5(s,"registerModule",h.workerModuleData);var _=function(){u=null,I$[s].delete(_)};(I$[s]||(I$[s]=new Set)).add(_)}return u.then(function(v){var S=v.isCallable;if(S)return N5(s,"callModule",{id:o,args:d});throw new Error("Worker module function was called but `init` did not return a callable function")})}return h.workerModuleData={isWorkerModule:!0,id:o,name:l,dependencies:e,init:iA(t),getTransferables:i&&iA(i)},h}function y1e(n){I$[n]&&I$[n].forEach(function(e){e()}),A$[n]&&(A$[n].terminate(),delete A$[n])}function iA(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function b1e(n){var e=A$[n];if(!e){var t=iA(m1e);e=A$[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var s=i.data,o=s.messageId,l=uN[o];if(!l)throw new Error("WorkerModule response with empty or unknown messageId");delete uN[o],l(s)}}return e}function N5(n,e,t){return new Promise(function(i,s){var o=++v1e;uN[o]=function(l){l.success?i(l.result):s(new Error("Error in worker "+e+" call: "+l.error))},b1e(n).postMessage({messageId:o,action:e,data:t})})}function rX(){var n=function(e){function t(Z,ne,ae,_e,Le,we,Xe,Re){var qe=1-Xe;Re.x=qe*qe*Z+2*qe*Xe*ae+Xe*Xe*Le,Re.y=qe*qe*ne+2*qe*Xe*_e+Xe*Xe*we}function i(Z,ne,ae,_e,Le,we,Xe,Re,qe,Je){var ht=1-qe;Je.x=ht*ht*ht*Z+3*ht*ht*qe*ae+3*ht*qe*qe*Le+qe*qe*qe*Xe,Je.y=ht*ht*ht*ne+3*ht*ht*qe*_e+3*ht*qe*qe*we+qe*qe*qe*Re}function s(Z,ne){for(var ae=/([MLQCZ])([^MLQCZ]*)/g,_e,Le,we,Xe,Re;_e=ae.exec(Z);){var qe=_e[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Je){return parseFloat(Je)});switch(_e[1]){case"M":Xe=Le=qe[0],Re=we=qe[1];break;case"L":(qe[0]!==Xe||qe[1]!==Re)&&ne("L",Xe,Re,Xe=qe[0],Re=qe[1]);break;case"Q":{ne("Q",Xe,Re,Xe=qe[2],Re=qe[3],qe[0],qe[1]);break}case"C":{ne("C",Xe,Re,Xe=qe[4],Re=qe[5],qe[0],qe[1],qe[2],qe[3]);break}case"Z":(Xe!==Le||Re!==we)&&ne("L",Xe,Re,Le,we);break}}}function o(Z,ne,ae){ae===void 0&&(ae=16);var _e={x:0,y:0};s(Z,function(Le,we,Xe,Re,qe,Je,ht,it,Oe){switch(Le){case"L":ne(we,Xe,Re,qe);break;case"Q":{for(var Ee=we,Fe=Xe,rt=1;rt<ae;rt++)t(we,Xe,Je,ht,Re,qe,rt/(ae-1),_e),ne(Ee,Fe,_e.x,_e.y),Ee=_e.x,Fe=_e.y;break}case"C":{for(var nt=we,dt=Xe,It=1;It<ae;It++)i(we,Xe,Je,ht,it,Oe,Re,qe,It/(ae-1),_e),ne(nt,dt,_e.x,_e.y),nt=_e.x,dt=_e.y;break}}})}var l="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",u="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",h=new WeakMap,d={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function m(Z,ne){var ae=Z.getContext?Z.getContext("webgl",d):Z,_e=h.get(ae);if(!_e){let ht=function(nt){var dt=we[nt];if(!dt&&(dt=we[nt]=ae.getExtension(nt),!dt))throw new Error(nt+" not supported");return dt},it=function(nt,dt){var It=ae.createShader(dt);return ae.shaderSource(It,nt),ae.compileShader(It),It},Oe=function(nt,dt,It,mt){if(!Xe[nt]){var wt={},$t={},pt=ae.createProgram();ae.attachShader(pt,it(dt,ae.VERTEX_SHADER)),ae.attachShader(pt,it(It,ae.FRAGMENT_SHADER)),ae.linkProgram(pt),Xe[nt]={program:pt,transaction:function(Te){ae.useProgram(pt),Te({setUniform:function(te,ke){for(var ot=[],ft=arguments.length-2;ft-- >0;)ot[ft]=arguments[ft+2];var xt=$t[ke]||($t[ke]=ae.getUniformLocation(pt,ke));ae["uniform"+te].apply(ae,[xt].concat(ot))},setAttribute:function(te,ke,ot,ft,xt){var at=wt[te];at||(at=wt[te]={buf:ae.createBuffer(),loc:ae.getAttribLocation(pt,te),data:null}),ae.bindBuffer(ae.ARRAY_BUFFER,at.buf),ae.vertexAttribPointer(at.loc,ke,ae.FLOAT,!1,0,0),ae.enableVertexAttribArray(at.loc),Le?ae.vertexAttribDivisor(at.loc,ft):ht("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(at.loc,ft),xt!==at.data&&(ae.bufferData(ae.ARRAY_BUFFER,xt,ot),at.data=xt)}})}}}Xe[nt].transaction(mt)},Ee=function(nt,dt){qe++;try{ae.activeTexture(ae.TEXTURE0+qe);var It=Re[nt];It||(It=Re[nt]=ae.createTexture(),ae.bindTexture(ae.TEXTURE_2D,It),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.NEAREST),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.NEAREST)),ae.bindTexture(ae.TEXTURE_2D,It),dt(It,qe)}finally{qe--}},Fe=function(nt,dt,It){var mt=ae.createFramebuffer();Je.push(mt),ae.bindFramebuffer(ae.FRAMEBUFFER,mt),ae.activeTexture(ae.TEXTURE0+dt),ae.bindTexture(ae.TEXTURE_2D,nt),ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,nt,0);try{It(mt)}finally{ae.deleteFramebuffer(mt),ae.bindFramebuffer(ae.FRAMEBUFFER,Je[--Je.length-1]||null)}},rt=function(){we={},Xe={},Re={},qe=-1,Je.length=0};var Le=typeof WebGL2RenderingContext<"u"&&ae instanceof WebGL2RenderingContext,we={},Xe={},Re={},qe=-1,Je=[];ae.canvas.addEventListener("webglcontextlost",function(nt){rt(),nt.preventDefault()},!1),h.set(ae,_e={gl:ae,isWebGL2:Le,getExtension:ht,withProgram:Oe,withTexture:Ee,withTextureFramebuffer:Fe,handleContextLoss:rt})}ne(_e)}function _(Z,ne,ae,_e,Le,we,Xe,Re){Xe===void 0&&(Xe=15),Re===void 0&&(Re=null),m(Z,function(qe){var Je=qe.gl,ht=qe.withProgram,it=qe.withTexture;it("copy",function(Oe,Ee){Je.texImage2D(Je.TEXTURE_2D,0,Je.RGBA,Le,we,0,Je.RGBA,Je.UNSIGNED_BYTE,ne),ht("copy",l,u,function(Fe){var rt=Fe.setUniform,nt=Fe.setAttribute;nt("aUV",2,Je.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),rt("1i","image",Ee),Je.bindFramebuffer(Je.FRAMEBUFFER,Re||null),Je.disable(Je.BLEND),Je.colorMask(Xe&8,Xe&4,Xe&2,Xe&1),Je.viewport(ae,_e,Le,we),Je.scissor(ae,_e,Le,we),Je.drawArrays(Je.TRIANGLES,0,3)})})})}function v(Z,ne,ae){var _e=Z.width,Le=Z.height;m(Z,function(we){var Xe=we.gl,Re=new Uint8Array(_e*Le*4);Xe.readPixels(0,0,_e,Le,Xe.RGBA,Xe.UNSIGNED_BYTE,Re),Z.width=ne,Z.height=ae,_(Xe,Re,0,0,_e,Le)})}var S=Object.freeze({__proto__:null,withWebGLContext:m,renderImageData:_,resizeWebGLCanvasWithoutClearing:v});function x(Z,ne,ae,_e,Le,we){we===void 0&&(we=1);var Xe=new Uint8Array(Z*ne),Re=_e[2]-_e[0],qe=_e[3]-_e[1],Je=[];o(ae,function(nt,dt,It,mt){Je.push({x1:nt,y1:dt,x2:It,y2:mt,minX:Math.min(nt,It),minY:Math.min(dt,mt),maxX:Math.max(nt,It),maxY:Math.max(dt,mt)})}),Je.sort(function(nt,dt){return nt.maxX-dt.maxX});for(var ht=0;ht<Z;ht++)for(var it=0;it<ne;it++){var Oe=Fe(_e[0]+Re*(ht+.5)/Z,_e[1]+qe*(it+.5)/ne),Ee=Math.pow(1-Math.abs(Oe)/Le,we)/2;Oe<0&&(Ee=1-Ee),Ee=Math.max(0,Math.min(255,Math.round(Ee*255))),Xe[it*Z+ht]=Ee}return Xe;function Fe(nt,dt){for(var It=1/0,mt=1/0,wt=Je.length;wt--;){var $t=Je[wt];if($t.maxX+mt<=nt)break;if(nt+mt>$t.minX&&dt-mt<$t.maxY&&dt+mt>$t.minY){var pt=k(nt,dt,$t.x1,$t.y1,$t.x2,$t.y2);pt<It&&(It=pt,mt=Math.sqrt(It))}}return rt(nt,dt)&&(mt=-mt),mt}function rt(nt,dt){for(var It=0,mt=Je.length;mt--;){var wt=Je[mt];if(wt.maxX<=nt)break;var $t=wt.y1>dt!=wt.y2>dt&&nt<(wt.x2-wt.x1)*(dt-wt.y1)/(wt.y2-wt.y1)+wt.x1;$t&&(It+=wt.y1<wt.y2?1:-1)}return It!==0}}function w(Z,ne,ae,_e,Le,we,Xe,Re,qe,Je){we===void 0&&(we=1),Re===void 0&&(Re=0),qe===void 0&&(qe=0),Je===void 0&&(Je=0),A(Z,ne,ae,_e,Le,we,Xe,null,Re,qe,Je)}function A(Z,ne,ae,_e,Le,we,Xe,Re,qe,Je,ht){we===void 0&&(we=1),qe===void 0&&(qe=0),Je===void 0&&(Je=0),ht===void 0&&(ht=0);for(var it=x(Z,ne,ae,_e,Le,we),Oe=new Uint8Array(it.length*4),Ee=0;Ee<it.length;Ee++)Oe[Ee*4+ht]=it[Ee];_(Xe,Oe,qe,Je,Z,ne,1<<3-ht,Re)}function k(Z,ne,ae,_e,Le,we){var Xe=Le-ae,Re=we-_e,qe=Xe*Xe+Re*Re,Je=qe?Math.max(0,Math.min(1,((Z-ae)*Xe+(ne-_e)*Re)/qe)):0,ht=Z-(ae+Je*Xe),it=ne-(_e+Je*Re);return ht*ht+it*it}var O=Object.freeze({__proto__:null,generate:x,generateIntoCanvas:w,generateIntoFramebuffer:A}),D="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",L="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",z="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",H=new Float32Array([0,0,2,0,0,2]),U=null,P=!1,K={},ee=new WeakMap;function re(Z){if(!P&&!ce(Z))throw new Error("WebGL generation not supported")}function ie(Z,ne,ae,_e,Le,we,Xe){if(we===void 0&&(we=1),Xe===void 0&&(Xe=null),!Xe&&(Xe=U,!Xe)){var Re=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!Re)throw new Error("OffscreenCanvas or DOM canvas not supported");Xe=U=Re.getContext("webgl",{depth:!1})}re(Xe);var qe=new Uint8Array(Z*ne*4);m(Xe,function(Oe){var Ee=Oe.gl,Fe=Oe.withTexture,rt=Oe.withTextureFramebuffer;Fe("readable",function(nt,dt){Ee.texImage2D(Ee.TEXTURE_2D,0,Ee.RGBA,Z,ne,0,Ee.RGBA,Ee.UNSIGNED_BYTE,null),rt(nt,dt,function(It){oe(Z,ne,ae,_e,Le,we,Ee,It,0,0,0),Ee.readPixels(0,0,Z,ne,Ee.RGBA,Ee.UNSIGNED_BYTE,qe)})})});for(var Je=new Uint8Array(Z*ne),ht=0,it=0;ht<qe.length;ht+=4)Je[it++]=qe[ht];return Je}function de(Z,ne,ae,_e,Le,we,Xe,Re,qe,Je){we===void 0&&(we=1),Re===void 0&&(Re=0),qe===void 0&&(qe=0),Je===void 0&&(Je=0),oe(Z,ne,ae,_e,Le,we,Xe,null,Re,qe,Je)}function oe(Z,ne,ae,_e,Le,we,Xe,Re,qe,Je,ht){we===void 0&&(we=1),qe===void 0&&(qe=0),Je===void 0&&(Je=0),ht===void 0&&(ht=0),re(Xe);var it=[];o(ae,function(Oe,Ee,Fe,rt){it.push(Oe,Ee,Fe,rt)}),it=new Float32Array(it),m(Xe,function(Oe){var Ee=Oe.gl,Fe=Oe.isWebGL2,rt=Oe.getExtension,nt=Oe.withProgram,dt=Oe.withTexture,It=Oe.withTextureFramebuffer,mt=Oe.handleContextLoss;if(dt("rawDistances",function(wt,$t){(Z!==wt._lastWidth||ne!==wt._lastHeight)&&Ee.texImage2D(Ee.TEXTURE_2D,0,Ee.RGBA,wt._lastWidth=Z,wt._lastHeight=ne,0,Ee.RGBA,Ee.UNSIGNED_BYTE,null),nt("main",D,L,function(pt){var Te=pt.setAttribute,te=pt.setUniform,ke=!Fe&&rt("ANGLE_instanced_arrays"),ot=!Fe&&rt("EXT_blend_minmax");Te("aUV",2,Ee.STATIC_DRAW,0,H),Te("aLineSegment",4,Ee.DYNAMIC_DRAW,1,it),te.apply(void 0,["4f","uGlyphBounds"].concat(_e)),te("1f","uMaxDistance",Le),te("1f","uExponent",we),It(wt,$t,function(ft){Ee.enable(Ee.BLEND),Ee.colorMask(!0,!0,!0,!0),Ee.viewport(0,0,Z,ne),Ee.scissor(0,0,Z,ne),Ee.blendFunc(Ee.ONE,Ee.ONE),Ee.blendEquationSeparate(Ee.FUNC_ADD,Fe?Ee.MAX:ot.MAX_EXT),Ee.clear(Ee.COLOR_BUFFER_BIT),Fe?Ee.drawArraysInstanced(Ee.TRIANGLES,0,3,it.length/4):ke.drawArraysInstancedANGLE(Ee.TRIANGLES,0,3,it.length/4)})}),nt("post",l,z,function(pt){pt.setAttribute("aUV",2,Ee.STATIC_DRAW,0,H),pt.setUniform("1i","tex",$t),Ee.bindFramebuffer(Ee.FRAMEBUFFER,Re),Ee.disable(Ee.BLEND),Ee.colorMask(ht===0,ht===1,ht===2,ht===3),Ee.viewport(qe,Je,Z,ne),Ee.scissor(qe,Je,Z,ne),Ee.drawArrays(Ee.TRIANGLES,0,3)})}),Ee.isContextLost())throw mt(),new Error("webgl context lost")})}function ce(Z){var ne=!Z||Z===U?K:Z.canvas||Z,ae=ee.get(ne);if(ae===void 0){P=!0;var _e=null;try{var Le=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],we=ie(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Z);ae=we&&Le.length===we.length&&we.every(function(Xe,Re){return Xe===Le[Re]}),ae||(_e="bad trial run results",console.info(Le,we))}catch(Xe){ae=!1,_e=Xe.message}_e&&console.warn("WebGL SDF generation not supported:",_e),P=!1,ee.set(ne,ae)}return ae}var me=Object.freeze({__proto__:null,generate:ie,generateIntoCanvas:de,generateIntoFramebuffer:oe,isSupported:ce});function Ae(Z,ne,ae,_e,Le,we){Le===void 0&&(Le=Math.max(_e[2]-_e[0],_e[3]-_e[1])/2),we===void 0&&(we=1);try{return ie.apply(me,arguments)}catch(Xe){return console.info("WebGL SDF generation failed, falling back to JS",Xe),x.apply(O,arguments)}}function j(Z,ne,ae,_e,Le,we,Xe,Re,qe,Je){Le===void 0&&(Le=Math.max(_e[2]-_e[0],_e[3]-_e[1])/2),we===void 0&&(we=1),Re===void 0&&(Re=0),qe===void 0&&(qe=0),Je===void 0&&(Je=0);try{return de.apply(me,arguments)}catch(ht){return console.info("WebGL SDF generation failed, falling back to JS",ht),w.apply(O,arguments)}}return e.forEachPathCommand=s,e.generate=Ae,e.generateIntoCanvas=j,e.javascript=O,e.pathToLineSegments=o,e.webgl=me,e.webglUtils=S,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function T1e(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},s={};i.L=1,s[1]="L",Object.keys(t).forEach(function(mt,wt){i[mt]=1<<wt+1,s[i[mt]]=mt}),Object.freeze(i);var o=i.LRI|i.RLI|i.FSI,l=i.L|i.R|i.AL,u=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,h=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,d=i.S|i.WS|i.B|o|i.PDI|h,m=null;function _(){if(!m){m=new Map;var mt=function($t){if(t.hasOwnProperty($t)){var pt=0;t[$t].split(",").forEach(function(Te){var te=Te.split("+"),ke=te[0],ot=te[1];ke=parseInt(ke,36),ot=ot?parseInt(ot,36):0,m.set(pt+=ke,i[$t]);for(var ft=0;ft<ot;ft++)m.set(++pt,i[$t])})}};for(var wt in t)mt(wt)}}function v(mt){return _(),m.get(mt.codePointAt(0))||i.L}function S(mt){return s[v(mt)]}var x={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function w(mt,wt){var $t=36,pt=0,Te=new Map,te=wt&&new Map,ke;return mt.split(",").forEach(function ot(ft){if(ft.indexOf("+")!==-1)for(var xt=+ft;xt--;)ot(ke);else{ke=ft;var at=ft.split(">"),Ge=at[0],Ce=at[1];Ge=String.fromCodePoint(pt+=parseInt(Ge,$t)),Ce=String.fromCodePoint(pt+=parseInt(Ce,$t)),Te.set(Ge,Ce),wt&&te.set(Ce,Ge)}}),{map:Te,reverseMap:te}}var A,k,O;function D(){if(!A){var mt=w(x.pairs,!0),wt=mt.map,$t=mt.reverseMap;A=wt,k=$t,O=w(x.canonical,!1).map}}function L(mt){return D(),A.get(mt)||null}function z(mt){return D(),k.get(mt)||null}function H(mt){return D(),O.get(mt)||null}var U=i.L,P=i.R,K=i.EN,ee=i.ES,re=i.ET,ie=i.AN,de=i.CS,oe=i.B,ce=i.S,me=i.ON,Ae=i.BN,j=i.NSM,Z=i.AL,ne=i.LRO,ae=i.RLO,_e=i.LRE,Le=i.RLE,we=i.PDF,Xe=i.LRI,Re=i.RLI,qe=i.FSI,Je=i.PDI;function ht(mt,wt){for(var $t=125,pt=new Uint32Array(mt.length),Te=0;Te<mt.length;Te++)pt[Te]=v(mt[Te]);var te=new Map;function ke(fi,ii){var zn=pt[fi];pt[fi]=ii,te.set(zn,te.get(zn)-1),zn&u&&te.set(u,te.get(u)-1),te.set(ii,(te.get(ii)||0)+1),ii&u&&te.set(u,(te.get(u)||0)+1)}for(var ot=new Uint8Array(mt.length),ft=new Map,xt=[],at=null,Ge=0;Ge<mt.length;Ge++)at||xt.push(at={start:Ge,end:mt.length-1,level:wt==="rtl"?1:wt==="ltr"?0:oo(Ge,!1)}),pt[Ge]&oe&&(at.end=Ge,at=null);for(var Ce=Le|_e|ae|ne|o|Je|we|oe,X=function(fi){return fi+(fi&1?1:2)},Q=function(fi){return fi+(fi&1?2:1)},le=0;le<xt.length;le++){at=xt[le];var $e=[{_level:at.level,_override:0,_isolate:0}],We=void 0,Ft=0,Be=0,Ut=0;te.clear();for(var ut=at.start;ut<=at.end;ut++){var Ht=pt[ut];if(We=$e[$e.length-1],te.set(Ht,(te.get(Ht)||0)+1),Ht&u&&te.set(u,(te.get(u)||0)+1),Ht&Ce)if(Ht&(Le|_e)){ot[ut]=We._level;var zt=(Ht===Le?Q:X)(We._level);zt<=$t&&!Ft&&!Be?$e.push({_level:zt,_override:0,_isolate:0}):Ft||Be++}else if(Ht&(ae|ne)){ot[ut]=We._level;var En=(Ht===ae?Q:X)(We._level);En<=$t&&!Ft&&!Be?$e.push({_level:En,_override:Ht&ae?P:U,_isolate:0}):Ft||Be++}else if(Ht&o){Ht&qe&&(Ht=oo(ut+1,!0)===1?Re:Xe),ot[ut]=We._level,We._override&&ke(ut,We._override);var Pr=(Ht===Re?Q:X)(We._level);Pr<=$t&&Ft===0&&Be===0?(Ut++,$e.push({_level:Pr,_override:0,_isolate:1,_isolInitIndex:ut})):Ft++}else if(Ht&Je){if(Ft>0)Ft--;else if(Ut>0){for(Be=0;!$e[$e.length-1]._isolate;)$e.pop();var Er=$e[$e.length-1]._isolInitIndex;Er!=null&&(ft.set(Er,ut),ft.set(ut,Er)),$e.pop(),Ut--}We=$e[$e.length-1],ot[ut]=We._level,We._override&&ke(ut,We._override)}else Ht&we?(Ft===0&&(Be>0?Be--:!We._isolate&&$e.length>1&&($e.pop(),We=$e[$e.length-1])),ot[ut]=We._level):Ht&oe&&(ot[ut]=at.level);else ot[ut]=We._level,We._override&&Ht!==Ae&&ke(ut,We._override)}for(var Kr=[],or=null,Wn=at.start;Wn<=at.end;Wn++){var q=pt[Wn];if(!(q&h)){var ge=ot[Wn],Ne=q&o,tt=q===Je;or&&ge===or._level?(or._end=Wn,or._endsWithIsolInit=Ne):Kr.push(or={_start:Wn,_end:Wn,_level:ge,_startsWithPDI:tt,_endsWithIsolInit:Ne})}}for(var kt=[],qt=0;qt<Kr.length;qt++){var _n=Kr[qt];if(!_n._startsWithPDI||_n._startsWithPDI&&!ft.has(_n._start)){for(var Ie=[or=_n],lt=void 0;or&&or._endsWithIsolInit&&(lt=ft.get(or._end))!=null;)for(var Et=qt+1;Et<Kr.length;Et++)if(Kr[Et]._start===lt){Ie.push(or=Kr[Et]);break}for(var gt=[],Nt=0;Nt<Ie.length;Nt++)for(var yn=Ie[Nt],Pn=yn._start;Pn<=yn._end;Pn++)gt.push(Pn);for(var ir=ot[gt[0]],yr=at.level,ni=gt[0]-1;ni>=0;ni--)if(!(pt[ni]&h)){yr=ot[ni];break}var $r=gt[gt.length-1],Ir=ot[$r],ji=at.level;if(!(pt[$r]&o)){for(var Yo=$r+1;Yo<=at.end;Yo++)if(!(pt[Yo]&h)){ji=ot[Yo];break}}kt.push({_seqIndices:gt,_sosType:Math.max(yr,ir)%2?P:U,_eosType:Math.max(ji,Ir)%2?P:U})}}for(var Oo=0;Oo<kt.length;Oo++){var cl=kt[Oo],Kt=cl._seqIndices,dr=cl._sosType,ga=cl._eosType;if(te.get(j))for(var Ko=0;Ko<Kt.length;Ko++){var ms=Kt[Ko];if(pt[ms]&j){for(var gs=dr,di=Ko-1;di>=0;di--)if(!(pt[Kt[di]]&h)){gs=pt[Kt[di]];break}ke(ms,gs&(o|Je)?me:gs)}}if(te.get(K))for(var pr=0;pr<Kt.length;pr++){var fn=Kt[pr];if(pt[fn]&K)for(var ur=pr-1;ur>=-1;ur--){var wr=ur===-1?dr:pt[Kt[ur]];if(wr&l){wr===Z&&ke(fn,ie);break}}}if(te.get(Z))for(var nr=0;nr<Kt.length;nr++){var pi=Kt[nr];pt[pi]&Z&&ke(pi,P)}if(te.get(ee)||te.get(de))for(var Zi=1;Zi<Kt.length-1;Zi++){var Xr=Kt[Zi];if(pt[Xr]&(ee|de)){for(var Fi=0,Ua=0,hl=Zi-1;hl>=0&&(Fi=pt[Kt[hl]],!!(Fi&h));hl--);for(var vc=Zi+1;vc<Kt.length&&(Ua=pt[Kt[vc]],!!(Ua&h));vc++);Fi===Ua&&(pt[Xr]===ee?Fi===K:Fi&(K|ie))&&ke(Xr,Fi)}}if(te.get(K))for(var Yu=0;Yu<Kt.length;Yu++){var Os=Kt[Yu];if(pt[Os]&K){for(var Lo=Yu-1;Lo>=0&&pt[Kt[Lo]]&(re|h);Lo--)ke(Kt[Lo],K);for(var hu=Yu+1;hu<Kt.length&&pt[Kt[hu]]&(re|h);hu++)ke(Kt[hu],K)}}if(te.get(re)||te.get(ee)||te.get(de))for(var Ul=0;Ul<Kt.length;Ul++){var _h=Kt[Ul];if(pt[_h]&(re|ee|de)){ke(_h,me);for(var Jo=Ul-1;Jo>=0&&pt[Kt[Jo]]&h;Jo--)ke(Kt[Jo],me);for(var rr=Ul+1;rr<Kt.length&&pt[Kt[rr]]&h;rr++)ke(Kt[rr],me)}}if(te.get(K))for(var Ui=0,Vc=dr;Ui<Kt.length;Ui++){var vh=Kt[Ui],yc=pt[vh];yc&K?Vc===U&&ke(vh,U):yc&l&&(Vc=yc)}if(te.get(u)){var dl=P|K|ie,du=dl|U,pl=[];{for(var fl=[],qn=0;qn<Kt.length;qn++)if(pt[Kt[qn]]&u){var Zn=mt[Kt[qn]],ml=void 0;if(L(Zn)!==null)if(fl.length<63)fl.push({char:Zn,seqIndex:qn});else break;else if((ml=z(Zn))!==null)for(var za=fl.length-1;za>=0;za--){var _a=fl[za].char;if(_a===ml||_a===z(H(Zn))||L(H(_a))===Zn){pl.push([fl[za].seqIndex,qn]),fl.length=za;break}}}pl.sort(function(fi,ii){return fi[0]-ii[0]})}for(var zl=0;zl<pl.length;zl++){for(var $i=pl[zl],zi=$i[0],gl=$i[1],kd=!1,Ls=0,pu=zi+1;pu<gl;pu++){var Do=Kt[pu];if(pt[Do]&du){kd=!0;var Hl=pt[Do]&dl?P:U;if(Hl===Ha(Do)){Ls=Hl;break}}}if(kd&&!Ls){Ls=dr;for(var Yr=zi-1;Yr>=0;Yr--){var fr=Kt[Yr];if(pt[fr]&du){var Xi=pt[fr]&dl?P:U;Xi!==Ha(fr)?Ls=Xi:Ls=Ha(fr);break}}}if(Ls){if(pt[Kt[zi]]=pt[Kt[gl]]=Ls,Ls!==Ha(Kt[zi])){for(var Ds=zi+1;Ds<Kt.length;Ds++)if(!(pt[Kt[Ds]]&h)){v(mt[Kt[Ds]])&j&&(pt[Kt[Ds]]=Ls);break}}if(Ls!==Ha(Kt[gl])){for(var fu=gl+1;fu<Kt.length;fu++)if(!(pt[Kt[fu]]&h)){v(mt[Kt[fu]])&j&&(pt[Kt[fu]]=Ls);break}}}}for(var Gl=0;Gl<Kt.length;Gl++)if(pt[Kt[Gl]]&u){for(var jc=Gl,Qo=Gl,qo=dr,mu=Gl-1;mu>=0;mu--)if(pt[Kt[mu]]&h)jc=mu;else{qo=pt[Kt[mu]]&dl?P:U;break}for(var Jr=ga,_s=Gl+1;_s<Kt.length;_s++)if(pt[Kt[_s]]&(u|h))Qo=_s;else{Jr=pt[Kt[_s]]&dl?P:U;break}for(var Ri=jc;Ri<=Qo;Ri++)pt[Kt[Ri]]=qo===Jr?qo:Ha(Kt[Ri]);Gl=Qo}}}for(var ri=at.start;ri<=at.end;ri++){var va=ot[ri],Hi=pt[ri];if(va&1?Hi&(U|K|ie)&&ot[ri]++:Hi&P?ot[ri]++:Hi&(ie|K)&&(ot[ri]+=2),Hi&h&&(ot[ri]=ri===0?at.level:ot[ri-1]),ri===at.end||v(mt[ri])&(ce|oe))for(var gu=ri;gu>=0&&v(mt[gu])&d;gu--)ot[gu]=at.level}}return{levels:ot,paragraphs:xt};function oo(fi,ii){for(var zn=fi;zn<mt.length;zn++){var Qr=pt[zn];if(Qr&(P|Z))return 1;if(Qr&(oe|U)||ii&&Qr===Je)return 0;if(Qr&o){var xi=_u(zn);zn=xi===-1?mt.length:xi}}return 0}function _u(fi){for(var ii=1,zn=fi+1;zn<mt.length;zn++){var Qr=pt[zn];if(Qr&oe)break;if(Qr&Je){if(--ii===0)return zn}else Qr&o&&ii++}return-1}function Ha(fi){return ot[fi]&1?P:U}}var it="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Oe;function Ee(){if(!Oe){var mt=w(it,!0),wt=mt.map,$t=mt.reverseMap;$t.forEach(function(pt,Te){wt.set(Te,pt)}),Oe=wt}}function Fe(mt){return Ee(),Oe.get(mt)||null}function rt(mt,wt,$t,pt){var Te=mt.length;$t=Math.max(0,$t==null?0:+$t),pt=Math.min(Te-1,pt==null?Te-1:+pt);for(var te=new Map,ke=$t;ke<=pt;ke++)if(wt[ke]&1){var ot=Fe(mt[ke]);ot!==null&&te.set(ke,ot)}return te}function nt(mt,wt,$t,pt){var Te=mt.length;$t=Math.max(0,$t==null?0:+$t),pt=Math.min(Te-1,pt==null?Te-1:+pt);var te=[];return wt.paragraphs.forEach(function(ke){var ot=Math.max($t,ke.start),ft=Math.min(pt,ke.end);if(ot<ft){for(var xt=wt.levels.slice(ot,ft+1),at=ft;at>=ot&&v(mt[at])&d;at--)xt[at]=ke.level;for(var Ge=ke.level,Ce=1/0,X=0;X<xt.length;X++){var Q=xt[X];Q>Ge&&(Ge=Q),Q<Ce&&(Ce=Q|1)}for(var le=Ge;le>=Ce;le--)for(var $e=0;$e<xt.length;$e++)if(xt[$e]>=le){for(var We=$e;$e+1<xt.length&&xt[$e+1]>=le;)$e++;$e>We&&te.push([We+$t,$e+$t])}}}),te}function dt(mt,wt,$t,pt){var Te=It(mt,wt,$t,pt),te=[].concat(mt);return Te.forEach(function(ke,ot){te[ot]=(wt.levels[ke]&1?Fe(mt[ke]):null)||mt[ke]}),te.join("")}function It(mt,wt,$t,pt){for(var Te=nt(mt,wt,$t,pt),te=[],ke=0;ke<mt.length;ke++)te[ke]=ke;return Te.forEach(function(ot){for(var ft=ot[0],xt=ot[1],at=te.slice(ft,xt+1),Ge=at.length;Ge--;)te[xt-Ge]=at[Ge]}),te}return e.closingToOpeningBracket=z,e.getBidiCharType=v,e.getBidiCharTypeName=S,e.getCanonicalBracket=H,e.getEmbeddingLevels=ht,e.getMirroredCharacter=Fe,e.getMirroredCharactersMap=rt,e.getReorderSegments=nt,e.getReorderedIndices=It,e.getReorderedString=dt,e.openingToClosingBracket=L,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const iX=/\bvoid\s+main\s*\(\s*\)\s*{/g;function cN(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,s){let o=Si[s];return o?cN(o):i}return n.replace(e,t)}const zh=[];for(let n=0;n<256;n++)zh[n]=(n<16?"0":"")+n.toString(16);function S1e(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(zh[n&255]+zh[n>>8&255]+zh[n>>16&255]+zh[n>>24&255]+"-"+zh[e&255]+zh[e>>8&255]+"-"+zh[e>>16&15|64]+zh[e>>24&255]+"-"+zh[t&63|128]+zh[t>>8&255]+"-"+zh[t>>16&255]+zh[t>>24&255]+zh[i&255]+zh[i>>8&255]+zh[i>>16&255]+zh[i>>24&255]).toUpperCase()}const yy=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let s in i)i.hasOwnProperty(s)&&(n[s]=i[s])}return n},E1e=Date.now(),B5=new WeakMap,P5=new Map;let $1e=1e10;function hN(n,e){const t=M1e(e);let i=B5.get(n);if(i||B5.set(n,i=Object.create(null)),i[t])return new i[t];const s=`_onBeforeCompile${t}`,o=function(d){n.onBeforeCompile.call(this,d);const m=this.customProgramCacheKey()+"|"+d.vertexShader+"|"+d.fragmentShader;let _=P5[m];if(!_){const v=x1e(d,e,t);_=P5[m]=v}d.vertexShader=_.vertexShader,d.fragmentShader=_.fragmentShader,yy(d.uniforms,this.uniforms),e.timeUniform&&(d.uniforms[e.timeUniform]={get value(){return Date.now()-E1e}}),this[s]&&this[s](d)},l=function(){return u(e.chained?n:n.clone())},u=function(d){const m=Object.create(d,h);return Object.defineProperty(m,"baseMaterial",{value:n}),Object.defineProperty(m,"id",{value:$1e++}),m.uuid=S1e(),m.uniforms=yy({},d.uniforms,e.uniforms),m.defines=yy({},d.defines,e.defines),m.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",m.extensions=yy({},d.extensions,e.extensions),m._listeners=void 0,m},h={constructor:{value:l},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return o},set(d){this[s]=d}},copy:{writable:!0,configurable:!0,value:function(d){return n.copy.call(this,d),!n.isShaderMaterial&&!n.isDerivedMaterial&&(yy(this.extensions,d.extensions),yy(this.defines,d.defines),yy(this.uniforms,Vx.clone(d.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const d=new n.constructor;return u(d).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let d=this._depthMaterial;return d||(d=this._depthMaterial=hN(n.isDerivedMaterial?n.getDepthMaterial():new Xx({depthPacking:VT}),e),d.defines.IS_DEPTH_MATERIAL="",d.uniforms=this.uniforms),d}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let d=this._distanceMaterial;return d||(d=this._distanceMaterial=hN(n.isDerivedMaterial?n.getDistanceMaterial():new MR,e),d.defines.IS_DISTANCE_MATERIAL="",d.uniforms=this.uniforms),d}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:d,_distanceMaterial:m}=this;d&&d.dispose(),m&&m.dispose(),n.dispose.call(this)}}};return i[t]=l,new l}function x1e({vertexShader:n,fragmentShader:e},t,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:l,vertexTransform:u,fragmentDefs:h,fragmentMainIntro:d,fragmentMainOutro:m,fragmentColorTransform:_,customRewriter:v,timeUniform:S}=t;if(s=s||"",o=o||"",l=l||"",h=h||"",d=d||"",m=m||"",(u||v)&&(n=cN(n)),(_||v)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=cN(e)),v){let x=v({vertexShader:n,fragmentShader:e});n=x.vertexShader,e=x.fragmentShader}if(_){let x=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,w=>(x.push(w),"")),m=`${_}
${x.join(`
`)}
${m}`}if(S){const x=`
uniform float ${S};
`;s=x+s,h=x+h}return u&&(n=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${n}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${u}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,n=n.replace(/\b(position|normal|uv)\b/g,(x,w,A,k)=>/\battribute\s+vec[23]\s+$/.test(k.substr(0,A))?w:`troika_${w}_${i}`)),n=F5(n,i,s,o,l),e=F5(e,i,h,d,m),{vertexShader:n,fragmentShader:e}}function F5(n,e,t,i,s){return(i||s||t)&&(n=n.replace(iX,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${s}
}`),n}function w1e(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let C1e=0;const U5=new Map;function M1e(n){const e=JSON.stringify(n,w1e);let t=U5.get(e);return t==null&&U5.set(e,t=++C1e),t}function A1e(n,e,t){const{defaultFontURL:i}=t,s=Object.create(null),o=1/0,l=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,u="[^\\S\\u00A0]",h=new RegExp(`${u}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function d(O,D){function L(){const z=H=>{console.error(`Failure loading font ${O}${O===i?"":"; trying fallback"}`,H),O!==i&&(O=i,L())};try{const H=new XMLHttpRequest;H.open("get",O,!0),H.responseType="arraybuffer",H.onload=function(){if(H.status>=400)z(new Error(H.statusText));else if(H.status>0)try{const U=n(H.response);D(U)}catch(U){z(U)}},H.onerror=z,H.send()}catch(H){z(H)}}L()}function m(O,D){O||(O=i);let L=s[O];L?L.pending?L.pending.push(D):D(L):(s[O]={pending:[D]},d(O,z=>{let H=s[O].pending;s[O]=z,H.forEach(U=>U(z))}))}function _({text:O="",font:D=i,sdfGlyphSize:L=64,fontSize:z=1,letterSpacing:H=0,lineHeight:U="normal",maxWidth:P=o,direction:K,textAlign:ee="left",textIndent:re=0,whiteSpace:ie="normal",overflowWrap:de="normal",anchorX:oe=0,anchorY:ce=0,includeCaretPositions:me=!1,chunkedBoundsSize:Ae=8192,colorRanges:j=null},Z,ne=!1){const ae=w(),_e={fontLoad:0,typesetting:0};O.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),O=O.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),z=+z,H=+H,P=+P,U=U||"normal",re=+re,m(D,Le=>{const we=isFinite(P);let Xe=null,Re=null,qe=null,Je=null,ht=null,it=null,Oe=null,Ee=0,Fe=0,rt=ie!=="nowrap";const{ascender:nt,descender:dt,unitsPerEm:It,lineGap:mt,capHeight:wt,xHeight:$t}=Le;_e.fontLoad=w()-ae;const pt=w(),Te=z/It;U==="normal"&&(U=(nt-dt+mt)/It),U=U*z;const te=(U-(nt-dt)*Te)/2,ke=-(nt*Te+te),ot=Math.min(U,(nt-dt)*Te),ft=(nt+dt)/2*Te-ot/2;let xt=re,at=new A;const Ge=[at];Le.forEachGlyph(O,z,H,(Q,le,$e)=>{const We=O.charAt($e),Ft=Q.advanceWidth*Te,Be=at.count;let Ut;if("isEmpty"in Q||(Q.isWhitespace=!!We&&new RegExp(u).test(We),Q.canBreakAfter=!!We&&h.test(We),Q.isEmpty=Q.xMin===Q.xMax||Q.yMin===Q.yMax||l.test(We)),!Q.isWhitespace&&!Q.isEmpty&&Fe++,rt&&we&&!Q.isWhitespace&&le+Ft+xt>P&&Be){if(at.glyphAt(Be-1).glyphObj.canBreakAfter)Ut=new A,xt=-le;else for(let Ht=Be;Ht--;)if(Ht===0&&de==="break-word"){Ut=new A,xt=-le;break}else if(at.glyphAt(Ht).glyphObj.canBreakAfter){Ut=at.splitAt(Ht+1);const zt=Ut.glyphAt(0).x;xt-=zt;for(let En=Ut.count;En--;)Ut.glyphAt(En).x-=zt;break}Ut&&(at.isSoftWrapped=!0,at=Ut,Ge.push(at),Ee=P)}let ut=at.glyphAt(at.count);ut.glyphObj=Q,ut.x=le+xt,ut.width=Ft,ut.charIndex=$e,We===`
`&&(at=new A,Ge.push(at),xt=-(le+Ft+H*z)+re)}),Ge.forEach(Q=>{for(let le=Q.count;le--;){let{glyphObj:$e,x:We,width:Ft}=Q.glyphAt(le);if(!$e.isWhitespace){Q.width=We+Ft,Q.width>Ee&&(Ee=Q.width);return}}});let Ce=0,X=0;if(oe&&(typeof oe=="number"?Ce=-oe:typeof oe=="string"&&(Ce=-Ee*(oe==="left"?0:oe==="center"?.5:oe==="right"?1:S(oe)))),ce){if(typeof ce=="number")X=-ce;else if(typeof ce=="string"){let Q=Ge.length*U;X=ce==="top"?0:ce==="top-baseline"?-ke:ce==="top-cap"?-ke-wt*Te:ce==="top-ex"?-ke-$t*Te:ce==="middle"?Q/2:ce==="bottom"?Q:ce==="bottom-baseline"?Q-te+dt*Te:S(ce)*Q}}if(!ne){const Q=e.getEmbeddingLevels(O,K);Xe=new Uint16Array(Fe),Re=new Float32Array(Fe*2),qe={},it=[o,o,-o,-o],Oe=[];let le=ke;me&&(ht=new Float32Array(O.length*3)),j&&(Je=new Uint8Array(Fe*3));let $e=0,We=-1,Ft=-1,Be,Ut;if(Ge.forEach((ut,Ht)=>{let{count:zt,width:En}=ut;if(zt>0){let Pr=0;for(let ge=zt;ge--&&ut.glyphAt(ge).glyphObj.isWhitespace;)Pr++;let Er=0,Kr=0;if(ee==="center")Er=(Ee-En)/2;else if(ee==="right")Er=Ee-En;else if(ee==="justify"&&ut.isSoftWrapped){let ge=0;for(let Ne=zt-Pr;Ne--;)ut.glyphAt(Ne).glyphObj.isWhitespace&&ge++;Kr=(Ee-En)/ge}if(Kr||Er){let ge=0;for(let Ne=0;Ne<zt;Ne++){let tt=ut.glyphAt(Ne);const kt=tt.glyphObj;tt.x+=Er+ge,Kr!==0&&kt.isWhitespace&&Ne<zt-Pr&&(ge+=Kr,tt.width+=Kr)}}const or=e.getReorderSegments(O,Q,ut.glyphAt(0).charIndex,ut.glyphAt(ut.count-1).charIndex);for(let ge=0;ge<or.length;ge++){const[Ne,tt]=or[ge];let kt=1/0,qt=-1/0;for(let _n=0;_n<zt;_n++)if(ut.glyphAt(_n).charIndex>=Ne){let Ie=_n,lt=_n;for(;lt<zt;lt++){let Et=ut.glyphAt(lt);if(Et.charIndex>tt)break;lt<zt-Pr&&(kt=Math.min(kt,Et.x),qt=Math.max(qt,Et.x+Et.width))}for(let Et=Ie;Et<lt;Et++){const gt=ut.glyphAt(Et);gt.x=qt-(gt.x+gt.width-kt)}break}}let Wn;const q=ge=>Wn=ge;for(let ge=0;ge<zt;ge++){let Ne=ut.glyphAt(ge);Wn=Ne.glyphObj;const tt=Wn.index,kt=Q.levels[Ne.charIndex]&1;if(kt){const qt=e.getMirroredCharacter(O[Ne.charIndex]);qt&&Le.forEachGlyph(qt,0,0,q)}if(me){const{charIndex:qt}=Ne,_n=Ne.x+Ce,Ie=Ne.x+Ne.width+Ce;ht[qt*3]=kt?Ie:_n,ht[qt*3+1]=kt?_n:Ie,ht[qt*3+2]=le+ft+X;const lt=qt-We;lt>1&&x(ht,We,lt),We=qt}if(j){const{charIndex:qt}=Ne;for(;qt>Ft;)Ft++,j.hasOwnProperty(Ft)&&(Ut=j[Ft])}if(!Wn.isWhitespace&&!Wn.isEmpty){const qt=$e++;qe[tt]||(qe[tt]={path:Wn.path,pathBounds:[Wn.xMin,Wn.yMin,Wn.xMax,Wn.yMax]});const _n=Ne.x+Ce,Ie=le+X;Re[qt*2]=_n,Re[qt*2+1]=Ie;const lt=_n+Wn.xMin*Te,Et=Ie+Wn.yMin*Te,gt=_n+Wn.xMax*Te,Nt=Ie+Wn.yMax*Te;lt<it[0]&&(it[0]=lt),Et<it[1]&&(it[1]=Et),gt>it[2]&&(it[2]=gt),Nt>it[3]&&(it[3]=Nt),qt%Ae===0&&(Be={start:qt,end:qt,rect:[o,o,-o,-o]},Oe.push(Be)),Be.end++;const yn=Be.rect;if(lt<yn[0]&&(yn[0]=lt),Et<yn[1]&&(yn[1]=Et),gt>yn[2]&&(yn[2]=gt),Nt>yn[3]&&(yn[3]=Nt),Xe[qt]=tt,j){const Pn=qt*3;Je[Pn]=Ut>>16&255,Je[Pn+1]=Ut>>8&255,Je[Pn+2]=Ut&255}}}}le-=U}),ht){const ut=O.length-We;ut>1&&x(ht,We,ut)}}_e.typesetting=w()-pt,Z({glyphIds:Xe,glyphPositions:Re,glyphData:qe,caretPositions:ht,caretHeight:ot,glyphColors:Je,chunkedBounds:Oe,fontSize:z,unitsPerEm:It,ascender:nt*Te,descender:dt*Te,capHeight:wt*Te,xHeight:$t*Te,lineHeight:U,topBaseline:ke,blockBounds:[Ce,X-Ge.length*U,Ce+Ee,X],visibleBounds:it,timings:_e})})}function v(O,D){_(O,L=>{const[z,H,U,P]=L.blockBounds;D({width:U-z,height:P-H})},{metricsOnly:!0})}function S(O){let D=O.match(/^([\d.]+)%$/),L=D?parseFloat(D[1]):NaN;return isNaN(L)?0:L/100}function x(O,D,L){const z=O[D*3],H=O[D*3+1],U=O[D*3+2],P=(H-z)/L;for(let K=0;K<L;K++){const ee=(D+K)*3;O[ee]=z+P*K,O[ee+1]=z+P*(K+1),O[ee+2]=U}}function w(){return(self.performance||Date).now()}function A(){this.data=[]}const k=["glyphObj","x","width","charIndex"];return A.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/k.length)},glyphAt(O){let D=A.flyweight;return D.data=this.data,D.index=O,D},splitAt(O){let D=new A;return D.data=this.data.splice(O*k.length),D}},A.flyweight=k.reduce((O,D,L,z)=>(Object.defineProperty(O,D,{get(){return this.data[this.index*k.length+L]},set(H){this.data[this.index*k.length+L]=H}}),O),{data:null,index:0}),{typeset:_,measure:v,loadFont:m}}const sb=()=>(self.performance||Date).now(),zR=rX();let z5;function I1e(n,e,t,i,s,o,l,u,h,d,m=!0){return m?k1e(n,e,t,i,s,o,l,u,h,d).then(null,_=>(z5||(console.warn("WebGL SDF generation failed, falling back to JS",_),z5=!0),G5(n,e,t,i,s,o,l,u,h,d))):G5(n,e,t,i,s,o,l,u,h,d)}const sA=[],R1e=5;let dN=0;function sX(){const n=sb();for(;sA.length&&sb()-n<R1e;)sA.shift()();dN=sA.length?setTimeout(sX,0):0}const k1e=(...n)=>new Promise((e,t)=>{sA.push(()=>{const i=sb();try{zR.webgl.generateIntoCanvas(...n),e({timing:sb()-i})}catch(s){t(s)}}),dN||(dN=setTimeout(sX,0))}),O1e=4,L1e=2e3,H5={};let D1e=0;function G5(n,e,t,i,s,o,l,u,h,d){const m="TroikaTextSDFGenerator_JS_"+D1e++%O1e;let _=H5[m];return _||(_=H5[m]={workerModule:qx({name:m,workerId:m,dependencies:[rX,sb],init(v,S){const x=v().javascript.generate;return function(...w){const A=S();return{textureData:x(...w),timing:S()-A}}},getTransferables(v){return[v.textureData.buffer]}}),requests:0,idleTimer:null}),_.requests++,clearTimeout(_.idleTimer),_.workerModule(n,e,t,i,s,o).then(({textureData:v,timing:S})=>{const x=sb(),w=new Uint8Array(v.length*4);for(let A=0;A<v.length;A++)w[A*4+d]=v[A];return zR.webglUtils.renderImageData(l,w,u,h,n,e,1<<3-d),S+=sb()-x,--_.requests===0&&(_.idleTimer=setTimeout(()=>{y1e(m)},L1e)),{timing:S}})}function N1e(n){n._warm||(zR.webgl.isSupported(n),n._warm=!0)}const B1e=zR.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function P1e(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(s){var o=e._bin,l=new Uint8Array(s);if(o.readASCII(l,0,4)=="ttcf"){var u=4;o.readUshort(l,u),u+=2,o.readUshort(l,u),u+=2;var h=o.readUint(l,u);u+=4;for(var d=[],m=0;m<h;m++){var _=o.readUint(l,u);u+=4,d.push(e._readFont(l,_))}return d}return[e._readFont(l,0)]},_readFont:function(s,o){var l=e._bin,u=o;l.readFixed(s,o),o+=4;var h=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2;for(var d=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],m={_data:s,_offset:u},_={},v=0;v<h;v++){var S=l.readASCII(s,o,4);o+=4,l.readUint(s,o),o+=4;var x=l.readUint(s,o);o+=4;var w=l.readUint(s,o);o+=4,_[S]={offset:x,length:w}}for(v=0;v<d.length;v++){var A=d[v];_[A]&&(m[A.trim()]=e[A.trim()].parse(s,_[A].offset,_[A].length,m))}return m},_tabOffset:function(s,o,l){for(var u=e._bin,h=u.readUshort(s,l+4),d=l+12,m=0;m<h;m++){var _=u.readASCII(s,d,4);d+=4,u.readUint(s,d),d+=4;var v=u.readUint(s,d);if(d+=4,u.readUint(s,d),d+=4,_==o)return v}return 0}};e._bin={readFixed:function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<8|s[o+3])/65540},readF2dot14:function(s,o){return e._bin.readShort(s,o)/16384},readInt:function(s,o){return e._bin._view(s).getInt32(o)},readInt8:function(s,o){return e._bin._view(s).getInt8(o)},readShort:function(s,o){return e._bin._view(s).getInt16(o)},readUshort:function(s,o){return e._bin._view(s).getUint16(o)},readUshorts:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(e._bin.readUshort(s,o+2*h));return u},readUint:function(s,o){return e._bin._view(s).getUint32(o)},readUint64:function(s,o){return 4294967296*e._bin.readUint(s,o)+e._bin.readUint(s,o+4)},readASCII:function(s,o,l){for(var u="",h=0;h<l;h++)u+=String.fromCharCode(s[o+h]);return u},readUnicode:function(s,o,l){for(var u="",h=0;h<l;h++){var d=s[o++]<<8|s[o++];u+=String.fromCharCode(d)}return u},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,o,l){var u=e._bin._tdec;return u&&o==0&&l==s.length?u.decode(s):e._bin.readASCII(s,o,l)},readBytes:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(s[o+h]);return u},readASCIIArray:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(String.fromCharCode(s[o+h]));return u},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},e._lctf={},e._lctf.parse=function(s,o,l,u,h){var d=e._bin,m={},_=o;d.readFixed(s,o),o+=4;var v=d.readUshort(s,o);o+=2;var S=d.readUshort(s,o);o+=2;var x=d.readUshort(s,o);return o+=2,m.scriptList=e._lctf.readScriptList(s,_+v),m.featureList=e._lctf.readFeatureList(s,_+S),m.lookupList=e._lctf.readLookupList(s,_+x,h),m},e._lctf.readLookupList=function(s,o,l){var u=e._bin,h=o,d=[],m=u.readUshort(s,o);o+=2;for(var _=0;_<m;_++){var v=u.readUshort(s,o);o+=2;var S=e._lctf.readLookupTable(s,h+v,l);d.push(S)}return d},e._lctf.readLookupTable=function(s,o,l){var u=e._bin,h=o,d={tabs:[]};d.ltype=u.readUshort(s,o),o+=2,d.flag=u.readUshort(s,o),o+=2;var m=u.readUshort(s,o);o+=2;for(var _=d.ltype,v=0;v<m;v++){var S=u.readUshort(s,o);o+=2;var x=l(s,_,h+S,d);d.tabs.push(x)}return d},e._lctf.numOfOnes=function(s){for(var o=0,l=0;l<32;l++)s>>>l&1&&o++;return o},e._lctf.readClassDef=function(s,o){var l=e._bin,u=[],h=l.readUshort(s,o);if(o+=2,h==1){var d=l.readUshort(s,o);o+=2;var m=l.readUshort(s,o);o+=2;for(var _=0;_<m;_++)u.push(d+_),u.push(d+_),u.push(l.readUshort(s,o)),o+=2}if(h==2){var v=l.readUshort(s,o);for(o+=2,_=0;_<v;_++)u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2}return u},e._lctf.getInterval=function(s,o){for(var l=0;l<s.length;l+=3){var u=s[l],h=s[l+1];if(s[l+2],u<=o&&o<=h)return l}return-1},e._lctf.readCoverage=function(s,o){var l=e._bin,u={};u.fmt=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);return o+=2,u.fmt==1&&(u.tab=l.readUshorts(s,o,h)),u.fmt==2&&(u.tab=l.readUshorts(s,o,3*h)),u},e._lctf.coverageIndex=function(s,o){var l=s.tab;if(s.fmt==1)return l.indexOf(o);if(s.fmt==2){var u=e._lctf.getInterval(l,o);if(u!=-1)return l[u+2]+(o-l[u])}return-1},e._lctf.readFeatureList=function(s,o){var l=e._bin,u=o,h=[],d=l.readUshort(s,o);o+=2;for(var m=0;m<d;m++){var _=l.readASCII(s,o,4);o+=4;var v=l.readUshort(s,o);o+=2;var S=e._lctf.readFeatureTable(s,u+v);S.tag=_.trim(),h.push(S)}return h},e._lctf.readFeatureTable=function(s,o){var l=e._bin,u=o,h={},d=l.readUshort(s,o);o+=2,d>0&&(h.featureParams=u+d);var m=l.readUshort(s,o);o+=2,h.tab=[];for(var _=0;_<m;_++)h.tab.push(l.readUshort(s,o+2*_));return h},e._lctf.readScriptList=function(s,o){var l=e._bin,u=o,h={},d=l.readUshort(s,o);o+=2;for(var m=0;m<d;m++){var _=l.readASCII(s,o,4);o+=4;var v=l.readUshort(s,o);o+=2,h[_.trim()]=e._lctf.readScriptTable(s,u+v)}return h},e._lctf.readScriptTable=function(s,o){var l=e._bin,u=o,h={},d=l.readUshort(s,o);o+=2,h.default=e._lctf.readLangSysTable(s,u+d);var m=l.readUshort(s,o);o+=2;for(var _=0;_<m;_++){var v=l.readASCII(s,o,4);o+=4;var S=l.readUshort(s,o);o+=2,h[v.trim()]=e._lctf.readLangSysTable(s,u+S)}return h},e._lctf.readLangSysTable=function(s,o){var l=e._bin,u={};l.readUshort(s,o),o+=2,u.reqFeature=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);return o+=2,u.features=l.readUshorts(s,o,h),u},e.CFF={},e.CFF.parse=function(s,o,l){var u=e._bin;(s=new Uint8Array(s.buffer,o,l))[o=0],s[++o],s[++o],s[++o],o++;var h=[];o=e.CFF.readIndex(s,o,h);for(var d=[],m=0;m<h.length-1;m++)d.push(u.readASCII(s,o+h[m],h[m+1]-h[m]));o+=h[h.length-1];var _=[];o=e.CFF.readIndex(s,o,_);var v=[];for(m=0;m<_.length-1;m++)v.push(e.CFF.readDict(s,o+_[m],o+_[m+1]));o+=_[_.length-1];var S=v[0],x=[];o=e.CFF.readIndex(s,o,x);var w=[];for(m=0;m<x.length-1;m++)w.push(u.readASCII(s,o+x[m],x[m+1]-x[m]));if(o+=x[x.length-1],e.CFF.readSubrs(s,o,S),S.CharStrings){o=S.CharStrings,x=[],o=e.CFF.readIndex(s,o,x);var A=[];for(m=0;m<x.length-1;m++)A.push(u.readBytes(s,o+x[m],x[m+1]-x[m]));S.CharStrings=A}if(S.ROS){o=S.FDArray;var k=[];for(o=e.CFF.readIndex(s,o,k),S.FDArray=[],m=0;m<k.length-1;m++){var O=e.CFF.readDict(s,o+k[m],o+k[m+1]);e.CFF._readFDict(s,O,w),S.FDArray.push(O)}o+=k[k.length-1],o=S.FDSelect,S.FDSelect=[];var D=s[o];if(o++,D!=3)throw D;var L=u.readUshort(s,o);for(o+=2,m=0;m<L+1;m++)S.FDSelect.push(u.readUshort(s,o),s[o+2]),o+=3}return S.Encoding&&(S.Encoding=e.CFF.readEncoding(s,S.Encoding,S.CharStrings.length)),S.charset&&(S.charset=e.CFF.readCharset(s,S.charset,S.CharStrings.length)),e.CFF._readFDict(s,S,w),S},e.CFF._readFDict=function(s,o,l){var u;for(var h in o.Private&&(u=o.Private[1],o.Private=e.CFF.readDict(s,u,u+o.Private[0]),o.Private.Subrs&&e.CFF.readSubrs(s,u+o.Private.Subrs,o.Private)),o)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(h)!=-1&&(o[h]=l[o[h]-426+35])},e.CFF.readSubrs=function(s,o,l){var u=e._bin,h=[];o=e.CFF.readIndex(s,o,h);var d,m=h.length;d=m<1240?107:m<33900?1131:32768,l.Bias=d,l.Subrs=[];for(var _=0;_<h.length-1;_++)l.Subrs.push(u.readBytes(s,o+h[_],h[_+1]-h[_]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(s,o){for(var l=0;l<s.charset.length;l++)if(s.charset[l]==o)return l;return-1},e.CFF.glyphBySE=function(s,o){return o<0||o>255?-1:e.CFF.glyphByUnicode(s,e.CFF.tableSE[o])},e.CFF.readEncoding=function(s,o,l){e._bin;var u=[".notdef"],h=s[o];if(o++,h!=0)throw"error: unknown encoding format: "+h;var d=s[o];o++;for(var m=0;m<d;m++)u.push(s[o+m]);return u},e.CFF.readCharset=function(s,o,l){var u=e._bin,h=[".notdef"],d=s[o];if(o++,d==0)for(var m=0;m<l;m++){var _=u.readUshort(s,o);o+=2,h.push(_)}else{if(d!=1&&d!=2)throw"error: format: "+d;for(;h.length<l;){_=u.readUshort(s,o),o+=2;var v=0;for(d==1?(v=s[o],o++):(v=u.readUshort(s,o),o+=2),m=0;m<=v;m++)h.push(_),_++}}return h},e.CFF.readIndex=function(s,o,l){var u=e._bin,h=u.readUshort(s,o)+1,d=s[o+=2];if(o++,d==1)for(var m=0;m<h;m++)l.push(s[o+m]);else if(d==2)for(m=0;m<h;m++)l.push(u.readUshort(s,o+2*m));else if(d==3)for(m=0;m<h;m++)l.push(16777215&u.readUint(s,o+3*m-1));else if(h!=1)throw"unsupported offset size: "+d+", count: "+h;return(o+=h*d)-1},e.CFF.getCharString=function(s,o,l){var u=e._bin,h=s[o],d=s[o+1];s[o+2],s[o+3],s[o+4];var m=1,_=null,v=null;h<=20&&(_=h,m=1),h==12&&(_=100*h+d,m=2),21<=h&&h<=27&&(_=h,m=1),h==28&&(v=u.readShort(s,o+1),m=3),29<=h&&h<=31&&(_=h,m=1),32<=h&&h<=246&&(v=h-139,m=1),247<=h&&h<=250&&(v=256*(h-247)+d+108,m=2),251<=h&&h<=254&&(v=256*-(h-251)-d-108,m=2),h==255&&(v=u.readInt(s,o+1)/65535,m=5),l.val=v??"o"+_,l.size=m},e.CFF.readCharString=function(s,o,l){for(var u=o+l,h=e._bin,d=[];o<u;){var m=s[o],_=s[o+1];s[o+2],s[o+3],s[o+4];var v=1,S=null,x=null;m<=20&&(S=m,v=1),m==12&&(S=100*m+_,v=2),m!=19&&m!=20||(S=m,v=2),21<=m&&m<=27&&(S=m,v=1),m==28&&(x=h.readShort(s,o+1),v=3),29<=m&&m<=31&&(S=m,v=1),32<=m&&m<=246&&(x=m-139,v=1),247<=m&&m<=250&&(x=256*(m-247)+_+108,v=2),251<=m&&m<=254&&(x=256*-(m-251)-_-108,v=2),m==255&&(x=h.readInt(s,o+1)/65535,v=5),d.push(x??"o"+S),o+=v}return d},e.CFF.readDict=function(s,o,l){for(var u=e._bin,h={},d=[];o<l;){var m=s[o],_=s[o+1];s[o+2],s[o+3],s[o+4];var v=1,S=null,x=null;if(m==28&&(x=u.readShort(s,o+1),v=3),m==29&&(x=u.readInt(s,o+1),v=5),32<=m&&m<=246&&(x=m-139,v=1),247<=m&&m<=250&&(x=256*(m-247)+_+108,v=2),251<=m&&m<=254&&(x=256*-(m-251)-_-108,v=2),m==255)throw x=u.readInt(s,o+1)/65535,v=5,"unknown number";if(m==30){var w=[];for(v=1;;){var A=s[o+v];v++;var k=A>>4,O=15&A;if(k!=15&&w.push(k),O!=15&&w.push(O),O==15)break}for(var D="",L=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],z=0;z<w.length;z++)D+=L[w[z]];x=parseFloat(D)}m<=21&&(S=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][m],v=1,m==12&&(S=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][_],v=2)),S!=null?(h[S]=d.length==1?d[0]:d,d=[]):d.push(x),o+=v}return h},e.cmap={},e.cmap.parse=function(s,o,l){s=new Uint8Array(s.buffer,o,l),o=0;var u=e._bin,h={};u.readUshort(s,o),o+=2;var d=u.readUshort(s,o);o+=2;var m=[];h.tables=[];for(var _=0;_<d;_++){var v=u.readUshort(s,o);o+=2;var S=u.readUshort(s,o);o+=2;var x=u.readUint(s,o);o+=4;var w="p"+v+"e"+S,A=m.indexOf(x);if(A==-1){var k;A=h.tables.length,m.push(x);var O=u.readUshort(s,x);O==0?k=e.cmap.parse0(s,x):O==4?k=e.cmap.parse4(s,x):O==6?k=e.cmap.parse6(s,x):O==12?k=e.cmap.parse12(s,x):console.debug("unknown format: "+O,v,S,x),h.tables.push(k)}if(h[w]!=null)throw"multiple tables for one platform+encoding";h[w]=A}return h},e.cmap.parse0=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,u.map=[];for(var d=0;d<h-6;d++)u.map.push(s[o+d]);return u},e.cmap.parse4=function(s,o){var l=e._bin,u=o,h={};h.format=l.readUshort(s,o),o+=2;var d=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2;var m=l.readUshort(s,o);o+=2;var _=m/2;h.searchRange=l.readUshort(s,o),o+=2,h.entrySelector=l.readUshort(s,o),o+=2,h.rangeShift=l.readUshort(s,o),o+=2,h.endCount=l.readUshorts(s,o,_),o+=2*_,o+=2,h.startCount=l.readUshorts(s,o,_),o+=2*_,h.idDelta=[];for(var v=0;v<_;v++)h.idDelta.push(l.readShort(s,o)),o+=2;for(h.idRangeOffset=l.readUshorts(s,o,_),o+=2*_,h.glyphIdArray=[];o<u+d;)h.glyphIdArray.push(l.readUshort(s,o)),o+=2;return h},e.cmap.parse6=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,u.firstCode=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2,u.glyphIdArray=[];for(var d=0;d<h;d++)u.glyphIdArray.push(l.readUshort(s,o)),o+=2;return u},e.cmap.parse12=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,o+=2,l.readUint(s,o),o+=4,l.readUint(s,o),o+=4;var h=l.readUint(s,o);o+=4,u.groups=[];for(var d=0;d<h;d++){var m=o+12*d,_=l.readUint(s,m+0),v=l.readUint(s,m+4),S=l.readUint(s,m+8);u.groups.push([_,v,S])}return u},e.glyf={},e.glyf.parse=function(s,o,l,u){for(var h=[],d=0;d<u.maxp.numGlyphs;d++)h.push(null);return h},e.glyf._parseGlyf=function(s,o){var l=e._bin,u=s._data,h=e._tabOffset(u,"glyf",s._offset)+s.loca[o];if(s.loca[o]==s.loca[o+1])return null;var d={};if(d.noc=l.readShort(u,h),h+=2,d.xMin=l.readShort(u,h),h+=2,d.yMin=l.readShort(u,h),h+=2,d.xMax=l.readShort(u,h),h+=2,d.yMax=l.readShort(u,h),h+=2,d.xMin>=d.xMax||d.yMin>=d.yMax)return null;if(d.noc>0){d.endPts=[];for(var m=0;m<d.noc;m++)d.endPts.push(l.readUshort(u,h)),h+=2;var _=l.readUshort(u,h);if(h+=2,u.length-h<_)return null;d.instructions=l.readBytes(u,h,_),h+=_;var v=d.endPts[d.noc-1]+1;for(d.flags=[],m=0;m<v;m++){var S=u[h];if(h++,d.flags.push(S),(8&S)!=0){var x=u[h];h++;for(var w=0;w<x;w++)d.flags.push(S),m++}}for(d.xs=[],m=0;m<v;m++){var A=(2&d.flags[m])!=0,k=(16&d.flags[m])!=0;A?(d.xs.push(k?u[h]:-u[h]),h++):k?d.xs.push(0):(d.xs.push(l.readShort(u,h)),h+=2)}for(d.ys=[],m=0;m<v;m++)A=(4&d.flags[m])!=0,k=(32&d.flags[m])!=0,A?(d.ys.push(k?u[h]:-u[h]),h++):k?d.ys.push(0):(d.ys.push(l.readShort(u,h)),h+=2);var O=0,D=0;for(m=0;m<v;m++)O+=d.xs[m],D+=d.ys[m],d.xs[m]=O,d.ys[m]=D}else{var L;d.parts=[];do{L=l.readUshort(u,h),h+=2;var z={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(d.parts.push(z),z.glyphIndex=l.readUshort(u,h),h+=2,1&L){var H=l.readShort(u,h);h+=2;var U=l.readShort(u,h);h+=2}else H=l.readInt8(u,h),h++,U=l.readInt8(u,h),h++;2&L?(z.m.tx=H,z.m.ty=U):(z.p1=H,z.p2=U),8&L?(z.m.a=z.m.d=l.readF2dot14(u,h),h+=2):64&L?(z.m.a=l.readF2dot14(u,h),h+=2,z.m.d=l.readF2dot14(u,h),h+=2):128&L&&(z.m.a=l.readF2dot14(u,h),h+=2,z.m.b=l.readF2dot14(u,h),h+=2,z.m.c=l.readF2dot14(u,h),h+=2,z.m.d=l.readF2dot14(u,h),h+=2)}while(32&L);if(256&L){var P=l.readUshort(u,h);for(h+=2,d.instr=[],m=0;m<P;m++)d.instr.push(u[h]),h++}}return d},e.GPOS={},e.GPOS.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GPOS.subt)},e.GPOS.subt=function(s,o,l,u){var h=e._bin,d=l,m={};if(m.fmt=h.readUshort(s,l),l+=2,o==1||o==2||o==3||o==7||o==8&&m.fmt<=2){var _=h.readUshort(s,l);l+=2,m.coverage=e._lctf.readCoverage(s,_+d)}if(o==1&&m.fmt==1){var v=h.readUshort(s,l);l+=2;var S=e._lctf.numOfOnes(v);v!=0&&(m.pos=e.GPOS.readValueRecord(s,l,v))}else if(o==2&&m.fmt>=1&&m.fmt<=2){v=h.readUshort(s,l),l+=2;var x=h.readUshort(s,l);l+=2,S=e._lctf.numOfOnes(v);var w=e._lctf.numOfOnes(x);if(m.fmt==1){m.pairsets=[];var A=h.readUshort(s,l);l+=2;for(var k=0;k<A;k++){var O=d+h.readUshort(s,l);l+=2;var D=h.readUshort(s,O);O+=2;for(var L=[],z=0;z<D;z++){var H=h.readUshort(s,O);O+=2,v!=0&&(ie=e.GPOS.readValueRecord(s,O,v),O+=2*S),x!=0&&(de=e.GPOS.readValueRecord(s,O,x),O+=2*w),L.push({gid2:H,val1:ie,val2:de})}m.pairsets.push(L)}}if(m.fmt==2){var U=h.readUshort(s,l);l+=2;var P=h.readUshort(s,l);l+=2;var K=h.readUshort(s,l);l+=2;var ee=h.readUshort(s,l);for(l+=2,m.classDef1=e._lctf.readClassDef(s,d+U),m.classDef2=e._lctf.readClassDef(s,d+P),m.matrix=[],k=0;k<K;k++){var re=[];for(z=0;z<ee;z++){var ie=null,de=null;v!=0&&(ie=e.GPOS.readValueRecord(s,l,v),l+=2*S),x!=0&&(de=e.GPOS.readValueRecord(s,l,x),l+=2*w),re.push({val1:ie,val2:de})}m.matrix.push(re)}}}else{if(o==9&&m.fmt==1){var oe=h.readUshort(s,l);l+=2;var ce=h.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=oe;else if(u.ltype!=oe)throw"invalid extension substitution";return e.GPOS.subt(s,u.ltype,d+ce)}console.debug("unsupported GPOS table LookupType",o,"format",m.fmt)}return m},e.GPOS.readValueRecord=function(s,o,l){var u=e._bin,h=[];return h.push(1&l?u.readShort(s,o):0),o+=1&l?2:0,h.push(2&l?u.readShort(s,o):0),o+=2&l?2:0,h.push(4&l?u.readShort(s,o):0),o+=4&l?2:0,h.push(8&l?u.readShort(s,o):0),o+=8&l?2:0,h},e.GSUB={},e.GSUB.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GSUB.subt)},e.GSUB.subt=function(s,o,l,u){var h=e._bin,d=l,m={};if(m.fmt=h.readUshort(s,l),l+=2,o!=1&&o!=4&&o!=5&&o!=6)return null;if(o==1||o==4||o==5&&m.fmt<=2||o==6&&m.fmt<=2){var _=h.readUshort(s,l);l+=2,m.coverage=e._lctf.readCoverage(s,d+_)}if(o==1&&m.fmt>=1&&m.fmt<=2){if(m.fmt==1)m.delta=h.readShort(s,l),l+=2;else if(m.fmt==2){var v=h.readUshort(s,l);l+=2,m.newg=h.readUshorts(s,l,v),l+=2*m.newg.length}}else if(o==4){m.vals=[],v=h.readUshort(s,l),l+=2;for(var S=0;S<v;S++){var x=h.readUshort(s,l);l+=2,m.vals.push(e.GSUB.readLigatureSet(s,d+x))}}else if(o==5&&m.fmt==2){if(m.fmt==2){var w=h.readUshort(s,l);l+=2,m.cDef=e._lctf.readClassDef(s,d+w),m.scset=[];var A=h.readUshort(s,l);for(l+=2,S=0;S<A;S++){var k=h.readUshort(s,l);l+=2,m.scset.push(k==0?null:e.GSUB.readSubClassSet(s,d+k))}}}else if(o==6&&m.fmt==3){if(m.fmt==3){for(S=0;S<3;S++){v=h.readUshort(s,l),l+=2;for(var O=[],D=0;D<v;D++)O.push(e._lctf.readCoverage(s,d+h.readUshort(s,l+2*D)));l+=2*v,S==0&&(m.backCvg=O),S==1&&(m.inptCvg=O),S==2&&(m.ahedCvg=O)}v=h.readUshort(s,l),l+=2,m.lookupRec=e.GSUB.readSubstLookupRecords(s,l,v)}}else{if(o==7&&m.fmt==1){var L=h.readUshort(s,l);l+=2;var z=h.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=L;else if(u.ltype!=L)throw"invalid extension substitution";return e.GSUB.subt(s,u.ltype,d+z)}console.debug("unsupported GSUB table LookupType",o,"format",m.fmt)}return m},e.GSUB.readSubClassSet=function(s,o){var l=e._bin.readUshort,u=o,h=[],d=l(s,o);o+=2;for(var m=0;m<d;m++){var _=l(s,o);o+=2,h.push(e.GSUB.readSubClassRule(s,u+_))}return h},e.GSUB.readSubClassRule=function(s,o){var l=e._bin.readUshort,u={},h=l(s,o),d=l(s,o+=2);o+=2,u.input=[];for(var m=0;m<h-1;m++)u.input.push(l(s,o)),o+=2;return u.substLookupRecords=e.GSUB.readSubstLookupRecords(s,o,d),u},e.GSUB.readSubstLookupRecords=function(s,o,l){for(var u=e._bin.readUshort,h=[],d=0;d<l;d++)h.push(u(s,o),u(s,o+2)),o+=4;return h},e.GSUB.readChainSubClassSet=function(s,o){var l=e._bin,u=o,h=[],d=l.readUshort(s,o);o+=2;for(var m=0;m<d;m++){var _=l.readUshort(s,o);o+=2,h.push(e.GSUB.readChainSubClassRule(s,u+_))}return h},e.GSUB.readChainSubClassRule=function(s,o){for(var l=e._bin,u={},h=["backtrack","input","lookahead"],d=0;d<h.length;d++){var m=l.readUshort(s,o);o+=2,d==1&&m--,u[h[d]]=l.readUshorts(s,o,m),o+=2*u[h[d]].length}return m=l.readUshort(s,o),o+=2,u.subst=l.readUshorts(s,o,2*m),o+=2*u.subst.length,u},e.GSUB.readLigatureSet=function(s,o){var l=e._bin,u=o,h=[],d=l.readUshort(s,o);o+=2;for(var m=0;m<d;m++){var _=l.readUshort(s,o);o+=2,h.push(e.GSUB.readLigature(s,u+_))}return h},e.GSUB.readLigature=function(s,o){var l=e._bin,u={chain:[]};u.nglyph=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2;for(var d=0;d<h-1;d++)u.chain.push(l.readUshort(s,o)),o+=2;return u},e.head={},e.head.parse=function(s,o,l){var u=e._bin,h={};return u.readFixed(s,o),o+=4,h.fontRevision=u.readFixed(s,o),o+=4,u.readUint(s,o),o+=4,u.readUint(s,o),o+=4,h.flags=u.readUshort(s,o),o+=2,h.unitsPerEm=u.readUshort(s,o),o+=2,h.created=u.readUint64(s,o),o+=8,h.modified=u.readUint64(s,o),o+=8,h.xMin=u.readShort(s,o),o+=2,h.yMin=u.readShort(s,o),o+=2,h.xMax=u.readShort(s,o),o+=2,h.yMax=u.readShort(s,o),o+=2,h.macStyle=u.readUshort(s,o),o+=2,h.lowestRecPPEM=u.readUshort(s,o),o+=2,h.fontDirectionHint=u.readShort(s,o),o+=2,h.indexToLocFormat=u.readShort(s,o),o+=2,h.glyphDataFormat=u.readShort(s,o),o+=2,h},e.hhea={},e.hhea.parse=function(s,o,l){var u=e._bin,h={};return u.readFixed(s,o),o+=4,h.ascender=u.readShort(s,o),o+=2,h.descender=u.readShort(s,o),o+=2,h.lineGap=u.readShort(s,o),o+=2,h.advanceWidthMax=u.readUshort(s,o),o+=2,h.minLeftSideBearing=u.readShort(s,o),o+=2,h.minRightSideBearing=u.readShort(s,o),o+=2,h.xMaxExtent=u.readShort(s,o),o+=2,h.caretSlopeRise=u.readShort(s,o),o+=2,h.caretSlopeRun=u.readShort(s,o),o+=2,h.caretOffset=u.readShort(s,o),o+=2,o+=8,h.metricDataFormat=u.readShort(s,o),o+=2,h.numberOfHMetrics=u.readUshort(s,o),o+=2,h},e.hmtx={},e.hmtx.parse=function(s,o,l,u){for(var h=e._bin,d={aWidth:[],lsBearing:[]},m=0,_=0,v=0;v<u.maxp.numGlyphs;v++)v<u.hhea.numberOfHMetrics&&(m=h.readUshort(s,o),o+=2,_=h.readShort(s,o),o+=2),d.aWidth.push(m),d.lsBearing.push(_);return d},e.kern={},e.kern.parse=function(s,o,l,u){var h=e._bin,d=h.readUshort(s,o);if(o+=2,d==1)return e.kern.parseV1(s,o-2,l,u);var m=h.readUshort(s,o);o+=2;for(var _={glyph1:[],rval:[]},v=0;v<m;v++){o+=2,l=h.readUshort(s,o),o+=2;var S=h.readUshort(s,o);o+=2;var x=S>>>8;if((x&=15)!=0)throw"unknown kern table format: "+x;o=e.kern.readFormat0(s,o,_)}return _},e.kern.parseV1=function(s,o,l,u){var h=e._bin;h.readFixed(s,o),o+=4;var d=h.readUint(s,o);o+=4;for(var m={glyph1:[],rval:[]},_=0;_<d;_++){h.readUint(s,o),o+=4;var v=h.readUshort(s,o);o+=2,h.readUshort(s,o),o+=2;var S=v>>>8;if((S&=15)!=0)throw"unknown kern table format: "+S;o=e.kern.readFormat0(s,o,m)}return m},e.kern.readFormat0=function(s,o,l){var u=e._bin,h=-1,d=u.readUshort(s,o);o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2;for(var m=0;m<d;m++){var _=u.readUshort(s,o);o+=2;var v=u.readUshort(s,o);o+=2;var S=u.readShort(s,o);o+=2,_!=h&&(l.glyph1.push(_),l.rval.push({glyph2:[],vals:[]}));var x=l.rval[l.rval.length-1];x.glyph2.push(v),x.vals.push(S),h=_}return o},e.loca={},e.loca.parse=function(s,o,l,u){var h=e._bin,d=[],m=u.head.indexToLocFormat,_=u.maxp.numGlyphs+1;if(m==0)for(var v=0;v<_;v++)d.push(h.readUshort(s,o+(v<<1))<<1);if(m==1)for(v=0;v<_;v++)d.push(h.readUint(s,o+(v<<2)));return d},e.maxp={},e.maxp.parse=function(s,o,l){var u=e._bin,h={},d=u.readUint(s,o);return o+=4,h.numGlyphs=u.readUshort(s,o),o+=2,d==65536&&(h.maxPoints=u.readUshort(s,o),o+=2,h.maxContours=u.readUshort(s,o),o+=2,h.maxCompositePoints=u.readUshort(s,o),o+=2,h.maxCompositeContours=u.readUshort(s,o),o+=2,h.maxZones=u.readUshort(s,o),o+=2,h.maxTwilightPoints=u.readUshort(s,o),o+=2,h.maxStorage=u.readUshort(s,o),o+=2,h.maxFunctionDefs=u.readUshort(s,o),o+=2,h.maxInstructionDefs=u.readUshort(s,o),o+=2,h.maxStackElements=u.readUshort(s,o),o+=2,h.maxSizeOfInstructions=u.readUshort(s,o),o+=2,h.maxComponentElements=u.readUshort(s,o),o+=2,h.maxComponentDepth=u.readUshort(s,o),o+=2),h},e.name={},e.name.parse=function(s,o,l){var u=e._bin,h={};u.readUshort(s,o),o+=2;var d=u.readUshort(s,o);o+=2,u.readUshort(s,o);for(var m,_=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],v=o+=2,S=0;S<d;S++){var x=u.readUshort(s,o);o+=2;var w=u.readUshort(s,o);o+=2;var A=u.readUshort(s,o);o+=2;var k=u.readUshort(s,o);o+=2;var O=u.readUshort(s,o);o+=2;var D=u.readUshort(s,o);o+=2;var L,z=_[k],H=v+12*d+D;if(x==0)L=u.readUnicode(s,H,O/2);else if(x==3&&w==0)L=u.readUnicode(s,H,O/2);else if(w==0)L=u.readASCII(s,H,O);else if(w==1)L=u.readUnicode(s,H,O/2);else if(w==3)L=u.readUnicode(s,H,O/2);else{if(x!=1)throw"unknown encoding "+w+", platformID: "+x;L=u.readASCII(s,H,O),console.debug("reading unknown MAC encoding "+w+" as ASCII")}var U="p"+x+","+A.toString(16);h[U]==null&&(h[U]={}),h[U][z!==void 0?z:k]=L,h[U]._lang=A}for(var P in h)if(h[P].postScriptName!=null&&h[P]._lang==1033)return h[P];for(var P in h)if(h[P].postScriptName!=null&&h[P]._lang==0)return h[P];for(var P in h)if(h[P].postScriptName!=null&&h[P]._lang==3084)return h[P];for(var P in h)if(h[P].postScriptName!=null)return h[P];for(var P in h){m=P;break}return console.debug("returning name table with languageID "+h[m]._lang),h[m]},e["OS/2"]={},e["OS/2"].parse=function(s,o,l){var u=e._bin.readUshort(s,o);o+=2;var h={};if(u==0)e["OS/2"].version0(s,o,h);else if(u==1)e["OS/2"].version1(s,o,h);else if(u==2||u==3||u==4)e["OS/2"].version2(s,o,h);else{if(u!=5)throw"unknown OS/2 table version: "+u;e["OS/2"].version5(s,o,h)}return h},e["OS/2"].version0=function(s,o,l){var u=e._bin;return l.xAvgCharWidth=u.readShort(s,o),o+=2,l.usWeightClass=u.readUshort(s,o),o+=2,l.usWidthClass=u.readUshort(s,o),o+=2,l.fsType=u.readUshort(s,o),o+=2,l.ySubscriptXSize=u.readShort(s,o),o+=2,l.ySubscriptYSize=u.readShort(s,o),o+=2,l.ySubscriptXOffset=u.readShort(s,o),o+=2,l.ySubscriptYOffset=u.readShort(s,o),o+=2,l.ySuperscriptXSize=u.readShort(s,o),o+=2,l.ySuperscriptYSize=u.readShort(s,o),o+=2,l.ySuperscriptXOffset=u.readShort(s,o),o+=2,l.ySuperscriptYOffset=u.readShort(s,o),o+=2,l.yStrikeoutSize=u.readShort(s,o),o+=2,l.yStrikeoutPosition=u.readShort(s,o),o+=2,l.sFamilyClass=u.readShort(s,o),o+=2,l.panose=u.readBytes(s,o,10),o+=10,l.ulUnicodeRange1=u.readUint(s,o),o+=4,l.ulUnicodeRange2=u.readUint(s,o),o+=4,l.ulUnicodeRange3=u.readUint(s,o),o+=4,l.ulUnicodeRange4=u.readUint(s,o),o+=4,l.achVendID=[u.readInt8(s,o),u.readInt8(s,o+1),u.readInt8(s,o+2),u.readInt8(s,o+3)],o+=4,l.fsSelection=u.readUshort(s,o),o+=2,l.usFirstCharIndex=u.readUshort(s,o),o+=2,l.usLastCharIndex=u.readUshort(s,o),o+=2,l.sTypoAscender=u.readShort(s,o),o+=2,l.sTypoDescender=u.readShort(s,o),o+=2,l.sTypoLineGap=u.readShort(s,o),o+=2,l.usWinAscent=u.readUshort(s,o),o+=2,l.usWinDescent=u.readUshort(s,o),o+=2},e["OS/2"].version1=function(s,o,l){var u=e._bin;return o=e["OS/2"].version0(s,o,l),l.ulCodePageRange1=u.readUint(s,o),o+=4,l.ulCodePageRange2=u.readUint(s,o),o+=4},e["OS/2"].version2=function(s,o,l){var u=e._bin;return o=e["OS/2"].version1(s,o,l),l.sxHeight=u.readShort(s,o),o+=2,l.sCapHeight=u.readShort(s,o),o+=2,l.usDefault=u.readUshort(s,o),o+=2,l.usBreak=u.readUshort(s,o),o+=2,l.usMaxContext=u.readUshort(s,o),o+=2},e["OS/2"].version5=function(s,o,l){var u=e._bin;return o=e["OS/2"].version2(s,o,l),l.usLowerOpticalPointSize=u.readUshort(s,o),o+=2,l.usUpperOpticalPointSize=u.readUshort(s,o),o+=2},e.post={},e.post.parse=function(s,o,l){var u=e._bin,h={};return h.version=u.readFixed(s,o),o+=4,h.italicAngle=u.readFixed(s,o),o+=4,h.underlinePosition=u.readShort(s,o),o+=2,h.underlineThickness=u.readShort(s,o),o+=2,h},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(s,o){var l=s.cmap,u=-1;if(l.p0e4!=null?u=l.p0e4:l.p3e1!=null?u=l.p3e1:l.p1e0!=null?u=l.p1e0:l.p0e3!=null&&(u=l.p0e3),u==-1)throw"no familiar platform and encoding!";var h=l.tables[u];if(h.format==0)return o>=h.map.length?0:h.map[o];if(h.format==4){for(var d=-1,m=0;m<h.endCount.length;m++)if(o<=h.endCount[m]){d=m;break}return d==-1||h.startCount[d]>o?0:65535&(h.idRangeOffset[d]!=0?h.glyphIdArray[o-h.startCount[d]+(h.idRangeOffset[d]>>1)-(h.idRangeOffset.length-d)]:o+h.idDelta[d])}if(h.format==12){if(o>h.groups[h.groups.length-1][1])return 0;for(m=0;m<h.groups.length;m++){var _=h.groups[m];if(_[0]<=o&&o<=_[1])return _[2]+(o-_[0])}return 0}throw"unknown cmap table format "+h.format},e.U.glyphToPath=function(s,o){var l={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[o]){var u=s.SVG.entries[o];return u==null?l:(typeof u=="string"&&(u=e.SVG.toPath(u),s.SVG.entries[o]=u),u)}if(s.CFF){var h={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},d=s.CFF,m=s.CFF.Private;if(d.ROS){for(var _=0;d.FDSelect[_+2]<=o;)_+=2;m=d.FDArray[d.FDSelect[_+1]].Private}e.U._drawCFF(s.CFF.CharStrings[o],h,d,m,l)}else s.glyf&&e.U._drawGlyf(o,s,l);return l},e.U._drawGlyf=function(s,o,l){var u=o.glyf[s];u==null&&(u=o.glyf[s]=e.glyf._parseGlyf(o,s)),u!=null&&(u.noc>-1?e.U._simpleGlyph(u,l):e.U._compoGlyph(u,o,l))},e.U._simpleGlyph=function(s,o){for(var l=0;l<s.noc;l++){for(var u=l==0?0:s.endPts[l-1]+1,h=s.endPts[l],d=u;d<=h;d++){var m=d==u?h:d-1,_=d==h?u:d+1,v=1&s.flags[d],S=1&s.flags[m],x=1&s.flags[_],w=s.xs[d],A=s.ys[d];if(d==u)if(v){if(!S){e.U.P.moveTo(o,w,A);continue}e.U.P.moveTo(o,s.xs[m],s.ys[m])}else S?e.U.P.moveTo(o,s.xs[m],s.ys[m]):e.U.P.moveTo(o,(s.xs[m]+w)/2,(s.ys[m]+A)/2);v?S&&e.U.P.lineTo(o,w,A):x?e.U.P.qcurveTo(o,w,A,s.xs[_],s.ys[_]):e.U.P.qcurveTo(o,w,A,(w+s.xs[_])/2,(A+s.ys[_])/2)}e.U.P.closePath(o)}},e.U._compoGlyph=function(s,o,l){for(var u=0;u<s.parts.length;u++){var h={cmds:[],crds:[]},d=s.parts[u];e.U._drawGlyf(d.glyphIndex,o,h);for(var m=d.m,_=0;_<h.crds.length;_+=2){var v=h.crds[_],S=h.crds[_+1];l.crds.push(v*m.a+S*m.b+m.tx),l.crds.push(v*m.c+S*m.d+m.ty)}for(_=0;_<h.cmds.length;_++)l.cmds.push(h.cmds[_])}},e.U._getGlyphClass=function(s,o){var l=e._lctf.getInterval(o,s);return l==-1?0:o[l+2]},e.U.getPairAdjustment=function(s,o,l){var u=!1;if(s.GPOS)for(var h=s.GPOS,d=h.lookupList,m=h.featureList,_=[],v=0;v<m.length;v++){var S=m[v];if(S.tag=="kern"){u=!0;for(var x=0;x<S.tab.length;x++)if(!_[S.tab[x]]){_[S.tab[x]]=!0;for(var w=d[S.tab[x]],A=0;A<w.tabs.length;A++)if(w.tabs[A]!=null){var k,O=w.tabs[A];if((!O.coverage||(k=e._lctf.coverageIndex(O.coverage,o))!=-1)&&w.ltype!=1&&w.ltype==2){var D=null;if(O.fmt==1){var L=O.pairsets[k];for(v=0;v<L.length;v++)L[v].gid2==l&&(D=L[v])}else if(O.fmt==2){var z=e.U._getGlyphClass(o,O.classDef1),H=e.U._getGlyphClass(l,O.classDef2);D=O.matrix[z][H]}if(D){var U=0;return D.val1&&D.val1[2]&&(U+=D.val1[2]),D.val2&&D.val2[0]&&(U+=D.val2[0]),U}}}}}}if(s.kern&&!u){var P=s.kern.glyph1.indexOf(o);if(P!=-1){var K=s.kern.rval[P].glyph2.indexOf(l);if(K!=-1)return s.kern.rval[P].vals[K]}}return 0},e.U._applySubs=function(s,o,l,u){for(var h=s.length-o-1,d=0;d<l.tabs.length;d++)if(l.tabs[d]!=null){var m,_=l.tabs[d];if(!_.coverage||(m=e._lctf.coverageIndex(_.coverage,s[o]))!=-1){if(l.ltype==1)s[o],_.fmt==1?s[o]=s[o]+_.delta:s[o]=_.newg[m];else if(l.ltype==4)for(var v=_.vals[m],S=0;S<v.length;S++){var x=v[S],w=x.chain.length;if(!(w>h)){for(var A=!0,k=0,O=0;O<w;O++){for(;s[o+k+(1+O)]==-1;)k++;x.chain[O]!=s[o+k+(1+O)]&&(A=!1)}if(A){for(s[o]=x.nglyph,O=0;O<w+k;O++)s[o+O+1]=-1;break}}}else if(l.ltype==5&&_.fmt==2)for(var D=e._lctf.getInterval(_.cDef,s[o]),L=_.cDef[D+2],z=_.scset[L],H=0;H<z.length;H++){var U=z[H],P=U.input;if(!(P.length>h)){for(A=!0,O=0;O<P.length;O++){var K=e._lctf.getInterval(_.cDef,s[o+1+O]);if(D==-1&&_.cDef[K+2]!=P[O]){A=!1;break}}if(A){var ee=U.substLookupRecords;for(S=0;S<ee.length;S+=2)ee[S],ee[S+1]}}}else if(l.ltype==6&&_.fmt==3){if(!e.U._glsCovered(s,_.backCvg,o-_.backCvg.length)||!e.U._glsCovered(s,_.inptCvg,o)||!e.U._glsCovered(s,_.ahedCvg,o+_.inptCvg.length))continue;var re=_.lookupRec;for(H=0;H<re.length;H+=2){D=re[H];var ie=u[re[H+1]];e.U._applySubs(s,o+D,ie,u)}}}}},e.U._glsCovered=function(s,o,l){for(var u=0;u<o.length;u++)if(e._lctf.coverageIndex(o[u],s[l+u])==-1)return!1;return!0},e.U.glyphsToPath=function(s,o,l){for(var u={cmds:[],crds:[]},h=0,d=0;d<o.length;d++){var m=o[d];if(m!=-1){for(var _=d<o.length-1&&o[d+1]!=-1?o[d+1]:0,v=e.U.glyphToPath(s,m),S=0;S<v.crds.length;S+=2)u.crds.push(v.crds[S]+h),u.crds.push(v.crds[S+1]);for(l&&u.cmds.push(l),S=0;S<v.cmds.length;S++)u.cmds.push(v.cmds[S]);l&&u.cmds.push("X"),h+=s.hmtx.aWidth[m],d<o.length-1&&(h+=e.U.getPairAdjustment(s,m,_))}}return u},e.U.P={},e.U.P.moveTo=function(s,o,l){s.cmds.push("M"),s.crds.push(o,l)},e.U.P.lineTo=function(s,o,l){s.cmds.push("L"),s.crds.push(o,l)},e.U.P.curveTo=function(s,o,l,u,h,d,m){s.cmds.push("C"),s.crds.push(o,l,u,h,d,m)},e.U.P.qcurveTo=function(s,o,l,u,h){s.cmds.push("Q"),s.crds.push(o,l,u,h)},e.U.P.closePath=function(s){s.cmds.push("Z")},e.U._drawCFF=function(s,o,l,u,h){for(var d=o.stack,m=o.nStems,_=o.haveWidth,v=o.width,S=o.open,x=0,w=o.x,A=o.y,k=0,O=0,D=0,L=0,z=0,H=0,U=0,P=0,K=0,ee=0,re={val:0,size:0};x<s.length;){e.CFF.getCharString(s,x,re);var ie=re.val;if(x+=re.size,ie=="o1"||ie=="o18")d.length%2!=0&&!_&&(v=d.shift()+u.nominalWidthX),m+=d.length>>1,d.length=0,_=!0;else if(ie=="o3"||ie=="o23")d.length%2!=0&&!_&&(v=d.shift()+u.nominalWidthX),m+=d.length>>1,d.length=0,_=!0;else if(ie=="o4")d.length>1&&!_&&(v=d.shift()+u.nominalWidthX,_=!0),S&&e.U.P.closePath(h),A+=d.pop(),e.U.P.moveTo(h,w,A),S=!0;else if(ie=="o5")for(;d.length>0;)w+=d.shift(),A+=d.shift(),e.U.P.lineTo(h,w,A);else if(ie=="o6"||ie=="o7")for(var de=d.length,oe=ie=="o6",ce=0;ce<de;ce++){var me=d.shift();oe?w+=me:A+=me,oe=!oe,e.U.P.lineTo(h,w,A)}else if(ie=="o8"||ie=="o24"){de=d.length;for(var Ae=0;Ae+6<=de;)k=w+d.shift(),O=A+d.shift(),D=k+d.shift(),L=O+d.shift(),w=D+d.shift(),A=L+d.shift(),e.U.P.curveTo(h,k,O,D,L,w,A),Ae+=6;ie=="o24"&&(w+=d.shift(),A+=d.shift(),e.U.P.lineTo(h,w,A))}else{if(ie=="o11")break;if(ie=="o1234"||ie=="o1235"||ie=="o1236"||ie=="o1237")ie=="o1234"&&(O=A,D=(k=w+d.shift())+d.shift(),ee=L=O+d.shift(),H=L,P=A,w=(U=(z=(K=D+d.shift())+d.shift())+d.shift())+d.shift(),e.U.P.curveTo(h,k,O,D,L,K,ee),e.U.P.curveTo(h,z,H,U,P,w,A)),ie=="o1235"&&(k=w+d.shift(),O=A+d.shift(),D=k+d.shift(),L=O+d.shift(),K=D+d.shift(),ee=L+d.shift(),z=K+d.shift(),H=ee+d.shift(),U=z+d.shift(),P=H+d.shift(),w=U+d.shift(),A=P+d.shift(),d.shift(),e.U.P.curveTo(h,k,O,D,L,K,ee),e.U.P.curveTo(h,z,H,U,P,w,A)),ie=="o1236"&&(k=w+d.shift(),O=A+d.shift(),D=k+d.shift(),ee=L=O+d.shift(),H=L,U=(z=(K=D+d.shift())+d.shift())+d.shift(),P=H+d.shift(),w=U+d.shift(),e.U.P.curveTo(h,k,O,D,L,K,ee),e.U.P.curveTo(h,z,H,U,P,w,A)),ie=="o1237"&&(k=w+d.shift(),O=A+d.shift(),D=k+d.shift(),L=O+d.shift(),K=D+d.shift(),ee=L+d.shift(),z=K+d.shift(),H=ee+d.shift(),U=z+d.shift(),P=H+d.shift(),Math.abs(U-w)>Math.abs(P-A)?w=U+d.shift():A=P+d.shift(),e.U.P.curveTo(h,k,O,D,L,K,ee),e.U.P.curveTo(h,z,H,U,P,w,A));else if(ie=="o14"){if(d.length>0&&!_&&(v=d.shift()+l.nominalWidthX,_=!0),d.length==4){var j=d.shift(),Z=d.shift(),ne=d.shift(),ae=d.shift(),_e=e.CFF.glyphBySE(l,ne),Le=e.CFF.glyphBySE(l,ae);e.U._drawCFF(l.CharStrings[_e],o,l,u,h),o.x=j,o.y=Z,e.U._drawCFF(l.CharStrings[Le],o,l,u,h)}S&&(e.U.P.closePath(h),S=!1)}else if(ie=="o19"||ie=="o20")d.length%2!=0&&!_&&(v=d.shift()+u.nominalWidthX),m+=d.length>>1,d.length=0,_=!0,x+=m+7>>3;else if(ie=="o21")d.length>2&&!_&&(v=d.shift()+u.nominalWidthX,_=!0),A+=d.pop(),w+=d.pop(),S&&e.U.P.closePath(h),e.U.P.moveTo(h,w,A),S=!0;else if(ie=="o22")d.length>1&&!_&&(v=d.shift()+u.nominalWidthX,_=!0),w+=d.pop(),S&&e.U.P.closePath(h),e.U.P.moveTo(h,w,A),S=!0;else if(ie=="o25"){for(;d.length>6;)w+=d.shift(),A+=d.shift(),e.U.P.lineTo(h,w,A);k=w+d.shift(),O=A+d.shift(),D=k+d.shift(),L=O+d.shift(),w=D+d.shift(),A=L+d.shift(),e.U.P.curveTo(h,k,O,D,L,w,A)}else if(ie=="o26")for(d.length%2&&(w+=d.shift());d.length>0;)k=w,O=A+d.shift(),w=D=k+d.shift(),A=(L=O+d.shift())+d.shift(),e.U.P.curveTo(h,k,O,D,L,w,A);else if(ie=="o27")for(d.length%2&&(A+=d.shift());d.length>0;)O=A,D=(k=w+d.shift())+d.shift(),L=O+d.shift(),w=D+d.shift(),A=L,e.U.P.curveTo(h,k,O,D,L,w,A);else if(ie=="o10"||ie=="o29"){var we=ie=="o10"?u:l;if(d.length==0)console.debug("error: empty stack");else{var Xe=d.pop(),Re=we.Subrs[Xe+we.Bias];o.x=w,o.y=A,o.nStems=m,o.haveWidth=_,o.width=v,o.open=S,e.U._drawCFF(Re,o,l,u,h),w=o.x,A=o.y,m=o.nStems,_=o.haveWidth,v=o.width,S=o.open}}else if(ie=="o30"||ie=="o31"){var qe=d.length,Je=(Ae=0,ie=="o31");for(Ae+=qe-(de=-3&qe);Ae<de;)Je?(O=A,D=(k=w+d.shift())+d.shift(),A=(L=O+d.shift())+d.shift(),de-Ae==5?(w=D+d.shift(),Ae++):w=D,Je=!1):(k=w,O=A+d.shift(),D=k+d.shift(),L=O+d.shift(),w=D+d.shift(),de-Ae==5?(A=L+d.shift(),Ae++):A=L,Je=!0),e.U.P.curveTo(h,k,O,D,L,w,A),Ae+=4}else{if((ie+"").charAt(0)=="o")throw console.debug("Unknown operation: "+ie,s),ie;d.push(ie)}}}o.x=w,o.y=A,o.nStems=m,o.haveWidth=_,o.width=v,o.open=S};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function F1e(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,s=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(ie,de){for(var oe=new t(31),ce=0;ce<31;++ce)oe[ce]=de+=1<<ie[ce-1];var me=new i(oe[30]);for(ce=1;ce<30;++ce)for(var Ae=oe[ce];Ae<oe[ce+1];++Ae)me[Ae]=Ae-oe[ce]<<5|ce;return[oe,me]},h=u(s,2),d=h[0],m=h[1];d[28]=258,m[258]=28;for(var _=u(o,0)[0],v=new t(32768),S=0;S<32768;++S){var x=(43690&S)>>>1|(21845&S)<<1;x=(61680&(x=(52428&x)>>>2|(13107&x)<<2))>>>4|(3855&x)<<4,v[S]=((65280&x)>>>8|(255&x)<<8)>>>1}var w=function(ie,de,oe){for(var ce=ie.length,me=0,Ae=new t(de);me<ce;++me)++Ae[ie[me]-1];var j,Z=new t(de);for(me=0;me<de;++me)Z[me]=Z[me-1]+Ae[me-1]<<1;if(oe){j=new t(1<<de);var ne=15-de;for(me=0;me<ce;++me)if(ie[me])for(var ae=me<<4|ie[me],_e=de-ie[me],Le=Z[ie[me]-1]++<<_e,we=Le|(1<<_e)-1;Le<=we;++Le)j[v[Le]>>>ne]=ae}else for(j=new t(ce),me=0;me<ce;++me)ie[me]&&(j[me]=v[Z[ie[me]-1]++]>>>15-ie[me]);return j},A=new e(288);for(S=0;S<144;++S)A[S]=8;for(S=144;S<256;++S)A[S]=9;for(S=256;S<280;++S)A[S]=7;for(S=280;S<288;++S)A[S]=8;var k=new e(32);for(S=0;S<32;++S)k[S]=5;var O=w(A,9,1),D=w(k,5,1),L=function(ie){for(var de=ie[0],oe=1;oe<ie.length;++oe)ie[oe]>de&&(de=ie[oe]);return de},z=function(ie,de,oe){var ce=de/8|0;return(ie[ce]|ie[ce+1]<<8)>>(7&de)&oe},H=function(ie,de){var oe=de/8|0;return(ie[oe]|ie[oe+1]<<8|ie[oe+2]<<16)>>(7&de)},U=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],P=function(ie,de,oe){var ce=new Error(de||U[ie]);if(ce.code=ie,Error.captureStackTrace&&Error.captureStackTrace(ce,P),!oe)throw ce;return ce},K=function(ie,de,oe){var ce=ie.length;if(!ce||oe&&!oe.l&&ce<5)return de||new e(0);var me=!de||oe,Ae=!oe||oe.i;oe||(oe={}),de||(de=new e(3*ce));var j,Z=function(We){var Ft=de.length;if(We>Ft){var Be=new e(Math.max(2*Ft,We));Be.set(de),de=Be}},ne=oe.f||0,ae=oe.p||0,_e=oe.b||0,Le=oe.l,we=oe.d,Xe=oe.m,Re=oe.n,qe=8*ce;do{if(!Le){oe.f=ne=z(ie,ae,1);var Je=z(ie,ae+1,3);if(ae+=3,!Je){var ht=ie[($t=((j=ae)/8|0)+(7&j&&1)+4)-4]|ie[$t-3]<<8,it=$t+ht;if(it>ce){Ae&&P(0);break}me&&Z(_e+ht),de.set(ie.subarray($t,it),_e),oe.b=_e+=ht,oe.p=ae=8*it;continue}if(Je==1)Le=O,we=D,Xe=9,Re=5;else if(Je==2){var Oe=z(ie,ae,31)+257,Ee=z(ie,ae+10,15)+4,Fe=Oe+z(ie,ae+5,31)+1;ae+=14;for(var rt=new e(Fe),nt=new e(19),dt=0;dt<Ee;++dt)nt[l[dt]]=z(ie,ae+3*dt,7);ae+=3*Ee;var It=L(nt),mt=(1<<It)-1,wt=w(nt,It,1);for(dt=0;dt<Fe;){var $t,pt=wt[z(ie,ae,mt)];if(ae+=15&pt,($t=pt>>>4)<16)rt[dt++]=$t;else{var Te=0,te=0;for($t==16?(te=3+z(ie,ae,3),ae+=2,Te=rt[dt-1]):$t==17?(te=3+z(ie,ae,7),ae+=3):$t==18&&(te=11+z(ie,ae,127),ae+=7);te--;)rt[dt++]=Te}}var ke=rt.subarray(0,Oe),ot=rt.subarray(Oe);Xe=L(ke),Re=L(ot),Le=w(ke,Xe,1),we=w(ot,Re,1)}else P(1);if(ae>qe){Ae&&P(0);break}}me&&Z(_e+131072);for(var ft=(1<<Xe)-1,xt=(1<<Re)-1,at=ae;;at=ae){var Ge=(Te=Le[H(ie,ae)&ft])>>>4;if((ae+=15&Te)>qe){Ae&&P(0);break}if(Te||P(2),Ge<256)de[_e++]=Ge;else{if(Ge==256){at=ae,Le=null;break}var Ce=Ge-254;if(Ge>264){var X=s[dt=Ge-257];Ce=z(ie,ae,(1<<X)-1)+d[dt],ae+=X}var Q=we[H(ie,ae)&xt],le=Q>>>4;if(Q||P(3),ae+=15&Q,ot=_[le],le>3&&(X=o[le],ot+=H(ie,ae)&(1<<X)-1,ae+=X),ae>qe){Ae&&P(0);break}me&&Z(_e+131072);for(var $e=_e+Ce;_e<$e;_e+=4)de[_e]=de[_e-ot],de[_e+1]=de[_e+1-ot],de[_e+2]=de[_e+2-ot],de[_e+3]=de[_e+3-ot];_e=$e}}oe.l=Le,oe.p=at,oe.b=_e,Le&&(ne=1,oe.m=Xe,oe.d=we,oe.n=Re)}while(!ne);return _e==de.length?de:function(We,Ft,Be){(Ft==null||Ft<0)&&(Ft=0),(Be==null||Be>We.length)&&(Be=We.length);var Ut=new(We instanceof t?t:We instanceof i?i:e)(Be-Ft);return Ut.set(We.subarray(Ft,Be)),Ut}(de,0,_e)},ee=new e(0),re=typeof TextDecoder<"u"&&new TextDecoder;try{re.decode(ee,{stream:!0})}catch{}return n.convert_streams=function(ie){var de=new DataView(ie),oe=0;function ce(){var Oe=de.getUint16(oe);return oe+=2,Oe}function me(){var Oe=de.getUint32(oe);return oe+=4,Oe}function Ae(Oe){ht.setUint16(it,Oe),it+=2}function j(Oe){ht.setUint32(it,Oe),it+=4}for(var Z={signature:me(),flavor:me(),length:me(),numTables:ce(),reserved:ce(),totalSfntSize:me(),majorVersion:ce(),minorVersion:ce(),metaOffset:me(),metaLength:me(),metaOrigLength:me(),privOffset:me(),privLength:me()},ne=0;Math.pow(2,ne)<=Z.numTables;)ne++;ne--;for(var ae=16*Math.pow(2,ne),_e=16*Z.numTables-ae,Le=12,we=[],Xe=0;Xe<Z.numTables;Xe++)we.push({tag:me(),offset:me(),compLength:me(),origLength:me(),origChecksum:me()}),Le+=16;var Re,qe=new Uint8Array(12+16*we.length+we.reduce(function(Oe,Ee){return Oe+Ee.origLength+4},0)),Je=qe.buffer,ht=new DataView(Je),it=0;return j(Z.flavor),Ae(Z.numTables),Ae(ae),Ae(ne),Ae(_e),we.forEach(function(Oe){j(Oe.tag),j(Oe.origChecksum),j(Le),j(Oe.origLength),Oe.outOffset=Le,(Le+=Oe.origLength)%4!=0&&(Le+=4-Le%4)}),we.forEach(function(Oe){var Ee,Fe=ie.slice(Oe.offset,Oe.offset+Oe.compLength);if(Oe.compLength!=Oe.origLength){var rt=new Uint8Array(Oe.origLength);Ee=new Uint8Array(Fe,2),K(Ee,rt)}else rt=new Uint8Array(Fe);qe.set(rt,Oe.outOffset);var nt=0;(Le=Oe.outOffset+Oe.origLength)%4!=0&&(nt=4-Le%4),qe.set(new Uint8Array(nt).buffer,Oe.outOffset+Oe.origLength),Re=Le+nt}),Je.slice(0,Re)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function U1e(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,o=2,l=4,u=8,h=16,d=32;let m;function _(z){if(!m){const H={R:o,L:s,D:l,C:h,U:d,T:u};m=new Map;for(let U in i){let P=0;i[U].split(",").forEach(K=>{let[ee,re]=K.split("+");ee=parseInt(ee,36),re=re?parseInt(re,36):0,m.set(P+=ee,H[U]);for(let ie=re;ie--;)m.set(++P,H[U])})}}return m.get(z)||d}const v=1,S=2,x=3,w=4,A=[null,"isol","init","fina","medi"];function k(z){const H=new Uint8Array(z.length);let U=d,P=v,K=-1;for(let ee=0;ee<z.length;ee++){const re=z.codePointAt(ee);let ie=_(re)|0,de=v;ie&u||(U&(s|l|h)?ie&(o|l|h)?(de=x,(P===v||P===x)&&H[K]++):ie&(s|d)&&(P===S||P===w)&&H[K]--:U&(o|d)&&(P===S||P===w)&&H[K]--,P=H[ee]=de,U=ie,K=ee,re>65535&&ee++)}return H}function O(z,H){const U=[];for(let K=0;K<H.length;K++){const ee=H.codePointAt(K);ee>65535&&K++,U.push(n.U.codeToGlyph(z,ee))}const P=z.GSUB;if(P){const{lookupList:K,featureList:ee}=P;let re;const ie=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,de=[];ee.forEach(oe=>{if(ie.test(oe.tag))for(let ce=0;ce<oe.tab.length;ce++){if(de[oe.tab[ce]])continue;de[oe.tab[ce]]=!0;const me=K[oe.tab[ce]],Ae=/^(isol|init|fina|medi)$/.test(oe.tag);Ae&&!re&&(re=k(H));for(let j=0;j<U.length;j++)(!re||!Ae||A[re[j]]===oe.tag)&&n.U._applySubs(U,j,me,K)}})}return U}function D(...z){for(let H=0;H<z.length;H++)if(typeof z[H]=="number")return z[H]}function L(z){const H=Object.create(null),U=z["OS/2"],P=z.hhea,K=z.head.unitsPerEm,ee=D(U&&U.sTypoAscender,P&&P.ascender,K),re={unitsPerEm:K,ascender:ee,descender:D(U&&U.sTypoDescender,P&&P.descender,0),capHeight:D(U&&U.sCapHeight,ee),xHeight:D(U&&U.sxHeight,ee),lineGap:D(U&&U.sTypoLineGap,P&&P.lineGap),forEachGlyph(ie,de,oe,ce){let me=0;const Ae=1/re.unitsPerEm*de,j=O(z,ie);let Z=0,ne=-1;return j.forEach((ae,_e)=>{if(ae!==-1){let Le=H[ae];if(!Le){const{cmds:we,crds:Xe}=n.U.glyphToPath(z,ae);let Re="",qe=0;for(let Ee=0,Fe=we.length;Ee<Fe;Ee++){const rt=t[we[Ee]];Re+=we[Ee];for(let nt=1;nt<=rt;nt++)Re+=(nt>1?",":"")+Xe[qe++]}let Je,ht,it,Oe;if(Xe.length){Je=ht=1/0,it=Oe=-1/0;for(let Ee=0,Fe=Xe.length;Ee<Fe;Ee+=2){let rt=Xe[Ee],nt=Xe[Ee+1];rt<Je&&(Je=rt),nt<ht&&(ht=nt),rt>it&&(it=rt),nt>Oe&&(Oe=nt)}}else Je=it=ht=Oe=0;Le=H[ae]={index:ae,advanceWidth:z.hmtx.aWidth[ae],xMin:Je,yMin:ht,xMax:it,yMax:Oe,path:Re,pathCommandCount:we.length}}ne!==-1&&(me+=n.U.getPairAdjustment(z,ne,ae)*Ae),ce.call(null,Le,me,Z),Le.advanceWidth&&(me+=Le.advanceWidth*Ae),oe&&(me+=oe*de),ne=ae}Z+=ie.codePointAt(Z)>65535?2:1}),me}};return re}return function(z){const H=new Uint8Array(z,0,4),U=n._bin.readASCII(H,0,4);if(U==="wOFF")z=e(z);else if(U==="wOF2")throw new Error("woff2 fonts not supported");return L(n.parse(z)[0])}}const z1e=qx({name:"Typr Font Parser",dependencies:[P1e,F1e,U1e],init(n,e,t){const i=n(),s=e();return t(i,s)}}),fT={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},H1e=new vn;function j1(){return(self.performance||Date).now()}const W5=Object.create(null);function oX(n,e){n=V1e({},n);const t=j1();if(n.font=j1e(n.font||fT.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||fT.sdfGlyphSize,n.colorRanges!=null){let _={};for(let v in n.colorRanges)if(n.colorRanges.hasOwnProperty(v)){let S=n.colorRanges[v];typeof S!="number"&&(S=H1e.set(S).getHex()),_[v]=S}n.colorRanges=_}Object.freeze(n);const{textureWidth:i,sdfExponent:s}=fT,{sdfGlyphSize:o}=n,l=i/o*4;let u=W5[o];if(!u){const _=document.createElement("canvas");_.width=i,_.height=o*256/l,u=W5[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:_,sdfTexture:new Fl(_,void 0,void 0,void 0,Xo,Xo),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,G1e(u)}const{sdfTexture:h,sdfCanvas:d}=u;let m=u.glyphsByFont.get(n.font);m||u.glyphsByFont.set(n.font,m=new Map),Y1e(n).then(_=>{const{glyphIds:v,glyphPositions:S,fontSize:x,unitsPerEm:w,timings:A}=_,k=[],O=new Float32Array(v.length*4),D=x/w;let L=0,z=0;const H=j1();v.forEach((re,ie)=>{let de=m.get(re);if(!de){const{path:Ae,pathBounds:j}=_.glyphData[re],Z=Math.max(j[2]-j[0],j[3]-j[1])/o*(fT.sdfMargin*o+.5),ne=u.glyphCount++,ae=[j[0]-Z,j[1]-Z,j[2]+Z,j[3]+Z];m.set(re,de={path:Ae,atlasIndex:ne,sdfViewBox:ae}),k.push(de)}const{sdfViewBox:oe}=de,ce=S[z++],me=S[z++];O[L++]=ce+oe[0]*D,O[L++]=me+oe[1]*D,O[L++]=ce+oe[2]*D,O[L++]=me+oe[3]*D,v[ie]=de.atlasIndex}),A.quads=(A.quads||0)+(j1()-H);const U=j1();A.sdf={};const P=d.height,K=Math.ceil(u.glyphCount/l),ee=Math.pow(2,Math.ceil(Math.log2(K*o)));ee>P&&(console.info(`Increasing SDF texture size ${P}->${ee}`),B1e(d,i,ee),h.dispose()),Promise.all(k.map(re=>aX(re,u,n.gpuAccelerateSDF).then(({timing:ie})=>{A.sdf[re.atlasIndex]=ie}))).then(()=>{k.length&&!u.contextLost&&(lX(u),h.needsUpdate=!0),A.sdfTotal=j1()-U,A.total=j1()-t,e(Object.freeze({parameters:n,sdfTexture:h,sdfGlyphSize:o,sdfExponent:s,glyphBounds:O,glyphAtlasIndices:v,glyphColors:_.glyphColors,caretPositions:_.caretPositions,caretHeight:_.caretHeight,chunkedBounds:_.chunkedBounds,ascender:_.ascender,descender:_.descender,lineHeight:_.lineHeight,capHeight:_.capHeight,xHeight:_.xHeight,topBaseline:_.topBaseline,blockBounds:_.blockBounds,visibleBounds:_.visibleBounds,timings:_.timings}))})}),Promise.resolve().then(()=>{u.contextLost||N1e(d)})}function aX({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:s,contextLost:o},l){if(o)return Promise.resolve({timing:-1});const{textureWidth:u,sdfExponent:h}=fT,d=Math.max(t[2]-t[0],t[3]-t[1]),m=Math.floor(e/4),_=m%(u/i)*i,v=Math.floor(m/(u/i))*i,S=e%4;return I1e(i,i,n,t,d,h,s,_,v,S,l)}function G1e(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(s=>{s.forEach(o=>{i.push(aX(o,n,!0))})}),Promise.all(i).then(()=>{lX(n),n.sdfTexture.needsUpdate=!0})})}function W1e({font:n,characters:e,sdfGlyphSize:t},i){let s=Array.isArray(e)?e.join(`
`):""+e;oX({font:n,sdfGlyphSize:t,text:s},i)}function V1e(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let bM;function j1e(n){return bM||(bM=typeof document>"u"?{}:document.createElement("a")),bM.href=n,bM.href}function lX(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:s}=e,o=n.sdfCanvas.getContext("webgl");let l=t.image.data;(!l||l.length!==i*s*4)&&(l=new Uint8Array(i*s*4),t.image={width:i,height:s,data:l},t.flipY=!1,t.isDataTexture=!0),o.readPixels(0,0,i,s,o.RGBA,o.UNSIGNED_BYTE,l)}}const X1e=qx({name:"Typesetter",dependencies:[fT,z1e,A1e,T1e],init(n,e,t,i){const{defaultFontURL:s}=n;return t(e,i(),{defaultFontURL:s})}}),Y1e=qx({name:"Typesetter",dependencies:[X1e],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),V5={};function K1e(n){let e=V5[n];if(!e){const t=new gg(1,1,n,n),i=t.clone(),s=t.attributes,o=i.attributes,l=new Or,u=s.uv.count;for(let h=0;h<u;h++)o.position.array[h*3]*=-1,o.normal.array[h*3+2]*=-1;["position","normal","uv"].forEach(h=>{l.setAttribute(h,new Fn([...s[h].array,...o[h].array],s[h].itemSize))}),l.setIndex([...t.index.array,...i.index.array.map(h=>h+u)]),l.translate(.5,.5,0),e=V5[n]=l}return e}const J1e="aTroikaGlyphBounds",j5="aTroikaGlyphIndex",Q1e="aTroikaGlyphColor";class q1e extends FR{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new c0,this.boundingBox=new vg}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===Gc?t/2:0,e===tp?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=K1e(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,s,o){DO(this,J1e,e,4),DO(this,j5,t,1),DO(this,Q1e,o,3),this._blockBounds=i,this._chunkedBounds=s,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:s,floor:o,min:l,max:u,sin:h,cos:d}=Math,m=s/2,_=s*2,v=Math.abs(t),S=e[0]/v,x=e[2]/v,w=o((S+m)/_)!==o((x+m)/_)?-v:l(h(S)*v,h(x)*v),A=o((S-m)/_)!==o((x-m)/_)?v:u(h(S)*v,h(x)*v),k=o((S+s)/_)!==o((x+s)/_)?v*2:u(v-d(S)*v,v-d(x)*v);i.min.set(w,e[1],t<0?-k:0),i.max.set(A,e[3],t<0?0:k)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(j5).count,i=this._chunkedBounds;if(i)for(let s=i.length;s--;){t=i[s].end;let o=i[s].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}this.instanceCount=t}}function DO(n,e,t,i){const s=n.getAttribute(e);t?s&&s.array.length===t.length?(s.array.set(t),s.needsUpdate=!0):(n.setAttribute(e,new gb(t,i)),delete n._maxInstanceCount,n.dispose()):s&&n.deleteAttribute(e)}const Z1e=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,eTe=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,tTe=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,nTe=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function rTe(n){const e=hN(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Dt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Ii(0,0,0,0)},uTroikaClipRect:{value:new Ii(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Dt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new vn},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new np},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Z1e,vertexTransform:eTe,fragmentDefs:tTe,fragmentColorTransform:nTe,customRewriter({vertexShader:t,fragmentShader:i}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(i)&&(i=i.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(t)||(t=t.replace(iX,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const iF=new yg({color:16777215,side:tp,transparent:!0}),X5=8421504,Y5=new Ar,TM=new be,NO=new be,YE=[],iTe=new be,BO="+x+y";function K5(n){return Array.isArray(n)?n[0]:n}let uX=()=>{const n=new Sn(new gg(1,1),iF);return uX=()=>n,n},cX=()=>{const n=new Sn(new gg(1,1,32,1),iF);return cX=()=>n,n};const sTe={type:"syncstart"},oTe={type:"synccomplete"},hX=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],aTe=hX.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class dX extends Sn{constructor(){const e=new q1e;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=X5,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=BO,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(sTe),oX({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(s=>s&&s())})),this.dispatchEvent(oTe),e&&e()})))}onBeforeRender(e,t,i,s,o,l){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=s0}onAfterRender(e,t,i,s,o,l){o._hadOwnSide?o.side=o._actualSide:delete o.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=iF.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=rTe(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function s(){e.removeEventListener("dispose",s),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return K5(this.material).getDepthMaterial()}get customDistanceMaterial(){return K5(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:u,blockBounds:h}=s;i.uTroikaSDFTexture.value=u,i.uTroikaSDFTextureSize.value.set(u.image.width,u.image.height),i.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,i.uTroikaSDFExponent.value=s.sdfExponent,i.uTroikaTotalBounds.value.fromArray(h),i.uTroikaUseGlyphColors.value=!t&&!!s.glyphColors;let d=0,m=0,_=0,v,S,x,w=0,A=0;if(t){let{outlineWidth:O,outlineOffsetX:D,outlineOffsetY:L,outlineBlur:z,outlineOpacity:H}=this;d=this._parsePercent(O)||0,m=Math.max(0,this._parsePercent(z)||0),v=H,w=this._parsePercent(D)||0,A=this._parsePercent(L)||0}else _=Math.max(0,this._parsePercent(this.strokeWidth)||0),_&&(x=this.strokeColor,i.uTroikaStrokeColor.value.set(x??X5),S=this.strokeOpacity,S==null&&(S=1)),v=this.fillOpacity;i.uTroikaDistanceOffset.value=d,i.uTroikaPositionOffset.value.set(w,A),i.uTroikaBlurRadius.value=m,i.uTroikaStrokeWidth.value=_,i.uTroikaStrokeOpacity.value=S,i.uTroikaFillOpacity.value=v??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let k=this.clipRect;if(k&&Array.isArray(k)&&k.length===4)i.uTroikaClipRect.value.fromArray(k);else{const O=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(h[0]-O,h[1]-O,h[2]+O,h[3]+O)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const o=t?this.outlineColor||0:this.color;if(o==null)delete e.color;else{const u=e.hasOwnProperty("color")?e.color:e.color=new vn;(o!==u._input||typeof o=="object")&&u.set(u._input=o)}let l=this.orientation||BO;if(l!==e._orientation){let u=i.uTroikaOrient.value;l=l.replace(/[^-+xyz]/g,"");let h=l!==BO&&l.match(/^([-+])([xyz])([-+])([xyz])$/);if(h){let[,d,m,_,v]=h;TM.set(0,0,0)[m]=d==="-"?1:-1,NO.set(0,0,0)[v]=_==="-"?-1:1,Y5.lookAt(iTe,TM.cross(NO),NO),u.setFromMatrix4(Y5)}else u.identity();e._orientation=l}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Dt){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new Dt){return TM.copy(e),this.localPositionToTextCoords(this.worldToLocal(TM),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:s}=this;if(i){const o=i.blockBounds,l=s?cX():uX(),u=l.geometry,{position:h,uv:d}=u.attributes;for(let m=0;m<d.count;m++){let _=o[0]+d.getX(m)*(o[2]-o[0]);const v=o[1]+d.getY(m)*(o[3]-o[1]);let S=0;s&&(S=s-Math.cos(_/s)*s,_=Math.sin(_/s)*s),h.setXYZ(m,_,v,S)}u.boundingSphere=this.geometry.boundingSphere,u.boundingBox=this.geometry.boundingBox,l.matrixWorld=this.matrixWorld,l.material.side=this.material.side,YE.length=0,l.raycast(e,YE);for(let m=0;m<YE.length;m++)YE[m].object=this,t.push(YE[m])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,aTe.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}}hX.forEach(n=>{const e="_private_"+n;Object.defineProperty(dX.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const lTe=he.forwardRef(({anchorX:n="center",anchorY:e="middle",font:t,fontSize:i=1,children:s,characters:o,onSync:l,...u},h)=>{const d=Gh(({invalidate:S})=>S),[m]=he.useState(()=>new dX),[_,v]=he.useMemo(()=>{const S=[];let x="";return he.Children.forEach(s,w=>{typeof w=="string"||typeof w=="number"?x+=w:S.push(w)}),[S,x]},[s]);return cbe(()=>new Promise(S=>W1e({font:t,characters:o},S)),["troika-text",t,o]),he.useLayoutEffect(()=>void m.sync(()=>{d(),l&&l(m)})),he.useEffect(()=>()=>m.dispose(),[m]),Yt("primitive",{object:m,ref:h,font:t,text:v,anchorX:n,anchorY:e,fontSize:i,...u,children:_})});var uTe=1/0,cTe=9007199254740991,hTe="[object Arguments]",dTe="[object Function]",pTe="[object GeneratorFunction]",fTe="[object Symbol]",mTe=typeof X0=="object"&&X0&&X0.Object===Object&&X0,gTe=typeof self=="object"&&self&&self.Object===Object&&self,_Te=mTe||gTe||Function("return this")();function vTe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function yTe(n,e){for(var t=-1,i=n?n.length:0,s=Array(i);++t<i;)s[t]=e(n[t],t,n);return s}function bTe(n,e){for(var t=-1,i=e.length,s=n.length;++t<i;)n[s+t]=e[t];return n}var sF=Object.prototype,TTe=sF.hasOwnProperty,oF=sF.toString,J5=_Te.Symbol,STe=sF.propertyIsEnumerable,Q5=J5?J5.isConcatSpreadable:void 0,q5=Math.max;function pX(n,e,t,i,s){var o=-1,l=n.length;for(t||(t=wTe),s||(s=[]);++o<l;){var u=n[o];e>0&&t(u)?e>1?pX(u,e-1,t,i,s):bTe(s,u):i||(s[s.length]=u)}return s}function ETe(n,e){return n=Object(n),$Te(n,e,function(t,i){return i in n})}function $Te(n,e,t){for(var i=-1,s=e.length,o={};++i<s;){var l=e[i],u=n[l];t(u,l)&&(o[l]=u)}return o}function xTe(n,e){return e=q5(e===void 0?n.length-1:e,0),function(){for(var t=arguments,i=-1,s=q5(t.length-e,0),o=Array(s);++i<s;)o[i]=t[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=t[i];return l[e]=o,vTe(n,this,l)}}function wTe(n){return ATe(n)||MTe(n)||!!(Q5&&n&&n[Q5])}function CTe(n){if(typeof n=="string"||DTe(n))return n;var e=n+"";return e=="0"&&1/n==-uTe?"-0":e}function MTe(n){return RTe(n)&&TTe.call(n,"callee")&&(!STe.call(n,"callee")||oF.call(n)==hTe)}var ATe=Array.isArray;function ITe(n){return n!=null&&OTe(n.length)&&!kTe(n)}function RTe(n){return fX(n)&&ITe(n)}function kTe(n){var e=LTe(n)?oF.call(n):"";return e==dTe||e==pTe}function OTe(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=cTe}function LTe(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function fX(n){return!!n&&typeof n=="object"}function DTe(n){return typeof n=="symbol"||fX(n)&&oF.call(n)==fTe}var NTe=xTe(function(n,e){return n==null?{}:ETe(n,yTe(pX(e,1),CTe))}),PO=NTe;const BTe=he.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:s=!0,onChange:o,onStart:l,onEnd:u,...h},d)=>{const m=Gh(z=>z.invalidate),_=Gh(z=>z.camera),v=Gh(z=>z.gl),S=Gh(z=>z.events),x=Gh(z=>z.setEvents),w=Gh(z=>z.set),A=Gh(z=>z.get),k=Gh(z=>z.performance),O=e||_,D=i||S.connected||v.domElement,L=he.useMemo(()=>new l1e(O),[O]);return Bf(()=>{L.enabled&&L.update()},-1),he.useEffect(()=>(L.connect(D),()=>void L.dispose()),[D,t,L,m]),he.useEffect(()=>{const z=P=>{m(),t&&k.regress(),o&&o(P)},H=P=>{l&&l(P)},U=P=>{u&&u(P)};return L.addEventListener("change",z),L.addEventListener("start",H),L.addEventListener("end",U),()=>{L.removeEventListener("start",H),L.removeEventListener("end",U),L.removeEventListener("change",z)}},[o,l,u,L,m,x]),he.useEffect(()=>{if(n){const z=A().controls;return w({controls:L}),()=>w({controls:z})}},[n,L]),Yt("primitive",{ref:d,object:L,enableDamping:s,...h})});class PTe extends OR{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:s}=i.capabilities;t.fragmentShader=t.fragmentShader.replace("#include <output_fragment>",`
        ${s?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <encodings_fragment>
      `)}}}const FTe=he.forwardRef((n,e)=>{const[t]=he.useState(()=>new PTe(null));return Yt("primitive",{...n,object:t,ref:e,attach:"material"})});function UTe(n){const e=n+"Geometry";return he.forwardRef(({args:t,children:i,...s},o)=>_c("mesh",{ref:o,...s,children:[Yt(e,{attach:"geometry",args:t}),i]}))}const zTe=UTe("circle");let by,KE;const HTe=he.createContext(null),Z5=new Ar,eG=new be,GTe=he.forwardRef(({children:n,range:e,limit:t=1e3,...i},s)=>{const o=he.useRef(null),[l,u]=he.useState([]),[[h,d,m]]=he.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);he.useEffect(()=>{o.current.geometry.attributes.position.needsUpdate=!0}),Bf(()=>{for(o.current.updateMatrix(),o.current.updateMatrixWorld(),Z5.copy(o.current.matrixWorld).invert(),o.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,l.length),by=0;by<l.length;by++)KE=l[by].current,KE.getWorldPosition(eG).applyMatrix4(Z5),eG.toArray(h,by*3),o.current.geometry.attributes.position.needsUpdate=!0,KE.matrixWorldNeedsUpdate=!0,KE.color.toArray(d,by*3),o.current.geometry.attributes.color.needsUpdate=!0,m.set([KE.size],by),o.current.geometry.attributes.size.needsUpdate=!0});const _=he.useMemo(()=>({getParent:()=>o,subscribe:v=>(u(S=>[...S,v]),()=>u(S=>S.filter(x=>x.current!==v.current)))}),[]);return he.createElement("points",sN({userData:{instances:l},matrixAutoUpdate:!1,ref:tF([s,o]),raycast:()=>null},i),_c("bufferGeometry",{children:[Yt("bufferAttribute",{attach:"attributes-position",count:h.length/3,array:h,itemSize:3,usage:Zy}),Yt("bufferAttribute",{attach:"attributes-color",count:d.length/3,array:d,itemSize:3,usage:Zy}),Yt("bufferAttribute",{attach:"attributes-size",count:m.length,array:m,itemSize:1,usage:Zy})]}),he.createElement(HTe.Provider,{value:_},n))}),WTe=he.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:s=3,...o},l)=>{const u=he.useRef(null);return Bf(()=>{const h=u.current.geometry.attributes;h.position.needsUpdate=!0,t&&(h.color.needsUpdate=!0),i&&(h.size.needsUpdate=!0)}),_c("points",{ref:tF([l,u]),...o,children:[_c("bufferGeometry",{children:[Yt("bufferAttribute",{attach:"attributes-position",count:e.length/s,array:e,itemSize:s,usage:Zy}),t&&Yt("bufferAttribute",{attach:"attributes-color",count:t.length/s,array:t,itemSize:3,usage:Zy}),i&&Yt("bufferAttribute",{attach:"attributes-size",count:i.length/s,array:i,itemSize:1,usage:Zy})]}),n]})}),VTe=he.forwardRef((n,e)=>n.positions instanceof Float32Array?Yt(WTe,{...n,ref:e}):Yt(GTe,{...n,ref:e})),tG=n=>{let e;const t=new Set,i=(l,u)=>{const h=typeof l=="function"?l(e):l;if(!Object.is(h,e)){const d=e;e=u??typeof h!="object"?h:Object.assign({},e,h),t.forEach(m=>m(e,d))}},s=()=>e,o={setState:i,getState:s,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return e=n(i,s,o),o},jTe=n=>n?tG(n):tG;var mX={exports:{}},FO={},nG={exports:{}},UO={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rG;function XTe(){if(rG)return UO;rG=1;var n=Sr;function e(_,v){return _===v&&(_!==0||1/_===1/v)||_!==_&&v!==v}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(_,v){var S=v(),x=i({inst:{value:S,getSnapshot:v}}),w=x[0].inst,A=x[1];return o(function(){w.value=S,w.getSnapshot=v,h(w)&&A({inst:w})},[_,S,v]),s(function(){return h(w)&&A({inst:w}),_(function(){h(w)&&A({inst:w})})},[_]),l(S),S}function h(_){var v=_.getSnapshot;_=_.value;try{var S=v();return!t(_,S)}catch{return!0}}function d(_,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:u;return UO.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,UO}var iG;function YTe(){return iG||(iG=1,function(n){n.exports=XTe()}(nG)),nG.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sG;function KTe(){if(sG)return FO;sG=1;var n=Sr,e=YTe();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var i=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,h=n.useDebugValue;return FO.useSyncExternalStoreWithSelector=function(d,m,_,v,S){var x=o(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=u(function(){function k(H){if(!O){if(O=!0,D=H,H=v(H),S!==void 0&&w.hasValue){var U=w.value;if(S(U,H))return L=U}return L=H}if(U=L,i(D,H))return U;var P=v(H);return S!==void 0&&S(U,P)?U:(D=H,L=P)}var O=!1,D,L,z=_===void 0?null:_;return[function(){return k(m())},z===null?void 0:function(){return k(z())}]},[m,_,v,S]);var A=s(d,x[0],x[1]);return l(function(){w.hasValue=!0,w.value=A},[A]),h(A),A},FO}(function(n){n.exports=KTe()})(mX);const JTe=Ij(mX.exports),{useSyncExternalStoreWithSelector:QTe}=JTe;function gX(n,e=n.getState,t){const i=QTe(n.subscribe,n.getState,n.getServerState||n.getState,e,t);return he.useDebugValue(i),i}const oG=n=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?jTe(n):n,t=(i,s)=>gX(e,i,s);return Object.assign(t,e),t},qTe=n=>n?oG(n):oG,ZTe=n=>(e,t,i)=>{const s=i.subscribe;return i.subscribe=(o,l,u)=>{let h=o;if(l){const d=(u==null?void 0:u.equalityFn)||Object.is;let m=o(i.getState());h=_=>{const v=o(_);if(!d(m,v)){const S=m;l(m=v,S)}},u!=null&&u.fireImmediately&&l(m,m)}return s(h)},n(e,t,i)},eSe=ZTe;function ug(n){for(var e=arguments.length,t=Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+n+(t.length?" "+t.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function sS(n){return!!n&&!!n[Af]}function yb(n){return!!n&&(function(e){if(!e||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;var i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===lSe}(n)||Array.isArray(n)||!!n[fG]||!!n.constructor[fG]||aF(n)||lF(n))}function xx(n,e,t){t===void 0&&(t=!1),$S(n)===0?(t?Object.keys:pF)(n).forEach(function(i){t&&typeof i=="symbol"||e(i,n[i],n)}):n.forEach(function(i,s){return e(s,i,n)})}function $S(n){var e=n[Af];return e?e.i>3?e.i-4:e.i:Array.isArray(n)?1:aF(n)?2:lF(n)?3:0}function pN(n,e){return $S(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function tSe(n,e){return $S(n)===2?n.get(e):n[e]}function _X(n,e,t){var i=$S(n);i===2?n.set(e,t):i===3?(n.delete(e),n.add(t)):n[e]=t}function nSe(n,e){return n===e?n!==0||1/n==1/e:n!=n&&e!=e}function aF(n){return oSe&&n instanceof Map}function lF(n){return aSe&&n instanceof Set}function Ry(n){return n.o||n.t}function uF(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var e=uSe(n);delete e[Af];for(var t=pF(e),i=0;i<t.length;i++){var s=t[i],o=e[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[s]})}return Object.create(Object.getPrototypeOf(n),e)}function cF(n,e){return e===void 0&&(e=!1),hF(n)||sS(n)||!yb(n)||($S(n)>1&&(n.set=n.add=n.clear=n.delete=rSe),Object.freeze(n),e&&xx(n,function(t,i){return cF(i,!0)},!0)),n}function rSe(){ug(2)}function hF(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function r0(n){var e=cSe[n];return e||ug(18,n),e}function aG(){return wx}function zO(n,e){e&&(r0("Patches"),n.u=[],n.s=[],n.v=e)}function nI(n){fN(n),n.p.forEach(iSe),n.p=null}function fN(n){n===wx&&(wx=n.l)}function lG(n){return wx={p:[],l:wx,h:n,m:!0,_:0}}function iSe(n){var e=n[Af];e.i===0||e.i===1?e.j():e.O=!0}function HO(n,e){e._=e.p.length;var t=e.p[0],i=n!==void 0&&n!==t;return e.h.g||r0("ES5").S(e,n,i),i?(t[Af].P&&(nI(e),ug(4)),yb(n)&&(n=rI(e,n),e.l||iI(e,n)),e.u&&r0("Patches").M(t[Af].t,n,e.u,e.s)):n=rI(e,t,[]),nI(e),e.u&&e.v(e.u,e.s),n!==vX?n:void 0}function rI(n,e,t){if(hF(e))return e;var i=e[Af];if(!i)return xx(e,function(o,l){return uG(n,i,e,o,l,t)},!0),e;if(i.A!==n)return e;if(!i.P)return iI(n,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var s=i.i===4||i.i===5?i.o=uF(i.k):i.o;xx(i.i===3?new Set(s):s,function(o,l){return uG(n,i,s,o,l,t)}),iI(n,s,!1),t&&n.u&&r0("Patches").R(i,t,n.u,n.s)}return i.o}function uG(n,e,t,i,s,o){if(sS(s)){var l=rI(n,s,o&&e&&e.i!==3&&!pN(e.D,i)?o.concat(i):void 0);if(_X(t,i,l),!sS(l))return;n.m=!1}if(yb(s)&&!hF(s)){if(!n.h.F&&n._<1)return;rI(n,s),e&&e.A.l||iI(n,s)}}function iI(n,e,t){t===void 0&&(t=!1),n.h.F&&n.m&&cF(e,t)}function GO(n,e){var t=n[Af];return(t?Ry(t):n)[e]}function cG(n,e){if(e in n)for(var t=Object.getPrototypeOf(n);t;){var i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Object.getPrototypeOf(t)}}function mN(n){n.P||(n.P=!0,n.l&&mN(n.l))}function WO(n){n.o||(n.o=uF(n.t))}function gN(n,e,t){var i=aF(e)?r0("MapSet").N(e,t):lF(e)?r0("MapSet").T(e,t):n.g?function(s,o){var l=Array.isArray(s),u={i:l?1:0,A:o?o.A:aG(),P:!1,I:!1,D:{},l:o,t:s,k:null,o:null,j:null,C:!1},h=u,d=_N;l&&(h=[u],d=l$);var m=Proxy.revocable(h,d),_=m.revoke,v=m.proxy;return u.k=v,u.j=_,v}(e,t):r0("ES5").J(e,t);return(t?t.A:aG()).p.push(i),i}function sSe(n){return sS(n)||ug(22,n),function e(t){if(!yb(t))return t;var i,s=t[Af],o=$S(t);if(s){if(!s.P&&(s.i<4||!r0("ES5").K(s)))return s.t;s.I=!0,i=hG(t,o),s.I=!1}else i=hG(t,o);return xx(i,function(l,u){s&&tSe(s.t,l)===u||_X(i,l,e(u))}),o===3?new Set(i):i}(n)}function hG(n,e){switch(e){case 2:return new Map(n);case 3:return Array.from(n)}return uF(n)}var dG,wx,dF=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",oSe=typeof Map<"u",aSe=typeof Set<"u",pG=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",vX=dF?Symbol.for("immer-nothing"):((dG={})["immer-nothing"]=!0,dG),fG=dF?Symbol.for("immer-draftable"):"__$immer_draftable",Af=dF?Symbol.for("immer-state"):"__$immer_state",lSe=""+Object.prototype.constructor,pF=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,uSe=Object.getOwnPropertyDescriptors||function(n){var e={};return pF(n).forEach(function(t){e[t]=Object.getOwnPropertyDescriptor(n,t)}),e},cSe={},_N={get:function(n,e){if(e===Af)return n;var t=Ry(n);if(!pN(t,e))return function(s,o,l){var u,h=cG(o,l);return h?"value"in h?h.value:(u=h.get)===null||u===void 0?void 0:u.call(s.k):void 0}(n,t,e);var i=t[e];return n.I||!yb(i)?i:i===GO(n.t,e)?(WO(n),n.o[e]=gN(n.A.h,i,n)):i},has:function(n,e){return e in Ry(n)},ownKeys:function(n){return Reflect.ownKeys(Ry(n))},set:function(n,e,t){var i=cG(Ry(n),e);if(i!=null&&i.set)return i.set.call(n.k,t),!0;if(!n.P){var s=GO(Ry(n),e),o=s==null?void 0:s[Af];if(o&&o.t===t)return n.o[e]=t,n.D[e]=!1,!0;if(nSe(t,s)&&(t!==void 0||pN(n.t,e)))return!0;WO(n),mN(n)}return n.o[e]===t&&typeof t!="number"&&(t!==void 0||e in n.o)||(n.o[e]=t,n.D[e]=!0,!0)},deleteProperty:function(n,e){return GO(n.t,e)!==void 0||e in n.t?(n.D[e]=!1,WO(n),mN(n)):delete n.D[e],n.o&&delete n.o[e],!0},getOwnPropertyDescriptor:function(n,e){var t=Ry(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.i!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty:function(){ug(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){ug(12)}},l$={};xx(_N,function(n,e){l$[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),l$.deleteProperty=function(n,e){return l$.set.call(this,n,e,void 0)},l$.set=function(n,e,t){return _N.set.call(this,n[0],e,t,n[0])};var hSe=function(){function n(t){var i=this;this.g=pG,this.F=!0,this.produce=function(s,o,l){if(typeof s=="function"&&typeof o!="function"){var u=o;o=s;var h=i;return function(w){var A=this;w===void 0&&(w=u);for(var k=arguments.length,O=Array(k>1?k-1:0),D=1;D<k;D++)O[D-1]=arguments[D];return h.produce(w,function(L){var z;return(z=o).call.apply(z,[A,L].concat(O))})}}var d;if(typeof o!="function"&&ug(6),l!==void 0&&typeof l!="function"&&ug(7),yb(s)){var m=lG(i),_=gN(i,s,void 0),v=!0;try{d=o(_),v=!1}finally{v?nI(m):fN(m)}return typeof Promise<"u"&&d instanceof Promise?d.then(function(w){return zO(m,l),HO(w,m)},function(w){throw nI(m),w}):(zO(m,l),HO(d,m))}if(!s||typeof s!="object"){if((d=o(s))===void 0&&(d=s),d===vX&&(d=void 0),i.F&&cF(d,!0),l){var S=[],x=[];r0("Patches").M(s,d,S,x),l(S,x)}return d}ug(21,s)},this.produceWithPatches=function(s,o){if(typeof s=="function")return function(d){for(var m=arguments.length,_=Array(m>1?m-1:0),v=1;v<m;v++)_[v-1]=arguments[v];return i.produceWithPatches(d,function(S){return s.apply(void 0,[S].concat(_))})};var l,u,h=i.produce(s,o,function(d,m){l=d,u=m});return typeof Promise<"u"&&h instanceof Promise?h.then(function(d){return[d,l,u]}):[h,l,u]},typeof(t==null?void 0:t.useProxies)=="boolean"&&this.setUseProxies(t.useProxies),typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=n.prototype;return e.createDraft=function(t){yb(t)||ug(8),sS(t)&&(t=sSe(t));var i=lG(this),s=gN(this,t,void 0);return s[Af].C=!0,fN(i),s},e.finishDraft=function(t,i){var s=t&&t[Af],o=s.A;return zO(o,i),HO(void 0,o)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!pG&&ug(20),this.g=t},e.applyPatches=function(t,i){var s;for(s=i.length-1;s>=0;s--){var o=i[s];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}s>-1&&(i=i.slice(s+1));var l=r0("Patches").$;return sS(t)?l(t,i):this.produce(t,function(u){return l(u,i)})},n}(),If=new hSe,dSe=If.produce;If.produceWithPatches.bind(If);If.setAutoFreeze.bind(If);If.setUseProxies.bind(If);If.applyPatches.bind(If);If.createDraft.bind(If);If.finishDraft.bind(If);const pSe=n=>(e,t,i)=>(i.setState=(s,o,...l)=>{const u=typeof s=="function"?dSe(s):s;return e(u,o,...l)},n(i.setState,t,i)),fSe=pSe;class mSe{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=gSe.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function gSe(){document.hidden===!1&&this.reset()}var dm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,i="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,m="__lodash_placeholder__",_=1,v=2,S=4,x=1,w=2,A=1,k=2,O=4,D=8,L=16,z=32,H=64,U=128,P=256,K=512,ee=30,re="...",ie=800,de=16,oe=1,ce=2,me=3,Ae=1/0,j=9007199254740991,Z=17976931348623157e292,ne=NaN,ae=4294967295,_e=ae-1,Le=ae>>>1,we=[["ary",U],["bind",A],["bindKey",k],["curry",D],["curryRight",L],["flip",K],["partial",z],["partialRight",H],["rearg",P]],Xe="[object Arguments]",Re="[object Array]",qe="[object AsyncFunction]",Je="[object Boolean]",ht="[object Date]",it="[object DOMException]",Oe="[object Error]",Ee="[object Function]",Fe="[object GeneratorFunction]",rt="[object Map]",nt="[object Number]",dt="[object Null]",It="[object Object]",mt="[object Promise]",wt="[object Proxy]",$t="[object RegExp]",pt="[object Set]",Te="[object String]",te="[object Symbol]",ke="[object Undefined]",ot="[object WeakMap]",ft="[object WeakSet]",xt="[object ArrayBuffer]",at="[object DataView]",Ge="[object Float32Array]",Ce="[object Float64Array]",X="[object Int8Array]",Q="[object Int16Array]",le="[object Int32Array]",$e="[object Uint8Array]",We="[object Uint8ClampedArray]",Ft="[object Uint16Array]",Be="[object Uint32Array]",Ut=/\b__p \+= '';/g,ut=/\b(__p \+=) '' \+/g,Ht=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zt=/&(?:amp|lt|gt|quot|#39);/g,En=/[&<>"']/g,Pr=RegExp(zt.source),Er=RegExp(En.source),Kr=/<%-([\s\S]+?)%>/g,or=/<%([\s\S]+?)%>/g,Wn=/<%=([\s\S]+?)%>/g,q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ge=/^\w*$/,Ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tt=/[\\^$.*+?()[\]{}|]/g,kt=RegExp(tt.source),qt=/^\s+/,_n=/\s/,Ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,Et=/,? & /,gt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nt=/[()=,{}\[\]\/\s]/,yn=/\\(\\)?/g,Pn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ir=/\w*$/,yr=/^[-+]0x[0-9a-f]+$/i,ni=/^0b[01]+$/i,$r=/^\[object .+?Constructor\]$/,Ir=/^0o[0-7]+$/i,ji=/^(?:0|[1-9]\d*)$/,Yo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oo=/($^)/,cl=/['\n\r\u2028\u2029\\]/g,Kt="\\ud800-\\udfff",dr="\\u0300-\\u036f",ga="\\ufe20-\\ufe2f",Ko="\\u20d0-\\u20ff",ms=dr+ga+Ko,gs="\\u2700-\\u27bf",di="a-z\\xdf-\\xf6\\xf8-\\xff",pr="\\xac\\xb1\\xd7\\xf7",fn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ur="\\u2000-\\u206f",wr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",nr="A-Z\\xc0-\\xd6\\xd8-\\xde",pi="\\ufe0e\\ufe0f",Zi=pr+fn+ur+wr,Xr="['’]",Fi="["+Kt+"]",Ua="["+Zi+"]",hl="["+ms+"]",vc="\\d+",Yu="["+gs+"]",Os="["+di+"]",Lo="[^"+Kt+Zi+vc+gs+di+nr+"]",hu="\\ud83c[\\udffb-\\udfff]",Ul="(?:"+hl+"|"+hu+")",_h="[^"+Kt+"]",Jo="(?:\\ud83c[\\udde6-\\uddff]){2}",rr="[\\ud800-\\udbff][\\udc00-\\udfff]",Ui="["+nr+"]",Vc="\\u200d",vh="(?:"+Os+"|"+Lo+")",yc="(?:"+Ui+"|"+Lo+")",dl="(?:"+Xr+"(?:d|ll|m|re|s|t|ve))?",du="(?:"+Xr+"(?:D|LL|M|RE|S|T|VE))?",pl=Ul+"?",fl="["+pi+"]?",qn="(?:"+Vc+"(?:"+[_h,Jo,rr].join("|")+")"+fl+pl+")*",Zn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ml="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",za=fl+pl+qn,_a="(?:"+[Yu,Jo,rr].join("|")+")"+za,zl="(?:"+[_h+hl+"?",hl,Jo,rr,Fi].join("|")+")",$i=RegExp(Xr,"g"),zi=RegExp(hl,"g"),gl=RegExp(hu+"(?="+hu+")|"+zl+za,"g"),kd=RegExp([Ui+"?"+Os+"+"+dl+"(?="+[Ua,Ui,"$"].join("|")+")",yc+"+"+du+"(?="+[Ua,Ui+vh,"$"].join("|")+")",Ui+"?"+vh+"+"+dl,Ui+"+"+du,ml,Zn,vc,_a].join("|"),"g"),Ls=RegExp("["+Vc+Kt+ms+pi+"]"),pu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Do=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Hl=-1,Yr={};Yr[Ge]=Yr[Ce]=Yr[X]=Yr[Q]=Yr[le]=Yr[$e]=Yr[We]=Yr[Ft]=Yr[Be]=!0,Yr[Xe]=Yr[Re]=Yr[xt]=Yr[Je]=Yr[at]=Yr[ht]=Yr[Oe]=Yr[Ee]=Yr[rt]=Yr[nt]=Yr[It]=Yr[$t]=Yr[pt]=Yr[Te]=Yr[ot]=!1;var fr={};fr[Xe]=fr[Re]=fr[xt]=fr[at]=fr[Je]=fr[ht]=fr[Ge]=fr[Ce]=fr[X]=fr[Q]=fr[le]=fr[rt]=fr[nt]=fr[It]=fr[$t]=fr[pt]=fr[Te]=fr[te]=fr[$e]=fr[We]=fr[Ft]=fr[Be]=!0,fr[Oe]=fr[Ee]=fr[ot]=!1;var Xi={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ds={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Gl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jc=parseFloat,Qo=parseInt,qo=typeof X0=="object"&&X0&&X0.Object===Object&&X0,mu=typeof self=="object"&&self&&self.Object===Object&&self,Jr=qo||mu||Function("return this")(),_s=e&&!e.nodeType&&e,Ri=_s&&!0&&n&&!n.nodeType&&n,ri=Ri&&Ri.exports===_s,va=ri&&qo.process,Hi=function(){try{var Ye=Ri&&Ri.require&&Ri.require("util").types;return Ye||va&&va.binding&&va.binding("util")}catch{}}(),gu=Hi&&Hi.isArrayBuffer,oo=Hi&&Hi.isDate,_u=Hi&&Hi.isMap,Ha=Hi&&Hi.isRegExp,fi=Hi&&Hi.isSet,ii=Hi&&Hi.isTypedArray;function zn(Ye,Ot,Tt){switch(Tt.length){case 0:return Ye.call(Ot);case 1:return Ye.call(Ot,Tt[0]);case 2:return Ye.call(Ot,Tt[0],Tt[1]);case 3:return Ye.call(Ot,Tt[0],Tt[1],Tt[2])}return Ye.apply(Ot,Tt)}function Qr(Ye,Ot,Tt,gn){for(var Nn=-1,er=Ye==null?0:Ye.length;++Nn<er;){var sr=Ye[Nn];Ot(gn,sr,Tt(sr),Ye)}return gn}function xi(Ye,Ot){for(var Tt=-1,gn=Ye==null?0:Ye.length;++Tt<gn&&Ot(Ye[Tt],Tt,Ye)!==!1;);return Ye}function Yh(Ye,Ot){for(var Tt=Ye==null?0:Ye.length;Tt--&&Ot(Ye[Tt],Tt,Ye)!==!1;);return Ye}function vu(Ye,Ot){for(var Tt=-1,gn=Ye==null?0:Ye.length;++Tt<gn;)if(!Ot(Ye[Tt],Tt,Ye))return!1;return!0}function vs(Ye,Ot){for(var Tt=-1,gn=Ye==null?0:Ye.length,Nn=0,er=[];++Tt<gn;){var sr=Ye[Tt];Ot(sr,Tt,Ye)&&(er[Nn++]=sr)}return er}function _l(Ye,Ot){var Tt=Ye==null?0:Ye.length;return!!Tt&&ao(Ye,Ot,0)>-1}function Kh(Ye,Ot,Tt){for(var gn=-1,Nn=Ye==null?0:Ye.length;++gn<Nn;)if(Tt(Ot,Ye[gn]))return!0;return!1}function mi(Ye,Ot){for(var Tt=-1,gn=Ye==null?0:Ye.length,Nn=Array(gn);++Tt<gn;)Nn[Tt]=Ot(Ye[Tt],Tt,Ye);return Nn}function yu(Ye,Ot){for(var Tt=-1,gn=Ot.length,Nn=Ye.length;++Tt<gn;)Ye[Nn+Tt]=Ot[Tt];return Ye}function pp(Ye,Ot,Tt,gn){var Nn=-1,er=Ye==null?0:Ye.length;for(gn&&er&&(Tt=Ye[++Nn]);++Nn<er;)Tt=Ot(Tt,Ye[Nn],Nn,Ye);return Tt}function fp(Ye,Ot,Tt,gn){var Nn=Ye==null?0:Ye.length;for(gn&&Nn&&(Tt=Ye[--Nn]);Nn--;)Tt=Ot(Tt,Ye[Nn],Nn,Ye);return Tt}function yh(Ye,Ot){for(var Tt=-1,gn=Ye==null?0:Ye.length;++Tt<gn;)if(Ot(Ye[Tt],Tt,Ye))return!0;return!1}var mp=Vr("length");function Vp(Ye){return Ye.split("")}function Ff(Ye){return Ye.match(gt)||[]}function gp(Ye,Ot,Tt){var gn;return Tt(Ye,function(Nn,er,sr){if(Ot(Nn,er,sr))return gn=er,!1}),gn}function Ku(Ye,Ot,Tt,gn){for(var Nn=Ye.length,er=Tt+(gn?1:-1);gn?er--:++er<Nn;)if(Ot(Ye[er],er,Ye))return er;return-1}function ao(Ye,Ot,Tt){return Ot===Ot?Sc(Ye,Ot,Tt):Ku(Ye,bh,Tt)}function bu(Ye,Ot,Tt,gn){for(var Nn=Tt-1,er=Ye.length;++Nn<er;)if(gn(Ye[Nn],Ot))return Nn;return-1}function bh(Ye){return Ye!==Ye}function ya(Ye,Ot){var Tt=Ye==null?0:Ye.length;return Tt?No(Ye,Ot)/Tt:ne}function Vr(Ye){return function(Ot){return Ot==null?t:Ot[Ye]}}function cr(Ye){return function(Ot){return Ye==null?t:Ye[Ot]}}function Xs(Ye,Ot,Tt,gn,Nn){return Nn(Ye,function(er,sr,In){Tt=gn?(gn=!1,er):Ot(Tt,er,sr,In)}),Tt}function Zo(Ye,Ot){var Tt=Ye.length;for(Ye.sort(Ot);Tt--;)Ye[Tt]=Ye[Tt].value;return Ye}function No(Ye,Ot){for(var Tt,gn=-1,Nn=Ye.length;++gn<Nn;){var er=Ot(Ye[gn]);er!==t&&(Tt=Tt===t?er:Tt+er)}return Tt}function Tu(Ye,Ot){for(var Tt=-1,gn=Array(Ye);++Tt<Ye;)gn[Tt]=Ot(Tt);return gn}function vl(Ye,Ot){return mi(Ot,function(Tt){return[Tt,Ye[Tt]]})}function Jh(Ye){return Ye&&Ye.slice(0,yl(Ye)+1).replace(qt,"")}function wi(Ye){return function(Ot){return Ye(Ot)}}function gi(Ye,Ot){return mi(Ot,function(Tt){return Ye[Tt]})}function hr(Ye,Ot){return Ye.has(Ot)}function Ci(Ye,Ot){for(var Tt=-1,gn=Ye.length;++Tt<gn&&ao(Ot,Ye[Tt],0)>-1;);return Tt}function ea(Ye,Ot){for(var Tt=Ye.length;Tt--&&ao(Ot,Ye[Tt],0)>-1;);return Tt}function Wl(Ye,Ot){for(var Tt=Ye.length,gn=0;Tt--;)Ye[Tt]===Ot&&++gn;return gn}var _p=cr(Xi),vp=cr(Ds);function Qh(Ye){return"\\"+Gl[Ye]}function Su(Ye,Ot){return Ye==null?t:Ye[Ot]}function Ju(Ye){return Ls.test(Ye)}function bc(Ye){return pu.test(Ye)}function Th(Ye){for(var Ot,Tt=[];!(Ot=Ye.next()).done;)Tt.push(Ot.value);return Tt}function Tc(Ye){var Ot=-1,Tt=Array(Ye.size);return Ye.forEach(function(gn,Nn){Tt[++Ot]=[Nn,gn]}),Tt}function Vl(Ye,Ot){return function(Tt){return Ye(Ot(Tt))}}function ta(Ye,Ot){for(var Tt=-1,gn=Ye.length,Nn=0,er=[];++Tt<gn;){var sr=Ye[Tt];(sr===Ot||sr===m)&&(Ye[Tt]=m,er[Nn++]=Tt)}return er}function Qu(Ye){var Ot=-1,Tt=Array(Ye.size);return Ye.forEach(function(gn){Tt[++Ot]=gn}),Tt}function Sh(Ye){var Ot=-1,Tt=Array(Ye.size);return Ye.forEach(function(gn){Tt[++Ot]=[gn,gn]}),Tt}function Sc(Ye,Ot,Tt){for(var gn=Tt-1,Nn=Ye.length;++gn<Nn;)if(Ye[gn]===Ot)return gn;return-1}function Ec(Ye,Ot,Tt){for(var gn=Tt+1;gn--;)if(Ye[gn]===Ot)return gn;return gn}function ys(Ye){return Ju(Ye)?bl(Ye):mp(Ye)}function qr(Ye){return Ju(Ye)?jl(Ye):Vp(Ye)}function yl(Ye){for(var Ot=Ye.length;Ot--&&_n.test(Ye.charAt(Ot)););return Ot}var na=cr(fu);function bl(Ye){for(var Ot=gl.lastIndex=0;gl.test(Ye);)++Ot;return Ot}function jl(Ye){return Ye.match(gl)||[]}function Xc(Ye){return Ye.match(kd)||[]}var Od=function Ye(Ot){Ot=Ot==null?Jr:_i.defaults(Jr.Object(),Ot,_i.pick(Jr,Do));var Tt=Ot.Array,gn=Ot.Date,Nn=Ot.Error,er=Ot.Function,sr=Ot.Math,In=Ot.Object,Rr=Ot.RegExp,Ns=Ot.String,bs=Ot.TypeError,To=Tt.prototype,ba=er.prototype,Yi=In.prototype,ls=Ot["__core-js_shared__"],$c=ba.toString,Fr=Yi.hasOwnProperty,Bo=0,Bs=function(){var T=/[^.]+$/.exec(ls&&ls.keys&&ls.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),Ys=Yi.toString,ra=$c.call(In),Eh=Jr._,Yc=Rr("^"+$c.call(Fr).replace(tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$h=ri?Ot.Buffer:t,Eu=Ot.Symbol,qh=Ot.Uint8Array,Zh=$h?$h.allocUnsafe:t,Tl=Vl(In.getPrototypeOf,In),ed=In.create,xc=Yi.propertyIsEnumerable,Kc=To.splice,Ld=Eu?Eu.isConcatSpreadable:t,Ga=Eu?Eu.iterator:t,Ta=Eu?Eu.toStringTag:t,$u=function(){try{var T=Bu(In,"defineProperty");return T({},"",{}),T}catch{}}(),xh=Ot.clearTimeout!==Jr.clearTimeout&&Ot.clearTimeout,si=gn&&gn.now!==Jr.Date.now&&gn.now,td=Ot.setTimeout!==Jr.setTimeout&&Ot.setTimeout,Jc=sr.ceil,qu=sr.floor,wh=In.getOwnPropertySymbols,Dd=$h?$h.isBuffer:t,Sl=Ot.isFinite,Nd=To.join,Ch=Vl(In.keys,In),lo=sr.max,ia=sr.min,Uf=gn.now,jp=Ot.parseInt,El=sr.random,$l=To.reverse,wc=Bu(Ot,"DataView"),Mh=Bu(Ot,"Map"),nd=Bu(Ot,"Promise"),Zu=Bu(Ot,"Set"),Wa=Bu(Ot,"WeakMap"),ec=Bu(In,"create"),rd=Wa&&new Wa,Cc={},Mc=uc(wc),tc=uc(Mh),Bd=uc(nd),sa=uc(Zu),Cr=uc(Wa),Xl=Eu?Eu.prototype:t,es=Xl?Xl.valueOf:t,oa=Xl?Xl.toString:t;function ve(T){if(il(T)&&!zr(T)&&!(T instanceof Hn)){if(T instanceof Hr)return T;if(Fr.call(T,"__wrapped__"))return Tp(T)}return new Hr(T)}var Ks=function(){function T(){}return function(C){if(!Da(C))return{};if(ed)return ed(C);T.prototype=C;var F=new T;return T.prototype=t,F}}();function Va(){}function Hr(T,C){this.__wrapped__=T,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=t}ve.templateSettings={escape:Kr,evaluate:or,interpolate:Wn,variable:"",imports:{_:ve}},ve.prototype=Va.prototype,ve.prototype.constructor=ve,Hr.prototype=Ks(Va.prototype),Hr.prototype.constructor=Hr;function Hn(T){this.__wrapped__=T,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ae,this.__views__=[]}function Xp(){var T=new Hn(this.__wrapped__);return T.__actions__=is(this.__actions__),T.__dir__=this.__dir__,T.__filtered__=this.__filtered__,T.__iteratees__=is(this.__iteratees__),T.__takeCount__=this.__takeCount__,T.__views__=is(this.__views__),T}function Sa(){if(this.__filtered__){var T=new Hn(this);T.__dir__=-1,T.__filtered__=!0}else T=this.clone(),T.__dir__*=-1;return T}function Zr(){var T=this.__wrapped__.value(),C=this.__dir__,F=zr(T),Y=C<0,ue=F?T.length:0,ye=nn(0,ue,this.__views__),He=ye.start,Qe=ye.end,ct=Qe-He,Wt=Y?Qe:He-1,Vt=this.__iteratees__,Zt=Vt.length,Tn=0,kn=ia(ct,this.__takeCount__);if(!F||!Y&&ue==ct&&kn==ct)return rh(T,this.__actions__);var _r=[];e:for(;ct--&&Tn<kn;){Wt+=C;for(var Br=-1,ar=T[Wt];++Br<Zt;){var ci=Vt[Br],Ti=ci.iteratee,_d=ci.type,ch=Ti(ar);if(_d==ce)ar=ch;else if(!ch){if(_d==oe)continue e;break e}}_r[Tn++]=ar}return _r}Hn.prototype=Ks(Va.prototype),Hn.prototype.constructor=Hn;function vi(T){var C=-1,F=T==null?0:T.length;for(this.clear();++C<F;){var Y=T[C];this.set(Y[0],Y[1])}}function Mi(){this.__data__=ec?ec(null):{},this.size=0}function ki(T){var C=this.has(T)&&delete this.__data__[T];return this.size-=C?1:0,C}function Ac(T){var C=this.__data__;if(ec){var F=C[T];return F===h?t:F}return Fr.call(C,T)?C[T]:t}function Po(T){var C=this.__data__;return ec?C[T]!==t:Fr.call(C,T)}function Fo(T,C){var F=this.__data__;return this.size+=this.has(T)?0:1,F[T]=ec&&C===t?h:C,this}vi.prototype.clear=Mi,vi.prototype.delete=ki,vi.prototype.get=Ac,vi.prototype.has=Po,vi.prototype.set=Fo;function uo(T){var C=-1,F=T==null?0:T.length;for(this.clear();++C<F;){var Y=T[C];this.set(Y[0],Y[1])}}function Ic(){this.__data__=[],this.size=0}function So(T){var C=this.__data__,F=cs(C,T);if(F<0)return!1;var Y=C.length-1;return F==Y?C.pop():Kc.call(C,F,1),--this.size,!0}function Pd(T){var C=this.__data__,F=cs(C,T);return F<0?t:C[F][1]}function Fd(T){return cs(this.__data__,T)>-1}function Ah(T,C){var F=this.__data__,Y=cs(F,T);return Y<0?(++this.size,F.push([T,C])):F[Y][1]=C,this}uo.prototype.clear=Ic,uo.prototype.delete=So,uo.prototype.get=Pd,uo.prototype.has=Fd,uo.prototype.set=Ah;function Ea(T){var C=-1,F=T==null?0:T.length;for(this.clear();++C<F;){var Y=T[C];this.set(Y[0],Y[1])}}function Mn(){this.size=0,this.__data__={hash:new vi,map:new(Mh||uo),string:new vi}}function us(T){var C=cd(this,T).delete(T);return this.size-=C?1:0,C}function Ts(T){return cd(this,T).get(T)}function oi(T){return cd(this,T).has(T)}function xl(T,C){var F=cd(this,T),Y=F.size;return F.set(T,C),this.size+=F.size==Y?0:1,this}Ea.prototype.clear=Mn,Ea.prototype.delete=us,Ea.prototype.get=Ts,Ea.prototype.has=oi,Ea.prototype.set=xl;function wl(T){var C=-1,F=T==null?0:T.length;for(this.__data__=new Ea;++C<F;)this.add(T[C])}function hn(T){return this.__data__.set(T,h),this}function Gr(T){return this.__data__.has(T)}wl.prototype.add=wl.prototype.push=hn,wl.prototype.has=Gr;function ts(T){var C=this.__data__=new uo(T);this.size=C.size}function Yp(){this.__data__=new uo,this.size=0}function Qc(T){var C=this.__data__,F=C.delete(T);return this.size=C.size,F}function Ps(T){return this.__data__.get(T)}function Uo(T){return this.__data__.has(T)}function pn(T,C){var F=this.__data__;if(F instanceof uo){var Y=F.__data__;if(!Mh||Y.length<s-1)return Y.push([T,C]),this.size=++F.size,this;F=this.__data__=new Ea(Y)}return F.set(T,C),this.size=F.size,this}ts.prototype.clear=Yp,ts.prototype.delete=Qc,ts.prototype.get=Ps,ts.prototype.has=Uo,ts.prototype.set=pn;function sn(T,C){var F=zr(T),Y=!F&&S0(T),ue=!F&&!Y&&Jf(T),ye=!F&&!Y&&!ue&&Og(T),He=F||Y||ue||ye,Qe=He?Tu(T.length,Ns):[],ct=Qe.length;for(var Wt in T)(C||Fr.call(T,Wt))&&!(He&&(Wt=="length"||ue&&(Wt=="offset"||Wt=="parent")||ye&&(Wt=="buffer"||Wt=="byteLength"||Wt=="byteOffset")||lh(Wt,ct)))&&Qe.push(Wt);return Qe}function ja(T){var C=T.length;return C?T[Es(0,C-1)]:t}function nc(T,C){return Qn(is(T),rc(C,0,T.length))}function zf(T){return Qn(is(T))}function xu(T,C,F){(F!==t&&!Dh(T[C],F)||F===t&&!(C in T))&&wu(T,C,F)}function aa(T,C,F){var Y=T[C];(!(Fr.call(T,C)&&Dh(Y,F))||F===t&&!(C in T))&&wu(T,C,F)}function cs(T,C){for(var F=T.length;F--;)if(Dh(T[F][0],C))return F;return-1}function $a(T,C,F,Y){return Cl(T,function(ue,ye,He){C(Y,ue,F(ue),He)}),Y}function Gi(T,C){return T&&Co(C,ha(C),T)}function xa(T,C){return T&&Co(C,Na(C),T)}function wu(T,C,F){C=="__proto__"&&$u?$u(T,C,{configurable:!0,enumerable:!0,value:F,writable:!0}):T[C]=F}function Ud(T,C){for(var F=-1,Y=C.length,ue=Tt(Y),ye=T==null;++F<Y;)ue[F]=ye?t:E0(T,C[F]);return ue}function rc(T,C,F){return T===T&&(F!==t&&(T=T<=F?T:F),C!==t&&(T=T>=C?T:C)),T}function Js(T,C,F,Y,ue,ye){var He,Qe=C&_,ct=C&v,Wt=C&S;if(F&&(He=ue?F(T,Y,ue,ye):F(T)),He!==t)return He;if(!Da(T))return T;var Vt=zr(T);if(Vt){if(He=Sg(T),!Qe)return is(T,He)}else{var Zt=eu(T),Tn=Zt==Ee||Zt==Fe;if(Jf(T))return oh(T,Qe);if(Zt==It||Zt==Xe||Tn&&!ue){if(He=ct||Tn?{}:Dc(T),!Qe)return ct?ld(T,xa(He,T)):kh(T,Gi(He,T))}else{if(!fr[Zt])return ue?T:{};He=xs(T,Zt,Qe)}}ye||(ye=new ts);var kn=ye.get(T);if(kn)return kn;ye.set(T,He),Ub(T)?T.forEach(function(ar){He.add(Js(ar,C,F,ar,T,ye))}):fd(T)&&T.forEach(function(ar,ci){He.set(ci,Js(ar,C,F,ci,T,ye))});var _r=Wt?ct?mr:Xn:ct?Na:ha,Br=Vt?t:_r(T);return xi(Br||T,function(ar,ci){Br&&(ci=ar,ar=T[ci]),aa(He,ci,Js(ar,C,F,ci,T,ye))}),He}function zd(T){var C=ha(T);return function(F){return qc(F,T,C)}}function qc(T,C,F){var Y=F.length;if(T==null)return!Y;for(T=In(T);Y--;){var ue=F[Y],ye=C[ue],He=T[ue];if(He===t&&!(ue in T)||!ye(He))return!1}return!0}function id(T,C,F){if(typeof T!="function")throw new bs(l);return xg(function(){T.apply(t,F)},C)}function wa(T,C,F,Y){var ue=-1,ye=_l,He=!0,Qe=T.length,ct=[],Wt=C.length;if(!Qe)return ct;F&&(C=mi(C,wi(F))),Y?(ye=Kh,He=!1):C.length>=s&&(ye=hr,He=!1,C=new wl(C));e:for(;++ue<Qe;){var Vt=T[ue],Zt=F==null?Vt:F(Vt);if(Vt=Y||Vt!==0?Vt:0,He&&Zt===Zt){for(var Tn=Wt;Tn--;)if(C[Tn]===Zt)continue e;ct.push(Vt)}else ye(C,Zt,Y)||ct.push(Vt)}return ct}var Cl=ud(Eo),Kp=ud(Xa,!0);function Yl(T,C){var F=!0;return Cl(T,function(Y,ue,ye){return F=!!C(Y,ue,ye),F}),F}function Cu(T,C,F){for(var Y=-1,ue=T.length;++Y<ue;){var ye=T[Y],He=C(ye);if(He!=null&&(Qe===t?He===He&&!md(He):F(He,Qe)))var Qe=He,ct=ye}return ct}function sd(T,C,F,Y){var ue=T.length;for(F=Mr(F),F<0&&(F=-F>ue?0:ue+F),Y=Y===t||Y>ue?ue:Mr(Y),Y<0&&(Y+=ue),Y=F>Y?0:jv(Y);F<Y;)T[F++]=C;return T}function Rc(T,C){var F=[];return Cl(T,function(Y,ue,ye){C(Y,ue,ye)&&F.push(Y)}),F}function hs(T,C,F,Y,ue){var ye=-1,He=T.length;for(F||(F=Hd),ue||(ue=[]);++ye<He;){var Qe=T[ye];C>0&&F(Qe)?C>1?hs(Qe,C-1,F,Y,ue):yu(ue,Qe):Y||(ue[ue.length]=Qe)}return ue}var Mu=Lc(),ic=Lc(!0);function Eo(T,C){return T&&Mu(T,C,ha)}function Xa(T,C){return T&&ic(T,C,ha)}function Ss(T,C){return vs(C,function(F){return Qf(T[F])})}function co(T,C){C=Lu(C,T);for(var F=0,Y=C.length;T!=null&&F<Y;)T=T[tu(C[F++])];return F&&F==Y?T:t}function Zc(T,C,F){var Y=C(T);return zr(T)?Y:yu(Y,F(T))}function Qs(T){return T==null?T===t?ke:dt:Ta&&Ta in In(T)?Ia(T):p0(T)}function Ya(T,C){return T>C}function sc(T,C){return T!=null&&Fr.call(T,C)}function yp(T,C){return T!=null&&C in In(T)}function eh(T,C,F){return T>=ia(C,F)&&T<lo(C,F)}function la(T,C,F){for(var Y=F?Kh:_l,ue=T[0].length,ye=T.length,He=ye,Qe=Tt(ye),ct=1/0,Wt=[];He--;){var Vt=T[He];He&&C&&(Vt=mi(Vt,wi(C))),ct=ia(Vt.length,ct),Qe[He]=!F&&(C||ue>=120&&Vt.length>=120)?new wl(He&&Vt):t}Vt=T[0];var Zt=-1,Tn=Qe[0];e:for(;++Zt<ue&&Wt.length<ct;){var kn=Vt[Zt],_r=C?C(kn):kn;if(kn=F||kn!==0?kn:0,!(Tn?hr(Tn,_r):Y(Wt,_r,F))){for(He=ye;--He;){var Br=Qe[He];if(!(Br?hr(Br,_r):Y(T[He],_r,F)))continue e}Tn&&Tn.push(_r),Wt.push(kn)}}return Wt}function yi(T,C,F,Y){return Eo(T,function(ue,ye,He){C(Y,F(ue),ye,He)}),Y}function Cn(T,C,F){C=Lu(C,T),T=Am(T,C);var Y=T==null?T:T[tu(kl(C))];return Y==null?t:zn(Y,T,F)}function Ln(T){return il(T)&&Qs(T)==Xe}function br(T){return il(T)&&Qs(T)==xt}function Lr(T){return il(T)&&Qs(T)==ht}function Wr(T,C,F,Y,ue){return T===C?!0:T==null||C==null||!il(T)&&!il(C)?T!==T&&C!==C:qs(T,C,F,Y,Wr,ue)}function qs(T,C,F,Y,ue,ye){var He=zr(T),Qe=zr(C),ct=He?Re:eu(T),Wt=Qe?Re:eu(C);ct=ct==Xe?It:ct,Wt=Wt==Xe?It:Wt;var Vt=ct==It,Zt=Wt==It,Tn=ct==Wt;if(Tn&&Jf(T)){if(!Jf(C))return!1;He=!0,Vt=!1}if(Tn&&!Vt)return ye||(ye=new ts),He||Og(T)?Jt(T,C,F,Y,ue,ye):un(T,C,ct,F,Y,ue,ye);if(!(F&x)){var kn=Vt&&Fr.call(T,"__wrapped__"),_r=Zt&&Fr.call(C,"__wrapped__");if(kn||_r){var Br=kn?T.value():T,ar=_r?C.value():C;return ye||(ye=new ts),ue(Br,ar,F,Y,ye)}}return Tn?(ye||(ye=new ts),mn(T,C,F,Y,ue,ye)):!1}function Oi(T){return il(T)&&eu(T)==rt}function Wi(T,C,F,Y){var ue=F.length,ye=ue,He=!Y;if(T==null)return!ye;for(T=In(T);ue--;){var Qe=F[ue];if(He&&Qe[2]?Qe[1]!==T[Qe[0]]:!(Qe[0]in T))return!1}for(;++ue<ye;){Qe=F[ue];var ct=Qe[0],Wt=T[ct],Vt=Qe[1];if(He&&Qe[2]){if(Wt===t&&!(ct in T))return!1}else{var Zt=new ts;if(Y)var Tn=Y(Wt,Vt,ct,T,C,Zt);if(!(Tn===t?Wr(Vt,Wt,x|w,Y,Zt):Tn))return!1}}return!0}function Kl(T){if(!Da(T)||ws(T))return!1;var C=Qf(T)?Yc:$r;return C.test(uc(T))}function Au(T){return il(T)&&Qs(T)==$t}function oc(T){return il(T)&&eu(T)==pt}function Iu(T){return il(T)&&Xd(T.length)&&!!Yr[Qs(T)]}function Fs(T){return typeof T=="function"?T:T==null?Ph:typeof T=="object"?zr(T)?Zs(T[0],T[1]):ku(T):Qb(T)}function ho(T){if(!dd(T))return Ch(T);var C=[];for(var F in In(T))Fr.call(T,F)&&F!="constructor"&&C.push(F);return C}function od(T){if(!Da(T))return zo(T);var C=dd(T),F=[];for(var Y in T)Y=="constructor"&&(C||!Fr.call(T,Y))||F.push(Y);return F}function Ca(T,C){return T<C}function Ru(T,C){var F=-1,Y=Ho(T)?Tt(T.length):[];return Cl(T,function(ue,ye,He){Y[++F]=C(ue,ye,He)}),Y}function ku(T){var C=d0(T);return C.length==1&&C[0][2]?Eg(C[0][0],C[0][1]):function(F){return F===T||Wi(F,T,C)}}function Zs(T,C){return Ra(T)&&Mm(C)?Eg(tu(T),C):function(F){var Y=E0(F,T);return Y===t&&Y===C?$0(F,T):Wr(C,Y,x|w)}}function $o(T,C,F,Y,ue){T!==C&&Mu(C,function(ye,He){if(ue||(ue=new ts),Da(ye))Ka(T,C,He,F,$o,Y,ue);else{var Qe=Y?Y(Pu(T,He),ye,He+"",T,C,ue):t;Qe===t&&(Qe=ye),xu(T,He,Qe)}},Na)}function Ka(T,C,F,Y,ue,ye,He){var Qe=Pu(T,F),ct=Pu(C,F),Wt=He.get(ct);if(Wt){xu(T,F,Wt);return}var Vt=ye?ye(Qe,ct,F+"",T,C,He):t,Zt=Vt===t;if(Zt){var Tn=zr(ct),kn=!Tn&&Jf(ct),_r=!Tn&&!kn&&Og(ct);Vt=ct,Tn||kn||_r?zr(Qe)?Vt=Qe:mo(Qe)?Vt=is(Qe):kn?(Zt=!1,Vt=oh(ct,!0)):_r?(Zt=!1,Vt=Al(ct,!0)):Vt=[]:Nr(ct)||S0(ct)?(Vt=Qe,S0(Qe)?Vt=iw(Qe):(!Da(Qe)||Qf(Qe))&&(Vt=Dc(ct))):Zt=!1}Zt&&(He.set(ct,Vt),ue(Vt,ct,Y,ye,He),He.delete(ct)),xu(T,F,Vt)}function xo(T,C){var F=T.length;if(F)return C+=C<0?F:0,lh(C,F)?T[C]:t}function ac(T,C,F){C.length?C=mi(C,function(ye){return zr(ye)?function(He){return co(He,ye.length===1?ye[0]:ye)}:ye}):C=[Ph];var Y=-1;C=mi(C,wi(Jn()));var ue=Ru(T,function(ye,He,Qe){var ct=mi(C,function(Wt){return Wt(ye)});return{criteria:ct,index:++Y,value:ye}});return Zo(ue,function(ye,He){return qa(ye,He,F)})}function Ou(T,C){return Ih(T,C,function(F,Y){return $0(T,Y)})}function Ih(T,C,F){for(var Y=-1,ue=C.length,ye={};++Y<ue;){var He=C[Y],Qe=co(T,He);F(Qe,He)&&ai(ye,Lu(He,T),Qe)}return ye}function th(T){return function(C){return co(C,T)}}function xr(T,C,F,Y){var ue=Y?bu:ao,ye=-1,He=C.length,Qe=T;for(T===C&&(C=is(C)),F&&(Qe=mi(T,wi(F)));++ye<He;)for(var ct=0,Wt=C[ye],Vt=F?F(Wt):Wt;(ct=ue(Qe,Vt,ct,Y))>-1;)Qe!==T&&Kc.call(Qe,ct,1),Kc.call(T,ct,1);return T}function Ki(T,C){for(var F=T?C.length:0,Y=F-1;F--;){var ue=C[F];if(F==Y||ue!==ye){var ye=ue;lh(ue)?Kc.call(T,ue,1):Rh(T,ue)}}return T}function Es(T,C){return T+qu(El()*(C-T+1))}function ua(T,C,F,Y){for(var ue=-1,ye=lo(Jc((C-T)/(F||1)),0),He=Tt(ye);ye--;)He[Y?ye:++ue]=T,T+=F;return He}function Us(T,C){var F="";if(!T||C<1||C>j)return F;do C%2&&(F+=T),C=qu(C/2),C&&(T+=T);while(C);return F}function Vn(T,C){return Zp($g(T,C,Ph),T+"")}function kc(T){return ja(w0(T))}function an(T,C){var F=w0(T);return Qn(F,rc(C,0,F.length))}function ai(T,C,F,Y){if(!Da(T))return T;C=Lu(C,T);for(var ue=-1,ye=C.length,He=ye-1,Qe=T;Qe!=null&&++ue<ye;){var ct=tu(C[ue]),Wt=F;if(ct==="__proto__"||ct==="constructor"||ct==="prototype")return T;if(ue!=He){var Vt=Qe[ct];Wt=Y?Y(Vt,ct,Qe):t,Wt===t&&(Wt=Da(Vt)?Vt:lh(C[ue+1])?[]:{})}aa(Qe,ct,Wt),Qe=Qe[ct]}return T}var ns=rd?function(T,C){return rd.set(T,C),T}:Ph,Ml=$u?function(T,C){return $u(T,"toString",{configurable:!0,enumerable:!1,value:YS(C),writable:!0})}:Ph;function Ja(T){return Qn(w0(T))}function Bt(T,C,F){var Y=-1,ue=T.length;C<0&&(C=-C>ue?0:ue+C),F=F>ue?ue:F,F<0&&(F+=ue),ue=C>F?0:F-C>>>0,C>>>=0;for(var ye=Tt(ue);++Y<ue;)ye[Y]=T[Y+C];return ye}function Ma(T,C){var F;return Cl(T,function(Y,ue,ye){return F=C(Y,ue,ye),!F}),!!F}function Dr(T,C,F){var Y=0,ue=T==null?Y:T.length;if(typeof C=="number"&&C===C&&ue<=Le){for(;Y<ue;){var ye=Y+ue>>>1,He=T[ye];He!==null&&!md(He)&&(F?He<=C:He<C)?Y=ye+1:ue=ye}return ue}return Oc(T,C,Ph,F)}function Oc(T,C,F,Y){var ue=0,ye=T==null?0:T.length;if(ye===0)return 0;C=F(C);for(var He=C!==C,Qe=C===null,ct=md(C),Wt=C===t;ue<ye;){var Vt=qu((ue+ye)/2),Zt=F(T[Vt]),Tn=Zt!==t,kn=Zt===null,_r=Zt===Zt,Br=md(Zt);if(He)var ar=Y||_r;else Wt?ar=_r&&(Y||Tn):Qe?ar=_r&&Tn&&(Y||!kn):ct?ar=_r&&Tn&&!kn&&(Y||!Br):kn||Br?ar=!1:ar=Y?Zt<=C:Zt<C;ar?ue=Vt+1:ye=Vt}return ia(ye,_e)}function ad(T,C){for(var F=-1,Y=T.length,ue=0,ye=[];++F<Y;){var He=T[F],Qe=C?C(He):He;if(!F||!Dh(Qe,ct)){var ct=Qe;ye[ue++]=He===0?0:He}}return ye}function nh(T){return typeof T=="number"?T:md(T)?ne:+T}function rs(T){if(typeof T=="string")return T;if(zr(T))return mi(T,rs)+"";if(md(T))return oa?oa.call(T):"";var C=T+"";return C=="0"&&1/T==-Ae?"-0":C}function $s(T,C,F){var Y=-1,ue=_l,ye=T.length,He=!0,Qe=[],ct=Qe;if(F)He=!1,ue=Kh;else if(ye>=s){var Wt=C?null:Tr(T);if(Wt)return Qu(Wt);He=!1,ue=hr,ct=new wl}else ct=C?[]:Qe;e:for(;++Y<ye;){var Vt=T[Y],Zt=C?C(Vt):Vt;if(Vt=F||Vt!==0?Vt:0,He&&Zt===Zt){for(var Tn=ct.length;Tn--;)if(ct[Tn]===Zt)continue e;C&&ct.push(Zt),Qe.push(Vt)}else ue(ct,Zt,F)||(ct!==Qe&&ct.push(Zt),Qe.push(Vt))}return Qe}function Rh(T,C){return C=Lu(C,T),T=Am(T,C),T==null||delete T[tu(kl(C))]}function eo(T,C,F,Y){return ai(T,C,F(co(T,C)),Y)}function Jl(T,C,F,Y){for(var ue=T.length,ye=Y?ue:-1;(Y?ye--:++ye<ue)&&C(T[ye],ye,T););return F?Bt(T,Y?0:ye,Y?ye+1:ue):Bt(T,Y?ye+1:0,Y?ue:ye)}function rh(T,C){var F=T;return F instanceof Hn&&(F=F.value()),pp(C,function(Y,ue){return ue.func.apply(ue.thisArg,yu([Y],ue.args))},F)}function ih(T,C,F){var Y=T.length;if(Y<2)return Y?$s(T[0]):[];for(var ue=-1,ye=Tt(Y);++ue<Y;)for(var He=T[ue],Qe=-1;++Qe<Y;)Qe!=ue&&(ye[ue]=wa(ye[ue]||He,T[Qe],C,F));return $s(hs(ye,1),C,F)}function lc(T,C,F){for(var Y=-1,ue=T.length,ye=C.length,He={};++Y<ue;){var Qe=Y<ye?C[Y]:t;F(He,T[Y],Qe)}return He}function wo(T){return mo(T)?T:[]}function to(T){return typeof T=="function"?T:Ph}function Lu(T,C){return zr(T)?T:Ra(T,C)?[T]:Fv(ti(T))}var sh=Vn;function Qa(T,C,F){var Y=T.length;return F=F===t?Y:F,!C&&F>=Y?T:Bt(T,C,F)}var Du=xh||function(T){return Jr.clearTimeout(T)};function oh(T,C){if(C)return T.slice();var F=T.length,Y=Zh?Zh(F):new T.constructor(F);return T.copy(Y),Y}function ah(T){var C=new T.constructor(T.byteLength);return new qh(C).set(new qh(T)),C}function po(T,C){var F=C?ah(T.buffer):T.buffer;return new T.constructor(F,T.byteOffset,T.byteLength)}function zs(T){var C=new T.constructor(T.source,ir.exec(T));return C.lastIndex=T.lastIndex,C}function Nu(T){return es?In(es.call(T)):{}}function Al(T,C){var F=C?ah(T.buffer):T.buffer;return new T.constructor(F,T.byteOffset,T.length)}function no(T,C){if(T!==C){var F=T!==t,Y=T===null,ue=T===T,ye=md(T),He=C!==t,Qe=C===null,ct=C===C,Wt=md(C);if(!Qe&&!Wt&&!ye&&T>C||ye&&He&&ct&&!Qe&&!Wt||Y&&He&&ct||!F&&ct||!ue)return 1;if(!Y&&!ye&&!Wt&&T<C||Wt&&F&&ue&&!Y&&!ye||Qe&&F&&ue||!He&&ue||!ct)return-1}return 0}function qa(T,C,F){for(var Y=-1,ue=T.criteria,ye=C.criteria,He=ue.length,Qe=F.length;++Y<He;){var ct=no(ue[Y],ye[Y]);if(ct){if(Y>=Qe)return ct;var Wt=F[Y];return ct*(Wt=="desc"?-1:1)}}return T.index-C.index}function Aa(T,C,F,Y){for(var ue=-1,ye=T.length,He=F.length,Qe=-1,ct=C.length,Wt=lo(ye-He,0),Vt=Tt(ct+Wt),Zt=!Y;++Qe<ct;)Vt[Qe]=C[Qe];for(;++ue<He;)(Zt||ue<ye)&&(Vt[F[ue]]=T[ue]);for(;Wt--;)Vt[Qe++]=T[ue++];return Vt}function Ql(T,C,F,Y){for(var ue=-1,ye=T.length,He=-1,Qe=F.length,ct=-1,Wt=C.length,Vt=lo(ye-Qe,0),Zt=Tt(Vt+Wt),Tn=!Y;++ue<Vt;)Zt[ue]=T[ue];for(var kn=ue;++ct<Wt;)Zt[kn+ct]=C[ct];for(;++He<Qe;)(Tn||ue<ye)&&(Zt[kn+F[He]]=T[ue++]);return Zt}function is(T,C){var F=-1,Y=T.length;for(C||(C=Tt(Y));++F<Y;)C[F]=T[F];return C}function Co(T,C,F,Y){var ue=!F;F||(F={});for(var ye=-1,He=C.length;++ye<He;){var Qe=C[ye],ct=Y?Y(F[Qe],T[Qe],Qe,F,T):t;ct===t&&(ct=T[Qe]),ue?wu(F,Qe,ct):aa(F,Qe,ct)}return F}function kh(T,C){return Co(T,Hf(T),C)}function ld(T,C){return Co(T,hd(T),C)}function Za(T,C){return function(F,Y){var ue=zr(F)?Qr:$a,ye=C?C():{};return ue(F,T,Jn(Y,2),ye)}}function ql(T){return Vn(function(C,F){var Y=-1,ue=F.length,ye=ue>1?F[ue-1]:t,He=ue>2?F[2]:t;for(ye=T.length>3&&typeof ye=="function"?(ue--,ye):t,He&&Li(F[0],F[1],He)&&(ye=ue<3?t:ye,ue=1),C=In(C);++Y<ue;){var Qe=F[Y];Qe&&T(C,Qe,Y,ye)}return C})}function ud(T,C){return function(F,Y){if(F==null)return F;if(!Ho(F))return T(F,Y);for(var ue=F.length,ye=C?ue:-1,He=In(F);(C?ye--:++ye<ue)&&Y(He[ye],ye,He)!==!1;);return F}}function Lc(T){return function(C,F,Y){for(var ue=-1,ye=In(C),He=Y(C),Qe=He.length;Qe--;){var ct=He[T?Qe:++ue];if(F(ye[ct],ct,ye)===!1)break}return C}}function Jp(T,C,F){var Y=C&A,ue=f(T);function ye(){var He=this&&this!==Jr&&this instanceof ye?ue:T;return He.apply(Y?F:this,arguments)}return ye}function E(T){return function(C){C=ti(C);var F=Ju(C)?qr(C):t,Y=F?F[0]:C.charAt(0),ue=F?Qa(F,1).join(""):C.slice(1);return Y[T]()+ue}}function c(T){return function(C){return pp(vw(PS(C).replace($i,"")),T,"")}}function f(T){return function(){var C=arguments;switch(C.length){case 0:return new T;case 1:return new T(C[0]);case 2:return new T(C[0],C[1]);case 3:return new T(C[0],C[1],C[2]);case 4:return new T(C[0],C[1],C[2],C[3]);case 5:return new T(C[0],C[1],C[2],C[3],C[4]);case 6:return new T(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new T(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var F=Ks(T.prototype),Y=T.apply(F,C);return Da(Y)?Y:F}}function $(T,C,F){var Y=f(T);function ue(){for(var ye=arguments.length,He=Tt(ye),Qe=ye,ct=Qp(ue);Qe--;)He[Qe]=arguments[Qe];var Wt=ye<3&&He[0]!==ct&&He[ye-1]!==ct?[]:ta(He,ct);if(ye-=Wt.length,ye<F)return ln(T,C,G,ue.placeholder,t,He,Wt,t,t,F-ye);var Vt=this&&this!==Jr&&this instanceof ue?Y:T;return zn(Vt,this,He)}return ue}function M(T){return function(C,F,Y){var ue=In(C);if(!Ho(C)){var ye=Jn(F,3);C=ha(C),F=function(Qe){return ye(ue[Qe],Qe,ue)}}var He=T(C,F,Y);return He>-1?ue[ye?C[He]:He]:t}}function N(T){return On(function(C){var F=C.length,Y=F,ue=Hr.prototype.thru;for(T&&C.reverse();Y--;){var ye=C[Y];if(typeof ye!="function")throw new bs(l);if(ue&&!He&&Cm(ye)=="wrapper")var He=new Hr([],!0)}for(Y=He?Y:F;++Y<F;){ye=C[Y];var Qe=Cm(ye),ct=Qe=="wrapper"?Zl(ye):t;ct&&bi(ct[0])&&ct[1]==(U|D|z|P)&&!ct[4].length&&ct[9]==1?He=He[Cm(ct[0])].apply(He,ct[3]):He=ye.length==1&&bi(ye)?He[Qe]():He.thru(ye)}return function(){var Wt=arguments,Vt=Wt[0];if(He&&Wt.length==1&&zr(Vt))return He.plant(Vt).value();for(var Zt=0,Tn=F?C[Zt].apply(this,Wt):Vt;++Zt<F;)Tn=C[Zt].call(this,Tn);return Tn}})}function G(T,C,F,Y,ue,ye,He,Qe,ct,Wt){var Vt=C&U,Zt=C&A,Tn=C&k,kn=C&(D|L),_r=C&K,Br=Tn?t:f(T);function ar(){for(var ci=arguments.length,Ti=Tt(ci),_d=ci;_d--;)Ti[_d]=arguments[_d];if(kn)var ch=Qp(ar),su=Wl(Ti,ch);if(Y&&(Ti=Aa(Ti,Y,ue,kn)),ye&&(Ti=Ql(Ti,ye,He,kn)),ci-=su,kn&&ci<Wt){var sl=ta(Ti,ch);return ln(T,C,G,ar.placeholder,F,Ti,sl,Qe,ct,Wt-ci)}var Rp=Zt?F:this,rm=Tn?Rp[T]:T;return ci=Ti.length,Qe?Ti=ka(Ti,Qe):_r&&ci>1&&Ti.reverse(),Vt&&ct<ci&&(Ti.length=ct),this&&this!==Jr&&this instanceof ar&&(rm=Br||f(rm)),rm.apply(Rp,Ti)}return ar}function se(T,C){return function(F,Y){return yi(F,T,C(Y),{})}}function xe(T,C){return function(F,Y){var ue;if(F===t&&Y===t)return C;if(F!==t&&(ue=F),Y!==t){if(ue===t)return Y;typeof F=="string"||typeof Y=="string"?(F=rs(F),Y=rs(Y)):(F=nh(F),Y=nh(Y)),ue=T(F,Y)}return ue}}function je(T){return On(function(C){return C=mi(C,wi(Jn())),Vn(function(F){var Y=this;return T(C,function(ue){return zn(ue,Y,F)})})})}function vt(T,C){C=C===t?" ":rs(C);var F=C.length;if(F<2)return F?Us(C,T):C;var Y=Us(C,Jc(T/ys(C)));return Ju(C)?Qa(qr(Y),0,T).join(""):Y.slice(0,T)}function Gt(T,C,F,Y){var ue=C&A,ye=f(T);function He(){for(var Qe=-1,ct=arguments.length,Wt=-1,Vt=Y.length,Zt=Tt(Vt+ct),Tn=this&&this!==Jr&&this instanceof He?ye:T;++Wt<Vt;)Zt[Wt]=Y[Wt];for(;ct--;)Zt[Wt++]=arguments[++Qe];return zn(Tn,ue?F:this,Zt)}return He}function en(T){return function(C,F,Y){return Y&&typeof Y!="number"&&Li(C,F,Y)&&(F=Y=t),C=qf(C),F===t?(F=C,C=0):F=qf(F),Y=Y===t?C<F?1:-1:qf(Y),ua(C,F,Y,T)}}function dn(T){return function(C,F){return typeof C=="string"&&typeof F=="string"||(C=Io(C),F=Io(F)),T(C,F)}}function ln(T,C,F,Y,ue,ye,He,Qe,ct,Wt){var Vt=C&D,Zt=Vt?He:t,Tn=Vt?t:He,kn=Vt?ye:t,_r=Vt?t:ye;C|=Vt?z:H,C&=~(Vt?H:z),C&O||(C&=~(A|k));var Br=[T,C,ue,kn,Zt,_r,Tn,Qe,ct,Wt],ar=F.apply(t,Br);return bi(T)&&bp(ar,Br),ar.placeholder=Y,uh(ar,T,C)}function rn(T){var C=sr[T];return function(F,Y){if(F=Io(F),Y=Y==null?0:ia(Mr(Y),292),Y&&Sl(F)){var ue=(ti(F)+"e").split("e"),ye=C(ue[0]+"e"+(+ue[1]+Y));return ue=(ti(ye)+"e").split("e"),+(ue[0]+"e"+(+ue[1]-Y))}return C(F)}}var Tr=Zu&&1/Qu(new Zu([,-0]))[1]==Ae?function(T){return new Zu(T)}:Jb;function _t(T){return function(C){var F=eu(C);return F==rt?Tc(C):F==pt?Sh(C):vl(C,T(C))}}function Se(T,C,F,Y,ue,ye,He,Qe){var ct=C&k;if(!ct&&typeof T!="function")throw new bs(l);var Wt=Y?Y.length:0;if(Wt||(C&=~(z|H),Y=ue=t),He=He===t?He:lo(Mr(He),0),Qe=Qe===t?Qe:Mr(Qe),Wt-=ue?ue.length:0,C&H){var Vt=Y,Zt=ue;Y=ue=t}var Tn=ct?t:Zl(T),kn=[T,C,F,Y,ue,Vt,Zt,ye,He,Qe];if(Tn&&Gf(kn,Tn),T=kn[0],C=kn[1],F=kn[2],Y=kn[3],ue=kn[4],Qe=kn[9]=kn[9]===t?ct?0:T.length:lo(kn[9]-Wt,0),!Qe&&C&(D|L)&&(C&=~(D|L)),!C||C==A)var _r=Jp(T,C,F);else C==D||C==L?_r=$(T,C,Qe):(C==z||C==(A|z))&&!ue.length?_r=Gt(T,C,F,Y):_r=G.apply(t,kn);var Br=Tn?ns:bp;return uh(Br(_r,kn),T,C)}function Me(T,C,F,Y){return T===t||Dh(T,Yi[F])&&!Fr.call(Y,F)?C:T}function Ke(T,C,F,Y,ue,ye){return Da(T)&&Da(C)&&(ye.set(C,T),$o(T,C,t,Ke,ye),ye.delete(C)),T}function Lt(T){return Nr(T)?t:T}function Jt(T,C,F,Y,ue,ye){var He=F&x,Qe=T.length,ct=C.length;if(Qe!=ct&&!(He&&ct>Qe))return!1;var Wt=ye.get(T),Vt=ye.get(C);if(Wt&&Vt)return Wt==C&&Vt==T;var Zt=-1,Tn=!0,kn=F&w?new wl:t;for(ye.set(T,C),ye.set(C,T);++Zt<Qe;){var _r=T[Zt],Br=C[Zt];if(Y)var ar=He?Y(Br,_r,Zt,C,T,ye):Y(_r,Br,Zt,T,C,ye);if(ar!==t){if(ar)continue;Tn=!1;break}if(kn){if(!yh(C,function(ci,Ti){if(!hr(kn,Ti)&&(_r===ci||ue(_r,ci,F,Y,ye)))return kn.push(Ti)})){Tn=!1;break}}else if(!(_r===Br||ue(_r,Br,F,Y,ye))){Tn=!1;break}}return ye.delete(T),ye.delete(C),Tn}function un(T,C,F,Y,ue,ye,He){switch(F){case at:if(T.byteLength!=C.byteLength||T.byteOffset!=C.byteOffset)return!1;T=T.buffer,C=C.buffer;case xt:return!(T.byteLength!=C.byteLength||!ye(new qh(T),new qh(C)));case Je:case ht:case nt:return Dh(+T,+C);case Oe:return T.name==C.name&&T.message==C.message;case $t:case Te:return T==C+"";case rt:var Qe=Tc;case pt:var ct=Y&x;if(Qe||(Qe=Qu),T.size!=C.size&&!ct)return!1;var Wt=He.get(T);if(Wt)return Wt==C;Y|=w,He.set(T,C);var Vt=Jt(Qe(T),Qe(C),Y,ue,ye,He);return He.delete(T),Vt;case te:if(es)return es.call(T)==es.call(C)}return!1}function mn(T,C,F,Y,ue,ye){var He=F&x,Qe=Xn(T),ct=Qe.length,Wt=Xn(C),Vt=Wt.length;if(ct!=Vt&&!He)return!1;for(var Zt=ct;Zt--;){var Tn=Qe[Zt];if(!(He?Tn in C:Fr.call(C,Tn)))return!1}var kn=ye.get(T),_r=ye.get(C);if(kn&&_r)return kn==C&&_r==T;var Br=!0;ye.set(T,C),ye.set(C,T);for(var ar=He;++Zt<ct;){Tn=Qe[Zt];var ci=T[Tn],Ti=C[Tn];if(Y)var _d=He?Y(Ti,ci,Tn,C,T,ye):Y(ci,Ti,Tn,T,C,ye);if(!(_d===t?ci===Ti||ue(ci,Ti,F,Y,ye):_d)){Br=!1;break}ar||(ar=Tn=="constructor")}if(Br&&!ar){var ch=T.constructor,su=C.constructor;ch!=su&&"constructor"in T&&"constructor"in C&&!(typeof ch=="function"&&ch instanceof ch&&typeof su=="function"&&su instanceof su)&&(Br=!1)}return ye.delete(T),ye.delete(C),Br}function On(T){return Zp($g(T,t,ef),T+"")}function Xn(T){return Zc(T,ha,Hf)}function mr(T){return Zc(T,Na,hd)}var Zl=rd?function(T){return rd.get(T)}:Jb;function Cm(T){for(var C=T.name+"",F=Cc[C],Y=Fr.call(Cc,C)?F.length:0;Y--;){var ue=F[Y],ye=ue.func;if(ye==null||ye==T)return ue.name}return C}function Qp(T){var C=Fr.call(ve,"placeholder")?ve:T;return C.placeholder}function Jn(){var T=ve.iteratee||Bi;return T=T===Bi?Fs:T,arguments.length?T(arguments[0],arguments[1]):T}function cd(T,C){var F=T.__data__;return Pe(C)?F[typeof C=="string"?"string":"hash"]:F.map}function d0(T){for(var C=ha(T),F=C.length;F--;){var Y=C[F],ue=T[Y];C[F]=[Y,ue,Mm(ue)]}return C}function Bu(T,C){var F=Su(T,C);return Kl(F)?F:t}function Ia(T){var C=Fr.call(T,Ta),F=T[Ta];try{T[Ta]=t;var Y=!0}catch{}var ue=Ys.call(T);return Y&&(C?T[Ta]=F:delete T[Ta]),ue}var Hf=wh?function(T){return T==null?[]:(T=In(T),vs(wh(T),function(C){return xc.call(T,C)}))}:Zb,hd=wh?function(T){for(var C=[];T;)yu(C,Hf(T)),T=Tl(T);return C}:Zb,eu=Qs;(wc&&eu(new wc(new ArrayBuffer(1)))!=at||Mh&&eu(new Mh)!=rt||nd&&eu(nd.resolve())!=mt||Zu&&eu(new Zu)!=pt||Wa&&eu(new Wa)!=ot)&&(eu=function(T){var C=Qs(T),F=C==It?T.constructor:t,Y=F?uc(F):"";if(Y)switch(Y){case Mc:return at;case tc:return rt;case Bd:return mt;case sa:return pt;case Cr:return ot}return C});function nn(T,C,F){for(var Y=-1,ue=F.length;++Y<ue;){var ye=F[Y],He=ye.size;switch(ye.type){case"drop":T+=He;break;case"dropRight":C-=He;break;case"take":C=ia(C,T+He);break;case"takeRight":T=lo(T,C-He);break}}return{start:T,end:C}}function c_(T){var C=T.match(lt);return C?C[1].split(Et):[]}function h_(T,C,F){C=Lu(C,T);for(var Y=-1,ue=C.length,ye=!1;++Y<ue;){var He=tu(C[Y]);if(!(ye=T!=null&&F(T,He)))break;T=T[He]}return ye||++Y!=ue?ye:(ue=T==null?0:T.length,!!ue&&Xd(ue)&&lh(He,ue)&&(zr(T)||S0(T)))}function Sg(T){var C=T.length,F=new T.constructor(C);return C&&typeof T[0]=="string"&&Fr.call(T,"index")&&(F.index=T.index,F.input=T.input),F}function Dc(T){return typeof T.constructor=="function"&&!dd(T)?Ks(Tl(T)):{}}function xs(T,C,F){var Y=T.constructor;switch(C){case xt:return ah(T);case Je:case ht:return new Y(+T);case at:return po(T,F);case Ge:case Ce:case X:case Q:case le:case $e:case We:case Ft:case Be:return Al(T,F);case rt:return new Y;case nt:case Te:return new Y(T);case $t:return zs(T);case pt:return new Y;case te:return Nu(T)}}function qp(T,C){var F=C.length;if(!F)return T;var Y=F-1;return C[Y]=(F>1?"& ":"")+C[Y],C=C.join(F>2?", ":" "),T.replace(Ie,`{
/* [wrapped with `+C+`] */
`)}function Hd(T){return zr(T)||S0(T)||!!(Ld&&T&&T[Ld])}function lh(T,C){var F=typeof T;return C=C??j,!!C&&(F=="number"||F!="symbol"&&ji.test(T))&&T>-1&&T%1==0&&T<C}function Li(T,C,F){if(!Da(F))return!1;var Y=typeof C;return(Y=="number"?Ho(F)&&lh(C,F.length):Y=="string"&&C in F)?Dh(F[C],T):!1}function Ra(T,C){if(zr(T))return!1;var F=typeof T;return F=="number"||F=="symbol"||F=="boolean"||T==null||md(T)?!0:ge.test(T)||!q.test(T)||C!=null&&T in In(C)}function Pe(T){var C=typeof T;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?T!=="__proto__":T===null}function bi(T){var C=Cm(T),F=ve[C];if(typeof F!="function"||!(C in Hn.prototype))return!1;if(T===F)return!0;var Y=Zl(F);return!!Y&&T===Y[0]}function ws(T){return!!Bs&&Bs in T}var Bv=ls?Qf:C0;function dd(T){var C=T&&T.constructor,F=typeof C=="function"&&C.prototype||Yi;return T===F}function Mm(T){return T===T&&!Da(T)}function Eg(T,C){return function(F){return F==null?!1:F[T]===C&&(C!==t||T in In(F))}}function Pv(T){var C=st(T,function(Y){return F.size===d&&F.clear(),Y}),F=C.cache;return C}function Gf(T,C){var F=T[1],Y=C[1],ue=F|Y,ye=ue<(A|k|U),He=Y==U&&F==D||Y==U&&F==P&&T[7].length<=C[8]||Y==(U|P)&&C[7].length<=C[8]&&F==D;if(!(ye||He))return T;Y&A&&(T[2]=C[2],ue|=F&A?0:O);var Qe=C[3];if(Qe){var ct=T[3];T[3]=ct?Aa(ct,Qe,C[4]):Qe,T[4]=ct?ta(T[3],m):C[4]}return Qe=C[5],Qe&&(ct=T[5],T[5]=ct?Ql(ct,Qe,C[6]):Qe,T[6]=ct?ta(T[5],m):C[6]),Qe=C[7],Qe&&(T[7]=Qe),Y&U&&(T[8]=T[8]==null?C[8]:ia(T[8],C[8])),T[9]==null&&(T[9]=C[9]),T[0]=C[0],T[1]=ue,T}function zo(T){var C=[];if(T!=null)for(var F in In(T))C.push(F);return C}function p0(T){return Ys.call(T)}function $g(T,C,F){return C=lo(C===t?T.length-1:C,0),function(){for(var Y=arguments,ue=-1,ye=lo(Y.length-C,0),He=Tt(ye);++ue<ye;)He[ue]=Y[C+ue];ue=-1;for(var Qe=Tt(C+1);++ue<C;)Qe[ue]=Y[ue];return Qe[C]=F(He),zn(T,this,Qe)}}function Am(T,C){return C.length<2?T:co(T,Bt(C,0,-1))}function ka(T,C){for(var F=T.length,Y=ia(C.length,F),ue=is(T);Y--;){var ye=C[Y];T[Y]=lh(ye,F)?ue[ye]:t}return T}function Pu(T,C){if(!(C==="constructor"&&typeof T[C]=="function")&&C!="__proto__")return T[C]}var bp=d_(ns),xg=td||function(T,C){return Jr.setTimeout(T,C)},Zp=d_(Ml);function uh(T,C,F){var Y=C+"";return Zp(T,qp(Y,Im(c_(Y),F)))}function d_(T){var C=0,F=0;return function(){var Y=Uf(),ue=de-(Y-F);if(F=Y,ue>0){if(++C>=ie)return arguments[0]}else C=0;return T.apply(t,arguments)}}function Qn(T,C){var F=-1,Y=T.length,ue=Y-1;for(C=C===t?Y:C;++F<C;){var ye=Es(F,ue),He=T[ye];T[ye]=T[F],T[F]=He}return T.length=C,T}var Fv=Pv(function(T){var C=[];return T.charCodeAt(0)===46&&C.push(""),T.replace(Ne,function(F,Y,ue,ye){C.push(ue?ye.replace(yn,"$1"):Y||F)}),C});function tu(T){if(typeof T=="string"||md(T))return T;var C=T+"";return C=="0"&&1/T==-Ae?"-0":C}function uc(T){if(T!=null){try{return $c.call(T)}catch{}try{return T+""}catch{}}return""}function Im(T,C){return xi(we,function(F){var Y="_."+F[0];C&F[1]&&!_l(T,Y)&&T.push(Y)}),T.sort()}function Tp(T){if(T instanceof Hn)return T.clone();var C=new Hr(T.__wrapped__,T.__chain__);return C.__actions__=is(T.__actions__),C.__index__=T.__index__,C.__values__=T.__values__,C}function Rm(T,C,F){(F?Li(T,C,F):C===t)?C=1:C=lo(Mr(C),0);var Y=T==null?0:T.length;if(!Y||C<1)return[];for(var ue=0,ye=0,He=Tt(Jc(Y/C));ue<Y;)He[ye++]=Bt(T,ue,ue+=C);return He}function nu(T){for(var C=-1,F=T==null?0:T.length,Y=0,ue=[];++C<F;){var ye=T[C];ye&&(ue[Y++]=ye)}return ue}function p_(){var T=arguments.length;if(!T)return[];for(var C=Tt(T-1),F=arguments[0],Y=T;Y--;)C[Y-1]=arguments[Y];return yu(zr(F)?is(F):[F],hs(C,1))}var fo=Vn(function(T,C){return mo(T)?wa(T,hs(C,1,mo,!0)):[]}),Ai=Vn(function(T,C){var F=kl(C);return mo(F)&&(F=t),mo(T)?wa(T,hs(C,1,mo,!0),Jn(F,2)):[]}),Il=Vn(function(T,C){var F=kl(C);return mo(F)&&(F=t),mo(T)?wa(T,hs(C,1,mo,!0),t,F):[]});function Oa(T,C,F){var Y=T==null?0:T.length;return Y?(C=F||C===t?1:Mr(C),Bt(T,C<0?0:C,Y)):[]}function ru(T,C,F){var Y=T==null?0:T.length;return Y?(C=F||C===t?1:Mr(C),C=Y-C,Bt(T,0,C<0?0:C)):[]}function Rl(T,C){return T&&T.length?Jl(T,Jn(C,3),!0,!0):[]}function Wf(T,C){return T&&T.length?Jl(T,Jn(C,3),!0):[]}function el(T,C,F,Y){var ue=T==null?0:T.length;return ue?(F&&typeof F!="number"&&Li(T,C,F)&&(F=0,Y=ue),sd(T,C,F,Y)):[]}function Sp(T,C,F){var Y=T==null?0:T.length;if(!Y)return-1;var ue=F==null?0:Mr(F);return ue<0&&(ue=lo(Y+ue,0)),Ku(T,Jn(C,3),ue)}function Ep(T,C,F){var Y=T==null?0:T.length;if(!Y)return-1;var ue=Y-1;return F!==t&&(ue=Mr(F),ue=F<0?lo(Y+ue,0):ia(ue,Y-1)),Ku(T,Jn(C,3),ue,!0)}function ef(T){var C=T==null?0:T.length;return C?hs(T,1):[]}function f0(T){var C=T==null?0:T.length;return C?hs(T,Ae):[]}function km(T,C){var F=T==null?0:T.length;return F?(C=C===t?1:Mr(C),hs(T,C)):[]}function Nc(T){for(var C=-1,F=T==null?0:T.length,Y={};++C<F;){var ue=T[C];Y[ue[0]]=ue[1]}return Y}function tl(T){return T&&T.length?T[0]:t}function Bc(T,C,F){var Y=T==null?0:T.length;if(!Y)return-1;var ue=F==null?0:Mr(F);return ue<0&&(ue=lo(Y+ue,0)),ao(T,C,ue)}function Gd(T){var C=T==null?0:T.length;return C?Bt(T,0,-1):[]}var wg=Vn(function(T){var C=mi(T,wo);return C.length&&C[0]===T[0]?la(C):[]}),Cg=Vn(function(T){var C=kl(T),F=mi(T,wo);return C===kl(F)?C=t:F.pop(),F.length&&F[0]===T[0]?la(F,Jn(C,2)):[]}),Hs=Vn(function(T){var C=kl(T),F=mi(T,wo);return C=typeof C=="function"?C:t,C&&F.pop(),F.length&&F[0]===T[0]?la(F,t,C):[]});function Om(T,C){return T==null?"":Nd.call(T,C)}function kl(T){var C=T==null?0:T.length;return C?T[C-1]:t}function nl(T,C,F){var Y=T==null?0:T.length;if(!Y)return-1;var ue=Y;return F!==t&&(ue=Mr(F),ue=ue<0?lo(Y+ue,0):ia(ue,Y-1)),C===C?Ec(T,C,ue):Ku(T,bh,ue,!0)}function Vf(T,C){return T&&T.length?xo(T,Mr(C)):t}var m0=Vn($p);function $p(T,C){return T&&T.length&&C&&C.length?xr(T,C):T}function Mg(T,C,F){return T&&T.length&&C&&C.length?xr(T,C,Jn(F,2)):T}function cc(T,C,F){return T&&T.length&&C&&C.length?xr(T,C,t,F):T}var Wd=On(function(T,C){var F=T==null?0:T.length,Y=Ud(T,C);return Ki(T,mi(C,function(ue){return lh(ue,F)?+ue:ue}).sort(no)),Y});function Mo(T,C){var F=[];if(!(T&&T.length))return F;var Y=-1,ue=[],ye=T.length;for(C=Jn(C,3);++Y<ye;){var He=T[Y];C(He,Y,T)&&(F.push(He),ue.push(Y))}return Ki(T,ue),F}function La(T){return T==null?T:$l.call(T)}function Uv(T,C,F){var Y=T==null?0:T.length;return Y?(F&&typeof F!="number"&&Li(T,C,F)?(C=0,F=Y):(C=C==null?0:Mr(C),F=F===t?Y:Mr(F)),Bt(T,C,F)):[]}function Lm(T,C){return Dr(T,C)}function f_(T,C,F){return Oc(T,C,Jn(F,2))}function Rb(T,C){var F=T==null?0:T.length;if(F){var Y=Dr(T,C);if(Y<F&&Dh(T[Y],C))return Y}return-1}function tf(T,C){return Dr(T,C,!0)}function jf(T,C,F){return Oc(T,C,Jn(F,2),!0)}function m_(T,C){var F=T==null?0:T.length;if(F){var Y=Dr(T,C,!0)-1;if(Dh(T[Y],C))return Y}return-1}function Xf(T){return T&&T.length?ad(T):[]}function g_(T,C){return T&&T.length?ad(T,Jn(C,2)):[]}function Dm(T){var C=T==null?0:T.length;return C?Bt(T,1,C):[]}function __(T,C,F){return T&&T.length?(C=F||C===t?1:Mr(C),Bt(T,0,C<0?0:C)):[]}function zv(T,C,F){var Y=T==null?0:T.length;return Y?(C=F||C===t?1:Mr(C),C=Y-C,Bt(T,C<0?0:C,Y)):[]}function Nm(T,C){return T&&T.length?Jl(T,Jn(C,3),!1,!0):[]}function xp(T,C){return T&&T.length?Jl(T,Jn(C,3)):[]}var Hv=Vn(function(T){return $s(hs(T,1,mo,!0))}),wS=Vn(function(T){var C=kl(T);return mo(C)&&(C=t),$s(hs(T,1,mo,!0),Jn(C,2))}),v_=Vn(function(T){var C=kl(T);return C=typeof C=="function"?C:t,$s(hs(T,1,mo,!0),t,C)});function y_(T){return T&&T.length?$s(T):[]}function nf(T,C){return T&&T.length?$s(T,Jn(C,2)):[]}function $n(T,C){return C=typeof C=="function"?C:t,T&&T.length?$s(T,t,C):[]}function Oh(T){if(!(T&&T.length))return[];var C=0;return T=vs(T,function(F){if(mo(F))return C=lo(F.length,C),!0}),Tu(C,function(F){return mi(T,Vr(F))})}function Bm(T,C){if(!(T&&T.length))return[];var F=Oh(T);return C==null?F:mi(F,function(Y){return zn(C,t,Y)})}var Ao=Vn(function(T,C){return mo(T)?wa(T,C):[]}),Gv=Vn(function(T){return ih(vs(T,mo))}),b_=Vn(function(T){var C=kl(T);return mo(C)&&(C=t),ih(vs(T,mo),Jn(C,2))}),Pm=Vn(function(T){var C=kl(T);return C=typeof C=="function"?C:t,ih(vs(T,mo),t,C)}),CS=Vn(Oh);function kb(T,C){return lc(T||[],C||[],aa)}function Pc(T,C){return lc(T||[],C||[],ai)}var Gs=Vn(function(T){var C=T.length,F=C>1?T[C-1]:t;return F=typeof F=="function"?(T.pop(),F):t,Bm(T,F)});function Fu(T){var C=ve(T);return C.__chain__=!0,C}function g0(T,C){return C(T),T}function Ag(T,C){return C(T)}var Lh=On(function(T){var C=T.length,F=C?T[0]:0,Y=this.__wrapped__,ue=function(ye){return Ud(ye,T)};return C>1||this.__actions__.length||!(Y instanceof Hn)||!lh(F)?this.thru(ue):(Y=Y.slice(F,+F+(C?1:0)),Y.__actions__.push({func:Ag,args:[ue],thisArg:t}),new Hr(Y,this.__chain__).thru(function(ye){return C&&!ye.length&&ye.push(t),ye}))});function Fm(){return Fu(this)}function rf(){return new Hr(this.value(),this.__chain__)}function sf(){this.__values__===t&&(this.__values__=RS(this.value()));var T=this.__index__>=this.__values__.length,C=T?t:this.__values__[this.__index__++];return{done:T,value:C}}function Yf(){return this}function pd(T){for(var C,F=this;F instanceof Va;){var Y=Tp(F);Y.__index__=0,Y.__values__=t,C?ue.__wrapped__=Y:C=Y;var ue=Y;F=F.__wrapped__}return ue.__wrapped__=T,C}function wp(){var T=this.__wrapped__;if(T instanceof Hn){var C=T;return this.__actions__.length&&(C=new Hn(this)),C=C.reverse(),C.__actions__.push({func:Ag,args:[La],thisArg:t}),new Hr(C,this.__chain__)}return this.thru(La)}function Ig(){return rh(this.__wrapped__,this.__actions__)}var Ob=Za(function(T,C,F){Fr.call(T,F)?++T[F]:wu(T,F,1)});function _0(T,C,F){var Y=zr(T)?vu:Yl;return F&&Li(T,C,F)&&(C=t),Y(T,Jn(C,3))}function Vd(T,C){var F=zr(T)?vs:Rc;return F(T,Jn(C,3))}var ei=M(Sp),Um=M(Ep);function Rg(T,C){return hs(li(T,C),1)}function v0(T,C){return hs(li(T,C),Ae)}function Lb(T,C,F){return F=F===t?1:Mr(F),hs(li(T,C),F)}function y0(T,C){var F=zr(T)?xi:Cl;return F(T,Jn(C,3))}function zm(T,C){var F=zr(T)?Yh:Kp;return F(T,Jn(C,3))}var kg=Za(function(T,C,F){Fr.call(T,F)?T[F].push(C):wu(T,F,[C])});function of(T,C,F,Y){T=Ho(T)?T:w0(T),F=F&&!Y?Mr(F):0;var ue=T.length;return F<0&&(F=lo(ue+F,0)),E_(T)?F<=ue&&T.indexOf(C,F)>-1:!!ue&&ao(T,C,F)>-1}var af=Vn(function(T,C,F){var Y=-1,ue=typeof C=="function",ye=Ho(T)?Tt(T.length):[];return Cl(T,function(He){ye[++Y]=ue?zn(C,He,F):Cn(He,C,F)}),ye}),Hm=Za(function(T,C,F){wu(T,F,C)});function li(T,C){var F=zr(T)?mi:Ru;return F(T,Jn(C,3))}function lf(T,C,F,Y){return T==null?[]:(zr(C)||(C=C==null?[]:[C]),F=Y?t:F,zr(F)||(F=F==null?[]:[F]),ac(T,C,F))}var Gm=Za(function(T,C,F){T[F?0:1].push(C)},function(){return[[],[]]});function Wm(T,C,F){var Y=zr(T)?pp:Xs,ue=arguments.length<3;return Y(T,Jn(C,4),F,ue,Cl)}function Kf(T,C,F){var Y=zr(T)?fp:Xs,ue=arguments.length<3;return Y(T,Jn(C,4),F,ue,Kp)}function b0(T,C){var F=zr(T)?vs:Rc;return F(T,bt(Jn(C,3)))}function g(T){var C=zr(T)?ja:kc;return C(T)}function y(T,C,F){(F?Li(T,C,F):C===t)?C=1:C=Mr(C);var Y=zr(T)?nc:an;return Y(T,C)}function I(T){var C=zr(T)?zf:Ja;return C(T)}function B(T){if(T==null)return 0;if(Ho(T))return E_(T)?ys(T):T.length;var C=eu(T);return C==rt||C==pt?T.size:ho(T).length}function V(T,C,F){var Y=zr(T)?yh:Ma;return F&&Li(T,C,F)&&(C=t),Y(T,Jn(C,3))}var J=Vn(function(T,C){if(T==null)return[];var F=C.length;return F>1&&Li(T,C[0],C[1])?C=[]:F>2&&Li(C[0],C[1],C[2])&&(C=[C[0]]),ac(T,hs(C,1),[])}),fe=si||function(){return Jr.Date.now()};function Ue(T,C){if(typeof C!="function")throw new bs(l);return T=Mr(T),function(){if(--T<1)return C.apply(this,arguments)}}function Ze(T,C,F){return C=F?t:C,C=T&&C==null?T.length:C,Se(T,U,t,t,t,t,C)}function Ct(T,C){var F;if(typeof C!="function")throw new bs(l);return T=Mr(T),function(){return--T>0&&(F=C.apply(this,arguments)),T<=1&&(C=t),F}}var Xt=Vn(function(T,C,F){var Y=A;if(F.length){var ue=ta(F,Qp(Xt));Y|=z}return Se(T,Y,C,F,ue)}),tn=Vn(function(T,C,F){var Y=A|k;if(F.length){var ue=ta(F,Qp(tn));Y|=z}return Se(C,Y,T,F,ue)});function Qt(T,C,F){C=F?t:C;var Y=Se(T,D,t,t,t,t,t,C);return Y.placeholder=Qt.placeholder,Y}function bn(T,C,F){C=F?t:C;var Y=Se(T,L,t,t,t,t,t,C);return Y.placeholder=bn.placeholder,Y}function Rn(T,C,F){var Y,ue,ye,He,Qe,ct,Wt=0,Vt=!1,Zt=!1,Tn=!0;if(typeof T!="function")throw new bs(l);C=Io(C)||0,Da(F)&&(Vt=!!F.leading,Zt="maxWait"in F,ye=Zt?lo(Io(F.maxWait)||0,C):ye,Tn="trailing"in F?!!F.trailing:Tn);function kn(sl){var Rp=Y,rm=ue;return Y=ue=t,Wt=sl,He=T.apply(rm,Rp),He}function _r(sl){return Wt=sl,Qe=xg(ci,C),Vt?kn(sl):He}function Br(sl){var Rp=sl-ct,rm=sl-Wt,lE=C-Rp;return Zt?ia(lE,ye-rm):lE}function ar(sl){var Rp=sl-ct,rm=sl-Wt;return ct===t||Rp>=C||Rp<0||Zt&&rm>=ye}function ci(){var sl=fe();if(ar(sl))return Ti(sl);Qe=xg(ci,Br(sl))}function Ti(sl){return Qe=t,Tn&&Y?kn(sl):(Y=ue=t,He)}function _d(){Qe!==t&&Du(Qe),Wt=0,Y=ct=ue=Qe=t}function ch(){return Qe===t?He:Ti(fe())}function su(){var sl=fe(),Rp=ar(sl);if(Y=arguments,ue=this,ct=sl,Rp){if(Qe===t)return _r(ct);if(Zt)return Du(Qe),Qe=xg(ci,C),kn(ct)}return Qe===t&&(Qe=xg(ci,C)),He}return su.cancel=_d,su.flush=ch,su}var Dn=Vn(function(T,C){return id(T,1,C)}),ro=Vn(function(T,C,F){return id(T,Io(C)||0,F)});function yt(T){return Se(T,K)}function st(T,C){if(typeof T!="function"||C!=null&&typeof C!="function")throw new bs(l);var F=function(){var Y=arguments,ue=C?C.apply(this,Y):Y[0],ye=F.cache;if(ye.has(ue))return ye.get(ue);var He=T.apply(this,Y);return F.cache=ye.set(ue,He)||ye,He};return F.cache=new(st.Cache||Ea),F}st.Cache=Ea;function bt(T){if(typeof T!="function")throw new bs(l);return function(){var C=arguments;switch(C.length){case 0:return!T.call(this);case 1:return!T.call(this,C[0]);case 2:return!T.call(this,C[0],C[1]);case 3:return!T.call(this,C[0],C[1],C[2])}return!T.apply(this,C)}}function on(T){return Ct(2,T)}var Gn=sh(function(T,C){C=C.length==1&&zr(C[0])?mi(C[0],wi(Jn())):mi(hs(C,1),wi(Jn()));var F=C.length;return Vn(function(Y){for(var ue=-1,ye=ia(Y.length,F);++ue<ye;)Y[ue]=C[ue].call(this,Y[ue]);return zn(T,this,Y)})}),Bn=Vn(function(T,C){var F=ta(C,Qp(Bn));return Se(T,z,t,C,F)}),Yn=Vn(function(T,C){var F=ta(C,Qp(Yn));return Se(T,H,t,C,F)}),gr=On(function(T,C){return Se(T,P,t,t,t,C)});function rl(T,C){if(typeof T!="function")throw new bs(l);return C=C===t?C:Mr(C),Vn(T,C)}function Di(T,C){if(typeof T!="function")throw new bs(l);return C=C==null?0:lo(Mr(C),0),Vn(function(F){var Y=F[C],ue=Qa(F,0,C);return Y&&yu(ue,Y),zn(T,this,ue)})}function uf(T,C,F){var Y=!0,ue=!0;if(typeof T!="function")throw new bs(l);return Da(F)&&(Y="leading"in F?!!F.leading:Y,ue="trailing"in F?!!F.trailing:ue),Rn(T,C,{leading:Y,maxWait:C,trailing:ue})}function T_(T){return Ze(T,1)}function iu(T,C){return Bn(to(C),T)}function jd(){if(!arguments.length)return[];var T=arguments[0];return zr(T)?T:[T]}function Zx(T){return Js(T,S)}function WR(T,C){return C=typeof C=="function"?C:t,Js(T,S,C)}function VR(T){return Js(T,_|S)}function Vm(T,C){return C=typeof C=="function"?C:t,Js(T,_|S,C)}function MS(T,C){return C==null||qc(T,C,ha(C))}function Dh(T,C){return T===C||T!==T&&C!==C}var ew=dn(Ya),T0=dn(function(T,C){return T>=C}),S0=Ln(function(){return arguments}())?Ln:function(T){return il(T)&&Fr.call(T,"callee")&&!xc.call(T,"callee")},zr=Tt.isArray,Db=gu?wi(gu):br;function Ho(T){return T!=null&&Xd(T.length)&&!Qf(T)}function mo(T){return il(T)&&Ho(T)}function AS(T){return T===!0||T===!1||il(T)&&Qs(T)==Je}var Jf=Dd||C0,tw=oo?wi(oo):Lr;function Cp(T){return il(T)&&T.nodeType===1&&!Nr(T)}function Wv(T){if(T==null)return!0;if(Ho(T)&&(zr(T)||typeof T=="string"||typeof T.splice=="function"||Jf(T)||Og(T)||S0(T)))return!T.length;var C=eu(T);if(C==rt||C==pt)return!T.size;if(dd(T))return!ho(T).length;for(var F in T)if(Fr.call(T,F))return!1;return!0}function ui(T,C){return Wr(T,C)}function io(T,C,F){F=typeof F=="function"?F:t;var Y=F?F(T,C):t;return Y===t?Wr(T,C,t,F):!!Y}function Nb(T){if(!il(T))return!1;var C=Qs(T);return C==Oe||C==it||typeof T.message=="string"&&typeof T.name=="string"&&!Nr(T)}function Bb(T){return typeof T=="number"&&Sl(T)}function Qf(T){if(!Da(T))return!1;var C=Qs(T);return C==Ee||C==Fe||C==qe||C==wt}function Vv(T){return typeof T=="number"&&T==Mr(T)}function Xd(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=j}function Da(T){var C=typeof T;return T!=null&&(C=="object"||C=="function")}function il(T){return T!=null&&typeof T=="object"}var fd=_u?wi(_u):Oi;function Ji(T,C){return T===C||Wi(T,C,d0(C))}function jm(T,C,F){return F=typeof F=="function"?F:t,Wi(T,C,d0(C),F)}function Pb(T){return Mp(T)&&T!=+T}function Fb(T){if(Bv(T))throw new Nn(o);return Kl(T)}function S_(T){return T===null}function jR(T){return T==null}function Mp(T){return typeof T=="number"||il(T)&&Qs(T)==nt}function Nr(T){if(!il(T)||Qs(T)!=It)return!1;var C=Tl(T);if(C===null)return!0;var F=Fr.call(C,"constructor")&&C.constructor;return typeof F=="function"&&F instanceof F&&$c.call(F)==ra}var cf=Ha?wi(Ha):Au;function ca(T){return Vv(T)&&T>=-j&&T<=j}var Ub=fi?wi(fi):oc;function E_(T){return typeof T=="string"||!zr(T)&&il(T)&&Qs(T)==Te}function md(T){return typeof T=="symbol"||il(T)&&Qs(T)==te}var Og=ii?wi(ii):Iu;function nw(T){return T===t}function rw(T){return il(T)&&eu(T)==ot}function Nh(T){return il(T)&&Qs(T)==ft}var IS=dn(Ca),hf=dn(function(T,C){return T<=C});function RS(T){if(!T)return[];if(Ho(T))return E_(T)?qr(T):is(T);if(Ga&&T[Ga])return Th(T[Ga]());var C=eu(T),F=C==rt?Tc:C==pt?Qu:w0;return F(T)}function qf(T){if(!T)return T===0?T:0;if(T=Io(T),T===Ae||T===-Ae){var C=T<0?-1:1;return C*Z}return T===T?T:0}function Mr(T){var C=qf(T),F=C%1;return C===C?F?C-F:C:0}function jv(T){return T?rc(Mr(T),0,ae):0}function Io(T){if(typeof T=="number")return T;if(md(T))return ne;if(Da(T)){var C=typeof T.valueOf=="function"?T.valueOf():T;T=Da(C)?C+"":C}if(typeof T!="string")return T===0?T:+T;T=Jh(T);var F=ni.test(T);return F||Ir.test(T)?Qo(T.slice(2),F?2:8):yr.test(T)?ne:+T}function iw(T){return Co(T,Na(T))}function et(T){return T?rc(Mr(T),-j,j):T===0?T:0}function ti(T){return T==null?"":rs(T)}var Xv=ql(function(T,C){if(dd(C)||Ho(C)){Co(C,ha(C),T);return}for(var F in C)Fr.call(C,F)&&aa(T,F,C[F])}),zb=ql(function(T,C){Co(C,Na(C),T)}),Ap=ql(function(T,C,F,Y){Co(C,Na(C),T,Y)}),Lg=ql(function(T,C,F,Y){Co(C,ha(C),T,Y)}),Hb=On(Ud);function $_(T,C){var F=Ks(T);return C==null?F:Gi(F,C)}var kS=Vn(function(T,C){T=In(T);var F=-1,Y=C.length,ue=Y>2?C[2]:t;for(ue&&Li(C[0],C[1],ue)&&(Y=1);++F<Y;)for(var ye=C[F],He=Na(ye),Qe=-1,ct=He.length;++Qe<ct;){var Wt=He[Qe],Vt=T[Wt];(Vt===t||Dh(Vt,Yi[Wt])&&!Fr.call(T,Wt))&&(T[Wt]=ye[Wt])}return T}),sw=Vn(function(T){return T.push(t,Ke),zn(gd,t,T)});function Yd(T,C){return gp(T,Jn(C,3),Eo)}function OS(T,C){return gp(T,Jn(C,3),Xa)}function Yv(T,C){return T==null?T:Mu(T,Jn(C,3),Na)}function LS(T,C){return T==null?T:ic(T,Jn(C,3),Na)}function ow(T,C){return T&&Eo(T,Jn(C,3))}function aw(T,C){return T&&Xa(T,Jn(C,3))}function lw(T){return T==null?[]:Ss(T,ha(T))}function uw(T){return T==null?[]:Ss(T,Na(T))}function E0(T,C,F){var Y=T==null?t:co(T,C);return Y===t?F:Y}function DS(T,C){return T!=null&&h_(T,C,sc)}function $0(T,C){return T!=null&&h_(T,C,yp)}var NS=se(function(T,C,F){C!=null&&typeof C.toString!="function"&&(C=Ys.call(C)),T[C]=F},YS(Ph)),Kv=se(function(T,C,F){C!=null&&typeof C.toString!="function"&&(C=Ys.call(C)),Fr.call(T,C)?T[C].push(F):T[C]=[F]},Jn),Jv=Vn(Cn);function ha(T){return Ho(T)?sn(T):ho(T)}function Na(T){return Ho(T)?sn(T,!0):od(T)}function cw(T,C){var F={};return C=Jn(C,3),Eo(T,function(Y,ue,ye){wu(F,C(Y,ue,ye),Y)}),F}function Zf(T,C){var F={};return C=Jn(C,3),Eo(T,function(Y,ue,ye){wu(F,ue,C(Y,ue,ye))}),F}var Xm=ql(function(T,C,F){$o(T,C,F)}),gd=ql(function(T,C,F,Y){$o(T,C,F,Y)}),hw=On(function(T,C){var F={};if(T==null)return F;var Y=!1;C=mi(C,function(ye){return ye=Lu(ye,T),Y||(Y=ye.length>1),ye}),Co(T,mr(T),F),Y&&(F=Js(F,_|v|S,Lt));for(var ue=C.length;ue--;)Rh(F,C[ue]);return F});function x_(T,C){return Gb(T,bt(Jn(C)))}var jt=On(function(T,C){return T==null?{}:Ou(T,C)});function Gb(T,C){if(T==null)return{};var F=mi(mr(T),function(Y){return[Y]});return C=Jn(C),Ih(T,F,function(Y,ue){return C(Y,ue[0])})}function XR(T,C,F){C=Lu(C,T);var Y=-1,ue=C.length;for(ue||(ue=1,T=t);++Y<ue;){var ye=T==null?t:T[tu(C[Y])];ye===t&&(Y=ue,ye=F),T=Qf(ye)?ye.call(T):ye}return T}function YR(T,C,F){return T==null?T:ai(T,C,F)}function KR(T,C,F,Y){return Y=typeof Y=="function"?Y:t,T==null?T:ai(T,C,F,Y)}var Wb=_t(ha),Qv=_t(Na);function Ni(T,C,F){var Y=zr(T),ue=Y||Jf(T)||Og(T);if(C=Jn(C,4),F==null){var ye=T&&T.constructor;ue?F=Y?new ye:[]:Da(T)?F=Qf(ye)?Ks(Tl(T)):{}:F={}}return(ue?xi:Eo)(T,function(He,Qe,ct){return C(F,He,Qe,ct)}),F}function x0(T,C){return T==null?!0:Rh(T,C)}function Vb(T,C,F){return T==null?T:eo(T,C,to(F))}function JR(T,C,F,Y){return Y=typeof Y=="function"?Y:t,T==null?T:eo(T,C,to(F),Y)}function w0(T){return T==null?[]:gi(T,ha(T))}function Ip(T){return T==null?[]:gi(T,Na(T))}function qv(T,C,F){return F===t&&(F=C,C=t),F!==t&&(F=Io(F),F=F===F?F:0),C!==t&&(C=Io(C),C=C===C?C:0),rc(Io(T),C,F)}function ss(T,C,F){return C=qf(C),F===t?(F=C,C=0):F=qf(F),T=Io(T),eh(T,C,F)}function dw(T,C,F){if(F&&typeof F!="boolean"&&Li(T,C,F)&&(C=F=t),F===t&&(typeof C=="boolean"?(F=C,C=t):typeof T=="boolean"&&(F=T,T=t)),T===t&&C===t?(T=0,C=1):(T=qf(T),C===t?(C=T,T=0):C=qf(C)),T>C){var Y=T;T=C,C=Y}if(F||T%1||C%1){var ue=El();return ia(T+ue*(C-T+jc("1e-"+((ue+"").length-1))),C)}return Es(T,C)}var BS=c(function(T,C,F){return C=C.toLowerCase(),T+(F?Dg(C):C)});function Dg(T){return Yb(ti(T).toLowerCase())}function PS(T){return T=ti(T),T&&T.replace(Yo,_p).replace(zi,"")}function FS(T,C,F){T=ti(T),C=rs(C);var Y=T.length;F=F===t?Y:rc(Mr(F),0,Y);var ue=F;return F-=C.length,F>=0&&T.slice(F,ue)==C}function US(T){return T=ti(T),T&&Er.test(T)?T.replace(En,vp):T}function zS(T){return T=ti(T),T&&kt.test(T)?T.replace(tt,"\\$&"):T}var Zv=c(function(T,C,F){return T+(F?"-":"")+C.toLowerCase()}),QR=c(function(T,C,F){return T+(F?" ":"")+C.toLowerCase()}),pw=E("toLowerCase");function qR(T,C,F){T=ti(T),C=Mr(C);var Y=C?ys(T):0;if(!C||Y>=C)return T;var ue=(C-Y)/2;return vt(qu(ue),F)+T+vt(Jc(ue),F)}function ZR(T,C,F){T=ti(T),C=Mr(C);var Y=C?ys(T):0;return C&&Y<C?T+vt(C-Y,F):T}function df(T,C,F){T=ti(T),C=Mr(C);var Y=C?ys(T):0;return C&&Y<C?vt(C-Y,F)+T:T}function HS(T,C,F){return F||C==null?C=0:C&&(C=+C),jp(ti(T).replace(qt,""),C||0)}function GS(T,C,F){return(F?Li(T,C,F):C===t)?C=1:C=Mr(C),Us(ti(T),C)}function w_(){var T=arguments,C=ti(T[0]);return T.length<3?C:C.replace(T[1],T[2])}var fw=c(function(T,C,F){return T+(F?"_":"")+C.toLowerCase()});function WS(T,C,F){return F&&typeof F!="number"&&Li(T,C,F)&&(C=F=t),F=F===t?ae:F>>>0,F?(T=ti(T),T&&(typeof C=="string"||C!=null&&!cf(C))&&(C=rs(C),!C&&Ju(T))?Qa(qr(T),0,F):T.split(C,F)):[]}var ey=c(function(T,C,F){return T+(F?" ":"")+Yb(C)});function mw(T,C,F){return T=ti(T),F=F==null?0:rc(Mr(F),0,T.length),C=rs(C),T.slice(F,F+C.length)==C}function VS(T,C,F){var Y=ve.templateSettings;F&&Li(T,C,F)&&(C=t),T=ti(T),C=Ap({},C,Y,Me);var ue=Ap({},C.imports,Y.imports,Me),ye=ha(ue),He=gi(ue,ye),Qe,ct,Wt=0,Vt=C.interpolate||Oo,Zt="__p += '",Tn=Rr((C.escape||Oo).source+"|"+Vt.source+"|"+(Vt===Wn?Pn:Oo).source+"|"+(C.evaluate||Oo).source+"|$","g"),kn="//# sourceURL="+(Fr.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Hl+"]")+`
`;T.replace(Tn,function(ar,ci,Ti,_d,ch,su){return Ti||(Ti=_d),Zt+=T.slice(Wt,su).replace(cl,Qh),ci&&(Qe=!0,Zt+=`' +
__e(`+ci+`) +
'`),ch&&(ct=!0,Zt+=`';
`+ch+`;
__p += '`),Ti&&(Zt+=`' +
((__t = (`+Ti+`)) == null ? '' : __t) +
'`),Wt=su+ar.length,ar}),Zt+=`';
`;var _r=Fr.call(C,"variable")&&C.variable;if(!_r)Zt=`with (obj) {
`+Zt+`
}
`;else if(Nt.test(_r))throw new Nn(u);Zt=(ct?Zt.replace(Ut,""):Zt).replace(ut,"$1").replace(Ht,"$1;"),Zt="function("+(_r||"obj")+`) {
`+(_r?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Qe?", __e = _.escape":"")+(ct?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Zt+`return __p
}`;var Br=ty(function(){return er(ye,kn+"return "+Zt).apply(t,He)});if(Br.source=Zt,Nb(Br))throw Br;return Br}function Bh(T){return ti(T).toLowerCase()}function em(T){return ti(T).toUpperCase()}function gw(T,C,F){if(T=ti(T),T&&(F||C===t))return Jh(T);if(!T||!(C=rs(C)))return T;var Y=qr(T),ue=qr(C),ye=Ci(Y,ue),He=ea(Y,ue)+1;return Qa(Y,ye,He).join("")}function jb(T,C,F){if(T=ti(T),T&&(F||C===t))return T.slice(0,yl(T)+1);if(!T||!(C=rs(C)))return T;var Y=qr(T),ue=ea(Y,qr(C))+1;return Qa(Y,0,ue).join("")}function _w(T,C,F){if(T=ti(T),T&&(F||C===t))return T.replace(qt,"");if(!T||!(C=rs(C)))return T;var Y=qr(T),ue=Ci(Y,qr(C));return Qa(Y,ue).join("")}function C_(T,C){var F=ee,Y=re;if(Da(C)){var ue="separator"in C?C.separator:ue;F="length"in C?Mr(C.length):F,Y="omission"in C?rs(C.omission):Y}T=ti(T);var ye=T.length;if(Ju(T)){var He=qr(T);ye=He.length}if(F>=ye)return T;var Qe=F-ys(Y);if(Qe<1)return Y;var ct=He?Qa(He,0,Qe).join(""):T.slice(0,Qe);if(ue===t)return ct+Y;if(He&&(Qe+=ct.length-Qe),cf(ue)){if(T.slice(Qe).search(ue)){var Wt,Vt=ct;for(ue.global||(ue=Rr(ue.source,ti(ir.exec(ue))+"g")),ue.lastIndex=0;Wt=ue.exec(Vt);)var Zt=Wt.index;ct=ct.slice(0,Zt===t?Qe:Zt)}}else if(T.indexOf(rs(ue),Qe)!=Qe){var Tn=ct.lastIndexOf(ue);Tn>-1&&(ct=ct.slice(0,Tn))}return ct+Y}function Xb(T){return T=ti(T),T&&Pr.test(T)?T.replace(zt,na):T}var M_=c(function(T,C,F){return T+(F?" ":"")+C.toUpperCase()}),Yb=E("toUpperCase");function vw(T,C,F){return T=ti(T),C=F?t:C,C===t?bc(T)?Xc(T):Ff(T):T.match(C)||[]}var ty=Vn(function(T,C){try{return zn(T,t,C)}catch(F){return Nb(F)?F:new Nn(F)}}),jS=On(function(T,C){return xi(C,function(F){F=tu(F),wu(T,F,Xt(T[F],T))}),T});function XS(T){var C=T==null?0:T.length,F=Jn();return T=C?mi(T,function(Y){if(typeof Y[1]!="function")throw new bs(l);return[F(Y[0]),Y[1]]}):[],Vn(function(Y){for(var ue=-1;++ue<C;){var ye=T[ue];if(zn(ye[0],this,Y))return zn(ye[1],this,Y)}})}function ek(T){return zd(Js(T,_))}function YS(T){return function(){return T}}function tk(T,C){return T==null||T!==T?C:T}var yw=N(),nk=N(!0);function Ph(T){return T}function Bi(T){return Fs(typeof T=="function"?T:Js(T,_))}function tm(T){return ku(Js(T,_))}function ny(T,C){return Zs(T,Js(C,_))}var Kb=Vn(function(T,C){return function(F){return Cn(F,T,C)}}),nm=Vn(function(T,C){return function(F){return Cn(T,F,C)}});function KS(T,C,F){var Y=ha(C),ue=Ss(C,Y);F==null&&!(Da(C)&&(ue.length||!Y.length))&&(F=C,C=T,T=this,ue=Ss(C,ha(C)));var ye=!(Da(F)&&"chain"in F)||!!F.chain,He=Qf(T);return xi(ue,function(Qe){var ct=C[Qe];T[Qe]=ct,He&&(T.prototype[Qe]=function(){var Wt=this.__chain__;if(ye||Wt){var Vt=T(this.__wrapped__),Zt=Vt.__actions__=is(this.__actions__);return Zt.push({func:ct,args:arguments,thisArg:T}),Vt.__chain__=Wt,Vt}return ct.apply(T,yu([this.value()],arguments))})}),T}function A_(){return Jr._===this&&(Jr._=Eh),this}function Jb(){}function bw(T){return T=Mr(T),Vn(function(C){return xo(C,T)})}var JS=je(mi),rk=je(vu),QS=je(yh);function Qb(T){return Ra(T)?Vr(tu(T)):th(T)}function Tw(T){return function(C){return T==null?t:co(T,C)}}var qS=en(),qb=en(!0);function Zb(){return[]}function C0(){return!1}function ZS(){return{}}function eE(){return""}function tE(){return!0}function nE(T,C){if(T=Mr(T),T<1||T>j)return[];var F=ae,Y=ia(T,ae);C=Jn(C),T-=ae;for(var ue=Tu(Y,C);++F<T;)C(F);return ue}function Ng(T){return zr(T)?mi(T,tu):md(T)?[T]:is(Fv(ti(T)))}function rE(T){var C=++Bo;return ti(T)+C}var iE=xe(function(T,C){return T+C},0),sE=rn("ceil"),oE=xe(function(T,C){return T/C},1),aE=rn("floor");function An(T){return T&&T.length?Cu(T,Ph,Ya):t}function Sw(T,C){return T&&T.length?Cu(T,Jn(C,2),Ya):t}function Ew(T){return ya(T,Ph)}function M0(T,C){return ya(T,Jn(C,2))}function ry(T){return T&&T.length?Cu(T,Ph,Ca):t}function I_(T,C){return T&&T.length?Cu(T,Jn(C,2),Ca):t}var $w=xe(function(T,C){return T*C},1),e1=rn("round"),xw=xe(function(T,C){return T-C},0);function ww(T){return T&&T.length?No(T,Ph):0}function Cw(T,C){return T&&T.length?No(T,Jn(C,2)):0}return ve.after=Ue,ve.ary=Ze,ve.assign=Xv,ve.assignIn=zb,ve.assignInWith=Ap,ve.assignWith=Lg,ve.at=Hb,ve.before=Ct,ve.bind=Xt,ve.bindAll=jS,ve.bindKey=tn,ve.castArray=jd,ve.chain=Fu,ve.chunk=Rm,ve.compact=nu,ve.concat=p_,ve.cond=XS,ve.conforms=ek,ve.constant=YS,ve.countBy=Ob,ve.create=$_,ve.curry=Qt,ve.curryRight=bn,ve.debounce=Rn,ve.defaults=kS,ve.defaultsDeep=sw,ve.defer=Dn,ve.delay=ro,ve.difference=fo,ve.differenceBy=Ai,ve.differenceWith=Il,ve.drop=Oa,ve.dropRight=ru,ve.dropRightWhile=Rl,ve.dropWhile=Wf,ve.fill=el,ve.filter=Vd,ve.flatMap=Rg,ve.flatMapDeep=v0,ve.flatMapDepth=Lb,ve.flatten=ef,ve.flattenDeep=f0,ve.flattenDepth=km,ve.flip=yt,ve.flow=yw,ve.flowRight=nk,ve.fromPairs=Nc,ve.functions=lw,ve.functionsIn=uw,ve.groupBy=kg,ve.initial=Gd,ve.intersection=wg,ve.intersectionBy=Cg,ve.intersectionWith=Hs,ve.invert=NS,ve.invertBy=Kv,ve.invokeMap=af,ve.iteratee=Bi,ve.keyBy=Hm,ve.keys=ha,ve.keysIn=Na,ve.map=li,ve.mapKeys=cw,ve.mapValues=Zf,ve.matches=tm,ve.matchesProperty=ny,ve.memoize=st,ve.merge=Xm,ve.mergeWith=gd,ve.method=Kb,ve.methodOf=nm,ve.mixin=KS,ve.negate=bt,ve.nthArg=bw,ve.omit=hw,ve.omitBy=x_,ve.once=on,ve.orderBy=lf,ve.over=JS,ve.overArgs=Gn,ve.overEvery=rk,ve.overSome=QS,ve.partial=Bn,ve.partialRight=Yn,ve.partition=Gm,ve.pick=jt,ve.pickBy=Gb,ve.property=Qb,ve.propertyOf=Tw,ve.pull=m0,ve.pullAll=$p,ve.pullAllBy=Mg,ve.pullAllWith=cc,ve.pullAt=Wd,ve.range=qS,ve.rangeRight=qb,ve.rearg=gr,ve.reject=b0,ve.remove=Mo,ve.rest=rl,ve.reverse=La,ve.sampleSize=y,ve.set=YR,ve.setWith=KR,ve.shuffle=I,ve.slice=Uv,ve.sortBy=J,ve.sortedUniq=Xf,ve.sortedUniqBy=g_,ve.split=WS,ve.spread=Di,ve.tail=Dm,ve.take=__,ve.takeRight=zv,ve.takeRightWhile=Nm,ve.takeWhile=xp,ve.tap=g0,ve.throttle=uf,ve.thru=Ag,ve.toArray=RS,ve.toPairs=Wb,ve.toPairsIn=Qv,ve.toPath=Ng,ve.toPlainObject=iw,ve.transform=Ni,ve.unary=T_,ve.union=Hv,ve.unionBy=wS,ve.unionWith=v_,ve.uniq=y_,ve.uniqBy=nf,ve.uniqWith=$n,ve.unset=x0,ve.unzip=Oh,ve.unzipWith=Bm,ve.update=Vb,ve.updateWith=JR,ve.values=w0,ve.valuesIn=Ip,ve.without=Ao,ve.words=vw,ve.wrap=iu,ve.xor=Gv,ve.xorBy=b_,ve.xorWith=Pm,ve.zip=CS,ve.zipObject=kb,ve.zipObjectDeep=Pc,ve.zipWith=Gs,ve.entries=Wb,ve.entriesIn=Qv,ve.extend=zb,ve.extendWith=Ap,KS(ve,ve),ve.add=iE,ve.attempt=ty,ve.camelCase=BS,ve.capitalize=Dg,ve.ceil=sE,ve.clamp=qv,ve.clone=Zx,ve.cloneDeep=VR,ve.cloneDeepWith=Vm,ve.cloneWith=WR,ve.conformsTo=MS,ve.deburr=PS,ve.defaultTo=tk,ve.divide=oE,ve.endsWith=FS,ve.eq=Dh,ve.escape=US,ve.escapeRegExp=zS,ve.every=_0,ve.find=ei,ve.findIndex=Sp,ve.findKey=Yd,ve.findLast=Um,ve.findLastIndex=Ep,ve.findLastKey=OS,ve.floor=aE,ve.forEach=y0,ve.forEachRight=zm,ve.forIn=Yv,ve.forInRight=LS,ve.forOwn=ow,ve.forOwnRight=aw,ve.get=E0,ve.gt=ew,ve.gte=T0,ve.has=DS,ve.hasIn=$0,ve.head=tl,ve.identity=Ph,ve.includes=of,ve.indexOf=Bc,ve.inRange=ss,ve.invoke=Jv,ve.isArguments=S0,ve.isArray=zr,ve.isArrayBuffer=Db,ve.isArrayLike=Ho,ve.isArrayLikeObject=mo,ve.isBoolean=AS,ve.isBuffer=Jf,ve.isDate=tw,ve.isElement=Cp,ve.isEmpty=Wv,ve.isEqual=ui,ve.isEqualWith=io,ve.isError=Nb,ve.isFinite=Bb,ve.isFunction=Qf,ve.isInteger=Vv,ve.isLength=Xd,ve.isMap=fd,ve.isMatch=Ji,ve.isMatchWith=jm,ve.isNaN=Pb,ve.isNative=Fb,ve.isNil=jR,ve.isNull=S_,ve.isNumber=Mp,ve.isObject=Da,ve.isObjectLike=il,ve.isPlainObject=Nr,ve.isRegExp=cf,ve.isSafeInteger=ca,ve.isSet=Ub,ve.isString=E_,ve.isSymbol=md,ve.isTypedArray=Og,ve.isUndefined=nw,ve.isWeakMap=rw,ve.isWeakSet=Nh,ve.join=Om,ve.kebabCase=Zv,ve.last=kl,ve.lastIndexOf=nl,ve.lowerCase=QR,ve.lowerFirst=pw,ve.lt=IS,ve.lte=hf,ve.max=An,ve.maxBy=Sw,ve.mean=Ew,ve.meanBy=M0,ve.min=ry,ve.minBy=I_,ve.stubArray=Zb,ve.stubFalse=C0,ve.stubObject=ZS,ve.stubString=eE,ve.stubTrue=tE,ve.multiply=$w,ve.nth=Vf,ve.noConflict=A_,ve.noop=Jb,ve.now=fe,ve.pad=qR,ve.padEnd=ZR,ve.padStart=df,ve.parseInt=HS,ve.random=dw,ve.reduce=Wm,ve.reduceRight=Kf,ve.repeat=GS,ve.replace=w_,ve.result=XR,ve.round=e1,ve.runInContext=Ye,ve.sample=g,ve.size=B,ve.snakeCase=fw,ve.some=V,ve.sortedIndex=Lm,ve.sortedIndexBy=f_,ve.sortedIndexOf=Rb,ve.sortedLastIndex=tf,ve.sortedLastIndexBy=jf,ve.sortedLastIndexOf=m_,ve.startCase=ey,ve.startsWith=mw,ve.subtract=xw,ve.sum=ww,ve.sumBy=Cw,ve.template=VS,ve.times=nE,ve.toFinite=qf,ve.toInteger=Mr,ve.toLength=jv,ve.toLower=Bh,ve.toNumber=Io,ve.toSafeInteger=et,ve.toString=ti,ve.toUpper=em,ve.trim=gw,ve.trimEnd=jb,ve.trimStart=_w,ve.truncate=C_,ve.unescape=Xb,ve.uniqueId=rE,ve.upperCase=M_,ve.upperFirst=Yb,ve.each=y0,ve.eachRight=zm,ve.first=tl,KS(ve,function(){var T={};return Eo(ve,function(C,F){Fr.call(ve.prototype,F)||(T[F]=C)}),T}(),{chain:!1}),ve.VERSION=i,xi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(T){ve[T].placeholder=ve}),xi(["drop","take"],function(T,C){Hn.prototype[T]=function(F){F=F===t?1:lo(Mr(F),0);var Y=this.__filtered__&&!C?new Hn(this):this.clone();return Y.__filtered__?Y.__takeCount__=ia(F,Y.__takeCount__):Y.__views__.push({size:ia(F,ae),type:T+(Y.__dir__<0?"Right":"")}),Y},Hn.prototype[T+"Right"]=function(F){return this.reverse()[T](F).reverse()}}),xi(["filter","map","takeWhile"],function(T,C){var F=C+1,Y=F==oe||F==me;Hn.prototype[T]=function(ue){var ye=this.clone();return ye.__iteratees__.push({iteratee:Jn(ue,3),type:F}),ye.__filtered__=ye.__filtered__||Y,ye}}),xi(["head","last"],function(T,C){var F="take"+(C?"Right":"");Hn.prototype[T]=function(){return this[F](1).value()[0]}}),xi(["initial","tail"],function(T,C){var F="drop"+(C?"":"Right");Hn.prototype[T]=function(){return this.__filtered__?new Hn(this):this[F](1)}}),Hn.prototype.compact=function(){return this.filter(Ph)},Hn.prototype.find=function(T){return this.filter(T).head()},Hn.prototype.findLast=function(T){return this.reverse().find(T)},Hn.prototype.invokeMap=Vn(function(T,C){return typeof T=="function"?new Hn(this):this.map(function(F){return Cn(F,T,C)})}),Hn.prototype.reject=function(T){return this.filter(bt(Jn(T)))},Hn.prototype.slice=function(T,C){T=Mr(T);var F=this;return F.__filtered__&&(T>0||C<0)?new Hn(F):(T<0?F=F.takeRight(-T):T&&(F=F.drop(T)),C!==t&&(C=Mr(C),F=C<0?F.dropRight(-C):F.take(C-T)),F)},Hn.prototype.takeRightWhile=function(T){return this.reverse().takeWhile(T).reverse()},Hn.prototype.toArray=function(){return this.take(ae)},Eo(Hn.prototype,function(T,C){var F=/^(?:filter|find|map|reject)|While$/.test(C),Y=/^(?:head|last)$/.test(C),ue=ve[Y?"take"+(C=="last"?"Right":""):C],ye=Y||/^find/.test(C);!ue||(ve.prototype[C]=function(){var He=this.__wrapped__,Qe=Y?[1]:arguments,ct=He instanceof Hn,Wt=Qe[0],Vt=ct||zr(He),Zt=function(ci){var Ti=ue.apply(ve,yu([ci],Qe));return Y&&Tn?Ti[0]:Ti};Vt&&F&&typeof Wt=="function"&&Wt.length!=1&&(ct=Vt=!1);var Tn=this.__chain__,kn=!!this.__actions__.length,_r=ye&&!Tn,Br=ct&&!kn;if(!ye&&Vt){He=Br?He:new Hn(this);var ar=T.apply(He,Qe);return ar.__actions__.push({func:Ag,args:[Zt],thisArg:t}),new Hr(ar,Tn)}return _r&&Br?T.apply(this,Qe):(ar=this.thru(Zt),_r?Y?ar.value()[0]:ar.value():ar)})}),xi(["pop","push","shift","sort","splice","unshift"],function(T){var C=To[T],F=/^(?:push|sort|unshift)$/.test(T)?"tap":"thru",Y=/^(?:pop|shift)$/.test(T);ve.prototype[T]=function(){var ue=arguments;if(Y&&!this.__chain__){var ye=this.value();return C.apply(zr(ye)?ye:[],ue)}return this[F](function(He){return C.apply(zr(He)?He:[],ue)})}}),Eo(Hn.prototype,function(T,C){var F=ve[C];if(F){var Y=F.name+"";Fr.call(Cc,Y)||(Cc[Y]=[]),Cc[Y].push({name:C,func:F})}}),Cc[G(t,k).name]=[{name:"wrapper",func:t}],Hn.prototype.clone=Xp,Hn.prototype.reverse=Sa,Hn.prototype.value=Zr,ve.prototype.at=Lh,ve.prototype.chain=Fm,ve.prototype.commit=rf,ve.prototype.next=sf,ve.prototype.plant=pd,ve.prototype.reverse=wp,ve.prototype.toJSON=ve.prototype.valueOf=ve.prototype.value=Ig,ve.prototype.first=ve.prototype.head,Ga&&(ve.prototype[Ga]=Yf),ve},_i=Od();Ri?((Ri.exports=_i)._=_i,_s._=_i):Jr._=_i}).call(X0)})(dm,dm.exports);const _Se=dm.exports,vSe=(n,e)=>({clock:new mSe,items:{},tfs:{},hulls:{},lines:{},texts:{},points:{},widgets:{},onMove:(t,i,s,o)=>n(l=>{console.log(o),l[i][t].position={...o.position},l[i][t].rotation=o.quaternion,l[i][t].rotation.x=o.quaternion.x,l[i][t].rotation.y=o.quaternion.y,l[i][t].rotation.z=o.quaternion.z,l[i][t].rotation.w=o.quaternion.w,l[i][t].scale={...o.scale}}),onClick:(t,i,s,o)=>{i||console.log(`id: ${t} clicked!`,s),e().items[t]&&!i&&o.stopPropagation()},onPointerOver:(t,i,s)=>{},onPointerOut:(t,i,s)=>{},pause:()=>n(t=>{t.clock.setTimescale(0)}),play:t=>n(i=>{i.clock.setTimescale(t||1)}),reset:t=>n(i=>{console.log(`setting time to ${t}`),i.clock._elapsed=t?t*1e3:0}),clearItems:()=>n(t=>({items:{}})),clearLines:()=>n(t=>({lines:{}})),clearTfs:()=>n(t=>({tfs:{}})),clearHulls:()=>n(t=>({hulls:{}})),clearTexts:()=>n(t=>({texts:{}})),clearPoints:()=>n(t=>({points:{}})),setItems:t=>n(i=>({items:t})),setLines:t=>n(i=>({lines:t})),setTfs:t=>n(i=>({tfs:t})),setHulls:t=>n(i=>({hulls:t})),setTexts:t=>n(i=>({texts:t})),setPoints:t=>n(i=>({points:t})),removeItem:t=>n(i=>{delete i.items[t]}),removeLine:t=>n(i=>{delete i.lines[t]}),removeTf:t=>n(i=>{delete i.tfs[t]}),removeHull:t=>n(i=>{delete i.hulls[t]}),removeText:t=>n(i=>{delete i.texts[t]}),removePoint:t=>n(i=>{delete i.points[t]}),setItem:(t,i)=>n(s=>{s.items[t]=i}),setLine:(t,i)=>n(s=>{s.lines[t]=i}),setTf:(t,i)=>n(s=>{s.tfs[t]=i}),setHull:(t,i)=>n(s=>{s.hulls[t]=i}),setText:(t,i)=>n(s=>{s.texts[t]=i}),setPoint:(t,i)=>n(s=>{s.points[t]=i}),setProperty:(t,i)=>n(s=>{_Se.set(s,t,i)})}),ySe=fSe(eSe(vSe)),bSe=qTe(ySe),yX=he.createContext(),As=(n,e)=>{const t=he.useContext(yX);return gX(t,n,e)},TSe=({store:n,children:e,debug:t=!1})=>(t&&console.log("SceneProvider regenerated"),Yt(yX.Provider,{value:n||bSe,children:e})),SSe=Sr.forwardRef((n,e)=>Yt("ambientLight",{ref:e,...n}));Sr.forwardRef((n,e)=>Yt("pointLight",{ref:e,...n}));const ESe=Sr.forwardRef((n,e)=>Yt("directionalLight",{ref:e,...n})),i0=(n,e,t,i)=>{var s=new vn;return s.setRGB(n/255,e/255,t/255),i<=.99?new bx({color:s.getHex(),opacity:i+.1,transparent:!0,depthWrite:!0,blendSrc:TR,blendDst:SR,blendEquation:vP,blending:Z0}):new bx({color:s.getHex(),opacity:i,blending:Z0})},oA=dm.exports.memoize(n=>{var e=new vn(n),t=`
		varying vec3	vVertexWorldPosition;
		varying vec3	vVertexNormal;

		// varying vec4	vFragColor;

		void main(){
			vVertexNormal	= normalize(normalMatrix * normal);

			vVertexWorldPosition	= (modelMatrix * vec4(position, 1.0)).xyz;

			// set gl_Position
			gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
		}`,i=`
		uniform vec3	glowColor;
		uniform float	coeficient;
		uniform float	power;

		varying vec3	vVertexNormal;
		varying vec3	vVertexWorldPosition;

		// varying vec4	vFragColor;

		void main(){
			vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;
			vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
			viewCameraToVertex	= normalize(viewCameraToVertex);
			float intensity		= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);
			gl_FragColor		= vec4(glowColor, intensity);
		}`,s=new mh({uniforms:{coeficient:{type:"f",value:1.2},power:{type:"f",value:4},glowColor:{type:"c",value:e}},vertexShader:t,fragmentShader:i,blending:XA,transparent:!0,depthWrite:!1,depthTest:!1});return s});function $Se(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(e,function(i,s,o,l){return s+s+o+o+l+l});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}const Ty=new JP,Dp=new be,K_=new be,al=new jo,mG={X:new be(1,0,0),Y:new be(0,1,0),Z:new be(0,0,1)},VO={type:"change"},gG={type:"mouseDown"},_G={type:"mouseUp",mode:null},vG={type:"objectChange"};class xSe extends as{constructor(e,t){super(),t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const i=new RSe;this._gizmo=i,this.add(i);const s=new kSe;this._plane=s,this.add(s);const o=this;function l(O,D){let L=D;Object.defineProperty(o,O,{get:function(){return L!==void 0?L:D},set:function(z){L!==z&&(L=z,s[O]=z,i[O]=z,o.dispatchEvent({type:O+"-changed",value:z}),o.dispatchEvent(VO))}}),o[O]=D,s[O]=D,i[O]=D}l("camera",e),l("object",void 0),l("enabled",!0),l("axis",null),l("mode","translate"),l("translationSnap",null),l("rotationSnap",null),l("scaleSnap",null),l("space","world"),l("size",1),l("dragging",!1),l("showX",!0),l("showY",!0),l("showZ",!0);const u=new be,h=new be,d=new jo,m=new jo,_=new be,v=new jo,S=new be,x=new be,w=new be,A=0,k=new be;l("worldPosition",u),l("worldPositionStart",h),l("worldQuaternion",d),l("worldQuaternionStart",m),l("cameraPosition",_),l("cameraQuaternion",v),l("pointStart",S),l("pointEnd",x),l("rotationAxis",w),l("rotationAngle",A),l("eye",k),this._offset=new be,this._startNorm=new be,this._endNorm=new be,this._cameraScale=new be,this._parentPosition=new be,this._parentQuaternion=new jo,this._parentQuaternionInv=new jo,this._parentScale=new be,this._worldScaleStart=new be,this._worldQuaternionInv=new jo,this._worldScale=new be,this._positionStart=new be,this._quaternionStart=new jo,this._scaleStart=new be,this._getPointer=wSe.bind(this),this._onPointerDown=MSe.bind(this),this._onPointerHover=CSe.bind(this),this._onPointerMove=ASe.bind(this),this._onPointerUp=ISe.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye):this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;Ty.setFromCamera(e,this.camera);const t=jO(this._gizmo.picker[this.mode],Ty);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){Ty.setFromCamera(e,this.camera);const t=jO(this._plane,Ty,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,gG.mode=this.mode,this.dispatchEvent(gG)}}pointerMove(e){const t=this.axis,i=this.mode,s=this.object;let o=this.space;if(i==="scale"?o="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(o="world"),s===void 0||t===null||this.dragging===!1||e.button!==-1)return;Ty.setFromCamera(e,this.camera);const l=jO(this._plane,Ty,!0);if(l){if(this.pointEnd.copy(l.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),o==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),o==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),s.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(o==="local"&&(s.position.applyQuaternion(al.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.position.applyQuaternion(this._quaternionStart)),o==="world"&&(s.parent&&s.position.add(Dp.setFromMatrixPosition(s.parent.matrixWorld)),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.parent&&s.position.sub(Dp.setFromMatrixPosition(s.parent.matrixWorld))));else if(i==="scale"){if(t.search("XYZ")!==-1){let u=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(u*=-1),K_.set(u,u,u)}else Dp.copy(this.pointStart),K_.copy(this.pointEnd),Dp.applyQuaternion(this._worldQuaternionInv),K_.applyQuaternion(this._worldQuaternionInv),K_.divide(Dp),t.search("X")===-1&&(K_.x=1),t.search("Y")===-1&&(K_.y=1),t.search("Z")===-1&&(K_.z=1);s.scale.copy(this._scaleStart).multiply(K_),this.scaleSnap&&(t.search("X")!==-1&&(s.scale.x=Math.round(s.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(s.scale.y=Math.round(s.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(s.scale.z=Math.round(s.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const u=20/this.worldPosition.distanceTo(Dp.setFromMatrixPosition(this.camera.matrixWorld));t==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Dp.copy(this.rotationAxis).cross(this.eye))*u):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(mG[t]),Dp.copy(mG[t]),o==="local"&&Dp.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Dp.cross(this.eye).normalize())*u),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),o==="local"&&t!=="E"&&t!=="XYZE"?(s.quaternion.copy(this._quaternionStart),s.quaternion.multiply(al.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),s.quaternion.copy(al.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),s.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(VO),this.dispatchEvent(vG)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(_G.mode=this.mode,this.dispatchEvent(_G)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){!this.enabled||this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(VO),this.dispatchEvent(vG),this.pointStart.copy(this.pointEnd))}getRaycaster(){return Ty}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function wSe(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{const e=this.domElement.getBoundingClientRect();return{x:(n.clientX-e.left)/e.width*2-1,y:-(n.clientY-e.top)/e.height*2+1,button:n.button}}}function CSe(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n));break}}function MSe(n){!this.enabled||(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function ASe(n){!this.enabled||this.pointerMove(this._getPointer(n))}function ISe(n){!this.enabled||(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function jO(n,e,t){const i=e.intersectObject(n,!0);for(let s=0;s<i.length;s++)if(i[s].object.visible||t)return i[s];return!1}const SM=new Mb,Wo=new be(0,1,0),yG=new be(0,0,0),bG=new Ar,EM=new jo,aA=new jo,Hg=new be,TG=new Ar,u$=new be(1,0,0),ky=new be(0,1,0),c$=new be(0,0,1),$M=new be,JE=new be,QE=new be;class RSe extends as{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new yg({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Rd({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=e.clone();i.opacity=.15;const s=t.clone();s.opacity=.5;const o=e.clone();o.color.setHex(16711680);const l=e.clone();l.color.setHex(65280);const u=e.clone();u.color.setHex(255);const h=e.clone();h.color.setHex(16711680),h.opacity=.5;const d=e.clone();d.color.setHex(65280),d.opacity=.5;const m=e.clone();m.color.setHex(255),m.opacity=.5;const _=e.clone();_.opacity=.25;const v=e.clone();v.color.setHex(16776960),v.opacity=.25,e.clone().color.setHex(16776960);const S=e.clone();S.color.setHex(7895160);const x=new pa(0,.04,.1,12);x.translate(0,.05,0);const w=new Pa(.08,.08,.08);w.translate(0,.04,0);const A=new Or;A.setAttribute("position",new Fn([0,0,0,1,0,0],3));const k=new pa(.0075,.0075,.5,3);k.translate(0,.25,0);function O(oe,ce){const me=new lg(oe,.0075,3,64,ce*Math.PI*2);return me.rotateY(Math.PI/2),me.rotateX(Math.PI/2),me}function D(){const oe=new Or;return oe.setAttribute("position",new Fn([0,0,0,1,1,1],3)),oe}const L={X:[[new Sn(x,o),[.5,0,0],[0,0,-Math.PI/2]],[new Sn(x,o),[-.5,0,0],[0,0,Math.PI/2]],[new Sn(k,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Sn(x,l),[0,.5,0]],[new Sn(x,l),[0,-.5,0],[Math.PI,0,0]],[new Sn(k,l)]],Z:[[new Sn(x,u),[0,0,.5],[Math.PI/2,0,0]],[new Sn(x,u),[0,0,-.5],[-Math.PI/2,0,0]],[new Sn(k,u),null,[Math.PI/2,0,0]]],XYZ:[[new Sn(new cg(.1,0),_.clone()),[0,0,0]]],XY:[[new Sn(new Pa(.15,.15,.01),m.clone()),[.15,.15,0]]],YZ:[[new Sn(new Pa(.15,.15,.01),h.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Sn(new Pa(.15,.15,.01),d.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},z={X:[[new Sn(new pa(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new Sn(new pa(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Sn(new pa(.2,0,.6,4),i),[0,.3,0]],[new Sn(new pa(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Sn(new pa(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new Sn(new pa(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Sn(new cg(.2,0),i)]],XY:[[new Sn(new Pa(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new Sn(new Pa(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Sn(new Pa(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},H={START:[[new Sn(new cg(.01,2),s),null,null,null,"helper"]],END:[[new Sn(new cg(.01,2),s),null,null,null,"helper"]],DELTA:[[new wd(D(),s),null,null,null,"helper"]],X:[[new wd(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new wd(A,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new wd(A,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},U={XYZE:[[new Sn(O(.5,1),S),null,[0,Math.PI/2,0]]],X:[[new Sn(O(.5,.5),o)]],Y:[[new Sn(O(.5,.5),l),null,[0,0,-Math.PI/2]]],Z:[[new Sn(O(.5,.5),u),null,[0,Math.PI/2,0]]],E:[[new Sn(O(.75,1),v),null,[0,Math.PI/2,0]]]},P={AXIS:[[new wd(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},K={XYZE:[[new Sn(new _g(.25,10,8),i)]],X:[[new Sn(new lg(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Sn(new lg(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Sn(new lg(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Sn(new lg(.75,.1,2,24),i)]]},ee={X:[[new Sn(w,o),[.5,0,0],[0,0,-Math.PI/2]],[new Sn(k,o),[0,0,0],[0,0,-Math.PI/2]],[new Sn(w,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Sn(w,l),[0,.5,0]],[new Sn(k,l)],[new Sn(w,l),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Sn(w,u),[0,0,.5],[Math.PI/2,0,0]],[new Sn(k,u),[0,0,0],[Math.PI/2,0,0]],[new Sn(w,u),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Sn(new Pa(.15,.15,.01),m),[.15,.15,0]]],YZ:[[new Sn(new Pa(.15,.15,.01),h),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Sn(new Pa(.15,.15,.01),d),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Sn(new Pa(.1,.1,.1),_.clone())]]},re={X:[[new Sn(new pa(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new Sn(new pa(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Sn(new pa(.2,0,.6,4),i),[0,.3,0]],[new Sn(new pa(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Sn(new pa(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new Sn(new pa(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Sn(new Pa(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new Sn(new Pa(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Sn(new Pa(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Sn(new Pa(.2,.2,.2),i),[0,0,0]]]},ie={X:[[new wd(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new wd(A,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new wd(A,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function de(oe){const ce=new as;for(const me in oe)for(let Ae=oe[me].length;Ae--;){const j=oe[me][Ae][0].clone(),Z=oe[me][Ae][1],ne=oe[me][Ae][2],ae=oe[me][Ae][3],_e=oe[me][Ae][4];j.name=me,j.tag=_e,Z&&j.position.set(Z[0],Z[1],Z[2]),ne&&j.rotation.set(ne[0],ne[1],ne[2]),ae&&j.scale.set(ae[0],ae[1],ae[2]),j.updateMatrix();const Le=j.geometry.clone();Le.applyMatrix4(j.matrix),j.geometry=Le,j.renderOrder=1/0,j.position.set(0,0,0),j.rotation.set(0,0,0),j.scale.set(1,1,1),ce.add(j)}return ce}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=de(L)),this.add(this.gizmo.rotate=de(U)),this.add(this.gizmo.scale=de(ee)),this.add(this.picker.translate=de(z)),this.add(this.picker.rotate=de(K)),this.add(this.picker.scale=de(re)),this.add(this.helper.translate=de(H)),this.add(this.helper.rotate=de(P)),this.add(this.helper.scale=de(ie)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:aA;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let i=[];i=i.concat(this.picker[this.mode].children),i=i.concat(this.gizmo[this.mode].children),i=i.concat(this.helper[this.mode].children);for(let s=0;s<i.length;s++){const o=i[s];o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition);let l;if(this.camera.isOrthographicCamera?l=(this.camera.top-this.camera.bottom)/this.camera.zoom:l=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(l*this.size/4),o.tag==="helper"){o.visible=!1,o.name==="AXIS"?(o.position.copy(this.worldPositionStart),o.visible=!!this.axis,this.axis==="X"&&(al.setFromEuler(SM.set(0,0,0)),o.quaternion.copy(t).multiply(al),Math.abs(Wo.copy(u$).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Y"&&(al.setFromEuler(SM.set(0,0,Math.PI/2)),o.quaternion.copy(t).multiply(al),Math.abs(Wo.copy(ky).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Z"&&(al.setFromEuler(SM.set(0,Math.PI/2,0)),o.quaternion.copy(t).multiply(al),Math.abs(Wo.copy(c$).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="XYZE"&&(al.setFromEuler(SM.set(0,Math.PI/2,0)),Wo.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(bG.lookAt(yG,Wo,ky)),o.quaternion.multiply(al),o.visible=this.dragging),this.axis==="E"&&(o.visible=!1)):o.name==="START"?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):o.name==="END"?(o.position.copy(this.worldPosition),o.visible=this.dragging):o.name==="DELTA"?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),Dp.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Dp.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(Dp),o.visible=this.dragging):(o.quaternion.copy(t),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=this.axis.search(o.name)!==-1));continue}o.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(o.name==="X"&&Math.abs(Wo.copy(u$).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Y"&&Math.abs(Wo.copy(ky).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Z"&&Math.abs(Wo.copy(c$).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XY"&&Math.abs(Wo.copy(c$).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="YZ"&&Math.abs(Wo.copy(u$).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XZ"&&Math.abs(Wo.copy(ky).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):this.mode==="rotate"&&(EM.copy(t),Wo.copy(this.eye).applyQuaternion(al.copy(t).invert()),o.name.search("E")!==-1&&o.quaternion.setFromRotationMatrix(bG.lookAt(this.eye,yG,ky)),o.name==="X"&&(al.setFromAxisAngle(u$,Math.atan2(-Wo.y,Wo.z)),al.multiplyQuaternions(EM,al),o.quaternion.copy(al)),o.name==="Y"&&(al.setFromAxisAngle(ky,Math.atan2(Wo.x,Wo.z)),al.multiplyQuaternions(EM,al),o.quaternion.copy(al)),o.name==="Z"&&(al.setFromAxisAngle(c$,Math.atan2(Wo.y,Wo.x)),al.multiplyQuaternions(EM,al),o.quaternion.copy(al))),o.visible=o.visible&&(o.name.indexOf("X")===-1||this.showX),o.visible=o.visible&&(o.name.indexOf("Y")===-1||this.showY),o.visible=o.visible&&(o.name.indexOf("Z")===-1||this.showZ),o.visible=o.visible&&(o.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(u){return o.name===u}))&&(o.material.color.setHex(16776960),o.material.opacity=1)}super.updateMatrixWorld(e)}}class kSe extends Sn{constructor(){super(new gg(1e5,1e5,2,2),new yg({visible:!1,wireframe:!0,side:tp,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),$M.copy(u$).applyQuaternion(t==="local"?this.worldQuaternion:aA),JE.copy(ky).applyQuaternion(t==="local"?this.worldQuaternion:aA),QE.copy(c$).applyQuaternion(t==="local"?this.worldQuaternion:aA),Wo.copy(JE),this.mode){case"translate":case"scale":switch(this.axis){case"X":Wo.copy(this.eye).cross($M),Hg.copy($M).cross(Wo);break;case"Y":Wo.copy(this.eye).cross(JE),Hg.copy(JE).cross(Wo);break;case"Z":Wo.copy(this.eye).cross(QE),Hg.copy(QE).cross(Wo);break;case"XY":Hg.copy(QE);break;case"YZ":Hg.copy($M);break;case"XZ":Wo.copy(QE),Hg.copy(JE);break;case"XYZ":case"E":Hg.set(0,0,0);break}break;case"rotate":default:Hg.set(0,0,0)}Hg.length()===0?this.quaternion.copy(this.cameraQuaternion):(TG.lookAt(Dp.set(0,0,0),Hg,Wo),this.quaternion.setFromRotationMatrix(TG)),super.updateMatrixWorld(e)}}const XO=1,OSe=n=>{let{x:e,y:t,z:i}=n===void 0?{}:n;return e=e===void 0?XO:e,t=t===void 0?XO:t,i=i===void 0?XO:i,new u1e(e,t,i,2,.05)},LSe=.5,DSe=n=>{let{radius:e}=n===void 0?{}:n;return e=e===void 0?LSe:e,new _g(e,32,32)},bX=.5,TX=1,NSe=n=>{let{radius:e,height:t}=n===void 0?{}:n;return e=e===void 0?bX:e,t=t===void 0?TX:t,new pa(e,e,t,32,1,!1)},BSe=.4,PSe=.05,FSe=.2,USe=.6,HR=n=>{let{length:e,radius:t}=n===void 0?{}:n;e=e===void 0?1:e,t=t===void 0?1:t;const i=BSe*e,s=FSe*.5*t,o=new pa(0,s,i,32,1),l=USe*e,u=PSe*.5*t,h=new pa(u,u,l,32,1);var d=new Ar;return d.setPosition(new be(0,l*.5,0)),h.applyMatrix4(d),d.setPosition(new be(0,l+i*.5,0)),o.applyMatrix4(d),qj([o,h])},zSe=n=>{let{radius:e,height:t}=n===void 0?{}:n;e=e===void 0?bX:e,t=t===void 0?TX:t;const i=new pa(e,e,t,32,1,!0),s=new _g(e,32,32,Math.PI,Math.PI),o=new _g(e,32,32,Math.PI,Math.PI);var l=new Ar;l.makeRotationX(Math.PI/2),l.setPosition(0,t/2,0);var u=new Ar;return u.makeRotationX(-Math.PI/2),u.setPosition(0,-t/2,0),s.applyMatrix4(l),o.applyMatrix4(u),qj([i,s,o])},Cx=(n,e,t)=>{if(n.current&&e){const i=typeof e.r=="function"?e.r(t)/255:e.r/255,s=typeof e.g=="function"?e.g(t)/255:e.g/255,o=typeof e.b=="function"?e.b(t)/255:e.b/255,l=typeof e.a=="function"?e.a(t):e.a;n.current.material.color.setRGB(i,s,o),n.current.material.opacity=l,n.current.material.transparent=l!==1}},HSe=n=>{let e=null;if(n.shape)n.shape==="cube"?e=OSe(n.shapeParams):n.shape==="cylinder"?e=NSe(n.shapeParams):n.shape==="sphere"?e=DSe(n.shapeParams):n.shape==="capsule"?e=zSe(n.shapeParams):n.shape==="arrow"&&(e=HR(n.shapeParams));else return[];return[{geometry:e,type:"part"}]};function xS(...n){const e=he.useRef();return he.useEffect(()=>{n.forEach(t=>{!t||(typeof t=="function"?t(e.current):t.current=e.current)})},[n]),e}function Ad(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[i,s]of n)if(!Object.is(s,e.get(i)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}const GSe=he.forwardRef(({objectKey:n,displayTfs:e,position:t,rotation:i,scale:s,ghost:o,highlightColor:l,children:u},h)=>{const d=he.useRef(null),m=xS(h,d),_=As(he.useCallback(x=>x.tfs[n],[n]),Ad),v=As(x=>x.clock);Bf(he.useCallback(()=>{const x=v.getElapsed()*1e3;m.current&&(m.current.position.set(t?t.x:typeof _.position.x=="function"?_.position.x(x):_.position.x,t?t.y:typeof _.position.y=="function"?_.position.y(x):_.position.y,t?t.z:typeof _.position.z=="function"?_.position.z(x):_.position.z),m.current.quaternion.set(i?i.x:typeof _.rotation.x=="function"?_.rotation.x(x):_.rotation.x,i?i.y:typeof _.rotation.y=="function"?_.rotation.y(x):_.rotation.y,i?i.z:typeof _.rotation.z=="function"?_.rotation.z(x):_.rotation.z,i?i.w:typeof _.rotation.w=="function"?_.rotation.w(x):_.rotation.w),m.current.scale.set(s?s.x:_.scale?typeof _.scale.x=="function"?_.scale.x(x):_.scale.x:0,s?s.y:_.scale?typeof _.scale.y=="function"?_.scale.y(x):_.scale.y:0,s?s.z:_.scale?typeof _.scale.z=="function"?_.scale.z(x):_.scale.z:0))},[_,t,i,s,m,v]));const S=HR();return _c("group",{ref:m,dispose:null,up:[0,0,1],children:[e&&_c(Kx,{children:[Yt("axesHelper",{size:1}),Yt("mesh",{geometry:S,material:o?oA(l):i0(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},`${n}ArrowX`),Yt("mesh",{geometry:S,material:o?oA(l):i0(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},`${n}ArrowY`),Yt("mesh",{geometry:S,material:o?oA(l):i0(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},`${n}ArrowZ`)]}),u]})});function WSe({displayTfs:n,children:e}){const t=HR();return _c("group",{dispose:null,up:[0,0,1],children:[n&&_c(Kx,{children:[Yt("axesHelper",{size:1}),Yt("mesh",{geometry:t,material:i0(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),Yt("mesh",{geometry:t,material:i0(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),Yt("mesh",{geometry:t,material:i0(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}function VSe({displayTfs:n,children:e}){const t=HR();return _c("group",{dispose:null,up:[0,0,1],children:[n&&_c(Kx,{children:[Yt("axesHelper",{size:1}),Yt("mesh",{geometry:t,material:i0(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),Yt("mesh",{geometry:t,material:i0(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),Yt("mesh",{geometry:t,material:i0(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}/**
 * postprocessing v6.30.1 build Fri Feb 24 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rüschen
 * @license Zlib
 */var jSe="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}";function SG(n,e){let t="texel";if(n!==null){const i=Number.parseInt(yS);if(!(e&&i>=133&&i!==135&&n.format===Pp&&n.type===Xh&&n.encoding===Ei))switch(n.encoding){case Ei:t="sRGBToLinear(texel)";break;case $m:t="texel";break;default:throw new Error(`Unsupported encoding: ${n.encoding}`)}}return t}var Pi={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},ob={NONE:0,DEPTH:1,CONVOLUTION:2},Ms={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},fF={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},XSe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,YSe="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",KSe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],JSe=class extends mh{constructor(n=new Ii){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new os(null),texelSize:new os(new Ii),scale:new os(1),kernel:new os(0)},blending:op,depthWrite:!1,depthTest:!1,fragmentShader:XSe,vertexShader:YSe}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this.kernelSize=fF.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return KSe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},QSe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,SX=class extends mh{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new os(null),opacity:new os(1)},blending:op,depthWrite:!1,depthTest:!1,fragmentShader:QSe,vertexShader:jSe}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},qSe=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,ZSe=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,eEe=class extends mh{constructor(n=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new os(null),cameraNear:new os(.3),cameraFar:new os(1e3)},blending:op,depthWrite:!1,depthTest:!1,fragmentShader:qSe,vertexShader:ZSe}),this.toneMapped=!1,this.depthBuffer=n,this.depthPacking=VT,this.copyCameraSettings(e)}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=VT){this.depthBuffer=n,this.depthPacking=e}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof ko?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},tEe=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,nEe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",rEe=class extends mh{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new os(null),normalBuffer:new os(null),texelSize:new os(new Dt)},blending:op,depthWrite:!1,depthTest:!1,fragmentShader:tEe,vertexShader:nEe}),this.toneMapped=!1}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Dv){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},iEe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,sEe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",oEe=class extends mh{constructor(n,e,t,i,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:yS.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new os(null),depthBuffer:new os(null),resolution:new os(new Dt),texelSize:new os(new Dt),cameraNear:new os(.3),cameraFar:new os(1e3),aspect:new os(1),time:new os(0)},blending:op,depthWrite:!1,depthTest:!1,dithering:s}),this.toneMapped=!1,n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Dv){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){var e,t,i,s,o;return this.fragmentShader=iEe.replace(Ms.FRAGMENT_HEAD,(e=n.get(Ms.FRAGMENT_HEAD))!=null?e:"").replace(Ms.FRAGMENT_MAIN_UV,(t=n.get(Ms.FRAGMENT_MAIN_UV))!=null?t:"").replace(Ms.FRAGMENT_MAIN_IMAGE,(i=n.get(Ms.FRAGMENT_MAIN_IMAGE))!=null?i:""),this.vertexShader=sEe.replace(Ms.VERTEX_HEAD,(s=n.get(Ms.VERTEX_HEAD))!=null?s:"").replace(Ms.VERTEX_MAIN_SUPPORT,(o=n.get(Ms.VERTEX_MAIN_SUPPORT))!=null?o:""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof ko?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return Ms}},aEe="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",lEe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",uEe=class extends mh{constructor(n=new Dt){super({name:"OutlineMaterial",uniforms:{inputBuffer:new os(null),texelSize:new os(new Dt)},blending:op,depthWrite:!1,depthTest:!1,fragmentShader:aEe,vertexShader:lEe}),this.toneMapped=!1,this.uniforms.texelSize.value.set(n.x,n.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},cEe=new TS,J_=null;function hEe(){if(J_===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);J_=new Or,J_.setAttribute!==void 0?(J_.setAttribute("position",new Is(n,3)),J_.setAttribute("uv",new Is(e,2))):(J_.addAttribute("position",new Is(n,3)),J_.addAttribute("uv",new Is(e,2)))}return J_}var Pf=class{constructor(n="Pass",e=new mx,t=cEe){this.name=n,this.renderer=null,this.scene=e,this.camera=t,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(n){if(this.rtt===n){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!n}}set mainScene(n){}set mainCamera(n){}setRenderer(n){this.renderer=n}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(n){let e=this.screen;e!==null?e.material=n:(e=new Sn(hEe(),n),e.frustumCulled=!1,this.scene===null&&(this.scene=new mx),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(n){this.fullscreenMaterial=n}getDepthTexture(){return null}setDepthTexture(n,e=Dv){}render(n,e,t,i,s){throw new Error("Render method not implemented!")}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof cu||e instanceof Wc||e instanceof Fl||e instanceof Pf)&&this[n].dispose()}}},dEe=class extends Pf{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new SX,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new cu(1,1,{minFilter:Xo,magFilter:Xo,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,s){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Xh?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n.outputEncoding===Ei&&(this.renderTarget.texture.encoding=Ei))}},pEe=class extends Pf{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,s){const o=n.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},EG=new vn,mF=class extends Pf{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,s){const o=this.overrideClearColor,l=this.overrideClearAlpha,u=n.getClearAlpha(),h=o!==null,d=l>=0;h?(n.getClearColor(EG),n.setClearColor(o,d?l:u)):d&&n.setClearAlpha(l),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),h?n.setClearColor(EG,u):d&&n.setClearAlpha(u)}},Q_=-1,rp=class extends Df{constructor(n,e=Q_,t=Q_,i=1){super(),this.resizable=n,this.baseSize=new Dt(1,1),this.preferredSize=new Dt(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new Dt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==Q_?t.width=e.width:e.height!==Q_?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==Q_?t.height=e.height:e.width!==Q_?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(Q_),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Q_}},YO=!1,$G=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case tp:t=this.materialsFlatShadedDoubleSide;break;case Gc:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case tp:t=this.materialsDoubleSide;break;case Gc:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[n.clone(),n.clone(),n.clone()];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=s0;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.side=Gc,i}),this.materialsDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.side=tp,i}),this.materialsFlatShaded=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Gc,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=tp,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,YO){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const o of s)o[0].material=o[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=s}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return YO}static set workaroundEnabled(n){YO=n}},GR=class extends Pf{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new mF,this.overrideMaterialManager=t===null?null:new $G(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new $G(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,s){const o=this.scene,l=this.camera,u=this.selection,h=l.layers.mask,d=o.background,m=n.shadowMap.autoUpdate,_=this.renderToScreen?null:e;u!==null&&l.layers.set(u.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(_),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,o,l):n.render(o,l),l.layers.mask=h,o.background=d,n.shadowMap.autoUpdate=m}},fEe=class extends Pf{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:s=rp.AUTO_SIZE,height:o=rp.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new GR(n,e,new Xx({depthPacking:VT}));const h=this.renderPass;h.skipShadowMapUpdate=!0,h.ignoreBackground=!0;const d=h.getClearPass();d.overrideClearColor=new vn(16777215),d.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new cu(1,1,{minFilter:fa,magFilter:fa}),this.renderTarget.texture.name="DepthPass.Target");const m=this.resolution=new rp(this,l,u,i);m.addEventListener("change",_=>this.setSize(m.baseWidth,m.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},mEe=class extends Pf{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=rp.AUTO_SIZE,height:i=rp.AUTO_SIZE,resolutionX:s=t,resolutionY:o=i}={}){super("DepthDownsamplingPass");const l=new rEe;l.normalBuffer=n,this.fullscreenMaterial=l,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new cu(1,1,{minFilter:fa,magFilter:fa,depthBuffer:!1,type:Qg}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const u=this.resolution=new rp(this,s,o,e);u.addEventListener("change",h=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Dv){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,s){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const i=n.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function xG(n,e,t){for(const i of e){const s="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),o=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const l of t.entries())l[1]!==null&&t.set(l[0],l[1].replace(o,s))}}function gEe(n,e,t){var i,s,o,l,u;let h=e.getFragmentShader(),d=e.getVertexShader();const m=h!==void 0&&/mainImage/.test(h),_=h!==void 0&&/mainUv/.test(h);if(t.attributes|=e.getAttributes(),h===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(_&&t.attributes&ob.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!m&&!_)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const v=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,S=t.shaderParts;let x=(i=S.get(Ms.FRAGMENT_HEAD))!=null?i:"",w=(s=S.get(Ms.FRAGMENT_MAIN_UV))!=null?s:"",A=(o=S.get(Ms.FRAGMENT_MAIN_IMAGE))!=null?o:"",k=(l=S.get(Ms.VERTEX_HEAD))!=null?l:"",O=(u=S.get(Ms.VERTEX_MAIN_SUPPORT))!=null?u:"";const D=new Set,L=new Set;if(_&&(w+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),d!==null&&/mainSupport/.test(d)){const U=/mainSupport *\([\w\s]*?uv\s*?\)/.test(d);O+=`	${n}MainSupport(`,O+=U?`vUv);
`:`);
`;for(const P of d.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const K of P[1].split(/\s*,\s*/))t.varyings.add(K),D.add(K),L.add(K);for(const P of d.matchAll(v))L.add(P[1])}for(const U of h.matchAll(v))L.add(U[1]);for(const U of e.defines.keys())L.add(U.replace(/\([\w\s,]*\)/g,""));for(const U of e.uniforms.keys())L.add(U);L.delete("while"),L.delete("for"),L.delete("if"),e.uniforms.forEach((U,P)=>t.uniforms.set(n+P.charAt(0).toUpperCase()+P.slice(1),U)),e.defines.forEach((U,P)=>t.defines.set(n+P.charAt(0).toUpperCase()+P.slice(1),U));const z=new Map([["fragment",h],["vertex",d]]);xG(n,L,t.defines),xG(n,L,z),h=z.get("fragment"),d=z.get("vertex");const H=e.blendMode;if(t.blendModes.set(H.blendFunction,H),m){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(A+=e.inputColorSpace===Ei?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==null?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const U=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;A+=`${n}MainImage(color0, UV, `,t.attributes&ob.DEPTH&&U.test(h)&&(A+="depth, ",t.readDepth=!0),A+=`color1);
	`;const P=n+"BlendOpacity";t.uniforms.set(P,H.opacity),A+=`color0 = blend${H.blendFunction}(color0, color1, ${P});

	`,x+=`uniform float ${P};

`}if(x+=h+`
`,d!==null&&(k+=d+`
`),S.set(Ms.FRAGMENT_HEAD,x),S.set(Ms.FRAGMENT_MAIN_UV,w),S.set(Ms.FRAGMENT_MAIN_IMAGE,A),S.set(Ms.VERTEX_HEAD,k),S.set(Ms.VERTEX_MAIN_SUPPORT,O),e.extensions!==null)for(const U of e.extensions)t.extensions.add(U)}}var _Ee=class extends Pf{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new oEe(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new xEe;let e=0;for(const l of this.effects)if(l.blendMode.blendFunction===Pi.DST)n.attributes|=l.getAttributes()&ob.DEPTH;else{if(n.attributes&l.getAttributes()&ob.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${l.name})`);gEe("e"+e++,l,n)}let t=n.shaderParts.get(Ms.FRAGMENT_HEAD),i=n.shaderParts.get(Ms.FRAGMENT_MAIN_IMAGE),s=n.shaderParts.get(Ms.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const l of n.blendModes.values())t+=l.getShaderCode().replace(o,`blend${l.blendFunction}`)+`
`;n.attributes&ob.DEPTH?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===Ei&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(Ms.FRAGMENT_HEAD,t),n.shaderParts.set(Ms.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(Ms.FRAGMENT_MAIN_UV,s),n.shaderParts.forEach((l,u,h)=>h.set(u,l==null?void 0:l.trim().replace(/^#/,`
#`))),this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Dv){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,s){for(const o of this.effects)o.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const o=this.fullscreenMaterial;o.inputBuffer=e.texture,o.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==Xh&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},vEe=class extends Pf{constructor({kernelSize:n=fF.MEDIUM,resolutionScale:e=.5,width:t=rp.AUTO_SIZE,height:i=rp.AUTO_SIZE,resolutionX:s=t,resolutionY:o=i}={}){super("KawaseBlurPass"),this.renderTargetA=new cu(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const l=this.resolution=new rp(this,s,o,e);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight)),this._blurMaterial=new JSe,this._blurMaterial.kernelSize=n,this.copyMaterial=new SX}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const o=this.scene,l=this.camera,u=this.renderTargetA,h=this.renderTargetB,d=this.blurMaterial,m=d.kernelSequence;let _=e;this.fullscreenMaterial=d;for(let v=0,S=m.length;v<S;++v){const x=v&1?h:u;d.kernel=m[v],d.inputBuffer=_.texture,n.setRenderTarget(x),n.render(o,l),_=x}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=_.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(o,l)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,s=t.height;this.renderTargetA.setSize(i,s),this.renderTargetB.setSize(i,s),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Xh?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n.outputEncoding===Ei&&(this.renderTargetA.texture.encoding=Ei,this.renderTargetB.texture.encoding=Ei))}static get AUTO_SIZE(){return rp.AUTO_SIZE}},yEe=class extends Pf{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new mF(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,s){const o=n.getContext(),l=n.state.buffers,u=this.scene,h=this.camera,d=this.clearPass,m=this.inverted?0:1,_=1-m;l.color.setMask(!1),l.depth.setMask(!1),l.color.setLocked(!0),l.depth.setLocked(!0),l.stencil.setTest(!0),l.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),l.stencil.setFunc(o.ALWAYS,m,4294967295),l.stencil.setClear(_),l.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?d.render(n,null):(d.render(n,e),d.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(u,h)):(n.setRenderTarget(e),n.render(u,h),n.setRenderTarget(t),n.render(u,h)),l.color.setLocked(!1),l.depth.setLocked(!1),l.stencil.setLocked(!1),l.stencil.setFunc(o.EQUAL,1,4294967295),l.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),l.stencil.setLocked(!0)}},bEe=class extends Pf{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:s=rp.AUTO_SIZE,height:o=rp.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new GR(n,e,new FP);const h=this.renderPass;h.ignoreBackground=!0,h.skipShadowMapUpdate=!0;const d=h.getClearPass();d.overrideClearColor=new vn(7829503),d.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new cu(1,1,{minFilter:fa,magFilter:fa}),this.renderTarget.texture.name="NormalPass.Target");const m=this.resolution=new rp(this,l,u,i);m.addEventListener("change",_=>this.setSize(m.baseWidth,m.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,o,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},TEe=class extends Pf{constructor(n,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=n,this.input=e}setInput(n){this.input=n}render(n,e,t,i,s){const o=this.fullscreenMaterial.uniforms;e!==null&&o!==void 0&&o[this.input]!==void 0&&(o[this.input].value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){t!==void 0&&t!==Xh&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},KO=1/1e3,SEe=1e3,EEe=class{constructor(){this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*KO}get fixedDelta(){return this._fixedDelta*KO}set fixedDelta(n){this._fixedDelta=n*SEe}get elapsed(){return this._elapsed*KO}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=n!==void 0?n:performance.now(),this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()}handleEvent(n){document.hidden||(this.currentTime=performance.now())}dispose(){this.autoReset=!1}},$Ee=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new dEe,this.depthTexture=null,this.passes=[],this.timer=new EEe,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new Dt),t=n.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Xh&&n.outputEncoding===Ei&&(this.inputBuffer.texture.encoding=Ei,this.outputBuffer.texture.encoding=Ei,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const s of this.passes)s.initialize(n,t,i)}}replaceRenderer(n,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(n),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new MP;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=wv,n.type=vv):n.type=J0,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,i){const s=this.renderer,o=s===null?new Dt:s.getDrawingBufferSize(new Dt),l={minFilter:Xo,magFilter:Xo,stencilBuffer:e,depthBuffer:n,type:t},u=new cu(o.width,o.height,l);return i>0&&(u.ignoreDepthForMultisampleCopy=!1,u.samples=i),t===Xh&&s!==null&&s.outputEncoding===Ei&&(u.texture.encoding=Ei),u.texture.name="EffectComposer.Buffer",u.texture.generateMipmaps=!1,u}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new Dt),o=i.getContext().getContextAttributes().alpha,l=this.inputBuffer.texture.type;if(n.setRenderer(i),n.setSize(s.width,s.height),n.initialize(i,o,l),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const u=this.createDepthTexture();for(n of t)n.setDepthTexture(u)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const i=(s,o)=>s||o.needsDepthTexture;e.reduce(i,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,o=!1,l,u,h;n===void 0&&(this.timer.update(),n=this.timer.delta);for(const d of this.passes)d.enabled&&(d.render(e,i,s,n,o),d.needsSwap&&(o&&(t.renderToScreen=d.renderToScreen,l=e.getContext(),u=e.state.buffers.stencil,u.setFunc(l.NOTEQUAL,1,4294967295),t.render(e,i,s,n,o),u.setFunc(l.EQUAL,1,4294967295)),h=i,i=s,s=h),d instanceof yEe?o=!0:d instanceof pEe&&(o=!1))}setSize(n,e,t){const i=this.renderer,s=i.getSize(new Dt);(n===void 0||e===void 0)&&(n=s.width,e=s.height),(s.width!==n||s.height!==e)&&i.setSize(n,e,t);const o=i.getDrawingBufferSize(new Dt);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const l of this.passes)l.setSize(o.width,o.height)}reset(){const n=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=n}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},xEe=class{constructor(){this.shaderParts=new Map([[Ms.FRAGMENT_HEAD,null],[Ms.FRAGMENT_MAIN_UV,null],[Ms.FRAGMENT_MAIN_IMAGE,null],[Ms.VERTEX_HEAD,null],[Ms.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=ob.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=$m}},wEe=class extends Set{constructor(n,e=10){super(),this.l=e,this.exclusive=!1,n!==void 0&&this.set(n)}get layer(){return this.l}set layer(n){const e=this.l;for(const t of this)t.layers.disable(e),t.layers.enable(n);this.l=n}getLayer(){return this.layer}setLayer(n){this.layer=n}isExclusive(){return this.exclusive}setExclusive(n){this.exclusive=n}clear(){const n=this.layer;for(const e of this)e.layers.disable(n);return super.clear()}set(n){this.clear();for(const e of n)this.add(e);return this}indexOf(n){return this.has(n)?0:-1}add(n){return this.exclusive?n.layers.set(this.layer):n.layers.enable(this.layer),super.add(n)}delete(n){return this.has(n)&&n.layers.disable(this.layer),super.delete(n)}toggle(n){let e;return this.has(n)?(this.delete(n),e=!1):(this.add(n),e=!0),e}setVisible(n){for(const e of this)n?e.layers.enable(0):e.layers.disable(0);return this}},CEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",MEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",AEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",IEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",REe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",kEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",OEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",LEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",DEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",NEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",BEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",PEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",FEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",UEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",zEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",HEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",GEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",WEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",VEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",jEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",XEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",YEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",KEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",JEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",QEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",qEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",ZEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",e$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",t$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",n$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",r$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",i$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",s$e=new Map([[Pi.ADD,CEe],[Pi.ALPHA,MEe],[Pi.AVERAGE,AEe],[Pi.COLOR,IEe],[Pi.COLOR_BURN,REe],[Pi.COLOR_DODGE,kEe],[Pi.DARKEN,OEe],[Pi.DIFFERENCE,LEe],[Pi.DIVIDE,DEe],[Pi.DST,null],[Pi.EXCLUSION,NEe],[Pi.HARD_LIGHT,BEe],[Pi.HARD_MIX,PEe],[Pi.HUE,FEe],[Pi.INVERT,UEe],[Pi.INVERT_RGB,zEe],[Pi.LIGHTEN,HEe],[Pi.LINEAR_BURN,GEe],[Pi.LINEAR_DODGE,WEe],[Pi.LINEAR_LIGHT,VEe],[Pi.LUMINOSITY,jEe],[Pi.MULTIPLY,XEe],[Pi.NEGATION,YEe],[Pi.NORMAL,KEe],[Pi.OVERLAY,JEe],[Pi.PIN_LIGHT,QEe],[Pi.REFLECT,qEe],[Pi.SATURATION,ZEe],[Pi.SCREEN,e$e],[Pi.SOFT_LIGHT,t$e],[Pi.SRC,n$e],[Pi.SUBTRACT,r$e],[Pi.VIVID_LIGHT,i$e]]),o$e=class extends Df{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new os(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return s$e.get(this.blendFunction)}},a$e=class extends Df{constructor(n,e,{attributes:t=ob.NONE,blendFunction:i=Pi.NORMAL,defines:s=new Map,uniforms:o=new Map,extensions:l=null,vertexShader:u=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=u,this.defines=s,this.uniforms=o,this.extensions=l,this.blendMode=new o$e(i),this.blendMode.addEventListener("change",h=>this.setChanged()),this._inputColorSpace=$m,this._outputColorSpace=null}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Dv){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof cu||e instanceof Wc||e instanceof Fl||e instanceof Pf)&&this[n].dispose()}}};new be;new Ar;new vn;var l$e=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texelToLinear(texture2D(patternTexture,vUvPattern));
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,u$e="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",c$e=class extends a$e{constructor(n,e,{blendFunction:t=Pi.SCREEN,patternTexture:i=null,patternScale:s=1,edgeStrength:o=1,pulseSpeed:l=0,visibleEdgeColor:u=16777215,hiddenEdgeColor:h=2230538,kernelSize:d=fF.VERY_SMALL,blur:m=!1,xRay:_=!0,multisampling:v=0,resolutionScale:S=.5,width:x=rp.AUTO_SIZE,height:w=rp.AUTO_SIZE,resolutionX:A=x,resolutionY:k=w}={}){super("OutlineEffect",l$e,{uniforms:new Map([["maskTexture",new os(null)],["edgeTexture",new os(null)],["edgeStrength",new os(o)],["visibleEdgeColor",new os(new vn(u))],["hiddenEdgeColor",new os(new vn(h))],["pulse",new os(1)],["patternScale",new os(s)],["patternTexture",new os(null)]])}),this.blendMode.addEventListener("change",z=>{this.blendMode.getBlendFunction()===Pi.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.setBlendFunction(t),this.patternTexture=i,this.xRay=_,this.scene=n,this.camera=e,this.renderTargetMask=new cu(1,1),this.renderTargetMask.samples=v,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new cu(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new mF,this.clearPass.overrideClearColor=new vn(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new fEe(n,e),this.maskPass=new GR(n,e,new eEe(this.depthPass.texture,e));const O=this.maskPass.clearPass;O.overrideClearColor=new vn(16777215),O.overrideClearAlpha=1,this.blurPass=new vEe({resolutionScale:S,resolutionX:A,resolutionY:k,kernelSize:d}),this.blurPass.enabled=m;const D=this.blurPass.resolution;D.addEventListener("change",z=>this.setSize(D.baseWidth,D.baseHeight)),this.outlinePass=new TEe(new uEe);const L=this.outlinePass.fullscreenMaterial;L.inputBuffer=this.renderTargetMask.texture,this.time=0,this.active=!1,this.selection=new wEe,this.selection.layer=10,this.pulseSpeed=l}set mainScene(n){this.scene=n,this.depthPass.mainScene=n,this.maskPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.maskPass.mainCamera=n,this.maskPass.overrideMaterial.copyCameraSettings(n)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(n){this.renderTargetMask.samples=n,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(n){this.uniforms.get("patternScale").value=n}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(n){this.uniforms.get("edgeStrength").value=n}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(n){this.uniforms.get("visibleEdgeColor").value=n}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(n){this.uniforms.get("hiddenEdgeColor").value=n}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(n){this.pulseSpeed=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get selectionLayer(){return this.selection.layer}set selectionLayer(n){this.selection.layer=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get xRay(){return this.defines.has("X_RAY")}set xRay(n){this.xRay!==n&&(n?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(n){this.xRay=n}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(n){if(n!==null?(n.wrapS=n.wrapT=WT,this.defines.set("USE_PATTERN","1"),this.setVertexShader(u$e)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.renderer!==null){const e=SG(n,this.renderer.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",e)}this.uniforms.get("patternTexture").value=n,this.setChanged()}setPatternTexture(n){this.patternTexture=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}setSelection(n){return this.selection.set(n),this}clearSelection(){return this.selection.clear(),this}selectObject(n){return this.selection.add(n),this}deselectObject(n){return this.selection.delete(n),this}update(n,e,t){const i=this.scene,s=this.camera,o=this.selection,l=this.uniforms.get("pulse"),u=i.background,h=s.layers.mask;o.size>0?(i.background=null,l.value=1,this.pulseSpeed>0&&(l.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.active=!0,this.time+=t,o.setVisible(!1),this.depthPass.render(n),o.setVisible(!0),s.layers.set(o.layer),this.maskPass.render(n,this.renderTargetMask),s.layers.mask=h,i.background=u,this.outlinePass.render(n,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(n,this.renderTargetOutline,this.renderTargetOutline)):this.active&&(this.clearPass.render(n,this.renderTargetOutline),this.active=!1)}setSize(n,e){this.blurPass.setSize(n,e),this.renderTargetMask.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e);const i=t.width,s=t.height;this.depthPass.setSize(i,s),this.renderTargetOutline.setSize(i,s),this.outlinePass.fullscreenMaterial.setSize(i,s)}initialize(n,e,t){const i=this.patternTexture,s=SG(i,n.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",s),this.blurPass.initialize(n,e,Xh),t!==void 0&&(this.depthPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.outlinePass.initialize(n,e,t))}};new be;new be;let qE;function h$e(){if(qE!==void 0)return qE;try{var n;let e;const t=document.createElement("canvas");return qE=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))===null||n===void 0||n.loseContext()),qE}catch{return qE=!1}}const d$e=n=>!!n.current,wG=n=>d$e(n)?n.current:n,EX=he.createContext(null),p$e=Sr.memo(he.forwardRef((n,e)=>{let{children:t,camera:i,scene:s,resolutionScale:o,enabled:l=!0,renderPriority:u=1,autoClear:h=!0,depthBuffer:d,disableNormalPass:m,stencilBuffer:_,multisampling:v=8,frameBufferType:S=mb}=n;const{gl:x,scene:w,camera:A,size:k}=Gh();s=s||w,i=i||A;const[O,D,L]=he.useMemo(()=>{const U=h$e(),P=new $Ee(x,{depthBuffer:d,stencilBuffer:_,multisampling:v>0&&U?v:0,frameBufferType:S});P.addPass(new GR(s,i));let K=null,ee=null;return m||(ee=new bEe(s,i),ee.enabled=!1,P.addPass(ee),o!==void 0&&U&&(K=new mEe({normalBuffer:ee.texture,resolutionScale:o}),K.enabled=!1,P.addPass(K))),[P,ee,K]},[i,x,d,_,v,S,s,m,o]);he.useEffect(()=>O==null?void 0:O.setSize(k.width,k.height),[O,k]),Bf((U,P)=>{l&&(x.autoClear=h,O.render(P))},l?u:0);const z=he.useRef(null);he.useLayoutEffect(()=>{let U;return z.current&&z.current.__r3f&&O&&(U=new _Ee(i,...z.current.__r3f.objects),U.renderToScreen=!0,O.addPass(U),D&&(D.enabled=!0),L&&(L.enabled=!0)),()=>{U&&(O==null||O.removePass(U)),D&&(D.enabled=!1),L&&(L.enabled=!1)}},[O,t,i,D,L]);const H=he.useMemo(()=>({composer:O,normalPass:D,downSamplingPass:L,resolutionScale:o,camera:i,scene:s}),[O,D,L,o,i,s]);return he.useImperativeHandle(e,()=>O,[O]),Yt(EX.Provider,{value:H,children:Yt("group",{ref:z,children:t})})})),gF=he.createContext(null);function f$e(n){let{children:e,enabled:t=!0}=n;const[i,s]=he.useState([]),o=he.useMemo(()=>({selected:i,select:s,enabled:t}),[i,s,t]);return Sr.createElement(gF.Provider,{value:o},e)}function $X(n){let{enabled:e=!1,children:t,...i}=n;const s=he.useRef(null),o=he.useContext(gF);return he.useEffect(()=>{if(o&&e){let l=!1;const u=[];if(s.current.traverse(h=>{h.type==="Mesh"&&u.push(h),o.selected.indexOf(h)===-1&&(l=!0)}),l)return o.select(h=>[...h,...u]),()=>{o.select(h=>h.filter(d=>!u.includes(d)))}}},[e,t]),Yt("group",{ref:s,...i,children:t})}const m$e=he.forwardRef(function(n,e){let{selection:t=[],selectionLayer:i=10,blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:h,hiddenEdgeColor:d,width:m,height:_,kernelSize:v,blur:S,xRay:x,...w}=n;const A=Gh(z=>z.invalidate),{scene:k,camera:O}=he.useContext(EX),D=he.useMemo(()=>new c$e(k,O,{blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:h,hiddenEdgeColor:d,width:m,height:_,kernelSize:v,blur:S,xRay:x,...w}),[s,S,O,l,_,d,v,o,u,k,h,m,x]),L=he.useContext(gF);return he.useEffect(()=>{if(!L&&t)return D.selection.set(Array.isArray(t)?t.map(wG):[wG(t)]),A(),()=>{D.selection.clear(),A()}},[D,t,L]),he.useEffect(()=>{D.selectionLayer=i,A()},[D,i]),he.useRef(),he.useEffect(()=>{if(L&&L.enabled){var z;if((z=L.selected)!=null&&z.length)return D.selection.set(L.selected),A(),()=>{D.selection.clear(),A()}}},[L]),Yt("primitive",{ref:e,object:D})}),g$e=["cube","cylinder","sphere","capsule","arrow"],xX=he.createContext(),_$e=n=>{const e=he.useContext(xX)[n.shape];return g$e.includes(n.shape)?HSe(n):e&&typeof e=="function"?e():(console.warn(`Shape not loaded: ${n.shape} (reading property 'shape' of item)`,n),[])},v$e=({meshes:n,children:e})=>Yt(xX.Provider,{value:n,children:e}),y$e=he.memo(he.forwardRef(({objectKey:n,highlightColor:e,position:t,rotation:i,scale:s,ghost:o},l)=>{const u=he.useRef(null),h=xS(l,u),d=As(w=>w.onClick,Ad),m=As(w=>w.onPointerOver,Ad),_=As(w=>w.onPointerOut,Ad),v=As(w=>w.clock),S=As(he.useCallback(w=>w.items[n],[n]),Ad),x=_$e(S);return Bf(he.useCallback(()=>{const w=v.getElapsed()*1e3;h.current&&(h.current.position.set(t?t.x:typeof S.position.x=="function"?S.position.x(w):S.position.x,t?t.y:typeof S.position.y=="function"?S.position.y(w):S.position.y,t?t.z:typeof S.position.z=="function"?S.position.z(w):S.position.z),h.current.quaternion.set(i?i.x:typeof S.rotation.x=="function"?S.rotation.x(w):S.rotation.x,i?i.y:typeof S.rotation.y=="function"?S.rotation.y(w):S.rotation.y,i?i.z:typeof S.rotation.z=="function"?S.rotation.z(w):S.rotation.z,i?i.w:typeof S.rotation.w=="function"?S.rotation.w(w):S.rotation.w),h.current.scale.set(s?s.x:typeof S.scale.x=="function"?S.scale.x(w):S.scale.x,s?s.y:typeof S.scale.y=="function"?S.scale.y(w):S.scale.y,s?s.z:typeof S.scale.z=="function"?S.scale.z(w):S.scale.z),h.current.visible=typeof S.hidden=="function"?!S.hidden(w):!S.hidden)},[S,t,i,s,h,v])),Yt($X,{enabled:S.highlighted,children:_c("group",{ref:h,up:[0,0,1],children:[Yt("group",{up:[0,0,1],rotation:[Math.PI/2,0,0],onPointerDown:w=>{d(n,!h.current.visible,{local:{position:h.current.position,rotation:h.current.quaternion},world:{position:h.current.getWorldPosition(new be),rotation:h.current.getWorldQuaternion(new jo)}},w)},onPointerOver:w=>{m(n,!h.current.visible,w)},onPointerOut:w=>{_(n,!h.current.visible,w)},children:x.map((w,A)=>Yt(wX,{idx:A,groupOrPart:w,objectKey:n,ghost:o,highlightColor:e},A))}),S.showName&&Yt(Qj,{distanceFactor:3,position:[0,0,.2],children:Yt("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey",padding:5,userSelect:"none"},children:S.name})})]})})})),b$e=he.memo(({part:n,objectKey:e,ghost:t,highlightColor:i})=>{const s=As(he.useCallback(m=>m.items[e].wireframe,[e])),o=As(he.useCallback(m=>m.items[e].color,[e])),l=o!==void 0,u=he.useRef(),h=he.useRef(),d=As(m=>m.clock);return Bf(he.useCallback(()=>{const m=d.getElapsed()*1e3;t||(Cx(h,o,m),Cx(u,o,m))},[t,u,h,d,o])),t?Yt("mesh",{ref:h,geometry:n.geometry,material:oA(i),scale:n.scale,castShadow:!1,receiveShadow:!1},"B"):l?_c("group",{up:[0,0,1],children:[Yt("mesh",{ref:h,geometry:n.geometry,scale:n.scale,castShadow:!1,receiveShadow:!1,children:Yt("meshLambertMaterial",{transparent:!0,wireframe:s,attach:"material",opacity:1,side:Gc})},"B"),Yt("mesh",{ref:u,geometry:n.geometry,scale:n.scale,castShadow:!1,receiveShadow:!1,children:Yt("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:s,opacity:1,side:s0})},"F")]}):Yt(Kx,{children:Yt("mesh",{ref:u,geometry:n.geometry,material:n.material,scale:n.scale,castShadow:!0,receiveShadow:!0,wireframe:s},"I")})}),wX=he.memo(({idx:n,groupOrPart:e,ghost:t,objectKey:i,highlightColor:s})=>e.type==="group"?Yt("group",{up:[0,0,1],position:e.position,rotation:e.rotation,scale:e.scale,children:e.children.map((o,l)=>Yt(wX,{idx:l,groupOrPart:o,objectKey:i,ghost:t,highlightColor:s},l))},n):Yt(b$e,{part:e,objectKey:i,highlightColor:s,ghost:t},n)),T$e=he.forwardRef(({objectKey:n},e)=>{const t=he.useRef(null),i=xS(e,t),{vertices:s,width:o,hidden:l}=As(he.useCallback(u=>({vertices:u.lines[n].vertices,width:u.lines[n].width,hidden:u.lines[n].hidden}),[n]),Ad);return s.length<=1?null:Yt(f1e,{ref:i,visible:!l,points:s.map(u=>[u.position.x,u.position.y,u.position.z]),color:"white",vertexColors:s.map(u=>[u.color.r/255,u.color.g/255,u.color.b/255]),lineWidth:o})}),S$e=he.forwardRef(({objectKey:n},e)=>{const t=he.useRef(null),i=xS(e,t),s=As(x=>x.onClick,Ad),o=As(x=>x.onPointerOver,Ad),l=As(x=>x.onPointerOut,Ad),u=As(he.useCallback(x=>x.hulls[n],[n]),Ad),h=As(he.useCallback(x=>x.hulls[n].vertices,[n]),Ad),d=As(x=>x.clock),m=he.useRef(),_=he.useRef(),v=typeof h=="function"?h(0):h,S=new M5(v.map(x=>new be(x.x,x.y,x.z)));return Bf(he.useCallback(()=>{const x=d.getElapsed()*1e3;Cx(_,u.color,x),Cx(m,u.color,x);const w=typeof h=="function"?h(x):h;if(w!==v){const k=new M5(w.map(O=>new be(O.x,O.y,O.z)));m.current.geometry=k,_.current.geometry=k}const A=typeof u.hidden=="function"?!u.hidden(x):!u.hidden;m.current.visible=A,_.current.visible=A},[m,_,v,u,d,h])),Yt($X,{enabled:u.highlighted,children:_c("group",{ref:i,up:[0,0,1],children:[_c("group",{up:[0,0,1],onPointerDown:x=>{s(n,m.current.visible,x)},onPointerOver:x=>{o(n,m.current.visible,x)},onPointerOut:x=>{l(n,m.current.visible,x)},children:[Yt("mesh",{ref:_,geometry:S,castShadow:!1,receiveShadow:!1,children:Yt("meshLambertMaterial",{transparent:!0,wireframe:u.wireframe,attach:"material",side:Gc})},`${n}B`),Yt("mesh",{ref:m,geometry:S,castShadow:!1,receiveShadow:!1,children:Yt("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:u.wireframe,side:s0})},`${n}F`)]}),u.showName&&Yt(Qj,{distanceFactor:2,position:[0,0,.5],children:Yt("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey"},className:"disable-text-selection",children:u.name})})]})})}),E$e=he.forwardRef(({objectKey:n},e)=>{const t=he.useRef(null),i=xS(e,t),s=he.useRef(),o=As(u=>u.clock),l=As(he.useCallback(u=>u.texts[n],[n]));return Bf(he.useCallback(()=>{const u=o.getElapsed()*1e3;i.current&&(i.current.position.set(typeof l.position.x=="function"?l.position.x(u):l.position.x,typeof l.position.y=="function"?l.position.y(u):l.position.y,typeof l.position.z=="function"?l.position.z(u):l.position.z),i.current.visible=typeof l.hidden=="function"?!l.hidden(u):!l.hidden),s.current&&Cx(s,l.color,u)},[l,i,o])),Yt("group",{ref:i,children:Yt(p1e,{follow:!0,children:Yt(lTe,{ref:s,depthOffset:2,scale:[.2,.2,.2],children:l.value})})})}),$$e=he.forwardRef(({objectKey:n},e)=>{const t=he.useRef(null),i=xS(e,t),s=As(m=>m.clock),{points:o,scale:l,hidden:u}=As(he.useCallback(m=>({points:m.points[n].points,scale:m.points[n].scale,hidden:m.points[n].hidden}),[n]),Ad),[{positions:h,colors:d}]=he.useState(()=>({positions:new Float32Array(o.length*3),colors:new Float32Array(o.length*3)}));return Bf(()=>{const m=s.getElapsed()*1e3;if(i.current)for(let _=0;_<o.length;_++){let v=_*3;h[v]=typeof o[_].position.x=="function"?o[_].position.x(m):o[_].position.x,h[v+1]=typeof o[_].position.y=="function"?o[_].position.y(m):o[_].position.y,h[v+2]=typeof o[_].position.z=="function"?o[_].position.z(m):o[_].position.z,d[v]=typeof o[_].color.r=="function"?o[_].color.r(m)/255:o[_].color.r/255,d[v+1]=typeof o[_].color.g=="function"?o[_].color.g(m)/255:o[_].color.g/255,d[v+2]=typeof o[_].color.b=="function"?o[_].color.b(m)/255:o[_].color.b/255}}),o.length<=1?null:Yt(VTe,{ref:i,hidden:u,positions:h,colors:d,children:Yt(FTe,{transparent:!0,vertexColors:!0,sizeAttenuation:!0,depthWrite:!0,size:l*.1})})}),_F=he.memo(({activeTf:n,displayTfs:e,allTfs:t,allItems:i,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:h,ghosts:d,targetRef:m,targetId:_,targetSource:v,filterActive:S,tfFilter:x,customProps:w})=>{const A=n==="world"?WSe:n==="gizmo"?VSe:GSe,k=n===_?w:{},O=S?t.filter(L=>x.includes(L.key)):t,D=S&&n!==m;return _c(A,{objectKey:n,displayTfs:e,ref:_===n?m:null,...k,ghost:d,highlightColor:h,children:[O.filter(L=>L.frame===n||n==="world"&&!L.frame).map(L=>Yt(_F,{activeTf:L.key,displayTfs:e,allTfs:t,allItems:i,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:h,ghosts:d,targetRef:m,targetSource:v,targetId:_,filterActive:D,tfFilter:x,customProps:w},L.key)),i.filter(L=>L.frame===n||n==="world"&&!L.frame).map(L=>{const z=L.key===_&&v==="items"?w:{};return!S||L.key===_||n===_?Yt(y$e,{objectKey:L.key,highlightColor:h,ghost:d,ref:L.key===_?m:null,...z},L.key):null}),s.filter(L=>L.frame===n||n==="world"&&!L.frame).map(L=>{const z=L.key===_&&v==="lines"?w:{};return!S||L.key===_||n===_?Yt(T$e,{objectKey:L.key,ref:L.lineKey===_?m:null,...z},L.key):null}),o.filter(L=>L.frame===n||n==="world"&&!L.frame).map(L=>{const z=L.key===_&&v==="hulls"?w:{};return!S||L.key===_||n===_?Yt(S$e,{objectKey:L.key,highlightColor:h,ghost:d,ref:L.key===_?m:null,...z},L.key):null}),l.filter(L=>L.frame===n||n==="world"&&!L.frame).map(L=>{const z=L.key===_&&v==="texts"?w:{};return!S||L.key===_||n===_?Yt(E$e,{objectKey:L.key,highlightColor:h,ref:L.key===_?m:null,...z},L.key):null}),u.filter(L=>L.frame===n||n==="world"&&!L.frame).map(L=>{const z=L.key===_&&v==="points"?w:{};return!S||L.key===_||n===_?Yt($$e,{objectKey:L.key,highlightColor:h,ref:L.key===_?m:null,...z},L.key):null})]})}),x$e=["enabled","axis","translationSnap","rotationSnap","scaleSnap","space","size"],w$e=["displayTfs","allTfs","allItems","allLines","allHulls","allTexts","allPoints","highlightColor"],C$e=he.memo(({camera:n,objectInfo:e,highlightColor:t,translateSnap:i,rotateSnap:s,scaleSnap:o,onDragStart:l,onDragEnd:u,mode:h,...d})=>{const m=PO(d,x$e),_=PO(d,w$e),v=As(he.useCallback(ie=>{let de=[];e.source==="tfs"&&de.push(e.key);let oe=ie[e.source][e.key].frame;for(;oe&&oe!=="world"&&oe!=="gizmo";){let ce=ie.tfs[oe];de.push(oe),oe=ce.frame}return de},[e]),Ad),S=he.useRef(),x=he.useRef(),w=As(ie=>PO(ie[e.source][e.key],["position","rotation","scale"]),Ad),A=Gh(({gl:ie})=>ie),k=Gh(({camera:ie})=>ie),O=Gh(({invalidate:ie})=>ie),D=n||k,[L]=he.useState(()=>new xSe(D,A.domElement));L.translationSnap=i,L.rotationSnap=s,L.scaleSnap=o,h!=null&&h.includes("translate")?L.mode="translate":h!=null&&h.includes("rotate")?L.mode="rotate":h!=null&&h.includes("scale")&&(L.mode="scale"),h!=null&&h.includes("-x")?(L.showY=!1,L.showZ=!1):h!=null&&h.includes("-y")?(L.showX=!1,L.showZ=!1):h!=null&&h.includes("-z")&&(L.showX=!1,L.showY=!1);const[z,H]=he.useState(!1),[U,P]=he.useState(w),[K,ee]=he.useState(!1);he.useEffect(()=>{console.log("refreshing transform"),P(w)},[w,K]);const re=As(ie=>ie.onMove,Ad);return he.useEffect(()=>{const ie=de=>{var oe,ce,me;const Ae=(oe=x==null?void 0:x.current)==null?void 0:oe.position,j=(ce=x==null?void 0:x.current)==null?void 0:ce.quaternion,Z=(me=x==null?void 0:x.current)==null?void 0:me.scale;de.value&&!z?(console.log("starting transform"),H(!0),P({position:Ae,rotation:j,scale:Z}),l&&l()):!de.value&&z&&(console.log("stopping transform"),H(!1),u&&u(),re(e.key,e.source,{position:L.worldPosition,quaternion:L.worldQuaternion,scale:L._worldScale},{position:Ae?{x:Ae.x,y:Ae.y,z:Ae.z}:null,quaternion:j?{x:j.x,y:j.y,z:j.z,w:j.w}:null,scale:Z?{x:Z.x,y:Z.y,z:Z.z}:null}),ee(!K))};return L&&L.addEventListener("dragging-changed",ie),()=>{L.removeEventListener("dragging-changed",ie)}},[w,z,e]),he.useEffect(()=>void(L==null?void 0:L.attach(x.current)),[x,L]),he.useEffect(()=>(L&&L.addEventListener("change",O),()=>{var ie;return(ie=L==null?void 0:L.removeEventListener)==null?void 0:ie.call(L,"change",O)}),[L,O]),L?_c(Kx,{children:[Yt("primitive",{ref:S,object:L,...m}),Yt(_F,{..._,activeTf:"world",tfFilter:v,ghosts:!0,targetRef:x,targetSource:e.source,targetId:e.key,filterActive:!0,customProps:{...U}})]}):null}),Sy=(n,e)=>n.length!==e.length?!1:!n.some((t,i)=>!dm.exports.isEqual(e[i],t));function M$e({displayTfs:n=!1,displayGrid:e=!0,isPolar:t=!1,backgroundColor:i="#d0d0d0",planeColor:s="#a8a8a8",highlightColor:o="#00ffff",plane:l=0,translateSnap:u=0,rotateSnap:h=0,scaleSnap:d=0,debug:m=!1}){m&&console.log("content rerender");const _=Gh(re=>re.camera),v=As(re=>re.clock,Ad);Bf(()=>{v.update()});const S=As(re=>dm.exports.sortBy(Object.entries(re.tfs).map(([ie,de])=>({key:ie,frame:de.frame,transformMode:de.transformMode,source:"tfs"})),ie=>ie.key),Sy),x=As(re=>dm.exports.sortBy(Object.entries(re.items).map(([ie,de])=>({key:ie,frame:de.frame,transformMode:de.transformMode,source:"items"})),ie=>ie.key),Sy),w=As(re=>dm.exports.sortBy(Object.entries(re.lines).map(([ie,de])=>({key:ie,frame:de.frame,source:"lines"})),ie=>ie.key),Sy),A=As(re=>dm.exports.sortBy(Object.entries(re.hulls).map(([ie,de])=>({key:ie,frame:de.frame,source:"hulls"})),ie=>ie.key),Sy),k=As(re=>dm.exports.sortBy(Object.entries(re.texts).map(([ie,de])=>({key:ie,frame:de.frame,source:"texts"})),ie=>ie.key),Sy),O=As(re=>dm.exports.sortBy(Object.entries(re.points).map(([ie,de])=>({key:ie,frame:de.frame,source:"points"})),ie=>ie.key),Sy),D=As(re=>dm.exports.sortBy(Object.entries(re.widgets).map(([ie,de])=>({key:ie,frame:de.frame,source:"widgets"})),ie=>ie.key),Sy),L=[...x,...S].filter(re=>["translate","rotate","scale","translate-x","translate-y","translate-z","rotate-x","rotate-y","rotate-z","scale-x","scale-y","scale-z"].includes(re.transformMode)),z=he.useRef(),H=he.useRef(),U=he.useRef(),P=he.useRef(),K=$Se(s),ee=[K.r,K.g,K.b,.5];return _c(Sr.Fragment,{children:[Yt(BTe,{ref:P,makeDefault:!0,camera:_}),Yt("pointLight",{ref:H,intensity:.5,position:[-1,-3,3],color:"#FFFAEE"}),Yt(SSe,{ref:z,intensity:.7,color:"white"}),Yt(ESe,{ref:U,castShadow:!0,position:[5,15,15],intensity:.6,color:"#FFFAEE"}),Yt("spotLight",{penumbra:1,position:[-1,-1,4],intensity:.3,castShadow:!0,color:"#FFFAEE"}),Yt("color",{attach:"background",args:[i]}),Yt("fogExp2",{attach:"fog",args:[i,.01]}),Yt(zTe,{receiveShadow:!0,scale:1e3,position:[0,0,l-.01],material:i0(...ee)}),_c(f$e,{children:[Yt(p$e,{autoClear:!1,children:Yt(m$e,{visibleEdgeColor:o,hiddenEdgeColor:o,blur:!0,kernelSize:1,edgeStrength:50,pulseSpeed:.25,xRay:!0})}),Yt(_F,{activeTf:"world",displayTfs:n,allTfs:S,allItems:x,allLines:w,allHulls:A,allTexts:k,allPoints:O,allWidgets:D,highlightColor:o})]}),Yt("group",{position:[0,0,l],rotation:[Math.PI/2,0,0],up:[0,0,1],children:e&&(t?Yt("polarGridHelper",{args:[10,16,8,64,"white","gray"]}):Yt("gridHelper",{args:[20,20,"white","gray"]}))}),L.map(re=>Yt(C$e,{objectInfo:re,mode:re.transformMode,displayTfs:n,allTfs:S,allItems:x,allLines:w,allHulls:A,allTexts:k,allPoints:O,allWidgets:D,translateSnap:u,rotateSnap:h,scaleSnap:d,highlightColor:o,onDragEnd:()=>{P.current&&(P.current.enabled=!0)},onDragStart:()=>{P.current&&(P.current.enabled=!1)}},`movableObjectTransform-${re.key}`))]})}as.DefaultUp.set(0,0,1);function A$e({backgroundColor:n="#d0d0d0",store:e,fov:t=60,onPointerMissed:i=()=>{},meshLookup:s={},debug:o=!1,...l}){return o&&console.log("Scene rerender"),Yt(jbe,{camera:{up:[0,0,1],fov:t,position:[0,-3,3]},shadows:!0,style:{background:n||"#d0d0d0"},onPointerMissed:i||(()=>{}),children:Yt(TSe,{store:e,debug:o,children:Yt(v$e,{meshes:s,children:Yt(he.Suspense,{children:Yt(M$e,{...l,backgroundColor:n,debug:o})})})})})}var vF={},I$e=fS;Object.defineProperty(vF,"__esModule",{value:!0});var CX=vF.default=void 0,R$e=I$e(_R()),k$e=Ve;CX=vF.default=(0,R$e.default)((0,k$e.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt");var yF={},O$e=fS;Object.defineProperty(yF,"__esModule",{value:!0});var MX=yF.default=void 0,L$e=O$e(_R()),D$e=Ve;MX=yF.default=(0,L$e.default)((0,D$e.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");var bF={},N$e=fS;Object.defineProperty(bF,"__esModule",{value:!0});var AX=bF.default=void 0,B$e=N$e(_R()),P$e=Ve;AX=bF.default=(0,B$e.default)((0,P$e.jsx)("path",{d:"M6 6h12v12H6z"}),"Stop");const F$e="/gpu-programming/assets/compile-worker-DvE19UY0.js",U$e={s_Acceptance:"s_Acceptance.wav",s_Amazement:"s_Amazement.wav",s_Amazement2:"s_Amazement2.wav",s_Anger:"s_Anger.wav",s_Anger2:"s_Anger2.wav",s_Anger3:"s_Anger3.wav",s_Anger4:"s_Anger4.wav",s_Annoyance:"s_Annoyance.wav",s_Annoyance2:"s_Annoyance2.wav",s_Annoyance3:"s_Annoyance3.wav",s_Annoyance4:"s_Annoyance4.wav",s_Awe:"s_Awe.wav",s_Awe2:"s_Awe2.wav",s_Awe3:"s_Awe3.wav",s_Boredom:"s_Boredom.wav",s_Disapproval:"s_Disapproval.wav",s_Disgust:"s_Disgust.wav",s_Disgust2:"s_Disgust2.wav",s_Disgust3:"s_Disgust3.wav",s_DisorientedConfused:"s_DisorientedConfused.wav",s_DisorientedConfused2:"s_DisorientedConfused2.wav",s_DisorientedConfused3:"s_DisorientedConfused3.wav",s_DisorientedConfused4:"s_DisorientedConfused4.wav",s_DisorientedConfused5:"s_DisorientedConfused5.wav",s_DisorientedConfused6:"s_DisorientedConfused6.wav",s_Distraction:"s_Distraction.wav",s_Ecstacy:"s_Ecstacy.wav",s_Ecstacy2:"s_Ecstacy2.wav",s_Fear:"s_Fear.wav",s_Grief:"s_Grief.wav",s_Grief2:"s_Grief2.wav",s_Grief3:"s_Grief3.wav",s_Grief4:"s_Grief4.wav",s_Joy:"s_Joy.wav",s_Joy2:"s_Joy2.wav",s_Joy3:"s_Joy3.wav",s_Joy4:"s_Joy4.wav",s_Loathing:"s_Loathing.wav",s_Love:"s_Love.wav",s_PhraseByeBye:"s_PhraseByeBye.wav",s_PhraseEvilAhHa:"s_PhraseEvilAhHa.wav",s_PhraseHello:"s_PhraseHello.wav",s_PhraseNoNoNo:"s_PhraseNoNoNo.wav",s_PhraseOopsy:"s_PhraseOopsy.wav",s_PhraseOwOwOw:"s_PhraseOwOwOw.wav",s_PhraseOwwww:"s_PhraseOwwww.wav",s_PhraseUhOh:"s_PhraseUhOh.wav",s_Rage:"s_Rage.wav",s_Sadness:"s_Sadness.wav",s_Sadness2:"s_Sadness2.wav",s_Sadness3:"s_Sadness3.wav",s_Sadness4:"s_Sadness4.wav",s_Sadness5:"s_Sadness5.wav",s_Sadness6:"s_Sadness6.wav",s_Sadness7:"s_Sadness7.wav",s_Sleepy:"s_Sleepy.wav",s_Sleepy2:"s_Sleepy2.wav",s_Sleepy3:"s_Sleepy3.wav",s_Sleepy4:"s_Sleepy4.wav",s_SleepySnore:"s_SleepySnore.wav",s_SystemCameraShutter:"s_SystemCameraShutter.wav"},CG=n=>U$e[n],z$e={e_Sleeping:"e_Sleeping.jpg",e_SleepingZZZ:"e_SleepingZZZ.jpg",e_Contempt:"e_Contempt.jpg",e_ContentLeft:"e_ContentLeft.jpg",e_ContentRight:"e_ContentRight.jpg",e_Disoriented:"e_Disoriented.jpg",e_EcstacyHilarious:"e_EcstacyHilarious.jpg",e_EcstacyStarryEyed:"e_EcstacyStarryEyed.jpg",e_JoyGoofy:"e_JoyGoofy.jpg",e_JoyGoofy2:"e_JoyGoofy2.jpg",e_JoyGoofy3:"e_JoyGoofy3.jpg",e_Love:"e_Love.jpg",e_Rage:"e_Rage.jpg",e_Rage2:"e_Rage2.jpg",e_Rage3:"e_Rage3.jpg",e_Rage4:"e_Rage4.jpg",e_RemorseShame:"e_RemorseShame.jpg",eyes_acceptance:"eyes_acceptance.jpg",eyes_admiration:"eyes_admiration.jpg",eyes_amazement:"eyes_amazement.jpg",eyes_anger:"eyes_anger.jpg",eyes_annoyed:"eyes_annoyed.jpg",eyes_anticipation:"eyes_anticipation.png",eyes_apprehension:"eyes_apprehension.jpg",eyes_apprehension_1:"eyes_apprehension_1.jpg",eyes_boredom:"eyes_boredom.jpg",eyes_default:"eyes_default.jpg",eyes_disgust:"eyes_disgust.jpg",eyes_distraction:"eyes_distraction.gif",eyes_ecstasy_frame_1:"eyes_ecstasy_frame_1.jpg",eyes_ecstasy_frame_2:"eyes_ecstasy_frame_2.jpg",eyes_fear:"eyes_fear.jpg",eyes_grief:"eyes_grief.jpg",eyes_interest:"eyes_interest.jpg",eyes_joy:"eyes_joy.jpg",eyes_loathing:"eyes_loathing.jpg",eyes_pensiveness:"eyes_pensiveness.jpg",eyes_rage:"eyes_rage.jpg",eyes_sad:"eyes_sad.jpg",eyes_serenity:"eyes_serenity.jpg",eyes_surprise:"eyes_surprise.png",eyes_terror:"eyes_terror.jpg",eyes_trust:"eyes_trust.jpg",eyes_vigilance:"eyes_vigilance.jpg"},H$e=n=>z$e[n],G$e=({blocks:n,tfs:e})=>{var t=e[Ur("Left")],i=e[Ur("Right")],s=e[Ur("Head")],o=e[Ur("Base")];let l={Left:{x:[t.rotation.x],y:[t.rotation.y],z:[t.rotation.z],w:[t.rotation.w]},Right:{x:[i.rotation.x],y:[i.rotation.y],z:[i.rotation.z],w:[i.rotation.w]},Head:{x:[s.rotation.x],y:[s.rotation.y],z:[s.rotation.z],w:[s.rotation.w]},Base:{position:{x:[o.position.x],y:[o.position.y],z:[o.position.z]},rotation:{x:[o.rotation.x],y:[o.rotation.y],z:[o.rotation.z],w:[o.rotation.w]}},Time:[0]};const u=(U,P,K)=>{if(U==="both")h(P,K,P,K);else if(K>0){var ee=U,re=U==="Left"?"Right":"Left",ie={rotation:{x:l[ee].x[l[ee].x.length-1],y:l[ee].y[l[ee].y.length-1],z:l[ee].z[l[ee].z.length-1],w:l[ee].w[l[ee].w.length-1]}},de=FM(ie.rotation),oe=2*Uc*PM*Math.abs(de.y-P),ce=oe/(K/100*g2),me={x:0,y:P-_2,z:0},Ae=1;if(me.y<0&&de.y>0||me.y>0&&de.y<0){let ne=(me.y-de.y)/2,ae=me.y-ne;var j=z0(0,ae*Uc/180,0);l[ee].w.push(j._w),l[ee].x.push(j._x),l[ee].y.push(j._y),l[ee].z.push(j._z),l.Time.push(ce/2),Ae+=1}var Z=z0(me.x,me.y*Uc/180,me.z);l[ee].w.push(Z._w),l[ee].x.push(Z._x),l[ee].y.push(Z._y),l[ee].z.push(Z._z);for(let ne=0;ne<Ae;ne++)l[re].w.push(l[re].w[l[re].w.length-1]),l[re].x.push(l[re].x[l[re].x.length-1]),l[re].y.push(l[re].y[l[re].y.length-1]),l[re].z.push(l[re].z[l[re].z.length-1]),l.Head.x.push(l.Head.x[l.Head.x.length-1]),l.Head.y.push(l.Head.y[l.Head.y.length-1]),l.Head.z.push(l.Head.z[l.Head.z.length-1]),l.Head.w.push(l.Head.w[l.Head.w.length-1]),l.Base.position.x.push(l.Base.position.x[l.Base.position.x.length-1]),l.Base.position.y.push(l.Base.position.y[l.Base.position.y.length-1]),l.Base.position.z.push(l.Base.position.z[l.Base.position.z.length-1]),l.Base.rotation.w.push(l.Base.rotation.w[l.Base.rotation.w.length-1]),l.Base.rotation.x.push(l.Base.rotation.x[l.Base.rotation.x.length-1]),l.Base.rotation.y.push(l.Base.rotation.y[l.Base.rotation.y.length-1]),l.Base.rotation.z.push(l.Base.rotation.z[l.Base.rotation.z.length-1]);Ae>1?l.Time.push(ce/2):l.Time.push(ce)}},h=(U,P,K,ee)=>{if(P>0||ee>0){var re={rotation:{x:l.Left.x[l.Left.x.length-1],y:l.Left.y[l.Left.y.length-1],z:l.Left.z[l.Left.z.length-1],w:l.Left.w[l.Left.w.length-1]}},ie={rotation:{x:l.Right.x[l.Right.x.length-1],y:l.Right.y[l.Right.y.length-1],z:l.Right.z[l.Right.z.length-1],w:l.Right.w[l.Right.w.length-1]}},de=FM(re.rotation),oe=2*Uc*PM*Math.abs(de.y-U),ce=oe/(P/100*g2),me=FM(ie.rotation),Ae=2*Uc*PM*Math.abs(me.y-K),j=Ae/(ee/100*g2),Z=P===0?j:ee===0?ce:Math.max(ce,j),ne={x:0,y:U-_2,z:0},ae=z0(ne.x,ne.y*Uc/180,ne.z),_e={x:0,y:K-_2,z:0},Le=z0(_e.x,_e.y*Uc/180,_e.z);let Re=1;if(ne.y<0&&de.y>0||ne.y>0&&de.y<0||_e.y<0&&me.y>0||_e.y>0&&me.y<0){let qe=(ne.y-de.y)/2,Je=(ne.y-de.y)/2,ht=ne.y-qe,it=_e.y-Je;var we=z0(0,ht*Uc/180,0),Xe=z0(0,it*Uc/180,0);P>0?(l.Left.w.push(we._w),l.Left.x.push(we._x),l.Left.y.push(we._y),l.Left.z.push(we._z)):(l.Left.w.push(l.Left.w[l.Left.w.length-1]),l.Left.x.push(l.Left.x[l.Left.x.length-1]),l.Left.y.push(l.Left.y[l.Left.y.length-1]),l.Left.z.push(l.Left.z[l.Left.z.length-1])),ee>0?(l.Right.w.push(Xe._w),l.Right.x.push(Xe._x),l.Right.y.push(Xe._y),l.Right.z.push(Xe._z)):(l.Right.w.push(l.Right.w[l.Right.w.length-1]),l.Right.x.push(l.Right.x[l.Right.x.length-1]),l.Right.y.push(l.Right.y[l.Right.y.length-1]),l.Right.z.push(l.Right.z[l.Right.z.length-1])),l.Time.push(Z/2),Re+=1}P>0?(l.Left.w.push(ae._w),l.Left.x.push(ae._x),l.Left.y.push(ae._y),l.Left.z.push(ae._z)):(l.Left.w.push(l.Left.w[l.Left.w.length-1]),l.Left.x.push(l.Left.x[l.Left.x.length-1]),l.Left.y.push(l.Left.y[l.Left.y.length-1]),l.Left.z.push(l.Left.z[l.Left.z.length-1])),ee>0?(l.Right.w.push(Le._w),l.Right.x.push(Le._x),l.Right.y.push(Le._y),l.Right.z.push(Le._z)):(l.Right.w.push(l.Right.w[l.Right.w.length-1]),l.Right.x.push(l.Right.x[l.Right.x.length-1]),l.Right.y.push(l.Right.y[l.Right.y.length-1]),l.Right.z.push(l.Right.z[l.Right.z.length-1]));for(let qe=0;qe<Re;qe++)l.Head.x.push(l.Head.x[l.Head.x.length-1]),l.Head.y.push(l.Head.y[l.Head.y.length-1]),l.Head.z.push(l.Head.z[l.Head.z.length-1]),l.Head.w.push(l.Head.w[l.Head.w.length-1]),l.Base.position.x.push(l.Base.position.x[l.Base.position.x.length-1]),l.Base.position.y.push(l.Base.position.y[l.Base.position.y.length-1]),l.Base.position.z.push(l.Base.position.z[l.Base.position.z.length-1]),l.Base.rotation.w.push(l.Base.rotation.w[l.Base.rotation.w.length-1]),l.Base.rotation.x.push(l.Base.rotation.x[l.Base.rotation.x.length-1]),l.Base.rotation.y.push(l.Base.rotation.y[l.Base.rotation.y.length-1]),l.Base.rotation.z.push(l.Base.rotation.z[l.Base.rotation.z.length-1]);Re>1?l.Time.push(Z/2):l.Time.push(Z)}},d=(U,P,K,ee)=>{if(ee>0){var re=z0(P*Uc/180,U*Uc/180,K*Uc/180);l.Head.w.push(re._w),l.Head.x.push(re._x),l.Head.y.push(re._y),l.Head.z.push(re._z),l.Left.w.push(l.Left.w[l.Left.w.length-1]),l.Left.x.push(l.Left.x[l.Left.x.length-1]),l.Left.y.push(l.Left.y[l.Left.y.length-1]),l.Left.z.push(l.Left.z[l.Left.z.length-1]),l.Right.w.push(l.Right.w[l.Right.w.length-1]),l.Right.x.push(l.Right.x[l.Right.x.length-1]),l.Right.y.push(l.Right.y[l.Right.y.length-1]),l.Right.z.push(l.Right.z[l.Right.z.length-1]),l.Base.position.x.push(l.Base.position.x[l.Base.position.x.length-1]),l.Base.position.y.push(l.Base.position.y[l.Base.position.y.length-1]),l.Base.position.z.push(l.Base.position.z[l.Base.position.z.length-1]),l.Base.rotation.w.push(l.Base.rotation.w[l.Base.rotation.w.length-1]),l.Base.rotation.x.push(l.Base.rotation.x[l.Base.rotation.x.length-1]),l.Base.rotation.y.push(l.Base.rotation.y[l.Base.rotation.y.length-1]),l.Base.rotation.z.push(l.Base.rotation.z[l.Base.rotation.z.length-1]),l.Time.push(ee)}},m=(U,P,K)=>{if(K>0){var ee={position:{x:l.Base.position.x[l.Base.position.x.length-1],y:l.Base.position.y[l.Base.position.y.length-1],z:l.Base.position.z[l.Base.position.z.length-1]},rotation:{x:l.Base.rotation.x[l.Base.rotation.x.length-1],y:l.Base.rotation.y[l.Base.rotation.y.length-1],z:l.Base.rotation.z[l.Base.rotation.z.length-1],w:l.Base.rotation.w[l.Base.rotation.w.length-1]}},re=P/100*bV*K/Fg,ie=U/100*yV*K/Fg,de=re!==0?ie/re:ie,oe=new Vo(ee.rotation.x,ee.rotation.y,ee.rotation.z,ee.rotation.w),ce=$V(oe);if(re!==0){var me={x:0,y:0,z:re};oe=z0(me.x,me.y,me.z),oe.multiply(new Vo(ee.rotation.x,ee.rotation.y,ee.rotation.z,ee.rotation.w))}let Ae=ee.position.x,j=ee.position.y;re>0?Ae+=de:re<0&&(Ae-=de);let Z=null;re!==0?Z=new Mt(Ae+Math.cos(ce)*ie/re*Math.cos(ie),j+Math.sin(ce)*ie/re*Math.sin(ie),ee.position.z):Z=new Mt(Ae+Math.cos(ce)*ie,j+Math.sin(ce)*ie,ee.position.z),l.Base.position.x.push(Z.x),l.Base.position.y.push(Z.y),l.Base.position.z.push(Z.z),l.Base.rotation.w.push(oe._w),l.Base.rotation.x.push(oe._x),l.Base.rotation.y.push(oe._y),l.Base.rotation.z.push(oe._z),l.Head.x.push(l.Head.x[l.Head.x.length-1]),l.Head.y.push(l.Head.y[l.Head.y.length-1]),l.Head.z.push(l.Head.z[l.Head.z.length-1]),l.Head.w.push(l.Head.w[l.Head.w.length-1]),l.Left.w.push(l.Left.w[l.Left.w.length-1]),l.Left.x.push(l.Left.x[l.Left.x.length-1]),l.Left.y.push(l.Left.y[l.Left.y.length-1]),l.Left.z.push(l.Left.z[l.Left.z.length-1]),l.Right.w.push(l.Right.w[l.Right.w.length-1]),l.Right.x.push(l.Right.x[l.Right.x.length-1]),l.Right.y.push(l.Right.y[l.Right.y.length-1]),l.Right.z.push(l.Right.z[l.Right.z.length-1]),l.Time.push(K)}},_=U=>{let P=l.Head.x.length-1;l.Base.position.x.push(l.Base.position.x[P]),l.Base.position.y.push(l.Base.position.y[P]),l.Base.position.z.push(l.Base.position.z[P]),l.Base.rotation.w.push(l.Base.rotation.w[P]),l.Base.rotation.x.push(l.Base.rotation.x[P]),l.Base.rotation.y.push(l.Base.rotation.y[P]),l.Base.rotation.z.push(l.Base.rotation.z[P]),l.Head.x.push(l.Head.x[P]),l.Head.y.push(l.Head.y[P]),l.Head.z.push(l.Head.z[P]),l.Head.w.push(l.Head.w[P]),l.Left.w.push(l.Left.w[P]),l.Left.x.push(l.Left.x[P]),l.Left.y.push(l.Left.y[P]),l.Left.z.push(l.Left.z[P]),l.Right.w.push(l.Right.w[P]),l.Right.x.push(l.Right.x[P]),l.Right.y.push(l.Right.y[P]),l.Right.z.push(l.Right.z[P]),l.Time.push(U)},v=()=>{let U=JSON.parse(JSON.stringify(e)),P=JSON.parse(JSON.stringify(e)),K=l.Time.length,ee=0,re=[],ie=[],de=[],oe=[],ce=[],me=[],Ae=[],j=[],Z=[],ne=[],ae=[],_e=[],Le=[],we=[],Xe=[],Re=[],qe=[],Je=[],ht=[],it=[];for(let dt=1;dt<K;dt++){let It=l.Time[dt],mt=new Vo(l.Left.x[dt],l.Left.y[dt],l.Left.z[dt],l.Left.w[dt]),wt=new Vo(l.Right.x[dt],l.Right.y[dt],l.Right.z[dt],l.Right.w[dt]),$t=new Vo(l.Head.x[dt],l.Head.y[dt],l.Head.z[dt],l.Head.w[dt]),pt=new Vo(l.Base.rotation.x[dt],l.Base.rotation.y[dt],l.Base.rotation.z[dt],l.Base.rotation.w[dt]),Te=new Mt(l.Base.position.x[dt],l.Base.position.y[dt],l.Base.position.z[dt]);for(let te=10;te<xy;te+=10){re.push(It/Fg*te+ee);let ke=new Vo(l.Left.x[dt-1],l.Left.y[dt-1],l.Left.z[dt-1],l.Left.w[dt-1]),ot=new Vo(l.Right.x[dt-1],l.Right.y[dt-1],l.Right.z[dt-1],l.Right.w[dt-1]),ft=new Vo(l.Head.x[dt-1],l.Head.y[dt-1],l.Head.z[dt-1],l.Head.w[dt-1]),xt=new Vo(l.Base.rotation.x[dt-1],l.Base.rotation.y[dt-1],l.Base.rotation.z[dt-1],l.Base.rotation.w[dt-1]),at=new Mt(l.Base.position.x[dt-1],l.Base.position.y[dt-1],l.Base.position.z[dt-1]);ke.slerp(mt,te/xy),ot.slerp(wt,te/xy),ft.slerp($t,te/xy),xt.slerp(pt,te/xy),at.lerp(Te,te/xy),ie.push(ke._w),de.push(ke._x),oe.push(ke._y),ce.push(ke._z),me.push(ot._w),Ae.push(ot._x),j.push(ot._y),Z.push(ot._z),ne.push(ft._w),ae.push(ft._x),_e.push(ft._y),Le.push(ft._z),we.push(at.x),Xe.push(at.y),Re.push(at.z),qe.push(xt._w),Je.push(xt._x),ht.push(xt._y),it.push(xt._z)}ee+=It}let Oe=new Vo(l.Left.x[K-1],l.Left.y[K-1],l.Left.z[K-1],l.Left.w[K-1]),Ee=new Vo(l.Right.x[K-1],l.Right.y[K-1],l.Right.z[K-1],l.Right.w[K-1]),Fe=new Vo(l.Head.x[K-1],l.Head.y[K-1],l.Head.z[K-1],l.Head.w[K-1]),rt=new Vo(l.Base.rotation.x[K-1],l.Base.rotation.y[K-1],l.Base.rotation.z[K-1],l.Base.rotation.w[K-1]),nt=new Mt(l.Base.position.x[K-1],l.Base.position.y[K-1],l.Base.position.z[K-1]);return re.push(1/0),ie.push(Oe._w),de.push(Oe._x),oe.push(Oe._y),ce.push(Oe._z),me.push(Ee._w),Ae.push(Ee._x),j.push(Ee._y),Z.push(Ee._z),ne.push(Fe._w),ae.push(Fe._x),_e.push(Fe._y),Le.push(Fe._z),we.push(nt.x),Xe.push(nt.y),Re.push(nt.z),qe.push(rt._w),Je.push(rt._x),ht.push(rt._y),it.push(rt._z),U[Ur("Left")].rotation.w=da(re,ie),U[Ur("Left")].rotation.x=da(re,de),U[Ur("Left")].rotation.y=da(re,oe),U[Ur("Left")].rotation.z=da(re,ce),P[Ur("Left")].rotation.w=Oe._w,P[Ur("Left")].rotation.x=Oe._x,P[Ur("Left")].rotation.y=Oe._y,P[Ur("Left")].rotation.z=Oe._z,U[Ur("Right")].rotation.w=da(re,me),U[Ur("Right")].rotation.x=da(re,Ae),U[Ur("Right")].rotation.y=da(re,j),U[Ur("Right")].rotation.z=da(re,Z),P[Ur("Right")].rotation.w=Ee._w,P[Ur("Right")].rotation.x=Ee._x,P[Ur("Right")].rotation.y=Ee._y,P[Ur("Right")].rotation.z=Ee._z,U[Ur("Head")].rotation.w=da(re,ne),U[Ur("Head")].rotation.x=da(re,ae),U[Ur("Head")].rotation.y=da(re,_e),U[Ur("Head")].rotation.z=da(re,Le),P[Ur("Head")].rotation.w=Fe._w,P[Ur("Head")].rotation.x=Fe._x,P[Ur("Head")].rotation.y=Fe._y,P[Ur("Head")].rotation.z=Fe._z,U[Ur("Base")].rotation.w=da(re,qe),U[Ur("Base")].rotation.x=da(re,Je),U[Ur("Base")].rotation.y=da(re,ht),U[Ur("Base")].rotation.z=da(re,it),U[Ur("Base")].position.x=da(re,we),U[Ur("Base")].position.y=da(re,Xe),U[Ur("Base")].position.z=da(re,Re),P[Ur("Base")].rotation.w=rt._w,P[Ur("Base")].rotation.x=rt._x,P[Ur("Base")].rotation.y=rt._y,P[Ur("Base")].rotation.z=rt._z,P[Ur("Base")].position.x=nt.x,P[Ur("Base")].position.y=nt.y,P[Ur("Base")].position.z=nt.z,{newTfs:U,newEndingTfs:P}},S=U=>Object.values(n).filter(P=>P.type===U)[0],x=U=>n[U],w=(U,P)=>{const K=x(U);let ee=x(P);if(L(K,K.type))for(L(ee,ee.type);ee.next;)ee=x(ee.next),L(ee,ee.type)},A=U=>U==="TRUE";function k(U,P){return U=Math.ceil(U),P=Math.floor(P),Math.floor(Math.random()*(P-U+1))+U}function O(U){if(U===2||U===3)return!0;if(U<=1||U%2===0||U%3===0)return!1;for(let P=5;P*P<=U;P+=6)if(U%P===0||U%(P+2)===0)return!1;return!0}function D(U){var P;if(typeof U!="string"&&typeof U!="object")return U.shadow.fields.NUM;{let K=(P=U==null?void 0:U.shadow)!=null&&P.id?x(U.shadow.id):x(U);return L(K,K.type)}}const L=(U,P)=>{var rt,nt,dt;switch(!0){case P==="controls_if":if(!U.inputs||!U.inputs.IF0||!U.inputs.DO0)throw new Error("err: controls_if not complete!");w(U.inputs.IF0,U.inputs.DO0);break;case P==="logic_boolean":return A(U.fields.BOOL);case P==="logic_compare":if(!U.inputs||!U.inputs.A||!U.inputs.B)throw new Error("err: logic_compare is not complete!");const It=U.fields.OP,mt=U.inputs.A,wt=U.inputs.B,$t=x(mt),pt=x(wt);if(It==="EQ")return L($t,$t.type)==L(pt,pt.type);if(It==="NEQ")return L($t,$t.type)!==L(pt,pt.type);if(It==="LT")return L($t,$t.type)<L(pt,pt.type);if(It==="LTE")return L($t,$t.type)<=L(pt,pt.type);if(It==="GT")return L($t,$t.type)>L(pt,pt.type);if(It==="GTE")return L($t,$t.type)>=L(pt,pt.type);case P==="logic_operation":if(!U.inputs||!U.inputs.A||!U.inputs.B)throw new Error("err: logic_operation is not complete!");const Te=U.fields.OP,te=U.inputs.A,ke=U.inputs.B,ot=x(te),ft=x(ke);return Te==="OR"?L(ot,ot.type)||L(ft,ft.type):L(ot,ot.type)&&L(ft,ft.type);case P==="logic_negate":if(!U.inputs)throw new Error("err: logic_negate is not complete!");const xt=x(U.inputs.BOOL);return!L(xt,xt.type);case P==="logic_boolean":return!U.fields.BOOL!=="FALSE";case P==="logic_null":return null;case P==="logic_ternary":if(!U.inputs||!U.inputs.IF||!U.inputs.THEN||!U.inputs.ELSE)throw new Error("err: logic_ternary is not complete!");const at=U.inputs.IF,Ge=U.inputs.THEN,Ce=U.inputs.ELSE,X=x(at),Q=x(Ge),le=x(Ce);return L(X,X.type)?L(Q,Q.type):L(le,le.type);case P==="controls_repeat_ext":const We=D(U.inputs.TIMES);if(!U.inputs.DO)throw new Error("err: controls_repeat_ext is not complete!");let Ft=x(U.inputs.DO);for(let Nt=0;Nt<We;Nt++){L(Ft,Ft.type);let yn=Ft;for(;yn.next;)yn=x(yn.next),L(yn,yn.type)}return;case P==="math_number":return U.fields.NUM;case P=="BasicSlider":case P=="ArmPositionSlider":case P=="SpeedSlider":case P=="TimeSlider":case P=="HeadPitchSlider":case P=="HeadRollSlider":case P=="HeadYawSlider":return U.fields.FIELD_slider_value;case P==="math_number_property":const Be=U.fields.PROPERTY,Ut=D(U.inputs.NUMBER_TO_CHECK);if(Be==="EVEN")return Ut%2===0;if(Be==="ODD")return Ut%2===1;if(Be==="PRIME")return O(Ut);if(Be==="WHOLE")return Ut%1===0;if(Be==="POSITIVE")return Ut>0;if(Be==="NEGATIVE")return Ut<0;if(Be==="DIVISIBLE_BY"){if(!U.inputs||!U.inputs.DIVISOR)throw new Error("err: DIVISOR is not filled!");if(U.inputs.DIVISOR===0)throw new Error("Note that divisor cannot be 0!");return Ut%U.inputs.DIVISOR===0}return;case P==="math_random_int":const ut=D(U.inputs.FROM),Ht=D(U.inputs.TO);return k(ut,Ht);case P==="colour_picker":return b1(U.fields.COLOUR);case P==="colour_random":let zt=k(0,255),En=k(0,255),Pr=k(0,255);return{r:zt,g:En,b:Pr};case P==="colour_rgb":const Er=D(U.inputs.RED),Kr=D(U.inputs.GREEN),or=D(U.inputs.BLUE);return{r:Er,g:Kr,b:or};case P==="colour_blend":const Wn=D(U.inputs.RATIO),q=b1(U.inputs.COLOUR1.shadow.fields.COLOUR),ge=b1(U.inputs.COLOUR2.shadow.fields.COLOUR),Ne=q.r*Wn,tt=q.g*Wn,kt=q.b*Wn,qt=ge.r,_n=ge.g,Ie=ge.b,lt=(qt+Ne)/(Wn+1),Et=(_n+tt)/(Wn+1),gt=(Ie+kt)/(Wn+1);return{r:lt,g:Et,b:gt};case P==="ChangeLED":if(!U.inputs||!U.inputs.FIELD_ChangeLED)throw new Error("err: ChangeLED is not complete!");var K=x(U.inputs.FIELD_ChangeLED),ee=null;(rt=K==null?void 0:K.fields)!=null&&rt.COLOUR?ee=b1(K.fields.COLOUR):ee=L(K,K.type);var j={Red:ee.r,Green:ee.g,Blue:ee.b};return;case P==="TransitionLED":if(!U.inputs||!U.inputs.COLOR1||!U.inputs.COLOR2)throw new Error("err: TransitionLED is not complete!");var re=x(U.inputs.COLOR1),ie=x(U.inputs.COLOR2),de=null;(nt=re==null?void 0:re.fields)!=null&&nt.COLOUR?de=b1(re.fields.COLOUR):de=L(re,re.type);var oe=null;(dt=ie==null?void 0:ie.fields)!=null&&dt.COLOUR?oe=b1(ie.fields.COLOUR):oe=L(ie,ie.type);var Oe=U.fields.FIELD_TransitionTime_TimeMs*Fg,ce=U.fields.TRANSITION_TYPE,j={Red:de.r,Green:de.g,Blue:de.b,Red2:oe.r,Green2:oe.g,Blue2:oe.b,TransitionType:ce,TimeMS:Oe};return;case P==="DisplayImage":if(!U.inputs||!U.inputs.FIELD_DisplayImage_Filename)throw new Error("err: DisplayImage is not complete!");var me=x(U.inputs.FIELD_DisplayImage_Filename),Ae=H$e(me.type);return;case P==="PlayAudio":if(!U.inputs||!U.inputs.FIELD_PlayAudio_Filename)throw new Error("err: PlayAudio is not complete!");var me=x(U.inputs.FIELD_PlayAudio_Filename),Ae=CG(me.type);return;case P==="DisplayAnimation":if(!U.inputs||!U.inputs.FIELD_DisplayAnimation_Filename)throw new Error("err: DisplayAnimation is not complete!");var me=x(U.inputs.FIELD_DisplayAnimation_Filename),Ae=CG(me.type),j={FileName:Ae};readFile(j);return;case P==="DisplayText":U.fields.FIELD_DisplayText_Text;return;case P==="TurnOnFlashlight":return;case P==="TurnOffFlashlight":return;case P==="WaitForSeconds":var Oe=parseFloat(U.fields.NumSeconds)*Fg;_(Oe);return;case P==="MoveArm":var Z=U.fields.FIELD_MoveArm_Arm==="Right"?"Right":"Left",ne=D(U.fields.FIELD_MoveArm_Position),Je=D(U.fields.FIELD_MoveArm_Velocity);u(Z,ne,Je);return;case P==="MoveArm2":var ne=D(U.fields.FIELD_MoveArm2_Position),Je=D(U.fields.FIELD_MoveArm2_Velocity),Z="both";u(Z,ne,Je);return;case P==="MoveArm3":var Z=U.fields.FIELD_MoveArm_Arm==="Right"?"Right":"Left",ne=D(U.fields.FIELD_MoveArm_Position),Je=D(U.fields.FIELD_MoveArm_Velocity);u(Z,ne,Je);return;case P==="MoveArms2":var ae=D(U.inputs.FIELD_MoveArm_LeftPosition),_e=D(U.inputs.FIELD_MoveArm_LeftVelocity),Le=D(U.inputs.FIELD_MoveArm_RightPosition),we=D(U.inputs.FIELD_MoveArm_RightVelocity);h(ae,_e,Le,we);return;case P==="MoveHead":var Xe=U.fields.FIELD_MoveHead_Pitch==="D"?25:-40,Oe=2e3;d(Xe,0,0,Oe);return;case P==="MoveHead3":var Xe,Re,qe;Xe=D(U.inputs.FIELD_MoveHead_Pitch),Re=D(U.inputs.FIELD_MoveHead_Roll),qe=D(U.inputs.FIELD_MoveHead_Yaw),Oe=D(U.inputs.FIELD_MoveHead_Time)*Fg,d(Xe,Re,qe,Oe);return;case P==="DriveTime":var it=U.fields.FIELD_DriveTime_Direction,Je=parseInt(U.fields.FIELD_DriveTime_Velocity),Oe=parseInt(U.fields.FIELD_DriveTime_TimeMs)*Fg,ht=it==="F"?Je:-Je;m(ht,0,Oe);return;case P==="DriveTime2":var ht=D(U.inputs.FIELD_DriveTime_Velocity),Ee=D(U.inputs.FIELD_DriveTime_Angular),Oe=D(U.inputs.FIELD_DriveTime_TimeMs)*Fg;m(ht,Ee,Oe);return;case P==="Turn":var it=U.fields.FIELD_Turn_Direction,Oe=parseInt(U.fields.FIELD_Turn_Duration)*Fg,Ee=it==="L"?100:-100;m(0,Ee,Oe);return;case P==="Turn2":var it=U.fields.FIELD_Turn_Direction,Oe=parseInt(D(U.inputs.FIELD_Turn_Duration))*Fg,Ee=it==="L"?100:-100;m(0,Ee,Oe);return;case P=="Speak":var Fe=x(U.inputs.FIELD_Speak_Text);Fe.fields.TEXT;return;case P=="SpeakDefault":U.fields.FIELD_SpeakDefault_Text;return;default:return}};let H=S("Start");for(;H&&H.next;)H=x(H.next),L(H,H.type);return v()};function W$e(n){const e=lr(so(L=>L.resetSim)),t=lr(so(L=>L.toggleSimOnly)),i=lr(so(L=>L.isConnected)),s=lr(so(L=>L.ip)),o=lr(so(L=>L.getBlocks)),l=lr(so(L=>L.clock)),u=lr(so(L=>L.mistyImageList)),h=lr(so(L=>L.mistyAudioList)),d=lr(so(L=>L.simOnly)),m=lr(so(L=>L.endingTfs)),_=lr(so(L=>L.setAnimationFrames)),v=lr(so(L=>L.workerThread)),S=lr(so(L=>L.setWorkerThread)),x=lr(so(L=>L.llmMode));function w(L,z){s&&!d&&i&&fetch(`http://${s}/api/${L}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})}const A=async()=>{l.reset_elapsed(),v&&(v.terminate(),S(null));const L=`import ${JSON.stringify(new URL(F$e,import.meta.url))}`,z=new Blob([L],{type:"application/javascript"}),H=URL.createObjectURL(z);let U=new Worker(H,{type:"module"});U.onmessage=function(ee){console.log("Message received from worker "+ee.data),S(null)},U.onerror=function(ee){console.log(ee),URL.revokeObjectURL(H)},U.postMessage({blocks:o(),mistyAudioList:h,mistyImageList:u,tfs:m,ip:s,runOnRobot:!d}),S(U);let{newTfs:P,newEndingTfs:K}=G$e({blocks:o(),tfs:m});_(P,K),zu("Click Run Code button")},k=()=>{v&&(v.terminate(),S(null),w("halt",{})),zu("Click Stop Code button")},O=()=>{w("arms/set",{LeftArmPosition:90,RightArmPosition:90,LeftArmVelocity:100,RightArmVelocity:100,Units:"Degrees"}),w("head",{Pitch:0,Yaw:0,Roll:0,Duration:1,Units:"Degrees"}),w("images/display",{FileName:"e_DefaultContent.jpg",Alpha:1}),w("text/display",{Text:""}),w("led",{Red:100,Green:70,Blue:160}),e()};let D=x?{top:"10px"}:{bottom:"0px"};return Ve.jsxs(HT,{style:{position:"absolute",padding:"0px",left:"10px",...D},children:[Ve.jsxs(Qz,{style:{paddingLeft:"0px",paddingRight:"0px"},children:[!v&&Ve.jsx(XM,{variant:"contained","aria-label":"play",style:{backgroundColor:"#FAFAFA",marginBottom:"5px"},onClick:A,id:"runButton",children:Ve.jsx(MX,{})}),v&&Ve.jsx(XM,{variant:"contained","aria-label":"play",style:{backgroundColor:"#FAFAFA",marginBottom:"5px"},onClick:k,id:"stopButton",children:Ve.jsx(AX,{})}),Ve.jsx(XM,{variant:"contained","aria-label":"restart",style:{backgroundColor:"#FAFAFA",marginLeft:"5px",marginBottom:"5px"},onClick:O,children:Ve.jsx(CX,{})})]}),i&&Ve.jsx(Qz,{style:{backgroundColor:"#FAFAFA",borderRadius:"5px",marginBottom:"5px",paddingLeft:"10px",paddingRight:"0px"},children:Ve.jsx(Lle,{children:Ve.jsx(Mle,{control:Ve.jsx(Iae,{onChange:L=>t(L.target.checked)}),label:"Sim only"})})})]})}function MG(n){const e={displayTfs:!1,displayGrid:!0,isPolar:!1,backgroundColor:"#3a3a3a",planeColor:"#3a3a3a",highlightColor:"#ffffff",plane:0,fov:60,ar:!1,vr:!1};return Ve.jsxs(av,{height:"100%",children:[Ve.jsx(A$e,{style:{overflow:"hidden"},store:lr,meshLookup:ppe,...e}),Ve.jsx(W$e,{})]})}var IX={exports:{}};(function(n,e){(function(t,i){i()})(Wu,function(){function t(d,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function i(d,m,_){var v=new XMLHttpRequest;v.open("GET",d),v.responseType="blob",v.onload=function(){h(v.response,m,_)},v.onerror=function(){console.error("could not download file")},v.send()}function s(d){var m=new XMLHttpRequest;m.open("HEAD",d,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function o(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(m)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Wu=="object"&&Wu.global===Wu?Wu:void 0,u=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(d,m,_){var v=l.URL||l.webkitURL,S=document.createElement("a");m=m||d.name||"download",S.download=m,S.rel="noopener",typeof d=="string"?(S.href=d,S.origin===location.origin?o(S):s(S.href)?i(d,m,_):o(S,S.target="_blank")):(S.href=v.createObjectURL(d),setTimeout(function(){v.revokeObjectURL(S.href)},4e4),setTimeout(function(){o(S)},0))}:"msSaveOrOpenBlob"in navigator?function(d,m,_){if(m=m||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(t(d,_),m);else if(s(d))i(d,m,_);else{var v=document.createElement("a");v.href=d,v.target="_blank",setTimeout(function(){o(v)})}}:function(d,m,_,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof d=="string")return i(d,m,_);var S=d.type==="application/octet-stream",x=/constructor/i.test(l.HTMLElement)||l.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||S&&x||u)&&typeof FileReader<"u"){var A=new FileReader;A.onloadend=function(){var D=A.result;D=w?D:D.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=D:location=D,v=null},A.readAsDataURL(d)}else{var k=l.URL||l.webkitURL,O=k.createObjectURL(d);v?v.location=O:location.href=O,v=null,setTimeout(function(){k.revokeObjectURL(O)},4e4)}});l.saveAs=h.saveAs=h,n.exports=h})})(IX);var V$e=IX.exports;const j$e=bb(V$e);function JO({title:n,children:e,style:t}){return Ve.jsx(av,{style:{padding:"5px",paddingTop:"20px",...t},children:Ve.jsxs(av,{style:{backgroundColor:"#E4E5F1",border:"3px #9394A5 solid",padding:"5px",borderRadius:"6px"},children:[Ve.jsx(av,{style:{position:"relative",display:"float",top:"-18px",left:"10px"},children:Ve.jsx(av,{children:Ve.jsx(UT,{display:"inline",style:{filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",backgroundColor:"#E4E5F1",padding:"3px",border:"3px #9394A5 solid",borderRadius:"6px"},children:n})})}),Ve.jsx(HT,{children:he.Children.map(e,i=>Ve.jsx("div",{style:{padding:"3px",margin:"3px"},children:i}))})]})})}function AG({label:n,buttonText:e,clickFunction:t,style:i}){return Ve.jsxs(vm,{container:!0,direction:"row",alignItems:"center",style:{...i},children:[Ve.jsx(UT,{display:"inline",style:{paddingRight:"10px",flex:"1"},children:n}),Ve.jsx(xT,{text:e,clickFunction:t})]})}function QO({label:n,onChangeFunction:e,fieldType:t,textFieldInput:i,style:s}){return Ve.jsxs(vm,{container:!0,direction:"row",alignItems:"center",style:{...s},children:[Ve.jsx(UT,{display:"inline",style:{paddingRight:"10px",flex:"1"},children:n}),Ve.jsx(pP,{value:i,type:t,onChange:e})]})}const X$e=()=>{const n=lr(_=>_.closeModal),e=lr(_=>_.setEndpoint),t=lr(_=>_.setAPIKey),i=lr(_=>_.setDeployment),s=lr(so(_=>_.llmDeployment)),o=lr(so(_=>_.llmAPIKey)),l=lr(so(_=>_.llmEndpoint)),u=lr(_=>_.blocklyWorkspace),h=()=>{var _=new Blob([activityLog],{type:"text/plain;charset=utf-8"});j$e.saveAs(_,"activity log.txt")},d=()=>{const _=mm.Xml.domToPrettyText(mm.Xml.workspaceToDom(u)),v=new Blob([_],{type:"text/xml"}),S=URL.createObjectURL(v),x=document.createElement("a");x.href=S,x.download="myBlocks.xml",x.click()},m=_=>{const v=new FileReader;v.onload=function(){const S=v.result;if(u)try{const w=new DOMParser().parseFromString(S,"text/xml");mm.Xml.domToWorkspace(w.firstChild,u)}catch(x){console.error("Error parsing XML:",x)}else console.error("Blockly workspace not initialized")},v.readAsText(_.target.files[0])};return Ve.jsxs(av,{sx:{backgroundColor:"#585D92",padding:"5px",margin:"0",borderRadius:"10px",maxHeight:"70vh",width:"20vw",overflowY:"scroll"},children:[Ve.jsxs(JO,{title:"LLM Settings",children:[Ve.jsx(QO,{onChangeFunction:_=>e(_.target.value),label:"Server Endpoint",fieldType:"password",textFieldInput:l}),Ve.jsx(QO,{onChangeFunction:_=>t(_.target.value),label:"API Key",fieldType:"password",textFieldInput:o}),Ve.jsx(QO,{onChangeFunction:_=>i(_.target.value),label:"Deployment Model",fieldType:"password",textFieldInput:s})]}),Ve.jsxs(JO,{title:"Downloads",children:[Ve.jsx(AG,{clickFunction:h,label:"Download Activity Log",buttonText:"Download"}),Ve.jsx(AG,{clickFunction:d,label:"Download Workspace XML",buttonText:"Download"})]}),Ve.jsx(JO,{title:"Upload",children:Ve.jsx(cP,{type:"file",onChange:m,accept:".xml"})}),Ve.jsx(xT,{clickFunction:n,text:"Close",style:{float:"right"}})]})},Y$e=()=>{const n=lr(t=>t.setActiveModal),e=lr(t=>t.activeModal);return Ve.jsx(A8,{open:e===TV,onClose:(t,i)=>{i==="backdropClick"&&n("")},children:e&&Ve.jsx(X$e,{})})};function K$e({leftChildren:n,rightChildren:e}){return Ve.jsxs(vm,{container:!0,direction:"row",justifyContent:"center",spacing:2,style:{padding:"20px",height:"100%",width:"100%"},children:[Ve.jsx(vm,{item:!0,xs:6,children:n}),Ve.jsx(vm,{item:!0,xs:1,children:Ve.jsx(ule,{orientation:"vertical",style:{height:"100%",width:"1px"}})}),Ve.jsx(vm,{item:!0,xs:5,children:e})]})}function IG(){const{innerWidth:n,innerHeight:e}=window;return{width:n,height:e}}function J$e(){const[n,e]=he.useState(IG());return he.useEffect(()=>{function t(){e(IG())}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n}function RX({style:n,maxVH:e=0}){const t=lr(so(_=>_.userPrompt)),i=lr(_=>_.setUserPrompt),s=lr(_=>_.generateProgramOutline),o=lr(so(_=>_.llmProcessing)),{height:l,_:u}=J$e();function h(_){var v=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return _*v/100}let d=e>0?h(e)/23:(l-190)/23;const m=_=>{i(_.target.value)};return Ve.jsxs("div",{style:{...n},children:[Ve.jsx(pP,{label:"What do you want the robot to do?",multiline:!0,disabled:o,fullWidth:!0,minRows:d,maxRows:d,onChange:m,value:t}),Ve.jsx(xT,{text:"Generate Program Goals",clickFunction:s,disabled:o,style:{float:"right",backgroundColor:"#A0FF7E"}})]})}function Q$e(n){const e=lr(so(t=>t.llmProcessing));return Ve.jsxs("div",{children:[Ve.jsx(mR,{style:{color:"#fff",zIndex:103},open:e,children:Ve.jsx(C8,{color:"inherit"})}),Ve.jsx(K$e,{leftChildren:Ve.jsx(RX,{}),rightChildren:Ve.jsx("p",{children:"Test2"})})]})}const q$e=()=>Ve.jsx(av,{sx:{backgroundColor:"#585D92",padding:"15px",margin:"0",borderRadius:"10px",maxHeight:"70vh",overflowY:"scroll"},children:Ve.jsx(RX,{style:{backgroundColor:"#FAFAFA",borderRadius:"5px"},maxVH:50})}),Z$e=()=>{const n=lr(t=>t.setActiveModal),e=lr(t=>t.activeModal);return Ve.jsx(A8,{open:e===SV,onClose:(t,i)=>{i==="backdropClick"&&n("")},children:e&&Ve.jsx(q$e,{})})},qO=jn("div")(({theme:n})=>({textAlign:"center",height:"100%"}));mm.common.defineBlocks(UJ);Object.assign(DT.javascriptGenerator.forBlock,TI);function exe(){const n=lr(so(i=>i.llmMode)),e=lr(so(i=>i.llmProcessing)),t=lr(so(i=>i.headerHeight));return Ve.jsxs(av,{width:"100vw",height:`calc(100vh - ${t}px)`,padding:0,children:[Ve.jsx(Xce,{}),Ve.jsxs(GA,{orientation:"vertical",style:{height:"100%",width:"100vw"},children:[Ve.jsx(SC,{flex:.55,children:Ve.jsxs(qO,{style:{width:"100%",height:"100%"},children:[!n&&Ve.jsx(u4,{}),n&&Ve.jsx(Q$e,{})]})}),Ve.jsx(vf,{propagate:!0}),Ve.jsx(SC,{flex:.45,children:Ve.jsxs(GA,{orientation:"horizontal",children:[Ve.jsx(SC,{children:Ve.jsxs(qO,{children:[!n&&Ve.jsx(MG,{}),n&&Ve.jsx(u4,{})]})}),Ve.jsx(vf,{propagate:!0}),Ve.jsx(SC,{children:Ve.jsx(qO,{children:n&&Ve.jsx(MG,{})})})]})})]}),Ve.jsx(mR,{style:{color:"#fff",zIndex:1500},open:e,children:Ve.jsx(C8,{color:"inherit"})}),Ve.jsx(Y$e,{}),Ve.jsx(Z$e,{})]})}eL.createRoot(document.getElementById("root")).render(Ve.jsx(Sr.StrictMode,{children:Ve.jsx(exe,{})}));
