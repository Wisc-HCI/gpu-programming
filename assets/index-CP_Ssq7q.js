function Yte(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var Vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function g_(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var t8={exports:{}},HR={},n8={exports:{}},Bs={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gC=Symbol.for("react.element"),Xte=Symbol.for("react.portal"),Kte=Symbol.for("react.fragment"),Jte=Symbol.for("react.strict_mode"),qte=Symbol.for("react.profiler"),Qte=Symbol.for("react.provider"),Zte=Symbol.for("react.context"),ene=Symbol.for("react.forward_ref"),tne=Symbol.for("react.suspense"),nne=Symbol.for("react.memo"),rne=Symbol.for("react.lazy"),$z=Symbol.iterator;function ine(n){return n===null||typeof n!="object"?null:(n=$z&&n[$z]||n["@@iterator"],typeof n=="function"?n:null)}var r8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i8=Object.assign,s8={};function tE(n,e,t){this.props=n,this.context=e,this.refs=s8,this.updater=t||r8}tE.prototype.isReactComponent={};tE.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};tE.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function o8(){}o8.prototype=tE.prototype;function zB(n,e,t){this.props=n,this.context=e,this.refs=s8,this.updater=t||r8}var UB=zB.prototype=new o8;UB.constructor=zB;i8(UB,tE.prototype);UB.isPureReactComponent=!0;var Cz=Array.isArray,a8=Object.prototype.hasOwnProperty,HB={current:null},l8={key:!0,ref:!0,__self:!0,__source:!0};function u8(n,e,t){var r,s={},o=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)a8.call(e,r)&&!l8.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=t;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];s.children=h}if(n&&n.defaultProps)for(r in u=n.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:gC,type:n,key:o,ref:l,props:s,_owner:HB.current}}function sne(n,e){return{$$typeof:gC,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function GB(n){return typeof n=="object"&&n!==null&&n.$$typeof===gC}function one(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Mz=/\/+/g;function N2(n,e){return typeof n=="object"&&n!==null&&n.key!=null?one(""+n.key):e.toString(36)}function YA(n,e,t,r,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var l=!1;if(n===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case gC:case Xte:l=!0}}if(l)return l=n,s=s(l),n=r===""?"."+N2(l,0):r,Cz(s)?(t="",n!=null&&(t=n.replace(Mz,"$&/")+"/"),YA(s,e,t,"",function(f){return f})):s!=null&&(GB(s)&&(s=sne(s,t+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Mz,"$&/")+"/")+n)),e.push(s)),1;if(l=0,r=r===""?".":r+":",Cz(n))for(var u=0;u<n.length;u++){o=n[u];var h=r+N2(o,u);l+=YA(o,e,t,h,s)}else if(h=ine(n),typeof h=="function")for(n=h.call(n),u=0;!(o=n.next()).done;)o=o.value,h=r+N2(o,u++),l+=YA(o,e,t,h,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function YC(n,e,t){if(n==null)return n;var r=[],s=0;return YA(n,r,"","",function(o){return e.call(t,o,s++)}),r}function ane(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var yp={current:null},XA={transition:null},lne={ReactCurrentDispatcher:yp,ReactCurrentBatchConfig:XA,ReactCurrentOwner:HB};Bs.Children={map:YC,forEach:function(n,e,t){YC(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return YC(n,function(){e++}),e},toArray:function(n){return YC(n,function(e){return e})||[]},only:function(n){if(!GB(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Bs.Component=tE;Bs.Fragment=Kte;Bs.Profiler=qte;Bs.PureComponent=zB;Bs.StrictMode=Jte;Bs.Suspense=tne;Bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lne;Bs.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=i8({},n.props),s=n.key,o=n.ref,l=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=HB.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var u=n.type.defaultProps;for(h in e)a8.call(e,h)&&!l8.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=t;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];r.children=u}return{$$typeof:gC,type:n.type,key:s,ref:o,props:r,_owner:l}};Bs.createContext=function(n){return n={$$typeof:Zte,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Qte,_context:n},n.Consumer=n};Bs.createElement=u8;Bs.createFactory=function(n){var e=u8.bind(null,n);return e.type=n,e};Bs.createRef=function(){return{current:null}};Bs.forwardRef=function(n){return{$$typeof:ene,render:n}};Bs.isValidElement=GB;Bs.lazy=function(n){return{$$typeof:rne,_payload:{_status:-1,_result:n},_init:ane}};Bs.memo=function(n,e){return{$$typeof:nne,type:n,compare:e===void 0?null:e}};Bs.startTransition=function(n){var e=XA.transition;XA.transition={};try{n()}finally{XA.transition=e}};Bs.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Bs.useCallback=function(n,e){return yp.current.useCallback(n,e)};Bs.useContext=function(n){return yp.current.useContext(n)};Bs.useDebugValue=function(){};Bs.useDeferredValue=function(n){return yp.current.useDeferredValue(n)};Bs.useEffect=function(n,e){return yp.current.useEffect(n,e)};Bs.useId=function(){return yp.current.useId()};Bs.useImperativeHandle=function(n,e,t){return yp.current.useImperativeHandle(n,e,t)};Bs.useInsertionEffect=function(n,e){return yp.current.useInsertionEffect(n,e)};Bs.useLayoutEffect=function(n,e){return yp.current.useLayoutEffect(n,e)};Bs.useMemo=function(n,e){return yp.current.useMemo(n,e)};Bs.useReducer=function(n,e,t){return yp.current.useReducer(n,e,t)};Bs.useRef=function(n){return yp.current.useRef(n)};Bs.useState=function(n){return yp.current.useState(n)};Bs.useSyncExternalStore=function(n,e,t){return yp.current.useSyncExternalStore(n,e,t)};Bs.useTransition=function(){return yp.current.useTransition()};Bs.version="18.2.0";n8.exports=Bs;var pe=n8.exports;const yt=Xy(pe),ON=Yte({__proto__:null,default:yt},[pe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var une=pe,cne=Symbol.for("react.element"),hne=Symbol.for("react.fragment"),dne=Object.prototype.hasOwnProperty,fne=une.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pne={key:!0,ref:!0,__self:!0,__source:!0};function c8(n,e,t){var r,s={},o=null,l=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)dne.call(e,r)&&!pne.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:cne,type:n,key:o,ref:l,props:s,_owner:fne.current}}HR.Fragment=hne;HR.jsx=c8;HR.jsxs=c8;t8.exports=HR;var Pe=t8.exports,LN={},h8={exports:{}},Um={},d8={exports:{}},f8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(J,re){var ie=J.length;J.push(re);e:for(;0<ie;){var fe=ie-1>>>1,Te=J[fe];if(0<s(Te,re))J[fe]=re,J[ie]=Te,ie=fe;else break e}}function t(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var re=J[0],ie=J.pop();if(ie!==re){J[0]=ie;e:for(var fe=0,Te=J.length,Fe=Te>>>1;fe<Fe;){var Ie=2*(fe+1)-1,qe=J[Ie],Re=Ie+1,Qe=J[Re];if(0>s(qe,ie))Re<Te&&0>s(Qe,qe)?(J[fe]=Qe,J[Re]=ie,fe=Re):(J[fe]=qe,J[Ie]=ie,fe=Ie);else if(Re<Te&&0>s(Qe,ie))J[fe]=Qe,J[Re]=ie,fe=Re;else break e}}return re}function s(J,re){var ie=J.sortIndex-re.sortIndex;return ie!==0?ie:J.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],g=1,y=null,b=3,S=!1,C=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(J){for(var re=t(f);re!==null;){if(re.callback===null)r(f);else if(re.startTime<=J)r(f),re.sortIndex=re.expirationTime,e(h,re);else break;re=t(f)}}function D(J){if(M=!1,B(J),!C)if(t(h)!==null)C=!0,ge(z);else{var re=t(f);re!==null&&we(D,re.startTime-J)}}function z(J,re){C=!1,M&&(M=!1,O(H),H=-1),S=!0;var ie=b;try{for(B(re),y=t(h);y!==null&&(!(y.expirationTime>re)||J&&!Z());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,b=y.priorityLevel;var Te=fe(y.expirationTime<=re);re=n.unstable_now(),typeof Te=="function"?y.callback=Te:y===t(h)&&r(h),B(re)}else r(h);y=t(h)}if(y!==null)var Fe=!0;else{var Ie=t(f);Ie!==null&&we(D,Ie.startTime-re),Fe=!1}return Fe}finally{y=null,b=ie,S=!1}}var U=!1,V=null,H=-1,oe=5,le=-1;function Z(){return!(n.unstable_now()-le<oe)}function q(){if(V!==null){var J=n.unstable_now();le=J;var re=!0;try{re=V(!0,J)}finally{re?he():(U=!1,V=null)}}else U=!1}var he;if(typeof L=="function")he=function(){L(q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ue=ae.port2;ae.port1.onmessage=q,he=function(){ue.postMessage(null)}}else he=function(){A(q,0)};function ge(J){V=J,U||(U=!0,he())}function we(J,re){H=A(function(){J(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){C||S||(C=!0,ge(z))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var re=3;break;default:re=b}var ie=b;b=re;try{return J()}finally{b=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,re){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ie=b;b=J;try{return re()}finally{b=ie}},n.unstable_scheduleCallback=function(J,re,ie){var fe=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?fe+ie:fe):ie=fe,J){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ie+Te,J={id:g++,callback:re,priorityLevel:J,startTime:ie,expirationTime:Te,sortIndex:-1},ie>fe?(J.sortIndex=ie,e(f,J),t(h)===null&&J===t(f)&&(M?(O(H),H=-1):M=!0,we(D,ie-fe))):(J.sortIndex=Te,e(h,J),C||S||(C=!0,ge(z))),J},n.unstable_shouldYield=Z,n.unstable_wrapCallback=function(J){var re=b;return function(){var ie=b;b=re;try{return J.apply(this,arguments)}finally{b=ie}}}})(f8);d8.exports=f8;var mne=d8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p8=pe,Bm=mne;function $n(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m8=new Set,l$={};function iT(n,e){bw(n,e),bw(n+"Capture",e)}function bw(n,e){for(l$[n]=e,n=0;n<e.length;n++)m8.add(e[n])}var mv=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),NN=Object.prototype.hasOwnProperty,gne=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Az={},Iz={};function _ne(n){return NN.call(Iz,n)?!0:NN.call(Az,n)?!1:gne.test(n)?Iz[n]=!0:(Az[n]=!0,!1)}function vne(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function yne(n,e,t,r){if(e===null||typeof e>"u"||vne(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bp(n,e,t,r,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var of={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){of[n]=new bp(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];of[e]=new bp(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){of[n]=new bp(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){of[n]=new bp(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){of[n]=new bp(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){of[n]=new bp(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){of[n]=new bp(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){of[n]=new bp(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){of[n]=new bp(n,5,!1,n.toLowerCase(),null,!1,!1)});var WB=/[\-:]([a-z])/g;function VB(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(WB,VB);of[e]=new bp(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(WB,VB);of[e]=new bp(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(WB,VB);of[e]=new bp(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){of[n]=new bp(n,1,!1,n.toLowerCase(),null,!1,!1)});of.xlinkHref=new bp("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){of[n]=new bp(n,1,!1,n.toLowerCase(),null,!0,!0)});function jB(n,e,t,r){var s=of.hasOwnProperty(e)?of[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yne(e,t,s,r)&&(t=null),r||s===null?_ne(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ev=p8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,XC=Symbol.for("react.element"),FS=Symbol.for("react.portal"),zS=Symbol.for("react.fragment"),YB=Symbol.for("react.strict_mode"),DN=Symbol.for("react.profiler"),g8=Symbol.for("react.provider"),_8=Symbol.for("react.context"),XB=Symbol.for("react.forward_ref"),PN=Symbol.for("react.suspense"),BN=Symbol.for("react.suspense_list"),KB=Symbol.for("react.memo"),gy=Symbol.for("react.lazy"),v8=Symbol.for("react.offscreen"),Rz=Symbol.iterator;function BE(n){return n===null||typeof n!="object"?null:(n=Rz&&n[Rz]||n["@@iterator"],typeof n=="function"?n:null)}var cc=Object.assign,D2;function $x(n){if(D2===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);D2=e&&e[1]||""}return`
`+D2+n}var P2=!1;function B2(n,e){if(!n||P2)return"";P2=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){r=f}n.call(e.prototype)}else{try{throw Error()}catch(f){r=f}n()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),o=r.stack.split(`
`),l=s.length-1,u=o.length-1;1<=l&&0<=u&&s[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(s[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||s[l]!==o[u]){var h=`
`+s[l].replace(" at new "," at ");return n.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",n.displayName)),h}while(1<=l&&0<=u);break}}}finally{P2=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?$x(n):""}function bne(n){switch(n.tag){case 5:return $x(n.type);case 16:return $x("Lazy");case 13:return $x("Suspense");case 19:return $x("SuspenseList");case 0:case 2:case 15:return n=B2(n.type,!1),n;case 11:return n=B2(n.type.render,!1),n;case 1:return n=B2(n.type,!0),n;default:return""}}function FN(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case zS:return"Fragment";case FS:return"Portal";case DN:return"Profiler";case YB:return"StrictMode";case PN:return"Suspense";case BN:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case _8:return(n.displayName||"Context")+".Consumer";case g8:return(n._context.displayName||"Context")+".Provider";case XB:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case KB:return e=n.displayName||null,e!==null?e:FN(n.type)||"Memo";case gy:e=n._payload,n=n._init;try{return FN(n(e))}catch{}}return null}function Tne(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return FN(e);case 8:return e===YB?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fy(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function y8(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Sne(n){var e=y8(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function KC(n){n._valueTracker||(n._valueTracker=Sne(n))}function b8(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=y8(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function kI(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function zN(n,e){var t=e.checked;return cc({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function kz(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Fy(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function T8(n,e){e=e.checked,e!=null&&jB(n,"checked",e,!1)}function UN(n,e){T8(n,e);var t=Fy(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?HN(n,e.type,t):e.hasOwnProperty("defaultValue")&&HN(n,e.type,Fy(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Oz(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function HN(n,e,t){(e!=="number"||kI(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Cx=Array.isArray;function ow(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Fy(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function GN(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error($n(91));return cc({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Lz(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error($n(92));if(Cx(t)){if(1<t.length)throw Error($n(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Fy(t)}}function S8(n,e){var t=Fy(e.value),r=Fy(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Nz(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function w8(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function WN(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?w8(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var JC,E8=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(JC=JC||document.createElement("div"),JC.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=JC.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function u$(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ux={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wne=["Webkit","ms","Moz","O"];Object.keys(Ux).forEach(function(n){wne.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ux[e]=Ux[n]})});function x8(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ux.hasOwnProperty(n)&&Ux[n]?(""+e).trim():e+"px"}function $8(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=x8(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var Ene=cc({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function VN(n,e){if(e){if(Ene[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($n(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($n(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($n(61))}if(e.style!=null&&typeof e.style!="object")throw Error($n(62))}}function jN(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YN=null;function JB(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var XN=null,aw=null,lw=null;function Dz(n){if(n=yC(n)){if(typeof XN!="function")throw Error($n(280));var e=n.stateNode;e&&(e=YR(e),XN(n.stateNode,n.type,e))}}function C8(n){aw?lw?lw.push(n):lw=[n]:aw=n}function M8(){if(aw){var n=aw,e=lw;if(lw=aw=null,Dz(n),e)for(n=0;n<e.length;n++)Dz(e[n])}}function A8(n,e){return n(e)}function I8(){}var F2=!1;function R8(n,e,t){if(F2)return n(e,t);F2=!0;try{return A8(n,e,t)}finally{F2=!1,(aw!==null||lw!==null)&&(I8(),M8())}}function c$(n,e){var t=n.stateNode;if(t===null)return null;var r=YR(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error($n(231,e,typeof t));return t}var KN=!1;if(mv)try{var FE={};Object.defineProperty(FE,"passive",{get:function(){KN=!0}}),window.addEventListener("test",FE,FE),window.removeEventListener("test",FE,FE)}catch{KN=!1}function xne(n,e,t,r,s,o,l,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(g){this.onError(g)}}var Hx=!1,OI=null,LI=!1,JN=null,$ne={onError:function(n){Hx=!0,OI=n}};function Cne(n,e,t,r,s,o,l,u,h){Hx=!1,OI=null,xne.apply($ne,arguments)}function Mne(n,e,t,r,s,o,l,u,h){if(Cne.apply(this,arguments),Hx){if(Hx){var f=OI;Hx=!1,OI=null}else throw Error($n(198));LI||(LI=!0,JN=f)}}function sT(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function k8(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Pz(n){if(sT(n)!==n)throw Error($n(188))}function Ane(n){var e=n.alternate;if(!e){if(e=sT(n),e===null)throw Error($n(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===t)return Pz(s),n;if(o===r)return Pz(s),e;o=o.sibling}throw Error($n(188))}if(t.return!==r.return)t=s,r=o;else{for(var l=!1,u=s.child;u;){if(u===t){l=!0,t=s,r=o;break}if(u===r){l=!0,r=s,t=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===t){l=!0,t=o,r=s;break}if(u===r){l=!0,r=o,t=s;break}u=u.sibling}if(!l)throw Error($n(189))}}if(t.alternate!==r)throw Error($n(190))}if(t.tag!==3)throw Error($n(188));return t.stateNode.current===t?n:e}function O8(n){return n=Ane(n),n!==null?L8(n):null}function L8(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=L8(n);if(e!==null)return e;n=n.sibling}return null}var N8=Bm.unstable_scheduleCallback,Bz=Bm.unstable_cancelCallback,Ine=Bm.unstable_shouldYield,Rne=Bm.unstable_requestPaint,ch=Bm.unstable_now,kne=Bm.unstable_getCurrentPriorityLevel,qB=Bm.unstable_ImmediatePriority,D8=Bm.unstable_UserBlockingPriority,NI=Bm.unstable_NormalPriority,One=Bm.unstable_LowPriority,P8=Bm.unstable_IdlePriority,GR=null,o_=null;function Lne(n){if(o_&&typeof o_.onCommitFiberRoot=="function")try{o_.onCommitFiberRoot(GR,n,void 0,(n.current.flags&128)===128)}catch{}}var i0=Math.clz32?Math.clz32:Pne,Nne=Math.log,Dne=Math.LN2;function Pne(n){return n>>>=0,n===0?32:31-(Nne(n)/Dne|0)|0}var qC=64,QC=4194304;function Mx(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function DI(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,o=n.pingedLanes,l=t&268435455;if(l!==0){var u=l&~s;u!==0?r=Mx(u):(o&=l,o!==0&&(r=Mx(o)))}else l=t&~s,l!==0?r=Mx(l):o!==0&&(r=Mx(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-i0(e),s=1<<t,r|=n[t],e&=~s;return r}function Bne(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fne(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var l=31-i0(o),u=1<<l,h=s[l];h===-1?(!(u&t)||u&r)&&(s[l]=Bne(u,e)):h<=e&&(n.expiredLanes|=u),o&=~u}}function qN(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function B8(){var n=qC;return qC<<=1,!(qC&4194240)&&(qC=64),n}function z2(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function _C(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-i0(e),n[e]=t}function zne(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-i0(t),o=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~o}}function QB(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-i0(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var Ia=0;function F8(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var z8,ZB,U8,H8,G8,QN=!1,ZC=[],My=null,Ay=null,Iy=null,h$=new Map,d$=new Map,yy=[],Une="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fz(n,e){switch(n){case"focusin":case"focusout":My=null;break;case"dragenter":case"dragleave":Ay=null;break;case"mouseover":case"mouseout":Iy=null;break;case"pointerover":case"pointerout":h$.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":d$.delete(e.pointerId)}}function zE(n,e,t,r,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=yC(e),e!==null&&ZB(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function Hne(n,e,t,r,s){switch(e){case"focusin":return My=zE(My,n,e,t,r,s),!0;case"dragenter":return Ay=zE(Ay,n,e,t,r,s),!0;case"mouseover":return Iy=zE(Iy,n,e,t,r,s),!0;case"pointerover":var o=s.pointerId;return h$.set(o,zE(h$.get(o)||null,n,e,t,r,s)),!0;case"gotpointercapture":return o=s.pointerId,d$.set(o,zE(d$.get(o)||null,n,e,t,r,s)),!0}return!1}function W8(n){var e=g1(n.target);if(e!==null){var t=sT(e);if(t!==null){if(e=t.tag,e===13){if(e=k8(t),e!==null){n.blockedOn=e,G8(n.priority,function(){U8(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function KA(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=ZN(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);YN=r,t.target.dispatchEvent(r),YN=null}else return e=yC(t),e!==null&&ZB(e),n.blockedOn=t,!1;e.shift()}return!0}function zz(n,e,t){KA(n)&&t.delete(e)}function Gne(){QN=!1,My!==null&&KA(My)&&(My=null),Ay!==null&&KA(Ay)&&(Ay=null),Iy!==null&&KA(Iy)&&(Iy=null),h$.forEach(zz),d$.forEach(zz)}function UE(n,e){n.blockedOn===e&&(n.blockedOn=null,QN||(QN=!0,Bm.unstable_scheduleCallback(Bm.unstable_NormalPriority,Gne)))}function f$(n){function e(s){return UE(s,n)}if(0<ZC.length){UE(ZC[0],n);for(var t=1;t<ZC.length;t++){var r=ZC[t];r.blockedOn===n&&(r.blockedOn=null)}}for(My!==null&&UE(My,n),Ay!==null&&UE(Ay,n),Iy!==null&&UE(Iy,n),h$.forEach(e),d$.forEach(e),t=0;t<yy.length;t++)r=yy[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<yy.length&&(t=yy[0],t.blockedOn===null);)W8(t),t.blockedOn===null&&yy.shift()}var uw=Ev.ReactCurrentBatchConfig,PI=!0;function Wne(n,e,t,r){var s=Ia,o=uw.transition;uw.transition=null;try{Ia=1,e3(n,e,t,r)}finally{Ia=s,uw.transition=o}}function Vne(n,e,t,r){var s=Ia,o=uw.transition;uw.transition=null;try{Ia=4,e3(n,e,t,r)}finally{Ia=s,uw.transition=o}}function e3(n,e,t,r){if(PI){var s=ZN(n,e,t,r);if(s===null)J2(n,e,r,BI,t),Fz(n,r);else if(Hne(s,n,e,t,r))r.stopPropagation();else if(Fz(n,r),e&4&&-1<Une.indexOf(n)){for(;s!==null;){var o=yC(s);if(o!==null&&z8(o),o=ZN(n,e,t,r),o===null&&J2(n,e,r,BI,t),o===s)break;s=o}s!==null&&r.stopPropagation()}else J2(n,e,r,null,t)}}var BI=null;function ZN(n,e,t,r){if(BI=null,n=JB(r),n=g1(n),n!==null)if(e=sT(n),e===null)n=null;else if(t=e.tag,t===13){if(n=k8(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return BI=n,null}function V8(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kne()){case qB:return 1;case D8:return 4;case NI:case One:return 16;case P8:return 536870912;default:return 16}default:return 16}}var Ty=null,t3=null,JA=null;function j8(){if(JA)return JA;var n,e=t3,t=e.length,r,s="value"in Ty?Ty.value:Ty.textContent,o=s.length;for(n=0;n<t&&e[n]===s[n];n++);var l=t-n;for(r=1;r<=l&&e[t-r]===s[o-r];r++);return JA=s.slice(n,1<r?1-r:void 0)}function qA(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function eM(){return!0}function Uz(){return!1}function Hm(n){function e(t,r,s,o,l){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in n)n.hasOwnProperty(u)&&(t=n[u],this[u]=t?t(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?eM:Uz,this.isPropagationStopped=Uz,this}return cc(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=eM)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=eM)},persist:function(){},isPersistent:eM}),e}var nE={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},n3=Hm(nE),vC=cc({},nE,{view:0,detail:0}),jne=Hm(vC),U2,H2,HE,WR=cc({},vC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:r3,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==HE&&(HE&&n.type==="mousemove"?(U2=n.screenX-HE.screenX,H2=n.screenY-HE.screenY):H2=U2=0,HE=n),U2)},movementY:function(n){return"movementY"in n?n.movementY:H2}}),Hz=Hm(WR),Yne=cc({},WR,{dataTransfer:0}),Xne=Hm(Yne),Kne=cc({},vC,{relatedTarget:0}),G2=Hm(Kne),Jne=cc({},nE,{animationName:0,elapsedTime:0,pseudoElement:0}),qne=Hm(Jne),Qne=cc({},nE,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Zne=Hm(Qne),ere=cc({},nE,{data:0}),Gz=Hm(ere),tre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ire(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=rre[n])?!!e[n]:!1}function r3(){return ire}var sre=cc({},vC,{key:function(n){if(n.key){var e=tre[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=qA(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?nre[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:r3,charCode:function(n){return n.type==="keypress"?qA(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qA(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ore=Hm(sre),are=cc({},WR,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wz=Hm(are),lre=cc({},vC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:r3}),ure=Hm(lre),cre=cc({},nE,{propertyName:0,elapsedTime:0,pseudoElement:0}),hre=Hm(cre),dre=cc({},WR,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),fre=Hm(dre),pre=[9,13,27,32],i3=mv&&"CompositionEvent"in window,Gx=null;mv&&"documentMode"in document&&(Gx=document.documentMode);var mre=mv&&"TextEvent"in window&&!Gx,Y8=mv&&(!i3||Gx&&8<Gx&&11>=Gx),Vz=" ",jz=!1;function X8(n,e){switch(n){case"keyup":return pre.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K8(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var US=!1;function gre(n,e){switch(n){case"compositionend":return K8(e);case"keypress":return e.which!==32?null:(jz=!0,Vz);case"textInput":return n=e.data,n===Vz&&jz?null:n;default:return null}}function _re(n,e){if(US)return n==="compositionend"||!i3&&X8(n,e)?(n=j8(),JA=t3=Ty=null,US=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Y8&&e.locale!=="ko"?null:e.data;default:return null}}var vre={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yz(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!vre[n.type]:e==="textarea"}function J8(n,e,t,r){C8(r),e=FI(e,"onChange"),0<e.length&&(t=new n3("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Wx=null,p$=null;function yre(n){aV(n,0)}function VR(n){var e=WS(n);if(b8(e))return n}function bre(n,e){if(n==="change")return e}var q8=!1;if(mv){var W2;if(mv){var V2="oninput"in document;if(!V2){var Xz=document.createElement("div");Xz.setAttribute("oninput","return;"),V2=typeof Xz.oninput=="function"}W2=V2}else W2=!1;q8=W2&&(!document.documentMode||9<document.documentMode)}function Kz(){Wx&&(Wx.detachEvent("onpropertychange",Q8),p$=Wx=null)}function Q8(n){if(n.propertyName==="value"&&VR(p$)){var e=[];J8(e,p$,n,JB(n)),R8(yre,e)}}function Tre(n,e,t){n==="focusin"?(Kz(),Wx=e,p$=t,Wx.attachEvent("onpropertychange",Q8)):n==="focusout"&&Kz()}function Sre(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return VR(p$)}function wre(n,e){if(n==="click")return VR(e)}function Ere(n,e){if(n==="input"||n==="change")return VR(e)}function xre(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var u0=typeof Object.is=="function"?Object.is:xre;function m$(n,e){if(u0(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!NN.call(e,s)||!u0(n[s],e[s]))return!1}return!0}function Jz(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function qz(n,e){var t=Jz(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Jz(t)}}function Z8(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Z8(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function eV(){for(var n=window,e=kI();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=kI(n.document)}return e}function s3(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function $re(n){var e=eV(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Z8(t.ownerDocument.documentElement,t)){if(r!==null&&s3(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!n.extend&&o>r&&(s=r,r=o,o=s),s=qz(t,o);var l=qz(t,r);s&&l&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==l.node||n.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>r?(n.addRange(e),n.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Cre=mv&&"documentMode"in document&&11>=document.documentMode,HS=null,eD=null,Vx=null,tD=!1;function Qz(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;tD||HS==null||HS!==kI(r)||(r=HS,"selectionStart"in r&&s3(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vx&&m$(Vx,r)||(Vx=r,r=FI(eD,"onSelect"),0<r.length&&(e=new n3("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=HS)))}function tM(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var GS={animationend:tM("Animation","AnimationEnd"),animationiteration:tM("Animation","AnimationIteration"),animationstart:tM("Animation","AnimationStart"),transitionend:tM("Transition","TransitionEnd")},j2={},tV={};mv&&(tV=document.createElement("div").style,"AnimationEvent"in window||(delete GS.animationend.animation,delete GS.animationiteration.animation,delete GS.animationstart.animation),"TransitionEvent"in window||delete GS.transitionend.transition);function jR(n){if(j2[n])return j2[n];if(!GS[n])return n;var e=GS[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in tV)return j2[n]=e[t];return n}var nV=jR("animationend"),rV=jR("animationiteration"),iV=jR("animationstart"),sV=jR("transitionend"),oV=new Map,Zz="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ky(n,e){oV.set(n,e),iT(e,[n])}for(var Y2=0;Y2<Zz.length;Y2++){var X2=Zz[Y2],Mre=X2.toLowerCase(),Are=X2[0].toUpperCase()+X2.slice(1);Ky(Mre,"on"+Are)}Ky(nV,"onAnimationEnd");Ky(rV,"onAnimationIteration");Ky(iV,"onAnimationStart");Ky("dblclick","onDoubleClick");Ky("focusin","onFocus");Ky("focusout","onBlur");Ky(sV,"onTransitionEnd");bw("onMouseEnter",["mouseout","mouseover"]);bw("onMouseLeave",["mouseout","mouseover"]);bw("onPointerEnter",["pointerout","pointerover"]);bw("onPointerLeave",["pointerout","pointerover"]);iT("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));iT("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));iT("onBeforeInput",["compositionend","keypress","textInput","paste"]);iT("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));iT("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));iT("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ax="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ire=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ax));function eU(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Mne(r,e,void 0,n),n.currentTarget=null}function aV(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var l=r.length-1;0<=l;l--){var u=r[l],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&s.isPropagationStopped())break e;eU(s,u,f),o=h}else for(l=0;l<r.length;l++){if(u=r[l],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&s.isPropagationStopped())break e;eU(s,u,f),o=h}}}if(LI)throw n=JN,LI=!1,JN=null,n}function fu(n,e){var t=e[oD];t===void 0&&(t=e[oD]=new Set);var r=n+"__bubble";t.has(r)||(lV(e,n,2,!1),t.add(r))}function K2(n,e,t){var r=0;e&&(r|=4),lV(t,n,r,e)}var nM="_reactListening"+Math.random().toString(36).slice(2);function g$(n){if(!n[nM]){n[nM]=!0,m8.forEach(function(t){t!=="selectionchange"&&(Ire.has(t)||K2(t,!1,n),K2(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[nM]||(e[nM]=!0,K2("selectionchange",!1,e))}}function lV(n,e,t,r){switch(V8(e)){case 1:var s=Wne;break;case 4:s=Vne;break;default:s=e3}t=s.bind(null,e,t,n),s=void 0,!KN||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function J2(n,e,t,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;l=l.return}for(;u!==null;){if(l=g1(u),l===null)return;if(h=l.tag,h===5||h===6){r=o=l;continue e}u=u.parentNode}}r=r.return}R8(function(){var f=o,g=JB(t),y=[];e:{var b=oV.get(n);if(b!==void 0){var S=n3,C=n;switch(n){case"keypress":if(qA(t)===0)break e;case"keydown":case"keyup":S=ore;break;case"focusin":C="focus",S=G2;break;case"focusout":C="blur",S=G2;break;case"beforeblur":case"afterblur":S=G2;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Hz;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Xne;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=ure;break;case nV:case rV:case iV:S=qne;break;case sV:S=hre;break;case"scroll":S=jne;break;case"wheel":S=fre;break;case"copy":case"cut":case"paste":S=Zne;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Wz}var M=(e&4)!==0,A=!M&&n==="scroll",O=M?b!==null?b+"Capture":null:b;M=[];for(var L=f,B;L!==null;){B=L;var D=B.stateNode;if(B.tag===5&&D!==null&&(B=D,O!==null&&(D=c$(L,O),D!=null&&M.push(_$(L,D,B)))),A)break;L=L.return}0<M.length&&(b=new S(b,C,null,t,g),y.push({event:b,listeners:M}))}}if(!(e&7)){e:{if(b=n==="mouseover"||n==="pointerover",S=n==="mouseout"||n==="pointerout",b&&t!==YN&&(C=t.relatedTarget||t.fromElement)&&(g1(C)||C[gv]))break e;if((S||b)&&(b=g.window===g?g:(b=g.ownerDocument)?b.defaultView||b.parentWindow:window,S?(C=t.relatedTarget||t.toElement,S=f,C=C?g1(C):null,C!==null&&(A=sT(C),C!==A||C.tag!==5&&C.tag!==6)&&(C=null)):(S=null,C=f),S!==C)){if(M=Hz,D="onMouseLeave",O="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(M=Wz,D="onPointerLeave",O="onPointerEnter",L="pointer"),A=S==null?b:WS(S),B=C==null?b:WS(C),b=new M(D,L+"leave",S,t,g),b.target=A,b.relatedTarget=B,D=null,g1(g)===f&&(M=new M(O,L+"enter",C,t,g),M.target=B,M.relatedTarget=A,D=M),A=D,S&&C)t:{for(M=S,O=C,L=0,B=M;B;B=WT(B))L++;for(B=0,D=O;D;D=WT(D))B++;for(;0<L-B;)M=WT(M),L--;for(;0<B-L;)O=WT(O),B--;for(;L--;){if(M===O||O!==null&&M===O.alternate)break t;M=WT(M),O=WT(O)}M=null}else M=null;S!==null&&tU(y,b,S,M,!1),C!==null&&A!==null&&tU(y,A,C,M,!0)}}e:{if(b=f?WS(f):window,S=b.nodeName&&b.nodeName.toLowerCase(),S==="select"||S==="input"&&b.type==="file")var z=bre;else if(Yz(b))if(q8)z=Ere;else{z=Sre;var U=Tre}else(S=b.nodeName)&&S.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(z=wre);if(z&&(z=z(n,f))){J8(y,z,t,g);break e}U&&U(n,b,f),n==="focusout"&&(U=b._wrapperState)&&U.controlled&&b.type==="number"&&HN(b,"number",b.value)}switch(U=f?WS(f):window,n){case"focusin":(Yz(U)||U.contentEditable==="true")&&(HS=U,eD=f,Vx=null);break;case"focusout":Vx=eD=HS=null;break;case"mousedown":tD=!0;break;case"contextmenu":case"mouseup":case"dragend":tD=!1,Qz(y,t,g);break;case"selectionchange":if(Cre)break;case"keydown":case"keyup":Qz(y,t,g)}var V;if(i3)e:{switch(n){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else US?X8(n,t)&&(H="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(H="onCompositionStart");H&&(Y8&&t.locale!=="ko"&&(US||H!=="onCompositionStart"?H==="onCompositionEnd"&&US&&(V=j8()):(Ty=g,t3="value"in Ty?Ty.value:Ty.textContent,US=!0)),U=FI(f,H),0<U.length&&(H=new Gz(H,n,null,t,g),y.push({event:H,listeners:U}),V?H.data=V:(V=K8(t),V!==null&&(H.data=V)))),(V=mre?gre(n,t):_re(n,t))&&(f=FI(f,"onBeforeInput"),0<f.length&&(g=new Gz("onBeforeInput","beforeinput",null,t,g),y.push({event:g,listeners:f}),g.data=V))}aV(y,e)})}function _$(n,e,t){return{instance:n,listener:e,currentTarget:t}}function FI(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=c$(n,t),o!=null&&r.unshift(_$(n,o,s)),o=c$(n,e),o!=null&&r.push(_$(n,o,s))),n=n.return}return r}function WT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function tU(n,e,t,r,s){for(var o=e._reactName,l=[];t!==null&&t!==r;){var u=t,h=u.alternate,f=u.stateNode;if(h!==null&&h===r)break;u.tag===5&&f!==null&&(u=f,s?(h=c$(t,o),h!=null&&l.unshift(_$(t,h,u))):s||(h=c$(t,o),h!=null&&l.push(_$(t,h,u)))),t=t.return}l.length!==0&&n.push({event:e,listeners:l})}var Rre=/\r\n?/g,kre=/\u0000|\uFFFD/g;function nU(n){return(typeof n=="string"?n:""+n).replace(Rre,`
`).replace(kre,"")}function rM(n,e,t){if(e=nU(e),nU(n)!==e&&t)throw Error($n(425))}function zI(){}var nD=null,rD=null;function iD(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sD=typeof setTimeout=="function"?setTimeout:void 0,Ore=typeof clearTimeout=="function"?clearTimeout:void 0,rU=typeof Promise=="function"?Promise:void 0,Lre=typeof queueMicrotask=="function"?queueMicrotask:typeof rU<"u"?function(n){return rU.resolve(null).then(n).catch(Nre)}:sD;function Nre(n){setTimeout(function(){throw n})}function q2(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),f$(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);f$(e)}function Ry(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function iU(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var rE=Math.random().toString(36).slice(2),e_="__reactFiber$"+rE,v$="__reactProps$"+rE,gv="__reactContainer$"+rE,oD="__reactEvents$"+rE,Dre="__reactListeners$"+rE,Pre="__reactHandles$"+rE;function g1(n){var e=n[e_];if(e)return e;for(var t=n.parentNode;t;){if(e=t[gv]||t[e_]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=iU(n);n!==null;){if(t=n[e_])return t;n=iU(n)}return e}n=t,t=n.parentNode}return null}function yC(n){return n=n[e_]||n[gv],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function WS(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error($n(33))}function YR(n){return n[v$]||null}var aD=[],VS=-1;function Jy(n){return{current:n}}function mu(n){0>VS||(n.current=aD[VS],aD[VS]=null,VS--)}function jl(n,e){VS++,aD[VS]=n.current,n.current=e}var zy={},Df=Jy(zy),Yp=Jy(!1),W1=zy;function Tw(n,e){var t=n.type.contextTypes;if(!t)return zy;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in t)s[o]=e[o];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Xp(n){return n=n.childContextTypes,n!=null}function UI(){mu(Yp),mu(Df)}function sU(n,e,t){if(Df.current!==zy)throw Error($n(168));jl(Df,e),jl(Yp,t)}function uV(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($n(108,Tne(n)||"Unknown",s));return cc({},t,r)}function HI(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||zy,W1=Df.current,jl(Df,n),jl(Yp,Yp.current),!0}function oU(n,e,t){var r=n.stateNode;if(!r)throw Error($n(169));t?(n=uV(n,e,W1),r.__reactInternalMemoizedMergedChildContext=n,mu(Yp),mu(Df),jl(Df,n)):mu(Yp),jl(Yp,t)}var iv=null,XR=!1,Q2=!1;function cV(n){iv===null?iv=[n]:iv.push(n)}function Bre(n){XR=!0,cV(n)}function qy(){if(!Q2&&iv!==null){Q2=!0;var n=0,e=Ia;try{var t=iv;for(Ia=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}iv=null,XR=!1}catch(s){throw iv!==null&&(iv=iv.slice(n+1)),N8(qB,qy),s}finally{Ia=e,Q2=!1}}return null}var jS=[],YS=0,GI=null,WI=0,pg=[],mg=0,V1=null,uv=1,cv="";function i1(n,e){jS[YS++]=WI,jS[YS++]=GI,GI=n,WI=e}function hV(n,e,t){pg[mg++]=uv,pg[mg++]=cv,pg[mg++]=V1,V1=n;var r=uv;n=cv;var s=32-i0(r)-1;r&=~(1<<s),t+=1;var o=32-i0(e)+s;if(30<o){var l=s-s%5;o=(r&(1<<l)-1).toString(32),r>>=l,s-=l,uv=1<<32-i0(e)+s|t<<s|r,cv=o+n}else uv=1<<o|t<<s|r,cv=n}function o3(n){n.return!==null&&(i1(n,1),hV(n,1,0))}function a3(n){for(;n===GI;)GI=jS[--YS],jS[YS]=null,WI=jS[--YS],jS[YS]=null;for(;n===V1;)V1=pg[--mg],pg[mg]=null,cv=pg[--mg],pg[mg]=null,uv=pg[--mg],pg[mg]=null}var km=null,Im=null,Fu=!1,qg=null;function dV(n,e){var t=vg(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function aU(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,km=n,Im=Ry(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,km=n,Im=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=V1!==null?{id:uv,overflow:cv}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=vg(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,km=n,Im=null,!0):!1;default:return!1}}function lD(n){return(n.mode&1)!==0&&(n.flags&128)===0}function uD(n){if(Fu){var e=Im;if(e){var t=e;if(!aU(n,e)){if(lD(n))throw Error($n(418));e=Ry(t.nextSibling);var r=km;e&&aU(n,e)?dV(r,t):(n.flags=n.flags&-4097|2,Fu=!1,km=n)}}else{if(lD(n))throw Error($n(418));n.flags=n.flags&-4097|2,Fu=!1,km=n}}}function lU(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;km=n}function iM(n){if(n!==km)return!1;if(!Fu)return lU(n),Fu=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!iD(n.type,n.memoizedProps)),e&&(e=Im)){if(lD(n))throw fV(),Error($n(418));for(;e;)dV(n,e),e=Ry(e.nextSibling)}if(lU(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error($n(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Im=Ry(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Im=null}}else Im=km?Ry(n.stateNode.nextSibling):null;return!0}function fV(){for(var n=Im;n;)n=Ry(n.nextSibling)}function Sw(){Im=km=null,Fu=!1}function l3(n){qg===null?qg=[n]:qg.push(n)}var Fre=Ev.ReactCurrentBatchConfig;function Kg(n,e){if(n&&n.defaultProps){e=cc({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var VI=Jy(null),jI=null,XS=null,u3=null;function c3(){u3=XS=jI=null}function h3(n){var e=VI.current;mu(VI),n._currentValue=e}function cD(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function cw(n,e){jI=n,u3=XS=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Vp=!0),n.firstContext=null)}function Tg(n){var e=n._currentValue;if(u3!==n)if(n={context:n,memoizedValue:e,next:null},XS===null){if(jI===null)throw Error($n(308));XS=n,jI.dependencies={lanes:0,firstContext:n}}else XS=XS.next=n;return e}var _1=null;function d3(n){_1===null?_1=[n]:_1.push(n)}function pV(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,d3(e)):(t.next=s.next,s.next=t),e.interleaved=t,_v(n,r)}function _v(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var _y=!1;function f3(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mV(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function dv(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ky(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,wo&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,_v(n,t)}return s=r.interleaved,s===null?(e.next=e,d3(r)):(e.next=s.next,s.next=e),r.interleaved=e,_v(n,t)}function QA(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,QB(n,t)}}function uU(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?s=o=l:o=o.next=l,t=t.next}while(t!==null);o===null?s=o=e:o=o.next=e}else s=o=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function YI(n,e,t,r){var s=n.updateQueue;_y=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var h=u,f=h.next;h.next=null,l===null?o=f:l.next=f,l=h;var g=n.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==l&&(u===null?g.firstBaseUpdate=f:u.next=f,g.lastBaseUpdate=h))}if(o!==null){var y=s.baseState;l=0,g=f=h=null,u=o;do{var b=u.lane,S=u.eventTime;if((r&b)===b){g!==null&&(g=g.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=n,M=u;switch(b=e,S=t,M.tag){case 1:if(C=M.payload,typeof C=="function"){y=C.call(S,y,b);break e}y=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=M.payload,b=typeof C=="function"?C.call(S,y,b):C,b==null)break e;y=cc({},y,b);break e;case 2:_y=!0}}u.callback!==null&&u.lane!==0&&(n.flags|=64,b=s.effects,b===null?s.effects=[u]:b.push(u))}else S={eventTime:S,lane:b,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(f=g=S,h=y):g=g.next=S,l|=b;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;b=u,u=b.next,b.next=null,s.lastBaseUpdate=b,s.shared.pending=null}}while(!0);if(g===null&&(h=y),s.baseState=h,s.firstBaseUpdate=f,s.lastBaseUpdate=g,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Y1|=l,n.lanes=l,n.memoizedState=y}}function cU(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error($n(191,s));s.call(r)}}}var gV=new p8.Component().refs;function hD(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:cc({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var KR={isMounted:function(n){return(n=n._reactInternals)?sT(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=dp(),s=Ly(n),o=dv(r,s);o.payload=e,t!=null&&(o.callback=t),e=ky(n,o,s),e!==null&&(s0(e,n,s,r),QA(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=dp(),s=Ly(n),o=dv(r,s);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=ky(n,o,s),e!==null&&(s0(e,n,s,r),QA(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=dp(),r=Ly(n),s=dv(t,r);s.tag=2,e!=null&&(s.callback=e),e=ky(n,s,r),e!==null&&(s0(e,n,r,t),QA(e,n,r))}};function hU(n,e,t,r,s,o,l){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,o,l):e.prototype&&e.prototype.isPureReactComponent?!m$(t,r)||!m$(s,o):!0}function _V(n,e,t){var r=!1,s=zy,o=e.contextType;return typeof o=="object"&&o!==null?o=Tg(o):(s=Xp(e)?W1:Df.current,r=e.contextTypes,o=(r=r!=null)?Tw(n,s):zy),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=KR,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function dU(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&KR.enqueueReplaceState(e,e.state,null)}function dD(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs=gV,f3(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Tg(o):(o=Xp(e)?W1:Df.current,s.context=Tw(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(hD(n,e,o,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&KR.enqueueReplaceState(s,s.state,null),YI(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function GE(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error($n(309));var r=t.stateNode}if(!r)throw Error($n(147,n));var s=r,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var u=s.refs;u===gV&&(u=s.refs={}),l===null?delete u[o]:u[o]=l},e._stringRef=o,e)}if(typeof n!="string")throw Error($n(284));if(!t._owner)throw Error($n(290,n))}return n}function sM(n,e){throw n=Object.prototype.toString.call(e),Error($n(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function fU(n){var e=n._init;return e(n._payload)}function vV(n){function e(O,L){if(n){var B=O.deletions;B===null?(O.deletions=[L],O.flags|=16):B.push(L)}}function t(O,L){if(!n)return null;for(;L!==null;)e(O,L),L=L.sibling;return null}function r(O,L){for(O=new Map;L!==null;)L.key!==null?O.set(L.key,L):O.set(L.index,L),L=L.sibling;return O}function s(O,L){return O=Ny(O,L),O.index=0,O.sibling=null,O}function o(O,L,B){return O.index=B,n?(B=O.alternate,B!==null?(B=B.index,B<L?(O.flags|=2,L):B):(O.flags|=2,L)):(O.flags|=1048576,L)}function l(O){return n&&O.alternate===null&&(O.flags|=2),O}function u(O,L,B,D){return L===null||L.tag!==6?(L=sO(B,O.mode,D),L.return=O,L):(L=s(L,B),L.return=O,L)}function h(O,L,B,D){var z=B.type;return z===zS?g(O,L,B.props.children,D,B.key):L!==null&&(L.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===gy&&fU(z)===L.type)?(D=s(L,B.props),D.ref=GE(O,L,B),D.return=O,D):(D=iI(B.type,B.key,B.props,null,O.mode,D),D.ref=GE(O,L,B),D.return=O,D)}function f(O,L,B,D){return L===null||L.tag!==4||L.stateNode.containerInfo!==B.containerInfo||L.stateNode.implementation!==B.implementation?(L=oO(B,O.mode,D),L.return=O,L):(L=s(L,B.children||[]),L.return=O,L)}function g(O,L,B,D,z){return L===null||L.tag!==7?(L=R1(B,O.mode,D,z),L.return=O,L):(L=s(L,B),L.return=O,L)}function y(O,L,B){if(typeof L=="string"&&L!==""||typeof L=="number")return L=sO(""+L,O.mode,B),L.return=O,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case XC:return B=iI(L.type,L.key,L.props,null,O.mode,B),B.ref=GE(O,null,L),B.return=O,B;case FS:return L=oO(L,O.mode,B),L.return=O,L;case gy:var D=L._init;return y(O,D(L._payload),B)}if(Cx(L)||BE(L))return L=R1(L,O.mode,B,null),L.return=O,L;sM(O,L)}return null}function b(O,L,B,D){var z=L!==null?L.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return z!==null?null:u(O,L,""+B,D);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case XC:return B.key===z?h(O,L,B,D):null;case FS:return B.key===z?f(O,L,B,D):null;case gy:return z=B._init,b(O,L,z(B._payload),D)}if(Cx(B)||BE(B))return z!==null?null:g(O,L,B,D,null);sM(O,B)}return null}function S(O,L,B,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return O=O.get(B)||null,u(L,O,""+D,z);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case XC:return O=O.get(D.key===null?B:D.key)||null,h(L,O,D,z);case FS:return O=O.get(D.key===null?B:D.key)||null,f(L,O,D,z);case gy:var U=D._init;return S(O,L,B,U(D._payload),z)}if(Cx(D)||BE(D))return O=O.get(B)||null,g(L,O,D,z,null);sM(L,D)}return null}function C(O,L,B,D){for(var z=null,U=null,V=L,H=L=0,oe=null;V!==null&&H<B.length;H++){V.index>H?(oe=V,V=null):oe=V.sibling;var le=b(O,V,B[H],D);if(le===null){V===null&&(V=oe);break}n&&V&&le.alternate===null&&e(O,V),L=o(le,L,H),U===null?z=le:U.sibling=le,U=le,V=oe}if(H===B.length)return t(O,V),Fu&&i1(O,H),z;if(V===null){for(;H<B.length;H++)V=y(O,B[H],D),V!==null&&(L=o(V,L,H),U===null?z=V:U.sibling=V,U=V);return Fu&&i1(O,H),z}for(V=r(O,V);H<B.length;H++)oe=S(V,O,H,B[H],D),oe!==null&&(n&&oe.alternate!==null&&V.delete(oe.key===null?H:oe.key),L=o(oe,L,H),U===null?z=oe:U.sibling=oe,U=oe);return n&&V.forEach(function(Z){return e(O,Z)}),Fu&&i1(O,H),z}function M(O,L,B,D){var z=BE(B);if(typeof z!="function")throw Error($n(150));if(B=z.call(B),B==null)throw Error($n(151));for(var U=z=null,V=L,H=L=0,oe=null,le=B.next();V!==null&&!le.done;H++,le=B.next()){V.index>H?(oe=V,V=null):oe=V.sibling;var Z=b(O,V,le.value,D);if(Z===null){V===null&&(V=oe);break}n&&V&&Z.alternate===null&&e(O,V),L=o(Z,L,H),U===null?z=Z:U.sibling=Z,U=Z,V=oe}if(le.done)return t(O,V),Fu&&i1(O,H),z;if(V===null){for(;!le.done;H++,le=B.next())le=y(O,le.value,D),le!==null&&(L=o(le,L,H),U===null?z=le:U.sibling=le,U=le);return Fu&&i1(O,H),z}for(V=r(O,V);!le.done;H++,le=B.next())le=S(V,O,H,le.value,D),le!==null&&(n&&le.alternate!==null&&V.delete(le.key===null?H:le.key),L=o(le,L,H),U===null?z=le:U.sibling=le,U=le);return n&&V.forEach(function(q){return e(O,q)}),Fu&&i1(O,H),z}function A(O,L,B,D){if(typeof B=="object"&&B!==null&&B.type===zS&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case XC:e:{for(var z=B.key,U=L;U!==null;){if(U.key===z){if(z=B.type,z===zS){if(U.tag===7){t(O,U.sibling),L=s(U,B.props.children),L.return=O,O=L;break e}}else if(U.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===gy&&fU(z)===U.type){t(O,U.sibling),L=s(U,B.props),L.ref=GE(O,U,B),L.return=O,O=L;break e}t(O,U);break}else e(O,U);U=U.sibling}B.type===zS?(L=R1(B.props.children,O.mode,D,B.key),L.return=O,O=L):(D=iI(B.type,B.key,B.props,null,O.mode,D),D.ref=GE(O,L,B),D.return=O,O=D)}return l(O);case FS:e:{for(U=B.key;L!==null;){if(L.key===U)if(L.tag===4&&L.stateNode.containerInfo===B.containerInfo&&L.stateNode.implementation===B.implementation){t(O,L.sibling),L=s(L,B.children||[]),L.return=O,O=L;break e}else{t(O,L);break}else e(O,L);L=L.sibling}L=oO(B,O.mode,D),L.return=O,O=L}return l(O);case gy:return U=B._init,A(O,L,U(B._payload),D)}if(Cx(B))return C(O,L,B,D);if(BE(B))return M(O,L,B,D);sM(O,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,L!==null&&L.tag===6?(t(O,L.sibling),L=s(L,B),L.return=O,O=L):(t(O,L),L=sO(B,O.mode,D),L.return=O,O=L),l(O)):t(O,L)}return A}var ww=vV(!0),yV=vV(!1),bC={},a_=Jy(bC),y$=Jy(bC),b$=Jy(bC);function v1(n){if(n===bC)throw Error($n(174));return n}function p3(n,e){switch(jl(b$,e),jl(y$,n),jl(a_,bC),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:WN(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=WN(e,n)}mu(a_),jl(a_,e)}function Ew(){mu(a_),mu(y$),mu(b$)}function bV(n){v1(b$.current);var e=v1(a_.current),t=WN(e,n.type);e!==t&&(jl(y$,n),jl(a_,t))}function m3(n){y$.current===n&&(mu(a_),mu(y$))}var sc=Jy(0);function XI(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Z2=[];function g3(){for(var n=0;n<Z2.length;n++)Z2[n]._workInProgressVersionPrimary=null;Z2.length=0}var ZA=Ev.ReactCurrentDispatcher,eO=Ev.ReactCurrentBatchConfig,j1=0,lc=null,ld=null,wd=null,KI=!1,jx=!1,T$=0,zre=0;function wf(){throw Error($n(321))}function _3(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!u0(n[t],e[t]))return!1;return!0}function v3(n,e,t,r,s,o){if(j1=o,lc=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ZA.current=n===null||n.memoizedState===null?Wre:Vre,n=t(r,s),jx){o=0;do{if(jx=!1,T$=0,25<=o)throw Error($n(301));o+=1,wd=ld=null,e.updateQueue=null,ZA.current=jre,n=t(r,s)}while(jx)}if(ZA.current=JI,e=ld!==null&&ld.next!==null,j1=0,wd=ld=lc=null,KI=!1,e)throw Error($n(300));return n}function y3(){var n=T$!==0;return T$=0,n}function K0(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wd===null?lc.memoizedState=wd=n:wd=wd.next=n,wd}function Sg(){if(ld===null){var n=lc.alternate;n=n!==null?n.memoizedState:null}else n=ld.next;var e=wd===null?lc.memoizedState:wd.next;if(e!==null)wd=e,ld=n;else{if(n===null)throw Error($n(310));ld=n,n={memoizedState:ld.memoizedState,baseState:ld.baseState,baseQueue:ld.baseQueue,queue:ld.queue,next:null},wd===null?lc.memoizedState=wd=n:wd=wd.next=n}return wd}function S$(n,e){return typeof e=="function"?e(n):e}function tO(n){var e=Sg(),t=e.queue;if(t===null)throw Error($n(311));t.lastRenderedReducer=n;var r=ld,s=r.baseQueue,o=t.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}r.baseQueue=s=o,t.pending=null}if(s!==null){o=s.next,r=r.baseState;var u=l=null,h=null,f=o;do{var g=f.lane;if((j1&g)===g)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:n(r,f.action);else{var y={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=y,l=r):h=h.next=y,lc.lanes|=g,Y1|=g}f=f.next}while(f!==null&&f!==o);h===null?l=r:h.next=u,u0(r,e.memoizedState)||(Vp=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=h,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do o=s.lane,lc.lanes|=o,Y1|=o,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function nO(n){var e=Sg(),t=e.queue;if(t===null)throw Error($n(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,o=e.memoizedState;if(s!==null){t.pending=null;var l=s=s.next;do o=n(o,l.action),l=l.next;while(l!==s);u0(o,e.memoizedState)||(Vp=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,r]}function TV(){}function SV(n,e){var t=lc,r=Sg(),s=e(),o=!u0(r.memoizedState,s);if(o&&(r.memoizedState=s,Vp=!0),r=r.queue,b3(xV.bind(null,t,r,n),[n]),r.getSnapshot!==e||o||wd!==null&&wd.memoizedState.tag&1){if(t.flags|=2048,w$(9,EV.bind(null,t,r,s,e),void 0,null),Ed===null)throw Error($n(349));j1&30||wV(t,e,s)}return s}function wV(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=lc.updateQueue,e===null?(e={lastEffect:null,stores:null},lc.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function EV(n,e,t,r){e.value=t,e.getSnapshot=r,$V(e)&&CV(n)}function xV(n,e,t){return t(function(){$V(e)&&CV(n)})}function $V(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!u0(n,t)}catch{return!0}}function CV(n){var e=_v(n,1);e!==null&&s0(e,n,1,-1)}function pU(n){var e=K0();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:S$,lastRenderedState:n},e.queue=n,n=n.dispatch=Gre.bind(null,lc,n),[e.memoizedState,n]}function w$(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=lc.updateQueue,e===null?(e={lastEffect:null,stores:null},lc.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function MV(){return Sg().memoizedState}function eI(n,e,t,r){var s=K0();lc.flags|=n,s.memoizedState=w$(1|e,t,void 0,r===void 0?null:r)}function JR(n,e,t,r){var s=Sg();r=r===void 0?null:r;var o=void 0;if(ld!==null){var l=ld.memoizedState;if(o=l.destroy,r!==null&&_3(r,l.deps)){s.memoizedState=w$(e,t,o,r);return}}lc.flags|=n,s.memoizedState=w$(1|e,t,o,r)}function mU(n,e){return eI(8390656,8,n,e)}function b3(n,e){return JR(2048,8,n,e)}function AV(n,e){return JR(4,2,n,e)}function IV(n,e){return JR(4,4,n,e)}function RV(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function kV(n,e,t){return t=t!=null?t.concat([n]):null,JR(4,4,RV.bind(null,e,n),t)}function T3(){}function OV(n,e){var t=Sg();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&_3(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function LV(n,e){var t=Sg();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&_3(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function NV(n,e,t){return j1&21?(u0(t,e)||(t=B8(),lc.lanes|=t,Y1|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Vp=!0),n.memoizedState=t)}function Ure(n,e){var t=Ia;Ia=t!==0&&4>t?t:4,n(!0);var r=eO.transition;eO.transition={};try{n(!1),e()}finally{Ia=t,eO.transition=r}}function DV(){return Sg().memoizedState}function Hre(n,e,t){var r=Ly(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},PV(n))BV(e,t);else if(t=pV(n,e,t,r),t!==null){var s=dp();s0(t,n,r,s),FV(t,e,r)}}function Gre(n,e,t){var r=Ly(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(PV(n))BV(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,u=o(l,t);if(s.hasEagerState=!0,s.eagerState=u,u0(u,l)){var h=e.interleaved;h===null?(s.next=s,d3(e)):(s.next=h.next,h.next=s),e.interleaved=s;return}}catch{}finally{}t=pV(n,e,s,r),t!==null&&(s=dp(),s0(t,n,r,s),FV(t,e,r))}}function PV(n){var e=n.alternate;return n===lc||e!==null&&e===lc}function BV(n,e){jx=KI=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function FV(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,QB(n,t)}}var JI={readContext:Tg,useCallback:wf,useContext:wf,useEffect:wf,useImperativeHandle:wf,useInsertionEffect:wf,useLayoutEffect:wf,useMemo:wf,useReducer:wf,useRef:wf,useState:wf,useDebugValue:wf,useDeferredValue:wf,useTransition:wf,useMutableSource:wf,useSyncExternalStore:wf,useId:wf,unstable_isNewReconciler:!1},Wre={readContext:Tg,useCallback:function(n,e){return K0().memoizedState=[n,e===void 0?null:e],n},useContext:Tg,useEffect:mU,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,eI(4194308,4,RV.bind(null,e,n),t)},useLayoutEffect:function(n,e){return eI(4194308,4,n,e)},useInsertionEffect:function(n,e){return eI(4,2,n,e)},useMemo:function(n,e){var t=K0();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=K0();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Hre.bind(null,lc,n),[r.memoizedState,n]},useRef:function(n){var e=K0();return n={current:n},e.memoizedState=n},useState:pU,useDebugValue:T3,useDeferredValue:function(n){return K0().memoizedState=n},useTransition:function(){var n=pU(!1),e=n[0];return n=Ure.bind(null,n[1]),K0().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=lc,s=K0();if(Fu){if(t===void 0)throw Error($n(407));t=t()}else{if(t=e(),Ed===null)throw Error($n(349));j1&30||wV(r,e,t)}s.memoizedState=t;var o={value:t,getSnapshot:e};return s.queue=o,mU(xV.bind(null,r,o,n),[n]),r.flags|=2048,w$(9,EV.bind(null,r,o,t,e),void 0,null),t},useId:function(){var n=K0(),e=Ed.identifierPrefix;if(Fu){var t=cv,r=uv;t=(r&~(1<<32-i0(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=T$++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=zre++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Vre={readContext:Tg,useCallback:OV,useContext:Tg,useEffect:b3,useImperativeHandle:kV,useInsertionEffect:AV,useLayoutEffect:IV,useMemo:LV,useReducer:tO,useRef:MV,useState:function(){return tO(S$)},useDebugValue:T3,useDeferredValue:function(n){var e=Sg();return NV(e,ld.memoizedState,n)},useTransition:function(){var n=tO(S$)[0],e=Sg().memoizedState;return[n,e]},useMutableSource:TV,useSyncExternalStore:SV,useId:DV,unstable_isNewReconciler:!1},jre={readContext:Tg,useCallback:OV,useContext:Tg,useEffect:b3,useImperativeHandle:kV,useInsertionEffect:AV,useLayoutEffect:IV,useMemo:LV,useReducer:nO,useRef:MV,useState:function(){return nO(S$)},useDebugValue:T3,useDeferredValue:function(n){var e=Sg();return ld===null?e.memoizedState=n:NV(e,ld.memoizedState,n)},useTransition:function(){var n=nO(S$)[0],e=Sg().memoizedState;return[n,e]},useMutableSource:TV,useSyncExternalStore:SV,useId:DV,unstable_isNewReconciler:!1};function xw(n,e){try{var t="",r=e;do t+=bne(r),r=r.return;while(r);var s=t}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function rO(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function fD(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Yre=typeof WeakMap=="function"?WeakMap:Map;function zV(n,e,t){t=dv(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){QI||(QI=!0,wD=r),fD(n,e)},t}function UV(n,e,t){t=dv(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){fD(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){fD(n,e),typeof r!="function"&&(Oy===null?Oy=new Set([this]):Oy.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),t}function gU(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Yre;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=aie.bind(null,n,e,t),e.then(n,n))}function _U(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function vU(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=dv(-1,1),e.tag=2,ky(t,e,1))),t.lanes|=1),n)}var Xre=Ev.ReactCurrentOwner,Vp=!1;function ip(n,e,t,r){e.child=n===null?yV(e,null,t,r):ww(e,n.child,t,r)}function yU(n,e,t,r,s){t=t.render;var o=e.ref;return cw(e,s),r=v3(n,e,t,r,o,s),t=y3(),n!==null&&!Vp?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,vv(n,e,s)):(Fu&&t&&o3(e),e.flags|=1,ip(n,e,r,s),e.child)}function bU(n,e,t,r,s){if(n===null){var o=t.type;return typeof o=="function"&&!A3(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,HV(n,e,o,r,s)):(n=iI(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var l=o.memoizedProps;if(t=t.compare,t=t!==null?t:m$,t(l,r)&&n.ref===e.ref)return vv(n,e,s)}return e.flags|=1,n=Ny(o,r),n.ref=e.ref,n.return=e,e.child=n}function HV(n,e,t,r,s){if(n!==null){var o=n.memoizedProps;if(m$(o,r)&&n.ref===e.ref)if(Vp=!1,e.pendingProps=r=o,(n.lanes&s)!==0)n.flags&131072&&(Vp=!0);else return e.lanes=n.lanes,vv(n,e,s)}return pD(n,e,t,r,s)}function GV(n,e,t){var r=e.pendingProps,s=r.children,o=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jl(JS,Cm),Cm|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,jl(JS,Cm),Cm|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:t,jl(JS,Cm),Cm|=r}else o!==null?(r=o.baseLanes|t,e.memoizedState=null):r=t,jl(JS,Cm),Cm|=r;return ip(n,e,s,t),e.child}function WV(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function pD(n,e,t,r,s){var o=Xp(t)?W1:Df.current;return o=Tw(e,o),cw(e,s),t=v3(n,e,t,r,o,s),r=y3(),n!==null&&!Vp?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,vv(n,e,s)):(Fu&&r&&o3(e),e.flags|=1,ip(n,e,t,s),e.child)}function TU(n,e,t,r,s){if(Xp(t)){var o=!0;HI(e)}else o=!1;if(cw(e,s),e.stateNode===null)tI(n,e),_V(e,t,r),dD(e,t,r,s),r=!0;else if(n===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var h=l.context,f=t.contextType;typeof f=="object"&&f!==null?f=Tg(f):(f=Xp(t)?W1:Df.current,f=Tw(e,f));var g=t.getDerivedStateFromProps,y=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||h!==f)&&dU(e,l,r,f),_y=!1;var b=e.memoizedState;l.state=b,YI(e,r,l,s),h=e.memoizedState,u!==r||b!==h||Yp.current||_y?(typeof g=="function"&&(hD(e,t,g,r),h=e.memoizedState),(u=_y||hU(e,t,u,r,b,h,f))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),l.props=r,l.state=h,l.context=f,r=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,mV(n,e),u=e.memoizedProps,f=e.type===e.elementType?u:Kg(e.type,u),l.props=f,y=e.pendingProps,b=l.context,h=t.contextType,typeof h=="object"&&h!==null?h=Tg(h):(h=Xp(t)?W1:Df.current,h=Tw(e,h));var S=t.getDerivedStateFromProps;(g=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==y||b!==h)&&dU(e,l,r,h),_y=!1,b=e.memoizedState,l.state=b,YI(e,r,l,s);var C=e.memoizedState;u!==y||b!==C||Yp.current||_y?(typeof S=="function"&&(hD(e,t,S,r),C=e.memoizedState),(f=_y||hU(e,t,f,r,b,C,h)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,C,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,C,h)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),l.props=r,l.state=C,l.context=h,r=f):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=1024),r=!1)}return mD(n,e,t,r,o,s)}function mD(n,e,t,r,s,o){WV(n,e);var l=(e.flags&128)!==0;if(!r&&!l)return s&&oU(e,t,!1),vv(n,e,o);r=e.stateNode,Xre.current=e;var u=l&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&l?(e.child=ww(e,n.child,null,o),e.child=ww(e,null,u,o)):ip(n,e,u,o),e.memoizedState=r.state,s&&oU(e,t,!0),e.child}function VV(n){var e=n.stateNode;e.pendingContext?sU(n,e.pendingContext,e.pendingContext!==e.context):e.context&&sU(n,e.context,!1),p3(n,e.containerInfo)}function SU(n,e,t,r,s){return Sw(),l3(s),e.flags|=256,ip(n,e,t,r),e.child}var gD={dehydrated:null,treeContext:null,retryLane:0};function _D(n){return{baseLanes:n,cachePool:null,transitions:null}}function jV(n,e,t){var r=e.pendingProps,s=sc.current,o=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=n!==null&&n.memoizedState===null?!1:(s&2)!==0),u?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),jl(sc,s&1),n===null)return uD(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,n=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=ZR(l,r,0,null),n=R1(n,r,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=_D(t),e.memoizedState=gD,n):S3(e,l));if(s=n.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return Kre(n,e,l,r,u,s,t);if(o){o=r.fallback,l=e.mode,s=n.child,u=s.sibling;var h={mode:"hidden",children:r.children};return!(l&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=Ny(s,h),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?o=Ny(u,o):(o=R1(o,l,t,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=n.child.memoizedState,l=l===null?_D(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=n.childLanes&~t,e.memoizedState=gD,r}return o=n.child,n=o.sibling,r=Ny(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function S3(n,e){return e=ZR({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function oM(n,e,t,r){return r!==null&&l3(r),ww(e,n.child,null,t),n=S3(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Kre(n,e,t,r,s,o,l){if(t)return e.flags&256?(e.flags&=-257,r=rO(Error($n(422))),oM(n,e,l,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=ZR({mode:"visible",children:r.children},s,0,null),o=R1(o,s,l,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&ww(e,n.child,null,l),e.child.memoizedState=_D(l),e.memoizedState=gD,o);if(!(e.mode&1))return oM(n,e,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error($n(419)),r=rO(o,r,void 0),oM(n,e,l,r)}if(u=(l&n.childLanes)!==0,Vp||u){if(r=Ed,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,_v(n,s),s0(r,n,s,-1))}return M3(),r=rO(Error($n(421))),oM(n,e,l,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=lie.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,Im=Ry(s.nextSibling),km=e,Fu=!0,qg=null,n!==null&&(pg[mg++]=uv,pg[mg++]=cv,pg[mg++]=V1,uv=n.id,cv=n.overflow,V1=e),e=S3(e,r.children),e.flags|=4096,e)}function wU(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),cD(n.return,e,t)}function iO(n,e,t,r,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=s)}function YV(n,e,t){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(ip(n,e,r.children,t),r=sc.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&wU(n,t,e);else if(n.tag===19)wU(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(jl(sc,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&XI(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),iO(e,!1,s,t,o);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&XI(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}iO(e,!0,t,null,o);break;case"together":iO(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tI(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function vv(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Y1|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error($n(153));if(e.child!==null){for(n=e.child,t=Ny(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ny(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Jre(n,e,t){switch(e.tag){case 3:VV(e),Sw();break;case 5:bV(e);break;case 1:Xp(e.type)&&HI(e);break;case 4:p3(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;jl(VI,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(jl(sc,sc.current&1),e.flags|=128,null):t&e.child.childLanes?jV(n,e,t):(jl(sc,sc.current&1),n=vv(n,e,t),n!==null?n.sibling:null);jl(sc,sc.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return YV(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),jl(sc,sc.current),r)break;return null;case 22:case 23:return e.lanes=0,GV(n,e,t)}return vv(n,e,t)}var XV,vD,KV,JV;XV=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};vD=function(){};KV=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,v1(a_.current);var o=null;switch(t){case"input":s=zN(n,s),r=zN(n,r),o=[];break;case"select":s=cc({},s,{value:void 0}),r=cc({},r,{value:void 0}),o=[];break;case"textarea":s=GN(n,s),r=GN(n,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=zI)}VN(t,r);var l;t=null;for(f in s)if(!r.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var u=s[f];for(l in u)u.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l$.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var h=r[f];if(u=s!=null?s[f]:void 0,r.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(l in u)!u.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in h)h.hasOwnProperty(l)&&u[l]!==h[l]&&(t||(t={}),t[l]=h[l])}else t||(o||(o=[]),o.push(f,t)),t=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(l$.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&fu("scroll",n),o||u===h||(o=[])):(o=o||[]).push(f,h))}t&&(o=o||[]).push("style",t);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};JV=function(n,e,t,r){t!==r&&(e.flags|=4)};function WE(n,e){if(!Fu)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ef(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function qre(n,e,t){var r=e.pendingProps;switch(a3(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ef(e),null;case 1:return Xp(e.type)&&UI(),Ef(e),null;case 3:return r=e.stateNode,Ew(),mu(Yp),mu(Df),g3(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(iM(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qg!==null&&($D(qg),qg=null))),vD(n,e),Ef(e),null;case 5:m3(e);var s=v1(b$.current);if(t=e.type,n!==null&&e.stateNode!=null)KV(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($n(166));return Ef(e),null}if(n=v1(a_.current),iM(e)){r=e.stateNode,t=e.type;var o=e.memoizedProps;switch(r[e_]=e,r[v$]=o,n=(e.mode&1)!==0,t){case"dialog":fu("cancel",r),fu("close",r);break;case"iframe":case"object":case"embed":fu("load",r);break;case"video":case"audio":for(s=0;s<Ax.length;s++)fu(Ax[s],r);break;case"source":fu("error",r);break;case"img":case"image":case"link":fu("error",r),fu("load",r);break;case"details":fu("toggle",r);break;case"input":kz(r,o),fu("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},fu("invalid",r);break;case"textarea":Lz(r,o),fu("invalid",r)}VN(t,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&rM(r.textContent,u,n),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&rM(r.textContent,u,n),s=["children",""+u]):l$.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&fu("scroll",r)}switch(t){case"input":KC(r),Oz(r,o,!0);break;case"textarea":KC(r),Nz(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=zI)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=w8(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=l.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=l.createElement(t,{is:r.is}):(n=l.createElement(t),t==="select"&&(l=n,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):n=l.createElementNS(n,t),n[e_]=e,n[v$]=r,XV(n,e,!1,!1),e.stateNode=n;e:{switch(l=jN(t,r),t){case"dialog":fu("cancel",n),fu("close",n),s=r;break;case"iframe":case"object":case"embed":fu("load",n),s=r;break;case"video":case"audio":for(s=0;s<Ax.length;s++)fu(Ax[s],n);s=r;break;case"source":fu("error",n),s=r;break;case"img":case"image":case"link":fu("error",n),fu("load",n),s=r;break;case"details":fu("toggle",n),s=r;break;case"input":kz(n,r),s=zN(n,r),fu("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=cc({},r,{value:void 0}),fu("invalid",n);break;case"textarea":Lz(n,r),s=GN(n,r),fu("invalid",n);break;default:s=r}VN(t,s),u=s;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?$8(n,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&E8(n,h)):o==="children"?typeof h=="string"?(t!=="textarea"||h!=="")&&u$(n,h):typeof h=="number"&&u$(n,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(l$.hasOwnProperty(o)?h!=null&&o==="onScroll"&&fu("scroll",n):h!=null&&jB(n,o,h,l))}switch(t){case"input":KC(n),Oz(n,r,!1);break;case"textarea":KC(n),Nz(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Fy(r.value));break;case"select":n.multiple=!!r.multiple,o=r.value,o!=null?ow(n,!!r.multiple,o,!1):r.defaultValue!=null&&ow(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=zI)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ef(e),null;case 6:if(n&&e.stateNode!=null)JV(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($n(166));if(t=v1(b$.current),v1(a_.current),iM(e)){if(r=e.stateNode,t=e.memoizedProps,r[e_]=e,(o=r.nodeValue!==t)&&(n=km,n!==null))switch(n.tag){case 3:rM(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&rM(r.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[e_]=e,e.stateNode=r}return Ef(e),null;case 13:if(mu(sc),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Fu&&Im!==null&&e.mode&1&&!(e.flags&128))fV(),Sw(),e.flags|=98560,o=!1;else if(o=iM(e),r!==null&&r.dehydrated!==null){if(n===null){if(!o)throw Error($n(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($n(317));o[e_]=e}else Sw(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ef(e),o=!1}else qg!==null&&($D(qg),qg=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||sc.current&1?ud===0&&(ud=3):M3())),e.updateQueue!==null&&(e.flags|=4),Ef(e),null);case 4:return Ew(),vD(n,e),n===null&&g$(e.stateNode.containerInfo),Ef(e),null;case 10:return h3(e.type._context),Ef(e),null;case 17:return Xp(e.type)&&UI(),Ef(e),null;case 19:if(mu(sc),o=e.memoizedState,o===null)return Ef(e),null;if(r=(e.flags&128)!==0,l=o.rendering,l===null)if(r)WE(o,!1);else{if(ud!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(l=XI(n),l!==null){for(e.flags|=128,WE(o,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)o=t,n=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,n=l.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return jl(sc,sc.current&1|2),e.child}n=n.sibling}o.tail!==null&&ch()>$w&&(e.flags|=128,r=!0,WE(o,!1),e.lanes=4194304)}else{if(!r)if(n=XI(l),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),WE(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Fu)return Ef(e),null}else 2*ch()-o.renderingStartTime>$w&&t!==1073741824&&(e.flags|=128,r=!0,WE(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(t=o.last,t!==null?t.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ch(),e.sibling=null,t=sc.current,jl(sc,r?t&1|2:t&1),e):(Ef(e),null);case 22:case 23:return C3(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Cm&1073741824&&(Ef(e),e.subtreeFlags&6&&(e.flags|=8192)):Ef(e),null;case 24:return null;case 25:return null}throw Error($n(156,e.tag))}function Qre(n,e){switch(a3(e),e.tag){case 1:return Xp(e.type)&&UI(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Ew(),mu(Yp),mu(Df),g3(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return m3(e),null;case 13:if(mu(sc),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error($n(340));Sw()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return mu(sc),null;case 4:return Ew(),null;case 10:return h3(e.type._context),null;case 22:case 23:return C3(),null;case 24:return null;default:return null}}var aM=!1,Of=!1,Zre=typeof WeakSet=="function"?WeakSet:Set,ur=null;function KS(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Oc(n,e,r)}else t.current=null}function yD(n,e,t){try{t()}catch(r){Oc(n,e,r)}}var EU=!1;function eie(n,e){if(nD=PI,n=eV(),s3(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var l=0,u=-1,h=-1,f=0,g=0,y=n,b=null;t:for(;;){for(var S;y!==t||s!==0&&y.nodeType!==3||(u=l+s),y!==o||r!==0&&y.nodeType!==3||(h=l+r),y.nodeType===3&&(l+=y.nodeValue.length),(S=y.firstChild)!==null;)b=y,y=S;for(;;){if(y===n)break t;if(b===t&&++f===s&&(u=l),b===o&&++g===r&&(h=l),(S=y.nextSibling)!==null)break;y=b,b=y.parentNode}y=S}t=u===-1||h===-1?null:{start:u,end:h}}else t=null}t=t||{start:0,end:0}}else t=null;for(rD={focusedElem:n,selectionRange:t},PI=!1,ur=e;ur!==null;)if(e=ur,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ur=n;else for(;ur!==null;){e=ur;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var M=C.memoizedProps,A=C.memoizedState,O=e.stateNode,L=O.getSnapshotBeforeUpdate(e.elementType===e.type?M:Kg(e.type,M),A);O.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var B=e.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($n(163))}}catch(D){Oc(e,e.return,D)}if(n=e.sibling,n!==null){n.return=e.return,ur=n;break}ur=e.return}return C=EU,EU=!1,C}function Yx(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&yD(e,t,o)}s=s.next}while(s!==r)}}function qR(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function bD(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function qV(n){var e=n.alternate;e!==null&&(n.alternate=null,qV(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[e_],delete e[v$],delete e[oD],delete e[Dre],delete e[Pre])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function QV(n){return n.tag===5||n.tag===3||n.tag===4}function xU(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||QV(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function TD(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=zI));else if(r!==4&&(n=n.child,n!==null))for(TD(n,e,t),n=n.sibling;n!==null;)TD(n,e,t),n=n.sibling}function SD(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(SD(n,e,t),n=n.sibling;n!==null;)SD(n,e,t),n=n.sibling}var tf=null,Jg=!1;function Yv(n,e,t){for(t=t.child;t!==null;)ZV(n,e,t),t=t.sibling}function ZV(n,e,t){if(o_&&typeof o_.onCommitFiberUnmount=="function")try{o_.onCommitFiberUnmount(GR,t)}catch{}switch(t.tag){case 5:Of||KS(t,e);case 6:var r=tf,s=Jg;tf=null,Yv(n,e,t),tf=r,Jg=s,tf!==null&&(Jg?(n=tf,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):tf.removeChild(t.stateNode));break;case 18:tf!==null&&(Jg?(n=tf,t=t.stateNode,n.nodeType===8?q2(n.parentNode,t):n.nodeType===1&&q2(n,t),f$(n)):q2(tf,t.stateNode));break;case 4:r=tf,s=Jg,tf=t.stateNode.containerInfo,Jg=!0,Yv(n,e,t),tf=r,Jg=s;break;case 0:case 11:case 14:case 15:if(!Of&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&yD(t,e,l),s=s.next}while(s!==r)}Yv(n,e,t);break;case 1:if(!Of&&(KS(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(u){Oc(t,e,u)}Yv(n,e,t);break;case 21:Yv(n,e,t);break;case 22:t.mode&1?(Of=(r=Of)||t.memoizedState!==null,Yv(n,e,t),Of=r):Yv(n,e,t);break;default:Yv(n,e,t)}}function $U(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Zre),e.forEach(function(r){var s=uie.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function zg(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var o=n,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:tf=u.stateNode,Jg=!1;break e;case 3:tf=u.stateNode.containerInfo,Jg=!0;break e;case 4:tf=u.stateNode.containerInfo,Jg=!0;break e}u=u.return}if(tf===null)throw Error($n(160));ZV(o,l,s),tf=null,Jg=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(f){Oc(s,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ej(e,n),e=e.sibling}function ej(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(zg(e,n),W0(n),r&4){try{Yx(3,n,n.return),qR(3,n)}catch(M){Oc(n,n.return,M)}try{Yx(5,n,n.return)}catch(M){Oc(n,n.return,M)}}break;case 1:zg(e,n),W0(n),r&512&&t!==null&&KS(t,t.return);break;case 5:if(zg(e,n),W0(n),r&512&&t!==null&&KS(t,t.return),n.flags&32){var s=n.stateNode;try{u$(s,"")}catch(M){Oc(n,n.return,M)}}if(r&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,l=t!==null?t.memoizedProps:o,u=n.type,h=n.updateQueue;if(n.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&T8(s,o),jN(u,l);var f=jN(u,o);for(l=0;l<h.length;l+=2){var g=h[l],y=h[l+1];g==="style"?$8(s,y):g==="dangerouslySetInnerHTML"?E8(s,y):g==="children"?u$(s,y):jB(s,g,y,f)}switch(u){case"input":UN(s,o);break;case"textarea":S8(s,o);break;case"select":var b=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?ow(s,!!o.multiple,S,!1):b!==!!o.multiple&&(o.defaultValue!=null?ow(s,!!o.multiple,o.defaultValue,!0):ow(s,!!o.multiple,o.multiple?[]:"",!1))}s[v$]=o}catch(M){Oc(n,n.return,M)}}break;case 6:if(zg(e,n),W0(n),r&4){if(n.stateNode===null)throw Error($n(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(M){Oc(n,n.return,M)}}break;case 3:if(zg(e,n),W0(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{f$(e.containerInfo)}catch(M){Oc(n,n.return,M)}break;case 4:zg(e,n),W0(n);break;case 13:zg(e,n),W0(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(x3=ch())),r&4&&$U(n);break;case 22:if(g=t!==null&&t.memoizedState!==null,n.mode&1?(Of=(f=Of)||g,zg(e,n),Of=f):zg(e,n),W0(n),r&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!g&&n.mode&1)for(ur=n,g=n.child;g!==null;){for(y=ur=g;ur!==null;){switch(b=ur,S=b.child,b.tag){case 0:case 11:case 14:case 15:Yx(4,b,b.return);break;case 1:KS(b,b.return);var C=b.stateNode;if(typeof C.componentWillUnmount=="function"){r=b,t=b.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(M){Oc(r,t,M)}}break;case 5:KS(b,b.return);break;case 22:if(b.memoizedState!==null){MU(y);continue}}S!==null?(S.return=b,ur=S):MU(y)}g=g.sibling}e:for(g=null,y=n;;){if(y.tag===5){if(g===null){g=y;try{s=y.stateNode,f?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=y.stateNode,h=y.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=x8("display",l))}catch(M){Oc(n,n.return,M)}}}else if(y.tag===6){if(g===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(M){Oc(n,n.return,M)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===n)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;g===y&&(g=null),y=y.return}g===y&&(g=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:zg(e,n),W0(n),r&4&&$U(n);break;case 21:break;default:zg(e,n),W0(n)}}function W0(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(QV(t)){var r=t;break e}t=t.return}throw Error($n(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(u$(s,""),r.flags&=-33);var o=xU(n);SD(n,o,s);break;case 3:case 4:var l=r.stateNode.containerInfo,u=xU(n);TD(n,u,l);break;default:throw Error($n(161))}}catch(h){Oc(n,n.return,h)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function tie(n,e,t){ur=n,tj(n)}function tj(n,e,t){for(var r=(n.mode&1)!==0;ur!==null;){var s=ur,o=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||aM;if(!l){var u=s.alternate,h=u!==null&&u.memoizedState!==null||Of;u=aM;var f=Of;if(aM=l,(Of=h)&&!f)for(ur=s;ur!==null;)l=ur,h=l.child,l.tag===22&&l.memoizedState!==null?AU(s):h!==null?(h.return=l,ur=h):AU(s);for(;o!==null;)ur=o,tj(o),o=o.sibling;ur=s,aM=u,Of=f}CU(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ur=o):CU(n)}}function CU(n){for(;ur!==null;){var e=ur;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Of||qR(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Of)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Kg(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&cU(e,o,r);break;case 3:var l=e.updateQueue;if(l!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}cU(e,l,t)}break;case 5:var u=e.stateNode;if(t===null&&e.flags&4){t=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&t.focus();break;case"img":h.src&&(t.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var y=g.dehydrated;y!==null&&f$(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($n(163))}Of||e.flags&512&&bD(e)}catch(b){Oc(e,e.return,b)}}if(e===n){ur=null;break}if(t=e.sibling,t!==null){t.return=e.return,ur=t;break}ur=e.return}}function MU(n){for(;ur!==null;){var e=ur;if(e===n){ur=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ur=t;break}ur=e.return}}function AU(n){for(;ur!==null;){var e=ur;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{qR(4,e)}catch(h){Oc(e,t,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(h){Oc(e,s,h)}}var o=e.return;try{bD(e)}catch(h){Oc(e,o,h)}break;case 5:var l=e.return;try{bD(e)}catch(h){Oc(e,l,h)}}}catch(h){Oc(e,e.return,h)}if(e===n){ur=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ur=u;break}ur=e.return}}var nie=Math.ceil,qI=Ev.ReactCurrentDispatcher,w3=Ev.ReactCurrentOwner,yg=Ev.ReactCurrentBatchConfig,wo=0,Ed=null,Dh=null,sf=0,Cm=0,JS=Jy(0),ud=0,E$=null,Y1=0,QR=0,E3=0,Xx=null,Gp=null,x3=0,$w=1/0,rv=null,QI=!1,wD=null,Oy=null,lM=!1,Sy=null,ZI=0,Kx=0,ED=null,nI=-1,rI=0;function dp(){return wo&6?ch():nI!==-1?nI:nI=ch()}function Ly(n){return n.mode&1?wo&2&&sf!==0?sf&-sf:Fre.transition!==null?(rI===0&&(rI=B8()),rI):(n=Ia,n!==0||(n=window.event,n=n===void 0?16:V8(n.type)),n):1}function s0(n,e,t,r){if(50<Kx)throw Kx=0,ED=null,Error($n(185));_C(n,t,r),(!(wo&2)||n!==Ed)&&(n===Ed&&(!(wo&2)&&(QR|=t),ud===4&&by(n,sf)),Kp(n,r),t===1&&wo===0&&!(e.mode&1)&&($w=ch()+500,XR&&qy()))}function Kp(n,e){var t=n.callbackNode;Fne(n,e);var r=DI(n,n===Ed?sf:0);if(r===0)t!==null&&Bz(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Bz(t),e===1)n.tag===0?Bre(IU.bind(null,n)):cV(IU.bind(null,n)),Lre(function(){!(wo&6)&&qy()}),t=null;else{switch(F8(r)){case 1:t=qB;break;case 4:t=D8;break;case 16:t=NI;break;case 536870912:t=P8;break;default:t=NI}t=uj(t,nj.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function nj(n,e){if(nI=-1,rI=0,wo&6)throw Error($n(327));var t=n.callbackNode;if(hw()&&n.callbackNode!==t)return null;var r=DI(n,n===Ed?sf:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=eR(n,r);else{e=r;var s=wo;wo|=2;var o=ij();(Ed!==n||sf!==e)&&(rv=null,$w=ch()+500,I1(n,e));do try{sie();break}catch(u){rj(n,u)}while(!0);c3(),qI.current=o,wo=s,Dh!==null?e=0:(Ed=null,sf=0,e=ud)}if(e!==0){if(e===2&&(s=qN(n),s!==0&&(r=s,e=xD(n,s))),e===1)throw t=E$,I1(n,0),by(n,r),Kp(n,ch()),t;if(e===6)by(n,r);else{if(s=n.current.alternate,!(r&30)&&!rie(s)&&(e=eR(n,r),e===2&&(o=qN(n),o!==0&&(r=o,e=xD(n,o))),e===1))throw t=E$,I1(n,0),by(n,r),Kp(n,ch()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error($n(345));case 2:s1(n,Gp,rv);break;case 3:if(by(n,r),(r&130023424)===r&&(e=x3+500-ch(),10<e)){if(DI(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){dp(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=sD(s1.bind(null,n,Gp,rv),e);break}s1(n,Gp,rv);break;case 4:if(by(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var l=31-i0(r);o=1<<l,l=e[l],l>s&&(s=l),r&=~o}if(r=s,r=ch()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nie(r/1960))-r,10<r){n.timeoutHandle=sD(s1.bind(null,n,Gp,rv),r);break}s1(n,Gp,rv);break;case 5:s1(n,Gp,rv);break;default:throw Error($n(329))}}}return Kp(n,ch()),n.callbackNode===t?nj.bind(null,n):null}function xD(n,e){var t=Xx;return n.current.memoizedState.isDehydrated&&(I1(n,e).flags|=256),n=eR(n,e),n!==2&&(e=Gp,Gp=t,e!==null&&$D(e)),n}function $D(n){Gp===null?Gp=n:Gp.push.apply(Gp,n)}function rie(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],o=s.getSnapshot;s=s.value;try{if(!u0(o(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function by(n,e){for(e&=~E3,e&=~QR,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-i0(e),r=1<<t;n[t]=-1,e&=~r}}function IU(n){if(wo&6)throw Error($n(327));hw();var e=DI(n,0);if(!(e&1))return Kp(n,ch()),null;var t=eR(n,e);if(n.tag!==0&&t===2){var r=qN(n);r!==0&&(e=r,t=xD(n,r))}if(t===1)throw t=E$,I1(n,0),by(n,e),Kp(n,ch()),t;if(t===6)throw Error($n(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,s1(n,Gp,rv),Kp(n,ch()),null}function $3(n,e){var t=wo;wo|=1;try{return n(e)}finally{wo=t,wo===0&&($w=ch()+500,XR&&qy())}}function X1(n){Sy!==null&&Sy.tag===0&&!(wo&6)&&hw();var e=wo;wo|=1;var t=yg.transition,r=Ia;try{if(yg.transition=null,Ia=1,n)return n()}finally{Ia=r,yg.transition=t,wo=e,!(wo&6)&&qy()}}function C3(){Cm=JS.current,mu(JS)}function I1(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Ore(t)),Dh!==null)for(t=Dh.return;t!==null;){var r=t;switch(a3(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&UI();break;case 3:Ew(),mu(Yp),mu(Df),g3();break;case 5:m3(r);break;case 4:Ew();break;case 13:mu(sc);break;case 19:mu(sc);break;case 10:h3(r.type._context);break;case 22:case 23:C3()}t=t.return}if(Ed=n,Dh=n=Ny(n.current,null),sf=Cm=e,ud=0,E$=null,E3=QR=Y1=0,Gp=Xx=null,_1!==null){for(e=0;e<_1.length;e++)if(t=_1[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,o=t.pending;if(o!==null){var l=o.next;o.next=s,r.next=l}t.pending=r}_1=null}return n}function rj(n,e){do{var t=Dh;try{if(c3(),ZA.current=JI,KI){for(var r=lc.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}KI=!1}if(j1=0,wd=ld=lc=null,jx=!1,T$=0,w3.current=null,t===null||t.return===null){ud=1,E$=e,Dh=null;break}e:{var o=n,l=t.return,u=t,h=e;if(e=sf,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,g=u,y=g.tag;if(!(g.mode&1)&&(y===0||y===11||y===15)){var b=g.alternate;b?(g.updateQueue=b.updateQueue,g.memoizedState=b.memoizedState,g.lanes=b.lanes):(g.updateQueue=null,g.memoizedState=null)}var S=_U(l);if(S!==null){S.flags&=-257,vU(S,l,u,o,e),S.mode&1&&gU(o,f,e),e=S,h=f;var C=e.updateQueue;if(C===null){var M=new Set;M.add(h),e.updateQueue=M}else C.add(h);break e}else{if(!(e&1)){gU(o,f,e),M3();break e}h=Error($n(426))}}else if(Fu&&u.mode&1){var A=_U(l);if(A!==null){!(A.flags&65536)&&(A.flags|=256),vU(A,l,u,o,e),l3(xw(h,u));break e}}o=h=xw(h,u),ud!==4&&(ud=2),Xx===null?Xx=[o]:Xx.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var O=zV(o,h,e);uU(o,O);break e;case 1:u=h;var L=o.type,B=o.stateNode;if(!(o.flags&128)&&(typeof L.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Oy===null||!Oy.has(B)))){o.flags|=65536,e&=-e,o.lanes|=e;var D=UV(o,u,e);uU(o,D);break e}}o=o.return}while(o!==null)}oj(t)}catch(z){e=z,Dh===t&&t!==null&&(Dh=t=t.return);continue}break}while(!0)}function ij(){var n=qI.current;return qI.current=JI,n===null?JI:n}function M3(){(ud===0||ud===3||ud===2)&&(ud=4),Ed===null||!(Y1&268435455)&&!(QR&268435455)||by(Ed,sf)}function eR(n,e){var t=wo;wo|=2;var r=ij();(Ed!==n||sf!==e)&&(rv=null,I1(n,e));do try{iie();break}catch(s){rj(n,s)}while(!0);if(c3(),wo=t,qI.current=r,Dh!==null)throw Error($n(261));return Ed=null,sf=0,ud}function iie(){for(;Dh!==null;)sj(Dh)}function sie(){for(;Dh!==null&&!Ine();)sj(Dh)}function sj(n){var e=lj(n.alternate,n,Cm);n.memoizedProps=n.pendingProps,e===null?oj(n):Dh=e,w3.current=null}function oj(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Qre(t,e),t!==null){t.flags&=32767,Dh=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ud=6,Dh=null;return}}else if(t=qre(t,e,Cm),t!==null){Dh=t;return}if(e=e.sibling,e!==null){Dh=e;return}Dh=e=n}while(e!==null);ud===0&&(ud=5)}function s1(n,e,t){var r=Ia,s=yg.transition;try{yg.transition=null,Ia=1,oie(n,e,t,r)}finally{yg.transition=s,Ia=r}return null}function oie(n,e,t,r){do hw();while(Sy!==null);if(wo&6)throw Error($n(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error($n(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(zne(n,o),n===Ed&&(Dh=Ed=null,sf=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||lM||(lM=!0,uj(NI,function(){return hw(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=yg.transition,yg.transition=null;var l=Ia;Ia=1;var u=wo;wo|=4,w3.current=null,eie(n,t),ej(t,n),$re(rD),PI=!!nD,rD=nD=null,n.current=t,tie(t),Rne(),wo=u,Ia=l,yg.transition=o}else n.current=t;if(lM&&(lM=!1,Sy=n,ZI=s),o=n.pendingLanes,o===0&&(Oy=null),Lne(t.stateNode),Kp(n,ch()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(QI)throw QI=!1,n=wD,wD=null,n;return ZI&1&&n.tag!==0&&hw(),o=n.pendingLanes,o&1?n===ED?Kx++:(Kx=0,ED=n):Kx=0,qy(),null}function hw(){if(Sy!==null){var n=F8(ZI),e=yg.transition,t=Ia;try{if(yg.transition=null,Ia=16>n?16:n,Sy===null)var r=!1;else{if(n=Sy,Sy=null,ZI=0,wo&6)throw Error($n(331));var s=wo;for(wo|=4,ur=n.current;ur!==null;){var o=ur,l=o.child;if(ur.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(ur=f;ur!==null;){var g=ur;switch(g.tag){case 0:case 11:case 15:Yx(8,g,o)}var y=g.child;if(y!==null)y.return=g,ur=y;else for(;ur!==null;){g=ur;var b=g.sibling,S=g.return;if(qV(g),g===f){ur=null;break}if(b!==null){b.return=S,ur=b;break}ur=S}}}var C=o.alternate;if(C!==null){var M=C.child;if(M!==null){C.child=null;do{var A=M.sibling;M.sibling=null,M=A}while(M!==null)}}ur=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ur=l;else e:for(;ur!==null;){if(o=ur,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Yx(9,o,o.return)}var O=o.sibling;if(O!==null){O.return=o.return,ur=O;break e}ur=o.return}}var L=n.current;for(ur=L;ur!==null;){l=ur;var B=l.child;if(l.subtreeFlags&2064&&B!==null)B.return=l,ur=B;else e:for(l=L;ur!==null;){if(u=ur,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:qR(9,u)}}catch(z){Oc(u,u.return,z)}if(u===l){ur=null;break e}var D=u.sibling;if(D!==null){D.return=u.return,ur=D;break e}ur=u.return}}if(wo=s,qy(),o_&&typeof o_.onPostCommitFiberRoot=="function")try{o_.onPostCommitFiberRoot(GR,n)}catch{}r=!0}return r}finally{Ia=t,yg.transition=e}}return!1}function RU(n,e,t){e=xw(t,e),e=zV(n,e,1),n=ky(n,e,1),e=dp(),n!==null&&(_C(n,1,e),Kp(n,e))}function Oc(n,e,t){if(n.tag===3)RU(n,n,t);else for(;e!==null;){if(e.tag===3){RU(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oy===null||!Oy.has(r))){n=xw(t,n),n=UV(e,n,1),e=ky(e,n,1),n=dp(),e!==null&&(_C(e,1,n),Kp(e,n));break}}e=e.return}}function aie(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=dp(),n.pingedLanes|=n.suspendedLanes&t,Ed===n&&(sf&t)===t&&(ud===4||ud===3&&(sf&130023424)===sf&&500>ch()-x3?I1(n,0):E3|=t),Kp(n,e)}function aj(n,e){e===0&&(n.mode&1?(e=QC,QC<<=1,!(QC&130023424)&&(QC=4194304)):e=1);var t=dp();n=_v(n,e),n!==null&&(_C(n,e,t),Kp(n,t))}function lie(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),aj(n,t)}function uie(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error($n(314))}r!==null&&r.delete(e),aj(n,t)}var lj;lj=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Yp.current)Vp=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Vp=!1,Jre(n,e,t);Vp=!!(n.flags&131072)}else Vp=!1,Fu&&e.flags&1048576&&hV(e,WI,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tI(n,e),n=e.pendingProps;var s=Tw(e,Df.current);cw(e,t),s=v3(null,e,r,n,s,t);var o=y3();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xp(r)?(o=!0,HI(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,f3(e),s.updater=KR,e.stateNode=s,s._reactInternals=e,dD(e,r,n,t),e=mD(null,e,r,!0,o,t)):(e.tag=0,Fu&&o&&o3(e),ip(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(tI(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=hie(r),n=Kg(r,n),s){case 0:e=pD(null,e,r,n,t);break e;case 1:e=TU(null,e,r,n,t);break e;case 11:e=yU(null,e,r,n,t);break e;case 14:e=bU(null,e,r,Kg(r.type,n),t);break e}throw Error($n(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kg(r,s),pD(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kg(r,s),TU(n,e,r,s,t);case 3:e:{if(VV(e),n===null)throw Error($n(387));r=e.pendingProps,o=e.memoizedState,s=o.element,mV(n,e),YI(e,r,null,t);var l=e.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=xw(Error($n(423)),e),e=SU(n,e,r,t,s);break e}else if(r!==s){s=xw(Error($n(424)),e),e=SU(n,e,r,t,s);break e}else for(Im=Ry(e.stateNode.containerInfo.firstChild),km=e,Fu=!0,qg=null,t=yV(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Sw(),r===s){e=vv(n,e,t);break e}ip(n,e,r,t)}e=e.child}return e;case 5:return bV(e),n===null&&uD(e),r=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,l=s.children,iD(r,s)?l=null:o!==null&&iD(r,o)&&(e.flags|=32),WV(n,e),ip(n,e,l,t),e.child;case 6:return n===null&&uD(e),null;case 13:return jV(n,e,t);case 4:return p3(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=ww(e,null,r,t):ip(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kg(r,s),yU(n,e,r,s,t);case 7:return ip(n,e,e.pendingProps,t),e.child;case 8:return ip(n,e,e.pendingProps.children,t),e.child;case 12:return ip(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,jl(VI,r._currentValue),r._currentValue=l,o!==null)if(u0(o.value,l)){if(o.children===s.children&&!Yp.current){e=vv(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var h=u.firstContext;h!==null;){if(h.context===r){if(o.tag===1){h=dv(-1,t&-t),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?h.next=h:(h.next=g.next,g.next=h),f.pending=h}}o.lanes|=t,h=o.alternate,h!==null&&(h.lanes|=t),cD(o.return,t,e),u.lanes|=t;break}h=h.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error($n(341));l.lanes|=t,u=l.alternate,u!==null&&(u.lanes|=t),cD(l,t,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}ip(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,cw(e,t),s=Tg(s),r=r(s),e.flags|=1,ip(n,e,r,t),e.child;case 14:return r=e.type,s=Kg(r,e.pendingProps),s=Kg(r.type,s),bU(n,e,r,s,t);case 15:return HV(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kg(r,s),tI(n,e),e.tag=1,Xp(r)?(n=!0,HI(e)):n=!1,cw(e,t),_V(e,r,s),dD(e,r,s,t),mD(null,e,r,!0,n,t);case 19:return YV(n,e,t);case 22:return GV(n,e,t)}throw Error($n(156,e.tag))};function uj(n,e){return N8(n,e)}function cie(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vg(n,e,t,r){return new cie(n,e,t,r)}function A3(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hie(n){if(typeof n=="function")return A3(n)?1:0;if(n!=null){if(n=n.$$typeof,n===XB)return 11;if(n===KB)return 14}return 2}function Ny(n,e){var t=n.alternate;return t===null?(t=vg(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function iI(n,e,t,r,s,o){var l=2;if(r=n,typeof n=="function")A3(n)&&(l=1);else if(typeof n=="string")l=5;else e:switch(n){case zS:return R1(t.children,s,o,e);case YB:l=8,s|=8;break;case DN:return n=vg(12,t,e,s|2),n.elementType=DN,n.lanes=o,n;case PN:return n=vg(13,t,e,s),n.elementType=PN,n.lanes=o,n;case BN:return n=vg(19,t,e,s),n.elementType=BN,n.lanes=o,n;case v8:return ZR(t,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case g8:l=10;break e;case _8:l=9;break e;case XB:l=11;break e;case KB:l=14;break e;case gy:l=16,r=null;break e}throw Error($n(130,n==null?n:typeof n,""))}return e=vg(l,t,e,s),e.elementType=n,e.type=r,e.lanes=o,e}function R1(n,e,t,r){return n=vg(7,n,r,e),n.lanes=t,n}function ZR(n,e,t,r){return n=vg(22,n,r,e),n.elementType=v8,n.lanes=t,n.stateNode={isHidden:!1},n}function sO(n,e,t){return n=vg(6,n,null,e),n.lanes=t,n}function oO(n,e,t){return e=vg(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function die(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=z2(0),this.expirationTimes=z2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z2(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function I3(n,e,t,r,s,o,l,u,h){return n=new die(n,e,t,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=vg(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},f3(o),n}function fie(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:FS,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function cj(n){if(!n)return zy;n=n._reactInternals;e:{if(sT(n)!==n||n.tag!==1)throw Error($n(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xp(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($n(171))}if(n.tag===1){var t=n.type;if(Xp(t))return uV(n,t,e)}return e}function hj(n,e,t,r,s,o,l,u,h){return n=I3(t,r,!0,n,s,o,l,u,h),n.context=cj(null),t=n.current,r=dp(),s=Ly(t),o=dv(r,s),o.callback=e??null,ky(t,o,s),n.current.lanes=s,_C(n,s,r),Kp(n,r),n}function ek(n,e,t,r){var s=e.current,o=dp(),l=Ly(s);return t=cj(t),e.context===null?e.context=t:e.pendingContext=t,e=dv(o,l),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=ky(s,e,l),n!==null&&(s0(n,s,l,o),QA(n,s,l)),l}function tR(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function kU(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function R3(n,e){kU(n,e),(n=n.alternate)&&kU(n,e)}function pie(){return null}var dj=typeof reportError=="function"?reportError:function(n){console.error(n)};function k3(n){this._internalRoot=n}tk.prototype.render=k3.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error($n(409));ek(n,e,null,null)};tk.prototype.unmount=k3.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;X1(function(){ek(null,n,null,null)}),e[gv]=null}};function tk(n){this._internalRoot=n}tk.prototype.unstable_scheduleHydration=function(n){if(n){var e=H8();n={blockedOn:null,target:n,priority:e};for(var t=0;t<yy.length&&e!==0&&e<yy[t].priority;t++);yy.splice(t,0,n),t===0&&W8(n)}};function O3(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function nk(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function OU(){}function mie(n,e,t,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var f=tR(l);o.call(f)}}var l=hj(e,r,n,0,null,!1,!1,"",OU);return n._reactRootContainer=l,n[gv]=l.current,g$(n.nodeType===8?n.parentNode:n),X1(),l}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var f=tR(h);u.call(f)}}var h=I3(n,0,!1,null,null,!1,!1,"",OU);return n._reactRootContainer=h,n[gv]=h.current,g$(n.nodeType===8?n.parentNode:n),X1(function(){ek(e,h,t,r)}),h}function rk(n,e,t,r,s){var o=t._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var u=s;s=function(){var h=tR(l);u.call(h)}}ek(e,l,n,s)}else l=mie(t,e,n,s,r);return tR(l)}z8=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Mx(e.pendingLanes);t!==0&&(QB(e,t|1),Kp(e,ch()),!(wo&6)&&($w=ch()+500,qy()))}break;case 13:X1(function(){var r=_v(n,1);if(r!==null){var s=dp();s0(r,n,1,s)}}),R3(n,1)}};ZB=function(n){if(n.tag===13){var e=_v(n,134217728);if(e!==null){var t=dp();s0(e,n,134217728,t)}R3(n,134217728)}};U8=function(n){if(n.tag===13){var e=Ly(n),t=_v(n,e);if(t!==null){var r=dp();s0(t,n,e,r)}R3(n,e)}};H8=function(){return Ia};G8=function(n,e){var t=Ia;try{return Ia=n,e()}finally{Ia=t}};XN=function(n,e,t){switch(e){case"input":if(UN(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=YR(r);if(!s)throw Error($n(90));b8(r),UN(r,s)}}}break;case"textarea":S8(n,t);break;case"select":e=t.value,e!=null&&ow(n,!!t.multiple,e,!1)}};A8=$3;I8=X1;var gie={usingClientEntryPoint:!1,Events:[yC,WS,YR,C8,M8,$3]},VE={findFiberByHostInstance:g1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},_ie={bundleType:VE.bundleType,version:VE.version,rendererPackageName:VE.rendererPackageName,rendererConfig:VE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ev.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=O8(n),n===null?null:n.stateNode},findFiberByHostInstance:VE.findFiberByHostInstance||pie,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uM=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uM.isDisabled&&uM.supportsFiber)try{GR=uM.inject(_ie),o_=uM}catch{}}Um.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gie;Um.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!O3(e))throw Error($n(200));return fie(n,e,null,t)};Um.createRoot=function(n,e){if(!O3(n))throw Error($n(299));var t=!1,r="",s=dj;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=I3(n,1,!1,null,null,t,!1,r,s),n[gv]=e.current,g$(n.nodeType===8?n.parentNode:n),new k3(e)};Um.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error($n(188)):(n=Object.keys(n).join(","),Error($n(268,n)));return n=O8(e),n=n===null?null:n.stateNode,n};Um.flushSync=function(n){return X1(n)};Um.hydrate=function(n,e,t){if(!nk(e))throw Error($n(200));return rk(null,n,e,!0,t)};Um.hydrateRoot=function(n,e,t){if(!O3(n))throw Error($n(405));var r=t!=null&&t.hydratedSources||null,s=!1,o="",l=dj;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),e=hj(e,null,n,1,t??null,s,!1,o,l),n[gv]=e.current,g$(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new tk(e)};Um.render=function(n,e,t){if(!nk(e))throw Error($n(200));return rk(null,n,e,!1,t)};Um.unmountComponentAtNode=function(n){if(!nk(n))throw Error($n(40));return n._reactRootContainer?(X1(function(){rk(null,null,n,!1,function(){n._reactRootContainer=null,n[gv]=null})}),!0):!1};Um.unstable_batchedUpdates=$3;Um.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!nk(t))throw Error($n(200));if(n==null||n._reactInternals===void 0)throw Error($n(38));return rk(n,e,t,!1,r)};Um.version="18.2.0-next-9e3b772b8-20220608";function fj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fj)}catch(n){console.error(n)}}fj(),h8.exports=Um;var L3=h8.exports;const cM=Xy(L3);var LU=L3;LN.createRoot=LU.createRoot,LN.hydrateRoot=LU.hydrateRoot;var pj={exports:{}},aO={exports:{}},lO={exports:{}},uO={exports:{}},cO={exports:{}},NU;function N3(){return NU||(NU=1,function(n,e){(function(t,r){n.exports=r()})(Vl,function(){var t={},r,s,o,l,u,h,f,g,y,b,S,C,M,A,O,L,B,D,z,U,V,H,oe,le,Z,q,he,ae,ue,ge,we,J,re,ie,fe,Te,Fe,Ie,qe,Re,Qe,nt,ft,lt,ze,Ce,He,rt,it,Nt,kt,vt,Mt,At,mt,xe,se,$e,ht,St,It,pt,Ke,Le,Q,te,me,ke,Xe,Wt,Ge,tn,_t,Jt,Kt,On,si,Pr,Ei,$r,gr,ne,Se,We,ot,zt,sn,Nn,De,gt,Ct,bt,Vt,Wn,rr,_r,Cr,oi,Br,Yr,Ss,Oa,xo,Yl,nn,Rr,el,La,Fs,zs,Di,kr,An,Ir,Gr,yr,Pi,ws,fi,gs,tl,Na,dc,fc,Xs,qo,Xl,gu,mh,Qo,vr,xi,Dc,gh,Pc,El,_u,xl,$l,br,Tr,Kl,nl,rl,vu,qi,_s,il,Cd,io,zu,ca,yu,or,Gn,Es,so,Uu,bu,_h,Da,ha,Hu,wr,Rs,bi,$i,da,Zr,Tu,$o,Su,sl,Bi,Ci,Vn,Mi,Xr,dd,wu,Vi,Pa,vh,fr,Zo,fd,lf,Bc,uf,Bf,Tp,Md,Jl,ks,Gu,yh,Ba,ci,Er,oo,Fa,zo,ql,Ql,Fh,Wr,Ai,Sr,ji,fa,Eu,cf,hf,pd,Wu,ol,Fc,zh,Vu,Zl,Us,eu,Uh,zc,Uc,is,Fr,Cl,za,tu,xu,bh,Ad,pi,ye,je,Be,Ot,rn,In,Jn,vn,zr,ao,Ti,lo,al,Fi,vs,$u,qn,pa,Ks,Hs,Ua,Hh,Th,pc,ea,Hc,Gh,Ha,Wh,mc,ju,md,ta,uo,Ml,Vh,zi,gd,Yu,nu,Gc,Id,Al,Rd,jh,ei,Ii,Sp,Ff,Il,ru,Xu,Ku,Sh,ll,na,Rl,Wc,kl,Vc,gc,kd,Ga,Vr,ul,Qi,ma,X,xs,ga,Mr,mn,zf,cl,Ri,hi,Zi,ss,jc,_a,va,os,Yc,ra,Od,Ld,Yh,Gs,Kn,Ws,Js,Ui,iu,Uo,xn,mi,gi,Uf,wh,co,ya,Cn,yn,hl,_c,wp,su,Co,ys,dl,as,fl,Ho,Xh,Wa,ki,Nd,Xc,Kh,Go,Mo,df,Cu,Ol,_d,vc,Kr,ou,Ju,ls,Va,$s,Cs,Kc,_i,ja,yc,ff,Eh,ia,Yi,Pn,tr,Nr,ti,qr,Ao,us,es,au,qu,bc,Qu,qs,ho,vd,ba,Mu,Au,fo,po,Ll,Wo,Zu,ec,xh,$h,Or,bs,Os,Ya,Vs,fn,Jc,wn;r=function(i,a,p,w){if(!(i instanceof Ft)&&typeof i!="string"||`${i}`.trim()==="")throw Error('Invalid type "'+i+'". The type must be a non-empty string or a Blockly.registry.Type.');if(i=`${i}`.toLowerCase(),typeof a!="string"||a.trim()==="")throw Error('Invalid name "'+a+'". The name must be a non-empty string.');const k=a.toLowerCase();if(!p)throw Error("Can not register a null value");let j=vi[i],ve=lu[i];if(j||(j=vi[i]=Object.create(null),ve=lu[i]=Object.create(null)),s(i,p),!w&&j[k])throw Error('Name "'+k+'" with type "'+i+'" already registered.');j[k]=p,ve[k]=a},s=function(i,a){switch(i){case String(Ft.FIELD):if(typeof a.fromJson!="function")throw Error('Type "'+i+'" must have a fromJson function')}},o=function(i,a){i=`${i}`.toLowerCase(),a=a.toLowerCase();const p=vi[i];p&&p[a]?(delete vi[i][a],delete lu[i][a]):console.warn("Unable to unregister ["+a+"]["+i+"] from the registry.")},l=function(i,a,p){i=`${i}`.toLowerCase(),a=a.toLowerCase();const w=vi[i];if(!w||!w[a]){if(a="Unable to find ["+a+"]["+i+"] in the registry.",p)throw Error(a+" You must require or register a "+i+" plugin.");return console.warn(a),null}return w[a]},u=function(i,a){return i=`${i}`.toLowerCase(),a=a.toLowerCase(),(i=vi[i])?!!i[a]:!1},h=function(i,a,p){return l(i,a,p)},f=function(i,a,p){return l(i,a,p)},g=function(i,a,p){i=`${i}`.toLowerCase();var w=vi[i];if(!w){if(w=`Unable to find [${i}] in the registry.`,p)throw Error(`${w} You must require or register a ${i} plugin.`);return console.warn(w),null}if(!a)return w;i=lu[i],p=Object.create(null);for(const k of Object.keys(w))p[i[k]]=w[k];return p},y=function(i,a,p){return a=a.plugins[String(i)]||Nl,typeof a=="function"?a:h(i,a,p)},b=function(i){return tc[i]||null},S=function(){const i=[];for(const a in tc)i.push(tc[a]);return i},C=function(i){tc[i.id]=i},M=function(i){delete tc[i.id]},A=function(){return Jh},O=function(i){Jh=i},L=function(){return qc},B=function(i){qc=i},D=function(){return ai},z=function(i){ai=i},U=function(i){for(;i.options.parentWorkspace;)i=i.options.parentWorkspace;const a=i.getParentSvg(),p=i.getCachedParentSvgSize();var w=a.parentElement;if(w instanceof HTMLElement){var k=w.offsetWidth;w=w.offsetHeight,p.width!==k&&(a.setAttribute("width",k+"px"),i.setCachedParentSvgSize(k,null)),p.height!==w&&(a.setAttribute("height",w+"px"),i.setCachedParentSvgSize(null,w)),i.resize()}},V=function(i,a){const p=Object.create(null),w=i.getDescendants(!0);a&&(i=i.getNextBlock())&&(i=w.indexOf(i),w.splice(i,w.length-i));for(let k=0,j;j=w[k];k++)p[j.type]?p[j.type]++:p[j.type]=1;return p},H=function(i){return function(){this.jsonInit(i)}},oe=function(i){Qc.defineBlocksWithJsonArrayInternal(i)},le=function(i){t.defineBlocks$$module$build$src$core$common(t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(i))},t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(i){const a={};for(let p=0;p<i.length;p++){const w=i[p];if(!w){console.warn(`Block definition #${p} in JSON array is ${w}. Skipping`);continue}const k=w.type;k?a[k]={init:H(w)}:console.warn(`Block definition #${p} in JSON array is missing a type attribute. Skipping.`)}return a},t.defineBlocks$$module$build$src$core$common=function(i){for(const a of Object.keys(i)){const p=i[a];a in jr&&console.warn(`Block definiton "${a}" overwrites previous definition.`),jr[a]=p}},Z=function(){return"blockly-"+(Tc++).toString(36)},q=function(){return Zc.genUid()},he=function(i){Qs=i},ae=function(){return Qs},ue=function(i){Hf.fireInternal(i)},ge=function(i){if(ie()){if(!wc.length)try{requestAnimationFrame(()=>{setTimeout(we,0)})}catch{setTimeout(we,0)}wc.push(i)}},we=function(){var i=J(wc,!0);wc.length=0;for(let p=0,w;w=i[p];p++)if(w.workspaceId){var a=b(w.workspaceId);a&&a.fireChangeListener(w)}i=new Set(i.map(p=>p.workspaceId));for(const p of i){if(!p||(i=b(p),!i))continue;i=i.getUndoStack();let w;for(a=i.length;0<a;a--){const k=i[a-1];if(k.group==="")break;if(w===void 0)w=k.group;else if(k.group!==w)break}w&&a!=i.length-1&&(a=i.splice(a,i.length-a),a=J(a,!0),i.push(...a))}},J=function(i,a){i=i.slice(),a||i.reverse();const p=[],w=Object.create(null);for(let ve=0,Ue;Ue=i[ve];ve++)if(!Ue.isNull()){var k=[Ue.isUiEvent?Sc:Ue.type,Ue.blockId,Ue.workspaceId].join(" "),j=w[k];const Yt=j?j.event:null;j?Ue.type===t.MOVE$$module$build$src$core$events$utils&&j.index===ve-1?(k=Ue,Yt.newParentId=k.newParentId,Yt.newInputName=k.newInputName,Yt.newCoordinate=k.newCoordinate,k.reason&&(Yt.reason?(k=new Set(k.reason.concat(Yt.reason)),Yt.reason=Array.from(k)):Yt.reason=k.reason),j.index=ve):Ue.type===t.CHANGE$$module$build$src$core$events$utils&&Ue.element===Yt.element&&Ue.name===Yt.name?Yt.newValue=Ue.newValue:Ue.type===ni?(j=Ue,Yt.viewTop=j.viewTop,Yt.viewLeft=j.viewLeft,Yt.scale=j.scale,Yt.oldScale=j.oldScale):(Ue.type!==rc||Yt.type!==vo)&&(w[k]={event:Ue,index:ve},p.push(Ue)):(w[k]={event:Ue,index:ve},p.push(Ue))}i=p.filter(function(ve){return!ve.isNull()}),a||i.reverse();for(let ve=1,Ue;Ue=i[ve];ve++)Ue.type===t.CHANGE$$module$build$src$core$events$utils&&Ue.element==="mutation"&&i.unshift(i.splice(ve,1)[0]);return i},re=function(){for(let i=0,a;a=wc[i];i++)a.recordUndo=!1},t.disable$$module$build$src$core$events$utils=function(){sa++},t.enable$$module$build$src$core$events$utils=function(){sa--},ie=function(){return sa===0},t.getGroup$$module$build$src$core$events$utils=function(){return Io},t.setGroup$$module$build$src$core$events$utils=function(i){Hf.setGroupInternal(i)},fe=function(i){Io=typeof i=="boolean"?i?q():"":i},Te=function(i){const a=[];i=i.getDescendants(!1);for(let p=0,w;w=i[p];p++)a[p]=w.id;return a},Fe=function(i,a){const p=Ie(i.type);if(!p)throw Error("Unknown event type.");return p.fromJson(i,a)},Ie=function(i){const a=h(Ft.EVENT,i);if(!a)throw Error(`Event type ${i} not found in registry.`);return a},qe=function(i){if((i.type===t.MOVE$$module$build$src$core$events$utils||i.type===t.CREATE$$module$build$src$core$events$utils)&&i.workspaceId){var a=b(i.workspaceId);if(!i.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(i=a.getBlockById(i.blockId)){const p=Qs;try{Qs=!1;const w=i.getParent();if(w&&w.isEnabled()){const k=i.getDescendants(!1);for(let j=0,ve;ve=k[j];j++)ve.setEnabled(!0)}else if((i.outputConnection||i.previousConnection)&&!a.isDragging())do i.setEnabled(!1),i=i.getNextBlock();while(i)}finally{Qs=p}}}},Re=function(i,a){Qe(),Ze=setTimeout(function(){a&&a.handleRightClick(i)},P)},Qe=function(){Ze&&(clearTimeout(Ze),Ze=0)},nt=function(){de=null},ft=function(i){return!i.type.startsWith("pointer")||i instanceof PointerEvent&&ze(i)},lt=function(i){return`${i.pointerId}`},ze=function(i){const a=lt(i);return de?de===a:i.type==="pointerdown"?(de=a,!0):!1},Ce=function(i,a,p,w,k){function j(Ue){(k||ft(Ue))&&(p?w.call(p,Ue):w(Ue))}const ve=[];if(a in Oe)for(let Ue=0;Ue<Oe[a].length;Ue++){const Yt=Oe[a][Ue];i.addEventListener(Yt,j,!1),ve.push([i,Yt,j])}else i.addEventListener(a,j,!1),ve.push([i,a,j]);return ve},He=function(i,a,p,w){function k(ve){p?w.call(p,ve):w(ve)}const j=[];if(a in Oe)for(let ve=0;ve<Oe[a].length;ve++){const Ue=Oe[a][ve];i.addEventListener(Ue,k,!1),j.push([i,Ue,k])}else i.addEventListener(a,k,!1),j.push([i,a,k]);return j},rt=function(i){const a=i[i.length-1][2];for(;i.length;){const[p,w,k]=i.pop();p.removeEventListener(w,k,!1)}return a},it=function(i){if(i.target instanceof HTMLElement){if(i.target.isContentEditable||i.target.getAttribute("data-is-text-input")==="true")return!0;if(i.target instanceof HTMLInputElement)return i=i.target,i.type==="text"||i.type==="number"||i.type==="email"||i.type==="password"||i.type==="search"||i.type==="tel"||i.type==="url";if(i.target instanceof HTMLTextAreaElement)return!0}return!1},Nt=function(i){return i.ctrlKey&&Ar?!0:i.button===2},kt=function(i,a,p){const w=a.createSVGPoint();return w.x=i.clientX,w.y=i.clientY,p||(p=a.getScreenCTM().inverse()),w.matrixTransform(p)},vt=function(i){switch(i.deltaMode){default:return{x:i.deltaX,y:i.deltaY};case 1:return{x:i.deltaX*Mh,y:i.deltaY*Mh};case 2:return{x:i.deltaX*ln,y:i.deltaY*ln}}},Mt=function(i,a){return a=i.indexOf(a),a===-1?!1:(i.splice(a,1),!0)},At=function(i){if(mf)throw Error("CSS already injected");Zh+=`
`+i},mt=function(i,a){mf||(mf=!0,i&&(i=a.replace(/[\\/]$/,""),a=Zh.replace(/<<<PATH>>>/g,i),Zh="",i=document.createElement("style"),i.id="blockly-common-style",a=document.createTextNode(a),i.appendChild(a),document.head.insertBefore(i,document.head.firstChild)))},xe=function(i,a,p,w){i=i+" was deprecated in "+a+" and will be deleted in "+p+".",w&&(i+=`
Use `+w+" instead."),g0.has(i)||(g0.add(i),console.warn(i))},se=function(i,a,p){i=document.createElementNS(Km,`${i}`);for(const w in a)i.setAttribute(w,`${a[w]}`);return p&&p.appendChild(i),i},$e=function(i,a){return a=a.split(" "),a.every(p=>i.classList.contains(p))?!1:(i.classList.add(...a),!0)},ht=function(i,a){i.classList.remove(...a.split(" "))},St=function(i,a){return a=a.split(" "),a.every(p=>!i.classList.contains(p))?!1:(i.classList.remove(...a),!0)},It=function(i,a){return i.classList.contains(a)},pt=function(i){return i&&i.parentNode?i.parentNode.removeChild(i):null},Ke=function(i,a){const p=a.nextSibling;if(a=a.parentNode,!a)throw Error("Reference node has no parent.");p?a.insertBefore(i,p):a.appendChild(i)},Le=function(i,a){return xe("Blockly.utils.dom.containsNode","version 10","version 11",'Use native "contains" DOM method'),i.contains(a)},Q=function(i,a){i.style.transform=a,i.style["-webkit-transform"]=a},te=function(){Ka++,Dd||(Dd=Object.create(null))},me=function(){Ka--,Ka||(Dd=null)},ke=function(i){const a=i.textContent+`
`+i.className.baseVal;let p;if(Dd&&(p=Dd[a]))return p;try{p=i.getComputedTextLength()}catch{return 8*i.textContent.length}return Dd&&(Dd[a]=p),p},Xe=function(i,a,p,w){return Wt(i,a+"pt",p,w)},Wt=function(i,a,p,w){const k=i.textContent;i=k+`
`+i.className.baseVal;var j;return Dd&&(j=Dd[i])||(Ur||(j=document.createElement("canvas"),j.className="blocklyComputeCanvas",document.body.appendChild(j),Ur=j.getContext("2d")),Ur.font=p+" "+a+" "+w,j=k?Ur.measureText(k).width:0,Dd&&(Dd[i]=j)),j},Ge=function(i,a,p,w){const k=document.createElement("span");k.style.font=p+" "+a+" "+w,k.textContent=i,i=document.createElement("div"),i.style.width="1px",i.style.height="0",a=document.createElement("div"),a.style.display="flex",a.style.position="fixed",a.style.top="0",a.style.left="0",a.appendChild(k),a.appendChild(i),document.body.appendChild(a),p={height:0,baseline:0};try{a.style.alignItems="baseline",p.baseline=i.offsetTop-k.offsetTop,a.style.alignItems="flex-end",p.height=i.offsetTop-k.offsetTop}finally{document.body.removeChild(a)}return p},tn=function(i){return T_.getSizeInternal(i)},_t=function(i){if(Kt(i,"display")!=="none")return Jt(i);const a=i.style,p=a.display,w=a.visibility,k=a.position;a.visibility="hidden",a.position="absolute",a.display="inline";const j=i.offsetWidth;return i=i.offsetHeight,a.display=p,a.position=k,a.visibility=w,new eo(j,i)},Jt=function(i){return new eo(i.offsetWidth,i.offsetHeight)},Kt=function(i,a){return i=window.getComputedStyle(i),i[a]||i.getPropertyValue(a)},On=function(i){const a=new _n(0,0);i=i.getBoundingClientRect();var p=document.documentElement;return p=new _n(window.pageXOffset||p.scrollLeft,window.pageYOffset||p.scrollTop),a.x=i.left+p.x,a.y=i.top+p.y,a},si=function(){const i=document.body,a=document.documentElement;return new _n(i.scrollLeft||a.scrollLeft,i.scrollTop||a.scrollTop)},Pr=function(i){const a=parseFloat(Kt(i,"borderLeftWidth")),p=parseFloat(Kt(i,"borderRightWidth")),w=parseFloat(Kt(i,"borderTopWidth"));return i=parseFloat(Kt(i,"borderBottomWidth")),new Oi(w,i,a,p)},Ei=function(i,a,p){i=$r(i,a,p),a.scrollLeft=i.x,a.scrollTop=i.y},$r=function(i,a,p){var w=On(i),k=On(a),j=Pr(a);const ve=w.x-k.x-j.left;return w=w.y-k.y-j.top,k=Jt(i),i=a.clientWidth-k.width,k=a.clientHeight-k.height,j=a.scrollLeft,a=a.scrollTop,p?(j+=ve-i/2,a+=w-k/2):(j+=Math.min(ve,Math.max(ve-i,0)),a+=Math.min(w,Math.max(w-k,0))),new _n(j,a)},gr=function(i){const a=new _n(0,0);var p=i.x&&i.getAttribute("x");const w=i.y&&i.getAttribute("y");return p&&(a.x=parseInt(p)),w&&(a.y=parseInt(w)),(p=(p=i.getAttribute("transform"))&&p.match(Ep))&&(a.x+=Number(p[1]),p[3]&&(a.y+=Number(p[3]))),(i=i.getAttribute("style"))&&-1<i.indexOf("translate")&&(i=i.match(em))&&(a.x+=Number(i[1]),i[3]&&(a.y+=Number(i[3]))),a},ne=function(i){let a=0,p=0;for(;i;){const w=gr(i);if(a+=w.x,p+=w.y,(" "+(i.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;i=i.parentNode}return new _n(a,p)},Se=function(){const i=si();return new Oi(i.y,document.documentElement.clientHeight+i.y,i.x,document.documentElement.clientWidth+i.x)},We=function(){const i=document.documentElement,a=window;return new _n(a.pageXOffset||i.scrollLeft,a.pageYOffset||i.scrollTop)},ot=function(i,a){var p=a.x;a=a.y;const w=i.getInjectionDiv().getBoundingClientRect();return p=new _n(p-w.left,a-w.top),a=i.getOriginOffsetInPixels(),_n.difference(p,a).scale(1/i.scale)},zt=function(i,a){var p=a.scale(i.scale);a=p.x,p=p.y;const w=i.getInjectionDiv().getBoundingClientRect();return i=i.getOriginOffsetInPixels(),new _n(a+w.left+i.x,p+w.top+i.y)},sn=function(i){({document:$p=$p,DOMParser:_l=_l,XMLSerializer:cu=cu}=i),Mg=new _l,tm=new cu},t.createElement$$module$build$src$core$utils$xml=function(i){return $p.createElementNS(Pd,i)},t.createTextNode$$module$build$src$core$utils$xml=function(i){return $p.createTextNode(i)},t.textToDom$$module$build$src$core$utils$xml=function(i){let a=Mg.parseFromString(i,"text/xml");if(a&&a.documentElement&&!a.getElementsByTagName("parsererror").length)return a.documentElement;if((a=Mg.parseFromString(i,"text/html"))&&a.body.firstChild&&a.body.firstChild.nodeName.toLowerCase()==="xml")return a.body.firstChild;throw Error(`DOMParser was unable to parse: ${i}`)},Nn=function(i){return De(tm.serializeToString(i))},De=function(i){return i.replace(gf,a=>`&#${a.charCodeAt(0)};`)},gt=function(i){return i?((i instanceof Element||typeof i=="string")&&(i=Br(i),i=_r(i)),Ct(i),i):null},Ct=function(i){const a=i.kind;if(i=i.contents,a&&a!==Ag&&a!==nh)throw Error("Invalid toolbox kind "+a+". Please supply either "+Ag+" or "+nh);if(!i)throw Error("Toolbox must have a contents attribute.")},bt=function(i){return i?i.contents?i.contents:Array.isArray(i)&&0<i.length&&!i[0].nodeType?i:Cr(i):[]},Vt=function(i){return _0.hasCategoriesInternal(i)},Wn=function(i){if(!i)return!1;const a=i.kind;return a?a===nh:!!i.contents.filter(function(p){return p.kind.toUpperCase()==="CATEGORY"}).length},rr=function(i){return i&&i.contents?!!i.contents.filter(function(a){return a.kind.toUpperCase()==="CATEGORY"}).length:!1},_r=function(i){const a={contents:Cr(i)};return i instanceof Node&&oi(i,a),a},Cr=function(i){const a=[];let p=i.childNodes;p||(p=i);for(let w=0,k;k=p[w];w++){if(!k.tagName)continue;i={};const j=k.tagName.toUpperCase();i.kind=j,j==="BLOCK"?i.blockxml=k:k.childNodes&&0<k.childNodes.length&&(i.contents=Cr(k)),oi(k,i),a.push(i)}return a},oi=function(i,a){for(let p=0;p<i.attributes.length;p++){const w=i.attributes[p];-1<w.nodeName.indexOf("css-")?(a.cssconfig=a.cssconfig||{},a.cssconfig[w.nodeName.replace("css-","")]=w.value):a[w.nodeName]=w.value}},Br=function(i){let a=null;if(i)if(typeof i=="string"){if(a=t.textToDom$$module$build$src$core$utils$xml(i),a.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else i instanceof Element&&(a=i);return a},Yr=function(i,a,p,w,k,j){const ve=j.scrollbar&&j.scrollbar.canScrollVertically();return i.horizontal===nm.LEFT?(p=k.absoluteMetrics.left+p,ve&&j.RTL&&(p+=xa.scrollbarThickness)):(p=k.absoluteMetrics.left+k.viewMetrics.width-a.width-p,ve&&!j.RTL&&(p-=xa.scrollbarThickness)),i.vertical===Ja.TOP?i=k.absoluteMetrics.top+w:(i=k.absoluteMetrics.top+k.viewMetrics.height-a.height-w,j.scrollbar&&j.scrollbar.canScrollHorizontally()&&(i-=xa.scrollbarThickness)),new Oi(i,i+a.height,p,p+a.width)},Ss=function(i,a){return{horizontal:a.toolboxMetrics.position===pr.LEFT||i.horizontalLayout&&!i.RTL?nm.RIGHT:nm.LEFT,vertical:a.toolboxMetrics.position===pr.BOTTOM?Ja.TOP:Ja.BOTTOM}},Oa=function(i,a,p,w){const k=i.left,j=i.right-i.left,ve=i.bottom-i.top;for(let Ue=0;Ue<w.length;Ue++){const Yt=w[Ue];i.intersects(Yt)&&(i=p===Fd.UP?Yt.top-ve-a:Yt.bottom+a,i=new Oi(i,i+ve,k,k+j),Ue=-1)}return i},xo=function(i,a){ts(i,a)},Yl=function(i){ts=i},nn=function(i,a){ku.confirmInternal(i,a)},Rr=function(i,a){hu(i,a)},el=function(i){hu=i},La=function(i,a,p){vl(i,a,p)},Fs=function(i){vl=i},zs=function(i){return i.getVariableModel!==void 0},Di=function(i){return i.getProcedureDef!==void 0},kr=function(i){return i.getProcedureCall!==void 0&&i.renameProcedure!==void 0},t.allUsedVarModels$$module$build$src$core$variables=function(i){i=i.getAllBlocks(!1);const a=new Set;for(let p=0;p<i.length;p++){const w=i[p].getVarModels();if(w)for(let k=0;k<w.length;k++){const j=w[k];j.getId()&&a.add(j)}}return Array.from(a.values())},t.allDeveloperVariables$$module$build$src$core$variables=function(i){i=i.getAllBlocks(!1);const a=new Set;for(let w=0,k;k=i[w];w++){var p=k.getDeveloperVariables;if(p){p=p();for(let j=0;j<p.length;j++)a.add(p[j])}}return Array.from(a.values())},An=function(i){let a=[];const p=document.createElement("button");return p.setAttribute("text","%{BKY_NEW_VARIABLE}"),p.setAttribute("callbackKey","CREATE_VARIABLE"),i.registerButtonCallback("CREATE_VARIABLE",function(w){ws(w.getTargetWorkspace())}),a.push(p),i=Ir(i),a=a.concat(i)},Ir=function(i){i=i.getVariablesOfType("");const a=[];if(0<i.length){var p=i[i.length-1];if(jr.variables_set){var w=t.createElement$$module$build$src$core$utils$xml("block");w.setAttribute("type","variables_set"),w.setAttribute("gap",jr.math_change?"8":"24"),w.appendChild(Xs(p)),a.push(w)}if(jr.math_change&&(w=t.createElement$$module$build$src$core$utils$xml("block"),w.setAttribute("type","math_change"),w.setAttribute("gap",jr.variables_get?"20":"8"),w.appendChild(Xs(p)),p=t.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),w.appendChild(p),a.push(w)),jr.variables_get){i.sort(_f.compareByName);for(let k=0,j;j=i[k];k++)p=t.createElement$$module$build$src$core$utils$xml("block"),p.setAttribute("type","variables_get"),p.setAttribute("gap","8"),p.appendChild(Xs(j)),a.push(p)}}return a},Gr=function(i){return rh.generateUniqueNameInternal(i)},yr=function(i){return Pi(im.charAt(0),i.getAllVariableNames())},Pi=function(i,a){if(!a.length)return i;const p=im;let w="",k=p.indexOf(i);for(;;){let j=!1;for(let ve=0;ve<a.length;ve++)if(a[ve].toLowerCase()===i){j=!0;break}if(!j)break;k++,k===p.length&&(k=0,w=`${Number(w)+1}`),i=p.charAt(k)+w}return i},ws=function(i,a,p){function w(j){fi(t.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,j,function(ve){if(ve){var Ue=tl(ve,i);if(Ue){if(Ue.type===k)var Yt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",Ue.name);else Yt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,Yt=Yt.replace("%1",Ue.name).replace("%2",Ue.type);xo(Yt,function(){w(ve)})}else i.createVariable(ve,k),a&&a(ve)}else a&&a(null)})}const k=p||"";w("")},t.renameVariable$$module$build$src$core$variables=function(i,a,p){function w(k){const j=t.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",a.name);fi(j,k,function(ve){if(ve){var Ue=gs(ve,a.type,i),Yt=Na(a.name,ve,i);if(Ue||Yt){var jn="";Ue?jn=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",Ue.name).replace("%2",Ue.type):Yt&&(jn=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",ve).replace("%2",Yt)),xo(jn,function(){w(ve)})}else i.renameVariableById(a.getId(),ve),p&&p(ve)}else p&&p(null)})}w("")},fi=function(i,a,p){La(i,a,function(w){w&&(w=w.replace(/[\s\xa0]+/g," ").trim(),w===t.Msg$$module$build$src$core$msg.RENAME_VARIABLE||w===t.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(w=null),p(w)})},gs=function(i,a,p){p=p.getVariableMap().getAllVariables(),i=i.toLowerCase();for(let w=0,k;k=p[w];w++)if(k.name.toLowerCase()===i&&k.type!==a)return k;return null},tl=function(i,a){a=a.getVariableMap().getAllVariables(),i=i.toLowerCase();for(let p=0,w;w=a[p];p++)if(w.name.toLowerCase()===i)return w;return null},Na=function(i,a,p){return p.getProcedureMap().getProcedures().length?dc(i,a,p):fc(i,a,p)},dc=function(i,a,p){i=i.toLowerCase(),a=a.toLowerCase(),p=p.getProcedureMap().getProcedures();for(const k of p){var w=k.getParameters().filter(zs).map(j=>j.getVariableModel().name);if(w&&(p=w.some(j=>j.toLowerCase()===i),w=w.some(j=>j.toLowerCase()===a),p&&w))return k.getName()}return null},fc=function(i,a,p){i=i.toLowerCase(),a=a.toLowerCase(),p=p.getAllBlocks(!1);for(const k of p){if(!Di(k))continue;p=k.getProcedureDef();var w=p[1];const j=w.some(ve=>ve.toLowerCase()===i);if(w=w.some(ve=>ve.toLowerCase()===a),j&&w)return p[0]}return null},Xs=function(i){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name","VAR"),a.setAttribute("id",i.getId()),a.setAttribute("variabletype",i.type),i=t.createTextNode$$module$build$src$core$utils$xml(i.name),a.appendChild(i),a},t.getOrCreateVariablePackage$$module$build$src$core$variables=function(i,a,p,w){let k=t.getVariable$$module$build$src$core$variables(i,a,p,w);return k||(k=qo(i,a,p,w)),k},t.getVariable$$module$build$src$core$variables=function(i,a,p,w){const k=i.getPotentialVariableMap();let j=null;if(a&&(j=i.getVariableById(a),!j&&k&&(j=k.getVariableById(a)),j))return j;if(p){if(w===void 0)throw Error("Tried to look up a variable by name without a type");j=i.getVariable(p,w),!j&&k&&(j=k.getVariable(p,w))}return j},qo=function(i,a,p,w){const k=i.getPotentialVariableMap();return p||(p=Gr(i.isFlyout?i.targetWorkspace:i)),k?k.createVariable(p,w,a):i.createVariable(p,w,a)},Xl=function(i,a){i=i.getAllVariables();const p=[];if(a.length!==i.length)for(let w=0;w<i.length;w++){const k=i[w];a.indexOf(k)===-1&&p.push(k)}return p},gu=function(i,a){r(Ft.PASTER,i,a)},mh=function(i){o(Ft.PASTER,i)},Qo=function(i){return gh(i),Dc()?(Pc(),Promise.resolve()):(Gd||(Gd=new Promise(a=>{Qm=a,$c=window.requestAnimationFrame(()=>{Pc(),a()})})),Gd)},vr=function(){return Gd||Promise.resolve()},xi=function(i){i||window.cancelAnimationFrame($c),Pc(i),!i&&Qm&&Qm()},Dc=function(){return on},gh=function(i){Rg.add(i);const a=i.getParent();a?gh(a):Mp.add(i)},Pc=function(i){const a=i?new Set([i]):new Set([...Mp].map(k=>k.workspace)),p=[...Mp].filter(_u).filter(k=>a.has(k.workspace));for(var w of p)xl(w);for(const k of a)k.resizeContents();for(const k of p)w=k.getRelativeToSurfaceXY(),k.updateComponentLocations(w);for(const k of p)El(k);i||(Gd=null)},El=function(i){Mp.delete(i),Rg.delete(i);for(const a of i.getChildren(!1))El(a)},_u=function(i){return!i.isDisposed()&&!i.getParent()},xl=function(i){if(Rg.has(i)){for(const a of i.getChildren(!1))xl(a);i.renderEfficiently()}},$l=function(i,a){const p=t.createElement$$module$build$src$core$utils$xml("xml");var w=br(t.allUsedVarModels$$module$build$src$core$variables(i));w.hasChildNodes()&&p.appendChild(w),w=i.getTopComments(!0);for(let k=0;k<w.length;k++)p.appendChild(w[k].toXmlWithXY(a));for(i=i.getTopBlocks(!0),w=0;w<i.length;w++)p.appendChild(Tr(i[w],a));return p},br=function(i){const a=t.createElement$$module$build$src$core$utils$xml("variables");for(let p=0;p<i.length;p++){const w=i[p],k=t.createElement$$module$build$src$core$utils$xml("variable");k.appendChild(t.createTextNode$$module$build$src$core$utils$xml(w.name)),w.type&&k.setAttribute("type",w.type),k.id=w.getId(),a.appendChild(k)}return a},Tr=function(i,a){if(i.isInsertionMarker()&&(i=i.getChildren(!1)[0],!i))return new DocumentFragment;let p=0;if(i.workspace.RTL&&(p=i.workspace.getWidth()),a=rl(i,a),Hu(a)){const w=i.getRelativeToSurfaceXY();a.setAttribute("x",String(Math.round(i.workspace.RTL?p-w.x:w.x))),a.setAttribute("y",String(Math.round(w.y)))}return a},Kl=function(i){if(i.isSerializable()){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name",i.name||""),i.toXml(a)}return null},nl=function(i,a){for(let p=0;p<i.inputList.length;p++){const w=i.inputList[p];for(let k=0;k<w.fieldRow.length;k++){const j=Kl(w.fieldRow[k]);j&&a.appendChild(j)}}},rl=function(i,a){if(i.isInsertionMarker())return(a=i.getChildren(!1)[0])?rl(a):new DocumentFragment;const p=t.createElement$$module$build$src$core$utils$xml(i.isShadow()?"shadow":"block");if(p.setAttribute("type",i.type),a||(p.id=i.id),i.mutationToDom){var w=i.mutationToDom();w&&(w.hasChildNodes()||w.hasAttributes())&&p.appendChild(w)}if(nl(i,p),w=i.getCommentText()){var k=i.getIcon(jo.COMMENT),j=k.getBubbleSize();k=k.bubbleIsVisible();var ve=t.createElement$$module$build$src$core$utils$xml("comment");ve.appendChild(t.createTextNode$$module$build$src$core$utils$xml(w)),ve.setAttribute("pinned",`${k}`),ve.setAttribute("h",String(j.height)),ve.setAttribute("w",String(j.width)),p.appendChild(ve)}for(i.data&&(w=t.createElement$$module$build$src$core$utils$xml("data"),w.appendChild(t.createTextNode$$module$build$src$core$utils$xml(i.data)),p.appendChild(w)),w=0;w<i.inputList.length;w++){j=i.inputList[w];var Ue=void 0;if(k=!0,j.type!==t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&j.type!==t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){ve=j.connection.targetBlock(),j.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?Ue=t.createElement$$module$build$src$core$utils$xml("value"):j.type===t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(Ue=t.createElement$$module$build$src$core$utils$xml("statement"));const jn=j.connection.getShadowDom();!jn||ve&&ve.isShadow()||Ue.appendChild(vu(jn,a)),ve&&(ve=rl(ve,a),ve.nodeType===Gf.ELEMENT_NODE&&(Ue.appendChild(ve),k=!1)),Ue.setAttribute("name",j.name),k||p.appendChild(Ue)}}i.inputsInline!==void 0&&i.inputsInline!==i.inputsInlineDefault&&p.setAttribute("inline",String(i.inputsInline)),i.isCollapsed()&&p.setAttribute("collapsed","true"),i.isEnabled()||p.setAttribute("disabled","true"),i.isDeletable()||i.isShadow()||p.setAttribute("deletable","false"),i.isMovable()||i.isShadow()||p.setAttribute("movable","false"),i.isEditable()||p.setAttribute("editable","false"),Ue=i.getNextBlock();let Yt;return Ue&&(w=rl(Ue,a),w.nodeType===Gf.ELEMENT_NODE&&(Yt=t.createElement$$module$build$src$core$utils$xml("next"),Yt.appendChild(w),p.appendChild(Yt))),i=i.nextConnection&&i.nextConnection.getShadowDom(),!i||Ue&&Ue.isShadow()||Yt.appendChild(vu(i,a)),p},vu=function(i,a){let p=i=i.cloneNode(!0),w;for(;p;)if(a&&p.nodeName==="shadow"&&p.removeAttribute("id"),p.firstChild)p=p.firstChild;else{for(;p&&!p.nextSibling;){w=p,p=p.parentNode;let k;w.nodeType===Gf.TEXT_NODE&&w.data.trim()===""&&((k=p)==null?void 0:k.firstChild)!==w&&pt(w)}p&&(w=p,p=p.nextSibling,w.nodeType===Gf.TEXT_NODE&&w.data.trim()===""&&pt(w))}return i},qi=function(i){return Nn(i).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},_s=function(i){i=qi(i).split("<");let a="";for(let p=1;p<i.length;p++){const w=i[p];w[0]==="/"&&(a=a.substring(2)),i[p]=a+"<"+w,w[0]!=="/"&&w.slice(-2)!=="/>"&&(a+="  ")}return i=i.join(`
`),i=i.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),i.replace(/^\n/,"")},il=function(i,a){return a.setResizesEnabled(!1),a.clear(),i=t.domToWorkspace$$module$build$src$core$xml(i,a),a.setResizesEnabled(!0),i},t.domToWorkspace$$module$build$src$core$xml=function(i,a){let p=0;a.RTL&&(p=a.getWidth());const w=[];te();const k=t.getGroup$$module$build$src$core$events$utils();k||t.setGroup$$module$build$src$core$events$utils(!0),a.setResizesEnabled&&a.setResizesEnabled(!1);let j=!0;try{for(let ve=0,Ue;Ue=i.childNodes[ve];ve++){const Yt=Ue.nodeName.toLowerCase(),jn=Ue;if(Yt==="block"||Yt==="shadow"&&!ae()){const bl=io(jn,a);w.push(bl.id);let Qa;const Fp=parseInt((Qa=jn.getAttribute("x"))!=null?Qa:"10",10);let HT;const GT=parseInt((HT=jn.getAttribute("y"))!=null?HT:"10",10);isNaN(Fp)||isNaN(GT)||bl.moveBy(a.RTL?p-Fp:Fp,GT,["create"]),j=!1}else{if(Yt==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(Yt==="comment")a.rendered?zl.fromXmlRendered(jn,a,p):ih.fromXml(jn,a);else if(Yt==="variables"){if(j)zu(jn,a);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");j=!1}}}}finally{t.setGroup$$module$build$src$core$events$utils(k),a.setResizesEnabled&&a.setResizesEnabled(!0),a.rendered&&xi(),me()}return ue(new(Ie(Sa))(a)),w},Cd=function(i,a){if(!a.getBlocksBoundingBox)return t.domToWorkspace$$module$build$src$core$xml(i,a);var p=a.getBlocksBoundingBox();if(i=t.domToWorkspace$$module$build$src$core$xml(i,a),p&&p.top!==p.bottom){var w=p.bottom;p=a.RTL?p.right:p.left;var k=1/0;let j=-1/0,ve=1/0;for(let Ue=0;Ue<i.length;Ue++){const Yt=a.getBlockById(i[Ue]).getRelativeToSurfaceXY();Yt.y<ve&&(ve=Yt.y),Yt.x<k&&(k=Yt.x),Yt.x>j&&(j=Yt.x)}for(w=w-ve+10,p=a.RTL?p-j:p-k,k=0;k<i.length;k++)a.getBlockById(i[k]).moveBy(p,w,["create"])}return i},t.domToBlock$$module$build$src$core$xml=function(i,a){return i=io(i,a),a.rendered&&xi(),i},io=function(i,a){t.disable$$module$build$src$core$events$utils();var p=a.getAllVariables();let w;try{if(w=_h(i,a),a.rendered){const k=w,j=w.getDescendants(!1);k.setConnectionTracking(!1);for(let ve=j.length-1;0<=ve;ve--)j[ve].initSvg();for(let ve=j.length-1;0<=ve;ve--)j[ve].queueRender();setTimeout(function(){k.disposed||k.setConnectionTracking(!0)},1),a.resizeContents()}else{const k=w.getDescendants(!1);for(let j=k.length-1;0<=j;j--)k[j].initModel()}}finally{t.enable$$module$build$src$core$events$utils()}if(ie()){for(i=Xl(a,p),a=0;a<i.length;a++)p=i[a],ue(new(Ie(go))(p));ue(new(Ie(t.CREATE$$module$build$src$core$events$utils))(w))}return w},zu=function(i,a){for(let w=0;w<i.children.length;w++){var p=i.children[w];const k=p.getAttribute("type"),j=p.getAttribute("id");if(p=p.textContent,!p)break;a.createVariable(p,k,j)}},ca=function(i){const a={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let p=0;p<i.children.length;p++){const w=i.children[p];if(w.nodeType!==Gf.TEXT_NODE)switch(w.nodeName.toLowerCase()){case"mutation":a.mutation.push(w);break;case"comment":a.comment.push(w);break;case"data":a.data.push(w);break;case"title":case"field":a.field.push(w);break;case"value":case"statement":a.input.push(w);break;case"next":a.next.push(w);break;default:console.warn("Ignoring unknown tag: "+w.nodeName)}}return a},yu=function(i,a){let p=!1;for(let w=0;w<i.length;w++){const k=i[w];a.domToMutation&&(a.domToMutation(k),a.initSvg&&(p=!0))}return p},or=function(i,a){for(let w=0;w<i.length;w++){var p=i[w];const k=p.textContent,j=p.getAttribute("pinned")==="true";let ve;const Ue=parseInt((ve=p.getAttribute("w"))!=null?ve:"50",10);let Yt;p=parseInt((Yt=p.getAttribute("h"))!=null?Yt:"50",10),a.setCommentText(k);const jn=a.getIcon(jo.COMMENT);isNaN(Ue)||isNaN(p)||jn.setBubbleSize(new eo(Ue,p)),jn.setBubbleVisible(j),setTimeout(()=>jn.setBubbleVisible(j),1)}},Gn=function(i,a){for(let p=0;p<i.length;p++)a.data=i[p].textContent},Es=function(i,a){for(let p=0;p<i.length;p++){const w=i[p],k=w.getAttribute("name");k?Da(a,k,w):console.warn(`Ignoring unnamed field in block ${a.type}`)}},so=function(i){let a=null,p=null;for(let w=0;w<i.childNodes.length;w++){const k=i.childNodes[w];Hu(k)&&(k.nodeName.toLowerCase()==="block"?a=k:k.nodeName.toLowerCase()==="shadow"&&(p=k))}return{childBlockElement:a,childShadowElement:p}},Uu=function(i,a,p,w){for(let j=0;j<i.length;j++){var k=i[j];const ve=k.getAttribute("name"),Ue=ve?p.getInput(ve):null;if(!Ue){console.warn("Ignoring non-existent input "+ve+" in block "+w);break}if(k=so(k),k.childBlockElement){if(!Ue.connection)throw TypeError("Input connection does not exist.");_h(k.childBlockElement,a,Ue.connection,!1)}if(k.childShadowElement){let Yt;(Yt=Ue.connection)==null||Yt.setShadowDom(k.childShadowElement)}}},bu=function(i,a,p){for(let w=0;w<i.length;w++){const k=so(i[w]);if(k.childBlockElement){if(!p.nextConnection)throw TypeError("Next statement does not exist.");if(p.nextConnection.isConnected())throw TypeError("Next statement is already connected.");_h(k.childBlockElement,a,p.nextConnection,!0)}k.childShadowElement&&p.nextConnection&&p.nextConnection.setShadowDom(k.childShadowElement)}},_h=function(i,a,p,w){var k;const j=i.getAttribute("type");if(!j)throw TypeError("Block type unspecified: "+i.outerHTML);var ve=(k=i.getAttribute("id"))!=null?k:void 0;k=a.newBlock(j,ve),ve=ca(i);const Ue=yu(ve.mutation,k);if(or(ve.comment,k),Gn(ve.data,k),p)if(w)if(k.previousConnection)p.connect(k.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(k.outputConnection)p.connect(k.outputConnection);else if(k.previousConnection)p.connect(k.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Es(ve.field,k),Uu(ve.input,a,k,j),bu(ve.next,a,k),Ue&&k.initSvg(),(a=i.getAttribute("inline"))&&k.setInputsInline(a==="true"),(a=i.getAttribute("disabled"))&&k.setEnabled(a!=="true"&&a!=="disabled"),(a=i.getAttribute("deletable"))&&k.setDeletable(a==="true"),(a=i.getAttribute("movable"))&&k.setMovable(a==="true"),(a=i.getAttribute("editable"))&&k.setEditable(a==="true"),(a=i.getAttribute("collapsed"))&&k.setCollapsed(a==="true"),i.nodeName.toLowerCase()==="shadow"){for(i=k.getChildren(!1),a=0;a<i.length;a++)if(!i[a].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");k.setShadow(!0)}return k},Da=function(i,a,p){const w=i.getField(a);w?w.fromXml(p):console.warn("Ignoring non-existent field "+a+" in block "+i.type)},ha=function(i){for(let a=0;a<i.childNodes.length;a++){const p=i.childNodes[a];if(p.nodeName.toLowerCase()==="next"){i.removeChild(p);break}}},Hu=function(i){return i.nodeType===Gf.ELEMENT_NODE},wr=function(i){return i.saveState!==void 0&&i.loadState!==void 0},Rs=function(i,a){r(Ft.SERIALIZER,i,a)},bi=function(i){o(Ft.SERIALIZER,i)},$i=function(i,{addCoordinates:a=!1,addInputBlocks:p=!0,addNextBlocks:w=!0,doFullSerialization:k=!0,saveIds:j=!0}={}){if(i.isInsertionMarker())return null;const ve={type:i.type,id:j?i.id:void 0};return a&&Zr(i,ve),da(i,ve),Tu(i,ve,k),$o(i,ve,k),Su(i,ve,k),p&&sl(i,ve,k,j),w&&Bi(i,ve,k,j),ve},da=function(i,a){i.isCollapsed()&&(a.collapsed=!0),i.isEnabled()||(a.enabled=!1),i.isOwnDeletable()||(a.deletable=!1),i.isOwnMovable()||(a.movable=!1),i.isOwnEditable()||(a.editable=!1),i.inputsInline!==void 0&&i.inputsInline!==i.inputsInlineDefault&&(a.inline=i.inputsInline),i.data&&(a.data=i.data)},Zr=function(i,a){const p=i.workspace;i=i.getRelativeToSurfaceXY(),a.x=Math.round(p.RTL?p.getWidth()-i.x:i.x),a.y=Math.round(i.y)},Tu=function(i,a,p){i.saveExtraState?(i=i.saveExtraState(p),i!==null&&(a.extraState=i)):i.mutationToDom&&(i=i.mutationToDom(),i!==null&&(a.extraState=qi(i).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},$o=function(i,a,p){const w=Object.create(null);for(const k of i.getIcons())wr(k)&&(i=k.saveState(p))&&(w[k.getType().toString()]=i);Object.keys(w).length&&(a.icons=w)},Su=function(i,a,p){const w=Object.create(null);for(let k=0;k<i.inputList.length;k++){const j=i.inputList[k];for(let ve=0;ve<j.fieldRow.length;ve++){const Ue=j.fieldRow[ve];Ue.isSerializable()&&(w[Ue.name]=Ue.saveState(p))}}Object.keys(w).length&&(a.fields=w)},sl=function(i,a,p,w){const k=Object.create(null);for(let j=0;j<i.inputList.length;j++){const ve=i.inputList[j];if(!ve.connection)continue;const Ue=Ci(ve.connection,p,w);Ue&&(k[ve.name]=Ue)}Object.keys(k).length&&(a.inputs=k)},Bi=function(i,a,p,w){i.nextConnection&&(i=Ci(i.nextConnection,p,w))&&(a.next=i)},Ci=function(i,a,p){const w=i.getShadowState(!0);if(i=i.targetBlock(),!w&&!i)return null;const k=Object.create(null);return w&&(k.shadow=w),i&&!i.isShadow()&&(k.block=$i(i,{doFullSerialization:a,saveIds:p})),k},Vn=function(i,a,{recordUndo:p=!1}={}){return i=Mi(i,a,{recordUndo:p}),a.rendered&&xi(),i},Mi=function(i,a,{parentConnection:p,isShadow:w=!1,recordUndo:k=!1}={}){const j=ae();he(k),(k=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),t.disable$$module$build$src$core$events$utils();let ve;try{ve=Xr(i,a,{parentConnection:p,isShadow:w})}finally{t.enable$$module$build$src$core$events$utils()}if(ie()&&ue(new(Ie(t.CREATE$$module$build$src$core$events$utils))(ve)),t.setGroup$$module$build$src$core$events$utils(k),he(j),a.rendered){const Ue=ve;setTimeout(()=>{Ue.disposed||Ue.setConnectionTracking(!0)},1)}return ve},Xr=function(i,a,{parentConnection:p,isShadow:w=!1}={}){if(!i.type)throw new w_(i);const k=a.newBlock(i.type,i.id);return k.setShadow(w),dd(k,i),wu(k,i),Vi(k,i),Pa(p,k,i),vh(k,i),fr(k,i),Zo(k,i),fd(k,i),Bc(k,a.rendered),k},dd=function(i,a){let p=a.x===void 0?0:a.x;a=a.y===void 0?0:a.y;const w=i.workspace;p=w.RTL?w.getWidth()-p:p,i.moveBy(p,a)},wu=function(i,a){a.collapsed&&i.setCollapsed(!0),a.deletable===!1&&i.setDeletable(!1),a.movable===!1&&i.setMovable(!1),a.editable===!1&&i.setEditable(!1),a.enabled===!1&&i.setEnabled(!1),a.inline!==void 0&&i.setInputsInline(a.inline),a.data!==void 0&&(i.data=a.data)},Vi=function(i,a){a.extraState&&(i.loadExtraState?i.loadExtraState(a.extraState):i.domToMutation&&i.domToMutation(t.textToDom$$module$build$src$core$utils$xml(a.extraState)))},Pa=function(i,a,p){if(i){if(i.getSourceBlock().isShadow()&&!a.isShadow())throw new Av(p);if(i.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var w=a.outputConnection;if(!w)throw new om("output",a,p)}else if(w=a.previousConnection,!w)throw new om("previous",a,p);if(!i.connect(w)){const k=a.workspace.connectionChecker;throw new y0(k.getErrorMessage(k.canConnectWithReason(w,i,!1),w,i),i.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",a,p)}}},vh=function(i,a){if(a.icons){var p=Object.keys(a.icons);for(const k of p){p=a.icons[k];var w=i.getIcon(k);if(!w){if(w=h(Ft.ICON,k,!1),!w)throw new Wf(k,i,a);w=new w(i),i.addIcon(w)}wr(w)&&w.loadState(p)}}},fr=function(i,a){if(a.fields){var p=Object.keys(a.fields);for(let w=0;w<p.length;w++){const k=p[w],j=a.fields[k],ve=i.getField(k);ve?ve.loadState(j):console.warn(`Ignoring non-existant field ${k} in block ${i.type}`)}}},Zo=function(i,a){if(a.inputs){var p=Object.keys(a.inputs);for(let w=0;w<p.length;w++){const k=p[w],j=i.getInput(k);if(!j||!j.connection)throw new om(k,i,a);lf(j.connection,a.inputs[k])}}},fd=function(i,a){if(a.next){if(!i.nextConnection)throw new om("next",i,a);lf(i.nextConnection,a.next)}},lf=function(i,a){a.shadow&&i.setShadowState(a.shadow),a.block&&Xr(a.block,i.getSourceBlock().workspace,{parentConnection:i})},Bc=function(i,a){if(a){i.setConnectionTracking(!1),i.initSvg(),i.queueRender();for(const p of i.getIcons())p.onLocationChange(i.getRelativeToSurfaceXY())}else i.initModel()},uf=function(i){const a=i.workspace,p=t.config$$module$build$src$core$config.snapRadius,w=i.getRelativeToSurfaceXY(),k=new _n(0,0),j=a.getAllBlocks(!1).filter(ve=>ve.id!=i.id).map(ve=>ve.getRelativeToSurfaceXY());for(;Bf(_n.sum(w,k),j)||Tp(i,k,p);)a.RTL?k.translate(-p,2*p):k.translate(p,2*p);i.moveTo(_n.sum(w,k))},Bf=function(i,a){return a.some(p=>1>=Math.abs(p.x-i.x)&&1>=Math.abs(p.y-i.y))},Tp=function(i,a,p){return i.getConnections_(!1).some(w=>!!w.closest(p,a).connection)},Md=function(i){return xe("Blockly.clipboard.copy","v11","v12","myCopyable.toCopyData()"),x0.copyInternal(i)},Jl=function(i){const a=i.toCopyData();aa=a;let p;return $_=(p=i.workspace)!=null?p:null,a},ks=function(i,a,p){return i&&a?Gu(i,a,p):aa&&$_?Gu(aa,$_):null},Gu=function(i,a,p){let w;a=(w=a.getRootWorkspace())!=null?w:a;let k,j;return(j=(k=f(Ft.PASTER,i.paster,!1))==null?void 0:k.paste(i,a,p))!=null?j:null},yh=function(i){return xe("Blockly.clipboard.duplicate","v11","v12","Blockly.clipboard.paste(myCopyable.toCopyData(), myWorkspace)"),x0.duplicateInternal(i)},Ba=function(i){const a=i.toCopyData();return a?ks(a,i.workspace):null},ci=function(i,a){i.setAttribute(Iv,a)},Er=function(i,a,p){Array.isArray(p)&&(p=p.join(" ")),i.setAttribute(sb+a,`${p}`)},oo=function(){return bd},Fa=function(i){if(bd=i,i===null){let a;(a=document.querySelector("."+Yf))==null||a.remove()}},zo=function(){document.querySelector("."+Yf)||(bd=document.createElement("div"),bd.className=Yf,(D()||document.body).appendChild(bd))},ql=function(i,a,p){Ql(),ed=i,cm=p,(i=bd)&&(i.style.direction=a?"rtl":"ltr",i.style.display="block",a=A(),Xf=a.getRenderer().getClassName(),kp=a.getTheme().getClassName(),Xf&&$e(i,Xf),kp&&$e(i,kp))},Ql=function(){if(Fh()){ed=null;var i=bd;i&&(i.style.display="none",i.style.left="",i.style.top="",cm&&cm(),cm=null,i.textContent="",Xf&&(St(i,Xf),Xf=""),kp&&(St(i,kp),kp=""),A().markFocused())}},Fh=function(){return!!ed},Wr=function(i){ed===i&&Ql()},Ai=function(i,a,p){bd.style.left=i+"px",bd.style.top=a+"px",bd.style.height=p+"px"},Sr=function(i,a,p,w){const k=fa(i,a,p);i=ji(i,a,p,w),0>k?Ai(i,0,p.height+k):Ai(i,k,p.height)},ji=function(i,a,p,w){return w?Math.min(Math.max(a.right-p.width,i.left),i.right-p.width):Math.max(Math.min(a.left,i.right-p.width),i.left)},fa=function(i,a,p){return a.bottom+p.height>=i.bottom?a.top-p.height:a.bottom},Eu=function(i){return!(i==null||!i.repositionForWindowResize)},cf=function(){Eu(ed)&&ed.repositionForWindowResize()||Ql()},hf=function(){return Zm},pd=function(i){Zm=i},Wu=function(i,a,p){if(ql(Rv,p,Us),a.length){var w=ol(a,p);Og=w,Fc(w,i,p),setTimeout(function(){w.focus()},1),Zm=null}else Zl()},ol=function(i,a){const p=new kg;p.setRole(oh.MENU);for(let w=0;w<i.length;w++){const k=i[w],j=new jf(k.text);j.setRightToLeft(a),j.setRole(oh.MENUITEM),p.addChild(j),j.setEnabled(k.enabled),k.enabled&&j.onAction(function(){Zl(),requestAnimationFrame(()=>{setTimeout(()=>{k.callback(k.scope)},0)})},{})}return p},Fc=function(i,a,p){const w=Se();a=new Oi(a.clientY+w.top,a.clientY+w.top,a.clientX+w.left,a.clientX+w.left),zh(i);const k=i.getSize();p&&(a.left+=k.width,a.right+=k.width,w.left+=k.width,w.right+=k.width),Sr(w,a,k,p),i.focus()},zh=function(i){var a=oo();if(!a)throw Error("Attempting to create a context menu when widget div is null");a=i.render(a),$e(a,"blocklyContextMenu"),Ce(a,"contextmenu",null,Vu),i.focus()},Vu=function(i){i.preventDefault(),i.stopPropagation()},Zl=function(){Wr(Rv),Zm=null},Us=function(){Og&&(Og.dispose(),Og=null)},t.callbackFactory$$module$build$src$core$contextmenu=function(i,a){return()=>{t.disable$$module$build$src$core$events$utils();let p;try{p=a instanceof Element?io(a,i.workspace):Mi(a,i.workspace);const w=i.getRelativeToSurfaceXY();w.x=i.RTL?w.x-t.config$$module$build$src$core$config.snapRadius:w.x+t.config$$module$build$src$core$config.snapRadius,w.y+=2*t.config$$module$build$src$core$config.snapRadius,p.moveBy(w.x,w.y)}finally{t.enable$$module$build$src$core$events$utils()}return ie()&&!p.isShadow()&&ue(new(Ie(t.CREATE$$module$build$src$core$events$utils))(p)),p.select(),p}},eu=function(i){return{text:t.Msg$$module$build$src$core$msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.setGroup$$module$build$src$core$events$utils(!0),i.dispose(),t.setGroup$$module$build$src$core$events$utils(!1)}}},Uh=function(i){return{text:t.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){const a=i.toCopyData();a&&ks(a,i.workspace)}}},zc=function(i,a){const p={enabled:!0};return p.text=t.Msg$$module$build$src$core$msg.ADD_COMMENT,p.callback=function(){const w=new zl(i,t.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT,zl.DEFAULT_SIZE,zl.DEFAULT_SIZE);var k=i.getInjectionDiv().getBoundingClientRect();k=new _n(a.clientX-k.left,a.clientY-k.top);const j=i.getOriginOffsetInPixels();k=_n.difference(k,j),k.scale(1/i.scale),w.moveBy(k.x,k.y),i.rendered&&(w.initSvg(),w.render(),w.select())},p},Uc=function(i){return i*Math.PI/180},is=function(i){return 180*i/Math.PI},Fr=function(i,a,p){if(p<i){const w=p;p=i,i=w}return Math.max(i,Math.min(a,p))},Cl=function(){document.querySelector(".blocklyDropDownDiv")||(Si=document.createElement("div"),Si.className="blocklyDropDownDiv",(D()||document.body).appendChild(Si),qf=document.createElement("div"),qf.className="blocklyDropDownContent",Si.appendChild(qf),fm=document.createElement("div"),fm.className="blocklyDropDownArrow",Si.appendChild(fm),Si.style.opacity="0",Si.style.transition="transform "+Op+"s, opacity "+Op+"s",Si.addEventListener("focusin",function(){$e(Si,"blocklyFocused")}),Si.addEventListener("focusout",function(){St(Si,"blocklyFocused")}))},za=function(i){pm=i},tu=function(){return Lp},xu=function(){return qf},bh=function(){qf.textContent="",qf.style.width=""},Ad=function(i,a){Si.style.backgroundColor=i,Si.style.borderColor=a},pi=function(i,a,p,w){return Ot(je(a),i,p,w)},ye=function(i,a,p){return Ng=!0,Ot(Be(i),i,a,p)},je=function(i){var a=i.getSvgRoot();const p=i.workspace.scale,w=i.height*p;return i=i.width*p,a=On(a),new Oi(a.y,a.y+w,a.x,a.x+i)},Be=function(i){return i=i.getScaledBBox(),new Oi(i.top,i.bottom,i.left,i.right)},Ot=function(i,a,p,w){const k=i.left+(i.right-i.left)/2,j=i.bottom;i=i.top,w&&(i+=w),w=a.getSourceBlock();let ve=w.workspace;for(;ve.options.parentWorkspace;)ve=ve.options.parentWorkspace;return za(ve.getParentSvg().parentNode),rn(a,w.RTL,k,j,k,i,p)},rn=function(i,a,p,w,k,j,ve){return Lp=i,Kf=ve||null,Si.style.direction=a?"rtl":"ltr",i=A(),Jf=i.getRenderer().getClassName(),dm=i.getTheme().getClassName(),Jf&&$e(Si,Jf),dm&&$e(Si,dm),Fi(p,w,k,j)},In=function(i,a,p,w){return i=zr(i,p.left,p.right,w.width),{initialX:i.divX,initialY:a,finalX:i.divX,finalY:a+tg,arrowX:i.arrowX,arrowY:-(eg/2+Lg),arrowAtTop:!0,arrowVisible:!0}},Jn=function(i,a,p,w){return i=zr(i,p.left,p.right,w.width),{initialX:i.divX,initialY:a-w.height,finalX:i.divX,finalY:a-w.height-tg,arrowX:i.arrowX,arrowY:w.height-2*Lg-eg/2,arrowAtTop:!1,arrowVisible:!0}},vn=function(i,a,p){return i=zr(i,a.left,a.right,p.width),{initialX:i.divX,initialY:0,finalX:i.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},zr=function(i,a,p,w){return a=Fr(a,i-w/2,p-w),i=i-eg/2-a,p=kv,i=Fr(p,i,w-p-eg),{arrowX:i,divX:a}},ao=function(){return!!Lp},Ti=function(i,a){return Lp===i?(a?al():lo(),!0):!1},lo=function(){Si.style.transform="translate(0, 0)",Si.style.opacity="0",ng=setTimeout(function(){al()},1e3*Op),Kf&&(Kf(),Kf=null)},al=function(){ao()&&(ng&&clearTimeout(ng),Si.style.transform="",Si.style.left="",Si.style.top="",Si.style.opacity="0",Si.style.display="none",Si.style.backgroundColor="",Si.style.borderColor="",Kf&&(Kf(),Kf=null),bh(),Lp=null,Jf&&(St(Si,Jf),Jf=""),dm&&(St(Si,dm),dm=""),A().markFocused())},Fi=function(i,a,p,w){i=v.getPositionMetrics(i,a,p,w),i.arrowVisible?(fm.style.display="",fm.style.transform="translate("+i.arrowX+"px,"+i.arrowY+"px) rotate(45deg)",fm.setAttribute("class",i.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):fm.style.display="none",a=Math.floor(i.initialX),p=Math.floor(i.initialY),w=Math.floor(i.finalX);const k=Math.floor(i.finalY);return Si.style.left=a+"px",Si.style.top=p+"px",Si.style.display="block",Si.style.opacity="1",Si.style.transform="translate("+(w-a)+"px,"+(k-p)+"px)",!!i.arrowAtTop},vs=function(){if(Lp){var i=Lp.getSourceBlock();i=Ng?Be(Lp):je(i);const a=i.left+(i.right-i.left)/2;Fi(a,i.bottom,a,i.top)}else lo()},$u=function(i){if(!(100<i.getDescendants(!1).length)){var a=i.workspace,p=i.getSvgRoot();a.getAudioManager().play("delete");var w=a.getSvgXY(p);p=p.cloneNode(!0),p.setAttribute("transform","translate("+w.x+","+w.y+")"),a.getParentSvg().appendChild(p),qn(p,{x:w.x,y:w.y,width:i.width,height:i.height},a.RTL,new Date,a.scale)}},qn=function(i,a,p,w,k){const j=(new Date().getTime()-w.getTime())/150;1<j?pt(i):(i.setAttribute("transform","translate("+(a.x+(p?-1:1)*a.width*k/2*j)+","+(a.y+a.height*k*j)+") scale("+(1-j)*k+")"),setTimeout(qn,10,i,a,p,w,k))},pa=function(i){var a=i.workspace;const p=a.scale;if(a.getAudioManager().play("click"),!(1>p)){var w=a.getSvgXY(i.getSvgRoot());i.outputConnection?(w.x+=(i.RTL?3:-3)*p,w.y+=13*p):i.previousConnection&&(w.x+=(i.RTL?-23:23)*p,w.y+=3*p);var k=se(Ve.CIRCLE,{cx:w.x,cy:w.y,r:0,fill:"none",stroke:"#888","stroke-width":10},a.getParentSvg());i=se(Ve.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*p},k),a=se(Ve.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},k),i.beginElement(),a.beginElement(),setTimeout(()=>void pt(k),150)}},Ks=function(i){if(Ua(),i.workspace.getAudioManager().play("disconnect"),!(1>i.workspace.scale)){var a=i.getHeightWidth().height;a=Math.atan(10/a)/Math.PI*180,i.RTL||(a*=-1),F=i,Hs(i,a,new Date)}},Hs=function(i,a,p){const w=(new Date().getTime()-p.getTime())/200;let k="";1>=w&&(k=`skewX(${Math.round(Math.sin(w*Math.PI*3)*(1-w)*a)})`,R=setTimeout(Hs,10,i,a,p)),i.getSvgRoot().setAttribute("transform",`${i.getTranslation()} ${k}`)},Ua=function(){F&&(R&&(clearTimeout(R),R=null),F.getSvgRoot().setAttribute("transform",F.getTranslation()),F=null)},Hh=function(i,a){return xe("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),i.startsWith(a)},Th=function(i){return i.length?i.reduce(function(a,p){return a.length<p.length?a:p}).length:0},pc=function(i,a){if(!i.length)return 0;if(i.length===1)return i[0].length;let p=0;a=a||Th(i);let w;for(w=0;w<a;w++){for(var k=i[0][w],j=1;j<i.length;j++)if(k!==i[j][w])return p;k===" "&&(p=w+1)}for(k=1;k<i.length;k++)if((j=i[k][w])&&j!==" ")return p;return a},ea=function(i,a){if(!i.length)return 0;if(i.length===1)return i[0].length;let p=0;a=a||Th(i);let w;for(w=0;w<a;w++){for(var k=i[0].substr(-w-1,1),j=1;j<i.length;j++)if(k!==i[j].substr(-w-1,1))return p;k===" "&&(p=w+1)}for(k=1;k<i.length;k++)if((j=i[k].charAt(i[k].length-w-1))&&j!==" ")return p;return a},t.wrap$$module$build$src$core$utils$string=function(i,a){i=i.split(`
`);for(let p=0;p<i.length;p++)i[p]=Hc(i[p],a);return i.join(`
`)},Hc=function(i,a){if(i.length<=a)return i;const p=i.trim().split(/\s+/);for(var w=0;w<p.length;w++)p[w].length>a&&(a=p[w].length);var k=-1/0;let j,ve=1;do{w=k,j=i,i=[],k=p.length/ve;let Ue=1;for(let Yt=0;Yt<p.length-1;Yt++)Ue<(Yt+1.5)/k?(Ue++,i[Yt]=!0):i[Yt]=!1;i=Ha(p,i,a),k=Gh(p,i,a),i=Wh(p,i),ve++}while(k>w);return j},Gh=function(i,a,p){const w=[0],k=[];for(var j=0;j<i.length;j++)w[w.length-1]+=i[j].length,a[j]===!0?(w.push(0),k.push(i[j].charAt(i[j].length-1))):a[j]===!1&&w[w.length-1]++;for(i=Math.max(...w),a=0,j=0;j<w.length;j++)a-=2*Math.pow(Math.abs(p-w[j]),1.5),a-=Math.pow(i-w[j],1.5),".?!".indexOf(k[j])!==-1?a+=p/3:",;)]}".indexOf(k[j])!==-1&&(a+=p/4);return 1<w.length&&w[w.length-1]<=w[w.length-2]&&(a+=.5),a},Ha=function(i,a,p){let w=Gh(i,a,p),k;for(let j=0;j<a.length-1;j++){if(a[j]===a[j+1])continue;const ve=[].concat(a);ve[j]=!ve[j],ve[j+1]=!ve[j+1];const Ue=Gh(i,ve,p);Ue>w&&(w=Ue,k=ve)}return k?Ha(i,k,p):a},Wh=function(i,a){const p=[];for(let w=0;w<i.length;w++)p.push(i[w]),a[w]!==void 0&&p.push(a[w]?`
`:" ");return p.join("")},t.isNumber$$module$build$src$core$utils$string=function(i){return/^\s*-?\d+(\.\d+)?\s*$/.test(i)},mc=function(i){Zn=i},ju=function(){return Zn},md=function(){return ir},ta=function(){return Lu},uo=function(i){if(i=Ml(i)){for(i=i.tooltip;typeof i=="function";)i=i();if(typeof i!="string")throw Error("Tooltip function must return a string.");return i}return""},Ml=function(i){for(;i&&i.tooltip;){if(typeof i.tooltip=="string"||typeof i.tooltip=="function")return i;i=i.tooltip}return null},Vh=function(){document.querySelector(".blocklyTooltipDiv")||(Lu=document.createElement("div"),Lu.className="blocklyTooltipDiv",(D()||document.body).appendChild(Lu))},zi=function(i){i.mouseOverWrapper_=He(i,"pointerover",null,Yu),i.mouseOutWrapper_=He(i,"pointerout",null,nu),i.addEventListener("pointermove",Gc,!1)},gd=function(i){i&&(rt(i.mouseOverWrapper_),rt(i.mouseOutWrapper_),i.removeEventListener("pointermove",Gc))},Yu=function(i){Ro||(i=Ml(i.currentTarget),nr!==i&&(Al(),mr=null,nr=i),clearTimeout(dt))},nu=function(i){Ro||(dt=setTimeout(function(){mr=nr=null,Al()},1),clearTimeout(Et),Et=0)},Gc=function(i){if(nr&&nr.tooltip&&!Ro)if(ir){const a=Sn-i.pageX;i=lr-i.pageY,Math.sqrt(a*a+i*i)>ds&&Al()}else mr!==nr&&(clearTimeout(Et),Sn=i.pageX,lr=i.pageY,Et=setTimeout(Ff,Qf))},Id=function(){mr=nr=null,Al()},Al=function(){ir&&(ir=!1,Lu&&(Lu.style.display="none")),Et&&(clearTimeout(Et),Et=0)},Rd=function(){Al(),Ro=!0},jh=function(){Ro=!1},ei=function(){Lu&&nr&&(typeof Zn=="function"?Zn(Lu,nr):Ii())},Ii=function(){var i=uo(nr);i=t.wrap$$module$build$src$core$utils$string(i,xt),i=i.split(`
`);for(let a=0;a<i.length;a++){const p=document.createElement("div");p.appendChild(document.createTextNode(i[a])),Lu.appendChild(p)}},Sp=function(i){const a=document.documentElement.clientWidth,p=document.documentElement.clientHeight;let w=Sn;w=i?w-(Lr+Lu.offsetWidth):w+Lr;let k=lr+Ul;return k+Lu.offsetHeight>p+window.scrollY&&(k-=Lu.offsetHeight+2*Ul),i?w=Math.max($0-window.scrollX,w):w+Lu.offsetWidth>a+window.scrollX-2*$0&&(w=a-Lu.offsetWidth-2*$0),{x:w,y:k}},Ff=function(){if(!Ro&&(mr=nr,Lu)){Lu.textContent="",ei();var i=nr.RTL;Lu.style.direction=i?"rtl":"ltr",Lu.style.display="block",ir=!0;var{x:a,y:p}=Sp(i);Lu.style.left=a+"px",Lu.style.top=p+"px"}},Il=function(i,a){for(const p in a)i[p]=a[p]!==null&&typeof a[p]=="object"?Il(i[p]||Object.create(null),a[p]):a[p];return i},ru=function(i){return i.bubbleIsVisible!==void 0&&i.setBubbleVisible!==void 0},Xu=function(){return ab},Ku=function(i){ab=i},Sh=function(){return ah},ll=function(i){ah=i},na=function(i){i=`${i}`.toLowerCase().trim();var a=gT[i];if(a||(a=i.substring(0,2)==="0x"?"#"+i.substring(2):i,a=a[0]==="#"?a:"#"+a,/^#[0-9a-f]{6}$/.test(a)))return a;if(/^#[0-9a-f]{3}$/.test(a))return["#",a[1],a[1],a[2],a[2],a[3],a[3]].join("");var p=i.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return p&&(i=Number(p[1]),a=Number(p[2]),p=Number(p[3]),0<=i&&256>i&&0<=a&&256>a&&0<=p&&256>p)?Rl(i,a,p):null},Rl=function(i,a,p){return a=i<<16|a<<8|p,16>i?"#"+(16777216|a).toString(16).substr(1):"#"+a.toString(16)},Wc=function(i){return i=na(i),i?(i=parseInt(i.substr(1),16),[i>>16,i>>8&255,i&255]):[0,0,0]},kl=function(i,a,p){let w=0,k=0,j=0;if(a===0)j=k=w=p;else{const ve=Math.floor(i/60),Ue=i/60-ve;i=p*(1-a);const Yt=p*(1-a*Ue);switch(a=p*(1-a*(1-Ue)),ve){case 1:w=Yt,k=p,j=i;break;case 2:w=i,k=p,j=a;break;case 3:w=i,k=Yt,j=p;break;case 4:w=a,k=i,j=p;break;case 5:w=p,k=i,j=Yt;break;case 6:case 0:w=p,k=a,j=i}}return Rl(Math.floor(w),Math.floor(k),Math.floor(j))},Vc=function(i,a,p){return i=na(i),!i||(a=na(a),!a)?null:(i=Wc(i),a=Wc(a),Rl(Math.round(a[0]+p*(i[0]-a[0])),Math.round(a[1]+p*(i[1]-a[1])),Math.round(a[2]+p*(i[2]-a[2]))))},gc=function(i){return kl(i,ab,255*ah)},kd=function(i,a,p){const w=[];var k=i.split("");k.push("");var j=0;i=[];let ve=null;for(let jn=0;jn<k.length;jn++){var Ue=k[jn];if(j===0)if(Ue==="%")(j=i.join(""))&&w.push(j),i.length=0,j=1;else if(p&&Ue===`
`){const bl=i.join("");bl&&w.push(bl),i.length=0,w.push(Ue)}else i.push(Ue);else if(j===1)Ue==="%"?(i.push(Ue),j=0):a&&"0"<=Ue&&"9">=Ue?(j=2,ve=Ue,(Ue=i.join(""))&&w.push(Ue),i.length=0):Ue==="{"?j=3:(i.push("%",Ue),j=0);else if(j===2)if("0"<=Ue&&"9">=Ue)ve+=Ue;else{var Yt=void 0;w.push(parseInt((Yt=ve)!=null?Yt:"",10)),jn--,j=0}else j===3&&(Ue===""?(i.splice(0,0,"%{"),jn--,j=0):Ue!=="}"?i.push(Ue):(j=i.join(""),/[A-Z]\w*/i.test(j)?(Ue=j.toUpperCase(),(Ue=Ue.startsWith("BKY_")?Ue.substring(4):null)&&Ue in t.Msg$$module$build$src$core$msg?(j=t.Msg$$module$build$src$core$msg[Ue],typeof j=="string"?Array.prototype.push.apply(w,kd(j,a,p)):a?w.push(`${j}`):w.push(j)):w.push("%{"+j+"}")):w.push("%{"+j+"}"),j=i.length=0))}for((a=i.join(""))&&w.push(a),Yt=[],i.length=0,k=0;k<w.length;k++)typeof w[k]!="string"||p&&w[k]===`
`?((a=i.join(""))&&Yt.push(a),i.length=0,Yt.push(w[k])):i.push(w[k]);return(a=i.join(""))&&Yt.push(a),i.length=0,Yt},Ga=function(i){return kd(i,!0,!0)},Vr=function(i){return typeof i!="string"?i:(i=kd(i,!1,!1),i.length?String(i[0]):"")},ul=function(i){let a=!0;const p=t.Msg$$module$build$src$core$msg,w=i.match(/%{BKY_[A-Z]\w*}/gi);if(w)for(let k=0;k<w.length;k++){const j=w[k].toUpperCase();p[j.slice(6,-1)]===void 0&&(console.warn("No message string for "+w[k]+" in "+i),a=!1)}return a},Qi=function(i){const a=typeof i=="string"?Vr(i):i;var p=Number(a);if(!isNaN(p)&&0<=p&&360>=p)return{hue:p,hex:kl(p,Xu(),255*Sh())};if(p=na(a))return{hue:null,hex:p};throw p='Invalid colour: "'+a+'"',i!==a&&(p+=' (from "'+i+'")'),Error(p)},ma=function(i){return i.getProcedureModel!==void 0&&i.doProcedureUpdate!==void 0&&i.isProcedureDef!==void 0},X=function(i){return i.startPublishing!==void 0&&i.stopPublishing!==void 0},xs=function(i,a){r(Ft.FIELD,i,a)},ga=function(i){o(Ft.FIELD,i)},t.fromJson$$module$build$src$core$field_registry=function(i){return Cc.fromJsonInternal(i)},Mr=function(i){const a=f(Ft.FIELD,i.type);if(a){if(typeof a.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return a.fromJson(i)}return console.warn("Blockly could not create a field of type "+i.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},mn=function(i){let a=!1;const p=i.map(([ve,Ue])=>typeof ve=="string"?[Vr(ve),Ue]:(a=!0,[ve.alt!==null?Object.assign({},ve,{alt:Vr(ve.alt)}):Object.assign({},ve),Ue]));if(a||2>i.length)return{options:p};var w=p.map(([ve])=>ve),k=Th(w);i=pc(w,k);const j=ea(w,k);return!i&&!j||k<=i+j?{options:p}:(k=i?w[0].substring(0,i-1):void 0,w=j?w[0].substr(1-j):void 0,{options:zf(p,i,j),prefix:k,suffix:w})},zf=function(i,a,p){return i.map(([w,k])=>[w.substring(a,w.length-p),k])},cl=function(i){if(!Array.isArray(i))throw TypeError("FieldDropdown options must be an array.");if(!i.length)throw TypeError("FieldDropdown options must not be an empty array.");let a=!1;for(let p=0;p<i.length;p++){const w=i[p];Array.isArray(w)?typeof w[1]!="string"?(a=!0,console.error("Invalid option["+p+"]: Each FieldDropdown option id must be a string. Found "+w[1]+" in: ",w)):w[0]&&typeof w[0]!="string"&&typeof w[0].src!="string"&&(a=!0,console.error("Invalid option["+p+"]: Each FieldDropdown option must have a string label or image description. Found"+w[0]+" in: ",w)):(a=!0,console.error("Invalid option["+p+"]: Each FieldDropdown option must be an array. Found: ",w))}if(a)throw TypeError("Found invalid FieldDropdown options.")},t.register$$module$build$src$core$extensions=function(i,a){if(typeof i!="string"||i.trim()==="")throw Error('Error: Invalid extension name "'+i+'"');if(A0[i])throw Error('Error: Extension "'+i+'" is already registered.');if(typeof a!="function")throw Error('Error: Extension "'+i+'" must be a function');A0[i]=a},t.registerMixin$$module$build$src$core$extensions=function(i,a){if(!a||typeof a!="object")throw Error('Error: Mixin "'+i+'" must be a object');t.register$$module$build$src$core$extensions(i,function(){this.mixin(a)})},t.registerMutator$$module$build$src$core$extensions=function(i,a,p,w){const k='Error when registering mutator "'+i+'": ';Yc(k,a);const j=va(a,k);if(p&&typeof p!="function")throw Error(k+'Extension "'+i+'" is not a function');t.register$$module$build$src$core$extensions(i,function(){j&&this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(w||[],this)),this.mixin(a),p&&p.apply(this)})},Ri=function(i){hi(i)?delete A0[i]:console.warn('No extension mapping for name "'+i+'" found to unregister')},hi=function(i){return!!A0[i]},Zi=function(i,a,p){const w=A0[i];if(typeof w!="function")throw Error('Error: Extension "'+i+'" not found.');let k;if(p?ss(i,a):k=ra(a),w.apply(a),p)Yc('Error after applying mutator "'+i+'": ',a);else if(!Od(k,a))throw Error('Error when applying extension "'+i+'": mutation properties changed when applying a non-mutator extension.')},ss=function(i,a){if(ra(a).length)throw Error('Error: tried to apply mutation "'+i+'" to a block that already has mutator functions.  Block id: '+a.id)},jc=function(i,a){return os(i.mutationToDom,i.domToMutation,a+" mutationToDom/domToMutation")},_a=function(i,a){return os(i.saveExtraState,i.loadExtraState,a+" saveExtraState/loadExtraState")},va=function(i,a){return os(i.compose,i.decompose,a+" compose/decompose")},os=function(i,a,p){if(i&&a){if(typeof i!="function"||typeof a!="function")throw Error(p+" must be a function");return!0}if(!i&&!a)return!1;throw Error(p+"Must have both or neither functions")},Yc=function(i,a){const p=jc(a,i),w=_a(a,i);if(!p&&!w)throw Error(i+"Mutations must contain either XML hooks, or JSON hooks, or both");va(a,i)},ra=function(i){const a=[];return i.domToMutation!==void 0&&a.push(i.domToMutation),i.mutationToDom!==void 0&&a.push(i.mutationToDom),i.saveExtraState!==void 0&&a.push(i.saveExtraState),i.loadExtraState!==void 0&&a.push(i.loadExtraState),i.compose!==void 0&&a.push(i.compose),i.decompose!==void 0&&a.push(i.decompose),a},Od=function(i,a){if(a=ra(a),a.length!==i.length)return!1;for(let p=0;p<a.length;p++)if(i[p]!==a[p])return!1;return!0},Ld=function(i){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")i();else{const a=setInterval(function(){document.readyState==="complete"&&(clearInterval(a),i())},10)}},t.buildTooltipForDropdown$$module$build$src$core$extensions=function(i,a){const p=[];return function(){p.indexOf(this.type)===-1&&(Yh(this,i,a),p.push(this.type)),this.setTooltip((function(){const w=String(this.getFieldValue(i));return Vr(a[w])}).bind(this))}},Yh=function(i,a,p){var w=i.getField(a);if(w instanceof Ah&&!w.isOptionListDynamic()){w=w.getOptions();for(const[,k]of w)p[k]===void 0&&console.warn(`No tooltip mapping for value ${k} of field ${a} of block type ${i.type}.`)}},t.buildTooltipWithFieldText$$module$build$src$core$extensions=function(i,a){return function(){this.setTooltip((function(){const p=this.getField(a);return Vr(i).replace("%1",p?p.getText():"")}).bind(this))}},Gs=function(){const i=this.tooltip;this.setTooltip((function(){const a=this.getParent();return a&&a.getInputsInline()&&a.tooltip||i}).bind(this))},Kn=function(i,a){return" "+i+","+a+" "},Ws=function(i,a){return" "+i+a.join("")},Js=function(i,a){return" M "+i+","+a+" "},Ui=function(i,a){return" m "+i+","+a+" "},iu=function(i,a){return" l "+i+","+a+" "},Uo=function(i){return" l"+i.join("")},xn=function(i,a){return" "+i+" "+a+" "},mi=function(i,a,p,w){return i+" "+p+" "+p+" "+a+w},gi=function(i,a){r(Ft.ICON,i.toString(),a)},Uf=function(i){o(Ft.ICON,i)},wh=function(i){const a=i.getProcedureMap().getProcedures().filter(w=>!w.getReturnTypes()).map(w=>[w.getName(),w.getParameters().map(k=>k.getName()),!1]);i.getBlocksByType("procedures_defnoreturn",!1).forEach(w=>{!ma(w)&&Di(w)&&a.push(w.getProcedureDef())});const p=i.getProcedureMap().getProcedures().filter(w=>!!w.getReturnTypes()).map(w=>[w.getName(),w.getParameters().map(k=>k.getName()),!0]);return i.getBlocksByType("procedures_defreturn",!1).forEach(w=>{!ma(w)&&Di(w)&&p.push(w.getProcedureDef())}),a.sort(co),p.sort(co),[a,p]},co=function(i,a){return i[0].localeCompare(a[0],void 0,{sensitivity:"base"})},t.findLegalName$$module$build$src$core$procedures=function(i,a){if(a.isInFlyout)return i;for(i=i||t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!ya(i,a.workspace,a);){const p=i.match(/^(.*?)(\d+)$/);i=p?p[1]+(parseInt(p[2])+1):i+"2"}return i},ya=function(i,a,p){return!Cn(i,a,p)},Cn=function(i,a,p){for(const w of a.getAllBlocks(!1))if(w!==p&&Di(w)&&t.Names$$module$build$src$core$names.equals(w.getProcedureDef()[0],i))return!0;p=p&&ma(p)?p==null?void 0:p.getProcedureModel():void 0;for(const w of a.getProcedureMap().getProcedures())if(w!==p&&t.Names$$module$build$src$core$names.equals(w.getName(),i))return!0;return!1},t.rename$$module$build$src$core$procedures=function(i){var a=this.getSourceBlock();if(!a)throw new ko;i=i.trim();const p=t.findLegalName$$module$build$src$core$procedures(i,a);ma(a)&&!a.isInsertionMarker()&&a.getProcedureModel().setName(p);const w=this.getValue();if(w!==i&&w!==p)for(i=a.workspace.getAllBlocks(!1),a=0;a<i.length;a++){const k=i[a];k.renameProcedure&&k.renameProcedure(w,p)}return p},yn=function(i){function a(j,ve){for(let Yt=0;Yt<j.length;Yt++){var Ue=j[Yt][0];const jn=j[Yt][1],bl=t.createElement$$module$build$src$core$utils$xml("block");bl.setAttribute("type",ve),bl.setAttribute("gap","16");const Qa=t.createElement$$module$build$src$core$utils$xml("mutation");for(Qa.setAttribute("name",Ue),bl.appendChild(Qa),Ue=0;Ue<jn.length;Ue++){const Fp=t.createElement$$module$build$src$core$utils$xml("arg");Fp.setAttribute("name",jn[Ue]),Qa.appendChild(Fp)}p.push(bl)}}const p=[];if(jr.procedures_defnoreturn){var w=t.createElement$$module$build$src$core$utils$xml("block");w.setAttribute("type","procedures_defnoreturn"),w.setAttribute("gap","16");var k=t.createElement$$module$build$src$core$utils$xml("field");k.setAttribute("name","NAME"),k.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),w.appendChild(k),p.push(w)}return jr.procedures_defreturn&&(w=t.createElement$$module$build$src$core$utils$xml("block"),w.setAttribute("type","procedures_defreturn"),w.setAttribute("gap","16"),k=t.createElement$$module$build$src$core$utils$xml("field"),k.setAttribute("name","NAME"),k.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),w.appendChild(k),p.push(w)),jr.procedures_ifreturn&&(w=t.createElement$$module$build$src$core$utils$xml("block"),w.setAttribute("type","procedures_ifreturn"),w.setAttribute("gap","16"),p.push(w)),p.length&&p[p.length-1].setAttribute("gap","24"),i=wh(i),a(i[0],"procedures_callnoreturn"),a(i[1],"procedures_callreturn"),p},hl=function(i){var a=[],p=i.getBlocksByType("procedures_mutatorarg",!1);for(let j=0,ve;ve=p[j];j++)a.push(ve.getFieldValue("NAME"));p=t.createElement$$module$build$src$core$utils$xml("xml");const w=t.createElement$$module$build$src$core$utils$xml("block");w.setAttribute("type","procedures_mutatorarg");const k=t.createElement$$module$build$src$core$utils$xml("field");k.setAttribute("name","NAME"),a=Pi(t.DEFAULT_ARG$$module$build$src$core$procedures,a),a=t.createTextNode$$module$build$src$core$utils$xml(a),k.appendChild(a),w.appendChild(k),p.appendChild(w),i.updateToolbox(p)},_c=function(i){if(i.type===vo&&i.bubbleType==="mutator"&&i.isOpen&&i.blockId){i=b(i.workspaceId).getBlockById(i.blockId);var a=i.type;(a==="procedures_defnoreturn"||a==="procedures_defreturn")&&(i=i.getIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),hl(i),i.addChangeListener(wp))}},wp=function(i){(i.type===t.CREATE$$module$build$src$core$events$utils||i.type===t.DELETE$$module$build$src$core$events$utils||i.type===t.CHANGE$$module$build$src$core$events$utils||i.type===Ch)&&(i=b(i.workspaceId),hl(i))},su=function(i,a){return a.getAllBlocks(!1).filter(p=>Co(p,i)||kr(p)&&t.Names$$module$build$src$core$names.equals(p.getProcedureCall(),i))},Co=function(i,a){return ma(i)&&!i.isProcedureDef()&&i.getProcedureModel()&&t.Names$$module$build$src$core$names.equals(i.getProcedureModel().getName(),a)},t.mutateCallers$$module$build$src$core$procedures=function(i){const a=ae();var p=i.getProcedureDef()[0];const w=i.mutationToDom(!0);i=su(p,i.workspace);for(let j=0,ve;ve=i[j];j++){p=(p=ve.mutationToDom())&&Nn(p),ve.domToMutation&&ve.domToMutation(w);var k=ve.mutationToDom();k=k&&Nn(k),p!==k&&(he(!1),ue(new(Ie(t.CHANGE$$module$build$src$core$events$utils))(ve,"mutation",null,p,k)),he(a))}},t.getDefinition$$module$build$src$core$procedures=function(i,a){for(const p of a.getAllBlocks(!1))if(ma(p)&&p.isProcedureDef()&&t.Names$$module$build$src$core$names.equals(p.getProcedureModel().getName(),i)||Di(p)&&t.Names$$module$build$src$core$names.equals(p.getProcedureDef()[0],i))return p;return null},ys=function(i){return i.isDynamic},dl=function(i){return i.pathDown!==void 0&&i.pathUp!==void 0},as=function(i){return i.pathLeft!==void 0&&i.pathRight!==void 0},fl=function(i){let a=i.outputConnection;return(!a||i.previousConnection&&i.previousConnection.isConnected())&&(a=i.previousConnection),a},Ho=function(i,a){if(!i||!a)throw Error("Cannot connect null connections.");i.targetConnection=a,a.targetConnection=i},Xh=function(i,a){let p=null;a=a.outputConnection;const w=a==null?void 0:a.getConnectionChecker();for(let k=0,j;j=i.inputList[k];k++){const ve=j.connection;let Ue;if(ve&&((Ue=w)!=null&&Ue.canConnect(a,ve,!1))){if(p)return null;p=ve}}return p},Wa=function(i,a){let p;for(;p=Xh(i,a);)if(i=p.targetBlock(),!i||i.isShadow())return p;return null},ki=function(i,a){r(Ft.RENDERER,i,a)},Nd=function(i){o(Ft.RENDERER,i)},Xc=function(i,a,p){return i=new(h(Ft.RENDERER,i))(i),i.init(a,p),i},Kh=function(i){ws(i.getTargetWorkspace(),void 0,"String")},Go=function(i){ws(i.getTargetWorkspace(),void 0,"Number")},Mo=function(i){ws(i.getTargetWorkspace(),void 0,"Colour")},df=function(i){let a=[],p=document.createElement("button");return p.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),p.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),a.push(p),p=document.createElement("button"),p.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),p.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),a.push(p),p=document.createElement("button"),p.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),p.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),a.push(p),i.registerButtonCallback("CREATE_VARIABLE_STRING",Kh),i.registerButtonCallback("CREATE_VARIABLE_NUMBER",Go),i.registerButtonCallback("CREATE_VARIABLE_COLOUR",Mo),i=Cu(i),a=a.concat(i)},Cu=function(i){i=i.getAllVariables();const a=[];if(0<i.length){if(jr.variables_set_dynamic){var p=i[i.length-1];const w=t.createElement$$module$build$src$core$utils$xml("block");w.setAttribute("type","variables_set_dynamic"),w.setAttribute("gap","24"),w.appendChild(Xs(p)),a.push(w)}if(jr.variables_get_dynamic){i.sort(_f.compareByName);for(let w=0,k;k=i[w];w++)p=t.createElement$$module$build$src$core$utils$xml("block"),p.setAttribute("type","variables_get_dynamic"),p.setAttribute("gap","8"),p.appendChild(Xs(k)),a.push(p)}}return a},Ol=function(i){return i.toCopyData!==void 0},_d=function(){Ji.registry.register({name:Pp.ESCAPE,preconditionFn(i){return!i.options.readOnly},callback(i){return i.hideChaff(),!0},keyCodes:[Hr.ESC]})},vc=function(){Ji.registry.register({name:Pp.DELETE,preconditionFn(i){const a=L();return!i.options.readOnly&&a!=null&&a.isDeletable()},callback(i,a){return a.preventDefault(),mm.inProgress()?!1:(L().checkAndDelete(),!0)},keyCodes:[Hr.DELETE,Hr.BACKSPACE]})},Kr=function(){const i=Ji.registry.createSerializedKey(Hr.C,[Hr.CTRL]),a=Ji.registry.createSerializedKey(Hr.C,[Hr.ALT]),p=Ji.registry.createSerializedKey(Hr.C,[Hr.META]);Ji.registry.register({name:Pp.COPY,preconditionFn(w){const k=L();return!w.options.readOnly&&!mm.inProgress()&&k!=null&&k.isDeletable()&&k.isMovable()&&Ol(k)},callback(w,k){return k.preventDefault(),w.hideChaff(),k=L(),!k||!Ol(k)?!1:(z_=k.toCopyData(),Gv=w,!!z_)},keyCodes:[i,a,p]})},ou=function(){const i=Ji.registry.createSerializedKey(Hr.X,[Hr.CTRL]),a=Ji.registry.createSerializedKey(Hr.X,[Hr.ALT]),p=Ji.registry.createSerializedKey(Hr.X,[Hr.META]);Ji.registry.register({name:Pp.CUT,preconditionFn(w){const k=L();return!w.options.readOnly&&!mm.inProgress()&&k!=null&&k instanceof Dp&&k.isDeletable()&&k.isMovable()&&!k.workspace.isFlyout},callback(w){const k=L();return!k||!Ol(k)?!1:(z_=k.toCopyData(),Gv=w,k.checkAndDelete(),!0)},keyCodes:[i,a,p]})},Ju=function(){const i=Ji.registry.createSerializedKey(Hr.V,[Hr.CTRL]),a=Ji.registry.createSerializedKey(Hr.V,[Hr.ALT]),p=Ji.registry.createSerializedKey(Hr.V,[Hr.META]);Ji.registry.register({name:Pp.PASTE,preconditionFn(w){return!w.options.readOnly&&!mm.inProgress()},callback(){return z_&&Gv?!!ks(z_,Gv):!1},keyCodes:[i,a,p]})},ls=function(){const i=Ji.registry.createSerializedKey(Hr.Z,[Hr.CTRL]),a=Ji.registry.createSerializedKey(Hr.Z,[Hr.ALT]),p=Ji.registry.createSerializedKey(Hr.Z,[Hr.META]);Ji.registry.register({name:Pp.UNDO,preconditionFn(w){return!w.options.readOnly&&!mm.inProgress()},callback(w){return w.hideChaff(),w.undo(!1),!0},keyCodes:[i,a,p]})},Va=function(){const i=Ji.registry.createSerializedKey(Hr.Z,[Hr.SHIFT,Hr.CTRL]),a=Ji.registry.createSerializedKey(Hr.Z,[Hr.SHIFT,Hr.ALT]),p=Ji.registry.createSerializedKey(Hr.Z,[Hr.SHIFT,Hr.META]),w=Ji.registry.createSerializedKey(Hr.Y,[Hr.CTRL]);Ji.registry.register({name:Pp.REDO,preconditionFn(k){return!mm.inProgress()&&!k.options.readOnly},callback(k){return k.hideChaff(),k.undo(!0),!0},keyCodes:[i,a,p,w]})},$s=function(){_d(),vc(),Kr(),ou(),Ju(),ls(),Va()},Cs=function(i){const a={id:i.getId(),name:i.getName(),returnTypes:i.getReturnTypes()};return i.getParameters().length&&(a.parameters=i.getParameters().map(p=>Kc(p))),a},Kc=function(i){const a={id:i.getId(),name:i.getName()};return i.getTypes().length&&(a.types=i.getTypes()),a},_i=function(i,a,p,w){if(i=new i(w,p.name,p.id).setReturnTypes(p.returnTypes),!p.parameters)return i;for(const[k,j]of p.parameters.entries())i.insertParameter(ja(a,j,w),k);return i},ja=function(i,a,p){return i=new i(p,a.name,a.id),a.types&&i.setTypes(a.types),i},yc=function(i){const a=Object.create(null),p=g(Ft.SERIALIZER,!0);for(const w in p){let k;const j=(k=p[w])==null?void 0:k.save(i);j&&(a[w]=j)}return a},ff=function(i,a,{recordUndo:p=!1}={}){var w=g(Ft.SERIALIZER,!0);if(w){w=Object.entries(w).sort((j,ve)=>ve[1].priority-j[1].priority);var k=ae();he(p),(p=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),te(),a instanceof ep&&a.setResizesEnabled(!1);for(const[,j]of w.reverse()){let ve;(ve=j)==null||ve.clear(a)}for(let[j,ve]of w.reverse())if(i[j]){let Ue;(Ue=ve)==null||Ue.load(i[j],a)}a instanceof ep&&a.setResizesEnabled(!0),me(),ue(new(Ie(Sa))(a)),t.setGroup$$module$build$src$core$events$utils(p),he(k)}},Eh=function(i,a,p){const w=p.getBoundingRectangle(),k=w.right-w.left,j=Fr(a.top,w.top,a.top+a.height-(w.bottom-w.top))-w.top;let ve=a.left;return a=a.left+a.width-k,i.RTL?ve=Math.min(a,ve):a=Math.max(ve,a),(i=Fr(ve,w.left,a)-w.left)||j?(p.moveBy(i,j,["inbounds"]),!0):!1},ia=function(i){return a=>{var p=i.getMetricsManager();if(p.hasFixedEdges()&&!i.isDragging()){var w;if(Qh.indexOf((w=a.type)!=null?w:"")!==-1){w=p.getScrollMetrics(!0);const k=Yi(i,a);k&&(p=t.getGroup$$module$build$src$core$events$utils()||!1,t.setGroup$$module$build$src$core$events$utils(a.group),Eh(i,w,k)&&!a.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),t.setGroup$$module$build$src$core$events$utils(p))}else a.type===ni&&a.scale&&a.oldScale&&a.scale>a.oldScale&&Pn(i)}}},Yi=function(i,a){let p=null;switch(a.type){case t.CREATE$$module$build$src$core$events$utils:case t.MOVE$$module$build$src$core$events$utils:(p=i.getBlockById(a.blockId))&&(p=p.getRootBlock());break;case cs:case Ta:p=i.getCommentById(a.commentId)}return p},Pn=function(i){var a=i.getMetricsManager();if(a.hasFixedEdges()&&!i.isDragging()){a=a.getScrollMetrics(!0);var p=i.getTopBoundedElements();for(let w=0,k;k=p[w];w++)Eh(i,a,k)}},tr=function(i,a){const p=[];for(const w of i.getIcons())(!ru(w)||w.bubbleIsVisible())&&(p.push({location:a,icon:w}),w.onLocationChange(a));for(const w of i.getChildren(!1))p.push(...tr(w,_n.sum(a,w.relativeCoords)));return p},Nr=function(){Li.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.UNDO},preconditionFn(i){return 0<i.workspace.getUndoStack().length?"enabled":"disabled"},callback(i){i.workspace.undo(!1)},scopeType:Li.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},ti=function(){Li.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.REDO},preconditionFn(i){return 0<i.workspace.getRedoStack().length?"enabled":"disabled"},callback(i){i.workspace.undo(!0)},scopeType:Li.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},qr=function(){Li.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(i){return i.workspace.isMovable()?1<i.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(i){i.workspace.cleanUp()},scopeType:Li.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Ao=function(i,a){function p(j){k--,j.setCollapsed(i),k===0&&t.setGroup$$module$build$src$core$events$utils(!1)}let w=0,k=0;t.setGroup$$module$build$src$core$events$utils(!0);for(let j=0;j<a.length;j++){let ve=a[j];for(;ve;)k++,setTimeout(p.bind(null,ve),w),ve=ve.getNextBlock(),w+=10}},us=function(){Li.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(i){if(i.workspace.options.collapse){i=i.workspace.getTopBlocks(!1);for(let a=0;a<i.length;a++){let p=i[a];for(;p;){if(!p.isCollapsed())return"enabled";p=p.getNextBlock()}}return"disabled"}return"hidden"},callback(i){Ao(!0,i.workspace.getTopBlocks(!0))},scopeType:Li.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},es=function(){Li.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(i){if(i.workspace.options.collapse){i=i.workspace.getTopBlocks(!1);for(let a=0;a<i.length;a++){let p=i[a];for(;p;){if(p.isCollapsed())return"enabled";p=p.getNextBlock()}}return"disabled"}return"hidden"},callback(i){Ao(!1,i.workspace.getTopBlocks(!0))},scopeType:Li.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},au=function(i,a){if(i.isDeletable())Array.prototype.push.apply(a,i.getDescendants(!1));else{i=i.getChildren(!1);for(let p=0;p<i.length;p++)au(i[p],a)}},qu=function(i){const a=[];i=i.getTopBlocks(!0);for(let p=0;p<i.length;p++)au(i[p],a);return a},bc=function(i,a){a?t.setGroup$$module$build$src$core$events$utils(a):(t.setGroup$$module$build$src$core$events$utils(!0),a=t.getGroup$$module$build$src$core$events$utils());const p=i.shift();p&&(p.isDeadOrDying()?bc(i,a):(p.dispose(!1,!0),setTimeout(bc,10,i,a))),t.setGroup$$module$build$src$core$events$utils(!1)},Qu=function(){Li.registry.register({displayText(i){return i.workspace?(i=qu(i.workspace).length,i===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${i}`)):""},preconditionFn(i){return i.workspace&&0<qu(i.workspace).length?"enabled":"disabled"},callback(i){if(i.workspace){i.workspace.cancelCurrentGesture();var a=qu(i.workspace);2>a.length?bc(a):nn(t.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(a.length)),function(p){p&&bc(a)})}},scopeType:Li.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},qs=function(){Nr(),ti(),qr(),us(),es(),Qu()},ho=function(){Li.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(i){return i=i.block,!i.isInFlyout&&i.isDeletable()&&i.isMovable()?i.isDuplicatable()?"enabled":"disabled":"hidden"},callback(i){if(i.block){var a=i.block.toCopyData();a&&ks(a,i.block.workspace)}},scopeType:Li.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},vd=function(){Li.registry.register({displayText(i){return i.block.hasIcon(nd.TYPE)?t.Msg$$module$build$src$core$msg.REMOVE_COMMENT:t.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(i){return i=i.block,!i.isInFlyout&&i.workspace.options.comments&&!i.isCollapsed()&&i.isEditable()?"enabled":"hidden"},callback(i){i=i.block,i.hasIcon(nd.TYPE)?i.setCommentText(null):i.setCommentText("")},scopeType:Li.ScopeType.BLOCK,id:"blockComment",weight:2})},ba=function(){Li.registry.register({displayText(i){return i.block.getInputsInline()?t.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:t.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(i){if(i=i.block,!i.isInFlyout&&i.isMovable()&&!i.isCollapsed()){for(let a=1;a<i.inputList.length;a++)if(!(i.inputList[a-1]instanceof Vv||i.inputList[a]instanceof Vv))return"enabled"}return"hidden"},callback(i){i.block.setInputsInline(!i.block.getInputsInline())},scopeType:Li.ScopeType.BLOCK,id:"blockInline",weight:3})},Mu=function(){Li.registry.register({displayText(i){return i.block.isCollapsed()?t.Msg$$module$build$src$core$msg.EXPAND_BLOCK:t.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(i){return i=i.block,!i.isInFlyout&&i.isMovable()&&i.workspace.options.collapse?"enabled":"hidden"},callback(i){i.block.setCollapsed(!i.block.isCollapsed())},scopeType:Li.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Au=function(){Li.registry.register({displayText(i){return i.block.isEnabled()?t.Msg$$module$build$src$core$msg.DISABLE_BLOCK:t.Msg$$module$build$src$core$msg.ENABLE_BLOCK},preconditionFn(i){return i=i.block,!i.isInFlyout&&i.workspace.options.disable&&i.isEditable()?i.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(i){i=i.block;const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),i.setEnabled(!i.isEnabled()),t.setGroup$$module$build$src$core$events$utils(a)},scopeType:Li.ScopeType.BLOCK,id:"blockDisable",weight:5})},fo=function(){Li.registry.register({displayText(i){var a=i.block;return i=a.getDescendants(!1).length,(a=a.getNextBlock())&&(i-=a.getDescendants(!1).length),i===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${i}`)},preconditionFn(i){return!i.block.isInFlyout&&i.block.isDeletable()?"enabled":"hidden"},callback(i){i.block&&i.block.checkAndDelete()},scopeType:Li.ScopeType.BLOCK,id:"blockDelete",weight:6})},po=function(){Li.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.HELP},preconditionFn(i){return i=i.block,(typeof i.helpUrl=="function"?i.helpUrl():i.helpUrl)?"enabled":"hidden"},callback(i){i.block.showHelp()},scopeType:Li.ScopeType.BLOCK,id:"blockHelp",weight:7})},Ll=function(){ho(),vd(),ba(),Mu(),Au(),fo(),po()},Wo=function(){qs(),Ll()},Zu=function(i,a){var p=null;p=typeof i=="string"?document.getElementById(i)||document.querySelector(i):i;let w;if(!document.contains(p)&&document!==((w=p)==null?void 0:w.ownerDocument))throw Error("Error: container is not in current document");i=new Hi(a||{}),a=document.createElement("div"),a.className="injectionDiv",a.tabIndex=0,Er(a,To.LABEL,t.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),p.appendChild(a),p=ec(a,i);const k=xh(a,p,i);return $h(k),O(k),U(k),a.addEventListener("focusin",function(){O(k)}),k},ec=function(i,a){i.setAttribute("dir","LTR"),mt(a.hasCss,a.pathToMedia),i=se(Ve.SVG,{xmlns:Km,"xmlns:html":Ec,"xmlns:xlink":Zs,version:"1.1",class:"blocklySvg",tabindex:"0"},i);const p=se(Ve.DEFS,{},i),w=String(Math.random()).substring(2);return a.gridPattern=ob.createDom(w,a.gridOptions,p),i},xh=function(i,a,p){p.parentWorkspace=null,p=new ep(p);const w=p.options;p.scale=w.zoomOptions.startScale,a.appendChild(p.createDom("blocklyMainBackground",i));var k=p.getRenderer().getClassName();return k&&$e(i,k),(k=p.getTheme().getClassName())&&$e(i,k),!w.hasCategories&&w.languageTree&&(i=p.addFlyout(Ve.SVG),Ke(i,a)),w.hasTrashcan&&p.addTrashcan(),w.zoomOptions&&w.zoomOptions.controls&&p.addZoomControls(),p.getThemeManager().subscribe(a,"workspaceBackgroundColour","background-color"),p.translate(0,0),p.addChangeListener(ia(p)),U(p),zo(),Cl(),Vh(),p},$h=function(i){const a=i.options;var p=i.getParentSvg();if(Ce(p.parentNode,"contextmenu",null,function(w){it(w)||w.preventDefault()}),p=Ce(window,"resize",null,function(){Al(),i.hideComponents(!0),vs(),cf(),U(i),Pn(i)}),i.setResizeHandlerWrapper(p),bs(),a.languageTree){p=i.getToolbox();const w=i.getFlyout(!0);p?p.init():w&&(w.init(i),w.show(a.languageTree),typeof w.scrollToStart=="function"&&w.scrollToStart())}a.hasTrashcan&&i.trashcan.init(),a.zoomOptions&&a.zoomOptions.controls&&i.zoomControls_.init(),a.moveOptions&&a.moveOptions.scrollbars?(i.scrollbar=new Cb(i,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.horizontal,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),i.scrollbar.resize()):i.setMetrics({x:.5,y:.5}),a.hasSounds&&Os(a.pathToMedia,i)},Or=function(i){const a=A();a&&!(it(i)||a.rendered&&!a.isVisible())&&Ji.registry.onKeyDown(a,i)},bs=function(){to||(Ce(document,"scroll",null,function(){const i=S();for(let a=0,p;p=i[a];a++)p instanceof ep&&p.updateInverseScreenCTM()}),Ce(document,"keydown",null,Or),He(document,"touchend",null,Qe),He(document,"touchcancel",null,Qe),Fn&&Ce(window,"orientationchange",document,function(){U(A())})),to=!0},Os=function(i,a){function p(){for(;k.length;){const j=k.pop();j&&rt(j)}w.preload()}const w=a.getAudioManager();w.load([i+"click.mp3",i+"click.wav",i+"click.ogg"],"click"),w.load([i+"disconnect.wav",i+"disconnect.mp3",i+"disconnect.ogg"],"disconnect"),w.load([i+"delete.mp3",i+"delete.ogg",i+"delete.wav"],"delete");const k=[];k.push(Ce(document,"pointermove",null,p,!0)),k.push(Ce(document,"touchstart",null,p,!0))},Ya=function(i){return i.getType!==void 0&&i.initView!==void 0&&i.dispose!==void 0&&i.getWeight!==void 0&&i.getSize!==void 0&&i.applyColour!==void 0&&i.hideForInsertionMarker!==void 0&&i.updateEditable!==void 0&&i.updateCollapsed!==void 0&&i.isShownWhenCollapsed!==void 0&&i.setOffsetInBlock!==void 0&&i.onLocationChange!==void 0&&i.onClick!==void 0},Vs=function(i){return i.paste!==void 0},fn=function(i){return i.isSelectable()},Jc=function(i){A().hideChaff(i)},wn=wn||{},wn.scope={},wn.ASSUME_ES5=!1,wn.ASSUME_NO_NATIVE_MAP=!1,wn.ASSUME_NO_NATIVE_SET=!1,wn.SIMPLE_FROUND_POLYFILL=!1,wn.ISOLATE_POLYFILLS=!1,wn.FORCE_POLYFILL_PROMISE=!1,wn.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,wn.defineProperty=wn.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(i,a,p){return i==Array.prototype||i==Object.prototype||(i[a]=p.value),i},wn.getGlobal=function(i){i=[typeof globalThis=="object"&&globalThis,i,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vl=="object"&&Vl];for(var a=0;a<i.length;++a){var p=i[a];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")},wn.global=wn.getGlobal(this),wn.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",wn.TRUST_ES6_POLYFILLS=!wn.ISOLATE_POLYFILLS||wn.IS_SYMBOL_NATIVE,wn.polyfills={},wn.propertyToPolyfillSymbol={},wn.POLYFILL_PREFIX="$jscp$",wn.polyfill=function(i,a,p,w){a&&(wn.ISOLATE_POLYFILLS?wn.polyfillIsolated(i,a,p,w):wn.polyfillUnisolated(i,a,p,w))},wn.polyfillUnisolated=function(i,a,p,w){for(p=wn.global,i=i.split("."),w=0;w<i.length-1;w++){var k=i[w];if(!(k in p))return;p=p[k]}i=i[i.length-1],w=p[i],a=a(w),a!=w&&a!=null&&wn.defineProperty(p,i,{configurable:!0,writable:!0,value:a})},wn.polyfillIsolated=function(i,a,p,w){var k=i.split(".");i=k.length===1,w=k[0],w=!i&&w in wn.polyfills?wn.polyfills:wn.global;for(var j=0;j<k.length-1;j++){var ve=k[j];if(!(ve in w))return;w=w[ve]}k=k[k.length-1],p=wn.IS_SYMBOL_NATIVE&&p==="es6"?w[k]:null,a=a(p),a!=null&&(i?wn.defineProperty(wn.polyfills,k,{configurable:!0,writable:!0,value:a}):a!==p&&(wn.propertyToPolyfillSymbol[k]===void 0&&(p=1e9*Math.random()>>>0,wn.propertyToPolyfillSymbol[k]=wn.IS_SYMBOL_NATIVE?wn.global.Symbol(k):wn.POLYFILL_PREFIX+p+"$"+k),wn.defineProperty(w,wn.propertyToPolyfillSymbol[k],{configurable:!0,writable:!0,value:a})))},wn.polyfill("globalThis",function(i){return i||wn.global},"es_2020","es3"),wn.arrayIteratorImpl=function(i){var a=0;return function(){return a<i.length?{done:!1,value:i[a++]}:{done:!0}}},wn.arrayIterator=function(i){return{next:wn.arrayIteratorImpl(i)}},wn.initSymbol=function(){},wn.iteratorPrototype=function(i){return i={next:i},i[Symbol.iterator]=function(){return this},i},wn.iteratorFromArray=function(i,a){i instanceof String&&(i+="");var p=0,w=!1,k={next:function(){if(!w&&p<i.length){var j=p++;return{value:a(j,i[j]),done:!1}}return w=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k},wn.polyfill("Array.prototype.values",function(i){return i||function(){return wn.iteratorFromArray(this,function(a,p){return p})}},"es8","es3"),wn.polyfill("Array.prototype.flat",function(i){return i||function(a){a=a===void 0?1:a;var p=[];return Array.prototype.forEach.call(this,function(w){Array.isArray(w)&&0<a?(w=Array.prototype.flat.call(w,a-1),p.push.apply(p,w)):p.push(w)}),p}},"es9","es5"),wn.owns=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)},wn.polyfill("Object.entries",function(i){return i||function(a){var p=[],w;for(w in a)wn.owns(a,w)&&p.push([w,a[w]]);return p}},"es8","es3"),wn.polyfill("Object.values",function(i){return i||function(a){var p=[],w;for(w in a)wn.owns(a,w)&&p.push(a[w]);return p}},"es8","es3");var vi=Object.create(null),Ms={typeMap:vi},lu=Object.create(null),Nl="default",Ft=class{constructor(i){this.name=i}toString(){return this.name}};Ft.CONNECTION_CHECKER=new Ft("connectionChecker"),Ft.CONNECTION_PREVIEWER=new Ft("connectionPreviewer"),Ft.CURSOR=new Ft("cursor"),Ft.EVENT=new Ft("event"),Ft.FIELD=new Ft("field"),Ft.INPUT=new Ft("input"),Ft.RENDERER=new Ft("renderer"),Ft.TOOLBOX=new Ft("toolbox"),Ft.THEME=new Ft("theme"),Ft.TOOLBOX_ITEM=new Ft("toolboxItem"),Ft.FLYOUTS_VERTICAL_TOOLBOX=new Ft("flyoutsVerticalToolbox"),Ft.FLYOUTS_HORIZONTAL_TOOLBOX=new Ft("flyoutsHorizontalToolbox"),Ft.METRICS_MANAGER=new Ft("metricsManager"),Ft.BLOCK_DRAGGER=new Ft("blockDragger"),Ft.SERIALIZER=new Ft("serializer"),Ft.ICON=new Ft("icon"),Ft.PASTER=new Ft("paster");var pl={DEFAULT:Nl,TEST_ONLY:Ms};pl.Type=Ft,pl.getAllItems=g,pl.getClass=h,pl.getClassFromOptions=y,pl.getObject=f,pl.hasItem=u,pl.register=r,pl.unregister=o;var jr=Object.create(null),tc=Object.create(null),Jh,qc=null,ai,Xi=[],Qc={defineBlocksWithJsonArrayInternal:le},mo={TEST_ONLY:Qc};mo.createBlockDefinitionsFromJsonArray=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,mo.defineBlocks=t.defineBlocks$$module$build$src$core$common,mo.defineBlocksWithJsonArray=oe,mo.draggingConnections=Xi,mo.getAllWorkspaces=S,mo.getBlockTypeCounts=V,mo.getMainWorkspace=A,mo.getParentContainer=D,mo.getSelected=L,mo.getWorkspaceById=b,mo.registerWorkspace=C,mo.setMainWorkspace=O,mo.setParentContainer=z,mo.setSelected=B,mo.svgResize=U,mo.unregisterWorkpace=M;var ml="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Zc={genUid:()=>{const i=ml.length,a=[];for(let p=0;20>p;p++)a[p]=ml.charAt(Math.random()*i);return a.join("")}},Tc=0,nc={TEST_ONLY:Zc};nc.genUid=q,nc.getNextUniqueId=Z;var Io,Qs,sa,Ch,go,Iu,eh,Sc,Vo,_o,rc,Dl,vo,Pl,Xa,uu,ni,cs,qh,yd,Ta,Sa,Qh,wc,Hf,x;Io="",Qs=!0,sa=0,t.CREATE$$module$build$src$core$events$utils="create",t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils="delete",t.DELETE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils="change",t.CHANGE$$module$build$src$core$events$utils,Ch="block_field_intermediate_change",t.MOVE$$module$build$src$core$events$utils="move",t.MOVE$$module$build$src$core$events$utils,go="var_create",Iu="var_delete",eh="var_rename",Sc="ui",Vo="drag",_o="selected",rc="click",Dl="marker_move",vo="bubble_open",Pl="trashcan_open",Xa="toolbox_item_select",uu="theme_change",ni="viewport_change",cs="comment_create",qh="comment_delete",yd="comment_change",Ta="comment_move",Sa="finished_loading",Qh=[t.CREATE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,cs,Ta],wc=[],Hf={FIRE_QUEUE:wc,fireNow:we,fireInternal:ge,setGroupInternal:fe},x={BLOCK_CHANGE:t.CHANGE$$module$build$src$core$events$utils,BLOCK_CREATE:t.CREATE$$module$build$src$core$events$utils,BLOCK_DELETE:t.DELETE$$module$build$src$core$events$utils,BLOCK_DRAG:Vo,BLOCK_FIELD_INTERMEDIATE_CHANGE:Ch,BLOCK_MOVE:t.MOVE$$module$build$src$core$events$utils,BUBBLE_OPEN:vo,BUMP_EVENTS:Qh,CHANGE:t.CHANGE$$module$build$src$core$events$utils,CLICK:rc,COMMENT_CHANGE:yd,COMMENT_CREATE:cs,COMMENT_DELETE:qh,COMMENT_MOVE:Ta,CREATE:t.CREATE$$module$build$src$core$events$utils,DELETE:t.DELETE$$module$build$src$core$events$utils,FINISHED_LOADING:Sa,MARKER_MOVE:Dl,MOVE:t.MOVE$$module$build$src$core$events$utils,SELECTED:_o,TEST_ONLY:Hf,THEME_CHANGE:uu,TOOLBOX_ITEM_SELECT:Xa,TRASHCAN_OPEN:Pl,UI:Sc,VAR_CREATE:go,VAR_DELETE:Iu,VAR_RENAME:eh,VIEWPORT_CHANGE:ni},x.clearPendingUndo=re,x.disable=t.disable$$module$build$src$core$events$utils,x.disableOrphans=qe,x.enable=t.enable$$module$build$src$core$events$utils,x.filter=J,x.fire=ue,x.fromJson=Fe,x.get=Ie,x.getDescendantIds=Te,x.getGroup=t.getGroup$$module$build$src$core$events$utils,x.getRecordUndo=ae,x.isEnabled=ie,x.setGroup=t.setGroup$$module$build$src$core$events$utils,x.setRecordUndo=he;var d=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=ae()}toJson(){return{type:this.type,group:this.group}}static fromJson(i,a,p){return p.isBlank=!1,p.group=i.group||"",p.workspaceId=a.id,p}isNull(){return!1}run(i){}getEventWorkspace_(){let i;if(this.workspaceId&&(i=b(this.workspaceId)),!i)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return i}},_=class extends d{constructor(i){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof i>"u",this.workspaceId=i||""}},$=class extends _{constructor(i,a,p){a=i?i.workspace.id:a,a===null&&(a=void 0),super(a),this.type=rc,this.blockId=i?i.id:void 0,this.targetType=p}toJson(){const i=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return i.targetType=this.targetType,i.blockId=this.blockId,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new $),a.targetType=i.targetType,a.blockId=i.blockId,a}},I;(function(i){i.BLOCK="block",i.WORKSPACE="workspace",i.ZOOM_CONTROLS="zoom_controls"})(I||(I={})),r(Ft.EVENT,rc,$);var P=750,W="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),de=null,Oe={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Ze=0,wt={TOUCH_ENABLED:W,TOUCH_MAP:Oe};wt.checkTouchIdentifier=ze,wt.clearTouchIdentifier=nt,wt.getTouchIdentifierFromEvent=lt,wt.longStart=Re,wt.longStop=Qe,wt.shouldHandleEvent=ft;var Qt,cn,bn,Tn,gn,Dr,Tt,Me,Ne,st;(function(i){function a(w){return p.indexOf(w.toUpperCase())!==-1}Qt=i;const p=Qt.toUpperCase();cn=a("JavaFX"),bn=a("WebKit"),Tn=a("Gecko")&&!bn,gn=a("Android"),i=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Dr=a("iPad")||a("Macintosh")&&0<i,Tt=a("iPhone")&&!Dr,Me=a("Macintosh"),Ne=Dr||gn&&!a("Mobile")||a("Silk"),st=!Ne&&(Tt||gn)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Ht=Qt,on=cn,En=Tn,Rn=gn,Fn=Dr,dr=Tt,Ar=Me,Bl=st,pf={ANDROID:Rn,GECKO:En,IPAD:Fn,IPHONE:dr,JavaFx:on,MAC:Ar,MOBILE:Bl,raw:Ht},Mh=40,ln=125,th={};th.bind=He,th.conditionalBind=Ce,th.getScrollDeltaPixels=vt,th.isRightButton=Nt,th.isTargetInput=it,th.mouseToSvg=kt,th.unbind=rt;var Zp={};Zp.removeElem=Mt;var wa=class{constructor(i){this.name_=i}toString(){return this.name_}};wa.POSITIONABLE=new wa("positionable"),wa.DRAG_TARGET=new wa("drag_target"),wa.DELETE_AREA=new wa("delete_area"),wa.AUTOHIDEABLE=new wa("autohideable");var gl=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(i,a){const p=i.component.id;if(!a&&this.componentData.has(p)){var w;throw Error('Plugin "'+p+'" with capabilities "'+((w=this.componentData.get(p))==null?void 0:w.capabilities)+'" already added.')}for(this.componentData.set(p,i),a=[],w=0;w<i.capabilities.length;w++){const k=String(i.capabilities[w]).toLowerCase();if(a.push(k),this.capabilityToComponentIds.has(k)){let j;(j=this.capabilityToComponentIds.get(k))==null||j.push(p)}else this.capabilityToComponentIds.set(k,[p])}this.componentData.get(p).capabilities=a}removeComponent(i){const a=this.componentData.get(i);if(a){for(let p=0;p<a.capabilities.length;p++){const w=String(a.capabilities[p]).toLowerCase();Mt(this.capabilityToComponentIds.get(w),i)}this.componentData.delete(i)}}addCapability(i,a){if(!this.getComponent(i))throw Error('Cannot add capability, "'+a+'". Plugin "'+i+'" has not been added to the ComponentManager');if(this.hasCapability(i,a))console.warn('Plugin "'+i+'already has capability "'+a+'"');else{a=`${a}`.toLowerCase();var p;(p=this.componentData.get(i))==null||p.capabilities.push(a);var w;(w=this.capabilityToComponentIds.get(a))==null||w.push(i)}}removeCapability(i,a){if(!this.getComponent(i))throw Error('Cannot remove capability, "'+a+'". Plugin "'+i+'" has not been added to the ComponentManager');this.hasCapability(i,a)?(a=`${a}`.toLowerCase(),Mt(this.componentData.get(i).capabilities,a),Mt(this.capabilityToComponentIds.get(a),i)):console.warn('Plugin "'+i+`doesn't have capability "`+a+'" to remove')}hasCapability(i,a){return a=`${a}`.toLowerCase(),this.componentData.has(i)&&this.componentData.get(i).capabilities.indexOf(a)!==-1}getComponent(i){let a;return(a=this.componentData.get(i))==null?void 0:a.component}getComponents(i,a){if(i=`${i}`.toLowerCase(),i=this.capabilityToComponentIds.get(i),!i)return[];const p=[];if(a){const w=[];i.forEach(k=>{w.push(this.componentData.get(k))}),w.sort(function(k,j){return k.weight-j.weight}),w.forEach(function(k){p.push(k.component)})}else i.forEach(w=>{p.push(this.componentData.get(w).component)});return p}};gl.Capability=wa;var mf=!1,Zh=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,hs={};hs.inject=mt,hs.register=At;var _n=class{constructor(i,a){this.x=i,this.y=a}clone(){return new _n(this.x,this.y)}scale(i){return this.x*=i,this.y*=i,this}translate(i,a){return this.x+=i,this.y+=a,this}static equals(i,a){return i===a?!0:i&&a?i.x===a.x&&i.y===a.y:!1}static distance(i,a){const p=i.x-a.x;return i=i.y-a.y,Math.sqrt(p*p+i*i)}static magnitude(i){return Math.sqrt(i.x*i.x+i.y*i.y)}static difference(i,a){return new _n(i.x-a.x,i.y-a.y)}static sum(i,a){return new _n(i.x+a.x,i.y+a.y)}},g0=new Set,Cg={};Cg.warn=xe;var Km="http://www.w3.org/2000/svg",Ec="http://www.w3.org/1999/xhtml",Zs="http://www.w3.org/1999/xlink",Gf;(function(i){i[i.ELEMENT_NODE=1]="ELEMENT_NODE",i[i.TEXT_NODE=3]="TEXT_NODE",i[i.COMMENT_NODE=8]="COMMENT_NODE"})(Gf||(Gf={}));var Dd=null,Ka=0,Ur=null,Ea={HTML_NS:Ec};Ea.NodeType=Gf,Ea.SVG_NS=Km,Ea.XLINK_NS=Zs,Ea.addClass=$e,Ea.containsNode=Le,Ea.createSvgElement=se,Ea.getFastTextWidth=Xe,Ea.getFastTextWidthWithSizeString=Wt,Ea.getTextWidth=ke,Ea.hasClass=It,Ea.insertAfter=Ke,Ea.measureFontMetrics=Ge,Ea.removeClass=St,Ea.removeClasses=ht,Ea.removeNode=pt,Ea.setCssTransform=Q,Ea.startTextWidthCache=te,Ea.stopTextWidthCache=me;var Ve=class{constructor(i){this.tagName=i}toString(){return this.tagName}};Ve.ANIMATE=new Ve("animate"),Ve.CIRCLE=new Ve("circle"),Ve.CLIPPATH=new Ve("clipPath"),Ve.DEFS=new Ve("defs"),Ve.FECOMPOSITE=new Ve("feComposite"),Ve.FECOMPONENTTRANSFER=new Ve("feComponentTransfer"),Ve.FEFLOOD=new Ve("feFlood"),Ve.FEFUNCA=new Ve("feFuncA"),Ve.FEGAUSSIANBLUR=new Ve("feGaussianBlur"),Ve.FEPOINTLIGHT=new Ve("fePointLight"),Ve.FESPECULARLIGHTING=new Ve("feSpecularLighting"),Ve.FILTER=new Ve("filter"),Ve.FOREIGNOBJECT=new Ve("foreignObject"),Ve.G=new Ve("g"),Ve.IMAGE=new Ve("image"),Ve.LINE=new Ve("line"),Ve.PATH=new Ve("path"),Ve.PATTERN=new Ve("pattern"),Ve.POLYGON=new Ve("polygon"),Ve.RECT=new Ve("rect"),Ve.SVG=new Ve("svg"),Ve.TEXT=new Ve("text"),Ve.TSPAN=new Ve("tspan");var Oi=class{constructor(i,a,p,w){this.top=i,this.bottom=a,this.left=p,this.right=w}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(i,a){return i>=this.left&&i<=this.right&&a>=this.top&&a<=this.bottom}intersects(i){return!(this.left>i.right||this.right<i.left||this.top>i.bottom||this.bottom<i.top)}},eo=class{constructor(i,a){this.width=i,this.height=a}static equals(i,a){return i===a?!0:i&&a?i.width===a.width&&i.height===a.height:!1}},T_={getSizeInternal:_t},xc={TEST_ONLY:T_};xc.getBorderBox=Pr,xc.getComputedStyle=Kt,xc.getContainerOffsetToScrollInto=$r,xc.getPageOffset=On,xc.getSize=tn,xc.getViewportPageOffset=si,xc.scrollIntoContainerView=Ei;var Ep=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,em=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,S_={XY_REGEX:Ep,XY_STYLE_REGEX:em},xp={TEST_ONLY:S_};xp.getDocumentScroll=We,xp.getInjectionDivXY=ne,xp.getRelativeXY=gr,xp.getViewportBBox=Se,xp.screenToWsCoordinates=ot,xp.wsToScreenCoordinates=zt;var xa=class{constructor(i,a,p,w,k){this.workspace=i,this.horizontal=a,this.oldHostMetrics=null,this.ratio=1,this.origin=new _n(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new _n(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=p||!1,this.margin=k!==void 0?k:xa.DEFAULT_SCROLLBAR_MARGIN,i="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),w&&(i+=" "+w),this.outerSvg=se(Ve.SVG,{class:i}),w=se(Ve.G,{},this.outerSvg),this.svgBackground=se(Ve.RECT,{class:"blocklyScrollbarBackground"},w),i=Math.floor((xa.scrollbarThickness-5)/2),this.svgHandle=se(Ve.RECT,{class:"blocklyScrollbarHandle",rx:i,ry:i},w),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),Ke(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),a?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Ce(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Ce(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const i=xa.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(i)),this.outerSvg.setAttribute("height",String(i)),this.svgHandle.setAttribute("height",String(i-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(i)),this.outerSvg.setAttribute("width",String(i)),this.svgHandle.setAttribute("width",String(i-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),rt(this.onMouseDownBarWrapper_),rt(this.onMouseDownHandleWrapper_),pt(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(i){return i=0>=i||isNaN(i)?0:Math.min(i,this.scrollbarLength)}setHandleLength(i){this.handleLength=i,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(i){return i=0>=i||isNaN(i)?0:Math.min(i,this.scrollbarLength-this.handleLength)}setHandlePosition(i){this.handlePosition=i,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(i){this.scrollbarLength=i,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(i,a){this.position.x=i,this.position.y=a,Q(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(i){!i&&(i=this.workspace.getMetrics(),!i)||this.oldHostMetrics&&xa.metricsAreEquivalent(i,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(i):this.resizeVertical(i),this.oldHostMetrics=i,this.updateMetrics())}requiresViewResize(i){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==i.viewWidth||this.oldHostMetrics.viewHeight!==i.viewHeight||this.oldHostMetrics.absoluteLeft!==i.absoluteLeft||this.oldHostMetrics.absoluteTop!==i.absoluteTop:!0}resizeHorizontal(i){this.requiresViewResize(i)?this.resizeViewHorizontal(i):this.resizeContentHorizontal(i)}resizeViewHorizontal(i){var a=i.viewWidth-2*this.margin;this.pair&&(a-=xa.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),a=i.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(a+=xa.scrollbarThickness),this.setPosition(a,i.absoluteTop+i.viewHeight-xa.scrollbarThickness-this.margin),this.resizeContentHorizontal(i)}resizeContentHorizontal(i){if(i.viewWidth>=i.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*i.viewWidth/i.scrollWidth;a=this.constrainHandleLength(a),this.setHandleLength(a),a=i.scrollWidth-i.viewWidth;var p=this.scrollbarLength-this.handleLength;i=(i.viewLeft-i.scrollLeft)/a*p,i=this.constrainHandlePosition(i),this.setHandlePosition(i),this.ratio=p/a}}resizeVertical(i){this.requiresViewResize(i)?this.resizeViewVertical(i):this.resizeContentVertical(i)}resizeViewVertical(i){let a=i.viewHeight-2*this.margin;this.pair&&(a-=xa.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),this.setPosition(this.workspace.RTL?i.absoluteLeft+this.margin:i.absoluteLeft+i.viewWidth-xa.scrollbarThickness-this.margin,i.absoluteTop+this.margin),this.resizeContentVertical(i)}resizeContentVertical(i){if(i.viewHeight>=i.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*i.viewHeight/i.scrollHeight;a=this.constrainHandleLength(a),this.setHandleLength(a),a=i.scrollHeight-i.viewHeight;var p=this.scrollbarLength-this.handleLength;i=(i.viewTop-i.scrollTop)/a*p,i=this.constrainHandlePosition(i),this.setHandlePosition(i),this.ratio=p/a}}isVisible(){return this.isHandleVisible}setContainerVisible(i){const a=i!==this.containerVisible;this.containerVisible=i,a&&this.updateDisplay_()}setVisible(i){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(i)}setVisibleInternal(i){const a=i!==this.isVisible();this.isHandleVisible=i,a&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(i){if(this.workspace.markFocused(),nt(),this.cleanUp(),Nt(i))i.stopPropagation();else{var a=kt(i,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());a=this.horizontal?a.x:a.y;var p=ne(this.svgHandle);p=this.horizontal?p.x:p.y;var w=this.handlePosition,k=.95*this.handleLength;a<=p?w-=k:a>=p+this.handleLength&&(w+=k),this.setHandlePosition(this.constrainHandlePosition(w)),this.updateMetrics(),i.stopPropagation(),i.preventDefault()}}onMouseDownHandle(i){this.workspace.markFocused(),this.cleanUp(),Nt(i)?i.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?i.clientX:i.clientY,this.onMouseUpWrapper_=Ce(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Ce(document,"pointermove",this,this.onMouseMoveHandle),i.stopPropagation(),i.preventDefault())}onMouseMoveHandle(i){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?i.clientX:i.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){nt(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(rt(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(rt(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let i=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(i)&&(i=0),i}updateMetrics(){const i=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:i}):this.workspace.setMetrics({y:i})}set(i,a){this.setHandlePosition(this.constrainHandlePosition(i*this.ratio)),(a||a===void 0)&&this.updateMetrics()}setOrigin(i,a){this.origin=new _n(i,a)}static metricsAreEquivalent(i,a){return i.viewWidth===a.viewWidth&&i.viewHeight===a.viewHeight&&i.viewLeft===a.viewLeft&&i.viewTop===a.viewTop&&i.absoluteTop===a.absoluteTop&&i.absoluteLeft===a.absoluteLeft&&i.scrollWidth===a.scrollWidth&&i.scrollHeight===a.scrollHeight&&i.scrollLeft===a.scrollLeft&&i.scrollTop===a.scrollTop}};xa.scrollbarThickness=W?25:15,xa.DEFAULT_SCROLLBAR_MARGIN=.5;var Mg={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},tm={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:$p,DOMParser:_l,XMLSerializer:cu}=globalThis;_l&&(Mg=new _l),cu&&(tm=new cu);var Pd="https://developers.google.com/blockly/xml",gf=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Bd={NAME_SPACE:Pd};Bd.createElement=t.createElement$$module$build$src$core$utils$xml,Bd.createTextNode=t.createTextNode$$module$build$src$core$utils$xml,Bd.domToText=Nn,Bd.injectDependencies=sn,Bd.textToDom=t.textToDom$$module$build$src$core$utils$xml;var nh="categoryToolbox",Ag="flyoutToolbox",pr;(function(i){i[i.TOP=0]="TOP",i[i.BOTTOM=1]="BOTTOM",i[i.LEFT=2]="LEFT",i[i.RIGHT=3]="RIGHT"})(pr||(pr={}));var _0={hasCategoriesInternal:Wn},yo={};yo.Position=pr,yo.TEST_ONLY=_0,yo.convertFlyoutDefToJsonArray=bt,yo.convertToolboxDefToJson=gt,yo.hasCategories=Vt,yo.isCategoryCollapsible=rr,yo.parseToolboxTree=Br;var Ja;(function(i){i[i.TOP=0]="TOP",i[i.BOTTOM=1]="BOTTOM"})(Ja||(Ja={}));var nm;(function(i){i[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT"})(nm||(nm={}));var Fd;(function(i){i[i.UP=0]="UP",i[i.DOWN=1]="DOWN"})(Fd||(Fd={}));var rm={};rm.bumpDirection=Fd,rm.bumpPositionRect=Oa,rm.getCornerOppositeToolbox=Ss,rm.getStartPositionRect=Yr,rm.horizontalPosition=nm,rm.verticalPosition=Ja;var Ru={width:96,height:124,url:"sprites.png"},v0=class{constructor(i){this.workspace=i,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=se(Ve.G,{});const i=String(Math.random()).substring(2);return this.createZoomOutSvg(i),this.createZoomInSvg(i),this.workspace.isMovable()&&this.createZoomResetSvg(i),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[gl.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&pt(this.svgGroup);for(const i of this.boundEvents)rt(i);this.boundEvents.length=0}getBoundingRectangle(){let i=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(i+=this.LARGE_SPACING+this.HEIGHT),new Oi(this.top,this.top+i,this.left,this.left+this.WIDTH)}position(i,a){if(this.initialized){var p=Ss(this.workspace,i),w=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(w+=this.LARGE_SPACING+this.HEIGHT),i=Yr(p,new eo(this.WIDTH,w),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,i,this.workspace),p=p.vertical,a=Oa(i,this.MARGIN_VERTICAL,p===Ja.TOP?Fd.DOWN:Fd.UP,a),p===Ja.TOP){var k=this.SMALL_SPACING+this.HEIGHT,j;(j=this.zoomInGroup)==null||j.setAttribute("transform","translate(0, "+k+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(k+this.LARGE_SPACING+this.HEIGHT)+")")}else{j=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let Ue;(Ue=this.zoomInGroup)==null||Ue.setAttribute("transform","translate(0, "+j+")"),j=j+this.SMALL_SPACING+this.HEIGHT,(k=this.zoomOutGroup)==null||k.setAttribute("transform","translate(0, "+j+")")}this.top=a.top,this.left=a.left;var ve;(ve=this.svgGroup)==null||ve.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(i){this.zoomOutGroup=se(Ve.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const a=se(Ve.CLIPPATH,{id:"blocklyZoomoutClipPath"+i},this.zoomOutGroup);se(Ve.RECT,{width:32,height:32},a),se(Ve.IMAGE,{width:Ru.width,height:Ru.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+i+")"},this.zoomOutGroup).setAttributeNS(Zs,"xlink:href",this.workspace.options.pathToMedia+Ru.url),this.boundEvents.push(Ce(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(i){this.zoomInGroup=se(Ve.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const a=se(Ve.CLIPPATH,{id:"blocklyZoominClipPath"+i},this.zoomInGroup);se(Ve.RECT,{width:32,height:32},a),se(Ve.IMAGE,{width:Ru.width,height:Ru.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+i+")"},this.zoomInGroup).setAttributeNS(Zs,"xlink:href",this.workspace.options.pathToMedia+Ru.url),this.boundEvents.push(Ce(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(i,a){this.workspace.markFocused(),this.workspace.zoomCenter(i),this.fireZoomEvent(),nt(),a.stopPropagation(),a.preventDefault()}createZoomResetSvg(i){this.zoomResetGroup=se(Ve.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const a=se(Ve.CLIPPATH,{id:"blocklyZoomresetClipPath"+i},this.zoomResetGroup);se(Ve.RECT,{width:32,height:32},a),se(Ve.IMAGE,{width:Ru.width,height:Ru.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+i+")"},this.zoomResetGroup).setAttributeNS(Zs,"xlink:href",this.workspace.options.pathToMedia+Ru.url),this.boundEvents.push(Ce(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(i){this.workspace.markFocused();const a=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(a),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),nt(),i.stopPropagation(),i.preventDefault()}fireZoomEvent(){const i=new(Ie(rc))(null,this.workspace.id,"zoom_controls");ue(i)}};At(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var jo=class{constructor(i){this.name=i}toString(){return this.name}equals(i){return this.name===i.toString()}};jo.MUTATOR=new jo("mutator"),jo.WARNING=new jo("warning"),jo.COMMENT=new jo("comment"),function(i){i[i.VALUE=1]="VALUE",i[i.STATEMENT=3]="STATEMENT",i[i.DUMMY=5]="DUMMY",i[i.CUSTOM=6]="CUSTOM",i[i.END_ROW=7]="END_ROW"}(t.inputTypes$$module$build$src$core$inputs$input_types||(t.inputTypes$$module$build$src$core$inputs$input_types={})),t.inputTypes$$module$build$src$core$inputs$input_types;var ts=function(i,a){window.alert(i),a&&a()},hu=function(i,a){a(window.confirm(i))},vl=function(i,a,p){p(window.prompt(i,a))},ku={confirmInternal:Rr},du={TEST_ONLY:ku};du.alert=xo,du.confirm=nn,du.prompt=La,du.setAlert=Yl,du.setConfirm=el,du.setPrompt=Fs;var Cp,Fl;t.Msg$$module$build$src$core$msg=Object.create(null),Cp=function(i){Object.keys(i).forEach(function(a){t.Msg$$module$build$src$core$msg[a]=i[a]})},Fl={Msg:t.Msg$$module$build$src$core$msg,setLocale:Cp};var zd=class extends d{constructor(i){super(),this.isBlank=typeof i>"u",i&&(this.varId=i.getId(),this.workspaceId=i.workspace.id)}toJson(){const i=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return i.varId=this.varId,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new zd),a.varId=i.varId,a}},Ud=class extends zd{constructor(i){super(i),this.type=go,i&&(this.varType=i.type,this.varName=i.name)}toJson(){const i=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return i.varType=this.varType,i.varName=this.varName,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Ud),a.varType=i.varType,a.varName=i.varName,a}run(i){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");i?a.createVariable(this.varName,this.varType,this.varId):a.deleteVariableById(this.varId)}};r(Ft.EVENT,go,Ud);var _f=class{constructor(i,a,p,w){this.workspace=i,this.name=a,this.type=p||"",this.id_=w||q()}getId(){return this.id_}static compareByName(i,a){return i.name.localeCompare(a.name,void 0,{sensitivity:"base"})}},Ig="VARIABLE",im="ijkmnopqrstuvwxyzabcdefgh",rh={generateUniqueNameInternal:yr},yl={CATEGORY_NAME:Ig,TEST_ONLY:rh,VAR_LETTER_OPTIONS:im};yl.allDeveloperVariables=t.allDeveloperVariables$$module$build$src$core$variables,yl.allUsedVarModels=t.allUsedVarModels$$module$build$src$core$variables,yl.createVariableButtonHandler=ws,yl.flyoutCategory=An,yl.flyoutCategoryBlocks=Ir,yl.generateUniqueName=Gr,yl.generateUniqueNameFromOptions=Pi,yl.generateVariableFieldDom=Xs,yl.getAddedVariables=Xl,yl.getOrCreateVariablePackage=t.getOrCreateVariablePackage$$module$build$src$core$variables,yl.getVariable=t.getVariable$$module$build$src$core$variables,yl.nameUsedWithAnyType=tl,yl.nameUsedWithConflictingParam=Na,yl.promptName=fi,yl.renameVariable=t.renameVariable$$module$build$src$core$variables;var ih=class{constructor(i,a,p,w,k){this.workspace=i,this.editable=this.movable=this.deletable=!0,this.disposed_=!1,this.isComment=!0,this.id=k&&!i.getCommentById(k)?k:q(),i.addTopComment(this),this.xy_=new _n(0,0),this.height_=p,this.width_=w,this.RTL=i.RTL,this.content_=a,ih.fireCreateEvent(this)}dispose(){this.disposed_||(ie()&&ue(new(Ie(qh))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(i){this.height_=i}getWidth(){return this.width_}setWidth(i){this.width_=i}getRelativeToSurfaceXY(){return new _n(this.xy_.x,this.xy_.y)}moveBy(i,a){const p=new(Ie(Ta))(this);this.xy_.translate(i,a),p.recordNew(),ue(p)}isDeletable(){return this.deletable&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(i){this.deletable=i}isMovable(){return this.movable&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(i){this.movable=i}isEditable(){return this.editable&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(i){this.editable=i}getContent(){return this.content_}setContent(i){this.content_!==i&&(ue(new(Ie(yd))(this,this.content_,i)),this.content_=i)}toXmlWithXY(i){return i=this.toXml(i),i.setAttribute("x",String(Math.round(this.xy_.x))),i.setAttribute("y",String(Math.round(this.xy_.y))),i.setAttribute("h",String(this.height_)),i.setAttribute("w",String(this.width_)),i}toXml(i){const a=t.createElement$$module$build$src$core$utils$xml("comment");return i||(a.id=this.id),a.textContent=this.getContent(),a}static fireCreateEvent(i){if(ie()){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);try{ue(new(Ie(cs))(i))}finally{t.setGroup$$module$build$src$core$events$utils(a)}}}static fromXml(i,a){var p=ih.parseAttributes(i);return a=new ih(a,p.content,p.h,p.w,p.id),p=i.getAttribute("x"),i=i.getAttribute("y"),p=p?parseInt(p,10):NaN,i=i?parseInt(i,10):NaN,isNaN(p)||isNaN(i)||a.moveBy(p,i),ih.fireCreateEvent(a),a}static parseAttributes(i){const a=i.getAttribute("h"),p=i.getAttribute("w"),w=i.getAttribute("x"),k=i.getAttribute("y"),j=i.getAttribute("id");if(!j)throw Error("No ID present in XML comment definition.");let ve;return{id:j,h:a?parseInt(a):100,w:p?parseInt(p):100,x:w?parseInt(w):NaN,y:k?parseInt(k):NaN,content:(ve=i.textContent)!=null?ve:""}}},Hd=class extends _{constructor(i,a,p){super(p),this.type=_o,this.oldElementId=i??void 0,this.newElementId=a??void 0}toJson(){const i=super.toJson();return i.oldElementId=this.oldElementId,i.newElementId=this.newElementId,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Hd),a.oldElementId=i.oldElementId,a.newElementId=i.newElementId,a}};r(Ft.EVENT,_o,Hd);var Jm={};Jm.register=gu,Jm.unregister=mh;var qm=class{paste(i,a,p){const w=i.commentState;if(p)w.setAttribute("x",`${p.x}`),w.setAttribute("y",`${p.y}`);else{var k;p=parseInt((k=w.getAttribute("x"))!=null?k:"0")+50;let j;k=parseInt((j=w.getAttribute("y"))!=null?j:"0")+50,w.setAttribute("x",`${p}`),w.setAttribute("y",`${k}`)}return zl.fromXmlRendered(i.commentState,a)}};qm.TYPE="workspace-comment",gu(qm.TYPE,new qm);var bo=8,sm=3,Ls=2,zl=class extends ih{constructor(i,a,p,w,k){super(i,a,p,w,k),this.onMouseMoveWrapper=this.onMouseUpWrapper=null,this.eventsInit=!1,this.deleteIconBorder=this.deleteGroup=this.resizeGroup=this.foreignObject=this.svgHandleTarget=this.svgRectTarget=this.textarea=null,this.rendered=this.autoLayout=this.focused=!1,this.svgGroup=se(Ve.G,{class:"blocklyComment"}),this.workspace=i,this.svgRect_=se(Ve.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:sm,ry:sm}),this.svgGroup.appendChild(this.svgRect_),this.render()}dispose(){this.disposed_||(L()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),ie()&&ue(new(Ie(qh))(this)),pt(this.svgGroup),t.disable$$module$build$src$core$events$utils(),super.dispose(),t.enable$$module$build$src$core$events$utils())}initSvg(i){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit||(Ce(this.svgRectTarget,"pointerdown",this,this.pathMouseDown),Ce(this.svgHandleTarget,"pointerdown",this,this.pathMouseDown)),this.eventsInit=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!i&&this.textarea&&this.textarea.select()}pathMouseDown(i){const a=this.workspace.getGesture(i);a&&a.handleBubbleStart(i,this)}showContextMenu(i){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(L()!==this){var i=null;if(L()){i=L().id,t.disable$$module$build$src$core$events$utils();try{L().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}i=new(Ie(_o))(i,this.id,this.workspace.id),ue(i),B(this),this.addSelect()}}unselect(){if(L()===this){var i=new(Ie(_o))(this.id,null,this.workspace.id);ue(i),B(null),this.removeSelect(),this.blurFocus()}}addSelect(){$e(this.svgGroup,"blocklySelected"),this.setFocus()}removeSelect(){$e(this.svgGroup,"blocklySelected"),this.blurFocus()}addFocus(){$e(this.svgGroup,"blocklyFocused")}removeFocus(){St(this.svgGroup,"blocklyFocused")}getRelativeToSurfaceXY(){const i=this.workspace.getLayerManager();if(!i)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,p=0,w=this.getSvgRoot();if(w)do{const k=gr(w);a+=k.x,p+=k.y,w=w.parentNode}while(w&&!i.hasLayer(w)&&w!==null);return this.xy_=new _n(a,p)}moveBy(i,a){const p=new(Ie(Ta))(this),w=this.getRelativeToSurfaceXY();this.translate(w.x+i,w.y+a),this.xy_=new _n(w.x+i,w.y+a),p.recordNew(),ue(p),this.workspace.resizeContents()}translate(i,a){this.xy_=new _n(i,a),this.getSvgRoot().setAttribute("transform","translate("+i+","+a+")")}moveDuringDrag(i){i=`translate(${i.x}, ${i.y})`,this.getSvgRoot().setAttribute("transform",i)}moveTo(i,a){this.translate(i,a)}clearTransformAttributes(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var i=this.getRelativeToSurfaceXY();const a=this.getHeightWidth(),p=i.y,w=i.y+a.height;let k;return this.RTL?(k=i.x-a.width,i=i.x):(k=i.x,i=i.x+a.width),new Oi(p,w,k,i)}updateMovable(){this.isMovable()?$e(this.svgGroup,"blocklyDraggable"):St(this.svgGroup,"blocklyDraggable")}setMovable(i){super.setMovable(i),this.updateMovable()}setEditable(i){super.setEditable(i),this.textarea&&(this.textarea.readOnly=!i)}setDragging(i){i?$e(this.getSvgRoot(),"blocklyDragging"):St(this.getSvgRoot(),"blocklyDragging")}getSvgRoot(){return this.svgGroup}getContent(){return this.textarea?this.textarea.value:this.content_}setContent(i){super.setContent(i),this.textarea&&(this.textarea.value=i)}setDeleteStyle(i){i?$e(this.svgGroup,"blocklyDraggingDelete"):St(this.svgGroup,"blocklyDraggingDelete")}setAutoLayout(i){}toXmlWithXY(i){let a=0;this.workspace.RTL&&(a=this.workspace.getWidth()),i=this.toXml(i);const p=this.getRelativeToSurfaceXY();return i.setAttribute("x",String(Math.round(this.workspace.RTL?a-p.x:p.x))),i.setAttribute("y",String(Math.round(p.y))),i.setAttribute("h",String(this.getHeight())),i.setAttribute("w",String(this.getWidth())),i}toCopyData(){return{paster:qm.TYPE,commentState:this.toXmlWithXY()}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered){var i=this.getHeightWidth(),a=this.createEditor();this.svgGroup.appendChild(a),this.svgHandleTarget=se(Ve.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup.appendChild(this.svgHandleTarget),this.svgRectTarget=se(Ve.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:sm,ry:sm}),this.svgGroup.appendChild(this.svgRectTarget),this.addResizeDom(),this.isDeletable()&&this.addDeleteDom(),this.setSize(i.width,i.height),this.textarea.value=this.content_,this.rendered=!0,this.resizeGroup&&Ce(this.resizeGroup,"pointerdown",this,this.resizeMouseDown),this.isDeletable()&&(Ce(this.deleteGroup,"pointerdown",this,this.deleteMouseDown),Ce(this.deleteGroup,"pointerout",this,this.deleteMouseOut),Ce(this.deleteGroup,"pointerup",this,this.deleteMouseUp))}}createEditor(){this.foreignObject=se(Ve.FOREIGNOBJECT,{x:0,y:zl.TOP_OFFSET,class:"blocklyCommentForeignObject"});const i=document.createElementNS(Ec,"body");i.setAttribute("xmlns",Ec),i.className="blocklyMinimalBody";const a=document.createElementNS(Ec,"textarea");return a.className="blocklyCommentTextarea",a.setAttribute("dir",this.RTL?"RTL":"LTR"),a.readOnly=!this.isEditable(),i.appendChild(a),this.textarea=a,this.foreignObject.appendChild(i),Ce(a,"wheel",this,function(p){p.stopPropagation()}),Ce(a,"change",this,function(p){this.setContent(a.value)}),this.foreignObject}addResizeDom(){this.resizeGroup=se(Ve.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup),se(Ve.POLYGON,{points:`0,${bo} ${bo},${bo} ${bo},0`},this.resizeGroup),se(Ve.LINE,{class:"blocklyResizeLine",x1:bo/3,y1:bo-1,x2:bo-1,y2:bo/3},this.resizeGroup),se(Ve.LINE,{class:"blocklyResizeLine",x1:2*bo/3,y1:bo-1,x2:bo-1,y2:2*bo/3},this.resizeGroup)}addDeleteDom(){this.deleteGroup=se(Ve.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup),this.deleteIconBorder=se(Ve.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup),se(Ve.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup),se(Ve.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup)}resizeMouseDown(i){this.unbindDragEvents(),Nt(i)||(this.workspace.startDrag(i,new _n(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper=Ce(document,"pointerup",this,this.resizeMouseUp),this.onMouseMoveWrapper=Ce(document,"pointermove",this,this.resizeMouseMove),this.workspace.hideChaff()),i.stopPropagation()}deleteMouseDown(i){this.deleteIconBorder&&$e(this.deleteIconBorder,"blocklyDeleteIconHighlighted"),i.stopPropagation()}deleteMouseOut(i){this.deleteIconBorder&&St(this.deleteIconBorder,"blocklyDeleteIconHighlighted")}deleteMouseUp(i){this.dispose(),i.stopPropagation()}unbindDragEvents(){this.onMouseUpWrapper&&(rt(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onMouseMoveWrapper&&(rt(this.onMouseMoveWrapper),this.onMouseMoveWrapper=null)}resizeMouseUp(i){nt(),this.unbindDragEvents()}resizeMouseMove(i){this.autoLayout=!1,i=this.workspace.moveDrag(i),this.setSize(this.RTL?-i.x:i.x,i.y)}resizeComment(){const i=this.getHeightWidth(),a=zl.TOP_OFFSET,p=2*Ls;let w;(w=this.foreignObject)==null||w.setAttribute("width",String(i.width));let k;if((k=this.foreignObject)==null||k.setAttribute("height",String(i.height-a)),this.RTL){let j;(j=this.foreignObject)==null||j.setAttribute("x",String(-i.width))}this.textarea&&(this.textarea.style.width=i.width-p+"px",this.textarea.style.height=i.height-p-a+"px")}setSize(i,a){i=Math.max(i,45),a=Math.max(a,20+zl.TOP_OFFSET),this.width_=i,this.height_=a,this.svgRect_.setAttribute("width",`${i}`),this.svgRect_.setAttribute("height",`${a}`);let p;(p=this.svgRectTarget)==null||p.setAttribute("width",`${i}`);let w;(w=this.svgRectTarget)==null||w.setAttribute("height",`${a}`);let k;(k=this.svgHandleTarget)==null||k.setAttribute("width",`${i}`);let j;if((j=this.svgHandleTarget)==null||j.setAttribute("height",String(zl.TOP_OFFSET)),this.RTL){this.svgRect_.setAttribute("transform","scale(-1 1)");let ve;(ve=this.svgRectTarget)==null||ve.setAttribute("transform","scale(-1 1)")}if(this.resizeGroup)if(this.RTL){this.resizeGroup.setAttribute("transform","translate("+(-i+bo)+","+(a-bo)+") scale(-1 1)");let ve;(ve=this.deleteGroup)==null||ve.setAttribute("transform","translate("+(-i+bo)+","+-bo+") scale(-1 1)")}else{this.resizeGroup.setAttribute("transform","translate("+(i-bo)+","+(a-bo)+")");let ve;(ve=this.deleteGroup)==null||ve.setAttribute("transform","translate("+(i-bo)+","+-bo+")")}this.resizeComment()}setFocus(){this.focused=!0,setTimeout(()=>{this.disposed_||(this.textarea.focus(),this.addFocus(),this.svgRectTarget&&$e(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&$e(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused=!1,setTimeout(()=>{this.disposed_||(this.textarea.blur(),this.removeFocus(),this.svgRectTarget&&St(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&St(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(i,a,p){t.disable$$module$build$src$core$events$utils();let w;try{const k=ih.parseAttributes(i);if(w=new zl(a,k.content,k.h,k.w,k.id),a.rendered&&(w.initSvg(!0),w.render()),!isNaN(k.x)&&!isNaN(k.y))if(a.RTL){const j=p||a.getWidth();w.moveBy(j-k.x,k.y)}else w.moveBy(k.x,k.y)}finally{t.enable$$module$build$src$core$events$utils()}return ih.fireCreateEvent(w),w}};zl.DEFAULT_SIZE=100,zl.TOP_OFFSET=10,At(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`);var Mp=new Set,Rg=new WeakSet,Gd=null,Qm=null,$c=0,Wd={};Wd.finishQueuedRenders=vr,Wd.queueRender=Qo,Wd.triggerQueuedRenders=xi;var oa={};oa.appendDomToWorkspace=Cd,oa.blockToDom=rl,oa.blockToDomWithXY=Tr,oa.clearWorkspaceAndLoadFromXml=il,oa.deleteNext=ha,oa.domToBlock=t.domToBlock$$module$build$src$core$xml,oa.domToBlockInternal=io,oa.domToPrettyText=_s,oa.domToText=qi,oa.domToVariables=zu,oa.domToWorkspace=t.domToWorkspace$$module$build$src$core$xml,oa.variablesToDom=br,oa.workspaceToDom=$l;var $a=class extends Error{},w_=class extends $a{constructor(i){super("Expected to find a 'type' property, defining the block type"),this.state=i}},om=class extends $a{constructor(i,a,p){super(`The block ${a.toDevString()} is missing a(n) ${i}
connection`),this.block=a,this.state=p}},y0=class extends $a{constructor(i,a,p,w){super(`The block ${p.toDevString()} could not connect its
${a} to its parent, because: ${i}`),this.childBlock=p,this.childState=w}},Av=class extends $a{constructor(i){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=i}},Wf=class extends $a{constructor(i,a,p){super(`Cannot add an icon of type '${i}' to the block ${a.toDevString()}, because there is no icon registered with type '${i}'. Make sure that all of your icons have been registered.`),this.block=a,this.state=p}},Ap={};Ap.BadConnectionCheck=y0,Ap.DeserializationError=$a,Ap.MissingBlockType=w_,Ap.MissingConnection=om,Ap.RealChildOfShadow=Av,Ap.UnregisteredIcon=Wf;var b0=100,Ip=75,T0=50,am={BLOCKS:T0,PROCEDURES:Ip,VARIABLES:b0},S0={};S0.register=Rs,S0.unregister=bi;var E_=class{constructor(){this.priority=T0}save(i){const a=[];for(const p of i.getTopBlocks(!1))(i=$i(p,{addCoordinates:!0,doFullSerialization:!1}))&&a.push(i);return a.length?{languageVersion:0,blocks:a}:null}load(i,a){i=i.blocks;for(const p of i)Vn(p,a,{recordUndo:ae()})}clear(i){for(const a of i.getTopBlocks(!1))a.dispose(!1)}};Rs("blocks",new E_);var lm={};lm.BlockSerializer=E_,lm.append=Vn,lm.appendInternal=Mi,lm.save=$i;var vf=class extends d{constructor(i){super(),this.isBlank=!i,i&&(this.blockId=i.id,this.workspaceId=i.workspace.id)}toJson(){const i=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return i.blockId=this.blockId,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new vf),a.blockId=i.blockId,a}},x_=class extends vf{constructor(i){super(i),this.type=t.CREATE$$module$build$src$core$events$utils,i&&(i.isShadow()&&(this.recordUndo=!1),this.xml=Tr(i),this.ids=Te(i),this.json=$i(i,{addCoordinates:!0}))}toJson(){const i=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return i.xml=qi(this.xml),i.ids=this.ids,i.json=this.json,this.recordUndo||(i.recordUndo=this.recordUndo),i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new x_),a.xml=t.textToDom$$module$build$src$core$utils$xml(i.xml),a.ids=i.ids,a.json=i.json,i.recordUndo!==void 0&&(a.recordUndo=i.recordUndo),a}run(i){const a=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!ib(a,this.ids))if(i)Vn(this.json,a);else for(i=0;i<this.ids.length;i++){const p=this.ids[i],w=a.getBlockById(p);w?w.dispose(!1):p===this.blockId&&console.warn("Can't uncreate non-existent block: "+p)}}},ib=function(i,a){return a.map(p=>i.getBlockById(p)).filter(p=>p&&p.isShadow()).length===a.length};r(Ft.EVENT,t.CREATE$$module$build$src$core$events$utils,x_);var w0=class extends _{constructor(i,a){super(a),this.type=uu,this.themeName=i}toJson(){const i=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return i.themeName=this.themeName,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new w0),a.themeName=i.themeName,a}};r(Ft.EVENT,uu,w0);var E0=class extends _{constructor(i,a,p,w,k){super(w),this.type=ni,this.viewTop=i,this.viewLeft=a,this.scale=p,this.oldScale=k}toJson(){const i=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return i.viewTop=this.viewTop,i.viewLeft=this.viewLeft,i.scale=this.scale,i.oldScale=this.oldScale,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new E0),a.viewTop=i.viewTop,a.viewLeft=i.viewLeft,a.scale=i.scale,a.oldScale=i.oldScale,a}};r(Ft.EVENT,ni,E0);var Vf;Vf=28,t.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Vf,connectingSnapRadius:Vf,currentConnectionPreference:8,bumpDelay:250},t.config$$module$build$src$core$config;var zn;(function(i){i[i.INPUT_VALUE=1]="INPUT_VALUE",i[i.OUTPUT_VALUE=2]="OUTPUT_VALUE",i[i.NEXT_STATEMENT=3]="NEXT_STATEMENT",i[i.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(zn||(zn={}));var sh=class{constructor(i){this.connectionChecker=i,this.connections=[]}addConnection(i,a){a=this.calculateIndexForYPos(a),this.connections.splice(a,0,i)}findIndexOfConnection(i,a){if(!this.connections.length)return-1;const p=this.calculateIndexForYPos(a);if(p>=this.connections.length)return-1;a=i.y;let w=p;for(;0<=w&&this.connections[w].y===a;){if(this.connections[w]===i)return w;w--}for(w=p;w<this.connections.length&&this.connections[w].y===a;){if(this.connections[w]===i)return w;w++}return-1}calculateIndexForYPos(i){if(!this.connections.length)return 0;let a=0,p=this.connections.length;for(;a<p;){const w=Math.floor((a+p)/2);if(this.connections[w].y<i)a=w+1;else if(this.connections[w].y>i)p=w;else{a=w;break}}return a}removeConnection(i,a){if(i=this.findIndexOfConnection(i,a),i===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(i,1)}getNeighbours(i,a){function p(jn){const bl=k-w[jn].x,Qa=j-w[jn].y;return Math.sqrt(bl*bl+Qa*Qa)<=a&&Yt.push(w[jn]),Qa<a}const w=this.connections,k=i.x,j=i.y;i=0;let ve=w.length-2,Ue=ve;for(;i<Ue;)w[Ue].y<j?i=Ue:ve=Ue,Ue=Math.floor((i+ve)/2);const Yt=[];if(ve=i=Ue,w.length){for(;0<=i&&p(i);)i--;do ve++;while(ve<w.length&&p(ve))}return Yt}isInYRange(i,a,p){return Math.abs(this.connections[i].y-a)<=p}searchForClosest(i,a,p){if(!this.connections.length)return{connection:null,radius:a};const w=i.y,k=i.x;i.x=k+p.x,i.y=w+p.y;var j=this.calculateIndexForYPos(i.y);p=null;let ve=a,Ue,Yt=j-1;for(;0<=Yt&&this.isInYRange(Yt,i.y,a);)Ue=this.connections[Yt],this.connectionChecker.canConnect(i,Ue,!0,ve)&&(p=Ue,ve=Ue.distanceFrom(i)),Yt--;for(;j<this.connections.length&&this.isInYRange(j,i.y,a);)Ue=this.connections[j],this.connectionChecker.canConnect(i,Ue,!0,ve)&&(p=Ue,ve=Ue.distanceFrom(i)),j++;return i.x=k,i.y=w,{connection:p,radius:ve}}static init(i){const a=[];return a[zn.INPUT_VALUE]=new sh(i),a[zn.OUTPUT_VALUE]=new sh(i),a[zn.NEXT_STATEMENT]=new sh(i),a[zn.PREVIOUS_STATEMENT]=new sh(i),a}},Rp=class{paste(i,a,p){if(!a.isCapacityAvailable(i.typeCounts))return null;p&&(i.blockState.x=p.x,i.blockState.y=p.y),t.disable$$module$build$src$core$events$utils();let w;try{w=Vn(i.blockState,a),uf(w)}finally{t.enable$$module$build$src$core$events$utils()}return w&&(ie()&&!w.isShadow()&&ue(new(Ie(t.CREATE$$module$build$src$core$events$utils))(w)),w.select(),w)}};Rp.TYPE="block",gu(Rp.TYPE,new Rp);var aa=null,$_=null,x0={duplicateInternal:Ba,copyInternal:Jl},um={};um.BlockPaster=Rp,um.TEST_ONLY=x0,um.copy=Md,um.duplicate=yh,um.paste=ks,um.registry=Jm;var sb="aria-",Iv="role",oh;(function(i){i.GRID="grid",i.GRIDCELL="gridcell",i.GROUP="group",i.LISTBOX="listbox",i.MENU="menu",i.MENUITEM="menuitem",i.MENUITEMCHECKBOX="menuitemcheckbox",i.OPTION="option",i.PRESENTATION="presentation",i.ROW="row",i.TREE="tree",i.TREEITEM="treeitem"})(oh||(oh={}));var To;(function(i){i.ACTIVEDESCENDANT="activedescendant",i.COLCOUNT="colcount",i.DISABLED="disabled",i.EXPANDED="expanded",i.INVALID="invalid",i.LABEL="label",i.LABELLEDBY="labelledby",i.LEVEL="level",i.ORIENTATION="orientation",i.POSINSET="posinset",i.ROWCOUNT="rowcount",i.SELECTED="selected",i.SETSIZE="setsize",i.VALUEMAX="valuemax",i.VALUEMIN="valuemin"})(To||(To={}));var Ou={};Ou.Role=oh,Ou.State=To,Ou.setRole=ci,Ou.setState=Er;var kg=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(i){this.menuItems.push(i)}render(i){const a=document.createElement("div");a.className="blocklyMenu goog-menu blocklyNonSelectable",a.tabIndex=0,this.roleName&&ci(a,this.roleName),this.element=a;for(let p=0,w;w=this.menuItems[p];p++)a.appendChild(w.createDom());return this.mouseOverHandler=Ce(a,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=Ce(a,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=Ce(a,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=Ce(a,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=Ce(a,"keydown",this,this.handleKeyEvent),i.appendChild(a),a}getElement(){return this.element}focus(){const i=this.getElement();i&&(i.focus({preventScroll:!0}),$e(i,"blocklyFocused"))}blur(){const i=this.getElement();i&&(i.blur(),St(i,"blocklyFocused"))}setRole(i){this.roleName=i}dispose(){this.mouseOverHandler&&(rt(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(rt(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(rt(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(rt(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(rt(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let i=0,a;a=this.menuItems[i];i++)a.dispose();this.element=null}getMenuItem(i){const a=this.getElement();for(;i&&i!==a;){if(i.classList.contains("blocklyMenuItem")){for(let p=0,w;w=this.menuItems[p];p++)if(w.getElement()===i)return w}i=i.parentElement}return null}setHighlighted(i){var a=this.highlightedItem;a&&(a.setHighlighted(!1),this.highlightedItem=null),i&&(i.setHighlighted(!0),this.highlightedItem=i,a=this.getElement(),Ei(i.getElement(),a),Er(a,To.ACTIVEDESCENDANT,i.getId()))}highlightNext(){const i=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(i,1)}highlightPrevious(){const i=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>i?this.menuItems.length:i,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(i,a){i+=a;let p;for(;p=this.menuItems[i];){if(p.isEnabled()){this.setHighlighted(p);break}i+=a}}handleMouseOver(i){(i=this.getMenuItem(i.target))&&(i.isEnabled()?this.highlightedItem!==i&&this.setHighlighted(i):this.setHighlighted(null))}handleClick(i){const a=this.openingCoords;if(this.openingCoords=null,a&&typeof i.clientX=="number"){const p=new _n(i.clientX,i.clientY);if(1>_n.distance(a,p))return}(i=this.getMenuItem(i.target))&&i.performAction()}handleMouseEnter(i){this.focus()}handleMouseLeave(i){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(i){if(this.menuItems.length&&!(i.shiftKey||i.ctrlKey||i.metaKey||i.altKey)){var a=this.highlightedItem;switch(i.key){case"Enter":case" ":a&&a.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}i.preventDefault(),i.stopPropagation()}}getSize(){const i=this.getElement(),a=tn(i);return a.height=i.scrollHeight,a}},jf=class{constructor(i,a){this.content=i,this.opt_value=a,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const i=document.createElement("div");i.id=Z(),this.element=i,i.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const a=document.createElement("div");if(a.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var p=document.createElement("div");p.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",a.appendChild(p)}return p=this.content,typeof this.content=="string"&&(p=document.createTextNode(this.content)),a.appendChild(p),i.appendChild(a),this.roleName&&ci(i,this.roleName),Er(i,To.SELECTED,this.checkable&&this.checked||!1),Er(i,To.DISABLED,!this.enabled),i}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let i;return(i=this.opt_value)!=null?i:null}setRightToLeft(i){this.rightToLeft=i}setRole(i){this.roleName=i}setCheckable(i){this.checkable=i}setChecked(i){this.checked=i}setHighlighted(i){this.highlight=i;const a=this.getElement();a&&this.isEnabled()&&(i?($e(a,"blocklyMenuItemHighlight"),$e(a,"goog-menuitem-highlight")):(St(a,"blocklyMenuItemHighlight"),St(a,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(i){this.enabled=i}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(i,a){this.actionHandler=i.bind(a)}},ed=null,cm=null,Yf="blocklyWidgetDiv",Xf="",kp="",bd,yf={};yf.createDom=zo,yf.getDiv=oo,yf.hide=Ql,yf.hideIfOwner=Wr,yf.isVisible=Fh,yf.positionWithAnchor=Sr,yf.repositionForWindowResize=cf,yf.show=ql,yf.testOnly_setDiv=Fa;var Zm=null,Rv={},Og=null,Vd={};Vd.callbackFactory=t.callbackFactory$$module$build$src$core$contextmenu,Vd.commentDeleteOption=eu,Vd.commentDuplicateOption=Uh,Vd.dispose=Us,Vd.getCurrentBlock=hf,Vd.hide=Zl,Vd.setCurrentBlock=pd,Vd.show=Wu,Vd.workspaceCommentOption=zc;var Li=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(i){if(this.registry_.has(i.id))throw Error('Menu item with ID "'+i.id+'" is already registered.');this.registry_.set(i.id,i)}unregister(i){if(!this.registry_.has(i))throw Error('Menu item with ID "'+i+'" not found.');this.registry_.delete(i)}getItem(i){let a;return(a=this.registry_.get(i))!=null?a:null}getContextMenuOptions(i,a){const p=[];for(const k of this.registry_.values())if(i===k.scopeType){var w=k.preconditionFn(a);w!=="hidden"&&(w={text:typeof k.displayText=="function"?k.displayText(a):k.displayText,enabled:w==="enabled",callback:k.callback,scope:a,weight:k.weight},p.push(w))}return p.sort(function(k,j){return k.weight-j.weight}),p}};(function(i){var a=i.ScopeType||(i.ScopeType={});a.BLOCK="block",a.WORKSPACE="workspace",i.registry=new i})(Li||(Li={})),Li.ScopeType;var hm={};hm.clamp=Fr,hm.toDegrees=is,hm.toRadians=Uc;var eg=16,Lg=1,kv=12,tg=16,Op=.25,ng=null,Kf=null,Jf="",dm="",Si,qf,fm,pm=null,Lp=null,Ng=null,v={getBoundsInfo:function(){const i=On(pm),a=tn(pm);return{left:i.x,right:i.x+a.width,top:i.y,bottom:i.y+a.height,width:a.width,height:a.height}},getPositionMetrics:function(i,a,p,w){const k=v.getBoundsInfo(),j=tn(Si);return a+j.height<k.bottom?In(i,a,k,j):w-j.height>k.top?Jn(p,w,k,j):a+j.height<document.documentElement.clientHeight?In(i,a,k,j):w-j.height>document.documentElement.clientTop?Jn(p,w,k,j):vn(i,k,j)}},T={ANIMATION_TIME:Op,ARROW_HORIZONTAL_PADDING:kv,ARROW_SIZE:eg,BORDER_SIZE:Lg,PADDING_Y:tg,TEST_ONLY:v};T.clearContent=bh,T.createDom=Cl,T.getContentDiv=xu,T.getOwner=tu,T.getPositionX=zr,T.hide=lo,T.hideIfOwner=Ti,T.hideWithoutAnimation=al,T.isVisible=ao,T.repositionForWindowResize=vs,T.setBoundsElement=za,T.setColour=Ad,T.show=rn,T.showPositionedByBlock=pi,T.showPositionedByField=ye;var R=null,F=null,Y={};Y.connectionUiEffect=pa,Y.disconnectUiEffect=Ks,Y.disconnectUiStop=Ua,Y.disposeUiEffect=$u;var ee=50,be=100,Ye=class{constructor(i,a){this.bubble=i,this.workspace=a,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY()}startBubbleDrag(){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout&&this.bubble.setAutoLayout(!1);let i;(i=this.workspace.getLayerManager())==null||i.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(i,a){a=this.pixelsToWorkspaceUnits_(a),a=_n.sum(this.startXY_,a),this.bubble.moveDuringDrag(a),a=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(i),i=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),i!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==a&&(a&&a.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(i){return i&&this.workspace.getComponentManager().hasCapability(i.id,gl.Capability.DELETE_AREA)?i.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(i,a){if(this.dragBubble(i,a),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?i=this.startXY_:(i=this.pixelsToWorkspaceUnits_(a),i=_n.sum(this.startXY_,i)),this.bubble.moveTo(i.x,i.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_)this.fireMoveEvent_(),this.bubble.dispose();else{if(this.bubble.setDragging){this.bubble.setDragging(!1);let p;(p=this.workspace.getLayerManager())==null||p.moveOffDragLayer(this.bubble,be)}this.fireMoveEvent_()}this.workspace.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}fireMoveEvent_(){if(this.bubble instanceof zl){const i=new(Ie(Ta))(this.bubble);i.setOldCoordinate(this.startXY_),i.recordNew(),ue(i)}}pixelsToWorkspaceUnits_(i){return i=new _n(i.x/this.workspace.scale,i.y/this.workspace.scale),this.workspace.isMutator&&i.scale(1/this.workspace.options.parentWorkspace.scale),i}},at=30,Lt=!0,Zt=[];Zt[zn.INPUT_VALUE]=zn.OUTPUT_VALUE,Zt[zn.OUTPUT_VALUE]=zn.INPUT_VALUE,Zt[zn.NEXT_STATEMENT]=zn.PREVIOUS_STATEMENT,Zt[zn.PREVIOUS_STATEMENT]=zn.NEXT_STATEMENT;var hn="RENAME_VARIABLE_ID",an="DELETE_VARIABLE_ID",Dn={};Dn.commonWordPrefix=pc,Dn.commonWordSuffix=ea,Dn.isNumber=t.isNumber$$module$build$src$core$utils$string,Dn.shortestStringLength=Th,Dn.startsWith=Hh,Dn.wrap=t.wrap$$module$build$src$core$utils$string;var Zn=void 0,ir=!1,Ro=!1,xt=50,dt=0,Et=0,Sn=0,lr=0,nr=null,mr=null,Lr=0,Ul=10,ds=10,Qf=750,$0=5,Lu=null,jd={HOVER_MS:Qf,LIMIT:xt,MARGINS:$0,OFFSET_X:Lr,OFFSET_Y:Ul,RADIUS_OK:ds};jd.bindMouseEvents=zi,jd.block=Rd,jd.createDom=Vh,jd.dispose=Id,jd.getCustomTooltip=ju,jd.getDiv=ta,jd.getTooltipOfObject=uo,jd.hide=Al,jd.isVisible=md,jd.setCustomTooltip=mc,jd.unbindMouseEvents=gd,jd.unblock=jh;var pT=class{constructor(i){this.workspace=i,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new _n(i.scrollX,i.scrollY)}dispose(){this.workspace=null}startDrag(){L()&&L().unselect()}endDrag(i){this.drag(i)}drag(i){if(i=_n.sum(this.startScrollXY_,i),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(i.x,i.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(i.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,i.y);else throw new TypeError("Invalid state.")}},SE=5,wE=6,mm=class{constructor(i,a){this.creatorWorkspace=a,this.mouseDownXY=new _n(0,0),this.startWorkspace_=this.targetBlock=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.flyout=this.workspaceDragger=this.blockDragger=this.bubbleDragger=null,this.isMultiTouch_=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=i,this.currentDragDeltaXY=new _n(0,0),this.healStack=!Lt}dispose(){nt(),jh(),this.creatorWorkspace.clearGesture();for(const i of this.boundEvents)rt(i);this.boundEvents.length=0,this.blockDragger&&this.blockDragger.dispose(),this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(i){const a=new _n(i.clientX,i.clientY);this.updateDragDelta(a)&&(this.updateIsDragging(),Qe()),this.mostRecentEvent=i}updateDragDelta(i){return this.currentDragDeltaXY=_n.difference(i,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=_n.magnitude(this.currentDragDeltaXY)>(this.flyout?t.config$$module$build$src$core$config.flyoutDragRadius:t.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let i;if(!this.targetBlock||(i=this.flyout)==null||!i.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),this.targetBlock.select(),!0):!1}updateIsDraggingBubble(){return this.startBubble?(this.startDraggingBubble(),!0):!1}updateIsDraggingBlock(){if(!this.targetBlock)return!1;if(this.flyout){if(this.updateIsDraggingFromFlyout())return this.startDraggingBlock(),!0}else if(this.targetBlock.isMovable())return this.startDraggingBlock(),!0;return!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger=new pT(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(){if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.updateIsDraggingBubble()||this.updateIsDraggingBlock()||this.updateIsDraggingWorkspace()}startDraggingBlock(){this.blockDragger=new(y(Ft.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock,this.startWorkspace_),this.blockDragger.startDrag(this.currentDragDeltaXY,this.healStack),this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY)}startDraggingBubble(){if(!this.startBubble)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger=new Ye(this.startBubble,this.startWorkspace_),this.bubbleDragger.startBubbleDrag(),this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY)}doStart(i){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,it(i)?this.cancel():(this.gestureHasStarted=!0,Ua(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=tu(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=i,Rd(),this.targetBlock&&this.targetBlock.select(),Nt(i)?this.handleRightClick(i):(i.type.toLowerCase()==="pointerdown"&&i.pointerType!=="mouse"&&Re(i,this),this.mouseDownXY=new _n(i.clientX,i.clientY),this.healStack=i.altKey||i.ctrlKey||i.metaKey,this.bindMouseEvents(i),this.isEnding_||this.handleTouchStart(i)))}bindMouseEvents(i){this.boundEvents.push(Ce(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(Ce(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(Ce(document,"pointerup",null,this.handleUp.bind(this),!0)),i.preventDefault(),i.stopPropagation()}handleStart(i){this.isDragging()||(this.handleTouchStart(i),this.isMultiTouch()&&Qe())}handleMove(i){this.isDragging()&&ft(i)||!this.isMultiTouch()?(this.updateFromEvent(i),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.blockDragger?this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY):this.bubbleDragger&&this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY),i.preventDefault(),i.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(i),Qe())}handleUp(i){if(this.isDragging()||this.handleTouchEnd(i),!this.isMultiTouch()||this.isDragging()){if(!ft(i))return;if(this.updateFromEvent(i),Qe(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.bubbleDragger?this.bubbleDragger.endBubbleDrag(i,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(i,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()?this.doBubbleClick():this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(i)}i.preventDefault(),i.stopPropagation(),this.dispose()}handleTouchStart(i){var a=lt(i);this.cachedPoints.set(a,this.getTouchPoint(i));var p=Array.from(this.cachedPoints.keys());p.length===2&&(a=this.cachedPoints.get(p[0]),p=this.cachedPoints.get(p[1]),this.startDistance=_n.distance(a,p),this.isMultiTouch_=!0,i.preventDefault())}handleTouchMove(i){const a=lt(i);this.cachedPoints.set(a,this.getTouchPoint(i)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(i):this.handleMove(i)}handlePinch(i){var a=Array.from(this.cachedPoints.keys()),p=this.cachedPoints.get(a[0]);if(a=this.cachedPoints.get(a[1]),p=_n.distance(p,a)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(a=p-this.previousScale,a=0<a?a*SE:a*wE,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const w=this.startWorkspace_,k=kt(i,w.getParentSvg(),w.getInverseScreenCTM());w.zoom(k.x,k.y,a)}this.previousScale=p,i.preventDefault()}handleTouchEnd(i){i=lt(i),this.cachedPoints.has(i)&&this.cachedPoints.delete(i),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(i){return this.startWorkspace_?new _n(i.pageX,i.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(Qe(),this.bubbleDragger?this.bubbleDragger.endBubbleDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(i){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(i)):this.startBubble?this.startBubble.showContextMenu(i):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(i)),i.preventDefault(),i.stopPropagation(),this.dispose()}handleWsStart(i,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(a),this.mostRecentEvent=i,this.doStart(i)}fireWorkspaceClick(i){ue(new(Ie(rc))(null,i.id,"workspace"))}handleFlyoutStart(i,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(a),this.handleWsStart(i,a.getWorkspace())}handleBlockStart(i,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(a),this.mostRecentEvent=i}handleBubbleStart(i,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(a),this.mostRecentEvent=i}doBubbleClick(){this.startBubble instanceof zl&&(this.startBubble.setFocus(),this.startBubble.select())}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock.isEnabled()&&(t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.flyout.createBlock(this.targetBlock).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const i=new(Ie(rc))(this.startBlock,this.startWorkspace_.id,"block");ue(i)}this.bringBlockToFront(),t.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(i){i=this.creatorWorkspace,L()&&L().unselect(),this.fireWorkspaceClick(this.startWorkspace_||i)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(i){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=i)}setStartIcon(i){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=i)}setStartBubble(i){this.startBubble||(this.startBubble=i)}setStartBlock(i){this.startBlock||this.startBubble||(this.startBlock=i,i.isInFlyout&&i!==i.getRootBlock()?this.setTargetBlock(i.getRootBlock()):this.setTargetBlock(i))}setTargetBlock(i){i.isShadow()?this.setTargetBlock(i.getParent()):this.targetBlock=i}setStartWorkspace(i){this.startWorkspace_||(this.startWorkspace_=i)}setStartFlyout(i){this.flyout||(this.flyout=i)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const i=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&i}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}isDragging(){return!!this.workspaceDragger||!!this.blockDragger||!!this.bubbleDragger}hasStarted(){return this.gestureHasStarted}getInsertionMarkers(){return this.blockDragger?this.blockDragger.getInsertionMarkers():[]}getCurrentDragger(){let i,a;return(a=(i=this.blockDragger)!=null?i:this.workspaceDragger)!=null?a:this.bubbleDragger}static inProgress(){const i=S();for(let a=0,p;p=i[a];a++)if(p.currentGesture_)return!0;return!1}},ob=class{constructor(i,a){this.pattern=i,this.scale=1;let p;this.spacing=(p=a.spacing)!=null?p:0;let w;this.length=(w=a.length)!=null?w:1,this.line2=(this.line1=i.firstChild)&&this.line1.nextSibling;let k;this.snapToGrid=(k=a.snap)!=null?k:!1}setSpacing(i){this.spacing=i,this.update(this.scale)}setLength(i){this.length=i,this.update(this.scale)}setSnapToGrid(i){this.snapToGrid=i}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(i){this.scale=i;var a=this.spacing*i;this.pattern.setAttribute("width",`${a}`),this.pattern.setAttribute("height",`${a}`),a=Math.floor(this.spacing/2)+.5;let p=a-this.length/2,w=a+this.length/2;a*=i,p*=i,w*=i,this.setLineAttributes(this.line1,i,p,w,a,a),this.setLineAttributes(this.line2,i,a,a,p,w)}setLineAttributes(i,a,p,w,k,j){i&&(i.setAttribute("stroke-width",`${a}`),i.setAttribute("x1",`${p}`),i.setAttribute("y1",`${k}`),i.setAttribute("x2",`${w}`),i.setAttribute("y2",`${j}`))}moveTo(i,a){this.pattern.setAttribute("x",`${i}`),this.pattern.setAttribute("y",`${a}`)}static createDom(i,a,p){i=se(Ve.PATTERN,{id:"blocklyGridPattern"+i,patternUnits:"userSpaceOnUse"},p);let w,k;if(0<((w=a.length)!=null?w:1)&&0<((k=a.spacing)!=null?k:0)){se(Ve.LINE,{stroke:a.colour},i);let j;(j=a.length)!=null&&j&&se(Ve.LINE,{stroke:a.colour},i)}else se(Ve.LINE,{},i);return i}},Ca=class{constructor(i){this.workspace=i,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(i,a){this.markers.has(i)&&this.unregisterMarker(i),a.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,a)),this.setMarkerSvg(a.getDrawer().createDom()),this.markers.set(i,a)}unregisterMarker(i){const a=this.markers.get(i);if(a)a.dispose(),this.markers.delete(i);else throw Error("Marker with ID "+i+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(i){return this.markers.get(i)||null}setCursor(i){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=i)&&(i=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(i),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(i){i?(this.workspace.getBlockCanvas().appendChild(i),this.cursorSvg_=i):this.cursorSvg_=null}setMarkerSvg(i){i?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(i,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(i)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const i=Object.keys(this.markers);for(let a=0,p;p=i[a];a++)this.unregisterMarker(p);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};Ca.LOCAL_MARKER="local_marker_1";var mT={};mT.deepMerge=Il;var Dg=class{constructor(i,a,p,w){this.name=i,this.startHats=!1,this.blockStyles=a||Object.create(null),this.categoryStyles=p||Object.create(null),this.componentStyles=w||Object.create(null),this.fontStyle=Object.create(null),r(Ft.THEME,i,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(i,a){this.blockStyles[i]=a}setCategoryStyle(i,a){this.categoryStyles[i]=a}getComponentStyle(i){if(i=this.componentStyles[i],!i)return null;if(typeof i=="string"){const a=this.getComponentStyle(i);if(a)return a}return`${i}`}setComponentStyle(i,a){this.componentStyles[i]=a}setFontStyle(i){this.fontStyle=i}setStartHats(i){this.startHats=i}static defineTheme(i,a){i=i.toLowerCase();const p=new Dg(i);let w=a.base;if(w){if(typeof w=="string"){let k;w=(k=f(Ft.THEME,w))!=null?k:void 0}w instanceof Dg&&(Il(p,w),p.name=i)}return Il(p.blockStyles,a.blockStyles),Il(p.categoryStyles,a.categoryStyles),Il(p.componentStyles,a.componentStyles),Il(p.fontStyle,a.fontStyle),a.startHats!==null&&(p.startHats=a.startHats),p}},Yd={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},kn={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},Ov=new Dg("classic",Yd,kn),Hi=class{constructor(i){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let a=null,p=!1;var w=!1,k=!1,j=!1,ve=!1,Ue=!1;const Yt=!!i.readOnly;if(!Yt){var jn;a=gt((jn=i.toolbox)!=null?jn:null),p=Vt(a),w=i.trashcan,w=w===void 0?p:w,k=i.collapse,k=k===void 0?p:k,j=i.comments,j=j===void 0?p:j,ve=i.disable,ve=ve===void 0?p:ve,Ue=i.sounds,Ue=Ue===void 0?!0:Ue}jn=i.maxTrashcanContents,w?jn===void 0&&(jn=32):jn=0;const bl=!!i.rtl;let Qa=i.horizontalLayout;Qa===void 0&&(Qa=!1);var Fp=i.toolboxPosition!=="end";Fp=Qa?Fp?pr.TOP:pr.BOTTOM:Fp===bl?pr.RIGHT:pr.LEFT;let HT=i.css;HT===void 0&&(HT=!0);let GT="https://blockly-demo.appspot.com/static/media/";i.media?GT=i.media.endsWith("/")?i.media:i.media+"/":"path"in i&&(xe("path","Nov 2014","Jul 2023","media"),GT=i.path+"media/");const Sz=i.oneBasedIndex,Vte=i.renderer||"geras",jte=i.plugins||{};let L2=i.modalInputs;L2===void 0&&(L2=!0),this.RTL=bl,this.oneBasedIndex=Sz===void 0?!0:Sz,this.collapse=k,this.comments=j,this.disable=ve,this.readOnly=Yt,this.maxBlocks=i.maxBlocks||1/0;let wz;this.maxInstances=(wz=i.maxInstances)!=null?wz:null,this.modalInputs=L2,this.pathToMedia=GT,this.hasCategories=p,this.moveOptions=Hi.parseMoveOptions_(i,p),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=w,this.maxTrashcanContents=jn,this.hasSounds=Ue,this.hasCss=HT,this.horizontalLayout=Qa,this.languageTree=a,this.gridOptions=Hi.parseGridOptions_(i),this.zoomOptions=Hi.parseZoomOptions_(i),this.toolboxPosition=Fp,this.theme=Hi.parseThemeOptions_(i),this.renderer=Vte;let Ez;this.rendererOverrides=(Ez=i.rendererOverrides)!=null?Ez:null;let xz;this.parentWorkspace=(xz=i.parentWorkspace)!=null?xz:null,this.plugins=jte}static parseMoveOptions_(i,a){const p=i.move||{},w={};return p.scrollbars===void 0&&i.scrollbars===void 0?w.scrollbars=a:typeof p.scrollbars=="object"?(w.scrollbars={horizontal:!!p.scrollbars.horizontal,vertical:!!p.scrollbars.vertical},w.scrollbars.horizontal&&w.scrollbars.vertical?w.scrollbars=!0:w.scrollbars.horizontal||w.scrollbars.vertical||(w.scrollbars=!1)):w.scrollbars=!!p.scrollbars||!!i.scrollbars,w.wheel=w.scrollbars&&p.wheel!==void 0?!!p.wheel:typeof w.scrollbars=="object",w.drag=w.scrollbars?p.drag===void 0?!0:!!p.drag:!1,w}static parseZoomOptions_(i){i=i.zoom||{};const a={};return a.controls=i.controls===void 0?!1:!!i.controls,a.wheel=i.wheel===void 0?!1:!!i.wheel,a.startScale=i.startScale===void 0?1:Number(i.startScale),a.maxScale=i.maxScale===void 0?3:Number(i.maxScale),a.minScale=i.minScale===void 0?.3:Number(i.minScale),a.scaleSpeed=i.scaleSpeed===void 0?1.2:Number(i.scaleSpeed),a.pinch=i.pinch===void 0?a.wheel||a.controls:!!i.pinch,a}static parseGridOptions_(i){i=i.grid||{};const a={};return a.spacing=Number(i.spacing)||0,a.colour=i.colour||"#888",a.length=i.length===void 0?1:Number(i.length),a.snap=0<a.spacing&&!!i.snap,a}static parseThemeOptions_(i){return i=i.theme||Ov,typeof i=="string"?f(Ft.THEME,i):i instanceof Dg?i:Dg.defineTheme(i.name||"builtin"+Z(),i)}},Jr=class extends vf{constructor(i,a,p,w,k){super(i),this.type=t.CHANGE$$module$build$src$core$events$utils,i&&(this.element=a,this.name=p||void 0,this.oldValue=w,this.newValue=k)}toJson(){const i=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return i.element=this.element,i.name=this.name,i.oldValue=this.oldValue,i.newValue=this.newValue,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Jr),a.element=i.element,a.name=i.name,a.oldValue=i.oldValue,a.newValue=i.newValue,a}isNull(){return this.oldValue===this.newValue}run(i){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");var p=a.getIcon(jo.MUTATOR);switch(p&&ru(p)&&p.bubbleIsVisible()&&p.setBubbleVisible(!1),i=i?this.newValue:this.oldValue,this.element){case"field":(a=a.getField(this.name))?a.setValue(i):console.warn("Can't set non-existent field: "+this.name);break;case"comment":a.setCommentText(i||null);break;case"collapsed":a.setCollapsed(!!i);break;case"disabled":a.setEnabled(!i);break;case"inline":a.setInputsInline(!!i);break;case"mutation":p=Jr.getExtraBlockState_(a),a.loadExtraState?a.loadExtraState(JSON.parse(i||"{}")):a.domToMutation&&a.domToMutation(t.textToDom$$module$build$src$core$utils$xml(i||"<mutation/>")),ue(new Jr(a,"mutation",null,p,i));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(i){return i.saveExtraState?(i=i.saveExtraState(!0))?JSON.stringify(i):"":i.mutationToDom&&(i=i.mutationToDom())?qi(i):""}};r(Ft.EVENT,t.CHANGE$$module$build$src$core$events$utils,Jr);var ab=.45,ah=.65,gT={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},bf={};bf.blend=Vc,bf.getHsvSaturation=Xu,bf.getHsvValue=Sh,bf.hexToRgb=Wc,bf.hsvToHex=kl,bf.hueToHex=gc,bf.names=gT,bf.parse=na,bf.rgbToHex=Rl,bf.setHsvSaturation=Ku,bf.setHsvValue=ll;var C_={};C_.checkMessageReferences=ul,C_.parseBlockColour=Qi,C_.replaceMessageReferences=Vr,C_.tokenizeInterpolation=Ga;var Gi=class{constructor(i,a,p){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new eo(0,0),i!==Gi.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(i),a&&this.setValidator(a))}configure_(i){i.tooltip&&this.setTooltip(Vr(i.tooltip))}setSourceBlock(i){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=i}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=se(Ve.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=se(Ve.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=se(Ve.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const i=this.getClickTarget_();if(!i)throw Error("A click target has not been set.");zi(i),this.mouseDownWrapper_=Ce(i,"pointerdown",this,this.onMouseDown_)}fromXml(i){this.setValue(i.textContent)}toXml(i){return i.textContent=this.getValue(),i}saveState(i){return i=this.saveLegacyState(Gi),i!==null?i:this.getValue()}loadState(i){this.loadLegacyState(Gi,i)||this.setValue(i)}saveLegacyState(i){return i.prototype.saveState===this.saveState&&i.prototype.toXml!==this.toXml?(i=t.createElement$$module$build$src$core$utils$xml("field"),i.setAttribute("name",this.name||""),Nn(this.toXml(i)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(i,a){return i.prototype.loadState===this.loadState&&i.prototype.fromXml!==this.fromXml?(this.fromXml(t.textToDom$$module$build$src$core$utils$xml(a)),!0):!1}dispose(){Ti(this),Wr(this);let i;(i=this.getSourceBlock())!=null&&i.isDeadOrDying()||pt(this.fieldGroup_),this.disposed=!0}updateEditable(){const i=this.fieldGroup_,a=this.getSourceBlock();this.EDITABLE&&i&&a&&(this.enabled_&&a.isEditable()?($e(i,"blocklyEditableText"),St(i,"blocklyNonEditableText"),i.style.cursor=this.CURSOR):($e(i,"blocklyNonEditableText"),St(i,"blocklyEditableText"),i.style.cursor=""))}setEnabled(i){this.enabled_=i,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Gi.prototype.showEditor_}isClickableInFlyout(i){return!i}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let i=!1;return this.name&&(this.SERIALIZABLE?i=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),i=!0)),i}isVisible(){return this.visible_}setVisible(i){if(this.visible_!==i){this.visible_=i;var a=this.fieldGroup_;a&&(a.style.display=i?"block":"none")}}setValidator(i){this.validator_=i}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(i){this.isClickable()&&this.showEditor_(i)}showEditor_(i){}repositionForWindowResize(){return!1}updateSize_(i){const a=this.getConstants();i=i!==void 0?i:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let p=2*i,w=a.FIELD_TEXT_HEIGHT,k=0;this.textElement_&&(k=Xe(this.textElement_,a.FIELD_TEXT_FONTSIZE,a.FIELD_TEXT_FONTWEIGHT,a.FIELD_TEXT_FONTFAMILY),p+=k),this.isFullBlockField()||(w=Math.max(w,a.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=w,this.size_.width=p,this.positionTextElement_(i,k),this.positionBorderRect_()}positionTextElement_(i,a){if(this.textElement_){var p=this.getConstants(),w=this.size_.height/2,k;this.textElement_.setAttribute("x",String((k=this.getSourceBlock())!=null&&k.RTL?this.size_.width-a-i:i)),this.textElement_.setAttribute("y",String(p.FIELD_TEXT_BASELINE_CENTER?w:w-p.FIELD_TEXT_HEIGHT/2+p.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new eo(0,0)}getScaledBBox(){let i;var a=this.getSourceBlock();if(!a)throw new ko;if(this.isFullBlockField()){var p=this.sourceBlock_.getHeightWidth();const w=a.workspace.scale;i=this.getAbsoluteXY_(),a=(p.width+1)*w,p=(p.height+1)*w,En?(i.x+=1.5*w,i.y+=1.5*w):(i.x-=.5*w,i.y-=.5*w)}else p=this.borderRect_.getBoundingClientRect(),i=On(this.borderRect_),a=p.width,p=p.height;return new Oi(i.y,i.y+p,i.x,i.x+a)}onLocationChange(i){}getDisplayText_(){let i=this.getText();return i?(i.length>this.maxDisplayLength&&(i=i.substring(0,this.maxDisplayLength-2)+""),i=i.replace(/\s/g,Gi.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(i+=""),i):Gi.NBSP}getText(){const i=this.getText_();return String(i!==null?i:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.queueRender(),this.sourceBlock_.bumpNeighbours())}setValue(i,a=!0){if(i!==null){var p=this.doClassValidation_(i);if(i=this.processValidation_(i,p),!(i instanceof Error)){var w;p=(w=this.getValidator())==null?void 0:w.call(this,i),w=this.processValidation_(i,p),w instanceof Error||(i=this.sourceBlock_,i&&i.disposed||(p=this.getValue(),p===w?this.doValueUpdate_(w):(this.doValueUpdate_(w),a&&i&&ie()&&ue(new(Ie(t.CHANGE$$module$build$src$core$events$utils))(i,"field",this.name||null,p,w)),this.isDirty_&&this.forceRerender())))}}}processValidation_(i,a){return a===null?(this.doValueInvalid_(i),this.isDirty_&&this.forceRerender(),Error()):a===void 0?i:a}getValue(){return this.value_}doClassValidation_(i){return i??null}doValueUpdate_(i){this.value_=i,this.isDirty_=!0}doValueInvalid_(i){}onMouseDown_(i){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(i=this.sourceBlock_.workspace.getGesture(i))&&i.setStartField(this)}setTooltip(i){i||i===""||(i=this.sourceBlock_);const a=this.getClickTarget_();a?a.tooltip=i:this.tooltip_=i}getTooltip(){const i=this.getClickTarget_();return uo(i||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return On(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let i=null;const a=this.getSourceBlock();if(!a)throw new ko;const p=a.inputList;for(let w=0;w<a.inputList.length;w++){const k=p[w],j=k.fieldRow;for(let ve=0;ve<j.length;ve++)if(j[ve]===this){i=k;break}}return i}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(i){return!1}setCursorSvg(i){if(i){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(i),this.cursorSvg_=i}else this.cursorSvg_=null}setMarkerSvg(i){if(i){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(i),this.markerSvg_=i}else this.markerSvg_=null}updateMarkers_(){var i=this.getSourceBlock();if(!i)throw new ko;i=i.workspace,i.keyboardAccessibilityMode&&this.cursorSvg_&&i.getCursor().draw(),i.keyboardAccessibilityMode&&this.markerSvg_&&i.getMarker(Ca.LOCAL_MARKER).draw()}};Gi.NBSP="",Gi.SKIP_SETUP=Symbol("SKIP_SETUP");var ko=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}};t.Names$$module$build$src$core$names=class{constructor(i,a){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=a||"",this.reservedWords=new Set(i?i.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(i){this.variableMap=i}getNameForUserVariable(i){return this.variableMap?(i=this.variableMap.getVariableById(i))?i.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(i){i=t.allUsedVarModels$$module$build$src$core$variables(i);for(let a=0;a<i.length;a++)this.getName(i[a].getId(),t.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(i){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(i,a){let p=i;a===t.NameType$$module$build$src$core$names.VARIABLE&&(i=this.getNameForUserVariable(i))&&(p=i),i=p.toLowerCase();const w=a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(a)||this.db.set(a,new Map);const k=this.db.get(a);return k.has(i)?w+k.get(i):(a=this.getDistinctName(p,a),k.set(i,a.substr(w.length)),a)}getUserNames(i){let a;return(i=(a=this.db.get(i))==null?void 0:a.keys())?Array.from(i):[]}getDistinctName(i,a){i=this.safeName(i);let p=null,w,k;for(;this.dbReverse.has(i+((w=p)!=null?w:""))||this.reservedWords.has(i+((k=p)!=null?k:""));)p=p?p+1:2;let j;return i+=(j=p)!=null?j:"",this.dbReverse.add(i),(a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+i}safeName(i){return i?(i=encodeURI(i.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(i[0])!==-1&&(i="my_"+i)):i=t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",i}static equals(i,a){return i.toLowerCase()===a.toLowerCase()}},function(i){i=i.NameType||(i.NameType={}),i.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",i.VARIABLE="VARIABLE",i.PROCEDURE="PROCEDURE"}(t.Names$$module$build$src$core$names||(t.Names$$module$build$src$core$names={})),t.NameType$$module$build$src$core$names=t.Names$$module$build$src$core$names.NameType,t.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,t.NameType$$module$build$src$core$names,t.Names$$module$build$src$core$names;var C0=class extends Map{constructor(){super()}set(i,a){return this.get(i)===a?this:(super.set(i,a),X(a)&&a.startPublishing(),this)}delete(i){const a=this.get(i);return i=super.delete(i),i&&(X(a)&&a.stopPublishing(),i)}clear(){if(this.size)for(const i of this.keys())this.delete(i)}add(i){return this.set(i.getId(),i)}getProcedures(){return[...this.values()]}},Lv=class{constructor(i){this.sourceBlock=i,this.offsetInBlock=new _n(0,0),this.workspaceLocation=new _n(0,0),this.svgRoot=null,this.tooltip=i}getType(){throw Error("Icons must implement getType")}initView(i){if(!this.svgRoot){var a=this.sourceBlock;this.svgRoot=se(Ve.G,{class:"blocklyIconGroup"}),a.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),Ce(this.svgRoot,"pointerdown",this,i),this.svgRoot.tooltip=this,zi(this.svgRoot)}}dispose(){gd(this.svgRoot),pt(this.svgRoot)}getWeight(){return-1}getSize(){return new eo(0,0)}setTooltip(i){this.tooltip=i??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",ru(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(i){this.offsetInBlock=i,this.updateSvgRootOffset()}updateSvgRootOffset(){let i;(i=this.svgRoot)==null||i.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(i){this.workspaceLocation=_n.sum(i,this.offsetInBlock)}onClick(){}isClickableInFlyout(i){return!0}setVisible(i){xe("setVisible","v10","v11","setBubbleVisible"),ru(this)&&this.setBubbleVisible(i)}},Cc={fromJsonInternal:Mr},M0={TEST_ONLY:Cc};M0.fromJson=t.fromJson$$module$build$src$core$field_registry,M0.register=xs,M0.unregister=ga;var Ah=class extends Gi{constructor(i,a,p){super(Gi.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,i!==Gi.SKIP_SETUP&&(Array.isArray(i)?(cl(i),i=mn(i),this.menuGenerator_=i.options,this.prefixField=i.prefix||null,this.suffixField=i.suffix||null):this.menuGenerator_=i,this.selectedOption=this.getOptions(!1)[0],p&&this.configure_(p),this.setValue(this.selectedOption[1]),a&&this.setValidator(a))}fromXml(i){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(i.textContent)}loadState(i){this.loadLegacyState(Ah,i)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(i))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=se(Ve.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&$e(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let i;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((i=this.getSourceBlock())!=null&&i.isShadow())}createTextArrow_(){this.arrow=se(Ve.TSPAN,{},this.textElement_);let i;this.arrow.appendChild(document.createTextNode((i=this.getSourceBlock())!=null&&i.RTL?Ah.ARROW_CHAR+" ":" "+Ah.ARROW_CHAR));let a;(a=this.getSourceBlock())!=null&&a.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=se(Ve.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(Zs,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(i){var a=this.getSourceBlock();if(!a)throw new ko;this.dropdownCreate(),this.menu_.openingCoords=i&&typeof i.clientX=="number"?new _n(i.clientX,i.clientY):null,bh(),i=this.menu_.render(xu()),$e(i,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(a=a.getColour(),Ad(a,this.sourceBlock_.style.colourTertiary)),ye(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),Ei(this.selectedMenuItem.getElement(),xu(),!0)),this.applyColour()}dropdownCreate(){const i=this.getSourceBlock();if(!i)throw new ko;const a=new kg;a.setRole(oh.LISTBOX),this.menu_=a;const p=this.getOptions(!1);this.selectedMenuItem=null;for(let k=0;k<p.length;k++){const[j,ve]=p[k];if(typeof j=="object"){var w=new Image(j.width,j.height);w.src=j.src,w.alt=j.alt||""}else w=j;w=new jf(w,ve),w.setRole(oh.OPTION),w.setRightToLeft(i.RTL),w.setCheckable(!0),a.addChild(w),w.setChecked(ve===this.value_),ve===this.value_&&(this.selectedMenuItem=w),w.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(i){Ti(this,!0),this.onItemSelected_(this.menu_,i)}onItemSelected_(i,a){this.setValue(a.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(i){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:i&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),cl(this.generatedOptions),this.generatedOptions)}doClassValidation_(i){return this.getOptions(!0).some(a=>a[1]===i)?i:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+i),null)}doValueUpdate_(i){super.doValueUpdate_(i),i=this.getOptions(!0);for(let a=0,p;p=i[a];a++)p[1]===this.value_&&(this.selectedOption=p)}applyColour(){const i=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",i.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",i.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=i.colourSecondary:this.arrow.style.fill=i.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const i=this.selectedOption&&this.selectedOption[0];i&&typeof i=="object"?this.renderSelectedImage(i):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(i){const a=this.getSourceBlock();if(!a)throw new ko;this.imageElement.style.display="",this.imageElement.setAttributeNS(Zs,"xlink:href",i.src),this.imageElement.setAttribute("height",String(i.height)),this.imageElement.setAttribute("width",String(i.width));const p=Number(i.height);i=Number(i.width);var w=!!this.borderRect_;const k=Math.max(w?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,p+di);w=w?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let j;j=this.svgArrow?this.positionSVGArrow(i+w,k/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Xe(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=i+j+2*w,this.size_.height=k;let ve=0;a.RTL?this.imageElement.setAttribute("x",`${w+j}`):(ve=i+j,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${w}`)),this.imageElement.setAttribute("y",String(k/2-p/2)),this.positionTextElement_(ve+w,i+j)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var i=this.getTextElement();$e(i,"blocklyDropdownText"),i.setAttribute("text-anchor","start");var a=!!this.borderRect_;i=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const p=Xe(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let w=0;this.svgArrow&&(w=this.positionSVGArrow(p+a,i/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=p+w+2*a,this.size_.height=i,this.positionTextElement_(a,p)}positionSVGArrow(i,a){if(!this.svgArrow)return 0;const p=this.getSourceBlock();if(!p)throw new ko;const w=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,k=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,j=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(p.RTL?w:i+k)+","+a+")"),j+k}getText_(){if(!this.selectedOption)return null;const i=this.selectedOption[0];return typeof i=="object"?i.alt:i}static fromJson(i){if(!i.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(i.options,void 0,i)}};Ah.CHECKMARK_OVERHANG=25,Ah.MAX_MENU_HEIGHT_VH=.45,Ah.ARROW_CHAR="";var ri=5,di=2*ri;xs("field_dropdown",Ah);var td,As=class{constructor(i,a,p){this.workspace=i,this.anchor=a,this.ownerRect=p,this.size=new eo(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.svgRoot=se(Ve.G,{},i.getBubbleCanvas()),i=se(Ve.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=se(Ve.PATH,{},i),this.background=se(Ve.RECT,{class:"blocklyDraggable",x:0,y:0,rx:td.BORDER_WIDTH,ry:td.BORDER_WIDTH},i),this.contentContainer=se(Ve.G,{},this.svgRoot),Ce(this.background,"pointerdown",this,this.onMouseDown)}dispose(){pt(this.svgRoot),this.disposed=!0}setAnchorLocation(i,a=!1){this.anchor=i,a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(i,a){this.relativeLeft=i,this.relativeTop=a,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(i,a=!1){i.width=Math.max(i.width,td.MIN_SIZE),i.height=Math.max(i.height,td.MIN_SIZE),this.size=i,this.background.setAttribute("width",`${i.width}`),this.background.setAttribute("height",`${i.height}`),a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(i){this.colour=i,this.tail.setAttribute("fill",i),this.background.setAttribute("fill",i)}onMouseDown(i){let a;(a=this.workspace.getGesture(i))==null||a.handleBubbleStart(i,this)}positionRelativeToAnchor(){let i=this.anchor.x;i=this.workspace.RTL?i-(this.relativeLeft+this.size.width):i+this.relativeLeft,this.moveTo(i,this.relativeTop+this.anchor.y)}moveTo(i,a){this.svgRoot.setAttribute("transform",`translate(${i}, ${a})`)}positionByRect(i=new Oi(0,0,0,0)){var a=this.workspace.getMetricsManager().getViewMetrics(!0),p=this.getOptimalRelativeLeft(a),w=this.getOptimalRelativeTop(a);const k={x:p,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},j={x:-this.size.width-30,y:w};w={x:i.getWidth(),y:w};var ve={x:p,y:i.getHeight()};p=i.getWidth()<i.getHeight()?w:ve,i=i.getWidth()<i.getHeight()?ve:w,w=this.getOverlap(k,a),ve=this.getOverlap(j,a);const Ue=this.getOverlap(p,a);a=this.getOverlap(i,a),a=Math.max(w,ve,Ue,a),w===a?(this.relativeLeft=k.x,this.relativeTop=k.y):ve===a?(this.relativeLeft=j.x,this.relativeTop=j.y):Ue===a?(this.relativeLeft=p.x,this.relativeTop=p.y):(this.relativeLeft=i.x,this.relativeTop=i.y),this.positionRelativeToAnchor()}getOverlap(i,a){var p=this.workspace.RTL?this.anchor.x-i.x-this.size.width:i.x+this.anchor.x;return i=i.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(p+this.size.width,a.left+a.width)-Math.max(p,a.left))*(Math.min(i+this.size.height,a.top+a.height)-Math.max(i,a.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(i){let a=-this.size.width/4;if(this.size.width>i.width)return a;if(i=this.getWorkspaceViewRect(i),this.workspace.RTL){var p=this.anchor.x-a;p-this.size.width<i.left?a=-(i.left-this.anchor.x+this.size.width):p>i.right&&(a=-(i.right-this.anchor.x))}else{p=a+this.anchor.x;const w=p+this.size.width;p<i.left?a=i.left-this.anchor.x:w>i.right&&(a=i.right-this.anchor.x-this.size.width)}return a}getOptimalRelativeTop(i){let a=-this.size.height/4;if(this.size.height>i.height)return a;const p=this.anchor.y+a,w=p+this.size.height;return i=this.getWorkspaceViewRect(i),p<i.top?a=i.top-this.anchor.y:w>i.bottom&&(a=i.bottom-this.anchor.y-this.size.height),a}getWorkspaceViewRect(i){const a=i.top;let p=i.top+i.height,w=i.left;return i=i.left+i.width,p-=this.getScrollbarThickness(),this.workspace.RTL?w-=this.getScrollbarThickness():i-=this.getScrollbarThickness(),new Oi(a,p,w,i)}getScrollbarThickness(){return xa.scrollbarThickness/this.workspace.scale}renderTail(){const i=[];var a=this.size.width/2,p=this.size.height/2,w=-this.relativeLeft,k=-this.relativeTop;if(a===w&&p===k)i.push("M "+a+","+p);else{k-=p,w-=a,this.workspace.RTL&&(w*=-1);var j=Math.sqrt(k*k+w*w),ve=Math.acos(w/j);0>k&&(ve=2*Math.PI-ve);var Ue=ve+Math.PI/2;Ue>2*Math.PI&&(Ue-=2*Math.PI);var Yt=Math.sin(Ue);const bl=Math.cos(Ue);let Qa=(this.size.width+this.size.height)/td.TAIL_THICKNESS;Qa=Math.min(Qa,this.size.width,this.size.height)/4,Ue=1-td.ANCHOR_RADIUS/j,w=a+Ue*w,k=p+Ue*k,Ue=a+Qa*bl;const Fp=p+Qa*Yt;a-=Qa*bl,p-=Qa*Yt,Yt=Uc(this.workspace.RTL?-td.TAIL_ANGLE:td.TAIL_ANGLE),Yt=ve+Yt,Yt>2*Math.PI&&(Yt-=2*Math.PI),ve=Math.sin(Yt)*j/td.TAIL_BEND,j=Math.cos(Yt)*j/td.TAIL_BEND,i.push("M"+Ue+","+Fp),i.push("C"+(Ue+j)+","+(Fp+ve)+" "+w+","+k+" "+w+","+k),i.push("C"+w+","+k+" "+(a+j)+","+(p+ve)+" "+a+","+p)}i.push("z");let jn;(jn=this.tail)==null||jn.setAttribute("d",i.join(" "))}bringToFront(){let i;const a=(i=this.svgRoot)==null?void 0:i.parentNode;return this.svgRoot&&(a==null?void 0:a.lastChild)!==this.svgRoot?(a==null||a.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new _n(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(i){this.moveTo(i.x,i.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-i.x-this.size.width:i.x-this.anchor.x,this.relativeTop=i.y-this.anchor.y,this.renderTail()}setDragging(i){}setDeleteStyle(i){}isDeletable(){return!1}showContextMenu(i){}};td=As,As.BORDER_WIDTH=6,As.DOUBLE_BORDER=2*td.BORDER_WIDTH,As.MIN_SIZE=td.DOUBLE_BORDER,As.TAIL_THICKNESS=1,As.TAIL_ANGLE=20,As.TAIL_BEND=4,As.ANCHOR_RADIUS=8;var gm=class extends As{constructor(i,a,p,w){super(a,p,w),this.workspace=a,this.anchor=p,this.ownerRect=w,this.autoLayout=!0,a=new Hi(i),this.validateWorkspaceOptions(a),this.svgDialog=se(Ve.SVG,{x:As.BORDER_WIDTH,y:As.BORDER_WIDTH},this.contentContainer),i.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new Hi(i)),this.miniWorkspace.internalIsMutator=!0,i=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(i),a.languageTree&&(i.insertBefore(this.miniWorkspace.addFlyout(Ve.G),this.miniWorkspace.getCanvas()),i=this.miniWorkspace.getFlyout(),i==null||i.init(this.miniWorkspace),i==null||i.show(a.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let k,j;(k=this.miniWorkspace.getFlyout())==null||(j=k.getWorkspace())==null||j.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(i){this.miniWorkspace.addChangeListener(i)}validateWorkspaceOptions(i){if(i.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(i.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(i.zoomOptions.controls||i.zoomOptions.wheel||i.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(i.moveOptions.scrollbars||i.moveOptions.wheel||i.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(i.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const i of this.miniWorkspace.getTopBlocks(!1)){const a=i.getRelativeToSurfaceXY();if(20>a.y&&i.moveBy(0,20-a.y),i.RTL){let p=-20;const w=this.miniWorkspace.getFlyout();w&&(p-=w.getWidth()),a.x>p&&i.moveBy(p-a.x,0)}else 20>a.x&&i.moveBy(20-a.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var i=this.getSize(),a=this.calculateWorkspaceSize();Math.abs(i.width-a.width)<gm.MINIMUM_VIEW_CHANGE&&Math.abs(i.height-a.height)<gm.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${a.width}px`),this.svgDialog.setAttribute("height",`${a.height}px`),this.miniWorkspace.setCachedParentSvgSize(a.width,a.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${a.width}, 0)`),this.setSize(new eo(a.width+As.DOUBLE_BORDER,a.height+As.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var i=this.miniWorkspace.getCanvas().getBBox();let a=i.width+gm.MARGIN;i=i.height+gm.MARGIN;const p=this.miniWorkspace.getFlyout();if(p){const w=p.getWorkspace().getMetricsManager().getScrollMetrics();i=Math.max(i,w.height+20),a+=p.getWidth()}return new eo(a,i)}updateBlockStyles(){for(var i of this.miniWorkspace.getAllBlocks(!1))i.setStyle(i.getStyleName());let a;if(i=(a=this.miniWorkspace.getFlyout())==null?void 0:a.getWorkspace())for(const p of i.getAllBlocks(!1))p.setStyle(p.getStyleName())}moveDuringDrag(i){super.moveDuringDrag(i),this.autoLayout=!1}moveTo(i,a){super.moveTo(i,a),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(i){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};gm.MINIMUM_VIEW_CHANGE=10,gm.MARGIN=3*As.DOUBLE_BORDER;var Nv,Dv;Nv=17,Dv=16,t.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends Lv{constructor(i,a){super(a),this.flyoutBlockTypes=i,this.sourceBlock=a,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(i){this.svgRoot||(super.initView(i),se(Ve.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),se(Ve.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),se(Ve.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),$e(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let i;(i=this.miniWorkspaceBubble)==null||i.dispose()}getWeight(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new eo(Nv,Nv)}applyColour(){super.applyColour();let i;(i=this.miniWorkspaceBubble)==null||i.setColour(this.sourceBlock.style.colourPrimary);let a;(a=this.miniWorkspaceBubble)==null||a.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(i){super.onLocationChange(i);let a;(a=this.miniWorkspaceBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(i){if(this.bubbleIsVisible()!==i){if(i){this.miniWorkspaceBubble=new gm(this.getMiniWorkspaceConfig(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour(),this.createRootBlock(),this.addSaveConnectionsListener();let a;(a=this.miniWorkspaceBubble)==null||a.addWorkspaceChangeListener(this.createMiniWorkspaceChangeListener())}else{let a;(a=this.miniWorkspaceBubble)==null||a.dispose(),this.miniWorkspaceBubble=null,this.saveConnectionsListener&&this.sourceBlock.workspace.removeChangeListener(this.saveConnectionsListener),this.saveConnectionsListener=null}ue(new(Ie(vo))(this.sourceBlock,i,"mutator"))}}getMiniWorkspaceConfig(){let i;const a={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(i=this.sourceBlock.workspace.options.rendererOverrides)!=null?i:void 0};return this.flyoutBlockTypes.length&&(a.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(p=>({kind:"block",type:p}))}),a}getAnchorLocation(){const i=Nv/2;return _n.sum(this.workspaceLocation,new _n(i,i))}getBubbleOwnerRect(){const i=this.sourceBlock.getSvgRoot().getBBox();return new Oi(i.y,i.y+i.height,i.x,i.x+i.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var i of this.rootBlock.getDescendants(!1))i.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let a,p,w,k;i=(k=(a=this.miniWorkspaceBubble)==null||(p=a.getWorkspace())==null||(w=p.getFlyout())==null?void 0:w.getWidth())!=null?k:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(i+Dv):Dv,Dv)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return i=>{t.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(i)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(i){return i.isUiEvent||i.type===t.CREATE$$module$build$src$core$events$utils||i.type===t.CHANGE$$module$build$src$core$events$utils&&i.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var i=t.getGroup$$module$build$src$core$events$utils();i||t.setGroup$$module$build$src$core$events$utils(!0);var a=Jr.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var p=Jr.getExtraBlockState_(this.sourceBlock);a!==p&&ue(new(Ie(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"mutation",null,a,p)),t.setGroup$$module$build$src$core$events$utils(i)}}getWorkspace(){let i;return(i=this.miniWorkspaceBubble)==null?void 0:i.getWorkspace()}static reconnect(i,a,p){return xe("MutatorIcon.reconnect","v10","v11","connection.reconnect"),i?i.reconnect(a,p):!1}static findParentWs(i){return xe("MutatorIcon.findParentWs","v10","v11","workspace.getRootWorkspace"),i.getRootWorkspace()}},t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=jo.MUTATOR,t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,t.MutatorIcon$$module$build$src$core$icons$mutator_icon;var A0=Object.create(null),EE={allExtensions:A0};t.register$$module$build$src$core$extensions("parent_tooltip_when_inline",Gs);var Xd={TEST_ONLY:EE};Xd.apply=Zi,Xd.buildTooltipForDropdown=t.buildTooltipForDropdown$$module$build$src$core$extensions,Xd.buildTooltipWithFieldText=t.buildTooltipWithFieldText$$module$build$src$core$extensions,Xd.isRegistered=hi,Xd.register=t.register$$module$build$src$core$extensions,Xd.registerMixin=t.registerMixin$$module$build$src$core$extensions,Xd.registerMutator=t.registerMutator$$module$build$src$core$extensions,Xd.runAfterPageLoad=Ld,Xd.unregister=Ri;var Hr;(function(i){i[i.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",i[i.MAC_ENTER=3]="MAC_ENTER",i[i.BACKSPACE=8]="BACKSPACE",i[i.TAB=9]="TAB",i[i.NUM_CENTER=12]="NUM_CENTER",i[i.ENTER=13]="ENTER",i[i.SHIFT=16]="SHIFT",i[i.CTRL=17]="CTRL",i[i.ALT=18]="ALT",i[i.PAUSE=19]="PAUSE",i[i.CAPS_LOCK=20]="CAPS_LOCK",i[i.ESC=27]="ESC",i[i.SPACE=32]="SPACE",i[i.PAGE_UP=33]="PAGE_UP",i[i.PAGE_DOWN=34]="PAGE_DOWN",i[i.END=35]="END",i[i.HOME=36]="HOME",i[i.LEFT=37]="LEFT",i[i.UP=38]="UP",i[i.RIGHT=39]="RIGHT",i[i.DOWN=40]="DOWN",i[i.PLUS_SIGN=43]="PLUS_SIGN",i[i.PRINT_SCREEN=44]="PRINT_SCREEN",i[i.INSERT=45]="INSERT",i[i.DELETE=46]="DELETE",i[i.ZERO=48]="ZERO",i[i.ONE=49]="ONE",i[i.TWO=50]="TWO",i[i.THREE=51]="THREE",i[i.FOUR=52]="FOUR",i[i.FIVE=53]="FIVE",i[i.SIX=54]="SIX",i[i.SEVEN=55]="SEVEN",i[i.EIGHT=56]="EIGHT",i[i.NINE=57]="NINE",i[i.FF_SEMICOLON=59]="FF_SEMICOLON",i[i.FF_EQUALS=61]="FF_EQUALS",i[i.FF_DASH=173]="FF_DASH",i[i.FF_HASH=163]="FF_HASH",i[i.QUESTION_MARK=63]="QUESTION_MARK",i[i.AT_SIGN=64]="AT_SIGN",i[i.A=65]="A",i[i.B=66]="B",i[i.C=67]="C",i[i.D=68]="D",i[i.E=69]="E",i[i.F=70]="F",i[i.G=71]="G",i[i.H=72]="H",i[i.I=73]="I",i[i.J=74]="J",i[i.K=75]="K",i[i.L=76]="L",i[i.M=77]="M",i[i.N=78]="N",i[i.O=79]="O",i[i.P=80]="P",i[i.Q=81]="Q",i[i.R=82]="R",i[i.S=83]="S",i[i.T=84]="T",i[i.U=85]="U",i[i.V=86]="V",i[i.W=87]="W",i[i.X=88]="X",i[i.Y=89]="Y",i[i.Z=90]="Z",i[i.META=91]="META",i[i.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",i[i.CONTEXT_MENU=93]="CONTEXT_MENU",i[i.NUM_ZERO=96]="NUM_ZERO",i[i.NUM_ONE=97]="NUM_ONE",i[i.NUM_TWO=98]="NUM_TWO",i[i.NUM_THREE=99]="NUM_THREE",i[i.NUM_FOUR=100]="NUM_FOUR",i[i.NUM_FIVE=101]="NUM_FIVE",i[i.NUM_SIX=102]="NUM_SIX",i[i.NUM_SEVEN=103]="NUM_SEVEN",i[i.NUM_EIGHT=104]="NUM_EIGHT",i[i.NUM_NINE=105]="NUM_NINE",i[i.NUM_MULTIPLY=106]="NUM_MULTIPLY",i[i.NUM_PLUS=107]="NUM_PLUS",i[i.NUM_MINUS=109]="NUM_MINUS",i[i.NUM_PERIOD=110]="NUM_PERIOD",i[i.NUM_DIVISION=111]="NUM_DIVISION",i[i.F1=112]="F1",i[i.F2=113]="F2",i[i.F3=114]="F3",i[i.F4=115]="F4",i[i.F5=116]="F5",i[i.F6=117]="F6",i[i.F7=118]="F7",i[i.F8=119]="F8",i[i.F9=120]="F9",i[i.F10=121]="F10",i[i.F11=122]="F11",i[i.F12=123]="F12",i[i.NUMLOCK=144]="NUMLOCK",i[i.SCROLL_LOCK=145]="SCROLL_LOCK",i[i.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",i[i.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",i[i.SEMICOLON=186]="SEMICOLON",i[i.DASH=189]="DASH",i[i.EQUALS=187]="EQUALS",i[i.COMMA=188]="COMMA",i[i.PERIOD=190]="PERIOD",i[i.SLASH=191]="SLASH",i[i.APOSTROPHE=192]="APOSTROPHE",i[i.TILDE=192]="TILDE",i[i.SINGLE_QUOTE=222]="SINGLE_QUOTE",i[i.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",i[i.BACKSLASH=220]="BACKSLASH",i[i.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",i[i.WIN_KEY=224]="WIN_KEY",i[i.MAC_FF_META=224]="MAC_FF_META",i[i.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",i[i.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",i[i.WIN_IME=229]="WIN_IME",i[i.VK_NONAME=252]="VK_NONAME",i[i.PHANTOM=255]="PHANTOM"})(Hr||(Hr={}));var Kd={};Kd.arc=mi,Kd.curve=Ws,Kd.line=Uo,Kd.lineOnAxis=xn,Kd.lineTo=iu,Kd.moveBy=Ui,Kd.moveTo=Js,Kd.point=Kn;var qa={};qa.Coordinate=_n,qa.KeyCodes=Hr,qa.Rect=Oi,qa.Size=eo,qa.Svg=Ve,qa.aria=Ou,qa.array=Zp,qa.browserEvents=th,qa.colour=bf,qa.deprecation=Cg,qa.dom=Ea,qa.extensions=Xd,qa.idGenerator=nc,qa.math=hm,qa.object=mT,qa.parsing=C_,qa.string=Dn,qa.style=xc,qa.svgMath=xp,qa.svgPaths=Kd,qa.toolbox=yo,qa.userAgent=pf,qa.xml=Bd;var M_={};M_.register=gi,M_.unregister=Uf;var _m=class extends As{constructor(i,a,p,w){super(a,p,w),this.text=i,this.workspace=a,this.anchor=p,this.ownerRect=w,this.paragraph=this.stringToSvg(i,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(i){this.text=i,pt(this.paragraph),this.paragraph=this.stringToSvg(i,this.contentContainer),this.updateBubbleSize()}stringToSvg(i,a){return a=this.createParagraph(a),i=this.createSpans(a,i),this.workspace.RTL&&this.rightAlignSpans(a.getBBox().width,i),a}createParagraph(i){return se(Ve.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:As.BORDER_WIDTH},i)}createSpans(i,a){return a.split(`
`).map(p=>{const w=se(Ve.TSPAN,{dy:"1em",x:As.BORDER_WIDTH},i);return p=document.createTextNode(p),w.appendChild(p),w})}rightAlignSpans(i,a){for(const p of a)p.setAttribute("text-anchor","end"),p.setAttribute("x",`${i+As.BORDER_WIDTH}`)}updateBubbleSize(){const i=this.paragraph.getBBox();this.setSize(new eo(i.width+2*As.BORDER_WIDTH,i.height+2*As.BORDER_WIDTH),!0)}},la=class extends As{constructor(i,a,p){super(i,a,p),this.workspace=i,this.anchor=a,this.ownerRect=p,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new eo(160+As.DOUBLE_BORDER,80+As.DOUBLE_BORDER),this.MIN_SIZE=new eo(45+As.DOUBLE_BORDER,20+As.DOUBLE_BORDER),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(i){this.text=i,this.textArea.value=i,this.onTextChange()}addTextChangeListener(i){this.textChangeListeners.push(i)}addSizeChangeListener(i){this.sizeChangeListeners.push(i)}createEditor(i){i=se(Ve.FOREIGNOBJECT,{x:As.BORDER_WIDTH,y:As.BORDER_WIDTH},i);const a=document.createElementNS(Ec,"body");a.setAttribute("xmlns",Ec),a.className="blocklyMinimalBody";const p=document.createElementNS(Ec,"textarea");return p.className="blocklyCommentTextarea",p.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),a.appendChild(p),i.appendChild(a),this.bindTextAreaEvents(p),setTimeout(()=>{p.focus()},0),{inputRoot:i,textArea:p}}bindTextAreaEvents(i){Ce(i,"wheel",this,a=>{a.stopPropagation()}),Ce(i,"focus",this,this.onStartEdit,!0),Ce(i,"change",this,this.onTextChange)}createResizeHandle(i){i=se(Ve.G,{class:this.workspace.RTL?"blocklyResizeSW":"blocklyResizeSE"},i);const a=2*As.BORDER_WIDTH;return se(Ve.POLYGON,{points:`0,${a} ${a},${a} ${a},0`},i),se(Ve.LINE,{class:"blocklyResizeLine",x1:a/3,y1:a-1,x2:a-1,y2:a/3},i),se(Ve.LINE,{class:"blocklyResizeLine",x1:2*a/3,y1:a-1,x2:a-1,y2:2*a/3},i),Ce(i,"pointerdown",this,this.onResizePointerDown),i}setSize(i,a=!1){i.width=Math.max(i.width,this.MIN_SIZE.width),i.height=Math.max(i.height,this.MIN_SIZE.height);const p=i.width-As.DOUBLE_BORDER,w=i.height-As.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${p}`),this.inputRoot.setAttribute("height",`${w}`),this.textArea.style.width=`${p-4}px`,this.textArea.style.height=`${w-4}px`,this.workspace.RTL?this.resizeGroup.setAttribute("transform",`translate(${As.DOUBLE_BORDER}, ${w}) scale(-1 1)`):this.resizeGroup.setAttribute("transform",`translate(${p}, ${w})`),super.setSize(i,a),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(i){this.bringToFront(),Nt(i)||(this.workspace.startDrag(i,new _n(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Ce(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Ce(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),i.stopPropagation()}onResizePointerUp(i){nt(),this.resizePointerUpListener&&(rt(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(rt(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(i){i=this.workspace.moveDrag(i),this.setSize(new eo(this.workspace.RTL?-i.x:i.x,i.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const i of this.textChangeListeners)i()}onSizeChange(){for(const i of this.sizeChangeListeners)i()}};At(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var Jd=17,_T=160,vT=80,nd=class extends Lv{constructor(i){super(i),this.sourceBlock=i,this.textBubble=this.textInputBubble=null,this.text="",this.bubbleSize=new eo(_T,vT),this.bubbleVisiblity=!1}getType(){return nd.TYPE}initView(i){this.svgRoot||(super.initView(i),se(Ve.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),se(Ve.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),se(Ve.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),$e(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let i;(i=this.textInputBubble)==null||i.dispose();let a;(a=this.textBubble)==null||a.dispose()}getWeight(){return nd.WEIGHT}getSize(){return new eo(Jd,Jd)}applyColour(){super.applyColour();const i=this.sourceBlock.style.colourPrimary;let a;(a=this.textInputBubble)==null||a.setColour(i);let p;(p=this.textBubble)==null||p.setColour(i)}updateEditable(){super.updateEditable(),this.bubbleIsVisible()&&(this.setBubbleVisible(!1),this.setBubbleVisible(!0))}onLocationChange(i){super.onLocationChange(i),i=this.getAnchorLocation();let a;(a=this.textInputBubble)==null||a.setAnchorLocation(i);let p;(p=this.textBubble)==null||p.setAnchorLocation(i)}setText(i){const a=this.text;ue(new(Ie(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,a,i)),this.text=i;let p;(p=this.textInputBubble)==null||p.setText(this.text);let w;(w=this.textBubble)==null||w.setText(this.text)}getText(){return this.text}setBubbleSize(i){this.bubbleSize=i;let a;(a=this.textInputBubble)==null||a.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(i){let a;this.text=(a=i.text)!=null?a:"";let p,w;this.bubbleSize=new eo((p=i.width)!=null?p:_T,(w=i.height)!=null?w:vT);let k;this.bubbleVisiblity=(k=i.pinned)!=null?k:!1,setTimeout(()=>this.setBubbleVisible(this.bubbleVisiblity),1)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var i=this.textInputBubble.getText();this.text!==i&&(ue(new(Ie(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,this.text,i)),this.text=i)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(i){(!i||!this.textBubble&&!this.textInputBubble)&&(i||this.textBubble||this.textInputBubble)&&(this.bubbleVisiblity=i,this.sourceBlock.rendered&&!this.sourceBlock.isInFlyout&&(i?(this.sourceBlock.isEditable()?this.showEditableBubble():this.showNonEditableBubble(),this.applyColour()):this.hideBubble(),ue(new(Ie(vo))(this.sourceBlock,i,"comment"))))}showEditableBubble(){this.textInputBubble=new la(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.textBubble=new _m(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect())}hideBubble(){let i;(i=this.textInputBubble)==null||i.dispose(),this.textInputBubble=null;let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}getAnchorLocation(){const i=Jd/2;return _n.sum(this.workspaceLocation,new _n(i,i))}getBubbleOwnerRect(){const i=this.sourceBlock.getSvgRoot().getBBox();return new Oi(i.y,i.y+i.height,i.x,i.x+i.width)}};nd.TYPE=jo.COMMENT,nd.WEIGHT=3,gi(nd.TYPE,nd);var lb=17,Zf=class extends Lv{constructor(i){super(i),this.sourceBlock=i,this.textMap=new Map,this.textBubble=null}getType(){return Zf.TYPE}initView(i){this.svgRoot||(super.initView(i),se(Ve.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),se(Ve.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),se(Ve.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),$e(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let i;(i=this.textBubble)==null||i.dispose()}getWeight(){return Zf.WEIGHT}getSize(){return new eo(lb,lb)}applyColour(){super.applyColour();let i;(i=this.textBubble)==null||i.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(i){super.onLocationChange(i);let a;(a=this.textBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}addMessage(i,a){if(this.textMap.get(a)===i)return this;i?this.textMap.set(a,i):this.textMap.delete(a);let p;return(p=this.textBubble)==null||p.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(i){if(this.bubbleIsVisible()!==i){if(i)this.textBubble=new _m(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour();else{let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}ue(new(Ie(vo))(this.sourceBlock,i,"warning"))}}getAnchorLocation(){const i=lb/2;return _n.sum(this.workspaceLocation,new _n(i,i))}getBubbleOwnerRect(){const i=this.sourceBlock.getSvgRoot().getBBox();return new Oi(i.y,i.y+i.height,i.x,i.x+i.width)}};Zf.TYPE=jo.WARNING,Zf.WEIGHT=2;var Pv=class extends Error{constructor(i){super(`Tried to append an icon of type ${i.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=i}},Mc={};Mc.DuplicateIconType=Pv;var Mn={};Mn.CommentIcon=nd,Mn.Icon=Lv,Mn.IconType=jo,Mn.MutatorIcon=t.MutatorIcon$$module$build$src$core$icons$mutator_icon,Mn.WarningIcon=Zf,Mn.exceptions=Mc,Mn.registry=M_;var I0,Ki;I0="PROCEDURE",t.DEFAULT_ARG$$module$build$src$core$procedures="x",Ki={CATEGORY_NAME:I0,DEFAULT_ARG:t.DEFAULT_ARG$$module$build$src$core$procedures},Ki.ObservableProcedureMap=C0,Ki.allProcedures=wh,Ki.findLegalName=t.findLegalName$$module$build$src$core$procedures,Ki.flyoutCategory=yn,Ki.getCallers=su,Ki.getDefinition=t.getDefinition$$module$build$src$core$procedures,Ki.isNameUsed=Cn,Ki.isProcedureBlock=ma,Ki.mutateCallers=t.mutateCallers$$module$build$src$core$procedures,Ki.mutatorOpenListener=_c,Ki.rename=t.rename$$module$build$src$core$procedures;var ub=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(i){return Object.prototype.hasOwnProperty.call(this,i)||(this[i]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[i]}isField(i){return i.type&this.FIELD}isHat(i){return i.type&this.HAT}isIcon(i){return i.type&this.ICON}isSpacer(i){return i.type&this.SPACER}isInRowSpacer(i){return i.type&this.IN_ROW_SPACER}isInput(i){return i.type&this.INPUT}isExternalInput(i){return i.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(i){return i.type&this.INLINE_INPUT}isStatementInput(i){return i.type&this.STATEMENT_INPUT}isPreviousConnection(i){return i.type&this.PREVIOUS_CONNECTION}isNextConnection(i){return i.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(i){return i.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(i){return i.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(i){return i.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(i){return i.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(i){return i.type&this.RIGHT_SQUARE_CORNER}isCorner(i){return i.type&this.CORNER}isJaggedEdge(i){return i.type&this.JAGGED_EDGE}isRow(i){return i.type&this.ROW}isBetweenRowSpacer(i){return i.type&this.BETWEEN_ROW_SPACER}isTopRow(i){return i.type&this.TOP_ROW}isBottomRow(i){return i.type&this.BOTTOM_ROW}isTopOrBottomRow(i){return i.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(i){return i.type&this.INPUT_ROW}},ut=new ub,sr=class{constructor(i){this.centerline=this.xPos=this.height=this.width=0,this.constants_=i,this.type=ut.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},A_=class{constructor(i){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=i,this.type=ut.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let i=this.elements.length-1;0<=i;i--){const a=this.elements[i];if(ut.isInput(a))return a}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let i=0;i<this.elements.length;i++){const a=this.elements[i];if(ut.isSpacer(a))return a}return null}getLastSpacer(){for(let i=this.elements.length-1;0<=i;i--){const a=this.elements[i];if(ut.isSpacer(a))return a}return null}},I_=class extends A_{constructor(i){super(i),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=ut.BOTTOM_ROW}hasLeftSquareCorner(i){return!!i.outputConnection||!!i.getNextBlock()}hasRightSquareCorner(i){return!0}measure(){let i=0,a=0,p=0;for(let w=0;w<this.elements.length;w++){const k=this.elements[w];a+=k.width,ut.isSpacer(k)||(ut.isNextConnection(k)?p=Math.max(p,k.height):i=Math.max(i,k.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,i)+p,this.descenderHeight=p,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},rd=class extends sr{constructor(i,a){super(i),this.connectionModel=a,this.type|=ut.CONNECTION,this.shape=this.constants_.shapeFor(a),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=a.isHighlighted()}},rg=class extends rd{constructor(i,a){super(i,a.connection),this.input=a,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=ut.INPUT,this.align=a.align,(this.connectedBlock=a.connection&&a.connection.targetBlock()?a.connection.targetBlock():null)?(i=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=i.width,this.connectedBlockHeight=i.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Bv=class extends rg{constructor(i,a){super(i,a),this.height=0,this.type|=ut.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},R0=class extends sr{constructor(i,a,p){super(i),this.field=a,this.parentInput=p,this.isEditable=a.EDITABLE,this.flipRtl=a.getFlipRtl(),this.type|=ut.FIELD,i=this.field.getSize(),this.height=i.height,this.width=i.width}},cb=class extends sr{constructor(i){super(i),this.type|=ut.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},yT=class extends sr{constructor(i,a){super(i),this.icon=a,this.flipRtl=!1,this.isVisible=ru(a)&&a.bubbleIsVisible(),this.type|=ut.ICON,i=a.getSize(),this.height=i.height,this.width=i.width}},qd=class extends sr{constructor(i,a){super(i),this.type=this.type|ut.SPACER|ut.IN_ROW_SPACER,this.width=a,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},hb=class extends rg{constructor(i,a){super(i,a),this.type|=ut.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},R_=class extends rg{constructor(i,a){super(i,a),this.type|=ut.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},db=class extends A_{constructor(i){super(i),this.connectedBlockWidths=0,this.type|=ut.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let i=0;for(let a=0;a<this.elements.length;a++){const p=this.elements[a];this.width+=p.width,ut.isInput(p)&&p instanceof rg&&(ut.isStatementInput(p)&&p instanceof R_?i+=p.connectedBlockWidth:ut.isExternalInput(p)&&p instanceof Bv&&p.connectedBlockWidth!==0&&(i+=p.connectedBlockWidth-p.connectionWidth)),ut.isSpacer(p)||(this.height=Math.max(this.height,p.height))}this.connectedBlockWidths=i,this.widthWithConnectedBlocks=this.width+i}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},bT=class extends sr{constructor(i){super(i),this.type|=ut.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},TT=class extends rd{constructor(i,a){super(i,a),this.type|=ut.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},ST=class extends rd{constructor(i,a){super(i,a),this.connectionOffsetX=0,this.type|=ut.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},wT=class extends rd{constructor(i,a){super(i,a),this.type|=ut.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},vm=class extends sr{constructor(i,a){super(i),this.type=(a&&a!=="left"?ut.RIGHT_ROUND_CORNER:ut.LEFT_ROUND_CORNER)|ut.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},fb=class extends A_{constructor(i,a,p){super(i),this.height=a,this.width=p,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|ut.SPACER|ut.BETWEEN_ROW_SPACER,this.elements=[new qd(this.constants_,p)]}measure(){}},ym=class extends sr{constructor(i,a){super(i),this.type=(a&&a!=="left"?ut.RIGHT_SQUARE_CORNER:ut.LEFT_SQUARE_CORNER)|ut.CORNER,this.width=this.height=this.constants_.NO_PADDING}},pb=class extends A_{constructor(i){super(i),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=ut.TOP_ROW}hasLeftSquareCorner(i){const a=(i.hat?i.hat==="cap":this.constants_.ADD_START_HATS)&&!i.outputConnection&&!i.previousConnection,p=i.getPreviousBlock();return!!i.outputConnection||a||(p?p.getNextBlock()===i:!1)}hasRightSquareCorner(i){return!0}measure(){let i=0,a=0,p=0;for(let w=0;w<this.elements.length;w++){const k=this.elements[w];a+=k.width,ut.isSpacer(k)||(ut.isHat(k)&&k instanceof cb?p=Math.max(p,k.ascenderHeight):i=Math.max(i,k.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,i)+p,this.capline=this.ascenderHeight=p,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},k_=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Ui(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(i){this.blockStyles=Object.create(null);const a=i.blockStyles;for(const p in a)this.blockStyles[p]=this.validatedBlockStyle_(a[p]);this.setDynamicProperties_(i)}setDynamicProperties_(i){this.setFontConstants_(i),this.setComponentConstants_(i),this.ADD_START_HATS=i.startHats!==void 0?i.startHats:this.ADD_START_HATS}setFontConstants_(i){i.fontStyle&&i.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=i.fontStyle.family),i.fontStyle&&i.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=i.fontStyle.weight),i.fontStyle&&i.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=i.fontStyle.size),i=Ge("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=i.height,this.FIELD_TEXT_BASELINE=i.baseline}setComponentConstants_(i){this.CURSOR_COLOUR=i.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=i.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=i.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(i.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(i){const a="auto_"+i;return this.blockStyles[a]||(this.blockStyles[a]=this.createBlockStyle_(i)),{style:this.blockStyles[a],name:a}}getBlockStyle(i){return this.blockStyles[i||""]||(i&&i.indexOf("auto_")===0?this.getBlockStyleForColour(i.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(i){return this.validatedBlockStyle_({colourPrimary:i})}validatedBlockStyle_(i){const a={};return i&&Object.assign(a,i),i=Qi(a.colourPrimary||"#000"),a.colourPrimary=i.hex,a.colourSecondary=a.colourSecondary?Qi(a.colourSecondary).hex:this.generateSecondaryColour_(a.colourPrimary),a.colourTertiary=a.colourTertiary?Qi(a.colourTertiary).hex:this.generateTertiaryColour_(a.colourPrimary),a.hat=a.hat||"",a}generateSecondaryColour_(i){return Vc("#fff",i,.6)||i}generateTertiaryColour_(i){return Vc("#fff",i,.3)||i}dispose(){this.embossFilter&&pt(this.embossFilter),this.disabledPattern&&pt(this.disabledPattern),this.debugFilter&&pt(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const i=this.JAGGED_TEETH_HEIGHT,a=this.JAGGED_TEETH_WIDTH,p=Uo([Kn(a,i/4),Kn(2*-a,i/2),Kn(a,i/4)]);return{height:i,width:a,path:p}}makeStartHat(){const i=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,p=Ws("c",[Kn(30,-i),Kn(70,-i),Kn(a,0)]);return{height:i,width:a,path:p}}makePuzzleTab(){function i(j){j=j?-1:1;const ve=-j;var Ue=p/2;const Yt=Ue+2.5,jn=Ue+.5,bl=Kn(-a,j*Ue);return Ue=Kn(a,j*Ue),Ws("c",[Kn(0,j*Yt),Kn(-a,ve*jn),bl])+Ws("s",[Kn(a,2.5*ve),Ue])}const a=this.TAB_WIDTH,p=this.TAB_HEIGHT,w=i(!0),k=i(!1);return{type:this.SHAPES.PUZZLE,width:a,height:p,pathDown:k,pathUp:w}}makeNotch(){function i(ve){return Uo([Kn(ve*w,p),Kn(3*ve,0),Kn(ve*w,-p)])}const a=this.NOTCH_WIDTH,p=this.NOTCH_HEIGHT,w=(a-3)/2,k=i(1),j=i(-1);return{type:this.SHAPES.NOTCH,width:a,height:p,pathLeft:k,pathRight:j}}makeInsideCorners(){const i=this.CORNER_RADIUS,a=mi("a","0 0,0",i,Kn(-i,i)),p=mi("a","0 0,0",i,Kn(i,i));return{width:i,height:i,pathTop:a,pathBottom:p}}makeOutsideCorners(){const i=this.CORNER_RADIUS,a=Ui(0,i)+mi("a","0 0,1",i,Kn(i,-i)),p=mi("a","0 0,1",i,Kn(i,i)),w=mi("a","0 0,1",i,Kn(-i,-i)),k=mi("a","0 0,1",i,Kn(-i,i));return{topLeft:a,topRight:p,bottomRight:k,bottomLeft:w,rightHeight:i}}shapeFor(i){switch(i.type){case zn.INPUT_VALUE:case zn.OUTPUT_VALUE:return this.PUZZLE_TAB;case zn.PREVIOUS_STATEMENT:case zn.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(i,a,p){this.injectCSS_(a,p),this.defs=se(Ve.DEFS,{},i),i=se(Ve.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),se(Ve.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},i),a=se(Ve.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},i),se(Ve.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},a),se(Ve.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},i),se(Ve.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},i),this.embossFilterId=i.id,this.embossFilter=i,i=se(Ve.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),se(Ve.RECT,{width:10,height:10,fill:"#aaa"},i),se(Ve.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},i),this.disabledPatternId=i.id,this.disabledPattern=i,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const i=se(Ve.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),a=se(Ve.FECOMPONENTTRANSFER,{result:"outBlur"},i);se(Ve.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),se(Ve.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},i),se(Ve.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},i),this.debugFilterId=i.id,this.debugFilter=i}}injectCSS_(i,a){a=this.getCSS_(a),i="blockly-renderer-style-"+i,this.cssNode=document.getElementById(i);const p=a.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=p:(a=document.createElement("style"),a.id=i,i=document.createTextNode(p),a.appendChild(i),document.head.insertBefore(a,document.head.firstChild),this.cssNode=a)}getCSS_(i){return[`${i} .blocklyText, `,`${i} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${i} .blocklyText {`,"fill: #fff;","}",`${i} .blocklyNonEditableText>rect,`,`${i} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${i} .blocklyNonEditableText>text,`,`${i} .blocklyEditableText>text {`,"fill: #000;","}",`${i} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${i} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${i} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${i} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${i} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${i} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${i} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${i} .blocklyReplaceable .blocklyPathLight,`,`${i} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${i} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},O_=class{constructor(i,a){this.inlinePath_=this.outlinePath_="",this.block_=i,this.info_=a,this.topLeft_=i.getRelativeToSurfaceXY(),this.constants_=a.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}hideHiddenIcons_(){xe("hideHiddenIcons_","v10","v11")}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}drawOutline_(){this.drawTop_();for(let i=1;i<this.info_.rows.length-1;i++){const a=this.info_.rows[i];a.hasJaggedEdge?this.drawJaggedEdge_(a):a.hasStatement?this.drawStatementInput_(a):a.hasExternalInput?this.drawValueInput_(a):this.drawRightSideRow_(a)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const i=this.info_.topRow,a=i.elements;this.positionPreviousConnection_(),this.outlinePath_+=Ui(i.xPos,this.info_.startY);for(let p=0,w;w=a[p];p++)ut.isLeftRoundedCorner(w)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:ut.isRightRoundedCorner(w)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:ut.isPreviousConnection(w)&&w instanceof rd?this.outlinePath_+=w.shape.pathLeft:ut.isHat(w)?this.outlinePath_+=this.constants_.START_HAT.path:ut.isSpacer(w)&&(this.outlinePath_+=xn("h",w.width));this.outlinePath_+=xn("v",i.height)}drawJaggedEdge_(i){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+xn("v",i.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(i){const a=i.getLastInput();this.positionExternalValueConnection_(i);const p=ys(a.shape)?a.shape.pathDown(a.height):a.shape.pathDown;this.outlinePath_+=xn("H",a.xPos+a.width)+p+xn("v",i.height-a.connectionHeight)}drawStatementInput_(i){var a=i.getLastInput();if(a){var p=a.xPos+a.notchOffset+a.shape.width;a=a.shape.pathRight+xn("h",-(a.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var w=i.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=xn("H",p)+a+xn("v",w)+this.constants_.INSIDE_CORNERS.pathBottom+xn("H",i.xPos+i.width),this.positionStatementInputConnection_(i)}}drawRightSideRow_(i){this.outlinePath_+=xn("V",i.yPos+i.height)}drawBottom_(){const i=this.info_.bottomRow,a=i.elements;this.positionNextConnection_();let p=0,w="";for(let k=a.length-1,j;j=a[k];k--)ut.isNextConnection(j)&&j instanceof rd?w+=j.shape.pathRight:ut.isLeftSquareCorner(j)?w+=xn("H",i.xPos):ut.isLeftRoundedCorner(j)?w+=this.constants_.OUTSIDE_CORNERS.bottomLeft:ut.isRightRoundedCorner(j)?(w+=this.constants_.OUTSIDE_CORNERS.bottomRight,p=this.constants_.OUTSIDE_CORNERS.rightHeight):ut.isSpacer(j)&&(w+=xn("h",-1*j.width));this.outlinePath_+=xn("V",i.baseline-p),this.outlinePath_+=w}drawLeft_(){var i=this.info_.outputConnection;if(this.positionOutputConnection_(),i){const a=i.connectionOffsetY+i.height;i=ys(i.shape)?i.shape.pathUp(i.height):i.shape.pathUp,this.outlinePath_+=xn("V",a)+i}this.outlinePath_+="z"}drawInternals_(){for(let i=0,a;a=this.info_.rows[i];i++)for(let p=0,w;w=a.elements[p];p++)ut.isInlineInput(w)?this.drawInlineInput_(w):(ut.isIcon(w)||ut.isField(w))&&this.layoutField_(w)}layoutField_(i){const a=i.centerline-i.height/2;let p=i.xPos;var w="";this.info_.RTL&&(p=-(p+i.width),i.flipRtl&&(p+=i.width,w="scale(-1 1)")),ut.isIcon(i)?(w=i.icon,w.setOffsetInBlock(new _n(p,a)),this.info_.isInsertionMarker&&w.hideForInsertionMarker()):(i=i.field.getSvgRoot(),i.setAttribute("transform","translate("+p+","+a+")"+w),this.info_.isInsertionMarker&&i.setAttribute("display","none"))}drawInlineInput_(i){const a=i.width,p=i.height,w=i.connectionOffsetY,k=i.connectionHeight+w;this.inlinePath_+=Js(i.xPos+i.connectionWidth,i.centerline-p/2)+xn("v",w)+i.shape.pathDown+xn("v",p-k)+xn("h",a-i.connectionWidth)+xn("v",-p)+"z",this.positionInlineInputConnection_(i)}positionInlineInputConnection_(i){const a=i.centerline-i.height/2;if(i.connectionModel){let p=i.xPos+i.connectionWidth+i.connectionOffsetX;this.info_.RTL&&(p*=-1),i.connectionModel.setOffsetInBlock(p,a+i.connectionOffsetY)}}positionStatementInputConnection_(i){const a=i.getLastInput();if(a!=null&&a.connectionModel){let p=i.xPos+i.statementEdge+a.notchOffset;this.info_.RTL&&(p*=-1),a.connectionModel.setOffsetInBlock(p,i.yPos)}}positionExternalValueConnection_(i){const a=i.getLastInput();if(a&&a.connectionModel){let p=i.xPos+i.width;this.info_.RTL&&(p*=-1),a.connectionModel.setOffsetInBlock(p,i.yPos)}}positionPreviousConnection_(){const i=this.info_.topRow;if(i.connection){const a=i.xPos+i.notchOffset;i.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-a:a,0)}}positionNextConnection_(){const i=this.info_.bottomRow;if(i.connection){const a=i.connection,p=a.xPos;a.connectionModel.setOffsetInBlock(this.info_.RTL?-p:p,i.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const i=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-i:i,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const i of this.info_.rows)for(const a of i.elements)if(a instanceof rd)if(a.highlighted)this.drawConnectionHighlightPath(a);else{let p,w;(w=(p=this.block_.pathObject).removeConnectionHighlight)==null||w.call(p,a.connectionModel)}}drawConnectionHighlightPath(i){const a=i.connectionModel;i=a.type===zn.INPUT_VALUE||a.type===zn.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(i):this.getStatementConnectionHighlightPath(i);const p=a.getSourceBlock();let w,k;(k=(w=p.pathObject).addConnectionHighlight)==null||k.call(w,a,i,a.getOffsetInBlock(),p.RTL)}getExpressionConnectionHighlightPath(i){let a="";return ys(i.shape)?a=i.shape.pathDown(i.height):dl(i.shape)&&(a=i.shape.pathDown),i=this.constants_.TAB_OFFSET_FROM_TOP,Ui(0,-i)+xn("v",i)+a+xn("v",i)}getStatementConnectionHighlightPath(i){if(!as(i.shape))throw Error("Statement connections should have notch shapes");const a=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return Ui(-a,0)+xn("h",a)+i.shape.pathLeft+xn("h",a)}};(function(i){i[i.LEFT=-1]="LEFT",i[i.CENTRE=0]="CENTRE",i[i.RIGHT=1]="RIGHT"})(t.Align$$module$build$src$core$inputs$align||(t.Align$$module$build$src$core$inputs$align={})),t.Align$$module$build$src$core$inputs$align;var wi=class extends Gi{constructor(i,a,p){super(Gi.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,i!==Gi.SKIP_SETUP&&(p?this.configure_(p):this.class=a||null,this.setValue(i))}configure_(i){super.configure_(i),i.class&&(this.class=i.class)}initView(){this.createTextElement_(),this.class&&$e(this.getTextElement(),this.class)}doClassValidation_(i){return i==null?null:`${i}`}setClass(i){this.textElement_&&(this.class&&St(this.textElement_,this.class),i&&$e(this.textElement_,i)),this.class=i}static fromJson(i){return new this(Vr(i.text),void 0,i)}};xs("field_label",wi),wi.prototype.DEFAULT_VALUE="";var ns=class{constructor(i,a){this.name=i,this.sourceBlock=a,this.fieldRow=[],this.align=t.Align$$module$build$src$core$inputs$input.LEFT,this.visible=!0,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(i,a){return this.insertFieldAt(this.fieldRow.length,i,a),this}insertFieldAt(i,a,p){if(0>i||i>this.fieldRow.length)throw Error("index "+i+" out of bounds.");return(a||a===""&&p)&&(typeof a=="string"&&(a=t.fromJson$$module$build$src$core$field_registry({type:"field_label",text:a})),a.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(a.init(),a.applyColour()),a.name=p,a.setVisible(this.isVisible()),a.prefixField&&(i=this.insertFieldAt(i,a.prefixField)),this.fieldRow.splice(i,0,a),i++,a.suffixField&&(i=this.insertFieldAt(i,a.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours())),i}removeField(i,a){for(let p=0,w;w=this.fieldRow[p];p++)if(w.name===i)return w.dispose(),this.fieldRow.splice(p,1),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours()),!0;if(a)return!1;throw Error('Field "'+i+'" not found.')}isVisible(){return this.visible}setVisible(i){let a=[];if(this.visible===i)return a;this.visible=i;for(let w=0,k;k=this.fieldRow[w];w++)k.setVisible(i);if(this.connection){var p=this.connection;i?a=p.startTrackingAll():p.stopTrackingAll(),(p=p.targetBlock())&&(p.getSvgRoot().style.display=i?"block":"none")}return a}markDirty(){for(let i=0,a;a=this.fieldRow[i];i++)a.markDirty()}setCheck(i){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(i),this}setAlign(i){return this.align=i,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(i){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(i),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let i=0;i<this.fieldRow.length;i++)this.fieldRow[i].init()}dispose(){for(let i=0,a;a=this.fieldRow[i];i++)a.dispose();this.connection&&this.connection.dispose()}makeConnection(i){return this.sourceBlock.makeConnection_(i)}},ET;(function(i){i=i.Align||(i.Align={}),i[i.LEFT=-1]="LEFT",i[i.CENTRE=0]="CENTRE",i[i.RIGHT=1]="RIGHT"})(ns||(ns={})),t.Align$$module$build$src$core$inputs$input=ns.Align,ET={Align:t.Align$$module$build$src$core$inputs$input},ET.Input=ns;var Np=class extends ns{constructor(i,a){super(i,a),this.name=i,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},bm=class extends ns{constructor(i,a){super(i,a),this.name=i,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},id=class extends ns{constructor(i,a){if(!i)throw Error("Statement inputs must have a non-empty name");super(i,a),this.name=i,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(zn.NEXT_STATEMENT)}},xT;t.ValueInput$$module$build$src$core$inputs$value_input=class extends ns{constructor(i,a){if(!i)throw Error("Value inputs must have a non-empty name");super(i,a),this.name=i,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(zn.INPUT_VALUE)}},xT={},xT.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input;var k0=class{constructor(i,a){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=i,this.block_=a,this.constants_=this.renderer_.getConstants(),this.outputConnection=a.outputConnection?new ST(this.constants_,a.outputConnection):null,this.isInline=a.getInputsInline()&&!a.isCollapsed(),this.isCollapsed=a.isCollapsed(),this.isInsertionMarker=a.isInsertionMarker(),this.RTL=a.RTL,this.topRow=new pb(this.constants_),this.bottomRow=new I_(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let i=new db(this.constants_);this.inputRows.push(i);var a=this.block_.getIcons();for(let p=0,w;w=a[p];p++){const k=new yT(this.constants_,w);this.isCollapsed&&!w.isShownWhenCollapsed()||i.elements.push(k)}a=void 0;for(let p=0,w;w=this.block_.inputList[p];p++)if(w.isVisible()){this.shouldStartNewRow_(w,a)&&(this.rows.push(i),i=new db(this.constants_),this.inputRows.push(i));for(let k=0,j;j=w.fieldRow[k];k++)i.elements.push(new R0(this.constants_,j,w));this.addInput_(w,i),a=w}this.isCollapsed&&(i.hasJaggedEdge=!0,i.elements.push(new bT(this.constants_))),(i.elements.length||i.hasDummyInput)&&this.rows.push(i),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var i=!!this.block_.previousConnection;const a=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!i;let p=this.topRow.hasLeftSquareCorner(this.block_)?ym:vm;this.topRow.elements.push(new p(this.constants_)),a?(i=new cb(this.constants_),this.topRow.elements.push(i),this.topRow.capline=i.ascenderHeight):i&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new wT(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof id&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,p=this.topRow.hasRightSquareCorner(this.block_)?ym:vm,this.topRow.elements.push(new p(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof id?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new ym(this.constants_)):this.bottomRow.elements.push(new vm(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new TT(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new ym(this.constants_,"right")):this.bottomRow.elements.push(new vm(this.constants_,"right"))}addInput_(i,a){this.isInline&&i instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new hb(this.constants_,i)),a.hasInlineInput=!0):i instanceof id?(a.elements.push(new R_(this.constants_,i)),a.hasStatement=!0):i instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new Bv(this.constants_,i)),a.hasExternalInput=!0):(i instanceof Np||i instanceof bm)&&(a.minHeight=Math.max(a.minHeight,i.getSourceBlock()&&i.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),a.align===null&&(a.align=i.align)}shouldStartNewRow_(i,a){return a?a instanceof bm||i instanceof id||a instanceof id?!0:i instanceof t.ValueInput$$module$build$src$core$inputs$value_input||i instanceof Np||a instanceof t.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let i=0,a;a=this.rows[i];i++){const p=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new qd(this.constants_,this.getInRowSpacing_(null,p[0]))),p.length){for(let w=0;w<p.length-1;w++){a.elements.push(p[w]);const k=this.getInRowSpacing_(p[w],p[w+1]);a.elements.push(new qd(this.constants_,k))}a.elements.push(p[p.length-1]),a.endsWithElemSpacer()&&a.elements.push(new qd(this.constants_,this.getInRowSpacing_(p[p.length-1],null)))}}}getInRowSpacing_(i,a){if(!i&&a&&ut.isStatementInput(a))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(i&&ut.isInput(i)&&!a){if(ut.isExternalInput(i))return this.constants_.NO_PADDING;if(ut.isInlineInput(i))return this.constants_.LARGE_PADDING;if(ut.isStatementInput(i))return this.constants_.NO_PADDING}return i&&ut.isLeftSquareCorner(i)&&a&&(ut.isPreviousConnection(a)||ut.isNextConnection(a))?a.notchOffset:i&&ut.isLeftRoundedCorner(i)&&a&&(ut.isPreviousConnection(a)||ut.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let i=0,a=0,p=0;for(let k=0,j;j=this.rows[k];k++){if(j.measure(),a=Math.max(a,j.width),j.hasStatement){var w=j.getLastInput();let ve,Ue;w=j.width-((Ue=(ve=w)==null?void 0:ve.width)!=null?Ue:0),i=Math.max(i,w)}p=Math.max(p,j.widthWithConnectedBlocks)}this.statementEdge=i,this.width=a;for(let k=0,j;j=this.rows[k];k++)j.hasStatement&&(j.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(a,p),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let a=0,p;p=this.rows[a];a++)if(p.hasStatement)this.alignStatementRow_(p);else{var i=p.width;i=this.getDesiredRowWidth_(p)-i,0<i&&this.addAlignmentPadding_(p,i),ut.isTopOrBottomRow(p)&&(p.widthWithConnectedBlocks=p.width)}}getDesiredRowWidth_(i){return this.width-this.startX}addAlignmentPadding_(i,a){const p=i.getFirstSpacer(),w=i.getLastSpacer();if((i.hasExternalInput||i.hasStatement)&&(i.widthWithConnectedBlocks+=a),i.align===t.Align$$module$build$src$core$inputs$align.LEFT&&w)w.width+=a;else if(i.align===t.Align$$module$build$src$core$inputs$align.CENTRE&&p&&w)p.width+=a/2,w.width+=a/2;else if(i.align===t.Align$$module$build$src$core$inputs$align.RIGHT&&p)p.width+=a;else if(w)w.width+=a;else return;i.width+=a}alignStatementRow_(i){const a=i.getLastInput();if(a){var p=i.width-a.width,w=this.statementEdge;p=w-p,0<p&&this.addAlignmentPadding_(i,p),p=i.width,w=this.getDesiredRowWidth_(i),a.width+=w-p,a.height=Math.max(a.height,i.height),i.width+=w-p,i.widthWithConnectedBlocks=Math.max(i.width,this.statementEdge+i.connectedBlockWidths)}}addRowSpacing_(){const i=this.rows;this.rows=[];for(let a=0;a<i.length;a++)this.rows.push(i[a]),a!==i.length-1&&this.rows.push(this.makeSpacerRow_(i[a],i[a+1]))}makeSpacerRow_(i,a){var p=this.getSpacerRowHeight_(i,a);const w=this.getSpacerRowWidth_(i,a);return p=new fb(this.constants_,p,w),i.hasStatement&&(p.followsStatement=!0),a.hasStatement&&(p.precedesStatement=!0),p}getSpacerRowWidth_(i,a){return this.width-this.startX}getSpacerRowHeight_(i,a){return this.constants_.MEDIUM_PADDING}getElemCenterline_(i,a){return ut.isSpacer(a)?i.yPos+a.height/2:ut.isBottomRow(i)?(i=i.yPos+i.height-i.descenderHeight,ut.isNextConnection(a)?i+a.height/2:i-a.height/2):ut.isTopRow(i)?ut.isHat(a)?i.capline-a.height/2:i.capline+a.height/2:i.yPos+i.height/2}recordElemPositions_(i){let a=i.xPos;for(let p=0,w;w=i.elements[p];p++)ut.isSpacer(w)&&(w.height=i.height),w.xPos=a,w.centerline=this.getElemCenterline_(i,w),a+=w.width}finalize_(){let i=0,a=0;for(let p=0,w;w=this.rows[p];p++)w.yPos=a,w.xPos=this.startX,a+=w.height,i=Math.max(i,w.widthWithConnectedBlocks),this.recordElemPositions_(w);if(this.outputConnection&&this.block_.nextConnection){const p=this.block_.nextConnection.targetBlock();p&&(i=Math.max(i,p.getHeightWidth().width))}this.widthWithChildren=i+this.startX,this.height=a,this.startY=this.topRow.capline,this.bottomRow.baseline=a-this.bottomRow.descenderHeight}getMeasureableForConnection(i){let a;if(((a=this.outputConnection)==null?void 0:a.connectionModel)===i)return this.outputConnection;for(const p of this.rows)for(const w of p.elements)if(w instanceof rd&&w.connectionModel===i)return w;return null}},en=class{constructor(i,a,p){if(this.wsCoordinate=null,!a)throw Error("Cannot create a node without a location.");this.type=i,this.isConnectionLocation=en.isConnectionType(i),this.location=a,this.processParams(p||null)}processParams(i){i&&i.wsCoordinate&&(this.wsCoordinate=i.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var i=this.location.getParentInput();const a=i.getSourceBlock();for(i=a.inputList.indexOf(i),i+=1;i<a.inputList.length;i++){const p=a.inputList[i],w=p.fieldRow;for(let k=0;k<w.length;k++){const j=w[k];if(j.isClickable()||en.NAVIGATE_ALL_FIELDS)return en.createFieldNode(j)}if(p.connection)return en.createInputNode(p)}return null}findNextForField(){var i=this.location,a=i.getParentInput();const p=i.getSourceBlock();if(!p)throw Error("The current AST location is not associated with a block");var w=p.inputList.indexOf(a);for(i=a.fieldRow.indexOf(i)+1;w<p.inputList.length;w++){a=p.inputList[w];const k=a.fieldRow;for(;i<k.length;){if(k[i].isClickable()||en.NAVIGATE_ALL_FIELDS)return en.createFieldNode(k[i]);i++}if(i=0,a.connection)return en.createInputNode(a)}return null}findPrevForInput(){const i=this.location.getParentInput(),a=i.getSourceBlock();for(var p=a.inputList.indexOf(i);0<=p;p--){var w=a.inputList[p];if(w.connection&&w!==i)return en.createInputNode(w);w=w.fieldRow;for(let k=w.length-1;0<=k;k--){const j=w[k];if(j.isClickable()||en.NAVIGATE_ALL_FIELDS)return en.createFieldNode(j)}}return null}findPrevForField(){var i=this.location;const a=i.getParentInput(),p=i.getSourceBlock();if(!p)throw Error("The current AST location is not associated with a block");var w=p.inputList.indexOf(a);for(i=a.fieldRow.indexOf(i)-1;0<=w;w--){var k=p.inputList[w];if(k.connection&&k!==a)return en.createInputNode(k);for(k=k.fieldRow;-1<i;){if(k[i].isClickable()||en.NAVIGATE_ALL_FIELDS)return en.createFieldNode(k[i]);i--}0<=w-1&&(i=p.inputList[w-1].fieldRow.length-1)}return null}navigateBetweenStacks(i){var a=this.getLocation();if(a.getSourceBlock){var p=a.getSourceBlock();p&&(a=p)}if(!a||a.isDeadOrDying())return null;p=a.getRootBlock(),a=p.workspace.getTopBlocks(!0);for(let w=0;w<a.length;w++)if(p.id===a[w].id)return i=w+(i?1:-1),i===-1||i===a.length?null:en.createStackNode(a[i]);throw Error("Couldn't find "+(i?"next":"previous")+" stack?!")}findTopASTNodeForBlock(i){const a=fl(i);return a?en.createConnectionNode(a):en.createBlockNode(i)}getOutAstNodeForBlock(i){if(!i)return null;i=i.getTopStackBlock();const a=fl(i);return a&&a.targetConnection&&a.targetConnection.getParentInput()?en.createInputNode(a.targetConnection.getParentInput()):en.createStackNode(i)}findFirstFieldOrInput(i){i=i.inputList;for(let a=0;a<i.length;a++){const p=i[a],w=p.fieldRow;for(let k=0;k<w.length;k++){const j=w[k];if(j.isClickable()||en.NAVIGATE_ALL_FIELDS)return en.createFieldNode(j)}if(p.connection)return en.createInputNode(p)}return null}getSourceBlock(){return this.getType()===en.types.BLOCK?this.getLocation():this.getType()===en.types.STACK?this.getLocation():this.getType()===en.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case en.types.STACK:return this.navigateBetweenStacks(!0);case en.types.OUTPUT:return en.createBlockNode(this.location.getSourceBlock());case en.types.FIELD:return this.findNextForField();case en.types.INPUT:return this.findNextForInput();case en.types.BLOCK:const i=this.location.nextConnection;if(!i)break;return en.createConnectionNode(i);case en.types.PREVIOUS:return en.createBlockNode(this.location.getSourceBlock());case en.types.NEXT:return en.createConnectionNode(this.location.targetConnection)}return null}in(){switch(this.type){case en.types.WORKSPACE:const i=this.location.getTopBlocks(!0);if(0<i.length)return en.createStackNode(i[0]);break;case en.types.STACK:return this.findTopASTNodeForBlock(this.location);case en.types.BLOCK:return this.findFirstFieldOrInput(this.location);case en.types.INPUT:return en.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case en.types.STACK:return this.navigateBetweenStacks(!1);case en.types.FIELD:return this.findPrevForField();case en.types.INPUT:return this.findPrevForInput();case en.types.BLOCK:var i=fl(this.location);if(!i)break;return en.createConnectionNode(i);case en.types.PREVIOUS:if((i=this.location.targetConnection)&&!i.getParentInput())return en.createConnectionNode(i);break;case en.types.NEXT:return en.createBlockNode(this.location.getSourceBlock())}return null}out(){switch(this.type){case en.types.STACK:var i=this.location,a=i.getRelativeToSurfaceXY();return a=new _n(a.x,a.y+en.DEFAULT_OFFSET_Y),en.createWorkspaceNode(i.workspace,a);case en.types.OUTPUT:return i=this.location,(a=i.targetConnection)?en.createConnectionNode(a):en.createStackNode(i.getSourceBlock());case en.types.FIELD:if(i=this.location.getSourceBlock(),!i)throw Error("The current AST location is not associated with a block");return en.createBlockNode(i);case en.types.INPUT:return en.createBlockNode(this.location.getSourceBlock());case en.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case en.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case en.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(i){switch(i){case en.types.PREVIOUS:case en.types.NEXT:case en.types.INPUT:case en.types.OUTPUT:return!0}return!1}static createFieldNode(i){return i?new en(en.types.FIELD,i):null}static createConnectionNode(i){if(!i)return null;const a=i.type;return a===zn.INPUT_VALUE||a===zn.NEXT_STATEMENT&&i.getParentInput()?en.createInputNode(i.getParentInput()):a===zn.NEXT_STATEMENT?new en(en.types.NEXT,i):a===zn.OUTPUT_VALUE?new en(en.types.OUTPUT,i):a===zn.PREVIOUS_STATEMENT?new en(en.types.PREVIOUS,i):null}static createInputNode(i){return i&&i.connection?new en(en.types.INPUT,i.connection):null}static createBlockNode(i){return i?new en(en.types.BLOCK,i):null}static createStackNode(i){return i?new en(en.types.STACK,i):null}static createWorkspaceNode(i,a){return a&&i?new en(en.types.WORKSPACE,i,{wsCoordinate:a}):null}static createTopNode(i){const a=fl(i);return a?en.createConnectionNode(a):en.createBlockNode(i)}};en.NAVIGATE_ALL_FIELDS=!1,en.DEFAULT_OFFSET_Y=-20,function(i){i=i.types||(i.types={}),i.FIELD="field",i.BLOCK="block",i.INPUT="input",i.OUTPUT="output",i.NEXT="next",i.PREVIOUS="previous",i.STACK="stack",i.WORKSPACE="workspace"}(en||(en={}));var L_=class extends _{constructor(i,a,p,w){let k=i?i.workspace.id:void 0;w&&w.getType()===en.types.WORKSPACE&&(k=w.getLocation().id),super(k),this.type=Dl,this.blockId=i==null?void 0:i.id,this.oldNode=p||void 0,this.newNode=w,this.isCursor=a}toJson(){const i=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return i.isCursor=this.isCursor,i.blockId=this.blockId,i.oldNode=this.oldNode,i.newNode=this.newNode,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new L_),a.isCursor=i.isCursor,a.blockId=i.blockId,a.oldNode=i.oldNode,a.newNode=i.newNode,a}};r(Ft.EVENT,Dl,L_);var xE="blocklyCursor",$E="blocklyMarker",CE=.75,N_=class{constructor(i,a,p){this.workspace=i,this.marker=p,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=a,i=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=p.colour||i}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const i=this.isCursor()?xE:$E;return this.svgGroup_=se(Ve.G,{class:i}),this.createDomInternal_(),this.svgGroup_}setParent_(i){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),i.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),i.setMarkerSvg(this.getSvgRoot())),this.parent=i}draw(i,a){if(a){this.constants_=this.workspace.getRenderer().getConstants();var p=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||p,this.applyColour_(a),this.showAtLocation_(a),this.fireMarkerEvent(i,a),i=this.currentMarkerSvg.childNodes[0],i!==void 0&&i.beginElement&&i.beginElement()}else this.hide()}showAtLocation_(i){const a=i.getLocation().type;i.getType()===en.types.BLOCK?this.showWithBlock_(i):i.getType()===en.types.OUTPUT?this.showWithOutput_(i):a===zn.INPUT_VALUE?this.showWithInput_(i):a===zn.NEXT_STATEMENT?this.showWithNext_(i):i.getType()===en.types.PREVIOUS?this.showWithPrevious_(i):i.getType()===en.types.FIELD?this.showWithField_(i):i.getType()===en.types.WORKSPACE?this.showWithCoordinates_(i):i.getType()===en.types.STACK&&this.showWithStack_(i)}showWithBlockPrevOutput(i){i=i.getSourceBlock();const a=i.width;var p=i.height,w=p*CE;const k=this.constants_.CURSOR_BLOCK_PADDING;i.previousConnection?(p=this.constants_.shapeFor(i.previousConnection),this.positionPrevious_(a,k,w,p)):i.outputConnection?(w=this.constants_.shapeFor(i.outputConnection),this.positionOutput_(a,p,w)):this.positionBlock_(a,k,w),this.setParent_(i),this.showCurrent_()}showWithBlock_(i){this.showWithBlockPrevOutput(i)}showWithPrevious_(i){this.showWithBlockPrevOutput(i)}showWithOutput_(i){this.showWithBlockPrevOutput(i)}showWithCoordinates_(i){var a=i.getWsCoordinate();i=a.x,a=a.y,this.workspace.RTL&&(i-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(i,a,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(i){i=i.getLocation();const a=i.getSize().width,p=i.getSize().height;this.positionRect_(0,0,a,p),this.setParent_(i),this.showCurrent_()}showWithInput_(i){i=i.getLocation();const a=i.getSourceBlock();this.positionInput_(i),this.setParent_(a),this.showCurrent_()}showWithNext_(i){var a=i.getLocation();i=a.getSourceBlock();let p=0;a=a.getOffsetInBlock().y;const w=i.getHeightWidth().width;this.workspace.RTL&&(p=-w),this.positionLine_(p,a,w),this.setParent_(i),this.showCurrent_()}showWithStack_(i){i=i.getLocation();var a=i.getHeightWidth();const p=a.width+this.constants_.CURSOR_STACK_PADDING;a=a.height+this.constants_.CURSOR_STACK_PADDING;const w=-this.constants_.CURSOR_STACK_PADDING/2,k=-this.constants_.CURSOR_STACK_PADDING/2;let j=w;this.workspace.RTL&&(j=-(p+w)),this.positionRect_(j,k,p,a),this.setParent_(i),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(i,a,p){if(i=Ui(-a,p)+xn("V",-a)+xn("H",i+2*a)+xn("V",p),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",i),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(i){const a=i.getOffsetInBlock().x,p=i.getOffsetInBlock().y;i=Js(0,0)+this.constants_.shapeFor(i).pathDown,this.markerInput_.setAttribute("d",i),this.markerInput_.setAttribute("transform","translate("+a+","+p+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(i,a,p){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${i}`),this.markerSvgLine_.setAttribute("y",`${a}`),this.markerSvgLine_.setAttribute("width",`${p}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(i,a,p){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");i=Ui(i,0)+xn("h",-(i-p.width))+xn("v",this.constants_.TAB_OFFSET_FROM_TOP)+p.pathDown+xn("V",a)+xn("H",i),this.markerBlock_.setAttribute("d",i),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(i,a,p,w){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");i=Ui(-a,p)+xn("V",-a)+xn("H",this.constants_.NOTCH_OFFSET_LEFT)+w.pathLeft+xn("H",i+2*a)+xn("V",p),this.markerBlock_.setAttribute("d",i),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(i,a,p,w){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${i}`),this.markerSvgRect_.setAttribute("y",`${a}`),this.markerSvgRect_.setAttribute("width",`${p}`),this.markerSvgRect_.setAttribute("height",`${w}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(i){i.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(i,a){const p=a.getSourceBlock();i=new(Ie(Dl))(p,this.isCursor(),i,a),ue(i)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=se(Ve.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=se(Ve.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=se(Ve.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=se(Ve.PATH,{transform:""},this.markerSvg_),this.markerBlock_=se(Ve.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const i=this.getBlinkProperties_();se(Ve.ANIMATE,i,this.markerSvgLine_),se(Ve.ANIMATE,i,this.markerInput_),se(Ve.ANIMATE,Object.assign({},i,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(i){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(i=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",i),this.markerInput_.firstElementChild.setAttribute("values",i),this.markerBlock_.firstElementChild.setAttribute("values",i))}dispose(){this.svgGroup_&&pt(this.svgGroup_)}},O0=class{constructor(i,a,p){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=p,this.style=a,this.svgRoot=i,this.svgPath=se(Ve.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(i){this.svgPath.setAttribute("d",i)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(i){i?(this.svgRoot.appendChild(i),this.cursorSvg=i):this.cursorSvg=null}setMarkerSvg(i){i?(this.cursorSvg?this.svgRoot.insertBefore(i,this.cursorSvg):this.svgRoot.appendChild(i),this.markerSvg=i):this.markerSvg=null}applyColour(i){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(i.isShadow()),this.updateDisabled_(!i.isEnabled()||i.getInheritedDisabled())}setStyle(i){this.style=i}setClass_(i,a){i&&(a?$e(this.svgRoot,i):St(this.svgRoot,i))}updateHighlighted(i){i?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(i){i&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(i){this.setClass_("blocklyDisabled",i),i&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(i){this.setClass_("blocklySelected",i)}updateDraggingDelete(i){this.setClass_("blocklyDraggingDelete",i)}updateInsertionMarker(i){this.setClass_("blocklyInsertionMarker",i)}updateMovable(i){this.setClass_("blocklyDraggable",i)}updateReplacementFade(i){this.setClass_("blocklyReplaceable",i)}updateShapeForInputHighlight(i,a){}addConnectionHighlight(i,a,p,w){if(this.connectionHighlights.has(i)){if(this.currentHighlightMatchesNew(i,a,p))return;this.removeConnectionHighlight(i)}a=se(Ve.PATH,{class:"blocklyHighlightedConnectionPath",d:a,transform:`translate(${p.x}, ${p.y})`+(w?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(i,a)}currentHighlightMatchesNew(i,a,p){let w;const k=(w=this.connectionHighlights.get(i))==null?void 0:w.getAttribute("d");return i=this.highlightOffsets.get(i),k===a&&_n.equals(i,p)}removeConnectionHighlight(i){const a=this.connectionHighlights.get(i);a&&(pt(a),this.connectionHighlights.delete(i))}},fs=class{constructor(i,a){this.type=a,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=i}connect_(i){const a=zn.INPUT_VALUE,p=this.getSourceBlock();var w=i.getSourceBlock();i.isConnected()&&i.disconnectInternal(!1);let k;if(this.isConnected()){const ve=this.stashShadowState(),Ue=this.targetBlock();Ue.isShadow()?Ue.dispose(!1):(this.disconnectInternal(),k=Ue),this.applyShadowState(ve)}let j;ie()&&(j=new(Ie(t.MOVE$$module$build$src$core$events$utils))(w),j.setReason(["connect"])),Ho(this,i),w.setParent(p),j&&(j.recordNew(),ue(j)),k&&(i=this.type===a?k.outputConnection:k.previousConnection)&&((w=fs.getConnectionForOrphanedConnection(w,i))?i.connect(w):i.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal();const i=this.targetBlock();i&&!i.isDeadOrDying()&&i.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===zn.INPUT_VALUE||this.type===zn.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(i){}connect(i){if(this.targetConnection===i)return!0;if(this.getConnectionChecker().canConnect(this,i,!1)){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(i):i.connect_(this),t.setGroup$$module$build$src$core$events$utils(a)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(i=!0){const{parentConnection:a,childConnection:p}=this.getParentAndChildConnections();if(!a||!p)throw Error("Source connection not connected.");const w=t.getGroup$$module$build$src$core$events$utils();w||t.setGroup$$module$build$src$core$events$utils(!0);let k;ie()&&(k=new(Ie(t.MOVE$$module$build$src$core$events$utils))(p.getSourceBlock()),k.setReason(["disconnect"]));const j=this.targetConnection;j&&(j.targetConnection=null),this.targetConnection=null,i&&p.getSourceBlock().setParent(null),k&&(k.recordNew(),ue(k)),p.getSourceBlock().isShadow()||a.respawnShadow_(),t.setGroup$$module$build$src$core$events$utils(w)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(i,a){if(this.getSourceBlock().isDeadOrDying())return!1;var p;return a=(p=i.getInput(a))==null?void 0:p.connection,p=this.targetBlock(),p&&p!==i||!a||a.targetConnection===this?!1:(a.isConnected()&&a.disconnect(),a.connect(this),!0)}targetBlock(){if(this.isConnected()){let i,a;return(a=(i=this.targetConnection)==null?void 0:i.getSourceBlock())!=null?a:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(i){return i?(Array.isArray(i)||(i=[i]),this.check=i,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(i){this.setShadowStateInternal({shadowDom:i})}getShadowDom(i){return i&&this.targetBlock().isShadow()?rl(this.targetBlock()):this.shadowDom}setShadowState(i){this.setShadowStateInternal({shadowState:i})}getShadowState(i){return i&&this.targetBlock()&&this.targetBlock().isShadow()?$i(this.targetBlock()):this.shadowState}neighbours(i){return[]}getParentInput(){let i=null;const a=this.sourceBlock_.inputList;for(let p=0;p<a.length;p++)if(a[p].connection===this){i=a[p];break}return i}toString(){const i=this.sourceBlock_;if(!i)return"Orphan Connection";if(i.outputConnection===this)var a="Output Connection of ";else if(i.previousConnection===this)a="Previous Connection of ";else if(i.nextConnection===this)a="Next Connection of ";else{a=null;for(let p=0,w;w=i.inputList[p];p++)if(w.connection===this){a=w;break}if(a)a='Input "'+a.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return a+i.toDevString()}stashShadowState(){const i=this.getShadowDom(!0),a=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:i,shadowState:a}}applyShadowState({shadowDom:i,shadowState:a}){this.shadowDom=i,this.shadowState=a}setShadowStateInternal({shadowDom:i=null,shadowState:a=null}={}){this.shadowDom=i,this.shadowState=a,(i=this.targetBlock())?i.isShadow()?(i.dispose(!1),this.getSourceBlock().isDeadOrDying()||(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))):(i=this.createShadowBlock(!1),this.serializeShadow(i),i&&i.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))}createShadowBlock(i){var a=this.getSourceBlock();const p=this.getShadowState(),w=this.getShadowDom();if(a.isDeadOrDying()||!p&&!w)return null;if(p)return a=Mi(p,a.workspace,{parentConnection:i?this:void 0,isShadow:!0,recordUndo:!1});if(w){if(a=io(w,a.workspace),i)if(this.type===zn.INPUT_VALUE){if(!a.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(a.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===zn.NEXT_STATEMENT){if(!a.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(a.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return a}return null}serializeShadow(i){i&&(this.shadowDom=rl(i),this.shadowState=$i(i))}static getConnectionForOrphanedConnection(i,a){if(a.type===zn.OUTPUT_VALUE)return Wa(i,a.getSourceBlock());i=i.lastConnectionInStack(!0);const p=a.getConnectionChecker();return i&&p.canConnect(a,i,!1)?i:null}};fs.CAN_CONNECT=0,fs.REASON_SELF_CONNECTION=1,fs.REASON_WRONG_TYPE=2,fs.REASON_TARGET_NULL=3,fs.REASON_CHECKS_FAILED=4,fs.REASON_DIFFERENT_WORKSPACES=5,fs.REASON_SHADOW_PARENT=6,fs.REASON_DRAG_CHECKS_FAILED=7,fs.REASON_PREVIOUS_AND_OUTPUT=8;var Pg="_TEMP_COLLAPSED_INPUT",Fv="_TEMP_COLLAPSED_FIELD",ME={COLLAPSED_FIELD_NAME:Fv,COLLAPSED_INPUT_NAME:Pg},Tf="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Sf=class{constructor(i){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,B(i),this.topBlock=i,this.workspace=i.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){t.disable$$module$build$src$core$events$utils(),this.hidePreview(),t.enable$$module$build$src$core$events$utils();var{local:i,closest:a}=this.activeCandidate;if(i.connect(a),this.topBlock.rendered){const p=i.isSuperior()?a:i,w=this.topBlock.getRootBlock();vr().then(()=>{pa(p.getSourceBlock()),setTimeout(()=>{w.bringToFront()},0)})}}}update(i,a){const p=this.getCandidate(i);((this.wouldDeleteBlock=this.shouldDelete(!!p,a))||this.shouldUpdatePreviews(p,i))&&(t.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(p),this.maybeShowPreview(p),t.enable$$module$build$src$core$events$utils())}createMarkerBlock(i){var a=i.type;t.disable$$module$build$src$core$events$utils();let p;try{if(p=this.workspace.newBlock(a),p.setInsertionMarker(!0),i.saveExtraState){var w=i.saveExtraState(!0);w&&p.loadExtraState&&p.loadExtraState(w)}else if(i.mutationToDom){const k=i.mutationToDom();k&&p.domToMutation&&p.domToMutation(k)}for(a=0;a<i.inputList.length;a++){const k=i.inputList[a];if(k.name===Pg)continue;const j=p.inputList[a];if(!j)throw Error(Tf.replace("%1","an input"));for(w=0;w<k.fieldRow.length;w++){const ve=k.fieldRow[w],Ue=j.fieldRow[w];if(!Ue)throw Error(Tf.replace("%1","a field"));Ue.setValue(ve.getValue())}}for(const k of p.getDescendants(!1))k.setInsertionMarker(!0);p.setCollapsed(i.isCollapsed()),p.setInputsInline(i.getInputsInline()),p.initSvg(),p.getSvgRoot().setAttribute("visibility","hidden")}finally{t.enable$$module$build$src$core$events$utils()}return p}initAvailableConnections(){const i=this.topBlock.getConnections_(!1),a=this.topBlock.lastConnectionInStack(!0);return a&&a!==this.topBlock.nextConnection&&(i.push(a),this.lastOnStack=a),i}shouldUpdatePreviews(i,a){if(!i)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:p,closest:w}=this.activeCandidate;if(w===i.closest&&p===i.local)return!1;const k=p.x+a.x-w.x;return a=p.y+a.y-w.y,i.radius<Math.sqrt(k*k+a*a)-t.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(i){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let a=this.getStartRadius(),p=null;for(let w=0;w<this.availableConnections.length;w++){const k=this.availableConnections[w],j=k.closest(a,i);j.connection&&(p={closest:j.connection,local:k,radius:j.radius},a=j.radius)}return p}getStartRadius(){return this.activeCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius}shouldDelete(i,a){return a&&this.workspace.getComponentManager().hasCapability(a.id,gl.Capability.DELETE_AREA)?a.wouldDelete(this.topBlock,i):!1}maybeShowPreview(i){if(!this.wouldDeleteBlock&&i){var a=i.closest,p;a===((p=this.activeCandidate)==null?void 0:p.closest)||a.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=i,this.showPreview(this.activeCandidate))}}showPreview(i){const a=this.workspace.getRenderer();switch(a.getConnectionPreviewMethod(i.closest,i.local,this.topBlock)){case Sf.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(i);break;case Sf.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(i);break;case Sf.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(i)}a.shouldHighlightConnection(i.closest)&&i.closest.highlight()}maybeHidePreview(i){if(!i)this.hidePreview();else if(this.activeCandidate){const a=this.activeCandidate.local!==i.local;(this.activeCandidate.closest!==i.closest||a||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let i;const a=(i=this.activeCandidate)==null?void 0:i.closest;a&&a.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(a)&&a.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(i){const{local:a,closest:p}=i;let w=(i=this.lastOnStack&&a===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!w)throw Error("Cannot show the insertion marker because there is no insertion marker block");let k;try{k=w.getMatchingConnection(a.getSourceBlock(),a)}catch{if(i&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),w=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),w=this.firstMarker=this.createMarkerBlock(this.topBlock)),!w)throw Error("Cannot show the insertion marker because there is no insertion marker block");k=w.getMatchingConnection(a.getSourceBlock(),a)}if(!k)throw Error("Cannot show the insertion marker because there is no associated connection");if(k===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");w.queueRender(),xi(),k.connect(p);const j={x:p.x-k.x,y:p.y-k.y},ve=k.getOffsetInBlock().clone(),Ue=k;vr().then(()=>{let Yt;(Yt=w)==null||Yt.positionNearConnection(Ue,j,ve);let jn;(jn=w)==null||jn.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=k}hideInsertionMarker(){if(this.markerConnection){var i=this.markerConnection,a=i.getSourceBlock(),p=a.outputConnection,w;if((w=a.previousConnection)!=null&&w.targetConnection||p!=null&&p.targetConnection)a.unplug(!0);else{let k;(k=i.targetBlock())==null||k.unplug(!1)}if(i.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(i=a.getSvgRoot())&&i.setAttribute("visibility","hidden")}}showInsertionInputOutline(i){i=i.closest,this.highlightedBlock=i.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(i,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(i){if(this.fadedBlock=i.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const i=[];return this.firstMarker&&i.push(this.firstMarker),this.lastMarker&&i.push(this.lastMarker),i}disposeInsertionMarker(i){if(i){t.disable$$module$build$src$core$events$utils();try{i.dispose()}finally{t.enable$$module$build$src$core$events$utils()}}}};(function(i){i=i.PREVIEW_TYPE||(i.PREVIEW_TYPE={}),i[i.INSERTION_MARKER=0]="INSERTION_MARKER",i[i.INPUT_OUTLINE=1]="INPUT_OUTLINE",i[i.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Sf||(Sf={})),Sf.PREVIEW_TYPE;var D_=class{constructor(i){this.overrides=null,this.name=i}getClassName(){return this.name+"-renderer"}init(i,a){this.constants_=this.makeConstants_(),a&&(this.overrides=a,Object.assign(this.constants_,a)),this.constants_.setTheme(i),this.constants_.init()}createDom(i,a){this.constants_.createDom(i,this.name+"-"+a.name,"."+this.getClassName()+"."+a.getClassName())}refreshDom(i,a){const p=this.getConstants();p.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=p.randomIdentifier,this.constants_.setTheme(a),this.constants_.init(),this.createDom(i,a)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new k_}makeRenderInfo_(i){return new k0(this,i)}makeDrawer_(i,a){return new O_(i,a)}makeMarkerDrawer(i,a){return new N_(i,this.getConstants(),a)}makePathObject(i,a){return new O0(i,a,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(i){return!0}orphanCanConnectAtEnd(i,a,p){return!!fs.getConnectionForOrphanedConnection(i,p===zn.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}getConnectionPreviewMethod(i,a,p){return xe("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===zn.OUTPUT_VALUE||a.type===zn.PREVIOUS_STATEMENT?!i.isConnected()||this.orphanCanConnectAtEnd(p,i.targetBlock(),a.type)?Sf.PREVIEW_TYPE.INSERTION_MARKER:Sf.PREVIEW_TYPE.REPLACEMENT_FADE:Sf.PREVIEW_TYPE.INSERTION_MARKER}render(i){const a=this.makeRenderInfo_(i);a.measure(),this.makeDrawer_(i,a).draw()}},Ns={};Ns.BottomRow=I_,Ns.Connection=rd,Ns.ConstantProvider=k_,Ns.Drawer=O_,Ns.ExternalValueInput=Bv,Ns.Field=R0,Ns.Hat=cb,Ns.Icon=yT,Ns.InRowSpacer=qd,Ns.InlineInput=hb,Ns.InputConnection=rg,Ns.InputRow=db,Ns.JaggedEdge=bT,Ns.MarkerSvg=N_,Ns.Measurable=sr,Ns.NextConnection=TT,Ns.OutputConnection=ST,Ns.PathObject=O0,Ns.PreviousConnection=wT,Ns.RenderInfo=k0,Ns.Renderer=D_,Ns.RoundCorner=vm,Ns.Row=A_,Ns.SpacerRow=fb,Ns.SquareCorner=ym,Ns.StatementInput=R_,Ns.TopRow=pb,Ns.Types=ut,Ns.init=Xc,Ns.register=ki,Ns.unregister=Nd;var $T=class{constructor(i,a){this.workspace=i,this.theme=a,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(i){var a=this.theme;this.theme=i,(i=this.workspace.getInjectionDiv())&&(a&&(a=a.getClassName())&&St(i,a),(a=this.theme.getClassName())&&$e(i,a));for(let p=0,w;w=this.subscribedWorkspaces_[p];p++)w.refreshTheme();for(const[p,w]of this.componentDB)for(const k of w){i=k.element,a=k.propertyName;const j=this.theme&&this.theme.getComponentStyle(p);i.style.setProperty(a,j||"")}for(const p of this.subscribedWorkspaces_)p.hideChaff()}subscribeWorkspace(i){this.subscribedWorkspaces_.push(i)}unsubscribeWorkspace(i){if(!Mt(this.subscribedWorkspaces_,i))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(i,a,p){this.componentDB.has(a)||this.componentDB.set(a,[]),this.componentDB.get(a).push({element:i,propertyName:p}),a=this.theme&&this.theme.getComponentStyle(a),i.style.setProperty(p,a||"")}unsubscribe(i){if(i)for(const[a,p]of this.componentDB){for(let w=p.length-1;0<=w;w--)p[w].element===i&&p.splice(w,1);p.length||this.componentDB.delete(a)}}dispose(){this.subscribedWorkspaces_.length=0,this.componentDB.clear()}},mb="VARIABLE_DYNAMIC",Tm={CATEGORY_NAME:mb};Tm.flyoutCategory=df,Tm.flyoutCategoryBlocks=Cu,Tm.onCreateVariableButtonClick_Colour=Mo,Tm.onCreateVariableButtonClick_Number=Go,Tm.onCreateVariableButtonClick_String=Kh;var zv=class{canConnect(i,a,p,w){return this.canConnectWithReason(i,a,p,w)===fs.CAN_CONNECT}canConnectWithReason(i,a,p,w){const k=this.doSafetyChecks(i,a);return k!==fs.CAN_CONNECT?k:this.doTypeChecks(i,a)?p&&!this.doDragChecks(i,a,w||0)?fs.REASON_DRAG_CHECKS_FAILED:fs.CAN_CONNECT:fs.REASON_CHECKS_FAILED}getErrorMessage(i,a,p){switch(i){case fs.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case fs.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case fs.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case fs.REASON_TARGET_NULL:return"Target connection is null.";case fs.REASON_CHECKS_FAILED:return"Connection checks failed. "+(a+" expected "+a.getCheck()+", found "+p.getCheck());case fs.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case fs.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case fs.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(i,a){if(!i||!a)return fs.REASON_TARGET_NULL;let p,w,k;return i.isSuperior()?(p=i.getSourceBlock(),w=a.getSourceBlock(),k=a):(w=i.getSourceBlock(),p=a.getSourceBlock(),k=i,i=a),p===w?fs.REASON_SELF_CONNECTION:k.type!==Zt[i.type]?fs.REASON_WRONG_TYPE:p.workspace!==w.workspace?fs.REASON_DIFFERENT_WORKSPACES:p.isShadow()&&!w.isShadow()?fs.REASON_SHADOW_PARENT:k.type===zn.OUTPUT_VALUE&&w.previousConnection&&w.previousConnection.isConnected()||k.type===zn.PREVIOUS_STATEMENT&&w.outputConnection&&w.outputConnection.isConnected()?fs.REASON_PREVIOUS_AND_OUTPUT:fs.CAN_CONNECT}doTypeChecks(i,a){if(i=i.getCheck(),a=a.getCheck(),!i||!a)return!0;for(let p=0;p<i.length;p++)if(a.indexOf(i[p])!==-1)return!0;return!1}doDragChecks(i,a,p){if(i.distanceFrom(a)>p||a.getSourceBlock().isInsertionMarker())return!1;switch(a.type){case zn.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(i,a);case zn.OUTPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isInsertionMarker()||i.isConnected())return!1;break;case zn.INPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;case zn.NEXT_STATEMENT:if(a.isConnected()&&!i.getSourceBlock().nextConnection&&!a.targetBlock().isShadow()&&a.targetBlock().nextConnection||a.targetBlock()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;default:return!1}return Xi.indexOf(a)===-1}canConnectToPrevious_(i,a){return i.targetConnection||Xi.indexOf(a)!==-1?!1:a.targetConnection?(i=a.targetBlock(),i.isInsertionMarker()?!i.getPreviousBlock():!1):!0}};r(Ft.CONNECTION_CHECKER,Nl,zv);var gb=class extends zd{constructor(i){super(i),this.type=Iu,i&&(this.varType=i.type,this.varName=i.name)}toJson(){const i=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return i.varType=this.varType,i.varName=this.varName,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new gb),a.varType=i.varType,a.varName=i.varName,a}run(i){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");i?a.deleteVariableById(this.varId):a.createVariable(this.varName,this.varType,this.varId)}};r(Ft.EVENT,Iu,gb);var _b=class extends zd{constructor(i,a){super(i),this.type=eh,i&&(this.oldName=i.name,this.newName=typeof a>"u"?"":a)}toJson(){const i=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return i.oldName=this.oldName,i.newName=this.newName,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new _b),a.oldName=i.oldName,a.newName=i.newName,a}run(i){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");i?a.renameVariableById(this.varId,this.newName):a.renameVariableById(this.varId,this.oldName)}};r(Ft.EVENT,eh,_b);var vb=class{constructor(i){this.workspace=i,this.variableMap=new Map}clear(){for(const i of this.variableMap.values())for(;0<i.length;)this.deleteVariable(i[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(i,a){if(i.name!==a){var p=this.getVariable(a,i.type),w=this.workspace.getAllBlocks(!1),k=t.getGroup$$module$build$src$core$events$utils();k||t.setGroup$$module$build$src$core$events$utils(!0);try{p&&p.getId()!==i.getId()?this.renameVariableWithConflict_(i,a,p,w):this.renameVariableAndUses_(i,a,w)}finally{t.setGroup$$module$build$src$core$events$utils(k)}}}renameVariableById(i,a){const p=this.getVariableById(i);if(!p)throw Error("Tried to rename a variable that didn't exist. ID: "+i);this.renameVariable(p,a)}renameVariableAndUses_(i,a,p){for(ue(new(Ie(eh))(i,a)),i.name=a,a=0;a<p.length;a++)p[a].updateVarName(i)}renameVariableWithConflict_(i,a,p,w){const k=i.type;for(a!==p.name&&this.renameVariableAndUses_(p,a,w),a=0;a<w.length;a++)w[a].renameVarById(i.getId(),p.getId());ue(new(Ie(Iu))(i)),Mt(this.variableMap.get(k),i)}createVariable(i,a,p){var w=this.getVariable(i,a);if(w){if(p&&w.getId()!==p)throw Error('Variable "'+i+'" is already in use and its id is "'+w.getId()+'" which conflicts with the passed in id, "'+p+'".');return w}if(p&&this.getVariableById(p))throw Error('Variable id, "'+p+'", is already in use.');return w=p||q(),a=a||"",w=new _f(this.workspace,i,a,w),i=this.variableMap.get(a)||[],i.push(w),this.variableMap.delete(a),this.variableMap.set(a,i),ue(new(Ie(go))(w)),w}deleteVariable(i){const a=i.getId(),p=this.variableMap.get(i.type);if(p){for(let w=0;w<p.length;w++)if(p[w].getId()===a){p.splice(w,1),ue(new(Ie(Iu))(i)),p.length===0&&this.variableMap.delete(i.type);break}}}deleteVariableById(i){const a=this.getVariableById(i);if(a){var p=a.name;const w=this.getVariableUsesById(i);for(let k=0,j;j=w[k];k++)if(j.type==="procedures_defnoreturn"||j.type==="procedures_defreturn"){i=String(j.getFieldValue("NAME")),p=t.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",p).replace("%2",i),xo(p);return}1<w.length?(p=t.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(w.length)).replace("%2",p),nn(p,k=>{k&&a&&this.deleteVariableInternal(a,w)})):this.deleteVariableInternal(a,w)}else console.warn("Can't delete non-existent variable: "+i)}deleteVariableInternal(i,a){const p=t.getGroup$$module$build$src$core$events$utils();p||t.setGroup$$module$build$src$core$events$utils(!0);try{for(let w=0;w<a.length;w++)a[w].dispose(!0);this.deleteVariable(i)}finally{t.setGroup$$module$build$src$core$events$utils(p)}}getVariable(i,a){if(a=this.variableMap.get(a||"")){for(let p=0,w;w=a[p];p++)if(t.Names$$module$build$src$core$names.equals(w.name,i))return w}return null}getVariableById(i){for(const a of this.variableMap.values())for(const p of a)if(p.getId()===i)return p;return null}getVariablesOfType(i){return(i=this.variableMap.get(i||""))?i.slice():[]}getVariableTypes(i){const a=new Set(this.variableMap.keys());if(i&&i.getPotentialVariableMap())for(const p of i.getPotentialVariableMap().variableMap.keys())a.add(p);return a.has("")||a.add(""),Array.from(a.values())}getAllVariables(){let i=[];for(const a of this.variableMap.values())i=i.concat(a);return i}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(i=>i.name)}getVariableUsesById(i){const a=[],p=this.workspace.getAllBlocks(!1);for(let w=0;w<p.length;w++){const k=p[w].getVarModels();if(k)for(let j=0;j<k.length;j++)k[j].getId()===i&&a.push(p[w])}return a}},P_=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(i){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new C0,this.potentialVariableMap=null,this.id=q(),C(this),this.options=i||new Hi({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(y(Ft.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new vb(this)}dispose(){this.listeners.length=0,this.clear(),M(this)}sortObjects_(i,a){const p=Math.sin(Uc(P_.SCAN_ANGLE))*(this.RTL?-1:1);return i=i.getRelativeToSurfaceXY(),a=a.getRelativeToSurfaceXY(),i.y+p*i.x-(a.y+p*a.x)}addTopBlock(i){this.topBlocks.push(i)}removeTopBlock(i){if(!Mt(this.topBlocks,i))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(i=!1){const a=[].concat(this.topBlocks);return i&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}addTypedBlock(i){this.typedBlocksDB.has(i.type)||this.typedBlocksDB.set(i.type,[]),this.typedBlocksDB.get(i.type).push(i)}removeTypedBlock(i){Mt(this.typedBlocksDB.get(i.type),i),this.typedBlocksDB.get(i.type).length||this.typedBlocksDB.delete(i.type)}getBlocksByType(i,a=!1){return this.typedBlocksDB.has(i)?(i=this.typedBlocksDB.get(i).slice(0),a&&i&&1<i.length&&i.sort(this.sortObjects_.bind(this)),i.filter(function(p){return!p.isInsertionMarker()})):[]}addTopComment(i){this.topComments.push(i),this.commentDB.has(i.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+i.id+'"'),this.commentDB.set(i.id,i)}removeTopComment(i){if(!Mt(this.topComments,i))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(i.id)}getTopComments(i=!1){const a=[].concat(this.topComments);return i&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}getAllBlocks(i=!1){if(i){var a=this.getTopBlocks(!0);i=[];for(let p=0;p<a.length;p++)i.push(...a[p].getDescendants(!0))}else for(i=this.getTopBlocks(!1),a=0;a<i.length;a++)i.push(...i[a].getChildren(!1));return i.filter(function(p){return!p.isInsertionMarker()})}clear(){this.isClearing=!0;try{const i=t.getGroup$$module$build$src$core$events$utils();for(i||t.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();t.setGroup$$module$build$src$core$events$utils(i),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(i,a){this.variableMap.renameVariableById(i,a)}createVariable(i,a,p){return this.variableMap.createVariable(i,a,p)}getVariableUsesById(i){return this.variableMap.getVariableUsesById(i)}deleteVariableById(i){this.variableMap.deleteVariableById(i)}getVariable(i,a){return this.variableMap.getVariable(i,a)}getVariableById(i){return this.variableMap.getVariableById(i)}getVariablesOfType(i){return this.variableMap.getVariablesOfType(i)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(i,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(i){return this.options.maxInstances?(this.options.maxInstances[i]!==void 0?this.options.maxInstances[i]:1/0)-this.getBlocksByType(i,!1).length:1/0}isCapacityAvailable(i){if(!this.hasBlockLimits())return!0;let a=0;for(const p in i){if(i[p]>this.remainingCapacityOfType(p))return!1;a+=i[p]}return!(a>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(i){var a=i?this.redoStack_:this.undoStack_,p=i?this.undoStack_:this.redoStack_;const w=a.pop();if(w){for(var k=[w];a.length&&w.group&&w.group===a[a.length-1].group;){const j=a.pop();j&&k.push(j)}for(a=0;a<k.length;a++)p.push(k[a]);k=J(k,i),he(!1);try{for(p=0;p<k.length;p++)k[p].run(i)}finally{he(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,re()}addChangeListener(i){return this.listeners.push(i),i}removeChangeListener(i){Mt(this.listeners,i)}fireChangeListener(i){if(i.recordUndo)for(this.undoStack_.push(i),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let a=0;a<this.listeners.length;a++)(0,this.listeners[a])(i)}getBlockById(i){return this.blockDB.get(i)||null}setBlockById(i,a){this.blockDB.set(i,a)}removeBlockById(i){this.blockDB.delete(i)}getCommentById(i){let a;return(a=this.commentDB.get(i))!=null?a:null}allInputsFilled(i){const a=this.getTopBlocks(!1);for(let p=0;p<a.length;p++)if(!a[p].allInputsFilled(i))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new vb(this)}getVariableMap(){return this.variableMap}setVariableMap(i){this.variableMap=i}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let i=null;const a=this.options.parentWorkspace;return this.isFlyout?a&&a.options&&(i=a.options.parentWorkspace):a&&(i=a),i}static getById(i){return b(i)}static getAll(){return S()}};P_.SCAN_ANGLE=3;var AE=100,CT=class{constructor(i){this.parentWorkspace=i,this.sounds=new Map,this.lastSound_=null,this.muted=!1}dispose(){this.sounds.clear()}load(i,a){if(i.length){try{var p=new globalThis.Audio}catch{return}for(let k=0;k<i.length;k++){const j=i[k],ve=j.match(/\.(\w+)$/);if(ve&&p.canPlayType("audio/"+ve[1])){var w=new globalThis.Audio(j);break}}w&&this.sounds.set(a,w)}}preload(){for(const i of this.sounds.values()){i.volume=.01;const a=i.play();if(a!==void 0?a.then(i.pause).catch(function(){}):i.pause(),Fn||dr)break}}play(i,a){if(!this.muted){var p=this.sounds.get(i);p?(i=new Date,this.lastSound_!==null&&i.getTime()-this.lastSound_.getTime()<AE||(this.lastSound_=i,p=Fn||Rn?p:p.cloneNode(),p.volume=a===void 0?1:a,p.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(i,a)}}setMuted(i){this.muted=i}getMuted(){return this.muted}},IE=class{constructor(i){this.workspace=i,this.layers=new Map,(i=i.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(i)),i=this.createLayer(ee),$e(i,"blocklyBlockCanvas"),i=this.createLayer(be),$e(i,"blocklyBubbleCanvas")}createDragLayer(i){const a=se(Ve.SVG,{class:"blocklyBlockDragSurface",xmlns:Km,"xmlns:html":Ec,"xmlns:xlink":Zs,version:"1.1"});return i.append(a),se(Ve.G,{},a)}translateLayers(i,a){i=`translate(${i.x}, ${i.y}) scale(${a})`;let p;(p=this.dragLayer)==null||p.setAttribute("transform",i);for(const[,w]of this.layers)w.setAttribute("transform",i)}moveToDragLayer(i){let a;(a=this.dragLayer)==null||a.appendChild(i.getSvgRoot())}moveOffDragLayer(i,a){this.append(i,a)}append(i,a){this.layers.has(a)||this.createLayer(a);let p;(p=this.layers.get(a))==null||p.appendChild(i.getSvgRoot())}createLayer(i){const a=this.workspace.getSvgGroup(),p=se(Ve.G,{});let w=!1;const k=[...this.layers].sort((j,ve)=>j[0]-ve[0]);for(const[j,ve]of k)if(i<j){a.insertBefore(p,ve),w=!0;break}return w||a.appendChild(p),this.layers.set(i,p),p}hasLayer(i){return i===this.dragLayer||new Set(this.layers.values()).has(i)}getBlockLayer(){return this.layers.get(ee)}getBubbleLayer(){return this.layers.get(be)}},RE=20,ep=class extends P_{constructor(i){super(i),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(y(Ft.METRICS_MANAGER,i,!0))(this),this.getMetrics=i.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=i.setMetrics||ep.setTopLevelWorkspaceMetrics_,this.componentManager=new gl,this.connectionDBList=sh.init(this.connectionChecker),this.audioManager=new CT(i.parentWorkspace),this.grid=this.options.gridPattern?new ob(this.options.gridPattern,i.gridOptions):null,this.markerManager=new Ca(this),yl&&An&&this.registerToolboxCategoryCallback(Ig,An),Tm&&df&&this.registerToolboxCategoryCallback(mb,df),Ki&&yn&&(this.registerToolboxCategoryCallback(I0,yn),this.addChangeListener(_c)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new $T(this,this.options.theme||Ov),this.themeManager_.subscribeWorkspace(this);let a;this.renderer=Xc(this.options.renderer||"geras",this.getTheme(),(a=this.options.rendererOverrides)!=null?a:void 0),this.cachedParentSvgSize=new eo(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(i){this.metricsManager=i,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(i){this.markerManager.setCursorSvg(i)}setMarkerSvg(i){this.markerManager.setMarkerSvg(i)}getMarker(i){return this.markerManager?this.markerManager.getMarker(i):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(i){i||(i=Ov),this.themeManager_.setTheme(i)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(a){return!!a.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const i=new(Ie(uu))(this.getTheme().name,this.id);ue(i)}updateBlockStyles_(i){for(let a=0,p;p=i[a];a++){const w=p.getStyleName();w&&p.setStyle(w)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const i=this.getParentSvg().getScreenCTM();i&&(this.inverseScreenCTM=i.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(i){let a=0,p=0,w=1;(this.getCanvas().contains(i)||this.getBubbleCanvas().contains(i))&&(w=this.scale);do{const k=gr(i);(i===this.getCanvas()||i===this.getBubbleCanvas())&&(w=1),a+=k.x*w,p+=k.y*w,i=i.parentNode}while(i&&i!==this.getParentSvg()&&i!==this.getInjectionDiv());return new _n(a,p)}getCachedParentSvgSize(){const i=this.cachedParentSvgSize;return new eo(i.width,i.height)}getOriginOffsetInPixels(){return ne(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let i=this.svgGroup_;for(;i;){if((" "+(i.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=i;break}i=i.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(i){this.resizeHandlerWrapper=i}createDom(i,a){return this.injectionDiv||(this.injectionDiv=a??null),this.svgGroup_=se(Ve.G,{class:"blocklyWorkspace"}),i&&(this.svgBackground_=se(Ve.RECT,{height:"100%",width:"100%",class:i},this.svgGroup_),i==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new IE(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(Ce(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),Ce(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(y(Ft.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(i=y(Ft.CURSOR,this.options))&&this.markerManager.setCursor(new i),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&pt(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const i=this.getParentSvg();i&&i.parentNode&&pt(i.parentNode)}this.resizeHandlerWrapper&&(rt(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=ep.newTrashcan(this);const i=this.trashcan.createDom();this.svgGroup_.insertBefore(i,this.getCanvas())}static newTrashcan(i){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new v0(this);const i=this.zoomControls_.createDom();this.svgGroup_.appendChild(i)}addFlyout(i){const a=new Hi({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(y(Ft.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(a):new(y(Ft.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(a),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(i)}getFlyout(i){return this.flyout||i?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const i=this.componentManager.getComponents(gl.Capability.POSITIONABLE,!0),a=this.getMetricsManager().getUiMetrics(),p=[];for(let w=0,k;k=i[w];w++){k.position(a,p);const j=k.getBoundingRectangle();j&&p.push(j)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const i=We();_n.equals(this.lastRecordedPageScroll,i)||(this.lastRecordedPageScroll=i,this.updateScreenCalculations_())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(i,a){const p=this.getParentSvg();i!=null&&(this.cachedParentSvgSize.width=i,p.setAttribute("data-cached-width",`${i}`)),a!=null&&(this.cachedParentSvgSize.height=a,p.setAttribute("data-cached-height",`${a}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let i=this.svgGroup_;for(;i;){if(i.tagName==="svg"){this.cachedParentSvg=i;break}i=i.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(ie()){var i=this.scale,a=-this.scrollY,p=-this.scrollX;if(!(i===this.oldScale&&1>Math.abs(a-this.oldTop)&&1>Math.abs(p-this.oldLeft))){var w=new(Ie(ni))(a,p,i,this.id,this.oldScale);this.oldScale=i,this.oldTop=a,this.oldLeft=p,ue(w)}}}translate(i,a){let p;(p=this.layerManager)==null||p.translateLayers(new _n(i,a),this.scale);let w;(w=this.grid)==null||w.moveTo(i,a),this.maybeFireViewportChangeEvent()}getWidth(){const i=this.getMetrics();return i?i.viewWidth/this.scale:0}setVisible(i){this.isVisible_=i,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(i),this.getFlyout()&&this.getFlyout().setContainerVisible(i),this.getParentSvg().style.display=i?"block":"none",this.toolbox_&&this.toolbox_.setVisible(i),i||this.hideChaff(!0))}render(){for(var i=this.getAllBlocks(!1),a=i.length-1;0<=a;a--)i[a].queueRender();if(this.currentGesture_)for(i=this.currentGesture_.getInsertionMarkers(),a=0;a<i.length;a++)i[a].queueRender();vr().then(()=>void this.markerManager.updateMarkers())}highlightBlock(i,a){if(a===void 0){for(let p=0,w;w=this.highlightedBlocks[p];p++)w.setHighlighted(!1);this.highlightedBlocks.length=0}(i=i?this.getBlockById(i):null)&&((a=a===void 0||a)?this.highlightedBlocks.indexOf(i)===-1&&this.highlightedBlocks.push(i):Mt(this.highlightedBlocks,i),i.setHighlighted(a))}paste(i){if(xe("Blockly.WorkspaceSvg.prototype.paste","v10","v11","Blockly.clipboard.paste"),!this.rendered||!i.type&&!i.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);let p;try{p=i.type?this.pasteBlock_(null,i):i.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(i):this.pasteBlock_(i,null)}finally{t.setGroup$$module$build$src$core$events$utils(a)}return p}pasteBlock_(i,a){t.disable$$module$build$src$core$events$utils();let p;try{let w=0,k=0;if(i){p=io(i,this);let j;w=parseInt((j=i.getAttribute("x"))!=null?j:"0"),this.RTL&&(w=-w);let ve;k=parseInt((ve=i.getAttribute("y"))!=null?ve:"0")}else a&&(p=Vn(a,this),w=a.x||10,this.RTL&&(w=this.getWidth()-w),k=a.y||10);if(!isNaN(w)&&!isNaN(k)){let j;do{j=!1;const ve=this.getAllBlocks(!1);for(let Ue=0,Yt;Yt=ve[Ue];Ue++){const jn=Yt.getRelativeToSurfaceXY();if(1>=Math.abs(w-jn.x)&&1>=Math.abs(k-jn.y)){j=!0;break}}if(!j){const Ue=p.getConnections_(!1);for(let Yt=0,jn;jn=Ue[Yt];Yt++)if(jn.closest(t.config$$module$build$src$core$config.snapRadius,new _n(w,k)).connection){j=!0;break}}j&&(w=this.RTL?w-t.config$$module$build$src$core$config.snapRadius:w+t.config$$module$build$src$core$config.snapRadius,k+=2*t.config$$module$build$src$core$config.snapRadius)}while(j);p.moveTo(new _n(w,k))}}finally{t.enable$$module$build$src$core$events$utils()}return ie()&&!p.isShadow()&&ue(new(Ie(t.CREATE$$module$build$src$core$events$utils))(p)),p.select(),p}pasteWorkspaceComment_(i){t.disable$$module$build$src$core$events$utils();let a;try{a=zl.fromXmlRendered(i,this);let p,w=parseInt((p=i.getAttribute("x"))!=null?p:"0"),k,j=parseInt((k=i.getAttribute("y"))!=null?k:"0");isNaN(w)||isNaN(j)||(this.RTL&&(w=-w),a.moveBy(w+50,j+50))}finally{t.enable$$module$build$src$core$events$utils()}return ie()&&ih.fireCreateEvent(a),a.select(),a}refreshToolboxSelection(){const i=this.isFlyout?this.targetWorkspace:this;i&&!i.currentGesture_&&i.toolbox_&&i.toolbox_.getFlyout()&&i.toolbox_.refreshSelection()}renameVariableById(i,a){super.renameVariableById(i,a),this.refreshToolboxSelection()}deleteVariableById(i){super.deleteVariableById(i),this.refreshToolboxSelection()}createVariable(i,a,p){return i=super.createVariable(i,a,p),this.refreshToolboxSelection(),i}recordDragTargets(){const i=this.componentManager.getComponents(gl.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let a=0,p;p=i[a];a++){const w=p.getClientRect();w&&this.dragTargetAreas.push({component:p,clientRect:w})}}newBlock(i,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(i){for(let a=0,p;p=this.dragTargetAreas[a];a++)if(p.clientRect.contains(i.clientX,i.clientY))return p.component;return null}onMouseDown_(i){const a=this.getGesture(i);a&&a.handleWsStart(i,this)}startDrag(i,a){i=kt(i,this.getParentSvg(),this.getInverseScreenCTM()),i.x/=this.scale,i.y/=this.scale,this.dragDeltaXY=_n.difference(a,i)}moveDrag(i){return i=kt(i,this.getParentSvg(),this.getInverseScreenCTM()),i.x/=this.scale,i.y/=this.scale,_n.sum(this.dragDeltaXY,i)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const i=!!this.scrollbar;return this.isMovable()&&(!i||i&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const i=!!this.scrollbar;return this.isMovable()&&(!i||i&&this.scrollbar.canScrollVertically())}onMouseWheel_(i){if(mm.inProgress())i.preventDefault(),i.stopPropagation();else{var a=this.options.zoomOptions&&this.options.zoomOptions.wheel,p=this.options.moveOptions&&this.options.moveOptions.wheel;if(a||p){var w=vt(i);if(Ar)var k=i.metaKey;a&&(i.ctrlKey||k||!p)?(w=-w.y/50,a=kt(i,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(a.x,a.y,w)):(a=this.scrollX-w.x,p=this.scrollY-w.y,i.shiftKey&&!w.x&&(a=this.scrollX-w.y,p=this.scrollY),this.scroll(a,p)),i.preventDefault()}}}getBlocksBoundingBox(){const i=this.getTopBoundedElements();if(!i.length)return new Oi(0,0,0,0);const a=i[0].getBoundingRectangle();for(let w=1;w<i.length;w++){var p=i[w];p.isInsertionMarker&&p.isInsertionMarker()||(p=p.getBoundingRectangle(),p.top<a.top&&(a.top=p.top),p.bottom>a.bottom&&(a.bottom=p.bottom),p.left<a.left&&(a.left=p.left),p.right>a.right&&(a.right=p.right))}return a}cleanUp(){this.setResizesEnabled(!1),t.setGroup$$module$build$src$core$events$utils(!0);const i=this.getTopBlocks(!0);let a=0;for(let p=0,w;w=i[p];p++){if(!w.isMovable())continue;const k=w.getRelativeToSurfaceXY();w.moveBy(-k.x,a-k.y,["cleanup"]),w.snapToGrid(),a=w.getRelativeToSurfaceXY().y+w.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}t.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(i){if(!this.options.readOnly&&!this.isFlyout){var a=Li.registry.getContextMenuOptions(Li.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(a,i),Wu(i,a,this.RTL)}}updateToolbox(i){if(i=gt(i)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Vt(i)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=i,this.toolbox_.render(i)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=i,this.flyout.show(i)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(O(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(i,a,p){p=Math.pow(this.options.zoomOptions.scaleSpeed,p);const w=this.scale*p;if(this.scale!==w){w>this.options.zoomOptions.maxScale?p=this.options.zoomOptions.maxScale/this.scale:w<this.options.zoomOptions.minScale&&(p=this.options.zoomOptions.minScale/this.scale);var k=this.getCanvas().getCTM(),j=this.getParentSvg().createSVGPoint();j.x=i,j.y=a,j=j.matrixTransform(k.inverse()),i=j.x,a=j.y,k=k.translate(i*(1-p),a*(1-p)).scale(p),this.scrollX=k.e,this.scrollY=k.f,this.setScale(w)}}zoomCenter(i){var a=this.getMetrics();let p;this.flyout?(p=a.svgWidth?a.svgWidth/2:0,a=a.svgHeight?a.svgHeight/2:0):(p=a.viewWidth/2+a.absoluteLeft,a=a.viewHeight/2+a.absoluteTop),this.zoom(p,a,i)}zoomToFit(){if(this.isMovable()){var i=this.getMetrics(),a=i.viewWidth;i=i.viewHeight;var p=this.getBlocksBoundingBox(),w=2*RE,k=p.right-p.left+w;if(p=p.bottom-p.top+w,k){this.flyout&&(this.horizontalLayout?(i+=this.flyout.getHeight(),p+=this.flyout.getHeight()/this.scale):(a+=this.flyout.getWidth(),k+=this.flyout.getWidth()/this.scale)),a/=k,i/=p,t.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(a,i)),this.scrollCenter()}finally{t.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){$e(this.getCanvas(),"blocklyCanvasTransitioning"),$e(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){St(this.getCanvas(),"blocklyCanvasTransitioning"),St(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var i=this.getMetrics(),a=(i.scrollWidth-i.viewWidth)/2,p=(i.scrollHeight-i.viewHeight)/2;a=-a-i.scrollLeft,p=-p-i.scrollTop,this.scroll(a,p)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(i,a){if(this.isMovable()){var p=i?this.getBlockById(i):null;if(p){i=p.getRelativeToSurfaceXY(),p=a?{height:p.height,width:p.width}:p.getHeightWidth();var w=this.scale;a=(i.x+(this.RTL?-1:1)*p.width/2)*w,i=(i.y+p.height/2)*w,p=this.getMetrics(),this.scroll(-(a-p.viewWidth/2),-(i-p.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(i){this.options.zoomOptions.maxScale&&i>this.options.zoomOptions.maxScale?i=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&i<this.options.zoomOptions.minScale&&(i=this.options.zoomOptions.minScale),this.scale=i,this.hideChaff(!1),(i=this.getFlyout(!1))&&i.isVisible()&&(i.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),i=this.getMetrics(),this.scrollX-=i.absoluteLeft,this.scrollY-=i.absoluteTop,i.viewLeft+=i.absoluteLeft,i.viewTop+=i.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(i):this.scrollbar.resizeContent(i))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(i,a){this.hideChaff(!0);const p=this.getMetrics();i=Math.min(i,-p.scrollLeft),a=Math.min(a,-p.scrollTop);const w=p.scrollTop+Math.max(0,p.scrollHeight-p.viewHeight);i=Math.max(i,-(p.scrollLeft+Math.max(0,p.scrollWidth-p.viewWidth))),a=Math.max(a,-w),this.scrollX=i,this.scrollY=a,this.scrollbar&&this.scrollbar.set(-(i+p.scrollLeft),-(a+p.scrollTop),!1),i+=p.absoluteLeft,a+=p.absoluteTop,this.translate(i,a)}getBlockById(i){return super.getBlockById(i)}getAllBlocks(i=!1){return super.getAllBlocks(i)}getTopBlocks(i=!1){return super.getTopBlocks(i)}addTopBlock(i){this.addTopBoundedElement(i),super.addTopBlock(i)}removeTopBlock(i){this.removeTopBoundedElement(i),super.removeTopBlock(i)}addTopComment(i){this.addTopBoundedElement(i),super.addTopComment(i)}removeTopComment(i){this.removeTopBoundedElement(i),super.removeTopComment(i)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(i){this.topBoundedElements.push(i)}removeTopBoundedElement(i){Mt(this.topBoundedElements,i)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(i){const a=!this.resizesEnabled&&i;this.resizesEnabled=i,a&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(i,a){if(typeof a!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(i,a)}getButtonCallback(i){let a;return(a=this.flyoutButtonCallbacks.get(i))!=null?a:null}removeButtonCallback(i){this.flyoutButtonCallbacks.delete(i)}registerToolboxCategoryCallback(i,a){if(typeof a!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(i,a)}getToolboxCategoryCallback(i){return this.toolboxCategoryCallbacks.get(i)||null}removeToolboxCategoryCallback(i){this.toolboxCategoryCallbacks.delete(i)}getGesture(i){const a=i.type==="pointerdown",p=this.currentGesture_;return p?a&&p.hasStarted()?(console.warn("Tried to start the same gesture twice."),p.cancel(),null):p:a?this.currentGesture_=new mm(i,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(i=!1){Al(),Ql(),al(),this.hideComponents(i)}hideComponents(i=!1){this.getComponentManager().getComponents(gl.Capability.AUTOHIDEABLE,!0).forEach(a=>a.autoHide(i))}static setTopLevelWorkspaceMetrics_(i){const a=this.getMetrics();typeof i.x=="number"&&(this.scrollX=-(a.scrollLeft+(a.scrollWidth-a.viewWidth)*i.x)),typeof i.y=="number"&&(this.scrollY=-(a.scrollTop+(a.scrollHeight-a.viewHeight)*i.y)),this.translate(this.scrollX+a.absoluteLeft,this.scrollY+a.absoluteTop)}},yb=class extends _{constructor(i,a){super(a),this.type=Pl,this.isOpen=i}toJson(){const i=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return i.isOpen=this.isOpen,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new yb),a.isOpen=i.isOpen,a}};r(Ft.EVENT,Pl,yb);var bb=class extends vf{constructor(i){if(super(i),this.type=t.DELETE$$module$build$src$core$events$utils,i){if(i.getParent())throw Error("Connected blocks cannot be deleted.");i.isShadow()&&(this.recordUndo=!1),this.oldXml=Tr(i),this.ids=Te(i),this.wasShadow=i.isShadow(),this.oldJson=$i(i,{addCoordinates:!0})}}toJson(){const i=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return i.oldXml=qi(this.oldXml),i.ids=this.ids,i.wasShadow=this.wasShadow,i.oldJson=this.oldJson,this.recordUndo||(i.recordUndo=this.recordUndo),i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new bb),a.oldXml=t.textToDom$$module$build$src$core$utils$xml(i.oldXml),a.ids=i.ids,a.wasShadow=i.wasShadow||a.oldXml.tagName.toLowerCase()==="shadow",a.oldJson=i.oldJson,i.recordUndo!==void 0&&(a.recordUndo=i.recordUndo),a}run(i){const a=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(i)for(i=0;i<this.ids.length;i++){const p=this.ids[i],w=a.getBlockById(p);w?w.dispose(!1):p===this.blockId&&console.warn("Can't delete non-existent block: "+p)}else Vn(this.oldJson,a)}};r(Ft.EVENT,t.DELETE$$module$build$src$core$events$utils,bb);var L0=class{constructor(i,a,p){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.isInsertionMarker_=this.disposing=!1,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=i,this.id=p&&!i.getBlockById(p)?p:q(),i.setBlockById(this.id,this),this.xy_=new _n(0,0),this.isInFlyout=i.isFlyout,this.isInMutator=i.isMutator,this.RTL=i.RTL,a){if(this.type=a,p=jr[a],!p||typeof p!="object")throw TypeError("Invalid block definition for type: "+a);Object.assign(this,p)}i.addTopBlock(this),i.addTypedBlock(this),new.target===L0&&this.doInit_()}doInit_(){const i=t.getGroup$$module$build$src$core$events$utils();i||t.setGroup$$module$build$src$core$events$utils(!0);const a=ae();try{typeof this.init=="function"&&(he(!1),this.init(),he(a)),ie()&&ue(new(Ie(t.CREATE$$module$build$src$core$events$utils))(this))}finally{t.setGroup$$module$build$src$core$events$utils(i),he(a)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(i){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(i),ie()&&ue(new(Ie(t.DELETE$$module$build$src$core$events$utils))(this)),this.workspace.removeTopBlock(this),this.disposeInternal())}disposeInternal(){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0,typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(i=>i.disposeInternal()),this.inputList.forEach(i=>i.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(i=>i.dispose()),this.disposed=!0)}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(const i of this.inputList)for(const a of i.fieldRow)a.initModel&&a.initModel()}unplug(i){this.outputConnection&&this.unplugFromRow_(i),this.previousConnection&&this.unplugFromStack_(i)}unplugFromRow_(i){let a=null,p;(p=this.outputConnection)!=null&&p.isConnected()&&(a=this.outputConnection.targetConnection,this.outputConnection.disconnect()),a&&i&&(i=this.getOnlyValueConnection_())&&i.isConnected()&&!i.targetBlock().isShadow()&&(i=i.targetConnection,i==null||i.disconnect(),this.workspace.connectionChecker.canConnect(i,a,!1)?a.connect(i):i==null||i.onFailedConnect(a))}getOnlyValueConnection_(){let i=null;for(let a=0;a<this.inputList.length;a++){const p=this.inputList[a].connection;if(p&&p.type===zn.INPUT_VALUE&&p.targetConnection){if(i)return null;i=p}}return i}unplugFromStack_(i){let a=null;var p;if((p=this.previousConnection)!=null&&p.isConnected()&&(a=this.previousConnection.targetConnection,this.previousConnection.disconnect()),p=this.getNextBlock(),i&&p&&!p.isShadow()){let w,k;i=(k=(w=this.nextConnection)==null?void 0:w.targetConnection)!=null?k:null,i==null||i.disconnect(),a&&this.workspace.connectionChecker.canConnect(a,i,!1)&&a.connect(i)}}getConnections_(i){i=[],this.outputConnection&&i.push(this.outputConnection),this.previousConnection&&i.push(this.previousConnection),this.nextConnection&&i.push(this.nextConnection);for(let a=0,p;p=this.inputList[a];a++)p.connection&&i.push(p.connection);return i}lastConnectionInStack(i){let a=this.nextConnection;for(;a;){const p=a.targetBlock();if(!p||i&&p.isShadow())return a;a=p.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(i){for(let a=0,p;p=this.inputList[a];a++)if(p.connection&&p.connection.targetBlock()===i)return p;return null}getSurroundParent(){let i=this,a;do if(a=i,i=i.getParent(),!i)return null;while(i.getNextBlock()===a);return i}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let i,a=this;do i=a,a=i.parentBlock_;while(a);return i}getTopStackBlock(){let i=this,a;do a=i.getPreviousBlock();while(a&&a.getNextBlock()===i&&(i=a));return i}getChildren(i){if(!i)return this.childBlocks_;i=[];for(let p=0,w;w=this.inputList[p];p++)if(w.connection){var a=w.connection.targetBlock();a&&i.push(a)}return(a=this.getNextBlock())&&i.push(a),i}setParent(i){if(i!==this.parentBlock_){var a=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),p=!!a;if(p&&i&&a!==i)throw Error("Block connected to superior one that is not new parent.");if(!p&&i)throw Error("Block not connected to new parent.");if(p&&!i)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Mt(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=i)?i.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(i){const a=[this],p=this.getChildren(i);for(let w,k=0;w=p[k];k++)a.push(...w.getDescendants(i));return a}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable_}setDeletable(i){this.deletable_=i}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable_}setMovable(i){this.movable_=i}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(V(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(i){this.isShadow_=i}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(i){this.isInsertionMarker_=i}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable_}setEditable(i){this.editable_=i;for(let a=0,p;p=this.inputList[a];a++)for(let w=0,k;k=p.fieldRow[w];w++)k.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const i of this.inputList)if(i.connection||1<i.fieldRow.length)return!1;return!0}getMatchingConnection(i,a){const p=this.getConnections_(!0);if(i=i.getConnections_(!0),p.length!==i.length)throw Error("Connection lists did not match in length.");for(let w=0;w<i.length;w++)if(i[w]===a)return p[w];return null}setHelpUrl(i){this.helpUrl=i}setTooltip(i){this.tooltip=i}getTooltip(){return uo(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(i){i=Qi(i),this.hue_=i.hue,this.colour_=i.hex}setStyle(i){this.styleName_=i}setOnChange(i){if(i&&typeof i!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=i,this.onchangeWrapper_=i.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(i){if(typeof i!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(i===void 0?"nothing":i+" of type "+typeof i)+" instead");for(let a=0,p;p=this.inputList[a];a++)for(let w=0,k;k=p.fieldRow[w];w++)if(k.name===i)return k;return null}getVars(){const i=[];for(let a=0,p;p=this.inputList[a];a++)for(let w=0,k;k=p.fieldRow[w];w++)k.referencesVariables()&&i.push(k.getValue());return i}getVarModels(){const i=[];for(let a=0,p;p=this.inputList[a];a++)for(let w=0,k;k=p.fieldRow[w];w++)if(k.referencesVariables()){const j=this.workspace.getVariableById(k.getValue());j&&i.push(j)}return i}updateVarName(i){for(let a=0,p;p=this.inputList[a];a++)for(let w=0,k;k=p.fieldRow[w];w++)k.referencesVariables()&&i.getId()===k.getValue()&&k.refreshVariableName()}renameVarById(i,a){for(let p=0,w;w=this.inputList[p];p++)for(let k=0,j;j=w.fieldRow[k];k++)j.referencesVariables()&&i===j.getValue()&&j.setValue(a)}getFieldValue(i){return(i=this.getField(i))?i.getValue():null}setFieldValue(i,a){const p=this.getField(a);if(!p)throw Error('Field "'+a+'" not found.');p.setValue(i)}setPreviousStatement(i,a){if(i)a===void 0&&(a=null),this.previousConnection||(this.previousConnection=this.makeConnection_(zn.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(a);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(i,a){if(i)a===void 0&&(a=null),this.nextConnection||(this.nextConnection=this.makeConnection_(zn.NEXT_STATEMENT)),this.nextConnection.setCheck(a);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(i,a){if(i)a===void 0&&(a=null),this.outputConnection||(this.outputConnection=this.makeConnection_(zn.OUTPUT_VALUE)),this.outputConnection.setCheck(a);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(i){this.inputsInline!==i&&(ue(new(Ie(t.CHANGE$$module$build$src$core$events$utils))(this,"inline",null,this.inputsInline,i)),this.inputsInline=i)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var i=1;i<this.inputList.length;i++)if(this.inputList[i-1]instanceof Np&&this.inputList[i]instanceof Np)return!1;for(i=1;i<this.inputList.length;i++)if(this.inputList[i-1]instanceof t.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[i]instanceof Np)return!0;for(i=0;i<this.inputList.length;i++)if(this.inputList[i]instanceof bm)return!0;return!1}setOutputShape(i){this.outputShape_=i}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(i){if(this.isEnabled()!==i){const a=this.disabled;this.disabled=!i,ue(new(Ie(t.CHANGE$$module$build$src$core$events$utils))(this,"disabled",null,a,!i))}}getInheritedDisabled(){let i=this.getSurroundParent();for(;i;){if(i.disabled)return!0;i=i.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(i){this.collapsed_!==i&&(ue(new(Ie(t.CHANGE$$module$build$src$core$events$utils))(this,"collapsed",null,this.collapsed_,i)),this.collapsed_=i)}toString(i,a){a=this.toTokens(a);for(let w=2;w<a.length;w++)a[w-2]==="("&&a[w]===")"&&(a[w-2]=a[w-1],a.splice(w-1,2));let p="";return a=a.reduce((w,k)=>(w=w+(p==="("||k===")"?"":" ")+k,p=k[k.length-1],w),""),a=a.trim()||"???",i&&a.length>i&&(a=a.substring(0,i-3)+"..."),a}toTokens(i="?"){const a=[];for(const w of this.inputList)if(w.name!=Pg){for(const k of w.fieldRow)a.push(k.getText());if(w.connection){const k=w.connection.targetBlock();if(k){var p=w.connection;let j=p.getCheck();!j&&p.targetConnection&&(j=p.targetConnection.getCheck()),(p=!!j&&(j.indexOf("Boolean")!==-1||j.indexOf("Number")!==-1))&&a.push("("),a.push(...k.toTokens(i)),p&&a.push(")")}else a.push(i)}}return a}appendValueInput(i){return this.appendInput(new t.ValueInput$$module$build$src$core$inputs$value_input(i,this))}appendStatementInput(i){return this.statementInputCount++,this.appendInput(new id(i,this))}appendDummyInput(i=""){return this.appendInput(new Np(i,this))}appendEndRowInput(i=""){return this.appendInput(new bm(i,this))}appendInput(i){return this.inputList.push(i),i}appendInputFromRegistry(i,a){return(i=h(Ft.INPUT,i,!1))?this.appendInput(new i(a,this)):null}jsonInit(i){var a=i.type?'Block "'+i.type+'": ':"";if(i.output&&i.previousStatement)throw Error(a+"Must not have both an output and a previousStatement.");for(var p=0;i["args"+p];){if(i["message"+p]===void 0)throw Error(a+`args${p} must have a corresponding message (message${p}).`);p++}if(i.style&&i.style.hat&&(this.hat=i.style.hat,i.style=null),i.style&&i.colour)throw Error(a+"Must not have both a colour and a style.");for(i.style?this.jsonInitStyle_(i,a):this.jsonInitColour_(i,a),p=0;i["message"+p]!==void 0;)this.interpolate_(i["message"+p],i["args"+p]||[],i["implicitAlign"+p]||i["lastDummyAlign"+p],a),p++;if(i.inputsInline!==void 0&&(t.disable$$module$build$src$core$events$utils(),this.setInputsInline(i.inputsInline),t.enable$$module$build$src$core$events$utils()),i.output!==void 0&&this.setOutput(!0,i.output),i.outputShape!==void 0&&this.setOutputShape(i.outputShape),i.previousStatement!==void 0&&this.setPreviousStatement(!0,i.previousStatement),i.nextStatement!==void 0&&this.setNextStatement(!0,i.nextStatement),i.tooltip!==void 0&&(p=Vr(i.tooltip),this.setTooltip(p)),i.enableContextMenu!==void 0&&(this.contextMenu=!!i.enableContextMenu),i.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!i.suppressPrefixSuffix),i.helpUrl!==void 0&&(p=Vr(i.helpUrl),this.setHelpUrl(p)),typeof i.extensions=="string"&&(console.warn(a+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+i.type+"' block."),i.extensions=[i.extensions]),i.mutator!==void 0&&Zi(i.mutator,this,!0),i=i.extensions,Array.isArray(i))for(a=0;a<i.length;a++)Zi(i[a],this,!1)}jsonInitColour_(i,a){if("colour"in i)if(i.colour===void 0)console.warn(a+"Undefined colour value.");else{i=i.colour;try{this.setColour(i)}catch{console.warn(a+"Illegal colour value: ",i)}}}jsonInitStyle_(i,a){i=i.style;try{this.setStyle(i)}catch{console.warn(a+"Style does not exist: ",i)}}mixin(i,a){if(a!==void 0&&typeof a!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!a){a=[];for(const p in i)this[p]!==void 0&&a.push(p);if(a.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(a))}Object.assign(this,i)}interpolate_(i,a,p,w){i=Ga(i),this.validateTokens_(i,a.length),a=this.interpolateArguments_(i,a,p),p=[];for(let k=0,j;j=a[k];k++)if(this.isInputKeyword_(j.type)){if(i=this.inputFromJson_(j,w)){for(let ve=0,Ue;Ue=p[ve];ve++)i.appendField(Ue[0],Ue[1]);p.length=0}}else(i=this.fieldFromJson_(j))&&p.push([i,j.name])}validateTokens_(i,a){const p=[];let w=0;for(let k=0;k<i.length;k++){const j=i[k];if(typeof j=="number"){if(1>j||j>a)throw Error('Block "'+this.type+'": Message index %'+j+" out of range.");if(p[j])throw Error('Block "'+this.type+'": Message index %'+j+" duplicated.");p[j]=!0,w++}}if(w!==a)throw Error('Block "'+this.type+'": Message does not reference all '+a+" arg(s).")}interpolateArguments_(i,a,p){const w=[];for(let j=0;j<i.length;j++){var k=i[j];if(typeof k=="number"&&(k=a[k-1]),typeof k=="string"){if(k===`
`)k={type:"input_end_row"},p&&(k.align=p);else if(k=this.stringToFieldJson_(k),!k)continue}w.push(k)}return(i=w.length)&&!this.isInputKeyword_(w[i-1].type)&&(i={type:"input_dummy"},p&&(i.align=p),w.push(i)),w}fieldFromJson_(i){const a=t.fromJson$$module$build$src$core$field_registry(i);return!a&&i.alt?typeof i.alt=="string"?(i=this.stringToFieldJson_(i.alt))?this.fieldFromJson_(i):null:this.fieldFromJson_(i.alt):a}inputFromJson_(i,a){var p={LEFT:t.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:t.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:t.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:t.Align$$module$build$src$core$inputs$align.CENTRE};let w;switch(i.type){case"input_value":w=this.appendValueInput(i.name);break;case"input_statement":w=this.appendStatementInput(i.name);break;case"input_dummy":w=this.appendDummyInput(i.name);break;case"input_end_row":w=this.appendEndRowInput(i.name);break;default:w=this.appendInputFromRegistry(i.type,i.name)}return w?(i.check&&w.setCheck(i.check),i.align&&(p=p[i.align.toUpperCase()],p===void 0?console.warn(a+"Illegal align value: ",i.align):w.setAlign(p)),w):null}isInputKeyword_(i){return i==="input_value"||i==="input_statement"||i==="input_dummy"||i==="input_end_row"||u(Ft.INPUT,i)}stringToFieldJson_(i){return(i=i.trim())?{type:"field_label",text:i}:null}moveInputBefore(i,a){if(i!==a){var p=-1,w=a?-1:this.inputList.length;for(let k=0,j;j=this.inputList[k];k++)if(j.name===i){if(p=k,w!==-1)break}else if(a&&j.name===a&&(w=k,p!==-1))break;if(p===-1)throw Error('Named input "'+i+'" not found.');if(w===-1)throw Error('Reference input "'+a+'" not found.');this.moveNumberedInputBefore(p,w)}}moveNumberedInputBefore(i,a){if(i===a)throw Error("Can't move input to itself.");if(i>=this.inputList.length)throw RangeError("Input index "+i+" out of bounds.");if(a>this.inputList.length)throw RangeError("Reference input "+a+" out of bounds.");const p=this.inputList[i];this.inputList.splice(i,1),i<a&&a--,this.inputList.splice(a,0,p)}removeInput(i,a){for(let p=0,w;w=this.inputList[p];p++)if(w.name===i)return w instanceof id&&this.statementInputCount--,w.dispose(),this.inputList.splice(p,1),!0;if(a)return!1;throw Error("Input not found: "+i)}getInput(i){for(let a=0,p;p=this.inputList[a];a++)if(p.name===i)return p;return null}getInputTargetBlock(i){return(i=this.getInput(i))&&i.connection&&i.connection.targetBlock()}getCommentText(){let i,a;return(a=(i=this.getIcon(nd.TYPE))==null?void 0:i.getText())!=null?a:null}setCommentText(i){var a;let p;const w=(p=(a=this.getIcon(nd.TYPE))==null?void 0:a.getText())!=null?p:null;w!==i&&(i!==null?((a=this.getIcon(nd.TYPE))||(a=this.addIcon(new nd(this))),t.disable$$module$build$src$core$events$utils(),a.setText(i),t.enable$$module$build$src$core$events$utils()):this.removeIcon(nd.TYPE),ue(new(Ie(t.CHANGE$$module$build$src$core$events$utils))(this,"comment",null,w,i)))}setWarningText(i,a){}setMutator(i){}addIcon(i){if(this.hasIcon(i.getType()))throw new Pv(i);return this.icons.push(i),this.icons.sort((a,p)=>a.getWeight()-p.getWeight()),i}removeIcon(i){if(!this.hasIcon(i))return!1;let a;return(a=this.getIcon(i))==null||a.dispose(),this.icons=this.icons.filter(p=>!p.getType().equals(i)),!0}hasIcon(i){return this.icons.some(a=>a.getType().equals(i))}getIcon(i){return i instanceof jo?this.icons.find(a=>a.getType().equals(i)):this.icons.find(a=>a.getType().toString()===i)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy_}moveBy(i,a,p){if(this.parentBlock_)throw Error("Block has parent");const w=new(Ie(t.MOVE$$module$build$src$core$events$utils))(this);p&&w.setReason(p),this.xy_.translate(i,a),w.recordNew(),ue(w)}makeConnection_(i){return new fs(this,i)}allInputsFilled(i){if(i===void 0&&(i=!0),!i&&this.isShadow())return!1;for(let p=0,w;w=this.inputList[p];p++)if(w.connection){var a=w.connection.targetBlock();if(!a||!a.allInputsFilled(i))return!1}return(a=this.getNextBlock())?a.allInputsFilled(i):!0}toDevString(){let i=this.type?'"'+this.type+'" block':"Block";return this.id&&(i+=' (id="'+this.id+'")'),i}};L0.COLLAPSED_INPUT_NAME=Pg,L0.COLLAPSED_FIELD_NAME=Fv;var MT=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(i){this.drawer=i}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(i){const a=this.curNode;this.curNode=i,this.drawer&&this.drawer.draw(a,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},Tb=class extends MT{constructor(){super(),this.type="cursor"}next(){var i=this.getCurNode();if(!i)return null;for(i=i.next();i&&i.next()&&(i.getType()===en.types.NEXT||i.getType()===en.types.BLOCK);)i=i.next();return i&&this.setCurNode(i),i}in(){var i=this.getCurNode();if(!i)return null;(i.getType()===en.types.PREVIOUS||i.getType()===en.types.OUTPUT)&&(i=i.next());let a,p;return(i=(p=(a=i)==null?void 0:a.in())!=null?p:null)&&this.setCurNode(i),i}prev(){var i=this.getCurNode();if(!i)return null;for(i=i.prev();i&&i.prev()&&(i.getType()===en.types.NEXT||i.getType()===en.types.BLOCK);)i=i.prev();return i&&this.setCurNode(i),i}out(){var i=this.getCurNode();return i?((i=i.out())&&i.getType()===en.types.BLOCK&&(i=i.prev()||i),i&&this.setCurNode(i),i):null}};r(Ft.CURSOR,Nl,Tb);var B_=class extends Tb{constructor(){super()}next(){var i=this.getCurNode();return i?((i=this.getNextNode_(i,this.validNode_))&&this.setCurNode(i),i):null}in(){return this.next()}prev(){var i=this.getCurNode();return i?((i=this.getPreviousNode_(i,this.validNode_))&&this.setCurNode(i),i):null}out(){return this.prev()}getNextNode_(i,a){if(!i)return null;const p=i.in()||i.next();return a(p)?p:p?this.getNextNode_(p,a):(i=this.findSiblingOrParent(i.out()),a(i)?i:i?this.getNextNode_(i,a):null)}getPreviousNode_(i,a){if(!i)return null;let p=i.prev();return p=p?this.getRightMostChild(p):i.out(),a(p)?p:p?this.getPreviousNode_(p,a):null}validNode_(i){let a=!1;return i=i&&i.getType(),(i===en.types.OUTPUT||i===en.types.INPUT||i===en.types.FIELD||i===en.types.NEXT||i===en.types.PREVIOUS||i===en.types.WORKSPACE)&&(a=!0),a}findSiblingOrParent(i){if(!i)return null;const a=i.next();return a||this.findSiblingOrParent(i.out())}getRightMostChild(i){if(!i.in())return i;for(i=i.in();i&&i.next();)i=i.next();return this.getRightMostChild(i)}};B_.registrationName="basicCursor",r(Ft.CURSOR,B_.registrationName,B_);var AT=class extends B_{validNode_(i){let a=!1;const p=i&&i.getType();return i&&(i=i.getLocation(),p===en.types.FIELD&&i&&i.isTabNavigable()&&i.isClickable()&&(a=!0)),a}},Sb=10,sd=class extends fs{constructor(i,a){super(i,a),this.highlighted=!1,this.targetConnection=null,this.db=i.workspace.connectionDBList[a],this.dbOpposite=i.workspace.connectionDBList[Zt[a]],this.offsetInBlock=new _n(0,0),this.trackedState=sd.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===sd.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let i,a;(a=(i=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||a.call(i,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(i){const a=this.x-i.x;return i=this.y-i.y,Math.sqrt(a*a+i*i)}bumpAwayFrom(i){if(!this.sourceBlock_.workspace.isDragging()){var a=this.sourceBlock_.getRootBlock();if(!a.isInFlyout){var p=!1;if(!a.isMovable()){if(a=i.getSourceBlock().getRootBlock(),!a.isMovable())return;i=this,p=!0}var w=L()==a;w||a.addSelect();var k=i.x+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Sb)-this.x,j=i.y+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Sb)-this.y;p&&(j=-j),a.RTL&&(k=i.x-t.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*Sb)-this.x),a.moveBy(k,j,["bump"]),w||a.removeSelect()}}}moveTo(i,a){let p=!1;return this.trackedState===sd.TrackedState.WILL_TRACK?(this.db.addConnection(this,a),this.trackedState=sd.TrackedState.TRACKED,p=!0):this.trackedState===sd.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,a),p=!0),this.x=i,this.y=a,p}moveBy(i,a){return this.moveTo(this.x+i,this.y+a)}moveToOffset(i){return this.moveTo(i.x+this.offsetInBlock.x,i.y+this.offsetInBlock.y)}setOffsetInBlock(i,a){this.offsetInBlock.x=i,this.offsetInBlock.y=a}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var i=this.targetConnection;const a=this.targetBlock();i&&a&&(i=_n.difference(this.offsetInBlock,i.offsetInBlock),a.translate(i.x,i.y))}closest(i,a){return this.dbOpposite.searchForClosest(this,i,a)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(i){i&&this.trackedState===sd.TrackedState.TRACKED||!i&&this.trackedState===sd.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(i?(this.db.addConnection(this,this.y),this.trackedState=sd.TrackedState.TRACKED):(this.trackedState===sd.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=sd.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const i=this.targetBlock().getDescendants(!1);for(let a=0;a<i.length;a++){const p=i[a],w=p.getConnections_(!0);for(let k=0;k<w.length;k++)w[k].setTracking(!1);for(const k of p.getIcons())ru(k)&&k.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let i=[];if(this.type!==zn.INPUT_VALUE&&this.type!==zn.NEXT_STATEMENT)return i;const a=this.targetBlock();if(a){let p;a.isCollapsed()?(p=[],a.outputConnection&&p.push(a.outputConnection),a.nextConnection&&p.push(a.nextConnection),a.previousConnection&&p.push(a.previousConnection)):p=a.getConnections_(!0);for(let w=0;w<p.length;w++)i.push(...p[w].startTrackingAll());i.length||(i=[a])}return i}onFailedConnect(i){const a=this.getSourceBlock();if(ae()){const p=t.getGroup$$module$build$src$core$events$utils();setTimeout((function(){a.isDisposed()||a.getParent()||(t.setGroup$$module$build$src$core$events$utils(p),this.bumpAwayFrom(i),t.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),t.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(i=!0){const{parentConnection:a,childConnection:p}=this.getParentAndChildConnections();if(a&&p){var w=a.getSourceBlock(),k=p.getSourceBlock();super.disconnectInternal(i),w.rendered&&w.queueRender(),k.rendered&&(k.updateDisabled(),k.queueRender(),k.getSvgRoot().style.display="block")}}respawnShadow_(){super.respawnShadow_();const i=this.targetBlock();i&&(i.initSvg(),i.queueRender())}neighbours(i){return this.dbOpposite.getNeighbours(this,i)}connect_(i){super.connect_(i);var a=this.getSourceBlock();i=i.getSourceBlock();const p=a.rendered,w=i.rendered;p&&a.updateDisabled(),w&&i.updateDisabled(),p&&w&&(this.type===zn.NEXT_STATEMENT||this.type===zn.PREVIOUS_STATEMENT?i.queueRender():a.queueRender()),(a=a.getInputWithBlock(i))&&(a=a.isVisible(),i.getSvgRoot().style.display=a?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}setCheck(i){return super.setCheck(i),this.sourceBlock_.rendered&&this.sourceBlock_.queueRender(),this}};(function(i){i=i.TrackedState||(i.TrackedState={}),i[i.WILL_TRACK=-1]="WILL_TRACK",i[i.UNTRACKED=0]="UNTRACKED",i[i.TRACKED=1]="TRACKED"})(sd||(sd={})),sd.TrackedState;var Dp=class extends L0{constructor(i,a,p){super(i,a,p),this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.visuallyDisabled=this.rendered=!1,this.translation="",this.bumpNeighboursPid=0,this.dragging=!1,this.relativeCoords=new _n(0,0),this.workspace=i,this.svgGroup_=se(Ve.G,{}),this.style=i.getRenderer().getConstants().getBlockStyle(null),this.pathObject=i.getRenderer().makePathObject(this.svgGroup_,this.style),i=this.pathObject.svgPath,i.tooltip=this,zi(i),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let a=0,p;p=this.inputList[a];a++)p.init();for(var i of this.getIcons())i.initView(this.createIconPointerDownListener(i)),i.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),i=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!i||Ce(i,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,i.parentNode||this.workspace.getCanvas().appendChild(i)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(L()!==this){var i=null;if(L()){i=L().id,t.disable$$module$build$src$core$events$utils();try{L().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}i=new(Ie(_o))(i,this.id,this.workspace.id),ue(i),B(this),this.addSelect()}}unselect(){if(L()===this){var i=new(Ie(_o))(this.id,null,this.workspace.id);i.workspaceId=this.workspace.id,ue(i),B(null),this.removeSelect()}}setParent(i){const a=this.parentBlock_;if(i!==a){te(),super.setParent(i),me();var p=this.getSvgRoot();if(!this.workspace.isClearing&&p){var w=this.getRelativeToSurfaceXY();i?i.getSvgRoot().appendChild(p):a&&((i=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(p,i):this.workspace.getCanvas().appendChild(p),this.translate(w.x,w.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const i=this.workspace.getLayerManager();if(!i)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,p=0,w=this.getSvgRoot();if(w)do{const k=gr(w);a+=k.x,p+=k.y,w=w.parentNode}while(w&&!i.hasLayer(w));return new _n(a,p)}moveBy(i,a,p){if(this.parentBlock_)throw Error("Block has parent");const w=ie();let k=null;w&&(k=new(Ie(t.MOVE$$module$build$src$core$events$utils))(this),p&&k.setReason(p)),i=new _n(i,a),a=this.getRelativeToSurfaceXY(),i=_n.sum(a,i),this.translate(i.x,i.y),this.updateComponentLocations(i),w&&k&&(k.recordNew(),ue(k)),this.workspace.resizeContents()}translate(i,a){this.translation=`translate(${i}, ${a})`,this.relativeCoords=new _n(i,a),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(i,a){const p=this.getRelativeToSurfaceXY();this.moveBy(i.x-p.x,i.y-p.y,a)}moveDuringDrag(i){this.translate(i.x,i.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(i)}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var i=this.workspace.getGrid();if(i&&i.shouldSnap()){var a=i.getSpacing(),p=a/2,w=this.getRelativeToSurfaceXY();i=Math.round(Math.round((w.x-p)/a)*a+p-w.x),a=Math.round(Math.round((w.y-p)/a)*a+p-w.y),(i||a)&&this.moveBy(i,a,["snap"])}}}getBoundingRectangle(){const i=this.getRelativeToSurfaceXY(),a=this.getHeightWidth();let p,w;return this.RTL?(p=i.x-a.width,w=i.x):(p=i.x,w=i.x+a.width),new Oi(i.y,i.y+a.height,p,w)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let i=0,a;a=this.inputList[i];i++)a.markDirty()}setCollapsed(i){this.collapsed_!==i&&(super.setCollapsed(i),this.updateCollapsed_())}updateCollapsed_(){var i=this.isCollapsed();const a=Pg,p=Fv;for(let k=0,j;j=this.inputList[k];k++)j.name!==a&&j.setVisible(!i);for(var w of this.getIcons())w.updateCollapsed();i?(i=this.toString(at),(w=this.getField(p))?w.setValue(i):(this.getInput(a)||this.appendDummyInput(a)).appendField(new wi(i),p)):(this.updateDisabled(),this.removeInput(a))}tab(i,a){const p=new AT;p.setCurNode(en.createFieldNode(i)),i=p.getCurNode(),a?p.next():p.prev(),(a=p.getCurNode())&&a!==i&&(a.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(a))}onMouseDown_(i){const a=this.workspace.getGesture(i);a&&a.handleBlockStart(i,this)}showHelp(){const i=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;i&&window.open(i)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const i=Li.registry.getContextMenuOptions(Li.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(i),i}showContextMenu(i){const a=this.generateContextMenu();a&&a.length&&(Wu(i,a,this.RTL),pd(this))}updateComponentLocations(i){if(this.rendered){this.dragging||this.updateConnectionLocations(i),this.updateIconLocations(i),this.updateFieldLocations(i);for(const a of this.getChildren(!1))a.updateComponentLocations(_n.sum(i,a.relativeCoords))}}updateConnectionLocations(i){for(const a of this.getConnections_(!1))a.moveToOffset(i)}updateIconLocations(i){for(const a of this.getIcons())a.onLocationChange(i)}updateFieldLocations(i){for(const a of this.inputList)for(const p of a.fieldRow)p.onLocationChange(i)}setDragging(i){(this.dragging=i)?(this.translation="",Xi.push(...this.getConnections_(!0)),$e(this.svgGroup_,"blocklyDragging")):(Xi.length=0,St(this.svgGroup_,"blocklyDragging"));for(let a=0;a<this.childBlocks_.length;a++)this.childBlocks_[a].setDragging(i)}setMovable(i){super.setMovable(i),this.pathObject.updateMovable(i)}setEditable(i){super.setEditable(i),i=this.getIcons();for(let a=0;a<i.length;a++)i[a].updateEditable()}setShadow(i){super.setShadow(i),this.applyColour()}setInsertionMarker(i){this.isInsertionMarker_!==i&&(this.isInsertionMarker_=i)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(i,a){this.isDeadOrDying()||(Id(),Zl(),a&&this.rendered&&(this.unplug(i),$u(this)),super.dispose(!!i),pt(this.svgGroup_))}disposeInternal(){this.isDeadOrDying()||(super.disposeInternal(),this.rendered=!1,L()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(i=>clearTimeout(i)),this.warningTextDb.clear(),this.getIcons().forEach(i=>i.dispose()))}checkAndDelete(){this.workspace.isFlyout||(t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),t.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:Rp.TYPE,blockState:$i(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:V(this,!0)}}applyColour(){this.pathObject.applyColour(this);const i=this.getIcons();for(let a=0;a<i.length;a++)i[a].applyColour();for(let a=0,p;p=this.inputList[a];a++)for(let w=0,k;k=p.fieldRow[w];w++)k.applyColour()}updateDisabled(){const i=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===i){let a;(a=this.getNextBlock())==null||a.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=i;for(const a of this.getChildren(!1))a.updateDisabled()}}getCommentIcon(){xe("getCommentIcon","v10","v11","getIcon");let i;return(i=this.getIcon(nd.TYPE))!=null?i:null}setWarningText(i,a=""){if(a)this.warningTextDb.has(a)&&(clearTimeout(this.warningTextDb.get(a)),this.warningTextDb.delete(a));else{for(var p of this.warningTextDb.values())clearTimeout(p);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(a,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(a),this.setWarningText(i,a))},100));else if(this.isInFlyout&&(i=null),p=this.getIcon(Zf.TYPE),i){let w=this.getSurroundParent(),k=null;for(;w;)w.isCollapsed()&&(k=w),w=w.getSurroundParent();k&&k.setWarningText(t.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,Dp.COLLAPSED_WARNING_ID),p?p.addMessage(i,a):this.addIcon(new Zf(this).addMessage(i,a))}else p&&(a?(p.addMessage("",a),p.getText()||this.removeIcon(Zf.TYPE)):this.removeIcon(Zf.TYPE))}setMutator(i){this.removeIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),i&&this.addIcon(i)}addIcon(i){return super.addIcon(i),i instanceof Zf&&(this.warning=i),i instanceof t.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=i),this.rendered&&(i.initView(this.createIconPointerDownListener(i)),i.applyColour(),i.updateEditable(),this.queueRender(),xi(),this.bumpNeighbours()),i}createIconPointerDownListener(i){return a=>{this.isDeadOrDying()||(a=this.workspace.getGesture(a))&&a.setStartIcon(i)}}removeIcon(i){const a=super.removeIcon(i);return i.equals(Zf.TYPE)&&(this.warning=null),i.equals(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.rendered&&(this.queueRender(),xi(),this.bumpNeighbours()),a}setEnabled(i){this.isEnabled()!==i&&(super.setEnabled(i),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(i){this.rendered&&this.pathObject.updateHighlighted(i)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(i){this.pathObject.updateDraggingDelete(i)}getColour(){return this.style.colourPrimary}setColour(i){super.setColour(i),i=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(i.style),this.style=i.style,this.styleName_=i.name,this.applyColour()}setStyle(i){const a=this.workspace.getRenderer().getConstants().getBlockStyle(i);if(this.styleName_=i,a)this.hat=a.hat,this.pathObject.setStyle(a),this.colour_=a.colourPrimary,this.style=a,this.applyColour();else throw Error("Invalid style name: "+i)}bringToFront(i=!1){let a=this;if(!a.isDeadOrDying())do{const p=a.getSvgRoot(),w=p.parentNode,k=w.childNodes;if(k[k.length-1]!==p&&w.appendChild(p),i)break;a=a.getParent()}while(a)}setPreviousStatement(i,a){super.setPreviousStatement(i,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setNextStatement(i,a){super.setNextStatement(i,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setOutput(i,a){super.setOutput(i,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setInputsInline(i){super.setInputsInline(i),this.rendered&&(this.queueRender(),this.bumpNeighbours())}removeInput(i,a){return i=super.removeInput(i,a),this.rendered&&(this.queueRender(),this.bumpNeighbours()),i}moveNumberedInputBefore(i,a){super.moveNumberedInputBefore(i,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}appendInput(i){return super.appendInput(i),this.rendered&&(this.queueRender(),this.bumpNeighbours()),i}setConnectionTracking(i){if(this.previousConnection&&this.previousConnection.setTracking(i),this.outputConnection&&this.outputConnection.setTracking(i),this.nextConnection){this.nextConnection.setTracking(i);var a=this.nextConnection.targetBlock();a&&a.setConnectionTracking(i)}if(!this.collapsed_)for(a=0;a<this.inputList.length;a++){var p=this.inputList[a].connection;p&&(p.setTracking(i),(p=p.targetBlock())&&p.setConnectionTracking(i))}}getConnections_(i){const a=[];if((i||this.rendered)&&(this.outputConnection&&a.push(this.outputConnection),this.previousConnection&&a.push(this.previousConnection),this.nextConnection&&a.push(this.nextConnection),i||!this.collapsed_))for(let p=0,w;w=this.inputList[p];p++)w.connection&&a.push(w.connection);return a}lastConnectionInStack(i){return super.lastConnectionInStack(i)}getMatchingConnection(i,a){return super.getMatchingConnection(i,a)}makeConnection_(i){return new sd(this,i)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){if(!this.bumpNeighboursPid){var i=t.getGroup$$module$build$src$core$events$utils();this.bumpNeighboursPid=setTimeout(()=>{const a=t.getGroup$$module$build$src$core$events$utils();t.setGroup$$module$build$src$core$events$utils(i),this.getRootBlock().bumpNeighboursInternal(),t.setGroup$$module$build$src$core$events$utils(a),this.bumpNeighboursPid=0},t.config$$module$build$src$core$config.bumpDelay)}}bumpNeighboursInternal(){const i=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||i.isInFlyout))for(const a of this.getConnections_(!1)){if(a.isSuperior()){let p;(p=a.targetBlock())==null||p.bumpNeighboursInternal()}for(const p of a.neighbours(t.config$$module$build$src$core$config.snapRadius))p.getSourceBlock().getRootBlock()!==i&&(a.isConnected()&&p.isConnected()||(a.isSuperior()?p.bumpAwayFrom(a):a.bumpAwayFrom(p)))}}scheduleSnapAndBump(){const i=t.getGroup$$module$build$src$core$events$utils();setTimeout(()=>{t.setGroup$$module$build$src$core$events$utils(i),this.snapToGrid(),t.setGroup$$module$build$src$core$events$utils(!1)},t.config$$module$build$src$core$config.bumpDelay/2),this.bumpNeighbours()}positionNearConnection(i,a,p){if(i.type===zn.NEXT_STATEMENT||i.type===zn.INPUT_VALUE){let w=a.x;a=a.y,w+=p.x-i.getOffsetInBlock().x,a+=p.y-i.getOffsetInBlock().y,this.moveBy(w,a)}}getChildren(i){return super.getChildren(i)}queueRender(){return Qo(this)}render(){this.queueRender(),xi()}renderEfficiently(){this.rendered=!0,te(),this.isCollapsed()&&this.updateCollapsed_(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),me(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const i of this.inputList){const a=i.connection;a&&a.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Ca.LOCAL_MARKER).draw();for(const i of this.inputList)for(const a of i.fieldRow)a.updateMarkers_()}setCursorSvg(i){this.pathObject.setCursorSvg(i)}setMarkerSvg(i){this.pathObject.setMarkerSvg(i)}getHeightWidth(){let i=this.height,a=this.width;var p=this.getNextBlock();if(p){p=p.getHeightWidth();const w=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;i+=p.height-w,a=Math.max(a,p.width)}return{height:i,width:a}}fadeForReplacement(i){this.pathObject.updateReplacementFade(i)}highlightShapeForInput(i,a){this.pathObject.updateShapeForInputHighlight(i,a)}};Dp.INLINE=-1,Dp.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var IT=class{constructor(){}onDragEnter(i){}onDragOver(i){}onDragExit(i){}onDrop(i){}getClientRect(){return null}shouldPreventMove(i){return!1}},Uv=class extends IT{constructor(){super(),this.wouldDelete_=!1}wouldDelete(i,a){return i instanceof Dp?(i=!i.getParent()&&i.isDeletable(),this.updateWouldDelete_(i&&!a)):this.updateWouldDelete_(i.isDeletable()),this.wouldDelete_}updateWouldDelete_(i){this.wouldDelete_=i}},RT=class extends Uv{constructor(i){super(),this.workspace=i,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(i=new Hi({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(i.toolboxPosition=this.workspace.toolboxPosition===pr.TOP?pr.BOTTOM:pr.TOP,this.flyout=new(y(Ft.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(i)):(i.toolboxPosition=this.workspace.toolboxPosition===pr.RIGHT?pr.LEFT:pr.RIGHT,this.flyout=new(y(Ft.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(i)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=se(Ve.G,{class:"blocklyTrash"});let i;const a=String(Math.random()).substring(2);i=se(Ve.CLIPPATH,{id:"blocklyTrashBodyClipPath"+a},this.svgGroup),se(Ve.RECT,{width:N0,height:Hv,y:D0},i);const p=se(Ve.IMAGE,{width:Ru.width,x:-Eb,height:Ru.height,y:-xb,"clip-path":"url(#blocklyTrashBodyClipPath"+a+")"},this.svgGroup);return p.setAttributeNS(Zs,"xlink:href",this.workspace.options.pathToMedia+Ru.url),i=se(Ve.CLIPPATH,{id:"blocklyTrashLidClipPath"+a},this.svgGroup),se(Ve.RECT,{width:N0,height:D0},i),this.svgLid=se(Ve.IMAGE,{width:Ru.width,x:-Eb,height:Ru.height,y:-xb,"clip-path":"url(#blocklyTrashLidClipPath"+a+")"},this.svgGroup),this.svgLid.setAttributeNS(Zs,"xlink:href",this.workspace.options.pathToMedia+Ru.url),He(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),He(this.svgGroup,"pointerup",this,this.click),He(p,"pointerover",this,this.mouseOver),He(p,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(Ke(this.flyout.createDom(Ve.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[gl.Capability.AUTOHIDEABLE,gl.Capability.DELETE_AREA,gl.Capability.DRAG_TARGET,gl.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&pt(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var i=this.contents.map(function(p){return JSON.parse(p)}),a=this.workspace.getParentSvg().style;a.cursor="wait",setTimeout(()=>{let p;(p=this.flyout)==null||p.show(i),a.cursor="";let w;(w=this.workspace.scrollbar)==null||w.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var i;(i=this.flyout)==null||i.hide();var a;(a=this.workspace.scrollbar)==null||a.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(i){!i&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(i,a){if(this.initialized){var p=Ss(this.workspace,i);i=Yr(p,new eo(N0,Hv+D0),wb,P0,i,this.workspace),a=Oa(i,P0,p.vertical===Ja.TOP?Fd.DOWN:Fd.UP,a),this.top=a.top,this.left=a.left;var w;(w=this.svgGroup)==null||w.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new Oi(this.top,this.top+Hv+D0,this.left,this.left+N0)}getClientRect(){if(!this.svgGroup)return null;var i=this.svgGroup.getBoundingClientRect();const a=i.top+xb-B0;return i=i.left+Eb-B0,new Oi(a,a+D0+Hv+2*B0,i,i+N0+2*B0)}onDragOver(i){this.setLidOpen(this.wouldDelete_)}onDragExit(i){this.setLidOpen(!1)}onDrop(i){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(i){this.isLidOpen!==i&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=i,this.animateLid())}animateLid(){const i=OE;var a=1/(i+1);this.lidOpen+=this.isLidOpen?a:-a,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Oo),a=kT+this.lidOpen*(LE-kT),this.svgGroup&&(this.svgGroup.style.opacity=`${a}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),F_/i))}setLidAngle(i){const a=this.workspace.toolboxPosition===pr.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let p;(p=this.svgLid)==null||p.setAttribute("transform","rotate("+(a?-i:i)+","+(a?4:N0-4)+","+(D0-2)+")")}setMinOpenness(i){this.minOpenness=i,this.isLidOpen||this.setLidAngle(i*Oo)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(i){i=new(Ie(Pl))(i,this.workspace.id),ue(i)}blockMouseDownWhenOpenable(i){!this.contentsIsOpen()&&this.hasContents()&&i.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(i){if(!(0>=this.workspace.options.maxTrashcanContents||i.type!==t.DELETE$$module$build$src$core$events$utils||i.type!==t.DELETE$$module$build$src$core$events$utils||i.wasShadow)){if(!i.oldJson)throw Error("Encountered a delete event without proper oldJson");if(i=JSON.stringify(this.cleanBlockJson(i.oldJson)),this.contents.indexOf(i)===-1){for(this.contents.unshift(i);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(kE)}}}cleanBlockJson(i){function a(p){if(p){if(delete p.id,delete p.x,delete p.y,delete p.enabled,p.icons&&p.icons.comment){var w=p.icons.comment;delete w.height,delete w.width,delete w.pinned}w=p.inputs;for(var k in w){var j=w[k];const ve=j.block;j=j.shadow,ve&&a(ve),j&&a(j)}p.next&&(k=p.next,p=k.block,k=k.shadow,p&&a(p),k&&a(k))}}return i=JSON.parse(JSON.stringify(i)),a(i),Object.assign({},{kind:"BLOCK"},i)}},N0=47,Hv=44,D0=16,P0=20,wb=20,B0=10,Eb=0,xb=32,kE=.1,F_=80,OE=4,kT=.4,LE=.8,Oo=45,Ji=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(i,a){if(this.shortcuts.get(i.name)&&!a)throw Error(`Shortcut named "${i.name}" already exists.`);if(this.shortcuts.set(i.name,i),(a=i.keyCodes)&&0<a.length)for(let p=0;p<a.length;p++)this.addKeyMapping(a[p],i.name,!!i.allowCollision)}unregister(i){return this.shortcuts.get(i)?(this.removeAllKeyMappings(i),this.shortcuts.delete(i),!0):(console.warn(`Keyboard shortcut named "${i}" not found.`),!1)}addKeyMapping(i,a,p){i=`${i}`;const w=this.keyMap.get(i);if(w&&!p)throw Error(`Shortcut named "${a}" collides with shortcuts "${w}"`);w&&p?w.unshift(a):this.keyMap.set(i,[a])}removeKeyMapping(i,a,p){const w=this.keyMap.get(i);if(!w)return p||console.warn(`No keyboard shortcut named "${a}" registered with key code "${i}"`),!1;const k=w.indexOf(a);return-1<k?(w.splice(k,1),w.length===0&&this.keyMap.delete(i),!0):(p||console.warn(`No keyboard shortcut named "${a}" registered with key code "${i}"`),!1)}removeAllKeyMappings(i){for(const a of this.keyMap.keys())this.removeKeyMapping(a,i,!0)}setKeyMap(i){this.keyMap.clear();for(const a in i)this.keyMap.set(a,i[a])}getKeyMap(){const i=Object.create(null);for(const[a,p]of this.keyMap)i[a]=p;return i}getRegistry(){const i=Object.create(null);for(const[a,p]of this.shortcuts)i[a]=p;return Il(Object.create(null),i)}onKeyDown(i,a){var p=this.serializeKeyEvent_(a);if(p=this.getShortcutNamesByKeyCode(p),!p)return!1;for(let w=0,k;k=p[w];w++){const j=this.shortcuts.get(k);let ve,Ue;if((ve=j)==null||!ve.preconditionFn||(Ue=j)!=null&&Ue.preconditionFn(i)){let Yt,jn;if((Yt=j)!=null&&Yt.callback&&((jn=j)!=null&&jn.callback(i,a,j)))return!0}}return!1}getShortcutNamesByKeyCode(i){return this.keyMap.get(i)||[]}getKeyCodesByShortcutName(i){const a=[];for(const[p,w]of this.keyMap)-1<w.indexOf(i)&&a.push(p);return a}serializeKeyEvent_(i){let a="";for(const p in Ji.modifierKeys)i.getModifierState(p)&&(a!==""&&(a+="+"),a+=p);return a!==""&&i.keyCode?a=a+"+"+i.keyCode:i.keyCode&&(a=String(i.keyCode)),a}checkModifiers_(i){for(let a=0,p;p=i[a];a++)if(!(p in Ji.modifierKeys))throw Error(p+" is not a valid modifier key.")}createSerializedKey(i,a){let p="";if(a){this.checkModifiers_(a);for(const w in Ji.modifierKeys)-1<a.indexOf(Ji.modifierKeys[w])&&(p!==""&&(p+="+"),p+=w)}return p!==""&&i?p=p+"+"+i:i&&(p=`${i}`),p}};Ji.registry=new Ji,function(i){i=i.modifierKeys||(i.modifierKeys={}),i[i.Shift=16]="Shift",i[i.Control=17]="Control",i[i.Alt=18]="Alt",i[i.Meta=91]="Meta"}(Ji||(Ji={}));var Pp;(function(i){i.ESCAPE="escape",i.DELETE="delete",i.COPY="copy",i.CUT="cut",i.PASTE="paste",i.UNDO="undo",i.REDO="redo"})(Pp||(Pp={}));var z_=null,Gv=null;$s();var Bp={};Bp.names=Pp,Bp.registerCopy=Kr,Bp.registerCut=ou,Bp.registerDefaultShortcuts=$s,Bp.registerDelete=vc,Bp.registerEscape=_d,Bp.registerPaste=Ju,Bp.registerRedo=Va,Bp.registerUndo=ls;var U_=class{constructor(i,a){this.procedureModelClass=i,this.parameterModelClass=a,this.priority=Ip}save(i){return i=i.getProcedureMap().getProcedures().map(a=>Cs(a)),i.length?i:null}load(i,a){const p=a.getProcedureMap();for(const w of i)p.add(_i(this.procedureModelClass,this.parameterModelClass,w,a))}clear(i){i.getProcedureMap().clear()}},F0={};F0.ProcedureSerializer=U_,F0.loadParameter=ja,F0.loadProcedure=_i,F0.saveParameter=Kc,F0.saveProcedure=Cs;var z0=class{constructor(){this.priority=b0}save(i){const a=[];for(const p of i.getAllVariables())i={name:p.name,id:p.getId()},p.type&&(i.type=p.type),a.push(i);return a.length?a:null}load(i,a){for(const p of i)a.createVariable(p.name,p.type,p.id)}clear(i){i.getVariableMap().clear()}};Rs("variables",new z0);var OT={};OT.VariableSerializer=z0;var $b={};$b.load=ff,$b.save=yc;var NE={blocks:lm,exceptions:Ap,priorities:am,procedures:F0,registry:S0,variables:OT,workspaces:$b},Cb=class{constructor(i,a,p,w,k){this.workspace=i,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,a=a===void 0?!0:a,p=p===void 0?!0:p;const j=a&&p;a&&(this.hScroll=new xa(i,!0,j,w,k)),p&&(this.vScroll=new xa(i,!1,j,w,k)),j&&(this.corner_=se(Ve.RECT,{height:xa.scrollbarThickness,width:xa.scrollbarThickness,class:"blocklyScrollbarBackground"}),Ke(this.corner_,i.getBubbleCanvas()))}dispose(){pt(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const i=this.workspace.getMetrics();if(i){var a=!1,p=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===i.viewWidth&&this.oldHostMetrics_.viewHeight===i.viewHeight&&this.oldHostMetrics_.absoluteTop===i.absoluteTop&&this.oldHostMetrics_.absoluteLeft===i.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===i.scrollWidth&&this.oldHostMetrics_.viewLeft===i.viewLeft&&this.oldHostMetrics_.scrollLeft===i.scrollLeft||(a=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===i.scrollHeight&&this.oldHostMetrics_.viewTop===i.viewTop&&this.oldHostMetrics_.scrollTop===i.scrollTop||(p=!0)):p=a=!0,a||p){try{t.disable$$module$build$src$core$events$utils(),this.hScroll&&a&&this.hScroll.resize(i),this.vScroll&&p&&this.vScroll.resize(i)}finally{t.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==i.viewWidth||this.oldHostMetrics_.absoluteLeft!==i.absoluteLeft){let w;(w=this.corner_)==null||w.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==i.viewHeight||this.oldHostMetrics_.absoluteTop!==i.absoluteTop){let w;(w=this.corner_)==null||w.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=i}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(i,a){this.hScroll&&this.hScroll.setOrigin(i,a),this.vScroll&&this.vScroll.setOrigin(i,a)}set(i,a,p){this.hScroll&&this.hScroll.set(i,!1),this.vScroll&&this.vScroll.set(a,!1),(p||p===void 0)&&(i={},this.hScroll&&(i.x=this.hScroll.getRatio_()),this.vScroll&&(i.y=this.vScroll.getRatio_()),this.workspace.setMetrics(i))}setX(i){this.hScroll&&this.hScroll.set(i,!0)}setY(i){this.vScroll&&this.vScroll.set(i,!0)}setContainerVisible(i){this.hScroll&&this.hScroll.setContainerVisible(i),this.vScroll&&this.vScroll.setContainerVisible(i)}isVisible(){let i=!1;return this.hScroll&&(i=this.hScroll.isVisible()),this.vScroll&&(i=i||this.vScroll.isVisible()),i}setVisible(i){this.hScroll&&this.hScroll.setVisibleInternal(i),this.vScroll&&this.vScroll.setVisibleInternal(i)}resizeContent(i){this.hScroll&&this.hScroll.resizeContentHorizontal(i),this.vScroll&&this.vScroll.resizeContentVertical(i)}resizeView(i){this.hScroll&&this.hScroll.resizeViewHorizontal(i),this.vScroll&&this.vScroll.resizeViewVertical(i)}},H_=class{constructor(i){this.workspace_=i}getDimensionsPx_(i){let a=0,p=0;return i&&(a=i.getWidth(),p=i.getHeight()),new eo(a,p)}getFlyoutMetrics(i){return i=this.getDimensionsPx_(this.workspace_.getFlyout(i)),{width:i.width,height:i.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const i=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:i.width,height:i.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let i=0,a=0;const p=this.getToolboxMetrics(),w=this.getFlyoutMetrics(),k=!!this.workspace_.getToolbox();var j;const ve=!((j=this.workspace_.getFlyout())!=null&&j.autoClose);j=k?p.position:w.position;const Ue=j===pr.TOP;return j===pr.LEFT&&(k&&(i+=p.width),ve&&(i+=w.width)),Ue&&(k&&(a+=p.height),ve&&(a+=w.height)),{top:a,left:i}}getViewMetrics(i){i=i?this.workspace_.scale:1;const a=this.getSvgMetrics(),p=this.getToolboxMetrics(),w=this.getFlyoutMetrics(),k=!!this.workspace_.getToolbox();var j;const ve=!((j=this.workspace_.getFlyout())!=null&&j.autoClose);j=k?p.position:w.position;const Ue=j===pr.LEFT||j===pr.RIGHT;return(j===pr.TOP||j===pr.BOTTOM)&&(k&&(a.height-=p.height),ve&&(a.height-=w.height)),Ue&&(k&&(a.width-=p.width),ve&&(a.width-=w.width)),{height:a.height/i,width:a.width/i,top:-this.workspace_.scrollY/i,left:-this.workspace_.scrollX/i}}getContentMetrics(i){i=i?1:this.workspace_.scale;const a=this.workspace_.getBlocksBoundingBox();return{height:(a.bottom-a.top)*i,width:(a.right-a.left)*i,top:a.top*i,left:a.left*i}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(i){if(!this.hasFixedEdges())return{};const a=this.workspace_.isMovableHorizontally(),p=this.workspace_.isMovableVertically();i=i||this.getViewMetrics(!1);const w={};return p||(w.top=i.top,w.bottom=i.top+i.height),a||(w.left=i.left,w.right=i.left+i.width),w}getPaddedContent_(i,a){const p=a.top+a.height,w=a.left+a.width,k=i.width;i=i.height;const j=k/2,ve=i/2;return{top:Math.min(a.top-ve,p-i),bottom:Math.max(p+ve,a.top+i),left:Math.min(a.left-j,w-k),right:Math.max(w+j,a.left+k)}}getScrollMetrics(i,a,p){i=i?this.workspace_.scale:1,a=a||this.getViewMetrics(!1);var w=p||this.getContentMetrics();p=this.getComputedFixedEdges_(a),a=this.getPaddedContent_(a,w),w=p.top!==void 0?p.top:a.top;const k=p.left!==void 0?p.left:a.left;return{top:w/i,left:k/i,width:((p.right!==void 0?p.right:a.right)-k)/i,height:((p.bottom!==void 0?p.bottom:a.bottom)-w)/i}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const i=this.getToolboxMetrics(),a=this.getFlyoutMetrics(!0),p=this.getSvgMetrics(),w=this.getAbsoluteMetrics(),k=this.getViewMetrics(),j=this.getContentMetrics(),ve=this.getScrollMetrics(!1,k,j);return{contentHeight:j.height,contentWidth:j.width,contentTop:j.top,contentLeft:j.left,scrollHeight:ve.height,scrollWidth:ve.width,scrollTop:ve.top,scrollLeft:ve.left,viewHeight:k.height,viewWidth:k.width,viewTop:k.top,viewLeft:k.left,absoluteTop:w.top,absoluteLeft:w.left,svgHeight:p.height,svgWidth:p.width,toolboxWidth:i.width,toolboxHeight:i.height,toolboxPosition:i.position,flyoutWidth:a.width,flyoutHeight:a.height}}};r(Ft.METRICS_MANAGER,Nl,H_);var LT=class extends d{constructor(i){super(),this.isBlank=!0,this.recordUndo=!1,this.type=Sa,this.isBlank=!!i,i&&(this.workspaceId=i.id)}};r(Ft.EVENT,Sa,LT);var Mb=class extends _{constructor(i,a,p){super(i?i.workspace.id:void 0),this.type=Vo,i&&(this.blockId=i.id,this.isStart=a,this.blocks=p)}toJson(){const i=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return i.isStart=this.isStart,i.blockId=this.blockId,i.blocks=this.blocks,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Mb),a.isStart=i.isStart,a.blockId=i.blockId,a.blocks=i.blocks,a}};r(Ft.EVENT,Vo,Mb);var Wv={};Wv.bumpIntoBounds=Eh,Wv.bumpIntoBoundsHandler=ia,Wv.bumpTopObjectsIntoBounds=Pn;var U0=class{constructor(i,a){this.connectionCandidate=this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.dragIconData_=[],this.draggingBlock_=i,this.workspace_=a,this.connectionPreviewer=new(y(Ft.CONNECTION_PREVIEWER,this.workspace_.options))(i),this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=tr(i,this.startXY_)}dispose(){this.dragIconData_.length=0,this.connectionPreviewer.dispose()}startDrag(i,a){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent_(),this.draggingBlock_.bringToFront(!0),te(),this.workspace_.setResizesEnabled(!1),Ua(),this.shouldDisconnect_(a)&&this.disconnectBlock_(a,i),this.draggingBlock_.setDragging(!0);let p;(p=this.workspace_.getLayerManager())==null||p.moveToDragLayer(this.draggingBlock_)}shouldDisconnect_(i){return!!(this.draggingBlock_.getParent()||i&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(i,a){this.draggingBlock_.unplug(i),i=this.pixelsToWorkspaceUnits_(a),i=_n.sum(this.startXY_,i),this.draggingBlock_.translate(i.x,i.y),Ks(this.draggingBlock_)}fireDragStartEvent_(){const i=new(Ie(Vo))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));ue(i)}drag(i,a){const p=this.draggingBlock_;this.moveBlock(p,a),this.updateDragTargets(i,p),this.wouldDeleteBlock_=this.wouldDeleteBlock(i,p,a),this.updateCursorDuringBlockDrag_(),this.updateConnectionPreview(p,a)}moveBlock(i,a){a=this.pixelsToWorkspaceUnits_(a),a=_n.sum(this.startXY_,a),i.moveDuringDrag(a)}updateDragTargets(i,a){if(i=this.workspace_.getDragTarget(i),this.dragTarget_!==i){let p;(p=this.dragTarget_)==null||p.onDragExit(a),i==null||i.onDragEnter(a)}i==null||i.onDragOver(a),this.dragTarget_=i}wouldDeleteBlock(i,a,p){return(i=this.workspace_.getDragTarget(i))&&this.workspace_.getComponentManager().hasCapability(i.id,gl.Capability.DELETE_AREA)?i.wouldDelete(a,!!this.getConnectionCandidate(a,p)):!1}updateConnectionPreview(i,a){a=this.pixelsToWorkspaceUnits_(a);const p=this.connectionCandidate,w=this.getConnectionCandidate(i,a);if(w){this.connectionCandidate=a=p&&this.currCandidateIsBetter(p,a,w)?p:w;var{local:k,neighbour:j}=a;k.type!==zn.OUTPUT_VALUE&&k.type!==zn.PREVIOUS_STATEMENT||!j.isConnected()||j.targetBlock().isInsertionMarker()||this.orphanCanConnectAtEnd(i,j.targetBlock(),k.type)?this.connectionPreviewer.previewConnection(k,j):this.connectionPreviewer.previewReplacement(k,j,j.targetBlock())}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(i,a,p){return!!fs.getConnectionForOrphanedConnection(i,p===zn.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}currCandidateIsBetter(i,a,p){const{local:w,neighbour:k}=i;i=new _n(w.x,w.y);const j=new _n(k.x,k.y);return a=_n.distance(_n.sum(i,a),j),p.distance>a-t.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(i,a){i=this.getLocalConnections(i);let p=this.connectionCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius,w=null;for(const k of i){const{connection:j,radius:ve}=k.closest(p,a);j&&(w={local:k,neighbour:j,distance:ve},p=ve)}return w}getLocalConnections(i){const a=i.getConnections_(!1),p=i.lastConnectionInStack(!0);return p&&p!==i.nextConnection&&a.push(p),a}endDrag(i,a){if(this.drag(i,a),this.fireDragEndEvent_(),me(),Ua(),this.connectionPreviewer.hidePreview(),i=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)||(i=this.getNewLocationAfterDrag_(a).delta),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),!this.maybeDeleteBlock_()){let p;(p=this.workspace_.getLayerManager())==null||p.moveOffDragLayer(this.draggingBlock_,ee),this.draggingBlock_.setDragging(!1),i?this.updateBlockAfterMove_():Eh(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)}this.connectionPreviewer.dispose(),this.workspace_.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}getNewLocationAfterDrag_(i){i=this.pixelsToWorkspaceUnits_(i);const a=_n.sum(this.startXY_,i);return{delta:i,newLocation:a}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),Xi.length=0,!0):!1}updateBlockAfterMove_(){this.fireMoveEvent_(),this.connectionCandidate?this.applyConnections(this.connectionCandidate):this.draggingBlock_.queueRender(),this.draggingBlock_.scheduleSnapAndBump()}applyConnections(i){const{local:a,neighbour:p}=i;if(a.connect(p),this.draggingBlock_.rendered){const w=a.isSuperior()?p:a,k=this.draggingBlock_.getRootBlock();vr().then(()=>{pa(w.getSourceBlock()),setTimeout(()=>{k.bringToFront()},0)})}}fireDragEndEvent_(){const i=new(Ie(Vo))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));ue(i)}updateToolboxStyle_(i){const a=this.workspace_.getToolbox();if(a){const p=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";i&&typeof a.removeStyle=="function"?a.removeStyle(p):i||typeof a.addStyle!="function"||a.addStyle(p)}}fireMoveEvent_(){if(!this.draggingBlock_.isDeadOrDying()){var i=new(Ie(t.MOVE$$module$build$src$core$events$utils))(this.draggingBlock_);i.setReason(["drag"]),i.oldCoordinate=this.startXY_,i.recordNew(),ue(i)}}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(i){return i=new _n(i.x/this.workspace_.scale,i.y/this.workspace_.scale),this.workspace_.isMutator&&i.scale(1/this.workspace_.options.parentWorkspace.scale),i}dragIcons_(){xe("Blockly.BlockDragger.prototype.dragIcons_","v10","v11")}getInsertionMarkers(){return this.workspace_.getAllBlocks().filter(i=>i.isInsertionMarker())}};r(Ft.BLOCK_DRAGGER,Nl,U0);var Sm={};Sm.Bubble=As,Sm.MiniWorkspaceBubble=gm,Sm.TextBubble=_m,Sm.TextInputBubble=la;var Ab=class extends vf{constructor(i,a,p,w){super(i),this.type=Ch,this.recordUndo=!1,i&&(this.name=a,this.oldValue=p,this.newValue=w)}toJson(){const i=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return i.name=this.name,i.oldValue=this.oldValue,i.newValue=this.newValue,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Ab),a.name=i.name,a.oldValue=i.oldValue,a.newValue=i.newValue,a}isNull(){return this.oldValue===this.newValue}run(i){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");i=i?this.newValue:this.oldValue,(a=a.getField(this.name))?a.setValue(i):console.warn("Can't set non-existent field: "+this.name)}};r(Ft.EVENT,Ch,Ab);var Ib=class extends vf{constructor(i){super(i),this.type=t.MOVE$$module$build$src$core$events$utils,i&&(i.isShadow()&&(this.recordUndo=!1),i=this.currentLocation_(),this.oldParentId=i.parentId,this.oldInputName=i.inputName,this.oldCoordinate=i.coordinate)}toJson(){const i=super.toJson();return i.oldParentId=this.oldParentId,i.oldInputName=this.oldInputName,this.oldCoordinate&&(i.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),i.newParentId=this.newParentId,i.newInputName=this.newInputName,this.newCoordinate&&(i.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(i.reason=this.reason),this.recordUndo||(i.recordUndo=this.recordUndo),i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Ib),a.oldParentId=i.oldParentId,a.oldInputName=i.oldInputName,i.oldCoordinate&&(p=i.oldCoordinate.split(","),a.oldCoordinate=new _n(Number(p[0]),Number(p[1]))),a.newParentId=i.newParentId,a.newInputName=i.newInputName,i.newCoordinate&&(p=i.newCoordinate.split(","),a.newCoordinate=new _n(Number(p[0]),Number(p[1]))),i.reason!==void 0&&(a.reason=i.reason),i.recordUndo!==void 0&&(a.recordUndo=i.recordUndo),a}recordNew(){const i=this.currentLocation_();this.newParentId=i.parentId,this.newInputName=i.inputName,this.newCoordinate=i.coordinate}setReason(i){this.reason=i}currentLocation_(){var i=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var a=i.getBlockById(this.blockId);if(!a)throw Error("The block associated with the block move event could not be found");i={};const p=a.getParent();return p?(i.parentId=p.id,(a=p.getInputWithBlock(a))&&(i.inputName=a.name)):i.coordinate=a.getRelativeToSurfaceXY(),i}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&_n.equals(this.oldCoordinate,this.newCoordinate)}run(i){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var p=a.getBlockById(this.blockId);if(p){var w=i?this.newParentId:this.oldParentId,k=i?this.newInputName:this.oldInputName;if(i=i?this.newCoordinate:this.oldCoordinate,w){var j=a.getBlockById(w);if(!j){console.warn("Can't connect to non-existent block: "+w);return}}if(p.getParent()&&p.unplug(),i)k=p.getRelativeToSurfaceXY(),p.moveBy(i.x-k.x,i.y-k.y,this.reason);else{a=p.outputConnection,(!a||p.previousConnection&&p.previousConnection.isConnected())&&(a=p.previousConnection);let ve,Ue;p=(Ue=a)==null?void 0:Ue.type,k?(p=j.getInput(k))&&(ve=p.connection):p===zn.PREVIOUS_STATEMENT&&(ve=j.nextConnection),ve&&a?a.connect(ve):console.warn("Can't connect to non-existent input: "+k)}}else console.warn("Can't move non-existent block: "+this.blockId)}};r(Ft.EVENT,t.MOVE$$module$build$src$core$events$utils,Ib);var Rb=class extends _{constructor(i,a,p){super(i?i.workspace.id:void 0),this.type=vo,i&&(this.blockId=i.id,this.isOpen=a,this.bubbleType=p)}toJson(){const i=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return i.isOpen=this.isOpen,i.bubbleType=this.bubbleType,i.blockId=this.blockId||"",i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Rb),a.isOpen=i.isOpen,a.bubbleType=i.bubbleType,a.blockId=i.blockId,a}},kb;(function(i){i.MUTATOR="mutator",i.COMMENT="comment",i.WARNING="warning"})(kb||(kb={})),r(Ft.EVENT,vo,Rb);var ig=class extends d{constructor(i){super(),this.isBlank=!i,i&&(this.commentId=i.id,this.workspaceId=i.workspace.id,this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=ae())}toJson(){const i=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return i.commentId=this.commentId,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new ig),a.commentId=i.commentId,a}static CommentCreateDeleteHelper(i,a){var p=i.getEventWorkspace_();if(a){if(a=t.createElement$$module$build$src$core$utils$xml("xml"),!i.xml)throw Error("Ecountered a comment event without proper xml");a.appendChild(i.xml),t.domToWorkspace$$module$build$src$core$xml(a,p)}else{if(!i.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(p=p.getCommentById(i.commentId))?p.dispose():console.warn("Can't uncreate non-existent comment: "+i.commentId)}}},Ob=class extends ig{constructor(i,a,p){super(i),this.type=yd,i&&(this.oldContents_=typeof a>"u"?"":a,this.newContents_=typeof p>"u"?"":p)}toJson(){const i=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return i.oldContents=this.oldContents_,i.newContents=this.newContents_,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Ob),a.oldContents_=i.oldContents,a.newContents_=i.newContents,a}isNull(){return this.oldContents_===this.newContents_}run(i){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){var p=i?this.newContents_:this.oldContents_;if(!p)throw Error(i?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");a.setContent(p)}else console.warn("Can't change non-existent comment: "+this.commentId)}};r(Ft.EVENT,yd,Ob);var Lb=class extends ig{constructor(i){super(i),this.type=cs,i&&(this.xml=i.toXmlWithXY())}toJson(){const i=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return i.xml=qi(this.xml),i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Lb),a.xml=t.textToDom$$module$build$src$core$utils$xml(i.xml),a}run(i){ig.CommentCreateDeleteHelper(this,i)}};r(Ft.EVENT,cs,Lb);var Nb=class extends ig{constructor(i){super(i),this.type=qh,i&&(this.xml=i.toXmlWithXY())}run(i){ig.CommentCreateDeleteHelper(this,!i)}toJson(){const i=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return i.xml=qi(this.xml),i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Nb),a.xml=t.textToDom$$module$build$src$core$utils$xml(i.xml),a}};r(Ft.EVENT,qh,Nb);var Db=class extends ig{constructor(i){super(i),this.type=Ta,i&&(this.comment_=i,this.oldCoordinate_=i.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setOldCoordinate(i){this.oldCoordinate_=i}toJson(){const i=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return i.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,i.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Db),p=i.oldCoordinate.split(","),a.oldCoordinate_=new _n(Number(p[0]),Number(p[1])),p=i.newCoordinate.split(","),a.newCoordinate_=new _n(Number(p[0]),Number(p[1])),a}isNull(){return _n.equals(this.oldCoordinate_,this.newCoordinate_)}run(i){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){if(i=i?this.newCoordinate_:this.oldCoordinate_,!i)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var p=a.getRelativeToSurfaceXY();a.moveBy(i.x-p.x,i.y-p.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};r(Ft.EVENT,Ta,Db);var Pb=class extends _{constructor(i,a,p){super(p),this.type=Xa,this.oldItem=i??void 0,this.newItem=a??void 0}toJson(){const i=super.toJson();return i.oldItem=this.oldItem,i.newItem=this.newItem,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Pb),a.oldItem=i.oldItem,a.newItem=i.newItem,a}};r(Ft.EVENT,Xa,Pb),t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.disable$$module$build$src$core$events$utils,t.enable$$module$build$src$core$events$utils,t.getGroup$$module$build$src$core$events$utils,t.setGroup$$module$build$src$core$events$utils;var Qn={};Qn.Abstract=d,Qn.BLOCK_CHANGE=t.CHANGE$$module$build$src$core$events$utils,Qn.BLOCK_CREATE=t.CREATE$$module$build$src$core$events$utils,Qn.BLOCK_DELETE=t.DELETE$$module$build$src$core$events$utils,Qn.BLOCK_DRAG=Vo,Qn.BLOCK_FIELD_INTERMEDIATE_CHANGE=Ch,Qn.BLOCK_MOVE=t.MOVE$$module$build$src$core$events$utils,Qn.BUBBLE_OPEN=vo,Qn.BUMP_EVENTS=Qh,Qn.BlockBase=vf,Qn.BlockChange=Jr,Qn.BlockCreate=x_,Qn.BlockDelete=bb,Qn.BlockDrag=Mb,Qn.BlockFieldIntermediateChange=Ab,Qn.BlockMove=Ib,Qn.BubbleOpen=Rb,Qn.BubbleType=kb,Qn.CHANGE=t.CHANGE$$module$build$src$core$events$utils,Qn.CLICK=rc,Qn.COMMENT_CHANGE=yd,Qn.COMMENT_CREATE=cs,Qn.COMMENT_DELETE=qh,Qn.COMMENT_MOVE=Ta,Qn.CREATE=t.CREATE$$module$build$src$core$events$utils,Qn.Click=$,Qn.ClickTarget=I,Qn.CommentBase=ig,Qn.CommentChange=Ob,Qn.CommentCreate=Lb,Qn.CommentDelete=Nb,Qn.CommentMove=Db,Qn.DELETE=t.DELETE$$module$build$src$core$events$utils,Qn.FINISHED_LOADING=Sa,Qn.FinishedLoading=LT,Qn.MARKER_MOVE=Dl,Qn.MOVE=t.MOVE$$module$build$src$core$events$utils,Qn.MarkerMove=L_,Qn.SELECTED=_o,Qn.Selected=Hd,Qn.THEME_CHANGE=uu,Qn.TOOLBOX_ITEM_SELECT=Xa,Qn.TRASHCAN_OPEN=Pl,Qn.ThemeChange=w0,Qn.ToolboxItemSelect=Pb,Qn.TrashcanOpen=yb,Qn.UI=Sc,Qn.UiBase=_,Qn.VAR_CREATE=go,Qn.VAR_DELETE=Iu,Qn.VAR_RENAME=eh,Qn.VIEWPORT_CHANGE=ni,Qn.VarBase=zd,Qn.VarCreate=Ud,Qn.VarDelete=gb,Qn.VarRename=_b,Qn.ViewportChange=E0,Qn.clearPendingUndo=re,Qn.disable=t.disable$$module$build$src$core$events$utils,Qn.disableOrphans=qe,Qn.enable=t.enable$$module$build$src$core$events$utils,Qn.filter=J,Qn.fire=ue,Qn.fromJson=Fe,Qn.get=Ie,Qn.getDescendantIds=Te,Qn.getGroup=t.getGroup$$module$build$src$core$events$utils,Qn.getRecordUndo=ae,Qn.isEnabled=ie,Qn.setGroup=t.setGroup$$module$build$src$core$events$utils,Qn.setRecordUndo=he;var NT=class extends k_{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(i){super.setFontConstants_(i),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(i){super.setDynamicProperties_(i),this.SELECTED_GLOW_COLOUR=i.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const a=Number(i.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=a&&!isNaN(a)?a:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=i.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(i=Number(i.getComponentStyle("replacementGlowSize")))&&!isNaN(i)?i:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&pt(this.selectedGlowFilter),this.replacementGlowFilter&&pt(this.replacementGlowFilter)}makeStartHat(){const i=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,p=Ws("c",[Kn(25,-i),Kn(71,-i),Kn(a,0)]);return{height:i,width:a,path:p}}makeHexagonal(){function i(p,w,k){var j=p/2;return j=j>a?a:j,k=k?-1:1,p=(w?-1:1)*p/2,iu(-k*j,p)+iu(k*j,p)}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(p){return p/=2,p>a?a:p},height(p){return p},connectionOffsetY(p){return p/2},connectionOffsetX(p){return-p},pathDown(p){return i(p,!1,!1)},pathUp(p){return i(p,!0,!1)},pathRightDown(p){return i(p,!1,!0)},pathRightUp(p){return i(p,!1,!0)}}}makeRounded(){function i(w,k,j){const ve=w>p?w-p:0;w=(w>p?p:w)/2;const Ue=j===k?"0":"1";return mi("a","0 0,"+Ue,w,Kn((j?1:-1)*w,(k?-1:1)*w))+xn("v",(k?-1:1)*ve)+mi("a","0 0,"+Ue,w,Kn((j?-1:1)*w,(k?-1:1)*w))}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,p=2*a;return{type:this.SHAPES.ROUND,isDynamic:!0,width(w){return w/=2,w>a?a:w},height(w){return w},connectionOffsetY(w){return w/2},connectionOffsetX(w){return-w},pathDown(w){return i(w,!1,!1)},pathUp(w){return i(w,!0,!1)},pathRightDown(w){return i(w,!1,!0)},pathRightUp(w){return i(w,!1,!0)}}}makeSquared(){function i(p,w,k){p-=2*a;const j=k===w?"0":"1";return mi("a","0 0,"+j,a,Kn((k?1:-1)*a,(w?-1:1)*a))+xn("v",(w?-1:1)*p)+mi("a","0 0,"+j,a,Kn((k?-1:1)*a,(w?-1:1)*a))}const a=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(p){return a},height(p){return p},connectionOffsetY(p){return p/2},connectionOffsetX(p){return-p},pathDown(p){return i(p,!1,!1)},pathUp(p){return i(p,!0,!1)},pathRightDown(p){return i(p,!1,!0)},pathRightUp(p){return i(p,!1,!0)}}}shapeFor(i){let a=i.getCheck();switch(!a&&i.targetConnection&&(a=i.targetConnection.getCheck()),i.type){case zn.INPUT_VALUE:case zn.OUTPUT_VALUE:if(i=i.getSourceBlock().getOutputShape(),i!==null)switch(i){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return a&&a.indexOf("Boolean")!==-1?this.HEXAGONAL:a&&a.indexOf("Number")!==-1?this.ROUNDED:(a&&a.indexOf("String"),this.ROUNDED);case zn.PREVIOUS_STATEMENT:case zn.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function i(jn){return Ws("c",[Kn(jn*k/2,0),Kn(jn*k*3/4,ve/2),Kn(jn*k,ve)])+Uo([Kn(jn*k,j)])+Ws("c",[Kn(jn*k/4,ve/2),Kn(jn*k/2,ve),Kn(jn*k,ve)])+xn("h",jn*w)+Ws("c",[Kn(jn*k/2,0),Kn(jn*k*3/4,-(ve/2)),Kn(jn*k,-ve)])+Uo([Kn(jn*k,-j)])+Ws("c",[Kn(jn*k/4,-(ve/2)),Kn(jn*k/2,-ve),Kn(jn*k,-ve)])}const a=this.NOTCH_WIDTH,p=this.NOTCH_HEIGHT,w=a/3,k=w/3,j=p/2,ve=j/2,Ue=i(1),Yt=i(-1);return{type:this.SHAPES.NOTCH,width:a,height:p,pathLeft:Ue,pathRight:Yt}}makeInsideCorners(){const i=this.CORNER_RADIUS,a=mi("a","0 0,0",i,Kn(-i,i)),p=mi("a","0 0,1",i,Kn(-i,i)),w=mi("a","0 0,0",i,Kn(i,i)),k=mi("a","0 0,1",i,Kn(i,i));return{width:i,height:i,pathTop:a,pathBottom:w,rightWidth:i,rightHeight:i,pathTopRight:p,pathBottomRight:k}}generateSecondaryColour_(i){return Vc("#000",i,.15)||i}generateTertiaryColour_(i){return Vc("#000",i,.25)||i}createDom(i,a,p){super.createDom(i,a,p),i=se(Ve.DEFS,{},i),a=se(Ve.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},i),se(Ve.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},a),p=se(Ve.FECOMPONENTTRANSFER,{result:"outBlur"},a),se(Ve.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},p),se(Ve.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},a),se(Ve.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},a),this.selectedGlowFilterId=a.id,this.selectedGlowFilter=a,i=se(Ve.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},i),se(Ve.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},i),a=se(Ve.FECOMPONENTTRANSFER,{result:"outBlur"},i),se(Ve.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),se(Ve.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},i),se(Ve.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},i),se(Ve.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},i),this.replacementGlowFilterId=i.id,this.replacementGlowFilter=i}getCSS_(i){return[`${i} .blocklyText,`,`${i} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${i} .blocklyText {`,"fill: #fff;","}",`${i} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${i} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${i} .blocklyNonEditableText>text,`,`${i} .blocklyEditableText>text,`,`${i} .blocklyNonEditableText>g>text,`,`${i} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${i} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${i} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${i} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${i} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${i} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${i} .blocklyDropdownText {`,"fill: #fff !important;","}",`${i}.blocklyWidgetDiv .goog-menuitem,`,`${i}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${i}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${i} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${i} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${i} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},DT=class extends O_{constructor(i,a){super(i,a)}draw(){const i=this.block_.pathObject;i.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),i.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&i.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(i.outputShapeType=this.info_.outputConnection.shape.type),i.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(i){if(!(0>=i.height)){if(ut.isSpacer(i)){const w=i.precedesStatement;var a=i.followsStatement;if(w||a){const k=this.constants_.INSIDE_CORNERS;var p=k.rightHeight;p=i.height-(w?p:0),a=a?k.pathBottomRight:"",i=0<p?xn("V",i.yPos+p):"",this.outlinePath_+=a+i+(w?k.pathTopRight:"");return}}this.outlinePath_+=xn("V",i.yPos+i.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const i=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Ui(i.xPos,this.info_.startY),this.outlinePath_+=xn("h",i.width)}drawFlatBottom_(){const i=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=xn("V",i.baseline),this.outlinePath_+=xn("h",-i.width)}drawInlineInput_(i){this.positionInlineInputConnection_(i);const a=i.input.name;i.connectedBlock||this.info_.isInsertionMarker||(i=Js(i.xPos+i.connectionWidth,i.centerline-i.height/2)+this.getInlineInputPath(i),this.block_.pathObject.setOutlinePath(a,i))}getInlineInputPath(i){const a=i.width-2*i.connectionWidth,p=i.height;return xn("h",a)+i.shape.pathRightDown(p)+xn("h",-a)+i.shape.pathUp(p)+"z"}drawStatementInput_(i){var a=i.getLastInput();const p=a.xPos+a.notchOffset+a.shape.width,w=this.constants_.INSIDE_CORNERS,k=a.shape.pathRight+xn("h",-(a.notchOffset-w.width))+w.pathTop,j=i.height-2*w.height;a=w.pathBottom+xn("h",a.notchOffset-w.width)+(a.connectedBottomNextConnection?"":a.shape.pathLeft),this.outlinePath_+=xn("H",p)+k+xn("v",j)+a+xn("H",i.xPos+i.width),this.positionStatementInputConnection_(i)}drawConnectionHighlightPath(i){const a=i.connectionModel;if(a.type===zn.NEXT_STATEMENT||a.type===zn.PREVIOUS_STATEMENT||a.type===zn.OUTPUT_VALUE&&!i.isDynamicShape)super.drawConnectionHighlightPath(i);else{i=a.type===zn.INPUT_VALUE?Js(i.connectionWidth,-i.height/2)+this.getInlineInputPath(i):Js(i.width,-i.height/2)+i.shape.pathDown(i.height);var p=a.getSourceBlock(),w,k;(k=(w=p.pathObject).addConnectionHighlight)==null||k.call(w,a,i,a.getOffsetInBlock(),p.RTL)}}},Bg=class extends Gi{constructor(i,a,p,w,k,j,ve){if(super(Gi.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",p=Number(Vr(p)),a=Number(Vr(a)),isNaN(p)||isNaN(a))throw Error("Height and width values of an image field must cast to numbers.");if(0>=p||0>=a)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new eo(a,p+Bg.Y_PADDING),this.imageHeight=p,typeof k=="function"&&(this.clickHandler=k),i!==Gi.SKIP_SETUP&&(ve?this.configure_(ve):(this.flipRtl=!!j,this.altText=Vr(w)||""),this.setValue(Vr(i)))}configure_(i){super.configure_(i),i.flipRtl&&(this.flipRtl=i.flipRtl),i.alt&&(this.altText=Vr(i.alt))}initView(){this.imageElement=se(Ve.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(Zs,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(i){return typeof i!="string"?null:i}doValueUpdate_(i){this.value_=i,this.imageElement&&this.imageElement.setAttributeNS(Zs,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(i){i!==this.altText&&(this.altText=i||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(i){this.clickHandler=i}getText_(){return this.altText}static fromJson(i){if(!i.src||!i.width||!i.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(i.src,i.width,i.height,void 0,void 0,void 0,i)}};Bg.Y_PADDING=1,xs("field_image",Bg),Bg.prototype.DEFAULT_VALUE="";var G_=class extends Gi{constructor(i,a,p){super(Gi.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",i!==Gi.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(i),a&&this.setValidator(a))}configure_(i){super.configure_(i),i.spellcheck!==void 0&&(this.spellcheck_=i.spellcheck)}initView(){if(!this.getSourceBlock())throw new ko;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const i=this.getSourceBlock();if(!i)throw new ko;let a;return this.fullBlockClickTarget_=!((a=this.getConstants())==null||!a.FULL_BLOCK_FIELDS)&&i.isSimpleReporter()}doValueInvalid_(i){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,i=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&ie()&&ue(new(Ie(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,i,this.value_)))}doValueUpdate_(i){this.isTextValid_=this.isDirty_=!0,this.value_=i}applyColour(){const i=this.getSourceBlock();if(!i)throw new ko;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",i.style.colourTertiary)):(this.borderRect_.style.display="none",i.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let i;return(i=this.getConstants())!=null&&i.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var i=this.htmlInput_;this.isTextValid_?(St(i,"blocklyInvalidInput"),Er(i,To.INVALID,!1)):($e(i,"blocklyInvalidInput"),Er(i,To.INVALID,!0))}if(i=this.getSourceBlock(),!i)throw new ko;this.getConstants().FULL_BLOCK_FIELDS&&i.applyColour()}setSpellcheck(i){i!==this.spellcheck_&&(this.spellcheck_=i,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(i,a=!1){this.workspace_=this.sourceBlock_.workspace,!a&&this.workspace_.options.modalInputs&&(Bl||Rn||Fn)?this.showPromptEditor_():this.showInlineEditor_(a)}showPromptEditor_(){La(t.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),i=>{i!==null&&this.setValue(this.getValueFromEditorText_(i)),this.onFinishEditing_(this.value_)})}showInlineEditor_(i){const a=this.getSourceBlock();if(!a)throw new ko;ql(this,a.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,i||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var i=this.getSourceBlock();if(!i)throw new ko;t.setGroup$$module$build$src$core$events$utils(!0);const a=oo();var p=this.getClickTarget_();if(!p)throw Error("A click target has not been set.");$e(p,"editing"),p=document.createElement("input"),p.className="blocklyHtmlInput",p.setAttribute("spellcheck",this.spellcheck_);const w=this.workspace_.getScale();var k=this.getConstants().FIELD_TEXT_FONTSIZE*w+"pt";return a.style.fontSize=k,p.style.fontSize=k,k=G_.BORDERRADIUS*w+"px",this.isFullBlockField()&&(k=this.getScaledBBox(),k=(k.bottom-k.top)/2+"px",i=i.getParent()?i.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,p.style.border=1*w+"px solid "+i,a.style.borderRadius=k,a.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(a.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*w+"px")),p.style.borderRadius=k,a.appendChild(p),p.value=p.defaultValue=this.getEditorText_(this.value_),p.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(p),p}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&ie()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(ue(new(Ie(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),t.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var i=oo().style;if(i.width="auto",i.height="auto",i.fontSize="",i.transition="",i.boxShadow="",this.htmlInput_=null,i=this.getClickTarget_(),!i)throw Error("A click target has not been set.");St(i,"editing")}onFinishEditing_(i){}bindInputEvents_(i){this.onKeyDownWrapper_=Ce(i,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=Ce(i,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(rt(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(rt(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(i){i.key==="Enter"?(Ql(),al()):i.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),Ql(),al()):i.key==="Tab"&&(Ql(),al(),this.sourceBlock_.tab(this,!i.shiftKey),i.preventDefault())}onHtmlInputChange_(i){i=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&ie()&&this.value_!==i&&ue(new(Ie(Ch))(this.sourceBlock_,this.name||null,i,this.value_))}setEditorValue_(i,a=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(i)),this.setValue(i,a)}resizeEditor_(){var i=this.getSourceBlock();if(!i)throw new ko;const a=oo(),p=this.getScaledBBox();a.style.width=p.right-p.left+"px",a.style.height=p.bottom-p.top+"px",i=new _n(i.RTL?p.right-a.offsetWidth:p.left,p.top),a.style.left=i.x+"px",a.style.top=i.y+"px"}repositionForWindowResize(){const i=this.getSourceBlock();return i instanceof Dp?(Eh(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),i)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(i){return`${i}`}getValueFromEditorText_(i){return i}};G_.BORDERRADIUS=4;var H0=class extends G_{constructor(i,a,p){super(i,a,p)}doClassValidation_(i){return i===void 0?null:`${i}`}static fromJson(i){return new this(Vr(i.text),void 0,i)}};xs("field_input",H0),H0.prototype.DEFAULT_VALUE="";var PT=class extends I_{constructor(i){super(i)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(i){return!!i.outputConnection}hasRightSquareCorner(i){return!!i.outputConnection&&!i.statementInputCount&&!i.nextConnection}},Vv=class extends R_{constructor(i,a){if(super(i,a),this.connectedBottomNextConnection=!1,this.connectedBlock){for(i=this.connectedBlock;a=i.getNextBlock();)i=a;i.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},BT=class extends sr{constructor(i){super(i),this.width=this.height=0,this.type|=ut.getType("RIGHT_CONNECTION")}},FT=class extends pb{constructor(i){super(i)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(i){const a=(i.hat?i.hat==="cap":this.constants_.ADD_START_HATS)&&!i.outputConnection&&!i.previousConnection;return!!i.outputConnection||a}hasRightSquareCorner(i){return!!i.outputConnection&&!i.statementInputCount&&!i.nextConnection}},zT=class extends k0{constructor(i,a){super(i,a),this.isInline=!0,this.renderer_=i,this.constants_=this.renderer_.getConstants(),this.topRow=new FT(this.constants_),this.bottomRow=new PT(this.constants_),this.isMultiRow=!a.getInputsInline()||a.isCollapsed(),this.hasStatementInput=0<a.statementInputCount,this.rightSide=this.outputConnection?new BT(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(i,a){return a?a instanceof bm||i instanceof id||a instanceof id?!0:i instanceof t.ValueInput$$module$build$src$core$inputs$value_input||i instanceof Np||i instanceof bm?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(i){return i.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(i)}getInRowSpacing_(i,a){return i&&a||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!i&&a&&ut.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:i&&ut.isLeftRoundedCorner(i)&&a&&(ut.isPreviousConnection(a)||ut.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:i&&ut.isLeftSquareCorner(i)&&a&&ut.isHat(a)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(i,a){if(ut.isTopRow(i)&&ut.isBottomRow(a))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const p=ut.isInputRow(i)&&i.hasStatement,w=ut.isInputRow(a)&&a.hasStatement;return w||p?(i=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),w&&p?Math.max(i,this.constants_.DUMMY_INPUT_MIN_HEIGHT):i):ut.isTopRow(i)?i.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):ut.isBottomRow(a)?this.outputConnection?!a.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(i,a){const p=this.width-this.startX;return ut.isInputRow(i)&&i.hasStatement||ut.isInputRow(a)&&a.hasStatement?Math.max(p,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):p}getElemCenterline_(i,a){if(i.hasStatement&&!ut.isSpacer(a)&&!ut.isStatementInput(a))return i.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(ut.isInlineInput(a)&&a instanceof rg){const p=a.connectedBlock;if(p&&p.outputConnection&&p.nextConnection)return i.yPos+p.height/2}return super.getElemCenterline_(i,a)}addInput_(i,a){if((i instanceof Np||i instanceof bm)&&a.hasDummyInput&&a.align===t.Align$$module$build$src$core$inputs$align.LEFT&&i.align===t.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(a,i);else if(i instanceof id){a.elements.push(new Vv(this.constants_,i)),a.hasStatement=!0,a.align===null&&(a.align=i.align);return}super.addInput_(i,a)}addAlignmentPadding_(i,a){if(this.rightAlignedDummyInputs.get(i)){let p;for(let w=0;w<i.elements.length;w++){const k=i.elements[w];if(ut.isSpacer(k)&&(p=k),ut.isField(k)&&k instanceof R0&&k.parentInput===this.rightAlignedDummyInputs.get(i))break}if(p){p.width+=a,i.width+=a;return}}super.addAlignmentPadding_(i,a)}adjustXPosition_(){const i=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let a=i;for(let k=2;k<this.rows.length-1;k+=2){var p=this.rows[k-1];const j=this.rows[k];var w=this.rows[k+1];if(p=k===2?!!this.topRow.hasPreviousConnection:!!p.followsStatement,w=k+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!w.precedesStatement,ut.isInputRow(j)&&j.hasStatement){j.measure();let ve,Ue;a=j.width-((Ue=(ve=j.getLastInput())==null?void 0:ve.width)!=null?Ue:0)+i}else if(p&&(k===2||w)&&ut.isInputRow(j)&&!j.hasStatement){w=j.xPos,p=null;for(let ve=0;ve<j.elements.length;ve++){const Ue=j.elements[ve];ut.isSpacer(Ue)&&(p=Ue),p&&(ut.isField(Ue)||ut.isInput(Ue))&&w<a&&!(ut.isField(Ue)&&Ue instanceof R0&&(Ue.field instanceof wi||Ue.field instanceof Bg))&&(p.width+=a-w),w+=Ue.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var i=this.outputConnection.shape;if("isDynamic"in i&&i.isDynamic){for(var a=0,p=0;p<this.rows.length;p++){const w=this.rows[p];w.yPos=a,a+=w.height}this.height=a,p=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,a=i.height(p),p=i.width(p),this.outputConnection.height=a,this.outputConnection.width=p,this.outputConnection.startX=p,this.outputConnection.connectionOffsetY=i.connectionOffsetY(a),this.outputConnection.connectionOffsetX=i.connectionOffsetX(p),i=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(i=p,this.rightSide.height=a,this.rightSide.width=i,this.rightSide.centerline=a/2,this.rightSide.xPos=this.width+i),this.startX=p,this.width+=p+i,this.widthWithChildren+=p+i}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var i=0,a=0;a<this.rows.length;a++){var p=this.rows[a];if(!ut.isInputRow(p))continue;i=p.elements[p.elements.length-2];let w=this.getNegativeSpacing_(p.elements[1]),k=this.getNegativeSpacing_(i);i=w+k;const j=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-i<j&&(i=this.width-j,w=i/2,k=i/2),p.elements.unshift(new qd(this.constants_,-w)),p.elements.push(new qd(this.constants_,-k))}if(i)for(this.width-=i,this.widthWithChildren-=i,this.rightSide.xPos-=i,a=0;a<this.rows.length;a++)p=this.rows[a],ut.isTopOrBottomRow(p)&&(p.elements[1].width-=i),p.width-=i,p.widthWithConnectedBlocks-=i}}getNegativeSpacing_(i){if(!i||!this.outputConnection)return 0;const a=this.outputConnection.width;var p=this.outputConnection.shape.type;const w=this.constants_;if(1<this.inputRows.length)switch(p){case w.SHAPES.ROUND:return p=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,p=this.height/2>p?p:this.height/2,a-p*(1-Math.sin(Math.acos((p-this.constants_.SMALL_PADDING)/p)));default:return 0}if(ut.isInlineInput(i)&&i instanceof rg){const k=i.connectedBlock;return i=k?k.pathObject.outputShapeType:i.shape.type,i==null||k&&k.outputConnection&&(k.statementInputCount||k.nextConnection)||p===w.SHAPES.HEXAGONAL&&p!==i?0:a-this.constants_.SHAPE_IN_SHAPE_PADDING[p][i]}return ut.isField(i)&&i instanceof R0?p===w.SHAPES.ROUND&&i.field instanceof H0?a-2.75*w.GRID_UNIT:a-this.constants_.SHAPE_IN_SHAPE_PADDING[p][0]:ut.isIcon(i)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let w=2;w<this.rows.length-1;w+=2){const k=this.rows[w-1],j=this.rows[w],ve=this.rows[w+1];var i=w===2,a=w+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!ve.precedesStatement;if(i?this.topRow.hasPreviousConnection:k.followsStatement){var p=j.elements[1];if(p=j.elements.length===3&&p instanceof R0&&(p.field instanceof wi||p.field instanceof Bg),!i&&p)k.height-=this.constants_.SMALL_PADDING,ve.height-=this.constants_.SMALL_PADDING,j.height-=this.constants_.MEDIUM_PADDING;else if(!i&&!a)k.height+=this.constants_.SMALL_PADDING;else if(a){for(i=!1,a=0;a<j.elements.length;a++)if(p=j.elements[a],p instanceof rg&&ut.isInlineInput(p)&&p.connectedBlock&&!p.connectedBlock.isShadow()&&40<=p.connectedBlock.getHeightWidth().height){i=!0;break}i&&(k.height-=this.constants_.SMALL_PADDING,ve.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},c=class extends N_{constructor(i,a,p){super(i,a,p),this.markerCircle=null}showWithInputOutput(i){const a=i.getSourceBlock();i=i.getLocation().getOffsetInBlock(),this.positionCircle(i.x,i.y),this.setParent_(a),this.showCurrent_()}showWithOutput_(i){this.showWithInputOutput(i)}showWithInput_(i){this.showWithInputOutput(i)}showWithBlock_(i){i=i.getLocation();const a=i.getHeightWidth();this.positionRect_(0,0,a.width,a.height),this.setParent_(i),this.showCurrent_()}positionCircle(i,a){let p;(p=this.markerCircle)==null||p.setAttribute("cx",`${i}`);let w;(w=this.markerCircle)==null||w.setAttribute("cy",`${a}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=se(Ve.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const i=this.getBlinkProperties_();se(Ve.ANIMATE,i,this.markerCircle)}return this.markerSvg_}applyColour_(i){super.applyColour_(i);let a;(a=this.markerCircle)==null||a.setAttribute("fill",this.colour_);let p;if((p=this.markerCircle)==null||p.setAttribute("stroke",this.colour_),this.isCursor()){i=this.colour_+";transparent;transparent;";let w;(w=this.markerCircle)==null||w.firstElementChild.setAttribute("values",i)}}},m=class extends O0{constructor(i,a,p){super(i,a,p),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=p}setPath(i){super.setPath(i),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",i)}applyColour(i){super.applyColour(i);const a=i.getParent();i.isShadow()&&a&&this.svgPath.setAttribute("stroke",a.style.colourTertiary);for(const p of this.outlines.values())p.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const i of this.outlines.values())i.setAttribute("transform","scale(-1 1)")}updateSelected(i){this.setClass_("blocklySelected",i),i?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(i){this.setClass_("blocklyReplaceable",i),i?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(i,a){i=i.getParentInput().name,(i=this.getOutlinePath(i))&&(a?i.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):i.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const i of this.outlines.keys())this.remainingOutlines.add(i)}endDrawing(){if(this.remainingOutlines.size)for(const i of this.remainingOutlines)this.removeOutlinePath(i);this.remainingOutlines.clear()}setOutlinePath(i,a){i=this.getOutlinePath(i),i.setAttribute("d",a),i.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(i){return this.outlines.has(i)||this.outlines.set(i,se(Ve.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(i),this.outlines.get(i)}removeOutlinePath(i){let a,p;(a=this.outlines.get(i))==null||(p=a.parentNode)==null||p.removeChild(this.outlines.get(i)),this.outlines.delete(i)}},E=class extends D_{constructor(i){super(i)}makeConstants_(){return new NT}makeRenderInfo_(i){return new zT(this,i)}makeDrawer_(i,a){return new DT(i,a)}makeMarkerDrawer(i,a){return new c(i,this.getConstants(),a)}makePathObject(i,a){return new m(i,a,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(i,a,p){return xe("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===zn.OUTPUT_VALUE?i.isConnected()?Sf.PREVIEW_TYPE.REPLACEMENT_FADE:Sf.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(i,a,p)}};ki("zelos",E);var N={};N.BottomRow=PT,N.ConstantProvider=NT,N.Drawer=DT,N.MarkerSvg=c,N.PathObject=m,N.RenderInfo=zT,N.Renderer=E,N.RightConnectionShape=BT,N.StatementInput=Vv,N.TopRow=FT,Wo();var G={};G.registerCleanup=qr,G.registerCollapse=us,G.registerCollapseExpandBlock=Mu,G.registerComment=vd,G.registerDefaultOptions=Wo,G.registerDelete=fo,G.registerDeleteAll=Qu,G.registerDisable=Au,G.registerDuplicate=ho,G.registerExpand=es,G.registerHelp=po,G.registerInline=ba,G.registerRedo=ti,G.registerUndo=Nr;var K=class extends G_{constructor(i,a,p){super(Gi.SKIP_SETUP),this.clockwise=K.CLOCKWISE,this.offset=K.OFFSET,this.wrap=K.WRAP,this.round=K.ROUND,this.boundEvents=[],this.symbol_=this.gauge=this.line=null,i!==Gi.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(i),a&&this.setValidator(a))}configure_(i){switch(super.configure_(i),i.mode){case ce.COMPASS:this.clockwise=!0,this.offset=90;break;case ce.PROTRACTOR:this.clockwise=!1,this.offset=0}i.clockwise&&(this.clockwise=i.clockwise),i.offset&&(this.offset=i.offset),i.wrap&&(this.wrap=i.wrap),i.round&&(this.round=i.round)}initView(){super.initView(),this.symbol_=se(Ve.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph()}showEditor_(i){super.showEditor_(i,Bl||Rn||Fn),i=this.dropdownCreate(),xu().appendChild(i),this.sourceBlock_ instanceof Dp&&Ad(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),ye(this,this.dropdownDispose.bind(this)),this.updateGraph()}dropdownCreate(){const i=se(Ve.SVG,{xmlns:Km,"xmlns:html":Ec,"xmlns:xlink":Zs,version:"1.1",height:2*K.HALF+"px",width:2*K.HALF+"px"});i.style.touchAction="none";const a=se(Ve.CIRCLE,{cx:K.HALF,cy:K.HALF,r:K.RADIUS,class:"blocklyAngleCircle"},i);this.gauge=se(Ve.PATH,{class:"blocklyAngleGauge"},i),this.line=se(Ve.LINE,{x1:K.HALF,y1:K.HALF,class:"blocklyAngleLine"},i);for(let p=0;360>p;p+=15)se(Ve.LINE,{x1:K.HALF+K.RADIUS,y1:K.HALF,x2:K.HALF+K.RADIUS-(p%45===0?10:5),y2:K.HALF,class:"blocklyAngleMarks",transform:"rotate("+p+","+K.HALF+","+K.HALF+")"},i);return this.boundEvents.push(Ce(i,"click",this,this.hide)),this.boundEvents.push(Ce(a,"pointerdown",this,this.onMouseMove_,!0)),this.boundEvents.push(Ce(a,"pointermove",this,this.onMouseMove_,!0)),i}dropdownDispose(){for(const i of this.boundEvents)rt(i);this.boundEvents.length=0,this.line=this.gauge=null}hide(){Ti(this),Ql()}onMouseMove_(i){var a=this.gauge.ownerSVGElement.getBoundingClientRect();const p=i.clientX-a.left-K.HALF;i=i.clientY-a.top-K.HALF,a=Math.atan(-i/p),isNaN(a)||(a=is(a),0>p?a+=180:0<i&&(a+=360),a=this.clockwise?this.offset+360-a:360-(this.offset-a),this.displayMouseOrKeyboardValue(a))}displayMouseOrKeyboardValue(i){if(this.round&&(i=Math.round(i/this.round)*this.round),i=this.wrapValue(i),i!==this.value_){const a=this.value_;this.setEditorValue_(i,!1),this.sourceBlock_&&ie()&&this.value_!==a&&ue(new(Ie(Ch))(this.sourceBlock_,this.name||null,a,this.value_))}}updateGraph(){if(this.gauge&&this.line){var i=Number(this.getText())+this.offset,a=Uc(i%360);i=["M ",K.HALF,",",K.HALF];var p=K.HALF,w=K.HALF;if(!isNaN(a)){const k=Number(this.clockwise),j=Uc(this.offset),ve=Math.cos(j)*K.RADIUS,Ue=Math.sin(j)*-K.RADIUS;k&&(a=2*j-a),p+=Math.cos(a)*K.RADIUS,w-=Math.sin(a)*K.RADIUS,a=Math.abs(Math.floor((a-j)/Math.PI)%2),k&&(a=1-a),i.push(" l ",ve,",",Ue," A ",K.RADIUS,",",K.RADIUS," 0 ",a," ",k," ",p,",",w," z")}this.gauge.setAttribute("d",i.join("")),this.line.setAttribute("x2",`${p}`),this.line.setAttribute("y2",`${w}`)}}onHtmlInputKeyDown_(i){super.onHtmlInputKeyDown_(i);var a=this.getSourceBlock();if(!a)throw new ko;let p=0;switch(i.key){case"ArrowLeft":p=a.RTL?1:-1;break;case"ArrowRight":p=a.RTL?-1:1;break;case"ArrowDown":p=-1;break;case"ArrowUp":p=1}p&&(a=this.getValue(),this.displayMouseOrKeyboardValue(a+p*this.round),i.preventDefault(),i.stopPropagation())}doClassValidation_(i){return i=Number(i),isNaN(i)||!isFinite(i)?null:this.wrapValue(i)}wrapValue(i){return i%=360,0>i&&(i+=360),i>this.wrap&&(i-=360),i}static fromJson(i){return new this(i.angle,void 0,i)}};K.HALF=50,K.RADIUS=K.HALF-1,K.CLOCKWISE=!1,K.OFFSET=0,K.WRAP=360,K.ROUND=15,xs("field_angle",K),K.prototype.DEFAULT_VALUE=0,At(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: 0.8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: 0.8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`);var ce;(function(i){i.COMPASS="compass",i.PROTRACTOR="protractor"})(ce||(ce={}));var _e=class extends Gi{constructor(i,a,p){super(Gi.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=_e.CHECK_CHAR,i!==Gi.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(i),a&&this.setValidator(a))}configure_(i){super.configure_(i),i.checkCharacter&&(this.checkChar=i.checkCharacter)}saveState(){const i=this.saveLegacyState(_e);return i!==null?i:this.getValueBoolean()}initView(){super.initView();const i=this.getTextElement();$e(i,"blocklyCheckbox"),i.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(i){this.checkChar=i||_e.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(i){return i===!0||i==="TRUE"?"TRUE":i===!1||i==="FALSE"?"FALSE":null}doValueUpdate_(i){this.value_=this.convertValueToBool_(i),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(i){return typeof i=="string"?i==="TRUE":!!i}static fromJson(i){return new this(i.checked,void 0,i)}};_e.CHECK_CHAR="",xs("field_checkbox",_e),_e.prototype.DEFAULT_VALUE=!1;var Ee=class extends Gi{constructor(i,a,p){super(Gi.SKIP_SETUP),this.highlightedIndex=this.picker=null,this.boundEvents=[],this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles=this.colours=null,this.columns=0,i!==Gi.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(i),a&&this.setValidator(a))}configure_(i){super.configure_(i),i.colourOptions&&(this.colours=i.colourOptions),i.colourTitles&&(this.titles=i.colourTitles),i.columns&&(this.columns=i.columns)}initView(){this.size_=new eo(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1",this.getBorderRect().setAttribute("stroke","#fff"),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const i=this.getSourceBlock();if(!i)throw new ko;const a=this.getConstants();return i.isSimpleReporter()&&!(a==null||!a.FIELD_COLOUR_FULL_BLOCK)}applyColour(){const i=this.getSourceBlock();if(!i)throw new ko;if(this.fieldGroup_){var a=this.borderRect_;if(!a)throw Error("The border rect has not been initialized");this.isFullBlockField()?(a.style.display="none",i.pathObject.svgPath.setAttribute("fill",this.getValue()),i.pathObject.svgPath.setAttribute("stroke","#fff")):(a.style.display="block",a.style.fill=this.getValue())}}getSize(){let i;return(i=this.getConstants())!=null&&i.FIELD_COLOUR_FULL_BLOCK&&(this.render_(),this.isDirty_=!1),super.getSize()}render_(){super.render_();const i=this.getSourceBlock();if(!i)throw new ko;i.applyColour()}updateSize_(i){var a=this.getConstants();this.isFullBlockField()?(i=2*(i??0),a=a.FIELD_TEXT_HEIGHT):(i=a.FIELD_COLOUR_DEFAULT_WIDTH,a=a.FIELD_COLOUR_DEFAULT_HEIGHT),this.size_.height=a,this.size_.width=i,this.positionBorderRect_()}doClassValidation_(i){return typeof i!="string"?null:na(i)}getText(){let i=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(i)&&(i="#"+i[1]+i[3]+i[5]),i}setColours(i,a){return this.colours=i,a&&(this.titles=a),this}setColumns(i){return this.columns=i,this}showEditor_(){this.dropdownCreate(),xu().appendChild(this.picker),ye(this,this.dropdownDispose.bind(this)),this.picker.focus({preventScroll:!0})}onClick(i){i=(i=i.target)&&i.getAttribute("data-colour"),i!==null&&(this.setValue(i),Ti(this))}onKeyDown(i){let a=!0;var p;switch(i.key){case"ArrowUp":this.moveHighlightBy(0,-1);break;case"ArrowDown":this.moveHighlightBy(0,1);break;case"ArrowLeft":this.moveHighlightBy(-1,0);break;case"ArrowRight":this.moveHighlightBy(1,0);break;case"Enter":(p=this.getHighlighted())&&(p=p.getAttribute("data-colour"),p!==null&&this.setValue(p)),al();break;default:a=!1}a&&i.stopPropagation()}moveHighlightBy(i,a){if(this.highlightedIndex){var p=this.colours||Ee.COLOURS,w=this.columns||Ee.COLUMNS,k=this.highlightedIndex%w,j=Math.floor(this.highlightedIndex/w);k+=i,j+=a,0>i?0>k&&0<j?(k=w-1,j--):0>k&&(k=0):0<i?k>w-1&&j<Math.floor(p.length/w)-1?(k=0,j++):k>w-1&&k--:0>a?0>j&&(j=0):0<a&&j>Math.floor(p.length/w)-1&&(j=Math.floor(p.length/w)-1),this.setHighlightedCell(this.picker.childNodes[j].childNodes[k],j*w+k)}}onMouseMove(i){const a=(i=i.target)&&Number(i.getAttribute("data-index"));a!==null&&a!==this.highlightedIndex&&this.setHighlightedCell(i,a)}onMouseEnter(){let i;(i=this.picker)==null||i.focus({preventScroll:!0})}onMouseLeave(){var i;(i=this.picker)==null||i.blur(),(i=this.getHighlighted())&&St(i,"blocklyColourHighlighted")}getHighlighted(){if(!this.highlightedIndex)return null;const i=this.columns||Ee.COLUMNS,a=this.picker.childNodes[Math.floor(this.highlightedIndex/i)];return a?a.childNodes[this.highlightedIndex%i]:null}setHighlightedCell(i,a){const p=this.getHighlighted();p&&St(p,"blocklyColourHighlighted"),$e(i,"blocklyColourHighlighted"),this.highlightedIndex=a,(i=i.getAttribute("id"))&&this.picker&&Er(this.picker,To.ACTIVEDESCENDANT,i)}dropdownCreate(){const i=this.columns||Ee.COLUMNS,a=this.colours||Ee.COLOURS,p=this.titles||Ee.TITLES,w=this.getValue(),k=document.createElement("table");k.className="blocklyColourTable",k.tabIndex=0,k.dir="ltr",ci(k,oh.GRID),Er(k,To.EXPANDED,!0),Er(k,To.ROWCOUNT,Math.floor(a.length/i)),Er(k,To.COLCOUNT,i);let j;for(let ve=0;ve<a.length;ve++){ve%i===0&&(j=document.createElement("tr"),ci(j,oh.ROW),k.appendChild(j));const Ue=document.createElement("td");j.appendChild(Ue),Ue.setAttribute("data-colour",a[ve]),Ue.title=p[ve]||a[ve],Ue.id=Z(),Ue.setAttribute("data-index",`${ve}`),ci(Ue,oh.GRIDCELL),Er(Ue,To.LABEL,a[ve]),Er(Ue,To.SELECTED,a[ve]===w),Ue.style.backgroundColor=a[ve],a[ve]===w&&(Ue.className="blocklyColourSelected",this.highlightedIndex=ve)}this.boundEvents.push(Ce(k,"pointerdown",this,this.onClick,!0)),this.boundEvents.push(Ce(k,"pointermove",this,this.onMouseMove,!0)),this.boundEvents.push(Ce(k,"pointerenter",this,this.onMouseEnter,!0)),this.boundEvents.push(Ce(k,"pointerleave",this,this.onMouseLeave,!0)),this.boundEvents.push(Ce(k,"keydown",this,this.onKeyDown,!1)),this.picker=k}dropdownDispose(){for(const i of this.boundEvents)rt(i);this.boundEvents.length=0,this.highlightedIndex=this.picker=null}static fromJson(i){return new this(i.colour,void 0,i)}};Ee.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),Ee.TITLES=[],Ee.COLUMNS=7,Ee.prototype.DEFAULT_VALUE=Ee.COLOURS[0],xs("field_colour",Ee),At(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: 0.5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`);var et=class extends wi{constructor(i,a,p){super(String(i??""),a,p),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(i){return new this(Vr(i.text),void 0,i)}};xs("field_label_serializable",et);var tt=class extends H0{constructor(i,a,p){super(Gi.SKIP_SETUP),this.textGroup=null,this.maxLines_=1/0,this.isOverflowedY_=!1,i!==Gi.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(i),a&&this.setValidator(a))}configure_(i){super.configure_(i),i.maxLines&&this.setMaxLines(i.maxLines)}toXml(i){return i.textContent=this.getValue().replace(/\n/g,"&#10;"),i}fromXml(i){this.setValue(i.textContent.replace(/&#10;/g,`
`))}saveState(){const i=this.saveLegacyState(tt);return i!==null?i:this.getValue()}loadState(i){this.loadLegacyState(Gi,i)||this.setValue(i)}initView(){this.createBorderRect_(),this.textGroup=se(Ve.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const i=this.getSourceBlock();if(!i)throw new ko;let a=this.getText();if(!a)return Gi.NBSP;const p=a.split(`
`);a="";const w=this.isOverflowedY_?this.maxLines_:p.length;for(let k=0;k<w;k++){let j=p[k];j.length>this.maxDisplayLength?j=j.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&k===w-1&&(j=j.substring(0,j.length-3)+"..."),j=j.replace(/\s/g,Gi.NBSP),a+=j,k!==w-1&&(a+=`
`)}return i.RTL&&(a+=""),a}doValueUpdate_(i){super.doValueUpdate_(i),this.value_!==null&&(this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_)}render_(){var i=this.getSourceBlock();if(!i)throw new ko;for(var a,p=this.textGroup;a=p.firstChild;)p.removeChild(a);a=this.getDisplayText_().split(`
`);let w=0;for(let k=0;k<a.length;k++){const j=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;se(Ve.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:w+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},p).appendChild(document.createTextNode(a[k])),w+=j}this.isBeingEdited_&&(p=this.htmlInput_,this.isOverflowedY_?$e(p,"blocklyHtmlTextAreaInputOverflowedY"):St(p,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(i.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),i=this.htmlInput_,this.isTextValid_?(St(i,"blocklyInvalidInput"),Er(i,To.INVALID,!1)):($e(i,"blocklyInvalidInput"),Er(i,To.INVALID,!0)))}updateSize_(){var i=this.textGroup.childNodes;const a=this.getConstants().FIELD_TEXT_FONTSIZE,p=this.getConstants().FIELD_TEXT_FONTWEIGHT,w=this.getConstants().FIELD_TEXT_FONTFAMILY;let k=0,j=0;for(var ve=0;ve<i.length;ve++){var Ue=Xe(i[ve],a,p,w);Ue>k&&(k=Ue),j+=this.getConstants().FIELD_TEXT_HEIGHT+(0<ve?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(i=String(this.value_).split(`
`),ve=se(Ve.TEXT,{class:"blocklyText blocklyMultilineText"}),Ue=0;Ue<i.length;Ue++){i[Ue].length>this.maxDisplayLength&&(i[Ue]=i[Ue].substring(0,this.maxDisplayLength)),ve.textContent=i[Ue];const Yt=Xe(ve,a,p,w);Yt>k&&(k=Yt)}k+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(j+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,k+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",`${k}`),this.borderRect_.setAttribute("height",`${j}`)),this.size_.width=k,this.size_.height=j,this.positionBorderRect_()}showEditor_(i,a){super.showEditor_(i,a),this.forceRerender()}widgetCreate_(){const i=oo(),a=this.workspace_.getScale(),p=document.createElement("textarea");p.className="blocklyHtmlInput blocklyHtmlTextAreaInput",p.setAttribute("spellcheck",String(this.spellcheck_));var w=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";i.style.fontSize=w,p.style.fontSize=w,p.style.borderRadius=H0.BORDERRADIUS*a+"px",w=this.getConstants().FIELD_BORDER_RECT_X_PADDING*a;const k=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*a/2;return p.style.padding=k+"px "+w+"px "+k+"px "+w+"px",w=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,p.style.lineHeight=w*a+"px",i.appendChild(p),p.value=p.defaultValue=this.getEditorText_(this.value_),p.setAttribute("data-untyped-default-value",String(this.value_)),p.setAttribute("data-old-value",""),En?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(p),p}setMaxLines(i){typeof i=="number"&&0<i&&i!==this.maxLines_&&(this.maxLines_=i,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(i){i.key!=="Enter"&&super.onHtmlInputKeyDown_(i)}static fromJson(i){return new this(Vr(i.text),void 0,i)}};xs("field_multilinetext",tt),At(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`);var ct=class extends G_{constructor(i,a,p,w,k,j){super(Gi.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,i!==Gi.SKIP_SETUP&&(j?this.configure_(j):this.setConstraints(a,p,w),this.setValue(i),k&&this.setValidator(k))}configure_(i){super.configure_(i),this.setMinInternal(i.min),this.setMaxInternal(i.max),this.setPrecisionInternal(i.precision)}setConstraints(i,a,p){this.setMinInternal(i),this.setMaxInternal(a),this.setPrecisionInternal(p),this.setValue(this.getValue())}setMin(i){this.setMinInternal(i),this.setValue(this.getValue())}setMinInternal(i){i==null?this.min_=-1/0:(i=Number(i),isNaN(i)||(this.min_=i))}getMin(){return this.min_}setMax(i){this.setMaxInternal(i),this.setValue(this.getValue())}setMaxInternal(i){i==null?this.max_=1/0:(i=Number(i),isNaN(i)||(this.max_=i))}getMax(){return this.max_}setPrecision(i){this.setPrecisionInternal(i),this.setValue(this.getValue())}setPrecisionInternal(i){this.precision_=Number(i)||0;let a=String(this.precision_);a.indexOf("e")!==-1&&(a=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const p=a.indexOf(".");this.decimalPlaces=p===-1?i?0:null:a.length-p-1}getPrecision(){return this.precision_}doClassValidation_(i){return i===null||(i=`${i}`.replace(/O/gi,"0"),i=i.replace(/,/g,""),i=i.replace(/infinity/i,"Infinity"),i=Number(i||0),isNaN(i))?null:(i=Math.min(Math.max(i,this.min_),this.max_),this.precision_&&isFinite(i)&&(i=Math.round(i/this.precision_)*this.precision_),this.decimalPlaces!==null&&(i=Number(i.toFixed(this.decimalPlaces))),i)}widgetCreate_(){const i=super.widgetCreate_();return-1/0<this.min_&&(i.min=`${this.min_}`,Er(i,To.VALUEMIN,this.min_)),1/0>this.max_&&(i.max=`${this.max_}`,Er(i,To.VALUEMAX,this.max_)),i}static fromJson(i){return new this(i.value,void 0,void 0,void 0,void 0,i)}};xs("field_number",ct),ct.prototype.DEFAULT_VALUE=0;var Rt=class extends Ah{constructor(i,a,p,w,k){super(Gi.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=Rt.dropdownCreate,this.defaultVariableName=typeof i=="string"?i:"",this.size_=new eo(0,0),i!==Gi.SKIP_SETUP&&(k?this.configure_(k):this.setTypes(p,w),a&&this.setValidator(a))}configure_(i){super.configure_(i),this.setTypes(i.variableTypes,i.defaultType)}initModel(){var i=this.getSourceBlock();if(!i)throw new ko;this.variable||(i=t.getOrCreateVariablePackage$$module$build$src$core$variables(i.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(i.getId()))}shouldAddBorderRect_(){const i=this.getSourceBlock();if(!i)throw new ko;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||i.type!=="variables_get")}fromXml(i){var a=this.getSourceBlock();if(!a)throw new ko;const p=i.getAttribute("id"),w=i.textContent,k=i.getAttribute("variabletype")||i.getAttribute("variableType")||"";if(a=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,p,w,k),k!==null&&k!==a.type)throw Error("Serialized variable type with id '"+a.getId()+"' had type "+a.type+", and does not match variable field that references it: "+qi(i)+".");this.setValue(a.getId())}toXml(i){return this.initModel(),i.id=this.variable.getId(),i.textContent=this.variable.name,this.variable.type&&i.setAttribute("variabletype",this.variable.type),i}saveState(i){var a=this.saveLegacyState(Rt);return a!==null||(this.initModel(),a={id:this.variable.getId()},i&&(a.name=this.variable.name,a.type=this.variable.type)),a}loadState(i){const a=this.getSourceBlock();if(!a)throw new ko;this.loadLegacyState(Rt,i)||(i=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,i.id||null,i.name,i.type||""),this.setValue(i.getId()))}setSourceBlock(i){if(i.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(i)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(i){if(i===null)return null;var a=this.getSourceBlock();if(!a)throw new ko;return a=t.getVariable$$module$build$src$core$variables(a.workspace,i),a?(a=a.type,this.typeIsAllowed(a)?i:(console.warn("Variable type doesn't match this field!  Type was "+a),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+i),null)}doValueUpdate_(i){const a=this.getSourceBlock();if(!a)throw new ko;this.variable=t.getVariable$$module$build$src$core$variables(a.workspace,i),super.doValueUpdate_(i)}typeIsAllowed(i){const a=this.getVariableTypes();if(!a)return!0;for(let p=0;p<a.length;p++)if(i===a[p])return!0;return!1}getVariableTypes(){var i=this.variableTypes;if(i===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(i=i||[""],i.length===0)throw i=this.getText(),Error("'variableTypes' of field variable "+i+" was an empty list");return i}setTypes(i=null,a=""){if(Array.isArray(i)){let p=!1;for(let w=0;w<i.length;w++)i[w]===a&&(p=!0);if(!p)throw Error("Invalid default type '"+a+"' in the definition of a FieldVariable")}else if(i!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=a,this.variableTypes=i}refreshVariableName(){this.forceRerender()}onItemSelected_(i,a){if(i=a.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(i===hn){t.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(i===an){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(i)}referencesVariables(){return!0}static fromJson(i){return new this(Vr(i.variable),void 0,void 0,void 0,i)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const i=this.getText();let a=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var p=this.getVariableTypes(),w=0;w<p.length;w++){const k=this.sourceBlock_.workspace.getVariablesOfType(p[w]);a=a.concat(k)}for(a.sort(_f.compareByName),p=[],w=0;w<a.length;w++)p[w]=[a[w].name,a[w].getId()];return p.push([t.Msg$$module$build$src$core$msg.RENAME_VARIABLE,hn]),t.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&p.push([t.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",i),an]),p}};xs("field_variable",Rt);var Xt=class{constructor(i,a,p,w){this.workspace=i,this.targetWorkspace=a,this.isLabel_=w,this.onMouseUpWrapper=null,this.height=this.width=0,this.svgText=this.svgGroup=null,this.text=p.text,this.position=new _n(0,0),this.callbackKey=p.callbackKey||p.callbackkey,this.cssClass=p["web-class"]||null,this.info=p}createDom(){var i=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(i+=" "+this.cssClass),this.svgGroup=se(Ve.G,{class:i},this.workspace.getCanvas());let a;this.isLabel_||(a=se(Ve.RECT,{class:"blocklyFlyoutButtonShadow",rx:Xt.BORDER_RADIUS,ry:Xt.BORDER_RADIUS,x:1,y:1},this.svgGroup)),i=se(Ve.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Xt.BORDER_RADIUS,ry:Xt.BORDER_RADIUS},this.svgGroup);const p=se(Ve.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var w=Vr(this.text);this.workspace.RTL&&(w+=""),p.textContent=w,this.isLabel_&&(this.svgText=p,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const k=Kt(p,"fontSize"),j=Kt(p,"fontWeight"),ve=Kt(p,"fontFamily");if(this.width=Wt(p,k,j,ve),w=Ge(w,k,j,ve),this.height=w.height,!this.isLabel_){this.width+=2*Xt.TEXT_MARGIN_X,this.height+=2*Xt.TEXT_MARGIN_Y;let Ue;(Ue=a)==null||Ue.setAttribute("width",String(this.width));let Yt;(Yt=a)==null||Yt.setAttribute("height",String(this.height))}return i.setAttribute("width",String(this.width)),i.setAttribute("height",String(this.height)),p.setAttribute("x",String(this.width/2)),p.setAttribute("y",String(this.height/2-w.height/2+w.baseline)),this.updateTransform(),this.onMouseUpWrapper=Ce(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(i,a){this.position.x=i,this.position.y=a,this.updateTransform()}isLabel(){return this.isLabel_}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper&&rt(this.onMouseUpWrapper),this.svgGroup&&pt(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}onMouseUp(i){(i=this.targetWorkspace.getGesture(i))&&i.cancel(),this.isLabel_&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isLabel_||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isLabel_||(i=this.targetWorkspace.getButtonCallback(this.callbackKey))&&i(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};Xt.TEXT_MARGIN_X=5,Xt.TEXT_MARGIN_Y=2,Xt.BORDER_RADIUS=4,At(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var pn=class extends H_{constructor(i,a){super(i),this.flyout_=a}getBoundingBox_(){let i;try{i=this.workspace_.getCanvas().getBBox()}catch{i={height:0,y:0,width:0,x:0}}return i}getContentMetrics(i){const a=this.getBoundingBox_();return i=i?1:this.workspace_.scale,{height:a.height*i,width:a.width*i,top:a.y*i,left:a.x*i}}getScrollMetrics(i,a,p){return a=p||this.getContentMetrics(),p=this.flyout_.MARGIN*this.workspace_.scale,i=i?this.workspace_.scale:1,{height:(a.height+2*p)/i,width:(a.width+a.left+p)/i,top:0,left:0}}},Ln;(function(i){i.BLOCK="block",i.BUTTON="button"})(Ln||(Ln={}));var dn=class extends Uv{constructor(i){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,i.setMetrics=this.setMetrics_.bind(this),this.workspace_=new ep(i),this.workspace_.setMetricsManager(new pn(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=q(),this.RTL=!!i.RTL,this.toolboxPosition_=i.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(i){return this.svgGroup_=se(i,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=se(Ve.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(i){this.targetWorkspace=i,this.workspace_.targetWorkspace=i,this.workspace_.scrollbar=new Cb(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(Ce(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(Ce(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),i.getComponentManager().addComponent({component:this,weight:1,capabilities:[gl.Capability.AUTOHIDEABLE,gl.Capability.DELETE_AREA,gl.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const i of this.boundEvents)rt(i);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&pt(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(i){this.autoClose=i,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(i){!i&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}isVisible(){return this.isVisible_}setVisible(i){const a=i!==this.isVisible();this.isVisible_=i,a&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(i){const a=i!==this.containerVisible;this.containerVisible=i,a&&this.updateDisplay()}updateDisplay(){let i;i=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=i?"block":"none");let a;(a=this.workspace_.scrollbar)==null||a.setContainerVisible(i)}positionAt_(i,a,p,w){let k;(k=this.svgGroup_)==null||k.setAttribute("width",`${i}`);let j;(j=this.svgGroup_)==null||j.setAttribute("height",`${a}`),this.workspace_.setCachedParentSvgSize(i,a),this.svgGroup_&&Q(this.svgGroup_,"translate("+p+"px,"+w+"px)"),(i=this.workspace_.scrollbar)&&(i.setOrigin(p,w),i.resize(),i.hScroll&&i.hScroll.setPosition(i.hScroll.position.x,i.hScroll.position.y),i.vScroll&&i.vScroll.setPosition(i.vScroll.position.x,i.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const i of this.listeners)rt(i);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(i){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof i=="string"&&(i=this.getDynamicCategoryContents(i)),this.setVisible(!0),i=bt(i),i=this.createFlyoutInfo(i),xi(this.workspace_),this.layout_(i.contents,i.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(i){const a=[],p=[];this.permanentlyDisabled.length=0;const w=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const k of i){if("custom"in k){i=this.getDynamicCategoryContents(k.custom),i=bt(i);const{contents:j,gaps:ve}=this.createFlyoutInfo(i);a.push(...j),p.push(...ve)}switch(k.kind.toUpperCase()){case"BLOCK":i=k;const j=this.createFlyoutBlock(i);a.push({type:Ln.BLOCK,block:j}),this.addBlockGap(i,p,w);break;case"SEP":this.addSeparatorGap(k,p,w);break;case"LABEL":i=this.createButton(k,!0),a.push({type:Ln.BUTTON,button:i}),p.push(w);break;case"BUTTON":i=this.createButton(k,!1),a.push({type:Ln.BUTTON,button:i}),p.push(w)}}return{contents:a,gaps:p}}getDynamicCategoryContents(i){if(i=this.workspace_.targetWorkspace.getToolboxCategoryCallback(i),typeof i!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return i(this.workspace_.targetWorkspace)}createButton(i,a){return new Xt(this.workspace_,this.targetWorkspace,i,a)}createFlyoutBlock(i){let a;return i.blockxml?(i=typeof i.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(i.blockxml):i.blockxml,(a=this.getRecycledBlock(i.getAttribute("type")))||(a=io(i,this.workspace_))):(a=this.getRecycledBlock(i.type),a||(i.enabled===void 0&&(i.enabled=i.disabled!=="true"&&i.disabled!==!0),a=Mi(i,this.workspace_))),a.isEnabled()||this.permanentlyDisabled.push(a),a}getRecycledBlock(i){let a=-1;for(let p=0;p<this.recycledBlocks.length;p++)if(this.recycledBlocks[p].type===i){a=p;break}return a===-1?void 0:this.recycledBlocks.splice(a,1)[0]}addBlockGap(i,a,p){let w;i.gap?w=parseInt(String(i.gap)):i.blockxml&&(i=typeof i.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(i.blockxml):i.blockxml,w=parseInt(i.getAttribute("gap"))),a.push(!w||isNaN(w)?p:w)}addSeparatorGap(i,a,p){i=parseInt(String(i.gap)),!isNaN(i)&&0<a.length?a[a.length-1]=i:a.push(p)}clearOldBlocks(){var i=this.workspace_.getTopBlocks(!1);for(let p=0,w;w=i[p];p++)this.blockIsRecyclable_(w)?this.recycleBlock(w):w.dispose(!1,!1);for(i=0;i<this.mats.length;i++){const p=this.mats[i];p&&(gd(p),pt(p))}this.mats.length=0;for(let p=0,w;w=this.buttons_[p];p++)w.dispose();this.buttons_.length=0;let a;(a=this.workspace_.getPotentialVariableMap())==null||a.clear()}emptyRecycledBlocks(){for(let i=0;i<this.recycledBlocks.length;i++)this.recycledBlocks[i].dispose();this.recycledBlocks=[]}blockIsRecyclable_(i){return!1}recycleBlock(i){const a=i.getRelativeToSurfaceXY();i.moveBy(-a.x,-a.y),this.recycledBlocks.push(i)}addBlockListeners_(i,a,p){this.listeners.push(Ce(i,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(Ce(p,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(He(i,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(He(i,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()})),this.listeners.push(He(p,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(He(p,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()}))}blockMouseDown(i){return a=>{const p=this.targetWorkspace.getGesture(a);p&&(p.setStartBlock(i),p.handleFlyoutStart(a,this))}}onMouseDown(i){const a=this.targetWorkspace.getGesture(i);a&&a.handleFlyoutStart(i,this)}isBlockCreatable(i){return i.isEnabled()}createBlock(i){let a=null;t.disable$$module$build$src$core$events$utils();var p=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{a=this.placeNewBlock(i)}finally{t.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),i=Xl(this.targetWorkspace,p),ie()){for(t.setGroup$$module$build$src$core$events$utils(!0),p=0;p<i.length;p++){const w=i[p];ue(new(Ie(go))(w))}ue(new(Ie(t.CREATE$$module$build$src$core$events$utils))(a))}return this.autoClose?this.hide():this.filterForCapacity(),a}initFlyoutButton_(i,a,p){const w=i.createDom();i.moveTo(a,p),i.show(),this.listeners.push(Ce(w,"pointerdown",this,this.onMouseDown)),this.buttons_.push(i)}createRect_(i,a,p,w,k){return a=se(Ve.RECT,{"fill-opacity":0,x:a,y:p,height:w.height,width:w.width}),a.tooltip=i,zi(a),this.workspace_.getCanvas().insertBefore(a,i.getSvgRoot()),this.rectMap_.set(i,a),this.mats[k]=a}moveRectToBlock_(i,a){const p=a.getHeightWidth();i.setAttribute("width",String(p.width)),i.setAttribute("height",String(p.height)),a=a.getRelativeToSurfaceXY(),i.setAttribute("y",String(a.y)),i.setAttribute("x",String(this.RTL?a.x-p.width:a.x))}filterForCapacity(){const i=this.workspace_.getTopBlocks(!1);for(let a=0,p;p=i[a];a++)if(this.permanentlyDisabled.indexOf(p)===-1){const w=this.targetWorkspace.isCapacityAvailable(V(p));for(;p;)p.setEnabled(w),p=p.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(i){var a=this.targetWorkspace;if(!i.getSvgRoot())throw Error("oldBlock is not rendered");const p=$i(i);return a.setResizesEnabled(!1),a=Vn(p,a),this.positionNewBlock(i,a),a}positionNewBlock(i,a){const p=this.targetWorkspace;var w=p.getOriginOffsetInPixels(),k=this.workspace_.getOriginOffsetInPixels();i=i.getRelativeToSurfaceXY(),i.scale(this.workspace_.scale),k=_n.sum(k,i),w=_n.difference(k,w),w.scale(1/p.scale),a.moveTo(new _n(w.x,w.y))}};dn.FlyoutItemType=Ln;var Yn=class extends dn{constructor(i){super(i),this.horizontalLayout=!0}setMetrics_(i){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),p=a.getScrollMetrics(),w=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof i.x=="number"&&(this.workspace_.scrollX=-(p.left+(p.width-w.width)*i.x)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var i=this.targetWorkspace.getMetricsManager();const a=i.getAbsoluteMetrics(),p=i.getViewMetrics();i=i.getToolboxMetrics();const w=this.toolboxPosition_===pr.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?w?i.height:p.height-this.height_:w?0:p.height:w?0:p.height+a.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var i=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=i.width,this.setBackgroundPath(i.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),i=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,i,a)}}setBackgroundPath(i,a){const p=this.toolboxPosition_===pr.TOP,w=["M 0,"+(p?0:this.CORNER_RADIUS)];p?(w.push("h",i+2*this.CORNER_RADIUS),w.push("v",a),w.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),w.push("h",-i),w.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(w.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),w.push("h",i),w.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),w.push("v",a),w.push("h",-i-2*this.CORNER_RADIUS)),w.push("z"),this.svgBackground_.setAttribute("d",w.join(" "))}scrollToStart(){let i;(i=this.workspace_.scrollbar)==null||i.setX(this.RTL?1/0:0)}wheel_(i){var a=vt(i);if(a=a.x||a.y){const p=this.workspace_.getMetricsManager(),w=p.getScrollMetrics();a=p.getViewMetrics().left-w.left+a;let k;(k=this.workspace_.scrollbar)==null||k.setX(a),Ql(),al()}i.preventDefault(),i.stopPropagation()}layout_(i,a){this.workspace_.scale=this.targetWorkspace.scale;const p=this.MARGIN;let w=p+this.tabWidth_;this.RTL&&(i=i.reverse());for(let Ue=0,Yt;Yt=i[Ue];Ue++)if(Yt.type==="block"){var k=Yt.block,j=k.getDescendants(!1);for(let bl=0,Qa;Qa=j[bl];bl++)Qa.isInFlyout=!0;j=k.getSvgRoot();const jn=k.getHeightWidth();var ve=k.outputConnection?this.tabWidth_:0;ve=this.RTL?w+jn.width:w-ve,k.moveBy(ve,p),ve=this.createRect_(k,ve,p,jn,Ue),w+=jn.width+a[Ue],this.addBlockListeners_(j,k,ve)}else Yt.type==="button"&&(k=Yt.button,this.initFlyoutButton_(k,w,p),w+=k.width+a[Ue])}isDragTowardWorkspace(i){i=Math.atan2(i.y,i.x)/Math.PI*180;const a=this.dragAngleRange_;return i<90+a&&i>90-a||i>-90-a&&i<-90+a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const i=this.svgGroup_.getBoundingClientRect(),a=i.top;return this.toolboxPosition_===pr.TOP?new Oi(-1e9,a+i.height,-1e9,1e9):new Oi(a,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let i=0;const a=this.workspace_.getTopBlocks(!1);for(let w=0,k;k=a[w];w++)i=Math.max(i,k.getHeightWidth().height);const p=this.buttons_;for(let w=0,k;k=p[w];w++)i=Math.max(i,k.height);if(i+=1.5*this.MARGIN,i*=this.workspace_.scale,i+=xa.scrollbarThickness,this.height_!==i){for(let w=0,k;k=a[w];w++)this.rectMap_.has(k)&&this.moveRectToBlock_(this.rectMap_.get(k),k);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==pr.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+i),this.height_=i,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};r(Ft.FLYOUTS_HORIZONTAL_TOOLBOX,Nl,Yn);var er=class extends dn{constructor(i){super(i)}setMetrics_(i){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),p=a.getScrollMetrics(),w=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof i.y=="number"&&(this.workspace_.scrollY=-(p.top+(p.height-w.height)*i.y)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){if(!this.isVisible())return 0;var i=this.targetWorkspace.getMetricsManager();const a=i.getAbsoluteMetrics(),p=i.getViewMetrics();return i=i.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===pr.LEFT?i.width:p.width-this.width_:this.toolboxPosition_===pr.LEFT?0:p.width:this.toolboxPosition_===pr.LEFT?0:p.width+a.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var i=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=i.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,i.height-2*this.CORNER_RADIUS),i=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,i,a)}}setBackgroundPath(i,a){const p=this.toolboxPosition_===pr.RIGHT;var w=i+this.CORNER_RADIUS;w=["M "+(p?w:0)+",0"],w.push("h",p?-i:i),w.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,p?0:1,p?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),w.push("v",Math.max(0,a)),w.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,p?0:1,p?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),w.push("h",p?i:-i),w.push("z"),this.svgBackground_.setAttribute("d",w.join(" "))}scrollToStart(){let i;(i=this.workspace_.scrollbar)==null||i.setY(0)}wheel_(i){var a=vt(i);if(a.y){const p=this.workspace_.getMetricsManager(),w=p.getScrollMetrics();a=p.getViewMetrics().top-w.top+a.y;let k;(k=this.workspace_.scrollbar)==null||k.setY(a),Ql(),al()}i.preventDefault(),i.stopPropagation()}layout_(i,a){this.workspace_.scale=this.targetWorkspace.scale;var p=this.MARGIN;const w=this.RTL?p:p+this.tabWidth_;for(let Ue=0,Yt;Yt=i[Ue];Ue++)if(Yt.type==="block"){var k=Yt.block,j=k.getDescendants(!1);for(let bl=0,Qa;Qa=j[bl];bl++)Qa.isInFlyout=!0;j=k.getSvgRoot();const jn=k.getHeightWidth();var ve=k.outputConnection?w-this.tabWidth_:w;k.moveBy(ve,p),ve=this.createRect_(k,this.RTL?ve-jn.width:ve,p,jn,Ue),this.addBlockListeners_(j,k,ve),p+=jn.height+a[Ue]}else Yt.type==="button"&&(k=Yt.button,this.initFlyoutButton_(k,w,p),p+=k.height+a[Ue])}isDragTowardWorkspace(i){i=Math.atan2(i.y,i.x)/Math.PI*180;const a=this.dragAngleRange_;return i<a&&i>-a||i<-180+a||i>180-a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const i=this.svgGroup_.getBoundingClientRect(),a=i.left;return this.toolboxPosition_===pr.LEFT?new Oi(-1e9,1e9,-1e9,a+i.width):new Oi(-1e9,1e9,a,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let i=0;var a=this.workspace_.getTopBlocks(!1);for(let w=0,k;k=a[w];w++){var p=k.getHeightWidth().width;k.outputConnection&&(p-=this.tabWidth_),i=Math.max(i,p)}for(let w=0,k;k=this.buttons_[w];w++)i=Math.max(i,k.width);if(i+=1.5*this.MARGIN+this.tabWidth_,i*=this.workspace_.scale,i+=xa.scrollbarThickness,this.width_!==i){for(let w=0,k;k=a[w];w++){if(this.RTL){p=k.getRelativeToSurfaceXY().x;let j=i/this.workspace_.scale-this.MARGIN;k.outputConnection||(j-=this.tabWidth_),k.moveBy(j-p,0)}this.rectMap_.has(k)&&this.moveRectToBlock_(this.rectMap_.get(k),k)}if(this.RTL)for(let w=0,k;k=this.buttons_[w];w++)a=k.getPosition().y,k.moveTo(i/this.workspace_.scale-k.width-this.MARGIN-this.tabWidth_,a);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==pr.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+i,this.targetWorkspace.scrollY),this.width_=i,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};er.registryName="verticalFlyout",r(Ft.FLYOUTS_VERTICAL_TOOLBOX,Nl,er);var ua;t.CodeGenerator$$module$build$src$core$generator=class{constructor(i){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=i,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(i){i||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),i=A());var a=[];this.init(i),i=i.getTopBlocks(!0);for(let p=0,w;w=i[p];p++){let k=this.blockToCode(w);Array.isArray(k)&&(k=k[0]),k&&(w.outputConnection&&(k=this.scrubNakedValue(k),this.STATEMENT_PREFIX&&!w.suppressPrefixSuffix&&(k=this.injectId(this.STATEMENT_PREFIX,w)+k),this.STATEMENT_SUFFIX&&!w.suppressPrefixSuffix&&(k+=this.injectId(this.STATEMENT_SUFFIX,w))),a.push(k))}return a=a.join(`
`),a=this.finish(a),a=a.replace(/^\s+\n/,""),a=a.replace(/\n\s+$/,`
`),a=a.replace(/[ \t]+\n/g,`
`)}prefixLines(i,a){return a+i.replace(/(?!\n$)\n/g,`
`+a)}allNestedComments(i){const a=[];i=i.getDescendants(!0);for(let p=0;p<i.length;p++){const w=i[p].getCommentText();w&&a.push(w)}return a.length&&a.push(""),a.join(`
`)}blockToCode(i,a){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!i)return"";if(!i.isEnabled())return a?"":this.blockToCode(i.getNextBlock());if(i.isInsertionMarker())return a?"":this.blockToCode(i.getChildren(!1)[0]);var p=this.forBlock[i.type];if(!p&&this[i.type]&&(xe("block generator functions on CodeGenerator objects","10.0","11.0","the .forBlock[blockType] dictionary"),p=this[i.type]),typeof p!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${i.type}".`);if(p=p.call(i,i,this),Array.isArray(p)){if(!i.outputConnection)throw TypeError("Expecting string from statement block: "+i.type);return[this.scrub_(i,p[0],a),p[1]]}if(typeof p=="string")return this.STATEMENT_PREFIX&&!i.suppressPrefixSuffix&&(p=this.injectId(this.STATEMENT_PREFIX,i)+p),this.STATEMENT_SUFFIX&&!i.suppressPrefixSuffix&&(p+=this.injectId(this.STATEMENT_SUFFIX,i)),this.scrub_(i,p,a);if(p===null)return"";throw SyntaxError("Invalid code generated: "+p)}valueToCode(i,a,p){if(isNaN(p))throw TypeError("Expecting valid order from block: "+i.type);var w=i.getInputTargetBlock(a);if(!w||(a=this.blockToCode(w),a===""))return"";if(!Array.isArray(a))throw TypeError(`Expecting tuple from value block: ${w.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(i=a[0],a=a[1],isNaN(a))throw TypeError("Expecting valid order from value block: "+w.type);if(!i)return"";w=!1;var k=Math.floor(p);const j=Math.floor(a);if(k<=j&&(k!==j||k!==0&&k!==99)){for(w=!0,k=0;k<this.ORDER_OVERRIDES.length;k++)if(this.ORDER_OVERRIDES[k][0]===p&&this.ORDER_OVERRIDES[k][1]===a){w=!1;break}}return w&&(i="("+i+")"),i}statementToCode(i,a){if(i=i.getInputTargetBlock(a),a=this.blockToCode(i),typeof a!="string")throw TypeError("Expecting code from statement block: "+(i&&i.type));return a&&(a=this.prefixLines(a,this.INDENT)),a}addLoopTrap(i,a){return this.INFINITE_LOOP_TRAP&&(i=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,a),this.INDENT)+i),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(i=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,a),this.INDENT)+i),this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(i+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,a),this.INDENT)),i}injectId(i,a){return a=a.id.replace(/\$/g,"$$$$"),i.replace(/%1/g,"'"+a+"'")}addReservedWords(i){this.RESERVED_WORDS_+=i+","}provideFunction_(i,a){if(!this.definitions_[i]){const p=this.nameDB_.getDistinctName(i,t.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[i]=p,Array.isArray(a)&&(a=a.join(`
`)),a=a.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,p);let w;for(;w!==a;)w=a,a=a.replace(/^(( {2})*) {2}/gm,"$1\0");a=a.replace(/\0/g,this.INDENT),this.definitions_[i]=a}return this.functionNames_[i]}getVariableName(i){return this.getName(i,t.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(i){return this.getName(i,t.NameType$$module$build$src$core$names.PROCEDURE)}getName(i,a){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(i,a)}init(i){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(i,a,p){return a}finish(i){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),i}scrubNakedValue(i){return i}},ua={},ua.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator;var to=!1,Ds={};Ds.Align=t.Align$$module$build$src$core$inputs$align,Ds.DummyInput=Np,Ds.EndRowInput=bm,Ds.Input=ns,Ds.StatementInput=id,Ds.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input,Ds.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types;var yi="The insertion marker previewer tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Hl=class{constructor(i){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=i.workspace}previewReplacement(i,a,p){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=p,p.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(a)&&(a.highlight(),this.staticConn=a)}finally{t.enable$$module$build$src$core$events$utils()}}previewConnection(i,a){if(i!==this.draggedConn||a!==this.staticConn){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(i,a)&&(this.markerConn=this.previewMarker(i,a)),this.workspace.getRenderer().shouldHighlightConnection(a)&&a.highlight(),this.draggedConn=i,this.staticConn=a}finally{t.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(i,a){return a.type===zn.PREVIOUS_STATEMENT||a.type===zn.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof E)}previewMarker(i,a){const p=i.getSourceBlock(),w=this.createInsertionMarker(p),k=this.getMatchingConnection(p,w,i);if(!k)throw Error("Could not create insertion marker to preview connection");w.queueRender(),xi(),k.connect(a);const j={x:a.x-k.x,y:a.y-k.y},ve=k.getOffsetInBlock().clone();return vr().then(()=>{w==null||w.positionNearConnection(k,j,ve),w==null||w.getSvgRoot().setAttribute("visibility","visible")}),k}createInsertionMarker(i){const a=this.workspace.newBlock(i.type);if(a.setInsertionMarker(!0),i.saveExtraState){var p=i.saveExtraState(!0);p&&a.loadExtraState&&a.loadExtraState(p)}else i.mutationToDom&&(p=i.mutationToDom())&&a.domToMutation&&a.domToMutation(p);for(p=0;p<i.inputList.length;p++){const w=i.inputList[p];if(w.name===Pg)continue;const k=a.inputList[p];if(!k)throw Error(yi.replace("%1","an input"));for(let j=0;j<w.fieldRow.length;j++){const ve=w.fieldRow[j],Ue=k.fieldRow[j];if(!Ue)throw Error(yi.replace("%1","a field"));Ue.setValue(ve.getValue())}}for(const w of a.getDescendants(!1))w.setInsertionMarker(!0);return a.setCollapsed(i.isCollapsed()),a.setInputsInline(i.getInputsInline()),a.initSvg(),a.getSvgRoot().setAttribute("visibility","hidden"),a}getMatchingConnection(i,a,p){if(i=i.getConnections_(!0),a=a.getConnections_(!0),i.length!==a.length)return null;for(let w=0;w<i.length;w++)if(i[w]===p)return a[w];return null}hidePreview(){t.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{t.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(i){const a=i.getSourceBlock(),p=a.outputConnection;let w;if((w=a.previousConnection)!=null&&w.targetConnection||p!=null&&p.targetConnection)a.unplug(!0);else{let k;(k=i.targetBlock())==null||k.unplug(!1)}a.dispose()}dispose(){this.hidePreview()}};r(Ft.CONNECTION_PREVIEWER,Nl,Hl);var Ac=class extends k_{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(i){return super.getCSS_(i).concat([`${i} .blocklyInsertionMarker>.blocklyPathLight,`,`${i} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},jv=class{constructor(i){this.inlineSteps_=this.steps_="",this.info_=i,this.RTL_=this.info_.RTL,i=i.getRenderer(),this.constants_=i.getConstants(),this.highlightConstants_=i.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(i){this.steps_+=Ui(i.xPos,this.info_.startY);for(let a=0,p;p=i.elements[a];a++)ut.isLeftSquareCorner(p)?this.steps_+=this.highlightConstants_.START_POINT:ut.isLeftRoundedCorner(p)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):ut.isPreviousConnection(p)?this.steps_+=this.notchPaths_.pathLeft:ut.isHat(p)?this.steps_+=this.startPaths_.path(this.RTL_):ut.isSpacer(p)&&p.width!==0&&(this.steps_+=xn("H",p.xPos+p.width-this.highlightOffset));this.steps_+=xn("H",i.xPos+i.width-this.highlightOffset)}drawJaggedEdge_(i){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+xn("v",i.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(i){const a=i.getLastInput();if(this.RTL_){const p=i.height-a.connectionHeight;this.steps_+=Js(a.xPos+a.width-this.highlightOffset,i.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+xn("v",p)}else this.steps_+=Js(a.xPos+a.width,i.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(i){const a=i.getLastInput();if(a)if(this.RTL_){const p=i.height-2*this.insideCornerPaths_.height;this.steps_+=Js(a.xPos,i.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+xn("v",p)+this.insideCornerPaths_.pathBottom(this.RTL_)+iu(i.width-a.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Js(a.xPos,i.yPos+i.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+iu(i.width-a.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(i){const a=i.xPos+i.width-this.highlightOffset;i instanceof fb&&i.followsStatement&&(this.steps_+=xn("H",a)),this.RTL_&&(this.steps_+=xn("H",a),i.height>this.highlightOffset&&(this.steps_+=xn("V",i.yPos+i.height-this.highlightOffset)))}drawBottomRow(i){if(this.RTL_)this.steps_+=xn("V",i.baseline-this.highlightOffset);else{const a=this.info_.bottomRow.elements[0];ut.isLeftSquareCorner(a)?this.steps_+=Js(i.xPos+this.highlightOffset,i.baseline-this.highlightOffset):ut.isLeftRoundedCorner(a)&&(this.steps_+=Js(i.xPos,i.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var i=this.info_.outputConnection;i&&(i=i.connectionOffsetY+i.height,this.RTL_?this.steps_+=Js(this.info_.startX,i):(this.steps_+=Js(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=xn("V",i)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(i=this.info_.topRow,ut.isLeftRoundedCorner(i.elements[0])?this.steps_+=xn("V",this.outsideCornerPaths_.height):this.steps_+=xn("V",i.capline+this.highlightOffset))}drawInlineInput(i){const a=this.highlightOffset,p=i.xPos+i.connectionWidth;var w=i.centerline-i.height/2;const k=i.width-i.connectionWidth,j=w+a;this.RTL_?(w=i.connectionOffsetY-a,i=i.height-(i.connectionOffsetY+i.connectionHeight)+a,this.inlineSteps_+=Js(p-a,j)+xn("v",w)+this.puzzleTabPaths_.pathDown(this.RTL_)+xn("v",i)+xn("h",k)):this.inlineSteps_+=Js(i.xPos+i.width+a,j)+xn("v",i.height)+xn("h",-k)+Js(p,w+i.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},lz=class extends O_{constructor(i,a){super(i,a),this.highlighter_=new jv(a)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const i=this.block_.pathObject;i.setPath(this.outlinePath_+`
`+this.inlinePath_),i.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&i.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(i){this.highlighter_.drawJaggedEdge_(i),super.drawJaggedEdge_(i)}drawValueInput_(i){this.highlighter_.drawValueInput(i),super.drawValueInput_(i)}drawStatementInput_(i){this.highlighter_.drawStatementInput(i),super.drawStatementInput_(i)}drawRightSideRow_(i){this.highlighter_.drawRightSideRow(i),this.outlinePath_+=xn("H",i.xPos+i.width)+xn("V",i.yPos+i.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(i){this.highlighter_.drawInlineInput(i),super.drawInlineInput_(i)}positionInlineInputConnection_(i){const a=i.centerline-i.height/2;if(i.connectionModel){let p=i.xPos+i.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(p*=-1),i.connectionModel.setOffsetInBlock(p,a+i.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(i){const a=i.getLastInput();if(a!=null&&a.connectionModel){let p=i.xPos+i.statementEdge+a.notchOffset;p=this.info_.RTL?-1*p:p+this.constants_.DARK_PATH_OFFSET,a.connectionModel.setOffsetInBlock(p,i.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(i){const a=i.getLastInput();if(a&&a.connectionModel){let p=i.xPos+i.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(p*=-1),a.connectionModel.setOffsetInBlock(p,i.yPos)}}positionNextConnection_(){const i=this.info_.bottomRow;if(i.connection){const a=i.connection,p=a.xPos;a.connectionModel.setOffsetInBlock((this.info_.RTL?-p:p)+this.constants_.DARK_PATH_OFFSET/2,i.baseline+this.constants_.DARK_PATH_OFFSET)}}},uz=class{constructor(i){this.OFFSET=.5,this.constantProvider=i,this.START_POINT=Ui(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const i=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,p=(1-Math.SQRT1_2)*(i+a)-a,w=Ui(p,p)+mi("a","0 0,0",i,Kn(-p-a,i-p)),k=mi("a","0 0,0",i+a,Kn(i+a,i+a)),j=Ui(p,-p)+mi("a","0 0,0",i+a,Kn(i-p,p+a));return{width:i+a,height:i,pathTop(ve){return ve?w:""},pathBottom(ve){return ve?k:j}}}makeOutsideCorner(){const i=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,p=(1-Math.SQRT1_2)*(i-a)+a,w=Ui(p,p)+mi("a","0 0,1",i-a,Kn(i-p,-p+a)),k=Ui(a,i)+mi("a","0 0,1",i-a,Kn(i,-i+a)),j=-p,ve=Ui(p,j)+mi("a","0 0,1",i-a,Kn(-p+a,-j-i));return{height:i,topLeft(Ue){return Ue?w:k},bottomLeft(){return ve}}}makePuzzleTab(){const i=this.constantProvider.TAB_WIDTH,a=this.constantProvider.TAB_HEIGHT,p=Ui(-2,-a+3.4)+iu(-.45*i,-2.1),w=xn("v",2.5)+Ui(.97*-i,2.5)+Ws("q",[Kn(.05*-i,10),Kn(.3*i,9.5)])+Ui(.67*i,-1.9)+xn("v",2.5),k=xn("v",-1.5)+Ui(-.92*i,-.5)+Ws("q",[Kn(-.19*i,-5.5),Kn(0,-11)])+Ui(.92*i,1),j=Ui(-5,a-.7)+iu(.46*i,-2.1);return{width:i,height:a,pathUp(ve){return ve?p:k},pathDown(ve){return ve?w:j}}}makeNotch(){return{pathLeft:xn("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:iu(5.1,2.6)+Ui(-10.2,6.8)+iu(5.1,2.6),height:12,width:10.2}}makeStartHat(){const i=this.constantProvider.START_HAT.height,a=Ui(25,-8.7)+Ws("c",[Kn(29.7,-6.2),Kn(57.2,-.5),Kn(75,8.7)]),p=Ws("c",[Kn(17.8,-9.2),Kn(45.3,-14.9),Kn(75,-8.7)])+Js(100.5,i+.5);return{path(w){return w?a:p}}}},cz=class extends hb{constructor(i,a){super(i,a),this.constants_=i,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},hz=class extends R_{constructor(i,a){super(i,a),this.constants_=i,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},dz=class extends k0{constructor(i,a){super(i,a),this.renderer_=i}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof id||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(i,a){this.isInline&&i instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new cz(this.constants_,i)),a.hasInlineInput=!0):i instanceof id?(a.elements.push(new hz(this.constants_,i)),a.hasStatement=!0):i instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new Bv(this.constants_,i)),a.hasExternalInput=!0):(i instanceof Np||i instanceof bm)&&(a.minHeight=Math.max(a.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),this.isInline||a.align!==null||(a.align=i.align)}addElemSpacing_(){let i=!1;for(let p=0,w;w=this.rows[p];p++)w.hasExternalInput&&(i=!0);for(let p=0,w;w=this.rows[p];p++){var a=w.elements;if(w.elements=[],w.startsWithElemSpacer()&&w.elements.push(new qd(this.constants_,this.getInRowSpacing_(null,a[0]))),a.length){for(let k=0;k<a.length-1;k++){w.elements.push(a[k]);const j=this.getInRowSpacing_(a[k],a[k+1]);w.elements.push(new qd(this.constants_,j))}w.elements.push(a[a.length-1]),w.endsWithElemSpacer()&&(a=this.getInRowSpacing_(a[a.length-1],null),i&&w.hasDummyInput&&(a+=this.constants_.TAB_WIDTH),w.elements.push(new qd(this.constants_,a)))}}}getInRowSpacing_(i,a){if(!i)return a&&ut.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&ut.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&ut.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ut.isInput(i)&&(!a||ut.isStatementInput(a)))return ut.isField(i)&&i.isEditable?this.constants_.MEDIUM_PADDING:ut.isIcon(i)?2*this.constants_.LARGE_PADDING+1:ut.isHat(i)?this.constants_.NO_PADDING:ut.isPreviousOrNextConnection(i)?this.constants_.LARGE_PADDING:ut.isLeftRoundedCorner(i)?this.constants_.MIN_BLOCK_WIDTH:ut.isJaggedEdge(i)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ut.isInput(i)&&!a){if(ut.isExternalInput(i))return this.constants_.NO_PADDING;if(ut.isInlineInput(i))return this.constants_.LARGE_PADDING;if(ut.isStatementInput(i))return this.constants_.NO_PADDING}if(!ut.isInput(i)&&a&&ut.isInput(a)){if(ut.isField(i)&&i.isEditable){if(ut.isInlineInput(a)||ut.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(ut.isInlineInput(a)||ut.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(ut.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ut.isIcon(i)&&a&&!ut.isInput(a))return this.constants_.LARGE_PADDING;if(ut.isInlineInput(i)&&a&&ut.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ut.isLeftSquareCorner(i)&&a){if(ut.isHat(a))return this.constants_.NO_PADDING;if(ut.isPreviousConnection(a))return a.notchOffset;if(ut.isNextConnection(a))return a.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(ut.isLeftRoundedCorner(i)&&a){if(ut.isPreviousConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS;if(ut.isNextConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return ut.isField(i)&&a&&ut.isField(a)&&i.isEditable===a.isEditable||a&&ut.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(i,a){return ut.isTopRow(i)&&ut.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ut.isTopRow(i)||ut.isBottomRow(a)?this.constants_.NO_PADDING:i.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!i.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:i.hasStatement&&a.hasStatement||!i.hasStatement&&a.hasDummyInput||i.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(i,a){if(ut.isSpacer(a))return i.yPos+a.height/2;if(ut.isBottomRow(i))return i=i.yPos+i.height-i.descenderHeight,ut.isNextConnection(a)?i+a.height/2:i-a.height/2;if(ut.isTopRow(i))return ut.isHat(a)?i.capline-a.height/2:i.capline+a.height/2;let p=i.yPos;return ut.isField(a)||ut.isIcon(a)?(p+=a.height/2,(i.hasInlineInput||i.hasStatement)&&a.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=i.height&&(p+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):p=ut.isInlineInput(a)?p+a.height/2:p+i.height/2,p}alignRowElements_(){if(this.isInline){var i=0,a=new WeakMap,p=null;for(let w=this.rows.length-1,k;k=this.rows[w];w--)a.set(k,i),ut.isInputRow(k)&&(k.hasStatement&&this.alignStatementRow_(k),p&&p.hasStatement&&k.width<p.width?a.set(k,p.width):i=k.hasStatement?k.width:Math.max(i,k.width),p=k);i=0;for(let w=0,k;k=this.rows[w];w++)k.hasStatement?i=this.getDesiredRowWidth_(k):ut.isSpacer(k)?k.width=Math.max(i,a.get(k)):(p=k.width,i=Math.max(i,a.get(k))-p,0<i&&this.addAlignmentPadding_(k,i),i=k.width)}else super.alignRowElements_()}getDesiredRowWidth_(i){return this.isInline&&i.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(i)}finalize_(){let i=0,a=0;for(let w=0,k;k=this.rows[w];w++){k.yPos=a,k.xPos=this.startX,a+=k.height,i=Math.max(i,k.widthWithConnectedBlocks);var p=a-this.topRow.ascenderHeight;k===this.bottomRow&&p<this.constants_.MIN_BLOCK_HEIGHT&&(p=this.constants_.MIN_BLOCK_HEIGHT-p,this.bottomRow.height+=p,a+=p),this.recordElemPositions_(k)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(p=this.block_.nextConnection.targetBlock())&&(i=Math.max(i,p.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=i+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=a+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},fz=class extends O0{constructor(i,a,p){super(i,a,p),this.constants=p,this.colourDark="#000000",this.svgPathDark=se(Ve.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=se(Ve.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(i){this.svgPath.setAttribute("d",i),this.svgPathDark.setAttribute("d",i)}setHighlightPath(i){this.svgPathLight.setAttribute("d",i)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(i){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(i),this.svgPath.setAttribute("stroke","none")}setStyle(i){this.style=i,this.colourDark=Vc("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(i){i?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(i){if(i){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(i){super.updateDisabled_(i),i&&this.svgPath.setAttribute("stroke","none")}},pz=class extends D_{constructor(i){super(i),this.highlightConstants=null}init(i,a){super.init(i,a),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(i,a){super.refreshDom(i,a),this.getHighlightConstants().init()}makeConstants_(){return new Ac}makeRenderInfo_(i){return new dz(this,i)}makeDrawer_(i,a){return new lz(i,a)}makePathObject(i,a){return new fz(i,a,this.getConstants())}makeHighlightConstants_(){return new uz(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};ki("geras",pz);var G0={};G0.ConstantProvider=Ac,G0.Drawer=lz,G0.HighlightConstantProvider=uz,G0.Highlighter=jv,G0.InlineInput=cz,G0.PathObject=fz,G0.RenderInfo=dz,G0.Renderer=pz,G0.StatementInput=hz;var mz=class extends k_{constructor(){super(),xe("Blockly.minimalist.ConstantProvider","v10","v11","Blockly.blockRendering.ConstantProvider")}},gz=class extends O_{constructor(i,a){super(i,a),xe("Blockly.minimalist.Drawer","v10","v11","Blockly.blockRendering.Drawer")}},_z=class extends k0{constructor(i,a){super(i,a),xe("Blockly.minimalist.RenderInfo","v10","v11","Blockly.blockRendering.RenderInfo")}getRenderer(){return this.renderer_}},vz=class extends D_{constructor(i){super(i),xe("Blockly.minimalist.Renderer","v10","v11","Blockly.blockRendering.Renderer")}makeConstants_(){return new mz}makeRenderInfo_(i){return new _z(this,i)}makeDrawer_(i,a){return new gz(i,a)}};ki("minimalist",vz);var DE={};DE.ConstantProvider=mz,DE.Drawer=gz,DE.RenderInfo=_z,DE.Renderer=vz;var yz=class extends k0{constructor(i,a){super(i,a)}getRenderer(){return this.renderer_}addElemSpacing_(){let i=!1;for(var a=0;a<this.rows.length;a++)if(this.rows[a].hasExternalInput){i=!0;break}for(a=0;a<this.rows.length;a++){const w=this.rows[a];var p=w.elements;if(w.elements=[],w.startsWithElemSpacer()&&w.elements.push(new qd(this.constants_,this.getInRowSpacing_(null,p[0]))),p.length){for(let k=0;k<p.length-1;k++){w.elements.push(p[k]);const j=this.getInRowSpacing_(p[k],p[k+1]);w.elements.push(new qd(this.constants_,j))}w.elements.push(p[p.length-1]),w.endsWithElemSpacer()&&(p=this.getInRowSpacing_(p[p.length-1],null),i&&w.hasDummyInput&&(p+=this.constants_.TAB_WIDTH),w.elements.push(new qd(this.constants_,p)))}}}getInRowSpacing_(i,a){if(!i)return a&&ut.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&ut.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&ut.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ut.isInput(i)&&!a)return ut.isField(i)&&i.isEditable?this.constants_.MEDIUM_PADDING:ut.isIcon(i)?2*this.constants_.LARGE_PADDING+1:ut.isHat(i)?this.constants_.NO_PADDING:ut.isPreviousOrNextConnection(i)?this.constants_.LARGE_PADDING:ut.isLeftRoundedCorner(i)?this.constants_.MIN_BLOCK_WIDTH:ut.isJaggedEdge(i)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ut.isInput(i)&&!a){if(ut.isExternalInput(i))return this.constants_.NO_PADDING;if(ut.isInlineInput(i))return this.constants_.LARGE_PADDING;if(ut.isStatementInput(i))return this.constants_.NO_PADDING}if(!ut.isInput(i)&&a&&ut.isInput(a)){if(ut.isField(i)&&i.isEditable){if(ut.isInlineInput(a)||ut.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(ut.isInlineInput(a)||ut.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(ut.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ut.isIcon(i)&&a&&!ut.isInput(a))return this.constants_.LARGE_PADDING;if(ut.isInlineInput(i)&&a&&ut.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ut.isLeftSquareCorner(i)&&a){if(ut.isHat(a))return this.constants_.NO_PADDING;if(ut.isPreviousConnection(a)||ut.isNextConnection(a))return a.notchOffset}return ut.isLeftRoundedCorner(i)&&a?a.notchOffset-this.constants_.CORNER_RADIUS:ut.isField(i)&&a&&ut.isField(a)&&i.isEditable===a.isEditable||a&&ut.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(i,a){return ut.isTopRow(i)&&ut.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ut.isTopRow(i)||ut.isBottomRow(a)?this.constants_.NO_PADDING:i.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!i.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:i.hasStatement&&a.hasStatement||i.hasDummyInput||a.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(i,a){if(ut.isSpacer(a))return i.yPos+a.height/2;if(ut.isBottomRow(i))return i=i.yPos+i.height-i.descenderHeight,ut.isNextConnection(a)?i+a.height/2:i-a.height/2;if(ut.isTopRow(i))return ut.isHat(a)?i.capline-a.height/2:i.capline+a.height/2;let p=i.yPos;return p=ut.isField(a)&&i.hasStatement?p+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+a.height/2):p+i.height/2}finalize_(){let i=0,a=0;for(var p=0;p<this.rows.length;p++){const k=this.rows[p];k.yPos=a,k.xPos=this.startX,a+=k.height,i=Math.max(i,k.widthWithConnectedBlocks);var w=a-this.topRow.ascenderHeight;k===this.bottomRow&&w<this.constants_.MIN_BLOCK_HEIGHT&&(w=this.constants_.MIN_BLOCK_HEIGHT-w,this.bottomRow.height+=w,a+=w),this.recordElemPositions_(k)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(p=this.block_.nextConnection.targetBlock())&&(i=Math.max(i,p.getHeightWidth().width)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=i+this.startX,this.height=a,this.startY=this.topRow.capline}},bz=class extends D_{constructor(i){super(i)}makeRenderInfo_(i){return new yz(this,i)}};ki("thrasos",bz);var k2={};k2.RenderInfo=yz,k2.Renderer=bz;var Cte={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},Mte={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},Ate=new Dg("zelos",Cte,Mte),Ite={Classic:Ov,Zelos:Ate},O2=class{constructor(i,a,p){this.id_=i.toolboxitemid||Z(),this.level_=(this.parent_=p||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=i,this.parentToolbox_=a,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(i){}},Fg=class extends O2{constructor(i,a,p){super(i,a,p),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(i){if("custom"in i)this.flyoutItems_=i.custom;else if(i=i.contents)for(let a=0;a<i.length;a++){const p=i[a];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(p)}}parseCategoryDef_(i){this.name_="name"in i?Vr(i.name):"",this.colour_=this.getColour_(i),Object.assign(this.cssConfig_,i.cssconfig||i.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),ci(this.htmlDiv_,oh.TREEITEM),Er(this.htmlDiv_,To.SELECTED,!1),Er(this.htmlDiv_,To.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),ci(this.iconDom_,oh.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const i=this.labelDom_.getAttribute("id");return i&&Er(this.htmlDiv_,To.LABELLEDBY,i),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const i=document.createElement("div"),a=this.cssConfig_.container;return a&&$e(i,a),i}createRowContainer_(){const i=document.createElement("div");var a=this.cssConfig_.row;return a&&$e(i,a),a=`${Fg.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?i.style.paddingRight=a:i.style.paddingLeft=a,i}createRowContentsContainer_(){const i=document.createElement("div"),a=this.cssConfig_.rowcontentcontainer;return a&&$e(i,a),i}createIconDom_(){const i=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&$e(i,a)}return i.style.display="inline-block",i}createLabelDom_(i){const a=document.createElement("span");return a.setAttribute("id",this.getId()+".label"),a.textContent=i,(i=this.cssConfig_.label)&&$e(a,i),a}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(i){i&&(i=Fg.borderWidth+"px solid "+(i||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=i:this.rowDiv_.style.borderLeft=i)}getColour_(i){const a=i.categorystyle||i.categoryStyle;if((i=i.colour)&&a)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(a)return this.getColourfromStyle_(a);if(i)return this.parseColour_(i)}return""}getColourfromStyle_(i){var a=this.workspace_.getTheme();if(i&&a){if((a=a.categoryStyles[i])&&a.colour)return this.parseColour_(a.colour);console.warn('Style "'+i+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(i){if(i=Vr(i),i==null||i==="")return"";var a=Number(i);return isNaN(a)?(a=na(i))?a:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+i),""):gc(a)}openIcon_(i){if(i){var a=this.cssConfig_.closedicon;a&&ht(i,a),(a=this.cssConfig_.openicon)&&$e(i,a)}}closeIcon_(i){if(i){var a=this.cssConfig_.openicon;a&&ht(i,a),(a=this.cssConfig_.closedicon)&&$e(i,a)}}setVisible_(i){this.htmlDiv_.style.display=i?"block":"none",this.isHidden_=!i,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let i=this;for(;i.getParent();)if(i=i.getParent(),!i.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(i){}setSelected(i){if(this.rowDiv_){var a=this.cssConfig_.selected;if(i){const p=this.parseColour_(Fg.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||p,a&&$e(this.rowDiv_,a)}else this.rowDiv_.style.backgroundColor="",a&&St(this.rowDiv_,a);Er(this.htmlDiv_,To.SELECTED,i)}}setDisabled(i){this.isDisabled_=i,this.getDiv().setAttribute("disabled",`${i}`),i?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(i){this.flyoutItems_=[],this.toolboxItemDef_=typeof i=="string"?{kind:this.toolboxItemDef_.kind,custom:i,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:bt(i),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){pt(this.htmlDiv_)}};Fg.registrationName="category",Fg.nestedPadding=19,Fg.borderWidth=8,Fg.defaultBackgroundColour="#57e",At(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),r(Ft.TOOLBOX_ITEM,Fg.registrationName,Fg);var PE=class extends O2{constructor(i,a){super(i,a),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,i.cssconfig||i.cssConfig)}init(){this.createDom_()}createDom_(){const i=document.createElement("div"),a=this.cssConfig_.container;return a&&$e(i,a),this.htmlDiv_=i}getDiv(){return this.htmlDiv_}dispose(){pt(this.htmlDiv_)}};PE.registrationName="sep",At(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),r(Ft.TOOLBOX_ITEM,PE.registrationName,PE);var UT=class extends Fg{constructor(i,a,p){super(i,a,p),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const i=super.makeDefaultCssConfig_();return i.contents="blocklyToolboxContents",i}parseContents_(i){if("custom"in i)this.flyoutItems_=i.custom;else{const a=i.contents;if(a){this.flyoutItems_=[],i=!0;for(let p=0;p<a.length;p++){const w=a[p];!u(Ft.TOOLBOX_ITEM,w.kind)||w.kind.toLowerCase()===PE.registrationName&&i?(this.flyoutItems_.push(w),i=!0):(this.createToolboxItem_(w),i=!1)}}}}createToolboxItem_(i){let a=i.kind;a.toUpperCase()==="CATEGORY"&&rr(i)&&(a=UT.registrationName),i=new(h(Ft.TOOLBOX_ITEM,a))(i,this.parentToolbox_,this),this.toolboxItems_.push(i)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const i=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(i),ci(this.subcategoriesDiv_,oh.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),Er(this.htmlDiv_,To.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const i=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&$e(i,a),i.style.visibility="visible"}return i.style.display="inline-block",i}createSubCategoriesDom_(i){const a=document.createElement("div");a.style.display="none";var p=this.cssConfig_.contents;for(p&&$e(a,p),p=0;p<i.length;p++){const w=i[p];w.init();const k=w.getDiv();if(a.appendChild(k),w.getClickTarget){let j;(j=w.getClickTarget())==null||j.setAttribute("id",w.getId())}}return a}setExpanded(i){if(this.expanded_!==i){if(this.expanded_=i)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let a;(a=this.parentToolbox_.getFlyout())==null||a.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}Er(this.htmlDiv_,To.EXPANDED,i),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(i){this.htmlDiv_.style.display=i?"block":"none";const a=this.getChildToolboxItems();for(let p=0;p<a.length;p++)a[p].setVisible_(i);this.isHidden_=!i,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(i){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};UT.registrationName="collapsibleCategory",r(Ft.TOOLBOX_ITEM,UT.registrationName,UT);var Tz=class extends Uv{constructor(i){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=i,this.toolboxDef_=i.options.languageTree||{contents:[]},this.horizontalLayout_=i.options.horizontalLayout,this.RTL=i.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=i.options.toolboxPosition}onShortcut(i){return!1}init(){var i=this.workspace_;const a=i.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),Ke(this.flyout_.createDom("svg"),a),this.setVisible(!0),this.flyout_.init(i),this.render(this.toolboxDef_),i=i.getThemeManager(),i.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),i.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[gl.Capability.AUTOHIDEABLE,gl.Capability.DELETE_AREA,gl.Capability.DRAG_TARGET]})}createDom_(i){i=i.getParentSvg();const a=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,ci(this.contentsDiv_,oh.TREE),a.appendChild(this.contentsDiv_),i.parentNode.insertBefore(a,i),this.attachEvents_(a,this.contentsDiv_),a}createContainer_(){const i=document.createElement("div");return i.setAttribute("layout",this.isHorizontal()?"h":"v"),$e(i,"blocklyToolboxDiv"),$e(i,"blocklyNonSelectable"),i.setAttribute("dir",this.RTL?"RTL":"LTR"),i}createContentsContainer_(){const i=document.createElement("div");return $e(i,"blocklyToolboxContents"),this.isHorizontal()&&(i.style.flexDirection="row"),i}attachEvents_(i,a){i=Ce(i,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(i),a=Ce(a,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(a)}onClick_(i){if(Nt(i)||i.target===this.HtmlDiv)A().hideChaff(!1);else{var a=i.target.getAttribute("id");a&&(a=this.getToolboxItemById(a),a.isSelectable()&&(this.setSelectedItem(a),a.onClick(i))),A().hideChaff(!0)}nt()}onKeyDown_(i){let a=!1;switch(i.key){case"ArrowDown":a=this.selectNext_();break;case"ArrowUp":a=this.selectPrevious_();break;case"ArrowLeft":a=this.selectParent_();break;case"ArrowRight":a=this.selectChild_();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),a=!0);break;default:a=!1}!a&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(a=this.selectedItem_.onKeyDown(i)),a&&i.preventDefault()}createFlyout_(){const i=this.workspace_,a=new Hi({parentWorkspace:i,rtl:i.RTL,oneBasedIndex:i.options.oneBasedIndex,horizontalLayout:i.horizontalLayout,renderer:i.options.renderer,rendererOverrides:i.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=i.options.toolboxPosition,new(i.horizontalLayout?y(Ft.FLYOUTS_HORIZONTAL_TOOLBOX,i.options,!0):y(Ft.FLYOUTS_VERTICAL_TOOLBOX,i.options,!0))(a)}render(i){this.toolboxDef_=i;for(let a=0;a<this.contents_.length;a++){const p=this.contents_[a];p&&p.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(i.contents),this.position(),this.handleToolboxItemResize()}renderContents_(i){const a=document.createDocumentFragment();for(let p=0;p<i.length;p++)this.createToolboxItem_(i[p],a);this.contentsDiv_.appendChild(a)}createToolboxItem_(i,a){var p=i.kind;p.toUpperCase()==="CATEGORY"&&rr(i)&&(p=UT.registrationName),(p=h(Ft.TOOLBOX_ITEM,p.toLowerCase()))&&(i=new p(i,this),i.init(),this.addToolboxItem_(i),(p=i.getDiv())&&a.appendChild(p),i.getClickTarget()&&i.getClickTarget().setAttribute("id",i.getId()))}addToolboxItem_(i){if(this.contents_.push(i),this.contentMap_[i.getId()]=i,i.isCollapsible()){i=i.getChildToolboxItems();for(let a=0;a<i.length;a++)this.addToolboxItem_(i[a])}}getToolboxItems(){return this.contents_}addStyle(i){i&&this.HtmlDiv&&$e(this.HtmlDiv,i)}removeStyle(i){i&&this.HtmlDiv&&St(this.HtmlDiv,i)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var i=this.HtmlDiv.getBoundingClientRect();const a=i.top,p=a+i.height,w=i.left;return i=w+i.width,this.toolboxPosition===pr.TOP?new Oi(-1e7,p,-1e7,1e7):this.toolboxPosition===pr.BOTTOM?new Oi(a,1e7,-1e7,1e7):this.toolboxPosition===pr.LEFT?new Oi(-1e7,1e7,-1e7,i):new Oi(-1e7,1e7,w,1e7)}wouldDelete(i,a){return i instanceof Dp?this.updateWouldDelete_(!i.getParent()&&i.isDeletable()):this.updateWouldDelete_(i.isDeletable()),this.wouldDelete_}onDragEnter(i){this.updateCursorDeleteStyle_(!0)}onDragExit(i){this.updateCursorDeleteStyle_(!1)}onDrop(i){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(i){i!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=i,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(i){const a=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";i?this.addStyle(a):this.removeStyle(a)}getToolboxItemById(i){return this.contentMap_[i]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const i=this.workspace_.getMetrics(),a=this.HtmlDiv;a&&(this.horizontalLayout_?(a.style.left="0",a.style.height="auto",a.style.width="100%",this.height_=a.offsetHeight,this.width_=i.viewWidth,this.toolboxPosition===pr.TOP?a.style.top="0":a.style.bottom="0"):(this.toolboxPosition===pr.RIGHT?a.style.right="0":a.style.left="0",a.style.height="100%",this.width_=a.offsetWidth,this.height_=i.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const i=this.workspace_,a=this.HtmlDiv.getBoundingClientRect();i.translate(this.toolboxPosition===pr.LEFT?i.scrollX+a.width:i.scrollX,this.toolboxPosition===pr.TOP?i.scrollY+a.height:i.scrollY),U(i)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let i=0;i<this.contents_.length;i++){const a=this.contents_[i];a.refreshTheme&&a.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(i){this.isVisible_!==i&&(this.HtmlDiv.style.display=i?"block":"none",this.isVisible_=i,this.workspace_.recordDragTargets())}autoHide(i){!i&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(i){const a=this.selectedItem_;!i&&!a||i&&!fn(i)||(this.shouldDeselectItem_(a,i)&&a!==null&&this.deselectItem_(a),this.shouldSelectItem_(a,i)&&i!==null&&this.selectItem_(a,i),this.updateFlyout_(a,i),this.fireSelectEvent_(a,i))}shouldDeselectItem_(i,a){return i!==null&&(!i.isCollapsible()||i!==a)}shouldSelectItem_(i,a){return a!==null&&a!==i}deselectItem_(i){this.selectedItem_=null,this.previouslySelectedItem_=i,i.setSelected(!1),Er(this.contentsDiv_,To.ACTIVEDESCENDANT,"")}selectItem_(i,a){this.selectedItem_=a,this.previouslySelectedItem_=i,a.setSelected(!0),Er(this.contentsDiv_,To.ACTIVEDESCENDANT,a.getId())}selectItemByPosition(i){-1<i&&i<this.contents_.length&&(i=this.contents_[i],i.isSelectable()&&this.setSelectedItem(i))}updateFlyout_(i,a){a&&(i!==a||a.isCollapsible())&&a.getContents().length?(this.flyout_.show(a.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(i,a){const p=i&&i.getName();let w=a&&a.getName();i===a&&(w=null),i=new(Ie(Xa))(p,w,this.workspace_.id),ue(i)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const i=this.selectedItem_;return i.isExpanded()?this.selectNext_():i.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let i=this.contents_.indexOf(this.selectedItem_)+1;if(-1<i&&i<this.contents_.length){let a=this.contents_[i];for(;a&&!a.isSelectable();)a=this.contents_[++i];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let i=this.contents_.indexOf(this.selectedItem_)-1;if(-1<i&&i<this.contents_.length){let a=this.contents_[i];for(;a&&!a.isSelectable();)a=this.contents_[--i];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var i=0;i<this.contents_.length;i++)this.contents_[i].dispose();for(i=0;i<this.boundEvents_.length;i++)rt(this.boundEvents_[i]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),pt(this.HtmlDiv))}};At(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),r(Ft.TOOLBOX,Nl,Tz);var Rte="10.4.3",kte=t.Align$$module$build$src$core$inputs$align.LEFT,Ote=t.Align$$module$build$src$core$inputs$align.CENTRE,Lte=t.Align$$module$build$src$core$inputs$align.RIGHT,Nte=zn.INPUT_VALUE,Dte=zn.OUTPUT_VALUE,Pte=zn.NEXT_STATEMENT,Bte=zn.PREVIOUS_STATEMENT,Fte=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY,zte=pr.TOP,Ute=pr.BOTTOM,Hte=pr.LEFT,Gte=pr.RIGHT;P_.prototype.newBlock=function(i,a){return new L0(this,i,a)},ep.prototype.newBlock=function(i,a){return new Dp(this,i,a)},ep.newTrashcan=function(i){return new RT(i)},zl.prototype.showContextMenu=function(i){if(!this.workspace.options.readOnly){var a=[];this.isDeletable()&&this.isMovable()&&(a.push(Uh(this)),a.push(eu(this))),Wu(i,a,this.RTL)}},gm.prototype.newWorkspaceSvg=function(i){return new ep(i)},t.Names$$module$build$src$core$names.prototype.populateProcedures=function(i){i=wh(i),i=i[0].concat(i[1]);for(let a=0;a<i.length;a++)this.getName(i[a][0],t.Names$$module$build$src$core$names.NameType.PROCEDURE)};var Wte=zn,Dt={ALIGN_CENTRE:Ote,ALIGN_LEFT:kte,ALIGN_RIGHT:Lte};return Dt.ASTNode=en,Dt.BasicCursor=B_,Dt.Block=L0,Dt.BlockDragger=U0,Dt.BlockSvg=Dp,Dt.Blocks=jr,Dt.Bubble=As,Dt.BubbleDragger=Ye,Dt.COLLAPSED_FIELD_NAME=Fv,Dt.COLLAPSED_INPUT_NAME=Pg,Dt.COLLAPSE_CHARS=at,Dt.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator,Dt.CollapsibleToolboxCategory=UT,Dt.ComponentManager=gl,Dt.Connection=fs,Dt.ConnectionChecker=zv,Dt.ConnectionDB=sh,Dt.ConnectionType=zn,Dt.ContextMenu=Vd,Dt.ContextMenuItems=G,Dt.ContextMenuRegistry=Li,Dt.Css=hs,Dt.Cursor=Tb,Dt.DELETE_VARIABLE_ID=an,Dt.DRAG_STACK=Lt,Dt.DUMMY_INPUT=Fte,Dt.DeleteArea=Uv,Dt.DragTarget=IT,Dt.DropDownDiv=T,Dt.Events=Qn,Dt.Extensions=Xd,Dt.Field=Gi,Dt.FieldAngle=K,Dt.FieldCheckbox=_e,Dt.FieldColour=Ee,Dt.FieldDropdown=Ah,Dt.FieldImage=Bg,Dt.FieldLabel=wi,Dt.FieldLabelSerializable=et,Dt.FieldMultilineInput=tt,Dt.FieldNumber=ct,Dt.FieldTextInput=H0,Dt.FieldVariable=Rt,Dt.Flyout=dn,Dt.FlyoutButton=Xt,Dt.FlyoutMetricsManager=pn,Dt.Generator=t.CodeGenerator$$module$build$src$core$generator,Dt.Gesture=mm,Dt.Grid=ob,Dt.HorizontalFlyout=Yn,Dt.INPUT_VALUE=Nte,Dt.Input=ns,Dt.InsertionMarkerManager=Sf,Dt.InsertionMarkerPreviewer=Hl,Dt.Marker=MT,Dt.MarkerManager=Ca,Dt.Menu=kg,Dt.MenuItem=jf,Dt.MetricsManager=H_,Dt.Msg=t.Msg$$module$build$src$core$msg,Dt.NEXT_STATEMENT=Pte,Dt.Names=t.Names$$module$build$src$core$names,Dt.OPPOSITE_TYPE=Zt,Dt.OUTPUT_VALUE=Dte,Dt.Options=Hi,Dt.PREVIOUS_STATEMENT=Bte,Dt.PROCEDURE_CATEGORY_NAME=I0,Dt.Procedures=Ki,Dt.RENAME_VARIABLE_ID=hn,Dt.RenderedConnection=sd,Dt.Scrollbar=xa,Dt.ScrollbarPair=Cb,Dt.ShortcutItems=Bp,Dt.ShortcutRegistry=Ji,Dt.TOOLBOX_AT_BOTTOM=Ute,Dt.TOOLBOX_AT_LEFT=Hte,Dt.TOOLBOX_AT_RIGHT=Gte,Dt.TOOLBOX_AT_TOP=zte,Dt.TabNavigateCursor=AT,Dt.Theme=Dg,Dt.ThemeManager=$T,Dt.Themes=Ite,Dt.Toolbox=Tz,Dt.ToolboxCategory=Fg,Dt.ToolboxItem=O2,Dt.ToolboxSeparator=PE,Dt.Tooltip=jd,Dt.Touch=wt,Dt.Trashcan=RT,Dt.UnattachedFieldError=ko,Dt.VARIABLE_CATEGORY_NAME=Ig,Dt.VARIABLE_DYNAMIC_CATEGORY_NAME=mb,Dt.VERSION=Rte,Dt.VariableMap=vb,Dt.VariableModel=_f,Dt.Variables=yl,Dt.VariablesDynamic=Tm,Dt.VerticalFlyout=er,Dt.WidgetDiv=yf,Dt.Workspace=P_,Dt.WorkspaceAudio=CT,Dt.WorkspaceComment=ih,Dt.WorkspaceCommentSvg=zl,Dt.WorkspaceDragger=pT,Dt.WorkspaceSvg=ep,Dt.Xml=oa,Dt.ZoomControls=v0,Dt.blockAnimations=Y,Dt.blockRendering=Ns,Dt.browserEvents=th,Dt.bubbles=Sm,Dt.bumpObjects=Wv,Dt.clipboard=um,Dt.common=mo,Dt.config=t.config$$module$build$src$core$config,Dt.connectionTypes=Wte,Dt.constants=ME,Dt.defineBlocksWithJsonArray=oe,Dt.dialog=du,Dt.fieldRegistry=M0,Dt.geras=G0,Dt.getMainWorkspace=A,Dt.getSelected=L,Dt.hasBubble=ru,Dt.hideChaff=Jc,Dt.icons=Mn,Dt.inject=Zu,Dt.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types,Dt.inputs=Ds,Dt.isCopyable=Ol,Dt.isIcon=Ya,Dt.isObservable=X,Dt.isPaster=Vs,Dt.isSerializable=wr,Dt.isVariableBackedParameterModel=zs,Dt.minimalist=DE,Dt.procedures=Ki,Dt.registry=pl,Dt.renderManagement=Wd,Dt.serialization=NE,Dt.setLocale=Cp,Dt.setParentContainer=z,Dt.svgResize=U,Dt.thrasos=k2,Dt.uiPosition=rm,Dt.utils=qa,Dt.zelos=N,Object.defineProperties(Dt,{HSV_SATURATION:{get:function(){return xe("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.getHsvSaturation()"),Xu()},set:function(i){xe("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.setHsvSaturation()"),Ku(i)}},HSV_VALUE:{get:function(){return xe("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.getHsvValue()"),Sh()},set:function(i){xe("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.setHsvValue()"),ll(i)}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:Fl}),Dt.__namespace__=t,Dt})}(cO)),cO.exports}var DU;function vie(){return DU||(DU=1,function(n,e){(function(t,r){n.exports=r(N3())})(Vl,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(uO)),uO.exports}var PU;function D3(){return PU||(PU=1,function(n,e){(function(t,r){n.exports=r(vie())})(Vl,function(t){return t})}(lO)),lO.exports}var hO={exports:{}},BU;function yie(){return BU||(BU=1,function(n,e){(function(t,r){n.exports=r()})(Vl,function(){var t=t||{Msg:Object.create(null)};return t.Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DIALOG_CANCEL="Cancel",t.Msg.DIALOG_OK="OK",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1  %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg})}(hO)),hO.exports}var dO={exports:{}},fO={exports:{}},FU;function bie(){return FU||(FU=1,function(n,e){(function(t,r){n.exports=r(N3())})(Vl,function(t){var r=t.__namespace__,s=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),o={customContextMenu:function(Q){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(me={text:r.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:l(this)},ke=this.getField("VAR").getText(),ke={text:r.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",ke),enabled:!0,callback:u(this)},Q.unshift(me),Q.unshift(ke));else{if(this.type==="variables_get_dynamic")var te="variables_set_dynamic",me=r.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else te="variables_get_dynamic",me=r.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var ke=this.getField("VAR");te={type:te,fields:{VAR:ke.saveState(!0)}},Q.push({enabled:0<this.workspace.remainingCapacity(),text:me.replace("%1",ke.getText()),callback:r.callbackFactory$$module$build$src$core$contextmenu(this,te)})}},onchange:function(Q){Q=this.getFieldValue("VAR"),Q=r.getVariable$$module$build$src$core$variables(this.workspace,Q),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(Q.type):this.getInput("VALUE").connection.setCheck(Q.type)}},l=function(Q){return function(){const te=Q.workspace,me=Q.getField("VAR").getVariable();r.renameVariable$$module$build$src$core$variables(te,me)}},u=function(Q){return function(){const te=Q.workspace,me=Q.getField("VAR").getVariable();te.deleteVariableById(me.getId()),te.refreshToolboxSelection()}};r.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",o),r.defineBlocks$$module$build$src$core$common(s);var h={blocks:s},f=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),g={customContextMenu:function(Q){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(me={text:r.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:y(this)},ke=this.getField("VAR").getText(),ke={text:r.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",ke),enabled:!0,callback:b(this)},Q.unshift(me),Q.unshift(ke));else{if(this.type==="variables_get")var te="variables_set",me=r.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else te="variables_get",me=r.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var ke=this.getField("VAR");te={type:te,fields:{VAR:ke.saveState(!0)}},Q.push({enabled:0<this.workspace.remainingCapacity(),text:me.replace("%1",ke.getText()),callback:r.callbackFactory$$module$build$src$core$contextmenu(this,te)})}}},y=function(Q){return function(){const te=Q.workspace,me=Q.getField("VAR").getVariable();r.renameVariable$$module$build$src$core$variables(te,me)}},b=function(Q){return function(){const te=Q.workspace,me=Q.getField("VAR").getVariable();te.deleteVariableById(me.getId()),te.refreshToolboxSelection()}};r.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",g),r.defineBlocks$$module$build$src$core$common(f);var S={blocks:f},C=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:""},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),M={init:function(){this.WHERE_OPTIONS_1=[[r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");var te=this.getInput("AT1")instanceof r.ValueInput$$module$build$src$core$inputs$value_input;return Q.setAttribute("at1",`${te}`),te=this.getInput("AT2")instanceof r.ValueInput$$module$build$src$core$inputs$value_input,Q.setAttribute("at2",`${te}`),Q},domToMutation:function(Q){const te=Q.getAttribute("at1")==="true";Q=Q.getAttribute("at2")==="true",this.updateAt_(1,te),this.updateAt_(2,Q)},updateAt_:function(Q,te){this.removeInput("AT"+Q),this.removeInput("ORDINAL"+Q,!0),te?(this.appendValueInput("AT"+Q).setCheck("Number"),r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+Q).appendField(r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+Q),Q===2&&r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL));const me=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+Q]});me.setValidator(function(ke){const Xe=ke==="FROM_START"||ke==="FROM_END";if(Xe!==te){const Wt=this.getSourceBlock();return Wt.updateAt_(Q,Xe),Wt.setFieldValue(ke,"WHERE"+Q),null}}),this.getInput("AT"+Q).appendField(me,"WHERE"+Q),Q===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}};C.text_getSubstring=M,C.text_changeCase={init:function(){const Q=[[r.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[r.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[r.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(r.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(r.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},C.text_trim={init:function(){const Q=[[r.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[r.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[r.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(r.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(r.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},C.text_print={init:function(){this.jsonInit({message0:r.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:r.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:r.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var A={updateType_:function(Q){this.outputConnection.setCheck(Q==="NUMBER"?"Number":"String")},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("type",this.getFieldValue("TYPE")),Q},domToMutation:function(Q){this.updateType_(Q.getAttribute("type"))}};C.text_prompt_ext=Object.assign({},A,{init:function(){var Q=[[r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(r.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),Q=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),Q.setValidator(te=>{this.updateType_(te)}),this.appendValueInput("TEXT").appendField(Q,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});var O=Object.assign({},A,{init:function(){this.mixin(L);var Q=[[r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(r.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),Q=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),Q.setValidator(te=>{this.updateType_(te)}),this.appendDummyInput().appendField(Q,"TYPE").appendField(this.newQuote_(!0)).appendField(r.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});C.text_prompt=O,C.text_count={init:function(){this.jsonInit({message0:r.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:r.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:r.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},C.text_replace={init:function(){this.jsonInit({message0:r.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:r.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:r.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},C.text_reverse={init:function(){this.jsonInit({message0:r.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:r.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:r.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var L={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(Q){for(let te=0,me;me=this.inputList[te];te++)for(let ke=0,Xe;Xe=me.fieldRow[ke];ke++)if(Q===Xe.name){me.insertFieldAt(ke,this.newQuote_(!0)),me.insertFieldAt(ke+2,this.newQuote_(!1));return}console.warn('field named "'+Q+'" not found in '+this.toDevString())},newQuote_:function(Q){return Q=this.RTL?!Q:Q,r.fromJson$$module$build$src$core$field_registry({type:"field_image",src:Q?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:Q?"":""})}},B=function(){this.mixin(L),this.quoteField_("TEXT")},D={itemCount_:0,mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("items",`${this.itemCount_}`),Q},domToMutation:function(Q){this.itemCount_=parseInt(Q.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(Q){this.itemCount_=Q.itemCount,this.updateShape_()},decompose:function(Q){const te=Q.newBlock("text_create_join_container");te.initSvg();let me=te.getInput("STACK").connection;for(let ke=0;ke<this.itemCount_;ke++){const Xe=Q.newBlock("text_create_join_item");Xe.initSvg(),me.connect(Xe.previousConnection),me=Xe.nextConnection}return te},compose:function(Q){var te=Q.getInputTargetBlock("STACK");for(Q=[];te;)te.isInsertionMarker()||Q.push(te.valueConnection_),te=te.getNextBlock();for(te=0;te<this.itemCount_;te++){const me=this.getInput("ADD"+te).connection.targetConnection;me&&Q.indexOf(me)===-1&&me.disconnect()}for(this.itemCount_=Q.length,this.updateShape_(),te=0;te<this.itemCount_;te++){let me;(me=Q[te])==null||me.reconnect(this,"ADD"+te)}},saveConnections:function(Q){Q=Q.getInputTargetBlock("STACK");let te=0;for(;Q;){if(Q.isInsertionMarker()){Q=Q.getNextBlock();continue}const me=this.getInput("ADD"+te);Q.valueConnection_=me&&me.connection.targetConnection,Q=Q.getNextBlock(),te++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var Q=0;Q<this.itemCount_;Q++)if(!this.getInput("ADD"+Q)){const te=this.appendValueInput("ADD"+Q).setAlign(r.Align$$module$build$src$core$inputs$align.RIGHT);Q===0&&te.appendField(r.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(Q=this.itemCount_;this.getInput("ADD"+Q);Q++)this.removeInput("ADD"+Q)}},z=function(){this.mixin(L),this.itemCount_=2,this.updateShape_(),this.setMutator(new r.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};r.register$$module$build$src$core$extensions("text_append_tooltip",r.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var U=function(){this.setTooltip(()=>r.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},V={isAt_:!1,mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("at",`${this.isAt_}`),Q},domToMutation:function(Q){Q=Q.getAttribute("at")!=="false",this.updateAt_(Q)},updateAt_:function(Q){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),Q&&(this.appendValueInput("AT").setCheck("Number"),r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),r.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(r.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=Q}},H=function(){this.getField("WHERE").setValidator(function(Q){Q=Q==="FROM_START"||Q==="FROM_END";const te=this.getSourceBlock();Q!==te.isAt_&&te.updateAt_(Q)}),this.updateAt_(!0),this.setTooltip(()=>{var Q=this.getFieldValue("WHERE");let te=r.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(Q==="FROM_START"||Q==="FROM_END")&&(Q=Q==="FROM_START"?r.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:r.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(te+="  "+Q.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),te})};r.register$$module$build$src$core$extensions("text_indexOf_tooltip",U),r.register$$module$build$src$core$extensions("text_quotes",B),r.registerMixin$$module$build$src$core$extensions("quote_image_mixin",L),r.registerMutator$$module$build$src$core$extensions("text_join_mutator",D,z),r.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",V,H),r.defineBlocks$$module$build$src$core$common(C);var oe={blocks:C},le={},Z={setStatements_:function(Q){this.hasStatements_!==Q&&(Q?(this.appendStatementInput("STACK").appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=Q)},updateParams_:function(){let Q="";this.arguments_.length&&(Q=r.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),r.disable$$module$build$src$core$events$utils();try{this.setFieldValue(Q,"PARAMS")}finally{r.enable$$module$build$src$core$events$utils()}},mutationToDom:function(Q){const te=r.createElement$$module$build$src$core$utils$xml("mutation");Q&&te.setAttribute("name",this.getFieldValue("NAME"));for(let me=0;me<this.argumentVarModels_.length;me++){const ke=r.createElement$$module$build$src$core$utils$xml("arg"),Xe=this.argumentVarModels_[me];ke.setAttribute("name",Xe.name),ke.setAttribute("varid",Xe.getId()),Q&&this.paramIds_&&ke.setAttribute("paramId",this.paramIds_[me]),te.appendChild(ke)}return this.hasStatements_||te.setAttribute("statements","false"),te},domToMutation:function(Q){this.arguments_=[],this.argumentVarModels_=[];for(let me=0,ke;ke=Q.childNodes[me];me++)if(ke.nodeName.toLowerCase()==="arg"){var te=ke;const Xe=te.getAttribute("name");te=te.getAttribute("varid")||te.getAttribute("varId"),this.arguments_.push(Xe),te=r.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,te,Xe,""),te!==null?this.argumentVarModels_.push(te):console.log(`Failed to create a variable named "${Xe}", ignoring.`)}this.updateParams_(),r.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(Q.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const Q=Object.create(null);if(this.argumentVarModels_.length){Q.params=[];for(let te=0;te<this.argumentVarModels_.length;te++)Q.params.push({name:this.argumentVarModels_[te].name,id:this.argumentVarModels_[te].getId()})}return this.hasStatements_||(Q.hasStatements=!1),Q},loadExtraState:function(Q){if(this.arguments_=[],this.argumentVarModels_=[],Q.params)for(let me=0;me<Q.params.length;me++){var te=Q.params[me];te=r.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,te.id,te.name,""),this.arguments_.push(te.name),this.argumentVarModels_.push(te)}this.updateParams_(),r.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(Q.hasStatements!==!1)},decompose:function(Q){const te=r.createElement$$module$build$src$core$utils$xml("block");te.setAttribute("type","procedures_mutatorcontainer");var me=r.createElement$$module$build$src$core$utils$xml("statement");me.setAttribute("name","STACK"),te.appendChild(me);for(let Xe=0;Xe<this.arguments_.length;Xe++){const Wt=r.createElement$$module$build$src$core$utils$xml("block");Wt.setAttribute("type","procedures_mutatorarg");var ke=r.createElement$$module$build$src$core$utils$xml("field");ke.setAttribute("name","NAME");const Ge=r.createTextNode$$module$build$src$core$utils$xml(this.arguments_[Xe]);ke.appendChild(Ge),Wt.appendChild(ke),ke=r.createElement$$module$build$src$core$utils$xml("next"),Wt.appendChild(ke),me.appendChild(Wt),me=ke}return Q=r.domToBlock$$module$build$src$core$xml(te,Q),this.type==="procedures_defreturn"?Q.setFieldValue(this.hasStatements_,"STATEMENTS"):Q.removeInput("STATEMENT_INPUT"),r.mutateCallers$$module$build$src$core$procedures(this),Q},compose:function(Q){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let te=Q.getInputTargetBlock("STACK");for(;te&&!te.isInsertionMarker();){var me=te.getFieldValue("NAME");this.arguments_.push(me),me=this.workspace.getVariable(me,""),this.argumentVarModels_.push(me),this.paramIds_.push(te.id),te=te.nextConnection&&te.nextConnection.targetBlock()}if(this.updateParams_(),r.mutateCallers$$module$build$src$core$procedures(this),Q=Q.getFieldValue("STATEMENTS"),Q!==null&&(Q=Q==="TRUE",this.hasStatements_!==Q))if(Q){this.setStatements_(!0);var ke;(ke=this.statementConnection_)==null||ke.reconnect(this,"STACK"),this.statementConnection_=null}else ke=this.getInput("STACK").connection,(this.statementConnection_=ke.targetConnection)&&(ke=ke.targetBlock(),ke.unplug(),ke.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(Q,te){var me=this.workspace.getVariableById(Q);if(me.type===""){me=me.name,te=this.workspace.getVariableById(te);var ke=!1;for(let Xe=0;Xe<this.argumentVarModels_.length;Xe++)this.argumentVarModels_[Xe].getId()===Q&&(this.arguments_[Xe]=te.name,this.argumentVarModels_[Xe]=te,ke=!0);ke&&(this.displayRenamedVar_(me,te.name),r.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(Q){const te=Q.name;let me=!1,ke;for(let Xe=0;Xe<this.argumentVarModels_.length;Xe++)this.argumentVarModels_[Xe].getId()===Q.getId()&&(ke=this.arguments_[Xe],this.arguments_[Xe]=te,me=!0);me&&(this.displayRenamedVar_(ke,te),r.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(Q,te){this.updateParams_();var me=this.getIcon(r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(me&&me.bubbleIsVisible()){me=me.getWorkspace().getAllBlocks(!1);for(let ke=0,Xe;Xe=me[ke];ke++)Xe.type==="procedures_mutatorarg"&&r.Names$$module$build$src$core$names.equals(Q,Xe.getFieldValue("NAME"))&&Xe.setFieldValue(te,"NAME")}},customContextMenu:function(Q){if(!this.isInFlyout){var te=this.getFieldValue("NAME"),me={type:this.callType_,extraState:{name:te,params:this.arguments_}};if(Q.push({enabled:!0,text:r.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",te),callback:r.callbackFactory$$module$build$src$core$contextmenu(this,me)}),!this.isCollapsed())for(te=0;te<this.argumentVarModels_.length;te++){me=this.argumentVarModels_[te];const ke={type:"variables_get",fields:{VAR:{name:me.name,id:me.getId(),type:me.type}}};Q.push({enabled:!0,text:r.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",me.name),callback:r.callbackFactory$$module$build$src$core$contextmenu(this,ke)})}}}};le.procedures_defnoreturn=Object.assign({},Z,{init:function(){var Q=r.findLegalName$$module$build$src$core$procedures("",this);Q=r.fromJson$$module$build$src$core$field_registry({type:"field_input",text:Q}),Q.setValidator(r.rename$$module$build$src$core$procedures),Q.setSpellcheck(!1),this.appendDummyInput().appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(Q,"NAME").appendField("","PARAMS"),this.setMutator(new r.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),le.procedures_defreturn=Object.assign({},Z,{init:function(){var Q=r.findLegalName$$module$build$src$core$procedures("",this);Q=r.fromJson$$module$build$src$core$field_registry({type:"field_input",text:Q}),Q.setValidator(r.rename$$module$build$src$core$procedures),Q.setSpellcheck(!1),this.appendDummyInput().appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(Q,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(r.Align$$module$build$src$core$inputs$input.RIGHT).appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new r.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var q={init:function(){this.appendDummyInput().appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(r.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(r.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};le.procedures_mutatorcontainer=q;var he={init:function(){const Q=r.fromJson$$module$build$src$core$field_registry({type:"field_input",text:r.DEFAULT_ARG$$module$build$src$core$procedures});Q.setValidator(this.validator_),Q.oldShowEditorFn_=Q.showEditor_,Q.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(Q,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(r.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,Q.onFinishEditing_=this.deleteIntermediateVars_,Q.createdVariables_=[],Q.onFinishEditing_("x")},validator_:function(Q){var te=this.getSourceBlock();const me=te.workspace.getRootWorkspace();if(Q=Q.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!Q)return null;const ke=(te.workspace.targetWorkspace||te.workspace).getAllBlocks(!1),Xe=Q.toLowerCase();for(let Wt=0;Wt<ke.length;Wt++){if(ke[Wt].id===this.getSourceBlock().id)continue;const Ge=ke[Wt].getFieldValue("NAME");if(Ge&&Ge.toLowerCase()===Xe)return null}return te.isInFlyout||((te=me.getVariable(Q,""))&&te.name!==Q&&me.renameVariableById(te.getId(),Q),te||(te=me.createVariable(Q,""))&&this.createdVariables_&&this.createdVariables_.push(te)),Q},deleteIntermediateVars_:function(Q){const te=this.getSourceBlock().workspace.getRootWorkspace();if(te)for(let me=0;me<this.createdVariables_.length;me++){const ke=this.createdVariables_[me];ke.name!==Q&&te.deleteVariableById(ke.getId())}}};le.procedures_mutatorarg=he;var ae={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(Q,te){r.Names$$module$build$src$core$names.equals(Q,this.getProcedureCall())&&(this.setFieldValue(te,"NAME"),this.setTooltip((this.outputConnection?r.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:r.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",te)))},setProcedureParameters_:function(Q,te){var me=r.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((me=(me=me&&me.getIcon(r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&me.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),Q.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=te;else{if(te.length!==Q.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let Xe=0;Xe<this.arguments_.length;Xe++){var ke=this.getInput("ARG"+Xe);ke&&(ke=ke.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Xe]]=ke,me&&ke&&te.indexOf(this.quarkIds_[Xe])===-1&&(ke.disconnect(),ke.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(Q),this.argumentVarModels_=[],Q=0;Q<this.arguments_.length;Q++)me=r.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[Q],""),this.argumentVarModels_.push(me);if(this.updateShape_(),this.quarkIds_=te){for(te=0;te<this.arguments_.length;te++)if(Q=this.quarkIds_[te],Q in this.quarkConnections_){let Xe;(Xe=this.quarkConnections_[Q])!=null&&Xe.reconnect(this,"ARG"+te)||delete this.quarkConnections_[Q]}}}},updateShape_:function(){for(var Q=0;Q<this.arguments_.length;Q++){var te=this.getField("ARGNAME"+Q);if(te){r.disable$$module$build$src$core$events$utils();try{te.setValue(this.arguments_[Q])}finally{r.enable$$module$build$src$core$events$utils()}}else te=r.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[Q]}),this.appendValueInput("ARG"+Q).setAlign(r.Align$$module$build$src$core$inputs$input.RIGHT).appendField(te,"ARGNAME"+Q).init()}for(Q=this.arguments_.length;this.getInput("ARG"+Q);Q++)this.removeInput("ARG"+Q);(Q=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(Q.appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),Q.init()):this.getField("WITH")&&Q.removeField("WITH"))},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");Q.setAttribute("name",this.getProcedureCall());for(let te=0;te<this.arguments_.length;te++){const me=r.createElement$$module$build$src$core$utils$xml("arg");me.setAttribute("name",this.arguments_[te]),Q.appendChild(me)}return Q},domToMutation:function(Q){var te=Q.getAttribute("name");this.renameProcedure(this.getProcedureCall(),te),te=[];const me=[];for(let ke=0,Xe;Xe=Q.childNodes[ke];ke++)Xe.nodeName.toLowerCase()==="arg"&&(te.push(Xe.getAttribute("name")),me.push(Xe.getAttribute("paramId")));this.setProcedureParameters_(te,me)},saveExtraState:function(){const Q=Object.create(null);return Q.name=this.getProcedureCall(),this.arguments_.length&&(Q.params=this.arguments_),Q},loadExtraState:function(Q){if(this.renameProcedure(this.getProcedureCall(),Q.name),Q=Q.params){const te=[];te.length=Q.length,te.fill(null),this.setProcedureParameters_(Q,te)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(Q){if(this.workspace&&!this.workspace.isFlyout&&Q.recordUndo)if(Q.type===r.CREATE$$module$build$src$core$events$utils&&Q.ids.indexOf(this.id)!==-1){var te=this.getProcedureCall();if(te=r.getDefinition$$module$build$src$core$procedures(te,this.workspace),!te||te.type===this.defType_&&JSON.stringify(te.getVars())===JSON.stringify(this.arguments_)||(te=null),!te){r.setGroup$$module$build$src$core$events$utils(Q.group),Q=r.createElement$$module$build$src$core$utils$xml("xml"),te=r.createElement$$module$build$src$core$utils$xml("block"),te.setAttribute("type",this.defType_);var me=this.getRelativeToSurfaceXY(),ke=me.y+2*r.config$$module$build$src$core$config.snapRadius;te.setAttribute("x",`${me.x+r.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),te.setAttribute("y",`${ke}`),me=this.mutationToDom(),te.appendChild(me),me=r.createElement$$module$build$src$core$utils$xml("field"),me.setAttribute("name","NAME"),ke=this.getProcedureCall();const Xe=r.findLegalName$$module$build$src$core$procedures(ke,this);ke!==Xe&&this.renameProcedure(ke,Xe),me.appendChild(r.createTextNode$$module$build$src$core$utils$xml(ke)),te.appendChild(me),Q.appendChild(te),r.domToWorkspace$$module$build$src$core$xml(Q,this.workspace),r.setGroup$$module$build$src$core$events$utils(!1)}}else Q.type===r.DELETE$$module$build$src$core$events$utils?(te=this.getProcedureCall(),r.getDefinition$$module$build$src$core$procedures(te,this.workspace)||(r.setGroup$$module$build$src$core$events$utils(Q.group),this.dispose(!0),r.setGroup$$module$build$src$core$events$utils(!1))):Q.type===r.CHANGE$$module$build$src$core$events$utils&&Q.element==="disabled"&&(te=this.getProcedureCall(),(te=r.getDefinition$$module$build$src$core$procedures(te,this.workspace))&&te.id===Q.blockId&&((te=r.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),r.setGroup$$module$build$src$core$events$utils(Q.group),Q.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),r.setGroup$$module$build$src$core$events$utils(te)))},customContextMenu:function(Q){if(this.workspace.isMovable()){var te=this.getProcedureCall(),me=this.workspace;Q.push({enabled:!0,text:r.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const ke=r.getDefinition$$module$build$src$core$procedures(te,me);ke&&(me.centerOnBlock(ke.id),ke.select())}})}}};le.procedures_callnoreturn=Object.assign({},ae,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(r.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),le.procedures_callreturn=Object.assign({},ae,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(r.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"});var ue={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(r.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(r.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(r.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("value",String(Number(this.hasReturnValue_))),Q},domToMutation:function(Q){this.hasReturnValue_=Q.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(Q){if(!(this.workspace.isDragging&&this.workspace.isDragging()||Q.type!==r.MOVE$$module$build$src$core$events$utils)){var te=!1,me=this;do{if(this.FUNCTION_TYPES.indexOf(me.type)!==-1){te=!0;break}me=me.getSurroundParent()}while(me);te?(me.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):me.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(r.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(me=r.getGroup$$module$build$src$core$events$utils(),r.setGroup$$module$build$src$core$events$utils(Q.group),this.setEnabled(te),r.setGroup$$module$build$src$core$events$utils(me))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};le.procedures_ifreturn=ue,r.defineBlocks$$module$build$src$core$common(le);var ge={blocks:le},we=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),J={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};r.register$$module$build$src$core$extensions("math_op_tooltip",r.buildTooltipForDropdown$$module$build$src$core$extensions("OP",J));var re={mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation"),te=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return Q.setAttribute("divisor_input",String(te)),Q},domToMutation:function(Q){Q=Q.getAttribute("divisor_input")==="true",this.updateShape_(Q)},updateShape_:function(Q){const te=this.getInput("DIVISOR");Q?te||this.appendValueInput("DIVISOR").setCheck("Number"):te&&this.removeInput("DIVISOR")}},ie=function(){this.getField("PROPERTY").setValidator(function(Q){Q=Q==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(Q)})};r.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",re,ie),r.register$$module$build$src$core$extensions("math_change_tooltip",r.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var fe={updateType_:function(Q){Q==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("op",this.getFieldValue("OP")),Q},domToMutation:function(Q){if(Q=Q.getAttribute("op"),Q===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(Q)}},Te=function(){this.getField("OP").setValidator((function(Q){this.updateType_(Q)}).bind(this))};r.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",fe,Te),r.defineBlocks$$module$build$src$core$common(we);var Fe={blocks:we},Ie=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),qe={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};r.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",r.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",qe));var Re={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};r.register$$module$build$src$core$extensions("controls_flow_tooltip",r.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",Re));var Qe={customContextMenu:function(Q){if(!this.isInFlyout){var te=this.getField("VAR"),me=te.getVariable().name;this.isCollapsed()||me===null||(te={type:"variables_get",fields:{VAR:te.saveState(!0)}},Q.push({enabled:!0,text:r.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",me),callback:r.callbackFactory$$module$build$src$core$contextmenu(this,te)}))}}};r.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",Qe),r.register$$module$build$src$core$extensions("controls_for_tooltip",r.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),r.register$$module$build$src$core$extensions("controls_forEach_tooltip",r.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var nt=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),ft={getSurroundLoop:function(){let Q=this;do{if(nt.has(Q.type))return Q;Q=Q.getSurroundParent()}while(Q);return null},onchange:function(Q){var te=this.workspace;if(te.isDragging&&!te.isDragging()&&Q.type===r.MOVE$$module$build$src$core$events$utils&&(te=!!this.getSurroundLoop(),this.setWarningText(te?null:r.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout)){const me=r.getGroup$$module$build$src$core$events$utils();r.setGroup$$module$build$src$core$events$utils(Q.group),this.setEnabled(te),r.setGroup$$module$build$src$core$events$utils(me)}}};r.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",ft),r.defineBlocks$$module$build$src$core$common(Ie);var lt={blocks:Ie,loopTypes:nt},ze=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Ce={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};r.register$$module$build$src$core$extensions("logic_op_tooltip",r.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Ce));var He={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&Q.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&Q.setAttribute("else","1"),Q},domToMutation:function(Q){this.elseifCount_=parseInt(Q.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(Q.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const Q=Object.create(null);return this.elseifCount_&&(Q.elseIfCount=this.elseifCount_),this.elseCount_&&(Q.hasElse=!0),Q},loadExtraState:function(Q){this.elseifCount_=Q.elseIfCount||0,this.elseCount_=Q.hasElse?1:0,this.updateShape_()},decompose:function(Q){const te=Q.newBlock("controls_if_if");te.initSvg();let me=te.nextConnection;for(let ke=1;ke<=this.elseifCount_;ke++){const Xe=Q.newBlock("controls_if_elseif");Xe.initSvg(),me.connect(Xe.previousConnection),me=Xe.nextConnection}return this.elseCount_&&(Q=Q.newBlock("controls_if_else"),Q.initSvg(),me.connect(Q.previousConnection)),te},compose:function(Q){Q=Q.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const te=[null],me=[null];let ke=null;for(;Q;){if(!Q.isInsertionMarker())switch(Q.type){case"controls_if_elseif":this.elseifCount_++,te.push(Q.valueConnection_),me.push(Q.statementConnection_);break;case"controls_if_else":this.elseCount_++,ke=Q.statementConnection_;break;default:throw TypeError("Unknown block type: "+Q.type)}Q=Q.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(te,me,ke)},saveConnections:function(Q){Q=Q.nextConnection.targetBlock();let te=1;for(;Q;){if(!Q.isInsertionMarker())switch(Q.type){case"controls_if_elseif":var me=this.getInput("IF"+te);const ke=this.getInput("DO"+te);Q.valueConnection_=me&&me.connection.targetConnection,Q.statementConnection_=ke&&ke.connection.targetConnection,te++;break;case"controls_if_else":me=this.getInput("ELSE"),Q.statementConnection_=me&&me.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+Q.type)}Q=Q.getNextBlock()}},rebuildShape_:function(){const Q=[null],te=[null];let me=null;this.getInput("ELSE")&&(me=this.getInput("ELSE").connection.targetConnection);for(let ke=1;this.getInput("IF"+ke);ke++){const Xe=this.getInput("IF"+ke),Wt=this.getInput("DO"+ke);Q.push(Xe.connection.targetConnection),te.push(Wt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(Q,te,me)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var Q=1;this.getInput("IF"+Q);Q++)this.removeInput("IF"+Q),this.removeInput("DO"+Q);for(Q=1;Q<=this.elseifCount_;Q++)this.appendValueInput("IF"+Q).setCheck("Boolean").appendField(r.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+Q).appendField(r.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(r.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(Q,te,me){for(let ke=1;ke<=this.elseifCount_;ke++){let Xe;(Xe=Q[ke])==null||Xe.reconnect(this,"IF"+ke);let Wt;(Wt=te[ke])==null||Wt.reconnect(this,"DO"+ke)}me==null||me.reconnect(this,"ELSE")}};r.registerMutator$$module$build$src$core$extensions("controls_if_mutator",He,null,["controls_if_elseif","controls_if_else"]);var rt=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return r.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return r.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return r.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return r.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};r.register$$module$build$src$core$extensions("controls_if_tooltip",rt);var it={onchange:function(Q){this.prevBlocks_||(this.prevBlocks_=[null,null]);var te=this.getInputTargetBlock("A");const me=this.getInputTargetBlock("B");te&&me&&!this.workspace.connectionChecker.doTypeChecks(te.outputConnection,me.outputConnection)&&(r.setGroup$$module$build$src$core$events$utils(Q.group),Q=this.prevBlocks_[0],Q!==te&&(te.unplug(),!Q||Q.isDisposed()||Q.isShadow()||this.getInput("A").connection.connect(Q.outputConnection)),te=this.prevBlocks_[1],te!==me&&(me.unplug(),!te||te.isDisposed()||te.isShadow()||this.getInput("B").connection.connect(te.outputConnection)),this.bumpNeighbours(),r.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},Nt=function(){this.mixin(it)};r.register$$module$build$src$core$extensions("logic_compare",Nt);var kt={prevParentConnection_:null,onchange:function(Q){const te=this.getInputTargetBlock("THEN"),me=this.getInputTargetBlock("ELSE"),ke=this.outputConnection.targetConnection;if((te||me)&&ke)for(let Xe=0;2>Xe;Xe++){const Wt=Xe===1?te:me;Wt&&!Wt.workspace.connectionChecker.doTypeChecks(Wt.outputConnection,ke)&&(r.setGroup$$module$build$src$core$events$utils(Q.group),ke===this.prevParentConnection_?(this.unplug(),ke.getSourceBlock().bumpNeighbours()):(Wt.unplug(),Wt.bumpNeighbours()),r.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=ke}};r.registerMixin$$module$build$src$core$extensions("logic_ternary",kt),r.defineBlocks$$module$build$src$core$common(ze);var vt=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Mt={init:function(){this.setHelpUrl(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new r.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("items",String(this.itemCount_)),Q},domToMutation:function(Q){if(Q=Q.getAttribute("items"),!Q)throw new TypeError("element did not have items");this.itemCount_=parseInt(Q,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(Q){this.itemCount_=Q.itemCount,this.updateShape_()},decompose:function(Q){const te=Q.newBlock("lists_create_with_container");te.initSvg();let me=te.getInput("STACK").connection;for(let ke=0;ke<this.itemCount_;ke++){const Xe=Q.newBlock("lists_create_with_item");if(Xe.initSvg(),!Xe.previousConnection)throw Error("itemBlock has no previousConnection");me.connect(Xe.previousConnection),me=Xe.nextConnection}return te},compose:function(Q){var te=Q.getInputTargetBlock("STACK");for(Q=[];te;)te.isInsertionMarker()||Q.push(te.valueConnection_),te=te.getNextBlock();for(te=0;te<this.itemCount_;te++){const me=this.getInput("ADD"+te).connection.targetConnection;me&&Q.indexOf(me)===-1&&me.disconnect()}for(this.itemCount_=Q.length,this.updateShape_(),te=0;te<this.itemCount_;te++){let me;(me=Q[te])==null||me.reconnect(this,"ADD"+te)}},saveConnections:function(Q){Q=Q.getInputTargetBlock("STACK");let te=0;for(;Q;){if(Q.isInsertionMarker()){Q=Q.getNextBlock();continue}const me=this.getInput("ADD"+te);let ke;Q.valueConnection_=(ke=me)==null?void 0:ke.connection.targetConnection,Q=Q.getNextBlock(),te++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(r.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var Q=0;Q<this.itemCount_;Q++)if(!this.getInput("ADD"+Q)){const te=this.appendValueInput("ADD"+Q).setAlign(r.Align$$module$build$src$core$inputs$align.RIGHT);Q===0&&te.appendField(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(Q=this.itemCount_;this.getInput("ADD"+Q);Q++)this.removeInput("ADD"+Q)}};vt.lists_create_with=Mt;var At={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};vt.lists_create_with_container=At;var mt={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};vt.lists_create_with_item=mt;var xe={init:function(){var Q=[[r.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[r.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(r.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(r.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),Q=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),!Q)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(Q,"END"),this.setInputsInline(!0),this.setTooltip(()=>r.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};vt.lists_indexOf=xe;var se={init:function(){var Q=[[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),Q=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),Q.setValidator(function(te){te=te==="REMOVE",this.getSourceBlock().updateStatement_(te)}),this.appendValueInput("VALUE").setCheck("Array").appendField(r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(Q,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const te=this.getFieldValue("MODE"),me=this.getFieldValue("WHERE");let ke="";switch(te+" "+me){case"GET FROM_START":case"GET FROM_END":ke=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":ke=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":ke=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":ke=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":ke=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":ke=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":ke=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":ke=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":ke=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":ke=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":ke=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":ke=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(me==="FROM_START"||me==="FROM_END")&&(ke+="  "+(me==="FROM_START"?r.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:r.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),ke})},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");Q.setAttribute("statement",String(!this.outputConnection));const te=this.getInput("AT")instanceof r.ValueInput$$module$build$src$core$inputs$value_input;return Q.setAttribute("at",String(te)),Q},domToMutation:function(Q){const te=Q.getAttribute("statement")==="true";this.updateStatement_(te),Q=Q.getAttribute("at")!=="false",this.updateAt_(Q)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(Q){Q.isStatement?this.updateStatement_(!0):typeof Q=="string"&&this.domToMutation(r.textToDom$$module$build$src$core$utils$xml(Q))},updateStatement_:function(Q){Q!==!this.outputConnection&&(this.unplug(!0,!0),Q?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(Q){this.removeInput("AT"),this.removeInput("ORDINAL",!0),Q?(this.appendValueInput("AT").setCheck("Number"),r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const te=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});te.setValidator(function(me){const ke=me==="FROM_START"||me==="FROM_END";if(ke!==Q){const Xe=this.getSourceBlock();return Xe.updateAt_(ke),Xe.setFieldValue(me,"WHERE"),null}}),this.getInput("AT").appendField(te,"WHERE"),r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};vt.lists_getIndex=se;var $e={init:function(){var Q=[[r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),Q=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),this.appendDummyInput().appendField(Q,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const te=this.getFieldValue("MODE"),me=this.getFieldValue("WHERE");let ke="";switch(te+" "+me){case"SET FROM_START":case"SET FROM_END":ke=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":ke=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":ke=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":ke=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":ke=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":ke=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":ke=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":ke=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(me==="FROM_START"||me==="FROM_END")&&(ke+="  "+r.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),ke})},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation"),te=this.getInput("AT")instanceof r.ValueInput$$module$build$src$core$inputs$value_input;return Q.setAttribute("at",String(te)),Q},domToMutation:function(Q){Q=Q.getAttribute("at")!=="false",this.updateAt_(Q)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(Q){this.removeInput("AT"),this.removeInput("ORDINAL",!0),Q?(this.appendValueInput("AT").setCheck("Number"),r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const te=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});te.setValidator(function(me){const ke=me==="FROM_START"||me==="FROM_END";if(ke!==Q){const Xe=this.getSourceBlock();return Xe.updateAt_(ke),Xe.setFieldValue(me,"WHERE"),null}}),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(te,"WHERE")}};vt.lists_setIndex=$e;var ht={init:function(){this.WHERE_OPTIONS_1=[[r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");var te=this.getInput("AT1")instanceof r.ValueInput$$module$build$src$core$inputs$value_input;return Q.setAttribute("at1",String(te)),te=this.getInput("AT2")instanceof r.ValueInput$$module$build$src$core$inputs$value_input,Q.setAttribute("at2",String(te)),Q},domToMutation:function(Q){const te=Q.getAttribute("at1")==="true";Q=Q.getAttribute("at2")==="true",this.updateAt_(1,te),this.updateAt_(2,Q)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(Q,te){this.removeInput("AT"+Q),this.removeInput("ORDINAL"+Q,!0),te?(this.appendValueInput("AT"+Q).setCheck("Number"),r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+Q).appendField(r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+Q);const me=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+Q]});me.setValidator(function(ke){const Xe=ke==="FROM_START"||ke==="FROM_END";if(Xe!==te){const Wt=this.getSourceBlock();return Wt.updateAt_(Q,Xe),Wt.setFieldValue(ke,"WHERE"+Q),null}}),this.getInput("AT"+Q).appendField(me,"WHERE"+Q),Q===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};vt.lists_getSublist=ht,vt.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},vt.lists_split={init:function(){const Q=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[r.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[r.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!Q)throw Error("field_dropdown not found");Q.setValidator(te=>{this.updateType_(te)}),this.setHelpUrl(r.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(Q,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(r.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const te=this.getFieldValue("MODE");if(te==="SPLIT")return r.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(te==="JOIN")return r.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+te)})},updateType_:function(Q){if(this.getFieldValue("MODE")!==Q){const te=this.getInput("INPUT").connection;te.setShadowDom(null);const me=te.targetBlock();me&&(te.disconnect(),me.isShadow()?me.dispose(!1):this.bumpNeighbours())}Q==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("mode",this.getFieldValue("MODE")),Q},domToMutation:function(Q){this.updateType_(Q.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},r.defineBlocks$$module$build$src$core$common(vt);var St={blocks:vt},It=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]);r.defineBlocks$$module$build$src$core$common(It);var pt={blocks:It},Ke=Object.assign({},It,vt,ze,Ie,we,le,f,s),Le={blocks:Ke,colour:pt,lists:St,loops:lt,math:Fe,procedures:ge,texts:oe,variables:S,variablesDynamic:h};return Le.__namespace__=r,Le})}(fO)),fO.exports}var zU;function Tie(){return zU||(zU=1,function(n,e){(function(t,r){n.exports=r(bie())})(Vl,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(dO)),dO.exports}var mj={exports:{}},pO={exports:{}},UU;function Sie(){return UU||(UU=1,function(n,e){(function(t,r){n.exports=r(N3())})(Vl,function(t){var r=t.__namespace__,s=function(ne,Se){return[Se.quote_(ne.getFieldValue("COLOUR")),Le.ATOMIC]},o=function(ne,Se){return[Se.provideFunction_("colourRandom",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",Le.FUNCTION_CALL]},l=function(ne,Se){const We=Se.valueToCode(ne,"RED",Le.NONE)||0,ot=Se.valueToCode(ne,"GREEN",Le.NONE)||0;return ne=Se.valueToCode(ne,"BLUE",Le.NONE)||0,[Se.provideFunction_("colourRgb",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+We+", "+ot+", "+ne+")",Le.FUNCTION_CALL]},u=function(ne,Se){const We=Se.valueToCode(ne,"COLOUR1",Le.NONE)||"'#000000'",ot=Se.valueToCode(ne,"COLOUR2",Le.NONE)||"'#000000'";return ne=Se.valueToCode(ne,"RATIO",Le.NONE)||.5,[Se.provideFunction_("colourBlend",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+We+", "+ot+", "+ne+")",Le.FUNCTION_CALL]},h=function(ne,Se){return["[]",Le.ATOMIC]},f=function(ne,Se){const We=Array(ne.itemCount_);for(let ot=0;ot<ne.itemCount_;ot++)We[ot]=Se.valueToCode(ne,"ADD"+ot,Le.NONE)||"null";return["["+We.join(", ")+"]",Le.ATOMIC]},g=function(ne,Se){const We=Se.provideFunction_("listsRepeat",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),ot=Se.valueToCode(ne,"ITEM",Le.NONE)||"null";return ne=Se.valueToCode(ne,"NUM",Le.NONE)||"0",[We+"("+ot+", "+ne+")",Le.FUNCTION_CALL]},y=function(ne,Se){return[(Se.valueToCode(ne,"VALUE",Le.MEMBER)||"[]")+".length",Le.MEMBER]},b=function(ne,Se){return["!"+(Se.valueToCode(ne,"VALUE",Le.MEMBER)||"[]")+".length",Le.LOGICAL_NOT]},S=function(ne,Se){const We=ne.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",ot=Se.valueToCode(ne,"FIND",Le.NONE)||"''";return Se=(Se.valueToCode(ne,"VALUE",Le.MEMBER)||"[]")+"."+We+"("+ot+")",ne.workspace.options.oneBasedIndex?[Se+" + 1",Le.ADDITION]:[Se,Le.FUNCTION_CALL]},C=function(ne,Se){const We=ne.getFieldValue("MODE")||"GET",ot=ne.getFieldValue("WHERE")||"FROM_START";var zt=Se.valueToCode(ne,"VALUE",ot==="RANDOM"?Le.NONE:Le.MEMBER)||"[]";switch(ot){case"FIRST":if(We==="GET")return[zt+"[0]",Le.MEMBER];if(We==="GET_REMOVE")return[zt+".shift()",Le.MEMBER];if(We==="REMOVE")return zt+`.shift();
`;break;case"LAST":if(We==="GET")return[zt+".slice(-1)[0]",Le.MEMBER];if(We==="GET_REMOVE")return[zt+".pop()",Le.MEMBER];if(We==="REMOVE")return zt+`.pop();
`;break;case"FROM_START":if(ne=Se.getAdjusted(ne,"AT"),We==="GET")return[zt+"["+ne+"]",Le.MEMBER];if(We==="GET_REMOVE")return[zt+".splice("+ne+", 1)[0]",Le.FUNCTION_CALL];if(We==="REMOVE")return zt+".splice("+ne+`, 1);
`;break;case"FROM_END":if(ne=Se.getAdjusted(ne,"AT",1,!0),We==="GET")return[zt+".slice("+ne+")[0]",Le.FUNCTION_CALL];if(We==="GET_REMOVE")return[zt+".splice("+ne+", 1)[0]",Le.FUNCTION_CALL];if(We==="REMOVE")return zt+".splice("+ne+", 1);";break;case"RANDOM":if(zt=Se.provideFunction_("listsGetRandomItem",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+zt+", "+(We!=="GET")+")",We==="GET"||We==="GET_REMOVE")return[zt,Le.FUNCTION_CALL];if(We==="REMOVE")return zt+`;
`}throw Error("Unhandled combination (lists_getIndex).")},M=function(ne,Se){function We(){if(ot.match(/^\w+$/))return"";const De=Se.nameDB_.getDistinctName("tmpList",r.NameType$$module$build$src$core$names.VARIABLE),gt="var "+De+" = "+ot+`;
`;return ot=De,gt}let ot=Se.valueToCode(ne,"LIST",Le.MEMBER)||"[]";const zt=ne.getFieldValue("MODE")||"GET";var sn=ne.getFieldValue("WHERE")||"FROM_START";const Nn=Se.valueToCode(ne,"TO",Le.ASSIGNMENT)||"null";switch(sn){case"FIRST":if(zt==="SET")return ot+"[0] = "+Nn+`;
`;if(zt==="INSERT")return ot+".unshift("+Nn+`);
`;break;case"LAST":if(zt==="SET")return We()+(ot+"["+ot+".length - 1] = "+Nn+`;
`);if(zt==="INSERT")return ot+".push("+Nn+`);
`;break;case"FROM_START":if(ne=Se.getAdjusted(ne,"AT"),zt==="SET")return ot+"["+ne+"] = "+Nn+`;
`;if(zt==="INSERT")return ot+".splice("+ne+", 0, "+Nn+`);
`;break;case"FROM_END":if(ne=Se.getAdjusted(ne,"AT",1,!1,Le.SUBTRACTION),sn=We(),zt==="SET")return sn+(ot+"["+ot+".length - "+ne+"] = "+Nn+`;
`);if(zt==="INSERT")return sn+(ot+".splice("+ot+".length - "+ne+", 0, "+Nn+`);
`);break;case"RANDOM":if(ne=We(),sn=Se.nameDB_.getDistinctName("tmpX",r.NameType$$module$build$src$core$names.VARIABLE),ne+="var "+sn+" = Math.floor(Math.random() * "+ot+`.length);
`,zt==="SET")return ne+(ot+"["+sn+"] = "+Nn+`;
`);if(zt==="INSERT")return ne+(ot+".splice("+sn+", 0, "+Nn+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},A=function(ne,Se){var We={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},ot=Se.valueToCode(ne,"LIST",Le.MEMBER)||"[]";const zt=ne.getFieldValue("WHERE1"),sn=ne.getFieldValue("WHERE2");if(zt==="FIRST"&&sn==="LAST")ot+=".slice(0)";else if(ot.match(/^\w+$/)||zt!=="FROM_END"&&sn==="FROM_START"){switch(zt){case"FROM_START":We=Se.getAdjusted(ne,"AT1");break;case"FROM_END":We=Se.getAdjusted(ne,"AT1",1,!1,Le.SUBTRACTION),We=ot+".length - "+We;break;case"FIRST":We="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(sn){case"FROM_START":Se=Se.getAdjusted(ne,"AT2",1);break;case"FROM_END":Se=Se.getAdjusted(ne,"AT2",0,!1,Le.SUBTRACTION),Se=ot+".length - "+Se;break;case"LAST":Se=ot+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}ot=ot+".slice("+We+", "+Se+")"}else{const Nn=Se.getAdjusted(ne,"AT1");ne=Se.getAdjusted(ne,"AT2"),ot=Se.provideFunction_("subsequence"+We[zt]+We[sn],`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(sequence${zt==="FROM_END"||zt==="FROM_START"?", at1":""}${sn==="FROM_END"||sn==="FROM_START"?", at2":""}) {
  var start = ${me("sequence",zt,"at1")};
  var end = ${me("sequence",sn,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+ot+(zt==="FROM_END"||zt==="FROM_START"?", "+Nn:"")+(sn==="FROM_END"||sn==="FROM_START"?", "+ne:"")+")"}return[ot,Le.FUNCTION_CALL]},O=function(ne,Se){const We=Se.valueToCode(ne,"LIST",Le.FUNCTION_CALL)||"[]",ot=ne.getFieldValue("DIRECTION")==="1"?1:-1;return ne=ne.getFieldValue("TYPE"),Se=Se.provideFunction_("listsGetSortCompare",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[We+".slice().sort("+Se+'("'+ne+'", '+ot+"))",Le.FUNCTION_CALL]},L=function(ne,Se){let We=Se.valueToCode(ne,"INPUT",Le.MEMBER);if(Se=Se.valueToCode(ne,"DELIM",Le.NONE)||"''",ne=ne.getFieldValue("MODE"),ne==="SPLIT")We||(We="''"),ne="split";else if(ne==="JOIN")We||(We="[]"),ne="join";else throw Error("Unknown mode: "+ne);return[We+"."+ne+"("+Se+")",Le.FUNCTION_CALL]},B=function(ne,Se){return[(Se.valueToCode(ne,"LIST",Le.FUNCTION_CALL)||"[]")+".slice().reverse()",Le.FUNCTION_CALL]},D=function(ne,Se){var We=0;let ot="";Se.STATEMENT_PREFIX&&(ot+=Se.injectId(Se.STATEMENT_PREFIX,ne));do{const zt=Se.valueToCode(ne,"IF"+We,Le.NONE)||"false";let sn=Se.statementToCode(ne,"DO"+We);Se.STATEMENT_SUFFIX&&(sn=Se.prefixLines(Se.injectId(Se.STATEMENT_SUFFIX,ne),Se.INDENT)+sn),ot+=(0<We?" else ":"")+"if ("+zt+`) {
`+sn+"}",We++}while(ne.getInput("IF"+We));return(ne.getInput("ELSE")||Se.STATEMENT_SUFFIX)&&(We=Se.statementToCode(ne,"ELSE"),Se.STATEMENT_SUFFIX&&(We=Se.prefixLines(Se.injectId(Se.STATEMENT_SUFFIX,ne),Se.INDENT)+We),ot+=` else {
`+We+"}"),ot+`
`},z=function(ne,Se){const We={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[ne.getFieldValue("OP")],ot=We==="=="||We==="!="?Le.EQUALITY:Le.RELATIONAL,zt=Se.valueToCode(ne,"A",ot)||"0";return ne=Se.valueToCode(ne,"B",ot)||"0",[zt+" "+We+" "+ne,ot]},U=function(ne,Se){const We=ne.getFieldValue("OP")==="AND"?"&&":"||",ot=We==="&&"?Le.LOGICAL_AND:Le.LOGICAL_OR;let zt=Se.valueToCode(ne,"A",ot);return ne=Se.valueToCode(ne,"B",ot),zt||ne?(Se=We==="&&"?"true":"false",zt||(zt=Se),ne||(ne=Se)):ne=zt="false",[zt+" "+We+" "+ne,ot]},V=function(ne,Se){const We=Le.LOGICAL_NOT;return["!"+(Se.valueToCode(ne,"BOOL",We)||"true"),We]},H=function(ne,Se){return[ne.getFieldValue("BOOL")==="TRUE"?"true":"false",Le.ATOMIC]},oe=function(ne,Se){return["null",Le.ATOMIC]},le=function(ne,Se){const We=Se.valueToCode(ne,"IF",Le.CONDITIONAL)||"false",ot=Se.valueToCode(ne,"THEN",Le.CONDITIONAL)||"null";return ne=Se.valueToCode(ne,"ELSE",Le.CONDITIONAL)||"null",[We+" ? "+ot+" : "+ne,Le.CONDITIONAL]},Z=function(ne,Se){let We;We=ne.getField("TIMES")?String(Number(ne.getFieldValue("TIMES"))):Se.valueToCode(ne,"TIMES",Le.ASSIGNMENT)||"0";let ot=Se.statementToCode(ne,"DO");ot=Se.addLoopTrap(ot,ne),ne="";const zt=Se.nameDB_.getDistinctName("count",r.NameType$$module$build$src$core$names.VARIABLE);let sn=We;return We.match(/^\w+$/)||r.isNumber$$module$build$src$core$utils$string(We)||(sn=Se.nameDB_.getDistinctName("repeat_end",r.NameType$$module$build$src$core$names.VARIABLE),ne+="var "+sn+" = "+We+`;
`),ne+("for (var "+zt+" = 0; "+zt+" < "+sn+"; "+zt+`++) {
`+ot+`}
`)},q=function(ne,Se){const We=ne.getFieldValue("MODE")==="UNTIL";let ot=Se.valueToCode(ne,"BOOL",We?Le.LOGICAL_NOT:Le.NONE)||"false",zt=Se.statementToCode(ne,"DO");return zt=Se.addLoopTrap(zt,ne),We&&(ot="!"+ot),"while ("+ot+`) {
`+zt+`}
`},he=function(ne,Se){var We=Se.getVariableName(ne.getFieldValue("VAR")),ot=Se.valueToCode(ne,"FROM",Le.ASSIGNMENT)||"0",zt=Se.valueToCode(ne,"TO",Le.ASSIGNMENT)||"0";const sn=Se.valueToCode(ne,"BY",Le.ASSIGNMENT)||"1";let Nn=Se.statementToCode(ne,"DO");if(Nn=Se.addLoopTrap(Nn,ne),r.isNumber$$module$build$src$core$utils$string(ot)&&r.isNumber$$module$build$src$core$utils$string(zt)&&r.isNumber$$module$build$src$core$utils$string(sn))Se=Number(ot)<=Number(zt),ne="for ("+We+" = "+ot+"; "+We+(Se?" <= ":" >= ")+zt+"; "+We,We=Math.abs(Number(sn)),ne=We===1?ne+(Se?"++":"--"):ne+((Se?" += ":" -= ")+We),ne+=`) {
`+Nn+`}
`;else{ne="";let De=ot;ot.match(/^\w+$/)||r.isNumber$$module$build$src$core$utils$string(ot)||(De=Se.nameDB_.getDistinctName(We+"_start",r.NameType$$module$build$src$core$names.VARIABLE),ne+="var "+De+" = "+ot+`;
`),ot=zt,zt.match(/^\w+$/)||r.isNumber$$module$build$src$core$utils$string(zt)||(ot=Se.nameDB_.getDistinctName(We+"_end",r.NameType$$module$build$src$core$names.VARIABLE),ne+="var "+ot+" = "+zt+`;
`),zt=Se.nameDB_.getDistinctName(We+"_inc",r.NameType$$module$build$src$core$names.VARIABLE),ne+="var "+zt+" = ",ne=r.isNumber$$module$build$src$core$utils$string(sn)?ne+(Math.abs(Number(sn))+`;
`):ne+("Math.abs("+sn+`);
`),ne+="if ("+De+" > "+ot+`) {
`,ne+=Se.INDENT+zt+" = -"+zt+`;
`,ne=ne+`}
for (`+(We+" = "+De+"; "+zt+" >= 0 ? "+We+" <= "+ot+" : "+We+" >= "+ot+"; "+We+" += "+zt+`) {
`+Nn+`}
`)}return ne},ae=function(ne,Se){const We=Se.getVariableName(ne.getFieldValue("VAR"));var ot=Se.valueToCode(ne,"LIST",Le.ASSIGNMENT)||"[]";let zt=Se.statementToCode(ne,"DO");zt=Se.addLoopTrap(zt,ne),ne="";let sn=ot;return ot.match(/^\w+$/)||(sn=Se.nameDB_.getDistinctName(We+"_list",r.NameType$$module$build$src$core$names.VARIABLE),ne+="var "+sn+" = "+ot+`;
`),ot=Se.nameDB_.getDistinctName(We+"_index",r.NameType$$module$build$src$core$names.VARIABLE),zt=Se.INDENT+We+" = "+sn+"["+ot+`];
`+zt,ne+("for (var "+ot+" in "+sn+`) {
`+zt+`}
`)},ue=function(ne,Se){let We="";if(Se.STATEMENT_PREFIX&&(We+=Se.injectId(Se.STATEMENT_PREFIX,ne)),Se.STATEMENT_SUFFIX&&(We+=Se.injectId(Se.STATEMENT_SUFFIX,ne)),Se.STATEMENT_PREFIX){const ot=ne.getSurroundLoop();ot&&!ot.suppressPrefixSuffix&&(We+=Se.injectId(Se.STATEMENT_PREFIX,ot))}switch(ne.getFieldValue("FLOW")){case"BREAK":return We+`break;
`;case"CONTINUE":return We+`continue;
`}throw Error("Unknown flow statement.")},ge=function(ne,Se){return ne=Number(ne.getFieldValue("NUM")),[String(ne),0<=ne?Le.ATOMIC:Le.UNARY_NEGATION]},we=function(ne,Se){var We={ADD:[" + ",Le.ADDITION],MINUS:[" - ",Le.SUBTRACTION],MULTIPLY:[" * ",Le.MULTIPLICATION],DIVIDE:[" / ",Le.DIVISION],POWER:[null,Le.NONE]}[ne.getFieldValue("OP")];const ot=We[0];We=We[1];const zt=Se.valueToCode(ne,"A",We)||"0";return ne=Se.valueToCode(ne,"B",We)||"0",ot?[zt+ot+ne,We]:["Math.pow("+zt+", "+ne+")",Le.FUNCTION_CALL]},J=function(ne,Se){const We=ne.getFieldValue("OP");let ot;if(We==="NEG")return ne=Se.valueToCode(ne,"NUM",Le.UNARY_NEGATION)||"0",ne[0]==="-"&&(ne=" "+ne),["-"+ne,Le.UNARY_NEGATION];switch(ne=We==="SIN"||We==="COS"||We==="TAN"?Se.valueToCode(ne,"NUM",Le.DIVISION)||"0":Se.valueToCode(ne,"NUM",Le.NONE)||"0",We){case"ABS":ot="Math.abs("+ne+")";break;case"ROOT":ot="Math.sqrt("+ne+")";break;case"LN":ot="Math.log("+ne+")";break;case"EXP":ot="Math.exp("+ne+")";break;case"POW10":ot="Math.pow(10,"+ne+")";break;case"ROUND":ot="Math.round("+ne+")";break;case"ROUNDUP":ot="Math.ceil("+ne+")";break;case"ROUNDDOWN":ot="Math.floor("+ne+")";break;case"SIN":ot="Math.sin("+ne+" / 180 * Math.PI)";break;case"COS":ot="Math.cos("+ne+" / 180 * Math.PI)";break;case"TAN":ot="Math.tan("+ne+" / 180 * Math.PI)"}if(ot)return[ot,Le.FUNCTION_CALL];switch(We){case"LOG10":ot="Math.log("+ne+") / Math.log(10)";break;case"ASIN":ot="Math.asin("+ne+") / Math.PI * 180";break;case"ACOS":ot="Math.acos("+ne+") / Math.PI * 180";break;case"ATAN":ot="Math.atan("+ne+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+We)}return[ot,Le.DIVISION]},re=function(ne,Se){return{PI:["Math.PI",Le.MEMBER],E:["Math.E",Le.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",Le.DIVISION],SQRT2:["Math.SQRT2",Le.MEMBER],SQRT1_2:["Math.SQRT1_2",Le.MEMBER],INFINITY:["Infinity",Le.ATOMIC]}[ne.getFieldValue("CONSTANT")]},ie=function(ne,Se){var We={EVEN:[" % 2 === 0",Le.MODULUS,Le.EQUALITY],ODD:[" % 2 === 1",Le.MODULUS,Le.EQUALITY],WHOLE:[" % 1 === 0",Le.MODULUS,Le.EQUALITY],POSITIVE:[" > 0",Le.RELATIONAL,Le.RELATIONAL],NEGATIVE:[" < 0",Le.RELATIONAL,Le.RELATIONAL],DIVISIBLE_BY:[null,Le.MODULUS,Le.EQUALITY],PRIME:[null,Le.NONE,Le.FUNCTION_CALL]};const ot=ne.getFieldValue("PROPERTY"),[zt,sn,Nn]=We[ot];return We=Se.valueToCode(ne,"NUMBER_TO_CHECK",sn)||"0",ot==="PRIME"?ne=Se.provideFunction_("mathIsPrime",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+We+")":ot==="DIVISIBLE_BY"?(ne=Se.valueToCode(ne,"DIVISOR",Le.MODULUS)||"0",ne=We+" % "+ne+" === 0"):ne=We+zt,[ne,Nn]},fe=function(ne,Se){const We=Se.valueToCode(ne,"DELTA",Le.ADDITION)||"0";return ne=Se.getVariableName(ne.getFieldValue("VAR")),ne+" = (typeof "+ne+" === 'number' ? "+ne+" : 0) + "+We+`;
`},Te=function(ne,Se){var We=ne.getFieldValue("OP");switch(We){case"SUM":ne=Se.valueToCode(ne,"LIST",Le.MEMBER)||"[]",ne+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":ne=Se.valueToCode(ne,"LIST",Le.NONE)||"[]",ne="Math.min.apply(null, "+ne+")";break;case"MAX":ne=Se.valueToCode(ne,"LIST",Le.NONE)||"[]",ne="Math.max.apply(null, "+ne+")";break;case"AVERAGE":We=Se.provideFunction_("mathMean",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),ne=Se.valueToCode(ne,"LIST",Le.NONE)||"[]",ne=We+"("+ne+")";break;case"MEDIAN":We=Se.provideFunction_("mathMedian",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),ne=Se.valueToCode(ne,"LIST",Le.NONE)||"[]",ne=We+"("+ne+")";break;case"MODE":We=Se.provideFunction_("mathModes",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),ne=Se.valueToCode(ne,"LIST",Le.NONE)||"[]",ne=We+"("+ne+")";break;case"STD_DEV":We=Se.provideFunction_("mathStandardDeviation",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),ne=Se.valueToCode(ne,"LIST",Le.NONE)||"[]",ne=We+"("+ne+")";break;case"RANDOM":We=Se.provideFunction_("mathRandomList",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),ne=Se.valueToCode(ne,"LIST",Le.NONE)||"[]",ne=We+"("+ne+")";break;default:throw Error("Unknown operator: "+We)}return[ne,Le.FUNCTION_CALL]},Fe=function(ne,Se){const We=Se.valueToCode(ne,"DIVIDEND",Le.MODULUS)||"0";return ne=Se.valueToCode(ne,"DIVISOR",Le.MODULUS)||"0",[We+" % "+ne,Le.MODULUS]},Ie=function(ne,Se){const We=Se.valueToCode(ne,"VALUE",Le.NONE)||"0",ot=Se.valueToCode(ne,"LOW",Le.NONE)||"0";return ne=Se.valueToCode(ne,"HIGH",Le.NONE)||"Infinity",["Math.min(Math.max("+We+", "+ot+"), "+ne+")",Le.FUNCTION_CALL]},qe=function(ne,Se){const We=Se.valueToCode(ne,"FROM",Le.NONE)||"0";return ne=Se.valueToCode(ne,"TO",Le.NONE)||"0",[Se.provideFunction_("mathRandomInt",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+We+", "+ne+")",Le.FUNCTION_CALL]},Re=function(ne,Se){return["Math.random()",Le.FUNCTION_CALL]},Qe=function(ne,Se){const We=Se.valueToCode(ne,"X",Le.NONE)||"0";return["Math.atan2("+(Se.valueToCode(ne,"Y",Le.NONE)||"0")+", "+We+") / Math.PI * 180",Le.DIVISION]},nt=function(ne,Se){const We=Se.getProcedureName(ne.getFieldValue("NAME"));var ot="";Se.STATEMENT_PREFIX&&(ot+=Se.injectId(Se.STATEMENT_PREFIX,ne)),Se.STATEMENT_SUFFIX&&(ot+=Se.injectId(Se.STATEMENT_SUFFIX,ne)),ot&&(ot=Se.prefixLines(ot,Se.INDENT));let zt="";Se.INFINITE_LOOP_TRAP&&(zt=Se.prefixLines(Se.injectId(Se.INFINITE_LOOP_TRAP,ne),Se.INDENT));const sn=Se.statementToCode(ne,"STACK");let Nn=Se.valueToCode(ne,"RETURN",Le.NONE)||"",De="";sn&&Nn&&(De=ot),Nn&&(Nn=Se.INDENT+"return "+Nn+`;
`);const gt=[],Ct=ne.getVars();for(let bt=0;bt<Ct.length;bt++)gt[bt]=Se.getVariableName(Ct[bt]);return ot="function "+We+"("+gt.join(", ")+`) {
`+ot+zt+sn+De+Nn+"}",ot=Se.scrub_(ne,ot),Se.definitions_["%"+We]=ot,null},ft=function(ne,Se){const We=Se.getProcedureName(ne.getFieldValue("NAME")),ot=[],zt=ne.getVars();for(let sn=0;sn<zt.length;sn++)ot[sn]=Se.valueToCode(ne,"ARG"+sn,Le.NONE)||"null";return[We+"("+ot.join(", ")+")",Le.FUNCTION_CALL]},lt=function(ne,Se){return Se.forBlock.procedures_callreturn(ne,Se)[0]+`;
`},ze=function(ne,Se){let We="if ("+(Se.valueToCode(ne,"CONDITION",Le.NONE)||"false")+`) {
`;return Se.STATEMENT_SUFFIX&&(We+=Se.prefixLines(Se.injectId(Se.STATEMENT_SUFFIX,ne),Se.INDENT)),ne.hasReturnValue_?(ne=Se.valueToCode(ne,"VALUE",Le.NONE)||"null",We+=Se.INDENT+"return "+ne+`;
`):We+=Se.INDENT+`return;
`,We+`}
`},Ce=function(ne,Se){return[Se.quote_(ne.getFieldValue("TEXT")),Le.ATOMIC]},He=function(ne,Se){return ne=Se.multiline_quote_(ne.getFieldValue("TEXT")),Se=ne.indexOf("+")!==-1?Le.ADDITION:Le.ATOMIC,[ne,Se]},rt=function(ne,Se){switch(ne.itemCount_){case 0:return["''",Le.ATOMIC];case 1:return ne=Se.valueToCode(ne,"ADD0",Le.NONE)||"''",Jt(ne);case 2:var We=Se.valueToCode(ne,"ADD0",Le.NONE)||"''";return ne=Se.valueToCode(ne,"ADD1",Le.NONE)||"''",[Jt(We)[0]+" + "+Jt(ne)[0],Le.ADDITION];default:We=Array(ne.itemCount_);for(let ot=0;ot<ne.itemCount_;ot++)We[ot]=Se.valueToCode(ne,"ADD"+ot,Le.NONE)||"''";return["["+We.join(",")+"].join('')",Le.FUNCTION_CALL]}},it=function(ne,Se){const We=Se.getVariableName(ne.getFieldValue("VAR"));return ne=Se.valueToCode(ne,"TEXT",Le.NONE)||"''",We+" += "+Jt(ne)[0]+`;
`},Nt=function(ne,Se){return[(Se.valueToCode(ne,"VALUE",Le.MEMBER)||"''")+".length",Le.MEMBER]},kt=function(ne,Se){return["!"+(Se.valueToCode(ne,"VALUE",Le.MEMBER)||"''")+".length",Le.LOGICAL_NOT]},vt=function(ne,Se){const We=ne.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",ot=Se.valueToCode(ne,"FIND",Le.NONE)||"''";return Se=(Se.valueToCode(ne,"VALUE",Le.MEMBER)||"''")+"."+We+"("+ot+")",ne.workspace.options.oneBasedIndex?[Se+" + 1",Le.ADDITION]:[Se,Le.FUNCTION_CALL]},Mt=function(ne,Se){const We=ne.getFieldValue("WHERE")||"FROM_START",ot=Se.valueToCode(ne,"VALUE",We==="RANDOM"?Le.NONE:Le.MEMBER)||"''";switch(We){case"FIRST":return[ot+".charAt(0)",Le.FUNCTION_CALL];case"LAST":return[ot+".slice(-1)",Le.FUNCTION_CALL];case"FROM_START":return ne=Se.getAdjusted(ne,"AT"),[ot+".charAt("+ne+")",Le.FUNCTION_CALL];case"FROM_END":return ne=Se.getAdjusted(ne,"AT",1,!0),[ot+".slice("+ne+").charAt(0)",Le.FUNCTION_CALL];case"RANDOM":return[Se.provideFunction_("textRandomLetter",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+ot+")",Le.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},At=function(ne,Se){var We={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const ot=ne.getFieldValue("WHERE1"),zt=ne.getFieldValue("WHERE2");var sn=ot!=="FROM_END"&&ot!=="LAST"&&zt!=="FROM_END"&&zt!=="LAST",Nn=Se.valueToCode(ne,"STRING",sn?Le.MEMBER:Le.NONE)||"''";if(ot==="FIRST"&&zt==="LAST")return[Nn,Le.NONE];if(Nn.match(/^'?\w+'?$/)||sn){switch(ot){case"FROM_START":We=Se.getAdjusted(ne,"AT1");break;case"FROM_END":We=Se.getAdjusted(ne,"AT1",1,!1,Le.SUBTRACTION),We=Nn+".length - "+We;break;case"FIRST":We="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(zt){case"FROM_START":Se=Se.getAdjusted(ne,"AT2",1);break;case"FROM_END":Se=Se.getAdjusted(ne,"AT2",0,!1,Le.SUBTRACTION),Se=Nn+".length - "+Se;break;case"LAST":Se=Nn+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}Nn=Nn+".slice("+We+", "+Se+")"}else sn=Se.getAdjusted(ne,"AT1"),ne=Se.getAdjusted(ne,"AT2"),Nn=Se.provideFunction_("subsequence"+We[ot]+We[zt],`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(sequence${ot==="FROM_END"||ot==="FROM_START"?", at1":""}${zt==="FROM_END"||zt==="FROM_START"?", at2":""}) {
  var start = ${Kt("sequence",ot,"at1")};
  var end = ${Kt("sequence",zt,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Nn+(ot==="FROM_END"||ot==="FROM_START"?", "+sn:"")+(zt==="FROM_END"||zt==="FROM_START"?", "+ne:"")+")";return[Nn,Le.FUNCTION_CALL]},mt=function(ne,Se){const We={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[ne.getFieldValue("CASE")];return ne=Se.valueToCode(ne,"TEXT",We?Le.MEMBER:Le.NONE)||"''",[We?ne+We:Se.provideFunction_("textToTitleCase",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+ne+")",Le.FUNCTION_CALL]},xe=function(ne,Se){const We={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[ne.getFieldValue("MODE")];return[(Se.valueToCode(ne,"TEXT",Le.MEMBER)||"''")+We,Le.FUNCTION_CALL]},se=function(ne,Se){return"window.alert("+(Se.valueToCode(ne,"TEXT",Le.NONE)||"''")+`);
`},$e=function(ne,Se){return Se="window.prompt("+(ne.getField("TEXT")?Se.quote_(ne.getFieldValue("TEXT")):Se.valueToCode(ne,"TEXT",Le.NONE)||"''")+")",ne.getFieldValue("TYPE")==="NUMBER"&&(Se="Number("+Se+")"),[Se,Le.FUNCTION_CALL]},ht=function(ne,Se){const We=Se.valueToCode(ne,"TEXT",Le.NONE)||"''";return ne=Se.valueToCode(ne,"SUB",Le.NONE)||"''",[Se.provideFunction_("textCount",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+We+", "+ne+")",Le.FUNCTION_CALL]},St=function(ne,Se){const We=Se.valueToCode(ne,"TEXT",Le.NONE)||"''",ot=Se.valueToCode(ne,"FROM",Le.NONE)||"''";return ne=Se.valueToCode(ne,"TO",Le.NONE)||"''",[Se.provideFunction_("textReplace",`
function ${Se.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+We+", "+ot+", "+ne+")",Le.FUNCTION_CALL]},It=function(ne,Se){return[(Se.valueToCode(ne,"TEXT",Le.MEMBER)||"''")+".split('').reverse().join('')",Le.FUNCTION_CALL]},pt=function(ne,Se){return[Se.getVariableName(ne.getFieldValue("VAR")),Le.ATOMIC]},Ke=function(ne,Se){const We=Se.valueToCode(ne,"VALUE",Le.ASSIGNMENT)||"0";return Se.getVariableName(ne.getFieldValue("VAR"))+" = "+We+`;
`},Le;(function(ne){ne[ne.ATOMIC=0]="ATOMIC",ne[ne.NEW=1.1]="NEW",ne[ne.MEMBER=1.2]="MEMBER",ne[ne.FUNCTION_CALL=2]="FUNCTION_CALL",ne[ne.INCREMENT=3]="INCREMENT",ne[ne.DECREMENT=3]="DECREMENT",ne[ne.BITWISE_NOT=4.1]="BITWISE_NOT",ne[ne.UNARY_PLUS=4.2]="UNARY_PLUS",ne[ne.UNARY_NEGATION=4.3]="UNARY_NEGATION",ne[ne.LOGICAL_NOT=4.4]="LOGICAL_NOT",ne[ne.TYPEOF=4.5]="TYPEOF",ne[ne.VOID=4.6]="VOID",ne[ne.DELETE=4.7]="DELETE",ne[ne.AWAIT=4.8]="AWAIT",ne[ne.EXPONENTIATION=5]="EXPONENTIATION",ne[ne.MULTIPLICATION=5.1]="MULTIPLICATION",ne[ne.DIVISION=5.2]="DIVISION",ne[ne.MODULUS=5.3]="MODULUS",ne[ne.SUBTRACTION=6.1]="SUBTRACTION",ne[ne.ADDITION=6.2]="ADDITION",ne[ne.BITWISE_SHIFT=7]="BITWISE_SHIFT",ne[ne.RELATIONAL=8]="RELATIONAL",ne[ne.IN=8]="IN",ne[ne.INSTANCEOF=8]="INSTANCEOF",ne[ne.EQUALITY=9]="EQUALITY",ne[ne.BITWISE_AND=10]="BITWISE_AND",ne[ne.BITWISE_XOR=11]="BITWISE_XOR",ne[ne.BITWISE_OR=12]="BITWISE_OR",ne[ne.LOGICAL_AND=13]="LOGICAL_AND",ne[ne.LOGICAL_OR=14]="LOGICAL_OR",ne[ne.CONDITIONAL=15]="CONDITIONAL",ne[ne.ASSIGNMENT=16]="ASSIGNMENT",ne[ne.YIELD=17]="YIELD",ne[ne.COMMA=18]="COMMA",ne[ne.NONE=99]="NONE"})(Le||(Le={}));var Q=class extends r.CodeGenerator$$module$build$src$core$generator{constructor(ne="JavaScript"){super(ne),this.ORDER_OVERRIDES=[[Le.FUNCTION_CALL,Le.MEMBER],[Le.FUNCTION_CALL,Le.FUNCTION_CALL],[Le.MEMBER,Le.MEMBER],[Le.MEMBER,Le.FUNCTION_CALL],[Le.LOGICAL_NOT,Le.LOGICAL_NOT],[Le.MULTIPLICATION,Le.MULTIPLICATION],[Le.ADDITION,Le.ADDITION],[Le.LOGICAL_AND,Le.LOGICAL_AND],[Le.LOGICAL_OR,Le.LOGICAL_OR]],this.isInitialized=!1;for(const Se in Le)ne=Le[Se],typeof ne!="string"&&(this["ORDER_"+Se]=ne);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(ne){super.init(ne),this.nameDB_?this.nameDB_.reset():this.nameDB_=new r.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(ne.getVariableMap()),this.nameDB_.populateVariables(ne),this.nameDB_.populateProcedures(ne);const Se=[];var We=r.allDeveloperVariables$$module$build$src$core$variables(ne);for(let ot=0;ot<We.length;ot++)Se.push(this.nameDB_.getName(We[ot],r.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(ne=r.allUsedVarModels$$module$build$src$core$variables(ne),We=0;We<ne.length;We++)Se.push(this.nameDB_.getName(ne[We].getId(),r.NameType$$module$build$src$core$names.VARIABLE));Se.length&&(this.definitions_.variables="var "+Se.join(", ")+";"),this.isInitialized=!0}finish(ne){const Se=Object.values(this.definitions_);return super.finish(ne),this.isInitialized=!1,this.nameDB_.reset(),Se.join(`

`)+`


`+ne}scrubNakedValue(ne){return ne+`;
`}quote_(ne){return ne=ne.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+ne+"'"}multiline_quote_(ne){return ne.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(ne,Se,We=!1){let ot="";if(!ne.outputConnection||!ne.outputConnection.targetConnection){var zt=ne.getCommentText();zt&&(zt=r.wrap$$module$build$src$core$utils$string(zt,this.COMMENT_WRAP-3),ot+=this.prefixLines(zt+`
`,"// "));for(let sn=0;sn<ne.inputList.length;sn++)ne.inputList[sn].type===r.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(zt=ne.inputList[sn].connection.targetBlock())&&(zt=this.allNestedComments(zt))&&(ot+=this.prefixLines(zt,"// "))}return ne=ne.nextConnection&&ne.nextConnection.targetBlock(),We=We?"":this.blockToCode(ne),ot+Se+We}getAdjusted(ne,Se,We=0,ot=!1,zt=Le.NONE){ne.workspace.options.oneBasedIndex&&We--;const sn=ne.workspace.options.oneBasedIndex?"1":"0";let Nn=zt;return 0<We?Nn=Le.ADDITION:0>We?Nn=Le.SUBTRACTION:ot&&(Nn=Le.UNARY_NEGATION),ne=this.valueToCode(ne,Se,Nn)||sn,We===0&&!ot?ne:r.isNumber$$module$build$src$core$utils$string(ne)?(ne=String(Number(ne)+We),ot&&(ne=String(-Number(ne))),ne):(0<We?ne=`${ne} + ${We}`:0>We&&(ne=`${ne} - ${-We}`),ot&&(ne=We?`-(${ne})`:`-${ne}`),Math.floor(zt)>=Math.floor(Nn)&&(ne=`(${ne})`),ne)}},te={};te.colour_blend=u,te.colour_picker=s,te.colour_random=o,te.colour_rgb=l;var me=function(ne,Se,We){return Se==="FIRST"?"0":Se==="FROM_END"?ne+".length - 1 - "+We:Se==="LAST"?ne+".length - 1":We},ke={};ke.lists_create_empty=h,ke.lists_create_with=f,ke.lists_getIndex=C,ke.lists_getSublist=A,ke.lists_indexOf=S,ke.lists_isEmpty=b,ke.lists_length=y,ke.lists_repeat=g,ke.lists_reverse=B,ke.lists_setIndex=M,ke.lists_sort=O,ke.lists_split=L;var Xe={};Xe.controls_if=D,Xe.controls_ifelse=D,Xe.logic_boolean=H,Xe.logic_compare=z,Xe.logic_negate=V,Xe.logic_null=oe,Xe.logic_operation=U,Xe.logic_ternary=le;var Wt={};Wt.controls_flow_statements=ue,Wt.controls_for=he,Wt.controls_forEach=ae,Wt.controls_repeat=Z,Wt.controls_repeat_ext=Z,Wt.controls_whileUntil=q;var Ge={};Ge.math_arithmetic=we,Ge.math_atan2=Qe,Ge.math_change=fe,Ge.math_constant=re,Ge.math_constrain=Ie,Ge.math_modulo=Fe,Ge.math_number=ge,Ge.math_number_property=ie,Ge.math_on_list=Te,Ge.math_random_float=Re,Ge.math_random_int=qe,Ge.math_round=J,Ge.math_single=J,Ge.math_trig=J;var tn={};tn.procedures_callnoreturn=lt,tn.procedures_callreturn=ft,tn.procedures_defnoreturn=nt,tn.procedures_defreturn=nt,tn.procedures_ifreturn=ze;var _t=/^\s*'([^']|\\')*'\s*$/,Jt=function(ne){return _t.test(ne)?[ne,Le.ATOMIC]:["String("+ne+")",Le.FUNCTION_CALL]},Kt=function(ne,Se,We){return Se==="FIRST"?"0":Se==="FROM_END"?ne+".length - 1 - "+We:Se==="LAST"?ne+".length - 1":We},On={};On.text=Ce,On.text_append=it,On.text_changeCase=mt,On.text_charAt=Mt,On.text_count=ht,On.text_getSubstring=At,On.text_indexOf=vt,On.text_isEmpty=kt,On.text_join=rt,On.text_length=Nt,On.text_multiline=He,On.text_print=se,On.text_prompt=$e,On.text_prompt_ext=$e,On.text_replace=St,On.text_reverse=It,On.text_trim=xe;var si={};si.variables_get=pt,si.variables_set=Ke;var Pr={};Pr.variables_get_dynamic=pt,Pr.variables_set_dynamic=Ke;var Ei=new Q,$r=Object.assign({},te,ke,Xe,Wt,Ge,tn,On,si,Pr);for(const ne in $r)Ei.forBlock[ne]=$r[ne];var gr={};return gr.JavascriptGenerator=Q,gr.Order=Le,gr.javascriptGenerator=Ei,gr.__namespace__=r,gr})}(pO)),pO.exports}(function(n,e){(function(t,r){n.exports=r(D3(),Sie())})(Vl,function(t,r){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return r})})(mj);var Cw=mj.exports,HU;function wie(){return HU||(HU=1,function(n,e){(function(t,r){n.exports=r(D3(),yie(),Tie(),Cw)})(Vl,function(t,r,s,o){return t.setLocale(r),t})}(aO)),aO.exports}(function(n,e){(function(t,r){n.exports=r(wie())})(Vl,function(t){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})})(pj);var Qg=pj.exports,$t=D3();const Eie={colour:"#5f86b7"},xie={colour:"#5f86b7"},$ie={colour:"#0b522e"},Cie={colour:"#0b522e"},Mie={colour:"#c86949"},Aie={colour:"#50b166"},Iie={colour:"#802639"},Rie={colour:"#2dadb8"},kie={colour:"#d20e4d"},Oie={colour:"#96a467"},Pt={trigger_category:Eie,procedure_category:xie,logic_category:$ie,loop_category:Cie,math_category:Mie,movement_category:Aie,light_category:Iie,speech_category:Rie,face_category:kie,audio_category:Oie};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mp extends $t.FieldNumber{constructor(e,t,r,s,o,l,u,h){super(e,t,r,s,u,h),this.boundEvents=[],this.sliderInput=null,this.leftLabel=o,this.rightLabel=l}setLeftLabel(e){this.leftLabel=e}setRightLabel(e){this.rightLabel=e}setLabels(e,t){this.leftLabel=e,this.rightLabel=t}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,void 0,void 0,e)}showEditor_(e,t){super.showEditor_(e,!0);const r=this.dropdownCreate_();$t.DropDownDiv.getContentDiv().appendChild(r);const s=this.getSourceBlock();if(s instanceof $t.BlockSvg){const o=s.getColour()||"",l=s.getColourTertiary()||"";$t.DropDownDiv.setColour(o,l)}$t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),t||r.firstChild.focus({preventScroll:!0})}render_(){super.render_(),this.updateSlider_()}static createLabelInContainer(e,t){const r=document.createElement("div"),s=document.createElement("span"),o=document.createElement("span");return r.classList.add("mathNumSliderLabel"),s.textContent=e,r.appendChild(s),r.appendChild(o),t.appendChild(r),o}dropdownCreate_(){const e=document.createElement("div");e.className="mathNumSliderContainer",this.leftLabel&&mp.createLabelInContainer(this.leftLabel,e);const t=document.createElement("input");return t.setAttribute("type","range"),t.setAttribute("min",`${this.min_}`),t.setAttribute("max",`${this.max_}`),t.setAttribute("step",`${this.precision_}`),t.setAttribute("value",`${this.getValue()}`),t.setAttribute("tabindex","0"),t.className="mathNumSlider",e.appendChild(t),this.rightLabel&&mp.createLabelInContainer(this.rightLabel,e),this.sliderInput=t,this.boundEvents.push($t.browserEvents.conditionalBind(t,"input",this,this.onSliderChange_)),e}dropdownDispose_(){for(const e of this.boundEvents)$t.browserEvents.unbind(e);this.boundEvents.length=0,this.sliderInput=null}onSliderChange_(){var t;const e=this.value_;this.setEditorValue_((t=this.sliderInput)==null?void 0:t.value,!1),this.getSourceBlock()&&$t.Events.fire(new($t.Events.get($t.Events.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_)),this.resizeEditor_()}updateSlider_(){this.sliderInput&&this.sliderInput.setAttribute("value",`${this.getValue()}`)}}$t.fieldRegistry.register("math_num_slider",mp);$t.Css.register(`
.mathNumSliderContainer {
  align-items: center;
  display: flex;
  height: 32px;
  justify-content: center;
  width: 150px;
}
.mathNumSliderLabel {
    color: white;
}
.mathNumSlider {
  -webkit-appearance: none;
  background: transparent; /* override white in chrome */
  margin: 4px;
  padding: 0;
  width: 100%;
}
.mathNumSlider:focus {
  outline: none;
}
/* Webkit */
.mathNumSlider::-webkit-slider-runnable-track {
  background: #ddd;
  border-radius: 5px;
  height: 10px;
}
.mathNumSlider::-webkit-slider-thumb {
  -webkit-appearance: none;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  margin-top: -7px;
  width: 24px;
}
/* Firefox */
.mathNumSlider::-moz-range-track {
  background: #ddd;
  border-radius: 5px;
  height: 10px;
}
.mathNumSlider::-moz-range-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  width: 24px;
}
.mathNumSlider::-moz-focus-outer {
  /* override the focus border style */
  border: 0;
}
/* IE */
.mathNumSlider::-ms-track {
  /* IE wont let the thumb overflow the track, so fake it */
  background: transparent;
  border-color: transparent;
  border-width: 15px 0;
  /* remove default tick marks */
  color: transparent;
  height: 10px;
  width: 100%;
  margin: -4px 0;
}
.mathNumSlider::-ms-fill-lower  {
  background: #ddd;
  border-radius: 5px;
}
.mathNumSlider::-ms-fill-upper  {
  background: #ddd;
  border-radius: 5px;
}
.mathNumSlider::-ms-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  width: 24px;
}
`);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ut=[];const Lie={type:"add_text",message0:"Add text %1 with color %2",args0:[{type:"input_value",name:"TEXT",check:"String"},{type:"input_value",name:"COLOR",check:"Colour"}],previousStatement:null,nextStatement:null,colour:160,tooltip:"",helpUrl:""};let gj="ChangeLED";Ut.push(gj);$t.Blocks[gj]={init:function(){this.setColour(Pt.light_category.colour),this.appendValueInput("FIELD_ChangeLED").setCheck("Colour").appendField("Change the LED color to"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setOutput(!1),this.setTooltip("Changes Misty's LED to a specified color")}};let _j="TransitionLED";Ut.push(_j);$t.Blocks[_j]={init:function(){this.setColour(Pt.light_category.colour),this.appendValueInput("COLOR1").setCheck("Colour").appendField("Transition LED from"),this.appendValueInput("COLOR2").setCheck("Colour").appendField("to"),this.appendDummyInput().appendField("using the").appendField(new $t.FieldDropdown([["Breathe","BREATHE"],["Blink","BLINK"],["Transition Once","TRANSITION_ONCE"]]),"TRANSITION_TYPE").appendField("transition"),this.appendDummyInput().appendField("for a duration of").appendField(new $t.FieldNumber(1,0,60,1),"FIELD_TransitionTime_TimeMs").appendField("secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Transition LED between two colors with the specified transition type and time.")}};let vj="DisplayImage";Ut.push(vj);$t.Blocks[vj]={init:function(){this.setColour(Pt.face_category.colour),this.appendValueInput("FIELD_DisplayImage_Filename").setCheck("Face").appendField("Change face expression to: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Displays an image on Misty's screen, Alpha specifies transparency (0 is completely transparent, 1 is completely opaque) ***WARNING: MUST connect with ListFilesAvailable to select the image file to display***")}};let yj="DisplayAnimation";Ut.push(yj);$t.Blocks[yj]={init:function(){this.setColour(Pt.misc_category.colour),this.appendValueInput("FIELD_DisplayAnimation_Filename").setCheck("Animation").appendField("Show this animation on Misty: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Runs a specified animation on Misty")}};let bj="MoveHead";Ut.push(bj);$t.Blocks[bj]={init:function(){this.setColour(Pt.movement_category.colour),this.appendDummyInput().appendField("Move head").appendField(new $t.FieldDropdown([["Up","U"],["Down","D"]]),"FIELD_MoveHead_Pitch"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head Up or Down")}};let Tj="MoveArm";Ut.push(Tj);$t.Blocks[Tj]={init:function(){this.setColour(Pt.movement_category.colour),this.appendDummyInput().appendField("Move ").appendField(new $t.FieldDropdown([["Right","Right"],["Left","Left"]]),"FIELD_MoveArm_Arm").appendField("arm to position").appendField(new mp(45,-29,90,1,"Up","Down"),"FIELD_MoveArm_Position").appendField("at a speed of (0 to 100)").appendField(new mp(50,0,100,1,"Slow","Fast"),"FIELD_MoveArm_Velocity"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves one of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)")}};let Sj="MoveArm2";Ut.push(Sj);$t.Blocks[Sj]={init:function(){this.setColour(Pt.movement_category.colour),this.appendDummyInput().appendField("Move both arms to position").appendField(new mp(45,-29,90,1,"Up","Down"),"FIELD_MoveArm2_Position").appendField("at a speed of (0 to 100)").appendField(new mp(50,0,100,1,"Slow","Fast"),"FIELD_MoveArm2_Velocity"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)")}};let wj="BasicSlider";Ut.push(wj);$t.Blocks[wj]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField("Slider Value: ").appendField(new mp(0,0,100,1,"Min","Max"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let Ej="ArmPositionSlider";Ut.push(Ej);$t.Blocks[Ej]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField(new mp(45,-29,90,1,"Up","Down"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let xj="SpeedSlider";Ut.push(xj);$t.Blocks[xj]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField(new mp(1,1,100,1,"Slow","Fast"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let $j="TimeSlider";Ut.push($j);$t.Blocks[$j]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField(new mp(1,1,60,1,"Short","Long"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let Cj="HeadPitchSlider";Ut.push(Cj);$t.Blocks[Cj]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField(new mp(0,-40,25,1,"Up","Down"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let Mj="HeadRollSlider";Ut.push(Mj);$t.Blocks[Mj]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField(new mp(0,-40,40,1,"Right","Left"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let Aj="HeadYawSlider";Ut.push(Aj);$t.Blocks[Aj]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField(new mp(0,-81,81,1,"Right","Left"),"FIELD_slider_value"),this.setInputsInline(!1),this.setOutput(!0,null)}};let Ij="MoveArms2";Ut.push(Ij);$t.Blocks[Ij]={init:function(){var n=this.workspace.newBlock("ArmPositionSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("SpeedSlider");t.setShadow(!0),t.initSvg(),t.render();var r=t.outputConnection,s=this.workspace.newBlock("ArmPositionSlider");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection,l=this.workspace.newBlock("SpeedSlider");l.setShadow(!0),l.initSvg(),l.render();var u=l.outputConnection;this.setColour(Pt.movement_category.colour),this.appendValueInput("FIELD_MoveArm_LeftPosition").setCheck("Number").appendField("Left Arm Position");var h=this.getInput("FIELD_MoveArm_LeftPosition").connection;h.connect(e),this.appendValueInput("FIELD_MoveArm_LeftVelocity").setCheck("Number").appendField("Left Arm Speed");var g=this.getInput("FIELD_MoveArm_LeftVelocity").connection;g.connect(r),this.appendValueInput("FIELD_MoveArm_RightPosition").setCheck("Number").appendField("Right Arm Position");var f=this.getInput("FIELD_MoveArm_RightPosition").connection;f.connect(o),this.appendValueInput("FIELD_MoveArm_RightVelocity").setCheck("Number").appendField("Right Arm Speed");var g=this.getInput("FIELD_MoveArm_RightVelocity").connection;g.connect(u),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed")}};let Rj="MoveArm3";Ut.push(Rj);$t.Blocks[Rj]={init:function(){var n=this.workspace.newBlock("ArmPositionSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("SpeedSlider");t.setShadow(!0),t.initSvg(),t.render();var r=t.outputConnection;this.appendDummyInput().appendField("Move Arm: ").appendField(new $t.FieldDropdown([["Right","Right"],["Left","Left"]]),"FIELD_MoveArm_Arm"),this.setColour(Pt.movement_category.colour),this.appendValueInput("FIELD_MoveArm_Position").setCheck("Number").appendField("Left Arm Position");var s=this.getInput("FIELD_MoveArm_Position").connection;s.connect(e),this.appendValueInput("FIELD_MoveArm_Velocity").setCheck("Number").appendField("Left Arm Speed");var o=this.getInput("FIELD_MoveArm_Velocity").connection;o.connect(r),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed")}};let kj="DriveTime";Ut.push(kj);$t.Blocks[kj]={init:function(){this.setColour(Pt.movement_category.colour),this.appendDummyInput().appendField("Move ").appendField(new $t.FieldDropdown([["Forward","F"],["Backward","B"]]),"FIELD_DriveTime_Direction").appendField("at a speed of (0 to 100)").appendField(new $t.FieldNumber(25,0,100,1),"FIELD_DriveTime_Velocity").appendField("for a duration of").appendField(new $t.FieldNumber(1,0,60,1),"FIELD_DriveTime_TimeMs").appendField("secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty straight in a specified direction at a specified speed for a specified amount of time (1000ms = 1 second)")}};let Oj="MoveHead3";Ut.push(Oj);$t.Blocks[Oj]={init:function(){var n=this.workspace.newBlock("HeadPitchSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("HeadRollSlider");t.setShadow(!0),t.initSvg(),t.render();var r=t.outputConnection,s=this.workspace.newBlock("HeadYawSlider");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection,l=this.workspace.newBlock("TimeSlider");l.setShadow(!0),l.initSvg(),l.render();var u=l.outputConnection;this.setColour(Pt.movement_category.colour),this.appendDummyInput("FIELD_TEXT_IGNORE").appendField("Move head"),this.appendValueInput("FIELD_MoveHead_Pitch").setCheck("Number").appendField("Look Up/Down:");var h=this.getInput("FIELD_MoveHead_Pitch").connection;h.connect(e),this.appendValueInput("FIELD_MoveHead_Roll").setCheck("Number").appendField("Tilt Left/Right:");var f=this.getInput("FIELD_MoveHead_Roll").connection;f.connect(r),this.appendValueInput("FIELD_MoveHead_Yaw").setCheck("Number").appendField("Look Right/Left:");var g=this.getInput("FIELD_MoveHead_Yaw").connection;g.connect(o),this.appendValueInput("FIELD_MoveHead_Time").setCheck("Number").appendField("Time (seconds):");var y=this.getInput("FIELD_MoveHead_Time").connection;y.connect(u),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head a specified amount of degrees with roll, pitch, and/or yaw")}};let Lj="DriveTime2";Ut.push(Lj);$t.Blocks[Lj]={init:function(){var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("math_number");t.setShadow(!0),t.initSvg(),t.render();var r=t.outputConnection,s=this.workspace.newBlock("math_number");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection;this.setColour(Pt.movement_category.colour),this.appendValueInput("FIELD_DriveTime_Velocity").setCheck("Number").appendField("Move at a speed of (-100 to 100)");var l=this.getInput("FIELD_DriveTime_Velocity").connection;l.connect(e),this.appendValueInput("FIELD_DriveTime_Angular").setCheck("Number").appendField("with angular velocity of (-100 CW to 100 CCW)");var u=this.getInput("FIELD_DriveTime_Angular").connection;u.connect(r),this.appendValueInput("FIELD_DriveTime_TimeMs").setCheck("Number").appendField("for a duration of secs");var h=this.getInput("FIELD_DriveTime_TimeMs").connection;h.connect(o),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty forward (positive speed) or backward (negative speed) with possible turning using angular velocity (0 for straight) for the specified duration (1000 ms = 1 second)")}};let Nj="Turn";Ut.push(Nj);$t.Blocks[Nj]={init:function(){this.setColour(Pt.movement_category.colour),this.appendDummyInput().appendField("Turn").appendField(new $t.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction").appendField("for time of").appendField(new $t.FieldNumber(4500),"FIELD_Turn_Duration").appendField("milliseconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)")}};let Dj="Turn2";Ut.push(Dj);$t.Blocks[Dj]={init:function(){var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.setColour(Pt.movement_category.colour),this.appendDummyInput().appendField("Turn").appendField(new $t.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction"),this.appendValueInput("FIELD_Turn_Duration").setCheck("Number").appendField("for time of");var t=this.getInput("FIELD_Turn_Duration").connection;t.connect(e),this.appendDummyInput().appendField("milliseconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)")}};let Pj="Speak";Ut.push(Pj);$t.Blocks[Pj]={init:function(){this.setColour(Pt.speech_category.colour),this.appendValueInput("FIELD_Speak_Text").setCheck("String").appendField("Speak: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given input text")}};let Bj="SpeakDefault";Ut.push(Bj);$t.Blocks[Bj]={init:function(){this.setColour(Pt.speech_category.colour),this.appendDummyInput().appendField("Speak: ").appendField(new $t.FieldDropdown([["Hi","Hi"],["Hello","Hello"],["How are you today?","How are you today?"],["Goodbye","Goodbye"]]),"FIELD_SpeakDefault_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given selected default text")}};let Fj="TurnOnFlashlight";Ut.push(Fj);$t.Blocks[Fj]={init:function(){this.setColour(Pt.light_category.colour),this.appendDummyInput().appendField("Turn on flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn on flashlight")}};let zj="TurnOffFlashlight";Ut.push(zj);$t.Blocks[zj]={init:function(){this.setColour(Pt.light_category.colour),this.appendDummyInput().appendField("Turn off flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn off flashlight")}};let Uj="WaitForSeconds";Ut.push(Uj);$t.Blocks[Uj]={init:function(){this.appendDummyInput().appendField("wait for"),this.appendDummyInput().setAlign($t.ALIGN_CENTRE).appendField(new $t.FieldNumber(0,-1/0,1/0,.1),"NumSeconds"),this.appendDummyInput().appendField("Seconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(Pt.movement_category.colour),this.setTooltip("Delay the execution of the next block by some number of seconds")}};let Hj="PlayAudio";Ut.push(Hj);$t.Blocks[Hj]={init:function(){this.setColour(Pt.audio_category.colour),this.appendValueInput("FIELD_PlayAudio_Filename").setCheck("Audio").appendField("Play audio: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};let Gj="SetVolume";Ut.push(Gj);$t.Blocks[Gj]={init:function(){this.setColour(Pt.audio_category.colour);var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.appendValueInput("FIELD_Volume").setCheck("Number").appendField("Set volume to (0-100): ");var t=this.getInput("FIELD_Volume").connection;t.connect(e),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Adjusts Misty's volume level for audio playback")}};let Wj="DisplayText";Ut.push(Wj);$t.Blocks[Wj]={init:function(){this.setColour(Pt.face_category.colour),this.appendDummyInput().appendField("Display Text: ").appendField(new $t.FieldTextInput("default"),"FIELD_DisplayText_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};let Vj="ClearText";Ut.push(Vj);$t.Blocks[Vj]={init:function(){this.setColour(Pt.face_category.colour),this.appendDummyInput().appendField("Clear Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};let jj="Start";Ut.push(jj);$t.Blocks[jj]={init:function(){this.setStyle("hat_blocks"),this.appendDummyInput().appendField("Program starts here"),this.setColour(Pt.trigger_category.colour),this.setTooltip("This is the starting block"),this.setNextStatement(!0,null),this.setHelpUrl(""),this.setDeletable(!1)}};let Yj="FrontLeftBumperPress";Ut.push(Yj);$t.Blocks[Yj]={init:function(){this.setStyle("hat_blocks"),this.setColour(Pt.trigger_category.colour),this.appendDummyInput().appendField("Front Left Bumper Pressed"),this.setNextStatement(!0,null),this.setTooltip("")}};let Xj="FrontRightBumperPress";Ut.push(Xj);$t.Blocks[Xj]={init:function(){this.setStyle("hat_blocks"),this.setColour(Pt.trigger_category.colour),this.appendDummyInput().appendField("Front Right Bumper Pressed"),this.setNextStatement(!0,null),this.setTooltip("")}};let Kj="RearLeftBumperPress";Ut.push(Kj);$t.Blocks[Kj]={init:function(){this.setStyle("hat_blocks"),this.setColour(Pt.trigger_category.colour),this.appendDummyInput().appendField("Rear Left Bumper Pressed"),this.setNextStatement(!0,null),this.setTooltip("")}};let Jj="RearRightBumperPress";Ut.push(Jj);$t.Blocks[Jj]={init:function(){this.setStyle("hat_blocks"),this.setColour(Pt.trigger_category.colour),this.appendDummyInput().appendField("Right Rear Bumper Pressed"),this.setNextStatement(!0,null),this.setTooltip("")}};let qj="eyes_acceptance";Ut.push(qj);$t.Blocks[qj]={init:function(){this.appendDummyInput().appendField("Expression: acceptance"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'acceptance'")}};let Qj="eyes_admiration";Ut.push(Qj);$t.Blocks[Qj]={init:function(){this.appendDummyInput().appendField("Expression: admiration"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'admiration'")}};let Zj="eyes_amazement";Ut.push(Zj);$t.Blocks[Zj]={init:function(){this.appendDummyInput().appendField("Expression: amazement"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'amazement'")}};let e7="eyes_anger";Ut.push(e7);$t.Blocks[e7]={init:function(){this.appendDummyInput().appendField("Expression: anger"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'anger'")}};let t7="eyes_annoyed";Ut.push(t7);$t.Blocks[t7]={init:function(){this.appendDummyInput().appendField("Expression: annoyed"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'annoyed'")}};let n7="eyes_anticipation";Ut.push(n7);$t.Blocks[n7]={init:function(){this.appendDummyInput().appendField("Expression: anticipation"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'anticipation'")}};let r7="eyes_apprehension";Ut.push(r7);$t.Blocks[r7]={init:function(){this.appendDummyInput().appendField("Expression: apprehension"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'apprehension'")}};let i7="eyes_boredom";Ut.push(i7);$t.Blocks[i7]={init:function(){this.appendDummyInput().appendField("Expression: boredom"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'boredom'")}};let s7="eyes_default";Ut.push(s7);$t.Blocks[s7]={init:function(){this.appendDummyInput().appendField("Expression: default"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'default'")}};let o7="eyes_disgust";Ut.push(o7);$t.Blocks[o7]={init:function(){this.appendDummyInput().appendField("Expression: disgust"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'disgust'")}};let a7="eyes_distraction";Ut.push(a7);$t.Blocks[a7]={init:function(){this.appendDummyInput().appendField("Expression: distraction"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'distraction'")}};let l7="eyes_ecstasy_frame_1";Ut.push(l7);$t.Blocks[l7]={init:function(){this.appendDummyInput().appendField("Expression: ecstasy 1"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstasy 1'")}};let u7="eyes_ecstasy_frame_2";Ut.push(u7);$t.Blocks[u7]={init:function(){this.appendDummyInput().appendField("Expression: ecstasy 2"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstasy 2'")}};let c7="eyes_fear";Ut.push(c7);$t.Blocks[c7]={init:function(){this.appendDummyInput().appendField("Expression: fear"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'fear'")}};let h7="eyes_grief";Ut.push(h7);$t.Blocks[h7]={init:function(){this.appendDummyInput().appendField("Expression: grief"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'grief'")}};let d7="eyes_interest";Ut.push(d7);$t.Blocks[d7]={init:function(){this.appendDummyInput().appendField("Expression: interest"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'interest'")}};let f7="eyes_joy";Ut.push(f7);$t.Blocks[f7]={init:function(){this.appendDummyInput().appendField("Expression: joy"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'joy'")}};let p7="eyes_loathing";Ut.push(p7);$t.Blocks[p7]={init:function(){this.appendDummyInput().appendField("Expression: loathing"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'loathing'")}};let m7="eyes_pensiveness";Ut.push(m7);$t.Blocks[m7]={init:function(){this.appendDummyInput().appendField("Expression: pensiveness"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'pensiveness'")}};let g7="eyes_rage";Ut.push(g7);$t.Blocks[g7]={init:function(){this.appendDummyInput().appendField("Expression: rage eyes"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'rage eyes'")}};let _7="eyes_sad";Ut.push(_7);$t.Blocks[_7]={init:function(){this.appendDummyInput().appendField("Expression: sad"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'sad'")}};let v7="eyes_serenity";Ut.push(v7);$t.Blocks[v7]={init:function(){this.appendDummyInput().appendField("Expression: serenity"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'serenity'")}};let y7="eyes_surprise";Ut.push(y7);$t.Blocks[y7]={init:function(){this.appendDummyInput().appendField("Expression: surprise"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'surprise'")}};let b7="eyes_terror";Ut.push(b7);$t.Blocks[b7]={init:function(){this.appendDummyInput().appendField("Expression: terror"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'terror'")}};let T7="eyes_trust";Ut.push(T7);$t.Blocks[T7]={init:function(){this.appendDummyInput().appendField("Expression: trust"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'trust'")}};let S7="eyes_vigilance";Ut.push(S7);$t.Blocks[S7]={init:function(){this.appendDummyInput().appendField("Expression: vigilance"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'vigilance'")}};let w7="e_Sleeping";Ut.push(w7);$t.Blocks[w7]={init:function(){this.appendDummyInput().appendField("Expression: sleeping"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'sleeping'")}};let E7="e_SleepingZZZ";Ut.push(E7);$t.Blocks[E7]={init:function(){this.appendDummyInput().appendField("Expression: sleeping ZZZ"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'sleeping ZZZ'")}};let x7="e_Contempt";Ut.push(x7);$t.Blocks[x7]={init:function(){this.appendDummyInput().appendField("Expression: contempt"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'contempt'")}};let $7="e_ContentLeft";Ut.push($7);$t.Blocks[$7]={init:function(){this.appendDummyInput().appendField("Expression: content (left)"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'content (left)'")}};let C7="e_ContentRight";Ut.push(C7);$t.Blocks[C7]={init:function(){this.appendDummyInput().appendField("Expression: content (right)"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'content (right)'")}};let M7="e_Disoriented";Ut.push(M7);$t.Blocks[M7]={init:function(){this.appendDummyInput().appendField("Expression: disoriented"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'disoriented'")}};let A7="e_EcstacyHilarious";Ut.push(A7);$t.Blocks[A7]={init:function(){this.appendDummyInput().appendField("Expression: ecstacy hilarious"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstacy hilarious'")}};let I7="e_EcstacyStarryEyed";Ut.push(I7);$t.Blocks[I7]={init:function(){this.appendDummyInput().appendField("Expression: ecstacy starry eyed"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstacy starry eyed'")}};let R7="e_JoyGoofy";Ut.push(R7);$t.Blocks[R7]={init:function(){this.appendDummyInput().appendField("Expression: joy goofy"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy'")}};let k7="e_JoyGoofy2";Ut.push(k7);$t.Blocks[k7]={init:function(){this.appendDummyInput().appendField("Expression: joy goofy 2"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy 2'")}};let O7="e_JoyGoofy3";Ut.push(O7);$t.Blocks[O7]={init:function(){this.appendDummyInput().appendField("Expression: joy goofy 3"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy 3'")}};let L7="e_Love";Ut.push(L7);$t.Blocks[L7]={init:function(){this.appendDummyInput().appendField("Expression: love"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'love'")}};let N7="e_Rage";Ut.push(N7);$t.Blocks[N7]={init:function(){this.appendDummyInput().appendField("Expression: rage"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'rage'")}};let D7="e_Rage2";Ut.push(D7);$t.Blocks[D7]={init:function(){this.appendDummyInput().appendField("Expression: rage 2"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'rage 2'")}};let P7="e_Rage3";Ut.push(P7);$t.Blocks[P7]={init:function(){this.appendDummyInput().appendField("Expression: rage 3"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'rage 3'")}};let B7="e_Rage4";Ut.push(B7);$t.Blocks[B7]={init:function(){this.appendDummyInput().appendField("Expression: rage 4"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'rage 4'")}};let F7="e_RemorseShame";Ut.push(F7);$t.Blocks[F7]={init:function(){this.appendDummyInput().appendField("Expression: remorse shame"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'remorse shame'")}};$t.Blocks["animation_sleepy.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Sleeping"),this.setOutput(!0,"Animation"),this.setColour(Pt.face_category.colour),this.setTooltip("Run the animation 'sleepy'")}};$t.Blocks["animation_dancing.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Dancing"),this.setOutput(!0,"Animation"),this.setColour(Pt.face_category.colour),this.setTooltip("Run the animation 'dancing'")}};$t.Blocks["animation_spooked.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Spooked"),this.setOutput(!0,"Animation"),this.setColour(Pt.face_category.colour),this.setTooltip("Run the animation 'spooked'")}};let z7="s_Acceptance";Ut.push(z7);$t.Blocks[z7]={init:function(){this.appendDummyInput().appendField("Sound: acceptance"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'acceptance'")}};let U7="s_Amazement";Ut.push(U7);$t.Blocks[U7]={init:function(){this.appendDummyInput().appendField("Sound: amazement"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'amazement'")}};let H7="s_Amazement2";Ut.push(H7);$t.Blocks[H7]={init:function(){this.appendDummyInput().appendField("Sound: amazement 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'amazement 2'")}};let G7="s_Anger";Ut.push(G7);$t.Blocks[G7]={init:function(){this.appendDummyInput().appendField("Sound: anger"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'anger'")}};let W7="s_Anger2";Ut.push(W7);$t.Blocks[W7]={init:function(){this.appendDummyInput().appendField("Sound: anger 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'anger 2'")}};let V7="s_Anger3";Ut.push(V7);$t.Blocks[V7]={init:function(){this.appendDummyInput().appendField("Sound: anger 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'anger 3'")}};let j7="s_Anger4";Ut.push(j7);$t.Blocks[j7]={init:function(){this.appendDummyInput().appendField("Sound: anger 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'anger 4'")}};let Y7="s_Annoyance";Ut.push(Y7);$t.Blocks[Y7]={init:function(){this.appendDummyInput().appendField("Sound: annoyance"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance'")}};let X7="s_Annoyance2";Ut.push(X7);$t.Blocks[X7]={init:function(){this.appendDummyInput().appendField("Sound: annoyance 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 2'")}};let K7="s_Annoyance3";Ut.push(K7);$t.Blocks[K7]={init:function(){this.appendDummyInput().appendField("Sound: annoyance 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 3'")}};let J7="s_Annoyance4";Ut.push(J7);$t.Blocks[J7]={init:function(){this.appendDummyInput().appendField("Sound: annoyance 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 4'")}};let q7="s_Awe";Ut.push(q7);$t.Blocks[q7]={init:function(){this.appendDummyInput().appendField("Sound: awe"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'awe'")}};let Q7="s_Awe2";Ut.push(Q7);$t.Blocks[Q7]={init:function(){this.appendDummyInput().appendField("Sound: awe 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'awe 2'")}};let Z7="s_Awe3";Ut.push(Z7);$t.Blocks[Z7]={init:function(){this.appendDummyInput().appendField("Sound: awe 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'awe 3'")}};let eY="s_Boredom";Ut.push(eY);$t.Blocks[eY]={init:function(){this.appendDummyInput().appendField("Sound: boredom"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'boredom'")}};let tY="s_Disapproval";Ut.push(tY);$t.Blocks[tY]={init:function(){this.appendDummyInput().appendField("Sound: disapproval"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disapproval'")}};let nY="s_Disgust";Ut.push(nY);$t.Blocks[nY]={init:function(){this.appendDummyInput().appendField("Sound: disgust"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disgust'")}};let rY="s_Disgust2";Ut.push(rY);$t.Blocks[rY]={init:function(){this.appendDummyInput().appendField("Sound: disgust 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disgust 2'")}};let iY="s_Disgust3";Ut.push(iY);$t.Blocks[iY]={init:function(){this.appendDummyInput().appendField("Sound: disgust 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disgust 3'")}};let sY="s_DisorientedConfused";Ut.push(sY);$t.Blocks[sY]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused'")}};let oY="s_DisorientedConfused2";Ut.push(oY);$t.Blocks[oY]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 2'")}};let aY="s_DisorientedConfused3";Ut.push(aY);$t.Blocks[aY]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 3'")}};let lY="s_DisorientedConfused4";Ut.push(lY);$t.Blocks[lY]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 4'")}};let uY="s_DisorientedConfused5";Ut.push(uY);$t.Blocks[uY]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 5"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 5'")}};let cY="s_DisorientedConfused6";Ut.push(cY);$t.Blocks[cY]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 6"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 6'")}};let hY="s_Distraction";Ut.push(hY);$t.Blocks[hY]={init:function(){this.appendDummyInput().appendField("Sound: distraction"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'distraction'")}};let dY="s_Ecstacy";Ut.push(dY);$t.Blocks[dY]={init:function(){this.appendDummyInput().appendField("Sound: ecstacy"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'ecstacy'")}};let fY="s_Ecstacy2";Ut.push(fY);$t.Blocks[fY]={init:function(){this.appendDummyInput().appendField("Sound: ecstacy 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'ecstacy 2'")}};let pY="s_Fear";Ut.push(pY);$t.Blocks[pY]={init:function(){this.appendDummyInput().appendField("Sound: fear"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'fear'")}};let mY="s_Grief";Ut.push(mY);$t.Blocks[mY]={init:function(){this.appendDummyInput().appendField("Sound: grief"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'grief'")}};let gY="s_Grief2";Ut.push(gY);$t.Blocks[gY]={init:function(){this.appendDummyInput().appendField("Sound: grief 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'grief 2'")}};let _Y="s_Grief3";Ut.push(_Y);$t.Blocks[_Y]={init:function(){this.appendDummyInput().appendField("Sound: grief 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'grief 3'")}};let vY="s_Grief4";Ut.push(vY);$t.Blocks[vY]={init:function(){this.appendDummyInput().appendField("Sound: grief 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'grief 4'")}};let yY="s_Joy";Ut.push(yY);$t.Blocks[yY]={init:function(){this.appendDummyInput().appendField("Sound: joy"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'joy'")}};let bY="s_Joy2";Ut.push(bY);$t.Blocks[bY]={init:function(){this.appendDummyInput().appendField("Sound: joy 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'joy 2'")}};let TY="s_Joy3";Ut.push(TY);$t.Blocks[TY]={init:function(){this.appendDummyInput().appendField("Sound: joy 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'joy 3'")}};let SY="s_Joy4";Ut.push(SY);$t.Blocks[SY]={init:function(){this.appendDummyInput().appendField("Sound: joy 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'joy 4'")}};let wY="s_Loathing";Ut.push(wY);$t.Blocks[wY]={init:function(){this.appendDummyInput().appendField("Sound: loathing"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'loathing'")}};let EY="s_Love";Ut.push(EY);$t.Blocks[EY]={init:function(){this.appendDummyInput().appendField("Sound: love"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'love'")}};let xY="s_PhraseByeBye";Ut.push(xY);$t.Blocks[xY]={init:function(){this.appendDummyInput().appendField("Sound: Bye Bye"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Bye Bye'")}};let $Y="s_PhraseEvilAhHa";Ut.push($Y);$t.Blocks[$Y]={init:function(){this.appendDummyInput().appendField("Sound: Evil Ah Ha"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Evil Ah Ha'")}};let CY="s_PhraseHello";Ut.push(CY);$t.Blocks[CY]={init:function(){this.appendDummyInput().appendField("Sound: Hello"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Hello'")}};let MY="s_PhraseNoNoNo";Ut.push(MY);$t.Blocks[MY]={init:function(){this.appendDummyInput().appendField("Sound: No No No"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: No No No'")}};let AY="s_PhraseOopsy";Ut.push(AY);$t.Blocks[AY]={init:function(){this.appendDummyInput().appendField("Sound: Oopsy"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Oopsy'")}};let IY="s_PhraseOwOwOw";Ut.push(IY);$t.Blocks[IY]={init:function(){this.appendDummyInput().appendField("Sound: Ow Ow Ow"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Ow Ow Ow'")}};let RY="s_PhraseOwwww";Ut.push(RY);$t.Blocks[RY]={init:function(){this.appendDummyInput().appendField("Sound: Owwww"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Owwww'")}};let kY="s_PhraseUhOh";Ut.push(kY);$t.Blocks[kY]={init:function(){this.appendDummyInput().appendField("Sound: Uh Oh"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Uh Oh'")}};let OY="s_Rage";Ut.push(OY);$t.Blocks[OY]={init:function(){this.appendDummyInput().appendField("Sound: rage"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'rage'")}};let LY="s_Sadness";Ut.push(LY);$t.Blocks[LY]={init:function(){this.appendDummyInput().appendField("Sound: sadness"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness'")}};let NY="s_Sadness2";Ut.push(NY);$t.Blocks[NY]={init:function(){this.appendDummyInput().appendField("Sound: sadness 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 2'")}};let DY="s_Sadness3";Ut.push(DY);$t.Blocks[DY]={init:function(){this.appendDummyInput().appendField("Sound: sadness 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 3'")}};let PY="s_Sadness4";Ut.push(PY);$t.Blocks[PY]={init:function(){this.appendDummyInput().appendField("Sound: sadness 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 4'")}};let BY="s_Sadness5";Ut.push(BY);$t.Blocks[BY]={init:function(){this.appendDummyInput().appendField("Sound: sadness 5"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 5'")}};let FY="s_Sadness6";Ut.push(FY);$t.Blocks[FY]={init:function(){this.appendDummyInput().appendField("Sound: sadness 6"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 6'")}};let zY="s_Sadness7";Ut.push(zY);$t.Blocks[zY]={init:function(){this.appendDummyInput().appendField("Sound: sadness 7"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 7'")}};let UY="s_Sleepy";Ut.push(UY);$t.Blocks[UY]={init:function(){this.appendDummyInput().appendField("Sound: sleepy"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy'")}};let HY="s_Sleepy2";Ut.push(HY);$t.Blocks[HY]={init:function(){this.appendDummyInput().appendField("Sound: sleepy 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 2'")}};let GY="s_Sleepy3";Ut.push(GY);$t.Blocks[GY]={init:function(){this.appendDummyInput().appendField("Sound: sleepy 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 3'")}};let WY="s_Sleepy4";Ut.push(WY);$t.Blocks[WY]={init:function(){this.appendDummyInput().appendField("Sound: sleepy 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 4'")}};let VY="s_SleepySnore";Ut.push(VY);$t.Blocks[VY]={init:function(){this.appendDummyInput().appendField("Sound: sleepy snore"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy snore'")}};let jY="s_SystemCameraShutter";Ut.push(jY);$t.Blocks[jY]={init:function(){this.appendDummyInput().appendField("Sound: system camera shutter"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'system camera shutter'")}};const Nie=$t.common.createBlockDefinitionsFromJsonArray([Lie]),Die=Ut;/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ik=Object.create(null);ik.add_text=function(n,e){const t=e.valueToCode(n,"TEXT",Cw.Order.NONE)||"''",r=e.valueToCode(n,"COLOR",Cw.Order.ATOMIC)||"'#ffffff'";return`${e.provideFunction_("addText",`function ${e.FUNCTION_NAME_PLACEHOLDER_}(text, color) {

  // Add text to the output area.
  const outputDiv = document.getElementById('output');
  const textEl = document.createElement('p');
  textEl.innerText = text;
  textEl.style.color = color;
  outputDiv.appendChild(textEl);
}`)}(${t}, ${r});
`};ik.Start=function(n){return""};var Pie={BASE_URL:"/gpu-programming/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const GU=n=>{let e;const t=new Set,r=(g,y)=>{const b=typeof g=="function"?g(e):g;if(!Object.is(b,e)){const S=e;e=y??(typeof b!="object"||b===null)?b:Object.assign({},e,b),t.forEach(C=>C(e,S))}},s=()=>e,h={setState:r,getState:s,getInitialState:()=>f,subscribe:g=>(t.add(g),()=>t.delete(g)),destroy:()=>{(Pie?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},f=e=n(r,s,h);return h},Bie=n=>n?GU(n):GU;var YY={exports:{}},XY={},KY={exports:{}},JY={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw=pe;function Fie(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var zie=typeof Object.is=="function"?Object.is:Fie,Uie=Mw.useState,Hie=Mw.useEffect,Gie=Mw.useLayoutEffect,Wie=Mw.useDebugValue;function Vie(n,e){var t=e(),r=Uie({inst:{value:t,getSnapshot:e}}),s=r[0].inst,o=r[1];return Gie(function(){s.value=t,s.getSnapshot=e,mO(s)&&o({inst:s})},[n,t,e]),Hie(function(){return mO(s)&&o({inst:s}),n(function(){mO(s)&&o({inst:s})})},[n]),Wie(t),t}function mO(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!zie(n,t)}catch{return!0}}function jie(n,e){return e()}var Yie=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?jie:Vie;JY.useSyncExternalStore=Mw.useSyncExternalStore!==void 0?Mw.useSyncExternalStore:Yie;KY.exports=JY;var Xie=KY.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sk=pe,Kie=Xie;function Jie(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var qie=typeof Object.is=="function"?Object.is:Jie,Qie=Kie.useSyncExternalStore,Zie=sk.useRef,ese=sk.useEffect,tse=sk.useMemo,nse=sk.useDebugValue;XY.useSyncExternalStoreWithSelector=function(n,e,t,r,s){var o=Zie(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=tse(function(){function h(S){if(!f){if(f=!0,g=S,S=r(S),s!==void 0&&l.hasValue){var C=l.value;if(s(C,S))return y=C}return y=S}if(C=y,qie(g,S))return C;var M=r(S);return s!==void 0&&s(C,M)?C:(g=S,y=M)}var f=!1,g,y,b=t===void 0?null:t;return[function(){return h(e())},b===null?void 0:function(){return h(b())}]},[e,t,r,s]);var u=Qie(n,o[0],o[1]);return ese(function(){l.hasValue=!0,l.value=u},[u]),nse(u),u};YY.exports=XY;var rse=YY.exports;const ise=Xy(rse);var qY={BASE_URL:"/gpu-programming/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:sse}=yt,{useSyncExternalStoreWithSelector:ose}=ise;let WU=!1;const ase=n=>n;function lse(n,e=ase,t){(qY?"production":void 0)!=="production"&&t&&!WU&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),WU=!0);const r=ose(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return sse(r),r}const VU=n=>{(qY?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?Bie(n):n,t=(r,s)=>lse(e,r,s);return Object.assign(t,e),t},use=n=>n?VU(n):VU;var P3={},ok={};(function(n){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",t=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",r="["+e+"]["+t+"]*",s=new RegExp("^"+r+"$"),o=function(u,h){const f=[];let g=h.exec(u);for(;g;){const y=[];y.startIndex=h.lastIndex-g[0].length;const b=g.length;for(let S=0;S<b;S++)y.push(g[S]);f.push(y),g=h.exec(u)}return f},l=function(u){const h=s.exec(u);return!(h===null||typeof h>"u")};n.isExist=function(u){return typeof u<"u"},n.isEmptyObject=function(u){return Object.keys(u).length===0},n.merge=function(u,h,f){if(h){const g=Object.keys(h),y=g.length;for(let b=0;b<y;b++)f==="strict"?u[g[b]]=[h[g[b]]]:u[g[b]]=h[g[b]]}},n.getValue=function(u){return n.isExist(u)?u:""},n.isName=l,n.getAllMatches=o,n.nameRegexp=r})(ok);const B3=ok,cse={allowBooleanAttributes:!1,unpairedTags:[]};P3.validate=function(n,e){e=Object.assign({},cse,e);const t=[];let r=!1,s=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let o=0;o<n.length;o++)if(n[o]==="<"&&n[o+1]==="?"){if(o+=2,o=YU(n,o),o.err)return o}else if(n[o]==="<"){let l=o;if(o++,n[o]==="!"){o=XU(n,o);continue}else{let u=!1;n[o]==="/"&&(u=!0,o++);let h="";for(;o<n.length&&n[o]!==">"&&n[o]!==" "&&n[o]!=="	"&&n[o]!==`
`&&n[o]!=="\r";o++)h+=n[o];if(h=h.trim(),h[h.length-1]==="/"&&(h=h.substring(0,h.length-1),o--),!vse(h)){let y;return h.trim().length===0?y="Invalid space after '<'.":y="Tag '"+h+"' is an invalid name.",Oh("InvalidTag",y,Up(n,o))}const f=fse(n,o);if(f===!1)return Oh("InvalidAttr","Attributes for '"+h+"' have open quote.",Up(n,o));let g=f.value;if(o=f.index,g[g.length-1]==="/"){const y=o-g.length;g=g.substring(0,g.length-1);const b=KU(g,e);if(b===!0)r=!0;else return Oh(b.err.code,b.err.msg,Up(n,y+b.err.line))}else if(u)if(f.tagClosed){if(g.trim().length>0)return Oh("InvalidTag","Closing tag '"+h+"' can't have attributes or invalid starting.",Up(n,l));{const y=t.pop();if(h!==y.tagName){let b=Up(n,y.tagStartPos);return Oh("InvalidTag","Expected closing tag '"+y.tagName+"' (opened in line "+b.line+", col "+b.col+") instead of closing tag '"+h+"'.",Up(n,l))}t.length==0&&(s=!0)}}else return Oh("InvalidTag","Closing tag '"+h+"' doesn't have proper closing.",Up(n,o));else{const y=KU(g,e);if(y!==!0)return Oh(y.err.code,y.err.msg,Up(n,o-g.length+y.err.line));if(s===!0)return Oh("InvalidXml","Multiple possible root nodes found.",Up(n,o));e.unpairedTags.indexOf(h)!==-1||t.push({tagName:h,tagStartPos:l}),r=!0}for(o++;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="!"){o++,o=XU(n,o);continue}else if(n[o+1]==="?"){if(o=YU(n,++o),o.err)return o}else break;else if(n[o]==="&"){const y=gse(n,o);if(y==-1)return Oh("InvalidChar","char '&' is not expected.",Up(n,o));o=y}else if(s===!0&&!jU(n[o]))return Oh("InvalidXml","Extra text at the end",Up(n,o));n[o]==="<"&&o--}}else{if(jU(n[o]))continue;return Oh("InvalidChar","char '"+n[o]+"' is not expected.",Up(n,o))}if(r){if(t.length==1)return Oh("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",Up(n,t[0].tagStartPos));if(t.length>0)return Oh("InvalidXml","Invalid '"+JSON.stringify(t.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Oh("InvalidXml","Start tag expected.",1);return!0};function jU(n){return n===" "||n==="	"||n===`
`||n==="\r"}function YU(n,e){const t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){const r=n.substr(t,e-t);if(e>5&&r==="xml")return Oh("InvalidXml","XML declaration allowed only at the start of the document.",Up(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}function XU(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}const hse='"',dse="'";function fse(n,e){let t="",r="",s=!1;for(;e<n.length;e++){if(n[e]===hse||n[e]===dse)r===""?r=n[e]:r!==n[e]||(r="");else if(n[e]===">"&&r===""){s=!0;break}t+=n[e]}return r!==""?!1:{value:t,index:e,tagClosed:s}}const pse=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function KU(n,e){const t=B3.getAllMatches(n,pse),r={};for(let s=0;s<t.length;s++){if(t[s][1].length===0)return Oh("InvalidAttr","Attribute '"+t[s][2]+"' has no space in starting.",jE(t[s]));if(t[s][3]!==void 0&&t[s][4]===void 0)return Oh("InvalidAttr","Attribute '"+t[s][2]+"' is without value.",jE(t[s]));if(t[s][3]===void 0&&!e.allowBooleanAttributes)return Oh("InvalidAttr","boolean attribute '"+t[s][2]+"' is not allowed.",jE(t[s]));const o=t[s][2];if(!_se(o))return Oh("InvalidAttr","Attribute '"+o+"' is an invalid name.",jE(t[s]));if(!r.hasOwnProperty(o))r[o]=1;else return Oh("InvalidAttr","Attribute '"+o+"' is repeated.",jE(t[s]))}return!0}function mse(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}function gse(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,mse(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}function Oh(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}function _se(n){return B3.isName(n)}function vse(n){return B3.isName(n)}function Up(n,e){const t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function jE(n){return n.startIndex+n[1].length}var F3={};const QY={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,e,t){return n}},yse=function(n){return Object.assign({},QY,n)};F3.buildOptions=yse;F3.defaultOptions=QY;class bse{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}var Tse=bse;const Sse=ok;function wse(n,e){const t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let r=1,s=!1,o=!1,l="";for(;e<n.length;e++)if(n[e]==="<"&&!o){if(s&&$se(n,e))e+=7,[entityName,val,e]=Ese(n,e+1),val.indexOf("&")===-1&&(t[Ise(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&Cse(n,e))e+=8;else if(s&&Mse(n,e))e+=8;else if(s&&Ase(n,e))e+=9;else if(xse)o=!0;else throw new Error("Invalid DOCTYPE");r++,l=""}else if(n[e]===">"){if(o?n[e-1]==="-"&&n[e-2]==="-"&&(o=!1,r--):r--,r===0)break}else n[e]==="["?s=!0:l+=n[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}function Ese(n,e){let t="";for(;e<n.length&&n[e]!=="'"&&n[e]!=='"';e++)t+=n[e];if(t=t.trim(),t.indexOf(" ")!==-1)throw new Error("External entites are not supported");const r=n[e++];let s="";for(;e<n.length&&n[e]!==r;e++)s+=n[e];return[t,s,e]}function xse(n,e){return n[e+1]==="!"&&n[e+2]==="-"&&n[e+3]==="-"}function $se(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="N"&&n[e+4]==="T"&&n[e+5]==="I"&&n[e+6]==="T"&&n[e+7]==="Y"}function Cse(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="L"&&n[e+4]==="E"&&n[e+5]==="M"&&n[e+6]==="E"&&n[e+7]==="N"&&n[e+8]==="T"}function Mse(n,e){return n[e+1]==="!"&&n[e+2]==="A"&&n[e+3]==="T"&&n[e+4]==="T"&&n[e+5]==="L"&&n[e+6]==="I"&&n[e+7]==="S"&&n[e+8]==="T"}function Ase(n,e){return n[e+1]==="!"&&n[e+2]==="N"&&n[e+3]==="O"&&n[e+4]==="T"&&n[e+5]==="A"&&n[e+6]==="T"&&n[e+7]==="I"&&n[e+8]==="O"&&n[e+9]==="N"}function Ise(n){if(Sse.isName(n))return n;throw new Error(`Invalid entity name ${n}`)}var Rse=wse;const kse=/^[-+]?0x[a-fA-F0-9]+$/,Ose=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const Lse={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Nse(n,e={}){if(e=Object.assign({},Lse,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(e.hex&&kse.test(t))return Number.parseInt(t,16);{const r=Ose.exec(t);if(r){const s=r[1],o=r[2];let l=Dse(r[3]);const u=r[4]||r[6];if(!e.leadingZeros&&o.length>0&&s&&t[2]!==".")return n;if(!e.leadingZeros&&o.length>0&&!s&&t[1]!==".")return n;{const h=Number(t),f=""+h;return f.search(/[eE]/)!==-1||u?e.eNotation?h:n:t.indexOf(".")!==-1?f==="0"&&l===""||f===l||s&&f==="-"+l?h:n:o?l===f||s+l===f?h:n:t===f||t===s+f?h:n}}else return n}}function Dse(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substr(0,n.length-1))),n}var Pse=Nse;const ZY=ok,YE=Tse,Bse=Rse,Fse=Pse;let zse=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,r)=>String.fromCharCode(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,r)=>String.fromCharCode(Number.parseInt(r,16))}},this.addExternalEntities=Use,this.parseXml=jse,this.parseTextData=Hse,this.resolveNameSpace=Gse,this.buildAttributesMap=Vse,this.isItStopNode=Jse,this.replaceEntitiesValue=Xse,this.readStopNodeData=Qse,this.saveTextToParentTag=Kse,this.addChild=Yse}};function Use(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:n[r]}}}function Hse(n,e,t,r,s,o,l){if(n!==void 0&&(this.options.trimValues&&!r&&(n=n.trim()),n.length>0)){l||(n=this.replaceEntitiesValue(n));const u=this.options.tagValueProcessor(e,n,t,s,o);return u==null?n:typeof u!=typeof n||u!==n?u:this.options.trimValues?MD(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?MD(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function Gse(n){if(this.options.removeNSPrefix){const e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}const Wse=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Vse(n,e,t){if(!this.options.ignoreAttributes&&typeof n=="string"){const r=ZY.getAllMatches(n,Wse),s=r.length,o={};for(let l=0;l<s;l++){const u=this.resolveNameSpace(r[l][1]);let h=r[l][4],f=this.options.attributeNamePrefix+u;if(u.length)if(this.options.transformAttributeName&&(f=this.options.transformAttributeName(f)),f==="__proto__"&&(f="#__proto__"),h!==void 0){this.options.trimValues&&(h=h.trim()),h=this.replaceEntitiesValue(h);const g=this.options.attributeValueProcessor(u,h,e);g==null?o[f]=h:typeof g!=typeof h||g!==h?o[f]=g:o[f]=MD(h,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[f]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const l={};return l[this.options.attributesGroupName]=o,l}return o}}const jse=function(n){n=n.replace(/\r\n?/g,`
`);const e=new YE("!xml");let t=e,r="",s="";for(let o=0;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="/"){const u=y1(n,">",o,"Closing Tag is not closed.");let h=n.substring(o+2,u).trim();if(this.options.removeNSPrefix){const y=h.indexOf(":");y!==-1&&(h=h.substr(y+1))}this.options.transformTagName&&(h=this.options.transformTagName(h)),t&&(r=this.saveTextToParentTag(r,t,s));const f=s.substring(s.lastIndexOf(".")+1);if(h&&this.options.unpairedTags.indexOf(h)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${h}>`);let g=0;f&&this.options.unpairedTags.indexOf(f)!==-1?(g=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):g=s.lastIndexOf("."),s=s.substring(0,g),t=this.tagsNodeStack.pop(),r="",o=u}else if(n[o+1]==="?"){let u=CD(n,o,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,t,s),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){const h=new YE(u.tagName);h.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(h[":@"]=this.buildAttributesMap(u.tagExp,s,u.tagName)),this.addChild(t,h,s)}o=u.closeIndex+1}else if(n.substr(o+1,3)==="!--"){const u=y1(n,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){const h=n.substring(o+4,u-2);r=this.saveTextToParentTag(r,t,s),t.add(this.options.commentPropName,[{[this.options.textNodeName]:h}])}o=u}else if(n.substr(o+1,2)==="!D"){const u=Bse(n,o);this.docTypeEntities=u.entities,o=u.i}else if(n.substr(o+1,2)==="!["){const u=y1(n,"]]>",o,"CDATA is not closed.")-2,h=n.substring(o+9,u);r=this.saveTextToParentTag(r,t,s);let f=this.parseTextData(h,t.tagname,s,!0,!1,!0,!0);f==null&&(f=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:h}]):t.add(this.options.textNodeName,f),o=u+2}else{let u=CD(n,o,this.options.removeNSPrefix),h=u.tagName;const f=u.rawTagName;let g=u.tagExp,y=u.attrExpPresent,b=u.closeIndex;this.options.transformTagName&&(h=this.options.transformTagName(h)),t&&r&&t.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,t,s,!1));const S=t;if(S&&this.options.unpairedTags.indexOf(S.tagname)!==-1&&(t=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),h!==e.tagname&&(s+=s?"."+h:h),this.isItStopNode(this.options.stopNodes,s,h)){let C="";if(g.length>0&&g.lastIndexOf("/")===g.length-1)o=u.closeIndex;else if(this.options.unpairedTags.indexOf(h)!==-1)o=u.closeIndex;else{const A=this.readStopNodeData(n,f,b+1);if(!A)throw new Error(`Unexpected end of ${f}`);o=A.i,C=A.tagContent}const M=new YE(h);h!==g&&y&&(M[":@"]=this.buildAttributesMap(g,s,h)),C&&(C=this.parseTextData(C,h,s,!0,y,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),M.add(this.options.textNodeName,C),this.addChild(t,M,s)}else{if(g.length>0&&g.lastIndexOf("/")===g.length-1){h[h.length-1]==="/"?(h=h.substr(0,h.length-1),s=s.substr(0,s.length-1),g=h):g=g.substr(0,g.length-1),this.options.transformTagName&&(h=this.options.transformTagName(h));const C=new YE(h);h!==g&&y&&(C[":@"]=this.buildAttributesMap(g,s,h)),this.addChild(t,C,s),s=s.substr(0,s.lastIndexOf("."))}else{const C=new YE(h);this.tagsNodeStack.push(t),h!==g&&y&&(C[":@"]=this.buildAttributesMap(g,s,h)),this.addChild(t,C,s),t=C}r="",o=b}}else r+=n[o];return e.child};function Yse(n,e,t){const r=this.options.updateTag(e.tagname,t,e[":@"]);r===!1||(typeof r=="string"&&(e.tagname=r),n.addChild(e))}const Xse=function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function Kse(n,e,t,r){return n&&(r===void 0&&(r=Object.keys(e.child).length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}function Jse(n,e,t){const r="*."+t;for(const s in n){const o=n[s];if(r===o||e===o)return!0}return!1}function qse(n,e,t=">"){let r,s="";for(let o=e;o<n.length;o++){let l=n[o];if(r)l===r&&(r="");else if(l==='"'||l==="'")r=l;else if(l===t[0])if(t[1]){if(n[o+1]===t[1])return{data:s,index:o}}else return{data:s,index:o};else l==="	"&&(l=" ");s+=l}}function y1(n,e,t,r){const s=n.indexOf(e,t);if(s===-1)throw new Error(r);return s+e.length-1}function CD(n,e,t,r=">"){const s=qse(n,e+1,r);if(!s)return;let o=s.data;const l=s.index,u=o.search(/\s/);let h=o,f=!0;u!==-1&&(h=o.substring(0,u),o=o.substring(u+1).trimStart());const g=h;if(t){const y=h.indexOf(":");y!==-1&&(h=h.substr(y+1),f=h!==s.data.substr(y+1))}return{tagName:h,tagExp:o,closeIndex:l,attrExpPresent:f,rawTagName:g}}function Qse(n,e,t){const r=t;let s=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){const o=y1(n,">",t,`${e} is not closed`);if(n.substring(t+2,o).trim()===e&&(s--,s===0))return{tagContent:n.substring(r,t),i:o};t=o}else if(n[t+1]==="?")t=y1(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=y1(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=y1(n,"]]>",t,"StopNode is not closed.")-2;else{const o=CD(n,t,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,t=o.closeIndex)}}function MD(n,e,t){if(e&&typeof n=="string"){const r=n.trim();return r==="true"?!0:r==="false"?!1:Fse(n,t)}else return ZY.isExist(n)?n:""}var Zse=zse,eX={};function eoe(n,e){return tX(n,e)}function tX(n,e,t){let r;const s={};for(let o=0;o<n.length;o++){const l=n[o],u=toe(l);let h="";if(t===void 0?h=u:h=t+"."+u,u===e.textNodeName)r===void 0?r=l[u]:r+=""+l[u];else{if(u===void 0)continue;if(l[u]){let f=tX(l[u],e,h);const g=roe(f,e);l[":@"]?noe(f,l[":@"],h,e):Object.keys(f).length===1&&f[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?f=f[e.textNodeName]:Object.keys(f).length===0&&(e.alwaysCreateTextNode?f[e.textNodeName]="":f=""),s[u]!==void 0&&s.hasOwnProperty(u)?(Array.isArray(s[u])||(s[u]=[s[u]]),s[u].push(f)):e.isArray(u,h,g)?s[u]=[f]:s[u]=f}}}return typeof r=="string"?r.length>0&&(s[e.textNodeName]=r):r!==void 0&&(s[e.textNodeName]=r),s}function toe(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];if(r!==":@")return r}}function noe(n,e,t,r){if(e){const s=Object.keys(e),o=s.length;for(let l=0;l<o;l++){const u=s[l];r.isArray(u,t+"."+u,!0,!0)?n[u]=[e[u]]:n[u]=e[u]}}}function roe(n,e){const{textNodeName:t}=e,r=Object.keys(n).length;return!!(r===0||r===1&&(n[t]||typeof n[t]=="boolean"||n[t]===0))}eX.prettify=eoe;const{buildOptions:ioe}=F3,soe=Zse,{prettify:ooe}=eX,aoe=P3;let loe=class{constructor(e){this.externalEntities={},this.options=ioe(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const o=aoe.validate(e,t);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}const r=new soe(this.options);r.addExternalEntities(this.externalEntities);const s=r.parseXml(e);return this.options.preserveOrder||s===void 0?s:ooe(s,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};var uoe=loe;const coe=`
`;function hoe(n,e){let t="";return e.format&&e.indentBy.length>0&&(t=coe),nX(n,e,"",t)}function nX(n,e,t,r){let s="",o=!1;for(let l=0;l<n.length;l++){const u=n[l],h=doe(u);if(h===void 0)continue;let f="";if(t.length===0?f=h:f=`${t}.${h}`,h===e.textNodeName){let C=u[h];foe(f,e)||(C=e.tagValueProcessor(h,C),C=rX(C,e)),o&&(s+=r),s+=C,o=!1;continue}else if(h===e.cdataPropName){o&&(s+=r),s+=`<![CDATA[${u[h][0][e.textNodeName]}]]>`,o=!1;continue}else if(h===e.commentPropName){s+=r+`<!--${u[h][0][e.textNodeName]}-->`,o=!0;continue}else if(h[0]==="?"){const C=JU(u[":@"],e),M=h==="?xml"?"":r;let A=u[h][0][e.textNodeName];A=A.length!==0?" "+A:"",s+=M+`<${h}${A}${C}?>`,o=!0;continue}let g=r;g!==""&&(g+=e.indentBy);const y=JU(u[":@"],e),b=r+`<${h}${y}`,S=nX(u[h],e,f,g);e.unpairedTags.indexOf(h)!==-1?e.suppressUnpairedNode?s+=b+">":s+=b+"/>":(!S||S.length===0)&&e.suppressEmptyNode?s+=b+"/>":S&&S.endsWith(">")?s+=b+`>${S}${r}</${h}>`:(s+=b+">",S&&r!==""&&(S.includes("/>")||S.includes("</"))?s+=r+e.indentBy+S+r:s+=S,s+=`</${h}>`),o=!0}return s}function doe(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];if(n.hasOwnProperty(r)&&r!==":@")return r}}function JU(n,e){let t="";if(n&&!e.ignoreAttributes)for(let r in n){if(!n.hasOwnProperty(r))continue;let s=e.attributeValueProcessor(r,n[r]);s=rX(s,e),s===!0&&e.suppressBooleanAttributes?t+=` ${r.substr(e.attributeNamePrefix.length)}`:t+=` ${r.substr(e.attributeNamePrefix.length)}="${s}"`}return t}function foe(n,e){n=n.substr(0,n.length-e.textNodeName.length-1);let t=n.substr(n.lastIndexOf(".")+1);for(let r in e.stopNodes)if(e.stopNodes[r]===n||e.stopNodes[r]==="*."+t)return!0;return!1}function rX(n,e){if(n&&n.length>0&&e.processEntities)for(let t=0;t<e.entities.length;t++){const r=e.entities[t];n=n.replace(r.regex,r.val)}return n}var poe=hoe;const moe=poe,goe={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Qy(n){this.options=Object.assign({},goe,n),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=yoe),this.processTextOrObjNode=_oe,this.options.format?(this.indentate=voe,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Qy.prototype.build=function(n){return this.options.preserveOrder?moe(n,this.options):(Array.isArray(n)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(n={[this.options.arrayNodeName]:n}),this.j2x(n,0).val)};Qy.prototype.j2x=function(n,e){let t="",r="";for(let s in n)if(Object.prototype.hasOwnProperty.call(n,s))if(typeof n[s]>"u")this.isAttribute(s)&&(r+="");else if(n[s]===null)this.isAttribute(s)?r+="":s[0]==="?"?r+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(n[s]instanceof Date)r+=this.buildTextValNode(n[s],s,"",e);else if(typeof n[s]!="object"){const o=this.isAttribute(s);if(o)t+=this.buildAttrPairStr(o,""+n[s]);else if(s===this.options.textNodeName){let l=this.options.tagValueProcessor(s,""+n[s]);r+=this.replaceEntitiesValue(l)}else r+=this.buildTextValNode(n[s],s,"",e)}else if(Array.isArray(n[s])){const o=n[s].length;let l="";for(let u=0;u<o;u++){const h=n[s][u];typeof h>"u"||(h===null?s[0]==="?"?r+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof h=="object"?this.options.oneListGroup?l+=this.j2x(h,e+1).val:l+=this.processTextOrObjNode(h,s,e):l+=this.buildTextValNode(h,s,"",e))}this.options.oneListGroup&&(l=this.buildObjectNode(l,s,"",e)),r+=l}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const o=Object.keys(n[s]),l=o.length;for(let u=0;u<l;u++)t+=this.buildAttrPairStr(o[u],""+n[s][o[u]])}else r+=this.processTextOrObjNode(n[s],s,e);return{attrStr:t,val:r}};Qy.prototype.buildAttrPairStr=function(n,e){return e=this.options.attributeValueProcessor(n,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+n:" "+n+'="'+e+'"'};function _oe(n,e,t){const r=this.j2x(n,t+1);return n[this.options.textNodeName]!==void 0&&Object.keys(n).length===1?this.buildTextValNode(n[this.options.textNodeName],e,r.attrStr,t):this.buildObjectNode(r.val,e,r.attrStr,t)}Qy.prototype.buildObjectNode=function(n,e,t,r){if(n==="")return e[0]==="?"?this.indentate(r)+"<"+e+t+"?"+this.tagEndChar:this.indentate(r)+"<"+e+t+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),(t||t==="")&&n.indexOf("<")===-1?this.indentate(r)+"<"+e+t+o+">"+n+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(r)+`<!--${n}-->`+this.newLine:this.indentate(r)+"<"+e+t+o+this.tagEndChar+n+this.indentate(r)+s}};Qy.prototype.closeTag=function(n){let e="";return this.options.unpairedTags.indexOf(n)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${n}`,e};Qy.prototype.buildTextValNode=function(n,e,t,r){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${n}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(r)+`<!--${n}-->`+this.newLine;if(e[0]==="?")return this.indentate(r)+"<"+e+t+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,n);return s=this.replaceEntitiesValue(s),s===""?this.indentate(r)+"<"+e+t+this.closeTag(e)+this.tagEndChar:this.indentate(r)+"<"+e+t+">"+s+"</"+e+this.tagEndChar}};Qy.prototype.replaceEntitiesValue=function(n){if(n&&n.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const t=this.options.entities[e];n=n.replace(t.regex,t.val)}return n};function voe(n){return this.options.indentBy.repeat(n)}function yoe(n){return n.startsWith(this.options.attributeNamePrefix)&&n!==this.options.textNodeName?n.substr(this.attrPrefixLen):!1}var boe=Qy;const Toe=P3,Soe=uoe,woe=boe;var iX={XMLParser:Soe,XMLValidator:Toe,XMLBuilder:woe};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const z3="162",nR=0,Eoe=1,xoe=2,qU=1,QU=100,ZU=204,e5=205,t5=3,$oe=0,n5="attached",Coe="detached",sX=300,x$=1e3,Ix=1001,AD=1002,$$=1003,Moe=1004,Aoe=1005,U3=1006,Ioe=1007,H3=1008,oX=1009,Roe=1014,G3=1015,koe=1020,W3=1023,gO=1026,r5=1027,Ooe=1028,C$=2300,Aw=2301,_O=2302,i5=2400,s5=2401,o5=2402,Loe=2500,Noe=0,aX=1,ID=2,Doe=0,lX="",my="srgb",V3="srgb-linear",Poe="display-p3",uX="display-p3-linear",RD="linear",a5="srgb",l5="rec709",u5="p3",VT=7680,c5=519,Boe=515,kD=35044,b1=2e3,OD=2001;class ak{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const o=s.indexOf(t);o!==-1&&s.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const s=r.slice(0);for(let o=0,l=s.length;o<l;o++)s[o].call(this,e);e.target=null}}}const xf=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let h5=1234567;const Jx=Math.PI/180,M$=180/Math.PI;function o0(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(xf[n&255]+xf[n>>8&255]+xf[n>>16&255]+xf[n>>24&255]+"-"+xf[e&255]+xf[e>>8&255]+"-"+xf[e>>16&15|64]+xf[e>>24&255]+"-"+xf[t&63|128]+xf[t>>8&255]+"-"+xf[t>>16&255]+xf[t>>24&255]+xf[r&255]+xf[r>>8&255]+xf[r>>16&255]+xf[r>>24&255]).toLowerCase()}function Lf(n,e,t){return Math.max(e,Math.min(t,n))}function j3(n,e){return(n%e+e)%e}function Foe(n,e,t,r,s){return r+(n-e)*(s-r)/(t-e)}function zoe(n,e,t){return n!==e?(t-n)/(e-n):0}function qx(n,e,t){return(1-t)*n+t*e}function Uoe(n,e,t,r){return qx(n,e,1-Math.exp(-t*r))}function Hoe(n,e=1){return e-Math.abs(j3(n,e*2)-e)}function Goe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Woe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Voe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function joe(n,e){return n+Math.random()*(e-n)}function Yoe(n){return n*(.5-Math.random())}function Xoe(n){n!==void 0&&(h5=n);let e=h5+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Koe(n){return n*Jx}function Joe(n){return n*M$}function qoe(n){return(n&n-1)===0&&n!==0}function Qoe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Zoe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function eae(n,e,t,r,s){const o=Math.cos,l=Math.sin,u=o(t/2),h=l(t/2),f=o((e+r)/2),g=l((e+r)/2),y=o((e-r)/2),b=l((e-r)/2),S=o((r-e)/2),C=l((r-e)/2);switch(s){case"XYX":n.set(u*g,h*y,h*b,u*f);break;case"YZY":n.set(h*b,u*g,h*y,u*f);break;case"ZXZ":n.set(h*y,h*b,u*g,u*f);break;case"XZX":n.set(u*g,h*C,h*S,u*f);break;case"YXY":n.set(h*S,u*g,h*C,u*f);break;case"ZYZ":n.set(h*C,h*S,u*g,u*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Zg(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ma(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const tae={DEG2RAD:Jx,RAD2DEG:M$,generateUUID:o0,clamp:Lf,euclideanModulo:j3,mapLinear:Foe,inverseLerp:zoe,lerp:qx,damp:Uoe,pingpong:Hoe,smoothstep:Goe,smootherstep:Woe,randInt:Voe,randFloat:joe,randFloatSpread:Yoe,seededRandom:Xoe,degToRad:Koe,radToDeg:Joe,isPowerOfTwo:qoe,ceilPowerOfTwo:Qoe,floorPowerOfTwo:Zoe,setQuaternionFromProperEuler:eae,normalize:Ma,denormalize:Zg};class uc{constructor(e=0,t=0){uc.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6],this.y=s[1]*t+s[4]*r+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Lf(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*r-l*s+e.x,this.y=o*s+l*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class xv{constructor(e,t,r,s,o,l,u,h,f){xv.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,s,o,l,u,h,f)}set(e,t,r,s,o,l,u,h,f){const g=this.elements;return g[0]=e,g[1]=s,g[2]=u,g[3]=t,g[4]=o,g[5]=h,g[6]=r,g[7]=l,g[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,o=this.elements,l=r[0],u=r[3],h=r[6],f=r[1],g=r[4],y=r[7],b=r[2],S=r[5],C=r[8],M=s[0],A=s[3],O=s[6],L=s[1],B=s[4],D=s[7],z=s[2],U=s[5],V=s[8];return o[0]=l*M+u*L+h*z,o[3]=l*A+u*B+h*U,o[6]=l*O+u*D+h*V,o[1]=f*M+g*L+y*z,o[4]=f*A+g*B+y*U,o[7]=f*O+g*D+y*V,o[2]=b*M+S*L+C*z,o[5]=b*A+S*B+C*U,o[8]=b*O+S*D+C*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8];return t*l*g-t*u*f-r*o*g+r*u*h+s*o*f-s*l*h}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8],y=g*l-u*f,b=u*h-g*o,S=f*o-l*h,C=t*y+r*b+s*S;if(C===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/C;return e[0]=y*M,e[1]=(s*f-g*r)*M,e[2]=(u*r-s*l)*M,e[3]=b*M,e[4]=(g*t-s*h)*M,e[5]=(s*o-u*t)*M,e[6]=S*M,e[7]=(r*h-f*t)*M,e[8]=(l*t-r*o)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,s,o,l,u){const h=Math.cos(o),f=Math.sin(o);return this.set(r*h,r*f,-r*(h*l+f*u)+l+e,-s*f,s*h,-s*(-f*l+h*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(vO.makeScale(e,t)),this}rotate(e){return this.premultiply(vO.makeRotation(-e)),this}translate(e,t){return this.premultiply(vO.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<9;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const vO=new xv;function nae(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function LD(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const d5={};function cX(n){n in d5||(d5[n]=!0,console.warn(n))}const f5=new xv().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),p5=new xv().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),hM={[V3]:{transfer:RD,primaries:l5,toReference:n=>n,fromReference:n=>n},[my]:{transfer:a5,primaries:l5,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[uX]:{transfer:RD,primaries:u5,toReference:n=>n.applyMatrix3(p5),fromReference:n=>n.applyMatrix3(f5)},[Poe]:{transfer:a5,primaries:u5,toReference:n=>n.convertSRGBToLinear().applyMatrix3(p5),fromReference:n=>n.applyMatrix3(f5).convertLinearToSRGB()}},rae=new Set([V3,uX]),Ug={enabled:!0,_workingColorSpace:V3,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!rae.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=hM[e].toReference,s=hM[t].fromReference;return s(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return hM[n].primaries},getTransfer:function(n){return n===lX?RD:hM[n].transfer}};function dw(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function yO(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let jT;class iae{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{jT===void 0&&(jT=LD("canvas")),jT.width=e.width,jT.height=e.height;const r=jT.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=jT}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=LD("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=dw(o[l]/255)*255;return r.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(dw(t[r]/255)*255):t[r]=dw(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let sae=0;class oae{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:sae++}),this.uuid=o0(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(bO(s[l].image)):o.push(bO(s[l]))}else o=bO(s);r.url=o}return t||(e.images[this.uuid]=r),r}}function bO(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?iae.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let aae=0;class Om extends ak{constructor(e=Om.DEFAULT_IMAGE,t=Om.DEFAULT_MAPPING,r=Ix,s=Ix,o=U3,l=H3,u=W3,h=oX,f=Om.DEFAULT_ANISOTROPY,g=lX){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:aae++}),this.uuid=o0(),this.name="",this.source=new oae(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=f,this.format=u,this.internalFormat=null,this.type=h,this.offset=new uc(0,0),this.repeat=new uc(1,1),this.center=new uc(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xv,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==sX)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case x$:e.x=e.x-Math.floor(e.x);break;case Ix:e.x=e.x<0?0:1;break;case AD:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case x$:e.y=e.y-Math.floor(e.y);break;case Ix:e.y=e.y<0?0:1;break;case AD:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Om.DEFAULT_IMAGE=null;Om.DEFAULT_MAPPING=sX;Om.DEFAULT_ANISOTROPY=1;class gg{constructor(e=0,t=0,r=0,s=1){gg.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,s){return this.x=e,this.y=t,this.z=r,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*r+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*r+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*r+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*r+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,s,o;const h=e.elements,f=h[0],g=h[4],y=h[8],b=h[1],S=h[5],C=h[9],M=h[2],A=h[6],O=h[10];if(Math.abs(g-b)<.01&&Math.abs(y-M)<.01&&Math.abs(C-A)<.01){if(Math.abs(g+b)<.1&&Math.abs(y+M)<.1&&Math.abs(C+A)<.1&&Math.abs(f+S+O-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const B=(f+1)/2,D=(S+1)/2,z=(O+1)/2,U=(g+b)/4,V=(y+M)/4,H=(C+A)/4;return B>D&&B>z?B<.01?(r=0,s=.707106781,o=.707106781):(r=Math.sqrt(B),s=U/r,o=V/r):D>z?D<.01?(r=.707106781,s=0,o=.707106781):(s=Math.sqrt(D),r=U/s,o=H/s):z<.01?(r=.707106781,s=.707106781,o=0):(o=Math.sqrt(z),r=V/o,s=H/o),this.set(r,s,o,t),this}let L=Math.sqrt((A-C)*(A-C)+(y-M)*(y-M)+(b-g)*(b-g));return Math.abs(L)<.001&&(L=1),this.x=(A-C)/L,this.y=(y-M)/L,this.z=(b-g)/L,this.w=Math.acos((f+S+O-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Pu{constructor(e=0,t=0,r=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=s}static slerpFlat(e,t,r,s,o,l,u){let h=r[s+0],f=r[s+1],g=r[s+2],y=r[s+3];const b=o[l+0],S=o[l+1],C=o[l+2],M=o[l+3];if(u===0){e[t+0]=h,e[t+1]=f,e[t+2]=g,e[t+3]=y;return}if(u===1){e[t+0]=b,e[t+1]=S,e[t+2]=C,e[t+3]=M;return}if(y!==M||h!==b||f!==S||g!==C){let A=1-u;const O=h*b+f*S+g*C+y*M,L=O>=0?1:-1,B=1-O*O;if(B>Number.EPSILON){const z=Math.sqrt(B),U=Math.atan2(z,O*L);A=Math.sin(A*U)/z,u=Math.sin(u*U)/z}const D=u*L;if(h=h*A+b*D,f=f*A+S*D,g=g*A+C*D,y=y*A+M*D,A===1-u){const z=1/Math.sqrt(h*h+f*f+g*g+y*y);h*=z,f*=z,g*=z,y*=z}}e[t]=h,e[t+1]=f,e[t+2]=g,e[t+3]=y}static multiplyQuaternionsFlat(e,t,r,s,o,l){const u=r[s],h=r[s+1],f=r[s+2],g=r[s+3],y=o[l],b=o[l+1],S=o[l+2],C=o[l+3];return e[t]=u*C+g*y+h*S-f*b,e[t+1]=h*C+g*b+f*y-u*S,e[t+2]=f*C+g*S+u*b-h*y,e[t+3]=g*C-u*y-h*b-f*S,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,s){return this._x=e,this._y=t,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,h=Math.sin,f=u(r/2),g=u(s/2),y=u(o/2),b=h(r/2),S=h(s/2),C=h(o/2);switch(l){case"XYZ":this._x=b*g*y+f*S*C,this._y=f*S*y-b*g*C,this._z=f*g*C+b*S*y,this._w=f*g*y-b*S*C;break;case"YXZ":this._x=b*g*y+f*S*C,this._y=f*S*y-b*g*C,this._z=f*g*C-b*S*y,this._w=f*g*y+b*S*C;break;case"ZXY":this._x=b*g*y-f*S*C,this._y=f*S*y+b*g*C,this._z=f*g*C+b*S*y,this._w=f*g*y-b*S*C;break;case"ZYX":this._x=b*g*y-f*S*C,this._y=f*S*y+b*g*C,this._z=f*g*C-b*S*y,this._w=f*g*y+b*S*C;break;case"YZX":this._x=b*g*y+f*S*C,this._y=f*S*y+b*g*C,this._z=f*g*C-b*S*y,this._w=f*g*y-b*S*C;break;case"XZY":this._x=b*g*y-f*S*C,this._y=f*S*y-b*g*C,this._z=f*g*C+b*S*y,this._w=f*g*y+b*S*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,s=Math.sin(r);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],s=t[4],o=t[8],l=t[1],u=t[5],h=t[9],f=t[2],g=t[6],y=t[10],b=r+u+y;if(b>0){const S=.5/Math.sqrt(b+1);this._w=.25/S,this._x=(g-h)*S,this._y=(o-f)*S,this._z=(l-s)*S}else if(r>u&&r>y){const S=2*Math.sqrt(1+r-u-y);this._w=(g-h)/S,this._x=.25*S,this._y=(s+l)/S,this._z=(o+f)/S}else if(u>y){const S=2*Math.sqrt(1+u-r-y);this._w=(o-f)/S,this._x=(s+l)/S,this._y=.25*S,this._z=(h+g)/S}else{const S=2*Math.sqrt(1+y-r-u);this._w=(l-s)/S,this._x=(o+f)/S,this._y=(h+g)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Lf(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const s=Math.min(1,t/r);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,s=e._y,o=e._z,l=e._w,u=t._x,h=t._y,f=t._z,g=t._w;return this._x=r*g+l*u+s*f-o*h,this._y=s*g+l*h+o*u-r*f,this._z=o*g+l*f+r*h-s*u,this._w=l*g-r*u-s*h-o*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+r*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=r,this._y=s,this._z=o,this;const h=1-u*u;if(h<=Number.EPSILON){const S=1-t;return this._w=S*l+t*this._w,this._x=S*r+t*this._x,this._y=S*s+t*this._y,this._z=S*o+t*this._z,this.normalize(),this}const f=Math.sqrt(h),g=Math.atan2(f,u),y=Math.sin((1-t)*g)/f,b=Math.sin(t*g)/f;return this._w=l*y+this._w*b,this._x=r*y+this._x*b,this._y=s*y+this._y*b,this._z=o*y+this._z*b,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),s=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(s*Math.sin(e),s*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Bt{constructor(e=0,t=0,r=0){Bt.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(m5.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(m5.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6]*s,this.y=o[1]*t+o[4]*r+o[7]*s,this.z=o[2]*t+o[5]*r+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*r+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*r+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*r+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,r=this.y,s=this.z,o=e.x,l=e.y,u=e.z,h=e.w,f=2*(l*s-u*r),g=2*(u*t-o*s),y=2*(o*r-l*t);return this.x=t+h*f+l*y-u*g,this.y=r+h*g+u*f-o*y,this.z=s+h*y+o*g-l*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*s,this.y=o[1]*t+o[5]*r+o[9]*s,this.z=o[2]*t+o[6]*r+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,s=e.y,o=e.z,l=t.x,u=t.y,h=t.z;return this.x=s*h-o*u,this.y=o*l-r*h,this.z=r*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return TO.copy(this).projectOnVector(e),this.sub(TO)}reflect(e){return this.sub(TO.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Lf(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,s=this.z-e.z;return t*t+r*r+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const s=Math.sin(t)*e;return this.x=s*Math.sin(r),this.y=Math.cos(t)*e,this.z=s*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const TO=new Bt,m5=new Pu;class $v{constructor(e=new Bt(1/0,1/0,1/0),t=new Bt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Hg.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Hg.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Hg.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let l=0,u=o.count;l<u;l++)e.isMesh===!0?e.getVertexPosition(l,Hg):Hg.fromBufferAttribute(o,l),Hg.applyMatrix4(e.matrixWorld),this.expandByPoint(Hg);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),dM.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),dM.copy(r.boundingBox)),dM.applyMatrix4(e.matrixWorld),this.union(dM)}const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Hg),Hg.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(XE),fM.subVectors(this.max,XE),YT.subVectors(e.a,XE),XT.subVectors(e.b,XE),KT.subVectors(e.c,XE),Xv.subVectors(XT,YT),Kv.subVectors(KT,XT),Bb.subVectors(YT,KT);let t=[0,-Xv.z,Xv.y,0,-Kv.z,Kv.y,0,-Bb.z,Bb.y,Xv.z,0,-Xv.x,Kv.z,0,-Kv.x,Bb.z,0,-Bb.x,-Xv.y,Xv.x,0,-Kv.y,Kv.x,0,-Bb.y,Bb.x,0];return!SO(t,YT,XT,KT,fM)||(t=[1,0,0,0,1,0,0,0,1],!SO(t,YT,XT,KT,fM))?!1:(pM.crossVectors(Xv,Kv),t=[pM.x,pM.y,pM.z],SO(t,YT,XT,KT,fM))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Hg).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Hg).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(W_[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),W_[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),W_[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),W_[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),W_[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),W_[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),W_[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),W_[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(W_),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const W_=[new Bt,new Bt,new Bt,new Bt,new Bt,new Bt,new Bt,new Bt],Hg=new Bt,dM=new $v,YT=new Bt,XT=new Bt,KT=new Bt,Xv=new Bt,Kv=new Bt,Bb=new Bt,XE=new Bt,fM=new Bt,pM=new Bt,Fb=new Bt;function SO(n,e,t,r,s){for(let o=0,l=n.length-3;o<=l;o+=3){Fb.fromArray(n,o);const u=s.x*Math.abs(Fb.x)+s.y*Math.abs(Fb.y)+s.z*Math.abs(Fb.z),h=e.dot(Fb),f=t.dot(Fb),g=r.dot(Fb);if(Math.max(-Math.max(h,f,g),Math.min(h,f,g))>u)return!1}return!0}const lae=new $v,KE=new Bt,wO=new Bt;class __{constructor(e=new Bt,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):lae.setFromPoints(e).getCenter(r);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;KE.subVectors(e,this.center);const t=KE.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),s=(r-this.radius)*.5;this.center.addScaledVector(KE,s/r),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(wO.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(KE.copy(e.center).add(wO)),this.expandByPoint(KE.copy(e.center).sub(wO))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const V_=new Bt,EO=new Bt,mM=new Bt,Jv=new Bt,xO=new Bt,gM=new Bt,$O=new Bt;class lk{constructor(e=new Bt,t=new Bt(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,V_)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=V_.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(V_.copy(this.origin).addScaledVector(this.direction,t),V_.distanceToSquared(e))}distanceSqToSegment(e,t,r,s){EO.copy(e).add(t).multiplyScalar(.5),mM.copy(t).sub(e).normalize(),Jv.copy(this.origin).sub(EO);const o=e.distanceTo(t)*.5,l=-this.direction.dot(mM),u=Jv.dot(this.direction),h=-Jv.dot(mM),f=Jv.lengthSq(),g=Math.abs(1-l*l);let y,b,S,C;if(g>0)if(y=l*h-u,b=l*u-h,C=o*g,y>=0)if(b>=-C)if(b<=C){const M=1/g;y*=M,b*=M,S=y*(y+l*b+2*u)+b*(l*y+b+2*h)+f}else b=o,y=Math.max(0,-(l*b+u)),S=-y*y+b*(b+2*h)+f;else b=-o,y=Math.max(0,-(l*b+u)),S=-y*y+b*(b+2*h)+f;else b<=-C?(y=Math.max(0,-(-l*o+u)),b=y>0?-o:Math.min(Math.max(-o,-h),o),S=-y*y+b*(b+2*h)+f):b<=C?(y=0,b=Math.min(Math.max(-o,-h),o),S=b*(b+2*h)+f):(y=Math.max(0,-(l*o+u)),b=y>0?o:Math.min(Math.max(-o,-h),o),S=-y*y+b*(b+2*h)+f);else b=l>0?-o:o,y=Math.max(0,-(l*b+u)),S=-y*y+b*(b+2*h)+f;return r&&r.copy(this.origin).addScaledVector(this.direction,y),s&&s.copy(EO).addScaledVector(mM,b),S}intersectSphere(e,t){V_.subVectors(e.center,this.origin);const r=V_.dot(this.direction),s=V_.dot(V_)-r*r,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=r-l,h=r+l;return h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,s,o,l,u,h;const f=1/this.direction.x,g=1/this.direction.y,y=1/this.direction.z,b=this.origin;return f>=0?(r=(e.min.x-b.x)*f,s=(e.max.x-b.x)*f):(r=(e.max.x-b.x)*f,s=(e.min.x-b.x)*f),g>=0?(o=(e.min.y-b.y)*g,l=(e.max.y-b.y)*g):(o=(e.max.y-b.y)*g,l=(e.min.y-b.y)*g),r>l||o>s||((o>r||isNaN(r))&&(r=o),(l<s||isNaN(s))&&(s=l),y>=0?(u=(e.min.z-b.z)*y,h=(e.max.z-b.z)*y):(u=(e.max.z-b.z)*y,h=(e.min.z-b.z)*y),r>h||u>s)||((u>r||r!==r)&&(r=u),(h<s||s!==s)&&(s=h),s<0)?null:this.at(r>=0?r:s,t)}intersectsBox(e){return this.intersectBox(e,V_)!==null}intersectTriangle(e,t,r,s,o){xO.subVectors(t,e),gM.subVectors(r,e),$O.crossVectors(xO,gM);let l=this.direction.dot($O),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;Jv.subVectors(this.origin,e);const h=u*this.direction.dot(gM.crossVectors(Jv,gM));if(h<0)return null;const f=u*this.direction.dot(xO.cross(Jv));if(f<0||h+f>l)return null;const g=-u*Jv.dot($O);return g<0?null:this.at(g/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ys{constructor(e,t,r,s,o,l,u,h,f,g,y,b,S,C,M,A){Ys.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,s,o,l,u,h,f,g,y,b,S,C,M,A)}set(e,t,r,s,o,l,u,h,f,g,y,b,S,C,M,A){const O=this.elements;return O[0]=e,O[4]=t,O[8]=r,O[12]=s,O[1]=o,O[5]=l,O[9]=u,O[13]=h,O[2]=f,O[6]=g,O[10]=y,O[14]=b,O[3]=S,O[7]=C,O[11]=M,O[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ys().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,s=1/JT.setFromMatrixColumn(e,0).length(),o=1/JT.setFromMatrixColumn(e,1).length(),l=1/JT.setFromMatrixColumn(e,2).length();return t[0]=r[0]*s,t[1]=r[1]*s,t[2]=r[2]*s,t[3]=0,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=0,t[8]=r[8]*l,t[9]=r[9]*l,t[10]=r[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,s=e.y,o=e.z,l=Math.cos(r),u=Math.sin(r),h=Math.cos(s),f=Math.sin(s),g=Math.cos(o),y=Math.sin(o);if(e.order==="XYZ"){const b=l*g,S=l*y,C=u*g,M=u*y;t[0]=h*g,t[4]=-h*y,t[8]=f,t[1]=S+C*f,t[5]=b-M*f,t[9]=-u*h,t[2]=M-b*f,t[6]=C+S*f,t[10]=l*h}else if(e.order==="YXZ"){const b=h*g,S=h*y,C=f*g,M=f*y;t[0]=b+M*u,t[4]=C*u-S,t[8]=l*f,t[1]=l*y,t[5]=l*g,t[9]=-u,t[2]=S*u-C,t[6]=M+b*u,t[10]=l*h}else if(e.order==="ZXY"){const b=h*g,S=h*y,C=f*g,M=f*y;t[0]=b-M*u,t[4]=-l*y,t[8]=C+S*u,t[1]=S+C*u,t[5]=l*g,t[9]=M-b*u,t[2]=-l*f,t[6]=u,t[10]=l*h}else if(e.order==="ZYX"){const b=l*g,S=l*y,C=u*g,M=u*y;t[0]=h*g,t[4]=C*f-S,t[8]=b*f+M,t[1]=h*y,t[5]=M*f+b,t[9]=S*f-C,t[2]=-f,t[6]=u*h,t[10]=l*h}else if(e.order==="YZX"){const b=l*h,S=l*f,C=u*h,M=u*f;t[0]=h*g,t[4]=M-b*y,t[8]=C*y+S,t[1]=y,t[5]=l*g,t[9]=-u*g,t[2]=-f*g,t[6]=S*y+C,t[10]=b-M*y}else if(e.order==="XZY"){const b=l*h,S=l*f,C=u*h,M=u*f;t[0]=h*g,t[4]=-y,t[8]=f*g,t[1]=b*y+M,t[5]=l*g,t[9]=S*y-C,t[2]=C*y-S,t[6]=u*g,t[10]=M*y+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(uae,e,cae)}lookAt(e,t,r){const s=this.elements;return wm.subVectors(e,t),wm.lengthSq()===0&&(wm.z=1),wm.normalize(),qv.crossVectors(r,wm),qv.lengthSq()===0&&(Math.abs(r.z)===1?wm.x+=1e-4:wm.z+=1e-4,wm.normalize(),qv.crossVectors(r,wm)),qv.normalize(),_M.crossVectors(wm,qv),s[0]=qv.x,s[4]=_M.x,s[8]=wm.x,s[1]=qv.y,s[5]=_M.y,s[9]=wm.y,s[2]=qv.z,s[6]=_M.z,s[10]=wm.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,o=this.elements,l=r[0],u=r[4],h=r[8],f=r[12],g=r[1],y=r[5],b=r[9],S=r[13],C=r[2],M=r[6],A=r[10],O=r[14],L=r[3],B=r[7],D=r[11],z=r[15],U=s[0],V=s[4],H=s[8],oe=s[12],le=s[1],Z=s[5],q=s[9],he=s[13],ae=s[2],ue=s[6],ge=s[10],we=s[14],J=s[3],re=s[7],ie=s[11],fe=s[15];return o[0]=l*U+u*le+h*ae+f*J,o[4]=l*V+u*Z+h*ue+f*re,o[8]=l*H+u*q+h*ge+f*ie,o[12]=l*oe+u*he+h*we+f*fe,o[1]=g*U+y*le+b*ae+S*J,o[5]=g*V+y*Z+b*ue+S*re,o[9]=g*H+y*q+b*ge+S*ie,o[13]=g*oe+y*he+b*we+S*fe,o[2]=C*U+M*le+A*ae+O*J,o[6]=C*V+M*Z+A*ue+O*re,o[10]=C*H+M*q+A*ge+O*ie,o[14]=C*oe+M*he+A*we+O*fe,o[3]=L*U+B*le+D*ae+z*J,o[7]=L*V+B*Z+D*ue+z*re,o[11]=L*H+B*q+D*ge+z*ie,o[15]=L*oe+B*he+D*we+z*fe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],s=e[8],o=e[12],l=e[1],u=e[5],h=e[9],f=e[13],g=e[2],y=e[6],b=e[10],S=e[14],C=e[3],M=e[7],A=e[11],O=e[15];return C*(+o*h*y-s*f*y-o*u*b+r*f*b+s*u*S-r*h*S)+M*(+t*h*S-t*f*b+o*l*b-s*l*S+s*f*g-o*h*g)+A*(+t*f*y-t*u*S-o*l*y+r*l*S+o*u*g-r*f*g)+O*(-s*u*g-t*h*y+t*u*b+s*l*y-r*l*b+r*h*g)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8],y=e[9],b=e[10],S=e[11],C=e[12],M=e[13],A=e[14],O=e[15],L=y*A*f-M*b*f+M*h*S-u*A*S-y*h*O+u*b*O,B=C*b*f-g*A*f-C*h*S+l*A*S+g*h*O-l*b*O,D=g*M*f-C*y*f+C*u*S-l*M*S-g*u*O+l*y*O,z=C*y*h-g*M*h-C*u*b+l*M*b+g*u*A-l*y*A,U=t*L+r*B+s*D+o*z;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const V=1/U;return e[0]=L*V,e[1]=(M*b*o-y*A*o-M*s*S+r*A*S+y*s*O-r*b*O)*V,e[2]=(u*A*o-M*h*o+M*s*f-r*A*f-u*s*O+r*h*O)*V,e[3]=(y*h*o-u*b*o-y*s*f+r*b*f+u*s*S-r*h*S)*V,e[4]=B*V,e[5]=(g*A*o-C*b*o+C*s*S-t*A*S-g*s*O+t*b*O)*V,e[6]=(C*h*o-l*A*o-C*s*f+t*A*f+l*s*O-t*h*O)*V,e[7]=(l*b*o-g*h*o+g*s*f-t*b*f-l*s*S+t*h*S)*V,e[8]=D*V,e[9]=(C*y*o-g*M*o-C*r*S+t*M*S+g*r*O-t*y*O)*V,e[10]=(l*M*o-C*u*o+C*r*f-t*M*f-l*r*O+t*u*O)*V,e[11]=(g*u*o-l*y*o-g*r*f+t*y*f+l*r*S-t*u*S)*V,e[12]=z*V,e[13]=(g*M*s-C*y*s+C*r*b-t*M*b-g*r*A+t*y*A)*V,e[14]=(C*u*s-l*M*s-C*r*h+t*M*h+l*r*A-t*u*A)*V,e[15]=(l*y*s-g*u*s+g*r*h-t*y*h-l*r*b+t*u*b)*V,this}scale(e){const t=this.elements,r=e.x,s=e.y,o=e.z;return t[0]*=r,t[4]*=s,t[8]*=o,t[1]*=r,t[5]*=s,t[9]*=o,t[2]*=r,t[6]*=s,t[10]*=o,t[3]*=r,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,s))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),s=Math.sin(t),o=1-r,l=e.x,u=e.y,h=e.z,f=o*l,g=o*u;return this.set(f*l+r,f*u-s*h,f*h+s*u,0,f*u+s*h,g*u+r,g*h-s*l,0,f*h-s*u,g*h+s*l,o*h*h+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,s,o,l){return this.set(1,r,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,r){const s=this.elements,o=t._x,l=t._y,u=t._z,h=t._w,f=o+o,g=l+l,y=u+u,b=o*f,S=o*g,C=o*y,M=l*g,A=l*y,O=u*y,L=h*f,B=h*g,D=h*y,z=r.x,U=r.y,V=r.z;return s[0]=(1-(M+O))*z,s[1]=(S+D)*z,s[2]=(C-B)*z,s[3]=0,s[4]=(S-D)*U,s[5]=(1-(b+O))*U,s[6]=(A+L)*U,s[7]=0,s[8]=(C+B)*V,s[9]=(A-L)*V,s[10]=(1-(b+M))*V,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,r){const s=this.elements;let o=JT.set(s[0],s[1],s[2]).length();const l=JT.set(s[4],s[5],s[6]).length(),u=JT.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],Gg.copy(this);const f=1/o,g=1/l,y=1/u;return Gg.elements[0]*=f,Gg.elements[1]*=f,Gg.elements[2]*=f,Gg.elements[4]*=g,Gg.elements[5]*=g,Gg.elements[6]*=g,Gg.elements[8]*=y,Gg.elements[9]*=y,Gg.elements[10]*=y,t.setFromRotationMatrix(Gg),r.x=o,r.y=l,r.z=u,this}makePerspective(e,t,r,s,o,l,u=b1){const h=this.elements,f=2*o/(t-e),g=2*o/(r-s),y=(t+e)/(t-e),b=(r+s)/(r-s);let S,C;if(u===b1)S=-(l+o)/(l-o),C=-2*l*o/(l-o);else if(u===OD)S=-l/(l-o),C=-l*o/(l-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return h[0]=f,h[4]=0,h[8]=y,h[12]=0,h[1]=0,h[5]=g,h[9]=b,h[13]=0,h[2]=0,h[6]=0,h[10]=S,h[14]=C,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,r,s,o,l,u=b1){const h=this.elements,f=1/(t-e),g=1/(r-s),y=1/(l-o),b=(t+e)*f,S=(r+s)*g;let C,M;if(u===b1)C=(l+o)*y,M=-2*y;else if(u===OD)C=o*y,M=-1*y;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return h[0]=2*f,h[4]=0,h[8]=0,h[12]=-b,h[1]=0,h[5]=2*g,h[9]=0,h[13]=-S,h[2]=0,h[6]=0,h[10]=M,h[14]=-C,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<16;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const JT=new Bt,Gg=new Ys,uae=new Bt(0,0,0),cae=new Bt(1,1,1),qv=new Bt,_M=new Bt,wm=new Bt,g5=new Ys,_5=new Pu;class oT{constructor(e=0,t=0,r=0,s=oT.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,s=this._order){return this._x=e,this._y=t,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],h=s[1],f=s[5],g=s[9],y=s[2],b=s[6],S=s[10];switch(t){case"XYZ":this._y=Math.asin(Lf(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-g,S),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(b,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Lf(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(u,S),this._z=Math.atan2(h,f)):(this._y=Math.atan2(-y,o),this._z=0);break;case"ZXY":this._x=Math.asin(Lf(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-y,S),this._z=Math.atan2(-l,f)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-Lf(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(b,S),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,f));break;case"YZX":this._z=Math.asin(Lf(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-g,f),this._y=Math.atan2(-y,o)):(this._x=0,this._y=Math.atan2(u,S));break;case"XZY":this._z=Math.asin(-Lf(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(b,f),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-g,S),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return g5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(g5,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return _5.setFromEuler(this),this.setFromQuaternion(_5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}oT.DEFAULT_ORDER="XYZ";class sI{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let hae=0;const v5=new Bt,qT=new Pu,j_=new Ys,vM=new Bt,JE=new Bt,dae=new Bt,fae=new Pu,y5=new Bt(1,0,0),b5=new Bt(0,1,0),T5=new Bt(0,0,1),pae={type:"added"},mae={type:"removed"},CO={type:"childadded",child:null},MO={type:"childremoved",child:null};class dh extends ak{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:hae++}),this.uuid=o0(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=dh.DEFAULT_UP.clone();const e=new Bt,t=new oT,r=new Pu,s=new Bt(1,1,1);function o(){r.setFromEuler(t,!1)}function l(){t.setFromQuaternion(r,void 0,!1)}t._onChange(o),r._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ys},normalMatrix:{value:new xv}}),this.matrix=new Ys,this.matrixWorld=new Ys,this.matrixAutoUpdate=dh.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=dh.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new sI,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return qT.setFromAxisAngle(e,t),this.quaternion.multiply(qT),this}rotateOnWorldAxis(e,t){return qT.setFromAxisAngle(e,t),this.quaternion.premultiply(qT),this}rotateX(e){return this.rotateOnAxis(y5,e)}rotateY(e){return this.rotateOnAxis(b5,e)}rotateZ(e){return this.rotateOnAxis(T5,e)}translateOnAxis(e,t){return v5.copy(e).applyQuaternion(this.quaternion),this.position.add(v5.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(y5,e)}translateY(e){return this.translateOnAxis(b5,e)}translateZ(e){return this.translateOnAxis(T5,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(j_.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?vM.copy(e):vM.set(e,t,r);const s=this.parent;this.updateWorldMatrix(!0,!1),JE.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?j_.lookAt(JE,vM,this.up):j_.lookAt(vM,JE,this.up),this.quaternion.setFromRotationMatrix(j_),s&&(j_.extractRotation(s.matrixWorld),qT.setFromRotationMatrix(j_),this.quaternion.premultiply(qT.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(pae),CO.child=e,this.dispatchEvent(CO),CO.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(mae),MO.child=e,this.dispatchEvent(MO),MO.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),j_.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),j_.multiply(e.parent.matrixWorld)),e.applyMatrix4(j_),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,s=this.children.length;r<s;r++){const l=this.children[r].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(JE,e,dae),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(JE,fae,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,s=t.length;r<s;r++){const o=t[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++){const u=s[o];u.matrixWorldAutoUpdate===!0&&u.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let f=0,g=h.length;f<g;f++){const y=h[f];o(e.shapes,y)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,f=this.material.length;h<f;h++)u.push(o(e.materials,this.material[h]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];s.animations.push(o(e.animations,h))}}if(t){const u=l(e.geometries),h=l(e.materials),f=l(e.textures),g=l(e.images),y=l(e.shapes),b=l(e.skeletons),S=l(e.animations),C=l(e.nodes);u.length>0&&(r.geometries=u),h.length>0&&(r.materials=h),f.length>0&&(r.textures=f),g.length>0&&(r.images=g),y.length>0&&(r.shapes=y),b.length>0&&(r.skeletons=b),S.length>0&&(r.animations=S),C.length>0&&(r.nodes=C)}return r.object=s,r;function l(u){const h=[];for(const f in u){const g=u[f];delete g.metadata,h.push(g)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const s=e.children[r];this.add(s.clone())}return this}}dh.DEFAULT_UP=new Bt(0,1,0);dh.DEFAULT_MATRIX_AUTO_UPDATE=!0;dh.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Wg=new Bt,Y_=new Bt,AO=new Bt,X_=new Bt,QT=new Bt,ZT=new Bt,S5=new Bt,IO=new Bt,RO=new Bt,kO=new Bt;class t_{constructor(e=new Bt,t=new Bt,r=new Bt){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,s){s.subVectors(r,t),Wg.subVectors(e,t),s.cross(Wg);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,r,s,o){Wg.subVectors(s,t),Y_.subVectors(r,t),AO.subVectors(e,t);const l=Wg.dot(Wg),u=Wg.dot(Y_),h=Wg.dot(AO),f=Y_.dot(Y_),g=Y_.dot(AO),y=l*f-u*u;if(y===0)return o.set(0,0,0),null;const b=1/y,S=(f*h-u*g)*b,C=(l*g-u*h)*b;return o.set(1-S-C,C,S)}static containsPoint(e,t,r,s){return this.getBarycoord(e,t,r,s,X_)===null?!1:X_.x>=0&&X_.y>=0&&X_.x+X_.y<=1}static getInterpolation(e,t,r,s,o,l,u,h){return this.getBarycoord(e,t,r,s,X_)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(o,X_.x),h.addScaledVector(l,X_.y),h.addScaledVector(u,X_.z),h)}static isFrontFacing(e,t,r,s){return Wg.subVectors(r,t),Y_.subVectors(e,t),Wg.cross(Y_).dot(s)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,s){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,r,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Wg.subVectors(this.c,this.b),Y_.subVectors(this.a,this.b),Wg.cross(Y_).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return t_.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return t_.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,s,o){return t_.getInterpolation(e,this.a,this.b,this.c,t,r,s,o)}containsPoint(e){return t_.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return t_.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,s=this.b,o=this.c;let l,u;QT.subVectors(s,r),ZT.subVectors(o,r),IO.subVectors(e,r);const h=QT.dot(IO),f=ZT.dot(IO);if(h<=0&&f<=0)return t.copy(r);RO.subVectors(e,s);const g=QT.dot(RO),y=ZT.dot(RO);if(g>=0&&y<=g)return t.copy(s);const b=h*y-g*f;if(b<=0&&h>=0&&g<=0)return l=h/(h-g),t.copy(r).addScaledVector(QT,l);kO.subVectors(e,o);const S=QT.dot(kO),C=ZT.dot(kO);if(C>=0&&S<=C)return t.copy(o);const M=S*f-h*C;if(M<=0&&f>=0&&C<=0)return u=f/(f-C),t.copy(r).addScaledVector(ZT,u);const A=g*C-S*y;if(A<=0&&y-g>=0&&S-C>=0)return S5.subVectors(o,s),u=(y-g)/(y-g+(S-C)),t.copy(s).addScaledVector(S5,u);const O=1/(A+M+b);return l=M*O,u=b*O,t.copy(r).addScaledVector(QT,l).addScaledVector(ZT,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const hX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qv={h:0,s:0,l:0},yM={h:0,s:0,l:0};function OO(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ph{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=my){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ug.toWorkingColorSpace(this,t),this}setRGB(e,t,r,s=Ug.workingColorSpace){return this.r=e,this.g=t,this.b=r,Ug.toWorkingColorSpace(this,s),this}setHSL(e,t,r,s=Ug.workingColorSpace){if(e=j3(e,1),t=Lf(t,0,1),r=Lf(r,0,1),t===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+t):r+t-r*t,l=2*r-o;this.r=OO(l,o,e+1/3),this.g=OO(l,o,e),this.b=OO(l,o,e-1/3)}return Ug.toWorkingColorSpace(this,s),this}setStyle(e,t=my){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=my){const r=hX[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=dw(e.r),this.g=dw(e.g),this.b=dw(e.b),this}copyLinearToSRGB(e){return this.r=yO(e.r),this.g=yO(e.g),this.b=yO(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=my){return Ug.fromWorkingColorSpace($f.copy(this),e),Math.round(Lf($f.r*255,0,255))*65536+Math.round(Lf($f.g*255,0,255))*256+Math.round(Lf($f.b*255,0,255))}getHexString(e=my){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ug.workingColorSpace){Ug.fromWorkingColorSpace($f.copy(this),t);const r=$f.r,s=$f.g,o=$f.b,l=Math.max(r,s,o),u=Math.min(r,s,o);let h,f;const g=(u+l)/2;if(u===l)h=0,f=0;else{const y=l-u;switch(f=g<=.5?y/(l+u):y/(2-l-u),l){case r:h=(s-o)/y+(s<o?6:0);break;case s:h=(o-r)/y+2;break;case o:h=(r-s)/y+4;break}h/=6}return e.h=h,e.s=f,e.l=g,e}getRGB(e,t=Ug.workingColorSpace){return Ug.fromWorkingColorSpace($f.copy(this),t),e.r=$f.r,e.g=$f.g,e.b=$f.b,e}getStyle(e=my){Ug.fromWorkingColorSpace($f.copy(this),e);const t=$f.r,r=$f.g,s=$f.b;return e!==my?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(s*255)})`}offsetHSL(e,t,r){return this.getHSL(Qv),this.setHSL(Qv.h+e,Qv.s+t,Qv.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Qv),e.getHSL(yM);const r=qx(Qv.h,yM.h,t),s=qx(Qv.s,yM.s,t),o=qx(Qv.l,yM.l,t);return this.setHSL(r,s,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,s=this.b,o=e.elements;return this.r=o[0]*t+o[3]*r+o[6]*s,this.g=o[1]*t+o[4]*r+o[7]*s,this.b=o[2]*t+o[5]*r+o[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const $f=new Ph;Ph.NAMES=hX;let gae=0;class Dy extends ak{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:gae++}),this.uuid=o0(),this.name="",this.type="Material",this.blending=qU,this.side=nR,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ZU,this.blendDst=e5,this.blendEquation=QU,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ph(0,0,0),this.blendAlpha=0,this.depthFunc=t5,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=c5,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=VT,this.stencilZFail=VT,this.stencilZPass=VT,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==qU&&(r.blending=this.blending),this.side!==nR&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==ZU&&(r.blendSrc=this.blendSrc),this.blendDst!==e5&&(r.blendDst=this.blendDst),this.blendEquation!==QU&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==t5&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==c5&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==VT&&(r.stencilFail=this.stencilFail),this.stencilZFail!==VT&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==VT&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function s(o){const l=[];for(const u in o){const h=o[u];delete h.metadata,l.push(h)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(r.textures=o),l.length>0&&(r.images=l)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const s=t.length;r=new Array(s);for(let o=0;o!==s;++o)r[o]=t[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class qS extends Dy{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ph(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new oT,this.combine=$oe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ih=new Bt,bM=new uc;class Lm{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=kD,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=G3,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return cX("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[r+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)bM.fromBufferAttribute(this,t),bM.applyMatrix3(e),this.setXY(t,bM.x,bM.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Ih.fromBufferAttribute(this,t),Ih.applyMatrix3(e),this.setXYZ(t,Ih.x,Ih.y,Ih.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Ih.fromBufferAttribute(this,t),Ih.applyMatrix4(e),this.setXYZ(t,Ih.x,Ih.y,Ih.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ih.fromBufferAttribute(this,t),Ih.applyNormalMatrix(e),this.setXYZ(t,Ih.x,Ih.y,Ih.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ih.fromBufferAttribute(this,t),Ih.transformDirection(e),this.setXYZ(t,Ih.x,Ih.y,Ih.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Zg(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Ma(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Zg(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ma(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Zg(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ma(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Zg(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ma(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Zg(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ma(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Ma(t,this.array),r=Ma(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,s){return e*=this.itemSize,this.normalized&&(t=Ma(t,this.array),r=Ma(r,this.array),s=Ma(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=s,this}setXYZW(e,t,r,s,o){return e*=this.itemSize,this.normalized&&(t=Ma(t,this.array),r=Ma(r,this.array),s=Ma(s,this.array),o=Ma(o,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==kD&&(e.usage=this.usage),e}}class _ae extends Lm{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class vae extends Lm{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Y3 extends Lm{constructor(e,t,r){super(new Float32Array(e),t,r)}}let yae=0;const sg=new Ys,LO=new dh,eS=new Bt,Em=new $v,qE=new $v,Td=new Bt;class Zy extends ak{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:yae++}),this.uuid=o0(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(nae(e)?vae:_ae)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new xv().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return sg.makeRotationFromQuaternion(e),this.applyMatrix4(sg),this}rotateX(e){return sg.makeRotationX(e),this.applyMatrix4(sg),this}rotateY(e){return sg.makeRotationY(e),this.applyMatrix4(sg),this}rotateZ(e){return sg.makeRotationZ(e),this.applyMatrix4(sg),this}translate(e,t,r){return sg.makeTranslation(e,t,r),this.applyMatrix4(sg),this}scale(e,t,r){return sg.makeScale(e,t,r),this.applyMatrix4(sg),this}lookAt(e){return LO.lookAt(e),LO.updateMatrix(),this.applyMatrix4(LO.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(eS).negate(),this.translate(eS.x,eS.y,eS.z),this}setFromPoints(e){const t=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Y3(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $v);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Bt(-1/0,-1/0,-1/0),new Bt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,s=t.length;r<s;r++){const o=t[r];Em.setFromBufferAttribute(o),this.morphTargetsRelative?(Td.addVectors(this.boundingBox.min,Em.min),this.boundingBox.expandByPoint(Td),Td.addVectors(this.boundingBox.max,Em.max),this.boundingBox.expandByPoint(Td)):(this.boundingBox.expandByPoint(Em.min),this.boundingBox.expandByPoint(Em.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new __);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Bt,1/0);return}if(e){const r=this.boundingSphere.center;if(Em.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];qE.setFromBufferAttribute(u),this.morphTargetsRelative?(Td.addVectors(Em.min,qE.min),Em.expandByPoint(Td),Td.addVectors(Em.max,qE.max),Em.expandByPoint(Td)):(Em.expandByPoint(qE.min),Em.expandByPoint(qE.max))}Em.getCenter(r);let s=0;for(let o=0,l=e.count;o<l;o++)Td.fromBufferAttribute(e,o),s=Math.max(s,r.distanceToSquared(Td));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],h=this.morphTargetsRelative;for(let f=0,g=u.count;f<g;f++)Td.fromBufferAttribute(u,f),h&&(eS.fromBufferAttribute(e,f),Td.add(eS)),s=Math.max(s,r.distanceToSquared(Td))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,s=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Lm(new Float32Array(4*r.count),4));const l=this.getAttribute("tangent"),u=[],h=[];for(let H=0;H<r.count;H++)u[H]=new Bt,h[H]=new Bt;const f=new Bt,g=new Bt,y=new Bt,b=new uc,S=new uc,C=new uc,M=new Bt,A=new Bt;function O(H,oe,le){f.fromBufferAttribute(r,H),g.fromBufferAttribute(r,oe),y.fromBufferAttribute(r,le),b.fromBufferAttribute(o,H),S.fromBufferAttribute(o,oe),C.fromBufferAttribute(o,le),g.sub(f),y.sub(f),S.sub(b),C.sub(b);const Z=1/(S.x*C.y-C.x*S.y);isFinite(Z)&&(M.copy(g).multiplyScalar(C.y).addScaledVector(y,-S.y).multiplyScalar(Z),A.copy(y).multiplyScalar(S.x).addScaledVector(g,-C.x).multiplyScalar(Z),u[H].add(M),u[oe].add(M),u[le].add(M),h[H].add(A),h[oe].add(A),h[le].add(A))}let L=this.groups;L.length===0&&(L=[{start:0,count:e.count}]);for(let H=0,oe=L.length;H<oe;++H){const le=L[H],Z=le.start,q=le.count;for(let he=Z,ae=Z+q;he<ae;he+=3)O(e.getX(he+0),e.getX(he+1),e.getX(he+2))}const B=new Bt,D=new Bt,z=new Bt,U=new Bt;function V(H){z.fromBufferAttribute(s,H),U.copy(z);const oe=u[H];B.copy(oe),B.sub(z.multiplyScalar(z.dot(oe))).normalize(),D.crossVectors(U,oe);const Z=D.dot(h[H])<0?-1:1;l.setXYZW(H,B.x,B.y,B.z,Z)}for(let H=0,oe=L.length;H<oe;++H){const le=L[H],Z=le.start,q=le.count;for(let he=Z,ae=Z+q;he<ae;he+=3)V(e.getX(he+0)),V(e.getX(he+1)),V(e.getX(he+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Lm(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let b=0,S=r.count;b<S;b++)r.setXYZ(b,0,0,0);const s=new Bt,o=new Bt,l=new Bt,u=new Bt,h=new Bt,f=new Bt,g=new Bt,y=new Bt;if(e)for(let b=0,S=e.count;b<S;b+=3){const C=e.getX(b+0),M=e.getX(b+1),A=e.getX(b+2);s.fromBufferAttribute(t,C),o.fromBufferAttribute(t,M),l.fromBufferAttribute(t,A),g.subVectors(l,o),y.subVectors(s,o),g.cross(y),u.fromBufferAttribute(r,C),h.fromBufferAttribute(r,M),f.fromBufferAttribute(r,A),u.add(g),h.add(g),f.add(g),r.setXYZ(C,u.x,u.y,u.z),r.setXYZ(M,h.x,h.y,h.z),r.setXYZ(A,f.x,f.y,f.z)}else for(let b=0,S=t.count;b<S;b+=3)s.fromBufferAttribute(t,b+0),o.fromBufferAttribute(t,b+1),l.fromBufferAttribute(t,b+2),g.subVectors(l,o),y.subVectors(s,o),g.cross(y),r.setXYZ(b+0,g.x,g.y,g.z),r.setXYZ(b+1,g.x,g.y,g.z),r.setXYZ(b+2,g.x,g.y,g.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Td.fromBufferAttribute(e,t),Td.normalize(),e.setXYZ(t,Td.x,Td.y,Td.z)}toNonIndexed(){function e(u,h){const f=u.array,g=u.itemSize,y=u.normalized,b=new f.constructor(h.length*g);let S=0,C=0;for(let M=0,A=h.length;M<A;M++){u.isInterleavedBufferAttribute?S=h[M]*u.data.stride+u.offset:S=h[M]*g;for(let O=0;O<g;O++)b[C++]=f[S++]}return new Lm(b,g,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Zy,r=this.index.array,s=this.attributes;for(const u in s){const h=s[u],f=e(h,r);t.setAttribute(u,f)}const o=this.morphAttributes;for(const u in o){const h=[],f=o[u];for(let g=0,y=f.length;g<y;g++){const b=f[g],S=e(b,r);h.push(S)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,h=l.length;u<h;u++){const f=l[u];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const f in h)h[f]!==void 0&&(e[f]=h[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const h in r){const f=r[h];e.data.attributes[h]=f.toJSON(e.data)}const s={};let o=!1;for(const h in this.morphAttributes){const f=this.morphAttributes[h],g=[];for(let y=0,b=f.length;y<b;y++){const S=f[y];g.push(S.toJSON(e.data))}g.length>0&&(s[h]=g,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const s=e.attributes;for(const f in s){const g=s[f];this.setAttribute(f,g.clone(t))}const o=e.morphAttributes;for(const f in o){const g=[],y=o[f];for(let b=0,S=y.length;b<S;b++)g.push(y[b].clone(t));this.morphAttributes[f]=g}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let f=0,g=l.length;f<g;f++){const y=l[f];this.addGroup(y.start,y.count,y.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const w5=new Ys,zb=new lk,TM=new __,E5=new Bt,tS=new Bt,nS=new Bt,rS=new Bt,NO=new Bt,SM=new Bt,wM=new uc,EM=new uc,xM=new uc,x5=new Bt,$5=new Bt,C5=new Bt,$M=new Bt,CM=new Bt;class uk extends dh{constructor(e=new Zy,t=new qS){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}getVertexPosition(e,t){const r=this.geometry,s=r.attributes.position,o=r.morphAttributes.position,l=r.morphTargetsRelative;t.fromBufferAttribute(s,e);const u=this.morphTargetInfluences;if(o&&u){SM.set(0,0,0);for(let h=0,f=o.length;h<f;h++){const g=u[h],y=o[h];g!==0&&(NO.fromBufferAttribute(y,e),l?SM.addScaledVector(NO,g):SM.addScaledVector(NO.sub(t),g))}t.add(SM)}return t}raycast(e,t){const r=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),TM.copy(r.boundingSphere),TM.applyMatrix4(o),zb.copy(e.ray).recast(e.near),!(TM.containsPoint(zb.origin)===!1&&(zb.intersectSphere(TM,E5)===null||zb.origin.distanceToSquared(E5)>(e.far-e.near)**2))&&(w5.copy(o).invert(),zb.copy(e.ray).applyMatrix4(w5),!(r.boundingBox!==null&&zb.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,zb)))}_computeIntersections(e,t,r){let s;const o=this.geometry,l=this.material,u=o.index,h=o.attributes.position,f=o.attributes.uv,g=o.attributes.uv1,y=o.attributes.normal,b=o.groups,S=o.drawRange;if(u!==null)if(Array.isArray(l))for(let C=0,M=b.length;C<M;C++){const A=b[C],O=l[A.materialIndex],L=Math.max(A.start,S.start),B=Math.min(u.count,Math.min(A.start+A.count,S.start+S.count));for(let D=L,z=B;D<z;D+=3){const U=u.getX(D),V=u.getX(D+1),H=u.getX(D+2);s=MM(this,O,e,r,f,g,y,U,V,H),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const C=Math.max(0,S.start),M=Math.min(u.count,S.start+S.count);for(let A=C,O=M;A<O;A+=3){const L=u.getX(A),B=u.getX(A+1),D=u.getX(A+2);s=MM(this,l,e,r,f,g,y,L,B,D),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}else if(h!==void 0)if(Array.isArray(l))for(let C=0,M=b.length;C<M;C++){const A=b[C],O=l[A.materialIndex],L=Math.max(A.start,S.start),B=Math.min(h.count,Math.min(A.start+A.count,S.start+S.count));for(let D=L,z=B;D<z;D+=3){const U=D,V=D+1,H=D+2;s=MM(this,O,e,r,f,g,y,U,V,H),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const C=Math.max(0,S.start),M=Math.min(h.count,S.start+S.count);for(let A=C,O=M;A<O;A+=3){const L=A,B=A+1,D=A+2;s=MM(this,l,e,r,f,g,y,L,B,D),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}}}function bae(n,e,t,r,s,o,l,u){let h;if(e.side===Eoe?h=r.intersectTriangle(l,o,s,!0,u):h=r.intersectTriangle(s,o,l,e.side===nR,u),h===null)return null;CM.copy(u),CM.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(CM);return f<t.near||f>t.far?null:{distance:f,point:CM.clone(),object:n}}function MM(n,e,t,r,s,o,l,u,h,f){n.getVertexPosition(u,tS),n.getVertexPosition(h,nS),n.getVertexPosition(f,rS);const g=bae(n,e,t,r,tS,nS,rS,$M);if(g){s&&(wM.fromBufferAttribute(s,u),EM.fromBufferAttribute(s,h),xM.fromBufferAttribute(s,f),g.uv=t_.getInterpolation($M,tS,nS,rS,wM,EM,xM,new uc)),o&&(wM.fromBufferAttribute(o,u),EM.fromBufferAttribute(o,h),xM.fromBufferAttribute(o,f),g.uv1=t_.getInterpolation($M,tS,nS,rS,wM,EM,xM,new uc)),l&&(x5.fromBufferAttribute(l,u),$5.fromBufferAttribute(l,h),C5.fromBufferAttribute(l,f),g.normal=t_.getInterpolation($M,tS,nS,rS,x5,$5,C5,new Bt),g.normal.dot(r.direction)>0&&g.normal.multiplyScalar(-1));const y={a:u,b:h,c:f,normal:new Bt,materialIndex:0};t_.getNormal(tS,nS,rS,y.normal),g.face=y}return g}class dX extends dh{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ys,this.projectionMatrix=new Ys,this.projectionMatrixInverse=new Ys,this.coordinateSystem=b1}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Zv=new Bt,M5=new uc,A5=new uc;class X3 extends dX{constructor(e=50,t=1,r=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=M$*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Jx*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return M$*2*Math.atan(Math.tan(Jx*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Zv.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Zv.x,Zv.y).multiplyScalar(-e/Zv.z),Zv.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Zv.x,Zv.y).multiplyScalar(-e/Zv.z)}getViewSize(e,t){return this.getViewBounds(e,M5,A5),t.subVectors(A5,M5)}setViewOffset(e,t,r,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Jx*.5*this.fov)/this.zoom,r=2*t,s=this.aspect*r,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,f=l.fullHeight;o+=l.offsetX*s/h,t-=l.offsetY*r/f,s*=l.width/h,r*=l.height/f}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const DO=new Bt,Tae=new Bt,Sae=new xv;class iS{constructor(e=new Bt(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,s){return this.normal.set(e,t,r),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const s=DO.subVectors(r,t).cross(Tae.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(DO),s=this.normal.dot(r);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Sae.getNormalMatrix(e),s=this.coplanarPoint(DO).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ub=new __,AM=new Bt;class wae{constructor(e=new iS,t=new iS,r=new iS,s=new iS,o=new iS,l=new iS){this.planes=[e,t,r,s,o,l]}set(e,t,r,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(r),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=b1){const r=this.planes,s=e.elements,o=s[0],l=s[1],u=s[2],h=s[3],f=s[4],g=s[5],y=s[6],b=s[7],S=s[8],C=s[9],M=s[10],A=s[11],O=s[12],L=s[13],B=s[14],D=s[15];if(r[0].setComponents(h-o,b-f,A-S,D-O).normalize(),r[1].setComponents(h+o,b+f,A+S,D+O).normalize(),r[2].setComponents(h+l,b+g,A+C,D+L).normalize(),r[3].setComponents(h-l,b-g,A-C,D-L).normalize(),r[4].setComponents(h-u,b-y,A-M,D-B).normalize(),t===b1)r[5].setComponents(h+u,b+y,A+M,D+B).normalize();else if(t===OD)r[5].setComponents(u,y,M,B).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ub.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ub.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ub)}intersectsSprite(e){return Ub.center.set(0,0,0),Ub.radius=.7071067811865476,Ub.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ub)}intersectsSphere(e){const t=this.planes,r=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(r)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const s=t[r];if(AM.x=s.normal.x>0?e.max.x:e.min.x,AM.y=s.normal.y>0?e.max.y:e.min.y,AM.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(AM)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class fX extends dX{constructor(e=-1,t=1,r=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=r-e,l=r+e,u=s+t,h=s-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=f*this.view.offsetX,l=o+f*this.view.width,u-=g*this.view.offsetY,h=u-g*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Eae extends Om{constructor(e,t,r,s,o,l,u,h,f,g){if(g=g!==void 0?g:gO,g!==gO&&g!==r5)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&g===gO&&(r=Roe),r===void 0&&g===r5&&(r=koe),super(null,s,o,l,u,h,g,r,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:$$,this.minFilter=h!==void 0?h:$$,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const xae=new Eae(1,1);xae.compareFunction=Boe;class PO extends dh{constructor(){super(),this.isGroup=!0,this.type="Group"}}class $ae{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=kD,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=o0()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return cX("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[r+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=o0()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=o0()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const tp=new Bt;class K3{constructor(e,t,r,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)tp.fromBufferAttribute(this,t),tp.applyMatrix4(e),this.setXYZ(t,tp.x,tp.y,tp.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)tp.fromBufferAttribute(this,t),tp.applyNormalMatrix(e),this.setXYZ(t,tp.x,tp.y,tp.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)tp.fromBufferAttribute(this,t),tp.transformDirection(e),this.setXYZ(t,tp.x,tp.y,tp.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=Zg(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Ma(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Ma(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ma(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ma(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ma(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Zg(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Zg(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Zg(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Zg(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ma(t,this.array),r=Ma(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ma(t,this.array),r=Ma(r,this.array),s=Ma(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this}setXYZW(e,t,r,s,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ma(t,this.array),r=Ma(r,this.array),s=Ma(s,this.array),o=Ma(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new Lm(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new K3(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const I5=new Bt,R5=new gg,k5=new gg,Cae=new Bt,O5=new Ys,IM=new Bt,BO=new __,L5=new Ys,FO=new lk;class Mae extends uk{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=n5,this.bindMatrix=new Ys,this.bindMatrixInverse=new Ys,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new $v),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,IM),this.boundingBox.expandByPoint(IM)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new __),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,IM),this.boundingSphere.expandByPoint(IM)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,s=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),BO.copy(this.boundingSphere),BO.applyMatrix4(s),e.ray.intersectsSphere(BO)!==!1&&(L5.copy(s).invert(),FO.copy(e.ray).applyMatrix4(L5),!(this.boundingBox!==null&&FO.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,FO)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new gg,t=this.geometry.attributes.skinWeight;for(let r=0,s=t.count;r<s;r++){e.fromBufferAttribute(t,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===n5?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Coe?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,s=this.geometry;R5.fromBufferAttribute(s.attributes.skinIndex,e),k5.fromBufferAttribute(s.attributes.skinWeight,e),I5.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=k5.getComponent(o);if(l!==0){const u=R5.getComponent(o);O5.multiplyMatrices(r.bones[u].matrixWorld,r.boneInverses[u]),t.addScaledVector(Cae.copy(I5).applyMatrix4(O5),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class pX extends dh{constructor(){super(),this.isBone=!0,this.type="Bone"}}class mX extends Om{constructor(e=null,t=1,r=1,s,o,l,u,h,f=$$,g=$$,y,b){super(null,l,u,h,f,g,s,o,y,b),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const N5=new Ys,Aae=new Ys;class J3{constructor(e=[],t=[]){this.uuid=o0(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,s=this.bones.length;r<s;r++)this.boneInverses.push(new Ys)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Ys;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:Aae;N5.multiplyMatrices(u,t[o]),N5.toArray(r,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new J3(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new mX(t,e,e,W3,G3);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,s=e.bones.length;r<s;r++){const o=e.bones[r];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new pX),this.bones.push(l),this.boneInverses.push(new Ys().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=r[s];e.boneInverses.push(u.toArray())}return e}}class D5 extends Lm{constructor(e,t,r,s=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const sS=new Ys,P5=new Ys,RM=[],B5=new $v,Iae=new Ys,QE=new uk,ZE=new __;class Rae extends uk{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new D5(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<r;s++)this.setMatrixAt(s,Iae)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new $v),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,sS),B5.copy(e.boundingBox).applyMatrix4(sS),this.boundingBox.union(B5)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new __),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,sS),ZE.copy(e.boundingSphere).applyMatrix4(sS),this.boundingSphere.union(ZE)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,s=this.morphTexture.source.data.data,o=r.length+1,l=e*o+1;for(let u=0;u<r.length;u++)r[u]=s[l+u]}raycast(e,t){const r=this.matrixWorld,s=this.count;if(QE.geometry=this.geometry,QE.material=this.material,QE.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ZE.copy(this.boundingSphere),ZE.applyMatrix4(r),e.ray.intersectsSphere(ZE)!==!1))for(let o=0;o<s;o++){this.getMatrixAt(o,sS),P5.multiplyMatrices(r,sS),QE.matrixWorld=P5,QE.raycast(e,RM);for(let l=0,u=RM.length;l<u;l++){const h=RM[l];h.instanceId=o,h.object=this,t.push(h)}RM.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new D5(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,s=r.length+1;this.morphTexture===null&&(this.morphTexture=new mX(new Float32Array(s*this.count),s,this.count,Ooe,G3));const o=this.morphTexture.source.data.data;let l=0;for(let f=0;f<r.length;f++)l+=r[f];const u=this.geometry.morphTargetsRelative?1:1-l,h=s*e;o[h]=u,o.set(r,h+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class gX extends Dy{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ph(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const F5=new Bt,z5=new Bt,U5=new Ys,zO=new lk,kM=new __;class q3 extends dh{constructor(e=new Zy,t=new gX){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let s=1,o=t.count;s<o;s++)F5.fromBufferAttribute(t,s-1),z5.fromBufferAttribute(t,s),r[s]=r[s-1],r[s]+=F5.distanceTo(z5);e.setAttribute("lineDistance",new Y3(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),kM.copy(r.boundingSphere),kM.applyMatrix4(s),kM.radius+=o,e.ray.intersectsSphere(kM)===!1)return;U5.copy(s).invert(),zO.copy(e.ray).applyMatrix4(U5);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,f=new Bt,g=new Bt,y=new Bt,b=new Bt,S=this.isLineSegments?2:1,C=r.index,A=r.attributes.position;if(C!==null){const O=Math.max(0,l.start),L=Math.min(C.count,l.start+l.count);for(let B=O,D=L-1;B<D;B+=S){const z=C.getX(B),U=C.getX(B+1);if(f.fromBufferAttribute(A,z),g.fromBufferAttribute(A,U),zO.distanceSqToSegment(f,g,b,y)>h)continue;b.applyMatrix4(this.matrixWorld);const H=e.ray.origin.distanceTo(b);H<e.near||H>e.far||t.push({distance:H,point:y.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this})}}else{const O=Math.max(0,l.start),L=Math.min(A.count,l.start+l.count);for(let B=O,D=L-1;B<D;B+=S){if(f.fromBufferAttribute(A,B),g.fromBufferAttribute(A,B+1),zO.distanceSqToSegment(f,g,b,y)>h)continue;b.applyMatrix4(this.matrixWorld);const U=e.ray.origin.distanceTo(b);U<e.near||U>e.far||t.push({distance:U,point:y.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}const H5=new Bt,G5=new Bt;class kae extends q3{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let s=0,o=t.count;s<o;s+=2)H5.fromBufferAttribute(t,s),G5.fromBufferAttribute(t,s+1),r[s]=s===0?0:r[s-1],r[s+1]=r[s]+H5.distanceTo(G5);e.setAttribute("lineDistance",new Y3(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Oae extends q3{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class _X extends Dy{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ph(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const W5=new Ys,ND=new lk,OM=new __,LM=new Bt;class Lae extends dh{constructor(e=new Zy,t=new _X){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),OM.copy(r.boundingSphere),OM.applyMatrix4(s),OM.radius+=o,e.ray.intersectsSphere(OM)===!1)return;W5.copy(s).invert(),ND.copy(e.ray).applyMatrix4(W5);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,f=r.index,y=r.attributes.position;if(f!==null){const b=Math.max(0,l.start),S=Math.min(f.count,l.start+l.count);for(let C=b,M=S;C<M;C++){const A=f.getX(C);LM.fromBufferAttribute(y,A),V5(LM,A,h,s,e,t,this)}}else{const b=Math.max(0,l.start),S=Math.min(y.count,l.start+l.count);for(let C=b,M=S;C<M;C++)LM.fromBufferAttribute(y,C),V5(LM,C,h,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}function V5(n,e,t,r,s,o,l){const u=ND.distanceSqToPoint(n);if(u<t){const h=new Bt;ND.closestPointToPoint(n,h),h.applyMatrix4(r);const f=s.ray.origin.distanceTo(h);if(f<s.near||f>s.far)return;o.push({distance:f,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,object:l})}}class Q3 extends Dy{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ph(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ph(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Doe,this.normalScale=new uc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new oT,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eb extends Q3{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new uc(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Lf(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ph(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ph(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ph(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function NM(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Nae(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Dae(n){function e(s,o){return n[s]-n[o]}const t=n.length,r=new Array(t);for(let s=0;s!==t;++s)r[s]=s;return r.sort(e),r}function j5(n,e,t){const r=n.length,s=new n.constructor(r);for(let o=0,l=0;l!==r;++o){const u=t[o]*e;for(let h=0;h!==e;++h)s[l++]=n[u+h]}return s}function vX(n,e,t,r){let s=1,o=n[0];for(;o!==void 0&&o[r]===void 0;)o=n[s++];if(o===void 0)return;let l=o[r];if(l!==void 0)if(Array.isArray(l))do l=o[r],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=n[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[r],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=n[s++];while(o!==void 0);else do l=o[r],l!==void 0&&(e.push(o.time),t.push(l)),o=n[s++];while(o!==void 0)}class TC{constructor(e,t,r,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,s=t[r],o=t[r-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=r+2;;){if(s===void 0){if(e<o)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===u)break;if(o=s,s=t[++r],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(r=2,o=u);for(let h=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===h)break;if(s=o,o=t[--r-1],e>=o)break t}l=r,r=0;break n}break e}for(;r<l;){const u=r+l>>>1;e<t[u]?l=u:r=u+1}if(s=t[r],o=t[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,s)}return this.interpolate_(r,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=r[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Pae extends TC{constructor(e,t,r,s){super(e,t,r,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:i5,endingEnd:i5}}intervalChanged_(e,t,r){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],h=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case s5:o=e,u=2*t-r;break;case o5:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=r}if(h===void 0)switch(this.getSettings_().endingEnd){case s5:l=e,h=2*r-t;break;case o5:l=1,h=r+s[1]-s[0];break;default:l=e-1,h=t}const f=(r-t)*.5,g=this.valueSize;this._weightPrev=f/(t-u),this._weightNext=f/(h-r),this._offsetPrev=o*g,this._offsetNext=l*g}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,f=h-u,g=this._offsetPrev,y=this._offsetNext,b=this._weightPrev,S=this._weightNext,C=(r-t)/(s-t),M=C*C,A=M*C,O=-b*A+2*b*M-b*C,L=(1+b)*A+(-1.5-2*b)*M+(-.5+b)*C+1,B=(-1-S)*A+(1.5+S)*M+.5*C,D=S*A-S*M;for(let z=0;z!==u;++z)o[z]=O*l[g+z]+L*l[f+z]+B*l[h+z]+D*l[y+z];return o}}class Bae extends TC{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,f=h-u,g=(r-t)/(s-t),y=1-g;for(let b=0;b!==u;++b)o[b]=l[f+b]*y+l[h+b]*g;return o}}class Fae extends TC{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class v_{constructor(e,t,r,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=NM(t,this.TimeBufferType),this.values=NM(r,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:NM(e.times,Array),values:NM(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(r.interpolation=s)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Fae(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Bae(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Pae(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case C$:t=this.InterpolantFactoryMethodDiscrete;break;case Aw:t=this.InterpolantFactoryMethodLinear;break;case _O:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return C$;case this.InterpolantFactoryMethodLinear:return Aw;case this.InterpolantFactoryMethodSmooth:return _O}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]*=e}return this}trim(e,t){const r=this.times,s=r.length;let o=0,l=s-1;for(;o!==s&&r[o]<e;)++o;for(;l!==-1&&r[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=r.slice(o,l),this.values=this.values.slice(o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,s=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const h=r[u];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,h),e=!1;break}if(l!==null&&l>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,h,l),e=!1;break}l=h}if(s!==void 0&&Nae(s))for(let u=0,h=s.length;u!==h;++u){const f=s[u];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),s=this.getInterpolation()===_O,o=e.length-1;let l=1;for(let u=1;u<o;++u){let h=!1;const f=e[u],g=e[u+1];if(f!==g&&(u!==1||f!==e[0]))if(s)h=!0;else{const y=u*r,b=y-r,S=y+r;for(let C=0;C!==r;++C){const M=t[y+C];if(M!==t[b+C]||M!==t[S+C]){h=!0;break}}}if(h){if(u!==l){e[l]=e[u];const y=u*r,b=l*r;for(let S=0;S!==r;++S)t[b+S]=t[y+S]}++l}}if(o>0){e[l]=e[o];for(let u=o*r,h=l*r,f=0;f!==r;++f)t[h+f]=t[u+f];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,s=new r(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}v_.prototype.TimeBufferType=Float32Array;v_.prototype.ValueBufferType=Float32Array;v_.prototype.DefaultInterpolation=Aw;class iE extends v_{}iE.prototype.ValueTypeName="bool";iE.prototype.ValueBufferType=Array;iE.prototype.DefaultInterpolation=C$;iE.prototype.InterpolantFactoryMethodLinear=void 0;iE.prototype.InterpolantFactoryMethodSmooth=void 0;class yX extends v_{}yX.prototype.ValueTypeName="color";class A$ extends v_{}A$.prototype.ValueTypeName="number";class zae extends TC{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=(r-t)/(s-t);let f=e*u;for(let g=f+u;f!==g;f+=4)Pu.slerpFlat(o,0,l,f-u,l,f,h);return o}}class K1 extends v_{InterpolantFactoryMethodLinear(e){return new zae(this.times,this.values,this.getValueSize(),e)}}K1.prototype.ValueTypeName="quaternion";K1.prototype.DefaultInterpolation=Aw;K1.prototype.InterpolantFactoryMethodSmooth=void 0;class sE extends v_{}sE.prototype.ValueTypeName="string";sE.prototype.ValueBufferType=Array;sE.prototype.DefaultInterpolation=C$;sE.prototype.InterpolantFactoryMethodLinear=void 0;sE.prototype.InterpolantFactoryMethodSmooth=void 0;class I$ extends v_{}I$.prototype.ValueTypeName="vector";class Uae{constructor(e,t=-1,r,s=Loe){this.name=e,this.tracks=r,this.duration=t,this.blendMode=s,this.uuid=o0(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,s=1/(e.fps||1);for(let l=0,u=r.length;l!==u;++l)t.push(Gae(r[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],r=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=r.length;o!==l;++o)t.push(v_.toJSON(r[o]));return s}static CreateFromMorphTargetSequence(e,t,r,s){const o=t.length,l=[];for(let u=0;u<o;u++){let h=[],f=[];h.push((u+o-1)%o,u,(u+1)%o),f.push(0,1,0);const g=Dae(h);h=j5(h,1,g),f=j5(f,1,g),!s&&h[0]===0&&(h.push(o),f.push(f[0])),l.push(new A$(".morphTargetInfluences["+t[u].name+"]",h,f).scale(1/r))}return new this(e,-1,l)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const s=e;r=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<r.length;s++)if(r[s].name===t)return r[s];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const f=e[u],g=f.name.match(o);if(g&&g.length>1){const y=g[1];let b=s[y];b||(s[y]=b=[]),b.push(f)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,r));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(y,b,S,C,M){if(S.length!==0){const A=[],O=[];vX(S,A,O,C),A.length!==0&&M.push(new y(b,A,O))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let h=e.length||-1;const f=e.hierarchy||[];for(let y=0;y<f.length;y++){const b=f[y].keys;if(!(!b||b.length===0))if(b[0].morphTargets){const S={};let C;for(C=0;C<b.length;C++)if(b[C].morphTargets)for(let M=0;M<b[C].morphTargets.length;M++)S[b[C].morphTargets[M]]=-1;for(const M in S){const A=[],O=[];for(let L=0;L!==b[C].morphTargets.length;++L){const B=b[C];A.push(B.time),O.push(B.morphTarget===M?1:0)}s.push(new A$(".morphTargetInfluence["+M+"]",A,O))}h=S.length*l}else{const S=".bones["+t[y].name+"]";r(I$,S+".position",b,"pos",s),r(K1,S+".quaternion",b,"rot",s),r(I$,S+".scale",b,"scl",s)}}return s.length===0?null:new this(o,h,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,s=e.length;r!==s;++r){const o=this.tracks[r];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Hae(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return A$;case"vector":case"vector2":case"vector3":case"vector4":return I$;case"color":return yX;case"quaternion":return K1;case"bool":case"boolean":return iE;case"string":return sE}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Gae(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Hae(n.type);if(n.times===void 0){const t=[],r=[];vX(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const wy={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Wae{constructor(e,t,r){const s=this;let o=!1,l=0,u=0,h;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(g){u++,o===!1&&s.onStart!==void 0&&s.onStart(g,l,u),o=!0},this.itemEnd=function(g){l++,s.onProgress!==void 0&&s.onProgress(g,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(g){s.onError!==void 0&&s.onError(g)},this.resolveURL=function(g){return h?h(g):g},this.setURLModifier=function(g){return h=g,this},this.addHandler=function(g,y){return f.push(g,y),this},this.removeHandler=function(g){const y=f.indexOf(g);return y!==-1&&f.splice(y,2),this},this.getHandler=function(g){for(let y=0,b=f.length;y<b;y+=2){const S=f[y],C=f[y+1];if(S.global&&(S.lastIndex=0),S.test(g))return C}return null}}}const Vae=new Wae;let aT=class{constructor(e){this.manager=e!==void 0?e:Vae,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(s,o){r.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};aT.DEFAULT_MATERIAL_NAME="__DEFAULT";const K_={};class jae extends Error{constructor(e,t){super(e),this.response=t}}class rR extends aT{constructor(e){super(e)}load(e,t,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=wy.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(K_[e]!==void 0){K_[e].push({onLoad:t,onProgress:r,onError:s});return}K_[e]=[],K_[e].push({onLoad:t,onProgress:r,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(l).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const g=K_[e],y=f.body.getReader(),b=f.headers.get("Content-Length")||f.headers.get("X-File-Size"),S=b?parseInt(b):0,C=S!==0;let M=0;const A=new ReadableStream({start(O){L();function L(){y.read().then(({done:B,value:D})=>{if(B)O.close();else{M+=D.byteLength;const z=new ProgressEvent("progress",{lengthComputable:C,loaded:M,total:S});for(let U=0,V=g.length;U<V;U++){const H=g[U];H.onProgress&&H.onProgress(z)}O.enqueue(D),L()}})}}});return new Response(A)}else throw new jae(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(h){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(g=>new DOMParser().parseFromString(g,u));case"json":return f.json();default:if(u===void 0)return f.text();{const y=/charset="?([^;"\s]*)"?/i.exec(u),b=y&&y[1]?y[1].toLowerCase():void 0,S=new TextDecoder(b);return f.arrayBuffer().then(C=>S.decode(C))}}}).then(f=>{wy.add(e,f);const g=K_[e];delete K_[e];for(let y=0,b=g.length;y<b;y++){const S=g[y];S.onLoad&&S.onLoad(f)}}).catch(f=>{const g=K_[e];if(g===void 0)throw this.manager.itemError(e),f;delete K_[e];for(let y=0,b=g.length;y<b;y++){const S=g[y];S.onError&&S.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Yae extends aT{constructor(e){super(e)}load(e,t,r,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=wy.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=LD("img");function h(){g(),wy.add(e,this),t&&t(this),o.manager.itemEnd(e)}function f(y){g(),s&&s(y),o.manager.itemError(e),o.manager.itemEnd(e)}function g(){u.removeEventListener("load",h,!1),u.removeEventListener("error",f,!1)}return u.addEventListener("load",h,!1),u.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class Xae extends aT{constructor(e){super(e)}load(e,t,r,s){const o=new Om,l=new Yae(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},r,s),o}}class Z3 extends dh{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ph(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const UO=new Ys,Y5=new Bt,X5=new Bt;class eF{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new uc(512,512),this.map=null,this.mapPass=null,this.matrix=new Ys,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wae,this._frameExtents=new uc(1,1),this._viewportCount=1,this._viewports=[new gg(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;Y5.setFromMatrixPosition(e.matrixWorld),t.position.copy(Y5),X5.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(X5),t.updateMatrixWorld(),UO.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UO),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(UO)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Kae extends eF{constructor(){super(new X3(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=M$*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(r!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=r,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Jae extends Z3{constructor(e,t,r=0,s=Math.PI/3,o=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(dh.DEFAULT_UP),this.updateMatrix(),this.target=new dh,this.distance=r,this.angle=s,this.penumbra=o,this.decay=l,this.map=null,this.shadow=new Kae}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const K5=new Ys,ex=new Bt,HO=new Bt;class qae extends eF{constructor(){super(new X3(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new uc(4,2),this._viewportCount=6,this._viewports=[new gg(2,1,1,1),new gg(0,1,1,1),new gg(3,1,1,1),new gg(1,1,1,1),new gg(3,0,1,1),new gg(1,0,1,1)],this._cubeDirections=[new Bt(1,0,0),new Bt(-1,0,0),new Bt(0,0,1),new Bt(0,0,-1),new Bt(0,1,0),new Bt(0,-1,0)],this._cubeUps=[new Bt(0,1,0),new Bt(0,1,0),new Bt(0,1,0),new Bt(0,1,0),new Bt(0,0,1),new Bt(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,s=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),ex.setFromMatrixPosition(e.matrixWorld),r.position.copy(ex),HO.copy(r.position),HO.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(HO),r.updateMatrixWorld(),s.makeTranslation(-ex.x,-ex.y,-ex.z),K5.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(K5)}}class Qae extends Z3{constructor(e,t,r=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=s,this.shadow=new qae}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Zae extends eF{constructor(){super(new fX(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ele extends Z3{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(dh.DEFAULT_UP),this.updateMatrix(),this.target=new dh,this.shadow=new Zae}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class k1{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,s=e.length;r<s;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class tle extends aT{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=wy.get(e);if(l!==void 0){if(o.manager.itemStart(e),l.then){l.then(f=>{t&&t(f),o.manager.itemEnd(e)}).catch(f=>{s&&s(f)});return}return setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader;const h=fetch(e,u).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(f){return wy.add(e,f),t&&t(f),o.manager.itemEnd(e),f}).catch(function(f){s&&s(f),wy.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});wy.add(e,h),o.manager.itemStart(e)}}const tF="\\[\\]\\.:\\/",nle=new RegExp("["+tF+"]","g"),nF="[^"+tF+"]",rle="[^"+tF.replace("\\.","")+"]",ile=/((?:WC+[\/:])*)/.source.replace("WC",nF),sle=/(WCOD+)?/.source.replace("WCOD",rle),ole=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",nF),ale=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",nF),lle=new RegExp("^"+ile+sle+ole+ale+"$"),ule=["material","materials","bones","map"];class cle{constructor(e,t,r){const s=r||Aa.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,s=this._bindings[r];s!==void 0&&s.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=r.length;s!==o;++s)r[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Aa{constructor(e,t,r){this.path=t,this.parsedPath=r||Aa.parseTrackName(t),this.node=Aa.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Aa.Composite(e,t,r):new Aa(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(nle,"")}static parseTrackName(e){const t=lle.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=r.nodeName.substring(s+1);ule.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const h=r(u.children);if(h)return h}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[t++]=r[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=Aa.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===f){f=g;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const l=e[s];if(l===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Aa.Composite=cle;Aa.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Aa.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Aa.prototype.GetterByBindingType=[Aa.prototype._getValue_direct,Aa.prototype._getValue_array,Aa.prototype._getValue_arrayElement,Aa.prototype._getValue_toArray];Aa.prototype.SetterByBindingTypeAndVersioning=[[Aa.prototype._setValue_direct,Aa.prototype._setValue_direct_setNeedsUpdate,Aa.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Aa.prototype._setValue_array,Aa.prototype._setValue_array_setNeedsUpdate,Aa.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Aa.prototype._setValue_arrayElement,Aa.prototype._setValue_arrayElement_setNeedsUpdate,Aa.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Aa.prototype._setValue_fromArray,Aa.prototype._setValue_fromArray_setNeedsUpdate,Aa.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:z3}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=z3);const GO=180/Math.PI,ad=Math.PI,oI=.079,WO=2*Math.PI*oI*180/1.5,VO=45,hle=.3725,dle=50*ad/180,oS=1e3,V0=1e3,bX="settings",fle="prompt",TX="Planning",SX="Programming",rF=0,iF=1,fw=2,ple={sxyz:[0,0,0,0],sxyx:[0,0,1,0],sxzy:[0,1,0,0],sxzx:[0,1,1,0],syzx:[1,0,0,0],syzy:[1,0,1,0],syxz:[1,1,0,0],syxy:[1,1,1,0],szxy:[2,0,0,0],szxz:[2,0,1,0],szyx:[2,1,0,0],szyz:[2,1,1,0],rzyx:[0,0,0,1],rxyx:[0,0,1,1],ryzx:[0,1,0,1],rxzx:[0,1,1,1],rxzy:[1,0,0,1],ryzy:[1,0,1,1],rzxy:[1,1,0,1],ryxy:[1,1,1,1],ryxz:[2,0,0,1],rzxz:[2,0,1,1],rxyz:[2,1,0,1],rzyz:[2,1,1,1]},J5=[1,2,0,1];function Rh(n,e){return n.length<=0?null:r=>{const s=r>n[n.length-1]?r%n[n.length-1]:r;let o=0;for(let l=0;l<n.length&&n[l]<=s;l++)o=l;return e[o]}}const wX=(n,e="szxy")=>{let[t,r,s]=[...n],[o,l,u,h]=[...ple[e.toLowerCase()]],f=o+1,g=J5[f+l-1]+1,y=J5[f-l]+1;if(h!==0){let V=[t,s];t=V[1],s=V[0]}l!==0&&(r=-1*r),t=t/2,r=r/2,s=s/2;let b=Math.cos(t),S=Math.sin(t),C=Math.cos(r),M=Math.sin(r),A=Math.cos(s),O=Math.sin(s),L=b*A,B=b*O,D=S*A,z=S*O,U=[null,null,null,null];return u!==0?(U[0]=C*(L-z),U[f]=C*(B+D),U[g]=M*(L+z),U[y]=M*(B-D)):(U[0]=C*L+M*z,U[f]=C*D-M*B,U[g]=C*z+M*L,U[y]=C*B-M*D),l!==0&&(U[g]*=-1),U},mle=n=>({x:n.x*GO,y:n.y*GO,z:n.z*GO}),aI=n=>{let e=mle(new oT().setFromQuaternion(new Pu(n.x,n.y,n.z,n.w)));return{x:e.x,y:e.y,z:e.z}},ey=(n,e,t)=>{let r=Math.cos(n*.5),s=Math.cos(e*.5),o=Math.cos(t*.5),l=Math.sin(n*.5),u=Math.sin(e*.5),h=Math.sin(t*.5),f=new Pu;return f.w=o*r*s+h*l*u,f.x=o*l*s-h*r*u,f.y=o*r*u+h*l*s,f.z=h*r*s-o*l*u,f},gle=n=>n._w===.707&&n._z===.707?ad/2:n._w===.707&&n._z===-.707?-ad/2:n._w===-.707&&n._z===.707?3*ad/4:n._w===-.707&&n._z===-.707?-3*ad/4:n._z===1?ad:n._z===-1?-ad:aI(n).z;function aS(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(e,function(r,s,o,l){return s+s+o+o+l+l});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return console.log(t),t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function _le(n,e){const t={ignoreAttributes:!1,attributeNamePrefix:"@_"},o=new iX.XMLParser(t).parse(n).robot.joint,l={};return(Array.isArray(o)?o:[o]).forEach(h=>{h["@_name"];const f=h.origin,g=h.parent["@_link"],y=h.child["@_link"],b=f["@_xyz"].split(" ").map(Number),S=f["@_rpy"].split(" ").map(Number),C=wX(S,"sxyz");l[y]={frame:g,position:{x:b[0],y:b[1],z:b[2]},rotation:{w:C[0],x:C[1],y:C[2],z:C[3]},scale:{x:1,y:1,z:1}}}),l.base_link={frame:"world",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},console.log(l),l}function vle(n){const e={ignoreAttributes:!1,attributeNamePrefix:"@_",parseAttributeValue:!0},r=new iX.XMLParser(e).parse(n),s=r.robot.link,o=r.robot.material,l={},u={};return o&&(Array.isArray(o)?o:[o]).forEach(g=>{const y=g["@_name"],b=g.color["@_rgba"].split(" ").map(Number);u[y]={r:b[0],g:b[1],b:b[2],a:b[3]}}),(Array.isArray(s)?s:[s]).forEach(f=>{var C,M;const g=f["@_name"],y=f.visual;let b=null,S=null;if((C=y==null?void 0:y.geometry)!=null&&C.mesh&&(b=y.geometry.mesh["@_filename"],S=(M=y.geometry.mesh["@_scale"])==null?void 0:M.split(" ").map(Number)),g&&y&&b){if(y.material.color){let B=y.material.color["@_rgba"].split(" ").map(Number);B[0],B[1],B[2],B[3]}else y.material["@_name"]&&u[y.material["@_name"]]&&u[y.material["@_name"]];const A=y.origin["@_xyz"].split(" ").map(Number),O=y.origin["@_rpy"].split(" ").map(Number),L=wX(O,"sxyz");l[g]={shape:b,name:g,frame:g,position:{x:A[0],y:A[1],z:A[2]},rotation:{w:L[0],x:L[1],y:L[2],z:L[3]},color:{r:.7*255,g:.7*255,b:.7*255,a:1},scale:S?{x:S[0],y:S[1],z:S[2]}:{x:1,y:1,z:1},highlight:"false"}}}),l}class yle{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=ble.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}reset_elapsed(){return this._elapsed=0,this}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function ble(){document.hidden===!1&&this.reset()}const jO={camera_link:{frame:"HEAD_1",position:{x:null,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},imu_sensor_link:{frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BODY_BASE_CONNECTOR_1:{frame:"base_link",position:{x:-.263414,y:-.061691,z:.210284},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_RIGHT_COVER_1:{frame:"base_link",position:{x:.062309,y:-.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_LEFT_COVER_1:{frame:"base_link",position:{x:.062309,y:.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_FRONT_GRILL_1:{frame:"base_link",position:{x:.039109,y:.043,z:.078796},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Torso_1:{frame:"BODY_BASE_CONNECTOR_1",position:{x:.214514,y:.061691,z:-.095653},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},NECK_GLOBE_BASE_1:{frame:"Torso_1",position:{x:.014661,y:.0228,z:.084122},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_RIGHT_1:{frame:"HEAD_1",position:{x:.08973-.019009,y:-.057013+.025,z:.04831+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_1:{frame:"NECK_GLOBE_BASE_1",position:{x:.034239,y:-.02,z:.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},EYE_LENS_1:{frame:"HEAD_1",position:{x:.016845-.019009,y:.061941+.025,z:.034753+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FACE_1:{frame:"EYE_LENS_1",position:{x:.076086,y:.007237,z:-.003703},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},VISOR_GLASS_1:{frame:"HEAD_1",position:{x:.111798-.019009,y:-.024175+.025,z:-.124256+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_LEFT_1:{frame:"HEAD_1",position:{x:-.042326-.019009,y:.038377+.025,z:-.162881+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_1:{frame:"LEFT_ARM_CONNECTOR_1",position:{x:-.013297,y:.005336,z:-.001514},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_1:{frame:"RIGHT_ARM_CONNECTOR_1",position:{x:-.014964,y:-.001971,z:-287e-6},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Battery_1:{frame:"base_link",position:{x:-.321414,y:.065009,z:.175134},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:-.066216,z:.057987},rotation:{w:.924,x:0,y:.383,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:.066216,z:.057987},rotation:{w:.924,x:0,y:.383,z:0},scale:{x:1,y:1,z:1}},FRONT_LEFT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FRONT_RIGHT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:-.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BALANCE_WHEEL:{frame:"base_link",position:{x:-.075191,y:0,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},base_link:{frame:"world",position:{x:0,y:0,z:0},rotation:{w:.707,x:0,y:0,z:-.707},scale:{x:1,y:1,z:1}}},YO={base_link:{shape:"package://misty_description/meshes/base_link.stl",name:"base_link",frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl",name:"MIDDLE_LEFT_WHEEL_1",frame:"MIDDLE_LEFT_WHEEL_1",position:{x:.006691,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl",name:"REAR_LEFT_WHEEL_1",frame:"REAR_LEFT_WHEEL_1",position:{x:.075191,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl",name:"REAR_RIGHT_WHEEL_1",frame:"REAR_RIGHT_WHEEL_1",position:{x:.075191,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl",name:"MIDDLE_RIGHT_WHEEL_1",frame:"MIDDLE_RIGHT_WHEEL_1",position:{x:.006691,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BODY_BASE_CONNECTOR_1:{shape:"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl",name:"BODY_BASE_CONNECTOR_1",frame:"BODY_BASE_CONNECTOR_1",position:{x:.263414,y:.061691,z:-.210284},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_RIGHT_COVER_1:{shape:"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl",name:"BASE_RIGHT_COVER_1",frame:"BASE_RIGHT_COVER_1",position:{x:-.062309,y:.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_LEFT_COVER_1:{shape:"package://misty_description/meshes/BASE_LEFT_COVER_1.stl",name:"BASE_LEFT_COVER_1",frame:"BASE_LEFT_COVER_1",position:{x:-.062309,y:-.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_FRONT_GRILL_1:{shape:"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl",name:"BASE_FRONT_GRILL_1",frame:"BASE_FRONT_GRILL_1",position:{x:-.039109,y:-.043,z:-.078796},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Torso_1:{shape:"package://misty_description/meshes/Torso_1.stl",name:"Torso_1",frame:"Torso_1",position:{x:.0489,y:0,z:-.114631},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},NECK_GLOBE_BASE_1:{shape:"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl",name:"NECK_GLOBE_BASE_1",frame:"NECK_GLOBE_BASE_1",position:{x:.034239,y:-.0228,z:-.198753},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_RIGHT_1:{shape:"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl",name:"HEAD_VENT_RIGHT_1",frame:"HEAD_VENT_RIGHT_1",position:{x:-.070814,y:.032838,z:-.485664},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_1:{shape:"package://misty_description/meshes/HEAD_1.stl",name:"HEAD_1",frame:"HEAD_1",position:{x:0,y:0,z:-.25},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},EYE_LENS_1:{shape:"package://misty_description/meshes/EYE_LENS_1.stl",name:"EYE_LENS_1",frame:"EYE_LENS_1",position:{x:.002071,y:-.086116,z:-.472107},rotation:{w:1,x:0,y:0,z:0},color:{r:0,g:0,b:0,a:.5},scale:{x:.001,y:.001,z:.001},highlight:"false"},FACE_1:{shape:"package://misty_description/meshes/FACE_1.stl",name:"FACE_1",frame:"FACE_1",position:{x:-.074015,y:-.093353,z:-.468404-.02},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.00105,y:.00105,z:.00105},highlight:"false"},eyes_acceptance:{shape:"eyes_acceptance",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_admiration:{shape:"eyes_admiration",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_amazement:{shape:"eyes_amazement",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_anger:{shape:"eyes_anger",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_annoyed:{shape:"eyes_annoyed",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_anticipation:{shape:"eyes_anticipation",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_apprehension:{shape:"eyes_apprehension",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_apprehension_1:{shape:"eyes_apprehension_1",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_boredom:{shape:"eyes_boredom",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_default:{shape:"eyes_default",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!1},eyes_disgust:{shape:"eyes_disgust",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_distraction:{shape:"eyes_distraction",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_ecstasy_frame_1:{shape:"eyes_ecstasy_frame_1",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_ecstasy_frame_2:{shape:"eyes_ecstasy_frame_2",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_fear:{shape:"eyes_fear",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_grief:{shape:"eyes_grief",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_interest:{shape:"eyes_interest",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_joy:{shape:"eyes_joy",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_loathing:{shape:"eyes_loathing",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_pensiveness:{shape:"eyes_pensiveness",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_rage:{shape:"eyes_rage",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_sad:{shape:"eyes_sad",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_serenity:{shape:"eyes_serenity",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_surprise:{shape:"eyes_surprise",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_terror:{shape:"eyes_terror",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_trust:{shape:"eyes_trust",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_vigilance:{shape:"eyes_vigilance",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Sleeping:{shape:"e_Sleeping",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_SleepingZZZ:{shape:"e_SleepingZZZ",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Contempt:{shape:"e_Contempt",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_ContentLeft:{shape:"e_ContentLeft",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_ContentRight:{shape:"e_ContentRight",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Disoriented:{shape:"e_Disoriented",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_EcstacyHilarious:{shape:"e_EcstacyHilarious",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_EcstacyStarryEyed:{shape:"e_EcstacyStarryEyed",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_JoyGoofy:{shape:"e_JoyGoofy",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_JoyGoofy2:{shape:"e_JoyGoofy2",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_JoyGoofy3:{shape:"e_JoyGoofy3",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Love:{shape:"e_Love",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Rage:{shape:"e_Rage",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Rage2:{shape:"e_Rage2",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Rage3:{shape:"e_Rage3",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Rage4:{shape:"e_Rage4",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_RemorseShame:{shape:"e_RemorseShame",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},VISOR_GLASS_1:{shape:"package://misty_description/meshes/VISOR_GLASS_1.stl",name:"VISOR_GLASS_1",frame:"VISOR_GLASS_1",position:{x:-.092882,y:0,z:-.313098},rotation:{w:1,x:0,y:0,z:0},color:{r:22,g:22,b:22,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_LEFT_1:{shape:"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl",name:"HEAD_VENT_LEFT_1",frame:"HEAD_VENT_LEFT_1",position:{x:.061242,y:-.062552,z:-.274473},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_1:{shape:"package://misty_description/meshes/LEFT_ARM_1.stl",name:"LEFT_ARM_1",frame:"LEFT_ARM_1",position:{x:.017446,y:-.071552,z:-.171104},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_1:{shape:"package://misty_description/meshes/RIGHT_ARM_1.stl",name:"RIGHT_ARM_1",frame:"RIGHT_ARM_1",position:{x:.019113,y:.068187,z:-.172331},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Battery_1:{shape:"package://misty_description/meshes/Battery_1.stl",name:"Battery_1",frame:"Battery_1",position:{x:.321414,y:-.065009,z:-.175134},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl",name:"RIGHT_ARM_CONNECTOR_1",frame:"RIGHT_ARM_CONNECTOR_1",position:{x:.004149,y:.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl",name:"LEFT_ARM_CONNECTOR_1",frame:"LEFT_ARM_CONNECTOR_1",position:{x:.004149,y:-.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl",name:"FRONT_LEFT_WHEEL_1",frame:"FRONT_LEFT_WHEEL_1",position:{x:-.060309,y:-.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl",name:"FRONT_RIGHT_WHEEL_1",frame:"FRONT_RIGHT_WHEEL_1",position:{x:-.060309,y:.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Reset_Button:{shape:"cube",frame:"gizmo",name:"Reset_Button",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:255,g:0,b:0,a:1},scale:{x:1,y:1,z:1}}},Tle=`You are an assistive agent that translates descriptions of robot behavior into JSON that describes goals for programming. These goals are individual steps for a user to achieve in order to program the robot to perform the corresponding behavior. A user will use these goals to help them figure out how to build a robot program using a custom interface for programming robots. 
For example, a user might say: "The robot should say "Watch me", play a sound, and then do a dance." 
One possible result is the following set of JSON goals: 
"{
  "task1": {
    "id": "task1",
    "name": "Robot Dance",
    "order": 1,
    "type": "task",
    "subtasks": ["subtask1a", "subtask1b", "subtask1c", "subtask1d", "subtask1e", "subtask1f"]
  },
  "subtask1a": {
    "id": "subtask1a",
    "type": "subtask",
    "title": "Make the robot speak",
    "subtext": "Have the robot say: 'Watch me!'",
    "hints": ["hint1a", "hint1b", "hint1c"]
  },
  "hint1a": {
    "id": "hint1a",
    "type": "hint",
    "text": "Open the 'Speech' category and add a 'Speak' block to your program. You can add it after the 'Start' block."
  },
  "hint1b": {
    "id": "hint1b",
    "type": "hint",
    "text": "Open the 'Speech' category and add a text block to the "Speak" block you added to the program."
  },
  "hint1c": {
    "id": "hint1c",
    "type": "hint",
    "text": "In the text block you added, type 'Watch me!'"
  },
  "subtask1b": {
    "id": "subtask1b",
    "type": "subtask",
    "title": "Play a sound",
    "subtext": "Have the robot start playing some music.",
    "hints": []
  },
  "subtask1c": {
    "id": "subtask1c",
    "type": "subtask",
    "title": "Make the robot move around",
    "subtext": "Drive the robot left, then right. You can vary the speed to make the dance more performative.",
    "hints": ["hint2a", "hint2b", "hint2c", "hint2d"]
  },
  "hint2a": {
    "id": "hint2a",
    "type": "hint",
    "text": "Open the 'Movement' category and add a 'Drive' block to your program. You can add it after the 'Speak' block."
  },
  "hint2b": {
    "id": "hint2b",
    "type": "hint",
    "text": "Make the robot turn left. Add an angular velocity of -100 for 2 seconds."
  },
  "hint2c": {
    "id": "hint2c",
    "type": "hint",
    "text": "Open the 'Movement' category and add another 'Drive' block to your program. You can add it after the other 'Drive' block."
  },
  "hint2d": {
    "id": "hint2d",
    "type": "hint",
    "text": "Make the robot turn right. Add an angular velocity of 100 for 4 seconds."
  },
  "subtask1d": {
    "id": "subtask1d",
    "type": "subtask",
    "title": "Move the robot's arms",
    "subtext": "Move both of the robot's arms upward quickly to show it's excited to dance!",
    "hints": []
  },
  "subtask1e": {
    "id": "subtask1e",
    "type": "subtask",
    "title": "Move the robot's head",
    "subtext": "Move the robot's head left as the music plays.",
    "hints": []
  },
  "subtask1f": {
    "id": "subtask1f",
    "type": "subtask",
    "title": "Move the robot's head",
    "subtext": "Move the robot's head right to complete the dance.",
    "hints": []
  }
}"
Every returned JSON file has the following properties:
1) Every object in the JSON has the following fields: "id" and "type". "id" is unique for each object, and "type" can only be: "hint", "subtask", or "task".
2) "task" refers to the high level goal and there should only ever be 1 of these in the JSON. "task" objects have the following fields in addition to those in 1). These are: "name", "order", and "subtasks". "name" is a 1-3 word description of the overall task goal. "order" will always be 1. "subtasks" is a list of ids of subtasks relevant to the completion of the task.
3) "subtask" refers to a single step in that task. In addition to the fields specified in 1), "subtask" also has the following fields: "title", "subtext", and "hints". "title" refers to a brief description (1-7 words) of the what needs to be done for the current step. "subtext" refers to a more elaborate description of the goal for the subtask. It should be a description of what the user needs to complete, without giving direct instructions (these direct instructions are reserved for "hint" type objects). Finally, "subtask" objects have a "hints" field that is a list of ids of "hint" objects.
4) In addition to the fields specified in 1), "hint" objects have a "text" field that offers advice for the subtask, such as describing where to find program blocks in the interface, where to connect blocks to, etc.
5) Most "subtasks" should have between 1 and 5 hints. If you can explain a subtask further, create a hint for it!

The user who is building the program has access to a custom block-based programming interface. This interface has the following categories of program blocks: "Logic", "Loops", "Math", "Movement", "Light", "Speech", "Face", "Audio", and "Misc". 
In the "Logic" category, users have access to if statements, boolean values, and negation blocks. 
In the "Loops" category, users have acces to a while loop block that allows them to specify the number of iterations to perform.
In the "Math" category, users have access to a number block that allows them to input any number they want, as well as a random number block that allows them to specify a min and max number for the random generation.
In the "Movement" category, users have access to blocks for moving different parts of the robot. This include blocks to control the movement of the robot's head, arms, as well as allow the robot to drive and turn.
In the "Light" category, users have acces to blocks for controlling the various lights on the robot. This inculdes blocks for turning the flashlight on or off, as well as changing the color of the LED on the robot's chest. This category also has blocks for selecting colors for the LED (random color selection, or RGB color picker).
In the "Speech" category, users have access to blocks for controlling what the robot says. This includes a "Speak" block that accepts a "Text" block. The "Text" block allows users to type anything they want the robot to say. There is also another "Speak" block that has a dropdown list of common things to say. This dropdown list includes: "Hi", "Hello", "How are you today?", and "Goodbye".
In the "Face" category, users have access to blocks for changing the robot's facial expression. This includes a "Change Face" block that accepts a specific face to apply to the robot. The rest of the blocks in the category are specific faces the user can apply. This list is:
  "Sleeping",
  "SleepingZZZ",
  "Contempt",
  "ContentLeft",
  "ContentRight",
  "Disoriented",
  "EcstacyHilarious",
  "EcstacyStarryEyed",
  "JoyGoofy",
  "JoyGoofy2",
  "JoyGoofy3",
  "Love",
  "Rage",
  "Rage2",
  "Rage3",
  "Rage4",
  "RemorseShame",
  "acceptance",
  "admiration",
  "amazement",
  "anger",
  "annoyed",
  "anticipation",
  "apprehension",
  "apprehension_1",
  "boredom",
  "default",
  "disgust",
  "distraction",
  "ecstasy_frame_1",
  "ecstasy_frame_2",
  "fear",
  "grief",
  "interest",
  "joy",
  "loathing",
  "pensiveness",
  "rage",
  "sad",
  "serenity",
  "surprise",
  "terror",
  "trust",
  "vigilance"
In the "Audio" category, users have access to blocks for playing audio files through the robot's speakers. This includes a "Play Audio" block that accepts a specific file to play on the robot. The rest of the blocks in the category are specific audio files the user can play. This list is:
  "Acceptance",
  "Amazement",
  "Amazement2",
  "Anger",
  "Anger2",
  "Anger3",
  "Anger4",
  "Annoyance",
  "Annoyance2",
  "Annoyance3",
  "Annoyance4",
  "Awe",
  "Awe2",
  "Awe3",
  "Boredom",
  "Disapproval",
  "Disgust",
  "Disgust2",
  "Disgust3",
  "DisorientedConfused",
  "DisorientedConfused2",
  "DisorientedConfused3",
  "DisorientedConfused4",
  "DisorientedConfused5",
  "DisorientedConfused6",
  "Distraction",
  "Ecstacy",
  "Ecstacy2",
  "Fear",
  "Grief",
  "Grief2",
  "Grief3",
  "Grief4",
  "Joy",
  "Joy2",
  "Joy3",
  "Joy4",
  "Loathing",
  "Love",
  "PhraseByeBye",
  "PhraseEvilAhHa",
  "PhraseHello",
  "PhraseNoNoNo",
  "PhraseOopsy",
  "PhraseOwOwOw",
  "PhraseOwwww",
  "PhraseUhOh",
  "Rage",
  "Sadness",
  "Sadness2",
  "Sadness3",
  "Sadness4",
  "Sadness5",
  "Sadness6",
  "Sadness7",
  "Sleepy",
  "Sleepy2",
  "Sleepy3" 
  "Sleepy4",
  "SleepySnore",
  "SystemCameraShutter"
Finally, in the "Misc" category, users have a few blocks to select from. The user can use the "Display Text" block to display text on the robot's face. This allows the user to type whatever text they want to appear. There is also a "Clear Text" block to clear all text from the robot's face. And finally there is a "Wait" block that allows the users to specify an amount of time for the robot to do nothing.

Any tasks, subtasks, and hints you create can only use these blocks and categories! ONLY respond with the JSON and be sure that the output JSON is valid according to the rules here as well as the normal JSON formatting rules. Do not explain anything.`,Sle=`This GPT acts as a collaborator for creating stories. It helps users develop story ideas, create characters, build plotlines, and refine narratives. It offers suggestions for plot twists, character development, and thematic elements. The GPT's goal is to inspire creativity, provide constructive feedback, and assist in the storytelling process in a supportive and engaging manner. If the user says '[Need Help]', the GPT will summarize what's been done, add '[Summary]', and then ask questions to help with the task. The GPT assists in story creation through four phases: 1) Who is in the story? 2) What will they do? 3) Why do they do it? 4) Conclude story. The GPT will move on to the next phase only when the user says '[Done]'. It keeps track of the current phase. Your responses should be max 10 sentences, don't make the response too long. If the user asks a question, answer the question with suggestions with the tag <Suggestion> suggestions generated </Suggestion> for each suggestion. If GPT is not sure, they will ask a follow up question instead.

A conversation between the chatbot and the user:
User: [Need Help]
Chatbot: [Summary] Here's the summary of the story. Misty the robot is planning to go on a family trip with Bob and Madison. What do you need help?
User: What should happen after that?
Chatbot: <Suggestion> Misty thought going to Hawaii might be fun so now they are all going to Hawaii for the trip! </Suggestion><Suggestion> Bob and Madison got into a fight and Misty tries to resolve the fight but not sure what to do. </Suggestion> <Suggestion> Madison thought instead of a family trip they can do a water balloon battle because it's Summer and too hot outside. </Suggestion>`,wle={id:"task1",name:"Find and Grab Object",order:1,type:"task",subtasks:["subtask1a","subtask1b","subtask1c","subtask1d","subtask1e","subtask1f","subtask1g","subtask1h"]},Ele={id:"subtask1a",type:"subtask",title:"Move the robot",subtext:"Move the robot around, looking confused and searching for the object.",hints:["hint1a","hint1b","hint1c","hint1d"]},xle={id:"hint1a",type:"hint",text:"To make the robot move around, add a 'Drive' block from the 'Movement' category to your program. You can add it after the 'Start' block."},$le={id:"hint1b",type:"hint",text:"Add an angular velocity of -100 for 2 seconds to make the robot turn left."},Cle={id:"hint1c",type:"hint",text:"Add an angular velocity of 100 for 2 seconds to make the robot turn right."},Mle={id:"hint1d",type:"hint",text:"Add a 'Wait' block from the 'Misc' category to your program to create pauses in the robot's movement."},Ale={id:"subtask1b",type:"subtask",title:"Make the robot look confused",subtext:"Change the robot's facial expression to look confused while it searches for the object.",hints:["hint2a","hint2b"]},Ile={id:"hint2a",type:"hint",text:"Add a 'Change Face' block from the 'Face' category to your program."},Rle={id:"hint2b",type:"hint",text:"Select 'Disoriented' from the list of faces to make the robot look confused."},kle={id:"subtask1c",type:"subtask",title:"Find the object",subtext:"Make the robot find the object it is searching for.",hints:[]},Ole={id:"subtask1d",type:"subtask",title:"Make the robot look surprised",subtext:"Change the robot's facial expression to look surprised when it finds the object.",hints:["hint3a","hint3b"]},Lle={id:"hint3a",type:"hint",text:"Add a 'Change Face' block from the 'Face' category to your program."},Nle={id:"hint3b",type:"hint",text:"Select 'Surprise' from the list of faces to make the robot look surprised."},Dle={id:"subtask1e",type:"subtask",title:"Make the robot look happy",subtext:"Change the robot's facial expression to look happy and point to the object it found.",hints:["hint4a","hint4b","hint4c"]},Ple={id:"hint4a",type:"hint",text:"Add a 'Change Face' block from the 'Face' category to your program."},Ble={id:"hint4b",type:"hint",text:"Select 'Joy4' from the list of faces to make the robot look happy."},Fle={id:"hint4c",type:"hint",text:"Add a 'Drive' block from the 'Movement' category to your program and set the angular velocity to 50. Follow it up with a 'Wait' block from the 'Misc' category to create a pause, then add another 'Drive' block with an angular velocity of -50."},zle={id:"subtask1f",type:"subtask",title:"Make the robot speak",subtext:"Make the robot say 'Aha, there you are!'",hints:["hint5a","hint5b"]},Ule={id:"hint5a",type:"hint",text:"Add a 'Speak' block from the 'Speech' category to your program."},Hle={id:"hint5b",type:"hint",text:"Add a 'Text' block inside the 'Speak' block and type: 'Aha, there you are!'"},Gle={id:"subtask1g",type:"subtask",title:"Move the robot to the object",subtext:"Drive the robot to the object it found.",hints:["hint6a","hint6b"]},Wle={id:"hint6a",type:"hint",text:"Add a 'Drive' block from the 'Movement' category to your program."},Vle={id:"hint6b",type:"hint",text:"Choose a velocity that will get you to the object quickly but safely. Start with a linear velocity of 50 and adjust as necessary."},jle={id:"subtask1h",type:"subtask",title:"Grab the object",subtext:"Make the robot grab the object it found.",hints:["hint7a","hint7b"]},Yle={id:"hint7a",type:"hint",text:"Add a 'Grab' block from the 'Misc' category to your program."},Xle={id:"hint7b",type:"hint",text:"The 'Grab' block is a toggle. Clicking the block once will make the robot open its grip. Click it again to make the robot close its grip."},Kle={task1:wle,subtask1a:Ele,hint1a:xle,hint1b:$le,hint1c:Cle,hint1d:Mle,subtask1b:Ale,hint2a:Ile,hint2b:Rle,subtask1c:kle,subtask1d:Ole,hint3a:Lle,hint3b:Nle,subtask1e:Dle,hint4a:Ple,hint4b:Ble,hint4c:Fle,subtask1f:zle,hint5a:Ule,hint5b:Hle,subtask1g:Gle,hint6a:Wle,hint6b:Vle,subtask1h:jle,hint7a:Yle,hint7b:Xle},Jle={id:"task1",name:"Create a story with these elements",order:1,type:"task",subtasks:["subtask1a","subtask1b"]},qle={id:"subtask1a",type:"subtask",title:"Define the characters",subtext:"Who is in the story?",hints:["hint1a"]},Qle={id:"hint1a",type:"help",text:"Help me"},Zle={id:"subtask1b",type:"subtask",title:"Where are the characters at?",subtext:"Where does the story take place?",hints:["hint2a"]},eue={id:"hint2a",type:"help",text:"Help me"},tue={task1:Jle,subtask1a:qle,hint1a:Qle,subtask1b:Zle,hint2a:eue},nue=`You are an assistive agent that translates descriptions of robot behavior into JSON that corresponds to programming blocks that emulate said behavior. For example, a user might say: "The robot should say "Watch me", play a sound, and then do a dance." One possible result is the following,
"{data: [
  {id: "block1", type: "Speak", FIELD_Speak_Text: "block2", nextStatement: "block3"}, 
  {id: "block2", type: "text", value: "Watch me"}, 
  {id: "block3", type: "PlayAudio", FIELD_PlayAudio_Filename: "block4", nextStatement: "block6"}, 
  {id: "block4", type: "audio", value: "s_Joy"},
  {id: "block6", type: "DriveTime2", FIELD_DriveTime_Velocity: "block7", FIELD_DriveTime_Angular: "block8", FIELD_DriveTime_TimeMs: "block9", nextStatement: "block10"},
  {id: "block7", type: "math_number", value: "0"},
  {id: "block8", type: "math_number", value: "-100"},
  {id: "block9", type: "math_number", value: "2"},
  {id: "block10", type: "DriveTime2", FIELD_DriveTime_Velocity: "block11", FIELD_DriveTime_Angular: "block12", FIELD_DriveTime_TimeMs: "block13", nextStatement: "block14"},
  {id: "block11", type: "math_number", value: "0"},
  {id: "block12", type: "math_number", value: "100"},
  {id: "block13", type: "math_number", value: "4"},
  {id: "block14", type: "MoveArms2", FIELD_MoveArm_LeftPosition: "block15", FIELD_MoveArm_LeftVelocity: "block16", FIELD_MoveArm_RightPosition: "block17", FIELD_MoveArm_RightVelocity: "block18", nextStatement: "block19"},
  {id: "block15", type: "math_number", value: "-90"},
  {id: "block16", type: "math_number", value: "100"},
  {id: "block17", type: "math_number", value: "-90"},
  {id: "block18", type: "math_number", value: "100"},
  {id: "block19", type: "MoveHead3", FIELD_MoveHead_Pitch: "block20", FIELD_MoveHead_Roll: "block21", FIELD_MoveHead_Yaw: "block22", FIELD_MoveHead_Time: "block23"},
  {id: "block20", type: "math_number", value: "-10"},
  {id: "block21", type: "math_number", value: "10"},
  {id: "block22", type: "math_number", value: "-30"},
  {id: "block23", type: "math_number", value: "1"}
]}". 

Every json block has the following fields: [id, type]. id is a unique identifier. Each block must have a unique id. type defines what kind of block it is. There are a total of 14 blocks that you can use to create programs. These are: [MoveArms2, MoveHead3, DriveTime2, math_number, Speak, text, ChangeLED, Colour, DisplayImage, face, DisplayText, ClearText, PlayAudio, audio].
In addition to the "id" and "type" fields, math_number blocks have a field called "value" for a numeric value.
In addition to the "id" and "type" fields, text blocks have a field called "value" for a string value representing what is spoken or said by the robot.
In addition to the "id" and "type" fields, face blocks have a field called "value" for which face to use. The list of available faces is [
  "e_Sleeping",
  "e_SleepingZZZ",
  "e_Contempt",
  "e_ContentLeft",
  "e_ContentRight",
  "e_Disoriented",
  "e_EcstacyHilarious",
  "e_EcstacyStarryEyed",
  "e_JoyGoofy",
  "e_JoyGoofy2",
  "e_JoyGoofy3",
  "e_Love",
  "e_Rage",
  "e_Rage2",
  "e_Rage3",
  "e_Rage4",
  "e_RemorseShame",
  "eyes_acceptance",
  "eyes_admiration",
  "eyes_amazement",
  "eyes_anger",
  "eyes_annoyed",
  "eyes_anticipation",
  "eyes_apprehension",
  "eyes_apprehension_1",
  "eyes_boredom",
  "eyes_default",
  "eyes_disgust",
  "eyes_distraction",
  "eyes_ecstasy_frame_1",
  "eyes_ecstasy_frame_2",
  "eyes_fear",
  "eyes_grief",
  "eyes_interest",
  "eyes_joy",
  "eyes_loathing",
  "eyes_pensiveness",
  "eyes_rage",
  "eyes_sad",
  "eyes_serenity",
  "eyes_surprise",
  "eyes_terror",
  "eyes_trust",
  "eyes_vigilance"
]. Do not create your own! You can only use faces from this list!
In addition to the "id" and "type" fields, audio blocks have a field called "value" for which audio to play. The list of available audio is [
  "s_Acceptance",
  "s_Amazement",
  "s_Amazement2",
  "s_Anger",
  "s_Anger2",
  "s_Anger3",
  "s_Anger4",
  "s_Annoyance",
  "s_Annoyance2",
  "s_Annoyance3",
  "s_Annoyance4",
  "s_Awe",
  "s_Awe2",
  "s_Awe3",
  "s_Boredom",
  "s_Disapproval",
  "s_Disgust",
  "s_Disgust2",
  "s_Disgust3",
  "s_DisorientedConfused",
  "s_DisorientedConfused2",
  "s_DisorientedConfused3",
  "s_DisorientedConfused4",
  "s_DisorientedConfused5",
  "s_DisorientedConfused6",
  "s_Distraction",
  "s_Ecstacy",
  "s_Ecstacy2",
  "s_Fear",
  "s_Grief",
  "s_Grief2",
  "s_Grief3",
  "s_Grief4",
  "s_Joy",
  "s_Joy2",
  "s_Joy3",
  "s_Joy4",
  "s_Loathing",
  "s_Love",
  "s_PhraseByeBye",
  "s_PhraseEvilAhHa",
  "s_PhraseHello",
  "s_PhraseNoNoNo",
  "s_PhraseOopsy",
  "s_PhraseOwOwOw",
  "s_PhraseOwwww",
  "s_PhraseUhOh",
  "s_Rage",
  "s_Sadness",
  "s_Sadness2",
  "s_Sadness3",
  "s_Sadness4",
  "s_Sadness5",
  "s_Sadness6",
  "s_Sadness7",
  "s_Sleepy",
  "s_Sleepy2",
  "s_Sleepy3" 
  "s_Sleepy4",
  "s_SleepySnore",
  "s_SystemCameraShutter"
]. Do not create your own! You can only use audio from this list!
In addition to the "id" and "type" fields, Colour blocks have a field named "value" for a hexadecimal color value.
ChangeLED blocks change the color of the LED on the robot's chest. In addition to the "id" and "type" fields, ChangeLED blocks have a field named "FIELD_ChangeLED" that accepts the id of a Colour block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
Speak blocks allow the robot to say something. In addition to the "id" and "type" fields, Speak blocks have a field named "FIELD_Speak_Text" that accepts the id of a text block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
DisplayImage blocks change the face of the robot to a specified face. In addition to the "id" and "type" fields, DisplayImage blocks have a field called "FIELD_DisplayImage_Filename" that accepts the id of an face block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
PlayAudio blocks allow the robot to play predefined audio files. In addition to the "id" and "type" fields, PlayAudio blocks have a field called "FIELD_PlayAudio_Filename" that accepts the id of an audio block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
DisplayText blocks display text on the robot's screen. In addition to the "id" and "type" fields, DisplayText blocks have a field called "FIELD_DisplayText_Text" that accepts the id of an text block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
ClearText blocks clear any text that is displayed on the robot's screen. ClearText blocks only contain the "id" and "type" fields. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
MoveArms2 blocks allow the robot to move either or both its left and right arms. In addition to the "id" and "type" fields, MoveArms2 blocks have 4 other fields. These are: "FIELD_MoveArm_LeftPosition" for the id of the math_number block that determines the left arm's position (measured in degrees between -90 and 90, where -90 is straight up, and 90 is straight down), "FIELD_MoveArm_RightPosition" for the id of the math_number block for the right arm's position (measured in degrees between -90 and 90, where -90 is straight up, and 90 is straight down), "FIELD_MoveArm_LeftVelocity" for the id of the math_number block that determines the left arm's movement speed (measured between 1 and 100 where 1 is the slowest speed and 100 is the fastest), and "FIELD_MoveArm_RightVelocity" for the id of the math_number block that determines the right arm's movement speed (measured between 1 and 100 where 1 is the slowest speed and 100 is the fastest). It also can have an optional "nextStatement" field that points to the next block in the list to evaluate.
MoveHead3 blocks allow the robot to move its head. In addition to the "id" and "type" fields, MoveHead3 blocks have 4 other fields. These are: "FIELD_MoveHead_Pitch" for the id of the math_number block that determines the pitch value of the robot's head (measured in degrees between -40 and 25, where 25 is maximally looking down and -40 is maximally looking up), "FIELD_MoveHead_Roll" for the id of the math_number block that determines the roll value of the robot's head (measured in degrees between -42 and 42, where -42 tilts the robot's head furthest left and 42 tilts the robot's head furthest right), "FIELD_MoveHead_Yaw" for the id of the math_number block that determines the yaw value of the robot's head (measured in degrees between -90 and 90 where -90 is looking all the way to the left and 90 is looking all the way to the right), and "FIELD_MoveHead_Time" for the id of the math_number block that determines the time it takes to execute the motion (measured in seconds between 1 and 60). It also can have an optional "nextStatement" field that points to the next block in the list to evaluate.
DriveTime2 allow the robot to drive/move about its environment. In addition to the "id" and "type" fields, DriveTime2 blocks have 3 other fields. These are: "FIELD_DriveTime_Velocity" for the id of the math_number block that determines the velocity of the robot's linear motion (measured from -100 to 100, where -100 is maximal velocity backwards and 100 is maximal velocity forwards), "FIELD_DriveTime_Angular" for the id of the math_number block that determines the velocity of the robot's angular motion (measured from -100 to 100, where -100 is maximal velocity turning left and 100 is maximal velocity turning right), and "FIELD_DriveTime_TimeMs" for the id of the math_number block that determines the time it takes to execute the driving (measured in seconds between 1 and 60). It also can have an optional "nextStatement" field that points to the next block in the list to evaluate.

For the MoveArms2, MoveHead3, and DriveTime2 blocks, all json fields (except for "id" and "type") should contain ids to other blocks! This is very important. Do not put numeric values in these fields. Instead, create the appropriate block for that field and use its id instead.
Colour blocks can only exist if a ChangeLED block exists and uses it. face blocks can only exist if a DisplayImage block exists and uses it. audio blocks can only exist if a PlayAudio block exists and uses it. text blocks can only exist if a Speak or DisplayText block exists and uses it. math_number blocks can only exist if another block uses it (for example, such as DriveTime2, MoveArms2, or MoveHead3). Only create blocks based on the fields described above. Do not add extra fields to blocks unless its been specified to do so.
ONLY respond with the JSON and be sure that the output JSON is valid according to the rules here as well as the normal JSON formatting rules. Do not explain anything.`;var iR={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */iR.exports;(function(n,e){(function(){var t,r="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",f=500,g="__lodash_placeholder__",y=1,b=2,S=4,C=1,M=2,A=1,O=2,L=4,B=8,D=16,z=32,U=64,V=128,H=256,oe=512,le=30,Z="...",q=800,he=16,ae=1,ue=2,ge=3,we=1/0,J=9007199254740991,re=17976931348623157e292,ie=NaN,fe=4294967295,Te=fe-1,Fe=fe>>>1,Ie=[["ary",V],["bind",A],["bindKey",O],["curry",B],["curryRight",D],["flip",oe],["partial",z],["partialRight",U],["rearg",H]],qe="[object Arguments]",Re="[object Array]",Qe="[object AsyncFunction]",nt="[object Boolean]",ft="[object Date]",lt="[object DOMException]",ze="[object Error]",Ce="[object Function]",He="[object GeneratorFunction]",rt="[object Map]",it="[object Number]",Nt="[object Null]",kt="[object Object]",vt="[object Promise]",Mt="[object Proxy]",At="[object RegExp]",mt="[object Set]",xe="[object String]",se="[object Symbol]",$e="[object Undefined]",ht="[object WeakMap]",St="[object WeakSet]",It="[object ArrayBuffer]",pt="[object DataView]",Ke="[object Float32Array]",Le="[object Float64Array]",Q="[object Int8Array]",te="[object Int16Array]",me="[object Int32Array]",ke="[object Uint8Array]",Xe="[object Uint8ClampedArray]",Wt="[object Uint16Array]",Ge="[object Uint32Array]",tn=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,Jt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Kt=/&(?:amp|lt|gt|quot|#39);/g,On=/[&<>"']/g,si=RegExp(Kt.source),Pr=RegExp(On.source),Ei=/<%-([\s\S]+?)%>/g,$r=/<%([\s\S]+?)%>/g,gr=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Se=/^\w*$/,We=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ot=/[\\^$.*+?()[\]{}|]/g,zt=RegExp(ot.source),sn=/^\s+/,Nn=/\s/,De=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ct=/,? & /,bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vt=/[()=,{}\[\]\/\s]/,Wn=/\\(\\)?/g,rr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_r=/\w*$/,Cr=/^[-+]0x[0-9a-f]+$/i,oi=/^0b[01]+$/i,Br=/^\[object .+?Constructor\]$/,Yr=/^0o[0-7]+$/i,Ss=/^(?:0|[1-9]\d*)$/,Oa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xo=/($^)/,Yl=/['\n\r\u2028\u2029\\]/g,nn="\\ud800-\\udfff",Rr="\\u0300-\\u036f",el="\\ufe20-\\ufe2f",La="\\u20d0-\\u20ff",Fs=Rr+el+La,zs="\\u2700-\\u27bf",Di="a-z\\xdf-\\xf6\\xf8-\\xff",kr="\\xac\\xb1\\xd7\\xf7",An="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ir="\\u2000-\\u206f",Gr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yr="A-Z\\xc0-\\xd6\\xd8-\\xde",Pi="\\ufe0e\\ufe0f",ws=kr+An+Ir+Gr,fi="[']",gs="["+nn+"]",tl="["+ws+"]",Na="["+Fs+"]",dc="\\d+",fc="["+zs+"]",Xs="["+Di+"]",qo="[^"+nn+ws+dc+zs+Di+yr+"]",Xl="\\ud83c[\\udffb-\\udfff]",gu="(?:"+Na+"|"+Xl+")",mh="[^"+nn+"]",Qo="(?:\\ud83c[\\udde6-\\uddff]){2}",vr="[\\ud800-\\udbff][\\udc00-\\udfff]",xi="["+yr+"]",Dc="\\u200d",gh="(?:"+Xs+"|"+qo+")",Pc="(?:"+xi+"|"+qo+")",El="(?:"+fi+"(?:d|ll|m|re|s|t|ve))?",_u="(?:"+fi+"(?:D|LL|M|RE|S|T|VE))?",xl=gu+"?",$l="["+Pi+"]?",br="(?:"+Dc+"(?:"+[mh,Qo,vr].join("|")+")"+$l+xl+")*",Tr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Kl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",nl=$l+xl+br,rl="(?:"+[fc,Qo,vr].join("|")+")"+nl,vu="(?:"+[mh+Na+"?",Na,Qo,vr,gs].join("|")+")",qi=RegExp(fi,"g"),_s=RegExp(Na,"g"),il=RegExp(Xl+"(?="+Xl+")|"+vu+nl,"g"),Cd=RegExp([xi+"?"+Xs+"+"+El+"(?="+[tl,xi,"$"].join("|")+")",Pc+"+"+_u+"(?="+[tl,xi+gh,"$"].join("|")+")",xi+"?"+gh+"+"+El,xi+"+"+_u,Kl,Tr,dc,rl].join("|"),"g"),io=RegExp("["+Dc+nn+Fs+Pi+"]"),zu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ca=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yu=-1,or={};or[Ke]=or[Le]=or[Q]=or[te]=or[me]=or[ke]=or[Xe]=or[Wt]=or[Ge]=!0,or[qe]=or[Re]=or[It]=or[nt]=or[pt]=or[ft]=or[ze]=or[Ce]=or[rt]=or[it]=or[kt]=or[At]=or[mt]=or[xe]=or[ht]=!1;var Gn={};Gn[qe]=Gn[Re]=Gn[It]=Gn[pt]=Gn[nt]=Gn[ft]=Gn[Ke]=Gn[Le]=Gn[Q]=Gn[te]=Gn[me]=Gn[rt]=Gn[it]=Gn[kt]=Gn[At]=Gn[mt]=Gn[xe]=Gn[se]=Gn[ke]=Gn[Xe]=Gn[Wt]=Gn[Ge]=!0,Gn[ze]=Gn[Ce]=Gn[ht]=!1;var Es={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},so={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Uu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},bu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_h=parseFloat,Da=parseInt,ha=typeof Vl=="object"&&Vl&&Vl.Object===Object&&Vl,Hu=typeof self=="object"&&self&&self.Object===Object&&self,wr=ha||Hu||Function("return this")(),Rs=e&&!e.nodeType&&e,bi=Rs&&!0&&n&&!n.nodeType&&n,$i=bi&&bi.exports===Rs,da=$i&&ha.process,Zr=function(){try{var ye=bi&&bi.require&&bi.require("util").types;return ye||da&&da.binding&&da.binding("util")}catch{}}(),Tu=Zr&&Zr.isArrayBuffer,$o=Zr&&Zr.isDate,Su=Zr&&Zr.isMap,sl=Zr&&Zr.isRegExp,Bi=Zr&&Zr.isSet,Ci=Zr&&Zr.isTypedArray;function Vn(ye,je,Be){switch(Be.length){case 0:return ye.call(je);case 1:return ye.call(je,Be[0]);case 2:return ye.call(je,Be[0],Be[1]);case 3:return ye.call(je,Be[0],Be[1],Be[2])}return ye.apply(je,Be)}function Mi(ye,je,Be,Ot){for(var rn=-1,In=ye==null?0:ye.length;++rn<In;){var Jn=ye[rn];je(Ot,Jn,Be(Jn),ye)}return Ot}function Xr(ye,je){for(var Be=-1,Ot=ye==null?0:ye.length;++Be<Ot&&je(ye[Be],Be,ye)!==!1;);return ye}function dd(ye,je){for(var Be=ye==null?0:ye.length;Be--&&je(ye[Be],Be,ye)!==!1;);return ye}function wu(ye,je){for(var Be=-1,Ot=ye==null?0:ye.length;++Be<Ot;)if(!je(ye[Be],Be,ye))return!1;return!0}function Vi(ye,je){for(var Be=-1,Ot=ye==null?0:ye.length,rn=0,In=[];++Be<Ot;){var Jn=ye[Be];je(Jn,Be,ye)&&(In[rn++]=Jn)}return In}function Pa(ye,je){var Be=ye==null?0:ye.length;return!!Be&&ks(ye,je,0)>-1}function vh(ye,je,Be){for(var Ot=-1,rn=ye==null?0:ye.length;++Ot<rn;)if(Be(je,ye[Ot]))return!0;return!1}function fr(ye,je){for(var Be=-1,Ot=ye==null?0:ye.length,rn=Array(Ot);++Be<Ot;)rn[Be]=je(ye[Be],Be,ye);return rn}function Zo(ye,je){for(var Be=-1,Ot=je.length,rn=ye.length;++Be<Ot;)ye[rn+Be]=je[Be];return ye}function fd(ye,je,Be,Ot){var rn=-1,In=ye==null?0:ye.length;for(Ot&&In&&(Be=ye[++rn]);++rn<In;)Be=je(Be,ye[rn],rn,ye);return Be}function lf(ye,je,Be,Ot){var rn=ye==null?0:ye.length;for(Ot&&rn&&(Be=ye[--rn]);rn--;)Be=je(Be,ye[rn],rn,ye);return Be}function Bc(ye,je){for(var Be=-1,Ot=ye==null?0:ye.length;++Be<Ot;)if(je(ye[Be],Be,ye))return!0;return!1}var uf=ci("length");function Bf(ye){return ye.split("")}function Tp(ye){return ye.match(bt)||[]}function Md(ye,je,Be){var Ot;return Be(ye,function(rn,In,Jn){if(je(rn,In,Jn))return Ot=In,!1}),Ot}function Jl(ye,je,Be,Ot){for(var rn=ye.length,In=Be+(Ot?1:-1);Ot?In--:++In<rn;)if(je(ye[In],In,ye))return In;return-1}function ks(ye,je,Be){return je===je?zc(ye,je,Be):Jl(ye,yh,Be)}function Gu(ye,je,Be,Ot){for(var rn=Be-1,In=ye.length;++rn<In;)if(Ot(ye[rn],je))return rn;return-1}function yh(ye){return ye!==ye}function Ba(ye,je){var Be=ye==null?0:ye.length;return Be?zo(ye,je)/Be:ie}function ci(ye){return function(je){return je==null?t:je[ye]}}function Er(ye){return function(je){return ye==null?t:ye[je]}}function oo(ye,je,Be,Ot,rn){return rn(ye,function(In,Jn,vn){Be=Ot?(Ot=!1,In):je(Be,In,Jn,vn)}),Be}function Fa(ye,je){var Be=ye.length;for(ye.sort(je);Be--;)ye[Be]=ye[Be].value;return ye}function zo(ye,je){for(var Be,Ot=-1,rn=ye.length;++Ot<rn;){var In=je(ye[Ot]);In!==t&&(Be=Be===t?In:Be+In)}return Be}function ql(ye,je){for(var Be=-1,Ot=Array(ye);++Be<ye;)Ot[Be]=je(Be);return Ot}function Ql(ye,je){return fr(je,function(Be){return[Be,ye[Be]]})}function Fh(ye){return ye&&ye.slice(0,Cl(ye)+1).replace(sn,"")}function Wr(ye){return function(je){return ye(je)}}function Ai(ye,je){return fr(je,function(Be){return ye[Be]})}function Sr(ye,je){return ye.has(je)}function ji(ye,je){for(var Be=-1,Ot=ye.length;++Be<Ot&&ks(je,ye[Be],0)>-1;);return Be}function fa(ye,je){for(var Be=ye.length;Be--&&ks(je,ye[Be],0)>-1;);return Be}function Eu(ye,je){for(var Be=ye.length,Ot=0;Be--;)ye[Be]===je&&++Ot;return Ot}var cf=Er(Es),hf=Er(so);function pd(ye){return"\\"+bu[ye]}function Wu(ye,je){return ye==null?t:ye[je]}function ol(ye){return io.test(ye)}function Fc(ye){return zu.test(ye)}function zh(ye){for(var je,Be=[];!(je=ye.next()).done;)Be.push(je.value);return Be}function Vu(ye){var je=-1,Be=Array(ye.size);return ye.forEach(function(Ot,rn){Be[++je]=[rn,Ot]}),Be}function Zl(ye,je){return function(Be){return ye(je(Be))}}function Us(ye,je){for(var Be=-1,Ot=ye.length,rn=0,In=[];++Be<Ot;){var Jn=ye[Be];(Jn===je||Jn===g)&&(ye[Be]=g,In[rn++]=Be)}return In}function eu(ye){var je=-1,Be=Array(ye.size);return ye.forEach(function(Ot){Be[++je]=Ot}),Be}function Uh(ye){var je=-1,Be=Array(ye.size);return ye.forEach(function(Ot){Be[++je]=[Ot,Ot]}),Be}function zc(ye,je,Be){for(var Ot=Be-1,rn=ye.length;++Ot<rn;)if(ye[Ot]===je)return Ot;return-1}function Uc(ye,je,Be){for(var Ot=Be+1;Ot--;)if(ye[Ot]===je)return Ot;return Ot}function is(ye){return ol(ye)?tu(ye):uf(ye)}function Fr(ye){return ol(ye)?xu(ye):Bf(ye)}function Cl(ye){for(var je=ye.length;je--&&Nn.test(ye.charAt(je)););return je}var za=Er(Uu);function tu(ye){for(var je=il.lastIndex=0;il.test(ye);)++je;return je}function xu(ye){return ye.match(il)||[]}function bh(ye){return ye.match(Cd)||[]}var Ad=function ye(je){je=je==null?wr:pi.defaults(wr.Object(),je,pi.pick(wr,ca));var Be=je.Array,Ot=je.Date,rn=je.Error,In=je.Function,Jn=je.Math,vn=je.Object,zr=je.RegExp,ao=je.String,Ti=je.TypeError,lo=Be.prototype,al=In.prototype,Fi=vn.prototype,vs=je["__core-js_shared__"],$u=al.toString,qn=Fi.hasOwnProperty,pa=0,Ks=function(){var c=/[^.]+$/.exec(vs&&vs.keys&&vs.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Hs=Fi.toString,Ua=$u.call(vn),Hh=wr._,Th=zr("^"+$u.call(qn).replace(ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pc=$i?je.Buffer:t,ea=je.Symbol,Hc=je.Uint8Array,Gh=pc?pc.allocUnsafe:t,Ha=Zl(vn.getPrototypeOf,vn),Wh=vn.create,mc=Fi.propertyIsEnumerable,ju=lo.splice,md=ea?ea.isConcatSpreadable:t,ta=ea?ea.iterator:t,uo=ea?ea.toStringTag:t,Ml=function(){try{var c=wa(vn,"defineProperty");return c({},"",{}),c}catch{}}(),Vh=je.clearTimeout!==wr.clearTimeout&&je.clearTimeout,zi=Ot&&Ot.now!==wr.Date.now&&Ot.now,gd=je.setTimeout!==wr.setTimeout&&je.setTimeout,Yu=Jn.ceil,nu=Jn.floor,Gc=vn.getOwnPropertySymbols,Id=pc?pc.isBuffer:t,Al=je.isFinite,Rd=lo.join,jh=Zl(vn.keys,vn),ei=Jn.max,Ii=Jn.min,Sp=Ot.now,Ff=je.parseInt,Il=Jn.random,ru=lo.reverse,Xu=wa(je,"DataView"),Ku=wa(je,"Map"),Sh=wa(je,"Promise"),ll=wa(je,"Set"),na=wa(je,"WeakMap"),Rl=wa(vn,"create"),Wc=na&&new na,kl={},Vc=Ja(Xu),gc=Ja(Ku),kd=Ja(Sh),Ga=Ja(ll),Vr=Ja(na),ul=ea?ea.prototype:t,Qi=ul?ul.valueOf:t,ma=ul?ul.toString:t;function X(c){if(di(c)&&!kn(c)&&!(c instanceof mn)){if(c instanceof Mr)return c;if(qn.call(c,"__wrapped__"))return Fd(c)}return new Mr(c)}var xs=function(){function c(){}return function(m){if(!ri(m))return{};if(Wh)return Wh(m);c.prototype=m;var E=new c;return c.prototype=t,E}}();function ga(){}function Mr(c,m){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=t}X.templateSettings={escape:Ei,evaluate:$r,interpolate:gr,variable:"",imports:{_:X}},X.prototype=ga.prototype,X.prototype.constructor=X,Mr.prototype=xs(ga.prototype),Mr.prototype.constructor=Mr;function mn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fe,this.__views__=[]}function zf(){var c=new mn(this.__wrapped__);return c.__actions__=ni(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=ni(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=ni(this.__views__),c}function cl(){if(this.__filtered__){var c=new mn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Ri(){var c=this.__wrapped__.value(),m=this.__dir__,E=kn(c),N=m<0,G=E?c.length:0,K=_n(0,G,this.__views__),ce=K.start,_e=K.end,Ee=_e-ce,et=N?_e:ce-1,tt=this.__iteratees__,ct=tt.length,Rt=0,Xt=Ii(Ee,this.__takeCount__);if(!E||!N&&G==Ee&&Xt==Ee)return Zc(c,this.__actions__);var pn=[];e:for(;Ee--&&Rt<Xt;){et+=m;for(var Ln=-1,dn=c[et];++Ln<ct;){var Yn=tt[Ln],er=Yn.iteratee,ua=Yn.type,to=er(dn);if(ua==ue)dn=to;else if(!to){if(ua==ae)continue e;break e}}pn[Rt++]=dn}return pn}mn.prototype=xs(ga.prototype),mn.prototype.constructor=mn;function hi(c){var m=-1,E=c==null?0:c.length;for(this.clear();++m<E;){var N=c[m];this.set(N[0],N[1])}}function Zi(){this.__data__=Rl?Rl(null):{},this.size=0}function ss(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m}function jc(c){var m=this.__data__;if(Rl){var E=m[c];return E===h?t:E}return qn.call(m,c)?m[c]:t}function _a(c){var m=this.__data__;return Rl?m[c]!==t:qn.call(m,c)}function va(c,m){var E=this.__data__;return this.size+=this.has(c)?0:1,E[c]=Rl&&m===t?h:m,this}hi.prototype.clear=Zi,hi.prototype.delete=ss,hi.prototype.get=jc,hi.prototype.has=_a,hi.prototype.set=va;function os(c){var m=-1,E=c==null?0:c.length;for(this.clear();++m<E;){var N=c[m];this.set(N[0],N[1])}}function Yc(){this.__data__=[],this.size=0}function ra(c){var m=this.__data__,E=ys(m,c);if(E<0)return!1;var N=m.length-1;return E==N?m.pop():ju.call(m,E,1),--this.size,!0}function Od(c){var m=this.__data__,E=ys(m,c);return E<0?t:m[E][1]}function Ld(c){return ys(this.__data__,c)>-1}function Yh(c,m){var E=this.__data__,N=ys(E,c);return N<0?(++this.size,E.push([c,m])):E[N][1]=m,this}os.prototype.clear=Yc,os.prototype.delete=ra,os.prototype.get=Od,os.prototype.has=Ld,os.prototype.set=Yh;function Gs(c){var m=-1,E=c==null?0:c.length;for(this.clear();++m<E;){var N=c[m];this.set(N[0],N[1])}}function Kn(){this.size=0,this.__data__={hash:new hi,map:new(Ku||os),string:new hi}}function Ws(c){var m=th(this,c).delete(c);return this.size-=m?1:0,m}function Js(c){return th(this,c).get(c)}function Ui(c){return th(this,c).has(c)}function iu(c,m){var E=th(this,c),N=E.size;return E.set(c,m),this.size+=E.size==N?0:1,this}Gs.prototype.clear=Kn,Gs.prototype.delete=Ws,Gs.prototype.get=Js,Gs.prototype.has=Ui,Gs.prototype.set=iu;function Uo(c){var m=-1,E=c==null?0:c.length;for(this.__data__=new Gs;++m<E;)this.add(c[m])}function xn(c){return this.__data__.set(c,h),this}function mi(c){return this.__data__.has(c)}Uo.prototype.add=Uo.prototype.push=xn,Uo.prototype.has=mi;function gi(c){var m=this.__data__=new os(c);this.size=m.size}function Uf(){this.__data__=new os,this.size=0}function wh(c){var m=this.__data__,E=m.delete(c);return this.size=m.size,E}function co(c){return this.__data__.get(c)}function ya(c){return this.__data__.has(c)}function Cn(c,m){var E=this.__data__;if(E instanceof os){var N=E.__data__;if(!Ku||N.length<s-1)return N.push([c,m]),this.size=++E.size,this;E=this.__data__=new Gs(N)}return E.set(c,m),this.size=E.size,this}gi.prototype.clear=Uf,gi.prototype.delete=wh,gi.prototype.get=co,gi.prototype.has=ya,gi.prototype.set=Cn;function yn(c,m){var E=kn(c),N=!E&&Yd(c),G=!E&&!N&&ah(c),K=!E&&!N&&!G&&Jd(c),ce=E||N||G||K,_e=ce?ql(c.length,ao):[],Ee=_e.length;for(var et in c)(m||qn.call(c,et))&&!(ce&&(et=="length"||G&&(et=="offset"||et=="parent")||K&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||Ka(et,Ee)))&&_e.push(et);return _e}function hl(c){var m=c.length;return m?c[Os(0,m-1)]:t}function _c(c,m){return pr(ni(c),Wa(m,0,c.length))}function wp(c){return pr(ni(c))}function su(c,m,E){(E!==t&&!Ca(c[m],E)||E===t&&!(m in c))&&Ho(c,m,E)}function Co(c,m,E){var N=c[m];(!(qn.call(c,m)&&Ca(N,E))||E===t&&!(m in c))&&Ho(c,m,E)}function ys(c,m){for(var E=c.length;E--;)if(Ca(c[E][0],m))return E;return-1}function dl(c,m,E,N){return Mo(c,function(G,K,ce){m(N,G,E(G),ce)}),N}function as(c,m){return c&&cs(m,wi(m),c)}function fl(c,m){return c&&cs(m,ns(m),c)}function Ho(c,m,E){m=="__proto__"&&Ml?Ml(c,m,{configurable:!0,enumerable:!0,value:E,writable:!0}):c[m]=E}function Xh(c,m){for(var E=-1,N=m.length,G=Be(N),K=c==null;++E<N;)G[E]=K?t:vm(c,m[E]);return G}function Wa(c,m,E){return c===c&&(E!==t&&(c=c<=E?c:E),m!==t&&(c=c>=m?c:m)),c}function ki(c,m,E,N,G,K){var ce,_e=m&y,Ee=m&b,et=m&S;if(E&&(ce=G?E(c,N,G,K):E(c)),ce!==t)return ce;if(!ri(c))return c;var tt=kn(c);if(tt){if(ce=Km(c),!_e)return ni(c,ce)}else{var ct=hs(c),Rt=ct==Ce||ct==He;if(ah(c))return eh(c,_e);if(ct==kt||ct==qe||Rt&&!G){if(ce=Ee||Rt?{}:Ec(c),!_e)return Ee?yd(c,fl(ce,c)):qh(c,as(ce,c))}else{if(!Gn[ct])return G?c:{};ce=Zs(c,ct,_e)}}K||(K=new gi);var Xt=K.get(c);if(Xt)return Xt;K.set(c,ce),M_(c)?c.forEach(function(dn){ce.add(ki(dn,m,E,dn,c,K))}):td(c)&&c.forEach(function(dn,Yn){ce.set(Yn,ki(dn,m,E,Yn,c,K))});var pn=et?Ee?Ar:dr:Ee?ns:wi,Ln=tt?t:pn(c);return Xr(Ln||c,function(dn,Yn){Ln&&(Yn=dn,dn=c[Yn]),Co(ce,Yn,ki(dn,m,E,Yn,c,K))}),ce}function Nd(c){var m=wi(c);return function(E){return Xc(E,c,m)}}function Xc(c,m,E){var N=E.length;if(c==null)return!N;for(c=vn(c);N--;){var G=E[N],K=m[G],ce=c[G];if(ce===t&&!(G in c)||!K(ce))return!1}return!0}function Kh(c,m,E){if(typeof c!="function")throw new Ti(l);return gf(function(){c.apply(t,E)},m)}function Go(c,m,E,N){var G=-1,K=Pa,ce=!0,_e=c.length,Ee=[],et=m.length;if(!_e)return Ee;E&&(m=fr(m,Wr(E))),N?(K=vh,ce=!1):m.length>=s&&(K=Sr,ce=!1,m=new Uo(m));e:for(;++G<_e;){var tt=c[G],ct=E==null?tt:E(tt);if(tt=N||tt!==0?tt:0,ce&&ct===ct){for(var Rt=et;Rt--;)if(m[Rt]===ct)continue e;Ee.push(tt)}else K(m,ct,N)||Ee.push(tt)}return Ee}var Mo=Qh(ls),df=Qh(Va,!0);function Cu(c,m){var E=!0;return Mo(c,function(N,G,K){return E=!!m(N,G,K),E}),E}function Ol(c,m,E){for(var N=-1,G=c.length;++N<G;){var K=c[N],ce=m(K);if(ce!=null&&(_e===t?ce===ce&&!la(ce):E(ce,_e)))var _e=ce,Ee=K}return Ee}function _d(c,m,E,N){var G=c.length;for(E=Mn(E),E<0&&(E=-E>G?0:G+E),N=N===t||N>G?G:Mn(N),N<0&&(N+=G),N=E>N?0:I0(N);E<N;)c[E++]=m;return c}function vc(c,m){var E=[];return Mo(c,function(N,G,K){m(N,G,K)&&E.push(N)}),E}function Kr(c,m,E,N,G){var K=-1,ce=c.length;for(E||(E=Dd),G||(G=[]);++K<ce;){var _e=c[K];m>0&&E(_e)?m>1?Kr(_e,m-1,E,N,G):Zo(G,_e):N||(G[G.length]=_e)}return G}var ou=wc(),Ju=wc(!0);function ls(c,m){return c&&ou(c,m,wi)}function Va(c,m){return c&&Ju(c,m,wi)}function $s(c,m){return Vi(m,function(E){return Cc(c[E])})}function Cs(c,m){m=sa(m,c);for(var E=0,N=m.length;c!=null&&E<N;)c=c[yo(m[E++])];return E&&E==N?c:t}function Kc(c,m,E){var N=m(c);return kn(c)?N:Zo(N,E(c))}function _i(c){return c==null?c===t?$e:Nt:uo&&uo in vn(c)?gl(c):Mg(c)}function ja(c,m){return c>m}function yc(c,m){return c!=null&&qn.call(c,m)}function ff(c,m){return c!=null&&m in vn(c)}function Eh(c,m,E){return c>=Ii(m,E)&&c<ei(m,E)}function ia(c,m,E){for(var N=E?vh:Pa,G=c[0].length,K=c.length,ce=K,_e=Be(K),Ee=1/0,et=[];ce--;){var tt=c[ce];ce&&m&&(tt=fr(tt,Wr(m))),Ee=Ii(tt.length,Ee),_e[ce]=!E&&(m||G>=120&&tt.length>=120)?new Uo(ce&&tt):t}tt=c[0];var ct=-1,Rt=_e[0];e:for(;++ct<G&&et.length<Ee;){var Xt=tt[ct],pn=m?m(Xt):Xt;if(Xt=E||Xt!==0?Xt:0,!(Rt?Sr(Rt,pn):N(et,pn,E))){for(ce=K;--ce;){var Ln=_e[ce];if(!(Ln?Sr(Ln,pn):N(c[ce],pn,E)))continue e}Rt&&Rt.push(pn),et.push(Xt)}}return et}function Yi(c,m,E,N){return ls(c,function(G,K,ce){m(N,E(G),K,ce)}),N}function Pn(c,m,E){m=sa(m,c),c=$p(c,m);var N=c==null?c:c[yo(Ls(m))];return N==null?t:Vn(N,c,E)}function tr(c){return di(c)&&_i(c)==qe}function Nr(c){return di(c)&&_i(c)==It}function ti(c){return di(c)&&_i(c)==ft}function qr(c,m,E,N,G){return c===m?!0:c==null||m==null||!di(c)&&!di(m)?c!==c&&m!==m:Ao(c,m,E,N,qr,G)}function Ao(c,m,E,N,G,K){var ce=kn(c),_e=kn(m),Ee=ce?Re:hs(c),et=_e?Re:hs(m);Ee=Ee==qe?kt:Ee,et=et==qe?kt:et;var tt=Ee==kt,ct=et==kt,Rt=Ee==et;if(Rt&&ah(c)){if(!ah(m))return!1;ce=!0,tt=!1}if(Rt&&!tt)return K||(K=new gi),ce||Jd(c)?on(c,m,E,N,G,K):En(c,m,Ee,E,N,G,K);if(!(E&C)){var Xt=tt&&qn.call(c,"__wrapped__"),pn=ct&&qn.call(m,"__wrapped__");if(Xt||pn){var Ln=Xt?c.value():c,dn=pn?m.value():m;return K||(K=new gi),G(Ln,dn,E,N,K)}}return Rt?(K||(K=new gi),Rn(c,m,E,N,G,K)):!1}function us(c){return di(c)&&hs(c)==rt}function es(c,m,E,N){var G=E.length,K=G,ce=!N;if(c==null)return!K;for(c=vn(c);G--;){var _e=E[G];if(ce&&_e[2]?_e[1]!==c[_e[0]]:!(_e[0]in c))return!1}for(;++G<K;){_e=E[G];var Ee=_e[0],et=c[Ee],tt=_e[1];if(ce&&_e[2]){if(et===t&&!(Ee in c))return!1}else{var ct=new gi;if(N)var Rt=N(et,tt,Ee,c,m,ct);if(!(Rt===t?qr(tt,et,C|M,N,ct):Rt))return!1}}return!0}function au(c){if(!ri(c)||eo(c))return!1;var m=Cc(c)?Th:Br;return m.test(Ja(c))}function qu(c){return di(c)&&_i(c)==At}function bc(c){return di(c)&&hs(c)==mt}function Qu(c){return di(c)&&Ah(c.length)&&!!or[_i(c)]}function qs(c){return typeof c=="function"?c:c==null?Oo:typeof c=="object"?kn(c)?fo(c[0],c[1]):Au(c):H_(c)}function ho(c){if(!xc(c))return jh(c);var m=[];for(var E in vn(c))qn.call(c,E)&&E!="constructor"&&m.push(E);return m}function vd(c){if(!ri(c))return xa(c);var m=xc(c),E=[];for(var N in c)N=="constructor"&&(m||!qn.call(c,N))||E.push(N);return E}function ba(c,m){return c<m}function Mu(c,m){var E=-1,N=Hi(c)?Be(c.length):[];return Mo(c,function(G,K,ce){N[++E]=m(G,K,ce)}),N}function Au(c){var m=Zp(c);return m.length==1&&m[0][2]?em(m[0][0],m[0][1]):function(E){return E===c||es(E,c,m)}}function fo(c,m){return Ea(c)&&Ep(m)?em(yo(c),m):function(E){var N=vm(E,c);return N===t&&N===m?ym(E,c):qr(m,N,C|M)}}function po(c,m,E,N,G){c!==m&&ou(m,function(K,ce){if(G||(G=new gi),ri(K))Ll(c,m,ce,E,po,N,G);else{var _e=N?N(cu(c,ce),K,ce+"",c,m,G):t;_e===t&&(_e=K),su(c,ce,_e)}},ns)}function Ll(c,m,E,N,G,K,ce){var _e=cu(c,E),Ee=cu(m,E),et=ce.get(Ee);if(et){su(c,E,et);return}var tt=K?K(_e,Ee,E+"",c,m,ce):t,ct=tt===t;if(ct){var Rt=kn(Ee),Xt=!Rt&&ah(Ee),pn=!Rt&&!Xt&&Jd(Ee);tt=Ee,Rt||Xt||pn?kn(_e)?tt=_e:Jr(_e)?tt=ni(_e):Xt?(ct=!1,tt=eh(Ee,!0)):pn?(ct=!1,tt=Dl(Ee,!0)):tt=[]:Hr(Ee)||Yd(Ee)?(tt=_e,Yd(_e)?tt=ub(_e):(!ri(_e)||Cc(_e))&&(tt=Ec(Ee))):ct=!1}ct&&(ce.set(Ee,tt),G(tt,Ee,N,K,ce),ce.delete(Ee)),su(c,E,tt)}function Wo(c,m){var E=c.length;if(E)return m+=m<0?E:0,Ka(m,E)?c[m]:t}function Zu(c,m,E){m.length?m=fr(m,function(K){return kn(K)?function(ce){return Cs(ce,K.length===1?K[0]:K)}:K}):m=[Oo];var N=-1;m=fr(m,Wr(ln()));var G=Mu(c,function(K,ce,_e){var Ee=fr(m,function(et){return et(K)});return{criteria:Ee,index:++N,value:K}});return Fa(G,function(K,ce){return Pl(K,ce,E)})}function ec(c,m){return xh(c,m,function(E,N){return ym(c,N)})}function xh(c,m,E){for(var N=-1,G=m.length,K={};++N<G;){var ce=m[N],_e=Cs(c,ce);E(_e,ce)&&vi(K,sa(ce,c),_e)}return K}function $h(c){return function(m){return Cs(m,c)}}function Or(c,m,E,N){var G=N?Gu:ks,K=-1,ce=m.length,_e=c;for(c===m&&(m=ni(m)),E&&(_e=fr(c,Wr(E)));++K<ce;)for(var Ee=0,et=m[K],tt=E?E(et):et;(Ee=G(_e,tt,Ee,N))>-1;)_e!==c&&ju.call(_e,Ee,1),ju.call(c,Ee,1);return c}function bs(c,m){for(var E=c?m.length:0,N=E-1;E--;){var G=m[E];if(E==N||G!==K){var K=G;Ka(G)?ju.call(c,G,1):Qc(c,G)}}return c}function Os(c,m){return c+nu(Il()*(m-c+1))}function Ya(c,m,E,N){for(var G=-1,K=ei(Yu((m-c)/(E||1)),0),ce=Be(K);K--;)ce[N?K:++G]=c,c+=E;return ce}function Vs(c,m){var E="";if(!c||m<1||m>J)return E;do m%2&&(E+=c),m=nu(m/2),m&&(c+=c);while(m);return E}function fn(c,m){return Bd(tm(c,m,Oo),c+"")}function Jc(c){return hl(Tf(c))}function wn(c,m){var E=Tf(c);return pr(E,Wa(m,0,E.length))}function vi(c,m,E,N){if(!ri(c))return c;m=sa(m,c);for(var G=-1,K=m.length,ce=K-1,_e=c;_e!=null&&++G<K;){var Ee=yo(m[G]),et=E;if(Ee==="__proto__"||Ee==="constructor"||Ee==="prototype")return c;if(G!=ce){var tt=_e[Ee];et=N?N(tt,Ee,_e):t,et===t&&(et=ri(tt)?tt:Ka(m[G+1])?[]:{})}Co(_e,Ee,et),_e=_e[Ee]}return c}var Ms=Wc?function(c,m){return Wc.set(c,m),c}:Oo,lu=Ml?function(c,m){return Ml(c,"toString",{configurable:!0,enumerable:!1,value:F_(m),writable:!0})}:Oo;function Nl(c){return pr(Tf(c))}function Ft(c,m,E){var N=-1,G=c.length;m<0&&(m=-m>G?0:G+m),E=E>G?G:E,E<0&&(E+=G),G=m>E?0:E-m>>>0,m>>>=0;for(var K=Be(G);++N<G;)K[N]=c[N+m];return K}function pl(c,m){var E;return Mo(c,function(N,G,K){return E=m(N,G,K),!E}),!!E}function jr(c,m,E){var N=0,G=c==null?N:c.length;if(typeof m=="number"&&m===m&&G<=Fe){for(;N<G;){var K=N+G>>>1,ce=c[K];ce!==null&&!la(ce)&&(E?ce<=m:ce<m)?N=K+1:G=K}return G}return tc(c,m,Oo,E)}function tc(c,m,E,N){var G=0,K=c==null?0:c.length;if(K===0)return 0;m=E(m);for(var ce=m!==m,_e=m===null,Ee=la(m),et=m===t;G<K;){var tt=nu((G+K)/2),ct=E(c[tt]),Rt=ct!==t,Xt=ct===null,pn=ct===ct,Ln=la(ct);if(ce)var dn=N||pn;else et?dn=pn&&(N||Rt):_e?dn=pn&&Rt&&(N||!Xt):Ee?dn=pn&&Rt&&!Xt&&(N||!Ln):Xt||Ln?dn=!1:dn=N?ct<=m:ct<m;dn?G=tt+1:K=tt}return Ii(K,Te)}function Jh(c,m){for(var E=-1,N=c.length,G=0,K=[];++E<N;){var ce=c[E],_e=m?m(ce):ce;if(!E||!Ca(_e,Ee)){var Ee=_e;K[G++]=ce===0?0:ce}}return K}function qc(c){return typeof c=="number"?c:la(c)?ie:+c}function ai(c){if(typeof c=="string")return c;if(kn(c))return fr(c,ai)+"";if(la(c))return ma?ma.call(c):"";var m=c+"";return m=="0"&&1/c==-we?"-0":m}function Xi(c,m,E){var N=-1,G=Pa,K=c.length,ce=!0,_e=[],Ee=_e;if(E)ce=!1,G=vh;else if(K>=s){var et=m?null:Dr(c);if(et)return eu(et);ce=!1,G=Sr,Ee=new Uo}else Ee=m?[]:_e;e:for(;++N<K;){var tt=c[N],ct=m?m(tt):tt;if(tt=E||tt!==0?tt:0,ce&&ct===ct){for(var Rt=Ee.length;Rt--;)if(Ee[Rt]===ct)continue e;m&&Ee.push(ct),_e.push(tt)}else G(Ee,ct,E)||(Ee!==_e&&Ee.push(ct),_e.push(tt))}return _e}function Qc(c,m){return m=sa(m,c),c=$p(c,m),c==null||delete c[yo(Ls(m))]}function mo(c,m,E,N){return vi(c,m,E(Cs(c,m)),N)}function ml(c,m,E,N){for(var G=c.length,K=N?G:-1;(N?K--:++K<G)&&m(c[K],K,c););return E?Ft(c,N?0:K,N?K+1:G):Ft(c,N?K+1:0,N?G:K)}function Zc(c,m){var E=c;return E instanceof mn&&(E=E.value()),fd(m,function(N,G){return G.func.apply(G.thisArg,Zo([N],G.args))},E)}function Tc(c,m,E){var N=c.length;if(N<2)return N?Xi(c[0]):[];for(var G=-1,K=Be(N);++G<N;)for(var ce=c[G],_e=-1;++_e<N;)_e!=G&&(K[G]=Go(K[G]||ce,c[_e],m,E));return Xi(Kr(K,1),m,E)}function nc(c,m,E){for(var N=-1,G=c.length,K=m.length,ce={};++N<G;){var _e=N<K?m[N]:t;E(ce,c[N],_e)}return ce}function Io(c){return Jr(c)?c:[]}function Qs(c){return typeof c=="function"?c:Oo}function sa(c,m){return kn(c)?c:Ea(c,m)?[c]:_0(sr(c))}var Ch=fn;function go(c,m,E){var N=c.length;return E=E===t?N:E,!m&&E>=N?c:Ft(c,m,E)}var Iu=Vh||function(c){return wr.clearTimeout(c)};function eh(c,m){if(m)return c.slice();var E=c.length,N=Gh?Gh(E):new c.constructor(E);return c.copy(N),N}function Sc(c){var m=new c.constructor(c.byteLength);return new Hc(m).set(new Hc(c)),m}function Vo(c,m){var E=m?Sc(c.buffer):c.buffer;return new c.constructor(E,c.byteOffset,c.byteLength)}function _o(c){var m=new c.constructor(c.source,_r.exec(c));return m.lastIndex=c.lastIndex,m}function rc(c){return Qi?vn(Qi.call(c)):{}}function Dl(c,m){var E=m?Sc(c.buffer):c.buffer;return new c.constructor(E,c.byteOffset,c.length)}function vo(c,m){if(c!==m){var E=c!==t,N=c===null,G=c===c,K=la(c),ce=m!==t,_e=m===null,Ee=m===m,et=la(m);if(!_e&&!et&&!K&&c>m||K&&ce&&Ee&&!_e&&!et||N&&ce&&Ee||!E&&Ee||!G)return 1;if(!N&&!K&&!et&&c<m||et&&E&&G&&!N&&!K||_e&&E&&G||!ce&&G||!Ee)return-1}return 0}function Pl(c,m,E){for(var N=-1,G=c.criteria,K=m.criteria,ce=G.length,_e=E.length;++N<ce;){var Ee=vo(G[N],K[N]);if(Ee){if(N>=_e)return Ee;var et=E[N];return Ee*(et=="desc"?-1:1)}}return c.index-m.index}function Xa(c,m,E,N){for(var G=-1,K=c.length,ce=E.length,_e=-1,Ee=m.length,et=ei(K-ce,0),tt=Be(Ee+et),ct=!N;++_e<Ee;)tt[_e]=m[_e];for(;++G<ce;)(ct||G<K)&&(tt[E[G]]=c[G]);for(;et--;)tt[_e++]=c[G++];return tt}function uu(c,m,E,N){for(var G=-1,K=c.length,ce=-1,_e=E.length,Ee=-1,et=m.length,tt=ei(K-_e,0),ct=Be(tt+et),Rt=!N;++G<tt;)ct[G]=c[G];for(var Xt=G;++Ee<et;)ct[Xt+Ee]=m[Ee];for(;++ce<_e;)(Rt||G<K)&&(ct[Xt+E[ce]]=c[G++]);return ct}function ni(c,m){var E=-1,N=c.length;for(m||(m=Be(N));++E<N;)m[E]=c[E];return m}function cs(c,m,E,N){var G=!E;E||(E={});for(var K=-1,ce=m.length;++K<ce;){var _e=m[K],Ee=N?N(E[_e],c[_e],_e,E,c):t;Ee===t&&(Ee=c[_e]),G?Ho(E,_e,Ee):Co(E,_e,Ee)}return E}function qh(c,m){return cs(c,mf(c),m)}function yd(c,m){return cs(c,Zh(c),m)}function Ta(c,m){return function(E,N){var G=kn(E)?Mi:dl,K=m?m():{};return G(E,c,ln(N,2),K)}}function Sa(c){return fn(function(m,E){var N=-1,G=E.length,K=G>1?E[G-1]:t,ce=G>2?E[2]:t;for(K=c.length>3&&typeof K=="function"?(G--,K):t,ce&&Ur(E[0],E[1],ce)&&(K=G<3?t:K,G=1),m=vn(m);++N<G;){var _e=E[N];_e&&c(m,_e,N,K)}return m})}function Qh(c,m){return function(E,N){if(E==null)return E;if(!Hi(E))return c(E,N);for(var G=E.length,K=m?G:-1,ce=vn(E);(m?K--:++K<G)&&N(ce[K],K,ce)!==!1;);return E}}function wc(c){return function(m,E,N){for(var G=-1,K=vn(m),ce=N(m),_e=ce.length;_e--;){var Ee=ce[c?_e:++G];if(E(K[Ee],Ee,K)===!1)break}return m}}function Hf(c,m,E){var N=m&A,G=_(c);function K(){var ce=this&&this!==wr&&this instanceof K?G:c;return ce.apply(N?E:this,arguments)}return K}function x(c){return function(m){m=sr(m);var E=ol(m)?Fr(m):t,N=E?E[0]:m.charAt(0),G=E?go(E,1).join(""):m.slice(1);return N[c]()+G}}function d(c){return function(m){return fd(wb(zv(m).replace(qi,"")),c,"")}}function _(c){return function(){var m=arguments;switch(m.length){case 0:return new c;case 1:return new c(m[0]);case 2:return new c(m[0],m[1]);case 3:return new c(m[0],m[1],m[2]);case 4:return new c(m[0],m[1],m[2],m[3]);case 5:return new c(m[0],m[1],m[2],m[3],m[4]);case 6:return new c(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new c(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var E=xs(c.prototype),N=c.apply(E,m);return ri(N)?N:E}}function $(c,m,E){var N=_(c);function G(){for(var K=arguments.length,ce=Be(K),_e=K,Ee=Mh(G);_e--;)ce[_e]=arguments[_e];var et=K<3&&ce[0]!==Ee&&ce[K-1]!==Ee?[]:Us(ce,Ee);if(K-=et.length,K<E)return Tn(c,m,W,G.placeholder,t,ce,et,t,t,E-K);var tt=this&&this!==wr&&this instanceof G?N:c;return Vn(tt,this,ce)}return G}function I(c){return function(m,E,N){var G=vn(m);if(!Hi(m)){var K=ln(E,3);m=wi(m),E=function(_e){return K(G[_e],_e,G)}}var ce=c(m,E,N);return ce>-1?G[K?m[ce]:ce]:t}}function P(c){return Fn(function(m){var E=m.length,N=E,G=Mr.prototype.thru;for(c&&m.reverse();N--;){var K=m[N];if(typeof K!="function")throw new Ti(l);if(G&&!ce&&pf(K)=="wrapper")var ce=new Mr([],!0)}for(N=ce?N:E;++N<E;){K=m[N];var _e=pf(K),Ee=_e=="wrapper"?Bl(K):t;Ee&&Oi(Ee[0])&&Ee[1]==(V|B|z|H)&&!Ee[4].length&&Ee[9]==1?ce=ce[pf(Ee[0])].apply(ce,Ee[3]):ce=K.length==1&&Oi(K)?ce[_e]():ce.thru(K)}return function(){var et=arguments,tt=et[0];if(ce&&et.length==1&&kn(tt))return ce.plant(tt).value();for(var ct=0,Rt=E?m[ct].apply(this,et):tt;++ct<E;)Rt=m[ct].call(this,Rt);return Rt}})}function W(c,m,E,N,G,K,ce,_e,Ee,et){var tt=m&V,ct=m&A,Rt=m&O,Xt=m&(B|D),pn=m&oe,Ln=Rt?t:_(c);function dn(){for(var Yn=arguments.length,er=Be(Yn),ua=Yn;ua--;)er[ua]=arguments[ua];if(Xt)var to=Mh(dn),Ds=Eu(er,to);if(N&&(er=Xa(er,N,G,Xt)),K&&(er=uu(er,K,ce,Xt)),Yn-=Ds,Xt&&Yn<et){var yi=Us(er,to);return Tn(c,m,W,dn.placeholder,E,er,yi,_e,Ee,et-Yn)}var Hl=ct?E:this,Ac=Rt?Hl[c]:c;return Yn=er.length,_e?er=_l(er,_e):pn&&Yn>1&&er.reverse(),tt&&Ee<Yn&&(er.length=Ee),this&&this!==wr&&this instanceof dn&&(Ac=Ln||_(Ac)),Ac.apply(Hl,er)}return dn}function de(c,m){return function(E,N){return Yi(E,c,m(N),{})}}function Oe(c,m){return function(E,N){var G;if(E===t&&N===t)return m;if(E!==t&&(G=E),N!==t){if(G===t)return N;typeof E=="string"||typeof N=="string"?(E=ai(E),N=ai(N)):(E=qc(E),N=qc(N)),G=c(E,N)}return G}}function Ze(c){return Fn(function(m){return m=fr(m,Wr(ln())),fn(function(E){var N=this;return c(m,function(G){return Vn(G,N,E)})})})}function wt(c,m){m=m===t?" ":ai(m);var E=m.length;if(E<2)return E?Vs(m,c):m;var N=Vs(m,Yu(c/is(m)));return ol(m)?go(Fr(N),0,c).join(""):N.slice(0,c)}function Qt(c,m,E,N){var G=m&A,K=_(c);function ce(){for(var _e=-1,Ee=arguments.length,et=-1,tt=N.length,ct=Be(tt+Ee),Rt=this&&this!==wr&&this instanceof ce?K:c;++et<tt;)ct[et]=N[et];for(;Ee--;)ct[et++]=arguments[++_e];return Vn(Rt,G?E:this,ct)}return ce}function cn(c){return function(m,E,N){return N&&typeof N!="number"&&Ur(m,E,N)&&(E=N=t),m=Mc(m),E===t?(E=m,m=0):E=Mc(E),N=N===t?m<E?1:-1:Mc(N),Ya(m,E,N,c)}}function bn(c){return function(m,E){return typeof m=="string"&&typeof E=="string"||(m=Ki(m),E=Ki(E)),c(m,E)}}function Tn(c,m,E,N,G,K,ce,_e,Ee,et){var tt=m&B,ct=tt?ce:t,Rt=tt?t:ce,Xt=tt?K:t,pn=tt?t:K;m|=tt?z:U,m&=~(tt?U:z),m&L||(m&=~(A|O));var Ln=[c,m,G,Xt,ct,pn,Rt,_e,Ee,et],dn=E.apply(t,Ln);return Oi(c)&&Pd(dn,Ln),dn.placeholder=N,nh(dn,c,m)}function gn(c){var m=Jn[c];return function(E,N){if(E=Ki(E),N=N==null?0:Ii(Mn(N),292),N&&Al(E)){var G=(sr(E)+"e").split("e"),K=m(G[0]+"e"+(+G[1]+N));return G=(sr(K)+"e").split("e"),+(G[0]+"e"+(+G[1]-N))}return m(E)}}var Dr=ll&&1/eu(new ll([,-0]))[1]==we?function(c){return new ll(c)}:z0;function Tt(c){return function(m){var E=hs(m);return E==rt?Vu(m):E==mt?Uh(m):Ql(m,c(m))}}function Me(c,m,E,N,G,K,ce,_e){var Ee=m&O;if(!Ee&&typeof c!="function")throw new Ti(l);var et=N?N.length:0;if(et||(m&=~(z|U),N=G=t),ce=ce===t?ce:ei(Mn(ce),0),_e=_e===t?_e:Mn(_e),et-=G?G.length:0,m&U){var tt=N,ct=G;N=G=t}var Rt=Ee?t:Bl(c),Xt=[c,m,E,N,G,tt,ct,K,ce,_e];if(Rt&&xp(Xt,Rt),c=Xt[0],m=Xt[1],E=Xt[2],N=Xt[3],G=Xt[4],_e=Xt[9]=Xt[9]===t?Ee?0:c.length:ei(Xt[9]-et,0),!_e&&m&(B|D)&&(m&=~(B|D)),!m||m==A)var pn=Hf(c,m,E);else m==B||m==D?pn=$(c,m,_e):(m==z||m==(A|z))&&!G.length?pn=Qt(c,m,E,N):pn=W.apply(t,Xt);var Ln=Rt?Ms:Pd;return nh(Ln(pn,Xt),c,m)}function Ne(c,m,E,N){return c===t||Ca(c,Fi[E])&&!qn.call(N,E)?m:c}function st(c,m,E,N,G,K){return ri(c)&&ri(m)&&(K.set(m,c),po(c,m,t,st,K),K.delete(m)),c}function Ht(c){return Hr(c)?t:c}function on(c,m,E,N,G,K){var ce=E&C,_e=c.length,Ee=m.length;if(_e!=Ee&&!(ce&&Ee>_e))return!1;var et=K.get(c),tt=K.get(m);if(et&&tt)return et==m&&tt==c;var ct=-1,Rt=!0,Xt=E&M?new Uo:t;for(K.set(c,m),K.set(m,c);++ct<_e;){var pn=c[ct],Ln=m[ct];if(N)var dn=ce?N(Ln,pn,ct,m,c,K):N(pn,Ln,ct,c,m,K);if(dn!==t){if(dn)continue;Rt=!1;break}if(Xt){if(!Bc(m,function(Yn,er){if(!Sr(Xt,er)&&(pn===Yn||G(pn,Yn,E,N,K)))return Xt.push(er)})){Rt=!1;break}}else if(!(pn===Ln||G(pn,Ln,E,N,K))){Rt=!1;break}}return K.delete(c),K.delete(m),Rt}function En(c,m,E,N,G,K,ce){switch(E){case pt:if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case It:return!(c.byteLength!=m.byteLength||!K(new Hc(c),new Hc(m)));case nt:case ft:case it:return Ca(+c,+m);case ze:return c.name==m.name&&c.message==m.message;case At:case xe:return c==m+"";case rt:var _e=Vu;case mt:var Ee=N&C;if(_e||(_e=eu),c.size!=m.size&&!Ee)return!1;var et=ce.get(c);if(et)return et==m;N|=M,ce.set(c,m);var tt=on(_e(c),_e(m),N,G,K,ce);return ce.delete(c),tt;case se:if(Qi)return Qi.call(c)==Qi.call(m)}return!1}function Rn(c,m,E,N,G,K){var ce=E&C,_e=dr(c),Ee=_e.length,et=dr(m),tt=et.length;if(Ee!=tt&&!ce)return!1;for(var ct=Ee;ct--;){var Rt=_e[ct];if(!(ce?Rt in m:qn.call(m,Rt)))return!1}var Xt=K.get(c),pn=K.get(m);if(Xt&&pn)return Xt==m&&pn==c;var Ln=!0;K.set(c,m),K.set(m,c);for(var dn=ce;++ct<Ee;){Rt=_e[ct];var Yn=c[Rt],er=m[Rt];if(N)var ua=ce?N(er,Yn,Rt,m,c,K):N(Yn,er,Rt,c,m,K);if(!(ua===t?Yn===er||G(Yn,er,E,N,K):ua)){Ln=!1;break}dn||(dn=Rt=="constructor")}if(Ln&&!dn){var to=c.constructor,Ds=m.constructor;to!=Ds&&"constructor"in c&&"constructor"in m&&!(typeof to=="function"&&to instanceof to&&typeof Ds=="function"&&Ds instanceof Ds)&&(Ln=!1)}return K.delete(c),K.delete(m),Ln}function Fn(c){return Bd(tm(c,t,_f),c+"")}function dr(c){return Kc(c,wi,mf)}function Ar(c){return Kc(c,ns,Zh)}var Bl=Wc?function(c){return Wc.get(c)}:z0;function pf(c){for(var m=c.name+"",E=kl[m],N=qn.call(kl,m)?E.length:0;N--;){var G=E[N],K=G.func;if(K==null||K==c)return G.name}return m}function Mh(c){var m=qn.call(X,"placeholder")?X:c;return m.placeholder}function ln(){var c=X.iteratee||Ji;return c=c===Ji?qs:c,arguments.length?c(arguments[0],arguments[1]):c}function th(c,m){var E=c.__data__;return Ve(m)?E[typeof m=="string"?"string":"hash"]:E.map}function Zp(c){for(var m=wi(c),E=m.length;E--;){var N=m[E],G=c[N];m[E]=[N,G,Ep(G)]}return m}function wa(c,m){var E=Wu(c,m);return au(E)?E:t}function gl(c){var m=qn.call(c,uo),E=c[uo];try{c[uo]=t;var N=!0}catch{}var G=Hs.call(c);return N&&(m?c[uo]=E:delete c[uo]),G}var mf=Gc?function(c){return c==null?[]:(c=vn(c),Vi(Gc(c),function(m){return mc.call(c,m)}))}:U0,Zh=Gc?function(c){for(var m=[];c;)Zo(m,mf(c)),c=Ha(c);return m}:U0,hs=_i;(Xu&&hs(new Xu(new ArrayBuffer(1)))!=pt||Ku&&hs(new Ku)!=rt||Sh&&hs(Sh.resolve())!=vt||ll&&hs(new ll)!=mt||na&&hs(new na)!=ht)&&(hs=function(c){var m=_i(c),E=m==kt?c.constructor:t,N=E?Ja(E):"";if(N)switch(N){case Vc:return pt;case gc:return rt;case kd:return vt;case Ga:return mt;case Vr:return ht}return m});function _n(c,m,E){for(var N=-1,G=E.length;++N<G;){var K=E[N],ce=K.size;switch(K.type){case"drop":c+=ce;break;case"dropRight":m-=ce;break;case"take":m=Ii(m,c+ce);break;case"takeRight":c=ei(c,m-ce);break}}return{start:c,end:m}}function g0(c){var m=c.match(gt);return m?m[1].split(Ct):[]}function Cg(c,m,E){m=sa(m,c);for(var N=-1,G=m.length,K=!1;++N<G;){var ce=yo(m[N]);if(!(K=c!=null&&E(c,ce)))break;c=c[ce]}return K||++N!=G?K:(G=c==null?0:c.length,!!G&&Ah(G)&&Ka(ce,G)&&(kn(c)||Yd(c)))}function Km(c){var m=c.length,E=new c.constructor(m);return m&&typeof c[0]=="string"&&qn.call(c,"index")&&(E.index=c.index,E.input=c.input),E}function Ec(c){return typeof c.constructor=="function"&&!xc(c)?xs(Ha(c)):{}}function Zs(c,m,E){var N=c.constructor;switch(m){case It:return Sc(c);case nt:case ft:return new N(+c);case pt:return Vo(c,E);case Ke:case Le:case Q:case te:case me:case ke:case Xe:case Wt:case Ge:return Dl(c,E);case rt:return new N;case it:case xe:return new N(c);case At:return _o(c);case mt:return new N;case se:return rc(c)}}function Gf(c,m){var E=m.length;if(!E)return c;var N=E-1;return m[N]=(E>1?"& ":"")+m[N],m=m.join(E>2?", ":" "),c.replace(De,`{
/* [wrapped with `+m+`] */
`)}function Dd(c){return kn(c)||Yd(c)||!!(md&&c&&c[md])}function Ka(c,m){var E=typeof c;return m=m??J,!!m&&(E=="number"||E!="symbol"&&Ss.test(c))&&c>-1&&c%1==0&&c<m}function Ur(c,m,E){if(!ri(E))return!1;var N=typeof m;return(N=="number"?Hi(E)&&Ka(m,E.length):N=="string"&&m in E)?Ca(E[m],c):!1}function Ea(c,m){if(kn(c))return!1;var E=typeof c;return E=="number"||E=="symbol"||E=="boolean"||c==null||la(c)?!0:Se.test(c)||!ne.test(c)||m!=null&&c in vn(m)}function Ve(c){var m=typeof c;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null}function Oi(c){var m=pf(c),E=X[m];if(typeof E!="function"||!(m in mn.prototype))return!1;if(c===E)return!0;var N=Bl(E);return!!N&&c===N[0]}function eo(c){return!!Ks&&Ks in c}var T_=vs?Cc:Sm;function xc(c){var m=c&&c.constructor,E=typeof m=="function"&&m.prototype||Fi;return c===E}function Ep(c){return c===c&&!ri(c)}function em(c,m){return function(E){return E==null?!1:E[c]===m&&(m!==t||c in vn(E))}}function S_(c){var m=dt(c,function(N){return E.size===f&&E.clear(),N}),E=m.cache;return m}function xp(c,m){var E=c[1],N=m[1],G=E|N,K=G<(A|O|V),ce=N==V&&E==B||N==V&&E==H&&c[7].length<=m[8]||N==(V|H)&&m[7].length<=m[8]&&E==B;if(!(K||ce))return c;N&A&&(c[2]=m[2],G|=E&A?0:L);var _e=m[3];if(_e){var Ee=c[3];c[3]=Ee?Xa(Ee,_e,m[4]):_e,c[4]=Ee?Us(c[3],g):m[4]}return _e=m[5],_e&&(Ee=c[5],c[5]=Ee?uu(Ee,_e,m[6]):_e,c[6]=Ee?Us(c[5],g):m[6]),_e=m[7],_e&&(c[7]=_e),N&V&&(c[8]=c[8]==null?m[8]:Ii(c[8],m[8])),c[9]==null&&(c[9]=m[9]),c[0]=m[0],c[1]=G,c}function xa(c){var m=[];if(c!=null)for(var E in vn(c))m.push(E);return m}function Mg(c){return Hs.call(c)}function tm(c,m,E){return m=ei(m===t?c.length-1:m,0),function(){for(var N=arguments,G=-1,K=ei(N.length-m,0),ce=Be(K);++G<K;)ce[G]=N[m+G];G=-1;for(var _e=Be(m+1);++G<m;)_e[G]=N[G];return _e[m]=E(ce),Vn(c,this,_e)}}function $p(c,m){return m.length<2?c:Cs(c,Ft(m,0,-1))}function _l(c,m){for(var E=c.length,N=Ii(m.length,E),G=ni(c);N--;){var K=m[N];c[N]=Ka(K,E)?G[K]:t}return c}function cu(c,m){if(!(m==="constructor"&&typeof c[m]=="function")&&m!="__proto__")return c[m]}var Pd=Ag(Ms),gf=gd||function(c,m){return wr.setTimeout(c,m)},Bd=Ag(lu);function nh(c,m,E){var N=m+"";return Bd(c,Gf(N,nm(g0(N),E)))}function Ag(c){var m=0,E=0;return function(){var N=Sp(),G=he-(N-E);if(E=N,G>0){if(++m>=q)return arguments[0]}else m=0;return c.apply(t,arguments)}}function pr(c,m){var E=-1,N=c.length,G=N-1;for(m=m===t?N:m;++E<m;){var K=Os(E,G),ce=c[K];c[K]=c[E],c[E]=ce}return c.length=m,c}var _0=S_(function(c){var m=[];return c.charCodeAt(0)===46&&m.push(""),c.replace(We,function(E,N,G,K){m.push(G?K.replace(Wn,"$1"):N||E)}),m});function yo(c){if(typeof c=="string"||la(c))return c;var m=c+"";return m=="0"&&1/c==-we?"-0":m}function Ja(c){if(c!=null){try{return $u.call(c)}catch{}try{return c+""}catch{}}return""}function nm(c,m){return Xr(Ie,function(E){var N="_."+E[0];m&E[1]&&!Pa(c,N)&&c.push(N)}),c.sort()}function Fd(c){if(c instanceof mn)return c.clone();var m=new Mr(c.__wrapped__,c.__chain__);return m.__actions__=ni(c.__actions__),m.__index__=c.__index__,m.__values__=c.__values__,m}function rm(c,m,E){(E?Ur(c,m,E):m===t)?m=1:m=ei(Mn(m),0);var N=c==null?0:c.length;if(!N||m<1)return[];for(var G=0,K=0,ce=Be(Yu(N/m));G<N;)ce[K++]=Ft(c,G,G+=m);return ce}function Ru(c){for(var m=-1,E=c==null?0:c.length,N=0,G=[];++m<E;){var K=c[m];K&&(G[N++]=K)}return G}function v0(){var c=arguments.length;if(!c)return[];for(var m=Be(c-1),E=arguments[0],N=c;N--;)m[N-1]=arguments[N];return Zo(kn(E)?ni(E):[E],Kr(m,1))}var jo=fn(function(c,m){return Jr(c)?Go(c,Kr(m,1,Jr,!0)):[]}),ts=fn(function(c,m){var E=Ls(m);return Jr(E)&&(E=t),Jr(c)?Go(c,Kr(m,1,Jr,!0),ln(E,2)):[]}),hu=fn(function(c,m){var E=Ls(m);return Jr(E)&&(E=t),Jr(c)?Go(c,Kr(m,1,Jr,!0),t,E):[]});function vl(c,m,E){var N=c==null?0:c.length;return N?(m=E||m===t?1:Mn(m),Ft(c,m<0?0:m,N)):[]}function ku(c,m,E){var N=c==null?0:c.length;return N?(m=E||m===t?1:Mn(m),m=N-m,Ft(c,0,m<0?0:m)):[]}function du(c,m){return c&&c.length?ml(c,ln(m,3),!0,!0):[]}function Cp(c,m){return c&&c.length?ml(c,ln(m,3),!0):[]}function Fl(c,m,E,N){var G=c==null?0:c.length;return G?(E&&typeof E!="number"&&Ur(c,m,E)&&(E=0,N=G),_d(c,m,E,N)):[]}function zd(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=E==null?0:Mn(E);return G<0&&(G=ei(N+G,0)),Jl(c,ln(m,3),G)}function Ud(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=N-1;return E!==t&&(G=Mn(E),G=E<0?ei(N+G,0):Ii(G,N-1)),Jl(c,ln(m,3),G,!0)}function _f(c){var m=c==null?0:c.length;return m?Kr(c,1):[]}function Ig(c){var m=c==null?0:c.length;return m?Kr(c,we):[]}function im(c,m){var E=c==null?0:c.length;return E?(m=m===t?1:Mn(m),Kr(c,m)):[]}function rh(c){for(var m=-1,E=c==null?0:c.length,N={};++m<E;){var G=c[m];N[G[0]]=G[1]}return N}function yl(c){return c&&c.length?c[0]:t}function ih(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=E==null?0:Mn(E);return G<0&&(G=ei(N+G,0)),ks(c,m,G)}function Hd(c){var m=c==null?0:c.length;return m?Ft(c,0,-1):[]}var Jm=fn(function(c){var m=fr(c,Io);return m.length&&m[0]===c[0]?ia(m):[]}),qm=fn(function(c){var m=Ls(c),E=fr(c,Io);return m===Ls(E)?m=t:E.pop(),E.length&&E[0]===c[0]?ia(E,ln(m,2)):[]}),bo=fn(function(c){var m=Ls(c),E=fr(c,Io);return m=typeof m=="function"?m:t,m&&E.pop(),E.length&&E[0]===c[0]?ia(E,t,m):[]});function sm(c,m){return c==null?"":Rd.call(c,m)}function Ls(c){var m=c==null?0:c.length;return m?c[m-1]:t}function zl(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=N;return E!==t&&(G=Mn(E),G=G<0?ei(N+G,0):Ii(G,N-1)),m===m?Uc(c,m,G):Jl(c,yh,G,!0)}function Mp(c,m){return c&&c.length?Wo(c,Mn(m)):t}var Rg=fn(Gd);function Gd(c,m){return c&&c.length&&m&&m.length?Or(c,m):c}function Qm(c,m,E){return c&&c.length&&m&&m.length?Or(c,m,ln(E,2)):c}function $c(c,m,E){return c&&c.length&&m&&m.length?Or(c,m,t,E):c}var Wd=Fn(function(c,m){var E=c==null?0:c.length,N=Xh(c,m);return bs(c,fr(m,function(G){return Ka(G,E)?+G:G}).sort(vo)),N});function oa(c,m){var E=[];if(!(c&&c.length))return E;var N=-1,G=[],K=c.length;for(m=ln(m,3);++N<K;){var ce=c[N];m(ce,N,c)&&(E.push(ce),G.push(N))}return bs(c,G),E}function $a(c){return c==null?c:ru.call(c)}function w_(c,m,E){var N=c==null?0:c.length;return N?(E&&typeof E!="number"&&Ur(c,m,E)?(m=0,E=N):(m=m==null?0:Mn(m),E=E===t?N:Mn(E)),Ft(c,m,E)):[]}function om(c,m){return jr(c,m)}function y0(c,m,E){return tc(c,m,ln(E,2))}function Av(c,m){var E=c==null?0:c.length;if(E){var N=jr(c,m);if(N<E&&Ca(c[N],m))return N}return-1}function Wf(c,m){return jr(c,m,!0)}function Ap(c,m,E){return tc(c,m,ln(E,2),!0)}function b0(c,m){var E=c==null?0:c.length;if(E){var N=jr(c,m,!0)-1;if(Ca(c[N],m))return N}return-1}function Ip(c){return c&&c.length?Jh(c):[]}function T0(c,m){return c&&c.length?Jh(c,ln(m,2)):[]}function am(c){var m=c==null?0:c.length;return m?Ft(c,1,m):[]}function S0(c,m,E){return c&&c.length?(m=E||m===t?1:Mn(m),Ft(c,0,m<0?0:m)):[]}function E_(c,m,E){var N=c==null?0:c.length;return N?(m=E||m===t?1:Mn(m),m=N-m,Ft(c,m<0?0:m,N)):[]}function lm(c,m){return c&&c.length?ml(c,ln(m,3),!1,!0):[]}function vf(c,m){return c&&c.length?ml(c,ln(m,3)):[]}var x_=fn(function(c){return Xi(Kr(c,1,Jr,!0))}),ib=fn(function(c){var m=Ls(c);return Jr(m)&&(m=t),Xi(Kr(c,1,Jr,!0),ln(m,2))}),w0=fn(function(c){var m=Ls(c);return m=typeof m=="function"?m:t,Xi(Kr(c,1,Jr,!0),t,m)});function E0(c){return c&&c.length?Xi(c):[]}function Vf(c,m){return c&&c.length?Xi(c,ln(m,2)):[]}function zn(c,m){return m=typeof m=="function"?m:t,c&&c.length?Xi(c,t,m):[]}function sh(c){if(!(c&&c.length))return[];var m=0;return c=Vi(c,function(E){if(Jr(E))return m=ei(E.length,m),!0}),ql(m,function(E){return fr(c,ci(E))})}function Rp(c,m){if(!(c&&c.length))return[];var E=sh(c);return m==null?E:fr(E,function(N){return Vn(m,t,N)})}var aa=fn(function(c,m){return Jr(c)?Go(c,m):[]}),$_=fn(function(c){return Tc(Vi(c,Jr))}),x0=fn(function(c){var m=Ls(c);return Jr(m)&&(m=t),Tc(Vi(c,Jr),ln(m,2))}),um=fn(function(c){var m=Ls(c);return m=typeof m=="function"?m:t,Tc(Vi(c,Jr),t,m)}),sb=fn(sh);function Iv(c,m){return nc(c||[],m||[],Co)}function oh(c,m){return nc(c||[],m||[],vi)}var To=fn(function(c){var m=c.length,E=m>1?c[m-1]:t;return E=typeof E=="function"?(c.pop(),E):t,Rp(c,E)});function Ou(c){var m=X(c);return m.__chain__=!0,m}function kg(c,m){return m(c),c}function jf(c,m){return m(c)}var ed=Fn(function(c){var m=c.length,E=m?c[0]:0,N=this.__wrapped__,G=function(K){return Xh(K,c)};return m>1||this.__actions__.length||!(N instanceof mn)||!Ka(E)?this.thru(G):(N=N.slice(E,+E+(m?1:0)),N.__actions__.push({func:jf,args:[G],thisArg:t}),new Mr(N,this.__chain__).thru(function(K){return m&&!K.length&&K.push(t),K}))});function cm(){return Ou(this)}function Yf(){return new Mr(this.value(),this.__chain__)}function Xf(){this.__values__===t&&(this.__values__=Pv(this.value()));var c=this.__index__>=this.__values__.length,m=c?t:this.__values__[this.__index__++];return{done:c,value:m}}function kp(){return this}function bd(c){for(var m,E=this;E instanceof ga;){var N=Fd(E);N.__index__=0,N.__values__=t,m?G.__wrapped__=N:m=N;var G=N;E=E.__wrapped__}return G.__wrapped__=c,m}function yf(){var c=this.__wrapped__;if(c instanceof mn){var m=c;return this.__actions__.length&&(m=new mn(this)),m=m.reverse(),m.__actions__.push({func:jf,args:[$a],thisArg:t}),new Mr(m,this.__chain__)}return this.thru($a)}function Zm(){return Zc(this.__wrapped__,this.__actions__)}var Rv=Ta(function(c,m,E){qn.call(c,E)?++c[E]:Ho(c,E,1)});function Og(c,m,E){var N=kn(c)?wu:Cu;return E&&Ur(c,m,E)&&(m=t),N(c,ln(m,3))}function Vd(c,m){var E=kn(c)?Vi:vc;return E(c,ln(m,3))}var Li=I(zd),hm=I(Ud);function eg(c,m){return Kr(Si(c,m),1)}function Lg(c,m){return Kr(Si(c,m),we)}function kv(c,m,E){return E=E===t?1:Mn(E),Kr(Si(c,m),E)}function tg(c,m){var E=kn(c)?Xr:Mo;return E(c,ln(m,3))}function Op(c,m){var E=kn(c)?dd:df;return E(c,ln(m,3))}var ng=Ta(function(c,m,E){qn.call(c,E)?c[E].push(m):Ho(c,E,[m])});function Kf(c,m,E,N){c=Hi(c)?c:Tf(c),E=E&&!N?Mn(E):0;var G=c.length;return E<0&&(E=ei(G+E,0)),_m(c)?E<=G&&c.indexOf(m,E)>-1:!!G&&ks(c,m,E)>-1}var Jf=fn(function(c,m,E){var N=-1,G=typeof m=="function",K=Hi(c)?Be(c.length):[];return Mo(c,function(ce){K[++N]=G?Vn(m,ce,E):Pn(ce,m,E)}),K}),dm=Ta(function(c,m,E){Ho(c,E,m)});function Si(c,m){var E=kn(c)?fr:Mu;return E(c,ln(m,3))}function qf(c,m,E,N){return c==null?[]:(kn(m)||(m=m==null?[]:[m]),E=N?t:E,kn(E)||(E=E==null?[]:[E]),Zu(c,m,E))}var fm=Ta(function(c,m,E){c[E?0:1].push(m)},function(){return[[],[]]});function pm(c,m,E){var N=kn(c)?fd:oo,G=arguments.length<3;return N(c,ln(m,4),E,G,Mo)}function Lp(c,m,E){var N=kn(c)?lf:oo,G=arguments.length<3;return N(c,ln(m,4),E,G,df)}function Ng(c,m){var E=kn(c)?Vi:vc;return E(c,Et(ln(m,3)))}function v(c){var m=kn(c)?hl:Jc;return m(c)}function T(c,m,E){(E?Ur(c,m,E):m===t)?m=1:m=Mn(m);var N=kn(c)?_c:wn;return N(c,m)}function R(c){var m=kn(c)?wp:Nl;return m(c)}function F(c){if(c==null)return 0;if(Hi(c))return _m(c)?is(c):c.length;var m=hs(c);return m==rt||m==mt?c.size:ho(c).length}function Y(c,m,E){var N=kn(c)?Bc:pl;return E&&Ur(c,m,E)&&(m=t),N(c,ln(m,3))}var ee=fn(function(c,m){if(c==null)return[];var E=m.length;return E>1&&Ur(c,m[0],m[1])?m=[]:E>2&&Ur(m[0],m[1],m[2])&&(m=[m[0]]),Zu(c,Kr(m,1),[])}),be=zi||function(){return wr.Date.now()};function Ye(c,m){if(typeof m!="function")throw new Ti(l);return c=Mn(c),function(){if(--c<1)return m.apply(this,arguments)}}function at(c,m,E){return m=E?t:m,m=c&&m==null?c.length:m,Me(c,V,t,t,t,t,m)}function Lt(c,m){var E;if(typeof m!="function")throw new Ti(l);return c=Mn(c),function(){return--c>0&&(E=m.apply(this,arguments)),c<=1&&(m=t),E}}var Zt=fn(function(c,m,E){var N=A;if(E.length){var G=Us(E,Mh(Zt));N|=z}return Me(c,N,m,E,G)}),hn=fn(function(c,m,E){var N=A|O;if(E.length){var G=Us(E,Mh(hn));N|=z}return Me(m,N,c,E,G)});function an(c,m,E){m=E?t:m;var N=Me(c,B,t,t,t,t,t,m);return N.placeholder=an.placeholder,N}function Dn(c,m,E){m=E?t:m;var N=Me(c,D,t,t,t,t,t,m);return N.placeholder=Dn.placeholder,N}function Zn(c,m,E){var N,G,K,ce,_e,Ee,et=0,tt=!1,ct=!1,Rt=!0;if(typeof c!="function")throw new Ti(l);m=Ki(m)||0,ri(E)&&(tt=!!E.leading,ct="maxWait"in E,K=ct?ei(Ki(E.maxWait)||0,m):K,Rt="trailing"in E?!!E.trailing:Rt);function Xt(yi){var Hl=N,Ac=G;return N=G=t,et=yi,ce=c.apply(Ac,Hl),ce}function pn(yi){return et=yi,_e=gf(Yn,m),tt?Xt(yi):ce}function Ln(yi){var Hl=yi-Ee,Ac=yi-et,jv=m-Hl;return ct?Ii(jv,K-Ac):jv}function dn(yi){var Hl=yi-Ee,Ac=yi-et;return Ee===t||Hl>=m||Hl<0||ct&&Ac>=K}function Yn(){var yi=be();if(dn(yi))return er(yi);_e=gf(Yn,Ln(yi))}function er(yi){return _e=t,Rt&&N?Xt(yi):(N=G=t,ce)}function ua(){_e!==t&&Iu(_e),et=0,N=Ee=G=_e=t}function to(){return _e===t?ce:er(be())}function Ds(){var yi=be(),Hl=dn(yi);if(N=arguments,G=this,Ee=yi,Hl){if(_e===t)return pn(Ee);if(ct)return Iu(_e),_e=gf(Yn,m),Xt(Ee)}return _e===t&&(_e=gf(Yn,m)),ce}return Ds.cancel=ua,Ds.flush=to,Ds}var ir=fn(function(c,m){return Kh(c,1,m)}),Ro=fn(function(c,m,E){return Kh(c,Ki(m)||0,E)});function xt(c){return Me(c,oe)}function dt(c,m){if(typeof c!="function"||m!=null&&typeof m!="function")throw new Ti(l);var E=function(){var N=arguments,G=m?m.apply(this,N):N[0],K=E.cache;if(K.has(G))return K.get(G);var ce=c.apply(this,N);return E.cache=K.set(G,ce)||K,ce};return E.cache=new(dt.Cache||Gs),E}dt.Cache=Gs;function Et(c){if(typeof c!="function")throw new Ti(l);return function(){var m=arguments;switch(m.length){case 0:return!c.call(this);case 1:return!c.call(this,m[0]);case 2:return!c.call(this,m[0],m[1]);case 3:return!c.call(this,m[0],m[1],m[2])}return!c.apply(this,m)}}function Sn(c){return Lt(2,c)}var lr=Ch(function(c,m){m=m.length==1&&kn(m[0])?fr(m[0],Wr(ln())):fr(Kr(m,1),Wr(ln()));var E=m.length;return fn(function(N){for(var G=-1,K=Ii(N.length,E);++G<K;)N[G]=m[G].call(this,N[G]);return Vn(c,this,N)})}),nr=fn(function(c,m){var E=Us(m,Mh(nr));return Me(c,z,t,m,E)}),mr=fn(function(c,m){var E=Us(m,Mh(mr));return Me(c,U,t,m,E)}),Lr=Fn(function(c,m){return Me(c,H,t,t,t,m)});function Ul(c,m){if(typeof c!="function")throw new Ti(l);return m=m===t?m:Mn(m),fn(c,m)}function ds(c,m){if(typeof c!="function")throw new Ti(l);return m=m==null?0:ei(Mn(m),0),fn(function(E){var N=E[m],G=go(E,0,m);return N&&Zo(G,N),Vn(c,this,G)})}function Qf(c,m,E){var N=!0,G=!0;if(typeof c!="function")throw new Ti(l);return ri(E)&&(N="leading"in E?!!E.leading:N,G="trailing"in E?!!E.trailing:G),Zn(c,m,{leading:N,maxWait:m,trailing:G})}function $0(c){return at(c,1)}function Lu(c,m){return nr(Qs(m),c)}function jd(){if(!arguments.length)return[];var c=arguments[0];return kn(c)?c:[c]}function pT(c){return ki(c,S)}function SE(c,m){return m=typeof m=="function"?m:t,ki(c,S,m)}function wE(c){return ki(c,y|S)}function mm(c,m){return m=typeof m=="function"?m:t,ki(c,y|S,m)}function ob(c,m){return m==null||Xc(c,m,wi(m))}function Ca(c,m){return c===m||c!==c&&m!==m}var mT=bn(ja),Dg=bn(function(c,m){return c>=m}),Yd=tr(function(){return arguments}())?tr:function(c){return di(c)&&qn.call(c,"callee")&&!mc.call(c,"callee")},kn=Be.isArray,Ov=Tu?Wr(Tu):Nr;function Hi(c){return c!=null&&Ah(c.length)&&!Cc(c)}function Jr(c){return di(c)&&Hi(c)}function ab(c){return c===!0||c===!1||di(c)&&_i(c)==nt}var ah=Id||Sm,gT=$o?Wr($o):ti;function bf(c){return di(c)&&c.nodeType===1&&!Hr(c)}function C_(c){if(c==null)return!0;if(Hi(c)&&(kn(c)||typeof c=="string"||typeof c.splice=="function"||ah(c)||Jd(c)||Yd(c)))return!c.length;var m=hs(c);if(m==rt||m==mt)return!c.size;if(xc(c))return!ho(c).length;for(var E in c)if(qn.call(c,E))return!1;return!0}function Gi(c,m){return qr(c,m)}function ko(c,m,E){E=typeof E=="function"?E:t;var N=E?E(c,m):t;return N===t?qr(c,m,t,E):!!N}function C0(c){if(!di(c))return!1;var m=_i(c);return m==ze||m==lt||typeof c.message=="string"&&typeof c.name=="string"&&!Hr(c)}function Lv(c){return typeof c=="number"&&Al(c)}function Cc(c){if(!ri(c))return!1;var m=_i(c);return m==Ce||m==He||m==Qe||m==Mt}function M0(c){return typeof c=="number"&&c==Mn(c)}function Ah(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=J}function ri(c){var m=typeof c;return c!=null&&(m=="object"||m=="function")}function di(c){return c!=null&&typeof c=="object"}var td=Su?Wr(Su):us;function As(c,m){return c===m||es(c,m,Zp(m))}function gm(c,m,E){return E=typeof E=="function"?E:t,es(c,m,Zp(m),E)}function Nv(c){return Xd(c)&&c!=+c}function Dv(c){if(T_(c))throw new rn(o);return au(c)}function A0(c){return c===null}function EE(c){return c==null}function Xd(c){return typeof c=="number"||di(c)&&_i(c)==it}function Hr(c){if(!di(c)||_i(c)!=kt)return!1;var m=Ha(c);if(m===null)return!0;var E=qn.call(m,"constructor")&&m.constructor;return typeof E=="function"&&E instanceof E&&$u.call(E)==Ua}var Kd=sl?Wr(sl):qu;function qa(c){return M0(c)&&c>=-J&&c<=J}var M_=Bi?Wr(Bi):bc;function _m(c){return typeof c=="string"||!kn(c)&&di(c)&&_i(c)==xe}function la(c){return typeof c=="symbol"||di(c)&&_i(c)==se}var Jd=Ci?Wr(Ci):Qu;function _T(c){return c===t}function vT(c){return di(c)&&hs(c)==ht}function nd(c){return di(c)&&_i(c)==St}var lb=bn(ba),Zf=bn(function(c,m){return c<=m});function Pv(c){if(!c)return[];if(Hi(c))return _m(c)?Fr(c):ni(c);if(ta&&c[ta])return zh(c[ta]());var m=hs(c),E=m==rt?Vu:m==mt?eu:Tf;return E(c)}function Mc(c){if(!c)return c===0?c:0;if(c=Ki(c),c===we||c===-we){var m=c<0?-1:1;return m*re}return c===c?c:0}function Mn(c){var m=Mc(c),E=m%1;return m===m?E?m-E:m:0}function I0(c){return c?Wa(Mn(c),0,fe):0}function Ki(c){if(typeof c=="number")return c;if(la(c))return ie;if(ri(c)){var m=typeof c.valueOf=="function"?c.valueOf():c;c=ri(m)?m+"":m}if(typeof c!="string")return c===0?c:+c;c=Fh(c);var E=oi.test(c);return E||Yr.test(c)?Da(c.slice(2),E?2:8):Cr.test(c)?ie:+c}function ub(c){return cs(c,ns(c))}function ut(c){return c?Wa(Mn(c),-J,J):c===0?c:0}function sr(c){return c==null?"":ai(c)}var A_=Sa(function(c,m){if(xc(m)||Hi(m)){cs(m,wi(m),c);return}for(var E in m)qn.call(m,E)&&Co(c,E,m[E])}),I_=Sa(function(c,m){cs(m,ns(m),c)}),rd=Sa(function(c,m,E,N){cs(m,ns(m),c,N)}),rg=Sa(function(c,m,E,N){cs(m,wi(m),c,N)}),Bv=Fn(Xh);function R0(c,m){var E=xs(c);return m==null?E:as(E,m)}var cb=fn(function(c,m){c=vn(c);var E=-1,N=m.length,G=N>2?m[2]:t;for(G&&Ur(m[0],m[1],G)&&(N=1);++E<N;)for(var K=m[E],ce=ns(K),_e=-1,Ee=ce.length;++_e<Ee;){var et=ce[_e],tt=c[et];(tt===t||Ca(tt,Fi[et])&&!qn.call(c,et))&&(c[et]=K[et])}return c}),yT=fn(function(c){return c.push(t,st),Vn(id,t,c)});function qd(c,m){return Md(c,ln(m,3),ls)}function hb(c,m){return Md(c,ln(m,3),Va)}function R_(c,m){return c==null?c:ou(c,ln(m,3),ns)}function db(c,m){return c==null?c:Ju(c,ln(m,3),ns)}function bT(c,m){return c&&ls(c,ln(m,3))}function TT(c,m){return c&&Va(c,ln(m,3))}function ST(c){return c==null?[]:$s(c,wi(c))}function wT(c){return c==null?[]:$s(c,ns(c))}function vm(c,m,E){var N=c==null?t:Cs(c,m);return N===t?E:N}function fb(c,m){return c!=null&&Cg(c,m,yc)}function ym(c,m){return c!=null&&Cg(c,m,ff)}var pb=de(function(c,m,E){m!=null&&typeof m.toString!="function"&&(m=Hs.call(m)),c[m]=E},F_(Oo)),k_=de(function(c,m,E){m!=null&&typeof m.toString!="function"&&(m=Hs.call(m)),qn.call(c,m)?c[m].push(E):c[m]=[E]},ln),O_=fn(Pn);function wi(c){return Hi(c)?yn(c):ho(c)}function ns(c){return Hi(c)?yn(c,!0):vd(c)}function ET(c,m){var E={};return m=ln(m,3),ls(c,function(N,G,K){Ho(E,m(N,G,K),N)}),E}function Np(c,m){var E={};return m=ln(m,3),ls(c,function(N,G,K){Ho(E,G,m(N,G,K))}),E}var bm=Sa(function(c,m,E){po(c,m,E)}),id=Sa(function(c,m,E,N){po(c,m,E,N)}),xT=Fn(function(c,m){var E={};if(c==null)return E;var N=!1;m=fr(m,function(K){return K=sa(K,c),N||(N=K.length>1),K}),cs(c,Ar(c),E),N&&(E=ki(E,y|b|S,Ht));for(var G=m.length;G--;)Qc(E,m[G]);return E});function k0(c,m){return L_(c,Et(ln(m)))}var en=Fn(function(c,m){return c==null?{}:ec(c,m)});function L_(c,m){if(c==null)return{};var E=fr(Ar(c),function(N){return[N]});return m=ln(m),xh(c,E,function(N,G){return m(N,G[0])})}function xE(c,m,E){m=sa(m,c);var N=-1,G=m.length;for(G||(G=1,c=t);++N<G;){var K=c==null?t:c[yo(m[N])];K===t&&(N=G,K=E),c=Cc(K)?K.call(c):K}return c}function $E(c,m,E){return c==null?c:vi(c,m,E)}function CE(c,m,E,N){return N=typeof N=="function"?N:t,c==null?c:vi(c,m,E,N)}var N_=Tt(wi),O0=Tt(ns);function fs(c,m,E){var N=kn(c),G=N||ah(c)||Jd(c);if(m=ln(m,4),E==null){var K=c&&c.constructor;G?E=N?new K:[]:ri(c)?E=Cc(K)?xs(Ha(c)):{}:E={}}return(G?Xr:ls)(c,function(ce,_e,Ee){return m(E,ce,_e,Ee)}),E}function Pg(c,m){return c==null?!0:Qc(c,m)}function Fv(c,m,E){return c==null?c:mo(c,m,Qs(E))}function ME(c,m,E,N){return N=typeof N=="function"?N:t,c==null?c:mo(c,m,Qs(E),N)}function Tf(c){return c==null?[]:Ai(c,wi(c))}function Sf(c){return c==null?[]:Ai(c,ns(c))}function D_(c,m,E){return E===t&&(E=m,m=t),E!==t&&(E=Ki(E),E=E===E?E:0),m!==t&&(m=Ki(m),m=m===m?m:0),Wa(Ki(c),m,E)}function Ns(c,m,E){return m=Mc(m),E===t?(E=m,m=0):E=Mc(E),c=Ki(c),Eh(c,m,E)}function $T(c,m,E){if(E&&typeof E!="boolean"&&Ur(c,m,E)&&(m=E=t),E===t&&(typeof m=="boolean"?(E=m,m=t):typeof c=="boolean"&&(E=c,c=t)),c===t&&m===t?(c=0,m=1):(c=Mc(c),m===t?(m=c,c=0):m=Mc(m)),c>m){var N=c;c=m,m=N}if(E||c%1||m%1){var G=Il();return Ii(c+G*(m-c+_h("1e-"+((G+"").length-1))),m)}return Os(c,m)}var mb=d(function(c,m,E){return m=m.toLowerCase(),c+(E?Tm(m):m)});function Tm(c){return P0(sr(c).toLowerCase())}function zv(c){return c=sr(c),c&&c.replace(Oa,cf).replace(_s,"")}function gb(c,m,E){c=sr(c),m=ai(m);var N=c.length;E=E===t?N:Wa(Mn(E),0,N);var G=E;return E-=m.length,E>=0&&c.slice(E,G)==m}function _b(c){return c=sr(c),c&&Pr.test(c)?c.replace(On,hf):c}function vb(c){return c=sr(c),c&&zt.test(c)?c.replace(ot,"\\$&"):c}var P_=d(function(c,m,E){return c+(E?"-":"")+m.toLowerCase()}),AE=d(function(c,m,E){return c+(E?" ":"")+m.toLowerCase()}),CT=x("toLowerCase");function IE(c,m,E){c=sr(c),m=Mn(m);var N=m?is(c):0;if(!m||N>=m)return c;var G=(m-N)/2;return wt(nu(G),E)+c+wt(Yu(G),E)}function RE(c,m,E){c=sr(c),m=Mn(m);var N=m?is(c):0;return m&&N<m?c+wt(m-N,E):c}function ep(c,m,E){c=sr(c),m=Mn(m);var N=m?is(c):0;return m&&N<m?wt(m-N,E)+c:c}function yb(c,m,E){return E||m==null?m=0:m&&(m=+m),Ff(sr(c).replace(sn,""),m||0)}function bb(c,m,E){return(E?Ur(c,m,E):m===t)?m=1:m=Mn(m),Vs(sr(c),m)}function L0(){var c=arguments,m=sr(c[0]);return c.length<3?m:m.replace(c[1],c[2])}var MT=d(function(c,m,E){return c+(E?"_":"")+m.toLowerCase()});function Tb(c,m,E){return E&&typeof E!="number"&&Ur(c,m,E)&&(m=E=t),E=E===t?fe:E>>>0,E?(c=sr(c),c&&(typeof m=="string"||m!=null&&!Kd(m))&&(m=ai(m),!m&&ol(c))?go(Fr(c),0,E):c.split(m,E)):[]}var B_=d(function(c,m,E){return c+(E?" ":"")+P0(m)});function AT(c,m,E){return c=sr(c),E=E==null?0:Wa(Mn(E),0,c.length),m=ai(m),c.slice(E,E+m.length)==m}function Sb(c,m,E){var N=X.templateSettings;E&&Ur(c,m,E)&&(m=t),c=sr(c),m=rd({},m,N,Ne);var G=rd({},m.imports,N.imports,Ne),K=wi(G),ce=Ai(G,K),_e,Ee,et=0,tt=m.interpolate||xo,ct="__p += '",Rt=zr((m.escape||xo).source+"|"+tt.source+"|"+(tt===gr?rr:xo).source+"|"+(m.evaluate||xo).source+"|$","g"),Xt="//# sourceURL="+(qn.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yu+"]")+`
`;c.replace(Rt,function(dn,Yn,er,ua,to,Ds){return er||(er=ua),ct+=c.slice(et,Ds).replace(Yl,pd),Yn&&(_e=!0,ct+=`' +
__e(`+Yn+`) +
'`),to&&(Ee=!0,ct+=`';
`+to+`;
__p += '`),er&&(ct+=`' +
((__t = (`+er+`)) == null ? '' : __t) +
'`),et=Ds+dn.length,dn}),ct+=`';
`;var pn=qn.call(m,"variable")&&m.variable;if(!pn)ct=`with (obj) {
`+ct+`
}
`;else if(Vt.test(pn))throw new rn(u);ct=(Ee?ct.replace(tn,""):ct).replace(_t,"$1").replace(Jt,"$1;"),ct="function("+(pn||"obj")+`) {
`+(pn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_e?", __e = _.escape":"")+(Ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ct+`return __p
}`;var Ln=B0(function(){return In(K,Xt+"return "+ct).apply(t,ce)});if(Ln.source=ct,C0(Ln))throw Ln;return Ln}function sd(c){return sr(c).toLowerCase()}function Dp(c){return sr(c).toUpperCase()}function IT(c,m,E){if(c=sr(c),c&&(E||m===t))return Fh(c);if(!c||!(m=ai(m)))return c;var N=Fr(c),G=Fr(m),K=ji(N,G),ce=fa(N,G)+1;return go(N,K,ce).join("")}function Uv(c,m,E){if(c=sr(c),c&&(E||m===t))return c.slice(0,Cl(c)+1);if(!c||!(m=ai(m)))return c;var N=Fr(c),G=fa(N,Fr(m))+1;return go(N,0,G).join("")}function RT(c,m,E){if(c=sr(c),c&&(E||m===t))return c.replace(sn,"");if(!c||!(m=ai(m)))return c;var N=Fr(c),G=ji(N,Fr(m));return go(N,G).join("")}function N0(c,m){var E=le,N=Z;if(ri(m)){var G="separator"in m?m.separator:G;E="length"in m?Mn(m.length):E,N="omission"in m?ai(m.omission):N}c=sr(c);var K=c.length;if(ol(c)){var ce=Fr(c);K=ce.length}if(E>=K)return c;var _e=E-is(N);if(_e<1)return N;var Ee=ce?go(ce,0,_e).join(""):c.slice(0,_e);if(G===t)return Ee+N;if(ce&&(_e+=Ee.length-_e),Kd(G)){if(c.slice(_e).search(G)){var et,tt=Ee;for(G.global||(G=zr(G.source,sr(_r.exec(G))+"g")),G.lastIndex=0;et=G.exec(tt);)var ct=et.index;Ee=Ee.slice(0,ct===t?_e:ct)}}else if(c.indexOf(ai(G),_e)!=_e){var Rt=Ee.lastIndexOf(G);Rt>-1&&(Ee=Ee.slice(0,Rt))}return Ee+N}function Hv(c){return c=sr(c),c&&si.test(c)?c.replace(Kt,za):c}var D0=d(function(c,m,E){return c+(E?" ":"")+m.toUpperCase()}),P0=x("toUpperCase");function wb(c,m,E){return c=sr(c),m=E?t:m,m===t?Fc(c)?bh(c):Tp(c):c.match(m)||[]}var B0=fn(function(c,m){try{return Vn(c,t,m)}catch(E){return C0(E)?E:new rn(E)}}),Eb=Fn(function(c,m){return Xr(m,function(E){E=yo(E),Ho(c,E,Zt(c[E],c))}),c});function xb(c){var m=c==null?0:c.length,E=ln();return c=m?fr(c,function(N){if(typeof N[1]!="function")throw new Ti(l);return[E(N[0]),N[1]]}):[],fn(function(N){for(var G=-1;++G<m;){var K=c[G];if(Vn(K[0],this,N))return Vn(K[1],this,N)}})}function kE(c){return Nd(ki(c,y))}function F_(c){return function(){return c}}function OE(c,m){return c==null||c!==c?m:c}var kT=P(),LE=P(!0);function Oo(c){return c}function Ji(c){return qs(typeof c=="function"?c:ki(c,y))}function Pp(c){return Au(ki(c,y))}function z_(c,m){return fo(c,ki(m,y))}var Gv=fn(function(c,m){return function(E){return Pn(E,c,m)}}),Bp=fn(function(c,m){return function(E){return Pn(c,E,m)}});function U_(c,m,E){var N=wi(m),G=$s(m,N);E==null&&!(ri(m)&&(G.length||!N.length))&&(E=m,m=c,c=this,G=$s(m,wi(m)));var K=!(ri(E)&&"chain"in E)||!!E.chain,ce=Cc(c);return Xr(G,function(_e){var Ee=m[_e];c[_e]=Ee,ce&&(c.prototype[_e]=function(){var et=this.__chain__;if(K||et){var tt=c(this.__wrapped__),ct=tt.__actions__=ni(this.__actions__);return ct.push({func:Ee,args:arguments,thisArg:c}),tt.__chain__=et,tt}return Ee.apply(c,Zo([this.value()],arguments))})}),c}function F0(){return wr._===this&&(wr._=Hh),this}function z0(){}function OT(c){return c=Mn(c),fn(function(m){return Wo(m,c)})}var $b=Ze(fr),NE=Ze(wu),Cb=Ze(Bc);function H_(c){return Ea(c)?ci(yo(c)):$h(c)}function LT(c){return function(m){return c==null?t:Cs(c,m)}}var Mb=cn(),Wv=cn(!0);function U0(){return[]}function Sm(){return!1}function Ab(){return{}}function Ib(){return""}function Rb(){return!0}function kb(c,m){if(c=Mn(c),c<1||c>J)return[];var E=fe,N=Ii(c,fe);m=ln(m),c-=fe;for(var G=ql(N,m);++E<c;)m(E);return G}function ig(c){return kn(c)?fr(c,yo):la(c)?[c]:ni(_0(sr(c)))}function Ob(c){var m=++pa;return sr(c)+m}var Lb=Oe(function(c,m){return c+m},0),Nb=gn("ceil"),Db=Oe(function(c,m){return c/m},1),Pb=gn("floor");function Qn(c){return c&&c.length?Ol(c,Oo,ja):t}function NT(c,m){return c&&c.length?Ol(c,ln(m,2),ja):t}function DT(c){return Ba(c,Oo)}function Bg(c,m){return Ba(c,ln(m,2))}function G_(c){return c&&c.length?Ol(c,Oo,ba):t}function H0(c,m){return c&&c.length?Ol(c,ln(m,2),ba):t}var PT=Oe(function(c,m){return c*m},1),Vv=gn("round"),BT=Oe(function(c,m){return c-m},0);function FT(c){return c&&c.length?zo(c,Oo):0}function zT(c,m){return c&&c.length?zo(c,ln(m,2)):0}return X.after=Ye,X.ary=at,X.assign=A_,X.assignIn=I_,X.assignInWith=rd,X.assignWith=rg,X.at=Bv,X.before=Lt,X.bind=Zt,X.bindAll=Eb,X.bindKey=hn,X.castArray=jd,X.chain=Ou,X.chunk=rm,X.compact=Ru,X.concat=v0,X.cond=xb,X.conforms=kE,X.constant=F_,X.countBy=Rv,X.create=R0,X.curry=an,X.curryRight=Dn,X.debounce=Zn,X.defaults=cb,X.defaultsDeep=yT,X.defer=ir,X.delay=Ro,X.difference=jo,X.differenceBy=ts,X.differenceWith=hu,X.drop=vl,X.dropRight=ku,X.dropRightWhile=du,X.dropWhile=Cp,X.fill=Fl,X.filter=Vd,X.flatMap=eg,X.flatMapDeep=Lg,X.flatMapDepth=kv,X.flatten=_f,X.flattenDeep=Ig,X.flattenDepth=im,X.flip=xt,X.flow=kT,X.flowRight=LE,X.fromPairs=rh,X.functions=ST,X.functionsIn=wT,X.groupBy=ng,X.initial=Hd,X.intersection=Jm,X.intersectionBy=qm,X.intersectionWith=bo,X.invert=pb,X.invertBy=k_,X.invokeMap=Jf,X.iteratee=Ji,X.keyBy=dm,X.keys=wi,X.keysIn=ns,X.map=Si,X.mapKeys=ET,X.mapValues=Np,X.matches=Pp,X.matchesProperty=z_,X.memoize=dt,X.merge=bm,X.mergeWith=id,X.method=Gv,X.methodOf=Bp,X.mixin=U_,X.negate=Et,X.nthArg=OT,X.omit=xT,X.omitBy=k0,X.once=Sn,X.orderBy=qf,X.over=$b,X.overArgs=lr,X.overEvery=NE,X.overSome=Cb,X.partial=nr,X.partialRight=mr,X.partition=fm,X.pick=en,X.pickBy=L_,X.property=H_,X.propertyOf=LT,X.pull=Rg,X.pullAll=Gd,X.pullAllBy=Qm,X.pullAllWith=$c,X.pullAt=Wd,X.range=Mb,X.rangeRight=Wv,X.rearg=Lr,X.reject=Ng,X.remove=oa,X.rest=Ul,X.reverse=$a,X.sampleSize=T,X.set=$E,X.setWith=CE,X.shuffle=R,X.slice=w_,X.sortBy=ee,X.sortedUniq=Ip,X.sortedUniqBy=T0,X.split=Tb,X.spread=ds,X.tail=am,X.take=S0,X.takeRight=E_,X.takeRightWhile=lm,X.takeWhile=vf,X.tap=kg,X.throttle=Qf,X.thru=jf,X.toArray=Pv,X.toPairs=N_,X.toPairsIn=O0,X.toPath=ig,X.toPlainObject=ub,X.transform=fs,X.unary=$0,X.union=x_,X.unionBy=ib,X.unionWith=w0,X.uniq=E0,X.uniqBy=Vf,X.uniqWith=zn,X.unset=Pg,X.unzip=sh,X.unzipWith=Rp,X.update=Fv,X.updateWith=ME,X.values=Tf,X.valuesIn=Sf,X.without=aa,X.words=wb,X.wrap=Lu,X.xor=$_,X.xorBy=x0,X.xorWith=um,X.zip=sb,X.zipObject=Iv,X.zipObjectDeep=oh,X.zipWith=To,X.entries=N_,X.entriesIn=O0,X.extend=I_,X.extendWith=rd,U_(X,X),X.add=Lb,X.attempt=B0,X.camelCase=mb,X.capitalize=Tm,X.ceil=Nb,X.clamp=D_,X.clone=pT,X.cloneDeep=wE,X.cloneDeepWith=mm,X.cloneWith=SE,X.conformsTo=ob,X.deburr=zv,X.defaultTo=OE,X.divide=Db,X.endsWith=gb,X.eq=Ca,X.escape=_b,X.escapeRegExp=vb,X.every=Og,X.find=Li,X.findIndex=zd,X.findKey=qd,X.findLast=hm,X.findLastIndex=Ud,X.findLastKey=hb,X.floor=Pb,X.forEach=tg,X.forEachRight=Op,X.forIn=R_,X.forInRight=db,X.forOwn=bT,X.forOwnRight=TT,X.get=vm,X.gt=mT,X.gte=Dg,X.has=fb,X.hasIn=ym,X.head=yl,X.identity=Oo,X.includes=Kf,X.indexOf=ih,X.inRange=Ns,X.invoke=O_,X.isArguments=Yd,X.isArray=kn,X.isArrayBuffer=Ov,X.isArrayLike=Hi,X.isArrayLikeObject=Jr,X.isBoolean=ab,X.isBuffer=ah,X.isDate=gT,X.isElement=bf,X.isEmpty=C_,X.isEqual=Gi,X.isEqualWith=ko,X.isError=C0,X.isFinite=Lv,X.isFunction=Cc,X.isInteger=M0,X.isLength=Ah,X.isMap=td,X.isMatch=As,X.isMatchWith=gm,X.isNaN=Nv,X.isNative=Dv,X.isNil=EE,X.isNull=A0,X.isNumber=Xd,X.isObject=ri,X.isObjectLike=di,X.isPlainObject=Hr,X.isRegExp=Kd,X.isSafeInteger=qa,X.isSet=M_,X.isString=_m,X.isSymbol=la,X.isTypedArray=Jd,X.isUndefined=_T,X.isWeakMap=vT,X.isWeakSet=nd,X.join=sm,X.kebabCase=P_,X.last=Ls,X.lastIndexOf=zl,X.lowerCase=AE,X.lowerFirst=CT,X.lt=lb,X.lte=Zf,X.max=Qn,X.maxBy=NT,X.mean=DT,X.meanBy=Bg,X.min=G_,X.minBy=H0,X.stubArray=U0,X.stubFalse=Sm,X.stubObject=Ab,X.stubString=Ib,X.stubTrue=Rb,X.multiply=PT,X.nth=Mp,X.noConflict=F0,X.noop=z0,X.now=be,X.pad=IE,X.padEnd=RE,X.padStart=ep,X.parseInt=yb,X.random=$T,X.reduce=pm,X.reduceRight=Lp,X.repeat=bb,X.replace=L0,X.result=xE,X.round=Vv,X.runInContext=ye,X.sample=v,X.size=F,X.snakeCase=MT,X.some=Y,X.sortedIndex=om,X.sortedIndexBy=y0,X.sortedIndexOf=Av,X.sortedLastIndex=Wf,X.sortedLastIndexBy=Ap,X.sortedLastIndexOf=b0,X.startCase=B_,X.startsWith=AT,X.subtract=BT,X.sum=FT,X.sumBy=zT,X.template=Sb,X.times=kb,X.toFinite=Mc,X.toInteger=Mn,X.toLength=I0,X.toLower=sd,X.toNumber=Ki,X.toSafeInteger=ut,X.toString=sr,X.toUpper=Dp,X.trim=IT,X.trimEnd=Uv,X.trimStart=RT,X.truncate=N0,X.unescape=Hv,X.uniqueId=Ob,X.upperCase=D0,X.upperFirst=P0,X.each=tg,X.eachRight=Op,X.first=yl,U_(X,function(){var c={};return ls(X,function(m,E){qn.call(X.prototype,E)||(c[E]=m)}),c}(),{chain:!1}),X.VERSION=r,Xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){X[c].placeholder=X}),Xr(["drop","take"],function(c,m){mn.prototype[c]=function(E){E=E===t?1:ei(Mn(E),0);var N=this.__filtered__&&!m?new mn(this):this.clone();return N.__filtered__?N.__takeCount__=Ii(E,N.__takeCount__):N.__views__.push({size:Ii(E,fe),type:c+(N.__dir__<0?"Right":"")}),N},mn.prototype[c+"Right"]=function(E){return this.reverse()[c](E).reverse()}}),Xr(["filter","map","takeWhile"],function(c,m){var E=m+1,N=E==ae||E==ge;mn.prototype[c]=function(G){var K=this.clone();return K.__iteratees__.push({iteratee:ln(G,3),type:E}),K.__filtered__=K.__filtered__||N,K}}),Xr(["head","last"],function(c,m){var E="take"+(m?"Right":"");mn.prototype[c]=function(){return this[E](1).value()[0]}}),Xr(["initial","tail"],function(c,m){var E="drop"+(m?"":"Right");mn.prototype[c]=function(){return this.__filtered__?new mn(this):this[E](1)}}),mn.prototype.compact=function(){return this.filter(Oo)},mn.prototype.find=function(c){return this.filter(c).head()},mn.prototype.findLast=function(c){return this.reverse().find(c)},mn.prototype.invokeMap=fn(function(c,m){return typeof c=="function"?new mn(this):this.map(function(E){return Pn(E,c,m)})}),mn.prototype.reject=function(c){return this.filter(Et(ln(c)))},mn.prototype.slice=function(c,m){c=Mn(c);var E=this;return E.__filtered__&&(c>0||m<0)?new mn(E):(c<0?E=E.takeRight(-c):c&&(E=E.drop(c)),m!==t&&(m=Mn(m),E=m<0?E.dropRight(-m):E.take(m-c)),E)},mn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},mn.prototype.toArray=function(){return this.take(fe)},ls(mn.prototype,function(c,m){var E=/^(?:filter|find|map|reject)|While$/.test(m),N=/^(?:head|last)$/.test(m),G=X[N?"take"+(m=="last"?"Right":""):m],K=N||/^find/.test(m);G&&(X.prototype[m]=function(){var ce=this.__wrapped__,_e=N?[1]:arguments,Ee=ce instanceof mn,et=_e[0],tt=Ee||kn(ce),ct=function(Yn){var er=G.apply(X,Zo([Yn],_e));return N&&Rt?er[0]:er};tt&&E&&typeof et=="function"&&et.length!=1&&(Ee=tt=!1);var Rt=this.__chain__,Xt=!!this.__actions__.length,pn=K&&!Rt,Ln=Ee&&!Xt;if(!K&&tt){ce=Ln?ce:new mn(this);var dn=c.apply(ce,_e);return dn.__actions__.push({func:jf,args:[ct],thisArg:t}),new Mr(dn,Rt)}return pn&&Ln?c.apply(this,_e):(dn=this.thru(ct),pn?N?dn.value()[0]:dn.value():dn)})}),Xr(["pop","push","shift","sort","splice","unshift"],function(c){var m=lo[c],E=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",N=/^(?:pop|shift)$/.test(c);X.prototype[c]=function(){var G=arguments;if(N&&!this.__chain__){var K=this.value();return m.apply(kn(K)?K:[],G)}return this[E](function(ce){return m.apply(kn(ce)?ce:[],G)})}}),ls(mn.prototype,function(c,m){var E=X[m];if(E){var N=E.name+"";qn.call(kl,N)||(kl[N]=[]),kl[N].push({name:m,func:E})}}),kl[W(t,O).name]=[{name:"wrapper",func:t}],mn.prototype.clone=zf,mn.prototype.reverse=cl,mn.prototype.value=Ri,X.prototype.at=ed,X.prototype.chain=cm,X.prototype.commit=Yf,X.prototype.next=Xf,X.prototype.plant=bd,X.prototype.reverse=yf,X.prototype.toJSON=X.prototype.valueOf=X.prototype.value=Zm,X.prototype.first=X.prototype.head,ta&&(X.prototype[ta]=kp),X},pi=Ad();bi?((bi.exports=pi)._=pi,Rs._=pi):wr._=pi}).call(Vl)})(iR,iR.exports);var rue=iR.exports;const q5=(n,e,t,r)=>fetch(n+"/openai/deployments/"+e+"/chat/completions?api-version=2024-02-01",{method:"POST",headers:{"Content-Type":"application/json","api-key":t},body:JSON.stringify({messages:r})}),Hn=use((n,e)=>({ip:"",blocks:{},Start:{},lines:{},hulls:{},texts:{},points:{},widgets:{},counter:0,screenToShow:rF,blocklyWorkspaceXML:{},highlightBlocks:{},storyCreationGoals:{...tue},chatMessageHistory:[{role:"user",content:Sle},{role:"system",content:"How can I help you today?"}],lightMode:!0,simOnly:!1,isConnected:!1,workerThread:null,blocklyWorkspace:null,llmEndpoint:"",llmAPIKey:"",llmDeployment:"",userPrompt:"",programGoals:{...Kle},llmProcessing:!1,llmMode:!1,showGPTConsole:!1,fullScreenPanel:!0,displayLLMBlockPrompt:!1,mistyAudioList:[],mistyImageList:[],headerHeight:0,headerWidth:0,clock:new yle,tfs:{...jO},startingTfs:JSON.parse(JSON.stringify(jO)),endingTfs:JSON.parse(JSON.stringify(jO)),items:{...YO},startingItems:JSON.parse(JSON.stringify(YO)),endingItems:JSON.parse(JSON.stringify(YO)),activeModal:null,updateScreen:t=>n(r=>({screenToShow:t})),setActiveModal:t=>n(r=>({activeModal:t})),closeModal:()=>n(t=>({activeModal:null})),addMessageToHistory:t=>{let r=e(),s=r.chatMessageHistory;n({llmProcessing:!0,chatMessageHistory:[...s,{role:"user",content:t}]}),s=e().chatMessageHistory;let o=r.llmEndpoint,l=r.llmDeployment,u=r.llmAPIKey;q5(o,l,u,s).then(h=>{if(!h.ok)throw new Error(`LLM Request failed with status ${h.status}`);return h.json()}).then(h=>{console.log(h);let f=h.choices[0].message.content;n({llmProcessing:!1,chatMessageHistory:[...s,{role:"system",content:f}]})}).catch(h=>{n({llmProcessing:!1}),alert(`Failed to connect to ChatGPT: ${h.message}`)})},toggleLLMMode:t=>n({llmMode:t}),setFullScreenPanel:t=>n({fullScreenPanel:t}),setShowGPTConsole:t=>n({showGPTConsole:t}),toggleLLMBlockPrompt:t=>n({displayLLMBlockPrompt:t}),toggleTheme:t=>n({lightMode:t}),getAllTasks:t=>t?e().storyCreationGoals:e().programGoals,getMainTasks:t=>{let r=t?e().storyCreationGoals:e().programGoals;return Object.keys(r).filter(s=>r[s].type==="task").sort((s,o)=>r[s].order-r[o].order).reduce((s,o)=>(s[o]=r[o],s),{})},getHighlightBlocks:()=>e().highlightBlocks,getBlocklyWorkspace:()=>e().blocklyWorkspace,setWorkerThread:t=>n({workerThread:t}),setBlocklyWorkspace:t=>n({blocklyWorkspace:t}),setAPIKey:t=>n({llmAPIKey:t}),setEndpoint:t=>n({llmEndpoint:t}),setDeployment:t=>n({llmDeployment:t}),setImageList:t=>n({mistyImageList:t}),setAudioList:t=>n({mistyAudioList:t}),setUserPrompt:t=>n({userPrompt:t}),setHighlightBlocks:t=>n({highlightBlocks:t}),setHeaderDimensions:(t,r)=>n({headerHeight:t,headerWidth:r}),generateProgramOutline:()=>{n({llmProcessing:!0});let t=e(),r=t.userPrompt,s=t.llmEndpoint,o=t.llmDeployment,l=t.llmAPIKey;q5(s,o,l,[{role:"system",content:Tle},{role:"user",content:'Give me the output for the following user prompt: "'+r+'"'}]).then(u=>{if(!u.ok)throw new Error(`LLM Request failed with status ${u.status}`);return u.json()}).then(u=>{console.log(u);let h=u.choices[0].message.content;h=h.length>0?h.slice(1,h.length-1):{},n({programGoals:JSON.parse(h),llmProcessing:!1,activeModal:null})}).catch(u=>{n({llmProcessing:!1}),alert(`Failed to connect to ChatGPT: ${u.message}`)})},generateProgram:()=>{n({llmProcessing:!0});let t=e(),r=t.userPrompt,s=t.llmEndpoint,o=t.llmDeployment,l=t.llmAPIKey;fetch(s+"/openai/deployments/"+o+"/chat/completions?api-version=2024-02-01",{method:"POST",headers:{"Content-Type":"application/json","api-key":l},body:JSON.stringify({messages:[{role:"system",content:nue},{role:"user",content:'Give me the output for the following user prompt: "'+r+'"'}]})}).then(u=>{if(!u.ok)throw new Error(`LLM Request failed with status ${u.status}`);return u.json()}).then(u=>{console.log(u);let h=u.choices[0].message.content;console.log(h),n({llmProcessing:!1,activeModal:null}),e().loadBlocks(JSON.parse(h),e().blocklyWorkspace)}).catch(u=>{n({llmProcessing:!1}),alert(`Failed to connect to ChatGPT: ${u.message}`)})},clearProgram:()=>n({blocks:{}}),clearProgramExceptStart:()=>n({blocks:rue.pickBy(e().blocks,t=>t.type==="Start")}),loadBlocks:(t,r)=>{var y,b;let s=r.getBlocksByType("Start");s.length>0?e().clearProgramExceptStart():e().clearProgram();let o=s.length>0?s[0]:null,l=[],u=[],h=[t.data[0].id],f=[];for(let S=0;S<t.data.length;S++){let C=t.data[S].type;if(["face","audio"].includes(C)&&(C=t.data[S].value),!["math_number","colour_picker","text"].includes(C)&&!Die.includes(C)){f.push(t.data[S].id);continue}let M=Qg.serialization.blocks.append({type:C},r);M.type==="Start"&&(o=M),C==="math_number"&&M.getField("NUM").setValue(t.data[S].value),C==="colour_picker"&&M.getField("COLOUR").setValue(t.data[S].value),C==="text"&&M.getField("TEXT").setValue(t.data[S].value),["BasicSlider","ArmPositionSlider","SpeedSlider","TimeSlider","HeadPitchSlider","HeadRollSlider","HeadYawSlider"].includes(C)&&M.getField("FIELD_slider_value").setValue(t.data[S].value),l.push(t.data[S].id),u.push(M.id),(y=t.data[S])!=null&&y.nextStatement&&h.push((b=t.data[S])==null?void 0:b.nextStatement)}for(let S=0;S<t.data.length;S++){if(f.includes(t.data[S].id))continue;let C=r.getBlockById(u[l.indexOf(t.data[S].id)]);C&&Object.keys(t.data[S]).forEach(M=>{if(!(M=="id"||M=="value"||M=="type"||M=="nextStatement")){const A=r.getBlockById(u[l.indexOf(t.data[S][M])]);A&&C.getInput(M).connection.connect(A.outputConnection)}})}for(let S=1;S<h.length;S++){if(f.includes(h[S]))continue;let C=r.getBlockById(u[l.indexOf(h[S])]),M=r.getBlockById(u[l.indexOf(h[S-1])]);C&&(M==null||M.nextConnection.connect(C.previousConnection))}let g=r.getBlockById(u[l.indexOf(h[0])]);o.nextConnection.connect(g.previousConnection)},setIsConnected:t=>n({isConnected:t}),loadFromURDF:t=>n({tfs:{..._le(t)},items:{...vle(t)}}),setIp:t=>n({ip:t}),disconnect:()=>n({ip:"",isConnected:!1,mistyAudioList:[],mistyImageList:[]}),addBlock:(t,r)=>n(s=>({blocks:{...s.blocks,[t]:r}})),removeBlock:t=>n(r=>({blocks:Object.keys(r.blocks).reduce((o,l)=>(t.includes(l)||(o[l]=r.blocks[l]),o),{})})),updateBlock:(t,r)=>n(s=>({blocks:{...s.blocks,[t]:r}})),getBlock:t=>e().blocks[t],getBlocks:()=>e().blocks,getItems:()=>e().items,getEndingItems:()=>e().endingItems,addBlocktoStart:(t,r)=>n(s=>({Start:{...s.Start,[t]:r}})),removeBlockfromStart:t=>n(r=>({Start:Object.keys(r.Start).reduce((o,l)=>(l!==t&&(o[l]=r.Start[l]),o),{})})),getBlocksByType:t=>{const r=e().blocks;return Object.values(r).filter(s=>s.type===t)[0]},getBlockType:t=>{var s;return((s=e().blocks[t])==null?void 0:s.type)||"Unknown block type"},setWorkspaceXml:t=>n({blocklyWorkspaceXML:t}),getWorkspaceXml:()=>e().blocklyWorkspaceXML,onPointerMissed:()=>console.log("Missed Click"),onPointerOver:()=>{},onPointerOut:()=>{},resetSim:()=>{const t=JSON.parse(JSON.stringify(e().startingTfs)),r=JSON.parse(JSON.stringify(e().startingItems));n({tfs:{...t},endingTfs:{...t},items:{...r},endingItems:{...r}})},toggleSimOnly:t=>{n({simOnly:t})},setAnimationFrames:(t,r,s,o)=>{n({tfs:{...t},endingTfs:{...r},items:{...s},endingItems:{...o}})}}));let Q5="";const uh=n=>{const t=new Date().toLocaleString();Q5=Q5.concat(`
`,`[${t}] ${n}`)};function iue(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[r,s]of n)if(!Object.is(s,e.get(r)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const r of n)if(!e.has(r))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const r of t)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(n[r],e[r]))return!1;return!0}const{useRef:sue}=yt;function rs(n){const e=sue();return t=>{const r=n(t);return iue(e.current,r)?e.current:e.current=r}}const oue={black:"#000",white:"#fff"},R$=oue,aue={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},lS=aue,lue={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},uS=lue,uue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},cS=uue,cue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},hS=cue,hue={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},dS=hue,due={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},tx=due,fue={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},pue=fue;function J1(n){let e="https://mui.com/production-error/?code="+n;for(let t=1;t<arguments.length;t+=1)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+n+"; visit "+e+" for the full message."}const mue=Object.freeze(Object.defineProperty({__proto__:null,default:J1},Symbol.toStringTag,{value:"Module"})),SC="$$material";function Je(){return Je=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Je.apply(this,arguments)}const gue=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"}));function xr(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function EX(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var _ue=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,vue=EX(function(n){return _ue.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91});function yue(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function bue(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Tue=function(){function n(t){var r=this;this._insertTag=function(s){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,o),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(bue(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=yue(s);try{o.insertRule(r,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},n}(),Mf="-ms-",sR="-moz-",Yo="-webkit-",xX="comm",sF="rule",oF="decl",Sue="@import",$X="@keyframes",wue="@layer",Eue=Math.abs,ck=String.fromCharCode,xue=Object.assign;function $ue(n,e){return rf(n,0)^45?(((e<<2^rf(n,0))<<2^rf(n,1))<<2^rf(n,2))<<2^rf(n,3):0}function CX(n){return n.trim()}function Cue(n,e){return(n=e.exec(n))?n[0]:n}function Xo(n,e,t){return n.replace(e,t)}function DD(n,e){return n.indexOf(e)}function rf(n,e){return n.charCodeAt(e)|0}function k$(n,e,t){return n.slice(e,t)}function q0(n){return n.length}function aF(n){return n.length}function DM(n,e){return e.push(n),n}function Mue(n,e){return n.map(e).join("")}var hk=1,Iw=1,MX=0,qp=0,Nh=0,oE="";function dk(n,e,t,r,s,o,l){return{value:n,root:e,parent:t,type:r,props:s,children:o,line:hk,column:Iw,length:l,return:""}}function nx(n,e){return xue(dk("",null,null,"",null,null,0),n,{length:-n.length},e)}function Aue(){return Nh}function Iue(){return Nh=qp>0?rf(oE,--qp):0,Iw--,Nh===10&&(Iw=1,hk--),Nh}function Nm(){return Nh=qp<MX?rf(oE,qp++):0,Iw++,Nh===10&&(Iw=1,hk++),Nh}function l_(){return rf(oE,qp)}function lI(){return qp}function wC(n,e){return k$(oE,n,e)}function O$(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function AX(n){return hk=Iw=1,MX=q0(oE=n),qp=0,[]}function IX(n){return oE="",n}function uI(n){return CX(wC(qp-1,PD(n===91?n+2:n===40?n+1:n)))}function Rue(n){for(;(Nh=l_())&&Nh<33;)Nm();return O$(n)>2||O$(Nh)>3?"":" "}function kue(n,e){for(;--e&&Nm()&&!(Nh<48||Nh>102||Nh>57&&Nh<65||Nh>70&&Nh<97););return wC(n,lI()+(e<6&&l_()==32&&Nm()==32))}function PD(n){for(;Nm();)switch(Nh){case n:return qp;case 34:case 39:n!==34&&n!==39&&PD(Nh);break;case 40:n===41&&PD(n);break;case 92:Nm();break}return qp}function Oue(n,e){for(;Nm()&&n+Nh!==57;)if(n+Nh===84&&l_()===47)break;return"/*"+wC(e,qp-1)+"*"+ck(n===47?n:Nm())}function Lue(n){for(;!O$(l_());)Nm();return wC(n,qp)}function Nue(n){return IX(cI("",null,null,null,[""],n=AX(n),0,[0],n))}function cI(n,e,t,r,s,o,l,u,h){for(var f=0,g=0,y=l,b=0,S=0,C=0,M=1,A=1,O=1,L=0,B="",D=s,z=o,U=r,V=B;A;)switch(C=L,L=Nm()){case 40:if(C!=108&&rf(V,y-1)==58){DD(V+=Xo(uI(L),"&","&\f"),"&\f")!=-1&&(O=-1);break}case 34:case 39:case 91:V+=uI(L);break;case 9:case 10:case 13:case 32:V+=Rue(C);break;case 92:V+=kue(lI()-1,7);continue;case 47:switch(l_()){case 42:case 47:DM(Due(Oue(Nm(),lI()),e,t),h);break;default:V+="/"}break;case 123*M:u[f++]=q0(V)*O;case 125*M:case 59:case 0:switch(L){case 0:case 125:A=0;case 59+g:O==-1&&(V=Xo(V,/\f/g,"")),S>0&&q0(V)-y&&DM(S>32?eH(V+";",r,t,y-1):eH(Xo(V," ","")+";",r,t,y-2),h);break;case 59:V+=";";default:if(DM(U=Z5(V,e,t,f,g,s,u,B,D=[],z=[],y),o),L===123)if(g===0)cI(V,e,U,U,D,o,y,u,z);else switch(b===99&&rf(V,3)===110?100:b){case 100:case 108:case 109:case 115:cI(n,U,U,r&&DM(Z5(n,U,U,0,0,s,u,B,s,D=[],y),z),s,z,y,u,r?D:z);break;default:cI(V,U,U,U,[""],z,0,u,z)}}f=g=S=0,M=O=1,B=V="",y=l;break;case 58:y=1+q0(V),S=C;default:if(M<1){if(L==123)--M;else if(L==125&&M++==0&&Iue()==125)continue}switch(V+=ck(L),L*M){case 38:O=g>0?1:(V+="\f",-1);break;case 44:u[f++]=(q0(V)-1)*O,O=1;break;case 64:l_()===45&&(V+=uI(Nm())),b=l_(),g=y=q0(B=V+=Lue(lI())),L++;break;case 45:C===45&&q0(V)==2&&(M=0)}}return o}function Z5(n,e,t,r,s,o,l,u,h,f,g){for(var y=s-1,b=s===0?o:[""],S=aF(b),C=0,M=0,A=0;C<r;++C)for(var O=0,L=k$(n,y+1,y=Eue(M=l[C])),B=n;O<S;++O)(B=CX(M>0?b[O]+" "+L:Xo(L,/&\f/g,b[O])))&&(h[A++]=B);return dk(n,e,t,s===0?sF:u,h,f,g)}function Due(n,e,t){return dk(n,e,t,xX,ck(Aue()),k$(n,2,-2),0)}function eH(n,e,t,r){return dk(n,e,t,oF,k$(n,0,r),k$(n,r+1,-1),r)}function pw(n,e){for(var t="",r=aF(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function Pue(n,e,t,r){switch(n.type){case wue:if(n.children.length)break;case Sue:case oF:return n.return=n.return||n.value;case xX:return"";case $X:return n.return=n.value+"{"+pw(n.children,r)+"}";case sF:n.value=n.props.join(",")}return q0(t=pw(n.children,r))?n.return=n.value+"{"+t+"}":""}function Bue(n){var e=aF(n);return function(t,r,s,o){for(var l="",u=0;u<e;u++)l+=n[u](t,r,s,o)||"";return l}}function Fue(n){return function(e){e.root||(e=e.return)&&n(e)}}var zue=function(e,t,r){for(var s=0,o=0;s=o,o=l_(),s===38&&o===12&&(t[r]=1),!O$(o);)Nm();return wC(e,qp)},Uue=function(e,t){var r=-1,s=44;do switch(O$(s)){case 0:s===38&&l_()===12&&(t[r]=1),e[r]+=zue(qp-1,t,r);break;case 2:e[r]+=uI(s);break;case 4:if(s===44){e[++r]=l_()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=ck(s)}while(s=Nm());return e},Hue=function(e,t){return IX(Uue(AX(e),t))},tH=new WeakMap,Gue=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!tH.get(r))&&!s){tH.set(e,!0);for(var o=[],l=Hue(t,o),u=r.props,h=0,f=0;h<l.length;h++)for(var g=0;g<u.length;g++,f++)e.props[f]=o[h]?l[h].replace(/&\f/g,u[g]):u[g]+" "+l[h]}}},Wue=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function RX(n,e){switch($ue(n,e)){case 5103:return Yo+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Yo+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Yo+n+sR+n+Mf+n+n;case 6828:case 4268:return Yo+n+Mf+n+n;case 6165:return Yo+n+Mf+"flex-"+n+n;case 5187:return Yo+n+Xo(n,/(\w+).+(:[^]+)/,Yo+"box-$1$2"+Mf+"flex-$1$2")+n;case 5443:return Yo+n+Mf+"flex-item-"+Xo(n,/flex-|-self/,"")+n;case 4675:return Yo+n+Mf+"flex-line-pack"+Xo(n,/align-content|flex-|-self/,"")+n;case 5548:return Yo+n+Mf+Xo(n,"shrink","negative")+n;case 5292:return Yo+n+Mf+Xo(n,"basis","preferred-size")+n;case 6060:return Yo+"box-"+Xo(n,"-grow","")+Yo+n+Mf+Xo(n,"grow","positive")+n;case 4554:return Yo+Xo(n,/([^-])(transform)/g,"$1"+Yo+"$2")+n;case 6187:return Xo(Xo(Xo(n,/(zoom-|grab)/,Yo+"$1"),/(image-set)/,Yo+"$1"),n,"")+n;case 5495:case 3959:return Xo(n,/(image-set\([^]*)/,Yo+"$1$`$1");case 4968:return Xo(Xo(n,/(.+:)(flex-)?(.*)/,Yo+"box-pack:$3"+Mf+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Yo+n+n;case 4095:case 3583:case 4068:case 2532:return Xo(n,/(.+)-inline(.+)/,Yo+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(q0(n)-1-e>6)switch(rf(n,e+1)){case 109:if(rf(n,e+4)!==45)break;case 102:return Xo(n,/(.+:)(.+)-([^]+)/,"$1"+Yo+"$2-$3$1"+sR+(rf(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~DD(n,"stretch")?RX(Xo(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(rf(n,e+1)!==115)break;case 6444:switch(rf(n,q0(n)-3-(~DD(n,"!important")&&10))){case 107:return Xo(n,":",":"+Yo)+n;case 101:return Xo(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Yo+(rf(n,14)===45?"inline-":"")+"box$3$1"+Yo+"$2$3$1"+Mf+"$2box$3")+n}break;case 5936:switch(rf(n,e+11)){case 114:return Yo+n+Mf+Xo(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Yo+n+Mf+Xo(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Yo+n+Mf+Xo(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Yo+n+Mf+n+n}return n}var Vue=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case oF:e.return=RX(e.value,e.length);break;case $X:return pw([nx(e,{value:Xo(e.value,"@","@"+Yo)})],s);case sF:if(e.length)return Mue(e.props,function(o){switch(Cue(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return pw([nx(e,{props:[Xo(o,/:(read-\w+)/,":"+sR+"$1")]})],s);case"::placeholder":return pw([nx(e,{props:[Xo(o,/:(plac\w+)/,":"+Yo+"input-$1")]}),nx(e,{props:[Xo(o,/:(plac\w+)/,":"+sR+"$1")]}),nx(e,{props:[Xo(o,/:(plac\w+)/,Mf+"input-$1")]})],s)}return""})}},jue=[Vue],kX=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(M){var A=M.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(M),M.setAttribute("data-s",""))})}var s=e.stylisPlugins||jue,o={},l,u=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(M){for(var A=M.getAttribute("data-emotion").split(" "),O=1;O<A.length;O++)o[A[O]]=!0;u.push(M)});var h,f=[Gue,Wue];{var g,y=[Pue,Fue(function(M){g.insert(M)})],b=Bue(f.concat(s,y)),S=function(A){return pw(Nue(A),b)};h=function(A,O,L,B){g=L,S(A?A+"{"+O.styles+"}":O.styles),B&&(C.inserted[O.name]=!0)}}var C={key:t,sheet:new Tue({key:t,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:h};return C.sheet.hydrate(u),C},OX={exports:{}},Ra={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d=typeof Symbol=="function"&&Symbol.for,lF=$d?Symbol.for("react.element"):60103,uF=$d?Symbol.for("react.portal"):60106,fk=$d?Symbol.for("react.fragment"):60107,pk=$d?Symbol.for("react.strict_mode"):60108,mk=$d?Symbol.for("react.profiler"):60114,gk=$d?Symbol.for("react.provider"):60109,_k=$d?Symbol.for("react.context"):60110,cF=$d?Symbol.for("react.async_mode"):60111,vk=$d?Symbol.for("react.concurrent_mode"):60111,yk=$d?Symbol.for("react.forward_ref"):60112,bk=$d?Symbol.for("react.suspense"):60113,Yue=$d?Symbol.for("react.suspense_list"):60120,Tk=$d?Symbol.for("react.memo"):60115,Sk=$d?Symbol.for("react.lazy"):60116,Xue=$d?Symbol.for("react.block"):60121,Kue=$d?Symbol.for("react.fundamental"):60117,Jue=$d?Symbol.for("react.responder"):60118,que=$d?Symbol.for("react.scope"):60119;function Gm(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case lF:switch(n=n.type,n){case cF:case vk:case fk:case mk:case pk:case bk:return n;default:switch(n=n&&n.$$typeof,n){case _k:case yk:case Sk:case Tk:case gk:return n;default:return e}}case uF:return e}}}function LX(n){return Gm(n)===vk}Ra.AsyncMode=cF;Ra.ConcurrentMode=vk;Ra.ContextConsumer=_k;Ra.ContextProvider=gk;Ra.Element=lF;Ra.ForwardRef=yk;Ra.Fragment=fk;Ra.Lazy=Sk;Ra.Memo=Tk;Ra.Portal=uF;Ra.Profiler=mk;Ra.StrictMode=pk;Ra.Suspense=bk;Ra.isAsyncMode=function(n){return LX(n)||Gm(n)===cF};Ra.isConcurrentMode=LX;Ra.isContextConsumer=function(n){return Gm(n)===_k};Ra.isContextProvider=function(n){return Gm(n)===gk};Ra.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===lF};Ra.isForwardRef=function(n){return Gm(n)===yk};Ra.isFragment=function(n){return Gm(n)===fk};Ra.isLazy=function(n){return Gm(n)===Sk};Ra.isMemo=function(n){return Gm(n)===Tk};Ra.isPortal=function(n){return Gm(n)===uF};Ra.isProfiler=function(n){return Gm(n)===mk};Ra.isStrictMode=function(n){return Gm(n)===pk};Ra.isSuspense=function(n){return Gm(n)===bk};Ra.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===fk||n===vk||n===mk||n===pk||n===bk||n===Yue||typeof n=="object"&&n!==null&&(n.$$typeof===Sk||n.$$typeof===Tk||n.$$typeof===gk||n.$$typeof===_k||n.$$typeof===yk||n.$$typeof===Kue||n.$$typeof===Jue||n.$$typeof===que||n.$$typeof===Xue)};Ra.typeOf=Gm;OX.exports=Ra;var Que=OX.exports,NX=Que,Zue={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ece={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},DX={};DX[NX.ForwardRef]=Zue;DX[NX.Memo]=ece;var tce=!0;function nce(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):r+=s+" "}),r}var PX=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||tce===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},BX=function(e,t,r){PX(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var o=t;do e.insert(t===o?"."+s:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function rce(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var ice={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},sce=/[A-Z]|^ms/g,oce=/_EMO_([^_]+?)_([^]*?)_EMO_/g,FX=function(e){return e.charCodeAt(1)===45},nH=function(e){return e!=null&&typeof e!="boolean"},XO=EX(function(n){return FX(n)?n:n.replace(sce,"-$&").toLowerCase()}),rH=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(oce,function(r,s,o){return Q0={name:s,styles:o,next:Q0},s})}return ice[e]!==1&&!FX(e)&&typeof t=="number"&&t!==0?t+"px":t};function L$(n,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return Q0={name:t.name,styles:t.styles,next:Q0},t.name;if(t.styles!==void 0){var r=t.next;if(r!==void 0)for(;r!==void 0;)Q0={name:r.name,styles:r.styles,next:Q0},r=r.next;var s=t.styles+";";return s}return ace(n,e,t)}case"function":{if(n!==void 0){var o=Q0,l=t(n);return Q0=o,L$(n,e,l)}break}}if(e==null)return t;var u=e[t];return u!==void 0?u:t}function ace(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=L$(n,e,t[s])+";";else for(var o in t){var l=t[o];if(typeof l!="object")e!=null&&e[l]!==void 0?r+=o+"{"+e[l]+"}":nH(l)&&(r+=XO(o)+":"+rH(o,l)+";");else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var u=0;u<l.length;u++)nH(l[u])&&(r+=XO(o)+":"+rH(o,l[u])+";");else{var h=L$(n,e,l);switch(o){case"animation":case"animationName":{r+=XO(o)+":"+h+";";break}default:r+=o+"{"+h+"}"}}}return r}var iH=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Q0,hF=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,o="";Q0=void 0;var l=e[0];l==null||l.raw===void 0?(s=!1,o+=L$(r,t,l)):o+=l[0];for(var u=1;u<e.length;u++)o+=L$(r,t,e[u]),s&&(o+=l[u]);iH.lastIndex=0;for(var h="",f;(f=iH.exec(o))!==null;)h+="-"+f[1];var g=rce(o)+h;return{name:g,styles:o,next:Q0}},lce=function(e){return e()},zX=ON.useInsertionEffect?ON.useInsertionEffect:!1,uce=zX||lce,sH=zX||pe.useLayoutEffect,UX=pe.createContext(typeof HTMLElement<"u"?kX({key:"css"}):null),cce=UX.Provider,HX=function(e){return pe.forwardRef(function(t,r){var s=pe.useContext(UX);return e(t,s,r)})},wk=pe.createContext({}),hce=HX(function(n,e){var t=n.styles,r=hF([t],void 0,pe.useContext(wk)),s=pe.useRef();return sH(function(){var o=e.key+"-global",l=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),u=!1,h=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(l.before=e.sheet.tags[0]),h!==null&&(u=!0,h.setAttribute("data-emotion",o),l.hydrate([h])),s.current=[l,u],function(){l.flush()}},[e]),sH(function(){var o=s.current,l=o[0],u=o[1];if(u){o[1]=!1;return}if(r.next!==void 0&&BX(e,r.next,!0),l.tags.length){var h=l.tags[l.tags.length-1].nextElementSibling;l.before=h,l.flush()}e.insert("",r,l,!1)},[e,r.name]),null});function Ek(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return hF(e)}var aE=function(){var e=Ek.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},dce=vue,fce=function(e){return e!=="theme"},oH=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?dce:fce},aH=function(e,t,r){var s;if(t){var o=t.shouldForwardProp;s=e.__emotion_forwardProp&&o?function(l){return e.__emotion_forwardProp(l)&&o(l)}:o}return typeof s!="function"&&r&&(s=e.__emotion_forwardProp),s},pce=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return PX(t,r,s),uce(function(){return BX(t,r,s)}),null},mce=function n(e,t){var r=e.__emotion_real===e,s=r&&e.__emotion_base||e,o,l;t!==void 0&&(o=t.label,l=t.target);var u=aH(e,t,r),h=u||oH(s),f=!h("as");return function(){var g=arguments,y=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&y.push("label:"+o+";"),g[0]==null||g[0].raw===void 0)y.push.apply(y,g);else{y.push(g[0][0]);for(var b=g.length,S=1;S<b;S++)y.push(g[S],g[0][S])}var C=HX(function(M,A,O){var L=f&&M.as||s,B="",D=[],z=M;if(M.theme==null){z={};for(var U in M)z[U]=M[U];z.theme=pe.useContext(wk)}typeof M.className=="string"?B=nce(A.registered,D,M.className):M.className!=null&&(B=M.className+" ");var V=hF(y.concat(D),A.registered,z);B+=A.key+"-"+V.name,l!==void 0&&(B+=" "+l);var H=f&&u===void 0?oH(L):h,oe={};for(var le in M)f&&le==="as"||H(le)&&(oe[le]=M[le]);return oe.className=B,oe.ref=O,pe.createElement(pe.Fragment,null,pe.createElement(pce,{cache:A,serialized:V,isStringTag:typeof L=="string"}),pe.createElement(L,oe))});return C.displayName=o!==void 0?o:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",C.defaultProps=e.defaultProps,C.__emotion_real=C,C.__emotion_base=s,C.__emotion_styles=y,C.__emotion_forwardProp=u,Object.defineProperty(C,"toString",{value:function(){return"."+l}}),C.withComponent=function(M,A){return n(M,Je({},t,A,{shouldForwardProp:aH(C,A,!0)})).apply(void 0,y)},C}},gce=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],BD=mce.bind();gce.forEach(function(n){BD[n]=BD(n)});var GX={exports:{}},_ce="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",vce=_ce,yce=vce;function WX(){}function VX(){}VX.resetWarningCache=WX;var bce=function(){function n(r,s,o,l,u,h){if(h!==yce){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:VX,resetWarningCache:WX};return t.PropTypes=t,t};GX.exports=bce();var Tce=GX.exports;const qt=Xy(Tce);let FD;typeof document=="object"&&(FD=kX({key:"css",prepend:!0}));function Sce(n){const{injectFirst:e,children:t}=n;return e&&FD?Pe.jsx(cce,{value:FD,children:t}):t}function wce(n){return n==null||Object.keys(n).length===0}function jX(n){const{styles:e,defaultTheme:t={}}=n,r=typeof e=="function"?s=>e(wce(s)?t:s):e;return Pe.jsx(hce,{styles:r})}function dF(n,e){return BD(n,e)}const YX=(n,e)=>{Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))},Ece=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:jX,StyledEngineProvider:Sce,ThemeContext:wk,css:Ek,default:dF,internal_processStyles:YX,keyframes:aE},Symbol.toStringTag,{value:"Module"}));function ov(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function XX(n){if(!ov(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=XX(n[t])}),e}function fp(n,e,t={clone:!0}){const r=t.clone?Je({},n):n;return ov(n)&&ov(e)&&Object.keys(e).forEach(s=>{s!=="__proto__"&&(ov(e[s])&&s in n&&ov(n[s])?r[s]=fp(n[s],e[s],t):t.clone?r[s]=ov(e[s])?XX(e[s]):e[s]:r[s]=e[s])}),r}const xce=Object.freeze(Object.defineProperty({__proto__:null,default:fp,isPlainObject:ov},Symbol.toStringTag,{value:"Module"})),$ce=["values","unit","step"],Cce=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>Je({},t,{[r.key]:r.val}),{})};function KX(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5}=n,s=xr(n,$ce),o=Cce(e),l=Object.keys(o);function u(b){return`@media (min-width:${typeof e[b]=="number"?e[b]:b}${t})`}function h(b){return`@media (max-width:${(typeof e[b]=="number"?e[b]:b)-r/100}${t})`}function f(b,S){const C=l.indexOf(S);return`@media (min-width:${typeof e[b]=="number"?e[b]:b}${t}) and (max-width:${(C!==-1&&typeof e[l[C]]=="number"?e[l[C]]:S)-r/100}${t})`}function g(b){return l.indexOf(b)+1<l.length?f(b,l[l.indexOf(b)+1]):u(b)}function y(b){const S=l.indexOf(b);return S===0?u(l[1]):S===l.length-1?h(l[S]):f(b,l[l.indexOf(b)+1]).replace("@media","@media not all and")}return Je({keys:l,values:o,up:u,down:h,between:f,only:g,not:y,unit:t},s)}const Mce={borderRadius:4},Ace=Mce;function Qx(n,e){return e?fp(n,e,{clone:!1}):n}const fF={xs:0,sm:600,md:900,lg:1200,xl:1536},lH={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${fF[n]}px)`};function Qp(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const o=r.breakpoints||lH;return e.reduce((l,u,h)=>(l[o.up(o.keys[h])]=t(e[h]),l),{})}if(typeof e=="object"){const o=r.breakpoints||lH;return Object.keys(e).reduce((l,u)=>{if(Object.keys(o.values||fF).indexOf(u)!==-1){const h=o.up(u);l[h]=t(e[u],u)}else{const h=u;l[h]=e[h]}return l},{})}return t(e)}function JX(n={}){var e;return((e=n.keys)==null?void 0:e.reduce((r,s)=>{const o=n.up(s);return r[o]={},r},{}))||{}}function qX(n,e){return n.reduce((t,r)=>{const s=t[r];return(!s||Object.keys(s).length===0)&&delete t[r],t},e)}function Ice(n,...e){const t=JX(n),r=[t,...e].reduce((s,o)=>fp(s,o),{});return qX(Object.keys(t),r)}function Rce(n,e){if(typeof n!="object")return{};const t={},r=Object.keys(e);return Array.isArray(n)?r.forEach((s,o)=>{o<n.length&&(t[s]=!0)}):r.forEach(s=>{n[s]!=null&&(t[s]=!0)}),t}function O1({values:n,breakpoints:e,base:t}){const r=t||Rce(n,e),s=Object.keys(r);if(s.length===0)return n;let o;return s.reduce((l,u,h)=>(Array.isArray(n)?(l[u]=n[h]!=null?n[h]:n[o],o=h):typeof n=="object"?(l[u]=n[u]!=null?n[u]:n[o],o=u):l[u]=n,l),{})}function cr(n){if(typeof n!="string")throw new Error(J1(7));return n.charAt(0).toUpperCase()+n.slice(1)}const kce=Object.freeze(Object.defineProperty({__proto__:null,default:cr},Symbol.toStringTag,{value:"Module"}));function xk(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((s,o)=>s&&s[o]?s[o]:null,n);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,n)}function oR(n,e,t,r=t){let s;return typeof n=="function"?s=n(t):Array.isArray(n)?s=n[t]||r:s=xk(n,t)||r,e&&(s=e(s,r,n)),s}function fh(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:s}=n,o=l=>{if(l[e]==null)return null;const u=l[e],h=l.theme,f=xk(h,r)||{};return Qp(l,u,y=>{let b=oR(f,s,y);return y===b&&typeof y=="string"&&(b=oR(f,s,`${e}${y==="default"?"":cr(y)}`,y)),t===!1?b:{[t]:b}})};return o.propTypes={},o.filterProps=[e],o}function Oce(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const Lce={m:"margin",p:"padding"},Nce={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},uH={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Dce=Oce(n=>{if(n.length>2)if(uH[n])n=uH[n];else return[n];const[e,t]=n.split(""),r=Lce[e],s=Nce[t]||"";return Array.isArray(s)?s.map(o=>r+o):[r+s]}),pF=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],mF=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...pF,...mF];function EC(n,e,t,r){var s;const o=(s=xk(n,e,!1))!=null?s:t;return typeof o=="number"?l=>typeof l=="string"?l:o*l:Array.isArray(o)?l=>typeof l=="string"?l:o[l]:typeof o=="function"?o:()=>{}}function gF(n){return EC(n,"spacing",8)}function q1(n,e){if(typeof e=="string"||e==null)return e;const t=Math.abs(e),r=n(t);return e>=0?r:typeof r=="number"?-r:`-${r}`}function Pce(n,e){return t=>n.reduce((r,s)=>(r[s]=q1(e,t),r),{})}function Bce(n,e,t,r){if(e.indexOf(t)===-1)return null;const s=Dce(t),o=Pce(s,r),l=n[t];return Qp(n,l,o)}function QX(n,e){const t=gF(n.theme);return Object.keys(n).map(r=>Bce(n,e,r,t)).reduce(Qx,{})}function Rc(n){return QX(n,pF)}Rc.propTypes={};Rc.filterProps=pF;function kc(n){return QX(n,mF)}kc.propTypes={};kc.filterProps=mF;function Fce(n=8){if(n.mui)return n;const e=gF({spacing:n}),t=(...r)=>(r.length===0?[1]:r).map(o=>{const l=e(o);return typeof l=="number"?`${l}px`:l}).join(" ");return t.mui=!0,t}function $k(...n){const e=n.reduce((r,s)=>(s.filterProps.forEach(o=>{r[o]=s}),r),{}),t=r=>Object.keys(r).reduce((s,o)=>e[o]?Qx(s,e[o](r)):s,{});return t.propTypes={},t.filterProps=n.reduce((r,s)=>r.concat(s.filterProps),[]),t}function _g(n){return typeof n!="number"?n:`${n}px solid`}function xg(n,e){return fh({prop:n,themeKey:"borders",transform:e})}const zce=xg("border",_g),Uce=xg("borderTop",_g),Hce=xg("borderRight",_g),Gce=xg("borderBottom",_g),Wce=xg("borderLeft",_g),Vce=xg("borderColor"),jce=xg("borderTopColor"),Yce=xg("borderRightColor"),Xce=xg("borderBottomColor"),Kce=xg("borderLeftColor"),Jce=xg("outline",_g),qce=xg("outlineColor"),Ck=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=EC(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:q1(e,r)});return Qp(n,n.borderRadius,t)}return null};Ck.propTypes={};Ck.filterProps=["borderRadius"];$k(zce,Uce,Hce,Gce,Wce,Vce,jce,Yce,Xce,Kce,Ck,Jce,qce);const Mk=n=>{if(n.gap!==void 0&&n.gap!==null){const e=EC(n.theme,"spacing",8),t=r=>({gap:q1(e,r)});return Qp(n,n.gap,t)}return null};Mk.propTypes={};Mk.filterProps=["gap"];const Ak=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=EC(n.theme,"spacing",8),t=r=>({columnGap:q1(e,r)});return Qp(n,n.columnGap,t)}return null};Ak.propTypes={};Ak.filterProps=["columnGap"];const Ik=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=EC(n.theme,"spacing",8),t=r=>({rowGap:q1(e,r)});return Qp(n,n.rowGap,t)}return null};Ik.propTypes={};Ik.filterProps=["rowGap"];const Qce=fh({prop:"gridColumn"}),Zce=fh({prop:"gridRow"}),ehe=fh({prop:"gridAutoFlow"}),the=fh({prop:"gridAutoColumns"}),nhe=fh({prop:"gridAutoRows"}),rhe=fh({prop:"gridTemplateColumns"}),ihe=fh({prop:"gridTemplateRows"}),she=fh({prop:"gridTemplateAreas"}),ohe=fh({prop:"gridArea"});$k(Mk,Ak,Ik,Qce,Zce,ehe,the,nhe,rhe,ihe,she,ohe);function mw(n,e){return e==="grey"?e:n}const ahe=fh({prop:"color",themeKey:"palette",transform:mw}),lhe=fh({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:mw}),uhe=fh({prop:"backgroundColor",themeKey:"palette",transform:mw});$k(ahe,lhe,uhe);function Mm(n){return n<=1&&n!==0?`${n*100}%`:n}const che=fh({prop:"width",transform:Mm}),_F=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var r,s;const o=((r=n.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[t])||fF[t];return o?((s=n.theme)==null||(s=s.breakpoints)==null?void 0:s.unit)!=="px"?{maxWidth:`${o}${n.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:Mm(t)}};return Qp(n,n.maxWidth,e)}return null};_F.filterProps=["maxWidth"];const hhe=fh({prop:"minWidth",transform:Mm}),dhe=fh({prop:"height",transform:Mm}),fhe=fh({prop:"maxHeight",transform:Mm}),phe=fh({prop:"minHeight",transform:Mm});fh({prop:"size",cssProperty:"width",transform:Mm});fh({prop:"size",cssProperty:"height",transform:Mm});const mhe=fh({prop:"boxSizing"});$k(che,_F,hhe,dhe,fhe,phe,mhe);const ghe={border:{themeKey:"borders",transform:_g},borderTop:{themeKey:"borders",transform:_g},borderRight:{themeKey:"borders",transform:_g},borderBottom:{themeKey:"borders",transform:_g},borderLeft:{themeKey:"borders",transform:_g},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:_g},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Ck},color:{themeKey:"palette",transform:mw},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:mw},backgroundColor:{themeKey:"palette",transform:mw},p:{style:kc},pt:{style:kc},pr:{style:kc},pb:{style:kc},pl:{style:kc},px:{style:kc},py:{style:kc},padding:{style:kc},paddingTop:{style:kc},paddingRight:{style:kc},paddingBottom:{style:kc},paddingLeft:{style:kc},paddingX:{style:kc},paddingY:{style:kc},paddingInline:{style:kc},paddingInlineStart:{style:kc},paddingInlineEnd:{style:kc},paddingBlock:{style:kc},paddingBlockStart:{style:kc},paddingBlockEnd:{style:kc},m:{style:Rc},mt:{style:Rc},mr:{style:Rc},mb:{style:Rc},ml:{style:Rc},mx:{style:Rc},my:{style:Rc},margin:{style:Rc},marginTop:{style:Rc},marginRight:{style:Rc},marginBottom:{style:Rc},marginLeft:{style:Rc},marginX:{style:Rc},marginY:{style:Rc},marginInline:{style:Rc},marginInlineStart:{style:Rc},marginInlineEnd:{style:Rc},marginBlock:{style:Rc},marginBlockStart:{style:Rc},marginBlockEnd:{style:Rc},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Mk},rowGap:{style:Ik},columnGap:{style:Ak},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Mm},maxWidth:{style:_F},minWidth:{transform:Mm},height:{transform:Mm},maxHeight:{transform:Mm},minHeight:{transform:Mm},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},xC=ghe;function _he(...n){const e=n.reduce((r,s)=>r.concat(Object.keys(s)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function vhe(n,e){return typeof n=="function"?n(e):n}function ZX(){function n(t,r,s,o){const l={[t]:r,theme:s},u=o[t];if(!u)return{[t]:r};const{cssProperty:h=t,themeKey:f,transform:g,style:y}=u;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[t]:r};const b=xk(s,f)||{};return y?y(l):Qp(l,r,C=>{let M=oR(b,g,C);return C===M&&typeof C=="string"&&(M=oR(b,g,`${t}${C==="default"?"":cr(C)}`,C)),h===!1?M:{[h]:M}})}function e(t){var r;const{sx:s,theme:o={}}=t||{};if(!s)return null;const l=(r=o.unstable_sxConfig)!=null?r:xC;function u(h){let f=h;if(typeof h=="function")f=h(o);else if(typeof h!="object")return h;if(!f)return null;const g=JX(o.breakpoints),y=Object.keys(g);let b=g;return Object.keys(f).forEach(S=>{const C=vhe(f[S],o);if(C!=null)if(typeof C=="object")if(l[S])b=Qx(b,n(S,C,o,l));else{const M=Qp({theme:o},C,A=>({[S]:A}));_he(M,C)?b[S]=e({sx:C,theme:o}):b=Qx(b,M)}else b=Qx(b,n(S,C,o,l))}),qX(y,b)}return Array.isArray(s)?s.map(u):u(s)}return e}const eK=ZX();eK.filterProps=["sx"];const $C=eK;function tK(n,e){const t=this;return t.vars&&typeof t.getColorSchemeSelector=="function"?{[t.getColorSchemeSelector(n).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:t.palette.mode===n?e:{}}const yhe=["breakpoints","palette","spacing","shape"];function lE(n={},...e){const{breakpoints:t={},palette:r={},spacing:s,shape:o={}}=n,l=xr(n,yhe),u=KX(t),h=Fce(s);let f=fp({breakpoints:u,direction:"ltr",components:{},palette:Je({mode:"light"},r),spacing:h,shape:Je({},Ace,o)},l);return f.applyStyles=tK,f=e.reduce((g,y)=>fp(g,y),f),f.unstable_sxConfig=Je({},xC,l==null?void 0:l.unstable_sxConfig),f.unstable_sx=function(y){return $C({sx:y,theme:this})},f}const bhe=Object.freeze(Object.defineProperty({__proto__:null,default:lE,private_createBreakpoints:KX,unstable_applyStyles:tK},Symbol.toStringTag,{value:"Module"}));function The(n){return Object.keys(n).length===0}function She(n=null){const e=pe.useContext(wk);return!e||The(e)?n:e}const whe=lE();function Rk(n=whe){return She(n)}function Ehe({styles:n,themeId:e,defaultTheme:t={}}){const r=Rk(t),s=typeof n=="function"?n(e&&r[e]||r):n;return Pe.jsx(jX,{styles:s})}const xhe=["sx"],$he=n=>{var e,t;const r={systemProps:{},otherProps:{}},s=(e=n==null||(t=n.theme)==null?void 0:t.unstable_sxConfig)!=null?e:xC;return Object.keys(n).forEach(o=>{s[o]?r.systemProps[o]=n[o]:r.otherProps[o]=n[o]}),r};function CC(n){const{sx:e}=n,t=xr(n,xhe),{systemProps:r,otherProps:s}=$he(t);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...l)=>{const u=e(...l);return ov(u)?Je({},r,u):r}:o=Je({},r,e),Je({},s,{sx:o})}const Che=Object.freeze(Object.defineProperty({__proto__:null,default:$C,extendSxProp:CC,unstable_createStyleFunctionSx:ZX,unstable_defaultSxConfig:xC},Symbol.toStringTag,{value:"Module"})),cH=n=>n,Mhe=()=>{let n=cH;return{configure(e){n=e},generate(e){return n(e)},reset(){n=cH}}},Ahe=Mhe(),vF=Ahe;function nK(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=nK(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function ii(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=nK(n))&&(r&&(r+=" "),r+=e);return r}const Ihe=["className","component"];function Rhe(n={}){const{themeId:e,defaultTheme:t,defaultClassName:r="MuiBox-root",generateClassName:s}=n,o=dF("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})($C);return pe.forwardRef(function(h,f){const g=Rk(t),y=CC(h),{className:b,component:S="div"}=y,C=xr(y,Ihe);return Pe.jsx(o,Je({as:S,ref:f,className:ii(b,s?s(r):r),theme:e&&g[e]||g},C))})}const khe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Eo(n,e,t="Mui"){const r=khe[e];return r?`${t}-${r}`:`${vF.generate(n)}-${e}`}function Bo(n,e,t="Mui"){const r={};return e.forEach(s=>{r[s]=Eo(n,s,t)}),r}var rK={exports:{}},ka={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yF=Symbol.for("react.element"),bF=Symbol.for("react.portal"),kk=Symbol.for("react.fragment"),Ok=Symbol.for("react.strict_mode"),Lk=Symbol.for("react.profiler"),Nk=Symbol.for("react.provider"),Dk=Symbol.for("react.context"),Ohe=Symbol.for("react.server_context"),Pk=Symbol.for("react.forward_ref"),Bk=Symbol.for("react.suspense"),Fk=Symbol.for("react.suspense_list"),zk=Symbol.for("react.memo"),Uk=Symbol.for("react.lazy"),Lhe=Symbol.for("react.offscreen"),iK;iK=Symbol.for("react.module.reference");function $g(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case yF:switch(n=n.type,n){case kk:case Lk:case Ok:case Bk:case Fk:return n;default:switch(n=n&&n.$$typeof,n){case Ohe:case Dk:case Pk:case Uk:case zk:case Nk:return n;default:return e}}case bF:return e}}}ka.ContextConsumer=Dk;ka.ContextProvider=Nk;ka.Element=yF;ka.ForwardRef=Pk;ka.Fragment=kk;ka.Lazy=Uk;ka.Memo=zk;ka.Portal=bF;ka.Profiler=Lk;ka.StrictMode=Ok;ka.Suspense=Bk;ka.SuspenseList=Fk;ka.isAsyncMode=function(){return!1};ka.isConcurrentMode=function(){return!1};ka.isContextConsumer=function(n){return $g(n)===Dk};ka.isContextProvider=function(n){return $g(n)===Nk};ka.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===yF};ka.isForwardRef=function(n){return $g(n)===Pk};ka.isFragment=function(n){return $g(n)===kk};ka.isLazy=function(n){return $g(n)===Uk};ka.isMemo=function(n){return $g(n)===zk};ka.isPortal=function(n){return $g(n)===bF};ka.isProfiler=function(n){return $g(n)===Lk};ka.isStrictMode=function(n){return $g(n)===Ok};ka.isSuspense=function(n){return $g(n)===Bk};ka.isSuspenseList=function(n){return $g(n)===Fk};ka.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===kk||n===Lk||n===Ok||n===Bk||n===Fk||n===Lhe||typeof n=="object"&&n!==null&&(n.$$typeof===Uk||n.$$typeof===zk||n.$$typeof===Nk||n.$$typeof===Dk||n.$$typeof===Pk||n.$$typeof===iK||n.getModuleId!==void 0)};ka.typeOf=$g;rK.exports=ka;var hH=rK.exports;const Nhe=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function sK(n){const e=`${n}`.match(Nhe);return e&&e[1]||""}function oK(n,e=""){return n.displayName||n.name||sK(n)||e}function dH(n,e,t){const r=oK(e);return n.displayName||(r!==""?`${t}(${r})`:t)}function Dhe(n){if(n!=null){if(typeof n=="string")return n;if(typeof n=="function")return oK(n,"Component");if(typeof n=="object")switch(n.$$typeof){case hH.ForwardRef:return dH(n,n.render,"ForwardRef");case hH.Memo:return dH(n,n.type,"memo");default:return}}}const Phe=Object.freeze(Object.defineProperty({__proto__:null,default:Dhe,getFunctionName:sK},Symbol.toStringTag,{value:"Module"})),Bhe=["ownerState"],Fhe=["variants"],zhe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Uhe(n){return Object.keys(n).length===0}function Hhe(n){return typeof n=="string"&&n.charCodeAt(0)>96}function KO(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const Ghe=lE(),Whe=n=>n&&n.charAt(0).toLowerCase()+n.slice(1);function PM({defaultTheme:n,theme:e,themeId:t}){return Uhe(e)?n:e[t]||e}function Vhe(n){return n?(e,t)=>t[n]:null}function hI(n,e){let{ownerState:t}=e,r=xr(e,Bhe);const s=typeof n=="function"?n(Je({ownerState:t},r)):n;if(Array.isArray(s))return s.flatMap(o=>hI(o,Je({ownerState:t},r)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=xr(s,Fhe);return o.forEach(h=>{let f=!0;typeof h.props=="function"?f=h.props(Je({ownerState:t},r,t)):Object.keys(h.props).forEach(g=>{(t==null?void 0:t[g])!==h.props[g]&&r[g]!==h.props[g]&&(f=!1)}),f&&(Array.isArray(u)||(u=[u]),u.push(typeof h.style=="function"?h.style(Je({ownerState:t},r,t)):h.style))}),u}return s}function jhe(n={}){const{themeId:e,defaultTheme:t=Ghe,rootShouldForwardProp:r=KO,slotShouldForwardProp:s=KO}=n,o=l=>$C(Je({},l,{theme:PM(Je({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{YX(l,z=>z.filter(U=>!(U!=null&&U.__mui_systemSx)));const{name:h,slot:f,skipVariantsResolver:g,skipSx:y,overridesResolver:b=Vhe(Whe(f))}=u,S=xr(u,zhe),C=g!==void 0?g:f&&f!=="Root"&&f!=="root"||!1,M=y||!1;let A,O=KO;f==="Root"||f==="root"?O=r:f?O=s:Hhe(l)&&(O=void 0);const L=dF(l,Je({shouldForwardProp:O,label:A},S)),B=z=>typeof z=="function"&&z.__emotion_real!==z||ov(z)?U=>hI(z,Je({},U,{theme:PM({theme:U.theme,defaultTheme:t,themeId:e})})):z,D=(z,...U)=>{let V=B(z);const H=U?U.map(B):[];h&&b&&H.push(Z=>{const q=PM(Je({},Z,{defaultTheme:t,themeId:e}));if(!q.components||!q.components[h]||!q.components[h].styleOverrides)return null;const he=q.components[h].styleOverrides,ae={};return Object.entries(he).forEach(([ue,ge])=>{ae[ue]=hI(ge,Je({},Z,{theme:q}))}),b(Z,ae)}),h&&!C&&H.push(Z=>{var q;const he=PM(Je({},Z,{defaultTheme:t,themeId:e})),ae=he==null||(q=he.components)==null||(q=q[h])==null?void 0:q.variants;return hI({variants:ae},Je({},Z,{theme:he}))}),M||H.push(o);const oe=H.length-U.length;if(Array.isArray(z)&&oe>0){const Z=new Array(oe).fill("");V=[...z,...Z],V.raw=[...z.raw,...Z]}const le=L(V,...H);return l.muiName&&(le.muiName=l.muiName),le};return L.withConfig&&(D.withConfig=L.withConfig),D}}const aK=jhe();function TF(n,e){const t=Je({},e);return Object.keys(n).forEach(r=>{if(r.toString().match(/^(components|slots)$/))t[r]=Je({},n[r],t[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const s=n[r]||{},o=e[r];t[r]={},!o||!Object.keys(o)?t[r]=s:!s||!Object.keys(s)?t[r]=o:(t[r]=Je({},o),Object.keys(s).forEach(l=>{t[r][l]=TF(s[l],o[l])}))}else t[r]===void 0&&(t[r]=n[r])}),t}function Yhe(n){const{theme:e,name:t,props:r}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?r:TF(e.components[t].defaultProps,r)}function SF({props:n,name:e,defaultTheme:t,themeId:r}){let s=Rk(t);return r&&(s=s[r]||s),Yhe({theme:s,name:e,props:n})}const Xhe=typeof window<"u"?pe.useLayoutEffect:pe.useEffect,Uy=Xhe;function Khe(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}const Jhe=Object.freeze(Object.defineProperty({__proto__:null,default:Khe},Symbol.toStringTag,{value:"Module"}));function zD(...n){return n.reduce((e,t)=>t==null?e:function(...s){e.apply(this,s),t.apply(this,s)},()=>{})}function wF(n,e=166){let t;function r(...s){const o=()=>{n.apply(this,s)};clearTimeout(t),t=setTimeout(o,e)}return r.clear=()=>{clearTimeout(t)},r}function qhe(n,e){return()=>null}function dI(n,e){var t,r;return pe.isValidElement(n)&&e.indexOf((t=n.type.muiName)!=null?t:(r=n.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function Jp(n){return n&&n.ownerDocument||document}function Hy(n){return Jp(n).defaultView||window}function Qhe(n,e){return()=>null}function aR(n,e){typeof n=="function"?n(e):n&&(n.current=e)}let fH=0;function Zhe(n){const[e,t]=pe.useState(n),r=n||e;return pe.useEffect(()=>{e==null&&(fH+=1,t(`mui-${fH}`))},[e]),r}const pH=ON.useId;function Hk(n){if(pH!==void 0){const e=pH();return n??e}return Zhe(n)}function ede(n,e,t,r,s){return null}function lR({controlled:n,default:e,name:t,state:r="value"}){const{current:s}=pe.useRef(n!==void 0),[o,l]=pe.useState(e),u=s?n:o,h=pe.useCallback(f=>{s||l(f)},[]);return[u,h]}function T1(n){const e=pe.useRef(n);return Uy(()=>{e.current=n}),pe.useRef((...t)=>(0,e.current)(...t)).current}function gp(...n){return pe.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{aR(t,e)})},n)}const mH={};function tde(n,e){const t=pe.useRef(mH);return t.current===mH&&(t.current=n(e)),t}const nde=[];function rde(n){pe.useEffect(n,nde)}class Gk{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new Gk}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function lK(){const n=tde(Gk.create).current;return rde(n.disposeEffect),n}let Wk=!0,UD=!1;const ide=new Gk,sde={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function ode(n){const{type:e,tagName:t}=n;return!!(t==="INPUT"&&sde[e]&&!n.readOnly||t==="TEXTAREA"&&!n.readOnly||n.isContentEditable)}function ade(n){n.metaKey||n.altKey||n.ctrlKey||(Wk=!0)}function JO(){Wk=!1}function lde(){this.visibilityState==="hidden"&&UD&&(Wk=!0)}function ude(n){n.addEventListener("keydown",ade,!0),n.addEventListener("mousedown",JO,!0),n.addEventListener("pointerdown",JO,!0),n.addEventListener("touchstart",JO,!0),n.addEventListener("visibilitychange",lde,!0)}function cde(n){const{target:e}=n;try{return e.matches(":focus-visible")}catch{}return Wk||ode(e)}function uK(){const n=pe.useCallback(s=>{s!=null&&ude(s.ownerDocument)},[]),e=pe.useRef(!1);function t(){return e.current?(UD=!0,ide.start(100,()=>{UD=!1}),e.current=!1,!0):!1}function r(s){return cde(s)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:t,ref:n}}function cK(n){const e=n.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function Fo(n,e,t=void 0){const r={};return Object.keys(n).forEach(s=>{r[s]=n[s].reduce((o,l)=>{if(l){const u=e(l);u!==""&&o.push(u),t&&t[l]&&o.push(t[l])}return o},[]).join(" ")}),r}const hde=pe.createContext(),dde=()=>{const n=pe.useContext(hde);return n??!1};function N$(n){"@babel/helpers - typeof";return N$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N$(n)}function fde(n,e){if(N$(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(N$(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pde(n){var e=fde(n,"string");return N$(e)=="symbol"?e:e+""}const mde=["className","component","disableGutters","fixed","maxWidth","classes"],gde=lE(),_de=aK("div",{name:"MuiContainer",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`maxWidth${cr(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),vde=n=>SF({props:n,name:"MuiContainer",defaultTheme:gde}),yde=(n,e)=>{const t=h=>Eo(e,h),{classes:r,fixed:s,disableGutters:o,maxWidth:l}=n,u={root:["root",l&&`maxWidth${cr(String(l))}`,s&&"fixed",o&&"disableGutters"]};return Fo(u,t,r)};function bde(n={}){const{createStyledComponent:e=_de,useThemeProps:t=vde,componentName:r="MuiContainer"}=n,s=e(({theme:l,ownerState:u})=>Je({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!u.disableGutters&&{paddingLeft:l.spacing(2),paddingRight:l.spacing(2),[l.breakpoints.up("sm")]:{paddingLeft:l.spacing(3),paddingRight:l.spacing(3)}}),({theme:l,ownerState:u})=>u.fixed&&Object.keys(l.breakpoints.values).reduce((h,f)=>{const g=f,y=l.breakpoints.values[g];return y!==0&&(h[l.breakpoints.up(g)]={maxWidth:`${y}${l.breakpoints.unit}`}),h},{}),({theme:l,ownerState:u})=>Je({},u.maxWidth==="xs"&&{[l.breakpoints.up("xs")]:{maxWidth:Math.max(l.breakpoints.values.xs,444)}},u.maxWidth&&u.maxWidth!=="xs"&&{[l.breakpoints.up(u.maxWidth)]:{maxWidth:`${l.breakpoints.values[u.maxWidth]}${l.breakpoints.unit}`}}));return pe.forwardRef(function(u,h){const f=t(u),{className:g,component:y="div",disableGutters:b=!1,fixed:S=!1,maxWidth:C="lg"}=f,M=xr(f,mde),A=Je({},f,{component:y,disableGutters:b,fixed:S,maxWidth:C}),O=yde(A,r);return Pe.jsx(s,Je({as:y,ownerState:A,className:ii(O.root,g),ref:h},M))})}const Tde=["component","direction","spacing","divider","children","className","useFlexGap"],Sde=lE(),wde=aK("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root});function Ede(n){return SF({props:n,name:"MuiStack",defaultTheme:Sde})}function xde(n,e){const t=pe.Children.toArray(n).filter(Boolean);return t.reduce((r,s,o)=>(r.push(s),o<t.length-1&&r.push(pe.cloneElement(e,{key:`separator-${o}`})),r),[])}const $de=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],Cde=({ownerState:n,theme:e})=>{let t=Je({display:"flex",flexDirection:"column"},Qp({theme:e},O1({values:n.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r})));if(n.spacing){const r=gF(e),s=Object.keys(e.breakpoints.values).reduce((h,f)=>((typeof n.spacing=="object"&&n.spacing[f]!=null||typeof n.direction=="object"&&n.direction[f]!=null)&&(h[f]=!0),h),{}),o=O1({values:n.direction,base:s}),l=O1({values:n.spacing,base:s});typeof o=="object"&&Object.keys(o).forEach((h,f,g)=>{if(!o[h]){const b=f>0?o[g[f-1]]:"column";o[h]=b}}),t=fp(t,Qp({theme:e},l,(h,f)=>n.useFlexGap?{gap:q1(r,h)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${$de(f?o[f]:n.direction)}`]:q1(r,h)}}))}return t=Ice(e.breakpoints,t),t};function Mde(n={}){const{createStyledComponent:e=wde,useThemeProps:t=Ede,componentName:r="MuiStack"}=n,s=()=>Fo({root:["root"]},h=>Eo(r,h),{}),o=e(Cde);return pe.forwardRef(function(h,f){const g=t(h),y=CC(g),{component:b="div",direction:S="column",spacing:C=0,divider:M,children:A,className:O,useFlexGap:L=!1}=y,B=xr(y,Tde),D={direction:S,spacing:C,useFlexGap:L},z=s();return Pe.jsx(o,Je({as:b,ownerState:D,ref:f,className:ii(z.root,O)},B,{children:M?xde(A,M):A}))})}function Ade(n,e){return Je({toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}}},e)}var ph={},hK={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(hK);var uE=hK.exports;const Ide=g_(mue),Rde=g_(Jhe);var dK=uE;Object.defineProperty(ph,"__esModule",{value:!0});var n0=ph.alpha=vK;ph.blend=Hde;ph.colorChannel=void 0;var fK=ph.darken=xF;ph.decomposeColor=wg;ph.emphasize=yK;var kde=ph.getContrastRatio=Pde;ph.getLuminance=uR;ph.hexToRgb=mK;ph.hslToRgb=_K;var pK=ph.lighten=$F;ph.private_safeAlpha=Bde;ph.private_safeColorChannel=void 0;ph.private_safeDarken=Fde;ph.private_safeEmphasize=Ude;ph.private_safeLighten=zde;ph.recomposeColor=cE;ph.rgbToHex=Dde;var gH=dK(Ide),Ode=dK(Rde);function EF(n,e=0,t=1){return(0,Ode.default)(n,e,t)}function mK(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Lde(n){const e=n.toString(16);return e.length===1?`0${e}`:e}function wg(n){if(n.type)return n;if(n.charAt(0)==="#")return wg(mK(n));const e=n.indexOf("("),t=n.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(t)===-1)throw new Error((0,gH.default)(9,n));let r=n.substring(e+1,n.length-1),s;if(t==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error((0,gH.default)(10,s))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:t,values:r,colorSpace:s}}const gK=n=>{const e=wg(n);return e.values.slice(0,3).map((t,r)=>e.type.indexOf("hsl")!==-1&&r!==0?`${t}%`:t).join(" ")};ph.colorChannel=gK;const Nde=(n,e)=>{try{return gK(n)}catch{return n}};ph.private_safeColorChannel=Nde;function cE(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.indexOf("rgb")!==-1?r=r.map((s,o)=>o<3?parseInt(s,10):s):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Dde(n){if(n.indexOf("#")===0)return n;const{values:e}=wg(n);return`#${e.map((t,r)=>Lde(r===3?Math.round(255*t):t)).join("")}`}function _K(n){n=wg(n);const{values:e}=n,t=e[0],r=e[1]/100,s=e[2]/100,o=r*Math.min(s,1-s),l=(f,g=(f+t/30)%12)=>s-o*Math.max(Math.min(g-3,9-g,1),-1);let u="rgb";const h=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return n.type==="hsla"&&(u+="a",h.push(e[3])),cE({type:u,values:h})}function uR(n){n=wg(n);let e=n.type==="hsl"||n.type==="hsla"?wg(_K(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Pde(n,e){const t=uR(n),r=uR(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function vK(n,e){return n=wg(n),e=EF(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,cE(n)}function Bde(n,e,t){try{return vK(n,e)}catch{return n}}function xF(n,e){if(n=wg(n),e=EF(e),n.type.indexOf("hsl")!==-1)n.values[2]*=1-e;else if(n.type.indexOf("rgb")!==-1||n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]*=1-e;return cE(n)}function Fde(n,e,t){try{return xF(n,e)}catch{return n}}function $F(n,e){if(n=wg(n),e=EF(e),n.type.indexOf("hsl")!==-1)n.values[2]+=(100-n.values[2])*e;else if(n.type.indexOf("rgb")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return cE(n)}function zde(n,e,t){try{return $F(n,e)}catch{return n}}function yK(n,e=.15){return uR(n)>.5?xF(n,e):$F(n,e)}function Ude(n,e,t){try{return yK(n,e)}catch{return n}}function Hde(n,e,t,r=1){const s=(h,f)=>Math.round((h**(1/r)*(1-t)+f**(1/r)*t)**r),o=wg(n),l=wg(e),u=[s(o.values[0],l.values[0]),s(o.values[1],l.values[1]),s(o.values[2],l.values[2])];return cE({type:"rgb",values:u})}const Gde=["mode","contrastThreshold","tonalOffset"],_H={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:R$.white,default:R$.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},qO={text:{primary:R$.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:R$.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function vH(n,e,t,r){const s=r.light||r,o=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=pK(n.main,s):e==="dark"&&(n.dark=fK(n.main,o)))}function Wde(n="light"){return n==="dark"?{main:cS[200],light:cS[50],dark:cS[400]}:{main:cS[700],light:cS[400],dark:cS[800]}}function Vde(n="light"){return n==="dark"?{main:uS[200],light:uS[50],dark:uS[400]}:{main:uS[500],light:uS[300],dark:uS[700]}}function jde(n="light"){return n==="dark"?{main:lS[500],light:lS[300],dark:lS[700]}:{main:lS[700],light:lS[400],dark:lS[800]}}function Yde(n="light"){return n==="dark"?{main:hS[400],light:hS[300],dark:hS[700]}:{main:hS[700],light:hS[500],dark:hS[900]}}function Xde(n="light"){return n==="dark"?{main:dS[400],light:dS[300],dark:dS[700]}:{main:dS[800],light:dS[500],dark:dS[900]}}function Kde(n="light"){return n==="dark"?{main:tx[400],light:tx[300],dark:tx[700]}:{main:"#ed6c02",light:tx[500],dark:tx[900]}}function Jde(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2}=n,s=xr(n,Gde),o=n.primary||Wde(e),l=n.secondary||Vde(e),u=n.error||jde(e),h=n.info||Yde(e),f=n.success||Xde(e),g=n.warning||Kde(e);function y(M){return kde(M,qO.text.primary)>=t?qO.text.primary:_H.text.primary}const b=({color:M,name:A,mainShade:O=500,lightShade:L=300,darkShade:B=700})=>{if(M=Je({},M),!M.main&&M[O]&&(M.main=M[O]),!M.hasOwnProperty("main"))throw new Error(J1(11,A?` (${A})`:"",O));if(typeof M.main!="string")throw new Error(J1(12,A?` (${A})`:"",JSON.stringify(M.main)));return vH(M,"light",L,r),vH(M,"dark",B,r),M.contrastText||(M.contrastText=y(M.main)),M},S={dark:qO,light:_H};return fp(Je({common:Je({},R$),mode:e,primary:b({color:o,name:"primary"}),secondary:b({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:u,name:"error"}),warning:b({color:g,name:"warning"}),info:b({color:h,name:"info"}),success:b({color:f,name:"success"}),grey:pue,contrastThreshold:t,getContrastText:y,augmentColor:b,tonalOffset:r},S[e]),s)}const qde=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Qde(n){return Math.round(n*1e5)/1e5}const yH={textTransform:"uppercase"},bH='"Roboto", "Helvetica", "Arial", sans-serif';function Zde(n,e){const t=typeof e=="function"?e(n):e,{fontFamily:r=bH,fontSize:s=14,fontWeightLight:o=300,fontWeightRegular:l=400,fontWeightMedium:u=500,fontWeightBold:h=700,htmlFontSize:f=16,allVariants:g,pxToRem:y}=t,b=xr(t,qde),S=s/14,C=y||(O=>`${O/f*S}rem`),M=(O,L,B,D,z)=>Je({fontFamily:r,fontWeight:O,fontSize:C(L),lineHeight:B},r===bH?{letterSpacing:`${Qde(D/L)}em`}:{},z,g),A={h1:M(o,96,1.167,-1.5),h2:M(o,60,1.2,-.5),h3:M(l,48,1.167,0),h4:M(l,34,1.235,.25),h5:M(l,24,1.334,0),h6:M(u,20,1.6,.15),subtitle1:M(l,16,1.75,.15),subtitle2:M(u,14,1.57,.1),body1:M(l,16,1.5,.15),body2:M(l,14,1.43,.15),button:M(u,14,1.75,.4,yH),caption:M(l,12,1.66,.4),overline:M(l,12,2.66,1,yH),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return fp(Je({htmlFontSize:f,pxToRem:C,fontFamily:r,fontSize:s,fontWeightLight:o,fontWeightRegular:l,fontWeightMedium:u,fontWeightBold:h},A),b,{clone:!1})}const efe=.2,tfe=.14,nfe=.12;function Nu(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${efe})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${tfe})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${nfe})`].join(",")}const rfe=["none",Nu(0,2,1,-1,0,1,1,0,0,1,3,0),Nu(0,3,1,-2,0,2,2,0,0,1,5,0),Nu(0,3,3,-2,0,3,4,0,0,1,8,0),Nu(0,2,4,-1,0,4,5,0,0,1,10,0),Nu(0,3,5,-1,0,5,8,0,0,1,14,0),Nu(0,3,5,-1,0,6,10,0,0,1,18,0),Nu(0,4,5,-2,0,7,10,1,0,2,16,1),Nu(0,5,5,-3,0,8,10,1,0,3,14,2),Nu(0,5,6,-3,0,9,12,1,0,3,16,2),Nu(0,6,6,-3,0,10,14,1,0,4,18,3),Nu(0,6,7,-4,0,11,15,1,0,4,20,3),Nu(0,7,8,-4,0,12,17,2,0,5,22,4),Nu(0,7,8,-4,0,13,19,2,0,5,24,4),Nu(0,7,9,-4,0,14,21,2,0,5,26,4),Nu(0,8,9,-5,0,15,22,2,0,6,28,5),Nu(0,8,10,-5,0,16,24,2,0,6,30,5),Nu(0,8,11,-5,0,17,26,2,0,6,32,5),Nu(0,9,11,-5,0,18,28,2,0,7,34,6),Nu(0,9,12,-6,0,19,29,2,0,7,36,6),Nu(0,10,13,-6,0,20,31,3,0,8,38,7),Nu(0,10,13,-6,0,21,33,3,0,8,40,7),Nu(0,10,14,-6,0,22,35,3,0,8,42,7),Nu(0,11,14,-7,0,23,36,3,0,9,44,8),Nu(0,11,15,-7,0,24,38,3,0,9,46,8)],ife=["duration","easing","delay"],sfe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},ofe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function TH(n){return`${Math.round(n)}ms`}function afe(n){if(!n)return 0;const e=n/36;return Math.round((4+15*e**.25+e/5)*10)}function lfe(n){const e=Je({},sfe,n.easing),t=Je({},ofe,n.duration);return Je({getAutoHeightDuration:afe,create:(s=["all"],o={})=>{const{duration:l=t.standard,easing:u=e.easeInOut,delay:h=0}=o;return xr(o,ife),(Array.isArray(s)?s:[s]).map(f=>`${f} ${typeof l=="string"?l:TH(l)} ${u} ${typeof h=="string"?h:TH(h)}`).join(",")}},n,{easing:e,duration:t})}const ufe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},cfe=ufe,hfe=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function bK(n={},...e){const{mixins:t={},palette:r={},transitions:s={},typography:o={}}=n,l=xr(n,hfe);if(n.vars)throw new Error(J1(18));const u=Jde(r),h=lE(n);let f=fp(h,{mixins:Ade(h.breakpoints,t),palette:u,shadows:rfe.slice(),typography:Zde(u,o),transitions:lfe(s),zIndex:Je({},cfe)});return f=fp(f,l),f=e.reduce((g,y)=>fp(g,y),f),f.unstable_sxConfig=Je({},xC,l==null?void 0:l.unstable_sxConfig),f.unstable_sx=function(y){return $C({sx:y,theme:this})},f}const dfe=bK(),Vk=dfe;function jk(){const n=Rk(Vk);return n[SC]||n}function Jo({props:n,name:e}){return SF({props:n,name:e,defaultTheme:Vk,themeId:SC})}var MC={};const ffe=g_(gue);var QO={exports:{}},SH;function pfe(){return SH||(SH=1,function(n){function e(t,r){if(t==null)return{};var s={},o=Object.keys(t),l,u;for(u=0;u<o.length;u++)l=o[u],!(r.indexOf(l)>=0)&&(s[l]=t[l]);return s}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(QO)),QO.exports}const mfe=g_(Ece),gfe=g_(xce),_fe=g_(kce),vfe=g_(Phe),yfe=g_(bhe),bfe=g_(Che);var hE=uE;Object.defineProperty(MC,"__esModule",{value:!0});var Tfe=MC.default=Lfe;MC.shouldForwardProp=fI;MC.systemDefaultTheme=void 0;var cg=hE(ffe),HD=hE(pfe()),wH=Mfe(mfe),Sfe=gfe;hE(_fe);hE(vfe);var wfe=hE(yfe),Efe=hE(bfe);const xfe=["ownerState"],$fe=["variants"],Cfe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function TK(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(TK=function(r){return r?t:e})(n)}function Mfe(n,e){if(!e&&n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=TK(e);if(t&&t.has(n))return t.get(n);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var l=s?Object.getOwnPropertyDescriptor(n,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=n[o]}return r.default=n,t&&t.set(n,r),r}function Afe(n){return Object.keys(n).length===0}function Ife(n){return typeof n=="string"&&n.charCodeAt(0)>96}function fI(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const Rfe=MC.systemDefaultTheme=(0,wfe.default)(),kfe=n=>n&&n.charAt(0).toLowerCase()+n.slice(1);function BM({defaultTheme:n,theme:e,themeId:t}){return Afe(e)?n:e[t]||e}function Ofe(n){return n?(e,t)=>t[n]:null}function pI(n,e){let{ownerState:t}=e,r=(0,HD.default)(e,xfe);const s=typeof n=="function"?n((0,cg.default)({ownerState:t},r)):n;if(Array.isArray(s))return s.flatMap(o=>pI(o,(0,cg.default)({ownerState:t},r)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=(0,HD.default)(s,$fe);return o.forEach(h=>{let f=!0;typeof h.props=="function"?f=h.props((0,cg.default)({ownerState:t},r,t)):Object.keys(h.props).forEach(g=>{(t==null?void 0:t[g])!==h.props[g]&&r[g]!==h.props[g]&&(f=!1)}),f&&(Array.isArray(u)||(u=[u]),u.push(typeof h.style=="function"?h.style((0,cg.default)({ownerState:t},r,t)):h.style))}),u}return s}function Lfe(n={}){const{themeId:e,defaultTheme:t=Rfe,rootShouldForwardProp:r=fI,slotShouldForwardProp:s=fI}=n,o=l=>(0,Efe.default)((0,cg.default)({},l,{theme:BM((0,cg.default)({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{(0,wH.internal_processStyles)(l,z=>z.filter(U=>!(U!=null&&U.__mui_systemSx)));const{name:h,slot:f,skipVariantsResolver:g,skipSx:y,overridesResolver:b=Ofe(kfe(f))}=u,S=(0,HD.default)(u,Cfe),C=g!==void 0?g:f&&f!=="Root"&&f!=="root"||!1,M=y||!1;let A,O=fI;f==="Root"||f==="root"?O=r:f?O=s:Ife(l)&&(O=void 0);const L=(0,wH.default)(l,(0,cg.default)({shouldForwardProp:O,label:A},S)),B=z=>typeof z=="function"&&z.__emotion_real!==z||(0,Sfe.isPlainObject)(z)?U=>pI(z,(0,cg.default)({},U,{theme:BM({theme:U.theme,defaultTheme:t,themeId:e})})):z,D=(z,...U)=>{let V=B(z);const H=U?U.map(B):[];h&&b&&H.push(Z=>{const q=BM((0,cg.default)({},Z,{defaultTheme:t,themeId:e}));if(!q.components||!q.components[h]||!q.components[h].styleOverrides)return null;const he=q.components[h].styleOverrides,ae={};return Object.entries(he).forEach(([ue,ge])=>{ae[ue]=pI(ge,(0,cg.default)({},Z,{theme:q}))}),b(Z,ae)}),h&&!C&&H.push(Z=>{var q;const he=BM((0,cg.default)({},Z,{defaultTheme:t,themeId:e})),ae=he==null||(q=he.components)==null||(q=q[h])==null?void 0:q.variants;return pI({variants:ae},(0,cg.default)({},Z,{theme:he}))}),M||H.push(o);const oe=H.length-U.length;if(Array.isArray(z)&&oe>0){const Z=new Array(oe).fill("");V=[...z,...Z],V.raw=[...z.raw,...Z]}const le=L(V,...H);return l.muiName&&(le.muiName=l.muiName),le};return L.withConfig&&(D.withConfig=L.withConfig),D}}function SK(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const Nfe=n=>SK(n)&&n!=="classes",Wm=Nfe,hr=Tfe({themeId:SC,defaultTheme:Vk,rootShouldForwardProp:Wm}),EH=n=>{let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,(e/100).toFixed(2)};function Dfe(n){return Eo("MuiSvgIcon",n)}Bo("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Pfe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Bfe=n=>{const{color:e,fontSize:t,classes:r}=n,s={root:["root",e!=="inherit"&&`color${cr(e)}`,`fontSize${cr(t)}`]};return Fo(s,Dfe,r)},Ffe=hr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${cr(t.color)}`],e[`fontSize${cr(t.fontSize)}`]]}})(({theme:n,ownerState:e})=>{var t,r,s,o,l,u,h,f,g,y,b,S,C;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(t=n.transitions)==null||(r=t.create)==null?void 0:r.call(t,"fill",{duration:(s=n.transitions)==null||(s=s.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((o=n.typography)==null||(l=o.pxToRem)==null?void 0:l.call(o,20))||"1.25rem",medium:((u=n.typography)==null||(h=u.pxToRem)==null?void 0:h.call(u,24))||"1.5rem",large:((f=n.typography)==null||(g=f.pxToRem)==null?void 0:g.call(f,35))||"2.1875rem"}[e.fontSize],color:(y=(b=(n.vars||n).palette)==null||(b=b[e.color])==null?void 0:b.main)!=null?y:{action:(S=(n.vars||n).palette)==null||(S=S.action)==null?void 0:S.active,disabled:(C=(n.vars||n).palette)==null||(C=C.action)==null?void 0:C.disabled,inherit:void 0}[e.color]}}),GD=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiSvgIcon"}),{children:s,className:o,color:l="inherit",component:u="svg",fontSize:h="medium",htmlColor:f,inheritViewBox:g=!1,titleAccess:y,viewBox:b="0 0 24 24"}=r,S=xr(r,Pfe),C=pe.isValidElement(s)&&s.type==="svg",M=Je({},r,{color:l,component:u,fontSize:h,instanceFontSize:e.fontSize,inheritViewBox:g,viewBox:b,hasSvgAsChild:C}),A={};g||(A.viewBox=b);const O=Bfe(M);return Pe.jsxs(Ffe,Je({as:u,className:ii(O.root,o),focusable:"false",color:f,"aria-hidden":y?void 0:!0,role:y?"img":void 0,ref:t},A,S,C&&s.props,{ownerState:M,children:[C?s.props.children:s,y?Pe.jsx("title",{children:y}):null]}))});GD.muiName="SvgIcon";function AC(n,e){function t(r,s){return Pe.jsx(GD,Je({"data-testid":`${e}Icon`,ref:s},r,{children:n}))}return t.muiName=GD.muiName,pe.memo(pe.forwardRef(t))}const zfe={configure:n=>{vF.configure(n)}},Ufe=Object.freeze(Object.defineProperty({__proto__:null,capitalize:cr,createChainedFunction:zD,createSvgIcon:AC,debounce:wF,deprecatedPropType:qhe,isMuiElement:dI,ownerDocument:Jp,ownerWindow:Hy,requirePropFactory:Qhe,setRef:aR,unstable_ClassNameGenerator:zfe,unstable_useEnhancedEffect:Uy,unstable_useId:Hk,unsupportedProp:ede,useControlled:lR,useEventCallback:T1,useForkRef:gp,useIsFocusVisible:uK},Symbol.toStringTag,{value:"Module"}));function Hfe(n){return Jo}function WD(n,e){return WD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},WD(n,e)}function CF(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,WD(n,e)}const xH={disabled:!1},cR=yt.createContext(null);var Gfe=function(e){return e.scrollTop},Rx="unmounted",o1="exited",a1="entering",LS="entered",VD="exiting",Cv=function(n){CF(e,n);function e(r,s){var o;o=n.call(this,r,s)||this;var l=s,u=l&&!l.isMounting?r.enter:r.appear,h;return o.appearStatus=null,r.in?u?(h=o1,o.appearStatus=a1):h=LS:r.unmountOnExit||r.mountOnEnter?h=Rx:h=o1,o.state={status:h},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===Rx?{status:o1}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==a1&&l!==LS&&(o=a1):(l===a1||l===LS)&&(o=VD)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,o,l,u;return o=l=u=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:u}},t.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===a1){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:cM.findDOMNode(this);l&&Gfe(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===o1&&this.setState({status:Rx})},t.performEnter=function(s){var o=this,l=this.props.enter,u=this.context?this.context.isMounting:s,h=this.props.nodeRef?[u]:[cM.findDOMNode(this),u],f=h[0],g=h[1],y=this.getTimeouts(),b=u?y.appear:y.enter;if(!s&&!l||xH.disabled){this.safeSetState({status:LS},function(){o.props.onEntered(f)});return}this.props.onEnter(f,g),this.safeSetState({status:a1},function(){o.props.onEntering(f,g),o.onTransitionEnd(b,function(){o.safeSetState({status:LS},function(){o.props.onEntered(f,g)})})})},t.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:cM.findDOMNode(this);if(!o||xH.disabled){this.safeSetState({status:o1},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:VD},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:o1},function(){s.props.onExited(u)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},t.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:cM.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],f=h[0],g=h[1];this.props.addEndListener(f,g)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===Rx)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=xr(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return yt.createElement(cR.Provider,{value:null},typeof l=="function"?l(s,u):yt.cloneElement(yt.Children.only(l),u))},e}(yt.Component);Cv.contextType=cR;Cv.propTypes={};function fS(){}Cv.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:fS,onEntering:fS,onEntered:fS,onExit:fS,onExiting:fS,onExited:fS};Cv.UNMOUNTED=Rx;Cv.EXITED=o1;Cv.ENTERING=a1;Cv.ENTERED=LS;Cv.EXITING=VD;const wK=Cv;function Wfe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function MF(n,e){var t=function(o){return e&&pe.isValidElement(o)?e(o):o},r=Object.create(null);return n&&pe.Children.map(n,function(s){return s}).forEach(function(s){r[s.key]=t(s)}),r}function Vfe(n,e){n=n||{},e=e||{};function t(g){return g in e?e[g]:n[g]}var r=Object.create(null),s=[];for(var o in n)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var l,u={};for(var h in e){if(r[h])for(l=0;l<r[h].length;l++){var f=r[h][l];u[r[h][l]]=t(f)}u[h]=t(h)}for(l=0;l<s.length;l++)u[s[l]]=t(s[l]);return u}function S1(n,e,t){return t[e]!=null?t[e]:n.props[e]}function jfe(n,e){return MF(n.children,function(t){return pe.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:S1(t,"appear",n),enter:S1(t,"enter",n),exit:S1(t,"exit",n)})})}function Yfe(n,e,t){var r=MF(n.children),s=Vfe(e,r);return Object.keys(s).forEach(function(o){var l=s[o];if(pe.isValidElement(l)){var u=o in e,h=o in r,f=e[o],g=pe.isValidElement(f)&&!f.props.in;h&&(!u||g)?s[o]=pe.cloneElement(l,{onExited:t.bind(null,l),in:!0,exit:S1(l,"exit",n),enter:S1(l,"enter",n)}):!h&&u&&!g?s[o]=pe.cloneElement(l,{in:!1}):h&&u&&pe.isValidElement(f)&&(s[o]=pe.cloneElement(l,{onExited:t.bind(null,l),in:f.props.in,exit:S1(l,"exit",n),enter:S1(l,"enter",n)}))}}),s}var Xfe=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},Kfe={component:"div",childFactory:function(e){return e}},AF=function(n){CF(e,n);function e(r,s){var o;o=n.call(this,r,s)||this;var l=o.handleExited.bind(Wfe(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,u=o.handleExited,h=o.firstRender;return{children:h?jfe(s,u):Yfe(s,l,u),firstRender:!1}},t.handleExited=function(s,o){var l=MF(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(u){var h=Je({},u.children);return delete h[s.key],{children:h}}))},t.render=function(){var s=this.props,o=s.component,l=s.childFactory,u=xr(s,["component","childFactory"]),h=this.state.contextValue,f=Xfe(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?yt.createElement(cR.Provider,{value:h},f):yt.createElement(cR.Provider,{value:h},yt.createElement(o,u,f))},e}(yt.Component);AF.propTypes={};AF.defaultProps=Kfe;const Jfe=AF,EK=n=>n.scrollTop;function hR(n,e){var t,r;const{timeout:s,easing:o,style:l={}}=n;return{duration:(t=l.transitionDuration)!=null?t:typeof s=="number"?s:s[e.mode]||0,easing:(r=l.transitionTimingFunction)!=null?r:typeof o=="object"?o[e.mode]:o,delay:l.transitionDelay}}function qfe(n){return Eo("MuiPaper",n)}Bo("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Qfe=["className","component","elevation","square","variant"],Zfe=n=>{const{square:e,elevation:t,variant:r,classes:s}=n,o={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${t}`]};return Fo(o,qfe,s)},epe=hr("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(({theme:n,ownerState:e})=>{var t;return Je({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!e.square&&{borderRadius:n.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(n.vars||n).palette.divider}`},e.variant==="elevation"&&Je({boxShadow:(n.vars||n).shadows[e.elevation]},!n.vars&&n.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${n0("#fff",EH(e.elevation))}, ${n0("#fff",EH(e.elevation))})`},n.vars&&{backgroundImage:(t=n.vars.overlays)==null?void 0:t[e.elevation]}))}),tpe=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiPaper"}),{className:s,component:o="div",elevation:l=1,square:u=!1,variant:h="elevation"}=r,f=xr(r,Qfe),g=Je({},r,{component:o,elevation:l,square:u,variant:h}),y=Zfe(g);return Pe.jsx(epe,Je({as:o,ownerState:g,className:ii(y.root,s),ref:t},f))}),IF=tpe;function dR(n){return typeof n=="string"}function npe(n,e,t){return n===void 0||dR(n)?e:Je({},e,{ownerState:Je({},e.ownerState,t)})}function xK(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(r=>r.match(/^on[A-Z]/)&&typeof n[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=n[r]}),t}function rpe(n,e,t){return typeof n=="function"?n(e,t):n}function $H(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function ipe(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:s,className:o}=n;if(!e){const S=ii(t==null?void 0:t.className,o,s==null?void 0:s.className,r==null?void 0:r.className),C=Je({},t==null?void 0:t.style,s==null?void 0:s.style,r==null?void 0:r.style),M=Je({},t,s,r);return S.length>0&&(M.className=S),Object.keys(C).length>0&&(M.style=C),{props:M,internalRef:void 0}}const l=xK(Je({},s,r)),u=$H(r),h=$H(s),f=e(l),g=ii(f==null?void 0:f.className,t==null?void 0:t.className,o,s==null?void 0:s.className,r==null?void 0:r.className),y=Je({},f==null?void 0:f.style,t==null?void 0:t.style,s==null?void 0:s.style,r==null?void 0:r.style),b=Je({},f,t,h,u);return g.length>0&&(b.className=g),Object.keys(y).length>0&&(b.style=y),{props:b,internalRef:f.ref}}const spe=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Rw(n){var e;const{elementType:t,externalSlotProps:r,ownerState:s,skipResolvingSlotProps:o=!1}=n,l=xr(n,spe),u=o?{}:rpe(r,s),{props:h,internalRef:f}=ipe(Je({},l,{externalSlotProps:u})),g=gp(f,u==null?void 0:u.ref,(e=n.additionalProps)==null?void 0:e.ref);return npe(t,Je({},h,{ref:g}),s)}function ope(n){const{className:e,classes:t,pulsate:r=!1,rippleX:s,rippleY:o,rippleSize:l,in:u,onExited:h,timeout:f}=n,[g,y]=pe.useState(!1),b=ii(e,t.ripple,t.rippleVisible,r&&t.ripplePulsate),S={width:l,height:l,top:-(l/2)+o,left:-(l/2)+s},C=ii(t.child,g&&t.childLeaving,r&&t.childPulsate);return!u&&!g&&y(!0),pe.useEffect(()=>{if(!u&&h!=null){const M=setTimeout(h,f);return()=>{clearTimeout(M)}}},[h,u,f]),Pe.jsx("span",{className:b,style:S,children:Pe.jsx("span",{className:C})})}const dg=Bo("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ape=["center","classes","className"];let Yk=n=>n,CH,MH,AH,IH;const jD=550,lpe=80,upe=aE(CH||(CH=Yk`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),cpe=aE(MH||(MH=Yk`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),hpe=aE(AH||(AH=Yk`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),dpe=hr("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),fpe=hr(ope,{name:"MuiTouchRipple",slot:"Ripple"})(IH||(IH=Yk`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),dg.rippleVisible,upe,jD,({theme:n})=>n.transitions.easing.easeInOut,dg.ripplePulsate,({theme:n})=>n.transitions.duration.shorter,dg.child,dg.childLeaving,cpe,jD,({theme:n})=>n.transitions.easing.easeInOut,dg.childPulsate,hpe,({theme:n})=>n.transitions.easing.easeInOut),ppe=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:o={},className:l}=r,u=xr(r,ape),[h,f]=pe.useState([]),g=pe.useRef(0),y=pe.useRef(null);pe.useEffect(()=>{y.current&&(y.current(),y.current=null)},[h]);const b=pe.useRef(!1),S=lK(),C=pe.useRef(null),M=pe.useRef(null),A=pe.useCallback(D=>{const{pulsate:z,rippleX:U,rippleY:V,rippleSize:H,cb:oe}=D;f(le=>[...le,Pe.jsx(fpe,{classes:{ripple:ii(o.ripple,dg.ripple),rippleVisible:ii(o.rippleVisible,dg.rippleVisible),ripplePulsate:ii(o.ripplePulsate,dg.ripplePulsate),child:ii(o.child,dg.child),childLeaving:ii(o.childLeaving,dg.childLeaving),childPulsate:ii(o.childPulsate,dg.childPulsate)},timeout:jD,pulsate:z,rippleX:U,rippleY:V,rippleSize:H},g.current)]),g.current+=1,y.current=oe},[o]),O=pe.useCallback((D={},z={},U=()=>{})=>{const{pulsate:V=!1,center:H=s||z.pulsate,fakeElement:oe=!1}=z;if((D==null?void 0:D.type)==="mousedown"&&b.current){b.current=!1;return}(D==null?void 0:D.type)==="touchstart"&&(b.current=!0);const le=oe?null:M.current,Z=le?le.getBoundingClientRect():{width:0,height:0,left:0,top:0};let q,he,ae;if(H||D===void 0||D.clientX===0&&D.clientY===0||!D.clientX&&!D.touches)q=Math.round(Z.width/2),he=Math.round(Z.height/2);else{const{clientX:ue,clientY:ge}=D.touches&&D.touches.length>0?D.touches[0]:D;q=Math.round(ue-Z.left),he=Math.round(ge-Z.top)}if(H)ae=Math.sqrt((2*Z.width**2+Z.height**2)/3),ae%2===0&&(ae+=1);else{const ue=Math.max(Math.abs((le?le.clientWidth:0)-q),q)*2+2,ge=Math.max(Math.abs((le?le.clientHeight:0)-he),he)*2+2;ae=Math.sqrt(ue**2+ge**2)}D!=null&&D.touches?C.current===null&&(C.current=()=>{A({pulsate:V,rippleX:q,rippleY:he,rippleSize:ae,cb:U})},S.start(lpe,()=>{C.current&&(C.current(),C.current=null)})):A({pulsate:V,rippleX:q,rippleY:he,rippleSize:ae,cb:U})},[s,A,S]),L=pe.useCallback(()=>{O({},{pulsate:!0})},[O]),B=pe.useCallback((D,z)=>{if(S.clear(),(D==null?void 0:D.type)==="touchend"&&C.current){C.current(),C.current=null,S.start(0,()=>{B(D,z)});return}C.current=null,f(U=>U.length>0?U.slice(1):U),y.current=z},[S]);return pe.useImperativeHandle(t,()=>({pulsate:L,start:O,stop:B}),[L,O,B]),Pe.jsx(dpe,Je({className:ii(dg.root,o.root,l),ref:M},u,{children:Pe.jsx(Jfe,{component:null,exit:!0,children:h})}))}),mpe=ppe;function gpe(n){return Eo("MuiButtonBase",n)}const _pe=Bo("MuiButtonBase",["root","disabled","focusVisible"]),vpe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],ype=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:r,classes:s}=n,l=Fo({root:["root",e&&"disabled",t&&"focusVisible"]},gpe,s);return t&&r&&(l.root+=` ${r}`),l},bpe=hr("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${_pe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Tpe=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:o=!1,children:l,className:u,component:h="button",disabled:f=!1,disableRipple:g=!1,disableTouchRipple:y=!1,focusRipple:b=!1,LinkComponent:S="a",onBlur:C,onClick:M,onContextMenu:A,onDragLeave:O,onFocus:L,onFocusVisible:B,onKeyDown:D,onKeyUp:z,onMouseDown:U,onMouseLeave:V,onMouseUp:H,onTouchEnd:oe,onTouchMove:le,onTouchStart:Z,tabIndex:q=0,TouchRippleProps:he,touchRippleRef:ae,type:ue}=r,ge=xr(r,vpe),we=pe.useRef(null),J=pe.useRef(null),re=gp(J,ae),{isFocusVisibleRef:ie,onFocus:fe,onBlur:Te,ref:Fe}=uK(),[Ie,qe]=pe.useState(!1);f&&Ie&&qe(!1),pe.useImperativeHandle(s,()=>({focusVisible:()=>{qe(!0),we.current.focus()}}),[]);const[Re,Qe]=pe.useState(!1);pe.useEffect(()=>{Qe(!0)},[]);const nt=Re&&!g&&!f;pe.useEffect(()=>{Ie&&b&&!g&&Re&&J.current.pulsate()},[g,b,Ie,Re]);function ft(Ke,Le,Q=y){return T1(te=>(Le&&Le(te),!Q&&J.current&&J.current[Ke](te),!0))}const lt=ft("start",U),ze=ft("stop",A),Ce=ft("stop",O),He=ft("stop",H),rt=ft("stop",Ke=>{Ie&&Ke.preventDefault(),V&&V(Ke)}),it=ft("start",Z),Nt=ft("stop",oe),kt=ft("stop",le),vt=ft("stop",Ke=>{Te(Ke),ie.current===!1&&qe(!1),C&&C(Ke)},!1),Mt=T1(Ke=>{we.current||(we.current=Ke.currentTarget),fe(Ke),ie.current===!0&&(qe(!0),B&&B(Ke)),L&&L(Ke)}),At=()=>{const Ke=we.current;return h&&h!=="button"&&!(Ke.tagName==="A"&&Ke.href)},mt=pe.useRef(!1),xe=T1(Ke=>{b&&!mt.current&&Ie&&J.current&&Ke.key===" "&&(mt.current=!0,J.current.stop(Ke,()=>{J.current.start(Ke)})),Ke.target===Ke.currentTarget&&At()&&Ke.key===" "&&Ke.preventDefault(),D&&D(Ke),Ke.target===Ke.currentTarget&&At()&&Ke.key==="Enter"&&!f&&(Ke.preventDefault(),M&&M(Ke))}),se=T1(Ke=>{b&&Ke.key===" "&&J.current&&Ie&&!Ke.defaultPrevented&&(mt.current=!1,J.current.stop(Ke,()=>{J.current.pulsate(Ke)})),z&&z(Ke),M&&Ke.target===Ke.currentTarget&&At()&&Ke.key===" "&&!Ke.defaultPrevented&&M(Ke)});let $e=h;$e==="button"&&(ge.href||ge.to)&&($e=S);const ht={};$e==="button"?(ht.type=ue===void 0?"button":ue,ht.disabled=f):(!ge.href&&!ge.to&&(ht.role="button"),f&&(ht["aria-disabled"]=f));const St=gp(t,Fe,we),It=Je({},r,{centerRipple:o,component:h,disabled:f,disableRipple:g,disableTouchRipple:y,focusRipple:b,tabIndex:q,focusVisible:Ie}),pt=ype(It);return Pe.jsxs(bpe,Je({as:$e,className:ii(pt.root,u),ownerState:It,onBlur:vt,onClick:M,onContextMenu:ze,onFocus:Mt,onKeyDown:xe,onKeyUp:se,onMouseDown:lt,onMouseLeave:rt,onMouseUp:He,onDragLeave:Ce,onTouchEnd:Nt,onTouchMove:kt,onTouchStart:it,ref:St,tabIndex:f?-1:q,type:ue},ht,ge,{children:[l,nt?Pe.jsx(mpe,Je({ref:re,center:o},he)):null]}))}),RF=Tpe;function Spe(n){return Eo("MuiIconButton",n)}const wpe=Bo("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Epe=["edge","children","className","color","disabled","disableFocusRipple","size"],xpe=n=>{const{classes:e,disabled:t,color:r,edge:s,size:o}=n,l={root:["root",t&&"disabled",r!=="default"&&`color${cr(r)}`,s&&`edge${cr(s)}`,`size${cr(o)}`]};return Fo(l,Spe,e)},$pe=hr(RF,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="default"&&e[`color${cr(t.color)}`],t.edge&&e[`edge${cr(t.edge)}`],e[`size${cr(t.size)}`]]}})(({theme:n,ownerState:e})=>Je({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:n0(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:n,ownerState:e})=>{var t;const r=(t=(n.vars||n).palette)==null?void 0:t[e.color];return Je({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&Je({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":Je({},r&&{backgroundColor:n.vars?`rgba(${r.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:n0(r.main,n.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:n.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:n.typography.pxToRem(28)},{[`&.${wpe.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}})}),Cpe=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiIconButton"}),{edge:s=!1,children:o,className:l,color:u="default",disabled:h=!1,disableFocusRipple:f=!1,size:g="medium"}=r,y=xr(r,Epe),b=Je({},r,{edge:s,color:u,disabled:h,disableFocusRipple:f,size:g}),S=xpe(b);return Pe.jsx($pe,Je({className:ii(S.root,l),centerRipple:!0,focusRipple:!f,disabled:h,ref:t},y,{ownerState:b,children:o}))}),mI=Cpe;function Mpe(n){return Eo("MuiTypography",n)}Bo("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Ape=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Ipe=n=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:s,variant:o,classes:l}=n,u={root:["root",o,n.align!=="inherit"&&`align${cr(e)}`,t&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return Fo(u,Mpe,l)},Rpe=hr("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${cr(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(({theme:n,ownerState:e})=>Je({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&n.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),RH={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},kpe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Ope=n=>kpe[n]||n,Lpe=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiTypography"}),s=Ope(r.color),o=CC(Je({},r,{color:s})),{align:l="inherit",className:u,component:h,gutterBottom:f=!1,noWrap:g=!1,paragraph:y=!1,variant:b="body1",variantMapping:S=RH}=o,C=xr(o,Ape),M=Je({},o,{align:l,color:s,className:u,component:h,gutterBottom:f,noWrap:g,paragraph:y,variant:b,variantMapping:S}),A=h||(y?"p":S[b]||RH[b])||"span",O=Ipe(M);return Pe.jsx(Rpe,Je({as:A,ref:t,ownerState:M,className:ii(O.root,u)},C))}),Q1=Lpe,Npe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Dpe(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function Ppe(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=r=>n.ownerDocument.querySelector(`input[type="radio"]${r}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function Bpe(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||Ppe(n))}function Fpe(n){const e=[],t=[];return Array.from(n.querySelectorAll(Npe)).forEach((r,s)=>{const o=Dpe(r);o===-1||!Bpe(r)||(o===0?e.push(r):t.push({documentOrder:s,tabIndex:o,node:r}))}),t.sort((r,s)=>r.tabIndex===s.tabIndex?r.documentOrder-s.documentOrder:r.tabIndex-s.tabIndex).map(r=>r.node).concat(e)}function zpe(){return!0}function Upe(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:o=Fpe,isEnabled:l=zpe,open:u}=n,h=pe.useRef(!1),f=pe.useRef(null),g=pe.useRef(null),y=pe.useRef(null),b=pe.useRef(null),S=pe.useRef(!1),C=pe.useRef(null),M=gp(e.ref,C),A=pe.useRef(null);pe.useEffect(()=>{!u||!C.current||(S.current=!t)},[t,u]),pe.useEffect(()=>{if(!u||!C.current)return;const B=Jp(C.current);return C.current.contains(B.activeElement)||(C.current.hasAttribute("tabIndex")||C.current.setAttribute("tabIndex","-1"),S.current&&C.current.focus()),()=>{s||(y.current&&y.current.focus&&(h.current=!0,y.current.focus()),y.current=null)}},[u]),pe.useEffect(()=>{if(!u||!C.current)return;const B=Jp(C.current),D=V=>{A.current=V,!(r||!l()||V.key!=="Tab")&&B.activeElement===C.current&&V.shiftKey&&(h.current=!0,g.current&&g.current.focus())},z=()=>{const V=C.current;if(V===null)return;if(!B.hasFocus()||!l()||h.current){h.current=!1;return}if(V.contains(B.activeElement)||r&&B.activeElement!==f.current&&B.activeElement!==g.current)return;if(B.activeElement!==b.current)b.current=null;else if(b.current!==null)return;if(!S.current)return;let H=[];if((B.activeElement===f.current||B.activeElement===g.current)&&(H=o(C.current)),H.length>0){var oe,le;const Z=!!((oe=A.current)!=null&&oe.shiftKey&&((le=A.current)==null?void 0:le.key)==="Tab"),q=H[0],he=H[H.length-1];typeof q!="string"&&typeof he!="string"&&(Z?he.focus():q.focus())}else V.focus()};B.addEventListener("focusin",z),B.addEventListener("keydown",D,!0);const U=setInterval(()=>{B.activeElement&&B.activeElement.tagName==="BODY"&&z()},50);return()=>{clearInterval(U),B.removeEventListener("focusin",z),B.removeEventListener("keydown",D,!0)}},[t,r,s,l,u,o]);const O=B=>{y.current===null&&(y.current=B.relatedTarget),S.current=!0,b.current=B.target;const D=e.props.onFocus;D&&D(B)},L=B=>{y.current===null&&(y.current=B.relatedTarget),S.current=!0};return Pe.jsxs(pe.Fragment,{children:[Pe.jsx("div",{tabIndex:u?0:-1,onFocus:L,ref:f,"data-testid":"sentinelStart"}),pe.cloneElement(e,{ref:M,onFocus:O}),Pe.jsx("div",{tabIndex:u?0:-1,onFocus:L,ref:g,"data-testid":"sentinelEnd"})]})}function Hpe(n){return typeof n=="function"?n():n}const Gpe=pe.forwardRef(function(e,t){const{children:r,container:s,disablePortal:o=!1}=e,[l,u]=pe.useState(null),h=gp(pe.isValidElement(r)?r.ref:null,t);if(Uy(()=>{o||u(Hpe(s)||document.body)},[s,o]),Uy(()=>{if(l&&!o)return aR(t,l),()=>{aR(t,null)}},[t,l,o]),o){if(pe.isValidElement(r)){const f={ref:h};return pe.cloneElement(r,f)}return Pe.jsx(pe.Fragment,{children:r})}return Pe.jsx(pe.Fragment,{children:l&&L3.createPortal(r,l)})});function Wpe(n){const e=Jp(n);return e.body===n?Hy(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function Zx(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function kH(n){return parseInt(Hy(n).getComputedStyle(n).paddingRight,10)||0}function Vpe(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(n.tagName)!==-1,r=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||r}function OH(n,e,t,r,s){const o=[e,t,...r];[].forEach.call(n.children,l=>{const u=o.indexOf(l)===-1,h=!Vpe(l);u&&h&&Zx(l,s)})}function ZO(n,e){let t=-1;return n.some((r,s)=>e(r)?(t=s,!0):!1),t}function jpe(n,e){const t=[],r=n.container;if(!e.disableScrollLock){if(Wpe(r)){const l=cK(Jp(r));t.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${kH(r)+l}px`;const u=Jp(r).querySelectorAll(".mui-fixed");[].forEach.call(u,h=>{t.push({value:h.style.paddingRight,property:"padding-right",el:h}),h.style.paddingRight=`${kH(h)+l}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=Jp(r).body;else{const l=r.parentElement,u=Hy(r);o=(l==null?void 0:l.nodeName)==="HTML"&&u.getComputedStyle(l).overflowY==="scroll"?l:r}t.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{t.forEach(({value:o,el:l,property:u})=>{o?l.style.setProperty(u,o):l.style.removeProperty(u)})}}function Ype(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class Xpe{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&Zx(e.modalRef,!1);const s=Ype(t);OH(t,e.mount,e.modalRef,s,!0);const o=ZO(this.containers,l=>l.container===t);return o!==-1?(this.containers[o].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:s}),r)}mount(e,t){const r=ZO(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[r];s.restore||(s.restore=jpe(s,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const s=ZO(this.containers,l=>l.modals.indexOf(e)!==-1),o=this.containers[s];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&Zx(e.modalRef,t),OH(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(s,1);else{const l=o.modals[o.modals.length-1];l.modalRef&&Zx(l.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function Kpe(n){return typeof n=="function"?n():n}function Jpe(n){return n?n.props.hasOwnProperty("in"):!1}const qpe=new Xpe;function Qpe(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:r=!1,manager:s=qpe,closeAfterTransition:o=!1,onTransitionEnter:l,onTransitionExited:u,children:h,onClose:f,open:g,rootRef:y}=n,b=pe.useRef({}),S=pe.useRef(null),C=pe.useRef(null),M=gp(C,y),[A,O]=pe.useState(!g),L=Jpe(h);let B=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(B=!1);const D=()=>Jp(S.current),z=()=>(b.current.modalRef=C.current,b.current.mount=S.current,b.current),U=()=>{s.mount(z(),{disableScrollLock:r}),C.current&&(C.current.scrollTop=0)},V=T1(()=>{const ge=Kpe(e)||D().body;s.add(z(),ge),C.current&&U()}),H=pe.useCallback(()=>s.isTopModal(z()),[s]),oe=T1(ge=>{S.current=ge,ge&&(g&&H()?U():C.current&&Zx(C.current,B))}),le=pe.useCallback(()=>{s.remove(z(),B)},[B,s]);pe.useEffect(()=>()=>{le()},[le]),pe.useEffect(()=>{g?V():(!L||!o)&&le()},[g,le,L,o,V]);const Z=ge=>we=>{var J;(J=ge.onKeyDown)==null||J.call(ge,we),!(we.key!=="Escape"||we.which===229||!H())&&(t||(we.stopPropagation(),f&&f(we,"escapeKeyDown")))},q=ge=>we=>{var J;(J=ge.onClick)==null||J.call(ge,we),we.target===we.currentTarget&&f&&f(we,"backdropClick")};return{getRootProps:(ge={})=>{const we=xK(n);delete we.onTransitionEnter,delete we.onTransitionExited;const J=Je({},we,ge);return Je({role:"presentation"},J,{onKeyDown:Z(J),ref:M})},getBackdropProps:(ge={})=>{const we=ge;return Je({"aria-hidden":!0},we,{onClick:q(we),open:g})},getTransitionProps:()=>{const ge=()=>{O(!1),l&&l()},we=()=>{O(!0),u&&u(),o&&le()};return{onEnter:zD(ge,h==null?void 0:h.props.onEnter),onExited:zD(we,h==null?void 0:h.props.onExited)}},rootRef:M,portalRef:oe,isTopModal:H,exited:A,hasTransition:L}}const Zpe=["onChange","maxRows","minRows","style","value"];function FM(n){return parseInt(n,10)||0}const eme={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function tme(n){return n==null||Object.keys(n).length===0||n.outerHeightStyle===0&&!n.overflowing}const nme=pe.forwardRef(function(e,t){const{onChange:r,maxRows:s,minRows:o=1,style:l,value:u}=e,h=xr(e,Zpe),{current:f}=pe.useRef(u!=null),g=pe.useRef(null),y=gp(t,g),b=pe.useRef(null),S=pe.useCallback(()=>{const A=g.current,L=Hy(A).getComputedStyle(A);if(L.width==="0px")return{outerHeightStyle:0,overflowing:!1};const B=b.current;B.style.width=L.width,B.value=A.value||e.placeholder||"x",B.value.slice(-1)===`
`&&(B.value+=" ");const D=L.boxSizing,z=FM(L.paddingBottom)+FM(L.paddingTop),U=FM(L.borderBottomWidth)+FM(L.borderTopWidth),V=B.scrollHeight;B.value="x";const H=B.scrollHeight;let oe=V;o&&(oe=Math.max(Number(o)*H,oe)),s&&(oe=Math.min(Number(s)*H,oe)),oe=Math.max(oe,H);const le=oe+(D==="border-box"?z+U:0),Z=Math.abs(oe-V)<=1;return{outerHeightStyle:le,overflowing:Z}},[s,o,e.placeholder]),C=pe.useCallback(()=>{const A=S();if(tme(A))return;const O=g.current;O.style.height=`${A.outerHeightStyle}px`,O.style.overflow=A.overflowing?"hidden":""},[S]);Uy(()=>{const A=()=>{C()};let O;const L=wF(A),B=g.current,D=Hy(B);D.addEventListener("resize",L);let z;return typeof ResizeObserver<"u"&&(z=new ResizeObserver(A),z.observe(B)),()=>{L.clear(),cancelAnimationFrame(O),D.removeEventListener("resize",L),z&&z.disconnect()}},[S,C]),Uy(()=>{C()});const M=A=>{f||C(),r&&r(A)};return Pe.jsxs(pe.Fragment,{children:[Pe.jsx("textarea",Je({value:u,onChange:M,ref:y,rows:o,style:l},h)),Pe.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:b,tabIndex:-1,style:Je({},eme.shadow,l,{paddingTop:0,paddingBottom:0})})]})});function tb({props:n,states:e,muiFormControl:t}){return e.reduce((r,s)=>(r[s]=n[s],t&&typeof n[s]>"u"&&(r[s]=t[s]),r),{})}const rme=pe.createContext(void 0),kF=rme;function Mv(){return pe.useContext(kF)}function ime(n){return Pe.jsx(Ehe,Je({},n,{defaultTheme:Vk,themeId:SC}))}function LH(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function fR(n,e=!1){return n&&(LH(n.value)&&n.value!==""||e&&LH(n.defaultValue)&&n.defaultValue!=="")}function sme(n){return n.startAdornment}function ome(n){return Eo("MuiInputBase",n)}const ame=Bo("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),kw=ame,lme=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Xk=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${cr(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},Kk=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},ume=n=>{const{classes:e,color:t,disabled:r,error:s,endAdornment:o,focused:l,formControl:u,fullWidth:h,hiddenLabel:f,multiline:g,readOnly:y,size:b,startAdornment:S,type:C}=n,M={root:["root",`color${cr(t)}`,r&&"disabled",s&&"error",h&&"fullWidth",l&&"focused",u&&"formControl",b&&b!=="medium"&&`size${cr(b)}`,g&&"multiline",S&&"adornedStart",o&&"adornedEnd",f&&"hiddenLabel",y&&"readOnly"],input:["input",r&&"disabled",C==="search"&&"inputTypeSearch",g&&"inputMultiline",b==="small"&&"inputSizeSmall",f&&"inputHiddenLabel",S&&"inputAdornedStart",o&&"inputAdornedEnd",y&&"readOnly"]};return Fo(M,ome,e)},Jk=hr("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Xk})(({theme:n,ownerState:e})=>Je({},n.typography.body1,{color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${kw.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"}},e.multiline&&Je({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),qk=hr("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Kk})(({theme:n,ownerState:e})=>{const t=n.palette.mode==="light",r=Je({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),s={opacity:"0 !important"},o=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return Je({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${kw.formControl} &`]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${kw.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),cme=Pe.jsx(ime,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),hme=pe.forwardRef(function(e,t){var r;const s=Jo({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:l,autoFocus:u,className:h,components:f={},componentsProps:g={},defaultValue:y,disabled:b,disableInjectingGlobalStyles:S,endAdornment:C,fullWidth:M=!1,id:A,inputComponent:O="input",inputProps:L={},inputRef:B,maxRows:D,minRows:z,multiline:U=!1,name:V,onBlur:H,onChange:oe,onClick:le,onFocus:Z,onKeyDown:q,onKeyUp:he,placeholder:ae,readOnly:ue,renderSuffix:ge,rows:we,slotProps:J={},slots:re={},startAdornment:ie,type:fe="text",value:Te}=s,Fe=xr(s,lme),Ie=L.value!=null?L.value:Te,{current:qe}=pe.useRef(Ie!=null),Re=pe.useRef(),Qe=pe.useCallback(pt=>{},[]),nt=gp(Re,B,L.ref,Qe),[ft,lt]=pe.useState(!1),ze=Mv(),Ce=tb({props:s,muiFormControl:ze,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ce.focused=ze?ze.focused:ft,pe.useEffect(()=>{!ze&&b&&ft&&(lt(!1),H&&H())},[ze,b,ft,H]);const He=ze&&ze.onFilled,rt=ze&&ze.onEmpty,it=pe.useCallback(pt=>{fR(pt)?He&&He():rt&&rt()},[He,rt]);Uy(()=>{qe&&it({value:Ie})},[Ie,it,qe]);const Nt=pt=>{if(Ce.disabled){pt.stopPropagation();return}Z&&Z(pt),L.onFocus&&L.onFocus(pt),ze&&ze.onFocus?ze.onFocus(pt):lt(!0)},kt=pt=>{H&&H(pt),L.onBlur&&L.onBlur(pt),ze&&ze.onBlur?ze.onBlur(pt):lt(!1)},vt=(pt,...Ke)=>{if(!qe){const Le=pt.target||Re.current;if(Le==null)throw new Error(J1(1));it({value:Le.value})}L.onChange&&L.onChange(pt,...Ke),oe&&oe(pt,...Ke)};pe.useEffect(()=>{it(Re.current)},[]);const Mt=pt=>{Re.current&&pt.currentTarget===pt.target&&Re.current.focus(),le&&le(pt)};let At=O,mt=L;U&&At==="input"&&(we?mt=Je({type:void 0,minRows:we,maxRows:we},mt):mt=Je({type:void 0,maxRows:D,minRows:z},mt),At=nme);const xe=pt=>{it(pt.animationName==="mui-auto-fill-cancel"?Re.current:{value:"x"})};pe.useEffect(()=>{ze&&ze.setAdornedStart(!!ie)},[ze,ie]);const se=Je({},s,{color:Ce.color||"primary",disabled:Ce.disabled,endAdornment:C,error:Ce.error,focused:Ce.focused,formControl:ze,fullWidth:M,hiddenLabel:Ce.hiddenLabel,multiline:U,size:Ce.size,startAdornment:ie,type:fe}),$e=ume(se),ht=re.root||f.Root||Jk,St=J.root||g.root||{},It=re.input||f.Input||qk;return mt=Je({},mt,(r=J.input)!=null?r:g.input),Pe.jsxs(pe.Fragment,{children:[!S&&cme,Pe.jsxs(ht,Je({},St,!dR(ht)&&{ownerState:Je({},se,St.ownerState)},{ref:t,onClick:Mt},Fe,{className:ii($e.root,St.className,h,ue&&"MuiInputBase-readOnly"),children:[ie,Pe.jsx(kF.Provider,{value:null,children:Pe.jsx(It,Je({ownerState:se,"aria-invalid":Ce.error,"aria-describedby":o,autoComplete:l,autoFocus:u,defaultValue:y,disabled:Ce.disabled,id:A,onAnimationStart:xe,name:V,placeholder:ae,readOnly:ue,required:Ce.required,rows:we,value:Ie,onKeyDown:q,onKeyUp:he,type:fe},mt,!dR(It)&&{as:At,ownerState:Je({},se,mt.ownerState)},{ref:nt,className:ii($e.input,mt.className,ue&&"MuiInputBase-readOnly"),onBlur:kt,onChange:vt,onFocus:Nt}))}),C,ge?ge(Je({},Ce,{startAdornment:ie})):null]}))]})}),OF=hme;function dme(n){return Eo("MuiInput",n)}const fme=Je({},kw,Bo("MuiInput",["root","underline","input"])),rx=fme;function pme(n){return Eo("MuiOutlinedInput",n)}const mme=Je({},kw,Bo("MuiOutlinedInput",["root","notchedOutline","input"])),ty=mme;function gme(n){return Eo("MuiFilledInput",n)}const _me=Je({},kw,Bo("MuiFilledInput",["root","underline","input"])),Hb=_me,vme=AC(Pe.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),yme=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],bme={entering:{opacity:1},entered:{opacity:1}},Tme=pe.forwardRef(function(e,t){const r=jk(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:u,easing:h,in:f,onEnter:g,onEntered:y,onEntering:b,onExit:S,onExited:C,onExiting:M,style:A,timeout:O=s,TransitionComponent:L=wK}=e,B=xr(e,yme),D=pe.useRef(null),z=gp(D,u.ref,t),U=ae=>ue=>{if(ae){const ge=D.current;ue===void 0?ae(ge):ae(ge,ue)}},V=U(b),H=U((ae,ue)=>{EK(ae);const ge=hR({style:A,timeout:O,easing:h},{mode:"enter"});ae.style.webkitTransition=r.transitions.create("opacity",ge),ae.style.transition=r.transitions.create("opacity",ge),g&&g(ae,ue)}),oe=U(y),le=U(M),Z=U(ae=>{const ue=hR({style:A,timeout:O,easing:h},{mode:"exit"});ae.style.webkitTransition=r.transitions.create("opacity",ue),ae.style.transition=r.transitions.create("opacity",ue),S&&S(ae)}),q=U(C),he=ae=>{o&&o(D.current,ae)};return Pe.jsx(L,Je({appear:l,in:f,nodeRef:D,onEnter:H,onEntered:oe,onEntering:V,onExit:Z,onExited:q,onExiting:le,addEndListener:he,timeout:O},B,{children:(ae,ue)=>pe.cloneElement(u,Je({style:Je({opacity:0,visibility:ae==="exited"&&!f?"hidden":void 0},bme[ae],A,u.props.style),ref:z},ue))}))}),$K=Tme;function Sme(n){return Eo("MuiBackdrop",n)}Bo("MuiBackdrop",["root","invisible"]);const wme=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Eme=n=>{const{classes:e,invisible:t}=n;return Fo({root:["root",t&&"invisible"]},Sme,e)},xme=hr("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})(({ownerState:n})=>Je({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},n.invisible&&{backgroundColor:"transparent"})),$me=pe.forwardRef(function(e,t){var r,s,o;const l=Jo({props:e,name:"MuiBackdrop"}),{children:u,className:h,component:f="div",components:g={},componentsProps:y={},invisible:b=!1,open:S,slotProps:C={},slots:M={},TransitionComponent:A=$K,transitionDuration:O}=l,L=xr(l,wme),B=Je({},l,{component:f,invisible:b}),D=Eme(B),z=(r=C.root)!=null?r:y.root;return Pe.jsx(A,Je({in:S,timeout:O},L,{children:Pe.jsx(xme,Je({"aria-hidden":!0},z,{as:(s=(o=M.root)!=null?o:g.Root)!=null?s:f,className:ii(D.root,h,z==null?void 0:z.className),ownerState:Je({},B,z==null?void 0:z.ownerState),classes:D,ref:t,children:u}))}))}),Qk=$me,Cme=Bo("MuiBox",["root"]),Mme=Cme,Ame=bK(),Ime=Rhe({themeId:SC,defaultTheme:Ame,defaultClassName:Mme.root,generateClassName:vF.generate}),Ey=Ime;function Rme(n){return Eo("MuiButton",n)}const kme=Bo("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),zM=kme,Ome=pe.createContext({}),Lme=Ome,Nme=pe.createContext(void 0),Dme=Nme,Pme=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Bme=n=>{const{color:e,disableElevation:t,fullWidth:r,size:s,variant:o,classes:l}=n,u={root:["root",o,`${o}${cr(e)}`,`size${cr(s)}`,`${o}Size${cr(s)}`,`color${cr(e)}`,t&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${cr(s)}`],endIcon:["icon","endIcon",`iconSize${cr(s)}`]},h=Fo(u,Rme,l);return Je({},l,h)},CK=n=>Je({},n.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},n.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},n.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),Fme=hr(RF,{shouldForwardProp:n=>Wm(n)||n==="classes",name:"MuiButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`${t.variant}${cr(t.color)}`],e[`size${cr(t.size)}`],e[`${t.variant}Size${cr(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth]}})(({theme:n,ownerState:e})=>{var t,r;const s=n.palette.mode==="light"?n.palette.grey[300]:n.palette.grey[800],o=n.palette.mode==="light"?n.palette.grey.A100:n.palette.grey[700];return Je({},n.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":Je({textDecoration:"none",backgroundColor:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.hoverOpacity})`:n0(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:n.vars?`rgba(${n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:n0(n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(n.vars||n).palette[e.color].main}`,backgroundColor:n.vars?`rgba(${n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:n0(n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:n.vars?n.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(n.vars||n).shadows[4],"@media (hover: none)":{boxShadow:(n.vars||n).shadows[2],backgroundColor:(n.vars||n).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(n.vars||n).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(n.vars||n).palette[e.color].main}}),"&:active":Je({},e.variant==="contained"&&{boxShadow:(n.vars||n).shadows[8]}),[`&.${zM.focusVisible}`]:Je({},e.variant==="contained"&&{boxShadow:(n.vars||n).shadows[6]}),[`&.${zM.disabled}`]:Je({color:(n.vars||n).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(n.vars||n).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(n.vars||n).palette.action.disabled,boxShadow:(n.vars||n).shadows[0],backgroundColor:(n.vars||n).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main,border:n.vars?`1px solid rgba(${n.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${n0(n.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:n.vars?n.vars.palette.text.primary:(t=(r=n.palette).getContrastText)==null?void 0:t.call(r,n.palette.grey[300]),backgroundColor:n.vars?n.vars.palette.Button.inheritContainedBg:s,boxShadow:(n.vars||n).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].contrastText,backgroundColor:(n.vars||n).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:n.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:n.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:n.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:n})=>n.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${zM.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${zM.disabled}`]:{boxShadow:"none"}}),zme=hr("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.startIcon,e[`iconSize${cr(t.size)}`]]}})(({ownerState:n})=>Je({display:"inherit",marginRight:8,marginLeft:-4},n.size==="small"&&{marginLeft:-2},CK(n))),Ume=hr("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.endIcon,e[`iconSize${cr(t.size)}`]]}})(({ownerState:n})=>Je({display:"inherit",marginRight:-4,marginLeft:8},n.size==="small"&&{marginRight:-2},CK(n))),Hme=pe.forwardRef(function(e,t){const r=pe.useContext(Lme),s=pe.useContext(Dme),o=TF(r,e),l=Jo({props:o,name:"MuiButton"}),{children:u,color:h="primary",component:f="button",className:g,disabled:y=!1,disableElevation:b=!1,disableFocusRipple:S=!1,endIcon:C,focusVisibleClassName:M,fullWidth:A=!1,size:O="medium",startIcon:L,type:B,variant:D="text"}=l,z=xr(l,Pme),U=Je({},l,{color:h,component:f,disabled:y,disableElevation:b,disableFocusRipple:S,fullWidth:A,size:O,type:B,variant:D}),V=Bme(U),H=L&&Pe.jsx(zme,{className:V.startIcon,ownerState:U,children:L}),oe=C&&Pe.jsx(Ume,{className:V.endIcon,ownerState:U,children:C}),le=s||"";return Pe.jsxs(Fme,Je({ownerState:U,className:ii(r.className,V.root,g,le),component:f,disabled:y,focusRipple:!S,focusVisibleClassName:ii(V.focusVisible,M),ref:t,type:B},z,{classes:V,children:[H,u,oe]}))}),Gme=Hme;function Wme(n){return Eo("PrivateSwitchBase",n)}Bo("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Vme=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],jme=n=>{const{classes:e,checked:t,disabled:r,edge:s}=n,o={root:["root",t&&"checked",r&&"disabled",s&&`edge${cr(s)}`],input:["input"]};return Fo(o,Wme,e)},Yme=hr(RF)(({ownerState:n})=>Je({padding:9,borderRadius:"50%"},n.edge==="start"&&{marginLeft:n.size==="small"?-3:-12},n.edge==="end"&&{marginRight:n.size==="small"?-3:-12})),Xme=hr("input",{shouldForwardProp:Wm})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Kme=pe.forwardRef(function(e,t){const{autoFocus:r,checked:s,checkedIcon:o,className:l,defaultChecked:u,disabled:h,disableFocusRipple:f=!1,edge:g=!1,icon:y,id:b,inputProps:S,inputRef:C,name:M,onBlur:A,onChange:O,onFocus:L,readOnly:B,required:D=!1,tabIndex:z,type:U,value:V}=e,H=xr(e,Vme),[oe,le]=lR({controlled:s,default:!!u,name:"SwitchBase",state:"checked"}),Z=Mv(),q=re=>{L&&L(re),Z&&Z.onFocus&&Z.onFocus(re)},he=re=>{A&&A(re),Z&&Z.onBlur&&Z.onBlur(re)},ae=re=>{if(re.nativeEvent.defaultPrevented)return;const ie=re.target.checked;le(ie),O&&O(re,ie)};let ue=h;Z&&typeof ue>"u"&&(ue=Z.disabled);const ge=U==="checkbox"||U==="radio",we=Je({},e,{checked:oe,disabled:ue,disableFocusRipple:f,edge:g}),J=jme(we);return Pe.jsxs(Yme,Je({component:"span",className:ii(J.root,l),centerRipple:!0,focusRipple:!f,disabled:ue,tabIndex:null,role:void 0,onFocus:q,onBlur:he,ownerState:we,ref:t},H,{children:[Pe.jsx(Xme,Je({autoFocus:r,checked:s,defaultChecked:u,className:J.input,disabled:ue,id:ge?b:void 0,name:M,onChange:ae,readOnly:B,ref:C,required:D,ownerState:we,tabIndex:z,type:U},U==="checkbox"&&V===void 0?{}:{value:V},S)),oe?o:y]}))}),MK=Kme,Jme=AC(Pe.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),qme=AC(Pe.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Qme=AC(Pe.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Zme(n){return Eo("MuiCheckbox",n)}const ege=Bo("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),eL=ege,tge=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],nge=n=>{const{classes:e,indeterminate:t,color:r,size:s}=n,o={root:["root",t&&"indeterminate",`color${cr(r)}`,`size${cr(s)}`]},l=Fo(o,Zme,e);return Je({},e,l)},rge=hr(MK,{shouldForwardProp:n=>Wm(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${cr(t.size)}`],t.color!=="default"&&e[`color${cr(t.color)}`]]}})(({theme:n,ownerState:e})=>Je({color:(n.vars||n).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${e.color==="default"?n.vars.palette.action.activeChannel:n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:n0(e.color==="default"?n.palette.action.active:n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${eL.checked}, &.${eL.indeterminate}`]:{color:(n.vars||n).palette[e.color].main},[`&.${eL.disabled}`]:{color:(n.vars||n).palette.action.disabled}})),ige=Pe.jsx(qme,{}),sge=Pe.jsx(Jme,{}),oge=Pe.jsx(Qme,{}),age=pe.forwardRef(function(e,t){var r,s;const o=Jo({props:e,name:"MuiCheckbox"}),{checkedIcon:l=ige,color:u="primary",icon:h=sge,indeterminate:f=!1,indeterminateIcon:g=oge,inputProps:y,size:b="medium",className:S}=o,C=xr(o,tge),M=f?g:h,A=f?g:l,O=Je({},o,{color:u,indeterminate:f,size:b}),L=nge(O);return Pe.jsx(rge,Je({type:"checkbox",inputProps:Je({"data-indeterminate":f},y),icon:pe.cloneElement(M,{fontSize:(r=M.props.fontSize)!=null?r:b}),checkedIcon:pe.cloneElement(A,{fontSize:(s=A.props.fontSize)!=null?s:b}),ownerState:O,ref:t,className:ii(L.root,S)},C,{classes:L}))}),lge=age;function uge(n){return Eo("MuiCircularProgress",n)}Bo("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const cge=["className","color","disableShrink","size","style","thickness","value","variant"];let Zk=n=>n,NH,DH,PH,BH;const ny=44,hge=aE(NH||(NH=Zk`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),dge=aE(DH||(DH=Zk`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),fge=n=>{const{classes:e,variant:t,color:r,disableShrink:s}=n,o={root:["root",t,`color${cr(r)}`],svg:["svg"],circle:["circle",`circle${cr(t)}`,s&&"circleDisableShrink"]};return Fo(o,uge,e)},pge=hr("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`color${cr(t.color)}`]]}})(({ownerState:n,theme:e})=>Je({display:"inline-block"},n.variant==="determinate"&&{transition:e.transitions.create("transform")},n.color!=="inherit"&&{color:(e.vars||e).palette[n.color].main}),({ownerState:n})=>n.variant==="indeterminate"&&Ek(PH||(PH=Zk`
      animation: ${0} 1.4s linear infinite;
    `),hge)),mge=hr("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(n,e)=>e.svg})({display:"block"}),gge=hr("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.circle,e[`circle${cr(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(({ownerState:n,theme:e})=>Je({stroke:"currentColor"},n.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},n.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:n})=>n.variant==="indeterminate"&&!n.disableShrink&&Ek(BH||(BH=Zk`
      animation: ${0} 1.4s ease-in-out infinite;
    `),dge)),_ge=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiCircularProgress"}),{className:s,color:o="primary",disableShrink:l=!1,size:u=40,style:h,thickness:f=3.6,value:g=0,variant:y="indeterminate"}=r,b=xr(r,cge),S=Je({},r,{color:o,disableShrink:l,size:u,thickness:f,value:g,variant:y}),C=fge(S),M={},A={},O={};if(y==="determinate"){const L=2*Math.PI*((ny-f)/2);M.strokeDasharray=L.toFixed(3),O["aria-valuenow"]=Math.round(g),M.strokeDashoffset=`${((100-g)/100*L).toFixed(3)}px`,A.transform="rotate(-90deg)"}return Pe.jsx(pge,Je({className:ii(C.root,s),style:Je({width:u,height:u},A,h),ownerState:S,ref:t,role:"progressbar"},O,b,{children:Pe.jsx(mge,{className:C.svg,ownerState:S,viewBox:`${ny/2} ${ny/2} ${ny} ${ny}`,children:Pe.jsx(gge,{className:C.circle,style:M,ownerState:S,cx:ny,cy:ny,r:(ny-f)/2,fill:"none",strokeWidth:f})})}))}),vge=_ge,yge=bde({createStyledComponent:hr("div",{name:"MuiContainer",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`maxWidth${cr(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),useThemeProps:n=>Jo({props:n,name:"MuiContainer"})}),FH=yge;function bge(n){return Eo("MuiModal",n)}Bo("MuiModal",["root","hidden","backdrop"]);const Tge=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],Sge=n=>{const{open:e,exited:t,classes:r}=n;return Fo({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},bge,r)},wge=hr("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(({theme:n,ownerState:e})=>Je({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),Ege=hr(Qk,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,e)=>e.backdrop})({zIndex:-1}),xge=pe.forwardRef(function(e,t){var r,s,o,l,u,h;const f=Jo({name:"MuiModal",props:e}),{BackdropComponent:g=Ege,BackdropProps:y,className:b,closeAfterTransition:S=!1,children:C,container:M,component:A,components:O={},componentsProps:L={},disableAutoFocus:B=!1,disableEnforceFocus:D=!1,disableEscapeKeyDown:z=!1,disablePortal:U=!1,disableRestoreFocus:V=!1,disableScrollLock:H=!1,hideBackdrop:oe=!1,keepMounted:le=!1,onBackdropClick:Z,open:q,slotProps:he,slots:ae}=f,ue=xr(f,Tge),ge=Je({},f,{closeAfterTransition:S,disableAutoFocus:B,disableEnforceFocus:D,disableEscapeKeyDown:z,disablePortal:U,disableRestoreFocus:V,disableScrollLock:H,hideBackdrop:oe,keepMounted:le}),{getRootProps:we,getBackdropProps:J,getTransitionProps:re,portalRef:ie,isTopModal:fe,exited:Te,hasTransition:Fe}=Qpe(Je({},ge,{rootRef:t})),Ie=Je({},ge,{exited:Te}),qe=Sge(Ie),Re={};if(C.props.tabIndex===void 0&&(Re.tabIndex="-1"),Fe){const{onEnter:He,onExited:rt}=re();Re.onEnter=He,Re.onExited=rt}const Qe=(r=(s=ae==null?void 0:ae.root)!=null?s:O.Root)!=null?r:wge,nt=(o=(l=ae==null?void 0:ae.backdrop)!=null?l:O.Backdrop)!=null?o:g,ft=(u=he==null?void 0:he.root)!=null?u:L.root,lt=(h=he==null?void 0:he.backdrop)!=null?h:L.backdrop,ze=Rw({elementType:Qe,externalSlotProps:ft,externalForwardedProps:ue,getSlotProps:we,additionalProps:{ref:t,as:A},ownerState:Ie,className:ii(b,ft==null?void 0:ft.className,qe==null?void 0:qe.root,!Ie.open&&Ie.exited&&(qe==null?void 0:qe.hidden))}),Ce=Rw({elementType:nt,externalSlotProps:lt,additionalProps:y,getSlotProps:He=>J(Je({},He,{onClick:rt=>{Z&&Z(rt),He!=null&&He.onClick&&He.onClick(rt)}})),className:ii(lt==null?void 0:lt.className,y==null?void 0:y.className,qe==null?void 0:qe.backdrop),ownerState:Ie});return!le&&!q&&(!Fe||Te)?null:Pe.jsx(Gpe,{ref:ie,container:M,disablePortal:U,children:Pe.jsxs(Qe,Je({},ze,{children:[!oe&&g?Pe.jsx(nt,Je({},Ce)):null,Pe.jsx(Upe,{disableEnforceFocus:D,disableAutoFocus:B,disableRestoreFocus:V,isEnabled:fe,open:q,children:pe.cloneElement(C,Re)})]}))})}),AK=xge;function $ge(n){return Eo("MuiDialog",n)}const Cge=Bo("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),tL=Cge,Mge=pe.createContext({}),Age=Mge,Ige=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Rge=hr(Qk,{name:"MuiDialog",slot:"Backdrop",overrides:(n,e)=>e.backdrop})({zIndex:-1}),kge=n=>{const{classes:e,scroll:t,maxWidth:r,fullWidth:s,fullScreen:o}=n,l={root:["root"],container:["container",`scroll${cr(t)}`],paper:["paper",`paperScroll${cr(t)}`,`paperWidth${cr(String(r))}`,s&&"paperFullWidth",o&&"paperFullScreen"]};return Fo(l,$ge,e)},Oge=hr(AK,{name:"MuiDialog",slot:"Root",overridesResolver:(n,e)=>e.root})({"@media print":{position:"absolute !important"}}),Lge=hr("div",{name:"MuiDialog",slot:"Container",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.container,e[`scroll${cr(t.scroll)}`]]}})(({ownerState:n})=>Je({height:"100%","@media print":{height:"auto"},outline:0},n.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},n.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),Nge=hr(IF,{name:"MuiDialog",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`scrollPaper${cr(t.scroll)}`],e[`paperWidth${cr(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(({theme:n,ownerState:e})=>Je({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:n.breakpoints.unit==="px"?Math.max(n.breakpoints.values.xs,444):`max(${n.breakpoints.values.xs}${n.breakpoints.unit}, 444px)`,[`&.${tL.paperScrollBody}`]:{[n.breakpoints.down(Math.max(n.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${n.breakpoints.values[e.maxWidth]}${n.breakpoints.unit}`,[`&.${tL.paperScrollBody}`]:{[n.breakpoints.down(n.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${tL.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Dge=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiDialog"}),s=jk(),o={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":u,BackdropComponent:h,BackdropProps:f,children:g,className:y,disableEscapeKeyDown:b=!1,fullScreen:S=!1,fullWidth:C=!1,maxWidth:M="sm",onBackdropClick:A,onClose:O,open:L,PaperComponent:B=IF,PaperProps:D={},scroll:z="paper",TransitionComponent:U=$K,transitionDuration:V=o,TransitionProps:H}=r,oe=xr(r,Ige),le=Je({},r,{disableEscapeKeyDown:b,fullScreen:S,fullWidth:C,maxWidth:M,scroll:z}),Z=kge(le),q=pe.useRef(),he=we=>{q.current=we.target===we.currentTarget},ae=we=>{q.current&&(q.current=null,A&&A(we),O&&O(we,"backdropClick"))},ue=Hk(u),ge=pe.useMemo(()=>({titleId:ue}),[ue]);return Pe.jsx(Oge,Je({className:ii(Z.root,y),closeAfterTransition:!0,components:{Backdrop:Rge},componentsProps:{backdrop:Je({transitionDuration:V,as:h},f)},disableEscapeKeyDown:b,onClose:O,open:L,ref:t,onClick:ae,ownerState:le},oe,{children:Pe.jsx(U,Je({appear:!0,in:L,timeout:V,role:"presentation"},H,{children:Pe.jsx(Lge,{className:ii(Z.container),onMouseDown:he,ownerState:le,children:Pe.jsx(Nge,Je({as:B,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":ue},D,{className:ii(Z.paper,D.className),ownerState:le,children:Pe.jsx(Age.Provider,{value:ge,children:g})}))})}))}))}),IK=Dge,Pge=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Bge=n=>{const{classes:e,disableUnderline:t}=n,s=Fo({root:["root",!t&&"underline"],input:["input"]},gme,e);return Je({},e,s)},Fge=hr(Jk,{shouldForwardProp:n=>Wm(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...Xk(n,e),!t.disableUnderline&&e.underline]}})(({theme:n,ownerState:e})=>{var t;const r=n.palette.mode==="light",s=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return Je({position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o}},[`&.${Hb.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o},[`&.${Hb.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:u}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t=(n.vars||n).palette[e.color||"primary"])==null?void 0:t.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Hb.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Hb.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:s}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Hb.disabled}, .${Hb.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${Hb.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&Je({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),zge=hr(qk,{name:"MuiFilledInput",slot:"Input",overridesResolver:Kk})(({theme:n,ownerState:e})=>Je({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),RK=pe.forwardRef(function(e,t){var r,s,o,l;const u=Jo({props:e,name:"MuiFilledInput"}),{components:h={},componentsProps:f,fullWidth:g=!1,inputComponent:y="input",multiline:b=!1,slotProps:S,slots:C={},type:M="text"}=u,A=xr(u,Pge),O=Je({},u,{fullWidth:g,inputComponent:y,multiline:b,type:M}),L=Bge(u),B={root:{ownerState:O},input:{ownerState:O}},D=S??f?fp(B,S??f):B,z=(r=(s=C.root)!=null?s:h.Root)!=null?r:Fge,U=(o=(l=C.input)!=null?l:h.Input)!=null?o:zge;return Pe.jsx(OF,Je({slots:{root:z,input:U},componentsProps:D,fullWidth:g,inputComponent:y,multiline:b,ref:t,type:M},A,{classes:L}))});RK.muiName="Input";const kK=RK;function Uge(n){return Eo("MuiFormControl",n)}Bo("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Hge=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Gge=n=>{const{classes:e,margin:t,fullWidth:r}=n,s={root:["root",t!=="none"&&`margin${cr(t)}`,r&&"fullWidth"]};return Fo(s,Uge,e)},Wge=hr("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:n},e)=>Je({},e.root,e[`margin${cr(n.margin)}`],n.fullWidth&&e.fullWidth)})(({ownerState:n})=>Je({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},n.margin==="normal"&&{marginTop:16,marginBottom:8},n.margin==="dense"&&{marginTop:8,marginBottom:4},n.fullWidth&&{width:"100%"})),Vge=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiFormControl"}),{children:s,className:o,color:l="primary",component:u="div",disabled:h=!1,error:f=!1,focused:g,fullWidth:y=!1,hiddenLabel:b=!1,margin:S="none",required:C=!1,size:M="medium",variant:A="outlined"}=r,O=xr(r,Hge),L=Je({},r,{color:l,component:u,disabled:h,error:f,fullWidth:y,hiddenLabel:b,margin:S,required:C,size:M,variant:A}),B=Gge(L),[D,z]=pe.useState(()=>{let he=!1;return s&&pe.Children.forEach(s,ae=>{if(!dI(ae,["Input","Select"]))return;const ue=dI(ae,["Select"])?ae.props.input:ae;ue&&sme(ue.props)&&(he=!0)}),he}),[U,V]=pe.useState(()=>{let he=!1;return s&&pe.Children.forEach(s,ae=>{dI(ae,["Input","Select"])&&(fR(ae.props,!0)||fR(ae.props.inputProps,!0))&&(he=!0)}),he}),[H,oe]=pe.useState(!1);h&&H&&oe(!1);const le=g!==void 0&&!h?g:H;let Z;const q=pe.useMemo(()=>({adornedStart:D,setAdornedStart:z,color:l,disabled:h,error:f,filled:U,focused:le,fullWidth:y,hiddenLabel:b,size:M,onBlur:()=>{oe(!1)},onEmpty:()=>{V(!1)},onFilled:()=>{V(!0)},onFocus:()=>{oe(!0)},registerEffect:Z,required:C,variant:A}),[D,l,h,f,U,le,y,b,Z,C,M,A]);return Pe.jsx(kF.Provider,{value:q,children:Pe.jsx(Wge,Je({as:u,ownerState:L,className:ii(B.root,o),ref:t},O,{children:s}))})}),jge=Vge,Yge=Mde({createStyledComponent:hr("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root}),useThemeProps:n=>Jo({props:n,name:"MuiStack"})}),D$=Yge;function Xge(n){return Eo("MuiFormControlLabel",n)}const Kge=Bo("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),kx=Kge,Jge=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],qge=n=>{const{classes:e,disabled:t,labelPlacement:r,error:s,required:o}=n,l={root:["root",t&&"disabled",`labelPlacement${cr(r)}`,s&&"error",o&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",s&&"error"]};return Fo(l,Xge,e)},Qge=hr("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${kx.label}`]:e.label},e.root,e[`labelPlacement${cr(t.labelPlacement)}`]]}})(({theme:n,ownerState:e})=>Je({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${kx.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${kx.label}`]:{[`&.${kx.disabled}`]:{color:(n.vars||n).palette.text.disabled}}})),Zge=hr("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${kx.error}`]:{color:(n.vars||n).palette.error.main}})),e0e=pe.forwardRef(function(e,t){var r,s;const o=Jo({props:e,name:"MuiFormControlLabel"}),{className:l,componentsProps:u={},control:h,disabled:f,disableTypography:g,label:y,labelPlacement:b="end",required:S,slotProps:C={}}=o,M=xr(o,Jge),A=Mv(),O=(r=f??h.props.disabled)!=null?r:A==null?void 0:A.disabled,L=S??h.props.required,B={disabled:O,required:L};["checked","name","onChange","value","inputRef"].forEach(oe=>{typeof h.props[oe]>"u"&&typeof o[oe]<"u"&&(B[oe]=o[oe])});const D=tb({props:o,muiFormControl:A,states:["error"]}),z=Je({},o,{disabled:O,labelPlacement:b,required:L,error:D.error}),U=qge(z),V=(s=C.typography)!=null?s:u.typography;let H=y;return H!=null&&H.type!==Q1&&!g&&(H=Pe.jsx(Q1,Je({component:"span"},V,{className:ii(U.label,V==null?void 0:V.className),children:H}))),Pe.jsxs(Qge,Je({className:ii(U.root,l),ownerState:z,ref:t},M,{children:[pe.cloneElement(h,B),L?Pe.jsxs(D$,{display:"block",children:[H,Pe.jsxs(Zge,{ownerState:z,"aria-hidden":!0,className:U.asterisk,children:["","*"]})]}):H]}))}),OK=e0e;function t0e(n){return Eo("MuiFormGroup",n)}Bo("MuiFormGroup",["root","row","error"]);const n0e=["className","row"],r0e=n=>{const{classes:e,row:t,error:r}=n;return Fo({root:["root",t&&"row",r&&"error"]},t0e,e)},i0e=hr("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.row&&e.row]}})(({ownerState:n})=>Je({display:"flex",flexDirection:"column",flexWrap:"wrap"},n.row&&{flexDirection:"row"})),s0e=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiFormGroup"}),{className:s,row:o=!1}=r,l=xr(r,n0e),u=Mv(),h=tb({props:r,muiFormControl:u,states:["error"]}),f=Je({},r,{row:o,error:h.error}),g=r0e(f);return Pe.jsx(i0e,Je({className:ii(g.root,s),ownerState:f,ref:t},l))}),LK=s0e;function o0e(n){return Eo("MuiFormHelperText",n)}const a0e=Bo("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),zH=a0e;var UH;const l0e=["children","className","component","disabled","error","filled","focused","margin","required","variant"],u0e=n=>{const{classes:e,contained:t,size:r,disabled:s,error:o,filled:l,focused:u,required:h}=n,f={root:["root",s&&"disabled",o&&"error",r&&`size${cr(r)}`,t&&"contained",u&&"focused",l&&"filled",h&&"required"]};return Fo(f,o0e,e)},c0e=hr("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${cr(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(({theme:n,ownerState:e})=>Je({color:(n.vars||n).palette.text.secondary},n.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${zH.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${zH.error}`]:{color:(n.vars||n).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),h0e=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiFormHelperText"}),{children:s,className:o,component:l="p"}=r,u=xr(r,l0e),h=Mv(),f=tb({props:r,muiFormControl:h,states:["variant","size","disabled","error","filled","focused","required"]}),g=Je({},r,{component:l,contained:f.variant==="filled"||f.variant==="outlined",variant:f.variant,size:f.size,disabled:f.disabled,error:f.error,filled:f.filled,focused:f.focused,required:f.required}),y=u0e(g);return Pe.jsx(c0e,Je({as:l,ownerState:g,className:ii(y.root,o),ref:t},u,{children:s===" "?UH||(UH=Pe.jsx("span",{className:"notranslate",children:""})):s}))}),d0e=h0e;function f0e(n){return Eo("MuiFormLabel",n)}const p0e=Bo("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),e$=p0e,m0e=["children","className","color","component","disabled","error","filled","focused","required"],g0e=n=>{const{classes:e,color:t,focused:r,disabled:s,error:o,filled:l,required:u}=n,h={root:["root",`color${cr(t)}`,s&&"disabled",o&&"error",l&&"filled",r&&"focused",u&&"required"],asterisk:["asterisk",o&&"error"]};return Fo(h,f0e,e)},_0e=hr("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:n},e)=>Je({},e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled)})(({theme:n,ownerState:e})=>Je({color:(n.vars||n).palette.text.secondary},n.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${e$.focused}`]:{color:(n.vars||n).palette[e.color].main},[`&.${e$.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${e$.error}`]:{color:(n.vars||n).palette.error.main}})),v0e=hr("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${e$.error}`]:{color:(n.vars||n).palette.error.main}})),y0e=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiFormLabel"}),{children:s,className:o,component:l="label"}=r,u=xr(r,m0e),h=Mv(),f=tb({props:r,muiFormControl:h,states:["color","required","focused","disabled","error","filled"]}),g=Je({},r,{color:f.color||"primary",component:l,disabled:f.disabled,error:f.error,filled:f.filled,focused:f.focused,required:f.required}),y=g0e(g);return Pe.jsxs(_0e,Je({as:l,ownerState:g,className:ii(y.root,o),ref:t},u,{children:[s,f.required&&Pe.jsxs(v0e,{ownerState:g,"aria-hidden":!0,className:y.asterisk,children:["","*"]})]}))}),b0e=y0e,T0e=pe.createContext(),HH=T0e;function S0e(n){return Eo("MuiGrid",n)}const w0e=[0,1,2,3,4,5,6,7,8,9,10],E0e=["column-reverse","column","row-reverse","row"],x0e=["nowrap","wrap-reverse","wrap"],ix=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],P$=Bo("MuiGrid",["root","container","item","zeroMinWidth",...w0e.map(n=>`spacing-xs-${n}`),...E0e.map(n=>`direction-xs-${n}`),...x0e.map(n=>`wrap-xs-${n}`),...ix.map(n=>`grid-xs-${n}`),...ix.map(n=>`grid-sm-${n}`),...ix.map(n=>`grid-md-${n}`),...ix.map(n=>`grid-lg-${n}`),...ix.map(n=>`grid-xl-${n}`)]),$0e=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function gw(n){const e=parseFloat(n);return`${e}${String(n).replace(String(e),"")||"px"}`}function C0e({theme:n,ownerState:e}){let t;return n.breakpoints.keys.reduce((r,s)=>{let o={};if(e[s]&&(t=e[s]),!t)return r;if(t===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(t==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const l=O1({values:e.columns,breakpoints:n.breakpoints.values}),u=typeof l=="object"?l[s]:l;if(u==null)return r;const h=`${Math.round(t/u*1e8)/1e6}%`;let f={};if(e.container&&e.item&&e.columnSpacing!==0){const g=n.spacing(e.columnSpacing);if(g!=="0px"){const y=`calc(${h} + ${gw(g)})`;f={flexBasis:y,maxWidth:y}}}o=Je({flexBasis:h,flexGrow:0,maxWidth:h},f)}return n.breakpoints.values[s]===0?Object.assign(r,o):r[n.breakpoints.up(s)]=o,r},{})}function M0e({theme:n,ownerState:e}){const t=O1({values:e.direction,breakpoints:n.breakpoints.values});return Qp({theme:n},t,r=>{const s={flexDirection:r};return r.indexOf("column")===0&&(s[`& > .${P$.item}`]={maxWidth:"none"}),s})}function NK({breakpoints:n,values:e}){let t="";Object.keys(e).forEach(s=>{t===""&&e[s]!==0&&(t=s)});const r=Object.keys(n).sort((s,o)=>n[s]-n[o]);return r.slice(0,r.indexOf(t))}function A0e({theme:n,ownerState:e}){const{container:t,rowSpacing:r}=e;let s={};if(t&&r!==0){const o=O1({values:r,breakpoints:n.breakpoints.values});let l;typeof o=="object"&&(l=NK({breakpoints:n.breakpoints.values,values:o})),s=Qp({theme:n},o,(u,h)=>{var f;const g=n.spacing(u);return g!=="0px"?{marginTop:`-${gw(g)}`,[`& > .${P$.item}`]:{paddingTop:gw(g)}}:(f=l)!=null&&f.includes(h)?{}:{marginTop:0,[`& > .${P$.item}`]:{paddingTop:0}}})}return s}function I0e({theme:n,ownerState:e}){const{container:t,columnSpacing:r}=e;let s={};if(t&&r!==0){const o=O1({values:r,breakpoints:n.breakpoints.values});let l;typeof o=="object"&&(l=NK({breakpoints:n.breakpoints.values,values:o})),s=Qp({theme:n},o,(u,h)=>{var f;const g=n.spacing(u);return g!=="0px"?{width:`calc(100% + ${gw(g)})`,marginLeft:`-${gw(g)}`,[`& > .${P$.item}`]:{paddingLeft:gw(g)}}:(f=l)!=null&&f.includes(h)?{}:{width:"100%",marginLeft:0,[`& > .${P$.item}`]:{paddingLeft:0}}})}return s}function R0e(n,e,t={}){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[t[`spacing-xs-${String(n)}`]];const r=[];return e.forEach(s=>{const o=n[s];Number(o)>0&&r.push(t[`spacing-${s}-${String(o)}`])}),r}const k0e=hr("div",{name:"MuiGrid",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n,{container:r,direction:s,item:o,spacing:l,wrap:u,zeroMinWidth:h,breakpoints:f}=t;let g=[];r&&(g=R0e(l,f,e));const y=[];return f.forEach(b=>{const S=t[b];S&&y.push(e[`grid-${b}-${String(S)}`])}),[e.root,r&&e.container,o&&e.item,h&&e.zeroMinWidth,...g,s!=="row"&&e[`direction-xs-${String(s)}`],u!=="wrap"&&e[`wrap-xs-${String(u)}`],...y]}})(({ownerState:n})=>Je({boxSizing:"border-box"},n.container&&{display:"flex",flexWrap:"wrap",width:"100%"},n.item&&{margin:0},n.zeroMinWidth&&{minWidth:0},n.wrap!=="wrap"&&{flexWrap:n.wrap}),M0e,A0e,I0e,C0e);function O0e(n,e){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[`spacing-xs-${String(n)}`];const t=[];return e.forEach(r=>{const s=n[r];if(Number(s)>0){const o=`spacing-${r}-${String(s)}`;t.push(o)}}),t}const L0e=n=>{const{classes:e,container:t,direction:r,item:s,spacing:o,wrap:l,zeroMinWidth:u,breakpoints:h}=n;let f=[];t&&(f=O0e(o,h));const g=[];h.forEach(b=>{const S=n[b];S&&g.push(`grid-${b}-${String(S)}`)});const y={root:["root",t&&"container",s&&"item",u&&"zeroMinWidth",...f,r!=="row"&&`direction-xs-${String(r)}`,l!=="wrap"&&`wrap-xs-${String(l)}`,...g]};return Fo(y,S0e,e)},N0e=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiGrid"}),{breakpoints:s}=jk(),o=CC(r),{className:l,columns:u,columnSpacing:h,component:f="div",container:g=!1,direction:y="row",item:b=!1,rowSpacing:S,spacing:C=0,wrap:M="wrap",zeroMinWidth:A=!1}=o,O=xr(o,$0e),L=S||C,B=h||C,D=pe.useContext(HH),z=g?u||12:D,U={},V=Je({},O);s.keys.forEach(le=>{O[le]!=null&&(U[le]=O[le],delete V[le])});const H=Je({},o,{columns:z,container:g,direction:y,item:b,rowSpacing:L,columnSpacing:B,wrap:M,zeroMinWidth:A,spacing:C},U,{breakpoints:s.keys}),oe=L0e(H);return Pe.jsx(HH.Provider,{value:z,children:Pe.jsx(k0e,Je({ownerState:H,className:ii(oe.root,l),as:f,ref:t},V))})}),Lc=N0e,D0e=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function YD(n){return`scale(${n}, ${n**2})`}const P0e={entering:{opacity:1,transform:YD(1)},entered:{opacity:1,transform:"none"}},nL=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),DK=pe.forwardRef(function(e,t){const{addEndListener:r,appear:s=!0,children:o,easing:l,in:u,onEnter:h,onEntered:f,onEntering:g,onExit:y,onExited:b,onExiting:S,style:C,timeout:M="auto",TransitionComponent:A=wK}=e,O=xr(e,D0e),L=lK(),B=pe.useRef(),D=jk(),z=pe.useRef(null),U=gp(z,o.ref,t),V=ue=>ge=>{if(ue){const we=z.current;ge===void 0?ue(we):ue(we,ge)}},H=V(g),oe=V((ue,ge)=>{EK(ue);const{duration:we,delay:J,easing:re}=hR({style:C,timeout:M,easing:l},{mode:"enter"});let ie;M==="auto"?(ie=D.transitions.getAutoHeightDuration(ue.clientHeight),B.current=ie):ie=we,ue.style.transition=[D.transitions.create("opacity",{duration:ie,delay:J}),D.transitions.create("transform",{duration:nL?ie:ie*.666,delay:J,easing:re})].join(","),h&&h(ue,ge)}),le=V(f),Z=V(S),q=V(ue=>{const{duration:ge,delay:we,easing:J}=hR({style:C,timeout:M,easing:l},{mode:"exit"});let re;M==="auto"?(re=D.transitions.getAutoHeightDuration(ue.clientHeight),B.current=re):re=ge,ue.style.transition=[D.transitions.create("opacity",{duration:re,delay:we}),D.transitions.create("transform",{duration:nL?re:re*.666,delay:nL?we:we||re*.333,easing:J})].join(","),ue.style.opacity=0,ue.style.transform=YD(.75),y&&y(ue)}),he=V(b),ae=ue=>{M==="auto"&&L.start(B.current||0,ue),r&&r(z.current,ue)};return Pe.jsx(A,Je({appear:s,in:u,nodeRef:z,onEnter:oe,onEntered:le,onEntering:H,onExit:q,onExited:he,onExiting:Z,addEndListener:ae,timeout:M==="auto"?null:M},O,{children:(ue,ge)=>pe.cloneElement(o,Je({style:Je({opacity:0,transform:YD(.75),visibility:ue==="exited"&&!u?"hidden":void 0},P0e[ue],C,o.props.style),ref:U},ge))}))});DK.muiSupportAuto=!0;const B0e=DK,F0e=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],z0e=n=>{const{classes:e,disableUnderline:t}=n,s=Fo({root:["root",!t&&"underline"],input:["input"]},dme,e);return Je({},e,s)},U0e=hr(Jk,{shouldForwardProp:n=>Wm(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...Xk(n,e),!t.disableUnderline&&e.underline]}})(({theme:n,ownerState:e})=>{let r=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(r=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),Je({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${rx.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${rx.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${rx.disabled}, .${rx.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${rx.disabled}:before`]:{borderBottomStyle:"dotted"}})}),H0e=hr(qk,{name:"MuiInput",slot:"Input",overridesResolver:Kk})({}),PK=pe.forwardRef(function(e,t){var r,s,o,l;const u=Jo({props:e,name:"MuiInput"}),{disableUnderline:h,components:f={},componentsProps:g,fullWidth:y=!1,inputComponent:b="input",multiline:S=!1,slotProps:C,slots:M={},type:A="text"}=u,O=xr(u,F0e),L=z0e(u),D={root:{ownerState:{disableUnderline:h}}},z=C??g?fp(C??g,D):D,U=(r=(s=M.root)!=null?s:f.Root)!=null?r:U0e,V=(o=(l=M.input)!=null?l:f.Input)!=null?o:H0e;return Pe.jsx(OF,Je({slots:{root:U,input:V},slotProps:z,fullWidth:y,inputComponent:b,multiline:S,ref:t,type:A},O,{classes:L}))});PK.muiName="Input";const LF=PK;function G0e(n){return Eo("MuiInputLabel",n)}Bo("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const W0e=["disableAnimation","margin","shrink","variant","className"],V0e=n=>{const{classes:e,formControl:t,size:r,shrink:s,disableAnimation:o,variant:l,required:u}=n,h={root:["root",t&&"formControl",!o&&"animated",s&&"shrink",r&&r!=="normal"&&`size${cr(r)}`,l],asterisk:[u&&"asterisk"]},f=Fo(h,G0e,e);return Je({},e,f)},j0e=hr(b0e,{shouldForwardProp:n=>Wm(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${e$.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(({theme:n,ownerState:e})=>Je({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})},e.variant==="filled"&&Je({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&Je({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&Je({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Y0e=pe.forwardRef(function(e,t){const r=Jo({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,shrink:o,className:l}=r,u=xr(r,W0e),h=Mv();let f=o;typeof f>"u"&&h&&(f=h.filled||h.focused||h.adornedStart);const g=tb({props:r,muiFormControl:h,states:["size","variant","required","focused"]}),y=Je({},r,{disableAnimation:s,formControl:h,shrink:f,size:g.size,variant:g.variant,required:g.required,focused:g.focused}),b=V0e(y);return Pe.jsx(j0e,Je({"data-shrink":f,ownerState:y,ref:t,className:ii(b.root,l)},u,{classes:b}))}),X0e=Y0e,K0e=pe.createContext({}),J0e=K0e;function q0e(n){return Eo("MuiList",n)}Bo("MuiList",["root","padding","dense","subheader"]);const Q0e=["children","className","component","dense","disablePadding","subheader"],Z0e=n=>{const{classes:e,disablePadding:t,dense:r,subheader:s}=n;return Fo({root:["root",!t&&"padding",r&&"dense",s&&"subheader"]},q0e,e)},e_e=hr("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})(({ownerState:n})=>Je({listStyle:"none",margin:0,padding:0,position:"relative"},!n.disablePadding&&{paddingTop:8,paddingBottom:8},n.subheader&&{paddingTop:0})),t_e=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiList"}),{children:s,className:o,component:l="ul",dense:u=!1,disablePadding:h=!1,subheader:f}=r,g=xr(r,Q0e),y=pe.useMemo(()=>({dense:u}),[u]),b=Je({},r,{component:l,dense:u,disablePadding:h}),S=Z0e(b);return Pe.jsx(J0e.Provider,{value:y,children:Pe.jsxs(e_e,Je({as:l,className:ii(S.root,o),ref:t,ownerState:b},g,{children:[f,s]}))})}),n_e=t_e,r_e=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function rL(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function GH(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function BK(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.indexOf(e.keys.join(""))===0}function sx(n,e,t,r,s,o){let l=!1,u=s(n,e,e?t:!1);for(;u;){if(u===n.firstChild){if(l)return!1;l=!0}const h=r?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!BK(u,o)||h)u=s(n,u,t);else return u.focus(),!0}return!1}const i_e=pe.forwardRef(function(e,t){const{actions:r,autoFocus:s=!1,autoFocusItem:o=!1,children:l,className:u,disabledItemsFocusable:h=!1,disableListWrap:f=!1,onKeyDown:g,variant:y="selectedMenu"}=e,b=xr(e,r_e),S=pe.useRef(null),C=pe.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Uy(()=>{s&&S.current.focus()},[s]),pe.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(B,{direction:D})=>{const z=!S.current.style.width;if(B.clientHeight<S.current.clientHeight&&z){const U=`${cK(Jp(B))}px`;S.current.style[D==="rtl"?"paddingLeft":"paddingRight"]=U,S.current.style.width=`calc(100% + ${U})`}return S.current}}),[]);const M=B=>{const D=S.current,z=B.key,U=Jp(D).activeElement;if(z==="ArrowDown")B.preventDefault(),sx(D,U,f,h,rL);else if(z==="ArrowUp")B.preventDefault(),sx(D,U,f,h,GH);else if(z==="Home")B.preventDefault(),sx(D,null,f,h,rL);else if(z==="End")B.preventDefault(),sx(D,null,f,h,GH);else if(z.length===1){const V=C.current,H=z.toLowerCase(),oe=performance.now();V.keys.length>0&&(oe-V.lastTime>500?(V.keys=[],V.repeating=!0,V.previousKeyMatched=!0):V.repeating&&H!==V.keys[0]&&(V.repeating=!1)),V.lastTime=oe,V.keys.push(H);const le=U&&!V.repeating&&BK(U,V);V.previousKeyMatched&&(le||sx(D,U,!1,h,rL,V))?B.preventDefault():V.previousKeyMatched=!1}g&&g(B)},A=gp(S,t);let O=-1;pe.Children.forEach(l,(B,D)=>{if(!pe.isValidElement(B)){O===D&&(O+=1,O>=l.length&&(O=-1));return}B.props.disabled||(y==="selectedMenu"&&B.props.selected||O===-1)&&(O=D),O===D&&(B.props.disabled||B.props.muiSkipListHighlight||B.type.muiSkipListHighlight)&&(O+=1,O>=l.length&&(O=-1))});const L=pe.Children.map(l,(B,D)=>{if(D===O){const z={};return o&&(z.autoFocus=!0),B.props.tabIndex===void 0&&y==="selectedMenu"&&(z.tabIndex=0),pe.cloneElement(B,z)}return B});return Pe.jsx(n_e,Je({role:"menu",ref:A,className:u,onKeyDown:M,tabIndex:s?0:-1},b,{children:L}))}),s_e=i_e;function o_e(n){return Eo("MuiPopover",n)}Bo("MuiPopover",["root","paper"]);const a_e=["onEntering"],l_e=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],u_e=["slotProps"];function WH(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function VH(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function jH(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function iL(n){return typeof n=="function"?n():n}const c_e=n=>{const{classes:e}=n;return Fo({root:["root"],paper:["paper"]},o_e,e)},h_e=hr(AK,{name:"MuiPopover",slot:"Root",overridesResolver:(n,e)=>e.root})({}),FK=hr(IF,{name:"MuiPopover",slot:"Paper",overridesResolver:(n,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),d_e=pe.forwardRef(function(e,t){var r,s,o;const l=Jo({props:e,name:"MuiPopover"}),{action:u,anchorEl:h,anchorOrigin:f={vertical:"top",horizontal:"left"},anchorPosition:g,anchorReference:y="anchorEl",children:b,className:S,container:C,elevation:M=8,marginThreshold:A=16,open:O,PaperProps:L={},slots:B,slotProps:D,transformOrigin:z={vertical:"top",horizontal:"left"},TransitionComponent:U=B0e,transitionDuration:V="auto",TransitionProps:{onEntering:H}={},disableScrollLock:oe=!1}=l,le=xr(l.TransitionProps,a_e),Z=xr(l,l_e),q=(r=D==null?void 0:D.paper)!=null?r:L,he=pe.useRef(),ae=gp(he,q.ref),ue=Je({},l,{anchorOrigin:f,anchorReference:y,elevation:M,marginThreshold:A,externalPaperSlotProps:q,transformOrigin:z,TransitionComponent:U,transitionDuration:V,TransitionProps:le}),ge=c_e(ue),we=pe.useCallback(()=>{if(y==="anchorPosition")return g;const He=iL(h),it=(He&&He.nodeType===1?He:Jp(he.current).body).getBoundingClientRect();return{top:it.top+WH(it,f.vertical),left:it.left+VH(it,f.horizontal)}},[h,f.horizontal,f.vertical,g,y]),J=pe.useCallback(He=>({vertical:WH(He,z.vertical),horizontal:VH(He,z.horizontal)}),[z.horizontal,z.vertical]),re=pe.useCallback(He=>{const rt={width:He.offsetWidth,height:He.offsetHeight},it=J(rt);if(y==="none")return{top:null,left:null,transformOrigin:jH(it)};const Nt=we();let kt=Nt.top-it.vertical,vt=Nt.left-it.horizontal;const Mt=kt+rt.height,At=vt+rt.width,mt=Hy(iL(h)),xe=mt.innerHeight-A,se=mt.innerWidth-A;if(A!==null&&kt<A){const $e=kt-A;kt-=$e,it.vertical+=$e}else if(A!==null&&Mt>xe){const $e=Mt-xe;kt-=$e,it.vertical+=$e}if(A!==null&&vt<A){const $e=vt-A;vt-=$e,it.horizontal+=$e}else if(At>se){const $e=At-se;vt-=$e,it.horizontal+=$e}return{top:`${Math.round(kt)}px`,left:`${Math.round(vt)}px`,transformOrigin:jH(it)}},[h,y,we,J,A]),[ie,fe]=pe.useState(O),Te=pe.useCallback(()=>{const He=he.current;if(!He)return;const rt=re(He);rt.top!==null&&(He.style.top=rt.top),rt.left!==null&&(He.style.left=rt.left),He.style.transformOrigin=rt.transformOrigin,fe(!0)},[re]);pe.useEffect(()=>(oe&&window.addEventListener("scroll",Te),()=>window.removeEventListener("scroll",Te)),[h,oe,Te]);const Fe=(He,rt)=>{H&&H(He,rt),Te()},Ie=()=>{fe(!1)};pe.useEffect(()=>{O&&Te()}),pe.useImperativeHandle(u,()=>O?{updatePosition:()=>{Te()}}:null,[O,Te]),pe.useEffect(()=>{if(!O)return;const He=wF(()=>{Te()}),rt=Hy(h);return rt.addEventListener("resize",He),()=>{He.clear(),rt.removeEventListener("resize",He)}},[h,O,Te]);let qe=V;V==="auto"&&!U.muiSupportAuto&&(qe=void 0);const Re=C||(h?Jp(iL(h)).body:void 0),Qe=(s=B==null?void 0:B.root)!=null?s:h_e,nt=(o=B==null?void 0:B.paper)!=null?o:FK,ft=Rw({elementType:nt,externalSlotProps:Je({},q,{style:ie?q.style:Je({},q.style,{opacity:0})}),additionalProps:{elevation:M,ref:ae},ownerState:ue,className:ii(ge.paper,q==null?void 0:q.className)}),lt=Rw({elementType:Qe,externalSlotProps:(D==null?void 0:D.root)||{},externalForwardedProps:Z,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:Re,open:O},ownerState:ue,className:ii(ge.root,S)}),{slotProps:ze}=lt,Ce=xr(lt,u_e);return Pe.jsx(Qe,Je({},Ce,!dR(Qe)&&{slotProps:ze,disableScrollLock:oe},{children:Pe.jsx(U,Je({appear:!0,in:O,onEntering:Fe,onExited:Ie,timeout:qe},le,{children:Pe.jsx(nt,Je({},ft,{children:b}))}))}))}),f_e=d_e;function p_e(n){return Eo("MuiMenu",n)}Bo("MuiMenu",["root","paper","list"]);const m_e=["onEntering"],g_e=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],__e={vertical:"top",horizontal:"right"},v_e={vertical:"top",horizontal:"left"},y_e=n=>{const{classes:e}=n;return Fo({root:["root"],paper:["paper"],list:["list"]},p_e,e)},b_e=hr(f_e,{shouldForwardProp:n=>Wm(n)||n==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(n,e)=>e.root})({}),T_e=hr(FK,{name:"MuiMenu",slot:"Paper",overridesResolver:(n,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),S_e=hr(s_e,{name:"MuiMenu",slot:"List",overridesResolver:(n,e)=>e.list})({outline:0}),w_e=pe.forwardRef(function(e,t){var r,s;const o=Jo({props:e,name:"MuiMenu"}),{autoFocus:l=!0,children:u,className:h,disableAutoFocusItem:f=!1,MenuListProps:g={},onClose:y,open:b,PaperProps:S={},PopoverClasses:C,transitionDuration:M="auto",TransitionProps:{onEntering:A}={},variant:O="selectedMenu",slots:L={},slotProps:B={}}=o,D=xr(o.TransitionProps,m_e),z=xr(o,g_e),U=dde(),V=Je({},o,{autoFocus:l,disableAutoFocusItem:f,MenuListProps:g,onEntering:A,PaperProps:S,transitionDuration:M,TransitionProps:D,variant:O}),H=y_e(V),oe=l&&!f&&b,le=pe.useRef(null),Z=(J,re)=>{le.current&&le.current.adjustStyleForScrollbar(J,{direction:U?"rtl":"ltr"}),A&&A(J,re)},q=J=>{J.key==="Tab"&&(J.preventDefault(),y&&y(J,"tabKeyDown"))};let he=-1;pe.Children.map(u,(J,re)=>{pe.isValidElement(J)&&(J.props.disabled||(O==="selectedMenu"&&J.props.selected||he===-1)&&(he=re))});const ae=(r=L.paper)!=null?r:T_e,ue=(s=B.paper)!=null?s:S,ge=Rw({elementType:L.root,externalSlotProps:B.root,ownerState:V,className:[H.root,h]}),we=Rw({elementType:ae,externalSlotProps:ue,ownerState:V,className:H.paper});return Pe.jsx(b_e,Je({onClose:y,anchorOrigin:{vertical:"bottom",horizontal:U?"right":"left"},transformOrigin:U?__e:v_e,slots:{paper:ae,root:L.root},slotProps:{root:ge,paper:we},open:b,ref:t,transitionDuration:M,TransitionProps:Je({onEntering:Z},D),ownerState:V},z,{classes:C,children:Pe.jsx(S_e,Je({onKeyDown:q,actions:le,autoFocus:l&&(he===-1||f),autoFocusItem:oe,variant:O},g,{className:ii(H.list,g.className),children:u}))}))}),E_e=w_e;function x_e(n){return Eo("MuiNativeSelect",n)}const $_e=Bo("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),NF=$_e,C_e=["className","disabled","error","IconComponent","inputRef","variant"],M_e=n=>{const{classes:e,variant:t,disabled:r,multiple:s,open:o,error:l}=n,u={select:["select",t,r&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${cr(t)}`,o&&"iconOpen",r&&"disabled"]};return Fo(u,x_e,e)},zK=({ownerState:n,theme:e})=>Je({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":Je({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${NF.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},n.variant==="filled"&&{"&&&":{paddingRight:32}},n.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),A_e=hr("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Wm,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${NF.multiple}`]:e.multiple}]}})(zK),UK=({ownerState:n,theme:e})=>Je({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${NF.disabled}`]:{color:(e.vars||e).palette.action.disabled}},n.open&&{transform:"rotate(180deg)"},n.variant==="filled"&&{right:7},n.variant==="outlined"&&{right:7}),I_e=hr("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${cr(t.variant)}`],t.open&&e.iconOpen]}})(UK),R_e=pe.forwardRef(function(e,t){const{className:r,disabled:s,error:o,IconComponent:l,inputRef:u,variant:h="standard"}=e,f=xr(e,C_e),g=Je({},e,{disabled:s,variant:h,error:o}),y=M_e(g);return Pe.jsxs(pe.Fragment,{children:[Pe.jsx(A_e,Je({ownerState:g,className:ii(y.select,r),disabled:s,ref:u||t},f)),e.multiple?null:Pe.jsx(I_e,{as:l,ownerState:g,className:y.icon})]})}),k_e=R_e;var YH;const O_e=["children","classes","className","label","notched"],L_e=hr("fieldset",{shouldForwardProp:Wm})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),N_e=hr("legend",{shouldForwardProp:Wm})(({ownerState:n,theme:e})=>Je({float:"unset",width:"auto",overflow:"hidden"},!n.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},n.withLabel&&Je({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},n.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function D_e(n){const{className:e,label:t,notched:r}=n,s=xr(n,O_e),o=t!=null&&t!=="",l=Je({},n,{notched:r,withLabel:o});return Pe.jsx(L_e,Je({"aria-hidden":!0,className:e,ownerState:l},s,{children:Pe.jsx(N_e,{ownerState:l,children:o?Pe.jsx("span",{children:t}):YH||(YH=Pe.jsx("span",{className:"notranslate",children:""}))})}))}const P_e=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],B_e=n=>{const{classes:e}=n,r=Fo({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},pme,e);return Je({},e,r)},F_e=hr(Jk,{shouldForwardProp:n=>Wm(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Xk})(({theme:n,ownerState:e})=>{const t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return Je({position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${ty.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${ty.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${ty.focused} .${ty.notchedOutline}`]:{borderColor:(n.vars||n).palette[e.color].main,borderWidth:2},[`&.${ty.error} .${ty.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${ty.disabled} .${ty.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&Je({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),z_e=hr(D_e,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,e)=>e.notchedOutline})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),U_e=hr(qk,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Kk})(({theme:n,ownerState:e})=>Je({padding:"16.5px 14px"},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),HK=pe.forwardRef(function(e,t){var r,s,o,l,u;const h=Jo({props:e,name:"MuiOutlinedInput"}),{components:f={},fullWidth:g=!1,inputComponent:y="input",label:b,multiline:S=!1,notched:C,slots:M={},type:A="text"}=h,O=xr(h,P_e),L=B_e(h),B=Mv(),D=tb({props:h,muiFormControl:B,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),z=Je({},h,{color:D.color||"primary",disabled:D.disabled,error:D.error,focused:D.focused,formControl:B,fullWidth:g,hiddenLabel:D.hiddenLabel,multiline:S,size:D.size,type:A}),U=(r=(s=M.root)!=null?s:f.Root)!=null?r:F_e,V=(o=(l=M.input)!=null?l:f.Input)!=null?o:U_e;return Pe.jsx(OF,Je({slots:{root:U,input:V},renderSuffix:H=>Pe.jsx(z_e,{ownerState:z,className:L.notchedOutline,label:b!=null&&b!==""&&D.required?u||(u=Pe.jsxs(pe.Fragment,{children:[b,"","*"]})):b,notched:typeof C<"u"?C:!!(H.startAdornment||H.filled||H.focused)}),fullWidth:g,inputComponent:y,multiline:S,ref:t,type:A},O,{classes:Je({},L,{notchedOutline:null})}))});HK.muiName="Input";const GK=HK;function H_e(n){return Eo("MuiSelect",n)}const ox=Bo("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var XH;const G_e=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],W_e=hr("div",{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${ox.select}`]:e.select},{[`&.${ox.select}`]:e[t.variant]},{[`&.${ox.error}`]:e.error},{[`&.${ox.multiple}`]:e.multiple}]}})(zK,{[`&.${ox.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),V_e=hr("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${cr(t.variant)}`],t.open&&e.iconOpen]}})(UK),j_e=hr("input",{shouldForwardProp:n=>SK(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(n,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function KH(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function Y_e(n){return n==null||typeof n=="string"&&!n.trim()}const X_e=n=>{const{classes:e,variant:t,disabled:r,multiple:s,open:o,error:l}=n,u={select:["select",t,r&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${cr(t)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Fo(u,H_e,e)},K_e=pe.forwardRef(function(e,t){var r;const{"aria-describedby":s,"aria-label":o,autoFocus:l,autoWidth:u,children:h,className:f,defaultOpen:g,defaultValue:y,disabled:b,displayEmpty:S,error:C=!1,IconComponent:M,inputRef:A,labelId:O,MenuProps:L={},multiple:B,name:D,onBlur:z,onChange:U,onClose:V,onFocus:H,onOpen:oe,open:le,readOnly:Z,renderValue:q,SelectDisplayProps:he={},tabIndex:ae,value:ue,variant:ge="standard"}=e,we=xr(e,G_e),[J,re]=lR({controlled:ue,default:y,name:"Select"}),[ie,fe]=lR({controlled:le,default:g,name:"Select"}),Te=pe.useRef(null),Fe=pe.useRef(null),[Ie,qe]=pe.useState(null),{current:Re}=pe.useRef(le!=null),[Qe,nt]=pe.useState(),ft=gp(t,A),lt=pe.useCallback(me=>{Fe.current=me,me&&qe(me)},[]),ze=Ie==null?void 0:Ie.parentNode;pe.useImperativeHandle(ft,()=>({focus:()=>{Fe.current.focus()},node:Te.current,value:J}),[J]),pe.useEffect(()=>{g&&ie&&Ie&&!Re&&(nt(u?null:ze.clientWidth),Fe.current.focus())},[Ie,u]),pe.useEffect(()=>{l&&Fe.current.focus()},[l]),pe.useEffect(()=>{if(!O)return;const me=Jp(Fe.current).getElementById(O);if(me){const ke=()=>{getSelection().isCollapsed&&Fe.current.focus()};return me.addEventListener("click",ke),()=>{me.removeEventListener("click",ke)}}},[O]);const Ce=(me,ke)=>{me?oe&&oe(ke):V&&V(ke),Re||(nt(u?null:ze.clientWidth),fe(me))},He=me=>{me.button===0&&(me.preventDefault(),Fe.current.focus(),Ce(!0,me))},rt=me=>{Ce(!1,me)},it=pe.Children.toArray(h),Nt=me=>{const ke=it.find(Xe=>Xe.props.value===me.target.value);ke!==void 0&&(re(ke.props.value),U&&U(me,ke))},kt=me=>ke=>{let Xe;if(ke.currentTarget.hasAttribute("tabindex")){if(B){Xe=Array.isArray(J)?J.slice():[];const Wt=J.indexOf(me.props.value);Wt===-1?Xe.push(me.props.value):Xe.splice(Wt,1)}else Xe=me.props.value;if(me.props.onClick&&me.props.onClick(ke),J!==Xe&&(re(Xe),U)){const Wt=ke.nativeEvent||ke,Ge=new Wt.constructor(Wt.type,Wt);Object.defineProperty(Ge,"target",{writable:!0,value:{value:Xe,name:D}}),U(Ge,me)}B||Ce(!1,ke)}},vt=me=>{Z||[" ","ArrowUp","ArrowDown","Enter"].indexOf(me.key)!==-1&&(me.preventDefault(),Ce(!0,me))},Mt=Ie!==null&&ie,At=me=>{!Mt&&z&&(Object.defineProperty(me,"target",{writable:!0,value:{value:J,name:D}}),z(me))};delete we["aria-invalid"];let mt,xe;const se=[];let $e=!1;(fR({value:J})||S)&&(q?mt=q(J):$e=!0);const ht=it.map(me=>{if(!pe.isValidElement(me))return null;let ke;if(B){if(!Array.isArray(J))throw new Error(J1(2));ke=J.some(Xe=>KH(Xe,me.props.value)),ke&&$e&&se.push(me.props.children)}else ke=KH(J,me.props.value),ke&&$e&&(xe=me.props.children);return pe.cloneElement(me,{"aria-selected":ke?"true":"false",onClick:kt(me),onKeyUp:Xe=>{Xe.key===" "&&Xe.preventDefault(),me.props.onKeyUp&&me.props.onKeyUp(Xe)},role:"option",selected:ke,value:void 0,"data-value":me.props.value})});$e&&(B?se.length===0?mt=null:mt=se.reduce((me,ke,Xe)=>(me.push(ke),Xe<se.length-1&&me.push(", "),me),[]):mt=xe);let St=Qe;!u&&Re&&Ie&&(St=ze.clientWidth);let It;typeof ae<"u"?It=ae:It=b?null:0;const pt=he.id||(D?`mui-component-select-${D}`:void 0),Ke=Je({},e,{variant:ge,value:J,open:Mt,error:C}),Le=X_e(Ke),Q=Je({},L.PaperProps,(r=L.slotProps)==null?void 0:r.paper),te=Hk();return Pe.jsxs(pe.Fragment,{children:[Pe.jsx(W_e,Je({ref:lt,tabIndex:It,role:"combobox","aria-controls":te,"aria-disabled":b?"true":void 0,"aria-expanded":Mt?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[O,pt].filter(Boolean).join(" ")||void 0,"aria-describedby":s,onKeyDown:vt,onMouseDown:b||Z?null:He,onBlur:At,onFocus:H},he,{ownerState:Ke,className:ii(he.className,Le.select,f),id:pt,children:Y_e(mt)?XH||(XH=Pe.jsx("span",{className:"notranslate",children:""})):mt})),Pe.jsx(j_e,Je({"aria-invalid":C,value:Array.isArray(J)?J.join(","):J,name:D,ref:Te,"aria-hidden":!0,onChange:Nt,tabIndex:-1,disabled:b,className:Le.nativeInput,autoFocus:l,ownerState:Ke},we)),Pe.jsx(V_e,{as:M,className:Le.icon,ownerState:Ke}),Pe.jsx(E_e,Je({id:`menu-${D||""}`,anchorEl:ze,open:Mt,onClose:rt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},L,{MenuListProps:Je({"aria-labelledby":O,role:"listbox","aria-multiselectable":B?"true":void 0,disableListWrap:!0,id:te},L.MenuListProps),slotProps:Je({},L.slotProps,{paper:Je({},Q,{style:Je({minWidth:St},Q!=null?Q.style:null)})}),children:ht}))]})}),J_e=K_e,q_e=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Q_e=["root"],Z_e=n=>{const{classes:e}=n;return e},DF={name:"MuiSelect",overridesResolver:(n,e)=>e.root,shouldForwardProp:n=>Wm(n)&&n!=="variant",slot:"Root"},eve=hr(LF,DF)(""),tve=hr(GK,DF)(""),nve=hr(kK,DF)(""),WK=pe.forwardRef(function(e,t){const r=Jo({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:o,classes:l={},className:u,defaultOpen:h=!1,displayEmpty:f=!1,IconComponent:g=vme,id:y,input:b,inputProps:S,label:C,labelId:M,MenuProps:A,multiple:O=!1,native:L=!1,onClose:B,onOpen:D,open:z,renderValue:U,SelectDisplayProps:V,variant:H="outlined"}=r,oe=xr(r,q_e),le=L?k_e:J_e,Z=Mv(),q=tb({props:r,muiFormControl:Z,states:["variant","error"]}),he=q.variant||H,ae=Je({},r,{variant:he,classes:l}),ue=Z_e(ae),ge=xr(ue,Q_e),we=b||{standard:Pe.jsx(eve,{ownerState:ae}),outlined:Pe.jsx(tve,{label:C,ownerState:ae}),filled:Pe.jsx(nve,{ownerState:ae})}[he],J=gp(t,we.ref);return Pe.jsx(pe.Fragment,{children:pe.cloneElement(we,Je({inputComponent:le,inputProps:Je({children:o,error:q.error,IconComponent:g,variant:he,type:void 0,multiple:O},L?{id:y}:{autoWidth:s,defaultOpen:h,displayEmpty:f,labelId:M,MenuProps:A,onClose:B,onOpen:D,open:z,renderValue:U,SelectDisplayProps:Je({id:y},V)},S,{classes:S?fp(ge,S.classes):ge},b?b.props.inputProps:{})},(O&&L||f)&&he==="outlined"?{notched:!0}:{},{ref:J,className:ii(we.props.className,u,ue.root)},!b&&{variant:he},oe))})});WK.muiName="Select";const rve=WK;function ive(n){return Eo("MuiSwitch",n)}const rp=Bo("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),sve=["className","color","edge","size","sx"],ove=Hfe(),ave=n=>{const{classes:e,edge:t,size:r,color:s,checked:o,disabled:l}=n,u={root:["root",t&&`edge${cr(t)}`,`size${cr(r)}`],switchBase:["switchBase",`color${cr(s)}`,o&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},h=Fo(u,ive,e);return Je({},e,h)},lve=hr("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.edge&&e[`edge${cr(t.edge)}`],e[`size${cr(t.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${rp.thumb}`]:{width:16,height:16},[`& .${rp.switchBase}`]:{padding:4,[`&.${rp.checked}`]:{transform:"translateX(16px)"}}}}]}),uve=hr(MK,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.switchBase,{[`& .${rp.input}`]:e.input},t.color!=="default"&&e[`color${cr(t.color)}`]]}})(({theme:n})=>({position:"absolute",top:0,left:0,zIndex:1,color:n.vars?n.vars.palette.Switch.defaultColor:`${n.palette.mode==="light"?n.palette.common.white:n.palette.grey[300]}`,transition:n.transitions.create(["left","transform"],{duration:n.transitions.duration.shortest}),[`&.${rp.checked}`]:{transform:"translateX(20px)"},[`&.${rp.disabled}`]:{color:n.vars?n.vars.palette.Switch.defaultDisabledColor:`${n.palette.mode==="light"?n.palette.grey[100]:n.palette.grey[600]}`},[`&.${rp.checked} + .${rp.track}`]:{opacity:.5},[`&.${rp.disabled} + .${rp.track}`]:{opacity:n.vars?n.vars.opacity.switchTrackDisabled:`${n.palette.mode==="light"?.12:.2}`},[`& .${rp.input}`]:{left:"-100%",width:"300%"}}),({theme:n})=>({"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:n0(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(n.palette).filter(([,e])=>e.main&&e.light).map(([e])=>({props:{color:e},style:{[`&.${rp.checked}`]:{color:(n.vars||n).palette[e].main,"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:n0(n.palette[e].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${rp.disabled}`]:{color:n.vars?n.vars.palette.Switch[`${e}DisabledColor`]:`${n.palette.mode==="light"?pK(n.palette[e].main,.62):fK(n.palette[e].main,.55)}`}},[`&.${rp.checked} + .${rp.track}`]:{backgroundColor:(n.vars||n).palette[e].main}}}))]})),cve=hr("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(n,e)=>e.track})(({theme:n})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:n.transitions.create(["opacity","background-color"],{duration:n.transitions.duration.shortest}),backgroundColor:n.vars?n.vars.palette.common.onBackground:`${n.palette.mode==="light"?n.palette.common.black:n.palette.common.white}`,opacity:n.vars?n.vars.opacity.switchTrack:`${n.palette.mode==="light"?.38:.3}`})),hve=hr("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(n,e)=>e.thumb})(({theme:n})=>({boxShadow:(n.vars||n).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),dve=pe.forwardRef(function(e,t){const r=ove({props:e,name:"MuiSwitch"}),{className:s,color:o="primary",edge:l=!1,size:u="medium",sx:h}=r,f=xr(r,sve),g=Je({},r,{color:o,edge:l,size:u}),y=ave(g),b=Pe.jsx(hve,{className:y.thumb,ownerState:g});return Pe.jsxs(lve,{className:ii(y.root,s),sx:h,ownerState:g,children:[Pe.jsx(uve,Je({type:"checkbox",icon:b,checkedIcon:b,ref:t,ownerState:g},f,{classes:Je({},y,{root:y.switchBase})})),Pe.jsx(cve,{className:y.track,ownerState:g})]})}),fve=dve;function pve(n){return Eo("MuiTextField",n)}Bo("MuiTextField",["root"]);const mve=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],gve={standard:LF,filled:kK,outlined:GK},_ve=n=>{const{classes:e}=n;return Fo({root:["root"]},pve,e)},vve=hr(jge,{name:"MuiTextField",slot:"Root",overridesResolver:(n,e)=>e.root})({}),yve=pe.forwardRef(function(e,t){const r=Jo({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:o=!1,children:l,className:u,color:h="primary",defaultValue:f,disabled:g=!1,error:y=!1,FormHelperTextProps:b,fullWidth:S=!1,helperText:C,id:M,InputLabelProps:A,inputProps:O,InputProps:L,inputRef:B,label:D,maxRows:z,minRows:U,multiline:V=!1,name:H,onBlur:oe,onChange:le,onFocus:Z,placeholder:q,required:he=!1,rows:ae,select:ue=!1,SelectProps:ge,type:we,value:J,variant:re="outlined"}=r,ie=xr(r,mve),fe=Je({},r,{autoFocus:o,color:h,disabled:g,error:y,fullWidth:S,multiline:V,required:he,select:ue,variant:re}),Te=_ve(fe),Fe={};re==="outlined"&&(A&&typeof A.shrink<"u"&&(Fe.notched=A.shrink),Fe.label=D),ue&&((!ge||!ge.native)&&(Fe.id=void 0),Fe["aria-describedby"]=void 0);const Ie=Hk(M),qe=C&&Ie?`${Ie}-helper-text`:void 0,Re=D&&Ie?`${Ie}-label`:void 0,Qe=gve[re],nt=Pe.jsx(Qe,Je({"aria-describedby":qe,autoComplete:s,autoFocus:o,defaultValue:f,fullWidth:S,multiline:V,name:H,rows:ae,maxRows:z,minRows:U,type:we,value:J,id:Ie,inputRef:B,onBlur:oe,onChange:le,onFocus:Z,placeholder:q,inputProps:O},Fe,L));return Pe.jsxs(vve,Je({className:ii(Te.root,u),disabled:g,error:y,fullWidth:S,ref:t,required:he,color:h,variant:re,ownerState:fe},ie,{children:[D!=null&&D!==""&&Pe.jsx(X0e,Je({htmlFor:Ie,id:Re},A,{children:D})),ue?Pe.jsx(rve,Je({"aria-describedby":qe,id:Ie,labelId:Re,value:J,input:nt},ge,{children:l})):nt,C&&Pe.jsx(d0e,Je({id:qe},b,{children:C}))]}))}),PF=yve,VK="/gpu-programming/assets/misty-Q0vWeXcA.svg",bve="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20400%20400'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-54.8776,-69.2073)'%3e%3cg%20transform='matrix(1.02822,0,0,1.03479,-55.9535,52.2937)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,286.809,459.697)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'/%3e%3c/g%3e%3cg%20transform='matrix(0.440957,0.440957,-0.704461,0.704461,267.224,-50.5009)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.249775,0.249775,-0.614768,-0.614768,655.131,143.162)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20451.634,248.57%20429.001,248.57L121.05,248.57C98.417,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2098.417,215.247%20121.05,215.247L429.001,215.247C451.634,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(1.02822,0,0,1.03479,44.3939,-48.6949)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,171.204,575.302)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,453.376,402.183)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.249775,0.249775,-0.614768,-0.614768,274.402,521.42)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20451.634,248.57%20429.001,248.57L121.05,248.57C98.417,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2098.417,215.247%20121.05,215.247L429.001,215.247C451.634,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.440957,-0.440957,0.704461,-0.704461,241.43,564.525)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,395.716,343.809)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Tve="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20401%20400'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-53.2986,-56.7857)'%3e%3cg%20transform='matrix(0.992184,0,0,0.998302,0.416603,0.0964004)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,286.809,459.697)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'/%3e%3c/g%3e%3cg%20transform='matrix(0.440957,0.440957,-0.704461,0.704461,267.224,-50.5009)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.237219,0.237219,-0.614768,-0.614768,613.767,184.608)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20450.661,248.57%20426.831,248.57L123.22,248.57C99.39,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2099.39,215.247%20123.22,215.247L426.831,215.247C450.661,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(0.992184,0,0,0.998302,0.416603,0.0964004)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,171.204,575.302)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,453.376,402.183)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.237219,0.237219,-0.614768,-0.614768,311.603,484.301)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20450.661,248.57%20426.831,248.57L123.22,248.57C99.39,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2099.39,215.247%20123.22,215.247L426.831,215.247C450.661,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.440957,-0.440957,0.704461,-0.704461,241.43,564.525)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,395.716,343.809)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function a0({icon:n,text:e,clickFunction:t,disabled:r,style:s}){return Pe.jsx(Gme,{onClick:t,startIcon:n,disabled:r,classes:{disabled:"disabledDropShadowButton"},style:{margin:"5px",color:"black",backgroundColor:"#FAFAFA",borderRadius:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",...s},children:e})}var BF={},sL={};const Sve=g_(Ufe);var JH;function e2(){return JH||(JH=1,function(n){"use client";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=Sve}(sL)),sL}var wve=uE;Object.defineProperty(BF,"__esModule",{value:!0});var jK=BF.default=void 0,Eve=wve(e2()),xve=Pe;jK=BF.default=(0,Eve.default)((0,xve.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");function $ve(n){const[e,t]=pe.useState(""),r=Hn(rs(M=>M.setIp)),s=Hn(rs(M=>M.setImageList)),o=Hn(rs(M=>M.setAudioList)),l=Hn(rs(M=>M.setIsConnected)),u=Hn(rs(M=>M.isConnected)),h=Hn(rs(M=>M.disconnect)),f=Hn(M=>M.setActiveModal),g=Hn(M=>M.setHeaderDimensions),y=Hn(rs(M=>M.screenToShow)),b=Hn(M=>M.updateScreen);pe.useEffect(()=>{const M=document.getElementById("website-header");new ResizeObserver(O=>{for(let L of O)g(M.offsetHeight,M.offsetWidth)}).observe(M)},[]);const S=()=>{r(e),fetch(`http://${e}/api/battery`,{method:"GET"}).then(M=>{if(!M.ok)throw new Error(`Request failed with status ${M.status}`);return M.json()}).then(M=>(console.log(`Successfully sent a GET request, the response is: ${M}`),l(!0),fetch(`http://${e}/api/audio/list`))).then(M=>{if(!M.ok)throw new Error(`Request failed with status ${M.status}`);return M.json()}).then(M=>(o(M.result),fetch(`http://${e}/api/images/list`))).then(M=>{if(!M.ok)throw new Error(`Request failed with status ${M.status}`);return M.json()}).then(M=>{s(M.result)}).catch(M=>{console.error("Error during fetch operation:",M.message),alert(`Error fetching data: ${M.message}`)}),uh("Hit Confirm IP Address Button")},C={backgroundColor:"#585D92",color:"#FFFFFF",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",zIndex:101,position:"relative",paddingLeft:"20px",paddingTop:"5px",paddingBottom:"5px"};return Pe.jsxs(Lc,{id:"website-header",container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",style:C,children:[Pe.jsx(Lc,{item:!0,xs:12,sm:4,md:4,lg:3,xl:3,children:Pe.jsxs(D$,{direction:"row",alignItems:"center",children:[Pe.jsx("img",{style:{maxHeight:"35px",paddingRight:"5px"},src:VK}),Pe.jsx(Q1,{display:"inline",variant:"h5",children:"Robo-Blocks"})]})}),Pe.jsx(Lc,{item:!0,xs:12,sm:8,md:8,lg:9,xl:9,children:Pe.jsxs(Lc,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[Pe.jsx(Lc,{item:!0,xs:3,sm:3,md:3,lg:3,xl:3,style:{justifyContent:"right",display:"flex"},children:y!==rF&&Pe.jsx(a0,{text:y===fw?TX:SX,clickFunction:()=>b(y===fw?iF:fw)})}),Pe.jsx(Lc,{item:!0,xs:9,sm:9,md:9,lg:9,xl:9,style:{justifyContent:"right",display:"flex"},children:Pe.jsxs(D$,{direction:"row",alignItems:"center",children:[!u&&Pe.jsx("div",{style:{backgroundColor:"#FF7E7E",width:"45px",height:"45px",borderRadius:"25px",marginRight:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},children:Pe.jsx("img",{style:{height:"34px",position:"absolute",top:"5px",left:"5px"},src:Tve})}),u&&Pe.jsx("div",{style:{backgroundColor:"#A0FF7E",width:"45px",height:"45px",borderRadius:"25px",marginRight:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},children:Pe.jsx("img",{style:{height:"34px",position:"absolute",top:"5px",left:"5px"},src:bve})}),Pe.jsx(PF,{id:"robotIpAddress",disabled:u,label:"IP",variant:"filled",style:{backgroundColor:"#FFFFFF50",borderRadius:"5px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",marginRight:"5px"},defaultValue:"",onChange:M=>t(M.target.value)}),!u&&Pe.jsx(a0,{text:"Connect",clickFunction:S}),u&&Pe.jsx(a0,{text:"Disconnect",clickFunction:h}),Pe.jsx(mI,{style:{margin:"5px",marginRight:"10px",color:"black",backgroundColor:"#FAFAFA",borderRadius:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},onClick:()=>{f(bX)},children:Pe.jsx(jK,{})})]})})]})})]})}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cve={kind:"categoryToolbox",contents:[{kind:"category",name:"Functions",categorystyle:"procedure_category",custom:"PROCEDURE"},{kind:"category",name:"Triggers",categorystyle:"trigger_category",contents:[{kind:"block",type:"FrontLeftBumperPress"},{kind:"block",type:"FrontRightBumperPress"},{kind:"block",type:"RearLeftBumperPress"},{kind:"block",type:"RearRightBumperPress"}]},{kind:"category",name:"Control",categorystyle:"logic_category",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{shadow:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_null"},{kind:"block",type:"logic_ternary"}]},{kind:"category",name:"Math",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"BasicSlider"},{kind:"block",type:"math_number_property",inputs:{NUMBER_TO_CHECK:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"math_random_int",inputs:{FROM:{shadow:{type:"math_number",fields:{NUM:1}}},TO:{shadow:{type:"math_number",fields:{NUM:100}}}}}]},{kind:"category",name:"Movement",categorystyle:"movement_category",contents:[{kind:"block",type:"WaitForSeconds"},{kind:"block",type:"DriveTime"},{kind:"block",type:"DriveTime2"},{kind:"block",type:"Turn"},{kind:"block",type:"Turn2"},{kind:"block",type:"MoveHead"},{kind:"block",type:"MoveHead3"},{kind:"block",type:"MoveArm"},{kind:"block",type:"MoveArm2"},{kind:"block",type:"MoveArms2"},{kind:"block",type:"MoveArm3"}]},{kind:"category",name:"Light",categorystyle:"light_category",contents:[{kind:"block",type:"ChangeLED"},{kind:"block",type:"TransitionLED"},{kind:"block",type:"colour_picker"},{kind:"block",type:"colour_random"},{kind:"block",type:"colour_rgb",inputs:{RED:{shadow:{type:"math_number",fields:{NUM:100}}},GREEN:{shadow:{type:"math_number",fields:{NUM:50}}},BLUE:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"colour_blend",inputs:{COLOUR1:{shadow:{type:"colour_picker",fields:{COLOUR:"#ff0000"}}},COLOUR2:{shadow:{type:"colour_picker",fields:{COLOUR:"#3333ff"}}},RATIO:{shadow:{type:"math_number",fields:{NUM:.5}}}}},{kind:"block",type:"TurnOnFlashlight"},{kind:"block",type:"TurnOffFlashlight"}]},{kind:"category",name:"Speech",categorystyle:"speech_category",contents:[{kind:"block",type:"Speak"},{kind:"block",type:"SpeakDefault"},{kind:"block",type:"text"}]},{kind:"category",name:"Face",categorystyle:"face_category",contents:[{kind:"block",type:"DisplayText"},{kind:"block",type:"ClearText"},{kind:"block",type:"DisplayImage"},{kind:"block",type:"eyes_acceptance"},{kind:"block",type:"eyes_admiration"},{kind:"block",type:"eyes_amazement"},{kind:"block",type:"eyes_anger"},{kind:"block",type:"eyes_annoyed"},{kind:"block",type:"eyes_anticipation"},{kind:"block",type:"eyes_apprehension"},{kind:"block",type:"eyes_boredom"},{kind:"block",type:"eyes_default"},{kind:"block",type:"eyes_disgust"},{kind:"block",type:"eyes_distraction"},{kind:"block",type:"eyes_ecstasy_frame_1"},{kind:"block",type:"eyes_ecstasy_frame_2"},{kind:"block",type:"eyes_fear"},{kind:"block",type:"eyes_grief"},{kind:"block",type:"eyes_interest"},{kind:"block",type:"eyes_joy"},{kind:"block",type:"eyes_loathing"},{kind:"block",type:"eyes_pensiveness"},{kind:"block",type:"eyes_rage"},{kind:"block",type:"eyes_sad"},{kind:"block",type:"eyes_serenity"},{kind:"block",type:"eyes_surprise"},{kind:"block",type:"eyes_terror"},{kind:"block",type:"eyes_trust"},{kind:"block",type:"eyes_vigilance"},{kind:"block",type:"e_Sleeping"},{kind:"block",type:"e_SleepingZZZ"},{kind:"block",type:"e_Contempt"},{kind:"block",type:"e_ContentLeft"},{kind:"block",type:"e_ContentRight"},{kind:"block",type:"e_Disoriented"},{kind:"block",type:"e_EcstacyHilarious"},{kind:"block",type:"e_EcstacyStarryEyed"},{kind:"block",type:"e_JoyGoofy"},{kind:"block",type:"e_JoyGoofy2"},{kind:"block",type:"e_JoyGoofy3"},{kind:"block",type:"e_Love"},{kind:"block",type:"e_Rage"},{kind:"block",type:"e_Rage2"},{kind:"block",type:"e_Rage3"},{kind:"block",type:"e_Rage4"},{kind:"block",type:"e_RemorseShame"}]},{kind:"category",name:"Audio",categorystyle:"audio_category",contents:[{kind:"block",type:"SetVolume"},{kind:"block",type:"PlayAudio"},{kind:"block",type:"s_Acceptance"},{kind:"block",type:"s_Amazement"},{kind:"block",type:"s_Amazement2"},{kind:"block",type:"s_Anger"},{kind:"block",type:"s_Anger2"},{kind:"block",type:"s_Anger3"},{kind:"block",type:"s_Anger4"},{kind:"block",type:"s_Annoyance"},{kind:"block",type:"s_Annoyance2"},{kind:"block",type:"s_Annoyance3"},{kind:"block",type:"s_Annoyance4"},{kind:"block",type:"s_Awe"},{kind:"block",type:"s_Awe2"},{kind:"block",type:"s_Awe3"},{kind:"block",type:"s_Boredom"},{kind:"block",type:"s_Disapproval"},{kind:"block",type:"s_Disgust"},{kind:"block",type:"s_Disgust2"},{kind:"block",type:"s_Disgust3"},{kind:"block",type:"s_DisorientedConfused"},{kind:"block",type:"s_DisorientedConfused2"},{kind:"block",type:"s_DisorientedConfused3"},{kind:"block",type:"s_DisorientedConfused4"},{kind:"block",type:"s_DisorientedConfused5"},{kind:"block",type:"s_DisorientedConfused6"},{kind:"block",type:"s_Distraction"},{kind:"block",type:"s_Ecstacy"},{kind:"block",type:"s_Ecstacy2"},{kind:"block",type:"s_Fear"},{kind:"block",type:"s_Grief"},{kind:"block",type:"s_Grief2"},{kind:"block",type:"s_Grief3"},{kind:"block",type:"s_Grief4"},{kind:"block",type:"s_Joy"},{kind:"block",type:"s_Joy2"},{kind:"block",type:"s_Joy3"},{kind:"block",type:"s_Joy4"},{kind:"block",type:"s_Loathing"},{kind:"block",type:"s_Love"},{kind:"block",type:"s_PhraseByeBye"},{kind:"block",type:"s_PhraseEvilAhHa"},{kind:"block",type:"s_PhraseHello"},{kind:"block",type:"s_PhraseNoNoNo"},{kind:"block",type:"s_PhraseOopsy"},{kind:"block",type:"s_PhraseOwOwOw"},{kind:"block",type:"s_PhraseOwwww"},{kind:"block",type:"s_PhraseUhOh"},{kind:"block",type:"s_Rage"},{kind:"block",type:"s_Sadness"},{kind:"block",type:"s_Sadness2"},{kind:"block",type:"s_Sadness3"},{kind:"block",type:"s_Sadness4"},{kind:"block",type:"s_Sadness5"},{kind:"block",type:"s_Sadness6"},{kind:"block",type:"s_Sadness7"},{kind:"block",type:"s_Sleepy"},{kind:"block",type:"s_Sleepy2"},{kind:"block",type:"s_Sleepy3"},{kind:"block",type:"s_Sleepy4"},{kind:"block",type:"s_SleepySnore"},{kind:"block",type:"s_SystemCameraShutter"}]}]},Mve="/gpu-programming/assets/uw-crest-color-web-digital-CjofXveo.svg",Ave="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20194%20209'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-67.3413,-198.983)'%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,37.529,47.7569)'%3e%3cpath%20d='M-4.263,-4.263C-1.908,-4.263%200.001,-2.353%200.001,0.002C0.001,2.356%20-1.908,4.263%20-4.263,4.263C-6.617,4.263%20-8.527,2.356%20-8.527,0.002C-8.527,-2.353%20-6.617,-4.263%20-4.263,-4.263'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,59.9955,60.1716)'%3e%3cpath%20d='M-2.673,-2.671C-1.196,-2.671%20-0.001,-1.477%20-0.001,0.001C-0.001,1.477%20-1.196,2.673%20-2.673,2.673C-4.148,2.673%20-5.342,1.477%20-5.342,0.001C-5.342,-1.477%20-4.148,-2.671%20-2.673,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,18.8329,65.7474)'%3e%3cpath%20d='M-2.671,-2.671C-1.196,-2.671%200.001,-1.476%200.001,0C0.001,1.475%20-1.196,2.671%20-2.671,2.671C-4.146,2.671%20-5.343,1.475%20-5.343,0C-5.343,-1.476%20-4.146,-2.671%20-2.671,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,34.0834,92.4773)'%3e%3cpath%20d='M-2.672,-2.672C-1.197,-2.672%200,-1.477%200,-0.001C0,1.475%20-1.197,2.672%20-2.672,2.672C-4.149,2.672%20-5.344,1.475%20-5.344,-0.001C-5.344,-1.477%20-4.149,-2.672%20-2.672,-2.672'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,47.2036,90.0173)'%3e%3cpath%20d='M-2.673,-2.671C-1.198,-2.671%20-0.001,-1.477%20-0.001,0C-0.001,1.476%20-1.198,2.673%20-2.673,2.673C-4.148,2.673%20-5.342,1.476%20-5.342,0C-5.342,-1.477%20-4.148,-2.671%20-2.673,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(1,0,0,1,31.4239,88.2618)'%3e%3cpath%20d='M0,-31.486L-7.343,-31.486L-7.343,-24.621L-2.62,-27.134C-2.62,-27.134%20-1.885,-30.033%200,-31.486M-2.667,-21.8L-7.343,-19.427L-7.343,0L0.218,0C0.652,-4.687%201.012,-14.334%200.385,-17.054C-1.978,-18.859%20-2.667,-21.8%20-2.667,-21.8M16.67,-22.279C16.05,-19.824%2014.854,-18.168%2013.521,-16.972C16.087,-15.06%2018.567,-11.369%2018.567,-7.484L18.567,0L23.979,0L23.979,-22.367C22.277,-21.923%2019.538,-21.203%2016.67,-22.279M8.317,-13.886C7.15,-14.439%205.715,-14.459%205.715,-14.459L5.715,0L13.318,0L13.318,-6.519C13.318,-11.601%209.419,-13.365%208.317,-13.886M13.92,-31.486C15.038,-30.308%2015.911,-29.021%2016.417,-27.457C18.939,-25.75%2022.22,-26.601%2023.979,-26.855L23.979,-31.486L13.92,-31.486Z'%20style='fill:rgb(205,20,66);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function Ive(n){return Pe.jsxs(Lc,{container:!0,style:{position:"absolute",left:"20px",bottom:"20px",zIndex:"101",width:"70px"},children:[Pe.jsx(Lc,{item:!0,xs:6,sm:6,md:12,lg:12,xl:12,alignContent:"center",children:Pe.jsx("img",{src:Ave})}),Pe.jsx(Lc,{item:!0,xs:6,sm:6,md:12,lg:12,xl:12,children:Pe.jsx("img",{src:Mve})})]})}function qH(){const{innerWidth:n,innerHeight:e}=window;return{width:n,height:e}}function YK(){const[n,e]=pe.useState(qH());return pe.useEffect(()=>{function t(){e(qH())}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n}function Rve({leftChildren:n,rightChildren:e}){return Pe.jsxs(Lc,{container:!0,direction:"row",justifyContent:"center",spacing:2,style:{padding:"20px 30px 0px 30px",height:"100%",width:"100%"},children:[Pe.jsx(Lc,{item:!0,xs:6,style:{overflowY:"scroll",height:"100%"},children:n}),Pe.jsx(Lc,{item:!0,xs:6,style:{overflowY:"scroll",height:"100%"},children:e})]})}function XK({style:n,maxVH:e=0}){const t=Hn(rs(S=>S.userPrompt)),r=Hn(S=>S.setUserPrompt),s=Hn(S=>S.generateProgramOutline),o=Hn(S=>S.generateProgram),l=Hn(rs(S=>S.llmProcessing)),u=Hn(rs(S=>S.displayLLMBlockPrompt)),{height:h,_:f}=YK();function g(S){var C=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return S*C/100}let y=e>0?g(e)/23:(h-190)/23;const b=S=>{r(S.target.value)};return Pe.jsxs("div",{style:{...n},children:[Pe.jsx(PF,{label:"What do you want the robot to do?",multiline:!0,disabled:l,fullWidth:!0,minRows:y,maxRows:y,onChange:b,value:t}),Pe.jsx(a0,{text:"Generate Program Goals",clickFunction:s,disabled:l,style:{float:"right"}}),u&&Pe.jsx(a0,{text:"Generate Block Program",clickFunction:o,disabled:l,style:{float:"right"}})]})}const kve=({title:n,subtext:e,hints:t,isPlanningScreen:r})=>{console.log(t),console.log(n);let s=Hn(b=>b.addMessageToHistory);const[o,l]=pe.useState(null),[u,h]=pe.useState(!1),f=()=>{l(null)},g=()=>{h(!u)},y=b=>{l(o===b?null:b)};return Pe.jsxs("div",{className:"subtask-card",children:[Pe.jsx("div",{className:"subtask-checkbox-container",children:Pe.jsx("input",{type:"checkbox",className:`subtask-checkbox ${u?"checked":""}`,onChange:g})}),Pe.jsxs("div",{className:"subtask-content",children:[Pe.jsx("h3",{className:"subtask-title",children:n}),Pe.jsx("p",{className:"subtask-subtext",children:e}),Pe.jsxs("div",{className:"hints-container",children:[!r&&t&&t.map((b,S)=>Pe.jsxs("button",{className:`hint-button ${o===b?"selected":""}`,onClick:()=>y(b),children:["Hint ",S+1]},S)),r&&t&&t.map((b,S)=>Pe.jsx(a0,{text:b.text,clickFunction:()=>s("[Need Help]")}))]}),o&&Pe.jsxs("div",{className:"hint-expansion",children:[Pe.jsx("p",{children:o.text}),Pe.jsx("div",{className:"close-button-container",children:Pe.jsx("button",{className:"close-button",onClick:f,children:"Close"})})]})]})]},n)},Ove=({hasNextTask:n,onNextTask:e,allTasks:t,subtasks:r,isPlanningScreen:s})=>Pe.jsxs("div",{className:"task-tab-container",children:[r&&r.map(o=>Pe.jsx(kve,{title:o.title,subtext:o.subtext,hints:o.hints.map(l=>t[l]),isPlanningScreen:s},o.title)),n&&Pe.jsxs("div",{className:"completion-card",children:[Pe.jsx("p",{children:"All steps are complete."}),Pe.jsx("button",{className:"next-task-button",onClick:e,children:"Go To Next Task"})]})]}),FF=({isPlanningScreen:n=!1})=>{var g,y;const[e,t]=pe.useState(0),r=Hn(rs(b=>b.getAllTasks)),s=Hn(rs(b=>b.getMainTasks)),o=r(n),l=s(n),u=b=>{t(b)},h=()=>{e<Object.keys(l).length-1&&t(e+1),window.scrollTo({top:0,behavior:"smooth"})};let f=Object.keys(l);return Pe.jsxs("div",{children:[Pe.jsx("div",{className:"tabs-container",children:f.map((b,S)=>Pe.jsx("div",{className:`tab ${S===e?"active":""}`,onClick:()=>u(S),children:l[b].name},b))}),Pe.jsx("div",{className:"task-tab-container",children:Pe.jsx(Ove,{subtasks:(y=(g=l[f[e]])==null?void 0:g.subtasks)==null?void 0:y.map(b=>o[b]),allTasks:o,onNextTask:h,hasNextTask:e+1<f.length,isPlanningScreen:n},f[e])})]})};function QH(n){const e=Hn(rs(s=>s.llmProcessing)),t=Hn(s=>s.fullScreenPanel),r=Hn(s=>s.setFullScreenPanel);return Pe.jsxs("div",{style:{zIndex:20,height:"100%"},children:[Pe.jsx(Qk,{style:{color:"#fff",zIndex:103},open:e,children:Pe.jsx(vge,{color:"inherit"})}),Pe.jsx(Rve,{leftChildren:Pe.jsx(XK,{}),rightChildren:Pe.jsx("div",{style:{width:"100%"},children:Pe.jsx(FF,{})})}),Pe.jsx("button",{onClick:()=>r(!t),style:{position:"absolute",top:"75px",right:"10px",backgroundColor:"rgba(255, 0, 0, 0.8)",color:"#fff",padding:"5px 10px",borderRadius:"5px",border:"none",cursor:"pointer"},children:""})]})}function Lve(n){pe.useState(!1),pe.useState(!1),Hn(rs(o=>o.llmProcessing));const e=Hn(rs(o=>o.setFullScreenPanel)),t=Hn(o=>o.setShowGPTConsole),r=Hn(o=>o.showGPTConsole),s=Hn(o=>o.userPrompt);return Pe.jsxs("div",{style:{position:"absolute",bottom:"0px",left:"114.7px",width:"93%",zIndex:10,backgroundColor:"#222",color:"#fff",height:"25vh"},children:[Pe.jsx("button",{onClick:()=>{e(!0),t(!r)},style:{position:"relative",left:"5vw"},children:"Expand to Full Screen"}),Pe.jsx("div",{style:{position:"absolute",zIndex:20,top:"40px",left:"50px"},children:Pe.jsxs("p",{children:["User prompt: ",s]})}),Pe.jsx("button",{onClick:()=>t(!r),style:{position:"absolute",top:"5px",left:"5px",backgroundColor:"rgba(255, 0, 0, 0.8)",color:"#fff",padding:"5px 10px",borderRadius:"5px",border:"none",cursor:"pointer"},children:""})]})}function Nve(n){const e=Hn(z=>z.addBlock),t=Hn(z=>z.blocks),r=Hn(z=>z.removeBlock),s=Hn(z=>z.getBlock),o=Hn(z=>z.updateBlock),l=Hn(z=>z.getBlockType),u=Hn(z=>z.setBlocklyWorkspace),h=Hn(z=>z.getBlocklyWorkspace),f=Hn(z=>z.loadBlocks),g=Hn(z=>z.blocklyWorkspace),y=Hn(z=>z.highlightBlocks),b=Hn(z=>z.setShowGPTConsole),S=Hn(z=>z.showGPTConsole),C=Hn(z=>z.fullScreenPanel);Hn(z=>z.ip);const{height:M,_:A}=YK(),O=(z,U)=>{z.push(U);let V=s(U);for(;V.next;)V=V.next,z.push(V)},L=(z,U)=>{uh(U?z?`switch toolbox category from ${U} to ${z}`:`unselect toolbox category: ${U}`:`select toolbox category: ${z}`)},B=()=>{b(!S)};Qg.common.defineBlocks(t),Object.assign(Cw.javascriptGenerator.forBlock,ik),pe.useEffect(()=>{var U,V,H;let z=null;if(!document.querySelector(".blocklySvg")){const oe=document.getElementById("pageContainer"),le=document.getElementById("blocklyDiv");if(z=Qg.inject(le,{toolbox:Cve,grid:{spacing:20,length:3,colour:"#ccc",snap:!0},theme:Qg.Theme.defineTheme("gpuTheme",{componentStyles:{toolboxBackgroundColour:"#E4E5F1",flyoutBackgroundColour:"#d2d3db"},categoryStyles:{...Pt},blockStyles:{logic_blocks:{colourPrimary:Pt.logic_category.colour},loop_blocks:{colourPrimary:Pt.loop_category.colour},math_blocks:{colourPrimary:Pt.math_category.colour},procedure_blocks:{colourPrimary:Pt.procedure_category.colour},text_blocks:{colourPrimary:Pt.speech_category.colour},colour_blocks:{colourPrimary:Pt.light_category.colour},hat_blocks:{hat:"cap"}}})}),!g&&z.getAllBlocks().filter(he=>he.type==="Start").length===0){const he=z.newBlock("Start");he.setDeletable(!1),he.moveBy(50,50),he.initSvg(),he.render()}if(g){let q={data:[]},he=Object.keys(t),ae=he.length;for(let ue=0;ue<ae;ue++){let ge={id:t[he[ue]].id,type:t[he[ue]].type};t[he[ue]].next&&t[he[ue]].next!==""&&(ge.nextStatement=t[he[ue]].next);let we=(U=t[he[ue]])!=null&&U.inputs?Object.keys((V=t[he[ue]])==null?void 0:V.inputs):[];for(let J=0;J<we.length;J++)ge[we[J]]=(H=t[he[ue]].inputs[we[J]])!=null&&H.shadow?t[he[ue]].inputs[we[J]].shadow.id:t[he[ue]].inputs[we[J]];ge.type==="math_number"&&(ge.value=t[he[ue]].fields.NUM),ge.type==="colour_picker"&&(ge.value=t[he[ue]].fields.COLOUR),ge.type==="text"&&(ge.value=t[he[ue]].fields.TEXT),["BasicSlider","ArmPositionSlider","SpeedSlider","TimeSlider","HeadPitchSlider","HeadRollSlider","HeadYawSlider"].includes(ge.type)&&(ge.value=t[he[ue]].fields.FIELD_slider_value),q.data.push({...ge})}f(q,z)}u(z),Cw.javascriptGenerator.addReservedWords("code"),new ResizeObserver(q=>{for(let he of q){let ae=oe,ue=0,ge=0;do ue+=ae.offsetLeft,ge+=ae.offsetTop,ae=ae.offsetParent;while(ae);le.style.left=ue+"px",le.style.top=ge+"px",le.style.width=oe.offsetWidth+"px",le.style.height=oe.offsetHeight+"px",Qg.svgResize(z),z.scrollbar.setVisible(!1)}}).observe(oe),z.render(),u(z),z.addChangeListener(q=>{if(q.isUiEvent){if(q.type==="toolbox_item_select")L(q.newItem,q.oldItem);else if(q.type==="click"){if(q.targetType==="block"){const he=l(q.blockId);uh(`click on ${he} block`)}q.targetType==="workspace"&&uh("click on workspace")}else if(q.type==="selected"){if(q.oldElementId){const he=l(q.oldElementId);uh(`unselect and un-highlight ${he} `)}if(q.newElementId){const he=l(q.newElementId);uh(`select and highlight ${he} `)}}else if(q.type==="drag"){const he=l(q.blockId);q.isStart?uh(`drag block ${he} start `):uh(`drag block ${he} end `)}return}if(q.type===Qg.Events.BLOCK_DELETE){let he=q.blockId,ae=[he],ue=s(he).inputs;if(ue)for(let[J,re]of Object.entries(ue))typeof re!="string"?ae.push(re.id):O(ae,re);let ge=s(q.blockId).next;ge&&O(ae,ge);const we=ae.map(J=>l(J));r(ae),uh(`block ${he} is deleted, total delete blocks: ${we}`)}if(q.type===Qg.Events.BLOCK_CHANGE){const he=l(q.blockId);let ae=q.blockId,ue=s(ae);ue.fields[q.name]=q.newValue,o(ae,ue),uh(`field ${q.name} of ${he} change from ${q.oldValue} to ${q.newValue} `)}if(q.type==="create"){let he={id:q.json.id,type:q.json.type,prev:"",next:"",isShadow:!1};if(q.json.type==="Start"&&(q.json.id,he={id:q.json.id,type:q.json.type,next:""}),q.json.fields&&(he.fields=q.json.fields),q.json.inputs){he.inputs=q.json.inputs;for(let[ae,ue]of Object.entries(q.json.inputs))if(ue.shadow){let ge={id:ue.shadow.id,type:ue.shadow.type,fields:ue.shadow.fields,isShadow:!0,initialParent:q.ids[0],initialInput:ae};"shadows"in he||(he.shadows={}),he.shadows[ae]=ue.shadow.id,e(ue.shadow.id,ge),uh(`create a instance of type ${ge.type}`)}}e(q.json.id,he),uh(`create a instance of type ${he.type}`)}if(q.type==="move"){const he=l(q.blockId),ae=q.reason;if(ae&&(typeof ae!="string"&&ae[1]==="drag"||ae[0]==="drag")&&q.newCoordinate&&uh(`drag ${he} from coordinate: {x: ${q.oldCoordinate.x}, y: ${q.oldCoordinate.y}} to {x: ${q.newCoordinate.x},y: ${q.newCoordinate.y}}`),q.reason&&q.reason.includes("connect")){let ue=q.newParentId,ge=s(q.newParentId);const we=ge.type,J=s(q.blockId);q.newInputName?("inputs"in ge||(ge.inputs={}),ge.inputs[q.newInputName]=q.blockId,o(ue,ge),uh(`connect ${J.type}  as input of ${we}`)):(ge.next=q.blockId,o(ue,ge),J.prev=ue,o(q.blockId,J),uh(`Placed ${J.type} after ${we}`))}if(q.reason&&q.reason.includes("disconnect")){let ue=q.oldParentId,ge=s(q.oldParentId);const we=ge.type,J=s(q.blockId);if(!q.oldInputName)ge.next="",o(ue,ge),J.prev="",o(q.blockId,J),uh(`disconnect ${we} from ${ge.type}`);else{if(ge.inputs[q.oldInputName]="",ge.shadows&&ge.shadows[q.oldInputName]){let re=ge.shadows[q.oldInputName];ge.inputs[q.oldInputName]=re}o(ue,ge),uh(`remove ${we} from input of ${ge.type}`)}}}})}},[]),pe.useEffect(()=>{console.log(y);let z=h();z&&y?D(z,y,"#FF0000"):console.log("Workspace or block ID not defined.")},[y]);function D(z,U,V,H=500,oe=5){var le=z.getBlockById(U);if(le){var Z=le.getSvgRoot();if(Z){var q=Z.querySelectorAll(".blocklyPath");if(q.length>0){let he=q[0].style.fill,ae=0,ue=!1;const ge=()=>{q.forEach(function(we){we.style.fill=ue?V:he}),ue=!ue,ae++<oe*2?setTimeout(ge,H):q.forEach(function(we){we.style.fill=he})};ge()}}}}return Pe.jsxs("div",{style:{width:"100%",height:"100%"},children:[M>=460&&!C&&Pe.jsx(Ive,{}),Pe.jsxs("div",{id:"pageContainer",style:{width:"100%",height:"100%"},children:[Pe.jsx("div",{id:"blocklyDiv",style:{width:"100%",height:"100%"}}),!C&&Pe.jsx("div",{style:{position:"absolute",bottom:"10px",left:"35%",transform:"translateX(-50%)",zIndex:10,backgroundColor:"rgba(51, 51, 51, 0.8)",color:"#fff",padding:"10px 20px",borderRadius:"10px",border:"none",cursor:"pointer"},onClick:B,children:"Goals"}),S&&Pe.jsx("div",{children:Pe.jsx(Lve,{})}),Pe.jsx("xml",{id:"toolbox",style:{display:"none"}})]})]})}const Dve="/gpu-programming/assets/misty_loading_combined-BxYfE45A.gif";function oc(n,e,t){return e=pde(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.forEach(function(s){oc(n,s,t[s])})}return n}class Lo{static isBrowser(){return typeof window<"u"}static isOpera(){return Lo.isBrowser()&&(!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0)}static isFirefox(){return Lo.isBrowser()&&typeof InstallTrigger<"u"}static isSafari(){return Lo.isBrowser()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}static isIE(){return Lo.isBrowser()&&!!document.documentMode}static isEdge(){return Lo.isBrowser()&&!Lo.isIE()&&!!window.StyleMedia}static isChrome(){return Lo.isBrowser()&&!!window.chrome&&!!window.chrome.webstore}static isBlink(){return Lo.isBrowser()&&(Lo.isChrome()||Lo.isOpera())&&!!window.CSS}static getUserAgent(){return typeof navigator>"u"?"":navigator.userAgent}static isAndroid(){return Lo.isBrowser()&&Lo.getUserAgent().match(/Android/i)}static isBlackBerry(){return Lo.isBrowser()&&Lo.getUserAgent().match(/BlackBerry/i)}static isIOS(){return Lo.isBrowser()&&Lo.getUserAgent().match(/iPhone|iPad|iPod/i)}static isOpera(){return Lo.isBrowser()&&Lo.getUserAgent().match(/Opera Mini/i)}static isWindows(){return Lo.isBrowser()&&Lo.isWindowsDesktop()||Lo.isWindowsMobile()}static isWindowsMobile(){return Lo.isBrowser()&&Lo.getUserAgent().match(/IEMobile/i)}static isWindowsDesktop(){return Lo.isBrowser()&&Lo.getUserAgent().match(/WPDesktop/i)}static isMobile(){return Lo.isBrowser()&&(Lo.isWindowsMobile()||Lo.isBlackBerry()||Lo.isAndroid()||Lo.isIOS())}}const t2=n=>Object.keys(n).reduce((e,t)=>t.substr(0,5)==="data-"?fv({},e,{[t]:n[t]}):e,{});class kf extends yt.Component{static isA(e){return e?e.type===yt.createElement(kf,null).type:!1}constructor(e){super(e),oc(this,"ref",yt.createRef()),oc(this,"onMouseMove",t=>{if(this.state.active){const r=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:r,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:r}),t.stopPropagation(),t.preventDefault()}}),oc(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),oc(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[Lo.isMobile()?"reflex-thin":"",...this.props.className.split(" "),this.state.active?"active":"","reflex-splitter"].join(" ").trim();return yt.createElement("div",Je({},t2(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}oc(kf,"propTypes",{children:qt.oneOfType([qt.arrayOf(qt.node),qt.node]),onStartResize:qt.func,onStopResize:qt.func,className:qt.string,propagate:qt.bool,onResize:qt.func,style:qt.object});oc(kf,"defaultProps",{document:typeof document<"u"?document:null,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});class Pve{constructor(){this._events={}}on(e,t){return e.split(" ").forEach(r=>{this._events[r]=this._events[r]||[],this._events[r].push(t)}),this}off(e,t){if(e==null){this._events={};return}return e.split(" ").forEach(r=>{r in this._events&&(t?this._events[r].splice(this._events[r].indexOf(t),1):this._events[r]=[])}),this}emit(e){if(this._events[e]!==void 0)for(var t=this._events[e].slice(),r=0;r<t.length;++r){var s=t[r].apply(this,Array.prototype.slice.call(arguments,1));if(s!==void 0)return s}}}Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(n,e){if(this==null)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if(r===0)return!1;var s=e|0,o=Math.max(s>=0?s:r-Math.abs(s),0);function l(u,h){return u===h||typeof u=="number"&&typeof h=="number"&&isNaN(u)&&isNaN(h)}for(;o<r;){if(l(t[o],n))return!0;o++}return!1}});Math.sign||(Math.sign=function(n){return(n>0)-(n<0)||+n});class L1 extends yt.Component{constructor(e){super(e),oc(this,"onWindowResize",()=>{this.setState({flexData:this.computeFlexData()})}),oc(this,"onStartResize",t=>{const r=t.event.changedTouches?t.event.changedTouches[0]:t.event;switch(this.props.orientation){case"horizontal":document.body.classList.add("reflex-row-resize"),this.previousPos=r.clientY;break;case"vertical":default:document.body.classList.add("reflex-col-resize"),this.previousPos=r.clientX;break}this.elements=[this.children[t.index-1],this.children[t.index+1]],this.emitElementsEvent(this.elements,"onStartResize")}),oc(this,"onResize",t=>{const r=t.event.changedTouches?t.event.changedTouches[0]:t.event,s=this.getOffset(r,t.domElement);switch(this.props.orientation){case"horizontal":this.previousPos=r.clientY;break;case"vertical":default:this.previousPos=r.clientX;break}if(s){const o=this.computeAvailableOffset(t.index,s);o&&(this.elements=this.dispatchOffset(t.index,o),this.adjustFlex(this.elements),this.setState({resizing:!0},()=>{this.emitElementsEvent(this.elements,"onResize")}))}}),oc(this,"onStopResize",t=>{document.body.classList.remove("reflex-row-resize"),document.body.classList.remove("reflex-col-resize");const r=this.elements?this.elements.map(o=>o.ref):[],s=this.children.filter(o=>!kf.isA(o)&&r.includes(o.ref));this.emitElementsEvent(s,"onStopResize"),this.setState({resizing:!1})}),oc(this,"onElementSize",t=>new Promise(r=>{try{const s=t.index,o=this.getSize(this.children[s]),l=t.size-o,u=t.direction,h=s+u,f=this.computeAvailableOffset(h,u*l);this.elements=null,f&&(this.elements=this.dispatchOffset(h,f),this.adjustFlex(this.elements)),this.setState(this.state,()=>{this.emitElementsEvent(this.elements,"onResize"),r()})}catch(s){console.log(s)}})),this.events=new Pve,this.children=[],this.state={flexData:[]},this.ref=yt.createRef()}componentDidMount(){const e=this.computeFlexData(),{windowResizeAware:t}=this.props;t&&window.addEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:t,flexData:e}),this.events.on("element.size",this.onElementSize),this.events.on("startResize",this.onStartResize),this.events.on("stopResize",this.onStopResize),this.events.on("resize",this.onResize)}componentWillUnmount(){this.events.off(),window.removeEventListener("resize",this.onWindowResize)}getValidChildren(e=this.props){return this.toArray(e.children).filter(t=>!!t)}componentDidUpdate(e,t){const r=this.getValidChildren(this.props);if(r.length!==this.state.flexData.length||e.orientation!==this.props.orientation||this.flexHasChanged(e)){const s=this.computeFlexData(r,this.props);this.setState({flexData:s})}this.props.windowResizeAware!==this.state.windowResizeAware&&(this.props.windowResizeAware?window.addEventListener("resize",this.onWindowResize):window.removeEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:this.props.windowResizeAware}))}flexHasChanged(e){const t=this.getValidChildren(e).map(s=>s.props.flex||0);return!this.getValidChildren().map(s=>s.props.flex||0).every((s,o)=>s===t[o])}getSize(e){var t,r,s;const o=e==null||(t=e.ref)===null||t===void 0?void 0:t.current;switch(this.props.orientation){case"horizontal":return(r=o==null?void 0:o.offsetHeight)!==null&&r!==void 0?r:0;case"vertical":default:return(s=o==null?void 0:o.offsetWidth)!==null&&s!==void 0?s:0}}getOffset(e,t){const{top:r,bottom:s,left:o,right:l}=t.getBoundingClientRect();switch(this.props.orientation){case"horizontal":{const u=e.clientY-this.previousPos;if(u>0){if(e.clientY>=r)return u}else if(e.clientY<=s)return u;break}case"vertical":default:{const u=e.clientX-this.previousPos;if(u>0){if(e.clientX>o)return u}else if(e.clientX<l)return u}break}return 0}adjustFlex(e){const t=e.reduce((r,s)=>{const o=s.props.index,l=s.props.flex,u=this.state.flexData[o].flex;return r+(l-u)/e.length},0);e.forEach(r=>{this.state.flexData[r.props.index].flex+=t})}computeAvailableOffset(e,t){const r=this.computeAvailableStretch(e,t),s=this.computeAvailableShrink(e,t);return Math.min(r,s)*Math.sign(t)}checkPropagate(e,t){if(t>0){if(e<this.children.length-2){const r=this.children[e+2];return kf.isA(r)&&r.props.propagate}}else if(e>2){const r=this.children[e-2];return kf.isA(r)&&r.props.propagate}return!1}computeAvailableStretch(e,t){var r;const s=t<0?e+1:e-1,o=this.children[s],l=this.getSize(o),h=((r=o==null?void 0:o.props.maxSize)!==null&&r!==void 0?r:0)-l;if(h<Math.abs(t)&&this.checkPropagate(e,-1*t)){const f=Math.sign(t)*(Math.abs(t)-h);return h+this.computeAvailableStretch(t<0?e+2:e-2,f)}return Math.min(h,Math.abs(t))}computeAvailableShrink(e,t){var r;const s=t>0?e+1:e-1,o=this.children[s],l=this.getSize(o),u=Math.max((r=o==null?void 0:o.props.minSize)!==null&&r!==void 0?r:0,0),h=l-u;if(h<Math.abs(t)&&this.checkPropagate(e,t)){const f=Math.sign(t)*(Math.abs(t)-h);return h+this.computeAvailableShrink(t>0?e+2:e-2,f)}return Math.min(h,Math.abs(t))}computePixelFlex(e=this.props.orientation){if(!this.ref.current)return console.warn("Unable to locate ReflexContainer dom node"),0;switch(e){case"horizontal":return this.ref.current.offsetHeight===0?(console.warn("Found ReflexContainer with height=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetHeight;case"vertical":default:return this.ref.current.offsetWidth===0?(console.warn("Found ReflexContainer with width=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetWidth}}addOffset(e,t){const r=this.getSize(e),s=e.props.index,o=Math.max(r+t,0),l=this.state.flexData[s].flex,u=l>0?l*o/r:this.computePixelFlex()*o;this.state.flexData[s].flex=!isFinite(u)||isNaN(u)?0:u}dispatchStretch(e,t){const r=t<0?e+1:e-1;if(r<0||r>this.children.length-1)return[];const s=this.children[r],o=this.getSize(s),u=Math.min(s.props.maxSize,o+Math.abs(t))-o;if(this.addOffset(s,u),u<Math.abs(t)){const h=e-Math.sign(t)*2,f=Math.sign(t)*(Math.abs(t)-u);return[s,...this.dispatchStretch(h,f)]}return[s]}dispatchShrink(e,t){const r=t>0?e+1:e-1;if(r<0||r>this.children.length-1)return[];const s=this.children[r],o=this.getSize(s),u=Math.max(s.props.minSize,o-Math.abs(t))-o;if(this.addOffset(s,u),Math.abs(u)<Math.abs(t)){const h=e+Math.sign(t)*2,f=Math.sign(t)*(Math.abs(t)+u);return[s,...this.dispatchShrink(h,f)]}return[s]}dispatchOffset(e,t){return[...this.dispatchStretch(e,t),...this.dispatchShrink(e,t)]}emitElementsEvent(e,t){this.toArray(e).forEach(r=>{r.props[t]&&r.props[t]({domElement:r.ref.current,component:r})})}computeFlexData(e=this.getValidChildren(),t=this.props){const r=this.computePixelFlex(t.orientation),s=f=>f.reduce((g,y)=>!kf.isA(y)&&y.constrained?g-y.flex:g,1),o=f=>f.reduce((g,y)=>!kf.isA(y)&&!y.constrained?g+1:g,0),l=e.map(f=>{const g=f.props;return{maxFlex:(g.maxSize||Number.MAX_VALUE)*r,sizeFlex:(g.size||Number.MAX_VALUE)*r,minFlex:(g.minSize||1)*r,constrained:g.flex!==void 0,flex:g.flex||0,type:f.type}}),u=(f,g=0)=>{let y=!1;const b=o(f),S=s(f),C=f.map(M=>{if(kf.isA(M))return M;const A=M.constrained?M.flex:S/b,O=Math.min(M.sizeFlex,Math.min(M.maxFlex,Math.max(M.minFlex,A))),L=M.constrained||O!==A;return y=y||L,fv({},M,{flex:O,constrained:L})});return y&&g<this.props.maxRecDepth?u(C,g+1):C};return u(l).map(f=>({flex:kf.isA(f)?0:f.flex,ref:yt.createRef()}))}toArray(e){return e?Array.isArray(e)?e:[e]:[]}render(){const e=[this.state.resizing?"reflex-resizing":"",...this.props.className.split(" "),this.props.orientation,"reflex-container"].join(" ").trim();return this.children=yt.Children.map(this.getValidChildren(),(t,r)=>{if(r>this.state.flexData.length-1)return yt.createElement("div",null);const s=this.state.flexData[r],o=fv({},t.props,{maxSize:t.props.maxSize||Number.MAX_VALUE,orientation:this.props.orientation,minSize:t.props.minSize||1,events:this.events,flex:s.flex,ref:s.ref,index:r});return yt.cloneElement(t,o)}),yt.createElement("div",Je({},t2(this.props),{style:this.props.style,className:e,ref:this.ref}),this.children)}}oc(L1,"propTypes",{windowResizeAware:qt.bool,orientation:qt.oneOf(["horizontal","vertical"]),maxRecDepth:qt.number,className:qt.string,style:qt.object});oc(L1,"defaultProps",{orientation:"horizontal",windowResizeAware:!1,maxRecDepth:100,className:"",style:{}});class dE extends yt.Component{static isA(e){return e?e.type===dE:!1}constructor(e){super(e),oc(this,"ref",yt.createRef()),oc(this,"onMouseMove",t=>{if(this.state.active){const r=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:r,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:r}),t.stopPropagation(),t.preventDefault()}}),oc(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),oc(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[...this.props.className.split(" "),this.state.active?"active":"","reflex-handle"].join(" ").trim();return yt.createElement("div",Je({},t2(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}oc(dE,"propTypes",{children:qt.oneOfType([qt.arrayOf(qt.node),qt.node]),onStartResize:qt.func,onStopResize:qt.func,className:qt.string,propagate:qt.bool,onResize:qt.func,style:qt.object});oc(dE,"defaultProps",{document:typeof document>"u"?null:document,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});var KK="Expected a function",ZH=NaN,Bve="[object Symbol]",Fve=/^\s+|\s+$/g,zve=/^[-+]0x[0-9a-f]+$/i,Uve=/^0b[01]+$/i,Hve=/^0o[0-7]+$/i,Gve=parseInt,Wve=typeof Vl=="object"&&Vl&&Vl.Object===Object&&Vl,Vve=typeof self=="object"&&self&&self.Object===Object&&self,jve=Wve||Vve||Function("return this")(),Yve=Object.prototype,Xve=Yve.toString,Kve=Math.max,Jve=Math.min,oL=function(){return jve.Date.now()};function qve(n,e,t){var r,s,o,l,u,h,f=0,g=!1,y=!1,b=!0;if(typeof n!="function")throw new TypeError(KK);e=eG(e)||0,pR(t)&&(g=!!t.leading,y="maxWait"in t,o=y?Kve(eG(t.maxWait)||0,e):o,b="trailing"in t?!!t.trailing:b);function S(U){var V=r,H=s;return r=s=void 0,f=U,l=n.apply(H,V),l}function C(U){return f=U,u=setTimeout(O,e),g?S(U):l}function M(U){var V=U-h,H=U-f,oe=e-V;return y?Jve(oe,o-H):oe}function A(U){var V=U-h,H=U-f;return h===void 0||V>=e||V<0||y&&H>=o}function O(){var U=oL();if(A(U))return L(U);u=setTimeout(O,M(U))}function L(U){return u=void 0,b&&r?S(U):(r=s=void 0,l)}function B(){u!==void 0&&clearTimeout(u),f=0,r=h=s=u=void 0}function D(){return u===void 0?l:L(oL())}function z(){var U=oL(),V=A(U);if(r=arguments,s=this,h=U,V){if(u===void 0)return C(h);if(y)return u=setTimeout(O,e),S(h)}return u===void 0&&(u=setTimeout(O,e)),l}return z.cancel=B,z.flush=D,z}function Qve(n,e,t){var r=!0,s=!0;if(typeof n!="function")throw new TypeError(KK);return pR(t)&&(r="leading"in t?!!t.leading:r,s="trailing"in t?!!t.trailing:s),qve(n,e,{leading:r,maxWait:e,trailing:s})}function pR(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function Zve(n){return!!n&&typeof n=="object"}function eye(n){return typeof n=="symbol"||Zve(n)&&Xve.call(n)==Bve}function eG(n){if(typeof n=="number")return n;if(eye(n))return ZH;if(pR(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=pR(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(Fve,"");var t=Uve.test(n);return t||Hve.test(n)?Gve(n.slice(2),t?2:8):zve.test(n)?ZH:+n}var tye=Qve;const nye=Xy(tye);var JK=function(){if(typeof Map<"u")return Map;function n(e,t){var r=-1;return e.some(function(s,o){return s[0]===t?(r=o,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var r=n(this.__entries__,t),s=this.__entries__[r];return s&&s[1]},e.prototype.set=function(t,r){var s=n(this.__entries__,t);~s?this.__entries__[s][1]=r:this.__entries__.push([t,r])},e.prototype.delete=function(t){var r=this.__entries__,s=n(r,t);~s&&r.splice(s,1)},e.prototype.has=function(t){return!!~n(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,r){r===void 0&&(r=null);for(var s=0,o=this.__entries__;s<o.length;s++){var l=o[s];t.call(r,l[1],l[0])}},e}()}(),XD=typeof window<"u"&&typeof document<"u"&&window.document===document,mR=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),rye=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(mR):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),iye=2;function sye(n,e){var t=!1,r=!1,s=0;function o(){t&&(t=!1,n()),r&&u()}function l(){rye(o)}function u(){var h=Date.now();if(t){if(h-s<iye)return;r=!0}else t=!0,r=!1,setTimeout(l,e);s=h}return u}var oye=20,aye=["top","right","bottom","left","width","height","size","weight"],lye=typeof MutationObserver<"u",uye=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=sye(this.refresh.bind(this),oye)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!XD||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),lye?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!XD||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=t===void 0?"":t,s=aye.some(function(o){return!!~r.indexOf(o)});s&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),qK=function(n,e){for(var t=0,r=Object.keys(e);t<r.length;t++){var s=r[t];Object.defineProperty(n,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return n},Ow=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||mR},QK=n2(0,0,0,0);function gR(n){return parseFloat(n)||0}function tG(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(r,s){var o=n["border-"+s+"-width"];return r+gR(o)},0)}function cye(n){for(var e=["top","right","bottom","left"],t={},r=0,s=e;r<s.length;r++){var o=s[r],l=n["padding-"+o];t[o]=gR(l)}return t}function hye(n){var e=n.getBBox();return n2(0,0,e.width,e.height)}function dye(n){var e=n.clientWidth,t=n.clientHeight;if(!e&&!t)return QK;var r=Ow(n).getComputedStyle(n),s=cye(r),o=s.left+s.right,l=s.top+s.bottom,u=gR(r.width),h=gR(r.height);if(r.boxSizing==="border-box"&&(Math.round(u+o)!==e&&(u-=tG(r,"left","right")+o),Math.round(h+l)!==t&&(h-=tG(r,"top","bottom")+l)),!pye(n)){var f=Math.round(u+o)-e,g=Math.round(h+l)-t;Math.abs(f)!==1&&(u-=f),Math.abs(g)!==1&&(h-=g)}return n2(s.left,s.top,u,h)}var fye=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof Ow(n).SVGGraphicsElement}:function(n){return n instanceof Ow(n).SVGElement&&typeof n.getBBox=="function"}}();function pye(n){return n===Ow(n).document.documentElement}function mye(n){return XD?fye(n)?hye(n):dye(n):QK}function gye(n){var e=n.x,t=n.y,r=n.width,s=n.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return qK(l,{x:e,y:t,width:r,height:s,top:t,right:e+r,bottom:s+t,left:e}),l}function n2(n,e,t,r){return{x:n,y:e,width:t,height:r}}var _ye=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=n2(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=mye(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),vye=function(){function n(e,t){var r=gye(t);qK(this,{target:e,contentRect:r})}return n}(),yye=function(){function n(e,t,r){if(this.activeObservations_=[],this.observations_=new JK,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Ow(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new _ye(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Ow(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(r){return new vye(r.target,r.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),ZK=typeof WeakMap<"u"?new WeakMap:new JK,eJ=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=uye.getInstance(),r=new yye(e,t,this);ZK.set(this,r)}return n}();["observe","unobserve","disconnect"].forEach(function(n){eJ.prototype[n]=function(){var e;return(e=ZK.get(this))[n].apply(e,arguments)}});var bye=function(){return typeof mR.ResizeObserver<"u"?mR.ResizeObserver:eJ}(),Tye=["client","offset","scroll","bounds","margin"];function nG(n){var e=[];return Tye.forEach(function(t){n[t]&&e.push(t)}),e}function rG(n,e){var t={};if(e.indexOf("client")>-1&&(t.client={top:n.clientTop,left:n.clientLeft,width:n.clientWidth,height:n.clientHeight}),e.indexOf("offset")>-1&&(t.offset={top:n.offsetTop,left:n.offsetLeft,width:n.offsetWidth,height:n.offsetHeight}),e.indexOf("scroll")>-1&&(t.scroll={top:n.scrollTop,left:n.scrollLeft,width:n.scrollWidth,height:n.scrollHeight}),e.indexOf("bounds")>-1){var r=n.getBoundingClientRect();t.bounds={top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.width,height:r.height}}if(e.indexOf("margin")>-1){var s=getComputedStyle(n);t.margin={top:s?parseInt(s.marginTop):0,right:s?parseInt(s.marginRight):0,bottom:s?parseInt(s.marginBottom):0,left:s?parseInt(s.marginLeft):0}}return t}function Sye(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||window}function wye(n){return function(e){var t,r;return r=t=function(s){CF(o,s);function o(){for(var u,h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return u=s.call.apply(s,[this].concat(f))||this,u.state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},u._animationFrameID=null,u._resizeObserver=null,u._node=null,u._window=null,u.measure=function(y){var b=rG(u._node,n||nG(u.props));y&&(b.entry=y[0].contentRect),u._animationFrameID=u._window.requestAnimationFrame(function(){u._resizeObserver!==null&&(u.setState({contentRect:b}),typeof u.props.onResize=="function"&&u.props.onResize(b))})},u._handleRef=function(y){u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.unobserve(u._node),u._node=y,u._window=Sye(u._node);var b=u.props.innerRef;b&&(typeof b=="function"?b(u._node):b.current=u._node),u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.observe(u._node)},u}var l=o.prototype;return l.componentDidMount=function(){this._resizeObserver=this._window!==null&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new bye(this.measure),this._node!==null&&(this._resizeObserver.observe(this._node),typeof this.props.onResize=="function"&&this.props.onResize(rG(this._node,n||nG(this.props))))},l.componentWillUnmount=function(){this._window!==null&&this._window.cancelAnimationFrame(this._animationFrameID),this._resizeObserver!==null&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},l.render=function(){var h=this.props;h.innerRef,h.onResize;var f=xr(h,["innerRef","onResize"]);return pe.createElement(e,Je({},f,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},o}(pe.Component),t.propTypes={client:qt.bool,offset:qt.bool,scroll:qt.bool,bounds:qt.bool,margin:qt.bool,innerRef:qt.oneOfType([qt.object,qt.func]),onResize:qt.func},r}}var zF=wye()(function(n){var e=n.measure,t=n.measureRef,r=n.contentRect,s=n.children;return s({measure:e,measureRef:t,contentRect:r})});zF.displayName="Measure";zF.propTypes.children=qt.func;const KD=n=>n?Array.isArray(n)?n:[n]:[];class Eye extends yt.Component{constructor(e){super(e),oc(this,"onResize",t=>{const{resizeHeight:r,resizeWidth:s}=this.props,{height:o,width:l}=t.bounds;this.setDimensions(fv({},r&&{height:o},s&&{width:l}))}),this.setDimensions=nye(t=>{this.setState(t)},this.props.propagateDimensionsRate/1e3),this.state={height:"100%",width:"100%"}}renderChildren(){const{propagateDimensions:e}=this.props,t=KD(this.props.children).filter(r=>!!r);return yt.Children.map(t,r=>this.props.withHandle||dE.isA(r)?yt.cloneElement(r,fv({dimensions:e&&this.state},r.props,{index:this.props.index-1,events:this.props.events})):e?yt.cloneElement(r,fv({},r.props,{dimensions:this.state})):r)}render(){return yt.createElement(zF,{bounds:!0,onResize:this.onResize},({measureRef:e})=>yt.createElement("div",{ref:e,className:"reflex-size-aware"},yt.createElement("div",{style:this.state},this.renderChildren())))}}class UF extends yt.Component{constructor(e){super(e),this.state={size:e.size}}static getDerivedStateFromProps(e,t){return e.size!==t.size?fv({},t,{size:e.size}):null}async componentDidUpdate(e,t,r){if(t.size!==this.state.size){const s=KD(this.props.direction);for(let o of s)await this.props.events.emit("element.size",{index:this.props.index,size:this.props.size,direction:o})}}renderChildren(){const e=KD(this.props.children).filter(t=>!!t);return yt.Children.map(e,t=>this.props.withHandle||dE.isA(t)?yt.cloneElement(t,fv({},t.props,{index:this.props.index-1,events:this.props.events})):t)}render(){const e=[...this.props.className.split(" "),this.props.orientation,"reflex-element"].join(" ").trim(),t=fv({},this.props.style,{flexGrow:this.props.flex,flexShrink:1,flexBasis:"0%"});return yt.createElement("div",Je({},t2(this.props),{ref:this.props.innerRef,className:e,style:t}),this.props.propagateDimensions?yt.createElement(Eye,this.props):this.renderChildren())}}oc(UF,"propTypes",{propagateDimensions:qt.bool,resizeHeight:qt.bool,resizeWidth:qt.bool,className:qt.string,size:qt.number});oc(UF,"defaultProps",{propagateDimensionsRate:100,propagateDimensions:!1,resizeHeight:!0,resizeWidth:!0,direction:[1],className:""});const Z0=yt.forwardRef((n,e)=>yt.createElement(UF,Je({innerRef:e},n))),tJ="/gpu-programming/assets/BASE_FRONT_GRILL_1-b5goAhwv.glb";var nJ={exports:{}},lT={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */lT.ConcurrentRoot=1;lT.ContinuousEventPriority=4;lT.DefaultEventPriority=16;lT.DiscreteEventPriority=1;lT.IdleEventPriority=536870912;lT.LegacyRoot=0;nJ.exports=lT;var Ox=nJ.exports,rJ={exports:{}},aL={exports:{}},lL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iG;function xye(){return iG||(iG=1,function(n){function e(J,re){var ie=J.length;J.push(re);e:for(;0<ie;){var fe=ie-1>>>1,Te=J[fe];if(0<s(Te,re))J[fe]=re,J[ie]=Te,ie=fe;else break e}}function t(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var re=J[0],ie=J.pop();if(ie!==re){J[0]=ie;e:for(var fe=0,Te=J.length,Fe=Te>>>1;fe<Fe;){var Ie=2*(fe+1)-1,qe=J[Ie],Re=Ie+1,Qe=J[Re];if(0>s(qe,ie))Re<Te&&0>s(Qe,qe)?(J[fe]=Qe,J[Re]=ie,fe=Re):(J[fe]=qe,J[Ie]=ie,fe=Ie);else if(Re<Te&&0>s(Qe,ie))J[fe]=Qe,J[Re]=ie,fe=Re;else break e}}return re}function s(J,re){var ie=J.sortIndex-re.sortIndex;return ie!==0?ie:J.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],g=1,y=null,b=3,S=!1,C=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(J){for(var re=t(f);re!==null;){if(re.callback===null)r(f);else if(re.startTime<=J)r(f),re.sortIndex=re.expirationTime,e(h,re);else break;re=t(f)}}function D(J){if(M=!1,B(J),!C)if(t(h)!==null)C=!0,ge(z);else{var re=t(f);re!==null&&we(D,re.startTime-J)}}function z(J,re){C=!1,M&&(M=!1,O(H),H=-1),S=!0;var ie=b;try{for(B(re),y=t(h);y!==null&&(!(y.expirationTime>re)||J&&!Z());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,b=y.priorityLevel;var Te=fe(y.expirationTime<=re);re=n.unstable_now(),typeof Te=="function"?y.callback=Te:y===t(h)&&r(h),B(re)}else r(h);y=t(h)}if(y!==null)var Fe=!0;else{var Ie=t(f);Ie!==null&&we(D,Ie.startTime-re),Fe=!1}return Fe}finally{y=null,b=ie,S=!1}}var U=!1,V=null,H=-1,oe=5,le=-1;function Z(){return!(n.unstable_now()-le<oe)}function q(){if(V!==null){var J=n.unstable_now();le=J;var re=!0;try{re=V(!0,J)}finally{re?he():(U=!1,V=null)}}else U=!1}var he;if(typeof L=="function")he=function(){L(q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ue=ae.port2;ae.port1.onmessage=q,he=function(){ue.postMessage(null)}}else he=function(){A(q,0)};function ge(J){V=J,U||(U=!0,he())}function we(J,re){H=A(function(){J(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){C||S||(C=!0,ge(z))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var re=3;break;default:re=b}var ie=b;b=re;try{return J()}finally{b=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,re){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ie=b;b=J;try{return re()}finally{b=ie}},n.unstable_scheduleCallback=function(J,re,ie){var fe=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?fe+ie:fe):ie=fe,J){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ie+Te,J={id:g++,callback:re,priorityLevel:J,startTime:ie,expirationTime:Te,sortIndex:-1},ie>fe?(J.sortIndex=ie,e(f,J),t(h)===null&&J===t(f)&&(M?(O(H),H=-1):M=!0,we(D,ie-fe))):(J.sortIndex=Te,e(h,J),C||S||(C=!0,ge(z))),J},n.unstable_shouldYield=Z,n.unstable_wrapCallback=function(J){var re=b;return function(){var ie=b;b=re;try{return J.apply(this,arguments)}finally{b=ie}}}}(lL)),lL}var sG;function $ye(){return sG||(sG=1,aL.exports=xye()),aL.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cye=function(e){var t={},r=pe,s=$ye(),o=Object.assign;function l(d){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+d,$=1;$<arguments.length;$++)_+="&args[]="+encodeURIComponent(arguments[$]);return"Minified React error #"+d+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h=Symbol.for("react.element"),f=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),z=Symbol.iterator;function U(d){return d===null||typeof d!="object"?null:(d=z&&d[z]||d["@@iterator"],typeof d=="function"?d:null)}function V(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case g:return"Fragment";case f:return"Portal";case b:return"Profiler";case y:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case C:return(d.displayName||"Context")+".Consumer";case S:return(d._context.displayName||"Context")+".Provider";case M:var _=d.render;return d=d.displayName,d||(d=_.displayName||_.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case L:return _=d.displayName||null,_!==null?_:V(d.type)||"Memo";case B:_=d._payload,d=d._init;try{return V(d(_))}catch{}}return null}function H(d){var _=d.type;switch(d.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=_.render,d=d.displayName||d.name||"",_.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(_);case 8:return _===y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function oe(d){var _=d,$=d;if(d.alternate)for(;_.return;)_=_.return;else{d=_;do _=d,_.flags&4098&&($=_.return),d=_.return;while(d)}return _.tag===3?$:null}function le(d){if(oe(d)!==d)throw Error(l(188))}function Z(d){var _=d.alternate;if(!_){if(_=oe(d),_===null)throw Error(l(188));return _!==d?null:d}for(var $=d,I=_;;){var P=$.return;if(P===null)break;var W=P.alternate;if(W===null){if(I=P.return,I!==null){$=I;continue}break}if(P.child===W.child){for(W=P.child;W;){if(W===$)return le(P),d;if(W===I)return le(P),_;W=W.sibling}throw Error(l(188))}if($.return!==I.return)$=P,I=W;else{for(var de=!1,Oe=P.child;Oe;){if(Oe===$){de=!0,$=P,I=W;break}if(Oe===I){de=!0,I=P,$=W;break}Oe=Oe.sibling}if(!de){for(Oe=W.child;Oe;){if(Oe===$){de=!0,$=W,I=P;break}if(Oe===I){de=!0,I=W,$=P;break}Oe=Oe.sibling}if(!de)throw Error(l(189))}}if($.alternate!==I)throw Error(l(190))}if($.tag!==3)throw Error(l(188));return $.stateNode.current===$?d:_}function q(d){return d=Z(d),d!==null?he(d):null}function he(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var _=he(d);if(_!==null)return _;d=d.sibling}return null}function ae(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var _=ae(d);if(_!==null)return _}d=d.sibling}return null}var ue=Array.isArray,ge=e.getPublicInstance,we=e.getRootHostContext,J=e.getChildHostContext,re=e.prepareForCommit,ie=e.resetAfterCommit,fe=e.createInstance,Te=e.appendInitialChild,Fe=e.finalizeInitialChildren,Ie=e.prepareUpdate,qe=e.shouldSetTextContent,Re=e.createTextInstance,Qe=e.scheduleTimeout,nt=e.cancelTimeout,ft=e.noTimeout,lt=e.isPrimaryRenderer,ze=e.supportsMutation,Ce=e.supportsPersistence,He=e.supportsHydration,rt=e.getInstanceFromNode,it=e.preparePortalMount,Nt=e.getCurrentEventPriority,kt=e.detachDeletedInstance,vt=e.supportsMicrotasks,Mt=e.scheduleMicrotask,At=e.supportsTestSelectors,mt=e.findFiberRoot,xe=e.getBoundingRect,se=e.getTextContent,$e=e.isHiddenSubtree,ht=e.matchAccessibilityRole,St=e.setFocusIfFocusable,It=e.setupIntersectionObserver,pt=e.appendChild,Ke=e.appendChildToContainer,Le=e.commitTextUpdate,Q=e.commitMount,te=e.commitUpdate,me=e.insertBefore,ke=e.insertInContainerBefore,Xe=e.removeChild,Wt=e.removeChildFromContainer,Ge=e.resetTextContent,tn=e.hideInstance,_t=e.hideTextInstance,Jt=e.unhideInstance,Kt=e.unhideTextInstance,On=e.clearContainer,si=e.cloneInstance,Pr=e.createContainerChildSet,Ei=e.appendChildToContainerChildSet,$r=e.finalizeContainerChildren,gr=e.replaceContainerChildren,ne=e.cloneHiddenInstance,Se=e.cloneHiddenTextInstance,We=e.canHydrateInstance,ot=e.canHydrateTextInstance,zt=e.canHydrateSuspenseInstance,sn=e.isSuspenseInstancePending,Nn=e.isSuspenseInstanceFallback,De=e.registerSuspenseInstanceRetry,gt=e.getNextHydratableSibling,Ct=e.getFirstHydratableChild,bt=e.getFirstHydratableChildWithinContainer,Vt=e.getFirstHydratableChildWithinSuspenseInstance,Wn=e.hydrateInstance,rr=e.hydrateTextInstance,_r=e.hydrateSuspenseInstance,Cr=e.getNextHydratableInstanceAfterSuspenseInstance,oi=e.commitHydratedContainer,Br=e.commitHydratedSuspenseInstance,Yr=e.clearSuspenseBoundary,Ss=e.clearSuspenseBoundaryFromContainer,Oa=e.shouldDeleteUnhydratedTailInstances,xo=e.didNotMatchHydratedContainerTextInstance,Yl=e.didNotMatchHydratedTextInstance,nn;function Rr(d){if(nn===void 0)try{throw Error()}catch($){var _=$.stack.trim().match(/\n( *(at )?)/);nn=_&&_[1]||""}return`
`+nn+d}var el=!1;function La(d,_){if(!d||el)return"";el=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(wt){var I=wt}Reflect.construct(d,[],_)}else{try{_.call()}catch(wt){I=wt}d.call(_.prototype)}else{try{throw Error()}catch(wt){I=wt}d()}}catch(wt){if(wt&&I&&typeof wt.stack=="string"){for(var P=wt.stack.split(`
`),W=I.stack.split(`
`),de=P.length-1,Oe=W.length-1;1<=de&&0<=Oe&&P[de]!==W[Oe];)Oe--;for(;1<=de&&0<=Oe;de--,Oe--)if(P[de]!==W[Oe]){if(de!==1||Oe!==1)do if(de--,Oe--,0>Oe||P[de]!==W[Oe]){var Ze=`
`+P[de].replace(" at new "," at ");return d.displayName&&Ze.includes("<anonymous>")&&(Ze=Ze.replace("<anonymous>",d.displayName)),Ze}while(1<=de&&0<=Oe);break}}}finally{el=!1,Error.prepareStackTrace=$}return(d=d?d.displayName||d.name:"")?Rr(d):""}var Fs=Object.prototype.hasOwnProperty,zs=[],Di=-1;function kr(d){return{current:d}}function An(d){0>Di||(d.current=zs[Di],zs[Di]=null,Di--)}function Ir(d,_){Di++,zs[Di]=d.current,d.current=_}var Gr={},yr=kr(Gr),Pi=kr(!1),ws=Gr;function fi(d,_){var $=d.type.contextTypes;if(!$)return Gr;var I=d.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===_)return I.__reactInternalMemoizedMaskedChildContext;var P={},W;for(W in $)P[W]=_[W];return I&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=_,d.__reactInternalMemoizedMaskedChildContext=P),P}function gs(d){return d=d.childContextTypes,d!=null}function tl(){An(Pi),An(yr)}function Na(d,_,$){if(yr.current!==Gr)throw Error(l(168));Ir(yr,_),Ir(Pi,$)}function dc(d,_,$){var I=d.stateNode;if(_=_.childContextTypes,typeof I.getChildContext!="function")return $;I=I.getChildContext();for(var P in I)if(!(P in _))throw Error(l(108,H(d)||"Unknown",P));return o({},$,I)}function fc(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Gr,ws=yr.current,Ir(yr,d),Ir(Pi,Pi.current),!0}function Xs(d,_,$){var I=d.stateNode;if(!I)throw Error(l(169));$?(d=dc(d,_,ws),I.__reactInternalMemoizedMergedChildContext=d,An(Pi),An(yr),Ir(yr,d)):An(Pi),Ir(Pi,$)}var qo=Math.clz32?Math.clz32:mh,Xl=Math.log,gu=Math.LN2;function mh(d){return d>>>=0,d===0?32:31-(Xl(d)/gu|0)|0}var Qo=64,vr=4194304;function xi(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Dc(d,_){var $=d.pendingLanes;if($===0)return 0;var I=0,P=d.suspendedLanes,W=d.pingedLanes,de=$&268435455;if(de!==0){var Oe=de&~P;Oe!==0?I=xi(Oe):(W&=de,W!==0&&(I=xi(W)))}else de=$&~P,de!==0?I=xi(de):W!==0&&(I=xi(W));if(I===0)return 0;if(_!==0&&_!==I&&!(_&P)&&(P=I&-I,W=_&-_,P>=W||P===16&&(W&4194240)!==0))return _;if(I&4&&(I|=$&16),_=d.entangledLanes,_!==0)for(d=d.entanglements,_&=I;0<_;)$=31-qo(_),P=1<<$,I|=d[$],_&=~P;return I}function gh(d,_){switch(d){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pc(d,_){for(var $=d.suspendedLanes,I=d.pingedLanes,P=d.expirationTimes,W=d.pendingLanes;0<W;){var de=31-qo(W),Oe=1<<de,Ze=P[de];Ze===-1?(!(Oe&$)||Oe&I)&&(P[de]=gh(Oe,_)):Ze<=_&&(d.expiredLanes|=Oe),W&=~Oe}}function El(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function _u(d){for(var _=[],$=0;31>$;$++)_.push(d);return _}function xl(d,_,$){d.pendingLanes|=_,_!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,_=31-qo(_),d[_]=$}function $l(d,_){var $=d.pendingLanes&~_;d.pendingLanes=_,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=_,d.mutableReadLanes&=_,d.entangledLanes&=_,_=d.entanglements;var I=d.eventTimes;for(d=d.expirationTimes;0<$;){var P=31-qo($),W=1<<P;_[P]=0,I[P]=-1,d[P]=-1,$&=~W}}function br(d,_){var $=d.entangledLanes|=_;for(d=d.entanglements;$;){var I=31-qo($),P=1<<I;P&_|d[I]&_&&(d[I]|=_),$&=~P}}var Tr=0;function Kl(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var nl=s.unstable_scheduleCallback,rl=s.unstable_cancelCallback,vu=s.unstable_shouldYield,qi=s.unstable_requestPaint,_s=s.unstable_now,il=s.unstable_ImmediatePriority,Cd=s.unstable_UserBlockingPriority,io=s.unstable_NormalPriority,zu=s.unstable_IdlePriority,ca=null,yu=null;function or(d){if(yu&&typeof yu.onCommitFiberRoot=="function")try{yu.onCommitFiberRoot(ca,d,void 0,(d.current.flags&128)===128)}catch{}}function Gn(d,_){return d===_&&(d!==0||1/d===1/_)||d!==d&&_!==_}var Es=typeof Object.is=="function"?Object.is:Gn,so=null,Uu=!1,bu=!1;function _h(d){so===null?so=[d]:so.push(d)}function Da(d){Uu=!0,_h(d)}function ha(){if(!bu&&so!==null){bu=!0;var d=0,_=Tr;try{var $=so;for(Tr=1;d<$.length;d++){var I=$[d];do I=I(!0);while(I!==null)}so=null,Uu=!1}catch(P){throw so!==null&&(so=so.slice(d+1)),nl(il,ha),P}finally{Tr=_,bu=!1}}return null}var Hu=u.ReactCurrentBatchConfig;function wr(d,_){if(Es(d,_))return!0;if(typeof d!="object"||d===null||typeof _!="object"||_===null)return!1;var $=Object.keys(d),I=Object.keys(_);if($.length!==I.length)return!1;for(I=0;I<$.length;I++){var P=$[I];if(!Fs.call(_,P)||!Es(d[P],_[P]))return!1}return!0}function Rs(d){switch(d.tag){case 5:return Rr(d.type);case 16:return Rr("Lazy");case 13:return Rr("Suspense");case 19:return Rr("SuspenseList");case 0:case 2:case 15:return d=La(d.type,!1),d;case 11:return d=La(d.type.render,!1),d;case 1:return d=La(d.type,!0),d;default:return""}}function bi(d,_){if(d&&d.defaultProps){_=o({},_),d=d.defaultProps;for(var $ in d)_[$]===void 0&&(_[$]=d[$]);return _}return _}var $i=kr(null),da=null,Zr=null,Tu=null;function $o(){Tu=Zr=da=null}function Su(d,_,$){lt?(Ir($i,_._currentValue),_._currentValue=$):(Ir($i,_._currentValue2),_._currentValue2=$)}function sl(d){var _=$i.current;An($i),lt?d._currentValue=_:d._currentValue2=_}function Bi(d,_,$){for(;d!==null;){var I=d.alternate;if((d.childLanes&_)!==_?(d.childLanes|=_,I!==null&&(I.childLanes|=_)):I!==null&&(I.childLanes&_)!==_&&(I.childLanes|=_),d===$)break;d=d.return}}function Ci(d,_){da=d,Tu=Zr=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&_&&(Ri=!0),d.firstContext=null)}function Vn(d){var _=lt?d._currentValue:d._currentValue2;if(Tu!==d)if(d={context:d,memoizedValue:_,next:null},Zr===null){if(da===null)throw Error(l(308));Zr=d,da.dependencies={lanes:0,firstContext:d}}else Zr=Zr.next=d;return _}var Mi=null,Xr=!1;function dd(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wu(d,_){d=d.updateQueue,_.updateQueue===d&&(_.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Vi(d,_){return{eventTime:d,lane:_,tag:0,payload:null,callback:null,next:null}}function Pa(d,_){var $=d.updateQueue;$!==null&&($=$.shared,Nr!==null&&d.mode&1&&!(tr&2)?(d=$.interleaved,d===null?(_.next=_,Mi===null?Mi=[$]:Mi.push($)):(_.next=d.next,d.next=_),$.interleaved=_):(d=$.pending,d===null?_.next=_:(_.next=d.next,d.next=_),$.pending=_))}function vh(d,_,$){if(_=_.updateQueue,_!==null&&(_=_.shared,($&4194240)!==0)){var I=_.lanes;I&=d.pendingLanes,$|=I,_.lanes=$,br(d,$)}}function fr(d,_){var $=d.updateQueue,I=d.alternate;if(I!==null&&(I=I.updateQueue,$===I)){var P=null,W=null;if($=$.firstBaseUpdate,$!==null){do{var de={eventTime:$.eventTime,lane:$.lane,tag:$.tag,payload:$.payload,callback:$.callback,next:null};W===null?P=W=de:W=W.next=de,$=$.next}while($!==null);W===null?P=W=_:W=W.next=_}else P=W=_;$={baseState:I.baseState,firstBaseUpdate:P,lastBaseUpdate:W,shared:I.shared,effects:I.effects},d.updateQueue=$;return}d=$.lastBaseUpdate,d===null?$.firstBaseUpdate=_:d.next=_,$.lastBaseUpdate=_}function Zo(d,_,$,I){var P=d.updateQueue;Xr=!1;var W=P.firstBaseUpdate,de=P.lastBaseUpdate,Oe=P.shared.pending;if(Oe!==null){P.shared.pending=null;var Ze=Oe,wt=Ze.next;Ze.next=null,de===null?W=wt:de.next=wt,de=Ze;var Qt=d.alternate;Qt!==null&&(Qt=Qt.updateQueue,Oe=Qt.lastBaseUpdate,Oe!==de&&(Oe===null?Qt.firstBaseUpdate=wt:Oe.next=wt,Qt.lastBaseUpdate=Ze))}if(W!==null){var cn=P.baseState;de=0,Qt=wt=Ze=null,Oe=W;do{var bn=Oe.lane,Tn=Oe.eventTime;if((I&bn)===bn){Qt!==null&&(Qt=Qt.next={eventTime:Tn,lane:0,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null});e:{var gn=d,Dr=Oe;switch(bn=_,Tn=$,Dr.tag){case 1:if(gn=Dr.payload,typeof gn=="function"){cn=gn.call(Tn,cn,bn);break e}cn=gn;break e;case 3:gn.flags=gn.flags&-65537|128;case 0:if(gn=Dr.payload,bn=typeof gn=="function"?gn.call(Tn,cn,bn):gn,bn==null)break e;cn=o({},cn,bn);break e;case 2:Xr=!0}}Oe.callback!==null&&Oe.lane!==0&&(d.flags|=64,bn=P.effects,bn===null?P.effects=[Oe]:bn.push(Oe))}else Tn={eventTime:Tn,lane:bn,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null},Qt===null?(wt=Qt=Tn,Ze=cn):Qt=Qt.next=Tn,de|=bn;if(Oe=Oe.next,Oe===null){if(Oe=P.shared.pending,Oe===null)break;bn=Oe,Oe=bn.next,bn.next=null,P.lastBaseUpdate=bn,P.shared.pending=null}}while(!0);if(Qt===null&&(Ze=cn),P.baseState=Ze,P.firstBaseUpdate=wt,P.lastBaseUpdate=Qt,_=P.shared.interleaved,_!==null){P=_;do de|=P.lane,P=P.next;while(P!==_)}else W===null&&(P.shared.lanes=0);qu|=de,d.lanes=de,d.memoizedState=cn}}function fd(d,_,$){if(d=_.effects,_.effects=null,d!==null)for(_=0;_<d.length;_++){var I=d[_],P=I.callback;if(P!==null){if(I.callback=null,I=$,typeof P!="function")throw Error(l(191,P));P.call(I)}}}var lf=new r.Component().refs;function Bc(d,_,$,I){_=d.memoizedState,$=$(I,_),$=$==null?_:o({},_,$),d.memoizedState=$,d.lanes===0&&(d.updateQueue.baseState=$)}var uf={isMounted:function(d){return(d=d._reactInternals)?oe(d)===d:!1},enqueueSetState:function(d,_,$){d=d._reactInternals;var I=bs(),P=Os(d),W=Vi(I,P);W.payload=_,$!=null&&(W.callback=$),Pa(d,W),_=Ya(d,P,I),_!==null&&vh(_,d,P)},enqueueReplaceState:function(d,_,$){d=d._reactInternals;var I=bs(),P=Os(d),W=Vi(I,P);W.tag=1,W.payload=_,$!=null&&(W.callback=$),Pa(d,W),_=Ya(d,P,I),_!==null&&vh(_,d,P)},enqueueForceUpdate:function(d,_){d=d._reactInternals;var $=bs(),I=Os(d),P=Vi($,I);P.tag=2,_!=null&&(P.callback=_),Pa(d,P),_=Ya(d,I,$),_!==null&&vh(_,d,I)}};function Bf(d,_,$,I,P,W,de){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(I,W,de):_.prototype&&_.prototype.isPureReactComponent?!wr($,I)||!wr(P,W):!0}function Tp(d,_,$){var I=!1,P=Gr,W=_.contextType;return typeof W=="object"&&W!==null?W=Vn(W):(P=gs(_)?ws:yr.current,I=_.contextTypes,W=(I=I!=null)?fi(d,P):Gr),_=new _($,W),d.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=uf,d.stateNode=_,_._reactInternals=d,I&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=P,d.__reactInternalMemoizedMaskedChildContext=W),_}function Md(d,_,$,I){d=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps($,I),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps($,I),_.state!==d&&uf.enqueueReplaceState(_,_.state,null)}function Jl(d,_,$,I){var P=d.stateNode;P.props=$,P.state=d.memoizedState,P.refs=lf,dd(d);var W=_.contextType;typeof W=="object"&&W!==null?P.context=Vn(W):(W=gs(_)?ws:yr.current,P.context=fi(d,W)),P.state=d.memoizedState,W=_.getDerivedStateFromProps,typeof W=="function"&&(Bc(d,_,W,$),P.state=d.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(_=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),_!==P.state&&uf.enqueueReplaceState(P,P.state,null),Zo(d,$,P,I),P.state=d.memoizedState),typeof P.componentDidMount=="function"&&(d.flags|=4194308)}var ks=[],Gu=0,yh=null,Ba=0,ci=[],Er=0,oo=null,Fa=1,zo="";function ql(d,_){ks[Gu++]=Ba,ks[Gu++]=yh,yh=d,Ba=_}function Ql(d,_,$){ci[Er++]=Fa,ci[Er++]=zo,ci[Er++]=oo,oo=d;var I=Fa;d=zo;var P=32-qo(I)-1;I&=~(1<<P),$+=1;var W=32-qo(_)+P;if(30<W){var de=P-P%5;W=(I&(1<<de)-1).toString(32),I>>=de,P-=de,Fa=1<<32-qo(_)+P|$<<P|I,zo=W+d}else Fa=1<<W|$<<P|I,zo=d}function Fh(d){d.return!==null&&(ql(d,1),Ql(d,1,0))}function Wr(d){for(;d===yh;)yh=ks[--Gu],ks[Gu]=null,Ba=ks[--Gu],ks[Gu]=null;for(;d===oo;)oo=ci[--Er],ci[Er]=null,zo=ci[--Er],ci[Er]=null,Fa=ci[--Er],ci[Er]=null}var Ai=null,Sr=null,ji=!1,fa=!1,Eu=null;function cf(d,_){var $=_o(5,null,null,0);$.elementType="DELETED",$.stateNode=_,$.return=d,_=d.deletions,_===null?(d.deletions=[$],d.flags|=16):_.push($)}function hf(d,_){switch(d.tag){case 5:return _=We(_,d.type,d.pendingProps),_!==null?(d.stateNode=_,Ai=d,Sr=Ct(_),!0):!1;case 6:return _=ot(_,d.pendingProps),_!==null?(d.stateNode=_,Ai=d,Sr=null,!0):!1;case 13:if(_=zt(_),_!==null){var $=oo!==null?{id:Fa,overflow:zo}:null;return d.memoizedState={dehydrated:_,treeContext:$,retryLane:1073741824},$=_o(18,null,null,0),$.stateNode=_,$.return=d,d.child=$,Ai=d,Sr=null,!0}return!1;default:return!1}}function pd(d){return(d.mode&1)!==0&&(d.flags&128)===0}function Wu(d){if(ji){var _=Sr;if(_){var $=_;if(!hf(d,_)){if(pd(d))throw Error(l(418));_=gt($);var I=Ai;_&&hf(d,_)?cf(I,$):(d.flags=d.flags&-4097|2,ji=!1,Ai=d)}}else{if(pd(d))throw Error(l(418));d.flags=d.flags&-4097|2,ji=!1,Ai=d}}}function ol(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Ai=d}function Fc(d){if(!He||d!==Ai)return!1;if(!ji)return ol(d),ji=!0,!1;if(d.tag!==3&&(d.tag!==5||Oa(d.type)&&!qe(d.type,d.memoizedProps))){var _=Sr;if(_){if(pd(d)){for(d=Sr;d;)d=gt(d);throw Error(l(418))}for(;_;)cf(d,_),_=gt(_)}}if(ol(d),d.tag===13){if(!He)throw Error(l(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));Sr=Cr(d)}else Sr=Ai?gt(d.stateNode):null;return!0}function zh(){He&&(Sr=Ai=null,fa=ji=!1)}function Vu(d){Eu===null?Eu=[d]:Eu.push(d)}function Zl(d,_,$){if(d=$.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if($._owner){if($=$._owner,$){if($.tag!==1)throw Error(l(309));var I=$.stateNode}if(!I)throw Error(l(147,d));var P=I,W=""+d;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===W?_.ref:(_=function(de){var Oe=P.refs;Oe===lf&&(Oe=P.refs={}),de===null?delete Oe[W]:Oe[W]=de},_._stringRef=W,_)}if(typeof d!="string")throw Error(l(284));if(!$._owner)throw Error(l(290,d))}return d}function Us(d,_){throw d=Object.prototype.toString.call(_),Error(l(31,d==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":d))}function eu(d){var _=d._init;return _(d._payload)}function Uh(d){function _(Me,Ne){if(d){var st=Me.deletions;st===null?(Me.deletions=[Ne],Me.flags|=16):st.push(Ne)}}function $(Me,Ne){if(!d)return null;for(;Ne!==null;)_(Me,Ne),Ne=Ne.sibling;return null}function I(Me,Ne){for(Me=new Map;Ne!==null;)Ne.key!==null?Me.set(Ne.key,Ne):Me.set(Ne.index,Ne),Ne=Ne.sibling;return Me}function P(Me,Ne){return Me=vo(Me,Ne),Me.index=0,Me.sibling=null,Me}function W(Me,Ne,st){return Me.index=st,d?(st=Me.alternate,st!==null?(st=st.index,st<Ne?(Me.flags|=2,Ne):st):(Me.flags|=2,Ne)):(Me.flags|=1048576,Ne)}function de(Me){return d&&Me.alternate===null&&(Me.flags|=2),Me}function Oe(Me,Ne,st,Ht){return Ne===null||Ne.tag!==6?(Ne=ni(st,Me.mode,Ht),Ne.return=Me,Ne):(Ne=P(Ne,st),Ne.return=Me,Ne)}function Ze(Me,Ne,st,Ht){var on=st.type;return on===g?Qt(Me,Ne,st.props.children,Ht,st.key):Ne!==null&&(Ne.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===B&&eu(on)===Ne.type)?(Ht=P(Ne,st.props),Ht.ref=Zl(Me,Ne,st),Ht.return=Me,Ht):(Ht=Pl(st.type,st.key,st.props,null,Me.mode,Ht),Ht.ref=Zl(Me,Ne,st),Ht.return=Me,Ht)}function wt(Me,Ne,st,Ht){return Ne===null||Ne.tag!==4||Ne.stateNode.containerInfo!==st.containerInfo||Ne.stateNode.implementation!==st.implementation?(Ne=cs(st,Me.mode,Ht),Ne.return=Me,Ne):(Ne=P(Ne,st.children||[]),Ne.return=Me,Ne)}function Qt(Me,Ne,st,Ht,on){return Ne===null||Ne.tag!==7?(Ne=Xa(st,Me.mode,Ht,on),Ne.return=Me,Ne):(Ne=P(Ne,st),Ne.return=Me,Ne)}function cn(Me,Ne,st){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return Ne=ni(""+Ne,Me.mode,st),Ne.return=Me,Ne;if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case h:return st=Pl(Ne.type,Ne.key,Ne.props,null,Me.mode,st),st.ref=Zl(Me,null,Ne),st.return=Me,st;case f:return Ne=cs(Ne,Me.mode,st),Ne.return=Me,Ne;case B:var Ht=Ne._init;return cn(Me,Ht(Ne._payload),st)}if(ue(Ne)||U(Ne))return Ne=Xa(Ne,Me.mode,st,null),Ne.return=Me,Ne;Us(Me,Ne)}return null}function bn(Me,Ne,st,Ht){var on=Ne!==null?Ne.key:null;if(typeof st=="string"&&st!==""||typeof st=="number")return on!==null?null:Oe(Me,Ne,""+st,Ht);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case h:return st.key===on?Ze(Me,Ne,st,Ht):null;case f:return st.key===on?wt(Me,Ne,st,Ht):null;case B:return on=st._init,bn(Me,Ne,on(st._payload),Ht)}if(ue(st)||U(st))return on!==null?null:Qt(Me,Ne,st,Ht,null);Us(Me,st)}return null}function Tn(Me,Ne,st,Ht,on){if(typeof Ht=="string"&&Ht!==""||typeof Ht=="number")return Me=Me.get(st)||null,Oe(Ne,Me,""+Ht,on);if(typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case h:return Me=Me.get(Ht.key===null?st:Ht.key)||null,Ze(Ne,Me,Ht,on);case f:return Me=Me.get(Ht.key===null?st:Ht.key)||null,wt(Ne,Me,Ht,on);case B:var En=Ht._init;return Tn(Me,Ne,st,En(Ht._payload),on)}if(ue(Ht)||U(Ht))return Me=Me.get(st)||null,Qt(Ne,Me,Ht,on,null);Us(Ne,Ht)}return null}function gn(Me,Ne,st,Ht){for(var on=null,En=null,Rn=Ne,Fn=Ne=0,dr=null;Rn!==null&&Fn<st.length;Fn++){Rn.index>Fn?(dr=Rn,Rn=null):dr=Rn.sibling;var Ar=bn(Me,Rn,st[Fn],Ht);if(Ar===null){Rn===null&&(Rn=dr);break}d&&Rn&&Ar.alternate===null&&_(Me,Rn),Ne=W(Ar,Ne,Fn),En===null?on=Ar:En.sibling=Ar,En=Ar,Rn=dr}if(Fn===st.length)return $(Me,Rn),ji&&ql(Me,Fn),on;if(Rn===null){for(;Fn<st.length;Fn++)Rn=cn(Me,st[Fn],Ht),Rn!==null&&(Ne=W(Rn,Ne,Fn),En===null?on=Rn:En.sibling=Rn,En=Rn);return ji&&ql(Me,Fn),on}for(Rn=I(Me,Rn);Fn<st.length;Fn++)dr=Tn(Rn,Me,Fn,st[Fn],Ht),dr!==null&&(d&&dr.alternate!==null&&Rn.delete(dr.key===null?Fn:dr.key),Ne=W(dr,Ne,Fn),En===null?on=dr:En.sibling=dr,En=dr);return d&&Rn.forEach(function(Bl){return _(Me,Bl)}),ji&&ql(Me,Fn),on}function Dr(Me,Ne,st,Ht){var on=U(st);if(typeof on!="function")throw Error(l(150));if(st=on.call(st),st==null)throw Error(l(151));for(var En=on=null,Rn=Ne,Fn=Ne=0,dr=null,Ar=st.next();Rn!==null&&!Ar.done;Fn++,Ar=st.next()){Rn.index>Fn?(dr=Rn,Rn=null):dr=Rn.sibling;var Bl=bn(Me,Rn,Ar.value,Ht);if(Bl===null){Rn===null&&(Rn=dr);break}d&&Rn&&Bl.alternate===null&&_(Me,Rn),Ne=W(Bl,Ne,Fn),En===null?on=Bl:En.sibling=Bl,En=Bl,Rn=dr}if(Ar.done)return $(Me,Rn),ji&&ql(Me,Fn),on;if(Rn===null){for(;!Ar.done;Fn++,Ar=st.next())Ar=cn(Me,Ar.value,Ht),Ar!==null&&(Ne=W(Ar,Ne,Fn),En===null?on=Ar:En.sibling=Ar,En=Ar);return ji&&ql(Me,Fn),on}for(Rn=I(Me,Rn);!Ar.done;Fn++,Ar=st.next())Ar=Tn(Rn,Me,Fn,Ar.value,Ht),Ar!==null&&(d&&Ar.alternate!==null&&Rn.delete(Ar.key===null?Fn:Ar.key),Ne=W(Ar,Ne,Fn),En===null?on=Ar:En.sibling=Ar,En=Ar);return d&&Rn.forEach(function(pf){return _(Me,pf)}),ji&&ql(Me,Fn),on}function Tt(Me,Ne,st,Ht){if(typeof st=="object"&&st!==null&&st.type===g&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case h:e:{for(var on=st.key,En=Ne;En!==null;){if(En.key===on){if(on=st.type,on===g){if(En.tag===7){$(Me,En.sibling),Ne=P(En,st.props.children),Ne.return=Me,Me=Ne;break e}}else if(En.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===B&&eu(on)===En.type){$(Me,En.sibling),Ne=P(En,st.props),Ne.ref=Zl(Me,En,st),Ne.return=Me,Me=Ne;break e}$(Me,En);break}else _(Me,En);En=En.sibling}st.type===g?(Ne=Xa(st.props.children,Me.mode,Ht,st.key),Ne.return=Me,Me=Ne):(Ht=Pl(st.type,st.key,st.props,null,Me.mode,Ht),Ht.ref=Zl(Me,Ne,st),Ht.return=Me,Me=Ht)}return de(Me);case f:e:{for(En=st.key;Ne!==null;){if(Ne.key===En)if(Ne.tag===4&&Ne.stateNode.containerInfo===st.containerInfo&&Ne.stateNode.implementation===st.implementation){$(Me,Ne.sibling),Ne=P(Ne,st.children||[]),Ne.return=Me,Me=Ne;break e}else{$(Me,Ne);break}else _(Me,Ne);Ne=Ne.sibling}Ne=cs(st,Me.mode,Ht),Ne.return=Me,Me=Ne}return de(Me);case B:return En=st._init,Tt(Me,Ne,En(st._payload),Ht)}if(ue(st))return gn(Me,Ne,st,Ht);if(U(st))return Dr(Me,Ne,st,Ht);Us(Me,st)}return typeof st=="string"&&st!==""||typeof st=="number"?(st=""+st,Ne!==null&&Ne.tag===6?($(Me,Ne.sibling),Ne=P(Ne,st),Ne.return=Me,Me=Ne):($(Me,Ne),Ne=ni(st,Me.mode,Ht),Ne.return=Me,Me=Ne),de(Me)):$(Me,Ne)}return Tt}var zc=Uh(!0),Uc=Uh(!1),is={},Fr=kr(is),Cl=kr(is),za=kr(is);function tu(d){if(d===is)throw Error(l(174));return d}function xu(d,_){Ir(za,_),Ir(Cl,d),Ir(Fr,is),d=we(_),An(Fr),Ir(Fr,d)}function bh(){An(Fr),An(Cl),An(za)}function Ad(d){var _=tu(za.current),$=tu(Fr.current);_=J($,d.type,_),$!==_&&(Ir(Cl,d),Ir(Fr,_))}function pi(d){Cl.current===d&&(An(Fr),An(Cl))}var ye=kr(0);function je(d){for(var _=d;_!==null;){if(_.tag===13){var $=_.memoizedState;if($!==null&&($=$.dehydrated,$===null||sn($)||Nn($)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===d)break;for(;_.sibling===null;){if(_.return===null||_.return===d)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Be=[];function Ot(){for(var d=0;d<Be.length;d++){var _=Be[d];lt?_._workInProgressVersionPrimary=null:_._workInProgressVersionSecondary=null}Be.length=0}var rn=u.ReactCurrentDispatcher,In=u.ReactCurrentBatchConfig,Jn=0,vn=null,zr=null,ao=null,Ti=!1,lo=!1,al=0,Fi=0;function vs(){throw Error(l(321))}function $u(d,_){if(_===null)return!1;for(var $=0;$<_.length&&$<d.length;$++)if(!Es(d[$],_[$]))return!1;return!0}function qn(d,_,$,I,P,W){if(Jn=W,vn=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,rn.current=d===null||d.memoizedState===null?Ku:Sh,d=$(I,P),lo){W=0;do{if(lo=!1,al=0,25<=W)throw Error(l(301));W+=1,ao=zr=null,_.updateQueue=null,rn.current=ll,d=$(I,P)}while(lo)}if(rn.current=Xu,_=zr!==null&&zr.next!==null,Jn=0,ao=zr=vn=null,Ti=!1,_)throw Error(l(300));return d}function pa(){var d=al!==0;return al=0,d}function Ks(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ao===null?vn.memoizedState=ao=d:ao=ao.next=d,ao}function Hs(){if(zr===null){var d=vn.alternate;d=d!==null?d.memoizedState:null}else d=zr.next;var _=ao===null?vn.memoizedState:ao.next;if(_!==null)ao=_,zr=d;else{if(d===null)throw Error(l(310));zr=d,d={memoizedState:zr.memoizedState,baseState:zr.baseState,baseQueue:zr.baseQueue,queue:zr.queue,next:null},ao===null?vn.memoizedState=ao=d:ao=ao.next=d}return ao}function Ua(d,_){return typeof _=="function"?_(d):_}function Hh(d){var _=Hs(),$=_.queue;if($===null)throw Error(l(311));$.lastRenderedReducer=d;var I=zr,P=I.baseQueue,W=$.pending;if(W!==null){if(P!==null){var de=P.next;P.next=W.next,W.next=de}I.baseQueue=P=W,$.pending=null}if(P!==null){W=P.next,I=I.baseState;var Oe=de=null,Ze=null,wt=W;do{var Qt=wt.lane;if((Jn&Qt)===Qt)Ze!==null&&(Ze=Ze.next={lane:0,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null}),I=wt.hasEagerState?wt.eagerState:d(I,wt.action);else{var cn={lane:Qt,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null};Ze===null?(Oe=Ze=cn,de=I):Ze=Ze.next=cn,vn.lanes|=Qt,qu|=Qt}wt=wt.next}while(wt!==null&&wt!==W);Ze===null?de=I:Ze.next=Oe,Es(I,_.memoizedState)||(Ri=!0),_.memoizedState=I,_.baseState=de,_.baseQueue=Ze,$.lastRenderedState=I}if(d=$.interleaved,d!==null){P=d;do W=P.lane,vn.lanes|=W,qu|=W,P=P.next;while(P!==d)}else P===null&&($.lanes=0);return[_.memoizedState,$.dispatch]}function Th(d){var _=Hs(),$=_.queue;if($===null)throw Error(l(311));$.lastRenderedReducer=d;var I=$.dispatch,P=$.pending,W=_.memoizedState;if(P!==null){$.pending=null;var de=P=P.next;do W=d(W,de.action),de=de.next;while(de!==P);Es(W,_.memoizedState)||(Ri=!0),_.memoizedState=W,_.baseQueue===null&&(_.baseState=W),$.lastRenderedState=W}return[W,I]}function pc(){}function ea(d,_){var $=vn,I=Hs(),P=_(),W=!Es(I.memoizedState,P);if(W&&(I.memoizedState=P,Ri=!0),I=I.queue,Vh(Ha.bind(null,$,I,d),[d]),I.getSnapshot!==_||W||ao!==null&&ao.memoizedState.tag&1){if($.flags|=2048,ju(9,Gh.bind(null,$,I,P,_),void 0,null),Nr===null)throw Error(l(349));Jn&30||Hc($,_,P)}return P}function Hc(d,_,$){d.flags|=16384,d={getSnapshot:_,value:$},_=vn.updateQueue,_===null?(_={lastEffect:null,stores:null},vn.updateQueue=_,_.stores=[d]):($=_.stores,$===null?_.stores=[d]:$.push(d))}function Gh(d,_,$,I){_.value=$,_.getSnapshot=I,Wh(_)&&Ya(d,1,-1)}function Ha(d,_,$){return $(function(){Wh(_)&&Ya(d,1,-1)})}function Wh(d){var _=d.getSnapshot;d=d.value;try{var $=_();return!Es(d,$)}catch{return!0}}function mc(d){var _=Ks();return typeof d=="function"&&(d=d()),_.memoizedState=_.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:d},_.queue=d,d=d.dispatch=Ii.bind(null,vn,d),[_.memoizedState,d]}function ju(d,_,$,I){return d={tag:d,create:_,destroy:$,deps:I,next:null},_=vn.updateQueue,_===null?(_={lastEffect:null,stores:null},vn.updateQueue=_,_.lastEffect=d.next=d):($=_.lastEffect,$===null?_.lastEffect=d.next=d:(I=$.next,$.next=d,d.next=I,_.lastEffect=d)),d}function md(){return Hs().memoizedState}function ta(d,_,$,I){var P=Ks();vn.flags|=d,P.memoizedState=ju(1|_,$,void 0,I===void 0?null:I)}function uo(d,_,$,I){var P=Hs();I=I===void 0?null:I;var W=void 0;if(zr!==null){var de=zr.memoizedState;if(W=de.destroy,I!==null&&$u(I,de.deps)){P.memoizedState=ju(_,$,W,I);return}}vn.flags|=d,P.memoizedState=ju(1|_,$,W,I)}function Ml(d,_){return ta(8390656,8,d,_)}function Vh(d,_){return uo(2048,8,d,_)}function zi(d,_){return uo(4,2,d,_)}function gd(d,_){return uo(4,4,d,_)}function Yu(d,_){if(typeof _=="function")return d=d(),_(d),function(){_(null)};if(_!=null)return d=d(),_.current=d,function(){_.current=null}}function nu(d,_,$){return $=$!=null?$.concat([d]):null,uo(4,4,Yu.bind(null,_,d),$)}function Gc(){}function Id(d,_){var $=Hs();_=_===void 0?null:_;var I=$.memoizedState;return I!==null&&_!==null&&$u(_,I[1])?I[0]:($.memoizedState=[d,_],d)}function Al(d,_){var $=Hs();_=_===void 0?null:_;var I=$.memoizedState;return I!==null&&_!==null&&$u(_,I[1])?I[0]:(d=d(),$.memoizedState=[d,_],d)}function Rd(d,_){var $=Tr;Tr=$!==0&&4>$?$:4,d(!0);var I=In.transition;In.transition={};try{d(!1),_()}finally{Tr=$,In.transition=I}}function jh(){return Hs().memoizedState}function ei(d,_,$){var I=Os(d);$={lane:I,action:$,hasEagerState:!1,eagerState:null,next:null},Sp(d)?Ff(_,$):(Il(d,_,$),$=bs(),d=Ya(d,I,$),d!==null&&ru(d,_,I))}function Ii(d,_,$){var I=Os(d),P={lane:I,action:$,hasEagerState:!1,eagerState:null,next:null};if(Sp(d))Ff(_,P);else{Il(d,_,P);var W=d.alternate;if(d.lanes===0&&(W===null||W.lanes===0)&&(W=_.lastRenderedReducer,W!==null))try{var de=_.lastRenderedState,Oe=W(de,$);if(P.hasEagerState=!0,P.eagerState=Oe,Es(Oe,de))return}catch{}finally{}$=bs(),d=Ya(d,I,$),d!==null&&ru(d,_,I)}}function Sp(d){var _=d.alternate;return d===vn||_!==null&&_===vn}function Ff(d,_){lo=Ti=!0;var $=d.pending;$===null?_.next=_:(_.next=$.next,$.next=_),d.pending=_}function Il(d,_,$){Nr!==null&&d.mode&1&&!(tr&2)?(d=_.interleaved,d===null?($.next=$,Mi===null?Mi=[_]:Mi.push(_)):($.next=d.next,d.next=$),_.interleaved=$):(d=_.pending,d===null?$.next=$:($.next=d.next,d.next=$),_.pending=$)}function ru(d,_,$){if($&4194240){var I=_.lanes;I&=d.pendingLanes,$|=I,_.lanes=$,br(d,$)}}var Xu={readContext:Vn,useCallback:vs,useContext:vs,useEffect:vs,useImperativeHandle:vs,useInsertionEffect:vs,useLayoutEffect:vs,useMemo:vs,useReducer:vs,useRef:vs,useState:vs,useDebugValue:vs,useDeferredValue:vs,useTransition:vs,useMutableSource:vs,useSyncExternalStore:vs,useId:vs,unstable_isNewReconciler:!1},Ku={readContext:Vn,useCallback:function(d,_){return Ks().memoizedState=[d,_===void 0?null:_],d},useContext:Vn,useEffect:Ml,useImperativeHandle:function(d,_,$){return $=$!=null?$.concat([d]):null,ta(4194308,4,Yu.bind(null,_,d),$)},useLayoutEffect:function(d,_){return ta(4194308,4,d,_)},useInsertionEffect:function(d,_){return ta(4,2,d,_)},useMemo:function(d,_){var $=Ks();return _=_===void 0?null:_,d=d(),$.memoizedState=[d,_],d},useReducer:function(d,_,$){var I=Ks();return _=$!==void 0?$(_):_,I.memoizedState=I.baseState=_,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:_},I.queue=d,d=d.dispatch=ei.bind(null,vn,d),[I.memoizedState,d]},useRef:function(d){var _=Ks();return d={current:d},_.memoizedState=d},useState:mc,useDebugValue:Gc,useDeferredValue:function(d){var _=mc(d),$=_[0],I=_[1];return Ml(function(){var P=In.transition;In.transition={};try{I(d)}finally{In.transition=P}},[d]),$},useTransition:function(){var d=mc(!1),_=d[0];return d=Rd.bind(null,d[1]),Ks().memoizedState=d,[_,d]},useMutableSource:function(){},useSyncExternalStore:function(d,_,$){var I=vn,P=Ks();if(ji){if($===void 0)throw Error(l(407));$=$()}else{if($=_(),Nr===null)throw Error(l(349));Jn&30||Hc(I,_,$)}P.memoizedState=$;var W={value:$,getSnapshot:_};return P.queue=W,Ml(Ha.bind(null,I,W,d),[d]),I.flags|=2048,ju(9,Gh.bind(null,I,W,$,_),void 0,null),$},useId:function(){var d=Ks(),_=Nr.identifierPrefix;if(ji){var $=zo,I=Fa;$=(I&~(1<<32-qo(I)-1)).toString(32)+$,_=":"+_+"R"+$,$=al++,0<$&&(_+="H"+$.toString(32)),_+=":"}else $=Fi++,_=":"+_+"r"+$.toString(32)+":";return d.memoizedState=_},unstable_isNewReconciler:!1},Sh={readContext:Vn,useCallback:Id,useContext:Vn,useEffect:Vh,useImperativeHandle:nu,useInsertionEffect:zi,useLayoutEffect:gd,useMemo:Al,useReducer:Hh,useRef:md,useState:function(){return Hh(Ua)},useDebugValue:Gc,useDeferredValue:function(d){var _=Hh(Ua),$=_[0],I=_[1];return Vh(function(){var P=In.transition;In.transition={};try{I(d)}finally{In.transition=P}},[d]),$},useTransition:function(){var d=Hh(Ua)[0],_=Hs().memoizedState;return[d,_]},useMutableSource:pc,useSyncExternalStore:ea,useId:jh,unstable_isNewReconciler:!1},ll={readContext:Vn,useCallback:Id,useContext:Vn,useEffect:Vh,useImperativeHandle:nu,useInsertionEffect:zi,useLayoutEffect:gd,useMemo:Al,useReducer:Th,useRef:md,useState:function(){return Th(Ua)},useDebugValue:Gc,useDeferredValue:function(d){var _=Th(Ua),$=_[0],I=_[1];return Vh(function(){var P=In.transition;In.transition={};try{I(d)}finally{In.transition=P}},[d]),$},useTransition:function(){var d=Th(Ua)[0],_=Hs().memoizedState;return[d,_]},useMutableSource:pc,useSyncExternalStore:ea,useId:jh,unstable_isNewReconciler:!1};function na(d,_){try{var $="",I=_;do $+=Rs(I),I=I.return;while(I);var P=$}catch(W){P=`
Error generating stack: `+W.message+`
`+W.stack}return{value:d,source:_,stack:P}}function Rl(d,_){try{console.error(_.value)}catch($){setTimeout(function(){throw $})}}var Wc=typeof WeakMap=="function"?WeakMap:Map;function kl(d,_,$){$=Vi(-1,$),$.tag=3,$.payload={element:null};var I=_.value;return $.callback=function(){Au||(Au=!0,fo=I),Rl(d,_)},$}function Vc(d,_,$){$=Vi(-1,$),$.tag=3;var I=d.type.getDerivedStateFromError;if(typeof I=="function"){var P=_.value;$.payload=function(){return I(P)},$.callback=function(){Rl(d,_)}}var W=d.stateNode;return W!==null&&typeof W.componentDidCatch=="function"&&($.callback=function(){Rl(d,_),typeof I!="function"&&(po===null?po=new Set([this]):po.add(this));var de=_.stack;this.componentDidCatch(_.value,{componentStack:de!==null?de:""})}),$}function gc(d,_,$){var I=d.pingCache;if(I===null){I=d.pingCache=new Wc;var P=new Set;I.set(_,P)}else P=I.get(_),P===void 0&&(P=new Set,I.set(_,P));P.has($)||(P.add($),d=sa.bind(null,d,_,$),_.then(d,d))}function kd(d){do{var _;if((_=d.tag===13)&&(_=d.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return d;d=d.return}while(d!==null);return null}function Ga(d,_,$,I,P){return d.mode&1?(d.flags|=65536,d.lanes=P,d):(d===_?d.flags|=65536:(d.flags|=128,$.flags|=131072,$.flags&=-52805,$.tag===1&&($.alternate===null?$.tag=17:(_=Vi(-1,1),_.tag=2,Pa($,_))),$.lanes|=1),d)}function Vr(d){d.flags|=4}function ul(d,_){if(d!==null&&d.child===_.child)return!0;if(_.flags&16)return!1;for(d=_.child;d!==null;){if(d.flags&12854||d.subtreeFlags&12854)return!1;d=d.sibling}return!0}var Qi,ma,X,xs;if(ze)Qi=function(d,_){for(var $=_.child;$!==null;){if($.tag===5||$.tag===6)Te(d,$.stateNode);else if($.tag!==4&&$.child!==null){$.child.return=$,$=$.child;continue}if($===_)break;for(;$.sibling===null;){if($.return===null||$.return===_)return;$=$.return}$.sibling.return=$.return,$=$.sibling}},ma=function(){},X=function(d,_,$,I,P){if(d=d.memoizedProps,d!==I){var W=_.stateNode,de=tu(Fr.current);$=Ie(W,$,d,I,P,de),(_.updateQueue=$)&&Vr(_)}},xs=function(d,_,$,I){$!==I&&Vr(_)};else if(Ce){Qi=function(d,_,$,I){for(var P=_.child;P!==null;){if(P.tag===5){var W=P.stateNode;$&&I&&(W=ne(W,P.type,P.memoizedProps,P)),Te(d,W)}else if(P.tag===6)W=P.stateNode,$&&I&&(W=Se(W,P.memoizedProps,P)),Te(d,W);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)W=P.child,W!==null&&(W.return=P),Qi(d,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var ga=function(d,_,$,I){for(var P=_.child;P!==null;){if(P.tag===5){var W=P.stateNode;$&&I&&(W=ne(W,P.type,P.memoizedProps,P)),Ei(d,W)}else if(P.tag===6)W=P.stateNode,$&&I&&(W=Se(W,P.memoizedProps,P)),Ei(d,W);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)W=P.child,W!==null&&(W.return=P),ga(d,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};ma=function(d,_){var $=_.stateNode;if(!ul(d,_)){d=$.containerInfo;var I=Pr(d);ga(I,_,!1,!1),$.pendingChildren=I,Vr(_),$r(d,I)}},X=function(d,_,$,I,P){var W=d.stateNode,de=d.memoizedProps;if((d=ul(d,_))&&de===I)_.stateNode=W;else{var Oe=_.stateNode,Ze=tu(Fr.current),wt=null;de!==I&&(wt=Ie(Oe,$,de,I,P,Ze)),d&&wt===null?_.stateNode=W:(W=si(W,wt,$,de,I,_,d,Oe),Fe(W,$,I,P,Ze)&&Vr(_),_.stateNode=W,d?Vr(_):Qi(W,_,!1,!1))}},xs=function(d,_,$,I){$!==I?(d=tu(za.current),$=tu(Fr.current),_.stateNode=Re(I,d,$,_),Vr(_)):_.stateNode=d.stateNode}}else ma=function(){},X=function(){},xs=function(){};function Mr(d,_){if(!ji)switch(d.tailMode){case"hidden":_=d.tail;for(var $=null;_!==null;)_.alternate!==null&&($=_),_=_.sibling;$===null?d.tail=null:$.sibling=null;break;case"collapsed":$=d.tail;for(var I=null;$!==null;)$.alternate!==null&&(I=$),$=$.sibling;I===null?_||d.tail===null?d.tail=null:d.tail.sibling=null:I.sibling=null}}function mn(d){var _=d.alternate!==null&&d.alternate.child===d.child,$=0,I=0;if(_)for(var P=d.child;P!==null;)$|=P.lanes|P.childLanes,I|=P.subtreeFlags&14680064,I|=P.flags&14680064,P.return=d,P=P.sibling;else for(P=d.child;P!==null;)$|=P.lanes|P.childLanes,I|=P.subtreeFlags,I|=P.flags,P.return=d,P=P.sibling;return d.subtreeFlags|=I,d.childLanes=$,_}function zf(d,_,$){var I=_.pendingProps;switch(Wr(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(_),null;case 1:return gs(_.type)&&tl(),mn(_),null;case 3:return I=_.stateNode,bh(),An(Pi),An(yr),Ot(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(d===null||d.child===null)&&(Fc(_)?Vr(_):d===null||d.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,Eu!==null&&(vi(Eu),Eu=null))),ma(d,_),mn(_),null;case 5:pi(_),$=tu(za.current);var P=_.type;if(d!==null&&_.stateNode!=null)X(d,_,P,I,$),d.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!I){if(_.stateNode===null)throw Error(l(166));return mn(_),null}if(d=tu(Fr.current),Fc(_)){if(!He)throw Error(l(175));d=Wn(_.stateNode,_.type,_.memoizedProps,$,d,_,!fa),_.updateQueue=d,d!==null&&Vr(_)}else{var W=fe(P,I,$,d,_);Qi(W,_,!1,!1),_.stateNode=W,Fe(W,P,I,$,d)&&Vr(_)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return mn(_),null;case 6:if(d&&_.stateNode!=null)xs(d,_,d.memoizedProps,I);else{if(typeof I!="string"&&_.stateNode===null)throw Error(l(166));if(d=tu(za.current),$=tu(Fr.current),Fc(_)){if(!He)throw Error(l(176));if(d=_.stateNode,I=_.memoizedProps,($=rr(d,I,_,!fa))&&(P=Ai,P!==null))switch(W=(P.mode&1)!==0,P.tag){case 3:xo(P.stateNode.containerInfo,d,I,W);break;case 5:Yl(P.type,P.memoizedProps,P.stateNode,d,I,W)}$&&Vr(_)}else _.stateNode=Re(I,d,$,_)}return mn(_),null;case 13:if(An(ye),I=_.memoizedState,ji&&Sr!==null&&_.mode&1&&!(_.flags&128)){for(d=Sr;d;)d=gt(d);return zh(),_.flags|=98560,_}if(I!==null&&I.dehydrated!==null){if(I=Fc(_),d===null){if(!I)throw Error(l(318));if(!He)throw Error(l(344));if(d=_.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));_r(d,_)}else zh(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;return mn(_),null}return Eu!==null&&(vi(Eu),Eu=null),_.flags&128?(_.lanes=$,_):(I=I!==null,$=!1,d===null?Fc(_):$=d.memoizedState!==null,I&&!$&&(_.child.flags|=8192,_.mode&1&&(d===null||ye.current&1?es===0&&(es=3):qc())),_.updateQueue!==null&&(_.flags|=4),mn(_),null);case 4:return bh(),ma(d,_),d===null&&it(_.stateNode.containerInfo),mn(_),null;case 10:return sl(_.type._context),mn(_),null;case 17:return gs(_.type)&&tl(),mn(_),null;case 19:if(An(ye),P=_.memoizedState,P===null)return mn(_),null;if(I=(_.flags&128)!==0,W=P.rendering,W===null)if(I)Mr(P,!1);else{if(es!==0||d!==null&&d.flags&128)for(d=_.child;d!==null;){if(W=je(d),W!==null){for(_.flags|=128,Mr(P,!1),d=W.updateQueue,d!==null&&(_.updateQueue=d,_.flags|=4),_.subtreeFlags=0,d=$,I=_.child;I!==null;)$=I,P=d,$.flags&=14680066,W=$.alternate,W===null?($.childLanes=0,$.lanes=P,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=W.childLanes,$.lanes=W.lanes,$.child=W.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=W.memoizedProps,$.memoizedState=W.memoizedState,$.updateQueue=W.updateQueue,$.type=W.type,P=W.dependencies,$.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),I=I.sibling;return Ir(ye,ye.current&1|2),_.child}d=d.sibling}P.tail!==null&&_s()>ba&&(_.flags|=128,I=!0,Mr(P,!1),_.lanes=4194304)}else{if(!I)if(d=je(W),d!==null){if(_.flags|=128,I=!0,d=d.updateQueue,d!==null&&(_.updateQueue=d,_.flags|=4),Mr(P,!0),P.tail===null&&P.tailMode==="hidden"&&!W.alternate&&!ji)return mn(_),null}else 2*_s()-P.renderingStartTime>ba&&$!==1073741824&&(_.flags|=128,I=!0,Mr(P,!1),_.lanes=4194304);P.isBackwards?(W.sibling=_.child,_.child=W):(d=P.last,d!==null?d.sibling=W:_.child=W,P.last=W)}return P.tail!==null?(_=P.tail,P.rendering=_,P.tail=_.sibling,P.renderingStartTime=_s(),_.sibling=null,d=ye.current,Ir(ye,I?d&1|2:d&1),_):(mn(_),null);case 22:case 23:return pl(),I=_.memoizedState!==null,d!==null&&d.memoizedState!==null!==I&&(_.flags|=8192),I&&_.mode&1?Ao&1073741824&&(mn(_),ze&&_.subtreeFlags&6&&(_.flags|=8192)):mn(_),null;case 24:return null;case 25:return null}throw Error(l(156,_.tag))}var cl=u.ReactCurrentOwner,Ri=!1;function hi(d,_,$,I){_.child=d===null?Uc(_,null,$,I):zc(_,d.child,$,I)}function Zi(d,_,$,I,P){$=$.render;var W=_.ref;return Ci(_,P),I=qn(d,_,$,I,W,P),$=pa(),d!==null&&!Ri?(_.updateQueue=d.updateQueue,_.flags&=-2053,d.lanes&=~P,gi(d,_,P)):(ji&&$&&Fh(_),_.flags|=1,hi(d,_,I,P),_.child)}function ss(d,_,$,I,P){if(d===null){var W=$.type;return typeof W=="function"&&!rc(W)&&W.defaultProps===void 0&&$.compare===null&&$.defaultProps===void 0?(_.tag=15,_.type=W,jc(d,_,W,I,P)):(d=Pl($.type,null,I,_,_.mode,P),d.ref=_.ref,d.return=_,_.child=d)}if(W=d.child,!(d.lanes&P)){var de=W.memoizedProps;if($=$.compare,$=$!==null?$:wr,$(de,I)&&d.ref===_.ref)return gi(d,_,P)}return _.flags|=1,d=vo(W,I),d.ref=_.ref,d.return=_,_.child=d}function jc(d,_,$,I,P){if(d!==null&&wr(d.memoizedProps,I)&&d.ref===_.ref)if(Ri=!1,(d.lanes&P)!==0)d.flags&131072&&(Ri=!0);else return _.lanes=d.lanes,gi(d,_,P);return os(d,_,$,I,P)}function _a(d,_,$){var I=_.pendingProps,P=I.children,W=d!==null?d.memoizedState:null;if(I.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null},Ir(us,Ao),Ao|=$;else if($&1073741824)_.memoizedState={baseLanes:0,cachePool:null},I=W!==null?W.baseLanes:$,Ir(us,Ao),Ao|=I;else return d=W!==null?W.baseLanes|$:$,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:d,cachePool:null},_.updateQueue=null,Ir(us,Ao),Ao|=d,null;else W!==null?(I=W.baseLanes|$,_.memoizedState=null):I=$,Ir(us,Ao),Ao|=I;return hi(d,_,P,$),_.child}function va(d,_){var $=_.ref;(d===null&&$!==null||d!==null&&d.ref!==$)&&(_.flags|=512,_.flags|=2097152)}function os(d,_,$,I,P){var W=gs($)?ws:yr.current;return W=fi(_,W),Ci(_,P),$=qn(d,_,$,I,W,P),I=pa(),d!==null&&!Ri?(_.updateQueue=d.updateQueue,_.flags&=-2053,d.lanes&=~P,gi(d,_,P)):(ji&&I&&Fh(_),_.flags|=1,hi(d,_,$,P),_.child)}function Yc(d,_,$,I,P){if(gs($)){var W=!0;fc(_)}else W=!1;if(Ci(_,P),_.stateNode===null)d!==null&&(d.alternate=null,_.alternate=null,_.flags|=2),Tp(_,$,I),Jl(_,$,I,P),I=!0;else if(d===null){var de=_.stateNode,Oe=_.memoizedProps;de.props=Oe;var Ze=de.context,wt=$.contextType;typeof wt=="object"&&wt!==null?wt=Vn(wt):(wt=gs($)?ws:yr.current,wt=fi(_,wt));var Qt=$.getDerivedStateFromProps,cn=typeof Qt=="function"||typeof de.getSnapshotBeforeUpdate=="function";cn||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(Oe!==I||Ze!==wt)&&Md(_,de,I,wt),Xr=!1;var bn=_.memoizedState;de.state=bn,Zo(_,I,de,P),Ze=_.memoizedState,Oe!==I||bn!==Ze||Pi.current||Xr?(typeof Qt=="function"&&(Bc(_,$,Qt,I),Ze=_.memoizedState),(Oe=Xr||Bf(_,$,Oe,I,bn,Ze,wt))?(cn||typeof de.UNSAFE_componentWillMount!="function"&&typeof de.componentWillMount!="function"||(typeof de.componentWillMount=="function"&&de.componentWillMount(),typeof de.UNSAFE_componentWillMount=="function"&&de.UNSAFE_componentWillMount()),typeof de.componentDidMount=="function"&&(_.flags|=4194308)):(typeof de.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=I,_.memoizedState=Ze),de.props=I,de.state=Ze,de.context=wt,I=Oe):(typeof de.componentDidMount=="function"&&(_.flags|=4194308),I=!1)}else{de=_.stateNode,wu(d,_),Oe=_.memoizedProps,wt=_.type===_.elementType?Oe:bi(_.type,Oe),de.props=wt,cn=_.pendingProps,bn=de.context,Ze=$.contextType,typeof Ze=="object"&&Ze!==null?Ze=Vn(Ze):(Ze=gs($)?ws:yr.current,Ze=fi(_,Ze));var Tn=$.getDerivedStateFromProps;(Qt=typeof Tn=="function"||typeof de.getSnapshotBeforeUpdate=="function")||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(Oe!==cn||bn!==Ze)&&Md(_,de,I,Ze),Xr=!1,bn=_.memoizedState,de.state=bn,Zo(_,I,de,P);var gn=_.memoizedState;Oe!==cn||bn!==gn||Pi.current||Xr?(typeof Tn=="function"&&(Bc(_,$,Tn,I),gn=_.memoizedState),(wt=Xr||Bf(_,$,wt,I,bn,gn,Ze)||!1)?(Qt||typeof de.UNSAFE_componentWillUpdate!="function"&&typeof de.componentWillUpdate!="function"||(typeof de.componentWillUpdate=="function"&&de.componentWillUpdate(I,gn,Ze),typeof de.UNSAFE_componentWillUpdate=="function"&&de.UNSAFE_componentWillUpdate(I,gn,Ze)),typeof de.componentDidUpdate=="function"&&(_.flags|=4),typeof de.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof de.componentDidUpdate!="function"||Oe===d.memoizedProps&&bn===d.memoizedState||(_.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||Oe===d.memoizedProps&&bn===d.memoizedState||(_.flags|=1024),_.memoizedProps=I,_.memoizedState=gn),de.props=I,de.state=gn,de.context=Ze,I=wt):(typeof de.componentDidUpdate!="function"||Oe===d.memoizedProps&&bn===d.memoizedState||(_.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||Oe===d.memoizedProps&&bn===d.memoizedState||(_.flags|=1024),I=!1)}return ra(d,_,$,I,W,P)}function ra(d,_,$,I,P,W){va(d,_);var de=(_.flags&128)!==0;if(!I&&!de)return P&&Xs(_,$,!1),gi(d,_,W);I=_.stateNode,cl.current=_;var Oe=de&&typeof $.getDerivedStateFromError!="function"?null:I.render();return _.flags|=1,d!==null&&de?(_.child=zc(_,d.child,null,W),_.child=zc(_,null,Oe,W)):hi(d,_,Oe,W),_.memoizedState=I.state,P&&Xs(_,$,!0),_.child}function Od(d){var _=d.stateNode;_.pendingContext?Na(d,_.pendingContext,_.pendingContext!==_.context):_.context&&Na(d,_.context,!1),xu(d,_.containerInfo)}function Ld(d,_,$,I,P){return zh(),Vu(P),_.flags|=256,hi(d,_,$,I),_.child}var Yh={dehydrated:null,treeContext:null,retryLane:0};function Gs(d){return{baseLanes:d,cachePool:null}}function Kn(d,_,$){var I=_.pendingProps,P=ye.current,W=!1,de=(_.flags&128)!==0,Oe;if((Oe=de)||(Oe=d!==null&&d.memoizedState===null?!1:(P&2)!==0),Oe?(W=!0,_.flags&=-129):(d===null||d.memoizedState!==null)&&(P|=1),Ir(ye,P&1),d===null)return Wu(_),d=_.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(_.mode&1?Nn(d)?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(P=I.children,d=I.fallback,W?(I=_.mode,W=_.child,P={mode:"hidden",children:P},!(I&1)&&W!==null?(W.childLanes=0,W.pendingProps=P):W=uu(P,I,0,null),d=Xa(d,I,$,null),W.return=_,d.return=_,W.sibling=d,_.child=W,_.child.memoizedState=Gs($),_.memoizedState=Yh,d):Ws(_,P));if(P=d.memoizedState,P!==null){if(Oe=P.dehydrated,Oe!==null){if(de)return _.flags&256?(_.flags&=-257,iu(d,_,$,Error(l(422)))):_.memoizedState!==null?(_.child=d.child,_.flags|=128,null):(W=I.fallback,P=_.mode,I=uu({mode:"visible",children:I.children},P,0,null),W=Xa(W,P,$,null),W.flags|=2,I.return=_,W.return=_,I.sibling=W,_.child=I,_.mode&1&&zc(_,d.child,null,$),_.child.memoizedState=Gs($),_.memoizedState=Yh,W);if(!(_.mode&1))_=iu(d,_,$,null);else if(Nn(Oe))_=iu(d,_,$,Error(l(419)));else if(I=($&d.childLanes)!==0,Ri||I){if(I=Nr,I!==null){switch($&-$){case 4:W=2;break;case 16:W=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:W=32;break;case 536870912:W=268435456;break;default:W=0}I=W&(I.suspendedLanes|$)?0:W,I!==0&&I!==P.retryLane&&(P.retryLane=I,Ya(d,I,-1))}qc(),_=iu(d,_,$,Error(l(421)))}else sn(Oe)?(_.flags|=128,_.child=d.child,_=go.bind(null,d),De(Oe,_),_=null):($=P.treeContext,He&&(Sr=Vt(Oe),Ai=_,ji=!0,Eu=null,fa=!1,$!==null&&(ci[Er++]=Fa,ci[Er++]=zo,ci[Er++]=oo,Fa=$.id,zo=$.overflow,oo=_)),_=Ws(_,_.pendingProps.children),_.flags|=4096);return _}return W?(I=Ui(d,_,I.children,I.fallback,$),W=_.child,P=d.child.memoizedState,W.memoizedState=P===null?Gs($):{baseLanes:P.baseLanes|$,cachePool:null},W.childLanes=d.childLanes&~$,_.memoizedState=Yh,I):($=Js(d,_,I.children,$),_.memoizedState=null,$)}return W?(I=Ui(d,_,I.children,I.fallback,$),W=_.child,P=d.child.memoizedState,W.memoizedState=P===null?Gs($):{baseLanes:P.baseLanes|$,cachePool:null},W.childLanes=d.childLanes&~$,_.memoizedState=Yh,I):($=Js(d,_,I.children,$),_.memoizedState=null,$)}function Ws(d,_){return _=uu({mode:"visible",children:_},d.mode,0,null),_.return=d,d.child=_}function Js(d,_,$,I){var P=d.child;return d=P.sibling,$=vo(P,{mode:"visible",children:$}),!(_.mode&1)&&($.lanes=I),$.return=_,$.sibling=null,d!==null&&(I=_.deletions,I===null?(_.deletions=[d],_.flags|=16):I.push(d)),_.child=$}function Ui(d,_,$,I,P){var W=_.mode;d=d.child;var de=d.sibling,Oe={mode:"hidden",children:$};return!(W&1)&&_.child!==d?($=_.child,$.childLanes=0,$.pendingProps=Oe,_.deletions=null):($=vo(d,Oe),$.subtreeFlags=d.subtreeFlags&14680064),de!==null?I=vo(de,I):(I=Xa(I,W,P,null),I.flags|=2),I.return=_,$.return=_,$.sibling=I,_.child=$,I}function iu(d,_,$,I){return I!==null&&Vu(I),zc(_,d.child,null,$),d=Ws(_,_.pendingProps.children),d.flags|=2,_.memoizedState=null,d}function Uo(d,_,$){d.lanes|=_;var I=d.alternate;I!==null&&(I.lanes|=_),Bi(d.return,_,$)}function xn(d,_,$,I,P){var W=d.memoizedState;W===null?d.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:I,tail:$,tailMode:P}:(W.isBackwards=_,W.rendering=null,W.renderingStartTime=0,W.last=I,W.tail=$,W.tailMode=P)}function mi(d,_,$){var I=_.pendingProps,P=I.revealOrder,W=I.tail;if(hi(d,_,I.children,$),I=ye.current,I&2)I=I&1|2,_.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=_.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Uo(d,$,_);else if(d.tag===19)Uo(d,$,_);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===_)break e;for(;d.sibling===null;){if(d.return===null||d.return===_)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}I&=1}if(Ir(ye,I),!(_.mode&1))_.memoizedState=null;else switch(P){case"forwards":for($=_.child,P=null;$!==null;)d=$.alternate,d!==null&&je(d)===null&&(P=$),$=$.sibling;$=P,$===null?(P=_.child,_.child=null):(P=$.sibling,$.sibling=null),xn(_,!1,P,$,W);break;case"backwards":for($=null,P=_.child,_.child=null;P!==null;){if(d=P.alternate,d!==null&&je(d)===null){_.child=P;break}d=P.sibling,P.sibling=$,$=P,P=d}xn(_,!0,$,null,W);break;case"together":xn(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function gi(d,_,$){if(d!==null&&(_.dependencies=d.dependencies),qu|=_.lanes,!($&_.childLanes))return null;if(d!==null&&_.child!==d.child)throw Error(l(153));if(_.child!==null){for(d=_.child,$=vo(d,d.pendingProps),_.child=$,$.return=_;d.sibling!==null;)d=d.sibling,$=$.sibling=vo(d,d.pendingProps),$.return=_;$.sibling=null}return _.child}function Uf(d,_,$){switch(_.tag){case 3:Od(_),zh();break;case 5:Ad(_);break;case 1:gs(_.type)&&fc(_);break;case 4:xu(_,_.stateNode.containerInfo);break;case 10:Su(_,_.type._context,_.memoizedProps.value);break;case 13:var I=_.memoizedState;if(I!==null)return I.dehydrated!==null?(Ir(ye,ye.current&1),_.flags|=128,null):$&_.child.childLanes?Kn(d,_,$):(Ir(ye,ye.current&1),d=gi(d,_,$),d!==null?d.sibling:null);Ir(ye,ye.current&1);break;case 19:if(I=($&_.childLanes)!==0,d.flags&128){if(I)return mi(d,_,$);_.flags|=128}var P=_.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Ir(ye,ye.current),I)break;return null;case 22:case 23:return _.lanes=0,_a(d,_,$)}return gi(d,_,$)}function wh(d,_){switch(Wr(_),_.tag){case 1:return gs(_.type)&&tl(),d=_.flags,d&65536?(_.flags=d&-65537|128,_):null;case 3:return bh(),An(Pi),An(yr),Ot(),d=_.flags,d&65536&&!(d&128)?(_.flags=d&-65537|128,_):null;case 5:return pi(_),null;case 13:if(An(ye),d=_.memoizedState,d!==null&&d.dehydrated!==null){if(_.alternate===null)throw Error(l(340));zh()}return d=_.flags,d&65536?(_.flags=d&-65537|128,_):null;case 19:return An(ye),null;case 4:return bh(),null;case 10:return sl(_.type._context),null;case 22:case 23:return pl(),null;case 24:return null;default:return null}}var co=!1,ya=!1,Cn=typeof WeakSet=="function"?WeakSet:Set,yn=null;function hl(d,_){var $=d.ref;if($!==null)if(typeof $=="function")try{$(null)}catch(I){Qs(d,_,I)}else $.current=null}function _c(d,_,$){try{$()}catch(I){Qs(d,_,I)}}var wp=!1;function su(d,_){for(re(d.containerInfo),yn=_;yn!==null;)if(d=yn,_=d.child,(d.subtreeFlags&1028)!==0&&_!==null)_.return=d,yn=_;else for(;yn!==null;){d=yn;try{var $=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if($!==null){var I=$.memoizedProps,P=$.memoizedState,W=d.stateNode,de=W.getSnapshotBeforeUpdate(d.elementType===d.type?I:bi(d.type,I),P);W.__reactInternalSnapshotBeforeUpdate=de}break;case 3:ze&&On(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(Oe){Qs(d,d.return,Oe)}if(_=d.sibling,_!==null){_.return=d.return,yn=_;break}yn=d.return}return $=wp,wp=!1,$}function Co(d,_,$){var I=_.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var P=I=I.next;do{if((P.tag&d)===d){var W=P.destroy;P.destroy=void 0,W!==void 0&&_c(_,$,W)}P=P.next}while(P!==I)}}function ys(d,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var $=_=_.next;do{if(($.tag&d)===d){var I=$.create;$.destroy=I()}$=$.next}while($!==_)}}function dl(d){var _=d.ref;if(_!==null){var $=d.stateNode;switch(d.tag){case 5:d=ge($);break;default:d=$}typeof _=="function"?_(d):_.current=d}}function as(d,_,$){if(yu&&typeof yu.onCommitFiberUnmount=="function")try{yu.onCommitFiberUnmount(ca,_)}catch{}switch(_.tag){case 0:case 11:case 14:case 15:if(d=_.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var I=d=d.next;do{var P=I,W=P.destroy;P=P.tag,W!==void 0&&(P&2||P&4)&&_c(_,$,W),I=I.next}while(I!==d)}break;case 1:if(hl(_,$),d=_.stateNode,typeof d.componentWillUnmount=="function")try{d.props=_.memoizedProps,d.state=_.memoizedState,d.componentWillUnmount()}catch(de){Qs(_,$,de)}break;case 5:hl(_,$);break;case 4:ze?Kh(d,_,$):Ce&&Ce&&(_=_.stateNode.containerInfo,$=Pr(_),gr(_,$))}}function fl(d,_,$){for(var I=_;;)if(as(d,I,$),I.child===null||ze&&I.tag===4){if(I===_)break;for(;I.sibling===null;){if(I.return===null||I.return===_)return;I=I.return}I.sibling.return=I.return,I=I.sibling}else I.child.return=I,I=I.child}function Ho(d){var _=d.alternate;_!==null&&(d.alternate=null,Ho(_)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(_=d.stateNode,_!==null&&kt(_)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function Xh(d){return d.tag===5||d.tag===3||d.tag===4}function Wa(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||Xh(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function ki(d){if(ze){e:{for(var _=d.return;_!==null;){if(Xh(_))break e;_=_.return}throw Error(l(160))}var $=_;switch($.tag){case 5:_=$.stateNode,$.flags&32&&(Ge(_),$.flags&=-33),$=Wa(d),Xc(d,$,_);break;case 3:case 4:_=$.stateNode.containerInfo,$=Wa(d),Nd(d,$,_);break;default:throw Error(l(161))}}}function Nd(d,_,$){var I=d.tag;if(I===5||I===6)d=d.stateNode,_?ke($,d,_):Ke($,d);else if(I!==4&&(d=d.child,d!==null))for(Nd(d,_,$),d=d.sibling;d!==null;)Nd(d,_,$),d=d.sibling}function Xc(d,_,$){var I=d.tag;if(I===5||I===6)d=d.stateNode,_?me($,d,_):pt($,d);else if(I!==4&&(d=d.child,d!==null))for(Xc(d,_,$),d=d.sibling;d!==null;)Xc(d,_,$),d=d.sibling}function Kh(d,_,$){for(var I=_,P=!1,W,de;;){if(!P){P=I.return;e:for(;;){if(P===null)throw Error(l(160));switch(W=P.stateNode,P.tag){case 5:de=!1;break e;case 3:W=W.containerInfo,de=!0;break e;case 4:W=W.containerInfo,de=!0;break e}P=P.return}P=!0}if(I.tag===5||I.tag===6)fl(d,I,$),de?Wt(W,I.stateNode):Xe(W,I.stateNode);else if(I.tag===18)de?Ss(W,I.stateNode):Yr(W,I.stateNode);else if(I.tag===4){if(I.child!==null){W=I.stateNode.containerInfo,de=!0,I.child.return=I,I=I.child;continue}}else if(as(d,I,$),I.child!==null){I.child.return=I,I=I.child;continue}if(I===_)break;for(;I.sibling===null;){if(I.return===null||I.return===_)return;I=I.return,I.tag===4&&(P=!1)}I.sibling.return=I.return,I=I.sibling}}function Go(d,_){if(ze){switch(_.tag){case 0:case 11:case 14:case 15:Co(3,_,_.return),ys(3,_),Co(5,_,_.return);return;case 1:return;case 5:var $=_.stateNode;if($!=null){var I=_.memoizedProps;d=d!==null?d.memoizedProps:I;var P=_.type,W=_.updateQueue;_.updateQueue=null,W!==null&&te($,W,P,d,I,_)}return;case 6:if(_.stateNode===null)throw Error(l(162));$=_.memoizedProps,Le(_.stateNode,d!==null?d.memoizedProps:$,$);return;case 3:He&&d!==null&&d.memoizedState.isDehydrated&&oi(_.stateNode.containerInfo);return;case 12:return;case 13:Mo(_);return;case 19:Mo(_);return;case 17:return}throw Error(l(163))}switch(_.tag){case 0:case 11:case 14:case 15:Co(3,_,_.return),ys(3,_),Co(5,_,_.return);return;case 12:return;case 13:Mo(_);return;case 19:Mo(_);return;case 3:He&&d!==null&&d.memoizedState.isDehydrated&&oi(_.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ce){switch(_.tag){case 1:case 5:case 6:break e;case 3:case 4:_=_.stateNode,gr(_.containerInfo,_.pendingChildren);break e}throw Error(l(163))}}function Mo(d){var _=d.updateQueue;if(_!==null){d.updateQueue=null;var $=d.stateNode;$===null&&($=d.stateNode=new Cn),_.forEach(function(I){var P=Iu.bind(null,d,I);$.has(I)||($.add(I),I.then(P,P))})}}function df(d,_){for(yn=_;yn!==null;){_=yn;var $=_.deletions;if($!==null)for(var I=0;I<$.length;I++){var P=$[I];try{var W=d;ze?Kh(W,P,_):fl(W,P,_);var de=P.alternate;de!==null&&(de.return=null),P.return=null}catch(on){Qs(P,_,on)}}if($=_.child,_.subtreeFlags&12854&&$!==null)$.return=_,yn=$;else for(;yn!==null;){_=yn;try{var Oe=_.flags;if(Oe&32&&ze&&Ge(_.stateNode),Oe&512){var Ze=_.alternate;if(Ze!==null){var wt=Ze.ref;wt!==null&&(typeof wt=="function"?wt(null):wt.current=null)}}if(Oe&8192)switch(_.tag){case 13:if(_.memoizedState!==null){var Qt=_.alternate;(Qt===null||Qt.memoizedState===null)&&(vd=_s())}break;case 22:var cn=_.memoizedState!==null,bn=_.alternate,Tn=bn!==null&&bn.memoizedState!==null;if($=_,ze){e:if(I=$,P=cn,W=null,ze)for(var gn=I;;){if(gn.tag===5){if(W===null){W=gn;var Dr=gn.stateNode;P?tn(Dr):Jt(gn.stateNode,gn.memoizedProps)}}else if(gn.tag===6){if(W===null){var Tt=gn.stateNode;P?_t(Tt):Kt(Tt,gn.memoizedProps)}}else if((gn.tag!==22&&gn.tag!==23||gn.memoizedState===null||gn===I)&&gn.child!==null){gn.child.return=gn,gn=gn.child;continue}if(gn===I)break;for(;gn.sibling===null;){if(gn.return===null||gn.return===I)break e;W===gn&&(W=null),gn=gn.return}W===gn&&(W=null),gn.sibling.return=gn.return,gn=gn.sibling}}if(cn&&!Tn&&$.mode&1){yn=$;for(var Me=$.child;Me!==null;){for($=yn=Me;yn!==null;){I=yn;var Ne=I.child;switch(I.tag){case 0:case 11:case 14:case 15:Co(4,I,I.return);break;case 1:hl(I,I.return);var st=I.stateNode;if(typeof st.componentWillUnmount=="function"){var Ht=I.return;try{st.props=I.memoizedProps,st.state=I.memoizedState,st.componentWillUnmount()}catch(on){Qs(I,Ht,on)}}break;case 5:hl(I,I.return);break;case 22:if(I.memoizedState!==null){vc($);continue}}Ne!==null?(Ne.return=I,yn=Ne):vc($)}Me=Me.sibling}}}switch(Oe&4102){case 2:ki(_),_.flags&=-3;break;case 6:ki(_),_.flags&=-3,Go(_.alternate,_);break;case 4096:_.flags&=-4097;break;case 4100:_.flags&=-4097,Go(_.alternate,_);break;case 4:Go(_.alternate,_)}}catch(on){Qs(_,_.return,on)}if($=_.sibling,$!==null){$.return=_.return,yn=$;break}yn=_.return}}}function Cu(d,_,$){yn=d,Ol(d)}function Ol(d,_,$){for(var I=(d.mode&1)!==0;yn!==null;){var P=yn,W=P.child;if(P.tag===22&&I){var de=P.memoizedState!==null||co;if(!de){var Oe=P.alternate,Ze=Oe!==null&&Oe.memoizedState!==null||ya;Oe=co;var wt=ya;if(co=de,(ya=Ze)&&!wt)for(yn=P;yn!==null;)de=yn,Ze=de.child,de.tag===22&&de.memoizedState!==null?Kr(P):Ze!==null?(Ze.return=de,yn=Ze):Kr(P);for(;W!==null;)yn=W,Ol(W),W=W.sibling;yn=P,co=Oe,ya=wt}_d(d)}else P.subtreeFlags&8772&&W!==null?(W.return=P,yn=W):_d(d)}}function _d(d){for(;yn!==null;){var _=yn;if(_.flags&8772){var $=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:ya||ys(5,_);break;case 1:var I=_.stateNode;if(_.flags&4&&!ya)if($===null)I.componentDidMount();else{var P=_.elementType===_.type?$.memoizedProps:bi(_.type,$.memoizedProps);I.componentDidUpdate(P,$.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var W=_.updateQueue;W!==null&&fd(_,W,I);break;case 3:var de=_.updateQueue;if(de!==null){if($=null,_.child!==null)switch(_.child.tag){case 5:$=ge(_.child.stateNode);break;case 1:$=_.child.stateNode}fd(_,de,$)}break;case 5:var Oe=_.stateNode;$===null&&_.flags&4&&Q(Oe,_.type,_.memoizedProps,_);break;case 6:break;case 4:break;case 12:break;case 13:if(He&&_.memoizedState===null){var Ze=_.alternate;if(Ze!==null){var wt=Ze.memoizedState;if(wt!==null){var Qt=wt.dehydrated;Qt!==null&&Br(Qt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(l(163))}ya||_.flags&512&&dl(_)}catch(cn){Qs(_,_.return,cn)}}if(_===d){yn=null;break}if($=_.sibling,$!==null){$.return=_.return,yn=$;break}yn=_.return}}function vc(d){for(;yn!==null;){var _=yn;if(_===d){yn=null;break}var $=_.sibling;if($!==null){$.return=_.return,yn=$;break}yn=_.return}}function Kr(d){for(;yn!==null;){var _=yn;try{switch(_.tag){case 0:case 11:case 15:var $=_.return;try{ys(4,_)}catch(Ze){Qs(_,$,Ze)}break;case 1:var I=_.stateNode;if(typeof I.componentDidMount=="function"){var P=_.return;try{I.componentDidMount()}catch(Ze){Qs(_,P,Ze)}}var W=_.return;try{dl(_)}catch(Ze){Qs(_,W,Ze)}break;case 5:var de=_.return;try{dl(_)}catch(Ze){Qs(_,de,Ze)}}}catch(Ze){Qs(_,_.return,Ze)}if(_===d){yn=null;break}var Oe=_.sibling;if(Oe!==null){Oe.return=_.return,yn=Oe;break}yn=_.return}}var ou=0,Ju=1,ls=2,Va=3,$s=4;if(typeof Symbol=="function"&&Symbol.for){var Cs=Symbol.for;ou=Cs("selector.component"),Ju=Cs("selector.has_pseudo_class"),ls=Cs("selector.role"),Va=Cs("selector.test_id"),$s=Cs("selector.text")}function Kc(d){var _=rt(d);if(_!=null){if(typeof _.memoizedProps["data-testname"]!="string")throw Error(l(364));return _}if(d=mt(d),d===null)throw Error(l(362));return d.stateNode.current}function _i(d,_){switch(_.$$typeof){case ou:if(d.type===_.value)return!0;break;case Ju:e:{_=_.value,d=[d,0];for(var $=0;$<d.length;){var I=d[$++],P=d[$++],W=_[P];if(I.tag!==5||!$e(I)){for(;W!=null&&_i(I,W);)P++,W=_[P];if(P===_.length){_=!0;break e}else for(I=I.child;I!==null;)d.push(I,P),I=I.sibling}}_=!1}return _;case ls:if(d.tag===5&&ht(d.stateNode,_.value))return!0;break;case $s:if((d.tag===5||d.tag===6)&&(d=se(d),d!==null&&0<=d.indexOf(_.value)))return!0;break;case Va:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===_.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function ja(d){switch(d.$$typeof){case ou:return"<"+(V(d.value)||"Unknown")+">";case Ju:return":has("+(ja(d)||"")+")";case ls:return'[role="'+d.value+'"]';case $s:return'"'+d.value+'"';case Va:return'[data-testname="'+d.value+'"]';default:throw Error(l(365))}}function yc(d,_){var $=[];d=[d,0];for(var I=0;I<d.length;){var P=d[I++],W=d[I++],de=_[W];if(P.tag!==5||!$e(P)){for(;de!=null&&_i(P,de);)W++,de=_[W];if(W===_.length)$.push(P);else for(P=P.child;P!==null;)d.push(P,W),P=P.sibling}}return $}function ff(d,_){if(!At)throw Error(l(363));d=Kc(d),d=yc(d,_),_=[],d=Array.from(d);for(var $=0;$<d.length;){var I=d[$++];if(I.tag===5)$e(I)||_.push(I.stateNode);else for(I=I.child;I!==null;)d.push(I),I=I.sibling}return _}var Eh=Math.ceil,ia=u.ReactCurrentDispatcher,Yi=u.ReactCurrentOwner,Pn=u.ReactCurrentBatchConfig,tr=0,Nr=null,ti=null,qr=0,Ao=0,us=kr(0),es=0,au=null,qu=0,bc=0,Qu=0,qs=null,ho=null,vd=0,ba=1/0;function Mu(){ba=_s()+500}var Au=!1,fo=null,po=null,Ll=!1,Wo=null,Zu=0,ec=0,xh=null,$h=-1,Or=0;function bs(){return tr&6?_s():$h!==-1?$h:$h=_s()}function Os(d){return d.mode&1?tr&2&&qr!==0?qr&-qr:Hu.transition!==null?(Or===0&&(d=Qo,Qo<<=1,!(Qo&4194240)&&(Qo=64),Or=d),Or):(d=Tr,d!==0?d:Nt()):1}function Ya(d,_,$){if(50<ec)throw ec=0,xh=null,Error(l(185));var I=Vs(d,_);return I===null?null:(xl(I,_,$),(!(tr&2)||I!==Nr)&&(I===Nr&&(!(tr&2)&&(bc|=_),es===4&&lu(I,qr)),fn(I,$),_===1&&tr===0&&!(d.mode&1)&&(Mu(),Uu&&ha())),I)}function Vs(d,_){d.lanes|=_;var $=d.alternate;for($!==null&&($.lanes|=_),$=d,d=d.return;d!==null;)d.childLanes|=_,$=d.alternate,$!==null&&($.childLanes|=_),$=d,d=d.return;return $.tag===3?$.stateNode:null}function fn(d,_){var $=d.callbackNode;Pc(d,_);var I=Dc(d,d===Nr?qr:0);if(I===0)$!==null&&rl($),d.callbackNode=null,d.callbackPriority=0;else if(_=I&-I,d.callbackPriority!==_){if($!=null&&rl($),_===1)d.tag===0?Da(Nl.bind(null,d)):_h(Nl.bind(null,d)),vt?Mt(function(){tr===0&&ha()}):nl(il,ha),$=null;else{switch(Kl(I)){case 1:$=il;break;case 4:$=Cd;break;case 16:$=io;break;case 536870912:$=zu;break;default:$=io}$=Sc($,Jc.bind(null,d))}d.callbackPriority=_,d.callbackNode=$}}function Jc(d,_){if($h=-1,Or=0,tr&6)throw Error(l(327));var $=d.callbackNode;if(nc()&&d.callbackNode!==$)return null;var I=Dc(d,d===Nr?qr:0);if(I===0)return null;if(I&30||I&d.expiredLanes||_)_=ai(d,I);else{_=I;var P=tr;tr|=2;var W=Jh();(Nr!==d||qr!==_)&&(Mu(),jr(d,_));do try{Qc();break}catch(Oe){tc(d,Oe)}while(!0);$o(),ia.current=W,tr=P,ti!==null?_=0:(Nr=null,qr=0,_=es)}if(_!==0){if(_===2&&(P=El(d),P!==0&&(I=P,_=wn(d,P))),_===1)throw $=au,jr(d,0),lu(d,I),fn(d,_s()),$;if(_===6)lu(d,I);else{if(P=d.current.alternate,!(I&30)&&!Ms(P)&&(_=ai(d,I),_===2&&(W=El(d),W!==0&&(I=W,_=wn(d,W))),_===1))throw $=au,jr(d,0),lu(d,I),fn(d,_s()),$;switch(d.finishedWork=P,d.finishedLanes=I,_){case 0:case 1:throw Error(l(345));case 2:Zc(d,ho);break;case 3:if(lu(d,I),(I&130023424)===I&&(_=vd+500-_s(),10<_)){if(Dc(d,0)!==0)break;if(P=d.suspendedLanes,(P&I)!==I){bs(),d.pingedLanes|=d.suspendedLanes&P;break}d.timeoutHandle=Qe(Zc.bind(null,d,ho),_);break}Zc(d,ho);break;case 4:if(lu(d,I),(I&4194240)===I)break;for(_=d.eventTimes,P=-1;0<I;){var de=31-qo(I);W=1<<de,de=_[de],de>P&&(P=de),I&=~W}if(I=P,I=_s()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*Eh(I/1960))-I,10<I){d.timeoutHandle=Qe(Zc.bind(null,d,ho),I);break}Zc(d,ho);break;case 5:Zc(d,ho);break;default:throw Error(l(329))}}}return fn(d,_s()),d.callbackNode===$?Jc.bind(null,d):null}function wn(d,_){var $=qs;return d.current.memoizedState.isDehydrated&&(jr(d,_).flags|=256),d=ai(d,_),d!==2&&(_=ho,ho=$,_!==null&&vi(_)),d}function vi(d){ho===null?ho=d:ho.push.apply(ho,d)}function Ms(d){for(var _=d;;){if(_.flags&16384){var $=_.updateQueue;if($!==null&&($=$.stores,$!==null))for(var I=0;I<$.length;I++){var P=$[I],W=P.getSnapshot;P=P.value;try{if(!Es(W(),P))return!1}catch{return!1}}}if($=_.child,_.subtreeFlags&16384&&$!==null)$.return=_,_=$;else{if(_===d)break;for(;_.sibling===null;){if(_.return===null||_.return===d)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function lu(d,_){for(_&=~Qu,_&=~bc,d.suspendedLanes|=_,d.pingedLanes&=~_,d=d.expirationTimes;0<_;){var $=31-qo(_),I=1<<$;d[$]=-1,_&=~I}}function Nl(d){if(tr&6)throw Error(l(327));nc();var _=Dc(d,0);if(!(_&1))return fn(d,_s()),null;var $=ai(d,_);if(d.tag!==0&&$===2){var I=El(d);I!==0&&(_=I,$=wn(d,I))}if($===1)throw $=au,jr(d,0),lu(d,_),fn(d,_s()),$;if($===6)throw Error(l(345));return d.finishedWork=d.current.alternate,d.finishedLanes=_,Zc(d,ho),fn(d,_s()),null}function Ft(d){Wo!==null&&Wo.tag===0&&!(tr&6)&&nc();var _=tr;tr|=1;var $=Pn.transition,I=Tr;try{if(Pn.transition=null,Tr=1,d)return d()}finally{Tr=I,Pn.transition=$,tr=_,!(tr&6)&&ha()}}function pl(){Ao=us.current,An(us)}function jr(d,_){d.finishedWork=null,d.finishedLanes=0;var $=d.timeoutHandle;if($!==ft&&(d.timeoutHandle=ft,nt($)),ti!==null)for($=ti.return;$!==null;){var I=$;switch(Wr(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&tl();break;case 3:bh(),An(Pi),An(yr),Ot();break;case 5:pi(I);break;case 4:bh();break;case 13:An(ye);break;case 19:An(ye);break;case 10:sl(I.type._context);break;case 22:case 23:pl()}$=$.return}if(Nr=d,ti=d=vo(d.current,null),qr=Ao=_,es=0,au=null,Qu=bc=qu=0,ho=qs=null,Mi!==null){for(_=0;_<Mi.length;_++)if($=Mi[_],I=$.interleaved,I!==null){$.interleaved=null;var P=I.next,W=$.pending;if(W!==null){var de=W.next;W.next=P,I.next=de}$.pending=I}Mi=null}return d}function tc(d,_){do{var $=ti;try{if($o(),rn.current=Xu,Ti){for(var I=vn.memoizedState;I!==null;){var P=I.queue;P!==null&&(P.pending=null),I=I.next}Ti=!1}if(Jn=0,ao=zr=vn=null,lo=!1,al=0,Yi.current=null,$===null||$.return===null){es=1,au=_,ti=null;break}e:{var W=d,de=$.return,Oe=$,Ze=_;if(_=qr,Oe.flags|=32768,Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var wt=Ze,Qt=Oe,cn=Qt.tag;if(!(Qt.mode&1)&&(cn===0||cn===11||cn===15)){var bn=Qt.alternate;bn?(Qt.updateQueue=bn.updateQueue,Qt.memoizedState=bn.memoizedState,Qt.lanes=bn.lanes):(Qt.updateQueue=null,Qt.memoizedState=null)}var Tn=kd(de);if(Tn!==null){Tn.flags&=-257,Ga(Tn,de,Oe,W,_),Tn.mode&1&&gc(W,wt,_),_=Tn,Ze=wt;var gn=_.updateQueue;if(gn===null){var Dr=new Set;Dr.add(Ze),_.updateQueue=Dr}else gn.add(Ze);break e}else{if(!(_&1)){gc(W,wt,_),qc();break e}Ze=Error(l(426))}}else if(ji&&Oe.mode&1){var Tt=kd(de);if(Tt!==null){!(Tt.flags&65536)&&(Tt.flags|=256),Ga(Tt,de,Oe,W,_),Vu(Ze);break e}}W=Ze,es!==4&&(es=2),qs===null?qs=[W]:qs.push(W),Ze=na(Ze,Oe),Oe=de;do{switch(Oe.tag){case 3:Oe.flags|=65536,_&=-_,Oe.lanes|=_;var Me=kl(Oe,Ze,_);fr(Oe,Me);break e;case 1:W=Ze;var Ne=Oe.type,st=Oe.stateNode;if(!(Oe.flags&128)&&(typeof Ne.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(po===null||!po.has(st)))){Oe.flags|=65536,_&=-_,Oe.lanes|=_;var Ht=Vc(Oe,W,_);fr(Oe,Ht);break e}}Oe=Oe.return}while(Oe!==null)}ml($)}catch(on){_=on,ti===$&&$!==null&&(ti=$=$.return);continue}break}while(!0)}function Jh(){var d=ia.current;return ia.current=Xu,d===null?Xu:d}function qc(){(es===0||es===3||es===2)&&(es=4),Nr===null||!(qu&268435455)&&!(bc&268435455)||lu(Nr,qr)}function ai(d,_){var $=tr;tr|=2;var I=Jh();Nr===d&&qr===_||jr(d,_);do try{Xi();break}catch(P){tc(d,P)}while(!0);if($o(),tr=$,ia.current=I,ti!==null)throw Error(l(261));return Nr=null,qr=0,es}function Xi(){for(;ti!==null;)mo(ti)}function Qc(){for(;ti!==null&&!vu();)mo(ti)}function mo(d){var _=eh(d.alternate,d,Ao);d.memoizedProps=d.pendingProps,_===null?ml(d):ti=_,Yi.current=null}function ml(d){var _=d;do{var $=_.alternate;if(d=_.return,_.flags&32768){if($=wh($,_),$!==null){$.flags&=32767,ti=$;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{es=6,ti=null;return}}else if($=zf($,_,Ao),$!==null){ti=$;return}if(_=_.sibling,_!==null){ti=_;return}ti=_=d}while(_!==null);es===0&&(es=5)}function Zc(d,_){var $=Tr,I=Pn.transition;try{Pn.transition=null,Tr=1,Tc(d,_,$)}finally{Pn.transition=I,Tr=$}return null}function Tc(d,_,$){do nc();while(Wo!==null);if(tr&6)throw Error(l(327));var I=d.finishedWork,P=d.finishedLanes;if(I===null)return null;if(d.finishedWork=null,d.finishedLanes=0,I===d.current)throw Error(l(177));d.callbackNode=null,d.callbackPriority=0;var W=I.lanes|I.childLanes;if($l(d,W),d===Nr&&(ti=Nr=null,qr=0),!(I.subtreeFlags&2064)&&!(I.flags&2064)||Ll||(Ll=!0,Sc(io,function(){return nc(),null})),W=(I.flags&15990)!==0,I.subtreeFlags&15990||W){W=Pn.transition,Pn.transition=null;var de=Tr;Tr=1;var Oe=tr;tr|=4,Yi.current=null,su(d,I),df(d,I),ie(d.containerInfo),d.current=I,Cu(I),qi(),tr=Oe,Tr=de,Pn.transition=W}else d.current=I;if(Ll&&(Ll=!1,Wo=d,Zu=P),W=d.pendingLanes,W===0&&(po=null),or(I.stateNode),fn(d,_s()),_!==null)for($=d.onRecoverableError,I=0;I<_.length;I++)$(_[I]);if(Au)throw Au=!1,d=fo,fo=null,d;return Zu&1&&d.tag!==0&&nc(),W=d.pendingLanes,W&1?d===xh?ec++:(ec=0,xh=d):ec=0,ha(),null}function nc(){if(Wo!==null){var d=Kl(Zu),_=Pn.transition,$=Tr;try{if(Pn.transition=null,Tr=16>d?16:d,Wo===null)var I=!1;else{if(d=Wo,Wo=null,Zu=0,tr&6)throw Error(l(331));var P=tr;for(tr|=4,yn=d.current;yn!==null;){var W=yn,de=W.child;if(yn.flags&16){var Oe=W.deletions;if(Oe!==null){for(var Ze=0;Ze<Oe.length;Ze++){var wt=Oe[Ze];for(yn=wt;yn!==null;){var Qt=yn;switch(Qt.tag){case 0:case 11:case 15:Co(8,Qt,W)}var cn=Qt.child;if(cn!==null)cn.return=Qt,yn=cn;else for(;yn!==null;){Qt=yn;var bn=Qt.sibling,Tn=Qt.return;if(Ho(Qt),Qt===wt){yn=null;break}if(bn!==null){bn.return=Tn,yn=bn;break}yn=Tn}}}var gn=W.alternate;if(gn!==null){var Dr=gn.child;if(Dr!==null){gn.child=null;do{var Tt=Dr.sibling;Dr.sibling=null,Dr=Tt}while(Dr!==null)}}yn=W}}if(W.subtreeFlags&2064&&de!==null)de.return=W,yn=de;else e:for(;yn!==null;){if(W=yn,W.flags&2048)switch(W.tag){case 0:case 11:case 15:Co(9,W,W.return)}var Me=W.sibling;if(Me!==null){Me.return=W.return,yn=Me;break e}yn=W.return}}var Ne=d.current;for(yn=Ne;yn!==null;){de=yn;var st=de.child;if(de.subtreeFlags&2064&&st!==null)st.return=de,yn=st;else e:for(de=Ne;yn!==null;){if(Oe=yn,Oe.flags&2048)try{switch(Oe.tag){case 0:case 11:case 15:ys(9,Oe)}}catch(on){Qs(Oe,Oe.return,on)}if(Oe===de){yn=null;break e}var Ht=Oe.sibling;if(Ht!==null){Ht.return=Oe.return,yn=Ht;break e}yn=Oe.return}}if(tr=P,ha(),yu&&typeof yu.onPostCommitFiberRoot=="function")try{yu.onPostCommitFiberRoot(ca,d)}catch{}I=!0}return I}finally{Tr=$,Pn.transition=_}}return!1}function Io(d,_,$){_=na($,_),_=kl(d,_,1),Pa(d,_),_=bs(),d=Vs(d,1),d!==null&&(xl(d,1,_),fn(d,_))}function Qs(d,_,$){if(d.tag===3)Io(d,d,$);else for(;_!==null;){if(_.tag===3){Io(_,d,$);break}else if(_.tag===1){var I=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(po===null||!po.has(I))){d=na($,d),d=Vc(_,d,1),Pa(_,d),d=bs(),_=Vs(_,1),_!==null&&(xl(_,1,d),fn(_,d));break}}_=_.return}}function sa(d,_,$){var I=d.pingCache;I!==null&&I.delete(_),_=bs(),d.pingedLanes|=d.suspendedLanes&$,Nr===d&&(qr&$)===$&&(es===4||es===3&&(qr&130023424)===qr&&500>_s()-vd?jr(d,0):Qu|=$),fn(d,_)}function Ch(d,_){_===0&&(d.mode&1?(_=vr,vr<<=1,!(vr&130023424)&&(vr=4194304)):_=1);var $=bs();d=Vs(d,_),d!==null&&(xl(d,_,$),fn(d,$))}function go(d){var _=d.memoizedState,$=0;_!==null&&($=_.retryLane),Ch(d,$)}function Iu(d,_){var $=0;switch(d.tag){case 13:var I=d.stateNode,P=d.memoizedState;P!==null&&($=P.retryLane);break;case 19:I=d.stateNode;break;default:throw Error(l(314))}I!==null&&I.delete(_),Ch(d,$)}var eh;eh=function(d,_,$){if(d!==null)if(d.memoizedProps!==_.pendingProps||Pi.current)Ri=!0;else{if(!(d.lanes&$)&&!(_.flags&128))return Ri=!1,Uf(d,_,$);Ri=!!(d.flags&131072)}else Ri=!1,ji&&_.flags&1048576&&Ql(_,Ba,_.index);switch(_.lanes=0,_.tag){case 2:var I=_.type;d!==null&&(d.alternate=null,_.alternate=null,_.flags|=2),d=_.pendingProps;var P=fi(_,yr.current);Ci(_,$),P=qn(null,_,I,d,P,$);var W=pa();return _.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,gs(I)?(W=!0,fc(_)):W=!1,_.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,dd(_),P.updater=uf,_.stateNode=P,P._reactInternals=_,Jl(_,I,d,$),_=ra(null,_,I,!0,W,$)):(_.tag=0,ji&&W&&Fh(_),hi(null,_,P,$),_=_.child),_;case 16:I=_.elementType;e:{switch(d!==null&&(d.alternate=null,_.alternate=null,_.flags|=2),d=_.pendingProps,P=I._init,I=P(I._payload),_.type=I,P=_.tag=Dl(I),d=bi(I,d),P){case 0:_=os(null,_,I,d,$);break e;case 1:_=Yc(null,_,I,d,$);break e;case 11:_=Zi(null,_,I,d,$);break e;case 14:_=ss(null,_,I,bi(I.type,d),$);break e}throw Error(l(306,I,""))}return _;case 0:return I=_.type,P=_.pendingProps,P=_.elementType===I?P:bi(I,P),os(d,_,I,P,$);case 1:return I=_.type,P=_.pendingProps,P=_.elementType===I?P:bi(I,P),Yc(d,_,I,P,$);case 3:e:{if(Od(_),d===null)throw Error(l(387));I=_.pendingProps,W=_.memoizedState,P=W.element,wu(d,_),Zo(_,I,null,$);var de=_.memoizedState;if(I=de.element,He&&W.isDehydrated)if(W={element:I,isDehydrated:!1,cache:de.cache,transitions:de.transitions},_.updateQueue.baseState=W,_.memoizedState=W,_.flags&256){P=Error(l(423)),_=Ld(d,_,I,$,P);break e}else if(I!==P){P=Error(l(424)),_=Ld(d,_,I,$,P);break e}else for(He&&(Sr=bt(_.stateNode.containerInfo),Ai=_,ji=!0,Eu=null,fa=!1),$=Uc(_,null,I,$),_.child=$;$;)$.flags=$.flags&-3|4096,$=$.sibling;else{if(zh(),I===P){_=gi(d,_,$);break e}hi(d,_,I,$)}_=_.child}return _;case 5:return Ad(_),d===null&&Wu(_),I=_.type,P=_.pendingProps,W=d!==null?d.memoizedProps:null,de=P.children,qe(I,P)?de=null:W!==null&&qe(I,W)&&(_.flags|=32),va(d,_),hi(d,_,de,$),_.child;case 6:return d===null&&Wu(_),null;case 13:return Kn(d,_,$);case 4:return xu(_,_.stateNode.containerInfo),I=_.pendingProps,d===null?_.child=zc(_,null,I,$):hi(d,_,I,$),_.child;case 11:return I=_.type,P=_.pendingProps,P=_.elementType===I?P:bi(I,P),Zi(d,_,I,P,$);case 7:return hi(d,_,_.pendingProps,$),_.child;case 8:return hi(d,_,_.pendingProps.children,$),_.child;case 12:return hi(d,_,_.pendingProps.children,$),_.child;case 10:e:{if(I=_.type._context,P=_.pendingProps,W=_.memoizedProps,de=P.value,Su(_,I,de),W!==null)if(Es(W.value,de)){if(W.children===P.children&&!Pi.current){_=gi(d,_,$);break e}}else for(W=_.child,W!==null&&(W.return=_);W!==null;){var Oe=W.dependencies;if(Oe!==null){de=W.child;for(var Ze=Oe.firstContext;Ze!==null;){if(Ze.context===I){if(W.tag===1){Ze=Vi(-1,$&-$),Ze.tag=2;var wt=W.updateQueue;if(wt!==null){wt=wt.shared;var Qt=wt.pending;Qt===null?Ze.next=Ze:(Ze.next=Qt.next,Qt.next=Ze),wt.pending=Ze}}W.lanes|=$,Ze=W.alternate,Ze!==null&&(Ze.lanes|=$),Bi(W.return,$,_),Oe.lanes|=$;break}Ze=Ze.next}}else if(W.tag===10)de=W.type===_.type?null:W.child;else if(W.tag===18){if(de=W.return,de===null)throw Error(l(341));de.lanes|=$,Oe=de.alternate,Oe!==null&&(Oe.lanes|=$),Bi(de,$,_),de=W.sibling}else de=W.child;if(de!==null)de.return=W;else for(de=W;de!==null;){if(de===_){de=null;break}if(W=de.sibling,W!==null){W.return=de.return,de=W;break}de=de.return}W=de}hi(d,_,P.children,$),_=_.child}return _;case 9:return P=_.type,I=_.pendingProps.children,Ci(_,$),P=Vn(P),I=I(P),_.flags|=1,hi(d,_,I,$),_.child;case 14:return I=_.type,P=bi(I,_.pendingProps),P=bi(I.type,P),ss(d,_,I,P,$);case 15:return jc(d,_,_.type,_.pendingProps,$);case 17:return I=_.type,P=_.pendingProps,P=_.elementType===I?P:bi(I,P),d!==null&&(d.alternate=null,_.alternate=null,_.flags|=2),_.tag=1,gs(I)?(d=!0,fc(_)):d=!1,Ci(_,$),Tp(_,I,P),Jl(_,I,P,$),ra(null,_,I,!0,d,$);case 19:return mi(d,_,$);case 22:return _a(d,_,$)}throw Error(l(156,_.tag))};function Sc(d,_){return nl(d,_)}function Vo(d,_,$,I){this.tag=d,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _o(d,_,$,I){return new Vo(d,_,$,I)}function rc(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Dl(d){if(typeof d=="function")return rc(d)?1:0;if(d!=null){if(d=d.$$typeof,d===M)return 11;if(d===L)return 14}return 2}function vo(d,_){var $=d.alternate;return $===null?($=_o(d.tag,_,d.key,d.mode),$.elementType=d.elementType,$.type=d.type,$.stateNode=d.stateNode,$.alternate=d,d.alternate=$):($.pendingProps=_,$.type=d.type,$.flags=0,$.subtreeFlags=0,$.deletions=null),$.flags=d.flags&14680064,$.childLanes=d.childLanes,$.lanes=d.lanes,$.child=d.child,$.memoizedProps=d.memoizedProps,$.memoizedState=d.memoizedState,$.updateQueue=d.updateQueue,_=d.dependencies,$.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},$.sibling=d.sibling,$.index=d.index,$.ref=d.ref,$}function Pl(d,_,$,I,P,W){var de=2;if(I=d,typeof d=="function")rc(d)&&(de=1);else if(typeof d=="string")de=5;else e:switch(d){case g:return Xa($.children,P,W,_);case y:de=8,P|=8;break;case b:return d=_o(12,$,_,P|2),d.elementType=b,d.lanes=W,d;case A:return d=_o(13,$,_,P),d.elementType=A,d.lanes=W,d;case O:return d=_o(19,$,_,P),d.elementType=O,d.lanes=W,d;case D:return uu($,P,W,_);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case S:de=10;break e;case C:de=9;break e;case M:de=11;break e;case L:de=14;break e;case B:de=16,I=null;break e}throw Error(l(130,d==null?d:typeof d,""))}return _=_o(de,$,_,P),_.elementType=d,_.type=I,_.lanes=W,_}function Xa(d,_,$,I){return d=_o(7,d,I,_),d.lanes=$,d}function uu(d,_,$,I){return d=_o(22,d,I,_),d.elementType=D,d.lanes=$,d.stateNode={},d}function ni(d,_,$){return d=_o(6,d,null,_),d.lanes=$,d}function cs(d,_,$){return _=_o(4,d.children!==null?d.children:[],d.key,_),_.lanes=$,_.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},_}function qh(d,_,$,I,P){this.tag=_,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ft,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_u(0),this.expirationTimes=_u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_u(0),this.identifierPrefix=I,this.onRecoverableError=P,He&&(this.mutableSourceEagerHydrationData=null)}function yd(d,_,$,I,P,W,de,Oe,Ze){return d=new qh(d,_,$,Oe,Ze),_===1?(_=1,W===!0&&(_|=8)):_=0,W=_o(3,null,null,_),d.current=W,W.stateNode=d,W.memoizedState={element:I,isDehydrated:$,cache:null,transitions:null},dd(W),d}function Ta(d){if(!d)return Gr;d=d._reactInternals;e:{if(oe(d)!==d||d.tag!==1)throw Error(l(170));var _=d;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(gs(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(l(171))}if(d.tag===1){var $=d.type;if(gs($))return dc(d,$,_)}return _}function Sa(d){var _=d._reactInternals;if(_===void 0)throw typeof d.render=="function"?Error(l(188)):(d=Object.keys(d).join(","),Error(l(268,d)));return d=q(_),d===null?null:d.stateNode}function Qh(d,_){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var $=d.retryLane;d.retryLane=$!==0&&$<_?$:_}}function wc(d,_){Qh(d,_),(d=d.alternate)&&Qh(d,_)}function Hf(d){return d=q(d),d===null?null:d.stateNode}function x(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var _=bs();Ya(d,134217728,_),wc(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var _=bs(),$=Os(d);Ya(d,$,_),wc(d,$)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var _=d.stateNode;if(_.current.memoizedState.isDehydrated){var $=xi(_.pendingLanes);$!==0&&(br(_,$|1),fn(_,_s()),!(tr&6)&&(Mu(),ha()))}break;case 13:var I=bs();Ft(function(){return Ya(d,1,I)}),wc(d,1)}},t.batchedUpdates=function(d,_){var $=tr;tr|=1;try{return d(_)}finally{tr=$,tr===0&&(Mu(),Uu&&ha())}},t.createComponentSelector=function(d){return{$$typeof:ou,value:d}},t.createContainer=function(d,_,$,I,P,W,de){return yd(d,_,!1,null,$,I,P,W,de)},t.createHasPseudoClassSelector=function(d){return{$$typeof:Ju,value:d}},t.createHydrationContainer=function(d,_,$,I,P,W,de,Oe,Ze){return d=yd($,I,!0,d,P,W,de,Oe,Ze),d.context=Ta(null),$=d.current,I=bs(),P=Os($),W=Vi(I,P),W.callback=_??null,Pa($,W),d.current.lanes=P,xl(d,P,I),fn(d,I),d},t.createPortal=function(d,_,$){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:I==null?null:""+I,children:d,containerInfo:_,implementation:$}},t.createRoleSelector=function(d){return{$$typeof:ls,value:d}},t.createTestNameSelector=function(d){return{$$typeof:Va,value:d}},t.createTextSelector=function(d){return{$$typeof:$s,value:d}},t.deferredUpdates=function(d){var _=Tr,$=Pn.transition;try{return Pn.transition=null,Tr=16,d()}finally{Tr=_,Pn.transition=$}},t.discreteUpdates=function(d,_,$,I,P){var W=Tr,de=Pn.transition;try{return Pn.transition=null,Tr=1,d(_,$,I,P)}finally{Tr=W,Pn.transition=de,tr===0&&Mu()}},t.findAllNodes=ff,t.findBoundingRects=function(d,_){if(!At)throw Error(l(363));_=ff(d,_),d=[];for(var $=0;$<_.length;$++)d.push(xe(_[$]));for(_=d.length-1;0<_;_--){$=d[_];for(var I=$.x,P=I+$.width,W=$.y,de=W+$.height,Oe=_-1;0<=Oe;Oe--)if(_!==Oe){var Ze=d[Oe],wt=Ze.x,Qt=wt+Ze.width,cn=Ze.y,bn=cn+Ze.height;if(I>=wt&&W>=cn&&P<=Qt&&de<=bn){d.splice(_,1);break}else if(I!==wt||$.width!==Ze.width||bn<W||cn>de){if(!(W!==cn||$.height!==Ze.height||Qt<I||wt>P)){wt>I&&(Ze.width+=wt-I,Ze.x=I),Qt<P&&(Ze.width=P-wt),d.splice(_,1);break}}else{cn>W&&(Ze.height+=cn-W,Ze.y=W),bn<de&&(Ze.height=de-cn),d.splice(_,1);break}}}return d},t.findHostInstance=Sa,t.findHostInstanceWithNoPortals=function(d){return d=Z(d),d=d!==null?ae(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return Sa(d)},t.flushControlled=function(d){var _=tr;tr|=1;var $=Pn.transition,I=Tr;try{Pn.transition=null,Tr=1,d()}finally{Tr=I,Pn.transition=$,tr=_,tr===0&&(Mu(),ha())}},t.flushPassiveEffects=nc,t.flushSync=Ft,t.focusWithin=function(d,_){if(!At)throw Error(l(363));for(d=Kc(d),_=yc(d,_),_=Array.from(_),d=0;d<_.length;){var $=_[d++];if(!$e($)){if($.tag===5&&St($.stateNode))return!0;for($=$.child;$!==null;)_.push($),$=$.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Tr},t.getFindAllNodesFailureDescription=function(d,_){if(!At)throw Error(l(363));var $=0,I=[];d=[Kc(d),0];for(var P=0;P<d.length;){var W=d[P++],de=d[P++],Oe=_[de];if((W.tag!==5||!$e(W))&&(_i(W,Oe)&&(I.push(ja(Oe)),de++,de>$&&($=de)),de<_.length))for(W=W.child;W!==null;)d.push(W,de),W=W.sibling}if($<_.length){for(d=[];$<_.length;$++)d.push(ja(_[$]));return`findAllNodes was able to match part of the selector:
  `+(I.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return ge(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:Hf,findFiberByHostInstance:d.findFiberByHostInstance||x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(_.isDisabled||!_.supportsFiber)d=!0;else{try{ca=_.inject(d),yu=_}catch{}d=!!_.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,_,$,I){if(!At)throw Error(l(363));d=ff(d,_);var P=It(d,$,I).disconnect;return{disconnect:function(){P()}}},t.registerMutableSourceForHydration=function(d,_){var $=_._getVersion;$=$(_._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[_,$]:d.mutableSourceEagerHydrationData.push(_,$)},t.runWithPriority=function(d,_){var $=Tr;try{return Tr=d,_()}finally{Tr=$}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,_,$,I){var P=_.current,W=bs(),de=Os(P);return $=Ta($),_.context===null?_.context=$:_.pendingContext=$,_=Vi(W,de),_.payload={element:d},I=I===void 0?null:I,I!==null&&(_.callback=I),Pa(P,_),d=Ya(P,de,W),d!==null&&vh(d,P,de),de},t};rJ.exports=Cye;var Mye=rJ.exports;const Aye=Xy(Mye);var iJ={exports:{}},sJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(J,re){var ie=J.length;J.push(re);e:for(;0<ie;){var fe=ie-1>>>1,Te=J[fe];if(0<s(Te,re))J[fe]=re,J[ie]=Te,ie=fe;else break e}}function t(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var re=J[0],ie=J.pop();if(ie!==re){J[0]=ie;e:for(var fe=0,Te=J.length,Fe=Te>>>1;fe<Fe;){var Ie=2*(fe+1)-1,qe=J[Ie],Re=Ie+1,Qe=J[Re];if(0>s(qe,ie))Re<Te&&0>s(Qe,qe)?(J[fe]=Qe,J[Re]=ie,fe=Re):(J[fe]=qe,J[Ie]=ie,fe=Ie);else if(Re<Te&&0>s(Qe,ie))J[fe]=Qe,J[Re]=ie,fe=Re;else break e}}return re}function s(J,re){var ie=J.sortIndex-re.sortIndex;return ie!==0?ie:J.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],g=1,y=null,b=3,S=!1,C=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(J){for(var re=t(f);re!==null;){if(re.callback===null)r(f);else if(re.startTime<=J)r(f),re.sortIndex=re.expirationTime,e(h,re);else break;re=t(f)}}function D(J){if(M=!1,B(J),!C)if(t(h)!==null)C=!0,ge(z);else{var re=t(f);re!==null&&we(D,re.startTime-J)}}function z(J,re){C=!1,M&&(M=!1,O(H),H=-1),S=!0;var ie=b;try{for(B(re),y=t(h);y!==null&&(!(y.expirationTime>re)||J&&!Z());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,b=y.priorityLevel;var Te=fe(y.expirationTime<=re);re=n.unstable_now(),typeof Te=="function"?y.callback=Te:y===t(h)&&r(h),B(re)}else r(h);y=t(h)}if(y!==null)var Fe=!0;else{var Ie=t(f);Ie!==null&&we(D,Ie.startTime-re),Fe=!1}return Fe}finally{y=null,b=ie,S=!1}}var U=!1,V=null,H=-1,oe=5,le=-1;function Z(){return!(n.unstable_now()-le<oe)}function q(){if(V!==null){var J=n.unstable_now();le=J;var re=!0;try{re=V(!0,J)}finally{re?he():(U=!1,V=null)}}else U=!1}var he;if(typeof L=="function")he=function(){L(q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ue=ae.port2;ae.port1.onmessage=q,he=function(){ue.postMessage(null)}}else he=function(){A(q,0)};function ge(J){V=J,U||(U=!0,he())}function we(J,re){H=A(function(){J(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){C||S||(C=!0,ge(z))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var re=3;break;default:re=b}var ie=b;b=re;try{return J()}finally{b=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,re){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ie=b;b=J;try{return re()}finally{b=ie}},n.unstable_scheduleCallback=function(J,re,ie){var fe=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?fe+ie:fe):ie=fe,J){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ie+Te,J={id:g++,callback:re,priorityLevel:J,startTime:ie,expirationTime:Te,sortIndex:-1},ie>fe?(J.sortIndex=ie,e(f,J),t(h)===null&&J===t(f)&&(M?(O(H),H=-1):M=!0,we(D,ie-fe))):(J.sortIndex=Te,e(h,J),C||S||(C=!0,ge(z))),J},n.unstable_shouldYield=Z,n.unstable_wrapCallback=function(J){var re=b;return function(){var ie=b;b=re;try{return J.apply(this,arguments)}finally{b=ie}}}})(sJ);iJ.exports=sJ;var oG=iJ.exports;const Iye=n=>typeof n=="object"&&typeof n.then=="function",w1=[];function oJ(n,e,t=(r,s)=>r===s){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let s=0;s<r;s++)if(!t(n[s],e[s]))return!1;return!0}function aJ(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const o of w1)if(oJ(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return r.lifespan&&r.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,r.lifespan)),o.response;if(!t)throw o.promise}const s={keys:e,equal:r.equal,remove:()=>{const o=w1.indexOf(s);o!==-1&&w1.splice(o,1)},promise:(Iye(n)?n:n(...e)).then(o=>{s.response=o,r.lifespan&&r.lifespan>0&&(s.timeout=setTimeout(s.remove,r.lifespan))}).catch(o=>s.error=o)};if(w1.push(s),!t)throw s.promise}const Rye=(n,e,t)=>aJ(n,e,!1,t),kye=(n,e,t)=>void aJ(n,e,!0,t),Oye=n=>{if(n===void 0||n.length===0)w1.splice(0,w1.length);else{const e=w1.find(t=>oJ(n,t.keys,t.equal));e&&e.remove()}},lJ={};function Lye(n,e){function t(g,{args:y=[],attach:b,...S},C){let M=`${g[0].toUpperCase()}${g.slice(1)}`,A;if(g==="primitive"){if(S.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const O=S.object;A=ax(O,{type:g,root:C,attach:b,primitive:!0})}else{const O=lJ[M];if(!O)throw new Error(`R3F: ${M} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(y))throw new Error("R3F: The args prop must be an array!");A=ax(new O(...y),{type:g,root:C,attach:b,memoizedProps:{args:y}})}return A.__r3f.attach===void 0&&(A instanceof Zy?A.__r3f.attach="geometry":A instanceof Dy&&(A.__r3f.attach="material")),M!=="inject"&&hL(A,S),A}function r(g,y){let b=!1;if(y){var S,C;(S=y.__r3f)!=null&&S.attach?cL(g,y,y.__r3f.attach):y.isObject3D&&g.isObject3D&&(g.add(y),b=!0),b||(C=g.__r3f)==null||C.objects.push(y),y.__r3f||ax(y,{}),y.__r3f.parent=g,qD(y),NS(y)}}function s(g,y,b){let S=!1;if(y){var C,M;if((C=y.__r3f)!=null&&C.attach)cL(g,y,y.__r3f.attach);else if(y.isObject3D&&g.isObject3D){y.parent=g,y.dispatchEvent({type:"added"}),g.dispatchEvent({type:"childadded",child:y});const A=g.children.filter(L=>L!==y),O=A.indexOf(b);g.children=[...A.slice(0,O),y,...A.slice(O)],S=!0}S||(M=g.__r3f)==null||M.objects.push(y),y.__r3f||ax(y,{}),y.__r3f.parent=g,qD(y),NS(y)}}function o(g,y,b=!1){g&&[...g].forEach(S=>l(y,S,b))}function l(g,y,b){if(y){var S,C,M;if(y.__r3f&&(y.__r3f.parent=null),(S=g.__r3f)!=null&&S.objects&&(g.__r3f.objects=g.__r3f.objects.filter(D=>D!==y)),(C=y.__r3f)!=null&&C.attach)hG(g,y,y.__r3f.attach);else if(y.isObject3D&&g.isObject3D){var A;g.remove(y),(A=y.__r3f)!=null&&A.root&&Hye(gI(y),y)}const L=(M=y.__r3f)==null?void 0:M.primitive,B=!L&&(b===void 0?y.dispose!==null:b);if(!L){var O;o((O=y.__r3f)==null?void 0:O.objects,y,B),o(y.children,y,B)}if(delete y.__r3f,B&&y.dispose&&y.type!=="Scene"){const D=()=>{try{y.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?oG.unstable_scheduleCallback(oG.unstable_IdlePriority,D):D()}NS(g)}}function u(g,y,b,S){var C;const M=(C=g.__r3f)==null?void 0:C.parent;if(!M)return;const A=t(y,b,g.__r3f.root);if(g.children){for(const O of g.children)O.__r3f&&r(A,O);g.children=g.children.filter(O=>!O.__r3f)}g.__r3f.objects.forEach(O=>r(A,O)),g.__r3f.objects=[],g.__r3f.autoRemovedBeforeAppend||l(M,g),A.parent&&(A.__r3f.autoRemovedBeforeAppend=!0),r(M,A),A.raycast&&A.__r3f.eventCount&&gI(A).getState().internal.interaction.push(A),[S,S.alternate].forEach(O=>{O!==null&&(O.stateNode=A,O.ref&&(typeof O.ref=="function"?O.ref(A):O.ref.current=A))})}const h=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Aye({createInstance:t,removeChild:l,appendChild:r,appendInitialChild:r,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(g,y)=>{if(!y)return;const b=g.getState().scene;b.__r3f&&(b.__r3f.root=g,r(b,y))},removeChildFromContainer:(g,y)=>{y&&l(g.getState().scene,y)},insertInContainerBefore:(g,y,b)=>{if(!y||!b)return;const S=g.getState().scene;S.__r3f&&s(S,y,b)},getRootHostContext:()=>null,getChildHostContext:g=>g,finalizeInitialChildren(g){var y;return!!((y=g==null?void 0:g.__r3f)!=null?y:{}).handlers},prepareUpdate(g,y,b,S){var C;if(((C=g==null?void 0:g.__r3f)!=null?C:{}).primitive&&S.object&&S.object!==g)return[!0];{const{args:A=[],children:O,...L}=S,{args:B=[],children:D,...z}=b;if(!Array.isArray(A))throw new Error("R3F: the args prop must be an array!");if(A.some((V,H)=>V!==B[H]))return[!0];const U=cJ(g,L,z,!0);return U.changes.length?[!1,U]:null}},commitUpdate(g,[y,b],S,C,M,A){y?u(g,S,M,A):hL(g,b)},commitMount(g,y,b,S){var C;const M=(C=g.__r3f)!=null?C:{};g.raycast&&M.handlers&&M.eventCount&&gI(g).getState().internal.interaction.push(g)},getPublicInstance:g=>g,prepareForCommit:()=>null,preparePortalMount:g=>ax(g.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(g){var y;const{attach:b,parent:S}=(y=g.__r3f)!=null?y:{};b&&S&&hG(S,g,b),g.isObject3D&&(g.visible=!1),NS(g)},unhideInstance(g,y){var b;const{attach:S,parent:C}=(b=g.__r3f)!=null?b:{};S&&C&&cL(C,g,S),(g.isObject3D&&y.visible==null||y.visible)&&(g.visible=!0),NS(g)},createTextInstance:h,hideTextInstance:h,unhideTextInstance:h,getCurrentEventPriority:()=>e?e():Ox.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&sp.fun(performance.now)?performance.now:sp.fun(Date.now)?Date.now:()=>0,scheduleTimeout:sp.fun(setTimeout)?setTimeout:void 0,cancelTimeout:sp.fun(clearTimeout)?clearTimeout:void 0}),applyProps:hL}}var aG,lG;const uL=n=>"colorSpace"in n||"outputColorSpace"in n,Nye=()=>{var n;return(n=lJ.ColorManagement)!=null?n:null};typeof window<"u"&&((aG=window.document)!=null&&aG.createElement||((lG=window.navigator)==null?void 0:lG.product)==="ReactNative")?pe.useLayoutEffect:pe.useEffect;class Dye extends pe.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Dye.getDerivedStateFromError=()=>({error:!0});const uJ="__default",uG=new Map,Pye=n=>n&&!!n.memoized&&!!n.changes;function gI(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const sp={obj:n=>n===Object(n)&&!sp.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(sp.str(n)||sp.num(n))return n===e;const o=sp.obj(n);if(o&&r==="reference")return n===e;const l=sp.arr(n);if(l&&t==="reference")return n===e;if((l||o)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(o&&t==="shallow"&&r==="shallow"){for(u in s?e:n)if(!sp.equ(n[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:n)if(n[u]!==e[u])return!1;if(sp.und(u)){if(l&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Bye(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function ax(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function JD(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),s=r.pop();return t=r.reduce((o,l)=>o[l],n),{target:t,key:s}}else return{target:t,key:e}}const cG=/-\d+$/;function cL(n,e,t){if(sp.str(t)){if(cG.test(t)){const o=t.replace(cG,""),{target:l,key:u}=JD(n,o);Array.isArray(l[u])||(l[u]=[])}const{target:r,key:s}=JD(n,t);e.__r3f.previousAttach=r[s],r[s]=e}else e.__r3f.previousAttach=t(n,e)}function hG(n,e,t){var r,s;if(sp.str(t)){const{target:o,key:l}=JD(n,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function cJ(n,{children:e,key:t,ref:r,...s},{children:o,key:l,ref:u,...h}={},f=!1){var g;const y=(g=n==null?void 0:n.__r3f)!=null?g:{},b=Object.entries(s),S=[];if(f){const M=Object.keys(h);for(let A=0;A<M.length;A++)s.hasOwnProperty(M[A])||b.unshift([M[A],uJ+"remove"])}b.forEach(([M,A])=>{var O;if((O=n.__r3f)!=null&&O.primitive&&M==="object"||sp.equ(A,h[M]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(M))return S.push([M,A,!0,[]]);let L=[];M.includes("-")&&(L=M.split("-")),S.push([M,A,!1,L]);for(const B in s){const D=s[B];B.startsWith(`${M}-`)&&S.push([B,D,!1,B.split("-")])}});const C={...s};return y.memoizedProps&&y.memoizedProps.args&&(C.args=y.memoizedProps.args),y.memoizedProps&&y.memoizedProps.attach&&(C.attach=y.memoizedProps.attach),{memoized:C,changes:S}}const Fye=typeof process<"u"&&!1;function hL(n,e){var t,r,s;const o=(t=n.__r3f)!=null?t:{},l=o.root,u=(r=l==null||l.getState==null?void 0:l.getState())!=null?r:{},{memoized:h,changes:f}=Pye(e)?e:cJ(n,e),g=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=h);for(let b=0;b<f.length;b++){let[S,C,M,A]=f[b];if(uL(n)){const D="srgb",z="srgb-linear";S==="encoding"?(S="colorSpace",C=C===3001?D:z):S==="outputEncoding"&&(S="outputColorSpace",C=C===3001?D:z)}let O=n,L=O[S];if(A.length&&(L=A.reduce((B,D)=>B[D],n),!(L&&L.set))){const[B,...D]=A.reverse();O=D.reverse().reduce((z,U)=>z[U],n),S=B}if(C===uJ+"remove")if(O.constructor){let B=uG.get(O.constructor);B||(B=new O.constructor,uG.set(O.constructor,B)),C=B[S]}else C=0;if(M)C?o.handlers[S]=C:delete o.handlers[S],o.eventCount=Object.keys(o.handlers).length;else if(L&&L.set&&(L.copy||L instanceof sI)){if(Array.isArray(C))L.fromArray?L.fromArray(C):L.set(...C);else if(L.copy&&C&&C.constructor&&(Fye?L.constructor.name===C.constructor.name:L.constructor===C.constructor))L.copy(C);else if(C!==void 0){const B=L instanceof Ph;!B&&L.setScalar?L.setScalar(C):L instanceof sI&&C instanceof sI?L.mask=C.mask:L.set(C),!Nye()&&!u.linear&&B&&L.convertSRGBToLinear()}}else if(O[S]=C,O[S]instanceof Om&&O[S].format===W3&&O[S].type===oX){const B=O[S];uL(B)&&uL(u.gl)?B.colorSpace=u.gl.outputColorSpace:B.encoding=u.gl.outputEncoding}NS(n)}if(o.parent&&n.raycast&&g!==o.eventCount){const b=gI(n).getState().internal,S=b.interaction.indexOf(n);S>-1&&b.interaction.splice(S,1),o.eventCount&&b.interaction.push(n)}return!(f.length===1&&f[0][0]==="onUpdate")&&f.length&&(s=n.__r3f)!=null&&s.parent&&qD(n),n}function NS(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function qD(n){n.onUpdate==null||n.onUpdate(n)}function zye(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Ox.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ox.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ox.ContinuousEventPriority;default:return Ox.DefaultEventPriority}}function Uye(n,e,t,r){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(r),s.target.releasePointerCapture(r)))}function Hye(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,s)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((r,s)=>{Uye(t.capturedMap,e,r,s)})}const dG=new WeakMap;function hJ(n,e){return function(t,...r){let s=dG.get(t);return s||(s=new t,dG.set(t,s)),n&&n(s),Promise.all(r.map(o=>new Promise((l,u)=>s.load(o,h=>{h.scene&&Object.assign(h,Bye(h.scene)),l(h)},e,h=>u(new Error(`Could not load ${o}: ${h==null?void 0:h.message}`)))))).finally(()=>s.dispose==null?void 0:s.dispose())}}function IC(n,e,t,r){const s=Array.isArray(e)?e:[e],o=Rye(hJ(t,r),[n,...s],{equal:sp.equ});return Array.isArray(e)?o:o[0]}IC.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return kye(hJ(t),[n,...r])};IC.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Oye([n,...t])};const Gye=new Map,{reconciler:Wye,applyProps:LBe}=Lye(Gye,zye);Wye.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:pe.version});function fG(n,e){if(e===Noe)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===ID||e===aX){let t=n.getIndex();if(t===null){const l=[],u=n.getAttribute("position");if(u!==void 0){for(let h=0;h<u.count;h++)l.push(h);n.setIndex(l),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,s=[];if(t)if(e===ID)for(let l=1;l<=r;l++)s.push(t.getX(0)),s.push(t.getX(l)),s.push(t.getX(l+1));else for(let l=0;l<r;l++)l%2===0?(s.push(t.getX(l)),s.push(t.getX(l+1)),s.push(t.getX(l+2))):(s.push(t.getX(l+2)),s.push(t.getX(l+1)),s.push(t.getX(l)));s.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=n.clone();return o.setIndex(s),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const Vye=parseInt(z3.replace(/\D+/g,""));class HF extends aT{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Jye(t)}),this.register(function(t){return new ibe(t)}),this.register(function(t){return new sbe(t)}),this.register(function(t){return new obe(t)}),this.register(function(t){return new Qye(t)}),this.register(function(t){return new Zye(t)}),this.register(function(t){return new ebe(t)}),this.register(function(t){return new tbe(t)}),this.register(function(t){return new Kye(t)}),this.register(function(t){return new nbe(t)}),this.register(function(t){return new qye(t)}),this.register(function(t){return new rbe(t)}),this.register(function(t){return new Yye(t)}),this.register(function(t){return new abe(t)}),this.register(function(t){return new lbe(t)})}load(e,t,r,s){const o=this;let l;this.resourcePath!==""?l=this.resourcePath:this.path!==""?l=this.path:l=k1.extractUrlBase(e),this.manager.itemStart(e);const u=function(f){s?s(f):console.error(f),o.manager.itemError(e),o.manager.itemEnd(e)},h=new rR(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(f){try{o.parse(f,l,function(g){t(g),o.manager.itemEnd(e)},u)}catch(g){u(g)}},r,u)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,s){let o;const l={},u={};if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(k1.decodeText(new Uint8Array(e.slice(0,4)))===dJ){try{l[js.KHR_BINARY_GLTF]=new ube(e)}catch(g){s&&s(g);return}o=JSON.parse(l[js.KHR_BINARY_GLTF].content)}else o=JSON.parse(k1.decodeText(new Uint8Array(e)));else o=e;if(o.asset===void 0||o.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new Sbe(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const g=this.pluginCallbacks[f](h);u[g.name]=g,l[g.name]=!0}if(o.extensionsUsed)for(let f=0;f<o.extensionsUsed.length;++f){const g=o.extensionsUsed[f],y=o.extensionsRequired||[];switch(g){case js.KHR_MATERIALS_UNLIT:l[g]=new Xye;break;case js.KHR_DRACO_MESH_COMPRESSION:l[g]=new cbe(o,this.dracoLoader);break;case js.KHR_TEXTURE_TRANSFORM:l[g]=new hbe;break;case js.KHR_MESH_QUANTIZATION:l[g]=new dbe;break;default:y.indexOf(g)>=0&&u[g]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}h.setExtensions(l),h.setPlugins(u),h.parse(r,s)}parseAsync(e,t){const r=this;return new Promise(function(s,o){r.parse(e,t,s,o)})}}function jye(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const js={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Yye{constructor(e){this.parser=e,this.name=js.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let s=t.cache.get(r);if(s)return s;const o=t.json,h=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let f;const g=new Ph(16777215);h.color!==void 0&&g.fromArray(h.color);const y=h.range!==void 0?h.range:0;switch(h.type){case"directional":f=new ele(g),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new Qae(g),f.distance=y;break;case"spot":f=new Jae(g),f.distance=y,h.spot=h.spot||{},h.spot.innerConeAngle=h.spot.innerConeAngle!==void 0?h.spot.innerConeAngle:0,h.spot.outerConeAngle=h.spot.outerConeAngle!==void 0?h.spot.outerConeAngle:Math.PI/4,f.angle=h.spot.outerConeAngle,f.penumbra=1-h.spot.innerConeAngle/h.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+h.type)}return f.position.set(0,0,0),f.decay=2,vy(f,h),h.intensity!==void 0&&(f.intensity=h.intensity),f.name=t.createUniqueName(h.name||"light_"+e),s=Promise.resolve(f),t.cache.add(r,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,o=r.json.nodes[e],u=(o.extensions&&o.extensions[this.name]||{}).light;return u===void 0?null:this._loadLight(u).then(function(h){return r._getNodeRef(t.cache,u,h)})}}class Xye{constructor(){this.name=js.KHR_MATERIALS_UNLIT}getMaterialType(){return qS}extendParams(e,t,r){const s=[];e.color=new Ph(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const l=o.baseColorFactor;e.color.fromArray(l),e.opacity=l[3]}o.baseColorTexture!==void 0&&s.push(r.assignTexture(e,"map",o.baseColorTexture,3001))}return Promise.all(s)}}class Kye{constructor(e){this.parser=e,this.name=js.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}}class Jye{constructor(e){this.parser=e,this.name=js.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:eb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&o.push(r.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&o.push(r.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(o.push(r.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const u=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new uc(u,u)}return Promise.all(o)}}class qye{constructor(e){this.parser=e,this.name=js.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:eb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&o.push(r.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&o.push(r.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(o)}}class Qye{constructor(e){this.parser=e,this.name=js.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:eb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new Ph(0,0,0),t.sheenRoughness=0,t.sheen=1;const l=s.extensions[this.name];return l.sheenColorFactor!==void 0&&t.sheenColor.fromArray(l.sheenColorFactor),l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&o.push(r.assignTexture(t,"sheenColorMap",l.sheenColorTexture,3001)),l.sheenRoughnessTexture!==void 0&&o.push(r.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(o)}}class Zye{constructor(e){this.parser=e,this.name=js.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:eb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&o.push(r.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(o)}}class ebe{constructor(e){this.parser=e,this.name=js.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:eb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&o.push(r.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;const u=l.attenuationColor||[1,1,1];return t.attenuationColor=new Ph(u[0],u[1],u[2]),Promise.all(o)}}class tbe{constructor(e){this.parser=e,this.name=js.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:eb}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class nbe{constructor(e){this.parser=e,this.name=js.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:eb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&o.push(r.assignTexture(t,"specularIntensityMap",l.specularTexture));const u=l.specularColorFactor||[1,1,1];return t.specularColor=new Ph(u[0],u[1],u[2]),l.specularColorTexture!==void 0&&o.push(r.assignTexture(t,"specularColorMap",l.specularColorTexture,3001)),Promise.all(o)}}class rbe{constructor(e){this.parser=e,this.name=js.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:eb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.anisotropyStrength!==void 0&&(t.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(t.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&o.push(r.assignTexture(t,"anisotropyMap",l.anisotropyTexture)),Promise.all(o)}}class ibe{constructor(e){this.parser=e,this.name=js.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,s=r.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const o=s.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,l)}}class sbe{constructor(e){this.parser=e,this.name=js.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,s=r.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let h=r.textureLoader;if(u.uri){const f=r.options.manager.getHandler(u.uri);f!==null&&(h=f)}return this.detectSupport().then(function(f){if(f)return r.loadTextureImage(e,l.source,h);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class obe{constructor(e){this.parser=e,this.name=js.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,s=r.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let h=r.textureLoader;if(u.uri){const f=r.options.manager.getHandler(u.uri);f!==null&&(h=f)}return this.detectSupport().then(function(f){if(f)return r.loadTextureImage(e,l.source,h);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class abe{constructor(e){this.name=js.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const s=r.extensions[this.name],o=this.parser.getDependency("buffer",s.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(u){const h=s.byteOffset||0,f=s.byteLength||0,g=s.count,y=s.byteStride,b=new Uint8Array(u,h,f);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(g,y,b,s.mode,s.filter).then(function(S){return S.buffer}):l.ready.then(function(){const S=new ArrayBuffer(g*y);return l.decodeGltfBuffer(new Uint8Array(S),g,y,b,s.mode,s.filter),S})})}else return null}}class lbe{constructor(e){this.name=js.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const s=t.meshes[r.mesh];for(const f of s.primitives)if(f.mode!==ug.TRIANGLES&&f.mode!==ug.TRIANGLE_STRIP&&f.mode!==ug.TRIANGLE_FAN&&f.mode!==void 0)return null;const l=r.extensions[this.name].attributes,u=[],h={};for(const f in l)u.push(this.parser.getDependency("accessor",l[f]).then(g=>(h[f]=g,h[f])));return u.length<1?null:(u.push(this.parser.createNodeMesh(e)),Promise.all(u).then(f=>{const g=f.pop(),y=g.isGroup?g.children:[g],b=f[0].count,S=[];for(const C of y){const M=new Ys,A=new Bt,O=new Pu,L=new Bt(1,1,1),B=new Rae(C.geometry,C.material,b);for(let D=0;D<b;D++)h.TRANSLATION&&A.fromBufferAttribute(h.TRANSLATION,D),h.ROTATION&&O.fromBufferAttribute(h.ROTATION,D),h.SCALE&&L.fromBufferAttribute(h.SCALE,D),B.setMatrixAt(D,M.compose(A,O,L));for(const D in h)D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&C.geometry.setAttribute(D,h[D]);dh.prototype.copy.call(B,C),this.parser.assignFinalMaterial(B),S.push(B)}return g.isGroup?(g.clear(),g.add(...S),g):S[0]}))}}const dJ="glTF",lx=12,pG={JSON:1313821514,BIN:5130562};class ube{constructor(e){this.name=js.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,lx);if(this.header={magic:k1.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==dJ)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-lx,s=new DataView(e,lx);let o=0;for(;o<r;){const l=s.getUint32(o,!0);o+=4;const u=s.getUint32(o,!0);if(o+=4,u===pG.JSON){const h=new Uint8Array(e,lx+o,l);this.content=k1.decodeText(h)}else if(u===pG.BIN){const h=lx+o;this.body=e.slice(h,h+l)}o+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class cbe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=js.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,s=this.dracoLoader,o=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,u={},h={},f={};for(const g in l){const y=QD[g]||g.toLowerCase();u[y]=l[g]}for(const g in e.attributes){const y=QD[g]||g.toLowerCase();if(l[g]!==void 0){const b=r.accessors[e.attributes[g]],S=_w[b.componentType];f[y]=S.name,h[y]=b.normalized===!0}}return t.getDependency("bufferView",o).then(function(g){return new Promise(function(y){s.decodeDracoFile(g,function(b){for(const S in b.attributes){const C=b.attributes[S],M=h[S];M!==void 0&&(C.normalized=M)}y(b)},u,f)})})}}class hbe{constructor(){this.name=js.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class dbe{constructor(){this.name=js.KHR_MESH_QUANTIZATION}}class fJ extends TC{constructor(e,t,r,s){super(e,t,r,s)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,s=this.valueSize,o=e*s*3+s;for(let l=0;l!==s;l++)t[l]=r[o+l];return t}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=u*2,f=u*3,g=s-t,y=(r-t)/g,b=y*y,S=b*y,C=e*f,M=C-f,A=-2*S+3*b,O=S-b,L=1-A,B=O-b+y;for(let D=0;D!==u;D++){const z=l[M+D+u],U=l[M+D+h]*g,V=l[C+D+u],H=l[C+D]*g;o[D]=L*z+B*U+A*V+O*H}return o}}const fbe=new Pu;class pbe extends fJ{interpolate_(e,t,r,s){const o=super.interpolate_(e,t,r,s);return fbe.fromArray(o).normalize().toArray(o),o}}const ug={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},_w={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},mG={9728:$$,9729:U3,9984:Moe,9985:Ioe,9986:Aoe,9987:H3},gG={33071:Ix,33648:AD,10497:x$},dL={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},QD={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Vye>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ry={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},mbe={CUBICSPLINE:void 0,LINEAR:Aw,STEP:C$},fL={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function gbe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Q3({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:nR})),n.DefaultMaterial}function Gb(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function vy(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function _be(n,e,t){let r=!1,s=!1,o=!1;for(let f=0,g=e.length;f<g;f++){const y=e[f];if(y.POSITION!==void 0&&(r=!0),y.NORMAL!==void 0&&(s=!0),y.COLOR_0!==void 0&&(o=!0),r&&s&&o)break}if(!r&&!s&&!o)return Promise.resolve(n);const l=[],u=[],h=[];for(let f=0,g=e.length;f<g;f++){const y=e[f];if(r){const b=y.POSITION!==void 0?t.getDependency("accessor",y.POSITION):n.attributes.position;l.push(b)}if(s){const b=y.NORMAL!==void 0?t.getDependency("accessor",y.NORMAL):n.attributes.normal;u.push(b)}if(o){const b=y.COLOR_0!==void 0?t.getDependency("accessor",y.COLOR_0):n.attributes.color;h.push(b)}}return Promise.all([Promise.all(l),Promise.all(u),Promise.all(h)]).then(function(f){const g=f[0],y=f[1],b=f[2];return r&&(n.morphAttributes.position=g),s&&(n.morphAttributes.normal=y),o&&(n.morphAttributes.color=b),n.morphTargetsRelative=!0,n})}function vbe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,s=t.length;r<s;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ybe(n){let e;const t=n.extensions&&n.extensions[js.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+pL(t.attributes):e=n.indices+":"+pL(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,s=n.targets.length;r<s;r++)e+=":"+pL(n.targets[r]);return e}function pL(n){let e="";const t=Object.keys(n).sort();for(let r=0,s=t.length;r<s;r++)e+=t[r]+":"+n[t[r]]+";";return e}function ZD(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function bbe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Tbe=new Ys;class Sbe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new jye,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,s=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,o=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||s&&o<98?this.textureLoader=new Xae(this.options.manager):this.textureLoader=new tle(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new rR(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,s=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(l){const u={scene:l[0][s.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:s.asset,parser:r,userData:{}};Gb(o,u,s),vy(u,s),Promise.all(r._invokeAll(function(h){return h.afterRoot&&h.afterRoot(u)})).then(function(){e(u)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let s=0,o=t.length;s<o;s++){const l=t[s].joints;for(let u=0,h=l.length;u<h;u++)e[l[u]].isBone=!0}for(let s=0,o=e.length;s<o;s++){const l=e[s];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(r[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const s=r.clone(),o=(l,u)=>{const h=this.associations.get(l);h!=null&&this.associations.set(u,h);for(const[f,g]of l.children.entries())o(g,u.children[f])};return o(r,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const s=e(t[r]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let s=0;s<t.length;s++){const o=e(t[s]);o&&r.push(o)}return r}getDependency(e,t){const r=e+":"+t;let s=this.cache.get(r);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":s=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(r,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(o,l){return r.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[js.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(o,l){r.load(k1.resolveURL(t.uri,s.path),o,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const s=t.byteLength||0,o=t.byteOffset||0;return r.slice(o,o+s)})}loadAccessor(e){const t=this,r=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const l=dL[s.type],u=_w[s.componentType],h=s.normalized===!0,f=new u(s.count*l);return Promise.resolve(new Lm(f,l,h))}const o=[];return s.bufferView!==void 0?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),s.sparse!==void 0&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then(function(l){const u=l[0],h=dL[s.type],f=_w[s.componentType],g=f.BYTES_PER_ELEMENT,y=g*h,b=s.byteOffset||0,S=s.bufferView!==void 0?r.bufferViews[s.bufferView].byteStride:void 0,C=s.normalized===!0;let M,A;if(S&&S!==y){const O=Math.floor(b/S),L="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+O+":"+s.count;let B=t.cache.get(L);B||(M=new f(u,O*S,s.count*S/g),B=new $ae(M,S/g),t.cache.add(L,B)),A=new K3(B,h,b%S/g,C)}else u===null?M=new f(s.count*h):M=new f(u,b,s.count*h),A=new Lm(M,h,C);if(s.sparse!==void 0){const O=dL.SCALAR,L=_w[s.sparse.indices.componentType],B=s.sparse.indices.byteOffset||0,D=s.sparse.values.byteOffset||0,z=new L(l[1],B,s.sparse.count*O),U=new f(l[2],D,s.sparse.count*h);u!==null&&(A=new Lm(A.array.slice(),A.itemSize,A.normalized));for(let V=0,H=z.length;V<H;V++){const oe=z[V];if(A.setX(oe,U[V*h]),h>=2&&A.setY(oe,U[V*h+1]),h>=3&&A.setZ(oe,U[V*h+2]),h>=4&&A.setW(oe,U[V*h+3]),h>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){const t=this.json,r=this.options,o=t.textures[e].source,l=t.images[o];let u=this.textureLoader;if(l.uri){const h=r.manager.getHandler(l.uri);h!==null&&(u=h)}return this.loadTextureImage(e,o,u)}loadTextureImage(e,t,r){const s=this,o=this.json,l=o.textures[e],u=o.images[t],h=(u.uri||u.bufferView)+":"+l.sampler;if(this.textureCache[h])return this.textureCache[h];const f=this.loadImageSource(t,r).then(function(g){g.flipY=!1,g.name=l.name||u.name||"",g.name===""&&typeof u.uri=="string"&&u.uri.startsWith("data:image/")===!1&&(g.name=u.uri);const b=(o.samplers||{})[l.sampler]||{};return g.magFilter=mG[b.magFilter]||U3,g.minFilter=mG[b.minFilter]||H3,g.wrapS=gG[b.wrapS]||x$,g.wrapT=gG[b.wrapT]||x$,s.associations.set(g,{textures:e}),g}).catch(function(){return null});return this.textureCache[h]=f,f}loadImageSource(e,t){const r=this,s=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(y=>y.clone());const l=s.images[e],u=self.URL||self.webkitURL;let h=l.uri||"",f=!1;if(l.bufferView!==void 0)h=r.getDependency("bufferView",l.bufferView).then(function(y){f=!0;const b=new Blob([y],{type:l.mimeType});return h=u.createObjectURL(b),h});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const g=Promise.resolve(h).then(function(y){return new Promise(function(b,S){let C=b;t.isImageBitmapLoader===!0&&(C=function(M){const A=new Om(M);A.needsUpdate=!0,b(A)}),t.load(k1.resolveURL(y,o.path),C,void 0,S)})}).then(function(y){return f===!0&&u.revokeObjectURL(h),y.userData.mimeType=l.mimeType||bbe(l.uri),y}).catch(function(y){throw console.error("THREE.GLTFLoader: Couldn't load texture",h),y});return this.sourceCache[e]=g,g}assignTexture(e,t,r,s){const o=this;return this.getDependency("texture",r.index).then(function(l){if(!l)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(l=l.clone(),l.channel=r.texCoord),o.extensions[js.KHR_TEXTURE_TRANSFORM]){const u=r.extensions!==void 0?r.extensions[js.KHR_TEXTURE_TRANSFORM]:void 0;if(u){const h=o.associations.get(l);l=o.extensions[js.KHR_TEXTURE_TRANSFORM].extendTexture(l,u),o.associations.set(l,h)}}return s!==void 0&&("colorSpace"in l?l.colorSpace=s===3001?"srgb":"srgb-linear":l.encoding=s),e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const s=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){const u="PointsMaterial:"+r.uuid;let h=this.cache.get(u);h||(h=new _X,Dy.prototype.copy.call(h,r),h.color.copy(r.color),h.map=r.map,h.sizeAttenuation=!1,this.cache.add(u,h)),r=h}else if(e.isLine){const u="LineBasicMaterial:"+r.uuid;let h=this.cache.get(u);h||(h=new gX,Dy.prototype.copy.call(h,r),h.color.copy(r.color),h.map=r.map,this.cache.add(u,h)),r=h}if(s||o||l){let u="ClonedMaterial:"+r.uuid+":";s&&(u+="derivative-tangents:"),o&&(u+="vertex-colors:"),l&&(u+="flat-shading:");let h=this.cache.get(u);h||(h=r.clone(),o&&(h.vertexColors=!0),l&&(h.flatShading=!0),s&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(u,h),this.associations.set(h,this.associations.get(r))),r=h}e.material=r}getMaterialType(){return Q3}loadMaterial(e){const t=this,r=this.json,s=this.extensions,o=r.materials[e];let l;const u={},h=o.extensions||{},f=[];if(h[js.KHR_MATERIALS_UNLIT]){const y=s[js.KHR_MATERIALS_UNLIT];l=y.getMaterialType(),f.push(y.extendParams(u,o,t))}else{const y=o.pbrMetallicRoughness||{};if(u.color=new Ph(1,1,1),u.opacity=1,Array.isArray(y.baseColorFactor)){const b=y.baseColorFactor;u.color.fromArray(b),u.opacity=b[3]}y.baseColorTexture!==void 0&&f.push(t.assignTexture(u,"map",y.baseColorTexture,3001)),u.metalness=y.metallicFactor!==void 0?y.metallicFactor:1,u.roughness=y.roughnessFactor!==void 0?y.roughnessFactor:1,y.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(u,"metalnessMap",y.metallicRoughnessTexture)),f.push(t.assignTexture(u,"roughnessMap",y.metallicRoughnessTexture))),l=this._invokeOne(function(b){return b.getMaterialType&&b.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(b){return b.extendMaterialParams&&b.extendMaterialParams(e,u)})))}o.doubleSided===!0&&(u.side=xoe);const g=o.alphaMode||fL.OPAQUE;if(g===fL.BLEND?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,g===fL.MASK&&(u.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&l!==qS&&(f.push(t.assignTexture(u,"normalMap",o.normalTexture)),u.normalScale=new uc(1,1),o.normalTexture.scale!==void 0)){const y=o.normalTexture.scale;u.normalScale.set(y,y)}return o.occlusionTexture!==void 0&&l!==qS&&(f.push(t.assignTexture(u,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(u.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&l!==qS&&(u.emissive=new Ph().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&l!==qS&&f.push(t.assignTexture(u,"emissiveMap",o.emissiveTexture,3001)),Promise.all(f).then(function(){const y=new l(u);return o.name&&(y.name=o.name),vy(y,o),t.associations.set(y,{materials:e}),o.extensions&&Gb(s,y,o),y})}createUniqueName(e){const t=Aa.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,s=this.primitiveCache;function o(u){return r[js.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(u,t).then(function(h){return _G(h,u,t)})}const l=[];for(let u=0,h=e.length;u<h;u++){const f=e[u],g=ybe(f),y=s[g];if(y)l.push(y.promise);else{let b;f.extensions&&f.extensions[js.KHR_DRACO_MESH_COMPRESSION]?b=o(f):b=_G(new Zy,f,t),s[g]={primitive:f,promise:b},l.push(b)}}return Promise.all(l)}loadMesh(e){const t=this,r=this.json,s=this.extensions,o=r.meshes[e],l=o.primitives,u=[];for(let h=0,f=l.length;h<f;h++){const g=l[h].material===void 0?gbe(this.cache):this.getDependency("material",l[h].material);u.push(g)}return u.push(t.loadGeometries(l)),Promise.all(u).then(function(h){const f=h.slice(0,h.length-1),g=h[h.length-1],y=[];for(let S=0,C=g.length;S<C;S++){const M=g[S],A=l[S];let O;const L=f[S];if(A.mode===ug.TRIANGLES||A.mode===ug.TRIANGLE_STRIP||A.mode===ug.TRIANGLE_FAN||A.mode===void 0)O=o.isSkinnedMesh===!0?new Mae(M,L):new uk(M,L),O.isSkinnedMesh===!0&&O.normalizeSkinWeights(),A.mode===ug.TRIANGLE_STRIP?O.geometry=fG(O.geometry,aX):A.mode===ug.TRIANGLE_FAN&&(O.geometry=fG(O.geometry,ID));else if(A.mode===ug.LINES)O=new kae(M,L);else if(A.mode===ug.LINE_STRIP)O=new q3(M,L);else if(A.mode===ug.LINE_LOOP)O=new Oae(M,L);else if(A.mode===ug.POINTS)O=new Lae(M,L);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(O.geometry.morphAttributes).length>0&&vbe(O,o),O.name=t.createUniqueName(o.name||"mesh_"+e),vy(O,o),A.extensions&&Gb(s,O,A),t.assignFinalMaterial(O),y.push(O)}for(let S=0,C=y.length;S<C;S++)t.associations.set(y[S],{meshes:e,primitives:S});if(y.length===1)return o.extensions&&Gb(s,y[0],o),y[0];const b=new PO;o.extensions&&Gb(s,b,o),t.associations.set(b,{meshes:e});for(let S=0,C=y.length;S<C;S++)b.add(y[S]);return b})}loadCamera(e){let t;const r=this.json.cameras[e],s=r[r.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new X3(tae.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):r.type==="orthographic"&&(t=new fX(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),vy(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let s=0,o=t.joints.length;s<o;s++)r.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(s){const o=s.pop(),l=s,u=[],h=[];for(let f=0,g=l.length;f<g;f++){const y=l[f];if(y){u.push(y);const b=new Ys;o!==null&&b.fromArray(o.array,f*16),h.push(b)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[f])}return new J3(u,h)})}loadAnimation(e){const r=this.json.animations[e],s=r.name?r.name:"animation_"+e,o=[],l=[],u=[],h=[],f=[];for(let g=0,y=r.channels.length;g<y;g++){const b=r.channels[g],S=r.samplers[b.sampler],C=b.target,M=C.node,A=r.parameters!==void 0?r.parameters[S.input]:S.input,O=r.parameters!==void 0?r.parameters[S.output]:S.output;C.node!==void 0&&(o.push(this.getDependency("node",M)),l.push(this.getDependency("accessor",A)),u.push(this.getDependency("accessor",O)),h.push(S),f.push(C))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(h),Promise.all(f)]).then(function(g){const y=g[0],b=g[1],S=g[2],C=g[3],M=g[4],A=[];for(let O=0,L=y.length;O<L;O++){const B=y[O],D=b[O],z=S[O],U=C[O],V=M[O];if(B===void 0)continue;B.updateMatrix();let H;switch(ry[V.path]){case ry.weights:H=A$;break;case ry.rotation:H=K1;break;case ry.position:case ry.scale:default:H=I$;break}const oe=B.name?B.name:B.uuid,le=U.interpolation!==void 0?mbe[U.interpolation]:Aw,Z=[];ry[V.path]===ry.weights?B.traverse(function(he){he.morphTargetInfluences&&Z.push(he.name?he.name:he.uuid)}):Z.push(oe);let q=z.array;if(z.normalized){const he=ZD(q.constructor),ae=new Float32Array(q.length);for(let ue=0,ge=q.length;ue<ge;ue++)ae[ue]=q[ue]*he;q=ae}for(let he=0,ae=Z.length;he<ae;he++){const ue=new H(Z[he]+"."+ry[V.path],D.array,q,le);U.interpolation==="CUBICSPLINE"&&(ue.createInterpolant=function(we){const J=this instanceof K1?pbe:fJ;return new J(this.times,this.values,this.getValueSize()/3,we)},ue.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),A.push(ue)}}return new Uae(s,void 0,A)})}createNodeMesh(e){const t=this.json,r=this,s=t.nodes[e];return s.mesh===void 0?null:r.getDependency("mesh",s.mesh).then(function(o){const l=r._getNodeRef(r.meshCache,s.mesh,o);return s.weights!==void 0&&l.traverse(function(u){if(u.isMesh)for(let h=0,f=s.weights.length;h<f;h++)u.morphTargetInfluences[h]=s.weights[h]}),l})}loadNode(e){const t=this.json,r=this,s=t.nodes[e],o=r._loadNodeShallow(e),l=[],u=s.children||[];for(let f=0,g=u.length;f<g;f++)l.push(r.getDependency("node",u[f]));const h=s.skin===void 0?Promise.resolve(null):r.getDependency("skin",s.skin);return Promise.all([o,Promise.all(l),h]).then(function(f){const g=f[0],y=f[1],b=f[2];b!==null&&g.traverse(function(S){S.isSkinnedMesh&&S.bind(b,Tbe)});for(let S=0,C=y.length;S<C;S++)g.add(y[S]);return g})}_loadNodeShallow(e){const t=this.json,r=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const o=t.nodes[e],l=o.name?s.createUniqueName(o.name):"",u=[],h=s._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});return h&&u.push(h),o.camera!==void 0&&u.push(s.getDependency("camera",o.camera).then(function(f){return s._getNodeRef(s.cameraCache,o.camera,f)})),s._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){u.push(f)}),this.nodeCache[e]=Promise.all(u).then(function(f){let g;if(o.isBone===!0?g=new pX:f.length>1?g=new PO:f.length===1?g=f[0]:g=new dh,g!==f[0])for(let y=0,b=f.length;y<b;y++)g.add(f[y]);if(o.name&&(g.userData.name=o.name,g.name=l),vy(g,o),o.extensions&&Gb(r,g,o),o.matrix!==void 0){const y=new Ys;y.fromArray(o.matrix),g.applyMatrix4(y)}else o.translation!==void 0&&g.position.fromArray(o.translation),o.rotation!==void 0&&g.quaternion.fromArray(o.rotation),o.scale!==void 0&&g.scale.fromArray(o.scale);return s.associations.has(g)||s.associations.set(g,{}),s.associations.get(g).nodes=e,g}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],s=this,o=new PO;r.name&&(o.name=s.createUniqueName(r.name)),vy(o,r),r.extensions&&Gb(t,o,r);const l=r.nodes||[],u=[];for(let h=0,f=l.length;h<f;h++)u.push(s.getDependency("node",l[h]));return Promise.all(u).then(function(h){for(let g=0,y=h.length;g<y;g++)o.add(h[g]);const f=g=>{const y=new Map;for(const[b,S]of s.associations)(b instanceof Dy||b instanceof Om)&&y.set(b,S);return g.traverse(b=>{const S=s.associations.get(b);S!=null&&y.set(b,S)}),y};return s.associations=f(o),o})}}function wbe(n,e,t){const r=e.attributes,s=new $v;if(r.POSITION!==void 0){const u=t.json.accessors[r.POSITION],h=u.min,f=u.max;if(h!==void 0&&f!==void 0){if(s.set(new Bt(h[0],h[1],h[2]),new Bt(f[0],f[1],f[2])),u.normalized){const g=ZD(_w[u.componentType]);s.min.multiplyScalar(g),s.max.multiplyScalar(g)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=e.targets;if(o!==void 0){const u=new Bt,h=new Bt;for(let f=0,g=o.length;f<g;f++){const y=o[f];if(y.POSITION!==void 0){const b=t.json.accessors[y.POSITION],S=b.min,C=b.max;if(S!==void 0&&C!==void 0){if(h.setX(Math.max(Math.abs(S[0]),Math.abs(C[0]))),h.setY(Math.max(Math.abs(S[1]),Math.abs(C[1]))),h.setZ(Math.max(Math.abs(S[2]),Math.abs(C[2]))),b.normalized){const M=ZD(_w[b.componentType]);h.multiplyScalar(M)}u.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(u)}n.boundingBox=s;const l=new __;s.getCenter(l.center),l.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=l}function _G(n,e,t){const r=e.attributes,s=[];function o(l,u){return t.getDependency("accessor",l).then(function(h){n.setAttribute(u,h)})}for(const l in r){const u=QD[l]||l.toLowerCase();u in n.attributes||s.push(o(r[l],u))}if(e.indices!==void 0&&!n.index){const l=t.getDependency("accessor",e.indices).then(function(u){n.setIndex(u)});s.push(l)}return vy(n,e),wbe(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?_be(n,e.targets,t):n})}const mL=new WeakMap;class Ebe extends aT{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,s){const o=new rR(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,l=>{const u={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(l,u).then(t).catch(s)},r,s)}decodeDracoFile(e,t,r,s){const o={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,o).then(t)}decodeGeometry(e,t){for(const h in t.attributeTypes){const f=t.attributeTypes[h];f.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[h]=f.name)}const r=JSON.stringify(t);if(mL.has(e)){const h=mL.get(e);if(h.key===r)return h.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const o=this.workerNextTaskID++,l=e.byteLength,u=this._getWorker(o,l).then(h=>(s=h,new Promise((f,g)=>{s._callbacks[o]={resolve:f,reject:g},s.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))).then(h=>this._createGeometry(h.geometry));return u.catch(()=>!0).then(()=>{s&&o&&this._releaseTask(s,o)}),mL.set(e,{key:r,promise:u}),u}_createGeometry(e){const t=new Zy;e.index&&t.setIndex(new Lm(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const s=e.attributes[r],o=s.name,l=s.array,u=s.itemSize;t.setAttribute(o,new Lm(l,u))}return t}_loadLibrary(e,t){const r=new rR(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((s,o)=>{r.load(e,s,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const s=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const o=xbe.toString(),l=["/* draco decoder */",s,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(o){const l=o.data;switch(l.type){case"decode":s._callbacks[l.id].resolve(l);break;case"error":s._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,o){return s._taskLoad>o._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function xbe(){let n,e;onmessage=function(l){const u=l.data;switch(u.type){case"init":n=u.decoderConfig,e=new Promise(function(g){n.onModuleLoaded=function(y){g({draco:y})},DracoDecoderModule(n)});break;case"decode":const h=u.buffer,f=u.taskConfig;e.then(g=>{const y=g.draco,b=new y.Decoder,S=new y.DecoderBuffer;S.Init(new Int8Array(h),h.byteLength);try{const C=t(y,b,S,f),M=C.attributes.map(A=>A.array.buffer);C.index&&M.push(C.index.array.buffer),self.postMessage({type:"decode",id:u.id,geometry:C},M)}catch(C){console.error(C),self.postMessage({type:"error",id:u.id,error:C.message})}finally{y.destroy(S),y.destroy(b)}});break}};function t(l,u,h,f){const g=f.attributeIDs,y=f.attributeTypes;let b,S;const C=u.GetEncodedGeometryType(h);if(C===l.TRIANGULAR_MESH)b=new l.Mesh,S=u.DecodeBufferToMesh(h,b);else if(C===l.POINT_CLOUD)b=new l.PointCloud,S=u.DecodeBufferToPointCloud(h,b);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!S.ok()||b.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+S.error_msg());const M={index:null,attributes:[]};for(const A in g){const O=self[y[A]];let L,B;if(f.useUniqueIDs)B=g[A],L=u.GetAttributeByUniqueId(b,B);else{if(B=u.GetAttributeId(b,l[g[A]]),B===-1)continue;L=u.GetAttribute(b,B)}M.attributes.push(s(l,u,b,A,O,L))}return C===l.TRIANGULAR_MESH&&(M.index=r(l,u,b)),l.destroy(b),M}function r(l,u,h){const g=h.num_faces()*3,y=g*4,b=l._malloc(y);u.GetTrianglesUInt32Array(h,y,b);const S=new Uint32Array(l.HEAPF32.buffer,b,g).slice();return l._free(b),{array:S,itemSize:1}}function s(l,u,h,f,g,y){const b=y.num_components(),C=h.num_points()*b,M=C*g.BYTES_PER_ELEMENT,A=o(l,g),O=l._malloc(M);u.GetAttributeDataArrayForAllPoints(h,y,A,M,O);const L=new g(l.HEAPF32.buffer,O,C).slice();return l._free(O),{name:f,array:L,itemSize:b}}function o(l,u){switch(u){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}let UM;const gL=()=>{if(UM)return UM;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=n;WebAssembly.validate(t)&&(s=e);let o;const l=WebAssembly.instantiate(u(s),{}).then(y=>{o=y.instance,o.exports.__wasm_call_ctors()});function u(y){const b=new Uint8Array(y.length);for(let C=0;C<y.length;++C){const M=y.charCodeAt(C);b[C]=M>96?M-71:M>64?M-65:M>47?M+4:M>46?63:62}let S=0;for(let C=0;C<y.length;++C)b[S++]=b[C]<60?r[b[C]]:(b[C]-60)*64+b[++C];return b.buffer.slice(0,S)}function h(y,b,S,C,M,A){const O=o.exports.sbrk,L=S+3&-4,B=O(L*C),D=O(M.length),z=new Uint8Array(o.exports.memory.buffer);z.set(M,D);const U=y(B,S,C,D,M.length);if(U===0&&A&&A(B,L,C),b.set(z.subarray(B,B+S*C)),O(B-O(0)),U!==0)throw new Error(`Malformed buffer data: ${U}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},g={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return UM={ready:l,supported:!0,decodeVertexBuffer(y,b,S,C,M){h(o.exports.meshopt_decodeVertexBuffer,y,b,S,C,o.exports[f[M]])},decodeIndexBuffer(y,b,S,C){h(o.exports.meshopt_decodeIndexBuffer,y,b,S,C)},decodeIndexSequence(y,b,S,C){h(o.exports.meshopt_decodeIndexSequence,y,b,S,C)},decodeGltfBuffer(y,b,S,C,M,A){h(o.exports[g[M]],y,b,S,C,o.exports[f[A]])}},UM};let HM=null,pJ="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function mJ(n,e,t){return r=>{t&&t(r),n&&(HM||(HM=new Ebe),HM.setDecoderPath(typeof n=="string"?n:pJ),r.setDRACOLoader(HM)),e&&r.setMeshoptDecoder(typeof gL=="function"?gL():gL)}}function Gt(n,e=!0,t=!0,r){return IC(HF,n,mJ(e,t,r))}Gt.preload=(n,e=!0,t=!0,r)=>IC.preload(HF,n,mJ(e,t,r));Gt.clear=n=>IC.clear(HF,n);Gt.setDecoderPath=n=>{pJ=n};function $be(n){const{nodes:e}=Gt(tJ);return[{type:"raw",geometry:e.BASE_FRONT_GRILL_1.geometry,material:e.BASE_FRONT_GRILL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(tJ);const gJ="/gpu-programming/assets/BASE_LEFT_COVER_1-DGxtL-mQ.glb";function Cbe(n){const{nodes:e}=Gt(gJ);return[{type:"raw",geometry:e.BASE_LEFT_COVER_1.geometry,material:e.BASE_LEFT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(gJ);const _J="/gpu-programming/assets/base_link-CxNG3VaF.glb";function Mbe(n){const{nodes:e}=Gt(_J);return[{type:"raw",geometry:e.base_link.geometry,material:e.base_link.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(_J);const vJ="/gpu-programming/assets/BASE_RIGHT_COVER_1-hc0og1we.glb";function Abe(n){const{nodes:e}=Gt(vJ);return[{type:"raw",geometry:e.BASE_RIGHT_COVER_1.geometry,material:e.BASE_RIGHT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(vJ);const yJ="/gpu-programming/assets/Battery_1-CK31T6T2.glb";function Ibe(n){const{nodes:e}=Gt(yJ);return[{type:"raw",geometry:e.Battery_1.geometry,material:e.Battery_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(yJ);const bJ="/gpu-programming/assets/BODY_BASE_CONNECTOR_1-BGiepl-q.glb";function Rbe(n){const{nodes:e}=Gt(bJ);return[{type:"raw",geometry:e.BODY_BASE_CONNECTOR_1.geometry,material:e.BODY_BASE_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(bJ);const kbe="/gpu-programming/assets/DRIVE_TRACK_LEFT_1-BU9fqrup.glb";Gt.preload(kbe);const Obe="/gpu-programming/assets/DRIVE_TRACK_RIGHT_1-inJUmdan.glb";Gt.preload(Obe);const TJ="/gpu-programming/assets/EYE_LENS_1-dEqRsnM7.glb";function Lbe(n){const{nodes:e}=Gt(TJ);return[{type:"raw",geometry:e.EYE_LENS_1.geometry,material:e.EYE_LENS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(TJ);const SJ="/gpu-programming/assets/FACE_1-m_5yRlpQ.glb";function Nbe(n){const{nodes:e}=Gt(SJ);return[{type:"raw",geometry:e.FACE_1.geometry,material:e.FACE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(SJ);const wJ="/gpu-programming/assets/FRONT_LEFT_WHEEL_1-CbTd7ucE.glb";function Dbe(n){const{nodes:e}=Gt(wJ);return[{type:"raw",geometry:e.FRONT_LEFT_WHEEL_1.geometry,material:e.FRONT_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(wJ);const EJ="/gpu-programming/assets/FRONT_RIGHT_WHEEL_1-DndcS7IV.glb";function Pbe(n){const{nodes:e}=Gt(EJ);return[{type:"raw",geometry:e.FRONT_RIGHT_WHEEL_1.geometry,material:e.FRONT_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(EJ);const xJ="/gpu-programming/assets/HEAD_1-BuuEOSCL.glb";function Bbe(n){const{nodes:e}=Gt(xJ);return[{type:"raw",geometry:e.HEAD_1.geometry,material:e.HEAD_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(xJ);const $J="/gpu-programming/assets/HEAD_VENT_LEFT_1-DjAZtO3_.glb";function Fbe(n){const{nodes:e}=Gt($J);return[{type:"raw",geometry:e.HEAD_VENT_LEFT_1.geometry,material:e.HEAD_VENT_LEFT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload($J);const CJ="/gpu-programming/assets/HEAD_VENT_RIGHT_1-BfOCx_V8.glb";function zbe(n){const{nodes:e}=Gt(CJ);return[{type:"raw",geometry:e.HEAD_VENT_RIGHT_1.geometry,material:e.HEAD_VENT_RIGHT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(CJ);const MJ="/gpu-programming/assets/LEFT_ARM_1-B8yh6mwG.glb";function Ube(n){const{nodes:e}=Gt(MJ);return[{type:"raw",geometry:e.LEFT_ARM_1.geometry,material:e.LEFT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(MJ);const AJ="/gpu-programming/assets/LEFT_ARM_CONNECTOR_1-CXrHlUi5.glb";function Hbe(n){const{nodes:e}=Gt(AJ);return[{type:"raw",geometry:e.LEFT_ARM_CONNECTOR_1.geometry,material:e.LEFT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(AJ);const IJ="/gpu-programming/assets/MIDDLE_LEFT_WHEEL_1-BAVTGYOT.glb";function Gbe(n){const{nodes:e}=Gt(IJ);return[{type:"raw",geometry:e.MIDDLE_LEFT_WHEEL_1.geometry,material:e.MIDDLE_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(IJ);const RJ="/gpu-programming/assets/MIDDLE_RIGHT_WHEEL_1-GMj8YSda.glb";function Wbe(n){const{nodes:e}=Gt(RJ);return[{type:"raw",geometry:e.MIDDLE_RIGHT_WHEEL_1.geometry,material:e.MIDDLE_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(RJ);const kJ="/gpu-programming/assets/NECK_GLOBE_BASE_1-CpAA3cya.glb";function Vbe(n){const{nodes:e}=Gt(kJ);return[{type:"raw",geometry:e.NECK_GLOBE_BASE_1.geometry,material:e.NECK_GLOBE_BASE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(kJ);const OJ="/gpu-programming/assets/REAR_LEFT_WHEEL_1-Ca-hbPaC.glb";function jbe(n){const{nodes:e}=Gt(OJ);return[{type:"raw",geometry:e.REAR_LEFT_WHEEL_1.geometry,material:e.REAR_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(OJ);const LJ="/gpu-programming/assets/REAR_RIGHT_WHEEL_1-DLUpOsjA.glb";function Ybe(n){const{nodes:e}=Gt(LJ);return[{type:"raw",geometry:e.REAR_RIGHT_WHEEL_1.geometry,material:e.REAR_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(LJ);const NJ="/gpu-programming/assets/RIGHT_ARM_1-CsUyYnQa.glb";function Xbe(n){const{nodes:e}=Gt(NJ);return[{type:"raw",geometry:e.RIGHT_ARM_1.geometry,material:e.RIGHT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(NJ);const DJ="/gpu-programming/assets/RIGHT_ARM_CONNECTOR_1-Og6IFGgn.glb";function Kbe(n){const{nodes:e}=Gt(DJ);return[{type:"raw",geometry:e.RIGHT_ARM_CONNECTOR_1.geometry,material:e.RIGHT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(DJ);const PJ="/gpu-programming/assets/Torso_1-Dsttb7Xv.glb";function Jbe(n){const{nodes:e}=Gt(PJ);return[{type:"raw",geometry:e.Torso_1.geometry,material:e.Torso_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(PJ);const BJ="/gpu-programming/assets/VISOR_GLASS_1-DUgs1YBX.glb";function qbe(n){const{nodes:e}=Gt(BJ);return[{type:"raw",geometry:e.VISOR_GLASS_1.geometry,material:e.VISOR_GLASS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(BJ);const FJ="/gpu-programming/assets/eyes_acceptance-DjNbu5s_.glb";function Qbe(n){const{nodes:e,materials:t}=Gt(FJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(FJ);const zJ="/gpu-programming/assets/eyes_admiration-KaqH2ZpQ.glb";function Zbe(n){const{nodes:e,materials:t}=Gt(zJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(zJ);const UJ="/gpu-programming/assets/eyes_amazement-DWEI8ZWl.glb";function e1e(n){const{nodes:e,materials:t}=Gt(UJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(UJ);const HJ="/gpu-programming/assets/eyes_anger-BE-ut2mR.glb";function t1e(n){const{nodes:e,materials:t}=Gt(HJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(HJ);const GJ="/gpu-programming/assets/eyes_anticipation-b4B017F8.glb";function n1e(n){const{nodes:e,materials:t}=Gt(GJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(GJ);const WJ="/gpu-programming/assets/eyes_annoyed-B_lb9L_O.glb";function r1e(n){const{nodes:e,materials:t}=Gt(WJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(WJ);const VJ="/gpu-programming/assets/eyes_apprehension-DO3PTom6.glb";function i1e(n){const{nodes:e,materials:t}=Gt(VJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(VJ);const jJ="/gpu-programming/assets/eyes_apprehension_1-KlPiBiR4.glb";function s1e(n){const{nodes:e,materials:t}=Gt(jJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(jJ);const YJ="/gpu-programming/assets/eyes_boredom-C30alIvQ.glb";function o1e(n){const{nodes:e,materials:t}=Gt(YJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(YJ);const XJ="/gpu-programming/assets/eyes_default-CiQ6MqPO.glb";function vG(n){const{nodes:e,materials:t}=Gt(XJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(XJ);const KJ="/gpu-programming/assets/eyes_disgust-BPb8pu-1.glb";function a1e(n){const{nodes:e,materials:t}=Gt(KJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(KJ);const JJ="/gpu-programming/assets/eyes_ecstacy_frame_1-CAg4aUVn.glb";function l1e(n){const{nodes:e,materials:t}=Gt(JJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(JJ);const qJ="/gpu-programming/assets/eyes_ecstacy_frame_2-BOv7MWj_.glb";function u1e(n){const{nodes:e,materials:t}=Gt(qJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(qJ);const QJ="/gpu-programming/assets/eyes_fear-BL8fvSZL.glb";function c1e(n){const{nodes:e,materials:t}=Gt(QJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(QJ);const ZJ="/gpu-programming/assets/eyes_grief-cP7yoD10.glb";function h1e(n){const{nodes:e,materials:t}=Gt(ZJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(ZJ);const eq="/gpu-programming/assets/eyes_interest-TZH0NZC_.glb";function d1e(n){const{nodes:e,materials:t}=Gt(eq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(eq);const tq="/gpu-programming/assets/eyes_joy-B6oifIYP.glb";function f1e(n){const{nodes:e,materials:t}=Gt(tq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(tq);const nq="/gpu-programming/assets/eyes_loathing-C8bUCbQG.glb";function p1e(n){const{nodes:e,materials:t}=Gt(nq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(nq);const rq="/gpu-programming/assets/eyes_pensiveness-rZoWlZ1k.glb";function m1e(n){const{nodes:e,materials:t}=Gt(rq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(rq);const iq="/gpu-programming/assets/eyes_rage-BpM8Xr2x.glb";function g1e(n){const{nodes:e,materials:t}=Gt(iq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(iq);const sq="/gpu-programming/assets/eyes_sad-Coo-r01z.glb";function _1e(n){const{nodes:e,materials:t}=Gt(sq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(sq);const oq="/gpu-programming/assets/eyes_serenity-C07tnszo.glb";function v1e(n){const{nodes:e,materials:t}=Gt(oq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(oq);const aq="/gpu-programming/assets/eyes_surprise-eDHO2SUu.glb";function y1e(n){const{nodes:e,materials:t}=Gt(aq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(aq);const lq="/gpu-programming/assets/eyes_terror-CHUlLq9_.glb";function b1e(n){const{nodes:e,materials:t}=Gt(lq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(lq);const uq="/gpu-programming/assets/eyes_trust-DX4X5mD0.glb";function T1e(n){const{nodes:e,materials:t}=Gt(uq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(uq);const cq="/gpu-programming/assets/eyes_vigilance-CGqg-60Y.glb";function S1e(n){const{nodes:e,materials:t}=Gt(cq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(cq);const hq="/gpu-programming/assets/e_Sleeping-2563MAKh.glb";function w1e(n){const{nodes:e,materials:t}=Gt(hq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(hq);const dq="/gpu-programming/assets/e_SleepingZZZ-CGdMpHBj.glb";function E1e(n){const{nodes:e,materials:t}=Gt(dq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(dq);const fq="/gpu-programming/assets/e_Contempt-Bmkm0Bdj.glb";function x1e(n){const{nodes:e,materials:t}=Gt(fq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(fq);const pq="/gpu-programming/assets/e_ContentLeft-C4jtUFpf.glb";function $1e(n){const{nodes:e,materials:t}=Gt(pq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(pq);const mq="/gpu-programming/assets/e_ContentRight-BNMUpyf0.glb";function C1e(n){const{nodes:e,materials:t}=Gt(mq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(mq);const gq="/gpu-programming/assets/e_Disoriented-DCBMT2ea.glb";function M1e(n){const{nodes:e,materials:t}=Gt(gq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(gq);const _q="/gpu-programming/assets/e_EcstacyHilarious-Cl8xGsKE.glb";function A1e(n){const{nodes:e,materials:t}=Gt(_q);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(_q);const vq="/gpu-programming/assets/e_EcstacyStarryEyed-DRKN_BY4.glb";function I1e(n){const{nodes:e,materials:t}=Gt(vq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(vq);const yq="/gpu-programming/assets/e_JoyGoofy-B110L9cn.glb";function R1e(n){const{nodes:e,materials:t}=Gt(yq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(yq);const bq="/gpu-programming/assets/e_JoyGoofy2-BkM5jGNL.glb";function k1e(n){const{nodes:e,materials:t}=Gt(bq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(bq);const Tq="/gpu-programming/assets/e_JoyGoofy3-BJy3tNhw.glb";function O1e(n){const{nodes:e,materials:t}=Gt(Tq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(Tq);const Sq="/gpu-programming/assets/e_Love-BGY9OUZu.glb";function L1e(n){const{nodes:e,materials:t}=Gt(Sq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(Sq);const wq="/gpu-programming/assets/e_Rage-C3KmRLkq.glb";function N1e(n){const{nodes:e,materials:t}=Gt(wq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(wq);const Eq="/gpu-programming/assets/e_Rage2-mVNSFSuR.glb";function D1e(n){const{nodes:e,materials:t}=Gt(Eq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(Eq);const xq="/gpu-programming/assets/e_Rage3-BfYM2b7r.glb";function P1e(n){const{nodes:e,materials:t}=Gt(xq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(xq);const $q="/gpu-programming/assets/e_Rage4-oo9re96u.glb";function B1e(n){const{nodes:e,materials:t}=Gt($q);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload($q);const Cq="/gpu-programming/assets/e_RemorseShame-BrJPOqTm.glb";function F1e(n){const{nodes:e,materials:t}=Gt(Cq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Gt.preload(Cq);const z1e={"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl":$be,"package://misty_description/meshes/BASE_LEFT_COVER_1.stl":Cbe,"package://misty_description/meshes/base_link.stl":Mbe,"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl":Abe,"package://misty_description/meshes/Battery_1.stl":Ibe,"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl":Rbe,"package://misty_description/meshes/EYE_LENS_1.stl":Lbe,"package://misty_description/meshes/FACE_1.stl":Nbe,"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl":Dbe,"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl":Pbe,"package://misty_description/meshes/HEAD_1.stl":Bbe,"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl":Fbe,"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl":zbe,"package://misty_description/meshes/LEFT_ARM_1.stl":Ube,"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl":Hbe,"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl":Gbe,"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl":Wbe,"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl":Vbe,"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl":jbe,"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl":Ybe,"package://misty_description/meshes/RIGHT_ARM_1.stl":Xbe,"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl":Kbe,"package://misty_description/meshes/Torso_1.stl":Jbe,"package://misty_description/meshes/VISOR_GLASS_1.stl":qbe,e_Sleeping:w1e,e_SleepingZZZ:E1e,e_Contempt:x1e,e_ContentLeft:$1e,e_ContentRight:C1e,e_Disoriented:M1e,e_EcstacyHilarious:A1e,e_EcstacyStarryEyed:I1e,e_JoyGoofy:R1e,e_JoyGoofy2:k1e,e_JoyGoofy3:O1e,e_Love:L1e,e_Rage:N1e,e_Rage2:D1e,e_Rage3:P1e,e_Rage4:B1e,e_RemorseShame:F1e,eyes_acceptance:Qbe,eyes_admiration:Zbe,eyes_amazement:e1e,eyes_anger:t1e,eyes_annoyed:r1e,eyes_anticipation:n1e,eyes_apprehension:i1e,eyes_apprehension_1:s1e,eyes_boredom:o1e,eyes_default:vG,eyes_disgust:a1e,eyes_distraction:vG,eyes_ecstasy_frame_1:l1e,eyes_ecstasy_frame_2:u1e,eyes_fear:c1e,eyes_grief:h1e,eyes_interest:d1e,eyes_joy:f1e,eyes_loathing:p1e,eyes_pensiveness:m1e,eyes_rage:g1e,eyes_sad:_1e,eyes_serenity:v1e,eyes_surprise:y1e,eyes_terror:b1e,eyes_trust:T1e,eyes_vigilance:S1e};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const fE="143",l1={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},u1={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Mq=0,eP=1,Aq=2,U1e=3,Iq=0,r2=1,t$=2,E1=3,f_=0,cd=1,lp=2,Rq=1,H1e=2,pp=0,pv=1,_R=2,tP=3,nP=4,kq=5,p1=100,Oq=101,GF=102,rP=103,iP=104,Lq=200,Nq=201,Dq=202,Pq=203,i2=204,s2=205,Bq=206,Fq=207,zq=208,Uq=209,Hq=210,Gq=0,Wq=1,Vq=2,vR=3,jq=4,Yq=5,Xq=6,Kq=7,RC=0,Jq=1,qq=2,l0=0,Qq=1,Zq=2,eQ=3,WF=4,tQ=5,o2=300,Gy=301,Wy=302,B$=303,F$=304,pE=306,Lw=1e3,ap=1001,z$=1002,Wl=1003,yR=1004,G1e=1004,bR=1005,W1e=1005,wl=1006,VF=1007,V1e=1007,uT=1008,j1e=1008,af=1009,nQ=1010,rQ=1011,jF=1012,iQ=1013,hv=1014,r_=1015,Z1=1016,sQ=1017,oQ=1018,Py=1020,aQ=1021,lQ=1022,jp=1023,uQ=1024,cQ=1025,By=1026,Vy=1027,hQ=1028,dQ=1029,fQ=1030,pQ=1031,mQ=1033,_I=33776,vI=33777,yI=33778,bI=33779,sP=35840,oP=35841,aP=35842,lP=35843,gQ=36196,uP=37492,cP=37496,hP=37808,dP=37809,fP=37810,pP=37811,mP=37812,gP=37813,_P=37814,vP=37815,yP=37816,bP=37817,TP=37818,SP=37819,wP=37820,EP=37821,xP=36492,_Q=2200,vQ=2201,yQ=2202,U$=2300,H$=2301,TI=2302,x1=2400,$1=2401,G$=2402,a2=2500,YF=2501,Y1e=0,X1e=1,K1e=2,Eg=3e3,ms=3001,nb=3200,Nw=3201,cT=0,bQ=1,J1e="",J0="srgb",xy="srgb-linear",q1e=0,SI=7680,Q1e=7681,Z1e=7682,eTe=7683,tTe=34055,nTe=34056,rTe=5386,iTe=512,sTe=513,oTe=514,aTe=515,lTe=516,uTe=517,cTe=518,TQ=519,W$=35044,N1=35048,hTe=35040,dTe=35045,fTe=35049,pTe=35041,mTe=35046,gTe=35050,_Te=35042,vTe="100",$P="300 es",TR=1035;class Vm{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const r=t.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Cf=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let yG=1234567;const D1=Math.PI/180,V$=180/Math.PI;function Dm(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Cf[n&255]+Cf[n>>8&255]+Cf[n>>16&255]+Cf[n>>24&255]+"-"+Cf[e&255]+Cf[e>>8&255]+"-"+Cf[e>>16&15|64]+Cf[e>>24&255]+"-"+Cf[t&63|128]+Cf[t>>8&255]+"-"+Cf[t>>16&255]+Cf[t>>24&255]+Cf[r&255]+Cf[r>>8&255]+Cf[r>>16&255]+Cf[r>>24&255]).toLowerCase()}function hh(n,e,t){return Math.max(e,Math.min(t,n))}function XF(n,e){return(n%e+e)%e}function yTe(n,e,t,r,s){return r+(n-e)*(s-r)/(t-e)}function bTe(n,e,t){return n!==e?(t-n)/(e-n):0}function n$(n,e,t){return(1-t)*n+t*e}function TTe(n,e,t,r){return n$(n,e,1-Math.exp(-t*r))}function STe(n,e=1){return e-Math.abs(XF(n,e*2)-e)}function wTe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function ETe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function xTe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function $Te(n,e){return n+Math.random()*(e-n)}function CTe(n){return n*(.5-Math.random())}function MTe(n){n!==void 0&&(yG=n);let e=yG+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function ATe(n){return n*D1}function ITe(n){return n*V$}function CP(n){return(n&n-1)===0&&n!==0}function SQ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function SR(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function RTe(n,e,t,r,s){const o=Math.cos,l=Math.sin,u=o(t/2),h=l(t/2),f=o((e+r)/2),g=l((e+r)/2),y=o((e-r)/2),b=l((e-r)/2),S=o((r-e)/2),C=l((r-e)/2);switch(s){case"XYX":n.set(u*g,h*y,h*b,u*f);break;case"YZY":n.set(h*b,u*g,h*y,u*f);break;case"ZXZ":n.set(h*y,h*b,u*g,u*f);break;case"XZX":n.set(u*g,h*C,h*S,u*f);break;case"YXY":n.set(h*S,u*g,h*C,u*f);break;case"ZYZ":n.set(h*C,h*S,u*g,u*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function kTe(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function OTe(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var wQ=Object.freeze({__proto__:null,DEG2RAD:D1,RAD2DEG:V$,generateUUID:Dm,clamp:hh,euclideanModulo:XF,mapLinear:yTe,inverseLerp:bTe,lerp:n$,damp:TTe,pingpong:STe,smoothstep:wTe,smootherstep:ETe,randInt:xTe,randFloat:$Te,randFloatSpread:CTe,seededRandom:MTe,degToRad:ATe,radToDeg:ITe,isPowerOfTwo:CP,ceilPowerOfTwo:SQ,floorPowerOfTwo:SR,setQuaternionFromProperEuler:RTe,normalize:OTe,denormalize:kTe});class jt{constructor(e=0,t=0){jt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6],this.y=s[1]*t+s[4]*r+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*r-l*s+e.x,this.y=o*s+l*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class up{constructor(){up.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,s,o,l,u,h,f){const g=this.elements;return g[0]=e,g[1]=s,g[2]=u,g[3]=t,g[4]=o,g[5]=h,g[6]=r,g[7]=l,g[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,o=this.elements,l=r[0],u=r[3],h=r[6],f=r[1],g=r[4],y=r[7],b=r[2],S=r[5],C=r[8],M=s[0],A=s[3],O=s[6],L=s[1],B=s[4],D=s[7],z=s[2],U=s[5],V=s[8];return o[0]=l*M+u*L+h*z,o[3]=l*A+u*B+h*U,o[6]=l*O+u*D+h*V,o[1]=f*M+g*L+y*z,o[4]=f*A+g*B+y*U,o[7]=f*O+g*D+y*V,o[2]=b*M+S*L+C*z,o[5]=b*A+S*B+C*U,o[8]=b*O+S*D+C*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8];return t*l*g-t*u*f-r*o*g+r*u*h+s*o*f-s*l*h}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8],y=g*l-u*f,b=u*h-g*o,S=f*o-l*h,C=t*y+r*b+s*S;if(C===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/C;return e[0]=y*M,e[1]=(s*f-g*r)*M,e[2]=(u*r-s*l)*M,e[3]=b*M,e[4]=(g*t-s*h)*M,e[5]=(s*o-u*t)*M,e[6]=S*M,e[7]=(r*h-f*t)*M,e[8]=(l*t-r*o)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,s,o,l,u){const h=Math.cos(o),f=Math.sin(o);return this.set(r*h,r*f,-r*(h*l+f*u)+l+e,-s*f,s*h,-s*(-f*l+h*u)+u+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),s=this.elements,o=s[0],l=s[3],u=s[6],h=s[1],f=s[4],g=s[7];return s[0]=t*o+r*h,s[3]=t*l+r*f,s[6]=t*u+r*g,s[1]=-r*o+t*h,s[4]=-r*l+t*f,s[7]=-r*u+t*g,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<9;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function EQ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}const LTe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function QS(n,e){return new LTe[n](e)}function j$(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function P1(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function wI(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const _L={[J0]:{[xy]:P1},[xy]:{[J0]:wI}},lg={legacyMode:!0,get workingColorSpace(){return xy},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(_L[e]&&_L[e][t]!==void 0){const r=_L[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},xQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},od={r:0,g:0,b:0},Vg={h:0,s:0,l:0},GM={h:0,s:0,l:0};function vL(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function WM(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Bn{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=J0){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,lg.toWorkingColorSpace(this,t),this}setRGB(e,t,r,s=xy){return this.r=e,this.g=t,this.b=r,lg.toWorkingColorSpace(this,s),this}setHSL(e,t,r,s=xy){if(e=XF(e,1),t=hh(t,0,1),r=hh(r,0,1),t===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+t):r+t-r*t,l=2*r-o;this.r=vL(l,o,e+1/3),this.g=vL(l,o,e),this.b=vL(l,o,e-1/3)}return lg.toWorkingColorSpace(this,s),this}setStyle(e,t=J0){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,lg.toWorkingColorSpace(this,t),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,lg.toWorkingColorSpace(this,t),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u)){const h=parseFloat(o[1])/360,f=parseInt(o[2],10)/100,g=parseInt(o[3],10)/100;return r(o[4]),this.setHSL(h,f,g,t)}break}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,lg.toWorkingColorSpace(this,t),this;if(l===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,lg.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=J0){const r=xQ[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=P1(e.r),this.g=P1(e.g),this.b=P1(e.b),this}copyLinearToSRGB(e){return this.r=wI(e.r),this.g=wI(e.g),this.b=wI(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=J0){return lg.fromWorkingColorSpace(WM(this,od),e),hh(od.r*255,0,255)<<16^hh(od.g*255,0,255)<<8^hh(od.b*255,0,255)<<0}getHexString(e=J0){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=xy){lg.fromWorkingColorSpace(WM(this,od),t);const r=od.r,s=od.g,o=od.b,l=Math.max(r,s,o),u=Math.min(r,s,o);let h,f;const g=(u+l)/2;if(u===l)h=0,f=0;else{const y=l-u;switch(f=g<=.5?y/(l+u):y/(2-l-u),l){case r:h=(s-o)/y+(s<o?6:0);break;case s:h=(o-r)/y+2;break;case o:h=(r-s)/y+4;break}h/=6}return e.h=h,e.s=f,e.l=g,e}getRGB(e,t=xy){return lg.fromWorkingColorSpace(WM(this,od),t),e.r=od.r,e.g=od.g,e.b=od.b,e}getStyle(e=J0){return lg.fromWorkingColorSpace(WM(this,od),e),e!==J0?`color(${e} ${od.r} ${od.g} ${od.b})`:`rgb(${od.r*255|0},${od.g*255|0},${od.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(Vg),Vg.h+=e,Vg.s+=t,Vg.l+=r,this.setHSL(Vg.h,Vg.s,Vg.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Vg),e.getHSL(GM);const r=n$(Vg.h,GM.h,t),s=n$(Vg.s,GM.s,t),o=n$(Vg.l,GM.l,t);return this.setHSL(r,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Bn.NAMES=xQ;let pS;class KF{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{pS===void 0&&(pS=j$("canvas")),pS.width=e.width,pS.height=e.height;const r=pS.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=pS}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=j$("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=P1(o[l]/255)*255;return r.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(P1(t[r]/255)*255):t[r]=P1(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class C1{constructor(e=null){this.isSource=!0,this.uuid=Dm(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(yL(s[l].image)):o.push(yL(s[l]))}else o=yL(s);r.url=o}return t||(e.images[this.uuid]=r),r}}function yL(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?KF.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let NTe=0;class hc extends Vm{constructor(e=hc.DEFAULT_IMAGE,t=hc.DEFAULT_MAPPING,r=ap,s=ap,o=wl,l=uT,u=jp,h=af,f=1,g=Eg){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:NTe++}),this.uuid=Dm(),this.name="",this.source=new C1(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=f,this.format=u,this.internalFormat=null,this.type=h,this.offset=new jt(0,0),this.repeat=new jt(1,1),this.center=new jt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new up,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=g,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==o2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Lw:e.x=e.x-Math.floor(e.x);break;case ap:e.x=e.x<0?0:1;break;case z$:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Lw:e.y=e.y-Math.floor(e.y);break;case ap:e.y=e.y<0?0:1;break;case z$:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}hc.DEFAULT_IMAGE=null;hc.DEFAULT_MAPPING=o2;class Ts{constructor(e=0,t=0,r=0,s=1){Ts.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,s){return this.x=e,this.y=t,this.z=r,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*r+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*r+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*r+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*r+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,s,o;const l=e.elements,u=l[0],h=l[4],f=l[8],g=l[1],y=l[5],b=l[9],S=l[2],C=l[6],M=l[10];if(Math.abs(h-g)<.01&&Math.abs(f-S)<.01&&Math.abs(b-C)<.01){if(Math.abs(h+g)<.1&&Math.abs(f+S)<.1&&Math.abs(b+C)<.1&&Math.abs(u+y+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const O=(u+1)/2,L=(y+1)/2,B=(M+1)/2,D=(h+g)/4,z=(f+S)/4,U=(b+C)/4;return O>L&&O>B?O<.01?(r=0,s=.707106781,o=.707106781):(r=Math.sqrt(O),s=D/r,o=z/r):L>B?L<.01?(r=.707106781,s=0,o=.707106781):(s=Math.sqrt(L),r=D/s,o=U/s):B<.01?(r=.707106781,s=.707106781,o=0):(o=Math.sqrt(B),r=z/o,s=U/o),this.set(r,s,o,t),this}let A=Math.sqrt((C-b)*(C-b)+(f-S)*(f-S)+(g-h)*(g-h));return Math.abs(A)<.001&&(A=1),this.x=(C-b)/A,this.y=(f-S)/A,this.z=(g-h)/A,this.w=Math.acos((u+y+M-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Nc extends Vm{constructor(e,t,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ts(0,0,e,t),this.scissorTest=!1,this.viewport=new Ts(0,0,e,t);const s={width:e,height:t,depth:1};this.texture=new hc(s,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:wl,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new C1(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class kC extends hc{constructor(e=null,t=1,r=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:s},this.magFilter=Wl,this.minFilter=Wl,this.wrapR=ap,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class DTe extends Nc{constructor(e,t,r){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new kC(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class l2 extends hc{constructor(e=null,t=1,r=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:s},this.magFilter=Wl,this.minFilter=Wl,this.wrapR=ap,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class PTe extends Nc{constructor(e,t,r){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new l2(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class BTe extends Nc{constructor(e,t,r,s={}){super(e,t,s),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let l=0;l<r;l++)this.texture[l]=o.clone(),this.texture[l].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let s=0,o=this.texture.length;s<o;s++)this.texture[s].image.width=e,this.texture[s].image.height=t,this.texture[s].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Sl{constructor(e=0,t=0,r=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=s}static slerpFlat(e,t,r,s,o,l,u){let h=r[s+0],f=r[s+1],g=r[s+2],y=r[s+3];const b=o[l+0],S=o[l+1],C=o[l+2],M=o[l+3];if(u===0){e[t+0]=h,e[t+1]=f,e[t+2]=g,e[t+3]=y;return}if(u===1){e[t+0]=b,e[t+1]=S,e[t+2]=C,e[t+3]=M;return}if(y!==M||h!==b||f!==S||g!==C){let A=1-u;const O=h*b+f*S+g*C+y*M,L=O>=0?1:-1,B=1-O*O;if(B>Number.EPSILON){const z=Math.sqrt(B),U=Math.atan2(z,O*L);A=Math.sin(A*U)/z,u=Math.sin(u*U)/z}const D=u*L;if(h=h*A+b*D,f=f*A+S*D,g=g*A+C*D,y=y*A+M*D,A===1-u){const z=1/Math.sqrt(h*h+f*f+g*g+y*y);h*=z,f*=z,g*=z,y*=z}}e[t]=h,e[t+1]=f,e[t+2]=g,e[t+3]=y}static multiplyQuaternionsFlat(e,t,r,s,o,l){const u=r[s],h=r[s+1],f=r[s+2],g=r[s+3],y=o[l],b=o[l+1],S=o[l+2],C=o[l+3];return e[t]=u*C+g*y+h*S-f*b,e[t+1]=h*C+g*b+f*y-u*S,e[t+2]=f*C+g*S+u*b-h*y,e[t+3]=g*C-u*y-h*b-f*S,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,s){return this._x=e,this._y=t,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,h=Math.sin,f=u(r/2),g=u(s/2),y=u(o/2),b=h(r/2),S=h(s/2),C=h(o/2);switch(l){case"XYZ":this._x=b*g*y+f*S*C,this._y=f*S*y-b*g*C,this._z=f*g*C+b*S*y,this._w=f*g*y-b*S*C;break;case"YXZ":this._x=b*g*y+f*S*C,this._y=f*S*y-b*g*C,this._z=f*g*C-b*S*y,this._w=f*g*y+b*S*C;break;case"ZXY":this._x=b*g*y-f*S*C,this._y=f*S*y+b*g*C,this._z=f*g*C+b*S*y,this._w=f*g*y-b*S*C;break;case"ZYX":this._x=b*g*y-f*S*C,this._y=f*S*y+b*g*C,this._z=f*g*C-b*S*y,this._w=f*g*y+b*S*C;break;case"YZX":this._x=b*g*y+f*S*C,this._y=f*S*y+b*g*C,this._z=f*g*C-b*S*y,this._w=f*g*y-b*S*C;break;case"XZY":this._x=b*g*y-f*S*C,this._y=f*S*y-b*g*C,this._z=f*g*C+b*S*y,this._w=f*g*y+b*S*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,s=Math.sin(r);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],s=t[4],o=t[8],l=t[1],u=t[5],h=t[9],f=t[2],g=t[6],y=t[10],b=r+u+y;if(b>0){const S=.5/Math.sqrt(b+1);this._w=.25/S,this._x=(g-h)*S,this._y=(o-f)*S,this._z=(l-s)*S}else if(r>u&&r>y){const S=2*Math.sqrt(1+r-u-y);this._w=(g-h)/S,this._x=.25*S,this._y=(s+l)/S,this._z=(o+f)/S}else if(u>y){const S=2*Math.sqrt(1+u-r-y);this._w=(o-f)/S,this._x=(s+l)/S,this._y=.25*S,this._z=(h+g)/S}else{const S=2*Math.sqrt(1+y-r-u);this._w=(l-s)/S,this._x=(o+f)/S,this._y=(h+g)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(hh(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const s=Math.min(1,t/r);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,s=e._y,o=e._z,l=e._w,u=t._x,h=t._y,f=t._z,g=t._w;return this._x=r*g+l*u+s*f-o*h,this._y=s*g+l*h+o*u-r*f,this._z=o*g+l*f+r*h-s*u,this._w=l*g-r*u-s*h-o*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+r*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=r,this._y=s,this._z=o,this;const h=1-u*u;if(h<=Number.EPSILON){const S=1-t;return this._w=S*l+t*this._w,this._x=S*r+t*this._x,this._y=S*s+t*this._y,this._z=S*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(h),g=Math.atan2(f,u),y=Math.sin((1-t)*g)/f,b=Math.sin(t*g)/f;return this._w=l*y+this._w*b,this._x=r*y+this._x*b,this._y=s*y+this._y*b,this._z=o*y+this._z*b,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),s=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(s),r*Math.sin(o),r*Math.cos(o),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ae{constructor(e=0,t=0,r=0){Ae.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(bG.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(bG.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6]*s,this.y=o[1]*t+o[4]*r+o[7]*s,this.z=o[2]*t+o[5]*r+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*r+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*r+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*r+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,r=this.y,s=this.z,o=e.x,l=e.y,u=e.z,h=e.w,f=h*t+l*s-u*r,g=h*r+u*t-o*s,y=h*s+o*r-l*t,b=-o*t-l*r-u*s;return this.x=f*h+b*-o+g*-u-y*-l,this.y=g*h+b*-l+y*-o-f*-u,this.z=y*h+b*-u+f*-l-g*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*s,this.y=o[1]*t+o[5]*r+o[9]*s,this.z=o[2]*t+o[6]*r+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,s=e.y,o=e.z,l=t.x,u=t.y,h=t.z;return this.x=s*h-o*u,this.y=o*l-r*h,this.z=r*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return bL.copy(this).projectOnVector(e),this.sub(bL)}reflect(e){return this.sub(bL.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(hh(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,s=this.z-e.z;return t*t+r*r+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const s=Math.sin(t)*e;return this.x=s*Math.sin(r),this.y=Math.cos(t)*e,this.z=s*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const bL=new Ae,bG=new Sl;class d0{constructor(e=new Ae(1/0,1/0,1/0),t=new Ae(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let h=0,f=e.length;h<f;h+=3){const g=e[h],y=e[h+1],b=e[h+2];g<t&&(t=g),y<r&&(r=y),b<s&&(s=b),g>o&&(o=g),y>l&&(l=y),b>u&&(u=b)}return this.min.set(t,r,s),this.max.set(o,l,u),this}setFromBufferAttribute(e){let t=1/0,r=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let h=0,f=e.count;h<f;h++){const g=e.getX(h),y=e.getY(h),b=e.getZ(h);g<t&&(t=g),y<r&&(r=y),b<s&&(s=b),g>o&&(o=g),y>l&&(l=y),b>u&&(u=b)}return this.min.set(t,r,s),this.max.set(o,l,u),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Wb.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const o=r.attributes.position;for(let l=0,u=o.count;l<u;l++)Wb.fromBufferAttribute(o,l).applyMatrix4(e.matrixWorld),this.expandByPoint(Wb)}else r.boundingBox===null&&r.computeBoundingBox(),TL.copy(r.boundingBox),TL.applyMatrix4(e.matrixWorld),this.union(TL);const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Wb),Wb.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ux),VM.subVectors(this.max,ux),mS.subVectors(e.a,ux),gS.subVectors(e.b,ux),_S.subVectors(e.c,ux),iy.subVectors(gS,mS),sy.subVectors(_S,gS),Vb.subVectors(mS,_S);let t=[0,-iy.z,iy.y,0,-sy.z,sy.y,0,-Vb.z,Vb.y,iy.z,0,-iy.x,sy.z,0,-sy.x,Vb.z,0,-Vb.x,-iy.y,iy.x,0,-sy.y,sy.x,0,-Vb.y,Vb.x,0];return!SL(t,mS,gS,_S,VM)||(t=[1,0,0,0,1,0,0,0,1],!SL(t,mS,gS,_S,VM))?!1:(jM.crossVectors(iy,sy),t=[jM.x,jM.y,jM.z],SL(t,mS,gS,_S,VM))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Wb.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Wb).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(J_[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),J_[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),J_[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),J_[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),J_[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),J_[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),J_[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),J_[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(J_),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const J_=[new Ae,new Ae,new Ae,new Ae,new Ae,new Ae,new Ae,new Ae],Wb=new Ae,TL=new d0,mS=new Ae,gS=new Ae,_S=new Ae,iy=new Ae,sy=new Ae,Vb=new Ae,ux=new Ae,VM=new Ae,jM=new Ae,jb=new Ae;function SL(n,e,t,r,s){for(let o=0,l=n.length-3;o<=l;o+=3){jb.fromArray(n,o);const u=s.x*Math.abs(jb.x)+s.y*Math.abs(jb.y)+s.z*Math.abs(jb.z),h=e.dot(jb),f=t.dot(jb),g=r.dot(jb);if(Math.max(-Math.max(h,f,g),Math.min(h,f,g))>u)return!1}return!0}const FTe=new d0,TG=new Ae,YM=new Ae,wL=new Ae;class y_{constructor(e=new Ae,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):FTe.setFromPoints(e).getCenter(r);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){wL.subVectors(e,this.center);const t=wL.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),s=(r-this.radius)*.5;this.center.add(wL.multiplyScalar(s/r)),this.radius+=s}return this}union(e){return this.center.equals(e.center)===!0?YM.set(0,0,1).multiplyScalar(e.radius):YM.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(TG.copy(e.center).add(YM)),this.expandByPoint(TG.copy(e.center).sub(YM)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const q_=new Ae,EL=new Ae,XM=new Ae,oy=new Ae,xL=new Ae,KM=new Ae,$L=new Ae;class OC{constructor(e=new Ae,t=new Ae(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,q_)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=q_.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(q_.copy(this.direction).multiplyScalar(t).add(this.origin),q_.distanceToSquared(e))}distanceSqToSegment(e,t,r,s){EL.copy(e).add(t).multiplyScalar(.5),XM.copy(t).sub(e).normalize(),oy.copy(this.origin).sub(EL);const o=e.distanceTo(t)*.5,l=-this.direction.dot(XM),u=oy.dot(this.direction),h=-oy.dot(XM),f=oy.lengthSq(),g=Math.abs(1-l*l);let y,b,S,C;if(g>0)if(y=l*h-u,b=l*u-h,C=o*g,y>=0)if(b>=-C)if(b<=C){const M=1/g;y*=M,b*=M,S=y*(y+l*b+2*u)+b*(l*y+b+2*h)+f}else b=o,y=Math.max(0,-(l*b+u)),S=-y*y+b*(b+2*h)+f;else b=-o,y=Math.max(0,-(l*b+u)),S=-y*y+b*(b+2*h)+f;else b<=-C?(y=Math.max(0,-(-l*o+u)),b=y>0?-o:Math.min(Math.max(-o,-h),o),S=-y*y+b*(b+2*h)+f):b<=C?(y=0,b=Math.min(Math.max(-o,-h),o),S=b*(b+2*h)+f):(y=Math.max(0,-(l*o+u)),b=y>0?o:Math.min(Math.max(-o,-h),o),S=-y*y+b*(b+2*h)+f);else b=l>0?-o:o,y=Math.max(0,-(l*b+u)),S=-y*y+b*(b+2*h)+f;return r&&r.copy(this.direction).multiplyScalar(y).add(this.origin),s&&s.copy(XM).multiplyScalar(b).add(EL),S}intersectSphere(e,t){q_.subVectors(e.center,this.origin);const r=q_.dot(this.direction),s=q_.dot(q_)-r*r,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=r-l,h=r+l;return u<0&&h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,s,o,l,u,h;const f=1/this.direction.x,g=1/this.direction.y,y=1/this.direction.z,b=this.origin;return f>=0?(r=(e.min.x-b.x)*f,s=(e.max.x-b.x)*f):(r=(e.max.x-b.x)*f,s=(e.min.x-b.x)*f),g>=0?(o=(e.min.y-b.y)*g,l=(e.max.y-b.y)*g):(o=(e.max.y-b.y)*g,l=(e.min.y-b.y)*g),r>l||o>s||((o>r||r!==r)&&(r=o),(l<s||s!==s)&&(s=l),y>=0?(u=(e.min.z-b.z)*y,h=(e.max.z-b.z)*y):(u=(e.max.z-b.z)*y,h=(e.min.z-b.z)*y),r>h||u>s)||((u>r||r!==r)&&(r=u),(h<s||s!==s)&&(s=h),s<0)?null:this.at(r>=0?r:s,t)}intersectsBox(e){return this.intersectBox(e,q_)!==null}intersectTriangle(e,t,r,s,o){xL.subVectors(t,e),KM.subVectors(r,e),$L.crossVectors(xL,KM);let l=this.direction.dot($L),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;oy.subVectors(this.origin,e);const h=u*this.direction.dot(KM.crossVectors(oy,KM));if(h<0)return null;const f=u*this.direction.dot(xL.cross(oy));if(f<0||h+f>l)return null;const g=-u*oy.dot($L);return g<0?null:this.at(g/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Qr{constructor(){Qr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,s,o,l,u,h,f,g,y,b,S,C,M,A){const O=this.elements;return O[0]=e,O[4]=t,O[8]=r,O[12]=s,O[1]=o,O[5]=l,O[9]=u,O[13]=h,O[2]=f,O[6]=g,O[10]=y,O[14]=b,O[3]=S,O[7]=C,O[11]=M,O[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Qr().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,s=1/vS.setFromMatrixColumn(e,0).length(),o=1/vS.setFromMatrixColumn(e,1).length(),l=1/vS.setFromMatrixColumn(e,2).length();return t[0]=r[0]*s,t[1]=r[1]*s,t[2]=r[2]*s,t[3]=0,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=0,t[8]=r[8]*l,t[9]=r[9]*l,t[10]=r[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,s=e.y,o=e.z,l=Math.cos(r),u=Math.sin(r),h=Math.cos(s),f=Math.sin(s),g=Math.cos(o),y=Math.sin(o);if(e.order==="XYZ"){const b=l*g,S=l*y,C=u*g,M=u*y;t[0]=h*g,t[4]=-h*y,t[8]=f,t[1]=S+C*f,t[5]=b-M*f,t[9]=-u*h,t[2]=M-b*f,t[6]=C+S*f,t[10]=l*h}else if(e.order==="YXZ"){const b=h*g,S=h*y,C=f*g,M=f*y;t[0]=b+M*u,t[4]=C*u-S,t[8]=l*f,t[1]=l*y,t[5]=l*g,t[9]=-u,t[2]=S*u-C,t[6]=M+b*u,t[10]=l*h}else if(e.order==="ZXY"){const b=h*g,S=h*y,C=f*g,M=f*y;t[0]=b-M*u,t[4]=-l*y,t[8]=C+S*u,t[1]=S+C*u,t[5]=l*g,t[9]=M-b*u,t[2]=-l*f,t[6]=u,t[10]=l*h}else if(e.order==="ZYX"){const b=l*g,S=l*y,C=u*g,M=u*y;t[0]=h*g,t[4]=C*f-S,t[8]=b*f+M,t[1]=h*y,t[5]=M*f+b,t[9]=S*f-C,t[2]=-f,t[6]=u*h,t[10]=l*h}else if(e.order==="YZX"){const b=l*h,S=l*f,C=u*h,M=u*f;t[0]=h*g,t[4]=M-b*y,t[8]=C*y+S,t[1]=y,t[5]=l*g,t[9]=-u*g,t[2]=-f*g,t[6]=S*y+C,t[10]=b-M*y}else if(e.order==="XZY"){const b=l*h,S=l*f,C=u*h,M=u*f;t[0]=h*g,t[4]=-y,t[8]=f*g,t[1]=b*y+M,t[5]=l*g,t[9]=S*y-C,t[2]=C*y-S,t[6]=u*g,t[10]=M*y+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(zTe,e,UTe)}lookAt(e,t,r){const s=this.elements;return xm.subVectors(e,t),xm.lengthSq()===0&&(xm.z=1),xm.normalize(),ay.crossVectors(r,xm),ay.lengthSq()===0&&(Math.abs(r.z)===1?xm.x+=1e-4:xm.z+=1e-4,xm.normalize(),ay.crossVectors(r,xm)),ay.normalize(),JM.crossVectors(xm,ay),s[0]=ay.x,s[4]=JM.x,s[8]=xm.x,s[1]=ay.y,s[5]=JM.y,s[9]=xm.y,s[2]=ay.z,s[6]=JM.z,s[10]=xm.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,o=this.elements,l=r[0],u=r[4],h=r[8],f=r[12],g=r[1],y=r[5],b=r[9],S=r[13],C=r[2],M=r[6],A=r[10],O=r[14],L=r[3],B=r[7],D=r[11],z=r[15],U=s[0],V=s[4],H=s[8],oe=s[12],le=s[1],Z=s[5],q=s[9],he=s[13],ae=s[2],ue=s[6],ge=s[10],we=s[14],J=s[3],re=s[7],ie=s[11],fe=s[15];return o[0]=l*U+u*le+h*ae+f*J,o[4]=l*V+u*Z+h*ue+f*re,o[8]=l*H+u*q+h*ge+f*ie,o[12]=l*oe+u*he+h*we+f*fe,o[1]=g*U+y*le+b*ae+S*J,o[5]=g*V+y*Z+b*ue+S*re,o[9]=g*H+y*q+b*ge+S*ie,o[13]=g*oe+y*he+b*we+S*fe,o[2]=C*U+M*le+A*ae+O*J,o[6]=C*V+M*Z+A*ue+O*re,o[10]=C*H+M*q+A*ge+O*ie,o[14]=C*oe+M*he+A*we+O*fe,o[3]=L*U+B*le+D*ae+z*J,o[7]=L*V+B*Z+D*ue+z*re,o[11]=L*H+B*q+D*ge+z*ie,o[15]=L*oe+B*he+D*we+z*fe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],s=e[8],o=e[12],l=e[1],u=e[5],h=e[9],f=e[13],g=e[2],y=e[6],b=e[10],S=e[14],C=e[3],M=e[7],A=e[11],O=e[15];return C*(+o*h*y-s*f*y-o*u*b+r*f*b+s*u*S-r*h*S)+M*(+t*h*S-t*f*b+o*l*b-s*l*S+s*f*g-o*h*g)+A*(+t*f*y-t*u*S-o*l*y+r*l*S+o*u*g-r*f*g)+O*(-s*u*g-t*h*y+t*u*b+s*l*y-r*l*b+r*h*g)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8],y=e[9],b=e[10],S=e[11],C=e[12],M=e[13],A=e[14],O=e[15],L=y*A*f-M*b*f+M*h*S-u*A*S-y*h*O+u*b*O,B=C*b*f-g*A*f-C*h*S+l*A*S+g*h*O-l*b*O,D=g*M*f-C*y*f+C*u*S-l*M*S-g*u*O+l*y*O,z=C*y*h-g*M*h-C*u*b+l*M*b+g*u*A-l*y*A,U=t*L+r*B+s*D+o*z;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const V=1/U;return e[0]=L*V,e[1]=(M*b*o-y*A*o-M*s*S+r*A*S+y*s*O-r*b*O)*V,e[2]=(u*A*o-M*h*o+M*s*f-r*A*f-u*s*O+r*h*O)*V,e[3]=(y*h*o-u*b*o-y*s*f+r*b*f+u*s*S-r*h*S)*V,e[4]=B*V,e[5]=(g*A*o-C*b*o+C*s*S-t*A*S-g*s*O+t*b*O)*V,e[6]=(C*h*o-l*A*o-C*s*f+t*A*f+l*s*O-t*h*O)*V,e[7]=(l*b*o-g*h*o+g*s*f-t*b*f-l*s*S+t*h*S)*V,e[8]=D*V,e[9]=(C*y*o-g*M*o-C*r*S+t*M*S+g*r*O-t*y*O)*V,e[10]=(l*M*o-C*u*o+C*r*f-t*M*f-l*r*O+t*u*O)*V,e[11]=(g*u*o-l*y*o-g*r*f+t*y*f+l*r*S-t*u*S)*V,e[12]=z*V,e[13]=(g*M*s-C*y*s+C*r*b-t*M*b-g*r*A+t*y*A)*V,e[14]=(C*u*s-l*M*s-C*r*h+t*M*h+l*r*A-t*u*A)*V,e[15]=(l*y*s-g*u*s+g*r*h-t*y*h-l*r*b+t*u*b)*V,this}scale(e){const t=this.elements,r=e.x,s=e.y,o=e.z;return t[0]*=r,t[4]*=s,t[8]*=o,t[1]*=r,t[5]*=s,t[9]*=o,t[2]*=r,t[6]*=s,t[10]*=o,t[3]*=r,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,s))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),s=Math.sin(t),o=1-r,l=e.x,u=e.y,h=e.z,f=o*l,g=o*u;return this.set(f*l+r,f*u-s*h,f*h+s*u,0,f*u+s*h,g*u+r,g*h-s*l,0,f*h-s*u,g*h+s*l,o*h*h+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,s,o,l){return this.set(1,r,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,r){const s=this.elements,o=t._x,l=t._y,u=t._z,h=t._w,f=o+o,g=l+l,y=u+u,b=o*f,S=o*g,C=o*y,M=l*g,A=l*y,O=u*y,L=h*f,B=h*g,D=h*y,z=r.x,U=r.y,V=r.z;return s[0]=(1-(M+O))*z,s[1]=(S+D)*z,s[2]=(C-B)*z,s[3]=0,s[4]=(S-D)*U,s[5]=(1-(b+O))*U,s[6]=(A+L)*U,s[7]=0,s[8]=(C+B)*V,s[9]=(A-L)*V,s[10]=(1-(b+M))*V,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,r){const s=this.elements;let o=vS.set(s[0],s[1],s[2]).length();const l=vS.set(s[4],s[5],s[6]).length(),u=vS.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],jg.copy(this);const h=1/o,f=1/l,g=1/u;return jg.elements[0]*=h,jg.elements[1]*=h,jg.elements[2]*=h,jg.elements[4]*=f,jg.elements[5]*=f,jg.elements[6]*=f,jg.elements[8]*=g,jg.elements[9]*=g,jg.elements[10]*=g,t.setFromRotationMatrix(jg),r.x=o,r.y=l,r.z=u,this}makePerspective(e,t,r,s,o,l){const u=this.elements,h=2*o/(t-e),f=2*o/(r-s),g=(t+e)/(t-e),y=(r+s)/(r-s),b=-(l+o)/(l-o),S=-2*l*o/(l-o);return u[0]=h,u[4]=0,u[8]=g,u[12]=0,u[1]=0,u[5]=f,u[9]=y,u[13]=0,u[2]=0,u[6]=0,u[10]=b,u[14]=S,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,r,s,o,l){const u=this.elements,h=1/(t-e),f=1/(r-s),g=1/(l-o),y=(t+e)*h,b=(r+s)*f,S=(l+o)*g;return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-y,u[1]=0,u[5]=2*f,u[9]=0,u[13]=-b,u[2]=0,u[6]=0,u[10]=-2*g,u[14]=-S,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<16;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const vS=new Ae,jg=new Qr,zTe=new Ae(0,0,0),UTe=new Ae(1,1,1),ay=new Ae,JM=new Ae,xm=new Ae,SG=new Qr,wG=new Sl;class hT{constructor(e=0,t=0,r=0,s=hT.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,s=this._order){return this._x=e,this._y=t,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],h=s[1],f=s[5],g=s[9],y=s[2],b=s[6],S=s[10];switch(t){case"XYZ":this._y=Math.asin(hh(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-g,S),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(b,f),this._z=0);break;case"YXZ":this._x=Math.asin(-hh(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(u,S),this._z=Math.atan2(h,f)):(this._y=Math.atan2(-y,o),this._z=0);break;case"ZXY":this._x=Math.asin(hh(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-y,S),this._z=Math.atan2(-l,f)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-hh(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(b,S),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,f));break;case"YZX":this._z=Math.asin(hh(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-g,f),this._y=Math.atan2(-y,o)):(this._x=0,this._y=Math.atan2(u,S));break;case"XZY":this._z=Math.asin(-hh(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(b,f),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-g,S),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return SG.makeRotationFromQuaternion(e),this.setFromRotationMatrix(SG,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return wG.setFromEuler(this),this.setFromQuaternion(wG,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}hT.DefaultOrder="XYZ";hT.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class B1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let HTe=0;const EG=new Ae,yS=new Sl,Q_=new Qr,qM=new Ae,cx=new Ae,GTe=new Ae,WTe=new Sl,xG=new Ae(1,0,0),$G=new Ae(0,1,0),CG=new Ae(0,0,1),VTe={type:"added"},MG={type:"removed"};class ro extends Vm{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:HTe++}),this.uuid=Dm(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ro.DefaultUp.clone();const e=new Ae,t=new hT,r=new Sl,s=new Ae(1,1,1);function o(){r.setFromEuler(t,!1)}function l(){t.setFromQuaternion(r,void 0,!1)}t._onChange(o),r._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Qr},normalMatrix:{value:new up}}),this.matrix=new Qr,this.matrixWorld=new Qr,this.matrixAutoUpdate=ro.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new B1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return yS.setFromAxisAngle(e,t),this.quaternion.multiply(yS),this}rotateOnWorldAxis(e,t){return yS.setFromAxisAngle(e,t),this.quaternion.premultiply(yS),this}rotateX(e){return this.rotateOnAxis(xG,e)}rotateY(e){return this.rotateOnAxis($G,e)}rotateZ(e){return this.rotateOnAxis(CG,e)}translateOnAxis(e,t){return EG.copy(e).applyQuaternion(this.quaternion),this.position.add(EG.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(xG,e)}translateY(e){return this.translateOnAxis($G,e)}translateZ(e){return this.translateOnAxis(CG,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Q_.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?qM.copy(e):qM.set(e,t,r);const s=this.parent;this.updateWorldMatrix(!0,!1),cx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Q_.lookAt(cx,qM,this.up):Q_.lookAt(qM,cx,this.up),this.quaternion.setFromRotationMatrix(Q_),s&&(Q_.extractRotation(s.matrixWorld),yS.setFromRotationMatrix(Q_),this.quaternion.premultiply(yS.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(VTe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(MG)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(MG)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Q_.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Q_.multiply(e.parent.matrixWorld)),e.applyMatrix4(Q_),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cx,e,GTe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cx,WTe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON()));function o(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let f=0,g=h.length;f<g;f++){const y=h[f];o(e.shapes,y)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,f=this.material.length;h<f;h++)u.push(o(e.materials,this.material[h]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];s.animations.push(o(e.animations,h))}}if(t){const u=l(e.geometries),h=l(e.materials),f=l(e.textures),g=l(e.images),y=l(e.shapes),b=l(e.skeletons),S=l(e.animations),C=l(e.nodes);u.length>0&&(r.geometries=u),h.length>0&&(r.materials=h),f.length>0&&(r.textures=f),g.length>0&&(r.images=g),y.length>0&&(r.shapes=y),b.length>0&&(r.skeletons=b),S.length>0&&(r.animations=S),C.length>0&&(r.nodes=C)}return r.object=s,r;function l(u){const h=[];for(const f in u){const g=u[f];delete g.metadata,h.push(g)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const s=e.children[r];this.add(s.clone())}return this}}ro.DefaultUp=new Ae(0,1,0);ro.DefaultMatrixAutoUpdate=!0;const Yg=new Ae,Z_=new Ae,CL=new Ae,ev=new Ae,bS=new Ae,TS=new Ae,AG=new Ae,ML=new Ae,AL=new Ae,IL=new Ae;class Am{constructor(e=new Ae,t=new Ae,r=new Ae){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,s){s.subVectors(r,t),Yg.subVectors(e,t),s.cross(Yg);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,r,s,o){Yg.subVectors(s,t),Z_.subVectors(r,t),CL.subVectors(e,t);const l=Yg.dot(Yg),u=Yg.dot(Z_),h=Yg.dot(CL),f=Z_.dot(Z_),g=Z_.dot(CL),y=l*f-u*u;if(y===0)return o.set(-2,-1,-1);const b=1/y,S=(f*h-u*g)*b,C=(l*g-u*h)*b;return o.set(1-S-C,C,S)}static containsPoint(e,t,r,s){return this.getBarycoord(e,t,r,s,ev),ev.x>=0&&ev.y>=0&&ev.x+ev.y<=1}static getUV(e,t,r,s,o,l,u,h){return this.getBarycoord(e,t,r,s,ev),h.set(0,0),h.addScaledVector(o,ev.x),h.addScaledVector(l,ev.y),h.addScaledVector(u,ev.z),h}static isFrontFacing(e,t,r,s){return Yg.subVectors(r,t),Z_.subVectors(e,t),Yg.cross(Z_).dot(s)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,s){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,r,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Yg.subVectors(this.c,this.b),Z_.subVectors(this.a,this.b),Yg.cross(Z_).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Am.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Am.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,s,o){return Am.getUV(e,this.a,this.b,this.c,t,r,s,o)}containsPoint(e){return Am.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Am.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,s=this.b,o=this.c;let l,u;bS.subVectors(s,r),TS.subVectors(o,r),ML.subVectors(e,r);const h=bS.dot(ML),f=TS.dot(ML);if(h<=0&&f<=0)return t.copy(r);AL.subVectors(e,s);const g=bS.dot(AL),y=TS.dot(AL);if(g>=0&&y<=g)return t.copy(s);const b=h*y-g*f;if(b<=0&&h>=0&&g<=0)return l=h/(h-g),t.copy(r).addScaledVector(bS,l);IL.subVectors(e,o);const S=bS.dot(IL),C=TS.dot(IL);if(C>=0&&S<=C)return t.copy(o);const M=S*f-h*C;if(M<=0&&f>=0&&C<=0)return u=f/(f-C),t.copy(r).addScaledVector(TS,u);const A=g*C-S*y;if(A<=0&&y-g>=0&&S-C>=0)return AG.subVectors(o,s),u=(y-g)/(y-g+(S-C)),t.copy(s).addScaledVector(AG,u);const O=1/(A+M+b);return l=M*O,u=b*O,t.copy(r).addScaledVector(bS,l).addScaledVector(TS,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let jTe=0;class hd extends Vm{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jTe++}),this.uuid=Dm(),this.name="",this.type="Material",this.blending=pv,this.side=f_,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=i2,this.blendDst=s2,this.blendEquation=p1,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=vR,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=TQ,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=SI,this.stencilZFail=SI,this.stencilZPass=SI,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===Rq;continue}const s=this[t];if(s===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==pv&&(r.blending=this.blending),this.side!==f_&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function s(o){const l=[];for(const u in o){const h=o[u];delete h.metadata,l.push(h)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(r.textures=o),l.length>0&&(r.images=l)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const s=t.length;r=new Array(s);for(let o=0;o!==s;++o)r[o]=t[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class f0 extends hd{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Bn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=RC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const kh=new Ae,QM=new jt;class Po{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=W$,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[r+s];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),l=new Bn),t[r++]=l.r,t[r++]=l.g,t[r++]=l.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),l=new jt),t[r++]=l.x,t[r++]=l.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),l=new Ae),t[r++]=l.x,t[r++]=l.y,t[r++]=l.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),l=new Ts),t[r++]=l.x,t[r++]=l.y,t[r++]=l.z,t[r++]=l.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)QM.fromBufferAttribute(this,t),QM.applyMatrix3(e),this.setXY(t,QM.x,QM.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)kh.fromBufferAttribute(this,t),kh.applyMatrix3(e),this.setXYZ(t,kh.x,kh.y,kh.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)kh.fromBufferAttribute(this,t),kh.applyMatrix4(e),this.setXYZ(t,kh.x,kh.y,kh.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)kh.fromBufferAttribute(this,t),kh.applyNormalMatrix(e),this.setXYZ(t,kh.x,kh.y,kh.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)kh.fromBufferAttribute(this,t),kh.transformDirection(e),this.setXYZ(t,kh.x,kh.y,kh.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=s,this}setXYZW(e,t,r,s,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==W$&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class YTe extends Po{constructor(e,t,r){super(new Int8Array(e),t,r)}}class XTe extends Po{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class KTe extends Po{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class JTe extends Po{constructor(e,t,r){super(new Int16Array(e),t,r)}}class JF extends Po{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class qTe extends Po{constructor(e,t,r){super(new Int32Array(e),t,r)}}class qF extends Po{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class QTe extends Po{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}}class ar extends Po{constructor(e,t,r){super(new Float32Array(e),t,r)}}class ZTe extends Po{constructor(e,t,r){super(new Float64Array(e),t,r)}}let eSe=0;const og=new Qr,RL=new ro,SS=new Ae,$m=new d0,hx=new d0,Sd=new Ae;class ui extends Vm{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:eSe++}),this.uuid=Dm(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(EQ(e)?qF:JF)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new up().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return og.makeRotationFromQuaternion(e),this.applyMatrix4(og),this}rotateX(e){return og.makeRotationX(e),this.applyMatrix4(og),this}rotateY(e){return og.makeRotationY(e),this.applyMatrix4(og),this}rotateZ(e){return og.makeRotationZ(e),this.applyMatrix4(og),this}translate(e,t,r){return og.makeTranslation(e,t,r),this.applyMatrix4(og),this}scale(e,t,r){return og.makeScale(e,t,r),this.applyMatrix4(og),this}lookAt(e){return RL.lookAt(e),RL.updateMatrix(),this.applyMatrix4(RL.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(SS).negate(),this.translate(SS.x,SS.y,SS.z),this}setFromPoints(e){const t=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new ar(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new d0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Ae(-1/0,-1/0,-1/0),new Ae(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,s=t.length;r<s;r++){const o=t[r];$m.setFromBufferAttribute(o),this.morphTargetsRelative?(Sd.addVectors(this.boundingBox.min,$m.min),this.boundingBox.expandByPoint(Sd),Sd.addVectors(this.boundingBox.max,$m.max),this.boundingBox.expandByPoint(Sd)):(this.boundingBox.expandByPoint($m.min),this.boundingBox.expandByPoint($m.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new y_);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Ae,1/0);return}if(e){const r=this.boundingSphere.center;if($m.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];hx.setFromBufferAttribute(u),this.morphTargetsRelative?(Sd.addVectors($m.min,hx.min),$m.expandByPoint(Sd),Sd.addVectors($m.max,hx.max),$m.expandByPoint(Sd)):($m.expandByPoint(hx.min),$m.expandByPoint(hx.max))}$m.getCenter(r);let s=0;for(let o=0,l=e.count;o<l;o++)Sd.fromBufferAttribute(e,o),s=Math.max(s,r.distanceToSquared(Sd));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],h=this.morphTargetsRelative;for(let f=0,g=u.count;f<g;f++)Sd.fromBufferAttribute(u,f),h&&(SS.fromBufferAttribute(e,f),Sd.add(SS)),s=Math.max(s,r.distanceToSquared(Sd))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,s=t.position.array,o=t.normal.array,l=t.uv.array,u=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Po(new Float32Array(4*u),4));const h=this.getAttribute("tangent").array,f=[],g=[];for(let le=0;le<u;le++)f[le]=new Ae,g[le]=new Ae;const y=new Ae,b=new Ae,S=new Ae,C=new jt,M=new jt,A=new jt,O=new Ae,L=new Ae;function B(le,Z,q){y.fromArray(s,le*3),b.fromArray(s,Z*3),S.fromArray(s,q*3),C.fromArray(l,le*2),M.fromArray(l,Z*2),A.fromArray(l,q*2),b.sub(y),S.sub(y),M.sub(C),A.sub(C);const he=1/(M.x*A.y-A.x*M.y);!isFinite(he)||(O.copy(b).multiplyScalar(A.y).addScaledVector(S,-M.y).multiplyScalar(he),L.copy(S).multiplyScalar(M.x).addScaledVector(b,-A.x).multiplyScalar(he),f[le].add(O),f[Z].add(O),f[q].add(O),g[le].add(L),g[Z].add(L),g[q].add(L))}let D=this.groups;D.length===0&&(D=[{start:0,count:r.length}]);for(let le=0,Z=D.length;le<Z;++le){const q=D[le],he=q.start,ae=q.count;for(let ue=he,ge=he+ae;ue<ge;ue+=3)B(r[ue+0],r[ue+1],r[ue+2])}const z=new Ae,U=new Ae,V=new Ae,H=new Ae;function oe(le){V.fromArray(o,le*3),H.copy(V);const Z=f[le];z.copy(Z),z.sub(V.multiplyScalar(V.dot(Z))).normalize(),U.crossVectors(H,Z);const q=U.dot(g[le])<0?-1:1;h[le*4]=z.x,h[le*4+1]=z.y,h[le*4+2]=z.z,h[le*4+3]=q}for(let le=0,Z=D.length;le<Z;++le){const q=D[le],he=q.start,ae=q.count;for(let ue=he,ge=he+ae;ue<ge;ue+=3)oe(r[ue+0]),oe(r[ue+1]),oe(r[ue+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Po(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let b=0,S=r.count;b<S;b++)r.setXYZ(b,0,0,0);const s=new Ae,o=new Ae,l=new Ae,u=new Ae,h=new Ae,f=new Ae,g=new Ae,y=new Ae;if(e)for(let b=0,S=e.count;b<S;b+=3){const C=e.getX(b+0),M=e.getX(b+1),A=e.getX(b+2);s.fromBufferAttribute(t,C),o.fromBufferAttribute(t,M),l.fromBufferAttribute(t,A),g.subVectors(l,o),y.subVectors(s,o),g.cross(y),u.fromBufferAttribute(r,C),h.fromBufferAttribute(r,M),f.fromBufferAttribute(r,A),u.add(g),h.add(g),f.add(g),r.setXYZ(C,u.x,u.y,u.z),r.setXYZ(M,h.x,h.y,h.z),r.setXYZ(A,f.x,f.y,f.z)}else for(let b=0,S=t.count;b<S;b+=3)s.fromBufferAttribute(t,b+0),o.fromBufferAttribute(t,b+1),l.fromBufferAttribute(t,b+2),g.subVectors(l,o),y.subVectors(s,o),g.cross(y),r.setXYZ(b+0,g.x,g.y,g.z),r.setXYZ(b+1,g.x,g.y,g.z),r.setXYZ(b+2,g.x,g.y,g.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const s in r){if(e.attributes[s]===void 0)continue;const o=r[s].array,l=e.attributes[s],u=l.array,h=l.itemSize*t,f=Math.min(u.length,o.length-h);for(let g=0,y=h;g<f;g++,y++)o[y]=u[g]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Sd.fromBufferAttribute(e,t),Sd.normalize(),e.setXYZ(t,Sd.x,Sd.y,Sd.z)}toNonIndexed(){function e(u,h){const f=u.array,g=u.itemSize,y=u.normalized,b=new f.constructor(h.length*g);let S=0,C=0;for(let M=0,A=h.length;M<A;M++){u.isInterleavedBufferAttribute?S=h[M]*u.data.stride+u.offset:S=h[M]*g;for(let O=0;O<g;O++)b[C++]=f[S++]}return new Po(b,g,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ui,r=this.index.array,s=this.attributes;for(const u in s){const h=s[u],f=e(h,r);t.setAttribute(u,f)}const o=this.morphAttributes;for(const u in o){const h=[],f=o[u];for(let g=0,y=f.length;g<y;g++){const b=f[g],S=e(b,r);h.push(S)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,h=l.length;u<h;u++){const f=l[u];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const f in h)h[f]!==void 0&&(e[f]=h[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const h in r){const f=r[h];e.data.attributes[h]=f.toJSON(e.data)}const s={};let o=!1;for(const h in this.morphAttributes){const f=this.morphAttributes[h],g=[];for(let y=0,b=f.length;y<b;y++){const S=f[y];g.push(S.toJSON(e.data))}g.length>0&&(s[h]=g,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const s=e.attributes;for(const f in s){const g=s[f];this.setAttribute(f,g.clone(t))}const o=e.morphAttributes;for(const f in o){const g=[],y=o[f];for(let b=0,S=y.length;b<S;b++)g.push(y[b].clone(t));this.morphAttributes[f]=g}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let f=0,g=l.length;f<g;f++){const y=l[f];this.addGroup(y.start,y.count,y.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const IG=new Qr,wS=new OC,kL=new y_,ly=new Ae,uy=new Ae,cy=new Ae,OL=new Ae,LL=new Ae,NL=new Ae,ZM=new Ae,eA=new Ae,tA=new Ae,nA=new jt,rA=new jt,iA=new jt,DL=new Ae,sA=new Ae;class Un extends ro{constructor(e=new ui,t=new f0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(e,t){const r=this.geometry,s=this.material,o=this.matrixWorld;if(s===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),kL.copy(r.boundingSphere),kL.applyMatrix4(o),e.ray.intersectsSphere(kL)===!1)||(IG.copy(o).invert(),wS.copy(e.ray).applyMatrix4(IG),r.boundingBox!==null&&wS.intersectsBox(r.boundingBox)===!1))return;let l;const u=r.index,h=r.attributes.position,f=r.morphAttributes.position,g=r.morphTargetsRelative,y=r.attributes.uv,b=r.attributes.uv2,S=r.groups,C=r.drawRange;if(u!==null)if(Array.isArray(s))for(let M=0,A=S.length;M<A;M++){const O=S[M],L=s[O.materialIndex],B=Math.max(O.start,C.start),D=Math.min(u.count,Math.min(O.start+O.count,C.start+C.count));for(let z=B,U=D;z<U;z+=3){const V=u.getX(z),H=u.getX(z+1),oe=u.getX(z+2);l=oA(this,L,e,wS,h,f,g,y,b,V,H,oe),l&&(l.faceIndex=Math.floor(z/3),l.face.materialIndex=O.materialIndex,t.push(l))}}else{const M=Math.max(0,C.start),A=Math.min(u.count,C.start+C.count);for(let O=M,L=A;O<L;O+=3){const B=u.getX(O),D=u.getX(O+1),z=u.getX(O+2);l=oA(this,s,e,wS,h,f,g,y,b,B,D,z),l&&(l.faceIndex=Math.floor(O/3),t.push(l))}}else if(h!==void 0)if(Array.isArray(s))for(let M=0,A=S.length;M<A;M++){const O=S[M],L=s[O.materialIndex],B=Math.max(O.start,C.start),D=Math.min(h.count,Math.min(O.start+O.count,C.start+C.count));for(let z=B,U=D;z<U;z+=3){const V=z,H=z+1,oe=z+2;l=oA(this,L,e,wS,h,f,g,y,b,V,H,oe),l&&(l.faceIndex=Math.floor(z/3),l.face.materialIndex=O.materialIndex,t.push(l))}}else{const M=Math.max(0,C.start),A=Math.min(h.count,C.start+C.count);for(let O=M,L=A;O<L;O+=3){const B=O,D=O+1,z=O+2;l=oA(this,s,e,wS,h,f,g,y,b,B,D,z),l&&(l.faceIndex=Math.floor(O/3),t.push(l))}}}}function tSe(n,e,t,r,s,o,l,u){let h;if(e.side===cd?h=r.intersectTriangle(l,o,s,!0,u):h=r.intersectTriangle(s,o,l,e.side!==lp,u),h===null)return null;sA.copy(u),sA.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(sA);return f<t.near||f>t.far?null:{distance:f,point:sA.clone(),object:n}}function oA(n,e,t,r,s,o,l,u,h,f,g,y){ly.fromBufferAttribute(s,f),uy.fromBufferAttribute(s,g),cy.fromBufferAttribute(s,y);const b=n.morphTargetInfluences;if(o&&b){ZM.set(0,0,0),eA.set(0,0,0),tA.set(0,0,0);for(let C=0,M=o.length;C<M;C++){const A=b[C],O=o[C];A!==0&&(OL.fromBufferAttribute(O,f),LL.fromBufferAttribute(O,g),NL.fromBufferAttribute(O,y),l?(ZM.addScaledVector(OL,A),eA.addScaledVector(LL,A),tA.addScaledVector(NL,A)):(ZM.addScaledVector(OL.sub(ly),A),eA.addScaledVector(LL.sub(uy),A),tA.addScaledVector(NL.sub(cy),A)))}ly.add(ZM),uy.add(eA),cy.add(tA)}n.isSkinnedMesh&&(n.boneTransform(f,ly),n.boneTransform(g,uy),n.boneTransform(y,cy));const S=tSe(n,e,t,r,ly,uy,cy,DL);if(S){u&&(nA.fromBufferAttribute(u,f),rA.fromBufferAttribute(u,g),iA.fromBufferAttribute(u,y),S.uv=Am.getUV(DL,ly,uy,cy,nA,rA,iA,new jt)),h&&(nA.fromBufferAttribute(h,f),rA.fromBufferAttribute(h,g),iA.fromBufferAttribute(h,y),S.uv2=Am.getUV(DL,ly,uy,cy,nA,rA,iA,new jt));const C={a:f,b:g,c:y,normal:new Ae,materialIndex:0};Am.getNormal(ly,uy,cy,C.normal),S.face=C}return S}class pu extends ui{constructor(e=1,t=1,r=1,s=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:s,heightSegments:o,depthSegments:l};const u=this;s=Math.floor(s),o=Math.floor(o),l=Math.floor(l);const h=[],f=[],g=[],y=[];let b=0,S=0;C("z","y","x",-1,-1,r,t,e,l,o,0),C("z","y","x",1,-1,r,t,-e,l,o,1),C("x","z","y",1,1,e,r,t,s,l,2),C("x","z","y",1,-1,e,r,-t,s,l,3),C("x","y","z",1,-1,e,t,r,s,o,4),C("x","y","z",-1,-1,e,t,-r,s,o,5),this.setIndex(h),this.setAttribute("position",new ar(f,3)),this.setAttribute("normal",new ar(g,3)),this.setAttribute("uv",new ar(y,2));function C(M,A,O,L,B,D,z,U,V,H,oe){const le=D/V,Z=z/H,q=D/2,he=z/2,ae=U/2,ue=V+1,ge=H+1;let we=0,J=0;const re=new Ae;for(let ie=0;ie<ge;ie++){const fe=ie*Z-he;for(let Te=0;Te<ue;Te++){const Fe=Te*le-q;re[M]=Fe*L,re[A]=fe*B,re[O]=ae,f.push(re.x,re.y,re.z),re[M]=0,re[A]=0,re[O]=U>0?1:-1,g.push(re.x,re.y,re.z),y.push(Te/V),y.push(1-ie/H),we+=1}}for(let ie=0;ie<H;ie++)for(let fe=0;fe<V;fe++){const Te=b+fe+ue*ie,Fe=b+fe+ue*(ie+1),Ie=b+(fe+1)+ue*(ie+1),qe=b+(fe+1)+ue*ie;h.push(Te,Fe,qe),h.push(Fe,Ie,qe),J+=6}u.addGroup(S,J,oe),S+=J,b+=we}}static fromJSON(e){return new pu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Dw(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const s=n[t][r];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?e[t][r]=s.clone():Array.isArray(s)?e[t][r]=s.slice():e[t][r]=s}}return e}function Af(n){const e={};for(let t=0;t<n.length;t++){const r=Dw(n[t]);for(const s in r)e[s]=r[s]}return e}function nSe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const LC={clone:Dw,merge:Af};var rSe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,iSe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class xd extends hd{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=rSe,this.fragmentShader=iSe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Dw(e.uniforms),this.uniformsGroups=nSe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const s in this.extensions)this.extensions[s]===!0&&(r[s]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class mE extends ro{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Qr,this.projectionMatrix=new Qr,this.projectionMatrixInverse=new Qr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Za extends mE{constructor(e=50,t=1,r=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=V$*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(D1*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return V$*2*Math.atan(Math.tan(D1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(D1*.5*this.fov)/this.zoom,r=2*t,s=this.aspect*r,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,f=l.fullHeight;o+=l.offsetX*s/h,t-=l.offsetY*r/f,s*=l.width/h,r*=l.height/f}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ES=90,xS=1;class $Q extends ro{constructor(e,t,r){if(super(),this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const s=new Za(ES,xS,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Ae(1,0,0)),this.add(s);const o=new Za(ES,xS,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Ae(-1,0,0)),this.add(o);const l=new Za(ES,xS,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(new Ae(0,1,0)),this.add(l);const u=new Za(ES,xS,e,t);u.layers=this.layers,u.up.set(0,0,-1),u.lookAt(new Ae(0,-1,0)),this.add(u);const h=new Za(ES,xS,e,t);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new Ae(0,0,1)),this.add(h);const f=new Za(ES,xS,e,t);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new Ae(0,0,-1)),this.add(f)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[s,o,l,u,h,f]=this.children,g=e.getRenderTarget(),y=e.toneMapping,b=e.xr.enabled;e.toneMapping=l0,e.xr.enabled=!1;const S=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,s),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,l),e.setRenderTarget(r,3),e.render(t,u),e.setRenderTarget(r,4),e.render(t,h),r.texture.generateMipmaps=S,e.setRenderTarget(r,5),e.render(t,f),e.setRenderTarget(g),e.toneMapping=y,e.xr.enabled=b,r.texture.needsPMREMUpdate=!0}}class NC extends hc{constructor(e,t,r,s,o,l,u,h,f,g){e=e!==void 0?e:[],t=t!==void 0?t:Gy,super(e,t,r,s,o,l,u,h,f,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class CQ extends Nc{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},s=[r,r,r,r,r,r];this.texture=new NC(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:wl}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new pu(5,5,5),o=new xd({name:"CubemapFromEquirect",uniforms:Dw(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:cd,blending:pp});o.uniforms.tEquirect.value=t;const l=new Un(s,o),u=t.minFilter;return t.minFilter===uT&&(t.minFilter=wl),new $Q(1,10,this).update(e,l),t.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,r,s){const o=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,r,s);e.setRenderTarget(o)}}const PL=new Ae,sSe=new Ae,oSe=new up;class sv{constructor(e=new Ae(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,s){return this.normal.set(e,t,r),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const s=PL.subVectors(r,t).cross(sSe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(PL),s=this.normal.dot(r);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(r).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||oSe.getNormalMatrix(e),s=this.coplanarPoint(PL).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const $S=new y_,aA=new Ae;class u2{constructor(e=new sv,t=new sv,r=new sv,s=new sv,o=new sv,l=new sv){this.planes=[e,t,r,s,o,l]}set(e,t,r,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(r),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],u=r[3],h=r[4],f=r[5],g=r[6],y=r[7],b=r[8],S=r[9],C=r[10],M=r[11],A=r[12],O=r[13],L=r[14],B=r[15];return t[0].setComponents(u-s,y-h,M-b,B-A).normalize(),t[1].setComponents(u+s,y+h,M+b,B+A).normalize(),t[2].setComponents(u+o,y+f,M+S,B+O).normalize(),t[3].setComponents(u-o,y-f,M-S,B-O).normalize(),t[4].setComponents(u-l,y-g,M-C,B-L).normalize(),t[5].setComponents(u+l,y+g,M+C,B+L).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),$S.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere($S)}intersectsSprite(e){return $S.center.set(0,0,0),$S.radius=.7071067811865476,$S.applyMatrix4(e.matrixWorld),this.intersectsSphere($S)}intersectsSphere(e){const t=this.planes,r=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(r)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const s=t[r];if(aA.x=s.normal.x>0?e.max.x:e.min.x,aA.y=s.normal.y>0?e.max.y:e.min.y,aA.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(aA)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function MQ(){let n=null,e=!1,t=null,r=null;function s(o,l){t(o,l),r=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function aSe(n,e){const t=e.isWebGL2,r=new WeakMap;function s(f,g){const y=f.array,b=f.usage,S=n.createBuffer();n.bindBuffer(g,S),n.bufferData(g,y,b),f.onUploadCallback();let C;if(y instanceof Float32Array)C=5126;else if(y instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)C=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else C=5123;else if(y instanceof Int16Array)C=5122;else if(y instanceof Uint32Array)C=5125;else if(y instanceof Int32Array)C=5124;else if(y instanceof Int8Array)C=5120;else if(y instanceof Uint8Array)C=5121;else if(y instanceof Uint8ClampedArray)C=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+y);return{buffer:S,type:C,bytesPerElement:y.BYTES_PER_ELEMENT,version:f.version}}function o(f,g,y){const b=g.array,S=g.updateRange;n.bindBuffer(y,f),S.count===-1?n.bufferSubData(y,0,b):(t?n.bufferSubData(y,S.offset*b.BYTES_PER_ELEMENT,b,S.offset,S.count):n.bufferSubData(y,S.offset*b.BYTES_PER_ELEMENT,b.subarray(S.offset,S.offset+S.count)),S.count=-1)}function l(f){return f.isInterleavedBufferAttribute&&(f=f.data),r.get(f)}function u(f){f.isInterleavedBufferAttribute&&(f=f.data);const g=r.get(f);g&&(n.deleteBuffer(g.buffer),r.delete(f))}function h(f,g){if(f.isGLBufferAttribute){const b=r.get(f);(!b||b.version<f.version)&&r.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const y=r.get(f);y===void 0?r.set(f,s(f,g)):y.version<f.version&&(o(y.buffer,f,g),y.version=f.version)}return{get:l,remove:u,update:h}}class c0 extends ui{constructor(e=1,t=1,r=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:s};const o=e/2,l=t/2,u=Math.floor(r),h=Math.floor(s),f=u+1,g=h+1,y=e/u,b=t/h,S=[],C=[],M=[],A=[];for(let O=0;O<g;O++){const L=O*b-l;for(let B=0;B<f;B++){const D=B*y-o;C.push(D,-L,0),M.push(0,0,1),A.push(B/u),A.push(1-O/h)}}for(let O=0;O<h;O++)for(let L=0;L<u;L++){const B=L+f*O,D=L+f*(O+1),z=L+1+f*(O+1),U=L+1+f*O;S.push(B,D,U),S.push(D,z,U)}this.setIndex(S),this.setAttribute("position",new ar(C,3)),this.setAttribute("normal",new ar(M,3)),this.setAttribute("uv",new ar(A,2))}static fromJSON(e){return new c0(e.width,e.height,e.widthSegments,e.heightSegments)}}var lSe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,uSe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,cSe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,hSe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,dSe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,fSe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,pSe="vec3 transformed = vec3( position );",mSe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,gSe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,_Se=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,vSe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,ySe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,bSe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,TSe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,SSe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,wSe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ESe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,xSe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,$Se=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,CSe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,MSe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ASe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ISe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,RSe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,kSe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,OSe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,LSe="gl_FragColor = linearToOutputTexel( gl_FragColor );",NSe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,DSe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,PSe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,BSe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,FSe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,zSe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,USe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,HSe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,GSe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,WSe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,VSe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,jSe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,YSe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,XSe=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,KSe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,JSe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,qSe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,QSe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,ZSe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,ewe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,twe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,nwe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,rwe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,iwe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,swe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,owe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,awe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,lwe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,uwe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,cwe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,hwe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,dwe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,fwe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,pwe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,mwe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,gwe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,_we=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,vwe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,ywe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,bwe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Twe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Swe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,wwe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Ewe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,xwe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,$we=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Cwe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Mwe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Awe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Iwe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Rwe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,kwe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Owe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Lwe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Nwe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Dwe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Pwe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Bwe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Fwe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,zwe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Uwe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Hwe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Gwe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Wwe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Vwe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,jwe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Ywe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Xwe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Kwe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Jwe=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,qwe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Qwe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Zwe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,eEe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,tEe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,nEe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,rEe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,iEe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const sEe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,oEe=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,aEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,lEe=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,uEe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,cEe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,hEe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,dEe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,fEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,pEe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,mEe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,gEe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_Ee=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,vEe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yEe=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bEe=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TEe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,SEe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wEe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,EEe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,xEe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$Ee=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CEe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,MEe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AEe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IEe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,REe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,kEe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,OEe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LEe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,NEe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,DEe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ps={alphamap_fragment:lSe,alphamap_pars_fragment:uSe,alphatest_fragment:cSe,alphatest_pars_fragment:hSe,aomap_fragment:dSe,aomap_pars_fragment:fSe,begin_vertex:pSe,beginnormal_vertex:mSe,bsdfs:gSe,iridescence_fragment:_Se,bumpmap_pars_fragment:vSe,clipping_planes_fragment:ySe,clipping_planes_pars_fragment:bSe,clipping_planes_pars_vertex:TSe,clipping_planes_vertex:SSe,color_fragment:wSe,color_pars_fragment:ESe,color_pars_vertex:xSe,color_vertex:$Se,common:CSe,cube_uv_reflection_fragment:MSe,defaultnormal_vertex:ASe,displacementmap_pars_vertex:ISe,displacementmap_vertex:RSe,emissivemap_fragment:kSe,emissivemap_pars_fragment:OSe,encodings_fragment:LSe,encodings_pars_fragment:NSe,envmap_fragment:DSe,envmap_common_pars_fragment:PSe,envmap_pars_fragment:BSe,envmap_pars_vertex:FSe,envmap_physical_pars_fragment:JSe,envmap_vertex:zSe,fog_vertex:USe,fog_pars_vertex:HSe,fog_fragment:GSe,fog_pars_fragment:WSe,gradientmap_pars_fragment:VSe,lightmap_fragment:jSe,lightmap_pars_fragment:YSe,lights_lambert_vertex:XSe,lights_pars_begin:KSe,lights_toon_fragment:qSe,lights_toon_pars_fragment:QSe,lights_phong_fragment:ZSe,lights_phong_pars_fragment:ewe,lights_physical_fragment:twe,lights_physical_pars_fragment:nwe,lights_fragment_begin:rwe,lights_fragment_maps:iwe,lights_fragment_end:swe,logdepthbuf_fragment:owe,logdepthbuf_pars_fragment:awe,logdepthbuf_pars_vertex:lwe,logdepthbuf_vertex:uwe,map_fragment:cwe,map_pars_fragment:hwe,map_particle_fragment:dwe,map_particle_pars_fragment:fwe,metalnessmap_fragment:pwe,metalnessmap_pars_fragment:mwe,morphcolor_vertex:gwe,morphnormal_vertex:_we,morphtarget_pars_vertex:vwe,morphtarget_vertex:ywe,normal_fragment_begin:bwe,normal_fragment_maps:Twe,normal_pars_fragment:Swe,normal_pars_vertex:wwe,normal_vertex:Ewe,normalmap_pars_fragment:xwe,clearcoat_normal_fragment_begin:$we,clearcoat_normal_fragment_maps:Cwe,clearcoat_pars_fragment:Mwe,iridescence_pars_fragment:Awe,output_fragment:Iwe,packing:Rwe,premultiplied_alpha_fragment:kwe,project_vertex:Owe,dithering_fragment:Lwe,dithering_pars_fragment:Nwe,roughnessmap_fragment:Dwe,roughnessmap_pars_fragment:Pwe,shadowmap_pars_fragment:Bwe,shadowmap_pars_vertex:Fwe,shadowmap_vertex:zwe,shadowmask_pars_fragment:Uwe,skinbase_vertex:Hwe,skinning_pars_vertex:Gwe,skinning_vertex:Wwe,skinnormal_vertex:Vwe,specularmap_fragment:jwe,specularmap_pars_fragment:Ywe,tonemapping_fragment:Xwe,tonemapping_pars_fragment:Kwe,transmission_fragment:Jwe,transmission_pars_fragment:qwe,uv_pars_fragment:Qwe,uv_pars_vertex:Zwe,uv_vertex:eEe,uv2_pars_fragment:tEe,uv2_pars_vertex:nEe,uv2_vertex:rEe,worldpos_vertex:iEe,background_vert:sEe,background_frag:oEe,cube_vert:aEe,cube_frag:lEe,depth_vert:uEe,depth_frag:cEe,distanceRGBA_vert:hEe,distanceRGBA_frag:dEe,equirect_vert:fEe,equirect_frag:pEe,linedashed_vert:mEe,linedashed_frag:gEe,meshbasic_vert:_Ee,meshbasic_frag:vEe,meshlambert_vert:yEe,meshlambert_frag:bEe,meshmatcap_vert:TEe,meshmatcap_frag:SEe,meshnormal_vert:wEe,meshnormal_frag:EEe,meshphong_vert:xEe,meshphong_frag:$Ee,meshphysical_vert:CEe,meshphysical_frag:MEe,meshtoon_vert:AEe,meshtoon_frag:IEe,points_vert:REe,points_frag:kEe,shadow_vert:OEe,shadow_frag:LEe,sprite_vert:NEe,sprite_frag:DEe},Xn={common:{diffuse:{value:new Bn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new up},uv2Transform:{value:new up},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new jt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new up}},sprite:{diffuse:{value:new Bn(16777215)},opacity:{value:1},center:{value:new jt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new up}}},op={basic:{uniforms:Af([Xn.common,Xn.specularmap,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.fog]),vertexShader:ps.meshbasic_vert,fragmentShader:ps.meshbasic_frag},lambert:{uniforms:Af([Xn.common,Xn.specularmap,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.fog,Xn.lights,{emissive:{value:new Bn(0)}}]),vertexShader:ps.meshlambert_vert,fragmentShader:ps.meshlambert_frag},phong:{uniforms:Af([Xn.common,Xn.specularmap,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.fog,Xn.lights,{emissive:{value:new Bn(0)},specular:{value:new Bn(1118481)},shininess:{value:30}}]),vertexShader:ps.meshphong_vert,fragmentShader:ps.meshphong_frag},standard:{uniforms:Af([Xn.common,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.roughnessmap,Xn.metalnessmap,Xn.fog,Xn.lights,{emissive:{value:new Bn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ps.meshphysical_vert,fragmentShader:ps.meshphysical_frag},toon:{uniforms:Af([Xn.common,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.gradientmap,Xn.fog,Xn.lights,{emissive:{value:new Bn(0)}}]),vertexShader:ps.meshtoon_vert,fragmentShader:ps.meshtoon_frag},matcap:{uniforms:Af([Xn.common,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.fog,{matcap:{value:null}}]),vertexShader:ps.meshmatcap_vert,fragmentShader:ps.meshmatcap_frag},points:{uniforms:Af([Xn.points,Xn.fog]),vertexShader:ps.points_vert,fragmentShader:ps.points_frag},dashed:{uniforms:Af([Xn.common,Xn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ps.linedashed_vert,fragmentShader:ps.linedashed_frag},depth:{uniforms:Af([Xn.common,Xn.displacementmap]),vertexShader:ps.depth_vert,fragmentShader:ps.depth_frag},normal:{uniforms:Af([Xn.common,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,{opacity:{value:1}}]),vertexShader:ps.meshnormal_vert,fragmentShader:ps.meshnormal_frag},sprite:{uniforms:Af([Xn.sprite,Xn.fog]),vertexShader:ps.sprite_vert,fragmentShader:ps.sprite_frag},background:{uniforms:{uvTransform:{value:new up},t2D:{value:null}},vertexShader:ps.background_vert,fragmentShader:ps.background_frag},cube:{uniforms:Af([Xn.envmap,{opacity:{value:1}}]),vertexShader:ps.cube_vert,fragmentShader:ps.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ps.equirect_vert,fragmentShader:ps.equirect_frag},distanceRGBA:{uniforms:Af([Xn.common,Xn.displacementmap,{referencePosition:{value:new Ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ps.distanceRGBA_vert,fragmentShader:ps.distanceRGBA_frag},shadow:{uniforms:Af([Xn.lights,Xn.fog,{color:{value:new Bn(0)},opacity:{value:1}}]),vertexShader:ps.shadow_vert,fragmentShader:ps.shadow_frag}};op.physical={uniforms:Af([op.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new jt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Bn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new jt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Bn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Bn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ps.meshphysical_vert,fragmentShader:ps.meshphysical_frag};function PEe(n,e,t,r,s,o){const l=new Bn(0);let u=s===!0?0:1,h,f,g=null,y=0,b=null;function S(M,A){let O=!1,L=A.isScene===!0?A.background:null;L&&L.isTexture&&(L=e.get(L));const B=n.xr,D=B.getSession&&B.getSession();D&&D.environmentBlendMode==="additive"&&(L=null),L===null?C(l,u):L&&L.isColor&&(C(L,1),O=!0),(n.autoClear||O)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),L&&(L.isCubeTexture||L.mapping===pE)?(f===void 0&&(f=new Un(new pu(1,1,1),new xd({name:"BackgroundCubeMaterial",uniforms:Dw(op.cube.uniforms),vertexShader:op.cube.vertexShader,fragmentShader:op.cube.fragmentShader,side:cd,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(z,U,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),f.material.uniforms.envMap.value=L,f.material.uniforms.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,(g!==L||y!==L.version||b!==n.toneMapping)&&(f.material.needsUpdate=!0,g=L,y=L.version,b=n.toneMapping),f.layers.enableAll(),M.unshift(f,f.geometry,f.material,0,0,null)):L&&L.isTexture&&(h===void 0&&(h=new Un(new c0(2,2),new xd({name:"BackgroundMaterial",uniforms:Dw(op.background.uniforms),vertexShader:op.background.vertexShader,fragmentShader:op.background.fragmentShader,side:f_,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=L,L.matrixAutoUpdate===!0&&L.updateMatrix(),h.material.uniforms.uvTransform.value.copy(L.matrix),(g!==L||y!==L.version||b!==n.toneMapping)&&(h.material.needsUpdate=!0,g=L,y=L.version,b=n.toneMapping),h.layers.enableAll(),M.unshift(h,h.geometry,h.material,0,0,null))}function C(M,A){t.buffers.color.setClear(M.r,M.g,M.b,A,o)}return{getClearColor:function(){return l},setClearColor:function(M,A=1){l.set(M),u=A,C(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(M){u=M,C(l,u)},render:S}}function BEe(n,e,t,r){const s=n.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),l=r.isWebGL2||o!==null,u={},h=A(null);let f=h,g=!1;function y(ae,ue,ge,we,J){let re=!1;if(l){const ie=M(we,ge,ue);f!==ie&&(f=ie,S(f.object)),re=O(ae,we,ge,J),re&&L(ae,we,ge,J)}else{const ie=ue.wireframe===!0;(f.geometry!==we.id||f.program!==ge.id||f.wireframe!==ie)&&(f.geometry=we.id,f.program=ge.id,f.wireframe=ie,re=!0)}J!==null&&t.update(J,34963),(re||g)&&(g=!1,H(ae,ue,ge,we),J!==null&&n.bindBuffer(34963,t.get(J).buffer))}function b(){return r.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}function S(ae){return r.isWebGL2?n.bindVertexArray(ae):o.bindVertexArrayOES(ae)}function C(ae){return r.isWebGL2?n.deleteVertexArray(ae):o.deleteVertexArrayOES(ae)}function M(ae,ue,ge){const we=ge.wireframe===!0;let J=u[ae.id];J===void 0&&(J={},u[ae.id]=J);let re=J[ue.id];re===void 0&&(re={},J[ue.id]=re);let ie=re[we];return ie===void 0&&(ie=A(b()),re[we]=ie),ie}function A(ae){const ue=[],ge=[],we=[];for(let J=0;J<s;J++)ue[J]=0,ge[J]=0,we[J]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ue,enabledAttributes:ge,attributeDivisors:we,object:ae,attributes:{},index:null}}function O(ae,ue,ge,we){const J=f.attributes,re=ue.attributes;let ie=0;const fe=ge.getAttributes();for(const Te in fe)if(fe[Te].location>=0){const Fe=J[Te];let Ie=re[Te];if(Ie===void 0&&(Te==="instanceMatrix"&&ae.instanceMatrix&&(Ie=ae.instanceMatrix),Te==="instanceColor"&&ae.instanceColor&&(Ie=ae.instanceColor)),Fe===void 0||Fe.attribute!==Ie||Ie&&Fe.data!==Ie.data)return!0;ie++}return f.attributesNum!==ie||f.index!==we}function L(ae,ue,ge,we){const J={},re=ue.attributes;let ie=0;const fe=ge.getAttributes();for(const Te in fe)if(fe[Te].location>=0){let Fe=re[Te];Fe===void 0&&(Te==="instanceMatrix"&&ae.instanceMatrix&&(Fe=ae.instanceMatrix),Te==="instanceColor"&&ae.instanceColor&&(Fe=ae.instanceColor));const Ie={};Ie.attribute=Fe,Fe&&Fe.data&&(Ie.data=Fe.data),J[Te]=Ie,ie++}f.attributes=J,f.attributesNum=ie,f.index=we}function B(){const ae=f.newAttributes;for(let ue=0,ge=ae.length;ue<ge;ue++)ae[ue]=0}function D(ae){z(ae,0)}function z(ae,ue){const ge=f.newAttributes,we=f.enabledAttributes,J=f.attributeDivisors;ge[ae]=1,we[ae]===0&&(n.enableVertexAttribArray(ae),we[ae]=1),J[ae]!==ue&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ae,ue),J[ae]=ue)}function U(){const ae=f.newAttributes,ue=f.enabledAttributes;for(let ge=0,we=ue.length;ge<we;ge++)ue[ge]!==ae[ge]&&(n.disableVertexAttribArray(ge),ue[ge]=0)}function V(ae,ue,ge,we,J,re){r.isWebGL2===!0&&(ge===5124||ge===5125)?n.vertexAttribIPointer(ae,ue,ge,J,re):n.vertexAttribPointer(ae,ue,ge,we,J,re)}function H(ae,ue,ge,we){if(r.isWebGL2===!1&&(ae.isInstancedMesh||we.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;B();const J=we.attributes,re=ge.getAttributes(),ie=ue.defaultAttributeValues;for(const fe in re){const Te=re[fe];if(Te.location>=0){let Fe=J[fe];if(Fe===void 0&&(fe==="instanceMatrix"&&ae.instanceMatrix&&(Fe=ae.instanceMatrix),fe==="instanceColor"&&ae.instanceColor&&(Fe=ae.instanceColor)),Fe!==void 0){const Ie=Fe.normalized,qe=Fe.itemSize,Re=t.get(Fe);if(Re===void 0)continue;const Qe=Re.buffer,nt=Re.type,ft=Re.bytesPerElement;if(Fe.isInterleavedBufferAttribute){const lt=Fe.data,ze=lt.stride,Ce=Fe.offset;if(lt.isInstancedInterleavedBuffer){for(let He=0;He<Te.locationSize;He++)z(Te.location+He,lt.meshPerAttribute);ae.isInstancedMesh!==!0&&we._maxInstanceCount===void 0&&(we._maxInstanceCount=lt.meshPerAttribute*lt.count)}else for(let He=0;He<Te.locationSize;He++)D(Te.location+He);n.bindBuffer(34962,Qe);for(let He=0;He<Te.locationSize;He++)V(Te.location+He,qe/Te.locationSize,nt,Ie,ze*ft,(Ce+qe/Te.locationSize*He)*ft)}else{if(Fe.isInstancedBufferAttribute){for(let lt=0;lt<Te.locationSize;lt++)z(Te.location+lt,Fe.meshPerAttribute);ae.isInstancedMesh!==!0&&we._maxInstanceCount===void 0&&(we._maxInstanceCount=Fe.meshPerAttribute*Fe.count)}else for(let lt=0;lt<Te.locationSize;lt++)D(Te.location+lt);n.bindBuffer(34962,Qe);for(let lt=0;lt<Te.locationSize;lt++)V(Te.location+lt,qe/Te.locationSize,nt,Ie,qe*ft,qe/Te.locationSize*lt*ft)}}else if(ie!==void 0){const Ie=ie[fe];if(Ie!==void 0)switch(Ie.length){case 2:n.vertexAttrib2fv(Te.location,Ie);break;case 3:n.vertexAttrib3fv(Te.location,Ie);break;case 4:n.vertexAttrib4fv(Te.location,Ie);break;default:n.vertexAttrib1fv(Te.location,Ie)}}}}U()}function oe(){q();for(const ae in u){const ue=u[ae];for(const ge in ue){const we=ue[ge];for(const J in we)C(we[J].object),delete we[J];delete ue[ge]}delete u[ae]}}function le(ae){if(u[ae.id]===void 0)return;const ue=u[ae.id];for(const ge in ue){const we=ue[ge];for(const J in we)C(we[J].object),delete we[J];delete ue[ge]}delete u[ae.id]}function Z(ae){for(const ue in u){const ge=u[ue];if(ge[ae.id]===void 0)continue;const we=ge[ae.id];for(const J in we)C(we[J].object),delete we[J];delete ge[ae.id]}}function q(){he(),g=!0,f!==h&&(f=h,S(f.object))}function he(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:y,reset:q,resetDefaultState:he,dispose:oe,releaseStatesOfGeometry:le,releaseStatesOfProgram:Z,initAttributes:B,enableAttribute:D,disableUnusedAttributes:U}}function FEe(n,e,t,r){const s=r.isWebGL2;let o;function l(f){o=f}function u(f,g){n.drawArrays(o,f,g),t.update(g,o,1)}function h(f,g,y){if(y===0)return;let b,S;if(s)b=n,S="drawArraysInstanced";else if(b=e.get("ANGLE_instanced_arrays"),S="drawArraysInstancedANGLE",b===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}b[S](o,f,g,y),t.update(g,o,y)}this.setMode=l,this.render=u,this.renderInstances=h}function zEe(n,e,t){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const V=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(V.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(V){if(V==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";V="mediump"}return V==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const l=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let u=t.precision!==void 0?t.precision:"highp";const h=o(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const f=l||e.has("WEBGL_draw_buffers"),g=t.logarithmicDepthBuffer===!0,y=n.getParameter(34930),b=n.getParameter(35660),S=n.getParameter(3379),C=n.getParameter(34076),M=n.getParameter(34921),A=n.getParameter(36347),O=n.getParameter(36348),L=n.getParameter(36349),B=b>0,D=l||e.has("OES_texture_float"),z=B&&D,U=l?n.getParameter(36183):0;return{isWebGL2:l,drawBuffers:f,getMaxAnisotropy:s,getMaxPrecision:o,precision:u,logarithmicDepthBuffer:g,maxTextures:y,maxVertexTextures:b,maxTextureSize:S,maxCubemapSize:C,maxAttributes:M,maxVertexUniforms:A,maxVaryings:O,maxFragmentUniforms:L,vertexTextures:B,floatFragmentTextures:D,floatVertexTextures:z,maxSamples:U}}function UEe(n){const e=this;let t=null,r=0,s=!1,o=!1;const l=new sv,u=new up,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(y,b,S){const C=y.length!==0||b||r!==0||s;return s=b,t=g(y,S,0),r=y.length,C},this.beginShadows=function(){o=!0,g(null)},this.endShadows=function(){o=!1,f()},this.setState=function(y,b,S){const C=y.clippingPlanes,M=y.clipIntersection,A=y.clipShadows,O=n.get(y);if(!s||C===null||C.length===0||o&&!A)o?g(null):f();else{const L=o?0:r,B=L*4;let D=O.clippingState||null;h.value=D,D=g(C,b,B,S);for(let z=0;z!==B;++z)D[z]=t[z];O.clippingState=D,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=L}};function f(){h.value!==t&&(h.value=t,h.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function g(y,b,S,C){const M=y!==null?y.length:0;let A=null;if(M!==0){if(A=h.value,C!==!0||A===null){const O=S+M*4,L=b.matrixWorldInverse;u.getNormalMatrix(L),(A===null||A.length<O)&&(A=new Float32Array(O));for(let B=0,D=S;B!==M;++B,D+=4)l.copy(y[B]).applyMatrix4(L,u),l.normal.toArray(A,D),A[D+3]=l.constant}h.value=A,h.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,A}}function HEe(n){let e=new WeakMap;function t(l,u){return u===B$?l.mapping=Gy:u===F$&&(l.mapping=Wy),l}function r(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){const u=l.mapping;if(u===B$||u===F$)if(e.has(l)){const h=e.get(l).texture;return t(h,l.mapping)}else{const h=l.image;if(h&&h.height>0){const f=new CQ(h.height/2);return f.fromEquirectangularTexture(n,l),e.set(l,f),l.addEventListener("dispose",s),t(f.texture,l.mapping)}else return null}}return l}function s(l){const u=l.target;u.removeEventListener("dispose",s);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class u_ extends mE{constructor(e=-1,t=1,r=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=r-e,l=r+e,u=s+t,h=s-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=f*this.view.offsetX,l=o+f*this.view.width,u-=g*this.view.offsetY,h=u-g*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const ZS=4,RG=[.125,.215,.35,.446,.526,.582],m1=20,BL=new u_,kG=new Bn;let FL=null;const c1=(1+Math.sqrt(5))/2,CS=1/c1,OG=[new Ae(1,1,1),new Ae(-1,1,1),new Ae(1,1,-1),new Ae(-1,1,-1),new Ae(0,c1,CS),new Ae(0,c1,-CS),new Ae(CS,0,c1),new Ae(-CS,0,c1),new Ae(c1,CS,0),new Ae(-c1,CS,0)];class MP{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,s=100){FL=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,s,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=DG(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=NG(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(FL),e.scissorTest=!1,lA(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Gy||e.mapping===Wy?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),FL=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:wl,minFilter:wl,generateMipmaps:!1,type:Z1,format:jp,encoding:Eg,depthBuffer:!1},s=LG(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=LG(e,t,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=GEe(o)),this._blurMaterial=WEe(o,e,t)}return s}_compileMaterial(e){const t=new Un(this._lodPlanes[0],e);this._renderer.compile(t,BL)}_sceneToCubeUV(e,t,r,s){const o=new Za(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,g=h.toneMapping;h.getClearColor(kG),h.toneMapping=l0,h.autoClear=!1;const y=new f0({name:"PMREM.Background",side:cd,depthWrite:!1,depthTest:!1}),b=new Un(new pu,y);let S=!1;const C=e.background;C?C.isColor&&(y.color.copy(C),e.background=null,S=!0):(y.color.copy(kG),S=!0);for(let M=0;M<6;M++){const A=M%3;A===0?(o.up.set(0,l[M],0),o.lookAt(u[M],0,0)):A===1?(o.up.set(0,0,l[M]),o.lookAt(0,u[M],0)):(o.up.set(0,l[M],0),o.lookAt(0,0,u[M]));const O=this._cubeSize;lA(s,A*O,M>2?O:0,O,O),h.setRenderTarget(s),S&&h.render(b,o),h.render(e,o)}b.geometry.dispose(),b.material.dispose(),h.toneMapping=g,h.autoClear=f,e.background=C}_textureToCubeUV(e,t){const r=this._renderer,s=e.mapping===Gy||e.mapping===Wy;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=DG()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=NG());const o=s?this._cubemapMaterial:this._equirectMaterial,l=new Un(this._lodPlanes[0],o),u=o.uniforms;u.envMap.value=e;const h=this._cubeSize;lA(t,0,0,3*h,2*h),r.setRenderTarget(t),r.render(l,BL)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=OG[(s-1)%OG.length];this._blur(e,s-1,s,o,l)}t.autoClear=r}_blur(e,t,r,s,o){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,r,s,"latitudinal",o),this._halfBlur(l,e,r,r,s,"longitudinal",o)}_halfBlur(e,t,r,s,o,l,u){const h=this._renderer,f=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const g=3,y=new Un(this._lodPlanes[s],f),b=f.uniforms,S=this._sizeLods[r]-1,C=isFinite(o)?Math.PI/(2*S):2*Math.PI/(2*m1-1),M=o/C,A=isFinite(o)?1+Math.floor(g*M):m1;A>m1&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${m1}`);const O=[];let L=0;for(let V=0;V<m1;++V){const H=V/M,oe=Math.exp(-H*H/2);O.push(oe),V===0?L+=oe:V<A&&(L+=2*oe)}for(let V=0;V<O.length;V++)O[V]=O[V]/L;b.envMap.value=e.texture,b.samples.value=A,b.weights.value=O,b.latitudinal.value=l==="latitudinal",u&&(b.poleAxis.value=u);const{_lodMax:B}=this;b.dTheta.value=C,b.mipInt.value=B-r;const D=this._sizeLods[s],z=3*D*(s>B-ZS?s-B+ZS:0),U=4*(this._cubeSize-D);lA(t,z,U,3*D,2*D),h.setRenderTarget(t),h.render(y,BL)}}function GEe(n){const e=[],t=[],r=[];let s=n;const o=n-ZS+1+RG.length;for(let l=0;l<o;l++){const u=Math.pow(2,s);t.push(u);let h=1/u;l>n-ZS?h=RG[l-n+ZS-1]:l===0&&(h=0),r.push(h);const f=1/(u-2),g=-f,y=1+f,b=[g,g,y,g,y,y,g,g,y,y,g,y],S=6,C=6,M=3,A=2,O=1,L=new Float32Array(M*C*S),B=new Float32Array(A*C*S),D=new Float32Array(O*C*S);for(let U=0;U<S;U++){const V=U%3*2/3-1,H=U>2?0:-1,oe=[V,H,0,V+2/3,H,0,V+2/3,H+1,0,V,H,0,V+2/3,H+1,0,V,H+1,0];L.set(oe,M*C*U),B.set(b,A*C*U);const le=[U,U,U,U,U,U];D.set(le,O*C*U)}const z=new ui;z.setAttribute("position",new Po(L,M)),z.setAttribute("uv",new Po(B,A)),z.setAttribute("faceIndex",new Po(D,O)),e.push(z),s>ZS&&s--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function LG(n,e,t){const r=new Nc(n,e,t);return r.texture.mapping=pE,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function lA(n,e,t,r,s){n.viewport.set(e,t,r,s),n.scissor.set(e,t,r,s)}function WEe(n,e,t){const r=new Float32Array(m1),s=new Ae(0,1,0);return new xd({name:"SphericalGaussianBlur",defines:{n:m1,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:QF(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:pp,depthTest:!1,depthWrite:!1})}function NG(){return new xd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:QF(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:pp,depthTest:!1,depthWrite:!1})}function DG(){return new xd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:QF(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:pp,depthTest:!1,depthWrite:!1})}function QF(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function VEe(n){let e=new WeakMap,t=null;function r(u){if(u&&u.isTexture){const h=u.mapping,f=h===B$||h===F$,g=h===Gy||h===Wy;if(f||g)if(u.isRenderTargetTexture&&u.needsPMREMUpdate===!0){u.needsPMREMUpdate=!1;let y=e.get(u);return t===null&&(t=new MP(n)),y=f?t.fromEquirectangular(u,y):t.fromCubemap(u,y),e.set(u,y),y.texture}else{if(e.has(u))return e.get(u).texture;{const y=u.image;if(f&&y&&y.height>0||g&&y&&s(y)){t===null&&(t=new MP(n));const b=f?t.fromEquirectangular(u):t.fromCubemap(u);return e.set(u,b),u.addEventListener("dispose",o),b.texture}else return null}}}return u}function s(u){let h=0;const f=6;for(let g=0;g<f;g++)u[g]!==void 0&&h++;return h===f}function o(u){const h=u.target;h.removeEventListener("dispose",o);const f=e.get(h);f!==void 0&&(e.delete(h),f.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:l}}function jEe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let s;switch(r){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(r)}return e[r]=s,s}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const s=t(r);return s===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),s}}}function YEe(n,e,t,r){const s={},o=new WeakMap;function l(y){const b=y.target;b.index!==null&&e.remove(b.index);for(const C in b.attributes)e.remove(b.attributes[C]);b.removeEventListener("dispose",l),delete s[b.id];const S=o.get(b);S&&(e.remove(S),o.delete(b)),r.releaseStatesOfGeometry(b),b.isInstancedBufferGeometry===!0&&delete b._maxInstanceCount,t.memory.geometries--}function u(y,b){return s[b.id]===!0||(b.addEventListener("dispose",l),s[b.id]=!0,t.memory.geometries++),b}function h(y){const b=y.attributes;for(const C in b)e.update(b[C],34962);const S=y.morphAttributes;for(const C in S){const M=S[C];for(let A=0,O=M.length;A<O;A++)e.update(M[A],34962)}}function f(y){const b=[],S=y.index,C=y.attributes.position;let M=0;if(S!==null){const L=S.array;M=S.version;for(let B=0,D=L.length;B<D;B+=3){const z=L[B+0],U=L[B+1],V=L[B+2];b.push(z,U,U,V,V,z)}}else{const L=C.array;M=C.version;for(let B=0,D=L.length/3-1;B<D;B+=3){const z=B+0,U=B+1,V=B+2;b.push(z,U,U,V,V,z)}}const A=new(EQ(b)?qF:JF)(b,1);A.version=M;const O=o.get(y);O&&e.remove(O),o.set(y,A)}function g(y){const b=o.get(y);if(b){const S=y.index;S!==null&&b.version<S.version&&f(y)}else f(y);return o.get(y)}return{get:u,update:h,getWireframeAttribute:g}}function XEe(n,e,t,r){const s=r.isWebGL2;let o;function l(b){o=b}let u,h;function f(b){u=b.type,h=b.bytesPerElement}function g(b,S){n.drawElements(o,S,u,b*h),t.update(S,o,1)}function y(b,S,C){if(C===0)return;let M,A;if(s)M=n,A="drawElementsInstanced";else if(M=e.get("ANGLE_instanced_arrays"),A="drawElementsInstancedANGLE",M===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}M[A](o,S,u,b*h,C),t.update(S,o,C)}this.setMode=l,this.setIndex=f,this.render=g,this.renderInstances=y}function KEe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,l,u){switch(t.calls++,l){case 4:t.triangles+=u*(o/3);break;case 1:t.lines+=u*(o/2);break;case 3:t.lines+=u*(o-1);break;case 2:t.lines+=u*o;break;case 0:t.points+=u*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:r}}function JEe(n,e){return n[0]-e[0]}function qEe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function zL(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Uint8Array?t=255:r instanceof Uint16Array?t=65535:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function QEe(n,e,t){const r={},s=new Float32Array(8),o=new WeakMap,l=new Ts,u=[];for(let f=0;f<8;f++)u[f]=[f,0];function h(f,g,y,b){const S=f.morphTargetInfluences;if(e.isWebGL2===!0){const C=g.morphAttributes.position||g.morphAttributes.normal||g.morphAttributes.color,M=C!==void 0?C.length:0;let A=o.get(g);if(A===void 0||A.count!==M){let B=function(){ae.dispose(),o.delete(g),g.removeEventListener("dispose",B)};A!==void 0&&A.texture.dispose();const D=g.morphAttributes.position!==void 0,z=g.morphAttributes.normal!==void 0,U=g.morphAttributes.color!==void 0,V=g.morphAttributes.position||[],H=g.morphAttributes.normal||[],oe=g.morphAttributes.color||[];let le=0;D===!0&&(le=1),z===!0&&(le=2),U===!0&&(le=3);let Z=g.attributes.position.count*le,q=1;Z>e.maxTextureSize&&(q=Math.ceil(Z/e.maxTextureSize),Z=e.maxTextureSize);const he=new Float32Array(Z*q*4*M),ae=new kC(he,Z,q,M);ae.type=r_,ae.needsUpdate=!0;const ue=le*4;for(let ge=0;ge<M;ge++){const we=V[ge],J=H[ge],re=oe[ge],ie=Z*q*4*ge;for(let fe=0;fe<we.count;fe++){const Te=fe*ue;D===!0&&(l.fromBufferAttribute(we,fe),we.normalized===!0&&zL(l,we),he[ie+Te+0]=l.x,he[ie+Te+1]=l.y,he[ie+Te+2]=l.z,he[ie+Te+3]=0),z===!0&&(l.fromBufferAttribute(J,fe),J.normalized===!0&&zL(l,J),he[ie+Te+4]=l.x,he[ie+Te+5]=l.y,he[ie+Te+6]=l.z,he[ie+Te+7]=0),U===!0&&(l.fromBufferAttribute(re,fe),re.normalized===!0&&zL(l,re),he[ie+Te+8]=l.x,he[ie+Te+9]=l.y,he[ie+Te+10]=l.z,he[ie+Te+11]=re.itemSize===4?l.w:1)}}A={count:M,texture:ae,size:new jt(Z,q)},o.set(g,A),g.addEventListener("dispose",B)}let O=0;for(let B=0;B<S.length;B++)O+=S[B];const L=g.morphTargetsRelative?1:1-O;b.getUniforms().setValue(n,"morphTargetBaseInfluence",L),b.getUniforms().setValue(n,"morphTargetInfluences",S),b.getUniforms().setValue(n,"morphTargetsTexture",A.texture,t),b.getUniforms().setValue(n,"morphTargetsTextureSize",A.size)}else{const C=S===void 0?0:S.length;let M=r[g.id];if(M===void 0||M.length!==C){M=[];for(let D=0;D<C;D++)M[D]=[D,0];r[g.id]=M}for(let D=0;D<C;D++){const z=M[D];z[0]=D,z[1]=S[D]}M.sort(qEe);for(let D=0;D<8;D++)D<C&&M[D][1]?(u[D][0]=M[D][0],u[D][1]=M[D][1]):(u[D][0]=Number.MAX_SAFE_INTEGER,u[D][1]=0);u.sort(JEe);const A=g.morphAttributes.position,O=g.morphAttributes.normal;let L=0;for(let D=0;D<8;D++){const z=u[D],U=z[0],V=z[1];U!==Number.MAX_SAFE_INTEGER&&V?(A&&g.getAttribute("morphTarget"+D)!==A[U]&&g.setAttribute("morphTarget"+D,A[U]),O&&g.getAttribute("morphNormal"+D)!==O[U]&&g.setAttribute("morphNormal"+D,O[U]),s[D]=V,L+=V):(A&&g.hasAttribute("morphTarget"+D)===!0&&g.deleteAttribute("morphTarget"+D),O&&g.hasAttribute("morphNormal"+D)===!0&&g.deleteAttribute("morphNormal"+D),s[D]=0)}const B=g.morphTargetsRelative?1:1-L;b.getUniforms().setValue(n,"morphTargetBaseInfluence",B),b.getUniforms().setValue(n,"morphTargetInfluences",s)}}return{update:h}}function ZEe(n,e,t,r){let s=new WeakMap;function o(h){const f=r.render.frame,g=h.geometry,y=e.get(h,g);return s.get(y)!==f&&(e.update(y),s.set(y,f)),h.isInstancedMesh&&(h.hasEventListener("dispose",u)===!1&&h.addEventListener("dispose",u),t.update(h.instanceMatrix,34962),h.instanceColor!==null&&t.update(h.instanceColor,34962)),y}function l(){s=new WeakMap}function u(h){const f=h.target;f.removeEventListener("dispose",u),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:o,dispose:l}}const AQ=new hc,IQ=new kC,RQ=new l2,kQ=new NC,PG=[],BG=[],FG=new Float32Array(16),zG=new Float32Array(9),UG=new Float32Array(4);function gE(n,e,t){const r=n[0];if(r<=0||r>0)return n;const s=e*t;let o=PG[s];if(o===void 0&&(o=new Float32Array(s),PG[s]=o),e!==0){r.toArray(o,0);for(let l=1,u=0;l!==e;++l)u+=t,n[l].toArray(o,u)}return o}function _p(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function vp(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function c2(n,e){let t=BG[e];t===void 0&&(t=new Int32Array(e),BG[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function exe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function txe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(_p(t,e))return;n.uniform2fv(this.addr,e),vp(t,e)}}function nxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(_p(t,e))return;n.uniform3fv(this.addr,e),vp(t,e)}}function rxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(_p(t,e))return;n.uniform4fv(this.addr,e),vp(t,e)}}function ixe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(_p(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),vp(t,e)}else{if(_p(t,r))return;UG.set(r),n.uniformMatrix2fv(this.addr,!1,UG),vp(t,r)}}function sxe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(_p(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),vp(t,e)}else{if(_p(t,r))return;zG.set(r),n.uniformMatrix3fv(this.addr,!1,zG),vp(t,r)}}function oxe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(_p(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),vp(t,e)}else{if(_p(t,r))return;FG.set(r),n.uniformMatrix4fv(this.addr,!1,FG),vp(t,r)}}function axe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function lxe(n,e){const t=this.cache;_p(t,e)||(n.uniform2iv(this.addr,e),vp(t,e))}function uxe(n,e){const t=this.cache;_p(t,e)||(n.uniform3iv(this.addr,e),vp(t,e))}function cxe(n,e){const t=this.cache;_p(t,e)||(n.uniform4iv(this.addr,e),vp(t,e))}function hxe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function dxe(n,e){const t=this.cache;_p(t,e)||(n.uniform2uiv(this.addr,e),vp(t,e))}function fxe(n,e){const t=this.cache;_p(t,e)||(n.uniform3uiv(this.addr,e),vp(t,e))}function pxe(n,e){const t=this.cache;_p(t,e)||(n.uniform4uiv(this.addr,e),vp(t,e))}function mxe(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.setTexture2D(e||AQ,s)}function gxe(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.setTexture3D(e||RQ,s)}function _xe(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.setTextureCube(e||kQ,s)}function vxe(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.setTexture2DArray(e||IQ,s)}function yxe(n){switch(n){case 5126:return exe;case 35664:return txe;case 35665:return nxe;case 35666:return rxe;case 35674:return ixe;case 35675:return sxe;case 35676:return oxe;case 5124:case 35670:return axe;case 35667:case 35671:return lxe;case 35668:case 35672:return uxe;case 35669:case 35673:return cxe;case 5125:return hxe;case 36294:return dxe;case 36295:return fxe;case 36296:return pxe;case 35678:case 36198:case 36298:case 36306:case 35682:return mxe;case 35679:case 36299:case 36307:return gxe;case 35680:case 36300:case 36308:case 36293:return _xe;case 36289:case 36303:case 36311:case 36292:return vxe}}function bxe(n,e){n.uniform1fv(this.addr,e)}function Txe(n,e){const t=gE(e,this.size,2);n.uniform2fv(this.addr,t)}function Sxe(n,e){const t=gE(e,this.size,3);n.uniform3fv(this.addr,t)}function wxe(n,e){const t=gE(e,this.size,4);n.uniform4fv(this.addr,t)}function Exe(n,e){const t=gE(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function xxe(n,e){const t=gE(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function $xe(n,e){const t=gE(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Cxe(n,e){n.uniform1iv(this.addr,e)}function Mxe(n,e){n.uniform2iv(this.addr,e)}function Axe(n,e){n.uniform3iv(this.addr,e)}function Ixe(n,e){n.uniform4iv(this.addr,e)}function Rxe(n,e){n.uniform1uiv(this.addr,e)}function kxe(n,e){n.uniform2uiv(this.addr,e)}function Oxe(n,e){n.uniform3uiv(this.addr,e)}function Lxe(n,e){n.uniform4uiv(this.addr,e)}function Nxe(n,e,t){const r=e.length,s=c2(t,r);n.uniform1iv(this.addr,s);for(let o=0;o!==r;++o)t.setTexture2D(e[o]||AQ,s[o])}function Dxe(n,e,t){const r=e.length,s=c2(t,r);n.uniform1iv(this.addr,s);for(let o=0;o!==r;++o)t.setTexture3D(e[o]||RQ,s[o])}function Pxe(n,e,t){const r=e.length,s=c2(t,r);n.uniform1iv(this.addr,s);for(let o=0;o!==r;++o)t.setTextureCube(e[o]||kQ,s[o])}function Bxe(n,e,t){const r=e.length,s=c2(t,r);n.uniform1iv(this.addr,s);for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||IQ,s[o])}function Fxe(n){switch(n){case 5126:return bxe;case 35664:return Txe;case 35665:return Sxe;case 35666:return wxe;case 35674:return Exe;case 35675:return xxe;case 35676:return $xe;case 5124:case 35670:return Cxe;case 35667:case 35671:return Mxe;case 35668:case 35672:return Axe;case 35669:case 35673:return Ixe;case 5125:return Rxe;case 36294:return kxe;case 36295:return Oxe;case 36296:return Lxe;case 35678:case 36198:case 36298:case 36306:case 35682:return Nxe;case 35679:case 36299:case 36307:return Dxe;case 35680:case 36300:case 36308:case 36293:return Pxe;case 36289:case 36303:case 36311:case 36292:return Bxe}}class zxe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=yxe(t.type)}}class Uxe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=Fxe(t.type)}}class Hxe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const s=this.seq;for(let o=0,l=s.length;o!==l;++o){const u=s[o];u.setValue(e,t[u.id],r)}}}const UL=/(\w+)(\])?(\[|\.)?/g;function HG(n,e){n.seq.push(e),n.map[e.id]=e}function Gxe(n,e,t){const r=n.name,s=r.length;for(UL.lastIndex=0;;){const o=UL.exec(r),l=UL.lastIndex;let u=o[1];const h=o[2]==="]",f=o[3];if(h&&(u=u|0),f===void 0||f==="["&&l+2===s){HG(t,f===void 0?new zxe(u,n,e):new Uxe(u,n,e));break}else{let g=t.map[u];g===void 0&&(g=new Hxe(u),HG(t,g)),t=g}}}class EI{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let s=0;s<r;++s){const o=e.getActiveUniform(t,s),l=e.getUniformLocation(t,o.name);Gxe(o,l,this)}}setValue(e,t,r,s){const o=this.map[t];o!==void 0&&o.setValue(e,r,s)}setOptional(e,t,r){const s=t[r];s!==void 0&&this.setValue(e,r,s)}static upload(e,t,r,s){for(let o=0,l=t.length;o!==l;++o){const u=t[o],h=r[u.id];h.needsUpdate!==!1&&u.setValue(e,h.value,s)}}static seqWithValue(e,t){const r=[];for(let s=0,o=e.length;s!==o;++s){const l=e[s];l.id in t&&r.push(l)}return r}}function GG(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let Wxe=0;function Vxe(n,e){const t=n.split(`
`),r=[],s=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let l=s;l<o;l++){const u=l+1;r.push(`${u===e?">":" "} ${u}: ${t[l]}`)}return r.join(`
`)}function jxe(n){switch(n){case Eg:return["Linear","( value )"];case ms:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function WG(n,e,t){const r=n.getShaderParameter(e,35713),s=n.getShaderInfoLog(e).trim();if(r&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const l=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+Vxe(n.getShaderSource(e),l)}else return s}function Yxe(n,e){const t=jxe(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Xxe(n,e){let t;switch(e){case Qq:t="Linear";break;case Zq:t="Reinhard";break;case eQ:t="OptimizedCineon";break;case WF:t="ACESFilmic";break;case tQ:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Kxe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Lx).join(`
`)}function Jxe(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function qxe(n,e){const t={},r=n.getProgramParameter(e,35721);for(let s=0;s<r;s++){const o=n.getActiveAttrib(e,s),l=o.name;let u=1;o.type===35674&&(u=2),o.type===35675&&(u=3),o.type===35676&&(u=4),t[l]={type:o.type,location:n.getAttribLocation(e,l),locationSize:u}}return t}function Lx(n){return n!==""}function VG(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function jG(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Qxe=/^[ \t]*#include +<([\w\d./]+)>/gm;function AP(n){return n.replace(Qxe,Zxe)}function Zxe(n,e){const t=ps[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return AP(t)}const e$e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,t$e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function YG(n){return n.replace(t$e,OQ).replace(e$e,n$e)}function n$e(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),OQ(n,e,t,r)}function OQ(n,e,t,r){let s="";for(let o=parseInt(e);o<parseInt(t);o++)s+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function XG(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function r$e(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===r2?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===t$?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===E1&&(e="SHADOWMAP_TYPE_VSM"),e}function i$e(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Gy:case Wy:e="ENVMAP_TYPE_CUBE";break;case pE:e="ENVMAP_TYPE_CUBE_UV";break}return e}function s$e(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Wy:e="ENVMAP_MODE_REFRACTION";break}return e}function o$e(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case RC:e="ENVMAP_BLENDING_MULTIPLY";break;case Jq:e="ENVMAP_BLENDING_MIX";break;case qq:e="ENVMAP_BLENDING_ADD";break}return e}function a$e(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function l$e(n,e,t,r){const s=n.getContext(),o=t.defines;let l=t.vertexShader,u=t.fragmentShader;const h=r$e(t),f=i$e(t),g=s$e(t),y=o$e(t),b=a$e(t),S=t.isWebGL2?"":Kxe(t),C=Jxe(o),M=s.createProgram();let A,O,L=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=[C].filter(Lx).join(`
`),A.length>0&&(A+=`
`),O=[S,C].filter(Lx).join(`
`),O.length>0&&(O+=`
`)):(A=[XG(t),"#define SHADER_NAME "+t.shaderName,C,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Lx).join(`
`),O=[S,XG(t),"#define SHADER_NAME "+t.shaderName,C,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+g:"",t.envMap?"#define "+y:"",b?"#define CUBEUV_TEXEL_WIDTH "+b.texelWidth:"",b?"#define CUBEUV_TEXEL_HEIGHT "+b.texelHeight:"",b?"#define CUBEUV_MAX_MIP "+b.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==l0?"#define TONE_MAPPING":"",t.toneMapping!==l0?ps.tonemapping_pars_fragment:"",t.toneMapping!==l0?Xxe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ps.encodings_pars_fragment,Yxe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Lx).join(`
`)),l=AP(l),l=VG(l,t),l=jG(l,t),u=AP(u),u=VG(u,t),u=jG(u,t),l=YG(l),u=YG(u),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(L=`#version 300 es
`,A=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,O=["#define varying in",t.glslVersion===$P?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===$P?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+O);const B=L+A+l,D=L+O+u,z=GG(s,35633,B),U=GG(s,35632,D);if(s.attachShader(M,z),s.attachShader(M,U),t.index0AttributeName!==void 0?s.bindAttribLocation(M,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(M,0,"position"),s.linkProgram(M),n.debug.checkShaderErrors){const oe=s.getProgramInfoLog(M).trim(),le=s.getShaderInfoLog(z).trim(),Z=s.getShaderInfoLog(U).trim();let q=!0,he=!0;if(s.getProgramParameter(M,35714)===!1){q=!1;const ae=WG(s,z,"vertex"),ue=WG(s,U,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(M,35715)+`

Program Info Log: `+oe+`
`+ae+`
`+ue)}else oe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",oe):(le===""||Z==="")&&(he=!1);he&&(this.diagnostics={runnable:q,programLog:oe,vertexShader:{log:le,prefix:A},fragmentShader:{log:Z,prefix:O}})}s.deleteShader(z),s.deleteShader(U);let V;this.getUniforms=function(){return V===void 0&&(V=new EI(s,M)),V};let H;return this.getAttributes=function(){return H===void 0&&(H=qxe(s,M)),H},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(M),this.program=void 0},this.name=t.shaderName,this.id=Wxe++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=z,this.fragmentShader=U,this}let u$e=0;class c$e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,s=this._getShaderStage(t),o=this._getShaderStage(r),l=this._getShaderCacheForMaterial(e);return l.has(s)===!1&&(l.add(s),s.usedTimes++),l.has(o)===!1&&(l.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const r=new h$e(e);t.set(e,r)}return t.get(e)}}class h$e{constructor(e){this.id=u$e++,this.code=e,this.usedTimes=0}}function d$e(n,e,t,r,s,o,l){const u=new B1,h=new c$e,f=[],g=s.isWebGL2,y=s.logarithmicDepthBuffer,b=s.vertexTextures;let S=s.precision;const C={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(H,oe,le,Z,q){const he=Z.fog,ae=q.geometry,ue=H.isMeshStandardMaterial?Z.environment:null,ge=(H.isMeshStandardMaterial?t:e).get(H.envMap||ue),we=ge&&ge.mapping===pE?ge.image.height:null,J=C[H.type];H.precision!==null&&(S=s.getMaxPrecision(H.precision),S!==H.precision&&console.warn("THREE.WebGLProgram.getParameters:",H.precision,"not supported, using",S,"instead."));const re=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,ie=re!==void 0?re.length:0;let fe=0;ae.morphAttributes.position!==void 0&&(fe=1),ae.morphAttributes.normal!==void 0&&(fe=2),ae.morphAttributes.color!==void 0&&(fe=3);let Te,Fe,Ie,qe;if(J){const lt=op[J];Te=lt.vertexShader,Fe=lt.fragmentShader}else Te=H.vertexShader,Fe=H.fragmentShader,h.update(H),Ie=h.getVertexShaderID(H),qe=h.getFragmentShaderID(H);const Re=n.getRenderTarget(),Qe=H.alphaTest>0,nt=H.clearcoat>0,ft=H.iridescence>0;return{isWebGL2:g,shaderID:J,shaderName:H.type,vertexShader:Te,fragmentShader:Fe,defines:H.defines,customVertexShaderID:Ie,customFragmentShaderID:qe,isRawShaderMaterial:H.isRawShaderMaterial===!0,glslVersion:H.glslVersion,precision:S,instancing:q.isInstancedMesh===!0,instancingColor:q.isInstancedMesh===!0&&q.instanceColor!==null,supportsVertexTextures:b,outputEncoding:Re===null?n.outputEncoding:Re.isXRRenderTarget===!0?Re.texture.encoding:Eg,map:!!H.map,matcap:!!H.matcap,envMap:!!ge,envMapMode:ge&&ge.mapping,envMapCubeUVHeight:we,lightMap:!!H.lightMap,aoMap:!!H.aoMap,emissiveMap:!!H.emissiveMap,bumpMap:!!H.bumpMap,normalMap:!!H.normalMap,objectSpaceNormalMap:H.normalMapType===bQ,tangentSpaceNormalMap:H.normalMapType===cT,decodeVideoTexture:!!H.map&&H.map.isVideoTexture===!0&&H.map.encoding===ms,clearcoat:nt,clearcoatMap:nt&&!!H.clearcoatMap,clearcoatRoughnessMap:nt&&!!H.clearcoatRoughnessMap,clearcoatNormalMap:nt&&!!H.clearcoatNormalMap,iridescence:ft,iridescenceMap:ft&&!!H.iridescenceMap,iridescenceThicknessMap:ft&&!!H.iridescenceThicknessMap,displacementMap:!!H.displacementMap,roughnessMap:!!H.roughnessMap,metalnessMap:!!H.metalnessMap,specularMap:!!H.specularMap,specularIntensityMap:!!H.specularIntensityMap,specularColorMap:!!H.specularColorMap,opaque:H.transparent===!1&&H.blending===pv,alphaMap:!!H.alphaMap,alphaTest:Qe,gradientMap:!!H.gradientMap,sheen:H.sheen>0,sheenColorMap:!!H.sheenColorMap,sheenRoughnessMap:!!H.sheenRoughnessMap,transmission:H.transmission>0,transmissionMap:!!H.transmissionMap,thicknessMap:!!H.thicknessMap,combine:H.combine,vertexTangents:!!H.normalMap&&!!ae.attributes.tangent,vertexColors:H.vertexColors,vertexAlphas:H.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,vertexUvs:!!H.map||!!H.bumpMap||!!H.normalMap||!!H.specularMap||!!H.alphaMap||!!H.emissiveMap||!!H.roughnessMap||!!H.metalnessMap||!!H.clearcoatMap||!!H.clearcoatRoughnessMap||!!H.clearcoatNormalMap||!!H.iridescenceMap||!!H.iridescenceThicknessMap||!!H.displacementMap||!!H.transmissionMap||!!H.thicknessMap||!!H.specularIntensityMap||!!H.specularColorMap||!!H.sheenColorMap||!!H.sheenRoughnessMap,uvsVertexOnly:!(H.map||H.bumpMap||H.normalMap||H.specularMap||H.alphaMap||H.emissiveMap||H.roughnessMap||H.metalnessMap||H.clearcoatNormalMap||H.iridescenceMap||H.iridescenceThicknessMap||H.transmission>0||H.transmissionMap||H.thicknessMap||H.specularIntensityMap||H.specularColorMap||H.sheen>0||H.sheenColorMap||H.sheenRoughnessMap)&&!!H.displacementMap,fog:!!he,useFog:H.fog===!0,fogExp2:he&&he.isFogExp2,flatShading:!!H.flatShading,sizeAttenuation:H.sizeAttenuation,logarithmicDepthBuffer:y,skinning:q.isSkinnedMesh===!0,morphTargets:ae.morphAttributes.position!==void 0,morphNormals:ae.morphAttributes.normal!==void 0,morphColors:ae.morphAttributes.color!==void 0,morphTargetsCount:ie,morphTextureStride:fe,numDirLights:oe.directional.length,numPointLights:oe.point.length,numSpotLights:oe.spot.length,numRectAreaLights:oe.rectArea.length,numHemiLights:oe.hemi.length,numDirLightShadows:oe.directionalShadowMap.length,numPointLightShadows:oe.pointShadowMap.length,numSpotLightShadows:oe.spotShadowMap.length,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:H.dithering,shadowMapEnabled:n.shadowMap.enabled&&le.length>0,shadowMapType:n.shadowMap.type,toneMapping:H.toneMapped?n.toneMapping:l0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:H.premultipliedAlpha,doubleSided:H.side===lp,flipSided:H.side===cd,useDepthPacking:!!H.depthPacking,depthPacking:H.depthPacking||0,index0AttributeName:H.index0AttributeName,extensionDerivatives:H.extensions&&H.extensions.derivatives,extensionFragDepth:H.extensions&&H.extensions.fragDepth,extensionDrawBuffers:H.extensions&&H.extensions.drawBuffers,extensionShaderTextureLOD:H.extensions&&H.extensions.shaderTextureLOD,rendererExtensionFragDepth:g||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:g||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:g||r.has("EXT_shader_texture_lod"),customProgramCacheKey:H.customProgramCacheKey()}}function A(H){const oe=[];if(H.shaderID?oe.push(H.shaderID):(oe.push(H.customVertexShaderID),oe.push(H.customFragmentShaderID)),H.defines!==void 0)for(const le in H.defines)oe.push(le),oe.push(H.defines[le]);return H.isRawShaderMaterial===!1&&(O(oe,H),L(oe,H),oe.push(n.outputEncoding)),oe.push(H.customProgramCacheKey),oe.join()}function O(H,oe){H.push(oe.precision),H.push(oe.outputEncoding),H.push(oe.envMapMode),H.push(oe.envMapCubeUVHeight),H.push(oe.combine),H.push(oe.vertexUvs),H.push(oe.fogExp2),H.push(oe.sizeAttenuation),H.push(oe.morphTargetsCount),H.push(oe.morphAttributeCount),H.push(oe.numDirLights),H.push(oe.numPointLights),H.push(oe.numSpotLights),H.push(oe.numHemiLights),H.push(oe.numRectAreaLights),H.push(oe.numDirLightShadows),H.push(oe.numPointLightShadows),H.push(oe.numSpotLightShadows),H.push(oe.shadowMapType),H.push(oe.toneMapping),H.push(oe.numClippingPlanes),H.push(oe.numClipIntersection),H.push(oe.depthPacking)}function L(H,oe){u.disableAll(),oe.isWebGL2&&u.enable(0),oe.supportsVertexTextures&&u.enable(1),oe.instancing&&u.enable(2),oe.instancingColor&&u.enable(3),oe.map&&u.enable(4),oe.matcap&&u.enable(5),oe.envMap&&u.enable(6),oe.lightMap&&u.enable(7),oe.aoMap&&u.enable(8),oe.emissiveMap&&u.enable(9),oe.bumpMap&&u.enable(10),oe.normalMap&&u.enable(11),oe.objectSpaceNormalMap&&u.enable(12),oe.tangentSpaceNormalMap&&u.enable(13),oe.clearcoat&&u.enable(14),oe.clearcoatMap&&u.enable(15),oe.clearcoatRoughnessMap&&u.enable(16),oe.clearcoatNormalMap&&u.enable(17),oe.iridescence&&u.enable(18),oe.iridescenceMap&&u.enable(19),oe.iridescenceThicknessMap&&u.enable(20),oe.displacementMap&&u.enable(21),oe.specularMap&&u.enable(22),oe.roughnessMap&&u.enable(23),oe.metalnessMap&&u.enable(24),oe.gradientMap&&u.enable(25),oe.alphaMap&&u.enable(26),oe.alphaTest&&u.enable(27),oe.vertexColors&&u.enable(28),oe.vertexAlphas&&u.enable(29),oe.vertexUvs&&u.enable(30),oe.vertexTangents&&u.enable(31),oe.uvsVertexOnly&&u.enable(32),oe.fog&&u.enable(33),H.push(u.mask),u.disableAll(),oe.useFog&&u.enable(0),oe.flatShading&&u.enable(1),oe.logarithmicDepthBuffer&&u.enable(2),oe.skinning&&u.enable(3),oe.morphTargets&&u.enable(4),oe.morphNormals&&u.enable(5),oe.morphColors&&u.enable(6),oe.premultipliedAlpha&&u.enable(7),oe.shadowMapEnabled&&u.enable(8),oe.physicallyCorrectLights&&u.enable(9),oe.doubleSided&&u.enable(10),oe.flipSided&&u.enable(11),oe.useDepthPacking&&u.enable(12),oe.dithering&&u.enable(13),oe.specularIntensityMap&&u.enable(14),oe.specularColorMap&&u.enable(15),oe.transmission&&u.enable(16),oe.transmissionMap&&u.enable(17),oe.thicknessMap&&u.enable(18),oe.sheen&&u.enable(19),oe.sheenColorMap&&u.enable(20),oe.sheenRoughnessMap&&u.enable(21),oe.decodeVideoTexture&&u.enable(22),oe.opaque&&u.enable(23),H.push(u.mask)}function B(H){const oe=C[H.type];let le;if(oe){const Z=op[oe];le=LC.clone(Z.uniforms)}else le=H.uniforms;return le}function D(H,oe){let le;for(let Z=0,q=f.length;Z<q;Z++){const he=f[Z];if(he.cacheKey===oe){le=he,++le.usedTimes;break}}return le===void 0&&(le=new l$e(n,oe,H,o),f.push(le)),le}function z(H){if(--H.usedTimes===0){const oe=f.indexOf(H);f[oe]=f[f.length-1],f.pop(),H.destroy()}}function U(H){h.remove(H)}function V(){h.dispose()}return{getParameters:M,getProgramCacheKey:A,getUniforms:B,acquireProgram:D,releaseProgram:z,releaseShaderCache:U,programs:f,dispose:V}}function f$e(){let n=new WeakMap;function e(o){let l=n.get(o);return l===void 0&&(l={},n.set(o,l)),l}function t(o){n.delete(o)}function r(o,l,u){n.get(o)[l]=u}function s(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:s}}function p$e(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function KG(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function JG(){const n=[];let e=0;const t=[],r=[],s=[];function o(){e=0,t.length=0,r.length=0,s.length=0}function l(y,b,S,C,M,A){let O=n[e];return O===void 0?(O={id:y.id,object:y,geometry:b,material:S,groupOrder:C,renderOrder:y.renderOrder,z:M,group:A},n[e]=O):(O.id=y.id,O.object=y,O.geometry=b,O.material=S,O.groupOrder=C,O.renderOrder=y.renderOrder,O.z=M,O.group=A),e++,O}function u(y,b,S,C,M,A){const O=l(y,b,S,C,M,A);S.transmission>0?r.push(O):S.transparent===!0?s.push(O):t.push(O)}function h(y,b,S,C,M,A){const O=l(y,b,S,C,M,A);S.transmission>0?r.unshift(O):S.transparent===!0?s.unshift(O):t.unshift(O)}function f(y,b){t.length>1&&t.sort(y||p$e),r.length>1&&r.sort(b||KG),s.length>1&&s.sort(b||KG)}function g(){for(let y=e,b=n.length;y<b;y++){const S=n[y];if(S.id===null)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.group=null}}return{opaque:t,transmissive:r,transparent:s,init:o,push:u,unshift:h,finish:g,sort:f}}function m$e(){let n=new WeakMap;function e(r,s){let o;return n.has(r)===!1?(o=new JG,n.set(r,[o])):s>=n.get(r).length?(o=new JG,n.get(r).push(o)):o=n.get(r)[s],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function g$e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Ae,color:new Bn};break;case"SpotLight":t={position:new Ae,direction:new Ae,color:new Bn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Ae,color:new Bn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Ae,skyColor:new Bn,groundColor:new Bn};break;case"RectAreaLight":t={color:new Bn,position:new Ae,halfWidth:new Ae,halfHeight:new Ae};break}return n[e.id]=t,t}}}function _$e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let v$e=0;function y$e(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function b$e(n,e){const t=new g$e,r=_$e(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let g=0;g<9;g++)s.probe.push(new Ae);const o=new Ae,l=new Qr,u=new Qr;function h(g,y){let b=0,S=0,C=0;for(let oe=0;oe<9;oe++)s.probe[oe].set(0,0,0);let M=0,A=0,O=0,L=0,B=0,D=0,z=0,U=0;g.sort(y$e);const V=y!==!0?Math.PI:1;for(let oe=0,le=g.length;oe<le;oe++){const Z=g[oe],q=Z.color,he=Z.intensity,ae=Z.distance,ue=Z.shadow&&Z.shadow.map?Z.shadow.map.texture:null;if(Z.isAmbientLight)b+=q.r*he*V,S+=q.g*he*V,C+=q.b*he*V;else if(Z.isLightProbe)for(let ge=0;ge<9;ge++)s.probe[ge].addScaledVector(Z.sh.coefficients[ge],he);else if(Z.isDirectionalLight){const ge=t.get(Z);if(ge.color.copy(Z.color).multiplyScalar(Z.intensity*V),Z.castShadow){const we=Z.shadow,J=r.get(Z);J.shadowBias=we.bias,J.shadowNormalBias=we.normalBias,J.shadowRadius=we.radius,J.shadowMapSize=we.mapSize,s.directionalShadow[M]=J,s.directionalShadowMap[M]=ue,s.directionalShadowMatrix[M]=Z.shadow.matrix,D++}s.directional[M]=ge,M++}else if(Z.isSpotLight){const ge=t.get(Z);if(ge.position.setFromMatrixPosition(Z.matrixWorld),ge.color.copy(q).multiplyScalar(he*V),ge.distance=ae,ge.coneCos=Math.cos(Z.angle),ge.penumbraCos=Math.cos(Z.angle*(1-Z.penumbra)),ge.decay=Z.decay,Z.castShadow){const we=Z.shadow,J=r.get(Z);J.shadowBias=we.bias,J.shadowNormalBias=we.normalBias,J.shadowRadius=we.radius,J.shadowMapSize=we.mapSize,s.spotShadow[O]=J,s.spotShadowMap[O]=ue,s.spotShadowMatrix[O]=Z.shadow.matrix,U++}s.spot[O]=ge,O++}else if(Z.isRectAreaLight){const ge=t.get(Z);ge.color.copy(q).multiplyScalar(he),ge.halfWidth.set(Z.width*.5,0,0),ge.halfHeight.set(0,Z.height*.5,0),s.rectArea[L]=ge,L++}else if(Z.isPointLight){const ge=t.get(Z);if(ge.color.copy(Z.color).multiplyScalar(Z.intensity*V),ge.distance=Z.distance,ge.decay=Z.decay,Z.castShadow){const we=Z.shadow,J=r.get(Z);J.shadowBias=we.bias,J.shadowNormalBias=we.normalBias,J.shadowRadius=we.radius,J.shadowMapSize=we.mapSize,J.shadowCameraNear=we.camera.near,J.shadowCameraFar=we.camera.far,s.pointShadow[A]=J,s.pointShadowMap[A]=ue,s.pointShadowMatrix[A]=Z.shadow.matrix,z++}s.point[A]=ge,A++}else if(Z.isHemisphereLight){const ge=t.get(Z);ge.skyColor.copy(Z.color).multiplyScalar(he*V),ge.groundColor.copy(Z.groundColor).multiplyScalar(he*V),s.hemi[B]=ge,B++}}L>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=Xn.LTC_FLOAT_1,s.rectAreaLTC2=Xn.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(s.rectAreaLTC1=Xn.LTC_HALF_1,s.rectAreaLTC2=Xn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=b,s.ambient[1]=S,s.ambient[2]=C;const H=s.hash;(H.directionalLength!==M||H.pointLength!==A||H.spotLength!==O||H.rectAreaLength!==L||H.hemiLength!==B||H.numDirectionalShadows!==D||H.numPointShadows!==z||H.numSpotShadows!==U)&&(s.directional.length=M,s.spot.length=O,s.rectArea.length=L,s.point.length=A,s.hemi.length=B,s.directionalShadow.length=D,s.directionalShadowMap.length=D,s.pointShadow.length=z,s.pointShadowMap.length=z,s.spotShadow.length=U,s.spotShadowMap.length=U,s.directionalShadowMatrix.length=D,s.pointShadowMatrix.length=z,s.spotShadowMatrix.length=U,H.directionalLength=M,H.pointLength=A,H.spotLength=O,H.rectAreaLength=L,H.hemiLength=B,H.numDirectionalShadows=D,H.numPointShadows=z,H.numSpotShadows=U,s.version=v$e++)}function f(g,y){let b=0,S=0,C=0,M=0,A=0;const O=y.matrixWorldInverse;for(let L=0,B=g.length;L<B;L++){const D=g[L];if(D.isDirectionalLight){const z=s.directional[b];z.direction.setFromMatrixPosition(D.matrixWorld),o.setFromMatrixPosition(D.target.matrixWorld),z.direction.sub(o),z.direction.transformDirection(O),b++}else if(D.isSpotLight){const z=s.spot[C];z.position.setFromMatrixPosition(D.matrixWorld),z.position.applyMatrix4(O),z.direction.setFromMatrixPosition(D.matrixWorld),o.setFromMatrixPosition(D.target.matrixWorld),z.direction.sub(o),z.direction.transformDirection(O),C++}else if(D.isRectAreaLight){const z=s.rectArea[M];z.position.setFromMatrixPosition(D.matrixWorld),z.position.applyMatrix4(O),u.identity(),l.copy(D.matrixWorld),l.premultiply(O),u.extractRotation(l),z.halfWidth.set(D.width*.5,0,0),z.halfHeight.set(0,D.height*.5,0),z.halfWidth.applyMatrix4(u),z.halfHeight.applyMatrix4(u),M++}else if(D.isPointLight){const z=s.point[S];z.position.setFromMatrixPosition(D.matrixWorld),z.position.applyMatrix4(O),S++}else if(D.isHemisphereLight){const z=s.hemi[A];z.direction.setFromMatrixPosition(D.matrixWorld),z.direction.transformDirection(O),A++}}}return{setup:h,setupView:f,state:s}}function qG(n,e){const t=new b$e(n,e),r=[],s=[];function o(){r.length=0,s.length=0}function l(g){r.push(g)}function u(g){s.push(g)}function h(g){t.setup(r,g)}function f(g){t.setupView(r,g)}return{init:o,state:{lightsArray:r,shadowsArray:s,lights:t},setupLights:h,setupLightsView:f,pushLight:l,pushShadow:u}}function T$e(n,e){let t=new WeakMap;function r(o,l=0){let u;return t.has(o)===!1?(u=new qG(n,e),t.set(o,[u])):l>=t.get(o).length?(u=new qG(n,e),t.get(o).push(u)):u=t.get(o)[l],u}function s(){t=new WeakMap}return{get:r,dispose:s}}class DC extends hd{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=nb,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class h2 extends hd{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Ae,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const S$e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,w$e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function E$e(n,e,t){let r=new u2;const s=new jt,o=new jt,l=new Ts,u=new DC({depthPacking:Nw}),h=new h2,f={},g=t.maxTextureSize,y={0:cd,1:f_,2:lp},b=new xd({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new jt},radius:{value:4}},vertexShader:S$e,fragmentShader:w$e}),S=b.clone();S.defines.HORIZONTAL_PASS=1;const C=new ui;C.setAttribute("position",new Po(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new Un(C,b),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=r2,this.render=function(D,z,U){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||D.length===0)return;const V=n.getRenderTarget(),H=n.getActiveCubeFace(),oe=n.getActiveMipmapLevel(),le=n.state;le.setBlending(pp),le.buffers.color.setClear(1,1,1,1),le.buffers.depth.setTest(!0),le.setScissorTest(!1);for(let Z=0,q=D.length;Z<q;Z++){const he=D[Z],ae=he.shadow;if(ae===void 0){console.warn("THREE.WebGLShadowMap:",he,"has no shadow.");continue}if(ae.autoUpdate===!1&&ae.needsUpdate===!1)continue;s.copy(ae.mapSize);const ue=ae.getFrameExtents();if(s.multiply(ue),o.copy(ae.mapSize),(s.x>g||s.y>g)&&(s.x>g&&(o.x=Math.floor(g/ue.x),s.x=o.x*ue.x,ae.mapSize.x=o.x),s.y>g&&(o.y=Math.floor(g/ue.y),s.y=o.y*ue.y,ae.mapSize.y=o.y)),ae.map===null){const we=this.type!==E1?{minFilter:Wl,magFilter:Wl}:{};ae.map=new Nc(s.x,s.y,we),ae.map.texture.name=he.name+".shadowMap",ae.camera.updateProjectionMatrix()}n.setRenderTarget(ae.map),n.clear();const ge=ae.getViewportCount();for(let we=0;we<ge;we++){const J=ae.getViewport(we);l.set(o.x*J.x,o.y*J.y,o.x*J.z,o.y*J.w),le.viewport(l),ae.updateMatrices(he,we),r=ae.getFrustum(),B(z,U,ae.camera,he,this.type)}ae.isPointLightShadow!==!0&&this.type===E1&&O(ae,U),ae.needsUpdate=!1}A.needsUpdate=!1,n.setRenderTarget(V,H,oe)};function O(D,z){const U=e.update(M);b.defines.VSM_SAMPLES!==D.blurSamples&&(b.defines.VSM_SAMPLES=D.blurSamples,S.defines.VSM_SAMPLES=D.blurSamples,b.needsUpdate=!0,S.needsUpdate=!0),D.mapPass===null&&(D.mapPass=new Nc(s.x,s.y)),b.uniforms.shadow_pass.value=D.map.texture,b.uniforms.resolution.value=D.mapSize,b.uniforms.radius.value=D.radius,n.setRenderTarget(D.mapPass),n.clear(),n.renderBufferDirect(z,null,U,b,M,null),S.uniforms.shadow_pass.value=D.mapPass.texture,S.uniforms.resolution.value=D.mapSize,S.uniforms.radius.value=D.radius,n.setRenderTarget(D.map),n.clear(),n.renderBufferDirect(z,null,U,S,M,null)}function L(D,z,U,V,H,oe){let le=null;const Z=U.isPointLight===!0?D.customDistanceMaterial:D.customDepthMaterial;if(Z!==void 0?le=Z:le=U.isPointLight===!0?h:u,n.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0){const q=le.uuid,he=z.uuid;let ae=f[q];ae===void 0&&(ae={},f[q]=ae);let ue=ae[he];ue===void 0&&(ue=le.clone(),ae[he]=ue),le=ue}return le.visible=z.visible,le.wireframe=z.wireframe,oe===E1?le.side=z.shadowSide!==null?z.shadowSide:z.side:le.side=z.shadowSide!==null?z.shadowSide:y[z.side],le.alphaMap=z.alphaMap,le.alphaTest=z.alphaTest,le.clipShadows=z.clipShadows,le.clippingPlanes=z.clippingPlanes,le.clipIntersection=z.clipIntersection,le.displacementMap=z.displacementMap,le.displacementScale=z.displacementScale,le.displacementBias=z.displacementBias,le.wireframeLinewidth=z.wireframeLinewidth,le.linewidth=z.linewidth,U.isPointLight===!0&&le.isMeshDistanceMaterial===!0&&(le.referencePosition.setFromMatrixPosition(U.matrixWorld),le.nearDistance=V,le.farDistance=H),le}function B(D,z,U,V,H){if(D.visible===!1)return;if(D.layers.test(z.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&H===E1)&&(!D.frustumCulled||r.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,D.matrixWorld);const le=e.update(D),Z=D.material;if(Array.isArray(Z)){const q=le.groups;for(let he=0,ae=q.length;he<ae;he++){const ue=q[he],ge=Z[ue.materialIndex];if(ge&&ge.visible){const we=L(D,ge,V,U.near,U.far,H);n.renderBufferDirect(U,null,le,we,D,ue)}}}else if(Z.visible){const q=L(D,Z,V,U.near,U.far,H);n.renderBufferDirect(U,null,le,q,D,null)}}const oe=D.children;for(let le=0,Z=oe.length;le<Z;le++)B(oe[le],z,U,V,H)}}function x$e(n,e,t){const r=t.isWebGL2;function s(){let Ge=!1;const tn=new Ts;let _t=null;const Jt=new Ts(0,0,0,0);return{setMask:function(Kt){_t!==Kt&&!Ge&&(n.colorMask(Kt,Kt,Kt,Kt),_t=Kt)},setLocked:function(Kt){Ge=Kt},setClear:function(Kt,On,si,Pr,Ei){Ei===!0&&(Kt*=Pr,On*=Pr,si*=Pr),tn.set(Kt,On,si,Pr),Jt.equals(tn)===!1&&(n.clearColor(Kt,On,si,Pr),Jt.copy(tn))},reset:function(){Ge=!1,_t=null,Jt.set(-1,0,0,0)}}}function o(){let Ge=!1,tn=null,_t=null,Jt=null;return{setTest:function(Kt){Kt?Qe(2929):nt(2929)},setMask:function(Kt){tn!==Kt&&!Ge&&(n.depthMask(Kt),tn=Kt)},setFunc:function(Kt){if(_t!==Kt){if(Kt)switch(Kt){case Gq:n.depthFunc(512);break;case Wq:n.depthFunc(519);break;case Vq:n.depthFunc(513);break;case vR:n.depthFunc(515);break;case jq:n.depthFunc(514);break;case Yq:n.depthFunc(518);break;case Xq:n.depthFunc(516);break;case Kq:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);_t=Kt}},setLocked:function(Kt){Ge=Kt},setClear:function(Kt){Jt!==Kt&&(n.clearDepth(Kt),Jt=Kt)},reset:function(){Ge=!1,tn=null,_t=null,Jt=null}}}function l(){let Ge=!1,tn=null,_t=null,Jt=null,Kt=null,On=null,si=null,Pr=null,Ei=null;return{setTest:function($r){Ge||($r?Qe(2960):nt(2960))},setMask:function($r){tn!==$r&&!Ge&&(n.stencilMask($r),tn=$r)},setFunc:function($r,gr,ne){(_t!==$r||Jt!==gr||Kt!==ne)&&(n.stencilFunc($r,gr,ne),_t=$r,Jt=gr,Kt=ne)},setOp:function($r,gr,ne){(On!==$r||si!==gr||Pr!==ne)&&(n.stencilOp($r,gr,ne),On=$r,si=gr,Pr=ne)},setLocked:function($r){Ge=$r},setClear:function($r){Ei!==$r&&(n.clearStencil($r),Ei=$r)},reset:function(){Ge=!1,tn=null,_t=null,Jt=null,Kt=null,On=null,si=null,Pr=null,Ei=null}}}const u=new s,h=new o,f=new l,g=new WeakMap,y=new WeakMap;let b={},S={},C=new WeakMap,M=[],A=null,O=!1,L=null,B=null,D=null,z=null,U=null,V=null,H=null,oe=!1,le=null,Z=null,q=null,he=null,ae=null;const ue=n.getParameter(35661);let ge=!1,we=0;const J=n.getParameter(7938);J.indexOf("WebGL")!==-1?(we=parseFloat(/^WebGL (\d)/.exec(J)[1]),ge=we>=1):J.indexOf("OpenGL ES")!==-1&&(we=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),ge=we>=2);let re=null,ie={};const fe=n.getParameter(3088),Te=n.getParameter(2978),Fe=new Ts().fromArray(fe),Ie=new Ts().fromArray(Te);function qe(Ge,tn,_t){const Jt=new Uint8Array(4),Kt=n.createTexture();n.bindTexture(Ge,Kt),n.texParameteri(Ge,10241,9728),n.texParameteri(Ge,10240,9728);for(let On=0;On<_t;On++)n.texImage2D(tn+On,0,6408,1,1,0,6408,5121,Jt);return Kt}const Re={};Re[3553]=qe(3553,3553,1),Re[34067]=qe(34067,34069,6),u.setClear(0,0,0,1),h.setClear(1),f.setClear(0),Qe(2929),h.setFunc(vR),Nt(!1),kt(eP),Qe(2884),rt(pp);function Qe(Ge){b[Ge]!==!0&&(n.enable(Ge),b[Ge]=!0)}function nt(Ge){b[Ge]!==!1&&(n.disable(Ge),b[Ge]=!1)}function ft(Ge,tn){return S[Ge]!==tn?(n.bindFramebuffer(Ge,tn),S[Ge]=tn,r&&(Ge===36009&&(S[36160]=tn),Ge===36160&&(S[36009]=tn)),!0):!1}function lt(Ge,tn){let _t=M,Jt=!1;if(Ge)if(_t=C.get(tn),_t===void 0&&(_t=[],C.set(tn,_t)),Ge.isWebGLMultipleRenderTargets){const Kt=Ge.texture;if(_t.length!==Kt.length||_t[0]!==36064){for(let On=0,si=Kt.length;On<si;On++)_t[On]=36064+On;_t.length=Kt.length,Jt=!0}}else _t[0]!==36064&&(_t[0]=36064,Jt=!0);else _t[0]!==1029&&(_t[0]=1029,Jt=!0);Jt&&(t.isWebGL2?n.drawBuffers(_t):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(_t))}function ze(Ge){return A!==Ge?(n.useProgram(Ge),A=Ge,!0):!1}const Ce={[p1]:32774,[Oq]:32778,[GF]:32779};if(r)Ce[rP]=32775,Ce[iP]=32776;else{const Ge=e.get("EXT_blend_minmax");Ge!==null&&(Ce[rP]=Ge.MIN_EXT,Ce[iP]=Ge.MAX_EXT)}const He={[Lq]:0,[Nq]:1,[Dq]:768,[i2]:770,[Hq]:776,[zq]:774,[Bq]:772,[Pq]:769,[s2]:771,[Uq]:775,[Fq]:773};function rt(Ge,tn,_t,Jt,Kt,On,si,Pr){if(Ge===pp){O===!0&&(nt(3042),O=!1);return}if(O===!1&&(Qe(3042),O=!0),Ge!==kq){if(Ge!==L||Pr!==oe){if((B!==p1||U!==p1)&&(n.blendEquation(32774),B=p1,U=p1),Pr)switch(Ge){case pv:n.blendFuncSeparate(1,771,1,771);break;case _R:n.blendFunc(1,1);break;case tP:n.blendFuncSeparate(0,769,0,1);break;case nP:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ge);break}else switch(Ge){case pv:n.blendFuncSeparate(770,771,1,771);break;case _R:n.blendFunc(770,1);break;case tP:n.blendFuncSeparate(0,769,0,1);break;case nP:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ge);break}D=null,z=null,V=null,H=null,L=Ge,oe=Pr}return}Kt=Kt||tn,On=On||_t,si=si||Jt,(tn!==B||Kt!==U)&&(n.blendEquationSeparate(Ce[tn],Ce[Kt]),B=tn,U=Kt),(_t!==D||Jt!==z||On!==V||si!==H)&&(n.blendFuncSeparate(He[_t],He[Jt],He[On],He[si]),D=_t,z=Jt,V=On,H=si),L=Ge,oe=null}function it(Ge,tn){Ge.side===lp?nt(2884):Qe(2884);let _t=Ge.side===cd;tn&&(_t=!_t),Nt(_t),Ge.blending===pv&&Ge.transparent===!1?rt(pp):rt(Ge.blending,Ge.blendEquation,Ge.blendSrc,Ge.blendDst,Ge.blendEquationAlpha,Ge.blendSrcAlpha,Ge.blendDstAlpha,Ge.premultipliedAlpha),h.setFunc(Ge.depthFunc),h.setTest(Ge.depthTest),h.setMask(Ge.depthWrite),u.setMask(Ge.colorWrite);const Jt=Ge.stencilWrite;f.setTest(Jt),Jt&&(f.setMask(Ge.stencilWriteMask),f.setFunc(Ge.stencilFunc,Ge.stencilRef,Ge.stencilFuncMask),f.setOp(Ge.stencilFail,Ge.stencilZFail,Ge.stencilZPass)),Mt(Ge.polygonOffset,Ge.polygonOffsetFactor,Ge.polygonOffsetUnits),Ge.alphaToCoverage===!0?Qe(32926):nt(32926)}function Nt(Ge){le!==Ge&&(Ge?n.frontFace(2304):n.frontFace(2305),le=Ge)}function kt(Ge){Ge!==Mq?(Qe(2884),Ge!==Z&&(Ge===eP?n.cullFace(1029):Ge===Aq?n.cullFace(1028):n.cullFace(1032))):nt(2884),Z=Ge}function vt(Ge){Ge!==q&&(ge&&n.lineWidth(Ge),q=Ge)}function Mt(Ge,tn,_t){Ge?(Qe(32823),(he!==tn||ae!==_t)&&(n.polygonOffset(tn,_t),he=tn,ae=_t)):nt(32823)}function At(Ge){Ge?Qe(3089):nt(3089)}function mt(Ge){Ge===void 0&&(Ge=33984+ue-1),re!==Ge&&(n.activeTexture(Ge),re=Ge)}function xe(Ge,tn){re===null&&mt();let _t=ie[re];_t===void 0&&(_t={type:void 0,texture:void 0},ie[re]=_t),(_t.type!==Ge||_t.texture!==tn)&&(n.bindTexture(Ge,tn||Re[Ge]),_t.type=Ge,_t.texture=tn)}function se(){const Ge=ie[re];Ge!==void 0&&Ge.type!==void 0&&(n.bindTexture(Ge.type,null),Ge.type=void 0,Ge.texture=void 0)}function $e(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Ge){console.error("THREE.WebGLState:",Ge)}}function ht(){try{n.texSubImage2D.apply(n,arguments)}catch(Ge){console.error("THREE.WebGLState:",Ge)}}function St(){try{n.texSubImage3D.apply(n,arguments)}catch(Ge){console.error("THREE.WebGLState:",Ge)}}function It(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Ge){console.error("THREE.WebGLState:",Ge)}}function pt(){try{n.texStorage2D.apply(n,arguments)}catch(Ge){console.error("THREE.WebGLState:",Ge)}}function Ke(){try{n.texStorage3D.apply(n,arguments)}catch(Ge){console.error("THREE.WebGLState:",Ge)}}function Le(){try{n.texImage2D.apply(n,arguments)}catch(Ge){console.error("THREE.WebGLState:",Ge)}}function Q(){try{n.texImage3D.apply(n,arguments)}catch(Ge){console.error("THREE.WebGLState:",Ge)}}function te(Ge){Fe.equals(Ge)===!1&&(n.scissor(Ge.x,Ge.y,Ge.z,Ge.w),Fe.copy(Ge))}function me(Ge){Ie.equals(Ge)===!1&&(n.viewport(Ge.x,Ge.y,Ge.z,Ge.w),Ie.copy(Ge))}function ke(Ge,tn){let _t=y.get(tn);_t===void 0&&(_t=new WeakMap,y.set(tn,_t));let Jt=_t.get(Ge);Jt===void 0&&(Jt=n.getUniformBlockIndex(tn,Ge.name),_t.set(Ge,Jt))}function Xe(Ge,tn){const _t=y.get(tn).get(Ge);g.get(Ge)!==_t&&(n.uniformBlockBinding(tn,_t,Ge.__bindingPointIndex),g.set(Ge,_t))}function Wt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),b={},re=null,ie={},S={},C=new WeakMap,M=[],A=null,O=!1,L=null,B=null,D=null,z=null,U=null,V=null,H=null,oe=!1,le=null,Z=null,q=null,he=null,ae=null,Fe.set(0,0,n.canvas.width,n.canvas.height),Ie.set(0,0,n.canvas.width,n.canvas.height),u.reset(),h.reset(),f.reset()}return{buffers:{color:u,depth:h,stencil:f},enable:Qe,disable:nt,bindFramebuffer:ft,drawBuffers:lt,useProgram:ze,setBlending:rt,setMaterial:it,setFlipSided:Nt,setCullFace:kt,setLineWidth:vt,setPolygonOffset:Mt,setScissorTest:At,activeTexture:mt,bindTexture:xe,unbindTexture:se,compressedTexImage2D:$e,texImage2D:Le,texImage3D:Q,updateUBOMapping:ke,uniformBlockBinding:Xe,texStorage2D:pt,texStorage3D:Ke,texSubImage2D:ht,texSubImage3D:St,compressedTexSubImage2D:It,scissor:te,viewport:me,reset:Wt}}function $$e(n,e,t,r,s,o,l){const u=s.isWebGL2,h=s.maxTextures,f=s.maxCubemapSize,g=s.maxTextureSize,y=s.maxSamples,b=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,S=/OculusBrowser/g.test(navigator.userAgent),C=new WeakMap;let M;const A=new WeakMap;let O=!1;try{O=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function L(xe,se){return O?new OffscreenCanvas(xe,se):j$("canvas")}function B(xe,se,$e,ht){let St=1;if((xe.width>ht||xe.height>ht)&&(St=ht/Math.max(xe.width,xe.height)),St<1||se===!0)if(typeof HTMLImageElement<"u"&&xe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&xe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&xe instanceof ImageBitmap){const It=se?SR:Math.floor,pt=It(St*xe.width),Ke=It(St*xe.height);M===void 0&&(M=L(pt,Ke));const Le=$e?L(pt,Ke):M;return Le.width=pt,Le.height=Ke,Le.getContext("2d").drawImage(xe,0,0,pt,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+pt+"x"+Ke+")."),Le}else return"data"in xe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),xe;return xe}function D(xe){return CP(xe.width)&&CP(xe.height)}function z(xe){return u?!1:xe.wrapS!==ap||xe.wrapT!==ap||xe.minFilter!==Wl&&xe.minFilter!==wl}function U(xe,se){return xe.generateMipmaps&&se&&xe.minFilter!==Wl&&xe.minFilter!==wl}function V(xe){n.generateMipmap(xe)}function H(xe,se,$e,ht,St=!1){if(u===!1)return se;if(xe!==null){if(n[xe]!==void 0)return n[xe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+xe+"'")}let It=se;return se===6403&&($e===5126&&(It=33326),$e===5131&&(It=33325),$e===5121&&(It=33321)),se===33319&&($e===5126&&(It=33328),$e===5131&&(It=33327),$e===5121&&(It=33323)),se===6408&&($e===5126&&(It=34836),$e===5131&&(It=34842),$e===5121&&(It=ht===ms&&St===!1?35907:32856),$e===32819&&(It=32854),$e===32820&&(It=32855)),(It===33325||It===33326||It===33327||It===33328||It===34842||It===34836)&&e.get("EXT_color_buffer_float"),It}function oe(xe,se,$e){return U(xe,$e)===!0||xe.isFramebufferTexture&&xe.minFilter!==Wl&&xe.minFilter!==wl?Math.log2(Math.max(se.width,se.height))+1:xe.mipmaps!==void 0&&xe.mipmaps.length>0?xe.mipmaps.length:xe.isCompressedTexture&&Array.isArray(xe.image)?se.mipmaps.length:1}function le(xe){return xe===Wl||xe===yR||xe===bR?9728:9729}function Z(xe){const se=xe.target;se.removeEventListener("dispose",Z),he(se),se.isVideoTexture&&C.delete(se)}function q(xe){const se=xe.target;se.removeEventListener("dispose",q),ue(se)}function he(xe){const se=r.get(xe);if(se.__webglInit===void 0)return;const $e=xe.source,ht=A.get($e);if(ht){const St=ht[se.__cacheKey];St.usedTimes--,St.usedTimes===0&&ae(xe),Object.keys(ht).length===0&&A.delete($e)}r.remove(xe)}function ae(xe){const se=r.get(xe);n.deleteTexture(se.__webglTexture);const $e=xe.source,ht=A.get($e);delete ht[se.__cacheKey],l.memory.textures--}function ue(xe){const se=xe.texture,$e=r.get(xe),ht=r.get(se);if(ht.__webglTexture!==void 0&&(n.deleteTexture(ht.__webglTexture),l.memory.textures--),xe.depthTexture&&xe.depthTexture.dispose(),xe.isWebGLCubeRenderTarget)for(let St=0;St<6;St++)n.deleteFramebuffer($e.__webglFramebuffer[St]),$e.__webglDepthbuffer&&n.deleteRenderbuffer($e.__webglDepthbuffer[St]);else{if(n.deleteFramebuffer($e.__webglFramebuffer),$e.__webglDepthbuffer&&n.deleteRenderbuffer($e.__webglDepthbuffer),$e.__webglMultisampledFramebuffer&&n.deleteFramebuffer($e.__webglMultisampledFramebuffer),$e.__webglColorRenderbuffer)for(let St=0;St<$e.__webglColorRenderbuffer.length;St++)$e.__webglColorRenderbuffer[St]&&n.deleteRenderbuffer($e.__webglColorRenderbuffer[St]);$e.__webglDepthRenderbuffer&&n.deleteRenderbuffer($e.__webglDepthRenderbuffer)}if(xe.isWebGLMultipleRenderTargets)for(let St=0,It=se.length;St<It;St++){const pt=r.get(se[St]);pt.__webglTexture&&(n.deleteTexture(pt.__webglTexture),l.memory.textures--),r.remove(se[St])}r.remove(se),r.remove(xe)}let ge=0;function we(){ge=0}function J(){const xe=ge;return xe>=h&&console.warn("THREE.WebGLTextures: Trying to use "+xe+" texture units while this GPU supports only "+h),ge+=1,xe}function re(xe){const se=[];return se.push(xe.wrapS),se.push(xe.wrapT),se.push(xe.magFilter),se.push(xe.minFilter),se.push(xe.anisotropy),se.push(xe.internalFormat),se.push(xe.format),se.push(xe.type),se.push(xe.generateMipmaps),se.push(xe.premultiplyAlpha),se.push(xe.flipY),se.push(xe.unpackAlignment),se.push(xe.encoding),se.join()}function ie(xe,se){const $e=r.get(xe);if(xe.isVideoTexture&&At(xe),xe.isRenderTargetTexture===!1&&xe.version>0&&$e.__version!==xe.version){const ht=xe.image;if(ht===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ht.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{nt($e,xe,se);return}}t.activeTexture(33984+se),t.bindTexture(3553,$e.__webglTexture)}function fe(xe,se){const $e=r.get(xe);if(xe.version>0&&$e.__version!==xe.version){nt($e,xe,se);return}t.activeTexture(33984+se),t.bindTexture(35866,$e.__webglTexture)}function Te(xe,se){const $e=r.get(xe);if(xe.version>0&&$e.__version!==xe.version){nt($e,xe,se);return}t.activeTexture(33984+se),t.bindTexture(32879,$e.__webglTexture)}function Fe(xe,se){const $e=r.get(xe);if(xe.version>0&&$e.__version!==xe.version){ft($e,xe,se);return}t.activeTexture(33984+se),t.bindTexture(34067,$e.__webglTexture)}const Ie={[Lw]:10497,[ap]:33071,[z$]:33648},qe={[Wl]:9728,[yR]:9984,[bR]:9986,[wl]:9729,[VF]:9985,[uT]:9987};function Re(xe,se,$e){if($e?(n.texParameteri(xe,10242,Ie[se.wrapS]),n.texParameteri(xe,10243,Ie[se.wrapT]),(xe===32879||xe===35866)&&n.texParameteri(xe,32882,Ie[se.wrapR]),n.texParameteri(xe,10240,qe[se.magFilter]),n.texParameteri(xe,10241,qe[se.minFilter])):(n.texParameteri(xe,10242,33071),n.texParameteri(xe,10243,33071),(xe===32879||xe===35866)&&n.texParameteri(xe,32882,33071),(se.wrapS!==ap||se.wrapT!==ap)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(xe,10240,le(se.magFilter)),n.texParameteri(xe,10241,le(se.minFilter)),se.minFilter!==Wl&&se.minFilter!==wl&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ht=e.get("EXT_texture_filter_anisotropic");if(se.type===r_&&e.has("OES_texture_float_linear")===!1||u===!1&&se.type===Z1&&e.has("OES_texture_half_float_linear")===!1)return;(se.anisotropy>1||r.get(se).__currentAnisotropy)&&(n.texParameterf(xe,ht.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(se.anisotropy,s.getMaxAnisotropy())),r.get(se).__currentAnisotropy=se.anisotropy)}}function Qe(xe,se){let $e=!1;xe.__webglInit===void 0&&(xe.__webglInit=!0,se.addEventListener("dispose",Z));const ht=se.source;let St=A.get(ht);St===void 0&&(St={},A.set(ht,St));const It=re(se);if(It!==xe.__cacheKey){St[It]===void 0&&(St[It]={texture:n.createTexture(),usedTimes:0},l.memory.textures++,$e=!0),St[It].usedTimes++;const pt=St[xe.__cacheKey];pt!==void 0&&(St[xe.__cacheKey].usedTimes--,pt.usedTimes===0&&ae(se)),xe.__cacheKey=It,xe.__webglTexture=St[It].texture}return $e}function nt(xe,se,$e){let ht=3553;se.isDataArrayTexture&&(ht=35866),se.isData3DTexture&&(ht=32879);const St=Qe(xe,se),It=se.source;if(t.activeTexture(33984+$e),t.bindTexture(ht,xe.__webglTexture),It.version!==It.__currentVersion||St===!0){n.pixelStorei(37440,se.flipY),n.pixelStorei(37441,se.premultiplyAlpha),n.pixelStorei(3317,se.unpackAlignment),n.pixelStorei(37443,0);const pt=z(se)&&D(se.image)===!1;let Ke=B(se.image,pt,!1,g);Ke=mt(se,Ke);const Le=D(Ke)||u,Q=o.convert(se.format,se.encoding);let te=o.convert(se.type),me=H(se.internalFormat,Q,te,se.encoding,se.isVideoTexture);Re(ht,se,Le);let ke;const Xe=se.mipmaps,Wt=u&&se.isVideoTexture!==!0,Ge=It.__currentVersion===void 0||St===!0,tn=oe(se,Ke,Le);if(se.isDepthTexture)me=6402,u?se.type===r_?me=36012:se.type===hv?me=33190:se.type===Py?me=35056:me=33189:se.type===r_&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),se.format===By&&me===6402&&se.type!==jF&&se.type!==hv&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),se.type=hv,te=o.convert(se.type)),se.format===Vy&&me===6402&&(me=34041,se.type!==Py&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),se.type=Py,te=o.convert(se.type))),Ge&&(Wt?t.texStorage2D(3553,1,me,Ke.width,Ke.height):t.texImage2D(3553,0,me,Ke.width,Ke.height,0,Q,te,null));else if(se.isDataTexture)if(Xe.length>0&&Le){Wt&&Ge&&t.texStorage2D(3553,tn,me,Xe[0].width,Xe[0].height);for(let _t=0,Jt=Xe.length;_t<Jt;_t++)ke=Xe[_t],Wt?t.texSubImage2D(3553,_t,0,0,ke.width,ke.height,Q,te,ke.data):t.texImage2D(3553,_t,me,ke.width,ke.height,0,Q,te,ke.data);se.generateMipmaps=!1}else Wt?(Ge&&t.texStorage2D(3553,tn,me,Ke.width,Ke.height),t.texSubImage2D(3553,0,0,0,Ke.width,Ke.height,Q,te,Ke.data)):t.texImage2D(3553,0,me,Ke.width,Ke.height,0,Q,te,Ke.data);else if(se.isCompressedTexture){Wt&&Ge&&t.texStorage2D(3553,tn,me,Xe[0].width,Xe[0].height);for(let _t=0,Jt=Xe.length;_t<Jt;_t++)ke=Xe[_t],se.format!==jp?Q!==null?Wt?t.compressedTexSubImage2D(3553,_t,0,0,ke.width,ke.height,Q,ke.data):t.compressedTexImage2D(3553,_t,me,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Wt?t.texSubImage2D(3553,_t,0,0,ke.width,ke.height,Q,te,ke.data):t.texImage2D(3553,_t,me,ke.width,ke.height,0,Q,te,ke.data)}else if(se.isDataArrayTexture)Wt?(Ge&&t.texStorage3D(35866,tn,me,Ke.width,Ke.height,Ke.depth),t.texSubImage3D(35866,0,0,0,0,Ke.width,Ke.height,Ke.depth,Q,te,Ke.data)):t.texImage3D(35866,0,me,Ke.width,Ke.height,Ke.depth,0,Q,te,Ke.data);else if(se.isData3DTexture)Wt?(Ge&&t.texStorage3D(32879,tn,me,Ke.width,Ke.height,Ke.depth),t.texSubImage3D(32879,0,0,0,0,Ke.width,Ke.height,Ke.depth,Q,te,Ke.data)):t.texImage3D(32879,0,me,Ke.width,Ke.height,Ke.depth,0,Q,te,Ke.data);else if(se.isFramebufferTexture){if(Ge)if(Wt)t.texStorage2D(3553,tn,me,Ke.width,Ke.height);else{let _t=Ke.width,Jt=Ke.height;for(let Kt=0;Kt<tn;Kt++)t.texImage2D(3553,Kt,me,_t,Jt,0,Q,te,null),_t>>=1,Jt>>=1}}else if(Xe.length>0&&Le){Wt&&Ge&&t.texStorage2D(3553,tn,me,Xe[0].width,Xe[0].height);for(let _t=0,Jt=Xe.length;_t<Jt;_t++)ke=Xe[_t],Wt?t.texSubImage2D(3553,_t,0,0,Q,te,ke):t.texImage2D(3553,_t,me,Q,te,ke);se.generateMipmaps=!1}else Wt?(Ge&&t.texStorage2D(3553,tn,me,Ke.width,Ke.height),t.texSubImage2D(3553,0,0,0,Q,te,Ke)):t.texImage2D(3553,0,me,Q,te,Ke);U(se,Le)&&V(ht),It.__currentVersion=It.version,se.onUpdate&&se.onUpdate(se)}xe.__version=se.version}function ft(xe,se,$e){if(se.image.length!==6)return;const ht=Qe(xe,se),St=se.source;if(t.activeTexture(33984+$e),t.bindTexture(34067,xe.__webglTexture),St.version!==St.__currentVersion||ht===!0){n.pixelStorei(37440,se.flipY),n.pixelStorei(37441,se.premultiplyAlpha),n.pixelStorei(3317,se.unpackAlignment),n.pixelStorei(37443,0);const It=se.isCompressedTexture||se.image[0].isCompressedTexture,pt=se.image[0]&&se.image[0].isDataTexture,Ke=[];for(let _t=0;_t<6;_t++)!It&&!pt?Ke[_t]=B(se.image[_t],!1,!0,f):Ke[_t]=pt?se.image[_t].image:se.image[_t],Ke[_t]=mt(se,Ke[_t]);const Le=Ke[0],Q=D(Le)||u,te=o.convert(se.format,se.encoding),me=o.convert(se.type),ke=H(se.internalFormat,te,me,se.encoding),Xe=u&&se.isVideoTexture!==!0,Wt=St.__currentVersion===void 0||ht===!0;let Ge=oe(se,Le,Q);Re(34067,se,Q);let tn;if(It){Xe&&Wt&&t.texStorage2D(34067,Ge,ke,Le.width,Le.height);for(let _t=0;_t<6;_t++){tn=Ke[_t].mipmaps;for(let Jt=0;Jt<tn.length;Jt++){const Kt=tn[Jt];se.format!==jp?te!==null?Xe?t.compressedTexSubImage2D(34069+_t,Jt,0,0,Kt.width,Kt.height,te,Kt.data):t.compressedTexImage2D(34069+_t,Jt,ke,Kt.width,Kt.height,0,Kt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Xe?t.texSubImage2D(34069+_t,Jt,0,0,Kt.width,Kt.height,te,me,Kt.data):t.texImage2D(34069+_t,Jt,ke,Kt.width,Kt.height,0,te,me,Kt.data)}}}else{tn=se.mipmaps,Xe&&Wt&&(tn.length>0&&Ge++,t.texStorage2D(34067,Ge,ke,Ke[0].width,Ke[0].height));for(let _t=0;_t<6;_t++)if(pt){Xe?t.texSubImage2D(34069+_t,0,0,0,Ke[_t].width,Ke[_t].height,te,me,Ke[_t].data):t.texImage2D(34069+_t,0,ke,Ke[_t].width,Ke[_t].height,0,te,me,Ke[_t].data);for(let Jt=0;Jt<tn.length;Jt++){const Kt=tn[Jt].image[_t].image;Xe?t.texSubImage2D(34069+_t,Jt+1,0,0,Kt.width,Kt.height,te,me,Kt.data):t.texImage2D(34069+_t,Jt+1,ke,Kt.width,Kt.height,0,te,me,Kt.data)}}else{Xe?t.texSubImage2D(34069+_t,0,0,0,te,me,Ke[_t]):t.texImage2D(34069+_t,0,ke,te,me,Ke[_t]);for(let Jt=0;Jt<tn.length;Jt++){const Kt=tn[Jt];Xe?t.texSubImage2D(34069+_t,Jt+1,0,0,te,me,Kt.image[_t]):t.texImage2D(34069+_t,Jt+1,ke,te,me,Kt.image[_t])}}}U(se,Q)&&V(34067),St.__currentVersion=St.version,se.onUpdate&&se.onUpdate(se)}xe.__version=se.version}function lt(xe,se,$e,ht,St){const It=o.convert($e.format,$e.encoding),pt=o.convert($e.type),Ke=H($e.internalFormat,It,pt,$e.encoding);r.get(se).__hasExternalTextures||(St===32879||St===35866?t.texImage3D(St,0,Ke,se.width,se.height,se.depth,0,It,pt,null):t.texImage2D(St,0,Ke,se.width,se.height,0,It,pt,null)),t.bindFramebuffer(36160,xe),Mt(se)?b.framebufferTexture2DMultisampleEXT(36160,ht,St,r.get($e).__webglTexture,0,vt(se)):n.framebufferTexture2D(36160,ht,St,r.get($e).__webglTexture,0),t.bindFramebuffer(36160,null)}function ze(xe,se,$e){if(n.bindRenderbuffer(36161,xe),se.depthBuffer&&!se.stencilBuffer){let ht=33189;if($e||Mt(se)){const St=se.depthTexture;St&&St.isDepthTexture&&(St.type===r_?ht=36012:St.type===hv&&(ht=33190));const It=vt(se);Mt(se)?b.renderbufferStorageMultisampleEXT(36161,It,ht,se.width,se.height):n.renderbufferStorageMultisample(36161,It,ht,se.width,se.height)}else n.renderbufferStorage(36161,ht,se.width,se.height);n.framebufferRenderbuffer(36160,36096,36161,xe)}else if(se.depthBuffer&&se.stencilBuffer){const ht=vt(se);$e&&Mt(se)===!1?n.renderbufferStorageMultisample(36161,ht,35056,se.width,se.height):Mt(se)?b.renderbufferStorageMultisampleEXT(36161,ht,35056,se.width,se.height):n.renderbufferStorage(36161,34041,se.width,se.height),n.framebufferRenderbuffer(36160,33306,36161,xe)}else{const ht=se.isWebGLMultipleRenderTargets===!0?se.texture:[se.texture];for(let St=0;St<ht.length;St++){const It=ht[St],pt=o.convert(It.format,It.encoding),Ke=o.convert(It.type),Le=H(It.internalFormat,pt,Ke,It.encoding),Q=vt(se);$e&&Mt(se)===!1?n.renderbufferStorageMultisample(36161,Q,Le,se.width,se.height):Mt(se)?b.renderbufferStorageMultisampleEXT(36161,Q,Le,se.width,se.height):n.renderbufferStorage(36161,Le,se.width,se.height)}}n.bindRenderbuffer(36161,null)}function Ce(xe,se){if(se&&se.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,xe),!(se.depthTexture&&se.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(se.depthTexture).__webglTexture||se.depthTexture.image.width!==se.width||se.depthTexture.image.height!==se.height)&&(se.depthTexture.image.width=se.width,se.depthTexture.image.height=se.height,se.depthTexture.needsUpdate=!0),ie(se.depthTexture,0);const $e=r.get(se.depthTexture).__webglTexture,ht=vt(se);if(se.depthTexture.format===By)Mt(se)?b.framebufferTexture2DMultisampleEXT(36160,36096,3553,$e,0,ht):n.framebufferTexture2D(36160,36096,3553,$e,0);else if(se.depthTexture.format===Vy)Mt(se)?b.framebufferTexture2DMultisampleEXT(36160,33306,3553,$e,0,ht):n.framebufferTexture2D(36160,33306,3553,$e,0);else throw new Error("Unknown depthTexture format")}function He(xe){const se=r.get(xe),$e=xe.isWebGLCubeRenderTarget===!0;if(xe.depthTexture&&!se.__autoAllocateDepthBuffer){if($e)throw new Error("target.depthTexture not supported in Cube render targets");Ce(se.__webglFramebuffer,xe)}else if($e){se.__webglDepthbuffer=[];for(let ht=0;ht<6;ht++)t.bindFramebuffer(36160,se.__webglFramebuffer[ht]),se.__webglDepthbuffer[ht]=n.createRenderbuffer(),ze(se.__webglDepthbuffer[ht],xe,!1)}else t.bindFramebuffer(36160,se.__webglFramebuffer),se.__webglDepthbuffer=n.createRenderbuffer(),ze(se.__webglDepthbuffer,xe,!1);t.bindFramebuffer(36160,null)}function rt(xe,se,$e){const ht=r.get(xe);se!==void 0&&lt(ht.__webglFramebuffer,xe,xe.texture,36064,3553),$e!==void 0&&He(xe)}function it(xe){const se=xe.texture,$e=r.get(xe),ht=r.get(se);xe.addEventListener("dispose",q),xe.isWebGLMultipleRenderTargets!==!0&&(ht.__webglTexture===void 0&&(ht.__webglTexture=n.createTexture()),ht.__version=se.version,l.memory.textures++);const St=xe.isWebGLCubeRenderTarget===!0,It=xe.isWebGLMultipleRenderTargets===!0,pt=D(xe)||u;if(St){$e.__webglFramebuffer=[];for(let Ke=0;Ke<6;Ke++)$e.__webglFramebuffer[Ke]=n.createFramebuffer()}else{if($e.__webglFramebuffer=n.createFramebuffer(),It)if(s.drawBuffers){const Ke=xe.texture;for(let Le=0,Q=Ke.length;Le<Q;Le++){const te=r.get(Ke[Le]);te.__webglTexture===void 0&&(te.__webglTexture=n.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&xe.samples>0&&Mt(xe)===!1){const Ke=It?se:[se];$e.__webglMultisampledFramebuffer=n.createFramebuffer(),$e.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,$e.__webglMultisampledFramebuffer);for(let Le=0;Le<Ke.length;Le++){const Q=Ke[Le];$e.__webglColorRenderbuffer[Le]=n.createRenderbuffer(),n.bindRenderbuffer(36161,$e.__webglColorRenderbuffer[Le]);const te=o.convert(Q.format,Q.encoding),me=o.convert(Q.type),ke=H(Q.internalFormat,te,me,Q.encoding),Xe=vt(xe);n.renderbufferStorageMultisample(36161,Xe,ke,xe.width,xe.height),n.framebufferRenderbuffer(36160,36064+Le,36161,$e.__webglColorRenderbuffer[Le])}n.bindRenderbuffer(36161,null),xe.depthBuffer&&($e.__webglDepthRenderbuffer=n.createRenderbuffer(),ze($e.__webglDepthRenderbuffer,xe,!0)),t.bindFramebuffer(36160,null)}}if(St){t.bindTexture(34067,ht.__webglTexture),Re(34067,se,pt);for(let Ke=0;Ke<6;Ke++)lt($e.__webglFramebuffer[Ke],xe,se,36064,34069+Ke);U(se,pt)&&V(34067),t.unbindTexture()}else if(It){const Ke=xe.texture;for(let Le=0,Q=Ke.length;Le<Q;Le++){const te=Ke[Le],me=r.get(te);t.bindTexture(3553,me.__webglTexture),Re(3553,te,pt),lt($e.__webglFramebuffer,xe,te,36064+Le,3553),U(te,pt)&&V(3553)}t.unbindTexture()}else{let Ke=3553;(xe.isWebGL3DRenderTarget||xe.isWebGLArrayRenderTarget)&&(u?Ke=xe.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ke,ht.__webglTexture),Re(Ke,se,pt),lt($e.__webglFramebuffer,xe,se,36064,Ke),U(se,pt)&&V(Ke),t.unbindTexture()}xe.depthBuffer&&He(xe)}function Nt(xe){const se=D(xe)||u,$e=xe.isWebGLMultipleRenderTargets===!0?xe.texture:[xe.texture];for(let ht=0,St=$e.length;ht<St;ht++){const It=$e[ht];if(U(It,se)){const pt=xe.isWebGLCubeRenderTarget?34067:3553,Ke=r.get(It).__webglTexture;t.bindTexture(pt,Ke),V(pt),t.unbindTexture()}}}function kt(xe){if(u&&xe.samples>0&&Mt(xe)===!1){const se=xe.isWebGLMultipleRenderTargets?xe.texture:[xe.texture],$e=xe.width,ht=xe.height;let St=16384;const It=[],pt=xe.stencilBuffer?33306:36096,Ke=r.get(xe),Le=xe.isWebGLMultipleRenderTargets===!0;if(Le)for(let Q=0;Q<se.length;Q++)t.bindFramebuffer(36160,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Q,36161,null),t.bindFramebuffer(36160,Ke.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Q,3553,null,0);t.bindFramebuffer(36008,Ke.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ke.__webglFramebuffer);for(let Q=0;Q<se.length;Q++){It.push(36064+Q),xe.depthBuffer&&It.push(pt);const te=Ke.__ignoreDepthValues!==void 0?Ke.__ignoreDepthValues:!1;if(te===!1&&(xe.depthBuffer&&(St|=256),xe.stencilBuffer&&(St|=1024)),Le&&n.framebufferRenderbuffer(36008,36064,36161,Ke.__webglColorRenderbuffer[Q]),te===!0&&(n.invalidateFramebuffer(36008,[pt]),n.invalidateFramebuffer(36009,[pt])),Le){const me=r.get(se[Q]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,me,0)}n.blitFramebuffer(0,0,$e,ht,0,0,$e,ht,St,9728),S&&n.invalidateFramebuffer(36008,It)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Le)for(let Q=0;Q<se.length;Q++){t.bindFramebuffer(36160,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Q,36161,Ke.__webglColorRenderbuffer[Q]);const te=r.get(se[Q]).__webglTexture;t.bindFramebuffer(36160,Ke.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Q,3553,te,0)}t.bindFramebuffer(36009,Ke.__webglMultisampledFramebuffer)}}function vt(xe){return Math.min(y,xe.samples)}function Mt(xe){const se=r.get(xe);return u&&xe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&se.__useRenderToTexture!==!1}function At(xe){const se=l.render.frame;C.get(xe)!==se&&(C.set(xe,se),xe.update())}function mt(xe,se){const $e=xe.encoding,ht=xe.format,St=xe.type;return xe.isCompressedTexture===!0||xe.isVideoTexture===!0||xe.format===TR||$e!==Eg&&($e===ms?u===!1?e.has("EXT_sRGB")===!0&&ht===jp?(xe.format=TR,xe.minFilter=wl,xe.generateMipmaps=!1):se=KF.sRGBToLinear(se):(ht!==jp||St!==af)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",$e)),se}this.allocateTextureUnit=J,this.resetTextureUnits=we,this.setTexture2D=ie,this.setTexture2DArray=fe,this.setTexture3D=Te,this.setTextureCube=Fe,this.rebindTextures=rt,this.setupRenderTarget=it,this.updateRenderTargetMipmap=Nt,this.updateMultisampleRenderTarget=kt,this.setupDepthRenderbuffer=He,this.setupFrameBufferTexture=lt,this.useMultisampledRTT=Mt}function LQ(n,e,t){const r=t.isWebGL2;function s(o,l=null){let u;if(o===af)return 5121;if(o===sQ)return 32819;if(o===oQ)return 32820;if(o===nQ)return 5120;if(o===rQ)return 5122;if(o===jF)return 5123;if(o===iQ)return 5124;if(o===hv)return 5125;if(o===r_)return 5126;if(o===Z1)return r?5131:(u=e.get("OES_texture_half_float"),u!==null?u.HALF_FLOAT_OES:null);if(o===aQ)return 6406;if(o===jp)return 6408;if(o===uQ)return 6409;if(o===cQ)return 6410;if(o===By)return 6402;if(o===Vy)return 34041;if(o===hQ)return 6403;if(o===lQ)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(o===TR)return u=e.get("EXT_sRGB"),u!==null?u.SRGB_ALPHA_EXT:null;if(o===dQ)return 36244;if(o===fQ)return 33319;if(o===pQ)return 33320;if(o===mQ)return 36249;if(o===_I||o===vI||o===yI||o===bI)if(l===ms)if(u=e.get("WEBGL_compressed_texture_s3tc_srgb"),u!==null){if(o===_I)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===vI)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===yI)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===bI)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(u=e.get("WEBGL_compressed_texture_s3tc"),u!==null){if(o===_I)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===vI)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===yI)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===bI)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===sP||o===oP||o===aP||o===lP)if(u=e.get("WEBGL_compressed_texture_pvrtc"),u!==null){if(o===sP)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===oP)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===aP)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===lP)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===gQ)return u=e.get("WEBGL_compressed_texture_etc1"),u!==null?u.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===uP||o===cP)if(u=e.get("WEBGL_compressed_texture_etc"),u!==null){if(o===uP)return l===ms?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(o===cP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===hP||o===dP||o===fP||o===pP||o===mP||o===gP||o===_P||o===vP||o===yP||o===bP||o===TP||o===SP||o===wP||o===EP)if(u=e.get("WEBGL_compressed_texture_astc"),u!==null){if(o===hP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===dP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===fP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===pP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===mP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===gP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===_P)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===vP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===yP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===bP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===TP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===SP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===wP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===EP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===xP)if(u=e.get("EXT_texture_compression_bptc"),u!==null){if(o===xP)return l===ms?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return o===Py?r?34042:(u=e.get("WEBGL_depth_texture"),u!==null?u.UNSIGNED_INT_24_8_WEBGL:null):n[o]!==void 0?n[o]:null}return{convert:s}}class NQ extends Za{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ew extends ro{constructor(){super(),this.isGroup=!0,this.type="Group"}}const C$e={type:"move"};class HL{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ew,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ew,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ae,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ae),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ew,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ae,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ae),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let s=null,o=null,l=null;const u=this._targetRay,h=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){l=!0;for(const M of e.hand.values()){const A=t.getJointPose(M,r);if(f.joints[M.jointName]===void 0){const L=new ew;L.matrixAutoUpdate=!1,L.visible=!1,f.joints[M.jointName]=L,f.add(L)}const O=f.joints[M.jointName];A!==null&&(O.matrix.fromArray(A.transform.matrix),O.matrix.decompose(O.position,O.rotation,O.scale),O.jointRadius=A.radius),O.visible=A!==null}const g=f.joints["index-finger-tip"],y=f.joints["thumb-tip"],b=g.position.distanceTo(y.position),S=.02,C=.005;f.inputState.pinching&&b>S+C?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&b<=S-C&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,r),o!==null&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1));u!==null&&(s=t.getPose(e.targetRaySpace,r),s===null&&o!==null&&(s=o),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(C$e)))}return u!==null&&(u.visible=s!==null),h!==null&&(h.visible=o!==null),f!==null&&(f.visible=l!==null),this}}class ZF extends hc{constructor(e,t,r,s,o,l,u,h,f,g){if(g=g!==void 0?g:By,g!==By&&g!==Vy)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&g===By&&(r=hv),r===void 0&&g===Vy&&(r=Py),super(null,s,o,l,u,h,g,r,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:Wl,this.minFilter=h!==void 0?h:Wl,this.flipY=!1,this.generateMipmaps=!1}}class M$e extends Vm{constructor(e,t){super();const r=this;let s=null,o=1,l=null,u="local-floor",h=null,f=null,g=null,y=null,b=null,S=null;const C=t.getContextAttributes();let M=null,A=null;const O=[],L=[],B=new Za;B.layers.enable(1),B.viewport=new Ts;const D=new Za;D.layers.enable(2),D.viewport=new Ts;const z=[B,D],U=new NQ;U.layers.enable(1),U.layers.enable(2);let V=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let ie=O[re];return ie===void 0&&(ie=new HL,O[re]=ie),ie.getTargetRaySpace()},this.getControllerGrip=function(re){let ie=O[re];return ie===void 0&&(ie=new HL,O[re]=ie),ie.getGripSpace()},this.getHand=function(re){let ie=O[re];return ie===void 0&&(ie=new HL,O[re]=ie),ie.getHandSpace()};function oe(re){const ie=L.indexOf(re.inputSource);if(ie===-1)return;const fe=O[ie];fe!==void 0&&fe.dispatchEvent({type:re.type,data:re.inputSource})}function le(){s.removeEventListener("select",oe),s.removeEventListener("selectstart",oe),s.removeEventListener("selectend",oe),s.removeEventListener("squeeze",oe),s.removeEventListener("squeezestart",oe),s.removeEventListener("squeezeend",oe),s.removeEventListener("end",le),s.removeEventListener("inputsourceschange",Z);for(let re=0;re<O.length;re++){const ie=L[re];ie!==null&&(L[re]=null,O[re].disconnect(ie))}V=null,H=null,e.setRenderTarget(M),b=null,y=null,g=null,s=null,A=null,J.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){o=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){u=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||l},this.setReferenceSpace=function(re){h=re},this.getBaseLayer=function(){return y!==null?y:b},this.getBinding=function(){return g},this.getFrame=function(){return S},this.getSession=function(){return s},this.setSession=async function(re){if(s=re,s!==null){if(M=e.getRenderTarget(),s.addEventListener("select",oe),s.addEventListener("selectstart",oe),s.addEventListener("selectend",oe),s.addEventListener("squeeze",oe),s.addEventListener("squeezestart",oe),s.addEventListener("squeezeend",oe),s.addEventListener("end",le),s.addEventListener("inputsourceschange",Z),C.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ie={antialias:s.renderState.layers===void 0?C.antialias:!0,alpha:C.alpha,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:o};b=new XRWebGLLayer(s,t,ie),s.updateRenderState({baseLayer:b}),A=new Nc(b.framebufferWidth,b.framebufferHeight,{format:jp,type:af,encoding:e.outputEncoding})}else{let ie=null,fe=null,Te=null;C.depth&&(Te=C.stencil?35056:33190,ie=C.stencil?Vy:By,fe=C.stencil?Py:hv);const Fe={colorFormat:32856,depthFormat:Te,scaleFactor:o};g=new XRWebGLBinding(s,t),y=g.createProjectionLayer(Fe),s.updateRenderState({layers:[y]}),A=new Nc(y.textureWidth,y.textureHeight,{format:jp,type:af,depthTexture:new ZF(y.textureWidth,y.textureHeight,fe,void 0,void 0,void 0,void 0,void 0,void 0,ie),stencilBuffer:C.stencil,encoding:e.outputEncoding,samples:C.antialias?4:0});const Ie=e.properties.get(A);Ie.__ignoreDepthValues=y.ignoreDepthValues}A.isXRRenderTarget=!0,this.setFoveation(1),h=null,l=await s.requestReferenceSpace(u),J.setContext(s),J.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function Z(re){for(let ie=0;ie<re.removed.length;ie++){const fe=re.removed[ie],Te=L.indexOf(fe);Te>=0&&(L[Te]=null,O[Te].dispatchEvent({type:"disconnected",data:fe}))}for(let ie=0;ie<re.added.length;ie++){const fe=re.added[ie];let Te=L.indexOf(fe);if(Te===-1){for(let Ie=0;Ie<O.length;Ie++)if(Ie>=L.length){L.push(fe),Te=Ie;break}else if(L[Ie]===null){L[Ie]=fe,Te=Ie;break}if(Te===-1)break}const Fe=O[Te];Fe&&Fe.dispatchEvent({type:"connected",data:fe})}}const q=new Ae,he=new Ae;function ae(re,ie,fe){q.setFromMatrixPosition(ie.matrixWorld),he.setFromMatrixPosition(fe.matrixWorld);const Te=q.distanceTo(he),Fe=ie.projectionMatrix.elements,Ie=fe.projectionMatrix.elements,qe=Fe[14]/(Fe[10]-1),Re=Fe[14]/(Fe[10]+1),Qe=(Fe[9]+1)/Fe[5],nt=(Fe[9]-1)/Fe[5],ft=(Fe[8]-1)/Fe[0],lt=(Ie[8]+1)/Ie[0],ze=qe*ft,Ce=qe*lt,He=Te/(-ft+lt),rt=He*-ft;ie.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(rt),re.translateZ(He),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert();const it=qe+He,Nt=Re+He,kt=ze-rt,vt=Ce+(Te-rt),Mt=Qe*Re/Nt*it,At=nt*Re/Nt*it;re.projectionMatrix.makePerspective(kt,vt,Mt,At,it,Nt)}function ue(re,ie){ie===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(ie.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(s===null)return;U.near=D.near=B.near=re.near,U.far=D.far=B.far=re.far,(V!==U.near||H!==U.far)&&(s.updateRenderState({depthNear:U.near,depthFar:U.far}),V=U.near,H=U.far);const ie=re.parent,fe=U.cameras;ue(U,ie);for(let Fe=0;Fe<fe.length;Fe++)ue(fe[Fe],ie);U.matrixWorld.decompose(U.position,U.quaternion,U.scale),re.position.copy(U.position),re.quaternion.copy(U.quaternion),re.scale.copy(U.scale),re.matrix.copy(U.matrix),re.matrixWorld.copy(U.matrixWorld);const Te=re.children;for(let Fe=0,Ie=Te.length;Fe<Ie;Fe++)Te[Fe].updateMatrixWorld(!0);fe.length===2?ae(U,B,D):U.projectionMatrix.copy(B.projectionMatrix)},this.getCamera=function(){return U},this.getFoveation=function(){if(y!==null)return y.fixedFoveation;if(b!==null)return b.fixedFoveation},this.setFoveation=function(re){y!==null&&(y.fixedFoveation=re),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=re)};let ge=null;function we(re,ie){if(f=ie.getViewerPose(h||l),S=ie,f!==null){const fe=f.views;b!==null&&(e.setRenderTargetFramebuffer(A,b.framebuffer),e.setRenderTarget(A));let Te=!1;fe.length!==U.cameras.length&&(U.cameras.length=0,Te=!0);for(let Fe=0;Fe<fe.length;Fe++){const Ie=fe[Fe];let qe=null;if(b!==null)qe=b.getViewport(Ie);else{const Qe=g.getViewSubImage(y,Ie);qe=Qe.viewport,Fe===0&&(e.setRenderTargetTextures(A,Qe.colorTexture,y.ignoreDepthValues?void 0:Qe.depthStencilTexture),e.setRenderTarget(A))}let Re=z[Fe];Re===void 0&&(Re=new Za,Re.layers.enable(Fe),Re.viewport=new Ts,z[Fe]=Re),Re.matrix.fromArray(Ie.transform.matrix),Re.projectionMatrix.fromArray(Ie.projectionMatrix),Re.viewport.set(qe.x,qe.y,qe.width,qe.height),Fe===0&&U.matrix.copy(Re.matrix),Te===!0&&U.cameras.push(Re)}}for(let fe=0;fe<O.length;fe++){const Te=L[fe],Fe=O[fe];Te!==null&&Fe!==void 0&&Fe.update(Te,ie,h||l)}ge&&ge(re,ie),S=null}const J=new MQ;J.setAnimationLoop(we),this.setAnimationLoop=function(re){ge=re},this.dispose=function(){}}}function A$e(n,e){function t(M,A){M.fogColor.value.copy(A.color),A.isFog?(M.fogNear.value=A.near,M.fogFar.value=A.far):A.isFogExp2&&(M.fogDensity.value=A.density)}function r(M,A,O,L,B){A.isMeshBasicMaterial||A.isMeshLambertMaterial?s(M,A):A.isMeshToonMaterial?(s(M,A),g(M,A)):A.isMeshPhongMaterial?(s(M,A),f(M,A)):A.isMeshStandardMaterial?(s(M,A),y(M,A),A.isMeshPhysicalMaterial&&b(M,A,B)):A.isMeshMatcapMaterial?(s(M,A),S(M,A)):A.isMeshDepthMaterial?s(M,A):A.isMeshDistanceMaterial?(s(M,A),C(M,A)):A.isMeshNormalMaterial?s(M,A):A.isLineBasicMaterial?(o(M,A),A.isLineDashedMaterial&&l(M,A)):A.isPointsMaterial?u(M,A,O,L):A.isSpriteMaterial?h(M,A):A.isShadowMaterial?(M.color.value.copy(A.color),M.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function s(M,A){M.opacity.value=A.opacity,A.color&&M.diffuse.value.copy(A.color),A.emissive&&M.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(M.map.value=A.map),A.alphaMap&&(M.alphaMap.value=A.alphaMap),A.bumpMap&&(M.bumpMap.value=A.bumpMap,M.bumpScale.value=A.bumpScale,A.side===cd&&(M.bumpScale.value*=-1)),A.displacementMap&&(M.displacementMap.value=A.displacementMap,M.displacementScale.value=A.displacementScale,M.displacementBias.value=A.displacementBias),A.emissiveMap&&(M.emissiveMap.value=A.emissiveMap),A.normalMap&&(M.normalMap.value=A.normalMap,M.normalScale.value.copy(A.normalScale),A.side===cd&&M.normalScale.value.negate()),A.specularMap&&(M.specularMap.value=A.specularMap),A.alphaTest>0&&(M.alphaTest.value=A.alphaTest);const O=e.get(A).envMap;if(O&&(M.envMap.value=O,M.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=A.reflectivity,M.ior.value=A.ior,M.refractionRatio.value=A.refractionRatio),A.lightMap){M.lightMap.value=A.lightMap;const D=n.physicallyCorrectLights!==!0?Math.PI:1;M.lightMapIntensity.value=A.lightMapIntensity*D}A.aoMap&&(M.aoMap.value=A.aoMap,M.aoMapIntensity.value=A.aoMapIntensity);let L;A.map?L=A.map:A.specularMap?L=A.specularMap:A.displacementMap?L=A.displacementMap:A.normalMap?L=A.normalMap:A.bumpMap?L=A.bumpMap:A.roughnessMap?L=A.roughnessMap:A.metalnessMap?L=A.metalnessMap:A.alphaMap?L=A.alphaMap:A.emissiveMap?L=A.emissiveMap:A.clearcoatMap?L=A.clearcoatMap:A.clearcoatNormalMap?L=A.clearcoatNormalMap:A.clearcoatRoughnessMap?L=A.clearcoatRoughnessMap:A.iridescenceMap?L=A.iridescenceMap:A.iridescenceThicknessMap?L=A.iridescenceThicknessMap:A.specularIntensityMap?L=A.specularIntensityMap:A.specularColorMap?L=A.specularColorMap:A.transmissionMap?L=A.transmissionMap:A.thicknessMap?L=A.thicknessMap:A.sheenColorMap?L=A.sheenColorMap:A.sheenRoughnessMap&&(L=A.sheenRoughnessMap),L!==void 0&&(L.isWebGLRenderTarget&&(L=L.texture),L.matrixAutoUpdate===!0&&L.updateMatrix(),M.uvTransform.value.copy(L.matrix));let B;A.aoMap?B=A.aoMap:A.lightMap&&(B=A.lightMap),B!==void 0&&(B.isWebGLRenderTarget&&(B=B.texture),B.matrixAutoUpdate===!0&&B.updateMatrix(),M.uv2Transform.value.copy(B.matrix))}function o(M,A){M.diffuse.value.copy(A.color),M.opacity.value=A.opacity}function l(M,A){M.dashSize.value=A.dashSize,M.totalSize.value=A.dashSize+A.gapSize,M.scale.value=A.scale}function u(M,A,O,L){M.diffuse.value.copy(A.color),M.opacity.value=A.opacity,M.size.value=A.size*O,M.scale.value=L*.5,A.map&&(M.map.value=A.map),A.alphaMap&&(M.alphaMap.value=A.alphaMap),A.alphaTest>0&&(M.alphaTest.value=A.alphaTest);let B;A.map?B=A.map:A.alphaMap&&(B=A.alphaMap),B!==void 0&&(B.matrixAutoUpdate===!0&&B.updateMatrix(),M.uvTransform.value.copy(B.matrix))}function h(M,A){M.diffuse.value.copy(A.color),M.opacity.value=A.opacity,M.rotation.value=A.rotation,A.map&&(M.map.value=A.map),A.alphaMap&&(M.alphaMap.value=A.alphaMap),A.alphaTest>0&&(M.alphaTest.value=A.alphaTest);let O;A.map?O=A.map:A.alphaMap&&(O=A.alphaMap),O!==void 0&&(O.matrixAutoUpdate===!0&&O.updateMatrix(),M.uvTransform.value.copy(O.matrix))}function f(M,A){M.specular.value.copy(A.specular),M.shininess.value=Math.max(A.shininess,1e-4)}function g(M,A){A.gradientMap&&(M.gradientMap.value=A.gradientMap)}function y(M,A){M.roughness.value=A.roughness,M.metalness.value=A.metalness,A.roughnessMap&&(M.roughnessMap.value=A.roughnessMap),A.metalnessMap&&(M.metalnessMap.value=A.metalnessMap),e.get(A).envMap&&(M.envMapIntensity.value=A.envMapIntensity)}function b(M,A,O){M.ior.value=A.ior,A.sheen>0&&(M.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),M.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(M.sheenColorMap.value=A.sheenColorMap),A.sheenRoughnessMap&&(M.sheenRoughnessMap.value=A.sheenRoughnessMap)),A.clearcoat>0&&(M.clearcoat.value=A.clearcoat,M.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(M.clearcoatMap.value=A.clearcoatMap),A.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap),A.clearcoatNormalMap&&(M.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),M.clearcoatNormalMap.value=A.clearcoatNormalMap,A.side===cd&&M.clearcoatNormalScale.value.negate())),A.iridescence>0&&(M.iridescence.value=A.iridescence,M.iridescenceIOR.value=A.iridescenceIOR,M.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(M.iridescenceMap.value=A.iridescenceMap),A.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=A.iridescenceThicknessMap)),A.transmission>0&&(M.transmission.value=A.transmission,M.transmissionSamplerMap.value=O.texture,M.transmissionSamplerSize.value.set(O.width,O.height),A.transmissionMap&&(M.transmissionMap.value=A.transmissionMap),M.thickness.value=A.thickness,A.thicknessMap&&(M.thicknessMap.value=A.thicknessMap),M.attenuationDistance.value=A.attenuationDistance,M.attenuationColor.value.copy(A.attenuationColor)),M.specularIntensity.value=A.specularIntensity,M.specularColor.value.copy(A.specularColor),A.specularIntensityMap&&(M.specularIntensityMap.value=A.specularIntensityMap),A.specularColorMap&&(M.specularColorMap.value=A.specularColorMap)}function S(M,A){A.matcap&&(M.matcap.value=A.matcap)}function C(M,A){M.referencePosition.value.copy(A.referencePosition),M.nearDistance.value=A.nearDistance,M.farDistance.value=A.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function I$e(n,e,t,r){let s={},o={},l=[];const u=t.isWebGL2?n.getParameter(35375):0;function h(L,B){const D=B.program;r.uniformBlockBinding(L,D)}function f(L,B){let D=s[L.id];D===void 0&&(C(L),D=g(L),s[L.id]=D,L.addEventListener("dispose",A));const z=B.program;r.updateUBOMapping(L,z);const U=e.render.frame;o[L.id]!==U&&(b(L),o[L.id]=U)}function g(L){const B=y();L.__bindingPointIndex=B;const D=n.createBuffer(),z=L.__size,U=L.usage;return n.bindBuffer(35345,D),n.bufferData(35345,z,U),n.bindBuffer(35345,null),n.bindBufferBase(35345,B,D),D}function y(){for(let L=0;L<u;L++)if(l.indexOf(L)===-1)return l.push(L),L;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function b(L){const B=s[L.id],D=L.uniforms,z=L.__cache;n.bindBuffer(35345,B);for(let U=0,V=D.length;U<V;U++){const H=D[U];if(S(H,U,z)===!0){const oe=H.value,le=H.__offset;typeof oe=="number"?(H.__data[0]=oe,n.bufferSubData(35345,le,H.__data)):(H.value.isMatrix3?(H.__data[0]=H.value.elements[0],H.__data[1]=H.value.elements[1],H.__data[2]=H.value.elements[2],H.__data[3]=H.value.elements[0],H.__data[4]=H.value.elements[3],H.__data[5]=H.value.elements[4],H.__data[6]=H.value.elements[5],H.__data[7]=H.value.elements[0],H.__data[8]=H.value.elements[6],H.__data[9]=H.value.elements[7],H.__data[10]=H.value.elements[8],H.__data[11]=H.value.elements[0]):oe.toArray(H.__data),n.bufferSubData(35345,le,H.__data))}}n.bindBuffer(35345,null)}function S(L,B,D){const z=L.value;if(D[B]===void 0)return typeof z=="number"?D[B]=z:D[B]=z.clone(),!0;if(typeof z=="number"){if(D[B]!==z)return D[B]=z,!0}else{const U=D[B];if(U.equals(z)===!1)return U.copy(z),!0}return!1}function C(L){const B=L.uniforms;let D=0;const z=16;let U=0;for(let V=0,H=B.length;V<H;V++){const oe=B[V],le=M(oe);if(oe.__data=new Float32Array(le.storage/Float32Array.BYTES_PER_ELEMENT),oe.__offset=D,V>0){U=D%z;const Z=z-U;U!==0&&Z-le.boundary<0&&(D+=z-U,oe.__offset=D)}D+=le.storage}return U=D%z,U>0&&(D+=z-U),L.__size=D,L.__cache={},this}function M(L){const B=L.value,D={boundary:0,storage:0};return typeof B=="number"?(D.boundary=4,D.storage=4):B.isVector2?(D.boundary=8,D.storage=8):B.isVector3||B.isColor?(D.boundary=16,D.storage=12):B.isVector4?(D.boundary=16,D.storage=16):B.isMatrix3?(D.boundary=48,D.storage=48):B.isMatrix4?(D.boundary=64,D.storage=64):B.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",B),D}function A(L){const B=L.target;B.removeEventListener("dispose",A);const D=l.indexOf(B.__bindingPointIndex);l.splice(D,1),n.deleteBuffer(s[B.id]),delete s[B.id],delete o[B.id]}function O(){for(const L in s)n.deleteBuffer(s[L]);l=[],s={},o={}}return{bind:h,update:f,dispose:O}}function R$e(){const n=j$("canvas");return n.style.display="block",n}function e4(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:R$e(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,l=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,u=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,h=n.powerPreference!==void 0?n.powerPreference:"default",f=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let g;t!==null?g=t.getContextAttributes().alpha:g=n.alpha!==void 0?n.alpha:!1;let y=null,b=null;const S=[],C=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Eg,this.physicallyCorrectLights=!1,this.toneMapping=l0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const M=this;let A=!1,O=0,L=0,B=null,D=-1,z=null;const U=new Ts,V=new Ts;let H=null,oe=e.width,le=e.height,Z=1,q=null,he=null;const ae=new Ts(0,0,oe,le),ue=new Ts(0,0,oe,le);let ge=!1;const we=new u2;let J=!1,re=!1,ie=null;const fe=new Qr,Te=new jt,Fe=new Ae,Ie={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function qe(){return B===null?Z:1}let Re=t;function Qe(De,gt){for(let Ct=0;Ct<De.length;Ct++){const bt=De[Ct],Vt=e.getContext(bt,gt);if(Vt!==null)return Vt}return null}try{const De={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${fE}`),e.addEventListener("webglcontextlost",ke,!1),e.addEventListener("webglcontextrestored",Xe,!1),e.addEventListener("webglcontextcreationerror",Wt,!1),Re===null){const gt=["webgl2","webgl","experimental-webgl"];if(M.isWebGL1Renderer===!0&&gt.shift(),Re=Qe(gt,De),Re===null)throw Qe(gt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Re.getShaderPrecisionFormat===void 0&&(Re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(De){throw console.error("THREE.WebGLRenderer: "+De.message),De}let nt,ft,lt,ze,Ce,He,rt,it,Nt,kt,vt,Mt,At,mt,xe,se,$e,ht,St,It,pt,Ke,Le,Q;function te(){nt=new jEe(Re),ft=new zEe(Re,nt,n),nt.init(ft),Ke=new LQ(Re,nt,ft),lt=new x$e(Re,nt,ft),ze=new KEe,Ce=new f$e,He=new $$e(Re,nt,lt,Ce,ft,Ke,ze),rt=new HEe(M),it=new VEe(M),Nt=new aSe(Re,ft),Le=new BEe(Re,nt,Nt,ft),kt=new YEe(Re,Nt,ze,Le),vt=new ZEe(Re,kt,Nt,ze),St=new QEe(Re,ft,He),se=new UEe(Ce),Mt=new d$e(M,rt,it,nt,ft,Le,se),At=new A$e(M,Ce),mt=new m$e,xe=new T$e(nt,ft),ht=new PEe(M,rt,lt,vt,g,l),$e=new E$e(M,vt,ft),Q=new I$e(Re,ze,ft,lt),It=new FEe(Re,nt,ze,ft),pt=new XEe(Re,nt,ze,ft),ze.programs=Mt.programs,M.capabilities=ft,M.extensions=nt,M.properties=Ce,M.renderLists=mt,M.shadowMap=$e,M.state=lt,M.info=ze}te();const me=new M$e(M,Re);this.xr=me,this.getContext=function(){return Re},this.getContextAttributes=function(){return Re.getContextAttributes()},this.forceContextLoss=function(){const De=nt.get("WEBGL_lose_context");De&&De.loseContext()},this.forceContextRestore=function(){const De=nt.get("WEBGL_lose_context");De&&De.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(De){De!==void 0&&(Z=De,this.setSize(oe,le,!1))},this.getSize=function(De){return De.set(oe,le)},this.setSize=function(De,gt,Ct){if(me.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}oe=De,le=gt,e.width=Math.floor(De*Z),e.height=Math.floor(gt*Z),Ct!==!1&&(e.style.width=De+"px",e.style.height=gt+"px"),this.setViewport(0,0,De,gt)},this.getDrawingBufferSize=function(De){return De.set(oe*Z,le*Z).floor()},this.setDrawingBufferSize=function(De,gt,Ct){oe=De,le=gt,Z=Ct,e.width=Math.floor(De*Ct),e.height=Math.floor(gt*Ct),this.setViewport(0,0,De,gt)},this.getCurrentViewport=function(De){return De.copy(U)},this.getViewport=function(De){return De.copy(ae)},this.setViewport=function(De,gt,Ct,bt){De.isVector4?ae.set(De.x,De.y,De.z,De.w):ae.set(De,gt,Ct,bt),lt.viewport(U.copy(ae).multiplyScalar(Z).floor())},this.getScissor=function(De){return De.copy(ue)},this.setScissor=function(De,gt,Ct,bt){De.isVector4?ue.set(De.x,De.y,De.z,De.w):ue.set(De,gt,Ct,bt),lt.scissor(V.copy(ue).multiplyScalar(Z).floor())},this.getScissorTest=function(){return ge},this.setScissorTest=function(De){lt.setScissorTest(ge=De)},this.setOpaqueSort=function(De){q=De},this.setTransparentSort=function(De){he=De},this.getClearColor=function(De){return De.copy(ht.getClearColor())},this.setClearColor=function(){ht.setClearColor.apply(ht,arguments)},this.getClearAlpha=function(){return ht.getClearAlpha()},this.setClearAlpha=function(){ht.setClearAlpha.apply(ht,arguments)},this.clear=function(De=!0,gt=!0,Ct=!0){let bt=0;De&&(bt|=16384),gt&&(bt|=256),Ct&&(bt|=1024),Re.clear(bt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ke,!1),e.removeEventListener("webglcontextrestored",Xe,!1),e.removeEventListener("webglcontextcreationerror",Wt,!1),mt.dispose(),xe.dispose(),Ce.dispose(),rt.dispose(),it.dispose(),vt.dispose(),Le.dispose(),Q.dispose(),Mt.dispose(),me.dispose(),me.removeEventListener("sessionstart",On),me.removeEventListener("sessionend",si),ie&&(ie.dispose(),ie=null),Pr.stop()};function ke(De){De.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function Xe(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const De=ze.autoReset,gt=$e.enabled,Ct=$e.autoUpdate,bt=$e.needsUpdate,Vt=$e.type;te(),ze.autoReset=De,$e.enabled=gt,$e.autoUpdate=Ct,$e.needsUpdate=bt,$e.type=Vt}function Wt(De){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",De.statusMessage)}function Ge(De){const gt=De.target;gt.removeEventListener("dispose",Ge),tn(gt)}function tn(De){_t(De),Ce.remove(De)}function _t(De){const gt=Ce.get(De).programs;gt!==void 0&&(gt.forEach(function(Ct){Mt.releaseProgram(Ct)}),De.isShaderMaterial&&Mt.releaseShaderCache(De))}this.renderBufferDirect=function(De,gt,Ct,bt,Vt,Wn){gt===null&&(gt=Ie);const rr=Vt.isMesh&&Vt.matrixWorld.determinant()<0,_r=zt(De,gt,Ct,bt,Vt);lt.setMaterial(bt,rr);let Cr=Ct.index;const oi=Ct.attributes.position;if(Cr===null){if(oi===void 0||oi.count===0)return}else if(Cr.count===0)return;let Br=1;bt.wireframe===!0&&(Cr=kt.getWireframeAttribute(Ct),Br=2),Le.setup(Vt,bt,_r,Ct,Cr);let Yr,Ss=It;Cr!==null&&(Yr=Nt.get(Cr),Ss=pt,Ss.setIndex(Yr));const Oa=Cr!==null?Cr.count:oi.count,xo=Ct.drawRange.start*Br,Yl=Ct.drawRange.count*Br,nn=Wn!==null?Wn.start*Br:0,Rr=Wn!==null?Wn.count*Br:1/0,el=Math.max(xo,nn),La=Math.min(Oa,xo+Yl,nn+Rr)-1,Fs=Math.max(0,La-el+1);if(Fs!==0){if(Vt.isMesh)bt.wireframe===!0?(lt.setLineWidth(bt.wireframeLinewidth*qe()),Ss.setMode(1)):Ss.setMode(4);else if(Vt.isLine){let zs=bt.linewidth;zs===void 0&&(zs=1),lt.setLineWidth(zs*qe()),Vt.isLineSegments?Ss.setMode(1):Vt.isLineLoop?Ss.setMode(2):Ss.setMode(3)}else Vt.isPoints?Ss.setMode(0):Vt.isSprite&&Ss.setMode(4);if(Vt.isInstancedMesh)Ss.renderInstances(el,Fs,Vt.count);else if(Ct.isInstancedBufferGeometry){const zs=Math.min(Ct.instanceCount,Ct._maxInstanceCount);Ss.renderInstances(el,Fs,zs)}else Ss.render(el,Fs)}},this.compile=function(De,gt){b=xe.get(De),b.init(),C.push(b),De.traverseVisible(function(Ct){Ct.isLight&&Ct.layers.test(gt.layers)&&(b.pushLight(Ct),Ct.castShadow&&b.pushShadow(Ct))}),b.setupLights(M.physicallyCorrectLights),De.traverse(function(Ct){const bt=Ct.material;if(bt)if(Array.isArray(bt))for(let Vt=0;Vt<bt.length;Vt++){const Wn=bt[Vt];We(Wn,De,Ct)}else We(bt,De,Ct)}),C.pop(),b=null};let Jt=null;function Kt(De){Jt&&Jt(De)}function On(){Pr.stop()}function si(){Pr.start()}const Pr=new MQ;Pr.setAnimationLoop(Kt),typeof self<"u"&&Pr.setContext(self),this.setAnimationLoop=function(De){Jt=De,me.setAnimationLoop(De),De===null?Pr.stop():Pr.start()},me.addEventListener("sessionstart",On),me.addEventListener("sessionend",si),this.render=function(De,gt){if(gt!==void 0&&gt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;De.autoUpdate===!0&&De.updateMatrixWorld(),gt.parent===null&&gt.updateMatrixWorld(),me.enabled===!0&&me.isPresenting===!0&&(me.cameraAutoUpdate===!0&&me.updateCamera(gt),gt=me.getCamera()),De.isScene===!0&&De.onBeforeRender(M,De,gt,B),b=xe.get(De,C.length),b.init(),C.push(b),fe.multiplyMatrices(gt.projectionMatrix,gt.matrixWorldInverse),we.setFromProjectionMatrix(fe),re=this.localClippingEnabled,J=se.init(this.clippingPlanes,re,gt),y=mt.get(De,S.length),y.init(),S.push(y),Ei(De,gt,0,M.sortObjects),y.finish(),M.sortObjects===!0&&y.sort(q,he),J===!0&&se.beginShadows();const Ct=b.state.shadowsArray;if($e.render(Ct,De,gt),J===!0&&se.endShadows(),this.info.autoReset===!0&&this.info.reset(),ht.render(y,De),b.setupLights(M.physicallyCorrectLights),gt.isArrayCamera){const bt=gt.cameras;for(let Vt=0,Wn=bt.length;Vt<Wn;Vt++){const rr=bt[Vt];$r(y,De,rr,rr.viewport)}}else $r(y,De,gt);B!==null&&(He.updateMultisampleRenderTarget(B),He.updateRenderTargetMipmap(B)),De.isScene===!0&&De.onAfterRender(M,De,gt),Le.resetDefaultState(),D=-1,z=null,C.pop(),C.length>0?b=C[C.length-1]:b=null,S.pop(),S.length>0?y=S[S.length-1]:y=null};function Ei(De,gt,Ct,bt){if(De.visible===!1)return;if(De.layers.test(gt.layers)){if(De.isGroup)Ct=De.renderOrder;else if(De.isLOD)De.autoUpdate===!0&&De.update(gt);else if(De.isLight)b.pushLight(De),De.castShadow&&b.pushShadow(De);else if(De.isSprite){if(!De.frustumCulled||we.intersectsSprite(De)){bt&&Fe.setFromMatrixPosition(De.matrixWorld).applyMatrix4(fe);const Wn=vt.update(De),rr=De.material;rr.visible&&y.push(De,Wn,rr,Ct,Fe.z,null)}}else if((De.isMesh||De.isLine||De.isPoints)&&(De.isSkinnedMesh&&De.skeleton.frame!==ze.render.frame&&(De.skeleton.update(),De.skeleton.frame=ze.render.frame),!De.frustumCulled||we.intersectsObject(De))){bt&&Fe.setFromMatrixPosition(De.matrixWorld).applyMatrix4(fe);const Wn=vt.update(De),rr=De.material;if(Array.isArray(rr)){const _r=Wn.groups;for(let Cr=0,oi=_r.length;Cr<oi;Cr++){const Br=_r[Cr],Yr=rr[Br.materialIndex];Yr&&Yr.visible&&y.push(De,Wn,Yr,Ct,Fe.z,Br)}}else rr.visible&&y.push(De,Wn,rr,Ct,Fe.z,null)}}const Vt=De.children;for(let Wn=0,rr=Vt.length;Wn<rr;Wn++)Ei(Vt[Wn],gt,Ct,bt)}function $r(De,gt,Ct,bt){const Vt=De.opaque,Wn=De.transmissive,rr=De.transparent;b.setupLightsView(Ct),Wn.length>0&&gr(Vt,gt,Ct),bt&&lt.viewport(U.copy(bt)),Vt.length>0&&ne(Vt,gt,Ct),Wn.length>0&&ne(Wn,gt,Ct),rr.length>0&&ne(rr,gt,Ct),lt.buffers.depth.setTest(!0),lt.buffers.depth.setMask(!0),lt.buffers.color.setMask(!0),lt.setPolygonOffset(!1)}function gr(De,gt,Ct){const bt=ft.isWebGL2;ie===null&&(ie=new Nc(1,1,{generateMipmaps:!0,type:nt.has("EXT_color_buffer_half_float")?Z1:af,minFilter:uT,samples:bt&&o===!0?4:0})),M.getDrawingBufferSize(Te),bt?ie.setSize(Te.x,Te.y):ie.setSize(SR(Te.x),SR(Te.y));const Vt=M.getRenderTarget();M.setRenderTarget(ie),M.clear();const Wn=M.toneMapping;M.toneMapping=l0,ne(De,gt,Ct),M.toneMapping=Wn,He.updateMultisampleRenderTarget(ie),He.updateRenderTargetMipmap(ie),M.setRenderTarget(Vt)}function ne(De,gt,Ct){const bt=gt.isScene===!0?gt.overrideMaterial:null;for(let Vt=0,Wn=De.length;Vt<Wn;Vt++){const rr=De[Vt],_r=rr.object,Cr=rr.geometry,oi=bt===null?rr.material:bt,Br=rr.group;_r.layers.test(Ct.layers)&&Se(_r,gt,Ct,Cr,oi,Br)}}function Se(De,gt,Ct,bt,Vt,Wn){De.onBeforeRender(M,gt,Ct,bt,Vt,Wn),De.modelViewMatrix.multiplyMatrices(Ct.matrixWorldInverse,De.matrixWorld),De.normalMatrix.getNormalMatrix(De.modelViewMatrix),Vt.onBeforeRender(M,gt,Ct,bt,De,Wn),Vt.transparent===!0&&Vt.side===lp?(Vt.side=cd,Vt.needsUpdate=!0,M.renderBufferDirect(Ct,gt,bt,Vt,De,Wn),Vt.side=f_,Vt.needsUpdate=!0,M.renderBufferDirect(Ct,gt,bt,Vt,De,Wn),Vt.side=lp):M.renderBufferDirect(Ct,gt,bt,Vt,De,Wn),De.onAfterRender(M,gt,Ct,bt,Vt,Wn)}function We(De,gt,Ct){gt.isScene!==!0&&(gt=Ie);const bt=Ce.get(De),Vt=b.state.lights,Wn=b.state.shadowsArray,rr=Vt.state.version,_r=Mt.getParameters(De,Vt.state,Wn,gt,Ct),Cr=Mt.getProgramCacheKey(_r);let oi=bt.programs;bt.environment=De.isMeshStandardMaterial?gt.environment:null,bt.fog=gt.fog,bt.envMap=(De.isMeshStandardMaterial?it:rt).get(De.envMap||bt.environment),oi===void 0&&(De.addEventListener("dispose",Ge),oi=new Map,bt.programs=oi);let Br=oi.get(Cr);if(Br!==void 0){if(bt.currentProgram===Br&&bt.lightsStateVersion===rr)return ot(De,_r),Br}else _r.uniforms=Mt.getUniforms(De),De.onBuild(Ct,_r,M),De.onBeforeCompile(_r,M),Br=Mt.acquireProgram(_r,Cr),oi.set(Cr,Br),bt.uniforms=_r.uniforms;const Yr=bt.uniforms;(!De.isShaderMaterial&&!De.isRawShaderMaterial||De.clipping===!0)&&(Yr.clippingPlanes=se.uniform),ot(De,_r),bt.needsLights=Nn(De),bt.lightsStateVersion=rr,bt.needsLights&&(Yr.ambientLightColor.value=Vt.state.ambient,Yr.lightProbe.value=Vt.state.probe,Yr.directionalLights.value=Vt.state.directional,Yr.directionalLightShadows.value=Vt.state.directionalShadow,Yr.spotLights.value=Vt.state.spot,Yr.spotLightShadows.value=Vt.state.spotShadow,Yr.rectAreaLights.value=Vt.state.rectArea,Yr.ltc_1.value=Vt.state.rectAreaLTC1,Yr.ltc_2.value=Vt.state.rectAreaLTC2,Yr.pointLights.value=Vt.state.point,Yr.pointLightShadows.value=Vt.state.pointShadow,Yr.hemisphereLights.value=Vt.state.hemi,Yr.directionalShadowMap.value=Vt.state.directionalShadowMap,Yr.directionalShadowMatrix.value=Vt.state.directionalShadowMatrix,Yr.spotShadowMap.value=Vt.state.spotShadowMap,Yr.spotShadowMatrix.value=Vt.state.spotShadowMatrix,Yr.pointShadowMap.value=Vt.state.pointShadowMap,Yr.pointShadowMatrix.value=Vt.state.pointShadowMatrix);const Ss=Br.getUniforms(),Oa=EI.seqWithValue(Ss.seq,Yr);return bt.currentProgram=Br,bt.uniformsList=Oa,Br}function ot(De,gt){const Ct=Ce.get(De);Ct.outputEncoding=gt.outputEncoding,Ct.instancing=gt.instancing,Ct.skinning=gt.skinning,Ct.morphTargets=gt.morphTargets,Ct.morphNormals=gt.morphNormals,Ct.morphColors=gt.morphColors,Ct.morphTargetsCount=gt.morphTargetsCount,Ct.numClippingPlanes=gt.numClippingPlanes,Ct.numIntersection=gt.numClipIntersection,Ct.vertexAlphas=gt.vertexAlphas,Ct.vertexTangents=gt.vertexTangents,Ct.toneMapping=gt.toneMapping}function zt(De,gt,Ct,bt,Vt){gt.isScene!==!0&&(gt=Ie),He.resetTextureUnits();const Wn=gt.fog,rr=bt.isMeshStandardMaterial?gt.environment:null,_r=B===null?M.outputEncoding:B.isXRRenderTarget===!0?B.texture.encoding:Eg,Cr=(bt.isMeshStandardMaterial?it:rt).get(bt.envMap||rr),oi=bt.vertexColors===!0&&!!Ct.attributes.color&&Ct.attributes.color.itemSize===4,Br=!!bt.normalMap&&!!Ct.attributes.tangent,Yr=!!Ct.morphAttributes.position,Ss=!!Ct.morphAttributes.normal,Oa=!!Ct.morphAttributes.color,xo=bt.toneMapped?M.toneMapping:l0,Yl=Ct.morphAttributes.position||Ct.morphAttributes.normal||Ct.morphAttributes.color,nn=Yl!==void 0?Yl.length:0,Rr=Ce.get(bt),el=b.state.lights;if(J===!0&&(re===!0||De!==z)){const yr=De===z&&bt.id===D;se.setState(bt,De,yr)}let La=!1;bt.version===Rr.__version?(Rr.needsLights&&Rr.lightsStateVersion!==el.state.version||Rr.outputEncoding!==_r||Vt.isInstancedMesh&&Rr.instancing===!1||!Vt.isInstancedMesh&&Rr.instancing===!0||Vt.isSkinnedMesh&&Rr.skinning===!1||!Vt.isSkinnedMesh&&Rr.skinning===!0||Rr.envMap!==Cr||bt.fog===!0&&Rr.fog!==Wn||Rr.numClippingPlanes!==void 0&&(Rr.numClippingPlanes!==se.numPlanes||Rr.numIntersection!==se.numIntersection)||Rr.vertexAlphas!==oi||Rr.vertexTangents!==Br||Rr.morphTargets!==Yr||Rr.morphNormals!==Ss||Rr.morphColors!==Oa||Rr.toneMapping!==xo||ft.isWebGL2===!0&&Rr.morphTargetsCount!==nn)&&(La=!0):(La=!0,Rr.__version=bt.version);let Fs=Rr.currentProgram;La===!0&&(Fs=We(bt,gt,Vt));let zs=!1,Di=!1,kr=!1;const An=Fs.getUniforms(),Ir=Rr.uniforms;if(lt.useProgram(Fs.program)&&(zs=!0,Di=!0,kr=!0),bt.id!==D&&(D=bt.id,Di=!0),zs||z!==De){if(An.setValue(Re,"projectionMatrix",De.projectionMatrix),ft.logarithmicDepthBuffer&&An.setValue(Re,"logDepthBufFC",2/(Math.log(De.far+1)/Math.LN2)),z!==De&&(z=De,Di=!0,kr=!0),bt.isShaderMaterial||bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshStandardMaterial||bt.envMap){const yr=An.map.cameraPosition;yr!==void 0&&yr.setValue(Re,Fe.setFromMatrixPosition(De.matrixWorld))}(bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshLambertMaterial||bt.isMeshBasicMaterial||bt.isMeshStandardMaterial||bt.isShaderMaterial)&&An.setValue(Re,"isOrthographic",De.isOrthographicCamera===!0),(bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshLambertMaterial||bt.isMeshBasicMaterial||bt.isMeshStandardMaterial||bt.isShaderMaterial||bt.isShadowMaterial||Vt.isSkinnedMesh)&&An.setValue(Re,"viewMatrix",De.matrixWorldInverse)}if(Vt.isSkinnedMesh){An.setOptional(Re,Vt,"bindMatrix"),An.setOptional(Re,Vt,"bindMatrixInverse");const yr=Vt.skeleton;yr&&(ft.floatVertexTextures?(yr.boneTexture===null&&yr.computeBoneTexture(),An.setValue(Re,"boneTexture",yr.boneTexture,He),An.setValue(Re,"boneTextureSize",yr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Gr=Ct.morphAttributes;if((Gr.position!==void 0||Gr.normal!==void 0||Gr.color!==void 0&&ft.isWebGL2===!0)&&St.update(Vt,Ct,bt,Fs),(Di||Rr.receiveShadow!==Vt.receiveShadow)&&(Rr.receiveShadow=Vt.receiveShadow,An.setValue(Re,"receiveShadow",Vt.receiveShadow)),Di&&(An.setValue(Re,"toneMappingExposure",M.toneMappingExposure),Rr.needsLights&&sn(Ir,kr),Wn&&bt.fog===!0&&At.refreshFogUniforms(Ir,Wn),At.refreshMaterialUniforms(Ir,bt,Z,le,ie),EI.upload(Re,Rr.uniformsList,Ir,He)),bt.isShaderMaterial&&bt.uniformsNeedUpdate===!0&&(EI.upload(Re,Rr.uniformsList,Ir,He),bt.uniformsNeedUpdate=!1),bt.isSpriteMaterial&&An.setValue(Re,"center",Vt.center),An.setValue(Re,"modelViewMatrix",Vt.modelViewMatrix),An.setValue(Re,"normalMatrix",Vt.normalMatrix),An.setValue(Re,"modelMatrix",Vt.matrixWorld),bt.isShaderMaterial||bt.isRawShaderMaterial){const yr=bt.uniformsGroups;for(let Pi=0,ws=yr.length;Pi<ws;Pi++)if(ft.isWebGL2){const fi=yr[Pi];Q.update(fi,Fs),Q.bind(fi,Fs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Fs}function sn(De,gt){De.ambientLightColor.needsUpdate=gt,De.lightProbe.needsUpdate=gt,De.directionalLights.needsUpdate=gt,De.directionalLightShadows.needsUpdate=gt,De.pointLights.needsUpdate=gt,De.pointLightShadows.needsUpdate=gt,De.spotLights.needsUpdate=gt,De.spotLightShadows.needsUpdate=gt,De.rectAreaLights.needsUpdate=gt,De.hemisphereLights.needsUpdate=gt}function Nn(De){return De.isMeshLambertMaterial||De.isMeshToonMaterial||De.isMeshPhongMaterial||De.isMeshStandardMaterial||De.isShadowMaterial||De.isShaderMaterial&&De.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(De,gt,Ct){Ce.get(De.texture).__webglTexture=gt,Ce.get(De.depthTexture).__webglTexture=Ct;const bt=Ce.get(De);bt.__hasExternalTextures=!0,bt.__hasExternalTextures&&(bt.__autoAllocateDepthBuffer=Ct===void 0,bt.__autoAllocateDepthBuffer||nt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),bt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(De,gt){const Ct=Ce.get(De);Ct.__webglFramebuffer=gt,Ct.__useDefaultFramebuffer=gt===void 0},this.setRenderTarget=function(De,gt=0,Ct=0){B=De,O=gt,L=Ct;let bt=!0;if(De){const _r=Ce.get(De);_r.__useDefaultFramebuffer!==void 0?(lt.bindFramebuffer(36160,null),bt=!1):_r.__webglFramebuffer===void 0?He.setupRenderTarget(De):_r.__hasExternalTextures&&He.rebindTextures(De,Ce.get(De.texture).__webglTexture,Ce.get(De.depthTexture).__webglTexture)}let Vt=null,Wn=!1,rr=!1;if(De){const _r=De.texture;(_r.isData3DTexture||_r.isDataArrayTexture)&&(rr=!0);const Cr=Ce.get(De).__webglFramebuffer;De.isWebGLCubeRenderTarget?(Vt=Cr[gt],Wn=!0):ft.isWebGL2&&De.samples>0&&He.useMultisampledRTT(De)===!1?Vt=Ce.get(De).__webglMultisampledFramebuffer:Vt=Cr,U.copy(De.viewport),V.copy(De.scissor),H=De.scissorTest}else U.copy(ae).multiplyScalar(Z).floor(),V.copy(ue).multiplyScalar(Z).floor(),H=ge;if(lt.bindFramebuffer(36160,Vt)&&ft.drawBuffers&&bt&&lt.drawBuffers(De,Vt),lt.viewport(U),lt.scissor(V),lt.setScissorTest(H),Wn){const _r=Ce.get(De.texture);Re.framebufferTexture2D(36160,36064,34069+gt,_r.__webglTexture,Ct)}else if(rr){const _r=Ce.get(De.texture),Cr=gt||0;Re.framebufferTextureLayer(36160,36064,_r.__webglTexture,Ct||0,Cr)}D=-1},this.readRenderTargetPixels=function(De,gt,Ct,bt,Vt,Wn,rr){if(!(De&&De.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let _r=Ce.get(De).__webglFramebuffer;if(De.isWebGLCubeRenderTarget&&rr!==void 0&&(_r=_r[rr]),_r){lt.bindFramebuffer(36160,_r);try{const Cr=De.texture,oi=Cr.format,Br=Cr.type;if(oi!==jp&&Ke.convert(oi)!==Re.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Yr=Br===Z1&&(nt.has("EXT_color_buffer_half_float")||ft.isWebGL2&&nt.has("EXT_color_buffer_float"));if(Br!==af&&Ke.convert(Br)!==Re.getParameter(35738)&&!(Br===r_&&(ft.isWebGL2||nt.has("OES_texture_float")||nt.has("WEBGL_color_buffer_float")))&&!Yr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}gt>=0&&gt<=De.width-bt&&Ct>=0&&Ct<=De.height-Vt&&Re.readPixels(gt,Ct,bt,Vt,Ke.convert(oi),Ke.convert(Br),Wn)}finally{const Cr=B!==null?Ce.get(B).__webglFramebuffer:null;lt.bindFramebuffer(36160,Cr)}}},this.copyFramebufferToTexture=function(De,gt,Ct=0){const bt=Math.pow(2,-Ct),Vt=Math.floor(gt.image.width*bt),Wn=Math.floor(gt.image.height*bt);He.setTexture2D(gt,0),Re.copyTexSubImage2D(3553,Ct,0,0,De.x,De.y,Vt,Wn),lt.unbindTexture()},this.copyTextureToTexture=function(De,gt,Ct,bt=0){const Vt=gt.image.width,Wn=gt.image.height,rr=Ke.convert(Ct.format),_r=Ke.convert(Ct.type);He.setTexture2D(Ct,0),Re.pixelStorei(37440,Ct.flipY),Re.pixelStorei(37441,Ct.premultiplyAlpha),Re.pixelStorei(3317,Ct.unpackAlignment),gt.isDataTexture?Re.texSubImage2D(3553,bt,De.x,De.y,Vt,Wn,rr,_r,gt.image.data):gt.isCompressedTexture?Re.compressedTexSubImage2D(3553,bt,De.x,De.y,gt.mipmaps[0].width,gt.mipmaps[0].height,rr,gt.mipmaps[0].data):Re.texSubImage2D(3553,bt,De.x,De.y,rr,_r,gt.image),bt===0&&Ct.generateMipmaps&&Re.generateMipmap(3553),lt.unbindTexture()},this.copyTextureToTexture3D=function(De,gt,Ct,bt,Vt=0){if(M.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Wn=De.max.x-De.min.x+1,rr=De.max.y-De.min.y+1,_r=De.max.z-De.min.z+1,Cr=Ke.convert(bt.format),oi=Ke.convert(bt.type);let Br;if(bt.isData3DTexture)He.setTexture3D(bt,0),Br=32879;else if(bt.isDataArrayTexture)He.setTexture2DArray(bt,0),Br=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Re.pixelStorei(37440,bt.flipY),Re.pixelStorei(37441,bt.premultiplyAlpha),Re.pixelStorei(3317,bt.unpackAlignment);const Yr=Re.getParameter(3314),Ss=Re.getParameter(32878),Oa=Re.getParameter(3316),xo=Re.getParameter(3315),Yl=Re.getParameter(32877),nn=Ct.isCompressedTexture?Ct.mipmaps[0]:Ct.image;Re.pixelStorei(3314,nn.width),Re.pixelStorei(32878,nn.height),Re.pixelStorei(3316,De.min.x),Re.pixelStorei(3315,De.min.y),Re.pixelStorei(32877,De.min.z),Ct.isDataTexture||Ct.isData3DTexture?Re.texSubImage3D(Br,Vt,gt.x,gt.y,gt.z,Wn,rr,_r,Cr,oi,nn.data):Ct.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Re.compressedTexSubImage3D(Br,Vt,gt.x,gt.y,gt.z,Wn,rr,_r,Cr,nn.data)):Re.texSubImage3D(Br,Vt,gt.x,gt.y,gt.z,Wn,rr,_r,Cr,oi,nn),Re.pixelStorei(3314,Yr),Re.pixelStorei(32878,Ss),Re.pixelStorei(3316,Oa),Re.pixelStorei(3315,xo),Re.pixelStorei(32877,Yl),Vt===0&&bt.generateMipmaps&&Re.generateMipmap(Br),lt.unbindTexture()},this.initTexture=function(De){De.isCubeTexture?He.setTextureCube(De,0):De.isData3DTexture?He.setTexture3D(De,0):De.isDataArrayTexture?He.setTexture2DArray(De,0):He.setTexture2D(De,0),lt.unbindTexture()},this.resetState=function(){O=0,L=0,B=null,lt.reset(),Le.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class DQ extends e4{}DQ.prototype.isWebGL1Renderer=!0;class d2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Bn(e),this.density=t}clone(){return new d2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class f2{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Bn(e),this.near=t,this.far=r}clone(){return new f2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Y$ extends ro{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}class p2{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=W$,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Dm()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[r+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Dm()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Dm()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const np=new Ae;class Rm{constructor(e,t,r,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=s===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)np.fromBufferAttribute(this,t),np.applyMatrix4(e),this.setXYZ(t,np.x,np.y,np.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)np.fromBufferAttribute(this,t),np.applyNormalMatrix(e),this.setXYZ(t,np.x,np.y,np.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)np.fromBufferAttribute(this,t),np.transformDirection(e),this.setXYZ(t,np.x,np.y,np.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this}setXYZW(e,t,r,s,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new Po(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Rm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class t4 extends hd{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Bn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let MS;const dx=new Ae,AS=new Ae,IS=new Ae,RS=new jt,fx=new jt,PQ=new Qr,uA=new Ae,px=new Ae,cA=new Ae,QG=new jt,GL=new jt,ZG=new jt;class BQ extends ro{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",MS===void 0){MS=new ui;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new p2(t,5);MS.setIndex([0,1,2,0,2,3]),MS.setAttribute("position",new Rm(r,3,0,!1)),MS.setAttribute("uv",new Rm(r,2,3,!1))}this.geometry=MS,this.material=e!==void 0?e:new t4,this.center=new jt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),AS.setFromMatrixScale(this.matrixWorld),PQ.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),IS.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&AS.multiplyScalar(-IS.z);const r=this.material.rotation;let s,o;r!==0&&(o=Math.cos(r),s=Math.sin(r));const l=this.center;hA(uA.set(-.5,-.5,0),IS,l,AS,s,o),hA(px.set(.5,-.5,0),IS,l,AS,s,o),hA(cA.set(.5,.5,0),IS,l,AS,s,o),QG.set(0,0),GL.set(1,0),ZG.set(1,1);let u=e.ray.intersectTriangle(uA,px,cA,!1,dx);if(u===null&&(hA(px.set(-.5,.5,0),IS,l,AS,s,o),GL.set(0,1),u=e.ray.intersectTriangle(uA,cA,px,!1,dx),u===null))return;const h=e.ray.origin.distanceTo(dx);h<e.near||h>e.far||t.push({distance:h,point:dx.clone(),uv:Am.getUV(dx,uA,px,cA,QG,GL,ZG,new jt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function hA(n,e,t,r,s,o){RS.subVectors(n,t).addScalar(.5).multiply(r),s!==void 0?(fx.x=o*RS.x-s*RS.y,fx.y=s*RS.x+o*RS.y):fx.copy(RS),n.copy(e),n.x+=fx.x,n.y+=fx.y,n.applyMatrix4(PQ)}const dA=new Ae,e6=new Ae;class FQ extends ro{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,s=t.length;r<s;r++){const o=t[r];this.addLevel(o.object.clone(),o.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,s;for(r=1,s=t.length;r<s&&!(e<t[r].distance);r++);return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){dA.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(dA);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){dA.setFromMatrixPosition(e.matrixWorld),e6.setFromMatrixPosition(this.matrixWorld);const r=dA.distanceTo(e6)/e.zoom;t[0].object.visible=!0;let s,o;for(s=1,o=t.length;s<o&&r>=t[s].distance;s++)t[s-1].object.visible=!1,t[s].object.visible=!0;for(this._currentLevel=s-1;s<o;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let s=0,o=r.length;s<o;s++){const l=r[s];t.object.levels.push({object:l.object.uuid,distance:l.distance})}return t}}const t6=new Ae,n6=new Ts,r6=new Ts,k$e=new Ae,i6=new Qr;class zQ extends Un{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qr,this.bindMatrixInverse=new Qr}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ts,t=this.geometry.attributes.skinWeight;for(let r=0,s=t.count;r<s;r++){e.fromBufferAttribute(t,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,s=this.geometry;n6.fromBufferAttribute(s.attributes.skinIndex,e),r6.fromBufferAttribute(s.attributes.skinWeight,e),t6.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=r6.getComponent(o);if(l!==0){const u=n6.getComponent(o);i6.multiplyMatrices(r.bones[u].matrixWorld,r.boneInverses[u]),t.addScaledVector(k$e.copy(t6).applyMatrix4(i6),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class n4 extends ro{constructor(){super(),this.isBone=!0,this.type="Bone"}}class vw extends hc{constructor(e=null,t=1,r=1,s,o,l,u,h,f=Wl,g=Wl,y,b){super(null,l,u,h,f,g,s,o,y,b),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const s6=new Qr,O$e=new Qr;class m2{constructor(e=[],t=[]){this.uuid=Dm(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,s=this.bones.length;r<s;r++)this.boneInverses.push(new Qr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Qr;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:O$e;s6.multiplyMatrices(u,t[o]),s6.toArray(r,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new m2(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=SQ(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new vw(t,e,e,jp,r_);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,s=e.bones.length;r<s;r++){const o=e.bones[r];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new n4),this.bones.push(l),this.boneInverses.push(new Qr().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=r[s];e.boneInverses.push(u.toArray())}return e}}class eT extends Po{constructor(e,t,r,s=1){typeof r=="number"&&(s=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const o6=new Qr,a6=new Qr,fA=[],mx=new Un;class UQ extends Un{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new eT(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,s=this.count;if(mx.geometry=this.geometry,mx.material=this.material,mx.material!==void 0)for(let o=0;o<s;o++){this.getMatrixAt(o,o6),a6.multiplyMatrices(r,o6),mx.matrixWorld=a6,mx.raycast(e,fA);for(let l=0,u=fA.length;l<u;l++){const h=fA[l];h.instanceId=o,h.object=this,t.push(h)}fA.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new eT(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Pf extends hd{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Bn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const l6=new Ae,u6=new Ae,c6=new Qr,WL=new OC,pA=new y_;class Rf extends ro{constructor(e=new ui,t=new Pf){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let s=1,o=t.count;s<o;s++)l6.fromBufferAttribute(t,s-1),u6.fromBufferAttribute(t,s),r[s]=r[s-1],r[s]+=l6.distanceTo(u6);e.setAttribute("lineDistance",new ar(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),pA.copy(r.boundingSphere),pA.applyMatrix4(s),pA.radius+=o,e.ray.intersectsSphere(pA)===!1)return;c6.copy(s).invert(),WL.copy(e.ray).applyMatrix4(c6);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,f=new Ae,g=new Ae,y=new Ae,b=new Ae,S=this.isLineSegments?2:1,C=r.index,M=r.attributes.position;if(C!==null){const A=Math.max(0,l.start),O=Math.min(C.count,l.start+l.count);for(let L=A,B=O-1;L<B;L+=S){const D=C.getX(L),z=C.getX(L+1);if(f.fromBufferAttribute(M,D),g.fromBufferAttribute(M,z),WL.distanceSqToSegment(f,g,b,y)>h)continue;b.applyMatrix4(this.matrixWorld);const U=e.ray.origin.distanceTo(b);U<e.near||U>e.far||t.push({distance:U,point:y.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}}else{const A=Math.max(0,l.start),O=Math.min(M.count,l.start+l.count);for(let L=A,B=O-1;L<B;L+=S){if(f.fromBufferAttribute(M,L),g.fromBufferAttribute(M,L+1),WL.distanceSqToSegment(f,g,b,y)>h)continue;b.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(b);D<e.near||D>e.far||t.push({distance:D,point:y.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const h6=new Ae,d6=new Ae;class b_ extends Rf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let s=0,o=t.count;s<o;s+=2)h6.fromBufferAttribute(t,s),d6.fromBufferAttribute(t,s+1),r[s]=s===0?0:r[s-1],r[s+1]=r[s]+h6.distanceTo(d6);e.setAttribute("lineDistance",new ar(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class HQ extends Rf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class g2 extends hd{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Bn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const f6=new Qr,IP=new OC,mA=new y_,gA=new Ae;class GQ extends ro{constructor(e=new ui,t=new g2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),mA.copy(r.boundingSphere),mA.applyMatrix4(s),mA.radius+=o,e.ray.intersectsSphere(mA)===!1)return;f6.copy(s).invert(),IP.copy(e.ray).applyMatrix4(f6);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,f=r.index,g=r.attributes.position;if(f!==null){const y=Math.max(0,l.start),b=Math.min(f.count,l.start+l.count);for(let S=y,C=b;S<C;S++){const M=f.getX(S);gA.fromBufferAttribute(g,M),p6(gA,M,h,s,e,t,this)}}else{const y=Math.max(0,l.start),b=Math.min(g.count,l.start+l.count);for(let S=y,C=b;S<C;S++)gA.fromBufferAttribute(g,S),p6(gA,S,h,s,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function p6(n,e,t,r,s,o,l){const u=IP.distanceSqToPoint(n);if(u<t){const h=new Ae;IP.closestPointToPoint(n,h),h.applyMatrix4(r);const f=s.ray.origin.distanceTo(h);if(f<s.near||f>s.far)return;o.push({distance:f,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,object:l})}}class L$e extends hc{constructor(e,t,r,s,o,l,u,h,f){super(e,t,r,s,o,l,u,h,f),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:wl,this.magFilter=o!==void 0?o:wl,this.generateMipmaps=!1;const g=this;function y(){g.needsUpdate=!0,e.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(y)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class N$e extends hc{constructor(e,t,r){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=Wl,this.minFilter=Wl,this.generateMipmaps=!1,this.needsUpdate=!0}}class WQ extends hc{constructor(e,t,r,s,o,l,u,h,f,g,y,b){super(null,l,u,h,f,g,s,o,y,b),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class D$e extends hc{constructor(e,t,r,s,o,l,u,h,f){super(e,t,r,s,o,l,u,h,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class p0{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,s=this.getPoint(0),o=0;t.push(0);for(let l=1;l<=e;l++)r=this.getPoint(l/e),o+=r.distanceTo(s),t.push(o),s=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let s=0;const o=r.length;let l;t?l=t:l=e*r[o-1];let u=0,h=o-1,f;for(;u<=h;)if(s=Math.floor(u+(h-u)/2),f=r[s]-l,f<0)u=s+1;else if(f>0)h=s-1;else{h=s;break}if(s=h,r[s]===l)return s/(o-1);const g=r[s],y=r[s+1]-g,b=(l-g)/y;return(s+b)/(o-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),u=t||(o.isVector2?new jt:new Ae);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new Ae,s=[],o=[],l=[],u=new Ae,h=new Qr;for(let S=0;S<=e;S++){const C=S/e;s[S]=this.getTangentAt(C,new Ae)}o[0]=new Ae,l[0]=new Ae;let f=Number.MAX_VALUE;const g=Math.abs(s[0].x),y=Math.abs(s[0].y),b=Math.abs(s[0].z);g<=f&&(f=g,r.set(1,0,0)),y<=f&&(f=y,r.set(0,1,0)),b<=f&&r.set(0,0,1),u.crossVectors(s[0],r).normalize(),o[0].crossVectors(s[0],u),l[0].crossVectors(s[0],o[0]);for(let S=1;S<=e;S++){if(o[S]=o[S-1].clone(),l[S]=l[S-1].clone(),u.crossVectors(s[S-1],s[S]),u.length()>Number.EPSILON){u.normalize();const C=Math.acos(hh(s[S-1].dot(s[S]),-1,1));o[S].applyMatrix4(h.makeRotationAxis(u,C))}l[S].crossVectors(s[S],o[S])}if(t===!0){let S=Math.acos(hh(o[0].dot(o[e]),-1,1));S/=e,s[0].dot(u.crossVectors(o[0],o[e]))>0&&(S=-S);for(let C=1;C<=e;C++)o[C].applyMatrix4(h.makeRotationAxis(s[C],S*C)),l[C].crossVectors(s[C],o[C])}return{tangents:s,normals:o,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class _2 extends p0{constructor(e=0,t=0,r=1,s=1,o=0,l=Math.PI*2,u=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=l,this.aClockwise=u,this.aRotation=h}getPoint(e,t){const r=t||new jt,s=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const l=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=s;for(;o>s;)o-=s;o<Number.EPSILON&&(l?o=0:o=s),this.aClockwise===!0&&!l&&(o===s?o=-s:o=o-s);const u=this.aStartAngle+e*o;let h=this.aX+this.xRadius*Math.cos(u),f=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const g=Math.cos(this.aRotation),y=Math.sin(this.aRotation),b=h-this.aX,S=f-this.aY;h=b*g-S*y+this.aX,f=b*y+S*g+this.aY}return r.set(h,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class VQ extends _2{constructor(e,t,r,s,o,l){super(e,t,r,r,s,o,l),this.isArcCurve=!0,this.type="ArcCurve"}}function r4(){let n=0,e=0,t=0,r=0;function s(o,l,u,h){n=o,e=u,t=-3*o+3*l-2*u-h,r=2*o-2*l+u+h}return{initCatmullRom:function(o,l,u,h,f){s(l,u,f*(u-o),f*(h-l))},initNonuniformCatmullRom:function(o,l,u,h,f,g,y){let b=(l-o)/f-(u-o)/(f+g)+(u-l)/g,S=(u-l)/g-(h-l)/(g+y)+(h-u)/y;b*=g,S*=g,s(l,u,b,S)},calc:function(o){const l=o*o,u=l*o;return n+e*o+t*l+r*u}}}const _A=new Ae,VL=new r4,jL=new r4,YL=new r4;class jQ extends p0{constructor(e=[],t=!1,r="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=s}getPoint(e,t=new Ae){const r=t,s=this.points,o=s.length,l=(o-(this.closed?0:1))*e;let u=Math.floor(l),h=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:h===0&&u===o-1&&(u=o-2,h=1);let f,g;this.closed||u>0?f=s[(u-1)%o]:(_A.subVectors(s[0],s[1]).add(s[0]),f=_A);const y=s[u%o],b=s[(u+1)%o];if(this.closed||u+2<o?g=s[(u+2)%o]:(_A.subVectors(s[o-1],s[o-2]).add(s[o-1]),g=_A),this.curveType==="centripetal"||this.curveType==="chordal"){const S=this.curveType==="chordal"?.5:.25;let C=Math.pow(f.distanceToSquared(y),S),M=Math.pow(y.distanceToSquared(b),S),A=Math.pow(b.distanceToSquared(g),S);M<1e-4&&(M=1),C<1e-4&&(C=M),A<1e-4&&(A=M),VL.initNonuniformCatmullRom(f.x,y.x,b.x,g.x,C,M,A),jL.initNonuniformCatmullRom(f.y,y.y,b.y,g.y,C,M,A),YL.initNonuniformCatmullRom(f.z,y.z,b.z,g.z,C,M,A)}else this.curveType==="catmullrom"&&(VL.initCatmullRom(f.x,y.x,b.x,g.x,this.tension),jL.initCatmullRom(f.y,y.y,b.y,g.y,this.tension),YL.initCatmullRom(f.z,y.z,b.z,g.z,this.tension));return r.set(VL.calc(h),jL.calc(h),YL.calc(h)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push(new Ae().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function m6(n,e,t,r,s){const o=(r-e)*.5,l=(s-t)*.5,u=n*n,h=n*u;return(2*t-2*r+o+l)*h+(-3*t+3*r-2*o-l)*u+o*n+t}function P$e(n,e){const t=1-n;return t*t*e}function B$e(n,e){return 2*(1-n)*n*e}function F$e(n,e){return n*n*e}function r$(n,e,t,r){return P$e(n,e)+B$e(n,t)+F$e(n,r)}function z$e(n,e){const t=1-n;return t*t*t*e}function U$e(n,e){const t=1-n;return 3*t*t*n*e}function H$e(n,e){return 3*(1-n)*n*n*e}function G$e(n,e){return n*n*n*e}function i$(n,e,t,r,s){return z$e(n,e)+U$e(n,t)+H$e(n,r)+G$e(n,s)}class i4 extends p0{constructor(e=new jt,t=new jt,r=new jt,s=new jt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=s}getPoint(e,t=new jt){const r=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return r.set(i$(e,s.x,o.x,l.x,u.x),i$(e,s.y,o.y,l.y,u.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class YQ extends p0{constructor(e=new Ae,t=new Ae,r=new Ae,s=new Ae){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=s}getPoint(e,t=new Ae){const r=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return r.set(i$(e,s.x,o.x,l.x,u.x),i$(e,s.y,o.y,l.y,u.y),i$(e,s.z,o.z,l.z,u.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class v2 extends p0{constructor(e=new jt,t=new jt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new jt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new jt;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XQ extends p0{constructor(e=new Ae,t=new Ae){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Ae){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class s4 extends p0{constructor(e=new jt,t=new jt,r=new jt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new jt){const r=t,s=this.v0,o=this.v1,l=this.v2;return r.set(r$(e,s.x,o.x,l.x),r$(e,s.y,o.y,l.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class o4 extends p0{constructor(e=new Ae,t=new Ae,r=new Ae){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ae){const r=t,s=this.v0,o=this.v1,l=this.v2;return r.set(r$(e,s.x,o.x,l.x),r$(e,s.y,o.y,l.y),r$(e,s.z,o.z,l.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class a4 extends p0{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new jt){const r=t,s=this.points,o=(s.length-1)*e,l=Math.floor(o),u=o-l,h=s[l===0?l:l-1],f=s[l],g=s[l>s.length-2?s.length-1:l+1],y=s[l>s.length-3?s.length-1:l+2];return r.set(m6(u,h.x,f.x,g.x,y.x),m6(u,h.y,f.y,g.y,y.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push(new jt().fromArray(s))}return this}}var l4=Object.freeze({__proto__:null,ArcCurve:VQ,CatmullRomCurve3:jQ,CubicBezierCurve:i4,CubicBezierCurve3:YQ,EllipseCurve:_2,LineCurve:v2,LineCurve3:XQ,QuadraticBezierCurve:s4,QuadraticBezierCurve3:o4,SplineCurve:a4});class KQ extends p0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new v2(t,e))}getPoint(e,t){const r=e*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=r){const l=s[o]-r,u=this.curves[o],h=u.getLength(),f=h===0?0:1-l/h;return u.getPointAt(f,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,s=this.curves.length;r<s;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let s=0,o=this.curves;s<o.length;s++){const l=o[s],u=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,h=l.getPoints(u);for(let f=0;f<h.length;f++){const g=h[f];r&&r.equals(g)||(t.push(g),r=g)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const s=e.curves[t];this.curves.push(new l4[s.type]().fromJSON(s))}return this}}class X$ extends KQ{constructor(e){super(),this.type="Path",this.currentPoint=new jt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new v2(this.currentPoint.clone(),new jt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,s){const o=new s4(this.currentPoint.clone(),new jt(e,t),new jt(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}bezierCurveTo(e,t,r,s,o,l){const u=new i4(this.currentPoint.clone(),new jt(e,t),new jt(r,s),new jt(o,l));return this.curves.push(u),this.currentPoint.set(o,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new a4(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,s,o,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+u,t+h,r,s,o,l),this}absarc(e,t,r,s,o,l){return this.absellipse(e,t,r,r,s,o,l),this}ellipse(e,t,r,s,o,l,u,h){const f=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(e+f,t+g,r,s,o,l,u,h),this}absellipse(e,t,r,s,o,l,u,h){const f=new _2(e,t,r,s,o,l,u,h);if(this.curves.length>0){const y=f.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(f);const g=f.getPoint(1);return this.currentPoint.copy(g),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class tT extends ui{constructor(e=[new jt(0,-.5),new jt(.5,0),new jt(0,.5)],t=12,r=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:s},t=Math.floor(t),s=hh(s,0,Math.PI*2);const o=[],l=[],u=[],h=[],f=[],g=1/t,y=new Ae,b=new jt,S=new Ae,C=new Ae,M=new Ae;let A=0,O=0;for(let L=0;L<=e.length-1;L++)switch(L){case 0:A=e[L+1].x-e[L].x,O=e[L+1].y-e[L].y,S.x=O*1,S.y=-A,S.z=O*0,M.copy(S),S.normalize(),h.push(S.x,S.y,S.z);break;case e.length-1:h.push(M.x,M.y,M.z);break;default:A=e[L+1].x-e[L].x,O=e[L+1].y-e[L].y,S.x=O*1,S.y=-A,S.z=O*0,C.copy(S),S.x+=M.x,S.y+=M.y,S.z+=M.z,S.normalize(),h.push(S.x,S.y,S.z),M.copy(C)}for(let L=0;L<=t;L++){const B=r+L*g*s,D=Math.sin(B),z=Math.cos(B);for(let U=0;U<=e.length-1;U++){y.x=e[U].x*D,y.y=e[U].y,y.z=e[U].x*z,l.push(y.x,y.y,y.z),b.x=L/t,b.y=U/(e.length-1),u.push(b.x,b.y);const V=h[3*U+0]*D,H=h[3*U+1],oe=h[3*U+0]*z;f.push(V,H,oe)}}for(let L=0;L<t;L++)for(let B=0;B<e.length-1;B++){const D=B+L*e.length,z=D,U=D+e.length,V=D+e.length+1,H=D+1;o.push(z,U,H),o.push(V,H,U)}this.setIndex(o),this.setAttribute("position",new ar(l,3)),this.setAttribute("uv",new ar(u,2)),this.setAttribute("normal",new ar(f,3))}static fromJSON(e){return new tT(e.points,e.segments,e.phiStart,e.phiLength)}}class Pw extends tT{constructor(e=1,t=1,r=4,s=8){const o=new X$;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(r),s),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:s}}static fromJSON(e){return new Pw(e.radius,e.length,e.capSegments,e.radialSegments)}}class Bw extends ui{constructor(e=1,t=8,r=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:s},t=Math.max(3,t);const o=[],l=[],u=[],h=[],f=new Ae,g=new jt;l.push(0,0,0),u.push(0,0,1),h.push(.5,.5);for(let y=0,b=3;y<=t;y++,b+=3){const S=r+y/t*s;f.x=e*Math.cos(S),f.y=e*Math.sin(S),l.push(f.x,f.y,f.z),u.push(0,0,1),g.x=(l[b]/e+1)/2,g.y=(l[b+1]/e+1)/2,h.push(g.x,g.y)}for(let y=1;y<=t;y++)o.push(y,y+1,0);this.setIndex(o),this.setAttribute("position",new ar(l,3)),this.setAttribute("normal",new ar(u,3)),this.setAttribute("uv",new ar(h,2))}static fromJSON(e){return new Bw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Gl extends ui{constructor(e=1,t=1,r=1,s=8,o=1,l=!1,u=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:s,heightSegments:o,openEnded:l,thetaStart:u,thetaLength:h};const f=this;s=Math.floor(s),o=Math.floor(o);const g=[],y=[],b=[],S=[];let C=0;const M=[],A=r/2;let O=0;L(),l===!1&&(e>0&&B(!0),t>0&&B(!1)),this.setIndex(g),this.setAttribute("position",new ar(y,3)),this.setAttribute("normal",new ar(b,3)),this.setAttribute("uv",new ar(S,2));function L(){const D=new Ae,z=new Ae;let U=0;const V=(t-e)/r;for(let H=0;H<=o;H++){const oe=[],le=H/o,Z=le*(t-e)+e;for(let q=0;q<=s;q++){const he=q/s,ae=he*h+u,ue=Math.sin(ae),ge=Math.cos(ae);z.x=Z*ue,z.y=-le*r+A,z.z=Z*ge,y.push(z.x,z.y,z.z),D.set(ue,V,ge).normalize(),b.push(D.x,D.y,D.z),S.push(he,1-le),oe.push(C++)}M.push(oe)}for(let H=0;H<s;H++)for(let oe=0;oe<o;oe++){const le=M[oe][H],Z=M[oe+1][H],q=M[oe+1][H+1],he=M[oe][H+1];g.push(le,Z,he),g.push(Z,q,he),U+=6}f.addGroup(O,U,0),O+=U}function B(D){const z=C,U=new jt,V=new Ae;let H=0;const oe=D===!0?e:t,le=D===!0?1:-1;for(let q=1;q<=s;q++)y.push(0,A*le,0),b.push(0,le,0),S.push(.5,.5),C++;const Z=C;for(let q=0;q<=s;q++){const he=q/s*h+u,ae=Math.cos(he),ue=Math.sin(he);V.x=oe*ue,V.y=A*le,V.z=oe*ae,y.push(V.x,V.y,V.z),b.push(0,le,0),U.x=ae*.5+.5,U.y=ue*.5*le+.5,S.push(U.x,U.y),C++}for(let q=0;q<s;q++){const he=z+q,ae=Z+q;D===!0?g.push(ae,ae+1,he):g.push(ae+1,ae,he),H+=3}f.addGroup(O,H,D===!0?1:2),O+=H}}static fromJSON(e){return new Gl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Fw extends Gl{constructor(e=1,t=1,r=8,s=1,o=!1,l=0,u=Math.PI*2){super(0,e,t,r,s,o,l,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:u}}static fromJSON(e){return new Fw(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class p_ extends ui{constructor(e=[],t=[],r=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:s};const o=[],l=[];u(s),f(r),g(),this.setAttribute("position",new ar(o,3)),this.setAttribute("normal",new ar(o.slice(),3)),this.setAttribute("uv",new ar(l,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function u(L){const B=new Ae,D=new Ae,z=new Ae;for(let U=0;U<t.length;U+=3)S(t[U+0],B),S(t[U+1],D),S(t[U+2],z),h(B,D,z,L)}function h(L,B,D,z){const U=z+1,V=[];for(let H=0;H<=U;H++){V[H]=[];const oe=L.clone().lerp(D,H/U),le=B.clone().lerp(D,H/U),Z=U-H;for(let q=0;q<=Z;q++)q===0&&H===U?V[H][q]=oe:V[H][q]=oe.clone().lerp(le,q/Z)}for(let H=0;H<U;H++)for(let oe=0;oe<2*(U-H)-1;oe++){const le=Math.floor(oe/2);oe%2===0?(b(V[H][le+1]),b(V[H+1][le]),b(V[H][le])):(b(V[H][le+1]),b(V[H+1][le+1]),b(V[H+1][le]))}}function f(L){const B=new Ae;for(let D=0;D<o.length;D+=3)B.x=o[D+0],B.y=o[D+1],B.z=o[D+2],B.normalize().multiplyScalar(L),o[D+0]=B.x,o[D+1]=B.y,o[D+2]=B.z}function g(){const L=new Ae;for(let B=0;B<o.length;B+=3){L.x=o[B+0],L.y=o[B+1],L.z=o[B+2];const D=A(L)/2/Math.PI+.5,z=O(L)/Math.PI+.5;l.push(D,1-z)}C(),y()}function y(){for(let L=0;L<l.length;L+=6){const B=l[L+0],D=l[L+2],z=l[L+4],U=Math.max(B,D,z),V=Math.min(B,D,z);U>.9&&V<.1&&(B<.2&&(l[L+0]+=1),D<.2&&(l[L+2]+=1),z<.2&&(l[L+4]+=1))}}function b(L){o.push(L.x,L.y,L.z)}function S(L,B){const D=L*3;B.x=e[D+0],B.y=e[D+1],B.z=e[D+2]}function C(){const L=new Ae,B=new Ae,D=new Ae,z=new Ae,U=new jt,V=new jt,H=new jt;for(let oe=0,le=0;oe<o.length;oe+=9,le+=6){L.set(o[oe+0],o[oe+1],o[oe+2]),B.set(o[oe+3],o[oe+4],o[oe+5]),D.set(o[oe+6],o[oe+7],o[oe+8]),U.set(l[le+0],l[le+1]),V.set(l[le+2],l[le+3]),H.set(l[le+4],l[le+5]),z.copy(L).add(B).add(D).divideScalar(3);const Z=A(z);M(U,le+0,L,Z),M(V,le+2,B,Z),M(H,le+4,D,Z)}}function M(L,B,D,z){z<0&&L.x===1&&(l[B]=L.x-1),D.x===0&&D.z===0&&(l[B]=z/2/Math.PI+.5)}function A(L){return Math.atan2(L.z,-L.x)}function O(L){return Math.atan2(-L.y,Math.sqrt(L.x*L.x+L.z*L.z))}}static fromJSON(e){return new p_(e.vertices,e.indices,e.radius,e.details)}}class zw extends p_{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,s=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-r,0,-s,r,0,s,-r,0,s,r,-s,-r,0,-s,r,0,s,-r,0,s,r,0,-r,0,-s,r,0,-s,-r,0,s,r,0,s],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zw(e.radius,e.detail)}}const vA=new Ae,yA=new Ae,XL=new Ae,bA=new Am;class JQ extends ui{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(D1*t),o=e.getIndex(),l=e.getAttribute("position"),u=o?o.count:l.count,h=[0,0,0],f=["a","b","c"],g=new Array(3),y={},b=[];for(let S=0;S<u;S+=3){o?(h[0]=o.getX(S),h[1]=o.getX(S+1),h[2]=o.getX(S+2)):(h[0]=S,h[1]=S+1,h[2]=S+2);const{a:C,b:M,c:A}=bA;if(C.fromBufferAttribute(l,h[0]),M.fromBufferAttribute(l,h[1]),A.fromBufferAttribute(l,h[2]),bA.getNormal(XL),g[0]=`${Math.round(C.x*r)},${Math.round(C.y*r)},${Math.round(C.z*r)}`,g[1]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,g[2]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let O=0;O<3;O++){const L=(O+1)%3,B=g[O],D=g[L],z=bA[f[O]],U=bA[f[L]],V=`${B}_${D}`,H=`${D}_${B}`;H in y&&y[H]?(XL.dot(y[H].normal)<=s&&(b.push(z.x,z.y,z.z),b.push(U.x,U.y,U.z)),y[H]=null):V in y||(y[V]={index0:h[O],index1:h[L],normal:XL.clone()})}}for(const S in y)if(y[S]){const{index0:C,index1:M}=y[S];vA.fromBufferAttribute(l,C),yA.fromBufferAttribute(l,M),b.push(vA.x,vA.y,vA.z),b.push(yA.x,yA.y,yA.z)}this.setAttribute("position",new ar(b,3))}}}class F1 extends X${constructor(e){super(e),this.uuid=Dm(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,s=this.holes.length;r<s;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const s=e.holes[t];this.holes.push(new X$().fromJSON(s))}return this}}const W$e={triangulate:function(n,e,t=2){const r=e&&e.length,s=r?e[0]*t:n.length;let o=qQ(n,0,s,t,!0);const l=[];if(!o||o.next===o.prev)return l;let u,h,f,g,y,b,S;if(r&&(o=K$e(n,e,o,t)),n.length>80*t){u=f=n[0],h=g=n[1];for(let C=t;C<s;C+=t)y=n[C],b=n[C+1],y<u&&(u=y),b<h&&(h=b),y>f&&(f=y),b>g&&(g=b);S=Math.max(f-u,g-h),S=S!==0?1/S:0}return K$(o,l,t,u,h,S),l}};function qQ(n,e,t,r,s){let o,l;if(s===oCe(n,e,t,r)>0)for(o=e;o<t;o+=r)l=g6(o,n[o],n[o+1],l);else for(o=t-r;o>=e;o-=r)l=g6(o,n[o],n[o+1],l);return l&&y2(l,l.next)&&(q$(l),l=l.next),l}function jy(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(y2(t,t.next)||ac(t.prev,t,t.next)===0)){if(q$(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function K$(n,e,t,r,s,o,l){if(!n)return;!l&&o&&eCe(n,r,s,o);let u=n,h,f;for(;n.prev!==n.next;){if(h=n.prev,f=n.next,o?j$e(n,r,s,o):V$e(n)){e.push(h.i/t),e.push(n.i/t),e.push(f.i/t),q$(n),n=f.next,u=f.next;continue}if(n=f,n===u){l?l===1?(n=Y$e(jy(n),e,t),K$(n,e,t,r,s,o,2)):l===2&&X$e(n,e,t,r,s,o):K$(jy(n),e,t,r,s,o,1);break}}}function V$e(n){const e=n.prev,t=n,r=n.next;if(ac(e,t,r)>=0)return!1;let s=n.next.next;for(;s!==n.prev;){if(tw(e.x,e.y,t.x,t.y,r.x,r.y,s.x,s.y)&&ac(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function j$e(n,e,t,r){const s=n.prev,o=n,l=n.next;if(ac(s,o,l)>=0)return!1;const u=s.x<o.x?s.x<l.x?s.x:l.x:o.x<l.x?o.x:l.x,h=s.y<o.y?s.y<l.y?s.y:l.y:o.y<l.y?o.y:l.y,f=s.x>o.x?s.x>l.x?s.x:l.x:o.x>l.x?o.x:l.x,g=s.y>o.y?s.y>l.y?s.y:l.y:o.y>l.y?o.y:l.y,y=RP(u,h,e,t,r),b=RP(f,g,e,t,r);let S=n.prevZ,C=n.nextZ;for(;S&&S.z>=y&&C&&C.z<=b;){if(S!==n.prev&&S!==n.next&&tw(s.x,s.y,o.x,o.y,l.x,l.y,S.x,S.y)&&ac(S.prev,S,S.next)>=0||(S=S.prevZ,C!==n.prev&&C!==n.next&&tw(s.x,s.y,o.x,o.y,l.x,l.y,C.x,C.y)&&ac(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;S&&S.z>=y;){if(S!==n.prev&&S!==n.next&&tw(s.x,s.y,o.x,o.y,l.x,l.y,S.x,S.y)&&ac(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;C&&C.z<=b;){if(C!==n.prev&&C!==n.next&&tw(s.x,s.y,o.x,o.y,l.x,l.y,C.x,C.y)&&ac(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function Y$e(n,e,t){let r=n;do{const s=r.prev,o=r.next.next;!y2(s,o)&&QQ(s,r,r.next,o)&&J$(s,o)&&J$(o,s)&&(e.push(s.i/t),e.push(r.i/t),e.push(o.i/t),q$(r),q$(r.next),r=n=o),r=r.next}while(r!==n);return jy(r)}function X$e(n,e,t,r,s,o){let l=n;do{let u=l.next.next;for(;u!==l.prev;){if(l.i!==u.i&&rCe(l,u)){let h=ZQ(l,u);l=jy(l,l.next),h=jy(h,h.next),K$(l,e,t,r,s,o),K$(h,e,t,r,s,o);return}u=u.next}l=l.next}while(l!==n)}function K$e(n,e,t,r){const s=[];let o,l,u,h,f;for(o=0,l=e.length;o<l;o++)u=e[o]*r,h=o<l-1?e[o+1]*r:n.length,f=qQ(n,u,h,r,!1),f===f.next&&(f.steiner=!0),s.push(nCe(f));for(s.sort(J$e),o=0;o<s.length;o++)q$e(s[o],t),t=jy(t,t.next);return t}function J$e(n,e){return n.x-e.x}function q$e(n,e){if(e=Q$e(n,e),e){const t=ZQ(e,n);jy(e,e.next),jy(t,t.next)}}function Q$e(n,e){let t=e;const r=n.x,s=n.y;let o=-1/0,l;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const b=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(b<=r&&b>o){if(o=b,b===r){if(s===t.y)return t;if(s===t.next.y)return t.next}l=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!l)return null;if(r===o)return l;const u=l,h=l.x,f=l.y;let g=1/0,y;t=l;do r>=t.x&&t.x>=h&&r!==t.x&&tw(s<f?r:o,s,h,f,s<f?o:r,s,t.x,t.y)&&(y=Math.abs(s-t.y)/(r-t.x),J$(t,n)&&(y<g||y===g&&(t.x>l.x||t.x===l.x&&Z$e(l,t)))&&(l=t,g=y)),t=t.next;while(t!==u);return l}function Z$e(n,e){return ac(n.prev,n,e.prev)<0&&ac(e.next,n,n.next)<0}function eCe(n,e,t,r){let s=n;do s.z===null&&(s.z=RP(s.x,s.y,e,t,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,tCe(s)}function tCe(n){let e,t,r,s,o,l,u,h,f=1;do{for(t=n,n=null,o=null,l=0;t;){for(l++,r=t,u=0,e=0;e<f&&(u++,r=r.nextZ,!!r);e++);for(h=f;u>0||h>0&&r;)u!==0&&(h===0||!r||t.z<=r.z)?(s=t,t=t.nextZ,u--):(s=r,r=r.nextZ,h--),o?o.nextZ=s:n=s,s.prevZ=o,o=s;t=r}o.nextZ=null,f*=2}while(l>1);return n}function RP(n,e,t,r,s){return n=32767*(n-t)*s,e=32767*(e-r)*s,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function nCe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function tw(n,e,t,r,s,o,l,u){return(s-l)*(e-u)-(n-l)*(o-u)>=0&&(n-l)*(r-u)-(t-l)*(e-u)>=0&&(t-l)*(o-u)-(s-l)*(r-u)>=0}function rCe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!iCe(n,e)&&(J$(n,e)&&J$(e,n)&&sCe(n,e)&&(ac(n.prev,n,e.prev)||ac(n,e.prev,e))||y2(n,e)&&ac(n.prev,n,n.next)>0&&ac(e.prev,e,e.next)>0)}function ac(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function y2(n,e){return n.x===e.x&&n.y===e.y}function QQ(n,e,t,r){const s=SA(ac(n,e,t)),o=SA(ac(n,e,r)),l=SA(ac(t,r,n)),u=SA(ac(t,r,e));return!!(s!==o&&l!==u||s===0&&TA(n,t,e)||o===0&&TA(n,r,e)||l===0&&TA(t,n,r)||u===0&&TA(t,e,r))}function TA(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function SA(n){return n>0?1:n<0?-1:0}function iCe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&QQ(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function J$(n,e){return ac(n.prev,n,n.next)<0?ac(n,e,n.next)>=0&&ac(n,n.prev,e)>=0:ac(n,e,n.prev)<0||ac(n,n.next,e)<0}function sCe(n,e){let t=n,r=!1;const s=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&s<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function ZQ(n,e){const t=new kP(n.i,n.x,n.y),r=new kP(e.i,e.x,e.y),s=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,r.next=t,t.prev=r,o.next=r,r.prev=o,r}function g6(n,e,t,r){const s=new kP(n,e,t);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function q$(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function kP(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function oCe(n,e,t,r){let s=0;for(let o=e,l=t-r;o<t;o+=r)s+=(n[l]-n[o])*(n[o+1]+n[l+1]),l=o;return s}class c_{static area(e){const t=e.length;let r=0;for(let s=t-1,o=0;o<t;s=o++)r+=e[s].x*e[o].y-e[o].x*e[s].y;return r*.5}static isClockWise(e){return c_.area(e)<0}static triangulateShape(e,t){const r=[],s=[],o=[];_6(e),v6(r,e);let l=e.length;t.forEach(_6);for(let h=0;h<t.length;h++)s.push(l),l+=t[h].length,v6(r,t[h]);const u=W$e.triangulate(r,s);for(let h=0;h<u.length;h+=3)o.push(u.slice(h,h+3));return o}}function _6(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function v6(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Uw extends ui{constructor(e=new F1([new jt(.5,.5),new jt(-.5,.5),new jt(-.5,-.5),new jt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,s=[],o=[];for(let u=0,h=e.length;u<h;u++){const f=e[u];l(f)}this.setAttribute("position",new ar(s,3)),this.setAttribute("uv",new ar(o,2)),this.computeVertexNormals();function l(u){const h=[],f=t.curveSegments!==void 0?t.curveSegments:12,g=t.steps!==void 0?t.steps:1,y=t.depth!==void 0?t.depth:1;let b=t.bevelEnabled!==void 0?t.bevelEnabled:!0,S=t.bevelThickness!==void 0?t.bevelThickness:.2,C=t.bevelSize!==void 0?t.bevelSize:S-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,A=t.bevelSegments!==void 0?t.bevelSegments:3;const O=t.extrudePath,L=t.UVGenerator!==void 0?t.UVGenerator:aCe;let B,D=!1,z,U,V,H;O&&(B=O.getSpacedPoints(g),D=!0,b=!1,z=O.computeFrenetFrames(g,!1),U=new Ae,V=new Ae,H=new Ae),b||(A=0,S=0,C=0,M=0);const oe=u.extractPoints(f);let le=oe.shape;const Z=oe.holes;if(!c_.isClockWise(le)){le=le.reverse();for(let ze=0,Ce=Z.length;ze<Ce;ze++){const He=Z[ze];c_.isClockWise(He)&&(Z[ze]=He.reverse())}}const q=c_.triangulateShape(le,Z),he=le;for(let ze=0,Ce=Z.length;ze<Ce;ze++){const He=Z[ze];le=le.concat(He)}function ae(ze,Ce,He){return Ce||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ce.clone().multiplyScalar(He).add(ze)}const ue=le.length,ge=q.length;function we(ze,Ce,He){let rt,it,Nt;const kt=ze.x-Ce.x,vt=ze.y-Ce.y,Mt=He.x-ze.x,At=He.y-ze.y,mt=kt*kt+vt*vt,xe=kt*At-vt*Mt;if(Math.abs(xe)>Number.EPSILON){const se=Math.sqrt(mt),$e=Math.sqrt(Mt*Mt+At*At),ht=Ce.x-vt/se,St=Ce.y+kt/se,It=He.x-At/$e,pt=He.y+Mt/$e,Ke=((It-ht)*At-(pt-St)*Mt)/(kt*At-vt*Mt);rt=ht+kt*Ke-ze.x,it=St+vt*Ke-ze.y;const Le=rt*rt+it*it;if(Le<=2)return new jt(rt,it);Nt=Math.sqrt(Le/2)}else{let se=!1;kt>Number.EPSILON?Mt>Number.EPSILON&&(se=!0):kt<-Number.EPSILON?Mt<-Number.EPSILON&&(se=!0):Math.sign(vt)===Math.sign(At)&&(se=!0),se?(rt=-vt,it=kt,Nt=Math.sqrt(mt)):(rt=kt,it=vt,Nt=Math.sqrt(mt/2))}return new jt(rt/Nt,it/Nt)}const J=[];for(let ze=0,Ce=he.length,He=Ce-1,rt=ze+1;ze<Ce;ze++,He++,rt++)He===Ce&&(He=0),rt===Ce&&(rt=0),J[ze]=we(he[ze],he[He],he[rt]);const re=[];let ie,fe=J.concat();for(let ze=0,Ce=Z.length;ze<Ce;ze++){const He=Z[ze];ie=[];for(let rt=0,it=He.length,Nt=it-1,kt=rt+1;rt<it;rt++,Nt++,kt++)Nt===it&&(Nt=0),kt===it&&(kt=0),ie[rt]=we(He[rt],He[Nt],He[kt]);re.push(ie),fe=fe.concat(ie)}for(let ze=0;ze<A;ze++){const Ce=ze/A,He=S*Math.cos(Ce*Math.PI/2),rt=C*Math.sin(Ce*Math.PI/2)+M;for(let it=0,Nt=he.length;it<Nt;it++){const kt=ae(he[it],J[it],rt);Re(kt.x,kt.y,-He)}for(let it=0,Nt=Z.length;it<Nt;it++){const kt=Z[it];ie=re[it];for(let vt=0,Mt=kt.length;vt<Mt;vt++){const At=ae(kt[vt],ie[vt],rt);Re(At.x,At.y,-He)}}}const Te=C+M;for(let ze=0;ze<ue;ze++){const Ce=b?ae(le[ze],fe[ze],Te):le[ze];D?(V.copy(z.normals[0]).multiplyScalar(Ce.x),U.copy(z.binormals[0]).multiplyScalar(Ce.y),H.copy(B[0]).add(V).add(U),Re(H.x,H.y,H.z)):Re(Ce.x,Ce.y,0)}for(let ze=1;ze<=g;ze++)for(let Ce=0;Ce<ue;Ce++){const He=b?ae(le[Ce],fe[Ce],Te):le[Ce];D?(V.copy(z.normals[ze]).multiplyScalar(He.x),U.copy(z.binormals[ze]).multiplyScalar(He.y),H.copy(B[ze]).add(V).add(U),Re(H.x,H.y,H.z)):Re(He.x,He.y,y/g*ze)}for(let ze=A-1;ze>=0;ze--){const Ce=ze/A,He=S*Math.cos(Ce*Math.PI/2),rt=C*Math.sin(Ce*Math.PI/2)+M;for(let it=0,Nt=he.length;it<Nt;it++){const kt=ae(he[it],J[it],rt);Re(kt.x,kt.y,y+He)}for(let it=0,Nt=Z.length;it<Nt;it++){const kt=Z[it];ie=re[it];for(let vt=0,Mt=kt.length;vt<Mt;vt++){const At=ae(kt[vt],ie[vt],rt);D?Re(At.x,At.y+B[g-1].y,B[g-1].x+He):Re(At.x,At.y,y+He)}}}Fe(),Ie();function Fe(){const ze=s.length/3;if(b){let Ce=0,He=ue*Ce;for(let rt=0;rt<ge;rt++){const it=q[rt];Qe(it[2]+He,it[1]+He,it[0]+He)}Ce=g+A*2,He=ue*Ce;for(let rt=0;rt<ge;rt++){const it=q[rt];Qe(it[0]+He,it[1]+He,it[2]+He)}}else{for(let Ce=0;Ce<ge;Ce++){const He=q[Ce];Qe(He[2],He[1],He[0])}for(let Ce=0;Ce<ge;Ce++){const He=q[Ce];Qe(He[0]+ue*g,He[1]+ue*g,He[2]+ue*g)}}r.addGroup(ze,s.length/3-ze,0)}function Ie(){const ze=s.length/3;let Ce=0;qe(he,Ce),Ce+=he.length;for(let He=0,rt=Z.length;He<rt;He++){const it=Z[He];qe(it,Ce),Ce+=it.length}r.addGroup(ze,s.length/3-ze,1)}function qe(ze,Ce){let He=ze.length;for(;--He>=0;){const rt=He;let it=He-1;it<0&&(it=ze.length-1);for(let Nt=0,kt=g+A*2;Nt<kt;Nt++){const vt=ue*Nt,Mt=ue*(Nt+1),At=Ce+rt+vt,mt=Ce+it+vt,xe=Ce+it+Mt,se=Ce+rt+Mt;nt(At,mt,xe,se)}}}function Re(ze,Ce,He){h.push(ze),h.push(Ce),h.push(He)}function Qe(ze,Ce,He){ft(ze),ft(Ce),ft(He);const rt=s.length/3,it=L.generateTopUV(r,s,rt-3,rt-2,rt-1);lt(it[0]),lt(it[1]),lt(it[2])}function nt(ze,Ce,He,rt){ft(ze),ft(Ce),ft(rt),ft(Ce),ft(He),ft(rt);const it=s.length/3,Nt=L.generateSideWallUV(r,s,it-6,it-3,it-2,it-1);lt(Nt[0]),lt(Nt[1]),lt(Nt[3]),lt(Nt[1]),lt(Nt[2]),lt(Nt[3])}function ft(ze){s.push(h[ze*3+0]),s.push(h[ze*3+1]),s.push(h[ze*3+2])}function lt(ze){o.push(ze.x),o.push(ze.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return lCe(t,r,e)}static fromJSON(e,t){const r=[];for(let o=0,l=e.shapes.length;o<l;o++){const u=t[e.shapes[o]];r.push(u)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new l4[s.type]().fromJSON(s)),new Uw(r,e.options)}}const aCe={generateTopUV:function(n,e,t,r,s){const o=e[t*3],l=e[t*3+1],u=e[r*3],h=e[r*3+1],f=e[s*3],g=e[s*3+1];return[new jt(o,l),new jt(u,h),new jt(f,g)]},generateSideWallUV:function(n,e,t,r,s,o){const l=e[t*3],u=e[t*3+1],h=e[t*3+2],f=e[r*3],g=e[r*3+1],y=e[r*3+2],b=e[s*3],S=e[s*3+1],C=e[s*3+2],M=e[o*3],A=e[o*3+1],O=e[o*3+2];return Math.abs(u-g)<Math.abs(l-f)?[new jt(l,1-h),new jt(f,1-y),new jt(b,1-C),new jt(M,1-O)]:[new jt(u,1-h),new jt(g,1-y),new jt(S,1-C),new jt(A,1-O)]}};function lCe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,s=n.length;r<s;r++){const o=n[r];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Hw extends p_{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,s=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Hw(e.radius,e.detail)}}class r0 extends p_{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new r0(e.radius,e.detail)}}class Gw extends ui{constructor(e=.5,t=1,r=8,s=1,o=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:s,thetaStart:o,thetaLength:l},r=Math.max(3,r),s=Math.max(1,s);const u=[],h=[],f=[],g=[];let y=e;const b=(t-e)/s,S=new Ae,C=new jt;for(let M=0;M<=s;M++){for(let A=0;A<=r;A++){const O=o+A/r*l;S.x=y*Math.cos(O),S.y=y*Math.sin(O),h.push(S.x,S.y,S.z),f.push(0,0,1),C.x=(S.x/t+1)/2,C.y=(S.y/t+1)/2,g.push(C.x,C.y)}y+=b}for(let M=0;M<s;M++){const A=M*(r+1);for(let O=0;O<r;O++){const L=O+A,B=L,D=L+r+1,z=L+r+2,U=L+1;u.push(B,D,U),u.push(D,z,U)}}this.setIndex(u),this.setAttribute("position",new ar(h,3)),this.setAttribute("normal",new ar(f,3)),this.setAttribute("uv",new ar(g,2))}static fromJSON(e){return new Gw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ww extends ui{constructor(e=new F1([new jt(0,.5),new jt(-.5,-.5),new jt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],s=[],o=[],l=[];let u=0,h=0;if(Array.isArray(e)===!1)f(e);else for(let g=0;g<e.length;g++)f(e[g]),this.addGroup(u,h,g),u+=h,h=0;this.setIndex(r),this.setAttribute("position",new ar(s,3)),this.setAttribute("normal",new ar(o,3)),this.setAttribute("uv",new ar(l,2));function f(g){const y=s.length/3,b=g.extractPoints(t);let S=b.shape;const C=b.holes;c_.isClockWise(S)===!1&&(S=S.reverse());for(let A=0,O=C.length;A<O;A++){const L=C[A];c_.isClockWise(L)===!0&&(C[A]=L.reverse())}const M=c_.triangulateShape(S,C);for(let A=0,O=C.length;A<O;A++){const L=C[A];S=S.concat(L)}for(let A=0,O=S.length;A<O;A++){const L=S[A];s.push(L.x,L.y,0),o.push(0,0,1),l.push(L.x,L.y)}for(let A=0,O=M.length;A<O;A++){const L=M[A],B=L[0]+y,D=L[1]+y,z=L[2]+y;r.push(B,D,z),h+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return uCe(t,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];r.push(l)}return new Ww(r,e.curveSegments)}}function uCe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const s=n[t];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e}class h0 extends ui{constructor(e=1,t=32,r=16,s=0,o=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:s,phiLength:o,thetaStart:l,thetaLength:u},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const h=Math.min(l+u,Math.PI);let f=0;const g=[],y=new Ae,b=new Ae,S=[],C=[],M=[],A=[];for(let O=0;O<=r;O++){const L=[],B=O/r;let D=0;O==0&&l==0?D=.5/t:O==r&&h==Math.PI&&(D=-.5/t);for(let z=0;z<=t;z++){const U=z/t;y.x=-e*Math.cos(s+U*o)*Math.sin(l+B*u),y.y=e*Math.cos(l+B*u),y.z=e*Math.sin(s+U*o)*Math.sin(l+B*u),C.push(y.x,y.y,y.z),b.copy(y).normalize(),M.push(b.x,b.y,b.z),A.push(U+D,1-B),L.push(f++)}g.push(L)}for(let O=0;O<r;O++)for(let L=0;L<t;L++){const B=g[O][L+1],D=g[O][L],z=g[O+1][L],U=g[O+1][L+1];(O!==0||l>0)&&S.push(B,D,U),(O!==r-1||h<Math.PI)&&S.push(D,z,U)}this.setIndex(S),this.setAttribute("position",new ar(C,3)),this.setAttribute("normal",new ar(M,3)),this.setAttribute("uv",new ar(A,2))}static fromJSON(e){return new h0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Vw extends p_{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Vw(e.radius,e.detail)}}class e0 extends ui{constructor(e=1,t=.4,r=8,s=6,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:s,arc:o},r=Math.floor(r),s=Math.floor(s);const l=[],u=[],h=[],f=[],g=new Ae,y=new Ae,b=new Ae;for(let S=0;S<=r;S++)for(let C=0;C<=s;C++){const M=C/s*o,A=S/r*Math.PI*2;y.x=(e+t*Math.cos(A))*Math.cos(M),y.y=(e+t*Math.cos(A))*Math.sin(M),y.z=t*Math.sin(A),u.push(y.x,y.y,y.z),g.x=e*Math.cos(M),g.y=e*Math.sin(M),b.subVectors(y,g).normalize(),h.push(b.x,b.y,b.z),f.push(C/s),f.push(S/r)}for(let S=1;S<=r;S++)for(let C=1;C<=s;C++){const M=(s+1)*S+C-1,A=(s+1)*(S-1)+C-1,O=(s+1)*(S-1)+C,L=(s+1)*S+C;l.push(M,A,L),l.push(A,O,L)}this.setIndex(l),this.setAttribute("position",new ar(u,3)),this.setAttribute("normal",new ar(h,3)),this.setAttribute("uv",new ar(f,2))}static fromJSON(e){return new e0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class jw extends ui{constructor(e=1,t=.4,r=64,s=8,o=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:s,p:o,q:l},r=Math.floor(r),s=Math.floor(s);const u=[],h=[],f=[],g=[],y=new Ae,b=new Ae,S=new Ae,C=new Ae,M=new Ae,A=new Ae,O=new Ae;for(let B=0;B<=r;++B){const D=B/r*o*Math.PI*2;L(D,o,l,e,S),L(D+.01,o,l,e,C),A.subVectors(C,S),O.addVectors(C,S),M.crossVectors(A,O),O.crossVectors(M,A),M.normalize(),O.normalize();for(let z=0;z<=s;++z){const U=z/s*Math.PI*2,V=-t*Math.cos(U),H=t*Math.sin(U);y.x=S.x+(V*O.x+H*M.x),y.y=S.y+(V*O.y+H*M.y),y.z=S.z+(V*O.z+H*M.z),h.push(y.x,y.y,y.z),b.subVectors(y,S).normalize(),f.push(b.x,b.y,b.z),g.push(B/r),g.push(z/s)}}for(let B=1;B<=r;B++)for(let D=1;D<=s;D++){const z=(s+1)*(B-1)+(D-1),U=(s+1)*B+(D-1),V=(s+1)*B+D,H=(s+1)*(B-1)+D;u.push(z,U,H),u.push(U,V,H)}this.setIndex(u),this.setAttribute("position",new ar(h,3)),this.setAttribute("normal",new ar(f,3)),this.setAttribute("uv",new ar(g,2));function L(B,D,z,U,V){const H=Math.cos(B),oe=Math.sin(B),le=z/D*B,Z=Math.cos(le);V.x=U*(2+Z)*.5*H,V.y=U*(2+Z)*oe*.5,V.z=U*Math.sin(le)*.5}}static fromJSON(e){return new jw(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Yw extends ui{constructor(e=new o4(new Ae(-1,-1,0),new Ae(-1,1,0),new Ae(1,1,0)),t=64,r=1,s=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:s,closed:o};const l=e.computeFrenetFrames(t,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const u=new Ae,h=new Ae,f=new jt;let g=new Ae;const y=[],b=[],S=[],C=[];M(),this.setIndex(C),this.setAttribute("position",new ar(y,3)),this.setAttribute("normal",new ar(b,3)),this.setAttribute("uv",new ar(S,2));function M(){for(let B=0;B<t;B++)A(B);A(o===!1?t:0),L(),O()}function A(B){g=e.getPointAt(B/t,g);const D=l.normals[B],z=l.binormals[B];for(let U=0;U<=s;U++){const V=U/s*Math.PI*2,H=Math.sin(V),oe=-Math.cos(V);h.x=oe*D.x+H*z.x,h.y=oe*D.y+H*z.y,h.z=oe*D.z+H*z.z,h.normalize(),b.push(h.x,h.y,h.z),u.x=g.x+r*h.x,u.y=g.y+r*h.y,u.z=g.z+r*h.z,y.push(u.x,u.y,u.z)}}function O(){for(let B=1;B<=t;B++)for(let D=1;D<=s;D++){const z=(s+1)*(B-1)+(D-1),U=(s+1)*B+(D-1),V=(s+1)*B+D,H=(s+1)*(B-1)+D;C.push(z,U,H),C.push(U,V,H)}}function L(){for(let B=0;B<=t;B++)for(let D=0;D<=s;D++)f.x=B/t,f.y=D/s,S.push(f.x,f.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Yw(new l4[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class u4 extends ui{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,s=new Ae,o=new Ae;if(e.index!==null){const l=e.attributes.position,u=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:u.count,materialIndex:0}]);for(let f=0,g=h.length;f<g;++f){const y=h[f],b=y.start,S=y.count;for(let C=b,M=b+S;C<M;C+=3)for(let A=0;A<3;A++){const O=u.getX(C+A),L=u.getX(C+(A+1)%3);s.fromBufferAttribute(l,O),o.fromBufferAttribute(l,L),y6(s,o,r)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}}else{const l=e.attributes.position;for(let u=0,h=l.count/3;u<h;u++)for(let f=0;f<3;f++){const g=3*u+f,y=3*u+(f+1)%3;s.fromBufferAttribute(l,g),o.fromBufferAttribute(l,y),y6(s,o,r)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new ar(t,3))}}}function y6(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(s)===!0?!1:(t.add(r),t.add(s),!0)}var b6=Object.freeze({__proto__:null,BoxGeometry:pu,BoxBufferGeometry:pu,CapsuleGeometry:Pw,CapsuleBufferGeometry:Pw,CircleGeometry:Bw,CircleBufferGeometry:Bw,ConeGeometry:Fw,ConeBufferGeometry:Fw,CylinderGeometry:Gl,CylinderBufferGeometry:Gl,DodecahedronGeometry:zw,DodecahedronBufferGeometry:zw,EdgesGeometry:JQ,ExtrudeGeometry:Uw,ExtrudeBufferGeometry:Uw,IcosahedronGeometry:Hw,IcosahedronBufferGeometry:Hw,LatheGeometry:tT,LatheBufferGeometry:tT,OctahedronGeometry:r0,OctahedronBufferGeometry:r0,PlaneGeometry:c0,PlaneBufferGeometry:c0,PolyhedronGeometry:p_,PolyhedronBufferGeometry:p_,RingGeometry:Gw,RingBufferGeometry:Gw,ShapeGeometry:Ww,ShapeBufferGeometry:Ww,SphereGeometry:h0,SphereBufferGeometry:h0,TetrahedronGeometry:Vw,TetrahedronBufferGeometry:Vw,TorusGeometry:e0,TorusBufferGeometry:e0,TorusKnotGeometry:jw,TorusKnotBufferGeometry:jw,TubeGeometry:Yw,TubeBufferGeometry:Yw,WireframeGeometry:u4});class eZ extends hd{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Bn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class tZ extends xd{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Q$ extends hd{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Bn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cT,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nZ extends Q${constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new jt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return hh(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Bn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Bn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Bn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class rZ extends hd{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Bn(16777215),this.specular=new Bn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cT,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=RC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iZ extends hd{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Bn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cT,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class c4 extends hd{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cT,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class sZ extends hd{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Bn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=RC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class oZ extends hd{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Bn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cT,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class aZ extends Pf{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function hg(n,e,t){return h4(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function M1(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function h4(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function lZ(n){function e(s,o){return n[s]-n[o]}const t=n.length,r=new Array(t);for(let s=0;s!==t;++s)r[s]=s;return r.sort(e),r}function OP(n,e,t){const r=n.length,s=new n.constructor(r);for(let o=0,l=0;l!==r;++o){const u=t[o]*e;for(let h=0;h!==e;++h)s[l++]=n[u+h]}return s}function d4(n,e,t,r){let s=1,o=n[0];for(;o!==void 0&&o[r]===void 0;)o=n[s++];if(o===void 0)return;let l=o[r];if(l!==void 0)if(Array.isArray(l))do l=o[r],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=n[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[r],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=n[s++];while(o!==void 0);else do l=o[r],l!==void 0&&(e.push(o.time),t.push(l)),o=n[s++];while(o!==void 0)}function cCe(n,e,t,r,s=30){const o=n.clone();o.name=e;const l=[];for(let h=0;h<o.tracks.length;++h){const f=o.tracks[h],g=f.getValueSize(),y=[],b=[];for(let S=0;S<f.times.length;++S){const C=f.times[S]*s;if(!(C<t||C>=r)){y.push(f.times[S]);for(let M=0;M<g;++M)b.push(f.values[S*g+M])}}y.length!==0&&(f.times=M1(y,f.times.constructor),f.values=M1(b,f.values.constructor),l.push(f))}o.tracks=l;let u=1/0;for(let h=0;h<o.tracks.length;++h)u>o.tracks[h].times[0]&&(u=o.tracks[h].times[0]);for(let h=0;h<o.tracks.length;++h)o.tracks[h].shift(-1*u);return o.resetDuration(),o}function hCe(n,e=0,t=n,r=30){r<=0&&(r=30);const s=t.tracks.length,o=e/r;for(let l=0;l<s;++l){const u=t.tracks[l],h=u.ValueTypeName;if(h==="bool"||h==="string")continue;const f=n.tracks.find(function(O){return O.name===u.name&&O.ValueTypeName===h});if(f===void 0)continue;let g=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);let b=0;const S=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=S/3);const C=u.times.length-1;let M;if(o<=u.times[0]){const O=g,L=y-g;M=hg(u.values,O,L)}else if(o>=u.times[C]){const O=C*y+g,L=O+y-g;M=hg(u.values,O,L)}else{const O=u.createInterpolant(),L=g,B=y-g;O.evaluate(o),M=hg(O.resultBuffer,L,B)}h==="quaternion"&&new Sl().fromArray(M).normalize().conjugate().toArray(M);const A=f.times.length;for(let O=0;O<A;++O){const L=O*S+b;if(h==="quaternion")Sl.multiplyQuaternionsFlat(f.values,L,M,0,f.values,L);else{const B=S-b*2;for(let D=0;D<B;++D)f.values[L+D]-=M[D]}}}return n.blendMode=YF,n}var dCe=Object.freeze({__proto__:null,arraySlice:hg,convertArray:M1,isTypedArray:h4,getKeyframeOrder:lZ,sortedArray:OP,flattenJSON:d4,subclip:cCe,makeClipAdditive:hCe});class PC{constructor(e,t,r,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,s=t[r],o=t[r-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=r+2;;){if(s===void 0){if(e<o)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===u)break;if(o=s,s=t[++r],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(r=2,o=u);for(let h=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===h)break;if(s=o,o=t[--r-1],e>=o)break t}l=r,r=0;break n}break e}for(;r<l;){const u=r+l>>>1;e<t[u]?l=u:r=u+1}if(s=t[r],o=t[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,s)}return this.interpolate_(r,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=r[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class uZ extends PC{constructor(e,t,r,s){super(e,t,r,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:x1,endingEnd:x1}}intervalChanged_(e,t,r){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],h=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case $1:o=e,u=2*t-r;break;case G$:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=r}if(h===void 0)switch(this.getSettings_().endingEnd){case $1:l=e,h=2*r-t;break;case G$:l=1,h=r+s[1]-s[0];break;default:l=e-1,h=t}const f=(r-t)*.5,g=this.valueSize;this._weightPrev=f/(t-u),this._weightNext=f/(h-r),this._offsetPrev=o*g,this._offsetNext=l*g}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,f=h-u,g=this._offsetPrev,y=this._offsetNext,b=this._weightPrev,S=this._weightNext,C=(r-t)/(s-t),M=C*C,A=M*C,O=-b*A+2*b*M-b*C,L=(1+b)*A+(-1.5-2*b)*M+(-.5+b)*C+1,B=(-1-S)*A+(1.5+S)*M+.5*C,D=S*A-S*M;for(let z=0;z!==u;++z)o[z]=O*l[g+z]+L*l[f+z]+B*l[h+z]+D*l[y+z];return o}}class f4 extends PC{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,f=h-u,g=(r-t)/(s-t),y=1-g;for(let b=0;b!==u;++b)o[b]=l[f+b]*y+l[h+b]*g;return o}}class cZ extends PC{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class m0{constructor(e,t,r,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=M1(t,this.TimeBufferType),this.values=M1(r,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:M1(e.times,Array),values:M1(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(r.interpolation=s)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new cZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new f4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new uZ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case U$:t=this.InterpolantFactoryMethodDiscrete;break;case H$:t=this.InterpolantFactoryMethodLinear;break;case TI:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return U$;case this.InterpolantFactoryMethodLinear:return H$;case this.InterpolantFactoryMethodSmooth:return TI}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]*=e}return this}trim(e,t){const r=this.times,s=r.length;let o=0,l=s-1;for(;o!==s&&r[o]<e;)++o;for(;l!==-1&&r[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=hg(r,o,l),this.values=hg(this.values,o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,s=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const h=r[u];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,h),e=!1;break}if(l!==null&&l>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,h,l),e=!1;break}l=h}if(s!==void 0&&h4(s))for(let u=0,h=s.length;u!==h;++u){const f=s[u];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,f),e=!1;break}}return e}optimize(){const e=hg(this.times),t=hg(this.values),r=this.getValueSize(),s=this.getInterpolation()===TI,o=e.length-1;let l=1;for(let u=1;u<o;++u){let h=!1;const f=e[u],g=e[u+1];if(f!==g&&(u!==1||f!==e[0]))if(s)h=!0;else{const y=u*r,b=y-r,S=y+r;for(let C=0;C!==r;++C){const M=t[y+C];if(M!==t[b+C]||M!==t[S+C]){h=!0;break}}}if(h){if(u!==l){e[l]=e[u];const y=u*r,b=l*r;for(let S=0;S!==r;++S)t[b+S]=t[y+S]}++l}}if(o>0){e[l]=e[o];for(let u=o*r,h=l*r,f=0;f!==r;++f)t[h+f]=t[u+f];++l}return l!==e.length?(this.times=hg(e,0,l),this.values=hg(t,0,l*r)):(this.times=e,this.values=t),this}clone(){const e=hg(this.times,0),t=hg(this.values,0),r=this.constructor,s=new r(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}m0.prototype.TimeBufferType=Float32Array;m0.prototype.ValueBufferType=Float32Array;m0.prototype.DefaultInterpolation=H$;class dT extends m0{}dT.prototype.ValueTypeName="bool";dT.prototype.ValueBufferType=Array;dT.prototype.DefaultInterpolation=U$;dT.prototype.InterpolantFactoryMethodLinear=void 0;dT.prototype.InterpolantFactoryMethodSmooth=void 0;class p4 extends m0{}p4.prototype.ValueTypeName="color";class Z$ extends m0{}Z$.prototype.ValueTypeName="number";class hZ extends PC{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=(r-t)/(s-t);let f=e*u;for(let g=f+u;f!==g;f+=4)Sl.slerpFlat(o,0,l,f-u,l,f,h);return o}}class _E extends m0{InterpolantFactoryMethodLinear(e){return new hZ(this.times,this.values,this.getValueSize(),e)}}_E.prototype.ValueTypeName="quaternion";_E.prototype.DefaultInterpolation=H$;_E.prototype.InterpolantFactoryMethodSmooth=void 0;class fT extends m0{}fT.prototype.ValueTypeName="string";fT.prototype.ValueBufferType=Array;fT.prototype.DefaultInterpolation=U$;fT.prototype.InterpolantFactoryMethodLinear=void 0;fT.prototype.InterpolantFactoryMethodSmooth=void 0;class eC extends m0{}eC.prototype.ValueTypeName="vector";class tC{constructor(e,t=-1,r,s=a2){this.name=e,this.tracks=r,this.duration=t,this.blendMode=s,this.uuid=Dm(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,s=1/(e.fps||1);for(let l=0,u=r.length;l!==u;++l)t.push(pCe(r[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],r=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=r.length;o!==l;++o)t.push(m0.toJSON(r[o]));return s}static CreateFromMorphTargetSequence(e,t,r,s){const o=t.length,l=[];for(let u=0;u<o;u++){let h=[],f=[];h.push((u+o-1)%o,u,(u+1)%o),f.push(0,1,0);const g=lZ(h);h=OP(h,1,g),f=OP(f,1,g),!s&&h[0]===0&&(h.push(o),f.push(f[0])),l.push(new Z$(".morphTargetInfluences["+t[u].name+"]",h,f).scale(1/r))}return new this(e,-1,l)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const s=e;r=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<r.length;s++)if(r[s].name===t)return r[s];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const f=e[u],g=f.name.match(o);if(g&&g.length>1){const y=g[1];let b=s[y];b||(s[y]=b=[]),b.push(f)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,r));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(g,y,b,S,C){if(b.length!==0){const M=[],A=[];d4(b,M,A,S),M.length!==0&&C.push(new g(y,M,A))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let h=e.length||-1;const f=e.hierarchy||[];for(let g=0;g<f.length;g++){const y=f[g].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const b={};let S;for(S=0;S<y.length;S++)if(y[S].morphTargets)for(let C=0;C<y[S].morphTargets.length;C++)b[y[S].morphTargets[C]]=-1;for(const C in b){const M=[],A=[];for(let O=0;O!==y[S].morphTargets.length;++O){const L=y[S];M.push(L.time),A.push(L.morphTarget===C?1:0)}s.push(new Z$(".morphTargetInfluence["+C+"]",M,A))}h=b.length*l}else{const b=".bones["+t[g].name+"]";r(eC,b+".position",y,"pos",s),r(_E,b+".quaternion",y,"rot",s),r(eC,b+".scale",y,"scl",s)}}return s.length===0?null:new this(o,h,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,s=e.length;r!==s;++r){const o=this.tracks[r];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function fCe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Z$;case"vector":case"vector2":case"vector3":case"vector4":return eC;case"color":return p4;case"quaternion":return _E;case"bool":case"boolean":return dT;case"string":return fT}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function pCe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=fCe(n.type);if(n.times===void 0){const t=[],r=[];d4(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const nT={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class m4{constructor(e,t,r){const s=this;let o=!1,l=0,u=0,h;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(g){u++,o===!1&&s.onStart!==void 0&&s.onStart(g,l,u),o=!0},this.itemEnd=function(g){l++,s.onProgress!==void 0&&s.onProgress(g,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(g){s.onError!==void 0&&s.onError(g)},this.resolveURL=function(g){return h?h(g):g},this.setURLModifier=function(g){return h=g,this},this.addHandler=function(g,y){return f.push(g,y),this},this.removeHandler=function(g){const y=f.indexOf(g);return y!==-1&&f.splice(y,2),this},this.getHandler=function(g){for(let y=0,b=f.length;y<b;y+=2){const S=f[y],C=f[y+1];if(S.global&&(S.lastIndex=0),S.test(g))return C}return null}}}const dZ=new m4;class jm{constructor(e){this.manager=e!==void 0?e:dZ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(s,o){r.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const tv={};class mCe extends Error{constructor(e,t){super(e),this.response=t}}class yv extends jm{constructor(e){super(e)}load(e,t,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=nT.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(tv[e]!==void 0){tv[e].push({onLoad:t,onProgress:r,onError:s});return}tv[e]=[],tv[e].push({onLoad:t,onProgress:r,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(l).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const g=tv[e],y=f.body.getReader(),b=f.headers.get("Content-Length"),S=b?parseInt(b):0,C=S!==0;let M=0;const A=new ReadableStream({start(O){L();function L(){y.read().then(({done:B,value:D})=>{if(B)O.close();else{M+=D.byteLength;const z=new ProgressEvent("progress",{lengthComputable:C,loaded:M,total:S});for(let U=0,V=g.length;U<V;U++){const H=g[U];H.onProgress&&H.onProgress(z)}O.enqueue(D),L()}})}}});return new Response(A)}else throw new mCe(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(h){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(g=>new DOMParser().parseFromString(g,u));case"json":return f.json();default:if(u===void 0)return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(u),y=g&&g[1]?g[1].toLowerCase():void 0,b=new TextDecoder(y);return f.arrayBuffer().then(S=>b.decode(S))}}}).then(f=>{nT.add(e,f);const g=tv[e];delete tv[e];for(let y=0,b=g.length;y<b;y++){const S=g[y];S.onLoad&&S.onLoad(f)}}).catch(f=>{const g=tv[e];if(g===void 0)throw this.manager.itemError(e),f;delete tv[e];for(let y=0,b=g.length;y<b;y++){const S=g[y];S.onError&&S.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class gCe extends jm{constructor(e){super(e)}load(e,t,r,s){const o=this,l=new yv(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},r,s)}parse(e){const t=[];for(let r=0;r<e.length;r++){const s=tC.parse(e[r]);t.push(s)}return t}}class _Ce extends jm{constructor(e){super(e)}load(e,t,r,s){const o=this,l=[],u=new WQ,h=new yv(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(o.withCredentials);let f=0;function g(y){h.load(e[y],function(b){const S=o.parse(b,!0);l[y]={width:S.width,height:S.height,format:S.format,mipmaps:S.mipmaps},f+=1,f===6&&(S.mipmapCount===1&&(u.minFilter=wl),u.image=l,u.format=S.format,u.needsUpdate=!0,t&&t(u))},r,s)}if(Array.isArray(e))for(let y=0,b=e.length;y<b;++y)g(y);else h.load(e,function(y){const b=o.parse(y,!0);if(b.isCubemap){const S=b.mipmaps.length/b.mipmapCount;for(let C=0;C<S;C++){l[C]={mipmaps:[]};for(let M=0;M<b.mipmapCount;M++)l[C].mipmaps.push(b.mipmaps[C*b.mipmapCount+M]),l[C].format=b.format,l[C].width=b.width,l[C].height=b.height}u.image=l}else u.image.width=b.width,u.image.height=b.height,u.mipmaps=b.mipmaps;b.mipmapCount===1&&(u.minFilter=wl),u.format=b.format,u.needsUpdate=!0,t&&t(u)},r,s);return u}}class nC extends jm{constructor(e){super(e)}load(e,t,r,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=nT.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=j$("img");function h(){g(),nT.add(e,this),t&&t(this),o.manager.itemEnd(e)}function f(y){g(),s&&s(y),o.manager.itemError(e),o.manager.itemEnd(e)}function g(){u.removeEventListener("load",h,!1),u.removeEventListener("error",f,!1)}return u.addEventListener("load",h,!1),u.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class vCe extends jm{constructor(e){super(e)}load(e,t,r,s){const o=new NC,l=new nC(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let u=0;function h(f){l.load(e[f],function(g){o.images[f]=g,u++,u===6&&(o.needsUpdate=!0,t&&t(o))},void 0,s)}for(let f=0;f<e.length;++f)h(f);return o}}class yCe extends jm{constructor(e){super(e)}load(e,t,r,s){const o=this,l=new vw,u=new yv(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(o.withCredentials),u.load(e,function(h){const f=o.parse(h);!f||(f.image!==void 0?l.image=f.image:f.data!==void 0&&(l.image.width=f.width,l.image.height=f.height,l.image.data=f.data),l.wrapS=f.wrapS!==void 0?f.wrapS:ap,l.wrapT=f.wrapT!==void 0?f.wrapT:ap,l.magFilter=f.magFilter!==void 0?f.magFilter:wl,l.minFilter=f.minFilter!==void 0?f.minFilter:wl,l.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.encoding!==void 0&&(l.encoding=f.encoding),f.flipY!==void 0&&(l.flipY=f.flipY),f.format!==void 0&&(l.format=f.format),f.type!==void 0&&(l.type=f.type),f.mipmaps!==void 0&&(l.mipmaps=f.mipmaps,l.minFilter=uT),f.mipmapCount===1&&(l.minFilter=wl),f.generateMipmaps!==void 0&&(l.generateMipmaps=f.generateMipmaps),l.needsUpdate=!0,t&&t(l,f))},r,s),l}}class bCe extends jm{constructor(e){super(e)}load(e,t,r,s){const o=new hc,l=new nC(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},r,s),o}}class rb extends ro{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Bn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class fZ extends rb{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ro.DefaultUp),this.updateMatrix(),this.groundColor=new Bn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const T6=new Qr,S6=new Ae,w6=new Ae;class g4{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new jt(512,512),this.map=null,this.mapPass=null,this.matrix=new Qr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new u2,this._frameExtents=new jt(1,1),this._viewportCount=1,this._viewports=[new Ts(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;S6.setFromMatrixPosition(e.matrixWorld),t.position.copy(S6),w6.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(w6),t.updateMatrixWorld(),T6.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(T6),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class TCe extends g4{constructor(){super(new Za(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=V$*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(r!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=r,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class pZ extends rb{constructor(e,t,r=0,s=Math.PI/3,o=0,l=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ro.DefaultUp),this.updateMatrix(),this.target=new ro,this.distance=r,this.angle=s,this.penumbra=o,this.decay=l,this.shadow=new TCe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const E6=new Qr,gx=new Ae,KL=new Ae;class SCe extends g4{constructor(){super(new Za(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new jt(4,2),this._viewportCount=6,this._viewports=[new Ts(2,1,1,1),new Ts(0,1,1,1),new Ts(3,1,1,1),new Ts(1,1,1,1),new Ts(3,0,1,1),new Ts(1,0,1,1)],this._cubeDirections=[new Ae(1,0,0),new Ae(-1,0,0),new Ae(0,0,1),new Ae(0,0,-1),new Ae(0,1,0),new Ae(0,-1,0)],this._cubeUps=[new Ae(0,1,0),new Ae(0,1,0),new Ae(0,1,0),new Ae(0,1,0),new Ae(0,0,1),new Ae(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,s=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),gx.setFromMatrixPosition(e.matrixWorld),r.position.copy(gx),KL.copy(r.position),KL.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(KL),r.updateMatrixWorld(),s.makeTranslation(-gx.x,-gx.y,-gx.z),E6.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(E6)}}class mZ extends rb{constructor(e,t,r=0,s=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=s,this.shadow=new SCe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class wCe extends g4{constructor(){super(new u_(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class gZ extends rb{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ro.DefaultUp),this.updateMatrix(),this.target=new ro,this.shadow=new wCe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class _Z extends rb{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class vZ extends rb{constructor(e,t,r=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class yZ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Ae)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*s),t.addScaledVector(l[2],.488603*o),t.addScaledVector(l[3],.488603*r),t.addScaledVector(l[4],1.092548*(r*s)),t.addScaledVector(l[5],1.092548*(s*o)),t.addScaledVector(l[6],.315392*(3*o*o-1)),t.addScaledVector(l[7],1.092548*(r*o)),t.addScaledVector(l[8],.546274*(r*r-s*s)),t}getIrradianceAt(e,t){const r=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*s),t.addScaledVector(l[2],2*.511664*o),t.addScaledVector(l[3],2*.511664*r),t.addScaledVector(l[4],2*.429043*r*s),t.addScaledVector(l[5],2*.429043*s*o),t.addScaledVector(l[6],.743125*o*o-.247708),t.addScaledVector(l[7],2*.429043*r*o),t.addScaledVector(l[8],.429043*(r*r-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const r=e.x,s=e.y,o=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*o,t[3]=.488603*r,t[4]=1.092548*r*s,t[5]=1.092548*s*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*r*o,t[8]=.546274*(r*r-s*s)}}class b2 extends rb{constructor(e=new yZ,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class T2 extends jm{constructor(e){super(e),this.textures={}}load(e,t,r,s){const o=this,l=new yv(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},r,s)}parse(e){const t=this.textures;function r(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const s=T2.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new Bn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==1&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const l=e.uniforms[o];switch(s.uniforms[o]={},l.type){case"t":s.uniforms[o].value=r(l.value);break;case"c":s.uniforms[o].value=new Bn().setHex(l.value);break;case"v2":s.uniforms[o].value=new jt().fromArray(l.value);break;case"v3":s.uniforms[o].value=new Ae().fromArray(l.value);break;case"v4":s.uniforms[o].value=new Ts().fromArray(l.value);break;case"m3":s.uniforms[o].value=new up().fromArray(l.value);break;case"m4":s.uniforms[o].value=new Qr().fromArray(l.value);break;default:s.uniforms[o].value=l.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const o in e.extensions)s.extensions[o]=e.extensions[o];if(e.shading!==void 0&&(s.flatShading=e.shading===1),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=r(e.map)),e.matcap!==void 0&&(s.matcap=r(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),s.normalScale=new jt().fromArray(o)}return e.displacementMap!==void 0&&(s.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new jt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=r(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:eZ,SpriteMaterial:t4,RawShaderMaterial:tZ,ShaderMaterial:xd,PointsMaterial:g2,MeshPhysicalMaterial:nZ,MeshStandardMaterial:Q$,MeshPhongMaterial:rZ,MeshToonMaterial:iZ,MeshNormalMaterial:c4,MeshLambertMaterial:sZ,MeshDepthMaterial:DC,MeshDistanceMaterial:h2,MeshBasicMaterial:f0,MeshMatcapMaterial:oZ,LineDashedMaterial:aZ,LineBasicMaterial:Pf,Material:hd};return new t[e]}}class LP{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,s=e.length;r<s;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class S2 extends ui{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class bZ extends jm{constructor(e){super(e)}load(e,t,r,s){const o=this,l=new yv(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},r,s)}parse(e){const t={},r={};function s(b,S){if(t[S]!==void 0)return t[S];const C=b.interleavedBuffers[S],M=o(b,C.buffer),A=QS(C.type,M),O=new p2(A,C.stride);return O.uuid=C.uuid,t[S]=O,O}function o(b,S){if(r[S]!==void 0)return r[S];const C=b.arrayBuffers[S],M=new Uint32Array(C).buffer;return r[S]=M,M}const l=e.isInstancedBufferGeometry?new S2:new ui,u=e.data.index;if(u!==void 0){const b=QS(u.type,u.array);l.setIndex(new Po(b,1))}const h=e.data.attributes;for(const b in h){const S=h[b];let C;if(S.isInterleavedBufferAttribute){const M=s(e.data,S.data);C=new Rm(M,S.itemSize,S.offset,S.normalized)}else{const M=QS(S.type,S.array),A=S.isInstancedBufferAttribute?eT:Po;C=new A(M,S.itemSize,S.normalized)}S.name!==void 0&&(C.name=S.name),S.usage!==void 0&&C.setUsage(S.usage),S.updateRange!==void 0&&(C.updateRange.offset=S.updateRange.offset,C.updateRange.count=S.updateRange.count),l.setAttribute(b,C)}const f=e.data.morphAttributes;if(f)for(const b in f){const S=f[b],C=[];for(let M=0,A=S.length;M<A;M++){const O=S[M];let L;if(O.isInterleavedBufferAttribute){const B=s(e.data,O.data);L=new Rm(B,O.itemSize,O.offset,O.normalized)}else{const B=QS(O.type,O.array);L=new Po(B,O.itemSize,O.normalized)}O.name!==void 0&&(L.name=O.name),C.push(L)}l.morphAttributes[b]=C}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let b=0,S=g.length;b!==S;++b){const C=g[b];l.addGroup(C.start,C.count,C.materialIndex)}const y=e.data.boundingSphere;if(y!==void 0){const b=new Ae;y.center!==void 0&&b.fromArray(y.center),l.boundingSphere=new y_(b,y.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class ECe extends jm{constructor(e){super(e)}load(e,t,r,s){const o=this,l=this.path===""?LP.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const u=new yv(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){let f=null;try{f=JSON.parse(h)}catch(y){s!==void 0&&s(y),console.error("THREE:ObjectLoader: Can't parse "+e+".",y.message);return}const g=f.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(f,t)},r,s)}async loadAsync(e,t){const r=this,s=this.path===""?LP.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new yv(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const l=await o.loadAsync(e,t),u=JSON.parse(l),h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(u)}parse(e,t){const r=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,s),l=this.parseImages(e.images,function(){t!==void 0&&t(f)}),u=this.parseTextures(e.textures,l),h=this.parseMaterials(e.materials,u),f=this.parseObject(e.object,o,h,u,r),g=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,g),t!==void 0){let y=!1;for(const b in l)if(l[b].data instanceof HTMLImageElement){y=!0;break}y===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,u,l,t),f=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,f),h}parseShapes(e){const t={};if(e!==void 0)for(let r=0,s=e.length;r<s;r++){const o=new F1().fromJSON(e[r]);t[o.uuid]=o}return t}parseSkeletons(e,t){const r={},s={};if(t.traverse(function(o){o.isBone&&(s[o.uuid]=o)}),e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=new m2().fromJSON(e[o],s);r[u.uuid]=u}return r}parseGeometries(e,t){const r={};if(e!==void 0){const s=new bZ;for(let o=0,l=e.length;o<l;o++){let u;const h=e[o];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":u=s.parse(h);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:h.type in b6?u=b6[h.type].fromJSON(h,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${h.type}"`)}u.uuid=h.uuid,h.name!==void 0&&(u.name=h.name),u.isBufferGeometry===!0&&h.userData!==void 0&&(u.userData=h.userData),r[h.uuid]=u}}return r}parseMaterials(e,t){const r={},s={};if(e!==void 0){const o=new T2;o.setTextures(t);for(let l=0,u=e.length;l<u;l++){const h=e[l];if(h.type==="MultiMaterial"){const f=[];for(let g=0;g<h.materials.length;g++){const y=h.materials[g];r[y.uuid]===void 0&&(r[y.uuid]=o.parse(y)),f.push(r[y.uuid])}s[h.uuid]=f}else r[h.uuid]===void 0&&(r[h.uuid]=o.parse(h)),s[h.uuid]=r[h.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const s=e[r],o=tC.parse(s);t[o.uuid]=o}return t}parseImages(e,t){const r=this,s={};let o;function l(h){return r.manager.itemStart(h),o.load(h,function(){r.manager.itemEnd(h)},void 0,function(){r.manager.itemError(h),r.manager.itemEnd(h)})}function u(h){if(typeof h=="string"){const f=h,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:r.resourcePath+f;return l(g)}else return h.data?{data:QS(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new m4(t);o=new nC(h),o.setCrossOrigin(this.crossOrigin);for(let f=0,g=e.length;f<g;f++){const y=e[f],b=y.url;if(Array.isArray(b)){const S=[];for(let C=0,M=b.length;C<M;C++){const A=b[C],O=u(A);O!==null&&(O instanceof HTMLImageElement?S.push(O):S.push(new vw(O.data,O.width,O.height)))}s[y.uuid]=new C1(S)}else{const S=u(y.url);s[y.uuid]=new C1(S)}}}return s}async parseImagesAsync(e){const t=this,r={};let s;async function o(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await s.loadAsync(h)}else return l.data?{data:QS(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){s=new nC(this.manager),s.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const h=e[l],f=h.url;if(Array.isArray(f)){const g=[];for(let y=0,b=f.length;y<b;y++){const S=f[y],C=await o(S);C!==null&&(C instanceof HTMLImageElement?g.push(C):g.push(new vw(C.data,C.width,C.height)))}r[h.uuid]=new C1(g)}else{const g=await o(h.url);r[h.uuid]=new C1(g)}}}return r}parseTextures(e,t){function r(o,l){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),l[o])}const s={};if(e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=e[o];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);const h=t[u.image],f=h.data;let g;Array.isArray(f)?(g=new NC,f.length===6&&(g.needsUpdate=!0)):(f&&f.data?g=new vw:g=new hc,f&&(g.needsUpdate=!0)),g.source=h,g.uuid=u.uuid,u.name!==void 0&&(g.name=u.name),u.mapping!==void 0&&(g.mapping=r(u.mapping,xCe)),u.offset!==void 0&&g.offset.fromArray(u.offset),u.repeat!==void 0&&g.repeat.fromArray(u.repeat),u.center!==void 0&&g.center.fromArray(u.center),u.rotation!==void 0&&(g.rotation=u.rotation),u.wrap!==void 0&&(g.wrapS=r(u.wrap[0],x6),g.wrapT=r(u.wrap[1],x6)),u.format!==void 0&&(g.format=u.format),u.type!==void 0&&(g.type=u.type),u.encoding!==void 0&&(g.encoding=u.encoding),u.minFilter!==void 0&&(g.minFilter=r(u.minFilter,$6)),u.magFilter!==void 0&&(g.magFilter=r(u.magFilter,$6)),u.anisotropy!==void 0&&(g.anisotropy=u.anisotropy),u.flipY!==void 0&&(g.flipY=u.flipY),u.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(g.unpackAlignment=u.unpackAlignment),u.userData!==void 0&&(g.userData=u.userData),s[u.uuid]=g}return s}parseObject(e,t,r,s,o){let l;function u(b){return t[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",b),t[b]}function h(b){if(b!==void 0){if(Array.isArray(b)){const S=[];for(let C=0,M=b.length;C<M;C++){const A=b[C];r[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),S.push(r[A])}return S}return r[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),r[b]}}function f(b){return s[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",b),s[b]}let g,y;switch(e.type){case"Scene":l=new Y$,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new Bn(e.background):l.background=f(e.background)),e.environment!==void 0&&(l.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new f2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new d2(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":l=new Za(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new u_(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new _Z(e.color,e.intensity);break;case"DirectionalLight":l=new gZ(e.color,e.intensity);break;case"PointLight":l=new mZ(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new vZ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new pZ(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new fZ(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new b2().fromJSON(e);break;case"SkinnedMesh":g=u(e.geometry),y=h(e.material),l=new zQ(g,y),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":g=u(e.geometry),y=h(e.material),l=new Un(g,y);break;case"InstancedMesh":g=u(e.geometry),y=h(e.material);const b=e.count,S=e.instanceMatrix,C=e.instanceColor;l=new UQ(g,y,b),l.instanceMatrix=new eT(new Float32Array(S.array),16),C!==void 0&&(l.instanceColor=new eT(new Float32Array(C.array),C.itemSize));break;case"LOD":l=new FQ;break;case"Line":l=new Rf(u(e.geometry),h(e.material));break;case"LineLoop":l=new HQ(u(e.geometry),h(e.material));break;case"LineSegments":l=new b_(u(e.geometry),h(e.material));break;case"PointCloud":case"Points":l=new GQ(u(e.geometry),h(e.material));break;case"Sprite":l=new BQ(h(e.material));break;case"Group":l=new ew;break;case"Bone":l=new n4;break;default:l=new ro}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const b=e.children;for(let S=0;S<b.length;S++)l.add(this.parseObject(b[S],t,r,s,o))}if(e.animations!==void 0){const b=e.animations;for(let S=0;S<b.length;S++){const C=b[S];l.animations.push(o[C])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const b=e.levels;for(let S=0;S<b.length;S++){const C=b[S],M=l.getObjectByProperty("uuid",C.object);M!==void 0&&l.addLevel(M,C.distance)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const s=t[r.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(s,r.bindMatrix)}})}}const xCe={UVMapping:o2,CubeReflectionMapping:Gy,CubeRefractionMapping:Wy,EquirectangularReflectionMapping:B$,EquirectangularRefractionMapping:F$,CubeUVReflectionMapping:pE},x6={RepeatWrapping:Lw,ClampToEdgeWrapping:ap,MirroredRepeatWrapping:z$},$6={NearestFilter:Wl,NearestMipmapNearestFilter:yR,NearestMipmapLinearFilter:bR,LinearFilter:wl,LinearMipmapNearestFilter:VF,LinearMipmapLinearFilter:uT};class $Ce extends jm{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=nT.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,fetch(e,u).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(h){nT.add(e,h),t&&t(h),o.manager.itemEnd(e)}).catch(function(h){s&&s(h),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}let wA;const _4={getContext:function(){return wA===void 0&&(wA=new(window.AudioContext||window.webkitAudioContext)),wA},setContext:function(n){wA=n}};class CCe extends jm{constructor(e){super(e)}load(e,t,r,s){const o=this,l=new yv(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{const h=u.slice(0);_4.getContext().decodeAudioData(h,function(f){t(f)})}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},r,s)}}class MCe extends b2{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const s=new Bn().set(e),o=new Bn().set(t),l=new Ae(s.r,s.g,s.b),u=new Ae(o.r,o.g,o.b),h=Math.sqrt(Math.PI),f=h*Math.sqrt(.75);this.sh.coefficients[0].copy(l).add(u).multiplyScalar(h),this.sh.coefficients[1].copy(l).sub(u).multiplyScalar(f)}}class ACe extends b2{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new Bn().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const C6=new Qr,M6=new Qr,Yb=new Qr;class ICe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Za,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Za,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Yb.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(D1*t.fov*.5)/t.zoom;let l,u;M6.elements[12]=-r,C6.elements[12]=r,l=-o*t.aspect+s,u=o*t.aspect+s,Yb.elements[0]=2*t.near/(u-l),Yb.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(Yb),l=-o*t.aspect-s,u=o*t.aspect-s,Yb.elements[0]=2*t.near/(u-l),Yb.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(Yb)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(M6),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(C6)}}class v4{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=A6(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=A6();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function A6(){return(typeof performance>"u"?Date:performance).now()}const Xb=new Ae,I6=new Sl,RCe=new Ae,Kb=new Ae;class kCe extends ro{constructor(){super(),this.type="AudioListener",this.context=_4.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new v4}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Xb,I6,RCe),Kb.set(0,0,-1).applyQuaternion(I6),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Xb.x,s),t.positionY.linearRampToValueAtTime(Xb.y,s),t.positionZ.linearRampToValueAtTime(Xb.z,s),t.forwardX.linearRampToValueAtTime(Kb.x,s),t.forwardY.linearRampToValueAtTime(Kb.y,s),t.forwardZ.linearRampToValueAtTime(Kb.z,s),t.upX.linearRampToValueAtTime(r.x,s),t.upY.linearRampToValueAtTime(r.y,s),t.upZ.linearRampToValueAtTime(r.z,s)}else t.setPosition(Xb.x,Xb.y,Xb.z),t.setOrientation(Kb.x,Kb.y,Kb.z,r.x,r.y,r.z)}}class TZ extends ro{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Jb=new Ae,R6=new Sl,OCe=new Ae,qb=new Ae;class LCe extends TZ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Jb,R6,OCe),qb.set(0,0,1).applyQuaternion(R6);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Jb.x,r),t.positionY.linearRampToValueAtTime(Jb.y,r),t.positionZ.linearRampToValueAtTime(Jb.z,r),t.orientationX.linearRampToValueAtTime(qb.x,r),t.orientationY.linearRampToValueAtTime(qb.y,r),t.orientationZ.linearRampToValueAtTime(qb.z,r)}else t.setPosition(Jb.x,Jb.y,Jb.z),t.setOrientation(qb.x,qb.y,qb.z)}}class NCe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class SZ{constructor(e,t,r){this.binding=e,this.valueSize=r;let s,o,l;switch(t){case"quaternion":s=this._slerp,o=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":s=this._select,o=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:s=this._lerp,o=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=o,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,s=this.valueSize,o=e*s+s;let l=this.cumulativeWeight;if(l===0){for(let u=0;u!==s;++u)r[o+u]=r[u];l=t}else{l+=t;const u=t/l;this._mixBufferRegion(r,o,0,u,s)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,s=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,s=e*t+t,o=this.cumulativeWeight,l=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const h=t*this._origIndex;this._mixBufferRegion(r,s,h,1-o,t)}l>0&&this._mixBufferRegionAdditive(r,s,this._addIndex*t,1,t);for(let h=t,f=t+t;h!==f;++h)if(r[h]!==r[h+t]){u.setValue(r,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,s=r*this._origIndex;e.getValue(t,s);for(let o=r,l=s;o!==l;++o)t[o]=t[s+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,s,o){if(s>=.5)for(let l=0;l!==o;++l)e[t+l]=e[r+l]}_slerp(e,t,r,s){Sl.slerpFlat(e,t,e,t,e,r,s)}_slerpAdditive(e,t,r,s,o){const l=this._workIndex*o;Sl.multiplyQuaternionsFlat(e,l,e,t,e,r),Sl.slerpFlat(e,t,e,t,e,l,s)}_lerp(e,t,r,s,o){const l=1-s;for(let u=0;u!==o;++u){const h=t+u;e[h]=e[h]*l+e[r+u]*s}}_lerpAdditive(e,t,r,s,o){for(let l=0;l!==o;++l){const u=t+l;e[u]=e[u]+e[r+l]*s}}}const y4="\\[\\]\\.:\\/",DCe=new RegExp("["+y4+"]","g"),b4="[^"+y4+"]",PCe="[^"+y4.replace("\\.","")+"]",BCe=/((?:WC+[\/:])*)/.source.replace("WC",b4),FCe=/(WCOD+)?/.source.replace("WCOD",PCe),zCe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",b4),UCe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",b4),HCe=new RegExp("^"+BCe+FCe+zCe+UCe+"$"),GCe=["material","materials","bones"];class WCe{constructor(e,t,r){const s=r||So.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,s=this._bindings[r];s!==void 0&&s.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=r.length;s!==o;++s)r[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class So{constructor(e,t,r){this.path=t,this.parsedPath=r||So.parseTrackName(t),this.node=So.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new So.Composite(e,t,r):new So(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(DCe,"")}static parseTrackName(e){const t=HCe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=r.nodeName.substring(s+1);GCe.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const h=r(u.children);if(h)return h}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[t++]=r[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=So.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let f=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===f){f=g;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const l=e[s];if(l===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}So.Composite=WCe;So.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};So.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};So.prototype.GetterByBindingType=[So.prototype._getValue_direct,So.prototype._getValue_array,So.prototype._getValue_arrayElement,So.prototype._getValue_toArray];So.prototype.SetterByBindingTypeAndVersioning=[[So.prototype._setValue_direct,So.prototype._setValue_direct_setNeedsUpdate,So.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[So.prototype._setValue_array,So.prototype._setValue_array_setNeedsUpdate,So.prototype._setValue_array_setMatrixWorldNeedsUpdate],[So.prototype._setValue_arrayElement,So.prototype._setValue_arrayElement_setNeedsUpdate,So.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[So.prototype._setValue_fromArray,So.prototype._setValue_fromArray_setNeedsUpdate,So.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class VCe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Dm(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,s=arguments.length;r!==s;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length;let u,h=e.length,f=this.nCachedObjects_;for(let g=0,y=arguments.length;g!==y;++g){const b=arguments[g],S=b.uuid;let C=t[S];if(C===void 0){C=h++,t[S]=C,e.push(b);for(let M=0,A=l;M!==A;++M)o[M].push(new So(b,r[M],s[M]))}else if(C<f){u=e[C];const M=--f,A=e[M];t[A.uuid]=C,e[C]=A,t[S]=M,e[M]=b;for(let O=0,L=l;O!==L;++O){const B=o[O],D=B[M];let z=B[C];B[C]=D,z===void 0&&(z=new So(b,r[O],s[O])),B[M]=z}}else e[C]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,s=r.length;let o=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],f=h.uuid,g=t[f];if(g!==void 0&&g>=o){const y=o++,b=e[y];t[b.uuid]=g,e[g]=b,t[f]=y,e[y]=h;for(let S=0,C=s;S!==C;++S){const M=r[S],A=M[y],O=M[g];M[g]=A,M[y]=O}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,s=r.length;let o=this.nCachedObjects_,l=e.length;for(let u=0,h=arguments.length;u!==h;++u){const f=arguments[u],g=f.uuid,y=t[g];if(y!==void 0)if(delete t[g],y<o){const b=--o,S=e[b],C=--l,M=e[C];t[S.uuid]=y,e[y]=S,t[M.uuid]=b,e[b]=M,e.pop();for(let A=0,O=s;A!==O;++A){const L=r[A],B=L[b],D=L[C];L[y]=B,L[b]=D,L.pop()}}else{const b=--l,S=e[b];b>0&&(t[S.uuid]=y),e[y]=S,e.pop();for(let C=0,M=s;C!==M;++C){const A=r[C];A[y]=A[b],A.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const r=this._bindingsIndicesByPath;let s=r[e];const o=this._bindings;if(s!==void 0)return o[s];const l=this._paths,u=this._parsedPaths,h=this._objects,f=h.length,g=this.nCachedObjects_,y=new Array(f);s=o.length,r[e]=s,l.push(e),u.push(t),o.push(y);for(let b=g,S=h.length;b!==S;++b){const C=h[b];y[b]=new So(C,e,t)}return y}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const s=this._paths,o=this._parsedPaths,l=this._bindings,u=l.length-1,h=l[u],f=e[u];t[f]=r,l[r]=h,l.pop(),o[r]=o[u],o.pop(),s[r]=s[u],s.pop()}}}class jCe{constructor(e,t,r=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=s;const o=t.tracks,l=o.length,u=new Array(l),h={endingStart:x1,endingEnd:x1};for(let f=0;f!==l;++f){const g=o[f].createInterpolant(null);u[f]=g,g.settings=h}this._interpolantSettings=h,this._interpolants=u,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vQ,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const s=this._clip.duration,o=e._clip.duration,l=o/s,u=s/o;e.warp(1,l,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const s=this._mixer,o=s.time,l=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=s._lendControlInterpolant(),this._timeScaleInterpolant=u);const h=u.parameterPositions,f=u.sampleValues;return h[0]=o,h[1]=o+r,f[0]=e/l,f[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,s){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const h=(e-o)*r;if(h<0||r===0)return;this._startTime=null,t=r*h}t*=this._updateTimeScale(e);const l=this._updateTime(t),u=this._updateWeight(e);if(u>0){const h=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case YF:for(let g=0,y=h.length;g!==y;++g)h[g].evaluate(l),f[g].accumulateAdditive(u);break;case a2:default:for(let g=0,y=h.length;g!==y;++g)h[g].evaluate(l),f[g].accumulate(s,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const s=r.evaluate(e)[0];t*=s,e>r.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let s=this.time+e,o=this._loopCount;const l=r===yQ;if(e===0)return o===-1?s:l&&(o&1)===1?t-s:s;if(r===_Q){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),s>=t||s<0){const u=Math.floor(s/t);s-=t*u,o+=Math.abs(u);const h=this.repetitions-o;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const f=e<0;this._setEndings(f,!f,l)}else this._setEndings(!1,!1,l);this._loopCount=o,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=s;if(l&&(o&1)===1)return t-s}return s}_setEndings(e,t,r){const s=this._interpolantSettings;r?(s.endingStart=$1,s.endingEnd=$1):(e?s.endingStart=this.zeroSlopeAtStart?$1:x1:s.endingStart=G$,t?s.endingEnd=this.zeroSlopeAtEnd?$1:x1:s.endingEnd=G$)}_scheduleFading(e,t,r){const s=this._mixer,o=s.time;let l=this._weightInterpolant;l===null&&(l=s._lendControlInterpolant(),this._weightInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=o,h[0]=t,u[1]=o+e,h[1]=r,this}}const YCe=new Float32Array(1);class XCe extends Vm{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,s=e._clip.tracks,o=s.length,l=e._propertyBindings,u=e._interpolants,h=r.uuid,f=this._bindingsByRootAndName;let g=f[h];g===void 0&&(g={},f[h]=g);for(let y=0;y!==o;++y){const b=s[y],S=b.name;let C=g[S];if(C!==void 0)++C.referenceCount,l[y]=C;else{if(C=l[y],C!==void 0){C._cacheIndex===null&&(++C.referenceCount,this._addInactiveBinding(C,h,S));continue}const M=t&&t._propertyBindings[y].binding.parsedPath;C=new SZ(So.create(r,S,M),b.ValueTypeName,b.getValueSize()),++C.referenceCount,this._addInactiveBinding(C,h,S),l[y]=C}u[y].resultBuffer=C.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,s=e._clip.uuid,o=this._actionsByClip[s];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,s,r)}const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const o=t[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const o=t[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const s=this._actions,o=this._actionsByClip;let l=o[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=l;else{const u=l.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=s.length,s.push(e),l.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],s=e._cacheIndex;r._cacheIndex=s,t[s]=r,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,l=this._actionsByClip,u=l[o],h=u.knownActions,f=h[h.length-1],g=e._byClipCacheIndex;f._byClipCacheIndex=g,h[g]=f,h.pop(),e._byClipCacheIndex=null;const y=u.actionByRoot,b=(e._localRoot||this._root).uuid;delete y[b],h.length===0&&delete l[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const o=t[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,s=this._nActiveActions++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=r,t[r]=o}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,s=--this._nActiveActions,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=r,t[r]=o}_addInactiveBinding(e,t,r){const s=this._bindingsByRootAndName,o=this._bindings;let l=s[t];l===void 0&&(l={},s[t]=l),l[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,s=r.rootNode.uuid,o=r.path,l=this._bindingsByRootAndName,u=l[s],h=t[t.length-1],f=e._cacheIndex;h._cacheIndex=f,t[f]=h,t.pop(),delete u[o],Object.keys(u).length===0&&delete l[s]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,s=this._nActiveBindings++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=r,t[r]=o}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,s=--this._nActiveBindings,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=r,t[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new f4(new Float32Array(2),new Float32Array(2),1,YCe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,s=--this._nActiveControlInterpolants,o=t[s];e.__cacheIndex=s,t[s]=e,o.__cacheIndex=r,t[r]=o}clipAction(e,t,r){const s=t||this._root,o=s.uuid;let l=typeof e=="string"?tC.findByName(s,e):e;const u=l!==null?l.uuid:e,h=this._actionsByClip[u];let f=null;if(r===void 0&&(l!==null?r=l.blendMode:r=a2),h!==void 0){const y=h.actionByRoot[o];if(y!==void 0&&y.blendMode===r)return y;f=h.knownActions[0],l===null&&(l=f._clip)}if(l===null)return null;const g=new jCe(this,l,t,r);return this._bindAction(g,f),this._addInactiveAction(g,u,o),g}existingAction(e,t){const r=t||this._root,s=r.uuid,o=typeof e=="string"?tC.findByName(r,e):e,l=o?o.uuid:e,u=this._actionsByClip[l];return u!==void 0&&u.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,s=this.time+=e,o=Math.sign(e),l=this._accuIndex^=1;for(let f=0;f!==r;++f)t[f]._update(s,e,o,l);const u=this._bindings,h=this._nActiveBindings;for(let f=0;f!==h;++f)u[f].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,s=this._actionsByClip,o=s[r];if(o!==void 0){const l=o.knownActions;for(let u=0,h=l.length;u!==h;++u){const f=l[u];this._deactivateAction(f);const g=f._cacheIndex,y=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,y._cacheIndex=g,t[g]=y,t.pop(),this._removeInactiveBindingsForAction(f)}delete s[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const l in r){const u=r[l].actionByRoot,h=u[t];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const s=this._bindingsByRootAndName,o=s[t];if(o!==void 0)for(const l in o){const u=o[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class no{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new no(this.value.clone===void 0?this.value:this.value.clone())}}let KCe=0;class JCe extends Vm{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:KCe++}),this.name="",this.usage=W$,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,s=t.length;r<s;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class wR extends p2{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class qCe{constructor(e,t,r,s,o){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=s,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class T4{constructor(e,t,r=0,s=1/0){this.ray=new OC(e,t),this.near=r,this.far=s,this.camera=null,this.layers=new B1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return NP(e,this,r,t),r.sort(k6),r}intersectObjects(e,t=!0,r=[]){for(let s=0,o=e.length;s<o;s++)NP(e[s],this,r,t);return r.sort(k6),r}}function k6(n,e){return n.distance-e.distance}function NP(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const s=n.children;for(let o=0,l=s.length;o<l;o++)NP(s[o],e,t,!0)}}class DP{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(hh(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class QCe{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const O6=new jt;class ZCe{constructor(e=new jt(1/0,1/0),t=new jt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=O6.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return O6.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const L6=new Ae,EA=new Ae;class S4{constructor(e=new Ae,t=new Ae){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){L6.subVectors(e,this.start),EA.subVectors(this.end,this.start);const r=EA.dot(EA);let s=EA.dot(L6)/r;return t&&(s=hh(s,0,1)),s}closestPointToPoint(e,t,r){const s=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const N6=new Ae;class eMe extends ro{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const r=new ui,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,u=1,h=32;l<h;l++,u++){const f=l/h*Math.PI*2,g=u/h*Math.PI*2;s.push(Math.cos(f),Math.sin(f),1,Math.cos(g),Math.sin(g),1)}r.setAttribute("position",new ar(s,3));const o=new Pf({fog:!1,toneMapped:!1});this.cone=new b_(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),N6.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(N6),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const hy=new Ae,xA=new Qr,JL=new Qr;class tMe extends b_{constructor(e){const t=wZ(e),r=new ui,s=[],o=[],l=new Bn(0,0,1),u=new Bn(0,1,0);for(let f=0;f<t.length;f++){const g=t[f];g.parent&&g.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(l.r,l.g,l.b),o.push(u.r,u.g,u.b))}r.setAttribute("position",new ar(s,3)),r.setAttribute("color",new ar(o,3));const h=new Pf({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,h),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,s=r.getAttribute("position");JL.copy(this.root.matrixWorld).invert();for(let o=0,l=0;o<t.length;o++){const u=t[o];u.parent&&u.parent.isBone&&(xA.multiplyMatrices(JL,u.matrixWorld),hy.setFromMatrixPosition(xA),s.setXYZ(l,hy.x,hy.y,hy.z),xA.multiplyMatrices(JL,u.parent.matrixWorld),hy.setFromMatrixPosition(xA),s.setXYZ(l+1,hy.x,hy.y,hy.z),l+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function wZ(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,wZ(n.children[t]));return e}class nMe extends Un{constructor(e,t,r){const s=new h0(t,4,2),o=new f0({wireframe:!0,fog:!1,toneMapped:!1});super(s,o),this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const rMe=new Ae,D6=new Bn,P6=new Bn;class iMe extends ro{constructor(e,t,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;const s=new r0(t);s.rotateY(Math.PI*.5),this.material=new f0({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=s.getAttribute("position"),l=new Float32Array(o.count*3);s.setAttribute("color",new Po(l,3)),this.add(new Un(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");D6.copy(this.light.color),P6.copy(this.light.groundColor);for(let r=0,s=t.count;r<s;r++){const o=r<s/2?D6:P6;t.setXYZ(r,o.r,o.g,o.b)}t.needsUpdate=!0}e.lookAt(rMe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class sMe extends b_{constructor(e=10,t=10,r=4473924,s=8947848){r=new Bn(r),s=new Bn(s);const o=t/2,l=e/t,u=e/2,h=[],f=[];for(let b=0,S=0,C=-u;b<=t;b++,C+=l){h.push(-u,0,C,u,0,C),h.push(C,0,-u,C,0,u);const M=b===o?r:s;M.toArray(f,S),S+=3,M.toArray(f,S),S+=3,M.toArray(f,S),S+=3,M.toArray(f,S),S+=3}const g=new ui;g.setAttribute("position",new ar(h,3)),g.setAttribute("color",new ar(f,3));const y=new Pf({vertexColors:!0,toneMapped:!1});super(g,y),this.type="GridHelper"}}class oMe extends b_{constructor(e=10,t=16,r=8,s=64,o=4473924,l=8947848){o=new Bn(o),l=new Bn(l);const u=[],h=[];for(let y=0;y<=t;y++){const b=y/t*(Math.PI*2),S=Math.sin(b)*e,C=Math.cos(b)*e;u.push(0,0,0),u.push(S,0,C);const M=y&1?o:l;h.push(M.r,M.g,M.b),h.push(M.r,M.g,M.b)}for(let y=0;y<=r;y++){const b=y&1?o:l,S=e-e/r*y;for(let C=0;C<s;C++){let M=C/s*(Math.PI*2),A=Math.sin(M)*S,O=Math.cos(M)*S;u.push(A,0,O),h.push(b.r,b.g,b.b),M=(C+1)/s*(Math.PI*2),A=Math.sin(M)*S,O=Math.cos(M)*S,u.push(A,0,O),h.push(b.r,b.g,b.b)}}const f=new ui;f.setAttribute("position",new ar(u,3)),f.setAttribute("color",new ar(h,3));const g=new Pf({vertexColors:!0,toneMapped:!1});super(f,g),this.type="PolarGridHelper"}}const B6=new Ae,$A=new Ae,F6=new Ae;class aMe extends ro{constructor(e,t,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t===void 0&&(t=1);let s=new ui;s.setAttribute("position",new ar([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new Pf({fog:!1,toneMapped:!1});this.lightPlane=new Rf(s,o),this.add(this.lightPlane),s=new ui,s.setAttribute("position",new ar([0,0,0,0,0,1],3)),this.targetLine=new Rf(s,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){B6.setFromMatrixPosition(this.light.matrixWorld),$A.setFromMatrixPosition(this.light.target.matrixWorld),F6.subVectors($A,B6),this.lightPlane.lookAt($A),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt($A),this.targetLine.scale.z=F6.length()}}const CA=new Ae,Ic=new mE;class lMe extends b_{constructor(e){const t=new ui,r=new Pf({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],o=[],l={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(C,M){h(C),h(M)}function h(C){s.push(0,0,0),o.push(0,0,0),l[C]===void 0&&(l[C]=[]),l[C].push(s.length/3-1)}t.setAttribute("position",new ar(s,3)),t.setAttribute("color",new ar(o,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const f=new Bn(16755200),g=new Bn(16711680),y=new Bn(43775),b=new Bn(16777215),S=new Bn(3355443);this.setColors(f,g,y,b,S)}setColors(e,t,r,s,o){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,r.r,r.g,r.b),l.setXYZ(33,r.r,r.g,r.b),l.setXYZ(34,r.r,r.g,r.b),l.setXYZ(35,r.r,r.g,r.b),l.setXYZ(36,r.r,r.g,r.b),l.setXYZ(37,r.r,r.g,r.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,o.r,o.g,o.b),l.setXYZ(41,o.r,o.g,o.b),l.setXYZ(42,o.r,o.g,o.b),l.setXYZ(43,o.r,o.g,o.b),l.setXYZ(44,o.r,o.g,o.b),l.setXYZ(45,o.r,o.g,o.b),l.setXYZ(46,o.r,o.g,o.b),l.setXYZ(47,o.r,o.g,o.b),l.setXYZ(48,o.r,o.g,o.b),l.setXYZ(49,o.r,o.g,o.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,s=1;Ic.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),lh("c",t,e,Ic,0,0,-1),lh("t",t,e,Ic,0,0,1),lh("n1",t,e,Ic,-r,-s,-1),lh("n2",t,e,Ic,r,-s,-1),lh("n3",t,e,Ic,-r,s,-1),lh("n4",t,e,Ic,r,s,-1),lh("f1",t,e,Ic,-r,-s,1),lh("f2",t,e,Ic,r,-s,1),lh("f3",t,e,Ic,-r,s,1),lh("f4",t,e,Ic,r,s,1),lh("u1",t,e,Ic,r*.7,s*1.1,-1),lh("u2",t,e,Ic,-r*.7,s*1.1,-1),lh("u3",t,e,Ic,0,s*2,-1),lh("cf1",t,e,Ic,-r,0,1),lh("cf2",t,e,Ic,r,0,1),lh("cf3",t,e,Ic,0,-s,1),lh("cf4",t,e,Ic,0,s,1),lh("cn1",t,e,Ic,-r,0,-1),lh("cn2",t,e,Ic,r,0,-1),lh("cn3",t,e,Ic,0,-s,-1),lh("cn4",t,e,Ic,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function lh(n,e,t,r,s,o,l){CA.set(s,o,l).unproject(r);const u=e[n];if(u!==void 0){const h=t.getAttribute("position");for(let f=0,g=u.length;f<g;f++)h.setXYZ(u[f],CA.x,CA.y,CA.z)}}const MA=new d0;class uMe extends b_{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),o=new ui;o.setIndex(new Po(r,1)),o.setAttribute("position",new Po(s,3)),super(o,new Pf({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&MA.setFromObject(this.object),MA.isEmpty())return;const t=MA.min,r=MA.max,s=this.geometry.attributes.position,o=s.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=t.x,o[4]=r.y,o[5]=r.z,o[6]=t.x,o[7]=t.y,o[8]=r.z,o[9]=r.x,o[10]=t.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=t.z,o[15]=t.x,o[16]=r.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=r.x,o[22]=t.y,o[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}}class cMe extends b_{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new ui;o.setIndex(new Po(r,1)),o.setAttribute("position",new ar(s,3)),super(o,new Pf({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class hMe extends Rf{constructor(e,t=1,r=16776960){const s=r,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new ui;l.setAttribute("position",new ar(o,3)),l.computeBoundingSphere(),super(l,new Pf({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new ui;h.setAttribute("position",new ar(u,3)),h.computeBoundingSphere(),this.add(new Un(h,new f0({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}}const z6=new Ae;let AA,qL;class dMe extends ro{constructor(e=new Ae(0,0,1),t=new Ae(0,0,0),r=1,s=16776960,o=r*.2,l=o*.2){super(),this.type="ArrowHelper",AA===void 0&&(AA=new ui,AA.setAttribute("position",new ar([0,0,0,0,1,0],3)),qL=new Gl(0,.5,1,5,1),qL.translate(0,-.5,0)),this.position.copy(t),this.line=new Rf(AA,new Pf({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Un(qL,new f0({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,o,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{z6.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(z6,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class fMe extends b_{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new ui;s.setAttribute("position",new ar(t,3)),s.setAttribute("color",new ar(r,3));const o=new Pf({vertexColors:!0,toneMapped:!1});super(s,o),this.type="AxesHelper"}setColors(e,t,r){const s=new Bn,o=this.geometry.attributes.color.array;return s.set(e),s.toArray(o,0),s.toArray(o,3),s.set(t),s.toArray(o,6),s.toArray(o,9),s.set(r),s.toArray(o,12),s.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class pMe{constructor(){this.type="ShapePath",this.color=new Bn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new X$,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,s){return this.currentPath.quadraticCurveTo(e,t,r,s),this}bezierCurveTo(e,t,r,s,o,l){return this.currentPath.bezierCurveTo(e,t,r,s,o,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(L){const B=[];for(let D=0,z=L.length;D<z;D++){const U=L[D],V=new F1;V.curves=U.curves,B.push(V)}return B}function s(L,B){const D=B.length;let z=!1;for(let U=D-1,V=0;V<D;U=V++){let H=B[U],oe=B[V],le=oe.x-H.x,Z=oe.y-H.y;if(Math.abs(Z)>Number.EPSILON){if(Z<0&&(H=B[V],le=-le,oe=B[U],Z=-Z),L.y<H.y||L.y>oe.y)continue;if(L.y===H.y){if(L.x===H.x)return!0}else{const q=Z*(L.x-H.x)-le*(L.y-H.y);if(q===0)return!0;if(q<0)continue;z=!z}}else{if(L.y!==H.y)continue;if(oe.x<=L.x&&L.x<=H.x||H.x<=L.x&&L.x<=oe.x)return!0}}return z}const o=c_.isClockWise,l=this.subPaths;if(l.length===0)return[];if(t===!0)return r(l);let u,h,f;const g=[];if(l.length===1)return h=l[0],f=new F1,f.curves=h.curves,g.push(f),g;let y=!o(l[0].getPoints());y=e?!y:y;const b=[],S=[];let C=[],M=0,A;S[M]=void 0,C[M]=[];for(let L=0,B=l.length;L<B;L++)h=l[L],A=h.getPoints(),u=o(A),u=e?!u:u,u?(!y&&S[M]&&M++,S[M]={s:new F1,p:A},S[M].s.curves=h.curves,y&&M++,C[M]=[]):C[M].push({h,p:A[0]});if(!S[0])return r(l);if(S.length>1){let L=!1,B=0;for(let D=0,z=S.length;D<z;D++)b[D]=[];for(let D=0,z=S.length;D<z;D++){const U=C[D];for(let V=0;V<U.length;V++){const H=U[V];let oe=!0;for(let le=0;le<S.length;le++)s(H.p,S[le].p)&&(D!==le&&B++,oe?(oe=!1,b[le].push(H)):L=!0);oe&&b[D].push(H)}}B>0&&L===!1&&(C=b)}let O;for(let L=0,B=S.length;L<B;L++){f=S[L].s,g.push(f),O=C[L];for(let D=0,z=O.length;D<z;D++)f.holes.push(O[D].h)}return g}}const av=mMe();function mMe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),s=new Uint32Array(512);for(let h=0;h<256;++h){const f=h-127;f<-27?(r[h]=0,r[h|256]=32768,s[h]=24,s[h|256]=24):f<-14?(r[h]=1024>>-f-14,r[h|256]=1024>>-f-14|32768,s[h]=-f-1,s[h|256]=-f-1):f<=15?(r[h]=f+15<<10,r[h|256]=f+15<<10|32768,s[h]=13,s[h|256]=13):f<128?(r[h]=31744,r[h|256]=64512,s[h]=24,s[h|256]=24):(r[h]=31744,r[h|256]=64512,s[h]=13,s[h|256]=13)}const o=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let h=1;h<1024;++h){let f=h<<13,g=0;for(;!(f&8388608);)f<<=1,g-=8388608;f&=-8388609,g+=947912704,o[h]=f|g}for(let h=1024;h<2048;++h)o[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)l[h]=h<<23;l[31]=1199570944,l[32]=2147483648;for(let h=33;h<63;++h)l[h]=2147483648+(h-32<<23);l[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(u[h]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:s,mantissaTable:o,exponentTable:l,offsetTable:u}}function gMe(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=hh(n,-65504,65504),av.floatView[0]=n;const e=av.uint32View[0],t=e>>23&511;return av.baseTable[t]+((e&8388607)>>av.shiftTable[t])}function _Me(n){const e=n>>10;return av.uint32View[0]=av.mantissaTable[av.offsetTable[e]+(n&1023)]+av.exponentTable[e],av.floatView[0]}var vMe=Object.freeze({__proto__:null,toHalfFloat:gMe,fromHalfFloat:_Me});class yMe extends ui{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}}class bMe extends ui{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}}function TMe(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function SMe(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function wMe(){console.error("THREE.ImmediateRenderObject has been removed.")}class EMe extends Nc{constructor(e,t,r){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,r),this.samples=4}}class xMe extends kC{constructor(e,t,r,s){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,r,s)}}class $Me extends l2{constructor(e,t,r,s){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:fE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=fE);const CMe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:WF,AddEquation:p1,AddOperation:qq,AdditiveAnimationBlendMode:YF,AdditiveBlending:_R,AlphaFormat:aQ,AlwaysDepth:Wq,AlwaysStencilFunc:TQ,AmbientLight:_Z,AmbientLightProbe:ACe,AnimationClip:tC,AnimationLoader:gCe,AnimationMixer:XCe,AnimationObjectGroup:VCe,AnimationUtils:dCe,ArcCurve:VQ,ArrayCamera:NQ,ArrowHelper:dMe,Audio:TZ,AudioAnalyser:NCe,AudioContext:_4,AudioListener:kCe,AudioLoader:CCe,AxesHelper:fMe,BackSide:cd,BasicDepthPacking:nb,BasicShadowMap:Iq,Bone:n4,BooleanKeyframeTrack:dT,Box2:ZCe,Box3:d0,Box3Helper:cMe,BoxBufferGeometry:pu,BoxGeometry:pu,BoxHelper:uMe,BufferAttribute:Po,BufferGeometry:ui,BufferGeometryLoader:bZ,ByteType:nQ,Cache:nT,Camera:mE,CameraHelper:lMe,CanvasTexture:D$e,CapsuleBufferGeometry:Pw,CapsuleGeometry:Pw,CatmullRomCurve3:jQ,CineonToneMapping:eQ,CircleBufferGeometry:Bw,CircleGeometry:Bw,ClampToEdgeWrapping:ap,Clock:v4,Color:Bn,ColorKeyframeTrack:p4,ColorManagement:lg,CompressedTexture:WQ,CompressedTextureLoader:_Ce,ConeBufferGeometry:Fw,ConeGeometry:Fw,CubeCamera:$Q,CubeReflectionMapping:Gy,CubeRefractionMapping:Wy,CubeTexture:NC,CubeTextureLoader:vCe,CubeUVReflectionMapping:pE,CubicBezierCurve:i4,CubicBezierCurve3:YQ,CubicInterpolant:uZ,CullFaceBack:eP,CullFaceFront:Aq,CullFaceFrontBack:U1e,CullFaceNone:Mq,Curve:p0,CurvePath:KQ,CustomBlending:kq,CustomToneMapping:tQ,CylinderBufferGeometry:Gl,CylinderGeometry:Gl,Cylindrical:QCe,Data3DTexture:l2,DataArrayTexture:kC,DataTexture:vw,DataTexture2DArray:xMe,DataTexture3D:$Me,DataTextureLoader:yCe,DataUtils:vMe,DecrementStencilOp:eTe,DecrementWrapStencilOp:nTe,DefaultLoadingManager:dZ,DepthFormat:By,DepthStencilFormat:Vy,DepthTexture:ZF,DirectionalLight:gZ,DirectionalLightHelper:aMe,DiscreteInterpolant:cZ,DodecahedronBufferGeometry:zw,DodecahedronGeometry:zw,DoubleSide:lp,DstAlphaFactor:Bq,DstColorFactor:zq,DynamicCopyUsage:gTe,DynamicDrawUsage:N1,DynamicReadUsage:fTe,EdgesGeometry:JQ,EllipseCurve:_2,EqualDepth:jq,EqualStencilFunc:oTe,EquirectangularReflectionMapping:B$,EquirectangularRefractionMapping:F$,Euler:hT,EventDispatcher:Vm,ExtrudeBufferGeometry:Uw,ExtrudeGeometry:Uw,FileLoader:yv,FlatShading:Rq,Float16BufferAttribute:QTe,Float32BufferAttribute:ar,Float64BufferAttribute:ZTe,FloatType:r_,Fog:f2,FogExp2:d2,Font:SMe,FontLoader:TMe,FramebufferTexture:N$e,FrontSide:f_,Frustum:u2,GLBufferAttribute:qCe,GLSL1:vTe,GLSL3:$P,GreaterDepth:Xq,GreaterEqualDepth:Yq,GreaterEqualStencilFunc:cTe,GreaterStencilFunc:lTe,GridHelper:sMe,Group:ew,HalfFloatType:Z1,HemisphereLight:fZ,HemisphereLightHelper:iMe,HemisphereLightProbe:MCe,IcosahedronBufferGeometry:Hw,IcosahedronGeometry:Hw,ImageBitmapLoader:$Ce,ImageLoader:nC,ImageUtils:KF,ImmediateRenderObject:wMe,IncrementStencilOp:Z1e,IncrementWrapStencilOp:tTe,InstancedBufferAttribute:eT,InstancedBufferGeometry:S2,InstancedInterleavedBuffer:wR,InstancedMesh:UQ,Int16BufferAttribute:JTe,Int32BufferAttribute:qTe,Int8BufferAttribute:YTe,IntType:iQ,InterleavedBuffer:p2,InterleavedBufferAttribute:Rm,Interpolant:PC,InterpolateDiscrete:U$,InterpolateLinear:H$,InterpolateSmooth:TI,InvertStencilOp:rTe,KeepStencilOp:SI,KeyframeTrack:m0,LOD:FQ,LatheBufferGeometry:tT,LatheGeometry:tT,Layers:B1,LessDepth:Vq,LessEqualDepth:vR,LessEqualStencilFunc:aTe,LessStencilFunc:sTe,Light:rb,LightProbe:b2,Line:Rf,Line3:S4,LineBasicMaterial:Pf,LineCurve:v2,LineCurve3:XQ,LineDashedMaterial:aZ,LineLoop:HQ,LineSegments:b_,LinearEncoding:Eg,LinearFilter:wl,LinearInterpolant:f4,LinearMipMapLinearFilter:j1e,LinearMipMapNearestFilter:V1e,LinearMipmapLinearFilter:uT,LinearMipmapNearestFilter:VF,LinearSRGBColorSpace:xy,LinearToneMapping:Qq,Loader:jm,LoaderUtils:LP,LoadingManager:m4,LoopOnce:_Q,LoopPingPong:yQ,LoopRepeat:vQ,LuminanceAlphaFormat:cQ,LuminanceFormat:uQ,MOUSE:l1,Material:hd,MaterialLoader:T2,MathUtils:wQ,Matrix3:up,Matrix4:Qr,MaxEquation:iP,Mesh:Un,MeshBasicMaterial:f0,MeshDepthMaterial:DC,MeshDistanceMaterial:h2,MeshLambertMaterial:sZ,MeshMatcapMaterial:oZ,MeshNormalMaterial:c4,MeshPhongMaterial:rZ,MeshPhysicalMaterial:nZ,MeshStandardMaterial:Q$,MeshToonMaterial:iZ,MinEquation:rP,MirroredRepeatWrapping:z$,MixOperation:Jq,MultiplyBlending:nP,MultiplyOperation:RC,NearestFilter:Wl,NearestMipMapLinearFilter:W1e,NearestMipMapNearestFilter:G1e,NearestMipmapLinearFilter:bR,NearestMipmapNearestFilter:yR,NeverDepth:Gq,NeverStencilFunc:iTe,NoBlending:pp,NoColorSpace:J1e,NoToneMapping:l0,NormalAnimationBlendMode:a2,NormalBlending:pv,NotEqualDepth:Kq,NotEqualStencilFunc:uTe,NumberKeyframeTrack:Z$,Object3D:ro,ObjectLoader:ECe,ObjectSpaceNormalMap:bQ,OctahedronBufferGeometry:r0,OctahedronGeometry:r0,OneFactor:Nq,OneMinusDstAlphaFactor:Fq,OneMinusDstColorFactor:Uq,OneMinusSrcAlphaFactor:s2,OneMinusSrcColorFactor:Pq,OrthographicCamera:u_,PCFShadowMap:r2,PCFSoftShadowMap:t$,PMREMGenerator:MP,ParametricGeometry:yMe,Path:X$,PerspectiveCamera:Za,Plane:sv,PlaneBufferGeometry:c0,PlaneGeometry:c0,PlaneHelper:hMe,PointLight:mZ,PointLightHelper:nMe,Points:GQ,PointsMaterial:g2,PolarGridHelper:oMe,PolyhedronBufferGeometry:p_,PolyhedronGeometry:p_,PositionalAudio:LCe,PropertyBinding:So,PropertyMixer:SZ,QuadraticBezierCurve:s4,QuadraticBezierCurve3:o4,Quaternion:Sl,QuaternionKeyframeTrack:_E,QuaternionLinearInterpolant:hZ,REVISION:fE,RGBADepthPacking:Nw,RGBAFormat:jp,RGBAIntegerFormat:mQ,RGBA_ASTC_10x10_Format:SP,RGBA_ASTC_10x5_Format:yP,RGBA_ASTC_10x6_Format:bP,RGBA_ASTC_10x8_Format:TP,RGBA_ASTC_12x10_Format:wP,RGBA_ASTC_12x12_Format:EP,RGBA_ASTC_4x4_Format:hP,RGBA_ASTC_5x4_Format:dP,RGBA_ASTC_5x5_Format:fP,RGBA_ASTC_6x5_Format:pP,RGBA_ASTC_6x6_Format:mP,RGBA_ASTC_8x5_Format:gP,RGBA_ASTC_8x6_Format:_P,RGBA_ASTC_8x8_Format:vP,RGBA_BPTC_Format:xP,RGBA_ETC2_EAC_Format:cP,RGBA_PVRTC_2BPPV1_Format:lP,RGBA_PVRTC_4BPPV1_Format:aP,RGBA_S3TC_DXT1_Format:vI,RGBA_S3TC_DXT3_Format:yI,RGBA_S3TC_DXT5_Format:bI,RGBFormat:lQ,RGB_ETC1_Format:gQ,RGB_ETC2_Format:uP,RGB_PVRTC_2BPPV1_Format:oP,RGB_PVRTC_4BPPV1_Format:sP,RGB_S3TC_DXT1_Format:_I,RGFormat:fQ,RGIntegerFormat:pQ,RawShaderMaterial:tZ,Ray:OC,Raycaster:T4,RectAreaLight:vZ,RedFormat:hQ,RedIntegerFormat:dQ,ReinhardToneMapping:Zq,RepeatWrapping:Lw,ReplaceStencilOp:Q1e,ReverseSubtractEquation:GF,RingBufferGeometry:Gw,RingGeometry:Gw,SRGBColorSpace:J0,Scene:Y$,ShaderChunk:ps,ShaderLib:op,ShaderMaterial:xd,ShadowMaterial:eZ,Shape:F1,ShapeBufferGeometry:Ww,ShapeGeometry:Ww,ShapePath:pMe,ShapeUtils:c_,ShortType:rQ,Skeleton:m2,SkeletonHelper:tMe,SkinnedMesh:zQ,SmoothShading:H1e,Source:C1,Sphere:y_,SphereBufferGeometry:h0,SphereGeometry:h0,Spherical:DP,SphericalHarmonics3:yZ,SplineCurve:a4,SpotLight:pZ,SpotLightHelper:eMe,Sprite:BQ,SpriteMaterial:t4,SrcAlphaFactor:i2,SrcAlphaSaturateFactor:Hq,SrcColorFactor:Dq,StaticCopyUsage:mTe,StaticDrawUsage:W$,StaticReadUsage:dTe,StereoCamera:ICe,StreamCopyUsage:_Te,StreamDrawUsage:hTe,StreamReadUsage:pTe,StringKeyframeTrack:fT,SubtractEquation:Oq,SubtractiveBlending:tP,TOUCH:u1,TangentSpaceNormalMap:cT,TetrahedronBufferGeometry:Vw,TetrahedronGeometry:Vw,TextGeometry:bMe,Texture:hc,TextureLoader:bCe,TorusBufferGeometry:e0,TorusGeometry:e0,TorusKnotBufferGeometry:jw,TorusKnotGeometry:jw,Triangle:Am,TriangleFanDrawMode:K1e,TriangleStripDrawMode:X1e,TrianglesDrawMode:Y1e,TubeBufferGeometry:Yw,TubeGeometry:Yw,UVMapping:o2,Uint16BufferAttribute:JF,Uint32BufferAttribute:qF,Uint8BufferAttribute:XTe,Uint8ClampedBufferAttribute:KTe,Uniform:no,UniformsGroup:JCe,UniformsLib:Xn,UniformsUtils:LC,UnsignedByteType:af,UnsignedInt248Type:Py,UnsignedIntType:hv,UnsignedShort4444Type:sQ,UnsignedShort5551Type:oQ,UnsignedShortType:jF,VSMShadowMap:E1,Vector2:jt,Vector3:Ae,Vector4:Ts,VectorKeyframeTrack:eC,VideoTexture:L$e,WebGL1Renderer:DQ,WebGL3DRenderTarget:PTe,WebGLArrayRenderTarget:DTe,WebGLCubeRenderTarget:CQ,WebGLMultipleRenderTargets:BTe,WebGLMultisampleRenderTarget:EMe,WebGLRenderTarget:Nc,WebGLRenderer:e4,WebGLUtils:LQ,WireframeGeometry:u4,WrapAroundEnding:G$,ZeroCurvatureEnding:x1,ZeroFactor:Lq,ZeroSlopeEnding:$1,ZeroStencilOp:q1e,_SRGBAFormat:TR,sRGBEncoding:ms},Symbol.toStringTag,{value:"Module"}));var lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EZ(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var A1={exports:{}},Qb={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U6;function MMe(){return U6||(U6=1,Qb.ConcurrentRoot=1,Qb.ContinuousEventPriority=4,Qb.DefaultEventPriority=16,Qb.DiscreteEventPriority=1,Qb.IdleEventPriority=536870912,Qb.LegacyRoot=0),Qb}(function(n){n.exports=MMe()})(A1);function AMe(n){let e;const t=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const g=e;e=h?f:Object.assign({},e,f),t.forEach(y=>y(e,g))}},s=()=>e,o=(u,h=s,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=h(e);function y(){const b=h(e);if(!f(g,b)){const S=g;u(g=b,S)}}return t.add(y),()=>t.delete(y)},l={setState:r,getState:s,subscribe:(u,h,f)=>h||f?o(u,h,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,s,l),l}const IMe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),H6=IMe?pe.useEffect:pe.useLayoutEffect;function RMe(n){const e=typeof n=="function"?AMe(n):n,t=(r=e.getState,s=Object.is)=>{const[,o]=pe.useReducer(A=>A+1,0),l=e.getState(),u=pe.useRef(l),h=pe.useRef(r),f=pe.useRef(s),g=pe.useRef(!1),y=pe.useRef();y.current===void 0&&(y.current=r(l));let b,S=!1;(u.current!==l||h.current!==r||f.current!==s||g.current)&&(b=r(l),S=!s(y.current,b)),H6(()=>{S&&(y.current=b),u.current=l,h.current=r,f.current=s,g.current=!1});const C=pe.useRef(l);H6(()=>{const A=()=>{try{const L=e.getState(),B=h.current(L);f.current(y.current,B)||(u.current=L,y.current=B,o())}catch{g.current=!0,o()}},O=e.subscribe(A);return e.getState()!==C.current&&A(),O},[]);const M=S?b:y.current;return pe.useDebugValue(M),M};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const s=r.length<=0;return{value:r.shift(),done:s}}}},t}var xZ={exports:{}},ER={exports:{}},G6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W6;function kMe(){return W6||(W6=1,function(n){function e(J,re){var ie=J.length;J.push(re);e:for(;0<ie;){var fe=ie-1>>>1,Te=J[fe];if(0<s(Te,re))J[fe]=re,J[ie]=Te,ie=fe;else break e}}function t(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var re=J[0],ie=J.pop();if(ie!==re){J[0]=ie;e:for(var fe=0,Te=J.length,Fe=Te>>>1;fe<Fe;){var Ie=2*(fe+1)-1,qe=J[Ie],Re=Ie+1,Qe=J[Re];if(0>s(qe,ie))Re<Te&&0>s(Qe,qe)?(J[fe]=Qe,J[Re]=ie,fe=Re):(J[fe]=qe,J[Ie]=ie,fe=Ie);else if(Re<Te&&0>s(Qe,ie))J[fe]=Qe,J[Re]=ie,fe=Re;else break e}}return re}function s(J,re){var ie=J.sortIndex-re.sortIndex;return ie!==0?ie:J.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],g=1,y=null,b=3,S=!1,C=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(J){for(var re=t(f);re!==null;){if(re.callback===null)r(f);else if(re.startTime<=J)r(f),re.sortIndex=re.expirationTime,e(h,re);else break;re=t(f)}}function D(J){if(M=!1,B(J),!C)if(t(h)!==null)C=!0,ge(z);else{var re=t(f);re!==null&&we(D,re.startTime-J)}}function z(J,re){C=!1,M&&(M=!1,O(H),H=-1),S=!0;var ie=b;try{for(B(re),y=t(h);y!==null&&(!(y.expirationTime>re)||J&&!Z());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,b=y.priorityLevel;var Te=fe(y.expirationTime<=re);re=n.unstable_now(),typeof Te=="function"?y.callback=Te:y===t(h)&&r(h),B(re)}else r(h);y=t(h)}if(y!==null)var Fe=!0;else{var Ie=t(f);Ie!==null&&we(D,Ie.startTime-re),Fe=!1}return Fe}finally{y=null,b=ie,S=!1}}var U=!1,V=null,H=-1,oe=5,le=-1;function Z(){return!(n.unstable_now()-le<oe)}function q(){if(V!==null){var J=n.unstable_now();le=J;var re=!0;try{re=V(!0,J)}finally{re?he():(U=!1,V=null)}}else U=!1}var he;if(typeof L=="function")he=function(){L(q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ue=ae.port2;ae.port1.onmessage=q,he=function(){ue.postMessage(null)}}else he=function(){A(q,0)};function ge(J){V=J,U||(U=!0,he())}function we(J,re){H=A(function(){J(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){C||S||(C=!0,ge(z))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var re=3;break;default:re=b}var ie=b;b=re;try{return J()}finally{b=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,re){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ie=b;b=J;try{return re()}finally{b=ie}},n.unstable_scheduleCallback=function(J,re,ie){var fe=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?fe+ie:fe):ie=fe,J){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ie+Te,J={id:g++,callback:re,priorityLevel:J,startTime:ie,expirationTime:Te,sortIndex:-1},ie>fe?(J.sortIndex=ie,e(f,J),t(h)===null&&J===t(f)&&(M?(O(H),H=-1):M=!0,we(D,ie-fe))):(J.sortIndex=Te,e(h,J),C||S||(C=!0,ge(z))),J},n.unstable_shouldYield=Z,n.unstable_wrapCallback=function(J){var re=b;return function(){var ie=b;b=re;try{return J.apply(this,arguments)}finally{b=ie}}}}(G6)),G6}(function(n){n.exports=kMe()})(ER);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V6,j6;function OMe(){return j6||(j6=1,V6=function(n){var e={},t=yt,r=ER.exports,s=Object.assign;function o(x){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+x,_=1;_<arguments.length;_++)d+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+x+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),D=Symbol.iterator;function z(x){return x===null||typeof x!="object"?null:(x=D&&x[D]||x["@@iterator"],typeof x=="function"?x:null)}function U(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case f:return"Fragment";case h:return"Portal";case y:return"Profiler";case g:return"StrictMode";case M:return"Suspense";case A:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case S:return(x.displayName||"Context")+".Consumer";case b:return(x._context.displayName||"Context")+".Provider";case C:var d=x.render;return x=x.displayName,x||(x=d.displayName||d.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case O:return d=x.displayName||null,d!==null?d:U(x.type)||"Memo";case L:d=x._payload,x=x._init;try{return U(x(d))}catch{}}return null}function V(x){var d=x.type;switch(x.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return x=d.render,x=x.displayName||x.name||"",d.displayName||(x!==""?"ForwardRef("+x+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(d);case 8:return d===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function H(x){var d=x,_=x;if(x.alternate)for(;d.return;)d=d.return;else{x=d;do d=x,d.flags&4098&&(_=d.return),x=d.return;while(x)}return d.tag===3?_:null}function oe(x){if(H(x)!==x)throw Error(o(188))}function le(x){var d=x.alternate;if(!d){if(d=H(x),d===null)throw Error(o(188));return d!==x?null:x}for(var _=x,$=d;;){var I=_.return;if(I===null)break;var P=I.alternate;if(P===null){if($=I.return,$!==null){_=$;continue}break}if(I.child===P.child){for(P=I.child;P;){if(P===_)return oe(I),x;if(P===$)return oe(I),d;P=P.sibling}throw Error(o(188))}if(_.return!==$.return)_=I,$=P;else{for(var W=!1,de=I.child;de;){if(de===_){W=!0,_=I,$=P;break}if(de===$){W=!0,$=I,_=P;break}de=de.sibling}if(!W){for(de=P.child;de;){if(de===_){W=!0,_=P,$=I;break}if(de===$){W=!0,$=P,_=I;break}de=de.sibling}if(!W)throw Error(o(189))}}if(_.alternate!==$)throw Error(o(190))}if(_.tag!==3)throw Error(o(188));return _.stateNode.current===_?x:d}function Z(x){return x=le(x),x!==null?q(x):null}function q(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){var d=q(x);if(d!==null)return d;x=x.sibling}return null}function he(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){if(x.tag!==4){var d=he(x);if(d!==null)return d}x=x.sibling}return null}var ae=Array.isArray,ue=n.getPublicInstance,ge=n.getRootHostContext,we=n.getChildHostContext,J=n.prepareForCommit,re=n.resetAfterCommit,ie=n.createInstance,fe=n.appendInitialChild,Te=n.finalizeInitialChildren,Fe=n.prepareUpdate,Ie=n.shouldSetTextContent,qe=n.createTextInstance,Re=n.scheduleTimeout,Qe=n.cancelTimeout,nt=n.noTimeout,ft=n.isPrimaryRenderer,lt=n.supportsMutation,ze=n.supportsPersistence,Ce=n.supportsHydration,He=n.getInstanceFromNode,rt=n.preparePortalMount,it=n.getCurrentEventPriority,Nt=n.detachDeletedInstance,kt=n.supportsMicrotasks,vt=n.scheduleMicrotask,Mt=n.supportsTestSelectors,At=n.findFiberRoot,mt=n.getBoundingRect,xe=n.getTextContent,se=n.isHiddenSubtree,$e=n.matchAccessibilityRole,ht=n.setFocusIfFocusable,St=n.setupIntersectionObserver,It=n.appendChild,pt=n.appendChildToContainer,Ke=n.commitTextUpdate,Le=n.commitMount,Q=n.commitUpdate,te=n.insertBefore,me=n.insertInContainerBefore,ke=n.removeChild,Xe=n.removeChildFromContainer,Wt=n.resetTextContent,Ge=n.hideInstance,tn=n.hideTextInstance,_t=n.unhideInstance,Jt=n.unhideTextInstance,Kt=n.clearContainer,On=n.cloneInstance,si=n.createContainerChildSet,Pr=n.appendChildToContainerChildSet,Ei=n.finalizeContainerChildren,$r=n.replaceContainerChildren,gr=n.cloneHiddenInstance,ne=n.cloneHiddenTextInstance,Se=n.canHydrateInstance,We=n.canHydrateTextInstance,ot=n.canHydrateSuspenseInstance,zt=n.isSuspenseInstancePending,sn=n.isSuspenseInstanceFallback,Nn=n.registerSuspenseInstanceRetry,De=n.getNextHydratableSibling,gt=n.getFirstHydratableChild,Ct=n.getFirstHydratableChildWithinContainer,bt=n.getFirstHydratableChildWithinSuspenseInstance,Vt=n.hydrateInstance,Wn=n.hydrateTextInstance,rr=n.hydrateSuspenseInstance,_r=n.getNextHydratableInstanceAfterSuspenseInstance,Cr=n.commitHydratedContainer,oi=n.commitHydratedSuspenseInstance,Br=n.clearSuspenseBoundary,Yr=n.clearSuspenseBoundaryFromContainer,Ss=n.shouldDeleteUnhydratedTailInstances,Oa=n.didNotMatchHydratedContainerTextInstance,xo=n.didNotMatchHydratedTextInstance,Yl;function nn(x){if(Yl===void 0)try{throw Error()}catch(_){var d=_.stack.trim().match(/\n( *(at )?)/);Yl=d&&d[1]||""}return`
`+Yl+x}var Rr=!1;function el(x,d){if(!x||Rr)return"";Rr=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ze){var $=Ze}Reflect.construct(x,[],d)}else{try{d.call()}catch(Ze){$=Ze}x.call(d.prototype)}else{try{throw Error()}catch(Ze){$=Ze}x()}}catch(Ze){if(Ze&&$&&typeof Ze.stack=="string"){for(var I=Ze.stack.split(`
`),P=$.stack.split(`
`),W=I.length-1,de=P.length-1;1<=W&&0<=de&&I[W]!==P[de];)de--;for(;1<=W&&0<=de;W--,de--)if(I[W]!==P[de]){if(W!==1||de!==1)do if(W--,de--,0>de||I[W]!==P[de]){var Oe=`
`+I[W].replace(" at new "," at ");return x.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",x.displayName)),Oe}while(1<=W&&0<=de);break}}}finally{Rr=!1,Error.prepareStackTrace=_}return(x=x?x.displayName||x.name:"")?nn(x):""}var La=Object.prototype.hasOwnProperty,Fs=[],zs=-1;function Di(x){return{current:x}}function kr(x){0>zs||(x.current=Fs[zs],Fs[zs]=null,zs--)}function An(x,d){zs++,Fs[zs]=x.current,x.current=d}var Ir={},Gr=Di(Ir),yr=Di(!1),Pi=Ir;function ws(x,d){var _=x.type.contextTypes;if(!_)return Ir;var $=x.stateNode;if($&&$.__reactInternalMemoizedUnmaskedChildContext===d)return $.__reactInternalMemoizedMaskedChildContext;var I={},P;for(P in _)I[P]=d[P];return $&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=d,x.__reactInternalMemoizedMaskedChildContext=I),I}function fi(x){return x=x.childContextTypes,x!=null}function gs(){kr(yr),kr(Gr)}function tl(x,d,_){if(Gr.current!==Ir)throw Error(o(168));An(Gr,d),An(yr,_)}function Na(x,d,_){var $=x.stateNode;if(d=d.childContextTypes,typeof $.getChildContext!="function")return _;$=$.getChildContext();for(var I in $)if(!(I in d))throw Error(o(108,V(x)||"Unknown",I));return s({},_,$)}function dc(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||Ir,Pi=Gr.current,An(Gr,x),An(yr,yr.current),!0}function fc(x,d,_){var $=x.stateNode;if(!$)throw Error(o(169));_?(x=Na(x,d,Pi),$.__reactInternalMemoizedMergedChildContext=x,kr(yr),kr(Gr),An(Gr,x)):kr(yr),An(yr,_)}var Xs=Math.clz32?Math.clz32:gu,qo=Math.log,Xl=Math.LN2;function gu(x){return x>>>=0,x===0?32:31-(qo(x)/Xl|0)|0}var mh=64,Qo=4194304;function vr(x){switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return x&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return x}}function xi(x,d){var _=x.pendingLanes;if(_===0)return 0;var $=0,I=x.suspendedLanes,P=x.pingedLanes,W=_&268435455;if(W!==0){var de=W&~I;de!==0?$=vr(de):(P&=W,P!==0&&($=vr(P)))}else W=_&~I,W!==0?$=vr(W):P!==0&&($=vr(P));if($===0)return 0;if(d!==0&&d!==$&&!(d&I)&&(I=$&-$,P=d&-d,I>=P||I===16&&(P&4194240)!==0))return d;if($&4&&($|=_&16),d=x.entangledLanes,d!==0)for(x=x.entanglements,d&=$;0<d;)_=31-Xs(d),I=1<<_,$|=x[_],d&=~I;return $}function Dc(x,d){switch(x){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gh(x,d){for(var _=x.suspendedLanes,$=x.pingedLanes,I=x.expirationTimes,P=x.pendingLanes;0<P;){var W=31-Xs(P),de=1<<W,Oe=I[W];Oe===-1?(!(de&_)||de&$)&&(I[W]=Dc(de,d)):Oe<=d&&(x.expiredLanes|=de),P&=~de}}function Pc(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function El(x){for(var d=[],_=0;31>_;_++)d.push(x);return d}function _u(x,d,_){x.pendingLanes|=d,d!==536870912&&(x.suspendedLanes=0,x.pingedLanes=0),x=x.eventTimes,d=31-Xs(d),x[d]=_}function xl(x,d){var _=x.pendingLanes&~d;x.pendingLanes=d,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=d,x.mutableReadLanes&=d,x.entangledLanes&=d,d=x.entanglements;var $=x.eventTimes;for(x=x.expirationTimes;0<_;){var I=31-Xs(_),P=1<<I;d[I]=0,$[I]=-1,x[I]=-1,_&=~P}}function $l(x,d){var _=x.entangledLanes|=d;for(x=x.entanglements;_;){var $=31-Xs(_),I=1<<$;I&d|x[$]&d&&(x[$]|=d),_&=~I}}var br=0;function Tr(x){return x&=-x,1<x?4<x?x&268435455?16:536870912:4:1}var Kl=r.unstable_scheduleCallback,nl=r.unstable_cancelCallback,rl=r.unstable_shouldYield,vu=r.unstable_requestPaint,qi=r.unstable_now,_s=r.unstable_ImmediatePriority,il=r.unstable_UserBlockingPriority,Cd=r.unstable_NormalPriority,io=r.unstable_IdlePriority,zu=null,ca=null;function yu(x){if(ca&&typeof ca.onCommitFiberRoot=="function")try{ca.onCommitFiberRoot(zu,x,void 0,(x.current.flags&128)===128)}catch{}}function or(x,d){return x===d&&(x!==0||1/x===1/d)||x!==x&&d!==d}var Gn=typeof Object.is=="function"?Object.is:or,Es=null,so=!1,Uu=!1;function bu(x){Es===null?Es=[x]:Es.push(x)}function _h(x){so=!0,bu(x)}function Da(){if(!Uu&&Es!==null){Uu=!0;var x=0,d=br;try{var _=Es;for(br=1;x<_.length;x++){var $=_[x];do $=$(!0);while($!==null)}Es=null,so=!1}catch(I){throw Es!==null&&(Es=Es.slice(x+1)),Kl(_s,Da),I}finally{br=d,Uu=!1}}return null}var ha=l.ReactCurrentBatchConfig;function Hu(x,d){if(Gn(x,d))return!0;if(typeof x!="object"||x===null||typeof d!="object"||d===null)return!1;var _=Object.keys(x),$=Object.keys(d);if(_.length!==$.length)return!1;for($=0;$<_.length;$++){var I=_[$];if(!La.call(d,I)||!Gn(x[I],d[I]))return!1}return!0}function wr(x){switch(x.tag){case 5:return nn(x.type);case 16:return nn("Lazy");case 13:return nn("Suspense");case 19:return nn("SuspenseList");case 0:case 2:case 15:return x=el(x.type,!1),x;case 11:return x=el(x.type.render,!1),x;case 1:return x=el(x.type,!0),x;default:return""}}function Rs(x,d){if(x&&x.defaultProps){d=s({},d),x=x.defaultProps;for(var _ in x)d[_]===void 0&&(d[_]=x[_]);return d}return d}var bi=Di(null),$i=null,da=null,Zr=null;function Tu(){Zr=da=$i=null}function $o(x,d,_){ft?(An(bi,d._currentValue),d._currentValue=_):(An(bi,d._currentValue2),d._currentValue2=_)}function Su(x){var d=bi.current;kr(bi),ft?x._currentValue=d:x._currentValue2=d}function sl(x,d,_){for(;x!==null;){var $=x.alternate;if((x.childLanes&d)!==d?(x.childLanes|=d,$!==null&&($.childLanes|=d)):$!==null&&($.childLanes&d)!==d&&($.childLanes|=d),x===_)break;x=x.return}}function Bi(x,d){$i=x,Zr=da=null,x=x.dependencies,x!==null&&x.firstContext!==null&&(x.lanes&d&&(cl=!0),x.firstContext=null)}function Ci(x){var d=ft?x._currentValue:x._currentValue2;if(Zr!==x)if(x={context:x,memoizedValue:d,next:null},da===null){if($i===null)throw Error(o(308));da=x,$i.dependencies={lanes:0,firstContext:x}}else da=da.next=x;return d}var Vn=null,Mi=!1;function Xr(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dd(x,d){x=x.updateQueue,d.updateQueue===x&&(d.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function wu(x,d){return{eventTime:x,lane:d,tag:0,payload:null,callback:null,next:null}}function Vi(x,d){var _=x.updateQueue;_!==null&&(_=_.shared,tr!==null&&x.mode&1&&!(Pn&2)?(x=_.interleaved,x===null?(d.next=d,Vn===null?Vn=[_]:Vn.push(_)):(d.next=x.next,x.next=d),_.interleaved=d):(x=_.pending,x===null?d.next=d:(d.next=x.next,x.next=d),_.pending=d))}function Pa(x,d,_){if(d=d.updateQueue,d!==null&&(d=d.shared,(_&4194240)!==0)){var $=d.lanes;$&=x.pendingLanes,_|=$,d.lanes=_,$l(x,_)}}function vh(x,d){var _=x.updateQueue,$=x.alternate;if($!==null&&($=$.updateQueue,_===$)){var I=null,P=null;if(_=_.firstBaseUpdate,_!==null){do{var W={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};P===null?I=P=W:P=P.next=W,_=_.next}while(_!==null);P===null?I=P=d:P=P.next=d}else I=P=d;_={baseState:$.baseState,firstBaseUpdate:I,lastBaseUpdate:P,shared:$.shared,effects:$.effects},x.updateQueue=_;return}x=_.lastBaseUpdate,x===null?_.firstBaseUpdate=d:x.next=d,_.lastBaseUpdate=d}function fr(x,d,_,$){var I=x.updateQueue;Mi=!1;var P=I.firstBaseUpdate,W=I.lastBaseUpdate,de=I.shared.pending;if(de!==null){I.shared.pending=null;var Oe=de,Ze=Oe.next;Oe.next=null,W===null?P=Ze:W.next=Ze,W=Oe;var wt=x.alternate;wt!==null&&(wt=wt.updateQueue,de=wt.lastBaseUpdate,de!==W&&(de===null?wt.firstBaseUpdate=Ze:de.next=Ze,wt.lastBaseUpdate=Oe))}if(P!==null){var Qt=I.baseState;W=0,wt=Ze=Oe=null,de=P;do{var cn=de.lane,bn=de.eventTime;if(($&cn)===cn){wt!==null&&(wt=wt.next={eventTime:bn,lane:0,tag:de.tag,payload:de.payload,callback:de.callback,next:null});e:{var Tn=x,gn=de;switch(cn=d,bn=_,gn.tag){case 1:if(Tn=gn.payload,typeof Tn=="function"){Qt=Tn.call(bn,Qt,cn);break e}Qt=Tn;break e;case 3:Tn.flags=Tn.flags&-65537|128;case 0:if(Tn=gn.payload,cn=typeof Tn=="function"?Tn.call(bn,Qt,cn):Tn,cn==null)break e;Qt=s({},Qt,cn);break e;case 2:Mi=!0}}de.callback!==null&&de.lane!==0&&(x.flags|=64,cn=I.effects,cn===null?I.effects=[de]:cn.push(de))}else bn={eventTime:bn,lane:cn,tag:de.tag,payload:de.payload,callback:de.callback,next:null},wt===null?(Ze=wt=bn,Oe=Qt):wt=wt.next=bn,W|=cn;if(de=de.next,de===null){if(de=I.shared.pending,de===null)break;cn=de,de=cn.next,cn.next=null,I.lastBaseUpdate=cn,I.shared.pending=null}}while(!0);if(wt===null&&(Oe=Qt),I.baseState=Oe,I.firstBaseUpdate=Ze,I.lastBaseUpdate=wt,d=I.shared.interleaved,d!==null){I=d;do W|=I.lane,I=I.next;while(I!==d)}else P===null&&(I.shared.lanes=0);au|=W,x.lanes=W,x.memoizedState=Qt}}function Zo(x,d,_){if(x=d.effects,d.effects=null,x!==null)for(d=0;d<x.length;d++){var $=x[d],I=$.callback;if(I!==null){if($.callback=null,$=_,typeof I!="function")throw Error(o(191,I));I.call($)}}}var fd=new t.Component().refs;function lf(x,d,_,$){d=x.memoizedState,_=_($,d),_=_==null?d:s({},d,_),x.memoizedState=_,x.lanes===0&&(x.updateQueue.baseState=_)}var Bc={isMounted:function(x){return(x=x._reactInternals)?H(x)===x:!1},enqueueSetState:function(x,d,_){x=x._reactInternals;var $=Or(),I=bs(x),P=wu($,I);P.payload=d,_!=null&&(P.callback=_),Vi(x,P),d=Os(x,I,$),d!==null&&Pa(d,x,I)},enqueueReplaceState:function(x,d,_){x=x._reactInternals;var $=Or(),I=bs(x),P=wu($,I);P.tag=1,P.payload=d,_!=null&&(P.callback=_),Vi(x,P),d=Os(x,I,$),d!==null&&Pa(d,x,I)},enqueueForceUpdate:function(x,d){x=x._reactInternals;var _=Or(),$=bs(x),I=wu(_,$);I.tag=2,d!=null&&(I.callback=d),Vi(x,I),d=Os(x,$,_),d!==null&&Pa(d,x,$)}};function uf(x,d,_,$,I,P,W){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate($,P,W):d.prototype&&d.prototype.isPureReactComponent?!Hu(_,$)||!Hu(I,P):!0}function Bf(x,d,_){var $=!1,I=Ir,P=d.contextType;return typeof P=="object"&&P!==null?P=Ci(P):(I=fi(d)?Pi:Gr.current,$=d.contextTypes,P=($=$!=null)?ws(x,I):Ir),d=new d(_,P),x.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Bc,x.stateNode=d,d._reactInternals=x,$&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=I,x.__reactInternalMemoizedMaskedChildContext=P),d}function Tp(x,d,_,$){x=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(_,$),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(_,$),d.state!==x&&Bc.enqueueReplaceState(d,d.state,null)}function Md(x,d,_,$){var I=x.stateNode;I.props=_,I.state=x.memoizedState,I.refs=fd,Xr(x);var P=d.contextType;typeof P=="object"&&P!==null?I.context=Ci(P):(P=fi(d)?Pi:Gr.current,I.context=ws(x,P)),I.state=x.memoizedState,P=d.getDerivedStateFromProps,typeof P=="function"&&(lf(x,d,P,_),I.state=x.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(d=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),d!==I.state&&Bc.enqueueReplaceState(I,I.state,null),fr(x,_,I,$),I.state=x.memoizedState),typeof I.componentDidMount=="function"&&(x.flags|=4194308)}var Jl=[],ks=0,Gu=null,yh=0,Ba=[],ci=0,Er=null,oo=1,Fa="";function zo(x,d){Jl[ks++]=yh,Jl[ks++]=Gu,Gu=x,yh=d}function ql(x,d,_){Ba[ci++]=oo,Ba[ci++]=Fa,Ba[ci++]=Er,Er=x;var $=oo;x=Fa;var I=32-Xs($)-1;$&=~(1<<I),_+=1;var P=32-Xs(d)+I;if(30<P){var W=I-I%5;P=($&(1<<W)-1).toString(32),$>>=W,I-=W,oo=1<<32-Xs(d)+I|_<<I|$,Fa=P+x}else oo=1<<P|_<<I|$,Fa=x}function Ql(x){x.return!==null&&(zo(x,1),ql(x,1,0))}function Fh(x){for(;x===Gu;)Gu=Jl[--ks],Jl[ks]=null,yh=Jl[--ks],Jl[ks]=null;for(;x===Er;)Er=Ba[--ci],Ba[ci]=null,Fa=Ba[--ci],Ba[ci]=null,oo=Ba[--ci],Ba[ci]=null}var Wr=null,Ai=null,Sr=!1,ji=!1,fa=null;function Eu(x,d){var _=Vo(5,null,null,0);_.elementType="DELETED",_.stateNode=d,_.return=x,d=x.deletions,d===null?(x.deletions=[_],x.flags|=16):d.push(_)}function cf(x,d){switch(x.tag){case 5:return d=Se(d,x.type,x.pendingProps),d!==null?(x.stateNode=d,Wr=x,Ai=gt(d),!0):!1;case 6:return d=We(d,x.pendingProps),d!==null?(x.stateNode=d,Wr=x,Ai=null,!0):!1;case 13:if(d=ot(d),d!==null){var _=Er!==null?{id:oo,overflow:Fa}:null;return x.memoizedState={dehydrated:d,treeContext:_,retryLane:1073741824},_=Vo(18,null,null,0),_.stateNode=d,_.return=x,x.child=_,Wr=x,Ai=null,!0}return!1;default:return!1}}function hf(x){return(x.mode&1)!==0&&(x.flags&128)===0}function pd(x){if(Sr){var d=Ai;if(d){var _=d;if(!cf(x,d)){if(hf(x))throw Error(o(418));d=De(_);var $=Wr;d&&cf(x,d)?Eu($,_):(x.flags=x.flags&-4097|2,Sr=!1,Wr=x)}}else{if(hf(x))throw Error(o(418));x.flags=x.flags&-4097|2,Sr=!1,Wr=x}}}function Wu(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;Wr=x}function ol(x){if(!Ce||x!==Wr)return!1;if(!Sr)return Wu(x),Sr=!0,!1;if(x.tag!==3&&(x.tag!==5||Ss(x.type)&&!Ie(x.type,x.memoizedProps))){var d=Ai;if(d){if(hf(x)){for(x=Ai;x;)x=De(x);throw Error(o(418))}for(;d;)Eu(x,d),d=De(d)}}if(Wu(x),x.tag===13){if(!Ce)throw Error(o(316));if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));Ai=_r(x)}else Ai=Wr?De(x.stateNode):null;return!0}function Fc(){Ce&&(Ai=Wr=null,ji=Sr=!1)}function zh(x){fa===null?fa=[x]:fa.push(x)}function Vu(x,d,_){if(x=_.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(o(309));var $=_.stateNode}if(!$)throw Error(o(147,x));var I=$,P=""+x;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===P?d.ref:(d=function(W){var de=I.refs;de===fd&&(de=I.refs={}),W===null?delete de[P]:de[P]=W},d._stringRef=P,d)}if(typeof x!="string")throw Error(o(284));if(!_._owner)throw Error(o(290,x))}return x}function Zl(x,d){throw x=Object.prototype.toString.call(d),Error(o(31,x==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":x))}function Us(x){var d=x._init;return d(x._payload)}function eu(x){function d(Tt,Me){if(x){var Ne=Tt.deletions;Ne===null?(Tt.deletions=[Me],Tt.flags|=16):Ne.push(Me)}}function _(Tt,Me){if(!x)return null;for(;Me!==null;)d(Tt,Me),Me=Me.sibling;return null}function $(Tt,Me){for(Tt=new Map;Me!==null;)Me.key!==null?Tt.set(Me.key,Me):Tt.set(Me.index,Me),Me=Me.sibling;return Tt}function I(Tt,Me){return Tt=Dl(Tt,Me),Tt.index=0,Tt.sibling=null,Tt}function P(Tt,Me,Ne){return Tt.index=Ne,x?(Ne=Tt.alternate,Ne!==null?(Ne=Ne.index,Ne<Me?(Tt.flags|=2,Me):Ne):(Tt.flags|=2,Me)):(Tt.flags|=1048576,Me)}function W(Tt){return x&&Tt.alternate===null&&(Tt.flags|=2),Tt}function de(Tt,Me,Ne,st){return Me===null||Me.tag!==6?(Me=uu(Ne,Tt.mode,st),Me.return=Tt,Me):(Me=I(Me,Ne),Me.return=Tt,Me)}function Oe(Tt,Me,Ne,st){var Ht=Ne.type;return Ht===f?wt(Tt,Me,Ne.props.children,st,Ne.key):Me!==null&&(Me.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===L&&Us(Ht)===Me.type)?(st=I(Me,Ne.props),st.ref=Vu(Tt,Me,Ne),st.return=Tt,st):(st=vo(Ne.type,Ne.key,Ne.props,null,Tt.mode,st),st.ref=Vu(Tt,Me,Ne),st.return=Tt,st)}function Ze(Tt,Me,Ne,st){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==Ne.containerInfo||Me.stateNode.implementation!==Ne.implementation?(Me=ni(Ne,Tt.mode,st),Me.return=Tt,Me):(Me=I(Me,Ne.children||[]),Me.return=Tt,Me)}function wt(Tt,Me,Ne,st,Ht){return Me===null||Me.tag!==7?(Me=Pl(Ne,Tt.mode,st,Ht),Me.return=Tt,Me):(Me=I(Me,Ne),Me.return=Tt,Me)}function Qt(Tt,Me,Ne){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Me=uu(""+Me,Tt.mode,Ne),Me.return=Tt,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case u:return Ne=vo(Me.type,Me.key,Me.props,null,Tt.mode,Ne),Ne.ref=Vu(Tt,null,Me),Ne.return=Tt,Ne;case h:return Me=ni(Me,Tt.mode,Ne),Me.return=Tt,Me;case L:var st=Me._init;return Qt(Tt,st(Me._payload),Ne)}if(ae(Me)||z(Me))return Me=Pl(Me,Tt.mode,Ne,null),Me.return=Tt,Me;Zl(Tt,Me)}return null}function cn(Tt,Me,Ne,st){var Ht=Me!==null?Me.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return Ht!==null?null:de(Tt,Me,""+Ne,st);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case u:return Ne.key===Ht?Oe(Tt,Me,Ne,st):null;case h:return Ne.key===Ht?Ze(Tt,Me,Ne,st):null;case L:return Ht=Ne._init,cn(Tt,Me,Ht(Ne._payload),st)}if(ae(Ne)||z(Ne))return Ht!==null?null:wt(Tt,Me,Ne,st,null);Zl(Tt,Ne)}return null}function bn(Tt,Me,Ne,st,Ht){if(typeof st=="string"&&st!==""||typeof st=="number")return Tt=Tt.get(Ne)||null,de(Me,Tt,""+st,Ht);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case u:return Tt=Tt.get(st.key===null?Ne:st.key)||null,Oe(Me,Tt,st,Ht);case h:return Tt=Tt.get(st.key===null?Ne:st.key)||null,Ze(Me,Tt,st,Ht);case L:var on=st._init;return bn(Tt,Me,Ne,on(st._payload),Ht)}if(ae(st)||z(st))return Tt=Tt.get(Ne)||null,wt(Me,Tt,st,Ht,null);Zl(Me,st)}return null}function Tn(Tt,Me,Ne,st){for(var Ht=null,on=null,En=Me,Rn=Me=0,Fn=null;En!==null&&Rn<Ne.length;Rn++){En.index>Rn?(Fn=En,En=null):Fn=En.sibling;var dr=cn(Tt,En,Ne[Rn],st);if(dr===null){En===null&&(En=Fn);break}x&&En&&dr.alternate===null&&d(Tt,En),Me=P(dr,Me,Rn),on===null?Ht=dr:on.sibling=dr,on=dr,En=Fn}if(Rn===Ne.length)return _(Tt,En),Sr&&zo(Tt,Rn),Ht;if(En===null){for(;Rn<Ne.length;Rn++)En=Qt(Tt,Ne[Rn],st),En!==null&&(Me=P(En,Me,Rn),on===null?Ht=En:on.sibling=En,on=En);return Sr&&zo(Tt,Rn),Ht}for(En=$(Tt,En);Rn<Ne.length;Rn++)Fn=bn(En,Tt,Rn,Ne[Rn],st),Fn!==null&&(x&&Fn.alternate!==null&&En.delete(Fn.key===null?Rn:Fn.key),Me=P(Fn,Me,Rn),on===null?Ht=Fn:on.sibling=Fn,on=Fn);return x&&En.forEach(function(Ar){return d(Tt,Ar)}),Sr&&zo(Tt,Rn),Ht}function gn(Tt,Me,Ne,st){var Ht=z(Ne);if(typeof Ht!="function")throw Error(o(150));if(Ne=Ht.call(Ne),Ne==null)throw Error(o(151));for(var on=Ht=null,En=Me,Rn=Me=0,Fn=null,dr=Ne.next();En!==null&&!dr.done;Rn++,dr=Ne.next()){En.index>Rn?(Fn=En,En=null):Fn=En.sibling;var Ar=cn(Tt,En,dr.value,st);if(Ar===null){En===null&&(En=Fn);break}x&&En&&Ar.alternate===null&&d(Tt,En),Me=P(Ar,Me,Rn),on===null?Ht=Ar:on.sibling=Ar,on=Ar,En=Fn}if(dr.done)return _(Tt,En),Sr&&zo(Tt,Rn),Ht;if(En===null){for(;!dr.done;Rn++,dr=Ne.next())dr=Qt(Tt,dr.value,st),dr!==null&&(Me=P(dr,Me,Rn),on===null?Ht=dr:on.sibling=dr,on=dr);return Sr&&zo(Tt,Rn),Ht}for(En=$(Tt,En);!dr.done;Rn++,dr=Ne.next())dr=bn(En,Tt,Rn,dr.value,st),dr!==null&&(x&&dr.alternate!==null&&En.delete(dr.key===null?Rn:dr.key),Me=P(dr,Me,Rn),on===null?Ht=dr:on.sibling=dr,on=dr);return x&&En.forEach(function(Bl){return d(Tt,Bl)}),Sr&&zo(Tt,Rn),Ht}function Dr(Tt,Me,Ne,st){if(typeof Ne=="object"&&Ne!==null&&Ne.type===f&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case u:e:{for(var Ht=Ne.key,on=Me;on!==null;){if(on.key===Ht){if(Ht=Ne.type,Ht===f){if(on.tag===7){_(Tt,on.sibling),Me=I(on,Ne.props.children),Me.return=Tt,Tt=Me;break e}}else if(on.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===L&&Us(Ht)===on.type){_(Tt,on.sibling),Me=I(on,Ne.props),Me.ref=Vu(Tt,on,Ne),Me.return=Tt,Tt=Me;break e}_(Tt,on);break}else d(Tt,on);on=on.sibling}Ne.type===f?(Me=Pl(Ne.props.children,Tt.mode,st,Ne.key),Me.return=Tt,Tt=Me):(st=vo(Ne.type,Ne.key,Ne.props,null,Tt.mode,st),st.ref=Vu(Tt,Me,Ne),st.return=Tt,Tt=st)}return W(Tt);case h:e:{for(on=Ne.key;Me!==null;){if(Me.key===on)if(Me.tag===4&&Me.stateNode.containerInfo===Ne.containerInfo&&Me.stateNode.implementation===Ne.implementation){_(Tt,Me.sibling),Me=I(Me,Ne.children||[]),Me.return=Tt,Tt=Me;break e}else{_(Tt,Me);break}else d(Tt,Me);Me=Me.sibling}Me=ni(Ne,Tt.mode,st),Me.return=Tt,Tt=Me}return W(Tt);case L:return on=Ne._init,Dr(Tt,Me,on(Ne._payload),st)}if(ae(Ne))return Tn(Tt,Me,Ne,st);if(z(Ne))return gn(Tt,Me,Ne,st);Zl(Tt,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,Me!==null&&Me.tag===6?(_(Tt,Me.sibling),Me=I(Me,Ne),Me.return=Tt,Tt=Me):(_(Tt,Me),Me=uu(Ne,Tt.mode,st),Me.return=Tt,Tt=Me),W(Tt)):_(Tt,Me)}return Dr}var Uh=eu(!0),zc=eu(!1),Uc={},is=Di(Uc),Fr=Di(Uc),Cl=Di(Uc);function za(x){if(x===Uc)throw Error(o(174));return x}function tu(x,d){An(Cl,d),An(Fr,x),An(is,Uc),x=ge(d),kr(is),An(is,x)}function xu(){kr(is),kr(Fr),kr(Cl)}function bh(x){var d=za(Cl.current),_=za(is.current);d=we(_,x.type,d),_!==d&&(An(Fr,x),An(is,d))}function Ad(x){Fr.current===x&&(kr(is),kr(Fr))}var pi=Di(0);function ye(x){for(var d=x;d!==null;){if(d.tag===13){var _=d.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||zt(_)||sn(_)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===x)break;for(;d.sibling===null;){if(d.return===null||d.return===x)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var je=[];function Be(){for(var x=0;x<je.length;x++){var d=je[x];ft?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}je.length=0}var Ot=l.ReactCurrentDispatcher,rn=l.ReactCurrentBatchConfig,In=0,Jn=null,vn=null,zr=null,ao=!1,Ti=!1,lo=0,al=0;function Fi(){throw Error(o(321))}function vs(x,d){if(d===null)return!1;for(var _=0;_<d.length&&_<x.length;_++)if(!Gn(x[_],d[_]))return!1;return!0}function $u(x,d,_,$,I,P){if(In=P,Jn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Ot.current=x===null||x.memoizedState===null?Xu:Ku,x=_($,I),Ti){P=0;do{if(Ti=!1,lo=0,25<=P)throw Error(o(301));P+=1,zr=vn=null,d.updateQueue=null,Ot.current=Sh,x=_($,I)}while(Ti)}if(Ot.current=ru,d=vn!==null&&vn.next!==null,In=0,zr=vn=Jn=null,ao=!1,d)throw Error(o(300));return x}function qn(){var x=lo!==0;return lo=0,x}function pa(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?Jn.memoizedState=zr=x:zr=zr.next=x,zr}function Ks(){if(vn===null){var x=Jn.alternate;x=x!==null?x.memoizedState:null}else x=vn.next;var d=zr===null?Jn.memoizedState:zr.next;if(d!==null)zr=d,vn=x;else{if(x===null)throw Error(o(310));vn=x,x={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},zr===null?Jn.memoizedState=zr=x:zr=zr.next=x}return zr}function Hs(x,d){return typeof d=="function"?d(x):d}function Ua(x){var d=Ks(),_=d.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=x;var $=vn,I=$.baseQueue,P=_.pending;if(P!==null){if(I!==null){var W=I.next;I.next=P.next,P.next=W}$.baseQueue=I=P,_.pending=null}if(I!==null){P=I.next,$=$.baseState;var de=W=null,Oe=null,Ze=P;do{var wt=Ze.lane;if((In&wt)===wt)Oe!==null&&(Oe=Oe.next={lane:0,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null}),$=Ze.hasEagerState?Ze.eagerState:x($,Ze.action);else{var Qt={lane:wt,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null};Oe===null?(de=Oe=Qt,W=$):Oe=Oe.next=Qt,Jn.lanes|=wt,au|=wt}Ze=Ze.next}while(Ze!==null&&Ze!==P);Oe===null?W=$:Oe.next=de,Gn($,d.memoizedState)||(cl=!0),d.memoizedState=$,d.baseState=W,d.baseQueue=Oe,_.lastRenderedState=$}if(x=_.interleaved,x!==null){I=x;do P=I.lane,Jn.lanes|=P,au|=P,I=I.next;while(I!==x)}else I===null&&(_.lanes=0);return[d.memoizedState,_.dispatch]}function Hh(x){var d=Ks(),_=d.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=x;var $=_.dispatch,I=_.pending,P=d.memoizedState;if(I!==null){_.pending=null;var W=I=I.next;do P=x(P,W.action),W=W.next;while(W!==I);Gn(P,d.memoizedState)||(cl=!0),d.memoizedState=P,d.baseQueue===null&&(d.baseState=P),_.lastRenderedState=P}return[P,$]}function Th(){}function pc(x,d){var _=Jn,$=Ks(),I=d(),P=!Gn($.memoizedState,I);if(P&&($.memoizedState=I,cl=!0),$=$.queue,Ml(Gh.bind(null,_,$,x),[x]),$.getSnapshot!==d||P||zr!==null&&zr.memoizedState.tag&1){if(_.flags|=2048,mc(9,Hc.bind(null,_,$,I,d),void 0,null),tr===null)throw Error(o(349));In&30||ea(_,d,I)}return I}function ea(x,d,_){x.flags|=16384,x={getSnapshot:d,value:_},d=Jn.updateQueue,d===null?(d={lastEffect:null,stores:null},Jn.updateQueue=d,d.stores=[x]):(_=d.stores,_===null?d.stores=[x]:_.push(x))}function Hc(x,d,_,$){d.value=_,d.getSnapshot=$,Ha(d)&&Os(x,1,-1)}function Gh(x,d,_){return _(function(){Ha(d)&&Os(x,1,-1)})}function Ha(x){var d=x.getSnapshot;x=x.value;try{var _=d();return!Gn(x,_)}catch{return!0}}function Wh(x){var d=pa();return typeof x=="function"&&(x=x()),d.memoizedState=d.baseState=x,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:x},d.queue=x,x=x.dispatch=ei.bind(null,Jn,x),[d.memoizedState,x]}function mc(x,d,_,$){return x={tag:x,create:d,destroy:_,deps:$,next:null},d=Jn.updateQueue,d===null?(d={lastEffect:null,stores:null},Jn.updateQueue=d,d.lastEffect=x.next=x):(_=d.lastEffect,_===null?d.lastEffect=x.next=x:($=_.next,_.next=x,x.next=$,d.lastEffect=x)),x}function ju(){return Ks().memoizedState}function md(x,d,_,$){var I=pa();Jn.flags|=x,I.memoizedState=mc(1|d,_,void 0,$===void 0?null:$)}function ta(x,d,_,$){var I=Ks();$=$===void 0?null:$;var P=void 0;if(vn!==null){var W=vn.memoizedState;if(P=W.destroy,$!==null&&vs($,W.deps)){I.memoizedState=mc(d,_,P,$);return}}Jn.flags|=x,I.memoizedState=mc(1|d,_,P,$)}function uo(x,d){return md(8390656,8,x,d)}function Ml(x,d){return ta(2048,8,x,d)}function Vh(x,d){return ta(4,2,x,d)}function zi(x,d){return ta(4,4,x,d)}function gd(x,d){if(typeof d=="function")return x=x(),d(x),function(){d(null)};if(d!=null)return x=x(),d.current=x,function(){d.current=null}}function Yu(x,d,_){return _=_!=null?_.concat([x]):null,ta(4,4,gd.bind(null,d,x),_)}function nu(){}function Gc(x,d){var _=Ks();d=d===void 0?null:d;var $=_.memoizedState;return $!==null&&d!==null&&vs(d,$[1])?$[0]:(_.memoizedState=[x,d],x)}function Id(x,d){var _=Ks();d=d===void 0?null:d;var $=_.memoizedState;return $!==null&&d!==null&&vs(d,$[1])?$[0]:(x=x(),_.memoizedState=[x,d],x)}function Al(x,d){var _=br;br=_!==0&&4>_?_:4,x(!0);var $=rn.transition;rn.transition={};try{x(!1),d()}finally{br=_,rn.transition=$}}function Rd(){return Ks().memoizedState}function jh(x,d,_){var $=bs(x);_={lane:$,action:_,hasEagerState:!1,eagerState:null,next:null},Ii(x)?Sp(d,_):(Ff(x,d,_),_=Or(),x=Os(x,$,_),x!==null&&Il(x,d,$))}function ei(x,d,_){var $=bs(x),I={lane:$,action:_,hasEagerState:!1,eagerState:null,next:null};if(Ii(x))Sp(d,I);else{Ff(x,d,I);var P=x.alternate;if(x.lanes===0&&(P===null||P.lanes===0)&&(P=d.lastRenderedReducer,P!==null))try{var W=d.lastRenderedState,de=P(W,_);if(I.hasEagerState=!0,I.eagerState=de,Gn(de,W))return}catch{}finally{}_=Or(),x=Os(x,$,_),x!==null&&Il(x,d,$)}}function Ii(x){var d=x.alternate;return x===Jn||d!==null&&d===Jn}function Sp(x,d){Ti=ao=!0;var _=x.pending;_===null?d.next=d:(d.next=_.next,_.next=d),x.pending=d}function Ff(x,d,_){tr!==null&&x.mode&1&&!(Pn&2)?(x=d.interleaved,x===null?(_.next=_,Vn===null?Vn=[d]:Vn.push(d)):(_.next=x.next,x.next=_),d.interleaved=_):(x=d.pending,x===null?_.next=_:(_.next=x.next,x.next=_),d.pending=_)}function Il(x,d,_){if(_&4194240){var $=d.lanes;$&=x.pendingLanes,_|=$,d.lanes=_,$l(x,_)}}var ru={readContext:Ci,useCallback:Fi,useContext:Fi,useEffect:Fi,useImperativeHandle:Fi,useInsertionEffect:Fi,useLayoutEffect:Fi,useMemo:Fi,useReducer:Fi,useRef:Fi,useState:Fi,useDebugValue:Fi,useDeferredValue:Fi,useTransition:Fi,useMutableSource:Fi,useSyncExternalStore:Fi,useId:Fi,unstable_isNewReconciler:!1},Xu={readContext:Ci,useCallback:function(x,d){return pa().memoizedState=[x,d===void 0?null:d],x},useContext:Ci,useEffect:uo,useImperativeHandle:function(x,d,_){return _=_!=null?_.concat([x]):null,md(4194308,4,gd.bind(null,d,x),_)},useLayoutEffect:function(x,d){return md(4194308,4,x,d)},useInsertionEffect:function(x,d){return md(4,2,x,d)},useMemo:function(x,d){var _=pa();return d=d===void 0?null:d,x=x(),_.memoizedState=[x,d],x},useReducer:function(x,d,_){var $=pa();return d=_!==void 0?_(d):d,$.memoizedState=$.baseState=d,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:d},$.queue=x,x=x.dispatch=jh.bind(null,Jn,x),[$.memoizedState,x]},useRef:function(x){var d=pa();return x={current:x},d.memoizedState=x},useState:Wh,useDebugValue:nu,useDeferredValue:function(x){var d=Wh(x),_=d[0],$=d[1];return uo(function(){var I=rn.transition;rn.transition={};try{$(x)}finally{rn.transition=I}},[x]),_},useTransition:function(){var x=Wh(!1),d=x[0];return x=Al.bind(null,x[1]),pa().memoizedState=x,[d,x]},useMutableSource:function(){},useSyncExternalStore:function(x,d,_){var $=Jn,I=pa();if(Sr){if(_===void 0)throw Error(o(407));_=_()}else{if(_=d(),tr===null)throw Error(o(349));In&30||ea($,d,_)}I.memoizedState=_;var P={value:_,getSnapshot:d};return I.queue=P,uo(Gh.bind(null,$,P,x),[x]),$.flags|=2048,mc(9,Hc.bind(null,$,P,_,d),void 0,null),_},useId:function(){var x=pa(),d=tr.identifierPrefix;if(Sr){var _=Fa,$=oo;_=($&~(1<<32-Xs($)-1)).toString(32)+_,d=":"+d+"R"+_,_=lo++,0<_&&(d+="H"+_.toString(32)),d+=":"}else _=al++,d=":"+d+"r"+_.toString(32)+":";return x.memoizedState=d},unstable_isNewReconciler:!1},Ku={readContext:Ci,useCallback:Gc,useContext:Ci,useEffect:Ml,useImperativeHandle:Yu,useInsertionEffect:Vh,useLayoutEffect:zi,useMemo:Id,useReducer:Ua,useRef:ju,useState:function(){return Ua(Hs)},useDebugValue:nu,useDeferredValue:function(x){var d=Ua(Hs),_=d[0],$=d[1];return Ml(function(){var I=rn.transition;rn.transition={};try{$(x)}finally{rn.transition=I}},[x]),_},useTransition:function(){var x=Ua(Hs)[0],d=Ks().memoizedState;return[x,d]},useMutableSource:Th,useSyncExternalStore:pc,useId:Rd,unstable_isNewReconciler:!1},Sh={readContext:Ci,useCallback:Gc,useContext:Ci,useEffect:Ml,useImperativeHandle:Yu,useInsertionEffect:Vh,useLayoutEffect:zi,useMemo:Id,useReducer:Hh,useRef:ju,useState:function(){return Hh(Hs)},useDebugValue:nu,useDeferredValue:function(x){var d=Hh(Hs),_=d[0],$=d[1];return Ml(function(){var I=rn.transition;rn.transition={};try{$(x)}finally{rn.transition=I}},[x]),_},useTransition:function(){var x=Hh(Hs)[0],d=Ks().memoizedState;return[x,d]},useMutableSource:Th,useSyncExternalStore:pc,useId:Rd,unstable_isNewReconciler:!1};function ll(x,d){try{var _="",$=d;do _+=wr($),$=$.return;while($);var I=_}catch(P){I=`
Error generating stack: `+P.message+`
`+P.stack}return{value:x,source:d,stack:I}}function na(x,d){try{console.error(d.value)}catch(_){setTimeout(function(){throw _})}}var Rl=typeof WeakMap=="function"?WeakMap:Map;function Wc(x,d,_){_=wu(-1,_),_.tag=3,_.payload={element:null};var $=d.value;return _.callback=function(){Mu||(Mu=!0,Au=$),na(x,d)},_}function kl(x,d,_){_=wu(-1,_),_.tag=3;var $=x.type.getDerivedStateFromError;if(typeof $=="function"){var I=d.value;_.payload=function(){return $(I)},_.callback=function(){na(x,d)}}var P=x.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(_.callback=function(){na(x,d),typeof $!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var W=d.stack;this.componentDidCatch(d.value,{componentStack:W!==null?W:""})}),_}function Vc(x,d,_){var $=x.pingCache;if($===null){$=x.pingCache=new Rl;var I=new Set;$.set(d,I)}else I=$.get(d),I===void 0&&(I=new Set,$.set(d,I));I.has(_)||(I.add(_),x=Qs.bind(null,x,d,_),d.then(x,x))}function gc(x){do{var d;if((d=x.tag===13)&&(d=x.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return x;x=x.return}while(x!==null);return null}function kd(x,d,_,$,I){return x.mode&1?(x.flags|=65536,x.lanes=I,x):(x===d?x.flags|=65536:(x.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(d=wu(-1,1),d.tag=2,Vi(_,d))),_.lanes|=1),x)}function Ga(x){x.flags|=4}function Vr(x,d){if(x!==null&&x.child===d.child)return!0;if(d.flags&16)return!1;for(x=d.child;x!==null;){if(x.flags&12854||x.subtreeFlags&12854)return!1;x=x.sibling}return!0}var ul,Qi,ma,X;if(lt)ul=function(x,d){for(var _=d.child;_!==null;){if(_.tag===5||_.tag===6)fe(x,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===d)break;for(;_.sibling===null;){if(_.return===null||_.return===d)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},Qi=function(){},ma=function(x,d,_,$,I){if(x=x.memoizedProps,x!==$){var P=d.stateNode,W=za(is.current);_=Fe(P,_,x,$,I,W),(d.updateQueue=_)&&Ga(d)}},X=function(x,d,_,$){_!==$&&Ga(d)};else if(ze){ul=function(x,d,_,$){for(var I=d.child;I!==null;){if(I.tag===5){var P=I.stateNode;_&&$&&(P=gr(P,I.type,I.memoizedProps,I)),fe(x,P)}else if(I.tag===6)P=I.stateNode,_&&$&&(P=ne(P,I.memoizedProps,I)),fe(x,P);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)P=I.child,P!==null&&(P.return=I),ul(x,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===d)break;for(;I.sibling===null;){if(I.return===null||I.return===d)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};var xs=function(x,d,_,$){for(var I=d.child;I!==null;){if(I.tag===5){var P=I.stateNode;_&&$&&(P=gr(P,I.type,I.memoizedProps,I)),Pr(x,P)}else if(I.tag===6)P=I.stateNode,_&&$&&(P=ne(P,I.memoizedProps,I)),Pr(x,P);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)P=I.child,P!==null&&(P.return=I),xs(x,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===d)break;for(;I.sibling===null;){if(I.return===null||I.return===d)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};Qi=function(x,d){var _=d.stateNode;if(!Vr(x,d)){x=_.containerInfo;var $=si(x);xs($,d,!1,!1),_.pendingChildren=$,Ga(d),Ei(x,$)}},ma=function(x,d,_,$,I){var P=x.stateNode,W=x.memoizedProps;if((x=Vr(x,d))&&W===$)d.stateNode=P;else{var de=d.stateNode,Oe=za(is.current),Ze=null;W!==$&&(Ze=Fe(de,_,W,$,I,Oe)),x&&Ze===null?d.stateNode=P:(P=On(P,Ze,_,W,$,d,x,de),Te(P,_,$,I,Oe)&&Ga(d),d.stateNode=P,x?Ga(d):ul(P,d,!1,!1))}},X=function(x,d,_,$){_!==$?(x=za(Cl.current),_=za(is.current),d.stateNode=qe($,x,_,d),Ga(d)):d.stateNode=x.stateNode}}else Qi=function(){},ma=function(){},X=function(){};function ga(x,d){if(!Sr)switch(x.tailMode){case"hidden":d=x.tail;for(var _=null;d!==null;)d.alternate!==null&&(_=d),d=d.sibling;_===null?x.tail=null:_.sibling=null;break;case"collapsed":_=x.tail;for(var $=null;_!==null;)_.alternate!==null&&($=_),_=_.sibling;$===null?d||x.tail===null?x.tail=null:x.tail.sibling=null:$.sibling=null}}function Mr(x){var d=x.alternate!==null&&x.alternate.child===x.child,_=0,$=0;if(d)for(var I=x.child;I!==null;)_|=I.lanes|I.childLanes,$|=I.subtreeFlags&14680064,$|=I.flags&14680064,I.return=x,I=I.sibling;else for(I=x.child;I!==null;)_|=I.lanes|I.childLanes,$|=I.subtreeFlags,$|=I.flags,I.return=x,I=I.sibling;return x.subtreeFlags|=$,x.childLanes=_,d}function mn(x,d,_){var $=d.pendingProps;switch(Fh(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mr(d),null;case 1:return fi(d.type)&&gs(),Mr(d),null;case 3:return $=d.stateNode,xu(),kr(yr),kr(Gr),Be(),$.pendingContext&&($.context=$.pendingContext,$.pendingContext=null),(x===null||x.child===null)&&(ol(d)?Ga(d):x===null||x.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,fa!==null&&(wn(fa),fa=null))),Qi(x,d),Mr(d),null;case 5:Ad(d),_=za(Cl.current);var I=d.type;if(x!==null&&d.stateNode!=null)ma(x,d,I,$,_),x.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!$){if(d.stateNode===null)throw Error(o(166));return Mr(d),null}if(x=za(is.current),ol(d)){if(!Ce)throw Error(o(175));x=Vt(d.stateNode,d.type,d.memoizedProps,_,x,d,!ji),d.updateQueue=x,x!==null&&Ga(d)}else{var P=ie(I,$,_,x,d);ul(P,d,!1,!1),d.stateNode=P,Te(P,I,$,_,x)&&Ga(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Mr(d),null;case 6:if(x&&d.stateNode!=null)X(x,d,x.memoizedProps,$);else{if(typeof $!="string"&&d.stateNode===null)throw Error(o(166));if(x=za(Cl.current),_=za(is.current),ol(d)){if(!Ce)throw Error(o(176));if(x=d.stateNode,$=d.memoizedProps,(_=Wn(x,$,d,!ji))&&(I=Wr,I!==null))switch(P=(I.mode&1)!==0,I.tag){case 3:Oa(I.stateNode.containerInfo,x,$,P);break;case 5:xo(I.type,I.memoizedProps,I.stateNode,x,$,P)}_&&Ga(d)}else d.stateNode=qe($,x,_,d)}return Mr(d),null;case 13:if(kr(pi),$=d.memoizedState,Sr&&Ai!==null&&(d.mode&1)!==0&&(d.flags&128)===0){for(x=Ai;x;)x=De(x);return Fc(),d.flags|=98560,d}if($!==null&&$.dehydrated!==null){if($=ol(d),x===null){if(!$)throw Error(o(318));if(!Ce)throw Error(o(344));if(x=d.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));rr(x,d)}else Fc(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return Mr(d),null}return fa!==null&&(wn(fa),fa=null),d.flags&128?(d.lanes=_,d):($=$!==null,_=!1,x===null?ol(d):_=x.memoizedState!==null,$&&!_&&(d.child.flags|=8192,d.mode&1&&(x===null||pi.current&1?us===0&&(us=3):Jh())),d.updateQueue!==null&&(d.flags|=4),Mr(d),null);case 4:return xu(),Qi(x,d),x===null&&rt(d.stateNode.containerInfo),Mr(d),null;case 10:return Su(d.type._context),Mr(d),null;case 17:return fi(d.type)&&gs(),Mr(d),null;case 19:if(kr(pi),I=d.memoizedState,I===null)return Mr(d),null;if($=(d.flags&128)!==0,P=I.rendering,P===null)if($)ga(I,!1);else{if(us!==0||x!==null&&x.flags&128)for(x=d.child;x!==null;){if(P=ye(x),P!==null){for(d.flags|=128,ga(I,!1),x=P.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),d.subtreeFlags=0,x=_,$=d.child;$!==null;)_=$,I=x,_.flags&=14680066,P=_.alternate,P===null?(_.childLanes=0,_.lanes=I,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=P.childLanes,_.lanes=P.lanes,_.child=P.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=P.memoizedProps,_.memoizedState=P.memoizedState,_.updateQueue=P.updateQueue,_.type=P.type,I=P.dependencies,_.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext}),$=$.sibling;return An(pi,pi.current&1|2),d.child}x=x.sibling}I.tail!==null&&qi()>vd&&(d.flags|=128,$=!0,ga(I,!1),d.lanes=4194304)}else{if(!$)if(x=ye(P),x!==null){if(d.flags|=128,$=!0,x=x.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),ga(I,!0),I.tail===null&&I.tailMode==="hidden"&&!P.alternate&&!Sr)return Mr(d),null}else 2*qi()-I.renderingStartTime>vd&&_!==1073741824&&(d.flags|=128,$=!0,ga(I,!1),d.lanes=4194304);I.isBackwards?(P.sibling=d.child,d.child=P):(x=I.last,x!==null?x.sibling=P:d.child=P,I.last=P)}return I.tail!==null?(d=I.tail,I.rendering=d,I.tail=d.sibling,I.renderingStartTime=qi(),d.sibling=null,x=pi.current,An(pi,$?x&1|2:x&1),d):(Mr(d),null);case 22:case 23:return Ft(),$=d.memoizedState!==null,x!==null&&x.memoizedState!==null!==$&&(d.flags|=8192),$&&d.mode&1?qr&1073741824&&(Mr(d),lt&&d.subtreeFlags&6&&(d.flags|=8192)):Mr(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var zf=l.ReactCurrentOwner,cl=!1;function Ri(x,d,_,$){d.child=x===null?zc(d,null,_,$):Uh(d,x.child,_,$)}function hi(x,d,_,$,I){_=_.render;var P=d.ref;return Bi(d,I),$=$u(x,d,_,$,P,I),_=qn(),x!==null&&!cl?(d.updateQueue=x.updateQueue,d.flags&=-2053,x.lanes&=~I,mi(x,d,I)):(Sr&&_&&Ql(d),d.flags|=1,Ri(x,d,$,I),d.child)}function Zi(x,d,_,$,I){if(x===null){var P=_.type;return typeof P=="function"&&!_o(P)&&P.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(d.tag=15,d.type=P,ss(x,d,P,$,I)):(x=vo(_.type,null,$,d,d.mode,I),x.ref=d.ref,x.return=d,d.child=x)}if(P=x.child,(x.lanes&I)===0){var W=P.memoizedProps;if(_=_.compare,_=_!==null?_:Hu,_(W,$)&&x.ref===d.ref)return mi(x,d,I)}return d.flags|=1,x=Dl(P,$),x.ref=d.ref,x.return=d,d.child=x}function ss(x,d,_,$,I){if(x!==null&&Hu(x.memoizedProps,$)&&x.ref===d.ref)if(cl=!1,(x.lanes&I)!==0)x.flags&131072&&(cl=!0);else return d.lanes=x.lanes,mi(x,d,I);return va(x,d,_,$,I)}function jc(x,d,_){var $=d.pendingProps,I=$.children,P=x!==null?x.memoizedState:null;if($.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},An(Ao,qr),qr|=_;else if(_&1073741824)d.memoizedState={baseLanes:0,cachePool:null},$=P!==null?P.baseLanes:_,An(Ao,qr),qr|=$;else return x=P!==null?P.baseLanes|_:_,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:x,cachePool:null},d.updateQueue=null,An(Ao,qr),qr|=x,null;else P!==null?($=P.baseLanes|_,d.memoizedState=null):$=_,An(Ao,qr),qr|=$;return Ri(x,d,I,_),d.child}function _a(x,d){var _=d.ref;(x===null&&_!==null||x!==null&&x.ref!==_)&&(d.flags|=512,d.flags|=2097152)}function va(x,d,_,$,I){var P=fi(_)?Pi:Gr.current;return P=ws(d,P),Bi(d,I),_=$u(x,d,_,$,P,I),$=qn(),x!==null&&!cl?(d.updateQueue=x.updateQueue,d.flags&=-2053,x.lanes&=~I,mi(x,d,I)):(Sr&&$&&Ql(d),d.flags|=1,Ri(x,d,_,I),d.child)}function os(x,d,_,$,I){if(fi(_)){var P=!0;dc(d)}else P=!1;if(Bi(d,I),d.stateNode===null)x!==null&&(x.alternate=null,d.alternate=null,d.flags|=2),Bf(d,_,$),Md(d,_,$,I),$=!0;else if(x===null){var W=d.stateNode,de=d.memoizedProps;W.props=de;var Oe=W.context,Ze=_.contextType;typeof Ze=="object"&&Ze!==null?Ze=Ci(Ze):(Ze=fi(_)?Pi:Gr.current,Ze=ws(d,Ze));var wt=_.getDerivedStateFromProps,Qt=typeof wt=="function"||typeof W.getSnapshotBeforeUpdate=="function";Qt||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(de!==$||Oe!==Ze)&&Tp(d,W,$,Ze),Mi=!1;var cn=d.memoizedState;W.state=cn,fr(d,$,W,I),Oe=d.memoizedState,de!==$||cn!==Oe||yr.current||Mi?(typeof wt=="function"&&(lf(d,_,wt,$),Oe=d.memoizedState),(de=Mi||uf(d,_,de,$,cn,Oe,Ze))?(Qt||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(d.flags|=4194308)):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=$,d.memoizedState=Oe),W.props=$,W.state=Oe,W.context=Ze,$=de):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),$=!1)}else{W=d.stateNode,dd(x,d),de=d.memoizedProps,Ze=d.type===d.elementType?de:Rs(d.type,de),W.props=Ze,Qt=d.pendingProps,cn=W.context,Oe=_.contextType,typeof Oe=="object"&&Oe!==null?Oe=Ci(Oe):(Oe=fi(_)?Pi:Gr.current,Oe=ws(d,Oe));var bn=_.getDerivedStateFromProps;(wt=typeof bn=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(de!==Qt||cn!==Oe)&&Tp(d,W,$,Oe),Mi=!1,cn=d.memoizedState,W.state=cn,fr(d,$,W,I);var Tn=d.memoizedState;de!==Qt||cn!==Tn||yr.current||Mi?(typeof bn=="function"&&(lf(d,_,bn,$),Tn=d.memoizedState),(Ze=Mi||uf(d,_,Ze,$,cn,Tn,Oe)||!1)?(wt||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate($,Tn,Oe),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate($,Tn,Oe)),typeof W.componentDidUpdate=="function"&&(d.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof W.componentDidUpdate!="function"||de===x.memoizedProps&&cn===x.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||de===x.memoizedProps&&cn===x.memoizedState||(d.flags|=1024),d.memoizedProps=$,d.memoizedState=Tn),W.props=$,W.state=Tn,W.context=Oe,$=Ze):(typeof W.componentDidUpdate!="function"||de===x.memoizedProps&&cn===x.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||de===x.memoizedProps&&cn===x.memoizedState||(d.flags|=1024),$=!1)}return Yc(x,d,_,$,P,I)}function Yc(x,d,_,$,I,P){_a(x,d);var W=(d.flags&128)!==0;if(!$&&!W)return I&&fc(d,_,!1),mi(x,d,P);$=d.stateNode,zf.current=d;var de=W&&typeof _.getDerivedStateFromError!="function"?null:$.render();return d.flags|=1,x!==null&&W?(d.child=Uh(d,x.child,null,P),d.child=Uh(d,null,de,P)):Ri(x,d,de,P),d.memoizedState=$.state,I&&fc(d,_,!0),d.child}function ra(x){var d=x.stateNode;d.pendingContext?tl(x,d.pendingContext,d.pendingContext!==d.context):d.context&&tl(x,d.context,!1),tu(x,d.containerInfo)}function Od(x,d,_,$,I){return Fc(),zh(I),d.flags|=256,Ri(x,d,_,$),d.child}var Ld={dehydrated:null,treeContext:null,retryLane:0};function Yh(x){return{baseLanes:x,cachePool:null}}function Gs(x,d,_){var $=d.pendingProps,I=pi.current,P=!1,W=(d.flags&128)!==0,de;if((de=W)||(de=x!==null&&x.memoizedState===null?!1:(I&2)!==0),de?(P=!0,d.flags&=-129):(x===null||x.memoizedState!==null)&&(I|=1),An(pi,I&1),x===null)return pd(d),x=d.memoizedState,x!==null&&(x=x.dehydrated,x!==null)?(d.mode&1?sn(x)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(I=$.children,x=$.fallback,P?($=d.mode,P=d.child,I={mode:"hidden",children:I},!($&1)&&P!==null?(P.childLanes=0,P.pendingProps=I):P=Xa(I,$,0,null),x=Pl(x,$,_,null),P.return=d,x.return=d,P.sibling=x,d.child=P,d.child.memoizedState=Yh(_),d.memoizedState=Ld,x):Kn(d,I));if(I=x.memoizedState,I!==null){if(de=I.dehydrated,de!==null){if(W)return d.flags&256?(d.flags&=-257,Ui(x,d,_,Error(o(422)))):d.memoizedState!==null?(d.child=x.child,d.flags|=128,null):(P=$.fallback,I=d.mode,$=Xa({mode:"visible",children:$.children},I,0,null),P=Pl(P,I,_,null),P.flags|=2,$.return=d,P.return=d,$.sibling=P,d.child=$,d.mode&1&&Uh(d,x.child,null,_),d.child.memoizedState=Yh(_),d.memoizedState=Ld,P);if(!(d.mode&1))d=Ui(x,d,_,null);else if(sn(de))d=Ui(x,d,_,Error(o(419)));else if($=(_&x.childLanes)!==0,cl||$){if($=tr,$!==null){switch(_&-_){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}$=P&($.suspendedLanes|_)?0:P,$!==0&&$!==I.retryLane&&(I.retryLane=$,Os(x,$,-1))}Jh(),d=Ui(x,d,_,Error(o(421)))}else zt(de)?(d.flags|=128,d.child=x.child,d=Ch.bind(null,x),Nn(de,d),d=null):(_=I.treeContext,Ce&&(Ai=bt(de),Wr=d,Sr=!0,fa=null,ji=!1,_!==null&&(Ba[ci++]=oo,Ba[ci++]=Fa,Ba[ci++]=Er,oo=_.id,Fa=_.overflow,Er=d)),d=Kn(d,d.pendingProps.children),d.flags|=4096);return d}return P?($=Js(x,d,$.children,$.fallback,_),P=d.child,I=x.child.memoizedState,P.memoizedState=I===null?Yh(_):{baseLanes:I.baseLanes|_,cachePool:null},P.childLanes=x.childLanes&~_,d.memoizedState=Ld,$):(_=Ws(x,d,$.children,_),d.memoizedState=null,_)}return P?($=Js(x,d,$.children,$.fallback,_),P=d.child,I=x.child.memoizedState,P.memoizedState=I===null?Yh(_):{baseLanes:I.baseLanes|_,cachePool:null},P.childLanes=x.childLanes&~_,d.memoizedState=Ld,$):(_=Ws(x,d,$.children,_),d.memoizedState=null,_)}function Kn(x,d){return d=Xa({mode:"visible",children:d},x.mode,0,null),d.return=x,x.child=d}function Ws(x,d,_,$){var I=x.child;return x=I.sibling,_=Dl(I,{mode:"visible",children:_}),!(d.mode&1)&&(_.lanes=$),_.return=d,_.sibling=null,x!==null&&($=d.deletions,$===null?(d.deletions=[x],d.flags|=16):$.push(x)),d.child=_}function Js(x,d,_,$,I){var P=d.mode;x=x.child;var W=x.sibling,de={mode:"hidden",children:_};return!(P&1)&&d.child!==x?(_=d.child,_.childLanes=0,_.pendingProps=de,d.deletions=null):(_=Dl(x,de),_.subtreeFlags=x.subtreeFlags&14680064),W!==null?$=Dl(W,$):($=Pl($,P,I,null),$.flags|=2),$.return=d,_.return=d,_.sibling=$,d.child=_,$}function Ui(x,d,_,$){return $!==null&&zh($),Uh(d,x.child,null,_),x=Kn(d,d.pendingProps.children),x.flags|=2,d.memoizedState=null,x}function iu(x,d,_){x.lanes|=d;var $=x.alternate;$!==null&&($.lanes|=d),sl(x.return,d,_)}function Uo(x,d,_,$,I){var P=x.memoizedState;P===null?x.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:$,tail:_,tailMode:I}:(P.isBackwards=d,P.rendering=null,P.renderingStartTime=0,P.last=$,P.tail=_,P.tailMode=I)}function xn(x,d,_){var $=d.pendingProps,I=$.revealOrder,P=$.tail;if(Ri(x,d,$.children,_),$=pi.current,($&2)!==0)$=$&1|2,d.flags|=128;else{if(x!==null&&x.flags&128)e:for(x=d.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&iu(x,_,d);else if(x.tag===19)iu(x,_,d);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break e;for(;x.sibling===null;){if(x.return===null||x.return===d)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}$&=1}if(An(pi,$),(d.mode&1)===0)d.memoizedState=null;else switch(I){case"forwards":for(_=d.child,I=null;_!==null;)x=_.alternate,x!==null&&ye(x)===null&&(I=_),_=_.sibling;_=I,_===null?(I=d.child,d.child=null):(I=_.sibling,_.sibling=null),Uo(d,!1,I,_,P);break;case"backwards":for(_=null,I=d.child,d.child=null;I!==null;){if(x=I.alternate,x!==null&&ye(x)===null){d.child=I;break}x=I.sibling,I.sibling=_,_=I,I=x}Uo(d,!0,_,null,P);break;case"together":Uo(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function mi(x,d,_){if(x!==null&&(d.dependencies=x.dependencies),au|=d.lanes,(_&d.childLanes)===0)return null;if(x!==null&&d.child!==x.child)throw Error(o(153));if(d.child!==null){for(x=d.child,_=Dl(x,x.pendingProps),d.child=_,_.return=d;x.sibling!==null;)x=x.sibling,_=_.sibling=Dl(x,x.pendingProps),_.return=d;_.sibling=null}return d.child}function gi(x,d,_){switch(d.tag){case 3:ra(d),Fc();break;case 5:bh(d);break;case 1:fi(d.type)&&dc(d);break;case 4:tu(d,d.stateNode.containerInfo);break;case 10:$o(d,d.type._context,d.memoizedProps.value);break;case 13:var $=d.memoizedState;if($!==null)return $.dehydrated!==null?(An(pi,pi.current&1),d.flags|=128,null):_&d.child.childLanes?Gs(x,d,_):(An(pi,pi.current&1),x=mi(x,d,_),x!==null?x.sibling:null);An(pi,pi.current&1);break;case 19:if($=(_&d.childLanes)!==0,(x.flags&128)!==0){if($)return xn(x,d,_);d.flags|=128}var I=d.memoizedState;if(I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),An(pi,pi.current),$)break;return null;case 22:case 23:return d.lanes=0,jc(x,d,_)}return mi(x,d,_)}function Uf(x,d){switch(Fh(d),d.tag){case 1:return fi(d.type)&&gs(),x=d.flags,x&65536?(d.flags=x&-65537|128,d):null;case 3:return xu(),kr(yr),kr(Gr),Be(),x=d.flags,x&65536&&!(x&128)?(d.flags=x&-65537|128,d):null;case 5:return Ad(d),null;case 13:if(kr(pi),x=d.memoizedState,x!==null&&x.dehydrated!==null){if(d.alternate===null)throw Error(o(340));Fc()}return x=d.flags,x&65536?(d.flags=x&-65537|128,d):null;case 19:return kr(pi),null;case 4:return xu(),null;case 10:return Su(d.type._context),null;case 22:case 23:return Ft(),null;case 24:return null;default:return null}}var wh=!1,co=!1,ya=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function yn(x,d){var _=x.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch($){Io(x,d,$)}else _.current=null}function hl(x,d,_){try{_()}catch($){Io(x,d,$)}}var _c=!1;function wp(x,d){for(J(x.containerInfo),Cn=d;Cn!==null;)if(x=Cn,d=x.child,(x.subtreeFlags&1028)!==0&&d!==null)d.return=x,Cn=d;else for(;Cn!==null;){x=Cn;try{var _=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var $=_.memoizedProps,I=_.memoizedState,P=x.stateNode,W=P.getSnapshotBeforeUpdate(x.elementType===x.type?$:Rs(x.type,$),I);P.__reactInternalSnapshotBeforeUpdate=W}break;case 3:lt&&Kt(x.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(de){Io(x,x.return,de)}if(d=x.sibling,d!==null){d.return=x.return,Cn=d;break}Cn=x.return}return _=_c,_c=!1,_}function su(x,d,_){var $=d.updateQueue;if($=$!==null?$.lastEffect:null,$!==null){var I=$=$.next;do{if((I.tag&x)===x){var P=I.destroy;I.destroy=void 0,P!==void 0&&hl(d,_,P)}I=I.next}while(I!==$)}}function Co(x,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var _=d=d.next;do{if((_.tag&x)===x){var $=_.create;_.destroy=$()}_=_.next}while(_!==d)}}function ys(x){var d=x.ref;if(d!==null){var _=x.stateNode;switch(x.tag){case 5:x=ue(_);break;default:x=_}typeof d=="function"?d(x):d.current=x}}function dl(x,d,_){if(ca&&typeof ca.onCommitFiberUnmount=="function")try{ca.onCommitFiberUnmount(zu,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(x=d.updateQueue,x!==null&&(x=x.lastEffect,x!==null)){var $=x=x.next;do{var I=$,P=I.destroy;I=I.tag,P!==void 0&&(I&2||I&4)&&hl(d,_,P),$=$.next}while($!==x)}break;case 1:if(yn(d,_),x=d.stateNode,typeof x.componentWillUnmount=="function")try{x.props=d.memoizedProps,x.state=d.memoizedState,x.componentWillUnmount()}catch(W){Io(d,_,W)}break;case 5:yn(d,_);break;case 4:lt?Xc(x,d,_):ze&&ze&&(d=d.stateNode.containerInfo,_=si(d),$r(d,_))}}function as(x,d,_){for(var $=d;;)if(dl(x,$,_),$.child===null||lt&&$.tag===4){if($===d)break;for(;$.sibling===null;){if($.return===null||$.return===d)return;$=$.return}$.sibling.return=$.return,$=$.sibling}else $.child.return=$,$=$.child}function fl(x){var d=x.alternate;d!==null&&(x.alternate=null,fl(d)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(d=x.stateNode,d!==null&&Nt(d)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}function Ho(x){return x.tag===5||x.tag===3||x.tag===4}function Xh(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||Ho(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function Wa(x){if(lt){e:{for(var d=x.return;d!==null;){if(Ho(d))break e;d=d.return}throw Error(o(160))}var _=d;switch(_.tag){case 5:d=_.stateNode,_.flags&32&&(Wt(d),_.flags&=-33),_=Xh(x),Nd(x,_,d);break;case 3:case 4:d=_.stateNode.containerInfo,_=Xh(x),ki(x,_,d);break;default:throw Error(o(161))}}}function ki(x,d,_){var $=x.tag;if($===5||$===6)x=x.stateNode,d?me(_,x,d):pt(_,x);else if($!==4&&(x=x.child,x!==null))for(ki(x,d,_),x=x.sibling;x!==null;)ki(x,d,_),x=x.sibling}function Nd(x,d,_){var $=x.tag;if($===5||$===6)x=x.stateNode,d?te(_,x,d):It(_,x);else if($!==4&&(x=x.child,x!==null))for(Nd(x,d,_),x=x.sibling;x!==null;)Nd(x,d,_),x=x.sibling}function Xc(x,d,_){for(var $=d,I=!1,P,W;;){if(!I){I=$.return;e:for(;;){if(I===null)throw Error(o(160));switch(P=I.stateNode,I.tag){case 5:W=!1;break e;case 3:P=P.containerInfo,W=!0;break e;case 4:P=P.containerInfo,W=!0;break e}I=I.return}I=!0}if($.tag===5||$.tag===6)as(x,$,_),W?Xe(P,$.stateNode):ke(P,$.stateNode);else if($.tag===18)W?Yr(P,$.stateNode):Br(P,$.stateNode);else if($.tag===4){if($.child!==null){P=$.stateNode.containerInfo,W=!0,$.child.return=$,$=$.child;continue}}else if(dl(x,$,_),$.child!==null){$.child.return=$,$=$.child;continue}if($===d)break;for(;$.sibling===null;){if($.return===null||$.return===d)return;$=$.return,$.tag===4&&(I=!1)}$.sibling.return=$.return,$=$.sibling}}function Kh(x,d){if(lt){switch(d.tag){case 0:case 11:case 14:case 15:su(3,d,d.return),Co(3,d),su(5,d,d.return);return;case 1:return;case 5:var _=d.stateNode;if(_!=null){var $=d.memoizedProps;x=x!==null?x.memoizedProps:$;var I=d.type,P=d.updateQueue;d.updateQueue=null,P!==null&&Q(_,P,I,x,$,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));_=d.memoizedProps,Ke(d.stateNode,x!==null?x.memoizedProps:_,_);return;case 3:Ce&&x!==null&&x.memoizedState.isDehydrated&&Cr(d.stateNode.containerInfo);return;case 12:return;case 13:Go(d);return;case 19:Go(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:su(3,d,d.return),Co(3,d),su(5,d,d.return);return;case 12:return;case 13:Go(d);return;case 19:Go(d);return;case 3:Ce&&x!==null&&x.memoizedState.isDehydrated&&Cr(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(ze){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,$r(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function Go(x){var d=x.updateQueue;if(d!==null){x.updateQueue=null;var _=x.stateNode;_===null&&(_=x.stateNode=new ya),d.forEach(function($){var I=go.bind(null,x,$);_.has($)||(_.add($),$.then(I,I))})}}function Mo(x,d){for(Cn=d;Cn!==null;){d=Cn;var _=d.deletions;if(_!==null)for(var $=0;$<_.length;$++){var I=_[$];try{var P=x;lt?Xc(P,I,d):as(P,I,d);var W=I.alternate;W!==null&&(W.return=null),I.return=null}catch(Ht){Io(I,d,Ht)}}if(_=d.child,(d.subtreeFlags&12854)!==0&&_!==null)_.return=d,Cn=_;else for(;Cn!==null;){d=Cn;try{var de=d.flags;if(de&32&&lt&&Wt(d.stateNode),de&512){var Oe=d.alternate;if(Oe!==null){var Ze=Oe.ref;Ze!==null&&(typeof Ze=="function"?Ze(null):Ze.current=null)}}if(de&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var wt=d.alternate;(wt===null||wt.memoizedState===null)&&(ho=qi())}break;case 22:var Qt=d.memoizedState!==null,cn=d.alternate,bn=cn!==null&&cn.memoizedState!==null;if(_=d,lt){e:if($=_,I=Qt,P=null,lt)for(var Tn=$;;){if(Tn.tag===5){if(P===null){P=Tn;var gn=Tn.stateNode;I?Ge(gn):_t(Tn.stateNode,Tn.memoizedProps)}}else if(Tn.tag===6){if(P===null){var Dr=Tn.stateNode;I?tn(Dr):Jt(Dr,Tn.memoizedProps)}}else if((Tn.tag!==22&&Tn.tag!==23||Tn.memoizedState===null||Tn===$)&&Tn.child!==null){Tn.child.return=Tn,Tn=Tn.child;continue}if(Tn===$)break;for(;Tn.sibling===null;){if(Tn.return===null||Tn.return===$)break e;P===Tn&&(P=null),Tn=Tn.return}P===Tn&&(P=null),Tn.sibling.return=Tn.return,Tn=Tn.sibling}}if(Qt&&!bn&&_.mode&1){Cn=_;for(var Tt=_.child;Tt!==null;){for(_=Cn=Tt;Cn!==null;){$=Cn;var Me=$.child;switch($.tag){case 0:case 11:case 14:case 15:su(4,$,$.return);break;case 1:yn($,$.return);var Ne=$.stateNode;if(typeof Ne.componentWillUnmount=="function"){var st=$.return;try{Ne.props=$.memoizedProps,Ne.state=$.memoizedState,Ne.componentWillUnmount()}catch(Ht){Io($,st,Ht)}}break;case 5:yn($,$.return);break;case 22:if($.memoizedState!==null){_d(_);continue}}Me!==null?(Me.return=$,Cn=Me):_d(_)}Tt=Tt.sibling}}}switch(de&4102){case 2:Wa(d),d.flags&=-3;break;case 6:Wa(d),d.flags&=-3,Kh(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,Kh(d.alternate,d);break;case 4:Kh(d.alternate,d)}}catch(Ht){Io(d,d.return,Ht)}if(_=d.sibling,_!==null){_.return=d.return,Cn=_;break}Cn=d.return}}}function df(x,d,_){Cn=x,Cu(x)}function Cu(x,d,_){for(var $=(x.mode&1)!==0;Cn!==null;){var I=Cn,P=I.child;if(I.tag===22&&$){var W=I.memoizedState!==null||wh;if(!W){var de=I.alternate,Oe=de!==null&&de.memoizedState!==null||co;de=wh;var Ze=co;if(wh=W,(co=Oe)&&!Ze)for(Cn=I;Cn!==null;)W=Cn,Oe=W.child,W.tag===22&&W.memoizedState!==null?vc(I):Oe!==null?(Oe.return=W,Cn=Oe):vc(I);for(;P!==null;)Cn=P,Cu(P),P=P.sibling;Cn=I,wh=de,co=Ze}Ol(x)}else I.subtreeFlags&8772&&P!==null?(P.return=I,Cn=P):Ol(x)}}function Ol(x){for(;Cn!==null;){var d=Cn;if(d.flags&8772){var _=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:co||Co(5,d);break;case 1:var $=d.stateNode;if(d.flags&4&&!co)if(_===null)$.componentDidMount();else{var I=d.elementType===d.type?_.memoizedProps:Rs(d.type,_.memoizedProps);$.componentDidUpdate(I,_.memoizedState,$.__reactInternalSnapshotBeforeUpdate)}var P=d.updateQueue;P!==null&&Zo(d,P,$);break;case 3:var W=d.updateQueue;if(W!==null){if(_=null,d.child!==null)switch(d.child.tag){case 5:_=ue(d.child.stateNode);break;case 1:_=d.child.stateNode}Zo(d,W,_)}break;case 5:var de=d.stateNode;_===null&&d.flags&4&&Le(de,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(Ce&&d.memoizedState===null){var Oe=d.alternate;if(Oe!==null){var Ze=Oe.memoizedState;if(Ze!==null){var wt=Ze.dehydrated;wt!==null&&oi(wt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}co||d.flags&512&&ys(d)}catch(Qt){Io(d,d.return,Qt)}}if(d===x){Cn=null;break}if(_=d.sibling,_!==null){_.return=d.return,Cn=_;break}Cn=d.return}}function _d(x){for(;Cn!==null;){var d=Cn;if(d===x){Cn=null;break}var _=d.sibling;if(_!==null){_.return=d.return,Cn=_;break}Cn=d.return}}function vc(x){for(;Cn!==null;){var d=Cn;try{switch(d.tag){case 0:case 11:case 15:var _=d.return;try{Co(4,d)}catch(Oe){Io(d,_,Oe)}break;case 1:var $=d.stateNode;if(typeof $.componentDidMount=="function"){var I=d.return;try{$.componentDidMount()}catch(Oe){Io(d,I,Oe)}}var P=d.return;try{ys(d)}catch(Oe){Io(d,P,Oe)}break;case 5:var W=d.return;try{ys(d)}catch(Oe){Io(d,W,Oe)}}}catch(Oe){Io(d,d.return,Oe)}if(d===x){Cn=null;break}var de=d.sibling;if(de!==null){de.return=d.return,Cn=de;break}Cn=d.return}}var Kr=0,ou=1,Ju=2,ls=3,Va=4;if(typeof Symbol=="function"&&Symbol.for){var $s=Symbol.for;Kr=$s("selector.component"),ou=$s("selector.has_pseudo_class"),Ju=$s("selector.role"),ls=$s("selector.test_id"),Va=$s("selector.text")}function Cs(x){var d=He(x);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(x=At(x),x===null)throw Error(o(362));return x.stateNode.current}function Kc(x,d){switch(d.$$typeof){case Kr:if(x.type===d.value)return!0;break;case ou:e:{d=d.value,x=[x,0];for(var _=0;_<x.length;){var $=x[_++],I=x[_++],P=d[I];if($.tag!==5||!se($)){for(;P!=null&&Kc($,P);)I++,P=d[I];if(I===d.length){d=!0;break e}else for($=$.child;$!==null;)x.push($,I),$=$.sibling}}d=!1}return d;case Ju:if(x.tag===5&&$e(x.stateNode,d.value))return!0;break;case Va:if((x.tag===5||x.tag===6)&&(x=xe(x),x!==null&&0<=x.indexOf(d.value)))return!0;break;case ls:if(x.tag===5&&(x=x.memoizedProps["data-testname"],typeof x=="string"&&x.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function _i(x){switch(x.$$typeof){case Kr:return"<"+(U(x.value)||"Unknown")+">";case ou:return":has("+(_i(x)||"")+")";case Ju:return'[role="'+x.value+'"]';case Va:return'"'+x.value+'"';case ls:return'[data-testname="'+x.value+'"]';default:throw Error(o(365))}}function ja(x,d){var _=[];x=[x,0];for(var $=0;$<x.length;){var I=x[$++],P=x[$++],W=d[P];if(I.tag!==5||!se(I)){for(;W!=null&&Kc(I,W);)P++,W=d[P];if(P===d.length)_.push(I);else for(I=I.child;I!==null;)x.push(I,P),I=I.sibling}}return _}function yc(x,d){if(!Mt)throw Error(o(363));x=Cs(x),x=ja(x,d),d=[],x=Array.from(x);for(var _=0;_<x.length;){var $=x[_++];if($.tag===5)se($)||d.push($.stateNode);else for($=$.child;$!==null;)x.push($),$=$.sibling}return d}var ff=Math.ceil,Eh=l.ReactCurrentDispatcher,ia=l.ReactCurrentOwner,Yi=l.ReactCurrentBatchConfig,Pn=0,tr=null,Nr=null,ti=0,qr=0,Ao=Di(0),us=0,es=null,au=0,qu=0,bc=0,Qu=null,qs=null,ho=0,vd=1/0;function ba(){vd=qi()+500}var Mu=!1,Au=null,fo=null,po=!1,Ll=null,Wo=0,Zu=0,ec=null,xh=-1,$h=0;function Or(){return Pn&6?qi():xh!==-1?xh:xh=qi()}function bs(x){return x.mode&1?Pn&2&&ti!==0?ti&-ti:ha.transition!==null?($h===0&&(x=mh,mh<<=1,!(mh&4194240)&&(mh=64),$h=x),$h):(x=br,x!==0?x:it()):1}function Os(x,d,_){if(50<Zu)throw Zu=0,ec=null,Error(o(185));var $=Ya(x,d);return $===null?null:(_u($,d,_),(!(Pn&2)||$!==tr)&&($===tr&&(!(Pn&2)&&(qu|=d),us===4&&Ms($,ti)),Vs($,_),d===1&&Pn===0&&!(x.mode&1)&&(ba(),so&&Da())),$)}function Ya(x,d){x.lanes|=d;var _=x.alternate;for(_!==null&&(_.lanes|=d),_=x,x=x.return;x!==null;)x.childLanes|=d,_=x.alternate,_!==null&&(_.childLanes|=d),_=x,x=x.return;return _.tag===3?_.stateNode:null}function Vs(x,d){var _=x.callbackNode;gh(x,d);var $=xi(x,x===tr?ti:0);if($===0)_!==null&&nl(_),x.callbackNode=null,x.callbackPriority=0;else if(d=$&-$,x.callbackPriority!==d){if(_!=null&&nl(_),d===1)x.tag===0?_h(lu.bind(null,x)):bu(lu.bind(null,x)),kt?vt(function(){Pn===0&&Da()}):Kl(_s,Da),_=null;else{switch(Tr($)){case 1:_=_s;break;case 4:_=il;break;case 16:_=Cd;break;case 536870912:_=io;break;default:_=Cd}_=eh(_,fn.bind(null,x))}x.callbackPriority=d,x.callbackNode=_}}function fn(x,d){if(xh=-1,$h=0,(Pn&6)!==0)throw Error(o(327));var _=x.callbackNode;if(Tc()&&x.callbackNode!==_)return null;var $=xi(x,x===tr?ti:0);if($===0)return null;if($&30||$&x.expiredLanes||d)d=qc(x,$);else{d=$;var I=Pn;Pn|=2;var P=tc();(tr!==x||ti!==d)&&(ba(),pl(x,d));do try{Xi();break}catch(de){jr(x,de)}while(!0);Tu(),Eh.current=P,Pn=I,Nr!==null?d=0:(tr=null,ti=0,d=us)}if(d!==0){if(d===2&&(I=Pc(x),I!==0&&($=I,d=Jc(x,I))),d===1)throw _=es,pl(x,0),Ms(x,$),Vs(x,qi()),_;if(d===6)Ms(x,$);else{if(I=x.current.alternate,($&30)===0&&!vi(I)&&(d=qc(x,$),d===2&&(P=Pc(x),P!==0&&($=P,d=Jc(x,P))),d===1))throw _=es,pl(x,0),Ms(x,$),Vs(x,qi()),_;switch(x.finishedWork=I,x.finishedLanes=$,d){case 0:case 1:throw Error(o(345));case 2:ml(x,qs);break;case 3:if(Ms(x,$),($&130023424)===$&&(d=ho+500-qi(),10<d)){if(xi(x,0)!==0)break;if(I=x.suspendedLanes,(I&$)!==$){Or(),x.pingedLanes|=x.suspendedLanes&I;break}x.timeoutHandle=Re(ml.bind(null,x,qs),d);break}ml(x,qs);break;case 4:if(Ms(x,$),($&4194240)===$)break;for(d=x.eventTimes,I=-1;0<$;){var W=31-Xs($);P=1<<W,W=d[W],W>I&&(I=W),$&=~P}if($=I,$=qi()-$,$=(120>$?120:480>$?480:1080>$?1080:1920>$?1920:3e3>$?3e3:4320>$?4320:1960*ff($/1960))-$,10<$){x.timeoutHandle=Re(ml.bind(null,x,qs),$);break}ml(x,qs);break;case 5:ml(x,qs);break;default:throw Error(o(329))}}}return Vs(x,qi()),x.callbackNode===_?fn.bind(null,x):null}function Jc(x,d){var _=Qu;return x.current.memoizedState.isDehydrated&&(pl(x,d).flags|=256),x=qc(x,d),x!==2&&(d=qs,qs=_,d!==null&&wn(d)),x}function wn(x){qs===null?qs=x:qs.push.apply(qs,x)}function vi(x){for(var d=x;;){if(d.flags&16384){var _=d.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var $=0;$<_.length;$++){var I=_[$],P=I.getSnapshot;I=I.value;try{if(!Gn(P(),I))return!1}catch{return!1}}}if(_=d.child,d.subtreeFlags&16384&&_!==null)_.return=d,d=_;else{if(d===x)break;for(;d.sibling===null;){if(d.return===null||d.return===x)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Ms(x,d){for(d&=~bc,d&=~qu,x.suspendedLanes|=d,x.pingedLanes&=~d,x=x.expirationTimes;0<d;){var _=31-Xs(d),$=1<<_;x[_]=-1,d&=~$}}function lu(x){if(Pn&6)throw Error(o(327));Tc();var d=xi(x,0);if(!(d&1))return Vs(x,qi()),null;var _=qc(x,d);if(x.tag!==0&&_===2){var $=Pc(x);$!==0&&(d=$,_=Jc(x,$))}if(_===1)throw _=es,pl(x,0),Ms(x,d),Vs(x,qi()),_;if(_===6)throw Error(o(345));return x.finishedWork=x.current.alternate,x.finishedLanes=d,ml(x,qs),Vs(x,qi()),null}function Nl(x){Ll!==null&&Ll.tag===0&&!(Pn&6)&&Tc();var d=Pn;Pn|=1;var _=Yi.transition,$=br;try{if(Yi.transition=null,br=1,x)return x()}finally{br=$,Yi.transition=_,Pn=d,!(Pn&6)&&Da()}}function Ft(){qr=Ao.current,kr(Ao)}function pl(x,d){x.finishedWork=null,x.finishedLanes=0;var _=x.timeoutHandle;if(_!==nt&&(x.timeoutHandle=nt,Qe(_)),Nr!==null)for(_=Nr.return;_!==null;){var $=_;switch(Fh($),$.tag){case 1:$=$.type.childContextTypes,$!=null&&gs();break;case 3:xu(),kr(yr),kr(Gr),Be();break;case 5:Ad($);break;case 4:xu();break;case 13:kr(pi);break;case 19:kr(pi);break;case 10:Su($.type._context);break;case 22:case 23:Ft()}_=_.return}if(tr=x,Nr=x=Dl(x.current,null),ti=qr=d,us=0,es=null,bc=qu=au=0,qs=Qu=null,Vn!==null){for(d=0;d<Vn.length;d++)if(_=Vn[d],$=_.interleaved,$!==null){_.interleaved=null;var I=$.next,P=_.pending;if(P!==null){var W=P.next;P.next=I,$.next=W}_.pending=$}Vn=null}return x}function jr(x,d){do{var _=Nr;try{if(Tu(),Ot.current=ru,ao){for(var $=Jn.memoizedState;$!==null;){var I=$.queue;I!==null&&(I.pending=null),$=$.next}ao=!1}if(In=0,zr=vn=Jn=null,Ti=!1,lo=0,ia.current=null,_===null||_.return===null){us=1,es=d,Nr=null;break}e:{var P=x,W=_.return,de=_,Oe=d;if(d=ti,de.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var Ze=Oe,wt=de,Qt=wt.tag;if(!(wt.mode&1)&&(Qt===0||Qt===11||Qt===15)){var cn=wt.alternate;cn?(wt.updateQueue=cn.updateQueue,wt.memoizedState=cn.memoizedState,wt.lanes=cn.lanes):(wt.updateQueue=null,wt.memoizedState=null)}var bn=gc(W);if(bn!==null){bn.flags&=-257,kd(bn,W,de,P,d),bn.mode&1&&Vc(P,Ze,d),d=bn,Oe=Ze;var Tn=d.updateQueue;if(Tn===null){var gn=new Set;gn.add(Oe),d.updateQueue=gn}else Tn.add(Oe);break e}else{if(!(d&1)){Vc(P,Ze,d),Jh();break e}Oe=Error(o(426))}}else if(Sr&&de.mode&1){var Dr=gc(W);if(Dr!==null){!(Dr.flags&65536)&&(Dr.flags|=256),kd(Dr,W,de,P,d),zh(Oe);break e}}P=Oe,us!==4&&(us=2),Qu===null?Qu=[P]:Qu.push(P),Oe=ll(Oe,de),de=W;do{switch(de.tag){case 3:de.flags|=65536,d&=-d,de.lanes|=d;var Tt=Wc(de,Oe,d);vh(de,Tt);break e;case 1:P=Oe;var Me=de.type,Ne=de.stateNode;if(!(de.flags&128)&&(typeof Me.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(fo===null||!fo.has(Ne)))){de.flags|=65536,d&=-d,de.lanes|=d;var st=kl(de,P,d);vh(de,st);break e}}de=de.return}while(de!==null)}mo(_)}catch(Ht){d=Ht,Nr===_&&_!==null&&(Nr=_=_.return);continue}break}while(!0)}function tc(){var x=Eh.current;return Eh.current=ru,x===null?ru:x}function Jh(){(us===0||us===3||us===2)&&(us=4),tr===null||!(au&268435455)&&!(qu&268435455)||Ms(tr,ti)}function qc(x,d){var _=Pn;Pn|=2;var $=tc();tr===x&&ti===d||pl(x,d);do try{ai();break}catch(I){jr(x,I)}while(!0);if(Tu(),Pn=_,Eh.current=$,Nr!==null)throw Error(o(261));return tr=null,ti=0,us}function ai(){for(;Nr!==null;)Qc(Nr)}function Xi(){for(;Nr!==null&&!rl();)Qc(Nr)}function Qc(x){var d=Iu(x.alternate,x,qr);x.memoizedProps=x.pendingProps,d===null?mo(x):Nr=d,ia.current=null}function mo(x){var d=x;do{var _=d.alternate;if(x=d.return,(d.flags&32768)===0){if(_=mn(_,d,qr),_!==null){Nr=_;return}}else{if(_=Uf(_,d),_!==null){_.flags&=32767,Nr=_;return}if(x!==null)x.flags|=32768,x.subtreeFlags=0,x.deletions=null;else{us=6,Nr=null;return}}if(d=d.sibling,d!==null){Nr=d;return}Nr=d=x}while(d!==null);us===0&&(us=5)}function ml(x,d){var _=br,$=Yi.transition;try{Yi.transition=null,br=1,Zc(x,d,_)}finally{Yi.transition=$,br=_}return null}function Zc(x,d,_){do Tc();while(Ll!==null);if(Pn&6)throw Error(o(327));var $=x.finishedWork,I=x.finishedLanes;if($===null)return null;if(x.finishedWork=null,x.finishedLanes=0,$===x.current)throw Error(o(177));x.callbackNode=null,x.callbackPriority=0;var P=$.lanes|$.childLanes;if(xl(x,P),x===tr&&(Nr=tr=null,ti=0),!($.subtreeFlags&2064)&&!($.flags&2064)||po||(po=!0,eh(Cd,function(){return Tc(),null})),P=($.flags&15990)!==0,($.subtreeFlags&15990)!==0||P){P=Yi.transition,Yi.transition=null;var W=br;br=1;var de=Pn;Pn|=4,ia.current=null,wp(x,$),Mo(x,$),re(x.containerInfo),x.current=$,df($),vu(),Pn=de,br=W,Yi.transition=P}else x.current=$;if(po&&(po=!1,Ll=x,Wo=I),P=x.pendingLanes,P===0&&(fo=null),yu($.stateNode),Vs(x,qi()),d!==null)for(_=x.onRecoverableError,$=0;$<d.length;$++)_(d[$]);if(Mu)throw Mu=!1,x=Au,Au=null,x;return Wo&1&&x.tag!==0&&Tc(),P=x.pendingLanes,P&1?x===ec?Zu++:(Zu=0,ec=x):Zu=0,Da(),null}function Tc(){if(Ll!==null){var x=Tr(Wo),d=Yi.transition,_=br;try{if(Yi.transition=null,br=16>x?16:x,Ll===null)var $=!1;else{if(x=Ll,Ll=null,Wo=0,(Pn&6)!==0)throw Error(o(331));var I=Pn;for(Pn|=4,Cn=x.current;Cn!==null;){var P=Cn,W=P.child;if(Cn.flags&16){var de=P.deletions;if(de!==null){for(var Oe=0;Oe<de.length;Oe++){var Ze=de[Oe];for(Cn=Ze;Cn!==null;){var wt=Cn;switch(wt.tag){case 0:case 11:case 15:su(8,wt,P)}var Qt=wt.child;if(Qt!==null)Qt.return=wt,Cn=Qt;else for(;Cn!==null;){wt=Cn;var cn=wt.sibling,bn=wt.return;if(fl(wt),wt===Ze){Cn=null;break}if(cn!==null){cn.return=bn,Cn=cn;break}Cn=bn}}}var Tn=P.alternate;if(Tn!==null){var gn=Tn.child;if(gn!==null){Tn.child=null;do{var Dr=gn.sibling;gn.sibling=null,gn=Dr}while(gn!==null)}}Cn=P}}if(P.subtreeFlags&2064&&W!==null)W.return=P,Cn=W;else e:for(;Cn!==null;){if(P=Cn,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:su(9,P,P.return)}var Tt=P.sibling;if(Tt!==null){Tt.return=P.return,Cn=Tt;break e}Cn=P.return}}var Me=x.current;for(Cn=Me;Cn!==null;){W=Cn;var Ne=W.child;if(W.subtreeFlags&2064&&Ne!==null)Ne.return=W,Cn=Ne;else e:for(W=Me;Cn!==null;){if(de=Cn,(de.flags&2048)!==0)try{switch(de.tag){case 0:case 11:case 15:Co(9,de)}}catch(Ht){Io(de,de.return,Ht)}if(de===W){Cn=null;break e}var st=de.sibling;if(st!==null){st.return=de.return,Cn=st;break e}Cn=de.return}}if(Pn=I,Da(),ca&&typeof ca.onPostCommitFiberRoot=="function")try{ca.onPostCommitFiberRoot(zu,x)}catch{}$=!0}return $}finally{br=_,Yi.transition=d}}return!1}function nc(x,d,_){d=ll(_,d),d=Wc(x,d,1),Vi(x,d),d=Or(),x=Ya(x,1),x!==null&&(_u(x,1,d),Vs(x,d))}function Io(x,d,_){if(x.tag===3)nc(x,x,_);else for(;d!==null;){if(d.tag===3){nc(d,x,_);break}else if(d.tag===1){var $=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof $.componentDidCatch=="function"&&(fo===null||!fo.has($))){x=ll(_,x),x=kl(d,x,1),Vi(d,x),x=Or(),d=Ya(d,1),d!==null&&(_u(d,1,x),Vs(d,x));break}}d=d.return}}function Qs(x,d,_){var $=x.pingCache;$!==null&&$.delete(d),d=Or(),x.pingedLanes|=x.suspendedLanes&_,tr===x&&(ti&_)===_&&(us===4||us===3&&(ti&130023424)===ti&&500>qi()-ho?pl(x,0):bc|=_),Vs(x,d)}function sa(x,d){d===0&&(x.mode&1?(d=Qo,Qo<<=1,!(Qo&130023424)&&(Qo=4194304)):d=1);var _=Or();x=Ya(x,d),x!==null&&(_u(x,d,_),Vs(x,_))}function Ch(x){var d=x.memoizedState,_=0;d!==null&&(_=d.retryLane),sa(x,_)}function go(x,d){var _=0;switch(x.tag){case 13:var $=x.stateNode,I=x.memoizedState;I!==null&&(_=I.retryLane);break;case 19:$=x.stateNode;break;default:throw Error(o(314))}$!==null&&$.delete(d),sa(x,_)}var Iu;Iu=function(x,d,_){if(x!==null)if(x.memoizedProps!==d.pendingProps||yr.current)cl=!0;else{if(!(x.lanes&_)&&!(d.flags&128))return cl=!1,gi(x,d,_);cl=(x.flags&131072)!==0}else cl=!1,Sr&&d.flags&1048576&&ql(d,yh,d.index);switch(d.lanes=0,d.tag){case 2:var $=d.type;x!==null&&(x.alternate=null,d.alternate=null,d.flags|=2),x=d.pendingProps;var I=ws(d,Gr.current);Bi(d,_),I=$u(null,d,$,x,I,_);var P=qn();return d.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,fi($)?(P=!0,dc(d)):P=!1,d.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,Xr(d),I.updater=Bc,d.stateNode=I,I._reactInternals=d,Md(d,$,x,_),d=Yc(null,d,$,!0,P,_)):(d.tag=0,Sr&&P&&Ql(d),Ri(null,d,I,_),d=d.child),d;case 16:$=d.elementType;e:{switch(x!==null&&(x.alternate=null,d.alternate=null,d.flags|=2),x=d.pendingProps,I=$._init,$=I($._payload),d.type=$,I=d.tag=rc($),x=Rs($,x),I){case 0:d=va(null,d,$,x,_);break e;case 1:d=os(null,d,$,x,_);break e;case 11:d=hi(null,d,$,x,_);break e;case 14:d=Zi(null,d,$,Rs($.type,x),_);break e}throw Error(o(306,$,""))}return d;case 0:return $=d.type,I=d.pendingProps,I=d.elementType===$?I:Rs($,I),va(x,d,$,I,_);case 1:return $=d.type,I=d.pendingProps,I=d.elementType===$?I:Rs($,I),os(x,d,$,I,_);case 3:e:{if(ra(d),x===null)throw Error(o(387));$=d.pendingProps,P=d.memoizedState,I=P.element,dd(x,d),fr(d,$,null,_);var W=d.memoizedState;if($=W.element,Ce&&P.isDehydrated)if(P={element:$,isDehydrated:!1,cache:W.cache,transitions:W.transitions},d.updateQueue.baseState=P,d.memoizedState=P,d.flags&256){I=Error(o(423)),d=Od(x,d,$,_,I);break e}else if($!==I){I=Error(o(424)),d=Od(x,d,$,_,I);break e}else for(Ce&&(Ai=Ct(d.stateNode.containerInfo),Wr=d,Sr=!0,fa=null,ji=!1),_=zc(d,null,$,_),d.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(Fc(),$===I){d=mi(x,d,_);break e}Ri(x,d,$,_)}d=d.child}return d;case 5:return bh(d),x===null&&pd(d),$=d.type,I=d.pendingProps,P=x!==null?x.memoizedProps:null,W=I.children,Ie($,I)?W=null:P!==null&&Ie($,P)&&(d.flags|=32),_a(x,d),Ri(x,d,W,_),d.child;case 6:return x===null&&pd(d),null;case 13:return Gs(x,d,_);case 4:return tu(d,d.stateNode.containerInfo),$=d.pendingProps,x===null?d.child=Uh(d,null,$,_):Ri(x,d,$,_),d.child;case 11:return $=d.type,I=d.pendingProps,I=d.elementType===$?I:Rs($,I),hi(x,d,$,I,_);case 7:return Ri(x,d,d.pendingProps,_),d.child;case 8:return Ri(x,d,d.pendingProps.children,_),d.child;case 12:return Ri(x,d,d.pendingProps.children,_),d.child;case 10:e:{if($=d.type._context,I=d.pendingProps,P=d.memoizedProps,W=I.value,$o(d,$,W),P!==null)if(Gn(P.value,W)){if(P.children===I.children&&!yr.current){d=mi(x,d,_);break e}}else for(P=d.child,P!==null&&(P.return=d);P!==null;){var de=P.dependencies;if(de!==null){W=P.child;for(var Oe=de.firstContext;Oe!==null;){if(Oe.context===$){if(P.tag===1){Oe=wu(-1,_&-_),Oe.tag=2;var Ze=P.updateQueue;if(Ze!==null){Ze=Ze.shared;var wt=Ze.pending;wt===null?Oe.next=Oe:(Oe.next=wt.next,wt.next=Oe),Ze.pending=Oe}}P.lanes|=_,Oe=P.alternate,Oe!==null&&(Oe.lanes|=_),sl(P.return,_,d),de.lanes|=_;break}Oe=Oe.next}}else if(P.tag===10)W=P.type===d.type?null:P.child;else if(P.tag===18){if(W=P.return,W===null)throw Error(o(341));W.lanes|=_,de=W.alternate,de!==null&&(de.lanes|=_),sl(W,_,d),W=P.sibling}else W=P.child;if(W!==null)W.return=P;else for(W=P;W!==null;){if(W===d){W=null;break}if(P=W.sibling,P!==null){P.return=W.return,W=P;break}W=W.return}P=W}Ri(x,d,I.children,_),d=d.child}return d;case 9:return I=d.type,$=d.pendingProps.children,Bi(d,_),I=Ci(I),$=$(I),d.flags|=1,Ri(x,d,$,_),d.child;case 14:return $=d.type,I=Rs($,d.pendingProps),I=Rs($.type,I),Zi(x,d,$,I,_);case 15:return ss(x,d,d.type,d.pendingProps,_);case 17:return $=d.type,I=d.pendingProps,I=d.elementType===$?I:Rs($,I),x!==null&&(x.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,fi($)?(x=!0,dc(d)):x=!1,Bi(d,_),Bf(d,$,I),Md(d,$,I,_),Yc(null,d,$,!0,x,_);case 19:return xn(x,d,_);case 22:return jc(x,d,_)}throw Error(o(156,d.tag))};function eh(x,d){return Kl(x,d)}function Sc(x,d,_,$){this.tag=x,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=$,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vo(x,d,_,$){return new Sc(x,d,_,$)}function _o(x){return x=x.prototype,!(!x||!x.isReactComponent)}function rc(x){if(typeof x=="function")return _o(x)?1:0;if(x!=null){if(x=x.$$typeof,x===C)return 11;if(x===O)return 14}return 2}function Dl(x,d){var _=x.alternate;return _===null?(_=Vo(x.tag,d,x.key,x.mode),_.elementType=x.elementType,_.type=x.type,_.stateNode=x.stateNode,_.alternate=x,x.alternate=_):(_.pendingProps=d,_.type=x.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=x.flags&14680064,_.childLanes=x.childLanes,_.lanes=x.lanes,_.child=x.child,_.memoizedProps=x.memoizedProps,_.memoizedState=x.memoizedState,_.updateQueue=x.updateQueue,d=x.dependencies,_.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},_.sibling=x.sibling,_.index=x.index,_.ref=x.ref,_}function vo(x,d,_,$,I,P){var W=2;if($=x,typeof x=="function")_o(x)&&(W=1);else if(typeof x=="string")W=5;else e:switch(x){case f:return Pl(_.children,I,P,d);case g:W=8,I|=8;break;case y:return x=Vo(12,_,d,I|2),x.elementType=y,x.lanes=P,x;case M:return x=Vo(13,_,d,I),x.elementType=M,x.lanes=P,x;case A:return x=Vo(19,_,d,I),x.elementType=A,x.lanes=P,x;case B:return Xa(_,I,P,d);default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case b:W=10;break e;case S:W=9;break e;case C:W=11;break e;case O:W=14;break e;case L:W=16,$=null;break e}throw Error(o(130,x==null?x:typeof x,""))}return d=Vo(W,_,d,I),d.elementType=x,d.type=$,d.lanes=P,d}function Pl(x,d,_,$){return x=Vo(7,x,$,d),x.lanes=_,x}function Xa(x,d,_,$){return x=Vo(22,x,$,d),x.elementType=B,x.lanes=_,x.stateNode={},x}function uu(x,d,_){return x=Vo(6,x,null,d),x.lanes=_,x}function ni(x,d,_){return d=Vo(4,x.children!==null?x.children:[],x.key,d),d.lanes=_,d.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},d}function cs(x,d,_,$,I){this.tag=d,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=nt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=El(0),this.expirationTimes=El(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=El(0),this.identifierPrefix=$,this.onRecoverableError=I,Ce&&(this.mutableSourceEagerHydrationData=null)}function qh(x,d,_,$,I,P,W,de,Oe){return x=new cs(x,d,_,de,Oe),d===1?(d=1,P===!0&&(d|=8)):d=0,P=Vo(3,null,null,d),x.current=P,P.stateNode=x,P.memoizedState={element:$,isDehydrated:_,cache:null,transitions:null},Xr(P),x}function yd(x){if(!x)return Ir;x=x._reactInternals;e:{if(H(x)!==x||x.tag!==1)throw Error(o(170));var d=x;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(fi(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(x.tag===1){var _=x.type;if(fi(_))return Na(x,_,d)}return d}function Ta(x){var d=x._reactInternals;if(d===void 0)throw typeof x.render=="function"?Error(o(188)):(x=Object.keys(x).join(","),Error(o(268,x)));return x=Z(d),x===null?null:x.stateNode}function Sa(x,d){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var _=x.retryLane;x.retryLane=_!==0&&_<d?_:d}}function Qh(x,d){Sa(x,d),(x=x.alternate)&&Sa(x,d)}function wc(x){return x=Z(x),x===null?null:x.stateNode}function Hf(){return null}return e.attemptContinuousHydration=function(x){if(x.tag===13){var d=Or();Os(x,134217728,d),Qh(x,134217728)}},e.attemptHydrationAtCurrentPriority=function(x){if(x.tag===13){var d=Or(),_=bs(x);Os(x,_,d),Qh(x,_)}},e.attemptSynchronousHydration=function(x){switch(x.tag){case 3:var d=x.stateNode;if(d.current.memoizedState.isDehydrated){var _=vr(d.pendingLanes);_!==0&&($l(d,_|1),Vs(d,qi()),!(Pn&6)&&(ba(),Da()))}break;case 13:var $=Or();Nl(function(){return Os(x,1,$)}),Qh(x,1)}},e.batchedUpdates=function(x,d){var _=Pn;Pn|=1;try{return x(d)}finally{Pn=_,Pn===0&&(ba(),so&&Da())}},e.createComponentSelector=function(x){return{$$typeof:Kr,value:x}},e.createContainer=function(x,d,_,$,I,P,W){return qh(x,d,!1,null,_,$,I,P,W)},e.createHasPseudoClassSelector=function(x){return{$$typeof:ou,value:x}},e.createHydrationContainer=function(x,d,_,$,I,P,W,de,Oe){return x=qh(_,$,!0,x,I,P,W,de,Oe),x.context=yd(null),_=x.current,$=Or(),I=bs(_),P=wu($,I),P.callback=d??null,Vi(_,P),x.current.lanes=I,_u(x,I,$),Vs(x,$),x},e.createPortal=function(x,d,_){var $=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:$==null?null:""+$,children:x,containerInfo:d,implementation:_}},e.createRoleSelector=function(x){return{$$typeof:Ju,value:x}},e.createTestNameSelector=function(x){return{$$typeof:ls,value:x}},e.createTextSelector=function(x){return{$$typeof:Va,value:x}},e.deferredUpdates=function(x){var d=br,_=Yi.transition;try{return Yi.transition=null,br=16,x()}finally{br=d,Yi.transition=_}},e.discreteUpdates=function(x,d,_,$,I){var P=br,W=Yi.transition;try{return Yi.transition=null,br=1,x(d,_,$,I)}finally{br=P,Yi.transition=W,Pn===0&&ba()}},e.findAllNodes=yc,e.findBoundingRects=function(x,d){if(!Mt)throw Error(o(363));d=yc(x,d),x=[];for(var _=0;_<d.length;_++)x.push(mt(d[_]));for(d=x.length-1;0<d;d--){_=x[d];for(var $=_.x,I=$+_.width,P=_.y,W=P+_.height,de=d-1;0<=de;de--)if(d!==de){var Oe=x[de],Ze=Oe.x,wt=Ze+Oe.width,Qt=Oe.y,cn=Qt+Oe.height;if($>=Ze&&P>=Qt&&I<=wt&&W<=cn){x.splice(d,1);break}else if($!==Ze||_.width!==Oe.width||cn<P||Qt>W){if(!(P!==Qt||_.height!==Oe.height||wt<$||Ze>I)){Ze>$&&(Oe.width+=Ze-$,Oe.x=$),wt<I&&(Oe.width=I-Ze),x.splice(d,1);break}}else{Qt>P&&(Oe.height+=Qt-P,Oe.y=P),cn<W&&(Oe.height=W-Qt),x.splice(d,1);break}}}return x},e.findHostInstance=Ta,e.findHostInstanceWithNoPortals=function(x){return x=le(x),x=x!==null?he(x):null,x===null?null:x.stateNode},e.findHostInstanceWithWarning=function(x){return Ta(x)},e.flushControlled=function(x){var d=Pn;Pn|=1;var _=Yi.transition,$=br;try{Yi.transition=null,br=1,x()}finally{br=$,Yi.transition=_,Pn=d,Pn===0&&(ba(),Da())}},e.flushPassiveEffects=Tc,e.flushSync=Nl,e.focusWithin=function(x,d){if(!Mt)throw Error(o(363));for(x=Cs(x),d=ja(x,d),d=Array.from(d),x=0;x<d.length;){var _=d[x++];if(!se(_)){if(_.tag===5&&ht(_.stateNode))return!0;for(_=_.child;_!==null;)d.push(_),_=_.sibling}}return!1},e.getCurrentUpdatePriority=function(){return br},e.getFindAllNodesFailureDescription=function(x,d){if(!Mt)throw Error(o(363));var _=0,$=[];x=[Cs(x),0];for(var I=0;I<x.length;){var P=x[I++],W=x[I++],de=d[W];if((P.tag!==5||!se(P))&&(Kc(P,de)&&($.push(_i(de)),W++,W>_&&(_=W)),W<d.length))for(P=P.child;P!==null;)x.push(P,W),P=P.sibling}if(_<d.length){for(x=[];_<d.length;_++)x.push(_i(d[_]));return`findAllNodes was able to match part of the selector:
  `+($.join(" > ")+`

No matching component was found for:
  `)+x.join(" > ")}return null},e.getPublicRootInstance=function(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return ue(x.child.stateNode);default:return x.child.stateNode}},e.injectIntoDevTools=function(x){if(x={bundleType:x.bundleType,version:x.version,rendererPackageName:x.rendererPackageName,rendererConfig:x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:wc,findFiberByHostInstance:x.findFiberByHostInstance||Hf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")x=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)x=!0;else{try{zu=d.inject(x),ca=d}catch{}x=!!d.checkDCE}}return x},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(x,d,_,$){if(!Mt)throw Error(o(363));x=yc(x,d);var I=St(x,_,$).disconnect;return{disconnect:function(){I()}}},e.registerMutableSourceForHydration=function(x,d){var _=d._getVersion;_=_(d._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[d,_]:x.mutableSourceEagerHydrationData.push(d,_)},e.runWithPriority=function(x,d){var _=br;try{return br=x,d()}finally{br=_}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(x,d,_,$){var I=d.current,P=Or(),W=bs(I);return _=yd(_),d.context===null?d.context=_:d.pendingContext=_,d=wu(P,W),d.payload={element:x},$=$===void 0?null:$,$!==null&&(d.callback=$),Vi(I,d),x=Os(I,W,P),x!==null&&Pa(x,I,W),W},e}),V6}(function(n){n.exports=OMe()})(xZ);const LMe=EZ(xZ.exports);function NMe(n,e,t=(r,s)=>r===s){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let s=0;s<r;s++)if(!t(n[s],e[s]))return!1;return!0}const IA=[];function DMe(n,e,t=!1,r={}){for(const o of IA)if(NMe(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return o.response;if(!t)throw o.promise}const s={keys:e,equal:r.equal,promise:n(...e).then(o=>s.response=o).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const o=IA.indexOf(s);o!==-1&&IA.splice(o,1)},r.lifespan)}).catch(o=>s.error=o)};if(IA.push(s),!t)throw s.promise}const PMe=(n,e,t)=>DMe(n,e,!1,t);var w2={exports:{}},_x={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y6;function BMe(){if(Y6)return _x;Y6=1;var n=yt,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,f){var g,y={},b=null,S=null;f!==void 0&&(b=""+f),h.key!==void 0&&(b=""+h.key),h.ref!==void 0&&(S=h.ref);for(g in h)r.call(h,g)&&!o.hasOwnProperty(g)&&(y[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:u,key:b,ref:S,props:y,_owner:s.current}}return _x.Fragment=t,_x.jsx=l,_x.jsxs=l,_x}(function(n){n.exports=BMe()})(w2);const BC=w2.exports.Fragment,un=w2.exports.jsx,Bh=w2.exports.jsxs,w4={},FMe=n=>void Object.assign(w4,n);function zMe(n,e){function t(f,{args:g=[],attach:y,...b},S){let C=`${f[0].toUpperCase()}${f.slice(1)}`,M;if(f==="primitive"){if(b.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const A=b.object;M=DS(A,{type:f,root:S,attach:y,primitive:!0})}else{const A=w4[C];if(!A)throw new Error(`R3F: ${C} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(g))throw new Error("R3F: The args prop must be an array!");M=DS(new A(...g),{type:f,root:S,attach:y,memoizedProps:{args:g}})}return M.__r3f.attach===void 0&&(M instanceof ui?M.__r3f.attach="geometry":M instanceof hd&&(M.__r3f.attach="material")),C!=="inject"&&ZL(M,b),M}function r(f,g){let y=!1;if(g){var b,S;(b=g.__r3f)!=null&&b.attach?QL(f,g,g.__r3f.attach):g.isObject3D&&f.isObject3D&&(f.add(g),y=!0),y||(S=f.__r3f)==null||S.objects.push(g),g.__r3f||DS(g,{}),g.__r3f.parent=f,BP(g),PS(g)}}function s(f,g,y){let b=!1;if(g){var S,C;if((S=g.__r3f)!=null&&S.attach)QL(f,g,g.__r3f.attach);else if(g.isObject3D&&f.isObject3D){g.parent=f,g.dispatchEvent({type:"added"});const M=f.children.filter(O=>O!==g),A=M.indexOf(y);f.children=[...M.slice(0,A),g,...M.slice(A)],b=!0}b||(C=f.__r3f)==null||C.objects.push(g),g.__r3f||DS(g,{}),g.__r3f.parent=f,BP(g),PS(g)}}function o(f,g,y=!1){f&&[...f].forEach(b=>l(g,b,y))}function l(f,g,y){if(g){var b,S,C;if(g.__r3f&&(g.__r3f.parent=null),(b=f.__r3f)!=null&&b.objects&&(f.__r3f.objects=f.__r3f.objects.filter(B=>B!==g)),(S=g.__r3f)!=null&&S.attach)Q6(f,g,g.__r3f.attach);else if(g.isObject3D&&f.isObject3D){var M;f.remove(g),(M=g.__r3f)!=null&&M.root&&YMe(g.__r3f.root,g)}const O=(C=g.__r3f)==null?void 0:C.primitive,L=y===void 0?g.dispose!==null&&!O:y;if(!O){var A;o((A=g.__r3f)==null?void 0:A.objects,g,L),o(g.children,g,L)}g.__r3f&&(delete g.__r3f.root,delete g.__r3f.objects,delete g.__r3f.handlers,delete g.__r3f.memoizedProps,O||delete g.__r3f),L&&g.dispose&&g.type!=="Scene"&&ER.exports.unstable_scheduleCallback(ER.exports.unstable_IdlePriority,()=>{try{g.dispose()}catch{}}),PS(f)}}function u(f,g,y,b){var S;const C=(S=f.__r3f)==null?void 0:S.parent;if(!C)return;const M=t(g,y,f.__r3f.root);if(f.children){for(const A of f.children)A.__r3f&&r(M,A);f.children=f.children.filter(A=>!A.__r3f)}f.__r3f.objects.forEach(A=>r(M,A)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||l(C,f),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),r(C,M),M.raycast&&M.__r3f.eventCount&&M.__r3f.root.getState().internal.interaction.push(M),[b,b.alternate].forEach(A=>{A!==null&&(A.stateNode=M,A.ref&&(typeof A.ref=="function"?A.ref(M):A.ref.current=M))})}const h=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:LMe({createInstance:t,removeChild:l,appendChild:r,appendInitialChild:r,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,g)=>{if(!g)return;const y=f.getState().scene;!y.__r3f||(y.__r3f.root=f,r(y,g))},removeChildFromContainer:(f,g)=>{!g||l(f.getState().scene,g)},insertInContainerBefore:(f,g,y)=>{if(!g||!y)return;const b=f.getState().scene;!b.__r3f||s(b,g,y)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var g;return!!((g=f==null?void 0:f.__r3f)!=null?g:{}).handlers},prepareUpdate(f,g,y,b){if(f.__r3f.primitive&&b.object&&b.object!==f)return[!0];{const{args:S=[],children:C,...M}=b,{args:A=[],children:O,...L}=y;if(!Array.isArray(S))throw new Error("R3F: the args prop must be an array!");if(S.some((D,z)=>D!==A[z]))return[!0];const B=kZ(f,M,L,!0);return B.changes.length?[!1,B]:null}},commitUpdate(f,[g,y],b,S,C,M){g?u(f,b,C,M):ZL(f,y)},commitMount(f,g,y,b){var S;const C=(S=f.__r3f)!=null?S:{};f.raycast&&C.handlers&&C.eventCount&&f.__r3f.root.getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>DS(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var g;const{attach:y,parent:b}=(g=f.__r3f)!=null?g:{};y&&b&&Q6(b,f,y),f.isObject3D&&(f.visible=!1),PS(f)},unhideInstance(f,g){var y;const{attach:b,parent:S}=(y=f.__r3f)!=null?y:{};b&&S&&QL(S,f,b),(f.isObject3D&&g.visible==null||g.visible)&&(f.visible=!0),PS(f)},createTextInstance:h,hideTextInstance:h,unhideTextInstance:h,getCurrentEventPriority:()=>e?e():A1.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Bu.fun(performance.now)?performance.now:Bu.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Bu.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Bu.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ZL}}var X6,K6;const $Z=()=>{var n;return(n=w4.ColorManagement)!=null?n:null},CZ=n=>n&&n.isOrthographicCamera,UMe=n=>n&&n.hasOwnProperty("current"),FC=typeof window<"u"&&((X6=window.document)!=null&&X6.createElement||((K6=window.navigator)==null?void 0:K6.product)==="ReactNative")?pe.useLayoutEffect:pe.useEffect;function MZ(n){const e=pe.useRef(n);return FC(()=>void(e.current=n),[n]),e}function HMe({set:n}){return FC(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class AZ extends pe.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}AZ.getDerivedStateFromError=()=>({error:!0});const IZ="__default",J6=new Map,GMe=n=>n&&!!n.memoized&&!!n.changes;function RZ(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const vx=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Bu={obj:n=>n===Object(n)&&!Bu.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Bu.str(n)||Bu.num(n))return n===e;const o=Bu.obj(n);if(o&&r==="reference")return n===e;const l=Bu.arr(n);if(l&&t==="reference")return n===e;if((l||o)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(o&&t==="shallow"&&r==="shallow"){for(u in s?e:n)if(!Bu.equ(n[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:n)if(n[u]!==e[u])return!1;if(Bu.und(u)){if(l&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function WMe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function DS(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function PP(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),s=r.pop();return t=r.reduce((o,l)=>o[l],n),{target:t,key:s}}else return{target:t,key:e}}const q6=/-\d+$/;function QL(n,e,t){if(Bu.str(t)){if(q6.test(t)){const o=t.replace(q6,""),{target:l,key:u}=PP(n,o);Array.isArray(l[u])||(l[u]=[])}const{target:r,key:s}=PP(n,t);e.__r3f.previousAttach=r[s],r[s]=e}else e.__r3f.previousAttach=t(n,e)}function Q6(n,e,t){var r,s;if(Bu.str(t)){const{target:o,key:l}=PP(n,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function kZ(n,{children:e,key:t,ref:r,...s},{children:o,key:l,ref:u,...h}={},f=!1){var g;const y=(g=n==null?void 0:n.__r3f)!=null?g:{},b=Object.entries(s),S=[];if(f){const M=Object.keys(h);for(let A=0;A<M.length;A++)s.hasOwnProperty(M[A])||b.unshift([M[A],IZ+"remove"])}b.forEach(([M,A])=>{var O;if((O=n.__r3f)!=null&&O.primitive&&M==="object"||Bu.equ(A,h[M]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(M))return S.push([M,A,!0,[]]);let L=[];M.includes("-")&&(L=M.split("-")),S.push([M,A,!1,L]);for(const B in s){const D=s[B];B.startsWith(`${M}-`)&&S.push([B,D,!1,B.split("-")])}});const C={...s};return y.memoizedProps&&y.memoizedProps.args&&(C.args=y.memoizedProps.args),y.memoizedProps&&y.memoizedProps.attach&&(C.attach=y.memoizedProps.attach),{memoized:C,changes:S}}function ZL(n,e){var t,r,s;const o=(t=n.__r3f)!=null?t:{},l=o.root,u=(r=l==null||l.getState==null?void 0:l.getState())!=null?r:{},{memoized:h,changes:f}=GMe(e)?e:kZ(n,e),g=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=h);for(let y=0;y<f.length;y++){let[b,S,C,M]=f[y],A=n,O=A[b];if(M.length&&(O=M.reduce((L,B)=>L[B],n),!(O&&O.set))){const[L,...B]=M.reverse();A=B.reverse().reduce((D,z)=>D[z],n),b=L}if(S===IZ+"remove")if(A.constructor){let L=J6.get(A.constructor);L||(L=new A.constructor,J6.set(A.constructor,L)),S=L[b]}else S=0;if(C)S?o.handlers[b]=S:delete o.handlers[b],o.eventCount=Object.keys(o.handlers).length;else if(O&&O.set&&(O.copy||O instanceof B1)){if(Array.isArray(S))O.fromArray?O.fromArray(S):O.set(...S);else if(O.copy&&S&&S.constructor&&O.constructor===S.constructor)O.copy(S);else if(S!==void 0){const L=O instanceof Bn;!L&&O.setScalar?O.setScalar(S):O instanceof B1&&S instanceof B1?O.mask=S.mask:O.set(S),!$Z()&&!u.linear&&L&&O.convertSRGBToLinear()}}else A[b]=S,!u.linear&&A[b]instanceof hc&&A[b].format===jp&&A[b].type===af&&(A[b].encoding=ms);PS(n)}if(o.parent&&u.internal&&n.raycast&&g!==o.eventCount){const y=u.internal.interaction.indexOf(n);y>-1&&u.internal.interaction.splice(y,1),o.eventCount&&u.internal.interaction.push(n)}return!(f.length===1&&f[0][0]==="onUpdate")&&f.length&&(s=n.__r3f)!=null&&s.parent&&BP(n),n}function PS(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function BP(n){n.onUpdate==null||n.onUpdate(n)}function VMe(n,e){n.manual||(CZ(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function RA(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function jMe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return A1.exports.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return A1.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return A1.exports.ContinuousEventPriority;default:return A1.exports.DefaultEventPriority}}function OZ(n,e,t,r){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(r),s.target.releasePointerCapture(r)))}function YMe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,s)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((r,s)=>{OZ(t.capturedMap,e,r,s)})}function XMe(n){function e(h){const{internal:f}=n.getState(),g=h.offsetX-f.initialClick[0],y=h.offsetY-f.initialClick[1];return Math.round(Math.sqrt(g*g+y*y))}function t(h){return h.filter(f=>["Move","Over","Enter","Out","Leave"].some(g=>{var y;return(y=f.__r3f)==null?void 0:y.handlers["onPointer"+g]}))}function r(h,f){const g=n.getState(),y=new Set,b=[],S=f?f(g.internal.interaction):g.internal.interaction;for(let O=0;O<S.length;O++){const L=vx(S[O]);L&&(L.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(h,g);function C(O){const L=vx(O);if(!L||!L.events.enabled||L.raycaster.camera===null)return[];if(L.raycaster.camera===void 0){var B;L.events.compute==null||L.events.compute(h,L,(B=L.previousRoot)==null?void 0:B.getState()),L.raycaster.camera===void 0&&(L.raycaster.camera=null)}return L.raycaster.camera?L.raycaster.intersectObject(O,!0):[]}let M=S.flatMap(C).sort((O,L)=>{const B=vx(O.object),D=vx(L.object);return!B||!D?O.distance-L.distance:D.events.priority-B.events.priority||O.distance-L.distance}).filter(O=>{const L=RA(O);return y.has(L)?!1:(y.add(L),!0)});g.events.filter&&(M=g.events.filter(M,g));for(const O of M){let L=O.object;for(;L;){var A;(A=L.__r3f)!=null&&A.eventCount&&b.push({...O,eventObject:L}),L=L.parent}}if("pointerId"in h&&g.internal.capturedMap.has(h.pointerId))for(let O of g.internal.capturedMap.get(h.pointerId).values())y.has(RA(O.intersection))||b.push(O.intersection);return b}function s(h,f,g,y){const b=n.getState();if(h.length){const S={stopped:!1};for(const C of h){const M=vx(C.object)||b,{raycaster:A,pointer:O,camera:L,internal:B}=M,D=new Ae(O.x,O.y,0).unproject(L),z=le=>{var Z,q;return(Z=(q=B.capturedMap.get(le))==null?void 0:q.has(C.eventObject))!=null?Z:!1},U=le=>{const Z={intersection:C,target:f.target};B.capturedMap.has(le)?B.capturedMap.get(le).set(C.eventObject,Z):B.capturedMap.set(le,new Map([[C.eventObject,Z]])),f.target.setPointerCapture(le)},V=le=>{const Z=B.capturedMap.get(le);Z&&OZ(B.capturedMap,C.eventObject,Z,le)};let H={};for(let le in f){let Z=f[le];typeof Z!="function"&&(H[le]=Z)}let oe={...C,...H,pointer:O,intersections:h,stopped:S.stopped,delta:g,unprojectedPoint:D,ray:A.ray,camera:L,stopPropagation(){const le="pointerId"in f&&B.capturedMap.get(f.pointerId);if((!le||le.has(C.eventObject))&&(oe.stopped=S.stopped=!0,B.hovered.size&&Array.from(B.hovered.values()).find(Z=>Z.eventObject===C.eventObject))){const Z=h.slice(0,h.indexOf(C));o([...Z,C])}},target:{hasPointerCapture:z,setPointerCapture:U,releasePointerCapture:V},currentTarget:{hasPointerCapture:z,setPointerCapture:U,releasePointerCapture:V},nativeEvent:f};if(y(oe),S.stopped===!0)break}}return h}function o(h){const{internal:f}=n.getState();for(const g of f.hovered.values())if(!h.length||!h.find(y=>y.object===g.object&&y.index===g.index&&y.instanceId===g.instanceId)){const y=g.eventObject.__r3f,b=y==null?void 0:y.handlers;if(f.hovered.delete(RA(g)),y!=null&&y.eventCount){const S={...g,intersections:h};b.onPointerOut==null||b.onPointerOut(S),b.onPointerLeave==null||b.onPointerLeave(S)}}}function l(h,f){for(let g=0;g<f.length;g++){const y=f[g].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(h)}}function u(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return f=>{const{internal:g}=n.getState();"pointerId"in f&&g.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(f.pointerId)&&(g.capturedMap.delete(f.pointerId),o([]))})}}return function(f){const{onPointerMissed:g,internal:y}=n.getState();y.lastEvent.current=f;const b=h==="onPointerMove",S=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",C=r(f,b?t:void 0),M=S?e(f):0;h==="onPointerDown"&&(y.initialClick=[f.offsetX,f.offsetY],y.initialHits=C.map(O=>O.eventObject)),S&&!C.length&&M<=2&&(l(f,y.interaction),g&&g(f)),b&&o(C);function A(O){const L=O.eventObject,B=L.__r3f,D=B==null?void 0:B.handlers;if(B!=null&&B.eventCount)if(b){if(D.onPointerOver||D.onPointerEnter||D.onPointerOut||D.onPointerLeave){const z=RA(O),U=y.hovered.get(z);U?U.stopped&&O.stopPropagation():(y.hovered.set(z,O),D.onPointerOver==null||D.onPointerOver(O),D.onPointerEnter==null||D.onPointerEnter(O))}D.onPointerMove==null||D.onPointerMove(O)}else{const z=D[h];z?(!S||y.initialHits.includes(L))&&(l(f,y.interaction.filter(U=>!y.initialHits.includes(U))),z(O)):S&&y.initialHits.includes(L)&&l(f,y.interaction.filter(U=>!y.initialHits.includes(U)))}}s(C,f,M,A)}}return{handlePointer:u}}const LZ=n=>!!(n!=null&&n.render),NZ=pe.createContext(null),KMe=(n,e)=>{const t=RMe((u,h)=>{const f=new Ae,g=new Ae,y=new Ae;function b(A=h().camera,O=g,L=h().size){const{width:B,height:D,top:z,left:U}=L,V=B/D;O instanceof Ae?y.copy(O):y.set(...O);const H=A.getWorldPosition(f).distanceTo(y);if(CZ(A))return{width:B/A.zoom,height:D/A.zoom,top:z,left:U,factor:1,distance:H,aspect:V};{const oe=A.fov*Math.PI/180,le=2*Math.tan(oe/2)*H,Z=le*(B/D);return{width:Z,height:le,top:z,left:U,factor:B/Z,distance:H,aspect:V}}}let S;const C=A=>u(O=>({performance:{...O.performance,current:A}})),M=new jt;return{set:u,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(A=1)=>n(h(),A),advance:(A,O)=>e(A,O,h()),legacy:!1,linear:!1,flat:!1,scene:DS(new Y$),controls:null,clock:new v4,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const A=h();S&&clearTimeout(S),A.performance.current!==A.performance.min&&C(A.performance.min),S=setTimeout(()=>C(h().performance.max),A.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:b},setEvents:A=>u(O=>({...O,events:{...O.events,...A}})),setSize:(A,O,L,B,D)=>{const z=h().camera,U={width:A,height:O,top:B||0,left:D||0,updateStyle:L};u(V=>({size:U,viewport:{...V.viewport,...b(z,g,U)}}))},setDpr:A=>u(O=>{const L=RZ(A);return{viewport:{...O.viewport,dpr:L,initialDpr:O.viewport.initialDpr||L}}}),setFrameloop:(A="always")=>{const O=h().clock;O.stop(),O.elapsedTime=0,A!=="never"&&(O.start(),O.elapsedTime=0),u(()=>({frameloop:A}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:pe.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(A,O,L)=>{const B=h().internal;return B.priority=B.priority+(O>0?1:0),B.subscribers.push({ref:A,priority:O,store:L}),B.subscribers=B.subscribers.sort((D,z)=>D.priority-z.priority),()=>{const D=h().internal;D!=null&&D.subscribers&&(D.priority=D.priority-(O>0?1:0),D.subscribers=D.subscribers.filter(z=>z.ref!==A))}}}}}),r=t.getState();let s=r.size,o=r.viewport.dpr,l=r.camera;return t.subscribe(()=>{const{camera:u,size:h,viewport:f,gl:g,set:y}=t.getState();if(h!==s||f.dpr!==o){var b;s=h,o=f.dpr,VMe(u,h),g.setPixelRatio(f.dpr);const S=(b=h.updateStyle)!=null?b:typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(h.width,h.height,S)}u!==l&&(l=u,y(S=>({viewport:{...S.viewport,...S.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>n(u)),t};let kA,JMe=new Set,qMe=new Set,QMe=new Set;function eN(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function yx(n,e){switch(n){case"before":return eN(JMe,e);case"after":return eN(qMe,e);case"tail":return eN(QMe,e)}}let tN,nN;function rN(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),tN=e.internal.subscribers,kA=0;kA<tN.length;kA++)nN=tN[kA],nN.ref.current(nN.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function ZMe(n){let e=!1,t,r,s;function o(h){r=requestAnimationFrame(o),e=!0,t=0,yx("before",h);for(const g of n.values()){var f;s=g.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((f=s.gl.xr)!=null&&f.isPresenting)&&(t+=rN(h,s))}if(yx("after",h),t===0)return yx("tail",h),e=!1,cancelAnimationFrame(r)}function l(h,f=1){var g;if(!h)return n.forEach(y=>l(y.store.getState()),f);(g=h.gl.xr)!=null&&g.isPresenting||!h.internal.active||h.frameloop==="never"||(h.internal.frames=Math.min(60,h.internal.frames+f),e||(e=!0,requestAnimationFrame(o)))}function u(h,f=!0,g,y){if(f&&yx("before",h),g)rN(h,g,y);else for(const b of n.values())rN(h,b.store.getState());f&&yx("after",h)}return{loop:o,invalidate:l,advance:u}}function DZ(){const n=pe.useContext(NZ);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function nf(n=t=>t,e){return DZ()(n,e)}function Ym(n,e=0){const t=DZ(),r=t.getState().internal.subscribe,s=MZ(n);return FC(()=>r(s,e,t),[e,r,t]),null}const Xw=new Map,{invalidate:Z6,advance:eW}=ZMe(Xw),{reconciler:xR,applyProps:OA}=zMe(Xw,jMe),kS={objects:"shallow",strict:!1},eAe=(n,e)=>{const t=typeof n=="function"?n(e):n;return LZ(t)?t:new e4({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function tAe(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:s,left:o}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function nAe(n){const e=Xw.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,o=r||KMe(Z6,eW),l=t||xR.createContainer(o,A1.exports.ConcurrentRoot,null,!1,null,"",s,null);e||Xw.set(n,{fiber:l,store:o});let u,h=!1,f;return{configure(g={}){let{gl:y,size:b,events:S,onCreated:C,shadows:M=!1,linear:A=!1,flat:O=!1,legacy:L=!1,orthographic:B=!1,frameloop:D="always",dpr:z=[1,2],performance:U,raycaster:V,camera:H,onPointerMissed:oe}=g,le=o.getState(),Z=le.gl;le.gl||le.set({gl:Z=eAe(y,n)});let q=le.raycaster;q||le.set({raycaster:q=new T4});const{params:he,...ae}=V||{};if(Bu.equ(ae,q,kS)||OA(q,{...ae}),Bu.equ(he,q.params,kS)||OA(q,{params:{...q.params,...he}}),!le.camera||le.camera===f&&!Bu.equ(f,H,kS)){f=H;const ie=H instanceof mE,fe=ie?H:B?new u_(0,0,0,0,.1,1e3):new Za(75,0,.1,1e3);ie||(fe.position.z=5,H&&OA(fe,H),!le.camera&&!(H!=null&&H.rotation)&&fe.lookAt(0,0,0)),le.set({camera:fe})}if(!le.xr){const ie=(Fe,Ie)=>{const qe=o.getState();qe.frameloop!=="never"&&eW(Fe,!0,qe,Ie)},fe=()=>{const Fe=o.getState();Fe.gl.xr.enabled=Fe.gl.xr.isPresenting,Fe.gl.xr.setAnimationLoop(Fe.gl.xr.isPresenting?ie:null),Fe.gl.xr.isPresenting||Z6(Fe)},Te={connect(){const Fe=o.getState().gl;Fe.xr.addEventListener("sessionstart",fe),Fe.xr.addEventListener("sessionend",fe)},disconnect(){const Fe=o.getState().gl;Fe.xr.removeEventListener("sessionstart",fe),Fe.xr.removeEventListener("sessionend",fe)}};Z.xr&&Te.connect(),le.set({xr:Te})}if(Z.shadowMap){const ie=Z.shadowMap.enabled,fe=Z.shadowMap.type;if(Z.shadowMap.enabled=!!M,Bu.boo(M))Z.shadowMap.type=t$;else if(Bu.str(M)){var ue;const Te={basic:Iq,percentage:r2,soft:t$,variance:E1};Z.shadowMap.type=(ue=Te[M])!=null?ue:t$}else Bu.obj(M)&&Object.assign(Z.shadowMap,M);(ie!==Z.shadowMap.enabled||fe!==Z.shadowMap.type)&&(Z.shadowMap.needsUpdate=!0)}const ge=$Z();ge&&("enabled"in ge?ge.enabled=!L:"legacyMode"in ge&&(ge.legacyMode=L));const we=A?Eg:ms,J=O?l0:WF;Z.outputEncoding!==we&&(Z.outputEncoding=we),Z.toneMapping!==J&&(Z.toneMapping=J),le.legacy!==L&&le.set(()=>({legacy:L})),le.linear!==A&&le.set(()=>({linear:A})),le.flat!==O&&le.set(()=>({flat:O})),y&&!Bu.fun(y)&&!LZ(y)&&!Bu.equ(y,Z,kS)&&OA(Z,y),S&&!le.events.handlers&&le.set({events:S(o)});const re=tAe(n,b);return Bu.equ(re,le.size,kS)||le.setSize(re.width,re.height,re.updateStyle,re.top,re.left),z&&le.viewport.dpr!==RZ(z)&&le.setDpr(z),le.frameloop!==D&&le.setFrameloop(D),le.onPointerMissed||le.set({onPointerMissed:oe}),U&&!Bu.equ(U,le.performance,kS)&&le.set(ie=>({performance:{...ie.performance,...U}})),u=C,h=!0,this},render(g){return h||this.configure(),xR.updateContainer(un(rAe,{store:o,children:g,onCreated:u,rootElement:n}),l,null,()=>{}),o},unmount(){PZ(n)}}}function rAe({store:n,children:e,onCreated:t,rootElement:r}){return FC(()=>{const s=n.getState();s.set(o=>({internal:{...o.internal,active:!0}})),t&&t(s),n.getState().events.connected||s.events.connect==null||s.events.connect(r)},[]),pe.createElement(NZ.Provider,{value:n},e)}function PZ(n,e){const t=Xw.get(n),r=t==null?void 0:t.fiber;if(r){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),xR.updateContainer(null,r,null,()=>{s&&setTimeout(()=>{try{var o,l,u,h;s.events.disconnect==null||s.events.disconnect(),(o=s.gl)==null||(l=o.renderLists)==null||l.dispose==null||l.dispose(),(u=s.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(h=s.gl)!=null&&h.xr&&s.xr.disconnect(),WMe(s),Xw.delete(n),e&&e(n)}catch{}},500)})}}xR.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:pe.version});function FP(){return FP=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},FP.apply(this,arguments)}function zP(n,e,t){var r,s,o,l,u;e==null&&(e=100);function h(){var g=Date.now()-l;g<e&&g>=0?r=setTimeout(h,e-g):(r=null,t||(u=n.apply(o,s),o=s=null))}var f=function(){o=this,s=arguments,l=Date.now();var g=t&&!r;return r||(r=setTimeout(h,e)),g&&(u=n.apply(o,s),o=s=null),u};return f.clear=function(){r&&(clearTimeout(r),r=null)},f.flush=function(){r&&(u=n.apply(o,s),o=s=null,clearTimeout(r),r=null)},f}zP.debounce=zP;var tW=zP;function iAe(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:s}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const o=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[l,u]=pe.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=pe.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l}),f=e?typeof e=="number"?e:e.scroll:null,g=e?typeof e=="number"?e:e.resize:null,y=pe.useRef(!1);pe.useEffect(()=>(y.current=!0,()=>void(y.current=!1)));const[b,S,C]=pe.useMemo(()=>{const L=()=>{if(!h.current.element)return;const{left:B,top:D,width:z,height:U,bottom:V,right:H,x:oe,y:le}=h.current.element.getBoundingClientRect(),Z={left:B,top:D,width:z,height:U,bottom:V,right:H,x:oe,y:le};h.current.element instanceof HTMLElement&&s&&(Z.height=h.current.element.offsetHeight,Z.width=h.current.element.offsetWidth),Object.freeze(Z),y.current&&!lAe(h.current.lastBounds,Z)&&u(h.current.lastBounds=Z)};return[L,g?tW(L,g):L,f?tW(L,f):L]},[u,s,f,g]);function M(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(L=>L.removeEventListener("scroll",C,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null)}function A(){!h.current.element||(h.current.resizeObserver=new o(C),h.current.resizeObserver.observe(h.current.element),t&&h.current.scrollContainers&&h.current.scrollContainers.forEach(L=>L.addEventListener("scroll",C,{capture:!0,passive:!0})))}const O=L=>{!L||L===h.current.element||(M(),h.current.element=L,h.current.scrollContainers=BZ(L),A())};return oAe(C,!!t),sAe(S),pe.useEffect(()=>{M(),A()},[t,C,S]),pe.useEffect(()=>M,[]),[O,l,b]}function sAe(n){pe.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function oAe(n,e){pe.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function BZ(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:s}=window.getComputedStyle(n);return[t,r,s].some(o=>o==="auto"||o==="scroll")&&e.push(n),[...e,...BZ(n.parentElement)]}const aAe=["x","y","top","bottom","left","right","width","height"],lAe=(n,e)=>aAe.every(t=>n[t]===e[t]);var uAe=Object.defineProperty,cAe=Object.defineProperties,hAe=Object.getOwnPropertyDescriptors,nW=Object.getOwnPropertySymbols,dAe=Object.prototype.hasOwnProperty,fAe=Object.prototype.propertyIsEnumerable,rW=(n,e,t)=>e in n?uAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,iW=(n,e)=>{for(var t in e||(e={}))dAe.call(e,t)&&rW(n,t,e[t]);if(nW)for(var t of nW(e))fAe.call(e,t)&&rW(n,t,e[t]);return n},pAe=(n,e)=>cAe(n,hAe(e)),sW;function FZ(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const s=FZ(r,e,t);if(s)return s;r=e?null:r.sibling}}function zZ(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const E4=zZ(pe.createContext(null));class UZ extends pe.Component{render(){return un(E4.Provider,{value:this._reactInternals,children:this.props.children})}}const{ReactCurrentOwner:oW,ReactCurrentDispatcher:aW}=(sW=pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)!=null?sW:{};function mAe(){const n=pe.useContext(E4),e=pe.useId();return pe.useMemo(()=>{var t;return(t=oW==null?void 0:oW.current)!=null?t:FZ(n,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[n,e])}function gAe(){var n,e;const t=mAe(),[r]=pe.useState(()=>new Map);r.clear();let s=t;for(;s;){const o=(n=s.type)==null?void 0:n._context;o&&o!==E4&&!r.has(o)&&r.set(o,(e=aW==null?void 0:aW.current)==null?void 0:e.readContext(zZ(o))),s=s.return}return pe.useMemo(()=>Array.from(r.keys()).reduce((o,l)=>u=>pe.createElement(o,null,pe.createElement(l.Provider,pAe(iW({},u),{value:r.get(l)}))),o=>un(UZ,{...iW({},o)})),[r])}const iN={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function _Ae(n){const{handlePointer:e}=XMe(n);return{priority:1,enabled:!0,compute(t,r,s){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(iN).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:s}=n.getState();(t=s.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{var r;const{set:s,events:o}=n.getState();o.disconnect==null||o.disconnect(),s(l=>({events:{...l.events,connected:t}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([l,u])=>{const[h,f]=iN[l];t.addEventListener(h,u,{passive:f})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var s;Object.entries((s=r.handlers)!=null?s:[]).forEach(([o,l])=>{if(r&&r.connected instanceof HTMLElement){const[u]=iN[o];r.connected.removeEventListener(u,l)}}),t(o=>({events:{...o.events,connected:void 0}}))}}}}const vAe=pe.forwardRef(function({children:n,fallback:e,resize:t,style:r,gl:s,events:o=_Ae,eventSource:l,eventPrefix:u,shadows:h,linear:f,flat:g,legacy:y,orthographic:b,frameloop:S,dpr:C,performance:M,raycaster:A,camera:O,onPointerMissed:L,onCreated:B,...D},z){pe.useMemo(()=>FMe(CMe),[]);const U=gAe(),[V,H]=iAe({scroll:!0,debounce:{scroll:50,resize:0},...t}),oe=pe.useRef(null),le=pe.useRef(null);pe.useImperativeHandle(z,()=>oe.current);const Z=MZ(L),[q,he]=pe.useState(!1),[ae,ue]=pe.useState(!1);if(q)throw q;if(ae)throw ae;const ge=pe.useRef(null);return FC(()=>{const we=oe.current;H.width>0&&H.height>0&&we&&(ge.current||(ge.current=nAe(we)),ge.current.configure({gl:s,events:o,shadows:h,linear:f,flat:g,legacy:y,orthographic:b,frameloop:S,dpr:C,performance:M,raycaster:A,camera:O,size:H,onPointerMissed:(...J)=>Z.current==null?void 0:Z.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(l?UMe(l)?l.current:l:le.current),u&&J.setEvents({compute:(re,ie)=>{const fe=re[u+"X"],Te=re[u+"Y"];ie.pointer.set(fe/ie.size.width*2-1,-(Te/ie.size.height)*2+1),ie.raycaster.setFromCamera(ie.pointer,ie.camera)}}),B==null||B(J)}}),ge.current.render(un(U,{children:un(AZ,{set:ue,children:un(pe.Suspense,{fallback:un(HMe,{set:he}),children:n})})})))}),pe.useEffect(()=>{const we=oe.current;if(we)return()=>PZ(we)},[]),un("div",{ref:le,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:l?"none":"auto",...r},...D,children:un("div",{ref:V,style:{width:"100%",height:"100%"},children:un("canvas",{ref:oe,style:{display:"block"},children:e})})})}),yAe=pe.forwardRef(function(n,e){return un(UZ,{children:un(vAe,{...n,ref:e})})});var HZ={exports:{}},zp={},lW={exports:{}},uW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cW;function bAe(){return cW||(cW=1,function(n){function e(J,re){var ie=J.length;J.push(re);e:for(;0<ie;){var fe=ie-1>>>1,Te=J[fe];if(0<s(Te,re))J[fe]=re,J[ie]=Te,ie=fe;else break e}}function t(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var re=J[0],ie=J.pop();if(ie!==re){J[0]=ie;e:for(var fe=0,Te=J.length,Fe=Te>>>1;fe<Fe;){var Ie=2*(fe+1)-1,qe=J[Ie],Re=Ie+1,Qe=J[Re];if(0>s(qe,ie))Re<Te&&0>s(Qe,qe)?(J[fe]=Qe,J[Re]=ie,fe=Re):(J[fe]=qe,J[Ie]=ie,fe=Ie);else if(Re<Te&&0>s(Qe,ie))J[fe]=Qe,J[Re]=ie,fe=Re;else break e}}return re}function s(J,re){var ie=J.sortIndex-re.sortIndex;return ie!==0?ie:J.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],g=1,y=null,b=3,S=!1,C=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(J){for(var re=t(f);re!==null;){if(re.callback===null)r(f);else if(re.startTime<=J)r(f),re.sortIndex=re.expirationTime,e(h,re);else break;re=t(f)}}function D(J){if(M=!1,B(J),!C)if(t(h)!==null)C=!0,ge(z);else{var re=t(f);re!==null&&we(D,re.startTime-J)}}function z(J,re){C=!1,M&&(M=!1,O(H),H=-1),S=!0;var ie=b;try{for(B(re),y=t(h);y!==null&&(!(y.expirationTime>re)||J&&!Z());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,b=y.priorityLevel;var Te=fe(y.expirationTime<=re);re=n.unstable_now(),typeof Te=="function"?y.callback=Te:y===t(h)&&r(h),B(re)}else r(h);y=t(h)}if(y!==null)var Fe=!0;else{var Ie=t(f);Ie!==null&&we(D,Ie.startTime-re),Fe=!1}return Fe}finally{y=null,b=ie,S=!1}}var U=!1,V=null,H=-1,oe=5,le=-1;function Z(){return!(n.unstable_now()-le<oe)}function q(){if(V!==null){var J=n.unstable_now();le=J;var re=!0;try{re=V(!0,J)}finally{re?he():(U=!1,V=null)}}else U=!1}var he;if(typeof L=="function")he=function(){L(q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ue=ae.port2;ae.port1.onmessage=q,he=function(){ue.postMessage(null)}}else he=function(){A(q,0)};function ge(J){V=J,U||(U=!0,he())}function we(J,re){H=A(function(){J(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){C||S||(C=!0,ge(z))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var re=3;break;default:re=b}var ie=b;b=re;try{return J()}finally{b=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,re){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ie=b;b=J;try{return re()}finally{b=ie}},n.unstable_scheduleCallback=function(J,re,ie){var fe=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?fe+ie:fe):ie=fe,J){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ie+Te,J={id:g++,callback:re,priorityLevel:J,startTime:ie,expirationTime:Te,sortIndex:-1},ie>fe?(J.sortIndex=ie,e(f,J),t(h)===null&&J===t(f)&&(M?(O(H),H=-1):M=!0,we(D,ie-fe))):(J.sortIndex=Te,e(h,J),C||S||(C=!0,ge(z))),J},n.unstable_shouldYield=Z,n.unstable_wrapCallback=function(J){var re=b;return function(){var ie=b;b=re;try{return J.apply(this,arguments)}finally{b=ie}}}}(uW)),uW}var hW;function TAe(){return hW||(hW=1,function(n){n.exports=bAe()}(lW)),lW.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dW;function SAe(){if(dW)return zp;dW=1;var n=yt,e=TAe();function t(v){for(var T="https://reactjs.org/docs/error-decoder.html?invariant="+v,R=1;R<arguments.length;R++)T+="&args[]="+encodeURIComponent(arguments[R]);return"Minified React error #"+v+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(v,T){l(v,T),l(v+"Capture",T)}function l(v,T){for(s[v]=T,v=0;v<T.length;v++)r.add(T[v])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function b(v){return h.call(y,v)?!0:h.call(g,v)?!1:f.test(v)?y[v]=!0:(g[v]=!0,!1)}function S(v,T,R,F){if(R!==null&&R.type===0)return!1;switch(typeof T){case"function":case"symbol":return!0;case"boolean":return F?!1:R!==null?!R.acceptsBooleans:(v=v.toLowerCase().slice(0,5),v!=="data-"&&v!=="aria-");default:return!1}}function C(v,T,R,F){if(T===null||typeof T>"u"||S(v,T,R,F))return!0;if(F)return!1;if(R!==null)switch(R.type){case 3:return!T;case 4:return T===!1;case 5:return isNaN(T);case 6:return isNaN(T)||1>T}return!1}function M(v,T,R,F,Y,ee,be){this.acceptsBooleans=T===2||T===3||T===4,this.attributeName=F,this.attributeNamespace=Y,this.mustUseProperty=R,this.propertyName=v,this.type=T,this.sanitizeURL=ee,this.removeEmptyString=be}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(v){A[v]=new M(v,0,!1,v,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(v){var T=v[0];A[T]=new M(T,1,!1,v[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(v){A[v]=new M(v,2,!1,v.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(v){A[v]=new M(v,2,!1,v,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(v){A[v]=new M(v,3,!1,v.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(v){A[v]=new M(v,3,!0,v,null,!1,!1)}),["capture","download"].forEach(function(v){A[v]=new M(v,4,!1,v,null,!1,!1)}),["cols","rows","size","span"].forEach(function(v){A[v]=new M(v,6,!1,v,null,!1,!1)}),["rowSpan","start"].forEach(function(v){A[v]=new M(v,5,!1,v.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function L(v){return v[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(v){var T=v.replace(O,L);A[T]=new M(T,1,!1,v,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(v){var T=v.replace(O,L);A[T]=new M(T,1,!1,v,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(v){var T=v.replace(O,L);A[T]=new M(T,1,!1,v,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(v){A[v]=new M(v,1,!1,v.toLowerCase(),null,!1,!1)}),A.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(v){A[v]=new M(v,1,!1,v.toLowerCase(),null,!0,!0)});function B(v,T,R,F){var Y=A.hasOwnProperty(T)?A[T]:null;(Y!==null?Y.type!==0:F||!(2<T.length)||T[0]!=="o"&&T[0]!=="O"||T[1]!=="n"&&T[1]!=="N")&&(C(T,R,Y,F)&&(R=null),F||Y===null?b(T)&&(R===null?v.removeAttribute(T):v.setAttribute(T,""+R)):Y.mustUseProperty?v[Y.propertyName]=R===null?Y.type===3?!1:"":R:(T=Y.attributeName,F=Y.attributeNamespace,R===null?v.removeAttribute(T):(Y=Y.type,R=Y===3||Y===4&&R===!0?"":""+R,F?v.setAttributeNS(F,T,R):v.setAttribute(T,R))))}var D=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),U=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),Z=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),J=Symbol.iterator;function re(v){return v===null||typeof v!="object"?null:(v=J&&v[J]||v["@@iterator"],typeof v=="function"?v:null)}var ie=Object.assign,fe;function Te(v){if(fe===void 0)try{throw Error()}catch(R){var T=R.stack.trim().match(/\n( *(at )?)/);fe=T&&T[1]||""}return`
`+fe+v}var Fe=!1;function Ie(v,T){if(!v||Fe)return"";Fe=!0;var R=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(T)if(T=function(){throw Error()},Object.defineProperty(T.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(T,[])}catch(Lt){var F=Lt}Reflect.construct(v,[],T)}else{try{T.call()}catch(Lt){F=Lt}v.call(T.prototype)}else{try{throw Error()}catch(Lt){F=Lt}v()}}catch(Lt){if(Lt&&F&&typeof Lt.stack=="string"){for(var Y=Lt.stack.split(`
`),ee=F.stack.split(`
`),be=Y.length-1,Ye=ee.length-1;1<=be&&0<=Ye&&Y[be]!==ee[Ye];)Ye--;for(;1<=be&&0<=Ye;be--,Ye--)if(Y[be]!==ee[Ye]){if(be!==1||Ye!==1)do if(be--,Ye--,0>Ye||Y[be]!==ee[Ye]){var at=`
`+Y[be].replace(" at new "," at ");return v.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",v.displayName)),at}while(1<=be&&0<=Ye);break}}}finally{Fe=!1,Error.prepareStackTrace=R}return(v=v?v.displayName||v.name:"")?Te(v):""}function qe(v){switch(v.tag){case 5:return Te(v.type);case 16:return Te("Lazy");case 13:return Te("Suspense");case 19:return Te("SuspenseList");case 0:case 2:case 15:return v=Ie(v.type,!1),v;case 11:return v=Ie(v.type.render,!1),v;case 1:return v=Ie(v.type,!0),v;default:return""}}function Re(v){if(v==null)return null;if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v;switch(v){case V:return"Fragment";case U:return"Portal";case oe:return"Profiler";case H:return"StrictMode";case he:return"Suspense";case ae:return"SuspenseList"}if(typeof v=="object")switch(v.$$typeof){case Z:return(v.displayName||"Context")+".Consumer";case le:return(v._context.displayName||"Context")+".Provider";case q:var T=v.render;return v=v.displayName,v||(v=T.displayName||T.name||"",v=v!==""?"ForwardRef("+v+")":"ForwardRef"),v;case ue:return T=v.displayName||null,T!==null?T:Re(v.type)||"Memo";case ge:T=v._payload,v=v._init;try{return Re(v(T))}catch{}}return null}function Qe(v){var T=v.type;switch(v.tag){case 24:return"Cache";case 9:return(T.displayName||"Context")+".Consumer";case 10:return(T._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return v=T.render,v=v.displayName||v.name||"",T.displayName||(v!==""?"ForwardRef("+v+")":"ForwardRef");case 7:return"Fragment";case 5:return T;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(T);case 8:return T===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof T=="function")return T.displayName||T.name||null;if(typeof T=="string")return T}return null}function nt(v){switch(typeof v){case"boolean":case"number":case"string":case"undefined":return v;case"object":return v;default:return""}}function ft(v){var T=v.type;return(v=v.nodeName)&&v.toLowerCase()==="input"&&(T==="checkbox"||T==="radio")}function lt(v){var T=ft(v)?"checked":"value",R=Object.getOwnPropertyDescriptor(v.constructor.prototype,T),F=""+v[T];if(!v.hasOwnProperty(T)&&typeof R<"u"&&typeof R.get=="function"&&typeof R.set=="function"){var Y=R.get,ee=R.set;return Object.defineProperty(v,T,{configurable:!0,get:function(){return Y.call(this)},set:function(be){F=""+be,ee.call(this,be)}}),Object.defineProperty(v,T,{enumerable:R.enumerable}),{getValue:function(){return F},setValue:function(be){F=""+be},stopTracking:function(){v._valueTracker=null,delete v[T]}}}}function ze(v){v._valueTracker||(v._valueTracker=lt(v))}function Ce(v){if(!v)return!1;var T=v._valueTracker;if(!T)return!0;var R=T.getValue(),F="";return v&&(F=ft(v)?v.checked?"true":"false":v.value),v=F,v!==R?(T.setValue(v),!0):!1}function He(v){if(v=v||(typeof document<"u"?document:void 0),typeof v>"u")return null;try{return v.activeElement||v.body}catch{return v.body}}function rt(v,T){var R=T.checked;return ie({},T,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:R??v._wrapperState.initialChecked})}function it(v,T){var R=T.defaultValue==null?"":T.defaultValue,F=T.checked!=null?T.checked:T.defaultChecked;R=nt(T.value!=null?T.value:R),v._wrapperState={initialChecked:F,initialValue:R,controlled:T.type==="checkbox"||T.type==="radio"?T.checked!=null:T.value!=null}}function Nt(v,T){T=T.checked,T!=null&&B(v,"checked",T,!1)}function kt(v,T){Nt(v,T);var R=nt(T.value),F=T.type;if(R!=null)F==="number"?(R===0&&v.value===""||v.value!=R)&&(v.value=""+R):v.value!==""+R&&(v.value=""+R);else if(F==="submit"||F==="reset"){v.removeAttribute("value");return}T.hasOwnProperty("value")?Mt(v,T.type,R):T.hasOwnProperty("defaultValue")&&Mt(v,T.type,nt(T.defaultValue)),T.checked==null&&T.defaultChecked!=null&&(v.defaultChecked=!!T.defaultChecked)}function vt(v,T,R){if(T.hasOwnProperty("value")||T.hasOwnProperty("defaultValue")){var F=T.type;if(!(F!=="submit"&&F!=="reset"||T.value!==void 0&&T.value!==null))return;T=""+v._wrapperState.initialValue,R||T===v.value||(v.value=T),v.defaultValue=T}R=v.name,R!==""&&(v.name=""),v.defaultChecked=!!v._wrapperState.initialChecked,R!==""&&(v.name=R)}function Mt(v,T,R){(T!=="number"||He(v.ownerDocument)!==v)&&(R==null?v.defaultValue=""+v._wrapperState.initialValue:v.defaultValue!==""+R&&(v.defaultValue=""+R))}var At=Array.isArray;function mt(v,T,R,F){if(v=v.options,T){T={};for(var Y=0;Y<R.length;Y++)T["$"+R[Y]]=!0;for(R=0;R<v.length;R++)Y=T.hasOwnProperty("$"+v[R].value),v[R].selected!==Y&&(v[R].selected=Y),Y&&F&&(v[R].defaultSelected=!0)}else{for(R=""+nt(R),T=null,Y=0;Y<v.length;Y++){if(v[Y].value===R){v[Y].selected=!0,F&&(v[Y].defaultSelected=!0);return}T!==null||v[Y].disabled||(T=v[Y])}T!==null&&(T.selected=!0)}}function xe(v,T){if(T.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},T,{value:void 0,defaultValue:void 0,children:""+v._wrapperState.initialValue})}function se(v,T){var R=T.value;if(R==null){if(R=T.children,T=T.defaultValue,R!=null){if(T!=null)throw Error(t(92));if(At(R)){if(1<R.length)throw Error(t(93));R=R[0]}T=R}T==null&&(T=""),R=T}v._wrapperState={initialValue:nt(R)}}function $e(v,T){var R=nt(T.value),F=nt(T.defaultValue);R!=null&&(R=""+R,R!==v.value&&(v.value=R),T.defaultValue==null&&v.defaultValue!==R&&(v.defaultValue=R)),F!=null&&(v.defaultValue=""+F)}function ht(v){var T=v.textContent;T===v._wrapperState.initialValue&&T!==""&&T!==null&&(v.value=T)}function St(v){switch(v){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(v,T){return v==null||v==="http://www.w3.org/1999/xhtml"?St(T):v==="http://www.w3.org/2000/svg"&&T==="foreignObject"?"http://www.w3.org/1999/xhtml":v}var pt,Ke=function(v){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(T,R,F,Y){MSApp.execUnsafeLocalFunction(function(){return v(T,R,F,Y)})}:v}(function(v,T){if(v.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in v)v.innerHTML=T;else{for(pt=pt||document.createElement("div"),pt.innerHTML="<svg>"+T.valueOf().toString()+"</svg>",T=pt.firstChild;v.firstChild;)v.removeChild(v.firstChild);for(;T.firstChild;)v.appendChild(T.firstChild)}});function Le(v,T){if(T){var R=v.firstChild;if(R&&R===v.lastChild&&R.nodeType===3){R.nodeValue=T;return}}v.textContent=T}var Q={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},te=["Webkit","ms","Moz","O"];Object.keys(Q).forEach(function(v){te.forEach(function(T){T=T+v.charAt(0).toUpperCase()+v.substring(1),Q[T]=Q[v]})});function me(v,T,R){return T==null||typeof T=="boolean"||T===""?"":R||typeof T!="number"||T===0||Q.hasOwnProperty(v)&&Q[v]?(""+T).trim():T+"px"}function ke(v,T){v=v.style;for(var R in T)if(T.hasOwnProperty(R)){var F=R.indexOf("--")===0,Y=me(R,T[R],F);R==="float"&&(R="cssFloat"),F?v.setProperty(R,Y):v[R]=Y}}var Xe=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wt(v,T){if(T){if(Xe[v]&&(T.children!=null||T.dangerouslySetInnerHTML!=null))throw Error(t(137,v));if(T.dangerouslySetInnerHTML!=null){if(T.children!=null)throw Error(t(60));if(typeof T.dangerouslySetInnerHTML!="object"||!("__html"in T.dangerouslySetInnerHTML))throw Error(t(61))}if(T.style!=null&&typeof T.style!="object")throw Error(t(62))}}function Ge(v,T){if(v.indexOf("-")===-1)return typeof T.is=="string";switch(v){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tn=null;function _t(v){return v=v.target||v.srcElement||window,v.correspondingUseElement&&(v=v.correspondingUseElement),v.nodeType===3?v.parentNode:v}var Jt=null,Kt=null,On=null;function si(v){if(v=Mr(v)){if(typeof Jt!="function")throw Error(t(280));var T=v.stateNode;T&&(T=zf(T),Jt(v.stateNode,v.type,T))}}function Pr(v){Kt?On?On.push(v):On=[v]:Kt=v}function Ei(){if(Kt){var v=Kt,T=On;if(On=Kt=null,si(v),T)for(v=0;v<T.length;v++)si(T[v])}}function $r(v,T){return v(T)}function gr(){}var ne=!1;function Se(v,T,R){if(ne)return v(T,R);ne=!0;try{return $r(v,T,R)}finally{ne=!1,(Kt!==null||On!==null)&&(gr(),Ei())}}function We(v,T){var R=v.stateNode;if(R===null)return null;var F=zf(R);if(F===null)return null;R=F[T];e:switch(T){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(v=v.type,F=!(v==="button"||v==="input"||v==="select"||v==="textarea")),v=!F;break e;default:v=!1}if(v)return null;if(R&&typeof R!="function")throw Error(t(231,T,typeof R));return R}var ot=!1;if(u)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){ot=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{ot=!1}function sn(v,T,R,F,Y,ee,be,Ye,at){var Lt=Array.prototype.slice.call(arguments,3);try{T.apply(R,Lt)}catch(Zt){this.onError(Zt)}}var Nn=!1,De=null,gt=!1,Ct=null,bt={onError:function(v){Nn=!0,De=v}};function Vt(v,T,R,F,Y,ee,be,Ye,at){Nn=!1,De=null,sn.apply(bt,arguments)}function Wn(v,T,R,F,Y,ee,be,Ye,at){if(Vt.apply(this,arguments),Nn){if(Nn){var Lt=De;Nn=!1,De=null}else throw Error(t(198));gt||(gt=!0,Ct=Lt)}}function rr(v){var T=v,R=v;if(v.alternate)for(;T.return;)T=T.return;else{v=T;do T=v,T.flags&4098&&(R=T.return),v=T.return;while(v)}return T.tag===3?R:null}function _r(v){if(v.tag===13){var T=v.memoizedState;if(T===null&&(v=v.alternate,v!==null&&(T=v.memoizedState)),T!==null)return T.dehydrated}return null}function Cr(v){if(rr(v)!==v)throw Error(t(188))}function oi(v){var T=v.alternate;if(!T){if(T=rr(v),T===null)throw Error(t(188));return T!==v?null:v}for(var R=v,F=T;;){var Y=R.return;if(Y===null)break;var ee=Y.alternate;if(ee===null){if(F=Y.return,F!==null){R=F;continue}break}if(Y.child===ee.child){for(ee=Y.child;ee;){if(ee===R)return Cr(Y),v;if(ee===F)return Cr(Y),T;ee=ee.sibling}throw Error(t(188))}if(R.return!==F.return)R=Y,F=ee;else{for(var be=!1,Ye=Y.child;Ye;){if(Ye===R){be=!0,R=Y,F=ee;break}if(Ye===F){be=!0,F=Y,R=ee;break}Ye=Ye.sibling}if(!be){for(Ye=ee.child;Ye;){if(Ye===R){be=!0,R=ee,F=Y;break}if(Ye===F){be=!0,F=ee,R=Y;break}Ye=Ye.sibling}if(!be)throw Error(t(189))}}if(R.alternate!==F)throw Error(t(190))}if(R.tag!==3)throw Error(t(188));return R.stateNode.current===R?v:T}function Br(v){return v=oi(v),v!==null?Yr(v):null}function Yr(v){if(v.tag===5||v.tag===6)return v;for(v=v.child;v!==null;){var T=Yr(v);if(T!==null)return T;v=v.sibling}return null}var Ss=e.unstable_scheduleCallback,Oa=e.unstable_cancelCallback,xo=e.unstable_shouldYield,Yl=e.unstable_requestPaint,nn=e.unstable_now,Rr=e.unstable_getCurrentPriorityLevel,el=e.unstable_ImmediatePriority,La=e.unstable_UserBlockingPriority,Fs=e.unstable_NormalPriority,zs=e.unstable_LowPriority,Di=e.unstable_IdlePriority,kr=null,An=null;function Ir(v){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(kr,v,void 0,(v.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:ws,yr=Math.log,Pi=Math.LN2;function ws(v){return v>>>=0,v===0?32:31-(yr(v)/Pi|0)|0}var fi=64,gs=4194304;function tl(v){switch(v&-v){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return v&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return v}}function Na(v,T){var R=v.pendingLanes;if(R===0)return 0;var F=0,Y=v.suspendedLanes,ee=v.pingedLanes,be=R&268435455;if(be!==0){var Ye=be&~Y;Ye!==0?F=tl(Ye):(ee&=be,ee!==0&&(F=tl(ee)))}else be=R&~Y,be!==0?F=tl(be):ee!==0&&(F=tl(ee));if(F===0)return 0;if(T!==0&&T!==F&&!(T&Y)&&(Y=F&-F,ee=T&-T,Y>=ee||Y===16&&(ee&4194240)!==0))return T;if(F&4&&(F|=R&16),T=v.entangledLanes,T!==0)for(v=v.entanglements,T&=F;0<T;)R=31-Gr(T),Y=1<<R,F|=v[R],T&=~Y;return F}function dc(v,T){switch(v){case 1:case 2:case 4:return T+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return T+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fc(v,T){for(var R=v.suspendedLanes,F=v.pingedLanes,Y=v.expirationTimes,ee=v.pendingLanes;0<ee;){var be=31-Gr(ee),Ye=1<<be,at=Y[be];at===-1?(!(Ye&R)||Ye&F)&&(Y[be]=dc(Ye,T)):at<=T&&(v.expiredLanes|=Ye),ee&=~Ye}}function Xs(v){return v=v.pendingLanes&-1073741825,v!==0?v:v&1073741824?1073741824:0}function qo(){var v=fi;return fi<<=1,!(fi&4194240)&&(fi=64),v}function Xl(v){for(var T=[],R=0;31>R;R++)T.push(v);return T}function gu(v,T,R){v.pendingLanes|=T,T!==536870912&&(v.suspendedLanes=0,v.pingedLanes=0),v=v.eventTimes,T=31-Gr(T),v[T]=R}function mh(v,T){var R=v.pendingLanes&~T;v.pendingLanes=T,v.suspendedLanes=0,v.pingedLanes=0,v.expiredLanes&=T,v.mutableReadLanes&=T,v.entangledLanes&=T,T=v.entanglements;var F=v.eventTimes;for(v=v.expirationTimes;0<R;){var Y=31-Gr(R),ee=1<<Y;T[Y]=0,F[Y]=-1,v[Y]=-1,R&=~ee}}function Qo(v,T){var R=v.entangledLanes|=T;for(v=v.entanglements;R;){var F=31-Gr(R),Y=1<<F;Y&T|v[F]&T&&(v[F]|=T),R&=~Y}}var vr=0;function xi(v){return v&=-v,1<v?4<v?v&268435455?16:536870912:4:1}var Dc,gh,Pc,El,_u,xl=!1,$l=[],br=null,Tr=null,Kl=null,nl=new Map,rl=new Map,vu=[],qi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _s(v,T){switch(v){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Kl=null;break;case"pointerover":case"pointerout":nl.delete(T.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(T.pointerId)}}function il(v,T,R,F,Y,ee){return v===null||v.nativeEvent!==ee?(v={blockedOn:T,domEventName:R,eventSystemFlags:F,nativeEvent:ee,targetContainers:[Y]},T!==null&&(T=Mr(T),T!==null&&gh(T)),v):(v.eventSystemFlags|=F,T=v.targetContainers,Y!==null&&T.indexOf(Y)===-1&&T.push(Y),v)}function Cd(v,T,R,F,Y){switch(T){case"focusin":return br=il(br,v,T,R,F,Y),!0;case"dragenter":return Tr=il(Tr,v,T,R,F,Y),!0;case"mouseover":return Kl=il(Kl,v,T,R,F,Y),!0;case"pointerover":var ee=Y.pointerId;return nl.set(ee,il(nl.get(ee)||null,v,T,R,F,Y)),!0;case"gotpointercapture":return ee=Y.pointerId,rl.set(ee,il(rl.get(ee)||null,v,T,R,F,Y)),!0}return!1}function io(v){var T=ga(v.target);if(T!==null){var R=rr(T);if(R!==null){if(T=R.tag,T===13){if(T=_r(R),T!==null){v.blockedOn=T,_u(v.priority,function(){Pc(R)});return}}else if(T===3&&R.stateNode.current.memoizedState.isDehydrated){v.blockedOn=R.tag===3?R.stateNode.containerInfo:null;return}}}v.blockedOn=null}function zu(v){if(v.blockedOn!==null)return!1;for(var T=v.targetContainers;0<T.length;){var R=ha(v.domEventName,v.eventSystemFlags,T[0],v.nativeEvent);if(R===null){R=v.nativeEvent;var F=new R.constructor(R.type,R);tn=F,R.target.dispatchEvent(F),tn=null}else return T=Mr(R),T!==null&&gh(T),v.blockedOn=R,!1;T.shift()}return!0}function ca(v,T,R){zu(v)&&R.delete(T)}function yu(){xl=!1,br!==null&&zu(br)&&(br=null),Tr!==null&&zu(Tr)&&(Tr=null),Kl!==null&&zu(Kl)&&(Kl=null),nl.forEach(ca),rl.forEach(ca)}function or(v,T){v.blockedOn===T&&(v.blockedOn=null,xl||(xl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yu)))}function Gn(v){function T(Y){return or(Y,v)}if(0<$l.length){or($l[0],v);for(var R=1;R<$l.length;R++){var F=$l[R];F.blockedOn===v&&(F.blockedOn=null)}}for(br!==null&&or(br,v),Tr!==null&&or(Tr,v),Kl!==null&&or(Kl,v),nl.forEach(T),rl.forEach(T),R=0;R<vu.length;R++)F=vu[R],F.blockedOn===v&&(F.blockedOn=null);for(;0<vu.length&&(R=vu[0],R.blockedOn===null);)io(R),R.blockedOn===null&&vu.shift()}var Es=D.ReactCurrentBatchConfig,so=!0;function Uu(v,T,R,F){var Y=vr,ee=Es.transition;Es.transition=null;try{vr=1,_h(v,T,R,F)}finally{vr=Y,Es.transition=ee}}function bu(v,T,R,F){var Y=vr,ee=Es.transition;Es.transition=null;try{vr=4,_h(v,T,R,F)}finally{vr=Y,Es.transition=ee}}function _h(v,T,R,F){if(so){var Y=ha(v,T,R,F);if(Y===null)Id(v,T,F,Da,R),_s(v,F);else if(Cd(Y,v,T,R,F))F.stopPropagation();else if(_s(v,F),T&4&&-1<qi.indexOf(v)){for(;Y!==null;){var ee=Mr(Y);if(ee!==null&&Dc(ee),ee=ha(v,T,R,F),ee===null&&Id(v,T,F,Da,R),ee===Y)break;Y=ee}Y!==null&&F.stopPropagation()}else Id(v,T,F,null,R)}}var Da=null;function ha(v,T,R,F){if(Da=null,v=_t(F),v=ga(v),v!==null)if(T=rr(v),T===null)v=null;else if(R=T.tag,R===13){if(v=_r(T),v!==null)return v;v=null}else if(R===3){if(T.stateNode.current.memoizedState.isDehydrated)return T.tag===3?T.stateNode.containerInfo:null;v=null}else T!==v&&(v=null);return Da=v,null}function Hu(v){switch(v){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rr()){case el:return 1;case La:return 4;case Fs:case zs:return 16;case Di:return 536870912;default:return 16}default:return 16}}var wr=null,Rs=null,bi=null;function $i(){if(bi)return bi;var v,T=Rs,R=T.length,F,Y="value"in wr?wr.value:wr.textContent,ee=Y.length;for(v=0;v<R&&T[v]===Y[v];v++);var be=R-v;for(F=1;F<=be&&T[R-F]===Y[ee-F];F++);return bi=Y.slice(v,1<F?1-F:void 0)}function da(v){var T=v.keyCode;return"charCode"in v?(v=v.charCode,v===0&&T===13&&(v=13)):v=T,v===10&&(v=13),32<=v||v===13?v:0}function Zr(){return!0}function Tu(){return!1}function $o(v){function T(R,F,Y,ee,be){this._reactName=R,this._targetInst=Y,this.type=F,this.nativeEvent=ee,this.target=be,this.currentTarget=null;for(var Ye in v)v.hasOwnProperty(Ye)&&(R=v[Ye],this[Ye]=R?R(ee):ee[Ye]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?Zr:Tu,this.isPropagationStopped=Tu,this}return ie(T.prototype,{preventDefault:function(){this.defaultPrevented=!0;var R=this.nativeEvent;R&&(R.preventDefault?R.preventDefault():typeof R.returnValue!="unknown"&&(R.returnValue=!1),this.isDefaultPrevented=Zr)},stopPropagation:function(){var R=this.nativeEvent;R&&(R.stopPropagation?R.stopPropagation():typeof R.cancelBubble!="unknown"&&(R.cancelBubble=!0),this.isPropagationStopped=Zr)},persist:function(){},isPersistent:Zr}),T}var Su={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(v){return v.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=$o(Su),Bi=ie({},Su,{view:0,detail:0}),Ci=$o(Bi),Vn,Mi,Xr,dd=ie({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gu,button:0,buttons:0,relatedTarget:function(v){return v.relatedTarget===void 0?v.fromElement===v.srcElement?v.toElement:v.fromElement:v.relatedTarget},movementX:function(v){return"movementX"in v?v.movementX:(v!==Xr&&(Xr&&v.type==="mousemove"?(Vn=v.screenX-Xr.screenX,Mi=v.screenY-Xr.screenY):Mi=Vn=0,Xr=v),Vn)},movementY:function(v){return"movementY"in v?v.movementY:Mi}}),wu=$o(dd),Vi=ie({},dd,{dataTransfer:0}),Pa=$o(Vi),vh=ie({},Bi,{relatedTarget:0}),fr=$o(vh),Zo=ie({},Su,{animationName:0,elapsedTime:0,pseudoElement:0}),fd=$o(Zo),lf=ie({},Su,{clipboardData:function(v){return"clipboardData"in v?v.clipboardData:window.clipboardData}}),Bc=$o(lf),uf=ie({},Su,{data:0}),Bf=$o(uf),Tp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Md={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ks(v){var T=this.nativeEvent;return T.getModifierState?T.getModifierState(v):(v=Jl[v])?!!T[v]:!1}function Gu(){return ks}var yh=ie({},Bi,{key:function(v){if(v.key){var T=Tp[v.key]||v.key;if(T!=="Unidentified")return T}return v.type==="keypress"?(v=da(v),v===13?"Enter":String.fromCharCode(v)):v.type==="keydown"||v.type==="keyup"?Md[v.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gu,charCode:function(v){return v.type==="keypress"?da(v):0},keyCode:function(v){return v.type==="keydown"||v.type==="keyup"?v.keyCode:0},which:function(v){return v.type==="keypress"?da(v):v.type==="keydown"||v.type==="keyup"?v.keyCode:0}}),Ba=$o(yh),ci=ie({},dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Er=$o(ci),oo=ie({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gu}),Fa=$o(oo),zo=ie({},Su,{propertyName:0,elapsedTime:0,pseudoElement:0}),ql=$o(zo),Ql=ie({},dd,{deltaX:function(v){return"deltaX"in v?v.deltaX:"wheelDeltaX"in v?-v.wheelDeltaX:0},deltaY:function(v){return"deltaY"in v?v.deltaY:"wheelDeltaY"in v?-v.wheelDeltaY:"wheelDelta"in v?-v.wheelDelta:0},deltaZ:0,deltaMode:0}),Fh=$o(Ql),Wr=[9,13,27,32],Ai=u&&"CompositionEvent"in window,Sr=null;u&&"documentMode"in document&&(Sr=document.documentMode);var ji=u&&"TextEvent"in window&&!Sr,fa=u&&(!Ai||Sr&&8<Sr&&11>=Sr),Eu=" ",cf=!1;function hf(v,T){switch(v){case"keyup":return Wr.indexOf(T.keyCode)!==-1;case"keydown":return T.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pd(v){return v=v.detail,typeof v=="object"&&"data"in v?v.data:null}var Wu=!1;function ol(v,T){switch(v){case"compositionend":return pd(T);case"keypress":return T.which!==32?null:(cf=!0,Eu);case"textInput":return v=T.data,v===Eu&&cf?null:v;default:return null}}function Fc(v,T){if(Wu)return v==="compositionend"||!Ai&&hf(v,T)?(v=$i(),bi=Rs=wr=null,Wu=!1,v):null;switch(v){case"paste":return null;case"keypress":if(!(T.ctrlKey||T.altKey||T.metaKey)||T.ctrlKey&&T.altKey){if(T.char&&1<T.char.length)return T.char;if(T.which)return String.fromCharCode(T.which)}return null;case"compositionend":return fa&&T.locale!=="ko"?null:T.data;default:return null}}var zh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vu(v){var T=v&&v.nodeName&&v.nodeName.toLowerCase();return T==="input"?!!zh[v.type]:T==="textarea"}function Zl(v,T,R,F){Pr(F),T=Rd(T,"onChange"),0<T.length&&(R=new sl("onChange","change",null,R,F),v.push({event:R,listeners:T}))}var Us=null,eu=null;function Uh(v){Vh(v,0)}function zc(v){var T=mn(v);if(Ce(T))return v}function Uc(v,T){if(v==="change")return T}var is=!1;if(u){var Fr;if(u){var Cl="oninput"in document;if(!Cl){var za=document.createElement("div");za.setAttribute("oninput","return;"),Cl=typeof za.oninput=="function"}Fr=Cl}else Fr=!1;is=Fr&&(!document.documentMode||9<document.documentMode)}function tu(){Us&&(Us.detachEvent("onpropertychange",xu),eu=Us=null)}function xu(v){if(v.propertyName==="value"&&zc(eu)){var T=[];Zl(T,eu,v,_t(v)),Se(Uh,T)}}function bh(v,T,R){v==="focusin"?(tu(),Us=T,eu=R,Us.attachEvent("onpropertychange",xu)):v==="focusout"&&tu()}function Ad(v){if(v==="selectionchange"||v==="keyup"||v==="keydown")return zc(eu)}function pi(v,T){if(v==="click")return zc(T)}function ye(v,T){if(v==="input"||v==="change")return zc(T)}function je(v,T){return v===T&&(v!==0||1/v===1/T)||v!==v&&T!==T}var Be=typeof Object.is=="function"?Object.is:je;function Ot(v,T){if(Be(v,T))return!0;if(typeof v!="object"||v===null||typeof T!="object"||T===null)return!1;var R=Object.keys(v),F=Object.keys(T);if(R.length!==F.length)return!1;for(F=0;F<R.length;F++){var Y=R[F];if(!h.call(T,Y)||!Be(v[Y],T[Y]))return!1}return!0}function rn(v){for(;v&&v.firstChild;)v=v.firstChild;return v}function In(v,T){var R=rn(v);v=0;for(var F;R;){if(R.nodeType===3){if(F=v+R.textContent.length,v<=T&&F>=T)return{node:R,offset:T-v};v=F}e:{for(;R;){if(R.nextSibling){R=R.nextSibling;break e}R=R.parentNode}R=void 0}R=rn(R)}}function Jn(v,T){return v&&T?v===T?!0:v&&v.nodeType===3?!1:T&&T.nodeType===3?Jn(v,T.parentNode):"contains"in v?v.contains(T):v.compareDocumentPosition?!!(v.compareDocumentPosition(T)&16):!1:!1}function vn(){for(var v=window,T=He();T instanceof v.HTMLIFrameElement;){try{var R=typeof T.contentWindow.location.href=="string"}catch{R=!1}if(R)v=T.contentWindow;else break;T=He(v.document)}return T}function zr(v){var T=v&&v.nodeName&&v.nodeName.toLowerCase();return T&&(T==="input"&&(v.type==="text"||v.type==="search"||v.type==="tel"||v.type==="url"||v.type==="password")||T==="textarea"||v.contentEditable==="true")}function ao(v){var T=vn(),R=v.focusedElem,F=v.selectionRange;if(T!==R&&R&&R.ownerDocument&&Jn(R.ownerDocument.documentElement,R)){if(F!==null&&zr(R)){if(T=F.start,v=F.end,v===void 0&&(v=T),"selectionStart"in R)R.selectionStart=T,R.selectionEnd=Math.min(v,R.value.length);else if(v=(T=R.ownerDocument||document)&&T.defaultView||window,v.getSelection){v=v.getSelection();var Y=R.textContent.length,ee=Math.min(F.start,Y);F=F.end===void 0?ee:Math.min(F.end,Y),!v.extend&&ee>F&&(Y=F,F=ee,ee=Y),Y=In(R,ee);var be=In(R,F);Y&&be&&(v.rangeCount!==1||v.anchorNode!==Y.node||v.anchorOffset!==Y.offset||v.focusNode!==be.node||v.focusOffset!==be.offset)&&(T=T.createRange(),T.setStart(Y.node,Y.offset),v.removeAllRanges(),ee>F?(v.addRange(T),v.extend(be.node,be.offset)):(T.setEnd(be.node,be.offset),v.addRange(T)))}}for(T=[],v=R;v=v.parentNode;)v.nodeType===1&&T.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<T.length;R++)v=T[R],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}var Ti=u&&"documentMode"in document&&11>=document.documentMode,lo=null,al=null,Fi=null,vs=!1;function $u(v,T,R){var F=R.window===R?R.document:R.nodeType===9?R:R.ownerDocument;vs||lo==null||lo!==He(F)||(F=lo,"selectionStart"in F&&zr(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),Fi&&Ot(Fi,F)||(Fi=F,F=Rd(al,"onSelect"),0<F.length&&(T=new sl("onSelect","select",null,T,R),v.push({event:T,listeners:F}),T.target=lo)))}function qn(v,T){var R={};return R[v.toLowerCase()]=T.toLowerCase(),R["Webkit"+v]="webkit"+T,R["Moz"+v]="moz"+T,R}var pa={animationend:qn("Animation","AnimationEnd"),animationiteration:qn("Animation","AnimationIteration"),animationstart:qn("Animation","AnimationStart"),transitionend:qn("Transition","TransitionEnd")},Ks={},Hs={};u&&(Hs=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Ua(v){if(Ks[v])return Ks[v];if(!pa[v])return v;var T=pa[v],R;for(R in T)if(T.hasOwnProperty(R)&&R in Hs)return Ks[v]=T[R];return v}var Hh=Ua("animationend"),Th=Ua("animationiteration"),pc=Ua("animationstart"),ea=Ua("transitionend"),Hc=new Map,Gh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ha(v,T){Hc.set(v,T),o(T,[v])}for(var Wh=0;Wh<Gh.length;Wh++){var mc=Gh[Wh],ju=mc.toLowerCase(),md=mc[0].toUpperCase()+mc.slice(1);Ha(ju,"on"+md)}Ha(Hh,"onAnimationEnd"),Ha(Th,"onAnimationIteration"),Ha(pc,"onAnimationStart"),Ha("dblclick","onDoubleClick"),Ha("focusin","onFocus"),Ha("focusout","onBlur"),Ha(ea,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uo=new Set("cancel close invalid load scroll toggle".split(" ").concat(ta));function Ml(v,T,R){var F=v.type||"unknown-event";v.currentTarget=R,Wn(F,T,void 0,v),v.currentTarget=null}function Vh(v,T){T=(T&4)!==0;for(var R=0;R<v.length;R++){var F=v[R],Y=F.event;F=F.listeners;e:{var ee=void 0;if(T)for(var be=F.length-1;0<=be;be--){var Ye=F[be],at=Ye.instance,Lt=Ye.currentTarget;if(Ye=Ye.listener,at!==ee&&Y.isPropagationStopped())break e;Ml(Y,Ye,Lt),ee=at}else for(be=0;be<F.length;be++){if(Ye=F[be],at=Ye.instance,Lt=Ye.currentTarget,Ye=Ye.listener,at!==ee&&Y.isPropagationStopped())break e;Ml(Y,Ye,Lt),ee=at}}}if(gt)throw v=Ct,gt=!1,Ct=null,v}function zi(v,T){var R=T[ma];R===void 0&&(R=T[ma]=new Set);var F=v+"__bubble";R.has(F)||(Gc(T,v,2,!1),R.add(F))}function gd(v,T,R){var F=0;T&&(F|=4),Gc(R,v,F,T)}var Yu="_reactListening"+Math.random().toString(36).slice(2);function nu(v){if(!v[Yu]){v[Yu]=!0,r.forEach(function(R){R!=="selectionchange"&&(uo.has(R)||gd(R,!1,v),gd(R,!0,v))});var T=v.nodeType===9?v:v.ownerDocument;T===null||T[Yu]||(T[Yu]=!0,gd("selectionchange",!1,T))}}function Gc(v,T,R,F){switch(Hu(T)){case 1:var Y=Uu;break;case 4:Y=bu;break;default:Y=_h}R=Y.bind(null,T,R,v),Y=void 0,!ot||T!=="touchstart"&&T!=="touchmove"&&T!=="wheel"||(Y=!0),F?Y!==void 0?v.addEventListener(T,R,{capture:!0,passive:Y}):v.addEventListener(T,R,!0):Y!==void 0?v.addEventListener(T,R,{passive:Y}):v.addEventListener(T,R,!1)}function Id(v,T,R,F,Y){var ee=F;if(!(T&1)&&!(T&2)&&F!==null)e:for(;;){if(F===null)return;var be=F.tag;if(be===3||be===4){var Ye=F.stateNode.containerInfo;if(Ye===Y||Ye.nodeType===8&&Ye.parentNode===Y)break;if(be===4)for(be=F.return;be!==null;){var at=be.tag;if((at===3||at===4)&&(at=be.stateNode.containerInfo,at===Y||at.nodeType===8&&at.parentNode===Y))return;be=be.return}for(;Ye!==null;){if(be=ga(Ye),be===null)return;if(at=be.tag,at===5||at===6){F=ee=be;continue e}Ye=Ye.parentNode}}F=F.return}Se(function(){var Lt=ee,Zt=_t(R),hn=[];e:{var an=Hc.get(v);if(an!==void 0){var Dn=sl,Zn=v;switch(v){case"keypress":if(da(R)===0)break e;case"keydown":case"keyup":Dn=Ba;break;case"focusin":Zn="focus",Dn=fr;break;case"focusout":Zn="blur",Dn=fr;break;case"beforeblur":case"afterblur":Dn=fr;break;case"click":if(R.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Dn=wu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Dn=Pa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Dn=Fa;break;case Hh:case Th:case pc:Dn=fd;break;case ea:Dn=ql;break;case"scroll":Dn=Ci;break;case"wheel":Dn=Fh;break;case"copy":case"cut":case"paste":Dn=Bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Dn=Er}var ir=(T&4)!==0,Ro=!ir&&v==="scroll",xt=ir?an!==null?an+"Capture":null:an;ir=[];for(var dt=Lt,Et;dt!==null;){Et=dt;var Sn=Et.stateNode;if(Et.tag===5&&Sn!==null&&(Et=Sn,xt!==null&&(Sn=We(dt,xt),Sn!=null&&ir.push(Al(dt,Sn,Et)))),Ro)break;dt=dt.return}0<ir.length&&(an=new Dn(an,Zn,null,R,Zt),hn.push({event:an,listeners:ir}))}}if(!(T&7)){e:{if(an=v==="mouseover"||v==="pointerover",Dn=v==="mouseout"||v==="pointerout",an&&R!==tn&&(Zn=R.relatedTarget||R.fromElement)&&(ga(Zn)||Zn[Qi]))break e;if((Dn||an)&&(an=Zt.window===Zt?Zt:(an=Zt.ownerDocument)?an.defaultView||an.parentWindow:window,Dn?(Zn=R.relatedTarget||R.toElement,Dn=Lt,Zn=Zn?ga(Zn):null,Zn!==null&&(Ro=rr(Zn),Zn!==Ro||Zn.tag!==5&&Zn.tag!==6)&&(Zn=null)):(Dn=null,Zn=Lt),Dn!==Zn)){if(ir=wu,Sn="onMouseLeave",xt="onMouseEnter",dt="mouse",(v==="pointerout"||v==="pointerover")&&(ir=Er,Sn="onPointerLeave",xt="onPointerEnter",dt="pointer"),Ro=Dn==null?an:mn(Dn),Et=Zn==null?an:mn(Zn),an=new ir(Sn,dt+"leave",Dn,R,Zt),an.target=Ro,an.relatedTarget=Et,Sn=null,ga(Zt)===Lt&&(ir=new ir(xt,dt+"enter",Zn,R,Zt),ir.target=Et,ir.relatedTarget=Ro,Sn=ir),Ro=Sn,Dn&&Zn)t:{for(ir=Dn,xt=Zn,dt=0,Et=ir;Et;Et=jh(Et))dt++;for(Et=0,Sn=xt;Sn;Sn=jh(Sn))Et++;for(;0<dt-Et;)ir=jh(ir),dt--;for(;0<Et-dt;)xt=jh(xt),Et--;for(;dt--;){if(ir===xt||xt!==null&&ir===xt.alternate)break t;ir=jh(ir),xt=jh(xt)}ir=null}else ir=null;Dn!==null&&ei(hn,an,Dn,ir,!1),Zn!==null&&Ro!==null&&ei(hn,Ro,Zn,ir,!0)}}e:{if(an=Lt?mn(Lt):window,Dn=an.nodeName&&an.nodeName.toLowerCase(),Dn==="select"||Dn==="input"&&an.type==="file")var lr=Uc;else if(Vu(an))if(is)lr=ye;else{lr=Ad;var nr=bh}else(Dn=an.nodeName)&&Dn.toLowerCase()==="input"&&(an.type==="checkbox"||an.type==="radio")&&(lr=pi);if(lr&&(lr=lr(v,Lt))){Zl(hn,lr,R,Zt);break e}nr&&nr(v,an,Lt),v==="focusout"&&(nr=an._wrapperState)&&nr.controlled&&an.type==="number"&&Mt(an,"number",an.value)}switch(nr=Lt?mn(Lt):window,v){case"focusin":(Vu(nr)||nr.contentEditable==="true")&&(lo=nr,al=Lt,Fi=null);break;case"focusout":Fi=al=lo=null;break;case"mousedown":vs=!0;break;case"contextmenu":case"mouseup":case"dragend":vs=!1,$u(hn,R,Zt);break;case"selectionchange":if(Ti)break;case"keydown":case"keyup":$u(hn,R,Zt)}var mr;if(Ai)e:{switch(v){case"compositionstart":var Lr="onCompositionStart";break e;case"compositionend":Lr="onCompositionEnd";break e;case"compositionupdate":Lr="onCompositionUpdate";break e}Lr=void 0}else Wu?hf(v,R)&&(Lr="onCompositionEnd"):v==="keydown"&&R.keyCode===229&&(Lr="onCompositionStart");Lr&&(fa&&R.locale!=="ko"&&(Wu||Lr!=="onCompositionStart"?Lr==="onCompositionEnd"&&Wu&&(mr=$i()):(wr=Zt,Rs="value"in wr?wr.value:wr.textContent,Wu=!0)),nr=Rd(Lt,Lr),0<nr.length&&(Lr=new Bf(Lr,v,null,R,Zt),hn.push({event:Lr,listeners:nr}),mr?Lr.data=mr:(mr=pd(R),mr!==null&&(Lr.data=mr)))),(mr=ji?ol(v,R):Fc(v,R))&&(Lt=Rd(Lt,"onBeforeInput"),0<Lt.length&&(Zt=new Bf("onBeforeInput","beforeinput",null,R,Zt),hn.push({event:Zt,listeners:Lt}),Zt.data=mr))}Vh(hn,T)})}function Al(v,T,R){return{instance:v,listener:T,currentTarget:R}}function Rd(v,T){for(var R=T+"Capture",F=[];v!==null;){var Y=v,ee=Y.stateNode;Y.tag===5&&ee!==null&&(Y=ee,ee=We(v,R),ee!=null&&F.unshift(Al(v,ee,Y)),ee=We(v,T),ee!=null&&F.push(Al(v,ee,Y))),v=v.return}return F}function jh(v){if(v===null)return null;do v=v.return;while(v&&v.tag!==5);return v||null}function ei(v,T,R,F,Y){for(var ee=T._reactName,be=[];R!==null&&R!==F;){var Ye=R,at=Ye.alternate,Lt=Ye.stateNode;if(at!==null&&at===F)break;Ye.tag===5&&Lt!==null&&(Ye=Lt,Y?(at=We(R,ee),at!=null&&be.unshift(Al(R,at,Ye))):Y||(at=We(R,ee),at!=null&&be.push(Al(R,at,Ye)))),R=R.return}be.length!==0&&v.push({event:T,listeners:be})}var Ii=/\r\n?/g,Sp=/\u0000|\uFFFD/g;function Ff(v){return(typeof v=="string"?v:""+v).replace(Ii,`
`).replace(Sp,"")}function Il(v,T,R){if(T=Ff(T),Ff(v)!==T&&R)throw Error(t(425))}function ru(){}var Xu=null,Ku=null;function Sh(v,T){return v==="textarea"||v==="noscript"||typeof T.children=="string"||typeof T.children=="number"||typeof T.dangerouslySetInnerHTML=="object"&&T.dangerouslySetInnerHTML!==null&&T.dangerouslySetInnerHTML.__html!=null}var ll=typeof setTimeout=="function"?setTimeout:void 0,na=typeof clearTimeout=="function"?clearTimeout:void 0,Rl=typeof Promise=="function"?Promise:void 0,Wc=typeof queueMicrotask=="function"?queueMicrotask:typeof Rl<"u"?function(v){return Rl.resolve(null).then(v).catch(kl)}:ll;function kl(v){setTimeout(function(){throw v})}function Vc(v,T){var R=T,F=0;do{var Y=R.nextSibling;if(v.removeChild(R),Y&&Y.nodeType===8)if(R=Y.data,R==="/$"){if(F===0){v.removeChild(Y),Gn(T);return}F--}else R!=="$"&&R!=="$?"&&R!=="$!"||F++;R=Y}while(R);Gn(T)}function gc(v){for(;v!=null;v=v.nextSibling){var T=v.nodeType;if(T===1||T===3)break;if(T===8){if(T=v.data,T==="$"||T==="$!"||T==="$?")break;if(T==="/$")return null}}return v}function kd(v){v=v.previousSibling;for(var T=0;v;){if(v.nodeType===8){var R=v.data;if(R==="$"||R==="$!"||R==="$?"){if(T===0)return v;T--}else R==="/$"&&T++}v=v.previousSibling}return null}var Ga=Math.random().toString(36).slice(2),Vr="__reactFiber$"+Ga,ul="__reactProps$"+Ga,Qi="__reactContainer$"+Ga,ma="__reactEvents$"+Ga,X="__reactListeners$"+Ga,xs="__reactHandles$"+Ga;function ga(v){var T=v[Vr];if(T)return T;for(var R=v.parentNode;R;){if(T=R[Qi]||R[Vr]){if(R=T.alternate,T.child!==null||R!==null&&R.child!==null)for(v=kd(v);v!==null;){if(R=v[Vr])return R;v=kd(v)}return T}v=R,R=v.parentNode}return null}function Mr(v){return v=v[Vr]||v[Qi],!v||v.tag!==5&&v.tag!==6&&v.tag!==13&&v.tag!==3?null:v}function mn(v){if(v.tag===5||v.tag===6)return v.stateNode;throw Error(t(33))}function zf(v){return v[ul]||null}var cl=[],Ri=-1;function hi(v){return{current:v}}function Zi(v){0>Ri||(v.current=cl[Ri],cl[Ri]=null,Ri--)}function ss(v,T){Ri++,cl[Ri]=v.current,v.current=T}var jc={},_a=hi(jc),va=hi(!1),os=jc;function Yc(v,T){var R=v.type.contextTypes;if(!R)return jc;var F=v.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===T)return F.__reactInternalMemoizedMaskedChildContext;var Y={},ee;for(ee in R)Y[ee]=T[ee];return F&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=T,v.__reactInternalMemoizedMaskedChildContext=Y),Y}function ra(v){return v=v.childContextTypes,v!=null}function Od(){Zi(va),Zi(_a)}function Ld(v,T,R){if(_a.current!==jc)throw Error(t(168));ss(_a,T),ss(va,R)}function Yh(v,T,R){var F=v.stateNode;if(T=T.childContextTypes,typeof F.getChildContext!="function")return R;F=F.getChildContext();for(var Y in F)if(!(Y in T))throw Error(t(108,Qe(v)||"Unknown",Y));return ie({},R,F)}function Gs(v){return v=(v=v.stateNode)&&v.__reactInternalMemoizedMergedChildContext||jc,os=_a.current,ss(_a,v),ss(va,va.current),!0}function Kn(v,T,R){var F=v.stateNode;if(!F)throw Error(t(169));R?(v=Yh(v,T,os),F.__reactInternalMemoizedMergedChildContext=v,Zi(va),Zi(_a),ss(_a,v)):Zi(va),ss(va,R)}var Ws=null,Js=!1,Ui=!1;function iu(v){Ws===null?Ws=[v]:Ws.push(v)}function Uo(v){Js=!0,iu(v)}function xn(){if(!Ui&&Ws!==null){Ui=!0;var v=0,T=vr;try{var R=Ws;for(vr=1;v<R.length;v++){var F=R[v];do F=F(!0);while(F!==null)}Ws=null,Js=!1}catch(Y){throw Ws!==null&&(Ws=Ws.slice(v+1)),Ss(el,xn),Y}finally{vr=T,Ui=!1}}return null}var mi=[],gi=0,Uf=null,wh=0,co=[],ya=0,Cn=null,yn=1,hl="";function _c(v,T){mi[gi++]=wh,mi[gi++]=Uf,Uf=v,wh=T}function wp(v,T,R){co[ya++]=yn,co[ya++]=hl,co[ya++]=Cn,Cn=v;var F=yn;v=hl;var Y=32-Gr(F)-1;F&=~(1<<Y),R+=1;var ee=32-Gr(T)+Y;if(30<ee){var be=Y-Y%5;ee=(F&(1<<be)-1).toString(32),F>>=be,Y-=be,yn=1<<32-Gr(T)+Y|R<<Y|F,hl=ee+v}else yn=1<<ee|R<<Y|F,hl=v}function su(v){v.return!==null&&(_c(v,1),wp(v,1,0))}function Co(v){for(;v===Uf;)Uf=mi[--gi],mi[gi]=null,wh=mi[--gi],mi[gi]=null;for(;v===Cn;)Cn=co[--ya],co[ya]=null,hl=co[--ya],co[ya]=null,yn=co[--ya],co[ya]=null}var ys=null,dl=null,as=!1,fl=null;function Ho(v,T){var R=Ou(5,null,null,0);R.elementType="DELETED",R.stateNode=T,R.return=v,T=v.deletions,T===null?(v.deletions=[R],v.flags|=16):T.push(R)}function Xh(v,T){switch(v.tag){case 5:var R=v.type;return T=T.nodeType!==1||R.toLowerCase()!==T.nodeName.toLowerCase()?null:T,T!==null?(v.stateNode=T,ys=v,dl=gc(T.firstChild),!0):!1;case 6:return T=v.pendingProps===""||T.nodeType!==3?null:T,T!==null?(v.stateNode=T,ys=v,dl=null,!0):!1;case 13:return T=T.nodeType!==8?null:T,T!==null?(R=Cn!==null?{id:yn,overflow:hl}:null,v.memoizedState={dehydrated:T,treeContext:R,retryLane:1073741824},R=Ou(18,null,null,0),R.stateNode=T,R.return=v,v.child=R,ys=v,dl=null,!0):!1;default:return!1}}function Wa(v){return(v.mode&1)!==0&&(v.flags&128)===0}function ki(v){if(as){var T=dl;if(T){var R=T;if(!Xh(v,T)){if(Wa(v))throw Error(t(418));T=gc(R.nextSibling);var F=ys;T&&Xh(v,T)?Ho(F,R):(v.flags=v.flags&-4097|2,as=!1,ys=v)}}else{if(Wa(v))throw Error(t(418));v.flags=v.flags&-4097|2,as=!1,ys=v}}}function Nd(v){for(v=v.return;v!==null&&v.tag!==5&&v.tag!==3&&v.tag!==13;)v=v.return;ys=v}function Xc(v){if(v!==ys)return!1;if(!as)return Nd(v),as=!0,!1;var T;if((T=v.tag!==3)&&!(T=v.tag!==5)&&(T=v.type,T=T!=="head"&&T!=="body"&&!Sh(v.type,v.memoizedProps)),T&&(T=dl)){if(Wa(v))throw Kh(),Error(t(418));for(;T;)Ho(v,T),T=gc(T.nextSibling)}if(Nd(v),v.tag===13){if(v=v.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));e:{for(v=v.nextSibling,T=0;v;){if(v.nodeType===8){var R=v.data;if(R==="/$"){if(T===0){dl=gc(v.nextSibling);break e}T--}else R!=="$"&&R!=="$!"&&R!=="$?"||T++}v=v.nextSibling}dl=null}}else dl=ys?gc(v.stateNode.nextSibling):null;return!0}function Kh(){for(var v=dl;v;)v=gc(v.nextSibling)}function Go(){dl=ys=null,as=!1}function Mo(v){fl===null?fl=[v]:fl.push(v)}var df=D.ReactCurrentBatchConfig;function Cu(v,T){if(v&&v.defaultProps){T=ie({},T),v=v.defaultProps;for(var R in v)T[R]===void 0&&(T[R]=v[R]);return T}return T}var Ol=hi(null),_d=null,vc=null,Kr=null;function ou(){Kr=vc=_d=null}function Ju(v){var T=Ol.current;Zi(Ol),v._currentValue=T}function ls(v,T,R){for(;v!==null;){var F=v.alternate;if((v.childLanes&T)!==T?(v.childLanes|=T,F!==null&&(F.childLanes|=T)):F!==null&&(F.childLanes&T)!==T&&(F.childLanes|=T),v===R)break;v=v.return}}function Va(v,T){_d=v,Kr=vc=null,v=v.dependencies,v!==null&&v.firstContext!==null&&(v.lanes&T&&(gn=!0),v.firstContext=null)}function $s(v){var T=v._currentValue;if(Kr!==v)if(v={context:v,memoizedValue:T,next:null},vc===null){if(_d===null)throw Error(t(308));vc=v,_d.dependencies={lanes:0,firstContext:v}}else vc=vc.next=v;return T}var Cs=null;function Kc(v){Cs===null?Cs=[v]:Cs.push(v)}function _i(v,T,R,F){var Y=T.interleaved;return Y===null?(R.next=R,Kc(T)):(R.next=Y.next,Y.next=R),T.interleaved=R,ja(v,F)}function ja(v,T){v.lanes|=T;var R=v.alternate;for(R!==null&&(R.lanes|=T),R=v,v=v.return;v!==null;)v.childLanes|=T,R=v.alternate,R!==null&&(R.childLanes|=T),R=v,v=v.return;return R.tag===3?R.stateNode:null}var yc=!1;function ff(v){v.updateQueue={baseState:v.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Eh(v,T){v=v.updateQueue,T.updateQueue===v&&(T.updateQueue={baseState:v.baseState,firstBaseUpdate:v.firstBaseUpdate,lastBaseUpdate:v.lastBaseUpdate,shared:v.shared,effects:v.effects})}function ia(v,T){return{eventTime:v,lane:T,tag:0,payload:null,callback:null,next:null}}function Yi(v,T,R){var F=v.updateQueue;if(F===null)return null;if(F=F.shared,(ts&2)!==0){var Y=F.pending;return Y===null?T.next=T:(T.next=Y.next,Y.next=T),F.pending=T,ja(v,R)}return Y=F.interleaved,Y===null?(T.next=T,Kc(F)):(T.next=Y.next,Y.next=T),F.interleaved=T,ja(v,R)}function Pn(v,T,R){if(T=T.updateQueue,T!==null&&(T=T.shared,(R&4194240)!==0)){var F=T.lanes;F&=v.pendingLanes,R|=F,T.lanes=R,Qo(v,R)}}function tr(v,T){var R=v.updateQueue,F=v.alternate;if(F!==null&&(F=F.updateQueue,R===F)){var Y=null,ee=null;if(R=R.firstBaseUpdate,R!==null){do{var be={eventTime:R.eventTime,lane:R.lane,tag:R.tag,payload:R.payload,callback:R.callback,next:null};ee===null?Y=ee=be:ee=ee.next=be,R=R.next}while(R!==null);ee===null?Y=ee=T:ee=ee.next=T}else Y=ee=T;R={baseState:F.baseState,firstBaseUpdate:Y,lastBaseUpdate:ee,shared:F.shared,effects:F.effects},v.updateQueue=R;return}v=R.lastBaseUpdate,v===null?R.firstBaseUpdate=T:v.next=T,R.lastBaseUpdate=T}function Nr(v,T,R,F){var Y=v.updateQueue;yc=!1;var ee=Y.firstBaseUpdate,be=Y.lastBaseUpdate,Ye=Y.shared.pending;if(Ye!==null){Y.shared.pending=null;var at=Ye,Lt=at.next;at.next=null,be===null?ee=Lt:be.next=Lt,be=at;var Zt=v.alternate;Zt!==null&&(Zt=Zt.updateQueue,Ye=Zt.lastBaseUpdate,Ye!==be&&(Ye===null?Zt.firstBaseUpdate=Lt:Ye.next=Lt,Zt.lastBaseUpdate=at))}if(ee!==null){var hn=Y.baseState;be=0,Zt=Lt=at=null,Ye=ee;do{var an=Ye.lane,Dn=Ye.eventTime;if((F&an)===an){Zt!==null&&(Zt=Zt.next={eventTime:Dn,lane:0,tag:Ye.tag,payload:Ye.payload,callback:Ye.callback,next:null});e:{var Zn=v,ir=Ye;switch(an=T,Dn=R,ir.tag){case 1:if(Zn=ir.payload,typeof Zn=="function"){hn=Zn.call(Dn,hn,an);break e}hn=Zn;break e;case 3:Zn.flags=Zn.flags&-65537|128;case 0:if(Zn=ir.payload,an=typeof Zn=="function"?Zn.call(Dn,hn,an):Zn,an==null)break e;hn=ie({},hn,an);break e;case 2:yc=!0}}Ye.callback!==null&&Ye.lane!==0&&(v.flags|=64,an=Y.effects,an===null?Y.effects=[Ye]:an.push(Ye))}else Dn={eventTime:Dn,lane:an,tag:Ye.tag,payload:Ye.payload,callback:Ye.callback,next:null},Zt===null?(Lt=Zt=Dn,at=hn):Zt=Zt.next=Dn,be|=an;if(Ye=Ye.next,Ye===null){if(Ye=Y.shared.pending,Ye===null)break;an=Ye,Ye=an.next,an.next=null,Y.lastBaseUpdate=an,Y.shared.pending=null}}while(!0);if(Zt===null&&(at=hn),Y.baseState=at,Y.firstBaseUpdate=Lt,Y.lastBaseUpdate=Zt,T=Y.shared.interleaved,T!==null){Y=T;do be|=Y.lane,Y=Y.next;while(Y!==T)}else ee===null&&(Y.shared.lanes=0);Ud|=be,v.lanes=be,v.memoizedState=hn}}function ti(v,T,R){if(v=T.effects,T.effects=null,v!==null)for(T=0;T<v.length;T++){var F=v[T],Y=F.callback;if(Y!==null){if(F.callback=null,F=R,typeof Y!="function")throw Error(t(191,Y));Y.call(F)}}}var qr=new n.Component().refs;function Ao(v,T,R,F){T=v.memoizedState,R=R(F,T),R=R==null?T:ie({},T,R),v.memoizedState=R,v.lanes===0&&(v.updateQueue.baseState=R)}var us={isMounted:function(v){return(v=v._reactInternals)?rr(v)===v:!1},enqueueSetState:function(v,T,R){v=v._reactInternals;var F=$c(),Y=Wd(v),ee=ia(F,Y);ee.payload=T,R!=null&&(ee.callback=R),T=Yi(v,ee,Y),T!==null&&(oa(T,v,Y,F),Pn(T,v,Y))},enqueueReplaceState:function(v,T,R){v=v._reactInternals;var F=$c(),Y=Wd(v),ee=ia(F,Y);ee.tag=1,ee.payload=T,R!=null&&(ee.callback=R),T=Yi(v,ee,Y),T!==null&&(oa(T,v,Y,F),Pn(T,v,Y))},enqueueForceUpdate:function(v,T){v=v._reactInternals;var R=$c(),F=Wd(v),Y=ia(R,F);Y.tag=2,T!=null&&(Y.callback=T),T=Yi(v,Y,F),T!==null&&(oa(T,v,F,R),Pn(T,v,F))}};function es(v,T,R,F,Y,ee,be){return v=v.stateNode,typeof v.shouldComponentUpdate=="function"?v.shouldComponentUpdate(F,ee,be):T.prototype&&T.prototype.isPureReactComponent?!Ot(R,F)||!Ot(Y,ee):!0}function au(v,T,R){var F=!1,Y=jc,ee=T.contextType;return typeof ee=="object"&&ee!==null?ee=$s(ee):(Y=ra(T)?os:_a.current,F=T.contextTypes,ee=(F=F!=null)?Yc(v,Y):jc),T=new T(R,ee),v.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=us,v.stateNode=T,T._reactInternals=v,F&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=Y,v.__reactInternalMemoizedMaskedChildContext=ee),T}function qu(v,T,R,F){v=T.state,typeof T.componentWillReceiveProps=="function"&&T.componentWillReceiveProps(R,F),typeof T.UNSAFE_componentWillReceiveProps=="function"&&T.UNSAFE_componentWillReceiveProps(R,F),T.state!==v&&us.enqueueReplaceState(T,T.state,null)}function bc(v,T,R,F){var Y=v.stateNode;Y.props=R,Y.state=v.memoizedState,Y.refs=qr,ff(v);var ee=T.contextType;typeof ee=="object"&&ee!==null?Y.context=$s(ee):(ee=ra(T)?os:_a.current,Y.context=Yc(v,ee)),Y.state=v.memoizedState,ee=T.getDerivedStateFromProps,typeof ee=="function"&&(Ao(v,T,ee,R),Y.state=v.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(T=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),T!==Y.state&&us.enqueueReplaceState(Y,Y.state,null),Nr(v,R,Y,F),Y.state=v.memoizedState),typeof Y.componentDidMount=="function"&&(v.flags|=4194308)}function Qu(v,T,R){if(v=R.ref,v!==null&&typeof v!="function"&&typeof v!="object"){if(R._owner){if(R=R._owner,R){if(R.tag!==1)throw Error(t(309));var F=R.stateNode}if(!F)throw Error(t(147,v));var Y=F,ee=""+v;return T!==null&&T.ref!==null&&typeof T.ref=="function"&&T.ref._stringRef===ee?T.ref:(T=function(be){var Ye=Y.refs;Ye===qr&&(Ye=Y.refs={}),be===null?delete Ye[ee]:Ye[ee]=be},T._stringRef=ee,T)}if(typeof v!="string")throw Error(t(284));if(!R._owner)throw Error(t(290,v))}return v}function qs(v,T){throw v=Object.prototype.toString.call(T),Error(t(31,v==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":v))}function ho(v){var T=v._init;return T(v._payload)}function vd(v){function T(xt,dt){if(v){var Et=xt.deletions;Et===null?(xt.deletions=[dt],xt.flags|=16):Et.push(dt)}}function R(xt,dt){if(!v)return null;for(;dt!==null;)T(xt,dt),dt=dt.sibling;return null}function F(xt,dt){for(xt=new Map;dt!==null;)dt.key!==null?xt.set(dt.key,dt):xt.set(dt.index,dt),dt=dt.sibling;return xt}function Y(xt,dt){return xt=ed(xt,dt),xt.index=0,xt.sibling=null,xt}function ee(xt,dt,Et){return xt.index=Et,v?(Et=xt.alternate,Et!==null?(Et=Et.index,Et<dt?(xt.flags|=2,dt):Et):(xt.flags|=2,dt)):(xt.flags|=1048576,dt)}function be(xt){return v&&xt.alternate===null&&(xt.flags|=2),xt}function Ye(xt,dt,Et,Sn){return dt===null||dt.tag!==6?(dt=kp(Et,xt.mode,Sn),dt.return=xt,dt):(dt=Y(dt,Et),dt.return=xt,dt)}function at(xt,dt,Et,Sn){var lr=Et.type;return lr===V?Zt(xt,dt,Et.props.children,Sn,Et.key):dt!==null&&(dt.elementType===lr||typeof lr=="object"&&lr!==null&&lr.$$typeof===ge&&ho(lr)===dt.type)?(Sn=Y(dt,Et.props),Sn.ref=Qu(xt,dt,Et),Sn.return=xt,Sn):(Sn=cm(Et.type,Et.key,Et.props,null,xt.mode,Sn),Sn.ref=Qu(xt,dt,Et),Sn.return=xt,Sn)}function Lt(xt,dt,Et,Sn){return dt===null||dt.tag!==4||dt.stateNode.containerInfo!==Et.containerInfo||dt.stateNode.implementation!==Et.implementation?(dt=bd(Et,xt.mode,Sn),dt.return=xt,dt):(dt=Y(dt,Et.children||[]),dt.return=xt,dt)}function Zt(xt,dt,Et,Sn,lr){return dt===null||dt.tag!==7?(dt=Yf(Et,xt.mode,Sn,lr),dt.return=xt,dt):(dt=Y(dt,Et),dt.return=xt,dt)}function hn(xt,dt,Et){if(typeof dt=="string"&&dt!==""||typeof dt=="number")return dt=kp(""+dt,xt.mode,Et),dt.return=xt,dt;if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case z:return Et=cm(dt.type,dt.key,dt.props,null,xt.mode,Et),Et.ref=Qu(xt,null,dt),Et.return=xt,Et;case U:return dt=bd(dt,xt.mode,Et),dt.return=xt,dt;case ge:var Sn=dt._init;return hn(xt,Sn(dt._payload),Et)}if(At(dt)||re(dt))return dt=Yf(dt,xt.mode,Et,null),dt.return=xt,dt;qs(xt,dt)}return null}function an(xt,dt,Et,Sn){var lr=dt!==null?dt.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number")return lr!==null?null:Ye(xt,dt,""+Et,Sn);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case z:return Et.key===lr?at(xt,dt,Et,Sn):null;case U:return Et.key===lr?Lt(xt,dt,Et,Sn):null;case ge:return lr=Et._init,an(xt,dt,lr(Et._payload),Sn)}if(At(Et)||re(Et))return lr!==null?null:Zt(xt,dt,Et,Sn,null);qs(xt,Et)}return null}function Dn(xt,dt,Et,Sn,lr){if(typeof Sn=="string"&&Sn!==""||typeof Sn=="number")return xt=xt.get(Et)||null,Ye(dt,xt,""+Sn,lr);if(typeof Sn=="object"&&Sn!==null){switch(Sn.$$typeof){case z:return xt=xt.get(Sn.key===null?Et:Sn.key)||null,at(dt,xt,Sn,lr);case U:return xt=xt.get(Sn.key===null?Et:Sn.key)||null,Lt(dt,xt,Sn,lr);case ge:var nr=Sn._init;return Dn(xt,dt,Et,nr(Sn._payload),lr)}if(At(Sn)||re(Sn))return xt=xt.get(Et)||null,Zt(dt,xt,Sn,lr,null);qs(dt,Sn)}return null}function Zn(xt,dt,Et,Sn){for(var lr=null,nr=null,mr=dt,Lr=dt=0,Ul=null;mr!==null&&Lr<Et.length;Lr++){mr.index>Lr?(Ul=mr,mr=null):Ul=mr.sibling;var ds=an(xt,mr,Et[Lr],Sn);if(ds===null){mr===null&&(mr=Ul);break}v&&mr&&ds.alternate===null&&T(xt,mr),dt=ee(ds,dt,Lr),nr===null?lr=ds:nr.sibling=ds,nr=ds,mr=Ul}if(Lr===Et.length)return R(xt,mr),as&&_c(xt,Lr),lr;if(mr===null){for(;Lr<Et.length;Lr++)mr=hn(xt,Et[Lr],Sn),mr!==null&&(dt=ee(mr,dt,Lr),nr===null?lr=mr:nr.sibling=mr,nr=mr);return as&&_c(xt,Lr),lr}for(mr=F(xt,mr);Lr<Et.length;Lr++)Ul=Dn(mr,xt,Lr,Et[Lr],Sn),Ul!==null&&(v&&Ul.alternate!==null&&mr.delete(Ul.key===null?Lr:Ul.key),dt=ee(Ul,dt,Lr),nr===null?lr=Ul:nr.sibling=Ul,nr=Ul);return v&&mr.forEach(function(Qf){return T(xt,Qf)}),as&&_c(xt,Lr),lr}function ir(xt,dt,Et,Sn){var lr=re(Et);if(typeof lr!="function")throw Error(t(150));if(Et=lr.call(Et),Et==null)throw Error(t(151));for(var nr=lr=null,mr=dt,Lr=dt=0,Ul=null,ds=Et.next();mr!==null&&!ds.done;Lr++,ds=Et.next()){mr.index>Lr?(Ul=mr,mr=null):Ul=mr.sibling;var Qf=an(xt,mr,ds.value,Sn);if(Qf===null){mr===null&&(mr=Ul);break}v&&mr&&Qf.alternate===null&&T(xt,mr),dt=ee(Qf,dt,Lr),nr===null?lr=Qf:nr.sibling=Qf,nr=Qf,mr=Ul}if(ds.done)return R(xt,mr),as&&_c(xt,Lr),lr;if(mr===null){for(;!ds.done;Lr++,ds=Et.next())ds=hn(xt,ds.value,Sn),ds!==null&&(dt=ee(ds,dt,Lr),nr===null?lr=ds:nr.sibling=ds,nr=ds);return as&&_c(xt,Lr),lr}for(mr=F(xt,mr);!ds.done;Lr++,ds=Et.next())ds=Dn(mr,xt,Lr,ds.value,Sn),ds!==null&&(v&&ds.alternate!==null&&mr.delete(ds.key===null?Lr:ds.key),dt=ee(ds,dt,Lr),nr===null?lr=ds:nr.sibling=ds,nr=ds);return v&&mr.forEach(function($0){return T(xt,$0)}),as&&_c(xt,Lr),lr}function Ro(xt,dt,Et,Sn){if(typeof Et=="object"&&Et!==null&&Et.type===V&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case z:e:{for(var lr=Et.key,nr=dt;nr!==null;){if(nr.key===lr){if(lr=Et.type,lr===V){if(nr.tag===7){R(xt,nr.sibling),dt=Y(nr,Et.props.children),dt.return=xt,xt=dt;break e}}else if(nr.elementType===lr||typeof lr=="object"&&lr!==null&&lr.$$typeof===ge&&ho(lr)===nr.type){R(xt,nr.sibling),dt=Y(nr,Et.props),dt.ref=Qu(xt,nr,Et),dt.return=xt,xt=dt;break e}R(xt,nr);break}else T(xt,nr);nr=nr.sibling}Et.type===V?(dt=Yf(Et.props.children,xt.mode,Sn,Et.key),dt.return=xt,xt=dt):(Sn=cm(Et.type,Et.key,Et.props,null,xt.mode,Sn),Sn.ref=Qu(xt,dt,Et),Sn.return=xt,xt=Sn)}return be(xt);case U:e:{for(nr=Et.key;dt!==null;){if(dt.key===nr)if(dt.tag===4&&dt.stateNode.containerInfo===Et.containerInfo&&dt.stateNode.implementation===Et.implementation){R(xt,dt.sibling),dt=Y(dt,Et.children||[]),dt.return=xt,xt=dt;break e}else{R(xt,dt);break}else T(xt,dt);dt=dt.sibling}dt=bd(Et,xt.mode,Sn),dt.return=xt,xt=dt}return be(xt);case ge:return nr=Et._init,Ro(xt,dt,nr(Et._payload),Sn)}if(At(Et))return Zn(xt,dt,Et,Sn);if(re(Et))return ir(xt,dt,Et,Sn);qs(xt,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"?(Et=""+Et,dt!==null&&dt.tag===6?(R(xt,dt.sibling),dt=Y(dt,Et),dt.return=xt,xt=dt):(R(xt,dt),dt=kp(Et,xt.mode,Sn),dt.return=xt,xt=dt),be(xt)):R(xt,dt)}return Ro}var ba=vd(!0),Mu=vd(!1),Au={},fo=hi(Au),po=hi(Au),Ll=hi(Au);function Wo(v){if(v===Au)throw Error(t(174));return v}function Zu(v,T){switch(ss(Ll,T),ss(po,v),ss(fo,Au),v=T.nodeType,v){case 9:case 11:T=(T=T.documentElement)?T.namespaceURI:It(null,"");break;default:v=v===8?T.parentNode:T,T=v.namespaceURI||null,v=v.tagName,T=It(T,v)}Zi(fo),ss(fo,T)}function ec(){Zi(fo),Zi(po),Zi(Ll)}function xh(v){Wo(Ll.current);var T=Wo(fo.current),R=It(T,v.type);T!==R&&(ss(po,v),ss(fo,R))}function $h(v){po.current===v&&(Zi(fo),Zi(po))}var Or=hi(0);function bs(v){for(var T=v;T!==null;){if(T.tag===13){var R=T.memoizedState;if(R!==null&&(R=R.dehydrated,R===null||R.data==="$?"||R.data==="$!"))return T}else if(T.tag===19&&T.memoizedProps.revealOrder!==void 0){if(T.flags&128)return T}else if(T.child!==null){T.child.return=T,T=T.child;continue}if(T===v)break;for(;T.sibling===null;){if(T.return===null||T.return===v)return null;T=T.return}T.sibling.return=T.return,T=T.sibling}return null}var Os=[];function Ya(){for(var v=0;v<Os.length;v++)Os[v]._workInProgressVersionPrimary=null;Os.length=0}var Vs=D.ReactCurrentDispatcher,fn=D.ReactCurrentBatchConfig,Jc=0,wn=null,vi=null,Ms=null,lu=!1,Nl=!1,Ft=0,pl=0;function jr(){throw Error(t(321))}function tc(v,T){if(T===null)return!1;for(var R=0;R<T.length&&R<v.length;R++)if(!Be(v[R],T[R]))return!1;return!0}function Jh(v,T,R,F,Y,ee){if(Jc=ee,wn=T,T.memoizedState=null,T.updateQueue=null,T.lanes=0,Vs.current=v===null||v.memoizedState===null?_:$,v=R(F,Y),Nl){ee=0;do{if(Nl=!1,Ft=0,25<=ee)throw Error(t(301));ee+=1,Ms=vi=null,T.updateQueue=null,Vs.current=I,v=R(F,Y)}while(Nl)}if(Vs.current=d,T=vi!==null&&vi.next!==null,Jc=0,Ms=vi=wn=null,lu=!1,T)throw Error(t(300));return v}function qc(){var v=Ft!==0;return Ft=0,v}function ai(){var v={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ms===null?wn.memoizedState=Ms=v:Ms=Ms.next=v,Ms}function Xi(){if(vi===null){var v=wn.alternate;v=v!==null?v.memoizedState:null}else v=vi.next;var T=Ms===null?wn.memoizedState:Ms.next;if(T!==null)Ms=T,vi=v;else{if(v===null)throw Error(t(310));vi=v,v={memoizedState:vi.memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},Ms===null?wn.memoizedState=Ms=v:Ms=Ms.next=v}return Ms}function Qc(v,T){return typeof T=="function"?T(v):T}function mo(v){var T=Xi(),R=T.queue;if(R===null)throw Error(t(311));R.lastRenderedReducer=v;var F=vi,Y=F.baseQueue,ee=R.pending;if(ee!==null){if(Y!==null){var be=Y.next;Y.next=ee.next,ee.next=be}F.baseQueue=Y=ee,R.pending=null}if(Y!==null){ee=Y.next,F=F.baseState;var Ye=be=null,at=null,Lt=ee;do{var Zt=Lt.lane;if((Jc&Zt)===Zt)at!==null&&(at=at.next={lane:0,action:Lt.action,hasEagerState:Lt.hasEagerState,eagerState:Lt.eagerState,next:null}),F=Lt.hasEagerState?Lt.eagerState:v(F,Lt.action);else{var hn={lane:Zt,action:Lt.action,hasEagerState:Lt.hasEagerState,eagerState:Lt.eagerState,next:null};at===null?(Ye=at=hn,be=F):at=at.next=hn,wn.lanes|=Zt,Ud|=Zt}Lt=Lt.next}while(Lt!==null&&Lt!==ee);at===null?be=F:at.next=Ye,Be(F,T.memoizedState)||(gn=!0),T.memoizedState=F,T.baseState=be,T.baseQueue=at,R.lastRenderedState=F}if(v=R.interleaved,v!==null){Y=v;do ee=Y.lane,wn.lanes|=ee,Ud|=ee,Y=Y.next;while(Y!==v)}else Y===null&&(R.lanes=0);return[T.memoizedState,R.dispatch]}function ml(v){var T=Xi(),R=T.queue;if(R===null)throw Error(t(311));R.lastRenderedReducer=v;var F=R.dispatch,Y=R.pending,ee=T.memoizedState;if(Y!==null){R.pending=null;var be=Y=Y.next;do ee=v(ee,be.action),be=be.next;while(be!==Y);Be(ee,T.memoizedState)||(gn=!0),T.memoizedState=ee,T.baseQueue===null&&(T.baseState=ee),R.lastRenderedState=ee}return[ee,F]}function Zc(){}function Tc(v,T){var R=wn,F=Xi(),Y=T(),ee=!Be(F.memoizedState,Y);if(ee&&(F.memoizedState=Y,gn=!0),F=F.queue,rc(Qs.bind(null,R,F,v),[v]),F.getSnapshot!==T||ee||Ms!==null&&Ms.memoizedState.tag&1){if(R.flags|=2048,Iu(9,Io.bind(null,R,F,Y,T),void 0,null),hu===null)throw Error(t(349));Jc&30||nc(R,T,Y)}return Y}function nc(v,T,R){v.flags|=16384,v={getSnapshot:T,value:R},T=wn.updateQueue,T===null?(T={lastEffect:null,stores:null},wn.updateQueue=T,T.stores=[v]):(R=T.stores,R===null?T.stores=[v]:R.push(v))}function Io(v,T,R,F){T.value=R,T.getSnapshot=F,sa(T)&&Ch(v)}function Qs(v,T,R){return R(function(){sa(T)&&Ch(v)})}function sa(v){var T=v.getSnapshot;v=v.value;try{var R=T();return!Be(v,R)}catch{return!0}}function Ch(v){var T=ja(v,1);T!==null&&oa(T,v,1,-1)}function go(v){var T=ai();return typeof v=="function"&&(v=v()),T.memoizedState=T.baseState=v,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qc,lastRenderedState:v},T.queue=v,v=v.dispatch=Qh.bind(null,wn,v),[T.memoizedState,v]}function Iu(v,T,R,F){return v={tag:v,create:T,destroy:R,deps:F,next:null},T=wn.updateQueue,T===null?(T={lastEffect:null,stores:null},wn.updateQueue=T,T.lastEffect=v.next=v):(R=T.lastEffect,R===null?T.lastEffect=v.next=v:(F=R.next,R.next=v,v.next=F,T.lastEffect=v)),v}function eh(){return Xi().memoizedState}function Sc(v,T,R,F){var Y=ai();wn.flags|=v,Y.memoizedState=Iu(1|T,R,void 0,F===void 0?null:F)}function Vo(v,T,R,F){var Y=Xi();F=F===void 0?null:F;var ee=void 0;if(vi!==null){var be=vi.memoizedState;if(ee=be.destroy,F!==null&&tc(F,be.deps)){Y.memoizedState=Iu(T,R,ee,F);return}}wn.flags|=v,Y.memoizedState=Iu(1|T,R,ee,F)}function _o(v,T){return Sc(8390656,8,v,T)}function rc(v,T){return Vo(2048,8,v,T)}function Dl(v,T){return Vo(4,2,v,T)}function vo(v,T){return Vo(4,4,v,T)}function Pl(v,T){if(typeof T=="function")return v=v(),T(v),function(){T(null)};if(T!=null)return v=v(),T.current=v,function(){T.current=null}}function Xa(v,T,R){return R=R!=null?R.concat([v]):null,Vo(4,4,Pl.bind(null,T,v),R)}function uu(){}function ni(v,T){var R=Xi();T=T===void 0?null:T;var F=R.memoizedState;return F!==null&&T!==null&&tc(T,F[1])?F[0]:(R.memoizedState=[v,T],v)}function cs(v,T){var R=Xi();T=T===void 0?null:T;var F=R.memoizedState;return F!==null&&T!==null&&tc(T,F[1])?F[0]:(v=v(),R.memoizedState=[v,T],v)}function qh(v,T,R){return Jc&21?(Be(R,T)||(R=qo(),wn.lanes|=R,Ud|=R,v.baseState=!0),T):(v.baseState&&(v.baseState=!1,gn=!0),v.memoizedState=R)}function yd(v,T){var R=vr;vr=R!==0&&4>R?R:4,v(!0);var F=fn.transition;fn.transition={};try{v(!1),T()}finally{vr=R,fn.transition=F}}function Ta(){return Xi().memoizedState}function Sa(v,T,R){var F=Wd(v);if(R={lane:F,action:R,hasEagerState:!1,eagerState:null,next:null},wc(v))Hf(T,R);else if(R=_i(v,T,R,F),R!==null){var Y=$c();oa(R,v,F,Y),x(R,T,F)}}function Qh(v,T,R){var F=Wd(v),Y={lane:F,action:R,hasEagerState:!1,eagerState:null,next:null};if(wc(v))Hf(T,Y);else{var ee=v.alternate;if(v.lanes===0&&(ee===null||ee.lanes===0)&&(ee=T.lastRenderedReducer,ee!==null))try{var be=T.lastRenderedState,Ye=ee(be,R);if(Y.hasEagerState=!0,Y.eagerState=Ye,Be(Ye,be)){var at=T.interleaved;at===null?(Y.next=Y,Kc(T)):(Y.next=at.next,at.next=Y),T.interleaved=Y;return}}catch{}finally{}R=_i(v,T,Y,F),R!==null&&(Y=$c(),oa(R,v,F,Y),x(R,T,F))}}function wc(v){var T=v.alternate;return v===wn||T!==null&&T===wn}function Hf(v,T){Nl=lu=!0;var R=v.pending;R===null?T.next=T:(T.next=R.next,R.next=T),v.pending=T}function x(v,T,R){if(R&4194240){var F=T.lanes;F&=v.pendingLanes,R|=F,T.lanes=R,Qo(v,R)}}var d={readContext:$s,useCallback:jr,useContext:jr,useEffect:jr,useImperativeHandle:jr,useInsertionEffect:jr,useLayoutEffect:jr,useMemo:jr,useReducer:jr,useRef:jr,useState:jr,useDebugValue:jr,useDeferredValue:jr,useTransition:jr,useMutableSource:jr,useSyncExternalStore:jr,useId:jr,unstable_isNewReconciler:!1},_={readContext:$s,useCallback:function(v,T){return ai().memoizedState=[v,T===void 0?null:T],v},useContext:$s,useEffect:_o,useImperativeHandle:function(v,T,R){return R=R!=null?R.concat([v]):null,Sc(4194308,4,Pl.bind(null,T,v),R)},useLayoutEffect:function(v,T){return Sc(4194308,4,v,T)},useInsertionEffect:function(v,T){return Sc(4,2,v,T)},useMemo:function(v,T){var R=ai();return T=T===void 0?null:T,v=v(),R.memoizedState=[v,T],v},useReducer:function(v,T,R){var F=ai();return T=R!==void 0?R(T):T,F.memoizedState=F.baseState=T,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:v,lastRenderedState:T},F.queue=v,v=v.dispatch=Sa.bind(null,wn,v),[F.memoizedState,v]},useRef:function(v){var T=ai();return v={current:v},T.memoizedState=v},useState:go,useDebugValue:uu,useDeferredValue:function(v){return ai().memoizedState=v},useTransition:function(){var v=go(!1),T=v[0];return v=yd.bind(null,v[1]),ai().memoizedState=v,[T,v]},useMutableSource:function(){},useSyncExternalStore:function(v,T,R){var F=wn,Y=ai();if(as){if(R===void 0)throw Error(t(407));R=R()}else{if(R=T(),hu===null)throw Error(t(349));Jc&30||nc(F,T,R)}Y.memoizedState=R;var ee={value:R,getSnapshot:T};return Y.queue=ee,_o(Qs.bind(null,F,ee,v),[v]),F.flags|=2048,Iu(9,Io.bind(null,F,ee,R,T),void 0,null),R},useId:function(){var v=ai(),T=hu.identifierPrefix;if(as){var R=hl,F=yn;R=(F&~(1<<32-Gr(F)-1)).toString(32)+R,T=":"+T+"R"+R,R=Ft++,0<R&&(T+="H"+R.toString(32)),T+=":"}else R=pl++,T=":"+T+"r"+R.toString(32)+":";return v.memoizedState=T},unstable_isNewReconciler:!1},$={readContext:$s,useCallback:ni,useContext:$s,useEffect:rc,useImperativeHandle:Xa,useInsertionEffect:Dl,useLayoutEffect:vo,useMemo:cs,useReducer:mo,useRef:eh,useState:function(){return mo(Qc)},useDebugValue:uu,useDeferredValue:function(v){var T=Xi();return qh(T,vi.memoizedState,v)},useTransition:function(){var v=mo(Qc)[0],T=Xi().memoizedState;return[v,T]},useMutableSource:Zc,useSyncExternalStore:Tc,useId:Ta,unstable_isNewReconciler:!1},I={readContext:$s,useCallback:ni,useContext:$s,useEffect:rc,useImperativeHandle:Xa,useInsertionEffect:Dl,useLayoutEffect:vo,useMemo:cs,useReducer:ml,useRef:eh,useState:function(){return ml(Qc)},useDebugValue:uu,useDeferredValue:function(v){var T=Xi();return vi===null?T.memoizedState=v:qh(T,vi.memoizedState,v)},useTransition:function(){var v=ml(Qc)[0],T=Xi().memoizedState;return[v,T]},useMutableSource:Zc,useSyncExternalStore:Tc,useId:Ta,unstable_isNewReconciler:!1};function P(v,T){try{var R="",F=T;do R+=qe(F),F=F.return;while(F);var Y=R}catch(ee){Y=`
Error generating stack: `+ee.message+`
`+ee.stack}return{value:v,source:T,stack:Y,digest:null}}function W(v,T,R){return{value:v,source:null,stack:R??null,digest:T??null}}function de(v,T){try{console.error(T.value)}catch(R){setTimeout(function(){throw R})}}var Oe=typeof WeakMap=="function"?WeakMap:Map;function Ze(v,T,R){R=ia(-1,R),R.tag=3,R.payload={element:null};var F=T.value;return R.callback=function(){Jm||(Jm=!0,qm=F),de(v,T)},R}function wt(v,T,R){R=ia(-1,R),R.tag=3;var F=v.type.getDerivedStateFromError;if(typeof F=="function"){var Y=T.value;R.payload=function(){return F(Y)},R.callback=function(){de(v,T)}}var ee=v.stateNode;return ee!==null&&typeof ee.componentDidCatch=="function"&&(R.callback=function(){de(v,T),typeof F!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var be=T.stack;this.componentDidCatch(T.value,{componentStack:be!==null?be:""})}),R}function Qt(v,T,R){var F=v.pingCache;if(F===null){F=v.pingCache=new Oe;var Y=new Set;F.set(T,Y)}else Y=F.get(T),Y===void 0&&(Y=new Set,F.set(T,Y));Y.has(R)||(Y.add(R),v=$_.bind(null,v,T,R),T.then(v,v))}function cn(v){do{var T;if((T=v.tag===13)&&(T=v.memoizedState,T=T!==null?T.dehydrated!==null:!0),T)return v;v=v.return}while(v!==null);return null}function bn(v,T,R,F,Y){return v.mode&1?(v.flags|=65536,v.lanes=Y,v):(v===T?v.flags|=65536:(v.flags|=128,R.flags|=131072,R.flags&=-52805,R.tag===1&&(R.alternate===null?R.tag=17:(T=ia(-1,1),T.tag=2,Yi(R,T,1))),R.lanes|=1),v)}var Tn=D.ReactCurrentOwner,gn=!1;function Dr(v,T,R,F){T.child=v===null?Mu(T,null,R,F):ba(T,v.child,R,F)}function Tt(v,T,R,F,Y){R=R.render;var ee=T.ref;return Va(T,Y),F=Jh(v,T,R,F,ee,Y),R=qc(),v!==null&&!gn?(T.updateQueue=v.updateQueue,T.flags&=-2053,v.lanes&=~Y,Zh(v,T,Y)):(as&&R&&su(T),T.flags|=1,Dr(v,T,F,Y),T.child)}function Me(v,T,R,F,Y){if(v===null){var ee=R.type;return typeof ee=="function"&&!kg(ee)&&ee.defaultProps===void 0&&R.compare===null&&R.defaultProps===void 0?(T.tag=15,T.type=ee,Ne(v,T,ee,F,Y)):(v=cm(R.type,null,F,T,T.mode,Y),v.ref=T.ref,v.return=T,T.child=v)}if(ee=v.child,(v.lanes&Y)===0){var be=ee.memoizedProps;if(R=R.compare,R=R!==null?R:Ot,R(be,F)&&v.ref===T.ref)return Zh(v,T,Y)}return T.flags|=1,v=ed(ee,F),v.ref=T.ref,v.return=T,T.child=v}function Ne(v,T,R,F,Y){if(v!==null){var ee=v.memoizedProps;if(Ot(ee,F)&&v.ref===T.ref)if(gn=!1,T.pendingProps=F=ee,(v.lanes&Y)!==0)v.flags&131072&&(gn=!0);else return T.lanes=v.lanes,Zh(v,T,Y)}return on(v,T,R,F,Y)}function st(v,T,R){var F=T.pendingProps,Y=F.children,ee=v!==null?v.memoizedState:null;if(F.mode==="hidden")if(!(T.mode&1))T.memoizedState={baseLanes:0,cachePool:null,transitions:null},ss(Cp,du),du|=R;else{if(!(R&1073741824))return v=ee!==null?ee.baseLanes|R:R,T.lanes=T.childLanes=1073741824,T.memoizedState={baseLanes:v,cachePool:null,transitions:null},T.updateQueue=null,ss(Cp,du),du|=v,null;T.memoizedState={baseLanes:0,cachePool:null,transitions:null},F=ee!==null?ee.baseLanes:R,ss(Cp,du),du|=F}else ee!==null?(F=ee.baseLanes|R,T.memoizedState=null):F=R,ss(Cp,du),du|=F;return Dr(v,T,Y,R),T.child}function Ht(v,T){var R=T.ref;(v===null&&R!==null||v!==null&&v.ref!==R)&&(T.flags|=512,T.flags|=2097152)}function on(v,T,R,F,Y){var ee=ra(R)?os:_a.current;return ee=Yc(T,ee),Va(T,Y),R=Jh(v,T,R,F,ee,Y),F=qc(),v!==null&&!gn?(T.updateQueue=v.updateQueue,T.flags&=-2053,v.lanes&=~Y,Zh(v,T,Y)):(as&&F&&su(T),T.flags|=1,Dr(v,T,R,Y),T.child)}function En(v,T,R,F,Y){if(ra(R)){var ee=!0;Gs(T)}else ee=!1;if(Va(T,Y),T.stateNode===null)mf(v,T),au(T,R,F),bc(T,R,F,Y),F=!0;else if(v===null){var be=T.stateNode,Ye=T.memoizedProps;be.props=Ye;var at=be.context,Lt=R.contextType;typeof Lt=="object"&&Lt!==null?Lt=$s(Lt):(Lt=ra(R)?os:_a.current,Lt=Yc(T,Lt));var Zt=R.getDerivedStateFromProps,hn=typeof Zt=="function"||typeof be.getSnapshotBeforeUpdate=="function";hn||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(Ye!==F||at!==Lt)&&qu(T,be,F,Lt),yc=!1;var an=T.memoizedState;be.state=an,Nr(T,F,be,Y),at=T.memoizedState,Ye!==F||an!==at||va.current||yc?(typeof Zt=="function"&&(Ao(T,R,Zt,F),at=T.memoizedState),(Ye=yc||es(T,R,Ye,F,an,at,Lt))?(hn||typeof be.UNSAFE_componentWillMount!="function"&&typeof be.componentWillMount!="function"||(typeof be.componentWillMount=="function"&&be.componentWillMount(),typeof be.UNSAFE_componentWillMount=="function"&&be.UNSAFE_componentWillMount()),typeof be.componentDidMount=="function"&&(T.flags|=4194308)):(typeof be.componentDidMount=="function"&&(T.flags|=4194308),T.memoizedProps=F,T.memoizedState=at),be.props=F,be.state=at,be.context=Lt,F=Ye):(typeof be.componentDidMount=="function"&&(T.flags|=4194308),F=!1)}else{be=T.stateNode,Eh(v,T),Ye=T.memoizedProps,Lt=T.type===T.elementType?Ye:Cu(T.type,Ye),be.props=Lt,hn=T.pendingProps,an=be.context,at=R.contextType,typeof at=="object"&&at!==null?at=$s(at):(at=ra(R)?os:_a.current,at=Yc(T,at));var Dn=R.getDerivedStateFromProps;(Zt=typeof Dn=="function"||typeof be.getSnapshotBeforeUpdate=="function")||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(Ye!==hn||an!==at)&&qu(T,be,F,at),yc=!1,an=T.memoizedState,be.state=an,Nr(T,F,be,Y);var Zn=T.memoizedState;Ye!==hn||an!==Zn||va.current||yc?(typeof Dn=="function"&&(Ao(T,R,Dn,F),Zn=T.memoizedState),(Lt=yc||es(T,R,Lt,F,an,Zn,at)||!1)?(Zt||typeof be.UNSAFE_componentWillUpdate!="function"&&typeof be.componentWillUpdate!="function"||(typeof be.componentWillUpdate=="function"&&be.componentWillUpdate(F,Zn,at),typeof be.UNSAFE_componentWillUpdate=="function"&&be.UNSAFE_componentWillUpdate(F,Zn,at)),typeof be.componentDidUpdate=="function"&&(T.flags|=4),typeof be.getSnapshotBeforeUpdate=="function"&&(T.flags|=1024)):(typeof be.componentDidUpdate!="function"||Ye===v.memoizedProps&&an===v.memoizedState||(T.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||Ye===v.memoizedProps&&an===v.memoizedState||(T.flags|=1024),T.memoizedProps=F,T.memoizedState=Zn),be.props=F,be.state=Zn,be.context=at,F=Lt):(typeof be.componentDidUpdate!="function"||Ye===v.memoizedProps&&an===v.memoizedState||(T.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||Ye===v.memoizedProps&&an===v.memoizedState||(T.flags|=1024),F=!1)}return Rn(v,T,R,F,ee,Y)}function Rn(v,T,R,F,Y,ee){Ht(v,T);var be=(T.flags&128)!==0;if(!F&&!be)return Y&&Kn(T,R,!1),Zh(v,T,ee);F=T.stateNode,Tn.current=T;var Ye=be&&typeof R.getDerivedStateFromError!="function"?null:F.render();return T.flags|=1,v!==null&&be?(T.child=ba(T,v.child,null,ee),T.child=ba(T,null,Ye,ee)):Dr(v,T,Ye,ee),T.memoizedState=F.state,Y&&Kn(T,R,!0),T.child}function Fn(v){var T=v.stateNode;T.pendingContext?Ld(v,T.pendingContext,T.pendingContext!==T.context):T.context&&Ld(v,T.context,!1),Zu(v,T.containerInfo)}function dr(v,T,R,F,Y){return Go(),Mo(Y),T.flags|=256,Dr(v,T,R,F),T.child}var Ar={dehydrated:null,treeContext:null,retryLane:0};function Bl(v){return{baseLanes:v,cachePool:null,transitions:null}}function pf(v,T,R){var F=T.pendingProps,Y=Or.current,ee=!1,be=(T.flags&128)!==0,Ye;if((Ye=be)||(Ye=v!==null&&v.memoizedState===null?!1:(Y&2)!==0),Ye?(ee=!0,T.flags&=-129):(v===null||v.memoizedState!==null)&&(Y|=1),ss(Or,Y&1),v===null)return ki(T),v=T.memoizedState,v!==null&&(v=v.dehydrated,v!==null)?(T.mode&1?v.data==="$!"?T.lanes=8:T.lanes=1073741824:T.lanes=1,null):(be=F.children,v=F.fallback,ee?(F=T.mode,ee=T.child,be={mode:"hidden",children:be},!(F&1)&&ee!==null?(ee.childLanes=0,ee.pendingProps=be):ee=Xf(be,F,0,null),v=Yf(v,F,R,null),ee.return=T,v.return=T,ee.sibling=v,T.child=ee,T.child.memoizedState=Bl(R),T.memoizedState=Ar,v):Mh(T,be));if(Y=v.memoizedState,Y!==null&&(Ye=Y.dehydrated,Ye!==null))return th(v,T,be,F,Ye,Y,R);if(ee){ee=F.fallback,be=T.mode,Y=v.child,Ye=Y.sibling;var at={mode:"hidden",children:F.children};return!(be&1)&&T.child!==Y?(F=T.child,F.childLanes=0,F.pendingProps=at,T.deletions=null):(F=ed(Y,at),F.subtreeFlags=Y.subtreeFlags&14680064),Ye!==null?ee=ed(Ye,ee):(ee=Yf(ee,be,R,null),ee.flags|=2),ee.return=T,F.return=T,F.sibling=ee,T.child=F,F=ee,ee=T.child,be=v.child.memoizedState,be=be===null?Bl(R):{baseLanes:be.baseLanes|R,cachePool:null,transitions:be.transitions},ee.memoizedState=be,ee.childLanes=v.childLanes&~R,T.memoizedState=Ar,F}return ee=v.child,v=ee.sibling,F=ed(ee,{mode:"visible",children:F.children}),!(T.mode&1)&&(F.lanes=R),F.return=T,F.sibling=null,v!==null&&(R=T.deletions,R===null?(T.deletions=[v],T.flags|=16):R.push(v)),T.child=F,T.memoizedState=null,F}function Mh(v,T){return T=Xf({mode:"visible",children:T},v.mode,0,null),T.return=v,v.child=T}function ln(v,T,R,F){return F!==null&&Mo(F),ba(T,v.child,null,R),v=Mh(T,T.pendingProps.children),v.flags|=2,T.memoizedState=null,v}function th(v,T,R,F,Y,ee,be){if(R)return T.flags&256?(T.flags&=-257,F=W(Error(t(422))),ln(v,T,be,F)):T.memoizedState!==null?(T.child=v.child,T.flags|=128,null):(ee=F.fallback,Y=T.mode,F=Xf({mode:"visible",children:F.children},Y,0,null),ee=Yf(ee,Y,be,null),ee.flags|=2,F.return=T,ee.return=T,F.sibling=ee,T.child=F,T.mode&1&&ba(T,v.child,null,be),T.child.memoizedState=Bl(be),T.memoizedState=Ar,ee);if(!(T.mode&1))return ln(v,T,be,null);if(Y.data==="$!"){if(F=Y.nextSibling&&Y.nextSibling.dataset,F)var Ye=F.dgst;return F=Ye,ee=Error(t(419)),F=W(ee,F,void 0),ln(v,T,be,F)}if(Ye=(be&v.childLanes)!==0,gn||Ye){if(F=hu,F!==null){switch(be&-be){case 4:Y=2;break;case 16:Y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Y=32;break;case 536870912:Y=268435456;break;default:Y=0}Y=Y&(F.suspendedLanes|be)?0:Y,Y!==0&&Y!==ee.retryLane&&(ee.retryLane=Y,ja(v,Y),oa(F,v,Y,-1))}return lm(),F=W(Error(t(421))),ln(v,T,be,F)}return Y.data==="$?"?(T.flags|=128,T.child=v.child,T=um.bind(null,v),Y._reactRetry=T,null):(v=ee.treeContext,dl=gc(Y.nextSibling),ys=T,as=!0,fl=null,v!==null&&(co[ya++]=yn,co[ya++]=hl,co[ya++]=Cn,yn=v.id,hl=v.overflow,Cn=T),T=Mh(T,F.children),T.flags|=4096,T)}function Zp(v,T,R){v.lanes|=T;var F=v.alternate;F!==null&&(F.lanes|=T),ls(v.return,T,R)}function wa(v,T,R,F,Y){var ee=v.memoizedState;ee===null?v.memoizedState={isBackwards:T,rendering:null,renderingStartTime:0,last:F,tail:R,tailMode:Y}:(ee.isBackwards=T,ee.rendering=null,ee.renderingStartTime=0,ee.last=F,ee.tail=R,ee.tailMode=Y)}function gl(v,T,R){var F=T.pendingProps,Y=F.revealOrder,ee=F.tail;if(Dr(v,T,F.children,R),F=Or.current,(F&2)!==0)F=F&1|2,T.flags|=128;else{if(v!==null&&v.flags&128)e:for(v=T.child;v!==null;){if(v.tag===13)v.memoizedState!==null&&Zp(v,R,T);else if(v.tag===19)Zp(v,R,T);else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===T)break e;for(;v.sibling===null;){if(v.return===null||v.return===T)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}F&=1}if(ss(Or,F),(T.mode&1)===0)T.memoizedState=null;else switch(Y){case"forwards":for(R=T.child,Y=null;R!==null;)v=R.alternate,v!==null&&bs(v)===null&&(Y=R),R=R.sibling;R=Y,R===null?(Y=T.child,T.child=null):(Y=R.sibling,R.sibling=null),wa(T,!1,Y,R,ee);break;case"backwards":for(R=null,Y=T.child,T.child=null;Y!==null;){if(v=Y.alternate,v!==null&&bs(v)===null){T.child=Y;break}v=Y.sibling,Y.sibling=R,R=Y,Y=v}wa(T,!0,R,null,ee);break;case"together":wa(T,!1,null,null,void 0);break;default:T.memoizedState=null}return T.child}function mf(v,T){!(T.mode&1)&&v!==null&&(v.alternate=null,T.alternate=null,T.flags|=2)}function Zh(v,T,R){if(v!==null&&(T.dependencies=v.dependencies),Ud|=T.lanes,(R&T.childLanes)===0)return null;if(v!==null&&T.child!==v.child)throw Error(t(153));if(T.child!==null){for(v=T.child,R=ed(v,v.pendingProps),T.child=R,R.return=T;v.sibling!==null;)v=v.sibling,R=R.sibling=ed(v,v.pendingProps),R.return=T;R.sibling=null}return T.child}function hs(v,T,R){switch(T.tag){case 3:Fn(T),Go();break;case 5:xh(T);break;case 1:ra(T.type)&&Gs(T);break;case 4:Zu(T,T.stateNode.containerInfo);break;case 10:var F=T.type._context,Y=T.memoizedProps.value;ss(Ol,F._currentValue),F._currentValue=Y;break;case 13:if(F=T.memoizedState,F!==null)return F.dehydrated!==null?(ss(Or,Or.current&1),T.flags|=128,null):R&T.child.childLanes?pf(v,T,R):(ss(Or,Or.current&1),v=Zh(v,T,R),v!==null?v.sibling:null);ss(Or,Or.current&1);break;case 19:if(F=(R&T.childLanes)!==0,(v.flags&128)!==0){if(F)return gl(v,T,R);T.flags|=128}if(Y=T.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),ss(Or,Or.current),F)break;return null;case 22:case 23:return T.lanes=0,st(v,T,R)}return Zh(v,T,R)}var _n,g0,Cg,Km;_n=function(v,T){for(var R=T.child;R!==null;){if(R.tag===5||R.tag===6)v.appendChild(R.stateNode);else if(R.tag!==4&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===T)break;for(;R.sibling===null;){if(R.return===null||R.return===T)return;R=R.return}R.sibling.return=R.return,R=R.sibling}},g0=function(){},Cg=function(v,T,R,F){var Y=v.memoizedProps;if(Y!==F){v=T.stateNode,Wo(fo.current);var ee=null;switch(R){case"input":Y=rt(v,Y),F=rt(v,F),ee=[];break;case"select":Y=ie({},Y,{value:void 0}),F=ie({},F,{value:void 0}),ee=[];break;case"textarea":Y=xe(v,Y),F=xe(v,F),ee=[];break;default:typeof Y.onClick!="function"&&typeof F.onClick=="function"&&(v.onclick=ru)}Wt(R,F);var be;R=null;for(Lt in Y)if(!F.hasOwnProperty(Lt)&&Y.hasOwnProperty(Lt)&&Y[Lt]!=null)if(Lt==="style"){var Ye=Y[Lt];for(be in Ye)Ye.hasOwnProperty(be)&&(R||(R={}),R[be]="")}else Lt!=="dangerouslySetInnerHTML"&&Lt!=="children"&&Lt!=="suppressContentEditableWarning"&&Lt!=="suppressHydrationWarning"&&Lt!=="autoFocus"&&(s.hasOwnProperty(Lt)?ee||(ee=[]):(ee=ee||[]).push(Lt,null));for(Lt in F){var at=F[Lt];if(Ye=Y!=null?Y[Lt]:void 0,F.hasOwnProperty(Lt)&&at!==Ye&&(at!=null||Ye!=null))if(Lt==="style")if(Ye){for(be in Ye)!Ye.hasOwnProperty(be)||at&&at.hasOwnProperty(be)||(R||(R={}),R[be]="");for(be in at)at.hasOwnProperty(be)&&Ye[be]!==at[be]&&(R||(R={}),R[be]=at[be])}else R||(ee||(ee=[]),ee.push(Lt,R)),R=at;else Lt==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,Ye=Ye?Ye.__html:void 0,at!=null&&Ye!==at&&(ee=ee||[]).push(Lt,at)):Lt==="children"?typeof at!="string"&&typeof at!="number"||(ee=ee||[]).push(Lt,""+at):Lt!=="suppressContentEditableWarning"&&Lt!=="suppressHydrationWarning"&&(s.hasOwnProperty(Lt)?(at!=null&&Lt==="onScroll"&&zi("scroll",v),ee||Ye===at||(ee=[])):(ee=ee||[]).push(Lt,at))}R&&(ee=ee||[]).push("style",R);var Lt=ee;(T.updateQueue=Lt)&&(T.flags|=4)}},Km=function(v,T,R,F){R!==F&&(T.flags|=4)};function Ec(v,T){if(!as)switch(v.tailMode){case"hidden":T=v.tail;for(var R=null;T!==null;)T.alternate!==null&&(R=T),T=T.sibling;R===null?v.tail=null:R.sibling=null;break;case"collapsed":R=v.tail;for(var F=null;R!==null;)R.alternate!==null&&(F=R),R=R.sibling;F===null?T||v.tail===null?v.tail=null:v.tail.sibling=null:F.sibling=null}}function Zs(v){var T=v.alternate!==null&&v.alternate.child===v.child,R=0,F=0;if(T)for(var Y=v.child;Y!==null;)R|=Y.lanes|Y.childLanes,F|=Y.subtreeFlags&14680064,F|=Y.flags&14680064,Y.return=v,Y=Y.sibling;else for(Y=v.child;Y!==null;)R|=Y.lanes|Y.childLanes,F|=Y.subtreeFlags,F|=Y.flags,Y.return=v,Y=Y.sibling;return v.subtreeFlags|=F,v.childLanes=R,T}function Gf(v,T,R){var F=T.pendingProps;switch(Co(T),T.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zs(T),null;case 1:return ra(T.type)&&Od(),Zs(T),null;case 3:return F=T.stateNode,ec(),Zi(va),Zi(_a),Ya(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(v===null||v.child===null)&&(Xc(T)?T.flags|=4:v===null||v.memoizedState.isDehydrated&&!(T.flags&256)||(T.flags|=1024,fl!==null&&(y0(fl),fl=null))),g0(v,T),Zs(T),null;case 5:$h(T);var Y=Wo(Ll.current);if(R=T.type,v!==null&&T.stateNode!=null)Cg(v,T,R,F,Y),v.ref!==T.ref&&(T.flags|=512,T.flags|=2097152);else{if(!F){if(T.stateNode===null)throw Error(t(166));return Zs(T),null}if(v=Wo(fo.current),Xc(T)){F=T.stateNode,R=T.type;var ee=T.memoizedProps;switch(F[Vr]=T,F[ul]=ee,v=(T.mode&1)!==0,R){case"dialog":zi("cancel",F),zi("close",F);break;case"iframe":case"object":case"embed":zi("load",F);break;case"video":case"audio":for(Y=0;Y<ta.length;Y++)zi(ta[Y],F);break;case"source":zi("error",F);break;case"img":case"image":case"link":zi("error",F),zi("load",F);break;case"details":zi("toggle",F);break;case"input":it(F,ee),zi("invalid",F);break;case"select":F._wrapperState={wasMultiple:!!ee.multiple},zi("invalid",F);break;case"textarea":se(F,ee),zi("invalid",F)}Wt(R,ee),Y=null;for(var be in ee)if(ee.hasOwnProperty(be)){var Ye=ee[be];be==="children"?typeof Ye=="string"?F.textContent!==Ye&&(ee.suppressHydrationWarning!==!0&&Il(F.textContent,Ye,v),Y=["children",Ye]):typeof Ye=="number"&&F.textContent!==""+Ye&&(ee.suppressHydrationWarning!==!0&&Il(F.textContent,Ye,v),Y=["children",""+Ye]):s.hasOwnProperty(be)&&Ye!=null&&be==="onScroll"&&zi("scroll",F)}switch(R){case"input":ze(F),vt(F,ee,!0);break;case"textarea":ze(F),ht(F);break;case"select":case"option":break;default:typeof ee.onClick=="function"&&(F.onclick=ru)}F=Y,T.updateQueue=F,F!==null&&(T.flags|=4)}else{be=Y.nodeType===9?Y:Y.ownerDocument,v==="http://www.w3.org/1999/xhtml"&&(v=St(R)),v==="http://www.w3.org/1999/xhtml"?R==="script"?(v=be.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild)):typeof F.is=="string"?v=be.createElement(R,{is:F.is}):(v=be.createElement(R),R==="select"&&(be=v,F.multiple?be.multiple=!0:F.size&&(be.size=F.size))):v=be.createElementNS(v,R),v[Vr]=T,v[ul]=F,_n(v,T,!1,!1),T.stateNode=v;e:{switch(be=Ge(R,F),R){case"dialog":zi("cancel",v),zi("close",v),Y=F;break;case"iframe":case"object":case"embed":zi("load",v),Y=F;break;case"video":case"audio":for(Y=0;Y<ta.length;Y++)zi(ta[Y],v);Y=F;break;case"source":zi("error",v),Y=F;break;case"img":case"image":case"link":zi("error",v),zi("load",v),Y=F;break;case"details":zi("toggle",v),Y=F;break;case"input":it(v,F),Y=rt(v,F),zi("invalid",v);break;case"option":Y=F;break;case"select":v._wrapperState={wasMultiple:!!F.multiple},Y=ie({},F,{value:void 0}),zi("invalid",v);break;case"textarea":se(v,F),Y=xe(v,F),zi("invalid",v);break;default:Y=F}Wt(R,Y),Ye=Y;for(ee in Ye)if(Ye.hasOwnProperty(ee)){var at=Ye[ee];ee==="style"?ke(v,at):ee==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,at!=null&&Ke(v,at)):ee==="children"?typeof at=="string"?(R!=="textarea"||at!=="")&&Le(v,at):typeof at=="number"&&Le(v,""+at):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(s.hasOwnProperty(ee)?at!=null&&ee==="onScroll"&&zi("scroll",v):at!=null&&B(v,ee,at,be))}switch(R){case"input":ze(v),vt(v,F,!1);break;case"textarea":ze(v),ht(v);break;case"option":F.value!=null&&v.setAttribute("value",""+nt(F.value));break;case"select":v.multiple=!!F.multiple,ee=F.value,ee!=null?mt(v,!!F.multiple,ee,!1):F.defaultValue!=null&&mt(v,!!F.multiple,F.defaultValue,!0);break;default:typeof Y.onClick=="function"&&(v.onclick=ru)}switch(R){case"button":case"input":case"select":case"textarea":F=!!F.autoFocus;break e;case"img":F=!0;break e;default:F=!1}}F&&(T.flags|=4)}T.ref!==null&&(T.flags|=512,T.flags|=2097152)}return Zs(T),null;case 6:if(v&&T.stateNode!=null)Km(v,T,v.memoizedProps,F);else{if(typeof F!="string"&&T.stateNode===null)throw Error(t(166));if(R=Wo(Ll.current),Wo(fo.current),Xc(T)){if(F=T.stateNode,R=T.memoizedProps,F[Vr]=T,(ee=F.nodeValue!==R)&&(v=ys,v!==null))switch(v.tag){case 3:Il(F.nodeValue,R,(v.mode&1)!==0);break;case 5:v.memoizedProps.suppressHydrationWarning!==!0&&Il(F.nodeValue,R,(v.mode&1)!==0)}ee&&(T.flags|=4)}else F=(R.nodeType===9?R:R.ownerDocument).createTextNode(F),F[Vr]=T,T.stateNode=F}return Zs(T),null;case 13:if(Zi(Or),F=T.memoizedState,v===null||v.memoizedState!==null&&v.memoizedState.dehydrated!==null){if(as&&dl!==null&&T.mode&1&&!(T.flags&128))Kh(),Go(),T.flags|=98560,ee=!1;else if(ee=Xc(T),F!==null&&F.dehydrated!==null){if(v===null){if(!ee)throw Error(t(318));if(ee=T.memoizedState,ee=ee!==null?ee.dehydrated:null,!ee)throw Error(t(317));ee[Vr]=T}else Go(),!(T.flags&128)&&(T.memoizedState=null),T.flags|=4;Zs(T),ee=!1}else fl!==null&&(y0(fl),fl=null),ee=!0;if(!ee)return T.flags&65536?T:null}return T.flags&128?(T.lanes=R,T):(F=F!==null,F!==(v!==null&&v.memoizedState!==null)&&F&&(T.child.flags|=8192,T.mode&1&&(v===null||Or.current&1?Fl===0&&(Fl=3):lm())),T.updateQueue!==null&&(T.flags|=4),Zs(T),null);case 4:return ec(),g0(v,T),v===null&&nu(T.stateNode.containerInfo),Zs(T),null;case 10:return Ju(T.type._context),Zs(T),null;case 17:return ra(T.type)&&Od(),Zs(T),null;case 19:if(Zi(Or),ee=T.memoizedState,ee===null)return Zs(T),null;if(F=(T.flags&128)!==0,be=ee.rendering,be===null)if(F)Ec(ee,!1);else{if(Fl!==0||v!==null&&v.flags&128)for(v=T.child;v!==null;){if(be=bs(v),be!==null){for(T.flags|=128,Ec(ee,!1),F=be.updateQueue,F!==null&&(T.updateQueue=F,T.flags|=4),T.subtreeFlags=0,F=R,R=T.child;R!==null;)ee=R,v=F,ee.flags&=14680066,be=ee.alternate,be===null?(ee.childLanes=0,ee.lanes=v,ee.child=null,ee.subtreeFlags=0,ee.memoizedProps=null,ee.memoizedState=null,ee.updateQueue=null,ee.dependencies=null,ee.stateNode=null):(ee.childLanes=be.childLanes,ee.lanes=be.lanes,ee.child=be.child,ee.subtreeFlags=0,ee.deletions=null,ee.memoizedProps=be.memoizedProps,ee.memoizedState=be.memoizedState,ee.updateQueue=be.updateQueue,ee.type=be.type,v=be.dependencies,ee.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),R=R.sibling;return ss(Or,Or.current&1|2),T.child}v=v.sibling}ee.tail!==null&&nn()>ih&&(T.flags|=128,F=!0,Ec(ee,!1),T.lanes=4194304)}else{if(!F)if(v=bs(be),v!==null){if(T.flags|=128,F=!0,R=v.updateQueue,R!==null&&(T.updateQueue=R,T.flags|=4),Ec(ee,!0),ee.tail===null&&ee.tailMode==="hidden"&&!be.alternate&&!as)return Zs(T),null}else 2*nn()-ee.renderingStartTime>ih&&R!==1073741824&&(T.flags|=128,F=!0,Ec(ee,!1),T.lanes=4194304);ee.isBackwards?(be.sibling=T.child,T.child=be):(R=ee.last,R!==null?R.sibling=be:T.child=be,ee.last=be)}return ee.tail!==null?(T=ee.tail,ee.rendering=T,ee.tail=T.sibling,ee.renderingStartTime=nn(),T.sibling=null,R=Or.current,ss(Or,F?R&1|2:R&1),T):(Zs(T),null);case 22:case 23:return T0(),F=T.memoizedState!==null,v!==null&&v.memoizedState!==null!==F&&(T.flags|=8192),F&&T.mode&1?du&1073741824&&(Zs(T),T.subtreeFlags&6&&(T.flags|=8192)):Zs(T),null;case 24:return null;case 25:return null}throw Error(t(156,T.tag))}function Dd(v,T){switch(Co(T),T.tag){case 1:return ra(T.type)&&Od(),v=T.flags,v&65536?(T.flags=v&-65537|128,T):null;case 3:return ec(),Zi(va),Zi(_a),Ya(),v=T.flags,v&65536&&!(v&128)?(T.flags=v&-65537|128,T):null;case 5:return $h(T),null;case 13:if(Zi(Or),v=T.memoizedState,v!==null&&v.dehydrated!==null){if(T.alternate===null)throw Error(t(340));Go()}return v=T.flags,v&65536?(T.flags=v&-65537|128,T):null;case 19:return Zi(Or),null;case 4:return ec(),null;case 10:return Ju(T.type._context),null;case 22:case 23:return T0(),null;case 24:return null;default:return null}}var Ka=!1,Ur=!1,Ea=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function Oi(v,T){var R=v.ref;if(R!==null)if(typeof R=="function")try{R(null)}catch(F){aa(v,T,F)}else R.current=null}function eo(v,T,R){try{R()}catch(F){aa(v,T,F)}}var T_=!1;function xc(v,T){if(Xu=so,v=vn(),zr(v)){if("selectionStart"in v)var R={start:v.selectionStart,end:v.selectionEnd};else e:{R=(R=v.ownerDocument)&&R.defaultView||window;var F=R.getSelection&&R.getSelection();if(F&&F.rangeCount!==0){R=F.anchorNode;var Y=F.anchorOffset,ee=F.focusNode;F=F.focusOffset;try{R.nodeType,ee.nodeType}catch{R=null;break e}var be=0,Ye=-1,at=-1,Lt=0,Zt=0,hn=v,an=null;t:for(;;){for(var Dn;hn!==R||Y!==0&&hn.nodeType!==3||(Ye=be+Y),hn!==ee||F!==0&&hn.nodeType!==3||(at=be+F),hn.nodeType===3&&(be+=hn.nodeValue.length),(Dn=hn.firstChild)!==null;)an=hn,hn=Dn;for(;;){if(hn===v)break t;if(an===R&&++Lt===Y&&(Ye=be),an===ee&&++Zt===F&&(at=be),(Dn=hn.nextSibling)!==null)break;hn=an,an=hn.parentNode}hn=Dn}R=Ye===-1||at===-1?null:{start:Ye,end:at}}else R=null}R=R||{start:0,end:0}}else R=null;for(Ku={focusedElem:v,selectionRange:R},so=!1,Ve=T;Ve!==null;)if(T=Ve,v=T.child,(T.subtreeFlags&1028)!==0&&v!==null)v.return=T,Ve=v;else for(;Ve!==null;){T=Ve;try{var Zn=T.alternate;if(T.flags&1024)switch(T.tag){case 0:case 11:case 15:break;case 1:if(Zn!==null){var ir=Zn.memoizedProps,Ro=Zn.memoizedState,xt=T.stateNode,dt=xt.getSnapshotBeforeUpdate(T.elementType===T.type?ir:Cu(T.type,ir),Ro);xt.__reactInternalSnapshotBeforeUpdate=dt}break;case 3:var Et=T.stateNode.containerInfo;Et.nodeType===1?Et.textContent="":Et.nodeType===9&&Et.documentElement&&Et.removeChild(Et.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Sn){aa(T,T.return,Sn)}if(v=T.sibling,v!==null){v.return=T.return,Ve=v;break}Ve=T.return}return Zn=T_,T_=!1,Zn}function Ep(v,T,R){var F=T.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var Y=F=F.next;do{if((Y.tag&v)===v){var ee=Y.destroy;Y.destroy=void 0,ee!==void 0&&eo(T,R,ee)}Y=Y.next}while(Y!==F)}}function em(v,T){if(T=T.updateQueue,T=T!==null?T.lastEffect:null,T!==null){var R=T=T.next;do{if((R.tag&v)===v){var F=R.create;R.destroy=F()}R=R.next}while(R!==T)}}function S_(v){var T=v.ref;if(T!==null){var R=v.stateNode;switch(v.tag){case 5:v=R;break;default:v=R}typeof T=="function"?T(v):T.current=v}}function xp(v){var T=v.alternate;T!==null&&(v.alternate=null,xp(T)),v.child=null,v.deletions=null,v.sibling=null,v.tag===5&&(T=v.stateNode,T!==null&&(delete T[Vr],delete T[ul],delete T[ma],delete T[X],delete T[xs])),v.stateNode=null,v.return=null,v.dependencies=null,v.memoizedProps=null,v.memoizedState=null,v.pendingProps=null,v.stateNode=null,v.updateQueue=null}function xa(v){return v.tag===5||v.tag===3||v.tag===4}function Mg(v){e:for(;;){for(;v.sibling===null;){if(v.return===null||xa(v.return))return null;v=v.return}for(v.sibling.return=v.return,v=v.sibling;v.tag!==5&&v.tag!==6&&v.tag!==18;){if(v.flags&2||v.child===null||v.tag===4)continue e;v.child.return=v,v=v.child}if(!(v.flags&2))return v.stateNode}}function tm(v,T,R){var F=v.tag;if(F===5||F===6)v=v.stateNode,T?R.nodeType===8?R.parentNode.insertBefore(v,T):R.insertBefore(v,T):(R.nodeType===8?(T=R.parentNode,T.insertBefore(v,R)):(T=R,T.appendChild(v)),R=R._reactRootContainer,R!=null||T.onclick!==null||(T.onclick=ru));else if(F!==4&&(v=v.child,v!==null))for(tm(v,T,R),v=v.sibling;v!==null;)tm(v,T,R),v=v.sibling}function $p(v,T,R){var F=v.tag;if(F===5||F===6)v=v.stateNode,T?R.insertBefore(v,T):R.appendChild(v);else if(F!==4&&(v=v.child,v!==null))for($p(v,T,R),v=v.sibling;v!==null;)$p(v,T,R),v=v.sibling}var _l=null,cu=!1;function Pd(v,T,R){for(R=R.child;R!==null;)gf(v,T,R),R=R.sibling}function gf(v,T,R){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(kr,R)}catch{}switch(R.tag){case 5:Ur||Oi(R,T);case 6:var F=_l,Y=cu;_l=null,Pd(v,T,R),_l=F,cu=Y,_l!==null&&(cu?(v=_l,R=R.stateNode,v.nodeType===8?v.parentNode.removeChild(R):v.removeChild(R)):_l.removeChild(R.stateNode));break;case 18:_l!==null&&(cu?(v=_l,R=R.stateNode,v.nodeType===8?Vc(v.parentNode,R):v.nodeType===1&&Vc(v,R),Gn(v)):Vc(_l,R.stateNode));break;case 4:F=_l,Y=cu,_l=R.stateNode.containerInfo,cu=!0,Pd(v,T,R),_l=F,cu=Y;break;case 0:case 11:case 14:case 15:if(!Ur&&(F=R.updateQueue,F!==null&&(F=F.lastEffect,F!==null))){Y=F=F.next;do{var ee=Y,be=ee.destroy;ee=ee.tag,be!==void 0&&(ee&2||ee&4)&&eo(R,T,be),Y=Y.next}while(Y!==F)}Pd(v,T,R);break;case 1:if(!Ur&&(Oi(R,T),F=R.stateNode,typeof F.componentWillUnmount=="function"))try{F.props=R.memoizedProps,F.state=R.memoizedState,F.componentWillUnmount()}catch(Ye){aa(R,T,Ye)}Pd(v,T,R);break;case 21:Pd(v,T,R);break;case 22:R.mode&1?(Ur=(F=Ur)||R.memoizedState!==null,Pd(v,T,R),Ur=F):Pd(v,T,R);break;default:Pd(v,T,R)}}function Bd(v){var T=v.updateQueue;if(T!==null){v.updateQueue=null;var R=v.stateNode;R===null&&(R=v.stateNode=new Ea),T.forEach(function(F){var Y=sb.bind(null,v,F);R.has(F)||(R.add(F),F.then(Y,Y))})}}function nh(v,T){var R=T.deletions;if(R!==null)for(var F=0;F<R.length;F++){var Y=R[F];try{var ee=v,be=T,Ye=be;e:for(;Ye!==null;){switch(Ye.tag){case 5:_l=Ye.stateNode,cu=!1;break e;case 3:_l=Ye.stateNode.containerInfo,cu=!0;break e;case 4:_l=Ye.stateNode.containerInfo,cu=!0;break e}Ye=Ye.return}if(_l===null)throw Error(t(160));gf(ee,be,Y),_l=null,cu=!1;var at=Y.alternate;at!==null&&(at.return=null),Y.return=null}catch(Lt){aa(Y,T,Lt)}}if(T.subtreeFlags&12854)for(T=T.child;T!==null;)Ag(T,v),T=T.sibling}function Ag(v,T){var R=v.alternate,F=v.flags;switch(v.tag){case 0:case 11:case 14:case 15:if(nh(T,v),pr(v),F&4){try{Ep(3,v,v.return),em(3,v)}catch(ir){aa(v,v.return,ir)}try{Ep(5,v,v.return)}catch(ir){aa(v,v.return,ir)}}break;case 1:nh(T,v),pr(v),F&512&&R!==null&&Oi(R,R.return);break;case 5:if(nh(T,v),pr(v),F&512&&R!==null&&Oi(R,R.return),v.flags&32){var Y=v.stateNode;try{Le(Y,"")}catch(ir){aa(v,v.return,ir)}}if(F&4&&(Y=v.stateNode,Y!=null)){var ee=v.memoizedProps,be=R!==null?R.memoizedProps:ee,Ye=v.type,at=v.updateQueue;if(v.updateQueue=null,at!==null)try{Ye==="input"&&ee.type==="radio"&&ee.name!=null&&Nt(Y,ee),Ge(Ye,be);var Lt=Ge(Ye,ee);for(be=0;be<at.length;be+=2){var Zt=at[be],hn=at[be+1];Zt==="style"?ke(Y,hn):Zt==="dangerouslySetInnerHTML"?Ke(Y,hn):Zt==="children"?Le(Y,hn):B(Y,Zt,hn,Lt)}switch(Ye){case"input":kt(Y,ee);break;case"textarea":$e(Y,ee);break;case"select":var an=Y._wrapperState.wasMultiple;Y._wrapperState.wasMultiple=!!ee.multiple;var Dn=ee.value;Dn!=null?mt(Y,!!ee.multiple,Dn,!1):an!==!!ee.multiple&&(ee.defaultValue!=null?mt(Y,!!ee.multiple,ee.defaultValue,!0):mt(Y,!!ee.multiple,ee.multiple?[]:"",!1))}Y[ul]=ee}catch(ir){aa(v,v.return,ir)}}break;case 6:if(nh(T,v),pr(v),F&4){if(v.stateNode===null)throw Error(t(162));Y=v.stateNode,ee=v.memoizedProps;try{Y.nodeValue=ee}catch(ir){aa(v,v.return,ir)}}break;case 3:if(nh(T,v),pr(v),F&4&&R!==null&&R.memoizedState.isDehydrated)try{Gn(T.containerInfo)}catch(ir){aa(v,v.return,ir)}break;case 4:nh(T,v),pr(v);break;case 13:nh(T,v),pr(v),Y=v.child,Y.flags&8192&&(ee=Y.memoizedState!==null,Y.stateNode.isHidden=ee,!ee||Y.alternate!==null&&Y.alternate.memoizedState!==null||(yl=nn())),F&4&&Bd(v);break;case 22:if(Zt=R!==null&&R.memoizedState!==null,v.mode&1?(Ur=(Lt=Ur)||Zt,nh(T,v),Ur=Lt):nh(T,v),pr(v),F&8192){if(Lt=v.memoizedState!==null,(v.stateNode.isHidden=Lt)&&!Zt&&(v.mode&1)!==0)for(Ve=v,Zt=v.child;Zt!==null;){for(hn=Ve=Zt;Ve!==null;){switch(an=Ve,Dn=an.child,an.tag){case 0:case 11:case 14:case 15:Ep(4,an,an.return);break;case 1:Oi(an,an.return);var Zn=an.stateNode;if(typeof Zn.componentWillUnmount=="function"){F=an,R=an.return;try{T=F,Zn.props=T.memoizedProps,Zn.state=T.memoizedState,Zn.componentWillUnmount()}catch(ir){aa(F,R,ir)}}break;case 5:Oi(an,an.return);break;case 22:if(an.memoizedState!==null){nm(hn);continue}}Dn!==null?(Dn.return=an,Ve=Dn):nm(hn)}Zt=Zt.sibling}e:for(Zt=null,hn=v;;){if(hn.tag===5){if(Zt===null){Zt=hn;try{Y=hn.stateNode,Lt?(ee=Y.style,typeof ee.setProperty=="function"?ee.setProperty("display","none","important"):ee.display="none"):(Ye=hn.stateNode,at=hn.memoizedProps.style,be=at!=null&&at.hasOwnProperty("display")?at.display:null,Ye.style.display=me("display",be))}catch(ir){aa(v,v.return,ir)}}}else if(hn.tag===6){if(Zt===null)try{hn.stateNode.nodeValue=Lt?"":hn.memoizedProps}catch(ir){aa(v,v.return,ir)}}else if((hn.tag!==22&&hn.tag!==23||hn.memoizedState===null||hn===v)&&hn.child!==null){hn.child.return=hn,hn=hn.child;continue}if(hn===v)break e;for(;hn.sibling===null;){if(hn.return===null||hn.return===v)break e;Zt===hn&&(Zt=null),hn=hn.return}Zt===hn&&(Zt=null),hn.sibling.return=hn.return,hn=hn.sibling}}break;case 19:nh(T,v),pr(v),F&4&&Bd(v);break;case 21:break;default:nh(T,v),pr(v)}}function pr(v){var T=v.flags;if(T&2){try{e:{for(var R=v.return;R!==null;){if(xa(R)){var F=R;break e}R=R.return}throw Error(t(160))}switch(F.tag){case 5:var Y=F.stateNode;F.flags&32&&(Le(Y,""),F.flags&=-33);var ee=Mg(v);$p(v,ee,Y);break;case 3:case 4:var be=F.stateNode.containerInfo,Ye=Mg(v);tm(v,Ye,be);break;default:throw Error(t(161))}}catch(at){aa(v,v.return,at)}v.flags&=-3}T&4096&&(v.flags&=-4097)}function _0(v,T,R){Ve=v,yo(v)}function yo(v,T,R){for(var F=(v.mode&1)!==0;Ve!==null;){var Y=Ve,ee=Y.child;if(Y.tag===22&&F){var be=Y.memoizedState!==null||Ka;if(!be){var Ye=Y.alternate,at=Ye!==null&&Ye.memoizedState!==null||Ur;Ye=Ka;var Lt=Ur;if(Ka=be,(Ur=at)&&!Lt)for(Ve=Y;Ve!==null;)be=Ve,at=be.child,be.tag===22&&be.memoizedState!==null?Fd(Y):at!==null?(at.return=be,Ve=at):Fd(Y);for(;ee!==null;)Ve=ee,yo(ee),ee=ee.sibling;Ve=Y,Ka=Ye,Ur=Lt}Ja(v)}else Y.subtreeFlags&8772&&ee!==null?(ee.return=Y,Ve=ee):Ja(v)}}function Ja(v){for(;Ve!==null;){var T=Ve;if(T.flags&8772){var R=T.alternate;try{if(T.flags&8772)switch(T.tag){case 0:case 11:case 15:Ur||em(5,T);break;case 1:var F=T.stateNode;if(T.flags&4&&!Ur)if(R===null)F.componentDidMount();else{var Y=T.elementType===T.type?R.memoizedProps:Cu(T.type,R.memoizedProps);F.componentDidUpdate(Y,R.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var ee=T.updateQueue;ee!==null&&ti(T,ee,F);break;case 3:var be=T.updateQueue;if(be!==null){if(R=null,T.child!==null)switch(T.child.tag){case 5:R=T.child.stateNode;break;case 1:R=T.child.stateNode}ti(T,be,R)}break;case 5:var Ye=T.stateNode;if(R===null&&T.flags&4){R=Ye;var at=T.memoizedProps;switch(T.type){case"button":case"input":case"select":case"textarea":at.autoFocus&&R.focus();break;case"img":at.src&&(R.src=at.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(T.memoizedState===null){var Lt=T.alternate;if(Lt!==null){var Zt=Lt.memoizedState;if(Zt!==null){var hn=Zt.dehydrated;hn!==null&&Gn(hn)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ur||T.flags&512&&S_(T)}catch(an){aa(T,T.return,an)}}if(T===v){Ve=null;break}if(R=T.sibling,R!==null){R.return=T.return,Ve=R;break}Ve=T.return}}function nm(v){for(;Ve!==null;){var T=Ve;if(T===v){Ve=null;break}var R=T.sibling;if(R!==null){R.return=T.return,Ve=R;break}Ve=T.return}}function Fd(v){for(;Ve!==null;){var T=Ve;try{switch(T.tag){case 0:case 11:case 15:var R=T.return;try{em(4,T)}catch(at){aa(T,R,at)}break;case 1:var F=T.stateNode;if(typeof F.componentDidMount=="function"){var Y=T.return;try{F.componentDidMount()}catch(at){aa(T,Y,at)}}var ee=T.return;try{S_(T)}catch(at){aa(T,ee,at)}break;case 5:var be=T.return;try{S_(T)}catch(at){aa(T,be,at)}}}catch(at){aa(T,T.return,at)}if(T===v){Ve=null;break}var Ye=T.sibling;if(Ye!==null){Ye.return=T.return,Ve=Ye;break}Ve=T.return}}var rm=Math.ceil,Ru=D.ReactCurrentDispatcher,v0=D.ReactCurrentOwner,jo=D.ReactCurrentBatchConfig,ts=0,hu=null,vl=null,ku=0,du=0,Cp=hi(0),Fl=0,zd=null,Ud=0,_f=0,Ig=0,im=null,rh=null,yl=0,ih=1/0,Hd=null,Jm=!1,qm=null,bo=null,sm=!1,Ls=null,zl=0,Mp=0,Rg=null,Gd=-1,Qm=0;function $c(){return ts&6?nn():Gd!==-1?Gd:Gd=nn()}function Wd(v){return v.mode&1?ts&2&&ku!==0?ku&-ku:df.transition!==null?(Qm===0&&(Qm=qo()),Qm):(v=vr,v!==0||(v=window.event,v=v===void 0?16:Hu(v.type)),v):1}function oa(v,T,R,F){if(50<Mp)throw Mp=0,Rg=null,Error(t(185));gu(v,R,F),(!(ts&2)||v!==hu)&&(v===hu&&(!(ts&2)&&(_f|=R),Fl===4&&Wf(v,ku)),$a(v,F),R===1&&ts===0&&!(T.mode&1)&&(ih=nn()+500,Js&&xn()))}function $a(v,T){var R=v.callbackNode;fc(v,T);var F=Na(v,v===hu?ku:0);if(F===0)R!==null&&Oa(R),v.callbackNode=null,v.callbackPriority=0;else if(T=F&-F,v.callbackPriority!==T){if(R!=null&&Oa(R),T===1)v.tag===0?Uo(Ap.bind(null,v)):iu(Ap.bind(null,v)),Wc(function(){!(ts&6)&&xn()}),R=null;else{switch(xi(F)){case 1:R=el;break;case 4:R=La;break;case 16:R=Fs;break;case 536870912:R=Di;break;default:R=Fs}R=oh(R,w_.bind(null,v))}v.callbackPriority=T,v.callbackNode=R}}function w_(v,T){if(Gd=-1,Qm=0,(ts&6)!==0)throw Error(t(327));var R=v.callbackNode;if(sh()&&v.callbackNode!==R)return null;var F=Na(v,v===hu?ku:0);if(F===0)return null;if(F&30||F&v.expiredLanes||T)T=vf(v,F);else{T=F;var Y=ts;ts|=2;var ee=E_();(hu!==v||ku!==T)&&(Hd=null,ih=nn()+500,am(v,T));do try{ib();break}catch(Ye){S0(v,Ye)}while(!0);ou(),Ru.current=ee,ts=Y,vl!==null?T=0:(hu=null,ku=0,T=Fl)}if(T!==0){if(T===2&&(Y=Xs(v),Y!==0&&(F=Y,T=om(v,Y))),T===1)throw R=zd,am(v,0),Wf(v,F),$a(v,nn()),R;if(T===6)Wf(v,F);else{if(Y=v.current.alternate,(F&30)===0&&!Av(Y)&&(T=vf(v,F),T===2&&(ee=Xs(v),ee!==0&&(F=ee,T=om(v,ee))),T===1))throw R=zd,am(v,0),Wf(v,F),$a(v,nn()),R;switch(v.finishedWork=Y,v.finishedLanes=F,T){case 0:case 1:throw Error(t(345));case 2:Vf(v,rh,Hd);break;case 3:if(Wf(v,F),(F&130023424)===F&&(T=yl+500-nn(),10<T)){if(Na(v,0)!==0)break;if(Y=v.suspendedLanes,(Y&F)!==F){$c(),v.pingedLanes|=v.suspendedLanes&Y;break}v.timeoutHandle=ll(Vf.bind(null,v,rh,Hd),T);break}Vf(v,rh,Hd);break;case 4:if(Wf(v,F),(F&4194240)===F)break;for(T=v.eventTimes,Y=-1;0<F;){var be=31-Gr(F);ee=1<<be,be=T[be],be>Y&&(Y=be),F&=~ee}if(F=Y,F=nn()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*rm(F/1960))-F,10<F){v.timeoutHandle=ll(Vf.bind(null,v,rh,Hd),F);break}Vf(v,rh,Hd);break;case 5:Vf(v,rh,Hd);break;default:throw Error(t(329))}}}return $a(v,nn()),v.callbackNode===R?w_.bind(null,v):null}function om(v,T){var R=im;return v.current.memoizedState.isDehydrated&&(am(v,T).flags|=256),v=vf(v,T),v!==2&&(T=rh,rh=R,T!==null&&y0(T)),v}function y0(v){rh===null?rh=v:rh.push.apply(rh,v)}function Av(v){for(var T=v;;){if(T.flags&16384){var R=T.updateQueue;if(R!==null&&(R=R.stores,R!==null))for(var F=0;F<R.length;F++){var Y=R[F],ee=Y.getSnapshot;Y=Y.value;try{if(!Be(ee(),Y))return!1}catch{return!1}}}if(R=T.child,T.subtreeFlags&16384&&R!==null)R.return=T,T=R;else{if(T===v)break;for(;T.sibling===null;){if(T.return===null||T.return===v)return!0;T=T.return}T.sibling.return=T.return,T=T.sibling}}return!0}function Wf(v,T){for(T&=~Ig,T&=~_f,v.suspendedLanes|=T,v.pingedLanes&=~T,v=v.expirationTimes;0<T;){var R=31-Gr(T),F=1<<R;v[R]=-1,T&=~F}}function Ap(v){if(ts&6)throw Error(t(327));sh();var T=Na(v,0);if(!(T&1))return $a(v,nn()),null;var R=vf(v,T);if(v.tag!==0&&R===2){var F=Xs(v);F!==0&&(T=F,R=om(v,F))}if(R===1)throw R=zd,am(v,0),Wf(v,T),$a(v,nn()),R;if(R===6)throw Error(t(345));return v.finishedWork=v.current.alternate,v.finishedLanes=T,Vf(v,rh,Hd),$a(v,nn()),null}function b0(v,T){var R=ts;ts|=1;try{return v(T)}finally{ts=R,ts===0&&(ih=nn()+500,Js&&xn())}}function Ip(v){Ls!==null&&Ls.tag===0&&!(ts&6)&&sh();var T=ts;ts|=1;var R=jo.transition,F=vr;try{if(jo.transition=null,vr=1,v)return v()}finally{vr=F,jo.transition=R,ts=T,!(ts&6)&&xn()}}function T0(){du=Cp.current,Zi(Cp)}function am(v,T){v.finishedWork=null,v.finishedLanes=0;var R=v.timeoutHandle;if(R!==-1&&(v.timeoutHandle=-1,na(R)),vl!==null)for(R=vl.return;R!==null;){var F=R;switch(Co(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&Od();break;case 3:ec(),Zi(va),Zi(_a),Ya();break;case 5:$h(F);break;case 4:ec();break;case 13:Zi(Or);break;case 19:Zi(Or);break;case 10:Ju(F.type._context);break;case 22:case 23:T0()}R=R.return}if(hu=v,vl=v=ed(v.current,null),ku=du=T,Fl=0,zd=null,Ig=_f=Ud=0,rh=im=null,Cs!==null){for(T=0;T<Cs.length;T++)if(R=Cs[T],F=R.interleaved,F!==null){R.interleaved=null;var Y=F.next,ee=R.pending;if(ee!==null){var be=ee.next;ee.next=Y,F.next=be}R.pending=F}Cs=null}return v}function S0(v,T){do{var R=vl;try{if(ou(),Vs.current=d,lu){for(var F=wn.memoizedState;F!==null;){var Y=F.queue;Y!==null&&(Y.pending=null),F=F.next}lu=!1}if(Jc=0,Ms=vi=wn=null,Nl=!1,Ft=0,v0.current=null,R===null||R.return===null){Fl=1,zd=T,vl=null;break}e:{var ee=v,be=R.return,Ye=R,at=T;if(T=ku,Ye.flags|=32768,at!==null&&typeof at=="object"&&typeof at.then=="function"){var Lt=at,Zt=Ye,hn=Zt.tag;if(!(Zt.mode&1)&&(hn===0||hn===11||hn===15)){var an=Zt.alternate;an?(Zt.updateQueue=an.updateQueue,Zt.memoizedState=an.memoizedState,Zt.lanes=an.lanes):(Zt.updateQueue=null,Zt.memoizedState=null)}var Dn=cn(be);if(Dn!==null){Dn.flags&=-257,bn(Dn,be,Ye,ee,T),Dn.mode&1&&Qt(ee,Lt,T),T=Dn,at=Lt;var Zn=T.updateQueue;if(Zn===null){var ir=new Set;ir.add(at),T.updateQueue=ir}else Zn.add(at);break e}else{if(!(T&1)){Qt(ee,Lt,T),lm();break e}at=Error(t(426))}}else if(as&&Ye.mode&1){var Ro=cn(be);if(Ro!==null){!(Ro.flags&65536)&&(Ro.flags|=256),bn(Ro,be,Ye,ee,T),Mo(P(at,Ye));break e}}ee=at=P(at,Ye),Fl!==4&&(Fl=2),im===null?im=[ee]:im.push(ee),ee=be;do{switch(ee.tag){case 3:ee.flags|=65536,T&=-T,ee.lanes|=T;var xt=Ze(ee,at,T);tr(ee,xt);break e;case 1:Ye=at;var dt=ee.type,Et=ee.stateNode;if(!(ee.flags&128)&&(typeof dt.getDerivedStateFromError=="function"||Et!==null&&typeof Et.componentDidCatch=="function"&&(bo===null||!bo.has(Et)))){ee.flags|=65536,T&=-T,ee.lanes|=T;var Sn=wt(ee,Ye,T);tr(ee,Sn);break e}}ee=ee.return}while(ee!==null)}E0(R)}catch(lr){T=lr,vl===R&&R!==null&&(vl=R=R.return);continue}break}while(!0)}function E_(){var v=Ru.current;return Ru.current=d,v===null?d:v}function lm(){(Fl===0||Fl===3||Fl===2)&&(Fl=4),hu===null||!(Ud&268435455)&&!(_f&268435455)||Wf(hu,ku)}function vf(v,T){var R=ts;ts|=2;var F=E_();(hu!==v||ku!==T)&&(Hd=null,am(v,T));do try{x_();break}catch(Y){S0(v,Y)}while(!0);if(ou(),ts=R,Ru.current=F,vl!==null)throw Error(t(261));return hu=null,ku=0,Fl}function x_(){for(;vl!==null;)w0(vl)}function ib(){for(;vl!==null&&!xo();)w0(vl)}function w0(v){var T=Iv(v.alternate,v,du);v.memoizedProps=v.pendingProps,T===null?E0(v):vl=T,v0.current=null}function E0(v){var T=v;do{var R=T.alternate;if(v=T.return,(T.flags&32768)===0){if(R=Gf(R,T,du),R!==null){vl=R;return}}else{if(R=Dd(R,T),R!==null){R.flags&=32767,vl=R;return}if(v!==null)v.flags|=32768,v.subtreeFlags=0,v.deletions=null;else{Fl=6,vl=null;return}}if(T=T.sibling,T!==null){vl=T;return}vl=T=v}while(T!==null);Fl===0&&(Fl=5)}function Vf(v,T,R){var F=vr,Y=jo.transition;try{jo.transition=null,vr=1,zn(v,T,R,F)}finally{jo.transition=Y,vr=F}return null}function zn(v,T,R,F){do sh();while(Ls!==null);if(ts&6)throw Error(t(327));R=v.finishedWork;var Y=v.finishedLanes;if(R===null)return null;if(v.finishedWork=null,v.finishedLanes=0,R===v.current)throw Error(t(177));v.callbackNode=null,v.callbackPriority=0;var ee=R.lanes|R.childLanes;if(mh(v,ee),v===hu&&(vl=hu=null,ku=0),!(R.subtreeFlags&2064)&&!(R.flags&2064)||sm||(sm=!0,oh(Fs,function(){return sh(),null})),ee=(R.flags&15990)!==0,(R.subtreeFlags&15990)!==0||ee){ee=jo.transition,jo.transition=null;var be=vr;vr=1;var Ye=ts;ts|=4,v0.current=null,xc(v,R),Ag(R,v),ao(Ku),so=!!Xu,Ku=Xu=null,v.current=R,_0(R),Yl(),ts=Ye,vr=be,jo.transition=ee}else v.current=R;if(sm&&(sm=!1,Ls=v,zl=Y),ee=v.pendingLanes,ee===0&&(bo=null),Ir(R.stateNode),$a(v,nn()),T!==null)for(F=v.onRecoverableError,R=0;R<T.length;R++)Y=T[R],F(Y.value,{componentStack:Y.stack,digest:Y.digest});if(Jm)throw Jm=!1,v=qm,qm=null,v;return zl&1&&v.tag!==0&&sh(),ee=v.pendingLanes,ee&1?v===Rg?Mp++:(Mp=0,Rg=v):Mp=0,xn(),null}function sh(){if(Ls!==null){var v=xi(zl),T=jo.transition,R=vr;try{if(jo.transition=null,vr=16>v?16:v,Ls===null)var F=!1;else{if(v=Ls,Ls=null,zl=0,(ts&6)!==0)throw Error(t(331));var Y=ts;for(ts|=4,Ve=v.current;Ve!==null;){var ee=Ve,be=ee.child;if(Ve.flags&16){var Ye=ee.deletions;if(Ye!==null){for(var at=0;at<Ye.length;at++){var Lt=Ye[at];for(Ve=Lt;Ve!==null;){var Zt=Ve;switch(Zt.tag){case 0:case 11:case 15:Ep(8,Zt,ee)}var hn=Zt.child;if(hn!==null)hn.return=Zt,Ve=hn;else for(;Ve!==null;){Zt=Ve;var an=Zt.sibling,Dn=Zt.return;if(xp(Zt),Zt===Lt){Ve=null;break}if(an!==null){an.return=Dn,Ve=an;break}Ve=Dn}}}var Zn=ee.alternate;if(Zn!==null){var ir=Zn.child;if(ir!==null){Zn.child=null;do{var Ro=ir.sibling;ir.sibling=null,ir=Ro}while(ir!==null)}}Ve=ee}}if(ee.subtreeFlags&2064&&be!==null)be.return=ee,Ve=be;else e:for(;Ve!==null;){if(ee=Ve,(ee.flags&2048)!==0)switch(ee.tag){case 0:case 11:case 15:Ep(9,ee,ee.return)}var xt=ee.sibling;if(xt!==null){xt.return=ee.return,Ve=xt;break e}Ve=ee.return}}var dt=v.current;for(Ve=dt;Ve!==null;){be=Ve;var Et=be.child;if(be.subtreeFlags&2064&&Et!==null)Et.return=be,Ve=Et;else e:for(be=dt;Ve!==null;){if(Ye=Ve,(Ye.flags&2048)!==0)try{switch(Ye.tag){case 0:case 11:case 15:em(9,Ye)}}catch(lr){aa(Ye,Ye.return,lr)}if(Ye===be){Ve=null;break e}var Sn=Ye.sibling;if(Sn!==null){Sn.return=Ye.return,Ve=Sn;break e}Ve=Ye.return}}if(ts=Y,xn(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(kr,v)}catch{}F=!0}return F}finally{vr=R,jo.transition=T}}return!1}function Rp(v,T,R){T=P(R,T),T=Ze(v,T,1),v=Yi(v,T,1),T=$c(),v!==null&&(gu(v,1,T),$a(v,T))}function aa(v,T,R){if(v.tag===3)Rp(v,v,R);else for(;T!==null;){if(T.tag===3){Rp(T,v,R);break}else if(T.tag===1){var F=T.stateNode;if(typeof T.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(bo===null||!bo.has(F))){v=P(R,v),v=wt(T,v,1),T=Yi(T,v,1),v=$c(),T!==null&&(gu(T,1,v),$a(T,v));break}}T=T.return}}function $_(v,T,R){var F=v.pingCache;F!==null&&F.delete(T),T=$c(),v.pingedLanes|=v.suspendedLanes&R,hu===v&&(ku&R)===R&&(Fl===4||Fl===3&&(ku&130023424)===ku&&500>nn()-yl?am(v,0):Ig|=R),$a(v,T)}function x0(v,T){T===0&&(v.mode&1?(T=gs,gs<<=1,!(gs&130023424)&&(gs=4194304)):T=1);var R=$c();v=ja(v,T),v!==null&&(gu(v,T,R),$a(v,R))}function um(v){var T=v.memoizedState,R=0;T!==null&&(R=T.retryLane),x0(v,R)}function sb(v,T){var R=0;switch(v.tag){case 13:var F=v.stateNode,Y=v.memoizedState;Y!==null&&(R=Y.retryLane);break;case 19:F=v.stateNode;break;default:throw Error(t(314))}F!==null&&F.delete(T),x0(v,R)}var Iv;Iv=function(v,T,R){if(v!==null)if(v.memoizedProps!==T.pendingProps||va.current)gn=!0;else{if(!(v.lanes&R)&&!(T.flags&128))return gn=!1,hs(v,T,R);gn=(v.flags&131072)!==0}else gn=!1,as&&T.flags&1048576&&wp(T,wh,T.index);switch(T.lanes=0,T.tag){case 2:var F=T.type;mf(v,T),v=T.pendingProps;var Y=Yc(T,_a.current);Va(T,R),Y=Jh(null,T,F,v,Y,R);var ee=qc();return T.flags|=1,typeof Y=="object"&&Y!==null&&typeof Y.render=="function"&&Y.$$typeof===void 0?(T.tag=1,T.memoizedState=null,T.updateQueue=null,ra(F)?(ee=!0,Gs(T)):ee=!1,T.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,ff(T),Y.updater=us,T.stateNode=Y,Y._reactInternals=T,bc(T,F,v,R),T=Rn(null,T,F,!0,ee,R)):(T.tag=0,as&&ee&&su(T),Dr(null,T,Y,R),T=T.child),T;case 16:F=T.elementType;e:{switch(mf(v,T),v=T.pendingProps,Y=F._init,F=Y(F._payload),T.type=F,Y=T.tag=jf(F),v=Cu(F,v),Y){case 0:T=on(null,T,F,v,R);break e;case 1:T=En(null,T,F,v,R);break e;case 11:T=Tt(null,T,F,v,R);break e;case 14:T=Me(null,T,F,Cu(F.type,v),R);break e}throw Error(t(306,F,""))}return T;case 0:return F=T.type,Y=T.pendingProps,Y=T.elementType===F?Y:Cu(F,Y),on(v,T,F,Y,R);case 1:return F=T.type,Y=T.pendingProps,Y=T.elementType===F?Y:Cu(F,Y),En(v,T,F,Y,R);case 3:e:{if(Fn(T),v===null)throw Error(t(387));F=T.pendingProps,ee=T.memoizedState,Y=ee.element,Eh(v,T),Nr(T,F,null,R);var be=T.memoizedState;if(F=be.element,ee.isDehydrated)if(ee={element:F,isDehydrated:!1,cache:be.cache,pendingSuspenseBoundaries:be.pendingSuspenseBoundaries,transitions:be.transitions},T.updateQueue.baseState=ee,T.memoizedState=ee,T.flags&256){Y=P(Error(t(423)),T),T=dr(v,T,F,R,Y);break e}else if(F!==Y){Y=P(Error(t(424)),T),T=dr(v,T,F,R,Y);break e}else for(dl=gc(T.stateNode.containerInfo.firstChild),ys=T,as=!0,fl=null,R=Mu(T,null,F,R),T.child=R;R;)R.flags=R.flags&-3|4096,R=R.sibling;else{if(Go(),F===Y){T=Zh(v,T,R);break e}Dr(v,T,F,R)}T=T.child}return T;case 5:return xh(T),v===null&&ki(T),F=T.type,Y=T.pendingProps,ee=v!==null?v.memoizedProps:null,be=Y.children,Sh(F,Y)?be=null:ee!==null&&Sh(F,ee)&&(T.flags|=32),Ht(v,T),Dr(v,T,be,R),T.child;case 6:return v===null&&ki(T),null;case 13:return pf(v,T,R);case 4:return Zu(T,T.stateNode.containerInfo),F=T.pendingProps,v===null?T.child=ba(T,null,F,R):Dr(v,T,F,R),T.child;case 11:return F=T.type,Y=T.pendingProps,Y=T.elementType===F?Y:Cu(F,Y),Tt(v,T,F,Y,R);case 7:return Dr(v,T,T.pendingProps,R),T.child;case 8:return Dr(v,T,T.pendingProps.children,R),T.child;case 12:return Dr(v,T,T.pendingProps.children,R),T.child;case 10:e:{if(F=T.type._context,Y=T.pendingProps,ee=T.memoizedProps,be=Y.value,ss(Ol,F._currentValue),F._currentValue=be,ee!==null)if(Be(ee.value,be)){if(ee.children===Y.children&&!va.current){T=Zh(v,T,R);break e}}else for(ee=T.child,ee!==null&&(ee.return=T);ee!==null;){var Ye=ee.dependencies;if(Ye!==null){be=ee.child;for(var at=Ye.firstContext;at!==null;){if(at.context===F){if(ee.tag===1){at=ia(-1,R&-R),at.tag=2;var Lt=ee.updateQueue;if(Lt!==null){Lt=Lt.shared;var Zt=Lt.pending;Zt===null?at.next=at:(at.next=Zt.next,Zt.next=at),Lt.pending=at}}ee.lanes|=R,at=ee.alternate,at!==null&&(at.lanes|=R),ls(ee.return,R,T),Ye.lanes|=R;break}at=at.next}}else if(ee.tag===10)be=ee.type===T.type?null:ee.child;else if(ee.tag===18){if(be=ee.return,be===null)throw Error(t(341));be.lanes|=R,Ye=be.alternate,Ye!==null&&(Ye.lanes|=R),ls(be,R,T),be=ee.sibling}else be=ee.child;if(be!==null)be.return=ee;else for(be=ee;be!==null;){if(be===T){be=null;break}if(ee=be.sibling,ee!==null){ee.return=be.return,be=ee;break}be=be.return}ee=be}Dr(v,T,Y.children,R),T=T.child}return T;case 9:return Y=T.type,F=T.pendingProps.children,Va(T,R),Y=$s(Y),F=F(Y),T.flags|=1,Dr(v,T,F,R),T.child;case 14:return F=T.type,Y=Cu(F,T.pendingProps),Y=Cu(F.type,Y),Me(v,T,F,Y,R);case 15:return Ne(v,T,T.type,T.pendingProps,R);case 17:return F=T.type,Y=T.pendingProps,Y=T.elementType===F?Y:Cu(F,Y),mf(v,T),T.tag=1,ra(F)?(v=!0,Gs(T)):v=!1,Va(T,R),au(T,F,Y),bc(T,F,Y,R),Rn(null,T,F,!0,v,R);case 19:return gl(v,T,R);case 22:return st(v,T,R)}throw Error(t(156,T.tag))};function oh(v,T){return Ss(v,T)}function To(v,T,R,F){this.tag=v,this.key=R,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=T,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ou(v,T,R,F){return new To(v,T,R,F)}function kg(v){return v=v.prototype,!(!v||!v.isReactComponent)}function jf(v){if(typeof v=="function")return kg(v)?1:0;if(v!=null){if(v=v.$$typeof,v===q)return 11;if(v===ue)return 14}return 2}function ed(v,T){var R=v.alternate;return R===null?(R=Ou(v.tag,T,v.key,v.mode),R.elementType=v.elementType,R.type=v.type,R.stateNode=v.stateNode,R.alternate=v,v.alternate=R):(R.pendingProps=T,R.type=v.type,R.flags=0,R.subtreeFlags=0,R.deletions=null),R.flags=v.flags&14680064,R.childLanes=v.childLanes,R.lanes=v.lanes,R.child=v.child,R.memoizedProps=v.memoizedProps,R.memoizedState=v.memoizedState,R.updateQueue=v.updateQueue,T=v.dependencies,R.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext},R.sibling=v.sibling,R.index=v.index,R.ref=v.ref,R}function cm(v,T,R,F,Y,ee){var be=2;if(F=v,typeof v=="function")kg(v)&&(be=1);else if(typeof v=="string")be=5;else e:switch(v){case V:return Yf(R.children,Y,ee,T);case H:be=8,Y|=8;break;case oe:return v=Ou(12,R,T,Y|2),v.elementType=oe,v.lanes=ee,v;case he:return v=Ou(13,R,T,Y),v.elementType=he,v.lanes=ee,v;case ae:return v=Ou(19,R,T,Y),v.elementType=ae,v.lanes=ee,v;case we:return Xf(R,Y,ee,T);default:if(typeof v=="object"&&v!==null)switch(v.$$typeof){case le:be=10;break e;case Z:be=9;break e;case q:be=11;break e;case ue:be=14;break e;case ge:be=16,F=null;break e}throw Error(t(130,v==null?v:typeof v,""))}return T=Ou(be,R,T,Y),T.elementType=v,T.type=F,T.lanes=ee,T}function Yf(v,T,R,F){return v=Ou(7,v,F,T),v.lanes=R,v}function Xf(v,T,R,F){return v=Ou(22,v,F,T),v.elementType=we,v.lanes=R,v.stateNode={isHidden:!1},v}function kp(v,T,R){return v=Ou(6,v,null,T),v.lanes=R,v}function bd(v,T,R){return T=Ou(4,v.children!==null?v.children:[],v.key,T),T.lanes=R,T.stateNode={containerInfo:v.containerInfo,pendingChildren:null,implementation:v.implementation},T}function yf(v,T,R,F,Y){this.tag=T,this.containerInfo=v,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xl(0),this.expirationTimes=Xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.identifierPrefix=F,this.onRecoverableError=Y,this.mutableSourceEagerHydrationData=null}function Zm(v,T,R,F,Y,ee,be,Ye,at){return v=new yf(v,T,R,Ye,at),T===1?(T=1,ee===!0&&(T|=8)):T=0,ee=Ou(3,null,null,T),v.current=ee,ee.stateNode=v,ee.memoizedState={element:F,isDehydrated:R,cache:null,transitions:null,pendingSuspenseBoundaries:null},ff(ee),v}function Rv(v,T,R){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:F==null?null:""+F,children:v,containerInfo:T,implementation:R}}function Og(v){if(!v)return jc;v=v._reactInternals;e:{if(rr(v)!==v||v.tag!==1)throw Error(t(170));var T=v;do{switch(T.tag){case 3:T=T.stateNode.context;break e;case 1:if(ra(T.type)){T=T.stateNode.__reactInternalMemoizedMergedChildContext;break e}}T=T.return}while(T!==null);throw Error(t(171))}if(v.tag===1){var R=v.type;if(ra(R))return Yh(v,R,T)}return T}function Vd(v,T,R,F,Y,ee,be,Ye,at){return v=Zm(R,F,!0,v,Y,ee,be,Ye,at),v.context=Og(null),R=v.current,F=$c(),Y=Wd(R),ee=ia(F,Y),ee.callback=T??null,Yi(R,ee,Y),v.current.lanes=Y,gu(v,Y,F),$a(v,F),v}function Li(v,T,R,F){var Y=T.current,ee=$c(),be=Wd(Y);return R=Og(R),T.context===null?T.context=R:T.pendingContext=R,T=ia(ee,be),T.payload={element:v},F=F===void 0?null:F,F!==null&&(T.callback=F),v=Yi(Y,T,be),v!==null&&(oa(v,Y,be,ee),Pn(v,Y,be)),be}function hm(v){if(v=v.current,!v.child)return null;switch(v.child.tag){case 5:return v.child.stateNode;default:return v.child.stateNode}}function eg(v,T){if(v=v.memoizedState,v!==null&&v.dehydrated!==null){var R=v.retryLane;v.retryLane=R!==0&&R<T?R:T}}function Lg(v,T){eg(v,T),(v=v.alternate)&&eg(v,T)}function kv(){return null}var tg=typeof reportError=="function"?reportError:function(v){console.error(v)};function Op(v){this._internalRoot=v}ng.prototype.render=Op.prototype.render=function(v){var T=this._internalRoot;if(T===null)throw Error(t(409));Li(v,T,null,null)},ng.prototype.unmount=Op.prototype.unmount=function(){var v=this._internalRoot;if(v!==null){this._internalRoot=null;var T=v.containerInfo;Ip(function(){Li(null,v,null,null)}),T[Qi]=null}};function ng(v){this._internalRoot=v}ng.prototype.unstable_scheduleHydration=function(v){if(v){var T=El();v={blockedOn:null,target:v,priority:T};for(var R=0;R<vu.length&&T!==0&&T<vu[R].priority;R++);vu.splice(R,0,v),R===0&&io(v)}};function Kf(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)}function Jf(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11&&(v.nodeType!==8||v.nodeValue!==" react-mount-point-unstable "))}function dm(){}function Si(v,T,R,F,Y){if(Y){if(typeof F=="function"){var ee=F;F=function(){var Lt=hm(be);ee.call(Lt)}}var be=Vd(T,F,v,0,null,!1,!1,"",dm);return v._reactRootContainer=be,v[Qi]=be.current,nu(v.nodeType===8?v.parentNode:v),Ip(),be}for(;Y=v.lastChild;)v.removeChild(Y);if(typeof F=="function"){var Ye=F;F=function(){var Lt=hm(at);Ye.call(Lt)}}var at=Zm(v,0,!1,null,null,!1,!1,"",dm);return v._reactRootContainer=at,v[Qi]=at.current,nu(v.nodeType===8?v.parentNode:v),Ip(function(){Li(T,at,R,F)}),at}function qf(v,T,R,F,Y){var ee=R._reactRootContainer;if(ee){var be=ee;if(typeof Y=="function"){var Ye=Y;Y=function(){var at=hm(be);Ye.call(at)}}Li(T,be,v,Y)}else be=Si(R,T,v,Y,F);return hm(be)}Dc=function(v){switch(v.tag){case 3:var T=v.stateNode;if(T.current.memoizedState.isDehydrated){var R=tl(T.pendingLanes);R!==0&&(Qo(T,R|1),$a(T,nn()),!(ts&6)&&(ih=nn()+500,xn()))}break;case 13:Ip(function(){var F=ja(v,1);if(F!==null){var Y=$c();oa(F,v,1,Y)}}),Lg(v,1)}},gh=function(v){if(v.tag===13){var T=ja(v,134217728);if(T!==null){var R=$c();oa(T,v,134217728,R)}Lg(v,134217728)}},Pc=function(v){if(v.tag===13){var T=Wd(v),R=ja(v,T);if(R!==null){var F=$c();oa(R,v,T,F)}Lg(v,T)}},El=function(){return vr},_u=function(v,T){var R=vr;try{return vr=v,T()}finally{vr=R}},Jt=function(v,T,R){switch(T){case"input":if(kt(v,R),T=R.name,R.type==="radio"&&T!=null){for(R=v;R.parentNode;)R=R.parentNode;for(R=R.querySelectorAll("input[name="+JSON.stringify(""+T)+'][type="radio"]'),T=0;T<R.length;T++){var F=R[T];if(F!==v&&F.form===v.form){var Y=zf(F);if(!Y)throw Error(t(90));Ce(F),kt(F,Y)}}}break;case"textarea":$e(v,R);break;case"select":T=R.value,T!=null&&mt(v,!!R.multiple,T,!1)}},$r=b0,gr=Ip;var fm={usingClientEntryPoint:!1,Events:[Mr,mn,zf,Pr,Ei,b0]},pm={findFiberByHostInstance:ga,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Lp={bundleType:pm.bundleType,version:pm.version,rendererPackageName:pm.rendererPackageName,rendererConfig:pm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(v){return v=Br(v),v===null?null:v.stateNode},findFiberByHostInstance:pm.findFiberByHostInstance||kv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ng=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ng.isDisabled&&Ng.supportsFiber)try{kr=Ng.inject(Lp),An=Ng}catch{}}return zp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fm,zp.createPortal=function(v,T){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kf(T))throw Error(t(200));return Rv(v,T,null,R)},zp.createRoot=function(v,T){if(!Kf(v))throw Error(t(299));var R=!1,F="",Y=tg;return T!=null&&(T.unstable_strictMode===!0&&(R=!0),T.identifierPrefix!==void 0&&(F=T.identifierPrefix),T.onRecoverableError!==void 0&&(Y=T.onRecoverableError)),T=Zm(v,1,!1,null,null,R,!1,F,Y),v[Qi]=T.current,nu(v.nodeType===8?v.parentNode:v),new Op(T)},zp.findDOMNode=function(v){if(v==null)return null;if(v.nodeType===1)return v;var T=v._reactInternals;if(T===void 0)throw typeof v.render=="function"?Error(t(188)):(v=Object.keys(v).join(","),Error(t(268,v)));return v=Br(T),v=v===null?null:v.stateNode,v},zp.flushSync=function(v){return Ip(v)},zp.hydrate=function(v,T,R){if(!Jf(T))throw Error(t(200));return qf(null,v,T,!0,R)},zp.hydrateRoot=function(v,T,R){if(!Kf(v))throw Error(t(405));var F=R!=null&&R.hydratedSources||null,Y=!1,ee="",be=tg;if(R!=null&&(R.unstable_strictMode===!0&&(Y=!0),R.identifierPrefix!==void 0&&(ee=R.identifierPrefix),R.onRecoverableError!==void 0&&(be=R.onRecoverableError)),T=Vd(T,null,v,1,R??null,Y,!1,ee,be),v[Qi]=T.current,nu(v),F)for(v=0;v<F.length;v++)R=F[v],Y=R._getVersion,Y=Y(R._source),T.mutableSourceEagerHydrationData==null?T.mutableSourceEagerHydrationData=[R,Y]:T.mutableSourceEagerHydrationData.push(R,Y);return new ng(T)},zp.render=function(v,T,R){if(!Jf(T))throw Error(t(200));return qf(null,v,T,!1,R)},zp.unmountComponentAtNode=function(v){if(!Jf(v))throw Error(t(40));return v._reactRootContainer?(Ip(function(){qf(null,null,v,!1,function(){v._reactRootContainer=null,v[Qi]=null})}),!0):!1},zp.unstable_batchedUpdates=b0,zp.unstable_renderSubtreeIntoContainer=function(v,T,R,F){if(!Jf(R))throw Error(t(200));if(v==null||v._reactInternals===void 0)throw Error(t(38));return qf(v,T,R,!1,F)},zp.version="18.2.0-next-9e3b772b8-20220608",zp}(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=SAe()})(HZ);var GZ,fW=HZ.exports;GZ=fW.createRoot,fW.hydrateRoot;const zC=new Ae,x4=new Ae,wAe=new Ae;function EAe(n,e,t){const r=zC.setFromMatrixPosition(n.matrixWorld);r.project(e);const s=t.width/2,o=t.height/2;return[r.x*s+s,-(r.y*o)+o]}function xAe(n,e){const t=zC.setFromMatrixPosition(n.matrixWorld),r=x4.setFromMatrixPosition(e.matrixWorld),s=t.sub(r),o=e.getWorldDirection(wAe);return s.angleTo(o)>Math.PI/2}function $Ae(n,e,t,r){const s=zC.setFromMatrixPosition(n.matrixWorld),o=s.clone();o.project(e),t.setFromCamera(o,e);const l=t.intersectObjects(r,!0);if(l.length){const u=l[0].distance;return s.distanceTo(t.ray.origin)<u}return!0}function CAe(n,e){if(e instanceof u_)return e.zoom;if(e instanceof Za){const t=zC.setFromMatrixPosition(n.matrixWorld),r=x4.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,o=t.distanceTo(r);return 1/(2*Math.tan(s/2)*o)}else return 1}function MAe(n,e,t){if(e instanceof Za||e instanceof u_){const r=zC.setFromMatrixPosition(n.matrixWorld),s=x4.setFromMatrixPosition(e.matrixWorld),o=r.distanceTo(s),l=(t[1]-t[0])/(e.far-e.near),u=t[1]-l*e.far;return Math.round(l*o+u)}}const UP=n=>Math.abs(n)<1e-10?0:n;function WZ(n,e,t=""){let r="matrix3d(";for(let s=0;s!==16;s++)r+=UP(e[s]*n.elements[s])+(s!==15?",":")");return t+r}const AAe=(n=>e=>WZ(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),IAe=(n=>(e,t)=>WZ(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function RAe(n){return n&&typeof n=="object"&&"current"in n}const VZ=pe.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:s,center:o,fullscreen:l,portal:u,distanceFactor:h,sprite:f=!1,transform:g=!1,occlude:y,onOcclude:b,castShadow:S,receiveShadow:C,material:M,geometry:A,zIndexRange:O=[16777271,0],calculatePosition:L=EAe,as:B="div",wrapperClass:D,pointerEvents:z="auto",...U},V)=>{const{gl:H,camera:oe,scene:le,size:Z,raycaster:q,events:he,viewport:ae}=nf(),[ue]=pe.useState(()=>document.createElement(B)),ge=pe.useRef(),we=pe.useRef(null),J=pe.useRef(0),re=pe.useRef([0,0]),ie=pe.useRef(null),fe=pe.useRef(null),Te=(u==null?void 0:u.current)||he.connected||H.domElement.parentNode,Fe=pe.useRef(null),Ie=pe.useRef(!1),qe=pe.useMemo(()=>y&&y!=="blending"||Array.isArray(y)&&y.length&&RAe(y[0]),[y]);pe.useLayoutEffect(()=>{const lt=H.domElement;y&&y==="blending"?(lt.style.zIndex=`${Math.floor(O[0]/2)}`,lt.style.position="absolute",lt.style.pointerEvents="none"):(lt.style.zIndex=null,lt.style.position=null,lt.style.pointerEvents=null)},[y]),pe.useLayoutEffect(()=>{if(we.current){const lt=ge.current=GZ(ue);if(le.updateMatrixWorld(),g)ue.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ze=L(we.current,oe,Z);ue.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ze[0]}px,${ze[1]}px,0);transform-origin:0 0;`}return Te&&(s?Te.prepend(ue):Te.appendChild(ue)),()=>{Te&&Te.removeChild(ue),lt.unmount()}}},[Te,g]),pe.useLayoutEffect(()=>{D&&(ue.className=D)},[D]);const Re=pe.useMemo(()=>g?{position:"absolute",top:0,left:0,width:Z.width,height:Z.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...l&&{top:-Z.height/2,left:-Z.width/2,width:Z.width,height:Z.height},...t},[t,o,l,Z,g]),Qe=pe.useMemo(()=>({position:"absolute",pointerEvents:z}),[z]);pe.useLayoutEffect(()=>{if(Ie.current=!1,g){var lt;(lt=ge.current)==null||lt.render(un("div",{ref:ie,style:Re,children:un("div",{ref:fe,style:Qe,children:un("div",{ref:V,className:r,style:t,children:n})})}))}else{var ze;(ze=ge.current)==null||ze.render(un("div",{ref:V,style:Re,className:r,children:n}))}});const nt=pe.useRef(!0);Ym(lt=>{if(we.current){oe.updateMatrixWorld(),we.current.updateWorldMatrix(!0,!1);const ze=g?re.current:L(we.current,oe,Z);if(g||Math.abs(J.current-oe.zoom)>e||Math.abs(re.current[0]-ze[0])>e||Math.abs(re.current[1]-ze[1])>e){const Ce=xAe(we.current,oe);let He=!1;qe&&(y!=="blending"?He=[le]:Array.isArray(y)&&(He=y.map(kt=>kt.current)));const rt=nt.current;if(He){const kt=$Ae(we.current,oe,q,He);nt.current=kt&&!Ce}else nt.current=!Ce;rt!==nt.current&&(b?b(!nt.current):ue.style.display=nt.current?"block":"none");const it=Math.floor(O[0]/2),Nt=y?qe?[O[0],it]:[it-1,0]:O;if(ue.style.zIndex=`${MAe(we.current,oe,Nt)}`,g){const[kt,vt]=[Z.width/2,Z.height/2],Mt=oe.projectionMatrix.elements[5]*vt,{isOrthographicCamera:At,top:mt,left:xe,bottom:se,right:$e}=oe,ht=AAe(oe.matrixWorldInverse),St=At?`scale(${Mt})translate(${UP(-($e+xe)/2)}px,${UP((mt+se)/2)}px)`:`translateZ(${Mt}px)`;let It=we.current.matrixWorld;f&&(It=oe.matrixWorldInverse.clone().transpose().copyPosition(It).scale(we.current.scale),It.elements[3]=It.elements[7]=It.elements[11]=0,It.elements[15]=1),ue.style.width=Z.width+"px",ue.style.height=Z.height+"px",ue.style.perspective=At?"":`${Mt}px`,ie.current&&fe.current&&(ie.current.style.transform=`${St}${ht}translate(${kt}px,${vt}px)`,fe.current.style.transform=IAe(It,1/((h||10)/400)))}else{const kt=h===void 0?1:CAe(we.current,oe)*h;ue.style.transform=`translate3d(${ze[0]}px,${ze[1]}px,0) scale(${kt})`}re.current=ze,J.current=oe.zoom}}if(!qe&&Fe.current&&!Ie.current)if(g){if(ie.current){const ze=ie.current.children[0];if(ze!=null&&ze.clientWidth&&ze!=null&&ze.clientHeight){const{isOrthographicCamera:Ce}=oe;if(Ce||A)U.scale&&(Array.isArray(U.scale)?U.scale instanceof Ae?Fe.current.scale.copy(U.scale.clone().divideScalar(1)):Fe.current.scale.set(1/U.scale[0],1/U.scale[1],1/U.scale[2]):Fe.current.scale.setScalar(1/U.scale));else{const He=(h||10)/400,rt=ze.clientWidth*He,it=ze.clientHeight*He;Fe.current.scale.set(rt,it,1)}Ie.current=!0}}}else{const ze=ue.children[0];if(ze!=null&&ze.clientWidth&&ze!=null&&ze.clientHeight){const Ce=1/ae.factor,He=ze.clientWidth*Ce,rt=ze.clientHeight*Ce;Fe.current.scale.set(He,rt,1),Ie.current=!0}Fe.current.lookAt(lt.camera.position)}});const ft=pe.useMemo(()=>({vertexShader:g?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[g]);return un("group",{...U,ref:we,children:y&&!qe&&Bh("mesh",{castShadow:S,receiveShadow:C,ref:Fe,children:[A||un("planeGeometry",{}),M||un("shaderMaterial",{side:lp,vertexShader:ft.vertexShader,fragmentShader:ft.fragmentShader})]})})});function $4(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}const xI=0,kAe=1,OAe=new Ae,pW=new S4,sN=new sv,mW=new Ae,LA=new Am;class gW{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new _W,this.unassigned=new _W,this.vertices=[]}setFromPoints(e){if(e.length>=4){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.vertices.push(new LAe(e[t]));this.compute()}return this}setFromObject(e){const t=[];return e.updateMatrixWorld(!0),e.traverse(function(r){const s=r.geometry;if(s!==void 0){if(s.isGeometry){console.error("THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.");return}else if(s.isBufferGeometry){const o=s.attributes.position;if(o!==void 0)for(let l=0,u=o.count;l<u;l++){const h=new Ae;h.fromBufferAttribute(o,l).applyMatrix4(r.matrixWorld),t.push(h)}}}}),this.setFromPoints(t)}containsPoint(e){const t=this.faces;for(let r=0,s=t.length;r<s;r++)if(t[r].distanceToPoint(e)>this.tolerance)return!1;return!0}intersectRay(e,t){const r=this.faces;let s=-1/0,o=1/0;for(let l=0,u=r.length;l<u;l++){const h=r[l],f=h.distanceToPoint(e.origin),g=h.normal.dot(e.direction);if(f>0&&g>=0)return null;const y=g!==0?-f/g:0;if(!(y<=0)&&(g>0?o=Math.min(y,o):s=Math.max(y,s),s>o))return null}return s!==-1/0?e.at(s,t):e.at(o,t),t}intersectsRay(e){return this.intersectRay(e,OAe)!==null}makeEmpty(){return this.faces=[],this.vertices=[],this}addVertexToFace(e,t){return e.face=t,t.outside===null?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}removeVertexFromFace(e,t){return e===t.outside&&(e.next!==null&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this}removeAllVerticesFromFace(e){if(e.outside!==null){const t=e.outside;let r=e.outside;for(;r.next!==null&&r.next.face===e;)r=r.next;return this.assigned.removeSubList(t,r),t.prev=r.next=null,e.outside=null,t}}deleteFaceVertices(e,t){const r=this.removeAllVerticesFromFace(e);if(r!==void 0)if(t===void 0)this.unassigned.appendChain(r);else{let s=r;do{const o=s.next;t.distanceToPoint(s.point)>this.tolerance?this.addVertexToFace(s,t):this.unassigned.append(s),s=o}while(s!==null)}return this}resolveUnassignedPoints(e){if(this.unassigned.isEmpty()===!1){let t=this.unassigned.first();do{const r=t.next;let s=this.tolerance,o=null;for(let l=0;l<e.length;l++){const u=e[l];if(u.mark===xI){const h=u.distanceToPoint(t.point);if(h>s&&(s=h,o=u),s>1e3*this.tolerance)break}}o!==null&&this.addVertexToFace(t,o),t=r}while(t!==null)}return this}computeExtremes(){const e=new Ae,t=new Ae,r=[],s=[];for(let o=0;o<3;o++)r[o]=s[o]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(let o=0,l=this.vertices.length;o<l;o++){const u=this.vertices[o],h=u.point;for(let f=0;f<3;f++)h.getComponent(f)<e.getComponent(f)&&(e.setComponent(f,h.getComponent(f)),r[f]=u);for(let f=0;f<3;f++)h.getComponent(f)>t.getComponent(f)&&(t.setComponent(f,h.getComponent(f)),s[f]=u)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:r,max:s}}computeInitialHull(){const e=this.vertices,t=this.computeExtremes(),r=t.min,s=t.max;let o=0,l=0;for(let b=0;b<3;b++){const S=s[b].point.getComponent(b)-r[b].point.getComponent(b);S>o&&(o=S,l=b)}const u=r[l],h=s[l];let f,g;o=0,pW.set(u.point,h.point);for(let b=0,S=this.vertices.length;b<S;b++){const C=e[b];if(C!==u&&C!==h){pW.closestPointToPoint(C.point,!0,mW);const M=mW.distanceToSquared(C.point);M>o&&(o=M,f=C)}}o=-1,sN.setFromCoplanarPoints(u.point,h.point,f.point);for(let b=0,S=this.vertices.length;b<S;b++){const C=e[b];if(C!==u&&C!==h&&C!==f){const M=Math.abs(sN.distanceToPoint(C.point));M>o&&(o=M,g=C)}}const y=[];if(sN.distanceToPoint(g.point)<0){y.push(Xg.create(u,h,f),Xg.create(g,h,u),Xg.create(g,f,h),Xg.create(g,u,f));for(let b=0;b<3;b++){const S=(b+1)%3;y[b+1].getEdge(2).setTwin(y[0].getEdge(S)),y[b+1].getEdge(1).setTwin(y[S+1].getEdge(0))}}else{y.push(Xg.create(u,f,h),Xg.create(g,u,h),Xg.create(g,h,f),Xg.create(g,f,u));for(let b=0;b<3;b++){const S=(b+1)%3;y[b+1].getEdge(2).setTwin(y[0].getEdge((3-b)%3)),y[b+1].getEdge(0).setTwin(y[S+1].getEdge(1))}}for(let b=0;b<4;b++)this.faces.push(y[b]);for(let b=0,S=e.length;b<S;b++){const C=e[b];if(C!==u&&C!==h&&C!==f&&C!==g){o=this.tolerance;let M=null;for(let A=0;A<4;A++){const O=this.faces[A].distanceToPoint(C.point);O>o&&(o=O,M=this.faces[A])}M!==null&&this.addVertexToFace(C,M)}}return this}reindexFaces(){const e=[];for(let t=0;t<this.faces.length;t++){const r=this.faces[t];r.mark===xI&&e.push(r)}return this.faces=e,this}nextVertexToAdd(){if(this.assigned.isEmpty()===!1){let e,t=0;const r=this.assigned.first().face;let s=r.outside;do{const o=r.distanceToPoint(s.point);o>t&&(t=o,e=s),s=s.next}while(s!==null&&s.face===r);return e}}computeHorizon(e,t,r,s){this.deleteFaceVertices(r),r.mark=kAe;let o;t===null?o=t=r.getEdge(0):o=t.next;do{const l=o.twin,u=l.face;u.mark===xI&&(u.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,l,u,s):s.push(o)),o=o.next}while(o!==t);return this}addAdjoiningFace(e,t){const r=Xg.create(e,t.tail(),t.head());return this.faces.push(r),r.getEdge(-1).setTwin(t.twin),r.getEdge(0)}addNewFaces(e,t){this.newFaces=[];let r=null,s=null;for(let o=0;o<t.length;o++){const l=t[o],u=this.addAdjoiningFace(e,l);r===null?r=u:u.next.setTwin(s),this.newFaces.push(u.face),s=u}return r.next.setTwin(s),this}addVertexToHull(e){const t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}compute(){let e;for(this.computeInitialHull();(e=this.nextVertexToAdd())!==void 0;)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}class Xg{constructor(){this.normal=new Ae,this.midpoint=new Ae,this.area=0,this.constant=0,this.outside=null,this.mark=xI,this.edge=null}static create(e,t,r){const s=new Xg,o=new oN(e,s),l=new oN(t,s),u=new oN(r,s);return o.next=u.prev=l,l.next=o.prev=u,u.next=l.prev=o,s.edge=o,s.compute()}getEdge(e){let t=this.edge;for(;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}compute(){const e=this.edge.tail(),t=this.edge.head(),r=this.edge.next.head();return LA.set(e.point,t.point,r.point),LA.getNormal(this.normal),LA.getMidpoint(this.midpoint),this.area=LA.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(e){return this.normal.dot(e)-this.constant}}class oN{constructor(e,t){this.vertex=e,this.prev=null,this.next=null,this.twin=null,this.face=t}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceTo(e.point):-1}lengthSquared(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceToSquared(e.point):-1}setTwin(e){return this.twin=e,e.twin=this,this}}class LAe{constructor(e){this.point=e,this.prev=null,this.next=null,this.face=null}}class _W{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(e,t){return t.prev=e.prev,t.next=e,t.prev===null?this.head=t:t.prev.next=t,e.prev=t,this}insertAfter(e,t){return t.prev=e,t.next=e.next,t.next===null?this.tail=t:t.next.prev=t,e.next=t,this}append(e){return this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}appendChain(e){for(this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail;e.next!==null;)e=e.next;return this.tail=e,this}remove(e){return e.prev===null?this.head=e.next:e.prev.next=e.next,e.next===null?this.tail=e.prev:e.next.prev=e.prev,this}removeSubList(e,t){return e.prev===null?this.head=t.next:e.prev.next=t.next,t.next===null?this.tail=e.prev:t.next.prev=e.prev,this}isEmpty(){return this.head===null}}class vW extends ui{constructor(e=[]){super();const t=[],r=[];gW===void 0&&console.error("THREE.ConvexGeometry: ConvexGeometry relies on ConvexHull");const s=new gW().setFromPoints(e).faces;for(let o=0;o<s.length;o++){const l=s[o];let u=l.edge;do{const h=u.head().point;t.push(h.x,h.y,h.z),r.push(l.normal.x,l.normal.y,l.normal.z),u=u.next}while(u!==l.edge)}this.setAttribute("position",new ar(t,3)),this.setAttribute("normal",new ar(r,3))}}function Ni(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const jZ=(n,e)=>{const t=n[0].index!==null,r=new Set(Object.keys(n[0].attributes)),s=new Set(Object.keys(n[0].morphAttributes)),o={},l={},u=n[0].morphTargetsRelative,h=new ui;let f=0;if(n.forEach((g,y)=>{let b=0;if(t!==(g.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let S in g.attributes){if(!r.has(S))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+'. All geometries must have compatible attributes; make sure "'+S+'" attribute exists among all geometries, or in none of them.'),null;o[S]===void 0&&(o[S]=[]),o[S].push(g.attributes[S]),b++}if(b!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+". Make sure all geometries have the same number of attributes."),null;if(u!==g.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let S in g.morphAttributes){if(!s.has(S))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+".  .morphAttributes must be consistent throughout all geometries."),null;l[S]===void 0&&(l[S]=[]),l[S].push(g.morphAttributes[S])}if(h.userData.mergedUserData=h.userData.mergedUserData||[],h.userData.mergedUserData.push(g.userData),e){let S;if(g.index)S=g.index.count;else if(g.attributes.position!==void 0)S=g.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+". The geometry must have either an index or a position attribute"),null;h.addGroup(f,S,y),f+=S}}),t){let g=0;const y=[];n.forEach(b=>{const S=b.index;for(let C=0;C<S.count;++C)y.push(S.getX(C)+g);g+=b.attributes.position.count}),h.setIndex(y)}for(let g in o){const y=yW(o[g]);if(!y)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+g+" attribute."),null;h.setAttribute(g,y)}for(let g in l){const y=l[g][0].length;if(y===0)break;h.morphAttributes=h.morphAttributes||{},h.morphAttributes[g]=[];for(let b=0;b<y;++b){const S=[];for(let M=0;M<l[g].length;++M)S.push(l[g][M][b]);const C=yW(S);if(!C)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+g+" morphAttribute."),null;h.morphAttributes[g].push(C)}}return h},yW=n=>{let e,t,r,s=0;if(n.forEach(o=>{if(e===void 0&&(e=o.array.constructor),e!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=o.itemSize),t!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=o.normalized),r!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;s+=o.array.length}),e&&t){const o=new e(s);let l=0;return n.forEach(u=>{o.set(u.array,l),l+=u.array.length}),new Po(o,t,r)}},bW=(n,e)=>(n%e+e)%e;class NAe extends Vm{constructor(e,t){super(),Ni(this,"object",void 0),Ni(this,"domElement",void 0),Ni(this,"enabled",!0),Ni(this,"target",new Ae),Ni(this,"minDistance",0),Ni(this,"maxDistance",1/0),Ni(this,"minZoom",0),Ni(this,"maxZoom",1/0),Ni(this,"minPolarAngle",0),Ni(this,"maxPolarAngle",Math.PI),Ni(this,"minAzimuthAngle",-1/0),Ni(this,"maxAzimuthAngle",1/0),Ni(this,"enableDamping",!1),Ni(this,"dampingFactor",.05),Ni(this,"enableZoom",!0),Ni(this,"zoomSpeed",1),Ni(this,"enableRotate",!0),Ni(this,"rotateSpeed",1),Ni(this,"enablePan",!0),Ni(this,"panSpeed",1),Ni(this,"screenSpacePanning",!0),Ni(this,"keyPanSpeed",7),Ni(this,"autoRotate",!1),Ni(this,"autoRotateSpeed",2),Ni(this,"reverseOrbit",!1),Ni(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ni(this,"mouseButtons",{LEFT:l1.ROTATE,MIDDLE:l1.DOLLY,RIGHT:l1.PAN}),Ni(this,"touches",{ONE:u1.ROTATE,TWO:u1.DOLLY_PAN}),Ni(this,"target0",void 0),Ni(this,"position0",void 0),Ni(this,"zoom0",void 0),Ni(this,"_domElementKeyEvents",null),Ni(this,"getPolarAngle",void 0),Ni(this,"getAzimuthalAngle",void 0),Ni(this,"setPolarAngle",void 0),Ni(this,"setAzimuthalAngle",void 0),Ni(this,"getDistance",void 0),Ni(this,"listenToKeyEvents",void 0),Ni(this,"saveState",void 0),Ni(this,"reset",void 0),Ni(this,"update",void 0),Ni(this,"connect",void 0),Ni(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof Za?this.object.zoom:1,this.getPolarAngle=()=>g.phi,this.getAzimuthalAngle=()=>g.theta,this.setPolarAngle=te=>{let me=bW(te,2*Math.PI),ke=g.phi;ke<0&&(ke+=2*Math.PI),me<0&&(me+=2*Math.PI);let Xe=Math.abs(me-ke);2*Math.PI-Xe<Xe&&(me<ke?me+=2*Math.PI:ke+=2*Math.PI),y.phi=me-ke,r.update()},this.setAzimuthalAngle=te=>{let me=bW(te,2*Math.PI),ke=g.theta;ke<0&&(ke+=2*Math.PI),me<0&&(me+=2*Math.PI);let Xe=Math.abs(me-ke);2*Math.PI-Xe<Xe&&(me<ke?me+=2*Math.PI:ke+=2*Math.PI),y.theta=me-ke,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=te=>{te.addEventListener("keydown",$e),this._domElementKeyEvents=te},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object instanceof Za?r.object.zoom:1},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object instanceof Za&&(r.object.zoom=r.zoom0,r.object.updateProjectionMatrix()),r.dispatchEvent(s),r.update(),h=u.NONE},this.update=(()=>{const te=new Ae,me=new Sl().setFromUnitVectors(e.up,new Ae(0,1,0)),ke=me.clone().invert(),Xe=new Ae,Wt=new Sl,Ge=2*Math.PI;return function(){const tn=r.object.position;te.copy(tn).sub(r.target),te.applyQuaternion(me),g.setFromVector3(te),r.autoRotate&&h===u.NONE&&q(le()),r.enableDamping?(g.theta+=y.theta*r.dampingFactor,g.phi+=y.phi*r.dampingFactor):(g.theta+=y.theta,g.phi+=y.phi);let _t=r.minAzimuthAngle,Jt=r.maxAzimuthAngle;return isFinite(_t)&&isFinite(Jt)&&(_t<-Math.PI?_t+=Ge:_t>Math.PI&&(_t-=Ge),Jt<-Math.PI?Jt+=Ge:Jt>Math.PI&&(Jt-=Ge),_t<=Jt?g.theta=Math.max(_t,Math.min(Jt,g.theta)):g.theta=g.theta>(_t+Jt)/2?Math.max(_t,g.theta):Math.min(Jt,g.theta)),g.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,g.phi)),g.makeSafe(),g.radius*=b,g.radius=Math.max(r.minDistance,Math.min(r.maxDistance,g.radius)),r.enableDamping===!0?r.target.addScaledVector(S,r.dampingFactor):r.target.add(S),te.setFromSpherical(g),te.applyQuaternion(ke),tn.copy(r.target).add(te),r.object.lookAt(r.target),r.enableDamping===!0?(y.theta*=1-r.dampingFactor,y.phi*=1-r.dampingFactor,S.multiplyScalar(1-r.dampingFactor)):(y.set(0,0,0),S.set(0,0,0)),b=1,C||Xe.distanceToSquared(r.object.position)>f||8*(1-Wt.dot(r.object.quaternion))>f?(r.dispatchEvent(s),Xe.copy(r.object.position),Wt.copy(r.object.quaternion),C=!1,!0):!1}})(),this.connect=te=>{te===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=te,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",It),r.domElement.addEventListener("pointerdown",kt),r.domElement.addEventListener("pointercancel",At),r.domElement.addEventListener("wheel",se)},this.dispose=()=>{var te,me,ke,Xe,Wt,Ge;(te=r.domElement)===null||te===void 0||te.removeEventListener("contextmenu",It),(me=r.domElement)===null||me===void 0||me.removeEventListener("pointerdown",kt),(ke=r.domElement)===null||ke===void 0||ke.removeEventListener("pointercancel",At),(Xe=r.domElement)===null||Xe===void 0||Xe.removeEventListener("wheel",se),(Wt=r.domElement)===null||Wt===void 0||Wt.ownerDocument.removeEventListener("pointermove",vt),(Ge=r.domElement)===null||Ge===void 0||Ge.ownerDocument.removeEventListener("pointerup",Mt),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",$e)};const r=this,s={type:"change"},o={type:"start"},l={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=u.NONE;const f=1e-6,g=new DP,y=new DP;let b=1;const S=new Ae;let C=!1;const M=new jt,A=new jt,O=new jt,L=new jt,B=new jt,D=new jt,z=new jt,U=new jt,V=new jt,H=[],oe={};function le(){return 2*Math.PI/60/60*r.autoRotateSpeed}function Z(){return Math.pow(.95,r.zoomSpeed)}function q(te){r.reverseOrbit?y.theta+=te:y.theta-=te}function he(te){r.reverseOrbit?y.phi+=te:y.phi-=te}const ae=(()=>{const te=new Ae;return function(me,ke){te.setFromMatrixColumn(ke,0),te.multiplyScalar(-me),S.add(te)}})(),ue=(()=>{const te=new Ae;return function(me,ke){r.screenSpacePanning===!0?te.setFromMatrixColumn(ke,1):(te.setFromMatrixColumn(ke,0),te.crossVectors(r.object.up,te)),te.multiplyScalar(me),S.add(te)}})(),ge=(()=>{const te=new Ae;return function(me,ke){const Xe=r.domElement;if(Xe&&r.object instanceof Za&&r.object.isPerspectiveCamera){const Wt=r.object.position;te.copy(Wt).sub(r.target);let Ge=te.length();Ge*=Math.tan(r.object.fov/2*Math.PI/180),ae(2*me*Ge/Xe.clientHeight,r.object.matrix),ue(2*ke*Ge/Xe.clientHeight,r.object.matrix)}else Xe&&r.object instanceof u_&&r.object.isOrthographicCamera?(ae(me*(r.object.right-r.object.left)/r.object.zoom/Xe.clientWidth,r.object.matrix),ue(ke*(r.object.top-r.object.bottom)/r.object.zoom/Xe.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function we(te){r.object instanceof Za&&r.object.isPerspectiveCamera?b/=te:r.object instanceof u_&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*te)),r.object.updateProjectionMatrix(),C=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function J(te){r.object instanceof Za&&r.object.isPerspectiveCamera?b*=te:r.object instanceof u_&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/te)),r.object.updateProjectionMatrix(),C=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function re(te){M.set(te.clientX,te.clientY)}function ie(te){z.set(te.clientX,te.clientY)}function fe(te){L.set(te.clientX,te.clientY)}function Te(te){A.set(te.clientX,te.clientY),O.subVectors(A,M).multiplyScalar(r.rotateSpeed);const me=r.domElement;me&&(q(2*Math.PI*O.x/me.clientHeight),he(2*Math.PI*O.y/me.clientHeight)),M.copy(A),r.update()}function Fe(te){U.set(te.clientX,te.clientY),V.subVectors(U,z),V.y>0?we(Z()):V.y<0&&J(Z()),z.copy(U),r.update()}function Ie(te){B.set(te.clientX,te.clientY),D.subVectors(B,L).multiplyScalar(r.panSpeed),ge(D.x,D.y),L.copy(B),r.update()}function qe(te){te.deltaY<0?J(Z()):te.deltaY>0&&we(Z()),r.update()}function Re(te){let me=!1;switch(te.code){case r.keys.UP:ge(0,r.keyPanSpeed),me=!0;break;case r.keys.BOTTOM:ge(0,-r.keyPanSpeed),me=!0;break;case r.keys.LEFT:ge(r.keyPanSpeed,0),me=!0;break;case r.keys.RIGHT:ge(-r.keyPanSpeed,0),me=!0;break}me&&(te.preventDefault(),r.update())}function Qe(){if(H.length==1)M.set(H[0].pageX,H[0].pageY);else{const te=.5*(H[0].pageX+H[1].pageX),me=.5*(H[0].pageY+H[1].pageY);M.set(te,me)}}function nt(){if(H.length==1)L.set(H[0].pageX,H[0].pageY);else{const te=.5*(H[0].pageX+H[1].pageX),me=.5*(H[0].pageY+H[1].pageY);L.set(te,me)}}function ft(){const te=H[0].pageX-H[1].pageX,me=H[0].pageY-H[1].pageY,ke=Math.sqrt(te*te+me*me);z.set(0,ke)}function lt(){r.enableZoom&&ft(),r.enablePan&&nt()}function ze(){r.enableZoom&&ft(),r.enableRotate&&Qe()}function Ce(te){if(H.length==1)A.set(te.pageX,te.pageY);else{const ke=Q(te),Xe=.5*(te.pageX+ke.x),Wt=.5*(te.pageY+ke.y);A.set(Xe,Wt)}O.subVectors(A,M).multiplyScalar(r.rotateSpeed);const me=r.domElement;me&&(q(2*Math.PI*O.x/me.clientHeight),he(2*Math.PI*O.y/me.clientHeight)),M.copy(A)}function He(te){if(H.length==1)B.set(te.pageX,te.pageY);else{const me=Q(te),ke=.5*(te.pageX+me.x),Xe=.5*(te.pageY+me.y);B.set(ke,Xe)}D.subVectors(B,L).multiplyScalar(r.panSpeed),ge(D.x,D.y),L.copy(B)}function rt(te){const me=Q(te),ke=te.pageX-me.x,Xe=te.pageY-me.y,Wt=Math.sqrt(ke*ke+Xe*Xe);U.set(0,Wt),V.set(0,Math.pow(U.y/z.y,r.zoomSpeed)),we(V.y),z.copy(U)}function it(te){r.enableZoom&&rt(te),r.enablePan&&He(te)}function Nt(te){r.enableZoom&&rt(te),r.enableRotate&&Ce(te)}function kt(te){if(r.enabled!==!1){if(H.length===0){var me,ke;(me=r.domElement)===null||me===void 0||me.ownerDocument.addEventListener("pointermove",vt),(ke=r.domElement)===null||ke===void 0||ke.ownerDocument.addEventListener("pointerup",Mt)}pt(te),te.pointerType==="touch"?ht(te):mt(te)}}function vt(te){r.enabled!==!1&&(te.pointerType==="touch"?St(te):xe(te))}function Mt(te){if(Ke(te),H.length===0){var me,ke,Xe;(me=r.domElement)===null||me===void 0||me.releasePointerCapture(te.pointerId),(ke=r.domElement)===null||ke===void 0||ke.ownerDocument.removeEventListener("pointermove",vt),(Xe=r.domElement)===null||Xe===void 0||Xe.ownerDocument.removeEventListener("pointerup",Mt)}r.dispatchEvent(l),h=u.NONE}function At(te){Ke(te)}function mt(te){let me;switch(te.button){case 0:me=r.mouseButtons.LEFT;break;case 1:me=r.mouseButtons.MIDDLE;break;case 2:me=r.mouseButtons.RIGHT;break;default:me=-1}switch(me){case l1.DOLLY:if(r.enableZoom===!1)return;ie(te),h=u.DOLLY;break;case l1.ROTATE:if(te.ctrlKey||te.metaKey||te.shiftKey){if(r.enablePan===!1)return;fe(te),h=u.PAN}else{if(r.enableRotate===!1)return;re(te),h=u.ROTATE}break;case l1.PAN:if(te.ctrlKey||te.metaKey||te.shiftKey){if(r.enableRotate===!1)return;re(te),h=u.ROTATE}else{if(r.enablePan===!1)return;fe(te),h=u.PAN}break;default:h=u.NONE}h!==u.NONE&&r.dispatchEvent(o)}function xe(te){if(r.enabled!==!1)switch(h){case u.ROTATE:if(r.enableRotate===!1)return;Te(te);break;case u.DOLLY:if(r.enableZoom===!1)return;Fe(te);break;case u.PAN:if(r.enablePan===!1)return;Ie(te);break}}function se(te){r.enabled===!1||r.enableZoom===!1||h!==u.NONE&&h!==u.ROTATE||(te.preventDefault(),r.dispatchEvent(o),qe(te),r.dispatchEvent(l))}function $e(te){r.enabled===!1||r.enablePan===!1||Re(te)}function ht(te){switch(Le(te),H.length){case 1:switch(r.touches.ONE){case u1.ROTATE:if(r.enableRotate===!1)return;Qe(),h=u.TOUCH_ROTATE;break;case u1.PAN:if(r.enablePan===!1)return;nt(),h=u.TOUCH_PAN;break;default:h=u.NONE}break;case 2:switch(r.touches.TWO){case u1.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;lt(),h=u.TOUCH_DOLLY_PAN;break;case u1.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ze(),h=u.TOUCH_DOLLY_ROTATE;break;default:h=u.NONE}break;default:h=u.NONE}h!==u.NONE&&r.dispatchEvent(o)}function St(te){switch(Le(te),h){case u.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ce(te),r.update();break;case u.TOUCH_PAN:if(r.enablePan===!1)return;He(te),r.update();break;case u.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;it(te),r.update();break;case u.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Nt(te),r.update();break;default:h=u.NONE}}function It(te){r.enabled!==!1&&te.preventDefault()}function pt(te){H.push(te)}function Ke(te){delete oe[te.pointerId];for(let me=0;me<H.length;me++)if(H[me].pointerId==te.pointerId){H.splice(me,1);return}}function Le(te){let me=oe[te.pointerId];me===void 0&&(me=new jt,oe[te.pointerId]=me),me.set(te.pageX,te.pageY)}function Q(te){const me=te.pointerId===H[0].pointerId?H[1]:H[0];return oe[me.pointerId]}t!==void 0&&this.connect(t),this.update()}}const bx=new Ae;function ag(n,e,t,r,s,o){const l=2*Math.PI*s/4,u=Math.max(o-2*s,0),h=Math.PI/4;bx.copy(e),bx[r]=0,bx.normalize();const f=.5*l/(l+u),g=1-bx.angleTo(n)/h;return Math.sign(bx[t])===1?g*f:u/(l+u)+f+f*(1-g)}class DAe extends pu{constructor(e=1,t=1,r=1,s=2,o=.1){if(s=s*2+1,o=Math.min(e/2,t/2,r/2,o),super(1,1,1,s,s,s),s===1)return;const l=this.toNonIndexed();this.index=null,this.attributes.position=l.attributes.position,this.attributes.normal=l.attributes.normal,this.attributes.uv=l.attributes.uv;const u=new Ae,h=new Ae,f=new Ae(e,t,r).divideScalar(2).subScalar(o),g=this.attributes.position.array,y=this.attributes.normal.array,b=this.attributes.uv.array,S=g.length/6,C=new Ae,M=.5/s;for(let A=0,O=0;A<g.length;A+=3,O+=2)switch(u.fromArray(g,A),h.copy(u),h.x-=Math.sign(h.x)*M,h.y-=Math.sign(h.y)*M,h.z-=Math.sign(h.z)*M,h.normalize(),g[A+0]=f.x*Math.sign(u.x)+h.x*o,g[A+1]=f.y*Math.sign(u.y)+h.y*o,g[A+2]=f.z*Math.sign(u.z)+h.z*o,y[A+0]=h.x,y[A+1]=h.y,y[A+2]=h.z,Math.floor(A/S)){case 0:C.set(1,0,0),b[O+0]=ag(C,h,"z","y",o,r),b[O+1]=1-ag(C,h,"y","z",o,t);break;case 1:C.set(-1,0,0),b[O+0]=1-ag(C,h,"z","y",o,r),b[O+1]=1-ag(C,h,"y","z",o,t);break;case 2:C.set(0,1,0),b[O+0]=1-ag(C,h,"x","z",o,e),b[O+1]=ag(C,h,"z","x",o,r);break;case 3:C.set(0,-1,0),b[O+0]=1-ag(C,h,"x","z",o,e),b[O+1]=1-ag(C,h,"z","x",o,r);break;case 4:C.set(0,0,1),b[O+0]=1-ag(C,h,"x","y",o,e),b[O+1]=1-ag(C,h,"y","x",o,t);break;case 5:C.set(0,0,-1),b[O+0]=ag(C,h,"x","y",o,e),b[O+1]=1-ag(C,h,"y","x",o,t);break}}}const TW=new d0,NA=new Ae;class C4 extends S2{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],r=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(r),this.setAttribute("position",new ar(e,3)),this.setAttribute("uv",new ar(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,r=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),r.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const r=new wR(t,6,1);return this.setAttribute("instanceStart",new Rm(r,3,0)),this.setAttribute("instanceEnd",new Rm(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const r=new wR(t,6,1);return this.setAttribute("instanceColorStart",new Rm(r,3,0)),this.setAttribute("instanceColorEnd",new Rm(r,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new u4(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new d0);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),TW.setFromBufferAttribute(t),this.boundingBox.union(TW))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new y_),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const r=this.boundingSphere.center;this.boundingBox.getCenter(r);let s=0;for(let o=0,l=e.count;o<l;o++)NA.fromBufferAttribute(e,o),s=Math.max(s,r.distanceToSquared(NA)),NA.fromBufferAttribute(t,o),s=Math.max(s,r.distanceToSquared(NA));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class YZ extends C4{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,r=new Float32Array(2*t);for(let s=0;s<t;s+=3)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5];return super.setPositions(r),this}setColors(e){const t=e.length-3,r=new Float32Array(2*t);for(let s=0;s<t;s+=3)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5];return super.setColors(r),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}Xn.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new jt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};op.line={uniforms:LC.merge([Xn.common,Xn.fog,Xn.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class M4 extends xd{constructor(e){super({type:"LineMaterial",uniforms:LC.clone(op.line.uniforms),vertexShader:op.line.vertexShader,fragmentShader:op.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const SW=new Ae,wW=new Ae,Qd=new Ts,Zd=new Ts,j0=new Ts,aN=new Ae,lN=new Qr,If=new S4,EW=new Ae,DA=new d0,PA=new y_,Y0=new Ts;let n_,HP,XZ,z1;function xW(n,e,t){return Y0.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),Y0.multiplyScalar(1/Y0.w),Y0.x=z1/t.width,Y0.y=z1/t.height,Y0.applyMatrix4(n.projectionMatrixInverse),Y0.multiplyScalar(1/Y0.w),Math.abs(Math.max(Y0.x,Y0.y))}function PAe(n,e){for(let t=0,r=HP.count;t<r;t++){If.start.fromBufferAttribute(HP,t),If.end.fromBufferAttribute(XZ,t);const s=new Ae,o=new Ae;n_.distanceSqToSegment(If.start,If.end,o,s),o.distanceTo(s)<z1*.5&&e.push({point:o,pointOnLine:s,distance:n_.origin.distanceTo(o),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function BAe(n,e,t){const r=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,l=n.geometry,u=l.attributes.instanceStart,h=l.attributes.instanceEnd,f=-e.near;n_.at(1,j0),j0.w=1,j0.applyMatrix4(e.matrixWorldInverse),j0.applyMatrix4(r),j0.multiplyScalar(1/j0.w),j0.x*=s.x/2,j0.y*=s.y/2,j0.z=0,aN.copy(j0),lN.multiplyMatrices(e.matrixWorldInverse,o);for(let g=0,y=u.count;g<y;g++){if(Qd.fromBufferAttribute(u,g),Zd.fromBufferAttribute(h,g),Qd.w=1,Zd.w=1,Qd.applyMatrix4(lN),Zd.applyMatrix4(lN),Qd.z>f&&Zd.z>f)continue;if(Qd.z>f){const A=Qd.z-Zd.z,O=(Qd.z-f)/A;Qd.lerp(Zd,O)}else if(Zd.z>f){const A=Zd.z-Qd.z,O=(Zd.z-f)/A;Zd.lerp(Qd,O)}Qd.applyMatrix4(r),Zd.applyMatrix4(r),Qd.multiplyScalar(1/Qd.w),Zd.multiplyScalar(1/Zd.w),Qd.x*=s.x/2,Qd.y*=s.y/2,Zd.x*=s.x/2,Zd.y*=s.y/2,If.start.copy(Qd),If.start.z=0,If.end.copy(Zd),If.end.z=0;const b=If.closestPointToPointParameter(aN,!0);If.at(b,EW);const S=wQ.lerp(Qd.z,Zd.z,b),C=S>=-1&&S<=1,M=aN.distanceTo(EW)<z1*.5;if(C&&M){If.start.fromBufferAttribute(u,g),If.end.fromBufferAttribute(h,g),If.start.applyMatrix4(o),If.end.applyMatrix4(o);const A=new Ae,O=new Ae;n_.distanceSqToSegment(If.start,If.end,O,A),t.push({point:O,pointOnLine:A,distance:n_.origin.distanceTo(O),object:n,face:null,faceIndex:g,uv:null,uv2:null})}}}class KZ extends Un{constructor(e=new C4,t=new M4({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,r=e.attributes.instanceEnd,s=new Float32Array(2*t.count);for(let l=0,u=0,h=t.count;l<h;l++,u+=2)SW.fromBufferAttribute(t,l),wW.fromBufferAttribute(r,l),s[u]=u===0?0:s[u-1],s[u+1]=s[u]+SW.distanceTo(wW);const o=new wR(s,2,1);return e.setAttribute("instanceDistanceStart",new Rm(o,1,0)),e.setAttribute("instanceDistanceEnd",new Rm(o,1,1)),this}raycast(e,t){const r=this.material.worldUnits,s=e.camera;s===null&&!r&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const o=e.params.Line2!==void 0&&e.params.Line2.threshold||0;n_=e.ray;const l=this.matrixWorld,u=this.geometry,h=this.material;z1=h.linewidth+o,HP=u.attributes.instanceStart,XZ=u.attributes.instanceEnd,u.boundingSphere===null&&u.computeBoundingSphere(),PA.copy(u.boundingSphere).applyMatrix4(l);let f;if(r)f=z1*.5;else{const y=Math.max(s.near,PA.distanceToPoint(n_.origin));f=xW(s,y,h.resolution)}if(PA.radius+=f,n_.intersectsSphere(PA)===!1)return;u.boundingBox===null&&u.computeBoundingBox(),DA.copy(u.boundingBox).applyMatrix4(l);let g;if(r)g=z1*.5;else{const y=Math.max(s.near,DA.distanceToPoint(n_.origin));g=xW(s,y,h.resolution)}DA.expandByScalar(g),n_.intersectsBox(DA)!==!1&&(r?PAe(this,t):BAe(this,s,t))}}class FAe extends KZ{constructor(e=new YZ,t=new M4({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const zAe=pe.forwardRef(function({follow:n=!0,lockX:e=!1,lockY:t=!1,lockZ:r=!1,...s},o){const l=pe.useRef();return Ym(({camera:u})=>{if(!n||!l.current)return;const h=l.current.rotation.clone();u.getWorldQuaternion(l.current.quaternion),e&&(l.current.rotation.x=h.x),t&&(l.current.rotation.y=h.y),r&&(l.current.rotation.z=h.z)}),un("group",{ref:$4([l,o]),...s})}),UAe=pe.forwardRef(function({points:n,color:e="black",vertexColors:t,linewidth:r,lineWidth:s,segments:o,dashed:l,...u},h){const f=nf(S=>S.size),g=pe.useMemo(()=>o?new KZ:new FAe,[o]),[y]=pe.useState(()=>new M4),b=pe.useMemo(()=>{const S=o?new C4:new YZ,C=n.map(M=>{const A=Array.isArray(M);return M instanceof Ae?[M.x,M.y,M.z]:M instanceof jt?[M.x,M.y,0]:A&&M.length===3?[M[0],M[1],M[2]]:A&&M.length===2?[M[0],M[1],0]:M});if(S.setPositions(C.flat()),t){const M=t.map(A=>A instanceof Bn?A.toArray():A);S.setColors(M.flat())}return S},[n,o,t]);return pe.useLayoutEffect(()=>{g.computeLineDistances()},[n,g]),pe.useLayoutEffect(()=>{l?y.defines.USE_DASH="":delete y.defines.USE_DASH,y.needsUpdate=!0},[l,y]),pe.useEffect(()=>()=>b.dispose(),[b]),Bh("primitive",{object:g,ref:h,...u,children:[un("primitive",{object:b,attach:"geometry"}),un("primitive",{object:y,attach:"material",color:e,vertexColors:!!t,resolution:[f.width,f.height],linewidth:r??s,dashed:l,...u})]})});function HAe(){var n=Object.create(null);function e(s,o){var l=s.id,u=s.name,h=s.dependencies;h===void 0&&(h=[]);var f=s.init;f===void 0&&(f=function(){});var g=s.getTransferables;if(g===void 0&&(g=null),!n[l])try{h=h.map(function(b){return b&&b.isWorkerModule&&(e(b,function(S){if(S instanceof Error)throw S}),b=n[b.id].value),b}),f=r("<"+u+">.init",f),g&&(g=r("<"+u+">.getTransferables",g));var y=null;typeof f=="function"?y=f.apply(void 0,h):console.error("worker module init function failed to rehydrate"),n[l]={id:l,value:y,getTransferables:g},o(y)}catch(b){b&&b.noLog||console.error(b),o(b)}}function t(s,o){var l,u=s.id,h=s.args;(!n[u]||typeof n[u].value!="function")&&o(new Error("Worker module "+u+": not found or its 'init' did not return a function"));try{var f=(l=n[u]).value.apply(l,h);f&&typeof f.then=="function"?f.then(g,function(y){return o(y instanceof Error?y:new Error(""+y))}):g(f)}catch(y){o(y)}function g(y){try{var b=n[u].getTransferables&&n[u].getTransferables(y);(!b||!Array.isArray(b)||!b.length)&&(b=void 0),o(y,b)}catch(S){console.error(S),o(S)}}}function r(s,o){var l=void 0;self.troikaDefine=function(h){return l=h};var u=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+o+`
)`],{type:"application/javascript"}));try{importScripts(u)}catch(h){console.error(h)}return URL.revokeObjectURL(u),delete self.troikaDefine,l}self.addEventListener("message",function(s){var o=s.data,l=o.messageId,u=o.action,h=o.data;try{u==="registerModule"&&e(h,function(f){f instanceof Error?postMessage({messageId:l,success:!1,error:f.message}):postMessage({messageId:l,success:!0,result:{isCallable:typeof f=="function"}})}),u==="callModule"&&t(h,function(f,g){f instanceof Error?postMessage({messageId:l,success:!1,error:f.message}):postMessage({messageId:l,success:!0,result:f},g||void 0)})}catch(f){postMessage({messageId:l,success:!1,error:f.stack})}})}function GAe(n){var e=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return e._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,r=n.init;t=Array.isArray(t)?t.map(function(o){return o&&o._getInitResult?o._getInitResult():o}):[];var s=Promise.all(t).then(function(o){return r.apply(null,o)});return e._getInitResult=function(){return s},s},e}var JZ=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u"&&!1||console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return JZ=function(){return n},n},WAe=0,VAe=0,uN=!1,s$=Object.create(null),o$=Object.create(null),GP=Object.create(null);function UC(n){if((!n||typeof n.init!="function")&&!uN)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,r=n.getTransferables,s=n.workerId;if(!JZ())return GAe(n);s==null&&(s="#default");var o="workerModule"+ ++WAe,l=n.name||o,u=null;e=e&&e.map(function(f){return typeof f=="function"&&!f.workerModuleData&&(uN=!0,f=UC({workerId:s,name:"<"+l+"> function dependency: "+f.name,init:`function(){return (
`+$I(f)+`
)}`}),uN=!1),f&&f.workerModuleData&&(f=f.workerModuleData),f});function h(){for(var f=[],g=arguments.length;g--;)f[g]=arguments[g];if(!u){u=$W(s,"registerModule",h.workerModuleData);var y=function(){u=null,o$[s].delete(y)};(o$[s]||(o$[s]=new Set)).add(y)}return u.then(function(b){var S=b.isCallable;if(S)return $W(s,"callModule",{id:o,args:f});throw new Error("Worker module function was called but `init` did not return a callable function")})}return h.workerModuleData={isWorkerModule:!0,id:o,name:l,dependencies:e,init:$I(t),getTransferables:r&&$I(r)},h}function jAe(n){o$[n]&&o$[n].forEach(function(e){e()}),s$[n]&&(s$[n].terminate(),delete s$[n])}function $I(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function YAe(n){var e=s$[n];if(!e){var t=$I(HAe);e=s$[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var s=r.data,o=s.messageId,l=GP[o];if(!l)throw new Error("WorkerModule response with empty or unknown messageId");delete GP[o],l(s)}}return e}function $W(n,e,t){return new Promise(function(r,s){var o=++VAe;GP[o]=function(l){l.success?r(l.result):s(new Error("Error in worker "+e+" call: "+l.error))},YAe(n).postMessage({messageId:o,action:e,data:t})})}function qZ(){var n=function(e){function t(re,ie,fe,Te,Fe,Ie,qe,Re){var Qe=1-qe;Re.x=Qe*Qe*re+2*Qe*qe*fe+qe*qe*Fe,Re.y=Qe*Qe*ie+2*Qe*qe*Te+qe*qe*Ie}function r(re,ie,fe,Te,Fe,Ie,qe,Re,Qe,nt){var ft=1-Qe;nt.x=ft*ft*ft*re+3*ft*ft*Qe*fe+3*ft*Qe*Qe*Fe+Qe*Qe*Qe*qe,nt.y=ft*ft*ft*ie+3*ft*ft*Qe*Te+3*ft*Qe*Qe*Ie+Qe*Qe*Qe*Re}function s(re,ie){for(var fe=/([MLQCZ])([^MLQCZ]*)/g,Te,Fe,Ie,qe,Re;Te=fe.exec(re);){var Qe=Te[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(nt){return parseFloat(nt)});switch(Te[1]){case"M":qe=Fe=Qe[0],Re=Ie=Qe[1];break;case"L":(Qe[0]!==qe||Qe[1]!==Re)&&ie("L",qe,Re,qe=Qe[0],Re=Qe[1]);break;case"Q":{ie("Q",qe,Re,qe=Qe[2],Re=Qe[3],Qe[0],Qe[1]);break}case"C":{ie("C",qe,Re,qe=Qe[4],Re=Qe[5],Qe[0],Qe[1],Qe[2],Qe[3]);break}case"Z":(qe!==Fe||Re!==Ie)&&ie("L",qe,Re,Fe,Ie);break}}}function o(re,ie,fe){fe===void 0&&(fe=16);var Te={x:0,y:0};s(re,function(Fe,Ie,qe,Re,Qe,nt,ft,lt,ze){switch(Fe){case"L":ie(Ie,qe,Re,Qe);break;case"Q":{for(var Ce=Ie,He=qe,rt=1;rt<fe;rt++)t(Ie,qe,nt,ft,Re,Qe,rt/(fe-1),Te),ie(Ce,He,Te.x,Te.y),Ce=Te.x,He=Te.y;break}case"C":{for(var it=Ie,Nt=qe,kt=1;kt<fe;kt++)r(Ie,qe,nt,ft,lt,ze,Re,Qe,kt/(fe-1),Te),ie(it,Nt,Te.x,Te.y),it=Te.x,Nt=Te.y;break}}})}var l="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",u="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",h=new WeakMap,f={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function g(re,ie){var fe=re.getContext?re.getContext("webgl",f):re,Te=h.get(fe);if(!Te){let ft=function(it){var Nt=Ie[it];if(!Nt&&(Nt=Ie[it]=fe.getExtension(it),!Nt))throw new Error(it+" not supported");return Nt},lt=function(it,Nt){var kt=fe.createShader(Nt);return fe.shaderSource(kt,it),fe.compileShader(kt),kt},ze=function(it,Nt,kt,vt){if(!qe[it]){var Mt={},At={},mt=fe.createProgram();fe.attachShader(mt,lt(Nt,fe.VERTEX_SHADER)),fe.attachShader(mt,lt(kt,fe.FRAGMENT_SHADER)),fe.linkProgram(mt),qe[it]={program:mt,transaction:function(xe){fe.useProgram(mt),xe({setUniform:function(se,$e){for(var ht=[],St=arguments.length-2;St-- >0;)ht[St]=arguments[St+2];var It=At[$e]||(At[$e]=fe.getUniformLocation(mt,$e));fe["uniform"+se].apply(fe,[It].concat(ht))},setAttribute:function(se,$e,ht,St,It){var pt=Mt[se];pt||(pt=Mt[se]={buf:fe.createBuffer(),loc:fe.getAttribLocation(mt,se),data:null}),fe.bindBuffer(fe.ARRAY_BUFFER,pt.buf),fe.vertexAttribPointer(pt.loc,$e,fe.FLOAT,!1,0,0),fe.enableVertexAttribArray(pt.loc),Fe?fe.vertexAttribDivisor(pt.loc,St):ft("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(pt.loc,St),It!==pt.data&&(fe.bufferData(fe.ARRAY_BUFFER,It,ht),pt.data=It)}})}}}qe[it].transaction(vt)},Ce=function(it,Nt){Qe++;try{fe.activeTexture(fe.TEXTURE0+Qe);var kt=Re[it];kt||(kt=Re[it]=fe.createTexture(),fe.bindTexture(fe.TEXTURE_2D,kt),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MIN_FILTER,fe.NEAREST),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MAG_FILTER,fe.NEAREST)),fe.bindTexture(fe.TEXTURE_2D,kt),Nt(kt,Qe)}finally{Qe--}},He=function(it,Nt,kt){var vt=fe.createFramebuffer();nt.push(vt),fe.bindFramebuffer(fe.FRAMEBUFFER,vt),fe.activeTexture(fe.TEXTURE0+Nt),fe.bindTexture(fe.TEXTURE_2D,it),fe.framebufferTexture2D(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_2D,it,0);try{kt(vt)}finally{fe.deleteFramebuffer(vt),fe.bindFramebuffer(fe.FRAMEBUFFER,nt[--nt.length-1]||null)}},rt=function(){Ie={},qe={},Re={},Qe=-1,nt.length=0};var Fe=typeof WebGL2RenderingContext<"u"&&fe instanceof WebGL2RenderingContext,Ie={},qe={},Re={},Qe=-1,nt=[];fe.canvas.addEventListener("webglcontextlost",function(it){rt(),it.preventDefault()},!1),h.set(fe,Te={gl:fe,isWebGL2:Fe,getExtension:ft,withProgram:ze,withTexture:Ce,withTextureFramebuffer:He,handleContextLoss:rt})}ie(Te)}function y(re,ie,fe,Te,Fe,Ie,qe,Re){qe===void 0&&(qe=15),Re===void 0&&(Re=null),g(re,function(Qe){var nt=Qe.gl,ft=Qe.withProgram,lt=Qe.withTexture;lt("copy",function(ze,Ce){nt.texImage2D(nt.TEXTURE_2D,0,nt.RGBA,Fe,Ie,0,nt.RGBA,nt.UNSIGNED_BYTE,ie),ft("copy",l,u,function(He){var rt=He.setUniform,it=He.setAttribute;it("aUV",2,nt.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),rt("1i","image",Ce),nt.bindFramebuffer(nt.FRAMEBUFFER,Re||null),nt.disable(nt.BLEND),nt.colorMask(qe&8,qe&4,qe&2,qe&1),nt.viewport(fe,Te,Fe,Ie),nt.scissor(fe,Te,Fe,Ie),nt.drawArrays(nt.TRIANGLES,0,3)})})})}function b(re,ie,fe){var Te=re.width,Fe=re.height;g(re,function(Ie){var qe=Ie.gl,Re=new Uint8Array(Te*Fe*4);qe.readPixels(0,0,Te,Fe,qe.RGBA,qe.UNSIGNED_BYTE,Re),re.width=ie,re.height=fe,y(qe,Re,0,0,Te,Fe)})}var S=Object.freeze({__proto__:null,withWebGLContext:g,renderImageData:y,resizeWebGLCanvasWithoutClearing:b});function C(re,ie,fe,Te,Fe,Ie){Ie===void 0&&(Ie=1);var qe=new Uint8Array(re*ie),Re=Te[2]-Te[0],Qe=Te[3]-Te[1],nt=[];o(fe,function(it,Nt,kt,vt){nt.push({x1:it,y1:Nt,x2:kt,y2:vt,minX:Math.min(it,kt),minY:Math.min(Nt,vt),maxX:Math.max(it,kt),maxY:Math.max(Nt,vt)})}),nt.sort(function(it,Nt){return it.maxX-Nt.maxX});for(var ft=0;ft<re;ft++)for(var lt=0;lt<ie;lt++){var ze=He(Te[0]+Re*(ft+.5)/re,Te[1]+Qe*(lt+.5)/ie),Ce=Math.pow(1-Math.abs(ze)/Fe,Ie)/2;ze<0&&(Ce=1-Ce),Ce=Math.max(0,Math.min(255,Math.round(Ce*255))),qe[lt*re+ft]=Ce}return qe;function He(it,Nt){for(var kt=1/0,vt=1/0,Mt=nt.length;Mt--;){var At=nt[Mt];if(At.maxX+vt<=it)break;if(it+vt>At.minX&&Nt-vt<At.maxY&&Nt+vt>At.minY){var mt=O(it,Nt,At.x1,At.y1,At.x2,At.y2);mt<kt&&(kt=mt,vt=Math.sqrt(kt))}}return rt(it,Nt)&&(vt=-vt),vt}function rt(it,Nt){for(var kt=0,vt=nt.length;vt--;){var Mt=nt[vt];if(Mt.maxX<=it)break;var At=Mt.y1>Nt!=Mt.y2>Nt&&it<(Mt.x2-Mt.x1)*(Nt-Mt.y1)/(Mt.y2-Mt.y1)+Mt.x1;At&&(kt+=Mt.y1<Mt.y2?1:-1)}return kt!==0}}function M(re,ie,fe,Te,Fe,Ie,qe,Re,Qe,nt){Ie===void 0&&(Ie=1),Re===void 0&&(Re=0),Qe===void 0&&(Qe=0),nt===void 0&&(nt=0),A(re,ie,fe,Te,Fe,Ie,qe,null,Re,Qe,nt)}function A(re,ie,fe,Te,Fe,Ie,qe,Re,Qe,nt,ft){Ie===void 0&&(Ie=1),Qe===void 0&&(Qe=0),nt===void 0&&(nt=0),ft===void 0&&(ft=0);for(var lt=C(re,ie,fe,Te,Fe,Ie),ze=new Uint8Array(lt.length*4),Ce=0;Ce<lt.length;Ce++)ze[Ce*4+ft]=lt[Ce];y(qe,ze,Qe,nt,re,ie,1<<3-ft,Re)}function O(re,ie,fe,Te,Fe,Ie){var qe=Fe-fe,Re=Ie-Te,Qe=qe*qe+Re*Re,nt=Qe?Math.max(0,Math.min(1,((re-fe)*qe+(ie-Te)*Re)/Qe)):0,ft=re-(fe+nt*qe),lt=ie-(Te+nt*Re);return ft*ft+lt*lt}var L=Object.freeze({__proto__:null,generate:C,generateIntoCanvas:M,generateIntoFramebuffer:A}),B="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",D="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",z="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",U=new Float32Array([0,0,2,0,0,2]),V=null,H=!1,oe={},le=new WeakMap;function Z(re){if(!H&&!ue(re))throw new Error("WebGL generation not supported")}function q(re,ie,fe,Te,Fe,Ie,qe){if(Ie===void 0&&(Ie=1),qe===void 0&&(qe=null),!qe&&(qe=V,!qe)){var Re=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!Re)throw new Error("OffscreenCanvas or DOM canvas not supported");qe=V=Re.getContext("webgl",{depth:!1})}Z(qe);var Qe=new Uint8Array(re*ie*4);g(qe,function(ze){var Ce=ze.gl,He=ze.withTexture,rt=ze.withTextureFramebuffer;He("readable",function(it,Nt){Ce.texImage2D(Ce.TEXTURE_2D,0,Ce.RGBA,re,ie,0,Ce.RGBA,Ce.UNSIGNED_BYTE,null),rt(it,Nt,function(kt){ae(re,ie,fe,Te,Fe,Ie,Ce,kt,0,0,0),Ce.readPixels(0,0,re,ie,Ce.RGBA,Ce.UNSIGNED_BYTE,Qe)})})});for(var nt=new Uint8Array(re*ie),ft=0,lt=0;ft<Qe.length;ft+=4)nt[lt++]=Qe[ft];return nt}function he(re,ie,fe,Te,Fe,Ie,qe,Re,Qe,nt){Ie===void 0&&(Ie=1),Re===void 0&&(Re=0),Qe===void 0&&(Qe=0),nt===void 0&&(nt=0),ae(re,ie,fe,Te,Fe,Ie,qe,null,Re,Qe,nt)}function ae(re,ie,fe,Te,Fe,Ie,qe,Re,Qe,nt,ft){Ie===void 0&&(Ie=1),Qe===void 0&&(Qe=0),nt===void 0&&(nt=0),ft===void 0&&(ft=0),Z(qe);var lt=[];o(fe,function(ze,Ce,He,rt){lt.push(ze,Ce,He,rt)}),lt=new Float32Array(lt),g(qe,function(ze){var Ce=ze.gl,He=ze.isWebGL2,rt=ze.getExtension,it=ze.withProgram,Nt=ze.withTexture,kt=ze.withTextureFramebuffer,vt=ze.handleContextLoss;if(Nt("rawDistances",function(Mt,At){(re!==Mt._lastWidth||ie!==Mt._lastHeight)&&Ce.texImage2D(Ce.TEXTURE_2D,0,Ce.RGBA,Mt._lastWidth=re,Mt._lastHeight=ie,0,Ce.RGBA,Ce.UNSIGNED_BYTE,null),it("main",B,D,function(mt){var xe=mt.setAttribute,se=mt.setUniform,$e=!He&&rt("ANGLE_instanced_arrays"),ht=!He&&rt("EXT_blend_minmax");xe("aUV",2,Ce.STATIC_DRAW,0,U),xe("aLineSegment",4,Ce.DYNAMIC_DRAW,1,lt),se.apply(void 0,["4f","uGlyphBounds"].concat(Te)),se("1f","uMaxDistance",Fe),se("1f","uExponent",Ie),kt(Mt,At,function(St){Ce.enable(Ce.BLEND),Ce.colorMask(!0,!0,!0,!0),Ce.viewport(0,0,re,ie),Ce.scissor(0,0,re,ie),Ce.blendFunc(Ce.ONE,Ce.ONE),Ce.blendEquationSeparate(Ce.FUNC_ADD,He?Ce.MAX:ht.MAX_EXT),Ce.clear(Ce.COLOR_BUFFER_BIT),He?Ce.drawArraysInstanced(Ce.TRIANGLES,0,3,lt.length/4):$e.drawArraysInstancedANGLE(Ce.TRIANGLES,0,3,lt.length/4)})}),it("post",l,z,function(mt){mt.setAttribute("aUV",2,Ce.STATIC_DRAW,0,U),mt.setUniform("1i","tex",At),Ce.bindFramebuffer(Ce.FRAMEBUFFER,Re),Ce.disable(Ce.BLEND),Ce.colorMask(ft===0,ft===1,ft===2,ft===3),Ce.viewport(Qe,nt,re,ie),Ce.scissor(Qe,nt,re,ie),Ce.drawArrays(Ce.TRIANGLES,0,3)})}),Ce.isContextLost())throw vt(),new Error("webgl context lost")})}function ue(re){var ie=!re||re===V?oe:re.canvas||re,fe=le.get(ie);if(fe===void 0){H=!0;var Te=null;try{var Fe=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],Ie=q(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,re);fe=Ie&&Fe.length===Ie.length&&Ie.every(function(qe,Re){return qe===Fe[Re]}),fe||(Te="bad trial run results",console.info(Fe,Ie))}catch(qe){fe=!1,Te=qe.message}Te&&console.warn("WebGL SDF generation not supported:",Te),H=!1,le.set(ie,fe)}return fe}var ge=Object.freeze({__proto__:null,generate:q,generateIntoCanvas:he,generateIntoFramebuffer:ae,isSupported:ue});function we(re,ie,fe,Te,Fe,Ie){Fe===void 0&&(Fe=Math.max(Te[2]-Te[0],Te[3]-Te[1])/2),Ie===void 0&&(Ie=1);try{return q.apply(ge,arguments)}catch(qe){return console.info("WebGL SDF generation failed, falling back to JS",qe),C.apply(L,arguments)}}function J(re,ie,fe,Te,Fe,Ie,qe,Re,Qe,nt){Fe===void 0&&(Fe=Math.max(Te[2]-Te[0],Te[3]-Te[1])/2),Ie===void 0&&(Ie=1),Re===void 0&&(Re=0),Qe===void 0&&(Qe=0),nt===void 0&&(nt=0);try{return he.apply(ge,arguments)}catch(ft){return console.info("WebGL SDF generation failed, falling back to JS",ft),M.apply(L,arguments)}}return e.forEachPathCommand=s,e.generate=we,e.generateIntoCanvas=J,e.javascript=L,e.pathToLineSegments=o,e.webgl=ge,e.webglUtils=S,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function XAe(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},s={};r.L=1,s[1]="L",Object.keys(t).forEach(function(vt,Mt){r[vt]=1<<Mt+1,s[r[vt]]=vt}),Object.freeze(r);var o=r.LRI|r.RLI|r.FSI,l=r.L|r.R|r.AL,u=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,h=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,f=r.S|r.WS|r.B|o|r.PDI|h,g=null;function y(){if(!g){g=new Map;var vt=function(At){if(t.hasOwnProperty(At)){var mt=0;t[At].split(",").forEach(function(xe){var se=xe.split("+"),$e=se[0],ht=se[1];$e=parseInt($e,36),ht=ht?parseInt(ht,36):0,g.set(mt+=$e,r[At]);for(var St=0;St<ht;St++)g.set(++mt,r[At])})}};for(var Mt in t)vt(Mt)}}function b(vt){return y(),g.get(vt.codePointAt(0))||r.L}function S(vt){return s[b(vt)]}var C={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function M(vt,Mt){var At=36,mt=0,xe=new Map,se=Mt&&new Map,$e;return vt.split(",").forEach(function ht(St){if(St.indexOf("+")!==-1)for(var It=+St;It--;)ht($e);else{$e=St;var pt=St.split(">"),Ke=pt[0],Le=pt[1];Ke=String.fromCodePoint(mt+=parseInt(Ke,At)),Le=String.fromCodePoint(mt+=parseInt(Le,At)),xe.set(Ke,Le),Mt&&se.set(Le,Ke)}}),{map:xe,reverseMap:se}}var A,O,L;function B(){if(!A){var vt=M(C.pairs,!0),Mt=vt.map,At=vt.reverseMap;A=Mt,O=At,L=M(C.canonical,!1).map}}function D(vt){return B(),A.get(vt)||null}function z(vt){return B(),O.get(vt)||null}function U(vt){return B(),L.get(vt)||null}var V=r.L,H=r.R,oe=r.EN,le=r.ES,Z=r.ET,q=r.AN,he=r.CS,ae=r.B,ue=r.S,ge=r.ON,we=r.BN,J=r.NSM,re=r.AL,ie=r.LRO,fe=r.RLO,Te=r.LRE,Fe=r.RLE,Ie=r.PDF,qe=r.LRI,Re=r.RLI,Qe=r.FSI,nt=r.PDI;function ft(vt,Mt){for(var At=125,mt=new Uint32Array(vt.length),xe=0;xe<vt.length;xe++)mt[xe]=b(vt[xe]);var se=new Map;function $e(Bi,Ci){var Vn=mt[Bi];mt[Bi]=Ci,se.set(Vn,se.get(Vn)-1),Vn&u&&se.set(u,se.get(u)-1),se.set(Ci,(se.get(Ci)||0)+1),Ci&u&&se.set(u,(se.get(u)||0)+1)}for(var ht=new Uint8Array(vt.length),St=new Map,It=[],pt=null,Ke=0;Ke<vt.length;Ke++)pt||It.push(pt={start:Ke,end:vt.length-1,level:Mt==="rtl"?1:Mt==="ltr"?0:$o(Ke,!1)}),mt[Ke]&ae&&(pt.end=Ke,pt=null);for(var Le=Fe|Te|fe|ie|o|nt|Ie|ae,Q=function(Bi){return Bi+(Bi&1?1:2)},te=function(Bi){return Bi+(Bi&1?2:1)},me=0;me<It.length;me++){pt=It[me];var ke=[{_level:pt.level,_override:0,_isolate:0}],Xe=void 0,Wt=0,Ge=0,tn=0;se.clear();for(var _t=pt.start;_t<=pt.end;_t++){var Jt=mt[_t];if(Xe=ke[ke.length-1],se.set(Jt,(se.get(Jt)||0)+1),Jt&u&&se.set(u,(se.get(u)||0)+1),Jt&Le)if(Jt&(Fe|Te)){ht[_t]=Xe._level;var Kt=(Jt===Fe?te:Q)(Xe._level);Kt<=At&&!Wt&&!Ge?ke.push({_level:Kt,_override:0,_isolate:0}):Wt||Ge++}else if(Jt&(fe|ie)){ht[_t]=Xe._level;var On=(Jt===fe?te:Q)(Xe._level);On<=At&&!Wt&&!Ge?ke.push({_level:On,_override:Jt&fe?H:V,_isolate:0}):Wt||Ge++}else if(Jt&o){Jt&Qe&&(Jt=$o(_t+1,!0)===1?Re:qe),ht[_t]=Xe._level,Xe._override&&$e(_t,Xe._override);var si=(Jt===Re?te:Q)(Xe._level);si<=At&&Wt===0&&Ge===0?(tn++,ke.push({_level:si,_override:0,_isolate:1,_isolInitIndex:_t})):Wt++}else if(Jt&nt){if(Wt>0)Wt--;else if(tn>0){for(Ge=0;!ke[ke.length-1]._isolate;)ke.pop();var Pr=ke[ke.length-1]._isolInitIndex;Pr!=null&&(St.set(Pr,_t),St.set(_t,Pr)),ke.pop(),tn--}Xe=ke[ke.length-1],ht[_t]=Xe._level,Xe._override&&$e(_t,Xe._override)}else Jt&Ie?(Wt===0&&(Ge>0?Ge--:!Xe._isolate&&ke.length>1&&(ke.pop(),Xe=ke[ke.length-1])),ht[_t]=Xe._level):Jt&ae&&(ht[_t]=pt.level);else ht[_t]=Xe._level,Xe._override&&Jt!==we&&$e(_t,Xe._override)}for(var Ei=[],$r=null,gr=pt.start;gr<=pt.end;gr++){var ne=mt[gr];if(!(ne&h)){var Se=ht[gr],We=ne&o,ot=ne===nt;$r&&Se===$r._level?($r._end=gr,$r._endsWithIsolInit=We):Ei.push($r={_start:gr,_end:gr,_level:Se,_startsWithPDI:ot,_endsWithIsolInit:We})}}for(var zt=[],sn=0;sn<Ei.length;sn++){var Nn=Ei[sn];if(!Nn._startsWithPDI||Nn._startsWithPDI&&!St.has(Nn._start)){for(var De=[$r=Nn],gt=void 0;$r&&$r._endsWithIsolInit&&(gt=St.get($r._end))!=null;)for(var Ct=sn+1;Ct<Ei.length;Ct++)if(Ei[Ct]._start===gt){De.push($r=Ei[Ct]);break}for(var bt=[],Vt=0;Vt<De.length;Vt++)for(var Wn=De[Vt],rr=Wn._start;rr<=Wn._end;rr++)bt.push(rr);for(var _r=ht[bt[0]],Cr=pt.level,oi=bt[0]-1;oi>=0;oi--)if(!(mt[oi]&h)){Cr=ht[oi];break}var Br=bt[bt.length-1],Yr=ht[Br],Ss=pt.level;if(!(mt[Br]&o)){for(var Oa=Br+1;Oa<=pt.end;Oa++)if(!(mt[Oa]&h)){Ss=ht[Oa];break}}zt.push({_seqIndices:bt,_sosType:Math.max(Cr,_r)%2?H:V,_eosType:Math.max(Ss,Yr)%2?H:V})}}for(var xo=0;xo<zt.length;xo++){var Yl=zt[xo],nn=Yl._seqIndices,Rr=Yl._sosType,el=Yl._eosType;if(se.get(J))for(var La=0;La<nn.length;La++){var Fs=nn[La];if(mt[Fs]&J){for(var zs=Rr,Di=La-1;Di>=0;Di--)if(!(mt[nn[Di]]&h)){zs=mt[nn[Di]];break}$e(Fs,zs&(o|nt)?ge:zs)}}if(se.get(oe))for(var kr=0;kr<nn.length;kr++){var An=nn[kr];if(mt[An]&oe)for(var Ir=kr-1;Ir>=-1;Ir--){var Gr=Ir===-1?Rr:mt[nn[Ir]];if(Gr&l){Gr===re&&$e(An,q);break}}}if(se.get(re))for(var yr=0;yr<nn.length;yr++){var Pi=nn[yr];mt[Pi]&re&&$e(Pi,H)}if(se.get(le)||se.get(he))for(var ws=1;ws<nn.length-1;ws++){var fi=nn[ws];if(mt[fi]&(le|he)){for(var gs=0,tl=0,Na=ws-1;Na>=0&&(gs=mt[nn[Na]],!!(gs&h));Na--);for(var dc=ws+1;dc<nn.length&&(tl=mt[nn[dc]],!!(tl&h));dc++);gs===tl&&(mt[fi]===le?gs===oe:gs&(oe|q))&&$e(fi,gs)}}if(se.get(oe))for(var fc=0;fc<nn.length;fc++){var Xs=nn[fc];if(mt[Xs]&oe){for(var qo=fc-1;qo>=0&&mt[nn[qo]]&(Z|h);qo--)$e(nn[qo],oe);for(var Xl=fc+1;Xl<nn.length&&mt[nn[Xl]]&(Z|h);Xl++)$e(nn[Xl],oe)}}if(se.get(Z)||se.get(le)||se.get(he))for(var gu=0;gu<nn.length;gu++){var mh=nn[gu];if(mt[mh]&(Z|le|he)){$e(mh,ge);for(var Qo=gu-1;Qo>=0&&mt[nn[Qo]]&h;Qo--)$e(nn[Qo],ge);for(var vr=gu+1;vr<nn.length&&mt[nn[vr]]&h;vr++)$e(nn[vr],ge)}}if(se.get(oe))for(var xi=0,Dc=Rr;xi<nn.length;xi++){var gh=nn[xi],Pc=mt[gh];Pc&oe?Dc===V&&$e(gh,V):Pc&l&&(Dc=Pc)}if(se.get(u)){var El=H|oe|q,_u=El|V,xl=[];{for(var $l=[],br=0;br<nn.length;br++)if(mt[nn[br]]&u){var Tr=vt[nn[br]],Kl=void 0;if(D(Tr)!==null)if($l.length<63)$l.push({char:Tr,seqIndex:br});else break;else if((Kl=z(Tr))!==null)for(var nl=$l.length-1;nl>=0;nl--){var rl=$l[nl].char;if(rl===Kl||rl===z(U(Tr))||D(U(rl))===Tr){xl.push([$l[nl].seqIndex,br]),$l.length=nl;break}}}xl.sort(function(Bi,Ci){return Bi[0]-Ci[0]})}for(var vu=0;vu<xl.length;vu++){for(var qi=xl[vu],_s=qi[0],il=qi[1],Cd=!1,io=0,zu=_s+1;zu<il;zu++){var ca=nn[zu];if(mt[ca]&_u){Cd=!0;var yu=mt[ca]&El?H:V;if(yu===sl(ca)){io=yu;break}}}if(Cd&&!io){io=Rr;for(var or=_s-1;or>=0;or--){var Gn=nn[or];if(mt[Gn]&_u){var Es=mt[Gn]&El?H:V;Es!==sl(Gn)?io=Es:io=sl(Gn);break}}}if(io){if(mt[nn[_s]]=mt[nn[il]]=io,io!==sl(nn[_s])){for(var so=_s+1;so<nn.length;so++)if(!(mt[nn[so]]&h)){b(vt[nn[so]])&J&&(mt[nn[so]]=io);break}}if(io!==sl(nn[il])){for(var Uu=il+1;Uu<nn.length;Uu++)if(!(mt[nn[Uu]]&h)){b(vt[nn[Uu]])&J&&(mt[nn[Uu]]=io);break}}}}for(var bu=0;bu<nn.length;bu++)if(mt[nn[bu]]&u){for(var _h=bu,Da=bu,ha=Rr,Hu=bu-1;Hu>=0;Hu--)if(mt[nn[Hu]]&h)_h=Hu;else{ha=mt[nn[Hu]]&El?H:V;break}for(var wr=el,Rs=bu+1;Rs<nn.length;Rs++)if(mt[nn[Rs]]&(u|h))Da=Rs;else{wr=mt[nn[Rs]]&El?H:V;break}for(var bi=_h;bi<=Da;bi++)mt[nn[bi]]=ha===wr?ha:sl(nn[bi]);bu=Da}}}for(var $i=pt.start;$i<=pt.end;$i++){var da=ht[$i],Zr=mt[$i];if(da&1?Zr&(V|oe|q)&&ht[$i]++:Zr&H?ht[$i]++:Zr&(q|oe)&&(ht[$i]+=2),Zr&h&&(ht[$i]=$i===0?pt.level:ht[$i-1]),$i===pt.end||b(vt[$i])&(ue|ae))for(var Tu=$i;Tu>=0&&b(vt[Tu])&f;Tu--)ht[Tu]=pt.level}}return{levels:ht,paragraphs:It};function $o(Bi,Ci){for(var Vn=Bi;Vn<vt.length;Vn++){var Mi=mt[Vn];if(Mi&(H|re))return 1;if(Mi&(ae|V)||Ci&&Mi===nt)return 0;if(Mi&o){var Xr=Su(Vn);Vn=Xr===-1?vt.length:Xr}}return 0}function Su(Bi){for(var Ci=1,Vn=Bi+1;Vn<vt.length;Vn++){var Mi=mt[Vn];if(Mi&ae)break;if(Mi&nt){if(--Ci===0)return Vn}else Mi&o&&Ci++}return-1}function sl(Bi){return ht[Bi]&1?H:V}}var lt="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",ze;function Ce(){if(!ze){var vt=M(lt,!0),Mt=vt.map,At=vt.reverseMap;At.forEach(function(mt,xe){Mt.set(xe,mt)}),ze=Mt}}function He(vt){return Ce(),ze.get(vt)||null}function rt(vt,Mt,At,mt){var xe=vt.length;At=Math.max(0,At==null?0:+At),mt=Math.min(xe-1,mt==null?xe-1:+mt);for(var se=new Map,$e=At;$e<=mt;$e++)if(Mt[$e]&1){var ht=He(vt[$e]);ht!==null&&se.set($e,ht)}return se}function it(vt,Mt,At,mt){var xe=vt.length;At=Math.max(0,At==null?0:+At),mt=Math.min(xe-1,mt==null?xe-1:+mt);var se=[];return Mt.paragraphs.forEach(function($e){var ht=Math.max(At,$e.start),St=Math.min(mt,$e.end);if(ht<St){for(var It=Mt.levels.slice(ht,St+1),pt=St;pt>=ht&&b(vt[pt])&f;pt--)It[pt]=$e.level;for(var Ke=$e.level,Le=1/0,Q=0;Q<It.length;Q++){var te=It[Q];te>Ke&&(Ke=te),te<Le&&(Le=te|1)}for(var me=Ke;me>=Le;me--)for(var ke=0;ke<It.length;ke++)if(It[ke]>=me){for(var Xe=ke;ke+1<It.length&&It[ke+1]>=me;)ke++;ke>Xe&&se.push([Xe+At,ke+At])}}}),se}function Nt(vt,Mt,At,mt){var xe=kt(vt,Mt,At,mt),se=[].concat(vt);return xe.forEach(function($e,ht){se[ht]=(Mt.levels[$e]&1?He(vt[$e]):null)||vt[$e]}),se.join("")}function kt(vt,Mt,At,mt){for(var xe=it(vt,Mt,At,mt),se=[],$e=0;$e<vt.length;$e++)se[$e]=$e;return xe.forEach(function(ht){for(var St=ht[0],It=ht[1],pt=se.slice(St,It+1),Ke=pt.length;Ke--;)se[It-Ke]=pt[Ke]}),se}return e.closingToOpeningBracket=z,e.getBidiCharType=b,e.getBidiCharTypeName=S,e.getCanonicalBracket=U,e.getEmbeddingLevels=ft,e.getMirroredCharacter=He,e.getMirroredCharactersMap=rt,e.getReorderSegments=it,e.getReorderedIndices=kt,e.getReorderedString=Nt,e.openingToClosingBracket=D,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const QZ=/\bvoid\s+main\s*\(\s*\)\s*{/g;function WP(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(r,s){let o=ps[s];return o?WP(o):r}return n.replace(e,t)}const ef=[];for(let n=0;n<256;n++)ef[n]=(n<16?"0":"")+n.toString(16);function KAe(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ef[n&255]+ef[n>>8&255]+ef[n>>16&255]+ef[n>>24&255]+"-"+ef[e&255]+ef[e>>8&255]+"-"+ef[e>>16&15|64]+ef[e>>24&255]+"-"+ef[t&63|128]+ef[t>>8&255]+"-"+ef[t>>16&255]+ef[t>>24&255]+ef[r&255]+ef[r>>8&255]+ef[r>>16&255]+ef[r>>24&255]).toUpperCase()}const Zb=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let r=arguments[e];if(r)for(let s in r)r.hasOwnProperty(s)&&(n[s]=r[s])}return n},JAe=Date.now(),CW=new WeakMap,MW=new Map;let qAe=1e10;function VP(n,e){const t=tIe(e);let r=CW.get(n);if(r||CW.set(n,r=Object.create(null)),r[t])return new r[t];const s=`_onBeforeCompile${t}`,o=function(f){n.onBeforeCompile.call(this,f);const g=this.customProgramCacheKey()+"|"+f.vertexShader+"|"+f.fragmentShader;let y=MW[g];if(!y){const b=QAe(f,e,t);y=MW[g]=b}f.vertexShader=y.vertexShader,f.fragmentShader=y.fragmentShader,Zb(f.uniforms,this.uniforms),e.timeUniform&&(f.uniforms[e.timeUniform]={get value(){return Date.now()-JAe}}),this[s]&&this[s](f)},l=function(){return u(e.chained?n:n.clone())},u=function(f){const g=Object.create(f,h);return Object.defineProperty(g,"baseMaterial",{value:n}),Object.defineProperty(g,"id",{value:qAe++}),g.uuid=KAe(),g.uniforms=Zb({},f.uniforms,e.uniforms),g.defines=Zb({},f.defines,e.defines),g.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",g.extensions=Zb({},f.extensions,e.extensions),g._listeners=void 0,g},h={constructor:{value:l},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return o},set(f){this[s]=f}},copy:{writable:!0,configurable:!0,value:function(f){return n.copy.call(this,f),!n.isShaderMaterial&&!n.isDerivedMaterial&&(Zb(this.extensions,f.extensions),Zb(this.defines,f.defines),Zb(this.uniforms,LC.clone(f.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const f=new n.constructor;return u(f).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let f=this._depthMaterial;return f||(f=this._depthMaterial=VP(n.isDerivedMaterial?n.getDepthMaterial():new DC({depthPacking:Nw}),e),f.defines.IS_DEPTH_MATERIAL="",f.uniforms=this.uniforms),f}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let f=this._distanceMaterial;return f||(f=this._distanceMaterial=VP(n.isDerivedMaterial?n.getDistanceMaterial():new h2,e),f.defines.IS_DISTANCE_MATERIAL="",f.uniforms=this.uniforms),f}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:f,_distanceMaterial:g}=this;f&&f.dispose(),g&&g.dispose(),n.dispose.call(this)}}};return r[t]=l,new l}function QAe({vertexShader:n,fragmentShader:e},t,r){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:l,vertexTransform:u,fragmentDefs:h,fragmentMainIntro:f,fragmentMainOutro:g,fragmentColorTransform:y,customRewriter:b,timeUniform:S}=t;if(s=s||"",o=o||"",l=l||"",h=h||"",f=f||"",g=g||"",(u||b)&&(n=WP(n)),(y||b)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=WP(e)),b){let C=b({vertexShader:n,fragmentShader:e});n=C.vertexShader,e=C.fragmentShader}if(y){let C=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,M=>(C.push(M),"")),g=`${y}
${C.join(`
`)}
${g}`}if(S){const C=`
uniform float ${S};
`;s=C+s,h=C+h}return u&&(n=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${n}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${u}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,n=n.replace(/\b(position|normal|uv)\b/g,(C,M,A,O)=>/\battribute\s+vec[23]\s+$/.test(O.substr(0,A))?M:`troika_${M}_${r}`)),n=AW(n,r,s,o,l),e=AW(e,r,h,f,g),{vertexShader:n,fragmentShader:e}}function AW(n,e,t,r,s){return(r||s||t)&&(n=n.replace(QZ,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${s}
}`),n}function ZAe(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let eIe=0;const IW=new Map;function tIe(n){const e=JSON.stringify(n,ZAe);let t=IW.get(e);return t==null&&IW.set(e,t=++eIe),t}function nIe(n,e,t){const{defaultFontURL:r}=t,s=Object.create(null),o=1/0,l=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,u="[^\\S\\u00A0]",h=new RegExp(`${u}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function f(L,B){function D(){const z=U=>{console.error(`Failure loading font ${L}${L===r?"":"; trying fallback"}`,U),L!==r&&(L=r,D())};try{const U=new XMLHttpRequest;U.open("get",L,!0),U.responseType="arraybuffer",U.onload=function(){if(U.status>=400)z(new Error(U.statusText));else if(U.status>0)try{const V=n(U.response);B(V)}catch(V){z(V)}},U.onerror=z,U.send()}catch(U){z(U)}}D()}function g(L,B){L||(L=r);let D=s[L];D?D.pending?D.pending.push(B):B(D):(s[L]={pending:[B]},f(L,z=>{let U=s[L].pending;s[L]=z,U.forEach(V=>V(z))}))}function y({text:L="",font:B=r,sdfGlyphSize:D=64,fontSize:z=1,letterSpacing:U=0,lineHeight:V="normal",maxWidth:H=o,direction:oe,textAlign:le="left",textIndent:Z=0,whiteSpace:q="normal",overflowWrap:he="normal",anchorX:ae=0,anchorY:ue=0,includeCaretPositions:ge=!1,chunkedBoundsSize:we=8192,colorRanges:J=null},re,ie=!1){const fe=M(),Te={fontLoad:0,typesetting:0};L.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),L=L.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),z=+z,U=+U,H=+H,V=V||"normal",Z=+Z,g(B,Fe=>{const Ie=isFinite(H);let qe=null,Re=null,Qe=null,nt=null,ft=null,lt=null,ze=null,Ce=0,He=0,rt=q!=="nowrap";const{ascender:it,descender:Nt,unitsPerEm:kt,lineGap:vt,capHeight:Mt,xHeight:At}=Fe;Te.fontLoad=M()-fe;const mt=M(),xe=z/kt;V==="normal"&&(V=(it-Nt+vt)/kt),V=V*z;const se=(V-(it-Nt)*xe)/2,$e=-(it*xe+se),ht=Math.min(V,(it-Nt)*xe),St=(it+Nt)/2*xe-ht/2;let It=Z,pt=new A;const Ke=[pt];Fe.forEachGlyph(L,z,U,(te,me,ke)=>{const Xe=L.charAt(ke),Wt=te.advanceWidth*xe,Ge=pt.count;let tn;if("isEmpty"in te||(te.isWhitespace=!!Xe&&new RegExp(u).test(Xe),te.canBreakAfter=!!Xe&&h.test(Xe),te.isEmpty=te.xMin===te.xMax||te.yMin===te.yMax||l.test(Xe)),!te.isWhitespace&&!te.isEmpty&&He++,rt&&Ie&&!te.isWhitespace&&me+Wt+It>H&&Ge){if(pt.glyphAt(Ge-1).glyphObj.canBreakAfter)tn=new A,It=-me;else for(let Jt=Ge;Jt--;)if(Jt===0&&he==="break-word"){tn=new A,It=-me;break}else if(pt.glyphAt(Jt).glyphObj.canBreakAfter){tn=pt.splitAt(Jt+1);const Kt=tn.glyphAt(0).x;It-=Kt;for(let On=tn.count;On--;)tn.glyphAt(On).x-=Kt;break}tn&&(pt.isSoftWrapped=!0,pt=tn,Ke.push(pt),Ce=H)}let _t=pt.glyphAt(pt.count);_t.glyphObj=te,_t.x=me+It,_t.width=Wt,_t.charIndex=ke,Xe===`
`&&(pt=new A,Ke.push(pt),It=-(me+Wt+U*z)+Z)}),Ke.forEach(te=>{for(let me=te.count;me--;){let{glyphObj:ke,x:Xe,width:Wt}=te.glyphAt(me);if(!ke.isWhitespace){te.width=Xe+Wt,te.width>Ce&&(Ce=te.width);return}}});let Le=0,Q=0;if(ae&&(typeof ae=="number"?Le=-ae:typeof ae=="string"&&(Le=-Ce*(ae==="left"?0:ae==="center"?.5:ae==="right"?1:S(ae)))),ue){if(typeof ue=="number")Q=-ue;else if(typeof ue=="string"){let te=Ke.length*V;Q=ue==="top"?0:ue==="top-baseline"?-$e:ue==="top-cap"?-$e-Mt*xe:ue==="top-ex"?-$e-At*xe:ue==="middle"?te/2:ue==="bottom"?te:ue==="bottom-baseline"?te-se+Nt*xe:S(ue)*te}}if(!ie){const te=e.getEmbeddingLevels(L,oe);qe=new Uint16Array(He),Re=new Float32Array(He*2),Qe={},lt=[o,o,-o,-o],ze=[];let me=$e;ge&&(ft=new Float32Array(L.length*3)),J&&(nt=new Uint8Array(He*3));let ke=0,Xe=-1,Wt=-1,Ge,tn;if(Ke.forEach((_t,Jt)=>{let{count:Kt,width:On}=_t;if(Kt>0){let si=0;for(let Se=Kt;Se--&&_t.glyphAt(Se).glyphObj.isWhitespace;)si++;let Pr=0,Ei=0;if(le==="center")Pr=(Ce-On)/2;else if(le==="right")Pr=Ce-On;else if(le==="justify"&&_t.isSoftWrapped){let Se=0;for(let We=Kt-si;We--;)_t.glyphAt(We).glyphObj.isWhitespace&&Se++;Ei=(Ce-On)/Se}if(Ei||Pr){let Se=0;for(let We=0;We<Kt;We++){let ot=_t.glyphAt(We);const zt=ot.glyphObj;ot.x+=Pr+Se,Ei!==0&&zt.isWhitespace&&We<Kt-si&&(Se+=Ei,ot.width+=Ei)}}const $r=e.getReorderSegments(L,te,_t.glyphAt(0).charIndex,_t.glyphAt(_t.count-1).charIndex);for(let Se=0;Se<$r.length;Se++){const[We,ot]=$r[Se];let zt=1/0,sn=-1/0;for(let Nn=0;Nn<Kt;Nn++)if(_t.glyphAt(Nn).charIndex>=We){let De=Nn,gt=Nn;for(;gt<Kt;gt++){let Ct=_t.glyphAt(gt);if(Ct.charIndex>ot)break;gt<Kt-si&&(zt=Math.min(zt,Ct.x),sn=Math.max(sn,Ct.x+Ct.width))}for(let Ct=De;Ct<gt;Ct++){const bt=_t.glyphAt(Ct);bt.x=sn-(bt.x+bt.width-zt)}break}}let gr;const ne=Se=>gr=Se;for(let Se=0;Se<Kt;Se++){let We=_t.glyphAt(Se);gr=We.glyphObj;const ot=gr.index,zt=te.levels[We.charIndex]&1;if(zt){const sn=e.getMirroredCharacter(L[We.charIndex]);sn&&Fe.forEachGlyph(sn,0,0,ne)}if(ge){const{charIndex:sn}=We,Nn=We.x+Le,De=We.x+We.width+Le;ft[sn*3]=zt?De:Nn,ft[sn*3+1]=zt?Nn:De,ft[sn*3+2]=me+St+Q;const gt=sn-Xe;gt>1&&C(ft,Xe,gt),Xe=sn}if(J){const{charIndex:sn}=We;for(;sn>Wt;)Wt++,J.hasOwnProperty(Wt)&&(tn=J[Wt])}if(!gr.isWhitespace&&!gr.isEmpty){const sn=ke++;Qe[ot]||(Qe[ot]={path:gr.path,pathBounds:[gr.xMin,gr.yMin,gr.xMax,gr.yMax]});const Nn=We.x+Le,De=me+Q;Re[sn*2]=Nn,Re[sn*2+1]=De;const gt=Nn+gr.xMin*xe,Ct=De+gr.yMin*xe,bt=Nn+gr.xMax*xe,Vt=De+gr.yMax*xe;gt<lt[0]&&(lt[0]=gt),Ct<lt[1]&&(lt[1]=Ct),bt>lt[2]&&(lt[2]=bt),Vt>lt[3]&&(lt[3]=Vt),sn%we===0&&(Ge={start:sn,end:sn,rect:[o,o,-o,-o]},ze.push(Ge)),Ge.end++;const Wn=Ge.rect;if(gt<Wn[0]&&(Wn[0]=gt),Ct<Wn[1]&&(Wn[1]=Ct),bt>Wn[2]&&(Wn[2]=bt),Vt>Wn[3]&&(Wn[3]=Vt),qe[sn]=ot,J){const rr=sn*3;nt[rr]=tn>>16&255,nt[rr+1]=tn>>8&255,nt[rr+2]=tn&255}}}}me-=V}),ft){const _t=L.length-Xe;_t>1&&C(ft,Xe,_t)}}Te.typesetting=M()-mt,re({glyphIds:qe,glyphPositions:Re,glyphData:Qe,caretPositions:ft,caretHeight:ht,glyphColors:nt,chunkedBounds:ze,fontSize:z,unitsPerEm:kt,ascender:it*xe,descender:Nt*xe,capHeight:Mt*xe,xHeight:At*xe,lineHeight:V,topBaseline:$e,blockBounds:[Le,Q-Ke.length*V,Le+Ce,Q],visibleBounds:lt,timings:Te})})}function b(L,B){y(L,D=>{const[z,U,V,H]=D.blockBounds;B({width:V-z,height:H-U})},{metricsOnly:!0})}function S(L){let B=L.match(/^([\d.]+)%$/),D=B?parseFloat(B[1]):NaN;return isNaN(D)?0:D/100}function C(L,B,D){const z=L[B*3],U=L[B*3+1],V=L[B*3+2],H=(U-z)/D;for(let oe=0;oe<D;oe++){const le=(B+oe)*3;L[le]=z+H*oe,L[le+1]=z+H*(oe+1),L[le+2]=V}}function M(){return(self.performance||Date).now()}function A(){this.data=[]}const O=["glyphObj","x","width","charIndex"];return A.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/O.length)},glyphAt(L){let B=A.flyweight;return B.data=this.data,B.index=L,B},splitAt(L){let B=new A;return B.data=this.data.splice(L*O.length),B}},A.flyweight=O.reduce((L,B,D,z)=>(Object.defineProperty(L,B,{get(){return this.data[this.index*O.length+D]},set(U){this.data[this.index*O.length+D]=U}}),L),{data:null,index:0}),{typeset:y,measure:b,loadFont:g}}const U1=()=>(self.performance||Date).now(),E2=qZ();let RW;function rIe(n,e,t,r,s,o,l,u,h,f,g=!0){return g?sIe(n,e,t,r,s,o,l,u,h,f).then(null,y=>(RW||(console.warn("WebGL SDF generation failed, falling back to JS",y),RW=!0),OW(n,e,t,r,s,o,l,u,h,f))):OW(n,e,t,r,s,o,l,u,h,f)}const CI=[],iIe=5;let jP=0;function ZZ(){const n=U1();for(;CI.length&&U1()-n<iIe;)CI.shift()();jP=CI.length?setTimeout(ZZ,0):0}const sIe=(...n)=>new Promise((e,t)=>{CI.push(()=>{const r=U1();try{E2.webgl.generateIntoCanvas(...n),e({timing:U1()-r})}catch(s){t(s)}}),jP||(jP=setTimeout(ZZ,0))}),oIe=4,aIe=2e3,kW={};let lIe=0;function OW(n,e,t,r,s,o,l,u,h,f){const g="TroikaTextSDFGenerator_JS_"+lIe++%oIe;let y=kW[g];return y||(y=kW[g]={workerModule:UC({name:g,workerId:g,dependencies:[qZ,U1],init(b,S){const C=b().javascript.generate;return function(...M){const A=S();return{textureData:C(...M),timing:S()-A}}},getTransferables(b){return[b.textureData.buffer]}}),requests:0,idleTimer:null}),y.requests++,clearTimeout(y.idleTimer),y.workerModule(n,e,t,r,s,o).then(({textureData:b,timing:S})=>{const C=U1(),M=new Uint8Array(b.length*4);for(let A=0;A<b.length;A++)M[A*4+f]=b[A];return E2.webglUtils.renderImageData(l,M,u,h,n,e,1<<3-f),S+=U1()-C,--y.requests===0&&(y.idleTimer=setTimeout(()=>{jAe(g)},aIe)),{timing:S}})}function uIe(n){n._warm||(E2.webgl.isSupported(n),n._warm=!0)}const cIe=E2.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function hIe(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(s){var o=e._bin,l=new Uint8Array(s);if(o.readASCII(l,0,4)=="ttcf"){var u=4;o.readUshort(l,u),u+=2,o.readUshort(l,u),u+=2;var h=o.readUint(l,u);u+=4;for(var f=[],g=0;g<h;g++){var y=o.readUint(l,u);u+=4,f.push(e._readFont(l,y))}return f}return[e._readFont(l,0)]},_readFont:function(s,o){var l=e._bin,u=o;l.readFixed(s,o),o+=4;var h=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2;for(var f=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],g={_data:s,_offset:u},y={},b=0;b<h;b++){var S=l.readASCII(s,o,4);o+=4,l.readUint(s,o),o+=4;var C=l.readUint(s,o);o+=4;var M=l.readUint(s,o);o+=4,y[S]={offset:C,length:M}}for(b=0;b<f.length;b++){var A=f[b];y[A]&&(g[A.trim()]=e[A.trim()].parse(s,y[A].offset,y[A].length,g))}return g},_tabOffset:function(s,o,l){for(var u=e._bin,h=u.readUshort(s,l+4),f=l+12,g=0;g<h;g++){var y=u.readASCII(s,f,4);f+=4,u.readUint(s,f),f+=4;var b=u.readUint(s,f);if(f+=4,u.readUint(s,f),f+=4,y==o)return b}return 0}};e._bin={readFixed:function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<8|s[o+3])/65540},readF2dot14:function(s,o){return e._bin.readShort(s,o)/16384},readInt:function(s,o){return e._bin._view(s).getInt32(o)},readInt8:function(s,o){return e._bin._view(s).getInt8(o)},readShort:function(s,o){return e._bin._view(s).getInt16(o)},readUshort:function(s,o){return e._bin._view(s).getUint16(o)},readUshorts:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(e._bin.readUshort(s,o+2*h));return u},readUint:function(s,o){return e._bin._view(s).getUint32(o)},readUint64:function(s,o){return 4294967296*e._bin.readUint(s,o)+e._bin.readUint(s,o+4)},readASCII:function(s,o,l){for(var u="",h=0;h<l;h++)u+=String.fromCharCode(s[o+h]);return u},readUnicode:function(s,o,l){for(var u="",h=0;h<l;h++){var f=s[o++]<<8|s[o++];u+=String.fromCharCode(f)}return u},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,o,l){var u=e._bin._tdec;return u&&o==0&&l==s.length?u.decode(s):e._bin.readASCII(s,o,l)},readBytes:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(s[o+h]);return u},readASCIIArray:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(String.fromCharCode(s[o+h]));return u},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},e._lctf={},e._lctf.parse=function(s,o,l,u,h){var f=e._bin,g={},y=o;f.readFixed(s,o),o+=4;var b=f.readUshort(s,o);o+=2;var S=f.readUshort(s,o);o+=2;var C=f.readUshort(s,o);return o+=2,g.scriptList=e._lctf.readScriptList(s,y+b),g.featureList=e._lctf.readFeatureList(s,y+S),g.lookupList=e._lctf.readLookupList(s,y+C,h),g},e._lctf.readLookupList=function(s,o,l){var u=e._bin,h=o,f=[],g=u.readUshort(s,o);o+=2;for(var y=0;y<g;y++){var b=u.readUshort(s,o);o+=2;var S=e._lctf.readLookupTable(s,h+b,l);f.push(S)}return f},e._lctf.readLookupTable=function(s,o,l){var u=e._bin,h=o,f={tabs:[]};f.ltype=u.readUshort(s,o),o+=2,f.flag=u.readUshort(s,o),o+=2;var g=u.readUshort(s,o);o+=2;for(var y=f.ltype,b=0;b<g;b++){var S=u.readUshort(s,o);o+=2;var C=l(s,y,h+S,f);f.tabs.push(C)}return f},e._lctf.numOfOnes=function(s){for(var o=0,l=0;l<32;l++)s>>>l&1&&o++;return o},e._lctf.readClassDef=function(s,o){var l=e._bin,u=[],h=l.readUshort(s,o);if(o+=2,h==1){var f=l.readUshort(s,o);o+=2;var g=l.readUshort(s,o);o+=2;for(var y=0;y<g;y++)u.push(f+y),u.push(f+y),u.push(l.readUshort(s,o)),o+=2}if(h==2){var b=l.readUshort(s,o);for(o+=2,y=0;y<b;y++)u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2}return u},e._lctf.getInterval=function(s,o){for(var l=0;l<s.length;l+=3){var u=s[l],h=s[l+1];if(s[l+2],u<=o&&o<=h)return l}return-1},e._lctf.readCoverage=function(s,o){var l=e._bin,u={};u.fmt=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);return o+=2,u.fmt==1&&(u.tab=l.readUshorts(s,o,h)),u.fmt==2&&(u.tab=l.readUshorts(s,o,3*h)),u},e._lctf.coverageIndex=function(s,o){var l=s.tab;if(s.fmt==1)return l.indexOf(o);if(s.fmt==2){var u=e._lctf.getInterval(l,o);if(u!=-1)return l[u+2]+(o-l[u])}return-1},e._lctf.readFeatureList=function(s,o){var l=e._bin,u=o,h=[],f=l.readUshort(s,o);o+=2;for(var g=0;g<f;g++){var y=l.readASCII(s,o,4);o+=4;var b=l.readUshort(s,o);o+=2;var S=e._lctf.readFeatureTable(s,u+b);S.tag=y.trim(),h.push(S)}return h},e._lctf.readFeatureTable=function(s,o){var l=e._bin,u=o,h={},f=l.readUshort(s,o);o+=2,f>0&&(h.featureParams=u+f);var g=l.readUshort(s,o);o+=2,h.tab=[];for(var y=0;y<g;y++)h.tab.push(l.readUshort(s,o+2*y));return h},e._lctf.readScriptList=function(s,o){var l=e._bin,u=o,h={},f=l.readUshort(s,o);o+=2;for(var g=0;g<f;g++){var y=l.readASCII(s,o,4);o+=4;var b=l.readUshort(s,o);o+=2,h[y.trim()]=e._lctf.readScriptTable(s,u+b)}return h},e._lctf.readScriptTable=function(s,o){var l=e._bin,u=o,h={},f=l.readUshort(s,o);o+=2,h.default=e._lctf.readLangSysTable(s,u+f);var g=l.readUshort(s,o);o+=2;for(var y=0;y<g;y++){var b=l.readASCII(s,o,4);o+=4;var S=l.readUshort(s,o);o+=2,h[b.trim()]=e._lctf.readLangSysTable(s,u+S)}return h},e._lctf.readLangSysTable=function(s,o){var l=e._bin,u={};l.readUshort(s,o),o+=2,u.reqFeature=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);return o+=2,u.features=l.readUshorts(s,o,h),u},e.CFF={},e.CFF.parse=function(s,o,l){var u=e._bin;(s=new Uint8Array(s.buffer,o,l))[o=0],s[++o],s[++o],s[++o],o++;var h=[];o=e.CFF.readIndex(s,o,h);for(var f=[],g=0;g<h.length-1;g++)f.push(u.readASCII(s,o+h[g],h[g+1]-h[g]));o+=h[h.length-1];var y=[];o=e.CFF.readIndex(s,o,y);var b=[];for(g=0;g<y.length-1;g++)b.push(e.CFF.readDict(s,o+y[g],o+y[g+1]));o+=y[y.length-1];var S=b[0],C=[];o=e.CFF.readIndex(s,o,C);var M=[];for(g=0;g<C.length-1;g++)M.push(u.readASCII(s,o+C[g],C[g+1]-C[g]));if(o+=C[C.length-1],e.CFF.readSubrs(s,o,S),S.CharStrings){o=S.CharStrings,C=[],o=e.CFF.readIndex(s,o,C);var A=[];for(g=0;g<C.length-1;g++)A.push(u.readBytes(s,o+C[g],C[g+1]-C[g]));S.CharStrings=A}if(S.ROS){o=S.FDArray;var O=[];for(o=e.CFF.readIndex(s,o,O),S.FDArray=[],g=0;g<O.length-1;g++){var L=e.CFF.readDict(s,o+O[g],o+O[g+1]);e.CFF._readFDict(s,L,M),S.FDArray.push(L)}o+=O[O.length-1],o=S.FDSelect,S.FDSelect=[];var B=s[o];if(o++,B!=3)throw B;var D=u.readUshort(s,o);for(o+=2,g=0;g<D+1;g++)S.FDSelect.push(u.readUshort(s,o),s[o+2]),o+=3}return S.Encoding&&(S.Encoding=e.CFF.readEncoding(s,S.Encoding,S.CharStrings.length)),S.charset&&(S.charset=e.CFF.readCharset(s,S.charset,S.CharStrings.length)),e.CFF._readFDict(s,S,M),S},e.CFF._readFDict=function(s,o,l){var u;for(var h in o.Private&&(u=o.Private[1],o.Private=e.CFF.readDict(s,u,u+o.Private[0]),o.Private.Subrs&&e.CFF.readSubrs(s,u+o.Private.Subrs,o.Private)),o)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(h)!=-1&&(o[h]=l[o[h]-426+35])},e.CFF.readSubrs=function(s,o,l){var u=e._bin,h=[];o=e.CFF.readIndex(s,o,h);var f,g=h.length;f=g<1240?107:g<33900?1131:32768,l.Bias=f,l.Subrs=[];for(var y=0;y<h.length-1;y++)l.Subrs.push(u.readBytes(s,o+h[y],h[y+1]-h[y]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(s,o){for(var l=0;l<s.charset.length;l++)if(s.charset[l]==o)return l;return-1},e.CFF.glyphBySE=function(s,o){return o<0||o>255?-1:e.CFF.glyphByUnicode(s,e.CFF.tableSE[o])},e.CFF.readEncoding=function(s,o,l){e._bin;var u=[".notdef"],h=s[o];if(o++,h!=0)throw"error: unknown encoding format: "+h;var f=s[o];o++;for(var g=0;g<f;g++)u.push(s[o+g]);return u},e.CFF.readCharset=function(s,o,l){var u=e._bin,h=[".notdef"],f=s[o];if(o++,f==0)for(var g=0;g<l;g++){var y=u.readUshort(s,o);o+=2,h.push(y)}else{if(f!=1&&f!=2)throw"error: format: "+f;for(;h.length<l;){y=u.readUshort(s,o),o+=2;var b=0;for(f==1?(b=s[o],o++):(b=u.readUshort(s,o),o+=2),g=0;g<=b;g++)h.push(y),y++}}return h},e.CFF.readIndex=function(s,o,l){var u=e._bin,h=u.readUshort(s,o)+1,f=s[o+=2];if(o++,f==1)for(var g=0;g<h;g++)l.push(s[o+g]);else if(f==2)for(g=0;g<h;g++)l.push(u.readUshort(s,o+2*g));else if(f==3)for(g=0;g<h;g++)l.push(16777215&u.readUint(s,o+3*g-1));else if(h!=1)throw"unsupported offset size: "+f+", count: "+h;return(o+=h*f)-1},e.CFF.getCharString=function(s,o,l){var u=e._bin,h=s[o],f=s[o+1];s[o+2],s[o+3],s[o+4];var g=1,y=null,b=null;h<=20&&(y=h,g=1),h==12&&(y=100*h+f,g=2),21<=h&&h<=27&&(y=h,g=1),h==28&&(b=u.readShort(s,o+1),g=3),29<=h&&h<=31&&(y=h,g=1),32<=h&&h<=246&&(b=h-139,g=1),247<=h&&h<=250&&(b=256*(h-247)+f+108,g=2),251<=h&&h<=254&&(b=256*-(h-251)-f-108,g=2),h==255&&(b=u.readInt(s,o+1)/65535,g=5),l.val=b??"o"+y,l.size=g},e.CFF.readCharString=function(s,o,l){for(var u=o+l,h=e._bin,f=[];o<u;){var g=s[o],y=s[o+1];s[o+2],s[o+3],s[o+4];var b=1,S=null,C=null;g<=20&&(S=g,b=1),g==12&&(S=100*g+y,b=2),g!=19&&g!=20||(S=g,b=2),21<=g&&g<=27&&(S=g,b=1),g==28&&(C=h.readShort(s,o+1),b=3),29<=g&&g<=31&&(S=g,b=1),32<=g&&g<=246&&(C=g-139,b=1),247<=g&&g<=250&&(C=256*(g-247)+y+108,b=2),251<=g&&g<=254&&(C=256*-(g-251)-y-108,b=2),g==255&&(C=h.readInt(s,o+1)/65535,b=5),f.push(C??"o"+S),o+=b}return f},e.CFF.readDict=function(s,o,l){for(var u=e._bin,h={},f=[];o<l;){var g=s[o],y=s[o+1];s[o+2],s[o+3],s[o+4];var b=1,S=null,C=null;if(g==28&&(C=u.readShort(s,o+1),b=3),g==29&&(C=u.readInt(s,o+1),b=5),32<=g&&g<=246&&(C=g-139,b=1),247<=g&&g<=250&&(C=256*(g-247)+y+108,b=2),251<=g&&g<=254&&(C=256*-(g-251)-y-108,b=2),g==255)throw C=u.readInt(s,o+1)/65535,b=5,"unknown number";if(g==30){var M=[];for(b=1;;){var A=s[o+b];b++;var O=A>>4,L=15&A;if(O!=15&&M.push(O),L!=15&&M.push(L),L==15)break}for(var B="",D=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],z=0;z<M.length;z++)B+=D[M[z]];C=parseFloat(B)}g<=21&&(S=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][g],b=1,g==12&&(S=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][y],b=2)),S!=null?(h[S]=f.length==1?f[0]:f,f=[]):f.push(C),o+=b}return h},e.cmap={},e.cmap.parse=function(s,o,l){s=new Uint8Array(s.buffer,o,l),o=0;var u=e._bin,h={};u.readUshort(s,o),o+=2;var f=u.readUshort(s,o);o+=2;var g=[];h.tables=[];for(var y=0;y<f;y++){var b=u.readUshort(s,o);o+=2;var S=u.readUshort(s,o);o+=2;var C=u.readUint(s,o);o+=4;var M="p"+b+"e"+S,A=g.indexOf(C);if(A==-1){var O;A=h.tables.length,g.push(C);var L=u.readUshort(s,C);L==0?O=e.cmap.parse0(s,C):L==4?O=e.cmap.parse4(s,C):L==6?O=e.cmap.parse6(s,C):L==12?O=e.cmap.parse12(s,C):console.debug("unknown format: "+L,b,S,C),h.tables.push(O)}if(h[M]!=null)throw"multiple tables for one platform+encoding";h[M]=A}return h},e.cmap.parse0=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,u.map=[];for(var f=0;f<h-6;f++)u.map.push(s[o+f]);return u},e.cmap.parse4=function(s,o){var l=e._bin,u=o,h={};h.format=l.readUshort(s,o),o+=2;var f=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2;var g=l.readUshort(s,o);o+=2;var y=g/2;h.searchRange=l.readUshort(s,o),o+=2,h.entrySelector=l.readUshort(s,o),o+=2,h.rangeShift=l.readUshort(s,o),o+=2,h.endCount=l.readUshorts(s,o,y),o+=2*y,o+=2,h.startCount=l.readUshorts(s,o,y),o+=2*y,h.idDelta=[];for(var b=0;b<y;b++)h.idDelta.push(l.readShort(s,o)),o+=2;for(h.idRangeOffset=l.readUshorts(s,o,y),o+=2*y,h.glyphIdArray=[];o<u+f;)h.glyphIdArray.push(l.readUshort(s,o)),o+=2;return h},e.cmap.parse6=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,u.firstCode=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2,u.glyphIdArray=[];for(var f=0;f<h;f++)u.glyphIdArray.push(l.readUshort(s,o)),o+=2;return u},e.cmap.parse12=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,o+=2,l.readUint(s,o),o+=4,l.readUint(s,o),o+=4;var h=l.readUint(s,o);o+=4,u.groups=[];for(var f=0;f<h;f++){var g=o+12*f,y=l.readUint(s,g+0),b=l.readUint(s,g+4),S=l.readUint(s,g+8);u.groups.push([y,b,S])}return u},e.glyf={},e.glyf.parse=function(s,o,l,u){for(var h=[],f=0;f<u.maxp.numGlyphs;f++)h.push(null);return h},e.glyf._parseGlyf=function(s,o){var l=e._bin,u=s._data,h=e._tabOffset(u,"glyf",s._offset)+s.loca[o];if(s.loca[o]==s.loca[o+1])return null;var f={};if(f.noc=l.readShort(u,h),h+=2,f.xMin=l.readShort(u,h),h+=2,f.yMin=l.readShort(u,h),h+=2,f.xMax=l.readShort(u,h),h+=2,f.yMax=l.readShort(u,h),h+=2,f.xMin>=f.xMax||f.yMin>=f.yMax)return null;if(f.noc>0){f.endPts=[];for(var g=0;g<f.noc;g++)f.endPts.push(l.readUshort(u,h)),h+=2;var y=l.readUshort(u,h);if(h+=2,u.length-h<y)return null;f.instructions=l.readBytes(u,h,y),h+=y;var b=f.endPts[f.noc-1]+1;for(f.flags=[],g=0;g<b;g++){var S=u[h];if(h++,f.flags.push(S),(8&S)!=0){var C=u[h];h++;for(var M=0;M<C;M++)f.flags.push(S),g++}}for(f.xs=[],g=0;g<b;g++){var A=(2&f.flags[g])!=0,O=(16&f.flags[g])!=0;A?(f.xs.push(O?u[h]:-u[h]),h++):O?f.xs.push(0):(f.xs.push(l.readShort(u,h)),h+=2)}for(f.ys=[],g=0;g<b;g++)A=(4&f.flags[g])!=0,O=(32&f.flags[g])!=0,A?(f.ys.push(O?u[h]:-u[h]),h++):O?f.ys.push(0):(f.ys.push(l.readShort(u,h)),h+=2);var L=0,B=0;for(g=0;g<b;g++)L+=f.xs[g],B+=f.ys[g],f.xs[g]=L,f.ys[g]=B}else{var D;f.parts=[];do{D=l.readUshort(u,h),h+=2;var z={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(f.parts.push(z),z.glyphIndex=l.readUshort(u,h),h+=2,1&D){var U=l.readShort(u,h);h+=2;var V=l.readShort(u,h);h+=2}else U=l.readInt8(u,h),h++,V=l.readInt8(u,h),h++;2&D?(z.m.tx=U,z.m.ty=V):(z.p1=U,z.p2=V),8&D?(z.m.a=z.m.d=l.readF2dot14(u,h),h+=2):64&D?(z.m.a=l.readF2dot14(u,h),h+=2,z.m.d=l.readF2dot14(u,h),h+=2):128&D&&(z.m.a=l.readF2dot14(u,h),h+=2,z.m.b=l.readF2dot14(u,h),h+=2,z.m.c=l.readF2dot14(u,h),h+=2,z.m.d=l.readF2dot14(u,h),h+=2)}while(32&D);if(256&D){var H=l.readUshort(u,h);for(h+=2,f.instr=[],g=0;g<H;g++)f.instr.push(u[h]),h++}}return f},e.GPOS={},e.GPOS.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GPOS.subt)},e.GPOS.subt=function(s,o,l,u){var h=e._bin,f=l,g={};if(g.fmt=h.readUshort(s,l),l+=2,o==1||o==2||o==3||o==7||o==8&&g.fmt<=2){var y=h.readUshort(s,l);l+=2,g.coverage=e._lctf.readCoverage(s,y+f)}if(o==1&&g.fmt==1){var b=h.readUshort(s,l);l+=2;var S=e._lctf.numOfOnes(b);b!=0&&(g.pos=e.GPOS.readValueRecord(s,l,b))}else if(o==2&&g.fmt>=1&&g.fmt<=2){b=h.readUshort(s,l),l+=2;var C=h.readUshort(s,l);l+=2,S=e._lctf.numOfOnes(b);var M=e._lctf.numOfOnes(C);if(g.fmt==1){g.pairsets=[];var A=h.readUshort(s,l);l+=2;for(var O=0;O<A;O++){var L=f+h.readUshort(s,l);l+=2;var B=h.readUshort(s,L);L+=2;for(var D=[],z=0;z<B;z++){var U=h.readUshort(s,L);L+=2,b!=0&&(q=e.GPOS.readValueRecord(s,L,b),L+=2*S),C!=0&&(he=e.GPOS.readValueRecord(s,L,C),L+=2*M),D.push({gid2:U,val1:q,val2:he})}g.pairsets.push(D)}}if(g.fmt==2){var V=h.readUshort(s,l);l+=2;var H=h.readUshort(s,l);l+=2;var oe=h.readUshort(s,l);l+=2;var le=h.readUshort(s,l);for(l+=2,g.classDef1=e._lctf.readClassDef(s,f+V),g.classDef2=e._lctf.readClassDef(s,f+H),g.matrix=[],O=0;O<oe;O++){var Z=[];for(z=0;z<le;z++){var q=null,he=null;b!=0&&(q=e.GPOS.readValueRecord(s,l,b),l+=2*S),C!=0&&(he=e.GPOS.readValueRecord(s,l,C),l+=2*M),Z.push({val1:q,val2:he})}g.matrix.push(Z)}}}else{if(o==9&&g.fmt==1){var ae=h.readUshort(s,l);l+=2;var ue=h.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=ae;else if(u.ltype!=ae)throw"invalid extension substitution";return e.GPOS.subt(s,u.ltype,f+ue)}console.debug("unsupported GPOS table LookupType",o,"format",g.fmt)}return g},e.GPOS.readValueRecord=function(s,o,l){var u=e._bin,h=[];return h.push(1&l?u.readShort(s,o):0),o+=1&l?2:0,h.push(2&l?u.readShort(s,o):0),o+=2&l?2:0,h.push(4&l?u.readShort(s,o):0),o+=4&l?2:0,h.push(8&l?u.readShort(s,o):0),o+=8&l?2:0,h},e.GSUB={},e.GSUB.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GSUB.subt)},e.GSUB.subt=function(s,o,l,u){var h=e._bin,f=l,g={};if(g.fmt=h.readUshort(s,l),l+=2,o!=1&&o!=4&&o!=5&&o!=6)return null;if(o==1||o==4||o==5&&g.fmt<=2||o==6&&g.fmt<=2){var y=h.readUshort(s,l);l+=2,g.coverage=e._lctf.readCoverage(s,f+y)}if(o==1&&g.fmt>=1&&g.fmt<=2){if(g.fmt==1)g.delta=h.readShort(s,l),l+=2;else if(g.fmt==2){var b=h.readUshort(s,l);l+=2,g.newg=h.readUshorts(s,l,b),l+=2*g.newg.length}}else if(o==4){g.vals=[],b=h.readUshort(s,l),l+=2;for(var S=0;S<b;S++){var C=h.readUshort(s,l);l+=2,g.vals.push(e.GSUB.readLigatureSet(s,f+C))}}else if(o==5&&g.fmt==2){if(g.fmt==2){var M=h.readUshort(s,l);l+=2,g.cDef=e._lctf.readClassDef(s,f+M),g.scset=[];var A=h.readUshort(s,l);for(l+=2,S=0;S<A;S++){var O=h.readUshort(s,l);l+=2,g.scset.push(O==0?null:e.GSUB.readSubClassSet(s,f+O))}}}else if(o==6&&g.fmt==3){if(g.fmt==3){for(S=0;S<3;S++){b=h.readUshort(s,l),l+=2;for(var L=[],B=0;B<b;B++)L.push(e._lctf.readCoverage(s,f+h.readUshort(s,l+2*B)));l+=2*b,S==0&&(g.backCvg=L),S==1&&(g.inptCvg=L),S==2&&(g.ahedCvg=L)}b=h.readUshort(s,l),l+=2,g.lookupRec=e.GSUB.readSubstLookupRecords(s,l,b)}}else{if(o==7&&g.fmt==1){var D=h.readUshort(s,l);l+=2;var z=h.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=D;else if(u.ltype!=D)throw"invalid extension substitution";return e.GSUB.subt(s,u.ltype,f+z)}console.debug("unsupported GSUB table LookupType",o,"format",g.fmt)}return g},e.GSUB.readSubClassSet=function(s,o){var l=e._bin.readUshort,u=o,h=[],f=l(s,o);o+=2;for(var g=0;g<f;g++){var y=l(s,o);o+=2,h.push(e.GSUB.readSubClassRule(s,u+y))}return h},e.GSUB.readSubClassRule=function(s,o){var l=e._bin.readUshort,u={},h=l(s,o),f=l(s,o+=2);o+=2,u.input=[];for(var g=0;g<h-1;g++)u.input.push(l(s,o)),o+=2;return u.substLookupRecords=e.GSUB.readSubstLookupRecords(s,o,f),u},e.GSUB.readSubstLookupRecords=function(s,o,l){for(var u=e._bin.readUshort,h=[],f=0;f<l;f++)h.push(u(s,o),u(s,o+2)),o+=4;return h},e.GSUB.readChainSubClassSet=function(s,o){var l=e._bin,u=o,h=[],f=l.readUshort(s,o);o+=2;for(var g=0;g<f;g++){var y=l.readUshort(s,o);o+=2,h.push(e.GSUB.readChainSubClassRule(s,u+y))}return h},e.GSUB.readChainSubClassRule=function(s,o){for(var l=e._bin,u={},h=["backtrack","input","lookahead"],f=0;f<h.length;f++){var g=l.readUshort(s,o);o+=2,f==1&&g--,u[h[f]]=l.readUshorts(s,o,g),o+=2*u[h[f]].length}return g=l.readUshort(s,o),o+=2,u.subst=l.readUshorts(s,o,2*g),o+=2*u.subst.length,u},e.GSUB.readLigatureSet=function(s,o){var l=e._bin,u=o,h=[],f=l.readUshort(s,o);o+=2;for(var g=0;g<f;g++){var y=l.readUshort(s,o);o+=2,h.push(e.GSUB.readLigature(s,u+y))}return h},e.GSUB.readLigature=function(s,o){var l=e._bin,u={chain:[]};u.nglyph=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2;for(var f=0;f<h-1;f++)u.chain.push(l.readUshort(s,o)),o+=2;return u},e.head={},e.head.parse=function(s,o,l){var u=e._bin,h={};return u.readFixed(s,o),o+=4,h.fontRevision=u.readFixed(s,o),o+=4,u.readUint(s,o),o+=4,u.readUint(s,o),o+=4,h.flags=u.readUshort(s,o),o+=2,h.unitsPerEm=u.readUshort(s,o),o+=2,h.created=u.readUint64(s,o),o+=8,h.modified=u.readUint64(s,o),o+=8,h.xMin=u.readShort(s,o),o+=2,h.yMin=u.readShort(s,o),o+=2,h.xMax=u.readShort(s,o),o+=2,h.yMax=u.readShort(s,o),o+=2,h.macStyle=u.readUshort(s,o),o+=2,h.lowestRecPPEM=u.readUshort(s,o),o+=2,h.fontDirectionHint=u.readShort(s,o),o+=2,h.indexToLocFormat=u.readShort(s,o),o+=2,h.glyphDataFormat=u.readShort(s,o),o+=2,h},e.hhea={},e.hhea.parse=function(s,o,l){var u=e._bin,h={};return u.readFixed(s,o),o+=4,h.ascender=u.readShort(s,o),o+=2,h.descender=u.readShort(s,o),o+=2,h.lineGap=u.readShort(s,o),o+=2,h.advanceWidthMax=u.readUshort(s,o),o+=2,h.minLeftSideBearing=u.readShort(s,o),o+=2,h.minRightSideBearing=u.readShort(s,o),o+=2,h.xMaxExtent=u.readShort(s,o),o+=2,h.caretSlopeRise=u.readShort(s,o),o+=2,h.caretSlopeRun=u.readShort(s,o),o+=2,h.caretOffset=u.readShort(s,o),o+=2,o+=8,h.metricDataFormat=u.readShort(s,o),o+=2,h.numberOfHMetrics=u.readUshort(s,o),o+=2,h},e.hmtx={},e.hmtx.parse=function(s,o,l,u){for(var h=e._bin,f={aWidth:[],lsBearing:[]},g=0,y=0,b=0;b<u.maxp.numGlyphs;b++)b<u.hhea.numberOfHMetrics&&(g=h.readUshort(s,o),o+=2,y=h.readShort(s,o),o+=2),f.aWidth.push(g),f.lsBearing.push(y);return f},e.kern={},e.kern.parse=function(s,o,l,u){var h=e._bin,f=h.readUshort(s,o);if(o+=2,f==1)return e.kern.parseV1(s,o-2,l,u);var g=h.readUshort(s,o);o+=2;for(var y={glyph1:[],rval:[]},b=0;b<g;b++){o+=2,l=h.readUshort(s,o),o+=2;var S=h.readUshort(s,o);o+=2;var C=S>>>8;if((C&=15)!=0)throw"unknown kern table format: "+C;o=e.kern.readFormat0(s,o,y)}return y},e.kern.parseV1=function(s,o,l,u){var h=e._bin;h.readFixed(s,o),o+=4;var f=h.readUint(s,o);o+=4;for(var g={glyph1:[],rval:[]},y=0;y<f;y++){h.readUint(s,o),o+=4;var b=h.readUshort(s,o);o+=2,h.readUshort(s,o),o+=2;var S=b>>>8;if((S&=15)!=0)throw"unknown kern table format: "+S;o=e.kern.readFormat0(s,o,g)}return g},e.kern.readFormat0=function(s,o,l){var u=e._bin,h=-1,f=u.readUshort(s,o);o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2;for(var g=0;g<f;g++){var y=u.readUshort(s,o);o+=2;var b=u.readUshort(s,o);o+=2;var S=u.readShort(s,o);o+=2,y!=h&&(l.glyph1.push(y),l.rval.push({glyph2:[],vals:[]}));var C=l.rval[l.rval.length-1];C.glyph2.push(b),C.vals.push(S),h=y}return o},e.loca={},e.loca.parse=function(s,o,l,u){var h=e._bin,f=[],g=u.head.indexToLocFormat,y=u.maxp.numGlyphs+1;if(g==0)for(var b=0;b<y;b++)f.push(h.readUshort(s,o+(b<<1))<<1);if(g==1)for(b=0;b<y;b++)f.push(h.readUint(s,o+(b<<2)));return f},e.maxp={},e.maxp.parse=function(s,o,l){var u=e._bin,h={},f=u.readUint(s,o);return o+=4,h.numGlyphs=u.readUshort(s,o),o+=2,f==65536&&(h.maxPoints=u.readUshort(s,o),o+=2,h.maxContours=u.readUshort(s,o),o+=2,h.maxCompositePoints=u.readUshort(s,o),o+=2,h.maxCompositeContours=u.readUshort(s,o),o+=2,h.maxZones=u.readUshort(s,o),o+=2,h.maxTwilightPoints=u.readUshort(s,o),o+=2,h.maxStorage=u.readUshort(s,o),o+=2,h.maxFunctionDefs=u.readUshort(s,o),o+=2,h.maxInstructionDefs=u.readUshort(s,o),o+=2,h.maxStackElements=u.readUshort(s,o),o+=2,h.maxSizeOfInstructions=u.readUshort(s,o),o+=2,h.maxComponentElements=u.readUshort(s,o),o+=2,h.maxComponentDepth=u.readUshort(s,o),o+=2),h},e.name={},e.name.parse=function(s,o,l){var u=e._bin,h={};u.readUshort(s,o),o+=2;var f=u.readUshort(s,o);o+=2,u.readUshort(s,o);for(var g,y=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],b=o+=2,S=0;S<f;S++){var C=u.readUshort(s,o);o+=2;var M=u.readUshort(s,o);o+=2;var A=u.readUshort(s,o);o+=2;var O=u.readUshort(s,o);o+=2;var L=u.readUshort(s,o);o+=2;var B=u.readUshort(s,o);o+=2;var D,z=y[O],U=b+12*f+B;if(C==0)D=u.readUnicode(s,U,L/2);else if(C==3&&M==0)D=u.readUnicode(s,U,L/2);else if(M==0)D=u.readASCII(s,U,L);else if(M==1)D=u.readUnicode(s,U,L/2);else if(M==3)D=u.readUnicode(s,U,L/2);else{if(C!=1)throw"unknown encoding "+M+", platformID: "+C;D=u.readASCII(s,U,L),console.debug("reading unknown MAC encoding "+M+" as ASCII")}var V="p"+C+","+A.toString(16);h[V]==null&&(h[V]={}),h[V][z!==void 0?z:O]=D,h[V]._lang=A}for(var H in h)if(h[H].postScriptName!=null&&h[H]._lang==1033)return h[H];for(var H in h)if(h[H].postScriptName!=null&&h[H]._lang==0)return h[H];for(var H in h)if(h[H].postScriptName!=null&&h[H]._lang==3084)return h[H];for(var H in h)if(h[H].postScriptName!=null)return h[H];for(var H in h){g=H;break}return console.debug("returning name table with languageID "+h[g]._lang),h[g]},e["OS/2"]={},e["OS/2"].parse=function(s,o,l){var u=e._bin.readUshort(s,o);o+=2;var h={};if(u==0)e["OS/2"].version0(s,o,h);else if(u==1)e["OS/2"].version1(s,o,h);else if(u==2||u==3||u==4)e["OS/2"].version2(s,o,h);else{if(u!=5)throw"unknown OS/2 table version: "+u;e["OS/2"].version5(s,o,h)}return h},e["OS/2"].version0=function(s,o,l){var u=e._bin;return l.xAvgCharWidth=u.readShort(s,o),o+=2,l.usWeightClass=u.readUshort(s,o),o+=2,l.usWidthClass=u.readUshort(s,o),o+=2,l.fsType=u.readUshort(s,o),o+=2,l.ySubscriptXSize=u.readShort(s,o),o+=2,l.ySubscriptYSize=u.readShort(s,o),o+=2,l.ySubscriptXOffset=u.readShort(s,o),o+=2,l.ySubscriptYOffset=u.readShort(s,o),o+=2,l.ySuperscriptXSize=u.readShort(s,o),o+=2,l.ySuperscriptYSize=u.readShort(s,o),o+=2,l.ySuperscriptXOffset=u.readShort(s,o),o+=2,l.ySuperscriptYOffset=u.readShort(s,o),o+=2,l.yStrikeoutSize=u.readShort(s,o),o+=2,l.yStrikeoutPosition=u.readShort(s,o),o+=2,l.sFamilyClass=u.readShort(s,o),o+=2,l.panose=u.readBytes(s,o,10),o+=10,l.ulUnicodeRange1=u.readUint(s,o),o+=4,l.ulUnicodeRange2=u.readUint(s,o),o+=4,l.ulUnicodeRange3=u.readUint(s,o),o+=4,l.ulUnicodeRange4=u.readUint(s,o),o+=4,l.achVendID=[u.readInt8(s,o),u.readInt8(s,o+1),u.readInt8(s,o+2),u.readInt8(s,o+3)],o+=4,l.fsSelection=u.readUshort(s,o),o+=2,l.usFirstCharIndex=u.readUshort(s,o),o+=2,l.usLastCharIndex=u.readUshort(s,o),o+=2,l.sTypoAscender=u.readShort(s,o),o+=2,l.sTypoDescender=u.readShort(s,o),o+=2,l.sTypoLineGap=u.readShort(s,o),o+=2,l.usWinAscent=u.readUshort(s,o),o+=2,l.usWinDescent=u.readUshort(s,o),o+=2},e["OS/2"].version1=function(s,o,l){var u=e._bin;return o=e["OS/2"].version0(s,o,l),l.ulCodePageRange1=u.readUint(s,o),o+=4,l.ulCodePageRange2=u.readUint(s,o),o+=4},e["OS/2"].version2=function(s,o,l){var u=e._bin;return o=e["OS/2"].version1(s,o,l),l.sxHeight=u.readShort(s,o),o+=2,l.sCapHeight=u.readShort(s,o),o+=2,l.usDefault=u.readUshort(s,o),o+=2,l.usBreak=u.readUshort(s,o),o+=2,l.usMaxContext=u.readUshort(s,o),o+=2},e["OS/2"].version5=function(s,o,l){var u=e._bin;return o=e["OS/2"].version2(s,o,l),l.usLowerOpticalPointSize=u.readUshort(s,o),o+=2,l.usUpperOpticalPointSize=u.readUshort(s,o),o+=2},e.post={},e.post.parse=function(s,o,l){var u=e._bin,h={};return h.version=u.readFixed(s,o),o+=4,h.italicAngle=u.readFixed(s,o),o+=4,h.underlinePosition=u.readShort(s,o),o+=2,h.underlineThickness=u.readShort(s,o),o+=2,h},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(s,o){var l=s.cmap,u=-1;if(l.p0e4!=null?u=l.p0e4:l.p3e1!=null?u=l.p3e1:l.p1e0!=null?u=l.p1e0:l.p0e3!=null&&(u=l.p0e3),u==-1)throw"no familiar platform and encoding!";var h=l.tables[u];if(h.format==0)return o>=h.map.length?0:h.map[o];if(h.format==4){for(var f=-1,g=0;g<h.endCount.length;g++)if(o<=h.endCount[g]){f=g;break}return f==-1||h.startCount[f]>o?0:65535&(h.idRangeOffset[f]!=0?h.glyphIdArray[o-h.startCount[f]+(h.idRangeOffset[f]>>1)-(h.idRangeOffset.length-f)]:o+h.idDelta[f])}if(h.format==12){if(o>h.groups[h.groups.length-1][1])return 0;for(g=0;g<h.groups.length;g++){var y=h.groups[g];if(y[0]<=o&&o<=y[1])return y[2]+(o-y[0])}return 0}throw"unknown cmap table format "+h.format},e.U.glyphToPath=function(s,o){var l={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[o]){var u=s.SVG.entries[o];return u==null?l:(typeof u=="string"&&(u=e.SVG.toPath(u),s.SVG.entries[o]=u),u)}if(s.CFF){var h={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},f=s.CFF,g=s.CFF.Private;if(f.ROS){for(var y=0;f.FDSelect[y+2]<=o;)y+=2;g=f.FDArray[f.FDSelect[y+1]].Private}e.U._drawCFF(s.CFF.CharStrings[o],h,f,g,l)}else s.glyf&&e.U._drawGlyf(o,s,l);return l},e.U._drawGlyf=function(s,o,l){var u=o.glyf[s];u==null&&(u=o.glyf[s]=e.glyf._parseGlyf(o,s)),u!=null&&(u.noc>-1?e.U._simpleGlyph(u,l):e.U._compoGlyph(u,o,l))},e.U._simpleGlyph=function(s,o){for(var l=0;l<s.noc;l++){for(var u=l==0?0:s.endPts[l-1]+1,h=s.endPts[l],f=u;f<=h;f++){var g=f==u?h:f-1,y=f==h?u:f+1,b=1&s.flags[f],S=1&s.flags[g],C=1&s.flags[y],M=s.xs[f],A=s.ys[f];if(f==u)if(b){if(!S){e.U.P.moveTo(o,M,A);continue}e.U.P.moveTo(o,s.xs[g],s.ys[g])}else S?e.U.P.moveTo(o,s.xs[g],s.ys[g]):e.U.P.moveTo(o,(s.xs[g]+M)/2,(s.ys[g]+A)/2);b?S&&e.U.P.lineTo(o,M,A):C?e.U.P.qcurveTo(o,M,A,s.xs[y],s.ys[y]):e.U.P.qcurveTo(o,M,A,(M+s.xs[y])/2,(A+s.ys[y])/2)}e.U.P.closePath(o)}},e.U._compoGlyph=function(s,o,l){for(var u=0;u<s.parts.length;u++){var h={cmds:[],crds:[]},f=s.parts[u];e.U._drawGlyf(f.glyphIndex,o,h);for(var g=f.m,y=0;y<h.crds.length;y+=2){var b=h.crds[y],S=h.crds[y+1];l.crds.push(b*g.a+S*g.b+g.tx),l.crds.push(b*g.c+S*g.d+g.ty)}for(y=0;y<h.cmds.length;y++)l.cmds.push(h.cmds[y])}},e.U._getGlyphClass=function(s,o){var l=e._lctf.getInterval(o,s);return l==-1?0:o[l+2]},e.U.getPairAdjustment=function(s,o,l){var u=!1;if(s.GPOS)for(var h=s.GPOS,f=h.lookupList,g=h.featureList,y=[],b=0;b<g.length;b++){var S=g[b];if(S.tag=="kern"){u=!0;for(var C=0;C<S.tab.length;C++)if(!y[S.tab[C]]){y[S.tab[C]]=!0;for(var M=f[S.tab[C]],A=0;A<M.tabs.length;A++)if(M.tabs[A]!=null){var O,L=M.tabs[A];if((!L.coverage||(O=e._lctf.coverageIndex(L.coverage,o))!=-1)&&M.ltype!=1&&M.ltype==2){var B=null;if(L.fmt==1){var D=L.pairsets[O];for(b=0;b<D.length;b++)D[b].gid2==l&&(B=D[b])}else if(L.fmt==2){var z=e.U._getGlyphClass(o,L.classDef1),U=e.U._getGlyphClass(l,L.classDef2);B=L.matrix[z][U]}if(B){var V=0;return B.val1&&B.val1[2]&&(V+=B.val1[2]),B.val2&&B.val2[0]&&(V+=B.val2[0]),V}}}}}}if(s.kern&&!u){var H=s.kern.glyph1.indexOf(o);if(H!=-1){var oe=s.kern.rval[H].glyph2.indexOf(l);if(oe!=-1)return s.kern.rval[H].vals[oe]}}return 0},e.U._applySubs=function(s,o,l,u){for(var h=s.length-o-1,f=0;f<l.tabs.length;f++)if(l.tabs[f]!=null){var g,y=l.tabs[f];if(!y.coverage||(g=e._lctf.coverageIndex(y.coverage,s[o]))!=-1){if(l.ltype==1)s[o],y.fmt==1?s[o]=s[o]+y.delta:s[o]=y.newg[g];else if(l.ltype==4)for(var b=y.vals[g],S=0;S<b.length;S++){var C=b[S],M=C.chain.length;if(!(M>h)){for(var A=!0,O=0,L=0;L<M;L++){for(;s[o+O+(1+L)]==-1;)O++;C.chain[L]!=s[o+O+(1+L)]&&(A=!1)}if(A){for(s[o]=C.nglyph,L=0;L<M+O;L++)s[o+L+1]=-1;break}}}else if(l.ltype==5&&y.fmt==2)for(var B=e._lctf.getInterval(y.cDef,s[o]),D=y.cDef[B+2],z=y.scset[D],U=0;U<z.length;U++){var V=z[U],H=V.input;if(!(H.length>h)){for(A=!0,L=0;L<H.length;L++){var oe=e._lctf.getInterval(y.cDef,s[o+1+L]);if(B==-1&&y.cDef[oe+2]!=H[L]){A=!1;break}}if(A){var le=V.substLookupRecords;for(S=0;S<le.length;S+=2)le[S],le[S+1]}}}else if(l.ltype==6&&y.fmt==3){if(!e.U._glsCovered(s,y.backCvg,o-y.backCvg.length)||!e.U._glsCovered(s,y.inptCvg,o)||!e.U._glsCovered(s,y.ahedCvg,o+y.inptCvg.length))continue;var Z=y.lookupRec;for(U=0;U<Z.length;U+=2){B=Z[U];var q=u[Z[U+1]];e.U._applySubs(s,o+B,q,u)}}}}},e.U._glsCovered=function(s,o,l){for(var u=0;u<o.length;u++)if(e._lctf.coverageIndex(o[u],s[l+u])==-1)return!1;return!0},e.U.glyphsToPath=function(s,o,l){for(var u={cmds:[],crds:[]},h=0,f=0;f<o.length;f++){var g=o[f];if(g!=-1){for(var y=f<o.length-1&&o[f+1]!=-1?o[f+1]:0,b=e.U.glyphToPath(s,g),S=0;S<b.crds.length;S+=2)u.crds.push(b.crds[S]+h),u.crds.push(b.crds[S+1]);for(l&&u.cmds.push(l),S=0;S<b.cmds.length;S++)u.cmds.push(b.cmds[S]);l&&u.cmds.push("X"),h+=s.hmtx.aWidth[g],f<o.length-1&&(h+=e.U.getPairAdjustment(s,g,y))}}return u},e.U.P={},e.U.P.moveTo=function(s,o,l){s.cmds.push("M"),s.crds.push(o,l)},e.U.P.lineTo=function(s,o,l){s.cmds.push("L"),s.crds.push(o,l)},e.U.P.curveTo=function(s,o,l,u,h,f,g){s.cmds.push("C"),s.crds.push(o,l,u,h,f,g)},e.U.P.qcurveTo=function(s,o,l,u,h){s.cmds.push("Q"),s.crds.push(o,l,u,h)},e.U.P.closePath=function(s){s.cmds.push("Z")},e.U._drawCFF=function(s,o,l,u,h){for(var f=o.stack,g=o.nStems,y=o.haveWidth,b=o.width,S=o.open,C=0,M=o.x,A=o.y,O=0,L=0,B=0,D=0,z=0,U=0,V=0,H=0,oe=0,le=0,Z={val:0,size:0};C<s.length;){e.CFF.getCharString(s,C,Z);var q=Z.val;if(C+=Z.size,q=="o1"||q=="o18")f.length%2!=0&&!y&&(b=f.shift()+u.nominalWidthX),g+=f.length>>1,f.length=0,y=!0;else if(q=="o3"||q=="o23")f.length%2!=0&&!y&&(b=f.shift()+u.nominalWidthX),g+=f.length>>1,f.length=0,y=!0;else if(q=="o4")f.length>1&&!y&&(b=f.shift()+u.nominalWidthX,y=!0),S&&e.U.P.closePath(h),A+=f.pop(),e.U.P.moveTo(h,M,A),S=!0;else if(q=="o5")for(;f.length>0;)M+=f.shift(),A+=f.shift(),e.U.P.lineTo(h,M,A);else if(q=="o6"||q=="o7")for(var he=f.length,ae=q=="o6",ue=0;ue<he;ue++){var ge=f.shift();ae?M+=ge:A+=ge,ae=!ae,e.U.P.lineTo(h,M,A)}else if(q=="o8"||q=="o24"){he=f.length;for(var we=0;we+6<=he;)O=M+f.shift(),L=A+f.shift(),B=O+f.shift(),D=L+f.shift(),M=B+f.shift(),A=D+f.shift(),e.U.P.curveTo(h,O,L,B,D,M,A),we+=6;q=="o24"&&(M+=f.shift(),A+=f.shift(),e.U.P.lineTo(h,M,A))}else{if(q=="o11")break;if(q=="o1234"||q=="o1235"||q=="o1236"||q=="o1237")q=="o1234"&&(L=A,B=(O=M+f.shift())+f.shift(),le=D=L+f.shift(),U=D,H=A,M=(V=(z=(oe=B+f.shift())+f.shift())+f.shift())+f.shift(),e.U.P.curveTo(h,O,L,B,D,oe,le),e.U.P.curveTo(h,z,U,V,H,M,A)),q=="o1235"&&(O=M+f.shift(),L=A+f.shift(),B=O+f.shift(),D=L+f.shift(),oe=B+f.shift(),le=D+f.shift(),z=oe+f.shift(),U=le+f.shift(),V=z+f.shift(),H=U+f.shift(),M=V+f.shift(),A=H+f.shift(),f.shift(),e.U.P.curveTo(h,O,L,B,D,oe,le),e.U.P.curveTo(h,z,U,V,H,M,A)),q=="o1236"&&(O=M+f.shift(),L=A+f.shift(),B=O+f.shift(),le=D=L+f.shift(),U=D,V=(z=(oe=B+f.shift())+f.shift())+f.shift(),H=U+f.shift(),M=V+f.shift(),e.U.P.curveTo(h,O,L,B,D,oe,le),e.U.P.curveTo(h,z,U,V,H,M,A)),q=="o1237"&&(O=M+f.shift(),L=A+f.shift(),B=O+f.shift(),D=L+f.shift(),oe=B+f.shift(),le=D+f.shift(),z=oe+f.shift(),U=le+f.shift(),V=z+f.shift(),H=U+f.shift(),Math.abs(V-M)>Math.abs(H-A)?M=V+f.shift():A=H+f.shift(),e.U.P.curveTo(h,O,L,B,D,oe,le),e.U.P.curveTo(h,z,U,V,H,M,A));else if(q=="o14"){if(f.length>0&&!y&&(b=f.shift()+l.nominalWidthX,y=!0),f.length==4){var J=f.shift(),re=f.shift(),ie=f.shift(),fe=f.shift(),Te=e.CFF.glyphBySE(l,ie),Fe=e.CFF.glyphBySE(l,fe);e.U._drawCFF(l.CharStrings[Te],o,l,u,h),o.x=J,o.y=re,e.U._drawCFF(l.CharStrings[Fe],o,l,u,h)}S&&(e.U.P.closePath(h),S=!1)}else if(q=="o19"||q=="o20")f.length%2!=0&&!y&&(b=f.shift()+u.nominalWidthX),g+=f.length>>1,f.length=0,y=!0,C+=g+7>>3;else if(q=="o21")f.length>2&&!y&&(b=f.shift()+u.nominalWidthX,y=!0),A+=f.pop(),M+=f.pop(),S&&e.U.P.closePath(h),e.U.P.moveTo(h,M,A),S=!0;else if(q=="o22")f.length>1&&!y&&(b=f.shift()+u.nominalWidthX,y=!0),M+=f.pop(),S&&e.U.P.closePath(h),e.U.P.moveTo(h,M,A),S=!0;else if(q=="o25"){for(;f.length>6;)M+=f.shift(),A+=f.shift(),e.U.P.lineTo(h,M,A);O=M+f.shift(),L=A+f.shift(),B=O+f.shift(),D=L+f.shift(),M=B+f.shift(),A=D+f.shift(),e.U.P.curveTo(h,O,L,B,D,M,A)}else if(q=="o26")for(f.length%2&&(M+=f.shift());f.length>0;)O=M,L=A+f.shift(),M=B=O+f.shift(),A=(D=L+f.shift())+f.shift(),e.U.P.curveTo(h,O,L,B,D,M,A);else if(q=="o27")for(f.length%2&&(A+=f.shift());f.length>0;)L=A,B=(O=M+f.shift())+f.shift(),D=L+f.shift(),M=B+f.shift(),A=D,e.U.P.curveTo(h,O,L,B,D,M,A);else if(q=="o10"||q=="o29"){var Ie=q=="o10"?u:l;if(f.length==0)console.debug("error: empty stack");else{var qe=f.pop(),Re=Ie.Subrs[qe+Ie.Bias];o.x=M,o.y=A,o.nStems=g,o.haveWidth=y,o.width=b,o.open=S,e.U._drawCFF(Re,o,l,u,h),M=o.x,A=o.y,g=o.nStems,y=o.haveWidth,b=o.width,S=o.open}}else if(q=="o30"||q=="o31"){var Qe=f.length,nt=(we=0,q=="o31");for(we+=Qe-(he=-3&Qe);we<he;)nt?(L=A,B=(O=M+f.shift())+f.shift(),A=(D=L+f.shift())+f.shift(),he-we==5?(M=B+f.shift(),we++):M=B,nt=!1):(O=M,L=A+f.shift(),B=O+f.shift(),D=L+f.shift(),M=B+f.shift(),he-we==5?(A=D+f.shift(),we++):A=D,nt=!0),e.U.P.curveTo(h,O,L,B,D,M,A),we+=4}else{if((q+"").charAt(0)=="o")throw console.debug("Unknown operation: "+q,s),q;f.push(q)}}}o.x=M,o.y=A,o.nStems=g,o.haveWidth=y,o.width=b,o.open=S};var t=e,r={Typr:t};return n.Typr=t,n.default=r,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function dIe(){return function(n){var e=Uint8Array,t=Uint16Array,r=Uint32Array,s=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(q,he){for(var ae=new t(31),ue=0;ue<31;++ue)ae[ue]=he+=1<<q[ue-1];var ge=new r(ae[30]);for(ue=1;ue<30;++ue)for(var we=ae[ue];we<ae[ue+1];++we)ge[we]=we-ae[ue]<<5|ue;return[ae,ge]},h=u(s,2),f=h[0],g=h[1];f[28]=258,g[258]=28;for(var y=u(o,0)[0],b=new t(32768),S=0;S<32768;++S){var C=(43690&S)>>>1|(21845&S)<<1;C=(61680&(C=(52428&C)>>>2|(13107&C)<<2))>>>4|(3855&C)<<4,b[S]=((65280&C)>>>8|(255&C)<<8)>>>1}var M=function(q,he,ae){for(var ue=q.length,ge=0,we=new t(he);ge<ue;++ge)++we[q[ge]-1];var J,re=new t(he);for(ge=0;ge<he;++ge)re[ge]=re[ge-1]+we[ge-1]<<1;if(ae){J=new t(1<<he);var ie=15-he;for(ge=0;ge<ue;++ge)if(q[ge])for(var fe=ge<<4|q[ge],Te=he-q[ge],Fe=re[q[ge]-1]++<<Te,Ie=Fe|(1<<Te)-1;Fe<=Ie;++Fe)J[b[Fe]>>>ie]=fe}else for(J=new t(ue),ge=0;ge<ue;++ge)q[ge]&&(J[ge]=b[re[q[ge]-1]++]>>>15-q[ge]);return J},A=new e(288);for(S=0;S<144;++S)A[S]=8;for(S=144;S<256;++S)A[S]=9;for(S=256;S<280;++S)A[S]=7;for(S=280;S<288;++S)A[S]=8;var O=new e(32);for(S=0;S<32;++S)O[S]=5;var L=M(A,9,1),B=M(O,5,1),D=function(q){for(var he=q[0],ae=1;ae<q.length;++ae)q[ae]>he&&(he=q[ae]);return he},z=function(q,he,ae){var ue=he/8|0;return(q[ue]|q[ue+1]<<8)>>(7&he)&ae},U=function(q,he){var ae=he/8|0;return(q[ae]|q[ae+1]<<8|q[ae+2]<<16)>>(7&he)},V=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],H=function(q,he,ae){var ue=new Error(he||V[q]);if(ue.code=q,Error.captureStackTrace&&Error.captureStackTrace(ue,H),!ae)throw ue;return ue},oe=function(q,he,ae){var ue=q.length;if(!ue||ae&&!ae.l&&ue<5)return he||new e(0);var ge=!he||ae,we=!ae||ae.i;ae||(ae={}),he||(he=new e(3*ue));var J,re=function(Xe){var Wt=he.length;if(Xe>Wt){var Ge=new e(Math.max(2*Wt,Xe));Ge.set(he),he=Ge}},ie=ae.f||0,fe=ae.p||0,Te=ae.b||0,Fe=ae.l,Ie=ae.d,qe=ae.m,Re=ae.n,Qe=8*ue;do{if(!Fe){ae.f=ie=z(q,fe,1);var nt=z(q,fe+1,3);if(fe+=3,!nt){var ft=q[(At=((J=fe)/8|0)+(7&J&&1)+4)-4]|q[At-3]<<8,lt=At+ft;if(lt>ue){we&&H(0);break}ge&&re(Te+ft),he.set(q.subarray(At,lt),Te),ae.b=Te+=ft,ae.p=fe=8*lt;continue}if(nt==1)Fe=L,Ie=B,qe=9,Re=5;else if(nt==2){var ze=z(q,fe,31)+257,Ce=z(q,fe+10,15)+4,He=ze+z(q,fe+5,31)+1;fe+=14;for(var rt=new e(He),it=new e(19),Nt=0;Nt<Ce;++Nt)it[l[Nt]]=z(q,fe+3*Nt,7);fe+=3*Ce;var kt=D(it),vt=(1<<kt)-1,Mt=M(it,kt,1);for(Nt=0;Nt<He;){var At,mt=Mt[z(q,fe,vt)];if(fe+=15&mt,(At=mt>>>4)<16)rt[Nt++]=At;else{var xe=0,se=0;for(At==16?(se=3+z(q,fe,3),fe+=2,xe=rt[Nt-1]):At==17?(se=3+z(q,fe,7),fe+=3):At==18&&(se=11+z(q,fe,127),fe+=7);se--;)rt[Nt++]=xe}}var $e=rt.subarray(0,ze),ht=rt.subarray(ze);qe=D($e),Re=D(ht),Fe=M($e,qe,1),Ie=M(ht,Re,1)}else H(1);if(fe>Qe){we&&H(0);break}}ge&&re(Te+131072);for(var St=(1<<qe)-1,It=(1<<Re)-1,pt=fe;;pt=fe){var Ke=(xe=Fe[U(q,fe)&St])>>>4;if((fe+=15&xe)>Qe){we&&H(0);break}if(xe||H(2),Ke<256)he[Te++]=Ke;else{if(Ke==256){pt=fe,Fe=null;break}var Le=Ke-254;if(Ke>264){var Q=s[Nt=Ke-257];Le=z(q,fe,(1<<Q)-1)+f[Nt],fe+=Q}var te=Ie[U(q,fe)&It],me=te>>>4;if(te||H(3),fe+=15&te,ht=y[me],me>3&&(Q=o[me],ht+=U(q,fe)&(1<<Q)-1,fe+=Q),fe>Qe){we&&H(0);break}ge&&re(Te+131072);for(var ke=Te+Le;Te<ke;Te+=4)he[Te]=he[Te-ht],he[Te+1]=he[Te+1-ht],he[Te+2]=he[Te+2-ht],he[Te+3]=he[Te+3-ht];Te=ke}}ae.l=Fe,ae.p=pt,ae.b=Te,Fe&&(ie=1,ae.m=qe,ae.d=Ie,ae.n=Re)}while(!ie);return Te==he.length?he:function(Xe,Wt,Ge){(Wt==null||Wt<0)&&(Wt=0),(Ge==null||Ge>Xe.length)&&(Ge=Xe.length);var tn=new(Xe instanceof t?t:Xe instanceof r?r:e)(Ge-Wt);return tn.set(Xe.subarray(Wt,Ge)),tn}(he,0,Te)},le=new e(0),Z=typeof TextDecoder<"u"&&new TextDecoder;try{Z.decode(le,{stream:!0})}catch{}return n.convert_streams=function(q){var he=new DataView(q),ae=0;function ue(){var ze=he.getUint16(ae);return ae+=2,ze}function ge(){var ze=he.getUint32(ae);return ae+=4,ze}function we(ze){ft.setUint16(lt,ze),lt+=2}function J(ze){ft.setUint32(lt,ze),lt+=4}for(var re={signature:ge(),flavor:ge(),length:ge(),numTables:ue(),reserved:ue(),totalSfntSize:ge(),majorVersion:ue(),minorVersion:ue(),metaOffset:ge(),metaLength:ge(),metaOrigLength:ge(),privOffset:ge(),privLength:ge()},ie=0;Math.pow(2,ie)<=re.numTables;)ie++;ie--;for(var fe=16*Math.pow(2,ie),Te=16*re.numTables-fe,Fe=12,Ie=[],qe=0;qe<re.numTables;qe++)Ie.push({tag:ge(),offset:ge(),compLength:ge(),origLength:ge(),origChecksum:ge()}),Fe+=16;var Re,Qe=new Uint8Array(12+16*Ie.length+Ie.reduce(function(ze,Ce){return ze+Ce.origLength+4},0)),nt=Qe.buffer,ft=new DataView(nt),lt=0;return J(re.flavor),we(re.numTables),we(fe),we(ie),we(Te),Ie.forEach(function(ze){J(ze.tag),J(ze.origChecksum),J(Fe),J(ze.origLength),ze.outOffset=Fe,(Fe+=ze.origLength)%4!=0&&(Fe+=4-Fe%4)}),Ie.forEach(function(ze){var Ce,He=q.slice(ze.offset,ze.offset+ze.compLength);if(ze.compLength!=ze.origLength){var rt=new Uint8Array(ze.origLength);Ce=new Uint8Array(He,2),oe(Ce,rt)}else rt=new Uint8Array(He);Qe.set(rt,ze.outOffset);var it=0;(Fe=ze.outOffset+ze.origLength)%4!=0&&(it=4-Fe%4),Qe.set(new Uint8Array(it).buffer,ze.outOffset+ze.origLength),Re=Fe+it}),nt.slice(0,Re)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function fIe(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,o=2,l=4,u=8,h=16,f=32;let g;function y(z){if(!g){const U={R:o,L:s,D:l,C:h,U:f,T:u};g=new Map;for(let V in r){let H=0;r[V].split(",").forEach(oe=>{let[le,Z]=oe.split("+");le=parseInt(le,36),Z=Z?parseInt(Z,36):0,g.set(H+=le,U[V]);for(let q=Z;q--;)g.set(++H,U[V])})}}return g.get(z)||f}const b=1,S=2,C=3,M=4,A=[null,"isol","init","fina","medi"];function O(z){const U=new Uint8Array(z.length);let V=f,H=b,oe=-1;for(let le=0;le<z.length;le++){const Z=z.codePointAt(le);let q=y(Z)|0,he=b;q&u||(V&(s|l|h)?q&(o|l|h)?(he=C,(H===b||H===C)&&U[oe]++):q&(s|f)&&(H===S||H===M)&&U[oe]--:V&(o|f)&&(H===S||H===M)&&U[oe]--,H=U[le]=he,V=q,oe=le,Z>65535&&le++)}return U}function L(z,U){const V=[];for(let oe=0;oe<U.length;oe++){const le=U.codePointAt(oe);le>65535&&oe++,V.push(n.U.codeToGlyph(z,le))}const H=z.GSUB;if(H){const{lookupList:oe,featureList:le}=H;let Z;const q=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,he=[];le.forEach(ae=>{if(q.test(ae.tag))for(let ue=0;ue<ae.tab.length;ue++){if(he[ae.tab[ue]])continue;he[ae.tab[ue]]=!0;const ge=oe[ae.tab[ue]],we=/^(isol|init|fina|medi)$/.test(ae.tag);we&&!Z&&(Z=O(U));for(let J=0;J<V.length;J++)(!Z||!we||A[Z[J]]===ae.tag)&&n.U._applySubs(V,J,ge,oe)}})}return V}function B(...z){for(let U=0;U<z.length;U++)if(typeof z[U]=="number")return z[U]}function D(z){const U=Object.create(null),V=z["OS/2"],H=z.hhea,oe=z.head.unitsPerEm,le=B(V&&V.sTypoAscender,H&&H.ascender,oe),Z={unitsPerEm:oe,ascender:le,descender:B(V&&V.sTypoDescender,H&&H.descender,0),capHeight:B(V&&V.sCapHeight,le),xHeight:B(V&&V.sxHeight,le),lineGap:B(V&&V.sTypoLineGap,H&&H.lineGap),forEachGlyph(q,he,ae,ue){let ge=0;const we=1/Z.unitsPerEm*he,J=L(z,q);let re=0,ie=-1;return J.forEach((fe,Te)=>{if(fe!==-1){let Fe=U[fe];if(!Fe){const{cmds:Ie,crds:qe}=n.U.glyphToPath(z,fe);let Re="",Qe=0;for(let Ce=0,He=Ie.length;Ce<He;Ce++){const rt=t[Ie[Ce]];Re+=Ie[Ce];for(let it=1;it<=rt;it++)Re+=(it>1?",":"")+qe[Qe++]}let nt,ft,lt,ze;if(qe.length){nt=ft=1/0,lt=ze=-1/0;for(let Ce=0,He=qe.length;Ce<He;Ce+=2){let rt=qe[Ce],it=qe[Ce+1];rt<nt&&(nt=rt),it<ft&&(ft=it),rt>lt&&(lt=rt),it>ze&&(ze=it)}}else nt=lt=ft=ze=0;Fe=U[fe]={index:fe,advanceWidth:z.hmtx.aWidth[fe],xMin:nt,yMin:ft,xMax:lt,yMax:ze,path:Re,pathCommandCount:Ie.length}}ie!==-1&&(ge+=n.U.getPairAdjustment(z,ie,fe)*we),ue.call(null,Fe,ge,re),Fe.advanceWidth&&(ge+=Fe.advanceWidth*we),ae&&(ge+=ae*he),ie=fe}re+=q.codePointAt(re)>65535?2:1}),ge}};return Z}return function(z){const U=new Uint8Array(z,0,4),V=n._bin.readASCII(U,0,4);if(V==="wOFF")z=e(z);else if(V==="wOF2")throw new Error("woff2 fonts not supported");return D(n.parse(z)[0])}}const pIe=UC({name:"Typr Font Parser",dependencies:[hIe,dIe,fIe],init(n,e,t){const r=n(),s=e();return t(r,s)}}),nw={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},mIe=new Bn;function OS(){return(self.performance||Date).now()}const LW=Object.create(null);function eee(n,e){n=vIe({},n);const t=OS();if(n.font=yIe(n.font||nw.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||nw.sdfGlyphSize,n.colorRanges!=null){let y={};for(let b in n.colorRanges)if(n.colorRanges.hasOwnProperty(b)){let S=n.colorRanges[b];typeof S!="number"&&(S=mIe.set(S).getHex()),y[b]=S}n.colorRanges=y}Object.freeze(n);const{textureWidth:r,sdfExponent:s}=nw,{sdfGlyphSize:o}=n,l=r/o*4;let u=LW[o];if(!u){const y=document.createElement("canvas");y.width=r,y.height=o*256/l,u=LW[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:y,sdfTexture:new hc(y,void 0,void 0,void 0,wl,wl),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,gIe(u)}const{sdfTexture:h,sdfCanvas:f}=u;let g=u.glyphsByFont.get(n.font);g||u.glyphsByFont.set(n.font,g=new Map),TIe(n).then(y=>{const{glyphIds:b,glyphPositions:S,fontSize:C,unitsPerEm:M,timings:A}=y,O=[],L=new Float32Array(b.length*4),B=C/M;let D=0,z=0;const U=OS();b.forEach((Z,q)=>{let he=g.get(Z);if(!he){const{path:we,pathBounds:J}=y.glyphData[Z],re=Math.max(J[2]-J[0],J[3]-J[1])/o*(nw.sdfMargin*o+.5),ie=u.glyphCount++,fe=[J[0]-re,J[1]-re,J[2]+re,J[3]+re];g.set(Z,he={path:we,atlasIndex:ie,sdfViewBox:fe}),O.push(he)}const{sdfViewBox:ae}=he,ue=S[z++],ge=S[z++];L[D++]=ue+ae[0]*B,L[D++]=ge+ae[1]*B,L[D++]=ue+ae[2]*B,L[D++]=ge+ae[3]*B,b[q]=he.atlasIndex}),A.quads=(A.quads||0)+(OS()-U);const V=OS();A.sdf={};const H=f.height,oe=Math.ceil(u.glyphCount/l),le=Math.pow(2,Math.ceil(Math.log2(oe*o)));le>H&&(console.info(`Increasing SDF texture size ${H}->${le}`),cIe(f,r,le),h.dispose()),Promise.all(O.map(Z=>tee(Z,u,n.gpuAccelerateSDF).then(({timing:q})=>{A.sdf[Z.atlasIndex]=q}))).then(()=>{O.length&&!u.contextLost&&(nee(u),h.needsUpdate=!0),A.sdfTotal=OS()-V,A.total=OS()-t,e(Object.freeze({parameters:n,sdfTexture:h,sdfGlyphSize:o,sdfExponent:s,glyphBounds:L,glyphAtlasIndices:b,glyphColors:y.glyphColors,caretPositions:y.caretPositions,caretHeight:y.caretHeight,chunkedBounds:y.chunkedBounds,ascender:y.ascender,descender:y.descender,lineHeight:y.lineHeight,capHeight:y.capHeight,xHeight:y.xHeight,topBaseline:y.topBaseline,blockBounds:y.blockBounds,visibleBounds:y.visibleBounds,timings:y.timings}))})}),Promise.resolve().then(()=>{u.contextLost||uIe(f)})}function tee({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:r,sdfCanvas:s,contextLost:o},l){if(o)return Promise.resolve({timing:-1});const{textureWidth:u,sdfExponent:h}=nw,f=Math.max(t[2]-t[0],t[3]-t[1]),g=Math.floor(e/4),y=g%(u/r)*r,b=Math.floor(g/(u/r))*r,S=e%4;return rIe(r,r,n,t,f,h,s,y,b,S,l)}function gIe(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const r=[];n.glyphsByFont.forEach(s=>{s.forEach(o=>{r.push(tee(o,n,!0))})}),Promise.all(r).then(()=>{nee(n),n.sdfTexture.needsUpdate=!0})})}function _Ie({font:n,characters:e,sdfGlyphSize:t},r){let s=Array.isArray(e)?e.join(`
`):""+e;eee({font:n,sdfGlyphSize:t,text:s},r)}function vIe(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let BA;function yIe(n){return BA||(BA=typeof document>"u"?{}:document.createElement("a")),BA.href=n,BA.href}function nee(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:r,height:s}=e,o=n.sdfCanvas.getContext("webgl");let l=t.image.data;(!l||l.length!==r*s*4)&&(l=new Uint8Array(r*s*4),t.image={width:r,height:s,data:l},t.flipY=!1,t.isDataTexture=!0),o.readPixels(0,0,r,s,o.RGBA,o.UNSIGNED_BYTE,l)}}const bIe=UC({name:"Typesetter",dependencies:[nw,pIe,nIe,XAe],init(n,e,t,r){const{defaultFontURL:s}=n;return t(e,r(),{defaultFontURL:s})}}),TIe=UC({name:"Typesetter",dependencies:[bIe],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),NW={};function SIe(n){let e=NW[n];if(!e){const t=new c0(1,1,n,n),r=t.clone(),s=t.attributes,o=r.attributes,l=new ui,u=s.uv.count;for(let h=0;h<u;h++)o.position.array[h*3]*=-1,o.normal.array[h*3+2]*=-1;["position","normal","uv"].forEach(h=>{l.setAttribute(h,new ar([...s[h].array,...o[h].array],s[h].itemSize))}),l.setIndex([...t.index.array,...r.index.array.map(h=>h+u)]),l.translate(.5,.5,0),e=NW[n]=l}return e}const wIe="aTroikaGlyphBounds",DW="aTroikaGlyphIndex",EIe="aTroikaGlyphColor";class xIe extends S2{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new y_,this.boundingBox=new d0}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===cd?t/2:0,e===lp?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=SIe(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=t.attributes[r].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,r,s,o){cN(this,wIe,e,4),cN(this,DW,t,1),cN(this,EIe,o,3),this._blockBounds=r,this._chunkedBounds=s,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:r}=this;if(t){const{PI:s,floor:o,min:l,max:u,sin:h,cos:f}=Math,g=s/2,y=s*2,b=Math.abs(t),S=e[0]/b,C=e[2]/b,M=o((S+g)/y)!==o((C+g)/y)?-b:l(h(S)*b,h(C)*b),A=o((S-g)/y)!==o((C-g)/y)?b:u(h(S)*b,h(C)*b),O=o((S+s)/y)!==o((C+s)/y)?b*2:u(b-f(S)*b,b-f(C)*b);r.min.set(M,e[1],t<0?-O:0),r.max.set(A,e[3],t<0?0:O)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(DW).count,r=this._chunkedBounds;if(r)for(let s=r.length;s--;){t=r[s].end;let o=r[s].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}this.instanceCount=t}}function cN(n,e,t,r){const s=n.getAttribute(e);t?s&&s.array.length===t.length?(s.array.set(t),s.needsUpdate=!0):(n.setAttribute(e,new eT(t,r)),delete n._maxInstanceCount,n.dispose()):s&&n.deleteAttribute(e)}const $Ie=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,CIe=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,MIe=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,AIe=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function IIe(n){const e=VP(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new jt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Ts(0,0,0,0)},uTroikaClipRect:{value:new Ts(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new jt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Bn},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new up},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:$Ie,vertexTransform:CIe,fragmentDefs:MIe,fragmentColorTransform:AIe,customRewriter({vertexShader:t,fragmentShader:r}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(r)&&(r=r.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(t)||(t=t.replace(QZ,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const A4=new f0({color:16777215,side:lp,transparent:!0}),PW=8421504,BW=new Qr,FA=new Ae,hN=new Ae,Tx=[],RIe=new Ae,dN="+x+y";function FW(n){return Array.isArray(n)?n[0]:n}let ree=()=>{const n=new Un(new c0(1,1),A4);return ree=()=>n,n},iee=()=>{const n=new Un(new c0(1,1,32,1),A4);return iee=()=>n,n};const kIe={type:"syncstart"},OIe={type:"synccomplete"},see=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],LIe=see.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class oee extends Un{constructor(){const e=new xIe;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=PW,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=dN,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(kIe),eee({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(s=>s&&s())})),this.dispatchEvent(OIe),e&&e()})))}onBeforeRender(e,t,r,s,o,l){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=f_}onAfterRender(e,t,r,s,o,l){o._hadOwnSide?o.side=o._actualSide:delete o.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=A4.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=IIe(t),t.addEventListener("dispose",function r(){t.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function s(){e.removeEventListener("dispose",s),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return FW(this.material).getDepthMaterial()}get customDistanceMaterial(){return FW(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,r=e.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:u,blockBounds:h}=s;r.uTroikaSDFTexture.value=u,r.uTroikaSDFTextureSize.value.set(u.image.width,u.image.height),r.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,r.uTroikaSDFExponent.value=s.sdfExponent,r.uTroikaTotalBounds.value.fromArray(h),r.uTroikaUseGlyphColors.value=!t&&!!s.glyphColors;let f=0,g=0,y=0,b,S,C,M=0,A=0;if(t){let{outlineWidth:L,outlineOffsetX:B,outlineOffsetY:D,outlineBlur:z,outlineOpacity:U}=this;f=this._parsePercent(L)||0,g=Math.max(0,this._parsePercent(z)||0),b=U,M=this._parsePercent(B)||0,A=this._parsePercent(D)||0}else y=Math.max(0,this._parsePercent(this.strokeWidth)||0),y&&(C=this.strokeColor,r.uTroikaStrokeColor.value.set(C??PW),S=this.strokeOpacity,S==null&&(S=1)),b=this.fillOpacity;r.uTroikaDistanceOffset.value=f,r.uTroikaPositionOffset.value.set(M,A),r.uTroikaBlurRadius.value=g,r.uTroikaStrokeWidth.value=y,r.uTroikaStrokeOpacity.value=S,r.uTroikaFillOpacity.value=b??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let O=this.clipRect;if(O&&Array.isArray(O)&&O.length===4)r.uTroikaClipRect.value.fromArray(O);else{const L=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(h[0]-L,h[1]-L,h[2]+L,h[3]+L)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const o=t?this.outlineColor||0:this.color;if(o==null)delete e.color;else{const u=e.hasOwnProperty("color")?e.color:e.color=new Bn;(o!==u._input||typeof o=="object")&&u.set(u._input=o)}let l=this.orientation||dN;if(l!==e._orientation){let u=r.uTroikaOrient.value;l=l.replace(/[^-+xyz]/g,"");let h=l!==dN&&l.match(/^([-+])([xyz])([-+])([xyz])$/);if(h){let[,f,g,y,b]=h;FA.set(0,0,0)[g]=f==="-"?1:-1,hN.set(0,0,0)[b]=y==="-"?-1:1,BW.lookAt(RIe,FA.cross(hN),hN),u.setFromMatrix4(BW)}else u.identity();e._orientation=l}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),r=t?parseFloat(t[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new jt){t.copy(e);const r=this.curveRadius;return r&&(t.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),t}worldPositionToTextCoords(e,t=new jt){return FA.copy(e),this.localPositionToTextCoords(this.worldToLocal(FA),t)}raycast(e,t){const{textRenderInfo:r,curveRadius:s}=this;if(r){const o=r.blockBounds,l=s?iee():ree(),u=l.geometry,{position:h,uv:f}=u.attributes;for(let g=0;g<f.count;g++){let y=o[0]+f.getX(g)*(o[2]-o[0]);const b=o[1]+f.getY(g)*(o[3]-o[1]);let S=0;s&&(S=s-Math.cos(y/s)*s,y=Math.sin(y/s)*s),h.setXYZ(g,y,b,S)}u.boundingSphere=this.geometry.boundingSphere,u.boundingBox=this.geometry.boundingBox,l.matrixWorld=this.matrixWorld,l.material.side=this.material.side,Tx.length=0,l.raycast(e,Tx);for(let g=0;g<Tx.length;g++)Tx[g].object=this,t.push(Tx[g])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,LIe.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}}see.forEach(n=>{const e="_private_"+n;Object.defineProperty(oee.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const NIe=pe.forwardRef(({anchorX:n="center",anchorY:e="middle",font:t,fontSize:r=1,children:s,characters:o,onSync:l,...u},h)=>{const f=nf(({invalidate:S})=>S),[g]=pe.useState(()=>new oee),[y,b]=pe.useMemo(()=>{const S=[];let C="";return pe.Children.forEach(s,M=>{typeof M=="string"||typeof M=="number"?C+=M:S.push(M)}),[S,C]},[s]);return PMe(()=>new Promise(S=>_Ie({font:t,characters:o},S)),["troika-text",t,o]),pe.useLayoutEffect(()=>void g.sync(()=>{f(),l&&l(g)})),pe.useEffect(()=>()=>g.dispose(),[g]),un("primitive",{object:g,ref:h,font:t,text:b,anchorX:n,anchorY:e,fontSize:r,...u,children:y})});var DIe=1/0,PIe=9007199254740991,BIe="[object Arguments]",FIe="[object Function]",zIe="[object GeneratorFunction]",UIe="[object Symbol]",HIe=typeof lv=="object"&&lv&&lv.Object===Object&&lv,GIe=typeof self=="object"&&self&&self.Object===Object&&self,WIe=HIe||GIe||Function("return this")();function VIe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function jIe(n,e){for(var t=-1,r=n?n.length:0,s=Array(r);++t<r;)s[t]=e(n[t],t,n);return s}function YIe(n,e){for(var t=-1,r=e.length,s=n.length;++t<r;)n[s+t]=e[t];return n}var I4=Object.prototype,XIe=I4.hasOwnProperty,R4=I4.toString,zW=WIe.Symbol,KIe=I4.propertyIsEnumerable,UW=zW?zW.isConcatSpreadable:void 0,HW=Math.max;function aee(n,e,t,r,s){var o=-1,l=n.length;for(t||(t=ZIe),s||(s=[]);++o<l;){var u=n[o];e>0&&t(u)?e>1?aee(u,e-1,t,r,s):YIe(s,u):r||(s[s.length]=u)}return s}function JIe(n,e){return n=Object(n),qIe(n,e,function(t,r){return r in n})}function qIe(n,e,t){for(var r=-1,s=e.length,o={};++r<s;){var l=e[r],u=n[l];t(u,l)&&(o[l]=u)}return o}function QIe(n,e){return e=HW(e===void 0?n.length-1:e,0),function(){for(var t=arguments,r=-1,s=HW(t.length-e,0),o=Array(s);++r<s;)o[r]=t[e+r];r=-1;for(var l=Array(e+1);++r<e;)l[r]=t[r];return l[e]=o,VIe(n,this,l)}}function ZIe(n){return nRe(n)||tRe(n)||!!(UW&&n&&n[UW])}function eRe(n){if(typeof n=="string"||lRe(n))return n;var e=n+"";return e=="0"&&1/n==-DIe?"-0":e}function tRe(n){return iRe(n)&&XIe.call(n,"callee")&&(!KIe.call(n,"callee")||R4.call(n)==BIe)}var nRe=Array.isArray;function rRe(n){return n!=null&&oRe(n.length)&&!sRe(n)}function iRe(n){return lee(n)&&rRe(n)}function sRe(n){var e=aRe(n)?R4.call(n):"";return e==FIe||e==zIe}function oRe(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=PIe}function aRe(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function lee(n){return!!n&&typeof n=="object"}function lRe(n){return typeof n=="symbol"||lee(n)&&R4.call(n)==UIe}var uRe=QIe(function(n,e){return n==null?{}:JIe(n,jIe(aee(e,1),eRe))}),fN=uRe;const cRe=pe.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:s=!0,onChange:o,onStart:l,onEnd:u,...h},f)=>{const g=nf(z=>z.invalidate),y=nf(z=>z.camera),b=nf(z=>z.gl),S=nf(z=>z.events),C=nf(z=>z.setEvents),M=nf(z=>z.set),A=nf(z=>z.get),O=nf(z=>z.performance),L=e||y,B=r||S.connected||b.domElement,D=pe.useMemo(()=>new NAe(L),[L]);return Ym(()=>{D.enabled&&D.update()},-1),pe.useEffect(()=>(D.connect(B),()=>void D.dispose()),[B,t,D,g]),pe.useEffect(()=>{const z=H=>{g(),t&&O.regress(),o&&o(H)},U=H=>{l&&l(H)},V=H=>{u&&u(H)};return D.addEventListener("change",z),D.addEventListener("start",U),D.addEventListener("end",V),()=>{D.removeEventListener("start",U),D.removeEventListener("end",V),D.removeEventListener("change",z)}},[o,l,u,D,g,C]),pe.useEffect(()=>{if(n){const z=A().controls;return M({controls:D}),()=>M({controls:z})}},[n,D]),un("primitive",{ref:f,object:D,enableDamping:s,...h})});class hRe extends g2{constructor(e){super(e),this.onBeforeCompile=(t,r)=>{const{isWebGL2:s}=r.capabilities;t.fragmentShader=t.fragmentShader.replace("#include <output_fragment>",`
        ${s?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <encodings_fragment>
      `)}}}const dRe=pe.forwardRef((n,e)=>{const[t]=pe.useState(()=>new hRe(null));return un("primitive",{...n,object:t,ref:e,attach:"material"})});function fRe(n){const e=n+"Geometry";return pe.forwardRef(({args:t,children:r,...s},o)=>Bh("mesh",{ref:o,...s,children:[un(e,{attach:"geometry",args:t}),r]}))}const pRe=fRe("circle");let e1,Sx;const mRe=pe.createContext(null),GW=new Qr,WW=new Ae,gRe=pe.forwardRef(({children:n,range:e,limit:t=1e3,...r},s)=>{const o=pe.useRef(null),[l,u]=pe.useState([]),[[h,f,g]]=pe.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);pe.useEffect(()=>{o.current.geometry.attributes.position.needsUpdate=!0}),Ym(()=>{for(o.current.updateMatrix(),o.current.updateMatrixWorld(),GW.copy(o.current.matrixWorld).invert(),o.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,l.length),e1=0;e1<l.length;e1++)Sx=l[e1].current,Sx.getWorldPosition(WW).applyMatrix4(GW),WW.toArray(h,e1*3),o.current.geometry.attributes.position.needsUpdate=!0,Sx.matrixWorldNeedsUpdate=!0,Sx.color.toArray(f,e1*3),o.current.geometry.attributes.color.needsUpdate=!0,g.set([Sx.size],e1),o.current.geometry.attributes.size.needsUpdate=!0});const y=pe.useMemo(()=>({getParent:()=>o,subscribe:b=>(u(S=>[...S,b]),()=>u(S=>S.filter(C=>C.current!==b.current)))}),[]);return pe.createElement("points",FP({userData:{instances:l},matrixAutoUpdate:!1,ref:$4([s,o]),raycast:()=>null},r),Bh("bufferGeometry",{children:[un("bufferAttribute",{attach:"attributes-position",count:h.length/3,array:h,itemSize:3,usage:N1}),un("bufferAttribute",{attach:"attributes-color",count:f.length/3,array:f,itemSize:3,usage:N1}),un("bufferAttribute",{attach:"attributes-size",count:g.length,array:g,itemSize:1,usage:N1})]}),pe.createElement(mRe.Provider,{value:y},n))}),_Re=pe.forwardRef(({children:n,positions:e,colors:t,sizes:r,stride:s=3,...o},l)=>{const u=pe.useRef(null);return Ym(()=>{const h=u.current.geometry.attributes;h.position.needsUpdate=!0,t&&(h.color.needsUpdate=!0),r&&(h.size.needsUpdate=!0)}),Bh("points",{ref:$4([l,u]),...o,children:[Bh("bufferGeometry",{children:[un("bufferAttribute",{attach:"attributes-position",count:e.length/s,array:e,itemSize:s,usage:N1}),t&&un("bufferAttribute",{attach:"attributes-color",count:t.length/s,array:t,itemSize:3,usage:N1}),r&&un("bufferAttribute",{attach:"attributes-size",count:r.length/s,array:r,itemSize:1,usage:N1})]}),n]})}),vRe=pe.forwardRef((n,e)=>n.positions instanceof Float32Array?un(_Re,{...n,ref:e}):un(gRe,{...n,ref:e})),VW=n=>{let e;const t=new Set,r=(l,u)=>{const h=typeof l=="function"?l(e):l;if(!Object.is(h,e)){const f=e;e=u??typeof h!="object"?h:Object.assign({},e,h),t.forEach(g=>g(e,f))}},s=()=>e,o={setState:r,getState:s,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return e=n(r,s,o),o},yRe=n=>n?VW(n):VW;var uee={exports:{}},pN={},jW={exports:{}},mN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YW;function bRe(){if(YW)return mN;YW=1;var n=yt;function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(y,b){var S=b(),C=r({inst:{value:S,getSnapshot:b}}),M=C[0].inst,A=C[1];return o(function(){M.value=S,M.getSnapshot=b,h(M)&&A({inst:M})},[y,S,b]),s(function(){return h(M)&&A({inst:M}),y(function(){h(M)&&A({inst:M})})},[y]),l(S),S}function h(y){var b=y.getSnapshot;y=y.value;try{var S=b();return!t(y,S)}catch{return!0}}function f(y,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return mN.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,mN}var XW;function TRe(){return XW||(XW=1,function(n){n.exports=bRe()}(jW)),jW.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KW;function SRe(){if(KW)return pN;KW=1;var n=yt,e=TRe();function t(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,h=n.useDebugValue;return pN.useSyncExternalStoreWithSelector=function(f,g,y,b,S){var C=o(null);if(C.current===null){var M={hasValue:!1,value:null};C.current=M}else M=C.current;C=u(function(){function O(U){if(!L){if(L=!0,B=U,U=b(U),S!==void 0&&M.hasValue){var V=M.value;if(S(V,U))return D=V}return D=U}if(V=D,r(B,U))return V;var H=b(U);return S!==void 0&&S(V,H)?V:(B=U,D=H)}var L=!1,B,D,z=y===void 0?null:y;return[function(){return O(g())},z===null?void 0:function(){return O(z())}]},[g,y,b,S]);var A=s(f,C[0],C[1]);return l(function(){M.hasValue=!0,M.value=A},[A]),h(A),A},pN}(function(n){n.exports=SRe()})(uee);const wRe=EZ(uee.exports),{useSyncExternalStoreWithSelector:ERe}=wRe;function cee(n,e=n.getState,t){const r=ERe(n.subscribe,n.getState,n.getServerState||n.getState,e,t);return pe.useDebugValue(r),r}const JW=n=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?yRe(n):n,t=(r,s)=>cee(e,r,s);return Object.assign(t,e),t},xRe=n=>n?JW(n):JW,$Re=n=>(e,t,r)=>{const s=r.subscribe;return r.subscribe=(o,l,u)=>{let h=o;if(l){const f=(u==null?void 0:u.equalityFn)||Object.is;let g=o(r.getState());h=y=>{const b=o(y);if(!f(g,b)){const S=g;l(g=b,S)}},u!=null&&u.fireImmediately&&l(g,g)}return s(h)},n(e,t,r)},CRe=$Re;function t0(n){for(var e=arguments.length,t=Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+n+(t.length?" "+t.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Kw(n){return!!n&&!!n[Fm]}function rT(n){return!!n&&(function(e){if(!e||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===NRe}(n)||Array.isArray(n)||!!n[i9]||!!n.constructor[i9]||k4(n)||O4(n))}function rC(n,e,t){t===void 0&&(t=!1),vE(n)===0?(t?Object.keys:B4)(n).forEach(function(r){t&&typeof r=="symbol"||e(r,n[r],n)}):n.forEach(function(r,s){return e(s,r,n)})}function vE(n){var e=n[Fm];return e?e.i>3?e.i-4:e.i:Array.isArray(n)?1:k4(n)?2:O4(n)?3:0}function YP(n,e){return vE(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function MRe(n,e){return vE(n)===2?n.get(e):n[e]}function hee(n,e,t){var r=vE(n);r===2?n.set(e,t):r===3?(n.delete(e),n.add(t)):n[e]=t}function ARe(n,e){return n===e?n!==0||1/n==1/e:n!=n&&e!=e}function k4(n){return ORe&&n instanceof Map}function O4(n){return LRe&&n instanceof Set}function h1(n){return n.o||n.t}function L4(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var e=DRe(n);delete e[Fm];for(var t=B4(e),r=0;r<t.length;r++){var s=t[r],o=e[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[s]})}return Object.create(Object.getPrototypeOf(n),e)}function N4(n,e){return e===void 0&&(e=!1),D4(n)||Kw(n)||!rT(n)||(vE(n)>1&&(n.set=n.add=n.clear=n.delete=IRe),Object.freeze(n),e&&rC(n,function(t,r){return N4(r,!0)},!0)),n}function IRe(){t0(2)}function D4(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function h_(n){var e=PRe[n];return e||t0(18,n),e}function qW(){return iC}function gN(n,e){e&&(h_("Patches"),n.u=[],n.s=[],n.v=e)}function $R(n){XP(n),n.p.forEach(RRe),n.p=null}function XP(n){n===iC&&(iC=n.l)}function QW(n){return iC={p:[],l:iC,h:n,m:!0,_:0}}function RRe(n){var e=n[Fm];e.i===0||e.i===1?e.j():e.O=!0}function _N(n,e){e._=e.p.length;var t=e.p[0],r=n!==void 0&&n!==t;return e.h.g||h_("ES5").S(e,n,r),r?(t[Fm].P&&($R(e),t0(4)),rT(n)&&(n=CR(e,n),e.l||MR(e,n)),e.u&&h_("Patches").M(t[Fm].t,n,e.u,e.s)):n=CR(e,t,[]),$R(e),e.u&&e.v(e.u,e.s),n!==dee?n:void 0}function CR(n,e,t){if(D4(e))return e;var r=e[Fm];if(!r)return rC(e,function(o,l){return ZW(n,r,e,o,l,t)},!0),e;if(r.A!==n)return e;if(!r.P)return MR(n,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=L4(r.k):r.o;rC(r.i===3?new Set(s):s,function(o,l){return ZW(n,r,s,o,l,t)}),MR(n,s,!1),t&&n.u&&h_("Patches").R(r,t,n.u,n.s)}return r.o}function ZW(n,e,t,r,s,o){if(Kw(s)){var l=CR(n,s,o&&e&&e.i!==3&&!YP(e.D,r)?o.concat(r):void 0);if(hee(t,r,l),!Kw(l))return;n.m=!1}if(rT(s)&&!D4(s)){if(!n.h.F&&n._<1)return;CR(n,s),e&&e.A.l||MR(n,s)}}function MR(n,e,t){t===void 0&&(t=!1),n.h.F&&n.m&&N4(e,t)}function vN(n,e){var t=n[Fm];return(t?h1(t):n)[e]}function e9(n,e){if(e in n)for(var t=Object.getPrototypeOf(n);t;){var r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Object.getPrototypeOf(t)}}function KP(n){n.P||(n.P=!0,n.l&&KP(n.l))}function yN(n){n.o||(n.o=L4(n.t))}function JP(n,e,t){var r=k4(e)?h_("MapSet").N(e,t):O4(e)?h_("MapSet").T(e,t):n.g?function(s,o){var l=Array.isArray(s),u={i:l?1:0,A:o?o.A:qW(),P:!1,I:!1,D:{},l:o,t:s,k:null,o:null,j:null,C:!1},h=u,f=qP;l&&(h=[u],f=Nx);var g=Proxy.revocable(h,f),y=g.revoke,b=g.proxy;return u.k=b,u.j=y,b}(e,t):h_("ES5").J(e,t);return(t?t.A:qW()).p.push(r),r}function kRe(n){return Kw(n)||t0(22,n),function e(t){if(!rT(t))return t;var r,s=t[Fm],o=vE(t);if(s){if(!s.P&&(s.i<4||!h_("ES5").K(s)))return s.t;s.I=!0,r=t9(t,o),s.I=!1}else r=t9(t,o);return rC(r,function(l,u){s&&MRe(s.t,l)===u||hee(r,l,e(u))}),o===3?new Set(r):r}(n)}function t9(n,e){switch(e){case 2:return new Map(n);case 3:return Array.from(n)}return L4(n)}var n9,iC,P4=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",ORe=typeof Map<"u",LRe=typeof Set<"u",r9=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",dee=P4?Symbol.for("immer-nothing"):((n9={})["immer-nothing"]=!0,n9),i9=P4?Symbol.for("immer-draftable"):"__$immer_draftable",Fm=P4?Symbol.for("immer-state"):"__$immer_state",NRe=""+Object.prototype.constructor,B4=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,DRe=Object.getOwnPropertyDescriptors||function(n){var e={};return B4(n).forEach(function(t){e[t]=Object.getOwnPropertyDescriptor(n,t)}),e},PRe={},qP={get:function(n,e){if(e===Fm)return n;var t=h1(n);if(!YP(t,e))return function(s,o,l){var u,h=e9(o,l);return h?"value"in h?h.value:(u=h.get)===null||u===void 0?void 0:u.call(s.k):void 0}(n,t,e);var r=t[e];return n.I||!rT(r)?r:r===vN(n.t,e)?(yN(n),n.o[e]=JP(n.A.h,r,n)):r},has:function(n,e){return e in h1(n)},ownKeys:function(n){return Reflect.ownKeys(h1(n))},set:function(n,e,t){var r=e9(h1(n),e);if(r!=null&&r.set)return r.set.call(n.k,t),!0;if(!n.P){var s=vN(h1(n),e),o=s==null?void 0:s[Fm];if(o&&o.t===t)return n.o[e]=t,n.D[e]=!1,!0;if(ARe(t,s)&&(t!==void 0||YP(n.t,e)))return!0;yN(n),KP(n)}return n.o[e]===t&&typeof t!="number"&&(t!==void 0||e in n.o)||(n.o[e]=t,n.D[e]=!0,!0)},deleteProperty:function(n,e){return vN(n.t,e)!==void 0||e in n.t?(n.D[e]=!1,yN(n),KP(n)):delete n.D[e],n.o&&delete n.o[e],!0},getOwnPropertyDescriptor:function(n,e){var t=h1(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.i!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty:function(){t0(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){t0(12)}},Nx={};rC(qP,function(n,e){Nx[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Nx.deleteProperty=function(n,e){return Nx.set.call(this,n,e,void 0)},Nx.set=function(n,e,t){return qP.set.call(this,n[0],e,t,n[0])};var BRe=function(){function n(t){var r=this;this.g=r9,this.F=!0,this.produce=function(s,o,l){if(typeof s=="function"&&typeof o!="function"){var u=o;o=s;var h=r;return function(M){var A=this;M===void 0&&(M=u);for(var O=arguments.length,L=Array(O>1?O-1:0),B=1;B<O;B++)L[B-1]=arguments[B];return h.produce(M,function(D){var z;return(z=o).call.apply(z,[A,D].concat(L))})}}var f;if(typeof o!="function"&&t0(6),l!==void 0&&typeof l!="function"&&t0(7),rT(s)){var g=QW(r),y=JP(r,s,void 0),b=!0;try{f=o(y),b=!1}finally{b?$R(g):XP(g)}return typeof Promise<"u"&&f instanceof Promise?f.then(function(M){return gN(g,l),_N(M,g)},function(M){throw $R(g),M}):(gN(g,l),_N(f,g))}if(!s||typeof s!="object"){if((f=o(s))===void 0&&(f=s),f===dee&&(f=void 0),r.F&&N4(f,!0),l){var S=[],C=[];h_("Patches").M(s,f,S,C),l(S,C)}return f}t0(21,s)},this.produceWithPatches=function(s,o){if(typeof s=="function")return function(f){for(var g=arguments.length,y=Array(g>1?g-1:0),b=1;b<g;b++)y[b-1]=arguments[b];return r.produceWithPatches(f,function(S){return s.apply(void 0,[S].concat(y))})};var l,u,h=r.produce(s,o,function(f,g){l=f,u=g});return typeof Promise<"u"&&h instanceof Promise?h.then(function(f){return[f,l,u]}):[h,l,u]},typeof(t==null?void 0:t.useProxies)=="boolean"&&this.setUseProxies(t.useProxies),typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=n.prototype;return e.createDraft=function(t){rT(t)||t0(8),Kw(t)&&(t=kRe(t));var r=QW(this),s=JP(this,t,void 0);return s[Fm].C=!0,XP(r),s},e.finishDraft=function(t,r){var s=t&&t[Fm],o=s.A;return gN(o,r),_N(void 0,o)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!r9&&t0(20),this.g=t},e.applyPatches=function(t,r){var s;for(s=r.length-1;s>=0;s--){var o=r[s];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}s>-1&&(r=r.slice(s+1));var l=h_("Patches").$;return Kw(t)?l(t,r):this.produce(t,function(u){return l(u,r)})},n}(),zm=new BRe,FRe=zm.produce;zm.produceWithPatches.bind(zm);zm.setAutoFreeze.bind(zm);zm.setUseProxies.bind(zm);zm.applyPatches.bind(zm);zm.createDraft.bind(zm);zm.finishDraft.bind(zm);const zRe=n=>(e,t,r)=>(r.setState=(s,o,...l)=>{const u=typeof s=="function"?FRe(s):s;return e(u,o,...l)},n(r.setState,t,r)),URe=zRe;class HRe{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=GRe.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function GRe(){document.hidden===!1&&this.reset()}var fg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,r="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",f=500,g="__lodash_placeholder__",y=1,b=2,S=4,C=1,M=2,A=1,O=2,L=4,B=8,D=16,z=32,U=64,V=128,H=256,oe=512,le=30,Z="...",q=800,he=16,ae=1,ue=2,ge=3,we=1/0,J=9007199254740991,re=17976931348623157e292,ie=NaN,fe=4294967295,Te=fe-1,Fe=fe>>>1,Ie=[["ary",V],["bind",A],["bindKey",O],["curry",B],["curryRight",D],["flip",oe],["partial",z],["partialRight",U],["rearg",H]],qe="[object Arguments]",Re="[object Array]",Qe="[object AsyncFunction]",nt="[object Boolean]",ft="[object Date]",lt="[object DOMException]",ze="[object Error]",Ce="[object Function]",He="[object GeneratorFunction]",rt="[object Map]",it="[object Number]",Nt="[object Null]",kt="[object Object]",vt="[object Promise]",Mt="[object Proxy]",At="[object RegExp]",mt="[object Set]",xe="[object String]",se="[object Symbol]",$e="[object Undefined]",ht="[object WeakMap]",St="[object WeakSet]",It="[object ArrayBuffer]",pt="[object DataView]",Ke="[object Float32Array]",Le="[object Float64Array]",Q="[object Int8Array]",te="[object Int16Array]",me="[object Int32Array]",ke="[object Uint8Array]",Xe="[object Uint8ClampedArray]",Wt="[object Uint16Array]",Ge="[object Uint32Array]",tn=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,Jt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Kt=/&(?:amp|lt|gt|quot|#39);/g,On=/[&<>"']/g,si=RegExp(Kt.source),Pr=RegExp(On.source),Ei=/<%-([\s\S]+?)%>/g,$r=/<%([\s\S]+?)%>/g,gr=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Se=/^\w*$/,We=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ot=/[\\^$.*+?()[\]{}|]/g,zt=RegExp(ot.source),sn=/^\s+/,Nn=/\s/,De=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ct=/,? & /,bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vt=/[()=,{}\[\]\/\s]/,Wn=/\\(\\)?/g,rr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_r=/\w*$/,Cr=/^[-+]0x[0-9a-f]+$/i,oi=/^0b[01]+$/i,Br=/^\[object .+?Constructor\]$/,Yr=/^0o[0-7]+$/i,Ss=/^(?:0|[1-9]\d*)$/,Oa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xo=/($^)/,Yl=/['\n\r\u2028\u2029\\]/g,nn="\\ud800-\\udfff",Rr="\\u0300-\\u036f",el="\\ufe20-\\ufe2f",La="\\u20d0-\\u20ff",Fs=Rr+el+La,zs="\\u2700-\\u27bf",Di="a-z\\xdf-\\xf6\\xf8-\\xff",kr="\\xac\\xb1\\xd7\\xf7",An="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ir="\\u2000-\\u206f",Gr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yr="A-Z\\xc0-\\xd6\\xd8-\\xde",Pi="\\ufe0e\\ufe0f",ws=kr+An+Ir+Gr,fi="[']",gs="["+nn+"]",tl="["+ws+"]",Na="["+Fs+"]",dc="\\d+",fc="["+zs+"]",Xs="["+Di+"]",qo="[^"+nn+ws+dc+zs+Di+yr+"]",Xl="\\ud83c[\\udffb-\\udfff]",gu="(?:"+Na+"|"+Xl+")",mh="[^"+nn+"]",Qo="(?:\\ud83c[\\udde6-\\uddff]){2}",vr="[\\ud800-\\udbff][\\udc00-\\udfff]",xi="["+yr+"]",Dc="\\u200d",gh="(?:"+Xs+"|"+qo+")",Pc="(?:"+xi+"|"+qo+")",El="(?:"+fi+"(?:d|ll|m|re|s|t|ve))?",_u="(?:"+fi+"(?:D|LL|M|RE|S|T|VE))?",xl=gu+"?",$l="["+Pi+"]?",br="(?:"+Dc+"(?:"+[mh,Qo,vr].join("|")+")"+$l+xl+")*",Tr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Kl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",nl=$l+xl+br,rl="(?:"+[fc,Qo,vr].join("|")+")"+nl,vu="(?:"+[mh+Na+"?",Na,Qo,vr,gs].join("|")+")",qi=RegExp(fi,"g"),_s=RegExp(Na,"g"),il=RegExp(Xl+"(?="+Xl+")|"+vu+nl,"g"),Cd=RegExp([xi+"?"+Xs+"+"+El+"(?="+[tl,xi,"$"].join("|")+")",Pc+"+"+_u+"(?="+[tl,xi+gh,"$"].join("|")+")",xi+"?"+gh+"+"+El,xi+"+"+_u,Kl,Tr,dc,rl].join("|"),"g"),io=RegExp("["+Dc+nn+Fs+Pi+"]"),zu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ca=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yu=-1,or={};or[Ke]=or[Le]=or[Q]=or[te]=or[me]=or[ke]=or[Xe]=or[Wt]=or[Ge]=!0,or[qe]=or[Re]=or[It]=or[nt]=or[pt]=or[ft]=or[ze]=or[Ce]=or[rt]=or[it]=or[kt]=or[At]=or[mt]=or[xe]=or[ht]=!1;var Gn={};Gn[qe]=Gn[Re]=Gn[It]=Gn[pt]=Gn[nt]=Gn[ft]=Gn[Ke]=Gn[Le]=Gn[Q]=Gn[te]=Gn[me]=Gn[rt]=Gn[it]=Gn[kt]=Gn[At]=Gn[mt]=Gn[xe]=Gn[se]=Gn[ke]=Gn[Xe]=Gn[Wt]=Gn[Ge]=!0,Gn[ze]=Gn[Ce]=Gn[ht]=!1;var Es={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},so={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Uu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},bu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_h=parseFloat,Da=parseInt,ha=typeof lv=="object"&&lv&&lv.Object===Object&&lv,Hu=typeof self=="object"&&self&&self.Object===Object&&self,wr=ha||Hu||Function("return this")(),Rs=e&&!e.nodeType&&e,bi=Rs&&!0&&n&&!n.nodeType&&n,$i=bi&&bi.exports===Rs,da=$i&&ha.process,Zr=function(){try{var ye=bi&&bi.require&&bi.require("util").types;return ye||da&&da.binding&&da.binding("util")}catch{}}(),Tu=Zr&&Zr.isArrayBuffer,$o=Zr&&Zr.isDate,Su=Zr&&Zr.isMap,sl=Zr&&Zr.isRegExp,Bi=Zr&&Zr.isSet,Ci=Zr&&Zr.isTypedArray;function Vn(ye,je,Be){switch(Be.length){case 0:return ye.call(je);case 1:return ye.call(je,Be[0]);case 2:return ye.call(je,Be[0],Be[1]);case 3:return ye.call(je,Be[0],Be[1],Be[2])}return ye.apply(je,Be)}function Mi(ye,je,Be,Ot){for(var rn=-1,In=ye==null?0:ye.length;++rn<In;){var Jn=ye[rn];je(Ot,Jn,Be(Jn),ye)}return Ot}function Xr(ye,je){for(var Be=-1,Ot=ye==null?0:ye.length;++Be<Ot&&je(ye[Be],Be,ye)!==!1;);return ye}function dd(ye,je){for(var Be=ye==null?0:ye.length;Be--&&je(ye[Be],Be,ye)!==!1;);return ye}function wu(ye,je){for(var Be=-1,Ot=ye==null?0:ye.length;++Be<Ot;)if(!je(ye[Be],Be,ye))return!1;return!0}function Vi(ye,je){for(var Be=-1,Ot=ye==null?0:ye.length,rn=0,In=[];++Be<Ot;){var Jn=ye[Be];je(Jn,Be,ye)&&(In[rn++]=Jn)}return In}function Pa(ye,je){var Be=ye==null?0:ye.length;return!!Be&&ks(ye,je,0)>-1}function vh(ye,je,Be){for(var Ot=-1,rn=ye==null?0:ye.length;++Ot<rn;)if(Be(je,ye[Ot]))return!0;return!1}function fr(ye,je){for(var Be=-1,Ot=ye==null?0:ye.length,rn=Array(Ot);++Be<Ot;)rn[Be]=je(ye[Be],Be,ye);return rn}function Zo(ye,je){for(var Be=-1,Ot=je.length,rn=ye.length;++Be<Ot;)ye[rn+Be]=je[Be];return ye}function fd(ye,je,Be,Ot){var rn=-1,In=ye==null?0:ye.length;for(Ot&&In&&(Be=ye[++rn]);++rn<In;)Be=je(Be,ye[rn],rn,ye);return Be}function lf(ye,je,Be,Ot){var rn=ye==null?0:ye.length;for(Ot&&rn&&(Be=ye[--rn]);rn--;)Be=je(Be,ye[rn],rn,ye);return Be}function Bc(ye,je){for(var Be=-1,Ot=ye==null?0:ye.length;++Be<Ot;)if(je(ye[Be],Be,ye))return!0;return!1}var uf=ci("length");function Bf(ye){return ye.split("")}function Tp(ye){return ye.match(bt)||[]}function Md(ye,je,Be){var Ot;return Be(ye,function(rn,In,Jn){if(je(rn,In,Jn))return Ot=In,!1}),Ot}function Jl(ye,je,Be,Ot){for(var rn=ye.length,In=Be+(Ot?1:-1);Ot?In--:++In<rn;)if(je(ye[In],In,ye))return In;return-1}function ks(ye,je,Be){return je===je?zc(ye,je,Be):Jl(ye,yh,Be)}function Gu(ye,je,Be,Ot){for(var rn=Be-1,In=ye.length;++rn<In;)if(Ot(ye[rn],je))return rn;return-1}function yh(ye){return ye!==ye}function Ba(ye,je){var Be=ye==null?0:ye.length;return Be?zo(ye,je)/Be:ie}function ci(ye){return function(je){return je==null?t:je[ye]}}function Er(ye){return function(je){return ye==null?t:ye[je]}}function oo(ye,je,Be,Ot,rn){return rn(ye,function(In,Jn,vn){Be=Ot?(Ot=!1,In):je(Be,In,Jn,vn)}),Be}function Fa(ye,je){var Be=ye.length;for(ye.sort(je);Be--;)ye[Be]=ye[Be].value;return ye}function zo(ye,je){for(var Be,Ot=-1,rn=ye.length;++Ot<rn;){var In=je(ye[Ot]);In!==t&&(Be=Be===t?In:Be+In)}return Be}function ql(ye,je){for(var Be=-1,Ot=Array(ye);++Be<ye;)Ot[Be]=je(Be);return Ot}function Ql(ye,je){return fr(je,function(Be){return[Be,ye[Be]]})}function Fh(ye){return ye&&ye.slice(0,Cl(ye)+1).replace(sn,"")}function Wr(ye){return function(je){return ye(je)}}function Ai(ye,je){return fr(je,function(Be){return ye[Be]})}function Sr(ye,je){return ye.has(je)}function ji(ye,je){for(var Be=-1,Ot=ye.length;++Be<Ot&&ks(je,ye[Be],0)>-1;);return Be}function fa(ye,je){for(var Be=ye.length;Be--&&ks(je,ye[Be],0)>-1;);return Be}function Eu(ye,je){for(var Be=ye.length,Ot=0;Be--;)ye[Be]===je&&++Ot;return Ot}var cf=Er(Es),hf=Er(so);function pd(ye){return"\\"+bu[ye]}function Wu(ye,je){return ye==null?t:ye[je]}function ol(ye){return io.test(ye)}function Fc(ye){return zu.test(ye)}function zh(ye){for(var je,Be=[];!(je=ye.next()).done;)Be.push(je.value);return Be}function Vu(ye){var je=-1,Be=Array(ye.size);return ye.forEach(function(Ot,rn){Be[++je]=[rn,Ot]}),Be}function Zl(ye,je){return function(Be){return ye(je(Be))}}function Us(ye,je){for(var Be=-1,Ot=ye.length,rn=0,In=[];++Be<Ot;){var Jn=ye[Be];(Jn===je||Jn===g)&&(ye[Be]=g,In[rn++]=Be)}return In}function eu(ye){var je=-1,Be=Array(ye.size);return ye.forEach(function(Ot){Be[++je]=Ot}),Be}function Uh(ye){var je=-1,Be=Array(ye.size);return ye.forEach(function(Ot){Be[++je]=[Ot,Ot]}),Be}function zc(ye,je,Be){for(var Ot=Be-1,rn=ye.length;++Ot<rn;)if(ye[Ot]===je)return Ot;return-1}function Uc(ye,je,Be){for(var Ot=Be+1;Ot--;)if(ye[Ot]===je)return Ot;return Ot}function is(ye){return ol(ye)?tu(ye):uf(ye)}function Fr(ye){return ol(ye)?xu(ye):Bf(ye)}function Cl(ye){for(var je=ye.length;je--&&Nn.test(ye.charAt(je)););return je}var za=Er(Uu);function tu(ye){for(var je=il.lastIndex=0;il.test(ye);)++je;return je}function xu(ye){return ye.match(il)||[]}function bh(ye){return ye.match(Cd)||[]}var Ad=function ye(je){je=je==null?wr:pi.defaults(wr.Object(),je,pi.pick(wr,ca));var Be=je.Array,Ot=je.Date,rn=je.Error,In=je.Function,Jn=je.Math,vn=je.Object,zr=je.RegExp,ao=je.String,Ti=je.TypeError,lo=Be.prototype,al=In.prototype,Fi=vn.prototype,vs=je["__core-js_shared__"],$u=al.toString,qn=Fi.hasOwnProperty,pa=0,Ks=function(){var c=/[^.]+$/.exec(vs&&vs.keys&&vs.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Hs=Fi.toString,Ua=$u.call(vn),Hh=wr._,Th=zr("^"+$u.call(qn).replace(ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pc=$i?je.Buffer:t,ea=je.Symbol,Hc=je.Uint8Array,Gh=pc?pc.allocUnsafe:t,Ha=Zl(vn.getPrototypeOf,vn),Wh=vn.create,mc=Fi.propertyIsEnumerable,ju=lo.splice,md=ea?ea.isConcatSpreadable:t,ta=ea?ea.iterator:t,uo=ea?ea.toStringTag:t,Ml=function(){try{var c=wa(vn,"defineProperty");return c({},"",{}),c}catch{}}(),Vh=je.clearTimeout!==wr.clearTimeout&&je.clearTimeout,zi=Ot&&Ot.now!==wr.Date.now&&Ot.now,gd=je.setTimeout!==wr.setTimeout&&je.setTimeout,Yu=Jn.ceil,nu=Jn.floor,Gc=vn.getOwnPropertySymbols,Id=pc?pc.isBuffer:t,Al=je.isFinite,Rd=lo.join,jh=Zl(vn.keys,vn),ei=Jn.max,Ii=Jn.min,Sp=Ot.now,Ff=je.parseInt,Il=Jn.random,ru=lo.reverse,Xu=wa(je,"DataView"),Ku=wa(je,"Map"),Sh=wa(je,"Promise"),ll=wa(je,"Set"),na=wa(je,"WeakMap"),Rl=wa(vn,"create"),Wc=na&&new na,kl={},Vc=Ja(Xu),gc=Ja(Ku),kd=Ja(Sh),Ga=Ja(ll),Vr=Ja(na),ul=ea?ea.prototype:t,Qi=ul?ul.valueOf:t,ma=ul?ul.toString:t;function X(c){if(di(c)&&!kn(c)&&!(c instanceof mn)){if(c instanceof Mr)return c;if(qn.call(c,"__wrapped__"))return Fd(c)}return new Mr(c)}var xs=function(){function c(){}return function(m){if(!ri(m))return{};if(Wh)return Wh(m);c.prototype=m;var E=new c;return c.prototype=t,E}}();function ga(){}function Mr(c,m){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=t}X.templateSettings={escape:Ei,evaluate:$r,interpolate:gr,variable:"",imports:{_:X}},X.prototype=ga.prototype,X.prototype.constructor=X,Mr.prototype=xs(ga.prototype),Mr.prototype.constructor=Mr;function mn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fe,this.__views__=[]}function zf(){var c=new mn(this.__wrapped__);return c.__actions__=ni(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=ni(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=ni(this.__views__),c}function cl(){if(this.__filtered__){var c=new mn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Ri(){var c=this.__wrapped__.value(),m=this.__dir__,E=kn(c),N=m<0,G=E?c.length:0,K=_n(0,G,this.__views__),ce=K.start,_e=K.end,Ee=_e-ce,et=N?_e:ce-1,tt=this.__iteratees__,ct=tt.length,Rt=0,Xt=Ii(Ee,this.__takeCount__);if(!E||!N&&G==Ee&&Xt==Ee)return Zc(c,this.__actions__);var pn=[];e:for(;Ee--&&Rt<Xt;){et+=m;for(var Ln=-1,dn=c[et];++Ln<ct;){var Yn=tt[Ln],er=Yn.iteratee,ua=Yn.type,to=er(dn);if(ua==ue)dn=to;else if(!to){if(ua==ae)continue e;break e}}pn[Rt++]=dn}return pn}mn.prototype=xs(ga.prototype),mn.prototype.constructor=mn;function hi(c){var m=-1,E=c==null?0:c.length;for(this.clear();++m<E;){var N=c[m];this.set(N[0],N[1])}}function Zi(){this.__data__=Rl?Rl(null):{},this.size=0}function ss(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m}function jc(c){var m=this.__data__;if(Rl){var E=m[c];return E===h?t:E}return qn.call(m,c)?m[c]:t}function _a(c){var m=this.__data__;return Rl?m[c]!==t:qn.call(m,c)}function va(c,m){var E=this.__data__;return this.size+=this.has(c)?0:1,E[c]=Rl&&m===t?h:m,this}hi.prototype.clear=Zi,hi.prototype.delete=ss,hi.prototype.get=jc,hi.prototype.has=_a,hi.prototype.set=va;function os(c){var m=-1,E=c==null?0:c.length;for(this.clear();++m<E;){var N=c[m];this.set(N[0],N[1])}}function Yc(){this.__data__=[],this.size=0}function ra(c){var m=this.__data__,E=ys(m,c);if(E<0)return!1;var N=m.length-1;return E==N?m.pop():ju.call(m,E,1),--this.size,!0}function Od(c){var m=this.__data__,E=ys(m,c);return E<0?t:m[E][1]}function Ld(c){return ys(this.__data__,c)>-1}function Yh(c,m){var E=this.__data__,N=ys(E,c);return N<0?(++this.size,E.push([c,m])):E[N][1]=m,this}os.prototype.clear=Yc,os.prototype.delete=ra,os.prototype.get=Od,os.prototype.has=Ld,os.prototype.set=Yh;function Gs(c){var m=-1,E=c==null?0:c.length;for(this.clear();++m<E;){var N=c[m];this.set(N[0],N[1])}}function Kn(){this.size=0,this.__data__={hash:new hi,map:new(Ku||os),string:new hi}}function Ws(c){var m=th(this,c).delete(c);return this.size-=m?1:0,m}function Js(c){return th(this,c).get(c)}function Ui(c){return th(this,c).has(c)}function iu(c,m){var E=th(this,c),N=E.size;return E.set(c,m),this.size+=E.size==N?0:1,this}Gs.prototype.clear=Kn,Gs.prototype.delete=Ws,Gs.prototype.get=Js,Gs.prototype.has=Ui,Gs.prototype.set=iu;function Uo(c){var m=-1,E=c==null?0:c.length;for(this.__data__=new Gs;++m<E;)this.add(c[m])}function xn(c){return this.__data__.set(c,h),this}function mi(c){return this.__data__.has(c)}Uo.prototype.add=Uo.prototype.push=xn,Uo.prototype.has=mi;function gi(c){var m=this.__data__=new os(c);this.size=m.size}function Uf(){this.__data__=new os,this.size=0}function wh(c){var m=this.__data__,E=m.delete(c);return this.size=m.size,E}function co(c){return this.__data__.get(c)}function ya(c){return this.__data__.has(c)}function Cn(c,m){var E=this.__data__;if(E instanceof os){var N=E.__data__;if(!Ku||N.length<s-1)return N.push([c,m]),this.size=++E.size,this;E=this.__data__=new Gs(N)}return E.set(c,m),this.size=E.size,this}gi.prototype.clear=Uf,gi.prototype.delete=wh,gi.prototype.get=co,gi.prototype.has=ya,gi.prototype.set=Cn;function yn(c,m){var E=kn(c),N=!E&&Yd(c),G=!E&&!N&&ah(c),K=!E&&!N&&!G&&Jd(c),ce=E||N||G||K,_e=ce?ql(c.length,ao):[],Ee=_e.length;for(var et in c)(m||qn.call(c,et))&&!(ce&&(et=="length"||G&&(et=="offset"||et=="parent")||K&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||Ka(et,Ee)))&&_e.push(et);return _e}function hl(c){var m=c.length;return m?c[Os(0,m-1)]:t}function _c(c,m){return pr(ni(c),Wa(m,0,c.length))}function wp(c){return pr(ni(c))}function su(c,m,E){(E!==t&&!Ca(c[m],E)||E===t&&!(m in c))&&Ho(c,m,E)}function Co(c,m,E){var N=c[m];(!(qn.call(c,m)&&Ca(N,E))||E===t&&!(m in c))&&Ho(c,m,E)}function ys(c,m){for(var E=c.length;E--;)if(Ca(c[E][0],m))return E;return-1}function dl(c,m,E,N){return Mo(c,function(G,K,ce){m(N,G,E(G),ce)}),N}function as(c,m){return c&&cs(m,wi(m),c)}function fl(c,m){return c&&cs(m,ns(m),c)}function Ho(c,m,E){m=="__proto__"&&Ml?Ml(c,m,{configurable:!0,enumerable:!0,value:E,writable:!0}):c[m]=E}function Xh(c,m){for(var E=-1,N=m.length,G=Be(N),K=c==null;++E<N;)G[E]=K?t:vm(c,m[E]);return G}function Wa(c,m,E){return c===c&&(E!==t&&(c=c<=E?c:E),m!==t&&(c=c>=m?c:m)),c}function ki(c,m,E,N,G,K){var ce,_e=m&y,Ee=m&b,et=m&S;if(E&&(ce=G?E(c,N,G,K):E(c)),ce!==t)return ce;if(!ri(c))return c;var tt=kn(c);if(tt){if(ce=Km(c),!_e)return ni(c,ce)}else{var ct=hs(c),Rt=ct==Ce||ct==He;if(ah(c))return eh(c,_e);if(ct==kt||ct==qe||Rt&&!G){if(ce=Ee||Rt?{}:Ec(c),!_e)return Ee?yd(c,fl(ce,c)):qh(c,as(ce,c))}else{if(!Gn[ct])return G?c:{};ce=Zs(c,ct,_e)}}K||(K=new gi);var Xt=K.get(c);if(Xt)return Xt;K.set(c,ce),M_(c)?c.forEach(function(dn){ce.add(ki(dn,m,E,dn,c,K))}):td(c)&&c.forEach(function(dn,Yn){ce.set(Yn,ki(dn,m,E,Yn,c,K))});var pn=et?Ee?Ar:dr:Ee?ns:wi,Ln=tt?t:pn(c);return Xr(Ln||c,function(dn,Yn){Ln&&(Yn=dn,dn=c[Yn]),Co(ce,Yn,ki(dn,m,E,Yn,c,K))}),ce}function Nd(c){var m=wi(c);return function(E){return Xc(E,c,m)}}function Xc(c,m,E){var N=E.length;if(c==null)return!N;for(c=vn(c);N--;){var G=E[N],K=m[G],ce=c[G];if(ce===t&&!(G in c)||!K(ce))return!1}return!0}function Kh(c,m,E){if(typeof c!="function")throw new Ti(l);return gf(function(){c.apply(t,E)},m)}function Go(c,m,E,N){var G=-1,K=Pa,ce=!0,_e=c.length,Ee=[],et=m.length;if(!_e)return Ee;E&&(m=fr(m,Wr(E))),N?(K=vh,ce=!1):m.length>=s&&(K=Sr,ce=!1,m=new Uo(m));e:for(;++G<_e;){var tt=c[G],ct=E==null?tt:E(tt);if(tt=N||tt!==0?tt:0,ce&&ct===ct){for(var Rt=et;Rt--;)if(m[Rt]===ct)continue e;Ee.push(tt)}else K(m,ct,N)||Ee.push(tt)}return Ee}var Mo=Qh(ls),df=Qh(Va,!0);function Cu(c,m){var E=!0;return Mo(c,function(N,G,K){return E=!!m(N,G,K),E}),E}function Ol(c,m,E){for(var N=-1,G=c.length;++N<G;){var K=c[N],ce=m(K);if(ce!=null&&(_e===t?ce===ce&&!la(ce):E(ce,_e)))var _e=ce,Ee=K}return Ee}function _d(c,m,E,N){var G=c.length;for(E=Mn(E),E<0&&(E=-E>G?0:G+E),N=N===t||N>G?G:Mn(N),N<0&&(N+=G),N=E>N?0:I0(N);E<N;)c[E++]=m;return c}function vc(c,m){var E=[];return Mo(c,function(N,G,K){m(N,G,K)&&E.push(N)}),E}function Kr(c,m,E,N,G){var K=-1,ce=c.length;for(E||(E=Dd),G||(G=[]);++K<ce;){var _e=c[K];m>0&&E(_e)?m>1?Kr(_e,m-1,E,N,G):Zo(G,_e):N||(G[G.length]=_e)}return G}var ou=wc(),Ju=wc(!0);function ls(c,m){return c&&ou(c,m,wi)}function Va(c,m){return c&&Ju(c,m,wi)}function $s(c,m){return Vi(m,function(E){return Cc(c[E])})}function Cs(c,m){m=sa(m,c);for(var E=0,N=m.length;c!=null&&E<N;)c=c[yo(m[E++])];return E&&E==N?c:t}function Kc(c,m,E){var N=m(c);return kn(c)?N:Zo(N,E(c))}function _i(c){return c==null?c===t?$e:Nt:uo&&uo in vn(c)?gl(c):Mg(c)}function ja(c,m){return c>m}function yc(c,m){return c!=null&&qn.call(c,m)}function ff(c,m){return c!=null&&m in vn(c)}function Eh(c,m,E){return c>=Ii(m,E)&&c<ei(m,E)}function ia(c,m,E){for(var N=E?vh:Pa,G=c[0].length,K=c.length,ce=K,_e=Be(K),Ee=1/0,et=[];ce--;){var tt=c[ce];ce&&m&&(tt=fr(tt,Wr(m))),Ee=Ii(tt.length,Ee),_e[ce]=!E&&(m||G>=120&&tt.length>=120)?new Uo(ce&&tt):t}tt=c[0];var ct=-1,Rt=_e[0];e:for(;++ct<G&&et.length<Ee;){var Xt=tt[ct],pn=m?m(Xt):Xt;if(Xt=E||Xt!==0?Xt:0,!(Rt?Sr(Rt,pn):N(et,pn,E))){for(ce=K;--ce;){var Ln=_e[ce];if(!(Ln?Sr(Ln,pn):N(c[ce],pn,E)))continue e}Rt&&Rt.push(pn),et.push(Xt)}}return et}function Yi(c,m,E,N){return ls(c,function(G,K,ce){m(N,E(G),K,ce)}),N}function Pn(c,m,E){m=sa(m,c),c=$p(c,m);var N=c==null?c:c[yo(Ls(m))];return N==null?t:Vn(N,c,E)}function tr(c){return di(c)&&_i(c)==qe}function Nr(c){return di(c)&&_i(c)==It}function ti(c){return di(c)&&_i(c)==ft}function qr(c,m,E,N,G){return c===m?!0:c==null||m==null||!di(c)&&!di(m)?c!==c&&m!==m:Ao(c,m,E,N,qr,G)}function Ao(c,m,E,N,G,K){var ce=kn(c),_e=kn(m),Ee=ce?Re:hs(c),et=_e?Re:hs(m);Ee=Ee==qe?kt:Ee,et=et==qe?kt:et;var tt=Ee==kt,ct=et==kt,Rt=Ee==et;if(Rt&&ah(c)){if(!ah(m))return!1;ce=!0,tt=!1}if(Rt&&!tt)return K||(K=new gi),ce||Jd(c)?on(c,m,E,N,G,K):En(c,m,Ee,E,N,G,K);if(!(E&C)){var Xt=tt&&qn.call(c,"__wrapped__"),pn=ct&&qn.call(m,"__wrapped__");if(Xt||pn){var Ln=Xt?c.value():c,dn=pn?m.value():m;return K||(K=new gi),G(Ln,dn,E,N,K)}}return Rt?(K||(K=new gi),Rn(c,m,E,N,G,K)):!1}function us(c){return di(c)&&hs(c)==rt}function es(c,m,E,N){var G=E.length,K=G,ce=!N;if(c==null)return!K;for(c=vn(c);G--;){var _e=E[G];if(ce&&_e[2]?_e[1]!==c[_e[0]]:!(_e[0]in c))return!1}for(;++G<K;){_e=E[G];var Ee=_e[0],et=c[Ee],tt=_e[1];if(ce&&_e[2]){if(et===t&&!(Ee in c))return!1}else{var ct=new gi;if(N)var Rt=N(et,tt,Ee,c,m,ct);if(!(Rt===t?qr(tt,et,C|M,N,ct):Rt))return!1}}return!0}function au(c){if(!ri(c)||eo(c))return!1;var m=Cc(c)?Th:Br;return m.test(Ja(c))}function qu(c){return di(c)&&_i(c)==At}function bc(c){return di(c)&&hs(c)==mt}function Qu(c){return di(c)&&Ah(c.length)&&!!or[_i(c)]}function qs(c){return typeof c=="function"?c:c==null?Oo:typeof c=="object"?kn(c)?fo(c[0],c[1]):Au(c):H_(c)}function ho(c){if(!xc(c))return jh(c);var m=[];for(var E in vn(c))qn.call(c,E)&&E!="constructor"&&m.push(E);return m}function vd(c){if(!ri(c))return xa(c);var m=xc(c),E=[];for(var N in c)N=="constructor"&&(m||!qn.call(c,N))||E.push(N);return E}function ba(c,m){return c<m}function Mu(c,m){var E=-1,N=Hi(c)?Be(c.length):[];return Mo(c,function(G,K,ce){N[++E]=m(G,K,ce)}),N}function Au(c){var m=Zp(c);return m.length==1&&m[0][2]?em(m[0][0],m[0][1]):function(E){return E===c||es(E,c,m)}}function fo(c,m){return Ea(c)&&Ep(m)?em(yo(c),m):function(E){var N=vm(E,c);return N===t&&N===m?ym(E,c):qr(m,N,C|M)}}function po(c,m,E,N,G){c!==m&&ou(m,function(K,ce){if(G||(G=new gi),ri(K))Ll(c,m,ce,E,po,N,G);else{var _e=N?N(cu(c,ce),K,ce+"",c,m,G):t;_e===t&&(_e=K),su(c,ce,_e)}},ns)}function Ll(c,m,E,N,G,K,ce){var _e=cu(c,E),Ee=cu(m,E),et=ce.get(Ee);if(et){su(c,E,et);return}var tt=K?K(_e,Ee,E+"",c,m,ce):t,ct=tt===t;if(ct){var Rt=kn(Ee),Xt=!Rt&&ah(Ee),pn=!Rt&&!Xt&&Jd(Ee);tt=Ee,Rt||Xt||pn?kn(_e)?tt=_e:Jr(_e)?tt=ni(_e):Xt?(ct=!1,tt=eh(Ee,!0)):pn?(ct=!1,tt=Dl(Ee,!0)):tt=[]:Hr(Ee)||Yd(Ee)?(tt=_e,Yd(_e)?tt=ub(_e):(!ri(_e)||Cc(_e))&&(tt=Ec(Ee))):ct=!1}ct&&(ce.set(Ee,tt),G(tt,Ee,N,K,ce),ce.delete(Ee)),su(c,E,tt)}function Wo(c,m){var E=c.length;if(E)return m+=m<0?E:0,Ka(m,E)?c[m]:t}function Zu(c,m,E){m.length?m=fr(m,function(K){return kn(K)?function(ce){return Cs(ce,K.length===1?K[0]:K)}:K}):m=[Oo];var N=-1;m=fr(m,Wr(ln()));var G=Mu(c,function(K,ce,_e){var Ee=fr(m,function(et){return et(K)});return{criteria:Ee,index:++N,value:K}});return Fa(G,function(K,ce){return Pl(K,ce,E)})}function ec(c,m){return xh(c,m,function(E,N){return ym(c,N)})}function xh(c,m,E){for(var N=-1,G=m.length,K={};++N<G;){var ce=m[N],_e=Cs(c,ce);E(_e,ce)&&vi(K,sa(ce,c),_e)}return K}function $h(c){return function(m){return Cs(m,c)}}function Or(c,m,E,N){var G=N?Gu:ks,K=-1,ce=m.length,_e=c;for(c===m&&(m=ni(m)),E&&(_e=fr(c,Wr(E)));++K<ce;)for(var Ee=0,et=m[K],tt=E?E(et):et;(Ee=G(_e,tt,Ee,N))>-1;)_e!==c&&ju.call(_e,Ee,1),ju.call(c,Ee,1);return c}function bs(c,m){for(var E=c?m.length:0,N=E-1;E--;){var G=m[E];if(E==N||G!==K){var K=G;Ka(G)?ju.call(c,G,1):Qc(c,G)}}return c}function Os(c,m){return c+nu(Il()*(m-c+1))}function Ya(c,m,E,N){for(var G=-1,K=ei(Yu((m-c)/(E||1)),0),ce=Be(K);K--;)ce[N?K:++G]=c,c+=E;return ce}function Vs(c,m){var E="";if(!c||m<1||m>J)return E;do m%2&&(E+=c),m=nu(m/2),m&&(c+=c);while(m);return E}function fn(c,m){return Bd(tm(c,m,Oo),c+"")}function Jc(c){return hl(Tf(c))}function wn(c,m){var E=Tf(c);return pr(E,Wa(m,0,E.length))}function vi(c,m,E,N){if(!ri(c))return c;m=sa(m,c);for(var G=-1,K=m.length,ce=K-1,_e=c;_e!=null&&++G<K;){var Ee=yo(m[G]),et=E;if(Ee==="__proto__"||Ee==="constructor"||Ee==="prototype")return c;if(G!=ce){var tt=_e[Ee];et=N?N(tt,Ee,_e):t,et===t&&(et=ri(tt)?tt:Ka(m[G+1])?[]:{})}Co(_e,Ee,et),_e=_e[Ee]}return c}var Ms=Wc?function(c,m){return Wc.set(c,m),c}:Oo,lu=Ml?function(c,m){return Ml(c,"toString",{configurable:!0,enumerable:!1,value:F_(m),writable:!0})}:Oo;function Nl(c){return pr(Tf(c))}function Ft(c,m,E){var N=-1,G=c.length;m<0&&(m=-m>G?0:G+m),E=E>G?G:E,E<0&&(E+=G),G=m>E?0:E-m>>>0,m>>>=0;for(var K=Be(G);++N<G;)K[N]=c[N+m];return K}function pl(c,m){var E;return Mo(c,function(N,G,K){return E=m(N,G,K),!E}),!!E}function jr(c,m,E){var N=0,G=c==null?N:c.length;if(typeof m=="number"&&m===m&&G<=Fe){for(;N<G;){var K=N+G>>>1,ce=c[K];ce!==null&&!la(ce)&&(E?ce<=m:ce<m)?N=K+1:G=K}return G}return tc(c,m,Oo,E)}function tc(c,m,E,N){var G=0,K=c==null?0:c.length;if(K===0)return 0;m=E(m);for(var ce=m!==m,_e=m===null,Ee=la(m),et=m===t;G<K;){var tt=nu((G+K)/2),ct=E(c[tt]),Rt=ct!==t,Xt=ct===null,pn=ct===ct,Ln=la(ct);if(ce)var dn=N||pn;else et?dn=pn&&(N||Rt):_e?dn=pn&&Rt&&(N||!Xt):Ee?dn=pn&&Rt&&!Xt&&(N||!Ln):Xt||Ln?dn=!1:dn=N?ct<=m:ct<m;dn?G=tt+1:K=tt}return Ii(K,Te)}function Jh(c,m){for(var E=-1,N=c.length,G=0,K=[];++E<N;){var ce=c[E],_e=m?m(ce):ce;if(!E||!Ca(_e,Ee)){var Ee=_e;K[G++]=ce===0?0:ce}}return K}function qc(c){return typeof c=="number"?c:la(c)?ie:+c}function ai(c){if(typeof c=="string")return c;if(kn(c))return fr(c,ai)+"";if(la(c))return ma?ma.call(c):"";var m=c+"";return m=="0"&&1/c==-we?"-0":m}function Xi(c,m,E){var N=-1,G=Pa,K=c.length,ce=!0,_e=[],Ee=_e;if(E)ce=!1,G=vh;else if(K>=s){var et=m?null:Dr(c);if(et)return eu(et);ce=!1,G=Sr,Ee=new Uo}else Ee=m?[]:_e;e:for(;++N<K;){var tt=c[N],ct=m?m(tt):tt;if(tt=E||tt!==0?tt:0,ce&&ct===ct){for(var Rt=Ee.length;Rt--;)if(Ee[Rt]===ct)continue e;m&&Ee.push(ct),_e.push(tt)}else G(Ee,ct,E)||(Ee!==_e&&Ee.push(ct),_e.push(tt))}return _e}function Qc(c,m){return m=sa(m,c),c=$p(c,m),c==null||delete c[yo(Ls(m))]}function mo(c,m,E,N){return vi(c,m,E(Cs(c,m)),N)}function ml(c,m,E,N){for(var G=c.length,K=N?G:-1;(N?K--:++K<G)&&m(c[K],K,c););return E?Ft(c,N?0:K,N?K+1:G):Ft(c,N?K+1:0,N?G:K)}function Zc(c,m){var E=c;return E instanceof mn&&(E=E.value()),fd(m,function(N,G){return G.func.apply(G.thisArg,Zo([N],G.args))},E)}function Tc(c,m,E){var N=c.length;if(N<2)return N?Xi(c[0]):[];for(var G=-1,K=Be(N);++G<N;)for(var ce=c[G],_e=-1;++_e<N;)_e!=G&&(K[G]=Go(K[G]||ce,c[_e],m,E));return Xi(Kr(K,1),m,E)}function nc(c,m,E){for(var N=-1,G=c.length,K=m.length,ce={};++N<G;){var _e=N<K?m[N]:t;E(ce,c[N],_e)}return ce}function Io(c){return Jr(c)?c:[]}function Qs(c){return typeof c=="function"?c:Oo}function sa(c,m){return kn(c)?c:Ea(c,m)?[c]:_0(sr(c))}var Ch=fn;function go(c,m,E){var N=c.length;return E=E===t?N:E,!m&&E>=N?c:Ft(c,m,E)}var Iu=Vh||function(c){return wr.clearTimeout(c)};function eh(c,m){if(m)return c.slice();var E=c.length,N=Gh?Gh(E):new c.constructor(E);return c.copy(N),N}function Sc(c){var m=new c.constructor(c.byteLength);return new Hc(m).set(new Hc(c)),m}function Vo(c,m){var E=m?Sc(c.buffer):c.buffer;return new c.constructor(E,c.byteOffset,c.byteLength)}function _o(c){var m=new c.constructor(c.source,_r.exec(c));return m.lastIndex=c.lastIndex,m}function rc(c){return Qi?vn(Qi.call(c)):{}}function Dl(c,m){var E=m?Sc(c.buffer):c.buffer;return new c.constructor(E,c.byteOffset,c.length)}function vo(c,m){if(c!==m){var E=c!==t,N=c===null,G=c===c,K=la(c),ce=m!==t,_e=m===null,Ee=m===m,et=la(m);if(!_e&&!et&&!K&&c>m||K&&ce&&Ee&&!_e&&!et||N&&ce&&Ee||!E&&Ee||!G)return 1;if(!N&&!K&&!et&&c<m||et&&E&&G&&!N&&!K||_e&&E&&G||!ce&&G||!Ee)return-1}return 0}function Pl(c,m,E){for(var N=-1,G=c.criteria,K=m.criteria,ce=G.length,_e=E.length;++N<ce;){var Ee=vo(G[N],K[N]);if(Ee){if(N>=_e)return Ee;var et=E[N];return Ee*(et=="desc"?-1:1)}}return c.index-m.index}function Xa(c,m,E,N){for(var G=-1,K=c.length,ce=E.length,_e=-1,Ee=m.length,et=ei(K-ce,0),tt=Be(Ee+et),ct=!N;++_e<Ee;)tt[_e]=m[_e];for(;++G<ce;)(ct||G<K)&&(tt[E[G]]=c[G]);for(;et--;)tt[_e++]=c[G++];return tt}function uu(c,m,E,N){for(var G=-1,K=c.length,ce=-1,_e=E.length,Ee=-1,et=m.length,tt=ei(K-_e,0),ct=Be(tt+et),Rt=!N;++G<tt;)ct[G]=c[G];for(var Xt=G;++Ee<et;)ct[Xt+Ee]=m[Ee];for(;++ce<_e;)(Rt||G<K)&&(ct[Xt+E[ce]]=c[G++]);return ct}function ni(c,m){var E=-1,N=c.length;for(m||(m=Be(N));++E<N;)m[E]=c[E];return m}function cs(c,m,E,N){var G=!E;E||(E={});for(var K=-1,ce=m.length;++K<ce;){var _e=m[K],Ee=N?N(E[_e],c[_e],_e,E,c):t;Ee===t&&(Ee=c[_e]),G?Ho(E,_e,Ee):Co(E,_e,Ee)}return E}function qh(c,m){return cs(c,mf(c),m)}function yd(c,m){return cs(c,Zh(c),m)}function Ta(c,m){return function(E,N){var G=kn(E)?Mi:dl,K=m?m():{};return G(E,c,ln(N,2),K)}}function Sa(c){return fn(function(m,E){var N=-1,G=E.length,K=G>1?E[G-1]:t,ce=G>2?E[2]:t;for(K=c.length>3&&typeof K=="function"?(G--,K):t,ce&&Ur(E[0],E[1],ce)&&(K=G<3?t:K,G=1),m=vn(m);++N<G;){var _e=E[N];_e&&c(m,_e,N,K)}return m})}function Qh(c,m){return function(E,N){if(E==null)return E;if(!Hi(E))return c(E,N);for(var G=E.length,K=m?G:-1,ce=vn(E);(m?K--:++K<G)&&N(ce[K],K,ce)!==!1;);return E}}function wc(c){return function(m,E,N){for(var G=-1,K=vn(m),ce=N(m),_e=ce.length;_e--;){var Ee=ce[c?_e:++G];if(E(K[Ee],Ee,K)===!1)break}return m}}function Hf(c,m,E){var N=m&A,G=_(c);function K(){var ce=this&&this!==wr&&this instanceof K?G:c;return ce.apply(N?E:this,arguments)}return K}function x(c){return function(m){m=sr(m);var E=ol(m)?Fr(m):t,N=E?E[0]:m.charAt(0),G=E?go(E,1).join(""):m.slice(1);return N[c]()+G}}function d(c){return function(m){return fd(wb(zv(m).replace(qi,"")),c,"")}}function _(c){return function(){var m=arguments;switch(m.length){case 0:return new c;case 1:return new c(m[0]);case 2:return new c(m[0],m[1]);case 3:return new c(m[0],m[1],m[2]);case 4:return new c(m[0],m[1],m[2],m[3]);case 5:return new c(m[0],m[1],m[2],m[3],m[4]);case 6:return new c(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new c(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var E=xs(c.prototype),N=c.apply(E,m);return ri(N)?N:E}}function $(c,m,E){var N=_(c);function G(){for(var K=arguments.length,ce=Be(K),_e=K,Ee=Mh(G);_e--;)ce[_e]=arguments[_e];var et=K<3&&ce[0]!==Ee&&ce[K-1]!==Ee?[]:Us(ce,Ee);if(K-=et.length,K<E)return Tn(c,m,W,G.placeholder,t,ce,et,t,t,E-K);var tt=this&&this!==wr&&this instanceof G?N:c;return Vn(tt,this,ce)}return G}function I(c){return function(m,E,N){var G=vn(m);if(!Hi(m)){var K=ln(E,3);m=wi(m),E=function(_e){return K(G[_e],_e,G)}}var ce=c(m,E,N);return ce>-1?G[K?m[ce]:ce]:t}}function P(c){return Fn(function(m){var E=m.length,N=E,G=Mr.prototype.thru;for(c&&m.reverse();N--;){var K=m[N];if(typeof K!="function")throw new Ti(l);if(G&&!ce&&pf(K)=="wrapper")var ce=new Mr([],!0)}for(N=ce?N:E;++N<E;){K=m[N];var _e=pf(K),Ee=_e=="wrapper"?Bl(K):t;Ee&&Oi(Ee[0])&&Ee[1]==(V|B|z|H)&&!Ee[4].length&&Ee[9]==1?ce=ce[pf(Ee[0])].apply(ce,Ee[3]):ce=K.length==1&&Oi(K)?ce[_e]():ce.thru(K)}return function(){var et=arguments,tt=et[0];if(ce&&et.length==1&&kn(tt))return ce.plant(tt).value();for(var ct=0,Rt=E?m[ct].apply(this,et):tt;++ct<E;)Rt=m[ct].call(this,Rt);return Rt}})}function W(c,m,E,N,G,K,ce,_e,Ee,et){var tt=m&V,ct=m&A,Rt=m&O,Xt=m&(B|D),pn=m&oe,Ln=Rt?t:_(c);function dn(){for(var Yn=arguments.length,er=Be(Yn),ua=Yn;ua--;)er[ua]=arguments[ua];if(Xt)var to=Mh(dn),Ds=Eu(er,to);if(N&&(er=Xa(er,N,G,Xt)),K&&(er=uu(er,K,ce,Xt)),Yn-=Ds,Xt&&Yn<et){var yi=Us(er,to);return Tn(c,m,W,dn.placeholder,E,er,yi,_e,Ee,et-Yn)}var Hl=ct?E:this,Ac=Rt?Hl[c]:c;return Yn=er.length,_e?er=_l(er,_e):pn&&Yn>1&&er.reverse(),tt&&Ee<Yn&&(er.length=Ee),this&&this!==wr&&this instanceof dn&&(Ac=Ln||_(Ac)),Ac.apply(Hl,er)}return dn}function de(c,m){return function(E,N){return Yi(E,c,m(N),{})}}function Oe(c,m){return function(E,N){var G;if(E===t&&N===t)return m;if(E!==t&&(G=E),N!==t){if(G===t)return N;typeof E=="string"||typeof N=="string"?(E=ai(E),N=ai(N)):(E=qc(E),N=qc(N)),G=c(E,N)}return G}}function Ze(c){return Fn(function(m){return m=fr(m,Wr(ln())),fn(function(E){var N=this;return c(m,function(G){return Vn(G,N,E)})})})}function wt(c,m){m=m===t?" ":ai(m);var E=m.length;if(E<2)return E?Vs(m,c):m;var N=Vs(m,Yu(c/is(m)));return ol(m)?go(Fr(N),0,c).join(""):N.slice(0,c)}function Qt(c,m,E,N){var G=m&A,K=_(c);function ce(){for(var _e=-1,Ee=arguments.length,et=-1,tt=N.length,ct=Be(tt+Ee),Rt=this&&this!==wr&&this instanceof ce?K:c;++et<tt;)ct[et]=N[et];for(;Ee--;)ct[et++]=arguments[++_e];return Vn(Rt,G?E:this,ct)}return ce}function cn(c){return function(m,E,N){return N&&typeof N!="number"&&Ur(m,E,N)&&(E=N=t),m=Mc(m),E===t?(E=m,m=0):E=Mc(E),N=N===t?m<E?1:-1:Mc(N),Ya(m,E,N,c)}}function bn(c){return function(m,E){return typeof m=="string"&&typeof E=="string"||(m=Ki(m),E=Ki(E)),c(m,E)}}function Tn(c,m,E,N,G,K,ce,_e,Ee,et){var tt=m&B,ct=tt?ce:t,Rt=tt?t:ce,Xt=tt?K:t,pn=tt?t:K;m|=tt?z:U,m&=~(tt?U:z),m&L||(m&=~(A|O));var Ln=[c,m,G,Xt,ct,pn,Rt,_e,Ee,et],dn=E.apply(t,Ln);return Oi(c)&&Pd(dn,Ln),dn.placeholder=N,nh(dn,c,m)}function gn(c){var m=Jn[c];return function(E,N){if(E=Ki(E),N=N==null?0:Ii(Mn(N),292),N&&Al(E)){var G=(sr(E)+"e").split("e"),K=m(G[0]+"e"+(+G[1]+N));return G=(sr(K)+"e").split("e"),+(G[0]+"e"+(+G[1]-N))}return m(E)}}var Dr=ll&&1/eu(new ll([,-0]))[1]==we?function(c){return new ll(c)}:z0;function Tt(c){return function(m){var E=hs(m);return E==rt?Vu(m):E==mt?Uh(m):Ql(m,c(m))}}function Me(c,m,E,N,G,K,ce,_e){var Ee=m&O;if(!Ee&&typeof c!="function")throw new Ti(l);var et=N?N.length:0;if(et||(m&=~(z|U),N=G=t),ce=ce===t?ce:ei(Mn(ce),0),_e=_e===t?_e:Mn(_e),et-=G?G.length:0,m&U){var tt=N,ct=G;N=G=t}var Rt=Ee?t:Bl(c),Xt=[c,m,E,N,G,tt,ct,K,ce,_e];if(Rt&&xp(Xt,Rt),c=Xt[0],m=Xt[1],E=Xt[2],N=Xt[3],G=Xt[4],_e=Xt[9]=Xt[9]===t?Ee?0:c.length:ei(Xt[9]-et,0),!_e&&m&(B|D)&&(m&=~(B|D)),!m||m==A)var pn=Hf(c,m,E);else m==B||m==D?pn=$(c,m,_e):(m==z||m==(A|z))&&!G.length?pn=Qt(c,m,E,N):pn=W.apply(t,Xt);var Ln=Rt?Ms:Pd;return nh(Ln(pn,Xt),c,m)}function Ne(c,m,E,N){return c===t||Ca(c,Fi[E])&&!qn.call(N,E)?m:c}function st(c,m,E,N,G,K){return ri(c)&&ri(m)&&(K.set(m,c),po(c,m,t,st,K),K.delete(m)),c}function Ht(c){return Hr(c)?t:c}function on(c,m,E,N,G,K){var ce=E&C,_e=c.length,Ee=m.length;if(_e!=Ee&&!(ce&&Ee>_e))return!1;var et=K.get(c),tt=K.get(m);if(et&&tt)return et==m&&tt==c;var ct=-1,Rt=!0,Xt=E&M?new Uo:t;for(K.set(c,m),K.set(m,c);++ct<_e;){var pn=c[ct],Ln=m[ct];if(N)var dn=ce?N(Ln,pn,ct,m,c,K):N(pn,Ln,ct,c,m,K);if(dn!==t){if(dn)continue;Rt=!1;break}if(Xt){if(!Bc(m,function(Yn,er){if(!Sr(Xt,er)&&(pn===Yn||G(pn,Yn,E,N,K)))return Xt.push(er)})){Rt=!1;break}}else if(!(pn===Ln||G(pn,Ln,E,N,K))){Rt=!1;break}}return K.delete(c),K.delete(m),Rt}function En(c,m,E,N,G,K,ce){switch(E){case pt:if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case It:return!(c.byteLength!=m.byteLength||!K(new Hc(c),new Hc(m)));case nt:case ft:case it:return Ca(+c,+m);case ze:return c.name==m.name&&c.message==m.message;case At:case xe:return c==m+"";case rt:var _e=Vu;case mt:var Ee=N&C;if(_e||(_e=eu),c.size!=m.size&&!Ee)return!1;var et=ce.get(c);if(et)return et==m;N|=M,ce.set(c,m);var tt=on(_e(c),_e(m),N,G,K,ce);return ce.delete(c),tt;case se:if(Qi)return Qi.call(c)==Qi.call(m)}return!1}function Rn(c,m,E,N,G,K){var ce=E&C,_e=dr(c),Ee=_e.length,et=dr(m),tt=et.length;if(Ee!=tt&&!ce)return!1;for(var ct=Ee;ct--;){var Rt=_e[ct];if(!(ce?Rt in m:qn.call(m,Rt)))return!1}var Xt=K.get(c),pn=K.get(m);if(Xt&&pn)return Xt==m&&pn==c;var Ln=!0;K.set(c,m),K.set(m,c);for(var dn=ce;++ct<Ee;){Rt=_e[ct];var Yn=c[Rt],er=m[Rt];if(N)var ua=ce?N(er,Yn,Rt,m,c,K):N(Yn,er,Rt,c,m,K);if(!(ua===t?Yn===er||G(Yn,er,E,N,K):ua)){Ln=!1;break}dn||(dn=Rt=="constructor")}if(Ln&&!dn){var to=c.constructor,Ds=m.constructor;to!=Ds&&"constructor"in c&&"constructor"in m&&!(typeof to=="function"&&to instanceof to&&typeof Ds=="function"&&Ds instanceof Ds)&&(Ln=!1)}return K.delete(c),K.delete(m),Ln}function Fn(c){return Bd(tm(c,t,_f),c+"")}function dr(c){return Kc(c,wi,mf)}function Ar(c){return Kc(c,ns,Zh)}var Bl=Wc?function(c){return Wc.get(c)}:z0;function pf(c){for(var m=c.name+"",E=kl[m],N=qn.call(kl,m)?E.length:0;N--;){var G=E[N],K=G.func;if(K==null||K==c)return G.name}return m}function Mh(c){var m=qn.call(X,"placeholder")?X:c;return m.placeholder}function ln(){var c=X.iteratee||Ji;return c=c===Ji?qs:c,arguments.length?c(arguments[0],arguments[1]):c}function th(c,m){var E=c.__data__;return Ve(m)?E[typeof m=="string"?"string":"hash"]:E.map}function Zp(c){for(var m=wi(c),E=m.length;E--;){var N=m[E],G=c[N];m[E]=[N,G,Ep(G)]}return m}function wa(c,m){var E=Wu(c,m);return au(E)?E:t}function gl(c){var m=qn.call(c,uo),E=c[uo];try{c[uo]=t;var N=!0}catch{}var G=Hs.call(c);return N&&(m?c[uo]=E:delete c[uo]),G}var mf=Gc?function(c){return c==null?[]:(c=vn(c),Vi(Gc(c),function(m){return mc.call(c,m)}))}:U0,Zh=Gc?function(c){for(var m=[];c;)Zo(m,mf(c)),c=Ha(c);return m}:U0,hs=_i;(Xu&&hs(new Xu(new ArrayBuffer(1)))!=pt||Ku&&hs(new Ku)!=rt||Sh&&hs(Sh.resolve())!=vt||ll&&hs(new ll)!=mt||na&&hs(new na)!=ht)&&(hs=function(c){var m=_i(c),E=m==kt?c.constructor:t,N=E?Ja(E):"";if(N)switch(N){case Vc:return pt;case gc:return rt;case kd:return vt;case Ga:return mt;case Vr:return ht}return m});function _n(c,m,E){for(var N=-1,G=E.length;++N<G;){var K=E[N],ce=K.size;switch(K.type){case"drop":c+=ce;break;case"dropRight":m-=ce;break;case"take":m=Ii(m,c+ce);break;case"takeRight":c=ei(c,m-ce);break}}return{start:c,end:m}}function g0(c){var m=c.match(gt);return m?m[1].split(Ct):[]}function Cg(c,m,E){m=sa(m,c);for(var N=-1,G=m.length,K=!1;++N<G;){var ce=yo(m[N]);if(!(K=c!=null&&E(c,ce)))break;c=c[ce]}return K||++N!=G?K:(G=c==null?0:c.length,!!G&&Ah(G)&&Ka(ce,G)&&(kn(c)||Yd(c)))}function Km(c){var m=c.length,E=new c.constructor(m);return m&&typeof c[0]=="string"&&qn.call(c,"index")&&(E.index=c.index,E.input=c.input),E}function Ec(c){return typeof c.constructor=="function"&&!xc(c)?xs(Ha(c)):{}}function Zs(c,m,E){var N=c.constructor;switch(m){case It:return Sc(c);case nt:case ft:return new N(+c);case pt:return Vo(c,E);case Ke:case Le:case Q:case te:case me:case ke:case Xe:case Wt:case Ge:return Dl(c,E);case rt:return new N;case it:case xe:return new N(c);case At:return _o(c);case mt:return new N;case se:return rc(c)}}function Gf(c,m){var E=m.length;if(!E)return c;var N=E-1;return m[N]=(E>1?"& ":"")+m[N],m=m.join(E>2?", ":" "),c.replace(De,`{
/* [wrapped with `+m+`] */
`)}function Dd(c){return kn(c)||Yd(c)||!!(md&&c&&c[md])}function Ka(c,m){var E=typeof c;return m=m??J,!!m&&(E=="number"||E!="symbol"&&Ss.test(c))&&c>-1&&c%1==0&&c<m}function Ur(c,m,E){if(!ri(E))return!1;var N=typeof m;return(N=="number"?Hi(E)&&Ka(m,E.length):N=="string"&&m in E)?Ca(E[m],c):!1}function Ea(c,m){if(kn(c))return!1;var E=typeof c;return E=="number"||E=="symbol"||E=="boolean"||c==null||la(c)?!0:Se.test(c)||!ne.test(c)||m!=null&&c in vn(m)}function Ve(c){var m=typeof c;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null}function Oi(c){var m=pf(c),E=X[m];if(typeof E!="function"||!(m in mn.prototype))return!1;if(c===E)return!0;var N=Bl(E);return!!N&&c===N[0]}function eo(c){return!!Ks&&Ks in c}var T_=vs?Cc:Sm;function xc(c){var m=c&&c.constructor,E=typeof m=="function"&&m.prototype||Fi;return c===E}function Ep(c){return c===c&&!ri(c)}function em(c,m){return function(E){return E==null?!1:E[c]===m&&(m!==t||c in vn(E))}}function S_(c){var m=dt(c,function(N){return E.size===f&&E.clear(),N}),E=m.cache;return m}function xp(c,m){var E=c[1],N=m[1],G=E|N,K=G<(A|O|V),ce=N==V&&E==B||N==V&&E==H&&c[7].length<=m[8]||N==(V|H)&&m[7].length<=m[8]&&E==B;if(!(K||ce))return c;N&A&&(c[2]=m[2],G|=E&A?0:L);var _e=m[3];if(_e){var Ee=c[3];c[3]=Ee?Xa(Ee,_e,m[4]):_e,c[4]=Ee?Us(c[3],g):m[4]}return _e=m[5],_e&&(Ee=c[5],c[5]=Ee?uu(Ee,_e,m[6]):_e,c[6]=Ee?Us(c[5],g):m[6]),_e=m[7],_e&&(c[7]=_e),N&V&&(c[8]=c[8]==null?m[8]:Ii(c[8],m[8])),c[9]==null&&(c[9]=m[9]),c[0]=m[0],c[1]=G,c}function xa(c){var m=[];if(c!=null)for(var E in vn(c))m.push(E);return m}function Mg(c){return Hs.call(c)}function tm(c,m,E){return m=ei(m===t?c.length-1:m,0),function(){for(var N=arguments,G=-1,K=ei(N.length-m,0),ce=Be(K);++G<K;)ce[G]=N[m+G];G=-1;for(var _e=Be(m+1);++G<m;)_e[G]=N[G];return _e[m]=E(ce),Vn(c,this,_e)}}function $p(c,m){return m.length<2?c:Cs(c,Ft(m,0,-1))}function _l(c,m){for(var E=c.length,N=Ii(m.length,E),G=ni(c);N--;){var K=m[N];c[N]=Ka(K,E)?G[K]:t}return c}function cu(c,m){if(!(m==="constructor"&&typeof c[m]=="function")&&m!="__proto__")return c[m]}var Pd=Ag(Ms),gf=gd||function(c,m){return wr.setTimeout(c,m)},Bd=Ag(lu);function nh(c,m,E){var N=m+"";return Bd(c,Gf(N,nm(g0(N),E)))}function Ag(c){var m=0,E=0;return function(){var N=Sp(),G=he-(N-E);if(E=N,G>0){if(++m>=q)return arguments[0]}else m=0;return c.apply(t,arguments)}}function pr(c,m){var E=-1,N=c.length,G=N-1;for(m=m===t?N:m;++E<m;){var K=Os(E,G),ce=c[K];c[K]=c[E],c[E]=ce}return c.length=m,c}var _0=S_(function(c){var m=[];return c.charCodeAt(0)===46&&m.push(""),c.replace(We,function(E,N,G,K){m.push(G?K.replace(Wn,"$1"):N||E)}),m});function yo(c){if(typeof c=="string"||la(c))return c;var m=c+"";return m=="0"&&1/c==-we?"-0":m}function Ja(c){if(c!=null){try{return $u.call(c)}catch{}try{return c+""}catch{}}return""}function nm(c,m){return Xr(Ie,function(E){var N="_."+E[0];m&E[1]&&!Pa(c,N)&&c.push(N)}),c.sort()}function Fd(c){if(c instanceof mn)return c.clone();var m=new Mr(c.__wrapped__,c.__chain__);return m.__actions__=ni(c.__actions__),m.__index__=c.__index__,m.__values__=c.__values__,m}function rm(c,m,E){(E?Ur(c,m,E):m===t)?m=1:m=ei(Mn(m),0);var N=c==null?0:c.length;if(!N||m<1)return[];for(var G=0,K=0,ce=Be(Yu(N/m));G<N;)ce[K++]=Ft(c,G,G+=m);return ce}function Ru(c){for(var m=-1,E=c==null?0:c.length,N=0,G=[];++m<E;){var K=c[m];K&&(G[N++]=K)}return G}function v0(){var c=arguments.length;if(!c)return[];for(var m=Be(c-1),E=arguments[0],N=c;N--;)m[N-1]=arguments[N];return Zo(kn(E)?ni(E):[E],Kr(m,1))}var jo=fn(function(c,m){return Jr(c)?Go(c,Kr(m,1,Jr,!0)):[]}),ts=fn(function(c,m){var E=Ls(m);return Jr(E)&&(E=t),Jr(c)?Go(c,Kr(m,1,Jr,!0),ln(E,2)):[]}),hu=fn(function(c,m){var E=Ls(m);return Jr(E)&&(E=t),Jr(c)?Go(c,Kr(m,1,Jr,!0),t,E):[]});function vl(c,m,E){var N=c==null?0:c.length;return N?(m=E||m===t?1:Mn(m),Ft(c,m<0?0:m,N)):[]}function ku(c,m,E){var N=c==null?0:c.length;return N?(m=E||m===t?1:Mn(m),m=N-m,Ft(c,0,m<0?0:m)):[]}function du(c,m){return c&&c.length?ml(c,ln(m,3),!0,!0):[]}function Cp(c,m){return c&&c.length?ml(c,ln(m,3),!0):[]}function Fl(c,m,E,N){var G=c==null?0:c.length;return G?(E&&typeof E!="number"&&Ur(c,m,E)&&(E=0,N=G),_d(c,m,E,N)):[]}function zd(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=E==null?0:Mn(E);return G<0&&(G=ei(N+G,0)),Jl(c,ln(m,3),G)}function Ud(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=N-1;return E!==t&&(G=Mn(E),G=E<0?ei(N+G,0):Ii(G,N-1)),Jl(c,ln(m,3),G,!0)}function _f(c){var m=c==null?0:c.length;return m?Kr(c,1):[]}function Ig(c){var m=c==null?0:c.length;return m?Kr(c,we):[]}function im(c,m){var E=c==null?0:c.length;return E?(m=m===t?1:Mn(m),Kr(c,m)):[]}function rh(c){for(var m=-1,E=c==null?0:c.length,N={};++m<E;){var G=c[m];N[G[0]]=G[1]}return N}function yl(c){return c&&c.length?c[0]:t}function ih(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=E==null?0:Mn(E);return G<0&&(G=ei(N+G,0)),ks(c,m,G)}function Hd(c){var m=c==null?0:c.length;return m?Ft(c,0,-1):[]}var Jm=fn(function(c){var m=fr(c,Io);return m.length&&m[0]===c[0]?ia(m):[]}),qm=fn(function(c){var m=Ls(c),E=fr(c,Io);return m===Ls(E)?m=t:E.pop(),E.length&&E[0]===c[0]?ia(E,ln(m,2)):[]}),bo=fn(function(c){var m=Ls(c),E=fr(c,Io);return m=typeof m=="function"?m:t,m&&E.pop(),E.length&&E[0]===c[0]?ia(E,t,m):[]});function sm(c,m){return c==null?"":Rd.call(c,m)}function Ls(c){var m=c==null?0:c.length;return m?c[m-1]:t}function zl(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=N;return E!==t&&(G=Mn(E),G=G<0?ei(N+G,0):Ii(G,N-1)),m===m?Uc(c,m,G):Jl(c,yh,G,!0)}function Mp(c,m){return c&&c.length?Wo(c,Mn(m)):t}var Rg=fn(Gd);function Gd(c,m){return c&&c.length&&m&&m.length?Or(c,m):c}function Qm(c,m,E){return c&&c.length&&m&&m.length?Or(c,m,ln(E,2)):c}function $c(c,m,E){return c&&c.length&&m&&m.length?Or(c,m,t,E):c}var Wd=Fn(function(c,m){var E=c==null?0:c.length,N=Xh(c,m);return bs(c,fr(m,function(G){return Ka(G,E)?+G:G}).sort(vo)),N});function oa(c,m){var E=[];if(!(c&&c.length))return E;var N=-1,G=[],K=c.length;for(m=ln(m,3);++N<K;){var ce=c[N];m(ce,N,c)&&(E.push(ce),G.push(N))}return bs(c,G),E}function $a(c){return c==null?c:ru.call(c)}function w_(c,m,E){var N=c==null?0:c.length;return N?(E&&typeof E!="number"&&Ur(c,m,E)?(m=0,E=N):(m=m==null?0:Mn(m),E=E===t?N:Mn(E)),Ft(c,m,E)):[]}function om(c,m){return jr(c,m)}function y0(c,m,E){return tc(c,m,ln(E,2))}function Av(c,m){var E=c==null?0:c.length;if(E){var N=jr(c,m);if(N<E&&Ca(c[N],m))return N}return-1}function Wf(c,m){return jr(c,m,!0)}function Ap(c,m,E){return tc(c,m,ln(E,2),!0)}function b0(c,m){var E=c==null?0:c.length;if(E){var N=jr(c,m,!0)-1;if(Ca(c[N],m))return N}return-1}function Ip(c){return c&&c.length?Jh(c):[]}function T0(c,m){return c&&c.length?Jh(c,ln(m,2)):[]}function am(c){var m=c==null?0:c.length;return m?Ft(c,1,m):[]}function S0(c,m,E){return c&&c.length?(m=E||m===t?1:Mn(m),Ft(c,0,m<0?0:m)):[]}function E_(c,m,E){var N=c==null?0:c.length;return N?(m=E||m===t?1:Mn(m),m=N-m,Ft(c,m<0?0:m,N)):[]}function lm(c,m){return c&&c.length?ml(c,ln(m,3),!1,!0):[]}function vf(c,m){return c&&c.length?ml(c,ln(m,3)):[]}var x_=fn(function(c){return Xi(Kr(c,1,Jr,!0))}),ib=fn(function(c){var m=Ls(c);return Jr(m)&&(m=t),Xi(Kr(c,1,Jr,!0),ln(m,2))}),w0=fn(function(c){var m=Ls(c);return m=typeof m=="function"?m:t,Xi(Kr(c,1,Jr,!0),t,m)});function E0(c){return c&&c.length?Xi(c):[]}function Vf(c,m){return c&&c.length?Xi(c,ln(m,2)):[]}function zn(c,m){return m=typeof m=="function"?m:t,c&&c.length?Xi(c,t,m):[]}function sh(c){if(!(c&&c.length))return[];var m=0;return c=Vi(c,function(E){if(Jr(E))return m=ei(E.length,m),!0}),ql(m,function(E){return fr(c,ci(E))})}function Rp(c,m){if(!(c&&c.length))return[];var E=sh(c);return m==null?E:fr(E,function(N){return Vn(m,t,N)})}var aa=fn(function(c,m){return Jr(c)?Go(c,m):[]}),$_=fn(function(c){return Tc(Vi(c,Jr))}),x0=fn(function(c){var m=Ls(c);return Jr(m)&&(m=t),Tc(Vi(c,Jr),ln(m,2))}),um=fn(function(c){var m=Ls(c);return m=typeof m=="function"?m:t,Tc(Vi(c,Jr),t,m)}),sb=fn(sh);function Iv(c,m){return nc(c||[],m||[],Co)}function oh(c,m){return nc(c||[],m||[],vi)}var To=fn(function(c){var m=c.length,E=m>1?c[m-1]:t;return E=typeof E=="function"?(c.pop(),E):t,Rp(c,E)});function Ou(c){var m=X(c);return m.__chain__=!0,m}function kg(c,m){return m(c),c}function jf(c,m){return m(c)}var ed=Fn(function(c){var m=c.length,E=m?c[0]:0,N=this.__wrapped__,G=function(K){return Xh(K,c)};return m>1||this.__actions__.length||!(N instanceof mn)||!Ka(E)?this.thru(G):(N=N.slice(E,+E+(m?1:0)),N.__actions__.push({func:jf,args:[G],thisArg:t}),new Mr(N,this.__chain__).thru(function(K){return m&&!K.length&&K.push(t),K}))});function cm(){return Ou(this)}function Yf(){return new Mr(this.value(),this.__chain__)}function Xf(){this.__values__===t&&(this.__values__=Pv(this.value()));var c=this.__index__>=this.__values__.length,m=c?t:this.__values__[this.__index__++];return{done:c,value:m}}function kp(){return this}function bd(c){for(var m,E=this;E instanceof ga;){var N=Fd(E);N.__index__=0,N.__values__=t,m?G.__wrapped__=N:m=N;var G=N;E=E.__wrapped__}return G.__wrapped__=c,m}function yf(){var c=this.__wrapped__;if(c instanceof mn){var m=c;return this.__actions__.length&&(m=new mn(this)),m=m.reverse(),m.__actions__.push({func:jf,args:[$a],thisArg:t}),new Mr(m,this.__chain__)}return this.thru($a)}function Zm(){return Zc(this.__wrapped__,this.__actions__)}var Rv=Ta(function(c,m,E){qn.call(c,E)?++c[E]:Ho(c,E,1)});function Og(c,m,E){var N=kn(c)?wu:Cu;return E&&Ur(c,m,E)&&(m=t),N(c,ln(m,3))}function Vd(c,m){var E=kn(c)?Vi:vc;return E(c,ln(m,3))}var Li=I(zd),hm=I(Ud);function eg(c,m){return Kr(Si(c,m),1)}function Lg(c,m){return Kr(Si(c,m),we)}function kv(c,m,E){return E=E===t?1:Mn(E),Kr(Si(c,m),E)}function tg(c,m){var E=kn(c)?Xr:Mo;return E(c,ln(m,3))}function Op(c,m){var E=kn(c)?dd:df;return E(c,ln(m,3))}var ng=Ta(function(c,m,E){qn.call(c,E)?c[E].push(m):Ho(c,E,[m])});function Kf(c,m,E,N){c=Hi(c)?c:Tf(c),E=E&&!N?Mn(E):0;var G=c.length;return E<0&&(E=ei(G+E,0)),_m(c)?E<=G&&c.indexOf(m,E)>-1:!!G&&ks(c,m,E)>-1}var Jf=fn(function(c,m,E){var N=-1,G=typeof m=="function",K=Hi(c)?Be(c.length):[];return Mo(c,function(ce){K[++N]=G?Vn(m,ce,E):Pn(ce,m,E)}),K}),dm=Ta(function(c,m,E){Ho(c,E,m)});function Si(c,m){var E=kn(c)?fr:Mu;return E(c,ln(m,3))}function qf(c,m,E,N){return c==null?[]:(kn(m)||(m=m==null?[]:[m]),E=N?t:E,kn(E)||(E=E==null?[]:[E]),Zu(c,m,E))}var fm=Ta(function(c,m,E){c[E?0:1].push(m)},function(){return[[],[]]});function pm(c,m,E){var N=kn(c)?fd:oo,G=arguments.length<3;return N(c,ln(m,4),E,G,Mo)}function Lp(c,m,E){var N=kn(c)?lf:oo,G=arguments.length<3;return N(c,ln(m,4),E,G,df)}function Ng(c,m){var E=kn(c)?Vi:vc;return E(c,Et(ln(m,3)))}function v(c){var m=kn(c)?hl:Jc;return m(c)}function T(c,m,E){(E?Ur(c,m,E):m===t)?m=1:m=Mn(m);var N=kn(c)?_c:wn;return N(c,m)}function R(c){var m=kn(c)?wp:Nl;return m(c)}function F(c){if(c==null)return 0;if(Hi(c))return _m(c)?is(c):c.length;var m=hs(c);return m==rt||m==mt?c.size:ho(c).length}function Y(c,m,E){var N=kn(c)?Bc:pl;return E&&Ur(c,m,E)&&(m=t),N(c,ln(m,3))}var ee=fn(function(c,m){if(c==null)return[];var E=m.length;return E>1&&Ur(c,m[0],m[1])?m=[]:E>2&&Ur(m[0],m[1],m[2])&&(m=[m[0]]),Zu(c,Kr(m,1),[])}),be=zi||function(){return wr.Date.now()};function Ye(c,m){if(typeof m!="function")throw new Ti(l);return c=Mn(c),function(){if(--c<1)return m.apply(this,arguments)}}function at(c,m,E){return m=E?t:m,m=c&&m==null?c.length:m,Me(c,V,t,t,t,t,m)}function Lt(c,m){var E;if(typeof m!="function")throw new Ti(l);return c=Mn(c),function(){return--c>0&&(E=m.apply(this,arguments)),c<=1&&(m=t),E}}var Zt=fn(function(c,m,E){var N=A;if(E.length){var G=Us(E,Mh(Zt));N|=z}return Me(c,N,m,E,G)}),hn=fn(function(c,m,E){var N=A|O;if(E.length){var G=Us(E,Mh(hn));N|=z}return Me(m,N,c,E,G)});function an(c,m,E){m=E?t:m;var N=Me(c,B,t,t,t,t,t,m);return N.placeholder=an.placeholder,N}function Dn(c,m,E){m=E?t:m;var N=Me(c,D,t,t,t,t,t,m);return N.placeholder=Dn.placeholder,N}function Zn(c,m,E){var N,G,K,ce,_e,Ee,et=0,tt=!1,ct=!1,Rt=!0;if(typeof c!="function")throw new Ti(l);m=Ki(m)||0,ri(E)&&(tt=!!E.leading,ct="maxWait"in E,K=ct?ei(Ki(E.maxWait)||0,m):K,Rt="trailing"in E?!!E.trailing:Rt);function Xt(yi){var Hl=N,Ac=G;return N=G=t,et=yi,ce=c.apply(Ac,Hl),ce}function pn(yi){return et=yi,_e=gf(Yn,m),tt?Xt(yi):ce}function Ln(yi){var Hl=yi-Ee,Ac=yi-et,jv=m-Hl;return ct?Ii(jv,K-Ac):jv}function dn(yi){var Hl=yi-Ee,Ac=yi-et;return Ee===t||Hl>=m||Hl<0||ct&&Ac>=K}function Yn(){var yi=be();if(dn(yi))return er(yi);_e=gf(Yn,Ln(yi))}function er(yi){return _e=t,Rt&&N?Xt(yi):(N=G=t,ce)}function ua(){_e!==t&&Iu(_e),et=0,N=Ee=G=_e=t}function to(){return _e===t?ce:er(be())}function Ds(){var yi=be(),Hl=dn(yi);if(N=arguments,G=this,Ee=yi,Hl){if(_e===t)return pn(Ee);if(ct)return Iu(_e),_e=gf(Yn,m),Xt(Ee)}return _e===t&&(_e=gf(Yn,m)),ce}return Ds.cancel=ua,Ds.flush=to,Ds}var ir=fn(function(c,m){return Kh(c,1,m)}),Ro=fn(function(c,m,E){return Kh(c,Ki(m)||0,E)});function xt(c){return Me(c,oe)}function dt(c,m){if(typeof c!="function"||m!=null&&typeof m!="function")throw new Ti(l);var E=function(){var N=arguments,G=m?m.apply(this,N):N[0],K=E.cache;if(K.has(G))return K.get(G);var ce=c.apply(this,N);return E.cache=K.set(G,ce)||K,ce};return E.cache=new(dt.Cache||Gs),E}dt.Cache=Gs;function Et(c){if(typeof c!="function")throw new Ti(l);return function(){var m=arguments;switch(m.length){case 0:return!c.call(this);case 1:return!c.call(this,m[0]);case 2:return!c.call(this,m[0],m[1]);case 3:return!c.call(this,m[0],m[1],m[2])}return!c.apply(this,m)}}function Sn(c){return Lt(2,c)}var lr=Ch(function(c,m){m=m.length==1&&kn(m[0])?fr(m[0],Wr(ln())):fr(Kr(m,1),Wr(ln()));var E=m.length;return fn(function(N){for(var G=-1,K=Ii(N.length,E);++G<K;)N[G]=m[G].call(this,N[G]);return Vn(c,this,N)})}),nr=fn(function(c,m){var E=Us(m,Mh(nr));return Me(c,z,t,m,E)}),mr=fn(function(c,m){var E=Us(m,Mh(mr));return Me(c,U,t,m,E)}),Lr=Fn(function(c,m){return Me(c,H,t,t,t,m)});function Ul(c,m){if(typeof c!="function")throw new Ti(l);return m=m===t?m:Mn(m),fn(c,m)}function ds(c,m){if(typeof c!="function")throw new Ti(l);return m=m==null?0:ei(Mn(m),0),fn(function(E){var N=E[m],G=go(E,0,m);return N&&Zo(G,N),Vn(c,this,G)})}function Qf(c,m,E){var N=!0,G=!0;if(typeof c!="function")throw new Ti(l);return ri(E)&&(N="leading"in E?!!E.leading:N,G="trailing"in E?!!E.trailing:G),Zn(c,m,{leading:N,maxWait:m,trailing:G})}function $0(c){return at(c,1)}function Lu(c,m){return nr(Qs(m),c)}function jd(){if(!arguments.length)return[];var c=arguments[0];return kn(c)?c:[c]}function pT(c){return ki(c,S)}function SE(c,m){return m=typeof m=="function"?m:t,ki(c,S,m)}function wE(c){return ki(c,y|S)}function mm(c,m){return m=typeof m=="function"?m:t,ki(c,y|S,m)}function ob(c,m){return m==null||Xc(c,m,wi(m))}function Ca(c,m){return c===m||c!==c&&m!==m}var mT=bn(ja),Dg=bn(function(c,m){return c>=m}),Yd=tr(function(){return arguments}())?tr:function(c){return di(c)&&qn.call(c,"callee")&&!mc.call(c,"callee")},kn=Be.isArray,Ov=Tu?Wr(Tu):Nr;function Hi(c){return c!=null&&Ah(c.length)&&!Cc(c)}function Jr(c){return di(c)&&Hi(c)}function ab(c){return c===!0||c===!1||di(c)&&_i(c)==nt}var ah=Id||Sm,gT=$o?Wr($o):ti;function bf(c){return di(c)&&c.nodeType===1&&!Hr(c)}function C_(c){if(c==null)return!0;if(Hi(c)&&(kn(c)||typeof c=="string"||typeof c.splice=="function"||ah(c)||Jd(c)||Yd(c)))return!c.length;var m=hs(c);if(m==rt||m==mt)return!c.size;if(xc(c))return!ho(c).length;for(var E in c)if(qn.call(c,E))return!1;return!0}function Gi(c,m){return qr(c,m)}function ko(c,m,E){E=typeof E=="function"?E:t;var N=E?E(c,m):t;return N===t?qr(c,m,t,E):!!N}function C0(c){if(!di(c))return!1;var m=_i(c);return m==ze||m==lt||typeof c.message=="string"&&typeof c.name=="string"&&!Hr(c)}function Lv(c){return typeof c=="number"&&Al(c)}function Cc(c){if(!ri(c))return!1;var m=_i(c);return m==Ce||m==He||m==Qe||m==Mt}function M0(c){return typeof c=="number"&&c==Mn(c)}function Ah(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=J}function ri(c){var m=typeof c;return c!=null&&(m=="object"||m=="function")}function di(c){return c!=null&&typeof c=="object"}var td=Su?Wr(Su):us;function As(c,m){return c===m||es(c,m,Zp(m))}function gm(c,m,E){return E=typeof E=="function"?E:t,es(c,m,Zp(m),E)}function Nv(c){return Xd(c)&&c!=+c}function Dv(c){if(T_(c))throw new rn(o);return au(c)}function A0(c){return c===null}function EE(c){return c==null}function Xd(c){return typeof c=="number"||di(c)&&_i(c)==it}function Hr(c){if(!di(c)||_i(c)!=kt)return!1;var m=Ha(c);if(m===null)return!0;var E=qn.call(m,"constructor")&&m.constructor;return typeof E=="function"&&E instanceof E&&$u.call(E)==Ua}var Kd=sl?Wr(sl):qu;function qa(c){return M0(c)&&c>=-J&&c<=J}var M_=Bi?Wr(Bi):bc;function _m(c){return typeof c=="string"||!kn(c)&&di(c)&&_i(c)==xe}function la(c){return typeof c=="symbol"||di(c)&&_i(c)==se}var Jd=Ci?Wr(Ci):Qu;function _T(c){return c===t}function vT(c){return di(c)&&hs(c)==ht}function nd(c){return di(c)&&_i(c)==St}var lb=bn(ba),Zf=bn(function(c,m){return c<=m});function Pv(c){if(!c)return[];if(Hi(c))return _m(c)?Fr(c):ni(c);if(ta&&c[ta])return zh(c[ta]());var m=hs(c),E=m==rt?Vu:m==mt?eu:Tf;return E(c)}function Mc(c){if(!c)return c===0?c:0;if(c=Ki(c),c===we||c===-we){var m=c<0?-1:1;return m*re}return c===c?c:0}function Mn(c){var m=Mc(c),E=m%1;return m===m?E?m-E:m:0}function I0(c){return c?Wa(Mn(c),0,fe):0}function Ki(c){if(typeof c=="number")return c;if(la(c))return ie;if(ri(c)){var m=typeof c.valueOf=="function"?c.valueOf():c;c=ri(m)?m+"":m}if(typeof c!="string")return c===0?c:+c;c=Fh(c);var E=oi.test(c);return E||Yr.test(c)?Da(c.slice(2),E?2:8):Cr.test(c)?ie:+c}function ub(c){return cs(c,ns(c))}function ut(c){return c?Wa(Mn(c),-J,J):c===0?c:0}function sr(c){return c==null?"":ai(c)}var A_=Sa(function(c,m){if(xc(m)||Hi(m)){cs(m,wi(m),c);return}for(var E in m)qn.call(m,E)&&Co(c,E,m[E])}),I_=Sa(function(c,m){cs(m,ns(m),c)}),rd=Sa(function(c,m,E,N){cs(m,ns(m),c,N)}),rg=Sa(function(c,m,E,N){cs(m,wi(m),c,N)}),Bv=Fn(Xh);function R0(c,m){var E=xs(c);return m==null?E:as(E,m)}var cb=fn(function(c,m){c=vn(c);var E=-1,N=m.length,G=N>2?m[2]:t;for(G&&Ur(m[0],m[1],G)&&(N=1);++E<N;)for(var K=m[E],ce=ns(K),_e=-1,Ee=ce.length;++_e<Ee;){var et=ce[_e],tt=c[et];(tt===t||Ca(tt,Fi[et])&&!qn.call(c,et))&&(c[et]=K[et])}return c}),yT=fn(function(c){return c.push(t,st),Vn(id,t,c)});function qd(c,m){return Md(c,ln(m,3),ls)}function hb(c,m){return Md(c,ln(m,3),Va)}function R_(c,m){return c==null?c:ou(c,ln(m,3),ns)}function db(c,m){return c==null?c:Ju(c,ln(m,3),ns)}function bT(c,m){return c&&ls(c,ln(m,3))}function TT(c,m){return c&&Va(c,ln(m,3))}function ST(c){return c==null?[]:$s(c,wi(c))}function wT(c){return c==null?[]:$s(c,ns(c))}function vm(c,m,E){var N=c==null?t:Cs(c,m);return N===t?E:N}function fb(c,m){return c!=null&&Cg(c,m,yc)}function ym(c,m){return c!=null&&Cg(c,m,ff)}var pb=de(function(c,m,E){m!=null&&typeof m.toString!="function"&&(m=Hs.call(m)),c[m]=E},F_(Oo)),k_=de(function(c,m,E){m!=null&&typeof m.toString!="function"&&(m=Hs.call(m)),qn.call(c,m)?c[m].push(E):c[m]=[E]},ln),O_=fn(Pn);function wi(c){return Hi(c)?yn(c):ho(c)}function ns(c){return Hi(c)?yn(c,!0):vd(c)}function ET(c,m){var E={};return m=ln(m,3),ls(c,function(N,G,K){Ho(E,m(N,G,K),N)}),E}function Np(c,m){var E={};return m=ln(m,3),ls(c,function(N,G,K){Ho(E,G,m(N,G,K))}),E}var bm=Sa(function(c,m,E){po(c,m,E)}),id=Sa(function(c,m,E,N){po(c,m,E,N)}),xT=Fn(function(c,m){var E={};if(c==null)return E;var N=!1;m=fr(m,function(K){return K=sa(K,c),N||(N=K.length>1),K}),cs(c,Ar(c),E),N&&(E=ki(E,y|b|S,Ht));for(var G=m.length;G--;)Qc(E,m[G]);return E});function k0(c,m){return L_(c,Et(ln(m)))}var en=Fn(function(c,m){return c==null?{}:ec(c,m)});function L_(c,m){if(c==null)return{};var E=fr(Ar(c),function(N){return[N]});return m=ln(m),xh(c,E,function(N,G){return m(N,G[0])})}function xE(c,m,E){m=sa(m,c);var N=-1,G=m.length;for(G||(G=1,c=t);++N<G;){var K=c==null?t:c[yo(m[N])];K===t&&(N=G,K=E),c=Cc(K)?K.call(c):K}return c}function $E(c,m,E){return c==null?c:vi(c,m,E)}function CE(c,m,E,N){return N=typeof N=="function"?N:t,c==null?c:vi(c,m,E,N)}var N_=Tt(wi),O0=Tt(ns);function fs(c,m,E){var N=kn(c),G=N||ah(c)||Jd(c);if(m=ln(m,4),E==null){var K=c&&c.constructor;G?E=N?new K:[]:ri(c)?E=Cc(K)?xs(Ha(c)):{}:E={}}return(G?Xr:ls)(c,function(ce,_e,Ee){return m(E,ce,_e,Ee)}),E}function Pg(c,m){return c==null?!0:Qc(c,m)}function Fv(c,m,E){return c==null?c:mo(c,m,Qs(E))}function ME(c,m,E,N){return N=typeof N=="function"?N:t,c==null?c:mo(c,m,Qs(E),N)}function Tf(c){return c==null?[]:Ai(c,wi(c))}function Sf(c){return c==null?[]:Ai(c,ns(c))}function D_(c,m,E){return E===t&&(E=m,m=t),E!==t&&(E=Ki(E),E=E===E?E:0),m!==t&&(m=Ki(m),m=m===m?m:0),Wa(Ki(c),m,E)}function Ns(c,m,E){return m=Mc(m),E===t?(E=m,m=0):E=Mc(E),c=Ki(c),Eh(c,m,E)}function $T(c,m,E){if(E&&typeof E!="boolean"&&Ur(c,m,E)&&(m=E=t),E===t&&(typeof m=="boolean"?(E=m,m=t):typeof c=="boolean"&&(E=c,c=t)),c===t&&m===t?(c=0,m=1):(c=Mc(c),m===t?(m=c,c=0):m=Mc(m)),c>m){var N=c;c=m,m=N}if(E||c%1||m%1){var G=Il();return Ii(c+G*(m-c+_h("1e-"+((G+"").length-1))),m)}return Os(c,m)}var mb=d(function(c,m,E){return m=m.toLowerCase(),c+(E?Tm(m):m)});function Tm(c){return P0(sr(c).toLowerCase())}function zv(c){return c=sr(c),c&&c.replace(Oa,cf).replace(_s,"")}function gb(c,m,E){c=sr(c),m=ai(m);var N=c.length;E=E===t?N:Wa(Mn(E),0,N);var G=E;return E-=m.length,E>=0&&c.slice(E,G)==m}function _b(c){return c=sr(c),c&&Pr.test(c)?c.replace(On,hf):c}function vb(c){return c=sr(c),c&&zt.test(c)?c.replace(ot,"\\$&"):c}var P_=d(function(c,m,E){return c+(E?"-":"")+m.toLowerCase()}),AE=d(function(c,m,E){return c+(E?" ":"")+m.toLowerCase()}),CT=x("toLowerCase");function IE(c,m,E){c=sr(c),m=Mn(m);var N=m?is(c):0;if(!m||N>=m)return c;var G=(m-N)/2;return wt(nu(G),E)+c+wt(Yu(G),E)}function RE(c,m,E){c=sr(c),m=Mn(m);var N=m?is(c):0;return m&&N<m?c+wt(m-N,E):c}function ep(c,m,E){c=sr(c),m=Mn(m);var N=m?is(c):0;return m&&N<m?wt(m-N,E)+c:c}function yb(c,m,E){return E||m==null?m=0:m&&(m=+m),Ff(sr(c).replace(sn,""),m||0)}function bb(c,m,E){return(E?Ur(c,m,E):m===t)?m=1:m=Mn(m),Vs(sr(c),m)}function L0(){var c=arguments,m=sr(c[0]);return c.length<3?m:m.replace(c[1],c[2])}var MT=d(function(c,m,E){return c+(E?"_":"")+m.toLowerCase()});function Tb(c,m,E){return E&&typeof E!="number"&&Ur(c,m,E)&&(m=E=t),E=E===t?fe:E>>>0,E?(c=sr(c),c&&(typeof m=="string"||m!=null&&!Kd(m))&&(m=ai(m),!m&&ol(c))?go(Fr(c),0,E):c.split(m,E)):[]}var B_=d(function(c,m,E){return c+(E?" ":"")+P0(m)});function AT(c,m,E){return c=sr(c),E=E==null?0:Wa(Mn(E),0,c.length),m=ai(m),c.slice(E,E+m.length)==m}function Sb(c,m,E){var N=X.templateSettings;E&&Ur(c,m,E)&&(m=t),c=sr(c),m=rd({},m,N,Ne);var G=rd({},m.imports,N.imports,Ne),K=wi(G),ce=Ai(G,K),_e,Ee,et=0,tt=m.interpolate||xo,ct="__p += '",Rt=zr((m.escape||xo).source+"|"+tt.source+"|"+(tt===gr?rr:xo).source+"|"+(m.evaluate||xo).source+"|$","g"),Xt="//# sourceURL="+(qn.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yu+"]")+`
`;c.replace(Rt,function(dn,Yn,er,ua,to,Ds){return er||(er=ua),ct+=c.slice(et,Ds).replace(Yl,pd),Yn&&(_e=!0,ct+=`' +
__e(`+Yn+`) +
'`),to&&(Ee=!0,ct+=`';
`+to+`;
__p += '`),er&&(ct+=`' +
((__t = (`+er+`)) == null ? '' : __t) +
'`),et=Ds+dn.length,dn}),ct+=`';
`;var pn=qn.call(m,"variable")&&m.variable;if(!pn)ct=`with (obj) {
`+ct+`
}
`;else if(Vt.test(pn))throw new rn(u);ct=(Ee?ct.replace(tn,""):ct).replace(_t,"$1").replace(Jt,"$1;"),ct="function("+(pn||"obj")+`) {
`+(pn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_e?", __e = _.escape":"")+(Ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ct+`return __p
}`;var Ln=B0(function(){return In(K,Xt+"return "+ct).apply(t,ce)});if(Ln.source=ct,C0(Ln))throw Ln;return Ln}function sd(c){return sr(c).toLowerCase()}function Dp(c){return sr(c).toUpperCase()}function IT(c,m,E){if(c=sr(c),c&&(E||m===t))return Fh(c);if(!c||!(m=ai(m)))return c;var N=Fr(c),G=Fr(m),K=ji(N,G),ce=fa(N,G)+1;return go(N,K,ce).join("")}function Uv(c,m,E){if(c=sr(c),c&&(E||m===t))return c.slice(0,Cl(c)+1);if(!c||!(m=ai(m)))return c;var N=Fr(c),G=fa(N,Fr(m))+1;return go(N,0,G).join("")}function RT(c,m,E){if(c=sr(c),c&&(E||m===t))return c.replace(sn,"");if(!c||!(m=ai(m)))return c;var N=Fr(c),G=ji(N,Fr(m));return go(N,G).join("")}function N0(c,m){var E=le,N=Z;if(ri(m)){var G="separator"in m?m.separator:G;E="length"in m?Mn(m.length):E,N="omission"in m?ai(m.omission):N}c=sr(c);var K=c.length;if(ol(c)){var ce=Fr(c);K=ce.length}if(E>=K)return c;var _e=E-is(N);if(_e<1)return N;var Ee=ce?go(ce,0,_e).join(""):c.slice(0,_e);if(G===t)return Ee+N;if(ce&&(_e+=Ee.length-_e),Kd(G)){if(c.slice(_e).search(G)){var et,tt=Ee;for(G.global||(G=zr(G.source,sr(_r.exec(G))+"g")),G.lastIndex=0;et=G.exec(tt);)var ct=et.index;Ee=Ee.slice(0,ct===t?_e:ct)}}else if(c.indexOf(ai(G),_e)!=_e){var Rt=Ee.lastIndexOf(G);Rt>-1&&(Ee=Ee.slice(0,Rt))}return Ee+N}function Hv(c){return c=sr(c),c&&si.test(c)?c.replace(Kt,za):c}var D0=d(function(c,m,E){return c+(E?" ":"")+m.toUpperCase()}),P0=x("toUpperCase");function wb(c,m,E){return c=sr(c),m=E?t:m,m===t?Fc(c)?bh(c):Tp(c):c.match(m)||[]}var B0=fn(function(c,m){try{return Vn(c,t,m)}catch(E){return C0(E)?E:new rn(E)}}),Eb=Fn(function(c,m){return Xr(m,function(E){E=yo(E),Ho(c,E,Zt(c[E],c))}),c});function xb(c){var m=c==null?0:c.length,E=ln();return c=m?fr(c,function(N){if(typeof N[1]!="function")throw new Ti(l);return[E(N[0]),N[1]]}):[],fn(function(N){for(var G=-1;++G<m;){var K=c[G];if(Vn(K[0],this,N))return Vn(K[1],this,N)}})}function kE(c){return Nd(ki(c,y))}function F_(c){return function(){return c}}function OE(c,m){return c==null||c!==c?m:c}var kT=P(),LE=P(!0);function Oo(c){return c}function Ji(c){return qs(typeof c=="function"?c:ki(c,y))}function Pp(c){return Au(ki(c,y))}function z_(c,m){return fo(c,ki(m,y))}var Gv=fn(function(c,m){return function(E){return Pn(E,c,m)}}),Bp=fn(function(c,m){return function(E){return Pn(c,E,m)}});function U_(c,m,E){var N=wi(m),G=$s(m,N);E==null&&!(ri(m)&&(G.length||!N.length))&&(E=m,m=c,c=this,G=$s(m,wi(m)));var K=!(ri(E)&&"chain"in E)||!!E.chain,ce=Cc(c);return Xr(G,function(_e){var Ee=m[_e];c[_e]=Ee,ce&&(c.prototype[_e]=function(){var et=this.__chain__;if(K||et){var tt=c(this.__wrapped__),ct=tt.__actions__=ni(this.__actions__);return ct.push({func:Ee,args:arguments,thisArg:c}),tt.__chain__=et,tt}return Ee.apply(c,Zo([this.value()],arguments))})}),c}function F0(){return wr._===this&&(wr._=Hh),this}function z0(){}function OT(c){return c=Mn(c),fn(function(m){return Wo(m,c)})}var $b=Ze(fr),NE=Ze(wu),Cb=Ze(Bc);function H_(c){return Ea(c)?ci(yo(c)):$h(c)}function LT(c){return function(m){return c==null?t:Cs(c,m)}}var Mb=cn(),Wv=cn(!0);function U0(){return[]}function Sm(){return!1}function Ab(){return{}}function Ib(){return""}function Rb(){return!0}function kb(c,m){if(c=Mn(c),c<1||c>J)return[];var E=fe,N=Ii(c,fe);m=ln(m),c-=fe;for(var G=ql(N,m);++E<c;)m(E);return G}function ig(c){return kn(c)?fr(c,yo):la(c)?[c]:ni(_0(sr(c)))}function Ob(c){var m=++pa;return sr(c)+m}var Lb=Oe(function(c,m){return c+m},0),Nb=gn("ceil"),Db=Oe(function(c,m){return c/m},1),Pb=gn("floor");function Qn(c){return c&&c.length?Ol(c,Oo,ja):t}function NT(c,m){return c&&c.length?Ol(c,ln(m,2),ja):t}function DT(c){return Ba(c,Oo)}function Bg(c,m){return Ba(c,ln(m,2))}function G_(c){return c&&c.length?Ol(c,Oo,ba):t}function H0(c,m){return c&&c.length?Ol(c,ln(m,2),ba):t}var PT=Oe(function(c,m){return c*m},1),Vv=gn("round"),BT=Oe(function(c,m){return c-m},0);function FT(c){return c&&c.length?zo(c,Oo):0}function zT(c,m){return c&&c.length?zo(c,ln(m,2)):0}return X.after=Ye,X.ary=at,X.assign=A_,X.assignIn=I_,X.assignInWith=rd,X.assignWith=rg,X.at=Bv,X.before=Lt,X.bind=Zt,X.bindAll=Eb,X.bindKey=hn,X.castArray=jd,X.chain=Ou,X.chunk=rm,X.compact=Ru,X.concat=v0,X.cond=xb,X.conforms=kE,X.constant=F_,X.countBy=Rv,X.create=R0,X.curry=an,X.curryRight=Dn,X.debounce=Zn,X.defaults=cb,X.defaultsDeep=yT,X.defer=ir,X.delay=Ro,X.difference=jo,X.differenceBy=ts,X.differenceWith=hu,X.drop=vl,X.dropRight=ku,X.dropRightWhile=du,X.dropWhile=Cp,X.fill=Fl,X.filter=Vd,X.flatMap=eg,X.flatMapDeep=Lg,X.flatMapDepth=kv,X.flatten=_f,X.flattenDeep=Ig,X.flattenDepth=im,X.flip=xt,X.flow=kT,X.flowRight=LE,X.fromPairs=rh,X.functions=ST,X.functionsIn=wT,X.groupBy=ng,X.initial=Hd,X.intersection=Jm,X.intersectionBy=qm,X.intersectionWith=bo,X.invert=pb,X.invertBy=k_,X.invokeMap=Jf,X.iteratee=Ji,X.keyBy=dm,X.keys=wi,X.keysIn=ns,X.map=Si,X.mapKeys=ET,X.mapValues=Np,X.matches=Pp,X.matchesProperty=z_,X.memoize=dt,X.merge=bm,X.mergeWith=id,X.method=Gv,X.methodOf=Bp,X.mixin=U_,X.negate=Et,X.nthArg=OT,X.omit=xT,X.omitBy=k0,X.once=Sn,X.orderBy=qf,X.over=$b,X.overArgs=lr,X.overEvery=NE,X.overSome=Cb,X.partial=nr,X.partialRight=mr,X.partition=fm,X.pick=en,X.pickBy=L_,X.property=H_,X.propertyOf=LT,X.pull=Rg,X.pullAll=Gd,X.pullAllBy=Qm,X.pullAllWith=$c,X.pullAt=Wd,X.range=Mb,X.rangeRight=Wv,X.rearg=Lr,X.reject=Ng,X.remove=oa,X.rest=Ul,X.reverse=$a,X.sampleSize=T,X.set=$E,X.setWith=CE,X.shuffle=R,X.slice=w_,X.sortBy=ee,X.sortedUniq=Ip,X.sortedUniqBy=T0,X.split=Tb,X.spread=ds,X.tail=am,X.take=S0,X.takeRight=E_,X.takeRightWhile=lm,X.takeWhile=vf,X.tap=kg,X.throttle=Qf,X.thru=jf,X.toArray=Pv,X.toPairs=N_,X.toPairsIn=O0,X.toPath=ig,X.toPlainObject=ub,X.transform=fs,X.unary=$0,X.union=x_,X.unionBy=ib,X.unionWith=w0,X.uniq=E0,X.uniqBy=Vf,X.uniqWith=zn,X.unset=Pg,X.unzip=sh,X.unzipWith=Rp,X.update=Fv,X.updateWith=ME,X.values=Tf,X.valuesIn=Sf,X.without=aa,X.words=wb,X.wrap=Lu,X.xor=$_,X.xorBy=x0,X.xorWith=um,X.zip=sb,X.zipObject=Iv,X.zipObjectDeep=oh,X.zipWith=To,X.entries=N_,X.entriesIn=O0,X.extend=I_,X.extendWith=rd,U_(X,X),X.add=Lb,X.attempt=B0,X.camelCase=mb,X.capitalize=Tm,X.ceil=Nb,X.clamp=D_,X.clone=pT,X.cloneDeep=wE,X.cloneDeepWith=mm,X.cloneWith=SE,X.conformsTo=ob,X.deburr=zv,X.defaultTo=OE,X.divide=Db,X.endsWith=gb,X.eq=Ca,X.escape=_b,X.escapeRegExp=vb,X.every=Og,X.find=Li,X.findIndex=zd,X.findKey=qd,X.findLast=hm,X.findLastIndex=Ud,X.findLastKey=hb,X.floor=Pb,X.forEach=tg,X.forEachRight=Op,X.forIn=R_,X.forInRight=db,X.forOwn=bT,X.forOwnRight=TT,X.get=vm,X.gt=mT,X.gte=Dg,X.has=fb,X.hasIn=ym,X.head=yl,X.identity=Oo,X.includes=Kf,X.indexOf=ih,X.inRange=Ns,X.invoke=O_,X.isArguments=Yd,X.isArray=kn,X.isArrayBuffer=Ov,X.isArrayLike=Hi,X.isArrayLikeObject=Jr,X.isBoolean=ab,X.isBuffer=ah,X.isDate=gT,X.isElement=bf,X.isEmpty=C_,X.isEqual=Gi,X.isEqualWith=ko,X.isError=C0,X.isFinite=Lv,X.isFunction=Cc,X.isInteger=M0,X.isLength=Ah,X.isMap=td,X.isMatch=As,X.isMatchWith=gm,X.isNaN=Nv,X.isNative=Dv,X.isNil=EE,X.isNull=A0,X.isNumber=Xd,X.isObject=ri,X.isObjectLike=di,X.isPlainObject=Hr,X.isRegExp=Kd,X.isSafeInteger=qa,X.isSet=M_,X.isString=_m,X.isSymbol=la,X.isTypedArray=Jd,X.isUndefined=_T,X.isWeakMap=vT,X.isWeakSet=nd,X.join=sm,X.kebabCase=P_,X.last=Ls,X.lastIndexOf=zl,X.lowerCase=AE,X.lowerFirst=CT,X.lt=lb,X.lte=Zf,X.max=Qn,X.maxBy=NT,X.mean=DT,X.meanBy=Bg,X.min=G_,X.minBy=H0,X.stubArray=U0,X.stubFalse=Sm,X.stubObject=Ab,X.stubString=Ib,X.stubTrue=Rb,X.multiply=PT,X.nth=Mp,X.noConflict=F0,X.noop=z0,X.now=be,X.pad=IE,X.padEnd=RE,X.padStart=ep,X.parseInt=yb,X.random=$T,X.reduce=pm,X.reduceRight=Lp,X.repeat=bb,X.replace=L0,X.result=xE,X.round=Vv,X.runInContext=ye,X.sample=v,X.size=F,X.snakeCase=MT,X.some=Y,X.sortedIndex=om,X.sortedIndexBy=y0,X.sortedIndexOf=Av,X.sortedLastIndex=Wf,X.sortedLastIndexBy=Ap,X.sortedLastIndexOf=b0,X.startCase=B_,X.startsWith=AT,X.subtract=BT,X.sum=FT,X.sumBy=zT,X.template=Sb,X.times=kb,X.toFinite=Mc,X.toInteger=Mn,X.toLength=I0,X.toLower=sd,X.toNumber=Ki,X.toSafeInteger=ut,X.toString=sr,X.toUpper=Dp,X.trim=IT,X.trimEnd=Uv,X.trimStart=RT,X.truncate=N0,X.unescape=Hv,X.uniqueId=Ob,X.upperCase=D0,X.upperFirst=P0,X.each=tg,X.eachRight=Op,X.first=yl,U_(X,function(){var c={};return ls(X,function(m,E){qn.call(X.prototype,E)||(c[E]=m)}),c}(),{chain:!1}),X.VERSION=r,Xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){X[c].placeholder=X}),Xr(["drop","take"],function(c,m){mn.prototype[c]=function(E){E=E===t?1:ei(Mn(E),0);var N=this.__filtered__&&!m?new mn(this):this.clone();return N.__filtered__?N.__takeCount__=Ii(E,N.__takeCount__):N.__views__.push({size:Ii(E,fe),type:c+(N.__dir__<0?"Right":"")}),N},mn.prototype[c+"Right"]=function(E){return this.reverse()[c](E).reverse()}}),Xr(["filter","map","takeWhile"],function(c,m){var E=m+1,N=E==ae||E==ge;mn.prototype[c]=function(G){var K=this.clone();return K.__iteratees__.push({iteratee:ln(G,3),type:E}),K.__filtered__=K.__filtered__||N,K}}),Xr(["head","last"],function(c,m){var E="take"+(m?"Right":"");mn.prototype[c]=function(){return this[E](1).value()[0]}}),Xr(["initial","tail"],function(c,m){var E="drop"+(m?"":"Right");mn.prototype[c]=function(){return this.__filtered__?new mn(this):this[E](1)}}),mn.prototype.compact=function(){return this.filter(Oo)},mn.prototype.find=function(c){return this.filter(c).head()},mn.prototype.findLast=function(c){return this.reverse().find(c)},mn.prototype.invokeMap=fn(function(c,m){return typeof c=="function"?new mn(this):this.map(function(E){return Pn(E,c,m)})}),mn.prototype.reject=function(c){return this.filter(Et(ln(c)))},mn.prototype.slice=function(c,m){c=Mn(c);var E=this;return E.__filtered__&&(c>0||m<0)?new mn(E):(c<0?E=E.takeRight(-c):c&&(E=E.drop(c)),m!==t&&(m=Mn(m),E=m<0?E.dropRight(-m):E.take(m-c)),E)},mn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},mn.prototype.toArray=function(){return this.take(fe)},ls(mn.prototype,function(c,m){var E=/^(?:filter|find|map|reject)|While$/.test(m),N=/^(?:head|last)$/.test(m),G=X[N?"take"+(m=="last"?"Right":""):m],K=N||/^find/.test(m);!G||(X.prototype[m]=function(){var ce=this.__wrapped__,_e=N?[1]:arguments,Ee=ce instanceof mn,et=_e[0],tt=Ee||kn(ce),ct=function(Yn){var er=G.apply(X,Zo([Yn],_e));return N&&Rt?er[0]:er};tt&&E&&typeof et=="function"&&et.length!=1&&(Ee=tt=!1);var Rt=this.__chain__,Xt=!!this.__actions__.length,pn=K&&!Rt,Ln=Ee&&!Xt;if(!K&&tt){ce=Ln?ce:new mn(this);var dn=c.apply(ce,_e);return dn.__actions__.push({func:jf,args:[ct],thisArg:t}),new Mr(dn,Rt)}return pn&&Ln?c.apply(this,_e):(dn=this.thru(ct),pn?N?dn.value()[0]:dn.value():dn)})}),Xr(["pop","push","shift","sort","splice","unshift"],function(c){var m=lo[c],E=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",N=/^(?:pop|shift)$/.test(c);X.prototype[c]=function(){var G=arguments;if(N&&!this.__chain__){var K=this.value();return m.apply(kn(K)?K:[],G)}return this[E](function(ce){return m.apply(kn(ce)?ce:[],G)})}}),ls(mn.prototype,function(c,m){var E=X[m];if(E){var N=E.name+"";qn.call(kl,N)||(kl[N]=[]),kl[N].push({name:m,func:E})}}),kl[W(t,O).name]=[{name:"wrapper",func:t}],mn.prototype.clone=zf,mn.prototype.reverse=cl,mn.prototype.value=Ri,X.prototype.at=ed,X.prototype.chain=cm,X.prototype.commit=Yf,X.prototype.next=Xf,X.prototype.plant=bd,X.prototype.reverse=yf,X.prototype.toJSON=X.prototype.valueOf=X.prototype.value=Zm,X.prototype.first=X.prototype.head,ta&&(X.prototype[ta]=kp),X},pi=Ad();bi?((bi.exports=pi)._=pi,Rs._=pi):wr._=pi}).call(lv)})(fg,fg.exports);const WRe=fg.exports,VRe=(n,e)=>({clock:new HRe,items:{},tfs:{},hulls:{},lines:{},texts:{},points:{},widgets:{},onMove:(t,r,s,o)=>n(l=>{console.log(o),l[r][t].position={...o.position},l[r][t].rotation=o.quaternion,l[r][t].rotation.x=o.quaternion.x,l[r][t].rotation.y=o.quaternion.y,l[r][t].rotation.z=o.quaternion.z,l[r][t].rotation.w=o.quaternion.w,l[r][t].scale={...o.scale}}),onClick:(t,r,s,o)=>{r||console.log(`id: ${t} clicked!`,s),e().items[t]&&!r&&o.stopPropagation()},onPointerOver:(t,r,s)=>{},onPointerOut:(t,r,s)=>{},pause:()=>n(t=>{t.clock.setTimescale(0)}),play:t=>n(r=>{r.clock.setTimescale(t||1)}),reset:t=>n(r=>{console.log(`setting time to ${t}`),r.clock._elapsed=t?t*1e3:0}),clearItems:()=>n(t=>({items:{}})),clearLines:()=>n(t=>({lines:{}})),clearTfs:()=>n(t=>({tfs:{}})),clearHulls:()=>n(t=>({hulls:{}})),clearTexts:()=>n(t=>({texts:{}})),clearPoints:()=>n(t=>({points:{}})),setItems:t=>n(r=>({items:t})),setLines:t=>n(r=>({lines:t})),setTfs:t=>n(r=>({tfs:t})),setHulls:t=>n(r=>({hulls:t})),setTexts:t=>n(r=>({texts:t})),setPoints:t=>n(r=>({points:t})),removeItem:t=>n(r=>{delete r.items[t]}),removeLine:t=>n(r=>{delete r.lines[t]}),removeTf:t=>n(r=>{delete r.tfs[t]}),removeHull:t=>n(r=>{delete r.hulls[t]}),removeText:t=>n(r=>{delete r.texts[t]}),removePoint:t=>n(r=>{delete r.points[t]}),setItem:(t,r)=>n(s=>{s.items[t]=r}),setLine:(t,r)=>n(s=>{s.lines[t]=r}),setTf:(t,r)=>n(s=>{s.tfs[t]=r}),setHull:(t,r)=>n(s=>{s.hulls[t]=r}),setText:(t,r)=>n(s=>{s.texts[t]=r}),setPoint:(t,r)=>n(s=>{s.points[t]=r}),setProperty:(t,r)=>n(s=>{WRe.set(s,t,r)})}),jRe=URe(CRe(VRe)),YRe=xRe(jRe),fee=pe.createContext(),Do=(n,e)=>{const t=pe.useContext(fee);return cee(t,n,e)},XRe=({store:n,children:e,debug:t=!1})=>(t&&console.log("SceneProvider regenerated"),un(fee.Provider,{value:n||YRe,children:e})),KRe=yt.forwardRef((n,e)=>un("ambientLight",{ref:e,...n}));yt.forwardRef((n,e)=>un("pointLight",{ref:e,...n}));const JRe=yt.forwardRef((n,e)=>un("directionalLight",{ref:e,...n})),d_=(n,e,t,r)=>{var s=new Bn;return s.setRGB(n/255,e/255,t/255),r<=.99?new Q$({color:s.getHex(),opacity:r+.1,transparent:!0,depthWrite:!0,blendSrc:i2,blendDst:s2,blendEquation:GF,blending:pv}):new Q$({color:s.getHex(),opacity:r,blending:pv})},MI=fg.exports.memoize(n=>{var e=new Bn(n),t=`
		varying vec3	vVertexWorldPosition;
		varying vec3	vVertexNormal;

		// varying vec4	vFragColor;

		void main(){
			vVertexNormal	= normalize(normalMatrix * normal);

			vVertexWorldPosition	= (modelMatrix * vec4(position, 1.0)).xyz;

			// set gl_Position
			gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
		}`,r=`
		uniform vec3	glowColor;
		uniform float	coeficient;
		uniform float	power;

		varying vec3	vVertexNormal;
		varying vec3	vVertexWorldPosition;

		// varying vec4	vFragColor;

		void main(){
			vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;
			vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
			viewCameraToVertex	= normalize(viewCameraToVertex);
			float intensity		= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);
			gl_FragColor		= vec4(glowColor, intensity);
		}`,s=new xd({uniforms:{coeficient:{type:"f",value:1.2},power:{type:"f",value:4},glowColor:{type:"c",value:e}},vertexShader:t,fragmentShader:r,blending:_R,transparent:!0,depthWrite:!1,depthTest:!1});return s});function qRe(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(e,function(r,s,o,l){return s+s+o+o+l+l});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}const t1=new T4,Hp=new Ae,dy=new Ae,Du=new Sl,s9={X:new Ae(1,0,0),Y:new Ae(0,1,0),Z:new Ae(0,0,1)},bN={type:"change"},o9={type:"mouseDown"},a9={type:"mouseUp",mode:null},l9={type:"objectChange"};class QRe extends ro{constructor(e,t){super(),t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const r=new ike;this._gizmo=r,this.add(r);const s=new ske;this._plane=s,this.add(s);const o=this;function l(L,B){let D=B;Object.defineProperty(o,L,{get:function(){return D!==void 0?D:B},set:function(z){D!==z&&(D=z,s[L]=z,r[L]=z,o.dispatchEvent({type:L+"-changed",value:z}),o.dispatchEvent(bN))}}),o[L]=B,s[L]=B,r[L]=B}l("camera",e),l("object",void 0),l("enabled",!0),l("axis",null),l("mode","translate"),l("translationSnap",null),l("rotationSnap",null),l("scaleSnap",null),l("space","world"),l("size",1),l("dragging",!1),l("showX",!0),l("showY",!0),l("showZ",!0);const u=new Ae,h=new Ae,f=new Sl,g=new Sl,y=new Ae,b=new Sl,S=new Ae,C=new Ae,M=new Ae,A=0,O=new Ae;l("worldPosition",u),l("worldPositionStart",h),l("worldQuaternion",f),l("worldQuaternionStart",g),l("cameraPosition",y),l("cameraQuaternion",b),l("pointStart",S),l("pointEnd",C),l("rotationAxis",M),l("rotationAngle",A),l("eye",O),this._offset=new Ae,this._startNorm=new Ae,this._endNorm=new Ae,this._cameraScale=new Ae,this._parentPosition=new Ae,this._parentQuaternion=new Sl,this._parentQuaternionInv=new Sl,this._parentScale=new Ae,this._worldScaleStart=new Ae,this._worldQuaternionInv=new Sl,this._worldScale=new Ae,this._positionStart=new Ae,this._quaternionStart=new Sl,this._scaleStart=new Ae,this._getPointer=ZRe.bind(this),this._onPointerDown=tke.bind(this),this._onPointerHover=eke.bind(this),this._onPointerMove=nke.bind(this),this._onPointerUp=rke.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye):this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;t1.setFromCamera(e,this.camera);const t=TN(this._gizmo.picker[this.mode],t1);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){t1.setFromCamera(e,this.camera);const t=TN(this._plane,t1,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,o9.mode=this.mode,this.dispatchEvent(o9)}}pointerMove(e){const t=this.axis,r=this.mode,s=this.object;let o=this.space;if(r==="scale"?o="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(o="world"),s===void 0||t===null||this.dragging===!1||e.button!==-1)return;t1.setFromCamera(e,this.camera);const l=TN(this._plane,t1,!0);if(l){if(this.pointEnd.copy(l.point).sub(this.worldPositionStart),r==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),o==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),o==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),s.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(o==="local"&&(s.position.applyQuaternion(Du.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.position.applyQuaternion(this._quaternionStart)),o==="world"&&(s.parent&&s.position.add(Hp.setFromMatrixPosition(s.parent.matrixWorld)),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.parent&&s.position.sub(Hp.setFromMatrixPosition(s.parent.matrixWorld))));else if(r==="scale"){if(t.search("XYZ")!==-1){let u=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(u*=-1),dy.set(u,u,u)}else Hp.copy(this.pointStart),dy.copy(this.pointEnd),Hp.applyQuaternion(this._worldQuaternionInv),dy.applyQuaternion(this._worldQuaternionInv),dy.divide(Hp),t.search("X")===-1&&(dy.x=1),t.search("Y")===-1&&(dy.y=1),t.search("Z")===-1&&(dy.z=1);s.scale.copy(this._scaleStart).multiply(dy),this.scaleSnap&&(t.search("X")!==-1&&(s.scale.x=Math.round(s.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(s.scale.y=Math.round(s.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(s.scale.z=Math.round(s.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(r==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const u=20/this.worldPosition.distanceTo(Hp.setFromMatrixPosition(this.camera.matrixWorld));t==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Hp.copy(this.rotationAxis).cross(this.eye))*u):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(s9[t]),Hp.copy(s9[t]),o==="local"&&Hp.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Hp.cross(this.eye).normalize())*u),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),o==="local"&&t!=="E"&&t!=="XYZE"?(s.quaternion.copy(this._quaternionStart),s.quaternion.multiply(Du.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),s.quaternion.copy(Du.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),s.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(bN),this.dispatchEvent(l9)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(a9.mode=this.mode,this.dispatchEvent(a9)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){!this.enabled||this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(bN),this.dispatchEvent(l9),this.pointStart.copy(this.pointEnd))}getRaycaster(){return t1}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function ZRe(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{const e=this.domElement.getBoundingClientRect();return{x:(n.clientX-e.left)/e.width*2-1,y:-(n.clientY-e.top)/e.height*2+1,button:n.button}}}function eke(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n));break}}function tke(n){!this.enabled||(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function nke(n){!this.enabled||this.pointerMove(this._getPointer(n))}function rke(n){!this.enabled||(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function TN(n,e,t){const r=e.intersectObject(n,!0);for(let s=0;s<r.length;s++)if(r[s].object.visible||t)return r[s];return!1}const zA=new hT,Tl=new Ae(0,1,0),u9=new Ae(0,0,0),c9=new Qr,UA=new Sl,AI=new Sl,X0=new Ae,h9=new Qr,Dx=new Ae(1,0,0),d1=new Ae(0,1,0),Px=new Ae(0,0,1),HA=new Ae,wx=new Ae,Ex=new Ae;class ike extends ro{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new f0({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Pf({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),r=e.clone();r.opacity=.15;const s=t.clone();s.opacity=.5;const o=e.clone();o.color.setHex(16711680);const l=e.clone();l.color.setHex(65280);const u=e.clone();u.color.setHex(255);const h=e.clone();h.color.setHex(16711680),h.opacity=.5;const f=e.clone();f.color.setHex(65280),f.opacity=.5;const g=e.clone();g.color.setHex(255),g.opacity=.5;const y=e.clone();y.opacity=.25;const b=e.clone();b.color.setHex(16776960),b.opacity=.25,e.clone().color.setHex(16776960);const S=e.clone();S.color.setHex(7895160);const C=new Gl(0,.04,.1,12);C.translate(0,.05,0);const M=new pu(.08,.08,.08);M.translate(0,.04,0);const A=new ui;A.setAttribute("position",new ar([0,0,0,1,0,0],3));const O=new Gl(.0075,.0075,.5,3);O.translate(0,.25,0);function L(ae,ue){const ge=new e0(ae,.0075,3,64,ue*Math.PI*2);return ge.rotateY(Math.PI/2),ge.rotateX(Math.PI/2),ge}function B(){const ae=new ui;return ae.setAttribute("position",new ar([0,0,0,1,1,1],3)),ae}const D={X:[[new Un(C,o),[.5,0,0],[0,0,-Math.PI/2]],[new Un(C,o),[-.5,0,0],[0,0,Math.PI/2]],[new Un(O,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Un(C,l),[0,.5,0]],[new Un(C,l),[0,-.5,0],[Math.PI,0,0]],[new Un(O,l)]],Z:[[new Un(C,u),[0,0,.5],[Math.PI/2,0,0]],[new Un(C,u),[0,0,-.5],[-Math.PI/2,0,0]],[new Un(O,u),null,[Math.PI/2,0,0]]],XYZ:[[new Un(new r0(.1,0),y.clone()),[0,0,0]]],XY:[[new Un(new pu(.15,.15,.01),g.clone()),[.15,.15,0]]],YZ:[[new Un(new pu(.15,.15,.01),h.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Un(new pu(.15,.15,.01),f.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},z={X:[[new Un(new Gl(.2,0,.6,4),r),[.3,0,0],[0,0,-Math.PI/2]],[new Un(new Gl(.2,0,.6,4),r),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Un(new Gl(.2,0,.6,4),r),[0,.3,0]],[new Un(new Gl(.2,0,.6,4),r),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Un(new Gl(.2,0,.6,4),r),[0,0,.3],[Math.PI/2,0,0]],[new Un(new Gl(.2,0,.6,4),r),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Un(new r0(.2,0),r)]],XY:[[new Un(new pu(.2,.2,.01),r),[.15,.15,0]]],YZ:[[new Un(new pu(.2,.2,.01),r),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Un(new pu(.2,.2,.01),r),[.15,0,.15],[-Math.PI/2,0,0]]]},U={START:[[new Un(new r0(.01,2),s),null,null,null,"helper"]],END:[[new Un(new r0(.01,2),s),null,null,null,"helper"]],DELTA:[[new Rf(B(),s),null,null,null,"helper"]],X:[[new Rf(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Rf(A,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Rf(A,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},V={XYZE:[[new Un(L(.5,1),S),null,[0,Math.PI/2,0]]],X:[[new Un(L(.5,.5),o)]],Y:[[new Un(L(.5,.5),l),null,[0,0,-Math.PI/2]]],Z:[[new Un(L(.5,.5),u),null,[0,Math.PI/2,0]]],E:[[new Un(L(.75,1),b),null,[0,Math.PI/2,0]]]},H={AXIS:[[new Rf(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},oe={XYZE:[[new Un(new h0(.25,10,8),r)]],X:[[new Un(new e0(.5,.1,4,24),r),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Un(new e0(.5,.1,4,24),r),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Un(new e0(.5,.1,4,24),r),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Un(new e0(.75,.1,2,24),r)]]},le={X:[[new Un(M,o),[.5,0,0],[0,0,-Math.PI/2]],[new Un(O,o),[0,0,0],[0,0,-Math.PI/2]],[new Un(M,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Un(M,l),[0,.5,0]],[new Un(O,l)],[new Un(M,l),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Un(M,u),[0,0,.5],[Math.PI/2,0,0]],[new Un(O,u),[0,0,0],[Math.PI/2,0,0]],[new Un(M,u),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Un(new pu(.15,.15,.01),g),[.15,.15,0]]],YZ:[[new Un(new pu(.15,.15,.01),h),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Un(new pu(.15,.15,.01),f),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Un(new pu(.1,.1,.1),y.clone())]]},Z={X:[[new Un(new Gl(.2,0,.6,4),r),[.3,0,0],[0,0,-Math.PI/2]],[new Un(new Gl(.2,0,.6,4),r),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Un(new Gl(.2,0,.6,4),r),[0,.3,0]],[new Un(new Gl(.2,0,.6,4),r),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Un(new Gl(.2,0,.6,4),r),[0,0,.3],[Math.PI/2,0,0]],[new Un(new Gl(.2,0,.6,4),r),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Un(new pu(.2,.2,.01),r),[.15,.15,0]]],YZ:[[new Un(new pu(.2,.2,.01),r),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Un(new pu(.2,.2,.01),r),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Un(new pu(.2,.2,.2),r),[0,0,0]]]},q={X:[[new Rf(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Rf(A,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Rf(A,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function he(ae){const ue=new ro;for(const ge in ae)for(let we=ae[ge].length;we--;){const J=ae[ge][we][0].clone(),re=ae[ge][we][1],ie=ae[ge][we][2],fe=ae[ge][we][3],Te=ae[ge][we][4];J.name=ge,J.tag=Te,re&&J.position.set(re[0],re[1],re[2]),ie&&J.rotation.set(ie[0],ie[1],ie[2]),fe&&J.scale.set(fe[0],fe[1],fe[2]),J.updateMatrix();const Fe=J.geometry.clone();Fe.applyMatrix4(J.matrix),J.geometry=Fe,J.renderOrder=1/0,J.position.set(0,0,0),J.rotation.set(0,0,0),J.scale.set(1,1,1),ue.add(J)}return ue}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=he(D)),this.add(this.gizmo.rotate=he(V)),this.add(this.gizmo.scale=he(le)),this.add(this.picker.translate=he(z)),this.add(this.picker.rotate=he(oe)),this.add(this.picker.scale=he(Z)),this.add(this.helper.translate=he(U)),this.add(this.helper.rotate=he(H)),this.add(this.helper.scale=he(q)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:AI;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let r=[];r=r.concat(this.picker[this.mode].children),r=r.concat(this.gizmo[this.mode].children),r=r.concat(this.helper[this.mode].children);for(let s=0;s<r.length;s++){const o=r[s];o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition);let l;if(this.camera.isOrthographicCamera?l=(this.camera.top-this.camera.bottom)/this.camera.zoom:l=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(l*this.size/4),o.tag==="helper"){o.visible=!1,o.name==="AXIS"?(o.position.copy(this.worldPositionStart),o.visible=!!this.axis,this.axis==="X"&&(Du.setFromEuler(zA.set(0,0,0)),o.quaternion.copy(t).multiply(Du),Math.abs(Tl.copy(Dx).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Y"&&(Du.setFromEuler(zA.set(0,0,Math.PI/2)),o.quaternion.copy(t).multiply(Du),Math.abs(Tl.copy(d1).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Z"&&(Du.setFromEuler(zA.set(0,Math.PI/2,0)),o.quaternion.copy(t).multiply(Du),Math.abs(Tl.copy(Px).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="XYZE"&&(Du.setFromEuler(zA.set(0,Math.PI/2,0)),Tl.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(c9.lookAt(u9,Tl,d1)),o.quaternion.multiply(Du),o.visible=this.dragging),this.axis==="E"&&(o.visible=!1)):o.name==="START"?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):o.name==="END"?(o.position.copy(this.worldPosition),o.visible=this.dragging):o.name==="DELTA"?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),Hp.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Hp.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(Hp),o.visible=this.dragging):(o.quaternion.copy(t),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=this.axis.search(o.name)!==-1));continue}o.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(o.name==="X"&&Math.abs(Tl.copy(Dx).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Y"&&Math.abs(Tl.copy(d1).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Z"&&Math.abs(Tl.copy(Px).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XY"&&Math.abs(Tl.copy(Px).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="YZ"&&Math.abs(Tl.copy(Dx).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XZ"&&Math.abs(Tl.copy(d1).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):this.mode==="rotate"&&(UA.copy(t),Tl.copy(this.eye).applyQuaternion(Du.copy(t).invert()),o.name.search("E")!==-1&&o.quaternion.setFromRotationMatrix(c9.lookAt(this.eye,u9,d1)),o.name==="X"&&(Du.setFromAxisAngle(Dx,Math.atan2(-Tl.y,Tl.z)),Du.multiplyQuaternions(UA,Du),o.quaternion.copy(Du)),o.name==="Y"&&(Du.setFromAxisAngle(d1,Math.atan2(Tl.x,Tl.z)),Du.multiplyQuaternions(UA,Du),o.quaternion.copy(Du)),o.name==="Z"&&(Du.setFromAxisAngle(Px,Math.atan2(Tl.y,Tl.x)),Du.multiplyQuaternions(UA,Du),o.quaternion.copy(Du))),o.visible=o.visible&&(o.name.indexOf("X")===-1||this.showX),o.visible=o.visible&&(o.name.indexOf("Y")===-1||this.showY),o.visible=o.visible&&(o.name.indexOf("Z")===-1||this.showZ),o.visible=o.visible&&(o.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(u){return o.name===u}))&&(o.material.color.setHex(16776960),o.material.opacity=1)}super.updateMatrixWorld(e)}}class ske extends Un{constructor(){super(new c0(1e5,1e5,2,2),new f0({visible:!1,wireframe:!0,side:lp,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),HA.copy(Dx).applyQuaternion(t==="local"?this.worldQuaternion:AI),wx.copy(d1).applyQuaternion(t==="local"?this.worldQuaternion:AI),Ex.copy(Px).applyQuaternion(t==="local"?this.worldQuaternion:AI),Tl.copy(wx),this.mode){case"translate":case"scale":switch(this.axis){case"X":Tl.copy(this.eye).cross(HA),X0.copy(HA).cross(Tl);break;case"Y":Tl.copy(this.eye).cross(wx),X0.copy(wx).cross(Tl);break;case"Z":Tl.copy(this.eye).cross(Ex),X0.copy(Ex).cross(Tl);break;case"XY":X0.copy(Ex);break;case"YZ":X0.copy(HA);break;case"XZ":Tl.copy(Ex),X0.copy(wx);break;case"XYZ":case"E":X0.set(0,0,0);break}break;case"rotate":default:X0.set(0,0,0)}X0.length()===0?this.quaternion.copy(this.cameraQuaternion):(h9.lookAt(Hp.set(0,0,0),X0,Tl),this.quaternion.setFromRotationMatrix(h9)),super.updateMatrixWorld(e)}}const SN=1,oke=n=>{let{x:e,y:t,z:r}=n===void 0?{}:n;return e=e===void 0?SN:e,t=t===void 0?SN:t,r=r===void 0?SN:r,new DAe(e,t,r,2,.05)},ake=.5,lke=n=>{let{radius:e}=n===void 0?{}:n;return e=e===void 0?ake:e,new h0(e,32,32)},pee=.5,mee=1,uke=n=>{let{radius:e,height:t}=n===void 0?{}:n;return e=e===void 0?pee:e,t=t===void 0?mee:t,new Gl(e,e,t,32,1,!1)},cke=.4,hke=.05,dke=.2,fke=.6,x2=n=>{let{length:e,radius:t}=n===void 0?{}:n;e=e===void 0?1:e,t=t===void 0?1:t;const r=cke*e,s=dke*.5*t,o=new Gl(0,s,r,32,1),l=fke*e,u=hke*.5*t,h=new Gl(u,u,l,32,1);var f=new Qr;return f.setPosition(new Ae(0,l*.5,0)),h.applyMatrix4(f),f.setPosition(new Ae(0,l+r*.5,0)),o.applyMatrix4(f),jZ([o,h])},pke=n=>{let{radius:e,height:t}=n===void 0?{}:n;e=e===void 0?pee:e,t=t===void 0?mee:t;const r=new Gl(e,e,t,32,1,!0),s=new h0(e,32,32,Math.PI,Math.PI),o=new h0(e,32,32,Math.PI,Math.PI);var l=new Qr;l.makeRotationX(Math.PI/2),l.setPosition(0,t/2,0);var u=new Qr;return u.makeRotationX(-Math.PI/2),u.setPosition(0,-t/2,0),s.applyMatrix4(l),o.applyMatrix4(u),jZ([r,s,o])},sC=(n,e,t)=>{if(n.current&&e){const r=typeof e.r=="function"?e.r(t)/255:e.r/255,s=typeof e.g=="function"?e.g(t)/255:e.g/255,o=typeof e.b=="function"?e.b(t)/255:e.b/255,l=typeof e.a=="function"?e.a(t):e.a;n.current.material.color.setRGB(r,s,o),n.current.material.opacity=l,n.current.material.transparent=l!==1}},mke=n=>{let e=null;if(n.shape)n.shape==="cube"?e=oke(n.shapeParams):n.shape==="cylinder"?e=uke(n.shapeParams):n.shape==="sphere"?e=lke(n.shapeParams):n.shape==="capsule"?e=pke(n.shapeParams):n.shape==="arrow"&&(e=x2(n.shapeParams));else return[];return[{geometry:e,type:"part"}]};function yE(...n){const e=pe.useRef();return pe.useEffect(()=>{n.forEach(t=>{!t||(typeof t=="function"?t(e.current):t.current=e.current)})},[n]),e}function Nf(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[r,s]of n)if(!Object.is(s,e.get(r)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const r of n)if(!e.has(r))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}const gke=pe.forwardRef(({objectKey:n,displayTfs:e,position:t,rotation:r,scale:s,ghost:o,highlightColor:l,children:u},h)=>{const f=pe.useRef(null),g=yE(h,f),y=Do(pe.useCallback(C=>C.tfs[n],[n]),Nf),b=Do(C=>C.clock);Ym(pe.useCallback(()=>{const C=b.getElapsed()*1e3;g.current&&(g.current.position.set(t?t.x:typeof y.position.x=="function"?y.position.x(C):y.position.x,t?t.y:typeof y.position.y=="function"?y.position.y(C):y.position.y,t?t.z:typeof y.position.z=="function"?y.position.z(C):y.position.z),g.current.quaternion.set(r?r.x:typeof y.rotation.x=="function"?y.rotation.x(C):y.rotation.x,r?r.y:typeof y.rotation.y=="function"?y.rotation.y(C):y.rotation.y,r?r.z:typeof y.rotation.z=="function"?y.rotation.z(C):y.rotation.z,r?r.w:typeof y.rotation.w=="function"?y.rotation.w(C):y.rotation.w),g.current.scale.set(s?s.x:y.scale?typeof y.scale.x=="function"?y.scale.x(C):y.scale.x:0,s?s.y:y.scale?typeof y.scale.y=="function"?y.scale.y(C):y.scale.y:0,s?s.z:y.scale?typeof y.scale.z=="function"?y.scale.z(C):y.scale.z:0))},[y,t,r,s,g,b]));const S=x2();return Bh("group",{ref:g,dispose:null,up:[0,0,1],children:[e&&Bh(BC,{children:[un("axesHelper",{size:1}),un("mesh",{geometry:S,material:o?MI(l):d_(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},`${n}ArrowX`),un("mesh",{geometry:S,material:o?MI(l):d_(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},`${n}ArrowY`),un("mesh",{geometry:S,material:o?MI(l):d_(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},`${n}ArrowZ`)]}),u]})});function _ke({displayTfs:n,children:e}){const t=x2();return Bh("group",{dispose:null,up:[0,0,1],children:[n&&Bh(BC,{children:[un("axesHelper",{size:1}),un("mesh",{geometry:t,material:d_(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),un("mesh",{geometry:t,material:d_(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),un("mesh",{geometry:t,material:d_(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}function vke({displayTfs:n,children:e}){const t=x2();return Bh("group",{dispose:null,up:[0,0,1],children:[n&&Bh(BC,{children:[un("axesHelper",{size:1}),un("mesh",{geometry:t,material:d_(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),un("mesh",{geometry:t,material:d_(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),un("mesh",{geometry:t,material:d_(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}/**
 * postprocessing v6.30.1 build Fri Feb 24 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var yke="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}";function d9(n,e){let t="texel";if(n!==null){const r=Number.parseInt(fE);if(!(e&&r>=133&&r!==135&&n.format===jp&&n.type===af&&n.encoding===ms))switch(n.encoding){case ms:t="sRGBToLinear(texel)";break;case Eg:t="texel";break;default:throw new Error(`Unsupported encoding: ${n.encoding}`)}}return t}var Is={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},H1={NONE:0,DEPTH:1,CONVOLUTION:2},No={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},F4={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},bke=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,Tke="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Ske=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],wke=class extends xd{constructor(n=new Ts){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new no(null),texelSize:new no(new Ts),scale:new no(1),kernel:new no(0)},blending:pp,depthWrite:!1,depthTest:!1,fragmentShader:bke,vertexShader:Tke}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this.kernelSize=F4.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return Ske[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,r=1/e;this.uniforms.texelSize.value.set(t,r,t*.5,r*.5)}},Eke=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,gee=class extends xd{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new no(null),opacity:new no(1)},blending:pp,depthWrite:!1,depthTest:!1,fragmentShader:Eke,vertexShader:yke}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},xke=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,$ke=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,Cke=class extends xd{constructor(n=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new no(null),cameraNear:new no(.3),cameraFar:new no(1e3)},blending:pp,depthWrite:!1,depthTest:!1,fragmentShader:xke,vertexShader:$ke}),this.toneMapped=!1,this.depthBuffer=n,this.depthPacking=Nw,this.copyCameraSettings(e)}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Nw){this.depthBuffer=n,this.depthPacking=e}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Za?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Mke=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Ake="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Ike=class extends xd{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new no(null),normalBuffer:new no(null),texelSize:new no(new jt)},blending:pp,depthWrite:!1,depthTest:!1,fragmentShader:Mke,vertexShader:Ake}),this.toneMapped=!1}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=nb){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Rke=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,kke="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",Oke=class extends xd{constructor(n,e,t,r,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:fE.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new no(null),depthBuffer:new no(null),resolution:new no(new jt),texelSize:new no(new jt),cameraNear:new no(.3),cameraFar:new no(1e3),aspect:new no(1),time:new no(0)},blending:pp,depthWrite:!1,depthTest:!1,dithering:s}),this.toneMapped=!1,n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(r)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=nb){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){var e,t,r,s,o;return this.fragmentShader=Rke.replace(No.FRAGMENT_HEAD,(e=n.get(No.FRAGMENT_HEAD))!=null?e:"").replace(No.FRAGMENT_MAIN_UV,(t=n.get(No.FRAGMENT_MAIN_UV))!=null?t:"").replace(No.FRAGMENT_MAIN_IMAGE,(r=n.get(No.FRAGMENT_MAIN_IMAGE))!=null?r:""),this.vertexShader=kke.replace(No.VERTEX_HEAD,(s=n.get(No.VERTEX_HEAD))!=null?s:"").replace(No.VERTEX_MAIN_SUPPORT,(o=n.get(No.VERTEX_MAIN_SUPPORT))!=null?o:""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Za?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return No}},Lke="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",Nke="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",Dke=class extends xd{constructor(n=new jt){super({name:"OutlineMaterial",uniforms:{inputBuffer:new no(null),texelSize:new no(new jt)},blending:pp,depthWrite:!1,depthTest:!1,fragmentShader:Lke,vertexShader:Nke}),this.toneMapped=!1,this.uniforms.texelSize.value.set(n.x,n.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Pke=new mE,fy=null;function Bke(){if(fy===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);fy=new ui,fy.setAttribute!==void 0?(fy.setAttribute("position",new Po(n,3)),fy.setAttribute("uv",new Po(e,2))):(fy.addAttribute("position",new Po(n,3)),fy.addAttribute("uv",new Po(e,2)))}return fy}var Xm=class{constructor(n="Pass",e=new Y$,t=Pke){this.name=n,this.renderer=null,this.scene=e,this.camera=t,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(n){if(this.rtt===n){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!n}}set mainScene(n){}set mainCamera(n){}setRenderer(n){this.renderer=n}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(n){let e=this.screen;e!==null?e.material=n:(e=new Un(Bke(),n),e.frustumCulled=!1,this.scene===null&&(this.scene=new Y$),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(n){this.fullscreenMaterial=n}getDepthTexture(){return null}setDepthTexture(n,e=nb){}render(n,e,t,r,s){throw new Error("Render method not implemented!")}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Nc||e instanceof hd||e instanceof hc||e instanceof Xm)&&this[n].dispose()}}},Fke=class extends Xm{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new gee,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new Nc(1,1,{minFilter:wl,magFilter:wl,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,r,s){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==af?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n.outputEncoding===ms&&(this.renderTarget.texture.encoding=ms))}},zke=class extends Xm{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,r,s){const o=n.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},f9=new Bn,z4=class extends Xm{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,r,s){const o=this.overrideClearColor,l=this.overrideClearAlpha,u=n.getClearAlpha(),h=o!==null,f=l>=0;h?(n.getClearColor(f9),n.setClearColor(o,f?l:u)):f&&n.setClearAlpha(l),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),h?n.setClearColor(f9,u):f&&n.setClearAlpha(u)}},py=-1,cp=class extends Vm{constructor(n,e=py,t=py,r=1){super(),this.resizable=n,this.baseSize=new jt(1,1),this.preferredSize=new jt(e,t),this.target=this.preferredSize,this.s=r,this.effectiveSize=new jt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,r=this.scale;e.width!==py?t.width=e.width:e.height!==py?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*r),e.height!==py?t.height=e.height:e.width!==py?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*r)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(py),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return py}},wN=!1,p9=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case lp:t=this.materialsFlatShadedDoubleSide;break;case cd:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case lp:t=this.materialsDoubleSide;break;case cd:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[n.clone(),n.clone(),n.clone()];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=f_;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.side=cd,r}),this.materialsDoubleSide=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.side=lp,r}),this.materialsFlatShaded=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=cd,r}),this.materialsFlatShadedDoubleSide=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=lp,r})}}render(n,e,t){const r=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,wN){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const o of s)o[0].material=o[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=s}n.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return wN}static set workaroundEnabled(n){wN=n}},$2=class extends Xm{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new z4,this.overrideMaterialManager=t===null?null:new p9(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new p9(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,r,s){const o=this.scene,l=this.camera,u=this.selection,h=l.layers.mask,f=o.background,g=n.shadowMap.autoUpdate,y=this.renderToScreen?null:e;u!==null&&l.layers.set(u.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(y),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,o,l):n.render(o,l),l.layers.mask=h,o.background=f,n.shadowMap.autoUpdate=g}},Uke=class extends Xm{constructor(n,e,{renderTarget:t,resolutionScale:r=1,width:s=cp.AUTO_SIZE,height:o=cp.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new $2(n,e,new DC({depthPacking:Nw}));const h=this.renderPass;h.skipShadowMapUpdate=!0,h.ignoreBackground=!0;const f=h.getClearPass();f.overrideClearColor=new Bn(16777215),f.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Nc(1,1,{minFilter:Wl,magFilter:Wl}),this.renderTarget.texture.name="DepthPass.Target");const g=this.resolution=new cp(this,l,u,r);g.addEventListener("change",y=>this.setSize(g.baseWidth,g.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},Hke=class extends Xm{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=cp.AUTO_SIZE,height:r=cp.AUTO_SIZE,resolutionX:s=t,resolutionY:o=r}={}){super("DepthDownsamplingPass");const l=new Ike;l.normalBuffer=n,this.fullscreenMaterial=l,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Nc(1,1,{minFilter:Wl,magFilter:Wl,depthBuffer:!1,type:r_}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const u=this.resolution=new cp(this,s,o,e);u.addEventListener("change",h=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=nb){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,r,s){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const r=n.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function m9(n,e,t){for(const r of e){const s="$1"+n+r.charAt(0).toUpperCase()+r.slice(1),o=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const l of t.entries())l[1]!==null&&t.set(l[0],l[1].replace(o,s))}}function Gke(n,e,t){var r,s,o,l,u;let h=e.getFragmentShader(),f=e.getVertexShader();const g=h!==void 0&&/mainImage/.test(h),y=h!==void 0&&/mainUv/.test(h);if(t.attributes|=e.getAttributes(),h===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(y&&t.attributes&H1.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!g&&!y)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const b=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,S=t.shaderParts;let C=(r=S.get(No.FRAGMENT_HEAD))!=null?r:"",M=(s=S.get(No.FRAGMENT_MAIN_UV))!=null?s:"",A=(o=S.get(No.FRAGMENT_MAIN_IMAGE))!=null?o:"",O=(l=S.get(No.VERTEX_HEAD))!=null?l:"",L=(u=S.get(No.VERTEX_MAIN_SUPPORT))!=null?u:"";const B=new Set,D=new Set;if(y&&(M+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),f!==null&&/mainSupport/.test(f)){const V=/mainSupport *\([\w\s]*?uv\s*?\)/.test(f);L+=`	${n}MainSupport(`,L+=V?`vUv);
`:`);
`;for(const H of f.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const oe of H[1].split(/\s*,\s*/))t.varyings.add(oe),B.add(oe),D.add(oe);for(const H of f.matchAll(b))D.add(H[1])}for(const V of h.matchAll(b))D.add(V[1]);for(const V of e.defines.keys())D.add(V.replace(/\([\w\s,]*\)/g,""));for(const V of e.uniforms.keys())D.add(V);D.delete("while"),D.delete("for"),D.delete("if"),e.uniforms.forEach((V,H)=>t.uniforms.set(n+H.charAt(0).toUpperCase()+H.slice(1),V)),e.defines.forEach((V,H)=>t.defines.set(n+H.charAt(0).toUpperCase()+H.slice(1),V));const z=new Map([["fragment",h],["vertex",f]]);m9(n,D,t.defines),m9(n,D,z),h=z.get("fragment"),f=z.get("vertex");const U=e.blendMode;if(t.blendModes.set(U.blendFunction,U),g){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(A+=e.inputColorSpace===ms?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==null?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const V=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;A+=`${n}MainImage(color0, UV, `,t.attributes&H1.DEPTH&&V.test(h)&&(A+="depth, ",t.readDepth=!0),A+=`color1);
	`;const H=n+"BlendOpacity";t.uniforms.set(H,U.opacity),A+=`color0 = blend${U.blendFunction}(color0, color1, ${H});

	`,C+=`uniform float ${H};

`}if(C+=h+`
`,f!==null&&(O+=f+`
`),S.set(No.FRAGMENT_HEAD,C),S.set(No.FRAGMENT_MAIN_UV,M),S.set(No.FRAGMENT_MAIN_IMAGE,A),S.set(No.VERTEX_HEAD,O),S.set(No.VERTEX_MAIN_SUPPORT,L),e.extensions!==null)for(const V of e.extensions)t.extensions.add(V)}}var Wke=class extends Xm{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new Oke(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new Qke;let e=0;for(const l of this.effects)if(l.blendMode.blendFunction===Is.DST)n.attributes|=l.getAttributes()&H1.DEPTH;else{if(n.attributes&l.getAttributes()&H1.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${l.name})`);Gke("e"+e++,l,n)}let t=n.shaderParts.get(No.FRAGMENT_HEAD),r=n.shaderParts.get(No.FRAGMENT_MAIN_IMAGE),s=n.shaderParts.get(No.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const l of n.blendModes.values())t+=l.getShaderCode().replace(o,`blend${l.blendFunction}`)+`
`;n.attributes&H1.DEPTH?(n.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===ms&&(r+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(No.FRAGMENT_HEAD,t),n.shaderParts.set(No.FRAGMENT_MAIN_IMAGE,r),n.shaderParts.set(No.FRAGMENT_MAIN_UV,s),n.shaderParts.forEach((l,u,h)=>h.set(u,l==null?void 0:l.trim().replace(/^#/,`
#`))),this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=nb){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,r,s){for(const o of this.effects)o.update(n,e,r);if(!this.skipRendering||this.renderToScreen){const o=this.fullscreenMaterial;o.inputBuffer=e.texture,o.time+=r*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const r of this.effects)r.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==af&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},Vke=class extends Xm{constructor({kernelSize:n=F4.MEDIUM,resolutionScale:e=.5,width:t=cp.AUTO_SIZE,height:r=cp.AUTO_SIZE,resolutionX:s=t,resolutionY:o=r}={}){super("KawaseBlurPass"),this.renderTargetA=new Nc(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const l=this.resolution=new cp(this,s,o,e);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight)),this._blurMaterial=new wke,this._blurMaterial.kernelSize=n,this.copyMaterial=new gee}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,s){const o=this.scene,l=this.camera,u=this.renderTargetA,h=this.renderTargetB,f=this.blurMaterial,g=f.kernelSequence;let y=e;this.fullscreenMaterial=f;for(let b=0,S=g.length;b<S;++b){const C=b&1?h:u;f.kernel=g[b],f.inputBuffer=y.texture,n.setRenderTarget(C),n.render(o,l),y=C}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=y.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(o,l)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const r=t.width,s=t.height;this.renderTargetA.setSize(r,s),this.renderTargetB.setSize(r,s),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==af?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n.outputEncoding===ms&&(this.renderTargetA.texture.encoding=ms,this.renderTargetB.texture.encoding=ms))}static get AUTO_SIZE(){return cp.AUTO_SIZE}},jke=class extends Xm{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new z4(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,r,s){const o=n.getContext(),l=n.state.buffers,u=this.scene,h=this.camera,f=this.clearPass,g=this.inverted?0:1,y=1-g;l.color.setMask(!1),l.depth.setMask(!1),l.color.setLocked(!0),l.depth.setLocked(!0),l.stencil.setTest(!0),l.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),l.stencil.setFunc(o.ALWAYS,g,4294967295),l.stencil.setClear(y),l.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(n,null):(f.render(n,e),f.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(u,h)):(n.setRenderTarget(e),n.render(u,h),n.setRenderTarget(t),n.render(u,h)),l.color.setLocked(!1),l.depth.setLocked(!1),l.stencil.setLocked(!1),l.stencil.setFunc(o.EQUAL,1,4294967295),l.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),l.stencil.setLocked(!0)}},Yke=class extends Xm{constructor(n,e,{renderTarget:t,resolutionScale:r=1,width:s=cp.AUTO_SIZE,height:o=cp.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new $2(n,e,new c4);const h=this.renderPass;h.ignoreBackground=!0,h.skipShadowMapUpdate=!0;const f=h.getClearPass();f.overrideClearColor=new Bn(7829503),f.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Nc(1,1,{minFilter:Wl,magFilter:Wl}),this.renderTarget.texture.name="NormalPass.Target");const g=this.resolution=new cp(this,l,u,r);g.addEventListener("change",y=>this.setSize(g.baseWidth,g.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,o,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},Xke=class extends Xm{constructor(n,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=n,this.input=e}setInput(n){this.input=n}render(n,e,t,r,s){const o=this.fullscreenMaterial.uniforms;e!==null&&o!==void 0&&o[this.input]!==void 0&&(o[this.input].value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){t!==void 0&&t!==af&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},EN=1/1e3,Kke=1e3,Jke=class{constructor(){this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*EN}get fixedDelta(){return this._fixedDelta*EN}set fixedDelta(n){this._fixedDelta=n*Kke}get elapsed(){return this._elapsed*EN}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=n!==void 0?n:performance.now(),this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()}handleEvent(n){document.hidden||(this.currentTime=performance.now())}dispose(){this.autoReset=!1}},qke=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:r=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,s,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Fke,this.depthTexture=null,this.passes=[],this.timer=new Jke,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new jt),t=n.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===af&&n.outputEncoding===ms&&(this.inputBuffer.texture.encoding=ms,this.outputBuffer.texture.encoding=ms,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const s of this.passes)s.initialize(n,t,r)}}replaceRenderer(n,e=!0){const t=this.renderer,r=t.domElement.parentNode;return this.setRenderer(n),e&&r!==null&&(r.removeChild(t.domElement),r.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new ZF;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=Vy,n.type=Py):n.type=hv,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,r){const s=this.renderer,o=s===null?new jt:s.getDrawingBufferSize(new jt),l={minFilter:wl,magFilter:wl,stencilBuffer:e,depthBuffer:n,type:t},u=new Nc(o.width,o.height,l);return r>0&&(u.ignoreDepthForMultisampleCopy=!1,u.samples=r),t===af&&s!==null&&s.outputEncoding===ms&&(u.texture.encoding=ms),u.texture.name="EffectComposer.Buffer",u.texture.generateMipmaps=!1,u}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,r=this.renderer,s=r.getDrawingBufferSize(new jt),o=r.getContext().getContextAttributes().alpha,l=this.inputBuffer.texture.type;if(n.setRenderer(r),n.setSize(s.width,s.height),n.initialize(r,o,l),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const u=this.createDepthTexture();for(n of t)n.setDepthTexture(u)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const r=(s,o)=>s||o.needsDepthTexture;e.reduce(r,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let r=this.inputBuffer,s=this.outputBuffer,o=!1,l,u,h;n===void 0&&(this.timer.update(),n=this.timer.delta);for(const f of this.passes)f.enabled&&(f.render(e,r,s,n,o),f.needsSwap&&(o&&(t.renderToScreen=f.renderToScreen,l=e.getContext(),u=e.state.buffers.stencil,u.setFunc(l.NOTEQUAL,1,4294967295),t.render(e,r,s,n,o),u.setFunc(l.EQUAL,1,4294967295)),h=r,r=s,s=h),f instanceof jke?o=!0:f instanceof zke&&(o=!1))}setSize(n,e,t){const r=this.renderer,s=r.getSize(new jt);(n===void 0||e===void 0)&&(n=s.width,e=s.height),(s.width!==n||s.height!==e)&&r.setSize(n,e,t);const o=r.getDrawingBufferSize(new jt);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const l of this.passes)l.setSize(o.width,o.height)}reset(){const n=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=n}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},Qke=class{constructor(){this.shaderParts=new Map([[No.FRAGMENT_HEAD,null],[No.FRAGMENT_MAIN_UV,null],[No.FRAGMENT_MAIN_IMAGE,null],[No.VERTEX_HEAD,null],[No.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=H1.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Eg}},Zke=class extends Set{constructor(n,e=10){super(),this.l=e,this.exclusive=!1,n!==void 0&&this.set(n)}get layer(){return this.l}set layer(n){const e=this.l;for(const t of this)t.layers.disable(e),t.layers.enable(n);this.l=n}getLayer(){return this.layer}setLayer(n){this.layer=n}isExclusive(){return this.exclusive}setExclusive(n){this.exclusive=n}clear(){const n=this.layer;for(const e of this)e.layers.disable(n);return super.clear()}set(n){this.clear();for(const e of n)this.add(e);return this}indexOf(n){return this.has(n)?0:-1}add(n){return this.exclusive?n.layers.set(this.layer):n.layers.enable(this.layer),super.add(n)}delete(n){return this.has(n)&&n.layers.disable(this.layer),super.delete(n)}toggle(n){let e;return this.has(n)?(this.delete(n),e=!1):(this.add(n),e=!0),e}setVisible(n){for(const e of this)n?e.layers.enable(0):e.layers.disable(0);return this}},e2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",t2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",n2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",r2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",i2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",s2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",o2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",a2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",l2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",u2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",c2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",h2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",d2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",f2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",p2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",m2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",g2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",_2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",v2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",y2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",b2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",T2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",S2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",w2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",E2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",x2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",$2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",C2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",M2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",A2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",I2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",R2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",k2e=new Map([[Is.ADD,e2e],[Is.ALPHA,t2e],[Is.AVERAGE,n2e],[Is.COLOR,r2e],[Is.COLOR_BURN,i2e],[Is.COLOR_DODGE,s2e],[Is.DARKEN,o2e],[Is.DIFFERENCE,a2e],[Is.DIVIDE,l2e],[Is.DST,null],[Is.EXCLUSION,u2e],[Is.HARD_LIGHT,c2e],[Is.HARD_MIX,h2e],[Is.HUE,d2e],[Is.INVERT,f2e],[Is.INVERT_RGB,p2e],[Is.LIGHTEN,m2e],[Is.LINEAR_BURN,g2e],[Is.LINEAR_DODGE,_2e],[Is.LINEAR_LIGHT,v2e],[Is.LUMINOSITY,y2e],[Is.MULTIPLY,b2e],[Is.NEGATION,T2e],[Is.NORMAL,S2e],[Is.OVERLAY,w2e],[Is.PIN_LIGHT,E2e],[Is.REFLECT,x2e],[Is.SATURATION,$2e],[Is.SCREEN,C2e],[Is.SOFT_LIGHT,M2e],[Is.SRC,A2e],[Is.SUBTRACT,I2e],[Is.VIVID_LIGHT,R2e]]),O2e=class extends Vm{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new no(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return k2e.get(this.blendFunction)}},L2e=class extends Vm{constructor(n,e,{attributes:t=H1.NONE,blendFunction:r=Is.NORMAL,defines:s=new Map,uniforms:o=new Map,extensions:l=null,vertexShader:u=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=u,this.defines=s,this.uniforms=o,this.extensions=l,this.blendMode=new O2e(r),this.blendMode.addEventListener("change",h=>this.setChanged()),this._inputColorSpace=Eg,this._outputColorSpace=null}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=nb){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Nc||e instanceof hd||e instanceof hc||e instanceof Xm)&&this[n].dispose()}}};new Ae;new Qr;new Bn;var N2e=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texelToLinear(texture2D(patternTexture,vUvPattern));
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,D2e="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",P2e=class extends L2e{constructor(n,e,{blendFunction:t=Is.SCREEN,patternTexture:r=null,patternScale:s=1,edgeStrength:o=1,pulseSpeed:l=0,visibleEdgeColor:u=16777215,hiddenEdgeColor:h=2230538,kernelSize:f=F4.VERY_SMALL,blur:g=!1,xRay:y=!0,multisampling:b=0,resolutionScale:S=.5,width:C=cp.AUTO_SIZE,height:M=cp.AUTO_SIZE,resolutionX:A=C,resolutionY:O=M}={}){super("OutlineEffect",N2e,{uniforms:new Map([["maskTexture",new no(null)],["edgeTexture",new no(null)],["edgeStrength",new no(o)],["visibleEdgeColor",new no(new Bn(u))],["hiddenEdgeColor",new no(new Bn(h))],["pulse",new no(1)],["patternScale",new no(s)],["patternTexture",new no(null)]])}),this.blendMode.addEventListener("change",z=>{this.blendMode.getBlendFunction()===Is.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.setBlendFunction(t),this.patternTexture=r,this.xRay=y,this.scene=n,this.camera=e,this.renderTargetMask=new Nc(1,1),this.renderTargetMask.samples=b,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new Nc(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new z4,this.clearPass.overrideClearColor=new Bn(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new Uke(n,e),this.maskPass=new $2(n,e,new Cke(this.depthPass.texture,e));const L=this.maskPass.clearPass;L.overrideClearColor=new Bn(16777215),L.overrideClearAlpha=1,this.blurPass=new Vke({resolutionScale:S,resolutionX:A,resolutionY:O,kernelSize:f}),this.blurPass.enabled=g;const B=this.blurPass.resolution;B.addEventListener("change",z=>this.setSize(B.baseWidth,B.baseHeight)),this.outlinePass=new Xke(new Dke);const D=this.outlinePass.fullscreenMaterial;D.inputBuffer=this.renderTargetMask.texture,this.time=0,this.active=!1,this.selection=new Zke,this.selection.layer=10,this.pulseSpeed=l}set mainScene(n){this.scene=n,this.depthPass.mainScene=n,this.maskPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.maskPass.mainCamera=n,this.maskPass.overrideMaterial.copyCameraSettings(n)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(n){this.renderTargetMask.samples=n,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(n){this.uniforms.get("patternScale").value=n}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(n){this.uniforms.get("edgeStrength").value=n}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(n){this.uniforms.get("visibleEdgeColor").value=n}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(n){this.uniforms.get("hiddenEdgeColor").value=n}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(n){this.pulseSpeed=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get selectionLayer(){return this.selection.layer}set selectionLayer(n){this.selection.layer=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get xRay(){return this.defines.has("X_RAY")}set xRay(n){this.xRay!==n&&(n?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(n){this.xRay=n}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(n){if(n!==null?(n.wrapS=n.wrapT=Lw,this.defines.set("USE_PATTERN","1"),this.setVertexShader(D2e)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.renderer!==null){const e=d9(n,this.renderer.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",e)}this.uniforms.get("patternTexture").value=n,this.setChanged()}setPatternTexture(n){this.patternTexture=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}setSelection(n){return this.selection.set(n),this}clearSelection(){return this.selection.clear(),this}selectObject(n){return this.selection.add(n),this}deselectObject(n){return this.selection.delete(n),this}update(n,e,t){const r=this.scene,s=this.camera,o=this.selection,l=this.uniforms.get("pulse"),u=r.background,h=s.layers.mask;o.size>0?(r.background=null,l.value=1,this.pulseSpeed>0&&(l.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.active=!0,this.time+=t,o.setVisible(!1),this.depthPass.render(n),o.setVisible(!0),s.layers.set(o.layer),this.maskPass.render(n,this.renderTargetMask),s.layers.mask=h,r.background=u,this.outlinePass.render(n,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(n,this.renderTargetOutline,this.renderTargetOutline)):this.active&&(this.clearPass.render(n,this.renderTargetOutline),this.active=!1)}setSize(n,e){this.blurPass.setSize(n,e),this.renderTargetMask.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e);const r=t.width,s=t.height;this.depthPass.setSize(r,s),this.renderTargetOutline.setSize(r,s),this.outlinePass.fullscreenMaterial.setSize(r,s)}initialize(n,e,t){const r=this.patternTexture,s=d9(r,n.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",s),this.blurPass.initialize(n,e,af),t!==void 0&&(this.depthPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.outlinePass.initialize(n,e,t))}};new Ae;new Ae;let xx;function B2e(){if(xx!==void 0)return xx;try{var n;let e;const t=document.createElement("canvas");return xx=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))===null||n===void 0||n.loseContext()),xx}catch{return xx=!1}}const F2e=n=>!!n.current,g9=n=>F2e(n)?n.current:n,_ee=pe.createContext(null),z2e=yt.memo(pe.forwardRef((n,e)=>{let{children:t,camera:r,scene:s,resolutionScale:o,enabled:l=!0,renderPriority:u=1,autoClear:h=!0,depthBuffer:f,disableNormalPass:g,stencilBuffer:y,multisampling:b=8,frameBufferType:S=Z1}=n;const{gl:C,scene:M,camera:A,size:O}=nf();s=s||M,r=r||A;const[L,B,D]=pe.useMemo(()=>{const V=B2e(),H=new qke(C,{depthBuffer:f,stencilBuffer:y,multisampling:b>0&&V?b:0,frameBufferType:S});H.addPass(new $2(s,r));let oe=null,le=null;return g||(le=new Yke(s,r),le.enabled=!1,H.addPass(le),o!==void 0&&V&&(oe=new Hke({normalBuffer:le.texture,resolutionScale:o}),oe.enabled=!1,H.addPass(oe))),[H,le,oe]},[r,C,f,y,b,S,s,g,o]);pe.useEffect(()=>L==null?void 0:L.setSize(O.width,O.height),[L,O]),Ym((V,H)=>{l&&(C.autoClear=h,L.render(H))},l?u:0);const z=pe.useRef(null);pe.useLayoutEffect(()=>{let V;return z.current&&z.current.__r3f&&L&&(V=new Wke(r,...z.current.__r3f.objects),V.renderToScreen=!0,L.addPass(V),B&&(B.enabled=!0),D&&(D.enabled=!0)),()=>{V&&(L==null||L.removePass(V)),B&&(B.enabled=!1),D&&(D.enabled=!1)}},[L,t,r,B,D]);const U=pe.useMemo(()=>({composer:L,normalPass:B,downSamplingPass:D,resolutionScale:o,camera:r,scene:s}),[L,B,D,o,r,s]);return pe.useImperativeHandle(e,()=>L,[L]),un(_ee.Provider,{value:U,children:un("group",{ref:z,children:t})})})),U4=pe.createContext(null);function U2e(n){let{children:e,enabled:t=!0}=n;const[r,s]=pe.useState([]),o=pe.useMemo(()=>({selected:r,select:s,enabled:t}),[r,s,t]);return yt.createElement(U4.Provider,{value:o},e)}function vee(n){let{enabled:e=!1,children:t,...r}=n;const s=pe.useRef(null),o=pe.useContext(U4);return pe.useEffect(()=>{if(o&&e){let l=!1;const u=[];if(s.current.traverse(h=>{h.type==="Mesh"&&u.push(h),o.selected.indexOf(h)===-1&&(l=!0)}),l)return o.select(h=>[...h,...u]),()=>{o.select(h=>h.filter(f=>!u.includes(f)))}}},[e,t]),un("group",{ref:s,...r,children:t})}const H2e=pe.forwardRef(function(n,e){let{selection:t=[],selectionLayer:r=10,blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:h,hiddenEdgeColor:f,width:g,height:y,kernelSize:b,blur:S,xRay:C,...M}=n;const A=nf(z=>z.invalidate),{scene:O,camera:L}=pe.useContext(_ee),B=pe.useMemo(()=>new P2e(O,L,{blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:h,hiddenEdgeColor:f,width:g,height:y,kernelSize:b,blur:S,xRay:C,...M}),[s,S,L,l,y,f,b,o,u,O,h,g,C]),D=pe.useContext(U4);return pe.useEffect(()=>{if(!D&&t)return B.selection.set(Array.isArray(t)?t.map(g9):[g9(t)]),A(),()=>{B.selection.clear(),A()}},[B,t,D]),pe.useEffect(()=>{B.selectionLayer=r,A()},[B,r]),pe.useRef(),pe.useEffect(()=>{if(D&&D.enabled){var z;if((z=D.selected)!=null&&z.length)return B.selection.set(D.selected),A(),()=>{B.selection.clear(),A()}}},[D]),un("primitive",{ref:e,object:B})}),G2e=["cube","cylinder","sphere","capsule","arrow"],yee=pe.createContext(),W2e=n=>{const e=pe.useContext(yee)[n.shape];return G2e.includes(n.shape)?mke(n):e&&typeof e=="function"?e():(console.warn(`Shape not loaded: ${n.shape} (reading property 'shape' of item)`,n),[])},V2e=({meshes:n,children:e})=>un(yee.Provider,{value:n,children:e}),j2e=pe.memo(pe.forwardRef(({objectKey:n,highlightColor:e,position:t,rotation:r,scale:s,ghost:o},l)=>{const u=pe.useRef(null),h=yE(l,u),f=Do(M=>M.onClick,Nf),g=Do(M=>M.onPointerOver,Nf),y=Do(M=>M.onPointerOut,Nf),b=Do(M=>M.clock),S=Do(pe.useCallback(M=>M.items[n],[n]),Nf),C=W2e(S);return Ym(pe.useCallback(()=>{const M=b.getElapsed()*1e3;h.current&&(h.current.position.set(t?t.x:typeof S.position.x=="function"?S.position.x(M):S.position.x,t?t.y:typeof S.position.y=="function"?S.position.y(M):S.position.y,t?t.z:typeof S.position.z=="function"?S.position.z(M):S.position.z),h.current.quaternion.set(r?r.x:typeof S.rotation.x=="function"?S.rotation.x(M):S.rotation.x,r?r.y:typeof S.rotation.y=="function"?S.rotation.y(M):S.rotation.y,r?r.z:typeof S.rotation.z=="function"?S.rotation.z(M):S.rotation.z,r?r.w:typeof S.rotation.w=="function"?S.rotation.w(M):S.rotation.w),h.current.scale.set(s?s.x:typeof S.scale.x=="function"?S.scale.x(M):S.scale.x,s?s.y:typeof S.scale.y=="function"?S.scale.y(M):S.scale.y,s?s.z:typeof S.scale.z=="function"?S.scale.z(M):S.scale.z),h.current.visible=typeof S.hidden=="function"?!S.hidden(M):!S.hidden)},[S,t,r,s,h,b])),un(vee,{enabled:S.highlighted,children:Bh("group",{ref:h,up:[0,0,1],children:[un("group",{up:[0,0,1],rotation:[Math.PI/2,0,0],onPointerDown:M=>{f(n,!h.current.visible,{local:{position:h.current.position,rotation:h.current.quaternion},world:{position:h.current.getWorldPosition(new Ae),rotation:h.current.getWorldQuaternion(new Sl)}},M)},onPointerOver:M=>{g(n,!h.current.visible,M)},onPointerOut:M=>{y(n,!h.current.visible,M)},children:C.map((M,A)=>un(bee,{idx:A,groupOrPart:M,objectKey:n,ghost:o,highlightColor:e},A))}),S.showName&&un(VZ,{distanceFactor:3,position:[0,0,.2],children:un("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey",padding:5,userSelect:"none"},children:S.name})})]})})})),Y2e=pe.memo(({part:n,objectKey:e,ghost:t,highlightColor:r})=>{const s=Do(pe.useCallback(g=>g.items[e].wireframe,[e])),o=Do(pe.useCallback(g=>g.items[e].color,[e])),l=o!==void 0,u=pe.useRef(),h=pe.useRef(),f=Do(g=>g.clock);return Ym(pe.useCallback(()=>{const g=f.getElapsed()*1e3;t||(sC(h,o,g),sC(u,o,g))},[t,u,h,f,o])),t?un("mesh",{ref:h,geometry:n.geometry,material:MI(r),scale:n.scale,castShadow:!1,receiveShadow:!1},"B"):l?Bh("group",{up:[0,0,1],children:[un("mesh",{ref:h,geometry:n.geometry,scale:n.scale,castShadow:!1,receiveShadow:!1,children:un("meshLambertMaterial",{transparent:!0,wireframe:s,attach:"material",opacity:1,side:cd})},"B"),un("mesh",{ref:u,geometry:n.geometry,scale:n.scale,castShadow:!1,receiveShadow:!1,children:un("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:s,opacity:1,side:f_})},"F")]}):un(BC,{children:un("mesh",{ref:u,geometry:n.geometry,material:n.material,scale:n.scale,castShadow:!0,receiveShadow:!0,wireframe:s},"I")})}),bee=pe.memo(({idx:n,groupOrPart:e,ghost:t,objectKey:r,highlightColor:s})=>e.type==="group"?un("group",{up:[0,0,1],position:e.position,rotation:e.rotation,scale:e.scale,children:e.children.map((o,l)=>un(bee,{idx:l,groupOrPart:o,objectKey:r,ghost:t,highlightColor:s},l))},n):un(Y2e,{part:e,objectKey:r,highlightColor:s,ghost:t},n)),X2e=pe.forwardRef(({objectKey:n},e)=>{const t=pe.useRef(null),r=yE(e,t),{vertices:s,width:o,hidden:l}=Do(pe.useCallback(u=>({vertices:u.lines[n].vertices,width:u.lines[n].width,hidden:u.lines[n].hidden}),[n]),Nf);return s.length<=1?null:un(UAe,{ref:r,visible:!l,points:s.map(u=>[u.position.x,u.position.y,u.position.z]),color:"white",vertexColors:s.map(u=>[u.color.r/255,u.color.g/255,u.color.b/255]),lineWidth:o})}),K2e=pe.forwardRef(({objectKey:n},e)=>{const t=pe.useRef(null),r=yE(e,t),s=Do(C=>C.onClick,Nf),o=Do(C=>C.onPointerOver,Nf),l=Do(C=>C.onPointerOut,Nf),u=Do(pe.useCallback(C=>C.hulls[n],[n]),Nf),h=Do(pe.useCallback(C=>C.hulls[n].vertices,[n]),Nf),f=Do(C=>C.clock),g=pe.useRef(),y=pe.useRef(),b=typeof h=="function"?h(0):h,S=new vW(b.map(C=>new Ae(C.x,C.y,C.z)));return Ym(pe.useCallback(()=>{const C=f.getElapsed()*1e3;sC(y,u.color,C),sC(g,u.color,C);const M=typeof h=="function"?h(C):h;if(M!==b){const O=new vW(M.map(L=>new Ae(L.x,L.y,L.z)));g.current.geometry=O,y.current.geometry=O}const A=typeof u.hidden=="function"?!u.hidden(C):!u.hidden;g.current.visible=A,y.current.visible=A},[g,y,b,u,f,h])),un(vee,{enabled:u.highlighted,children:Bh("group",{ref:r,up:[0,0,1],children:[Bh("group",{up:[0,0,1],onPointerDown:C=>{s(n,g.current.visible,C)},onPointerOver:C=>{o(n,g.current.visible,C)},onPointerOut:C=>{l(n,g.current.visible,C)},children:[un("mesh",{ref:y,geometry:S,castShadow:!1,receiveShadow:!1,children:un("meshLambertMaterial",{transparent:!0,wireframe:u.wireframe,attach:"material",side:cd})},`${n}B`),un("mesh",{ref:g,geometry:S,castShadow:!1,receiveShadow:!1,children:un("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:u.wireframe,side:f_})},`${n}F`)]}),u.showName&&un(VZ,{distanceFactor:2,position:[0,0,.5],children:un("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey"},className:"disable-text-selection",children:u.name})})]})})}),J2e=pe.forwardRef(({objectKey:n},e)=>{const t=pe.useRef(null),r=yE(e,t),s=pe.useRef(),o=Do(u=>u.clock),l=Do(pe.useCallback(u=>u.texts[n],[n]));return Ym(pe.useCallback(()=>{const u=o.getElapsed()*1e3;r.current&&(r.current.position.set(typeof l.position.x=="function"?l.position.x(u):l.position.x,typeof l.position.y=="function"?l.position.y(u):l.position.y,typeof l.position.z=="function"?l.position.z(u):l.position.z),r.current.visible=typeof l.hidden=="function"?!l.hidden(u):!l.hidden),s.current&&sC(s,l.color,u)},[l,r,o])),un("group",{ref:r,children:un(zAe,{follow:!0,children:un(NIe,{ref:s,depthOffset:2,scale:[.2,.2,.2],children:l.value})})})}),q2e=pe.forwardRef(({objectKey:n},e)=>{const t=pe.useRef(null),r=yE(e,t),s=Do(g=>g.clock),{points:o,scale:l,hidden:u}=Do(pe.useCallback(g=>({points:g.points[n].points,scale:g.points[n].scale,hidden:g.points[n].hidden}),[n]),Nf),[{positions:h,colors:f}]=pe.useState(()=>({positions:new Float32Array(o.length*3),colors:new Float32Array(o.length*3)}));return Ym(()=>{const g=s.getElapsed()*1e3;if(r.current)for(let y=0;y<o.length;y++){let b=y*3;h[b]=typeof o[y].position.x=="function"?o[y].position.x(g):o[y].position.x,h[b+1]=typeof o[y].position.y=="function"?o[y].position.y(g):o[y].position.y,h[b+2]=typeof o[y].position.z=="function"?o[y].position.z(g):o[y].position.z,f[b]=typeof o[y].color.r=="function"?o[y].color.r(g)/255:o[y].color.r/255,f[b+1]=typeof o[y].color.g=="function"?o[y].color.g(g)/255:o[y].color.g/255,f[b+2]=typeof o[y].color.b=="function"?o[y].color.b(g)/255:o[y].color.b/255}}),o.length<=1?null:un(vRe,{ref:r,hidden:u,positions:h,colors:f,children:un(dRe,{transparent:!0,vertexColors:!0,sizeAttenuation:!0,depthWrite:!0,size:l*.1})})}),H4=pe.memo(({activeTf:n,displayTfs:e,allTfs:t,allItems:r,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:h,ghosts:f,targetRef:g,targetId:y,targetSource:b,filterActive:S,tfFilter:C,customProps:M})=>{const A=n==="world"?_ke:n==="gizmo"?vke:gke,O=n===y?M:{},L=S?t.filter(D=>C.includes(D.key)):t,B=S&&n!==g;return Bh(A,{objectKey:n,displayTfs:e,ref:y===n?g:null,...O,ghost:f,highlightColor:h,children:[L.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>un(H4,{activeTf:D.key,displayTfs:e,allTfs:t,allItems:r,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:h,ghosts:f,targetRef:g,targetSource:b,targetId:y,filterActive:B,tfFilter:C,customProps:M},D.key)),r.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const z=D.key===y&&b==="items"?M:{};return!S||D.key===y||n===y?un(j2e,{objectKey:D.key,highlightColor:h,ghost:f,ref:D.key===y?g:null,...z},D.key):null}),s.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const z=D.key===y&&b==="lines"?M:{};return!S||D.key===y||n===y?un(X2e,{objectKey:D.key,ref:D.lineKey===y?g:null,...z},D.key):null}),o.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const z=D.key===y&&b==="hulls"?M:{};return!S||D.key===y||n===y?un(K2e,{objectKey:D.key,highlightColor:h,ghost:f,ref:D.key===y?g:null,...z},D.key):null}),l.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const z=D.key===y&&b==="texts"?M:{};return!S||D.key===y||n===y?un(J2e,{objectKey:D.key,highlightColor:h,ref:D.key===y?g:null,...z},D.key):null}),u.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const z=D.key===y&&b==="points"?M:{};return!S||D.key===y||n===y?un(q2e,{objectKey:D.key,highlightColor:h,ref:D.key===y?g:null,...z},D.key):null})]})}),Q2e=["enabled","axis","translationSnap","rotationSnap","scaleSnap","space","size"],Z2e=["displayTfs","allTfs","allItems","allLines","allHulls","allTexts","allPoints","highlightColor"],eOe=pe.memo(({camera:n,objectInfo:e,highlightColor:t,translateSnap:r,rotateSnap:s,scaleSnap:o,onDragStart:l,onDragEnd:u,mode:h,...f})=>{const g=fN(f,Q2e),y=fN(f,Z2e),b=Do(pe.useCallback(q=>{let he=[];e.source==="tfs"&&he.push(e.key);let ae=q[e.source][e.key].frame;for(;ae&&ae!=="world"&&ae!=="gizmo";){let ue=q.tfs[ae];he.push(ae),ae=ue.frame}return he},[e]),Nf),S=pe.useRef(),C=pe.useRef(),M=Do(q=>fN(q[e.source][e.key],["position","rotation","scale"]),Nf),A=nf(({gl:q})=>q),O=nf(({camera:q})=>q),L=nf(({invalidate:q})=>q),B=n||O,[D]=pe.useState(()=>new QRe(B,A.domElement));D.translationSnap=r,D.rotationSnap=s,D.scaleSnap=o,h!=null&&h.includes("translate")?D.mode="translate":h!=null&&h.includes("rotate")?D.mode="rotate":h!=null&&h.includes("scale")&&(D.mode="scale"),h!=null&&h.includes("-x")?(D.showY=!1,D.showZ=!1):h!=null&&h.includes("-y")?(D.showX=!1,D.showZ=!1):h!=null&&h.includes("-z")&&(D.showX=!1,D.showY=!1);const[z,U]=pe.useState(!1),[V,H]=pe.useState(M),[oe,le]=pe.useState(!1);pe.useEffect(()=>{console.log("refreshing transform"),H(M)},[M,oe]);const Z=Do(q=>q.onMove,Nf);return pe.useEffect(()=>{const q=he=>{var ae,ue,ge;const we=(ae=C==null?void 0:C.current)==null?void 0:ae.position,J=(ue=C==null?void 0:C.current)==null?void 0:ue.quaternion,re=(ge=C==null?void 0:C.current)==null?void 0:ge.scale;he.value&&!z?(console.log("starting transform"),U(!0),H({position:we,rotation:J,scale:re}),l&&l()):!he.value&&z&&(console.log("stopping transform"),U(!1),u&&u(),Z(e.key,e.source,{position:D.worldPosition,quaternion:D.worldQuaternion,scale:D._worldScale},{position:we?{x:we.x,y:we.y,z:we.z}:null,quaternion:J?{x:J.x,y:J.y,z:J.z,w:J.w}:null,scale:re?{x:re.x,y:re.y,z:re.z}:null}),le(!oe))};return D&&D.addEventListener("dragging-changed",q),()=>{D.removeEventListener("dragging-changed",q)}},[M,z,e]),pe.useEffect(()=>void(D==null?void 0:D.attach(C.current)),[C,D]),pe.useEffect(()=>(D&&D.addEventListener("change",L),()=>{var q;return(q=D==null?void 0:D.removeEventListener)==null?void 0:q.call(D,"change",L)}),[D,L]),D?Bh(BC,{children:[un("primitive",{ref:S,object:D,...g}),un(H4,{...y,activeTf:"world",tfFilter:b,ghosts:!0,targetRef:C,targetSource:e.source,targetId:e.key,filterActive:!0,customProps:{...V}})]}):null}),n1=(n,e)=>n.length!==e.length?!1:!n.some((t,r)=>!fg.exports.isEqual(e[r],t));function tOe({displayTfs:n=!1,displayGrid:e=!0,isPolar:t=!1,backgroundColor:r="#d0d0d0",planeColor:s="#a8a8a8",highlightColor:o="#00ffff",plane:l=0,translateSnap:u=0,rotateSnap:h=0,scaleSnap:f=0,debug:g=!1}){g&&console.log("content rerender");const y=nf(Z=>Z.camera),b=Do(Z=>Z.clock,Nf);Ym(()=>{b.update()});const S=Do(Z=>fg.exports.sortBy(Object.entries(Z.tfs).map(([q,he])=>({key:q,frame:he.frame,transformMode:he.transformMode,source:"tfs"})),q=>q.key),n1),C=Do(Z=>fg.exports.sortBy(Object.entries(Z.items).map(([q,he])=>({key:q,frame:he.frame,transformMode:he.transformMode,source:"items"})),q=>q.key),n1),M=Do(Z=>fg.exports.sortBy(Object.entries(Z.lines).map(([q,he])=>({key:q,frame:he.frame,source:"lines"})),q=>q.key),n1),A=Do(Z=>fg.exports.sortBy(Object.entries(Z.hulls).map(([q,he])=>({key:q,frame:he.frame,source:"hulls"})),q=>q.key),n1),O=Do(Z=>fg.exports.sortBy(Object.entries(Z.texts).map(([q,he])=>({key:q,frame:he.frame,source:"texts"})),q=>q.key),n1),L=Do(Z=>fg.exports.sortBy(Object.entries(Z.points).map(([q,he])=>({key:q,frame:he.frame,source:"points"})),q=>q.key),n1),B=Do(Z=>fg.exports.sortBy(Object.entries(Z.widgets).map(([q,he])=>({key:q,frame:he.frame,source:"widgets"})),q=>q.key),n1),D=[...C,...S].filter(Z=>["translate","rotate","scale","translate-x","translate-y","translate-z","rotate-x","rotate-y","rotate-z","scale-x","scale-y","scale-z"].includes(Z.transformMode)),z=pe.useRef(),U=pe.useRef(),V=pe.useRef(),H=pe.useRef(),oe=qRe(s),le=[oe.r,oe.g,oe.b,.5];return Bh(yt.Fragment,{children:[un(cRe,{ref:H,makeDefault:!0,camera:y}),un("pointLight",{ref:U,intensity:.5,position:[-1,-3,3],color:"#FFFAEE"}),un(KRe,{ref:z,intensity:.7,color:"white"}),un(JRe,{ref:V,castShadow:!0,position:[5,15,15],intensity:.6,color:"#FFFAEE"}),un("spotLight",{penumbra:1,position:[-1,-1,4],intensity:.3,castShadow:!0,color:"#FFFAEE"}),un("color",{attach:"background",args:[r]}),un("fogExp2",{attach:"fog",args:[r,.01]}),un(pRe,{receiveShadow:!0,scale:1e3,position:[0,0,l-.01],material:d_(...le)}),Bh(U2e,{children:[un(z2e,{autoClear:!1,children:un(H2e,{visibleEdgeColor:o,hiddenEdgeColor:o,blur:!0,kernelSize:1,edgeStrength:50,pulseSpeed:.25,xRay:!0})}),un(H4,{activeTf:"world",displayTfs:n,allTfs:S,allItems:C,allLines:M,allHulls:A,allTexts:O,allPoints:L,allWidgets:B,highlightColor:o})]}),un("group",{position:[0,0,l],rotation:[Math.PI/2,0,0],up:[0,0,1],children:e&&(t?un("polarGridHelper",{args:[10,16,8,64,"white","gray"]}):un("gridHelper",{args:[20,20,"white","gray"]}))}),D.map(Z=>un(eOe,{objectInfo:Z,mode:Z.transformMode,displayTfs:n,allTfs:S,allItems:C,allLines:M,allHulls:A,allTexts:O,allPoints:L,allWidgets:B,translateSnap:u,rotateSnap:h,scaleSnap:f,highlightColor:o,onDragEnd:()=>{H.current&&(H.current.enabled=!0)},onDragStart:()=>{H.current&&(H.current.enabled=!1)}},`movableObjectTransform-${Z.key}`))]})}ro.DefaultUp.set(0,0,1);function nOe({backgroundColor:n="#d0d0d0",store:e,fov:t=60,onPointerMissed:r=()=>{},meshLookup:s={},debug:o=!1,...l}){return o&&console.log("Scene rerender"),un(yAe,{camera:{up:[0,0,1],fov:t,position:[0,-3,3]},shadows:!0,style:{background:n||"#d0d0d0"},onPointerMissed:r||(()=>{}),children:un(XRe,{store:e,debug:o,children:un(V2e,{meshes:s,children:un(pe.Suspense,{children:un(tOe,{...l,backgroundColor:n,debug:o})})})})})}var G4={},rOe=uE;Object.defineProperty(G4,"__esModule",{value:!0});var Tee=G4.default=void 0,iOe=rOe(e2()),sOe=Pe;Tee=G4.default=(0,iOe.default)((0,sOe.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt");var W4={},oOe=uE;Object.defineProperty(W4,"__esModule",{value:!0});var See=W4.default=void 0,aOe=oOe(e2()),lOe=Pe;See=W4.default=(0,aOe.default)((0,lOe.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");var V4={},uOe=uE;Object.defineProperty(V4,"__esModule",{value:!0});var wee=V4.default=void 0,cOe=uOe(e2()),hOe=Pe;wee=V4.default=(0,cOe.default)((0,hOe.jsx)("path",{d:"M6 6h12v12H6z"}),"Stop");const dOe="/gpu-programming/assets/compile-worker-DEfUxNNI.js",fOe={Left:"LEFT_ARM_CONNECTOR_1",Right:"RIGHT_ARM_CONNECTOR_1",Head:"HEAD_1",Neck:"NECK_GLOBE_BASE_1",Base:"base_link"},Wi=n=>fOe[n],pOe={s_Acceptance:"s_Acceptance.wav",s_Amazement:"s_Amazement.wav",s_Amazement2:"s_Amazement2.wav",s_Anger:"s_Anger.wav",s_Anger2:"s_Anger2.wav",s_Anger3:"s_Anger3.wav",s_Anger4:"s_Anger4.wav",s_Annoyance:"s_Annoyance.wav",s_Annoyance2:"s_Annoyance2.wav",s_Annoyance3:"s_Annoyance3.wav",s_Annoyance4:"s_Annoyance4.wav",s_Awe:"s_Awe.wav",s_Awe2:"s_Awe2.wav",s_Awe3:"s_Awe3.wav",s_Boredom:"s_Boredom.wav",s_Disapproval:"s_Disapproval.wav",s_Disgust:"s_Disgust.wav",s_Disgust2:"s_Disgust2.wav",s_Disgust3:"s_Disgust3.wav",s_DisorientedConfused:"s_DisorientedConfused.wav",s_DisorientedConfused2:"s_DisorientedConfused2.wav",s_DisorientedConfused3:"s_DisorientedConfused3.wav",s_DisorientedConfused4:"s_DisorientedConfused4.wav",s_DisorientedConfused5:"s_DisorientedConfused5.wav",s_DisorientedConfused6:"s_DisorientedConfused6.wav",s_Distraction:"s_Distraction.wav",s_Ecstacy:"s_Ecstacy.wav",s_Ecstacy2:"s_Ecstacy2.wav",s_Fear:"s_Fear.wav",s_Grief:"s_Grief.wav",s_Grief2:"s_Grief2.wav",s_Grief3:"s_Grief3.wav",s_Grief4:"s_Grief4.wav",s_Joy:"s_Joy.wav",s_Joy2:"s_Joy2.wav",s_Joy3:"s_Joy3.wav",s_Joy4:"s_Joy4.wav",s_Loathing:"s_Loathing.wav",s_Love:"s_Love.wav",s_PhraseByeBye:"s_PhraseByeBye.wav",s_PhraseEvilAhHa:"s_PhraseEvilAhHa.wav",s_PhraseHello:"s_PhraseHello.wav",s_PhraseNoNoNo:"s_PhraseNoNoNo.wav",s_PhraseOopsy:"s_PhraseOopsy.wav",s_PhraseOwOwOw:"s_PhraseOwOwOw.wav",s_PhraseOwwww:"s_PhraseOwwww.wav",s_PhraseUhOh:"s_PhraseUhOh.wav",s_Rage:"s_Rage.wav",s_Sadness:"s_Sadness.wav",s_Sadness2:"s_Sadness2.wav",s_Sadness3:"s_Sadness3.wav",s_Sadness4:"s_Sadness4.wav",s_Sadness5:"s_Sadness5.wav",s_Sadness6:"s_Sadness6.wav",s_Sadness7:"s_Sadness7.wav",s_Sleepy:"s_Sleepy.wav",s_Sleepy2:"s_Sleepy2.wav",s_Sleepy3:"s_Sleepy3.wav",s_Sleepy4:"s_Sleepy4.wav",s_SleepySnore:"s_SleepySnore.wav",s_SystemCameraShutter:"s_SystemCameraShutter.wav"},_9=n=>pOe[n],nv={e_Sleeping:"e_Sleeping.jpg",e_SleepingZZZ:"e_SleepingZZZ.jpg",e_Contempt:"e_Contempt.jpg",e_ContentLeft:"e_ContentLeft.jpg",e_ContentRight:"e_ContentRight.jpg",e_Disoriented:"e_Disoriented.jpg",e_EcstacyHilarious:"e_EcstacyHilarious.jpg",e_EcstacyStarryEyed:"e_EcstacyStarryEyed.jpg",e_JoyGoofy:"e_JoyGoofy.jpg",e_JoyGoofy2:"e_JoyGoofy2.jpg",e_JoyGoofy3:"e_JoyGoofy3.jpg",e_Love:"e_Love.jpg",e_Rage:"e_Rage.jpg",e_Rage2:"e_Rage2.jpg",e_Rage3:"e_Rage3.jpg",e_Rage4:"e_Rage4.jpg",e_RemorseShame:"e_RemorseShame.jpg",eyes_acceptance:"eyes_acceptance.jpg",eyes_admiration:"eyes_admiration.jpg",eyes_amazement:"eyes_amazement.jpg",eyes_anger:"eyes_anger.jpg",eyes_annoyed:"eyes_annoyed.jpg",eyes_anticipation:"eyes_anticipation.png",eyes_apprehension:"eyes_apprehension.jpg",eyes_apprehension_1:"eyes_apprehension_1.jpg",eyes_boredom:"eyes_boredom.jpg",eyes_default:"eyes_default.jpg",eyes_disgust:"eyes_disgust.jpg",eyes_distraction:"eyes_distraction.gif",eyes_ecstasy_frame_1:"eyes_ecstasy_frame_1.jpg",eyes_ecstasy_frame_2:"eyes_ecstasy_frame_2.jpg",eyes_fear:"eyes_fear.jpg",eyes_grief:"eyes_grief.jpg",eyes_interest:"eyes_interest.jpg",eyes_joy:"eyes_joy.jpg",eyes_loathing:"eyes_loathing.jpg",eyes_pensiveness:"eyes_pensiveness.jpg",eyes_rage:"eyes_rage.jpg",eyes_sad:"eyes_sad.jpg",eyes_serenity:"eyes_serenity.jpg",eyes_surprise:"eyes_surprise.png",eyes_terror:"eyes_terror.jpg",eyes_trust:"eyes_trust.jpg",eyes_vigilance:"eyes_vigilance.jpg"},mOe=n=>nv[n],gOe=({blocks:n,tfs:e,items:t})=>{var le;var r=e[Wi("Left")],s=e[Wi("Right")],o=e[Wi("Head")],l=e[Wi("Base")];let u={Left:{x:[r.rotation.x],y:[r.rotation.y],z:[r.rotation.z],w:[r.rotation.w]},Right:{x:[s.rotation.x],y:[s.rotation.y],z:[s.rotation.z],w:[s.rotation.w]},Head:{x:[o.rotation.x],y:[o.rotation.y],z:[o.rotation.z],w:[o.rotation.w]},Base:{position:{x:[l.position.x],y:[l.position.y],z:[l.position.z],angle:[0],distance:[0]},rotation:{x:[l.rotation.x],y:[l.rotation.y],z:[l.rotation.z],w:[l.rotation.w]}},Time:[0]},h=Object.keys(nv);for(let Z=0;Z<h.length;Z++){let q=h[Z];u[q]=[!!((le=t[q])!=null&&le.hidden)]}const f=(Z,q,he)=>{if(Z==="both")g(q,he,q,he);else if(he>0){var ae=Z,ue=Z==="Left"?"Right":"Left",ge={rotation:{x:u[ae].x[u[ae].x.length-1],y:u[ae].y[u[ae].y.length-1],z:u[ae].z[u[ae].z.length-1],w:u[ae].w[u[ae].w.length-1]}},we=aI(ge.rotation),J=2*ad*oI*Math.abs(we.y-q),re=J/(he/100*WO),ie={x:0,y:q-VO,z:0},fe=1;if(ie.y<0&&we.y>0||ie.y>0&&we.y<0){let Ie=(ie.y-we.y)/2,qe=ie.y-Ie;var Te=ey(0,qe*ad/180,0);u[ae].w.push(Te._w),u[ae].x.push(Te._x),u[ae].y.push(Te._y),u[ae].z.push(Te._z),u.Time.push(re/2),fe+=1}var Fe=ey(ie.x,ie.y*ad/180,ie.z);u[ae].w.push(Fe._w),u[ae].x.push(Fe._x),u[ae].y.push(Fe._y),u[ae].z.push(Fe._z);for(let Ie=0;Ie<fe;Ie++){u[ue].w.push(u[ue].w[u[ue].w.length-1]),u[ue].x.push(u[ue].x[u[ue].x.length-1]),u[ue].y.push(u[ue].y[u[ue].y.length-1]),u[ue].z.push(u[ue].z[u[ue].z.length-1]),u.Head.x.push(u.Head.x[u.Head.x.length-1]),u.Head.y.push(u.Head.y[u.Head.y.length-1]),u.Head.z.push(u.Head.z[u.Head.z.length-1]),u.Head.w.push(u.Head.w[u.Head.w.length-1]),u.Base.position.x.push(u.Base.position.x[u.Base.position.x.length-1]),u.Base.position.y.push(u.Base.position.y[u.Base.position.y.length-1]),u.Base.position.z.push(u.Base.position.z[u.Base.position.z.length-1]),u.Base.rotation.w.push(u.Base.rotation.w[u.Base.rotation.w.length-1]),u.Base.rotation.x.push(u.Base.rotation.x[u.Base.rotation.x.length-1]),u.Base.rotation.y.push(u.Base.rotation.y[u.Base.rotation.y.length-1]),u.Base.rotation.z.push(u.Base.rotation.z[u.Base.rotation.z.length-1]);let qe=Object.keys(nv);for(let Re=0;Re<qe.length;Re++){let Qe=qe[Re];u[Qe].push(u[Qe][u[Qe].length-1])}}fe>1?u.Time.push(re/2):u.Time.push(re)}},g=(Z,q,he,ae)=>{if(q>0||ae>0){var ue={rotation:{x:u.Left.x[u.Left.x.length-1],y:u.Left.y[u.Left.y.length-1],z:u.Left.z[u.Left.z.length-1],w:u.Left.w[u.Left.w.length-1]}},ge={rotation:{x:u.Right.x[u.Right.x.length-1],y:u.Right.y[u.Right.y.length-1],z:u.Right.z[u.Right.z.length-1],w:u.Right.w[u.Right.w.length-1]}},we=aI(ue.rotation),J=2*ad*oI*Math.abs(we.y-Z),re=J/(q/100*WO),ie=aI(ge.rotation),fe=2*ad*oI*Math.abs(ie.y-he),Te=fe/(ae/100*WO),Fe=q===0?Te:ae===0?re:Math.max(re,Te),Ie={x:0,y:Z-VO,z:0},qe=ey(Ie.x,Ie.y*ad/180,Ie.z),Re={x:0,y:he-VO,z:0},Qe=ey(Re.x,Re.y*ad/180,Re.z);let lt=1;if(Ie.y<0&&we.y>0||Ie.y>0&&we.y<0||Re.y<0&&ie.y>0||Re.y>0&&ie.y<0){let ze=(Ie.y-we.y)/2,Ce=(Ie.y-we.y)/2,He=Ie.y-ze,rt=Re.y-Ce;var nt=ey(0,He*ad/180,0),ft=ey(0,rt*ad/180,0);q>0?(u.Left.w.push(nt._w),u.Left.x.push(nt._x),u.Left.y.push(nt._y),u.Left.z.push(nt._z)):(u.Left.w.push(u.Left.w[u.Left.w.length-1]),u.Left.x.push(u.Left.x[u.Left.x.length-1]),u.Left.y.push(u.Left.y[u.Left.y.length-1]),u.Left.z.push(u.Left.z[u.Left.z.length-1])),ae>0?(u.Right.w.push(ft._w),u.Right.x.push(ft._x),u.Right.y.push(ft._y),u.Right.z.push(ft._z)):(u.Right.w.push(u.Right.w[u.Right.w.length-1]),u.Right.x.push(u.Right.x[u.Right.x.length-1]),u.Right.y.push(u.Right.y[u.Right.y.length-1]),u.Right.z.push(u.Right.z[u.Right.z.length-1])),u.Time.push(Fe/2),lt+=1}q>0?(u.Left.w.push(qe._w),u.Left.x.push(qe._x),u.Left.y.push(qe._y),u.Left.z.push(qe._z)):(u.Left.w.push(u.Left.w[u.Left.w.length-1]),u.Left.x.push(u.Left.x[u.Left.x.length-1]),u.Left.y.push(u.Left.y[u.Left.y.length-1]),u.Left.z.push(u.Left.z[u.Left.z.length-1])),ae>0?(u.Right.w.push(Qe._w),u.Right.x.push(Qe._x),u.Right.y.push(Qe._y),u.Right.z.push(Qe._z)):(u.Right.w.push(u.Right.w[u.Right.w.length-1]),u.Right.x.push(u.Right.x[u.Right.x.length-1]),u.Right.y.push(u.Right.y[u.Right.y.length-1]),u.Right.z.push(u.Right.z[u.Right.z.length-1]));for(let ze=0;ze<lt;ze++){u.Head.x.push(u.Head.x[u.Head.x.length-1]),u.Head.y.push(u.Head.y[u.Head.y.length-1]),u.Head.z.push(u.Head.z[u.Head.z.length-1]),u.Head.w.push(u.Head.w[u.Head.w.length-1]),u.Base.position.x.push(u.Base.position.x[u.Base.position.x.length-1]),u.Base.position.y.push(u.Base.position.y[u.Base.position.y.length-1]),u.Base.position.z.push(u.Base.position.z[u.Base.position.z.length-1]),u.Base.rotation.w.push(u.Base.rotation.w[u.Base.rotation.w.length-1]),u.Base.rotation.x.push(u.Base.rotation.x[u.Base.rotation.x.length-1]),u.Base.rotation.y.push(u.Base.rotation.y[u.Base.rotation.y.length-1]),u.Base.rotation.z.push(u.Base.rotation.z[u.Base.rotation.z.length-1]);let Ce=Object.keys(nv);for(let He=0;He<Ce.length;He++){let rt=Ce[He];u[rt].push(u[rt][u[rt].length-1])}}lt>1?u.Time.push(Fe/2):u.Time.push(Fe)}},y=(Z,q,he,ae)=>{if(ae>0){var ue=ey(q*ad/180,Z*ad/180,he*ad/180);u.Head.w.push(ue._w),u.Head.x.push(ue._x),u.Head.y.push(ue._y),u.Head.z.push(ue._z),u.Left.w.push(u.Left.w[u.Left.w.length-1]),u.Left.x.push(u.Left.x[u.Left.x.length-1]),u.Left.y.push(u.Left.y[u.Left.y.length-1]),u.Left.z.push(u.Left.z[u.Left.z.length-1]),u.Right.w.push(u.Right.w[u.Right.w.length-1]),u.Right.x.push(u.Right.x[u.Right.x.length-1]),u.Right.y.push(u.Right.y[u.Right.y.length-1]),u.Right.z.push(u.Right.z[u.Right.z.length-1]),u.Base.position.x.push(u.Base.position.x[u.Base.position.x.length-1]),u.Base.position.y.push(u.Base.position.y[u.Base.position.y.length-1]),u.Base.position.z.push(u.Base.position.z[u.Base.position.z.length-1]),u.Base.rotation.w.push(u.Base.rotation.w[u.Base.rotation.w.length-1]),u.Base.rotation.x.push(u.Base.rotation.x[u.Base.rotation.x.length-1]),u.Base.rotation.y.push(u.Base.rotation.y[u.Base.rotation.y.length-1]),u.Base.rotation.z.push(u.Base.rotation.z[u.Base.rotation.z.length-1]);let ge=Object.keys(nv);for(let we=0;we<ge.length;we++){let J=ge[we];u[J].push(u[J][u[J].length-1])}u.Time.push(ae)}},b=(Z,q,he)=>{if(he>0){var ae={position:{x:u.Base.position.x[u.Base.position.x.length-1],y:u.Base.position.y[u.Base.position.y.length-1],z:u.Base.position.z[u.Base.position.z.length-1]},rotation:{x:u.Base.rotation.x[u.Base.rotation.x.length-1],y:u.Base.rotation.y[u.Base.rotation.y.length-1],z:u.Base.rotation.z[u.Base.rotation.z.length-1],w:u.Base.rotation.w[u.Base.rotation.w.length-1]}},ue=q/100*dle*he/V0,ge=Z/100*hle*he/V0,we=new Pu(ae.rotation.x,ae.rotation.y,ae.rotation.z,ae.rotation.w),J=gle(we);if(ue!==0){var re={x:0,y:0,z:ue};we=ey(re.x,re.y,re.z),we.multiply(new Pu(ae.rotation.x,ae.rotation.y,ae.rotation.z,ae.rotation.w))}let ie=ae.position.x,fe=ae.position.y,Te=null;Te=new Bt(ie+Math.sin(J-ue)*ge,fe-Math.cos(J-ue)*ge,ae.position.z),u.Base.position.x.push(Te.x),u.Base.position.y.push(Te.y),u.Base.position.z.push(Te.z),u.Base.position.angle.push(ue),u.Base.position.distance.push(ge),u.Base.rotation.w.push(we._w),u.Base.rotation.x.push(we._x),u.Base.rotation.y.push(we._y),u.Base.rotation.z.push(we._z),u.Head.x.push(u.Head.x[u.Head.x.length-1]),u.Head.y.push(u.Head.y[u.Head.y.length-1]),u.Head.z.push(u.Head.z[u.Head.z.length-1]),u.Head.w.push(u.Head.w[u.Head.w.length-1]),u.Left.w.push(u.Left.w[u.Left.w.length-1]),u.Left.x.push(u.Left.x[u.Left.x.length-1]),u.Left.y.push(u.Left.y[u.Left.y.length-1]),u.Left.z.push(u.Left.z[u.Left.z.length-1]),u.Right.w.push(u.Right.w[u.Right.w.length-1]),u.Right.x.push(u.Right.x[u.Right.x.length-1]),u.Right.y.push(u.Right.y[u.Right.y.length-1]),u.Right.z.push(u.Right.z[u.Right.z.length-1]);let Fe=Object.keys(nv);for(let Ie=0;Ie<Fe.length;Ie++){let qe=Fe[Ie];u[qe].push(u[qe][u[qe].length-1])}u.Time.push(he)}},S=(Z,q)=>{let he=Object.keys(nv);for(let ue=0;ue<he.length;ue++){let ge=he[ue];u[ge].push(Z!==ge)}let ae=u.Head.x.length-1;u.Base.position.x.push(u.Base.position.x[ae]),u.Base.position.y.push(u.Base.position.y[ae]),u.Base.position.z.push(u.Base.position.z[ae]),u.Base.rotation.w.push(u.Base.rotation.w[ae]),u.Base.rotation.x.push(u.Base.rotation.x[ae]),u.Base.rotation.y.push(u.Base.rotation.y[ae]),u.Base.rotation.z.push(u.Base.rotation.z[ae]),u.Head.x.push(u.Head.x[ae]),u.Head.y.push(u.Head.y[ae]),u.Head.z.push(u.Head.z[ae]),u.Head.w.push(u.Head.w[ae]),u.Left.w.push(u.Left.w[ae]),u.Left.x.push(u.Left.x[ae]),u.Left.y.push(u.Left.y[ae]),u.Left.z.push(u.Left.z[ae]),u.Right.w.push(u.Right.w[ae]),u.Right.x.push(u.Right.x[ae]),u.Right.y.push(u.Right.y[ae]),u.Right.z.push(u.Right.z[ae]),u.Time.push(q)},C=Z=>{let q=u.Head.x.length-1;u.Base.position.x.push(u.Base.position.x[q]),u.Base.position.y.push(u.Base.position.y[q]),u.Base.position.z.push(u.Base.position.z[q]),u.Base.rotation.w.push(u.Base.rotation.w[q]),u.Base.rotation.x.push(u.Base.rotation.x[q]),u.Base.rotation.y.push(u.Base.rotation.y[q]),u.Base.rotation.z.push(u.Base.rotation.z[q]),u.Head.x.push(u.Head.x[q]),u.Head.y.push(u.Head.y[q]),u.Head.z.push(u.Head.z[q]),u.Head.w.push(u.Head.w[q]),u.Left.w.push(u.Left.w[q]),u.Left.x.push(u.Left.x[q]),u.Left.y.push(u.Left.y[q]),u.Left.z.push(u.Left.z[q]),u.Right.w.push(u.Right.w[q]),u.Right.x.push(u.Right.x[q]),u.Right.y.push(u.Right.y[q]),u.Right.z.push(u.Right.z[q]);let he=Object.keys(nv);for(let ae=0;ae<he.length;ae++){let ue=he[ae];u[ue].push(u[ue][q])}u.Time.push(Z)},M=()=>{let Z=JSON.parse(JSON.stringify(e)),q=JSON.parse(JSON.stringify(e)),he=JSON.parse(JSON.stringify(t)),ae=JSON.parse(JSON.stringify(t)),ue=u.Time.length,ge=0,we=[],J=[],re=[],ie=[],fe=[],Te=[],Fe=[],Ie=[],qe=[],Re=[],Qe=[],nt=[],ft=[],lt=[],ze=[],Ce=[],He=[],rt=[],it=[],Nt=[],kt=[],vt=Object.keys(nv);for(let $e=0;$e<vt.length;$e++)kt.push([]);for(let $e=1;$e<ue;$e++){let ht=u.Time[$e],St=new Pu(u.Left.x[$e],u.Left.y[$e],u.Left.z[$e],u.Left.w[$e]),It=new Pu(u.Right.x[$e],u.Right.y[$e],u.Right.z[$e],u.Right.w[$e]),pt=new Pu(u.Head.x[$e],u.Head.y[$e],u.Head.z[$e],u.Head.w[$e]),Ke=new Pu(u.Base.rotation.x[$e],u.Base.rotation.y[$e],u.Base.rotation.z[$e],u.Base.rotation.w[$e]),Le=new Bt(u.Base.position.x[$e],u.Base.position.y[$e],u.Base.position.z[$e]);for(let Q=10;Q<oS;Q+=10){we.push(ht/V0*Q+ge);let te=new Pu(u.Left.x[$e-1],u.Left.y[$e-1],u.Left.z[$e-1],u.Left.w[$e-1]),me=new Pu(u.Right.x[$e-1],u.Right.y[$e-1],u.Right.z[$e-1],u.Right.w[$e-1]),ke=new Pu(u.Head.x[$e-1],u.Head.y[$e-1],u.Head.z[$e-1],u.Head.w[$e-1]),Xe=new Pu(u.Base.rotation.x[$e-1],u.Base.rotation.y[$e-1],u.Base.rotation.z[$e-1],u.Base.rotation.w[$e-1]),Wt=new Bt(u.Base.position.x[$e-1],u.Base.position.y[$e-1],u.Base.position.z[$e-1]);te.slerp(St,Q/oS),me.slerp(It,Q/oS),ke.slerp(pt,Q/oS),Xe.slerp(Ke,Q/oS),Wt.lerp(Le,Q/oS),J.push(te._w),re.push(te._x),ie.push(te._y),fe.push(te._z),Te.push(me._w),Fe.push(me._x),Ie.push(me._y),qe.push(me._z),Re.push(ke._w),Qe.push(ke._x),nt.push(ke._y),ft.push(ke._z),lt.push(Wt.x),ze.push(Wt.y),Ce.push(Wt.z),He.push(Xe._w),rt.push(Xe._x),it.push(Xe._y),Nt.push(Xe._z);for(let Ge=0;Ge<vt.length;Ge++)kt[Ge].push(u[vt[Ge]][$e])}ge+=ht}let Mt=new Pu(u.Left.x[ue-1],u.Left.y[ue-1],u.Left.z[ue-1],u.Left.w[ue-1]),At=new Pu(u.Right.x[ue-1],u.Right.y[ue-1],u.Right.z[ue-1],u.Right.w[ue-1]),mt=new Pu(u.Head.x[ue-1],u.Head.y[ue-1],u.Head.z[ue-1],u.Head.w[ue-1]),xe=new Pu(u.Base.rotation.x[ue-1],u.Base.rotation.y[ue-1],u.Base.rotation.z[ue-1],u.Base.rotation.w[ue-1]),se=new Bt(u.Base.position.x[ue-1],u.Base.position.y[ue-1],u.Base.position.z[ue-1]);we.push(1/0),J.push(Mt._w),re.push(Mt._x),ie.push(Mt._y),fe.push(Mt._z),Te.push(At._w),Fe.push(At._x),Ie.push(At._y),qe.push(At._z),Re.push(mt._w),Qe.push(mt._x),nt.push(mt._y),ft.push(mt._z),lt.push(se.x),ze.push(se.y),Ce.push(se.z),He.push(xe._w),rt.push(xe._x),it.push(xe._y),Nt.push(xe._z);for(let $e=0;$e<vt.length;$e++)kt[$e].push(u[vt[$e]][ue-1]),he[vt[$e]].hidden=Rh(we,kt[$e]),ae[vt[$e]].hidden=u[vt[$e]][ue-1];return Z[Wi("Left")].rotation.w=Rh(we,J),Z[Wi("Left")].rotation.x=Rh(we,re),Z[Wi("Left")].rotation.y=Rh(we,ie),Z[Wi("Left")].rotation.z=Rh(we,fe),q[Wi("Left")].rotation.w=Mt._w,q[Wi("Left")].rotation.x=Mt._x,q[Wi("Left")].rotation.y=Mt._y,q[Wi("Left")].rotation.z=Mt._z,Z[Wi("Right")].rotation.w=Rh(we,Te),Z[Wi("Right")].rotation.x=Rh(we,Fe),Z[Wi("Right")].rotation.y=Rh(we,Ie),Z[Wi("Right")].rotation.z=Rh(we,qe),q[Wi("Right")].rotation.w=At._w,q[Wi("Right")].rotation.x=At._x,q[Wi("Right")].rotation.y=At._y,q[Wi("Right")].rotation.z=At._z,Z[Wi("Head")].rotation.w=Rh(we,Re),Z[Wi("Head")].rotation.x=Rh(we,Qe),Z[Wi("Head")].rotation.y=Rh(we,nt),Z[Wi("Head")].rotation.z=Rh(we,ft),q[Wi("Head")].rotation.w=mt._w,q[Wi("Head")].rotation.x=mt._x,q[Wi("Head")].rotation.y=mt._y,q[Wi("Head")].rotation.z=mt._z,Z[Wi("Base")].rotation.w=Rh(we,He),Z[Wi("Base")].rotation.x=Rh(we,rt),Z[Wi("Base")].rotation.y=Rh(we,it),Z[Wi("Base")].rotation.z=Rh(we,Nt),Z[Wi("Base")].position.x=Rh(we,lt),Z[Wi("Base")].position.y=Rh(we,ze),Z[Wi("Base")].position.z=Rh(we,Ce),q[Wi("Base")].rotation.w=xe._w,q[Wi("Base")].rotation.x=xe._x,q[Wi("Base")].rotation.y=xe._y,q[Wi("Base")].rotation.z=xe._z,q[Wi("Base")].position.x=se.x,q[Wi("Base")].position.y=se.y,q[Wi("Base")].position.z=se.z,{newTfs:Z,newEndingTfs:q,newItems:he,newEndingItems:ae}},A=Z=>Object.values(n).filter(q=>q.type===Z)[0],O=Z=>n[Z],L=(Z,q)=>{const he=O(Z);let ae=O(q);if(V(he,he.type))for(V(ae,ae.type);ae.next;)ae=O(ae.next),V(ae,ae.type)},B=Z=>Z==="TRUE";function D(Z,q){return Z=Math.ceil(Z),q=Math.floor(q),Math.floor(Math.random()*(q-Z+1))+Z}function z(Z){if(Z===2||Z===3)return!0;if(Z<=1||Z%2===0||Z%3===0)return!1;for(let q=5;q*q<=Z;q+=6)if(Z%q===0||Z%(q+2)===0)return!1;return!0}function U(Z){var q;if(typeof Z!="string"&&typeof Z!="object")return Z.shadow.fields.NUM;{let he=(q=Z==null?void 0:Z.shadow)!=null&&q.id?O(Z.shadow.id):O(Z);return V(he,he.type)}}const V=(Z,q)=>{var vt,Mt,At;switch(!0){case q==="controls_if":if(!Z.inputs||!Z.inputs.IF0||!Z.inputs.DO0)throw new Error("err: controls_if not complete!");L(Z.inputs.IF0,Z.inputs.DO0);break;case q==="logic_boolean":return B(Z.fields.BOOL);case q==="logic_compare":if(!Z.inputs||!Z.inputs.A||!Z.inputs.B)throw new Error("err: logic_compare is not complete!");const mt=Z.fields.OP,xe=Z.inputs.A,se=Z.inputs.B,$e=O(xe),ht=O(se);if(mt==="EQ")return V($e,$e.type)==V(ht,ht.type);if(mt==="NEQ")return V($e,$e.type)!==V(ht,ht.type);if(mt==="LT")return V($e,$e.type)<V(ht,ht.type);if(mt==="LTE")return V($e,$e.type)<=V(ht,ht.type);if(mt==="GT")return V($e,$e.type)>V(ht,ht.type);if(mt==="GTE")return V($e,$e.type)>=V(ht,ht.type);case q==="logic_operation":if(!Z.inputs||!Z.inputs.A||!Z.inputs.B)throw new Error("err: logic_operation is not complete!");const St=Z.fields.OP,It=Z.inputs.A,pt=Z.inputs.B,Ke=O(It),Le=O(pt);return St==="OR"?V(Ke,Ke.type)||V(Le,Le.type):V(Ke,Ke.type)&&V(Le,Le.type);case q==="logic_negate":if(!Z.inputs)throw new Error("err: logic_negate is not complete!");const Q=O(Z.inputs.BOOL);return!V(Q,Q.type);case q==="logic_boolean":return!Z.fields.BOOL!=="FALSE";case q==="logic_null":return null;case q==="logic_ternary":if(!Z.inputs||!Z.inputs.IF||!Z.inputs.THEN||!Z.inputs.ELSE)throw new Error("err: logic_ternary is not complete!");const te=Z.inputs.IF,me=Z.inputs.THEN,ke=Z.inputs.ELSE,Xe=O(te),Wt=O(me),Ge=O(ke);return V(Xe,Xe.type)?V(Wt,Wt.type):V(Ge,Ge.type);case q==="controls_repeat_ext":const _t=U(Z.inputs.TIMES);if(!Z.inputs.DO)throw new Error("err: controls_repeat_ext is not complete!");let Jt=O(Z.inputs.DO);for(let Cr=0;Cr<_t;Cr++){V(Jt,Jt.type);let oi=Jt;for(;oi.next;)oi=O(oi.next),V(oi,oi.type)}return;case q==="math_number":return Z.fields.NUM;case q=="BasicSlider":case q=="ArmPositionSlider":case q=="SpeedSlider":case q=="TimeSlider":case q=="HeadPitchSlider":case q=="HeadRollSlider":case q=="HeadYawSlider":return Z.fields.FIELD_slider_value;case q==="math_number_property":const Kt=Z.fields.PROPERTY,On=U(Z.inputs.NUMBER_TO_CHECK);if(Kt==="EVEN")return On%2===0;if(Kt==="ODD")return On%2===1;if(Kt==="PRIME")return z(On);if(Kt==="WHOLE")return On%1===0;if(Kt==="POSITIVE")return On>0;if(Kt==="NEGATIVE")return On<0;if(Kt==="DIVISIBLE_BY"){if(!Z.inputs||!Z.inputs.DIVISOR)throw new Error("err: DIVISOR is not filled!");if(Z.inputs.DIVISOR===0)throw new Error("Note that divisor cannot be 0!");return On%Z.inputs.DIVISOR===0}return;case q==="math_random_int":const si=U(Z.inputs.FROM),Pr=U(Z.inputs.TO);return D(si,Pr);case q==="colour_picker":return aS(Z.fields.COLOUR);case q==="colour_random":let Ei=D(0,255),$r=D(0,255),gr=D(0,255);return{r:Ei,g:$r,b:gr};case q==="colour_rgb":const ne=U(Z.inputs.RED),Se=U(Z.inputs.GREEN),We=U(Z.inputs.BLUE);return{r:ne,g:Se,b:We};case q==="colour_blend":const ot=U(Z.inputs.RATIO),zt=aS(Z.inputs.COLOUR1.shadow.fields.COLOUR),sn=aS(Z.inputs.COLOUR2.shadow.fields.COLOUR),Nn=zt.r*ot,De=zt.g*ot,gt=zt.b*ot,Ct=sn.r,bt=sn.g,Vt=sn.b,Wn=(Ct+Nn)/(ot+1),rr=(bt+De)/(ot+1),_r=(Vt+gt)/(ot+1);return{r:Wn,g:rr,b:_r};case q==="ChangeLED":if(!Z.inputs||!Z.inputs.FIELD_ChangeLED)throw new Error("err: ChangeLED is not complete!");var he=O(Z.inputs.FIELD_ChangeLED),ae=null;(vt=he==null?void 0:he.fields)!=null&&vt.COLOUR?ae=aS(he.fields.COLOUR):ae=V(he,he.type);var Te={Red:ae.r,Green:ae.g,Blue:ae.b};return;case q==="TransitionLED":if(!Z.inputs||!Z.inputs.COLOR1||!Z.inputs.COLOR2)throw new Error("err: TransitionLED is not complete!");var ue=O(Z.inputs.COLOR1),ge=O(Z.inputs.COLOR2),we=null;(Mt=ue==null?void 0:ue.fields)!=null&&Mt.COLOUR?we=aS(ue.fields.COLOUR):we=V(ue,ue.type);var J=null;(At=ge==null?void 0:ge.fields)!=null&&At.COLOUR?J=aS(ge.fields.COLOUR):J=V(ge,ge.type);var it=Z.fields.FIELD_TransitionTime_TimeMs*V0,re=Z.fields.TRANSITION_TYPE,Te={Red:we.r,Green:we.g,Blue:we.b,Red2:J.r,Green2:J.g,Blue2:J.b,TransitionType:re,TimeMS:it};return;case q==="DisplayImage":if(!Z.inputs||!Z.inputs.FIELD_DisplayImage_Filename)throw new Error("err: DisplayImage is not complete!");var ie=O(Z.inputs.FIELD_DisplayImage_Filename),fe=mOe(ie.type);S(ie.type,500);return;case q==="PlayAudio":if(!Z.inputs||!Z.inputs.FIELD_PlayAudio_Filename)throw new Error("err: PlayAudio is not complete!");var ie=O(Z.inputs.FIELD_PlayAudio_Filename),fe=_9(ie.type);return;case q==="DisplayAnimation":if(!Z.inputs||!Z.inputs.FIELD_DisplayAnimation_Filename)throw new Error("err: DisplayAnimation is not complete!");var ie=O(Z.inputs.FIELD_DisplayAnimation_Filename),fe=_9(ie.type),Te={FileName:fe};readFile(Te);return;case q==="DisplayText":Z.fields.FIELD_DisplayText_Text;return;case q==="TurnOnFlashlight":return;case q==="TurnOffFlashlight":return;case q==="WaitForSeconds":var it=parseFloat(Z.fields.NumSeconds)*V0;C(it);return;case q==="MoveArm":var Fe=Z.fields.FIELD_MoveArm_Arm==="Right"?"Right":"Left",Ie=U(Z.fields.FIELD_MoveArm_Position),Ce=U(Z.fields.FIELD_MoveArm_Velocity);f(Fe,Ie,Ce);return;case q==="MoveArm2":var Ie=U(Z.fields.FIELD_MoveArm2_Position),Ce=U(Z.fields.FIELD_MoveArm2_Velocity),Fe="both";f(Fe,Ie,Ce);return;case q==="MoveArm3":var Fe=Z.fields.FIELD_MoveArm_Arm==="Right"?"Right":"Left",Ie=U(Z.fields.FIELD_MoveArm_Position),Ce=U(Z.fields.FIELD_MoveArm_Velocity);f(Fe,Ie,Ce);return;case q==="MoveArms2":var qe=U(Z.inputs.FIELD_MoveArm_LeftPosition),Re=U(Z.inputs.FIELD_MoveArm_LeftVelocity),Qe=U(Z.inputs.FIELD_MoveArm_RightPosition),nt=U(Z.inputs.FIELD_MoveArm_RightVelocity);g(qe,Re,Qe,nt);return;case q==="MoveHead":var ft=Z.fields.FIELD_MoveHead_Pitch==="D"?25:-40,it=2e3;y(ft,0,0,it);return;case q==="MoveHead3":var ft,lt,ze;ft=U(Z.inputs.FIELD_MoveHead_Pitch),lt=U(Z.inputs.FIELD_MoveHead_Roll),ze=U(Z.inputs.FIELD_MoveHead_Yaw),it=U(Z.inputs.FIELD_MoveHead_Time)*V0,y(ft,lt,ze,it);return;case q==="DriveTime":var rt=Z.fields.FIELD_DriveTime_Direction,Ce=parseInt(Z.fields.FIELD_DriveTime_Velocity),it=parseInt(Z.fields.FIELD_DriveTime_TimeMs)*V0,He=rt==="F"?Ce:-Ce;b(He,0,it);return;case q==="DriveTime2":var He=U(Z.inputs.FIELD_DriveTime_Velocity),Nt=U(Z.inputs.FIELD_DriveTime_Angular),it=U(Z.inputs.FIELD_DriveTime_TimeMs)*V0;b(He,Nt,it);return;case q==="Turn":var rt=Z.fields.FIELD_Turn_Direction,it=parseInt(Z.fields.FIELD_Turn_Duration)*V0,Nt=rt==="L"?100:-100;b(0,Nt,it);return;case q==="Turn2":var rt=Z.fields.FIELD_Turn_Direction,it=parseInt(U(Z.inputs.FIELD_Turn_Duration))*V0,Nt=rt==="L"?100:-100;b(0,Nt,it);return;case q=="Speak":var kt=O(Z.inputs.FIELD_Speak_Text);kt.fields.TEXT;return;case q=="SpeakDefault":Z.fields.FIELD_SpeakDefault_Text;return;default:return}};let oe=A("Start");for(;oe&&oe.next;)oe=O(oe.next),V(oe,oe.type);return M()};function _Oe(n){const e=Hn(rs(U=>U.resetSim)),t=Hn(rs(U=>U.toggleSimOnly)),r=Hn(rs(U=>U.isConnected)),s=Hn(rs(U=>U.ip)),o=Hn(rs(U=>U.getBlocks)),l=Hn(rs(U=>U.getEndingItems)),u=Hn(rs(U=>U.clock)),h=Hn(rs(U=>U.mistyImageList)),f=Hn(rs(U=>U.mistyAudioList)),g=Hn(rs(U=>U.simOnly)),y=Hn(rs(U=>U.endingTfs)),b=Hn(rs(U=>U.setAnimationFrames)),S=Hn(rs(U=>U.setHighlightBlocks)),C=Hn(rs(U=>U.workerThread)),M=Hn(rs(U=>U.setWorkerThread)),A=Hn(rs(U=>U.llmMode));function O(U,V){s&&!g&&r&&fetch(`http://${s}/api/${U}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})}const L=async()=>{u.reset_elapsed(),C&&(C.terminate(),M(null));const U=`import ${JSON.stringify(new URL(dOe,import.meta.url))}`,V=new Blob([U],{type:"application/javascript"}),H=URL.createObjectURL(V);let oe=new Worker(H,{type:"module"});oe.onmessage=function(ae){console.log("Message received from worker "+ae.data),M(null)},oe.onerror=function(ae){console.log(ae);const ge=/id: (.+)/.exec(ae.message);ge?S(ge[1]):console.log("ID not found in error message."),URL.revokeObjectURL(H)},oe.postMessage({blocks:o(),mistyAudioList:f,mistyImageList:h,tfs:y,ip:s,runOnRobot:!g}),M(oe);let{newTfs:le,newEndingTfs:Z,newItems:q,newEndingItems:he}=gOe({blocks:o(),tfs:y,items:l()});b(le,Z,q,he),uh("Click Run Code button")},B=()=>{C&&(C.terminate(),M(null),O("halt",{})),uh("Click Stop Code button")},D=()=>{O("arms/set",{LeftArmPosition:90,RightArmPosition:90,LeftArmVelocity:100,RightArmVelocity:100,Units:"Degrees"}),O("head",{Pitch:0,Yaw:0,Roll:0,Duration:1,Units:"Degrees"}),O("images/display",{FileName:"e_DefaultContent.jpg",Alpha:1}),O("text/display",{Text:""}),O("led",{Red:100,Green:70,Blue:160}),e()};let z=A?{top:"10px"}:{bottom:"0px"};return Pe.jsxs(D$,{style:{position:"absolute",padding:"0px",left:"10px",...z},children:[Pe.jsxs(FH,{style:{paddingLeft:"0px",paddingRight:"0px"},children:[!C&&Pe.jsx(mI,{variant:"contained","aria-label":"play",style:{backgroundColor:"#FAFAFA",marginBottom:"5px"},onClick:L,id:"runButton",children:Pe.jsx(See,{})}),C&&Pe.jsx(mI,{variant:"contained","aria-label":"play",style:{backgroundColor:"#FAFAFA",marginBottom:"5px"},onClick:B,id:"stopButton",children:Pe.jsx(wee,{})}),Pe.jsx(mI,{variant:"contained","aria-label":"restart",style:{backgroundColor:"#FAFAFA",marginLeft:"5px",marginBottom:"5px"},onClick:D,children:Pe.jsx(Tee,{})})]}),r&&Pe.jsx(FH,{style:{backgroundColor:"#FAFAFA",borderRadius:"5px",marginBottom:"5px",paddingLeft:"10px",paddingRight:"0px"},children:Pe.jsx(LK,{children:Pe.jsx(OK,{control:Pe.jsx(lge,{onChange:U=>t(U.target.checked)}),label:"Sim only"})})})]})}function vOe(n){const e={displayTfs:!1,displayGrid:!0,isPolar:!1,backgroundColor:"#3a3a3a",planeColor:"#3a3a3a",highlightColor:"#ffffff",plane:0,fov:60,ar:!1,vr:!1};return Pe.jsxs(Ey,{height:"100%",children:[Pe.jsx(nOe,{style:{overflow:"hidden"},store:Hn,meshLookup:z1e,...e}),Pe.jsx(_Oe,{})]})}var Eee={exports:{}};(function(n,e){(function(t,r){r()})(Vl,function(){function t(f,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function r(f,g,y){var b=new XMLHttpRequest;b.open("GET",f),b.responseType="blob",b.onload=function(){h(b.response,g,y)},b.onerror=function(){console.error("could not download file")},b.send()}function s(f){var g=new XMLHttpRequest;g.open("HEAD",f,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function o(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(g)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Vl=="object"&&Vl.global===Vl?Vl:void 0,u=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(f,g,y){var b=l.URL||l.webkitURL,S=document.createElement("a");g=g||f.name||"download",S.download=g,S.rel="noopener",typeof f=="string"?(S.href=f,S.origin===location.origin?o(S):s(S.href)?r(f,g,y):o(S,S.target="_blank")):(S.href=b.createObjectURL(f),setTimeout(function(){b.revokeObjectURL(S.href)},4e4),setTimeout(function(){o(S)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,y){if(g=g||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(t(f,y),g);else if(s(f))r(f,g,y);else{var b=document.createElement("a");b.href=f,b.target="_blank",setTimeout(function(){o(b)})}}:function(f,g,y,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof f=="string")return r(f,g,y);var S=f.type==="application/octet-stream",C=/constructor/i.test(l.HTMLElement)||l.safari,M=/CriOS\/[\d]+/.test(navigator.userAgent);if((M||S&&C||u)&&typeof FileReader<"u"){var A=new FileReader;A.onloadend=function(){var B=A.result;B=M?B:B.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=B:location=B,b=null},A.readAsDataURL(f)}else{var O=l.URL||l.webkitURL,L=O.createObjectURL(f);b?b.location=L:location.href=L,b=null,setTimeout(function(){O.revokeObjectURL(L)},4e4)}});l.saveAs=h.saveAs=h,n.exports=h})})(Eee);var yOe=Eee.exports;const bOe=Xy(yOe);function Bx({title:n,children:e,style:t}){return Pe.jsx(Ey,{style:{padding:"5px",paddingTop:"20px",...t},children:Pe.jsxs(Ey,{style:{backgroundColor:"#E4E5F1",border:"3px #9394A5 solid",padding:"5px",borderRadius:"6px"},children:[Pe.jsx(Ey,{style:{position:"relative",display:"float",top:"-18px",left:"10px"},children:Pe.jsx(Ey,{children:Pe.jsx(Q1,{display:"inline",style:{filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",backgroundColor:"#E4E5F1",padding:"3px",border:"3px #9394A5 solid",borderRadius:"6px"},children:n})})}),Pe.jsx(D$,{children:pe.Children.map(e,r=>Pe.jsx("div",{style:{padding:"3px",margin:"3px"},children:r}))})]})})}function v9({label:n,buttonText:e,clickFunction:t,style:r}){return Pe.jsxs(Lc,{container:!0,direction:"row",alignItems:"center",style:{...r},children:[Pe.jsx(Q1,{display:"inline",style:{paddingRight:"10px",flex:"1"},children:n}),Pe.jsx(a0,{text:e,clickFunction:t})]})}function xN({label:n,onChangeFunction:e,fieldType:t,textFieldInput:r,style:s}){return Pe.jsxs(Lc,{container:!0,direction:"row",alignItems:"center",style:{...s},children:[Pe.jsx(Q1,{display:"inline",style:{paddingRight:"10px",flex:"1"},children:n}),Pe.jsx(PF,{value:r,type:t,onChange:e})]})}const TOe=()=>{const n=Hn(S=>S.closeModal),e=Hn(S=>S.setEndpoint),t=Hn(S=>S.setAPIKey),r=Hn(S=>S.setDeployment),s=Hn(rs(S=>S.llmDeployment)),o=Hn(rs(S=>S.llmAPIKey)),l=Hn(rs(S=>S.llmEndpoint)),u=Hn(S=>S.blocklyWorkspace),h=Hn(S=>S.toggleLLMBlockPrompt),f=Hn(rs(S=>S.displayLLMBlockPrompt)),g=()=>{var S=new Blob([activityLog],{type:"text/plain;charset=utf-8"});bOe.saveAs(S,"activity log.txt")},y=()=>{const S=Qg.Xml.domToPrettyText(Qg.Xml.workspaceToDom(u)),C=new Blob([S],{type:"text/xml"}),M=URL.createObjectURL(C),A=document.createElement("a");A.href=M,A.download="myBlocks.xml",A.click()},b=S=>{const C=new FileReader;C.onload=function(){const M=C.result;if(u)try{const O=new DOMParser().parseFromString(M,"text/xml");Qg.Xml.domToWorkspace(O.firstChild,u)}catch(A){console.error("Error parsing XML:",A)}else console.error("Blockly workspace not initialized")},C.readAsText(S.target.files[0])};return Pe.jsxs(Ey,{sx:{backgroundColor:"#585D92",padding:"5px",margin:"0",borderRadius:"10px",maxHeight:"70vh",overflowY:"scroll"},children:[Pe.jsxs(Bx,{title:"LLM Settings",children:[Pe.jsx(xN,{onChangeFunction:S=>e(S.target.value),label:"Server Endpoint",fieldType:"password",textFieldInput:l}),Pe.jsx(xN,{onChangeFunction:S=>t(S.target.value),label:"API Key",fieldType:"password",textFieldInput:o}),Pe.jsx(xN,{onChangeFunction:S=>r(S.target.value),label:"Deployment Model",fieldType:"password",textFieldInput:s})]}),Pe.jsxs(Bx,{title:"Downloads",children:[Pe.jsx(v9,{clickFunction:g,label:"Download Activity Log",buttonText:"Download"}),Pe.jsx(v9,{clickFunction:y,label:"Download Workspace XML",buttonText:"Download"})]}),Pe.jsx(Bx,{title:"Upload",children:Pe.jsx(LF,{type:"file",onChange:b,accept:".xml"})}),Pe.jsx(Bx,{title:"Toggles",children:Pe.jsx(LK,{style:{justifyContent:"left"},children:Pe.jsx(OK,{style:{justifyContent:"left"},control:Pe.jsx(fve,{defaultChecked:f,onChange:S=>h(S.target.checked)}),label:"Enable LLM Block Prompt",labelPlacement:"start"})})}),Pe.jsx(a0,{clickFunction:n,text:"Close",style:{float:"right"}})]})},SOe=()=>{const n=Hn(t=>t.setActiveModal),e=Hn(t=>t.activeModal);return Pe.jsx(IK,{open:e===bX,onClose:(t,r)=>{r==="backdropClick"&&n("")},children:e&&Pe.jsx(TOe,{})})},wOe=()=>Pe.jsx(Ey,{sx:{backgroundColor:"#585D92",padding:"15px",margin:"0",borderRadius:"10px",maxHeight:"70vh",overflowY:"scroll"},children:Pe.jsx(XK,{style:{backgroundColor:"#FAFAFA",borderRadius:"5px"},maxVH:50})}),EOe=()=>{const n=Hn(t=>t.setActiveModal),e=Hn(t=>t.activeModal);return Pe.jsx(IK,{open:e===fle,onClose:(t,r)=>{r==="backdropClick"&&n("")},children:e&&Pe.jsx(wOe,{})})};function xOe(n){return Pe.jsx(Bx,{title:"Task Description",children:Pe.jsx(Q1,{variant:"h5",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Risus in hendrerit gravida rutrum quisque. Nulla malesuada pellentesque elit eget gravida cum sociis natoque penatibus. Erat velit scelerisque in dictum non. Nisl tincidunt eget nullam non nisi est. Sed tempus urna et pharetra. Nibh sit amet commodo nulla facilisi nullam vehicula. Eget dolor morbi non arcu risus. Donec ac odio tempor orci dapibus ultrices in iaculis."})})}var li="cs",xee={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",l=0;l<arguments.length;l++){var u=arguments[l];u&&(o=s(o,r(u)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var u in o)e.call(o,u)&&o[u]&&(l=s(l,u));return l}function s(o,l){return l?o?o+" "+l:o+l:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(xee);var $Oe=xee.exports;const Ps=Xy($Oe);var $ee=["available","unavailable","away","dnd","invisible","eager"],Cee=["xs","sm","md","lg","fluid"];function oC(n){"@babel/helpers - typeof";return oC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oC(n)}var COe=["status","size","className","name","selected","children"];function QP(){return QP=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},QP.apply(this,arguments)}function y9(n,e,t){return e=MOe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MOe(n){var e=AOe(n,"string");return oC(e)=="symbol"?e:String(e)}function AOe(n,e){if(oC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(oC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function IOe(n,e){if(n==null)return{};var t=ROe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ROe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Mee=function(e){var t=e.status,r=e.size,s=r===void 0?"md":r,o=e.className,l=e.name,u=e.selected,h=e.children,f=IOe(e,COe),g="".concat(li,"-status"),y=yt.createElement("div",{className:"".concat(g,"__bullet")}),b=l||h;return yt.createElement("div",QP({},f,{"aria-selected":u===!0?"":null,className:Ps(g,"".concat(g,"--").concat(s),"".concat(g,"--").concat(t),y9({},"".concat(g,"--selected"),u),y9({},"".concat(g,"--named"),b),o)}),y,b&&yt.createElement("div",{className:"".concat(g,"__name")},l||h))};function aC(n){"@babel/helpers - typeof";return aC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aC(n)}var kOe=["name","src","size","status","className","active","children"];function ZP(){return ZP=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ZP.apply(this,arguments)}function OOe(n,e,t){return e=LOe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LOe(n){var e=NOe(n,"string");return aC(e)=="symbol"?e:String(e)}function NOe(n,e){if(aC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(aC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function DOe(n,e){if(n==null)return{};var t=POe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function POe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function BOe(n,e){var t=n.name,r=t===void 0?"":t,s=n.src,o=s===void 0?"":s,l=n.size,u=l===void 0?"md":l,h=n.status,f=n.className,g=n.active,y=g===void 0?!1:g,b=n.children,S=DOe(n,kOe),C="".concat(li,"-avatar"),M=typeof u<"u"?" ".concat(C,"--").concat(u):"",A=pe.useRef();return pe.useImperativeHandle(e,function(){return{focus:function(){return A.current.focus()}}}),yt.createElement("div",ZP({ref:A},S,{className:Ps("".concat(C).concat(M),OOe({},"".concat(C,"--active"),y),f)}),b||yt.createElement(yt.Fragment,null,yt.createElement("img",{src:o,alt:r}),typeof h=="string"&&yt.createElement(Mee,{status:h,size:u})," "))}var HC=pe.forwardRef(BOe);HC.displayName="Avatar";HC.propTypes={children:qt.node,name:qt.string,src:qt.string,size:qt.oneOf(Cee),status:qt.oneOf($ee),active:qt.bool,className:qt.string};function b9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function GA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?b9(Object(t),!0).forEach(function(r){FOe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function FOe(n,e,t){return e=zOe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zOe(n){var e=UOe(n,"string");return Yy(e)=="symbol"?e:String(e)}function UOe(n,e){if(Yy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Yy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Yy(n){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yy(n)}var II=function(){},HOe=function(e){return e==null||Array.isArray(e)&&e.length===0},GC=function(e,t){var r=[],s=t.map(function(o){return o.displayName||o.name});return yt.Children.toArray(e).forEach(function(o){var l=t.indexOf(o.type);if(l!==-1)r[l]=o;else{var u,h,f,g=(u=o==null||(h=o.props)===null||h===void 0?void 0:h.as)!==null&&u!==void 0?u:o==null||(f=o.props)===null||f===void 0?void 0:f.is,y=Yy(g);if(y==="function"){var b=t.indexOf(g);b!==-1&&(r[b]=yt.cloneElement(o,GA(GA({},o.props),{},{as:null})))}else if(y==="object"){var S=g.name||g.displayName,C=s.indexOf(S);C!==-1&&(r[C]=yt.cloneElement(o,GA(GA({},o.props),{},{as:null})))}else if(y==="string"){var M=s.indexOf(g);M!==-1&&(r[M]=o)}}}),r},Aee=function(e){if(typeof e=="string")return e;if("type"in e){var t=Yy(e.type);if(t==="function"||t==="object"){if("displayName"in e.type)return e.type.displayName;if("name"in e.type)return e.type.name}else if(t==="string")return e.type;return"undefined"}return"undefined"},Iee=function(e){return function(t,r,s){var o=e.map(function(g){return g.name||g.displayName}),l=yt.Children.toArray(t[r]).find(function(g){if(typeof g=="string"&&g.trim().length===0)return!1;if(e.indexOf(g.type)===-1){var y,b,S=(g==null||(y=g.props)===null||y===void 0?void 0:y.as)||(g==null||(b=g.props)===null||b===void 0?void 0:b.is),C=Yy(S);if(C==="function")return e.indexOf(S)===-1;if(C==="object"){var M=S.name||S.displayName;return o.indexOf(M)===-1}else return C==="string"?o.indexOf(S)===-1:!0}});if(typeof l<"u"){var u=Aee(l),h=e.map(function(g){return g.name||g.displayName}).join(", "),f='"'.concat(u,'" is not a valid child for ').concat(s,". Allowed types: ").concat(h);return new Error(f)}}},GOe=["children","size","className","max","activeIndex","hoverToFront"];function eB(){return eB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},eB.apply(this,arguments)}function WOe(n,e){if(n==null)return{};var t=VOe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function VOe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Ree=function(e){var t=e.children,r=e.size,s=r===void 0?"md":r,o=e.className,l=e.max,u=e.activeIndex,h=e.hoverToFront,f=WOe(e,GOe),g="".concat(li,"-avatar-group"),y=typeof l=="number"&&yt.Children.count(t)>l?yt.Children.toArray(t).reverse().slice(0,l):yt.Children.toArray(t).reverse(),b=typeof u=="number"?y.length-u-1:void 0;return yt.createElement("div",eB({},f,{className:Ps(g,"".concat(g,"--").concat(s),o)}),y.map(function(S,C){var M=typeof b=="number"?{active:b===C}:{};return h===!0&&(M.className=Ps("".concat(li,"-avatar--active-on-hover"),S.props.className)),yt.cloneElement(S,M)}))};Ree.displayName="AvatarGroup";var jOe=["children","className","icon","border","labelPosition"];function tB(){return tB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},tB.apply(this,arguments)}function YOe(n,e){if(n==null)return{};var t=XOe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function XOe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var j4=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=s===void 0?"":s,l=e.icon,u=l===void 0?void 0:l,h=e.border,f=h===void 0?!1:h,g=e.labelPosition,y=g===void 0?void 0:g,b=YOe(e,jOe),S="".concat(li,"-button"),C=typeof y<"u"?y:"right",M=yt.Children.count(r)>0?"".concat(S,"--").concat(C):"",A=f===!0?"".concat(S,"--border"):"";return yt.createElement("button",tB({},b,{className:Ps(S,M,A,o)}),C==="left"&&r,u,C==="right"&&r)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */function a$(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a$=function(e){return typeof e}:a$=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a$(n)}function KOe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function T9(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function JOe(n,e,t){return e&&T9(n.prototype,e),t&&T9(n,t),n}function qOe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ko(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.forEach(function(s){qOe(n,s,t[s])})}return n}function kee(n,e){return QOe(n)||ZOe(n,e)||eLe()}function QOe(n){if(Array.isArray(n))return n}function ZOe(n,e){var t=[],r=!0,s=!1,o=void 0;try{for(var l=n[Symbol.iterator](),u;!(r=(u=l.next()).done)&&(t.push(u.value),!(e&&t.length===e));r=!0);}catch(h){s=!0,o=h}finally{try{!r&&l.return!=null&&l.return()}finally{if(s)throw o}}return t}function eLe(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var S9=function(){},Y4={},Oee={},tLe=null,Lee={mark:S9,measure:S9};try{typeof window<"u"&&(Y4=window),typeof document<"u"&&(Oee=document),typeof MutationObserver<"u"&&(tLe=MutationObserver),typeof performance<"u"&&(Lee=performance)}catch{}var nLe=Y4.navigator||{},w9=nLe.userAgent,E9=w9===void 0?"":w9,C2=Y4,hp=Oee,WA=Lee;C2.document;var X4=!!hp.documentElement&&!!hp.head&&typeof hp.addEventListener=="function"&&typeof hp.createElement=="function";~E9.indexOf("MSIE")||~E9.indexOf("Trident/");var bv="___FONT_AWESOME___",Nee="fa",Dee="svg-inline--fa",rLe="data-fa-i2svg";(function(){try{return!0}catch{return!1}})();var $N={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Pee=C2.FontAwesomeConfig||{};function iLe(n){var e=hp.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}function sLe(n){return n===""?!0:n==="false"?!1:n==="true"?!0:n}if(hp&&typeof hp.querySelector=="function"){var oLe=[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];oLe.forEach(function(n){var e=kee(n,2),t=e[0],r=e[1],s=sLe(iLe(t));s!=null&&(Pee[r]=s)})}var aLe={familyPrefix:Nee,replacementClass:Dee,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},nB=Ko({},aLe,Pee);nB.autoReplaceSvg||(nB.observeMutations=!1);var Pm=Ko({},nB);C2.FontAwesomeConfig=Pm;var Tv=C2||{};Tv[bv]||(Tv[bv]={});Tv[bv].styles||(Tv[bv].styles={});Tv[bv].hooks||(Tv[bv].hooks={});Tv[bv].shims||(Tv[bv].shims=[]);var i_=Tv[bv],lLe=[],uLe=function n(){hp.removeEventListener("DOMContentLoaded",n),rB=1,lLe.map(function(e){return e()})},rB=!1;X4&&(rB=(hp.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(hp.readyState),rB||hp.addEventListener("DOMContentLoaded",uLe));var K4="pending",Bee="settled",AR="fulfilled",IR="rejected",cLe=function(){},Fee=typeof global<"u"&&typeof global.process<"u"&&typeof global.process.emit=="function",hLe=typeof setImmediate>"u"?setTimeout:setImmediate,Fx=[],iB;function dLe(){for(var n=0;n<Fx.length;n++)Fx[n][0](Fx[n][1]);Fx=[],iB=!1}function RR(n,e){Fx.push([n,e]),iB||(iB=!0,hLe(dLe,0))}function fLe(n,e){function t(s){J4(e,s)}function r(s){lC(e,s)}try{n(t,r)}catch(s){r(s)}}function zee(n){var e=n.owner,t=e._state,r=e._data,s=n[t],o=n.then;if(typeof s=="function"){t=AR;try{r=s(r)}catch(l){lC(o,l)}}Uee(o,r)||(t===AR&&J4(o,r),t===IR&&lC(o,r))}function Uee(n,e){var t;try{if(n===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&(typeof e=="function"||a$(e)==="object")){var r=e.then;if(typeof r=="function")return r.call(e,function(s){t||(t=!0,e===s?Hee(n,s):J4(n,s))},function(s){t||(t=!0,lC(n,s))}),!0}}catch(s){return t||lC(n,s),!0}return!1}function J4(n,e){(n===e||!Uee(n,e))&&Hee(n,e)}function Hee(n,e){n._state===K4&&(n._state=Bee,n._data=e,RR(pLe,n))}function lC(n,e){n._state===K4&&(n._state=Bee,n._data=e,RR(mLe,n))}function Gee(n){n._then=n._then.forEach(zee)}function pLe(n){n._state=AR,Gee(n)}function mLe(n){n._state=IR,Gee(n),!n._handled&&Fee&&global.process.emit("unhandledRejection",n._data,n)}function gLe(n){global.process.emit("rejectionHandled",n)}function bg(n){if(typeof n!="function")throw new TypeError("Promise resolver "+n+" is not a function");if(!(this instanceof bg))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],fLe(n,this)}bg.prototype={constructor:bg,_state:K4,_then:null,_data:void 0,_handled:!1,then:function(e,t){var r={owner:this,then:new this.constructor(cLe),fulfilled:e,rejected:t};return(t||e)&&!this._handled&&(this._handled=!0,this._state===IR&&Fee&&RR(gLe,this)),this._state===AR||this._state===IR?RR(zee,r):this._then.push(r),r.then},catch:function(e){return this.then(null,e)}};bg.all=function(n){if(!Array.isArray(n))throw new TypeError("You must pass an array to Promise.all().");return new bg(function(e,t){var r=[],s=0;function o(h){return s++,function(f){r[h]=f,--s||e(r)}}for(var l=0,u;l<n.length;l++)u=n[l],u&&typeof u.then=="function"?u.then(o(l),t):r[l]=u;s||e(r)})};bg.race=function(n){if(!Array.isArray(n))throw new TypeError("You must pass an array to Promise.race().");return new bg(function(e,t){for(var r=0,s;r<n.length;r++)s=n[r],s&&typeof s.then=="function"?s.then(e,t):e(s)})};bg.resolve=function(n){return n&&a$(n)==="object"&&n.constructor===bg?n:new bg(function(e){e(n)})};bg.reject=function(n){return new bg(function(e,t){t(n)})};var rw={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function _Le(n){if(!(!n||!X4)){var e=hp.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=hp.head.childNodes,r=null,s=t.length-1;s>-1;s--){var o=t[s],l=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(l)>-1&&(r=o)}return hp.head.insertBefore(e,r),n}}var vLe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function kR(){for(var n=12,e="";n-- >0;)e+=vLe[Math.random()*62|0];return e}function Wee(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function yLe(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(Wee(n[t]),'" ')},"").trim()}function Vee(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t],";")},"")}function jee(n){return n.size!==rw.size||n.x!==rw.x||n.y!==rw.y||n.rotate!==rw.rotate||n.flipX||n.flipY}function Yee(n){var e=n.transform,t=n.containerWidth,r=n.iconWidth,s={transform:"translate(".concat(t/2," 256)")},o="translate(".concat(e.x*32,", ").concat(e.y*32,") "),l="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),u="rotate(".concat(e.rotate," 0 0)"),h={transform:"".concat(o," ").concat(l," ").concat(u)},f={transform:"translate(".concat(r/2*-1," -256)")};return{outer:s,inner:h,path:f}}var CN={x:0,y:0,width:"100%",height:"100%"};function x9(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}function bLe(n){return n.tag==="g"?n.children:[n]}function TLe(n){var e=n.children,t=n.attributes,r=n.main,s=n.mask,o=n.maskId,l=n.transform,u=r.width,h=r.icon,f=s.width,g=s.icon,y=Yee({transform:l,containerWidth:f,iconWidth:u}),b={tag:"rect",attributes:Ko({},CN,{fill:"white"})},S=h.children?{children:h.children.map(x9)}:{},C={tag:"g",attributes:Ko({},y.inner),children:[x9(Ko({tag:h.tag,attributes:Ko({},h.attributes,y.path)},S))]},M={tag:"g",attributes:Ko({},y.outer),children:[C]},A="mask-".concat(o||kR()),O="clip-".concat(o||kR()),L={tag:"mask",attributes:Ko({},CN,{id:A,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[b,M]},B={tag:"defs",children:[{tag:"clipPath",attributes:{id:O},children:bLe(g)},L]};return e.push(B,{tag:"rect",attributes:Ko({fill:"currentColor","clip-path":"url(#".concat(O,")"),mask:"url(#".concat(A,")")},CN)}),{children:e,attributes:t}}function SLe(n){var e=n.children,t=n.attributes,r=n.main,s=n.transform,o=n.styles,l=Vee(o);if(l.length>0&&(t.style=l),jee(s)){var u=Yee({transform:s,containerWidth:r.width,iconWidth:r.width});e.push({tag:"g",attributes:Ko({},u.outer),children:[{tag:"g",attributes:Ko({},u.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:Ko({},r.icon.attributes,u.path)}]}]})}else e.push(r.icon);return{children:e,attributes:t}}function wLe(n){var e=n.children,t=n.main,r=n.mask,s=n.attributes,o=n.styles,l=n.transform;if(jee(l)&&t.found&&!r.found){var u=t.width,h=t.height,f={x:u/h/2,y:.5};s.style=Vee(Ko({},o,{"transform-origin":"".concat(f.x+l.x/16,"em ").concat(f.y+l.y/16,"em")}))}return[{tag:"svg",attributes:s,children:e}]}function ELe(n){var e=n.prefix,t=n.iconName,r=n.children,s=n.attributes,o=n.symbol,l=o===!0?"".concat(e,"-").concat(Pm.familyPrefix,"-").concat(t):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ko({},s,{id:l}),children:r}]}]}function xLe(n){var e=n.icons,t=e.main,r=e.mask,s=n.prefix,o=n.iconName,l=n.transform,u=n.symbol,h=n.title,f=n.maskId,g=n.titleId,y=n.extra,b=n.watchable,S=b===void 0?!1:b,C=r.found?r:t,M=C.width,A=C.height,O=s==="fak",L=O?"":"fa-w-".concat(Math.ceil(M/A*16)),B=[Pm.replacementClass,o?"".concat(Pm.familyPrefix,"-").concat(o):"",L].filter(function(le){return y.classes.indexOf(le)===-1}).filter(function(le){return le!==""||!!le}).concat(y.classes).join(" "),D={children:[],attributes:Ko({},y.attributes,{"data-prefix":s,"data-icon":o,class:B,role:y.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(M," ").concat(A)})},z=O&&!~y.classes.indexOf("fa-fw")?{width:"".concat(M/A*16*.0625,"em")}:{};S&&(D.attributes[rLe]=""),h&&D.children.push({tag:"title",attributes:{id:D.attributes["aria-labelledby"]||"title-".concat(g||kR())},children:[h]});var U=Ko({},D,{prefix:s,iconName:o,main:t,mask:r,maskId:f,transform:l,symbol:u,styles:Ko({},z,y.styles)}),V=r.found&&t.found?TLe(U):SLe(U),H=V.children,oe=V.attributes;return U.children=H,U.attributes=oe,u?ELe(U):wLe(U)}var $9=function(){};Pm.measurePerformance&&WA&&WA.mark&&WA.measure;var $Le=function(e,t){return function(r,s,o,l){return e.call(t,r,s,o,l)}},MN=function(e,t,r,s){var o=Object.keys(e),l=o.length,u=s!==void 0?$Le(t,s):t,h,f,g;for(r===void 0?(h=1,g=e[o[0]]):(h=0,g=r);h<l;h++)f=o[h],g=u(g,e[f],f,e);return g};function Xee(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=t.skipHooks,s=r===void 0?!1:r,o=Object.keys(e).reduce(function(l,u){var h=e[u],f=!!h.icon;return f?l[h.iconName]=h.icon:l[u]=h,l},{});typeof i_.hooks.addPack=="function"&&!s?i_.hooks.addPack(n,o):i_.styles[n]=Ko({},i_.styles[n]||{},o),n==="fas"&&Xee("fa",e)}var C9=i_.styles,CLe=i_.shims,Kee=function(){var e=function(s){return MN(C9,function(o,l,u){return o[u]=MN(l,s,{}),o},{})};e(function(r,s,o){return s[3]&&(r[s[3]]=o),r}),e(function(r,s,o){var l=s[2];return r[o]=o,l.forEach(function(u){r[u]=o}),r});var t="far"in C9;MN(CLe,function(r,s){var o=s[0],l=s[1],u=s[2];return l==="far"&&!t&&(l="fas"),r[o]={prefix:l,iconName:u},r},{})};Kee();i_.styles;function M9(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}function Jee(n){var e=n.tag,t=n.attributes,r=t===void 0?{}:t,s=n.children,o=s===void 0?[]:s;return typeof n=="string"?Wee(n):"<".concat(e," ").concat(yLe(r),">").concat(o.map(Jee).join(""),"</").concat(e,">")}var MLe=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce(function(r,s){var o=s.toLowerCase().split("-"),l=o[0],u=o.slice(1).join("-");if(l&&u==="h")return r.flipX=!0,r;if(l&&u==="v")return r.flipY=!0,r;if(u=parseFloat(u),isNaN(u))return r;switch(l){case"grow":r.size=r.size+u;break;case"shrink":r.size=r.size-u;break;case"left":r.x=r.x-u;break;case"right":r.x=r.x+u;break;case"up":r.y=r.y-u;break;case"down":r.y=r.y+u;break;case"rotate":r.rotate=r.rotate+u;break}return r},t):t};function sB(n){this.name="MissingIcon",this.message=n||"Icon unavailable",this.stack=new Error().stack}sB.prototype=Object.create(Error.prototype);sB.prototype.constructor=sB;var M2={fill:"currentColor"},qee={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};Ko({},M2,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"});var q4=Ko({},qee,{attributeName:"opacity"});Ko({},M2,{cx:"256",cy:"364",r:"28"}),Ko({},qee,{attributeName:"r",values:"28;14;28;28;14;28;"}),Ko({},q4,{values:"1;0;1;1;0;1;"});Ko({},M2,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),Ko({},q4,{values:"1;0;0;0;0;1;"});Ko({},M2,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),Ko({},q4,{values:"0;0;1;1;0;0;"});i_.styles;function A9(n){var e=n[0],t=n[1],r=n.slice(4),s=kee(r,1),o=s[0],l=null;return Array.isArray(o)?l={tag:"g",attributes:{class:"".concat(Pm.familyPrefix,"-").concat($N.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Pm.familyPrefix,"-").concat($N.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(Pm.familyPrefix,"-").concat($N.PRIMARY),fill:"currentColor",d:o[1]}}]}:l={tag:"path",attributes:{fill:"currentColor",d:o}},{found:!0,width:e,height:t,icon:l}}i_.styles;var ALe=`svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}`;function ILe(){var n=Nee,e=Dee,t=Pm.familyPrefix,r=Pm.replacementClass,s=ALe;if(t!==n||r!==e){var o=new RegExp("\\.".concat(n,"\\-"),"g"),l=new RegExp("\\--".concat(n,"\\-"),"g"),u=new RegExp("\\.".concat(e),"g");s=s.replace(o,".".concat(t,"-")).replace(l,"--".concat(t,"-")).replace(u,".".concat(r))}return s}var RLe=function(){function n(){KOe(this,n),this.definitions={}}return JOe(n,[{key:"add",value:function(){for(var t=this,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];var l=s.reduce(this._pullDefinitions,{});Object.keys(l).forEach(function(u){t.definitions[u]=Ko({},t.definitions[u]||{},l[u]),Xee(u,l[u]),Kee()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,r){var s=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(s).map(function(o){var l=s[o],u=l.prefix,h=l.iconName,f=l.icon;t[u]||(t[u]={}),t[u][h]=f}),t}}]),n}();function kLe(){Pm.autoAddCss&&!R9&&(_Le(ILe()),R9=!0)}function OLe(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(r){return Jee(r)})}}),Object.defineProperty(n,"node",{get:function(){if(X4){var r=hp.createElement("div");return r.innerHTML=n.html,r.children}}}),n}function I9(n){var e=n.prefix,t=e===void 0?"fa":e,r=n.iconName;if(r)return M9(NLe.definitions,t,r)||M9(i_.styles,t,r)}function LLe(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:I9(e||{}),s=t.mask;return s&&(s=(s||{}).icon?s:I9(s||{})),n(r,Ko({},t,{mask:s}))}}var NLe=new RLe,R9=!1,oB={transform:function(e){return MLe(e)}},DLe=LLe(function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.transform,r=t===void 0?rw:t,s=e.symbol,o=s===void 0?!1:s,l=e.mask,u=l===void 0?null:l,h=e.maskId,f=h===void 0?null:h,g=e.title,y=g===void 0?null:g,b=e.titleId,S=b===void 0?null:b,C=e.classes,M=C===void 0?[]:C,A=e.attributes,O=A===void 0?{}:A,L=e.styles,B=L===void 0?{}:L;if(n){var D=n.prefix,z=n.iconName,U=n.icon;return OLe(Ko({type:"icon"},n),function(){return kLe(),Pm.autoA11y&&(y?O["aria-labelledby"]="".concat(Pm.replacementClass,"-title-").concat(S||kR()):(O["aria-hidden"]="true",O.focusable="false")),xLe({icons:{main:A9(U),mask:u?A9(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:D,iconName:z,transform:Ko({},rw,r),symbol:o,title:y,maskId:f,titleId:S,extra:{attributes:O,styles:B,classes:M}})})}});function k9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function $y(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?k9(Object(t),!0).forEach(function(r){iw(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):k9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function OR(n){"@babel/helpers - typeof";return OR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OR(n)}function iw(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PLe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function Qee(n,e){if(n==null)return{};var t=PLe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function aB(n){return BLe(n)||FLe(n)||zLe(n)||ULe()}function BLe(n){if(Array.isArray(n))return lB(n)}function FLe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function zLe(n,e){if(n){if(typeof n=="string")return lB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lB(n,e)}}function lB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function ULe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HLe(n){var e,t=n.beat,r=n.fade,s=n.beatFade,o=n.bounce,l=n.shake,u=n.flash,h=n.spin,f=n.spinPulse,g=n.spinReverse,y=n.pulse,b=n.fixedWidth,S=n.inverse,C=n.border,M=n.listItem,A=n.flip,O=n.size,L=n.rotation,B=n.pull,D=(e={"fa-beat":t,"fa-fade":r,"fa-beat-fade":s,"fa-bounce":o,"fa-shake":l,"fa-flash":u,"fa-spin":h,"fa-spin-reverse":g,"fa-spin-pulse":f,"fa-pulse":y,"fa-fw":b,"fa-inverse":S,"fa-border":C,"fa-li":M,"fa-flip":A===!0,"fa-flip-horizontal":A==="horizontal"||A==="both","fa-flip-vertical":A==="vertical"||A==="both"},iw(e,"fa-".concat(O),typeof O<"u"&&O!==null),iw(e,"fa-rotate-".concat(L),typeof L<"u"&&L!==null&&L!==0),iw(e,"fa-pull-".concat(B),typeof B<"u"&&B!==null),iw(e,"fa-swap-opacity",n.swapOpacity),e);return Object.keys(D).map(function(z){return D[z]?z:null}).filter(function(z){return z})}function GLe(n){return n=n-0,n===n}function Zee(n){return GLe(n)?n:(n=n.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),n.substr(0,1).toLowerCase()+n.substr(1))}var WLe=["style"];function VLe(n){return n.charAt(0).toUpperCase()+n.slice(1)}function jLe(n){return n.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var r=t.indexOf(":"),s=Zee(t.slice(0,r)),o=t.slice(r+1).trim();return s.startsWith("webkit")?e[VLe(s)]=o:e[s]=o,e},{})}function ete(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(h){return ete(n,h)}),s=Object.keys(e.attributes||{}).reduce(function(h,f){var g=e.attributes[f];switch(f){case"class":h.attrs.className=g,delete e.attributes.class;break;case"style":h.attrs.style=jLe(g);break;default:f.indexOf("aria-")===0||f.indexOf("data-")===0?h.attrs[f.toLowerCase()]=g:h.attrs[Zee(f)]=g}return h},{attrs:{}}),o=t.style,l=o===void 0?{}:o,u=Qee(t,WLe);return s.attrs.style=$y($y({},s.attrs.style),l),n.apply(void 0,[e.tag,$y($y({},s.attrs),u)].concat(aB(r)))}var tte=!1;try{tte=!0}catch{}function YLe(){if(!tte&&console&&typeof console.error=="function"){var n;(n=console).error.apply(n,arguments)}}function O9(n){if(n&&OR(n)==="object"&&n.prefix&&n.iconName&&n.icon)return n;if(oB.icon)return oB.icon(n);if(n===null)return null;if(n&&OR(n)==="object"&&n.prefix&&n.iconName)return n;if(Array.isArray(n)&&n.length===2)return{prefix:n[0],iconName:n[1]};if(typeof n=="string")return{prefix:"fas",iconName:n}}function AN(n,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?iw({},n,e):{}}var XLe=["forwardedRef"];function m_(n){var e=n.forwardedRef,t=Qee(n,XLe),r=t.icon,s=t.mask,o=t.symbol,l=t.className,u=t.title,h=t.titleId,f=t.maskId,g=O9(r),y=AN("classes",[].concat(aB(HLe(t)),aB(l.split(" ")))),b=AN("transform",typeof t.transform=="string"?oB.transform(t.transform):t.transform),S=AN("mask",O9(s)),C=DLe(g,$y($y($y($y({},y),b),S),{},{symbol:o,title:u,titleId:h,maskId:f}));if(!C)return YLe("Could not find icon",g),null;var M=C.abstract,A={ref:e};return Object.keys(t).forEach(function(O){m_.defaultProps.hasOwnProperty(O)||(A[O]=t[O])}),KLe(M[0],A)}m_.displayName="FontAwesomeIcon";m_.propTypes={beat:qt.bool,border:qt.bool,beatFade:qt.bool,bounce:qt.bool,className:qt.string,fade:qt.bool,flash:qt.bool,mask:qt.oneOfType([qt.object,qt.array,qt.string]),maskId:qt.string,fixedWidth:qt.bool,inverse:qt.bool,flip:qt.oneOf([!0,!1,"horizontal","vertical","both"]),icon:qt.oneOfType([qt.object,qt.array,qt.string]),listItem:qt.bool,pull:qt.oneOf(["right","left"]),pulse:qt.bool,rotation:qt.oneOf([0,90,180,270]),shake:qt.bool,size:qt.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:qt.bool,spinPulse:qt.bool,spinReverse:qt.bool,symbol:qt.oneOfType([qt.bool,qt.string]),title:qt.string,titleId:qt.string,transform:qt.oneOfType([qt.string,qt.object]),swapOpacity:qt.bool};m_.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var KLe=ete.bind(null,yt.createElement),nte={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="arrow-up",r=448,s=512,o=[],l="f062",u="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faArrowUp=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(nte);var rte={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="arrow-right",r=448,s=512,o=[],l="f061",u="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faArrowRight=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(rte);var ite={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="arrow-down",r=448,s=512,o=[],l="f063",u="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faArrowDown=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(ite);var ste={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="arrow-left",r=448,s=512,o=[],l="f060",u="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faArrowLeft=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(ste);var JLe=["className","direction","children"];function uB(){return uB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uB.apply(this,arguments)}function qLe(n,e){if(n==null)return{};var t=QLe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function QLe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var ZLe=function(e){var t=e.className,r=t===void 0?"":t,s=e.direction,o=s===void 0?"right":s,l=e.children,u=qLe(e,JLe),h="".concat(li,"-button--arrow"),f=function(){if(o==="up")return nte.faArrowUp;if(o==="right")return rte.faArrowRight;if(o==="down")return ite.faArrowDown;if(o==="left")return ste.faArrowLeft}();return yt.createElement(j4,uB({},u,{className:Ps(h,r),icon:yt.createElement(m_,{icon:f})}),l)},ote={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="ellipsis-v",r=192,s=512,o=[],l="f142",u="M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faEllipsisV=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(ote);var ate={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="paper-plane",r=512,s=512,o=[],l="f1d8",u="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faPaperPlane=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(ate);var eNe=["className","children"];function cB(){return cB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cB.apply(this,arguments)}function tNe(n,e){if(n==null)return{};var t=nNe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function nNe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var rNe=function(e){var t=e.className,r=t===void 0?"":t,s=e.children,o=tNe(e,eNe),l="".concat(li,"-button--send");return yt.createElement(j4,cB({},o,{className:Ps(l,r),icon:yt.createElement(m_,{icon:ate.faPaperPlane})}),s)},lte={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="paperclip",r=448,s=512,o=[],l="f0c6",u="M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faPaperclip=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(lte);var iNe=["className","children"];function hB(){return hB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hB.apply(this,arguments)}function sNe(n,e){if(n==null)return{};var t=oNe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function oNe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var aNe=function(e){var t=e.className,r=t===void 0?"":t,s=e.children,o=sNe(e,iNe),l="".concat(li,"-button--attachment");return yt.createElement(j4,hB({},o,{className:Ps(l,r),icon:yt.createElement(m_,{icon:lte.faPaperclip})}),s)},lNe=["onClick","children","className"];function dB(){return dB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},dB.apply(this,arguments)}function uNe(n,e){if(n==null)return{};var t=cNe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function cNe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Q4=function(e){var t=e.onClick,r=t===void 0?function(){}:t,s=e.children,o=s===void 0?void 0:s,l=e.className,u=uNe(e,lNe),h="".concat(li,"-conversation-header__back");return yt.createElement("div",dB({},u,{className:Ps(h,l)}),typeof o<"u"?o:yt.createElement(ZLe,{direction:"left",onClick:r}))};Q4.displayName="ConversationHeader.Back";var hNe=["children","className"];function fB(){return fB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fB.apply(this,arguments)}function dNe(n,e){if(n==null)return{};var t=fNe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function fNe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Z4=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=dNe(e,hNe),l="".concat(li,"-conversation-header__actions");return yt.createElement("section",fB({},o,{className:Ps(l,s)}),r)};Z4.displayName="ConversationHeader.Actions";var pNe=["userName","info","children","className"];function pB(){return pB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pB.apply(this,arguments)}function mNe(n,e){if(n==null)return{};var t=gNe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function gNe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var ez=function(e){var t=e.userName,r=t===void 0?"":t,s=e.info,o=s===void 0?"":s,l=e.children,u=l===void 0?void 0:l,h=e.className,f=mNe(e,pNe),g="".concat(li,"-conversation-header__content");return yt.createElement("div",pB({},f,{className:Ps(g,h)}),typeof u<"u"?u:yt.createElement(yt.Fragment,null,yt.createElement("div",{className:"".concat(li,"-conversation-header__user-name")},r),yt.createElement("div",{className:"".concat(li,"-conversation-header__info")},o)))};ez.displayName="ConversationHeader.Content";var _Ne=["children","className"];function mB(){return mB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},mB.apply(this,arguments)}function vNe(n,e){return SNe(n)||TNe(n,e)||bNe(n,e)||yNe()}function yNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bNe(n,e){if(n){if(typeof n=="string")return L9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return L9(n,e)}}function L9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function TNe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function SNe(n){if(Array.isArray(n))return n}function wNe(n,e){if(n==null)return{};var t=ENe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ENe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var WC=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=wNe(e,_Ne),l="".concat(li,"-conversation-header"),u=GC(r,[Q4,HC,Ree,ez,Z4]),h=vNe(u,5),f=h[0],g=h[1],y=h[2],b=h[3],S=h[4];return yt.createElement("div",mB({},o,{className:Ps(l,s)}),f,g&&yt.createElement("div",{className:"".concat(l,"__avatar")},g),!g&&y&&yt.createElement("div",{className:"".concat(l,"__avatar")},y),b,S)};WC.displayName="ConversationHeader";WC.Back=Q4;WC.Actions=Z4;WC.Content=ez;/*!
 * perfect-scrollbar v1.5.0
 * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function s_(n){return getComputedStyle(n)}function Wp(n,e){for(var t in e){var r=e[t];typeof r=="number"&&(r=r+"px"),n.style[t]=r}return n}function VA(n){var e=document.createElement("div");return e.className=n,e}var N9=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function Cy(n,e){if(!N9)throw new Error("No element matching method supported");return N9.call(n,e)}function sw(n){n.remove?n.remove():n.parentNode&&n.parentNode.removeChild(n)}function D9(n,e){return Array.prototype.filter.call(n.children,function(t){return Cy(t,e)})}var Lh={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},ute={x:null,y:null};function cte(n,e){var t=n.element.classList,r=Lh.state.scrolling(e);t.contains(r)?clearTimeout(ute[e]):t.add(r)}function hte(n,e){ute[e]=setTimeout(function(){return n.isAlive&&n.element.classList.remove(Lh.state.scrolling(e))},n.settings.scrollingThreshold)}function xNe(n,e){cte(n,e),hte(n,e)}var VC=function(e){this.element=e,this.handlers={}},dte={isEmpty:{configurable:!0}};VC.prototype.bind=function(e,t){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(t);var r=["touchstart","wheel","touchmove"];r.indexOf(e)!==-1?this.element.addEventListener(e,t,{passive:!1}):this.element.addEventListener(e,t,!1)};VC.prototype.unbind=function(e,t){var r=this;this.handlers[e]=this.handlers[e].filter(function(s){return t&&s!==t?!0:(r.element.removeEventListener(e,s,!1),!1)})};VC.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};dte.isEmpty.get=function(){var n=this;return Object.keys(this.handlers).every(function(e){return n.handlers[e].length===0})};Object.defineProperties(VC.prototype,dte);var bE=function(){this.eventElements=[]};bE.prototype.eventElement=function(e){var t=this.eventElements.filter(function(r){return r.element===e})[0];return t||(t=new VC(e),this.eventElements.push(t)),t};bE.prototype.bind=function(e,t,r){this.eventElement(e).bind(t,r)};bE.prototype.unbind=function(e,t,r){var s=this.eventElement(e);s.unbind(t,r),s.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(s),1)};bE.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};bE.prototype.once=function(e,t,r){var s=this.eventElement(e),o=function l(u){s.unbind(t,l),r(u)};s.bind(t,o)};function jA(n){if(typeof window.CustomEvent=="function")return new CustomEvent(n);var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,!1,!1,void 0),e}function LR(n,e,t,r,s,o){r===void 0&&(r=!0),s===void 0&&(s=!1);var l;if(e==="top")l=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")l=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");$Ne(n,t,l,r,s,o)}function $Ne(n,e,t,r,s,o){var l=t[0],u=t[1],h=t[2],f=t[3],g=t[4],y=t[5];r===void 0&&(r=!0),s===void 0&&(s=!1);var b=n.element;n.reach[f]=null;var S=o===!0?n[l]!==n[u]:!0;S&&b[h]<1&&(n.reach[f]="start"),S&&b[h]>n[l]-n[u]-1&&(n.reach[f]="end"),e&&(b.dispatchEvent(jA("ps-scroll-"+f)),e<0?b.dispatchEvent(jA("ps-scroll-"+g)):e>0&&b.dispatchEvent(jA("ps-scroll-"+y)),r&&xNe(n,f)),n.reach[f]&&(e||s)&&b.dispatchEvent(jA("ps-"+f+"-reach-"+n.reach[f]))}function ic(n){return parseInt(n,10)||0}function CNe(n){return Cy(n,"input,[contenteditable]")||Cy(n,"select,[contenteditable]")||Cy(n,"textarea,[contenteditable]")||Cy(n,"button,[contenteditable]")}function MNe(n){var e=s_(n);return ic(e.width)+ic(e.paddingLeft)+ic(e.paddingRight)+ic(e.borderLeftWidth)+ic(e.borderRightWidth)}var zx={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function Sv(n){var e=n.element,t=Math.floor(e.scrollTop),r=e.getBoundingClientRect();n.containerWidth=Math.round(r.width),n.containerHeight=Math.round(r.height),n.contentWidth=e.scrollWidth,n.contentHeight=e.scrollHeight,e.contains(n.scrollbarXRail)||(D9(e,Lh.element.rail("x")).forEach(function(s){return sw(s)}),e.appendChild(n.scrollbarXRail)),e.contains(n.scrollbarYRail)||(D9(e,Lh.element.rail("y")).forEach(function(s){return sw(s)}),e.appendChild(n.scrollbarYRail)),!n.settings.suppressScrollX&&n.containerWidth+n.settings.scrollXMarginOffset<n.contentWidth?(n.scrollbarXActive=!0,n.railXWidth=n.containerWidth-n.railXMarginWidth,n.railXRatio=n.containerWidth/n.railXWidth,n.scrollbarXWidth=P9(n,ic(n.railXWidth*n.containerWidth/n.contentWidth)),n.scrollbarXLeft=ic((n.negativeScrollAdjustment+e.scrollLeft)*(n.railXWidth-n.scrollbarXWidth)/(n.contentWidth-n.containerWidth))):n.scrollbarXActive=!1,!n.settings.suppressScrollY&&n.containerHeight+n.settings.scrollYMarginOffset<n.contentHeight?(n.scrollbarYActive=!0,n.railYHeight=n.containerHeight-n.railYMarginHeight,n.railYRatio=n.containerHeight/n.railYHeight,n.scrollbarYHeight=P9(n,ic(n.railYHeight*n.containerHeight/n.contentHeight)),n.scrollbarYTop=ic(t*(n.railYHeight-n.scrollbarYHeight)/(n.contentHeight-n.containerHeight))):n.scrollbarYActive=!1,n.scrollbarXLeft>=n.railXWidth-n.scrollbarXWidth&&(n.scrollbarXLeft=n.railXWidth-n.scrollbarXWidth),n.scrollbarYTop>=n.railYHeight-n.scrollbarYHeight&&(n.scrollbarYTop=n.railYHeight-n.scrollbarYHeight),ANe(e,n),n.scrollbarXActive?e.classList.add(Lh.state.active("x")):(e.classList.remove(Lh.state.active("x")),n.scrollbarXWidth=0,n.scrollbarXLeft=0,e.scrollLeft=n.isRtl===!0?n.contentWidth:0),n.scrollbarYActive?e.classList.add(Lh.state.active("y")):(e.classList.remove(Lh.state.active("y")),n.scrollbarYHeight=0,n.scrollbarYTop=0,e.scrollTop=0)}function P9(n,e){return n.settings.minScrollbarLength&&(e=Math.max(e,n.settings.minScrollbarLength)),n.settings.maxScrollbarLength&&(e=Math.min(e,n.settings.maxScrollbarLength)),e}function ANe(n,e){var t={width:e.railXWidth},r=Math.floor(n.scrollTop);e.isRtl?t.left=e.negativeScrollAdjustment+n.scrollLeft+e.containerWidth-e.contentWidth:t.left=n.scrollLeft,e.isScrollbarXUsingBottom?t.bottom=e.scrollbarXBottom-r:t.top=e.scrollbarXTop+r,Wp(e.scrollbarXRail,t);var s={top:r,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?s.right=e.contentWidth-(e.negativeScrollAdjustment+n.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:s.right=e.scrollbarYRight-n.scrollLeft:e.isRtl?s.left=e.negativeScrollAdjustment+n.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:s.left=e.scrollbarYLeft+n.scrollLeft,Wp(e.scrollbarYRail,s),Wp(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),Wp(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function INe(n){n.element,n.event.bind(n.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),n.event.bind(n.scrollbarYRail,"mousedown",function(e){var t=e.pageY-window.pageYOffset-n.scrollbarYRail.getBoundingClientRect().top,r=t>n.scrollbarYTop?1:-1;n.element.scrollTop+=r*n.containerHeight,Sv(n),e.stopPropagation()}),n.event.bind(n.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),n.event.bind(n.scrollbarXRail,"mousedown",function(e){var t=e.pageX-window.pageXOffset-n.scrollbarXRail.getBoundingClientRect().left,r=t>n.scrollbarXLeft?1:-1;n.element.scrollLeft+=r*n.containerWidth,Sv(n),e.stopPropagation()})}function RNe(n){B9(n,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),B9(n,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function B9(n,e){var t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8],y=n.element,b=null,S=null,C=null;function M(L){L.touches&&L.touches[0]&&(L[s]=L.touches[0].pageY),y[h]=b+C*(L[s]-S),cte(n,f),Sv(n),L.stopPropagation(),L.preventDefault()}function A(){hte(n,f),n[g].classList.remove(Lh.state.clicking),n.event.unbind(n.ownerDocument,"mousemove",M)}function O(L,B){b=y[h],B&&L.touches&&(L[s]=L.touches[0].pageY),S=L[s],C=(n[r]-n[t])/(n[o]-n[u]),B?n.event.bind(n.ownerDocument,"touchmove",M):(n.event.bind(n.ownerDocument,"mousemove",M),n.event.once(n.ownerDocument,"mouseup",A),L.preventDefault()),n[g].classList.add(Lh.state.clicking),L.stopPropagation()}n.event.bind(n[l],"mousedown",function(L){O(L)}),n.event.bind(n[l],"touchstart",function(L){O(L,!0)})}function kNe(n){var e=n.element,t=function(){return Cy(e,":hover")},r=function(){return Cy(n.scrollbarX,":focus")||Cy(n.scrollbarY,":focus")};function s(o,l){var u=Math.floor(e.scrollTop);if(o===0){if(!n.scrollbarYActive)return!1;if(u===0&&l>0||u>=n.contentHeight-n.containerHeight&&l<0)return!n.settings.wheelPropagation}var h=e.scrollLeft;if(l===0){if(!n.scrollbarXActive)return!1;if(h===0&&o<0||h>=n.contentWidth-n.containerWidth&&o>0)return!n.settings.wheelPropagation}return!0}n.event.bind(n.ownerDocument,"keydown",function(o){if(!(o.isDefaultPrevented&&o.isDefaultPrevented()||o.defaultPrevented)&&!(!t()&&!r())){var l=document.activeElement?document.activeElement:n.ownerDocument.activeElement;if(l){if(l.tagName==="IFRAME")l=l.contentDocument.activeElement;else for(;l.shadowRoot;)l=l.shadowRoot.activeElement;if(CNe(l))return}var u=0,h=0;switch(o.which){case 37:o.metaKey?u=-n.contentWidth:o.altKey?u=-n.containerWidth:u=-30;break;case 38:o.metaKey?h=n.contentHeight:o.altKey?h=n.containerHeight:h=30;break;case 39:o.metaKey?u=n.contentWidth:o.altKey?u=n.containerWidth:u=30;break;case 40:o.metaKey?h=-n.contentHeight:o.altKey?h=-n.containerHeight:h=-30;break;case 32:o.shiftKey?h=n.containerHeight:h=-n.containerHeight;break;case 33:h=n.containerHeight;break;case 34:h=-n.containerHeight;break;case 36:h=n.contentHeight;break;case 35:h=-n.contentHeight;break;default:return}n.settings.suppressScrollX&&u!==0||n.settings.suppressScrollY&&h!==0||(e.scrollTop-=h,e.scrollLeft+=u,Sv(n),s(u,h)&&o.preventDefault())}})}function ONe(n){var e=n.element;function t(l,u){var h=Math.floor(e.scrollTop),f=e.scrollTop===0,g=h+e.offsetHeight===e.scrollHeight,y=e.scrollLeft===0,b=e.scrollLeft+e.offsetWidth===e.scrollWidth,S;return Math.abs(u)>Math.abs(l)?S=f||g:S=y||b,S?!n.settings.wheelPropagation:!0}function r(l){var u=l.deltaX,h=-1*l.deltaY;return(typeof u>"u"||typeof h>"u")&&(u=-1*l.wheelDeltaX/6,h=l.wheelDeltaY/6),l.deltaMode&&l.deltaMode===1&&(u*=10,h*=10),u!==u&&h!==h&&(u=0,h=l.wheelDelta),l.shiftKey?[-h,-u]:[u,h]}function s(l,u,h){if(!zx.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(l))return!1;for(var f=l;f&&f!==e;){if(f.classList.contains(Lh.element.consuming))return!0;var g=s_(f);if(h&&g.overflowY.match(/(scroll|auto)/)){var y=f.scrollHeight-f.clientHeight;if(y>0&&(f.scrollTop>0&&h<0||f.scrollTop<y&&h>0))return!0}if(u&&g.overflowX.match(/(scroll|auto)/)){var b=f.scrollWidth-f.clientWidth;if(b>0&&(f.scrollLeft>0&&u<0||f.scrollLeft<b&&u>0))return!0}f=f.parentNode}return!1}function o(l){var u=r(l),h=u[0],f=u[1];if(!s(l.target,h,f)){var g=!1;n.settings.useBothWheelAxes?n.scrollbarYActive&&!n.scrollbarXActive?(f?e.scrollTop-=f*n.settings.wheelSpeed:e.scrollTop+=h*n.settings.wheelSpeed,g=!0):n.scrollbarXActive&&!n.scrollbarYActive&&(h?e.scrollLeft+=h*n.settings.wheelSpeed:e.scrollLeft-=f*n.settings.wheelSpeed,g=!0):(e.scrollTop-=f*n.settings.wheelSpeed,e.scrollLeft+=h*n.settings.wheelSpeed),Sv(n),g=g||t(h,f),g&&!l.ctrlKey&&(l.stopPropagation(),l.preventDefault())}}typeof window.onwheel<"u"?n.event.bind(e,"wheel",o):typeof window.onmousewheel<"u"&&n.event.bind(e,"mousewheel",o)}function LNe(n){if(!zx.supportsTouch&&!zx.supportsIePointer)return;var e=n.element;function t(C,M){var A=Math.floor(e.scrollTop),O=Math.ceil(e.scrollLeft),L=Math.abs(C),B=Math.abs(M);if(!n.settings.wheelPropagation)return!0;if(B>L){if(n.settings.suppressScrollY)return!1;if(M>0)return A!==0;if(M<0)return A<n.contentHeight-n.containerHeight}else if(L>B){if(n.settings.suppressScrollX)return!1;if(C>0)return O!==0;if(M<0)return O<n.contentWidth-n.containerWidth}return!0}function r(C,M){e.scrollTop-=M,e.scrollLeft-=C,Sv(n)}var s={},o=0,l={},u=null;function h(C){return C.targetTouches?C.targetTouches[0]:C}function f(C){return C.pointerType&&C.pointerType==="pen"&&C.buttons===0?!1:!!(C.targetTouches&&C.targetTouches.length===1||C.pointerType&&C.pointerType!=="mouse"&&C.pointerType!==C.MSPOINTER_TYPE_MOUSE)}function g(C){if(f(C)){var M=h(C);s.pageX=M.pageX,s.pageY=M.pageY,o=new Date().getTime(),u!==null&&clearInterval(u)}}function y(C,M,A){if(!e.contains(C))return!1;for(var O=C;O&&O!==e;){if(O.classList.contains(Lh.element.consuming))return!0;var L=s_(O);if(A&&L.overflowY.match(/(scroll|auto)/)){var B=O.scrollHeight-O.clientHeight;if(B>0&&(O.scrollTop>0&&A<0||O.scrollTop<B&&A>0))return!0}if(M&&L.overflowX.match(/(scroll|auto)/)){var D=O.scrollWidth-O.clientWidth;if(D>0&&(O.scrollLeft>0&&M<0||O.scrollLeft<D&&M>0))return!0}O=O.parentNode}return!1}function b(C){if(f(C)){var M=h(C),A={pageX:M.pageX,pageY:M.pageY},O=A.pageX-s.pageX,L=A.pageY-s.pageY;if(y(C.target,O,L))return;r(O,L),s=A;var B=new Date().getTime(),D=B-o;D>0&&(l.x=O/D,l.y=L/D,o=B),C.cancelable&&t(O,L)&&C.preventDefault()}}function S(){n.settings.swipeEasing&&(clearInterval(u),u=setInterval(function(){if(n.isInitialized){clearInterval(u);return}if(!l.x&&!l.y){clearInterval(u);return}if(Math.abs(l.x)<.01&&Math.abs(l.y)<.01){clearInterval(u);return}r(l.x*30,l.y*30),l.x*=.8,l.y*=.8},10))}zx.supportsTouch?(n.event.bind(e,"touchstart",g),n.event.bind(e,"touchmove",b),n.event.bind(e,"touchend",S)):zx.supportsIePointer&&(window.PointerEvent?(n.event.bind(e,"pointerdown",g),n.event.bind(e,"pointermove",b),n.event.bind(e,"pointerup",S)):window.MSPointerEvent&&(n.event.bind(e,"MSPointerDown",g),n.event.bind(e,"MSPointerMove",b),n.event.bind(e,"MSPointerUp",S)))}var NNe=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},DNe={"click-rail":INe,"drag-thumb":RNe,keyboard:kNe,wheel:ONe,touch:LNe},jC=function(e,t){var r=this;if(t===void 0&&(t={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(Lh.main),this.settings=NNe();for(var s in t)this.settings[s]=t[s];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var o=function(){return e.classList.add(Lh.state.focus)},l=function(){return e.classList.remove(Lh.state.focus)};this.isRtl=s_(e).direction==="rtl",this.isRtl===!0&&e.classList.add(Lh.rtl),this.isNegativeScroll=function(){var f=e.scrollLeft,g=null;return e.scrollLeft=-1,g=e.scrollLeft<0,e.scrollLeft=f,g}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new bE,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=VA(Lh.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=VA(Lh.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",o),this.event.bind(this.scrollbarX,"blur",l),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var u=s_(this.scrollbarXRail);this.scrollbarXBottom=parseInt(u.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=ic(u.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=ic(u.borderLeftWidth)+ic(u.borderRightWidth),Wp(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=ic(u.marginLeft)+ic(u.marginRight),Wp(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=VA(Lh.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=VA(Lh.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",o),this.event.bind(this.scrollbarY,"blur",l),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var h=s_(this.scrollbarYRail);this.scrollbarYRight=parseInt(h.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=ic(h.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?MNe(this.scrollbarY):null,this.railBorderYWidth=ic(h.borderTopWidth)+ic(h.borderBottomWidth),Wp(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=ic(h.marginTop)+ic(h.marginBottom),Wp(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(f){return DNe[f](r)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(f){return r.onScroll(f)}),Sv(this)};jC.prototype.update=function(e){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,Wp(this.scrollbarXRail,{display:"block"}),Wp(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=ic(s_(this.scrollbarXRail).marginLeft)+ic(s_(this.scrollbarXRail).marginRight),this.railYMarginHeight=ic(s_(this.scrollbarYRail).marginTop)+ic(s_(this.scrollbarYRail).marginBottom),Wp(this.scrollbarXRail,{display:"none"}),Wp(this.scrollbarYRail,{display:"none"}),Sv(this),LR(this,"top",0,!1,!0,e),LR(this,"left",0,!1,!0,e),Wp(this.scrollbarXRail,{display:""}),Wp(this.scrollbarYRail,{display:""}))};jC.prototype.onScroll=function(e){this.isAlive&&(Sv(this),LR(this,"top",this.element.scrollTop-this.lastScrollTop),LR(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};jC.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),sw(this.scrollbarX),sw(this.scrollbarY),sw(this.scrollbarXRail),sw(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};jC.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};function Jw(n){"@babel/helpers - typeof";return Jw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jw(n)}var PNe=["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"];function gB(){return gB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gB.apply(this,arguments)}function BNe(n,e){if(n==null)return{};var t=FNe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function FNe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function zNe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function F9(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,HNe(r.key),r)}}function UNe(n,e,t){return e&&F9(n.prototype,e),t&&F9(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function HNe(n){var e=GNe(n,"string");return Jw(e)=="symbol"?e:String(e)}function GNe(n,e){if(Jw(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Jw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function WNe(n,e,t){return e=NR(e),VNe(n,fte()?Reflect.construct(e,t||[],NR(n).constructor):e.apply(n,t))}function VNe(n,e){if(e&&(Jw(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pte(n)}function fte(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fte=function(){return!!n})()}function NR(n){return NR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},NR(n)}function pte(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function jNe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&_B(n,e)}function _B(n,e){return _B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},_B(n,e)}var RI={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(RI);var mte=function(n){jNe(e,n);function e(t){var r;return zNe(this,e),r=WNe(this,e,[t]),r.handleRef=r.handleRef.bind(pte(r)),r._handlerByEvent={},r}return UNe(e,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new jC(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(r){this._updateEventHook(r),this.updateScroll(),r.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var r=this;Object.keys(this._handlerByEvent).forEach(function(s){var o=r._handlerByEvent[s];o&&r._container.removeEventListener(s,o,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var r=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(RI).forEach(function(o){var l=r.props[RI[o]],u=s[RI[o]];if(l!==u){if(u){var h=r._handlerByEvent[o];r._container.removeEventListener(o,h,!1),r._handlerByEvent[o]=null}if(l){var f=function(){return l(r._container)};r._container.addEventListener(o,f,!1),r._handlerByEvent[o]=f}}})}},{key:"_updateClassName",value:function(){var r=this.props.className,s=this._container.className.split(" ").filter(function(o){return o.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container".concat(r?" ".concat(r):"").concat(s?" ".concat(s):""))}},{key:"updateScroll",value:function(){var r=this.props.onSync;typeof r=="function"?r(this._ps):this._ps.update()}},{key:"handleRef",value:function(r){var s,o;this._container=r,(s=(o=this.props).containerRef)===null||s===void 0||s.call(o,r)}},{key:"render",value:function(){var r=this.props;r.className;var s=r.style;r.option,r.options,r.containerRef,r.onScrollY,r.onScrollX,r.onScrollUp,r.onScrollDown,r.onScrollLeft,r.onScrollRight,r.onYReachStart,r.onYReachEnd,r.onXReachStart,r.onXReachEnd;var o=r.component;r.onSync;var l=r.children,u=BNe(r,PNe),h=typeof o>"u"?"div":o;return yt.createElement(h,gB({style:s,ref:this.handleRef},u),l)}}]),e}(pe.Component);function uC(n){"@babel/helpers - typeof";return uC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uC(n)}var YNe=["className","variant","children"];function vB(){return vB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vB.apply(this,arguments)}function XNe(n,e,t){return e=KNe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KNe(n){var e=JNe(n,"string");return uC(e)=="symbol"?e:String(e)}function JNe(n,e){if(uC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(uC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qNe(n,e){if(n==null)return{};var t=QNe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function QNe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var z9=function(e){var t=e.className,r=t===void 0?void 0:t,s=e.variant,o=s===void 0?"default":s,l=e.children,u=qNe(e,YNe),h="".concat(li,"-loader"),f=yt.Children.count(l)>0?"".concat(h,"--content"):"";return yt.createElement("div",vB({},u,{className:Ps(h,f,XNe({},"".concat(h,"--variant-").concat(o),o!=="default"),r),role:"status"}),l)};function cC(n){"@babel/helpers - typeof";return cC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cC(n)}var ZNe=["className","children","blur","grayscale"];function yB(){return yB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yB.apply(this,arguments)}function U9(n,e,t){return e=eDe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eDe(n){var e=tDe(n,"string");return cC(e)=="symbol"?e:String(e)}function tDe(n,e){if(cC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(cC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nDe(n,e){if(n==null)return{};var t=rDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function rDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var iDe=function(e){var t=e.className,r=t===void 0?"":t,s=e.children,o=s===void 0?void 0:s,l=e.blur,u=l===void 0?!1:l,h=e.grayscale,f=h===void 0?!1:h,g=nDe(e,ZNe),y="".concat(li,"-overlay"),b="".concat(y,"--blur"),S="".concat(y,"--grayscale");return yt.createElement("div",yB({},g,{className:Ps(y,U9({},b,u),U9({},S,f),r)}),yt.createElement("div",{className:"".concat(y,"__content")},o))},sDe=["sender","sentTime","children","className"];function bB(){return bB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bB.apply(this,arguments)}function oDe(n,e){if(n==null)return{};var t=aDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function aDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var tz=function(e){var t=e.sender,r=t===void 0?"":t,s=e.sentTime,o=s===void 0?"":s,l=e.children,u=l===void 0?void 0:l,h=e.className,f=oDe(e,sDe),g="".concat(li,"-message__header");return yt.createElement("div",bB({},f,{className:Ps(g,h)}),typeof u<"u"?u:yt.createElement(yt.Fragment,null,yt.createElement("div",{className:"".concat(li,"-message__sender-name")},r),yt.createElement("div",{className:"".concat(li,"-message__sent-time")},o)))};tz.displayName="Message.Header";var lDe=["sender","sentTime","children","className"];function TB(){return TB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},TB.apply(this,arguments)}function uDe(n,e){if(n==null)return{};var t=cDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function cDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var nz=function(e){var t=e.sender,r=t===void 0?"":t,s=e.sentTime,o=s===void 0?"":s,l=e.children,u=l===void 0?void 0:l,h=e.className,f=uDe(e,lDe),g="".concat(li,"-message__footer");return yt.createElement("div",TB({},f,{className:Ps(g,h)}),typeof u<"u"?u:yt.createElement(yt.Fragment,null,yt.createElement("div",{className:"".concat(li,"-message__sender-name")},r),yt.createElement("div",{className:"".concat(li,"-message__sent-time")},o)))};nz.displayName="Message.Footer";var rz=function(e){var t=e.children,r=e.className,s="".concat(li,"-message__custom-content");return yt.createElement("div",{className:Ps(s,r)},t)};rz.displayName="Message.CustomContent";var DR=function(e){var t=e.src,r=e.width,s=e.height,o=e.alt,l=e.className,u="".concat(li,"-message__image-content"),h={width:typeof r=="number"?"".concat(r,"px"):typeof r=="string"?r:void 0,height:typeof s=="number"?"".concat(s,"px"):typeof s=="string"?s:void 0};return yt.createElement("div",{className:Ps(u,l)},yt.createElement("img",{src:t,style:h,alt:o}))};DR.displayName="Message.ImageContent";var PR=function(e){var t=e.html,r=e.className,s="".concat(li,"-message__html-content"),o=function(){return{__html:t}};return yt.createElement("div",{className:Ps(s,r),dangerouslySetInnerHTML:o()})};PR.displayName="Message.HtmlContent";var BR=function(e){var t=e.text,r=e.className,s=e.children,o="".concat(li,"-message__text-content"),l=s??t;return yt.createElement("div",{className:Ps(o,r)},l)};BR.displayName="Message.TextContent";var hDe=["model","avatarSpacer","avatarPosition","type","payload","children","className"];function SB(){return SB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},SB.apply(this,arguments)}function H9(n,e,t){return e=dDe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dDe(n){var e=fDe(n,"string");return qw(e)=="symbol"?e:String(e)}function fDe(n,e){if(qw(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(qw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qw(n){"@babel/helpers - typeof";return qw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qw(n)}function pDe(n,e){return vDe(n)||_De(n,e)||gDe(n,e)||mDe()}function mDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gDe(n,e){if(n){if(typeof n=="string")return G9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return G9(n,e)}}function G9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function _De(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function vDe(n){if(Array.isArray(n))return n}function yDe(n,e){if(n==null)return{};var t=bDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function bDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var wv=function(e){var t,r,s=e.model,o=s.message,l=o===void 0?"":o,u=s.sentTime,h=u===void 0?"":u,f=s.sender,g=f===void 0?"":f,y=s.direction,b=y===void 0?1:y,S=s.position,C=s.type,M=s.payload,A=e.avatarSpacer,O=A===void 0?!1:A,L=e.avatarPosition,B=L===void 0?void 0:L,D=e.type,z=D===void 0?"html":D,U=e.payload,V=e.children,H=e.className,oe=yDe(e,hDe),le="".concat(li,"-message"),Z=GC(V,[HC,tz,nz,PR,BR,DR,rz]),q=pDe(Z,7),he=q[0],ae=q[1],ue=q[2],ge=q[3],we=q[4],J=q[5],re=q[6],ie=function(){if(b===0||b==="incoming")return"".concat(le,"--incoming");if(b===1||b==="outgoing")return"".concat(le,"--outgoing")}(),fe=function(Re){var Qe="".concat(le,"--avatar-");if(Re===0||Re==="top-left"||Re==="tl")return"".concat(Qe,"tl");if(Re===1||Re==="top-right"||Re==="tr")return"".concat(Qe,"tr");if(Re===2||Re==="bottom-right"||Re==="br")return"".concat(Qe,"br");if(Re===3||Re==="bottom-left"||Re==="bl")return"".concat(Qe,"bl");if(Re===4||Re==="center-left"||Re==="cl")return"".concat(Qe,"cl");if(Re===5||Re==="center-right"||Re==="cr")return"".concat(Qe,"cr")}(B),Te=function(Re){var Qe="".concat(li,"-message--");if(Re==="single"||Re===0)return"".concat(Qe,"single");if(Re==="first"||Re===1)return"".concat(Qe,"first");if(Re==="normal"||Re===2)return"";if(Re==="last"||Re===3)return"".concat(Qe,"last")}(S),Fe=function(){return(g==null?void 0:g.length)>0&&(h==null?void 0:h.length)>0?"".concat(g,": ").concat(h):(g==null?void 0:g.length)>0&&(typeof h>"u"||(h==null?void 0:h.length)===0)?g:null}(),Ie=(t=(r=ge??we)!==null&&r!==void 0?r:J)!==null&&t!==void 0?t:re,qe=Ie??function(){var Re=C??z,Qe=M??l,nt=Qe??U,ft=qw(nt)==="object"?Aee(nt):"";if(Re==="html"&&ft!=="Message.CustomContent")return yt.createElement(PR,{html:nt});if(Re==="text")return yt.createElement(BR,{text:nt});if(Re==="image")return yt.createElement(DR,nt);if(Re==="custom"||ft==="Message.CustomContent")return nt}();return yt.createElement("section",SB({},oe,{"aria-label":Fe,className:Ps(le,ie,H9({},"".concat(le,"--avatar-spacer"),O),Te,fe,H)},H9({},"data-".concat(li,"-message"),"")),typeof he<"u"&&yt.createElement("div",{className:"".concat(le,"__avatar")},he),yt.createElement("div",{className:"".concat(le,"__content-wrapper")},ae,yt.createElement("div",{className:"".concat(le,"__content")},qe),ue))};wv.Header=tz;wv.HtmlContent=PR;wv.TextContent=BR;wv.ImageContent=DR;wv.CustomContent=rz;wv.Footer=nz;var TDe=["children","className"];function wB(){return wB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wB.apply(this,arguments)}function SDe(n,e){if(n==null)return{};var t=wDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function wDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var iz=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=SDe(e,TDe),l="".concat(li,"-message-group__header");return yt.createElement("div",wB({},o,{className:Ps(l,s)}),r)};iz.displayName="MessageGroup.Header";var EDe=["children","className"];function EB(){return EB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},EB.apply(this,arguments)}function xDe(n,e){if(n==null)return{};var t=$De(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function $De(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var sz=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=xDe(e,EDe),l="".concat(li,"-message-group__footer");return yt.createElement("div",EB({},o,{className:Ps(l,s)}),r)};sz.displayName="MessageGroup.Footer";var CDe=["children","className"];function xB(){return xB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xB.apply(this,arguments)}function MDe(n,e){if(n==null)return{};var t=ADe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ADe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var oz=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=MDe(e,CDe),l="".concat(li,"-message-group");return yt.createElement("div",xB({},o,{className:Ps("".concat(l,"__messages"),s)}),r)};oz.displayName="MessageGroup.Messages";function hC(n){"@babel/helpers - typeof";return hC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hC(n)}var IDe=["direction","avatarPosition","sender","sentTime","children","className"];function $B(){return $B=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$B.apply(this,arguments)}function RDe(n,e,t){return e=kDe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kDe(n){var e=ODe(n,"string");return hC(e)=="symbol"?e:String(e)}function ODe(n,e){if(hC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(hC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function LDe(n,e){return BDe(n)||PDe(n,e)||DDe(n,e)||NDe()}function NDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DDe(n,e){if(n){if(typeof n=="string")return W9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return W9(n,e)}}function W9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function PDe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function BDe(n){if(Array.isArray(n))return n}function FDe(n,e){if(n==null)return{};var t=zDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function zDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var A2=function(e){var t=e.direction,r=t===void 0?"incoming":t,s=e.avatarPosition,o=s===void 0?void 0:s,l=e.sender,u=l===void 0?"":l,h=e.sentTime,f=h===void 0?"":h,g=e.children,y=e.className,b=FDe(e,IDe),S="".concat(li,"-message-group"),C=function(){if(r===0||r==="incoming")return"".concat(S,"--incoming");if(r===1||r==="outgoing")return"".concat(S,"--outgoing")}(),M=function(){var V="".concat(S,"--avatar-");if(typeof o=="string"&&(o==="tl"||o==="top-left"||o==="tr"||o==="top-right"||o==="bl"||o==="bottom-right"||o==="br"||o==="bottom-right"||o==="cl"||o==="center-left"||o==="cr"||o==="center-right"))return"".concat(V).concat(o)}(),A=GC(g,[HC,iz,sz,oz]),O=LDe(A,4),L=O[0],B=O[1],D=O[2],z=O[3],U=function(){return u.length>0&&f.length>0?"".concat(u,": ").concat(f):u.length>0&&f.length===0?u:null}();return yt.createElement("section",$B({"aria-label":U},b,{className:Ps(S,C,M,y)},RDe({},"data-".concat(li,"-message-group"),"")),typeof L<"u"&&yt.createElement("div",{className:"".concat(S,"__avatar")},L),yt.createElement("div",{className:"".concat(S,"__content")},B,z,D))};A2.Header=iz;A2.Footer=sz;A2.Messages=oz;var UDe=["content","as","children","className"];function CB(){return CB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},CB.apply(this,arguments)}function HDe(n,e){if(n==null)return{};var t=GDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function GDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var WDe=function(e){var t=e.content,r=t===void 0?void 0:t,s=e.as,o=s===void 0?"div":s,l=e.children,u=l===void 0?void 0:l,h=e.className,f=HDe(e,UDe),g="".concat(li,"-message-separator"),y=function(){return typeof o=="string"&&o.length>0?o:"div"}();return yt.createElement(y,CB({},f,{className:Ps(g,h)}),HOe(u)===!0?r:u)},VDe=["className","children"];function MB(){return MB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},MB.apply(this,arguments)}function jDe(n,e){if(n==null)return{};var t=YDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function YDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var I2=function(e){var t=e.className,r=e.children,s=jDe(e,VDe);return yt.createElement("div",MB({},s,{className:t}),r)};I2.displayName="MessageList.Content";var XDe=["children","typingIndicator","loading","loadingMore","loadingMorePosition","onYReachStart","onYReachEnd","className","disableOnYReachWhenNoScroll","scrollBehavior","autoScrollToBottom","autoScrollToBottomOnMount"];function Qw(n){"@babel/helpers - typeof";return Qw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qw(n)}function dC(){return dC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},dC.apply(this,arguments)}function KDe(n,e){return ZDe(n)||QDe(n,e)||qDe(n,e)||JDe()}function JDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qDe(n,e){if(n){if(typeof n=="string")return V9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return V9(n,e)}}function V9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function QDe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function ZDe(n){if(Array.isArray(n))return n}function ePe(n,e){if(n==null)return{};var t=tPe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function tPe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function nPe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function j9(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,_te(r.key),r)}}function rPe(n,e,t){return e&&j9(n.prototype,e),t&&j9(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function iPe(n,e,t){return e=FR(e),sPe(n,gte()?Reflect.construct(e,t||[],FR(n).constructor):e.apply(n,t))}function sPe(n,e){if(e&&(Qw(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BS(n)}function gte(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gte=function(){return!!n})()}function FR(n){return FR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},FR(n)}function BS(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function oPe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&AB(n,e)}function AB(n,e){return AB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},AB(n,e)}function r1(n,e,t){return e=_te(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _te(n){var e=aPe(n,"string");return Qw(e)=="symbol"?e:String(e)}function aPe(n,e){if(Qw(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Qw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var az=function(n){oPe(e,n);function e(t){var r;return nPe(this,e),r=iPe(this,e,[t]),r1(BS(r),"handleResize",function(){r.containerRef.current.clientHeight<r.lastClientHeight&&r.scrollToEnd(r.props.scrollBehavior),r.scrollRef.current.updateScroll()}),r1(BS(r),"handleContainerResize",function(){r.resizeTicking===!1&&(window.requestAnimationFrame(function(){var s=r.containerRef.current;if(s){var o=s.clientHeight,l=o-r.lastClientHeight;l>=1?r.preventScrollTop===!1&&(s.scrollTop=Math.round(s.scrollTop)-l):s.scrollTop=s.scrollTop-l,r.lastClientHeight=s.clientHeight,r.scrollRef.current.updateScroll()}r.resizeTicking=!1}),r.resizeTicking=!0)}),r1(BS(r),"isSticked",function(){var s=r.containerRef.current;return s.scrollHeight===Math.round(s.scrollTop+s.clientHeight)}),r1(BS(r),"handleScroll",function(){r.scrollTicking===!1&&(window.requestAnimationFrame(function(){r.noScroll===!1?r.preventScrollTop=r.isSticked():r.noScroll=!1,r.scrollTicking=!1}),r.scrollTicking=!0)}),r1(BS(r),"getLastMessageOrGroup",function(){var s=r.containerRef.current.querySelector("[data-".concat(li,"-message-list]>[data-").concat(li,"-message]:last-of-type,[data-").concat(li,"-message-list]>[data-").concat(li,"-message-group]:last-of-type")),o=s==null?void 0:s.querySelector("[data-".concat(li,"-message]:last-of-type"));return{lastElement:s,lastMessageInGroup:o}}),r.scrollPointRef=yt.createRef(),r.containerRef=yt.createRef(),r.scrollRef=yt.createRef(),r.lastClientHeight=0,r.preventScrollTop=!1,r.resizeObserver=void 0,r.scrollTicking=!1,r.resizeTicking=!1,r.noScroll=void 0,r}return rPe(e,[{key:"getSnapshotBeforeUpdate",value:function(){var r=this.containerRef.current,s=Math.round(r.scrollTop+r.clientHeight),o=r.scrollHeight===s||r.scrollHeight+1===s||r.scrollHeight-1===s;return{sticky:o,clientHeight:r.clientHeight,scrollHeight:r.scrollHeight,lastMessageOrGroup:this.getLastMessageOrGroup(),diff:r.scrollHeight-r.scrollTop}}},{key:"componentDidMount",value:function(){this.props.autoScrollToBottomOnMount===!0&&this.scrollToEnd(this.props.scrollBehavior),this.lastClientHeight=this.containerRef.current.clientHeight,window.addEventListener("resize",this.handleResize),typeof window.ResizeObserver=="function"&&(this.resizeObserver=new ResizeObserver(this.handleContainerResize),this.resizeObserver.observe(this.containerRef.current)),this.containerRef.current.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(r,s,o){var l=this.props.autoScrollToBottom;if(typeof o<"u"){var u=this.containerRef.current,h=this.getLastMessageOrGroup(),f=h.lastElement,g=h.lastMessageInGroup;if(f===o.lastMessageOrGroup.lastElement&&(typeof g>"u"||g===o.lastMessageOrGroup.lastMessageInGroup)&&(u.scrollTop=u.scrollHeight-o.diff+(this.lastClientHeight-u.clientHeight)),o.sticky===!0)l===!0&&this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0;else if(o.clientHeight<this.lastClientHeight){var y=u.scrollTop+this.lastClientHeight;u.scrollHeight===y||u.scrollHeight+1===y||u.scrollHeight-1===y?l===!0&&(this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0):this.preventScrollTop=!1}else this.preventScrollTop=!1,f===o.lastMessageOrGroup.lastElement&&(typeof g>"u"||g===o.lastMessageOrGroup.lastMessageInGroup)&&u.scrollTop===0&&u.scrollHeight>o.scrollHeight&&(u.scrollTop=u.scrollHeight-o.scrollHeight);this.lastClientHeight=o.clientHeight}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),typeof this.resizeObserver<"u"&&this.resizeObserver.disconnect(),this.containerRef.current.removeEventListener("scroll",this.handleScroll)}},{key:"scrollToEnd",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollBehavior,s=this.containerRef.current,o=this.scrollPointRef.current,l=s.getBoundingClientRect(),u=o.getBoundingClientRect(),h=u.top+s.scrollTop-l.top;s.scrollBy?s.scrollBy({top:h,behavior:r}):s.scrollTop=h,this.lastClientHeight=s.clientHeight,this.noScroll=!0}},{key:"render",value:function(){var r=this,s=this.props,o=s.children,l=s.typingIndicator,u=s.loading,h=s.loadingMore,f=s.loadingMorePosition,g=s.onYReachStart,y=s.onYReachEnd,b=s.className,S=s.disableOnYReachWhenNoScroll;s.scrollBehavior,s.autoScrollToBottom,s.autoScrollToBottomOnMount;var C=ePe(s,XDe),M="".concat(li,"-message-list"),A=GC(o,[I2]),O=KDe(A,1),L=O[0];return yt.createElement("div",dC({},C,{className:Ps(M,b)}),h&&yt.createElement("div",{className:Ps("".concat(M,"__loading-more"),r1({},"".concat(M,"__loading-more--bottom"),f==="bottom"))},yt.createElement(z9,null)),u&&yt.createElement(iDe,null,yt.createElement(z9,null)),yt.createElement(mte,dC({onYReachStart:g,onYReachEnd:y,onSync:function(D){return D.update(S)},className:"".concat(M,"__scroll-wrapper"),ref:this.scrollRef,containerRef:function(D){return r.containerRef.current=D},options:{suppressScrollX:!0}},r1({},"data-".concat(li,"-message-list"),""),{style:{overscrollBehaviorY:"none",overflowAnchor:"auto",touchAction:"none"}}),L||o,yt.createElement("div",{className:"".concat(M,"__scroll-to"),ref:this.scrollPointRef})),typeof l<"u"&&yt.createElement("div",{className:"".concat(M,"__typing-indicator-container")},l))}}]),e}(yt.Component);az.displayName="MessageList";function lPe(n,e){var t=pe.useRef(),r=function(o){return t.current.scrollToEnd(o)};return pe.useImperativeHandle(e,function(){return{scrollToBottom:r}}),yt.createElement(az,dC({ref:t},n))}var TE=pe.forwardRef(lPe);TE.propTypes={children:Iee([wv,A2,WDe,I2]),typingIndicator:qt.node,loading:qt.bool,loadingMore:qt.bool,loadingMorePosition:qt.oneOf(["top","bottom"]),onYReachStart:qt.func,onYReachEnd:qt.func,disableOnYReachWhenNoScroll:qt.bool,autoScrollToBottom:qt.bool,autoScrollToBottomOnMount:qt.bool,scrollBehavior:qt.oneOf(["auto","smooth"]),className:qt.string};TE.defaultProps={typingIndicator:void 0,loading:!1,loadingMore:!1,loadingMorePosition:"top",disableOnYReachWhenNoScroll:!1,autoScrollToBottom:!0,autoScrollToBottomOnMount:!0,scrollBehavior:"auto"};az.defaultProps=TE.defaultProps;TE.Content=I2;function Zw(n){"@babel/helpers - typeof";return Zw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zw(n)}function uPe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Y9(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,yte(r.key),r)}}function cPe(n,e,t){return e&&Y9(n.prototype,e),t&&Y9(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function hPe(n,e,t){return e=zR(e),dPe(n,vte()?Reflect.construct(e,t||[],zR(n).constructor):e.apply(n,t))}function dPe(n,e){if(e&&(Zw(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f1(n)}function vte(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vte=function(){return!!n})()}function zR(n){return zR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zR(n)}function f1(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function fPe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&IB(n,e)}function IB(n,e){return IB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},IB(n,e)}function IN(n,e,t){return e=yte(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yte(n){var e=pPe(n,"string");return Zw(e)=="symbol"?e:String(e)}function pPe(n,e){if(Zw(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Zw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var mPe=function(e,t){var r=document.activeElement===e,s=document.createTextNode("");if(e.appendChild(s),s!==null&&s.nodeValue!==null&&(r||t)){var o=window.getSelection();if(o!==null){var l=document.createRange();l.setStart(s,s.nodeValue.length),l.collapse(!0),o.removeAllRanges(),o.addRange(l)}}},gPe=function(n){fPe(e,n);function e(t){var r;return uPe(this,e),r=hPe(this,e,[t]),IN(f1(r),"innerHTML",function(){var s=f1(r),o=s.props.value;return{__html:typeof o<"u"?o:""}}),IN(f1(r),"handleKeyPress",function(s){var o=f1(r),l=o.props.onKeyPress;l==null||l(s)}),IN(f1(r),"handleInput",function(s){var o=f1(r),l=o.props.onChange,u=s.target;l==null||l(u.innerHTML,u.textContent,u.innerText)}),r.msgRef=yt.createRef(),r}return cPe(e,[{key:"focus",value:function(){typeof this.msgRef.current<"u"&&this.msgRef.current.focus()}},{key:"componentDidMount",value:function(){this.props.autoFocus===!0&&this.msgRef.current.focus()}},{key:"shouldComponentUpdate",value:function(r){var s=this.msgRef,o=this.props,l=o.placeholder,u=o.disabled,h=o.activateAfterChange;return typeof s.current>"u"||r.value!==s.current.innerHTML?!0:l!==r.placeholder||u!==r.disabled||h!==r.activateAfterChange}},{key:"componentDidUpdate",value:function(){var r=this.msgRef,s=this.props,o=s.value,l=s.activateAfterChange;o!==r.current.innerHTML&&(r.current.innerHTML=typeof o=="string"?o:""),mPe(r.current,l)}},{key:"render",value:function(){var r=this.msgRef,s=this.handleInput,o=this.handleKeyPress,l=this.innerHTML,u=this.props,h=u.placeholder,f=u.disabled,g=u.className,y=typeof h=="string"?h:"";return yt.createElement("div",{ref:r,className:g,contentEditable:f===!1,disabled:f,"data-placeholder":y,onInput:s,onKeyPress:o,dangerouslySetInnerHTML:l()})}}]),e}(pe.Component);function eE(n){"@babel/helpers - typeof";return eE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eE(n)}var _Pe=["fancyScroll","children","forwardedRef"],vPe=["value","onSend","onChange","autoFocus","placeholder","fancyScroll","className","activateAfterChange","disabled","sendDisabled","sendOnReturnDisabled","attachDisabled","sendButton","attachButton","onAttachClick"];function yPe(n,e,t){return e=Tte(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RB(n,e){return wPe(n)||SPe(n,e)||TPe(n,e)||bPe()}function bPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TPe(n,e){if(n){if(typeof n=="string")return X9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return X9(n,e)}}function X9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function SPe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function wPe(n){if(Array.isArray(n))return n}function yw(){return yw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yw.apply(this,arguments)}function bte(n,e){if(n==null)return{};var t=EPe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function EPe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function xPe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function K9(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Tte(r.key),r)}}function $Pe(n,e,t){return e&&K9(n.prototype,e),t&&K9(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Tte(n){var e=CPe(n,"string");return eE(e)=="symbol"?e:String(e)}function CPe(n,e){if(eE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(eE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function MPe(n,e,t){return e=UR(e),APe(n,Ste()?Reflect.construct(e,t||[],UR(n).constructor):e.apply(n,t))}function APe(n,e){if(e&&(eE(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IPe(n)}function IPe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ste(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ste=function(){return!!n})()}function UR(n){return UR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},UR(n)}function RPe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&kB(n,e)}function kB(n,e){return kB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},kB(n,e)}function kPe(){var n=function(e){RPe(t,e);function t(){return xPe(this,t),MPe(this,t,arguments)}return $Pe(t,[{key:"render",value:function(){var s=this.props,o=s.fancyScroll,l=s.children,u=s.forwardedRef,h=bte(s,_Pe);return yt.createElement(yt.Fragment,null,o===!0&&yt.createElement(mte,yw({ref:function(g){return u.current=g}},h,{options:{suppressScrollX:!0}}),l),o===!1&&yt.createElement("div",yw({ref:u},h),l))}}]),t}(pe.Component);return yt.forwardRef(function(e,t){return yt.createElement(n,yw({forwardedRef:t},e))})}var OPe=kPe(),J9=function(e,t){var r=typeof e<"u"?e:t,s=pe.useState(r),o=RB(s,2),l=o[0],u=o[1],h=typeof e<"u"?e:l;return[h,function(f){u(f)}]};function LPe(n,e){var t=n.value,r=t===void 0?void 0:t,s=n.onSend,o=s===void 0?II:s,l=n.onChange,u=l===void 0?II:l,h=n.autoFocus,f=h===void 0?!1:h,g=n.placeholder,y=g===void 0?"":g,b=n.fancyScroll,S=b===void 0?!0:b,C=n.className,M=n.activateAfterChange,A=M===void 0?!1:M,O=n.disabled,L=O===void 0?!1:O,B=n.sendDisabled,D=n.sendOnReturnDisabled,z=D===void 0?!1:D,U=n.attachDisabled,V=U===void 0?!1:U,H=n.sendButton,oe=H===void 0?!0:H,le=n.attachButton,Z=le===void 0?!0:le,q=n.onAttachClick,he=q===void 0?II:q,ae=bte(n,vPe),ue=pe.useRef(),ge=pe.useRef(),we=J9(r,""),J=RB(we,2),re=J[0],ie=J[1],fe=J9(B,!0),Te=RB(fe,2),Fe=Te[0],Ie=Te[1],qe=function(){typeof ge.current<"u"&&ge.current.focus()};pe.useImperativeHandle(e,function(){return{focus:qe}}),pe.useEffect(function(){f===!0&&qe()},[]),pe.useEffect(function(){typeof ue.current.updateScroll=="function"&&ue.current.updateScroll()});var Re=function(){var He=ge.current.msgRef.current;return[He.textContent,He.innerText,He.cloneNode(!0).childNodes]},Qe=function(){if(re.length>0){r===void 0&&ie(""),typeof B>"u"&&Ie(!0);var He=Re();o(re,He[0],He[1],He[2])}},nt=function(He){He.key==="Enter"&&He.shiftKey===!1&&z===!1&&(He.preventDefault(),Qe())},ft=function(He,rt,it){ie(He),typeof B>"u"&&Ie(rt.length===0),typeof ue.current.updateScroll=="function"&&ue.current.updateScroll();var Nt=Re();u(He,rt,it,Nt[2])},lt="".concat(li,"-message-input"),ze=typeof y=="string"?y:"";return yt.createElement("div",yw({},ae,{className:Ps(lt,yPe({},"".concat(lt,"--disabled"),L),C)}),Z===!0&&yt.createElement("div",{className:"".concat(lt,"__tools")},yt.createElement(aNe,{onClick:he,disabled:L===!0||V===!0})),yt.createElement("div",{className:"".concat(lt,"__content-editor-wrapper")},yt.createElement(OPe,{fancyScroll:S,ref:ue,className:"".concat(lt,"__content-editor-container")},yt.createElement(gPe,{ref:ge,className:"".concat(lt,"__content-editor"),disabled:L,placeholder:ze,onKeyPress:nt,onChange:ft,activateAfterChange:A,value:re}))),oe===!0&&yt.createElement("div",{className:"".concat(lt,"__tools")},yt.createElement(rNe,{onClick:Qe,disabled:L===!0||Fe===!0})))}var R2=pe.forwardRef(LPe);R2.displayName="MessageInput";R2.propTypes={value:qt.string,placeholder:qt.string,disabled:qt.bool,sendOnReturnDisabled:qt.bool,sendDisabled:qt.bool,fancyScroll:qt.bool,activateAfterChange:qt.bool,autoFocus:qt.bool,onChange:qt.func,onSend:qt.func,className:qt.string,sendButton:qt.bool,attachButton:qt.bool,attachDisabled:qt.bool,onAttachClick:qt.func};var NPe=["className","children"];function OB(){return OB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},OB.apply(this,arguments)}function DPe(n,e){if(n==null)return{};var t=PPe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function PPe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var wte=function(e){var t=e.className,r=e.children,s=DPe(e,NPe),o="".concat(li,"-input-toolbox");return yt.createElement("div",OB({},s,{className:Ps(o,t)}),r)};wte.displayName="InputToolbox";var BPe=["children","className"];function LB(){return LB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},LB.apply(this,arguments)}function FPe(n,e){return GPe(n)||HPe(n,e)||UPe(n,e)||zPe()}function zPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UPe(n,e){if(n){if(typeof n=="string")return q9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return q9(n,e)}}function q9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function HPe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function GPe(n){if(Array.isArray(n))return n}function WPe(n,e){if(n==null)return{};var t=VPe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function VPe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var jPe=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=WPe(e,BPe),l="".concat(li,"-chat-container"),u=GC(r,[WC,TE,R2,wte]),h=FPe(u,4),f=h[0],g=h[1],y=h[2],b=h[3];return yt.createElement("div",LB({},o,{className:Ps(l,s)}),f,g,y,b)},G1="".concat(li,"-conversation");function fC(n){"@babel/helpers - typeof";return fC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fC(n)}var YPe=["children","className","visible"];function NB(){return NB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NB.apply(this,arguments)}function XPe(n,e,t){return e=KPe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KPe(n){var e=JPe(n,"string");return fC(e)=="symbol"?e:String(e)}function JPe(n,e){if(fC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(fC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qPe(n,e){if(n==null)return{};var t=QPe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function QPe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var ZPe=function(e){var t=e.children,r=e.className,s=e.visible,o=qPe(e,YPe);return yt.createElement("div",NB({},o,{className:Ps("".concat(G1,"__operations"),XPe({},"".concat(G1,"__operations--visible"),s),r)}),yt.Children.count(t)>0?t:yt.createElement(m_,{icon:ote.faEllipsisV}))};ZPe.displayName="Conversation.Operations";var eBe=["lastSenderName","info","name","children","className"];function DB(){return DB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},DB.apply(this,arguments)}function PB(n){"@babel/helpers - typeof";return PB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PB(n)}function tBe(n,e){if(n==null)return{};var t=nBe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function nBe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var rBe=function(e){var t=e.name;return yt.createElement(yt.Fragment,null,yt.createElement("div",{className:"".concat(G1,"__last-sender")},t),":")},iBe=function(e){var t=e.info;return yt.createElement("div",{className:"".concat(G1,"__info-content")},t)},sBe=function(e){var t=e.lastSenderName,r=e.info,s=e.name,o=e.children,l=e.className,u=tBe(e,eBe),h=PB(t);return yt.createElement("div",DB({},u,{className:Ps("".concat(G1,"__content"),l)}),yt.Children.count(o)>0?o:yt.createElement(yt.Fragment,null,yt.createElement("div",{className:"".concat(G1,"__name")},s),yt.createElement("div",{className:"".concat(G1,"__info")},h!=="undefined"?yt.createElement(yt.Fragment,null,h==="string"?yt.createElement(rBe,{name:t}):t," "):null,typeof r<"u"&&yt.createElement(iBe,{info:r}))))};sBe.displayName="Conversation.Content";/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var oBe={prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},aBe={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]};function pC(n){"@babel/helpers - typeof";return pC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pC(n)}var lBe=["placeholder","value","onChange","onClearClick","className","disabled"];function BB(){return BB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},BB.apply(this,arguments)}function Q9(n,e,t){return e=uBe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uBe(n){var e=cBe(n,"string");return pC(e)=="symbol"?e:String(e)}function cBe(n,e){if(pC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(pC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Z9(n,e){return pBe(n)||fBe(n,e)||dBe(n,e)||hBe()}function hBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dBe(n,e){if(n){if(typeof n=="string")return e8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return e8(n,e)}}function e8(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function fBe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function pBe(n){if(Array.isArray(n))return n}function mBe(n,e){if(n==null)return{};var t=gBe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function gBe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var _Be=function(e,t){return typeof t>"u"?pe.useState(e):[t,function(){}]};function vBe(n,e){var t=n.placeholder,r=t===void 0?"":t,s=n.value,o=s===void 0?void 0:s,l=n.onChange,u=l===void 0?function(){}:l,h=n.onClearClick,f=h===void 0?function(){}:h,g=n.className,y=n.disabled,b=y===void 0?!1:y,S=mBe(n,lBe),C="".concat(li,"-search"),M=pe.useMemo(function(){return typeof o<"u"},[]),A=_Be("",o),O=Z9(A,2),L=O[0],B=O[1],D=pe.useState(M?L.length>0:!1),z=Z9(D,2),U=z[0],V=z[1];if(M!==typeof o<"u")throw"Search: Changing from controlled to uncontrolled component and vice versa is not allowed";var H=pe.useRef(void 0),oe=function(){typeof H.current<"u"&&H.current.focus()};pe.useImperativeHandle(e,function(){return{focus:oe}});var le=function(he){var ae=he.target.value;V(ae.length>0),M===!1&&B(ae),u(ae)},Z=function(){M===!1&&B(""),V(!1),f()};return yt.createElement("div",BB({},S,{className:Ps(C,Q9({},"".concat(C,"--disabled"),b),g)}),yt.createElement(m_,{icon:oBe,className:"".concat(C,"__search-icon")}),yt.createElement("input",{ref:H,type:"text",className:"".concat(C,"__input"),placeholder:r,onChange:le,disabled:b,value:L}),yt.createElement(m_,{icon:aBe,className:Ps("".concat(C,"__clear-icon"),Q9({},"".concat(C,"__clear-icon--active"),U)),onClick:Z}))}var Ete=pe.forwardRef(vBe);Ete.displayName="Search";Ete.propTypes={placeholder:qt.string,value:qt.string,onChange:qt.func,onClearClick:qt.func,className:qt.string,disabled:qt.bool};function mC(n){"@babel/helpers - typeof";return mC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mC(n)}var yBe=["className","children","size","selected","onChange","itemsTabIndex"];function FB(){return FB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},FB.apply(this,arguments)}function bBe(n,e,t){return e=TBe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function TBe(n){var e=SBe(n,"string");return mC(e)=="symbol"?e:String(e)}function SBe(n,e){if(mC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(mC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function wBe(n,e){if(n==null)return{};var t=EBe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function EBe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function xBe(n,e){var t=n.className,r=n.children,s=n.size,o=n.selected,l=n.onChange,u=l===void 0?II:l,h=n.itemsTabIndex,f=wBe(n,yBe),g="".concat(li,"-status-list"),y=pe.useRef();pe.useImperativeHandle(e,function(){return{focus:function(C){var M=Array.from(y.current.querySelectorAll("li")),A=M.filter(function(O){return O.parentNode===y.current});typeof A[C]<"u"&&A[C].focus()}}});var b=h;return yt.createElement("ul",FB({ref:y},f,{className:Ps(g,t,bBe({},"".concat(g,"--").concat(s),s))}),yt.Children.map(r,function(S){var C={};o&&(C.selected=S.props.status===o),u&&(C.onClick=function(O){u(S.props.status),S.onClick&&S.onClick(O)});var M=function(L){u&&L.key==="Enter"&&L.shiftKey===!1&&L.altKey===!1&&u(S.props.status)},A=function(){if(typeof b=="number")return b>0?b++:b}();return yt.createElement("li",{tabIndex:A,onKeyPress:M},yt.cloneElement(S,C))}))}var xte=pe.forwardRef(xBe);xte.displayName="StatusList";xte.propTypes={children:Iee([Mee]),selected:qt.oneOf($ee),size:qt.oneOf(Cee),itemsTabIndex:qt.number,className:qt.string,onChange:qt.func};const $te=n=>n.includes("[Need Help]")?"Please help me.":n.replaceAll("<Suggestion>","").replaceAll("</Suggestion>",""),$Be=n=>{let e=[],t=n.split("<Suggestion>"),r=$te(t.shift()).trim();return t.forEach(s=>{if(s.includes("</Suggestion>")){let o=s.split("</Suggestion>");e.push(o[0].trim()),o[1].length>0&&r.concat(" ",o[1].trim())}else r.concat(" ",s.trim())}),[r,e]};function CBe(n){let e=Hn(rs(o=>o.chatMessageHistory)),t=Hn(rs(o=>o.addMessageToHistory)),r=e.length,s=$Be(e[r-1].content);return Pe.jsxs(jPe,{style:{height:"100%"},children:[Pe.jsxs(TE,{children:[e.map((o,l)=>{if(l!=0)return l<r-1?Pe.jsx(wv,{model:{direction:o.role==="user"?"outgoing":"incoming",message:$te(o.content),position:"single"}},l):Pe.jsx(wv,{model:{direction:o.role==="user"?"outgoing":"incoming",message:s[0],position:"single"}},l)}),s[1].length>0&&Pe.jsx("div",{style:{paddingTop:"5px",paddingBottom:"5px"},children:s[1].map((o,l)=>Pe.jsx(a0,{text:o,clickFunction:()=>t(o)},l))})]}),Pe.jsx(R2,{placeholder:"Type message here",attachButton:!1,onSend:t})]})}const RN=hr("div")(({theme:n})=>({textAlign:"center",height:"100%"}));function MBe(n){return Pe.jsxs(L1,{orientation:"vertical",style:{height:"100%",width:"100vw"},children:[Pe.jsx(Z0,{flex:.65,children:Pe.jsxs(L1,{orientation:"horizontal",children:[Pe.jsx(Z0,{flex:.3,children:Pe.jsx(RN,{style:{width:"100%"},children:Pe.jsx(xOe,{})})}),Pe.jsx(kf,{propagate:!0}),Pe.jsx(Z0,{flex:.7,children:Pe.jsx(RN,{style:{width:"100%",height:"100%"},children:Pe.jsx(CBe,{})})})]})}),Pe.jsx(kf,{propagate:!0}),Pe.jsx(Z0,{flex:.35,children:Pe.jsxs(L1,{orientation:"horizontal",children:[Pe.jsx(Z0,{children:Pe.jsx(RN,{children:Pe.jsx(FF,{isPlanningScreen:!0})})}),Pe.jsx(kf,{propagate:!0}),Pe.jsx(Z0,{children:Pe.jsx("div",{style:{textAlign:"center",height:"100%",alignItems:"center",display:"flex"},children:Pe.jsx(Lc,{container:!0,alignItems:"center",children:Pe.jsx(Lc,{item:!0,xs:12,alignItems:"center",children:Pe.jsx("img",{style:{alignContent:"center",width:"70%",height:"70%"},src:VK})})})})})]})})]})}function ABe(n){const e=Hn(t=>t.updateScreen);return Pe.jsxs(Lc,{container:!0,direction:"row",justifyContent:"center",spacing:2,style:{height:"100%",textAlign:"center",alignContent:"center",backgroundColor:"#E4E5F1",marginTop:0},children:[Pe.jsx(Lc,{item:!0,xs:1}),Pe.jsx(Lc,{item:!0,xs:3,children:Pe.jsx(a0,{text:TX,clickFunction:()=>e(iF),style:{padding:"50px"}})}),Pe.jsx(Lc,{item:!0,xs:2}),Pe.jsx(Lc,{item:!0,xs:3,children:Pe.jsx(a0,{text:SX,clickFunction:()=>e(fw),style:{padding:"50px"}})}),Pe.jsx(Lc,{item:!0,xs:1})]})}const kN=hr("div")(({theme:n})=>({textAlign:"center",height:"100%"}));Qg.common.defineBlocks(Nie);Object.assign(Cw.javascriptGenerator.forBlock,ik);function IBe(){const n=Hn(rs(o=>o.llmMode)),e=Hn(rs(o=>o.llmProcessing)),t=Hn(rs(o=>o.headerHeight)),r=Hn(o=>o.fullScreenPanel),s=Hn(o=>o.screenToShow);return Pe.jsxs(Ey,{width:"100vw",height:`calc(100vh - ${t}px)`,padding:0,children:[Pe.jsx($ve,{}),s===rF&&Pe.jsx(ABe,{}),s===iF&&Pe.jsx(MBe,{}),s===fw&&r&&Pe.jsx(QH,{style:{width:"100vw"}}),s===fw&&!r&&Pe.jsxs(L1,{orientation:"vertical",style:{height:"100%",width:"100vw"},children:[Pe.jsx(Z0,{flex:.55,children:Pe.jsxs(kN,{style:{width:"100%",height:"100%"},children:[r&&Pe.jsx(QH,{}),!r&&Pe.jsx(Nve,{})]})}),Pe.jsx(kf,{propagate:!0}),Pe.jsx(Z0,{flex:.45,children:Pe.jsxs(L1,{orientation:"horizontal",children:[Pe.jsx(Z0,{children:Pe.jsx(kN,{children:!n&&Pe.jsx(vOe,{})})}),Pe.jsx(kf,{propagate:!0}),Pe.jsx(Z0,{children:Pe.jsx(kN,{children:!n&&Pe.jsx(FF,{})})})]})})]}),Pe.jsx(Qk,{style:{color:"#fff",zIndex:1500},open:e,children:Pe.jsx("img",{src:Dve,style:{width:"10%"}})}),Pe.jsx(SOe,{}),Pe.jsx(EOe,{})]})}LN.createRoot(document.getElementById("root")).render(Pe.jsx(yt.StrictMode,{children:Pe.jsx(IBe,{})}));
